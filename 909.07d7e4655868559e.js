(()=>{var At={3909:(D,Ae,O)=>{"use strict";class Y{workerId;message;constructor(e,r){this.workerId=e,this.message=r}static builder(){return new Y(-1,null)}setWorkerId(e){return this.workerId=e,this}setMessage(e){return this.message=e,this}}let ae=(()=>{class t{type;id=0;callbackId=-1;static staticId=0;constructor(r){this.type=r,this.id=t.newId()}static newId(){return t.staticId++}setCallbackId(r){return this.callbackId=r,this}}return t})(),Tt=(()=>{class t extends ae{pageLoadedFrom;static TYPE="SetupWorkerRequest";constructor(r){super(t.TYPE),this.pageLoadedFrom=r}static builder(){return new t("")}setPageLoadedFrom(r){return this.pageLoadedFrom=r,this}}return t})(),Te=(()=>{class t extends ae{formula;static TYPE="CalculateWorkerRequest";constructor(r){super(t.TYPE),this.formula=r}static builder(){return new t("")}setFormula(r){return this.formula=r,this}}return t})(),Pe=(()=>{class t extends ae{gameId;commands;result;static TYPE="CalculateChessWorkerRequest";constructor(r,n,i){super(t.TYPE),this.gameId=r,this.commands=n,this.result=i}static builder(){return new t("","","")}setCommands(r,...n){return this.gameId=r,this.commands=[r,...n].join("\n"),this}setResult(r,n){return this.gameId=r,this.result=n,this}}return t})();class z extends ae{}let Pt=(()=>{class t extends z{libraryRef;libraryType;static TYPE="LibraryInfoRequest";constructor(r,n){super(t.TYPE),this.libraryRef=r,this.libraryType=n}static builder(){return new t("","")}setLibraryRef(r){return this.libraryRef=r,this}setLibraryType(r){return this.libraryType=r,this}}return t})(),Lt=(()=>{class t extends z{libraryType;bookRef;loadBooksEnabled;static TYPE="BookInfoRequest";constructor(r,n,i){super(t.TYPE),this.libraryType=r,this.bookRef=n,this.loadBooksEnabled=i}static builder(){return new t("","",!0)}setLibraryType(r){return this.libraryType=r,this}setBookRef(r){return this.bookRef=r,this}setLoadBooksEnabled(r){return this.loadBooksEnabled=r,this}}return t})(),Mt=(()=>{class t extends z{libraryType;bookRef;languages;static TYPE="BookRequest";constructor(r,n,i){super(t.TYPE),this.libraryType=r,this.bookRef=n,this.languages=i}static builder(){return new t("","",[])}setLibraryType(r){return this.libraryType=r,this}setBookRef(r){return this.bookRef=r,this}setLanguages(r){return this.languages=r,this}addLanguage(r){return this.languages.push(r),this}}return t})(),Ct=(()=>{class t extends z{pages;static TYPE="PagesRequest";constructor(r){super(t.TYPE),this.pages=r}static builder(){return new t([])}setBookPages(r){return this.pages=r,this}addBookPage(r){return this.pages.push(r),this}}return t})(),Dt=(()=>{class t extends z{pages;static TYPE="PagesResponse";constructor(r){super(t.TYPE),this.pages=r}static builder(){return new t([])}setPages(r){return this.pages=r,this}addPage(r){return this.pages.push(r),this}}return t})();class Le{bookRef;path;content;constructor(e,r,n){this.bookRef=e,this.path=r,this.content=n}static builder(){return new Le("","","")}setBookRef(e){return this.bookRef=e,this}setPath(e){return this.path=e,this}setContent(e){return this.content=e,this}}let It=(()=>{class t extends z{metaBooks;static TYPE="BookResponse";constructor(r){super(t.TYPE),this.metaBooks=r}static builder(){return new t([])}setMetaBooks(r){return this.metaBooks=r,this}addMetaBook(r){return this.metaBooks.push(r),this}}return t})(),Ft=(()=>{class t extends z{bookRef;metaContent;loadBooksEnabled;static TYPE="BookInfoResponse";constructor(r,n,i){super(t.TYPE),this.bookRef=r,this.metaContent=n,this.loadBooksEnabled=i}static builder(){return new t("","",!0)}setBookRef(r){return this.bookRef=r,this}setMetaContent(r){return this.metaContent=r,this}setLoadBooksEnabled(r){return this.loadBooksEnabled=r,this}}return t})(),xt=(()=>{class t extends z{libraryRef;metaContent;static TYPE="LibraryInfoResponse";constructor(r,n){super(t.TYPE),this.libraryRef=r,this.metaContent=n}static builder(){return new t("","")}setLibraryRef(r){return this.libraryRef=r,this}setMetaContent(r){return this.metaContent=r,this}}return t})();class Bt{messageSender;requests=new Map;constructor(e=null){this.messageSender=e}send(e,r){return this.messageSender&&(this.requests.set(r.type,r),this.messageSender(e,r)),this}post(e,r){return this}runAll(e,r,n){let i=0,o=()=>{if(i>=e.length)return void(n&&n(!0));let a=e[i++];r(a,l=>{l?o():n&&n(!1)})};o()}}class Q{static merge(e,r){if(!e&&!r)return"";if(!e)return r;if(!r)return e;let n=e.endsWith("/"),i=r.startsWith("/"),o=e;return n!=i?o+=r:n?o+=i?r.substring(1):r:o?o+="/"+r:o=r,o}}class $e{static dtr(e,r){for(var n=r>=0?r:47,i=new ArrayBuffer(e.length-1),o=new Uint8Array(i),a=n,l=0;l<e.length;++l){var d=255&(e[l]^a);l>0&&(o[l-1]=d),a=255&(a+d^5)}return o}static fromByteArray(e){let r="";for(let n=0;n<e.length;n+=2)r+=String.fromCharCode(e[n+1]<<8|e[n]);return r}}const Ge="2.1.023",Yt=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io",semail:"ZXZnZW55LmFsaXNraW5AZ21haWwuY29t"}];class F{id;name;shape;menuShape;routes;routeEnabled;applicationEnabled;applicationHidden;applicationLogoText;libraryType;libraryRef;constructor(e,r,n,i,o,a,l,c,d,w,E){this.id=e,this.name=r,this.shape=n,this.menuShape=i,this.routes=o,this.routeEnabled=a,this.applicationEnabled=l,this.applicationHidden=c,this.applicationLogoText=d,this.libraryType=w,this.libraryRef=E}static builder(){return new F("","","","",[],!1,!1,!1,"","prod","book")}setId(e){return this.id=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setMenuShape(e){return this.menuShape=e,this}setRoutes(e){return this.routes=e,this}setRouteEnabled(e){return this.routeEnabled=e,this}setApplicatioinEnabled(e){return this.applicationEnabled=e,this}setApplicationLogoText(e){return this.applicationLogoText=e,this}setLibraryType(e){return this.libraryType=e,this}setLibraryRef(e){return this.libraryRef=e,this}enable(e=!0){return this.routeEnabled=e,this.applicationEnabled=e,this}hide(e=!0){return this.applicationHidden=e,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class L{onClick;isActive;isHidden;syncHandler;sLink="";sName="";sShape="";bHasBadge=!1;bHasAlert=!1;workingSync=0;constructor(e,r,n,i,o,a=null,l=null,c=null,d=null){this.onClick=a,this.isActive=l,this.isHidden=c,this.syncHandler=d,this.setLink(e),this.setName(r),this.setShape(n),this.setHasBadge(i),this.setHasAlert(o)}static builder(){return new L("","","",!1,!1,null)}setSyncHandler(e){return this.syncHandler=e,this}setIsActive(e){return this.isActive=e,this}setIsHidden(e){return this.isHidden=e,this}setOnClick(e){return this.onClick=e,this}sync(){if(!(this.workingSync>0)){try{++this.workingSync,this.syncHandler&&this.syncHandler(this)}catch{}--this.workingSync}}get link(){return this.sync(),this.sLink}set link(e){this.sLink=e}get name(){return this.sync(),this.sName}set name(e){this.sName=e}get shape(){return this.sync(),this.sShape}set shape(e){this.sShape=e}get hasBadge(){return this.sync(),this.bHasBadge}set hasBadge(e){this.bHasBadge=e}get hasAlert(){return this.sync(),this.bHasAlert}set hasAlert(e){this.bHasAlert=e}setLink(e){return this.link=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setHasBadge(e){return this.hasBadge=e,this}setHasAlert(e){return this.hasAlert=e,this}runOnClick(){this.onClick&&this.onClick(this)}}class zt{version="";applicationId="memorial";applicationName="Memorial";developers=Yt;production=!0;platform="Web";relativeCacheService=!0;serviceAPIHost="";staticDataHost="";redirectToServerAfterItIsReadyAdress="";portAutoDetection=!0;portAutoIncrementValue=0;defaultRoute="/compiler";coding=!0;showOldVersions=!1;show3D=!1;oldVersionsName="V1";useDictionaries=!1;useReactLang=!0;usePlotlyLang=!0;useBootstrapLang=!0;useHtmlLang=!0;useCJsLang=!0;useJsLang=!0;useCyrillicLang=!0;useLocalStorage=!0;useMenuExamplesEx=!1;themeName="blue";serverType="rest";applications=[];constructor(){this.addApplication(F.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home").setRoutes([L.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(F.builder().setId("logos").setName("\u041b\u043e\u0433\u043e").setShape("scroll").setApplicationLogoText("\u041f\u0435\u0447\u0430\u0442\u044c|\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u043e\u0432").setRoutes([L.builder().setLink("logos").setName("\u041b\u043e\u0433\u043e").setShape("print")]).hide()).addApplication(F.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("check-circle").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([L.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),L.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),L.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image")]).hide()).addApplication(F.builder().setId("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle").setApplicationLogoText("\u0422\u0435\u0441\u0442\u044b|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([L.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")]).hide()).addApplication(F.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setShape("scroll").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([L.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")]).hide()).addApplication(F.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("my-logo-icon").setMenuShape("book").setLibraryType("prod").setLibraryRef("biblia").setRoutes([L.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(F.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("my-logo-icon").setMenuShape("form").setLibraryType("mprod").setLibraryRef("ps").setRoutes([L.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users")])).addApplication(F.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setLibraryType("clndrprod").setLibraryRef("clndr").setRoutes([L.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")])).addApplication(F.builder().setId("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon").setLibraryType("crossprod").setLibraryRef("cross").setRoutes([L.builder().setLink("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon")])).addApplication(F.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setLibraryType("compprod").setLibraryRef("comp").setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([L.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(F.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setLibraryType("schprod").setLibraryRef("sch").setRoutes([L.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).addApplication(F.builder().setId("calculator").setName("\u0420\u0435\u0448IDE").setShape("calculator").setLibraryType("cprod").setLibraryRef("calc").setApplicationLogoText("\u0420\u0435\u0448IDE|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([L.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")])).addApplication(F.builder().setId("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king").setLibraryType("chessprod").setLibraryRef("chess").setApplicationLogoText("\u0428\u0430\u0445\u043c\u0430\u0442\u044b|\u0438\u0433\u0440\u0430").setRoutes([L.builder().setLink("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king")])).setVersion("BV."+Ge),this.afterConstruct()}setUseMenuExamplesEx(e){return this.useMenuExamplesEx=e,this}addApplication(e){if(null!=this.applications.find(r=>r.id==e.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${e.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(e),this}setVersion(e){return this.version=e,this}setProduction(e){return this.production=e,this}setPlatform(e){return this.platform=e,this}setRelativeCacheService(e){return this.relativeCacheService=e,this}setServiceAPIHost(e){return this.serviceAPIHost=e,this}setStaticDataHost(e){return this.staticDataHost=e,this}setRedirectToServerAfterItIsReadyAdress(e){return this.redirectToServerAfterItIsReadyAdress=e,this}setPortAutoDetection(e){return this.portAutoDetection=e,this}setPortAutoIncrementValue(e){return this.portAutoIncrementValue=e,this}setDefaultRoute(e){return this.defaultRoute=e,this}setServerType(e){return this.serverType=e,this}setCoding(e){return this.coding=e,this}setShowOldVersions(e){return this.showOldVersions=e,this}setUseDictionaries(e){return this.useDictionaries=e,this}afterConstruct(){}}class Me extends zt{afterConstruct(){super.afterConstruct(),this.setVersion("WPR."+Ge).setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((e,r,n)=>e.enable())}static builder(){return new Me}}const Wt=Me.builder();class Ce{id;handler;constructor(e,r){this.id=e,this.handler=r}static builder(){return new Ce(-1,()=>{})}setId(e){return this.id=e,this}setHandler(e){return this.handler=e,this}}class jt{id=1;handlers=new Map;targetHandlers=new Map;messagesToTarget=new Map;messagesTimeoutMs=18e4;newId(){return this.id++}putMessage(e){let r=e.target,n=this.messagesToTarget.get(r);return null==n&&(n=[]),n.push(e),n=this.removeOld(n),n?this.messagesToTarget.set(r,n):this.messagesToTarget.delete(r),this}getMessages(e,r=!0){let n=this.messagesToTarget.get(e),i=this.removeOld(n);return null==n&&r&&this.messagesToTarget.delete(e),i}removeAllOld(){let e=[];return this.messagesToTarget.forEach((r,n,i)=>{e.push(n)}),e.forEach(r=>{this.getMessages(r,!1)}),this}removeOld(e){if(void 0===e)return;let r=Date.now(),n=e.findIndex(o=>o.time+this.messagesTimeoutMs>r),i=e;return n>0&&(i=e.splice(0,n)),i}sendMessage(e){this.handlers.forEach((n,i,o)=>{n(e)});let r=this.targetHandlers.get(e.target);r&&r.forEach(n=>{n.handler(e)})}addHandler(e){let r=this.newId();this.handlers.set(r,e);let n=this;return{unsubscribe(){n.removeHandler(r)}}}addTargetHandler(e,r){let n=this.newId(),i=this.targetHandlers.get(e);null==i&&(i=[],this.targetHandlers.set(e,i)),i.push(Ce.builder().setId(n).setHandler(r));let o=this;return{unsubscribe(){o.removeTargetHandler(e,n)}}}removeAllTargetHandlers(e){return this.targetHandlers.delete(e),this}removeHandler(e){this.handlers.delete(e)}removeTargetHandler(e,r){let n=this.targetHandlers.get(e);if(n){let i=n.filter((o,a,l)=>o.id!=r);i.length?this.targetHandlers.set(e,i):this.targetHandlers.delete(e)}}}class De{subscription;bean;ctor;validator;constructor(e,r,n,i){this.subscription=e,this.bean=r,this.ctor=n,this.validator=i}static builder(){return new De(null,null,null,null)}validate(){return this.validator&&this.validator(),this}resubscribe(e){return this.unsubscribe(),this.bean=e.getBeanByCtorOrNull(this.ctor),this.subscription=e.subscribeBeanByCtor(this.ctor,r=>{this.bean=r,this.validate()}),this}unsubscribe(){this.subscription?.unsubscribe(),this.subscription&&(this.subscription=null)}setSubscription(e){return this.subscription=e,this}setBean(e){return this.bean=e,this}setCtor(e){return this.ctor=e,this}setValidator(e){return this.validator=e,this}activate(){if(!this.bean)throw new Error("\u041d\u0435\u0442 \u0431\u0438\u043d\u0430 \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438.");this.bean.activate()}}class qt{beans=new Map;apiSvc=null;setApiSvc(e){return this.apiSvc=e,this}apiSvcCheckAndGet(){if(!this.apiSvc)throw new Error("\u041d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d API \u0441\u0435\u0440\u0432\u0438\u0441.");return this.apiSvc}addBeanCtors(...e){return e.forEach(r=>{if(!r.name)throw new Error("\u041d\u0435\u0442 \u0438\u043c\u0435\u043d\u0438 \u043a\u043b\u0430\u0441\u0441\u0430.");const n=De.builder().setCtor(r).setValidator(()=>this.validate());this.apiSvc&&n.resubscribe(this.apiSvc),this.beans.set(n.ctor,n)}),this}getBeanByCtor(e){let r=this.beans.get(e);if(null==r)throw new Error("\u0411\u0438\u043d \u043d\u0435 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "+e.name);return r.bean}reconstruct(){const e=this.apiSvcCheckAndGet();this.beans.forEach(r=>{r.resubscribe(e)})}validate(){[...this.beans.keys()].map(r=>null!=this.beans.get(r)?.bean).reduce((r,n)=>r&&n,!0)&&this.onValid()}onValid(){}dependencies(){return[...this.beans.keys()].map(e=>this.beans.get(e)).filter(e=>null!=e).map(e=>e.ctor)}construct(e){return this.setApiSvc(e),this.reconstruct(),this}activate(){return this}deactivate(){return this}deconstruct(){return this}}let Vt=(()=>{class t extends qt{static currentEnvironmentValue=null;static setCurrentEnvironment(r){t.currentEnvironmentValue=r}static currentEnvironment(r){return t.currentEnvironmentValue?t.currentEnvironmentValue:r}breakpoints=null;debugPositionsToLineMap=null;debugScriptRunning=!1;debugVar=null;cache=new Map;tsLibs=null;jses5pLibs=null;tspLibs=null;environment=t.currentEnvironment(Wt);themeName=this.environment.themeName;serviceAPIHost=this.environment.serviceAPIHost;staticDataHost=this.environment.staticDataHost;redirectToServerAfterItIsReadyAdress=this.environment.redirectToServerAfterItIsReadyAdress;portAutoDetection=this.environment.portAutoDetection;portAutoIncrementValue=this.environment.portAutoIncrementValue;messageBus=new jt;alerts=[];pageLoadedFrom="";authId="";authIdKey="authId";authBody="";baseHref="";waitingIOOperationCount=0;waitingIOOperationValue=0;waitingIOOperationValueMax=100;outletOnly=!1;autoLoginApplication=!0;defaultApplication="";defaultLoginType="login";showType=this.defaultLoginType;enableDefaultPersons=!0;production=this.environment.production;coding=this.environment.coding;showOldVersions=this.environment.showOldVersions;show3D=this.environment.show3D;oldVersionsName=this.environment.oldVersionsName;useDictionaries=this.environment.useDictionaries;usePlotlyLang=this.environment.usePlotlyLang;useReactLang=this.environment.useReactLang;useBootstrapLang=this.environment.useBootstrapLang;useHtmlLang=this.environment.useHtmlLang;useCJsLang=this.environment.useCJsLang;useJsLang=this.environment.useJsLang;useCyrillicLang=this.environment.useCyrillicLang;useMenuExamplesEx=this.environment.useMenuExamplesEx;dictionaries=null;useLocalStorage=this.environment.useLocalStorage;setDictionaries(r){return this.dictionaries=r,this}setTsLibs(r){return this.tsLibs=r,this}setJses5pLibs(r){return this.jses5pLibs=r,this}isProduction(){return this.production}isDebug(){return!this.production}logMessage(r){return this.logObjects(r)}logObjects(...r){if(!this.isProduction())return console.log(...r),this}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}isUseDictionaries(){return this.useDictionaries}setShowNormal(){return this.showType="normal",this}setShowLogin(r=null){return null!=r&&(this.autoLoginApplication=r),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let r="";return this.environment.developers.forEach(n=>{r=r+(r?"_":"")+n.id}),r}get developerName(){let r="";return this.environment.developers.forEach(n=>{r=r+(r?", ":"")+n.name}),r}get developerNameSortOrder(){let r="";return this.environment.developers.forEach(n=>{r=r+(r?", ":"")+n.nameSortOrder}),r}get developerLink(){return this.environment.developers[0].link}get developerSemail(){return this.environment.developers[0].semail}getDeveloperSemail(r){let n=this.environment.developers.filter(i=>i.id==r);return n.length>0?n[0].semail:this.developerSemail}setPageLoadedFrom(r,n=!1){return this.pageLoadedFrom=r,n&&this.runPortAutoDetection(),this.setupBaseHref(),this}constructor(){super(),typeof pageLoadedFrom<"u"&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}setupBaseHref(){let r=this.pageLoadedFrom;r.endsWith("/")&&(r=r.substring(0,r.length-1)),this.baseHref=r}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(r){const n=r.lastIndexOf(":");if(n<0)return r;let i="";for(let l=n+1;l<r.length&&"0123456789".indexOf(r.charAt(l))>=0;++l)i+=r.charAt(l);return isNaN(+i)?r:r.substring(0,n)+":"+(+location.port+this.environment.portAutoIncrementValue)+r.substring(n+1+i.length,r.length)}addAlert(r){r.setConfig(this),this.alerts.push(r),this.post(()=>{window?.scrollTo(0,0)},50)}removeAlert(r){const n=this.alerts.findIndex((i,o,a)=>i===r);n>=0&&this.alerts.splice(n,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(r){return this.environment.platform===r}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(r){return this.environment.serverType===r}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(r){return this.themeName===r}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(r,n=0){setTimeout(()=>{r()},n)}getApplications(){return this.environment.applications.filter(r=>r.applicationEnabled&&!r.applicationHidden)}getApplication(){let r=null;return this.getApplications().forEach(n=>{n.id==this.defaultApplication&&(r=n)}),r}getApplicationByNameOrNull(r){let n=null;return this.getApplications().forEach(i=>{(i.name==r||i.id==r)&&(n=i)}),n}getSingleAppOrNull(){let r=null,n=this.getApplications();return 1==n.length&&(r=n[0]),r}}return t})();D=O.hmd(D);let le=null,W=new class Ht extends Bt{cacheService=null;constructor(e=null){super(e)}getCacheService(){return this.cacheService}setCacheService(e){return this.cacheService=e,this}post(e,r){switch(r.type){case Pt.TYPE:this.onLibraryInfoRequest(e,r);break;case Lt.TYPE:this.onBookInfoRequest(e,r);break;case Mt.TYPE:this.onBookRequest(e,r);break;case Ct.TYPE:this.onPagesRequest(e,r);break;default:throw new Error(`Unknown message type: ${r.type}.`)}return this}onLibraryInfoRequest(e,r){let n=xt.builder().setCallbackId(r.id);r.libraryRef?this.loadLibraryInfo(r,n,r.libraryType+"/"+r.libraryRef+".library.txt",i=>{this.send(e,n)}):this.send(e,n)}loadLibraryInfo(e,r,n,i=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{r.setMetaContent(a||"").setLibraryRef(e.libraryRef),i&&i(!!a)})}onBookInfoRequest(e,r){let n=Ft.builder().setCallbackId(r.id);r.bookRef?this.loadBookInfo(r,n,r.libraryType+"/"+r.bookRef+".book.txt",i=>{this.send(e,n)}):this.send(e,n)}loadBookInfo(e,r,n,i=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{r.setMetaContent(a||"").setBookRef(e.bookRef),i&&i(!!a)})}onBookRequest(e,r){let n=It.builder().setCallbackId(r.id),i=r.languages.map(o=>o);i.length||i.push("CS","Sinodal"),i=i.map(o=>Q.merge("/"+r.libraryType,r.bookRef+"_"+o+"/index.txt")),r.bookRef?this.runAll(i,(o,a)=>{this.loadBookPath(r,n,o,a)},o=>{this.send(e,n)}):this.send(e,n)}loadBookPath(e,r,n,i=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{r.addMetaBook(Le.builder().setBookRef(e.bookRef).setPath(n).setContent(a||"")),i&&i(!!a)})}onPagesRequest(e,r){let n=Dt.builder().setCallbackId(r.id);this.runAll(r.pages,(i,o)=>{let a=this.findPathPrefix(i.bookPath),l=this.cacheService.getRestPoint(Q.merge(a,i.bookPage),null);this.cacheService.getTextRestcallUrl(l,c=>{n.addPage(c||""),o(!0)})},i=>{this.send(e,n)})}findPathPrefix(e){let r=e.lastIndexOf("/");return e.substring(0,r)}}((t,e)=>{postMessage(t?Y.builder().setWorkerId(t.workerId).setMessage(e):e)}),Qe=new Vt;W.setCacheService(new class Nt{config;sRestPoint;textCache=new Map;waitingTextCache=new Map;get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}constructor(e,r="/static"){this.config=e,this.sRestPoint=r}getRestPoint(e,r,n=null){const i=this.config.staticDataHost.startsWith("http://")||this.config.staticDataHost.startsWith("https://");let o=i?this.config.staticDataHost:this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return!i&&this.config.staticDataHost&&(o=Q.merge(o,this.config.staticDataHost)),Q.merge(Q.merge(r||o,n??this.restPoint),e)}completeOnDone(e,r){let n=this.waitingTextCache.get(e);n&&(n.forEach(i=>{this.config.post(()=>{i&&i(r)})}),this.waitingTextCache.delete(e))}getTextRestcallUrl(e,r){if(this.coding){if(this.textCache.has(e)){let n=this.textCache.get(e);if(null!=n)return void this.config.post(()=>{r&&r(n)})}return this.waitingTextCache.has(e)?void(r&&this.waitingTextCache.get(e).push(r)):(r&&this.waitingTextCache.set(e,[r]),this.getBinRestcallUrlRaw(e,n=>{if(n){let i=new Uint8Array(n),o=$e.fromByteArray(i);this.completeOnDone(e,o)}else r&&r(null)}))}return this.getTextRestcallUrlRaw(e,r)}getTextRestcallUrlRaw(e,r){if(this.textCache.has(e)){let i=this.textCache.get(e);if(null!=i)return void this.config.post(()=>{r&&r(i)})}if(this.waitingTextCache.has(e))r&&this.waitingTextCache.get(e).push(r);else{r&&this.waitingTextCache.set(e,[r]);var n=new XMLHttpRequest;n.onload=()=>{if(r){let i=4===n.readyState&&200===n.status?n.responseText:null;null!=i?this.textCache.set(e,i):this.textCache.delete(e),this.completeOnDone(e,i)}},n.open("get",e,!0),n.send()}}getBinRestcallUrlRaw(e,r,n=!0){let i=e;if(this.coding){let a=i.lastIndexOf(".");a>=0&&(i=i.substring(0,a)+".bin")}var o=new XMLHttpRequest;o.onload=()=>{if(r){let l=new Uint8Array(4===o.readyState&&200===o.status?o.response:null),c=n?$e.dtr(l,-1):l;r&&r(c)}},o.open("get",i,!0),o.responseType="arraybuffer",o.send()}}(Qe));let et=!1,tt=!1;addEventListener("message",({data:t})=>{let e=t;if("string"==typeof e.message){const r=`worker response to ${t}`;postMessage(Y.builder().setWorkerId(e.workerId).setMessage(r))}else if(e.message.type===Tt.TYPE)Qe.setPageLoadedFrom(e.message.pageLoadedFrom,!0);else if(e.message.type===Te.TYPE){let r=()=>{if(u&&u._Calculate){let n=e.message;const i=2048,o=u._malloc(i),a=20480,l=u._malloc(a);ie(n.formula,u.HEAP8,o,i),u._Calculate(o,a,l);const c=q(u.HEAP8,l,a);u._free(l),u._free(o),postMessage(Y.builder().setWorkerId(e.workerId).setMessage(Te.builder().setFormula(c)))}else postMessage(Y.builder().setWorkerId(e.workerId).setMessage(Te.builder().setFormula("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};et?r():W.getCacheService()?.getBinRestcallUrlRaw(W.getCacheService()?.getRestPoint("data/memorial.bin"),n=>{if(null!=n){const i=n.byteLength,o=u._malloc(i);u.HEAP8.set(n,o),u._Setup(o,i),u._free(o),et=!0,r()}},W.getCacheService()?.coding)}else if(e.message.type===Pe.TYPE){let r=()=>{if(u&&u._ChessCalculate){let n=e.message;const i=2048,o=u._malloc(i),a=20480,l=u._malloc(a);ie(n.commands,u.HEAP8,o,i),le=e,u._ChessCalculate(o,a,l),le=null,q(u.HEAP8,l,a),u._free(l),u._free(o)}else postMessage(Y.builder().setWorkerId(e.workerId).setResult(Pe.builder().setResult(e.gameId,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};tt?r():W.getCacheService()?.getBinRestcallUrlRaw(W.getCacheService()?.getRestPoint("data/chessapp.bin"),n=>{if(null!=n){const i=n.byteLength,o=u._malloc(i);u.HEAP8.set(n,o),u._ChessSetup(o,i),tt=!0,r()}},W.getCacheService()?.coding)}else W.post(e,e.message)});var ee,te,de,u=typeof u<"u"?u:{},rt=Object.assign({},u),Ie=[],ue="./this.program",ce=(t,e)=>{throw e},nt="object"==typeof window,J="function"==typeof importScripts,he="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,B="";if(he){var Fe=O(1653),xe=O(1633);B=J?xe.dirname(B)+"/":__dirname+"/",ee=(t,e)=>(t=ve(t)?new URL(t):xe.normalize(t),Fe.readFileSync(t,e?void 0:"utf8")),de=t=>{var e=ee(t,!0);return e.buffer||(e=new Uint8Array(e)),e},te=(t,e,r,n=!0)=>{t=ve(t)?new URL(t):xe.normalize(t),Fe.readFile(t,n?void 0:"utf8",(i,o)=>{i?r(i):e(n?o.buffer:o)})},!u.thisProgram&&process.argv.length>1&&(ue=process.argv[1].replace(/\\/g,"/")),Ie=process.argv.slice(2),D.exports=u,process.on("uncaughtException",t=>{if(!("unwind"===t||t instanceof ge||t.context instanceof ge))throw t}),ce=(t,e)=>{throw process.exitCode=t,e},u.inspect=()=>"[Emscripten Module object]"}else(nt||J)&&(J?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),B=0!==B.indexOf("blob:")?B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ee=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},J&&(de=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),te=(t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?e(n.response):r()},n.onerror=r,n.send(null)});var re,Be=u.print||console.log.bind(console),j=u.printErr||console.error.bind(console);Object.assign(u,rt),rt=null,u.arguments&&(Ie=u.arguments),u.thisProgram&&(ue=u.thisProgram),u.quit&&(ce=u.quit),u.wasmBinary&&(re=u.wasmBinary),"object"!=typeof WebAssembly&&K("no native wasm support detected");var fe,pe,M,$,ne,g,S,Ne=!1;function st(){var t=fe.buffer;u.HEAP8=M=new Int8Array(t),u.HEAP16=ne=new Int16Array(t),u.HEAPU8=$=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAP32=g=new Int32Array(t),u.HEAPU32=S=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=new Float64Array(t)}var it=[],ot=[],Qt=[],at=[],G=0,He=null,se=null;function Oe(t){G++,u.monitorRunDependencies&&u.monitorRunDependencies(G)}function me(t){if(G--,u.monitorRunDependencies&&u.monitorRunDependencies(G),0==G&&(null!==He&&(clearInterval(He),He=null),se)){var e=se;se=null,e()}}function K(t){throw u.onAbort&&u.onAbort(t),j(t="Aborted("+t+")"),Ne=!0,pe=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}var Z,v,A,lt=t=>t.startsWith("data:application/octet-stream;base64,"),ve=t=>t.startsWith("file://");function ut(t){if(t==Z&&re)return new Uint8Array(re);if(de)return de(t);throw"both async and sync fetching of the wasm failed"}function ct(t,e,r){return function ur(t){if(!re&&(nt||J)){if("function"==typeof fetch&&!ve(t))return fetch(t,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()}).catch(()=>ut(t));if(te)return new Promise((e,r)=>{te(t,n=>e(new Uint8Array(n)),r)})}return Promise.resolve().then(()=>ut(t))}(t).then(n=>WebAssembly.instantiate(n,e)).then(n=>n).then(r,n=>{j(`failed to asynchronously prepare wasm: ${n}`),K(n)})}function ge(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}lt(Z="mathapp.wasm")||(Z=function $t(t){return u.locateFile?u.locateFile(t,B):B+t}(Z));var ye=t=>{for(;t.length>0;)t.shift()(u)},fr=u.noExitRuntime||!0,ht=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,q=(t,e,r)=>{for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&ht)return ht.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if(192!=(224&a)){var c=63&t[e++];if((a=224==(240&a)?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var d=a-65536;o+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o},V=(t,e)=>t?q($,t,e):"";function mr(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(e){S[this.ptr+4>>2]=e},this.get_type=function(){return S[this.ptr+4>>2]},this.set_destructor=function(e){S[this.ptr+8>>2]=e},this.get_destructor=function(){return S[this.ptr+8>>2]},this.set_caught=function(e){M[this.ptr+12|0]=e=e?1:0},this.get_caught=function(){return 0!=M[this.ptr+12|0]},this.set_rethrown=function(e){M[this.ptr+13|0]=e=e?1:0},this.get_rethrown=function(){return 0!=M[this.ptr+13|0]},this.init=function(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)},this.set_adjusted_ptr=function(e){S[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return S[this.ptr+16>>2]},this.get_exception_ptr=function(){if(kt(this.get_type()))return S[this.excPtr>>2];var r=this.get_adjusted_ptr();return 0!==r?r:this.excPtr}}var k={isAbs:t=>"/"===t.charAt(0),splitPath:t=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1),normalizeArray:(t,e)=>{for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},normalize:t=>{var e=k.isAbs(t),r="/"===t.substr(-1);return!(t=k.normalizeArray(t.split("/").filter(n=>!!n),!e).join("/"))&&!e&&(t="."),t&&r&&(t+="/"),(e?"/":"")+t},dirname:t=>{var e=k.splitPath(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:t=>{if("/"===t)return"/";var e=(t=(t=k.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},join:function(){var t=Array.prototype.slice.call(arguments);return k.normalize(t.join("/"))},join2:(t,e)=>k.normalize(t+"/"+e)},ft=t=>(ft=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return n=>crypto.getRandomValues(n);if(he)try{var t=O(231);if(t.randomFillSync)return n=>t.randomFillSync(n);var r=t.randomBytes;return n=>(n.set(r(n.byteLength)),n)}catch{}K("initRandomDevice")})())(t),U={resolve:function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:s.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,e=k.isAbs(n)}return(e?"/":"")+(t=k.normalizeArray(t.split("/").filter(i=>!!i),!e).join("/"))||"."},relative:(t,e)=>{function r(d){for(var w=0;w<d.length&&""===d[w];w++);for(var E=d.length-1;E>=0&&""===d[E];E--);return w>E?[]:d.slice(w,E-w+1)}t=U.resolve(t).substr(1),e=U.resolve(e).substr(1);for(var n=r(t.split("/")),i=r(e.split("/")),o=Math.min(n.length,i.length),a=o,l=0;l<o;l++)if(n[l]!==i[l]){a=l;break}var c=[];for(l=a;l<n.length;l++)c.push("..");return(c=c.concat(i.slice(a))).join("/")}},Ue=[],we=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e},ie=(t,e,r,n)=>{if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(r>=o)break;e[r++]=l}else if(l<=2047){if(r+1>=o)break;e[r++]=192|l>>6,e[r++]=128|63&l}else if(l<=65535){if(r+2>=o)break;e[r++]=224|l>>12,e[r++]=128|l>>6&63,e[r++]=128|63&l}else{if(r+3>=o)break;e[r++]=240|l>>18,e[r++]=128|l>>12&63,e[r++]=128|l>>6&63,e[r++]=128|63&l}}return e[r]=0,r-i};function be(t,e,r){var n=r>0?r:we(t)+1,i=new Array(n),o=ie(t,i,0,i.length);return e&&(i.length=o),i}var mt,X={ttys:[],init(){},shutdown(){},register(t,e){X.ttys[t]={input:[],output:[],ops:e},s.registerDevice(t,X.stream_ops)},stream_ops:{open(t){var e=X.ttys[t.node.rdev];if(!e)throw new s.ErrnoError(43);t.tty=e,t.seekable=!1},close(t){t.tty.ops.fsync(t.tty)},fsync(t){t.tty.ops.fsync(t.tty)},read(t,e,r,n,i){if(!t.tty||!t.tty.ops.get_char)throw new s.ErrnoError(60);for(var o=0,a=0;a<n;a++){var l;try{l=t.tty.ops.get_char(t.tty)}catch{throw new s.ErrnoError(29)}if(void 0===l&&0===o)throw new s.ErrnoError(6);if(null==l)break;o++,e[r+a]=l}return o&&(t.node.timestamp=Date.now()),o},write(t,e,r,n,i){if(!t.tty||!t.tty.ops.put_char)throw new s.ErrnoError(60);try{for(var o=0;o<n;o++)t.tty.ops.put_char(t.tty,e[r+o])}catch{throw new s.ErrnoError(29)}return n&&(t.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:t=>(()=>{if(!Ue.length){var t=null;if(he){var r=Buffer.alloc(256),n=0,i=process.stdin.fd;try{n=Fe.readSync(i,r)}catch(o){if(!o.toString().includes("EOF"))throw o;n=0}t=n>0?r.slice(0,n).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;Ue=be(t,!0)}return Ue.shift()})(),put_char(t,e){null===e||10===e?(Be(q(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync(t){t.output&&t.output.length>0&&(Be(q(t.output,0)),t.output=[])},ioctl_tcgets:t=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(t,e,r)=>0,ioctl_tiocgwinsz:t=>[24,80]},default_tty1_ops:{put_char(t,e){null===e||10===e?(j(q(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},fsync(t){t.output&&t.output.length>0&&(j(q(t.output,0)),t.output=[])}}},pt=t=>{t=((t,e)=>65536*Math.ceil(t/65536))(t);var e=_t(65536,t);return e?((t,e)=>($.fill(0,t,t+e),t))(e,t):0},y={ops_table:null,mount:t=>y.createNode(null,"/",16895,0),createNode(t,e,r,n){if(s.isBlkdev(r)||s.isFIFO(r))throw new s.ErrnoError(63);y.ops_table||(y.ops_table={dir:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr,lookup:y.node_ops.lookup,mknod:y.node_ops.mknod,rename:y.node_ops.rename,unlink:y.node_ops.unlink,rmdir:y.node_ops.rmdir,readdir:y.node_ops.readdir,symlink:y.node_ops.symlink},stream:{llseek:y.stream_ops.llseek}},file:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr},stream:{llseek:y.stream_ops.llseek,read:y.stream_ops.read,write:y.stream_ops.write,allocate:y.stream_ops.allocate,mmap:y.stream_ops.mmap,msync:y.stream_ops.msync}},link:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr,readlink:y.node_ops.readlink},stream:{}},chrdev:{node:{getattr:y.node_ops.getattr,setattr:y.node_ops.setattr},stream:s.chrdev_stream_ops}});var i=s.createNode(t,e,r,n);return s.isDir(i.mode)?(i.node_ops=y.ops_table.dir.node,i.stream_ops=y.ops_table.dir.stream,i.contents={}):s.isFile(i.mode)?(i.node_ops=y.ops_table.file.node,i.stream_ops=y.ops_table.file.stream,i.usedBytes=0,i.contents=null):s.isLink(i.mode)?(i.node_ops=y.ops_table.link.node,i.stream_ops=y.ops_table.link.stream):s.isChrdev(i.mode)&&(i.node_ops=y.ops_table.chrdev.node,i.stream_ops=y.ops_table.chrdev.stream),i.timestamp=Date.now(),t&&(t.contents[e]=i,t.timestamp=i.timestamp),i},getFileDataAsTypedArray:t=>t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0),expandFileStorage(t,e){var r=t.contents?t.contents.length:0;if(!(r>=e)){e=Math.max(e,r*(r<1048576?2:1.125)>>>0),0!=r&&(e=Math.max(e,256));var i=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(i.subarray(0,t.usedBytes),0)}},resizeFileStorage(t,e){if(t.usedBytes!=e)if(0==e)t.contents=null,t.usedBytes=0;else{var r=t.contents;t.contents=new Uint8Array(e),r&&t.contents.set(r.subarray(0,Math.min(e,t.usedBytes))),t.usedBytes=e}},node_ops:{getattr(t){var e={};return e.dev=s.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,e.size=s.isDir(t.mode)?4096:s.isFile(t.mode)?t.usedBytes:s.isLink(t.mode)?t.link.length:0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&y.resizeFileStorage(t,e.size)},lookup(t,e){throw s.genericErrors[44]},mknod:(t,e,r,n)=>y.createNode(t,e,r,n),rename(t,e,r){if(s.isDir(t.mode)){var n;try{n=s.lookupNode(e,r)}catch{}if(n)for(var i in n.contents)throw new s.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=r,e.contents[r]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink(t,e){delete t.contents[e],t.timestamp=Date.now()},rmdir(t,e){var r=s.lookupNode(t,e);for(var n in r.contents)throw new s.ErrnoError(55);delete t.contents[e],t.timestamp=Date.now()},readdir(t){var e=[".",".."];for(var r in t.contents)t.contents.hasOwnProperty(r)&&e.push(r);return e},symlink(t,e,r){var n=y.createNode(t,e,41471,0);return n.link=r,n},readlink(t){if(!s.isLink(t.mode))throw new s.ErrnoError(28);return t.link}},stream_ops:{read(t,e,r,n,i){var o=t.node.contents;if(i>=t.node.usedBytes)return 0;var a=Math.min(t.node.usedBytes-i,n);if(a>8&&o.subarray)e.set(o.subarray(i,i+a),r);else for(var l=0;l<a;l++)e[r+l]=o[i+l];return a},write(t,e,r,n,i,o){if(e.buffer===M.buffer&&(o=!1),!n)return 0;var a=t.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=e.subarray(r,r+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===i)return a.contents=e.slice(r,r+n),a.usedBytes=n,n;if(i+n<=a.usedBytes)return a.contents.set(e.subarray(r,r+n),i),n}if(y.expandFileStorage(a,i+n),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(r,r+n),i);else for(var l=0;l<n;l++)a.contents[i+l]=e[r+l];return a.usedBytes=Math.max(a.usedBytes,i+n),n},llseek(t,e,r){var n=e;if(1===r?n+=t.position:2===r&&s.isFile(t.node.mode)&&(n+=t.node.usedBytes),n<0)throw new s.ErrnoError(28);return n},allocate(t,e,r){y.expandFileStorage(t.node,e+r),t.node.usedBytes=Math.max(t.node.usedBytes,e+r)},mmap(t,e,r,n,i){if(!s.isFile(t.node.mode))throw new s.ErrnoError(43);var o,a,l=t.node.contents;if(2&i||l.buffer!==M.buffer){if((r>0||r+e<l.length)&&(l=l.subarray?l.subarray(r,r+e):Array.prototype.slice.call(l,r,r+e)),a=!0,!(o=pt(e)))throw new s.ErrnoError(48);M.set(l,o)}else a=!1,o=l.byteOffset;return{ptr:o,allocated:a}},msync:(t,e,r,n,i)=>(y.stream_ops.write(t,e,0,n,r,!1),0)}},Rr=u.preloadPlugins||[],Ye=(t,e)=>{var r=0;return t&&(r|=365),e&&(r|=146),r},s={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(t,e={}){if(!(t=U.resolve(t)))return{path:"",node:null};if((e=Object.assign({follow_mount:!0,recurse_count:0},e)).recurse_count>8)throw new s.ErrnoError(32);for(var n=t.split("/").filter(E=>!!E),i=s.root,o="/",a=0;a<n.length;a++){var l=a===n.length-1;if(l&&e.parent)break;if(i=s.lookupNode(i,n[a]),o=k.join2(o,n[a]),s.isMountpoint(i)&&(!l||l&&e.follow_mount)&&(i=i.mounted.root),!l||e.follow)for(var c=0;s.isLink(i.mode);){var d=s.readlink(o);if(o=U.resolve(k.dirname(o),d),i=s.lookupPath(o,{recurse_count:e.recurse_count+1}).node,c++>40)throw new s.ErrnoError(32)}}return{path:o,node:i}},getPath(t){for(var e;;){if(s.isRoot(t)){var r=t.mount.mountpoint;return e?"/"!==r[r.length-1]?`${r}/${e}`:r+e:r}e=e?`${t.name}/${e}`:t.name,t=t.parent}},hashName(t,e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%s.nameTable.length},hashAddNode(t){var e=s.hashName(t.parent.id,t.name);t.name_next=s.nameTable[e],s.nameTable[e]=t},hashRemoveNode(t){var e=s.hashName(t.parent.id,t.name);if(s.nameTable[e]===t)s.nameTable[e]=t.name_next;else for(var r=s.nameTable[e];r;){if(r.name_next===t){r.name_next=t.name_next;break}r=r.name_next}},lookupNode(t,e){var r=s.mayLookup(t);if(r)throw new s.ErrnoError(r,t);for(var n=s.hashName(t.id,e),i=s.nameTable[n];i;i=i.name_next)if(i.parent.id===t.id&&i.name===e)return i;return s.lookup(t,e)},createNode(t,e,r,n){var i=new s.FSNode(t,e,r,n);return s.hashAddNode(i),i},destroyNode(t){s.hashRemoveNode(t)},isRoot:t=>t===t.parent,isMountpoint:t=>!!t.mounted,isFile:t=>32768==(61440&t),isDir:t=>16384==(61440&t),isLink:t=>40960==(61440&t),isChrdev:t=>8192==(61440&t),isBlkdev:t=>24576==(61440&t),isFIFO:t=>4096==(61440&t),isSocket:t=>!(49152&~t),flagsToPermissionString(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:(t,e)=>s.ignorePermissions?0:e.includes("r")&&!(292&t.mode)||e.includes("w")&&!(146&t.mode)||e.includes("x")&&!(73&t.mode)?2:0,mayLookup:t=>s.nodePermissions(t,"x")||(t.node_ops.lookup?0:2),mayCreate(t,e){try{return s.lookupNode(t,e),20}catch{}return s.nodePermissions(t,"wx")},mayDelete(t,e,r){var n;try{n=s.lookupNode(t,e)}catch(o){return o.errno}var i=s.nodePermissions(t,"wx");if(i)return i;if(r){if(!s.isDir(n.mode))return 54;if(s.isRoot(n)||s.getPath(n)===s.cwd())return 10}else if(s.isDir(n.mode))return 31;return 0},mayOpen:(t,e)=>t?s.isLink(t.mode)?32:s.isDir(t.mode)&&("r"!==s.flagsToPermissionString(e)||512&e)?31:s.nodePermissions(t,s.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd(){for(var t=0;t<=s.MAX_OPEN_FDS;t++)if(!s.streams[t])return t;throw new s.ErrnoError(33)},getStreamChecked(t){var e=s.getStream(t);if(!e)throw new s.ErrnoError(8);return e},getStream:t=>s.streams[t],createStream:(t,e=-1)=>(s.FSStream||(s.FSStream=function(){this.shared={}},s.FSStream.prototype={},Object.defineProperties(s.FSStream.prototype,{object:{get(){return this.node},set(r){this.node=r}},isRead:{get(){return 1!=(2097155&this.flags)}},isWrite:{get(){return!!(2097155&this.flags)}},isAppend:{get(){return 1024&this.flags}},flags:{get(){return this.shared.flags},set(r){this.shared.flags=r}},position:{get(){return this.shared.position},set(r){this.shared.position=r}}})),t=Object.assign(new s.FSStream,t),-1==e&&(e=s.nextfd()),t.fd=e,s.streams[e]=t,t),closeStream(t){s.streams[t]=null},chrdev_stream_ops:{open(t){var e=s.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek(){throw new s.ErrnoError(70)}},major:t=>t>>8,minor:t=>255&t,makedev:(t,e)=>t<<8|e,registerDevice(t,e){s.devices[t]={stream_ops:e}},getDevice:t=>s.devices[t],getMounts(t){for(var e=[],r=[t];r.length;){var n=r.pop();e.push(n),r.push.apply(r,n.mounts)}return e},syncfs(t,e){"function"==typeof t&&(e=t,t=!1),s.syncFSRequests++,s.syncFSRequests>1&&j(`warning: ${s.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var r=s.getMounts(s.root.mount),n=0;function i(a){return s.syncFSRequests--,e(a)}function o(a){if(a)return o.errored?void 0:(o.errored=!0,i(a));++n>=r.length&&i(null)}r.forEach(a=>{if(!a.type.syncfs)return o(null);a.type.syncfs(a,t,o)})},mount(t,e,r){var o,n="/"===r,i=!r;if(n&&s.root)throw new s.ErrnoError(10);if(!n&&!i){var a=s.lookupPath(r,{follow_mount:!1});if(r=a.path,s.isMountpoint(o=a.node))throw new s.ErrnoError(10);if(!s.isDir(o.mode))throw new s.ErrnoError(54)}var l={type:t,opts:e,mountpoint:r,mounts:[]},c=t.mount(l);return c.mount=l,l.root=c,n?s.root=c:o&&(o.mounted=l,o.mount&&o.mount.mounts.push(l)),c},unmount(t){var e=s.lookupPath(t,{follow_mount:!1});if(!s.isMountpoint(e.node))throw new s.ErrnoError(28);var r=e.node,n=r.mounted,i=s.getMounts(n);Object.keys(s.nameTable).forEach(a=>{for(var l=s.nameTable[a];l;){var c=l.name_next;i.includes(l.mount)&&s.destroyNode(l),l=c}}),r.mounted=null;var o=r.mount.mounts.indexOf(n);r.mount.mounts.splice(o,1)},lookup:(t,e)=>t.node_ops.lookup(t,e),mknod(t,e,r){var i=s.lookupPath(t,{parent:!0}).node,o=k.basename(t);if(!o||"."===o||".."===o)throw new s.ErrnoError(28);var a=s.mayCreate(i,o);if(a)throw new s.ErrnoError(a);if(!i.node_ops.mknod)throw new s.ErrnoError(63);return i.node_ops.mknod(i,o,e,r)},create:(t,e)=>(e=void 0!==e?e:438,e&=4095,s.mknod(t,e|=32768,0)),mkdir:(t,e)=>(e=void 0!==e?e:511,e&=1023,s.mknod(t,e|=16384,0)),mkdirTree(t,e){for(var r=t.split("/"),n="",i=0;i<r.length;++i)if(r[i]){n+="/"+r[i];try{s.mkdir(n,e)}catch(o){if(20!=o.errno)throw o}}},mkdev:(t,e,r)=>(typeof r>"u"&&(r=e,e=438),s.mknod(t,e|=8192,r)),symlink(t,e){if(!U.resolve(t))throw new s.ErrnoError(44);var n=s.lookupPath(e,{parent:!0}).node;if(!n)throw new s.ErrnoError(44);var i=k.basename(e),o=s.mayCreate(n,i);if(o)throw new s.ErrnoError(o);if(!n.node_ops.symlink)throw new s.ErrnoError(63);return n.node_ops.symlink(n,i,t)},rename(t,e){var l,c,r=k.dirname(t),n=k.dirname(e),i=k.basename(t),o=k.basename(e);if(l=s.lookupPath(t,{parent:!0}).node,c=s.lookupPath(e,{parent:!0}).node,!l||!c)throw new s.ErrnoError(44);if(l.mount!==c.mount)throw new s.ErrnoError(75);var E,d=s.lookupNode(l,i),w=U.relative(t,n);if("."!==w.charAt(0))throw new s.ErrnoError(28);if("."!==(w=U.relative(e,r)).charAt(0))throw new s.ErrnoError(55);try{E=s.lookupNode(c,o)}catch{}if(d!==E){var m=s.isDir(d.mode),f=s.mayDelete(l,i,m);if(f)throw new s.ErrnoError(f);if(f=E?s.mayDelete(c,o,m):s.mayCreate(c,o))throw new s.ErrnoError(f);if(!l.node_ops.rename)throw new s.ErrnoError(63);if(s.isMountpoint(d)||E&&s.isMountpoint(E))throw new s.ErrnoError(10);if(c!==l&&(f=s.nodePermissions(l,"w")))throw new s.ErrnoError(f);s.hashRemoveNode(d);try{l.node_ops.rename(d,c,o)}catch(_){throw _}finally{s.hashAddNode(d)}}},rmdir(t){var r=s.lookupPath(t,{parent:!0}).node,n=k.basename(t),i=s.lookupNode(r,n),o=s.mayDelete(r,n,!0);if(o)throw new s.ErrnoError(o);if(!r.node_ops.rmdir)throw new s.ErrnoError(63);if(s.isMountpoint(i))throw new s.ErrnoError(10);r.node_ops.rmdir(r,n),s.destroyNode(i)},readdir(t){var r=s.lookupPath(t,{follow:!0}).node;if(!r.node_ops.readdir)throw new s.ErrnoError(54);return r.node_ops.readdir(r)},unlink(t){var r=s.lookupPath(t,{parent:!0}).node;if(!r)throw new s.ErrnoError(44);var n=k.basename(t),i=s.lookupNode(r,n),o=s.mayDelete(r,n,!1);if(o)throw new s.ErrnoError(o);if(!r.node_ops.unlink)throw new s.ErrnoError(63);if(s.isMountpoint(i))throw new s.ErrnoError(10);r.node_ops.unlink(r,n),s.destroyNode(i)},readlink(t){var r=s.lookupPath(t).node;if(!r)throw new s.ErrnoError(44);if(!r.node_ops.readlink)throw new s.ErrnoError(28);return U.resolve(s.getPath(r.parent),r.node_ops.readlink(r))},stat(t,e){var n=s.lookupPath(t,{follow:!e}).node;if(!n)throw new s.ErrnoError(44);if(!n.node_ops.getattr)throw new s.ErrnoError(63);return n.node_ops.getattr(n)},lstat:t=>s.stat(t,!0),chmod(t,e,r){var n;if(!(n="string"==typeof t?s.lookupPath(t,{follow:!r}).node:t).node_ops.setattr)throw new s.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&e|-4096&n.mode,timestamp:Date.now()})},lchmod(t,e){s.chmod(t,e,!0)},fchmod(t,e){var r=s.getStreamChecked(t);s.chmod(r.node,e)},chown(t,e,r,n){var i;if(!(i="string"==typeof t?s.lookupPath(t,{follow:!n}).node:t).node_ops.setattr)throw new s.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(t,e,r){s.chown(t,e,r,!0)},fchown(t,e,r){var n=s.getStreamChecked(t);s.chown(n.node,e,r)},truncate(t,e){if(e<0)throw new s.ErrnoError(28);var r;if(!(r="string"==typeof t?s.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new s.ErrnoError(63);if(s.isDir(r.mode))throw new s.ErrnoError(31);if(!s.isFile(r.mode))throw new s.ErrnoError(28);var i=s.nodePermissions(r,"w");if(i)throw new s.ErrnoError(i);r.node_ops.setattr(r,{size:e,timestamp:Date.now()})},ftruncate(t,e){var r=s.getStreamChecked(t);if(!(2097155&r.flags))throw new s.ErrnoError(28);s.truncate(r.node,e)},utime(t,e,r){var i=s.lookupPath(t,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(e,r)})},open(t,e,r){if(""===t)throw new s.ErrnoError(44);var n;if(e="string"==typeof e?(t=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof r>"u")throw new Error(`Unknown file open mode: ${t}`);return r})(e):e,r=typeof r>"u"?438:r,r=64&e?4095&r|32768:0,"object"==typeof t)n=t;else{t=k.normalize(t);try{n=s.lookupPath(t,{follow:!(131072&e)}).node}catch{}}var o=!1;if(64&e)if(n){if(128&e)throw new s.ErrnoError(20)}else n=s.mknod(t,r,0),o=!0;if(!n)throw new s.ErrnoError(44);if(s.isChrdev(n.mode)&&(e&=-513),65536&e&&!s.isDir(n.mode))throw new s.ErrnoError(54);if(!o){var a=s.mayOpen(n,e);if(a)throw new s.ErrnoError(a)}512&e&&!o&&s.truncate(n,0),e&=-131713;var l=s.createStream({node:n,path:s.getPath(n),flags:e,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return l.stream_ops.open&&l.stream_ops.open(l),u.logReadFiles&&!(1&e)&&(s.readFiles||(s.readFiles={}),t in s.readFiles||(s.readFiles[t]=1)),l},close(t){if(s.isClosed(t))throw new s.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(e){throw e}finally{s.closeStream(t.fd)}t.fd=null},isClosed:t=>null===t.fd,llseek(t,e,r){if(s.isClosed(t))throw new s.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new s.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new s.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,r),t.ungotten=[],t.position},read(t,e,r,n,i){if(n<0||i<0)throw new s.ErrnoError(28);if(s.isClosed(t))throw new s.ErrnoError(8);if(1==(2097155&t.flags))throw new s.ErrnoError(8);if(s.isDir(t.node.mode))throw new s.ErrnoError(31);if(!t.stream_ops.read)throw new s.ErrnoError(28);var o=typeof i<"u";if(o){if(!t.seekable)throw new s.ErrnoError(70)}else i=t.position;var a=t.stream_ops.read(t,e,r,n,i);return o||(t.position+=a),a},write(t,e,r,n,i,o){if(n<0||i<0)throw new s.ErrnoError(28);if(s.isClosed(t))throw new s.ErrnoError(8);if(!(2097155&t.flags))throw new s.ErrnoError(8);if(s.isDir(t.node.mode))throw new s.ErrnoError(31);if(!t.stream_ops.write)throw new s.ErrnoError(28);t.seekable&&1024&t.flags&&s.llseek(t,0,2);var a=typeof i<"u";if(a){if(!t.seekable)throw new s.ErrnoError(70)}else i=t.position;var l=t.stream_ops.write(t,e,r,n,i,o);return a||(t.position+=l),l},allocate(t,e,r){if(s.isClosed(t))throw new s.ErrnoError(8);if(e<0||r<=0)throw new s.ErrnoError(28);if(!(2097155&t.flags))throw new s.ErrnoError(8);if(!s.isFile(t.node.mode)&&!s.isDir(t.node.mode))throw new s.ErrnoError(43);if(!t.stream_ops.allocate)throw new s.ErrnoError(138);t.stream_ops.allocate(t,e,r)},mmap(t,e,r,n,i){if(2&n&&!(2&i)&&2!=(2097155&t.flags))throw new s.ErrnoError(2);if(1==(2097155&t.flags))throw new s.ErrnoError(2);if(!t.stream_ops.mmap)throw new s.ErrnoError(43);return t.stream_ops.mmap(t,e,r,n,i)},msync:(t,e,r,n,i)=>t.stream_ops.msync?t.stream_ops.msync(t,e,r,n,i):0,munmap:t=>0,ioctl(t,e,r){if(!t.stream_ops.ioctl)throw new s.ErrnoError(59);return t.stream_ops.ioctl(t,e,r)},readFile(t,e={}){if(e.flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error(`Invalid encoding type "${e.encoding}"`);var r,n=s.open(t,e.flags),o=s.stat(t).size,a=new Uint8Array(o);return s.read(n,a,0,o,0),"utf8"===e.encoding?r=q(a,0):"binary"===e.encoding&&(r=a),s.close(n),r},writeFile(t,e,r={}){r.flags=r.flags||577;var n=s.open(t,r.flags,r.mode);if("string"==typeof e){var i=new Uint8Array(we(e)+1),o=ie(e,i,0,i.length);s.write(n,i,0,o,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");s.write(n,e,0,e.byteLength,void 0,r.canOwn)}s.close(n)},cwd:()=>s.currentPath,chdir(t){var e=s.lookupPath(t,{follow:!0});if(null===e.node)throw new s.ErrnoError(44);if(!s.isDir(e.node.mode))throw new s.ErrnoError(54);var r=s.nodePermissions(e.node,"x");if(r)throw new s.ErrnoError(r);s.currentPath=e.path},createDefaultDirectories(){s.mkdir("/tmp"),s.mkdir("/home"),s.mkdir("/home/web_user")},createDefaultDevices(){s.mkdir("/dev"),s.registerDevice(s.makedev(1,3),{read:()=>0,write:(n,i,o,a,l)=>a}),s.mkdev("/dev/null",s.makedev(1,3)),X.register(s.makedev(5,0),X.default_tty_ops),X.register(s.makedev(6,0),X.default_tty1_ops),s.mkdev("/dev/tty",s.makedev(5,0)),s.mkdev("/dev/tty1",s.makedev(6,0));var t=new Uint8Array(1024),e=0,r=()=>(0===e&&(e=ft(t).byteLength),t[--e]);s.createDevice("/dev","random",r),s.createDevice("/dev","urandom",r),s.mkdir("/dev/shm"),s.mkdir("/dev/shm/tmp")},createSpecialDirectories(){s.mkdir("/proc");var t=s.mkdir("/proc/self");s.mkdir("/proc/self/fd"),s.mount({mount(){var e=s.createNode(t,"fd",16895,73);return e.node_ops={lookup(r,n){var o=s.getStreamChecked(+n),a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return a.parent=a,a}},e}},{},"/proc/self/fd")},createStandardStreams(){u.stdin?s.createDevice("/dev","stdin",u.stdin):s.symlink("/dev/tty","/dev/stdin"),u.stdout?s.createDevice("/dev","stdout",null,u.stdout):s.symlink("/dev/tty","/dev/stdout"),u.stderr?s.createDevice("/dev","stderr",null,u.stderr):s.symlink("/dev/tty1","/dev/stderr"),s.open("/dev/stdin",0),s.open("/dev/stdout",1),s.open("/dev/stderr",1)},ensureErrnoError(){s.ErrnoError||(s.ErrnoError=function(e,r){this.name="ErrnoError",this.node=r,this.setErrno=function(n){this.errno=n},this.setErrno(e),this.message="FS error"},s.ErrnoError.prototype=new Error,s.ErrnoError.prototype.constructor=s.ErrnoError,[44].forEach(t=>{s.genericErrors[t]=new s.ErrnoError(t),s.genericErrors[t].stack="<generic error, no stack>"}))},staticInit(){s.ensureErrnoError(),s.nameTable=new Array(4096),s.mount(y,{},"/"),s.createDefaultDirectories(),s.createDefaultDevices(),s.createSpecialDirectories(),s.filesystems={MEMFS:y}},init(t,e,r){s.init.initialized=!0,s.ensureErrnoError(),u.stdin=t||u.stdin,u.stdout=e||u.stdout,u.stderr=r||u.stderr,s.createStandardStreams()},quit(){s.init.initialized=!1;for(var t=0;t<s.streams.length;t++){var e=s.streams[t];e&&s.close(e)}},findObject(t,e){var r=s.analyzePath(t,e);return r.exists?r.object:null},analyzePath(t,e){try{t=(r=s.lookupPath(t,{follow:!e})).path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=s.lookupPath(t,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=k.basename(t),r=s.lookupPath(t,{follow:!e}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(i){n.error=i.errno}return n},createPath(t,e,r,n){t="string"==typeof t?t:s.getPath(t);for(var i=e.split("/").reverse();i.length;){var o=i.pop();if(o){var a=k.join2(t,o);try{s.mkdir(a)}catch{}t=a}}return a},createFile(t,e,r,n,i){var o=k.join2("string"==typeof t?t:s.getPath(t),e),a=Ye(n,i);return s.create(o,a)},createDataFile(t,e,r,n,i,o){var a=e;t&&(t="string"==typeof t?t:s.getPath(t),a=e?k.join2(t,e):t);var l=Ye(n,i),c=s.create(a,l);if(r){if("string"==typeof r){for(var d=new Array(r.length),w=0,E=r.length;w<E;++w)d[w]=r.charCodeAt(w);r=d}s.chmod(c,146|l);var m=s.open(c,577);s.write(m,r,0,r.length,0,o),s.close(m),s.chmod(c,l)}return c},createDevice(t,e,r,n){var i=k.join2("string"==typeof t?t:s.getPath(t),e),o=Ye(!!r,!!n);s.createDevice.major||(s.createDevice.major=64);var a=s.makedev(s.createDevice.major++,0);return s.registerDevice(a,{open(l){l.seekable=!1},close(l){n&&n.buffer&&n.buffer.length&&n(10)},read(l,c,d,w,E){for(var m=0,f=0;f<w;f++){var _;try{_=r()}catch{throw new s.ErrnoError(29)}if(void 0===_&&0===m)throw new s.ErrnoError(6);if(null==_)break;m++,c[d+f]=_}return m&&(l.node.timestamp=Date.now()),m},write(l,c,d,w,E){for(var m=0;m<w;m++)try{n(c[d+m])}catch{throw new s.ErrnoError(29)}return w&&(l.node.timestamp=Date.now()),m}}),s.mkdev(i,o,a)},forceLoadFile(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!ee)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=be(ee(t.url),!0),t.usedBytes=t.contents.length}catch{throw new s.ErrnoError(29)}},createLazyFile(t,e,r,n,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(f){if(!(f>this.length-1||f<0)){var _=f%this.chunkSize;return this.getter(f/this.chunkSize|0)[_]}},o.prototype.setDataGetter=function(f){this.getter=f},o.prototype.cacheLength=function(){var f=new XMLHttpRequest;if(f.open("HEAD",r,!1),f.send(null),!(f.status>=200&&f.status<300||304===f.status))throw new Error("Couldn't load "+r+". Status: "+f.status);var C,_=Number(f.getResponseHeader("Content-length")),N=(C=f.getResponseHeader("Accept-Ranges"))&&"bytes"===C,x=(C=f.getResponseHeader("Content-Encoding"))&&"gzip"===C,h=1048576;N||(h=_);var P=this;P.setDataGetter(R=>{var H=R*h,T=(R+1)*h-1;if(T=Math.min(T,_-1),typeof P.chunks[R]>"u"&&(P.chunks[R]=((R,H)=>{if(R>H)throw new Error("invalid range ("+R+", "+H+") or no bytes requested!");if(H>_-1)throw new Error("only "+_+" bytes available! programmer error!");var T=new XMLHttpRequest;if(T.open("GET",r,!1),_!==h&&T.setRequestHeader("Range","bytes="+R+"-"+H),T.responseType="arraybuffer",T.overrideMimeType&&T.overrideMimeType("text/plain; charset=x-user-defined"),T.send(null),!(T.status>=200&&T.status<300||304===T.status))throw new Error("Couldn't load "+r+". Status: "+T.status);return void 0!==T.response?new Uint8Array(T.response||[]):be(T.responseText||"",!0)})(H,T)),typeof P.chunks[R]>"u")throw new Error("doXHR failed!");return P.chunks[R]}),(x||!_)&&(h=_=1,_=this.getter(0).length,h=_,Be("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=_,this._chunkSize=h,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!J)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var l={isDevice:!1,contents:a}}else l={isDevice:!1,url:r};var c=s.createFile(t,e,l,n,i);l.contents?c.contents=l.contents:l.url&&(c.contents=null,c.url=l.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var d={};function E(m,f,_,C,N){var x=m.node.contents;if(N>=x.length)return 0;var h=Math.min(x.length-N,C);if(x.slice)for(var p=0;p<h;p++)f[_+p]=x[N+p];else for(p=0;p<h;p++)f[_+p]=x.get(N+p);return h}return Object.keys(c.stream_ops).forEach(m=>{var f=c.stream_ops[m];d[m]=function(){return s.forceLoadFile(c),f.apply(null,arguments)}}),d.read=(m,f,_,C,N)=>(s.forceLoadFile(c),E(m,f,_,C,N)),d.mmap=(m,f,_,C,N)=>{s.forceLoadFile(c);var x=pt(f);if(!x)throw new s.ErrnoError(48);return E(m,M,x,f,_),{ptr:x,allocated:!0}},c.stream_ops=d,c}},b={DEFAULT_POLLMASK:5,calculateAt(t,e,r){if(k.isAbs(e))return e;var n;if(n=-100===t?s.cwd():b.getStreamFromFD(t).path,0==e.length){if(!r)throw new s.ErrnoError(44);return n}return k.join2(n,e)},doStat(t,e,r){try{var n=t(e)}catch(l){if(l&&l.node&&k.normalize(e)!==k.normalize(s.getPath(l.node)))return-54;throw l}g[r>>2]=n.dev,g[r+4>>2]=n.mode,S[r+8>>2]=n.nlink,g[r+12>>2]=n.uid,g[r+16>>2]=n.gid,g[r+20>>2]=n.rdev,A=[n.size>>>0,(v=n.size,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+24>>2]=A[0],g[r+28>>2]=A[1],g[r+32>>2]=4096,g[r+36>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return A=[Math.floor(i/1e3)>>>0,(v=Math.floor(i/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+40>>2]=A[0],g[r+44>>2]=A[1],S[r+48>>2]=i%1e3*1e3,A=[Math.floor(o/1e3)>>>0,(v=Math.floor(o/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+56>>2]=A[0],g[r+60>>2]=A[1],S[r+64>>2]=o%1e3*1e3,A=[Math.floor(a/1e3)>>>0,(v=Math.floor(a/1e3),+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+72>>2]=A[0],g[r+76>>2]=A[1],S[r+80>>2]=a%1e3*1e3,A=[n.ino>>>0,(v=n.ino,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[r+88>>2]=A[0],g[r+92>>2]=A[1],0},doMsync(t,e,r,n,i){if(!s.isFile(e.node.mode))throw new s.ErrnoError(43);if(2&n)return 0;var o=$.slice(t,t+r);s.msync(e,o,i,r,n)},varargs:void 0,get(){var t=g[+b.varargs>>2];return b.varargs+=4,t},getp:()=>b.get(),getStr:t=>V(t),getStreamFromFD:t=>s.getStreamChecked(t)},ze=(t,e,r)=>ie(t,$,e,r),We=(t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN;mt=()=>performance.now();var qr=t=>{var r=(t-fe.buffer.byteLength+65535)/65536;try{return fe.grow(r),st(),1}catch{}},je={},oe=()=>{if(!oe.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ue||"./this.program"};for(var r in je)void 0===je[r]?delete e[r]:e[r]=je[r];var n=[];for(var r in e)n.push(`${r}=${e[r]}`);oe.strings=n}return oe.strings},vt=(t,e)=>{pe=t,(t=>{pe=t,fr||(u.onExit&&u.onExit(t),Ne=!0),ce(t,new ge(t))})(t)},en=vt,Ee=t=>t%4==0&&(t%100!=0||t%400==0),gt=[31,29,31,30,31,30,31,31,30,31,30,31],yt=[31,28,31,30,31,30,31,31,30,31,30,31],wt=function(t,e,r,n){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=s.nextInode++,this.name=e,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n};Object.defineProperties(wt.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return s.isDir(this.mode)}},isDevice:{get:function(){return s.isChrdev(this.mode)}}}),s.FSNode=wt,s.createPreloadedFile=(t,e,r,n,i,o,a,l,c,d)=>{var w=e?U.resolve(k.join2(t,e)):t;function m(f){function _(C){d&&d(),l||((t,e,r,n,i,o)=>{s.createDataFile(t,e,r,n,i,o)})(t,e,C,n,i,c),o&&o(),me()}((t,e,r,n)=>{typeof Browser<"u"&&Browser.init();var i=!1;return Rr.forEach(o=>{i||o.canHandle(e)&&(o.handle(t,e,r,n),i=!0)}),i})(f,w,_,()=>{a&&a(),me()})||_(f)}Oe(),"string"==typeof r?((t,e,r,n)=>{var i=n?"":`al ${t}`;te(t,o=>{(function Gt(t,e){t||K(e)})(o,`Loading data file "${t}" failed (no arrayBuffer).`),e(new Uint8Array(o)),i&&me()},o=>{if(!r)throw`Loading data file "${t}" failed.`;r()}),i&&Oe()})(r,f=>m(f),a):m(r)},s.staticInit();var Se,mn={a:(t,e,r,n)=>{K(`Assertion failed: ${V(t)}, at: `+[e?V(e):"unknown filename",r,n?V(n):"unknown function"])},b:(t,e,r)=>{throw new mr(t).init(e,r),t},d:function Lr(t,e,r){b.varargs=r;try{var n=b.getStreamFromFD(t);switch(e){case 0:if((i=b.get())<0)return-28;for(;s.streams[i];)i++;return s.createStream(n,i).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:var i=b.get();return n.flags|=i,0;case 5:return i=b.getp(),ne[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return g[Et()>>2]=28,-1}}catch(l){if(typeof s>"u"||"ErrnoError"!==l.name)throw l;return-l.errno}},y:function Mr(t,e){try{var r=b.getStreamFromFD(t);return b.doStat(s.stat,r.path,e)}catch(n){if(typeof s>"u"||"ErrnoError"!==n.name)throw n;return-n.errno}},u:function Cr(t,e){try{if(0===e)return-28;var r=s.cwd(),n=we(r)+1;return e<n?-68:(ze(r,t,e),n)}catch(i){if(typeof s>"u"||"ErrnoError"!==i.name)throw i;return-i.errno}},r:function Dr(t,e,r){try{var n=b.getStreamFromFD(t);n.getdents||(n.getdents=s.readdir(n.path));for(var i=280,o=0,a=s.llseek(n,0,1),l=Math.floor(a/i);l<n.getdents.length&&o+i<=r;){var c,d,w=n.getdents[l];if("."===w)c=n.node.id,d=4;else if(".."===w)c=s.lookupPath(n.path,{parent:!0}).node.id,d=4;else{var m=s.lookupNode(n.node,w);c=m.id,d=s.isChrdev(m.mode)?2:s.isDir(m.mode)?4:s.isLink(m.mode)?10:8}A=[c>>>0,(v=c,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[e+o>>2]=A[0],g[e+o+4>>2]=A[1],A=[(l+1)*i>>>0,(v=(l+1)*i,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[e+o+8>>2]=A[0],g[e+o+12>>2]=A[1],ne[e+o+16>>1]=280,M[e+o+18|0]=d,ze(w,e+o+19,256),o+=i,l+=1}return s.llseek(n,l*i,0),o}catch(f){if(typeof s>"u"||"ErrnoError"!==f.name)throw f;return-f.errno}},A:function Ir(t,e,r){b.varargs=r;try{var n=b.getStreamFromFD(t);switch(e){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return n.tty?0:-59;case 21505:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var i=n.tty.ops.ioctl_tcgets(n),o=b.getp();g[o>>2]=i.c_iflag||0,g[o+4>>2]=i.c_oflag||0,g[o+8>>2]=i.c_cflag||0,g[o+12>>2]=i.c_lflag||0;for(var a=0;a<32;a++)M[o+a+17|0]=i.c_cc[a]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){o=b.getp();var l=g[o>>2],c=g[o+4>>2],d=g[o+8>>2],w=g[o+12>>2],E=[];for(a=0;a<32;a++)E.push(M[o+a+17|0]);return n.tty.ops.ioctl_tcsets(n.tty,e,{c_iflag:l,c_oflag:c,c_cflag:d,c_lflag:w,c_cc:E})}return 0;case 21519:return n.tty?(o=b.getp(),g[o>>2]=0,0):-59;case 21520:return n.tty?-28:-59;case 21531:return o=b.getp(),s.ioctl(n,e,o);case 21523:if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var m=n.tty.ops.ioctl_tiocgwinsz(n.tty);o=b.getp(),ne[o>>1]=m[0],ne[o+2>>1]=m[1]}return 0;default:return-28}}catch(f){if(typeof s>"u"||"ErrnoError"!==f.name)throw f;return-f.errno}},v:function Fr(t,e){try{return t=b.getStr(t),b.doStat(s.lstat,t,e)}catch(r){if(typeof s>"u"||"ErrnoError"!==r.name)throw r;return-r.errno}},w:function xr(t,e,r,n){try{e=b.getStr(e);var i=256&n,o=4096&n;return n&=-6401,e=b.calculateAt(t,e,o),b.doStat(i?s.lstat:s.stat,e,r)}catch(a){if(typeof s>"u"||"ErrnoError"!==a.name)throw a;return-a.errno}},h:function Br(t,e,r,n){b.varargs=n;try{e=b.getStr(e),e=b.calculateAt(t,e);var i=n?b.get():0;return s.open(e,r,i).fd}catch(o){if(typeof s>"u"||"ErrnoError"!==o.name)throw o;return-o.errno}},x:function Nr(t,e){try{return t=b.getStr(t),b.doStat(s.stat,t,e)}catch(r){if(typeof s>"u"||"ErrnoError"!==r.name)throw r;return-r.errno}},k:()=>!0,n:function Ur(t,e,r,n,i,o,a,l){var c=We(i,o);try{if(isNaN(c))return 61;var d=b.getStreamFromFD(n),w=s.mmap(d,t,c,e,r),E=w.ptr;return g[a>>2]=w.allocated,S[l>>2]=E,0}catch(m){if(typeof s>"u"||"ErrnoError"!==m.name)throw m;return-m.errno}},o:function Yr(t,e,r,n,i,o,a){var l=We(o,a);try{if(isNaN(l))return 61;var c=b.getStreamFromFD(i);2&r&&b.doMsync(t,c,e,n,l),s.munmap(c)}catch(d){if(typeof s>"u"||"ErrnoError"!==d.name)throw d;return-d.errno}},f:()=>{K("")},j:mt,l:(t,e,r)=>$.copyWithin(t,e,e+r),q:t=>{var c,e=$.length,r=2147483648;if((t>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var o=e*(1+.2/i);o=Math.min(o,t+100663296);var a=Math.min(r,(c=Math.max(t,o))+(65536-c%65536)%65536);if(qr(a))return!0}return!1},s:(t,e)=>{var r=0;return oe().forEach((n,i)=>{var o=e+r;S[t+4*i>>2]=o,((t,e)=>{for(var r=0;r<t.length;++r)M[0|e++]=t.charCodeAt(r);M[0|e]=0})(n,o),r+=n.length+1}),0},t:(t,e)=>{var r=oe();S[t>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),S[e>>2]=n,0},e:en,g:function tn(t){try{var e=b.getStreamFromFD(t);return s.close(e),0}catch(r){if(typeof s>"u"||"ErrnoError"!==r.name)throw r;return r.errno}},z:function nn(t,e,r,n){try{var o=((t,e,r,n)=>{for(var i=0,o=0;o<r;o++){var a=S[e>>2],l=S[e+4>>2];e+=8;var c=s.read(t,M,a,l,n);if(c<0)return-1;if(i+=c,c<l)break;typeof n<"u"&&(n+=c)}return i})(b.getStreamFromFD(t),e,r);return S[n>>2]=o,0}catch(a){if(typeof s>"u"||"ErrnoError"!==a.name)throw a;return a.errno}},p:function sn(t,e,r,n,i){var o=We(e,r);try{if(isNaN(o))return 61;var a=b.getStreamFromFD(t);return s.llseek(a,o,n),A=[a.position>>>0,(v=a.position,+Math.abs(v)>=1?v>0?+Math.floor(v/4294967296)>>>0:~~+Math.ceil((v-+(~~v>>>0))/4294967296)>>>0:0)],g[i>>2]=A[0],g[i+4>>2]=A[1],a.getdents&&0===o&&0===n&&(a.getdents=null),0}catch(l){if(typeof s>"u"||"ErrnoError"!==l.name)throw l;return l.errno}},i:function an(t,e,r,n){try{var o=((t,e,r,n)=>{for(var i=0,o=0;o<r;o++){var a=S[e>>2],l=S[e+4>>2];e+=8;var c=s.write(t,M,a,l,n);if(c<0)return-1;i+=c,typeof n<"u"&&(n+=c)}return i})(b.getStreamFromFD(t),e,r);return S[n>>2]=o,0}catch(a){if(typeof s>"u"||"ErrnoError"!==a.name)throw a;return a.errno}},m:function dr(t,e,r,n){!function Xt(t,e){le&&postMessage(Y.builder().setWorkerId(le.workerId).setMessage(Pe.builder().setResult(t,e)))}(V(t,e),V(r,n))},c:(t,e,r,n,i)=>((t,e,r,n)=>{var i=S[n+40>>2],o={tm_sec:g[n>>2],tm_min:g[n+4>>2],tm_hour:g[n+8>>2],tm_mday:g[n+12>>2],tm_mon:g[n+16>>2],tm_year:g[n+20>>2],tm_wday:g[n+24>>2],tm_yday:g[n+28>>2],tm_isdst:g[n+32>>2],tm_gmtoff:g[n+36>>2],tm_zone:i?V(i):""},a=V(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in l)a=a.replace(new RegExp(c,"g"),l[c]);var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];function E(h,p,P){for(var R="number"==typeof h?h.toString():h||"";R.length<p;)R=P[0]+R;return R}function m(h,p){return E(h,p,"0")}function f(h,p){function P(H){return H<0?-1:H>0?1:0}var R;return 0===(R=P(h.getFullYear()-p.getFullYear()))&&0===(R=P(h.getMonth()-p.getMonth()))&&(R=P(h.getDate()-p.getDate())),R}function _(h){switch(h.getDay()){case 0:return new Date(h.getFullYear()-1,11,29);case 1:return h;case 2:return new Date(h.getFullYear(),0,3);case 3:return new Date(h.getFullYear(),0,2);case 4:return new Date(h.getFullYear(),0,1);case 5:return new Date(h.getFullYear()-1,11,31);case 6:return new Date(h.getFullYear()-1,11,30)}}function C(h){var p=((t,e)=>{for(var r=new Date(t.getTime());e>0;){var n=Ee(r.getFullYear()),i=r.getMonth(),o=(n?gt:yt)[i];if(!(e>o-r.getDate()))return r.setDate(r.getDate()+e),r;e-=o-r.getDate()+1,r.setDate(1),i<11?r.setMonth(i+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r})(new Date(h.tm_year+1900,0,1),h.tm_yday),P=new Date(p.getFullYear(),0,4),R=new Date(p.getFullYear()+1,0,4),H=_(P),T=_(R);return f(H,p)<=0?f(T,p)<=0?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}var N={"%a":h=>d[h.tm_wday].substring(0,3),"%A":h=>d[h.tm_wday],"%b":h=>w[h.tm_mon].substring(0,3),"%B":h=>w[h.tm_mon],"%C":h=>m((h.tm_year+1900)/100|0,2),"%d":h=>m(h.tm_mday,2),"%e":h=>E(h.tm_mday,2," "),"%g":h=>C(h).toString().substring(2),"%G":h=>C(h),"%H":h=>m(h.tm_hour,2),"%I":h=>{var p=h.tm_hour;return 0==p?p=12:p>12&&(p-=12),m(p,2)},"%j":h=>m(h.tm_mday+((t,e)=>{for(var r=0,n=0;n<=e;r+=t[n++]);return r})(Ee(h.tm_year+1900)?gt:yt,h.tm_mon-1),3),"%m":h=>m(h.tm_mon+1,2),"%M":h=>m(h.tm_min,2),"%n":()=>"\n","%p":h=>h.tm_hour>=0&&h.tm_hour<12?"AM":"PM","%S":h=>m(h.tm_sec,2),"%t":()=>"\t","%u":h=>h.tm_wday||7,"%U":h=>m(Math.floor((h.tm_yday+7-h.tm_wday)/7),2),"%V":h=>{var p=Math.floor((h.tm_yday+7-(h.tm_wday+6)%7)/7);if((h.tm_wday+371-h.tm_yday-2)%7<=2&&p++,p){if(53==p){var R=(h.tm_wday+371-h.tm_yday)%7;4!=R&&(3!=R||!Ee(h.tm_year))&&(p=1)}}else{p=52;var P=(h.tm_wday+7-h.tm_yday-1)%7;(4==P||5==P&&Ee(h.tm_year%400-1))&&p++}return m(p,2)},"%w":h=>h.tm_wday,"%W":h=>m(Math.floor((h.tm_yday+7-(h.tm_wday+6)%7)/7),2),"%y":h=>(h.tm_year+1900).toString().substring(2),"%Y":h=>h.tm_year+1900,"%z":h=>{var p=h.tm_gmtoff;return(p>=0?"+":"-")+("0000"+(p=(p=Math.abs(p)/60)/60*100+p%60)).slice(-4)},"%Z":h=>h.tm_zone,"%%":()=>"%"};for(var c in a=a.replace(/%%/g,"\0\0"),N)a.includes(c)&&(a=a.replace(new RegExp(c,"g"),N[c](o)));var x=be(a=a.replace(/\0\0/g,"%"),!1);return x.length>e?0:(((t,e)=>{M.set(t,e)})(x,t),x.length-1)})(t,e,r,n)},I=function hr(){var t={a:mn};function e(n,i){return fe=(I=n.exports).B,st(),function or(t){ot.unshift(t)}(I.C),me(),I}if(Oe(),u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(n){return j(`Module.instantiateWasm callback failed with error: ${n}`),!1}return function cr(t,e,r,n){t||"function"!=typeof WebAssembly.instantiateStreaming||lt(e)||ve(e)||he||"function"!=typeof fetch?ct(e,r,n):fetch(e,{credentials:"same-origin"}).then(i=>WebAssembly.instantiateStreaming(i,r).then(n,function(a){return j(`wasm streaming compile failed: ${a}`),j("falling back to ArrayBuffer instantiation"),ct(e,r,n)}))}(re,Z,t,function r(n){e(n.instance)}),{}}(),bt=(u._free=t=>(u._free=I.E)(t),u._ChessSetup=(t,e)=>(u._ChessSetup=I.F)(t,e),u._ChessCalculate=(t,e,r)=>(u._ChessCalculate=I.G)(t,e,r),u._main=(t,e)=>(bt=u._main=I.H)(t,e)),Et=(u._Setup=(t,e)=>(u._Setup=I.I)(t,e),u._Calculate=(t,e,r)=>(u._Calculate=I.J)(t,e,r),u._malloc=t=>(u._malloc=I.K)(t),()=>(Et=I.L)()),_t=(t,e)=>(_t=I.M)(t,e),qe=t=>(qe=I.N)(t),kt=t=>(kt=I.O)(t);function St(t=Ie){function e(){Se||(Se=!0,u.calledRun=!0,!Ne&&(function rr(){!u.noFSInit&&!s.init.initialized&&s.init(),s.ignorePermissions=!1,X.init(),ye(ot)}(),function nr(){ye(Qt)}(),u.onRuntimeInitialized&&u.onRuntimeInitialized(),Rt&&function kn(t=[]){var e=bt;t.unshift(ue);var r=t.length,n=qe(4*(r+1)),i=n;t.forEach(a=>{S[i>>2]=(t=>{var e=we(t)+1,r=qe(e);return ze(t,r,e),r})(a),i+=4}),S[i>>2]=0;try{var o=e(r,n);return vt(o),o}catch(a){return(t=>{if(t instanceof ge||"unwind"==t)return pe;ce(1,t)})(a)}}(t),function sr(){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)t=u.postRun.shift(),at.unshift(t);var t;ye(at)}()))}G>0||(function tr(){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)t=u.preRun.shift(),it.unshift(t);var t;ye(it)}(),G>0)||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e())}if(u.___start_em_js=264140,u.___stop_em_js=264275,se=function t(){Se||St(),Se||(se=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();var Rt=!0;u.noInitialRun&&(Rt=!1),St()},231:()=>{},1653:()=>{},1633:()=>{}},Ve={};function Re(D){var Ae=Ve[D];if(void 0!==Ae)return Ae.exports;var O=Ve[D]={id:D,loaded:!1,exports:{}};return At[D](O,O.exports,Re),O.loaded=!0,O.exports}Re.hmd=D=>((D=Object.create(D)).children||(D.children=[]),Object.defineProperty(D,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+D.id)}}),D),Re(3909)})();