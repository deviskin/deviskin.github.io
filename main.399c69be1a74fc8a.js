var m2t=Object.defineProperty,v2t=Object.defineProperties,y2t=Object.getOwnPropertyDescriptors,rCe=Object.getOwnPropertySymbols,_2t=Object.prototype.hasOwnProperty,b2t=Object.prototype.propertyIsEnumerable,sCe=(Za,Pe,Ot)=>Pe in Za?m2t(Za,Pe,{enumerable:!0,configurable:!0,writable:!0,value:Ot}):Za[Pe]=Ot,To=(Za,Pe)=>{for(var Ot in Pe||(Pe={}))_2t.call(Pe,Ot)&&sCe(Za,Ot,Pe[Ot]);if(rCe)for(var Ot of rCe(Pe))b2t.call(Pe,Ot)&&sCe(Za,Ot,Pe[Ot]);return Za},cT=(Za,Pe)=>v2t(Za,y2t(Pe));(self.webpackChunkscheduler13=self.webpackChunkscheduler13||[]).push([[179],{723:(Za,Pe,Ot)=>{"use strict";var $e={};function de(c){return"function"==typeof c}function we(c){const a=c(h=>{Error.call(h),h.stack=(new Error).stack});return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}Ot.r($e),Ot.d($e,{Adder:()=>Po,Delaunay:()=>b8,FormatSpecifier:()=>nM,InternMap:()=>tw,InternSet:()=>t0,Node:()=>S0,Voronoi:()=>Gse,ZoomTransform:()=>Cd,active:()=>h9e,arc:()=>u6,area:()=>f6,areaRadial:()=>lue,ascending:()=>Ws,autoType:()=>eWe,axisBottom:()=>eUe,axisLeft:()=>tUe,axisRight:()=>Jze,axisTop:()=>Kze,bin:()=>$ie,bisect:()=>Jm,bisectCenter:()=>ize,bisectLeft:()=>nze,bisectRight:()=>kie,bisector:()=>sk,blob:()=>kWe,brush:()=>S9e,brushSelection:()=>C9e,brushX:()=>x9e,brushY:()=>w9e,buffer:()=>EWe,chord:()=>O9e,chordDirected:()=>k9e,chordTranspose:()=>D9e,cluster:()=>jQe,color:()=>ah,contourDensity:()=>e$e,contours:()=>_se,count:()=>ok,create:()=>JXe,creator:()=>mk,cross:()=>lze,csv:()=>PWe,csvFormat:()=>$$e,csvFormatBody:()=>W$e,csvFormatRow:()=>Q$e,csvFormatRows:()=>G$e,csvFormatValue:()=>j$e,csvParse:()=>Xse,csvParseRows:()=>H$e,cubehelix:()=>uh,cumsum:()=>cze,curveBasis:()=>rS,curveBasisClosed:()=>AYe,curveBasisOpen:()=>IYe,curveBumpX:()=>g6,curveBumpY:()=>uue,curveBundle:()=>PYe,curveCardinal:()=>RYe,curveCardinalClosed:()=>FYe,curveCardinalOpen:()=>NYe,curveCatmullRom:()=>LYe,curveCatmullRomClosed:()=>BYe,curveCatmullRomOpen:()=>VYe,curveLinear:()=>sE,curveLinearClosed:()=>zYe,curveMonotoneX:()=>UYe,curveMonotoneY:()=>HYe,curveNatural:()=>w6,curveStep:()=>$Ye,curveStepAfter:()=>WYe,curveStepBefore:()=>S6,descending:()=>uze,deviation:()=>Eie,difference:()=>zze,disjoint:()=>Uze,dispatch:()=>f_,drag:()=>Qse,dragDisable:()=>vk,dragEnable:()=>yk,dsv:()=>IWe,dsvFormat:()=>Yk,easeBack:()=>soe,easeBackIn:()=>wWe,easeBackInOut:()=>soe,easeBackOut:()=>SWe,easeBounce:()=>Ow,easeBounceIn:()=>CWe,easeBounceInOut:()=>xWe,easeBounceOut:()=>Ow,easeCircle:()=>roe,easeCircleIn:()=>hWe,easeCircleInOut:()=>roe,easeCircleOut:()=>dWe,easeCubic:()=>TB,easeCubicIn:()=>s9e,easeCubicInOut:()=>TB,easeCubicOut:()=>o9e,easeElastic:()=>ooe,easeElasticIn:()=>TWe,easeElasticInOut:()=>OWe,easeElasticOut:()=>ooe,easeExp:()=>ioe,easeExpIn:()=>cWe,easeExpInOut:()=>ioe,easeExpOut:()=>uWe,easeLinear:()=>nWe,easePoly:()=>Jse,easePolyIn:()=>sWe,easePolyInOut:()=>Jse,easePolyOut:()=>oWe,easeQuad:()=>Kse,easeQuadIn:()=>iWe,easeQuadInOut:()=>Kse,easeQuadOut:()=>rWe,easeSin:()=>noe,easeSinIn:()=>aWe,easeSinInOut:()=>noe,easeSinOut:()=>lWe,every:()=>Rze,extent:()=>e0,fcumsum:()=>dze,filter:()=>Nze,flatGroup:()=>fze,flatRollup:()=>pze,forceCenter:()=>UWe,forceCollide:()=>oGe,forceLink:()=>lGe,forceManyBody:()=>vGe,forceRadial:()=>yGe,forceSimulation:()=>mGe,forceX:()=>_Ge,forceY:()=>bGe,format:()=>rM,formatDefaultLocale:()=>_oe,formatLocale:()=>yoe,formatPrefix:()=>I8,formatSpecifier:()=>L_,fsum:()=>hze,geoAlbers:()=>Pae,geoAlbersUsa:()=>TQe,geoArea:()=>EGe,geoAzimuthalEqualArea:()=>OQe,geoAzimuthalEqualAreaRaw:()=>vV,geoAzimuthalEquidistant:()=>DQe,geoAzimuthalEquidistantRaw:()=>yV,geoBounds:()=>RGe,geoCentroid:()=>zGe,geoCircle:()=>UGe,geoClipAntimeridian:()=>X8,geoClipCircle:()=>tae,geoClipExtent:()=>qGe,geoClipRectangle:()=>TM,geoConicConformal:()=>MQe,geoConicConformalRaw:()=>Nae,geoConicEqualArea:()=>LM,geoConicEqualAreaRaw:()=>Iae,geoConicEquidistant:()=>AQe,geoConicEquidistantRaw:()=>Lae,geoContains:()=>tQe,geoDistance:()=>kM,geoEqualEarth:()=>PQe,geoEqualEarthRaw:()=>_V,geoEquirectangular:()=>EQe,geoEquirectangularRaw:()=>Uw,geoGnomonic:()=>RQe,geoGnomonicRaw:()=>bV,geoGraticule:()=>hae,geoGraticule10:()=>nQe,geoIdentity:()=>FQe,geoInterpolate:()=>iQe,geoLength:()=>nae,geoMercator:()=>kQe,geoMercatorRaw:()=>zw,geoNaturalEarth1:()=>NQe,geoNaturalEarth1Raw:()=>CV,geoOrthographic:()=>LQe,geoOrthographicRaw:()=>xV,geoPath:()=>gQe,geoProjection:()=>bd,geoProjectionMutator:()=>gV,geoRotation:()=>joe,geoStereographic:()=>BQe,geoStereographicRaw:()=>wV,geoStream:()=>fh,geoTransform:()=>mQe,geoTransverseMercator:()=>VQe,geoTransverseMercatorRaw:()=>SV,gray:()=>V9e,greatest:()=>Mze,greatestIndex:()=>Eze,group:()=>Rie,groupSort:()=>vze,groups:()=>Fie,hcl:()=>Nk,hierarchy:()=>TV,histogram:()=>$ie,hsl:()=>bk,html:()=>VWe,image:()=>FWe,index:()=>gze,indexes:()=>mze,interpolate:()=>qp,interpolateArray:()=>q7e,interpolateBasis:()=>Cre,interpolateBasisClosed:()=>xre,interpolateBlues:()=>RXe,interpolateBrBG:()=>fXe,interpolateBuGn:()=>xXe,interpolateBuPu:()=>wXe,interpolateCividis:()=>zXe,interpolateCool:()=>$Xe,interpolateCubehelix:()=>jje,interpolateCubehelixDefault:()=>UXe,interpolateCubehelixLong:()=>QM,interpolateDate:()=>kre,interpolateDiscrete:()=>Lje,interpolateGnBu:()=>SXe,interpolateGreens:()=>FXe,interpolateGreys:()=>NXe,interpolateHcl:()=>Gje,interpolateHclLong:()=>Qje,interpolateHsl:()=>Hje,interpolateHslLong:()=>$je,interpolateHue:()=>Bje,interpolateInferno:()=>YXe,interpolateLab:()=>Wje,interpolateMagma:()=>XXe,interpolateNumber:()=>mu,interpolateNumberArray:()=>fB,interpolateObject:()=>Mre,interpolateOrRd:()=>TXe,interpolateOranges:()=>VXe,interpolatePRGn:()=>pXe,interpolatePiYG:()=>gXe,interpolatePlasma:()=>KXe,interpolatePuBu:()=>DXe,interpolatePuBuGn:()=>OXe,interpolatePuOr:()=>mXe,interpolatePuRd:()=>kXe,interpolatePurples:()=>LXe,interpolateRainbow:()=>WXe,interpolateRdBu:()=>vXe,interpolateRdGy:()=>yXe,interpolateRdPu:()=>MXe,interpolateRdYlBu:()=>_Xe,interpolateRdYlGn:()=>bXe,interpolateReds:()=>BXe,interpolateRgb:()=>hw,interpolateRgbBasis:()=>Tre,interpolateRgbBasisClosed:()=>j7e,interpolateRound:()=>GM,interpolateSinebow:()=>jXe,interpolateSpectral:()=>CXe,interpolateString:()=>mB,interpolateTransformCss:()=>zre,interpolateTransformSvg:()=>Ure,interpolateTurbo:()=>qXe,interpolateViridis:()=>ZXe,interpolateWarm:()=>HXe,interpolateYlGn:()=>AXe,interpolateYlGnBu:()=>EXe,interpolateYlOrBr:()=>IXe,interpolateYlOrRd:()=>PXe,interpolateZoom:()=>nle,interrupt:()=>o0,intersection:()=>Hze,interval:()=>lKe,isoFormat:()=>rKe,isoParse:()=>aKe,json:()=>LWe,lab:()=>Fk,lch:()=>z9e,least:()=>kze,leastIndex:()=>jie,line:()=>mh,lineRadial:()=>aue,link:()=>oE,linkHorizontal:()=>_Ye,linkRadial:()=>CYe,linkVertical:()=>bYe,local:()=>tue,map:()=>Lze,matcher:()=>iB,max:()=>lk,maxIndex:()=>Gie,mean:()=>Cze,median:()=>xze,merge:()=>eB,min:()=>ck,minIndex:()=>Qie,mode:()=>Sze,namespace:()=>aw,namespaces:()=>sB,nice:()=>Hie,now:()=>mw,pack:()=>bje,packEnclose:()=>Vae,packSiblings:()=>yje,pairs:()=>Tze,partition:()=>Cje,path:()=>Vf,permute:()=>zie,pie:()=>pYe,piecewise:()=>ole,pointRadial:()=>iS,pointer:()=>xc,pointers:()=>tYe,polygonArea:()=>Zje,polygonCentroid:()=>Xje,polygonContains:()=>eqe,polygonHull:()=>Jje,polygonLength:()=>tqe,precisionFixed:()=>boe,precisionPrefix:()=>Coe,precisionRound:()=>xoe,quadtree:()=>eM,quantile:()=>sw,quantileSorted:()=>Wie,quantize:()=>qje,quickselect:()=>J5,radialArea:()=>lue,radialLine:()=>aue,randomBates:()=>sqe,randomBernoulli:()=>lqe,randomBeta:()=>ule,randomBinomial:()=>hle,randomCauchy:()=>uqe,randomExponential:()=>oqe,randomGamma:()=>PV,randomGeometric:()=>cle,randomInt:()=>iqe,randomIrwinHall:()=>lle,randomLcg:()=>gqe,randomLogNormal:()=>rqe,randomLogistic:()=>hqe,randomNormal:()=>IV,randomPareto:()=>aqe,randomPoisson:()=>dqe,randomUniform:()=>nqe,randomWeibull:()=>cqe,range:()=>Cc,rank:()=>Dze,reduce:()=>Bze,reverse:()=>Vze,rgb:()=>Nf,ribbon:()=>BB,ribbonArrow:()=>L9e,rollup:()=>Lie,rollups:()=>Bie,scaleBand:()=>NV,scaleDiverging:()=>Tce,scaleDivergingLog:()=>Oce,scaleDivergingPow:()=>l6,scaleDivergingSqrt:()=>nXe,scaleDivergingSymlog:()=>Dce,scaleIdentity:()=>mle,scaleImplicit:()=>RV,scaleLinear:()=>Q_,scaleLog:()=>Cle,scaleOrdinal:()=>FV,scalePoint:()=>mqe,scalePow:()=>HV,scaleQuantile:()=>kle,scaleQuantize:()=>Mle,scaleRadial:()=>Dle,scaleSequential:()=>Cce,scaleSequentialLog:()=>xce,scaleSequentialPow:()=>a6,scaleSequentialQuantile:()=>Sce,scaleSequentialSqrt:()=>tXe,scaleSequentialSymlog:()=>wce,scaleSqrt:()=>kqe,scaleSymlog:()=>Sle,scaleThreshold:()=>Ele,scaleTime:()=>JZe,scaleUtc:()=>eXe,scan:()=>Aze,schemeAccent:()=>rXe,schemeBlues:()=>Zce,schemeBrBG:()=>kce,schemeBuGn:()=>Lce,schemeBuPu:()=>Bce,schemeCategory10:()=>iXe,schemeDark2:()=>sXe,schemeGnBu:()=>Vce,schemeGreens:()=>Xce,schemeGreys:()=>Yce,schemeOrRd:()=>zce,schemeOranges:()=>eue,schemePRGn:()=>Mce,schemePaired:()=>oXe,schemePastel1:()=>aXe,schemePastel2:()=>lXe,schemePiYG:()=>Ece,schemePuBu:()=>Hce,schemePuBuGn:()=>Uce,schemePuOr:()=>Ace,schemePuRd:()=>$ce,schemePurples:()=>Kce,schemeRdBu:()=>Ice,schemeRdGy:()=>Pce,schemeRdPu:()=>Wce,schemeRdYlBu:()=>Rce,schemeRdYlGn:()=>Fce,schemeReds:()=>Jce,schemeSet1:()=>cXe,schemeSet2:()=>uXe,schemeSet3:()=>hXe,schemeSpectral:()=>Nce,schemeTableau10:()=>dXe,schemeYlGn:()=>Qce,schemeYlGnBu:()=>Gce,schemeYlOrBr:()=>jce,schemeYlOrRd:()=>qce,select:()=>po,selectAll:()=>nYe,selection:()=>p_,selector:()=>pk,selectorAll:()=>nB,shuffle:()=>qie,shuffler:()=>Zie,some:()=>Fze,sort:()=>j5,stack:()=>jYe,stackOffsetDiverging:()=>ZYe,stackOffsetExpand:()=>qYe,stackOffsetNone:()=>Y_,stackOffsetSilhouette:()=>XYe,stackOffsetWiggle:()=>YYe,stackOrderAppearance:()=>zue,stackOrderAscending:()=>Uue,stackOrderDescending:()=>JYe,stackOrderInsideOut:()=>eKe,stackOrderNone:()=>K_,stackOrderReverse:()=>tKe,stratify:()=>Tje,style:()=>n0,subset:()=>Wze,sum:()=>Ize,superset:()=>Kie,svg:()=>zWe,symbol:()=>EYe,symbolAsterisk:()=>hue,symbolCircle:()=>aE,symbolCross:()=>due,symbolDiamond:()=>pue,symbolDiamond2:()=>gue,symbolPlus:()=>mue,symbolSquare:()=>vue,symbolSquare2:()=>yue,symbolStar:()=>bue,symbolTriangle:()=>Cue,symbolTriangle2:()=>xue,symbolWye:()=>wue,symbolX:()=>Sue,symbols:()=>Tue,symbolsFill:()=>Tue,symbolsStroke:()=>MYe,text:()=>Jk,thresholdFreedmanDiaconis:()=>_ze,thresholdScott:()=>bze,thresholdSturges:()=>K5,tickFormat:()=>gle,tickIncrement:()=>iw,tickStep:()=>d_,ticks:()=>h_,timeDay:()=>Zw,timeDays:()=>Iqe,timeFormat:()=>r6,timeFormatDefaultLocale:()=>bce,timeFormatLocale:()=>rce,timeFriday:()=>zle,timeFridays:()=>Lqe,timeHour:()=>ZV,timeHours:()=>Aqe,timeInterval:()=>No,timeMillisecond:()=>jV,timeMilliseconds:()=>Ile,timeMinute:()=>qV,timeMinutes:()=>Eqe,timeMonday:()=>Xw,timeMondays:()=>Pqe,timeMonth:()=>XV,timeMonths:()=>Vqe,timeParse:()=>_ce,timeSaturday:()=>Ule,timeSaturdays:()=>Bqe,timeSecond:()=>og,timeSeconds:()=>Rle,timeSunday:()=>j_,timeSundays:()=>Hle,timeThursday:()=>k0,timeThursdays:()=>Nqe,timeTickInterval:()=>ice,timeTicks:()=>nce,timeTuesday:()=>Ble,timeTuesdays:()=>Rqe,timeWednesday:()=>Vle,timeWednesdays:()=>Fqe,timeWeek:()=>j_,timeWeeks:()=>Hle,timeYear:()=>ag,timeYears:()=>zqe,timeout:()=>yB,timer:()=>Ok,timerFlush:()=>Pre,transition:()=>Wre,transpose:()=>Xie,tree:()=>Ije,treemap:()=>Pje,treemapBinary:()=>Rje,treemapDice:()=>jw,treemapResquarify:()=>Nje,treemapSlice:()=>WM,treemapSliceDice:()=>Fje,treemapSquarify:()=>ele,tsv:()=>RWe,tsvFormat:()=>Z$e,tsvFormatBody:()=>X$e,tsvFormatRow:()=>K$e,tsvFormatRows:()=>Y$e,tsvFormatValue:()=>J$e,tsvParse:()=>Yse,tsvParseRows:()=>q$e,union:()=>Gze,utcDay:()=>Yw,utcDays:()=>$qe,utcFormat:()=>XM,utcFriday:()=>Zle,utcFridays:()=>qqe,utcHour:()=>JV,utcHours:()=>Hqe,utcMillisecond:()=>jV,utcMilliseconds:()=>Ile,utcMinute:()=>KV,utcMinutes:()=>Uqe,utcMonday:()=>Kw,utcMondays:()=>Wqe,utcMonth:()=>e6,utcMonths:()=>Xqe,utcParse:()=>s6,utcSaturday:()=>Xle,utcSaturdays:()=>Zqe,utcSecond:()=>og,utcSeconds:()=>Rle,utcSunday:()=>q_,utcSundays:()=>Yle,utcThursday:()=>E0,utcThursdays:()=>jqe,utcTickInterval:()=>tce,utcTicks:()=>ece,utcTuesday:()=>jle,utcTuesdays:()=>Gqe,utcWednesday:()=>qle,utcWednesdays:()=>Qqe,utcWeek:()=>q_,utcWeeks:()=>Yle,utcYear:()=>lg,utcYears:()=>Yqe,variance:()=>Mie,window:()=>oB,xml:()=>BWe,zip:()=>Yie,zoom:()=>gKe,zoomIdentity:()=>pE,zoomTransform:()=>Wue});const se=we(c=>function(a){c(this),this.message=a?`${a.length} errors occurred during unsubscription:\n${a.map((h,d)=>`${d+1}) ${h.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=a});function be(c,l){if(c){const a=c.indexOf(l);0<=a&&c.splice(a,1)}}class Ne{constructor(l){this.initialTeardown=l,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let l;if(!this.closed){this.closed=!0;const{_parentage:a}=this;if(a)if(this._parentage=null,Array.isArray(a))for(const f of a)f.remove(this);else a.remove(this);const{initialTeardown:h}=this;if(de(h))try{h()}catch(f){l=f instanceof se?f.errors:[f]}const{_teardowns:d}=this;if(d){this._teardowns=null;for(const f of d)try{ze(f)}catch(p){l=null!=l?l:[],p instanceof se?l=[...l,...p.errors]:l.push(p)}}if(l)throw new se(l)}}add(l){var a;if(l&&l!==this)if(this.closed)ze(l);else{if(l instanceof Ne){if(l.closed||l._hasParent(this))return;l._addParent(this)}(this._teardowns=null!==(a=this._teardowns)&&void 0!==a?a:[]).push(l)}}_hasParent(l){const{_parentage:a}=this;return a===l||Array.isArray(a)&&a.includes(l)}_addParent(l){const{_parentage:a}=this;this._parentage=Array.isArray(a)?(a.push(l),a):a?[a,l]:l}_removeParent(l){const{_parentage:a}=this;a===l?this._parentage=null:Array.isArray(a)&&be(a,l)}remove(l){const{_teardowns:a}=this;a&&be(a,l),l instanceof Ne&&l._removeParent(this)}}Ne.EMPTY=(()=>{const c=new Ne;return c.closed=!0,c})();const He=Ne.EMPTY;function Be(c){return c instanceof Ne||c&&"closed"in c&&de(c.remove)&&de(c.add)&&de(c.unsubscribe)}function ze(c){de(c)?c():c.unsubscribe()}const he={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Te={setTimeout(...c){const{delegate:l}=Te;return((null==l?void 0:l.setTimeout)||setTimeout)(...c)},clearTimeout(c){const{delegate:l}=Te;return((null==l?void 0:l.clearTimeout)||clearTimeout)(c)},delegate:void 0};function Ee(c){Te.setTimeout(()=>{const{onUnhandledError:l}=he;if(!l)throw c;l(c)})}function le(){}const ye=St("C",void 0,void 0);function St(c,l,a){return{kind:c,value:l,error:a}}let Xe=null;function Lt(c){if(he.useDeprecatedSynchronousErrorHandling){const l=!Xe;if(l&&(Xe={errorThrown:!1,error:null}),c(),l){const{errorThrown:a,error:h}=Xe;if(Xe=null,a)throw h}}else c()}class Jt extends Ne{constructor(l){super(),this.isStopped=!1,l?(this.destination=l,Be(l)&&l.add(this)):this.destination=Ct}static create(l,a,h){return new vt(l,a,h)}next(l){this.isStopped?Re(function We(c){return St("N",c,void 0)}(l),this):this._next(l)}error(l){this.isStopped?Re(function xe(c){return St("E",void 0,c)}(l),this):(this.isStopped=!0,this._error(l))}complete(){this.isStopped?Re(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(l){this.destination.next(l)}_error(l){try{this.destination.error(l)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class vt extends Jt{constructor(l,a,h){let d;if(super(),de(l))d=l;else if(l){let f;({next:d,error:a,complete:h}=l),this&&he.useDeprecatedNextContext?(f=Object.create(l),f.unsubscribe=()=>this.unsubscribe()):f=l,d=null==d?void 0:d.bind(f),a=null==a?void 0:a.bind(f),h=null==h?void 0:h.bind(f)}this.destination={next:d?Xt(d):le,error:Xt(null!=a?a:Yn),complete:h?Xt(h):le}}}function Xt(c,l){return(...a)=>{try{c(...a)}catch(h){he.useDeprecatedSynchronousErrorHandling?function Mt(c){he.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=c)}(h):Ee(h)}}}function Yn(c){throw c}function Re(c,l){const{onStoppedNotification:a}=he;a&&Te.setTimeout(()=>a(c,l))}const Ct={closed:!0,next:le,error:Yn,complete:le},ne="function"==typeof Symbol&&Symbol.observable||"@@observable";function Tt(c){return c}function Wt(c){return 0===c.length?Tt:1===c.length?c[0]:function(a){return c.reduce((h,d)=>d(h),a)}}let En=(()=>{class c{constructor(a){a&&(this._subscribe=a)}lift(a){const h=new c;return h.source=this,h.operator=a,h}subscribe(a,h,d){const f=function ht(c){return c&&c instanceof Jt||function ai(c){return c&&de(c.next)&&de(c.error)&&de(c.complete)}(c)&&Be(c)}(a)?a:new vt(a,h,d);return Lt(()=>{const{operator:p,source:g}=this;f.add(p?p.call(f,g):g?this._subscribe(f):this._trySubscribe(f))}),f}_trySubscribe(a){try{return this._subscribe(a)}catch(h){a.error(h)}}forEach(a,h){return new(h=qt(h))((d,f)=>{const p=new vt({next:g=>{try{a(g)}catch(m){f(m),p.unsubscribe()}},error:f,complete:d});this.subscribe(p)})}_subscribe(a){var h;return null===(h=this.source)||void 0===h?void 0:h.subscribe(a)}[ne](){return this}pipe(...a){return Wt(a)(this)}toPromise(a){return new(a=qt(a))((h,d)=>{let f;this.subscribe(p=>f=p,p=>d(p),()=>h(f))})}}return c.create=l=>new c(l),c})();function qt(c){var l;return null!==(l=null!=c?c:he.Promise)&&void 0!==l?l:Promise}const ot=we(c=>function(){c(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yt=(()=>{class c extends En{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(a){const h=new wn(this,this);return h.operator=a,h}_throwIfClosed(){if(this.closed)throw new ot}next(a){Lt(()=>{if(this._throwIfClosed(),!this.isStopped){const h=this.observers.slice();for(const d of h)d.next(a)}})}error(a){Lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=a;const{observers:h}=this;for(;h.length;)h.shift().error(a)}})}complete(){Lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:a}=this;for(;a.length;)a.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var a;return(null===(a=this.observers)||void 0===a?void 0:a.length)>0}_trySubscribe(a){return this._throwIfClosed(),super._trySubscribe(a)}_subscribe(a){return this._throwIfClosed(),this._checkFinalizedStatuses(a),this._innerSubscribe(a)}_innerSubscribe(a){const{hasError:h,isStopped:d,observers:f}=this;return h||d?He:(f.push(a),new Ne(()=>be(f,a)))}_checkFinalizedStatuses(a){const{hasError:h,thrownError:d,isStopped:f}=this;h?a.error(d):f&&a.complete()}asObservable(){const a=new En;return a.source=this,a}}return c.create=(l,a)=>new wn(l,a),c})();class wn extends yt{constructor(l,a){super(),this.destination=l,this.source=a}next(l){var a,h;null===(h=null===(a=this.destination)||void 0===a?void 0:a.next)||void 0===h||h.call(a,l)}error(l){var a,h;null===(h=null===(a=this.destination)||void 0===a?void 0:a.error)||void 0===h||h.call(a,l)}complete(){var l,a;null===(a=null===(l=this.destination)||void 0===l?void 0:l.complete)||void 0===a||a.call(l)}_subscribe(l){var a,h;return null!==(h=null===(a=this.source)||void 0===a?void 0:a.subscribe(l))&&void 0!==h?h:He}}function sn(c){return de(null==c?void 0:c.lift)}function xi(c){return l=>{if(sn(l))return l.lift(function(a){try{return c(a,this)}catch(h){this.error(h)}});throw new TypeError("Unable to lift unknown Observable type")}}class Li extends Jt{constructor(l,a,h,d,f){super(l),this.onFinalize=f,this._next=a?function(p){try{a(p)}catch(g){l.error(g)}}:super._next,this._error=d?function(p){try{d(p)}catch(g){l.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=h?function(){try{h()}catch(p){l.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var l;const{closed:a}=this;super.unsubscribe(),!a&&(null===(l=this.onFinalize)||void 0===l||l.call(this))}}function an(c,l){return xi((a,h)=>{let d=0;a.subscribe(new Li(h,f=>{h.next(c.call(l,f,d++))}))})}function er(c,l,a,h){var p,d=arguments.length,f=d<3?l:null===h?h=Object.getOwnPropertyDescriptor(l,a):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(c,l,a,h);else for(var g=c.length-1;g>=0;g--)(p=c[g])&&(f=(d<3?p(f):d>3?p(l,a,f):p(l,a))||f);return d>3&&f&&Object.defineProperty(l,a,f),f}function jt(c){return this instanceof jt?(this.v=c,this):new jt(c)}function jn(c,l,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,h=a.apply(c,l||[]),f=[];return d={},p("next"),p("throw"),p("return"),d[Symbol.asyncIterator]=function(){return this},d;function p(b){h[b]&&(d[b]=function(C){return new Promise(function(x,S){f.push([b,C,x,S])>1||g(b,C)})})}function g(b,C){try{!function m(b){b.value instanceof jt?Promise.resolve(b.value.v).then(v,y):_(f[0][2],b)}(h[b](C))}catch(x){_(f[0][3],x)}}function v(b){g("next",b)}function y(b){g("throw",b)}function _(b,C){b(C),f.shift(),f.length&&g(f[0][0],f[0][1])}}function rr(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,l=c[Symbol.asyncIterator];return l?l.call(c):(c=function Pt(c){var l="function"==typeof Symbol&&Symbol.iterator,a=l&&c[l],h=0;if(a)return a.call(c);if(c&&"number"==typeof c.length)return{next:function(){return c&&h>=c.length&&(c=void 0),{value:c&&c[h++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a);function h(f){a[f]=c[f]&&function(p){return new Promise(function(g,m){!function d(f,p,g,m){Promise.resolve(m).then(function(v){f({value:v,done:g})},p)}(g,m,(p=c[f](p)).done,p.value)})}}}const fm=c=>c&&"number"==typeof c.length&&"function"!=typeof c;function nu(c){return de(null==c?void 0:c.then)}function Vb(c){return de(c[ne])}function uT(c){return Symbol.asyncIterator&&de(null==c?void 0:c[Symbol.asyncIterator])}function hT(c){return new TypeError(`You provided ${null!==c&&"object"==typeof c?"an invalid object":`'${c}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const zb=function X4(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function _p(c){return de(null==c?void 0:c[zb])}function pm(c){return jn(this,arguments,function*(){const a=c.getReader();try{for(;;){const{value:h,done:d}=yield jt(a.read());if(d)return yield jt(void 0);yield yield jt(h)}}finally{a.releaseLock()}})}function sG(c){return de(null==c?void 0:c.getReader)}function iu(c){if(c instanceof En)return c;if(null!=c){if(Vb(c))return function oCe(c){return new En(l=>{const a=c[ne]();if(de(a.subscribe))return a.subscribe(l);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(c);if(fm(c))return function aCe(c){return new En(l=>{for(let a=0;a<c.length&&!l.closed;a++)l.next(c[a]);l.complete()})}(c);if(nu(c))return function lCe(c){return new En(l=>{c.then(a=>{l.closed||(l.next(a),l.complete())},a=>l.error(a)).then(null,Ee)})}(c);if(uT(c))return oG(c);if(_p(c))return function cCe(c){return new En(l=>{for(const a of c)if(l.next(a),l.closed)return;l.complete()})}(c);if(sG(c))return function uCe(c){return oG(pm(c))}(c)}throw hT(c)}function oG(c){return new En(l=>{(function hCe(c,l){var a,h,d,f;return function gt(c,l,a,h){return new(a||(a=Promise))(function(f,p){function g(y){try{v(h.next(y))}catch(_){p(_)}}function m(y){try{v(h.throw(y))}catch(_){p(_)}}function v(y){y.done?f(y.value):function d(f){return f instanceof a?f:new a(function(p){p(f)})}(y.value).then(g,m)}v((h=h.apply(c,l||[])).next())})}(this,void 0,void 0,function*(){try{for(a=rr(c);!(h=yield a.next()).done;)if(l.next(h.value),l.closed)return}catch(p){d={error:p}}finally{try{h&&!h.done&&(f=a.return)&&(yield f.call(a))}finally{if(d)throw d.error}}l.complete()})})(c,l).catch(a=>l.error(a))})}function tf(c,l,a,h=0,d=!1){const f=l.schedule(function(){a(),d?c.add(this.schedule(null,h)):this.unsubscribe()},h);if(c.add(f),!d)return f}function Ho(c,l,a=1/0){return de(l)?Ho((h,d)=>an((f,p)=>l(h,f,d,p))(iu(c(h,d))),a):("number"==typeof l&&(a=l),xi((h,d)=>function dCe(c,l,a,h,d,f,p,g){const m=[];let v=0,y=0,_=!1;const b=()=>{_&&!m.length&&!v&&l.complete()},C=S=>v<h?x(S):m.push(S),x=S=>{f&&l.next(S),v++;let w=!1;iu(a(S,y++)).subscribe(new Li(l,T=>{null==d||d(T),f?C(T):l.next(T)},()=>{w=!0},void 0,()=>{if(w)try{for(v--;m.length&&v<h;){const T=m.shift();p?tf(l,p,()=>x(T)):x(T)}b()}catch(T){l.error(T)}}))};return c.subscribe(new Li(l,C,()=>{_=!0,b()})),()=>{null==g||g()}}(h,d,c,a)))}function Pv(c=1/0){return Ho(Tt,c)}const nf=new En(c=>c.complete());function Y4(c){return c[c.length-1]}function aG(c){return de(Y4(c))?c.pop():void 0}function Ub(c){return function pCe(c){return c&&de(c.schedule)}(Y4(c))?c.pop():void 0}function lG(c,l=0){return xi((a,h)=>{a.subscribe(new Li(h,d=>tf(h,c,()=>h.next(d),l),()=>tf(h,c,()=>h.complete(),l),d=>tf(h,c,()=>h.error(d),l)))})}function cG(c,l=0){return xi((a,h)=>{h.add(c.schedule(()=>a.subscribe(h),l))})}function uG(c,l){if(!c)throw new Error("Iterable cannot be null");return new En(a=>{tf(a,l,()=>{const h=c[Symbol.asyncIterator]();tf(a,l,()=>{h.next().then(d=>{d.done?a.complete():a.next(d.value)})},0,!0)})})}function Ys(c,l){return l?function CCe(c,l){if(null!=c){if(Vb(c))return function mCe(c,l){return iu(c).pipe(cG(l),lG(l))}(c,l);if(fm(c))return function yCe(c,l){return new En(a=>{let h=0;return l.schedule(function(){h===c.length?a.complete():(a.next(c[h++]),a.closed||this.schedule())})})}(c,l);if(nu(c))return function vCe(c,l){return iu(c).pipe(cG(l),lG(l))}(c,l);if(uT(c))return uG(c,l);if(_p(c))return function _Ce(c,l){return new En(a=>{let h;return tf(a,l,()=>{h=c[zb](),tf(a,l,()=>{let d,f;try{({value:d,done:f}=h.next())}catch(p){return void a.error(p)}f?a.complete():a.next(d)},0,!0)}),()=>de(null==h?void 0:h.return)&&h.return()})}(c,l);if(sG(c))return function bCe(c,l){return uG(pm(c),l)}(c,l)}throw hT(c)}(c,l):iu(c)}function bp(c){return c<=0?()=>nf:xi((l,a)=>{let h=0;l.subscribe(new Li(a,d=>{++h<=c&&(a.next(d),c<=h&&a.complete())}))})}function K4(c,l,...a){return!0===l?(c(),null):!1===l?null:l(...a).pipe(bp(1)).subscribe(()=>c())}function Wr(c){for(let l in c)if(c[l]===Wr)return l;throw Error("Could not find renamed property on target object.")}function J4(c,l){for(const a in l)l.hasOwnProperty(a)&&!c.hasOwnProperty(a)&&(c[a]=l[a])}function Gr(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(Gr).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const l=c.toString();if(null==l)return""+l;const a=l.indexOf("\n");return-1===a?l:l.substring(0,a)}function eP(c,l){return null==c||""===c?null===l?"":l:null==l||""===l?c:c+" "+l}const SCe=Wr({__forward_ref__:Wr});function Zr(c){return c.__forward_ref__=Zr,c.toString=function(){return Gr(this())},c}function li(c){return tP(c)?c():c}function tP(c){return"function"==typeof c&&c.hasOwnProperty(SCe)&&c.__forward_ref__===Zr}class Et extends Error{constructor(l,a){super(function dT(c,l){return`NG0${Math.abs(c)}${l?": "+l.trim():""}`}(l,a)),this.code=l}}function wi(c){return"string"==typeof c?c:null==c?"":String(c)}function fT(c,l){throw new Et(-201,!1)}function ac(c,l){null==c&&function Sr(c,l,a,h){throw new Error(`ASSERTION ERROR: ${c}`+(null==h?"":` [Expected=> ${a} ${h} ${l} <=Actual]`))}(l,c,null,"!=")}function qe(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Mn(c){return{providers:c.providers||[],imports:c.imports||[]}}function pT(c){return hG(c,gT)||hG(c,fG)}function hG(c,l){return c.hasOwnProperty(l)?c[l]:null}function dG(c){return c&&(c.hasOwnProperty(nP)||c.hasOwnProperty(PCe))?c[nP]:null}const gT=Wr({\u0275prov:Wr}),nP=Wr({\u0275inj:Wr}),fG=Wr({ngInjectableDef:Wr}),PCe=Wr({ngInjectorDef:Wr});var ni=(()=>((ni=ni||{})[ni.Default=0]="Default",ni[ni.Host=1]="Host",ni[ni.Self=2]="Self",ni[ni.SkipSelf=4]="SkipSelf",ni[ni.Optional=8]="Optional",ni))();let iP;function ru(c){const l=iP;return iP=c,l}function pG(c,l,a){const h=pT(c);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:a&ni.Optional?null:void 0!==l?l:void fT(Gr(c))}function Cp(c){return{toString:c}.toString()}var Bu=(()=>((Bu=Bu||{})[Bu.OnPush=0]="OnPush",Bu[Bu.Default=1]="Default",Bu))(),Vu=(()=>{return(c=Vu||(Vu={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",Vu;var c})();const Xr=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),Rv={},Cr=[],mT=Wr({\u0275cmp:Wr}),rP=Wr({\u0275dir:Wr}),sP=Wr({\u0275pipe:Wr}),gG=Wr({\u0275mod:Wr}),sf=Wr({\u0275fac:Wr}),Hb=Wr({__NG_ELEMENT_ID__:Wr});let FCe=0;function je(c){return Cp(()=>{const a=!0===c.standalone,h={},d={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===Bu.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&c.dependencies||null,getStandaloneInjector:null,selectors:c.selectors||Cr,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||Vu.Emulated,id:"c"+FCe++,styles:c.styles||Cr,_:null,setInput:null,schemas:c.schemas||null,tView:null},f=c.dependencies,p=c.features;return d.inputs=yG(c.inputs,h),d.outputs=yG(c.outputs),p&&p.forEach(g=>g(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(mG).filter(vG):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Ya).filter(vG):null,d})}function oP(c,l,a){const h=c.\u0275cmp;h.directiveDefs=()=>("function"==typeof l?l():l).map(mG),h.pipeDefs=()=>("function"==typeof a?a():a).map(Ya)}function mG(c){return Rr(c)||Xa(c)}function vG(c){return null!==c}function An(c){return Cp(()=>({type:c.type,bootstrap:c.bootstrap||Cr,declarations:c.declarations||Cr,imports:c.imports||Cr,exports:c.exports||Cr,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null}))}function yG(c,l){if(null==c)return Rv;const a={};for(const h in c)if(c.hasOwnProperty(h)){let d=c[h],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=h,l&&(l[d]=f)}return a}const bt=je;function Rl(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function Rr(c){return c[mT]||null}function Xa(c){return c[rP]||null}function Ya(c){return c[sP]||null}function lc(c,l){const a=c[gG]||null;if(!a&&!0===l)throw new Error(`Type ${Gr(c)} does not have '\u0275mod' property.`);return a}function Fl(c){return Array.isArray(c)&&"object"==typeof c[1]}function Uu(c){return Array.isArray(c)&&!0===c[1]}function cP(c){return 0!=(8&c.flags)}function bT(c){return 2==(2&c.flags)}function CT(c){return 1==(1&c.flags)}function Hu(c){return null!==c.template}function zCe(c){return 0!=(256&c[2])}function _m(c,l){return c.hasOwnProperty(sf)?c[sf]:null}class $Ce{constructor(l,a,h){this.previousValue=l,this.currentValue=a,this.firstChange=h}isFirstChange(){return this.firstChange}}function Wo(){return CG}function CG(c){return c.type.prototype.ngOnChanges&&(c.setInput=GCe),WCe}function WCe(){const c=wG(this),l=null==c?void 0:c.current;if(l){const a=c.previous;if(a===Rv)c.previous=l;else for(let h in l)a[h]=l[h];c.current=null,this.ngOnChanges(l)}}function GCe(c,l,a,h){const d=wG(c)||function QCe(c,l){return c[xG]=l}(c,{previous:Rv,current:null}),f=d.current||(d.current={}),p=d.previous,g=this.declaredInputs[a],m=p[g];f[g]=new $Ce(m&&m.currentValue,l,p===Rv),c[h]=l}Wo.ngInherit=!0;const xG="__ngSimpleChanges__";function wG(c){return c[xG]||null}function lo(c){for(;Array.isArray(c);)c=c[0];return c}function xT(c,l){return lo(l[c])}function au(c,l){return lo(l[c.index])}function pP(c,l){return c.data[l]}function Vv(c,l){return c[l]}function uc(c,l){const a=l[c];return Fl(a)?a:a[0]}function wT(c){return 64==(64&c[2])}function xp(c,l){return null==l?null:c[l]}function SG(c){c[18]=0}function gP(c,l){c[5]+=l;let a=c,h=c[3];for(;null!==h&&(1===l&&1===a[5]||-1===l&&0===a[5]);)h[5]+=l,a=h,h=h[3]}const _i={lFrame:RG(null),bindingsEnabled:!0};function OG(){return _i.bindingsEnabled}function Rt(){return _i.lFrame.lView}function cr(){return _i.lFrame.tView}function De(c){return _i.lFrame.contextLView=c,c[8]}function ke(c){return _i.lFrame.contextLView=null,c}function Do(){let c=DG();for(;null!==c&&64===c.type;)c=c.parent;return c}function DG(){return _i.lFrame.currentTNode}function Vh(c,l){const a=_i.lFrame;a.currentTNode=c,a.isParent=l}function mP(){return _i.lFrame.isParent}function vP(){_i.lFrame.isParent=!1}function Ka(){const c=_i.lFrame;let l=c.bindingRootIndex;return-1===l&&(l=c.bindingRootIndex=c.tView.bindingStartIndex),l}function af(){return _i.lFrame.bindingIndex}function zv(){return _i.lFrame.bindingIndex++}function lf(c){const l=_i.lFrame,a=l.bindingIndex;return l.bindingIndex=l.bindingIndex+c,a}function axe(c,l){const a=_i.lFrame;a.bindingIndex=a.bindingRootIndex=c,yP(l)}function yP(c){_i.lFrame.currentDirectiveIndex=c}function AG(){return _i.lFrame.currentQueryIndex}function bP(c){_i.lFrame.currentQueryIndex=c}function cxe(c){const l=c[1];return 2===l.type?l.declTNode:1===l.type?c[6]:null}function IG(c,l,a){if(a&ni.SkipSelf){let d=l,f=c;for(;!(d=d.parent,null!==d||a&ni.Host||(d=cxe(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;l=d,c=f}const h=_i.lFrame=PG();return h.currentTNode=l,h.lView=c,!0}function CP(c){const l=PG(),a=c[1];_i.lFrame=l,l.currentTNode=a.firstChild,l.lView=c,l.tView=a,l.contextLView=c,l.bindingIndex=a.bindingStartIndex,l.inI18n=!1}function PG(){const c=_i.lFrame,l=null===c?null:c.child;return null===l?RG(c):l}function RG(c){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=l),l}function FG(){const c=_i.lFrame;return _i.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const NG=FG;function xP(){const c=FG();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function Ja(){return _i.lFrame.selectedIndex}function wp(c){_i.lFrame.selectedIndex=c}function zs(){const c=_i.lFrame;return pP(c.tView,c.selectedIndex)}function lu(){_i.lFrame.currentNamespace="svg"}function ST(c,l){for(let a=l.directiveStart,h=l.directiveEnd;a<h;a++){const f=c.data[a].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:g,ngAfterViewInit:m,ngAfterViewChecked:v,ngOnDestroy:y}=f;p&&(c.contentHooks||(c.contentHooks=[])).push(-a,p),g&&((c.contentHooks||(c.contentHooks=[])).push(a,g),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(a,g)),m&&(c.viewHooks||(c.viewHooks=[])).push(-a,m),v&&((c.viewHooks||(c.viewHooks=[])).push(a,v),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(a,v)),null!=y&&(c.destroyHooks||(c.destroyHooks=[])).push(a,y)}}function TT(c,l,a){BG(c,l,3,a)}function OT(c,l,a,h){(3&c[2])===a&&BG(c,l,a,h)}function wP(c,l){let a=c[2];(3&a)===l&&(a&=2047,a+=1,c[2]=a)}function BG(c,l,a,h){const f=null!=h?h:-1,p=l.length-1;let g=0;for(let m=void 0!==h?65535&c[18]:0;m<p;m++)if("number"==typeof l[m+1]){if(g=l[m],null!=h&&g>=h)break}else l[m]<0&&(c[18]+=65536),(g<f||-1==f)&&(mxe(c,a,l,m),c[18]=(4294901760&c[18])+m+2),m++}function mxe(c,l,a,h){const d=a[h]<0,f=a[h+1],g=c[d?-a[h]:a[h]];if(d){if(c[2]>>11<c[18]>>16&&(3&c[2])===l){c[2]+=2048;try{f.call(g)}finally{}}}else try{f.call(g)}finally{}}class qb{constructor(l,a,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=h}}function DT(c,l,a){let h=0;for(;h<a.length;){const d=a[h];if("number"==typeof d){if(0!==d)break;h++;const f=a[h++],p=a[h++],g=a[h++];c.setAttribute(l,p,g,f)}else{const f=d,p=a[++h];zG(f)?c.setProperty(l,f,p):c.setAttribute(l,f,p),h++}}return h}function VG(c){return 3===c||4===c||6===c}function zG(c){return 64===c.charCodeAt(0)}function kT(c,l){if(null!==l&&0!==l.length)if(null===c||0===c.length)c=l.slice();else{let a=-1;for(let h=0;h<l.length;h++){const d=l[h];"number"==typeof d?a=d:0===a||UG(c,a,d,null,-1===a||2===a?l[++h]:null)}}return c}function UG(c,l,a,h,d){let f=0,p=c.length;if(-1===l)p=-1;else for(;f<c.length;){const g=c[f++];if("number"==typeof g){if(g===l){p=-1;break}if(g>l){p=f-1;break}}}for(;f<c.length;){const g=c[f];if("number"==typeof g)break;if(g===a){if(null===h)return void(null!==d&&(c[f+1]=d));if(h===c[f+1])return void(c[f+2]=d)}f++,null!==h&&f++,null!==d&&f++}-1!==p&&(c.splice(p,0,l),f=p+1),c.splice(f++,0,a),null!==h&&c.splice(f++,0,h),null!==d&&c.splice(f++,0,d)}function HG(c){return-1!==c}function Uv(c){return 32767&c}function Hv(c,l){let a=function Cxe(c){return c>>16}(c),h=l;for(;a>0;)h=h[15],a--;return h}let TP=!0;function MT(c){const l=TP;return TP=c,l}let xxe=0;const zh={};function Xb(c,l){const a=DP(c,l);if(-1!==a)return a;const h=l[1];h.firstCreatePass&&(c.injectorIndex=l.length,OP(h.data,c),OP(l,null),OP(h.blueprint,null));const d=ET(c,l),f=c.injectorIndex;if(HG(d)){const p=Uv(d),g=Hv(d,l),m=g[1].data;for(let v=0;v<8;v++)l[f+v]=g[p+v]|m[p+v]}return l[f+8]=d,f}function OP(c,l){c.push(0,0,0,0,0,0,0,0,l)}function DP(c,l){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===l[c.injectorIndex+8]?-1:c.injectorIndex}function ET(c,l){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let a=0,h=null,d=l;for(;null!==d;){if(h=YG(d),null===h)return-1;if(a++,d=d[15],-1!==h.injectorIndex)return h.injectorIndex|a<<16}return-1}function AT(c,l,a){!function wxe(c,l,a){let h;"string"==typeof a?h=a.charCodeAt(0)||0:a.hasOwnProperty(Hb)&&(h=a[Hb]),null==h&&(h=a[Hb]=xxe++);const d=255&h;l.data[c+(d>>5)]|=1<<d}(c,l,a)}function GG(c,l,a){if(a&ni.Optional||void 0!==c)return c;fT()}function QG(c,l,a,h){if(a&ni.Optional&&void 0===h&&(h=null),0==(a&(ni.Self|ni.Host))){const d=c[9],f=ru(void 0);try{return d?d.get(l,h,a&ni.Optional):pG(l,h,a&ni.Optional)}finally{ru(f)}}return GG(h,0,a)}function jG(c,l,a,h=ni.Default,d){if(null!==c){if(1024&l[2]){const p=function kxe(c,l,a,h,d){let f=c,p=l;for(;null!==f&&null!==p&&1024&p[2]&&!(256&p[2]);){const g=qG(f,p,a,h|ni.Self,zh);if(g!==zh)return g;let m=f.parent;if(!m){const v=p[21];if(v){const y=v.get(a,zh,h);if(y!==zh)return y}m=YG(p),p=p[15]}f=m}return d}(c,l,a,h,zh);if(p!==zh)return p}const f=qG(c,l,a,h,zh);if(f!==zh)return f}return QG(l,a,h,d)}function qG(c,l,a,h,d){const f=function Oxe(c){if("string"==typeof c)return c.charCodeAt(0)||0;const l=c.hasOwnProperty(Hb)?c[Hb]:void 0;return"number"==typeof l?l>=0?255&l:Dxe:l}(a);if("function"==typeof f){if(!IG(l,c,h))return h&ni.Host?GG(d,0,h):QG(l,a,h,d);try{const p=f(h);if(null!=p||h&ni.Optional)return p;fT()}finally{NG()}}else if("number"==typeof f){let p=null,g=DP(c,l),m=-1,v=h&ni.Host?l[16][6]:null;for((-1===g||h&ni.SkipSelf)&&(m=-1===g?ET(c,l):l[g+8],-1!==m&&XG(h,!1)?(p=l[1],g=Uv(m),l=Hv(m,l)):g=-1);-1!==g;){const y=l[1];if(ZG(f,g,y.data)){const _=Txe(g,l,a,p,h,v);if(_!==zh)return _}m=l[g+8],-1!==m&&XG(h,l[1].data[g+8]===v)&&ZG(f,g,l)?(p=y,g=Uv(m),l=Hv(m,l)):g=-1}}return d}function Txe(c,l,a,h,d,f){const p=l[1],g=p.data[c+8],y=IT(g,p,a,null==h?bT(g)&&TP:h!=p&&0!=(3&g.type),d&ni.Host&&f===g);return null!==y?Yb(l,p,y,g):zh}function IT(c,l,a,h,d){const f=c.providerIndexes,p=l.data,g=1048575&f,m=c.directiveStart,y=f>>20,b=d?g+y:c.directiveEnd;for(let C=h?g:g+y;C<b;C++){const x=p[C];if(C<m&&a===x||C>=m&&x.type===a)return C}if(d){const C=p[m];if(C&&Hu(C)&&C.type===a)return m}return null}function Yb(c,l,a,h){let d=c[a];const f=l.data;if(function vxe(c){return c instanceof qb}(d)){const p=d;p.resolving&&function TCe(c,l){const a=l?`. Dependency path: ${l.join(" > ")} > ${c}`:"";throw new Et(-200,`Circular dependency in DI detected for ${c}${a}`)}(function br(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():wi(c)}(f[a]));const g=MT(p.canSeeViewProviders);p.resolving=!0;const m=p.injectImpl?ru(p.injectImpl):null;IG(c,h,ni.Default);try{d=c[a]=p.factory(void 0,f,c,h),l.firstCreatePass&&a>=h.directiveStart&&function gxe(c,l,a){const{ngOnChanges:h,ngOnInit:d,ngDoCheck:f}=l.type.prototype;if(h){const p=CG(l);(a.preOrderHooks||(a.preOrderHooks=[])).push(c,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c,p)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-c,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c,f))}(a,f[a],l)}finally{null!==m&&ru(m),MT(g),p.resolving=!1,NG()}}return d}function ZG(c,l,a){return!!(a[l+(c>>5)]&1<<c)}function XG(c,l){return!(c&ni.Self||c&ni.Host&&l)}class $v{constructor(l,a){this._tNode=l,this._lView=a}get(l,a,h){return jG(this._tNode,this._lView,l,h,a)}}function Dxe(){return new $v(Do(),Rt())}function os(c){return Cp(()=>{const l=c.prototype.constructor,a=l[sf]||kP(l),h=Object.prototype;let d=Object.getPrototypeOf(c.prototype).constructor;for(;d&&d!==h;){const f=d[sf]||kP(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function kP(c){return tP(c)?()=>{const l=kP(li(c));return l&&l()}:_m(c)}function YG(c){const l=c[1],a=l.type;return 2===a?l.declTNode:1===a?c[6]:null}function Wv(c){return function Sxe(c,l){if("class"===l)return c.classes;if("style"===l)return c.styles;const a=c.attrs;if(a){const h=a.length;let d=0;for(;d<h;){const f=a[d];if(VG(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<h&&"string"==typeof a[d];)d++;else{if(f===l)return a[d+1];d+=2}}}return null}(Do(),c)}const Qv="__parameters__";function qv(c,l,a){return Cp(()=>{const h=function MP(c){return function(...a){if(c){const h=c(...a);for(const d in h)this[d]=h[d]}}}(l);function d(...f){if(this instanceof d)return h.apply(this,f),this;const p=new d(...f);return g.annotation=p,g;function g(m,v,y){const _=m.hasOwnProperty(Qv)?m[Qv]:Object.defineProperty(m,Qv,{value:[]})[Qv];for(;_.length<=y;)_.push(null);return(_[y]=_[y]||[]).push(p),m}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=c,d.annotationCls=d,d})}class Ln{constructor(l,a){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qe({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const PT=Function;function hc(c,l){void 0===l&&(l=c);for(let a=0;a<c.length;a++){let h=c[a];Array.isArray(h)?(l===c&&(l=c.slice(0,a)),hc(h,l)):l!==c&&l.push(h)}return l}function cf(c,l){c.forEach(a=>Array.isArray(a)?cf(a,l):l(a))}function JG(c,l,a){l>=c.length?c.push(a):c.splice(l,0,a)}function RT(c,l){return l>=c.length-1?c.pop():c.splice(l,1)[0]}function eC(c,l){const a=[];for(let h=0;h<c;h++)a.push(l);return a}function dc(c,l,a){let h=Zv(c,l);return h>=0?c[1|h]=a:(h=~h,function Ixe(c,l,a,h){let d=c.length;if(d==l)c.push(a,h);else if(1===d)c.push(h,c[0]),c[0]=a;else{for(d--,c.push(c[d-1],c[d]);d>l;)c[d]=c[d-2],d--;c[l]=a,c[l+1]=h}}(c,h,l,a)),h}function EP(c,l){const a=Zv(c,l);if(a>=0)return c[1|a]}function Zv(c,l){return function nQ(c,l,a){let h=0,d=c.length>>a;for(;d!==h;){const f=h+(d-h>>1),p=c[f<<a];if(l===p)return f<<a;p>l?d=f:h=f+1}return~(d<<a)}(c,l,1)}const tC={},IP="__NG_DI_FLAG__",NT="ngTempTokenPath",zxe=/\n/gm,iQ="__source";let nC;function Xv(c){const l=nC;return nC=c,l}function Hxe(c,l=ni.Default){if(void 0===nC)throw new Et(-203,!1);return null===nC?pG(c,void 0,l):nC.get(c,l&ni.Optional?null:void 0,l)}function Ae(c,l=ni.Default){return(function RCe(){return iP}()||Hxe)(li(c),l)}function Ks(c,l=ni.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),Ae(c,l)}function PP(c){const l=[];for(let a=0;a<c.length;a++){const h=li(c[a]);if(Array.isArray(h)){if(0===h.length)throw new Et(900,!1);let d,f=ni.Default;for(let p=0;p<h.length;p++){const g=h[p],m=$xe(g);"number"==typeof m?-1===m?d=g.token:f|=m:d=g}l.push(Ae(d,f))}else l.push(Ae(h))}return l}function iC(c,l){return c[IP]=l,c.prototype[IP]=l,c}function $xe(c){return c[IP]}const Tp=iC(qv("Optional"),8),Op=iC(qv("SkipSelf"),4);let FP;class mQ{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Dp(c){return c instanceof mQ?c.changingThisBreaksApplicationSecurity:c}const fwe=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var co=(()=>((co=co||{})[co.NONE=0]="NONE",co[co.HTML=1]="HTML",co[co.STYLE=2]="STYLE",co[co.SCRIPT=3]="SCRIPT",co[co.URL=4]="URL",co[co.RESOURCE_URL=5]="RESOURCE_URL",co))();function lC(c){const l=function cC(){const c=Rt();return c&&c[12]}();return l?l.sanitize(co.URL,c)||"":function oC(c,l){const a=function cwe(c){return c instanceof mQ&&c.getTypeName()||null}(c);if(null!=a&&a!==l){if("ResourceURL"===a&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===l}(c,"URL")?Dp(c):function BP(c){return(c=String(c)).match(fwe)?c:"unsafe:"+c}(wi(c))}const HP=new Ln("ENVIRONMENT_INITIALIZER"),SQ=new Ln("INJECTOR",-1),TQ=new Ln("INJECTOR_DEF_TYPES");class OQ{get(l,a=tC){if(a===tC){const h=new Error(`NullInjectorError: No provider for ${Gr(l)}!`);throw h.name="NullInjectorError",h}return a}}function Dwe(...c){return{\u0275providers:DQ(0,c)}}function DQ(c,...l){const a=[],h=new Set;let d;return cf(l,f=>{const p=f;$P(p,a,[],h)&&(d||(d=[]),d.push(p))}),void 0!==d&&kQ(d,a),a}function kQ(c,l){for(let a=0;a<c.length;a++){const{providers:d}=c[a];cf(d,f=>{l.push(f)})}}function $P(c,l,a,h){if(!(c=li(c)))return!1;let d=null,f=dG(c);const p=!f&&Rr(c);if(f||p){if(p&&!p.standalone)return!1;d=c}else{const m=c.ngModule;if(f=dG(m),!f)return!1;d=m}const g=h.has(d);if(p){if(g)return!1;if(h.add(d),p.dependencies){const m="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const v of m)$P(v,l,a,h)}}else{if(!f)return!1;{if(null!=f.imports&&!g){let v;h.add(d);try{cf(f.imports,y=>{$P(y,l,a,h)&&(v||(v=[]),v.push(y))})}finally{}void 0!==v&&kQ(v,l)}if(!g){const v=_m(d)||(()=>new d);l.push({provide:d,useFactory:v,deps:Cr},{provide:TQ,useValue:d,multi:!0},{provide:HP,useValue:()=>Ae(d),multi:!0})}const m=f.providers;null==m||g||cf(m,y=>{l.push(y)})}}return d!==c&&void 0!==c.providers}const kwe=Wr({provide:String,useValue:Wr});function WP(c){return null!==c&&"object"==typeof c&&kwe in c}function bm(c){return"function"==typeof c}const GP=new Ln("Set Injector scope."),HT={},Ewe={};let QP;function $T(){return void 0===QP&&(QP=new OQ),QP}class kp{}class AQ extends kp{constructor(l,a,h,d){super(),this.parent=a,this.source=h,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qP(l,p=>this.processProvider(p)),this.records.set(SQ,Jv(void 0,this)),d.has("environment")&&this.records.set(kp,Jv(void 0,this));const f=this.records.get(GP);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(TQ.multi,Cr,ni.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const a=Xv(this),h=ru(void 0);try{return l()}finally{Xv(a),ru(h)}}get(l,a=tC,h=ni.Default){this.assertNotDestroyed();const d=Xv(this),f=ru(void 0);try{if(!(h&ni.SkipSelf)){let g=this.records.get(l);if(void 0===g){const m=function Fwe(c){return"function"==typeof c||"object"==typeof c&&c instanceof Ln}(l)&&pT(l);g=m&&this.injectableDefInScope(m)?Jv(jP(l),HT):null,this.records.set(l,g)}if(null!=g)return this.hydrate(l,g)}return(h&ni.Self?$T():this.parent).get(l,a=h&ni.Optional&&a===tC?null:a)}catch(p){if("NullInjectorError"===p.name){if((p[NT]=p[NT]||[]).unshift(Gr(l)),d)throw p;return function Wxe(c,l,a,h){const d=c[NT];throw l[iQ]&&d.unshift(l[iQ]),c.message=function Gxe(c,l,a,h=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.slice(2):c;let d=Gr(l);if(Array.isArray(l))d=l.map(Gr).join(" -> ");else if("object"==typeof l){let f=[];for(let p in l)if(l.hasOwnProperty(p)){let g=l[p];f.push(p+":"+("string"==typeof g?JSON.stringify(g):Gr(g)))}d=`{${f.join(", ")}}`}return`${a}${h?"("+h+")":""}[${d}]: ${c.replace(zxe,"\n  ")}`}("\n"+c.message,d,a,h),c.ngTokenPath=d,c[NT]=null,c}(p,l,"R3InjectorError",this.source)}throw p}finally{ru(f),Xv(d)}}resolveInjectorInitializers(){const l=Xv(this),a=ru(void 0);try{const h=this.get(HP.multi,Cr,ni.Self);for(const d of h)d()}finally{Xv(l),ru(a)}}toString(){const l=[],a=this.records;for(const h of a.keys())l.push(Gr(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Et(205,!1)}processProvider(l){let a=bm(l=li(l))?l:li(l&&l.provide);const h=function Iwe(c){return WP(c)?Jv(void 0,c.useValue):Jv(IQ(c),HT)}(l);if(bm(l)||!0!==l.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Jv(void 0,HT,!0),d.factory=()=>PP(d.multi),this.records.set(a,d)),a=l,d.multi.push(l)}this.records.set(a,h)}hydrate(l,a){return a.value===HT&&(a.value=Ewe,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Rwe(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(l){if(!l.providedIn)return!1;const a=li(l.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function jP(c){const l=pT(c),a=null!==l?l.factory:_m(c);if(null!==a)return a;if(c instanceof Ln)throw new Et(204,!1);if(c instanceof Function)return function Awe(c){const l=c.length;if(l>0)throw eC(l,"?"),new Et(204,!1);const a=function ACe(c){const l=c&&(c[gT]||c[fG]);if(l){const a=function ICe(c){if(c.hasOwnProperty("name"))return c.name;const l=(""+c).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),l}return null}(c);return null!==a?()=>a.factory(c):()=>new c}(c);throw new Et(204,!1)}function IQ(c,l,a){let h;if(bm(c)){const d=li(c);return _m(d)||jP(d)}if(WP(c))h=()=>li(c.useValue);else if(function EQ(c){return!(!c||!c.useFactory)}(c))h=()=>c.useFactory(...PP(c.deps||[]));else if(function MQ(c){return!(!c||!c.useExisting)}(c))h=()=>Ae(li(c.useExisting));else{const d=li(c&&(c.useClass||c.provide));if(!function Pwe(c){return!!c.deps}(c))return _m(d)||jP(d);h=()=>new d(...PP(c.deps))}return h}function Jv(c,l,a=!1){return{factory:c,value:l,multi:a?[]:void 0}}function Nwe(c){return!!c.\u0275providers}function qP(c,l){for(const a of c)Array.isArray(a)?qP(a,l):Nwe(a)?qP(a.\u0275providers,l):l(a)}class PQ{}class Vwe{resolveComponentFactory(l){throw function Bwe(c){const l=Error(`No component factory found for ${Gr(c)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=c,l}(l)}}let Mp=(()=>{class c{}return c.NULL=new Vwe,c})();function zwe(){return ey(Do(),Rt())}function ey(c,l){return new Sn(au(c,l))}let Sn=(()=>{class c{constructor(a){this.nativeElement=a}}return c.__NG_ELEMENT_ID__=zwe,c})();function Uwe(c){return c instanceof Sn?c.nativeElement:c}class ty{}let di=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function Hwe(){const c=Rt(),a=uc(Do().index,c);return(Fl(a)?a:c)[11]}(),c})(),$we=(()=>{class c{}return c.\u0275prov=qe({token:c,providedIn:"root",factory:()=>null}),c})();class uC{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Wwe=new uC("14.2.6"),ZP={};function eR(c){return c.ngOriginalError}class ny{constructor(){this._console=console}handleError(l){const a=this._findOriginalError(l);this._console.error("ERROR",l),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(l){let a=l&&eR(l);for(;a&&eR(a);)a=eR(a);return a||null}}const tR=new Map;let nSe=0;const iR="__ngContext__";function xa(c,l){Fl(l)?(c[iR]=l[20],function rSe(c){tR.set(c[20],c)}(l)):c[iR]=l}function iy(c){return c.ownerDocument.defaultView}function dC(c){return c.ownerDocument}function QQ(c){return c.ownerDocument.body}function hf(c){return c instanceof Function?c():c}var Nl=(()=>((Nl=Nl||{})[Nl.Important=1]="Important",Nl[Nl.DashCase=2]="DashCase",Nl))();function sR(c,l){return undefined(c,l)}function fC(c){const l=c[3];return Uu(l)?l[3]:l}function oR(c){return ZQ(c[13])}function aR(c){return ZQ(c[4])}function ZQ(c){for(;null!==c&&!Uu(c);)c=c[4];return c}function sy(c,l,a,h,d){if(null!=h){let f,p=!1;Uu(h)?f=h:Fl(h)&&(p=!0,h=h[0]);const g=lo(h);0===c&&null!==a?null==d?tj(l,a,g):Cm(l,a,g,d||null,!0):1===c&&null!==a?Cm(l,a,g,d||null,!0):2===c?function lj(c,l,a){const h=WT(c,l);h&&function kSe(c,l,a,h){c.removeChild(l,a,h)}(c,h,l,a)}(l,g,p):3===c&&l.destroyNode(g),null!=f&&function ASe(c,l,a,h,d){const f=a[7];f!==lo(a)&&sy(l,c,h,f,d);for(let g=10;g<a.length;g++){const m=a[g];pC(m[1],m,c,l,h,f)}}(l,c,f,a,d)}}function cR(c,l,a){return c.createElement(l,a)}function YQ(c,l){const a=c[9],h=a.indexOf(l),d=l[3];512&l[2]&&(l[2]&=-513,gP(d,-1)),a.splice(h,1)}function uR(c,l){if(c.length<=10)return;const a=10+l,h=c[a];if(h){const d=h[17];null!==d&&d!==c&&YQ(d,h),l>0&&(c[a-1][4]=h[4]);const f=RT(c,10+l);!function bSe(c,l){pC(c,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const p=f[19];null!==p&&p.detachView(f[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function KQ(c,l){if(!(128&l[2])){const a=l[11];a.destroyNode&&pC(c,l,a,3,null,null),function wSe(c){let l=c[13];if(!l)return hR(c[1],c);for(;l;){let a=null;if(Fl(l))a=l[13];else{const h=l[10];h&&(a=h)}if(!a){for(;l&&!l[4]&&l!==c;)Fl(l)&&hR(l[1],l),l=l[3];null===l&&(l=c),Fl(l)&&hR(l[1],l),a=l&&l[4]}l=a}}(l)}}function hR(c,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function DSe(c,l){let a;if(null!=c&&null!=(a=c.destroyHooks))for(let h=0;h<a.length;h+=2){const d=l[a[h]];if(!(d instanceof qb)){const f=a[h+1];if(Array.isArray(f))for(let p=0;p<f.length;p+=2){const g=d[f[p]],m=f[p+1];try{m.call(g)}finally{}}else try{f.call(d)}finally{}}}}(c,l),function OSe(c,l){const a=c.cleanup,h=l[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const p=a[f+1],g="function"==typeof p?p(l):lo(l[p]),m=h[d=a[f+2]],v=a[f+3];"boolean"==typeof v?g.removeEventListener(a[f],m,v):v>=0?h[d=v]():h[d=-v].unsubscribe(),f+=2}else{const p=h[d=a[f+1]];a[f].call(p)}if(null!==h){for(let f=d+1;f<h.length;f++)(0,h[f])();l[7]=null}}(c,l),1===l[1].type&&l[11].destroy();const a=l[17];if(null!==a&&Uu(l[3])){a!==l[3]&&YQ(a,l);const h=l[19];null!==h&&h.detachView(c)}!function sSe(c){tR.delete(c[20])}(l)}}function JQ(c,l,a){return function ej(c,l,a){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return a[0];if(2&h.flags){const d=c.data[h.directiveStart].encapsulation;if(d===Vu.None||d===Vu.Emulated)return null}return au(h,a)}(c,l.parent,a)}function Cm(c,l,a,h,d){c.insertBefore(l,a,h,d)}function tj(c,l,a){c.appendChild(l,a)}function nj(c,l,a,h,d){null!==h?Cm(c,l,a,h,d):tj(c,l,a)}function WT(c,l){return c.parentNode(l)}function ij(c,l,a){return sj(c,l,a)}let sj=function rj(c,l,a){return 40&c.type?au(c,a):null};function GT(c,l,a,h){const d=JQ(c,h,l),f=l[11],g=ij(h.parent||l[6],h,l);if(null!=d)if(Array.isArray(a))for(let m=0;m<a.length;m++)nj(f,d,a[m],g,!1);else nj(f,d,a,g,!1)}function QT(c,l){if(null!==l){const a=l.type;if(3&a)return au(l,c);if(4&a)return fR(-1,c[l.index]);if(8&a){const h=l.child;if(null!==h)return QT(c,h);{const d=c[l.index];return Uu(d)?fR(-1,d):lo(d)}}if(32&a)return sR(l,c)()||lo(c[l.index]);{const h=aj(c,l);return null!==h?Array.isArray(h)?h[0]:QT(fC(c[16]),h):QT(c,l.next)}}return null}function aj(c,l){return null!==l?c[16][6].projection[l.projection]:null}function fR(c,l){const a=10+c+1;if(a<l.length){const h=l[a],d=h[1].firstChild;if(null!==d)return QT(h,d)}return l[7]}function pR(c,l,a,h,d,f,p){for(;null!=a;){const g=h[a.index],m=a.type;if(p&&0===l&&(g&&xa(lo(g),h),a.flags|=4),64!=(64&a.flags))if(8&m)pR(c,l,a.child,h,d,f,!1),sy(l,c,d,g,f);else if(32&m){const v=sR(a,h);let y;for(;y=v();)sy(l,c,d,y,f);sy(l,c,d,g,f)}else 16&m?cj(c,l,h,a,d,f):sy(l,c,d,g,f);a=p?a.projectionNext:a.next}}function pC(c,l,a,h,d,f){pR(a,h,c.firstChild,l,d,f,!1)}function cj(c,l,a,h,d,f){const p=a[16],m=p[6].projection[h.projection];if(Array.isArray(m))for(let v=0;v<m.length;v++)sy(l,c,d,m[v],f);else pR(c,l,m,p[3],d,f,!0)}function uj(c,l,a){c.setAttribute(l,"style",a)}function gR(c,l,a){""===a?c.removeAttribute(l,"class"):c.setAttribute(l,"class",a)}function hj(c,l,a){let h=c.length;for(;;){const d=c.indexOf(l,a);if(-1===d)return d;if(0===d||c.charCodeAt(d-1)<=32){const f=l.length;if(d+f===h||c.charCodeAt(d+f)<=32)return d}a=d+1}}const dj="ng-template";function PSe(c,l,a){let h=0;for(;h<c.length;){let d=c[h++];if(a&&"class"===d){if(d=c[h],-1!==hj(d.toLowerCase(),l,0))return!0}else if(1===d){for(;h<c.length&&"string"==typeof(d=c[h++]);)if(d.toLowerCase()===l)return!0;return!1}}return!1}function fj(c){return 4===c.type&&c.value!==dj}function RSe(c,l,a){return l===(4!==c.type||a?c.value:dj)}function FSe(c,l,a){let h=4;const d=c.attrs||[],f=function BSe(c){for(let l=0;l<c.length;l++)if(VG(c[l]))return l;return c.length}(d);let p=!1;for(let g=0;g<l.length;g++){const m=l[g];if("number"!=typeof m){if(!p)if(4&h){if(h=2|1&h,""!==m&&!RSe(c,m,a)||""===m&&1===l.length){if($u(h))return!1;p=!0}}else{const v=8&h?m:l[++g];if(8&h&&null!==c.attrs){if(!PSe(c.attrs,v,a)){if($u(h))return!1;p=!0}continue}const _=NSe(8&h?"class":m,d,fj(c),a);if(-1===_){if($u(h))return!1;p=!0;continue}if(""!==v){let b;b=_>f?"":d[_+1].toLowerCase();const C=8&h?b:null;if(C&&-1!==hj(C,v,0)||2&h&&v!==b){if($u(h))return!1;p=!0}}}}else{if(!p&&!$u(h)&&!$u(m))return!1;if(p&&$u(m))continue;p=!1,h=m|1&h}}return $u(h)||p}function $u(c){return 0==(1&c)}function NSe(c,l,a,h){if(null===l)return-1;let d=0;if(h||!a){let f=!1;for(;d<l.length;){const p=l[d];if(p===c)return d;if(3===p||6===p)f=!0;else{if(1===p||2===p){let g=l[++d];for(;"string"==typeof g;)g=l[++d];continue}if(4===p)break;if(0===p){d+=4;continue}}d+=f?1:2}return-1}return function VSe(c,l){let a=c.indexOf(4);if(a>-1)for(a++;a<c.length;){const h=c[a];if("number"==typeof h)return-1;if(h===l)return a;a++}return-1}(l,c)}function pj(c,l,a=!1){for(let h=0;h<l.length;h++)if(FSe(c,l[h],a))return!0;return!1}function zSe(c,l){e:for(let a=0;a<l.length;a++){const h=l[a];if(c.length===h.length){for(let d=0;d<c.length;d++)if(c[d]!==h[d])continue e;return!0}}return!1}function gj(c,l){return c?":not("+l.trim()+")":l}function USe(c){let l=c[0],a=1,h=2,d="",f=!1;for(;a<c.length;){let p=c[a];if("string"==typeof p)if(2&h){const g=c[++a];d+="["+p+(g.length>0?'="'+g+'"':"")+"]"}else 8&h?d+="."+p:4&h&&(d+=" "+p);else""!==d&&!$u(p)&&(l+=gj(f,d),d=""),h=p,f=f||!$u(h);a++}return""!==d&&(l+=gj(f,d)),l}const Si={};function P(c){mj(cr(),Rt(),Ja()+c,!1)}function mj(c,l,a,h){if(!h)if(3==(3&l[2])){const f=c.preOrderCheckHooks;null!==f&&TT(l,f,a)}else{const f=c.preOrderHooks;null!==f&&OT(l,f,0,a)}wp(a)}function bj(c,l=null,a=null,h){const d=Cj(c,l,a,h);return d.resolveInjectorInitializers(),d}function Cj(c,l=null,a=null,h,d=new Set){const f=[a||Cr,Dwe(c)];return h=h||("object"==typeof c?void 0:Gr(c)),new AQ(f,l||$T(),h||null,d)}let Qr=(()=>{class c{static create(a,h){var d;if(Array.isArray(a))return bj({name:""},h,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return bj({name:f},a.parent,a.providers,f)}}}return c.THROW_IF_NOT_FOUND=tC,c.NULL=new OQ,c.\u0275prov=qe({token:c,providedIn:"any",factory:()=>Ae(SQ)}),c.__NG_ELEMENT_ID__=-1,c})();function B(c,l=ni.Default){const a=Rt();return null===a?Ae(c,l):jG(Do(),a,li(c),l)}function qT(){throw new Error("invalid")}function ZT(c,l){return c<<17|l<<2}function Wu(c){return c>>17&32767}function bR(c){return 2|c}function df(c){return(131068&c)>>2}function CR(c,l){return-131069&c|l<<2}function xR(c){return 1|c}function Bj(c,l){const a=c.contentQueries;if(null!==a)for(let h=0;h<a.length;h+=2){const d=a[h],f=a[h+1];if(-1!==f){const p=c.data[f];bP(d),p.contentQueries(2,l[f],f)}}}function KT(c,l,a,h,d,f,p,g,m,v,y){const _=l.blueprint.slice();return _[0]=d,_[2]=76|h,(null!==y||c&&1024&c[2])&&(_[2]|=1024),SG(_),_[3]=_[15]=c,_[8]=a,_[10]=p||c&&c[10],_[11]=g||c&&c[11],_[12]=m||c&&c[12]||null,_[9]=v||c&&c[9]||null,_[6]=f,_[20]=function iSe(){return nSe++}(),_[21]=y,_[16]=2==l.type?c[16]:_,_}function ay(c,l,a,h,d){let f=c.data[l];if(null===f)f=function ER(c,l,a,h,d){const f=DG(),p=mP(),m=c.data[l]=function w2e(c,l,a,h,d,f){return{type:a,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?f:f&&f.parent,a,l,h,d);return null===c.firstChild&&(c.firstChild=m),null!==f&&(p?null==f.child&&null!==m.parent&&(f.child=m):null===f.next&&(f.next=m)),m}(c,l,a,h,d),function oxe(){return _i.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=h,f.attrs=d;const p=function jb(){const c=_i.lFrame,l=c.currentTNode;return c.isParent?l:l.parent}();f.injectorIndex=null===p?-1:p.injectorIndex}return Vh(f,!0),f}function ly(c,l,a,h){if(0===a)return-1;const d=l.length;for(let f=0;f<a;f++)l.push(h),c.blueprint.push(h),c.data.push(null);return d}function AR(c,l,a){CP(l);try{const h=c.viewQuery;null!==h&&VR(1,h,a);const d=c.template;null!==d&&Vj(c,l,d,1,a),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&Bj(c,l),c.staticViewQueries&&VR(2,c.viewQuery,a);const f=c.components;null!==f&&function b2e(c,l){for(let a=0;a<l.length;a++)V2e(c,l[a])}(l,f)}catch(h){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),h}finally{l[2]&=-5,xP()}}function JT(c,l,a,h){const d=l[2];if(128!=(128&d)){CP(l);try{SG(l),function MG(c){return _i.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==a&&Vj(c,l,a,2,h);const p=3==(3&d);if(p){const v=c.preOrderCheckHooks;null!==v&&TT(l,v,null)}else{const v=c.preOrderHooks;null!==v&&OT(l,v,0,null),wP(l,0)}if(function L2e(c){for(let l=oR(c);null!==l;l=aR(l)){if(!l[2])continue;const a=l[9];for(let h=0;h<a.length;h++){const d=a[h],f=d[3];0==(512&d[2])&&gP(f,1),d[2]|=512}}}(l),function N2e(c){for(let l=oR(c);null!==l;l=aR(l))for(let a=10;a<l.length;a++){const h=l[a],d=h[1];wT(h)&&JT(d,h,d.template,h[8])}}(l),null!==c.contentQueries&&Bj(c,l),p){const v=c.contentCheckHooks;null!==v&&TT(l,v)}else{const v=c.contentHooks;null!==v&&OT(l,v,1),wP(l,1)}!function y2e(c,l){const a=c.hostBindingOpCodes;if(null!==a)try{for(let h=0;h<a.length;h++){const d=a[h];if(d<0)wp(~d);else{const f=d,p=a[++h],g=a[++h];axe(p,f),g(2,l[f])}}}finally{wp(-1)}}(c,l);const g=c.components;null!==g&&function _2e(c,l){for(let a=0;a<l.length;a++)B2e(c,l[a])}(l,g);const m=c.viewQuery;if(null!==m&&VR(2,m,h),p){const v=c.viewCheckHooks;null!==v&&TT(l,v)}else{const v=c.viewHooks;null!==v&&OT(l,v,2),wP(l,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,gP(l[3],-1))}finally{xP()}}}function Vj(c,l,a,h,d){const f=Ja(),p=2&h;try{wp(-1),p&&l.length>22&&mj(c,l,22,!1),a(h,d)}finally{wp(f)}}function zj(c,l,a){if(cP(l)){const d=l.directiveEnd;for(let f=l.directiveStart;f<d;f++){const p=c.data[f];p.contentQueries&&p.contentQueries(1,a[f],f)}}}function IR(c,l,a){!OG()||(function k2e(c,l,a,h){const d=a.directiveStart,f=a.directiveEnd;c.firstCreatePass||Xb(a,l),xa(h,l);const p=a.initialInputs;for(let g=d;g<f;g++){const m=c.data[g],v=Hu(m);v&&P2e(l,a,m);const y=Yb(l,c,g,a);xa(y,l),null!==p&&R2e(0,g-d,y,m,0,p),v&&(uc(a.index,l)[8]=y)}}(c,l,a,au(a,l)),128==(128&a.flags)&&function M2e(c,l,a){const h=a.directiveStart,d=a.directiveEnd,f=a.index,p=function lxe(){return _i.lFrame.currentDirectiveIndex}();try{wp(f);for(let g=h;g<d;g++){const m=c.data[g],v=l[g];yP(g),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&jj(m,v)}}finally{wp(-1),yP(p)}}(c,l,a))}function PR(c,l,a=au){const h=l.localNames;if(null!==h){let d=l.index+1;for(let f=0;f<h.length;f+=2){const p=h[f+1],g=-1===p?a(l,c):c[p];c[d++]=g}}}function Uj(c){const l=c.tView;return null===l||l.incompleteFirstPass?c.tView=RR(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):l}function RR(c,l,a,h,d,f,p,g,m,v){const y=22+h,_=y+d,b=function C2e(c,l){const a=[];for(let h=0;h<l;h++)a.push(h<c?null:Si);return a}(y,_),C="function"==typeof v?v():v;return b[1]={type:c,blueprint:b,template:a,queries:null,viewQuery:g,declTNode:l,data:b.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:m,consts:C,incompleteFirstPass:!1}}function Hj(c,l,a,h){const d=Kj(l);null===a?d.push(h):(d.push(a),c.firstCreatePass&&Jj(c).push(h,d.length-1))}function $j(c,l,a){for(let h in c)if(c.hasOwnProperty(h)){const d=c[h];(a=null===a?{}:a).hasOwnProperty(h)?a[h].push(l,d):a[h]=[l,d]}return a}function Wj(c,l){const h=l.directiveEnd,d=c.data,f=l.attrs,p=[];let g=null,m=null;for(let v=l.directiveStart;v<h;v++){const y=d[v],_=y.inputs,b=null===f||fj(l)?null:F2e(_,f);p.push(b),g=$j(_,v,g),m=$j(y.outputs,v,m)}null!==g&&(g.hasOwnProperty("class")&&(l.flags|=16),g.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=p,l.inputs=g,l.outputs=m}function fc(c,l,a,h,d,f,p,g){const m=au(l,a);let y,v=l.inputs;!g&&null!=v&&(y=v[h])?(zR(c,a,y,h,d),bT(l)&&Gj(a,l.index)):3&l.type&&(h=function S2e(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(h),d=null!=p?p(d,l.value||"",h):d,f.setProperty(m,h,d))}function Gj(c,l){const a=uc(l,c);16&a[2]||(a[2]|=32)}function FR(c,l,a,h){let d=!1;if(OG()){const f=function E2e(c,l,a){const h=c.directiveRegistry;let d=null;if(h)for(let f=0;f<h.length;f++){const p=h[f];pj(a,p.selectors,!1)&&(d||(d=[]),AT(Xb(a,l),c,p.type),Hu(p)?(qj(c,a),d.unshift(p)):d.push(p))}return d}(c,l,a),p=null===h?null:{"":-1};if(null!==f){d=!0,Zj(a,c.data.length,f.length);for(let y=0;y<f.length;y++){const _=f[y];_.providersResolver&&_.providersResolver(_)}let g=!1,m=!1,v=ly(c,l,f.length,null);for(let y=0;y<f.length;y++){const _=f[y];a.mergedAttrs=kT(a.mergedAttrs,_.hostAttrs),Xj(c,a,l,v,_),I2e(v,_,p),null!==_.contentQueries&&(a.flags|=8),(null!==_.hostBindings||null!==_.hostAttrs||0!==_.hostVars)&&(a.flags|=128);const b=_.type.prototype;!g&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a.index),g=!0),!m&&(b.ngOnChanges||b.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a.index),m=!0),v++}Wj(c,a)}p&&function A2e(c,l,a){if(l){const h=c.localNames=[];for(let d=0;d<l.length;d+=2){const f=a[l[d+1]];if(null==f)throw new Et(-301,!1);h.push(l[d],f)}}}(a,h,p)}return a.mergedAttrs=kT(a.mergedAttrs,a.attrs),d}function Qj(c,l,a,h,d,f){const p=f.hostBindings;if(p){let g=c.hostBindingOpCodes;null===g&&(g=c.hostBindingOpCodes=[]);const m=~l.index;(function D2e(c){let l=c.length;for(;l>0;){const a=c[--l];if("number"==typeof a&&a<0)return a}return 0})(g)!=m&&g.push(m),g.push(h,d,p)}}function jj(c,l){null!==c.hostBindings&&c.hostBindings(1,l)}function qj(c,l){l.flags|=2,(c.components||(c.components=[])).push(l.index)}function I2e(c,l,a){if(a){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)a[l.exportAs[h]]=c;Hu(l)&&(a[""]=c)}}function Zj(c,l,a){c.flags|=1,c.directiveStart=l,c.directiveEnd=l+a,c.providerIndexes=l}function Xj(c,l,a,h,d){c.data[h]=d;const f=d.factory||(d.factory=_m(d.type)),p=new qb(f,Hu(d),B);c.blueprint[h]=p,a[h]=p,Qj(c,l,0,h,ly(c,a,d.hostVars,Si),d)}function P2e(c,l,a){const h=au(l,c),d=Uj(a),f=c[10],p=eO(c,KT(c,d,null,a.onPush?32:16,h,l,f,f.createRenderer(h,a),null,null,null));c[l.index]=p}function Uh(c,l,a,h,d,f){const p=au(c,l);!function NR(c,l,a,h,d,f,p){if(null==f)c.removeAttribute(l,d,a);else{const g=null==p?wi(f):p(f,h||"",d);c.setAttribute(l,d,g,a)}}(l[11],p,f,c.value,a,h,d)}function R2e(c,l,a,h,d,f){const p=f[l];if(null!==p){const g=h.setInput;for(let m=0;m<p.length;){const v=p[m++],y=p[m++],_=p[m++];null!==g?h.setInput(a,_,v,y):a[y]=_}}}function F2e(c,l){let a=null,h=0;for(;h<l.length;){const d=l[h];if(0!==d)if(5!==d){if("number"==typeof d)break;c.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,c[d],l[h+1])),h+=2}else h+=2;else h+=4}return a}function Yj(c,l,a,h){return new Array(c,!0,!1,l,null,0,h,a,null,null)}function B2e(c,l){const a=uc(l,c);if(wT(a)){const h=a[1];48&a[2]?JT(h,a,h.template,a[8]):a[5]>0&&LR(a)}}function LR(c){for(let h=oR(c);null!==h;h=aR(h))for(let d=10;d<h.length;d++){const f=h[d];if(wT(f))if(512&f[2]){const p=f[1];JT(p,f,p.template,f[8])}else f[5]>0&&LR(f)}const a=c[1].components;if(null!==a)for(let h=0;h<a.length;h++){const d=uc(a[h],c);wT(d)&&d[5]>0&&LR(d)}}function V2e(c,l){const a=uc(l,c),h=a[1];(function z2e(c,l){for(let a=l.length;a<c.blueprint.length;a++)l.push(c.blueprint[a])})(h,a),AR(h,a,a[8])}function eO(c,l){return c[13]?c[14][4]=l:c[13]=l,c[14]=l,l}function BR(c){for(;c;){c[2]|=32;const l=fC(c);if(zCe(c)&&!l)return c;c=l}return null}function tO(c,l,a,h=!0){const d=l[10];d.begin&&d.begin();try{JT(c,l,c.template,a)}catch(p){throw h&&tq(l,p),p}finally{d.end&&d.end()}}function VR(c,l,a){bP(0),l(c,a)}function Kj(c){return c[7]||(c[7]=[])}function Jj(c){return c.cleanup||(c.cleanup=[])}function tq(c,l){const a=c[9],h=a?a.get(ny,null):null;h&&h.handleError(l)}function zR(c,l,a,h,d){for(let f=0;f<a.length;){const p=a[f++],g=a[f++],m=l[p],v=c.data[p];null!==v.setInput?v.setInput(m,d,h,g):m[g]=d}}function ff(c,l,a){const h=xT(l,c);!function XQ(c,l,a){c.setValue(l,a)}(c[11],h,a)}function nO(c,l,a){let h=a?c.styles:null,d=a?c.classes:null,f=0;if(null!==l)for(let p=0;p<l.length;p++){const g=l[p];"number"==typeof g?f=g:1==f?d=eP(d,g):2==f&&(h=eP(h,g+": "+l[++p]+";"))}a?c.styles=h:c.stylesWithoutHost=h,a?c.classes=d:c.classesWithoutHost=d}function iO(c,l,a,h,d=!1){for(;null!==a;){const f=l[a.index];if(null!==f&&h.push(lo(f)),Uu(f))for(let g=10;g<f.length;g++){const m=f[g],v=m[1].firstChild;null!==v&&iO(m[1],m,v,h)}const p=a.type;if(8&p)iO(c,l,a.child,h);else if(32&p){const g=sR(a,l);let m;for(;m=g();)h.push(m)}else if(16&p){const g=aj(l,a);if(Array.isArray(g))h.push(...g);else{const m=fC(l[16]);iO(m[1],m,g,h,!0)}}a=d?a.projectionNext:a.next}return h}class gC{constructor(l,a){this._lView=l,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,a=l[1];return iO(a,l,a.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Uu(l)){const a=l[8],h=a?a.indexOf(this):-1;h>-1&&(uR(l,h),RT(a,h))}this._attachedToViewContainer=!1}KQ(this._lView[1],this._lView)}onDestroy(l){Hj(this._lView[1],this._lView,null,l)}markForCheck(){BR(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){tO(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Et(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xSe(c,l){pC(c,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Et(902,!1);this._appRef=l}}class U2e extends gC{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;tO(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class UR extends Mp{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const a=Rr(l);return new mC(a,this.ngModule)}}function nq(c){const l=[];for(let a in c)c.hasOwnProperty(a)&&l.push({propName:c[a],templateName:a});return l}class $2e{constructor(l,a){this.injector=l,this.parentInjector=a}get(l,a,h){const d=this.injector.get(l,ZP,h);return d!==ZP||a===ZP?d:this.parentInjector.get(l,a,h)}}class mC extends PQ{constructor(l,a){super(),this.componentDef=l,this.ngModule=a,this.componentType=l.type,this.selector=function HSe(c){return c.map(USe).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return nq(this.componentDef.inputs)}get outputs(){return nq(this.componentDef.outputs)}create(l,a,h,d){let f=(d=d||this.ngModule)instanceof kp?d:null==d?void 0:d.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const p=f?new $2e(l,f):l,g=p.get(ty,null);if(null===g)throw new Et(407,!1);const m=p.get($we,null),v=g.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",_=h?function x2e(c,l,a){return c.selectRootElement(l,a===Vu.ShadowDom)}(v,h,this.componentDef.encapsulation):cR(g.createRenderer(null,this.componentDef),y,function H2e(c){const l=c.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(y)),b=this.componentDef.onPush?288:272,C=RR(0,null,null,1,0,null,null,null,null,null),x=KT(null,C,null,b,null,null,g,v,m,p,null);let S,w;CP(x);try{const T=function Q2e(c,l,a,h,d,f){const p=a[1];a[22]=c;const m=ay(p,22,2,"#host",null),v=m.mergedAttrs=l.hostAttrs;null!==v&&(nO(m,v,!0),null!==c&&(DT(d,c,v),null!==m.classes&&gR(d,c,m.classes),null!==m.styles&&uj(d,c,m.styles)));const y=h.createRenderer(c,l),_=KT(a,Uj(l),null,l.onPush?32:16,a[22],m,h,y,f||null,null,null);return p.firstCreatePass&&(AT(Xb(m,a),p,l.type),qj(p,m),Zj(m,a.length,1)),eO(a,_),a[22]=_}(_,this.componentDef,x,g,v);if(_)if(h)DT(v,_,["ng-version",Wwe.full]);else{const{attrs:O,classes:k}=function $Se(c){const l=[],a=[];let h=1,d=2;for(;h<c.length;){let f=c[h];if("string"==typeof f)2===d?""!==f&&l.push(f,c[++h]):8===d&&a.push(f);else{if(!$u(d))break;d=f}h++}return{attrs:l,classes:a}}(this.componentDef.selectors[0]);O&&DT(v,_,O),k&&k.length>0&&gR(v,_,k.join(" "))}if(w=pP(C,22),void 0!==a){const O=w.projection=[];for(let k=0;k<this.ngContentSelectors.length;k++){const D=a[k];O.push(null!=D?Array.from(D):null)}}S=function j2e(c,l,a,h){const d=a[1],f=function O2e(c,l,a){const h=Do();c.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Xj(c,h,l,ly(c,l,1,null),a),Wj(c,h));const d=Yb(l,c,h.directiveStart,h);xa(d,l);const f=au(h,l);return f&&xa(f,l),d}(d,a,l);if(c[8]=a[8]=f,null!==h)for(const g of h)g(f,l);if(l.contentQueries){const g=Do();l.contentQueries(1,f,g.directiveStart)}const p=Do();return!d.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(wp(p.index),Qj(a[1],p,0,p.directiveStart,p.directiveEnd,l),jj(l,f)),f}(T,this.componentDef,x,[q2e]),AR(C,x,null)}finally{xP()}return new G2e(this.componentType,S,ey(w,x),x,w)}}class G2e extends class Lwe{}{constructor(l,a,h,d,f){super(),this.location=h,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new U2e(d),this.componentType=l}setInput(l,a){const h=this._tNode.inputs;let d;if(null!==h&&(d=h[l])){const f=this._rootLView;zR(f[1],f,d,l,a),Gj(f,this._tNode.index)}}get injector(){return new $v(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function q2e(){const c=Do();ST(Rt()[1],c)}function gn(c){let l=function iq(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),a=!0;const h=[c];for(;l;){let d;if(Hu(c))d=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Et(903,!1);d=l.\u0275dir}if(d){if(a){h.push(d);const p=c;p.inputs=HR(c.inputs),p.declaredInputs=HR(c.declaredInputs),p.outputs=HR(c.outputs);const g=d.hostBindings;g&&K2e(c,g);const m=d.viewQuery,v=d.contentQueries;if(m&&X2e(c,m),v&&Y2e(c,v),J4(c.inputs,d.inputs),J4(c.declaredInputs,d.declaredInputs),J4(c.outputs,d.outputs),Hu(d)&&d.data.animation){const y=c.data;y.animation=(y.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let p=0;p<f.length;p++){const g=f[p];g&&g.ngInherit&&g(c),g===gn&&(a=!1)}}l=Object.getPrototypeOf(l)}!function Z2e(c){let l=0,a=null;for(let h=c.length-1;h>=0;h--){const d=c[h];d.hostVars=l+=d.hostVars,d.hostAttrs=kT(d.hostAttrs,a=kT(a,d.hostAttrs))}}(h)}function HR(c){return c===Rv?{}:c===Cr?[]:c}function X2e(c,l){const a=c.viewQuery;c.viewQuery=a?(h,d)=>{l(h,d),a(h,d)}:l}function Y2e(c,l){const a=c.contentQueries;c.contentQueries=a?(h,d,f)=>{l(h,d,f),a(h,d,f)}:l}function K2e(c,l){const a=c.hostBindings;c.hostBindings=a?(h,d)=>{l(h,d),a(h,d)}:l}let rO=null;function xm(){if(!rO){const c=Xr.Symbol;if(c&&c.iterator)rO=c.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<l.length;++a){const h=l[a];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(rO=h)}}}return rO}function vC(c){return!!$R(c)&&(Array.isArray(c)||!(c instanceof Map)&&xm()in c)}function $R(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function Hh(c,l,a){return c[l]=a}function yC(c,l){return c[l]}function wa(c,l,a){return!Object.is(c[l],a)&&(c[l]=a,!0)}function wm(c,l,a,h){const d=wa(c,l,a);return wa(c,l+1,h)||d}function sO(c,l,a,h,d){const f=wm(c,l,a,h);return wa(c,l+2,d)||f}function cu(c,l,a,h,d,f){const p=wm(c,l,a,h);return wm(c,l+2,d,f)||p}function et(c,l,a,h){const d=Rt();return wa(d,zv(),l)&&(cr(),Uh(zs(),d,c,l,a,h)),et}function uy(c,l,a,h){return wa(c,zv(),a)?l+wi(a)+h:Si}function X(c,l,a,h,d,f,p,g){const m=Rt(),v=cr(),y=c+22,_=v.firstCreatePass?function oTe(c,l,a,h,d,f,p,g,m){const v=l.consts,y=ay(l,c,4,p||null,xp(v,g));FR(l,a,y,xp(v,m)),ST(l,y);const _=y.tViews=RR(2,y,h,d,f,l.directiveRegistry,l.pipeRegistry,null,l.schemas,v);return null!==l.queries&&(l.queries.template(l,y),_.queries=l.queries.embeddedTView(y)),y}(y,v,m,l,a,h,d,f,p):v.data[y];Vh(_,!1);const b=m[11].createComment("");GT(v,m,b,_),xa(b,m),eO(m,m[y]=Yj(b,m,b,_)),CT(_)&&IR(v,m,_),null!=p&&PR(m,_,g)}function Go(c){return Vv(function sxe(){return _i.lFrame.contextLView}(),22+c)}function R(c,l,a){const h=Rt();return wa(h,zv(),l)&&fc(cr(),zs(),h,c,l,h[11],a,!1),R}function WR(c,l,a,h,d){const p=d?"class":"style";zR(c,a,l.inputs[p],p,h)}function I(c,l,a,h){const d=Rt(),f=cr(),p=22+c,g=d[11],m=d[p]=cR(g,l,function pxe(){return _i.lFrame.currentNamespace}()),v=f.firstCreatePass?function lTe(c,l,a,h,d,f,p){const g=l.consts,v=ay(l,c,2,d,xp(g,f));return FR(l,a,v,xp(g,p)),null!==v.attrs&&nO(v,v.attrs,!1),null!==v.mergedAttrs&&nO(v,v.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,v),v}(p,f,d,0,l,a,h):f.data[p];Vh(v,!0);const y=v.mergedAttrs;null!==y&&DT(g,m,y);const _=v.classes;null!==_&&gR(g,m,_);const b=v.styles;return null!==b&&uj(g,m,b),64!=(64&v.flags)&&GT(f,d,m,v),0===function exe(){return _i.lFrame.elementDepthCount}()&&xa(m,d),function txe(){_i.lFrame.elementDepthCount++}(),CT(v)&&(IR(f,d,v),zj(f,v,d)),null!==h&&PR(d,v),I}function F(){let c=Do();mP()?vP():(c=c.parent,Vh(c,!1));const l=c;!function nxe(){_i.lFrame.elementDepthCount--}();const a=cr();return a.firstCreatePass&&(ST(a,c),cP(c)&&a.queries.elementEnd(c)),null!=l.classesWithoutHost&&function _xe(c){return 0!=(16&c.flags)}(l)&&WR(a,l,Rt(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function bxe(c){return 0!=(32&c.flags)}(l)&&WR(a,l,Rt(),l.stylesWithoutHost,!1),F}function ue(c,l,a,h){return I(c,l,a,h),F(),ue}function Tr(c,l,a){const h=Rt(),d=cr(),f=c+22,p=d.firstCreatePass?function cTe(c,l,a,h,d){const f=l.consts,p=xp(f,h),g=ay(l,c,8,"ng-container",p);return null!==p&&nO(g,p,!0),FR(l,a,g,xp(f,d)),null!==l.queries&&l.queries.elementStart(l,g),g}(f,d,h,l,a):d.data[f];Vh(p,!0);const g=h[f]=h[11].createComment("");return GT(d,h,g,p),xa(g,h),CT(p)&&(IR(d,h,p),zj(d,p,h)),null!=a&&PR(h,p),Tr}function Or(){let c=Do();const l=cr();return mP()?vP():(c=c.parent,Vh(c,!1)),l.firstCreatePass&&(ST(l,c),cP(c)&&l.queries.elementEnd(c)),Or}function Sa(c,l,a){return Tr(c,l,a),Or(),Sa}function at(){return Rt()}function _C(c){return!!c&&"function"==typeof c.then}function fq(c){return!!c&&"function"==typeof c.subscribe}const GR=fq;function ee(c,l,a,h){const d=Rt(),f=cr(),p=Do();return function pq(c,l,a,h,d,f,p,g){const m=CT(h),y=c.firstCreatePass&&Jj(c),_=l[8],b=Kj(l);let C=!0;if(3&h.type||g){const w=au(h,l),T=g?g(w):w,O=b.length,k=g?M=>g(lo(M[h.index])):h.index;let D=null;if(!g&&m&&(D=function uTe(c,l,a,h){const d=c.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const p=d[f];if(p===a&&d[f+1]===h){const g=l[7],m=d[f+2];return g.length>m?g[m]:null}"string"==typeof p&&(f+=2)}return null}(c,l,d,h.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=f,D.__ngLastListenerFn__=f,C=!1;else{f=mq(h,l,_,f,!1);const M=a.listen(T,d,f);b.push(f,M),y&&y.push(d,k,O,O+1)}}else f=mq(h,l,_,f,!1);const x=h.outputs;let S;if(C&&null!==x&&(S=x[d])){const w=S.length;if(w)for(let T=0;T<w;T+=2){const A=l[S[T]][S[T+1]].subscribe(f),L=b.length;b.push(f,A),y&&y.push(d,h.index,L,-(L+1))}}}(f,d,d[11],p,c,l,0,h),ee}function gq(c,l,a,h){try{return!1!==a(h)}catch(d){return tq(c,d),!1}}function mq(c,l,a,h,d){return function f(p){if(p===Function)return h;BR(2&c.flags?uc(c.index,l):l);let m=gq(l,0,h,p),v=f.__ngNextListenerFn__;for(;v;)m=gq(l,0,v,p)&&m,v=v.__ngNextListenerFn__;return d&&!1===m&&(p.preventDefault(),p.returnValue=!1),m}}function q(c=1){return function uxe(c){return(_i.lFrame.contextLView=function hxe(c,l){for(;c>0;)l=l[15],c--;return l}(c,_i.lFrame.contextLView))[8]}(c)}function hTe(c,l){let a=null;const h=function LSe(c){const l=c.attrs;if(null!=l){const a=l.indexOf(5);if(0==(1&a))return l[a+1]}return null}(c);for(let d=0;d<l.length;d++){const f=l[d];if("*"!==f){if(null===h?pj(c,f,!0):zSe(h,f))return d}else a=d}return a}function tn(c){const l=Rt()[16][6];if(!l.projection){const h=l.projection=eC(c?c.length:1,null),d=h.slice();let f=l.child;for(;null!==f;){const p=c?hTe(f,c):0;null!==p&&(d[p]?d[p].projectionNext=f:h[p]=f,d[p]=f),f=f.next}}}function pt(c,l=0,a){const h=Rt(),d=cr(),f=ay(d,22+c,16,null,a||null);null===f.projection&&(f.projection=l),vP(),64!=(64&f.flags)&&function ESe(c,l,a){cj(l[11],0,l,a,JQ(c,a,l),ij(a.parent||l[6],a,l))}(d,h,f)}function bC(c,l,a){return yy(c,"",l,"",a),bC}function yy(c,l,a,h,d){const f=Rt(),p=uy(f,l,a,h);return p!==Si&&fc(cr(),zs(),f,c,p,f[11],d,!1),yy}function Tq(c,l,a,h,d){const f=c[a+1],p=null===l;let g=h?Wu(f):df(f),m=!1;for(;0!==g&&(!1===m||p);){const y=c[g+1];pTe(c[g],l)&&(m=!0,c[g+1]=h?xR(y):bR(y)),g=h?Wu(y):df(y)}m&&(c[a+1]=h?bR(f):xR(f))}function pTe(c,l){return null===c||null==l||(Array.isArray(c)?c[1]:c)===l||!(!Array.isArray(c)||"string"!=typeof l)&&Zv(c,l)>=0}const Mo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Oq(c){return c.substring(Mo.key,Mo.keyEnd)}function Dq(c,l){const a=Mo.textEnd;return a===l?-1:(l=Mo.keyEnd=function yTe(c,l,a){for(;l<a&&c.charCodeAt(l)>32;)l++;return l}(c,Mo.key=l,a),_y(c,l,a))}function _y(c,l,a){for(;l<a&&c.charCodeAt(l)<=32;)l++;return l}function Ft(c,l){return function Gu(c,l,a,h){const d=Rt(),f=cr(),p=lf(2);f.firstUpdatePass&&Pq(f,c,p,h),l!==Si&&wa(d,p,l)&&Fq(f,f.data[Ja()],d,d[11],c,d[p+1]=function kTe(c,l){return null==c||("string"==typeof l?c+=l:"object"==typeof c&&(c=Gr(Dp(c)))),c}(l,a),h,p)}(c,l,null,!0),Ft}function jR(c){!function Qu(c,l,a,h){const d=cr(),f=lf(2);d.firstUpdatePass&&Pq(d,null,f,h);const p=Rt();if(a!==Si&&wa(p,f,a)){const g=d.data[Ja()];if(Lq(g,h)&&!Iq(d,f)){let m=h?g.classesWithoutHost:g.stylesWithoutHost;null!==m&&(a=eP(m,a||"")),WR(d,g,p,a,h)}else!function DTe(c,l,a,h,d,f,p,g){d===Si&&(d=Cr);let m=0,v=0,y=0<d.length?d[0]:null,_=0<f.length?f[0]:null;for(;null!==y||null!==_;){const b=m<d.length?d[m+1]:void 0,C=v<f.length?f[v+1]:void 0;let S,x=null;y===_?(m+=2,v+=2,b!==C&&(x=_,S=C)):null===_||null!==y&&y<_?(m+=2,x=y):(v+=2,x=_,S=C),null!==x&&Fq(c,l,a,h,x,S,p,g),y=m<d.length?d[m]:null,_=v<f.length?f[v]:null}}(d,g,p,p[11],p[f+1],p[f+1]=function OTe(c,l,a){if(null==a||""===a)return Cr;const h=[],d=Dp(a);if(Array.isArray(d))for(let f=0;f<d.length;f++)c(h,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&c(h,f,d[f]);else"string"==typeof d&&l(h,d);return h}(c,l,a),h,f)}}(dc,Wh,c,!0)}function Wh(c,l){for(let a=function mTe(c){return function Mq(c){Mo.key=0,Mo.keyEnd=0,Mo.value=0,Mo.valueEnd=0,Mo.textEnd=c.length}(c),Dq(c,_y(c,0,Mo.textEnd))}(l);a>=0;a=Dq(l,a))dc(c,Oq(l),!0)}function Iq(c,l){return l>=c.expandoStartIndex}function Pq(c,l,a,h){const d=c.data;if(null===d[a+1]){const f=d[Ja()],p=Iq(c,a);Lq(f,h)&&null===l&&!p&&(l=!1),l=function xTe(c,l,a,h){const d=function _P(c){const l=_i.lFrame.currentDirectiveIndex;return-1===l?null:c[l]}(c);let f=h?l.residualClasses:l.residualStyles;if(null===d)0===(h?l.classBindings:l.styleBindings)&&(a=CC(a=qR(null,c,l,a,h),l.attrs,h),f=null);else{const p=l.directiveStylingLast;if(-1===p||c[p]!==d)if(a=qR(d,c,l,a,h),null===f){let m=function wTe(c,l,a){const h=a?l.classBindings:l.styleBindings;if(0!==df(h))return c[Wu(h)]}(c,l,h);void 0!==m&&Array.isArray(m)&&(m=qR(null,c,l,m[1],h),m=CC(m,l.attrs,h),function STe(c,l,a,h){c[Wu(a?l.classBindings:l.styleBindings)]=h}(c,l,h,m))}else f=function TTe(c,l,a){let h;const d=l.directiveEnd;for(let f=1+l.directiveStylingLast;f<d;f++)h=CC(h,c[f].hostAttrs,a);return CC(h,l.attrs,a)}(c,l,h)}return void 0!==f&&(h?l.residualClasses=f:l.residualStyles=f),a}(d,f,l,h),function dTe(c,l,a,h,d,f){let p=f?l.classBindings:l.styleBindings,g=Wu(p),m=df(p);c[h]=a;let y,v=!1;if(Array.isArray(a)){const _=a;y=_[1],(null===y||Zv(_,y)>0)&&(v=!0)}else y=a;if(d)if(0!==m){const b=Wu(c[g+1]);c[h+1]=ZT(b,g),0!==b&&(c[b+1]=CR(c[b+1],h)),c[g+1]=function l2e(c,l){return 131071&c|l<<17}(c[g+1],h)}else c[h+1]=ZT(g,0),0!==g&&(c[g+1]=CR(c[g+1],h)),g=h;else c[h+1]=ZT(m,0),0===g?g=h:c[m+1]=CR(c[m+1],h),m=h;v&&(c[h+1]=bR(c[h+1])),Tq(c,y,h,!0),Tq(c,y,h,!1),function fTe(c,l,a,h,d){const f=d?c.residualClasses:c.residualStyles;null!=f&&"string"==typeof l&&Zv(f,l)>=0&&(a[h+1]=xR(a[h+1]))}(l,y,c,h,f),p=ZT(g,m),f?l.classBindings=p:l.styleBindings=p}(d,f,l,a,p,h)}}function qR(c,l,a,h,d){let f=null;const p=a.directiveEnd;let g=a.directiveStylingLast;for(-1===g?g=a.directiveStart:g++;g<p&&(f=l[g],h=CC(h,f.hostAttrs,d),f!==c);)g++;return null!==c&&(a.directiveStylingLast=g),h}function CC(c,l,a){const h=a?1:2;let d=-1;if(null!==l)for(let f=0;f<l.length;f++){const p=l[f];"number"==typeof p?d=p:d===h&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),dc(c,p,!!a||l[++f]))}return void 0===c?null:c}function Fq(c,l,a,h,d,f,p,g){if(!(3&l.type))return;const m=c.data,v=m[g+1];aO(function Ej(c){return 1==(1&c)}(v)?Nq(m,l,a,d,df(v),p):void 0)||(aO(f)||function Mj(c){return 2==(2&c)}(v)&&(f=Nq(m,null,a,d,g,p)),function ISe(c,l,a,h,d){if(l)d?c.addClass(a,h):c.removeClass(a,h);else{let f=-1===h.indexOf("-")?void 0:Nl.DashCase;null==d?c.removeStyle(a,h,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Nl.Important),c.setStyle(a,h,d,f))}}(h,p,xT(Ja(),a),d,f))}function Nq(c,l,a,h,d,f){const p=null===l;let g;for(;d>0;){const m=c[d],v=Array.isArray(m),y=v?m[1]:m,_=null===y;let b=a[d+1];b===Si&&(b=_?Cr:void 0);let C=_?EP(b,h):y===h?b:void 0;if(v&&!aO(C)&&(C=EP(m,h)),aO(C)&&(g=C,p))return g;const x=c[d+1];d=p?Wu(x):df(x)}if(null!==l){let m=f?l.residualClasses:l.residualStyles;null!=m&&(g=EP(m,h))}return g}function aO(c){return void 0!==c}function Lq(c,l){return 0!=(c.flags&(l?16:32))}function ie(c,l=""){const a=Rt(),h=cr(),d=c+22,f=h.firstCreatePass?ay(h,d,1,l,null):h.data[d],p=a[d]=function lR(c,l){return c.createText(l)}(a[11],l);GT(h,a,p,f),Vh(f,!1)}function Ut(c){return Ti("",c,""),Ut}function Ti(c,l,a){const h=Rt(),d=uy(h,c,l,a);return d!==Si&&ff(h,Ja(),d),Ti}function xC(c,l,a,h,d){const f=Rt(),p=function hy(c,l,a,h,d,f){const g=wm(c,af(),a,d);return lf(2),g?l+wi(a)+h+wi(d)+f:Si}(f,c,l,a,h,d);return p!==Si&&ff(f,Ja(),p),xC}function wC(c,l,a,h,d,f,p){const g=Rt(),m=function dy(c,l,a,h,d,f,p,g){const v=sO(c,af(),a,d,p);return lf(3),v?l+wi(a)+h+wi(d)+f+wi(p)+g:Si}(g,c,l,a,h,d,f,p);return m!==Si&&ff(g,Ja(),m),wC}function Gh(c,l,a){const h=Rt();return wa(h,zv(),l)&&fc(cr(),zs(),h,c,l,h[11],a,!0),Gh}let by={};var mn=(()=>((mn=mn||{})[mn.LocaleId=0]="LocaleId",mn[mn.DayPeriodsFormat=1]="DayPeriodsFormat",mn[mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",mn[mn.DaysFormat=3]="DaysFormat",mn[mn.DaysStandalone=4]="DaysStandalone",mn[mn.MonthsFormat=5]="MonthsFormat",mn[mn.MonthsStandalone=6]="MonthsStandalone",mn[mn.Eras=7]="Eras",mn[mn.FirstDayOfWeek=8]="FirstDayOfWeek",mn[mn.WeekendRange=9]="WeekendRange",mn[mn.DateFormat=10]="DateFormat",mn[mn.TimeFormat=11]="TimeFormat",mn[mn.DateTimeFormat=12]="DateTimeFormat",mn[mn.NumberSymbols=13]="NumberSymbols",mn[mn.NumberFormats=14]="NumberFormats",mn[mn.CurrencyCode=15]="CurrencyCode",mn[mn.CurrencySymbol=16]="CurrencySymbol",mn[mn.CurrencyName=17]="CurrencyName",mn[mn.Currencies=18]="Currencies",mn[mn.Directionality=19]="Directionality",mn[mn.PluralCase=20]="PluralCase",mn[mn.ExtraData=21]="ExtraData",mn))();const Cy="en-US";let tZ=Cy;function YR(c,l,a,h,d){if(c=li(c),Array.isArray(c))for(let f=0;f<c.length;f++)YR(c[f],l,a,h,d);else{const f=cr(),p=Rt();let g=bm(c)?c:li(c.provide),m=IQ(c);const v=Do(),y=1048575&v.providerIndexes,_=v.directiveStart,b=v.providerIndexes>>20;if(bm(c)||!c.multi){const C=new qb(m,d,B),x=JR(g,l,d?y:y+b,_);-1===x?(AT(Xb(v,p),f,g),KR(f,c,l.length),l.push(g),v.directiveStart++,v.directiveEnd++,d&&(v.providerIndexes+=1048576),a.push(C),p.push(C)):(a[x]=C,p[x]=C)}else{const C=JR(g,l,y+b,_),x=JR(g,l,y,y+b),S=C>=0&&a[C],w=x>=0&&a[x];if(d&&!w||!d&&!S){AT(Xb(v,p),f,g);const T=function jOe(c,l,a,h,d){const f=new qb(c,a,B);return f.multi=[],f.index=l,f.componentProviders=0,OZ(f,d,h&&!a),f}(d?QOe:GOe,a.length,d,h,m);!d&&w&&(a[x].providerFactory=T),KR(f,c,l.length,0),l.push(g),v.directiveStart++,v.directiveEnd++,d&&(v.providerIndexes+=1048576),a.push(T),p.push(T)}else KR(f,c,C>-1?C:x,OZ(a[d?x:C],m,!d&&h));!d&&h&&w&&a[x].componentProviders++}}}function KR(c,l,a,h){const d=bm(l),f=function Mwe(c){return!!c.useClass}(l);if(d||f){const m=(f?li(l.useClass):l).prototype.ngOnDestroy;if(m){const v=c.destroyHooks||(c.destroyHooks=[]);if(!d&&l.multi){const y=v.indexOf(a);-1===y?v.push(a,[h,m]):v[y+1].push(h,m)}else v.push(a,m)}}}function OZ(c,l,a){return a&&c.componentProviders++,c.multi.push(l)-1}function JR(c,l,a,h){for(let d=a;d<h;d++)if(l[d]===c)return d;return-1}function GOe(c,l,a,h){return eF(this.multi,[])}function QOe(c,l,a,h){const d=this.multi;let f;if(this.providerFactory){const p=this.providerFactory.componentProviders,g=Yb(a,a[1],this.providerFactory.index,h);f=g.slice(0,p),eF(d,f);for(let m=p;m<g.length;m++)f.push(g[m])}else f=[],eF(d,f);return f}function eF(c,l){for(let a=0;a<c.length;a++)l.push((0,c[a])());return l}function vn(c,l=[]){return a=>{a.providersResolver=(h,d)=>function WOe(c,l,a){const h=cr();if(h.firstCreatePass){const d=Hu(c);YR(a,h.data,h.blueprint,d,!0),YR(l,h.data,h.blueprint,d,!1)}}(h,d?d(c):c,l)}}class Tm{}class DZ{}class kZ extends Tm{constructor(l,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UR(this);const h=lc(l);this._bootstrapComponents=hf(h.bootstrap),this._r3Injector=Cj(l,a,[{provide:Tm,useValue:this},{provide:Mp,useValue:this.componentFactoryResolver}],Gr(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class tF extends DZ{constructor(l){super(),this.moduleType=l}create(l){return new kZ(this.moduleType,l)}}class ZOe extends Tm{constructor(l,a,h){super(),this.componentFactoryResolver=new UR(this),this.instance=null;const d=new AQ([...l,{provide:Tm,useValue:this},{provide:Mp,useValue:this.componentFactoryResolver}],a||$T(),h,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function fO(c,l,a=null){return new ZOe(c,l,a).injector}let XOe=(()=>{class c{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const h=DQ(0,a.type),d=h.length>0?fO([h],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return c.\u0275prov=qe({token:c,providedIn:"environment",factory:()=>new c(Ae(kp))}),c})();function MZ(c){c.getStandaloneInjector=l=>l.get(XOe).getOrCreateStandaloneInjector(c)}function Ll(c,l,a){const h=Ka()+c,d=Rt();return d[h]===Si?Hh(d,h,a?l.call(a):l()):yC(d,h)}function ys(c,l,a,h){return BZ(Rt(),Ka(),c,l,a,h)}function as(c,l,a,h,d){return function VZ(c,l,a,h,d,f,p){const g=l+a;return wm(c,g,d,f)?Hh(c,g+2,p?h.call(p,d,f):h(d,f)):MC(c,g+2)}(Rt(),Ka(),c,l,a,h,d)}function NZ(c,l,a,h,d,f){return function zZ(c,l,a,h,d,f,p,g){const m=l+a;return sO(c,m,d,f,p)?Hh(c,m+3,g?h.call(g,d,f,p):h(d,f,p)):MC(c,m+3)}(Rt(),Ka(),c,l,a,h,d,f)}function pO(c,l,a,h,d,f,p){return function UZ(c,l,a,h,d,f,p,g,m){const v=l+a;return cu(c,v,d,f,p,g)?Hh(c,v+4,m?h.call(m,d,f,p,g):h(d,f,p,g)):MC(c,v+4)}(Rt(),Ka(),c,l,a,h,d,f,p)}function MC(c,l){const a=c[l];return a===Si?void 0:a}function BZ(c,l,a,h,d,f){const p=l+a;return wa(c,p,d)?Hh(c,p+1,f?h.call(f,d):h(d)):MC(c,p+1)}function EC(c,l){const a=cr();let h;const d=c+22;a.firstCreatePass?(h=function cDe(c,l){if(l)for(let a=l.length-1;a>=0;a--){const h=l[a];if(c===h.name)return h}}(l,a.pipeRegistry),a.data[d]=h,h.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,h.onDestroy)):h=a.data[d];const f=h.factory||(h.factory=_m(h.type)),p=ru(B);try{const g=MT(!1),m=f();return MT(g),function aTe(c,l,a,h){a>=c.data.length&&(c.data[a]=null,c.blueprint[a]=null),l[a]=h}(a,Rt(),d,m),m}finally{ru(p)}}function AC(c,l,a){const h=c+22,d=Rt(),f=Vv(d,h);return function IC(c,l){return c[1].data[l].pure}(d,h)?BZ(d,Ka(),l,f.transform,a,f):f.transform(a)}function iF(c){return l=>{setTimeout(c,void 0,l)}}const wt=class pDe extends yt{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,a,h){var d,f,p;let g=l,m=a||(()=>null),v=h;if(l&&"object"==typeof l){const _=l;g=null===(d=_.next)||void 0===d?void 0:d.bind(_),m=null===(f=_.error)||void 0===f?void 0:f.bind(_),v=null===(p=_.complete)||void 0===p?void 0:p.bind(_)}this.__isAsync&&(m=iF(m),g&&(g=iF(g)),v&&(v=iF(v)));const y=super.subscribe({next:g,error:m,complete:v});return l instanceof Ne&&l.add(y),y}};function gDe(){return this._results[xm()]()}class rF{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=xm(),h=rF.prototype;h[a]||(h[a]=gDe)}get changes(){return this._changes||(this._changes=new wt)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,a){return this._results.reduce(l,a)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,a){const h=this;h.dirty=!1;const d=hc(l);(this._changesDetected=!function Exe(c,l,a){if(c.length!==l.length)return!1;for(let h=0;h<c.length;h++){let d=c[h],f=l[h];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(h._results,d,a))&&(h._results=d,h.length=d.length,h.last=d[this.length-1],h.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Os=(()=>{class c{}return c.__NG_ELEMENT_ID__=yDe,c})();const mDe=Os,vDe=class extends mDe{constructor(l,a,h){super(),this._declarationLView=l,this._declarationTContainer=a,this.elementRef=h}createEmbeddedView(l,a){const h=this._declarationTContainer.tViews,d=KT(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(d[19]=p.createEmbeddedView(h)),AR(h,d,l),new gC(d)}};function yDe(){return gO(Do(),Rt())}function gO(c,l){return 4&c.type?new vDe(l,c,ey(c,l)):null}let Vi=(()=>{class c{}return c.__NG_ELEMENT_ID__=_De,c})();function _De(){return GZ(Do(),Rt())}const bDe=Vi,$Z=class extends bDe{constructor(l,a,h){super(),this._lContainer=l,this._hostTNode=a,this._hostLView=h}get element(){return ey(this._hostTNode,this._hostLView)}get injector(){return new $v(this._hostTNode,this._hostLView)}get parentInjector(){const l=ET(this._hostTNode,this._hostLView);if(HG(l)){const a=Hv(l,this._hostLView),h=Uv(l);return new $v(a[1].data[h+8],a)}return new $v(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const a=WZ(this._lContainer);return null!==a&&a[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,a,h){let d,f;"number"==typeof h?d=h:null!=h&&(d=h.index,f=h.injector);const p=l.createEmbeddedView(a||{},f);return this.insert(p,d),p}createComponent(l,a,h,d,f){const p=l&&!function Jb(c){return"function"==typeof c}(l);let g;if(p)g=a;else{const _=a||{};g=_.index,h=_.injector,d=_.projectableNodes,f=_.environmentInjector||_.ngModuleRef}const m=p?l:new mC(Rr(l)),v=h||this.parentInjector;if(!f&&null==m.ngModule){const b=(p?v:this.parentInjector).get(kp,null);b&&(f=b)}const y=m.create(v,d,void 0,f);return this.insert(y.hostView,g),y}insert(l,a){const h=l._lView,d=h[1];if(function JCe(c){return Uu(c[3])}(h)){const y=this.indexOf(l);if(-1!==y)this.detach(y);else{const _=h[3],b=new $Z(_,_[6],_[3]);b.detach(b.indexOf(l))}}const f=this._adjustIndex(a),p=this._lContainer;!function SSe(c,l,a,h){const d=10+h,f=a.length;h>0&&(a[d-1][4]=l),h<f-10?(l[4]=a[d],JG(a,10+h,l)):(a.push(l),l[4]=null),l[3]=a;const p=l[17];null!==p&&a!==p&&function TSe(c,l){const a=c[9];l[16]!==l[3][3][16]&&(c[2]=!0),null===a?c[9]=[l]:a.push(l)}(p,l);const g=l[19];null!==g&&g.insertView(c),l[2]|=64}(d,h,p,f);const g=fR(f,p),m=h[11],v=WT(m,p[7]);return null!==v&&function CSe(c,l,a,h,d,f){h[0]=d,h[6]=l,pC(c,h,a,1,d,f)}(d,p[6],m,h,v,g),l.attachToViewContainerRef(),JG(sF(p),f,l),l}move(l,a){return this.insert(l,a)}indexOf(l){const a=WZ(this._lContainer);return null!==a?a.indexOf(l):-1}remove(l){const a=this._adjustIndex(l,-1),h=uR(this._lContainer,a);h&&(RT(sF(this._lContainer),a),KQ(h[1],h))}detach(l){const a=this._adjustIndex(l,-1),h=uR(this._lContainer,a);return h&&null!=RT(sF(this._lContainer),a)?new gC(h):null}_adjustIndex(l,a=0){return null==l?this.length+a:l}};function WZ(c){return c[8]}function sF(c){return c[8]||(c[8]=[])}function GZ(c,l){let a;const h=l[c.index];if(Uu(h))a=h;else{let d;if(8&c.type)d=lo(h);else{const f=l[11];d=f.createComment("");const p=au(c,l);Cm(f,WT(f,p),d,function MSe(c,l){return c.nextSibling(l)}(f,p),!1)}l[c.index]=a=Yj(h,l,d,c),eO(l,a)}return new $Z(a,c,l)}class oF{constructor(l){this.queryList=l,this.matches=null}clone(){return new oF(this.queryList)}setDirty(){this.queryList.setDirty()}}class aF{constructor(l=[]){this.queries=l}createEmbeddedView(l){const a=l.queries;if(null!==a){const h=null!==l.contentQueries?l.contentQueries[0]:a.length,d=[];for(let f=0;f<h;f++){const p=a.getByIndex(f);d.push(this.queries[p.indexInDeclarationView].clone())}return new aF(d)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let a=0;a<this.queries.length;a++)null!==XZ(l,a).matches&&this.queries[a].setDirty()}}class QZ{constructor(l,a,h=null){this.predicate=l,this.flags=a,this.read=h}}class lF{constructor(l=[]){this.queries=l}elementStart(l,a){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,a)}elementEnd(l){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(l)}embeddedTView(l){let a=null;for(let h=0;h<this.length;h++){const d=null!==a?a.length:0,f=this.getByIndex(h).embeddedTView(l,d);f&&(f.indexInDeclarationView=h,null!==a?a.push(f):a=[f])}return null!==a?new lF(a):null}template(l,a){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,a)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class cF{constructor(l,a=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(l,a){this.isApplyingToNode(a)&&this.matchTNode(l,a)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,a){this.elementStart(l,a)}embeddedTView(l,a){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,a),new cF(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==a;)h=h.parent;return a===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,a){const h=this.metadata.predicate;if(Array.isArray(h))for(let d=0;d<h.length;d++){const f=h[d];this.matchTNodeWithReadOption(l,a,wDe(a,f)),this.matchTNodeWithReadOption(l,a,IT(a,l,f,!1,!1))}else h===Os?4&a.type&&this.matchTNodeWithReadOption(l,a,-1):this.matchTNodeWithReadOption(l,a,IT(a,l,h,!1,!1))}matchTNodeWithReadOption(l,a,h){if(null!==h){const d=this.metadata.read;if(null!==d)if(d===Sn||d===Vi||d===Os&&4&a.type)this.addMatch(a.index,-2);else{const f=IT(a,l,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,h)}}addMatch(l,a){null===this.matches?this.matches=[l,a]:this.matches.push(l,a)}}function wDe(c,l){const a=c.localNames;if(null!==a)for(let h=0;h<a.length;h+=2)if(a[h]===l)return a[h+1];return null}function TDe(c,l,a,h){return-1===a?function SDe(c,l){return 11&c.type?ey(c,l):4&c.type?gO(c,l):null}(l,c):-2===a?function ODe(c,l,a){return a===Sn?ey(l,c):a===Os?gO(l,c):a===Vi?GZ(l,c):void 0}(c,l,h):Yb(c,c[1],a,l)}function jZ(c,l,a,h){const d=l[19].queries[h];if(null===d.matches){const f=c.data,p=a.matches,g=[];for(let m=0;m<p.length;m+=2){const v=p[m];g.push(v<0?null:TDe(l,f[v],p[m+1],a.metadata.read))}d.matches=g}return d.matches}function uF(c,l,a,h){const d=c.queries.getByIndex(a),f=d.matches;if(null!==f){const p=jZ(c,l,d,a);for(let g=0;g<f.length;g+=2){const m=f[g];if(m>0)h.push(p[g/2]);else{const v=f[g+1],y=l[-m];for(let _=10;_<y.length;_++){const b=y[_];b[17]===b[3]&&uF(b[1],b,v,h)}if(null!==y[9]){const _=y[9];for(let b=0;b<_.length;b++){const C=_[b];uF(C[1],C,v,h)}}}}}return h}function Ht(c){const l=Rt(),a=cr(),h=AG();bP(h+1);const d=XZ(a,h);if(c.dirty&&function KCe(c){return 4==(4&c[2])}(l)===(2==(2&d.metadata.flags))){if(null===d.matches)c.reset([]);else{const f=d.crossesNgTemplate?uF(a,l,h,[]):jZ(a,l,d,h);c.reset(f,Uwe),c.notifyOnChanges()}return!0}return!1}function ci(c,l,a){const h=cr();h.firstCreatePass&&(ZZ(h,new QZ(c,l,a),-1),2==(2&l)&&(h.staticViewQueries=!0)),qZ(h,Rt(),l)}function ii(c,l,a,h){const d=cr();if(d.firstCreatePass){const f=Do();ZZ(d,new QZ(l,a,h),f.index),function kDe(c,l){const a=c.contentQueries||(c.contentQueries=[]);l!==(a.length?a[a.length-1]:-1)&&a.push(c.queries.length-1,l)}(d,c),2==(2&a)&&(d.staticContentQueries=!0)}qZ(d,Rt(),a)}function $t(){return function DDe(c,l){return c[19].queries[l].queryList}(Rt(),AG())}function qZ(c,l,a){const h=new rF(4==(4&a));Hj(c,l,h,h.destroy),null===l[19]&&(l[19]=new aF),l[19].queries.push(new oF(h))}function ZZ(c,l,a){null===c.queries&&(c.queries=new lF),c.queries.track(new cF(l,a))}function XZ(c,l){return c.queries.getByIndex(l)}function Oa(c,l){return gO(c,l)}function vO(...c){}const yO=new Ln("Application Initializer");let _O=(()=>{class c{constructor(a){this.appInits=a,this.resolve=vO,this.reject=vO,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,d)=>{this.resolve=h,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(_C(f))a.push(f);else if(GR(f)){const p=new Promise((g,m)=>{f.subscribe({complete:g,error:m})});a.push(p)}}Promise.all(a).then(()=>{h()}).catch(d=>{this.reject(d)}),0===a.length&&h(),this.initialized=!0}}return c.\u0275fac=function(a){return new(a||c)(Ae(yO,8))},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const RC=new Ln("AppId",{providedIn:"root",factory:function gX(){return`${gF()}${gF()}${gF()}`}});function gF(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const mX=new Ln("Platform Initializer"),_s=new Ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vX=new Ln("appBootstrapListener"),yX=new Ln("AnimationModuleType");let qDe=(()=>{class c{log(a){console.log(a)}warn(a){console.warn(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const ju=new Ln("LocaleId",{providedIn:"root",factory:()=>Ks(ju,ni.Optional|ni.SkipSelf)||function ZDe(){return"undefined"!=typeof $localize&&$localize.locale||Cy}()});class YDe{constructor(l,a){this.ngModuleFactory=l,this.componentFactories=a}}let mF=(()=>{class c{compileModuleSync(a){return new tF(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const h=this.compileModuleSync(a),f=hf(lc(a).declarations).reduce((p,g)=>{const m=Rr(g);return m&&p.push(new mC(m)),p},[]);return new YDe(h,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const eke=(()=>Promise.resolve(0))();function vF(c){"undefined"==typeof Zone?eke.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class Zi{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wt(!1),this.onMicrotaskEmpty=new wt(!1),this.onStable=new wt(!1),this.onError=new wt(!1),"undefined"==typeof Zone)throw new Et(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!h&&a,d.shouldCoalesceRunChangeDetection=h,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function tke(){let c=Xr.requestAnimationFrame,l=Xr.cancelAnimationFrame;if("undefined"!=typeof Zone&&c&&l){const a=c[Zone.__symbol__("OriginalDelegate")];a&&(c=a);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function rke(c){const l=()=>{!function ike(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(Xr,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,_F(c),c.isCheckStableRunning=!0,yF(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),_F(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,h,d,f,p,g)=>{try{return CX(c),a.invokeTask(d,f,p,g)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||c.shouldCoalesceRunChangeDetection)&&l(),xX(c)}},onInvoke:(a,h,d,f,p,g,m)=>{try{return CX(c),a.invoke(d,f,p,g,m)}finally{c.shouldCoalesceRunChangeDetection&&l(),xX(c)}},onHasTask:(a,h,d,f)=>{a.hasTask(d,f),h===d&&("microTask"==f.change?(c._hasPendingMicrotasks=f.microTask,_F(c),yF(c)):"macroTask"==f.change&&(c.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,h,d,f)=>(a.handleError(d,f),c.runOutsideAngular(()=>c.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zi.isInAngularZone())throw new Et(909,!1)}static assertNotInAngularZone(){if(Zi.isInAngularZone())throw new Et(909,!1)}run(l,a,h){return this._inner.run(l,a,h)}runTask(l,a,h,d){const f=this._inner,p=f.scheduleEventTask("NgZoneEvent: "+d,l,nke,vO,vO);try{return f.runTask(p,a,h)}finally{f.cancelTask(p)}}runGuarded(l,a,h){return this._inner.runGuarded(l,a,h)}runOutsideAngular(l){return this._outer.run(l)}}const nke={};function yF(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function _F(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function CX(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function xX(c){c._nesting--,yF(c)}class ske{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wt,this.onMicrotaskEmpty=new wt,this.onStable=new wt,this.onError=new wt}run(l,a,h){return l.apply(a,h)}runGuarded(l,a,h){return l.apply(a,h)}runOutsideAngular(l){return l()}runTask(l,a,h,d){return l.apply(a,h)}}const wX=new Ln(""),bO=new Ln("");let FC,bF=(()=>{class c{constructor(a,h,d){this._ngZone=a,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,FC||(function oke(c){FC=c}(d),d.addToWindow(h)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zi.assertNotInAngularZone(),vF(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vF(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(a)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,h,d){let f=-1;h&&h>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==f),a(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,h,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,h,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,h,d){return[]}}return c.\u0275fac=function(a){return new(a||c)(Ae(Zi),Ae(CF),Ae(bO))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),CF=(()=>{class c{constructor(){this._applications=new Map}registerApplication(a,h){this._applications.set(a,h)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,h=!0){var d;return null!==(d=null==FC?void 0:FC.findTestabilityInTree(this,a,h))&&void 0!==d?d:null}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})(),Qh=null;const SX=new Ln("AllowMultipleToken"),xF=new Ln("PlatformDestroyListeners");class TX{constructor(l,a){this.name=l,this.token=a}}function DX(c,l,a=[]){const h=`Platform: ${l}`,d=new Ln(h);return(f=[])=>{let p=wF();if(!p||p.injector.get(SX,!1)){const g=[...a,...f,{provide:d,useValue:!0}];c?c(g):function cke(c){if(Qh&&!Qh.get(SX,!1))throw new Et(400,!1);Qh=c;const l=c.get(MX);(function OX(c){const l=c.get(mX,null);l&&l.forEach(a=>a())})(c)}(function kX(c=[],l){return Qr.create({name:l,providers:[{provide:GP,useValue:"platform"},{provide:xF,useValue:new Set([()=>Qh=null])},...c]})}(g,h))}return function hke(c){const l=wF();if(!l)throw new Et(401,!1);return l}()}}function wF(){var c;return null!==(c=null==Qh?void 0:Qh.get(MX))&&void 0!==c?c:null}let MX=(()=>{class c{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,h){const d=function AX(c,l){let a;return a="noop"===c?new ske:("zone.js"===c?void 0:c)||new Zi(l),a}(null==h?void 0:h.ngZone,function EX(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(h)),f=[{provide:Zi,useValue:d}];return d.run(()=>{const p=Qr.create({providers:f,parent:this.injector,name:a.moduleType.name}),g=a.create(p),m=g.injector.get(ny,null);if(!m)throw new Et(402,!1);return d.runOutsideAngular(()=>{const v=d.onError.subscribe({next:y=>{m.handleError(y)}});g.onDestroy(()=>{CO(this._modules,g),v.unsubscribe()})}),function IX(c,l,a){try{const h=a();return _C(h)?h.catch(d=>{throw l.runOutsideAngular(()=>c.handleError(d)),d}):h}catch(h){throw l.runOutsideAngular(()=>c.handleError(h)),h}}(m,d,()=>{const v=g.injector.get(_O);return v.runInitializers(),v.donePromise.then(()=>(function nZ(c){ac(c,"Expected localeId to be defined"),"string"==typeof c&&(tZ=c.toLowerCase().replace(/_/g,"-"))}(g.injector.get(ju,Cy)||Cy),this._moduleDoBootstrap(g),g))})})}bootstrapModule(a,h=[]){const d=PX({},h);return function ake(c,l,a){const h=new tF(a);return Promise.resolve(h)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const h=a.injector.get(NC);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>h.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Et(403,!1);a.instance.ngDoBootstrap(h)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Et(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const a=this._injector.get(xF,null);a&&(a.forEach(h=>h()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(a){return new(a||c)(Ae(Qr))},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function PX(c,l){return Array.isArray(l)?l.reduce(PX,c):Object.assign(Object.assign({},c),l)}let NC=(()=>{class c{constructor(a,h,d){this._zone=a,this._injector=h,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new En(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),p=new En(g=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{Zi.assertNotInAngularZone(),vF(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{Zi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});this.isStable=function xCe(...c){const l=Ub(c),a=function gCe(c,l){return"number"==typeof Y4(c)?c.pop():l}(c,1/0),h=c;return h.length?1===h.length?iu(h[0]):Pv(a)(Ys(h,l)):nf}(f,p.pipe(function wCe(c={}){const{connector:l=(()=>new yt),resetOnError:a=!0,resetOnComplete:h=!0,resetOnRefCountZero:d=!0}=c;return f=>{let p=null,g=null,m=null,v=0,y=!1,_=!1;const b=()=>{null==g||g.unsubscribe(),g=null},C=()=>{b(),p=m=null,y=_=!1},x=()=>{const S=p;C(),null==S||S.unsubscribe()};return xi((S,w)=>{v++,!_&&!y&&b();const T=m=null!=m?m:l();w.add(()=>{v--,0===v&&!_&&!y&&(g=K4(x,d))}),T.subscribe(w),p||(p=new vt({next:O=>T.next(O),error:O=>{_=!0,b(),g=K4(C,a,O),T.error(O)},complete:()=>{y=!0,b(),g=K4(C,h),T.complete()}}),Ys(S).subscribe(p))})(f)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,h){const d=a instanceof PQ;if(!this._injector.get(_O).done)throw!d&&function Fv(c){const l=Rr(c)||Xa(c)||Ya(c);return null!==l&&l.standalone}(a),new Et(405,false);let p;p=d?a:this._injector.get(Mp).resolveComponentFactory(a),this.componentTypes.push(p.componentType);const g=function lke(c){return c.isBoundToModule}(p)?void 0:this._injector.get(Tm),v=p.create(Qr.NULL,[],h||p.selector,g),y=v.location.nativeElement,_=v.injector.get(wX,null);return null==_||_.registerApplication(y),v.onDestroy(()=>{this.detachView(v.hostView),CO(this.components,v),null==_||_.unregisterApplication(y)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Et(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const h=a;this._views.push(h),h.attachToAppRef(this)}detachView(a){const h=a;CO(this._views,h),h.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(vX,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>CO(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Et(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(a){return new(a||c)(Ae(Zi),Ae(kp),Ae(ny))},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function CO(c,l){const a=c.indexOf(l);a>-1&&c.splice(a,1)}let FX=!0,sa=(()=>{class c{}return c.__NG_ELEMENT_ID__=pke,c})();function pke(c){return function gke(c,l,a){if(bT(c)&&!a){const h=uc(c.index,l);return new gC(h,h)}return 47&c.type?new gC(l[16],l):null}(Do(),Rt(),16==(16&c))}class zX{constructor(){}supports(l){return vC(l)}create(l){return new Cke(l)}}const bke=(c,l)=>l;class Cke{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||bke}forEachItem(l){let a;for(a=this._itHead;null!==a;a=a._next)l(a)}forEachOperation(l){let a=this._itHead,h=this._removalsHead,d=0,f=null;for(;a||h;){const p=!h||a&&a.currentIndex<HX(h,d,f)?a:h,g=HX(p,d,f),m=p.currentIndex;if(p===h)d--,h=h._nextRemoved;else if(a=a._next,null==p.previousIndex)d++;else{f||(f=[]);const v=g-d,y=m-d;if(v!=y){for(let b=0;b<v;b++){const C=b<f.length?f[b]:f[b]=0,x=C+b;y<=x&&x<v&&(f[b]=C+1)}f[p.previousIndex]=y-v}}g!==m&&l(p,g,m)}}forEachPreviousItem(l){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)l(a)}forEachAddedItem(l){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)l(a)}forEachMovedItem(l){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)l(a)}forEachRemovedItem(l){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)l(a)}forEachIdentityChange(l){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)l(a)}diff(l){if(null==l&&(l=[]),!vC(l))throw new Et(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let d,f,p,a=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let g=0;g<this.length;g++)f=l[g],p=this._trackByFn(g,f),null!==a&&Object.is(a.trackById,p)?(h&&(a=this._verifyReinsertion(a,f,p,g)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,p,g),h=!0),a=a._next}else d=0,function iTe(c,l){if(Array.isArray(c))for(let a=0;a<c.length;a++)l(c[a]);else{const a=c[xm()]();let h;for(;!(h=a.next()).done;)l(h.value)}}(l,g=>{p=this._trackByFn(d,g),null!==a&&Object.is(a.trackById,p)?(h&&(a=this._verifyReinsertion(a,g,p,d)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,p,d),h=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,a,h,d){let f;return null===l?f=this._itTail:(f=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,a)||this._addIdentityChange(l,a),this._reinsertAfter(l,f,d)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,d))?(Object.is(l.item,a)||this._addIdentityChange(l,a),this._moveAfter(l,f,d)):l=this._addAfter(new xke(a,h),f,d),l}_verifyReinsertion(l,a,h,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==f?l=this._reinsertAfter(f,l._prev,d):l.currentIndex!=d&&(l.currentIndex=d,this._addToMoves(l,d)),l}_truncate(l){for(;null!==l;){const a=l._next;this._addToRemovals(this._unlink(l)),l=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,a,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const d=l._prevRemoved,f=l._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(l,a,h),this._addToMoves(l,h),l}_moveAfter(l,a,h){return this._unlink(l),this._insertAfter(l,a,h),this._addToMoves(l,h),l}_addAfter(l,a,h){return this._insertAfter(l,a,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,a,h){const d=null===a?this._itHead:a._next;return l._next=d,l._prev=a,null===d?this._itTail=l:d._prev=l,null===a?this._itHead=l:a._next=l,null===this._linkedRecords&&(this._linkedRecords=new UX),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const a=l._prev,h=l._next;return null===a?this._itHead=h:a._next=h,null===h?this._itTail=a:h._prev=a,l}_addToMoves(l,a){return l.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new UX),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,a){return l.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class xke{constructor(l,a){this.item=l,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wke{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,a){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===a||a<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const a=l._prevDup,h=l._nextDup;return null===a?this._head=h:a._nextDup=h,null===h?this._tail=a:h._prevDup=a,null===this._head}}class UX{constructor(){this.map=new Map}put(l){const a=l.trackById;let h=this.map.get(a);h||(h=new wke,this.map.set(a,h)),h.add(l)}get(l,a){const d=this.map.get(l);return d?d.get(l,a):null}remove(l){const a=l.trackById;return this.map.get(a).remove(l)&&this.map.delete(a),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HX(c,l,a){const h=c.previousIndex;if(null===h)return h;let d=0;return a&&h<a.length&&(d=a[h]),h+l+d}class $X{constructor(){}supports(l){return l instanceof Map||$R(l)}create(){return new Ske}}class Ske{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let a;for(a=this._mapHead;null!==a;a=a._next)l(a)}forEachPreviousItem(l){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)l(a)}forEachChangedItem(l){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)l(a)}forEachAddedItem(l){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)l(a)}forEachRemovedItem(l){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)l(a)}diff(l){if(l){if(!(l instanceof Map||$R(l)))throw new Et(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,h),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,h);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let h=a;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,a){if(l){const h=l._prev;return a._next=l,a._prev=h,l._prev=a,h&&(h._next=a),l===this._mapHead&&(this._mapHead=a),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(l,a){if(this._records.has(l)){const d=this._records.get(l);this._maybeAddToChanges(d,a);const f=d._prev,p=d._next;return f&&(f._next=p),p&&(p._prev=f),d._next=null,d._prev=null,d}const h=new Tke(l);return this._records.set(l,h),h.currentValue=a,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,a){Object.is(a,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=a,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,a){l instanceof Map?l.forEach(a):Object.keys(l).forEach(h=>a(l[h],h))}}class Tke{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WX(){return new Sy([new zX])}let Sy=(()=>{class c{constructor(a){this.factories=a}static create(a,h){if(null!=h){const d=h.factories.slice();a=a.concat(d)}return new c(a)}static extend(a){return{provide:c,useFactory:h=>c.create(a,h||WX()),deps:[[c,new Op,new Tp]]}}find(a){const h=this.factories.find(d=>d.supports(a));if(null!=h)return h;throw new Et(901,!1)}}return c.\u0275prov=qe({token:c,providedIn:"root",factory:WX}),c})();function GX(){return new LC([new $X])}let LC=(()=>{class c{constructor(a){this.factories=a}static create(a,h){if(h){const d=h.factories.slice();a=a.concat(d)}return new c(a)}static extend(a){return{provide:c,useFactory:h=>c.create(a,h||GX()),deps:[[c,new Op,new Tp]]}}find(a){const h=this.factories.find(d=>d.supports(a));if(h)return h;throw new Et(901,!1)}}return c.\u0275prov=qe({token:c,providedIn:"root",factory:GX}),c})();const kke=DX(null,"core",[]);let Mke=(()=>{class c{constructor(a){}}return c.\u0275fac=function(a){return new(a||c)(Ae(NC))},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({}),c})();function gf(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}let SO=null;function jh(){return SO}const Dr=new Ln("DocumentToken");let kF=(()=>{class c{historyGo(a){throw new Error("Not implemented")}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:function(){return function Pke(){return Ae(QX)}()},providedIn:"platform"}),c})();const Rke=new Ln("Location Initialized");let QX=(()=>{class c extends kF{constructor(a){super(),this._doc=a,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jh().getBaseHref(this._doc)}onPopState(a){const h=jh().getGlobalEventTarget(this._doc,"window");return h.addEventListener("popstate",a,!1),()=>h.removeEventListener("popstate",a)}onHashChange(a){const h=jh().getGlobalEventTarget(this._doc,"window");return h.addEventListener("hashchange",a,!1),()=>h.removeEventListener("hashchange",a)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(a){this.location.pathname=a}pushState(a,h,d){jX()?this._history.pushState(a,h,d):this.location.hash=d}replaceState(a,h,d){jX()?this._history.replaceState(a,h,d):this.location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(a=0){this._history.go(a)}getState(){return this._history.state}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr))},c.\u0275prov=qe({token:c,factory:function(){return function Fke(){return new QX(Ae(Dr))}()},providedIn:"platform"}),c})();function jX(){return!!window.history.pushState}function MF(c,l){if(0==c.length)return l;if(0==l.length)return c;let a=0;return c.endsWith("/")&&a++,l.startsWith("/")&&a++,2==a?c+l.substring(1):1==a?c+l:c+"/"+l}function qX(c){const l=c.match(/#|\?|$/),a=l&&l.index||c.length;return c.slice(0,a-("/"===c[a-1]?1:0))+c.slice(a)}function mf(c){return c&&"?"!==c[0]?"?"+c:c}let Dm=(()=>{class c{historyGo(a){throw new Error("Not implemented")}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:function(){return Ks(XX)},providedIn:"root"}),c})();const ZX=new Ln("appBaseHref");let XX=(()=>{class c extends Dm{constructor(a,h){var d,f,p;super(),this._platformLocation=a,this._removeListenerFns=[],this._baseHref=null!==(p=null!==(d=null!=h?h:this._platformLocation.getBaseHrefFromDOM())&&void 0!==d?d:null===(f=Ks(Dr).location)||void 0===f?void 0:f.origin)&&void 0!==p?p:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}getBaseHref(){return this._baseHref}prepareExternalUrl(a){return MF(this._baseHref,a)}path(a=!1){const h=this._platformLocation.pathname+mf(this._platformLocation.search),d=this._platformLocation.hash;return d&&a?`${h}${d}`:h}pushState(a,h,d,f){const p=this.prepareExternalUrl(d+mf(f));this._platformLocation.pushState(a,h,p)}replaceState(a,h,d,f){const p=this.prepareExternalUrl(d+mf(f));this._platformLocation.replaceState(a,h,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(a=0){var h,d;null===(d=(h=this._platformLocation).historyGo)||void 0===d||d.call(h,a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(kF),Ae(ZX,8))},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Nke=(()=>{class c extends Dm{constructor(a,h){super(),this._platformLocation=a,this._baseHref="",this._removeListenerFns=[],null!=h&&(this._baseHref=h)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}getBaseHref(){return this._baseHref}path(a=!1){let h=this._platformLocation.hash;return null==h&&(h="#"),h.length>0?h.substring(1):h}prepareExternalUrl(a){const h=MF(this._baseHref,a);return h.length>0?"#"+h:h}pushState(a,h,d,f){let p=this.prepareExternalUrl(d+mf(f));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(a,h,p)}replaceState(a,h,d,f){let p=this.prepareExternalUrl(d+mf(f));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(a,h,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(a=0){var h,d;null===(d=(h=this._platformLocation).historyGo)||void 0===d||d.call(h,a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(kF),Ae(ZX,8))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),EF=(()=>{class c{constructor(a){this._subject=new wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=a;const h=this._locationStrategy.getBaseHref();this._baseHref=qX(YX(h)),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){var a;null===(a=this._urlChangeSubscription)||void 0===a||a.unsubscribe(),this._urlChangeListeners=[]}path(a=!1){return this.normalize(this._locationStrategy.path(a))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(a,h=""){return this.path()==this.normalize(a+mf(h))}normalize(a){return c.stripTrailingSlash(function Bke(c,l){return c&&l.startsWith(c)?l.substring(c.length):l}(this._baseHref,YX(a)))}prepareExternalUrl(a){return a&&"/"!==a[0]&&(a="/"+a),this._locationStrategy.prepareExternalUrl(a)}go(a,h="",d=null){this._locationStrategy.pushState(d,"",a,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(a+mf(h)),d)}replaceState(a,h="",d=null){this._locationStrategy.replaceState(d,"",a,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(a+mf(h)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(a=0){var h,d;null===(d=(h=this._locationStrategy).historyGo)||void 0===d||d.call(h,a)}onUrlChange(a){return this._urlChangeListeners.push(a),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(h=>{this._notifyUrlChangeListeners(h.url,h.state)})),()=>{var h;const d=this._urlChangeListeners.indexOf(a);this._urlChangeListeners.splice(d,1),0===this._urlChangeListeners.length&&(null===(h=this._urlChangeSubscription)||void 0===h||h.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(a="",h){this._urlChangeListeners.forEach(d=>d(a,h))}subscribe(a,h,d){return this._subject.subscribe({next:a,error:h,complete:d})}}return c.normalizeQueryParams=mf,c.joinWithSlash=MF,c.stripTrailingSlash=qX,c.\u0275fac=function(a){return new(a||c)(Ae(Dm))},c.\u0275prov=qe({token:c,factory:function(){return function Lke(){return new EF(Ae(Dm))}()},providedIn:"root"}),c})();function YX(c){return c.replace(/\/index.html$/,"")}function oY(c,l){l=encodeURIComponent(l);for(const a of c.split(";")){const h=a.indexOf("="),[d,f]=-1==h?[a,""]:[a.slice(0,h),a.slice(h+1)];if(d.trim()===l)return decodeURIComponent(f)}return null}let si=(()=>{class c{constructor(a,h,d,f){this._iterableDiffers=a,this._keyValueDiffers=h,this._ngEl=d,this._renderer=f,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(a){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof a?a.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(a){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof a?a.split(/\s+/):a,this._rawClass&&(vC(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const a=this._iterableDiffer.diff(this._rawClass);a&&this._applyIterableChanges(a)}else if(this._keyValueDiffer){const a=this._keyValueDiffer.diff(this._rawClass);a&&this._applyKeyValueChanges(a)}}_applyKeyValueChanges(a){a.forEachAddedItem(h=>this._toggleClass(h.key,h.currentValue)),a.forEachChangedItem(h=>this._toggleClass(h.key,h.currentValue)),a.forEachRemovedItem(h=>{h.previousValue&&this._toggleClass(h.key,!1)})}_applyIterableChanges(a){a.forEachAddedItem(h=>{if("string"!=typeof h.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Gr(h.item)}`);this._toggleClass(h.item,!0)}),a.forEachRemovedItem(h=>this._toggleClass(h.item,!1))}_applyClasses(a){a&&(Array.isArray(a)||a instanceof Set?a.forEach(h=>this._toggleClass(h,!0)):Object.keys(a).forEach(h=>this._toggleClass(h,!!a[h])))}_removeClasses(a){a&&(Array.isArray(a)||a instanceof Set?a.forEach(h=>this._toggleClass(h,!1)):Object.keys(a).forEach(h=>this._toggleClass(h,!1)))}_toggleClass(a,h){(a=a.trim())&&a.split(/\s+/g).forEach(d=>{h?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return c.\u0275fac=function(a){return new(a||c)(B(Sy),B(LC),B(Sn),B(di))},c.\u0275dir=bt({type:c,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),c})();class xMe{constructor(l,a,h,d){this.$implicit=l,this.ngForOf=a,this.index=h,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fi=(()=>{class c{constructor(a,h,d){this._viewContainer=a,this._template=h,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(a){this._ngForOf=a,this._ngForOfDirty=!0}set ngForTrackBy(a){this._trackByFn=a}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(a){a&&(this._template=a)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const a=this._ngForOf;!this._differ&&a&&(this._differ=this._differs.find(a).create(this.ngForTrackBy))}if(this._differ){const a=this._differ.diff(this._ngForOf);a&&this._applyChanges(a)}}_applyChanges(a){const h=this._viewContainer;a.forEachOperation((d,f,p)=>{if(null==d.previousIndex)h.createEmbeddedView(this._template,new xMe(d.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)h.remove(null===f?void 0:f);else if(null!==f){const g=h.get(f);h.move(g,p),cY(g,d)}});for(let d=0,f=h.length;d<f;d++){const g=h.get(d).context;g.index=d,g.count=f,g.ngForOf=this._ngForOf}a.forEachIdentityChange(d=>{cY(h.get(d.currentIndex),d)})}static ngTemplateContextGuard(a,h){return!0}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(Os),B(Sy))},c.\u0275dir=bt({type:c,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),c})();function cY(c,l){c.context.$implicit=l.item}let _n=(()=>{class c{constructor(a,h){this._viewContainer=a,this._context=new SMe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=h}set ngIf(a){this._context.$implicit=this._context.ngIf=a,this._updateView()}set ngIfThen(a){uY("ngIfThen",a),this._thenTemplateRef=a,this._thenViewRef=null,this._updateView()}set ngIfElse(a){uY("ngIfElse",a),this._elseTemplateRef=a,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(a,h){return!0}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(Os))},c.\u0275dir=bt({type:c,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),c})();class SMe{constructor(){this.$implicit=null,this.ngIf=null}}function uY(c,l){if(l&&!l.createEmbeddedView)throw new Error(`${c} must be a TemplateRef, but received '${Gr(l)}'.`)}class HF{constructor(l,a){this._viewContainerRef=l,this._templateRef=a,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(l){l&&!this._created?this.create():!l&&this._created&&this.destroy()}}let PO=(()=>{class c{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(a){this._ngSwitch=a,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(a){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(a)}_matchCase(a){const h=a==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||h,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),h}_updateDefaultCases(a){if(this._defaultViews&&a!==this._defaultUsed){this._defaultUsed=a;for(let h=0;h<this._defaultViews.length;h++)this._defaultViews[h].enforceState(a)}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=bt({type:c,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),c})(),hY=(()=>{class c{constructor(a,h,d){this.ngSwitch=d,d._addCase(),this._view=new HF(a,h)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(Os),B(PO,9))},c.\u0275dir=bt({type:c,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),c})(),qh=(()=>{class c{constructor(a){this._viewContainerRef=a,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(a){if(a.ngTemplateOutlet||a.ngTemplateOutletInjector){const h=this._viewContainerRef;if(this._viewRef&&h.remove(h.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:f,ngTemplateOutletInjector:p}=this;this._viewRef=h.createEmbeddedView(d,f,p?{injector:p}:void 0)}else this._viewRef=null}else this._viewRef&&a.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return c.\u0275fac=function(a){return new(a||c)(B(Vi))},c.\u0275dir=bt({type:c,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Wo]}),c})();class kMe{createSubscription(l,a){return l.subscribe({next:a,error:h=>{throw h}})}dispose(l){l.unsubscribe()}}class MMe{createSubscription(l,a){return l.then(a,h=>{throw h})}dispose(l){}}const EMe=new MMe,AMe=new kMe;let $F=(()=>{class c{constructor(a){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=a}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(a){return this._obj?a!==this._obj?(this._dispose(),this.transform(a)):this._latestValue:(a&&this._subscribe(a),this._latestValue)}_subscribe(a){this._obj=a,this._strategy=this._selectStrategy(a),this._subscription=this._strategy.createSubscription(a,h=>this._updateLatestValue(a,h))}_selectStrategy(a){if(_C(a))return EMe;if(fq(a))return AMe;throw function Xu(c,l){return new Et(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(a,h){a===this._obj&&(this._latestValue=h,this._ref.markForCheck())}}return c.\u0275fac=function(a){return new(a||c)(B(sa,16))},c.\u0275pipe=Rl({name:"async",type:c,pure:!1,standalone:!0}),c})(),Oi=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({}),c})();const pY="browser";function ur(c){return c===pY}let YMe=(()=>{class c{}return c.\u0275prov=qe({token:c,providedIn:"root",factory:()=>new KMe(Ae(Dr),window)}),c})();class KMe{constructor(l,a){this.document=l,this.window=a,this.offset=()=>[0,0]}setOffset(l){this.offset=Array.isArray(l)?()=>l:l}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(l){this.supportsScrolling()&&this.window.scrollTo(l[0],l[1])}scrollToAnchor(l){if(!this.supportsScrolling())return;const a=function JMe(c,l){const a=c.getElementById(l)||c.getElementsByName(l)[0];if(a)return a;if("function"==typeof c.createTreeWalker&&c.body&&(c.body.createShadowRoot||c.body.attachShadow)){const h=c.createTreeWalker(c.body,NodeFilter.SHOW_ELEMENT);let d=h.currentNode;for(;d;){const f=d.shadowRoot;if(f){const p=f.getElementById(l)||f.querySelector(`[name="${l}"]`);if(p)return p}d=h.nextNode()}}return null}(this.document,l);a&&(this.scrollToElement(a),a.focus())}setHistoryScrollRestoration(l){if(this.supportScrollRestoration()){const a=this.window.history;a&&a.scrollRestoration&&(a.scrollRestoration=l)}}scrollToElement(l){const a=l.getBoundingClientRect(),h=a.left+this.window.pageXOffset,d=a.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(h-f[0],d-f[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const l=gY(this.window.history)||gY(Object.getPrototypeOf(this.window.history));return!(!l||!l.writable&&!l.set)}catch(l){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(l){return!1}}}function gY(c){return Object.getOwnPropertyDescriptor(c,"scrollRestoration")}class mY{}class qF extends class vEe extends class Ike{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ake(c){SO||(SO=c)}(new qF)}onAndCancel(l,a,h){return l.addEventListener(a,h,!1),()=>{l.removeEventListener(a,h,!1)}}dispatchEvent(l,a){l.dispatchEvent(a)}remove(l){l.parentNode&&l.parentNode.removeChild(l)}createElement(l,a){return(a=a||this.getDefaultDocument()).createElement(l)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(l){return l.nodeType===Node.ELEMENT_NODE}isShadowRoot(l){return l instanceof DocumentFragment}getGlobalEventTarget(l,a){return"window"===a?window:"document"===a?l:"body"===a?l.body:null}getBaseHref(l){const a=function yEe(){return HC=HC||document.querySelector("base"),HC?HC.getAttribute("href"):null}();return null==a?null:function _Ee(c){FO=FO||document.createElement("a"),FO.setAttribute("href",c);const l=FO.pathname;return"/"===l.charAt(0)?l:`/${l}`}(a)}resetBaseElement(){HC=null}getUserAgent(){return window.navigator.userAgent}getCookie(l){return oY(document.cookie,l)}}let FO,HC=null;const bY=new Ln("TRANSITION_ID"),CEe=[{provide:yO,useFactory:function bEe(c,l,a){return()=>{a.get(_O).donePromise.then(()=>{const h=jh(),d=l.querySelectorAll(`style[ng-transition="${c}"]`);for(let f=0;f<d.length;f++)h.remove(d[f])})}},deps:[bY,Dr,Qr],multi:!0}];let wEe=(()=>{class c{build(){return new XMLHttpRequest}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const NO=new Ln("EventManagerPlugins");let LO=(()=>{class c{constructor(a,h){this._zone=h,this._eventNameToPlugin=new Map,a.forEach(d=>d.manager=this),this._plugins=a.slice().reverse()}addEventListener(a,h,d){return this._findPluginFor(h).addEventListener(a,h,d)}addGlobalEventListener(a,h,d){return this._findPluginFor(h).addGlobalEventListener(a,h,d)}getZone(){return this._zone}_findPluginFor(a){const h=this._eventNameToPlugin.get(a);if(h)return h;const d=this._plugins;for(let f=0;f<d.length;f++){const p=d[f];if(p.supports(a))return this._eventNameToPlugin.set(a,p),p}throw new Error(`No event manager plugin found for event ${a}`)}}return c.\u0275fac=function(a){return new(a||c)(Ae(NO),Ae(Zi))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class CY{constructor(l){this._doc=l}addGlobalEventListener(l,a,h){const d=jh().getGlobalEventTarget(this._doc,l);if(!d)throw new Error(`Unsupported event target ${d} for event ${a}`);return this.addEventListener(d,a,h)}}let xY=(()=>{class c{constructor(){this._stylesSet=new Set}addStyles(a){const h=new Set;a.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),h.add(d))}),this.onStylesAdded(h)}onStylesAdded(a){}getAllStyles(){return Array.from(this._stylesSet)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),$C=(()=>{class c extends xY{constructor(a){super(),this._doc=a,this._hostNodes=new Map,this._hostNodes.set(a.head,[])}_addStylesToHost(a,h,d){a.forEach(f=>{const p=this._doc.createElement("style");p.textContent=f,d.push(h.appendChild(p))})}addHost(a){const h=[];this._addStylesToHost(this._stylesSet,a,h),this._hostNodes.set(a,h)}removeHost(a){const h=this._hostNodes.get(a);h&&h.forEach(wY),this._hostNodes.delete(a)}onStylesAdded(a){this._hostNodes.forEach((h,d)=>{this._addStylesToHost(a,d,h)})}ngOnDestroy(){this._hostNodes.forEach(a=>a.forEach(wY))}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();function wY(c){jh().remove(c)}const ZF={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},XF=/%COMP%/g;function BO(c,l,a){for(let h=0;h<l.length;h++){let d=l[h];Array.isArray(d)?BO(c,d,a):(d=d.replace(XF,c),a.push(d))}return a}function OY(c){return l=>{if("__ngUnwrap__"===l)return c;!1===c(l)&&(l.preventDefault(),l.returnValue=!1)}}let VO=(()=>{class c{constructor(a,h,d){this.eventManager=a,this.sharedStylesHost=h,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new YF(a)}createRenderer(a,h){if(!a||!h)return this.defaultRenderer;switch(h.encapsulation){case Vu.Emulated:{let d=this.rendererByCompId.get(h.id);return d||(d=new MEe(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,d)),d.applyToHost(a),d}case 1:case Vu.ShadowDom:return new EEe(this.eventManager,this.sharedStylesHost,a,h);default:if(!this.rendererByCompId.has(h.id)){const d=BO(h.id,h.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return c.\u0275fac=function(a){return new(a||c)(Ae(LO),Ae($C),Ae(RC))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class YF{constructor(l){this.eventManager=l,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(l,a){return a?document.createElementNS(ZF[a]||a,l):document.createElement(l)}createComment(l){return document.createComment(l)}createText(l){return document.createTextNode(l)}appendChild(l,a){(kY(l)?l.content:l).appendChild(a)}insertBefore(l,a,h){l&&(kY(l)?l.content:l).insertBefore(a,h)}removeChild(l,a){l&&l.removeChild(a)}selectRootElement(l,a){let h="string"==typeof l?document.querySelector(l):l;if(!h)throw new Error(`The selector "${l}" did not match any elements`);return a||(h.textContent=""),h}parentNode(l){return l.parentNode}nextSibling(l){return l.nextSibling}setAttribute(l,a,h,d){if(d){a=d+":"+a;const f=ZF[d];f?l.setAttributeNS(f,a,h):l.setAttribute(a,h)}else l.setAttribute(a,h)}removeAttribute(l,a,h){if(h){const d=ZF[h];d?l.removeAttributeNS(d,a):l.removeAttribute(`${h}:${a}`)}else l.removeAttribute(a)}addClass(l,a){l.classList.add(a)}removeClass(l,a){l.classList.remove(a)}setStyle(l,a,h,d){d&(Nl.DashCase|Nl.Important)?l.style.setProperty(a,h,d&Nl.Important?"important":""):l.style[a]=h}removeStyle(l,a,h){h&Nl.DashCase?l.style.removeProperty(a):l.style[a]=""}setProperty(l,a,h){l[a]=h}setValue(l,a){l.nodeValue=a}listen(l,a,h){return"string"==typeof l?this.eventManager.addGlobalEventListener(l,a,OY(h)):this.eventManager.addEventListener(l,a,OY(h))}}function kY(c){return"TEMPLATE"===c.tagName&&void 0!==c.content}class MEe extends YF{constructor(l,a,h,d){super(l),this.component=h;const f=BO(d+"-"+h.id,h.styles,[]);a.addStyles(f),this.contentAttr=function OEe(c){return"_ngcontent-%COMP%".replace(XF,c)}(d+"-"+h.id),this.hostAttr=function DEe(c){return"_nghost-%COMP%".replace(XF,c)}(d+"-"+h.id)}applyToHost(l){super.setAttribute(l,this.hostAttr,"")}createElement(l,a){const h=super.createElement(l,a);return super.setAttribute(h,this.contentAttr,""),h}}class EEe extends YF{constructor(l,a,h,d){super(l),this.sharedStylesHost=a,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=BO(d.id,d.styles,[]);for(let p=0;p<f.length;p++){const g=document.createElement("style");g.textContent=f[p],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(l){return l===this.hostEl?this.shadowRoot:l}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(l,a){return super.appendChild(this.nodeOrShadowRoot(l),a)}insertBefore(l,a,h){return super.insertBefore(this.nodeOrShadowRoot(l),a,h)}removeChild(l,a){return super.removeChild(this.nodeOrShadowRoot(l),a)}parentNode(l){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))}}let AEe=(()=>{class c extends CY{constructor(a){super(a)}supports(a){return!0}addEventListener(a,h,d){return a.addEventListener(h,d,!1),()=>this.removeEventListener(a,h,d)}removeEventListener(a,h,d){return a.removeEventListener(h,d)}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const MY=["alt","control","meta","shift"],IEe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PEe={alt:c=>c.altKey,control:c=>c.ctrlKey,meta:c=>c.metaKey,shift:c=>c.shiftKey};let REe=(()=>{class c extends CY{constructor(a){super(a)}supports(a){return null!=c.parseEventName(a)}addEventListener(a,h,d){const f=c.parseEventName(h),p=c.eventCallback(f.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jh().onAndCancel(a,f.domEventName,p))}static parseEventName(a){const h=a.toLowerCase().split("."),d=h.shift();if(0===h.length||"keydown"!==d&&"keyup"!==d)return null;const f=c._normalizeKey(h.pop());let p="",g=h.indexOf("code");if(g>-1&&(h.splice(g,1),p="code."),MY.forEach(v=>{const y=h.indexOf(v);y>-1&&(h.splice(y,1),p+=v+".")}),p+=f,0!=h.length||0===f.length)return null;const m={};return m.domEventName=d,m.fullKey=p,m}static matchEventFullKeyCode(a,h){let d=IEe[a.key]||a.key,f="";return h.indexOf("code.")>-1&&(d=a.code,f="code."),!(null==d||!d)&&(d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),MY.forEach(p=>{p!==d&&(0,PEe[p])(a)&&(f+=p+".")}),f+=d,f===h)}static eventCallback(a,h,d){return f=>{c.matchEventFullKeyCode(f,a)&&d.runGuarded(()=>h(f))}}static _normalizeKey(a){return"esc"===a?"escape":a}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const AY=[{provide:_s,useValue:pY},{provide:mX,useValue:function FEe(){qF.makeCurrent()},multi:!0},{provide:Dr,useFactory:function LEe(){return function twe(c){FP=c}(document),document},deps:[]}],BEe=DX(kke,"browser",AY),IY=new Ln(""),PY=[{provide:bO,useClass:class xEe{addToWindow(l){Xr.getAngularTestability=(h,d=!0)=>{const f=l.findTestabilityInTree(h,d);if(null==f)throw new Error("Could not find testability for element.");return f},Xr.getAllAngularTestabilities=()=>l.getAllTestabilities(),Xr.getAllAngularRootElements=()=>l.getAllRootElements(),Xr.frameworkStabilizers||(Xr.frameworkStabilizers=[]),Xr.frameworkStabilizers.push(h=>{const d=Xr.getAllAngularTestabilities();let f=d.length,p=!1;const g=function(m){p=p||m,f--,0==f&&h(p)};d.forEach(function(m){m.whenStable(g)})})}findTestabilityInTree(l,a,h){if(null==a)return null;const d=l.getTestability(a);return null!=d?d:h?jh().isShadowRoot(a)?this.findTestabilityInTree(l,a.host,!0):this.findTestabilityInTree(l,a.parentElement,!0):null}},deps:[]},{provide:wX,useClass:bF,deps:[Zi,CF,bO]},{provide:bF,useClass:bF,deps:[Zi,CF,bO]}],RY=[{provide:GP,useValue:"root"},{provide:ny,useFactory:function NEe(){return new ny},deps:[]},{provide:NO,useClass:AEe,multi:!0,deps:[Dr,Zi,_s]},{provide:NO,useClass:REe,multi:!0,deps:[Dr]},{provide:VO,useClass:VO,deps:[LO,$C,RC]},{provide:ty,useExisting:VO},{provide:xY,useExisting:$C},{provide:$C,useClass:$C,deps:[Dr]},{provide:LO,useClass:LO,deps:[NO,Zi]},{provide:mY,useClass:wEe,deps:[]},[]];let FY=(()=>{class c{constructor(a){}static withServerTransition(a){return{ngModule:c,providers:[{provide:RC,useValue:a.appId},{provide:bY,useExisting:RC},CEe]}}}return c.\u0275fac=function(a){return new(a||c)(Ae(IY,12))},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({providers:[...RY,...PY],imports:[Oi,Mke]}),c})(),NY=(()=>{class c{constructor(a){this._doc=a}getTitle(){return this._doc.title}setTitle(a){this._doc.title=a||""}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr))},c.\u0275prov=qe({token:c,factory:function(a){let h=null;return h=a?new a:function zEe(){return new NY(Ae(Dr))}(),h},providedIn:"root"}),c})();function $n(...c){return Ys(c,Ub(c))}"undefined"!=typeof window&&window;class Jr extends yt{constructor(l){super(),this._value=l}get value(){return this.getValue()}_subscribe(l){const a=super._subscribe(l);return!a.closed&&l.next(this._value),a}getValue(){const{hasError:l,thrownError:a,_value:h}=this;if(l)throw a;return this._throwIfClosed(),h}next(l){super.next(this._value=l)}}const zO=we(c=>function(){c(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:qEe}=Array,{getPrototypeOf:ZEe,prototype:XEe,keys:YEe}=Object;function VY(c){if(1===c.length){const l=c[0];if(qEe(l))return{args:l,keys:null};if(function KEe(c){return c&&"object"==typeof c&&ZEe(c)===XEe}(l)){const a=YEe(l);return{args:a.map(h=>l[h]),keys:a}}}return{args:c,keys:null}}const{isArray:JEe}=Array;function eN(c){return an(l=>function eAe(c,l){return JEe(l)?c(...l):c(l)}(c,l))}function zY(c,l){return c.reduce((a,h,d)=>(a[h]=l[d],a),{})}function UO(...c){const l=Ub(c),a=aG(c),{args:h,keys:d}=VY(c);if(0===h.length)return Ys([],l);const f=new En(function tAe(c,l,a=Tt){return h=>{UY(l,()=>{const{length:d}=c,f=new Array(d);let p=d,g=d;for(let m=0;m<d;m++)UY(l,()=>{const v=Ys(c[m],l);let y=!1;v.subscribe(new Li(h,_=>{f[m]=_,y||(y=!0,g--),g||h.next(a(f.slice()))},()=>{--p||h.complete()}))},h)},h)}}(h,l,d?p=>zY(d,p):Tt));return a?f.pipe(eN(a)):f}function UY(c,l,a){c?tf(a,c,l):l()}function tN(...c){return function nAe(){return Pv(1)}()(Ys(c,Ub(c)))}function HY(c){return new En(l=>{iu(c()).subscribe(l)})}function Ty(c,l){const a=de(c)?c:()=>c,h=d=>d.error(a());return new En(l?d=>l.schedule(h,0,d):h)}function nN(){return xi((c,l)=>{let a=null;c._refCount++;const h=new Li(l,void 0,void 0,void 0,()=>{if(!c||c._refCount<=0||0<--c._refCount)return void(a=null);const d=c._connection,f=a;a=null,d&&(!f||d===f)&&d.unsubscribe(),l.unsubscribe()});c.subscribe(h),h.closed||(a=c.connect())})}class $Y extends En{constructor(l,a){super(),this.source=l,this.subjectFactory=a,this._subject=null,this._refCount=0,this._connection=null,sn(l)&&(this.lift=l.lift)}_subscribe(l){return this.getSubject().subscribe(l)}getSubject(){const l=this._subject;return(!l||l.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:l}=this;this._subject=this._connection=null,null==l||l.unsubscribe()}connect(){let l=this._connection;if(!l){l=this._connection=new Ne;const a=this.getSubject();l.add(this.source.subscribe(new Li(a,void 0,()=>{this._teardown(),a.complete()},h=>{this._teardown(),a.error(h)},()=>this._teardown()))),l.closed&&(this._connection=null,l=Ne.EMPTY)}return l}refCount(){return nN()(this)}}function Yu(c,l){return xi((a,h)=>{let d=null,f=0,p=!1;const g=()=>p&&!d&&h.complete();a.subscribe(new Li(h,m=>{null==d||d.unsubscribe();let v=0;const y=f++;iu(c(m,y)).subscribe(d=new Li(h,_=>h.next(l?l(m,_,y,v++):_),()=>{d=null,g()}))},()=>{p=!0,g()}))})}function WC(...c){const l=Ub(c);return xi((a,h)=>{(l?tN(c,a,l):tN(c,a)).subscribe(h)})}function es(c,l){return xi((a,h)=>{let d=0;a.subscribe(new Li(h,f=>c.call(l,f,d++)&&h.next(f)))})}function HO(c){return xi((l,a)=>{let h=!1;l.subscribe(new Li(a,d=>{h=!0,a.next(d)},()=>{h||a.next(c),a.complete()}))})}function WY(c=iAe){return xi((l,a)=>{let h=!1;l.subscribe(new Li(a,d=>{h=!0,a.next(d)},()=>h?a.complete():a.error(c())))})}function iAe(){return new zO}function yf(c,l){const a=arguments.length>=2;return h=>h.pipe(c?es((d,f)=>c(d,f,h)):Tt,bp(1),a?HO(l):WY(()=>new zO))}function Pp(c,l){return de(l)?Ho(c,l,1):Ho(c,1)}function Qo(c,l,a){const h=de(c)||l||a?{next:c,error:l,complete:a}:c;return h?xi((d,f)=>{var p;null===(p=h.subscribe)||void 0===p||p.call(h);let g=!0;d.subscribe(new Li(f,m=>{var v;null===(v=h.next)||void 0===v||v.call(h,m),f.next(m)},()=>{var m;g=!1,null===(m=h.complete)||void 0===m||m.call(h),f.complete()},m=>{var v;g=!1,null===(v=h.error)||void 0===v||v.call(h,m),f.error(m)},()=>{var m,v;g&&(null===(m=h.unsubscribe)||void 0===m||m.call(h)),null===(v=h.finalize)||void 0===v||v.call(h)}))}):Tt}function hr(c){return xi((l,a)=>{let f,h=null,d=!1;h=l.subscribe(new Li(a,void 0,void 0,p=>{f=iu(c(p,hr(c)(l))),h?(h.unsubscribe(),h=null,f.subscribe(a)):d=!0})),d&&(h.unsubscribe(),h=null,f.subscribe(a))})}function rAe(c,l,a,h,d){return(f,p)=>{let g=a,m=l,v=0;f.subscribe(new Li(p,y=>{const _=v++;m=g?c(m,y,_):(g=!0,y),h&&p.next(m)},d&&(()=>{g&&p.next(m),p.complete()})))}}function GY(c,l){return xi(rAe(c,l,arguments.length>=2,!0))}function iN(c){return c<=0?()=>nf:xi((l,a)=>{let h=[];l.subscribe(new Li(a,d=>{h.push(d),c<h.length&&h.shift()},()=>{for(const d of h)a.next(d);a.complete()},void 0,()=>{h=null}))})}function QY(c,l){const a=arguments.length>=2;return h=>h.pipe(c?es((d,f)=>c(d,f,h)):Tt,iN(1),a?HO(l):WY(()=>new zO))}function rN(c){return xi((l,a)=>{try{l.subscribe(a)}finally{a.add(c)}})}const Wi="primary",GC=Symbol("RouteTitle");class aAe{constructor(l){this.params=l||{}}has(l){return Object.prototype.hasOwnProperty.call(this.params,l)}get(l){if(this.has(l)){const a=this.params[l];return Array.isArray(a)?a[0]:a}return null}getAll(l){if(this.has(l)){const a=this.params[l];return Array.isArray(a)?a:[a]}return[]}get keys(){return Object.keys(this.params)}}function Oy(c){return new aAe(c)}function lAe(c,l,a){const h=a.path.split("/");if(h.length>c.length||"full"===a.pathMatch&&(l.hasChildren()||h.length<c.length))return null;const d={};for(let f=0;f<h.length;f++){const p=h[f],g=c[f];if(p.startsWith(":"))d[p.substring(1)]=g;else if(p!==g.path)return null}return{consumed:c.slice(0,h.length),posParams:d}}function Zh(c,l){const a=c?Object.keys(c):void 0,h=l?Object.keys(l):void 0;if(!a||!h||a.length!=h.length)return!1;let d;for(let f=0;f<a.length;f++)if(d=a[f],!jY(c[d],l[d]))return!1;return!0}function jY(c,l){if(Array.isArray(c)&&Array.isArray(l)){if(c.length!==l.length)return!1;const a=[...c].sort(),h=[...l].sort();return a.every((d,f)=>h[f]===d)}return c===l}function qY(c){return Array.prototype.concat.apply([],c)}function ZY(c){return c.length>0?c[c.length-1]:null}function oa(c,l){for(const a in c)c.hasOwnProperty(a)&&l(c[a],a)}function Rp(c){return GR(c)?c:_C(c)?Ys(Promise.resolve(c)):$n(c)}const hAe={exact:function KY(c,l,a){if(!Mm(c.segments,l.segments)||!$O(c.segments,l.segments,a)||c.numberOfChildren!==l.numberOfChildren)return!1;for(const h in l.children)if(!c.children[h]||!KY(c.children[h],l.children[h],a))return!1;return!0},subset:JY},XY={exact:function dAe(c,l){return Zh(c,l)},subset:function fAe(c,l){return Object.keys(l).length<=Object.keys(c).length&&Object.keys(l).every(a=>jY(c[a],l[a]))},ignored:()=>!0};function YY(c,l,a){return hAe[a.paths](c.root,l.root,a.matrixParams)&&XY[a.queryParams](c.queryParams,l.queryParams)&&!("exact"===a.fragment&&c.fragment!==l.fragment)}function JY(c,l,a){return eK(c,l,l.segments,a)}function eK(c,l,a,h){if(c.segments.length>a.length){const d=c.segments.slice(0,a.length);return!(!Mm(d,a)||l.hasChildren()||!$O(d,a,h))}if(c.segments.length===a.length){if(!Mm(c.segments,a)||!$O(c.segments,a,h))return!1;for(const d in l.children)if(!c.children[d]||!JY(c.children[d],l.children[d],h))return!1;return!0}{const d=a.slice(0,c.segments.length),f=a.slice(c.segments.length);return!!(Mm(c.segments,d)&&$O(c.segments,d,h)&&c.children[Wi])&&eK(c.children[Wi],l,f,h)}}function $O(c,l,a){return l.every((h,d)=>XY[a](c[d].parameters,h.parameters))}class km{constructor(l,a,h){this.root=l,this.queryParams=a,this.fragment=h}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oy(this.queryParams)),this._queryParamMap}toString(){return mAe.serialize(this)}}class Xi{constructor(l,a){this.segments=l,this.children=a,this.parent=null,oa(a,(h,d)=>h.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return WO(this)}}class QC{constructor(l,a){this.path=l,this.parameters=a}get parameterMap(){return this._parameterMap||(this._parameterMap=Oy(this.parameters)),this._parameterMap}toString(){return rK(this)}}function Mm(c,l){return c.length===l.length&&c.every((a,h)=>a.path===l[h].path)}let tK=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:function(){return new oN},providedIn:"root"}),c})();class oN{parse(l){const a=new TAe(l);return new km(a.parseRootSegment(),a.parseQueryParams(),a.parseFragment())}serialize(l){const a=`/${jC(l.root,!0)}`,h=function _Ae(c){const l=Object.keys(c).map(a=>{const h=c[a];return Array.isArray(h)?h.map(d=>`${GO(a)}=${GO(d)}`).join("&"):`${GO(a)}=${GO(h)}`}).filter(a=>!!a);return l.length?`?${l.join("&")}`:""}(l.queryParams);return`${a}${h}${"string"==typeof l.fragment?`#${function vAe(c){return encodeURI(c)}(l.fragment)}`:""}`}}const mAe=new oN;function WO(c){return c.segments.map(l=>rK(l)).join("/")}function jC(c,l){if(!c.hasChildren())return WO(c);if(l){const a=c.children[Wi]?jC(c.children[Wi],!1):"",h=[];return oa(c.children,(d,f)=>{f!==Wi&&h.push(`${f}:${jC(d,!1)}`)}),h.length>0?`${a}(${h.join("//")})`:a}{const a=function gAe(c,l){let a=[];return oa(c.children,(h,d)=>{d===Wi&&(a=a.concat(l(h,d)))}),oa(c.children,(h,d)=>{d!==Wi&&(a=a.concat(l(h,d)))}),a}(c,(h,d)=>d===Wi?[jC(c.children[Wi],!1)]:[`${d}:${jC(h,!1)}`]);return 1===Object.keys(c.children).length&&null!=c.children[Wi]?`${WO(c)}/${a[0]}`:`${WO(c)}/(${a.join("//")})`}}function nK(c){return encodeURIComponent(c).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function GO(c){return nK(c).replace(/%3B/gi,";")}function aN(c){return nK(c).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function QO(c){return decodeURIComponent(c)}function iK(c){return QO(c.replace(/\+/g,"%20"))}function rK(c){return`${aN(c.path)}${function yAe(c){return Object.keys(c).map(l=>`;${aN(l)}=${aN(c[l])}`).join("")}(c.parameters)}`}const bAe=/^[^\/()?;=#]+/;function jO(c){const l=c.match(bAe);return l?l[0]:""}const CAe=/^[^=?&#]+/,wAe=/^[^&#]+/;class TAe{constructor(l){this.url=l,this.remaining=l}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xi([],{}):new Xi([],this.parseChildren())}parseQueryParams(){const l={};if(this.consumeOptional("?"))do{this.parseQueryParam(l)}while(this.consumeOptional("&"));return l}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const l=[];for(this.peekStartsWith("(")||l.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),l.push(this.parseSegment());let a={};this.peekStartsWith("/(")&&(this.capture("/"),a=this.parseParens(!0));let h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(l.length>0||Object.keys(a).length>0)&&(h[Wi]=new Xi(l,a)),h}parseSegment(){const l=jO(this.remaining);if(""===l&&this.peekStartsWith(";"))throw new Et(4009,!1);return this.capture(l),new QC(QO(l),this.parseMatrixParams())}parseMatrixParams(){const l={};for(;this.consumeOptional(";");)this.parseParam(l);return l}parseParam(l){const a=jO(this.remaining);if(!a)return;this.capture(a);let h="";if(this.consumeOptional("=")){const d=jO(this.remaining);d&&(h=d,this.capture(h))}l[QO(a)]=QO(h)}parseQueryParam(l){const a=function xAe(c){const l=c.match(CAe);return l?l[0]:""}(this.remaining);if(!a)return;this.capture(a);let h="";if(this.consumeOptional("=")){const p=function SAe(c){const l=c.match(wAe);return l?l[0]:""}(this.remaining);p&&(h=p,this.capture(h))}const d=iK(a),f=iK(h);if(l.hasOwnProperty(d)){let p=l[d];Array.isArray(p)||(p=[p],l[d]=p),p.push(f)}else l[d]=f}parseParens(l){const a={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const h=jO(this.remaining),d=this.remaining[h.length];if("/"!==d&&")"!==d&&";"!==d)throw new Et(4010,!1);let f;h.indexOf(":")>-1?(f=h.slice(0,h.indexOf(":")),this.capture(f),this.capture(":")):l&&(f=Wi);const p=this.parseChildren();a[f]=1===Object.keys(p).length?p[Wi]:new Xi([],p),this.consumeOptional("//")}return a}peekStartsWith(l){return this.remaining.startsWith(l)}consumeOptional(l){return!!this.peekStartsWith(l)&&(this.remaining=this.remaining.substring(l.length),!0)}capture(l){if(!this.consumeOptional(l))throw new Et(4011,!1)}}function lN(c){return c.segments.length>0?new Xi([],{[Wi]:c}):c}function qO(c){const l={};for(const h of Object.keys(c.children)){const f=qO(c.children[h]);(f.segments.length>0||f.hasChildren())&&(l[h]=f)}return function OAe(c){if(1===c.numberOfChildren&&c.children[Wi]){const l=c.children[Wi];return new Xi(c.segments.concat(l.segments),l.children)}return c}(new Xi(c.segments,l))}function Em(c){return c instanceof km}function MAe(c,l,a,h,d){var f;if(0===a.length)return Dy(l.root,l.root,l.root,h,d);const g=function aK(c){if("string"==typeof c[0]&&1===c.length&&"/"===c[0])return new oK(!0,0,c);let l=0,a=!1;const h=c.reduce((d,f,p)=>{if("object"==typeof f&&null!=f){if(f.outlets){const g={};return oa(f.outlets,(m,v)=>{g[v]="string"==typeof m?m.split("/"):m}),[...d,{outlets:g}]}if(f.segmentPath)return[...d,f.segmentPath]}return"string"!=typeof f?[...d,f]:0===p?(f.split("/").forEach((g,m)=>{0==m&&"."===g||(0==m&&""===g?a=!0:".."===g?l++:""!=g&&d.push(g))}),d):[...d,f]},[]);return new oK(a,l,h)}(a);return g.toRoot()?Dy(l.root,l.root,new Xi([],{}),h,d):function m(y){var _;const b=function AAe(c,l,a,h){if(c.isAbsolute)return new ky(l.root,!0,0);if(-1===h)return new ky(a,a===l.root,0);return function lK(c,l,a){let h=c,d=l,f=a;for(;f>d;){if(f-=d,h=h.parent,!h)throw new Et(4005,!1);d=h.segments.length}return new ky(h,!1,d-f)}(a,h+(qC(c.commands[0])?0:1),c.numberOfDoubleDots)}(g,l,null===(_=c.snapshot)||void 0===_?void 0:_._urlSegment,y),C=b.processChildren?XC(b.segmentGroup,b.index,g.commands):uN(b.segmentGroup,b.index,g.commands);return Dy(l.root,b.segmentGroup,C,h,d)}(null===(f=c.snapshot)||void 0===f?void 0:f._lastPathIndex)}function qC(c){return"object"==typeof c&&null!=c&&!c.outlets&&!c.segmentPath}function ZC(c){return"object"==typeof c&&null!=c&&c.outlets}function Dy(c,l,a,h,d){let p,f={};h&&oa(h,(m,v)=>{f[v]=Array.isArray(m)?m.map(y=>`${y}`):`${m}`}),p=c===l?a:sK(c,l,a);const g=lN(qO(p));return new km(g,f,d)}function sK(c,l,a){const h={};return oa(c.children,(d,f)=>{h[f]=d===l?a:sK(d,l,a)}),new Xi(c.segments,h)}class oK{constructor(l,a,h){if(this.isAbsolute=l,this.numberOfDoubleDots=a,this.commands=h,l&&h.length>0&&qC(h[0]))throw new Et(4003,!1);const d=h.find(ZC);if(d&&d!==ZY(h))throw new Et(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ky{constructor(l,a,h){this.segmentGroup=l,this.processChildren=a,this.index=h}}function uN(c,l,a){if(c||(c=new Xi([],{})),0===c.segments.length&&c.hasChildren())return XC(c,l,a);const h=function PAe(c,l,a){let h=0,d=l;const f={match:!1,pathIndex:0,commandIndex:0};for(;d<c.segments.length;){if(h>=a.length)return f;const p=c.segments[d],g=a[h];if(ZC(g))break;const m=`${g}`,v=h<a.length-1?a[h+1]:null;if(d>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!uK(m,v,p))return f;h+=2}else{if(!uK(m,{},p))return f;h++}d++}return{match:!0,pathIndex:d,commandIndex:h}}(c,l,a),d=a.slice(h.commandIndex);if(h.match&&h.pathIndex<c.segments.length){const f=new Xi(c.segments.slice(0,h.pathIndex),{});return f.children[Wi]=new Xi(c.segments.slice(h.pathIndex),c.children),XC(f,0,d)}return h.match&&0===d.length?new Xi(c.segments,{}):h.match&&!c.hasChildren()?hN(c,l,a):h.match?XC(c,0,d):hN(c,l,a)}function XC(c,l,a){if(0===a.length)return new Xi(c.segments,{});{const h=function IAe(c){return ZC(c[0])?c[0].outlets:{[Wi]:c}}(a),d={};return oa(h,(f,p)=>{"string"==typeof f&&(f=[f]),null!==f&&(d[p]=uN(c.children[p],l,f))}),oa(c.children,(f,p)=>{void 0===h[p]&&(d[p]=f)}),new Xi(c.segments,d)}}function hN(c,l,a){const h=c.segments.slice(0,l);let d=0;for(;d<a.length;){const f=a[d];if(ZC(f)){const m=RAe(f.outlets);return new Xi(h,m)}if(0===d&&qC(a[0])){h.push(new QC(c.segments[l].path,cK(a[0]))),d++;continue}const p=ZC(f)?f.outlets[Wi]:`${f}`,g=d<a.length-1?a[d+1]:null;p&&g&&qC(g)?(h.push(new QC(p,cK(g))),d+=2):(h.push(new QC(p,{})),d++)}return new Xi(h,{})}function RAe(c){const l={};return oa(c,(a,h)=>{"string"==typeof a&&(a=[a]),null!==a&&(l[h]=hN(new Xi([],{}),0,a))}),l}function cK(c){const l={};return oa(c,(a,h)=>l[h]=`${a}`),l}function uK(c,l,a){return c==a.path&&Zh(l,a.parameters)}class _f{constructor(l,a){this.id=l,this.url=a}}class dN extends _f{constructor(l,a,h="imperative",d=null){super(l,a),this.type=0,this.navigationTrigger=h,this.restoredState=d}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Am extends _f{constructor(l,a,h){super(l,a),this.urlAfterRedirects=h,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ZO extends _f{constructor(l,a,h,d){super(l,a),this.reason=h,this.code=d,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hK extends _f{constructor(l,a,h,d){super(l,a),this.error=h,this.target=d,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FAe extends _f{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NAe extends _f{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LAe extends _f{constructor(l,a,h,d,f){super(l,a),this.urlAfterRedirects=h,this.state=d,this.shouldActivate=f,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class BAe extends _f{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VAe extends _f{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zAe{constructor(l){this.route=l,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class UAe{constructor(l){this.route=l,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HAe{constructor(l){this.snapshot=l,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $Ae{constructor(l){this.snapshot=l,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WAe{constructor(l){this.snapshot=l,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GAe{constructor(l){this.snapshot=l,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dK{constructor(l,a,h){this.routerEvent=l,this.position=a,this.anchor=h,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class fK{constructor(l){this._root=l}get root(){return this._root.value}parent(l){const a=this.pathFromRoot(l);return a.length>1?a[a.length-2]:null}children(l){const a=fN(l,this._root);return a?a.children.map(h=>h.value):[]}firstChild(l){const a=fN(l,this._root);return a&&a.children.length>0?a.children[0].value:null}siblings(l){const a=pN(l,this._root);return a.length<2?[]:a[a.length-2].children.map(d=>d.value).filter(d=>d!==l)}pathFromRoot(l){return pN(l,this._root).map(a=>a.value)}}function fN(c,l){if(c===l.value)return l;for(const a of l.children){const h=fN(c,a);if(h)return h}return null}function pN(c,l){if(c===l.value)return[l];for(const a of l.children){const h=pN(c,a);if(h.length)return h.unshift(l),h}return[]}class bf{constructor(l,a){this.value=l,this.children=a}toString(){return`TreeNode(${this.value})`}}function My(c){const l={};return c&&c.children.forEach(a=>l[a.value.outlet]=a),l}class pK extends fK{constructor(l,a){super(l),this.snapshot=a,gN(this,l)}toString(){return this.snapshot.toString()}}function gK(c,l){const a=function jAe(c,l){const p=new XO([],{},{},"",{},Wi,l,null,c.root,-1,{});return new vK("",new bf(p,[]))}(c,l),h=new Jr([new QC("",{})]),d=new Jr({}),f=new Jr({}),p=new Jr({}),g=new Jr(""),m=new Im(h,d,p,g,f,Wi,l,a.root);return m.snapshot=a.root,new pK(new bf(m,[]),a)}class Im{constructor(l,a,h,d,f,p,g,m){var v,y;this.url=l,this.params=a,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=p,this.component=g,this.title=null!==(y=null===(v=this.data)||void 0===v?void 0:v.pipe(an(_=>_[GC])))&&void 0!==y?y:$n(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(an(l=>Oy(l)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(an(l=>Oy(l)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mK(c,l="emptyOnly"){const a=c.pathFromRoot;let h=0;if("always"!==l)for(h=a.length-1;h>=1;){const d=a[h],f=a[h-1];if(d.routeConfig&&""===d.routeConfig.path)h--;else{if(f.component)break;h--}}return function qAe(c){return c.reduce((l,a)=>{var h;return{params:Object.assign(Object.assign({},l.params),a.params),data:Object.assign(Object.assign({},l.data),a.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},a.data),l.resolve),null===(h=a.routeConfig)||void 0===h?void 0:h.data),a._resolvedData)}},{params:{},data:{},resolve:{}})}(a.slice(h))}class XO{constructor(l,a,h,d,f,p,g,m,v,y,_,b){var C;this.url=l,this.params=a,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=p,this.component=g,this.title=null===(C=this.data)||void 0===C?void 0:C[GC],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=y,this._correctedLastPathIndex=null!=b?b:y,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(h=>h.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vK extends fK{constructor(l,a){super(a),this.url=l,gN(this,a)}toString(){return yK(this._root)}}function gN(c,l){l.value._routerState=c,l.children.forEach(a=>gN(c,a))}function yK(c){const l=c.children.length>0?` { ${c.children.map(yK).join(", ")} } `:"";return`${c.value}${l}`}function mN(c){if(c.snapshot){const l=c.snapshot,a=c._futureSnapshot;c.snapshot=a,Zh(l.queryParams,a.queryParams)||c.queryParams.next(a.queryParams),l.fragment!==a.fragment&&c.fragment.next(a.fragment),Zh(l.params,a.params)||c.params.next(a.params),function cAe(c,l){if(c.length!==l.length)return!1;for(let a=0;a<c.length;++a)if(!Zh(c[a],l[a]))return!1;return!0}(l.url,a.url)||c.url.next(a.url),Zh(l.data,a.data)||c.data.next(a.data)}else c.snapshot=c._futureSnapshot,c.data.next(c._futureSnapshot.data)}function vN(c,l){const a=Zh(c.params,l.params)&&function pAe(c,l){return Mm(c,l)&&c.every((a,h)=>Zh(a.parameters,l[h].parameters))}(c.url,l.url);return a&&!(!c.parent!=!l.parent)&&(!c.parent||vN(c.parent,l.parent))}function YC(c,l,a){if(a&&c.shouldReuseRoute(l.value,a.value.snapshot)){const h=a.value;h._futureSnapshot=l.value;const d=function XAe(c,l,a){return l.children.map(h=>{for(const d of a.children)if(c.shouldReuseRoute(h.value,d.value.snapshot))return YC(c,h,d);return YC(c,h)})}(c,l,a);return new bf(h,d)}{if(c.shouldAttach(l.value)){const f=c.retrieve(l.value);if(null!==f){const p=f.route;return p.value._futureSnapshot=l.value,p.children=l.children.map(g=>YC(c,g)),p}}const h=function YAe(c){return new Im(new Jr(c.url),new Jr(c.params),new Jr(c.queryParams),new Jr(c.fragment),new Jr(c.data),c.outlet,c.component,c)}(l.value),d=l.children.map(f=>YC(c,f));return new bf(h,d)}}const yN="ngNavigationCancelingError";function _K(c,l){const{redirectTo:a,navigationBehaviorOptions:h}=Em(l)?{redirectTo:l,navigationBehaviorOptions:void 0}:l,d=bK(!1,0,l);return d.url=a,d.navigationBehaviorOptions=h,d}function bK(c,l,a){const h=new Error("NavigationCancelingError: "+(c||""));return h[yN]=!0,h.cancellationCode=l,a&&(h.url=a),h}function CK(c){return xK(c)&&Em(c.url)}function xK(c){return c&&c[yN]}class KAe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new KC,this.attachRef=null}}let KC=(()=>{class c{constructor(){this.contexts=new Map}onChildOutletCreated(a,h){const d=this.getOrCreateContext(a);d.outlet=h,this.contexts.set(a,d)}onChildOutletDestroyed(a){const h=this.getContext(a);h&&(h.outlet=null,h.attachRef=null)}onOutletDeactivated(){const a=this.contexts;return this.contexts=new Map,a}onOutletReAttached(a){this.contexts=a}getOrCreateContext(a){let h=this.getContext(a);return h||(h=new KAe,this.contexts.set(a,h)),h}getContext(a){return this.contexts.get(a)||null}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const YO=!1;let _N=(()=>{class c{constructor(a,h,d,f,p){this.parentContexts=a,this.location=h,this.changeDetector=f,this.environmentInjector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new wt,this.deactivateEvents=new wt,this.attachEvents=new wt,this.detachEvents=new wt,this.name=d||Wi,a.onChildOutletCreated(this.name,this)}ngOnDestroy(){var a;(null===(a=this.parentContexts.getContext(this.name))||void 0===a?void 0:a.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const a=this.parentContexts.getContext(this.name);a&&a.route&&(a.attachRef?this.attach(a.attachRef,a.route):this.activateWith(a.route,a.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Et(4012,YO);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Et(4012,YO);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Et(4012,YO);this.location.detach();const a=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(a.instance),a}attach(a,h){this.activated=a,this._activatedRoute=h,this.location.insert(a.hostView),this.attachEvents.emit(a.instance)}deactivate(){if(this.activated){const a=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(a)}}activateWith(a,h){if(this.isActivated)throw new Et(4013,YO);this._activatedRoute=a;const d=this.location,p=a._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,m=new JAe(a,g,d.injector);if(h&&function eIe(c){return!!c.resolveComponentFactory}(h)){const v=h.resolveComponentFactory(p);this.activated=d.createComponent(v,d.length,m)}else this.activated=d.createComponent(p,{index:d.length,injector:m,environmentInjector:null!=h?h:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return c.\u0275fac=function(a){return new(a||c)(B(KC),B(Vi),Wv("name"),B(sa),B(kp))},c.\u0275dir=bt({type:c,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),c})();class JAe{constructor(l,a,h){this.route=l,this.childContexts=a,this.parent=h}get(l,a){return l===Im?this.route:l===KC?this.childContexts:this.parent.get(l,a)}}let bN=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["ng-component"]],standalone:!0,features:[MZ],decls:1,vars:0,template:function(a,h){1&a&&ue(0,"router-outlet")},dependencies:[_N],encapsulation:2}),c})();function wK(c,l){var a;return c.providers&&!c._injector&&(c._injector=fO(c.providers,l,`Route: ${c.path}`)),null!==(a=c._injector)&&void 0!==a?a:l}function xN(c){const l=c.children&&c.children.map(xN),a=l?Object.assign(Object.assign({},c),{children:l}):Object.assign({},c);return!a.component&&!a.loadComponent&&(l||a.loadChildren)&&a.outlet&&a.outlet!==Wi&&(a.component=bN),a}function du(c){return c.outlet||Wi}function SK(c,l){const a=c.filter(h=>du(h)===l);return a.push(...c.filter(h=>du(h)!==l)),a}function JC(c){var l;if(!c)return null;if(null!==(l=c.routeConfig)&&void 0!==l&&l._injector)return c.routeConfig._injector;for(let a=c.parent;a;a=a.parent){const h=a.routeConfig;if(null!=h&&h._loadedInjector)return h._loadedInjector;if(null!=h&&h._injector)return h._injector}return null}class sIe{constructor(l,a,h,d){this.routeReuseStrategy=l,this.futureState=a,this.currState=h,this.forwardEvent=d}activate(l){const a=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(a,h,l),mN(this.futureState.root),this.activateChildRoutes(a,h,l)}deactivateChildRoutes(l,a,h){const d=My(a);l.children.forEach(f=>{const p=f.value.outlet;this.deactivateRoutes(f,d[p],h),delete d[p]}),oa(d,(f,p)=>{this.deactivateRouteAndItsChildren(f,h)})}deactivateRoutes(l,a,h){const d=l.value,f=a?a.value:null;if(d===f)if(d.component){const p=h.getContext(d.outlet);p&&this.deactivateChildRoutes(l,a,p.children)}else this.deactivateChildRoutes(l,a,h);else f&&this.deactivateRouteAndItsChildren(a,h)}deactivateRouteAndItsChildren(l,a){l.value.component&&this.routeReuseStrategy.shouldDetach(l.value.snapshot)?this.detachAndStoreRouteSubtree(l,a):this.deactivateRouteAndOutlet(l,a)}detachAndStoreRouteSubtree(l,a){const h=a.getContext(l.value.outlet),d=h&&l.value.component?h.children:a,f=My(l);for(const p of Object.keys(f))this.deactivateRouteAndItsChildren(f[p],d);if(h&&h.outlet){const p=h.outlet.detach(),g=h.children.onOutletDeactivated();this.routeReuseStrategy.store(l.value.snapshot,{componentRef:p,route:l,contexts:g})}}deactivateRouteAndOutlet(l,a){const h=a.getContext(l.value.outlet),d=h&&l.value.component?h.children:a,f=My(l);for(const p of Object.keys(f))this.deactivateRouteAndItsChildren(f[p],d);h&&h.outlet&&(h.outlet.deactivate(),h.children.onOutletDeactivated(),h.attachRef=null,h.resolver=null,h.route=null)}activateChildRoutes(l,a,h){const d=My(a);l.children.forEach(f=>{this.activateRoutes(f,d[f.value.outlet],h),this.forwardEvent(new GAe(f.value.snapshot))}),l.children.length&&this.forwardEvent(new $Ae(l.value.snapshot))}activateRoutes(l,a,h){var d;const f=l.value,p=a?a.value:null;if(mN(f),f===p)if(f.component){const g=h.getOrCreateContext(f.outlet);this.activateChildRoutes(l,a,g.children)}else this.activateChildRoutes(l,a,h);else if(f.component){const g=h.getOrCreateContext(f.outlet);if(this.routeReuseStrategy.shouldAttach(f.snapshot)){const m=this.routeReuseStrategy.retrieve(f.snapshot);this.routeReuseStrategy.store(f.snapshot,null),g.children.onOutletReAttached(m.contexts),g.attachRef=m.componentRef,g.route=m.route.value,g.outlet&&g.outlet.attach(m.componentRef,m.route.value),mN(m.route.value),this.activateChildRoutes(l,null,g.children)}else{const m=JC(f.snapshot),v=null!==(d=null==m?void 0:m.get(Mp))&&void 0!==d?d:null;g.attachRef=null,g.route=f,g.resolver=v,g.injector=m,g.outlet&&g.outlet.activateWith(f,g.injector),this.activateChildRoutes(l,null,g.children)}}else this.activateChildRoutes(l,null,h)}}class TK{constructor(l){this.path=l,this.route=this.path[this.path.length-1]}}class KO{constructor(l,a){this.component=l,this.route=a}}function oIe(c,l,a){const h=c._root;return ex(h,l?l._root:null,a,[h.value])}function Ey(c,l){const a=Symbol(),h=l.get(c,a);return h===a?"function"!=typeof c||function ECe(c){return null!==pT(c)}(c)?l.get(c):c:h}function ex(c,l,a,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=My(l);return c.children.forEach(p=>{(function lIe(c,l,a,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=c.value,p=l?l.value:null,g=a?a.getContext(c.value.outlet):null;if(p&&f.routeConfig===p.routeConfig){const m=function cIe(c,l,a){if("function"==typeof a)return a(c,l);switch(a){case"pathParamsChange":return!Mm(c.url,l.url);case"pathParamsOrQueryParamsChange":return!Mm(c.url,l.url)||!Zh(c.queryParams,l.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vN(c,l)||!Zh(c.queryParams,l.queryParams);default:return!vN(c,l)}}(p,f,f.routeConfig.runGuardsAndResolvers);m?d.canActivateChecks.push(new TK(h)):(f.data=p.data,f._resolvedData=p._resolvedData),ex(c,l,f.component?g?g.children:null:a,h,d),m&&g&&g.outlet&&g.outlet.isActivated&&d.canDeactivateChecks.push(new KO(g.outlet.component,p))}else p&&tx(l,g,d),d.canActivateChecks.push(new TK(h)),ex(c,null,f.component?g?g.children:null:a,h,d)})(p,f[p.value.outlet],a,h.concat([p.value]),d),delete f[p.value.outlet]}),oa(f,(p,g)=>tx(p,a.getContext(g),d)),d}function tx(c,l,a){const h=My(c),d=c.value;oa(h,(f,p)=>{tx(f,d.component?l?l.children.getContext(p):null:l,a)}),a.canDeactivateChecks.push(new KO(d.component&&l&&l.outlet&&l.outlet.isActivated?l.outlet.component:null,d))}function nx(c){return"function"==typeof c}function wN(c){return c instanceof zO||"EmptyError"===(null==c?void 0:c.name)}const JO=Symbol("INITIAL_VALUE");function Ay(){return Yu(c=>UO(c.map(l=>l.pipe(bp(1),WC(JO)))).pipe(an(l=>{for(const a of l)if(!0!==a){if(a===JO)return JO;if(!1===a||a instanceof km)return a}return!0}),es(l=>l!==JO),bp(1)))}function OK(c){return function yi(...c){return Wt(c)}(Qo(l=>{if(Em(l))throw _K(0,l)}),an(l=>!0===l))}const SN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function DK(c,l,a,h,d){const f=TN(c,l,a);return f.matched?function OIe(c,l,a,h){const d=l.canMatch;return d&&0!==d.length?$n(d.map(p=>{const g=Ey(p,c);return Rp(function gIe(c){return c&&nx(c.canMatch)}(g)?g.canMatch(l,a):c.runInContext(()=>g(l,a)))})).pipe(Ay(),OK()):$n(!0)}(h=wK(l,h),l,a).pipe(an(p=>!0===p?f:Object.assign({},SN))):$n(f)}function TN(c,l,a){var h;if(""===l.path)return"full"===l.pathMatch&&(c.hasChildren()||a.length>0)?Object.assign({},SN):{matched:!0,consumedSegments:[],remainingSegments:a,parameters:{},positionalParamSegments:{}};const f=(l.matcher||lAe)(a,c,l);if(!f)return Object.assign({},SN);const p={};oa(f.posParams,(m,v)=>{p[v]=m.path});const g=f.consumed.length>0?Object.assign(Object.assign({},p),f.consumed[f.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:f.consumed,remainingSegments:a.slice(f.consumed.length),parameters:g,positionalParamSegments:null!==(h=f.posParams)&&void 0!==h?h:{}}}function eD(c,l,a,h,d="corrected"){if(a.length>0&&function MIe(c,l,a){return a.some(h=>tD(c,l,h)&&du(h)!==Wi)}(c,a,h)){const p=new Xi(l,function kIe(c,l,a,h){const d={};d[Wi]=h,h._sourceSegment=c,h._segmentIndexShift=l.length;for(const f of a)if(""===f.path&&du(f)!==Wi){const p=new Xi([],{});p._sourceSegment=c,p._segmentIndexShift=l.length,d[du(f)]=p}return d}(c,l,h,new Xi(a,c.children)));return p._sourceSegment=c,p._segmentIndexShift=l.length,{segmentGroup:p,slicedSegments:[]}}if(0===a.length&&function EIe(c,l,a){return a.some(h=>tD(c,l,h))}(c,a,h)){const p=new Xi(c.segments,function DIe(c,l,a,h,d,f){const p={};for(const g of h)if(tD(c,a,g)&&!d[du(g)]){const m=new Xi([],{});m._sourceSegment=c,m._segmentIndexShift="legacy"===f?c.segments.length:l.length,p[du(g)]=m}return Object.assign(Object.assign({},d),p)}(c,l,a,h,c.children,d));return p._sourceSegment=c,p._segmentIndexShift=l.length,{segmentGroup:p,slicedSegments:a}}const f=new Xi(c.segments,c.children);return f._sourceSegment=c,f._segmentIndexShift=l.length,{segmentGroup:f,slicedSegments:a}}function tD(c,l,a){return(!(c.hasChildren()||l.length>0)||"full"!==a.pathMatch)&&""===a.path}function kK(c,l,a,h){return!!(du(c)===h||h!==Wi&&tD(l,a,c))&&("**"===c.path||TN(l,c,a).matched)}function MK(c,l,a){return 0===l.length&&!c.children[a]}const nD=!1;class iD{constructor(l){this.segmentGroup=l||null}}class EK{constructor(l){this.urlTree=l}}function ix(c){return Ty(new iD(c))}function AK(c){return Ty(new EK(c))}class RIe{constructor(l,a,h,d,f){this.injector=l,this.configLoader=a,this.urlSerializer=h,this.urlTree=d,this.config=f,this.allowRedirects=!0}apply(){const l=eD(this.urlTree.root,[],[],this.config).segmentGroup,a=new Xi(l.segments,l.children);return this.expandSegmentGroup(this.injector,this.config,a,Wi).pipe(an(f=>this.createUrlTree(qO(f),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hr(f=>{if(f instanceof EK)return this.allowRedirects=!1,this.match(f.urlTree);throw f instanceof iD?this.noMatchError(f):f}))}match(l){return this.expandSegmentGroup(this.injector,this.config,l.root,Wi).pipe(an(d=>this.createUrlTree(qO(d),l.queryParams,l.fragment))).pipe(hr(d=>{throw d instanceof iD?this.noMatchError(d):d}))}noMatchError(l){return new Et(4002,nD)}createUrlTree(l,a,h){const d=lN(l);return new km(d,a,h)}expandSegmentGroup(l,a,h,d){return 0===h.segments.length&&h.hasChildren()?this.expandChildren(l,a,h).pipe(an(f=>new Xi([],f))):this.expandSegment(l,h,a,h.segments,d,!0)}expandChildren(l,a,h){const d=[];for(const f of Object.keys(h.children))"primary"===f?d.unshift(f):d.push(f);return Ys(d).pipe(Pp(f=>{const p=h.children[f],g=SK(a,f);return this.expandSegmentGroup(l,g,p,f).pipe(an(m=>({segment:m,outlet:f})))}),GY((f,p)=>(f[p.outlet]=p.segment,f),{}),QY())}expandSegment(l,a,h,d,f,p){return Ys(h).pipe(Pp(g=>this.expandSegmentAgainstRoute(l,a,h,g,d,f,p).pipe(hr(v=>{if(v instanceof iD)return $n(null);throw v}))),yf(g=>!!g),hr((g,m)=>{if(wN(g))return MK(a,d,f)?$n(new Xi([],{})):ix(a);throw g}))}expandSegmentAgainstRoute(l,a,h,d,f,p,g){return kK(d,a,f,p)?void 0===d.redirectTo?this.matchSegmentAgainstRoute(l,a,d,f,p):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(l,a,h,d,f,p):ix(a):ix(a)}expandSegmentAgainstRouteUsingRedirect(l,a,h,d,f,p){return"**"===d.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(l,h,d,p):this.expandRegularSegmentAgainstRouteUsingRedirect(l,a,h,d,f,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(l,a,h,d){const f=this.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?AK(f):this.lineralizeSegments(h,f).pipe(Ho(p=>{const g=new Xi(p,{});return this.expandSegment(l,g,a,p,d,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(l,a,h,d,f,p){const{matched:g,consumedSegments:m,remainingSegments:v,positionalParamSegments:y}=TN(a,d,f);if(!g)return ix(a);const _=this.applyRedirectCommands(m,d.redirectTo,y);return d.redirectTo.startsWith("/")?AK(_):this.lineralizeSegments(d,_).pipe(Ho(b=>this.expandSegment(l,a,h,b.concat(v),p,!1)))}matchSegmentAgainstRoute(l,a,h,d,f){return"**"===h.path?(l=wK(h,l),h.loadChildren?(h._loadedRoutes?$n({routes:h._loadedRoutes,injector:h._loadedInjector}):this.configLoader.loadChildren(l,h)).pipe(an(g=>(h._loadedRoutes=g.routes,h._loadedInjector=g.injector,new Xi(d,{})))):$n(new Xi(d,{}))):DK(a,h,d,l).pipe(Yu(({matched:p,consumedSegments:g,remainingSegments:m})=>{var v;return p?(l=null!==(v=h._injector)&&void 0!==v?v:l,this.getChildConfig(l,h,d).pipe(Ho(_=>{var b;const C=null!==(b=_.injector)&&void 0!==b?b:l,x=_.routes,{segmentGroup:S,slicedSegments:w}=eD(a,g,m,x),T=new Xi(S.segments,S.children);if(0===w.length&&T.hasChildren())return this.expandChildren(C,x,T).pipe(an(M=>new Xi(g,M)));if(0===x.length&&0===w.length)return $n(new Xi(g,{}));const O=du(h)===f;return this.expandSegment(C,T,x,w,O?Wi:f,!0).pipe(an(D=>new Xi(g.concat(D.segments),D.children)))}))):ix(a)}))}getChildConfig(l,a,h){return a.children?$n({routes:a.children,injector:l}):a.loadChildren?void 0!==a._loadedRoutes?$n({routes:a._loadedRoutes,injector:a._loadedInjector}):function TIe(c,l,a,h){const d=l.canLoad;return void 0===d||0===d.length?$n(!0):$n(d.map(p=>{const g=Ey(p,c);return Rp(function hIe(c){return c&&nx(c.canLoad)}(g)?g.canLoad(l,a):c.runInContext(()=>g(l,a)))})).pipe(Ay(),OK())}(l,a,h).pipe(Ho(d=>d?this.configLoader.loadChildren(l,a).pipe(Qo(f=>{a._loadedRoutes=f.routes,a._loadedInjector=f.injector})):function IIe(c){return Ty(bK(nD,3))}())):$n({routes:[],injector:l})}lineralizeSegments(l,a){let h=[],d=a.root;for(;;){if(h=h.concat(d.segments),0===d.numberOfChildren)return $n(h);if(d.numberOfChildren>1||!d.children[Wi])return Ty(new Et(4e3,nD));d=d.children[Wi]}}applyRedirectCommands(l,a,h){return this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),l,h)}applyRedirectCreateUrlTree(l,a,h,d){const f=this.createSegmentGroup(l,a.root,h,d);return new km(f,this.createQueryParams(a.queryParams,this.urlTree.queryParams),a.fragment)}createQueryParams(l,a){const h={};return oa(l,(d,f)=>{if("string"==typeof d&&d.startsWith(":")){const g=d.substring(1);h[f]=a[g]}else h[f]=d}),h}createSegmentGroup(l,a,h,d){const f=this.createSegments(l,a.segments,h,d);let p={};return oa(a.children,(g,m)=>{p[m]=this.createSegmentGroup(l,g,h,d)}),new Xi(f,p)}createSegments(l,a,h,d){return a.map(f=>f.path.startsWith(":")?this.findPosParam(l,f,d):this.findOrReturn(f,h))}findPosParam(l,a,h){const d=h[a.path.substring(1)];if(!d)throw new Et(4001,nD);return d}findOrReturn(l,a){let h=0;for(const d of a){if(d.path===l.path)return a.splice(h),d;h++}return l}}class NIe{}class VIe{constructor(l,a,h,d,f,p,g,m){this.injector=l,this.rootComponentType=a,this.config=h,this.urlTree=d,this.url=f,this.paramsInheritanceStrategy=p,this.relativeLinkResolution=g,this.urlSerializer=m}recognize(){const l=eD(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,l,Wi).pipe(an(a=>{if(null===a)return null;const h=new XO([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wi,this.rootComponentType,null,this.urlTree.root,-1,{}),d=new bf(h,a),f=new vK(this.url,d);return this.inheritParamsAndData(f._root),f}))}inheritParamsAndData(l){const a=l.value,h=mK(a,this.paramsInheritanceStrategy);a.params=Object.freeze(h.params),a.data=Object.freeze(h.data),l.children.forEach(d=>this.inheritParamsAndData(d))}processSegmentGroup(l,a,h,d){return 0===h.segments.length&&h.hasChildren()?this.processChildren(l,a,h):this.processSegment(l,a,h,h.segments,d)}processChildren(l,a,h){return Ys(Object.keys(h.children)).pipe(Pp(d=>{const f=h.children[d],p=SK(a,d);return this.processSegmentGroup(l,p,f,d)}),GY((d,f)=>d&&f?(d.push(...f),d):null),function sAe(c,l=!1){return xi((a,h)=>{let d=0;a.subscribe(new Li(h,f=>{const p=c(f,d++);(p||l)&&h.next(f),!p&&h.complete()}))})}(d=>null!==d),HO(null),QY(),an(d=>{if(null===d)return null;const f=IK(d);return function zIe(c){c.sort((l,a)=>l.value.outlet===Wi?-1:a.value.outlet===Wi?1:l.value.outlet.localeCompare(a.value.outlet))}(f),f}))}processSegment(l,a,h,d,f){return Ys(a).pipe(Pp(p=>{var g;return this.processSegmentAgainstRoute(null!==(g=p._injector)&&void 0!==g?g:l,p,h,d,f)}),yf(p=>!!p),hr(p=>{if(wN(p))return MK(h,d,f)?$n([]):$n(null);throw p}))}processSegmentAgainstRoute(l,a,h,d,f){var p,g;if(a.redirectTo||!kK(a,h,d,f))return $n(null);let m;if("**"===a.path){const v=d.length>0?ZY(d).parameters:{},y=RK(h)+d.length;m=$n({snapshot:new XO(d,v,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,NK(a),du(a),null!==(g=null!==(p=a.component)&&void 0!==p?p:a._loadedComponent)&&void 0!==g?g:null,a,PK(h),y,LK(a),y),consumedSegments:[],remainingSegments:[]})}else m=DK(h,a,d,l).pipe(an(({matched:v,consumedSegments:y,remainingSegments:_,parameters:b})=>{var C,x;if(!v)return null;const S=RK(h)+y.length;return{snapshot:new XO(y,b,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,NK(a),du(a),null!==(x=null!==(C=a.component)&&void 0!==C?C:a._loadedComponent)&&void 0!==x?x:null,a,PK(h),S,LK(a),S),consumedSegments:y,remainingSegments:_}}));return m.pipe(Yu(v=>{var y,_;if(null===v)return $n(null);const{snapshot:b,consumedSegments:C,remainingSegments:x}=v;l=null!==(y=a._injector)&&void 0!==y?y:l;const S=null!==(_=a._loadedInjector)&&void 0!==_?_:l,w=function UIe(c){return c.children?c.children:c.loadChildren?c._loadedRoutes:[]}(a),{segmentGroup:T,slicedSegments:O}=eD(h,C,x,w.filter(D=>void 0===D.redirectTo),this.relativeLinkResolution);if(0===O.length&&T.hasChildren())return this.processChildren(S,w,T).pipe(an(D=>null===D?null:[new bf(b,D)]));if(0===w.length&&0===O.length)return $n([new bf(b,[])]);const k=du(a)===f;return this.processSegment(S,w,T,O,k?Wi:f).pipe(an(D=>null===D?null:[new bf(b,D)]))}))}}function HIe(c){const l=c.value.routeConfig;return l&&""===l.path&&void 0===l.redirectTo}function IK(c){const l=[],a=new Set;for(const h of c){if(!HIe(h)){l.push(h);continue}const d=l.find(f=>h.value.routeConfig===f.value.routeConfig);void 0!==d?(d.children.push(...h.children),a.add(d)):l.push(h)}for(const h of a){const d=IK(h.children);l.push(new bf(h.value,d))}return l.filter(h=>!a.has(h))}function PK(c){let l=c;for(;l._sourceSegment;)l=l._sourceSegment;return l}function RK(c){var l,a;let h=c,d=null!==(l=h._segmentIndexShift)&&void 0!==l?l:0;for(;h._sourceSegment;)h=h._sourceSegment,d+=null!==(a=h._segmentIndexShift)&&void 0!==a?a:0;return d-1}function NK(c){return c.data||{}}function LK(c){return c.resolve||{}}function BK(c){return"string"==typeof c.title||null===c.title}function ON(c){return Yu(l=>{const a=c(l);return a?Ys(a).pipe(an(()=>l)):$n(l)})}let VK=(()=>{class c{buildTitle(a){var h;let d,f=a.root;for(;void 0!==f;)d=null!==(h=this.getResolvedTitleForRoute(f))&&void 0!==h?h:d,f=f.children.find(p=>p.outlet===Wi);return d}getResolvedTitleForRoute(a){return a.data[GC]}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:function(){return Ks(zK)},providedIn:"root"}),c})(),zK=(()=>{class c extends VK{constructor(a){super(),this.title=a}updateTitle(a){const h=this.buildTitle(a);void 0!==h&&this.title.setTitle(h)}}return c.\u0275fac=function(a){return new(a||c)(Ae(NY))},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class XIe{}class KIe extends class YIe{shouldDetach(l){return!1}store(l,a){}shouldAttach(l){return!1}retrieve(l){return null}shouldReuseRoute(l,a){return l.routeConfig===a.routeConfig}}{}const sD=new Ln("",{providedIn:"root",factory:()=>({})}),DN=new Ln("ROUTES");let kN=(()=>{class c{constructor(a,h){this.injector=a,this.compiler=h,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(a){if(this.componentLoaders.get(a))return this.componentLoaders.get(a);if(a._loadedComponent)return $n(a._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(a);const h=Rp(a.loadComponent()).pipe(Qo(f=>{this.onLoadEndListener&&this.onLoadEndListener(a),a._loadedComponent=f}),rN(()=>{this.componentLoaders.delete(a)})),d=new $Y(h,()=>new yt).pipe(nN());return this.componentLoaders.set(a,d),d}loadChildren(a,h){if(this.childrenLoaders.get(h))return this.childrenLoaders.get(h);if(h._loadedRoutes)return $n({routes:h._loadedRoutes,injector:h._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(h);const f=this.loadModuleFactoryOrRoutes(h.loadChildren).pipe(an(g=>{this.onLoadEndListener&&this.onLoadEndListener(h);let m,v,y=!1;Array.isArray(g)?v=g:(m=g.create(a).injector,v=qY(m.get(DN,[],ni.Self|ni.Optional)));return{routes:v.map(xN),injector:m}}),rN(()=>{this.childrenLoaders.delete(h)})),p=new $Y(f,()=>new yt).pipe(nN());return this.childrenLoaders.set(h,p),p}loadModuleFactoryOrRoutes(a){return Rp(a()).pipe(Ho(h=>h instanceof DZ||Array.isArray(h)?$n(h):Ys(this.compiler.compileModuleAsync(h))))}}return c.\u0275fac=function(a){return new(a||c)(Ae(Qr),Ae(mF))},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class e3e{}class t3e{shouldProcessUrl(l){return!0}extract(l){return l}merge(l,a){return l}}function n3e(c){throw c}function i3e(c,l,a){return l.parse("/")}const r3e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},s3e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function HK(){var c,l;const a=Ks(tK),h=Ks(KC),d=Ks(EF),f=Ks(Qr),p=Ks(mF),g=null!==(c=Ks(DN,{optional:!0}))&&void 0!==c?c:[],m=null!==(l=Ks(sD,{optional:!0}))&&void 0!==l?l:{},v=Ks(zK),y=Ks(VK,{optional:!0}),_=Ks(e3e,{optional:!0}),b=Ks(XIe,{optional:!0}),C=new ts(null,a,h,d,f,p,qY(g));return _&&(C.urlHandlingStrategy=_),b&&(C.routeReuseStrategy=b),C.titleStrategy=null!=y?y:v,function o3e(c,l){c.errorHandler&&(l.errorHandler=c.errorHandler),c.malformedUriErrorHandler&&(l.malformedUriErrorHandler=c.malformedUriErrorHandler),c.onSameUrlNavigation&&(l.onSameUrlNavigation=c.onSameUrlNavigation),c.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=c.paramsInheritanceStrategy),c.relativeLinkResolution&&(l.relativeLinkResolution=c.relativeLinkResolution),c.urlUpdateStrategy&&(l.urlUpdateStrategy=c.urlUpdateStrategy),c.canceledNavigationResolution&&(l.canceledNavigationResolution=c.canceledNavigationResolution)}(m,C),C}let ts=(()=>{class c{constructor(a,h,d,f,p,g,m){this.rootComponentType=a,this.urlSerializer=h,this.rootContexts=d,this.location=f,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yt,this.errorHandler=n3e,this.malformedUriErrorHandler=i3e,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>$n(void 0),this.urlHandlingStrategy=new t3e,this.routeReuseStrategy=new KIe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=p.get(kN),this.configLoader.onLoadEndListener=b=>this.triggerEvent(new UAe(b)),this.configLoader.onLoadStartListener=b=>this.triggerEvent(new zAe(b)),this.ngModule=p.get(Tm),this.console=p.get(qDe);const _=p.get(Zi);this.isNgZoneEnabled=_ instanceof Zi&&Zi.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function uAe(){return new km(new Xi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gK(this.currentUrlTree,this.rootComponentType),this.transitions=new Jr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var a;return null===(a=this.location.getState())||void 0===a?void 0:a.\u0275routerPageId}setupNavigations(a){const h=this.events;return a.pipe(es(d=>0!==d.id),an(d=>Object.assign(Object.assign({},d),{extractedUrl:this.urlHandlingStrategy.extract(d.rawUrl)})),Yu(d=>{let f=!1,p=!1;return $n(d).pipe(Qo(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yu(g=>{const m=this.browserUrlTree.toString(),v=!this.navigated||g.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return $K(g.source)&&(this.browserUrlTree=g.extractedUrl),$n(g).pipe(Yu(_=>{const b=this.transitions.getValue();return h.next(new dN(_.id,this.serializeUrl(_.extractedUrl),_.source,_.restoredState)),b!==this.transitions.getValue()?nf:Promise.resolve(_)}),function FIe(c,l,a,h){return Yu(d=>function PIe(c,l,a,h,d){return new RIe(c,l,a,h,d).apply()}(c,l,a,d.extractedUrl,h).pipe(an(f=>Object.assign(Object.assign({},d),{urlAfterRedirects:f}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qo(_=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:_.urlAfterRedirects}),d.urlAfterRedirects=_.urlAfterRedirects}),function WIe(c,l,a,h,d,f){return Ho(p=>function BIe(c,l,a,h,d,f,p="emptyOnly",g="legacy"){return new VIe(c,l,a,h,d,p,g,f).recognize().pipe(Yu(m=>null===m?function LIe(c){return new En(l=>l.error(c))}(new NIe):$n(m)))}(c,l,a,p.urlAfterRedirects,h.serialize(p.urlAfterRedirects),h,d,f).pipe(an(g=>Object.assign(Object.assign({},p),{targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Qo(_=>{if(d.targetSnapshot=_.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!_.extras.skipLocationChange){const C=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl);this.setBrowserUrl(C,_)}this.browserUrlTree=_.urlAfterRedirects}const b=new FAe(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);h.next(b)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:b,extractedUrl:C,source:x,restoredState:S,extras:w}=g,T=new dN(b,this.serializeUrl(C),x,S);h.next(T);const O=gK(C,this.rootComponentType).snapshot;return $n(d=Object.assign(Object.assign({},g),{targetSnapshot:O,urlAfterRedirects:C,extras:Object.assign(Object.assign({},w),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),nf}),Qo(g=>{const m=new NAe(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(m)}),an(g=>d=Object.assign(Object.assign({},g),{guards:oIe(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function vIe(c,l){return Ho(a=>{const{targetSnapshot:h,currentSnapshot:d,guards:{canActivateChecks:f,canDeactivateChecks:p}}=a;return 0===p.length&&0===f.length?$n(Object.assign(Object.assign({},a),{guardsResult:!0})):function yIe(c,l,a,h){return Ys(c).pipe(Ho(d=>function SIe(c,l,a,h,d){const f=l&&l.routeConfig?l.routeConfig.canDeactivate:null;return f&&0!==f.length?$n(f.map(g=>{var m;const v=null!==(m=JC(l))&&void 0!==m?m:d,y=Ey(g,v);return Rp(function pIe(c){return c&&nx(c.canDeactivate)}(y)?y.canDeactivate(c,l,a,h):v.runInContext(()=>y(c,l,a,h))).pipe(yf())})).pipe(Ay()):$n(!0)}(d.component,d.route,a,l,h)),yf(d=>!0!==d,!0))}(p,h,d,c).pipe(Ho(g=>g&&function uIe(c){return"boolean"==typeof c}(g)?function _Ie(c,l,a,h){return Ys(l).pipe(Pp(d=>tN(function CIe(c,l){return null!==c&&l&&l(new HAe(c)),$n(!0)}(d.route.parent,h),function bIe(c,l){return null!==c&&l&&l(new WAe(c)),$n(!0)}(d.route,h),function wIe(c,l,a){const h=l[l.length-1],f=l.slice(0,l.length-1).reverse().map(p=>function aIe(c){const l=c.routeConfig?c.routeConfig.canActivateChild:null;return l&&0!==l.length?{node:c,guards:l}:null}(p)).filter(p=>null!==p).map(p=>HY(()=>$n(p.guards.map(m=>{var v;const y=null!==(v=JC(p.node))&&void 0!==v?v:a,_=Ey(m,y);return Rp(function fIe(c){return c&&nx(c.canActivateChild)}(_)?_.canActivateChild(h,c):y.runInContext(()=>_(h,c))).pipe(yf())})).pipe(Ay())));return $n(f).pipe(Ay())}(c,d.path,a),function xIe(c,l,a){const h=l.routeConfig?l.routeConfig.canActivate:null;if(!h||0===h.length)return $n(!0);const d=h.map(f=>HY(()=>{var p;const g=null!==(p=JC(l))&&void 0!==p?p:a,m=Ey(f,g);return Rp(function dIe(c){return c&&nx(c.canActivate)}(m)?m.canActivate(l,c):g.runInContext(()=>m(l,c))).pipe(yf())}));return $n(d).pipe(Ay())}(c,d.route,a))),yf(d=>!0!==d,!0))}(h,f,c,l):$n(g)),an(g=>Object.assign(Object.assign({},a),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),Qo(g=>{if(d.guardsResult=g.guardsResult,Em(g.guardsResult))throw _K(0,g.guardsResult);const m=new LAe(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(m)}),es(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),ON(g=>{if(g.guards.canActivateChecks.length)return $n(g).pipe(Qo(m=>{const v=new BAe(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Yu(m=>{let v=!1;return $n(m).pipe(function GIe(c,l){return Ho(a=>{const{targetSnapshot:h,guards:{canActivateChecks:d}}=a;if(!d.length)return $n(a);let f=0;return Ys(d).pipe(Pp(p=>function QIe(c,l,a,h){const d=c.routeConfig,f=c._resolve;return void 0!==(null==d?void 0:d.title)&&!BK(d)&&(f[GC]=d.title),function jIe(c,l,a,h){const d=function qIe(c){return[...Object.keys(c),...Object.getOwnPropertySymbols(c)]}(c);if(0===d.length)return $n({});const f={};return Ys(d).pipe(Ho(p=>function ZIe(c,l,a,h){var d;const f=null!==(d=JC(l))&&void 0!==d?d:h,p=Ey(c,f);return Rp(p.resolve?p.resolve(l,a):f.runInContext(()=>p(l,a)))}(c[p],l,a,h).pipe(yf(),Qo(g=>{f[p]=g}))),iN(1),function oAe(c){return an(()=>c)}(f),hr(p=>wN(p)?nf:Ty(p)))}(f,c,l,h).pipe(an(p=>(c._resolvedData=p,c.data=mK(c,a).resolve,d&&BK(d)&&(c.data[GC]=d.title),null)))}(p.route,h,c,l)),Qo(()=>f++),iN(1),Ho(p=>f===d.length?$n(a):nf))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qo({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),Qo(m=>{const v=new VAe(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),ON(g=>{const m=v=>{var y;const _=[];(null===(y=v.routeConfig)||void 0===y?void 0:y.loadComponent)&&!v.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(v.routeConfig).pipe(Qo(b=>{v.component=b}),an(()=>{})));for(const b of v.children)_.push(...m(b));return _};return UO(m(g.targetSnapshot.root)).pipe(HO(),bp(1))}),ON(()=>this.afterPreactivation()),an(g=>{const m=function ZAe(c,l,a){const h=YC(c,l._root,a?a._root:void 0);return new pK(h,l)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return d=Object.assign(Object.assign({},g),{targetRouterState:m})}),Qo(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((c,l,a)=>an(h=>(new sIe(l,h.targetRouterState,h.currentRouterState,a).activate(c),h)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),Qo({next(){f=!0},complete(){f=!0}}),rN(()=>{var g;f||p||this.cancelNavigationTransition(d,"",1),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===d.id&&(this.currentNavigation=null)}),hr(g=>{var m;if(p=!0,xK(g)){CK(g)||(this.navigated=!0,this.restoreHistory(d,!0));const v=new ZO(d.id,this.serializeUrl(d.extractedUrl),g.message,g.cancellationCode);if(h.next(v),CK(g)){const y=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),_={skipLocationChange:d.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$K(d.source)};this.scheduleNavigation(y,"imperative",null,_,{resolve:d.resolve,reject:d.reject,promise:d.promise})}else d.resolve(!1)}else{this.restoreHistory(d,!0);const v=new hK(d.id,this.serializeUrl(d.extractedUrl),g,null!==(m=d.targetSnapshot)&&void 0!==m?m:void 0);h.next(v);try{d.resolve(this.errorHandler(g))}catch(y){d.reject(y)}}return nf}))}))}resetRootComponentType(a){this.rootComponentType=a,this.routerState.root.component=this.rootComponentType}setTransition(a){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),a))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(a=>{const h="popstate"===a.type?"popstate":"hashchange";"popstate"===h&&setTimeout(()=>{var d;const f={replaceUrl:!0},p=null!==(d=a.state)&&void 0!==d&&d.navigationId?a.state:null;if(p){const m=Object.assign({},p);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}const g=this.parseUrl(a.url);this.scheduleNavigation(g,h,p,f)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(a){this.events.next(a)}resetConfig(a){this.config=a.map(xN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(a,h={}){const{relativeTo:d,queryParams:f,fragment:p,queryParamsHandling:g,preserveFragment:m}=h,v=d||this.routerState.root,y=m?this.currentUrlTree.fragment:p;let _=null;switch(g){case"merge":_=Object.assign(Object.assign({},this.currentUrlTree.queryParams),f);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=f||null}return null!==_&&(_=this.removeEmptyProps(_)),MAe(v,this.currentUrlTree,a,_,null!=y?y:null)}navigateByUrl(a,h={skipLocationChange:!1}){const d=Em(a)?a:this.parseUrl(a),f=this.urlHandlingStrategy.merge(d,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,h)}navigate(a,h={skipLocationChange:!1}){return function a3e(c){for(let l=0;l<c.length;l++){if(null==c[l])throw new Et(4008,false)}}(a),this.navigateByUrl(this.createUrlTree(a,h),h)}serializeUrl(a){return this.urlSerializer.serialize(a)}parseUrl(a){let h;try{h=this.urlSerializer.parse(a)}catch(d){h=this.malformedUriErrorHandler(d,this.urlSerializer,a)}return h}isActive(a,h){let d;if(d=!0===h?Object.assign({},r3e):!1===h?Object.assign({},s3e):h,Em(a))return YY(this.currentUrlTree,a,d);const f=this.parseUrl(a);return YY(this.currentUrlTree,f,d)}removeEmptyProps(a){return Object.keys(a).reduce((h,d)=>{const f=a[d];return null!=f&&(h[d]=f),h},{})}processNavigations(){this.navigations.subscribe(a=>{var h;this.navigated=!0,this.lastSuccessfulId=a.id,this.currentPageId=a.targetPageId,this.events.next(new Am(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(h=this.titleStrategy)||void 0===h||h.updateTitle(this.routerState.snapshot),a.resolve(!0)},a=>{this.console.warn(`Unhandled Navigation Error: ${a}`)})}scheduleNavigation(a,h,d,f,p){var g,m;if(this.disposed)return Promise.resolve(!1);let v,y,_;p?(v=p.resolve,y=p.reject,_=p.promise):_=new Promise((x,S)=>{v=x,y=S});const b=++this.navigationId;let C;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(d=this.location.getState()),C=d&&d.\u0275routerPageId?d.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):C=0,this.setTransition({id:b,targetPageId:C,source:h,restoredState:d,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:a,extras:f,resolve:v,reject:y,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(x=>Promise.reject(x))}setBrowserUrl(a,h){const d=this.urlSerializer.serialize(a),f=Object.assign(Object.assign({},h.extras.state),this.generateNgRouterState(h.id,h.targetPageId));this.location.isCurrentPathEqualTo(d)||h.extras.replaceUrl?this.location.replaceState(d,"",f):this.location.go(d,"",f)}restoreHistory(a,h=!1){var d,f;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-a.targetPageId;"popstate"!==a.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(d=this.currentNavigation)||void 0===d?void 0:d.finalUrl)||0===p?this.currentUrlTree===(null===(f=this.currentNavigation)||void 0===f?void 0:f.finalUrl)&&0===p&&(this.resetState(a),this.browserUrlTree=a.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(h&&this.resetState(a),this.resetUrlToCurrentUrlTree())}resetState(a){this.routerState=a.currentRouterState,this.currentUrlTree=a.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,a.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(a,h,d){const f=new ZO(a.id,this.serializeUrl(a.extractedUrl),h,d);this.triggerEvent(f),a.resolve(!1)}generateNgRouterState(a,h){return"computed"===this.canceledNavigationResolution?{navigationId:a,\u0275routerPageId:h}:{navigationId:a}}}return c.\u0275fac=function(a){qT()},c.\u0275prov=qe({token:c,factory:function(){return HK()},providedIn:"root"}),c})();function $K(c){return"imperative"!==c}class GK{}let c3e=(()=>{class c{constructor(a,h,d,f,p){this.router=a,this.injector=d,this.preloadingStrategy=f,this.loader=p}setUpPreloading(){this.subscription=this.router.events.pipe(es(a=>a instanceof Am),Pp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(a,h){var d,f,p;const g=[];for(const m of h){m.providers&&!m._injector&&(m._injector=fO(m.providers,a,`Route: ${m.path}`));const v=null!==(d=m._injector)&&void 0!==d?d:a,y=null!==(f=m._loadedInjector)&&void 0!==f?f:v;m.loadChildren&&!m._loadedRoutes&&void 0===m.canLoad||m.loadComponent&&!m._loadedComponent?g.push(this.preloadConfig(v,m)):(m.children||m._loadedRoutes)&&g.push(this.processRoutes(y,null!==(p=m.children)&&void 0!==p?p:m._loadedRoutes))}return Ys(g).pipe(Pv())}preloadConfig(a,h){return this.preloadingStrategy.preload(h,()=>{let d;d=h.loadChildren&&void 0===h.canLoad?this.loader.loadChildren(a,h):$n(null);const f=d.pipe(Ho(p=>{var g;return null===p?$n(void 0):(h._loadedRoutes=p.routes,h._loadedInjector=p.injector,this.processRoutes(null!==(g=p.injector)&&void 0!==g?g:a,p.routes))}));return h.loadComponent&&!h._loadedComponent?Ys([f,this.loader.loadComponent(h)]).pipe(Pv()):f})}}return c.\u0275fac=function(a){return new(a||c)(Ae(ts),Ae(mF),Ae(kp),Ae(GK),Ae(kN))},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const AN=new Ln("");let QK=(()=>{class c{constructor(a,h,d={}){this.router=a,this.viewportScroller=h,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(a=>{a instanceof dN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=a.navigationTrigger,this.restoredId=a.restoredState?a.restoredState.navigationId:0):a instanceof Am&&(this.lastId=a.id,this.scheduleScrollEvent(a,this.router.parseUrl(a.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(a=>{a instanceof dK&&(a.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(a.position):a.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(a.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(a,h){this.router.triggerEvent(new dK(a,"popstate"===this.lastSource?this.store[this.restoredId]:null,h))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return c.\u0275fac=function(a){qT()},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();function Iy(c,l){return{\u0275kind:c,\u0275providers:l}}function IN(c){return[{provide:DN,multi:!0,useValue:c}]}function qK(){const c=Ks(Qr);return l=>{var a,h;const d=c.get(NC);if(l!==d.components[0])return;const f=c.get(ts),p=c.get(ZK);1===c.get(PN)&&f.initialNavigation(),null===(a=c.get(XK,null,ni.Optional))||void 0===a||a.setUpPreloading(),null===(h=c.get(AN,null,ni.Optional))||void 0===h||h.init(),f.resetRootComponentType(d.componentTypes[0]),p.next(),p.complete()}}const ZK=new Ln("",{factory:()=>new yt}),PN=new Ln("",{providedIn:"root",factory:()=>1});const XK=new Ln("");function f3e(c){return Iy(0,[{provide:XK,useExisting:c3e},{provide:GK,useExisting:c}])}const YK=new Ln("ROUTER_FORROOT_GUARD"),p3e=[EF,{provide:tK,useClass:oN},{provide:ts,useFactory:HK},KC,{provide:Im,useFactory:function jK(c){return c.routerState.root},deps:[ts]},kN];function g3e(){return new TX("Router",ts)}let KK=(()=>{class c{constructor(a){}static forRoot(a,h){return{ngModule:c,providers:[p3e,[],IN(a),{provide:YK,useFactory:_3e,deps:[[ts,new Tp,new Op]]},{provide:sD,useValue:h||{}},null!=h&&h.useHash?{provide:Dm,useClass:Nke}:{provide:Dm,useClass:XX},{provide:AN,useFactory:()=>{const c=Ks(ts),l=Ks(YMe),a=Ks(sD);return a.scrollOffset&&l.setOffset(a.scrollOffset),new QK(c,l,a)}},null!=h&&h.preloadingStrategy?f3e(h.preloadingStrategy).\u0275providers:[],{provide:TX,multi:!0,useFactory:g3e},null!=h&&h.initialNavigation?b3e(h):[],[{provide:JK,useFactory:qK},{provide:vX,multi:!0,useExisting:JK}]]}}static forChild(a){return{ngModule:c,providers:[IN(a)]}}}return c.\u0275fac=function(a){return new(a||c)(Ae(YK,8))},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[bN]}),c})();function _3e(c){return"guarded"}function b3e(c){return["disabled"===c.initialNavigation?Iy(3,[{provide:yO,multi:!0,useFactory:()=>{const l=Ks(ts);return()=>{l.setUpLocationChangeListener()}}},{provide:PN,useValue:2}]).\u0275providers:[],"enabledBlocking"===c.initialNavigation?Iy(2,[{provide:PN,useValue:0},{provide:yO,multi:!0,deps:[Qr],useFactory:l=>{const a=l.get(Rke,Promise.resolve());let h=!1;return()=>a.then(()=>new Promise(f=>{const p=l.get(ts),g=l.get(ZK);(function d(f){l.get(ts).events.pipe(es(g=>g instanceof Am||g instanceof ZO||g instanceof hK),an(g=>g instanceof Am||g instanceof ZO&&(0===g.code||1===g.code)&&null),es(g=>null!==g),bp(1)).subscribe(()=>{f()})})(()=>{f(!0),h=!0}),p.afterPreactivation=()=>(f(!0),h||g.closed?$n(void 0):g),p.initialNavigation()}))}}]).\u0275providers:[]]}const JK=new Ln(""),eJ="2.0.218",S3e=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io"}];class Ku{constructor(l,a,h,d,f,p,g,m,v){this.id=l,this.name=a,this.routes=h,this.routeEnabled=d,this.applicationEnabled=f,this.applicationHidden=p,this.applicationLogoText=g,this.libraryType=m,this.libraryRef=v}static builder(){return new Ku("","",[],!1,!1,!1,"","prod","book")}setId(l){return this.id=l,this}setName(l){return this.name=l,this}setRoutes(l){return this.routes=l,this}setRouteEnabled(l){return this.routeEnabled=l,this}setApplicatioinEnabled(l){return this.applicationEnabled=l,this}setApplicationLogoText(l){return this.applicationLogoText=l,this}setLibraryType(l){return this.libraryType=l,this}setLibraryRef(l){return this.libraryRef=l,this}enable(l=!0){return this.routeEnabled=l,this.applicationEnabled=l,this}hide(l=!0){return this.applicationHidden=l,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class ei{constructor(l,a,h,d,f,p=null,g=null){this.link=l,this.name=a,this.shape=h,this.hasBadge=d,this.hasAlert=f,this.onClick=p,this.isActive=g}static builder(){return new ei("","","",!1,!1)}setIsActive(l){return this.isActive=l,this}setOnClick(l){return this.onClick=l,this}setLink(l){return this.link=l,this}setName(l){return this.name=l,this}setShape(l){return this.shape=l,this}setHasBadge(l){return this.hasBadge=l,this}setHasAlert(l){return this.hasAlert=l,this}runOnClick(){this.onClick&&this.onClick(this)}}class RN extends class T3e{constructor(){this.version="",this.applicationId="memorial",this.applicationName="Memorial",this.developers=S3e,this.production=!0,this.platform="Web",this.relativeCacheService=!0,this.serviceAPIHost="",this.redirectToServerAfterItIsReadyAdress="",this.portAutoDetection=!0,this.portAutoIncrementValue=0,this.defaultRoute="/compiler",this.coding=!0,this.showOldVersions=!0,this.themeName="blue",this.serverType="rest",this.applications=[],this.addApplication(Ku.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setRoutes([ei.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(Ku.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([ei.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),ei.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),ei.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image"),ei.builder().setLink("dynamic-components-examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0414\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442").setShape("blocks-group"),ei.builder().setLink("help").setName("\u041f\u043e\u043c\u043e\u0449\u044c").setShape("help"),ei.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")])).addApplication(Ku.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([ei.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")])).addApplication(Ku.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setLibraryType("prod").setLibraryRef("biblia").setRoutes([ei.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(Ku.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setLibraryType("mprod").setLibraryRef("ps").setRoutes([ei.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("note")])).addApplication(Ku.builder().setId("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setLibraryType("cprod").setLibraryRef("calc").setApplicationLogoText("\u041c\u0410\u0422\u0410\u041d|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([ei.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")]).hide()).addApplication(Ku.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setLibraryType("clndrprod").setLibraryRef("clndr").setRoutes([ei.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")]).hide()).addApplication(Ku.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setLibraryType("compprod").setLibraryRef("comp").setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([ei.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(Ku.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setLibraryType("schprod").setLibraryRef("sch").setRoutes([ei.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).setVersion("BV."+eJ),this.afterConstruct()}addApplication(l){if(null!=this.applications.find(a=>a.id==l.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${l.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(l),this}setVersion(l){return this.version=l,this}setProduction(l){return this.production=l,this}setPlatform(l){return this.platform=l,this}setRelativeCacheService(l){return this.relativeCacheService=l,this}setServiceAPIHost(l){return this.serviceAPIHost=l,this}setRedirectToServerAfterItIsReadyAdress(l){return this.redirectToServerAfterItIsReadyAdress=l,this}setPortAutoDetection(l){return this.portAutoDetection=l,this}setPortAutoIncrementValue(l){return this.portAutoIncrementValue=l,this}setDefaultRoute(l){return this.defaultRoute=l,this}setServerType(l){return this.serverType=l,this}setCoding(l){return this.coding=l,this}setShowOldVersions(l){return this.showOldVersions=l,this}afterConstruct(){}}{afterConstruct(){super.afterConstruct(),this.setVersion("WPR."+eJ).setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((l,a,h)=>l.enable("d3examples"!=l.id&&"d3Dexamples"!=l.id))}static builder(){return new RN}}const Xh=RN.builder();class Py{constructor(l,a,h,d,f,p){this.type=l,this.time=a,this.sender=h,this.target=d,this.subType=f,this.text=p}static builder(){return new Py("",Date.now(),"","","","")}setType(l){return this.type=l,this}setTime(l){return this.time=l,this}setSender(l){return this.sender=l,this}setTarget(l){return this.target=l,this}setSubType(l){return this.subType=l,this}setText(l){return this.text=l,this}}class FN{constructor(l,a){this.id=l,this.handler=a}static builder(){return new FN(-1,()=>{})}setId(l){return this.id=l,this}setHandler(l){return this.handler=l,this}}class O3e{constructor(){this.id=1,this.handlers=new Map,this.targetHandlers=new Map,this.messagesToTarget=new Map,this.messagesTimeoutMs=18e4}newId(){return this.id++}putMessage(l){let a=l.target,h=this.messagesToTarget.get(a);return null==h&&(h=[]),h.push(l),h=this.removeOld(h),h?this.messagesToTarget.set(a,h):this.messagesToTarget.delete(a),this}getMessages(l,a=!0){let h=this.messagesToTarget.get(l),d=this.removeOld(h);return null==h&&a&&this.messagesToTarget.delete(l),d}removeAllOld(){let l=[];return this.messagesToTarget.forEach((a,h,d)=>{l.push(h)}),l.forEach(a=>{this.getMessages(a,!1)}),this}removeOld(l){if(void 0===l)return;let a=Date.now(),h=l.findIndex(f=>f.time+this.messagesTimeoutMs>a),d=l;return h>0&&(d=l.splice(0,h)),d}sendMessage(l){this.handlers.forEach((h,d,f)=>{h(l)});let a=this.targetHandlers.get(l.target);a&&a.forEach(h=>{h.handler(l)})}addHandler(l){let a=this.newId();this.handlers.set(a,l);let h=this;return{unsubscribe(){h.removeHandler(a)}}}addTargetHandler(l,a){let h=this.newId(),d=this.targetHandlers.get(l);null==d&&(d=[],this.targetHandlers.set(l,d)),d.push(FN.builder().setId(h).setHandler(a));let f=this;return{unsubscribe(){f.removeTargetHandler(l,h)}}}removeAllTargetHandlers(l){return this.targetHandlers.delete(l),this}removeHandler(l){this.handlers.delete(l)}removeTargetHandler(l,a){let h=this.targetHandlers.get(l);if(h){let d=h.filter((f,p,g)=>f.id!=a);d.length?this.targetHandlers.set(l,d):this.targetHandlers.delete(l)}}}class Fr{constructor(l,a,h){this.text=l,this.innerButtonText=a,this.timeout=h,this.buttonText="",this.config=null,this.update()}static of(l,a,h){return new Fr(l,a,h)}setConfig(l){this.config=l}update(){return this.buttonText=this.innerButtonText+" ("+this.timeout--+"s)",this.timeout>=0}onButtonClick(){this.remove()}remove(){this.config.removeAlert(this)}}class tJ{constructor(l,a,h){this.action=l,this.delayMS=a,this.delayRequest=h,this.requestedAction=!1,this.runTimer=!1,this.onDones=[]}requestAction(l){this.requestedAction=!0,this.runTimer||this.delayRequest(this.delayMS,()=>{this.checkAction()}),l&&this.onDones.push(l)}checkAction(){if(this.requestedAction)this.runTimer||(this.delayRequest(this.delayMS,()=>this.checkAction()),this.runTimer=!0);else{let l=this.onDones;this.onDones=[],this.action?this.action(l):l&&l.forEach(a=>a(!0)),this.runTimer=!1}this.requestedAction=!1}}class rx{constructor(l,a){this.config=l,this.waitingForSenderId=a,this.enabled=!1,this.checkTimeoutMs=100}static builder(){return new rx(null,"")}setConfig(l){return this.config=l,this}setWaitingForSenderId(l){return this.waitingForSenderId=l,this.enabled=!this.waitingForSenderId,this}setCheckTimeout(l){return this.checkTimeoutMs=l,this}checkEnabled(){if(this.enabled||!this.config)return!0;let l=this.config.messageBus.getMessages(this.waitingForSenderId);return null!=l&&l.length?this.config.post(()=>{this.enabled=!0}):this.checkLatter(),this.enabled}checkLatter(){return!(!this.enabled&&this.config)||(this.config.post(()=>this.checkEnabled(),this.checkTimeoutMs),this.enabled)}setEnabled(l){return this.enabled=l,this}}class cD{constructor(){this.cache=new Map,this.environment=Xh,this.themeName=Xh.themeName,this.serviceAPIHost=Xh.serviceAPIHost,this.redirectToServerAfterItIsReadyAdress=Xh.redirectToServerAfterItIsReadyAdress,this.portAutoDetection=Xh.portAutoDetection,this.portAutoIncrementValue=Xh.portAutoIncrementValue,this.messageBus=new O3e,this.alerts=[],this.upperMenuEnabled=!0,this.pageLoadedFrom="",this.authId="",this.authIdKey="authId",this.authBody="",this.baseHref="",this.waitingIOOperationCount=0,this.waitingIOOperationValue=0,this.waitingIOOperationValueMax=100,this.outletOnly=!1,this.autoLoginApplication=!0,this.defaultApplication="",this.defaultLoginType="login",this.showType=this.defaultLoginType,this.enableDefaultPersons=!0,this.coding=Xh.coding,this.showOldVersions=Xh.showOldVersions,"undefined"!=typeof pageLoadedFrom&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}setShowNormal(){return this.showType="normal",this}setShowLogin(l=null){return null!=l&&(this.autoLoginApplication=l),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let l="";return this.environment.developers.forEach(a=>{l=l+(l?"_":"")+a.id}),l}get developerName(){let l="";return this.environment.developers.forEach(a=>{l=l+(l?", ":"")+a.name}),l}get developerNameSortOrder(){let l="";return this.environment.developers.forEach(a=>{l=l+(l?", ":"")+a.nameSortOrder}),l}get developerLink(){return this.environment.developers[0].link}setPageLoadedFrom(l,a=!1){return this.pageLoadedFrom=l,a&&this.runPortAutoDetection(),this.setupBaseHref(),this}setupBaseHref(){let l=this.pageLoadedFrom;l.endsWith("/")&&(l=l.substring(0,l.length-1)),this.baseHref=l}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(l){const a=l.lastIndexOf(":");if(a<0)return l;let h="";for(let p=a+1;p<l.length&&"0123456789".indexOf(l.charAt(p))>=0;++p)h+=l.charAt(p);return isNaN(+h)?l:l.substring(0,a)+":"+(+location.port+Xh.portAutoIncrementValue)+l.substring(a+1+h.length,l.length)}addAlert(l){l.setConfig(this),this.alerts.push(l)}removeAlert(l){const a=this.alerts.findIndex((h,d,f)=>h===l);a>=0&&this.alerts.splice(a,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(l){return this.environment.platform===l}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(l){return this.environment.serverType===l}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(l){return this.themeName===l}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(l,a=0){setTimeout(()=>{l()},a)}getApplication(){let l=null;return this.environment.applications.forEach(a=>{a.id==this.defaultApplication&&(l=a)}),l}getApplicationByNameOrNull(l){let a=null;return this.environment.applications.forEach(h=>{h.name==l&&(a=h)}),a}getSingleAppOrNull(){let l=null,a=this.environment.applications.filter(h=>h.applicationEnabled&&!h.applicationHidden);return 1==a.length&&(l=a[0]),l}}const nJ=class D3e{static isWebGLAvailable(){try{const l=document.createElement("canvas");return!(!window.WebGLRenderingContext||!l.getContext("webgl")&&!l.getContext("experimental-webgl"))}catch(l){return!1}}static isWebGL2Available(){try{const l=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!l.getContext("webgl2"))}catch(l){return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(l){const h={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let d='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const f=document.createElement("div");return f.id="webglmessage",f.style.fontFamily="monospace",f.style.fontSize="13px",f.style.fontWeight="normal",f.style.textAlign="center",f.style.background="#fff",f.style.color="#000",f.style.padding="1.5em",f.style.width="400px",f.style.margin="5em auto 0",d=d.replace("$0",h[l]?"graphics card":"browser"),d=d.replace("$1",{1:"WebGL",2:"WebGL 2"}[l]),f.innerHTML=d,f}};let NN=(()=>{class c{getStorage(a){try{return localStorage.getItem(a)}catch(d){}return""}setStorage(a,h){try{localStorage.setItem(a,h)}catch(d){}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),on=(()=>{class c extends cD{constructor(a){super(),this.localStorageSvc=a,this.loginTypeLSName="login3d",this.login3dValue="3d",this.setDefaultLoginType(this.isLogin3dRequested()),this.showType=this.defaultLoginType}setDefaultLoginType(a){this.defaultLoginType=nJ.isWebGLAvailable()&&a?"login3d":"login"}requestLogin3d(a){this.setDefaultLoginType(a),this.localStorageSvc.setStorage(this.loginTypeLSName,nJ.isWebGLAvailable()&&a?this.login3dValue:"no")}isLogin3dRequested(){return!this.localStorageSvc.getStorage(this.loginTypeLSName)||this.localStorageSvc.getStorage(this.loginTypeLSName)==this.login3dValue}}return c.\u0275fac=function(a){return new(a||c)(Ae(NN))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class k3e{constructor(l,a){this.fn=l,this.subscriptions=a}unsubscribe(){const l=this.subscriptions.indexOf(this);-1!==l&&this.subscriptions.splice(l,1)}}function Fp(c){return null!=c&&"object"==typeof c&&!0===c["@@functional/placeholder"]}function Yh(c){return function l(a){return 0===arguments.length||Fp(a)?l:c.apply(this,arguments)}}function Kh(c){return function l(a,h){switch(arguments.length){case 0:return l;case 1:return Fp(a)?l:Yh(function(d){return c(a,d)});default:return Fp(a)&&Fp(h)?l:Fp(a)?Yh(function(d){return c(d,h)}):Fp(h)?Yh(function(d){return c(a,d)}):c(a,h)}}}const uD=Kh(function(l,a){return a instanceof l||null!=a&&(a.constructor===l||"Object"===l.name&&"object"==typeof a)});function hD(c,l){return Object.prototype.hasOwnProperty.call(l,c)}var iJ=Object.prototype.toString;const rJ=function(){return"[object Arguments]"===iJ.call(arguments)?function(l){return"[object Arguments]"===iJ.call(l)}:function(l){return hD("callee",l)}}(),LN=Array.isArray||function(l){return null!=l&&l.length>=0&&"[object Array]"===Object.prototype.toString.call(l)};function BN(c){return"[object String]"===Object.prototype.toString.call(c)}var P3e=Yh(function(l){return null!=l&&"function"==typeof l["fantasy-land/empty"]?l["fantasy-land/empty"]():null!=l&&null!=l.constructor&&"function"==typeof l.constructor["fantasy-land/empty"]?l.constructor["fantasy-land/empty"]():null!=l&&"function"==typeof l.empty?l.empty():null!=l&&null!=l.constructor&&"function"==typeof l.constructor.empty?l.constructor.empty():LN(l)?[]:BN(l)?"":function sJ(c){return"[object Object]"===Object.prototype.toString.call(c)}(l)?{}:rJ(l)?function(){return arguments}():function I3e(c){var l=Object.prototype.toString.call(c);return"[object Uint8ClampedArray]"===l||"[object Int8Array]"===l||"[object Uint8Array]"===l||"[object Int16Array]"===l||"[object Uint16Array]"===l||"[object Int32Array]"===l||"[object Uint32Array]"===l||"[object Float32Array]"===l||"[object Float64Array]"===l||"[object BigInt64Array]"===l||"[object BigUint64Array]"===l}(l)?l.constructor.from(""):void 0});const R3e=P3e;function oJ(c){for(var a,l=[];!(a=c.next()).done;)l.push(a.value);return l}function aJ(c,l,a){for(var h=0,d=a.length;h<d;){if(c(l,a[h]))return!0;h+=1}return!1}const VN="function"==typeof Object.is?Object.is:function N3e(c,l){return c===l?0!==c||1/c==1/l:c!=c&&l!=l};var L3e=!{toString:null}.propertyIsEnumerable("toString"),lJ=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],cJ=function(){return arguments.propertyIsEnumerable("length")}(),B3e=function(l,a){for(var h=0;h<l.length;){if(l[h]===a)return!0;h+=1}return!1};const zN=Yh("function"!=typeof Object.keys||cJ?function(l){if(Object(l)!==l)return[];var a,h,d=[],f=cJ&&rJ(l);for(a in l)hD(a,l)&&(!f||"length"!==a)&&(d[d.length]=a);if(L3e)for(h=lJ.length-1;h>=0;)hD(a=lJ[h],l)&&!B3e(d,a)&&(d[d.length]=a),h-=1;return d}:function(l){return Object(l)!==l?[]:Object.keys(l)}),uJ=Yh(function(l){return null===l?"Null":void 0===l?"Undefined":Object.prototype.toString.call(l).slice(8,-1)});function hJ(c,l,a,h){var d=oJ(c);function p(g,m){return UN(g,m,a.slice(),h.slice())}return!aJ(function(g,m){return!aJ(p,m,g)},oJ(l),d)}function UN(c,l,a,h){if(VN(c,l))return!0;var d=uJ(c);if(d!==uJ(l))return!1;if("function"==typeof c["fantasy-land/equals"]||"function"==typeof l["fantasy-land/equals"])return"function"==typeof c["fantasy-land/equals"]&&c["fantasy-land/equals"](l)&&"function"==typeof l["fantasy-land/equals"]&&l["fantasy-land/equals"](c);if("function"==typeof c.equals||"function"==typeof l.equals)return"function"==typeof c.equals&&c.equals(l)&&"function"==typeof l.equals&&l.equals(c);switch(d){case"Arguments":case"Array":case"Object":if("function"==typeof c.constructor&&"Promise"===function F3e(c){var l=String(c).match(/^function (\w*)/);return null==l?"":l[1]}(c.constructor))return c===l;break;case"Boolean":case"Number":case"String":if(typeof c!=typeof l||!VN(c.valueOf(),l.valueOf()))return!1;break;case"Date":if(!VN(c.valueOf(),l.valueOf()))return!1;break;case"Error":return c.name===l.name&&c.message===l.message;case"RegExp":if(c.source!==l.source||c.global!==l.global||c.ignoreCase!==l.ignoreCase||c.multiline!==l.multiline||c.sticky!==l.sticky||c.unicode!==l.unicode)return!1}for(var f=a.length-1;f>=0;){if(a[f]===c)return h[f]===l;f-=1}switch(d){case"Map":return c.size===l.size&&hJ(c.entries(),l.entries(),a.concat([c]),h.concat([l]));case"Set":return c.size===l.size&&hJ(c.values(),l.values(),a.concat([c]),h.concat([l]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var p=zN(c);if(p.length!==zN(l).length)return!1;var g=a.concat([c]),m=h.concat([l]);for(f=p.length-1;f>=0;){var v=p[f];if(!hD(v,l)||!UN(l[v],c[v],g,m))return!1;f-=1}return!0}const dJ=Kh(function(l,a){return UN(l,a,[],[])}),fJ=Yh(function(l){return null!=l&&dJ(l,R3e(l))});function sx(c){return null==c}function Np(c){return sx(c)||fJ(c)}function HN(c){return uD(String,c)}function dD(c){return uD(Object,c)}function gJ(c){return uD(Map,c)}function mJ(c,l){return c!==l}function vJ(c,l){return JSON.stringify(c)===JSON.stringify(l)}function yJ(c){const l=new Map;for(const[a,h]of c)gJ(h)?l.set(a,yJ(h)):l.set(a,h);return l}function q3e(c){switch(!0){case gJ(c):return yJ(c);case dD(c)&&!Array.isArray(c):return Pm({},c);default:return JSON.parse(JSON.stringify(c))}}function Pm(...c){const l={};return c.map(a=>dD(a)?To({},a):{}).forEach(a=>{Object.keys(a).forEach(h=>{const d=a[h];l[h]=Array.isArray(d)?Array.from(d):dD(d)?Pm(l[h]||{},d):d})}),l}function bJ(c=window){return!sx(c)}let fD,CJ,$N,WN;function xJ(c=!0){if(!c||!fD){const l=document&&document.querySelector("[ng-version]");fD=l?""+l.getAttribute("ng-version"):void 0}return fD}function J3e(c=!0){var l,a;return c&&fD||(CJ=null==(a=null==(l=null==window?void 0:window.angular)?void 0:l.version)?void 0:a.full),CJ}function wJ(c=!0){var l,a;return c&&$N||($N=null!=(a=null==(l=null==window?void 0:window.CDS)?void 0:l._react)&&a.version?window.CDS._react.version:document.querySelector("[data-reactroot], [data-reactid]")?"unknown version":void 0),$N}function SJ(c=!0){if(!c||!WN){const l=document.querySelectorAll("*");let a;for(let h=0;h<l.length;h++)if(l[h].__vue__){a=l[h];break}WN=a?"unknown version":void 0}return WN}function Rm(c){return c.replace(/[A-Z]/g,l=>"-"+l.toLowerCase())}function DJ(c){return c.charAt(0).toUpperCase()+c.slice(1)}const o4e=new class{constructor(){if(this.supports={js:!0},!document.body.hasAttribute("cds-supports")||"no-js"===document.body.getAttribute("cds-supports")){const c=Rm(Object.keys(this.supports).reduce((l,a)=>`${l} ${this.supports[a]?a:"no-"+a}`,"")).trim();document.body.setAttribute("cds-supports",c)}}};function QN(c,l){switch(c){case 0:return function(){return l.apply(this,arguments)};case 1:return function(a){return l.apply(this,arguments)};case 2:return function(a,h){return l.apply(this,arguments)};case 3:return function(a,h,d){return l.apply(this,arguments)};case 4:return function(a,h,d,f){return l.apply(this,arguments)};case 5:return function(a,h,d,f,p){return l.apply(this,arguments)};case 6:return function(a,h,d,f,p,g){return l.apply(this,arguments)};case 7:return function(a,h,d,f,p,g,m){return l.apply(this,arguments)};case 8:return function(a,h,d,f,p,g,m,v){return l.apply(this,arguments)};case 9:return function(a,h,d,f,p,g,m,v,y){return l.apply(this,arguments)};case 10:return function(a,h,d,f,p,g,m,v,y,_){return l.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function EJ(c,l,a){return function(){for(var h=[],d=0,f=c,p=0;p<l.length||d<arguments.length;){var g;p<l.length&&(!Fp(l[p])||d>=arguments.length)?g=l[p]:(g=arguments[d],d+=1),h[p]=g,Fp(g)||(f-=1),p+=1}return f<=0?a.apply(this,h):QN(f,EJ(c,h,a))}}const AJ=Kh(function(l,a){return 1===l?Yh(a):QN(l,EJ(l,[],a))}),l4e=Number.isInteger||function(l){return l<<0===l},u4e=Kh(function(l,a){var h=l<0?a.length+l:l;return BN(a)?a.charAt(h):a[h]}),d4e=Kh(function(l,a){return l.map(function(h){for(var p,d=a,f=0;f<h.length;){if(null==d)return;d=l4e(p=h[f])?u4e(p,d):d[p],f+=1}return d})}),p4e=Kh(function(l,a){return d4e([l],a)[0]}),m4e=AJ(2,(c,l)=>void 0!==p4e(c,l)),IJ=m4e({"@@functional/placeholder":!0},window);class Fm{static log(...l){qN()&&jN()&&console.log(...l)}static warn(...l){qN()&&jN()&&console.warn(...l)}static error(...l){qN()&&jN()&&console.error(...l)}}function jN(){return!IJ(["jasmine"])}function qN(){return!window.CDS.environment.production}function PJ(){bJ()&&(window.CDS=window.CDS||{_version:[],_react:{version:void 0},_supports:o4e.supports,_isStateProxied:!1,_state:{focusTrapItems:[],layerElements:[],i18nRegistry:{},elementRegistry:{},iconRegistry:{},motionRegistry:{}},environment:{production:!1},getDetails:RJ,logDetails:y4e},function(){var l;const c="6.1.6";window.CDS._version.indexOf(c)<0&&(window.CDS._version.push(c),null==(l=document.querySelector("body"))||l.setAttribute("cds-version",window.CDS._version.join(" "))),window.CDS._version.length>1&&Fm.warn("Running more than one version of Clarity can cause unexpected issues. Please ensure only one version is loaded.")}(),window.CDS._isStateProxied||(window.CDS._isStateProxied=!0,window.CDS._state=new Proxy(window.CDS._state,{set:(c,l,a)=>{const h={key:l,prev:window.CDS._state[l],current:a};return c[l]=a,document.dispatchEvent(new CustomEvent("CDS_STATE_UPDATE",{detail:h})),!0}})))}function RJ(){return{versions:window.CDS._version,environment:window.CDS.environment,userAgent:navigator.userAgent,supports:window.CDS._supports,angularVersion:xJ(!1),angularJSVersion:J3e(!1),reactVersion:wJ(!1),vueVersion:SJ(!1),state:cT(To({},window.CDS._state),{iconRegistry:Object.keys(window.CDS._state.iconRegistry),motionRegistry:Object.keys(window.CDS._state.motionRegistry),focusTrapRegistry:Object.keys(window.CDS._state.focusTrapItems.map(c=>c.focusTrapId))})}}function y4e(){Fm.log(JSON.stringify(RJ(),null,2))}const ZN=new class M3e{constructor(){this.subscriptions=[]}subscribe(l){const a=new k3e(l,this.subscriptions);return this.subscriptions.push(a),a}emit(l){this.subscriptions.forEach(a=>a.fn(l))}toEventObservable(){return this}};ZN.listener=document.addEventListener("CDS_STATE_UPDATE",c=>ZN.emit(c.detail));class Js{static get state(){return PJ(),window.CDS._state}static getValue(l){return Js.state[l]}static setValue(l,a){Js.state[l]=a}static log(){Fm.log(JSON.stringify(Js.state,null,2))}}Js.stateUpdates=ZN.toEventObservable();const _4e=["unknown",{outline:'<circle class="cds-internal-dot-3" cx="31.1" cy="18" r="2.9"/><circle class="cds-internal-dot-2" cx="18" cy="18" r="2.9"/><circle class="cds-internal-dot-1" cx="4.9" cy="18" r="2.9"/>'}];class dr{static get registry(){return To({unknown:_4e[1]},Js.state.iconRegistry)}static addIcons(...l){Js.state.iconRegistry=To(To({},Js.state.iconRegistry),Object.fromEntries(l.filter(([a])=>!dr.registry[a])))}static addAliases(...l){const a=l.filter(([h])=>dr.registry[h]).flatMap(([h,d])=>d.map(f=>[f,dr.registry[h]]));Js.state.iconRegistry=To(To({},Js.state.iconRegistry),Object.fromEntries(a))}static getIconNameFromShape(l){return l[0]}}const Ry=["angle",{outline:'<path d="M29.52,22.52,18,10.6,6.48,22.52a1.7,1.7,0,0,0,2.45,2.36L18,15.49l9.08,9.39a1.7,1.7,0,0,0,2.45-2.36Z"/>'}],pc=["exclamation-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M18,20.07a1.3,1.3,0,0,1-1.3-1.3v-6a1.3,1.3,0,1,1,2.6,0v6A1.3,1.3,0,0,1,18,20.07Z"/><circle cx="17.95" cy="23.02" r="1.5"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-1.49,6a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,25.5a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,25.5Z"/>'}],gc=["check-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M16.34,23.74l-5-5a1,1,0,0,1,1.41-1.41l3.59,3.59,6.78-6.78a1,1,0,0,1,1.41,1.41Z"/>',solid:'<path d="M30,18A12,12,0,1,1,18,6,12,12,0,0,1,30,18Zm-4.77-2.16a1.4,1.4,0,0,0-2-2l-6.77,6.77L13,17.16a1.4,1.4,0,0,0-2,2l5.45,5.45Z"/>'}],FJ=["ellipsis-horizontal",{outline:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>',outlineBadged:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>'}],ox=["window-close",{outline:'<path d="M19.41,18l7.29-7.29a1,1,0,0,0-1.41-1.41L18,16.59,10.71,9.29a1,1,0,0,0-1.41,1.41L16.59,18,9.29,25.29a1,1,0,1,0,1.41,1.41L18,19.41l7.29,7.29a1,1,0,0,0,1.41-1.41Z"/>'}],b4e=["event",{outline:'<path d="M16.17,25.86,10.81,20.5a1,1,0,0,1,1.41-1.41L16.17,23l8.64-8.64a1,1,0,0,1,1.41,1.41Z"/><path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0,.23-.41H23.8L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/><path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',outlineBadged:'<path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0-1.41-1.41L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><path d="M32.25,6h-4V9a2.2,2.2,0,0,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM25.94,16.58l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>',solidAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M33.68,15.4H26.3a1.34,1.34,0,0,1-.36,1.18l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38,7-7h-1A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5Zm-4.06,3.08-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>'}],C4e=["calendar",{outline:'<path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect" x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/>',outlineBadged:'<path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M32.25,6h-4V9a2.2,2.2,0,1,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/>',solidAlerted:'<path d="M33.68,15.4H22.23A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm6,5H26V24h2Zm0-5H26V19h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/>'}],x4e=["eye-hide",{outline:'<path d="M25.19,20.4A6.78,6.78,0,0,0,25.62,18a6.86,6.86,0,0,0-6.86-6.86,6.79,6.79,0,0,0-2.37.43L18,13.23a4.78,4.78,0,0,1,.74-.06A4.87,4.87,0,0,1,23.62,18a4.79,4.79,0,0,1-.06.74Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm9.75,9.75,6.65,6.65a4.81,4.81,0,0,1-2.5.72A4.87,4.87,0,0,1,13.9,18,4.81,4.81,0,0,1,14.62,15.53Zm-1.45-1.45a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>',solid:'<path d="M18.37,11.17A6.79,6.79,0,0,0,16,11.6l8.8,8.8A6.78,6.78,0,0,0,25.23,18,6.86,6.86,0,0,0,18.37,11.17Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm8.3,8.3a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>'}],w4e=["eye",{outline:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><path d="M18.09,11.17A6.86,6.86,0,1,0,25,18,6.86,6.86,0,0,0,18.09,11.17Zm0,11.72A4.86,4.86,0,1,1,23,18,4.87,4.87,0,0,1,18.09,22.89Z"/>',solid:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><circle cx="18.09" cy="18.03" r="6.86"/>'}],S4e=["ellipsis-vertical",{outline:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>',outlineBadged:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>'}],T4e=["view-columns",{outline:'<path d="M31,5H5A2,2,0,0,0,3,7V29a2,2,0,0,0,2,2H31a2,2,0,0,0,2-2V7A2,2,0,0,0,31,5ZM13,29H5V7h8Zm10,0H15V7h8Z"/>'}],O4e=["arrow",{outline:'<path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"/>'}],NJ=["times",{outline:'<path d="M19.41,18l8.29-8.29a1,1,0,0,0-1.41-1.41L18,16.59,9.71,8.29A1,1,0,0,0,8.29,9.71L16.59,18,8.29,26.29a1,1,0,1,0,1.41,1.41L18,19.41l8.29,8.29a1,1,0,0,0,1.41-1.41Z"/>'}],D4e=["step-forward-2",{outline:'<path d="M7.08,6.52a1.68,1.68,0,0,0,0,2.4L16.51,18,7.12,27.08a1.7,1.7,0,0,0,2.36,2.44h0L21.4,18,9.48,6.47A1.69,1.69,0,0,0,7.08,6.52Z"/><path d="M26.49,5a1.7,1.7,0,0,0-1.7,1.7V29.3a1.7,1.7,0,0,0,3.4,0V6.7A1.7,1.7,0,0,0,26.49,5Z"/>'}],LJ=["angle-double",{outline:'<path d="M29,19.41a1,1,0,0,1-.71-.29L18,8.83,7.71,19.12a1,1,0,0,1-1.41-1.41L18,6,29.71,17.71A1,1,0,0,1,29,19.41Z"/><path d="M29,30.41a1,1,0,0,1-.71-.29L18,19.83,7.71,30.12a1,1,0,0,1-1.41-1.41L18,17,29.71,28.71A1,1,0,0,1,29,30.41Z"/>'}],k4e=["filter-grid-circle",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/><path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],M4e=["filter-grid",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/>',solid:'<path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],BJ=["info-circle",{outline:'<circle cx="17.93" cy="11.9" r="1.4"/><path d="M21,23H19V15H16a1,1,0,0,0,0,2h1v6H15a1,1,0,1,0,0,2h6a1,1,0,0,0,0-2Z"/><path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-2,5.15a2,2,0,1,1,2,2A2,2,0,0,1,15.9,11.15ZM23,24a1,1,0,0,1-1,1H15a1,1,0,1,1,0-2h2V17H16a1,1,0,0,1,0-2h4v8h2A1,1,0,0,1,23,24Z"/>'}],E4e=["exclamation-triangle",{outline:'<path d="M18,21.32a1.3,1.3,0,0,0,1.3-1.3V14a1.3,1.3,0,1,0-2.6,0v6A1.3,1.3,0,0,0,18,21.32Z"/><circle cx="17.95" cy="24.27" r="1.5"/><path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43Zm-1.78,1.94a1,1,0,0,1-.86.49H8.21a1,1,0,0,1-.88-1.48L17.07,8.55a1,1,0,0,1,1.76,0l9.74,17.94A1,1,0,0,1,28.55,27.48Z"/>',solid:'<path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43ZM16.46,12.74a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,26.25a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,26.25Z"/>'}],A4e=["circle",{outline:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34Z"/>'}],I4e=["dot-circle",{outline:'<path d="M18,11a7,7,0,1,1-7,7,7,7,0,0,1,7-7"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>'}],VJ=["error-standard",{outline:'<circle cx="18" cy="26.06" r="1.33"/><path d="M18,22.61a1,1,0,0,1-1-1v-12a1,1,0,1,1,2,0v12A1,1,0,0,1,18,22.61Z"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,2.1a16,16,0,1,0,16,16A16,16,0,0,0,18,2.1ZM16.6,8.8a1.4,1.4,0,0,1,2.8,0v12a1.4,1.4,0,0,1-2.8,0ZM18,28.6a1.8,1.8,0,1,1,1.8-1.8A1.8,1.8,0,0,1,18,28.6Z"/>'}],P4e=["success-standard",{outline:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M28,12.1a1,1,0,0,0-1.41,0L15.49,23.15l-6-6A1,1,0,0,0,8,18.53L15.49,26,28,13.52A1,1,0,0,0,28,12.1Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM28.45,12.63,15.31,25.76,7.55,18a1.4,1.4,0,0,1,2-2l5.78,5.78L26.47,10.65a1.4,1.4,0,1,1,2,2Z"/>'}];class L4e extends Ne{constructor(l,a){super()}schedule(l,a=0){return this}}const pD={setInterval(...c){const{delegate:l}=pD;return((null==l?void 0:l.setInterval)||setInterval)(...c)},clearInterval(c){const{delegate:l}=pD;return((null==l?void 0:l.clearInterval)||clearInterval)(c)},delegate:void 0},XN={now:()=>(XN.delegate||Date).now(),delegate:void 0};class ax{constructor(l,a=ax.now){this.schedulerActionCtor=l,this.now=a}schedule(l,a=0,h){return new this.schedulerActionCtor(this,l).schedule(h,a)}}ax.now=XN.now,new class V4e extends ax{constructor(l,a=ax.now){super(l,a),this.actions=[],this._active=!1,this._scheduled=void 0}flush(l){const{actions:a}=this;if(this._active)return void a.push(l);let h;this._active=!0;do{if(h=l.execute(l.state,l.delay))break}while(l=a.shift());if(this._active=!1,h){for(;l=a.shift();)l.unsubscribe();throw h}}}(class B4e extends L4e{constructor(l,a){super(l,a),this.scheduler=l,this.work=a,this.pending=!1}schedule(l,a=0){if(this.closed)return this;this.state=l;const h=this.id,d=this.scheduler;return null!=h&&(this.id=this.recycleAsyncId(d,h,a)),this.pending=!0,this.delay=a,this.id=this.id||this.requestAsyncId(d,this.id,a),this}requestAsyncId(l,a,h=0){return pD.setInterval(l.flush.bind(l,this),h)}recycleAsyncId(l,a,h=0){if(null!=h&&this.delay===h&&!1===this.pending)return a;pD.clearInterval(a)}execute(l,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(l,a);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,a){let d,h=!1;try{this.work(l)}catch(f){h=!0,d=f||new Error("Scheduled action threw falsy error")}if(h)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:l,scheduler:a}=this,{actions:h}=a;this.work=this.state=this.scheduler=null,this.pending=!1,be(h,this),null!=l&&(this.id=this.recycleAsyncId(a,l,null)),this.delay=null,super.unsubscribe()}}});const U4e=["addListener","removeListener"],H4e=["addEventListener","removeEventListener"],$4e=["on","off"];function Jh(c,l,a,h){if(de(a)&&(h=a,a=void 0),h)return Jh(c,l,a).pipe(eN(h));const[d,f]=function Q4e(c){return de(c.addEventListener)&&de(c.removeEventListener)}(c)?H4e.map(p=>g=>c[p](l,g,a)):function W4e(c){return de(c.addListener)&&de(c.removeListener)}(c)?U4e.map(zJ(c,l)):function G4e(c){return de(c.on)&&de(c.off)}(c)?$4e.map(zJ(c,l)):[];if(!d&&fm(c))return Ho(p=>Jh(p,l,a))(iu(c));if(!d)throw new TypeError("Invalid event target");return new En(p=>{const g=(...m)=>p.next(1<m.length?m:m[0]);return d(g),()=>f(g)})}function zJ(c,l){return a=>h=>c[a](l,h)}class YN extends yt{constructor(l=1/0,a=1/0,h=XN){super(),this._bufferSize=l,this._windowTime=a,this._timestampProvider=h,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=a===1/0,this._bufferSize=Math.max(1,l),this._windowTime=Math.max(1,a)}next(l){const{isStopped:a,_buffer:h,_infiniteTimeWindow:d,_timestampProvider:f,_windowTime:p}=this;a||(h.push(l),!d&&h.push(f.now()+p)),this._trimBuffer(),super.next(l)}_subscribe(l){this._throwIfClosed(),this._trimBuffer();const a=this._innerSubscribe(l),{_infiniteTimeWindow:h,_buffer:d}=this,f=d.slice();for(let p=0;p<f.length&&!l.closed;p+=h?1:2)l.next(f[p]);return this._checkFinalizedStatuses(l),a}_trimBuffer(){const{_bufferSize:l,_timestampProvider:a,_buffer:h,_infiniteTimeWindow:d}=this,f=(d?1:2)*l;if(l<1/0&&f<h.length&&h.splice(0,h.length-f),!d){const p=a.now();let g=0;for(let m=1;m<h.length&&h[m]<=p;m+=2)g=m;g&&h.splice(0,g+1)}}}class HJ{}const Cf="*";function mc(c,l){return{type:7,name:c,definitions:l,options:{}}}function aa(c,l=null){return{type:4,styles:l,timings:c}}function $J(c,l=null){return{type:2,steps:c,options:l}}function Gi(c){return{type:6,styles:c,offset:null}}function q4e(c){return{type:5,steps:c}}function fo(c,l,a=null){return{type:1,expr:c,animation:l,options:a}}function WJ(c){Promise.resolve().then(c)}class ux{constructor(l=0,a=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=l+a}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){WJ(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(l=>l()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(l){this._position=this.totalTime?l*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(l){const a="start"==l?this._onStartFns:this._onDoneFns;a.forEach(h=>h()),a.length=0}}class GJ{constructor(l){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=l;let a=0,h=0,d=0;const f=this.players.length;0==f?WJ(()=>this._onFinish()):this.players.forEach(p=>{p.onDone(()=>{++a==f&&this._onFinish()}),p.onDestroy(()=>{++h==f&&this._onDestroy()}),p.onStart(()=>{++d==f&&this._onStart()})}),this.totalTime=this.players.reduce((p,g)=>Math.max(p,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this.players.forEach(l=>l.init())}onStart(l){this._onStartFns.push(l)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(l=>l()),this._onStartFns=[])}onDone(l){this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(l=>l.play())}pause(){this.players.forEach(l=>l.pause())}restart(){this.players.forEach(l=>l.restart())}finish(){this._onFinish(),this.players.forEach(l=>l.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(l=>l.destroy()),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}reset(){this.players.forEach(l=>l.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(l){const a=l*this.totalTime;this.players.forEach(h=>{const d=h.totalTime?Math.min(1,a/h.totalTime):1;h.setPosition(d)})}getPosition(){const l=this.players.reduce((a,h)=>null===a||h.totalTime>a.totalTime?h:a,null);return null!=l?l.getPosition():0}beforeDestroy(){this.players.forEach(l=>{l.beforeDestroy&&l.beforeDestroy()})}triggerCallback(l){const a="start"==l?this._onStartFns:this._onDoneFns;a.forEach(h=>h()),a.length=0}}let QJ=(()=>{class c{constructor(a,h){this._renderer=a,this._elementRef=h,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(a,h){this._renderer.setProperty(this._elementRef.nativeElement,a,h)}registerOnTouched(a){this.onTouched=a}registerOnChange(a){this.onChange=a}setDisabledState(a){this.setProperty("disabled",a)}}return c.\u0275fac=function(a){return new(a||c)(B(di),B(Sn))},c.\u0275dir=bt({type:c}),c})(),Nm=(()=>{class c extends QJ{}return c.\u0275fac=function(){let l;return function(h){return(l||(l=os(c)))(h||c)}}(),c.\u0275dir=bt({type:c,features:[gn]}),c})();const ed=new Ln("NgValueAccessor"),X4e={provide:ed,useExisting:Zr(()=>td),multi:!0};let td=(()=>{class c extends Nm{writeValue(a){this.setProperty("checked",a)}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=os(c)))(h||c)}}(),c.\u0275dir=bt({type:c,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(a,h){1&a&&ee("change",function(f){return h.onChange(f.target.checked)})("blur",function(){return h.onTouched()})},features:[vn([X4e]),gn]}),c})();const Y4e={provide:ed,useExisting:Zr(()=>Vl),multi:!0},J4e=new Ln("CompositionEventMode");let Vl=(()=>{class c extends QJ{constructor(a,h,d){super(a,h),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function K4e(){const c=jh()?jh().getUserAgent():"";return/android (\d+)/.test(c.toLowerCase())}())}writeValue(a){this.setProperty("value",null==a?"":a)}_handleInput(a){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(a)}_compositionStart(){this._composing=!0}_compositionEnd(a){this._composing=!1,this._compositionMode&&this.onChange(a)}}return c.\u0275fac=function(a){return new(a||c)(B(di),B(Sn),B(J4e,8))},c.\u0275dir=bt({type:c,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(a,h){1&a&&ee("input",function(f){return h._handleInput(f.target.value)})("blur",function(){return h.onTouched()})("compositionstart",function(){return h._compositionStart()})("compositionend",function(f){return h._compositionEnd(f.target.value)})},features:[vn([Y4e]),gn]}),c})();const ka=new Ln("NgValidators"),Bp=new Ln("NgAsyncValidators");function XJ(c){return function Lp(c){return null==c||("string"==typeof c||Array.isArray(c))&&0===c.length}(c.value)?{required:!0}:null}function YJ(c){return!0===c.value?null:{required:!0}}function mD(c){return null}function nee(c){return null!=c}function iee(c){return _C(c)?Ys(c):c}function ree(c){let l={};return c.forEach(a=>{l=null!=a?Object.assign(Object.assign({},l),a):l}),0===Object.keys(l).length?null:l}function see(c,l){return l.map(a=>a(c))}function oee(c){return c.map(l=>function nPe(c){return!c.validate}(l)?l:a=>l.validate(a))}function JN(c){return null!=c?function aee(c){if(!c)return null;const l=c.filter(nee);return 0==l.length?null:function(a){return ree(see(a,l))}}(oee(c)):null}function eL(c){return null!=c?function lee(c){if(!c)return null;const l=c.filter(nee);return 0==l.length?null:function(a){return function Z4e(...c){const l=aG(c),{args:a,keys:h}=VY(c),d=new En(f=>{const{length:p}=a;if(!p)return void f.complete();const g=new Array(p);let m=p,v=p;for(let y=0;y<p;y++){let _=!1;iu(a[y]).subscribe(new Li(f,b=>{_||(_=!0,v--),g[y]=b},()=>m--,void 0,()=>{(!m||!_)&&(v||f.next(h?zY(h,g):g),f.complete())}))}});return l?d.pipe(eN(l)):d}(see(a,l).map(iee)).pipe(an(ree))}}(oee(c)):null}function cee(c,l){return null===c?[l]:Array.isArray(c)?[...c,l]:[c,l]}function tL(c){return c?Array.isArray(c)?c:[c]:[]}function vD(c,l){return Array.isArray(c)?c.includes(l):c===l}function dee(c,l){const a=tL(l);return tL(c).forEach(d=>{vD(a,d)||a.push(d)}),a}function fee(c,l){return tL(l).filter(a=>!vD(c,a))}class pee{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(l){this._rawValidators=l||[],this._composedValidatorFn=JN(this._rawValidators)}_setAsyncValidators(l){this._rawAsyncValidators=l||[],this._composedAsyncValidatorFn=eL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(l){this._onDestroyCallbacks.push(l)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(l=>l()),this._onDestroyCallbacks=[]}reset(l){this.control&&this.control.reset(l)}hasError(l,a){return!!this.control&&this.control.hasError(l,a)}getError(l,a){return this.control?this.control.getError(l,a):null}}class zl extends pee{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nl extends pee{get formDirective(){return null}get path(){return null}}class gee{constructor(l){this._cd=l}get isTouched(){var l,a;return!(null===(a=null===(l=this._cd)||void 0===l?void 0:l.control)||void 0===a||!a.touched)}get isUntouched(){var l,a;return!(null===(a=null===(l=this._cd)||void 0===l?void 0:l.control)||void 0===a||!a.untouched)}get isPristine(){var l,a;return!(null===(a=null===(l=this._cd)||void 0===l?void 0:l.control)||void 0===a||!a.pristine)}get isDirty(){var l,a;return!(null===(a=null===(l=this._cd)||void 0===l?void 0:l.control)||void 0===a||!a.dirty)}get isValid(){var l,a;return!(null===(a=null===(l=this._cd)||void 0===l?void 0:l.control)||void 0===a||!a.valid)}get isInvalid(){var l,a;return!(null===(a=null===(l=this._cd)||void 0===l?void 0:l.control)||void 0===a||!a.invalid)}get isPending(){var l,a;return!(null===(a=null===(l=this._cd)||void 0===l?void 0:l.control)||void 0===a||!a.pending)}get isSubmitted(){var l;return!(null===(l=this._cd)||void 0===l||!l.submitted)}}let jo=(()=>{class c extends gee{constructor(a){super(a)}}return c.\u0275fac=function(a){return new(a||c)(B(zl,2))},c.\u0275dir=bt({type:c,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(a,h){2&a&&Ft("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)},features:[gn]}),c})(),Fy=(()=>{class c extends gee{constructor(a){super(a)}}return c.\u0275fac=function(a){return new(a||c)(B(nl,10))},c.\u0275dir=bt({type:c,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(a,h){2&a&&Ft("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)("ng-submitted",h.isSubmitted)},features:[gn]}),c})();const hx="VALID",_D="INVALID",Ny="PENDING",dx="DISABLED";function sL(c){return(bD(c)?c.validators:c)||null}function vee(c){return Array.isArray(c)?JN(c):c||null}function oL(c,l){return(bD(l)?l.asyncValidators:c)||null}function yee(c){return Array.isArray(c)?eL(c):c||null}function bD(c){return null!=c&&!Array.isArray(c)&&"object"==typeof c}class Cee{constructor(l,a){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=l,this._rawAsyncValidators=a,this._composedValidatorFn=vee(this._rawValidators),this._composedAsyncValidatorFn=yee(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(l){this._rawValidators=this._composedValidatorFn=l}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(l){this._rawAsyncValidators=this._composedAsyncValidatorFn=l}get parent(){return this._parent}get valid(){return this.status===hx}get invalid(){return this.status===_D}get pending(){return this.status==Ny}get disabled(){return this.status===dx}get enabled(){return this.status!==dx}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(l){this._rawValidators=l,this._composedValidatorFn=vee(l)}setAsyncValidators(l){this._rawAsyncValidators=l,this._composedAsyncValidatorFn=yee(l)}addValidators(l){this.setValidators(dee(l,this._rawValidators))}addAsyncValidators(l){this.setAsyncValidators(dee(l,this._rawAsyncValidators))}removeValidators(l){this.setValidators(fee(l,this._rawValidators))}removeAsyncValidators(l){this.setAsyncValidators(fee(l,this._rawAsyncValidators))}hasValidator(l){return vD(this._rawValidators,l)}hasAsyncValidator(l){return vD(this._rawAsyncValidators,l)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(l={}){this.touched=!0,this._parent&&!l.onlySelf&&this._parent.markAsTouched(l)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(l=>l.markAllAsTouched())}markAsUntouched(l={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(a=>{a.markAsUntouched({onlySelf:!0})}),this._parent&&!l.onlySelf&&this._parent._updateTouched(l)}markAsDirty(l={}){this.pristine=!1,this._parent&&!l.onlySelf&&this._parent.markAsDirty(l)}markAsPristine(l={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(a=>{a.markAsPristine({onlySelf:!0})}),this._parent&&!l.onlySelf&&this._parent._updatePristine(l)}markAsPending(l={}){this.status=Ny,!1!==l.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!l.onlySelf&&this._parent.markAsPending(l)}disable(l={}){const a=this._parentMarkedDirty(l.onlySelf);this.status=dx,this.errors=null,this._forEachChild(h=>{h.disable(Object.assign(Object.assign({},l),{onlySelf:!0}))}),this._updateValue(),!1!==l.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},l),{skipPristineCheck:a})),this._onDisabledChange.forEach(h=>h(!0))}enable(l={}){const a=this._parentMarkedDirty(l.onlySelf);this.status=hx,this._forEachChild(h=>{h.enable(Object.assign(Object.assign({},l),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:l.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},l),{skipPristineCheck:a})),this._onDisabledChange.forEach(h=>h(!1))}_updateAncestors(l){this._parent&&!l.onlySelf&&(this._parent.updateValueAndValidity(l),l.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(l){this._parent=l}getRawValue(){return this.value}updateValueAndValidity(l={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hx||this.status===Ny)&&this._runAsyncValidator(l.emitEvent)),!1!==l.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!l.onlySelf&&this._parent.updateValueAndValidity(l)}_updateTreeValidity(l={emitEvent:!0}){this._forEachChild(a=>a._updateTreeValidity(l)),this.updateValueAndValidity({onlySelf:!0,emitEvent:l.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dx:hx}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(l){if(this.asyncValidator){this.status=Ny,this._hasOwnPendingAsyncValidator=!0;const a=iee(this.asyncValidator(this));this._asyncValidationSubscription=a.subscribe(h=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(h,{emitEvent:l})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(l,a={}){this.errors=l,this._updateControlsErrors(!1!==a.emitEvent)}get(l){let a=l;return null==a||(Array.isArray(a)||(a=a.split(".")),0===a.length)?null:a.reduce((h,d)=>h&&h._find(d),this)}getError(l,a){const h=a?this.get(a):this;return h&&h.errors?h.errors[l]:null}hasError(l,a){return!!this.getError(l,a)}get root(){let l=this;for(;l._parent;)l=l._parent;return l}_updateControlsErrors(l){this.status=this._calculateStatus(),l&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(l)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?dx:this.errors?_D:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ny)?Ny:this._anyControlsHaveStatus(_D)?_D:hx}_anyControlsHaveStatus(l){return this._anyControls(a=>a.status===l)}_anyControlsDirty(){return this._anyControls(l=>l.dirty)}_anyControlsTouched(){return this._anyControls(l=>l.touched)}_updatePristine(l={}){this.pristine=!this._anyControlsDirty(),this._parent&&!l.onlySelf&&this._parent._updatePristine(l)}_updateTouched(l={}){this.touched=this._anyControlsTouched(),this._parent&&!l.onlySelf&&this._parent._updateTouched(l)}_registerOnCollectionChange(l){this._onCollectionChange=l}_setUpdateStrategy(l){bD(l)&&null!=l.updateOn&&(this._updateOn=l.updateOn)}_parentMarkedDirty(l){return!l&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(l){return null}}class CD extends Cee{constructor(l,a,h){super(sL(a),oL(h,a)),this.controls=l,this._initObservables(),this._setUpdateStrategy(a),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(l,a){return this.controls[l]?this.controls[l]:(this.controls[l]=a,a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange),a)}addControl(l,a,h={}){this.registerControl(l,a),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}removeControl(l,a={}){this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),delete this.controls[l],this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}setControl(l,a,h={}){this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),delete this.controls[l],a&&this.registerControl(l,a),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}contains(l){return this.controls.hasOwnProperty(l)&&this.controls[l].enabled}setValue(l,a={}){(function bee(c,l,a){c._forEachChild((h,d)=>{if(void 0===a[d])throw new Et(1002,"")})})(this,0,l),Object.keys(l).forEach(h=>{(function _ee(c,l,a){const h=c.controls;if(!(l?Object.keys(h):h).length)throw new Et(1e3,"");if(!h[a])throw new Et(1001,"")})(this,!0,h),this.controls[h].setValue(l[h],{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a)}patchValue(l,a={}){null!=l&&(Object.keys(l).forEach(h=>{const d=this.controls[h];d&&d.patchValue(l[h],{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a))}reset(l={},a={}){this._forEachChild((h,d)=>{h.reset(l[d],{onlySelf:!0,emitEvent:a.emitEvent})}),this._updatePristine(a),this._updateTouched(a),this.updateValueAndValidity(a)}getRawValue(){return this._reduceChildren({},(l,a,h)=>(l[h]=a.getRawValue(),l))}_syncPendingControls(){let l=this._reduceChildren(!1,(a,h)=>!!h._syncPendingControls()||a);return l&&this.updateValueAndValidity({onlySelf:!0}),l}_forEachChild(l){Object.keys(this.controls).forEach(a=>{const h=this.controls[a];h&&l(h,a)})}_setUpControls(){this._forEachChild(l=>{l.setParent(this),l._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(l){for(const[a,h]of Object.entries(this.controls))if(this.contains(a)&&l(h))return!0;return!1}_reduceValue(){return this._reduceChildren({},(a,h,d)=>((h.enabled||this.disabled)&&(a[d]=h.value),a))}_reduceChildren(l,a){let h=l;return this._forEachChild((d,f)=>{h=a(h,d,f)}),h}_allControlsDisabled(){for(const l of Object.keys(this.controls))if(this.controls[l].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(l){return this.controls.hasOwnProperty(l)?this.controls[l]:null}}function fx(c,l){var a,h;aL(c,l),l.valueAccessor.writeValue(c.value),c.disabled&&(null===(h=(a=l.valueAccessor).setDisabledState)||void 0===h||h.call(a,!0)),function hPe(c,l){l.valueAccessor.registerOnChange(a=>{c._pendingValue=a,c._pendingChange=!0,c._pendingDirty=!0,"change"===c.updateOn&&xee(c,l)})}(c,l),function fPe(c,l){const a=(h,d)=>{l.valueAccessor.writeValue(h),d&&l.viewToModelUpdate(h)};c.registerOnChange(a),l._registerOnDestroy(()=>{c._unregisterOnChange(a)})}(c,l),function dPe(c,l){l.valueAccessor.registerOnTouched(()=>{c._pendingTouched=!0,"blur"===c.updateOn&&c._pendingChange&&xee(c,l),"submit"!==c.updateOn&&c.markAsTouched()})}(c,l),function uPe(c,l){if(l.valueAccessor.setDisabledState){const a=h=>{l.valueAccessor.setDisabledState(h)};c.registerOnDisabledChange(a),l._registerOnDestroy(()=>{c._unregisterOnDisabledChange(a)})}}(c,l)}function SD(c,l){c.forEach(a=>{a.registerOnValidatorChange&&a.registerOnValidatorChange(l)})}function aL(c,l){const a=function uee(c){return c._rawValidators}(c);null!==l.validator?c.setValidators(cee(a,l.validator)):"function"==typeof a&&c.setValidators([a]);const h=function hee(c){return c._rawAsyncValidators}(c);null!==l.asyncValidator?c.setAsyncValidators(cee(h,l.asyncValidator)):"function"==typeof h&&c.setAsyncValidators([h]);const d=()=>c.updateValueAndValidity();SD(l._rawValidators,d),SD(l._rawAsyncValidators,d)}function xee(c,l){c._pendingDirty&&c.markAsDirty(),c.setValue(c._pendingValue,{emitModelToViewChange:!1}),l.viewToModelUpdate(c._pendingValue),c._pendingChange=!1}const yPe={provide:nl,useExisting:Zr(()=>xf)},px=(()=>Promise.resolve())();let xf=(()=>{class c extends nl{constructor(a,h){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new wt,this.form=new CD({},JN(a),eL(h))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(a){px.then(()=>{const h=this._findContainer(a.path);a.control=h.registerControl(a.name,a.control),fx(a.control,a),a.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(a)})}getControl(a){return this.form.get(a.path)}removeControl(a){px.then(()=>{const h=this._findContainer(a.path);h&&h.removeControl(a.name),this._directives.delete(a)})}addFormGroup(a){px.then(()=>{const h=this._findContainer(a.path),d=new CD({});(function wee(c,l){aL(c,l)})(d,a),h.registerControl(a.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(a){px.then(()=>{const h=this._findContainer(a.path);h&&h.removeControl(a.name)})}getFormGroup(a){return this.form.get(a.path)}updateModel(a,h){px.then(()=>{this.form.get(a.path).setValue(h)})}setValue(a){this.control.setValue(a)}onSubmit(a){var h;return this.submitted=!0,function Tee(c,l){c._syncPendingControls(),l.forEach(a=>{const h=a.control;"submit"===h.updateOn&&h._pendingChange&&(a.viewToModelUpdate(h._pendingValue),h._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(a),"dialog"===(null===(h=null==a?void 0:a.target)||void 0===h?void 0:h.method)}onReset(){this.resetForm()}resetForm(a){this.form.reset(a),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(a){return a.pop(),a.length?this.form.get(a):this.form}}return c.\u0275fac=function(a){return new(a||c)(B(ka,10),B(Bp,10))},c.\u0275dir=bt({type:c,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(a,h){1&a&&ee("submit",function(f){return h.onSubmit(f)})("reset",function(){return h.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vn([yPe]),gn]}),c})();function Oee(c,l){const a=c.indexOf(l);a>-1&&c.splice(a,1)}function Dee(c){return"object"==typeof c&&null!==c&&2===Object.keys(c).length&&"value"in c&&"disabled"in c}const uL=class extends Cee{constructor(l=null,a,h){super(sL(a),oL(h,a)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(l),this._setUpdateStrategy(a),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bD(a)&&(a.nonNullable||a.initialValueIsDefault)&&(this.defaultValue=Dee(l)?l.value:l)}setValue(l,a={}){this.value=this._pendingValue=l,this._onChange.length&&!1!==a.emitModelToViewChange&&this._onChange.forEach(h=>h(this.value,!1!==a.emitViewToModelChange)),this.updateValueAndValidity(a)}patchValue(l,a={}){this.setValue(l,a)}reset(l=this.defaultValue,a={}){this._applyFormState(l),this.markAsPristine(a),this.markAsUntouched(a),this.setValue(this.value,a),this._pendingChange=!1}_updateValue(){}_anyControls(l){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(l){this._onChange.push(l)}_unregisterOnChange(l){Oee(this._onChange,l)}registerOnDisabledChange(l){this._onDisabledChange.push(l)}_unregisterOnDisabledChange(l){Oee(this._onDisabledChange,l)}_forEachChild(l){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(l){Dee(l)?(this.value=this._pendingValue=l.value,l.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=l}},CPe={provide:zl,useExisting:Zr(()=>Ao)},Mee=(()=>Promise.resolve())();let Ao=(()=>{class c extends zl{constructor(a,h,d,f,p){super(),this._changeDetectorRef=p,this.control=new uL,this._registered=!1,this.update=new wt,this._parent=a,this._setValidators(h),this._setAsyncValidators(d),this.valueAccessor=function cL(c,l){if(!l)return null;let a,h,d;return Array.isArray(l),l.forEach(f=>{f.constructor===Vl?a=f:function mPe(c){return Object.getPrototypeOf(c.constructor)===Nm}(f)?h=f:d=f}),d||h||a||null}(0,f)}ngOnChanges(a){if(this._checkForErrors(),!this._registered||"name"in a){if(this._registered&&(this._checkName(),this.formDirective)){const h=a.name.previousValue;this.formDirective.removeControl({name:h,path:this._getPath(h)})}this._setUpControl()}"isDisabled"in a&&this._updateDisabled(a),function lL(c,l){if(!c.hasOwnProperty("model"))return!1;const a=c.model;return!!a.isFirstChange()||!Object.is(l,a.currentValue)}(a,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(a){this.viewModel=a,this.update.emit(a)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fx(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(a){Mee.then(()=>{var h;this.control.setValue(a,{emitViewToModelChange:!1}),null===(h=this._changeDetectorRef)||void 0===h||h.markForCheck()})}_updateDisabled(a){const h=a.isDisabled.currentValue,d=0!==h&&gf(h);Mee.then(()=>{var f;d&&!this.control.disabled?this.control.disable():!d&&this.control.disabled&&this.control.enable(),null===(f=this._changeDetectorRef)||void 0===f||f.markForCheck()})}_getPath(a){return this._parent?function xD(c,l){return[...l.path,c]}(a,this._parent):[a]}}return c.\u0275fac=function(a){return new(a||c)(B(nl,9),B(ka,10),B(Bp,10),B(ed,10),B(sa,8))},c.\u0275dir=bt({type:c,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vn([CPe]),gn,Wo]}),c})(),Ly=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=bt({type:c,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),c})();const wPe={provide:ed,useExisting:Zr(()=>gx),multi:!0};let Eee=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({}),c})(),SPe=(()=>{class c{constructor(){this._accessors=[]}add(a,h){this._accessors.push([a,h])}remove(a){for(let h=this._accessors.length-1;h>=0;--h)if(this._accessors[h][1]===a)return void this._accessors.splice(h,1)}select(a){this._accessors.forEach(h=>{this._isSameGroup(h,a)&&h[1]!==a&&h[1].fireUncheck(a.value)})}_isSameGroup(a,h){return!!a[0].control&&a[0]._parent===h._control._parent&&a[1].name===h.name}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:Eee}),c})(),gx=(()=>{class c extends Nm{constructor(a,h,d,f){super(a,h),this._registry=d,this._injector=f,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(zl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(a){this._state=a===this.value,this.setProperty("checked",this._state)}registerOnChange(a){this._fn=a,this.onChange=()=>{a(this.value),this._registry.select(this)}}fireUncheck(a){this.writeValue(a)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return c.\u0275fac=function(a){return new(a||c)(B(di),B(Sn),B(SPe),B(Qr))},c.\u0275dir=bt({type:c,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(a,h){1&a&&ee("change",function(){return h.onChange()})("blur",function(){return h.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[vn([wPe]),gn]}),c})(),Lm=(()=>{class c{constructor(){this._validator=mD}ngOnChanges(a){if(this.inputName in a){const h=this.normalizeInput(a[this.inputName].currentValue);this._enabled=this.enabled(h),this._validator=this._enabled?this.createValidator(h):mD,this._onChange&&this._onChange()}}validate(a){return this._validator(a)}registerOnValidatorChange(a){this._onChange=a}enabled(a){return null!=a}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=bt({type:c,features:[Wo]}),c})();const LPe={provide:ka,useExisting:Zr(()=>Bm),multi:!0},BPe={provide:ka,useExisting:Zr(()=>gL),multi:!0};let Bm=(()=>{class c extends Lm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=gf,this.createValidator=a=>XJ}enabled(a){return a}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=os(c)))(h||c)}}(),c.\u0275dir=bt({type:c,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(a,h){2&a&&et("required",h._enabled?"":null)},inputs:{required:"required"},features:[vn([LPe]),gn]}),c})(),gL=(()=>{class c extends Bm{constructor(){super(...arguments),this.createValidator=a=>YJ}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=os(c)))(h||c)}}(),c.\u0275dir=bt({type:c,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(a,h){2&a&&et("required",h._enabled?"":null)},features:[vn([BPe]),gn]}),c})(),$Pe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[Eee]}),c})(),Vp=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[$Pe]}),c})();function GPe(c){this.wrapped=c}function kD(c){var l,a;function d(p,g){try{var m=c[p](g),v=m.value,y=v instanceof GPe;Promise.resolve(y?v.wrapped:v).then(function(_){y?d("return"===p?"return":"next",_):f(m.done?"return":"normal",_)},function(_){d("throw",_)})}catch(_){f("throw",_)}}function f(p,g){switch(p){case"return":l.resolve({value:g,done:!0});break;case"throw":l.reject(g);break;default:l.resolve({value:g,done:!1})}(l=l.next)?d(l.key,l.arg):a=null}this._invoke=function h(p,g){return new Promise(function(m,v){var y={key:p,arg:g,resolve:m,reject:v,next:null};a?a=a.next=y:(l=a=y,d(p,g))})},"function"!=typeof c.return&&(this.return=void 0)}kD.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},kD.prototype.next=function(c){return this._invoke("next",c)},kD.prototype.throw=function(c){return this._invoke("throw",c)},kD.prototype.return=function(c){return this._invoke("return",c)},"undefined"!=typeof Symbol&&Symbol;const vRe=AJ(3,(c,l,a)=>{!function v4e(c,l){return l||(l=window&&window.customElements),!l||!!l.get(c)}(c)||function e4e(){var c,l;return null==(l=null==(c=null==window?void 0:window.location)?void 0:c.href)?void 0:l.includes("localhost:6006")}()?(a.define(c,l),PJ(),window&&!Object.keys(window.CDS._state.elementRegistry).some(h=>h===c)&&(window.CDS._state.elementRegistry=cT(To({},window.CDS._state.elementRegistry),{[c]:{}}))):Fm.warn(c+" has already been registered")});function Jee(c,l){bJ()&&IJ(["customElements"])&&vRe(c,l,window.customElements)}let ete=!1;function yRe(c){if((c=Math.trunc(c)||0)<0&&(c+=this.length),!(c<0||c>=this.length))return this[c]}if(!ete){ete=!0;const c=Reflect.getPrototypeOf(Int8Array);for(const l of[Array,String,c])Object.defineProperty(l.prototype,"at",{value:yRe,writable:!0,enumerable:!1,configurable:!0})}let tte=!1,nte=!1;function ite(c,l,a){Object.defineProperty(c,a,{configurable:!0,enumerable:!0,get:function(){return this.hasAttribute(l)?this.getAttribute(l):null},set:function(h){null!==h?this.setAttribute(l,h):this.removeAttribute(l)}})}function rte(c,l,a,h,d,f,p){try{var g=c[f](p),m=g.value}catch(v){return void a(v)}g.done?l(m):Promise.resolve(m).then(h,d)}function yL(c){return function(){var l=this,a=arguments;return new Promise(function(h,d){var f=c.apply(l,a);function p(m){rte(f,h,d,p,g,"next",m)}function g(m){rte(f,h,d,p,g,"throw",m)}p(void 0)})}}tte||Element.prototype.hasOwnProperty("role")||(ite(Element.prototype,"role","role"),tte=!0),nte||Element.prototype.hasOwnProperty("ariaLabel")||(nte=!0,["ActiveDescendant","Atomic","AutoComplete","Busy","Checked","ColCount","ColIndex","ColSpan","Controls","Current","DescribedBy","Details","Disabled","ErrorMessage","Expanded","FlowTo","HasPopup","Hidden","Invalid","KeyShortcuts","Label","LabelledBy","Level","Live","Modal","MultiLine","MultiSelectable","Orientation","Owns","Placeholder","PosInSet","Pressed","ReadOnly","Relevant","Required","RoleDescription","RowCount","RowIndex","RowSpan","Selected","SetSize","Sort","ValueMax","ValueMin","ValueNow","ValueText"].forEach(c=>ite(Element.prototype,"aria-"+c.toLowerCase(),"aria"+c)));const ED=window,_L=ED.ShadowRoot&&(void 0===ED.ShadyCSS||ED.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,bL=Symbol(),ste=new WeakMap;class ote{constructor(l,a,h){if(this._$cssResult$=!0,h!==bL)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=l,this.t=a}get styleSheet(){let l=this.o;const a=this.t;if(_L&&void 0===l){const h=void 0!==a&&1===a.length;h&&(l=ste.get(a)),void 0===l&&((this.o=l=new CSSStyleSheet).replaceSync(this.cssText),h&&ste.set(a,l))}return l}toString(){return this.cssText}}const CL=(c,...l)=>{const a=1===c.length?c[0]:l.reduce((h,d,f)=>h+(p=>{if(!0===p._$cssResult$)return p.cssText;if("number"==typeof p)return p;throw Error("Value passed to 'css' function must be a 'css' function result: "+p+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(d)+c[f+1],c[0]);return new ote(a,c,bL)},ate=_L?c=>c:c=>c instanceof CSSStyleSheet?(l=>{let a="";for(const h of l.cssRules)a+=h.cssText;return(c=>new ote("string"==typeof c?c:c+"",void 0,bL))(a)})(c):c;var xL;const AD=window,lte=AD.trustedTypes,CRe=lte?lte.emptyScript:"",cte=AD.reactiveElementPolyfillSupport,wL={toAttribute(c,l){switch(l){case Boolean:c=c?CRe:null;break;case Object:case Array:c=null==c?c:JSON.stringify(c)}return c},fromAttribute(c,l){let a=c;switch(l){case Boolean:a=null!==c;break;case Number:a=null===c?null:Number(c);break;case Object:case Array:try{a=JSON.parse(c)}catch(h){a=null}}return a}},ute=(c,l)=>l!==c&&(l==l||c==c),SL={attribute:!0,type:String,converter:wL,reflect:!1,hasChanged:ute};class By extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(l){var a;null!==(a=this.h)&&void 0!==a||(this.h=[]),this.h.push(l)}static get observedAttributes(){this.finalize();const l=[];return this.elementProperties.forEach((a,h)=>{const d=this._$Ep(h,a);void 0!==d&&(this._$Ev.set(d,h),l.push(d))}),l}static createProperty(l,a=SL){if(a.state&&(a.attribute=!1),this.finalize(),this.elementProperties.set(l,a),!a.noAccessor&&!this.prototype.hasOwnProperty(l)){const h="symbol"==typeof l?Symbol():"__"+l,d=this.getPropertyDescriptor(l,h,a);void 0!==d&&Object.defineProperty(this.prototype,l,d)}}static getPropertyDescriptor(l,a,h){return{get(){return this[a]},set(d){const f=this[l];this[a]=d,this.requestUpdate(l,f,h)},configurable:!0,enumerable:!0}}static getPropertyOptions(l){return this.elementProperties.get(l)||SL}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const l=Object.getPrototypeOf(this);if(l.finalize(),this.elementProperties=new Map(l.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const a=this.properties,h=[...Object.getOwnPropertyNames(a),...Object.getOwnPropertySymbols(a)];for(const d of h)this.createProperty(d,a[d])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(l){const a=[];if(Array.isArray(l)){const h=new Set(l.flat(1/0).reverse());for(const d of h)a.unshift(ate(d))}else void 0!==l&&a.push(ate(l));return a}static _$Ep(l,a){const h=a.attribute;return!1===h?void 0:"string"==typeof h?h:"string"==typeof l?l.toLowerCase():void 0}u(){var l;this._$E_=new Promise(a=>this.enableUpdating=a),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(l=this.constructor.h)||void 0===l||l.forEach(a=>a(this))}addController(l){var a,h;(null!==(a=this._$ES)&&void 0!==a?a:this._$ES=[]).push(l),void 0!==this.renderRoot&&this.isConnected&&(null===(h=l.hostConnected)||void 0===h||h.call(l))}removeController(l){var a;null===(a=this._$ES)||void 0===a||a.splice(this._$ES.indexOf(l)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((l,a)=>{this.hasOwnProperty(a)&&(this._$Ei.set(a,this[a]),delete this[a])})}createRenderRoot(){var l;const a=null!==(l=this.shadowRoot)&&void 0!==l?l:this.attachShadow(this.constructor.shadowRootOptions);return((c,l)=>{_L?c.adoptedStyleSheets=l.map(a=>a instanceof CSSStyleSheet?a:a.styleSheet):l.forEach(a=>{const h=document.createElement("style"),d=ED.litNonce;void 0!==d&&h.setAttribute("nonce",d),h.textContent=a.cssText,c.appendChild(h)})})(a,this.constructor.elementStyles),a}connectedCallback(){var l;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(l=this._$ES)||void 0===l||l.forEach(a=>{var h;return null===(h=a.hostConnected)||void 0===h?void 0:h.call(a)})}enableUpdating(l){}disconnectedCallback(){var l;null===(l=this._$ES)||void 0===l||l.forEach(a=>{var h;return null===(h=a.hostDisconnected)||void 0===h?void 0:h.call(a)})}attributeChangedCallback(l,a,h){this._$AK(l,h)}_$EO(l,a,h=SL){var d;const f=this.constructor._$Ep(l,h);if(void 0!==f&&!0===h.reflect){const p=(void 0!==(null===(d=h.converter)||void 0===d?void 0:d.toAttribute)?h.converter:wL).toAttribute(a,h.type);this._$El=l,null==p?this.removeAttribute(f):this.setAttribute(f,p),this._$El=null}}_$AK(l,a){var h;const d=this.constructor,f=d._$Ev.get(l);if(void 0!==f&&this._$El!==f){const p=d.getPropertyOptions(f),g="function"==typeof p.converter?{fromAttribute:p.converter}:void 0!==(null===(h=p.converter)||void 0===h?void 0:h.fromAttribute)?p.converter:wL;this._$El=f,this[f]=g.fromAttribute(a,p.type),this._$El=null}}requestUpdate(l,a,h){let d=!0;void 0!==l&&(((h=h||this.constructor.getPropertyOptions(l)).hasChanged||ute)(this[l],a)?(this._$AL.has(l)||this._$AL.set(l,a),!0===h.reflect&&this._$El!==l&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(l,h))):d=!1),!this.isUpdatePending&&d&&(this._$E_=this._$Ej())}_$Ej(){var l=this;return yL(function*(){l.isUpdatePending=!0;try{yield l._$E_}catch(h){Promise.reject(h)}const a=l.scheduleUpdate();return null!=a&&(yield a),!l.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var l;if(!this.isUpdatePending)return;this._$Ei&&(this._$Ei.forEach((d,f)=>this[f]=d),this._$Ei=void 0);let a=!1;const h=this._$AL;try{a=this.shouldUpdate(h),a?(this.willUpdate(h),null===(l=this._$ES)||void 0===l||l.forEach(d=>{var f;return null===(f=d.hostUpdate)||void 0===f?void 0:f.call(d)}),this.update(h)):this._$Ek()}catch(d){throw a=!1,this._$Ek(),d}a&&this._$AE(h)}willUpdate(l){}_$AE(l){var a;null===(a=this._$ES)||void 0===a||a.forEach(h=>{var d;return null===(d=h.hostUpdated)||void 0===d?void 0:d.call(h)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(l)),this.updated(l)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(l){return!0}update(l){void 0!==this._$EC&&(this._$EC.forEach((a,h)=>this._$EO(h,this[h],a)),this._$EC=void 0),this._$Ek()}updated(l){}firstUpdated(l){}}var TL;By.finalized=!0,By.elementProperties=new Map,By.elementStyles=[],By.shadowRootOptions={mode:"open"},null==cte||cte({ReactiveElement:By}),(null!==(xL=AD.reactiveElementVersions)&&void 0!==xL?xL:AD.reactiveElementVersions=[]).push("1.4.1");const ID=window,Vy=ID.trustedTypes,hte=Vy?Vy.createPolicy("lit-html",{createHTML:c=>c}):void 0,wf=`lit$${(Math.random()+"").slice(9)}$`,OL="?"+wf,xRe=`<${OL}>`,zy=document,vx=(c="")=>zy.createComment(c),yx=c=>null===c||"object"!=typeof c&&"function"!=typeof c,dte=Array.isArray,_x=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,pte=/-->/g,gte=/>/g,Vm=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),mte=/'/g,vte=/"/g,yte=/^(?:script|style|textarea|title)$/i,_te=c=>(l,...a)=>({_$litType$:c,strings:l,values:a}),DL=_te(1),wRe=_te(2),Uy=Symbol.for("lit-noChange"),Io=Symbol.for("lit-nothing"),bte=new WeakMap,Hy=zy.createTreeWalker(zy,129,null,!1);class bx{constructor({strings:l,_$litType$:a},h){let d;this.parts=[];let f=0,p=0;const g=l.length-1,m=this.parts,[v,y]=((c,l)=>{const a=c.length-1,h=[];let d,f=2===l?"<svg>":"",p=_x;for(let m=0;m<a;m++){const v=c[m];let y,_,b=-1,C=0;for(;C<v.length&&(p.lastIndex=C,_=p.exec(v),null!==_);)C=p.lastIndex,p===_x?"!--"===_[1]?p=pte:void 0!==_[1]?p=gte:void 0!==_[2]?(yte.test(_[2])&&(d=RegExp("</"+_[2],"g")),p=Vm):void 0!==_[3]&&(p=Vm):p===Vm?">"===_[0]?(p=null!=d?d:_x,b=-1):void 0===_[1]?b=-2:(b=p.lastIndex-_[2].length,y=_[1],p=void 0===_[3]?Vm:'"'===_[3]?vte:mte):p===vte||p===mte?p=Vm:p===pte||p===gte?p=_x:(p=Vm,d=void 0);const x=p===Vm&&c[m+1].startsWith("/>")?" ":"";f+=p===_x?v+xRe:b>=0?(h.push(y),v.slice(0,b)+"$lit$"+v.slice(b)+wf+x):v+wf+(-2===b?(h.push(void 0),m):x)}const g=f+(c[a]||"<?>")+(2===l?"</svg>":"");if(!Array.isArray(c)||!c.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==hte?hte.createHTML(g):g,h]})(l,a);if(this.el=bx.createElement(v,h),Hy.currentNode=this.el.content,2===a){const _=this.el.content,b=_.firstChild;b.remove(),_.append(...b.childNodes)}for(;null!==(d=Hy.nextNode())&&m.length<g;){if(1===d.nodeType){if(d.hasAttributes()){const _=[];for(const b of d.getAttributeNames())if(b.endsWith("$lit$")||b.startsWith(wf)){const C=y[p++];if(_.push(b),void 0!==C){const x=d.getAttribute(C.toLowerCase()+"$lit$").split(wf),S=/([.?@])?(.*)/.exec(C);m.push({type:1,index:f,name:S[2],strings:x,ctor:"."===S[1]?wte:"?"===S[1]?Ste:"@"===S[1]?Tte:Cx})}else m.push({type:6,index:f})}for(const b of _)d.removeAttribute(b)}if(yte.test(d.tagName)){const _=d.textContent.split(wf),b=_.length-1;if(b>0){d.textContent=Vy?Vy.emptyScript:"";for(let C=0;C<b;C++)d.append(_[C],vx()),Hy.nextNode(),m.push({type:2,index:++f});d.append(_[b],vx())}}}else if(8===d.nodeType)if(d.data===OL)m.push({type:2,index:f});else{let _=-1;for(;-1!==(_=d.data.indexOf(wf,_+1));)m.push({type:7,index:f}),_+=wf.length-1}f++}}static createElement(l,a){const h=zy.createElement("template");return h.innerHTML=l,h}}function zm(c,l,a=c,h){var d,f,p,g;if(l===Uy)return l;let m=void 0!==h?null===(d=a._$Co)||void 0===d?void 0:d[h]:a._$Cl;const v=yx(l)?void 0:l._$litDirective$;return(null==m?void 0:m.constructor)!==v&&(null===(f=null==m?void 0:m._$AO)||void 0===f||f.call(m,!1),void 0===v?m=void 0:(m=new v(c),m._$AT(c,a,h)),void 0!==h?(null!==(p=(g=a)._$Co)&&void 0!==p?p:g._$Co=[])[h]=m:a._$Cl=m),void 0!==m&&(l=zm(c,m._$AS(c,l.values),m,h)),l}class xte{constructor(l,a){this.u=[],this._$AN=void 0,this._$AD=l,this._$AM=a}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(l){var a;const{el:{content:h},parts:d}=this._$AD,f=(null!==(a=null==l?void 0:l.creationScope)&&void 0!==a?a:zy).importNode(h,!0);Hy.currentNode=f;let p=Hy.nextNode(),g=0,m=0,v=d[0];for(;void 0!==v;){if(g===v.index){let y;2===v.type?y=new $y(p,p.nextSibling,this,l):1===v.type?y=new v.ctor(p,v.name,v.strings,this,l):6===v.type&&(y=new Ote(p,this,l)),this.u.push(y),v=d[++m]}g!==(null==v?void 0:v.index)&&(p=Hy.nextNode(),g++)}return f}p(l){let a=0;for(const h of this.u)void 0!==h&&(void 0!==h.strings?(h._$AI(l,h,a),a+=h.strings.length-2):h._$AI(l[a])),a++}}class $y{constructor(l,a,h,d){var f;this.type=2,this._$AH=Io,this._$AN=void 0,this._$AA=l,this._$AB=a,this._$AM=h,this.options=d,this._$Cm=null===(f=null==d?void 0:d.isConnected)||void 0===f||f}get _$AU(){var l,a;return null!==(a=null===(l=this._$AM)||void 0===l?void 0:l._$AU)&&void 0!==a?a:this._$Cm}get parentNode(){let l=this._$AA.parentNode;const a=this._$AM;return void 0!==a&&11===l.nodeType&&(l=a.parentNode),l}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(l,a=this){l=zm(this,l,a),yx(l)?l===Io||null==l||""===l?(this._$AH!==Io&&this._$AR(),this._$AH=Io):l!==this._$AH&&l!==Uy&&this.g(l):void 0!==l._$litType$?this.$(l):void 0!==l.nodeType?this.T(l):(c=>dte(c)||"function"==typeof(null==c?void 0:c[Symbol.iterator]))(l)?this.k(l):this.g(l)}O(l,a=this._$AB){return this._$AA.parentNode.insertBefore(l,a)}T(l){this._$AH!==l&&(this._$AR(),this._$AH=this.O(l))}g(l){this._$AH!==Io&&yx(this._$AH)?this._$AA.nextSibling.data=l:this.T(zy.createTextNode(l)),this._$AH=l}$(l){var a;const{values:h,_$litType$:d}=l,f="number"==typeof d?this._$AC(l):(void 0===d.el&&(d.el=bx.createElement(d.h,this.options)),d);if((null===(a=this._$AH)||void 0===a?void 0:a._$AD)===f)this._$AH.p(h);else{const p=new xte(f,this),g=p.v(this.options);p.p(h),this.T(g),this._$AH=p}}_$AC(l){let a=bte.get(l.strings);return void 0===a&&bte.set(l.strings,a=new bx(l)),a}k(l){dte(this._$AH)||(this._$AH=[],this._$AR());const a=this._$AH;let h,d=0;for(const f of l)d===a.length?a.push(h=new $y(this.O(vx()),this.O(vx()),this,this.options)):h=a[d],h._$AI(f),d++;d<a.length&&(this._$AR(h&&h._$AB.nextSibling,d),a.length=d)}_$AR(l=this._$AA.nextSibling,a){var h;for(null===(h=this._$AP)||void 0===h||h.call(this,!1,!0,a);l&&l!==this._$AB;){const d=l.nextSibling;l.remove(),l=d}}setConnected(l){var a;void 0===this._$AM&&(this._$Cm=l,null===(a=this._$AP)||void 0===a||a.call(this,l))}}class Cx{constructor(l,a,h,d,f){this.type=1,this._$AH=Io,this._$AN=void 0,this.element=l,this.name=a,this._$AM=d,this.options=f,h.length>2||""!==h[0]||""!==h[1]?(this._$AH=Array(h.length-1).fill(new String),this.strings=h):this._$AH=Io}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(l,a=this,h,d){const f=this.strings;let p=!1;if(void 0===f)l=zm(this,l,a,0),p=!yx(l)||l!==this._$AH&&l!==Uy,p&&(this._$AH=l);else{const g=l;let m,v;for(l=f[0],m=0;m<f.length-1;m++)v=zm(this,g[h+m],a,m),v===Uy&&(v=this._$AH[m]),p||(p=!yx(v)||v!==this._$AH[m]),v===Io?l=Io:l!==Io&&(l+=(null!=v?v:"")+f[m+1]),this._$AH[m]=v}p&&!d&&this.j(l)}j(l){l===Io?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=l?l:"")}}class wte extends Cx{constructor(){super(...arguments),this.type=3}j(l){this.element[this.name]=l===Io?void 0:l}}const SRe=Vy?Vy.emptyScript:"";class Ste extends Cx{constructor(){super(...arguments),this.type=4}j(l){l&&l!==Io?this.element.setAttribute(this.name,SRe):this.element.removeAttribute(this.name)}}class Tte extends Cx{constructor(l,a,h,d,f){super(l,a,h,d,f),this.type=5}_$AI(l,a=this){var h;if((l=null!==(h=zm(this,l,a,0))&&void 0!==h?h:Io)===Uy)return;const d=this._$AH,f=l===Io&&d!==Io||l.capture!==d.capture||l.once!==d.once||l.passive!==d.passive,p=l!==Io&&(d===Io||f);f&&this.element.removeEventListener(this.name,this,d),p&&this.element.addEventListener(this.name,this,l),this._$AH=l}handleEvent(l){var a,h;"function"==typeof this._$AH?this._$AH.call(null!==(h=null===(a=this.options)||void 0===a?void 0:a.host)&&void 0!==h?h:this.element,l):this._$AH.handleEvent(l)}}class Ote{constructor(l,a,h){this.element=l,this.type=6,this._$AN=void 0,this._$AM=a,this.options=h}get _$AU(){return this._$AM._$AU}_$AI(l){zm(this,l)}}const Dte=ID.litHtmlPolyfillSupport;null==Dte||Dte(bx,$y),(null!==(TL=ID.litHtmlVersions)&&void 0!==TL?TL:ID.litHtmlVersions=[]).push("2.4.0");const kte=(c,l,a)=>{var h,d;const f=null!==(h=null==a?void 0:a.renderBefore)&&void 0!==h?h:l;let p=f._$litPart$;if(void 0===p){const g=null!==(d=null==a?void 0:a.renderBefore)&&void 0!==d?d:null;f._$litPart$=p=new $y(l.insertBefore(vx(),g),g,void 0,null!=a?a:{})}return p._$AI(c),p};var kL,ML;class Wy extends By{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var l,a;const h=super.createRenderRoot();return null!==(l=(a=this.renderOptions).renderBefore)&&void 0!==l||(a.renderBefore=h.firstChild),h}update(l){const a=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(l),this._$Do=kte(a,this.renderRoot,this.renderOptions)}connectedCallback(){var l;super.connectedCallback(),null===(l=this._$Do)||void 0===l||l.setConnected(!0)}disconnectedCallback(){var l;super.disconnectedCallback(),null===(l=this._$Do)||void 0===l||l.setConnected(!1)}render(){return Uy}}Wy.finalized=!0,Wy._$litElement$=!0,null===(kL=globalThis.litElementHydrateSupport)||void 0===kL||kL.call(globalThis,{LitElement:Wy});const Mte=globalThis.litElementPolyfillSupport;null==Mte||Mte({LitElement:Wy}),(null!==(ML=globalThis.litElementVersions)&&void 0!==ML?ML:globalThis.litElementVersions=[]).push("3.2.2");const Ete=CL`@charset "UTF-8";:host,:root{--2:var(--cds-global-layout-space-xxs, calc(4 * 1rem / var(--cds-global-base, 20)));--3:var(--cds-global-layout-space-xs, calc(8 * 1rem / var(--cds-global-base, 20)));--4:var(--cds-global-layout-space-sm, calc(12 * 1rem / var(--cds-global-base, 20)));--5:var(--cds-global-layout-space-md, calc(16 * 1rem / var(--cds-global-base, 20)));--6:var(--cds-global-layout-space-lg, calc(24 * 1rem / var(--cds-global-base, 20)));--7:var(--cds-global-layout-space-xl, calc(32 * 1rem / var(--cds-global-base, 20)))}[cds-layout~="wrap:none"]{flex-wrap:nowrap!important}[cds-layout*="align:stretch"]{flex-grow:1!important}[cds-layout*="align:shrink"]{flex-shrink:1!important;flex-grow:0!important}[cds-layout~=horizontal]{display:flex;flex-direction:row;flex-wrap:wrap;justify-items:flex-start;align-items:flex-start;width:100%;margin:0;min-height:0}[cds-layout~=horizontal]>[cds-layout~=horizontal],[cds-layout~=horizontal]>[cds-layout~=vertical],[cds-layout~=horizontal]>[cds-text]{width:initial!important}[cds-layout~=horizontal][cds-layout*="align:top"]{align-items:flex-start}[cds-layout~=horizontal][cds-layout*="align:left"]{justify-content:flex-start}[cds-layout~=horizontal][cds-layout*="align:right"]{justify-content:flex-end}[cds-layout~=horizontal][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=horizontal][cds-layout*="align:horizontal-center"]{justify-content:center}[cds-layout~=horizontal][cds-layout*="align:center"]{align-items:center;align-content:center;justify-content:center}[cds-layout~=horizontal][cds-layout*="order:reverse"]{flex-direction:row-reverse}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]{justify-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>*{flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:vertical-center"]{align-self:center}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:horizontal-center"]{margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:top"]{align-self:flex-start}[cds-layout~=horizontal]>[cds-layout*="align:right"]{margin-left:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:left"]{margin-right:auto!important}[cds-layout~=vertical]{width:100%;display:flex;flex-direction:column;align-items:flex-start}[cds-layout~=vertical],[cds-layout~=vertical][cds-layout*="align:top"]{justify-content:flex-start}[cds-layout~=vertical][cds-layout*="align:left"]{align-items:flex-start}[cds-layout~=vertical][cds-layout*="align:right"]{align-items:flex-end}[cds-layout~=vertical][cds-layout*="align:vertical-center"]{justify-content:center}[cds-layout~=vertical][cds-layout*="align:horizontal-center"]{align-items:center}[cds-layout~=vertical][cds-layout*="align:center"]{align-items:center;justify-content:center}[cds-layout~=vertical][cds-layout*="order:reverse"]{flex-direction:column-reverse}[cds-layout~=vertical][cds-layout*="align:horizontal-stretch"]{align-items:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]{align-items:stretch;justify-content:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:vertical-center"]{margin-top:auto;margin-bottom:auto}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:horizontal-center"]{align-self:center}[cds-layout~=vertical]>[cds-layout*="align:top"]{margin-bottom:auto!important}[cds-layout~=vertical]>[cds-layout*="align:right"]{margin-left:auto}[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}[cds-layout~=grid]{display:grid;align-items:start;align-content:start;grid-template-columns:repeat(var(--cds-global-layout-grid-cols,12),1fr);width:100%}[cds-layout~=grid][cds-layout*=rows]{grid-template-rows:repeat(12,auto)}[cds-layout~=grid]>[cds-layout*=row]{align-self:stretch}[cds-layout~=grid][cds-layout*="align:top"]{align-content:start}[cds-layout~=grid][cds-layout*="align:right"]{justify-content:end}[cds-layout~=grid][cds-layout*="align:left"]{justify-content:start}[cds-layout~=grid][cds-layout*="align:horizontal-stretch"]{justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=grid][cds-layout*="align:horizontal-center"]{justify-items:center;justify-content:center}[cds-layout~=grid][cds-layout*="align:center"]{align-items:center;align-content:center;justify-items:center;justify-content:center}::slotted([cds-layout~="display:screen-reader-only"]),[cds-layout~="display:screen-reader-only"]{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);padding:0;border:0;height:1px;width:1px;overflow:hidden;white-space:nowrap;top:0;left:0;display:block!important}[cds-layout*="gap:none"]{gap:0}[cds-layout*="gap:xxs"]{gap:var(--2)}[cds-layout*="gap:xs"]{gap:var(--3)}[cds-layout*="gap:sm"]{gap:var(--4)}[cds-layout*="gap:md"]{gap:var(--5)}[cds-layout*="gap:lg"]{gap:var(--6)}[cds-layout~="p:none"]{padding:0!important}[cds-layout~="p:xxs"]{padding:var(--2)!important}[cds-layout~="p:xs"]{padding:var(--3)!important}[cds-layout~="p:sm"]{padding:var(--4)!important}[cds-layout~="p:md"]{padding:var(--5)!important}[cds-layout~="m:md"]{margin:var(--5)!important}[cds-layout~="p:lg"]{padding:var(--6)!important}[cds-layout~="p-y:xs"]{padding-top:var(--3)!important;padding-bottom:var(--3)!important}[cds-layout~="p-x:lg"]{padding-left:var(--6)!important;padding-right:var(--6)!important}[cds-layout~="p-y:lg"]{padding-top:var(--6)!important;padding-bottom:var(--6)!important}[cds-layout~="p-l:md"]{padding-left:var(--5)!important}@media (min-width:992px){[cds-layout*="gap@md:lg"]{gap:var(--6)}[cds-layout~="p@md:lg"]{padding:var(--6)!important}[cds-layout~="m@md:xl"]{margin:var(--7)!important}}[cds-layout~=fill]{width:100%!important}*,:after,:before{box-sizing:border-box}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>::slotted(*),[cds-layout~=horizontal][cds-layout*="align:stretch"]>::slotted(*),[cds-layout~=vertical][cds-layout*="align:stretch"]>::slotted(*){flex-grow:1}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:left"]),[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}@media (min-width:576px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto}}@media (min-width:768px){[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto}}@media (min-width:992px){[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:left"]){margin-right:auto}}@media (min-width:1200px){[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto}}@media (min-width:1440px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto}}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:left"]){margin-right:auto!important}@media (min-width:576px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto!important}}@media (min-width:768px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto!important}}@media (min-width:992px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:left"]){margin-right:auto!important}}@media (min-width:1200px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto!important}}@media (min-width:1440px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto!important}}[cds-text]{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);margin-top:0;margin-bottom:0}[cds-text][cds-layout~=grid]::after,[cds-text][cds-layout~=grid]::before,[cds-text][cds-layout~=horizontal]::after,[cds-text][cds-layout~=horizontal]::before,[cds-text][cds-layout~=vertical]::after,[cds-text][cds-layout~=vertical]::before{display:none}[cds-text*=display],[cds-text*=section],[cds-text*=subsection],[cds-text*=title]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);color:var(--cds-global-typography-color-400,var(--cds-global-color-construction-900,#21333b))}[cds-text*=body],[cds-text*=message],[cds-text*=secondary]{color:var(--cds-global-typography-color-500,var(--cds-global-color-black,#000))}[cds-text*=inline]{width:auto!important;display:inline-block!important}[cds-text*=display]{font-size:var(--cds-global-typography-display-font-size,calc(40 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-display-font-weight,400);line-height:var(--cds-global-typography-display-line-height,1.1em);letter-spacing:var(--cds-global-typography-display-letter-spacing,-.0125em)}[cds-text*=display]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) + .037em)}[cds-text*=display]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) - .044em)}[cds-text*=title]{font-size:var(--cds-global-typography-title-font-size,calc(24 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-title-font-weight,400);line-height:var(--cds-global-typography-title-line-height,1.16667em);letter-spacing:var(--cds-global-typography-title-letter-spacing,-.008333em)}[cds-text*=title]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) + .037em)}[cds-text*=title]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) - .044em)}[cds-text*=section]{font-size:var(--cds-global-typography-section-font-size,calc(20 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-section-font-weight,400);line-height:var(--cds-global-typography-section-line-height,1.2em);letter-spacing:var(--cds-global-typography-section-letter-spacing,-.01em)}[cds-text*=section]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) + .037em)}[cds-text*=section]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) - .044em)}[cds-text*=subsection]{font-size:var(--cds-global-typography-subsection-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-subsection-font-weight,400);line-height:var(--cds-global-typography-subsection-line-height,1.25em);letter-spacing:var(--cds-global-typography-subsection-letter-spacing,-.0125em)}[cds-text*=subsection]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=subsection]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=body]{font-weight:var(--cds-global-typography-body-font-weight,400);font-size:var(--cds-global-typography-body-font-size,calc(14 * 1rem / var(--cds-global-base,20)));letter-spacing:var(--cds-global-typography-body-letter-spacing,-.014286em);line-height:var(--cds-global-typography-body-line-height,1.42857em)}[cds-text*=body]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) + .1em)}[cds-text*=body]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) - .044em)}body[cds-text*=body]::after,body[cds-text*=body]::before{content:none}[cds-text*=message]{font-size:var(--cds-global-typography-message-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-message-font-weight,calc(400 * 1rem / var(--cds-global-base,20)));line-height:var(--cds-global-typography-message-line-height,1.25em);letter-spacing:var(--cds-global-typography-message-letter-spacing,-.0125em)}[cds-text*=message]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=message]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=secondary]{font-size:var(--cds-global-typography-secondary-font-size,calc(13 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-secondary-font-weight,400);line-height:var(--cds-global-typography-secondary-line-height,1.23077em);letter-spacing:var(--cds-global-typography-secondary-letter-spacing,-.007692em)}[cds-text*=secondary]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) + .037em)}[cds-text*=secondary]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) - .044em)}[cds-text~=link]{color:var(--cds-global-typography-link-color,var(--cds-global-color-blue-800,#00608a))!important;text-decoration:underline!important;line-height:inherit!important;font-size:inherit!important}[cds-text~=link]:focus{outline:var(--cds-alias-object-interaction-outline,Highlight solid 2px);outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}[cds-text~=link]:hover{color:var(--cds-global-typography-link-color-hover,var(--cds-global-color-blue-900,#004b6b))!important}[cds-text~=link]:visited:not([cds-text~=static]){color:var(--cds-global-typography-link-color-visited,var(--cds-global-color-lavender-600,#3b40ce))!important}[cds-text~=link]:visited:not([cds-text~=static]):hover{color:var(--cds-global-typography-link-color-visited-hover,var(--cds-global-color-lavender-700,#2429c2))!important}@media (-webkit-min-device-pixel-ratio:0){[cds-text=link]:focus{outline:var(--cds-alias-object-interaction-outline-webkit,5px auto -webkit-focus-ring-color)}}[cds-text~=code]{color:var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200));font-family:monospace;font-size:1.1em}[cds-divider]{display:block;height:var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20)));overflow:hidden;box-shadow:var(--cds-alias-object-border-color,var(--cds-global-color-construction-200,#cbd4d8)) 0 0 0 var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20))) inset}[cds-text~=light]{font-weight:var(--cds-global-typography-font-weight-light,300)!important}[cds-text~=justify]{text-align:justify!important}[cds-text~=left]{text-align:left!important}[cds-text~=right]{text-align:right!important}[cds-text~=center]{text-align:center!important}[cds-text~=lhe]{padding:.05px 0}[cds-text~=lhe]::before{content:"";margin-top:-.124em;display:block;height:0}[cds-text~=lhe]::after{content:"";margin-bottom:-.221em;display:block;height:0}[cds-text*=h2],[cds-text*=h3]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);font-size:1.4rem;font-weight:200;color:var(--cds-global-typography-color-400);line-height:1.7143em;letter-spacing:-.017857em}[cds-text*=h2]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.7143em - 1em)/ 2))*-1) + .037em)}[cds-text*=h2]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.7143em - 1em)/ 2))*-1) - .044em)}[cds-text*=h3]{font-size:1.1rem;line-height:1.0909em;letter-spacing:-.013636em}[cds-text*=h3]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.0909em - 1em)/ 2))*-1) + .037em)}[cds-text*=h3]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.0909em - 1em)/ 2))*-1) - .044em)}:host{all:initial;display:block;visibility:inherit;font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);contain:layout;box-sizing:border-box!important;-webkit-appearance:none!important}*,:after,:before{box-sizing:inherit!important}slot{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);display:contents!important}::slotted(*){font-family:inherit;box-sizing:inherit}::slotted(*)::placeholder{color:var(--cds-global-typography-color-200,var(--cds-global-color-construction-600,#4f6169))}:host([_is-anchor]),:host([role=button]){cursor:pointer!important}:host([_is-anchor]) ::slotted(*),:host([role=button]) ::slotted(*){cursor:pointer!important}:host([role=button][disabled]){cursor:not-allowed!important}:host([role=button][disabled]) ::slotted(*){cursor:not-allowed!important;pointer-events:none}:host([hidden]),[hidden]{display:none!important}:host([hidden*=false]){display:block!important}:host([role=dialog][hidden]),:host([role=dialog][hidden]) ::slotted(*){display:block!important;visibility:hidden!important}:host([role=dialog][hidden*=false]),:host([role=dialog][hidden*=false]) ::slotted(*){visibility:visible!important}:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:Highlight solid 2px;outline:5px auto -webkit-focus-ring-color;outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}`;function EL(c){return`calc((${c} / var(--cds-global-base)) * 1rem)`}const MRe=(c,l)=>"method"===l.kind&&l.descriptor&&!("value"in l.descriptor)?cT(To({},l),{finisher(a){a.createProperty(l.key,c)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:l.key,initializer(){"function"==typeof l.initializer&&(this[l.key]=l.initializer.call(this))},finisher(a){a.createProperty(l.key,c)}};function Ate(c){return(l,a)=>void 0!==a?void l.constructor.createProperty(a,c):MRe(c,l)}function Ite(c,l){switch(l&&l.type){case Array:case Object:return To({reflect:!1},l);case String:return To({reflect:!0,attribute:Rm(c),converter:{toAttribute:a=>a||null}},l);case Number:return To({reflect:!0,attribute:Rm(c)},l);case Boolean:return To({reflect:!0,attribute:Rm(c),converter:{toAttribute:a=>a?"":null,fromAttribute:a=>function mRe(c){return null!=c&&""+c!="false"}(a)}},l);case Date:return To({reflect:!1,converter:{fromAttribute:a=>new Date(a)}},l);default:return To({},l)}}function Hs(c){return(l,a)=>(null!=c&&c.required&&function ERe(c,l,a){const h=c.firstUpdated;c.firstUpdated=function(d){if(a&&a.required&&Np(this[l])){const f=a.requiredMessage||function(p="warning",g,m){const v=m.toLocaleLowerCase();return`${DJ(p)}: ${g} is required to use ${v} component. Set the JS Property or HTML Attribute.\n\n`+(xJ()?`Angular: <${v} [${g}]="..."></${v}>\n`:"")+(SJ()?`Vue: <${v} :${g}="..."></${v}>\n`:"")+(wJ()?`React: <${function n4e(c){return DJ(function t4e(c){return c.split("-").map((l,a)=>a?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():l).join("")}(c))}(v)} ${y=g,y.startsWith("aria")?Rm(y):y}={...} />\n`:"")+`HTML: <${v} ${Rm(g)}="..."></${v}>\nJavaScript: document.querySelector('${v}').${g} = '...';\n\n`;var y}(a.required,l,this.tagName);if("error"===a.required)throw Error(f);Fm.warn(f,this)}h&&h.call(this,d)}}(l,a,c),Ate(Ite(a,c))(l,a))}function Pte(c){return(l,a)=>{const h=Ite(a,c);return h&&(h.reflect=!(null==c||!c.reflect)&&c.reflect,h.reflect&&!(null!=c&&c.attribute)&&(h.attribute="_"+Rm(a))),Ate(h)(l,a)}}var nd,c,PRe=CL`@keyframes fadeInAndOut{0%,to{opacity:0}75%{opacity:1}}:host{--color:currentColor;display:inline-block;height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));margin:0;vertical-align:middle;fill:var(--color);color:var(--color);contain:strict;cursor:inherit}svg{display:block}:host([size*=xs]){height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)))}:host([size*=sm]){height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)))}:host([size*=md]){height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)))}:host([size*=lg]){height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)))}:host([size*=xl]){height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)))}:host([size*=xxl]){height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))))}:host([size*=fit]){height:auto;width:auto;contain:layout}:host([status=success]){--color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([status=danger]){--color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([status=warning]){--color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([status=info]){--color:var(--cds-alias-status-info-shade, var(--cds-global-color-blue-800, #00608a))}:host([inverse]){--color:var(--cds-global-color-construction-200, #cbd4d8)}:host([direction=up]){transform:rotate(0)}:host([direction=down]){transform:rotate(180deg)}:host([direction=right]){transform:rotate(90deg)}:host([direction=left]){transform:rotate(270deg)}:host([flip=horizontal]){transform:scale(-1) rotateX(180deg)}:host([flip=vertical]){transform:scale(-1) rotateY(180deg)}.alert,.badge{fill:var(--badge-color,var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200)))}:host([badge=success]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge=danger]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge*=warning]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge=inherit]){--badge-color:currentColor}:host([badge=info]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([badge=inherit-triangle]){--badge-color:currentColor}:host([badge][inverse]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge=success][inverse]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge*=warning][inverse]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge*=inherit][inverse]){--badge-color:currentColor}:host([badge=info][inverse]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}.cds-internal-dot-1{animation:fadeInAndOut 1.8s ease-in 0s infinite}.cds-internal-dot-2{animation:fadeInAndOut 1.8s ease-out .422s infinite}.cds-internal-dot-3{animation:fadeInAndOut 1.8s ease-out .675s infinite}@media (prefers-reduced-motion){.cds-internal-dot-1,.cds-internal-dot-2,.cds-internal-dot-3{animation:none}}`;function LRe(c,l){let a="";switch(function RRe(c){switch(!0){case Np(c):return nd.NilSizeValue;case function Rte(c){return["xxs","xs","sm","md","lg","xl","xxl"].indexOf(c)>-1}(c):return nd.ValidSizeString;case function pJ(c){return HN(c)&&!fJ(c.trim())&&+c==+c}(c):return nd.ValidNumericString;default:return nd.BadSizeValue}}(function FRe(c){return Np(c)?"":function i4e(c,l,a=""){const h=c.split(" "),d=""===a?h.filter(f=>f!==l):h.map(f=>f===l?a:f);return d.length>0?d.join(" "):""}(c,"fit")}(l))){case nd.ValidNumericString:return a=EL(parseInt(l)),void function DRe(c,...l){l.forEach(([a,h])=>{c.style[a]=h})}(c,...function NRe(c,l){return!sx(c)&&c.indexOf("fit")>-1?[["width","auto"],["height","auto"],["min-width",l],["min-height",l]]:[["width",l],["height",l],["min-width",l],["min-height",l]]}(l,a));case nd.ValidSizeString:case nd.NilSizeValue:return void function kRe(c,...l){l.forEach(a=>{c.style[a]=""})}(c,"width","height","min-width","min-height");default:return}}function AL(c){return c.badge&&("inherit-triangle"===c.badge||"warning-triangle"===c.badge)}(c=nd||(nd={})).BadSizeValue="bad-value",c.ValidSizeString="value-is-string",c.ValidNumericString="value-is-numeric",c.NilSizeValue="value-is-nil";class Ju extends Wy{constructor(){super(...arguments),this._shape="unknown",this.solid=!1,this.inverse=!1}static get styles(){return[Ete,PRe]}get shape(){return this._shape}set shape(l){if(function G3e(c,l){return!Np(c)&&mJ(c,l)}(l,this._shape)){const a=this._shape;this._shape=l,this.requestUpdate("shape",a)}}get size(){return this._size}set size(l){if(function W3e(c,l){return function $3e(c){return uD(String,c)||sx(c)}(c)&&mJ(c,l)}(l,this._size)){const a=this._size;this._size=l,LRe(this,l),this.requestUpdate("size",a)}}updated(l){if(l.has("innerOffset")&&this.innerOffset>0){const a=EL(-1*this.innerOffset),h=`calc(100% + ${EL(2*this.innerOffset)})`;this.svg.style.width=h,this.svg.style.height=h,this.svg.style.margin=`${a} 0 0 ${a}`}}firstUpdated(l){if(super.firstUpdated(l),this.isConnected){let a="unknown";this.subscription=Js.stateUpdates.subscribe(h=>{"iconRegistry"===h.key&&dr.registry[this.shape]&&a!==this.shape&&(a=this.shape,this.requestUpdate("shape"))})}}disconnectedCallback(){var l;super.disconnectedCallback(),null==(l=this.subscription)||l.unsubscribe()}render(){return HN(dr.registry[this.shape])?DL`<span .innerHTML="${dr.registry[this.shape]}"></span>`:wRe`<svg .innerHTML="${function VRe(c){var h,d,f,p,g;const l=null!=(h=dr.registry[c.shape])?h:dr.registry.unknown;let a=c.solid&&l.solid?l.solid:l.outline;return c.badge&&!AL(c)&&(a=c.solid?null!=(d=l.solidBadged)?d:a:null!=(f=l.outlineBadged)?f:a),AL(c)&&(a=c.solid?null!=(p=l.solidAlerted)?p:a:null!=(g=l.outlineAlerted)?g:a),a}(this)+function BRe(c){let l="";return c.badge&&AL(c)?l='<path d="M26.85 1.14L21.13 11a1.28 1.28 0 001.1 2h11.45a1.28 1.28 0 001.1-2l-5.72-9.86a1.28 1.28 0 00-2.21 0z" class="alert" />':c.badge&&(l='<circle cx="30" cy="6" r="5" class="badge" />'),l}(this)}" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>`}}er([Hs({type:String})],Ju.prototype,"shape",null),er([Hs({type:String})],Ju.prototype,"size",null),er([Hs({type:String})],Ju.prototype,"direction",void 0),er([Hs({type:String})],Ju.prototype,"flip",void 0),er([Hs({type:Boolean})],Ju.prototype,"solid",void 0),er([Hs({type:String})],Ju.prototype,"status",void 0),er([Hs({type:Boolean})],Ju.prototype,"inverse",void 0),er([Hs({type:String})],Ju.prototype,"badge",void 0),er([Pte({type:Number})],Ju.prototype,"innerOffset",void 0),er([function IRe(c,l){return(({finisher:c,descriptor:l})=>(a,h)=>{var d;if(void 0===h){const f=null!==(d=a.originalKey)&&void 0!==d?d:a.key,p=null!=l?{kind:"method",placement:"prototype",key:f,descriptor:l(a.key)}:cT(To({},a),{key:f});return null!=c&&(p.finisher=function(g){c(g,f)}),p}{const f=a.constructor;void 0!==l&&Object.defineProperty(a,h,l(h)),null==c||c(f,h)}})({descriptor:a=>{const h={get(){var d,f;return null!==(f=null===(d=this.renderRoot)||void 0===d?void 0:d.querySelector(c))&&void 0!==f?f:null},enumerable:!0,configurable:!0};if(l){const d="symbol"==typeof a?Symbol():"__"+a;h.get=function(){var f,p;return void 0===this[d]&&(this[d]=null!==(p=null===(f=this.renderRoot)||void 0===f?void 0:f.querySelector(c))&&void 0!==p?p:null),this[d]}}return h}})}("svg")],Ju.prototype,"svg",void 0),Jee("cds-icon",Ju);class URe{constructor(l){this.host=l,this.host.addController(this)}hostConnected(){var l=this;return yL(function*(){yield l.host.updateComplete,l.host.addEventListener("keydown",a=>l.emulateActive(a)),l.host.addEventListener("mousedown",a=>l.emulateActive(a)),l.host.addEventListener("keyup",()=>l.emulateInactive()),l.host.addEventListener("blur",()=>l.emulateInactive()),l.host.addEventListener("mouseup",()=>l.emulateInactive())})()}emulateActive(l){var a;this.host.disabled||null==(a=this.host)||a.setAttribute("cds-active",""),"Space"===l.code&&l.target===this.host&&l.preventDefault()}emulateInactive(){this.host.removeAttribute("cds-active")}}class $Re{constructor(l){this.host=l,this.host.addController(this)}hostConnected(){this.host.popup&&(this.host.ariaControls=this.host.popup,this.host.ariaHasPopup="true",this.host.ariaExpanded="false")}}class GRe{constructor(l){this.host=l,this.host.addController(this)}hostUpdated(){null!==this.host.disabled&&(this.host.ariaDisabled=this.host.disabled),this.host.readonly&&(this.host.ariaDisabled=null)}}class jRe{constructor(l){this.host=l,this.host.addController(this)}hostUpdated(){null!=this.host.pressed&&(this.host.ariaPressed=this.host.pressed?"true":"false"),this.host.readonly&&(this.host.ariaPressed=null)}}class ZRe{constructor(l){this.host=l,this.host.addController(this)}hostConnected(){this.host.tabIndex=0}hostUpdated(){this.host.role=this.host.readonly?null:"button",this.host.tabIndex=this.host.disabled?-1:0,this.host.readonly&&this.host.removeAttribute("tabindex")}}class YRe{constructor(l){this.host=l,this.host.addController(this)}get currentAnchor(){var l;return"A"===(null==(l=this.host.parentElement)?void 0:l.tagName)?this.host.parentElement:null}hostConnected(){this.setAnchor()}hostUpdated(){this.setAnchor()}setAnchor(){this.currentAnchor&&this.currentAnchor!==this.previousAnchor&&(this.previousAnchor=this.currentAnchor,this.host.readonly=!0,this.currentAnchor.style.lineHeight="0",this.currentAnchor.style.textDecoration="none")}}const IL=c=>null!=c?c:Io;function Fte(c){c.preventDefault(),c.stopPropagation()}const PL=new Map([["arrow-left","ArrowLeft"],["arrow-right","ArrowRight"],["arrow-up","ArrowUp"],["arrow-down","ArrowDown"],["tab","Tab"],["enter","Enter"],["escape","Escape"],["space"," "],["home","Home"],["end","End"]]);var id;!function(c){c.ArrowUp="ArrowUp",c.ArrowDown="ArrowDown",c.ArrowLeft="ArrowLeft",c.ArrowRight="ArrowRight",c.End="End",c.Home="Home",c.PageUp="PageUp",c.PageDown="PageDown"}(id||(id={}));class aFe{constructor(l){this.host=l,this.triggerNativeButtonBehaviorHandler=this.triggerNativeButtonBehavior.bind(this),this.emulateKeyBoardEventBehaviorHandler=this.emulateKeyBoardEventBehavior.bind(this),this.host.addController(this)}hostUpdated(){this.setButtonType(),this.setupNativeButtonBehavior()}setButtonType(){!this.host.type&&this.host.closest("form")&&(this.host.type="submit")}setupNativeButtonBehavior(){this.host.readonly||this.host.disabled?(this.host.removeEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.removeEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler)):(this.host.addEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.addEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler))}emulateKeyBoardEventBehavior(l){!function tFe(c,l,a){c.filter(h=>function RL(c,l){return class JRe{static get keycodes(){return q3e(PL)}static add(l,a){PL.set(l,a)}static has(l){return PL.has(l)}static getCode(l,a=this.keycodes){return function eFe(c,l){return l.get(c)||""}(l,a)}}.getCode(l)===c.key}(l,h)).length>0&&a()}(["enter","space"],l,()=>{"submit"===this.host.type?this.triggerNativeButtonBehavior(l):this.host.click(),Fte(l)})}triggerNativeButtonBehavior(l){if(this.host.disabled)Fte(l);else if(!l.defaultPrevented){const a=function sFe(c,l,a){const h=document.createElement("div");l.appendChild(h),kte(c,l,To({renderBefore:h},a));const d=h.previousSibling;return h.remove(),d}(DL`<button aria-hidden="true" role="presentation" ?disabled="${this.host.disabled}" tabindex="-1" style="display:none!important" value="${IL(this.host.value)}" name="${IL(this.host.name)}" type="${IL(this.host.type)}"></button>`,this.host);null==a||a.dispatchEvent(new MouseEvent("click",{relatedTarget:this.host,composed:!0})),null==a||a.remove()}}}class cFe{constructor(l){this.host=l,this.host.addController(this)}hostUpdated(){null!=this.host.expanded&&(this.host.ariaExpanded=this.host.expanded?"true":"false"),this.host.readonly&&(this.host.ariaExpanded=null)}}let eh=class extends Wy{constructor(){super(...arguments),this._disabled=!1}get disabled(){return this._disabled}set disabled(c){const l=this._disabled;this._disabled=c,this.requestUpdate("disabled",l)}};er([Hs({type:Boolean})],eh.prototype,"pressed",void 0),er([Hs({type:Boolean})],eh.prototype,"expanded",void 0),er([Hs({type:Boolean})],eh.prototype,"readonly",void 0),er([Hs({type:String})],eh.prototype,"type",void 0),er([Hs({type:String})],eh.prototype,"name",void 0),er([Hs({type:String})],eh.prototype,"value",void 0),er([Hs({type:Boolean})],eh.prototype,"disabled",null),er([Hs({type:String})],eh.prototype,"popup",void 0),eh=er([function zRe(){return c=>c.addInitializer(l=>new URe(l))}(),function qRe(){return c=>c.addInitializer(l=>new ZRe(l))}(),function QRe(){return c=>c.addInitializer(l=>new jRe(l))}(),function lFe(){return c=>c.addInitializer(l=>new cFe(l))}(),function WRe(){return c=>c.addInitializer(l=>new GRe(l))}(),function HRe(){return c=>c.addInitializer(l=>new $Re(l))}(),function oFe(){return c=>c.addInitializer(l=>new aFe(l))}(),function XRe(){return c=>c.addInitializer(l=>new YRe(l))}()],eh);const PD={actions:{sort:"Sort",expand:"Expand",close:"Close",resize:"Resize",filter:"Filter"},alert:{closeButtonAriaLabel:"Close",loading:"Loading",info:"Info",success:"Success",warning:"Warning",danger:"Error"},dropdown:{open:"Open"},file:{browse:"browse",files:"files",removeFile:"remove file"},modal:{closeButtonAriaLabel:"Close modal",contentStart:"Beginning of modal content",contentBox:"Scrollable modal body",contentEnd:"End of modal content"},navigation:{navigationElement:"navigation",navigationLabel:"navigation menu",navigationAbridgedText:"View abridged menu",navigationUnabridgedText:"View unabridged menu"},overlay:{closeButtonAriaLabel:"Close dialog",contentStart:"Beginning of dialog content",contentEnd:"End of dialog content"},popup:{closeButtonAriaLabel:"Close popup",contentStart:"Beginning of popup content",contentEnd:"End of popup content"},password:{showButtonAriaLabel:"Show password",hideButtonAriaLabel:"Hide password"},progress:{loading:"Loading",looping:"Loading"},treeview:{loading:"Loading"},grid:{resizeColumn:"Resize Column",closeDetails:"Close Details",noData:"No Results Found",rowDetailStart:"Start of row details",rowDetailEnd:"End of row details",footerEnd:"End of grid rows",action:"Action",dropTarget:"Drop Item",pagination:{label:"grid pagination",firstPage:"go to first page",previousPage:"go to previous page",nextPage:"go to next page",lastPage:"go to last page",pageSize:"rows per page",page:"page"}}};class Um{static get keys(){return 0===Object.keys(Js.state.i18nRegistry).length&&(Js.state.i18nRegistry=Pm(PD,Js.state.i18nRegistry)),Pm(PD,Js.state.i18nRegistry)}static findKey(l){const a=Um.keys;return Object.keys(a).find(h=>vJ(a[h],l))}static get(l){return l&&Um.keys[l]||{}}static reset(){Js.state.i18nRegistry=Pm({},PD)}static hydrate(l,a){return JSON.parse(function s4e(c,l,a){return c.replace(/\$\{.+?\}/g,h=>function j3e(c,l,a=`\${${c}}`){return c.split(".").reduce((h,d)=>{try{const f=h[d];switch(!0){case null===f:case!1===f:case""===f:case 0===f:return f;default:return f||a}}catch(f){return a}},l)}(h.substr(2,h.length-3).trim(),l,a))}(JSON.stringify(l),a))}static localize(l){Js.state.i18nRegistry=Pm(PD,Js.state.i18nRegistry,l)}}var fFe=CL`:host{--icon-width:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--width:var(--icon-width);--height:var(--icon-width);--cursor:pointer;--color:var(--cds-global-typography-color-300, var(--cds-global-color-construction-800, #2d4048));--font-size:var(--cds-global-typography-font-size-3, calc(13 * 1rem / var(--cds-global-base, 20)));--background:transparent;--padding:0;--outline:var(--cds-alias-object-interaction-outline, Highlight solid 2px);--outline-offset:calc(var(--cds-alias-object-interaction-outline-offset, 1px) * -1);pointer-events:none;display:inline-block;outline:0!important}:host([role=button]){pointer-events:initial;cursor:var(--cursor)!important}:host([status=active]){--color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}::slotted([shape=close]),::slotted([shape=info-circle]),::slotted([shape=times]),:host([shape=close]),:host([shape=info-circle]){--icon-width:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)))}:host(:hover){--color:var(--cds-alias-object-interaction-color-hover, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active){--color:var(--cds-alias-object-interaction-color-active, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active) .private-host{transform:translateY(calc(var(--cds-global-space-1,calc(1 * 1rem / var(--cds-global-base,20)))/ 2))}:host([disabled]){--color:var(--cds-alias-object-interaction-color-disabled, var(--cds-global-color-construction-300, #aeb8bc))}.private-host{--icon-color:var(--color);background:var(--background);padding:var(--padding);color:var(--color);font-size:var(--font-size);display:flex;justify-content:center;align-items:center;min-width:var(--width);min-height:var(--height)}::slotted(cds-icon),cds-icon{width:var(--icon-width);height:var(--icon-height);pointer-events:none}::slotted(cds-icon:not([status])),cds-icon{--color:var(--icon-color)}:host([disabled]:active){pointer-events:none!important}.private-host::after{content:"";position:absolute;left:calc(-1*var(--width) - 1);top:calc(-1*var(--height) - 1);width:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)));height:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)))}:host([disabled]) .private-host::after{outline:0!important}:host(:focus) .private-host::after{outline:var(--outline);outline-offset:var(--outline-offset)}@media (-webkit-min-device-pixel-ratio:0){:host(:focus) .private-host::after{outline-color:-webkit-focus-ring-color}}`;class Hm extends eh{constructor(){super(...arguments),this.i18n=Um.keys.actions,this.cdsButtonAction=!0}render(){return DL`<div class="private-host"><slot><cds-icon .shape="${this.shape?this.shape:"ellipsis-vertical"}" .size="${this.iconSize}" ?solid="${this.pressed||this.expanded}" inner-offset="${1}"></cds-icon></slot></div>`}updated(l){super.updated(l),this.ariaLabel||this.readonly||Fm.warn("A aria-label is required for interactive cds-button-action type",this),l.has("readonly")&&(this.ariaHidden=this.readonly&&!this.hasAttribute("aria-label")?"true":null)}}Hm.styles=[Ete,fFe],er([Hs({type:String})],Hm.prototype,"shape",void 0),er([Hs({type:String,reflect:!0})],Hm.prototype,"action",void 0),er([Hs({type:String})],Hm.prototype,"iconSize",void 0),er([function uFe(){return(c,l)=>{const a=c.connectedCallback,h=c.disconnectedCallback;c.connectedCallback=function(){c.__i18nSub=Js.stateUpdates.subscribe(f=>{"i18nRegistry"===f.key&&this.requestUpdate(l)}),a&&a.apply(this)},c.disconnectedCallback=function(){c.__i18nSub.unsubscribe(),h&&h.apply(this)};const d={get(){const f=Pm(Um.keys[this.__i18nKey],this.__i18n||{});return Um.hydrate(f,this)},set(f){const p=function hFe(c,l){if(Np(c)){let a={};if(l.hasAttribute("cds-i18n")){const h=l.getAttribute("cds-i18n")+"";if(Np(h))a={};else try{a=JSON.parse(h)}catch(d){Fm.warn("Clarity i18n: Invalid JSON passed to cds-i18n"),a={}}}return a}return c}(f,this),g=function dFe(c,l,a,h){return Np(c)?vJ(a,h)?{update:!1}:{update:!0,values:a}:c===l?{update:!1,values:{}}:{update:!0,key:c,values:{}}}(Um.findKey(p)||"",this.__i18nKey,p,this.__i18n);void 0!==g.key&&(this.__i18nKey=g.key+""),void 0!==g.values&&(this.__i18n=To({},g.values)),!0===g.update&&this.requestUpdate(),this.requestUpdate(l)},enumerable:!0,configurable:!0};return void 0!==l?function(f,p,g){const m=Object.defineProperty(p,g,f);return Hs({type:Object,attribute:"cds-i18n"})(m,g)}(d,c,l):function(f,p){const g={kind:"method",placement:"prototype",key:p.key,descriptor:f};return Hs({type:Object})(g)}(d,c)}}()],Hm.prototype,"i18n",void 0),er([Pte({type:Boolean,reflect:!0,attribute:"cds-button-action"})],Hm.prototype,"cdsButtonAction",void 0);class Lte extends Hm{constructor(){super(...arguments),this.shape="close"}connectedCallback(){super.connectedCallback(),this.ariaLabel=this.ariaLabel?this.ariaLabel:this.i18n.close}}er([Hs({type:String})],Lte.prototype,"shape",void 0),Jee("cds-internal-close-button",Lte),dr.addIcons(NJ),dr.addAliases(["times",["close"]]);const Wn=["*"];function gFe(c,l){if(1&c&&(Tr(0),ie(1),Or()),2&c){const a=q(3);P(1),Ut(a.commonStrings.keys.danger)}}function mFe(c,l){if(1&c&&(I(0,"div",14),X(1,gFe,2,1,"ng-container",0),F()),2&c){const a=q().$implicit,h=q();P(1),R("ngIf",a.status===h.AccordionStatus.Error)}}function vFe(c,l){if(1&c&&(Tr(0),ie(1),Or()),2&c){const a=q(2);P(1),Ut(a.commonStrings.keys.danger)}}function yFe(c,l){if(1&c&&(Tr(0),ie(1),Or()),2&c){const a=q(2);P(1),Ut(a.commonStrings.keys.success)}}function _Fe(c,l){if(1&c){const a=at();I(0,"div",15),ee("@toggle.done",function(){De(a);const d=q().$implicit;return ke(q().collapsePanelOnAnimationDone(d))}),I(1,"div",16),pt(2,2),F()()}2&c&&R("@toggle",void 0)}function bFe(c,l){if(1&c){const a=at();Tr(0),X(1,mFe,2,1,"div",1),I(2,"div",2)(3,"div",3)(4,"button",4,5),ee("click",function(){return De(a),ke(q().togglePanel())}),EC(6,"async"),I(7,"span",6),X(8,vFe,2,1,"ng-container",0),X(9,yFe,2,1,"ng-container",0),F(),I(10,"span",7),ue(11,"cds-icon",8)(12,"span",9)(13,"cds-icon",10)(14,"cds-icon",11),F(),pt(15),pt(16,1),F()(),I(17,"div",12),X(18,_Fe,3,1,"div",13),F()(),Or()}if(2&c){const a=l.$implicit,h=q();let d;P(1),R("ngIf",a.status!==h.AccordionStatus.Inactive),P(1),R("ngClass",h.getPanelStateClasses(a)),P(2),Ft("clr-accordion-header-has-description",(null==(d=AC(6,16,h.accordionDescription.changes))?null:d.length)||h.accordionDescription.length),R("id",h.getAccordionHeaderId(a.templateId))("disabled",h.isAccordion&&a.disabled),et("aria-disabled",!h.isAccordion&&a.disabled)("aria-controls",h.getAccordionContentId(a.templateId))("aria-expanded",a.open),P(4),R("ngIf",a.status===h.AccordionStatus.Error),P(1),R("ngIf",a.status===h.AccordionStatus.Complete),P(8),R("@skipInitialRender",void 0)("id",h.getAccordionContentId(a.templateId)),et("aria-hidden",!a.open)("aria-labelledby",h.getAccordionHeaderId(a.templateId)),P(1),R("ngIf",a.open)}}const Bte=[[["clr-accordion-title"],["clr-step-title"]],[["clr-accordion-description"],["clr-step-description"]],"*"],Vte=["clr-accordion-title, clr-step-title","clr-accordion-description, clr-step-description","*"],zFe=["clrLoading",""];function UFe(c,l){1&c&&(I(0,"span"),ue(1,"span",2),F()),2&c&&(P(1),R("@spinner",void 0))}function HFe(c,l){if(1&c){const a=at();I(0,"span")(1,"span",3),ee("@validated.done",function(){De(a);const d=q();return ke(d.loadingStateChange(d.buttonState.DEFAULT))}),F()()}2&c&&(P(1),R("@validated",void 0))}function $Fe(c,l){1&c&&(I(0,"span"),pt(1),F()),2&c&&R("@defaultButton",void 0)}function WFe(c,l){1&c&&ue(0,"label")}const GFe=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],QFe=["[clrCheckbox],[clrToggle]","label"];function jFe(c,l){1&c&&ue(0,"label")}function qFe(c,l){1&c&&pt(0,2,["*ngIf","showHelper"])}function ZFe(c,l){1&c&&ue(0,"cds-icon",5)}function XFe(c,l){1&c&&ue(0,"cds-icon",6)}function YFe(c,l){1&c&&pt(0,3,["*ngIf","showInvalid"])}function KFe(c,l){1&c&&pt(0,4,["*ngIf","showValid"])}const JFe=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],eNe=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function oNe(c,l){1&c&&ue(0,"label")}function aNe(c,l){1&c&&ue(0,"cds-icon",5)}function lNe(c,l){1&c&&ue(0,"cds-icon",6)}function cNe(c,l){1&c&&pt(0,2,["*ngIf","showHelper"])}function uNe(c,l){1&c&&pt(0,3,["*ngIf","showInvalid"])}function hNe(c,l){1&c&&pt(0,4,["*ngIf","showValid"])}const dNe=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],fNe=["label","[clrInput]","clr-control-helper","clr-control-error","clr-control-success"];function PNe(c,l){1&c&&ue(0,"label")}const RNe=[[["","clrRadio",""]],[["label"]]],FNe=["[clrRadio]","label"];function NNe(c,l){1&c&&ue(0,"label")}function LNe(c,l){1&c&&pt(0,2,["*ngIf","showHelper"])}function BNe(c,l){1&c&&ue(0,"cds-icon",5)}function VNe(c,l){1&c&&ue(0,"cds-icon",6)}function zNe(c,l){1&c&&pt(0,3,["*ngIf","showInvalid"])}function UNe(c,l){1&c&&pt(0,4,["*ngIf","showValid"])}const HNe=[[["label"]],[["clr-radio-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],$Ne=["label","clr-radio-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function WNe(c,l){1&c&&ue(0,"label")}function GNe(c,l){1&c&&ue(0,"cds-icon",5)}function QNe(c,l){1&c&&ue(0,"cds-icon",6)}function jNe(c,l){1&c&&pt(0,2,["*ngIf","showHelper"])}function qNe(c,l){1&c&&pt(0,3,["*ngIf","showInvalid"])}function ZNe(c,l){1&c&&pt(0,4,["*ngIf","showValid"])}const XNe=[[["label"]],[["","clrTextarea",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],YNe=["label","[clrTextarea]","clr-control-helper","clr-control-error","clr-control-success"];function LBe(c,l){if(1&c){const a=at();I(0,"button",11),ee("click",function(){return De(a),ke(q(2).close())}),ue(1,"cds-icon",12),F()}2&c&&et("aria-label",q(2).commonStrings.keys.close)}function BBe(c,l){if(1&c){const a=at();I(0,"div",1)(1,"div",2),ee("@fadeDown.done",function(d){return De(a),ke(q().fadeDone(d))}),I(2,"div",3),ie(3),F(),I(4,"div",4),pt(5),I(6,"div",5)(7,"div",6)(8,"div",7),pt(9,1),F(),X(10,LBe,2,1,"button",8),F(),I(11,"div",9),pt(12,2),F(),pt(13,3),F()(),I(14,"div",3),ie(15),F()(),I(16,"div",10),ee("click",function(){De(a);const d=q();return ke(d.staticBackdrop||d.close())}),F()()}if(2&c){const a=q();P(1),Ft("modal-sm","sm"==a.size)("modal-lg","lg"==a.size)("modal-xl","xl"==a.size),R("@fadeDown",a.skipAnimation),et("aria-hidden",!a._open)("aria-labelledby",a.labelledBy),P(2),Ut(a.commonStrings.keys.modalContentStart),P(5),bC("id",a.modalId),P(2),R("ngIf",a.closable),P(5),Ut(a.commonStrings.keys.modalContentEnd),P(1),R("@fade",void 0)}}const VBe=[[["",8,"modal-nav"]],[["",8,"modal-title"]],[["",8,"modal-body"]],[["",8,"modal-footer"]]],zBe=[".modal-nav",".modal-title",".modal-body",".modal-footer"];function UBe(c,l){if(1&c&&(I(0,"span"),ie(1),F()),2&c){const a=q();P(1),Ut(a.displayValue)}}let eo=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=bt({type:c,selectors:[["clr-icon"]]}),c})(),pr=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=bt({type:c,selectors:[["cds-icon"]]}),c})(),xr=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})();class xx{}var Ds=(()=>(function(c){c[c.DEFAULT=0]="DEFAULT",c[c.LOADING=1]="LOADING",c[c.SUCCESS=2]="SUCCESS",c[c.ERROR=3]="ERROR"}(Ds||(Ds={})),Ds))();let FL=(()=>{class c{constructor(a){this.listener=a,this._loadingState=Ds.DEFAULT}get loadingState(){return this._loadingState}set loadingState(a){!0===a?a=Ds.LOADING:a||(a=Ds.DEFAULT),a!==this._loadingState&&(this._loadingState=a,this.listener&&this.listener.loadingStateChange(a))}ngOnDestroy(){this.loadingState=Ds.DEFAULT}}return c.\u0275fac=function(a){return new(a||c)(B(xx,8))},c.\u0275dir=bt({type:c,selectors:[["","clrLoading",""]],inputs:{loadingState:["clrLoading","loadingState"]}}),c})(),il=(()=>{class c{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new yt}get loading(){return this._loading}set loading(a){(a=!!a)!==this._loading&&(this._loading=a)}get expanded(){return this._expanded}set expanded(a){(a=!!a)!==this._expanded&&(this._expanded=a,this._expandChange.next(a))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(a){this.loading=a===Ds.LOADING}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),u8e=0;const to=new Ln("UNIQUE_ID");const la={provide:to,useFactory:function Ute(){return"clr-id-"+u8e++}};let Hte=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["clr-accordion-description"],["clr-step-description"]],hostVars:2,hostBindings:function(a,h){2&a&&Ft("clr-accordion-description",!0)},ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2,changeDetection:0}),c})();var th=(()=>(function(c){c.Inactive="inactive",c.Error="error",c.Complete="complete"}(th||(th={})),th))();const nh="0.2s ease-in-out",h8e=[mc("skipInitialRender",[fo(":enter",[])]),mc("toggle",[fo("void => *",[Gi({display:"block",height:0}),aa(nh,Gi({height:"*"}))])])],NL=(mc("skipInitialRender",[fo(":enter",[])]),mc("toggle",[fo("void => *",[Gi({display:"block",height:0}),aa(nh,Gi({height:"*"}))]),fo("* => void",[Gi({display:"block"}),aa(nh,Gi({height:0,display:"none"}))])]),{open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Show or hide columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",filterItems:"Filter items",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Filter dialog",datagridFilterDialogAriaLabel:"Toggle column filter",columnSeparatorAriaLabel:"Column resize handle",columnSeparatorDescription:"Use left or right key to resize the column",alertCloseButtonAriaLabel:"Close alert",datepickerDialogLabel:"Choose date",datepickerToggle:"Toggle datepicker",datepickerToggleChooseDateLabel:"Choose date",datepickerToggleChangeDateLabel:"Change date, {SELECTED_DATE}",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",datepickerSelectedLabel:"{FULL_DATE} - Selected",stackViewChanged:"Value changed.",responsiveNavToggleOpen:"Navigation menu",responsiveNavToggleClose:"Navigation menu",responsiveNavOverflowOpen:"Navigation overflow menu",responsiveNavOverflowClose:"Navigation overflow menu",verticalNavGroupToggle:"Toggle vertical navigation group",verticalNavToggle:"Toggle vertical navigation",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",comboboxDelete:"Delete selected option",comboboxSearching:'Searching for matches for "{INPUT}"',comboboxSelection:"Selection",comboboxSelected:"Selected",comboboxNoResults:"No results",comboboxOpen:"Show options",datagridExpandableBeginningOf:"Beginning of",datagridExpandableEndOf:"End of",datagridExpandableRowContent:"Expandable row content",datagridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button",wizardStepSuccess:"Completed",wizardStepError:"Error",passwordHide:"Hide password",passwordShow:"Show password",selectedRows:"Selected rows"});let tr=(()=>{class c{constructor(){this._strings=NL}localize(a){this._strings=Object.assign(Object.assign({},this._strings),a)}get keys(){return this._strings}parse(a,h={}){const d=Object.keys(h);let f=a;return d.length&&d.forEach(p=>{f=f.replace(`{${p}}`,h[p])}),f}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var $m=(()=>(function(c){c.Default="default",c.Multi="multi"}($m||($m={})),$m))();let f8e=0;class p8e{constructor(l,a){this.id=l,this.accordionId=a,this.status=th.Inactive,this.index=null,this.disabled=!1,this.open=!1,this.templateId=`${this.id}-${this.accordionId}`}}class $te{constructor(){this.strategy=$m.Default,this.accordionCount=f8e++,this._panels={}}get panels(){return Object.keys(this._panels).map(l=>this._panels[l])}setStrategy(l){this.strategy=l}updatePanelOrder(l){l.forEach((a,h)=>this._panels[a].index=h),this.removeOldPanels(l)}addPanel(l,a=!1){this._panels[l]=new p8e(l,this.accordionCount),this._panels[l].open=a}togglePanel(l,a){const d=void 0!==a?a:!this._panels[l].open;d&&this.strategy===$m.Default&&this.closeAllPanels(),this._panels[l].open=d}disablePanel(l,a){this._panels[l].disabled=a}closeAllPanels(){this.panels.forEach(l=>this._panels[l.id].open=!1)}removeOldPanels(l){this.panels.filter(a=>void 0===l.find(h=>h===a.id)).forEach(a=>delete this._panels[a.id])}}let wx=(()=>{class c{constructor(){this.accordion=new $te,this._panelsChanges=new Jr(this.accordion.panels)}getPanelChanges(a){return this._panelsChanges.pipe(an(h=>h.find(d=>d.id===a)))}setStrategy(a){this.accordion.setStrategy(a)}addPanel(a,h=!1){this.accordion.addPanel(a,h),this.emitUpdatedPanels()}togglePanel(a,h){this.accordion.togglePanel(a,h),this.emitUpdatedPanels()}disablePanel(a,h){this.accordion.disablePanel(a,h),this.emitUpdatedPanels()}updatePanelOrder(a){this.accordion.updatePanelOrder(a),this.emitUpdatedPanels()}emitUpdatedPanels(){this._panelsChanges.next(this.accordion.panels)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),Wm=(()=>{class c{constructor(a,h,d,f){this.commonStrings=a,this.accordionService=h,this.ifExpandService=d,this._id=f,this.disabled=!1,this.panelOpen=!1,this.panelOpenChange=new wt,this.AccordionStatus=th,this.isAccordion=!0}get id(){return this._id}set id(a){this._id=a}ngOnInit(){this.panel=this.accordionService.getPanelChanges(this.id).pipe(Qo(a=>this.emitPanelChange(a))),this.accordionService.addPanel(this.id,this.panelOpen),this.accordionService.togglePanel(this.id,this.panelOpen),this.accordionService.disablePanel(this.id,this.disabled)}ngOnChanges(a){this.panel&&a.panelOpen&&a.panelOpen.currentValue!==a.panelOpen.previousValue&&this.accordionService.togglePanel(this.id,a.panelOpen.currentValue),this.panel&&a.disabled&&a.disabled.currentValue!==a.disabled.previousValue&&this.accordionService.disablePanel(this.id,a.disabled.currentValue)}togglePanel(){this.accordionService.togglePanel(this.id)}collapsePanelOnAnimationDone(a){a.open||(this.ifExpandService.expanded=!1)}getPanelStateClasses(a){return`clr-accordion-panel-${a.status} ${a.open?"clr-accordion-panel-open":""}`}getAccordionContentId(a){return`clr-accordion-content-${a}'`}getAccordionHeaderId(a){return`clr-accordion-header-${a}`}emitPanelChange(a){a.open!==this.panelOpen&&(this.panelOpenChange.emit(a.open),this.panelOpen=a.open),a.open&&(this.ifExpandService.expanded=!0)}}return c.\u0275fac=function(a){return new(a||c)(B(tr),B(wx),B(il),B(to))},c.\u0275cmp=je({type:c,selectors:[["clr-accordion-panel"]],contentQueries:function(a,h,d){if(1&a&&ii(d,Hte,4),2&a){let f;Ht(f=$t())&&(h.accordionDescription=f)}},hostVars:2,hostBindings:function(a,h){2&a&&Ft("clr-accordion-panel",!0)},inputs:{disabled:["clrAccordionPanelDisabled","disabled"],panelOpen:["clrAccordionPanelOpen","panelOpen"]},outputs:{panelOpenChange:"clrAccordionPanelOpenChange"},features:[vn([il,la]),Wo],ngContentSelectors:Vte,decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","class","clr-sr-only",4,"ngIf"],[3,"ngClass"],[1,"clr-accordion-header"],["type","button",1,"clr-accordion-header-button",3,"id","disabled","click"],["headerButton",""],[1,"clr-sr-only"],[1,"clr-accordion-status"],["shape","angle","direction","right",1,"clr-accordion-angle"],[1,"clr-accordion-number"],["status","danger","shape","exclamation-circle",1,"clr-accordion-error-icon"],["status","success","shape","check-circle",1,"clr-accordion-complete-icon"],["role","region",3,"id"],["class","clr-accordion-content",4,"ngIf"],["aria-live","assertive",1,"clr-sr-only"],[1,"clr-accordion-content"],[1,"clr-accordion-inner-content"]],template:function(a,h){1&a&&(tn(Bte),X(0,bFe,19,18,"ng-container",0),EC(1,"async")),2&a&&R("ngIf",AC(1,1,h.panel))},dependencies:[_n,si,pr,$F],encapsulation:2,data:{animation:h8e},changeDetection:0}),c})(),Sx=(()=>{class c{constructor(a){this.accordionService=a,this.multiPanel=!1,this.subscriptions=[]}ngOnInit(){this.setAccordionStrategy()}ngOnChanges(a){a.multiPanel.currentValue!==a.multiPanel.previousValue&&this.setAccordionStrategy()}ngAfterViewInit(){this.subscriptions.push(this.listenForDOMChanges())}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}setAccordionStrategy(){this.accordionService.setStrategy(this.multiPanel?$m.Multi:$m.Default)}listenForDOMChanges(){return this.panels.changes.pipe(WC(this.panels)).subscribe(a=>this.accordionService.updatePanelOrder(a.toArray().map(h=>h.id)))}}return c.\u0275fac=function(a){return new(a||c)(B(wx))},c.\u0275cmp=je({type:c,selectors:[["clr-accordion"]],contentQueries:function(a,h,d){if(1&a&&ii(d,Wm,5),2&a){let f;Ht(f=$t())&&(h.panels=f)}},hostVars:2,hostBindings:function(a,h){2&a&&Ft("clr-accordion",!0)},inputs:{multiPanel:["clrAccordionMultiPanel","multiPanel"]},features:[vn([wx]),Wo],ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2,changeDetection:0}),c})(),Tx=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["clr-accordion-content"],["clr-step-content"]],ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2,changeDetection:0}),c})(),Ox=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["clr-accordion-title"],["clr-step-title"]],hostVars:2,hostBindings:function(a,h){2&a&&Ft("clr-accordion-title",!0)},ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2,changeDetection:0}),c})(),Gy=(()=>{class c{constructor(){this._chocolate=new yt,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=bt({type:c}),c})(),Qy=(()=>{class c{constructor(a,h){this.subscription=h.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(h.disableChocolateCheck=!0,a.detectChanges(),h.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(B(sa),B(Gy))},c.\u0275dir=bt({type:c}),c})(),jy=(()=>{class c extends Gy{}return c.\u0275fac=function(){let l;return function(h){return(l||(l=os(c)))(h||c)}}(),c.\u0275dir=bt({type:c,selectors:[["clr-accordion"]],features:[gn]}),c})(),Dx=(()=>{class c extends Qy{constructor(a,h,d){if(!h)throw new Error("clr-accordion-panel should only be used inside of clr-accordion");super(a,h),this.expand=d}get flavor(){return this.expand.expanded}}return c.\u0275fac=function(a){return new(a||c)(B(sa),B(jy,8),B(il))},c.\u0275dir=bt({type:c,selectors:[["clr-accordion-panel"]],features:[gn]}),c})(),Wte=(()=>{class c{constructor(){dr.addIcons(Ry,pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr]]}),c})(),_8e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,Wte],Wte]}),c})();var oi=(()=>(function(c){c.ArrowLeft="ArrowLeft",c.ArrowUp="ArrowUp",c.ArrowRight="ArrowRight",c.ArrowDown="ArrowDown",c.Backspace="Backspace",c.Tab="Tab",c.Enter="Enter",c.Escape="Escape",c.Space="Space",c.Spacebar=" ",c.Home="Home",c.End="End"}(oi||(oi={})),oi))(),ih=(()=>(function(c){c.ArrowUp="Up",c.ArrowDown="Down",c.ArrowRight="Right",c.ArrowLeft="Left",c.Space="Spacebar",c.Escape="Esc",c.Home="Home",c.End="End",c.Enter="Enter",c.Tab="Tab"}(ih||(ih={})),ih))();function Ex(c){return c===oi.ArrowUp||c===ih.ArrowUp?oi.ArrowUp:c===oi.ArrowDown||c===ih.ArrowDown?oi.ArrowDown:c===oi.ArrowRight||c===ih.ArrowRight?oi.ArrowRight:c===oi.ArrowLeft||c===ih.ArrowLeft?oi.ArrowLeft:c===oi.Space||c===ih.Space?oi.Space:c===oi.Escape||c===ih.Escape?oi.Escape:c}let wr=(()=>{class c{constructor(){this._open=!1,this._openChange=new yt,this._openEventChange=new yt,this._popoverAligned=new yt}get openChange(){return this._openChange.asObservable()}set openEvent(a){this._openEvent=a,this._openEventChange.next(a)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(a){this._open!==(a=!!a)&&(this._open=a,this._openChange.next(a))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(a){(function BL(c){const l=Ex(c.key);(l===oi.ArrowUp||l===oi.ArrowDown||l===oi.ArrowLeft||l===oi.ArrowRight)&&c.preventDefault()})(a),this.openEvent=a,this.open=!this.open}get popoverAligned(){return this._popoverAligned.asObservable()}popoverAlignedEmit(a){this._popoverAligned.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();var qo=(()=>(function(c){c[c.VERTICAL=0]="VERTICAL",c[c.HORIZONTAL=1]="HORIZONTAL"}(qo||(qo={})),qo))(),nr=(()=>(function(c){c[c.START=0]="START",c[c.CENTER=.5]="CENTER",c[c.END=1]="END"}(nr||(nr={})),nr))();let Rx=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[]]}),c})();var Ul=(()=>(function(c){c[c.BEFORE=-1]="BEFORE",c[c.AFTER=1]="AFTER"}(Ul||(Ul={})),Ul))();class Hl{}Hl["top-right"]={axis:qo.VERTICAL,side:Ul.BEFORE,anchor:nr.END,content:nr.END},Hl["top-left"]={axis:qo.VERTICAL,side:Ul.BEFORE,anchor:nr.START,content:nr.START},Hl["bottom-right"]={axis:qo.VERTICAL,side:Ul.AFTER,anchor:nr.END,content:nr.END},Hl["bottom-left"]={axis:qo.VERTICAL,side:Ul.AFTER,anchor:nr.START,content:nr.START},Hl["right-top"]={axis:qo.HORIZONTAL,side:Ul.AFTER,anchor:nr.CENTER,content:nr.END},Hl["right-bottom"]={axis:qo.HORIZONTAL,side:Ul.AFTER,anchor:nr.START,content:nr.START},Hl["left-top"]={axis:qo.HORIZONTAL,side:Ul.BEFORE,anchor:nr.CENTER,content:nr.END},Hl["left-bottom"]={axis:qo.HORIZONTAL,side:Ul.BEFORE,anchor:nr.START,content:nr.START};let x8e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,Rx]]}),c})(),zL=(()=>{class c{constructor(a,h){this.el=a,this.renderer=h,this.buttonState=Ds,this.state=Ds.DEFAULT,this.clrLoadingChange=new wt(!1)}loadingStateChange(a){if(a!==this.state){switch(this.state=a,a){case Ds.DEFAULT:this.renderer.removeStyle(this.el.nativeElement,"width"),this.renderer.removeStyle(this.el.nativeElement,"transform"),this.disabled||this.renderer.removeAttribute(this.el.nativeElement,"disabled");break;case Ds.LOADING:this.setExplicitButtonWidth(),this.renderer.setStyle(this.el.nativeElement,"transform","translatez(0)"),this.renderer.setAttribute(this.el.nativeElement,"disabled","");break;case Ds.SUCCESS:this.setExplicitButtonWidth();break;case Ds.ERROR:this.loadingStateChange(Ds.DEFAULT)}this.clrLoadingChange.emit(a)}}setExplicitButtonWidth(){if(this.el.nativeElement&&this.el.nativeElement.getBoundingClientRect){const a=this.el.nativeElement.getBoundingClientRect(),h=Math.max(42,a.width);this.renderer.setStyle(this.el.nativeElement,"width",`${h}px`)}}}return c.\u0275fac=function(a){return new(a||c)(B(Sn),B(di))},c.\u0275cmp=je({type:c,selectors:[["button","clrLoading",""]],hostVars:1,hostBindings:function(a,h){2&a&&et("disabled",h.disabled?"":null)},inputs:{disabled:"disabled"},outputs:{clrLoadingChange:"clrLoadingChange"},features:[vn([{provide:xx,useExisting:c}])],attrs:zFe,ngContentSelectors:Wn,decls:4,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"spinner","spinner-inline"],[1,"spinner","spinner-inline","spinner-check"]],template:function(a,h){1&a&&(tn(),Tr(0,0),X(1,UFe,2,1,"span",1),X(2,HFe,2,1,"span",1),X(3,$Fe,2,1,"span",1),Or()),2&a&&(R("ngSwitch",h.state),P(1),R("ngSwitchCase",h.buttonState.LOADING),P(1),R("ngSwitchCase",h.buttonState.SUCCESS),P(1),R("ngSwitchCase",h.buttonState.DEFAULT))},dependencies:[PO,hY],encapsulation:2,data:{animation:[mc("defaultButton",[fo(":enter",[Gi({opacity:0}),aa("200ms 100ms ease-in",Gi({opacity:1}))]),fo(":leave",[Gi({opacity:0})])]),mc("spinner",[fo(":enter",[Gi({opacity:0}),aa("200ms 100ms ease-in",Gi({opacity:1}))]),fo(":leave",[Gi({opacity:1}),aa("100ms ease-out",Gi({opacity:0}))])]),mc("validated",[fo(":enter",[aa("600ms",q4e([Gi({transform:"scale(0,0)",offset:0}),Gi({opacity:1,offset:.2}),Gi({transform:"scale(1.2,1.2)",offset:.4}),Gi({transform:"scale(.9,.9)",offset:.6}),Gi({transform:"scale(1,1)",offset:1})]))]),fo(":leave",[Gi({opacity:1}),aa("100ms ease-out",Gi({opacity:0}))])])]}}),c})(),S8e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})(),T8e=(()=>{class c{constructor(){dr.addIcons(FJ)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[S8e,x8e]}),c})(),O8e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,h){},encapsulation:2}),c})(),RD=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({}),c})(),D8e=0,rh=(()=>{class c{constructor(){this._id="clr-form-control-"+ ++D8e,this._idChange=new Jr(this._id)}get id(){return this._id}set id(a){this._id=a,this._idChange.next(a)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),k8e=0,Qm=(()=>{class c{constructor(){this._id="clr-form-container-"+ ++k8e,this._idChange=new Jr(this._id)}get id(){return this._id}set id(a){this._id=a,this._idChange.next(a)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();let UL=(()=>{class c{constructor(a,h){this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="abstract"}get id(){return this.containerIdService?`${this.containerIdService.id}-${this.controlIdSuffix}`:this.controlIdService?`${this.controlIdService.id}-${this.controlIdSuffix}`:null}}return c.\u0275fac=function(a){return new(a||c)(B(rh,8),B(Qm,8))},c.\u0275dir=bt({type:c}),c})(),HL=(()=>{class c extends UL{constructor(a,h){super(a,h),this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="error"}}return c.\u0275fac=function(a){return new(a||c)(B(rh,8),B(Qm,8))},c.\u0275cmp=je({type:c,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(a,h){2&a&&(et("id",h.id),Ft("clr-subtext",!0))},features:[gn],ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2}),c})(),Kte=(()=>{class c extends UL{constructor(a,h){super(a,h),this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="helper"}}return c.\u0275fac=function(a){return new(a||c)(B(rh,8),B(Qm,8))},c.\u0275cmp=je({type:c,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(a,h){2&a&&(et("id",h.id),Ft("clr-subtext",!0))},features:[gn],ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2}),c})(),fu=(()=>{class c{constructor(){this._controlChanges=new yt,this._helpers=new yt}get controlChanges(){return this._controlChanges.asObservable()}setControl(a){this._controlChanges.next(a)}get helpersChange(){return this._helpers.asObservable()}setHelpers(a){this._helpers.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();var Ma=(()=>(function(c){c.NONE="NONE",c.VALID="VALID",c.INVALID="INVALID"}(Ma||(Ma={})),Ma))();let rd=(()=>{class c{constructor(a){this.ngControlService=a,this.subscriptions=[],this._statusChanges=new Jr(Ma.NONE),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(h=>{h&&(this.control=h,this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.triggerStatusChange()})))}))}get statusChanges(){return this._statusChanges.asObservable()}triggerStatusChange(){if(this.control){const a=Ma[this.control.status];this._statusChanges.next(this.control.touched&&["VALID","INVALID"].includes(a)?a:Ma.NONE)}}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(Ae(fu))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();var Of=(()=>(function(c){c.VERTICAL="vertical",c.HORIZONTAL="horizontal",c.COMPACT="compact"}(Of||(Of={})),Of))();let Df=(()=>{class c{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=Of.HORIZONTAL,this.layoutValues=Object.keys(Of).map(a=>Of[a]),this._labelSize=2}set labelSize(a){this.labelSizeIsValid(a)&&(this._labelSize=a)}get labelSize(){return this._labelSize}isVertical(){return this.layout===Of.VERTICAL}isHorizontal(){return this.layout===Of.HORIZONTAL}isCompact(){return this.layout===Of.COMPACT}get layoutClass(){return`clr-form-${this.layout}`}isValid(a){return this.layoutValues.indexOf(a)>-1}labelSizeIsValid(a){return Number.isInteger(a)&&a>=this.minLabelSize&&a<=this.maxLabelSize}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),cs=(()=>{class c{constructor(a,h,d,f,p){this.controlIdService=a,this.layoutService=h,this.ngControlService=d,this.renderer=f,this.el=p,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,`clr-col-md-${this.layoutService.labelSize}`)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(a=>this.forAttr=a))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(B(rh,8),B(Df,8),B(fu,8),B(di),B(Sn))},c.\u0275dir=bt({type:c,selectors:[["label"]],hostVars:1,hostBindings:function(a,h){2&a&&et("for",h.forAttr)},inputs:{forAttr:["for","forAttr"]}}),c})(),M8e=(()=>{class c extends UL{constructor(a,h){super(a,h),this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="success"}}return c.\u0275fac=function(a){return new(a||c)(B(rh,8),B(Qm,8))},c.\u0275cmp=je({type:c,selectors:[["clr-control-success"]],hostVars:3,hostBindings:function(a,h){2&a&&(et("id",h.id),Ft("clr-subtext",!0))},features:[gn],ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2}),c})(),sd=(()=>{class c{constructor(a){this.layoutService=a,this.className=""}controlClass(a=Ma.NONE,h=!1,d=""){const f=[this.className,d];switch(a){case Ma.VALID:f.push("clr-success");break;case Ma.INVALID:f.push("clr-error")}return h&&this.layoutService&&-1===this.className.indexOf("clr-col")&&f.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),f.join(" ").trim()}initControlClass(a,h){h&&h.className&&(this.className=h.className,h.className.split(" ").forEach(f=>{f.startsWith("clr-col")&&a.removeClass(h,f)}))}}return c.\u0275fac=function(a){return new(a||c)(Ae(Df,8))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),Fx=(()=>{class c{constructor(a,h,d,f){this.ifControlStateService=a,this.layoutService=h,this.controlClassService=d,this.ngControlService=f,this.subscriptions=[],this._dynamic=!1,this.subscriptions.push(this.ifControlStateService.statusChanges.subscribe(p=>{this.state=p,this.updateHelpers()})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(p=>{this.control=p}))}get showHelper(){return!!this.controlHelperComponent&&(!!this.controlHelperComponent&&this.state===Ma.NONE||!this.controlSuccessComponent&&this.state===Ma.VALID||!this.controlErrorComponent&&this.state===Ma.INVALID)}get showValid(){return this.state===Ma.VALID&&!!this.controlSuccessComponent}get showInvalid(){return this.state===Ma.INVALID&&!!this.controlErrorComponent}ngAfterContentInit(){this.updateHelpers()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}controlClass(){return this.controlClassService.controlClass(this.controlSuccessComponent||this.state!==Ma.VALID?this.state:Ma.NONE,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}updateHelpers(){this.ngControlService&&this.ngControlService.setHelpers({show:this.showInvalid||this.showHelper||this.showValid,showInvalid:this.showInvalid,showHelper:this.showHelper,showValid:this.showValid})}}return c.\u0275fac=function(a){return new(a||c)(B(rd),B(Df,8),B(sd),B(fu))},c.\u0275dir=bt({type:c,contentQueries:function(a,h,d){if(1&a&&(ii(d,cs,5),ii(d,M8e,5),ii(d,HL,5),ii(d,Kte,5)),2&a){let f;Ht(f=$t())&&(h.label=f.first),Ht(f=$t())&&(h.controlSuccessComponent=f.first),Ht(f=$t())&&(h.controlErrorComponent=f.first),Ht(f=$t())&&(h.controlHelperComponent=f.first)}}}),c})();class FD{constructor(l,a,h=0){if(this.injector=a.injector,!this.injector.get(l,null)){const d=this.injector.get(Mp),f=this.injector.get(Sn);a.createComponent(d.resolveComponentFactory(O8e));const p=d.resolveComponentFactory(l),g=[];g[h]=[f.nativeElement];const m=a.createComponent(p,void 0,void 0,g);a.remove(0),m.instance._dynamic=!0,this.injector=m.injector}}get(l,a){return this.injector.get(l,a)}}let $L=(()=>{class c{constructor(){this._touched=new yt}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),Nx=(()=>{class c{constructor(a,h,d,f,p,g){this.vcr=a,this.wrapperType=h,this.ngControl=f,this.subscriptions=[],this.index=0,this.renderer=p,this.el=g;try{this.ngControlService=d.get(fu),this.ifControlStateService=d.get(rd),this.controlClassService=d.get(sd),this.markControlService=d.get($L)}catch(m){}this.controlClassService&&this.controlClassService.initControlClass(p,g.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.markAsTouched()})),this.ngControlService&&this.subscriptions.push(this.ngControlService.helpersChange.subscribe(m=>{this.setAriaDescribedBy(m)}))}get id(){return this._id}set id(a){this._id=a,this.controlIdService&&(this.controlIdService.id=a)}triggerValidation(){this.ifControlStateService&&(this.ngControl&&!this.ngControl.touched&&this.markAsTouched(),this.ifControlStateService.triggerStatusChange())}markAsTouched(){this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}getProviderFromContainer(a,h){try{return this._containerInjector.get(a,h)}catch(d){return h}}ngOnInit(){this._containerInjector=new FD(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(rh);try{this.containerIdService=this._containerInjector.get(Qm)}catch(a){}this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl)}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}setAriaDescribedBy(a){if(a.show){const h=this.getAriaDescribedById(a);if(null!==h)return void this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",h)}this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}getAriaDescribedById(a){let h="helper";return a.showInvalid?h="error":a.showValid&&(h="success"),this.containerIdService?this.containerIdService.id.concat("-",h):this.controlIdService?this.controlIdService.id.concat("-",h):null}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(PT),B(Qr),B(zl),B(di),B(Sn))},c.\u0275dir=bt({type:c,hostVars:1,hostBindings:function(a,h){1&a&&ee("blur",function(){return h.triggerValidation()}),2&a&&Gh("id",h.id)},inputs:{id:"id"}}),c})(),ND=(()=>{class c{constructor(a,h){this.layoutService=a,this.markControlService=h}set labelSize(a){const h=parseInt(a,10)||2;this.layoutService.labelSize=h}markAsTouched(){this.markControlService.markAsTouched()}onFormSubmit(){this.markAsTouched()}}return c.\u0275fac=function(a){return new(a||c)(B(Df),B($L))},c.\u0275dir=bt({type:c,selectors:[["","clrForm",""]],contentQueries:function(a,h,d){if(1&a&&ii(d,cs,5),2&a){let f;Ht(f=$t())&&(h.labels=f)}},hostVars:6,hostBindings:function(a,h){1&a&&ee("submit",function(){return h.onFormSubmit()}),2&a&&Ft("clr-form",!0)("clr-form-horizontal",h.layoutService.isHorizontal())("clr-form-compact",h.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[vn([Df,$L])]}),c})(),I8e=(()=>{class c{constructor(a){this.layoutService=a}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}}return c.\u0275fac=function(a){return new(a||c)(B(Df))},c.\u0275dir=bt({type:c,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),c})(),Zo=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr]]}),c})();const WL=new Ln("IS_TOGGLE"),R8e={provide:WL,useFactory:function P8e(){return new Jr(!1)}};let Up=(()=>{class c{constructor(a){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(a.subscribe(h=>{this.toggle=h}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(B(WL))},c.\u0275cmp=je({type:c,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(a,h,d){if(1&a&&ii(d,cs,7),2&a){let f;Ht(f=$t())&&(h.label=f.first)}},hostVars:4,hostBindings:function(a,h){2&a&&Ft("clr-checkbox-wrapper",!h.toggle)("clr-toggle-wrapper",h.toggle)},features:[vn([rh,R8e])],ngContentSelectors:QFe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(a,h){1&a&&(tn(GFe),pt(0),pt(1,1),X(2,WFe,1,0,"label",0)),2&a&&(P(2),R("ngIf",!h.label))},dependencies:[_n,cs],encapsulation:2}),c})(),Hp=(()=>{class c extends Nx{constructor(a,h,d,f,p,g){super(a,Up,h,d,f,p),this.toggle=g}ngOnInit(){super.ngOnInit();const a=this.getProviderFromContainer(WL,null);a&&null!==this.toggle&&a.next(!0)}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(Qr),B(zl,10),B(di),B(Sn),Wv("clrToggle"))},c.\u0275dir=bt({type:c,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[gn]}),c})(),LD=(()=>{class c extends Fx{constructor(a,h,d,f){super(f,a,h,d),this.layoutService=a,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.inline=!1}set clrInline(a){this.inline="string"==typeof a?"false"!==a:!!a}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.checkboxes.length?"group":null}}return c.\u0275fac=function(a){return new(a||c)(B(Df,8),B(sd),B(fu),B(rd))},c.\u0275cmp=je({type:c,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],contentQueries:function(a,h,d){if(1&a&&ii(d,Hp,5),2&a){let f;Ht(f=$t())&&(h.checkboxes=f)}},hostVars:7,hostBindings:function(a,h){2&a&&(et("role",h.role),Ft("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid()))},inputs:{clrInline:"clrInline"},features:[vn([rd,fu,sd,Qm]),gn],ngContentSelectors:eNe,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(tn(JFe),pt(0),X(1,jFe,1,0,"label",0),I(2,"div",1),pt(3,1),I(4,"div",2),X(5,qFe,1,0,"ng-content",0),X(6,ZFe,1,0,"cds-icon",3),X(7,XFe,1,0,"cds-icon",4),X(8,YFe,1,0,"ng-content",0),X(9,KFe,1,0,"ng-content",0),F()()),2&a&&(P(1),R("ngIf",!h.label&&h.addGrid()),P(1),Ft("clr-control-inline",h.clrInline),R("ngClass",h.controlClass()),P(3),R("ngIf",h.showHelper),P(1),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid),P(1),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid))},dependencies:[_n,cs,si,pr],encapsulation:2}),c})(),F8e=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,Zo,RD],Zo]}),c})();function pu(c){return null!==c&&("string"==typeof c?c.length>=0:"boolean"==typeof c&&c)}let Lx=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})();new Ln("IF_ACTIVE_ID");let GL=(()=>{class c{constructor(a,h,d,f,p){this.template=a,this.container=h,this.el=d,this.renderer=f,this.expand=p,this._expanded=!1,this.expandedChange=new wt(!0),this._subscriptions=[],this._subscriptions.push(p.expandChange.subscribe(()=>{this.updateView(),this.expandedChange.emit(this.expand.expanded)}))}get expanded(){return this._expanded}set expanded(a){"boolean"==typeof a&&(this.expand.expanded=a,this._expanded=a)}updateView(){if(!this.expand.expanded||0===this.container.length)if(this.template)this.expand.expanded?this.container.createEmbeddedView(this.template):this.container.clear();else try{this.renderer.setStyle(this.el.nativeElement,"display",this.expand.expanded?null:"none")}catch(a){}}ngOnInit(){this.expand.expandable++,this.updateView()}ngOnDestroy(){this.expand.expandable--,this._subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(B(Os,8),B(Vi),B(Sn),B(di),B(il))},c.\u0275dir=bt({type:c,selectors:[["","clrIfExpanded",""]],inputs:{expanded:["clrIfExpanded","expanded"]},outputs:{expandedChange:"clrIfExpandedChange"}}),c})(),QL=(()=>{class c{constructor(a,h,d){this.toggleService=a,this.template=h,this.container=d,this.openChange=new wt(!1),this.subscription=this.toggleService.openChange.subscribe(f=>{this.updateView(f),this.openChange.emit(f)})}set open(a){this.toggleService.open=a}get open(){return this.toggleService.open}updateView(a){a?this.container.createEmbeddedView(this.template):this.container.clear()}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(B(wr),B(Os),B(Vi))},c.\u0275dir=bt({type:c,selectors:[["","clrIfOpen",""]],inputs:{open:["clrIfOpen","open"]},outputs:{openChange:"clrIfOpenChange"}}),c})(),gu=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})(),jL=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})();const Jy=new Ln("POPOVER_HOST_ANCHOR");var rl=(()=>(function(c){c.UP="up",c.DOWN="down",c.LEFT="left",c.RIGHT="right"}(rl||(rl={})),rl))();let VD=(()=>{class c{constructor(a){this.renderer=a,this._unlistenFuncs=[]}get current(){return this._current}reset(a){this._current=a}listenToArrowKeys(a){this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowup",()=>!this.move(rl.UP))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowdown",()=>!this.move(rl.DOWN))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowleft",()=>!this.move(rl.LEFT))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowright",()=>!this.move(rl.RIGHT)))}registerContainer(a){this.renderer.setAttribute(a,"tabindex","0"),this.listenToArrowKeys(a),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.enter",()=>!this.activateCurrent()))}moveTo(a){void 0!==a&&(this.current&&this.current.blur(),a.focus(),this._current=a)}move(a){let h=!1;if(this.current){const d=this.current[a];d&&(function UJ(c){return!!c&&(c instanceof En||de(c.lift)&&de(c.subscribe))}(d)?d:$n(d)).subscribe(p=>{p&&(this.moveTo(p),h=!0)})}return h}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(a=>a())}}return c.\u0275fac=function(a){return new(a||c)(Ae(di))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const U8e={provide:VD,useFactory:function z8e(c,l){return c||new VD(l)},deps:[[new Tp,new Op,VD],di]};class zD{}function ene(c){return[la,c,{provide:zD,useExisting:c}]}class W8e extends class $8e{containsItem(l){return this.model===l}select(l){this.model=l}unselect(l){this.containsItem(l)&&(this.model=null)}isEmpty(){return!this.model}pop(){const l=this.model;return this.model=null,l}toString(l){return this.model?l&&this.model[l]?this.model[l]:this.model.toString():""}}{constructor(){super(...arguments),this._focusChanged=new Jr(null)}get focusChanged(){return this._focusChanged.asObservable()}select(l){this.model!==l&&(this.model=l,this._focusChanged.next(l))}}let G8e=(()=>{class c{constructor(){this.loading=!1,this._currentInput="",this._inputChanged=new Jr(""),this.inputChanged=this._inputChanged.asObservable(),this._selectionChanged=new YN(1)}get currentInput(){return this._currentInput}set currentInput(a){""===a&&!this.multiselectable&&this.setSelectionValue(null),this._currentInput=a,this._inputChanged.next(a)}get selectionChanged(){return this._selectionChanged.asObservable()}select(a){null==a||this.selectionModel.containsItem(a)||(this.selectionModel.select(a),this._selectionChanged.next(this.selectionModel))}toggle(a){null!=a&&(this.selectionModel.containsItem(a)?this.selectionModel.unselect(a):this.selectionModel.select(a),this._selectionChanged.next(this.selectionModel))}unselect(a){null==a||!this.selectionModel.containsItem(a)||(this.selectionModel.unselect(a),this._selectionChanged.next(this.selectionModel))}get multiselectable(){return this.selectionModel instanceof class H8e{containsItem(l){return!!this.model&&this.model.includes(l)}select(l){this.addItem(l)}unselect(l){this.removeItem(l)}isEmpty(){return!(this.model&&this.model.length>0)}pop(){let l;return this.model&&this.model.length>0&&(l=this.model[this.model.length-1],this.removeItem(l)),l}toString(l,a=-1){let h="";return this.model&&(a>-1?this.model[a]&&(h+=l&&this.model[a][l]?this.model[a][l]:this.model[a].toString()):this.model.forEach(d=>{h+=l&&d[l]?d[l]:d.toString(),h+=" "})),h.trim()}addItem(l){this.containsItem(l)||(this.model=this.model||[],this.model.push(l))}removeItem(l){if(null==this.model)return;const a=this.model.indexOf(l);a>-1&&this.model.splice(a,1),0===this.model.length&&(this.model=null)}}}setSelectionValue(a){!this.selectionModel||this.selectionModel.model===a||!this.selectionModel.model&&!a||(this.selectionModel.model=a,this._selectionChanged.next(this.selectionModel))}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();ene((()=>{class c{constructor(a,h,d,f,p){this.id=a,this.toggleService=d,this.selectionService=f,this.platformId=p,this.pseudoFocus=new W8e,this.optionData=[],this.handleFocusSubscription(),this.renderer=h.createRenderer(null,null)}handleFocusSubscription(){this.toggleService.openChange.subscribe(a=>{a||(this.pseudoFocus.model=null)})}get trigger(){return this._trigger}set trigger(a){this._trigger=a,this.addFocusOnBlurListener(a)}get listbox(){return this._listbox}set listbox(a){this._listbox=a,this.addFocusOnBlurListener(a)}get textInput(){return this._textInput}set textInput(a){this._textInput=a,this.renderer.listen(a,"keydown",h=>!this.handleTextInput(h)),this.addFocusOnBlurListener(a)}moveFocusTo(a){let h=this.optionData.findIndex(d=>d.equals(this.pseudoFocus.model));a===rl.UP?-1===h||0===h?h=this.optionData.length-1:h--:a===rl.DOWN&&(-1===h||h===this.optionData.length-1?h=0:h++),this.pseudoFocus.select(this.optionData[h]),this.pseudoFocus.model&&this.pseudoFocus.model.el&&this.pseudoFocus.model.el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}openAndMoveTo(a){this.toggleService.open?this.moveFocusTo(a):(this.toggleService.openChange.pipe(bp(1)).subscribe(h=>{h&&this.moveFocusTo(a)}),this.toggleService.open=!0)}handleTextInput(a){let h=!1;const d=Ex(a.key);if(a)switch(d){case oi.Enter:this.toggleService.open&&this.pseudoFocus.model&&(this.selectionService.multiselectable?this.selectionService.toggle(this.pseudoFocus.model.value):this.selectionService.select(this.pseudoFocus.model.value),h=!0);break;case oi.Space:this.toggleService.open||(this.toggleService.open=!0,h=!0);break;case oi.ArrowUp:this.preventViewportScrolling(a),this.openAndMoveTo(rl.UP),h=!0;break;case oi.ArrowDown:this.preventViewportScrolling(a),this.openAndMoveTo(rl.DOWN),h=!0;break;default:a.key!==oi.Tab&&(!this.selectionService.multiselectable||a.key!==oi.Backspace)&&a.key!==oi.Escape&&!this.toggleService.open&&(this.toggleService.open=!0)}return h}preventViewportScrolling(a){a.preventDefault(),a.stopImmediatePropagation()}focusInput(){this.textInput&&ur(this.platformId)&&this.textInput.focus()}addFocusOnBlurListener(a){ur(this.platformId)&&this.renderer.listen(a,"blur",h=>{this.focusOutOfComponent(h)&&(this.toggleService.open=!1,this.componentCdRef&&this.componentCdRef.detectChanges())})}focusOutOfComponent(a){const h=a.relatedTarget||document.activeElement;return!(this.textInput.contains(h)||this.trigger.contains(h)||this.listbox.contains(h))}focusFirstActive(){if(this.optionData.length>0)if(this.selectionService.selectionModel.isEmpty())this.pseudoFocus.select(this.optionData[0]);else{let a;a=this.selectionService.multiselectable?this.selectionService.selectionModel.model[0]:this.selectionService.selectionModel.model;const h=this.optionData.find(d=>d.value===a);this.pseudoFocus.select(h||this.optionData[0])}}addOptionValues(a){this.optionData=a}}return c.\u0275fac=function(a){return new(a||c)(Ae(to),Ae(ty),Ae(wr),Ae(G8e),Ae(_s))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})());let Q8e=(()=>{class c{constructor(){dr.addIcons(pc,gc,Ry,ox)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Vp,xr,jL,Zo,gu,Rx,Lx],Zo,gu]}),c})(),e_=(()=>{class c extends Fx{}return c.\u0275fac=function(){let l;return function(h){return(l||(l=os(c)))(h||c)}}(),c.\u0275cmp=je({type:c,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(a,h){2&a&&Ft("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[vn([rd,fu,rh,sd]),gn],ngContentSelectors:fNe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(tn(dNe),pt(0),X(1,oNe,1,0,"label",0),I(2,"div",1)(3,"div",2),pt(4,1),X(5,aNe,1,0,"cds-icon",3),X(6,lNe,1,0,"cds-icon",4),F(),X(7,cNe,1,0,"ng-content",0),X(8,uNe,1,0,"ng-content",0),X(9,hNe,1,0,"ng-content",0),F()),2&a&&(P(1),R("ngIf",!h.label&&h.addGrid()),P(1),R("ngClass",h.controlClass()),P(3),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid),P(1),R("ngIf",h.showHelper),P(1),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid))},dependencies:[_n,cs,si,pr],encapsulation:2}),c})(),Bx=(()=>{class c extends Nx{constructor(a,h,d,f,p){super(a,e_,h,d,f,p),this.index=1}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(Qr),B(zl,10),B(di),B(Sn))},c.\u0275dir=bt({type:c,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(a,h){2&a&&Ft("clr-input",!0)},features:[gn]}),c})(),tne=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Vp,xr,Zo],Zo]}),c})(),j8e=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,tne,xr]]}),c})(),q8e=(()=>{class c{constructor(){this._previousFocusTraps=[]}get current(){return this._current}set current(a){this._previousFocusTraps.push(this._current),this._current=a}get nbFocusTrappers(){return this._previousFocusTraps.length}activatePreviousTrapper(){this._current=this._previousFocusTraps.pop()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),$p=(()=>{class c{constructor(a,h,d,f,p){this.el=a,this.injector=h,this.focusTrapsTracker=d,this.renderer=f,this.platformId=p,this.localFocusEscaped=!1,this._config={strict:!0},this.document=this.injector.get(Dr),this.focusTrapsTracker.current=this}set config(a){this._config=Object.assign(this._config,""===a?{}:a)}onFocusIn(a){const h=this.el.nativeElement;this.focusTrapsTracker.current!==this||!ur(this.platformId)||this.localFocusEscaped||h.contains(a.target)||(a.target===this.topReboundEl&&h.contains(a.relatedTarget)?(this.focusLastFocusable(),this.focusTrapElIfOutside()):a.target===this.bottomReboundEl&&h.contains(a.relatedTarget)?(this.focusFirstFocusable(),this.focusTrapElIfOutside()):this._config.strict?this.el.nativeElement.focus():this.localFocusEscaped=!0)}createFocusableOffScreenEl(){const a=this.document.createElement("span");return this.renderer.setAttribute(a,"tabindex","0"),this.renderer.addClass(a,"offscreen-focus-rebounder"),a}addReboundEls(){if(ur(this.platformId)){this.topReboundEl=this.createFocusableOffScreenEl(),this.bottomReboundEl=this.createFocusableOffScreenEl();const a=this.el.nativeElement;this.renderer.insertBefore(a.parentElement,this.topReboundEl,a),a.nextSibling?this.renderer.insertBefore(a.parentNode,this.bottomReboundEl,a.nextSibling):this.renderer.appendChild(a.parentNode,this.bottomReboundEl)}}removeReboundEls(){ur(this.platformId)&&this.topReboundEl&&this.bottomReboundEl&&(this.parentElement.removeChild(this.topReboundEl),this.parentElement.removeChild(this.bottomReboundEl),delete this.topReboundEl,delete this.bottomReboundEl)}setPreviousFocus(){this.previousActiveElement&&this.previousActiveElement.focus&&this.previousActiveElement.focus()}ngOnInit(){ur(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.focus())}ngAfterViewInit(){ur(this.platformId)&&(this.previousActiveElement=this.document.activeElement,this.parentElement=this.el.nativeElement.parentElement),this.addReboundEls()}get potentiallyFocusableEls(){return[...this.el.nativeElement.querySelectorAll('[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [contenteditable="true"]:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]) ')]}focusFirstFocusable(){for(let a=0;a<this.potentiallyFocusableEls.length&&(this.firstFocusableEl=this.focusElement(this.potentiallyFocusableEls[a]),!this.firstFocusableEl);a++);}focusLastFocusable(){for(let a=this.potentiallyFocusableEls.length-1;a>=0&&(this.lastFocusableEl=this.focusElement(this.potentiallyFocusableEls[a]),!this.lastFocusableEl);a--);}focusTrapElIfOutside(){this.el.nativeElement.contains(document.activeElement)||this.el.nativeElement.focus()}focusElement(a){return a&&a.focus&&(a.focus(),document.activeElement===a)?a:null}ngOnDestroy(){this.removeReboundEls(),this.setPreviousFocus(),this.focusTrapsTracker.activatePreviousTrapper()}}return c.\u0275fac=function(a){return new(a||c)(B(Sn),B(Qr),B(q8e),B(di),B(_s))},c.\u0275dir=bt({type:c,selectors:[["","clrFocusTrap",""]],hostBindings:function(a,h){1&a&&ee("focusin",function(f){return h.onFocusIn(f)},0,dC)},inputs:{config:["clrFocusTrap","config"]}}),c})(),UD=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})(),hVe=(()=>{class c{constructor(){dr.addIcons(pc,gc,Ry,b4e,C4e)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,RD,gu,Rx,xr,UD,Zo]]}),c})();new Ln(void 0);let pVe=(()=>{class c{constructor(){dr.addIcons(x4e,w4e,pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Vp,xr,Zo],Zo]}),c})(),a5=(()=>{class c{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["clr-radio-wrapper"]],contentQueries:function(a,h,d){if(1&a&&ii(d,cs,7),2&a){let f;Ht(f=$t())&&(h.label=f.first)}},hostVars:2,hostBindings:function(a,h){2&a&&Ft("clr-radio-wrapper",!0)},features:[vn([rh])],ngContentSelectors:FNe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(a,h){1&a&&(tn(RNe),pt(0),pt(1,1),X(2,PNe,1,0,"label",0)),2&a&&(P(2),R("ngIf",!h.label))},dependencies:[_n,cs],encapsulation:2}),c})(),WD=(()=>{class c extends Nx{constructor(a,h,d,f,p){super(a,a5,h,d,f,p)}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(Qr),B(zl,10),B(di),B(Sn))},c.\u0275dir=bt({type:c,selectors:[["","clrRadio",""]],features:[gn]}),c})(),hne=(()=>{class c extends Fx{constructor(a,h,d,f){super(f,a,h,d),this.layoutService=a,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.inline=!1}set clrInline(a){this.inline="string"==typeof a?"false"!==a:!!a}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.radios.length?"group":null}}return c.\u0275fac=function(a){return new(a||c)(B(Df,8),B(sd),B(fu),B(rd))},c.\u0275cmp=je({type:c,selectors:[["clr-radio-container"]],contentQueries:function(a,h,d){if(1&a&&ii(d,WD,5),2&a){let f;Ht(f=$t())&&(h.radios=f)}},hostVars:7,hostBindings:function(a,h){2&a&&(et("role",h.role),Ft("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid()))},inputs:{clrInline:"clrInline"},features:[vn([fu,rd,sd,Qm]),gn],ngContentSelectors:$Ne,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(tn(HNe),pt(0),X(1,NNe,1,0,"label",0),I(2,"div",1),pt(3,1),I(4,"div",2),X(5,LNe,1,0,"ng-content",0),X(6,BNe,1,0,"cds-icon",3),X(7,VNe,1,0,"cds-icon",4),X(8,zNe,1,0,"ng-content",0),X(9,UNe,1,0,"ng-content",0),F()()),2&a&&(P(1),R("ngIf",!h.label&&h.addGrid()),P(1),Ft("clr-control-inline",h.clrInline),R("ngClass",h.controlClass()),P(3),R("ngIf",h.showHelper),P(1),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid),P(1),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid))},dependencies:[_n,cs,si,pr],encapsulation:2}),c})(),gVe=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Zo,RD,xr],Zo]}),c})(),mVe=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Zo,RD,xr],Zo]}),c})(),vVe=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Vp,xr,Zo],Zo]}),c})(),dne=(()=>{class c extends Fx{}return c.\u0275fac=function(){let l;return function(h){return(l||(l=os(c)))(h||c)}}(),c.\u0275cmp=je({type:c,selectors:[["clr-textarea-container"]],hostVars:6,hostBindings:function(a,h){2&a&&Ft("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[vn([rd,fu,rh,sd]),gn],ngContentSelectors:YNe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-textarea-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(tn(XNe),pt(0),X(1,WNe,1,0,"label",0),I(2,"div",1)(3,"div",2),pt(4,1),X(5,GNe,1,0,"cds-icon",3),X(6,QNe,1,0,"cds-icon",4),F(),X(7,jNe,1,0,"ng-content",0),X(8,qNe,1,0,"ng-content",0),X(9,ZNe,1,0,"ng-content",0),F()),2&a&&(P(1),R("ngIf",!h.label&&h.addGrid()),P(1),R("ngClass",h.controlClass()),P(3),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid),P(1),R("ngIf",h.showHelper),P(1),R("ngIf",h.showInvalid),P(1),R("ngIf",h.showValid))},dependencies:[_n,cs,si,pr],encapsulation:2}),c})(),l5=(()=>{class c extends Nx{constructor(a,h,d,f,p){super(a,dne,h,d,f,p),this.index=1}}return c.\u0275fac=function(a){return new(a||c)(B(Vi),B(Qr),B(zl,10),B(di),B(Sn))},c.\u0275dir=bt({type:c,selectors:[["","clrTextarea",""]],hostVars:2,hostBindings:function(a,h){2&a&&Ft("clr-textarea",!0)},features:[gn]}),c})(),yVe=(()=>{class c{constructor(){dr.addIcons(pc,gc)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Vp,xr,Zo],Zo]}),c})(),fne=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi],Zo,F8e,Q8e,hVe,tne,pVe,gVe,vVe,yVe,mVe,j8e]}),c})(),pne=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})(),bne=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})();const Cne=new Ln("FOCUS_ON_VIEW_INIT"),bVe={provide:Cne,useValue:!0};let h5=(()=>{class c{constructor(a,h,d,f,p,g){this.el=a,this.platformId=h,this.focusOnViewInit=d,this.renderer=p,this.destroy$=new yt,this.directFocus=!0,this._isEnabled=this.focusOnViewInit,this.document=f,g.runOutsideAngular(()=>Jh(a.nativeElement,"focusout").pipe(function cx(c){return xi((l,a)=>{iu(c).subscribe(new Li(a,()=>a.complete(),le)),!a.closed&&l.subscribe(a)})}(this.destroy$)).subscribe(()=>{this.directFocus||(this.renderer.removeAttribute(this.el.nativeElement,"tabindex"),this.renderer.setStyle(this.el.nativeElement,"outline",null))}))}set isEnabled(a){this.focusOnViewInit&&"boolean"==typeof a&&(this._isEnabled=a)}ngAfterViewInit(){this.focus()}ngOnDestroy(){this.destroy$.next()}focus(){!ur(this.platformId)||!this._isEnabled||this.document&&this.document.activeElement!==this.el.nativeElement&&(this.el.nativeElement.focus(),this.document.activeElement!==this.el.nativeElement&&(this.directFocus=!1,this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.renderer.setStyle(this.el.nativeElement,"outline","none"),this.el.nativeElement.focus()))}}return c.\u0275fac=function(a){return new(a||c)(B(Sn),B(_s),B(Cne),B(Dr),B(di),B(Zi))},c.\u0275dir=bt({type:c,selectors:[["","clrFocusOnViewInit",""]],inputs:{isEnabled:["clrFocusOnViewInit","isEnabled"]}}),c})(),qm=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({providers:[bVe],imports:[[Oi]]}),c})(),d5=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})(),CVe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})(),oh=(()=>{class c{constructor(){this.toggleState=!1,this._state=new Jr(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(a){this._enabled=a}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.button&&(this.button.focus(),this.button=null)}open(a,h){this.cache=a,this.button=h,this.toggleState=!0,this._state.next(this.toggleState)}toggle(a,h){this.isRowOpen(a)||!a?this.close():this.open(a,h)}get state(){return this.cache}isRowOpen(a){return!(!this.toggleState||this.cache!==a)}get isOpen(){return!0===this.toggleState}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),s_=(()=>{class c{constructor(a){this.detailService=a,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}}return c.\u0275fac=function(a){return new(a||c)(Ae(oh))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();var Ia=(()=>(function(c){c[c.WIDTH=0]="WIDTH",c[c.HIDDEN=1]="HIDDEN"}(Ia||(Ia={})),Ia))();Object.keys(Ia).map(c=>Ia[c]).filter(c=>c===parseInt(c,10));let k5=(()=>{class c{constructor(a){this.expandableRowsCount=a,this.expandableRowsCount&&this.expandableRowsCount.register()}ngOnDestroy(){this.expandableRowsCount&&this.expandableRowsCount.unregister()}}return c.\u0275fac=function(a){return new(a||c)(B(s_,8))},c.\u0275dir=bt({type:c,selectors:[["","clrIfExpanded",""]]}),c})(),RVe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})();new Ln("COLUMN_STATE");let WVe=(()=>{class c{constructor(){dr.addIcons(S4e,T4e,ox,O4e,NJ,D4e,LJ,k4e,M4e)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,fne,Vp,d5,gu,CVe,pne,bne,Lx,Rx,jL,UD,qm]]}),c})(),ZVe=(()=>{class c{constructor(){dr.addIcons(Ry)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,Vp,xr,pne]]}),c})();new Tp,new Op;let n6e=(()=>{class c{constructor(){dr.addIcons(Ry)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,d5]]}),c})(),i6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[WVe,ZVe,n6e]}),c})();class qne{static linkParent(l,a,h){l.forEach(d=>d[h]=a)}static linkVertical(l,a=!0){l.forEach((h,d)=>{d>0&&(h.up=l[d-1]),d<l.length-1&&(h.down=l[d+1])}),a&&l.length>1&&(l[0].up=l[l.length-1],l[l.length-1].down=l[0])}}function Zne(c,l,a){return En.create(h=>{l(h);const d=c.subscribe(h);return()=>{d.unsubscribe(),a&&a(h)}})}let A5=(()=>{class c{constructor(a,h,d,f,p,g){this.id=a,this.renderer=h,this.parent=d,this.toggleService=f,this.focusService=p,this.platformId=g,this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){const a=this.toggleService.openChange.subscribe(h=>{h&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?rl.RIGHT:rl.DOWN)})});this._unlistenFuncs.push(()=>a.unsubscribe())}handleRootFocus(){const a=this.toggleService.openChange.subscribe(h=>{h||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=h});this._unlistenFuncs.push(()=>a.unsubscribe())}get trigger(){return this._trigger}set trigger(a){this._trigger=a,this.parent?this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowright",h=>this.toggleService.toggleWithEvent(h))):(this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowup",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowdown",h=>this.toggleService.toggleWithEvent(h))),this.focusService.listenToArrowKeys(a))}get container(){return this._container}set container(a){this._container=a,this._unlistenFuncs.push(this.renderer.listen(a,"keydown.tab",h=>this.toggleService.toggleWithEvent(h))),this.parent?this._unlistenFuncs.push(this.renderer.listen(a,"keydown.esc",h=>{this.focusService.move(rl.LEFT),h.stopPropagation()})):(this.focusService.registerContainer(a),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.esc",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(a,"blur",h=>{this.children.pipe(bp(1)).subscribe(f=>f.forEach(p=>p.blur()));const d=h.relatedTarget||document.activeElement;d&&ur(this.platformId)&&(a.contains(d)||d===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&ur(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&ur(this.platformId)&&this.trigger.blur()}activate(){ur(this.platformId)&&this.trigger.click()}openAndGetChildren(){return Zne(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return Zne($n(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new YN(1),this.parent?this.right=this.openAndGetChildren().pipe(an(a=>a[0])):(this.down=this.openAndGetChildren().pipe(an(a=>a[0])),this.up=this.openAndGetChildren().pipe(an(a=>a[a.length-1])))}addChildren(a){qne.linkVertical(a),this.parent&&qne.linkParent(a,this.closeAndGetThis(),rl.LEFT),this.children.next(a)}ngOnDestroy(){this._unlistenFuncs.forEach(a=>a()),this.focusService.detachListeners()}}return c.\u0275fac=function(a){return new(a||c)(Ae(to),Ae(di),Ae(c,12),Ae(wr),Ae(VD),Ae(_s))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const r6e=ene(A5);let Zx=(()=>{class c{constructor(){this._changes=new yt}get changes(){return this._changes.asObservable()}closeMenus(){this._changes.next(!1)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const o6e={provide:Zx,useFactory:function s6e(c){return c||new Zx},deps:[[new Tp,new Op,Zx]]};let Xx=(()=>{class c{constructor(a,h,d,f){this.parent=a,this.toggleService=h,this.cdr=d,this.subscriptions=[],this.isMenuClosable=!0,this.subscriptions.push(f.changes.subscribe(p=>this.toggleService.open=p)),this.subscriptions.push(h.openChange.subscribe(()=>this.cdr.markForCheck()))}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(B(c,12),B(wr),B(sa),B(Zx))},c.\u0275cmp=je({type:c,selectors:[["clr-dropdown"]],hostVars:4,hostBindings:function(a,h){2&a&&Ft("dropdown",!0)("open",h.toggleService.open)},inputs:{isMenuClosable:["clrCloseMenuOnItemClick","isMenuClosable"]},features:[vn([o6e,{provide:Jy,useExisting:Sn},U8e,wr,r6e])],ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2}),c})();const a6e=[la,{provide:zD,useClass:(()=>{class c{constructor(a,h,d,f){this.id=a,this.el=h,this.renderer=d,this.platformId=f,this.disabled=!1,d.setAttribute(h.nativeElement,"id",a),d.setAttribute(h.nativeElement,"tabindex","-1")}focus(){ur(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","0"),this.el.nativeElement.focus(),this.el.nativeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))}blur(){ur(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.blur())}activate(){ur(this.platformId)&&this.el.nativeElement.click()}}return c.\u0275fac=function(a){return new(a||c)(Ae(to),Ae(Sn),Ae(di),Ae(_s))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})()}];let I5=(()=>{class c{constructor(a,h,d,f,p){this.dropdown=a,this.el=h,this._dropdownService=d,this.renderer=f,this.focusableItem=p,this.setByDeprecatedDisabled=!1}set disabled(a){this.focusableItem.disabled=!!a||""===a}get disabled(){return this.focusableItem.disabled}set disabledDeprecated(a){this.focusableItem.disabled=!!a||""===a,this.setByDeprecatedDisabled=!0}get disabledDeprecated(){return this.focusableItem.disabled}set dropdownItemId(a){this.focusableItem.id=a}get dropdownItemId(){return this.focusableItem.id}ngAfterViewInit(){this.unlisten=this.renderer.listen(this.el.nativeElement,"click",()=>this.onDropdownItemClick())}onDropdownItemClick(){this.dropdown.isMenuClosable&&!this.el.nativeElement.classList.contains("disabled")&&this._dropdownService.closeMenus()}ngOnDestroy(){this.unlisten&&this.unlisten()}}return c.\u0275fac=function(a){return new(a||c)(B(Xx),B(Sn),B(Zx),B(di),B(zD))},c.\u0275dir=bt({type:c,selectors:[["","clrDropdownItem",""]],hostVars:8,hostBindings:function(a,h){2&a&&(et("role","menuitem")("aria-disabled",h.disabled)("disabled",h.disabled&&h.setByDeprecatedDisabled?"":null)("id",h.dropdownItemId),Ft("disabled",h.disabled)("dropdown-item",!0))},inputs:{disabled:["clrDisabled","disabled"],disabledDeprecated:["disabled","disabledDeprecated"],dropdownItemId:["id","dropdownItemId"]},features:[vn([a6e])]}),c})();var Dt=(()=>(function(c){c[c.RIGHT_CENTER=0]="RIGHT_CENTER",c[c.RIGHT_TOP=1]="RIGHT_TOP",c[c.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",c[c.TOP_CENTER=3]="TOP_CENTER",c[c.TOP_RIGHT=4]="TOP_RIGHT",c[c.TOP_LEFT=5]="TOP_LEFT",c[c.BOTTOM_CENTER=6]="BOTTOM_CENTER",c[c.BOTTOM_RIGHT=7]="BOTTOM_RIGHT",c[c.BOTTOM_LEFT=8]="BOTTOM_LEFT",c[c.LEFT_CENTER=9]="LEFT_CENTER",c[c.LEFT_TOP=10]="LEFT_TOP",c[c.LEFT_BOTTOM=11]="LEFT_BOTTOM"}(Dt||(Dt={})),Dt))();class u6e{constructor(l){this.element=l,this.scrollableElements=[],this.boundOnScrollListener=this.emitScrollEvent.bind(this),l.style.position="absolute",l.style.top=0,l.style.bottom="auto",l.style.left=0,l.style.right="auto"}anchor(l,a,h,{offsetX:d=0,offsetY:f=0,useAnchorParent:p=!1}={}){this.addScrollEventListeners(l),p&&(l=l.parentNode),l.style.position="static";const g=l.getBoundingClientRect(),m=this.element.getBoundingClientRect();let v=g.left-m.left+d,y=g.top-m.top+f;switch(a){case Dt.LEFT_TOP:case Dt.TOP_LEFT:break;case Dt.TOP_CENTER:v+=g.width/2;break;case Dt.TOP_RIGHT:case Dt.RIGHT_TOP:v+=g.width;break;case Dt.LEFT_BOTTOM:case Dt.BOTTOM_LEFT:y+=g.height;break;case Dt.BOTTOM_CENTER:y+=g.height,v+=g.width/2;break;case Dt.BOTTOM_RIGHT:case Dt.RIGHT_BOTTOM:y+=g.height,v+=g.width;break;case Dt.LEFT_CENTER:y+=g.height/2;break;case Dt.RIGHT_CENTER:y+=g.height/2,v+=g.width}switch(h){case Dt.LEFT_TOP:case Dt.TOP_LEFT:break;case Dt.TOP_CENTER:v-=m.width/2;break;case Dt.TOP_RIGHT:case Dt.RIGHT_TOP:v-=m.width;break;case Dt.LEFT_BOTTOM:case Dt.BOTTOM_LEFT:y-=m.height;break;case Dt.BOTTOM_CENTER:y-=m.height,v-=m.width/2;break;case Dt.BOTTOM_RIGHT:case Dt.RIGHT_BOTTOM:y-=m.height,v-=m.width;break;case Dt.LEFT_CENTER:y-=m.height/2;break;case Dt.RIGHT_CENTER:y-=m.height/2,v-=m.width}const _=getComputedStyle(this.element),b=parseInt(_.marginLeft,10),C=parseInt(_.marginRight,10),x=parseInt(_.marginTop,10),S=parseInt(_.marginBottom,10);switch(a){case Dt.LEFT_TOP:case Dt.TOP_LEFT:case Dt.TOP_RIGHT:case Dt.RIGHT_TOP:(h===Dt.BOTTOM_RIGHT||h===Dt.RIGHT_BOTTOM)&&(y-=S,v-=C),(h===Dt.BOTTOM_LEFT||h===Dt.LEFT_BOTTOM)&&(y-=x,v+=b),(h===Dt.TOP_LEFT||h===Dt.LEFT_TOP)&&(y+=x,v+=b),(h===Dt.TOP_RIGHT||h===Dt.RIGHT_TOP)&&(y+=x,v-=C);break;case Dt.LEFT_BOTTOM:case Dt.BOTTOM_LEFT:case Dt.BOTTOM_RIGHT:case Dt.RIGHT_BOTTOM:(h===Dt.BOTTOM_LEFT||h===Dt.LEFT_BOTTOM)&&(y-=S,v+=b),(h===Dt.BOTTOM_RIGHT||h===Dt.RIGHT_BOTTOM)&&(y-=S,v-=C),(h===Dt.TOP_LEFT||h===Dt.LEFT_TOP)&&(y+=x,v+=b),(h===Dt.TOP_RIGHT||h===Dt.RIGHT_TOP)&&(y+=x,v-=C);break;case Dt.TOP_CENTER:y-=S,v+=b,v-=C;break;case Dt.BOTTOM_CENTER:y+=x,v+=b,v-=C;break;case Dt.LEFT_CENTER:y+=x,y-=S,v-=C;break;case Dt.RIGHT_CENTER:y+=x,y-=S,v+=b}return this.element.style.transform=`translateX(${Math.round(v)}px) translateY(${Math.round(y)}px)`,this._scroll.asObservable()}release(){this.element.style.transform="",this.removeScrollEventListeners()}isPositioned(l){const a=getComputedStyle(l).position;return"relative"===a||"absolute"===a||"fixed"===a}emitScrollEvent(){this._scroll.next()}addScrollEventListeners(l){this._scroll=new yt;const a=l;let h=l;for(;h&&h!==document&&(this.scrolls(h)&&(h.addEventListener("scroll",this.boundOnScrollListener),this.scrollableElements.push(h)),h===a||!this.isPositioned(h));)h=h.parentNode}removeScrollEventListeners(){for(const l of this.scrollableElements)l.removeEventListener("scroll",this.boundOnScrollListener);this.scrollableElements.length=0,this._scroll&&(this._scroll.complete(),delete this._scroll)}scrolls(l){const a=getComputedStyle(l);return"scroll"===a.overflowX||"auto"===a.overflowX||"scroll"===a.overflowY||"auto"===a.overflowY}}let P5=(()=>{class c{constructor(a,h){this.parentHost=h,this.updateAnchor=!1,this.popoverOptions={},this.closeOnOutsideClick=!1,this.documentESCListener=null,this.closeOnOutsideClickCallback=d=>{this.anchorElem.contains(d.target)||(this.toggleService.open=!1)},this.el=a.get(Sn),this.toggleService=a.get(wr),this.renderer=a.get(di),this.ngZone=a.get(Zi),this.ref=a.get(sa),this.anchorElem=h.nativeElement,this.popoverInstance=new u6e(this.el.nativeElement),this.subscription=this.toggleService.openChange.subscribe(d=>{d?(this.anchor(),this.attachESCListener()):(this.release(),this.detachESCListener())}),this.toggleService.open&&(this.anchor(),this.attachESCListener())}anchor(){this.updateAnchor=!0}release(){this.detachOutsideClickListener(),this.popoverInstance.release()}ngAfterViewChecked(){this.updateAnchor&&(this.updateAnchor=!1,this.popoverInstance.anchor(this.anchorElem,this.anchorPoint,this.popoverPoint,this.popoverOptions).subscribe(()=>{this.toggleService.open=!1}),this.attachOutsideClickListener())}ngOnDestroy(){this.release(),this.detachESCListener(),this.subscription.unsubscribe()}get isOffScreen(){return!this.toggleService.open}attachESCListener(){this.popoverOptions.ignoreGlobalESCListener||this.ngZone.runOutsideAngular(()=>{this.documentESCListener=this.renderer.listen("document","keydown",a=>{a&&a.key&&("Escape"===a.key||"Esc"===a.key)&&this.ngZone.run(()=>{this.toggleService.open=!1,this.ref.markForCheck()})})})}detachESCListener(){this.documentESCListener&&(this.documentESCListener(),this.documentESCListener=null)}attachOutsideClickListener(){this.closeOnOutsideClick&&this.toggleService.open&&document&&document.addEventListener&&document.addEventListener("click",this.closeOnOutsideClickCallback,!0)}detachOutsideClickListener(){this.closeOnOutsideClick&&document&&document.removeEventListener&&document.removeEventListener("click",this.closeOnOutsideClickCallback,!0)}}return c.\u0275fac=function(a){return new(a||c)(B(Qr),B(Sn,4))},c.\u0275dir=bt({type:c,hostVars:2,hostBindings:function(a,h){2&a&&Ft("is-off-screen",h.isOffScreen)}}),c})(),R5=(()=>{class c extends P5{constructor(a,h,d,f){if(!h)throw new Error("clr-dropdown-menu should only be used inside of a clr-dropdown");super(a,h),d?(this.anchorPoint=Dt.RIGHT_TOP,this.popoverPoint=Dt.LEFT_TOP):(this.anchorPoint=Dt.BOTTOM_LEFT,this.popoverPoint=Dt.LEFT_TOP),this.popoverOptions.allowMultipleOpen=!0,this.popoverOptions.ignoreGlobalESCListener=!0,this.closeOnOutsideClick=!0,this.focusHandler=f}set position(a){switch(a){case"top-right":this.anchorPoint=Dt.TOP_RIGHT,this.popoverPoint=Dt.RIGHT_BOTTOM;break;case"top-left":this.anchorPoint=Dt.TOP_LEFT,this.popoverPoint=Dt.LEFT_BOTTOM;break;case"bottom-right":this.anchorPoint=Dt.BOTTOM_RIGHT,this.popoverPoint=Dt.RIGHT_TOP;break;case"bottom-left":default:this.anchorPoint=Dt.BOTTOM_LEFT,this.popoverPoint=Dt.LEFT_TOP;break;case"right-top":this.anchorPoint=Dt.RIGHT_TOP,this.popoverPoint=Dt.LEFT_TOP;break;case"right-bottom":this.anchorPoint=Dt.RIGHT_BOTTOM,this.popoverPoint=Dt.LEFT_BOTTOM;break;case"left-top":this.anchorPoint=Dt.LEFT_TOP,this.popoverPoint=Dt.RIGHT_TOP;break;case"left-bottom":this.anchorPoint=Dt.LEFT_BOTTOM,this.popoverPoint=Dt.RIGHT_BOTTOM}}ngAfterContentInit(){this.focusHandler.container=this.el.nativeElement,this.items.changes.subscribe(()=>this.focusHandler.addChildren(this.items.toArray())),this.items.notifyOnChanges()}ngOnDestroy(){super.ngOnDestroy(),this.focusHandler.resetChildren()}}return c.\u0275fac=function(a){return new(a||c)(B(Qr),B(Jy,8),B(c,12),B(A5))},c.\u0275cmp=je({type:c,selectors:[["clr-dropdown-menu"]],contentQueries:function(a,h,d){if(1&a&&ii(d,zD,4),2&a){let f;Ht(f=$t())&&(h.items=f)}},hostVars:3,hostBindings:function(a,h){2&a&&(et("role","menu"),Ft("dropdown-menu",!0))},inputs:{position:["clrPosition","position"]},features:[gn],ngContentSelectors:Wn,decls:1,vars:0,template:function(a,h){1&a&&(tn(),pt(0))},encapsulation:2}),c})(),F5=(()=>{class c{constructor(a,h,d,f){this.toggleService=h,this.isRootLevelToggle=!0,a.parent&&(this.isRootLevelToggle=!1),f.trigger=d.nativeElement}get active(){return this.toggleService.open}onDropdownTriggerClick(a){this.toggleService.toggleWithEvent(a)}}return c.\u0275fac=function(a){return new(a||c)(B(Xx),B(wr),B(Sn),B(A5))},c.\u0275dir=bt({type:c,selectors:[["","clrDropdownTrigger",""],["","clrDropdownToggle",""]],hostVars:10,hostBindings:function(a,h){1&a&&ee("click",function(f){return h.onDropdownTriggerClick(f)}),2&a&&(et("aria-haspopup","menu")("aria-expanded",h.active),Ft("dropdown-toggle",h.isRootLevelToggle)("dropdown-item",!h.isRootLevelToggle)("expandable",!h.isRootLevelToggle)("active",h.active))}}),c})(),N5=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi],gu,xr]}),c})(),ik=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=bt({type:c,selectors:[["",8,"alert-text"]]}),c})(),tie=(()=>{class c{constructor(){dr.addIcons(gc,BJ,pc,E4e,ox)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,N5]]}),c})(),f6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[tie]}),c})(),p6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr]]}),c})(),S6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,N5]]}),c})(),T6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})();new Ln("TABS_ID");let I6e=(()=>{class c{constructor(){dr.addIcons(FJ)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,gu,xr,T6e,jL],gu]}),c})(),R6e=(()=>{class c{constructor(){dr.addIcons(Ry,LJ)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,gu,qm],gu,xr,qm]}),c})(),F6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[p6e,S6e,I6e,R6e]}),c})(),uie=(()=>{class c{constructor(a){this._document=a}stopScrolling(){this._document.body.classList.add("no-scrolling")}resumeScrolling(){this._document.body.classList.contains("no-scrolling")&&this._document.body.classList.remove("no-scrolling")}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),Rf=(()=>{class c{constructor(a,h,d){this._scrollingService=a,this.commonStrings=h,this.modalId=d,this._open=!1,this._openChanged=new wt(!1),this.closable=!0,this.staticBackdrop=!0,this.skipAnimation="false",this.bypassScrollService=!1,this.stopClose=!1,this.altClose=new wt(!1),this.labelledBy=this.modalId}ngOnChanges(a){!this.bypassScrollService&&a&&Object.prototype.hasOwnProperty.call(a,"_open")&&(a._open.currentValue?this._scrollingService.stopScrolling():this._scrollingService.resumeScrolling())}ngOnDestroy(){this._scrollingService.resumeScrolling()}open(){this._open||(this._open=!0,this._openChanged.emit(!0))}close(){this.stopClose?this.altClose.emit(!1):!this.closable||!this._open||(this._open=!1,this.focusTrap.setPreviousFocus())}fadeDone(a){"void"===a.toState&&this._openChanged.emit(!1)}}return c.\u0275fac=function(a){return new(a||c)(B(uie),B(tr),B(to))},c.\u0275cmp=je({type:c,selectors:[["clr-modal"]],viewQuery:function(a,h){if(1&a&&ci($p,5),2&a){let d;Ht(d=$t())&&(h.focusTrap=d.first)}},hostVars:2,hostBindings:function(a,h){1&a&&ee("keyup.escape",function(){return h.close()},0,QQ),2&a&&Ft("open",h._open)},inputs:{_open:["clrModalOpen","_open"],closable:["clrModalClosable","closable"],size:["clrModalSize","size"],staticBackdrop:["clrModalStaticBackdrop","staticBackdrop"],skipAnimation:["clrModalSkipAnimation","skipAnimation"],bypassScrollService:["clrModalOverrideScrollService","bypassScrollService"],stopClose:["clrModalPreventClose","stopClose"],labelledBy:["clrModalLabelledById","labelledBy"]},outputs:{_openChanged:"clrModalOpenChange",altClose:"clrModalAlternateClose"},features:[vn([la],[uie]),Wo],ngContentSelectors:zBe,decls:1,vars:1,consts:[["clrFocusTrap","","class","modal",4,"ngIf"],["clrFocusTrap","",1,"modal"],["role","dialog","aria-modal","true",1,"modal-dialog"],[1,"clr-sr-only"],[1,"modal-content-wrapper"],[1,"modal-content"],[1,"modal-header--accessible"],["clrFocusOnViewInit","",1,"modal-title-wrapper",3,"id"],["type","button","class","close",3,"click",4,"ngIf"],[1,"modal-body-wrapper"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["type","button",1,"close",3,"click"],["shape","window-close"]],template:function(a,h){1&a&&(tn(VBe),X(0,BBe,17,14,"div",0)),2&a&&R("ngIf",h._open)},dependencies:[_n,$p,h5,pr],styles:["[_nghost-%COMP%]{display:none}.open[_nghost-%COMP%]{display:inline}"],data:{animation:[mc("fadeDown",[fo("* => false",[Gi({opacity:0,transform:"translate(0, -25%)"}),aa("0.2s ease-in-out")]),fo("false => *",[aa("0.2s ease-in-out",Gi({opacity:0,transform:"translate(0, -25%)"}))])]),mc("fade",[fo("void => *",[Gi({opacity:0}),aa("0.2s ease-in-out",Gi({opacity:.85}))]),fo("* => void",[aa("0.2s ease-in-out",Gi({opacity:0}))])])]}}),c})(),Ff=(()=>{class c{constructor(a,h,d){this.renderer=a,this.host=h,this.tabindex="0",this.unlisteners=[],d.runOutsideAngular(()=>{this.observer=new ResizeObserver(()=>this.addOrRemoveTabIndex()),this.observer.observe(this.host.nativeElement),this.unlisteners.push(this.renderer.listen(this.host.nativeElement,"mouseup",()=>{this.addOrRemoveTabIndex()}),this.renderer.listen(this.host.nativeElement,"mousedown",()=>{this.removeTabIndex()}))})}ngOnDestroy(){for(;this.unlisteners.length;)this.unlisteners.pop()();this.observer.disconnect(),this.observer=null}addTabIndex(){this.renderer.setAttribute(this.host.nativeElement,"tabindex",this.tabindex)}removeTabIndex(){this.renderer.removeAttribute(this.host.nativeElement,"tabindex")}addOrRemoveTabIndex(){const a=this.host.nativeElement.parentElement;a.clientHeight<a.scrollHeight?this.addTabIndex():this.removeTabIndex()}}return c.\u0275fac=function(a){return new(a||c)(B(di),B(Sn),B(Zi))},c.\u0275dir=bt({type:c,selectors:[["",8,"modal-body"]]}),c})(),hie=(()=>{class c{constructor(){dr.addIcons(ox)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,UD,qm],xr,qm]}),c})(),B6e=(()=>{class c{constructor(){dr.addIcons(ox,BJ)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,qm],gu]}),c})(),$6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi],gu,xr]}),c})(),W6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[N5,B6e,$6e]}),c})(),G5=(()=>{class c{constructor(){this.externalId="",this.max=100,this._value=0}set id(a){this._ID=a,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(a){this._value=a}get progressClass(){return!0}get labeledClass(){return this._labeled}set clrLabeled(a){this._labeled=pu(a)}get fadeClass(){return this._fade}set clrFade(a){this._fade=pu(a)}get loopClass(){return this._loop}set clrLoop(a){this._loop=pu(a)}get successClass(){return this._success}set clrSuccess(a){this._success=pu(a)}get dangerClass(){return this._danger}set clrDanger(a){this._danger=pu(a)}get flashClass(){return this._flash}set clrFlash(a){this._flash=pu(a)}get flashDangerClass(){return this._flashDanger}set clrFlashDanger(a){this._flashDanger=pu(a)}displayStringValue(){return this._labeled}get displayValue(){return this.displayval?this.displayval:`${this.value||0}%`}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["clr-progress-bar"]],hostVars:17,hostBindings:function(a,h){2&a&&(et("id",h.externalId),Ft("progress",h.progressClass)("labeled",h.labeledClass)("progress-fade",h.fadeClass)("loop",h.loopClass)("success",h.successClass)("danger",h.dangerClass)("flash",h.flashClass)("flash-danger",h.flashDangerClass))},inputs:{id:"id",max:["clrMax","max"],displayval:["clrDisplayval","displayval"],value:["clrValue","value"],clrLabeled:"clrLabeled",clrFade:"clrFade",clrLoop:"clrLoop",clrSuccess:"clrSuccess",clrDanger:"clrDanger",clrFlash:"clrFlash",clrFlashDanger:"clrFlashDanger"},decls:2,vars:5,consts:[[3,"id"],[4,"ngIf"]],template:function(a,h){1&a&&(ue(0,"progress",0),X(1,UBe,2,1,"span",1)),2&a&&(R("id",h.id),et("max",h.max)("value",h.value)("data-displayval",h.displayValue),P(1),R("ngIf",h.displayStringValue()))},dependencies:[_n],encapsulation:2}),c})(),G6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi]]}),c})(),j6e=(()=>{class c{constructor(){dr.addIcons(A4e,I4e,VJ,P4e)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,xr,Lx],xr,Lx]}),c})(),K6e=(()=>{class c{constructor(){dr.addIcons(VJ)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[[Oi,hie,tie]]}),c})(),J6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[f6e,i6e,xr,hie,d5,gu,UD,qm,RVe,T8e,fne,F6e,W6e,K6e,bne,_8e,Lx,G6e,Rx,j6e]}),c})(),eze=(()=>{class c{constructor(a,h){this.router=a,this.config=h,this.bShowNextTime=!0}ngOnInit(){}get version(){return this.config.environment.version}ngAfterViewInit(){}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.router.navigate(["main"])})}get showNextTime(){return this.bShowNextTime}set showNextTime(a){this.bShowNextTime=a}}return c.\u0275fac=function(a){return new(a||c)(B(ts),B(on))},c.\u0275cmp=je({type:c,selectors:[["app-help"]],decls:12,vars:2,consts:[[1,"ftext","fade-in-3","pad"],[1,"bottom-space"],["type","checkbox","clrCheckbox","","name","nextShowTime","required","","value","nextShow",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","btn-block","top-space",3,"click"],["shape","check"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"h4"),ie(2),F(),I(3,"p"),ie(4,"Online-\u0432\u0435\u0440\u0441\u0438\u044f \u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 D3 \u0442\u0443\u0442: https://deviskin.github.io"),F(),I(5,"clr-checkbox-wrapper",1)(6,"input",2),ee("ngModelChange",function(f){return h.showNextTime=f}),F(),I(7,"label"),ie(8,"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0440\u0430\u0437"),F()(),I(9,"button",3),ee("click",function(){return h.onOk()}),ue(10,"clr-icon",4),ie(11," \u041d\u0430\u0447\u0430\u0442\u044c "),F()()),2&a&&(P(2),Ti("\u0421\u043f\u0440\u0430\u0432\u043a\u0430 (",h.version,")."),P(4),R("ngModel",h.showNextTime))},dependencies:[eo,cs,Hp,Up,td,jo,gL,Ao],styles:[".pad[_ngcontent-%COMP%]{padding:1em}"]}),c})();function Ws(c,l){return null==c||null==l?NaN:c<l?-1:c>l?1:c>=l?0:NaN}function sk(c){let l=c,a=c,h=c;function d(g,m,v=0,y=g.length){if(v<y){if(0!==a(m,m))return y;do{const _=v+y>>>1;h(g[_],m)<0?v=_+1:y=_}while(v<y)}return v}return 2!==c.length&&(l=(g,m)=>c(g)-m,a=Ws,h=(g,m)=>Ws(c(g),m)),{left:d,center:function p(g,m,v=0,y=g.length){const _=d(g,m,v,y-1);return _>v&&l(g[_-1],m)>-l(g[_],m)?_-1:_},right:function f(g,m,v=0,y=g.length){if(v<y){if(0!==a(m,m))return y;do{const _=v+y>>>1;h(g[_],m)<=0?v=_+1:y=_}while(v<y)}return v}}}function Oie(c){return null===c?NaN:+c}const Die=sk(Ws),kie=Die.right,nze=Die.left,ize=sk(Oie).center,Jm=kie;function ok(c,l){let a=0;if(void 0===l)for(let h of c)null!=h&&(h=+h)>=h&&++a;else{let h=-1;for(let d of c)null!=(d=l(d,++h,c))&&(d=+d)>=d&&++a}return a}function rze(c){return 0|c.length}function sze(c){return!(c>0)}function oze(c){return"object"!=typeof c||"length"in c?c:Array.from(c)}function lze(...c){const l="function"==typeof c[c.length-1]&&function aze(c){return l=>c(...l)}(c.pop()),a=(c=c.map(oze)).map(rze),h=c.length-1,d=new Array(h+1).fill(0),f=[];if(h<0||a.some(sze))return f;for(;;){f.push(d.map((g,m)=>c[m][g]));let p=h;for(;++d[p]===a[p];){if(0===p)return l?f.map(l):f;d[p--]=0}}}function cze(c,l){var a=0,h=0;return Float64Array.from(c,void 0===l?d=>a+=+d||0:d=>a+=+l(d,h++,c)||0)}function uze(c,l){return null==c||null==l?NaN:l<c?-1:l>c?1:l>=c?0:NaN}function Mie(c,l){let h,a=0,d=0,f=0;if(void 0===l)for(let p of c)null!=p&&(p=+p)>=p&&(h=p-d,d+=h/++a,f+=h*(p-d));else{let p=-1;for(let g of c)null!=(g=l(g,++p,c))&&(g=+g)>=g&&(h=g-d,d+=h/++a,f+=h*(g-d))}if(a>1)return f/(a-1)}function Eie(c,l){const a=Mie(c,l);return a&&Math.sqrt(a)}function e0(c,l){let a,h;if(void 0===l)for(const d of c)null!=d&&(void 0===a?d>=d&&(a=h=d):(a>d&&(a=d),h<d&&(h=d)));else{let d=-1;for(let f of c)null!=(f=l(f,++d,c))&&(void 0===a?f>=f&&(a=h=f):(a>f&&(a=f),h<f&&(h=f)))}return[a,h]}class Po{constructor(){this._partials=new Float64Array(32),this._n=0}add(l){const a=this._partials;let h=0;for(let d=0;d<this._n&&d<32;d++){const f=a[d],p=l+f,g=Math.abs(l)<Math.abs(f)?l-(p-f):f-(p-l);g&&(a[h++]=g),l=p}return a[h]=l,this._n=h+1,this}valueOf(){const l=this._partials;let h,d,f,a=this._n,p=0;if(a>0){for(p=l[--a];a>0&&(h=p,d=l[--a],p=h+d,f=d-(p-h),!f););a>0&&(f<0&&l[a-1]<0||f>0&&l[a-1]>0)&&(d=2*f,h=p+d,d==h-p&&(p=h))}return p}}function hze(c,l){const a=new Po;if(void 0===l)for(let h of c)(h=+h)&&a.add(h);else{let h=-1;for(let d of c)(d=+l(d,++h,c))&&a.add(d)}return+a}function dze(c,l){const a=new Po;let h=-1;return Float64Array.from(c,void 0===l?d=>a.add(+d||0):d=>a.add(+l(d,++h,c)||0))}class tw extends Map{constructor(l,a=Pie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),null!=l)for(const[h,d]of l)this.set(h,d)}get(l){return super.get(Q5(this,l))}has(l){return super.has(Q5(this,l))}set(l,a){return super.set(Aie(this,l),a)}delete(l){return super.delete(Iie(this,l))}}class t0 extends Set{constructor(l,a=Pie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),null!=l)for(const h of l)this.add(h)}has(l){return super.has(Q5(this,l))}add(l){return super.add(Aie(this,l))}delete(l){return super.delete(Iie(this,l))}}function Q5({_intern:c,_key:l},a){const h=l(a);return c.has(h)?c.get(h):a}function Aie({_intern:c,_key:l},a){const h=l(a);return c.has(h)?c.get(h):(c.set(h,a),a)}function Iie({_intern:c,_key:l},a){const h=l(a);return c.has(h)&&(a=c.get(h),c.delete(h)),a}function Pie(c){return null!==c&&"object"==typeof c?c.valueOf():c}function c_(c){return c}function Rie(c,...l){return u_(c,c_,c_,l)}function Fie(c,...l){return u_(c,Array.from,c_,l)}function Nie(c,l){for(let a=1,h=l.length;a<h;++a)c=c.flatMap(d=>d.pop().map(([f,p])=>[...d,f,p]));return c}function fze(c,...l){return Nie(Fie(c,...l),l)}function pze(c,l,...a){return Nie(Bie(c,l,...a),a)}function Lie(c,l,...a){return u_(c,c_,l,a)}function Bie(c,l,...a){return u_(c,Array.from,l,a)}function gze(c,...l){return u_(c,c_,Vie,l)}function mze(c,...l){return u_(c,Array.from,Vie,l)}function Vie(c){if(1!==c.length)throw new Error("duplicate key");return c[0]}function u_(c,l,a,h){return function d(f,p){if(p>=h.length)return a(f);const g=new tw,m=h[p++];let v=-1;for(const y of f){const _=m(y,++v,f),b=g.get(_);b?b.push(y):g.set(_,[y])}for(const[y,_]of g)g.set(y,d(_,p));return l(g)}(c,0)}function zie(c,l){return Array.from(l,a=>c[a])}function j5(c,...l){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");c=Array.from(c);let[a]=l;if(a&&2!==a.length||l.length>1){const h=Uint32Array.from(c,(d,f)=>f);return l.length>1?(l=l.map(d=>c.map(d)),h.sort((d,f)=>{for(const p of l){const g=nw(p[d],p[f]);if(g)return g}})):(a=c.map(a),h.sort((d,f)=>nw(a[d],a[f]))),zie(c,h)}return c.sort(q5(a))}function q5(c=Ws){if(c===Ws)return nw;if("function"!=typeof c)throw new TypeError("compare is not a function");return(l,a)=>{const h=c(l,a);return h||0===h?h:(0===c(a,a))-(0===c(l,l))}}function nw(c,l){return(null==c||!(c>=c))-(null==l||!(l>=l))||(c<l?-1:c>l?1:0)}function vze(c,l,a){return(2!==l.length?j5(Lie(c,l,a),([h,d],[f,p])=>Ws(d,p)||Ws(h,f)):j5(Rie(c,a),([h,d],[f,p])=>l(d,p)||Ws(h,f))).map(([h])=>h)}var yze=Array.prototype.slice;function ak(c){return()=>c}var Z5=Math.sqrt(50),X5=Math.sqrt(10),Y5=Math.sqrt(2);function h_(c,l,a){var h,f,p,g,d=-1;if(a=+a,(c=+c)==(l=+l)&&a>0)return[c];if((h=l<c)&&(f=c,c=l,l=f),0===(g=iw(c,l,a))||!isFinite(g))return[];if(g>0){let m=Math.round(c/g),v=Math.round(l/g);for(m*g<c&&++m,v*g>l&&--v,p=new Array(f=v-m+1);++d<f;)p[d]=(m+d)*g}else{g=-g;let m=Math.round(c*g),v=Math.round(l*g);for(m/g<c&&++m,v/g>l&&--v,p=new Array(f=v-m+1);++d<f;)p[d]=(m+d)/g}return h&&p.reverse(),p}function iw(c,l,a){var h=(l-c)/Math.max(0,a),d=Math.floor(Math.log(h)/Math.LN10),f=h/Math.pow(10,d);return d>=0?(f>=Z5?10:f>=X5?5:f>=Y5?2:1)*Math.pow(10,d):-Math.pow(10,-d)/(f>=Z5?10:f>=X5?5:f>=Y5?2:1)}function d_(c,l,a){var h=Math.abs(l-c)/Math.max(0,a),d=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),f=h/d;return f>=Z5?d*=10:f>=X5?d*=5:f>=Y5&&(d*=2),l<c?-d:d}function Hie(c,l,a){let h;for(;;){const d=iw(c,l,a);if(d===h||0===d||!isFinite(d))return[c,l];d>0?(c=Math.floor(c/d)*d,l=Math.ceil(l/d)*d):d<0&&(c=Math.ceil(c*d)/d,l=Math.floor(l*d)/d),h=d}}function K5(c){return Math.ceil(Math.log(ok(c))/Math.LN2)+1}function $ie(){var c=c_,l=e0,a=K5;function h(d){Array.isArray(d)||(d=Array.from(d));var f,g,p=d.length,m=new Array(p);for(f=0;f<p;++f)m[f]=c(d[f],f,d);var v=l(m),y=v[0],_=v[1],b=a(m,y,_);if(!Array.isArray(b)){const w=_,T=+b;if(l===e0&&([y,_]=Hie(y,_,T)),(b=h_(y,_,T))[b.length-1]>=_)if(w>=_&&l===e0){const O=iw(y,_,T);isFinite(O)&&(O>0?_=(Math.floor(_/O)+1)*O:O<0&&(_=(Math.ceil(_*-O)+1)/-O))}else b.pop()}for(var C=b.length;b[0]<=y;)b.shift(),--C;for(;b[C-1]>_;)b.pop(),--C;var S,x=new Array(C+1);for(f=0;f<=C;++f)(S=x[f]=[]).x0=f>0?b[f-1]:y,S.x1=f<C?b[f]:_;for(f=0;f<p;++f)null!=(g=m[f])&&y<=g&&g<=_&&x[Jm(b,g,0,C)].push(d[f]);return x}return h.value=function(d){return arguments.length?(c="function"==typeof d?d:ak(d),h):c},h.domain=function(d){return arguments.length?(l="function"==typeof d?d:ak([d[0],d[1]]),h):l},h.thresholds=function(d){return arguments.length?(a="function"==typeof d?d:Array.isArray(d)?ak(yze.call(d)):ak(d),h):a},h}function lk(c,l){let a;if(void 0===l)for(const h of c)null!=h&&(a<h||void 0===a&&h>=h)&&(a=h);else{let h=-1;for(let d of c)null!=(d=l(d,++h,c))&&(a<d||void 0===a&&d>=d)&&(a=d)}return a}function ck(c,l){let a;if(void 0===l)for(const h of c)null!=h&&(a>h||void 0===a&&h>=h)&&(a=h);else{let h=-1;for(let d of c)null!=(d=l(d,++h,c))&&(a>d||void 0===a&&d>=d)&&(a=d)}return a}function J5(c,l,a=0,h=c.length-1,d){for(d=void 0===d?nw:q5(d);h>a;){if(h-a>600){const m=h-a+1,v=l-a+1,y=Math.log(m),_=.5*Math.exp(2*y/3),b=.5*Math.sqrt(y*_*(m-_)/m)*(v-m/2<0?-1:1);J5(c,l,Math.max(a,Math.floor(l-v*_/m+b)),Math.min(h,Math.floor(l+(m-v)*_/m+b)),d)}const f=c[l];let p=a,g=h;for(rw(c,a,l),d(c[h],f)>0&&rw(c,a,h);p<g;){for(rw(c,p,g),++p,--g;d(c[p],f)<0;)++p;for(;d(c[g],f)>0;)--g}0===d(c[a],f)?rw(c,a,g):(++g,rw(c,g,h)),g<=l&&(a=g+1),l<=g&&(h=g-1)}return c}function rw(c,l,a){const h=c[l];c[l]=c[a],c[a]=h}function sw(c,l,a){if(c=Float64Array.from(function*tze(c,l){if(void 0===l)for(let a of c)null!=a&&(a=+a)>=a&&(yield a);else{let a=-1;for(let h of c)null!=(h=l(h,++a,c))&&(h=+h)>=h&&(yield h)}}(c,a)),h=c.length){if((l=+l)<=0||h<2)return ck(c);if(l>=1)return lk(c);var h,d=(h-1)*l,f=Math.floor(d),p=lk(J5(c,f).subarray(0,f+1));return p+(ck(c.subarray(f+1))-p)*(d-f)}}function Wie(c,l,a=Oie){if(h=c.length){if((l=+l)<=0||h<2)return+a(c[0],0,c);if(l>=1)return+a(c[h-1],h-1,c);var h,d=(h-1)*l,f=Math.floor(d),p=+a(c[f],f,c);return p+(+a(c[f+1],f+1,c)-p)*(d-f)}}function _ze(c,l,a){return Math.ceil((a-l)/(2*(sw(c,.75)-sw(c,.25))*Math.pow(ok(c),-1/3)))}function bze(c,l,a){return Math.ceil((a-l)/(3.5*Eie(c)*Math.pow(ok(c),-1/3)))}function Gie(c,l){let a,h=-1,d=-1;if(void 0===l)for(const f of c)++d,null!=f&&(a<f||void 0===a&&f>=f)&&(a=f,h=d);else for(let f of c)null!=(f=l(f,++d,c))&&(a<f||void 0===a&&f>=f)&&(a=f,h=d);return h}function Cze(c,l){let a=0,h=0;if(void 0===l)for(let d of c)null!=d&&(d=+d)>=d&&(++a,h+=d);else{let d=-1;for(let f of c)null!=(f=l(f,++d,c))&&(f=+f)>=f&&(++a,h+=f)}if(a)return h/a}function xze(c,l){return sw(c,.5,l)}function eB(c){return Array.from(function*wze(c){for(const l of c)yield*l}(c))}function Qie(c,l){let a,h=-1,d=-1;if(void 0===l)for(const f of c)++d,null!=f&&(a>f||void 0===a&&f>=f)&&(a=f,h=d);else for(let f of c)null!=(f=l(f,++d,c))&&(a>f||void 0===a&&f>=f)&&(a=f,h=d);return h}function Sze(c,l){const a=new tw;if(void 0===l)for(let f of c)null!=f&&f>=f&&a.set(f,(a.get(f)||0)+1);else{let f=-1;for(let p of c)null!=(p=l(p,++f,c))&&p>=p&&a.set(p,(a.get(p)||0)+1)}let h,d=0;for(const[f,p]of a)p>d&&(d=p,h=f);return h}function Tze(c,l=Oze){const a=[];let h,d=!1;for(const f of c)d&&a.push(l(h,f)),h=f,d=!0;return a}function Oze(c,l){return[c,l]}function Cc(c,l,a){c=+c,l=+l,a=(d=arguments.length)<2?(l=c,c=0,1):d<3?1:+a;for(var h=-1,d=0|Math.max(0,Math.ceil((l-c)/a)),f=new Array(d);++h<d;)f[h]=c+h*a;return f}function Dze(c,l=Ws){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");let a=Array.from(c);const h=new Float64Array(a.length);2!==l.length&&(a=a.map(l),l=Ws);const d=(g,m)=>l(a[g],a[m]);let f,p;return Uint32Array.from(a,(g,m)=>m).sort(l===Ws?(g,m)=>nw(a[g],a[m]):q5(d)).forEach((g,m)=>{const v=d(g,void 0===f?g:f);v>=0?((void 0===f||v>0)&&(f=g,p=m),h[g]=p):h[g]=NaN}),h}function kze(c,l=Ws){let a,h=!1;if(1===l.length){let d;for(const f of c){const p=l(f);(h?Ws(p,d)<0:0===Ws(p,p))&&(a=f,d=p,h=!0)}}else for(const d of c)(h?l(d,a)<0:0===l(d,d))&&(a=d,h=!0);return a}function jie(c,l=Ws){if(1===l.length)return Qie(c,l);let a,h=-1,d=-1;for(const f of c)++d,(h<0?0===l(f,f):l(f,a)<0)&&(a=f,h=d);return h}function Mze(c,l=Ws){let a,h=!1;if(1===l.length){let d;for(const f of c){const p=l(f);(h?Ws(p,d)>0:0===Ws(p,p))&&(a=f,d=p,h=!0)}}else for(const d of c)(h?l(d,a)>0:0===l(d,d))&&(a=d,h=!0);return a}function Eze(c,l=Ws){if(1===l.length)return Gie(c,l);let a,h=-1,d=-1;for(const f of c)++d,(h<0?0===l(f,f):l(f,a)>0)&&(a=f,h=d);return h}function Aze(c,l){const a=jie(c,l);return a<0?void 0:a}const qie=Zie(Math.random);function Zie(c){return function(a,h=0,d=a.length){let f=d-(h=+h);for(;f;){const p=c()*f--|0,g=a[f+h];a[f+h]=a[p+h],a[p+h]=g}return a}}function Ize(c,l){let a=0;if(void 0===l)for(let h of c)(h=+h)&&(a+=h);else{let h=-1;for(let d of c)(d=+l(d,++h,c))&&(a+=d)}return a}function Xie(c){if(!(f=c.length))return[];for(var l=-1,a=ck(c,Pze),h=new Array(a);++l<a;)for(var f,d=-1,p=h[l]=new Array(f);++d<f;)p[d]=c[d][l];return h}function Pze(c){return c.length}function Yie(){return Xie(arguments)}function Rze(c,l){if("function"!=typeof l)throw new TypeError("test is not a function");let a=-1;for(const h of c)if(!l(h,++a,c))return!1;return!0}function Fze(c,l){if("function"!=typeof l)throw new TypeError("test is not a function");let a=-1;for(const h of c)if(l(h,++a,c))return!0;return!1}function Nze(c,l){if("function"!=typeof l)throw new TypeError("test is not a function");const a=[];let h=-1;for(const d of c)l(d,++h,c)&&a.push(d);return a}function Lze(c,l){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof l)throw new TypeError("mapper is not a function");return Array.from(c,(a,h)=>l(a,h,c))}function Bze(c,l,a){if("function"!=typeof l)throw new TypeError("reducer is not a function");const h=c[Symbol.iterator]();let d,f,p=-1;if(arguments.length<3){if(({done:d,value:a}=h.next()),d)return;++p}for(;({done:d,value:f}=h.next()),!d;)a=l(a,f,++p,c);return a}function Vze(c){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(c).reverse()}function zze(c,...l){c=new t0(c);for(const a of l)for(const h of a)c.delete(h);return c}function Uze(c,l){const a=l[Symbol.iterator](),h=new t0;for(const d of c){if(h.has(d))return!1;let f,p;for(;({value:f,done:p}=a.next())&&!p;){if(Object.is(d,f))return!1;h.add(f)}}return!0}function Hze(c,...l){c=new t0(c),l=l.map($ze);e:for(const a of c)for(const h of l)if(!h.has(a)){c.delete(a);continue e}return c}function $ze(c){return c instanceof t0?c:new t0(c)}function Kie(c,l){const a=c[Symbol.iterator](),h=new Set;for(const d of l){const f=Jie(d);if(h.has(f))continue;let p,g;for(;({value:p,done:g}=a.next());){if(g)return!1;const m=Jie(p);if(h.add(m),Object.is(f,m))break}}return!0}function Jie(c){return null!==c&&"object"==typeof c?c.valueOf():c}function Wze(c,l){return Kie(l,c)}function Gze(...c){const l=new t0;for(const a of c)for(const h of a)l.add(h);return l}function Qze(c){return c}function jze(c){return"translate("+c+",0)"}function qze(c){return"translate(0,"+c+")"}function Zze(c){return l=>+c(l)}function Xze(c,l){return l=Math.max(0,c.bandwidth()-2*l)/2,c.round()&&(l=Math.round(l)),a=>+c(a)+l}function Yze(){return!this.__axis}function dk(c,l){var a=[],h=null,d=null,f=6,p=6,g=3,m="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,v=1===c||4===c?-1:1,y=4===c||2===c?"x":"y",_=1===c||3===c?jze:qze;function b(C){var x=null==h?l.ticks?l.ticks.apply(l,a):l.domain():h,S=null==d?l.tickFormat?l.tickFormat.apply(l,a):Qze:d,w=Math.max(f,0)+g,T=l.range(),O=+T[0]+m,k=+T[T.length-1]+m,D=(l.bandwidth?Xze:Zze)(l.copy(),m),M=C.selection?C.selection():C,A=M.selectAll(".domain").data([null]),L=M.selectAll(".tick").data(x,l).order(),E=L.exit(),V=L.enter().append("g").attr("class","tick"),z=L.select("line"),U=L.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(V),z=z.merge(V.append("line").attr("stroke","currentColor").attr(y+"2",v*f)),U=U.merge(V.append("text").attr("fill","currentColor").attr(y,v*w).attr("dy",1===c?"0em":3===c?"0.71em":"0.32em")),C!==M&&(A=A.transition(C),L=L.transition(C),z=z.transition(C),U=U.transition(C),E=E.transition(C).attr("opacity",1e-6).attr("transform",function(Z){return isFinite(Z=D(Z))?_(Z+m):this.getAttribute("transform")}),V.attr("opacity",1e-6).attr("transform",function(Z){var Y=this.parentNode.__axis;return _((Y&&isFinite(Y=Y(Z))?Y:D(Z))+m)})),E.remove(),A.attr("d",4===c||2===c?p?"M"+v*p+","+O+"H"+m+"V"+k+"H"+v*p:"M"+m+","+O+"V"+k:p?"M"+O+","+v*p+"V"+m+"H"+k+"V"+v*p:"M"+O+","+m+"H"+k),L.attr("opacity",1).attr("transform",function(Z){return _(D(Z)+m)}),z.attr(y+"2",v*f),U.attr(y,v*w).text(S),M.filter(Yze).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===c?"start":4===c?"end":"middle"),M.each(function(){this.__axis=D})}return b.scale=function(C){return arguments.length?(l=C,b):l},b.ticks=function(){return a=Array.from(arguments),b},b.tickArguments=function(C){return arguments.length?(a=null==C?[]:Array.from(C),b):a.slice()},b.tickValues=function(C){return arguments.length?(h=null==C?null:Array.from(C),b):h&&h.slice()},b.tickFormat=function(C){return arguments.length?(d=C,b):d},b.tickSize=function(C){return arguments.length?(f=p=+C,b):f},b.tickSizeInner=function(C){return arguments.length?(f=+C,b):f},b.tickSizeOuter=function(C){return arguments.length?(p=+C,b):p},b.tickPadding=function(C){return arguments.length?(g=+C,b):g},b.offset=function(C){return arguments.length?(m=+C,b):m},b}function Kze(c){return dk(1,c)}function Jze(c){return dk(2,c)}function eUe(c){return dk(3,c)}function tUe(c){return dk(4,c)}var nUe={value:()=>{}};function tre(){for(var h,c=0,l=arguments.length,a={};c<l;++c){if(!(h=arguments[c]+"")||h in a||/[\s.]/.test(h))throw new Error("illegal type: "+h);a[h]=[]}return new fk(a)}function fk(c){this._=c}function iUe(c,l){return c.trim().split(/^|\s+/).map(function(a){var h="",d=a.indexOf(".");if(d>=0&&(h=a.slice(d+1),a=a.slice(0,d)),a&&!l.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:h}})}function rUe(c,l){for(var d,a=0,h=c.length;a<h;++a)if((d=c[a]).name===l)return d.value}function nre(c,l,a){for(var h=0,d=c.length;h<d;++h)if(c[h].name===l){c[h]=nUe,c=c.slice(0,h).concat(c.slice(h+1));break}return null!=a&&c.push({name:l,value:a}),c}fk.prototype=tre.prototype={constructor:fk,on:function(c,l){var d,a=this._,h=iUe(c+"",a),f=-1,p=h.length;if(!(arguments.length<2)){if(null!=l&&"function"!=typeof l)throw new Error("invalid callback: "+l);for(;++f<p;)if(d=(c=h[f]).type)a[d]=nre(a[d],c.name,l);else if(null==l)for(d in a)a[d]=nre(a[d],c.name,null);return this}for(;++f<p;)if((d=(c=h[f]).type)&&(d=rUe(a[d],c.name)))return d},copy:function(){var c={},l=this._;for(var a in l)c[a]=l[a].slice();return new fk(c)},call:function(c,l){if((d=arguments.length-2)>0)for(var d,f,a=new Array(d),h=0;h<d;++h)a[h]=arguments[h+2];if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(h=0,d=(f=this._[c]).length;h<d;++h)f[h].value.apply(l,a)},apply:function(c,l,a){if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(var h=this._[c],d=0,f=h.length;d<f;++d)h[d].value.apply(l,a)}};const f_=tre;function sUe(){}function pk(c){return null==c?sUe:function(){return this.querySelector(c)}}function ire(c){return null==c?[]:Array.isArray(c)?c:Array.from(c)}function aUe(){return[]}function nB(c){return null==c?aUe:function(){return this.querySelectorAll(c)}}function iB(c){return function(){return this.matches(c)}}function rre(c){return function(l){return l.matches(c)}}var uUe=Array.prototype.find;function dUe(){return this.firstElementChild}var pUe=Array.prototype.filter;function gUe(){return Array.from(this.children)}function sre(c){return new Array(c.length)}function gk(c,l){this.ownerDocument=c.ownerDocument,this.namespaceURI=c.namespaceURI,this._next=null,this._parent=c,this.__data__=l}function bUe(c){return function(){return c}}function CUe(c,l,a,h,d,f){for(var g,p=0,m=l.length,v=f.length;p<v;++p)(g=l[p])?(g.__data__=f[p],h[p]=g):a[p]=new gk(c,f[p]);for(;p<m;++p)(g=l[p])&&(d[p]=g)}function xUe(c,l,a,h,d,f,p){var g,m,C,v=new Map,y=l.length,_=f.length,b=new Array(y);for(g=0;g<y;++g)(m=l[g])&&(b[g]=C=p.call(m,m.__data__,g,l)+"",v.has(C)?d[g]=m:v.set(C,m));for(g=0;g<_;++g)C=p.call(c,f[g],g,f)+"",(m=v.get(C))?(h[g]=m,m.__data__=f[g],v.delete(C)):a[g]=new gk(c,f[g]);for(g=0;g<y;++g)(m=l[g])&&v.get(b[g])===m&&(d[g]=m)}function wUe(c){return c.__data__}function TUe(c){return"object"==typeof c&&"length"in c?c:Array.from(c)}function AUe(c,l){return c<l?-1:c>l?1:c>=l?0:NaN}gk.prototype={constructor:gk,appendChild:function(c){return this._parent.insertBefore(c,this._next)},insertBefore:function(c,l){return this._parent.insertBefore(c,l)},querySelector:function(c){return this._parent.querySelector(c)},querySelectorAll:function(c){return this._parent.querySelectorAll(c)}};var rB="http://www.w3.org/1999/xhtml";const sB={svg:"http://www.w3.org/2000/svg",xhtml:rB,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function aw(c){var l=c+="",a=l.indexOf(":");return a>=0&&"xmlns"!==(l=c.slice(0,a))&&(c=c.slice(a+1)),sB.hasOwnProperty(l)?{space:sB[l],local:c}:c}function BUe(c){return function(){this.removeAttribute(c)}}function VUe(c){return function(){this.removeAttributeNS(c.space,c.local)}}function zUe(c,l){return function(){this.setAttribute(c,l)}}function UUe(c,l){return function(){this.setAttributeNS(c.space,c.local,l)}}function HUe(c,l){return function(){var a=l.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}}function $Ue(c,l){return function(){var a=l.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}}function oB(c){return c.ownerDocument&&c.ownerDocument.defaultView||c.document&&c||c.defaultView}function GUe(c){return function(){this.style.removeProperty(c)}}function QUe(c,l,a){return function(){this.style.setProperty(c,l,a)}}function jUe(c,l,a){return function(){var h=l.apply(this,arguments);null==h?this.style.removeProperty(c):this.style.setProperty(c,h,a)}}function n0(c,l){return c.style.getPropertyValue(l)||oB(c).getComputedStyle(c,null).getPropertyValue(l)}function ZUe(c){return function(){delete this[c]}}function XUe(c,l){return function(){this[c]=l}}function YUe(c,l){return function(){var a=l.apply(this,arguments);null==a?delete this[c]:this[c]=a}}function ore(c){return c.trim().split(/^|\s+/)}function aB(c){return c.classList||new are(c)}function are(c){this._node=c,this._names=ore(c.getAttribute("class")||"")}function lre(c,l){for(var a=aB(c),h=-1,d=l.length;++h<d;)a.add(l[h])}function cre(c,l){for(var a=aB(c),h=-1,d=l.length;++h<d;)a.remove(l[h])}function JUe(c){return function(){lre(this,c)}}function e7e(c){return function(){cre(this,c)}}function t7e(c,l){return function(){(l.apply(this,arguments)?lre:cre)(this,c)}}function i7e(){this.textContent=""}function r7e(c){return function(){this.textContent=c}}function s7e(c){return function(){var l=c.apply(this,arguments);this.textContent=null==l?"":l}}function a7e(){this.innerHTML=""}function l7e(c){return function(){this.innerHTML=c}}function c7e(c){return function(){var l=c.apply(this,arguments);this.innerHTML=null==l?"":l}}function h7e(){this.nextSibling&&this.parentNode.appendChild(this)}function f7e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function g7e(c){return function(){var l=this.ownerDocument,a=this.namespaceURI;return a===rB&&l.documentElement.namespaceURI===rB?l.createElement(c):l.createElementNS(a,c)}}function m7e(c){return function(){return this.ownerDocument.createElementNS(c.space,c.local)}}function mk(c){var l=aw(c);return(l.local?m7e:g7e)(l)}function y7e(){return null}function b7e(){var c=this.parentNode;c&&c.removeChild(this)}function x7e(){var c=this.cloneNode(!1),l=this.parentNode;return l?l.insertBefore(c,this.nextSibling):c}function w7e(){var c=this.cloneNode(!0),l=this.parentNode;return l?l.insertBefore(c,this.nextSibling):c}function D7e(c){return c.trim().split(/^|\s+/).map(function(l){var a="",h=l.indexOf(".");return h>=0&&(a=l.slice(h+1),l=l.slice(0,h)),{type:l,name:a}})}function k7e(c){return function(){var l=this.__on;if(l){for(var f,a=0,h=-1,d=l.length;a<d;++a)f=l[a],c.type&&f.type!==c.type||f.name!==c.name?l[++h]=f:this.removeEventListener(f.type,f.listener,f.options);++h?l.length=h:delete this.__on}}}function M7e(c,l,a){return function(){var d,h=this.__on,f=function O7e(c){return function(l){c.call(this,l,this.__data__)}}(l);if(h)for(var p=0,g=h.length;p<g;++p)if((d=h[p]).type===c.type&&d.name===c.name)return this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=a),void(d.value=l);this.addEventListener(c.type,f,a),d={type:c.type,name:c.name,value:l,listener:f,options:a},h?h.push(d):this.__on=[d]}}function ure(c,l,a){var h=oB(c),d=h.CustomEvent;"function"==typeof d?d=new d(l,a):(d=h.document.createEvent("Event"),a?(d.initEvent(l,a.bubbles,a.cancelable),d.detail=a.detail):d.initEvent(l,!1,!1)),c.dispatchEvent(d)}function A7e(c,l){return function(){return ure(this,c,l)}}function I7e(c,l){return function(){return ure(this,c,l.apply(this,arguments))}}are.prototype={add:function(c){this._names.indexOf(c)<0&&(this._names.push(c),this._node.setAttribute("class",this._names.join(" ")))},remove:function(c){var l=this._names.indexOf(c);l>=0&&(this._names.splice(l,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(c){return this._names.indexOf(c)>=0}};var lB=[null];function sl(c,l){this._groups=c,this._parents=l}function hre(){return new sl([[document.documentElement]],lB)}sl.prototype=hre.prototype={constructor:sl,select:function oUe(c){"function"!=typeof c&&(c=pk(c));for(var l=this._groups,a=l.length,h=new Array(a),d=0;d<a;++d)for(var m,v,f=l[d],p=f.length,g=h[d]=new Array(p),y=0;y<p;++y)(m=f[y])&&(v=c.call(m,m.__data__,y,f))&&("__data__"in m&&(v.__data__=m.__data__),g[y]=v);return new sl(h,this._parents)},selectAll:function cUe(c){c="function"==typeof c?function lUe(c){return function(){return ire(c.apply(this,arguments))}}(c):nB(c);for(var l=this._groups,a=l.length,h=[],d=[],f=0;f<a;++f)for(var m,p=l[f],g=p.length,v=0;v<g;++v)(m=p[v])&&(h.push(c.call(m,m.__data__,v,p)),d.push(m));return new sl(h,d)},selectChild:function fUe(c){return this.select(null==c?dUe:function hUe(c){return function(){return uUe.call(this.children,c)}}("function"==typeof c?c:rre(c)))},selectChildren:function vUe(c){return this.selectAll(null==c?gUe:function mUe(c){return function(){return pUe.call(this.children,c)}}("function"==typeof c?c:rre(c)))},filter:function yUe(c){"function"!=typeof c&&(c=iB(c));for(var l=this._groups,a=l.length,h=new Array(a),d=0;d<a;++d)for(var m,f=l[d],p=f.length,g=h[d]=[],v=0;v<p;++v)(m=f[v])&&c.call(m,m.__data__,v,f)&&g.push(m);return new sl(h,this._parents)},data:function SUe(c,l){if(!arguments.length)return Array.from(this,wUe);var a=l?xUe:CUe,h=this._parents,d=this._groups;"function"!=typeof c&&(c=bUe(c));for(var f=d.length,p=new Array(f),g=new Array(f),m=new Array(f),v=0;v<f;++v){var y=h[v],_=d[v],b=_.length,C=TUe(c.call(y,y&&y.__data__,v,h)),x=C.length,S=g[v]=new Array(x),w=p[v]=new Array(x),T=m[v]=new Array(b);a(y,_,S,w,T,C,l);for(var D,M,O=0,k=0;O<x;++O)if(D=S[O]){for(O>=k&&(k=O+1);!(M=w[k])&&++k<x;);D._next=M||null}}return(p=new sl(p,h))._enter=g,p._exit=m,p},enter:function _Ue(){return new sl(this._enter||this._groups.map(sre),this._parents)},exit:function OUe(){return new sl(this._exit||this._groups.map(sre),this._parents)},join:function DUe(c,l,a){var h=this.enter(),d=this,f=this.exit();return"function"==typeof c?(h=c(h))&&(h=h.selection()):h=h.append(c+""),null!=l&&(d=l(d))&&(d=d.selection()),null==a?f.remove():a(f),h&&d?h.merge(d).order():d},merge:function kUe(c){for(var l=c.selection?c.selection():c,a=this._groups,h=l._groups,d=a.length,p=Math.min(d,h.length),g=new Array(d),m=0;m<p;++m)for(var C,v=a[m],y=h[m],_=v.length,b=g[m]=new Array(_),x=0;x<_;++x)(C=v[x]||y[x])&&(b[x]=C);for(;m<d;++m)g[m]=a[m];return new sl(g,this._parents)},selection:function F7e(){return this},order:function MUe(){for(var c=this._groups,l=-1,a=c.length;++l<a;)for(var p,h=c[l],d=h.length-1,f=h[d];--d>=0;)(p=h[d])&&(f&&4^p.compareDocumentPosition(f)&&f.parentNode.insertBefore(p,f),f=p);return this},sort:function EUe(c){function l(_,b){return _&&b?c(_.__data__,b.__data__):!_-!b}c||(c=AUe);for(var a=this._groups,h=a.length,d=new Array(h),f=0;f<h;++f){for(var v,p=a[f],g=p.length,m=d[f]=new Array(g),y=0;y<g;++y)(v=p[y])&&(m[y]=v);m.sort(l)}return new sl(d,this._parents).order()},call:function IUe(){var c=arguments[0];return arguments[0]=this,c.apply(null,arguments),this},nodes:function PUe(){return Array.from(this)},node:function RUe(){for(var c=this._groups,l=0,a=c.length;l<a;++l)for(var h=c[l],d=0,f=h.length;d<f;++d){var p=h[d];if(p)return p}return null},size:function FUe(){let c=0;for(const l of this)++c;return c},empty:function NUe(){return!this.node()},each:function LUe(c){for(var l=this._groups,a=0,h=l.length;a<h;++a)for(var g,d=l[a],f=0,p=d.length;f<p;++f)(g=d[f])&&c.call(g,g.__data__,f,d);return this},attr:function WUe(c,l){var a=aw(c);if(arguments.length<2){var h=this.node();return a.local?h.getAttributeNS(a.space,a.local):h.getAttribute(a)}return this.each((null==l?a.local?VUe:BUe:"function"==typeof l?a.local?$Ue:HUe:a.local?UUe:zUe)(a,l))},style:function qUe(c,l,a){return arguments.length>1?this.each((null==l?GUe:"function"==typeof l?jUe:QUe)(c,l,null==a?"":a)):n0(this.node(),c)},property:function KUe(c,l){return arguments.length>1?this.each((null==l?ZUe:"function"==typeof l?YUe:XUe)(c,l)):this.node()[c]},classed:function n7e(c,l){var a=ore(c+"");if(arguments.length<2){for(var h=aB(this.node()),d=-1,f=a.length;++d<f;)if(!h.contains(a[d]))return!1;return!0}return this.each(("function"==typeof l?t7e:l?JUe:e7e)(a,l))},text:function o7e(c){return arguments.length?this.each(null==c?i7e:("function"==typeof c?s7e:r7e)(c)):this.node().textContent},html:function u7e(c){return arguments.length?this.each(null==c?a7e:("function"==typeof c?c7e:l7e)(c)):this.node().innerHTML},raise:function d7e(){return this.each(h7e)},lower:function p7e(){return this.each(f7e)},append:function v7e(c){var l="function"==typeof c?c:mk(c);return this.select(function(){return this.appendChild(l.apply(this,arguments))})},insert:function _7e(c,l){var a="function"==typeof c?c:mk(c),h=null==l?y7e:"function"==typeof l?l:pk(l);return this.select(function(){return this.insertBefore(a.apply(this,arguments),h.apply(this,arguments)||null)})},remove:function C7e(){return this.each(b7e)},clone:function S7e(c){return this.select(c?w7e:x7e)},datum:function T7e(c){return arguments.length?this.property("__data__",c):this.node().__data__},on:function E7e(c,l,a){var d,p,h=D7e(c+""),f=h.length;if(!(arguments.length<2)){for(g=l?M7e:k7e,d=0;d<f;++d)this.each(g(h[d],l,a));return this}var g=this.node().__on;if(g)for(var y,m=0,v=g.length;m<v;++m)for(d=0,y=g[m];d<f;++d)if((p=h[d]).type===y.type&&p.name===y.name)return y.value},dispatch:function P7e(c,l){return this.each(("function"==typeof l?I7e:A7e)(c,l))},[Symbol.iterator]:function*R7e(){for(var c=this._groups,l=0,a=c.length;l<a;++l)for(var p,h=c[l],d=0,f=h.length;d<f;++d)(p=h[d])&&(yield p)}};const p_=hre;function po(c){return"string"==typeof c?new sl([[document.querySelector(c)]],[document.documentElement]):new sl([[c]],lB)}const N7e={passive:!1},lw={capture:!0,passive:!1};function cB(c){c.stopImmediatePropagation()}function g_(c){c.preventDefault(),c.stopImmediatePropagation()}function vk(c){var l=c.document.documentElement,a=po(c).on("dragstart.drag",g_,lw);"onselectstart"in l?a.on("selectstart.drag",g_,lw):(l.__noselect=l.style.MozUserSelect,l.style.MozUserSelect="none")}function yk(c,l){var a=c.document.documentElement,h=po(c).on("dragstart.drag",null);l&&(h.on("click.drag",g_,lw),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in a?h.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}function m_(c,l,a){c.prototype=l.prototype=a,a.constructor=c}function cw(c,l){var a=Object.create(c.prototype);for(var h in l)a[h]=l[h];return a}function jp(){}var v_=1/.7,y_="\\s*([+-]?\\d+)\\s*",uw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ld="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",L7e=/^#([0-9a-f]{3,8})$/,B7e=new RegExp("^rgb\\("+[y_,y_,y_]+"\\)$"),V7e=new RegExp("^rgb\\("+[ld,ld,ld]+"\\)$"),z7e=new RegExp("^rgba\\("+[y_,y_,y_,uw]+"\\)$"),U7e=new RegExp("^rgba\\("+[ld,ld,ld,uw]+"\\)$"),H7e=new RegExp("^hsl\\("+[uw,ld,ld]+"\\)$"),$7e=new RegExp("^hsla\\("+[uw,ld,ld,uw]+"\\)$"),dre={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fre(){return this.rgb().formatHex()}function pre(){return this.rgb().formatRgb()}function ah(c){var l,a;return c=(c+"").trim().toLowerCase(),(l=L7e.exec(c))?(a=l[1].length,l=parseInt(l[1],16),6===a?gre(l):3===a?new ca(l>>8&15|l>>4&240,l>>4&15|240&l,(15&l)<<4|15&l,1):8===a?_k(l>>24&255,l>>16&255,l>>8&255,(255&l)/255):4===a?_k(l>>12&15|l>>8&240,l>>8&15|l>>4&240,l>>4&15|240&l,((15&l)<<4|15&l)/255):null):(l=B7e.exec(c))?new ca(l[1],l[2],l[3],1):(l=V7e.exec(c))?new ca(255*l[1]/100,255*l[2]/100,255*l[3]/100,1):(l=z7e.exec(c))?_k(l[1],l[2],l[3],l[4]):(l=U7e.exec(c))?_k(255*l[1]/100,255*l[2]/100,255*l[3]/100,l[4]):(l=H7e.exec(c))?yre(l[1],l[2]/100,l[3]/100,1):(l=$7e.exec(c))?yre(l[1],l[2]/100,l[3]/100,l[4]):dre.hasOwnProperty(c)?gre(dre[c]):"transparent"===c?new ca(NaN,NaN,NaN,0):null}function gre(c){return new ca(c>>16&255,c>>8&255,255&c,1)}function _k(c,l,a,h){return h<=0&&(c=l=a=NaN),new ca(c,l,a,h)}function uB(c){return c instanceof jp||(c=ah(c)),c?new ca((c=c.rgb()).r,c.g,c.b,c.opacity):new ca}function Nf(c,l,a,h){return 1===arguments.length?uB(c):new ca(c,l,a,null==h?1:h)}function ca(c,l,a,h){this.r=+c,this.g=+l,this.b=+a,this.opacity=+h}function mre(){return"#"+hB(this.r)+hB(this.g)+hB(this.b)}function vre(){var c=this.opacity;return(1===(c=isNaN(c)?1:Math.max(0,Math.min(1,c)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===c?")":", "+c+")")}function hB(c){return((c=Math.max(0,Math.min(255,Math.round(c)||0)))<16?"0":"")+c.toString(16)}function yre(c,l,a,h){return h<=0?c=l=a=NaN:a<=0||a>=1?c=l=NaN:l<=0&&(c=NaN),new cd(c,l,a,h)}function _re(c){if(c instanceof cd)return new cd(c.h,c.s,c.l,c.opacity);if(c instanceof jp||(c=ah(c)),!c)return new cd;if(c instanceof cd)return c;var l=(c=c.rgb()).r/255,a=c.g/255,h=c.b/255,d=Math.min(l,a,h),f=Math.max(l,a,h),p=NaN,g=f-d,m=(f+d)/2;return g?(p=l===f?(a-h)/g+6*(a<h):a===f?(h-l)/g+2:(l-a)/g+4,g/=m<.5?f+d:2-f-d,p*=60):g=m>0&&m<1?0:p,new cd(p,g,m,c.opacity)}function bk(c,l,a,h){return 1===arguments.length?_re(c):new cd(c,l,a,null==h?1:h)}function cd(c,l,a,h){this.h=+c,this.s=+l,this.l=+a,this.opacity=+h}function dB(c,l,a){return 255*(c<60?l+(a-l)*c/60:c<180?a:c<240?l+(a-l)*(240-c)/60:l)}function bre(c,l,a,h,d){var f=c*c,p=f*c;return((1-3*c+3*f-p)*l+(4-6*f+3*p)*a+(1+3*c+3*f-3*p)*h+p*d)/6}function Cre(c){var l=c.length-1;return function(a){var h=a<=0?a=0:a>=1?(a=1,l-1):Math.floor(a*l),d=c[h],f=c[h+1];return bre((a-h/l)*l,h>0?c[h-1]:2*d-f,d,f,h<l-1?c[h+2]:2*f-d)}}function xre(c){var l=c.length;return function(a){var h=Math.floor(((a%=1)<0?++a:a)*l);return bre((a-h/l)*l,c[(h+l-1)%l],c[h%l],c[(h+1)%l],c[(h+2)%l])}}m_(jp,ah,{copy:function(c){return Object.assign(new this.constructor,this,c)},displayable:function(){return this.rgb().displayable()},hex:fre,formatHex:fre,formatHsl:function W7e(){return _re(this).formatHsl()},formatRgb:pre,toString:pre}),m_(ca,Nf,cw(jp,{brighter:function(c){return c=null==c?v_:Math.pow(v_,c),new ca(this.r*c,this.g*c,this.b*c,this.opacity)},darker:function(c){return c=null==c?.7:Math.pow(.7,c),new ca(this.r*c,this.g*c,this.b*c,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mre,formatHex:mre,formatRgb:vre,toString:vre})),m_(cd,bk,cw(jp,{brighter:function(c){return c=null==c?v_:Math.pow(v_,c),new cd(this.h,this.s,this.l*c,this.opacity)},darker:function(c){return c=null==c?.7:Math.pow(.7,c),new cd(this.h,this.s,this.l*c,this.opacity)},rgb:function(){var c=this.h%360+360*(this.h<0),l=isNaN(c)||isNaN(this.s)?0:this.s,a=this.l,h=a+(a<.5?a:1-a)*l,d=2*a-h;return new ca(dB(c>=240?c-240:c+120,d,h),dB(c,d,h),dB(c<120?c+240:c-120,d,h),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var c=this.opacity;return(1===(c=isNaN(c)?1:Math.max(0,Math.min(1,c)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===c?")":", "+c+")")}}));const Ck=c=>()=>c;function wre(c,l){return function(a){return c+a*l}}function xk(c,l){var a=l-c;return a?wre(c,a>180||a<-180?a-360*Math.round(a/360):a):Ck(isNaN(c)?l:c)}function Xo(c,l){var a=l-c;return a?wre(c,a):Ck(isNaN(c)?l:c)}const hw=function c(l){var a=function Q7e(c){return 1==(c=+c)?Xo:function(l,a){return a-l?function G7e(c,l,a){return c=Math.pow(c,a),l=Math.pow(l,a)-c,a=1/a,function(h){return Math.pow(c+h*l,a)}}(l,a,c):Ck(isNaN(l)?a:l)}}(l);function h(d,f){var p=a((d=Nf(d)).r,(f=Nf(f)).r),g=a(d.g,f.g),m=a(d.b,f.b),v=Xo(d.opacity,f.opacity);return function(y){return d.r=p(y),d.g=g(y),d.b=m(y),d.opacity=v(y),d+""}}return h.gamma=c,h}(1);function Sre(c){return function(l){var p,g,a=l.length,h=new Array(a),d=new Array(a),f=new Array(a);for(p=0;p<a;++p)g=Nf(l[p]),h[p]=g.r||0,d[p]=g.g||0,f[p]=g.b||0;return h=c(h),d=c(d),f=c(f),g.opacity=1,function(m){return g.r=h(m),g.g=d(m),g.b=f(m),g+""}}}var Tre=Sre(Cre),j7e=Sre(xre);function fB(c,l){l||(l=[]);var d,a=c?Math.min(l.length,c.length):0,h=l.slice();return function(f){for(d=0;d<a;++d)h[d]=c[d]*(1-f)+l[d]*f;return h}}function Ore(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}function q7e(c,l){return(Ore(l)?fB:Dre)(c,l)}function Dre(c,l){var p,a=l?l.length:0,h=c?Math.min(a,c.length):0,d=new Array(h),f=new Array(a);for(p=0;p<h;++p)d[p]=qp(c[p],l[p]);for(;p<a;++p)f[p]=l[p];return function(g){for(p=0;p<h;++p)f[p]=d[p](g);return f}}function kre(c,l){var a=new Date;return c=+c,l=+l,function(h){return a.setTime(c*(1-h)+l*h),a}}function mu(c,l){return c=+c,l=+l,function(a){return c*(1-a)+l*a}}function Mre(c,l){var d,a={},h={};for(d in(null===c||"object"!=typeof c)&&(c={}),(null===l||"object"!=typeof l)&&(l={}),l)d in c?a[d]=qp(c[d],l[d]):h[d]=l[d];return function(f){for(d in a)h[d]=a[d](f);return h}}var pB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gB=new RegExp(pB.source,"g");function mB(c,l){var h,d,f,a=pB.lastIndex=gB.lastIndex=0,p=-1,g=[],m=[];for(c+="",l+="";(h=pB.exec(c))&&(d=gB.exec(l));)(f=d.index)>a&&(f=l.slice(a,f),g[p]?g[p]+=f:g[++p]=f),(h=h[0])===(d=d[0])?g[p]?g[p]+=d:g[++p]=d:(g[++p]=null,m.push({i:p,x:mu(h,d)})),a=gB.lastIndex;return a<l.length&&(f=l.slice(a),g[p]?g[p]+=f:g[++p]=f),g.length<2?m[0]?function X7e(c){return function(l){return c(l)+""}}(m[0].x):function Z7e(c){return function(){return c}}(l):(l=m.length,function(v){for(var _,y=0;y<l;++y)g[(_=m[y]).i]=_.x(v);return g.join("")})}function qp(c,l){var h,a=typeof l;return null==l||"boolean"===a?Ck(l):("number"===a?mu:"string"===a?(h=ah(l))?(l=h,hw):mB:l instanceof ah?hw:l instanceof Date?kre:Ore(l)?fB:Array.isArray(l)?Dre:"function"!=typeof l.valueOf&&"function"!=typeof l.toString||isNaN(l)?Mre:mu)(c,l)}function Ere(c){let l;for(;l=c.sourceEvent;)c=l;return c}function xc(c,l){if(c=Ere(c),void 0===l&&(l=c.currentTarget),l){var a=l.ownerSVGElement||l;if(a.createSVGPoint){var h=a.createSVGPoint();return h.x=c.clientX,h.y=c.clientY,[(h=h.matrixTransform(l.getScreenCTM().inverse())).x,h.y]}if(l.getBoundingClientRect){var d=l.getBoundingClientRect();return[c.clientX-d.left-l.clientLeft,c.clientY-d.top-l.clientTop]}}return[c.pageX,c.pageY]}var wk,pw,__=0,dw=0,fw=0,Sk=0,s0=0,Tk=0,gw="object"==typeof performance&&performance.now?performance:Date,Ire="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(c){setTimeout(c,17)};function mw(){return s0||(Ire(Y7e),s0=gw.now()+Tk)}function Y7e(){s0=0}function vw(){this._call=this._time=this._next=null}function Ok(c,l,a){var h=new vw;return h.restart(c,l,a),h}function Pre(){mw(),++__;for(var l,c=wk;c;)(l=s0-c._time)>=0&&c._call.call(void 0,l),c=c._next;--__}function Rre(){s0=(Sk=gw.now())+Tk,__=dw=0;try{Pre()}finally{__=0,function J7e(){for(var c,a,l=wk,h=1/0;l;)l._call?(h>l._time&&(h=l._time),c=l,l=l._next):(a=l._next,l._next=null,l=c?c._next=a:wk=a);pw=c,vB(h)}(),s0=0}}function K7e(){var c=gw.now(),l=c-Sk;l>1e3&&(Tk-=l,Sk=c)}function vB(c){__||(dw&&(dw=clearTimeout(dw)),c-s0>24?(c<1/0&&(dw=setTimeout(Rre,c-gw.now()-Tk)),fw&&(fw=clearInterval(fw))):(fw||(Sk=gw.now(),fw=setInterval(K7e,1e3)),__=1,Ire(Rre)))}function yB(c,l,a){var h=new vw;return h.restart(d=>{h.stop(),c(d+l)},l=null==l?0:+l,a),h}vw.prototype=Ok.prototype={constructor:vw,restart:function(c,l,a){if("function"!=typeof c)throw new TypeError("callback is not a function");a=(null==a?mw():+a)+(null==l?0:+l),!this._next&&pw!==this&&(pw?pw._next=this:wk=this,pw=this),this._call=c,this._time=a,vB()},stop:function(){this._call&&(this._call=null,this._time=1/0,vB())}};var eHe=f_("start","end","cancel","interrupt"),tHe=[];function Mk(c,l,a,h,d,f){var p=c.__transition;if(p){if(a in p)return}else c.__transition={};!function nHe(c,l,a){var d,h=c.__transition;function p(v){var y,_,b,C;if(1!==a.state)return m();for(y in h)if((C=h[y]).name===a.name){if(3===C.state)return yB(p);4===C.state?(C.state=6,C.timer.stop(),C.on.call("interrupt",c,c.__data__,C.index,C.group),delete h[y]):+y<l&&(C.state=6,C.timer.stop(),C.on.call("cancel",c,c.__data__,C.index,C.group),delete h[y])}if(yB(function(){3===a.state&&(a.state=4,a.timer.restart(g,a.delay,a.time),g(v))}),a.state=2,a.on.call("start",c,c.__data__,a.index,a.group),2===a.state){for(a.state=3,d=new Array(b=a.tween.length),y=0,_=-1;y<b;++y)(C=a.tween[y].value.call(c,c.__data__,a.index,a.group))&&(d[++_]=C);d.length=_+1}}function g(v){for(var y=v<a.duration?a.ease.call(null,v/a.duration):(a.timer.restart(m),a.state=5,1),_=-1,b=d.length;++_<b;)d[_].call(c,y);5===a.state&&(a.on.call("end",c,c.__data__,a.index,a.group),m())}function m(){for(var v in a.state=6,a.timer.stop(),delete h[l],h)return;delete c.__transition}h[l]=a,a.timer=Ok(function f(v){a.state=1,a.timer.restart(p,a.delay,a.time),a.delay<=v&&p(v-a.delay)},0,a.time)}(c,a,{name:l,index:h,group:d,on:eHe,tween:tHe,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function xB(c,l){var a=lh(c,l);if(a.state>0)throw new Error("too late; already scheduled");return a}function ud(c,l){var a=lh(c,l);if(a.state>3)throw new Error("too late; already running");return a}function lh(c,l){var a=c.__transition;if(!a||!(a=a[l]))throw new Error("transition not found");return a}function o0(c,l){var h,d,p,a=c.__transition,f=!0;if(a){for(p in l=null==l?null:l+"",a)(h=a[p]).name===l?(d=h.state>2&&h.state<5,h.state=6,h.timer.stop(),h.on.call(d?"interrupt":"cancel",c,c.__data__,h.index,h.group),delete a[p]):f=!1;f&&delete c.__transition}}var Ek,Lre=180/Math.PI,wB={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bre(c,l,a,h,d,f){var p,g,m;return(p=Math.sqrt(c*c+l*l))&&(c/=p,l/=p),(m=c*a+l*h)&&(a-=c*m,h-=l*m),(g=Math.sqrt(a*a+h*h))&&(a/=g,h/=g,m/=g),c*h<l*a&&(c=-c,l=-l,m=-m,p=-p),{translateX:d,translateY:f,rotate:Math.atan2(l,c)*Lre,skewX:Math.atan(m)*Lre,scaleX:p,scaleY:g}}function Vre(c,l,a,h){function d(v){return v.length?v.pop()+" ":""}return function(v,y){var _=[],b=[];return v=c(v),y=c(y),function f(v,y,_,b,C,x){if(v!==_||y!==b){var S=C.push("translate(",null,l,null,a);x.push({i:S-4,x:mu(v,_)},{i:S-2,x:mu(y,b)})}else(_||b)&&C.push("translate("+_+l+b+a)}(v.translateX,v.translateY,y.translateX,y.translateY,_,b),function p(v,y,_,b){v!==y?(v-y>180?y+=360:y-v>180&&(v+=360),b.push({i:_.push(d(_)+"rotate(",null,h)-2,x:mu(v,y)})):y&&_.push(d(_)+"rotate("+y+h)}(v.rotate,y.rotate,_,b),function g(v,y,_,b){v!==y?b.push({i:_.push(d(_)+"skewX(",null,h)-2,x:mu(v,y)}):y&&_.push(d(_)+"skewX("+y+h)}(v.skewX,y.skewX,_,b),function m(v,y,_,b,C,x){if(v!==_||y!==b){var S=C.push(d(C)+"scale(",null,",",null,")");x.push({i:S-4,x:mu(v,_)},{i:S-2,x:mu(y,b)})}else(1!==_||1!==b)&&C.push(d(C)+"scale("+_+","+b+")")}(v.scaleX,v.scaleY,y.scaleX,y.scaleY,_,b),v=y=null,function(C){for(var w,x=-1,S=b.length;++x<S;)_[(w=b[x]).i]=w.x(C);return _.join("")}}}var zre=Vre(function rHe(c){const l=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(c+"");return l.isIdentity?wB:Bre(l.a,l.b,l.c,l.d,l.e,l.f)},"px, ","px)","deg)"),Ure=Vre(function sHe(c){return null!=c&&(Ek||(Ek=document.createElementNS("http://www.w3.org/2000/svg","g")),Ek.setAttribute("transform",c),c=Ek.transform.baseVal.consolidate())?Bre((c=c.matrix).a,c.b,c.c,c.d,c.e,c.f):wB},", ",")",")");function oHe(c,l){var a,h;return function(){var d=ud(this,c),f=d.tween;if(f!==a)for(var p=0,g=(h=a=f).length;p<g;++p)if(h[p].name===l){(h=h.slice()).splice(p,1);break}d.tween=h}}function aHe(c,l,a){var h,d;if("function"!=typeof a)throw new Error;return function(){var f=ud(this,c),p=f.tween;if(p!==h){d=(h=p).slice();for(var g={name:l,value:a},m=0,v=d.length;m<v;++m)if(d[m].name===l){d[m]=g;break}m===v&&d.push(g)}f.tween=d}}function SB(c,l,a){var h=c._id;return c.each(function(){var d=ud(this,h);(d.value||(d.value={}))[l]=a.apply(this,arguments)}),function(d){return lh(d,h).value[l]}}function Hre(c,l){var a;return("number"==typeof l?mu:l instanceof ah?hw:(a=ah(l))?(l=a,hw):mB)(c,l)}function cHe(c){return function(){this.removeAttribute(c)}}function uHe(c){return function(){this.removeAttributeNS(c.space,c.local)}}function hHe(c,l,a){var h,f,d=a+"";return function(){var p=this.getAttribute(c);return p===d?null:p===h?f:f=l(h=p,a)}}function dHe(c,l,a){var h,f,d=a+"";return function(){var p=this.getAttributeNS(c.space,c.local);return p===d?null:p===h?f:f=l(h=p,a)}}function fHe(c,l,a){var h,d,f;return function(){var p,m,g=a(this);return null==g?void this.removeAttribute(c):(p=this.getAttribute(c))===(m=g+"")?null:p===h&&m===d?f:(d=m,f=l(h=p,g))}}function pHe(c,l,a){var h,d,f;return function(){var p,m,g=a(this);return null==g?void this.removeAttributeNS(c.space,c.local):(p=this.getAttributeNS(c.space,c.local))===(m=g+"")?null:p===h&&m===d?f:(d=m,f=l(h=p,g))}}function mHe(c,l){return function(a){this.setAttribute(c,l.call(this,a))}}function vHe(c,l){return function(a){this.setAttributeNS(c.space,c.local,l.call(this,a))}}function yHe(c,l){var a,h;function d(){var f=l.apply(this,arguments);return f!==h&&(a=(h=f)&&vHe(c,f)),a}return d._value=l,d}function _He(c,l){var a,h;function d(){var f=l.apply(this,arguments);return f!==h&&(a=(h=f)&&mHe(c,f)),a}return d._value=l,d}function CHe(c,l){return function(){xB(this,c).delay=+l.apply(this,arguments)}}function xHe(c,l){return l=+l,function(){xB(this,c).delay=l}}function SHe(c,l){return function(){ud(this,c).duration=+l.apply(this,arguments)}}function THe(c,l){return l=+l,function(){ud(this,c).duration=l}}function DHe(c,l){if("function"!=typeof l)throw new Error;return function(){ud(this,c).ease=l}}function RHe(c,l,a){var h,d,f=function PHe(c){return(c+"").trim().split(/^|\s+/).every(function(l){var a=l.indexOf(".");return a>=0&&(l=l.slice(0,a)),!l||"start"===l})}(l)?xB:ud;return function(){var p=f(this,c),g=p.on;g!==h&&(d=(h=g).copy()).on(l,a),p.on=d}}var zHe=p_.prototype.constructor;function $re(c){return function(){this.style.removeProperty(c)}}function jHe(c,l,a){return function(h){this.style.setProperty(c,l.call(this,h),a)}}function qHe(c,l,a){var h,d;function f(){var p=l.apply(this,arguments);return p!==d&&(h=(d=p)&&jHe(c,p,a)),h}return f._value=l,f}function JHe(c){return function(l){this.textContent=c.call(this,l)}}function e9e(c){var l,a;function h(){var d=c.apply(this,arguments);return d!==a&&(l=(a=d)&&JHe(d)),l}return h._value=c,h}var r9e=0;function hd(c,l,a,h){this._groups=c,this._parents=l,this._name=a,this._id=h}function Wre(c){return p_().transition(c)}function Gre(){return++r9e}var Lf=p_.prototype;function s9e(c){return c*c*c}function o9e(c){return--c*c*c+1}function TB(c){return((c*=2)<=1?c*c*c:(c-=2)*c*c+2)/2}hd.prototype=Wre.prototype={constructor:hd,select:function BHe(c){var l=this._name,a=this._id;"function"!=typeof c&&(c=pk(c));for(var h=this._groups,d=h.length,f=new Array(d),p=0;p<d;++p)for(var y,_,g=h[p],m=g.length,v=f[p]=new Array(m),b=0;b<m;++b)(y=g[b])&&(_=c.call(y,y.__data__,b,g))&&("__data__"in y&&(_.__data__=y.__data__),v[b]=_,Mk(v[b],l,a,b,v,lh(y,a)));return new hd(f,this._parents,l,a)},selectAll:function VHe(c){var l=this._name,a=this._id;"function"!=typeof c&&(c=nB(c));for(var h=this._groups,d=h.length,f=[],p=[],g=0;g<d;++g)for(var y,m=h[g],v=m.length,_=0;_<v;++_)if(y=m[_]){for(var C,b=c.call(y,y.__data__,_,m),x=lh(y,a),S=0,w=b.length;S<w;++S)(C=b[S])&&Mk(C,l,a,S,b,x);f.push(b),p.push(y)}return new hd(f,p,l,a)},selectChild:Lf.selectChild,selectChildren:Lf.selectChildren,filter:function AHe(c){"function"!=typeof c&&(c=iB(c));for(var l=this._groups,a=l.length,h=new Array(a),d=0;d<a;++d)for(var m,f=l[d],p=f.length,g=h[d]=[],v=0;v<p;++v)(m=f[v])&&c.call(m,m.__data__,v,f)&&g.push(m);return new hd(h,this._parents,this._name,this._id)},merge:function IHe(c){if(c._id!==this._id)throw new Error;for(var l=this._groups,a=c._groups,h=l.length,f=Math.min(h,a.length),p=new Array(h),g=0;g<f;++g)for(var b,m=l[g],v=a[g],y=m.length,_=p[g]=new Array(y),C=0;C<y;++C)(b=m[C]||v[C])&&(_[C]=b);for(;g<h;++g)p[g]=l[g];return new hd(p,this._parents,this._name,this._id)},selection:function UHe(){return new zHe(this._groups,this._parents)},transition:function n9e(){for(var c=this._name,l=this._id,a=Gre(),h=this._groups,d=h.length,f=0;f<d;++f)for(var m,p=h[f],g=p.length,v=0;v<g;++v)if(m=p[v]){var y=lh(m,l);Mk(m,c,a,v,p,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new hd(h,this._parents,c,a)},call:Lf.call,nodes:Lf.nodes,node:Lf.node,size:Lf.size,empty:Lf.empty,each:Lf.each,on:function FHe(c,l){var a=this._id;return arguments.length<2?lh(this.node(),a).on.on(c):this.each(RHe(a,c,l))},attr:function gHe(c,l){var a=aw(c),h="transform"===a?Ure:Hre;return this.attrTween(c,"function"==typeof l?(a.local?pHe:fHe)(a,h,SB(this,"attr."+c,l)):null==l?(a.local?uHe:cHe)(a):(a.local?dHe:hHe)(a,h,l))},attrTween:function bHe(c,l){var a="attr."+c;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==l)return this.tween(a,null);if("function"!=typeof l)throw new Error;var h=aw(c);return this.tween(a,(h.local?yHe:_He)(h,l))},style:function QHe(c,l,a){var h="transform"==(c+="")?zre:Hre;return null==l?this.styleTween(c,function HHe(c,l){var a,h,d;return function(){var f=n0(this,c),p=(this.style.removeProperty(c),n0(this,c));return f===p?null:f===a&&p===h?d:d=l(a=f,h=p)}}(c,h)).on("end.style."+c,$re(c)):"function"==typeof l?this.styleTween(c,function WHe(c,l,a){var h,d,f;return function(){var p=n0(this,c),g=a(this),m=g+"";return null==g&&(this.style.removeProperty(c),m=g=n0(this,c)),p===m?null:p===h&&m===d?f:(d=m,f=l(h=p,g))}}(c,h,SB(this,"style."+c,l))).each(function GHe(c,l){var a,h,d,g,f="style."+l,p="end."+f;return function(){var m=ud(this,c),v=m.on,y=null==m.value[f]?g||(g=$re(l)):void 0;(v!==a||d!==y)&&(h=(a=v).copy()).on(p,d=y),m.on=h}}(this._id,c)):this.styleTween(c,function $He(c,l,a){var h,f,d=a+"";return function(){var p=n0(this,c);return p===d?null:p===h?f:f=l(h=p,a)}}(c,h,l),a).on("end.style."+c,null)},styleTween:function ZHe(c,l,a){var h="style."+(c+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==l)return this.tween(h,null);if("function"!=typeof l)throw new Error;return this.tween(h,qHe(c,l,null==a?"":a))},text:function KHe(c){return this.tween("text","function"==typeof c?function YHe(c){return function(){var l=c(this);this.textContent=null==l?"":l}}(SB(this,"text",c)):function XHe(c){return function(){this.textContent=c}}(null==c?"":c+""))},textTween:function t9e(c){var l="text";if(arguments.length<1)return(l=this.tween(l))&&l._value;if(null==c)return this.tween(l,null);if("function"!=typeof c)throw new Error;return this.tween(l,e9e(c))},remove:function LHe(){return this.on("end.remove",function NHe(c){return function(){var l=this.parentNode;for(var a in this.__transition)if(+a!==c)return;l&&l.removeChild(this)}}(this._id))},tween:function lHe(c,l){var a=this._id;if(c+="",arguments.length<2){for(var p,h=lh(this.node(),a).tween,d=0,f=h.length;d<f;++d)if((p=h[d]).name===c)return p.value;return null}return this.each((null==l?oHe:aHe)(a,c,l))},delay:function wHe(c){var l=this._id;return arguments.length?this.each(("function"==typeof c?CHe:xHe)(l,c)):lh(this.node(),l).delay},duration:function OHe(c){var l=this._id;return arguments.length?this.each(("function"==typeof c?SHe:THe)(l,c)):lh(this.node(),l).duration},ease:function kHe(c){var l=this._id;return arguments.length?this.each(DHe(l,c)):lh(this.node(),l).ease},easeVarying:function EHe(c){if("function"!=typeof c)throw new Error;return this.each(function MHe(c,l){return function(){var a=l.apply(this,arguments);if("function"!=typeof a)throw new Error;ud(this,c).ease=a}}(this._id,c))},end:function i9e(){var c,l,a=this,h=a._id,d=a.size();return new Promise(function(f,p){var g={value:p},m={value:function(){0==--d&&f()}};a.each(function(){var v=ud(this,h),y=v.on;y!==c&&((l=(c=y).copy())._.cancel.push(g),l._.interrupt.push(g),l._.end.push(m)),v.on=l}),0===d&&f()})},[Symbol.iterator]:Lf[Symbol.iterator]};var a9e={time:null,delay:0,duration:250,ease:TB};function l9e(c,l){for(var a;!(a=c.__transition)||!(a=a[l]);)if(!(c=c.parentNode))throw new Error(`transition ${l} not found`);return a}p_.prototype.interrupt=function iHe(c){return this.each(function(){o0(this,c)})},p_.prototype.transition=function c9e(c){var l,a;c instanceof hd?(l=c._id,c=c._name):(l=Gre(),(a=a9e).time=mw(),c=null==c?null:c+"");for(var h=this._groups,d=h.length,f=0;f<d;++f)for(var m,p=h[f],g=p.length,v=0;v<g;++v)(m=p[v])&&Mk(m,c,l,v,p,a||l9e(m,l));return new hd(h,this._parents,c,l)};var u9e=[null];function h9e(c,l){var h,d,a=c.__transition;if(a)for(d in l=null==l?null:l+"",a)if((h=a[d]).state>1&&h.name===l)return new hd([[c]],u9e,l,+d);return null}const OB=c=>()=>c;function d9e(c,{sourceEvent:l,target:a,selection:h,mode:d,dispatch:f}){Object.defineProperties(this,{type:{value:c,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:h,enumerable:!0,configurable:!0},mode:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}function f9e(c){c.stopImmediatePropagation()}function DB(c){c.preventDefault(),c.stopImmediatePropagation()}var Qre={name:"drag"},kB={name:"space"},b_={name:"handle"},C_={name:"center"};const{abs:jre,max:Pa,min:Ra}=Math;function qre(c){return[+c[0],+c[1]]}function MB(c){return[qre(c[0]),qre(c[1])]}var Ak={name:"x",handles:["w","e"].map(yw),input:function(c,l){return null==c?null:[[+c[0],l[0][1]],[+c[1],l[1][1]]]},output:function(c){return c&&[c[0][0],c[1][0]]}},Ik={name:"y",handles:["n","s"].map(yw),input:function(c,l){return null==c?null:[[l[0][0],+c[0]],[l[1][0],+c[1]]]},output:function(c){return c&&[c[0][1],c[1][1]]}},p9e={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(yw),input:function(c){return null==c?null:MB(c)},output:function(c){return c}},Bf={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zre={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Xre={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},g9e={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},m9e={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function yw(c){return{type:c}}function v9e(c){return!c.ctrlKey&&!c.button}function y9e(){var c=this.ownerSVGElement||this;return c.hasAttribute("viewBox")?[[(c=c.viewBox.baseVal).x,c.y],[c.x+c.width,c.y+c.height]]:[[0,0],[c.width.baseVal.value,c.height.baseVal.value]]}function _9e(){return navigator.maxTouchPoints||"ontouchstart"in this}function EB(c){for(;!c.__brush;)if(!(c=c.parentNode))return;return c.__brush}function b9e(c){return c[0][0]===c[1][0]||c[0][1]===c[1][1]}function C9e(c){var l=c.__brush;return l?l.dim.output(l.selection):null}function x9e(){return AB(Ak)}function w9e(){return AB(Ik)}function S9e(){return AB(p9e)}function AB(c){var g,l=y9e,a=v9e,h=_9e,d=!0,f=f_("start","brush","end"),p=6;function m(w){var T=w.property("__brush",S).selectAll(".overlay").data([yw("overlay")]);T.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Bf.overlay).merge(T).each(function(){var k=EB(this).extent;po(this).attr("x",k[0][0]).attr("y",k[0][1]).attr("width",k[1][0]-k[0][0]).attr("height",k[1][1]-k[0][1])}),w.selectAll(".selection").data([yw("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Bf.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var O=w.selectAll(".handle").data(c.handles,function(k){return k.type});O.exit().remove(),O.enter().append("rect").attr("class",function(k){return"handle handle--"+k.type}).attr("cursor",function(k){return Bf[k.type]}),w.each(v).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",b).filter(h).on("touchstart.brush",b).on("touchmove.brush",C).on("touchend.brush touchcancel.brush",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(){var w=po(this),T=EB(this).selection;T?(w.selectAll(".selection").style("display",null).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1]),w.selectAll(".handle").style("display",null).attr("x",function(O){return"e"===O.type[O.type.length-1]?T[1][0]-p/2:T[0][0]-p/2}).attr("y",function(O){return"s"===O.type[0]?T[1][1]-p/2:T[0][1]-p/2}).attr("width",function(O){return"n"===O.type||"s"===O.type?T[1][0]-T[0][0]+p:p}).attr("height",function(O){return"e"===O.type||"w"===O.type?T[1][1]-T[0][1]+p:p})):w.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function y(w,T,O){var k=w.__brush.emitter;return!k||O&&k.clean?new _(w,T,O):k}function _(w,T,O){this.that=w,this.args=T,this.state=w.__brush,this.active=0,this.clean=O}function b(w){if((!g||w.touches)&&a.apply(this,arguments)){var z,U,Y,N,H,G,j,Q,ce,Se,_e,T=this,O=w.target.__data__.type,k="selection"===(d&&w.metaKey?O="overlay":O)?Qre:d&&w.altKey?C_:b_,D=c===Ik?null:g9e[O],M=c===Ak?null:m9e[O],A=EB(T),L=A.extent,E=A.selection,V=L[0][0],Z=L[0][1],$=L[1][0],W=L[1][1],J=0,te=0,ae=D&&M&&d&&w.shiftKey,Me=Array.from(w.touches||[w],Oe=>{const Ze=Oe.identifier;return(Oe=xc(Oe,T)).point0=Oe.slice(),Oe.identifier=Ze,Oe});o0(T);var Qe=y(T,arguments,!0).beforestart();if("overlay"===O){E&&(ce=!0);const Oe=[Me[0],Me[1]||Me[0]];A.selection=E=[[z=c===Ik?V:Ra(Oe[0][0],Oe[1][0]),Y=c===Ak?Z:Ra(Oe[0][1],Oe[1][1])],[H=c===Ik?$:Pa(Oe[0][0],Oe[1][0]),j=c===Ak?W:Pa(Oe[0][1],Oe[1][1])]],Me.length>1&&Le(w)}else z=E[0][0],Y=E[0][1],H=E[1][0],j=E[1][1];U=z,N=Y,G=H,Q=j;var Ie=po(T).attr("pointer-events","none"),Ve=Ie.selectAll(".overlay").attr("cursor",Bf[O]);if(w.touches)Qe.moved=pe,Qe.ended=tt;else{var Je=po(w.view).on("mousemove.brush",pe,!0).on("mouseup.brush",tt,!0);d&&Je.on("keydown.brush",st,!0).on("keyup.brush",Ye,!0),vk(w.view)}v.call(T),Qe.start(w,k.name)}function pe(Oe){for(const Ze of Oe.changedTouches||[Oe])for(const Gt of Me)Gt.identifier===Ze.identifier&&(Gt.cur=xc(Ze,T));if(ae&&!Se&&!_e&&1===Me.length){const Ze=Me[0];jre(Ze.cur[0]-Ze[0])>jre(Ze.cur[1]-Ze[1])?_e=!0:Se=!0}for(const Ze of Me)Ze.cur&&(Ze[0]=Ze.cur[0],Ze[1]=Ze.cur[1]);ce=!0,DB(Oe),Le(Oe)}function Le(Oe){const Ze=Me[0],Gt=Ze.point0;var Tn;switch(J=Ze[0]-Gt[0],te=Ze[1]-Gt[1],k){case kB:case Qre:D&&(J=Pa(V-z,Ra($-H,J)),U=z+J,G=H+J),M&&(te=Pa(Z-Y,Ra(W-j,te)),N=Y+te,Q=j+te);break;case b_:Me[1]?(D&&(U=Pa(V,Ra($,Me[0][0])),G=Pa(V,Ra($,Me[1][0])),D=1),M&&(N=Pa(Z,Ra(W,Me[0][1])),Q=Pa(Z,Ra(W,Me[1][1])),M=1)):(D<0?(J=Pa(V-z,Ra($-z,J)),U=z+J,G=H):D>0&&(J=Pa(V-H,Ra($-H,J)),U=z,G=H+J),M<0?(te=Pa(Z-Y,Ra(W-Y,te)),N=Y+te,Q=j):M>0&&(te=Pa(Z-j,Ra(W-j,te)),N=Y,Q=j+te));break;case C_:D&&(U=Pa(V,Ra($,z-J*D)),G=Pa(V,Ra($,H+J*D))),M&&(N=Pa(Z,Ra(W,Y-te*M)),Q=Pa(Z,Ra(W,j+te*M)))}G<U&&(D*=-1,Tn=z,z=H,H=Tn,Tn=U,U=G,G=Tn,O in Zre&&Ve.attr("cursor",Bf[O=Zre[O]])),Q<N&&(M*=-1,Tn=Y,Y=j,j=Tn,Tn=N,N=Q,Q=Tn,O in Xre&&Ve.attr("cursor",Bf[O=Xre[O]])),A.selection&&(E=A.selection),Se&&(U=E[0][0],G=E[1][0]),_e&&(N=E[0][1],Q=E[1][1]),(E[0][0]!==U||E[0][1]!==N||E[1][0]!==G||E[1][1]!==Q)&&(A.selection=[[U,N],[G,Q]],v.call(T),Qe.brush(Oe,k.name))}function tt(Oe){if(f9e(Oe),Oe.touches){if(Oe.touches.length)return;g&&clearTimeout(g),g=setTimeout(function(){g=null},500)}else yk(Oe.view,ce),Je.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ie.attr("pointer-events","all"),Ve.attr("cursor",Bf.overlay),A.selection&&(E=A.selection),b9e(E)&&(A.selection=null,v.call(T)),Qe.end(Oe,k.name)}function st(Oe){switch(Oe.keyCode){case 16:ae=D&&M;break;case 18:k===b_&&(D&&(H=G-J*D,z=U+J*D),M&&(j=Q-te*M,Y=N+te*M),k=C_,Le(Oe));break;case 32:(k===b_||k===C_)&&(D<0?H=G-J:D>0&&(z=U-J),M<0?j=Q-te:M>0&&(Y=N-te),k=kB,Ve.attr("cursor",Bf.selection),Le(Oe));break;default:return}DB(Oe)}function Ye(Oe){switch(Oe.keyCode){case 16:ae&&(Se=_e=ae=!1,Le(Oe));break;case 18:k===C_&&(D<0?H=G:D>0&&(z=U),M<0?j=Q:M>0&&(Y=N),k=b_,Le(Oe));break;case 32:k===kB&&(Oe.altKey?(D&&(H=G-J*D,z=U+J*D),M&&(j=Q-te*M,Y=N+te*M),k=C_):(D<0?H=G:D>0&&(z=U),M<0?j=Q:M>0&&(Y=N),k=b_),Ve.attr("cursor",Bf[O]),Le(Oe));break;default:return}DB(Oe)}}function C(w){y(this,arguments).moved(w)}function x(w){y(this,arguments).ended(w)}function S(){var w=this.__brush||{selection:null};return w.extent=MB(l.apply(this,arguments)),w.dim=c,w}return m.move=function(w,T,O){w.tween?w.on("start.brush",function(k){y(this,arguments).beforestart().start(k)}).on("interrupt.brush end.brush",function(k){y(this,arguments).end(k)}).tween("brush",function(){var k=this,D=k.__brush,M=y(k,arguments),A=D.selection,L=c.input("function"==typeof T?T.apply(this,arguments):T,D.extent),E=qp(A,L);function V(z){D.selection=1===z&&null===L?null:E(z),v.call(k),M.brush()}return null!==A&&null!==L?V:V(1)}):w.each(function(){var k=this,D=arguments,M=k.__brush,A=c.input("function"==typeof T?T.apply(k,D):T,M.extent),L=y(k,D).beforestart();o0(k),M.selection=null===A?null:A,v.call(k),L.start(O).brush(O).end(O)})},m.clear=function(w,T){m.move(w,null,T)},_.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(w,T){return this.starting?(this.starting=!1,this.emit("start",w,T)):this.emit("brush",w),this},brush:function(w,T){return this.emit("brush",w,T),this},end:function(w,T){return 0==--this.active&&(delete this.state.emitter,this.emit("end",w,T)),this},emit:function(w,T,O){var k=po(this.that).datum();f.call(w,this.that,new d9e(w,{sourceEvent:T,target:m,selection:c.output(this.state.selection),mode:O,dispatch:f}),k)}},m.extent=function(w){return arguments.length?(l="function"==typeof w?w:OB(MB(w)),m):l},m.filter=function(w){return arguments.length?(a="function"==typeof w?w:OB(!!w),m):a},m.touchable=function(w){return arguments.length?(h="function"==typeof w?w:OB(!!w),m):h},m.handleSize=function(w){return arguments.length?(p=+w,m):p},m.keyModifiers=function(w){return arguments.length?(d=!!w,m):d},m.on=function(){var w=f.on.apply(f,arguments);return w===f?m:w},m}var Yre=Math.abs,x_=Math.cos,w_=Math.sin,Kre=Math.PI,Pk=Kre/2,Jre=2*Kre,ese=Math.max,IB=1e-12;function PB(c,l){return Array.from({length:l-c},(a,h)=>c+h)}function T9e(c){return function(l,a){return c(l.source.value+l.target.value,a.source.value+a.target.value)}}function O9e(){return RB(!1,!1)}function D9e(){return RB(!1,!0)}function k9e(){return RB(!0,!1)}function RB(c,l){var a=0,h=null,d=null,f=null;function p(g){var x,m=g.length,v=new Array(m),y=PB(0,m),_=new Array(m*m),b=new Array(m),C=0;g=Float64Array.from({length:m*m},l?(S,w)=>g[w%m][w/m|0]:(S,w)=>g[w/m|0][w%m]);for(let S=0;S<m;++S){let w=0;for(let T=0;T<m;++T)w+=g[S*m+T]+c*g[T*m+S];C+=v[S]=w}x=(C=ese(0,Jre-a*m)/C)?a:Jre/m;{let S=0;h&&y.sort((w,T)=>h(v[w],v[T]));for(const w of y){const T=S;if(c){const O=PB(1+~m,m).filter(k=>k<0?g[~k*m+w]:g[w*m+k]);d&&O.sort((k,D)=>d(k<0?-g[~k*m+w]:g[w*m+k],D<0?-g[~D*m+w]:g[w*m+D]));for(const k of O)k<0?(_[~k*m+w]||(_[~k*m+w]={source:null,target:null})).target={index:w,startAngle:S,endAngle:S+=g[~k*m+w]*C,value:g[~k*m+w]}:(_[w*m+k]||(_[w*m+k]={source:null,target:null})).source={index:w,startAngle:S,endAngle:S+=g[w*m+k]*C,value:g[w*m+k]};b[w]={index:w,startAngle:T,endAngle:S,value:v[w]}}else{const O=PB(0,m).filter(k=>g[w*m+k]||g[k*m+w]);d&&O.sort((k,D)=>d(g[w*m+k],g[w*m+D]));for(const k of O){let D;if(w<k?(D=_[w*m+k]||(_[w*m+k]={source:null,target:null}),D.source={index:w,startAngle:S,endAngle:S+=g[w*m+k]*C,value:g[w*m+k]}):(D=_[k*m+w]||(_[k*m+w]={source:null,target:null}),D.target={index:w,startAngle:S,endAngle:S+=g[w*m+k]*C,value:g[w*m+k]},w===k&&(D.source=D.target)),D.source&&D.target&&D.source.value<D.target.value){const M=D.source;D.source=D.target,D.target=M}}b[w]={index:w,startAngle:T,endAngle:S,value:v[w]}}S+=x}}return(_=Object.values(_)).groups=b,f?_.sort(f):_}return p.padAngle=function(g){return arguments.length?(a=ese(0,g),p):a},p.sortGroups=function(g){return arguments.length?(h=g,p):h},p.sortSubgroups=function(g){return arguments.length?(d=g,p):d},p.sortChords=function(g){return arguments.length?(null==g?f=null:(f=T9e(g))._=g,p):f&&f._},p}const FB=Math.PI,NB=2*FB,a0=1e-6,M9e=NB-a0;function LB(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function tse(){return new LB}LB.prototype=tse.prototype={constructor:LB,moveTo:function(c,l){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,l){this._+="L"+(this._x1=+c)+","+(this._y1=+l)},quadraticCurveTo:function(c,l,a,h){this._+="Q"+ +c+","+ +l+","+(this._x1=+a)+","+(this._y1=+h)},bezierCurveTo:function(c,l,a,h,d,f){this._+="C"+ +c+","+ +l+","+ +a+","+ +h+","+(this._x1=+d)+","+(this._y1=+f)},arcTo:function(c,l,a,h,d){var f=this._x1,p=this._y1,g=(a=+a)-(c=+c),m=(h=+h)-(l=+l),v=f-c,y=p-l,_=v*v+y*y;if((d=+d)<0)throw new Error("negative radius: "+d);if(null===this._x1)this._+="M"+(this._x1=c)+","+(this._y1=l);else if(_>a0)if(Math.abs(y*g-m*v)>a0&&d){var b=a-f,C=h-p,x=g*g+m*m,S=b*b+C*C,w=Math.sqrt(x),T=Math.sqrt(_),O=d*Math.tan((FB-Math.acos((x+_-S)/(2*w*T)))/2),k=O/T,D=O/w;Math.abs(k-1)>a0&&(this._+="L"+(c+k*v)+","+(l+k*y)),this._+="A"+d+","+d+",0,0,"+ +(y*b>v*C)+","+(this._x1=c+D*g)+","+(this._y1=l+D*m)}else this._+="L"+(this._x1=c)+","+(this._y1=l)},arc:function(c,l,a,h,d,f){c=+c,l=+l,f=!!f;var p=(a=+a)*Math.cos(h),g=a*Math.sin(h),m=c+p,v=l+g,y=1^f,_=f?h-d:d-h;if(a<0)throw new Error("negative radius: "+a);null===this._x1?this._+="M"+m+","+v:(Math.abs(this._x1-m)>a0||Math.abs(this._y1-v)>a0)&&(this._+="L"+m+","+v),a&&(_<0&&(_=_%NB+NB),_>M9e?this._+="A"+a+","+a+",0,1,"+y+","+(c-p)+","+(l-g)+"A"+a+","+a+",0,1,"+y+","+(this._x1=m)+","+(this._y1=v):_>a0&&(this._+="A"+a+","+a+",0,"+ +(_>=FB)+","+y+","+(this._x1=c+a*Math.cos(d))+","+(this._y1=l+a*Math.sin(d))))},rect:function(c,l,a,h){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+l)+"h"+ +a+"v"+ +h+"h"+-a+"Z"},toString:function(){return this._}};const Vf=tse;var E9e=Array.prototype.slice;function l0(c){return function(){return c}}function A9e(c){return c.source}function I9e(c){return c.target}function nse(c){return c.radius}function P9e(c){return c.startAngle}function R9e(c){return c.endAngle}function F9e(){return 0}function N9e(){return 10}function ise(c){var l=A9e,a=I9e,h=nse,d=nse,f=P9e,p=R9e,g=F9e,m=null;function v(){var y,_=l.apply(this,arguments),b=a.apply(this,arguments),C=g.apply(this,arguments)/2,x=E9e.call(arguments),S=+h.apply(this,(x[0]=_,x)),w=f.apply(this,x)-Pk,T=p.apply(this,x)-Pk,O=+d.apply(this,(x[0]=b,x)),k=f.apply(this,x)-Pk,D=p.apply(this,x)-Pk;if(m||(m=y=Vf()),C>IB&&(Yre(T-w)>2*C+IB?T>w?(w+=C,T-=C):(w-=C,T+=C):w=T=(w+T)/2,Yre(D-k)>2*C+IB?D>k?(k+=C,D-=C):(k-=C,D+=C):k=D=(k+D)/2),m.moveTo(S*x_(w),S*w_(w)),m.arc(0,0,S,w,T),w!==k||T!==D)if(c){var M=+c.apply(this,arguments),A=O-M,L=(k+D)/2;m.quadraticCurveTo(0,0,A*x_(k),A*w_(k)),m.lineTo(O*x_(L),O*w_(L)),m.lineTo(A*x_(D),A*w_(D))}else m.quadraticCurveTo(0,0,O*x_(k),O*w_(k)),m.arc(0,0,O,k,D);if(m.quadraticCurveTo(0,0,S*x_(w),S*w_(w)),m.closePath(),y)return m=null,y+""||null}return c&&(v.headRadius=function(y){return arguments.length?(c="function"==typeof y?y:l0(+y),v):c}),v.radius=function(y){return arguments.length?(h=d="function"==typeof y?y:l0(+y),v):h},v.sourceRadius=function(y){return arguments.length?(h="function"==typeof y?y:l0(+y),v):h},v.targetRadius=function(y){return arguments.length?(d="function"==typeof y?y:l0(+y),v):d},v.startAngle=function(y){return arguments.length?(f="function"==typeof y?y:l0(+y),v):f},v.endAngle=function(y){return arguments.length?(p="function"==typeof y?y:l0(+y),v):p},v.padAngle=function(y){return arguments.length?(g="function"==typeof y?y:l0(+y),v):g},v.source=function(y){return arguments.length?(l=y,v):l},v.target=function(y){return arguments.length?(a=y,v):a},v.context=function(y){return arguments.length?(m=null==y?null:y,v):m},v}function BB(){return ise()}function L9e(){return ise(N9e)}const rse=Math.PI/180,sse=180/Math.PI,cse=4/29,S_=6/29,use=3*S_*S_;function hse(c){if(c instanceof ch)return new ch(c.l,c.a,c.b,c.opacity);if(c instanceof dd)return fse(c);c instanceof ca||(c=uB(c));var f,p,l=HB(c.r),a=HB(c.g),h=HB(c.b),d=VB((.2225045*l+.7168786*a+.0606169*h)/1);return l===a&&a===h?f=p=d:(f=VB((.4360747*l+.3850649*a+.1430804*h)/.96422),p=VB((.0139322*l+.0971045*a+.7141733*h)/.82521)),new ch(116*d-16,500*(f-d),200*(d-p),c.opacity)}function V9e(c,l){return new ch(c,0,0,null==l?1:l)}function Fk(c,l,a,h){return 1===arguments.length?hse(c):new ch(c,l,a,null==h?1:h)}function ch(c,l,a,h){this.l=+c,this.a=+l,this.b=+a,this.opacity=+h}function VB(c){return c>.008856451679035631?Math.pow(c,1/3):c/use+cse}function zB(c){return c>S_?c*c*c:use*(c-cse)}function UB(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function HB(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function dse(c){if(c instanceof dd)return new dd(c.h,c.c,c.l,c.opacity);if(c instanceof ch||(c=hse(c)),0===c.a&&0===c.b)return new dd(NaN,0<c.l&&c.l<100?0:NaN,c.l,c.opacity);var l=Math.atan2(c.b,c.a)*sse;return new dd(l<0?l+360:l,Math.sqrt(c.a*c.a+c.b*c.b),c.l,c.opacity)}function z9e(c,l,a,h){return 1===arguments.length?dse(c):new dd(a,l,c,null==h?1:h)}function Nk(c,l,a,h){return 1===arguments.length?dse(c):new dd(c,l,a,null==h?1:h)}function dd(c,l,a,h){this.h=+c,this.c=+l,this.l=+a,this.opacity=+h}function fse(c){if(isNaN(c.h))return new ch(c.l,0,0,c.opacity);var l=c.h*rse;return new ch(c.l,Math.cos(l)*c.c,Math.sin(l)*c.c,c.opacity)}m_(ch,Fk,cw(jp,{brighter:function(c){return new ch(this.l+18*(null==c?1:c),this.a,this.b,this.opacity)},darker:function(c){return new ch(this.l-18*(null==c?1:c),this.a,this.b,this.opacity)},rgb:function(){var c=(this.l+16)/116,l=isNaN(this.a)?c:c+this.a/500,a=isNaN(this.b)?c:c-this.b/200;return new ca(UB(3.1338561*(l=.96422*zB(l))-1.6168667*(c=1*zB(c))-.4906146*(a=.82521*zB(a))),UB(-.9787684*l+1.9161415*c+.033454*a),UB(.0719453*l-.2289914*c+1.4052427*a),this.opacity)}})),m_(dd,Nk,cw(jp,{brighter:function(c){return new dd(this.h,this.c,this.l+18*(null==c?1:c),this.opacity)},darker:function(c){return new dd(this.h,this.c,this.l-18*(null==c?1:c),this.opacity)},rgb:function(){return fse(this).rgb()}}));var $B=1.78277,WB=-.29227,Lk=-.90649,_w=1.97294,gse=_w*Lk,mse=_w*$B,vse=$B*WB- -.14861*Lk;function U9e(c){if(c instanceof c0)return new c0(c.h,c.s,c.l,c.opacity);c instanceof ca||(c=uB(c));var a=c.g/255,h=c.b/255,d=(vse*h+gse*(c.r/255)-mse*a)/(vse+gse-mse),f=h-d,p=(_w*(a-d)-WB*f)/Lk,g=Math.sqrt(p*p+f*f)/(_w*d*(1-d)),m=g?Math.atan2(p,f)*sse-120:NaN;return new c0(m<0?m+360:m,g,d,c.opacity)}function uh(c,l,a,h){return 1===arguments.length?U9e(c):new c0(c,l,a,null==h?1:h)}function c0(c,l,a,h){this.h=+c,this.s=+l,this.l=+a,this.opacity=+h}m_(c0,uh,cw(jp,{brighter:function(c){return c=null==c?v_:Math.pow(v_,c),new c0(this.h,this.s,this.l*c,this.opacity)},darker:function(c){return c=null==c?.7:Math.pow(.7,c),new c0(this.h,this.s,this.l*c,this.opacity)},rgb:function(){var c=isNaN(this.h)?0:(this.h+120)*rse,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),h=Math.cos(c),d=Math.sin(c);return new ca(255*(l+a*(-.14861*h+$B*d)),255*(l+a*(WB*h+Lk*d)),255*(l+a*(_w*h)),this.opacity)}}));var yse=Array.prototype.slice;function $9e(c,l){return c-l}const Zp=c=>()=>c;function G9e(c,l){for(var d,a=-1,h=l.length;++a<h;)if(d=Q9e(c,l[a]))return d;return 0}function Q9e(c,l){for(var a=l[0],h=l[1],d=-1,f=0,p=c.length,g=p-1;f<p;g=f++){var m=c[f],v=m[0],y=m[1],_=c[g],b=_[0],C=_[1];if(j9e(m,_,l))return 0;y>h!=C>h&&a<(b-v)*(h-y)/(C-y)+v&&(d=-d)}return d}function j9e(c,l,a){var h;return function q9e(c,l,a){return(l[0]-c[0])*(a[1]-c[1])==(a[0]-c[0])*(l[1]-c[1])}(c,l,a)&&function Z9e(c,l,a){return c<=l&&l<=a||a<=l&&l<=c}(c[h=+(c[0]===l[0])],a[h],l[h])}function X9e(){}var zf=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function _se(){var c=1,l=1,a=K5,h=m;function d(v){var y=a(v);if(Array.isArray(y))y=y.slice().sort($9e);else{const _=e0(v),b=d_(_[0],_[1],y);y=h_(Math.floor(_[0]/b)*b,Math.floor(_[1]/b-1)*b,y)}return y.map(_=>f(v,_))}function f(v,y){var _=[],b=[];return function p(v,y,_){var x,S,T,O,k,b=new Array,C=new Array;for(x=S=-1,zf[(T=v[0]>=y)<<1].forEach(D);++x<c-1;)zf[T|(T=v[x+1]>=y)<<1].forEach(D);for(zf[T<<0].forEach(D);++S<l-1;){for(x=-1,zf[(T=v[S*c+c]>=y)<<1|(O=v[S*c]>=y)<<2].forEach(D);++x<c-1;)k=O,zf[T|(T=v[S*c+c+x+1]>=y)<<1|(O=v[S*c+x+1]>=y)<<2|k<<3].forEach(D);zf[T|O<<3].forEach(D)}for(x=-1,zf[(O=v[S*c]>=y)<<2].forEach(D);++x<c-1;)k=O,zf[(O=v[S*c+x+1]>=y)<<2|k<<3].forEach(D);function D(M){var z,U,A=[M[0][0]+x,M[0][1]+S],L=[M[1][0]+x,M[1][1]+S],E=g(A),V=g(L);(z=C[E])?(U=b[V])?(delete C[z.end],delete b[U.start],z===U?(z.ring.push(L),_(z.ring)):b[z.start]=C[U.end]={start:z.start,end:U.end,ring:z.ring.concat(U.ring)}):(delete C[z.end],z.ring.push(L),C[z.end=V]=z):(z=b[V])?(U=C[E])?(delete b[z.start],delete C[U.end],z===U?(z.ring.push(L),_(z.ring)):b[U.start]=C[z.end]={start:U.start,end:z.end,ring:U.ring.concat(z.ring)}):(delete b[z.start],z.ring.unshift(A),b[z.start=E]=z):b[E]=C[V]={start:E,end:V,ring:[A,L]}}zf[O<<3].forEach(D)}(v,y,function(C){h(C,v,y),function W9e(c){for(var l=0,a=c.length,h=c[a-1][1]*c[0][0]-c[a-1][0]*c[0][1];++l<a;)h+=c[l-1][1]*c[l][0]-c[l-1][0]*c[l][1];return h}(C)>0?_.push([C]):b.push(C)}),b.forEach(function(C){for(var w,x=0,S=_.length;x<S;++x)if(-1!==G9e((w=_[x])[0],C))return void w.push(C)}),{type:"MultiPolygon",value:y,coordinates:_}}function g(v){return 2*v[0]+v[1]*(c+1)*4}function m(v,y,_){v.forEach(function(b){var T,C=b[0],x=b[1],S=0|C,w=0|x,O=y[w*c+S];C>0&&C<c&&S===C&&(b[0]=C+(_-(T=y[w*c+S-1]))/(O-T)-.5),x>0&&x<l&&w===x&&(b[1]=x+(_-(T=y[(w-1)*c+S]))/(O-T)-.5)})}return d.contour=f,d.size=function(v){if(!arguments.length)return[c,l];var y=Math.floor(v[0]),_=Math.floor(v[1]);if(!(y>=0&&_>=0))throw new Error("invalid size");return c=y,l=_,d},d.thresholds=function(v){return arguments.length?(a="function"==typeof v?v:Array.isArray(v)?Zp(yse.call(v)):Zp(v),d):a},d.smooth=function(v){return arguments.length?(h=v?m:X9e,d):h===m},d}function GB(c,l,a){for(var h=c.width,d=c.height,f=1+(a<<1),p=0;p<d;++p)for(var g=0,m=0;g<h+a;++g)g<h&&(m+=c.data[g+p*h]),g>=a&&(g>=f&&(m-=c.data[g-f+p*h]),l.data[g-a+p*h]=m/Math.min(g+1,h-1+f-g,f))}function QB(c,l,a){for(var h=c.width,d=c.height,f=1+(a<<1),p=0;p<h;++p)for(var g=0,m=0;g<d+a;++g)g<d&&(m+=c.data[p+g*h]),g>=a&&(g>=f&&(m-=c.data[p+(g-f)*h]),l.data[p+(g-a)*h]=m/Math.min(g+1,d-1+f-g,f))}function Y9e(c){return c[0]}function K9e(c){return c[1]}function J9e(){return 1}function e$e(){var c=Y9e,l=K9e,a=J9e,h=960,d=500,f=20,p=2,g=3*f,m=h+2*g>>p,v=d+2*g>>p,y=Zp(20);function _(T){var O=new Float32Array(m*v),k=new Float32Array(m*v),D=Math.pow(2,-p);T.forEach(function(L,E,V){var z=(c(L,E,V)+g)*D,U=(l(L,E,V)+g)*D,Z=+a(L,E,V);if(z>=0&&z<m&&U>=0&&U<v){var Y=Math.floor(z),N=Math.floor(U),$=z-Y-.5,H=U-N-.5;O[Y+N*m]+=(1-$)*(1-H)*Z,O[Y+1+N*m]+=$*(1-H)*Z,O[Y+1+(N+1)*m]+=$*H*Z,O[Y+(N+1)*m]+=(1-$)*H*Z}}),GB({width:m,height:v,data:O},{width:m,height:v,data:k},f>>p),QB({width:m,height:v,data:k},{width:m,height:v,data:O},f>>p),GB({width:m,height:v,data:O},{width:m,height:v,data:k},f>>p),QB({width:m,height:v,data:k},{width:m,height:v,data:O},f>>p),GB({width:m,height:v,data:O},{width:m,height:v,data:k},f>>p),QB({width:m,height:v,data:k},{width:m,height:v,data:O},f>>p);var M=y(O);if(!Array.isArray(M)){var A=lk(O);M=d_(0,A,M),(M=Cc(0,Math.floor(A/M)*M,M)).shift()}return _se().thresholds(M).size([m,v])(O).map(b)}function b(T){return T.value*=Math.pow(2,-2*p),T.coordinates.forEach(C),T}function C(T){T.forEach(x)}function x(T){T.forEach(S)}function S(T){T[0]=T[0]*Math.pow(2,p)-g,T[1]=T[1]*Math.pow(2,p)-g}function w(){return m=h+2*(g=3*f)>>p,v=d+2*g>>p,_}return _.x=function(T){return arguments.length?(c="function"==typeof T?T:Zp(+T),_):c},_.y=function(T){return arguments.length?(l="function"==typeof T?T:Zp(+T),_):l},_.weight=function(T){return arguments.length?(a="function"==typeof T?T:Zp(+T),_):a},_.size=function(T){if(!arguments.length)return[h,d];var O=+T[0],k=+T[1];if(!(O>=0&&k>=0))throw new Error("invalid size");return h=O,d=k,w()},_.cellSize=function(T){if(!arguments.length)return 1<<p;if(!((T=+T)>=1))throw new Error("invalid cell size");return p=Math.floor(Math.log(T)/Math.LN2),w()},_.thresholds=function(T){return arguments.length?(y="function"==typeof T?T:Array.isArray(T)?Zp(yse.call(T)):Zp(T),_):y},_.bandwidth=function(T){if(!arguments.length)return Math.sqrt(f*(f+1));if(!((T=+T)>=0))throw new Error("invalid bandwidth");return f=Math.round((Math.sqrt(4*T*T+1)-1)/2),w()},_}const Ro=134217729;function bw(c,l,a,h,d){let f,p,g,m,v=l[0],y=h[0],_=0,b=0;y>v==y>-v?(f=v,v=l[++_]):(f=y,y=h[++b]);let C=0;if(_<c&&b<a)for(y>v==y>-v?(p=v+f,g=f-(p-v),v=l[++_]):(p=y+f,g=f-(p-y),y=h[++b]),f=p,0!==g&&(d[C++]=g);_<c&&b<a;)y>v==y>-v?(p=f+v,m=p-f,g=f-(p-m)+(v-m),v=l[++_]):(p=f+y,m=p-f,g=f-(p-m)+(y-m),y=h[++b]),f=p,0!==g&&(d[C++]=g);for(;_<c;)p=f+v,m=p-f,g=f-(p-m)+(v-m),v=l[++_],f=p,0!==g&&(d[C++]=g);for(;b<a;)p=f+y,m=p-f,g=f-(p-m)+(y-m),y=h[++b],f=p,0!==g&&(d[C++]=g);return(0!==f||0===C)&&(d[C++]=f),C}function zt(c){return new Float64Array(c)}const T_=zt(4),bse=zt(8),Cse=zt(12),xse=zt(16),ol=zt(4);function Bk(c,l,a,h,d,f){const p=(l-f)*(a-d),g=(c-d)*(h-f),m=p-g;if(0===p||0===g||p>0!=g>0)return m;const v=Math.abs(p+g);return Math.abs(m)>=33306690738754716e-32*v?m:-function o$e(c,l,a,h,d,f,p){let g,m,v,y,_,b,C,x,S,w,T,O,k,D,M,A,L,E;const V=c-d,z=a-d,U=l-f,Z=h-f;D=V*Z,b=Ro*V,C=b-(b-V),x=V-C,b=Ro*Z,S=b-(b-Z),w=Z-S,M=x*w-(D-C*S-x*S-C*w),A=U*z,b=Ro*U,C=b-(b-U),x=U-C,b=Ro*z,S=b-(b-z),w=z-S,L=x*w-(A-C*S-x*S-C*w),T=M-L,_=M-T,T_[0]=M-(T+_)+(_-L),O=D+T,_=O-D,k=D-(O-_)+(T-_),T=k-A,_=k-T,T_[1]=k-(T+_)+(_-A),E=O+T,_=E-O,T_[2]=O-(E-_)+(T-_),T_[3]=E;let Y=function n$e(c,l){let a=l[0];for(let h=1;h<c;h++)a+=l[h];return a}(4,T_),N=22204460492503146e-32*p;if(Y>=N||-Y>=N||(_=c-V,g=c-(V+_)+(_-d),_=a-z,v=a-(z+_)+(_-d),_=l-U,m=l-(U+_)+(_-f),_=h-Z,y=h-(Z+_)+(_-f),0===g&&0===m&&0===v&&0===y)||(N=11093356479670487e-47*p+33306690738754706e-32*Math.abs(Y),Y+=V*y+Z*g-(U*v+z*m),Y>=N||-Y>=N))return Y;D=g*Z,b=Ro*g,C=b-(b-g),x=g-C,b=Ro*Z,S=b-(b-Z),w=Z-S,M=x*w-(D-C*S-x*S-C*w),A=m*z,b=Ro*m,C=b-(b-m),x=m-C,b=Ro*z,S=b-(b-z),w=z-S,L=x*w-(A-C*S-x*S-C*w),T=M-L,_=M-T,ol[0]=M-(T+_)+(_-L),O=D+T,_=O-D,k=D-(O-_)+(T-_),T=k-A,_=k-T,ol[1]=k-(T+_)+(_-A),E=O+T,_=E-O,ol[2]=O-(E-_)+(T-_),ol[3]=E;const $=bw(4,T_,4,ol,bse);D=V*y,b=Ro*V,C=b-(b-V),x=V-C,b=Ro*y,S=b-(b-y),w=y-S,M=x*w-(D-C*S-x*S-C*w),A=U*v,b=Ro*U,C=b-(b-U),x=U-C,b=Ro*v,S=b-(b-v),w=v-S,L=x*w-(A-C*S-x*S-C*w),T=M-L,_=M-T,ol[0]=M-(T+_)+(_-L),O=D+T,_=O-D,k=D-(O-_)+(T-_),T=k-A,_=k-T,ol[1]=k-(T+_)+(_-A),E=O+T,_=E-O,ol[2]=O-(E-_)+(T-_),ol[3]=E;const H=bw($,bse,4,ol,Cse);D=g*y,b=Ro*g,C=b-(b-g),x=g-C,b=Ro*y,S=b-(b-y),w=y-S,M=x*w-(D-C*S-x*S-C*w),A=m*v,b=Ro*m,C=b-(b-m),x=m-C,b=Ro*v,S=b-(b-v),w=v-S,L=x*w-(A-C*S-x*S-C*w),T=M-L,_=M-T,ol[0]=M-(T+_)+(_-L),O=D+T,_=O-D,k=D-(O-_)+(T-_),T=k-A,_=k-T,ol[1]=k-(T+_)+(_-A),E=O+T,_=E-O,ol[2]=O-(E-_)+(T-_),ol[3]=E;const G=bw(H,Cse,4,ol,xse);return xse[G-1]}(c,l,a,h,d,f,v)}zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(8),zt(8),zt(8),zt(4),zt(8),zt(8),zt(8),zt(12),zt(192),zt(192),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(8),zt(8),zt(8),zt(8),zt(8),zt(8),zt(8),zt(8),zt(8),zt(4),zt(4),zt(4),zt(8),zt(16),zt(16),zt(16),zt(32),zt(32),zt(48),zt(64),zt(1152),zt(1152),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(4),zt(24),zt(24),zt(24),zt(24),zt(24),zt(24),zt(24),zt(24),zt(24),zt(24),zt(1152),zt(1152),zt(1152),zt(1152),zt(1152),zt(2304),zt(2304),zt(3456),zt(5760),zt(8),zt(8),zt(8),zt(16),zt(24),zt(48),zt(48),zt(96),zt(192),zt(384),zt(384),zt(384),zt(768),zt(96),zt(96),zt(96),zt(1152);const $se=Math.pow(2,-52),qk=new Uint32Array(512);class Zk{static from(l,a=O$e,h=D$e){const d=l.length,f=new Float64Array(2*d);for(let p=0;p<d;p++){const g=l[p];f[2*p]=a(g),f[2*p+1]=h(g)}return new Zk(f)}constructor(l){const a=l.length>>1;if(a>0&&"number"!=typeof l[0])throw new Error("Expected coords to contain numbers.");this.coords=l;const h=Math.max(2*a-5,0);this._triangles=new Uint32Array(3*h),this._halfedges=new Int32Array(3*h),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){const{coords:l,_hullPrev:a,_hullNext:h,_hullTri:d,_hullHash:f}=this,p=l.length>>1;let g=1/0,m=1/0,v=-1/0,y=-1/0;for(let z=0;z<p;z++){const U=l[2*z],Z=l[2*z+1];U<g&&(g=U),Z<m&&(m=Z),U>v&&(v=U),Z>y&&(y=Z),this._ids[z]=z}const _=(g+v)/2,b=(m+y)/2;let x,S,w,C=1/0;for(let z=0;z<p;z++){const U=y8(_,b,l[2*z],l[2*z+1]);U<C&&(x=z,C=U)}const T=l[2*x],O=l[2*x+1];C=1/0;for(let z=0;z<p;z++){if(z===x)continue;const U=y8(T,O,l[2*z],l[2*z+1]);U<C&&U>0&&(S=z,C=U)}let k=l[2*S],D=l[2*S+1],M=1/0;for(let z=0;z<p;z++){if(z===x||z===S)continue;const U=S$e(T,O,k,D,l[2*z],l[2*z+1]);U<M&&(w=z,M=U)}let A=l[2*w],L=l[2*w+1];if(M===1/0){for(let Z=0;Z<p;Z++)this._dists[Z]=l[2*Z]-l[0]||l[2*Z+1]-l[1];P_(this._ids,this._dists,0,p-1);const z=new Uint32Array(p);let U=0;for(let Z=0,Y=-1/0;Z<p;Z++){const N=this._ids[Z];this._dists[N]>Y&&(z[U++]=N,Y=this._dists[N])}return this.hull=z.subarray(0,U),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Bk(T,O,k,D,A,L)<0){const z=S,U=k,Z=D;S=w,k=A,D=L,w=z,A=U,L=Z}const E=function T$e(c,l,a,h,d,f){const p=a-c,g=h-l,m=d-c,v=f-l,y=p*p+g*g,_=m*m+v*v,b=.5/(p*v-g*m);return{x:c+(v*y-g*_)*b,y:l+(p*_-m*y)*b}}(T,O,k,D,A,L);this._cx=E.x,this._cy=E.y;for(let z=0;z<p;z++)this._dists[z]=y8(l[2*z],l[2*z+1],E.x,E.y);P_(this._ids,this._dists,0,p-1),this._hullStart=x;let V=3;h[x]=a[w]=S,h[S]=a[x]=w,h[w]=a[S]=x,d[x]=0,d[S]=1,d[w]=2,f.fill(-1),f[this._hashKey(T,O)]=x,f[this._hashKey(k,D)]=S,f[this._hashKey(A,L)]=w,this.trianglesLen=0,this._addTriangle(x,S,w,-1,-1,-1);for(let U,Z,z=0;z<this._ids.length;z++){const Y=this._ids[z],N=l[2*Y],$=l[2*Y+1];if(z>0&&Math.abs(N-U)<=$se&&Math.abs($-Z)<=$se||(U=N,Z=$,Y===x||Y===S||Y===w))continue;let H=0;for(let J=0,te=this._hashKey(N,$);J<this._hashSize&&(H=f[(te+J)%this._hashSize],-1===H||H===h[H]);J++);H=a[H];let W,G=H;for(;W=h[G],Bk(N,$,l[2*G],l[2*G+1],l[2*W],l[2*W+1])>=0;)if(G=W,G===H){G=-1;break}if(-1===G)continue;let j=this._addTriangle(G,Y,h[G],-1,-1,d[G]);d[Y]=this._legalize(j+2),d[G]=j,V++;let Q=h[G];for(;W=h[Q],Bk(N,$,l[2*Q],l[2*Q+1],l[2*W],l[2*W+1])<0;)j=this._addTriangle(Q,Y,W,d[Y],-1,d[Q]),d[Y]=this._legalize(j+2),h[Q]=Q,V--,Q=W;if(G===H)for(;W=a[G],Bk(N,$,l[2*W],l[2*W+1],l[2*G],l[2*G+1])<0;)j=this._addTriangle(W,Y,G,-1,d[G],d[W]),this._legalize(j+2),d[W]=j,h[G]=G,V--,G=W;this._hullStart=a[Y]=G,h[G]=a[Q]=Y,h[Y]=Q,f[this._hashKey(N,$)]=Y,f[this._hashKey(l[2*G],l[2*G+1])]=G}this.hull=new Uint32Array(V);for(let z=0,U=this._hullStart;z<V;z++)this.hull[z]=U,U=h[U];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(l,a){return Math.floor(function x$e(c,l){const a=c/(Math.abs(c)+Math.abs(l));return(l>0?3-a:1+a)/4}(l-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(l){const{_triangles:a,_halfedges:h,coords:d}=this;let f=0,p=0;for(;;){const g=h[l],m=l-l%3;if(p=m+(l+2)%3,-1===g){if(0===f)break;l=qk[--f];continue}const v=g-g%3,_=v+(g+2)%3,b=a[p],C=a[l],x=a[m+(l+1)%3],S=a[_];if(w$e(d[2*b],d[2*b+1],d[2*C],d[2*C+1],d[2*x],d[2*x+1],d[2*S],d[2*S+1])){a[l]=S,a[g]=b;const T=h[_];if(-1===T){let k=this._hullStart;do{if(this._hullTri[k]===_){this._hullTri[k]=l;break}k=this._hullPrev[k]}while(k!==this._hullStart)}this._link(l,T),this._link(g,h[p]),this._link(p,_);const O=v+(g+1)%3;f<qk.length&&(qk[f++]=O)}else{if(0===f)break;l=qk[--f]}}return p}_link(l,a){this._halfedges[l]=a,-1!==a&&(this._halfedges[a]=l)}_addTriangle(l,a,h,d,f,p){const g=this.trianglesLen;return this._triangles[g]=l,this._triangles[g+1]=a,this._triangles[g+2]=h,this._link(g,d),this._link(g+1,f),this._link(g+2,p),this.trianglesLen+=3,g}}function y8(c,l,a,h){const d=c-a,f=l-h;return d*d+f*f}function w$e(c,l,a,h,d,f,p,g){const m=c-p,v=l-g,y=a-p,_=h-g,b=d-p,C=f-g,S=y*y+_*_,w=b*b+C*C;return m*(_*w-S*C)-v*(y*w-S*b)+(m*m+v*v)*(y*C-_*b)<0}function S$e(c,l,a,h,d,f){const p=a-c,g=h-l,m=d-c,v=f-l,y=p*p+g*g,_=m*m+v*v,b=.5/(p*v-g*m),C=(v*y-g*_)*b,x=(p*_-m*y)*b;return C*C+x*x}function P_(c,l,a,h){if(h-a<=20)for(let d=a+1;d<=h;d++){const f=c[d],p=l[f];let g=d-1;for(;g>=a&&l[c[g]]>p;)c[g+1]=c[g--];c[g+1]=f}else{let f=a+1,p=h;Sw(c,a+h>>1,f),l[c[a]]>l[c[h]]&&Sw(c,a,h),l[c[f]]>l[c[h]]&&Sw(c,f,h),l[c[a]]>l[c[f]]&&Sw(c,a,f);const g=c[f],m=l[g];for(;;){do{f++}while(l[c[f]]<m);do{p--}while(l[c[p]]>m);if(p<f)break;Sw(c,f,p)}c[a+1]=c[p],c[p]=g,h-f+1>=p-a?(P_(c,l,f,h),P_(c,l,a,p-1)):(P_(c,l,a,p-1),P_(c,l,f,h))}}function Sw(c,l,a){const h=c[l];c[l]=c[a],c[a]=h}function O$e(c){return c[0]}function D$e(c){return c[1]}class y0{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(l,a){this._+=`M${this._x0=this._x1=+l},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(l,a){this._+=`L${this._x1=+l},${this._y1=+a}`}arc(l,a,h){const d=(l=+l)+(h=+h),f=a=+a;if(h<0)throw new Error("negative radius");null===this._x1?this._+=`M${d},${f}`:(Math.abs(this._x1-d)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+d+","+f),h&&(this._+=`A${h},${h},0,1,1,${l-h},${a}A${h},${h},0,1,1,${this._x1=d},${this._y1=f}`)}rect(l,a,h,d){this._+=`M${this._x0=this._x1=+l},${this._y0=this._y1=+a}h${+h}v${+d}h${-h}Z`}value(){return this._||null}}class _8{constructor(){this._=[]}moveTo(l,a){this._.push([l,a])}closePath(){this._.push(this._[0].slice())}lineTo(l,a){this._.push([l,a])}value(){return this._.length?this._:null}}class Gse{constructor(l,[a,h,d,f]=[0,0,960,500]){if(!((d=+d)>=(a=+a)&&(f=+f)>=(h=+h)))throw new Error("invalid bounds");this.delaunay=l,this._circumcenters=new Float64Array(2*l.points.length),this.vectors=new Float64Array(2*l.points.length),this.xmax=d,this.xmin=a,this.ymax=f,this.ymin=h,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:l,hull:a,triangles:h},vectors:d}=this,f=this.circumcenters=this._circumcenters.subarray(0,h.length/3*2);for(let w,T,C=0,x=0,S=h.length;C<S;C+=3,x+=2){const O=2*h[C],k=2*h[C+1],D=2*h[C+2],M=l[O],A=l[O+1],V=l[D],z=l[D+1],U=l[k]-M,Z=l[k+1]-A,Y=V-M,N=z-A,$=2*(U*N-Z*Y);if(Math.abs($)<1e-9){let H=1e9;const G=2*h[0];H*=Math.sign((l[G]-M)*N-(l[G+1]-A)*Y),w=(M+V)/2-H*N,T=(A+z)/2+H*Y}else{const H=1/$,G=U*U+Z*Z,W=Y*Y+N*N;w=M+(N*G-Z*W)*H,T=A+(U*W-Y*G)*H}f[x]=w,f[x+1]=T}let g,v,_,p=a[a.length-1],m=4*p,y=l[2*p],b=l[2*p+1];d.fill(0);for(let C=0;C<a.length;++C)p=a[C],g=m,v=y,_=b,m=4*p,y=l[2*p],b=l[2*p+1],d[g+2]=d[m]=_-b,d[g+3]=d[m+1]=y-v}render(l){const a=null==l?l=new y0:void 0,{delaunay:{halfedges:h,inedges:d,hull:f},circumcenters:p,vectors:g}=this;if(f.length<=1)return null;for(let y=0,_=h.length;y<_;++y){const b=h[y];if(b<y)continue;const C=2*Math.floor(y/3),x=2*Math.floor(b/3);this._renderSegment(p[C],p[C+1],p[x],p[x+1],l)}let m,v=f[f.length-1];for(let y=0;y<f.length;++y){m=v,v=f[y];const _=2*Math.floor(d[v]/3),b=p[_],C=p[_+1],x=4*m,S=this._project(b,C,g[x+2],g[x+3]);S&&this._renderSegment(b,C,S[0],S[1],l)}return a&&a.value()}renderBounds(l){const a=null==l?l=new y0:void 0;return l.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(l,a){const h=null==a?a=new y0:void 0,d=this._clip(l);if(null===d||!d.length)return;a.moveTo(d[0],d[1]);let f=d.length;for(;d[0]===d[f-2]&&d[1]===d[f-1]&&f>1;)f-=2;for(let p=2;p<f;p+=2)(d[p]!==d[p-2]||d[p+1]!==d[p-1])&&a.lineTo(d[p],d[p+1]);return a.closePath(),h&&h.value()}*cellPolygons(){const{delaunay:{points:l}}=this;for(let a=0,h=l.length/2;a<h;++a){const d=this.cellPolygon(a);d&&(d.index=a,yield d)}}cellPolygon(l){const a=new _8;return this.renderCell(l,a),a.value()}_renderSegment(l,a,h,d,f){let p;const g=this._regioncode(l,a),m=this._regioncode(h,d);0===g&&0===m?(f.moveTo(l,a),f.lineTo(h,d)):(p=this._clipSegment(l,a,h,d,g,m))&&(f.moveTo(p[0],p[1]),f.lineTo(p[2],p[3]))}contains(l,a,h){return(a=+a)==a&&(h=+h)==h&&this.delaunay._step(l,a,h)===l}*neighbors(l){const a=this._clip(l);if(a)for(const h of this.delaunay.neighbors(l)){const d=this._clip(h);if(d)e:for(let f=0,p=a.length;f<p;f+=2)for(let g=0,m=d.length;g<m;g+=2)if(a[f]==d[g]&&a[f+1]==d[g+1]&&a[(f+2)%p]==d[(g+m-2)%m]&&a[(f+3)%p]==d[(g+m-1)%m]){yield h;break e}}}_cell(l){const{circumcenters:a,delaunay:{inedges:h,halfedges:d,triangles:f}}=this,p=h[l];if(-1===p)return null;const g=[];let m=p;do{const v=Math.floor(m/3);if(g.push(a[2*v],a[2*v+1]),m=m%3==2?m-2:m+1,f[m]!==l)break;m=d[m]}while(m!==p&&-1!==m);return g}_clip(l){if(0===l&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const a=this._cell(l);if(null===a)return null;const{vectors:h}=this,d=4*l;return h[d]||h[d+1]?this._clipInfinite(l,a,h[d],h[d+1],h[d+2],h[d+3]):this._clipFinite(l,a)}_clipFinite(l,a){const h=a.length;let f,p,v,_,d=null,g=a[h-2],m=a[h-1],y=this._regioncode(g,m),b=0;for(let C=0;C<h;C+=2)if(f=g,p=m,g=a[C],m=a[C+1],v=y,y=this._regioncode(g,m),0===v&&0===y)_=b,b=0,d?d.push(g,m):d=[g,m];else{let x,S,w,T,O;if(0===v){if(null===(x=this._clipSegment(f,p,g,m,v,y)))continue;[S,w,T,O]=x}else{if(null===(x=this._clipSegment(g,m,f,p,y,v)))continue;[T,O,S,w]=x,_=b,b=this._edgecode(S,w),_&&b&&this._edge(l,_,b,d,d.length),d?d.push(S,w):d=[S,w]}_=b,b=this._edgecode(T,O),_&&b&&this._edge(l,_,b,d,d.length),d?d.push(T,O):d=[T,O]}if(d)_=b,b=this._edgecode(d[0],d[1]),_&&b&&this._edge(l,_,b,d,d.length);else if(this.contains(l,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return d}_clipSegment(l,a,h,d,f,p){for(;;){if(0===f&&0===p)return[l,a,h,d];if(f&p)return null;let g,m,v=f||p;8&v?(g=l+(h-l)*(this.ymax-a)/(d-a),m=this.ymax):4&v?(g=l+(h-l)*(this.ymin-a)/(d-a),m=this.ymin):2&v?(m=a+(d-a)*(this.xmax-l)/(h-l),g=this.xmax):(m=a+(d-a)*(this.xmin-l)/(h-l),g=this.xmin),f?f=this._regioncode(l=g,a=m):p=this._regioncode(h=g,d=m)}}_clipInfinite(l,a,h,d,f,p){let m,g=Array.from(a);if((m=this._project(g[0],g[1],h,d))&&g.unshift(m[0],m[1]),(m=this._project(g[g.length-2],g[g.length-1],f,p))&&g.push(m[0],m[1]),g=this._clipFinite(l,g))for(let _,v=0,y=g.length,b=this._edgecode(g[y-2],g[y-1]);v<y;v+=2)_=b,b=this._edgecode(g[v],g[v+1]),_&&b&&(v=this._edge(l,_,b,g,v),y=g.length);else this.contains(l,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(g=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return g}_edge(l,a,h,d,f){for(;a!==h;){let p,g;switch(a){case 5:a=4;continue;case 4:a=6,p=this.xmax,g=this.ymin;break;case 6:a=2;continue;case 2:a=10,p=this.xmax,g=this.ymax;break;case 10:a=8;continue;case 8:a=9,p=this.xmin,g=this.ymax;break;case 9:a=1;continue;case 1:a=5,p=this.xmin,g=this.ymin}(d[f]!==p||d[f+1]!==g)&&this.contains(l,p,g)&&(d.splice(f,0,p,g),f+=2)}if(d.length>4)for(let p=0;p<d.length;p+=2){const g=(p+2)%d.length,m=(p+4)%d.length;(d[p]===d[g]&&d[g]===d[m]||d[p+1]===d[g+1]&&d[g+1]===d[m+1])&&(d.splice(g,2),p-=2)}return f}_project(l,a,h,d){let p,g,m,f=1/0;if(d<0){if(a<=this.ymin)return null;(p=(this.ymin-a)/d)<f&&(m=this.ymin,g=l+(f=p)*h)}else if(d>0){if(a>=this.ymax)return null;(p=(this.ymax-a)/d)<f&&(m=this.ymax,g=l+(f=p)*h)}if(h>0){if(l>=this.xmax)return null;(p=(this.xmax-l)/h)<f&&(g=this.xmax,m=a+(f=p)*d)}else if(h<0){if(l<=this.xmin)return null;(p=(this.xmin-l)/h)<f&&(g=this.xmin,m=a+(f=p)*d)}return[g,m]}_edgecode(l,a){return(l===this.xmin?1:l===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(l,a){return(l<this.xmin?1:l>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}}const k$e=2*Math.PI,R_=Math.pow;function M$e(c){return c[0]}function E$e(c){return c[1]}function I$e(c,l,a){return[c+Math.sin(c+l)*a,l+Math.cos(c-l)*a]}class b8{static from(l,a=M$e,h=E$e,d){return new b8("length"in l?function P$e(c,l,a,h){const d=c.length,f=new Float64Array(2*d);for(let p=0;p<d;++p){const g=c[p];f[2*p]=l.call(h,g,p,c),f[2*p+1]=a.call(h,g,p,c)}return f}(l,a,h,d):Float64Array.from(function*R$e(c,l,a,h){let d=0;for(const f of c)yield l.call(h,f,d,c),yield a.call(h,f,d,c),++d}(l,a,h,d)))}constructor(l){this._delaunator=new Zk(l),this.inedges=new Int32Array(l.length/2),this._hullIndex=new Int32Array(l.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const l=this._delaunator,a=this.points;if(l.hull&&l.hull.length>2&&function A$e(c){const{triangles:l,coords:a}=c;for(let h=0;h<l.length;h+=3){const d=2*l[h],f=2*l[h+1],p=2*l[h+2];if((a[p]-a[d])*(a[f+1]-a[d+1])-(a[f]-a[d])*(a[p+1]-a[d+1])>1e-10)return!1}return!0}(l)){this.collinear=Int32Array.from({length:a.length/2},(b,C)=>C).sort((b,C)=>a[2*b]-a[2*C]||a[2*b+1]-a[2*C+1]);const m=this.collinear[0],v=this.collinear[this.collinear.length-1],y=[a[2*m],a[2*m+1],a[2*v],a[2*v+1]],_=1e-8*Math.hypot(y[3]-y[1],y[2]-y[0]);for(let b=0,C=a.length/2;b<C;++b){const x=I$e(a[2*b],a[2*b+1],_);a[2*b]=x[0],a[2*b+1]=x[1]}this._delaunator=new Zk(a)}else delete this.collinear;const h=this.halfedges=this._delaunator.halfedges,d=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,p=this.inedges.fill(-1),g=this._hullIndex.fill(-1);for(let m=0,v=h.length;m<v;++m){const y=f[m%3==2?m-2:m+1];(-1===h[m]||-1===p[y])&&(p[y]=m)}for(let m=0,v=d.length;m<v;++m)g[d[m]]=m;d.length<=2&&d.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=d[0],p[d[0]]=1,2===d.length&&(p[d[1]]=0,this.triangles[1]=d[1],this.triangles[2]=d[1]))}voronoi(l){return new Gse(this,l)}*neighbors(l){const{inedges:a,hull:h,_hullIndex:d,halfedges:f,triangles:p,collinear:g}=this;if(g){const _=g.indexOf(l);return _>0&&(yield g[_-1]),void(_<g.length-1&&(yield g[_+1]))}const m=a[l];if(-1===m)return;let v=m,y=-1;do{if(yield y=p[v],v=v%3==2?v-2:v+1,p[v]!==l)return;if(v=f[v],-1===v){const _=h[(d[l]+1)%h.length];return void(_!==y&&(yield _))}}while(v!==m)}find(l,a,h=0){if((l=+l)!=l||(a=+a)!=a)return-1;const d=h;let f;for(;(f=this._step(h,l,a))>=0&&f!==h&&f!==d;)h=f;return f}_step(l,a,h){const{inedges:d,hull:f,_hullIndex:p,halfedges:g,triangles:m,points:v}=this;if(-1===d[l]||!v.length)return(l+1)%(v.length>>1);let y=l,_=R_(a-v[2*l],2)+R_(h-v[2*l+1],2);const b=d[l];let C=b;do{let x=m[C];const S=R_(a-v[2*x],2)+R_(h-v[2*x+1],2);if(S<_&&(_=S,y=x),C=C%3==2?C-2:C+1,m[C]!==l)break;if(C=g[C],-1===C){if(C=f[(p[l]+1)%f.length],C!==x&&R_(a-v[2*C],2)+R_(h-v[2*C+1],2)<_)return C;break}}while(C!==b);return y}render(l){const a=null==l?l=new y0:void 0,{points:h,halfedges:d,triangles:f}=this;for(let p=0,g=d.length;p<g;++p){const m=d[p];if(m<p)continue;const v=2*f[p],y=2*f[m];l.moveTo(h[v],h[v+1]),l.lineTo(h[y],h[y+1])}return this.renderHull(l),a&&a.value()}renderPoints(l,a){void 0===a&&(!l||"function"!=typeof l.moveTo)&&(a=l,l=null),a=null==a?2:+a;const h=null==l?l=new y0:void 0,{points:d}=this;for(let f=0,p=d.length;f<p;f+=2){const g=d[f],m=d[f+1];l.moveTo(g+a,m),l.arc(g,m,a,0,k$e)}return h&&h.value()}renderHull(l){const a=null==l?l=new y0:void 0,{hull:h,points:d}=this,f=2*h[0],p=h.length;l.moveTo(d[f],d[f+1]);for(let g=1;g<p;++g){const m=2*h[g];l.lineTo(d[m],d[m+1])}return l.closePath(),a&&a.value()}hullPolygon(){const l=new _8;return this.renderHull(l),l.value()}renderTriangle(l,a){const h=null==a?a=new y0:void 0,{points:d,triangles:f}=this,p=2*f[l*=3],g=2*f[l+1],m=2*f[l+2];return a.moveTo(d[p],d[p+1]),a.lineTo(d[g],d[g+1]),a.lineTo(d[m],d[m+1]),a.closePath(),h&&h.value()}*trianglePolygons(){const{triangles:l}=this;for(let a=0,h=l.length/3;a<h;++a)yield this.trianglePolygon(a)}trianglePolygon(l){const a=new _8;return this.renderTriangle(l,a),a.value()}}const Xk=c=>()=>c;function C8(c,{sourceEvent:l,subject:a,target:h,identifier:d,active:f,x:p,y:g,dx:m,dy:v,dispatch:y}){Object.defineProperties(this,{type:{value:c,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:h,enumerable:!0,configurable:!0},identifier:{value:d,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:p,enumerable:!0,configurable:!0},y:{value:g,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:y}})}function F$e(c){return!c.ctrlKey&&!c.button}function N$e(){return this.parentNode}function L$e(c,l){return null==l?{x:c.x,y:c.y}:l}function B$e(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qse(){var g,m,v,y,c=F$e,l=N$e,a=L$e,h=B$e,d={},f=f_("start","drag","end"),p=0,_=0;function b(D){D.on("mousedown.drag",C).filter(h).on("touchstart.drag",w).on("touchmove.drag",T,N7e).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function C(D,M){if(!y&&c.call(this,D,M)){var A=k(this,l.call(this,D,M),D,M,"mouse");!A||(po(D.view).on("mousemove.drag",x,lw).on("mouseup.drag",S,lw),vk(D.view),cB(D),v=!1,g=D.clientX,m=D.clientY,A("start",D))}}function x(D){if(g_(D),!v){var M=D.clientX-g,A=D.clientY-m;v=M*M+A*A>_}d.mouse("drag",D)}function S(D){po(D.view).on("mousemove.drag mouseup.drag",null),yk(D.view,v),g_(D),d.mouse("end",D)}function w(D,M){if(c.call(this,D,M)){var V,z,A=D.changedTouches,L=l.call(this,D,M),E=A.length;for(V=0;V<E;++V)(z=k(this,L,D,M,A[V].identifier,A[V]))&&(cB(D),z("start",D,A[V]))}}function T(D){var L,E,M=D.changedTouches,A=M.length;for(L=0;L<A;++L)(E=d[M[L].identifier])&&(g_(D),E("drag",D,M[L]))}function O(D){var L,E,M=D.changedTouches,A=M.length;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),L=0;L<A;++L)(E=d[M[L].identifier])&&(cB(D),E("end",D,M[L]))}function k(D,M,A,L,E,V){var Z,Y,N,z=f.copy(),U=xc(V||A,M);if(null!=(N=a.call(D,new C8("beforestart",{sourceEvent:A,target:b,identifier:E,active:p,x:U[0],y:U[1],dx:0,dy:0,dispatch:z}),L)))return Z=N.x-U[0]||0,Y=N.y-U[1]||0,function $(H,G,W){var Q,j=U;switch(H){case"start":d[E]=$,Q=p++;break;case"end":delete d[E],--p;case"drag":U=xc(W||G,M),Q=p}z.call(H,D,new C8(H,{sourceEvent:G,subject:N,target:b,identifier:E,active:Q,x:U[0]+Z,y:U[1]+Y,dx:U[0]-j[0],dy:U[1]-j[1],dispatch:z}),L)}}return b.filter=function(D){return arguments.length?(c="function"==typeof D?D:Xk(!!D),b):c},b.container=function(D){return arguments.length?(l="function"==typeof D?D:Xk(D),b):l},b.subject=function(D){return arguments.length?(a="function"==typeof D?D:Xk(D),b):a},b.touchable=function(D){return arguments.length?(h="function"==typeof D?D:Xk(!!D),b):h},b.on=function(){var D=f.on.apply(f,arguments);return D===f?b:D},b.clickDistance=function(D){return arguments.length?(_=(D=+D)*D,b):Math.sqrt(_)},b}C8.prototype.on=function(){var c=this._.on.apply(this._,arguments);return c===this._?this:c};var jse={},x8={};function qse(c){return new Function("d","return {"+c.map(function(l,a){return JSON.stringify(l)+": d["+a+'] || ""'}).join(",")+"}")}function Zse(c){var l=Object.create(null),a=[];return c.forEach(function(h){for(var d in h)d in l||a.push(l[d]=d)}),a}function Gl(c,l){var a=c+"",h=a.length;return h<l?new Array(l-h+1).join(0)+a:a}function Yk(c){var l=new RegExp('["'+c+"\n\r]"),a=c.charCodeAt(0);function d(_,b){var T,C=[],x=_.length,S=0,w=0,O=x<=0,k=!1;function D(){if(O)return x8;if(k)return k=!1,jse;var A,E,L=S;if(34===_.charCodeAt(L)){for(;S++<x&&34!==_.charCodeAt(S)||34===_.charCodeAt(++S););return(A=S)>=x?O=!0:10===(E=_.charCodeAt(S++))?k=!0:13===E&&(k=!0,10===_.charCodeAt(S)&&++S),_.slice(L+1,A-1).replace(/""/g,'"')}for(;S<x;){if(10===(E=_.charCodeAt(A=S++)))k=!0;else if(13===E)k=!0,10===_.charCodeAt(S)&&++S;else if(E!==a)continue;return _.slice(L,A)}return O=!0,_.slice(L,x)}for(10===_.charCodeAt(x-1)&&--x,13===_.charCodeAt(x-1)&&--x;(T=D())!==x8;){for(var M=[];T!==jse&&T!==x8;)M.push(T),T=D();b&&null==(M=b(M,w++))||C.push(M)}return C}function f(_,b){return _.map(function(C){return b.map(function(x){return y(C[x])}).join(c)})}function v(_){return _.map(y).join(c)}function y(_){return null==_?"":_ instanceof Date?function U$e(c){var l=c.getUTCHours(),a=c.getUTCMinutes(),h=c.getUTCSeconds(),d=c.getUTCMilliseconds();return isNaN(c)?"Invalid Date":function z$e(c){return c<0?"-"+Gl(-c,6):c>9999?"+"+Gl(c,6):Gl(c,4)}(c.getUTCFullYear())+"-"+Gl(c.getUTCMonth()+1,2)+"-"+Gl(c.getUTCDate(),2)+(d?"T"+Gl(l,2)+":"+Gl(a,2)+":"+Gl(h,2)+"."+Gl(d,3)+"Z":h?"T"+Gl(l,2)+":"+Gl(a,2)+":"+Gl(h,2)+"Z":a||l?"T"+Gl(l,2)+":"+Gl(a,2)+"Z":"")}(_):l.test(_+="")?'"'+_.replace(/"/g,'""')+'"':_}return{parse:function h(_,b){var C,x,S=d(_,function(w,T){if(C)return C(w,T-1);x=w,C=b?function V$e(c,l){var a=qse(c);return function(h,d){return l(a(h),d,c)}}(w,b):qse(w)});return S.columns=x||[],S},parseRows:d,format:function p(_,b){return null==b&&(b=Zse(_)),[b.map(y).join(c)].concat(f(_,b)).join("\n")},formatBody:function g(_,b){return null==b&&(b=Zse(_)),f(_,b).join("\n")},formatRows:function m(_){return _.map(v).join("\n")},formatRow:v,formatValue:y}}var _0=Yk(","),Xse=_0.parse,H$e=_0.parseRows,$$e=_0.format,W$e=_0.formatBody,G$e=_0.formatRows,Q$e=_0.formatRow,j$e=_0.formatValue,b0=Yk("\t"),Yse=b0.parse,q$e=b0.parseRows,Z$e=b0.format,X$e=b0.formatBody,Y$e=b0.formatRows,K$e=b0.formatRow,J$e=b0.formatValue;function eWe(c){for(var l in c){var h,d,a=c[l].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(h=+a)){if(!(d=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;tWe&&!!d[4]&&!d[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=h;else a=null;c[l]=a}return c}const tWe=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),nWe=c=>+c;function iWe(c){return c*c}function rWe(c){return c*(2-c)}function Kse(c){return((c*=2)<=1?c*c:--c*(2-c)+1)/2}var sWe=function c(l){function a(h){return Math.pow(h,l)}return l=+l,a.exponent=c,a}(3),oWe=function c(l){function a(h){return 1-Math.pow(1-h,l)}return l=+l,a.exponent=c,a}(3),Jse=function c(l){function a(h){return((h*=2)<=1?Math.pow(h,l):2-Math.pow(2-h,l))/2}return l=+l,a.exponent=c,a}(3),eoe=Math.PI,toe=eoe/2;function aWe(c){return 1==+c?1:1-Math.cos(c*toe)}function lWe(c){return Math.sin(c*toe)}function noe(c){return(1-Math.cos(eoe*c))/2}function tg(c){return 1.0009775171065494*(Math.pow(2,-10*c)-.0009765625)}function cWe(c){return tg(1-+c)}function uWe(c){return 1-tg(c)}function ioe(c){return((c*=2)<=1?tg(1-c):2-tg(c-1))/2}function hWe(c){return 1-Math.sqrt(1-c*c)}function dWe(c){return Math.sqrt(1- --c*c)}function roe(c){return((c*=2)<=1?1-Math.sqrt(1-c*c):Math.sqrt(1-(c-=2)*c)+1)/2}var Kk=7.5625;function CWe(c){return 1-Ow(1-c)}function Ow(c){return(c=+c)<.36363636363636365?Kk*c*c:c<.7272727272727273?Kk*(c-=.5454545454545454)*c+.75:c<.9090909090909091?Kk*(c-=.8181818181818182)*c+.9375:Kk*(c-=.9545454545454546)*c+.984375}function xWe(c){return((c*=2)<=1?1-Ow(1-c):Ow(c-1)+1)/2}var D8=1.70158,wWe=function c(l){function a(h){return(h=+h)*h*(l*(h-1)+h)}return l=+l,a.overshoot=c,a}(D8),SWe=function c(l){function a(h){return--h*h*((h+1)*l+h)+1}return l=+l,a.overshoot=c,a}(D8),soe=function c(l){function a(h){return((h*=2)<1?h*h*((l+1)*h-l):(h-=2)*h*((l+1)*h+l)+2)/2}return l=+l,a.overshoot=c,a}(D8),F_=2*Math.PI,TWe=function c(l,a){var h=Math.asin(1/(l=Math.max(1,l)))*(a/=F_);function d(f){return l*tg(- --f)*Math.sin((h-f)/a)}return d.amplitude=function(f){return c(f,a*F_)},d.period=function(f){return c(l,f)},d}(1,.3),ooe=function c(l,a){var h=Math.asin(1/(l=Math.max(1,l)))*(a/=F_);function d(f){return 1-l*tg(f=+f)*Math.sin((f+h)/a)}return d.amplitude=function(f){return c(f,a*F_)},d.period=function(f){return c(l,f)},d}(1,.3),OWe=function c(l,a){var h=Math.asin(1/(l=Math.max(1,l)))*(a/=F_);function d(f){return((f=2*f-1)<0?l*tg(-f)*Math.sin((h-f)/a):2-l*tg(f)*Math.sin((h+f)/a))/2}return d.amplitude=function(f){return c(f,a*F_)},d.period=function(f){return c(l,f)},d}(1,.3);function DWe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);return c.blob()}function kWe(c,l){return fetch(c,l).then(DWe)}function MWe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);return c.arrayBuffer()}function EWe(c,l){return fetch(c,l).then(MWe)}function AWe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);return c.text()}function Jk(c,l){return fetch(c,l).then(AWe)}function aoe(c){return function(l,a,h){return 2===arguments.length&&"function"==typeof a&&(h=a,a=void 0),Jk(l,a).then(function(d){return c(d,h)})}}function IWe(c,l,a,h){3===arguments.length&&"function"==typeof a&&(h=a,a=void 0);var d=Yk(c);return Jk(l,a).then(function(f){return d.parse(f,h)})}var PWe=aoe(Xse),RWe=aoe(Yse);function FWe(c,l){return new Promise(function(a,h){var d=new Image;for(var f in l)d[f]=l[f];d.onerror=h,d.onload=function(){a(d)},d.src=c})}function NWe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);if(204!==c.status&&205!==c.status)return c.json()}function LWe(c,l){return fetch(c,l).then(NWe)}function E8(c){return(l,a)=>Jk(l,a).then(h=>(new DOMParser).parseFromString(h,c))}const BWe=E8("application/xml");var VWe=E8("text/html"),zWe=E8("image/svg+xml");function UWe(c,l){var a,h=1;function d(){var f,g,p=a.length,m=0,v=0;for(f=0;f<p;++f)m+=(g=a[f]).x,v+=g.y;for(m=(m/p-c)*h,v=(v/p-l)*h,f=0;f<p;++f)(g=a[f]).x-=m,g.y-=v}return null==c&&(c=0),null==l&&(l=0),d.initialize=function(f){a=f},d.x=function(f){return arguments.length?(c=+f,d):c},d.y=function(f){return arguments.length?(l=+f,d):l},d.strength=function(f){return arguments.length?(h=+f,d):h},d}function loe(c,l,a,h){if(isNaN(l)||isNaN(a))return c;var d,_,b,C,x,S,w,T,O,f=c._root,p={data:h},g=c._x0,m=c._y0,v=c._x1,y=c._y1;if(!f)return c._root=p,c;for(;f.length;)if((S=l>=(_=(g+v)/2))?g=_:v=_,(w=a>=(b=(m+y)/2))?m=b:y=b,d=f,!(f=f[T=w<<1|S]))return d[T]=p,c;if(C=+c._x.call(null,f.data),x=+c._y.call(null,f.data),l===C&&a===x)return p.next=f,d?d[T]=p:c._root=p,c;do{d=d?d[T]=new Array(4):c._root=new Array(4),(S=l>=(_=(g+v)/2))?g=_:v=_,(w=a>=(b=(m+y)/2))?m=b:y=b}while((T=w<<1|S)==(O=(x>=b)<<1|C>=_));return d[O]=f,d[T]=p,c}function cl(c,l,a,h,d){this.node=c,this.x0=l,this.y0=a,this.x1=h,this.y1=d}function eGe(c){return c[0]}function nGe(c){return c[1]}function eM(c,l,a){var h=new A8(null==l?eGe:l,null==a?nGe:a,NaN,NaN,NaN,NaN);return null==c?h:h.addAll(c)}function A8(c,l,a,h,d,f){this._x=c,this._y=l,this._x0=a,this._y0=h,this._x1=d,this._y1=f,this._root=void 0}function coe(c){for(var l={data:c.data},a=l;c=c.next;)a=a.next={data:c.data};return l}var ul=eM.prototype=A8.prototype;function Fo(c){return function(){return c}}function ng(c){return 1e-6*(c()-.5)}function rGe(c){return c.x+c.vx}function sGe(c){return c.y+c.vy}function oGe(c){var l,a,h,d=1,f=1;function p(){for(var v,_,b,C,x,S,w,y=l.length,T=0;T<f;++T)for(_=eM(l,rGe,sGe).visitAfter(g),v=0;v<y;++v)w=(S=a[(b=l[v]).index])*S,C=b.x+b.vx,x=b.y+b.vy,_.visit(O);function O(k,D,M,A,L){var E=k.data,V=k.r,z=S+V;if(!E)return D>C+z||A<C-z||M>x+z||L<x-z;if(E.index>b.index){var U=C-E.x-E.vx,Z=x-E.y-E.vy,Y=U*U+Z*Z;Y<z*z&&(0===U&&(Y+=(U=ng(h))*U),0===Z&&(Y+=(Z=ng(h))*Z),Y=(z-(Y=Math.sqrt(Y)))/Y*d,b.vx+=(U*=Y)*(z=(V*=V)/(w+V)),b.vy+=(Z*=Y)*z,E.vx-=U*(z=1-z),E.vy-=Z*z)}}}function g(v){if(v.data)return v.r=a[v.data.index];for(var y=v.r=0;y<4;++y)v[y]&&v[y].r>v.r&&(v.r=v[y].r)}function m(){if(l){var v,_,y=l.length;for(a=new Array(y),v=0;v<y;++v)a[(_=l[v]).index]=+c(_,v,l)}}return"function"!=typeof c&&(c=Fo(null==c?1:+c)),p.initialize=function(v,y){l=v,h=y,m()},p.iterations=function(v){return arguments.length?(f=+v,p):f},p.strength=function(v){return arguments.length?(d=+v,p):d},p.radius=function(v){return arguments.length?(c="function"==typeof v?v:Fo(+v),m(),p):c},p}function aGe(c){return c.index}function uoe(c,l){var a=c.get(l);if(!a)throw new Error("node not found: "+l);return a}function lGe(c){var h,f,p,g,m,v,l=aGe,a=function _(w){return 1/Math.min(g[w.source.index],g[w.target.index])},d=Fo(30),y=1;function b(w){for(var T=0,O=c.length;T<y;++T)for(var D,M,A,L,E,V,z,k=0;k<O;++k)L=(A=(D=c[k]).target).x+A.vx-(M=D.source).x-M.vx||ng(v),E=A.y+A.vy-M.y-M.vy||ng(v),E*=V=((V=Math.sqrt(L*L+E*E))-f[k])/V*w*h[k],A.vx-=(L*=V)*(z=m[k]),A.vy-=E*z,M.vx+=L*(z=1-z),M.vy+=E*z}function C(){if(p){var w,D,T=p.length,O=c.length,k=new Map(p.map((M,A)=>[l(M,A,p),M]));for(w=0,g=new Array(T);w<O;++w)(D=c[w]).index=w,"object"!=typeof D.source&&(D.source=uoe(k,D.source)),"object"!=typeof D.target&&(D.target=uoe(k,D.target)),g[D.source.index]=(g[D.source.index]||0)+1,g[D.target.index]=(g[D.target.index]||0)+1;for(w=0,m=new Array(O);w<O;++w)m[w]=g[(D=c[w]).source.index]/(g[D.source.index]+g[D.target.index]);h=new Array(O),x(),f=new Array(O),S()}}function x(){if(p)for(var w=0,T=c.length;w<T;++w)h[w]=+a(c[w],w,c)}function S(){if(p)for(var w=0,T=c.length;w<T;++w)f[w]=+d(c[w],w,c)}return null==c&&(c=[]),b.initialize=function(w,T){p=w,v=T,C()},b.links=function(w){return arguments.length?(c=w,C(),b):c},b.id=function(w){return arguments.length?(l=w,b):l},b.iterations=function(w){return arguments.length?(y=+w,b):y},b.strength=function(w){return arguments.length?(a="function"==typeof w?w:Fo(+w),x(),b):a},b.distance=function(w){return arguments.length?(d="function"==typeof w?w:Fo(+w),S(),b):d},b}function dGe(c){return c.x}function fGe(c){return c.y}ul.copy=function(){var a,h,c=new A8(this._x,this._y,this._x0,this._y0,this._x1,this._y1),l=this._root;if(!l)return c;if(!l.length)return c._root=coe(l),c;for(a=[{source:l,target:c._root=new Array(4)}];l=a.pop();)for(var d=0;d<4;++d)(h=l.source[d])&&(h.length?a.push({source:h,target:l.target[d]=new Array(4)}):l.target[d]=coe(h));return c},ul.add=function HWe(c){const l=+this._x.call(null,c),a=+this._y.call(null,c);return loe(this.cover(l,a),l,a,c)},ul.addAll=function $We(c){var l,a,d,f,h=c.length,p=new Array(h),g=new Array(h),m=1/0,v=1/0,y=-1/0,_=-1/0;for(a=0;a<h;++a)isNaN(d=+this._x.call(null,l=c[a]))||isNaN(f=+this._y.call(null,l))||(p[a]=d,g[a]=f,d<m&&(m=d),d>y&&(y=d),f<v&&(v=f),f>_&&(_=f));if(m>y||v>_)return this;for(this.cover(m,v).cover(y,_),a=0;a<h;++a)loe(this,p[a],g[a],c[a]);return this},ul.cover=function WWe(c,l){if(isNaN(c=+c)||isNaN(l=+l))return this;var a=this._x0,h=this._y0,d=this._x1,f=this._y1;if(isNaN(a))d=(a=Math.floor(c))+1,f=(h=Math.floor(l))+1;else{for(var m,v,p=d-a||1,g=this._root;a>c||c>=d||h>l||l>=f;)switch(v=(l<h)<<1|c<a,m=new Array(4),m[v]=g,g=m,p*=2,v){case 0:d=a+p,f=h+p;break;case 1:a=d-p,f=h+p;break;case 2:d=a+p,h=f-p;break;case 3:a=d-p,h=f-p}this._root&&this._root.length&&(this._root=g)}return this._x0=a,this._y0=h,this._x1=d,this._y1=f,this},ul.data=function GWe(){var c=[];return this.visit(function(l){if(!l.length)do{c.push(l.data)}while(l=l.next)}),c},ul.extent=function QWe(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ul.find=function jWe(c,l,a){var h,p,g,m,v,x,S,d=this._x0,f=this._y0,y=this._x1,_=this._y1,b=[],C=this._root;for(C&&b.push(new cl(C,d,f,y,_)),null==a?a=1/0:(d=c-a,f=l-a,y=c+a,_=l+a,a*=a);x=b.pop();)if(!(!(C=x.node)||(p=x.x0)>y||(g=x.y0)>_||(m=x.x1)<d||(v=x.y1)<f))if(C.length){var w=(p+m)/2,T=(g+v)/2;b.push(new cl(C[3],w,T,m,v),new cl(C[2],p,T,w,v),new cl(C[1],w,g,m,T),new cl(C[0],p,g,w,T)),(S=(l>=T)<<1|c>=w)&&(x=b[b.length-1],b[b.length-1]=b[b.length-1-S],b[b.length-1-S]=x)}else{var O=c-+this._x.call(null,C.data),k=l-+this._y.call(null,C.data),D=O*O+k*k;if(D<a){var M=Math.sqrt(a=D);d=c-M,f=l-M,y=c+M,_=l+M,h=C.data}}return h},ul.remove=function qWe(c){if(isNaN(y=+this._x.call(null,c))||isNaN(_=+this._y.call(null,c)))return this;var l,h,d,f,y,_,b,C,x,S,w,T,a=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!a)return this;if(a.length)for(;;){if((x=y>=(b=(p+m)/2))?p=b:m=b,(S=_>=(C=(g+v)/2))?g=C:v=C,l=a,!(a=a[w=S<<1|x]))return this;if(!a.length)break;(l[w+1&3]||l[w+2&3]||l[w+3&3])&&(h=l,T=w)}for(;a.data!==c;)if(d=a,!(a=a.next))return this;return(f=a.next)&&delete a.next,d?(f?d.next=f:delete d.next,this):l?(f?l[w]=f:delete l[w],(a=l[0]||l[1]||l[2]||l[3])&&a===(l[3]||l[2]||l[1]||l[0])&&!a.length&&(h?h[T]=a:this._root=a),this):(this._root=f,this)},ul.removeAll=function ZWe(c){for(var l=0,a=c.length;l<a;++l)this.remove(c[l]);return this},ul.root=function XWe(){return this._root},ul.size=function YWe(){var c=0;return this.visit(function(l){if(!l.length)do{++c}while(l=l.next)}),c},ul.visit=function KWe(c){var a,d,f,p,g,m,l=[],h=this._root;for(h&&l.push(new cl(h,this._x0,this._y0,this._x1,this._y1));a=l.pop();)if(!c(h=a.node,f=a.x0,p=a.y0,g=a.x1,m=a.y1)&&h.length){var v=(f+g)/2,y=(p+m)/2;(d=h[3])&&l.push(new cl(d,v,y,g,m)),(d=h[2])&&l.push(new cl(d,f,y,v,m)),(d=h[1])&&l.push(new cl(d,v,p,g,y)),(d=h[0])&&l.push(new cl(d,f,p,v,y))}return this},ul.visitAfter=function JWe(c){var h,l=[],a=[];for(this._root&&l.push(new cl(this._root,this._x0,this._y0,this._x1,this._y1));h=l.pop();){var d=h.node;if(d.length){var f,p=h.x0,g=h.y0,m=h.x1,v=h.y1,y=(p+m)/2,_=(g+v)/2;(f=d[0])&&l.push(new cl(f,p,g,y,_)),(f=d[1])&&l.push(new cl(f,y,g,m,_)),(f=d[2])&&l.push(new cl(f,p,_,y,v)),(f=d[3])&&l.push(new cl(f,y,_,m,v))}a.push(h)}for(;h=a.pop();)c(h.node,h.x0,h.y0,h.x1,h.y1);return this},ul.x=function tGe(c){return arguments.length?(this._x=c,this):this._x},ul.y=function iGe(c){return arguments.length?(this._y=c,this):this._y};var gGe=Math.PI*(3-Math.sqrt(5));function mGe(c){var l,a=1,h=.001,d=1-Math.pow(h,1/300),f=0,p=.6,g=new Map,m=Ok(_),v=f_("tick","end"),y=function hGe(){let c=1;return()=>(c=(1664525*c+1013904223)%4294967296)/4294967296}();function _(){b(),v.call("tick",l),a<h&&(m.stop(),v.call("end",l))}function b(S){var w,O,T=c.length;void 0===S&&(S=1);for(var k=0;k<S;++k)for(a+=(f-a)*d,g.forEach(function(D){D(a)}),w=0;w<T;++w)null==(O=c[w]).fx?O.x+=O.vx*=p:(O.x=O.fx,O.vx=0),null==O.fy?O.y+=O.vy*=p:(O.y=O.fy,O.vy=0);return l}function C(){for(var T,S=0,w=c.length;S<w;++S){if((T=c[S]).index=S,null!=T.fx&&(T.x=T.fx),null!=T.fy&&(T.y=T.fy),isNaN(T.x)||isNaN(T.y)){var O=10*Math.sqrt(.5+S),k=S*gGe;T.x=O*Math.cos(k),T.y=O*Math.sin(k)}(isNaN(T.vx)||isNaN(T.vy))&&(T.vx=T.vy=0)}}function x(S){return S.initialize&&S.initialize(c,y),S}return null==c&&(c=[]),C(),l={tick:b,restart:function(){return m.restart(_),l},stop:function(){return m.stop(),l},nodes:function(S){return arguments.length?(c=S,C(),g.forEach(x),l):c},alpha:function(S){return arguments.length?(a=+S,l):a},alphaMin:function(S){return arguments.length?(h=+S,l):h},alphaDecay:function(S){return arguments.length?(d=+S,l):+d},alphaTarget:function(S){return arguments.length?(f=+S,l):f},velocityDecay:function(S){return arguments.length?(p=1-S,l):1-p},randomSource:function(S){return arguments.length?(y=S,g.forEach(x),l):y},force:function(S,w){return arguments.length>1?(null==w?g.delete(S):g.set(S,x(w)),l):g.get(S)},find:function(S,w,T){var D,M,A,L,E,O=0,k=c.length;for(null==T?T=1/0:T*=T,O=0;O<k;++O)(A=(D=S-(L=c[O]).x)*D+(M=w-L.y)*M)<T&&(E=L,T=A);return E},on:function(S,w){return arguments.length>1?(v.on(S,w),l):v.on(S)}}}function vGe(){var c,l,a,h,f,d=Fo(-30),p=1,g=1/0,m=.81;function v(C){var x,S=c.length,w=eM(c,dGe,fGe).visitAfter(_);for(h=C,x=0;x<S;++x)l=c[x],w.visit(b)}function y(){if(c){var C,S,x=c.length;for(f=new Array(x),C=0;C<x;++C)f[(S=c[C]).index]=+d(S,C,c)}}function _(C){var S,w,O,k,D,x=0,T=0;if(C.length){for(O=k=D=0;D<4;++D)(S=C[D])&&(w=Math.abs(S.value))&&(x+=S.value,T+=w,O+=w*S.x,k+=w*S.y);C.x=O/T,C.y=k/T}else{(S=C).x=S.data.x,S.y=S.data.y;do{x+=f[S.data.index]}while(S=S.next)}C.value=x}function b(C,x,S,w){if(!C.value)return!0;var T=C.x-l.x,O=C.y-l.y,k=w-x,D=T*T+O*O;if(k*k/m<D)return D<g&&(0===T&&(D+=(T=ng(a))*T),0===O&&(D+=(O=ng(a))*O),D<p&&(D=Math.sqrt(p*D)),l.vx+=T*C.value*h/D,l.vy+=O*C.value*h/D),!0;if(!(C.length||D>=g)){(C.data!==l||C.next)&&(0===T&&(D+=(T=ng(a))*T),0===O&&(D+=(O=ng(a))*O),D<p&&(D=Math.sqrt(p*D)));do{C.data!==l&&(l.vx+=T*(k=f[C.data.index]*h/D),l.vy+=O*k)}while(C=C.next)}}return v.initialize=function(C,x){c=C,a=x,y()},v.strength=function(C){return arguments.length?(d="function"==typeof C?C:Fo(+C),y(),v):d},v.distanceMin=function(C){return arguments.length?(p=C*C,v):Math.sqrt(p)},v.distanceMax=function(C){return arguments.length?(g=C*C,v):Math.sqrt(g)},v.theta=function(C){return arguments.length?(m=C*C,v):Math.sqrt(m)},v}function yGe(c,l,a){var h,f,p,d=Fo(.1);function g(v){for(var y=0,_=h.length;y<_;++y){var b=h[y],C=b.x-l||1e-6,x=b.y-a||1e-6,S=Math.sqrt(C*C+x*x),w=(p[y]-S)*f[y]*v/S;b.vx+=C*w,b.vy+=x*w}}function m(){if(h){var v,y=h.length;for(f=new Array(y),p=new Array(y),v=0;v<y;++v)p[v]=+c(h[v],v,h),f[v]=isNaN(p[v])?0:+d(h[v],v,h)}}return"function"!=typeof c&&(c=Fo(+c)),null==l&&(l=0),null==a&&(a=0),g.initialize=function(v){h=v,m()},g.strength=function(v){return arguments.length?(d="function"==typeof v?v:Fo(+v),m(),g):d},g.radius=function(v){return arguments.length?(c="function"==typeof v?v:Fo(+v),m(),g):c},g.x=function(v){return arguments.length?(l=+v,g):l},g.y=function(v){return arguments.length?(a=+v,g):a},g}function _Ge(c){var a,h,d,l=Fo(.1);function f(g){for(var y,m=0,v=a.length;m<v;++m)(y=a[m]).vx+=(d[m]-y.x)*h[m]*g}function p(){if(a){var g,m=a.length;for(h=new Array(m),d=new Array(m),g=0;g<m;++g)h[g]=isNaN(d[g]=+c(a[g],g,a))?0:+l(a[g],g,a)}}return"function"!=typeof c&&(c=Fo(null==c?0:+c)),f.initialize=function(g){a=g,p()},f.strength=function(g){return arguments.length?(l="function"==typeof g?g:Fo(+g),p(),f):l},f.x=function(g){return arguments.length?(c="function"==typeof g?g:Fo(+g),p(),f):c},f}function bGe(c){var a,h,d,l=Fo(.1);function f(g){for(var y,m=0,v=a.length;m<v;++m)(y=a[m]).vy+=(d[m]-y.y)*h[m]*g}function p(){if(a){var g,m=a.length;for(h=new Array(m),d=new Array(m),g=0;g<m;++g)h[g]=isNaN(d[g]=+c(a[g],g,a))?0:+l(a[g],g,a)}}return"function"!=typeof c&&(c=Fo(null==c?0:+c)),f.initialize=function(g){a=g,p()},f.strength=function(g){return arguments.length?(l="function"==typeof g?g:Fo(+g),p(),f):l},f.y=function(g){return arguments.length?(c="function"==typeof g?g:Fo(+g),p(),f):c},f}function tM(c,l){if((a=(c=l?c.toExponential(l-1):c.toExponential()).indexOf("e"))<0)return null;var a,h=c.slice(0,a);return[h.length>1?h[0]+h.slice(2):h,+c.slice(a+1)]}function N_(c){return(c=tM(Math.abs(c)))?c[1]:NaN}var doe,SGe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function L_(c){if(!(l=SGe.exec(c)))throw new Error("invalid format: "+c);var l;return new nM({fill:l[1],align:l[2],sign:l[3],symbol:l[4],zero:l[5],width:l[6],comma:l[7],precision:l[8]&&l[8].slice(1),trim:l[9],type:l[10]})}function nM(c){this.fill=void 0===c.fill?" ":c.fill+"",this.align=void 0===c.align?">":c.align+"",this.sign=void 0===c.sign?"-":c.sign+"",this.symbol=void 0===c.symbol?"":c.symbol+"",this.zero=!!c.zero,this.width=void 0===c.width?void 0:+c.width,this.comma=!!c.comma,this.precision=void 0===c.precision?void 0:+c.precision,this.trim=!!c.trim,this.type=void 0===c.type?"":c.type+""}function foe(c,l){var a=tM(c,l);if(!a)return c+"";var h=a[0],d=a[1];return d<0?"0."+new Array(-d).join("0")+h:h.length>d+1?h.slice(0,d+1)+"."+h.slice(d+1):h+new Array(d-h.length+2).join("0")}L_.prototype=nM.prototype,nM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const poe={"%":(c,l)=>(100*c).toFixed(l),b:c=>Math.round(c).toString(2),c:c=>c+"",d:function CGe(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:(c,l)=>c.toExponential(l),f:(c,l)=>c.toFixed(l),g:(c,l)=>c.toPrecision(l),o:c=>Math.round(c).toString(8),p:(c,l)=>foe(100*c,l),r:foe,s:function OGe(c,l){var a=tM(c,l);if(!a)return c+"";var h=a[0],d=a[1],f=d-(doe=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,p=h.length;return f===p?h:f>p?h+new Array(f-p+1).join("0"):f>0?h.slice(0,f)+"."+h.slice(f):"0."+new Array(1-f).join("0")+tM(c,Math.max(0,l+f-1))[0]},X:c=>Math.round(c).toString(16).toUpperCase(),x:c=>Math.round(c).toString(16)};function goe(c){return c}var iM,rM,I8,moe=Array.prototype.map,voe=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function yoe(c){var l=void 0===c.grouping||void 0===c.thousands?goe:function xGe(c,l){return function(a,h){for(var d=a.length,f=[],p=0,g=c[0],m=0;d>0&&g>0&&(m+g+1>h&&(g=Math.max(1,h-m)),f.push(a.substring(d-=g,d+g)),!((m+=g+1)>h));)g=c[p=(p+1)%c.length];return f.reverse().join(l)}}(moe.call(c.grouping,Number),c.thousands+""),a=void 0===c.currency?"":c.currency[0]+"",h=void 0===c.currency?"":c.currency[1]+"",d=void 0===c.decimal?".":c.decimal+"",f=void 0===c.numerals?goe:function wGe(c){return function(l){return l.replace(/[0-9]/g,function(a){return c[+a]})}}(moe.call(c.numerals,String)),p=void 0===c.percent?"%":c.percent+"",g=void 0===c.minus?"\u2212":c.minus+"",m=void 0===c.nan?"NaN":c.nan+"";function v(_){var b=(_=L_(_)).fill,C=_.align,x=_.sign,S=_.symbol,w=_.zero,T=_.width,O=_.comma,k=_.precision,D=_.trim,M=_.type;"n"===M?(O=!0,M="g"):poe[M]||(void 0===k&&(k=12),D=!0,M="g"),(w||"0"===b&&"="===C)&&(w=!0,b="0",C="=");var A="$"===S?a:"#"===S&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",L="$"===S?h:/[%p]/.test(M)?p:"",E=poe[M],V=/[defgprs%]/.test(M);function z(U){var N,$,H,Z=A,Y=L;if("c"===M)Y=E(U)+Y,U="";else{var G=(U=+U)<0||1/U<0;if(U=isNaN(U)?m:E(Math.abs(U),k),D&&(U=function TGe(c){e:for(var d,l=c.length,a=1,h=-1;a<l;++a)switch(c[a]){case".":h=d=a;break;case"0":0===h&&(h=a),d=a;break;default:if(!+c[a])break e;h>0&&(h=0)}return h>0?c.slice(0,h)+c.slice(d+1):c}(U)),G&&0==+U&&"+"!==x&&(G=!1),Z=(G?"("===x?x:g:"-"===x||"("===x?"":x)+Z,Y=("s"===M?voe[8+doe/3]:"")+Y+(G&&"("===x?")":""),V)for(N=-1,$=U.length;++N<$;)if(48>(H=U.charCodeAt(N))||H>57){Y=(46===H?d+U.slice(N+1):U.slice(N))+Y,U=U.slice(0,N);break}}O&&!w&&(U=l(U,1/0));var W=Z.length+U.length+Y.length,j=W<T?new Array(T-W+1).join(b):"";switch(O&&w&&(U=l(j+U,j.length?T-Y.length:1/0),j=""),C){case"<":U=Z+U+Y+j;break;case"=":U=Z+j+U+Y;break;case"^":U=j.slice(0,W=j.length>>1)+Z+U+Y+j.slice(W);break;default:U=j+Z+U+Y}return f(U)}return k=void 0===k?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k)),z.toString=function(){return _+""},z}return{format:v,formatPrefix:function y(_,b){var C=v(((_=L_(_)).type="f",_)),x=3*Math.max(-8,Math.min(8,Math.floor(N_(b)/3))),S=Math.pow(10,-x),w=voe[8+x/3];return function(T){return C(S*T)+w}}}}function _oe(c){return iM=yoe(c),rM=iM.format,I8=iM.formatPrefix,iM}function boe(c){return Math.max(0,-N_(Math.abs(c)))}function Coe(c,l){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(N_(l)/3)))-N_(Math.abs(c)))}function xoe(c,l){return c=Math.abs(c),l=Math.abs(l)-c,Math.max(0,N_(l)-N_(c))+1}_oe({thousands:",",grouping:[3],currency:["$",""]});var Zn=1e-6,Dw=1e-12,Qi=Math.PI,Gs=Qi/2,sM=Qi/4,hl=2*Qi,jr=180/Qi,Xn=Qi/180,or=Math.abs,B_=Math.atan,dl=Math.atan2,Bn=Math.cos,oM=Math.ceil,woe=Math.exp,P8=(Math,Math.hypot),aM=Math.log,R8=Math.pow,Dn=Math.sin,vu=Math.sign||function(c){return c>0?1:c<0?-1:0},Yo=Math.sqrt,F8=Math.tan;function Soe(c){return c>1?0:c<-1?Qi:Math.acos(c)}function fl(c){return c>1?Gs:c<-1?-Gs:Math.asin(c)}function Toe(c){return(c=Dn(c/2))*c}function ks(){}function lM(c,l){c&&Doe.hasOwnProperty(c.type)&&Doe[c.type](c,l)}var Ooe={Feature:function(c,l){lM(c.geometry,l)},FeatureCollection:function(c,l){for(var a=c.features,h=-1,d=a.length;++h<d;)lM(a[h].geometry,l)}},Doe={Sphere:function(c,l){l.sphere()},Point:function(c,l){l.point((c=c.coordinates)[0],c[1],c[2])},MultiPoint:function(c,l){for(var a=c.coordinates,h=-1,d=a.length;++h<d;)l.point((c=a[h])[0],c[1],c[2])},LineString:function(c,l){N8(c.coordinates,l,0)},MultiLineString:function(c,l){for(var a=c.coordinates,h=-1,d=a.length;++h<d;)N8(a[h],l,0)},Polygon:function(c,l){koe(c.coordinates,l)},MultiPolygon:function(c,l){for(var a=c.coordinates,h=-1,d=a.length;++h<d;)koe(a[h],l)},GeometryCollection:function(c,l){for(var a=c.geometries,h=-1,d=a.length;++h<d;)lM(a[h],l)}};function N8(c,l,a){var f,h=-1,d=c.length-a;for(l.lineStart();++h<d;)l.point((f=c[h])[0],f[1],f[2]);l.lineEnd()}function koe(c,l){var a=-1,h=c.length;for(l.polygonStart();++a<h;)N8(c[a],l,1);l.polygonEnd()}function fh(c,l){c&&Ooe.hasOwnProperty(c.type)?Ooe[c.type](c,l):lM(c,l)}var Moe,Eoe,L8,B8,V8,cM=new Po,uM=new Po,vd={point:ks,lineStart:ks,lineEnd:ks,polygonStart:function(){cM=new Po,vd.lineStart=DGe,vd.lineEnd=kGe},polygonEnd:function(){var c=+cM;uM.add(c<0?hl+c:c),this.lineStart=this.lineEnd=this.point=ks},sphere:function(){uM.add(hl)}};function DGe(){vd.point=MGe}function kGe(){Aoe(Moe,Eoe)}function MGe(c,l){vd.point=Aoe,Moe=c,Eoe=l,L8=c*=Xn,B8=Bn(l=(l*=Xn)/2+sM),V8=Dn(l)}function Aoe(c,l){var a=(c*=Xn)-L8,h=a>=0?1:-1,d=h*a,f=Bn(l=(l*=Xn)/2+sM),p=Dn(l),g=V8*p,m=B8*f+g*Bn(d),v=g*h*Dn(d);cM.add(dl(v,m)),L8=c,B8=f,V8=p}function EGe(c){return uM=new Po,fh(c,vd),2*uM}function hM(c){return[dl(c[1],c[0]),fl(c[2])]}function C0(c){var l=c[0],a=c[1],h=Bn(a);return[h*Bn(l),h*Dn(l),Dn(a)]}function dM(c,l){return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]}function V_(c,l){return[c[1]*l[2]-c[2]*l[1],c[2]*l[0]-c[0]*l[2],c[0]*l[1]-c[1]*l[0]]}function z8(c,l){c[0]+=l[0],c[1]+=l[1],c[2]+=l[2]}function fM(c,l){return[c[0]*l,c[1]*l,c[2]*l]}function pM(c){var l=Yo(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=l,c[1]/=l,c[2]/=l}var Ms,Ql,Qs,Mc,x0,Ioe,Poe,z_,kw,ig,Uf,Hf={point:U8,lineStart:Foe,lineEnd:Noe,polygonStart:function(){Hf.point=Loe,Hf.lineStart=AGe,Hf.lineEnd=IGe,kw=new Po,vd.polygonStart()},polygonEnd:function(){vd.polygonEnd(),Hf.point=U8,Hf.lineStart=Foe,Hf.lineEnd=Noe,cM<0?(Ms=-(Qs=180),Ql=-(Mc=90)):kw>Zn?Mc=90:kw<-Zn&&(Ql=-90),Uf[0]=Ms,Uf[1]=Qs},sphere:function(){Ms=-(Qs=180),Ql=-(Mc=90)}};function U8(c,l){ig.push(Uf=[Ms=c,Qs=c]),l<Ql&&(Ql=l),l>Mc&&(Mc=l)}function Roe(c,l){var a=C0([c*Xn,l*Xn]);if(z_){var h=V_(z_,a),f=V_([h[1],-h[0],0],h);pM(f),f=hM(f);var v,p=c-x0,g=p>0?1:-1,m=f[0]*jr*g,y=or(p)>180;y^(g*x0<m&&m<g*c)?(v=f[1]*jr)>Mc&&(Mc=v):y^(g*x0<(m=(m+360)%360-180)&&m<g*c)?(v=-f[1]*jr)<Ql&&(Ql=v):(l<Ql&&(Ql=l),l>Mc&&(Mc=l)),y?c<x0?Ec(Ms,c)>Ec(Ms,Qs)&&(Qs=c):Ec(c,Qs)>Ec(Ms,Qs)&&(Ms=c):Qs>=Ms?(c<Ms&&(Ms=c),c>Qs&&(Qs=c)):c>x0?Ec(Ms,c)>Ec(Ms,Qs)&&(Qs=c):Ec(c,Qs)>Ec(Ms,Qs)&&(Ms=c)}else ig.push(Uf=[Ms=c,Qs=c]);l<Ql&&(Ql=l),l>Mc&&(Mc=l),z_=a,x0=c}function Foe(){Hf.point=Roe}function Noe(){Uf[0]=Ms,Uf[1]=Qs,Hf.point=U8,z_=null}function Loe(c,l){if(z_){var a=c-x0;kw.add(or(a)>180?a+(a>0?360:-360):a)}else Ioe=c,Poe=l;vd.point(c,l),Roe(c,l)}function AGe(){vd.lineStart()}function IGe(){Loe(Ioe,Poe),vd.lineEnd(),or(kw)>Zn&&(Ms=-(Qs=180)),Uf[0]=Ms,Uf[1]=Qs,z_=null}function Ec(c,l){return(l-=c)<0?l+360:l}function PGe(c,l){return c[0]-l[0]}function Boe(c,l){return c[0]<=c[1]?c[0]<=l&&l<=c[1]:l<c[0]||c[1]<l}function RGe(c){var l,a,h,d,f,p,g;if(Mc=Qs=-(Ms=Ql=1/0),ig=[],fh(c,Hf),a=ig.length){for(ig.sort(PGe),l=1,f=[h=ig[0]];l<a;++l)Boe(h,(d=ig[l])[0])||Boe(h,d[1])?(Ec(h[0],d[1])>Ec(h[0],h[1])&&(h[1]=d[1]),Ec(d[0],h[1])>Ec(h[0],h[1])&&(h[0]=d[0])):f.push(h=d);for(p=-1/0,l=0,h=f[a=f.length-1];l<=a;h=d,++l)(g=Ec(h[1],(d=f[l])[0]))>p&&(p=g,Ms=d[0],Qs=h[1])}return ig=Uf=null,Ms===1/0||Ql===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ms,Ql],[Qs,Mc]]}var Mw,gM,mM,vM,yM,_M,bM,CM,H8,$8,W8,Voe,zoe,pl,gl,ml,ph={sphere:ks,point:G8,lineStart:Uoe,lineEnd:Hoe,polygonStart:function(){ph.lineStart=LGe,ph.lineEnd=BGe},polygonEnd:function(){ph.lineStart=Uoe,ph.lineEnd=Hoe}};function G8(c,l){c*=Xn;var a=Bn(l*=Xn);Ew(a*Bn(c),a*Dn(c),Dn(l))}function Ew(c,l,a){++Mw,mM+=(c-mM)/Mw,vM+=(l-vM)/Mw,yM+=(a-yM)/Mw}function Uoe(){ph.point=FGe}function FGe(c,l){c*=Xn;var a=Bn(l*=Xn);pl=a*Bn(c),gl=a*Dn(c),ml=Dn(l),ph.point=NGe,Ew(pl,gl,ml)}function NGe(c,l){c*=Xn;var a=Bn(l*=Xn),h=a*Bn(c),d=a*Dn(c),f=Dn(l),p=dl(Yo((p=gl*f-ml*d)*p+(p=ml*h-pl*f)*p+(p=pl*d-gl*h)*p),pl*h+gl*d+ml*f);gM+=p,_M+=p*(pl+(pl=h)),bM+=p*(gl+(gl=d)),CM+=p*(ml+(ml=f)),Ew(pl,gl,ml)}function Hoe(){ph.point=G8}function LGe(){ph.point=VGe}function BGe(){$oe(Voe,zoe),ph.point=G8}function VGe(c,l){Voe=c,zoe=l,c*=Xn,l*=Xn,ph.point=$oe;var a=Bn(l);pl=a*Bn(c),gl=a*Dn(c),ml=Dn(l),Ew(pl,gl,ml)}function $oe(c,l){c*=Xn;var a=Bn(l*=Xn),h=a*Bn(c),d=a*Dn(c),f=Dn(l),p=gl*f-ml*d,g=ml*h-pl*f,m=pl*d-gl*h,v=P8(p,g,m),y=fl(v),_=v&&-y/v;H8.add(_*p),$8.add(_*g),W8.add(_*m),gM+=y,_M+=y*(pl+(pl=h)),bM+=y*(gl+(gl=d)),CM+=y*(ml+(ml=f)),Ew(pl,gl,ml)}function zGe(c){Mw=gM=mM=vM=yM=_M=bM=CM=0,H8=new Po,$8=new Po,W8=new Po,fh(c,ph);var l=+H8,a=+$8,h=+W8,d=P8(l,a,h);return d<Dw&&(l=_M,a=bM,h=CM,gM<Zn&&(l=mM,a=vM,h=yM),(d=P8(l,a,h))<Dw)?[NaN,NaN]:[dl(a,l)*jr,fl(h/d)*jr]}function U_(c){return function(){return c}}function Q8(c,l){function a(h,d){return h=c(h,d),l(h[0],h[1])}return c.invert&&l.invert&&(a.invert=function(h,d){return(h=l.invert(h,d))&&c.invert(h[0],h[1])}),a}function j8(c,l){return[or(c)>Qi?c+Math.round(-c/hl)*hl:c,l]}function q8(c,l,a){return(c%=hl)?l||a?Q8(Goe(c),Qoe(l,a)):Goe(c):l||a?Qoe(l,a):j8}function Woe(c){return function(l,a){return[(l+=c)>Qi?l-hl:l<-Qi?l+hl:l,a]}}function Goe(c){var l=Woe(c);return l.invert=Woe(-c),l}function Qoe(c,l){var a=Bn(c),h=Dn(c),d=Bn(l),f=Dn(l);function p(g,m){var v=Bn(m),y=Bn(g)*v,_=Dn(g)*v,b=Dn(m),C=b*a+y*h;return[dl(_*d-C*f,y*a-b*h),fl(C*d+_*f)]}return p.invert=function(g,m){var v=Bn(m),y=Bn(g)*v,_=Dn(g)*v,b=Dn(m),C=b*d-_*f;return[dl(_*d+b*f,y*a+C*h),fl(C*a-y*h)]},p}function joe(c){function l(a){return(a=c(a[0]*Xn,a[1]*Xn))[0]*=jr,a[1]*=jr,a}return c=q8(c[0]*Xn,c[1]*Xn,c.length>2?c[2]*Xn:0),l.invert=function(a){return(a=c.invert(a[0]*Xn,a[1]*Xn))[0]*=jr,a[1]*=jr,a},l}function qoe(c,l,a,h,d,f){if(a){var p=Bn(l),g=Dn(l),m=h*a;null==d?(d=l+h*hl,f=l-m/2):(d=Zoe(p,d),f=Zoe(p,f),(h>0?d<f:d>f)&&(d+=h*hl));for(var v,y=d;h>0?y>f:y<f;y-=m)v=hM([p,-g*Bn(y),-g*Dn(y)]),c.point(v[0],v[1])}}function Zoe(c,l){(l=C0(l))[0]-=c,pM(l);var a=Soe(-l[1]);return((-l[2]<0?-a:a)+hl-Zn)%hl}function UGe(){var h,d,c=U_([0,0]),l=U_(90),a=U_(6),f={point:function p(m,v){h.push(m=d(m,v)),m[0]*=jr,m[1]*=jr}};function g(){var m=c.apply(this,arguments),v=l.apply(this,arguments)*Xn,y=a.apply(this,arguments)*Xn;return h=[],d=q8(-m[0]*Xn,-m[1]*Xn,0).invert,qoe(f,v,y,1),m={type:"Polygon",coordinates:[h]},h=d=null,m}return g.center=function(m){return arguments.length?(c="function"==typeof m?m:U_([+m[0],+m[1]]),g):c},g.radius=function(m){return arguments.length?(l="function"==typeof m?m:U_(+m),g):l},g.precision=function(m){return arguments.length?(a="function"==typeof m?m:U_(+m),g):a},g}function Xoe(){var l,c=[];return{point:function(a,h,d){l.push([a,h,d])},lineStart:function(){c.push(l=[])},lineEnd:ks,rejoin:function(){c.length>1&&c.push(c.pop().concat(c.shift()))},result:function(){var a=c;return c=[],l=null,a}}}function xM(c,l){return or(c[0]-l[0])<Zn&&or(c[1]-l[1])<Zn}function wM(c,l,a,h){this.x=c,this.z=l,this.o=a,this.e=h,this.v=!1,this.n=this.p=null}function Yoe(c,l,a,h,d){var g,m,f=[],p=[];if(c.forEach(function(x){if(!((S=x.length-1)<=0)){var S,O,w=x[0],T=x[S];if(xM(w,T)){if(!w[2]&&!T[2]){for(d.lineStart(),g=0;g<S;++g)d.point((w=x[g])[0],w[1]);return void d.lineEnd()}T[0]+=2*Zn}f.push(O=new wM(w,x,null,!0)),p.push(O.o=new wM(w,null,O,!1)),f.push(O=new wM(T,x,null,!1)),p.push(O.o=new wM(T,null,O,!0))}}),f.length){for(p.sort(l),Koe(f),Koe(p),g=0,m=p.length;g<m;++g)p[g].e=a=!a;for(var y,_,v=f[0];;){for(var b=v,C=!0;b.v;)if((b=b.n)===v)return;y=b.z,d.lineStart();do{if(b.v=b.o.v=!0,b.e){if(C)for(g=0,m=y.length;g<m;++g)d.point((_=y[g])[0],_[1]);else h(b.x,b.n.x,1,d);b=b.n}else{if(C)for(g=(y=b.p.z).length-1;g>=0;--g)d.point((_=y[g])[0],_[1]);else h(b.x,b.p.x,-1,d);b=b.p}y=(b=b.o).z,C=!C}while(!b.v);d.lineEnd()}}}function Koe(c){if(l=c.length){for(var l,d,a=0,h=c[0];++a<l;)h.n=d=c[a],d.p=h,h=d;h.n=d=c[0],d.p=h}}function Z8(c){return or(c[0])<=Qi?c[0]:vu(c[0])*((or(c[0])+Qi)%hl-Qi)}function Joe(c,l){var a=Z8(l),h=l[1],d=Dn(h),f=[Dn(a),-Bn(a),0],p=0,g=0,m=new Po;1===d?h=Gs+Zn:-1===d&&(h=-Gs-Zn);for(var v=0,y=c.length;v<y;++v)if(b=(_=c[v]).length)for(var _,b,C=_[b-1],x=Z8(C),S=C[1]/2+sM,w=Dn(S),T=Bn(S),O=0;O<b;++O,x=D,w=A,T=L,C=k){var k=_[O],D=Z8(k),M=k[1]/2+sM,A=Dn(M),L=Bn(M),E=D-x,V=E>=0?1:-1,z=V*E,U=z>Qi,Z=w*A;if(m.add(dl(Z*V*Dn(z),T*L+Z*Bn(z))),p+=U?E+V*hl:E,U^x>=a^D>=a){var Y=V_(C0(C),C0(k));pM(Y);var N=V_(f,Y);pM(N);var $=(U^E>=0?-1:1)*fl(N[2]);(h>$||h===$&&(Y[0]||Y[1]))&&(g+=U^E>=0?1:-1)}}return(p<-Zn||p<Zn&&m<-Dw)^1&g}function eae(c,l,a,h){return function(d){var v,y,_,f=l(d),p=Xoe(),g=l(p),m=!1,b={point:C,lineStart:S,lineEnd:w,polygonStart:function(){b.point=T,b.lineStart=O,b.lineEnd=k,y=[],v=[]},polygonEnd:function(){b.point=C,b.lineStart=S,b.lineEnd=w,y=eB(y);var D=Joe(v,h);y.length?(m||(d.polygonStart(),m=!0),Yoe(y,$Ge,D,a,d)):D&&(m||(d.polygonStart(),m=!0),d.lineStart(),a(null,null,1,d),d.lineEnd()),m&&(d.polygonEnd(),m=!1),y=v=null},sphere:function(){d.polygonStart(),d.lineStart(),a(null,null,1,d),d.lineEnd(),d.polygonEnd()}};function C(D,M){c(D,M)&&d.point(D,M)}function x(D,M){f.point(D,M)}function S(){b.point=x,f.lineStart()}function w(){b.point=C,f.lineEnd()}function T(D,M){_.push([D,M]),g.point(D,M)}function O(){g.lineStart(),_=[]}function k(){T(_[0][0],_[0][1]),g.lineEnd();var A,E,V,z,D=g.clean(),M=p.result(),L=M.length;if(_.pop(),v.push(_),_=null,L){if(1&D){if((E=(V=M[0]).length-1)>0){for(m||(d.polygonStart(),m=!0),d.lineStart(),A=0;A<E;++A)d.point((z=V[A])[0],z[1]);d.lineEnd()}return}L>1&&2&D&&M.push(M.pop().concat(M.shift())),y.push(M.filter(HGe))}}return b}}function HGe(c){return c.length>1}function $Ge(c,l){return((c=c.x)[0]<0?c[1]-Gs-Zn:Gs-c[1])-((l=l.x)[0]<0?l[1]-Gs-Zn:Gs-l[1])}j8.invert=j8;const X8=eae(function(){return!0},function WGe(c){var d,l=NaN,a=NaN,h=NaN;return{lineStart:function(){c.lineStart(),d=1},point:function(f,p){var g=f>0?Qi:-Qi,m=or(f-l);or(m-Qi)<Zn?(c.point(l,a=(a+p)/2>0?Gs:-Gs),c.point(h,a),c.lineEnd(),c.lineStart(),c.point(g,a),c.point(f,a),d=0):h!==g&&m>=Qi&&(or(l-h)<Zn&&(l-=h*Zn),or(f-g)<Zn&&(f-=g*Zn),a=function GGe(c,l,a,h){var d,f,p=Dn(c-a);return or(p)>Zn?B_((Dn(l)*(f=Bn(h))*Dn(a)-Dn(h)*(d=Bn(l))*Dn(c))/(d*f*p)):(l+h)/2}(l,a,f,p),c.point(h,a),c.lineEnd(),c.lineStart(),c.point(g,a),d=0),c.point(l=f,a=p),h=g},lineEnd:function(){c.lineEnd(),l=a=NaN},clean:function(){return 2-d}}},function QGe(c,l,a,h){var d;if(null==c)h.point(-Qi,d=a*Gs),h.point(0,d),h.point(Qi,d),h.point(Qi,0),h.point(Qi,-d),h.point(0,-d),h.point(-Qi,-d),h.point(-Qi,0),h.point(-Qi,d);else if(or(c[0]-l[0])>Zn){var f=c[0]<l[0]?Qi:-Qi;h.point(-f,d=a*f/2),h.point(0,d),h.point(f,d)}else h.point(l[0],l[1])},[-Qi,-Gs]);function tae(c){var l=Bn(c),a=6*Xn,h=l>0,d=or(l)>Zn;function p(y,_){return Bn(y)*Bn(_)>l}function m(y,_,b){var S=[1,0,0],w=V_(C0(y),C0(_)),T=dM(w,w),O=w[0],k=T-O*O;if(!k)return!b&&y;var D=l*T/k,M=-l*O/k,A=V_(S,w),L=fM(S,D);z8(L,fM(w,M));var V=A,z=dM(L,V),U=dM(V,V),Z=z*z-U*(dM(L,L)-1);if(!(Z<0)){var Y=Yo(Z),N=fM(V,(-z-Y)/U);if(z8(N,L),N=hM(N),!b)return N;var j,$=y[0],H=_[0],G=y[1],W=_[1];H<$&&(j=$,$=H,H=j);var Q=H-$,J=or(Q-Qi)<Zn;if(!J&&W<G&&(j=G,G=W,W=j),J||Q<Zn?J?G+W>0^N[1]<(or(N[0]-$)<Zn?G:W):G<=N[1]&&N[1]<=W:Q>Qi^($<=N[0]&&N[0]<=H)){var ce=fM(V,(-z+Y)/U);return z8(ce,L),[N,hM(ce)]}}}function v(y,_){var b=h?c:Qi-c,C=0;return y<-b?C|=1:y>b&&(C|=2),_<-b?C|=4:_>b&&(C|=8),C}return eae(p,function g(y){var _,b,C,x,S;return{lineStart:function(){x=C=!1,S=1},point:function(w,T){var k,O=[w,T],D=p(w,T),M=h?D?0:v(w,T):D?v(w+(w<0?Qi:-Qi),T):0;if(!_&&(x=C=D)&&y.lineStart(),D!==C&&(!(k=m(_,O))||xM(_,k)||xM(O,k))&&(O[2]=1),D!==C)S=0,D?(y.lineStart(),k=m(O,_),y.point(k[0],k[1])):(k=m(_,O),y.point(k[0],k[1],2),y.lineEnd()),_=k;else if(d&&_&&h^D){var A;!(M&b)&&(A=m(O,_,!0))&&(S=0,h?(y.lineStart(),y.point(A[0][0],A[0][1]),y.point(A[1][0],A[1][1]),y.lineEnd()):(y.point(A[1][0],A[1][1]),y.lineEnd(),y.lineStart(),y.point(A[0][0],A[0][1],3)))}D&&(!_||!xM(_,O))&&y.point(O[0],O[1]),_=O,C=D,b=M},lineEnd:function(){C&&y.lineEnd(),_=null},clean:function(){return S|(x&&C)<<1}}},function f(y,_,b,C){qoe(C,c,a,b,y,_)},h?[0,-c]:[-Qi,c-Qi])}var Aw=1e9,SM=-Aw;function TM(c,l,a,h){function d(v,y){return c<=v&&v<=a&&l<=y&&y<=h}function f(v,y,_,b){var C=0,x=0;if(null==v||(C=p(v,_))!==(x=p(y,_))||m(v,y)<0^_>0)do{b.point(0===C||3===C?c:a,C>1?h:l)}while((C=(C+_+4)%4)!==x);else b.point(y[0],y[1])}function p(v,y){return or(v[0]-c)<Zn?y>0?0:3:or(v[0]-a)<Zn?y>0?2:1:or(v[1]-l)<Zn?y>0?1:0:y>0?3:2}function g(v,y){return m(v.x,y.x)}function m(v,y){var _=p(v,1),b=p(y,1);return _!==b?_-b:0===_?y[1]-v[1]:1===_?v[0]-y[0]:2===_?v[1]-y[1]:y[0]-v[0]}return function(v){var b,C,x,S,w,T,O,k,D,M,A,y=v,_=Xoe(),L={point:E,lineStart:function Z(){L.point=N,C&&C.push(x=[]),M=!0,D=!1,O=k=NaN},lineEnd:function Y(){b&&(N(S,w),T&&D&&_.rejoin(),b.push(_.result())),L.point=E,D&&y.lineEnd()},polygonStart:function z(){y=_,b=[],C=[],A=!0},polygonEnd:function U(){var $=function V(){for(var $=0,H=0,G=C.length;H<G;++H)for(var te,ce,W=C[H],j=1,Q=W.length,J=W[0],ae=J[0],Se=J[1];j<Q;++j)te=ae,ce=Se,ae=(J=W[j])[0],Se=J[1],ce<=h?Se>h&&(ae-te)*(h-ce)>(Se-ce)*(c-te)&&++$:Se<=h&&(ae-te)*(h-ce)<(Se-ce)*(c-te)&&--$;return $}(),H=A&&$,G=(b=eB(b)).length;(H||G)&&(v.polygonStart(),H&&(v.lineStart(),f(null,null,1,v),v.lineEnd()),G&&Yoe(b,g,$,f,v),v.polygonEnd()),y=v,b=C=x=null}};function E($,H){d($,H)&&y.point($,H)}function N($,H){var G=d($,H);if(C&&x.push([$,H]),M)S=$,w=H,T=G,M=!1,G&&(y.lineStart(),y.point($,H));else if(G&&D)y.point($,H);else{var W=[O=Math.max(SM,Math.min(Aw,O)),k=Math.max(SM,Math.min(Aw,k))],j=[$=Math.max(SM,Math.min(Aw,$)),H=Math.max(SM,Math.min(Aw,H))];!function jGe(c,l,a,h,d,f){var x,p=c[0],g=c[1],y=0,_=1,b=l[0]-p,C=l[1]-g;if(x=a-p,b||!(x>0)){if(x/=b,b<0){if(x<y)return;x<_&&(_=x)}else if(b>0){if(x>_)return;x>y&&(y=x)}if(x=d-p,b||!(x<0)){if(x/=b,b<0){if(x>_)return;x>y&&(y=x)}else if(b>0){if(x<y)return;x<_&&(_=x)}if(x=h-g,C||!(x>0)){if(x/=C,C<0){if(x<y)return;x<_&&(_=x)}else if(C>0){if(x>_)return;x>y&&(y=x)}if(x=f-g,C||!(x<0)){if(x/=C,C<0){if(x>_)return;x>y&&(y=x)}else if(C>0){if(x<y)return;x<_&&(_=x)}return y>0&&(c[0]=p+y*b,c[1]=g+y*C),_<1&&(l[0]=p+_*b,l[1]=g+_*C),!0}}}}}(W,j,c,l,a,h)?G&&(y.lineStart(),y.point($,H),A=!1):(D||(y.lineStart(),y.point(W[0],W[1])),y.point(j[0],j[1]),G||y.lineEnd(),A=!1)}O=$,k=H,D=G}return L}}function qGe(){var d,f,p,c=0,l=0,a=960,h=500;return p={stream:function(g){return d&&f===g?d:d=TM(c,l,a,h)(f=g)},extent:function(g){return arguments.length?(c=+g[0][0],l=+g[0][1],a=+g[1][0],h=+g[1][1],d=f=null,p):[[c,l],[a,h]]}}}var Y8,K8,OM,DM,H_={sphere:ks,point:ks,lineStart:function ZGe(){H_.point=YGe,H_.lineEnd=XGe},lineEnd:ks,polygonStart:ks,polygonEnd:ks};function XGe(){H_.point=H_.lineEnd=ks}function YGe(c,l){K8=c*=Xn,OM=Dn(l*=Xn),DM=Bn(l),H_.point=KGe}function KGe(c,l){c*=Xn;var a=Dn(l*=Xn),h=Bn(l),d=or(c-K8),f=Bn(d),g=h*Dn(d),m=DM*a-OM*h*f,v=OM*a+DM*h*f;Y8.add(dl(Yo(g*g+m*m),v)),K8=c,OM=a,DM=h}function nae(c){return Y8=new Po,fh(c,H_),+Y8}var J8=[null,null],JGe={type:"LineString",coordinates:J8};function kM(c,l){return J8[0]=c,J8[1]=l,nae(JGe)}var iae={Feature:function(c,l){return MM(c.geometry,l)},FeatureCollection:function(c,l){for(var a=c.features,h=-1,d=a.length;++h<d;)if(MM(a[h].geometry,l))return!0;return!1}},rae={Sphere:function(){return!0},Point:function(c,l){return sae(c.coordinates,l)},MultiPoint:function(c,l){for(var a=c.coordinates,h=-1,d=a.length;++h<d;)if(sae(a[h],l))return!0;return!1},LineString:function(c,l){return oae(c.coordinates,l)},MultiLineString:function(c,l){for(var a=c.coordinates,h=-1,d=a.length;++h<d;)if(oae(a[h],l))return!0;return!1},Polygon:function(c,l){return aae(c.coordinates,l)},MultiPolygon:function(c,l){for(var a=c.coordinates,h=-1,d=a.length;++h<d;)if(aae(a[h],l))return!0;return!1},GeometryCollection:function(c,l){for(var a=c.geometries,h=-1,d=a.length;++h<d;)if(MM(a[h],l))return!0;return!1}};function MM(c,l){return!(!c||!rae.hasOwnProperty(c.type))&&rae[c.type](c,l)}function sae(c,l){return 0===kM(c,l)}function oae(c,l){for(var a,h,d,f=0,p=c.length;f<p;f++){if(0===(h=kM(c[f],l))||f>0&&(d=kM(c[f],c[f-1]))>0&&a<=d&&h<=d&&(a+h-d)*(1-Math.pow((a-h)/d,2))<Dw*d)return!0;a=h}return!1}function aae(c,l){return!!Joe(c.map(eQe),lae(l))}function eQe(c){return(c=c.map(lae)).pop(),c}function lae(c){return[c[0]*Xn,c[1]*Xn]}function tQe(c,l){return(c&&iae.hasOwnProperty(c.type)?iae[c.type]:MM)(c,l)}function cae(c,l,a){var h=Cc(c,l-Zn,a).concat(l);return function(d){return h.map(function(f){return[d,f]})}}function uae(c,l,a){var h=Cc(c,l-Zn,a).concat(l);return function(d){return h.map(function(f){return[f,d]})}}function hae(){var c,l,a,h,d,f,p,g,b,C,x,S,m=10,v=m,y=90,_=360,w=2.5;function T(){return{type:"MultiLineString",coordinates:O()}}function O(){return Cc(oM(h/y)*y,a,y).map(x).concat(Cc(oM(g/_)*_,p,_).map(S)).concat(Cc(oM(l/m)*m,c,m).filter(function(k){return or(k%y)>Zn}).map(b)).concat(Cc(oM(f/v)*v,d,v).filter(function(k){return or(k%_)>Zn}).map(C))}return T.lines=function(){return O().map(function(k){return{type:"LineString",coordinates:k}})},T.outline=function(){return{type:"Polygon",coordinates:[x(h).concat(S(p).slice(1),x(a).reverse().slice(1),S(g).reverse().slice(1))]}},T.extent=function(k){return arguments.length?T.extentMajor(k).extentMinor(k):T.extentMinor()},T.extentMajor=function(k){return arguments.length?(g=+k[0][1],p=+k[1][1],(h=+k[0][0])>(a=+k[1][0])&&(k=h,h=a,a=k),g>p&&(k=g,g=p,p=k),T.precision(w)):[[h,g],[a,p]]},T.extentMinor=function(k){return arguments.length?(f=+k[0][1],d=+k[1][1],(l=+k[0][0])>(c=+k[1][0])&&(k=l,l=c,c=k),f>d&&(k=f,f=d,d=k),T.precision(w)):[[l,f],[c,d]]},T.step=function(k){return arguments.length?T.stepMajor(k).stepMinor(k):T.stepMinor()},T.stepMajor=function(k){return arguments.length?(y=+k[0],_=+k[1],T):[y,_]},T.stepMinor=function(k){return arguments.length?(m=+k[0],v=+k[1],T):[m,v]},T.precision=function(k){return arguments.length?(w=+k,b=cae(f,d,90),C=uae(l,c,w),x=cae(g,p,90),S=uae(h,a,w),T):w},T.extentMajor([[-180,-90+Zn],[180,90-Zn]]).extentMinor([[-180,-80-Zn],[180,80+Zn]])}function nQe(){return hae()()}function iQe(c,l){var a=c[0]*Xn,h=c[1]*Xn,d=l[0]*Xn,f=l[1]*Xn,p=Bn(h),g=Dn(h),m=Bn(f),v=Dn(f),y=p*Bn(a),_=p*Dn(a),b=m*Bn(d),C=m*Dn(d),x=2*fl(Yo(Toe(f-h)+p*m*Toe(d-a))),S=Dn(x),w=x?function(T){var O=Dn(T*=x)/S,k=Dn(x-T)/S,D=k*y+O*b,M=k*_+O*C,A=k*g+O*v;return[dl(M,D)*jr,dl(A,Yo(D*D+M*M))*jr]}:function(){return[a*jr,h*jr]};return w.distance=x,w}const Iw=c=>c;var dae,fae,nV,iV,eV=new Po,tV=new Po,rg={point:ks,lineStart:ks,lineEnd:ks,polygonStart:function(){rg.lineStart=rQe,rg.lineEnd=oQe},polygonEnd:function(){rg.lineStart=rg.lineEnd=rg.point=ks,eV.add(or(tV)),tV=new Po},result:function(){var c=eV/2;return eV=new Po,c}};function rQe(){rg.point=sQe}function sQe(c,l){rg.point=pae,dae=nV=c,fae=iV=l}function pae(c,l){tV.add(iV*c-nV*l),nV=c,iV=l}function oQe(){pae(dae,fae)}const gae=rg;var $_=1/0,EM=$_,Pw=-$_,AM=Pw,aQe={point:function lQe(c,l){c<$_&&($_=c),c>Pw&&(Pw=c),l<EM&&(EM=l),l>AM&&(AM=l)},lineStart:ks,lineEnd:ks,polygonStart:ks,polygonEnd:ks,result:function(){var c=[[$_,EM],[Pw,AM]];return Pw=AM=-(EM=$_=1/0),c}};const IM=aQe;var mae,vae,yd,_d,rV=0,sV=0,Rw=0,PM=0,RM=0,W_=0,oV=0,aV=0,Fw=0,gh={point:w0,lineStart:yae,lineEnd:_ae,polygonStart:function(){gh.lineStart=hQe,gh.lineEnd=dQe},polygonEnd:function(){gh.point=w0,gh.lineStart=yae,gh.lineEnd=_ae},result:function(){var c=Fw?[oV/Fw,aV/Fw]:W_?[PM/W_,RM/W_]:Rw?[rV/Rw,sV/Rw]:[NaN,NaN];return rV=sV=Rw=PM=RM=W_=oV=aV=Fw=0,c}};function w0(c,l){rV+=c,sV+=l,++Rw}function yae(){gh.point=cQe}function cQe(c,l){gh.point=uQe,w0(yd=c,_d=l)}function uQe(c,l){var a=c-yd,h=l-_d,d=Yo(a*a+h*h);PM+=d*(yd+c)/2,RM+=d*(_d+l)/2,W_+=d,w0(yd=c,_d=l)}function _ae(){gh.point=w0}function hQe(){gh.point=fQe}function dQe(){bae(mae,vae)}function fQe(c,l){gh.point=bae,w0(mae=yd=c,vae=_d=l)}function bae(c,l){var a=c-yd,h=l-_d,d=Yo(a*a+h*h);PM+=d*(yd+c)/2,RM+=d*(_d+l)/2,W_+=d,oV+=(d=_d*c-yd*l)*(yd+c),aV+=d*(_d+l),Fw+=3*d,w0(yd=c,_d=l)}const Cae=gh;function xae(c){this._context=c}xae.prototype={_radius:4.5,pointRadius:function(c){return this._radius=c,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(c,l){switch(this._point){case 0:this._context.moveTo(c,l),this._point=1;break;case 1:this._context.lineTo(c,l);break;default:this._context.moveTo(c+this._radius,l),this._context.arc(c,l,this._radius,0,hl)}},result:ks};var cV,wae,Sae,Nw,Lw,lV=new Po,FM={point:ks,lineStart:function(){FM.point=pQe},lineEnd:function(){cV&&Tae(wae,Sae),FM.point=ks},polygonStart:function(){cV=!0},polygonEnd:function(){cV=null},result:function(){var c=+lV;return lV=new Po,c}};function pQe(c,l){FM.point=Tae,wae=Nw=c,Sae=Lw=l}function Tae(c,l){lV.add(Yo((Nw-=c)*Nw+(Lw-=l)*Lw)),Nw=c,Lw=l}const Oae=FM;function Dae(){this._string=[]}function kae(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}function gQe(c,l){var h,d,a=4.5;function f(p){return p&&("function"==typeof a&&d.pointRadius(+a.apply(this,arguments)),fh(p,h(d))),d.result()}return f.area=function(p){return fh(p,h(gae)),gae.result()},f.measure=function(p){return fh(p,h(Oae)),Oae.result()},f.bounds=function(p){return fh(p,h(IM)),IM.result()},f.centroid=function(p){return fh(p,h(Cae)),Cae.result()},f.projection=function(p){return arguments.length?(h=null==p?(c=null,Iw):(c=p).stream,f):c},f.context=function(p){return arguments.length?(d=null==p?(l=null,new Dae):new xae(l=p),"function"!=typeof a&&d.pointRadius(a),f):l},f.pointRadius=function(p){return arguments.length?(a="function"==typeof p?p:(d.pointRadius(+p),+p),f):a},f.projection(c).context(l)}function mQe(c){return{stream:Bw(c)}}function Bw(c){return function(l){var a=new uV;for(var h in c)a[h]=c[h];return a.stream=l,a}}function uV(){}function hV(c,l,a){var h=c.clipExtent&&c.clipExtent();return c.scale(150).translate([0,0]),null!=h&&c.clipExtent(null),fh(a,c.stream(IM)),l(IM.result()),null!=h&&c.clipExtent(h),c}function NM(c,l,a){return hV(c,function(h){var d=l[1][0]-l[0][0],f=l[1][1]-l[0][1],p=Math.min(d/(h[1][0]-h[0][0]),f/(h[1][1]-h[0][1])),g=+l[0][0]+(d-p*(h[1][0]+h[0][0]))/2,m=+l[0][1]+(f-p*(h[1][1]+h[0][1]))/2;c.scale(150*p).translate([g,m])},a)}function dV(c,l,a){return NM(c,[[0,0],l],a)}function fV(c,l,a){return hV(c,function(h){var d=+l,f=d/(h[1][0]-h[0][0]),p=(d-f*(h[1][0]+h[0][0]))/2,g=-f*h[0][1];c.scale(150*f).translate([p,g])},a)}function pV(c,l,a){return hV(c,function(h){var d=+l,f=d/(h[1][1]-h[0][1]),p=-f*h[0][0],g=(d-f*(h[1][1]+h[0][1]))/2;c.scale(150*f).translate([p,g])},a)}Dae.prototype={_radius:4.5,_circle:kae(4.5),pointRadius:function(c){return(c=+c)!==this._radius&&(this._radius=c,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(c,l){switch(this._point){case 0:this._string.push("M",c,",",l),this._point=1;break;case 1:this._string.push("L",c,",",l);break;default:null==this._circle&&(this._circle=kae(this._radius)),this._string.push("M",c,",",l,this._circle)}},result:function(){if(this._string.length){var c=this._string.join("");return this._string=[],c}return null}},uV.prototype={constructor:uV,point:function(c,l){this.stream.point(c,l)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var vQe=Bn(30*Xn);function Eae(c,l){return+l?function _Qe(c,l){function a(h,d,f,p,g,m,v,y,_,b,C,x,S,w){var T=v-h,O=y-d,k=T*T+O*O;if(k>4*l&&S--){var D=p+b,M=g+C,A=m+x,L=Yo(D*D+M*M+A*A),E=fl(A/=L),V=or(or(A)-1)<Zn||or(f-_)<Zn?(f+_)/2:dl(M,D),z=c(V,E),U=z[0],Z=z[1],Y=U-h,N=Z-d,$=O*Y-T*N;($*$/k>l||or((T*Y+O*N)/k-.5)>.3||p*b+g*C+m*x<vQe)&&(a(h,d,f,p,g,m,U,Z,V,D/=L,M/=L,A,S,w),w.point(U,Z),a(U,Z,V,D,M,A,v,y,_,b,C,x,S,w))}}return function(h){var d,f,p,g,m,v,y,_,b,C,x,S,w={point:T,lineStart:O,lineEnd:D,polygonStart:function(){h.polygonStart(),w.lineStart=M},polygonEnd:function(){h.polygonEnd(),w.lineStart=O}};function T(E,V){E=c(E,V),h.point(E[0],E[1])}function O(){_=NaN,w.point=k,h.lineStart()}function k(E,V){var z=C0([E,V]),U=c(E,V);a(_,b,y,C,x,S,_=U[0],b=U[1],y=E,C=z[0],x=z[1],S=z[2],16,h),h.point(_,b)}function D(){w.point=T,h.lineEnd()}function M(){O(),w.point=A,w.lineEnd=L}function A(E,V){k(d=E,V),f=_,p=b,g=C,m=x,v=S,w.point=k}function L(){a(_,b,y,C,x,S,f,p,d,g,m,v,16,h),w.lineEnd=D,D()}return w}}(c,l):function yQe(c){return Bw({point:function(l,a){l=c(l,a),this.stream.point(l[0],l[1])}})}(c)}var bQe=Bw({point:function(c,l){this.stream.point(c*Xn,l*Xn)}});function Aae(c,l,a,h,d,f){if(!f)return function xQe(c,l,a,h,d){function f(p,g){return[l+c*(p*=h),a-c*(g*=d)]}return f.invert=function(p,g){return[(p-l)/c*h,(a-g)/c*d]},f}(c,l,a,h,d);var p=Bn(f),g=Dn(f),m=p*c,v=g*c,y=p/c,_=g/c,b=(g*a-p*l)/c,C=(g*l+p*a)/c;function x(S,w){return[m*(S*=h)-v*(w*=d)+l,a-v*S-m*w]}return x.invert=function(S,w){return[h*(y*S-_*w+b),d*(C-_*S-y*w)]},x}function bd(c){return gV(function(){return c})()}function gV(c){var l,y,T,O,k,A,L,E,V,z,a=150,h=480,d=250,f=0,p=0,g=0,m=0,v=0,_=0,b=1,C=1,x=null,S=X8,w=null,D=Iw,M=.5;function U($){return E($[0]*Xn,$[1]*Xn)}function Z($){return($=E.invert($[0],$[1]))&&[$[0]*jr,$[1]*jr]}function Y(){var $=Aae(a,0,0,b,C,_).apply(null,l(f,p)),H=Aae(a,h-$[0],d-$[1],b,C,_);return y=q8(g,m,v),L=Q8(l,H),E=Q8(y,L),A=Eae(L,M),N()}function N(){return V=z=null,U}return U.stream=function($){return V&&z===$?V:V=bQe(function CQe(c){return Bw({point:function(l,a){var h=c(l,a);return this.stream.point(h[0],h[1])}})}(y)(S(A(D(z=$)))))},U.preclip=function($){return arguments.length?(S=$,x=void 0,N()):S},U.postclip=function($){return arguments.length?(D=$,w=T=O=k=null,N()):D},U.clipAngle=function($){return arguments.length?(S=+$?tae(x=$*Xn):(x=null,X8),N()):x*jr},U.clipExtent=function($){return arguments.length?(D=null==$?(w=T=O=k=null,Iw):TM(w=+$[0][0],T=+$[0][1],O=+$[1][0],k=+$[1][1]),N()):null==w?null:[[w,T],[O,k]]},U.scale=function($){return arguments.length?(a=+$,Y()):a},U.translate=function($){return arguments.length?(h=+$[0],d=+$[1],Y()):[h,d]},U.center=function($){return arguments.length?(f=$[0]%360*Xn,p=$[1]%360*Xn,Y()):[f*jr,p*jr]},U.rotate=function($){return arguments.length?(g=$[0]%360*Xn,m=$[1]%360*Xn,v=$.length>2?$[2]%360*Xn:0,Y()):[g*jr,m*jr,v*jr]},U.angle=function($){return arguments.length?(_=$%360*Xn,Y()):_*jr},U.reflectX=function($){return arguments.length?(b=$?-1:1,Y()):b<0},U.reflectY=function($){return arguments.length?(C=$?-1:1,Y()):C<0},U.precision=function($){return arguments.length?(A=Eae(L,M=$*$),N()):Yo(M)},U.fitExtent=function($,H){return NM(U,$,H)},U.fitSize=function($,H){return dV(U,$,H)},U.fitWidth=function($,H){return fV(U,$,H)},U.fitHeight=function($,H){return pV(U,$,H)},function(){return l=c.apply(this,arguments),U.invert=l.invert&&Z,Y()}}function mV(c){var l=0,a=Qi/3,h=gV(c),d=h(l,a);return d.parallels=function(f){return arguments.length?h(l=f[0]*Xn,a=f[1]*Xn):[l*jr,a*jr]},d}function Iae(c,l){var a=Dn(c),h=(a+Dn(l))/2;if(or(h)<Zn)return function wQe(c){var l=Bn(c);function a(h,d){return[h*l,Dn(d)/l]}return a.invert=function(h,d){return[h/l,fl(d*l)]},a}(c);var d=1+a*(2*h-a),f=Yo(d)/h;function p(g,m){var v=Yo(d-2*h*Dn(m))/h;return[v*Dn(g*=h),f-v*Bn(g)]}return p.invert=function(g,m){var v=f-m,y=dl(g,or(v))*vu(v);return v*h<0&&(y-=Qi*vu(g)*vu(v)),[y/h,fl((d-(g*g+v*v)*h*h)/(2*h))]},p}function LM(){return mV(Iae).scale(155.424).center([0,33.6442])}function Pae(){return LM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function TQe(){var c,l,h,f,g,m,a=Pae(),d=LM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p=LM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),v={point:function(b,C){m=[b,C]}};function y(b){var C=b[0],x=b[1];return m=null,h.point(C,x),m||(f.point(C,x),m)||(g.point(C,x),m)}function _(){return c=l=null,y}return y.invert=function(b){var C=a.scale(),x=a.translate(),S=(b[0]-x[0])/C,w=(b[1]-x[1])/C;return(w>=.12&&w<.234&&S>=-.425&&S<-.214?d:w>=.166&&w<.234&&S>=-.214&&S<-.115?p:a).invert(b)},y.stream=function(b){return c&&l===b?c:c=function SQe(c){var l=c.length;return{point:function(a,h){for(var d=-1;++d<l;)c[d].point(a,h)},sphere:function(){for(var a=-1;++a<l;)c[a].sphere()},lineStart:function(){for(var a=-1;++a<l;)c[a].lineStart()},lineEnd:function(){for(var a=-1;++a<l;)c[a].lineEnd()},polygonStart:function(){for(var a=-1;++a<l;)c[a].polygonStart()},polygonEnd:function(){for(var a=-1;++a<l;)c[a].polygonEnd()}}}([a.stream(l=b),d.stream(b),p.stream(b)])},y.precision=function(b){return arguments.length?(a.precision(b),d.precision(b),p.precision(b),_()):a.precision()},y.scale=function(b){return arguments.length?(a.scale(b),d.scale(.35*b),p.scale(b),y.translate(a.translate())):a.scale()},y.translate=function(b){if(!arguments.length)return a.translate();var C=a.scale(),x=+b[0],S=+b[1];return h=a.translate(b).clipExtent([[x-.455*C,S-.238*C],[x+.455*C,S+.238*C]]).stream(v),f=d.translate([x-.307*C,S+.201*C]).clipExtent([[x-.425*C+Zn,S+.12*C+Zn],[x-.214*C-Zn,S+.234*C-Zn]]).stream(v),g=p.translate([x-.205*C,S+.212*C]).clipExtent([[x-.214*C+Zn,S+.166*C+Zn],[x-.115*C-Zn,S+.234*C-Zn]]).stream(v),_()},y.fitExtent=function(b,C){return NM(y,b,C)},y.fitSize=function(b,C){return dV(y,b,C)},y.fitWidth=function(b,C){return fV(y,b,C)},y.fitHeight=function(b,C){return pV(y,b,C)},y.scale(1070)}function Rae(c){return function(l,a){var h=Bn(l),d=Bn(a),f=c(h*d);return f===1/0?[2,0]:[f*d*Dn(l),f*Dn(a)]}}function Vw(c){return function(l,a){var h=Yo(l*l+a*a),d=c(h),f=Dn(d),p=Bn(d);return[dl(l*f,h*p),fl(h&&a*f/h)]}}var vV=Rae(function(c){return Yo(2/(1+c))});function OQe(){return bd(vV).scale(124.75).clipAngle(179.999)}vV.invert=Vw(function(c){return 2*fl(c/2)});var yV=Rae(function(c){return(c=Soe(c))&&c/Dn(c)});function DQe(){return bd(yV).scale(79.4188).clipAngle(179.999)}function zw(c,l){return[c,aM(F8((Gs+l)/2))]}function kQe(){return Fae(zw).scale(961/hl)}function Fae(c){var g,m,v,l=bd(c),a=l.center,h=l.scale,d=l.translate,f=l.clipExtent,p=null;function y(){var _=Qi*h(),b=l(joe(l.rotate()).invert([0,0]));return f(null==p?[[b[0]-_,b[1]-_],[b[0]+_,b[1]+_]]:c===zw?[[Math.max(b[0]-_,p),g],[Math.min(b[0]+_,m),v]]:[[p,Math.max(b[1]-_,g)],[m,Math.min(b[1]+_,v)]])}return l.scale=function(_){return arguments.length?(h(_),y()):h()},l.translate=function(_){return arguments.length?(d(_),y()):d()},l.center=function(_){return arguments.length?(a(_),y()):a()},l.clipExtent=function(_){return arguments.length?(null==_?p=g=m=v=null:(p=+_[0][0],g=+_[0][1],m=+_[1][0],v=+_[1][1]),y()):null==p?null:[[p,g],[m,v]]},y()}function BM(c){return F8((Gs+c)/2)}function Nae(c,l){var a=Bn(c),h=c===l?Dn(c):aM(a/Bn(l))/aM(BM(l)/BM(c)),d=a*R8(BM(c),h)/h;if(!h)return zw;function f(p,g){d>0?g<-Gs+Zn&&(g=-Gs+Zn):g>Gs-Zn&&(g=Gs-Zn);var m=d/R8(BM(g),h);return[m*Dn(h*p),d-m*Bn(h*p)]}return f.invert=function(p,g){var m=d-g,v=vu(h)*Yo(p*p+m*m),y=dl(p,or(m))*vu(m);return m*h<0&&(y-=Qi*vu(p)*vu(m)),[y/h,2*B_(R8(d/v,1/h))-Gs]},f}function MQe(){return mV(Nae).scale(109.5).parallels([30,30])}function Uw(c,l){return[c,l]}function EQe(){return bd(Uw).scale(152.63)}function Lae(c,l){var a=Bn(c),h=c===l?Dn(c):(a-Bn(l))/(l-c),d=a/h+c;if(or(h)<Zn)return Uw;function f(p,g){var m=d-g,v=h*p;return[m*Dn(v),d-m*Bn(v)]}return f.invert=function(p,g){var m=d-g,v=dl(p,or(m))*vu(m);return m*h<0&&(v-=Qi*vu(p)*vu(m)),[v/h,d-vu(h)*Yo(p*p+m*m)]},f}function AQe(){return mV(Lae).scale(131.154).center([0,13.9389])}yV.invert=Vw(function(c){return c}),zw.invert=function(c,l){return[c,2*B_(woe(l))-Gs]},Uw.invert=Uw;var Hw=1.340264,$w=-.081106,Ww=893e-6,Gw=.003796,VM=Yo(3)/2;function _V(c,l){var a=fl(VM*Dn(l)),h=a*a,d=h*h*h;return[c*Bn(a)/(VM*(Hw+3*$w*h+d*(7*Ww+9*Gw*h))),a*(Hw+$w*h+d*(Ww+Gw*h))]}function PQe(){return bd(_V).scale(177.158)}function bV(c,l){var a=Bn(l),h=Bn(c)*a;return[a*Dn(c)/h,Dn(l)/h]}function RQe(){return bd(bV).scale(144.049).clipAngle(60)}function FQe(){var p,g,v,y,_,w,T,c=1,l=0,a=0,h=1,d=1,f=0,m=null,b=1,C=1,x=Bw({point:function(D,M){var A=k([D,M]);this.stream.point(A[0],A[1])}}),S=Iw;function O(){return b=c*h,C=c*d,w=T=null,k}function k(D){var M=D[0]*b,A=D[1]*C;if(f){var L=A*p-M*g;M=M*p+A*g,A=L}return[M+l,A+a]}return k.invert=function(D){var M=D[0]-l,A=D[1]-a;if(f){var L=A*p+M*g;M=M*p-A*g,A=L}return[M/b,A/C]},k.stream=function(D){return w&&T===D?w:w=x(S(T=D))},k.postclip=function(D){return arguments.length?(S=D,m=v=y=_=null,O()):S},k.clipExtent=function(D){return arguments.length?(S=null==D?(m=v=y=_=null,Iw):TM(m=+D[0][0],v=+D[0][1],y=+D[1][0],_=+D[1][1]),O()):null==m?null:[[m,v],[y,_]]},k.scale=function(D){return arguments.length?(c=+D,O()):c},k.translate=function(D){return arguments.length?(l=+D[0],a=+D[1],O()):[l,a]},k.angle=function(D){return arguments.length?(g=Dn(f=D%360*Xn),p=Bn(f),O()):f*jr},k.reflectX=function(D){return arguments.length?(h=D?-1:1,O()):h<0},k.reflectY=function(D){return arguments.length?(d=D?-1:1,O()):d<0},k.fitExtent=function(D,M){return NM(k,D,M)},k.fitSize=function(D,M){return dV(k,D,M)},k.fitWidth=function(D,M){return fV(k,D,M)},k.fitHeight=function(D,M){return pV(k,D,M)},k}function CV(c,l){var a=l*l,h=a*a;return[c*(.8707-.131979*a+h*(h*(.003971*a-.001529*h)-.013791)),l*(1.007226+a*(.015085+h*(.028874*a-.044475-.005916*h)))]}function NQe(){return bd(CV).scale(175.295)}function xV(c,l){return[Bn(l)*Dn(c),Dn(l)]}function LQe(){return bd(xV).scale(249.5).clipAngle(90+Zn)}function wV(c,l){var a=Bn(l),h=1+Bn(c)*a;return[a*Dn(c)/h,Dn(l)/h]}function BQe(){return bd(wV).scale(250).clipAngle(142)}function SV(c,l){return[aM(F8((Gs+l)/2)),-c]}function VQe(){var c=Fae(SV),l=c.center,a=c.rotate;return c.center=function(h){return arguments.length?l([-h[1],h[0]]):[(h=l())[1],-h[0]]},c.rotate=function(h){return arguments.length?a([h[0],h[1],h.length>2?h[2]+90:90]):[(h=a())[0],h[1],h[2]-90]},a([0,0,90]).scale(159.155)}function zQe(c,l){return c.parent===l.parent?1:2}function HQe(c,l){return c+l.x}function WQe(c,l){return Math.max(c,l.y)}function jQe(){var c=zQe,l=1,a=1,h=!1;function d(f){var p,g=0;f.eachAfter(function(b){var C=b.children;C?(b.x=function UQe(c){return c.reduce(HQe,0)/c.length}(C),b.y=function $Qe(c){return 1+c.reduce(WQe,0)}(C)):(b.x=p?g+=c(b,p):0,b.y=0,p=b)});var m=function GQe(c){for(var l;l=c.children;)c=l[0];return c}(f),v=function QQe(c){for(var l;l=c.children;)c=l[l.length-1];return c}(f),y=m.x-c(m,v)/2,_=v.x+c(v,m)/2;return f.eachAfter(h?function(b){b.x=(b.x-f.x)*l,b.y=(f.y-b.y)*a}:function(b){b.x=(b.x-y)/(_-y)*l,b.y=(1-(f.y?b.y/f.y:1))*a})}return d.separation=function(f){return arguments.length?(c=f,d):c},d.size=function(f){return arguments.length?(h=!1,l=+f[0],a=+f[1],d):h?null:[l,a]},d.nodeSize=function(f){return arguments.length?(h=!0,l=+f[0],a=+f[1],d):h?[l,a]:null},d}function qQe(c){var l=0,a=c.children,h=a&&a.length;if(h)for(;--h>=0;)l+=a[h].value;else l=1;c.value=l}function TV(c,l){c instanceof Map?(c=[void 0,c],void 0===l&&(l=hje)):void 0===l&&(l=uje);for(var h,f,p,g,m,a=new S0(c),d=[a];h=d.pop();)if((p=l(h.data))&&(m=(p=Array.from(p)).length))for(h.children=p,g=m-1;g>=0;--g)d.push(f=p[g]=new S0(p[g])),f.parent=h,f.depth=h.depth+1;return a.eachBefore(Bae)}function uje(c){return c.children}function hje(c){return Array.isArray(c)?c[1]:null}function dje(c){void 0!==c.data.value&&(c.value=c.data.value),c.data=c.data.data}function Bae(c){var l=0;do{c.height=l}while((c=c.parent)&&c.height<++l)}function S0(c){this.data=c,this.depth=this.height=0,this.parent=null}function Vae(c){for(var d,f,l=0,a=(c=function pje(c){for(var a,h,l=c.length;l;)h=Math.random()*l--|0,a=c[l],c[l]=c[h],c[h]=a;return c}(Array.from(c))).length,h=[];l<a;)d=c[l],f&&zae(f,d)?++l:(f=mje(h=gje(h,d)),l=0);return f}function gje(c,l){var a,h;if(OV(l,c))return[l];for(a=0;a<c.length;++a)if(zM(l,c[a])&&OV(Qw(c[a],l),c))return[c[a],l];for(a=0;a<c.length-1;++a)for(h=a+1;h<c.length;++h)if(zM(Qw(c[a],c[h]),l)&&zM(Qw(c[a],l),c[h])&&zM(Qw(c[h],l),c[a])&&OV(Uae(c[a],c[h],l),c))return[c[a],c[h],l];throw new Error}function zM(c,l){var a=c.r-l.r,h=l.x-c.x,d=l.y-c.y;return a<0||a*a<h*h+d*d}function zae(c,l){var a=c.r-l.r+1e-9*Math.max(c.r,l.r,1),h=l.x-c.x,d=l.y-c.y;return a>0&&a*a>h*h+d*d}function OV(c,l){for(var a=0;a<l.length;++a)if(!zae(c,l[a]))return!1;return!0}function mje(c){switch(c.length){case 1:return function vje(c){return{x:c.x,y:c.y,r:c.r}}(c[0]);case 2:return Qw(c[0],c[1]);case 3:return Uae(c[0],c[1],c[2])}}function Qw(c,l){var a=c.x,h=c.y,d=c.r,f=l.x,p=l.y,g=l.r,m=f-a,v=p-h,y=g-d,_=Math.sqrt(m*m+v*v);return{x:(a+f+m/_*y)/2,y:(h+p+v/_*y)/2,r:(_+d+g)/2}}function Uae(c,l,a){var h=c.x,d=c.y,f=c.r,p=l.x,g=l.y,m=l.r,v=a.x,y=a.y,_=a.r,b=h-p,C=h-v,x=d-g,S=d-y,w=m-f,T=_-f,O=h*h+d*d-f*f,k=O-p*p-g*g+m*m,D=O-v*v-y*y+_*_,M=C*x-b*S,A=(x*D-S*k)/(2*M)-h,L=(S*w-x*T)/M,E=(C*k-b*D)/(2*M)-d,V=(b*T-C*w)/M,z=L*L+V*V-1,U=2*(f+A*L+E*V),Z=A*A+E*E-f*f,Y=-(z?(U+Math.sqrt(U*U-4*z*Z))/(2*z):Z/U);return{x:h+A+L*Y,y:d+E+V*Y,r:Y}}function Hae(c,l,a){var d,f,g,m,h=c.x-l.x,p=c.y-l.y,v=h*h+p*p;v?(f=l.r+a.r,m=c.r+a.r,(f*=f)>(m*=m)?(d=(v+m-f)/(2*v),g=Math.sqrt(Math.max(0,m/v-d*d)),a.x=c.x-d*h-g*p,a.y=c.y-d*p+g*h):(d=(v+f-m)/(2*v),g=Math.sqrt(Math.max(0,f/v-d*d)),a.x=l.x+d*h-g*p,a.y=l.y+d*p+g*h)):(a.x=l.x+a.r,a.y=l.y)}function $ae(c,l){var a=c.r+l.r-1e-6,h=l.x-c.x,d=l.y-c.y;return a>0&&a*a>h*h+d*d}function Wae(c){var l=c._,a=c.next._,h=l.r+a.r,d=(l.x*a.r+a.x*l.r)/h,f=(l.y*a.r+a.y*l.r)/h;return d*d+f*f}function UM(c){this._=c,this.next=null,this.previous=null}function Gae(c){if(!(d=(c=function fje(c){return"object"==typeof c&&"length"in c?c:Array.from(c)}(c)).length))return 0;var l,a,h,d,f,p,g,m,v,y,_;if((l=c[0]).x=0,l.y=0,!(d>1))return l.r;if(l.x=-(a=c[1]).r,a.x=l.r,a.y=0,!(d>2))return l.r+a.r;Hae(a,l,h=c[2]),l=new UM(l),a=new UM(a),h=new UM(h),l.next=h.previous=a,a.next=l.previous=h,h.next=a.previous=l;e:for(g=3;g<d;++g){Hae(l._,a._,h=c[g]),h=new UM(h),m=a.next,v=l.previous,y=a._.r,_=l._.r;do{if(y<=_){if($ae(m._,h._)){l.next=a=m,a.previous=l,--g;continue e}y+=m._.r,m=m.next}else{if($ae(v._,h._)){(l=v).next=a,a.previous=l,--g;continue e}_+=v._.r,v=v.previous}}while(m!==v.next);for(h.previous=l,h.next=a,l.next=a.previous=a=h,f=Wae(l);(h=h.next)!==a;)(p=Wae(h))<f&&(l=h,f=p);a=l.next}for(l=[a._],h=a;(h=h.next)!==a;)l.push(h._);for(h=Vae(l),g=0;g<d;++g)(l=c[g]).x-=h.x,l.y-=h.y;return h.r}function yje(c){return Gae(c),c}function HM(c){return null==c?null:Qae(c)}function Qae(c){if("function"!=typeof c)throw new Error;return c}function T0(){return 0}function G_(c){return function(){return c}}function _je(c){return Math.sqrt(c.value)}function bje(){var c=null,l=1,a=1,h=T0;function d(f){return f.x=l/2,f.y=a/2,c?f.eachBefore(jae(c)).eachAfter(DV(h,.5)).eachBefore(qae(1)):f.eachBefore(jae(_je)).eachAfter(DV(T0,1)).eachAfter(DV(h,f.r/Math.min(l,a))).eachBefore(qae(Math.min(l,a)/(2*f.r))),f}return d.radius=function(f){return arguments.length?(c=HM(f),d):c},d.size=function(f){return arguments.length?(l=+f[0],a=+f[1],d):[l,a]},d.padding=function(f){return arguments.length?(h="function"==typeof f?f:G_(+f),d):h},d}function jae(c){return function(l){l.children||(l.r=Math.max(0,+c(l)||0))}}function DV(c,l){return function(a){if(h=a.children){var h,d,g,f=h.length,p=c(a)*l||0;if(p)for(d=0;d<f;++d)h[d].r+=p;if(g=Gae(h),p)for(d=0;d<f;++d)h[d].r-=p;a.r=g+p}}}function qae(c){return function(l){var a=l.parent;l.r*=c,a&&(l.x=a.x+c*l.x,l.y=a.y+c*l.y)}}function Zae(c){c.x0=Math.round(c.x0),c.y0=Math.round(c.y0),c.x1=Math.round(c.x1),c.y1=Math.round(c.y1)}function jw(c,l,a,h,d){for(var p,f=c.children,g=-1,m=f.length,v=c.value&&(h-l)/c.value;++g<m;)(p=f[g]).y0=a,p.y1=d,p.x0=l,p.x1=l+=p.value*v}function Cje(){var c=1,l=1,a=0,h=!1;function d(p){var g=p.height+1;return p.x0=p.y0=a,p.x1=c,p.y1=l/g,p.eachBefore(function f(p,g){return function(m){m.children&&jw(m,m.x0,p*(m.depth+1)/g,m.x1,p*(m.depth+2)/g);var v=m.x0,y=m.y0,_=m.x1-a,b=m.y1-a;_<v&&(v=_=(v+_)/2),b<y&&(y=b=(y+b)/2),m.x0=v,m.y0=y,m.x1=_,m.y1=b}}(l,g)),h&&p.eachBefore(Zae),p}return d.round=function(p){return arguments.length?(h=!!p,d):h},d.size=function(p){return arguments.length?(c=+p[0],l=+p[1],d):[c,l]},d.padding=function(p){return arguments.length?(a=+p,d):a},d}_V.invert=function(c,l){for(var p,a=l,h=a*a,d=h*h*h,f=0;f<12&&(d=(h=(a-=p=(a*(Hw+$w*h+d*(Ww+Gw*h))-l)/(Hw+3*$w*h+d*(7*Ww+9*Gw*h)))*a)*h*h,!(or(p)<Dw));++f);return[VM*c*(Hw+3*$w*h+d*(7*Ww+9*Gw*h))/Bn(a),fl(Dn(a)/VM)]},bV.invert=Vw(B_),CV.invert=function(c,l){var d,a=l,h=25;do{var f=a*a,p=f*f;a-=d=(a*(1.007226+f*(.015085+p*(.028874*f-.044475-.005916*p)))-l)/(1.007226+f*(.045255+p*(.259866*f-.311325-.005916*11*p)))}while(or(d)>Zn&&--h>0);return[c/(.8707+(f=a*a)*(f*(f*f*f*(.003971-.001529*f)-.013791)-.131979)),a]},xV.invert=Vw(fl),wV.invert=Vw(function(c){return 2*B_(c)}),SV.invert=function(c,l){return[-l,2*B_(woe(c))-Gs]},S0.prototype=TV.prototype={constructor:S0,count:function ZQe(){return this.eachAfter(qQe)},each:function XQe(c,l){let a=-1;for(const h of this)c.call(l,h,++a,this);return this},eachAfter:function KQe(c,l){for(var f,p,g,a=this,h=[a],d=[],m=-1;a=h.pop();)if(d.push(a),f=a.children)for(p=0,g=f.length;p<g;++p)h.push(f[p]);for(;a=d.pop();)c.call(l,a,++m,this);return this},eachBefore:function YQe(c,l){for(var d,f,a=this,h=[a],p=-1;a=h.pop();)if(c.call(l,a,++p,this),d=a.children)for(f=d.length-1;f>=0;--f)h.push(d[f]);return this},find:function JQe(c,l){let a=-1;for(const h of this)if(c.call(l,h,++a,this))return h},sum:function eje(c){return this.eachAfter(function(l){for(var a=+c(l.data)||0,h=l.children,d=h&&h.length;--d>=0;)a+=h[d].value;l.value=a})},sort:function tje(c){return this.eachBefore(function(l){l.children&&l.children.sort(c)})},path:function nje(c){for(var l=this,a=function ije(c,l){if(c===l)return c;var a=c.ancestors(),h=l.ancestors(),d=null;for(c=a.pop(),l=h.pop();c===l;)d=c,c=a.pop(),l=h.pop();return d}(l,c),h=[l];l!==a;)h.push(l=l.parent);for(var d=h.length;c!==a;)h.splice(d,0,c),c=c.parent;return h},ancestors:function rje(){for(var c=this,l=[c];c=c.parent;)l.push(c);return l},descendants:function sje(){return Array.from(this)},leaves:function oje(){var c=[];return this.eachBefore(function(l){l.children||c.push(l)}),c},links:function aje(){var c=this,l=[];return c.each(function(a){a!==c&&l.push({source:a.parent,target:a})}),l},copy:function cje(){return TV(this).eachBefore(dje)},[Symbol.iterator]:function*lje(){var l,h,d,f,c=this,a=[c];do{for(l=a.reverse(),a=[];c=l.pop();)if(yield c,h=c.children)for(d=0,f=h.length;d<f;++d)a.push(h[d])}while(a.length)}};var xje={depth:-1},Xae={},kV={};function wje(c){return c.id}function Sje(c){return c.parentId}function Tje(){var a,c=wje,l=Sje;function h(d){var m,v,y,_,b,C,x,S,f=Array.from(d),p=c,g=l,w=new Map;if(null!=a){const T=f.map((D,M)=>function Oje(c){let l=(c=`${c}`).length;return MV(c,l-1)&&!MV(c,l-2)&&(c=c.slice(0,-1)),"/"===c[0]?c:`/${c}`}(a(D,M,d))),O=T.map(Yae),k=new Set(T).add("");for(const D of O)k.has(D)||(k.add(D),T.push(D),O.push(Yae(D)),f.push(kV));p=(D,M)=>T[M],g=(D,M)=>O[M]}for(y=0,m=f.length;y<m;++y)C=f[y]=new S0(v=f[y]),null!=(x=p(v,y,d))&&(x+="")&&(S=C.id=x,w.set(S,w.has(S)?Xae:C)),null!=(x=g(v,y,d))&&(x+="")&&(C.parent=x);for(y=0;y<m;++y)if(x=(C=f[y]).parent){if(!(b=w.get(x)))throw new Error("missing: "+x);if(b===Xae)throw new Error("ambiguous: "+x);b.children?b.children.push(C):b.children=[C],C.parent=b}else{if(_)throw new Error("multiple roots");_=C}if(!_)throw new Error("no root");if(null!=a){for(;_.data===kV&&1===_.children.length;)_=_.children[0],--m;for(let T=f.length-1;T>=0&&(C=f[T]).data===kV;--T)C.data=null}if(_.parent=xje,_.eachBefore(function(T){T.depth=T.parent.depth+1,--m}).eachBefore(Bae),_.parent=null,m>0)throw new Error("cycle");return _}return h.id=function(d){return arguments.length?(c=HM(d),h):c},h.parentId=function(d){return arguments.length?(l=HM(d),h):l},h.path=function(d){return arguments.length?(a=HM(d),h):a},h}function Yae(c){let l=c.length;if(l<2)return"";for(;--l>1&&!MV(c,l););return c.slice(0,l)}function MV(c,l){if("/"===c[l]){let a=0;for(;l>0&&"\\"===c[--l];)++a;if(0==(1&a))return!0}return!1}function Dje(c,l){return c.parent===l.parent?1:2}function EV(c){var l=c.children;return l?l[0]:c.t}function AV(c){var l=c.children;return l?l[l.length-1]:c.t}function kje(c,l,a){var h=a/(l.i-c.i);l.c-=h,l.s+=a,c.c+=h,l.z+=a,l.m+=a}function Eje(c,l,a){return c.a.parent===l.parent?c.a:a}function $M(c,l){this._=c,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=l}function Ije(){var c=Dje,l=1,a=1,h=null;function d(v){var y=function Aje(c){for(var a,d,f,p,g,l=new $M(c,0),h=[l];a=h.pop();)if(f=a._.children)for(a.children=new Array(g=f.length),p=g-1;p>=0;--p)h.push(d=a.children[p]=new $M(f[p],p)),d.parent=a;return(l.parent=new $M(null,0)).children=[l],l}(v);if(y.eachAfter(f),y.parent.m=-y.z,y.eachBefore(p),h)v.eachBefore(m);else{var _=v,b=v,C=v;v.eachBefore(function(O){O.x<_.x&&(_=O),O.x>b.x&&(b=O),O.depth>C.depth&&(C=O)});var x=_===b?1:c(_,b)/2,S=x-_.x,w=l/(b.x+x+S),T=a/(C.depth||1);v.eachBefore(function(O){O.x=(O.x+S)*w,O.y=O.depth*T})}return v}function f(v){var y=v.children,_=v.parent.children,b=v.i?_[v.i-1]:null;if(y){!function Mje(c){for(var f,l=0,a=0,h=c.children,d=h.length;--d>=0;)(f=h[d]).z+=l,f.m+=l,l+=f.s+(a+=f.c)}(v);var C=(y[0].z+y[y.length-1].z)/2;b?(v.z=b.z+c(v._,b._),v.m=v.z-C):v.z=C}else b&&(v.z=b.z+c(v._,b._));v.parent.A=function g(v,y,_){if(y){for(var D,b=v,C=v,x=y,S=b.parent.children[0],w=b.m,T=C.m,O=x.m,k=S.m;x=AV(x),b=EV(b),x&&b;)S=EV(S),(C=AV(C)).a=v,(D=x.z+O-b.z-w+c(x._,b._))>0&&(kje(Eje(x,v,_),v,D),w+=D,T+=D),O+=x.m,w+=b.m,k+=S.m,T+=C.m;x&&!AV(C)&&(C.t=x,C.m+=O-T),b&&!EV(S)&&(S.t=b,S.m+=w-k,_=v)}return _}(v,b,v.parent.A||_[0])}function p(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function m(v){v.x*=l,v.y=v.depth*a}return d.separation=function(v){return arguments.length?(c=v,d):c},d.size=function(v){return arguments.length?(h=!1,l=+v[0],a=+v[1],d):h?null:[l,a]},d.nodeSize=function(v){return arguments.length?(h=!0,l=+v[0],a=+v[1],d):h?[l,a]:null},d}function WM(c,l,a,h,d){for(var p,f=c.children,g=-1,m=f.length,v=c.value&&(d-a)/c.value;++g<m;)(p=f[g]).x0=l,p.x1=h,p.y0=a,p.y1=a+=p.value*v}$M.prototype=Object.create(S0.prototype);var Kae=(1+Math.sqrt(5))/2;function Jae(c,l,a,h,d,f){for(var m,v,C,x,w,T,O,k,D,M,A,p=[],g=l.children,y=0,_=0,b=g.length,S=l.value;y<b;){C=d-a,x=f-h;do{w=g[_++].value}while(!w&&_<b);for(T=O=w,A=w*w*(M=Math.max(x/C,C/x)/(S*c)),D=Math.max(O/A,A/T);_<b;++_){if(w+=v=g[_].value,v<T&&(T=v),v>O&&(O=v),A=w*w*M,(k=Math.max(O/A,A/T))>D){w-=v;break}D=k}p.push(m={value:w,dice:C<x,children:g.slice(y,_)}),m.dice?jw(m,a,h,d,S?h+=x*w/S:f):WM(m,a,h,S?a+=C*w/S:d,f),S-=w,y=_}return p}const ele=function c(l){function a(h,d,f,p,g){Jae(l,h,d,f,p,g)}return a.ratio=function(h){return c((h=+h)>1?h:1)},a}(Kae);function Pje(){var c=ele,l=!1,a=1,h=1,d=[0],f=T0,p=T0,g=T0,m=T0,v=T0;function y(b){return b.x0=b.y0=0,b.x1=a,b.y1=h,b.eachBefore(_),d=[0],l&&b.eachBefore(Zae),b}function _(b){var C=d[b.depth],x=b.x0+C,S=b.y0+C,w=b.x1-C,T=b.y1-C;w<x&&(x=w=(x+w)/2),T<S&&(S=T=(S+T)/2),b.x0=x,b.y0=S,b.x1=w,b.y1=T,b.children&&(C=d[b.depth+1]=f(b)/2,x+=v(b)-C,S+=p(b)-C,(w-=g(b)-C)<x&&(x=w=(x+w)/2),(T-=m(b)-C)<S&&(S=T=(S+T)/2),c(b,x,S,w,T))}return y.round=function(b){return arguments.length?(l=!!b,y):l},y.size=function(b){return arguments.length?(a=+b[0],h=+b[1],y):[a,h]},y.tile=function(b){return arguments.length?(c=Qae(b),y):c},y.padding=function(b){return arguments.length?y.paddingInner(b).paddingOuter(b):y.paddingInner()},y.paddingInner=function(b){return arguments.length?(f="function"==typeof b?b:G_(+b),y):f},y.paddingOuter=function(b){return arguments.length?y.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):y.paddingTop()},y.paddingTop=function(b){return arguments.length?(p="function"==typeof b?b:G_(+b),y):p},y.paddingRight=function(b){return arguments.length?(g="function"==typeof b?b:G_(+b),y):g},y.paddingBottom=function(b){return arguments.length?(m="function"==typeof b?b:G_(+b),y):m},y.paddingLeft=function(b){return arguments.length?(v="function"==typeof b?b:G_(+b),y):v},y}function Rje(c,l,a,h,d){var p,m,f=c.children,g=f.length,v=new Array(g+1);for(v[0]=m=p=0;p<g;++p)v[p+1]=m+=f[p].value;!function y(_,b,C,x,S,w,T){if(_>=b-1){var O=f[_];return O.x0=x,O.y0=S,O.x1=w,void(O.y1=T)}for(var k=v[_],D=C/2+k,M=_+1,A=b-1;M<A;){var L=M+A>>>1;v[L]<D?M=L+1:A=L}D-v[M-1]<v[M]-D&&_+1<M&&--M;var E=v[M]-k,V=C-E;if(w-x>T-S){var z=C?(x*V+w*E)/C:w;y(_,M,E,x,S,z,T),y(M,b,V,z,S,w,T)}else{var U=C?(S*V+T*E)/C:T;y(_,M,E,x,S,w,U),y(M,b,V,x,U,w,T)}}(0,g,c.value,l,a,h,d)}function Fje(c,l,a,h,d){(1&c.depth?WM:jw)(c,l,a,h,d)}const Nje=function c(l){function a(h,d,f,p,g){if((m=h._squarify)&&m.ratio===l)for(var m,v,y,_,C,b=-1,x=m.length,S=h.value;++b<x;){for(y=(v=m[b]).children,_=v.value=0,C=y.length;_<C;++_)v.value+=y[_].value;v.dice?jw(v,d,f,p,S?f+=(g-f)*v.value/S:g):WM(v,d,f,S?d+=(p-d)*v.value/S:p,g),S-=v.value}else h._squarify=m=Jae(l,h,d,f,p,g),m.ratio=l}return a.ratio=function(h){return c((h=+h)>1?h:1)},a}(Kae);function Lje(c){var l=c.length;return function(a){return c[Math.max(0,Math.min(l-1,Math.floor(a*l)))]}}function Bje(c,l){var a=xk(+c,+l);return function(h){var d=a(h);return d-360*Math.floor(d/360)}}function GM(c,l){return c=+c,l=+l,function(a){return Math.round(c*(1-a)+l*a)}}function tle(c){return((c=Math.exp(c))+1/c)/2}const nle=function c(l,a,h){function d(f,p){var w,T,g=f[0],m=f[1],v=f[2],b=p[2],C=p[0]-g,x=p[1]-m,S=C*C+x*x;if(S<1e-12)T=Math.log(b/v)/l,w=function(L){return[g+L*C,m+L*x,v*Math.exp(l*L*T)]};else{var O=Math.sqrt(S),k=(b*b-v*v+h*S)/(2*v*a*O),D=(b*b-v*v-h*S)/(2*b*a*O),M=Math.log(Math.sqrt(k*k+1)-k),A=Math.log(Math.sqrt(D*D+1)-D);T=(A-M)/l,w=function(L){var E=L*T,V=tle(M),z=v/(a*O)*(V*function Uje(c){return((c=Math.exp(2*c))-1)/(c+1)}(l*E+M)-function zje(c){return((c=Math.exp(c))-1/c)/2}(M));return[g+z*C,m+z*x,v*V/tle(l*E+M)]}}return w.duration=1e3*T*l/Math.SQRT2,w}return d.rho=function(f){var p=Math.max(.001,+f),g=p*p;return c(p,g,g*g)},d}(Math.SQRT2,2,4);function ile(c){return function(l,a){var h=c((l=bk(l)).h,(a=bk(a)).h),d=Xo(l.s,a.s),f=Xo(l.l,a.l),p=Xo(l.opacity,a.opacity);return function(g){return l.h=h(g),l.s=d(g),l.l=f(g),l.opacity=p(g),l+""}}}const Hje=ile(xk);var $je=ile(Xo);function Wje(c,l){var a=Xo((c=Fk(c)).l,(l=Fk(l)).l),h=Xo(c.a,l.a),d=Xo(c.b,l.b),f=Xo(c.opacity,l.opacity);return function(p){return c.l=a(p),c.a=h(p),c.b=d(p),c.opacity=f(p),c+""}}function rle(c){return function(l,a){var h=c((l=Nk(l)).h,(a=Nk(a)).h),d=Xo(l.c,a.c),f=Xo(l.l,a.l),p=Xo(l.opacity,a.opacity);return function(g){return l.h=h(g),l.c=d(g),l.l=f(g),l.opacity=p(g),l+""}}}const Gje=rle(xk);var Qje=rle(Xo);function sle(c){return function l(a){function h(d,f){var p=c((d=uh(d)).h,(f=uh(f)).h),g=Xo(d.s,f.s),m=Xo(d.l,f.l),v=Xo(d.opacity,f.opacity);return function(y){return d.h=p(y),d.s=g(y),d.l=m(Math.pow(y,a)),d.opacity=v(y),d+""}}return a=+a,h.gamma=l,h}(1)}const jje=sle(xk);var QM=sle(Xo);function ole(c,l){void 0===l&&(l=c,c=qp);for(var a=0,h=l.length-1,d=l[0],f=new Array(h<0?0:h);a<h;)f[a]=c(d,d=l[++a]);return function(p){var g=Math.max(0,Math.min(h-1,Math.floor(p*=h)));return f[g](p-g)}}function qje(c,l){for(var a=new Array(l),h=0;h<l;++h)a[h]=c(h/(l-1));return a}function Zje(c){for(var h,l=-1,a=c.length,d=c[a-1],f=0;++l<a;)f+=(h=d)[1]*(d=c[l])[0]-h[0]*d[1];return f/2}function Xje(c){for(var f,g,l=-1,a=c.length,h=0,d=0,p=c[a-1],m=0;++l<a;)m+=g=(f=p)[0]*(p=c[l])[1]-p[0]*f[1],h+=(f[0]+p[0])*g,d+=(f[1]+p[1])*g;return[h/(m*=3),d/m]}function Yje(c,l,a){return(l[0]-c[0])*(a[1]-c[1])-(l[1]-c[1])*(a[0]-c[0])}function Kje(c,l){return c[0]-l[0]||c[1]-l[1]}function ale(c){const l=c.length,a=[0,1];let d,h=2;for(d=2;d<l;++d){for(;h>1&&Yje(c[a[h-2]],c[a[h-1]],c[d])<=0;)--h;a[h++]=d}return a.slice(0,h)}function Jje(c){if((a=c.length)<3)return null;var l,a,h=new Array(a),d=new Array(a);for(l=0;l<a;++l)h[l]=[+c[l][0],+c[l][1],l];for(h.sort(Kje),l=0;l<a;++l)d[l]=[h[l][0],-h[l][1]];var f=ale(h),p=ale(d),g=p[0]===f[0],m=p[p.length-1]===f[f.length-1],v=[];for(l=f.length-1;l>=0;--l)v.push(c[h[f[l]][2]]);for(l=+g;l<p.length-m;++l)v.push(c[h[p[l]][2]]);return v}function eqe(c,l){for(var m,v,a=c.length,h=c[a-1],d=l[0],f=l[1],p=h[0],g=h[1],y=!1,_=0;_<a;++_)m=(h=c[_])[0],(v=h[1])>f!=g>f&&d<(p-m)*(f-v)/(g-v)+m&&(y=!y),p=m,g=v;return y}function tqe(c){for(var d,f,l=-1,a=c.length,h=c[a-1],p=h[0],g=h[1],m=0;++l<a;)d=p,f=g,d-=p=(h=c[l])[0],f-=g=h[1],m+=Math.hypot(d,f);return m}const ua=Math.random,nqe=function c(l){function a(h,d){return h=null==h?0:+h,d=null==d?1:+d,1===arguments.length?(d=h,h=0):d-=h,function(){return l()*d+h}}return a.source=c,a}(ua),iqe=function c(l){function a(h,d){return arguments.length<2&&(d=h,h=0),h=Math.floor(h),d=Math.floor(d)-h,function(){return Math.floor(l()*d+h)}}return a.source=c,a}(ua),IV=function c(l){function a(h,d){var f,p;return h=null==h?0:+h,d=null==d?1:+d,function(){var g;if(null!=f)g=f,f=null;else do{f=2*l()-1,g=2*l()-1,p=f*f+g*g}while(!p||p>1);return h+d*g*Math.sqrt(-2*Math.log(p)/p)}}return a.source=c,a}(ua),rqe=function c(l){var a=IV.source(l);function h(){var d=a.apply(this,arguments);return function(){return Math.exp(d())}}return h.source=c,h}(ua),lle=function c(l){function a(h){return(h=+h)<=0?()=>0:function(){for(var d=0,f=h;f>1;--f)d+=l();return d+f*l()}}return a.source=c,a}(ua),sqe=function c(l){var a=lle.source(l);function h(d){if(0==(d=+d))return l;var f=a(d);return function(){return f()/d}}return h.source=c,h}(ua),oqe=function c(l){function a(h){return function(){return-Math.log1p(-l())/h}}return a.source=c,a}(ua),aqe=function c(l){function a(h){if((h=+h)<0)throw new RangeError("invalid alpha");return h=1/-h,function(){return Math.pow(1-l(),h)}}return a.source=c,a}(ua),lqe=function c(l){function a(h){if((h=+h)<0||h>1)throw new RangeError("invalid p");return function(){return Math.floor(l()+h)}}return a.source=c,a}(ua),cle=function c(l){function a(h){if((h=+h)<0||h>1)throw new RangeError("invalid p");return 0===h?()=>1/0:1===h?()=>1:(h=Math.log1p(-h),function(){return 1+Math.floor(Math.log1p(-l())/h)})}return a.source=c,a}(ua),PV=function c(l){var a=IV.source(l)();function h(d,f){if((d=+d)<0)throw new RangeError("invalid k");if(0===d)return()=>0;if(f=null==f?1:+f,1===d)return()=>-Math.log1p(-l())*f;var p=(d<1?d+1:d)-1/3,g=1/(3*Math.sqrt(p)),m=d<1?()=>Math.pow(l(),1/d):()=>1;return function(){do{do{var v=a(),y=1+g*v}while(y<=0);y*=y*y;var _=1-l()}while(_>=1-.0331*v*v*v*v&&Math.log(_)>=.5*v*v+p*(1-y+Math.log(y)));return p*y*m()*f}}return h.source=c,h}(ua),ule=function c(l){var a=PV.source(l);function h(d,f){var p=a(d),g=a(f);return function(){var m=p();return 0===m?0:m/(m+g())}}return h.source=c,h}(ua),hle=function c(l){var a=cle.source(l),h=ule.source(l);function d(f,p){return f=+f,(p=+p)>=1?()=>f:p<=0?()=>0:function(){for(var g=0,m=f,v=p;m*v>16&&m*(1-v)>16;){var y=Math.floor((m+1)*v),_=h(y,m-y+1)();_<=v?(g+=y,m-=y,v=(v-_)/(1-_)):(m=y-1,v/=_)}for(var b=v<.5,x=a(b?v:1-v),S=x(),w=0;S<=m;++w)S+=x();return g+(b?w:m-w)}}return d.source=c,d}(ua),cqe=function c(l){function a(h,d,f){var p;return 0==(h=+h)?p=g=>-Math.log(g):(h=1/h,p=g=>Math.pow(g,h)),d=null==d?0:+d,f=null==f?1:+f,function(){return d+f*p(-Math.log1p(-l()))}}return a.source=c,a}(ua),uqe=function c(l){function a(h,d){return h=null==h?0:+h,d=null==d?1:+d,function(){return h+d*Math.tan(Math.PI*l())}}return a.source=c,a}(ua),hqe=function c(l){function a(h,d){return h=null==h?0:+h,d=null==d?1:+d,function(){var f=l();return h+d*Math.log(f/(1-f))}}return a.source=c,a}(ua),dqe=function c(l){var a=PV.source(l),h=hle.source(l);function d(f){return function(){for(var p=0,g=f;g>16;){var m=Math.floor(.875*g),v=a(m)();if(v>g)return p+h(m-1,g/v)();p+=m,g-=v}for(var y=-Math.log1p(-l()),_=0;y<=g;++_)y-=Math.log1p(-l());return p+_}}return d.source=c,d}(ua),dle=1/4294967296;function gqe(c=Math.random()){let l=0|(0<=c&&c<1?c/dle:Math.abs(c));return()=>(l=1664525*l+1013904223|0,dle*(l>>>0))}function yu(c,l){switch(arguments.length){case 0:break;case 1:this.range(c);break;default:this.range(l).domain(c)}return this}function $f(c,l){switch(arguments.length){case 0:break;case 1:"function"==typeof c?this.interpolator(c):this.range(c);break;default:this.domain(c),"function"==typeof l?this.interpolator(l):this.range(l)}return this}const RV=Symbol("implicit");function FV(){var c=new tw,l=[],a=[],h=RV;function d(f){let p=c.get(f);if(void 0===p){if(h!==RV)return h;c.set(f,p=l.push(f)-1)}return a[p%a.length]}return d.domain=function(f){if(!arguments.length)return l.slice();l=[],c=new tw;for(const p of f)c.has(p)||c.set(p,l.push(p)-1);return d},d.range=function(f){return arguments.length?(a=Array.from(f),d):a.slice()},d.unknown=function(f){return arguments.length?(h=f,d):h},d.copy=function(){return FV(l,a).unknown(h)},yu.apply(d,arguments),d}function NV(){var f,p,c=FV().unknown(void 0),l=c.domain,a=c.range,h=0,d=1,g=!1,m=0,v=0,y=.5;function _(){var b=l().length,C=d<h,x=C?d:h,S=C?h:d;f=(S-x)/Math.max(1,b-m+2*v),g&&(f=Math.floor(f)),x+=(S-x-f*(b-m))*y,p=f*(1-m),g&&(x=Math.round(x),p=Math.round(p));var w=Cc(b).map(function(T){return x+f*T});return a(C?w.reverse():w)}return delete c.unknown,c.domain=function(b){return arguments.length?(l(b),_()):l()},c.range=function(b){return arguments.length?([h,d]=b,h=+h,d=+d,_()):[h,d]},c.rangeRound=function(b){return[h,d]=b,h=+h,d=+d,g=!0,_()},c.bandwidth=function(){return p},c.step=function(){return f},c.round=function(b){return arguments.length?(g=!!b,_()):g},c.padding=function(b){return arguments.length?(m=Math.min(1,v=+b),_()):m},c.paddingInner=function(b){return arguments.length?(m=Math.min(1,b),_()):m},c.paddingOuter=function(b){return arguments.length?(v=+b,_()):v},c.align=function(b){return arguments.length?(y=Math.max(0,Math.min(1,b)),_()):y},c.copy=function(){return NV(l(),[h,d]).round(g).paddingInner(m).paddingOuter(v).align(y)},yu.apply(_(),arguments)}function fle(c){var l=c.copy;return c.padding=c.paddingOuter,delete c.paddingInner,delete c.paddingOuter,c.copy=function(){return fle(l())},c}function mqe(){return fle(NV.apply(null,arguments).paddingInner(1))}function jM(c){return+c}var ple=[0,1];function vl(c){return c}function LV(c,l){return(l-=c=+c)?function(a){return(a-c)/l}:function vqe(c){return function(){return c}}(isNaN(l)?NaN:.5)}function _qe(c,l,a){var h=c[0],d=c[1],f=l[0],p=l[1];return d<h?(h=LV(d,h),f=a(p,f)):(h=LV(h,d),f=a(f,p)),function(g){return f(h(g))}}function bqe(c,l,a){var h=Math.min(c.length,l.length)-1,d=new Array(h),f=new Array(h),p=-1;for(c[h]<c[0]&&(c=c.slice().reverse(),l=l.slice().reverse());++p<h;)d[p]=LV(c[p],c[p+1]),f[p]=a(l[p],l[p+1]);return function(g){var m=Jm(c,g,1,h)-1;return f[m](d[m](g))}}function qw(c,l){return l.domain(c.domain()).range(c.range()).interpolate(c.interpolate()).clamp(c.clamp()).unknown(c.unknown())}function qM(){var h,d,f,g,m,v,c=ple,l=ple,a=qp,p=vl;function y(){var b=Math.min(c.length,l.length);return p!==vl&&(p=function yqe(c,l){var a;return c>l&&(a=c,c=l,l=a),function(h){return Math.max(c,Math.min(l,h))}}(c[0],c[b-1])),g=b>2?bqe:_qe,m=v=null,_}function _(b){return null==b||isNaN(b=+b)?f:(m||(m=g(c.map(h),l,a)))(h(p(b)))}return _.invert=function(b){return p(d((v||(v=g(l,c.map(h),mu)))(b)))},_.domain=function(b){return arguments.length?(c=Array.from(b,jM),y()):c.slice()},_.range=function(b){return arguments.length?(l=Array.from(b),y()):l.slice()},_.rangeRound=function(b){return l=Array.from(b),a=GM,y()},_.clamp=function(b){return arguments.length?(p=!!b||vl,y()):p!==vl},_.interpolate=function(b){return arguments.length?(a=b,y()):a},_.unknown=function(b){return arguments.length?(f=b,_):f},function(b,C){return h=b,d=C,y()}}function BV(){return qM()(vl,vl)}function gle(c,l,a,h){var f,d=d_(c,l,a);switch((h=L_(null==h?",f":h)).type){case"s":var p=Math.max(Math.abs(c),Math.abs(l));return null==h.precision&&!isNaN(f=Coe(d,p))&&(h.precision=f),I8(h,p);case"":case"e":case"g":case"p":case"r":null==h.precision&&!isNaN(f=xoe(d,Math.max(Math.abs(c),Math.abs(l))))&&(h.precision=f-("e"===h.type));break;case"f":case"%":null==h.precision&&!isNaN(f=boe(d))&&(h.precision=f-2*("%"===h.type))}return rM(h)}function sg(c){var l=c.domain;return c.ticks=function(a){var h=l();return h_(h[0],h[h.length-1],null==a?10:a)},c.tickFormat=function(a,h){var d=l();return gle(d[0],d[d.length-1],null==a?10:a,h)},c.nice=function(a){null==a&&(a=10);var m,v,h=l(),d=0,f=h.length-1,p=h[d],g=h[f],y=10;for(g<p&&(v=p,p=g,g=v,v=d,d=f,f=v);y-- >0;){if((v=iw(p,g,a))===m)return h[d]=p,h[f]=g,l(h);if(v>0)p=Math.floor(p/v)*v,g=Math.ceil(g/v)*v;else{if(!(v<0))break;p=Math.ceil(p*v)/v,g=Math.floor(g*v)/v}m=v}return c},c}function Q_(){var c=BV();return c.copy=function(){return qw(c,Q_())},yu.apply(c,arguments),sg(c)}function mle(c){var l;function a(h){return null==h||isNaN(h=+h)?l:h}return a.invert=a,a.domain=a.range=function(h){return arguments.length?(c=Array.from(h,jM),a):c.slice()},a.unknown=function(h){return arguments.length?(l=h,a):l},a.copy=function(){return mle(c).unknown(l)},c=arguments.length?Array.from(c,jM):[0,1],sg(a)}function vle(c,l){var p,a=0,h=(c=c.slice()).length-1,d=c[a],f=c[h];return f<d&&(p=a,a=h,h=p,p=d,d=f,f=p),c[a]=l.floor(d),c[h]=l.ceil(f),c}function yle(c){return Math.log(c)}function _le(c){return Math.exp(c)}function Cqe(c){return-Math.log(-c)}function xqe(c){return-Math.exp(-c)}function wqe(c){return isFinite(c)?+("1e"+c):c<0?0:c}function ble(c){return(l,a)=>-c(-l,a)}function VV(c){const l=c(yle,_le),a=l.domain;let d,f,h=10;function p(){return d=function Tqe(c){return c===Math.E?Math.log:10===c&&Math.log10||2===c&&Math.log2||(c=Math.log(c),l=>Math.log(l)/c)}(h),f=function Sqe(c){return 10===c?wqe:c===Math.E?Math.exp:l=>Math.pow(c,l)}(h),a()[0]<0?(d=ble(d),f=ble(f),c(Cqe,xqe)):c(yle,_le),l}return l.base=function(g){return arguments.length?(h=+g,p()):h},l.domain=function(g){return arguments.length?(a(g),p()):a()},l.ticks=g=>{const m=a();let v=m[0],y=m[m.length-1];const _=y<v;_&&([v,y]=[y,v]);let x,S,b=d(v),C=d(y);const w=null==g?10:+g;let T=[];if(!(h%1)&&C-b<w){if(b=Math.floor(b),C=Math.ceil(C),v>0){for(;b<=C;++b)for(x=1;x<h;++x)if(S=b<0?x/f(-b):x*f(b),!(S<v)){if(S>y)break;T.push(S)}}else for(;b<=C;++b)for(x=h-1;x>=1;--x)if(S=b>0?x/f(-b):x*f(b),!(S<v)){if(S>y)break;T.push(S)}2*T.length<w&&(T=h_(v,y,w))}else T=h_(b,C,Math.min(C-b,w)).map(f);return _?T.reverse():T},l.tickFormat=(g,m)=>{if(null==g&&(g=10),null==m&&(m=10===h?"s":","),"function"!=typeof m&&(!(h%1)&&null==(m=L_(m)).precision&&(m.trim=!0),m=rM(m)),g===1/0)return m;const v=Math.max(1,h*g/l.ticks().length);return y=>{let _=y/f(Math.round(d(y)));return _*h<h-.5&&(_*=h),_<=v?m(y):""}},l.nice=()=>a(vle(a(),{floor:g=>f(Math.floor(d(g))),ceil:g=>f(Math.ceil(d(g)))})),l}function Cle(){const c=VV(qM()).domain([1,10]);return c.copy=()=>qw(c,Cle()).base(c.base()),yu.apply(c,arguments),c}function xle(c){return function(l){return Math.sign(l)*Math.log1p(Math.abs(l/c))}}function wle(c){return function(l){return Math.sign(l)*Math.expm1(Math.abs(l))*c}}function zV(c){var l=1,a=c(xle(l),wle(l));return a.constant=function(h){return arguments.length?c(xle(l=+h),wle(l)):l},sg(a)}function Sle(){var c=zV(qM());return c.copy=function(){return qw(c,Sle()).constant(c.constant())},yu.apply(c,arguments)}function Tle(c){return function(l){return l<0?-Math.pow(-l,c):Math.pow(l,c)}}function Oqe(c){return c<0?-Math.sqrt(-c):Math.sqrt(c)}function Dqe(c){return c<0?-c*c:c*c}function UV(c){var l=c(vl,vl),a=1;function h(){return 1===a?c(vl,vl):.5===a?c(Oqe,Dqe):c(Tle(a),Tle(1/a))}return l.exponent=function(d){return arguments.length?(a=+d,h()):a},sg(l)}function HV(){var c=UV(qM());return c.copy=function(){return qw(c,HV()).exponent(c.exponent())},yu.apply(c,arguments),c}function kqe(){return HV.apply(null,arguments).exponent(.5)}function Ole(c){return Math.sign(c)*c*c}function Mqe(c){return Math.sign(c)*Math.sqrt(Math.abs(c))}function Dle(){var h,c=BV(),l=[0,1],a=!1;function d(f){var p=Mqe(c(f));return isNaN(p)?h:a?Math.round(p):p}return d.invert=function(f){return c.invert(Ole(f))},d.domain=function(f){return arguments.length?(c.domain(f),d):c.domain()},d.range=function(f){return arguments.length?(c.range((l=Array.from(f,jM)).map(Ole)),d):l.slice()},d.rangeRound=function(f){return d.range(f).round(!0)},d.round=function(f){return arguments.length?(a=!!f,d):a},d.clamp=function(f){return arguments.length?(c.clamp(f),d):c.clamp()},d.unknown=function(f){return arguments.length?(h=f,d):h},d.copy=function(){return Dle(c.domain(),l).round(a).clamp(c.clamp()).unknown(h)},yu.apply(d,arguments),sg(d)}function kle(){var h,c=[],l=[],a=[];function d(){var p=0,g=Math.max(1,l.length);for(a=new Array(g-1);++p<g;)a[p-1]=Wie(c,p/g);return f}function f(p){return null==p||isNaN(p=+p)?h:l[Jm(a,p)]}return f.invertExtent=function(p){var g=l.indexOf(p);return g<0?[NaN,NaN]:[g>0?a[g-1]:c[0],g<a.length?a[g]:c[c.length-1]]},f.domain=function(p){if(!arguments.length)return c.slice();c=[];for(let g of p)null!=g&&!isNaN(g=+g)&&c.push(g);return c.sort(Ws),d()},f.range=function(p){return arguments.length?(l=Array.from(p),d()):l.slice()},f.unknown=function(p){return arguments.length?(h=p,f):h},f.quantiles=function(){return a.slice()},f.copy=function(){return kle().domain(c).range(l).unknown(h)},yu.apply(f,arguments)}function Mle(){var f,c=0,l=1,a=1,h=[.5],d=[0,1];function p(m){return null!=m&&m<=m?d[Jm(h,m,0,a)]:f}function g(){var m=-1;for(h=new Array(a);++m<a;)h[m]=((m+1)*l-(m-a)*c)/(a+1);return p}return p.domain=function(m){return arguments.length?([c,l]=m,c=+c,l=+l,g()):[c,l]},p.range=function(m){return arguments.length?(a=(d=Array.from(m)).length-1,g()):d.slice()},p.invertExtent=function(m){var v=d.indexOf(m);return v<0?[NaN,NaN]:v<1?[c,h[0]]:v>=a?[h[a-1],l]:[h[v-1],h[v]]},p.unknown=function(m){return arguments.length&&(f=m),p},p.thresholds=function(){return h.slice()},p.copy=function(){return Mle().domain([c,l]).range(d).unknown(f)},yu.apply(sg(p),arguments)}function Ele(){var a,c=[.5],l=[0,1],h=1;function d(f){return null!=f&&f<=f?l[Jm(c,f,0,h)]:a}return d.domain=function(f){return arguments.length?(c=Array.from(f),h=Math.min(c.length,l.length-1),d):c.slice()},d.range=function(f){return arguments.length?(l=Array.from(f),h=Math.min(c.length,l.length-1),d):l.slice()},d.invertExtent=function(f){var p=l.indexOf(f);return[c[p-1],c[p]]},d.unknown=function(f){return arguments.length?(a=f,d):a},d.copy=function(){return Ele().domain(c).range(l).unknown(a)},yu.apply(d,arguments)}const Wf=1e3,_u=6e4,Gf=60*_u,O0=24*Gf,$V=7*O0,WV=365*O0;var GV=new Date,QV=new Date;function No(c,l,a,h){function d(f){return c(f=0===arguments.length?new Date:new Date(+f)),f}return d.floor=function(f){return c(f=new Date(+f)),f},d.ceil=function(f){return c(f=new Date(f-1)),l(f,1),c(f),f},d.round=function(f){var p=d(f),g=d.ceil(f);return f-p<g-f?p:g},d.offset=function(f,p){return l(f=new Date(+f),null==p?1:Math.floor(p)),f},d.range=function(f,p,g){var v,m=[];if(f=d.ceil(f),g=null==g?1:Math.floor(g),!(f<p&&g>0))return m;do{m.push(v=new Date(+f)),l(f,g),c(f)}while(v<f&&f<p);return m},d.filter=function(f){return No(function(p){if(p>=p)for(;c(p),!f(p);)p.setTime(p-1)},function(p,g){if(p>=p)if(g<0)for(;++g<=0;)for(;l(p,-1),!f(p););else for(;--g>=0;)for(;l(p,1),!f(p););})},a&&(d.count=function(f,p){return GV.setTime(+f),QV.setTime(+p),c(GV),c(QV),Math.floor(a(GV,QV))},d.every=function(f){return f=Math.floor(f),isFinite(f)&&f>0?f>1?d.filter(h?function(p){return h(p)%f==0}:function(p){return d.count(0,p)%f==0}):d:null}),d}var ZM=No(function(){},function(c,l){c.setTime(+c+l)},function(c,l){return l-c});ZM.every=function(c){return c=Math.floor(c),isFinite(c)&&c>0?c>1?No(function(l){l.setTime(Math.floor(l/c)*c)},function(l,a){l.setTime(+l+a*c)},function(l,a){return(a-l)/c}):ZM:null};const jV=ZM;var Ile=ZM.range,Ple=No(function(c){c.setTime(c-c.getMilliseconds())},function(c,l){c.setTime(+c+l*Wf)},function(c,l){return(l-c)/Wf},function(c){return c.getUTCSeconds()});const og=Ple;var Rle=Ple.range,Fle=No(function(c){c.setTime(c-c.getMilliseconds()-c.getSeconds()*Wf)},function(c,l){c.setTime(+c+l*_u)},function(c,l){return(l-c)/_u},function(c){return c.getMinutes()});const qV=Fle;var Eqe=Fle.range,Nle=No(function(c){c.setTime(c-c.getMilliseconds()-c.getSeconds()*Wf-c.getMinutes()*_u)},function(c,l){c.setTime(+c+l*Gf)},function(c,l){return(l-c)/Gf},function(c){return c.getHours()});const ZV=Nle;var Aqe=Nle.range,Lle=No(c=>c.setHours(0,0,0,0),(c,l)=>c.setDate(c.getDate()+l),(c,l)=>(l-c-(l.getTimezoneOffset()-c.getTimezoneOffset())*_u)/O0,c=>c.getDate()-1);const Zw=Lle;var Iqe=Lle.range;function D0(c){return No(function(l){l.setDate(l.getDate()-(l.getDay()+7-c)%7),l.setHours(0,0,0,0)},function(l,a){l.setDate(l.getDate()+7*a)},function(l,a){return(a-l-(a.getTimezoneOffset()-l.getTimezoneOffset())*_u)/$V})}var j_=D0(0),Xw=D0(1),Ble=D0(2),Vle=D0(3),k0=D0(4),zle=D0(5),Ule=D0(6),Hle=j_.range,Pqe=Xw.range,Rqe=Ble.range,Fqe=Vle.range,Nqe=k0.range,Lqe=zle.range,Bqe=Ule.range,$le=No(function(c){c.setDate(1),c.setHours(0,0,0,0)},function(c,l){c.setMonth(c.getMonth()+l)},function(c,l){return l.getMonth()-c.getMonth()+12*(l.getFullYear()-c.getFullYear())},function(c){return c.getMonth()});const XV=$le;var Vqe=$le.range,YV=No(function(c){c.setMonth(0,1),c.setHours(0,0,0,0)},function(c,l){c.setFullYear(c.getFullYear()+l)},function(c,l){return l.getFullYear()-c.getFullYear()},function(c){return c.getFullYear()});YV.every=function(c){return isFinite(c=Math.floor(c))&&c>0?No(function(l){l.setFullYear(Math.floor(l.getFullYear()/c)*c),l.setMonth(0,1),l.setHours(0,0,0,0)},function(l,a){l.setFullYear(l.getFullYear()+a*c)}):null};const ag=YV;var zqe=YV.range,Wle=No(function(c){c.setUTCSeconds(0,0)},function(c,l){c.setTime(+c+l*_u)},function(c,l){return(l-c)/_u},function(c){return c.getUTCMinutes()});const KV=Wle;var Uqe=Wle.range,Gle=No(function(c){c.setUTCMinutes(0,0,0)},function(c,l){c.setTime(+c+l*Gf)},function(c,l){return(l-c)/Gf},function(c){return c.getUTCHours()});const JV=Gle;var Hqe=Gle.range,Qle=No(function(c){c.setUTCHours(0,0,0,0)},function(c,l){c.setUTCDate(c.getUTCDate()+l)},function(c,l){return(l-c)/O0},function(c){return c.getUTCDate()-1});const Yw=Qle;var $qe=Qle.range;function M0(c){return No(function(l){l.setUTCDate(l.getUTCDate()-(l.getUTCDay()+7-c)%7),l.setUTCHours(0,0,0,0)},function(l,a){l.setUTCDate(l.getUTCDate()+7*a)},function(l,a){return(a-l)/$V})}var q_=M0(0),Kw=M0(1),jle=M0(2),qle=M0(3),E0=M0(4),Zle=M0(5),Xle=M0(6),Yle=q_.range,Wqe=Kw.range,Gqe=jle.range,Qqe=qle.range,jqe=E0.range,qqe=Zle.range,Zqe=Xle.range,Kle=No(function(c){c.setUTCDate(1),c.setUTCHours(0,0,0,0)},function(c,l){c.setUTCMonth(c.getUTCMonth()+l)},function(c,l){return l.getUTCMonth()-c.getUTCMonth()+12*(l.getUTCFullYear()-c.getUTCFullYear())},function(c){return c.getUTCMonth()});const e6=Kle;var Xqe=Kle.range,t6=No(function(c){c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0)},function(c,l){c.setUTCFullYear(c.getUTCFullYear()+l)},function(c,l){return l.getUTCFullYear()-c.getUTCFullYear()},function(c){return c.getUTCFullYear()});t6.every=function(c){return isFinite(c=Math.floor(c))&&c>0?No(function(l){l.setUTCFullYear(Math.floor(l.getUTCFullYear()/c)*c),l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)},function(l,a){l.setUTCFullYear(l.getUTCFullYear()+a*c)}):null};const lg=t6;var Yqe=t6.range;function Jle(c,l,a,h,d,f){const p=[[og,1,Wf],[og,5,5e3],[og,15,15e3],[og,30,3e4],[f,1,_u],[f,5,5*_u],[f,15,15*_u],[f,30,30*_u],[d,1,Gf],[d,3,3*Gf],[d,6,6*Gf],[d,12,12*Gf],[h,1,O0],[h,2,2*O0],[a,1,$V],[l,1,2592e6],[l,3,7776e6],[c,1,WV]];function m(v,y,_){const b=Math.abs(y-v)/_,C=sk(([,,w])=>w).right(p,b);if(C===p.length)return c.every(d_(v/WV,y/WV,_));if(0===C)return jV.every(Math.max(d_(v,y,_),1));const[x,S]=p[b/p[C-1][2]<p[C][2]/b?C-1:C];return x.every(S)}return[function g(v,y,_){const b=y<v;b&&([v,y]=[y,v]);const C=_&&"function"==typeof _.range?_:m(v,y,_),x=C?C.range(v,+y+1):[];return b?x.reverse():x},m]}const[ece,tce]=Jle(lg,e6,q_,Yw,JV,KV),[nce,ice]=Jle(ag,XV,j_,Zw,ZV,qV);function n6(c){if(0<=c.y&&c.y<100){var l=new Date(-1,c.m,c.d,c.H,c.M,c.S,c.L);return l.setFullYear(c.y),l}return new Date(c.y,c.m,c.d,c.H,c.M,c.S,c.L)}function i6(c){if(0<=c.y&&c.y<100){var l=new Date(Date.UTC(-1,c.m,c.d,c.H,c.M,c.S,c.L));return l.setUTCFullYear(c.y),l}return new Date(Date.UTC(c.y,c.m,c.d,c.H,c.M,c.S,c.L))}function Jw(c,l,a){return{y:c,m:l,d:a,H:0,M:0,S:0,L:0}}function rce(c){var l=c.dateTime,a=c.date,h=c.time,d=c.periods,f=c.days,p=c.shortDays,g=c.months,m=c.shortMonths,v=eS(d),y=tS(d),_=eS(f),b=tS(f),C=eS(p),x=tS(p),S=eS(g),w=tS(g),T=eS(m),O=tS(m),k={a:function G(Ie){return p[Ie.getDay()]},A:function W(Ie){return f[Ie.getDay()]},b:function j(Ie){return m[Ie.getMonth()]},B:function Q(Ie){return g[Ie.getMonth()]},c:null,d:uce,e:uce,f:bZe,g:EZe,G:IZe,H:vZe,I:yZe,j:_Ze,L:hce,m:CZe,M:xZe,p:function J(Ie){return d[+(Ie.getHours()>=12)]},q:function te(Ie){return 1+~~(Ie.getMonth()/3)},Q:vce,s:yce,S:wZe,u:SZe,U:TZe,V:OZe,w:DZe,W:kZe,x:null,X:null,y:MZe,Y:AZe,Z:PZe,"%":mce},D={a:function ce(Ie){return p[Ie.getUTCDay()]},A:function ae(Ie){return f[Ie.getUTCDay()]},b:function Se(Ie){return m[Ie.getUTCMonth()]},B:function _e(Ie){return g[Ie.getUTCMonth()]},c:null,d:fce,e:fce,f:LZe,g:jZe,G:ZZe,H:RZe,I:FZe,j:NZe,L:pce,m:BZe,M:VZe,p:function Me(Ie){return d[+(Ie.getUTCHours()>=12)]},q:function Qe(Ie){return 1+~~(Ie.getUTCMonth()/3)},Q:vce,s:yce,S:zZe,u:UZe,U:HZe,V:$Ze,w:WZe,W:GZe,x:null,X:null,y:QZe,Y:qZe,Z:XZe,"%":mce},M={a:function z(Ie,Ve,Je){var pe=C.exec(Ve.slice(Je));return pe?(Ie.w=x.get(pe[0].toLowerCase()),Je+pe[0].length):-1},A:function U(Ie,Ve,Je){var pe=_.exec(Ve.slice(Je));return pe?(Ie.w=b.get(pe[0].toLowerCase()),Je+pe[0].length):-1},b:function Z(Ie,Ve,Je){var pe=T.exec(Ve.slice(Je));return pe?(Ie.m=O.get(pe[0].toLowerCase()),Je+pe[0].length):-1},B:function Y(Ie,Ve,Je){var pe=S.exec(Ve.slice(Je));return pe?(Ie.m=w.get(pe[0].toLowerCase()),Je+pe[0].length):-1},c:function N(Ie,Ve,Je){return E(Ie,l,Ve,Je)},d:lce,e:lce,f:fZe,g:ace,G:oce,H:cce,I:cce,j:cZe,L:dZe,m:lZe,M:uZe,p:function V(Ie,Ve,Je){var pe=v.exec(Ve.slice(Je));return pe?(Ie.p=y.get(pe[0].toLowerCase()),Je+pe[0].length):-1},q:aZe,Q:gZe,s:mZe,S:hZe,u:nZe,U:iZe,V:rZe,w:tZe,W:sZe,x:function $(Ie,Ve,Je){return E(Ie,a,Ve,Je)},X:function H(Ie,Ve,Je){return E(Ie,h,Ve,Je)},y:ace,Y:oce,Z:oZe,"%":pZe};function A(Ie,Ve){return function(Je){var Ye,Oe,Ze,pe=[],Le=-1,tt=0,st=Ie.length;for(Je instanceof Date||(Je=new Date(+Je));++Le<st;)37===Ie.charCodeAt(Le)&&(pe.push(Ie.slice(tt,Le)),null!=(Oe=sce[Ye=Ie.charAt(++Le)])?Ye=Ie.charAt(++Le):Oe="e"===Ye?" ":"0",(Ze=Ve[Ye])&&(Ye=Ze(Je,Oe)),pe.push(Ye),tt=Le+1);return pe.push(Ie.slice(tt,Le)),pe.join("")}}function L(Ie,Ve){return function(Je){var tt,st,pe=Jw(1900,void 0,1);if(E(pe,Ie,Je+="",0)!=Je.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(1e3*pe.s+("L"in pe?pe.L:0));if(Ve&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+12*pe.p),void 0===pe.m&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(st=(tt=i6(Jw(pe.y,0,1))).getUTCDay(),tt=st>4||0===st?Kw.ceil(tt):Kw(tt),tt=Yw.offset(tt,7*(pe.V-1)),pe.y=tt.getUTCFullYear(),pe.m=tt.getUTCMonth(),pe.d=tt.getUTCDate()+(pe.w+6)%7):(st=(tt=n6(Jw(pe.y,0,1))).getDay(),tt=st>4||0===st?Xw.ceil(tt):Xw(tt),tt=Zw.offset(tt,7*(pe.V-1)),pe.y=tt.getFullYear(),pe.m=tt.getMonth(),pe.d=tt.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),st="Z"in pe?i6(Jw(pe.y,0,1)).getUTCDay():n6(Jw(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+7*pe.W-(st+5)%7:pe.w+7*pe.U-(st+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,i6(pe)):n6(pe)}}function E(Ie,Ve,Je,pe){for(var Ye,Oe,Le=0,tt=Ve.length,st=Je.length;Le<tt;){if(pe>=st)return-1;if(37===(Ye=Ve.charCodeAt(Le++))){if(Ye=Ve.charAt(Le++),!(Oe=M[Ye in sce?Ve.charAt(Le++):Ye])||(pe=Oe(Ie,Je,pe))<0)return-1}else if(Ye!=Je.charCodeAt(pe++))return-1}return pe}return k.x=A(a,k),k.X=A(h,k),k.c=A(l,k),D.x=A(a,D),D.X=A(h,D),D.c=A(l,D),{format:function(Ie){var Ve=A(Ie+="",k);return Ve.toString=function(){return Ie},Ve},parse:function(Ie){var Ve=L(Ie+="",!1);return Ve.toString=function(){return Ie},Ve},utcFormat:function(Ie){var Ve=A(Ie+="",D);return Ve.toString=function(){return Ie},Ve},utcParse:function(Ie){var Ve=L(Ie+="",!0);return Ve.toString=function(){return Ie},Ve}}}var Z_,r6,_ce,XM,s6,sce={"-":"",_:" ",0:"0"},Ko=/^\s*\d+/,Kqe=/^%/,Jqe=/[\\^$*+?|[\]().{}]/g;function yr(c,l,a){var h=c<0?"-":"",d=(h?-c:c)+"",f=d.length;return h+(f<a?new Array(a-f+1).join(l)+d:d)}function eZe(c){return c.replace(Jqe,"\\$&")}function eS(c){return new RegExp("^(?:"+c.map(eZe).join("|")+")","i")}function tS(c){return new Map(c.map((l,a)=>[l.toLowerCase(),a]))}function tZe(c,l,a){var h=Ko.exec(l.slice(a,a+1));return h?(c.w=+h[0],a+h[0].length):-1}function nZe(c,l,a){var h=Ko.exec(l.slice(a,a+1));return h?(c.u=+h[0],a+h[0].length):-1}function iZe(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.U=+h[0],a+h[0].length):-1}function rZe(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.V=+h[0],a+h[0].length):-1}function sZe(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.W=+h[0],a+h[0].length):-1}function oce(c,l,a){var h=Ko.exec(l.slice(a,a+4));return h?(c.y=+h[0],a+h[0].length):-1}function ace(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.y=+h[0]+(+h[0]>68?1900:2e3),a+h[0].length):-1}function oZe(c,l,a){var h=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(l.slice(a,a+6));return h?(c.Z=h[1]?0:-(h[2]+(h[3]||"00")),a+h[0].length):-1}function aZe(c,l,a){var h=Ko.exec(l.slice(a,a+1));return h?(c.q=3*h[0]-3,a+h[0].length):-1}function lZe(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.m=h[0]-1,a+h[0].length):-1}function lce(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.d=+h[0],a+h[0].length):-1}function cZe(c,l,a){var h=Ko.exec(l.slice(a,a+3));return h?(c.m=0,c.d=+h[0],a+h[0].length):-1}function cce(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.H=+h[0],a+h[0].length):-1}function uZe(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.M=+h[0],a+h[0].length):-1}function hZe(c,l,a){var h=Ko.exec(l.slice(a,a+2));return h?(c.S=+h[0],a+h[0].length):-1}function dZe(c,l,a){var h=Ko.exec(l.slice(a,a+3));return h?(c.L=+h[0],a+h[0].length):-1}function fZe(c,l,a){var h=Ko.exec(l.slice(a,a+6));return h?(c.L=Math.floor(h[0]/1e3),a+h[0].length):-1}function pZe(c,l,a){var h=Kqe.exec(l.slice(a,a+1));return h?a+h[0].length:-1}function gZe(c,l,a){var h=Ko.exec(l.slice(a));return h?(c.Q=+h[0],a+h[0].length):-1}function mZe(c,l,a){var h=Ko.exec(l.slice(a));return h?(c.s=+h[0],a+h[0].length):-1}function uce(c,l){return yr(c.getDate(),l,2)}function vZe(c,l){return yr(c.getHours(),l,2)}function yZe(c,l){return yr(c.getHours()%12||12,l,2)}function _Ze(c,l){return yr(1+Zw.count(ag(c),c),l,3)}function hce(c,l){return yr(c.getMilliseconds(),l,3)}function bZe(c,l){return hce(c,l)+"000"}function CZe(c,l){return yr(c.getMonth()+1,l,2)}function xZe(c,l){return yr(c.getMinutes(),l,2)}function wZe(c,l){return yr(c.getSeconds(),l,2)}function SZe(c){var l=c.getDay();return 0===l?7:l}function TZe(c,l){return yr(j_.count(ag(c)-1,c),l,2)}function dce(c){var l=c.getDay();return l>=4||0===l?k0(c):k0.ceil(c)}function OZe(c,l){return c=dce(c),yr(k0.count(ag(c),c)+(4===ag(c).getDay()),l,2)}function DZe(c){return c.getDay()}function kZe(c,l){return yr(Xw.count(ag(c)-1,c),l,2)}function MZe(c,l){return yr(c.getFullYear()%100,l,2)}function EZe(c,l){return yr((c=dce(c)).getFullYear()%100,l,2)}function AZe(c,l){return yr(c.getFullYear()%1e4,l,4)}function IZe(c,l){var a=c.getDay();return yr((c=a>=4||0===a?k0(c):k0.ceil(c)).getFullYear()%1e4,l,4)}function PZe(c){var l=c.getTimezoneOffset();return(l>0?"-":(l*=-1,"+"))+yr(l/60|0,"0",2)+yr(l%60,"0",2)}function fce(c,l){return yr(c.getUTCDate(),l,2)}function RZe(c,l){return yr(c.getUTCHours(),l,2)}function FZe(c,l){return yr(c.getUTCHours()%12||12,l,2)}function NZe(c,l){return yr(1+Yw.count(lg(c),c),l,3)}function pce(c,l){return yr(c.getUTCMilliseconds(),l,3)}function LZe(c,l){return pce(c,l)+"000"}function BZe(c,l){return yr(c.getUTCMonth()+1,l,2)}function VZe(c,l){return yr(c.getUTCMinutes(),l,2)}function zZe(c,l){return yr(c.getUTCSeconds(),l,2)}function UZe(c){var l=c.getUTCDay();return 0===l?7:l}function HZe(c,l){return yr(q_.count(lg(c)-1,c),l,2)}function gce(c){var l=c.getUTCDay();return l>=4||0===l?E0(c):E0.ceil(c)}function $Ze(c,l){return c=gce(c),yr(E0.count(lg(c),c)+(4===lg(c).getUTCDay()),l,2)}function WZe(c){return c.getUTCDay()}function GZe(c,l){return yr(Kw.count(lg(c)-1,c),l,2)}function QZe(c,l){return yr(c.getUTCFullYear()%100,l,2)}function jZe(c,l){return yr((c=gce(c)).getUTCFullYear()%100,l,2)}function qZe(c,l){return yr(c.getUTCFullYear()%1e4,l,4)}function ZZe(c,l){var a=c.getUTCDay();return yr((c=a>=4||0===a?E0(c):E0.ceil(c)).getUTCFullYear()%1e4,l,4)}function XZe(){return"+0000"}function mce(){return"%"}function vce(c){return+c}function yce(c){return Math.floor(+c/1e3)}function bce(c){return Z_=rce(c),r6=Z_.format,_ce=Z_.parse,XM=Z_.utcFormat,s6=Z_.utcParse,Z_}function YZe(c){return new Date(c)}function KZe(c){return c instanceof Date?+c:+new Date(+c)}function o6(c,l,a,h,d,f,p,g,m,v){var y=BV(),_=y.invert,b=y.domain,C=v(".%L"),x=v(":%S"),S=v("%I:%M"),w=v("%I %p"),T=v("%a %d"),O=v("%b %d"),k=v("%B"),D=v("%Y");function M(A){return(m(A)<A?C:g(A)<A?x:p(A)<A?S:f(A)<A?w:h(A)<A?d(A)<A?T:O:a(A)<A?k:D)(A)}return y.invert=function(A){return new Date(_(A))},y.domain=function(A){return arguments.length?b(Array.from(A,KZe)):b().map(YZe)},y.ticks=function(A){var L=b();return c(L[0],L[L.length-1],null==A?10:A)},y.tickFormat=function(A,L){return null==L?M:v(L)},y.nice=function(A){var L=b();return(!A||"function"!=typeof A.range)&&(A=l(L[0],L[L.length-1],null==A?10:A)),A?b(vle(L,A)):y},y.copy=function(){return qw(y,o6(c,l,a,h,d,f,p,g,m,v))},y}function JZe(){return yu.apply(o6(nce,ice,ag,XV,j_,Zw,ZV,qV,og,r6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function eXe(){return yu.apply(o6(ece,tce,lg,e6,q_,Yw,JV,KV,og,XM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function YM(){var a,h,d,f,m,c=0,l=1,p=vl,g=!1;function v(_){return null==_||isNaN(_=+_)?m:p(0===d?.5:(_=(f(_)-a)*d,g?Math.max(0,Math.min(1,_)):_))}function y(_){return function(b){var C,x;return arguments.length?([C,x]=b,p=_(C,x),v):[p(0),p(1)]}}return v.domain=function(_){return arguments.length?([c,l]=_,a=f(c=+c),h=f(l=+l),d=a===h?0:1/(h-a),v):[c,l]},v.clamp=function(_){return arguments.length?(g=!!_,v):g},v.interpolator=function(_){return arguments.length?(p=_,v):p},v.range=y(qp),v.rangeRound=y(GM),v.unknown=function(_){return arguments.length?(m=_,v):m},function(_){return f=_,a=_(c),h=_(l),d=a===h?0:1/(h-a),v}}function cg(c,l){return l.domain(c.domain()).interpolator(c.interpolator()).clamp(c.clamp()).unknown(c.unknown())}function Cce(){var c=sg(YM()(vl));return c.copy=function(){return cg(c,Cce())},$f.apply(c,arguments)}function xce(){var c=VV(YM()).domain([1,10]);return c.copy=function(){return cg(c,xce()).base(c.base())},$f.apply(c,arguments)}function wce(){var c=zV(YM());return c.copy=function(){return cg(c,wce()).constant(c.constant())},$f.apply(c,arguments)}function a6(){var c=UV(YM());return c.copy=function(){return cg(c,a6()).exponent(c.exponent())},$f.apply(c,arguments)}function tXe(){return a6.apply(null,arguments).exponent(.5)}function Sce(){var c=[],l=vl;function a(h){if(null!=h&&!isNaN(h=+h))return l((Jm(c,h,1)-1)/(c.length-1))}return a.domain=function(h){if(!arguments.length)return c.slice();c=[];for(let d of h)null!=d&&!isNaN(d=+d)&&c.push(d);return c.sort(Ws),a},a.interpolator=function(h){return arguments.length?(l=h,a):l},a.range=function(){return c.map((h,d)=>l(d/(c.length-1)))},a.quantiles=function(h){return Array.from({length:h+1},(d,f)=>sw(c,f/h))},a.copy=function(){return Sce(l).domain(c)},$f.apply(a,arguments)}function KM(){var d,f,p,g,m,y,b,c=0,l=.5,a=1,h=1,v=vl,_=!1;function C(S){return isNaN(S=+S)?b:(S=.5+((S=+y(S))-f)*(h*S<h*f?g:m),v(_?Math.max(0,Math.min(1,S)):S))}function x(S){return function(w){var T,O,k;return arguments.length?([T,O,k]=w,v=ole(S,[T,O,k]),C):[v(0),v(.5),v(1)]}}return C.domain=function(S){return arguments.length?([c,l,a]=S,d=y(c=+c),f=y(l=+l),p=y(a=+a),g=d===f?0:.5/(f-d),m=f===p?0:.5/(p-f),h=f<d?-1:1,C):[c,l,a]},C.clamp=function(S){return arguments.length?(_=!!S,C):_},C.interpolator=function(S){return arguments.length?(v=S,C):v},C.range=x(qp),C.rangeRound=x(GM),C.unknown=function(S){return arguments.length?(b=S,C):b},function(S){return y=S,d=S(c),f=S(l),p=S(a),g=d===f?0:.5/(f-d),m=f===p?0:.5/(p-f),h=f<d?-1:1,C}}function Tce(){var c=sg(KM()(vl));return c.copy=function(){return cg(c,Tce())},$f.apply(c,arguments)}function Oce(){var c=VV(KM()).domain([.1,1,10]);return c.copy=function(){return cg(c,Oce()).base(c.base())},$f.apply(c,arguments)}function Dce(){var c=zV(KM());return c.copy=function(){return cg(c,Dce()).constant(c.constant())},$f.apply(c,arguments)}function l6(){var c=UV(KM());return c.copy=function(){return cg(c,l6()).exponent(c.exponent())},$f.apply(c,arguments)}function nXe(){return l6.apply(null,arguments).exponent(.5)}function Ri(c){for(var l=c.length/6|0,a=new Array(l),h=0;h<l;)a[h]="#"+c.slice(6*h,6*++h);return a}bce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const iXe=Ri("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),rXe=Ri("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),sXe=Ri("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),oXe=Ri("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),aXe=Ri("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),lXe=Ri("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cXe=Ri("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),uXe=Ri("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hXe=Ri("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),dXe=Ri("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),qr=c=>Tre(c[c.length-1]);var kce=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ri);const fXe=qr(kce);var Mce=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ri);const pXe=qr(Mce);var Ece=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ri);const gXe=qr(Ece);var Ace=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ri);const mXe=qr(Ace);var Ice=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ri);const vXe=qr(Ice);var Pce=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ri);const yXe=qr(Pce);var Rce=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ri);const _Xe=qr(Rce);var Fce=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ri);const bXe=qr(Fce);var Nce=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ri);const CXe=qr(Nce);var Lce=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ri);const xXe=qr(Lce);var Bce=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ri);const wXe=qr(Bce);var Vce=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ri);const SXe=qr(Vce);var zce=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ri);const TXe=qr(zce);var Uce=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ri);const OXe=qr(Uce);var Hce=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ri);const DXe=qr(Hce);var $ce=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ri);const kXe=qr($ce);var Wce=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ri);const MXe=qr(Wce);var Gce=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ri);const EXe=qr(Gce);var Qce=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ri);const AXe=qr(Qce);var jce=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ri);const IXe=qr(jce);var qce=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ri);const PXe=qr(qce);var Zce=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ri);const RXe=qr(Zce);var Xce=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ri);const FXe=qr(Xce);var Yce=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ri);const NXe=qr(Yce);var Kce=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ri);const LXe=qr(Kce);var Jce=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ri);const BXe=qr(Jce);var eue=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ri);const VXe=qr(eue);function zXe(c){return c=Math.max(0,Math.min(1,c)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-c*(35.34-c*(2381.73-c*(6402.7-c*(7024.72-2710.57*c)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+c*(170.73+c*(52.82-c*(131.46-c*(176.58-67.37*c)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+c*(442.36-c*(2482.43-c*(6167.24-c*(6614.94-2475.67*c)))))))+")"}const UXe=QM(uh(300,.5,0),uh(-240,.5,1));var HXe=QM(uh(-100,.75,.35),uh(80,1.5,.8)),$Xe=QM(uh(260,.75,.35),uh(80,1.5,.8)),JM=uh();function WXe(c){(c<0||c>1)&&(c-=Math.floor(c));var l=Math.abs(c-.5);return JM.h=360*c-100,JM.s=1.5-1.5*l,JM.l=.8-.9*l,JM+""}var eE=Nf(),GXe=Math.PI/3,QXe=2*Math.PI/3;function jXe(c){var l;return c=(.5-c)*Math.PI,eE.r=255*(l=Math.sin(c))*l,eE.g=255*(l=Math.sin(c+GXe))*l,eE.b=255*(l=Math.sin(c+QXe))*l,eE+""}function qXe(c){return c=Math.max(0,Math.min(1,c)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+c*(1172.33-c*(10793.56-c*(33300.12-c*(38394.49-14825.05*c)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+c*(557.33+c*(1225.33-c*(3574.96-c*(1073.77+707.56*c)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+c*(3211.1-c*(15327.97-c*(27814-c*(22569.18-6838.66*c)))))))+")"}function tE(c){var l=c.length;return function(a){return c[Math.max(0,Math.min(l-1,Math.floor(a*l)))]}}const ZXe=tE(Ri("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var XXe=tE(Ri("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),YXe=tE(Ri("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),KXe=tE(Ri("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function JXe(c){return po(mk(c).call(document.documentElement))}var eYe=0;function tue(){return new c6}function c6(){this._="@"+(++eYe).toString(36)}function tYe(c,l){return c.target&&(c=Ere(c),void 0===l&&(l=c.currentTarget),c=c.touches||[c]),Array.from(c,a=>xc(a,l))}function nYe(c){return"string"==typeof c?new sl([document.querySelectorAll(c)],[document.documentElement]):new sl([ire(c)],lB)}function Mi(c){return function(){return c}}c6.prototype=tue.prototype={constructor:c6,get:function(c){for(var l=this._;!(l in c);)if(!(c=c.parentNode))return;return c[l]},set:function(c,l){return c[this._]=l},remove:function(c){return this._ in c&&delete c[this._]},toString:function(){return this._}};const nue=Math.abs,Fa=Math.atan2,Qf=Math.cos,iYe=Math.max,X_=Math.min,jl=Math.sin,us=Math.sqrt,Na=1e-12,ug=Math.PI,nE=ug/2,hg=2*ug;function rYe(c){return c>1?0:c<-1?ug:Math.acos(c)}function iue(c){return c>=1?nE:c<=-1?-nE:Math.asin(c)}function sYe(c){return c.innerRadius}function oYe(c){return c.outerRadius}function aYe(c){return c.startAngle}function lYe(c){return c.endAngle}function cYe(c){return c&&c.padAngle}function uYe(c,l,a,h,d,f,p,g){var m=a-c,v=h-l,y=p-d,_=g-f,b=_*m-y*v;if(!(b*b<Na))return[c+(b=(y*(l-f)-_*(c-d))/b)*m,l+b*v]}function iE(c,l,a,h,d,f,p){var g=c-a,m=l-h,v=(p?f:-f)/us(g*g+m*m),y=v*m,_=-v*g,b=c+y,C=l+_,x=a+y,S=h+_,w=(b+x)/2,T=(C+S)/2,O=x-b,k=S-C,D=O*O+k*k,M=d-f,A=b*S-x*C,L=(k<0?-1:1)*us(iYe(0,M*M*D-A*A)),E=(A*k-O*L)/D,V=(-A*O-k*L)/D,z=(A*k+O*L)/D,U=(-A*O+k*L)/D,Z=E-w,Y=V-T,N=z-w,$=U-T;return Z*Z+Y*Y>N*N+$*$&&(E=z,V=U),{cx:E,cy:V,x01:-y,y01:-_,x11:E*(d/M-1),y11:V*(d/M-1)}}function u6(){var c=sYe,l=oYe,a=Mi(0),h=null,d=aYe,f=lYe,p=cYe,g=null;function m(){var v,y,_=+c.apply(this,arguments),b=+l.apply(this,arguments),C=d.apply(this,arguments)-nE,x=f.apply(this,arguments)-nE,S=nue(x-C),w=x>C;if(g||(g=v=Vf()),b<_&&(y=b,b=_,_=y),b>Na)if(S>hg-Na)g.moveTo(b*Qf(C),b*jl(C)),g.arc(0,0,b,C,x,!w),_>Na&&(g.moveTo(_*Qf(x),_*jl(x)),g.arc(0,0,_,x,C,w));else{var Z,Y,T=C,O=x,k=C,D=x,M=S,A=S,L=p.apply(this,arguments)/2,E=L>Na&&(h?+h.apply(this,arguments):us(_*_+b*b)),V=X_(nue(b-_)/2,+a.apply(this,arguments)),z=V,U=V;if(E>Na){var N=iue(E/_*jl(L)),$=iue(E/b*jl(L));(M-=2*N)>Na?(k+=N*=w?1:-1,D-=N):(M=0,k=D=(C+x)/2),(A-=2*$)>Na?(T+=$*=w?1:-1,O-=$):(A=0,T=O=(C+x)/2)}var H=b*Qf(T),G=b*jl(T),W=_*Qf(D),j=_*jl(D);if(V>Na){var ae,Q=b*Qf(O),J=b*jl(O),te=_*Qf(k),ce=_*jl(k);if(S<ug&&(ae=uYe(H,G,te,ce,Q,J,W,j))){var Se=H-ae[0],_e=G-ae[1],Me=Q-ae[0],Qe=J-ae[1],Ie=1/jl(rYe((Se*Me+_e*Qe)/(us(Se*Se+_e*_e)*us(Me*Me+Qe*Qe)))/2),Ve=us(ae[0]*ae[0]+ae[1]*ae[1]);z=X_(V,(_-Ve)/(Ie-1)),U=X_(V,(b-Ve)/(Ie+1))}}A>Na?U>Na?(Z=iE(te,ce,H,G,b,U,w),Y=iE(Q,J,W,j,b,U,w),g.moveTo(Z.cx+Z.x01,Z.cy+Z.y01),U<V?g.arc(Z.cx,Z.cy,U,Fa(Z.y01,Z.x01),Fa(Y.y01,Y.x01),!w):(g.arc(Z.cx,Z.cy,U,Fa(Z.y01,Z.x01),Fa(Z.y11,Z.x11),!w),g.arc(0,0,b,Fa(Z.cy+Z.y11,Z.cx+Z.x11),Fa(Y.cy+Y.y11,Y.cx+Y.x11),!w),g.arc(Y.cx,Y.cy,U,Fa(Y.y11,Y.x11),Fa(Y.y01,Y.x01),!w))):(g.moveTo(H,G),g.arc(0,0,b,T,O,!w)):g.moveTo(H,G),_>Na&&M>Na?z>Na?(Z=iE(W,j,Q,J,_,-z,w),Y=iE(H,G,te,ce,_,-z,w),g.lineTo(Z.cx+Z.x01,Z.cy+Z.y01),z<V?g.arc(Z.cx,Z.cy,z,Fa(Z.y01,Z.x01),Fa(Y.y01,Y.x01),!w):(g.arc(Z.cx,Z.cy,z,Fa(Z.y01,Z.x01),Fa(Z.y11,Z.x11),!w),g.arc(0,0,_,Fa(Z.cy+Z.y11,Z.cx+Z.x11),Fa(Y.cy+Y.y11,Y.cx+Y.x11),w),g.arc(Y.cx,Y.cy,z,Fa(Y.y11,Y.x11),Fa(Y.y01,Y.x01),!w))):g.arc(0,0,_,D,k,w):g.lineTo(W,j)}else g.moveTo(0,0);if(g.closePath(),v)return g=null,v+""||null}return m.centroid=function(){var v=(+c.apply(this,arguments)+ +l.apply(this,arguments))/2,y=(+d.apply(this,arguments)+ +f.apply(this,arguments))/2-ug/2;return[Qf(y)*v,jl(y)*v]},m.innerRadius=function(v){return arguments.length?(c="function"==typeof v?v:Mi(+v),m):c},m.outerRadius=function(v){return arguments.length?(l="function"==typeof v?v:Mi(+v),m):l},m.cornerRadius=function(v){return arguments.length?(a="function"==typeof v?v:Mi(+v),m):a},m.padRadius=function(v){return arguments.length?(h=null==v?null:"function"==typeof v?v:Mi(+v),m):h},m.startAngle=function(v){return arguments.length?(d="function"==typeof v?v:Mi(+v),m):d},m.endAngle=function(v){return arguments.length?(f="function"==typeof v?v:Mi(+v),m):f},m.padAngle=function(v){return arguments.length?(p="function"==typeof v?v:Mi(+v),m):p},m.context=function(v){return arguments.length?(g=null==v?null:v,m):g},m}var hYe=Array.prototype.slice;function rE(c){return"object"==typeof c&&"length"in c?c:Array.from(c)}function rue(c){this._context=c}function sE(c){return new rue(c)}function h6(c){return c[0]}function d6(c){return c[1]}function mh(c,l){var a=Mi(!0),h=null,d=sE,f=null;function p(g){var m,y,b,v=(g=rE(g)).length,_=!1;for(null==h&&(f=d(b=Vf())),m=0;m<=v;++m)!(m<v&&a(y=g[m],m,g))===_&&((_=!_)?f.lineStart():f.lineEnd()),_&&f.point(+c(y,m,g),+l(y,m,g));if(b)return f=null,b+""||null}return c="function"==typeof c?c:void 0===c?h6:Mi(c),l="function"==typeof l?l:void 0===l?d6:Mi(l),p.x=function(g){return arguments.length?(c="function"==typeof g?g:Mi(+g),p):c},p.y=function(g){return arguments.length?(l="function"==typeof g?g:Mi(+g),p):l},p.defined=function(g){return arguments.length?(a="function"==typeof g?g:Mi(!!g),p):a},p.curve=function(g){return arguments.length?(d=g,null!=h&&(f=d(h)),p):d},p.context=function(g){return arguments.length?(null==g?h=f=null:f=d(h=g),p):h},p}function f6(c,l,a){var h=null,d=Mi(!0),f=null,p=sE,g=null;function m(y){var _,b,C,S,T,x=(y=rE(y)).length,w=!1,O=new Array(x),k=new Array(x);for(null==f&&(g=p(T=Vf())),_=0;_<=x;++_){if(!(_<x&&d(S=y[_],_,y))===w)if(w=!w)b=_,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),C=_-1;C>=b;--C)g.point(O[C],k[C]);g.lineEnd(),g.areaEnd()}w&&(O[_]=+c(S,_,y),k[_]=+l(S,_,y),g.point(h?+h(S,_,y):O[_],a?+a(S,_,y):k[_]))}if(T)return g=null,T+""||null}function v(){return mh().defined(d).curve(p).context(f)}return c="function"==typeof c?c:void 0===c?h6:Mi(+c),l="function"==typeof l?l:Mi(void 0===l?0:+l),a="function"==typeof a?a:void 0===a?d6:Mi(+a),m.x=function(y){return arguments.length?(c="function"==typeof y?y:Mi(+y),h=null,m):c},m.x0=function(y){return arguments.length?(c="function"==typeof y?y:Mi(+y),m):c},m.x1=function(y){return arguments.length?(h=null==y?null:"function"==typeof y?y:Mi(+y),m):h},m.y=function(y){return arguments.length?(l="function"==typeof y?y:Mi(+y),a=null,m):l},m.y0=function(y){return arguments.length?(l="function"==typeof y?y:Mi(+y),m):l},m.y1=function(y){return arguments.length?(a=null==y?null:"function"==typeof y?y:Mi(+y),m):a},m.lineX0=m.lineY0=function(){return v().x(c).y(l)},m.lineY1=function(){return v().x(c).y(a)},m.lineX1=function(){return v().x(h).y(l)},m.defined=function(y){return arguments.length?(d="function"==typeof y?y:Mi(!!y),m):d},m.curve=function(y){return arguments.length?(p=y,null!=f&&(g=p(f)),m):p},m.context=function(y){return arguments.length?(null==y?f=g=null:g=p(f=y),m):f},m}function dYe(c,l){return l<c?-1:l>c?1:l>=c?0:NaN}function fYe(c){return c}function pYe(){var c=fYe,l=dYe,a=null,h=Mi(0),d=Mi(hg),f=Mi(0);function p(g){var m,y,_,T,D,v=(g=rE(g)).length,b=0,C=new Array(v),x=new Array(v),S=+h.apply(this,arguments),w=Math.min(hg,Math.max(-hg,d.apply(this,arguments)-S)),O=Math.min(Math.abs(w)/v,f.apply(this,arguments)),k=O*(w<0?-1:1);for(m=0;m<v;++m)(D=x[C[m]=m]=+c(g[m],m,g))>0&&(b+=D);for(null!=l?C.sort(function(M,A){return l(x[M],x[A])}):null!=a&&C.sort(function(M,A){return a(g[M],g[A])}),m=0,_=b?(w-v*k)/b:0;m<v;++m,S=T)x[y=C[m]]={data:g[y],index:m,value:D=x[y],startAngle:S,endAngle:T=S+(D>0?D*_:0)+k,padAngle:O};return x}return p.value=function(g){return arguments.length?(c="function"==typeof g?g:Mi(+g),p):c},p.sortValues=function(g){return arguments.length?(l=g,a=null,p):l},p.sort=function(g){return arguments.length?(a=g,l=null,p):a},p.startAngle=function(g){return arguments.length?(h="function"==typeof g?g:Mi(+g),p):h},p.endAngle=function(g){return arguments.length?(d="function"==typeof g?g:Mi(+g),p):d},p.padAngle=function(g){return arguments.length?(f="function"==typeof g?g:Mi(+g),p):f},p}rue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,l):this._context.moveTo(c,l);break;case 1:this._point=2;default:this._context.lineTo(c,l)}}};var sue=p6(sE);function oue(c){this._curve=c}function p6(c){function l(a){return new oue(c(a))}return l._curve=c,l}function nS(c){var l=c.curve;return c.angle=c.x,delete c.x,c.radius=c.y,delete c.y,c.curve=function(a){return arguments.length?l(p6(a)):l()._curve},c}function aue(){return nS(mh().curve(sue))}function lue(){var c=f6().curve(sue),l=c.curve,a=c.lineX0,h=c.lineX1,d=c.lineY0,f=c.lineY1;return c.angle=c.x,delete c.x,c.startAngle=c.x0,delete c.x0,c.endAngle=c.x1,delete c.x1,c.radius=c.y,delete c.y,c.innerRadius=c.y0,delete c.y0,c.outerRadius=c.y1,delete c.y1,c.lineStartAngle=function(){return nS(a())},delete c.lineX0,c.lineEndAngle=function(){return nS(h())},delete c.lineX1,c.lineInnerRadius=function(){return nS(d())},delete c.lineY0,c.lineOuterRadius=function(){return nS(f())},delete c.lineY1,c.curve=function(p){return arguments.length?l(p6(p)):l()._curve},c}function iS(c,l){return[(l=+l)*Math.cos(c-=Math.PI/2),l*Math.sin(c)]}oue.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(c,l){this._curve.point(l*Math.sin(c),l*-Math.cos(c))}};class cue{constructor(l,a){this._context=l,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,a):this._context.moveTo(l,a);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+l)/2,this._y0,this._x0,a,l,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,l,this._y0,l,a)}this._x0=l,this._y0=a}}class gYe{constructor(l){this._context=l}lineStart(){this._point=0}lineEnd(){}point(l,a){if(l=+l,a=+a,0==this._point++)this._x0=l,this._y0=a;else{const h=iS(this._x0,this._y0),d=iS(this._x0,this._y0=(this._y0+a)/2),f=iS(l,this._y0),p=iS(l,a);this._context.moveTo(...h),this._context.bezierCurveTo(...d,...f,...p)}}}function g6(c){return new cue(c,!0)}function uue(c){return new cue(c,!1)}function mYe(c){return new gYe(c)}function vYe(c){return c.source}function yYe(c){return c.target}function oE(c){let l=vYe,a=yYe,h=h6,d=d6,f=null,p=null;function g(){let m;const v=hYe.call(arguments),y=l.apply(this,v),_=a.apply(this,v);if(null==f&&(p=c(m=Vf())),p.lineStart(),v[0]=y,p.point(+h.apply(this,v),+d.apply(this,v)),v[0]=_,p.point(+h.apply(this,v),+d.apply(this,v)),p.lineEnd(),m)return p=null,m+""||null}return g.source=function(m){return arguments.length?(l=m,g):l},g.target=function(m){return arguments.length?(a=m,g):a},g.x=function(m){return arguments.length?(h="function"==typeof m?m:Mi(+m),g):h},g.y=function(m){return arguments.length?(d="function"==typeof m?m:Mi(+m),g):d},g.context=function(m){return arguments.length?(null==m?f=p=null:p=c(f=m),g):f},g}function _Ye(){return oE(g6)}function bYe(){return oE(uue)}function CYe(){const c=oE(mYe);return c.angle=c.x,delete c.x,c.radius=c.y,delete c.y,c}const xYe=us(3),hue={draw(c,l){const a=.59436*us(l+X_(l/28,.75)),h=a/2,d=h*xYe;c.moveTo(0,a),c.lineTo(0,-a),c.moveTo(-d,-h),c.lineTo(d,h),c.moveTo(-d,h),c.lineTo(d,-h)}},aE={draw(c,l){const a=us(l/ug);c.moveTo(a,0),c.arc(0,0,a,0,hg)}},due={draw(c,l){const a=us(l/5)/2;c.moveTo(-3*a,-a),c.lineTo(-a,-a),c.lineTo(-a,-3*a),c.lineTo(a,-3*a),c.lineTo(a,-a),c.lineTo(3*a,-a),c.lineTo(3*a,a),c.lineTo(a,a),c.lineTo(a,3*a),c.lineTo(-a,3*a),c.lineTo(-a,a),c.lineTo(-3*a,a),c.closePath()}},fue=us(1/3),wYe=2*fue,pue={draw(c,l){const a=us(l/wYe),h=a*fue;c.moveTo(0,-a),c.lineTo(h,0),c.lineTo(0,a),c.lineTo(-h,0),c.closePath()}},gue={draw(c,l){const a=.62625*us(l);c.moveTo(0,-a),c.lineTo(a,0),c.lineTo(0,a),c.lineTo(-a,0),c.closePath()}},mue={draw(c,l){const a=.87559*us(l-X_(l/7,2));c.moveTo(-a,0),c.lineTo(a,0),c.moveTo(0,a),c.lineTo(0,-a)}},vue={draw(c,l){const a=us(l),h=-a/2;c.rect(h,h,a,a)}},yue={draw(c,l){const a=.4431*us(l);c.moveTo(a,a),c.lineTo(a,-a),c.lineTo(-a,-a),c.lineTo(-a,a),c.closePath()}},_ue=jl(ug/10)/jl(7*ug/10),TYe=jl(hg/10)*_ue,OYe=-Qf(hg/10)*_ue,bue={draw(c,l){const a=us(.8908130915292852*l),h=TYe*a,d=OYe*a;c.moveTo(0,-a),c.lineTo(h,d);for(let f=1;f<5;++f){const p=hg*f/5,g=Qf(p),m=jl(p);c.lineTo(m*a,-g*a),c.lineTo(g*h-m*d,m*h+g*d)}c.closePath()}},m6=us(3),Cue={draw(c,l){const a=-us(l/(3*m6));c.moveTo(0,2*a),c.lineTo(-m6*a,-a),c.lineTo(m6*a,-a),c.closePath()}},DYe=us(3),xue={draw(c,l){const a=.6824*us(l),h=a/2,d=a*DYe/2;c.moveTo(0,-a),c.lineTo(d,h),c.lineTo(-d,h),c.closePath()}},bu=-.5,Cu=us(3)/2,v6=1/us(12),kYe=3*(v6/2+1),wue={draw(c,l){const a=us(l/kYe),h=a/2,d=a*v6,f=h,p=a*v6+a,g=-f,m=p;c.moveTo(h,d),c.lineTo(f,p),c.lineTo(g,m),c.lineTo(bu*h-Cu*d,Cu*h+bu*d),c.lineTo(bu*f-Cu*p,Cu*f+bu*p),c.lineTo(bu*g-Cu*m,Cu*g+bu*m),c.lineTo(bu*h+Cu*d,bu*d-Cu*h),c.lineTo(bu*f+Cu*p,bu*p-Cu*f),c.lineTo(bu*g+Cu*m,bu*m-Cu*g),c.closePath()}},Sue={draw(c,l){const a=.6189*us(l-X_(l/6,1.7));c.moveTo(-a,-a),c.lineTo(a,a),c.moveTo(-a,a),c.lineTo(a,-a)}},Tue=[aE,due,pue,vue,bue,Cue,wue],MYe=[aE,mue,Sue,xue,hue,yue,gue];function EYe(c,l){let a=null;function h(){let d;if(a||(a=d=Vf()),c.apply(this,arguments).draw(a,+l.apply(this,arguments)),d)return a=null,d+""||null}return c="function"==typeof c?c:Mi(c||aE),l="function"==typeof l?l:Mi(void 0===l?64:+l),h.type=function(d){return arguments.length?(c="function"==typeof d?d:Mi(d),h):c},h.size=function(d){return arguments.length?(l="function"==typeof d?d:Mi(+d),h):l},h.context=function(d){return arguments.length?(a=null==d?null:d,h):a},h}function dg(){}function lE(c,l,a){c._context.bezierCurveTo((2*c._x0+c._x1)/3,(2*c._y0+c._y1)/3,(c._x0+2*c._x1)/3,(c._y0+2*c._y1)/3,(c._x0+4*c._x1+l)/6,(c._y0+4*c._y1+a)/6)}function cE(c){this._context=c}function rS(c){return new cE(c)}function Oue(c){this._context=c}function AYe(c){return new Oue(c)}function Due(c){this._context=c}function IYe(c){return new Due(c)}function kue(c,l){this._basis=new cE(c),this._beta=l}cE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,l):this._context.moveTo(c,l);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lE(this,c,l)}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=l}},Oue.prototype={areaStart:dg,areaEnd:dg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1,this._x2=c,this._y2=l;break;case 1:this._point=2,this._x3=c,this._y3=l;break;case 2:this._point=3,this._x4=c,this._y4=l,this._context.moveTo((this._x0+4*this._x1+c)/6,(this._y0+4*this._y1+l)/6);break;default:lE(this,c,l)}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=l}},Due.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+c)/6,h=(this._y0+4*this._y1+l)/6;this._line?this._context.lineTo(a,h):this._context.moveTo(a,h);break;case 3:this._point=4;default:lE(this,c,l)}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=l}},kue.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var c=this._x,l=this._y,a=c.length-1;if(a>0)for(var m,h=c[0],d=l[0],f=c[a]-h,p=l[a]-d,g=-1;++g<=a;)this._basis.point(this._beta*c[g]+(1-this._beta)*(h+(m=g/a)*f),this._beta*l[g]+(1-this._beta)*(d+m*p));this._x=this._y=null,this._basis.lineEnd()},point:function(c,l){this._x.push(+c),this._y.push(+l)}};const PYe=function c(l){function a(h){return 1===l?new cE(h):new kue(h,l)}return a.beta=function(h){return c(+h)},a}(.85);function uE(c,l,a){c._context.bezierCurveTo(c._x1+c._k*(c._x2-c._x0),c._y1+c._k*(c._y2-c._y0),c._x2+c._k*(c._x1-l),c._y2+c._k*(c._y1-a),c._x2,c._y2)}function y6(c,l){this._context=c,this._k=(1-l)/6}y6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:uE(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,l):this._context.moveTo(c,l);break;case 1:this._point=2,this._x1=c,this._y1=l;break;case 2:this._point=3;default:uE(this,c,l)}this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const RYe=function c(l){function a(h){return new y6(h,l)}return a.tension=function(h){return c(+h)},a}(0);function _6(c,l){this._context=c,this._k=(1-l)/6}_6.prototype={areaStart:dg,areaEnd:dg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1,this._x3=c,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=c,this._y4=l);break;case 2:this._point=3,this._x5=c,this._y5=l;break;default:uE(this,c,l)}this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const FYe=function c(l){function a(h){return new _6(h,l)}return a.tension=function(h){return c(+h)},a}(0);function b6(c,l){this._context=c,this._k=(1-l)/6}b6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:uE(this,c,l)}this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const NYe=function c(l){function a(h){return new b6(h,l)}return a.tension=function(h){return c(+h)},a}(0);function C6(c,l,a){var h=c._x1,d=c._y1,f=c._x2,p=c._y2;if(c._l01_a>Na){var g=2*c._l01_2a+3*c._l01_a*c._l12_a+c._l12_2a,m=3*c._l01_a*(c._l01_a+c._l12_a);h=(h*g-c._x0*c._l12_2a+c._x2*c._l01_2a)/m,d=(d*g-c._y0*c._l12_2a+c._y2*c._l01_2a)/m}if(c._l23_a>Na){var v=2*c._l23_2a+3*c._l23_a*c._l12_a+c._l12_2a,y=3*c._l23_a*(c._l23_a+c._l12_a);f=(f*v+c._x1*c._l23_2a-l*c._l12_2a)/y,p=(p*v+c._y1*c._l23_2a-a*c._l12_2a)/y}c._context.bezierCurveTo(h,d,f,p,c._x2,c._y2)}function Mue(c,l){this._context=c,this._alpha=l}Mue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){if(c=+c,l=+l,this._point){var a=this._x2-c,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(c,l):this._context.moveTo(c,l);break;case 1:this._point=2;break;case 2:this._point=3;default:C6(this,c,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const LYe=function c(l){function a(h){return l?new Mue(h,l):new y6(h,0)}return a.alpha=function(h){return c(+h)},a}(.5);function Eue(c,l){this._context=c,this._alpha=l}Eue.prototype={areaStart:dg,areaEnd:dg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(c,l){if(c=+c,l=+l,this._point){var a=this._x2-c,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=c,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=c,this._y4=l);break;case 2:this._point=3,this._x5=c,this._y5=l;break;default:C6(this,c,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const BYe=function c(l){function a(h){return l?new Eue(h,l):new _6(h,0)}return a.alpha=function(h){return c(+h)},a}(.5);function Aue(c,l){this._context=c,this._alpha=l}Aue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){if(c=+c,l=+l,this._point){var a=this._x2-c,h=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+h*h,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:C6(this,c,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const VYe=function c(l){function a(h){return l?new Aue(h,l):new b6(h,0)}return a.alpha=function(h){return c(+h)},a}(.5);function Iue(c){this._context=c}function zYe(c){return new Iue(c)}function Pue(c){return c<0?-1:1}function Rue(c,l,a){var h=c._x1-c._x0,d=l-c._x1,f=(c._y1-c._y0)/(h||d<0&&-0),p=(a-c._y1)/(d||h<0&&-0),g=(f*d+p*h)/(h+d);return(Pue(f)+Pue(p))*Math.min(Math.abs(f),Math.abs(p),.5*Math.abs(g))||0}function Fue(c,l){var a=c._x1-c._x0;return a?(3*(c._y1-c._y0)/a-l)/2:l}function x6(c,l,a){var h=c._x0,f=c._x1,p=c._y1,g=(f-h)/3;c._context.bezierCurveTo(h+g,c._y0+g*l,f-g,p-g*a,f,p)}function hE(c){this._context=c}function Nue(c){this._context=new Lue(c)}function Lue(c){this._context=c}function UYe(c){return new hE(c)}function HYe(c){return new Nue(c)}function Bue(c){this._context=c}function Vue(c){var l,h,a=c.length-1,d=new Array(a),f=new Array(a),p=new Array(a);for(d[0]=0,f[0]=2,p[0]=c[0]+2*c[1],l=1;l<a-1;++l)d[l]=1,f[l]=4,p[l]=4*c[l]+2*c[l+1];for(d[a-1]=2,f[a-1]=7,p[a-1]=8*c[a-1]+c[a],l=1;l<a;++l)f[l]-=h=d[l]/f[l-1],p[l]-=h*p[l-1];for(d[a-1]=p[a-1]/f[a-1],l=a-2;l>=0;--l)d[l]=(p[l]-d[l+1])/f[l];for(f[a-1]=(c[a]+d[a-1])/2,l=0;l<a-1;++l)f[l]=2*c[l+1]-d[l+1];return[d,f]}function w6(c){return new Bue(c)}function dE(c,l){this._context=c,this._t=l}function $Ye(c){return new dE(c,.5)}function S6(c){return new dE(c,0)}function WYe(c){return new dE(c,1)}function Y_(c,l){if((p=c.length)>1)for(var h,d,p,a=1,f=c[l[0]],g=f.length;a<p;++a)for(d=f,f=c[l[a]],h=0;h<g;++h)f[h][1]+=f[h][0]=isNaN(d[h][1])?d[h][0]:d[h][1]}function K_(c){for(var l=c.length,a=new Array(l);--l>=0;)a[l]=l;return a}function GYe(c,l){return c[l]}function QYe(c){const l=[];return l.key=c,l}function jYe(){var c=Mi([]),l=K_,a=Y_,h=GYe;function d(f){var g,y,p=Array.from(c.apply(this,arguments),QYe),m=p.length,v=-1;for(const _ of f)for(g=0,++v;g<m;++g)(p[g][v]=[0,+h(_,p[g].key,v,f)]).data=_;for(g=0,y=rE(l(p));g<m;++g)p[y[g]].index=g;return a(p,y),p}return d.keys=function(f){return arguments.length?(c="function"==typeof f?f:Mi(Array.from(f)),d):c},d.value=function(f){return arguments.length?(h="function"==typeof f?f:Mi(+f),d):h},d.order=function(f){return arguments.length?(l=null==f?K_:"function"==typeof f?f:Mi(Array.from(f)),d):l},d.offset=function(f){return arguments.length?(a=null==f?Y_:f,d):a},d}function qYe(c,l){if((h=c.length)>0){for(var a,h,p,d=0,f=c[0].length;d<f;++d){for(p=a=0;a<h;++a)p+=c[a][d][1]||0;if(p)for(a=0;a<h;++a)c[a][d][1]/=p}Y_(c,l)}}function ZYe(c,l){if((m=c.length)>0)for(var a,d,f,p,g,m,h=0,v=c[l[0]].length;h<v;++h)for(p=g=0,a=0;a<m;++a)(f=(d=c[l[a]][h])[1]-d[0])>0?(d[0]=p,d[1]=p+=f):f<0?(d[1]=g,d[0]=g+=f):(d[0]=0,d[1]=f)}function XYe(c,l){if((d=c.length)>0){for(var d,a=0,h=c[l[0]],f=h.length;a<f;++a){for(var p=0,g=0;p<d;++p)g+=c[p][a][1]||0;h[a][1]+=h[a][0]=-g/2}Y_(c,l)}}function YYe(c,l){if((p=c.length)>0&&(f=(d=c[l[0]]).length)>0){for(var d,f,p,a=0,h=1;h<f;++h){for(var g=0,m=0,v=0;g<p;++g){for(var y=c[l[g]],_=y[h][1]||0,C=(_-(y[h-1][1]||0))/2,x=0;x<g;++x){var S=c[l[x]];C+=(S[h][1]||0)-(S[h-1][1]||0)}m+=_,v+=C*_}d[h-1][1]+=d[h-1][0]=a,m&&(a-=v/m)}d[h-1][1]+=d[h-1][0]=a,Y_(c,l)}}function zue(c){var l=c.map(KYe);return K_(c).sort(function(a,h){return l[a]-l[h]})}function KYe(c){for(var d,l=-1,a=0,h=c.length,f=-1/0;++l<h;)(d=+c[l][1])>f&&(f=d,a=l);return a}function Uue(c){var l=c.map(Hue);return K_(c).sort(function(a,h){return l[a]-l[h]})}function Hue(c){for(var d,l=0,a=-1,h=c.length;++a<h;)(d=+c[a][1])&&(l+=d);return l}function JYe(c){return Uue(c).reverse()}function eKe(c){var a,h,l=c.length,d=c.map(Hue),f=zue(c),p=0,g=0,m=[],v=[];for(a=0;a<l;++a)h=f[a],p<g?(p+=d[h],m.push(h)):(g+=d[h],v.push(h));return v.reverse().concat(m)}function tKe(c){return K_(c).reverse()}Iue.prototype={areaStart:dg,areaEnd:dg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(c,l){c=+c,l=+l,this._point?this._context.lineTo(c,l):(this._point=1,this._context.moveTo(c,l))}},hE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:x6(this,this._t0,Fue(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,l){var a=NaN;if(l=+l,(c=+c)!==this._x1||l!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(c,l):this._context.moveTo(c,l);break;case 1:this._point=2;break;case 2:this._point=3,x6(this,Fue(this,a=Rue(this,c,l)),a);break;default:x6(this,this._t0,a=Rue(this,c,l))}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=l,this._t0=a}}},(Nue.prototype=Object.create(hE.prototype)).point=function(c,l){hE.prototype.point.call(this,l,c)},Lue.prototype={moveTo:function(c,l){this._context.moveTo(l,c)},closePath:function(){this._context.closePath()},lineTo:function(c,l){this._context.lineTo(l,c)},bezierCurveTo:function(c,l,a,h,d,f){this._context.bezierCurveTo(l,c,h,a,f,d)}},Bue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var c=this._x,l=this._y,a=c.length;if(a)if(this._line?this._context.lineTo(c[0],l[0]):this._context.moveTo(c[0],l[0]),2===a)this._context.lineTo(c[1],l[1]);else for(var h=Vue(c),d=Vue(l),f=0,p=1;p<a;++f,++p)this._context.bezierCurveTo(h[0][f],d[0][f],h[1][f],d[1][f],c[p],l[p]);(this._line||0!==this._line&&1===a)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(c,l){this._x.push(+c),this._y.push(+l)}},dE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(c,l){switch(c=+c,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,l):this._context.moveTo(c,l);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,l),this._context.lineTo(c,l);else{var a=this._x*(1-this._t)+c*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,l)}}this._x=c,this._y=l}};var $ue="%Y-%m-%dT%H:%M:%S.%LZ",iKe=Date.prototype.toISOString?function nKe(c){return c.toISOString()}:XM($ue);const rKe=iKe;var oKe=+new Date("2000-01-01T00:00:00.000Z")?function sKe(c){var l=new Date(c);return isNaN(l)?null:l}:s6($ue);const aKe=oKe;function lKe(c,l,a){var h=new vw,d=l;return null==l?(h.restart(c,l,a),h):(h._restart=h.restart,h.restart=function(f,p,g){p=+p,g=null==g?mw():+g,h._restart(function m(v){v+=d,h._restart(m,d+=p,g),f(v)},p,g)},h.restart(c,l,a),h)}const fE=c=>()=>c;function cKe(c,{sourceEvent:l,target:a,transform:h,dispatch:d}){Object.defineProperties(this,{type:{value:c,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:h,enumerable:!0,configurable:!0},_:{value:d}})}function Cd(c,l,a){this.k=c,this.x=l,this.y=a}Cd.prototype={constructor:Cd,scale:function(c){return 1===c?this:new Cd(this.k*c,this.x,this.y)},translate:function(c,l){return 0===c&0===l?this:new Cd(this.k,this.x+this.k*c,this.y+this.k*l)},apply:function(c){return[c[0]*this.k+this.x,c[1]*this.k+this.y]},applyX:function(c){return c*this.k+this.x},applyY:function(c){return c*this.k+this.y},invert:function(c){return[(c[0]-this.x)/this.k,(c[1]-this.y)/this.k]},invertX:function(c){return(c-this.x)/this.k},invertY:function(c){return(c-this.y)/this.k},rescaleX:function(c){return c.copy().domain(c.range().map(this.invertX,this).map(c.invert,c))},rescaleY:function(c){return c.copy().domain(c.range().map(this.invertY,this).map(c.invert,c))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var pE=new Cd(1,0,0);function Wue(c){for(;!c.__zoom;)if(!(c=c.parentNode))return pE;return c.__zoom}function T6(c){c.stopImmediatePropagation()}function sS(c){c.preventDefault(),c.stopImmediatePropagation()}function uKe(c){return!(c.ctrlKey&&"wheel"!==c.type||c.button)}function hKe(){var c=this;return c instanceof SVGElement?(c=c.ownerSVGElement||c).hasAttribute("viewBox")?[[(c=c.viewBox.baseVal).x,c.y],[c.x+c.width,c.y+c.height]]:[[0,0],[c.width.baseVal.value,c.height.baseVal.value]]:[[0,0],[c.clientWidth,c.clientHeight]]}function Gue(){return this.__zoom||pE}function dKe(c){return-c.deltaY*(1===c.deltaMode?.05:c.deltaMode?1:.002)*(c.ctrlKey?10:1)}function fKe(){return navigator.maxTouchPoints||"ontouchstart"in this}function pKe(c,l,a){var h=c.invertX(l[0][0])-a[0][0],d=c.invertX(l[1][0])-a[1][0],f=c.invertY(l[0][1])-a[0][1],p=c.invertY(l[1][1])-a[1][1];return c.translate(d>h?(h+d)/2:Math.min(0,h)||Math.max(0,d),p>f?(f+p)/2:Math.min(0,f)||Math.max(0,p))}function gKe(){var y,_,b,c=uKe,l=hKe,a=pKe,h=dKe,d=fKe,f=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],g=250,m=nle,v=f_("start","zoom","end"),C=500,S=0,w=10;function T(N){N.property("__zoom",Gue).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",z).filter(d).on("touchstart.zoom",U).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function O(N,$){return($=Math.max(f[0],Math.min(f[1],$)))===N.k?N:new Cd($,N.x,N.y)}function k(N,$,H){var G=$[0]-H[0]*N.k,W=$[1]-H[1]*N.k;return G===N.x&&W===N.y?N:new Cd(N.k,G,W)}function D(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function M(N,$,H,G){N.on("start.zoom",function(){A(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(G).end()}).tween("zoom",function(){var W=this,j=arguments,Q=A(W,j).event(G),J=l.apply(W,j),te=null==H?D(J):"function"==typeof H?H.apply(W,j):H,ce=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ae=W.__zoom,Se="function"==typeof $?$.apply(W,j):$,_e=m(ae.invert(te).concat(ce/ae.k),Se.invert(te).concat(ce/Se.k));return function(Me){if(1===Me)Me=Se;else{var Qe=_e(Me),Ie=ce/Qe[2];Me=new Cd(Ie,te[0]-Qe[0]*Ie,te[1]-Qe[1]*Ie)}Q.zoom(null,Me)}})}function A(N,$,H){return!H&&N.__zooming||new L(N,$)}function L(N,$){this.that=N,this.args=$,this.active=0,this.sourceEvent=null,this.extent=l.apply(N,$),this.taps=0}function E(N,...$){if(c.apply(this,arguments)){var H=A(this,$).event(N),G=this.__zoom,W=Math.max(f[0],Math.min(f[1],G.k*Math.pow(2,h.apply(this,arguments)))),j=xc(N);if(H.wheel)(H.mouse[0][0]!==j[0]||H.mouse[0][1]!==j[1])&&(H.mouse[1]=G.invert(H.mouse[0]=j)),clearTimeout(H.wheel);else{if(G.k===W)return;H.mouse=[j,G.invert(j)],o0(this),H.start()}sS(N),H.wheel=setTimeout(Q,150),H.zoom("mouse",a(k(O(G,W),H.mouse[0],H.mouse[1]),H.extent,p))}function Q(){H.wheel=null,H.end()}}function V(N,...$){if(!b&&c.apply(this,arguments)){var H=N.currentTarget,G=A(this,$,!0).event(N),W=po(N.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",ce,!0),j=xc(N,H),Q=N.clientX,J=N.clientY;vk(N.view),T6(N),G.mouse=[j,this.__zoom.invert(j)],o0(this),G.start()}function te(ae){if(sS(ae),!G.moved){var Se=ae.clientX-Q,_e=ae.clientY-J;G.moved=Se*Se+_e*_e>S}G.event(ae).zoom("mouse",a(k(G.that.__zoom,G.mouse[0]=xc(ae,H),G.mouse[1]),G.extent,p))}function ce(ae){W.on("mousemove.zoom mouseup.zoom",null),yk(ae.view,G.moved),sS(ae),G.event(ae).end()}}function z(N,...$){if(c.apply(this,arguments)){var H=this.__zoom,G=xc(N.changedTouches?N.changedTouches[0]:N,this),W=H.invert(G),j=H.k*(N.shiftKey?.5:2),Q=a(k(O(H,j),G,W),l.apply(this,$),p);sS(N),g>0?po(this).transition().duration(g).call(M,Q,G,N):po(this).call(T.transform,Q,G,N)}}function U(N,...$){if(c.apply(this,arguments)){var j,Q,J,te,H=N.touches,G=H.length,W=A(this,$,N.changedTouches.length===G).event(N);for(T6(N),Q=0;Q<G;++Q)te=[te=xc(J=H[Q],this),this.__zoom.invert(te),J.identifier],W.touch0?!W.touch1&&W.touch0[2]!==te[2]&&(W.touch1=te,W.taps=0):(W.touch0=te,j=!0,W.taps=1+!!y);y&&(y=clearTimeout(y)),j&&(W.taps<2&&(_=te[0],y=setTimeout(function(){y=null},C)),o0(this),W.start())}}function Z(N,...$){if(this.__zooming){var j,Q,J,te,H=A(this,$).event(N),G=N.changedTouches,W=G.length;for(sS(N),j=0;j<W;++j)J=xc(Q=G[j],this),H.touch0&&H.touch0[2]===Q.identifier?H.touch0[0]=J:H.touch1&&H.touch1[2]===Q.identifier&&(H.touch1[0]=J);if(Q=H.that.__zoom,H.touch1){var ce=H.touch0[0],ae=H.touch0[1],Se=H.touch1[0],_e=H.touch1[1],Me=(Me=Se[0]-ce[0])*Me+(Me=Se[1]-ce[1])*Me,Qe=(Qe=_e[0]-ae[0])*Qe+(Qe=_e[1]-ae[1])*Qe;Q=O(Q,Math.sqrt(Me/Qe)),J=[(ce[0]+Se[0])/2,(ce[1]+Se[1])/2],te=[(ae[0]+_e[0])/2,(ae[1]+_e[1])/2]}else{if(!H.touch0)return;J=H.touch0[0],te=H.touch0[1]}H.zoom("touch",a(k(Q,J,te),H.extent,p))}}function Y(N,...$){if(this.__zooming){var j,Q,H=A(this,$).event(N),G=N.changedTouches,W=G.length;for(T6(N),b&&clearTimeout(b),b=setTimeout(function(){b=null},C),j=0;j<W;++j)Q=G[j],H.touch0&&H.touch0[2]===Q.identifier?delete H.touch0:H.touch1&&H.touch1[2]===Q.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),2===H.taps&&(Q=xc(Q,this),Math.hypot(_[0]-Q[0],_[1]-Q[1])<w)){var J=po(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return T.transform=function(N,$,H,G){var W=N.selection?N.selection():N;W.property("__zoom",Gue),N!==W?M(N,$,H,G):W.interrupt().each(function(){A(this,arguments).event(G).start().zoom(null,"function"==typeof $?$.apply(this,arguments):$).end()})},T.scaleBy=function(N,$,H,G){T.scaleTo(N,function(){var W=this.__zoom.k,j="function"==typeof $?$.apply(this,arguments):$;return W*j},H,G)},T.scaleTo=function(N,$,H,G){T.transform(N,function(){var W=l.apply(this,arguments),j=this.__zoom,Q=null==H?D(W):"function"==typeof H?H.apply(this,arguments):H,J=j.invert(Q),te="function"==typeof $?$.apply(this,arguments):$;return a(k(O(j,te),Q,J),W,p)},H,G)},T.translateBy=function(N,$,H,G){T.transform(N,function(){return a(this.__zoom.translate("function"==typeof $?$.apply(this,arguments):$,"function"==typeof H?H.apply(this,arguments):H),l.apply(this,arguments),p)},null,G)},T.translateTo=function(N,$,H,G,W){T.transform(N,function(){var j=l.apply(this,arguments),Q=this.__zoom,J=null==G?D(j):"function"==typeof G?G.apply(this,arguments):G;return a(pE.translate(J[0],J[1]).scale(Q.k).translate("function"==typeof $?-$.apply(this,arguments):-$,"function"==typeof H?-H.apply(this,arguments):-H),j,p)},G,W)},L.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,$){return this.mouse&&"mouse"!==N&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&"touch"!==N&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&"touch"!==N&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var $=po(this.that).datum();v.call(N,this.that,new cKe(N,{sourceEvent:this.sourceEvent,target:T,type:N,transform:this.that.__zoom,dispatch:v}),$)}},T.wheelDelta=function(N){return arguments.length?(h="function"==typeof N?N:fE(+N),T):h},T.filter=function(N){return arguments.length?(c="function"==typeof N?N:fE(!!N),T):c},T.touchable=function(N){return arguments.length?(d="function"==typeof N?N:fE(!!N),T):d},T.extent=function(N){return arguments.length?(l="function"==typeof N?N:fE([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),T):l},T.scaleExtent=function(N){return arguments.length?(f[0]=+N[0],f[1]=+N[1],T):[f[0],f[1]]},T.translateExtent=function(N){return arguments.length?(p[0][0]=+N[0][0],p[1][0]=+N[1][0],p[0][1]=+N[0][1],p[1][1]=+N[1][1],T):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},T.constrain=function(N){return arguments.length?(a=N,T):a},T.duration=function(N){return arguments.length?(g=+N,T):g},T.interpolate=function(N){return arguments.length?(m=N,T):m},T.on=function(){var N=v.on.apply(v,arguments);return N===v?T:N},T.clickDistance=function(N){return arguments.length?(S=(N=+N)*N,T):Math.sqrt(S)},T.tapDistance=function(N){return arguments.length?(w=+N,T):w},T}Wue.prototype=Cd.prototype;class A0{constructor(l,a,h){this.first=l,this.second=a,this.third=h}isSecond(){return!!this.second}isThird(){return!!this.third}toArrays(){let l=[this.first];return this.second&&l.push(this.second),this.third&&l.push(this.third),l}}class I0{constructor(l,a,h,d,f,p,g,m,v,y,_,b,C,x,S,w,T,O){this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442=l,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=a,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443=h,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=d,this.scale=f,this.width=p,this.height=g,this.delta=m,this.lineWidth=v,this.lineSizeExtra=y,this.colorBackground=_,this.colorMain=b,this.colorText=C,this.colorCircles=x,this.colorLines=S,this.colorLinesHighlighted=w,this.colorLinesSecondary=T,this.svgImage=O,this.rects=[],this.lines=[],this.linesPlate=[],this.texts=[],this.circles=[],this.ellipses=[],this.pathes=[],this.onItemSelected=null,this.params=new Map,this.fontLineRelativeOffset=.75,this.fontSize=20,this.fontWeight=700}addParam(l,a){return this.params.set(l,a),this}getParam(l){return this.params.get(l)}setColorBackground(l){return this.colorBackground=l,this}setColorMain(l){return this.colorMain=l,this}setColorText(l){return this.colorText=l,this}setColorLines(l){return this.colorLines=l,this}setWidth(l){return this.width=l,this}setHeight(l){return this.height=l,this}setFontSize(l){return this.fontSize=l,this}setFontLineRelativeOffset(l){return this.fontLineRelativeOffset=l,this}setFontWeight(l){return this.fontWeight=l,this}setLineWidth(l){return this.lineWidth=l,this}static builder(){return new I0(!0,!0,!1,!0,.5,512,512,Math.min(512,512)/15,2,Math.min(512,512)/20,"black","gold","firebrick","red","white","green","cyan",null)}clearAll(){return this.rects=[],this.lines=[],this.linesPlate=[],this.texts=[],this.circles=[],this.ellipses=[],this.pathes=[],this}}class zi{constructor(l,a){this.x=l,this.y=a}}class gE{constructor(l,a,h){this.name=l,this.x=a,this.y=h}static builder(){return new gE("translate",0,0)}setName(l){return this.name=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}}class mE{constructor(l,a,h){this.name=l,this.x=a,this.y=h}static builder(){return new mE("scale",0,0)}setName(l){return this.name=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}}class O6{constructor(l,a,h=0,d=0){this.name=l,this.angle=a,this.x=h,this.y=d}static builder(){return new O6("rotate",0)}setName(l){return this.name=l,this}setAngle(l){return this.angle=l,this}setRotationX(l){return this.x=l,this}setRotationY(l){return this.y=l,this}}class D6{constructor(l,a){this.name=l,this.angle=a}static builder(){return new D6("skewY",0)}setName(l){return this.name=l,this}setAngle(l){return this.angle=l,this}}class k6{constructor(l,a){this.name=l,this.angle=a}static builder(){return new k6("skewX",0)}setName(l){return this.name=l,this}setAngle(l){return this.angle=l,this}}class Ui{constructor(l,a){this.name=l,this.func=a}static builder(){return new Ui("",null)}setName(l){return this.name=l,this}setFunc(l){return this.func=l,this}}class J_{constructor(l,a=[],h=[],d=!0,f=null){this.transform=l,this.classes=a,this.events=h,this.visible=d,this.transitions=f,this.d3Object=null}transformToString(l=null){return(l||this.transform).map((h,d)=>{let f=`${h.name}(`;return"translate"==h.name||"scale"==h.name?f+=`${h.x},${h.y}`:"rotate"==h.name?(f+=h.angle,(h.x||h.y)&&(f+=`,${h.x},${h.y}`)):("skewY"==h.name||"skewX"==h.name)&&(f+=h.angle),f+=")",f}).join(" ")}apply(l,a,h=null,d=null){var f=h||this.d3Object;if(null==f)return null;var p=f.transition().delay(l).duration(a);return d&&(p=p.on("end",d)),this.applyToD3Object(p)}applyToD3Object(l=null){return null}applyEventsToD3Object(l=null){var a=this,h=l;if(a.events.forEach(d=>{h=h.on(d.name,d.func)}),a.d3Object=h,a.transitions&&a.transitions.length){let d=!1,f=()=>{let p=null;d&&a.transitions&&a.transitions.length&&a.transitions.shift(),a.transitions&&a.transitions.length>0&&(p=a.transitions[0]),null!=p&&(d=!0,p.data.clone(a),h=(h=p.apply(h)).on("end",f))};f()}return h}emulateCollapseTransitions(){return this.transitions&&this.transitions.length>0&&(this.d3Object.interrupt(),this.transitions[this.transitions.length-1].data.cloneTo(this),this.transitions=[]),this}setTransforms(l){return this.transform=l,this}translate(l,a){return this.transform.push(gE.builder().setX(l).setY(a)),this}scale(l,a){return this.transform.push(mE.builder().setX(l).setY(a)),this}rotate(l,a=0,h=0){return this.transform.push(O6.builder().setAngle(l).setRotationX(a).setRotationY(h)),this}skewY(l){return this.transform.push(D6.builder().setAngle(l)),this}skewX(l){return this.transform.push(k6.builder().setAngle(l)),this}setClasses(l){return this.classes=l,this}addClass(l){return this.classes.indexOf(l)<0&&this.classes.push(l),this}removeClass(l){let a=this.classes.indexOf(l);return a>=0&&this.classes.splice(a,1),this}addEvent(l){return this.events.push(l),this}setVisible(l){return this.visible=l,this}getVisible(){return this.visible}setTransitions(l){return this.transitions=l,this}addTransition(l){return null==this.transitions&&(this.transitions=[]),this.transitions.push(l),this}}class vE{constructor(l,a=0,h=1e3){this.data=l,this.delay=a,this.duration=h}static builder(){return new vE(null)}setData(l){return this.data=l,this}setDelay(l){return this.delay=l,this}setDuration(l){return this.duration=l,this}apply(l=null){return this.data.apply(this.delay,this.duration,l)}}class pi extends J_{constructor(l,a,h,d,f,p,g,m,v,y,_=300){super(y),this.text=l,this.x=a,this.y=h,this.color=d,this.strokeColor=f,this.strokeWidth=p,this.angle=g,this.fontSize=m,this.textAnchor=v,this.fontWeight=_}applyToD3Object(l=null){var h=this;return(l||this.d3Object).attr("x",0*h.x).attr("y",0*h.y).attr("font-size",h.fontSize).attr("font-weight",h.fontWeight).attr("text-anchor",h.textAnchor).attr("transform",this.transformToString(h.transform||[])).style("stroke",h.strokeColor).style("stroke-width",h.strokeWidth).style("fill",h.color).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden")}clone(l=null){return(l||pi.builder()).setText(this.text).setX(this.x).setY(this.y).setColor(this.color).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setAngle(this.angle).setFontSize(this.fontSize).setTextAnchor(this.textAnchor).setFontWeight(this.fontWeight).setTransitions(null).setTransforms([...this.transform]).setClasses([...this.classes])}static builder(){return new pi("\u0422\u0435\u043a\u0441\u0442",0,0,"firebrick","black",0,0,"20px","start",[])}setBold(l=!0){return this.fontWeight=l?700:300,this}setFontWeight(l){return this.fontWeight=l,this}setText(l){return this.text=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setColor(l){return this.color=l,this}setStrokeColor(l){return this.strokeColor=l,this}setStrokeWidth(l){return this.strokeWidth=l,this}setAngle(l){return this.angle=l,this}setTextAnchor(l){return this.textAnchor=l,this}setFontSize(l){return this.fontSize=l,this}}class fg extends J_{constructor(l,a,h,d,f,p){super(p),this.r=l,this.fillColor=a,this.fillOpacity=h,this.strokeColor=d,this.strokeWidth=f}clone(l=null){return(l||fg.builder()).setR(this.r).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setTransforms([...this.transform]).setTransitions(null).setClasses([...this.classes])}applyToD3Object(l=null){var h=this;return(l||this.d3Object).attr("cx",0).attr("cy",0).attr("r",h.r).attr("fill",h.fillColor).attr("fill-opacity",h.fillOpacity).attr("stroke",h.strokeColor).attr("stroke-width",h.strokeWidth).attr("transform",this.transformToString(h&&h.transform||[])).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden")}static builder(){return new fg(100,"green",1,"white",2,[])}setR(l){return this.r=l,this}setFillColor(l){return this.fillColor=l,this}setFillOpacity(l){return this.fillOpacity=l,this}setStrokeColor(l){return this.strokeColor=l,this}setStrokeWidth(l){return this.strokeWidth=l,this}}class M6 extends J_{constructor(l,a,h,d,f,p,g){super(g),this.rx=l,this.ry=a,this.fillColor=h,this.fillOpacity=d,this.strokeColor=f,this.strokeWidth=p}static builder(){return new M6(100,50,"green",1,"white",2,[])}setRx(l){return this.rx=l,this}setRy(l){return this.ry=l,this}setFillColor(l){return this.fillColor=l,this}setFillOpacity(l){return this.fillOpacity=l,this}setStrokeColor(l){return this.strokeColor=l,this}setStrokeWidth(l){return this.strokeWidth=l,this}}class gi extends J_{constructor(l,a,h,d,f,p,g,m,v){super(v),this.x1=l,this.y1=a,this.x2=h,this.y2=d,this.color=f,this.width=p,this.startArrow=g,this.endArrow=m}clone(){return gi.builder().setX1(this.x1).setY1(this.y1).setX2(this.x2).setY2(this.y2).setColor(this.color).setWidth(this.width).setStartArrow(this.startArrow).setEndArrow(this.endArrow).setTransforms(this.transform?[...this.transform]:[]).setTransitions(null)}static builder(){return new gi(0,0,0,0,"white",1,"","",[])}setX1(l){return this.x1=l,this}setY1(l){return this.y1=l,this}setX2(l){return this.x2=l,this}setY2(l){return this.y2=l,this}setColor(l){return this.color=l,this}setWidth(l){return this.width=l,this}setStartArrow(l){return this.startArrow=l,this}setEndArrow(l){return this.endArrow=l,this}}class ws extends J_{constructor(l,a,h,d,f,p,g,m,v,y,_,b,C){super(C),this.x=l,this.y=a,this.rx=h,this.ry=d,this.width=f,this.height=p,this.fillColor=g,this.fillOpacity=m,this.strokeColor=v,this.strokeOpacity=y,this.strokeWidth=_,this.locked=b}static builder(){return new ws(0,0,0,0,100,100,"white",1,"",1,0,!1,[])}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setWidth(l){return this.width=l,this}setHeight(l){return this.height=l,this}setRx(l){return this.rx=l,this}setRy(l){return this.ry=l,this}setFillColor(l){return this.fillColor=l,this}setFillOpacity(l){return this.fillOpacity=l,this}setStrokeColor(l){return this.strokeColor=l,this}setStrokeOpacity(l){return this.strokeOpacity=l,this}setStrokeWidth(l){return this.strokeWidth=l,this}setLocked(l){return this.locked=l,this}}class hs extends J_{constructor(l,a,h,d,f,p,g,m,v){super(m),this.datum=l,this.d=a,this.strokeColor=h,this.strokeWidth=d,this.strokeOpacity=f,this.fillColor=p,this.fillOpacity=g,this.renderHandler=v}clone(l=null){return(l||hs.builder()).setD(this.datum).setD(this.d).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setStrokeOpacity(this.strokeOpacity).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setTransforms([...this.transform]).setTransitions(null).setRenderHandler(this.renderHandler).setClasses([...this.classes])}applyToD3Object(l=null){var h=this;return(l||this.d3Object).attr("d",h.d).attr("fill",h.fillColor).attr("fill-opacity",h.fillOpacity).attr("stroke",h.strokeColor).attr("stroke-width",h.strokeWidth).attr("stroke-opacity",h.strokeOpacity||1).attr("transform",this.transformToString(h.transform||[])).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden")}static builder(){return new hs(null,null,"steelblue",2,1,"none",1,[],null)}setDatum(l){return this.datum=l,this}setD(l){return this.d=l,this}setStrokeColor(l){return this.strokeColor=l,this}setStrokeWidth(l){return this.strokeWidth=l,this}setStrokeOpacity(l){return this.strokeOpacity=l,this}setFillColor(l){return this.fillColor=l,this}setFillOpacity(l){return this.fillOpacity=l,this}setRenderHandler(l){return this.renderHandler=l,this}}let yE=(()=>{class c{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(a){return 1/(a*(Math.sqrt(5)+1)/2)}createDataScale(a,h,d){let f=h(a),p=a.scale,g=a.width*(1-p)/2,m=a.height*(1-p)/2;return f.toArrays().forEach(v=>{v.forEach(y=>{y.locked||(y.transform=y.transform||[],y.transform.unshift(gE.builder().setX(g).setY(m),mE.builder().setX(p).setY(p)))})}),d(a,f),f}get createDataPtr(){return a=>this.createData(a)}get createGolgofaDataPtr(){return a=>this.createData(a,1,1-.8,.27,.6,Math.PI/8)}createBackground(a,h=1){return ws.builder().setX(0).setY(0).setWidth(a.width).setHeight(a.height).setFillColor(a.colorBackground).setFillOpacity(h).setLocked(!0)}createCrossText(a,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),v=a.width*(h||m),y=g||Math.atan2(1-m,.5),_=v*(d||1-m),b=v*(f||1-m),C=v*(f||.25),x=p?a.height*p+C*Math.tan(y):a.height-v/2,S=x+C*Math.tan(y)/2+a.delta/Math.cos(y)/2,w=(a.height+x+C*Math.tan(y)/2+a.delta/Math.cos(y)/2)/2,T=+(a.height-(x+C*Math.tan(y)/2+a.delta/Math.cos(y)/2)-a.height/12)/2/2,O=.55*a.width,k=[pi.builder().setText("\u0446\u0440\u0483\u044c").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(a.colorMain).translate(a.width/2-b/2,(d?(v*(d||1-m)-a.delta/2)/2:v*Math.pow(1-m,2))-2*a.delta).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),pi.builder().setText("\u0441\u043b\u0483\u0432\u044b").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(a.colorMain).translate(a.width/2+b/2,(d?(v*(d||1-m)-a.delta/2)/2:v*Math.pow(1-m,2))-2*a.delta).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),pi.builder().setText("\u0406\u0483\u0421").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(a.colorMain).translate((a.width-v)/2,_-a.delta).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),pi.builder().setText("\u0425\u0483\u0421").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(a.colorMain).translate((a.width+v)/2,_-a.delta).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),pi.builder().setText("\u0441\u043d\u0483\u044a").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-v)/2,_+2*a.delta).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),pi.builder().setText("\u0431\u0436\u0483\u0457\u0439").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+v)/2,_+2*a.delta).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),pi.builder().setText("\u043d\u0438").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(a.colorMain).translate((a.width-C)/2,(x-C/Math.cos(y)/2+(_+2*a.delta))/2-a.height/12/2).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),pi.builder().setText("\u043a\u0430").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(a.colorMain).translate((a.width+C)/2,(x-C/Math.cos(y)/2+(_+2*a.delta))/2-a.height/12/2).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),pi.builder().setText("\u043c").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-C)/2,S+T).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),pi.builder().setText("\u043b").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+C)/2,S+T).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),pi.builder().setText("\u0440").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-C)/2,w+T).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),pi.builder().setText("\u0431").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+C)/2,w+T).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),pi.builder().setText("\u0433").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2-(O/2+a.delta/2*3/2),a.height).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),pi.builder().setText("\u0433").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2+(O/2+a.delta/2*3/2),a.height).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),pi.builder().setText("\u043a").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2-(O/2+a.delta/2*3/2),_+.3*(a.height-_)+a.height/12).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})),pi.builder().setText("\u0442").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate(a.width/2+(O/2+a.delta/2*3/2),_+.3*(a.height-_)+a.height/12).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})),pi.builder().setText("\u0433").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width-C)/2,a.height+2*a.delta+a.height/12/2).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})),pi.builder().setText("\u0430").setFontSize(a.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(a.colorMain).translate((a.width+C)/2,a.height+2*a.delta+a.height/12/2).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")}))];return[k].forEach(D=>D.forEach(M=>M.addClass("cursor"))),[k]}createKopie(a,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),S=(p&&Math.tan(y),[]),w=a.delta/2/4,T=a.height*(1-d)*.8,M=[a.width/2-a.delta/2*5,a.height+a.delta/2],L=(U,Z,Y="gold")=>{let N=(U=>({dd:U||[[0,0],[1,1],[1,-1],[0,0]],path:mh().x(N=>N[0]).y(N=>N[1])}))(Z);return((U,Z,Y)=>U.rotate(-9,Y[0],Y[1]))(hs.builder().setDatum(N.dd).setD(N.path).setStrokeColor(Y).setStrokeWidth(1).setFillColor(Y).translate(U[0],U[1]),0,M)},E=(U,Z,Y,N)=>{let $=[];return U.forEach(H=>{let G=[];G.push(H[0]*Z+Y),G.push(H[1]*Z+N),$.push(G)}),$},V=a.colorMain,z=[L([0,0],E([[-w,0],[-w,-T],[w,-T],[w,0],[-w,0]],1,M[0],M[1]),V),L([0,0],E([[0,2*w-T],[2*-w,-T-2*w],[0,-T-16*w],[2*+w,-T-2*w],[0,2*w-T]],1,M[0],M[1]),V),L([0,0],E([[3*-w/2,2*w-T],[0,-T-2*w],[3*+w/2,2*w-T],[3*-w/2,2*w-T]],1,M[0],M[1]),V),L([0,0],E([[3*-w/2,6*w-T],[0,2*w-T],[3*+w/2,6*w-T],[3*-w/2,6*w-T]],1,M[0],M[1]),V)];return[S,z].forEach(U=>U.forEach(Z=>Z.addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})).addClass("cursor"))),new A0(S,z)}createTrost(a,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),w=(p&&Math.tan(y),a.delta/2/4),T=a.height*(1-d)*.8,D=[a.width/2+a.delta/2*5,a.height+a.delta/2],A=(z,U,Z="gold",Y=!1)=>{let N=((z,U=!1)=>{let Z=z||[[0,0],[1,1],[1,-1],[0,0]];const Y=mh().x(N=>N[0]).y(N=>N[1]);return{dd:Z,path:U?Y.curve(rS):Y}})(U,Y);return((z,U,Z)=>z.rotate(9,Z[0],Z[1]))(hs.builder().setDatum(N.dd).setD(N.path).setStrokeColor(Z).setStrokeWidth(1).setFillColor(Z).translate(z[0],z[1]),0,D)},L=(z,U,Z,Y)=>{let N=[];return z.forEach($=>{let H=[];H.push($[0]*U+Z),H.push($[1]*U+Y),N.push(H)}),N},E=a.colorMain,V=[A([0,0],L([[-w,0],[-w,-T-3*w],[w,-T-3*w],[w,0],[-w,0]],1,D[0],D[1]),E),A([0,0],L([[0,-T-2*w],[5*-w,-T-2*w],[5*-w,-T-16*w],[0,-T-16*w],[5*+w,-T-16*w],[5*+w,-T-2*w],[0,-T-2*w]],1,D[0],D[1]),E,!0),A([0,0],L([[3*-w/2,2*w-T],[0,-T-2*w],[3*+w/2,2*w-T],[3*-w/2,2*w-T]],1,D[0],D[1]),E),A([0,0],L([[3*-w/2,6*w-T],[0,2*w-T],[3*+w/2,6*w-T],[3*-w/2,6*w-T]],1,D[0],D[1]),E)];return V.forEach(z=>z.addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})).addClass("cursor")),new A0([],V)}createSkull(a,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),S=(p&&Math.tan(y),[]),w=.55*a.width,O=0*a.delta/4/2,k=a.delta/4/2,D=(Oe,Ze)=>Ze*(1.75*a.delta+2*Oe),M=(Oe,Ze)=>Ze*(1.75*a.delta+2*Oe),A=.5,V=.5,z=(Oe,Ze)=>V*D(Oe,Ze)/2/2,U=1.15,N=(Oe,Ze)=>D(Oe,Ze)*V/3.8,$=(Oe,Ze)=>D(Oe,Ze)*V/2.25,W=1/5.7,j=(Oe,Ze)=>D(Oe,Ze)/2,Q=(Oe,Ze)=>D(Oe,Ze)/2,ae=(D(O,1),D(O,1),2*k),Se=(Oe,Ze,Gt,Tn)=>Oe.setX(Ze[0]).setY(Ze[1]).rotate(Gt,Tn[0],Tn[1]),Me=Oe=>[a.width/2-D(O,Oe)/2+j(O,Oe),a.height+a.delta-O+k+ae+Q(O,Oe)],Qe=1.5;S.push(ws.builder().setX(a.width/2-w/2).setY(a.height-Qe).setWidth(w).setHeight(a.delta+Qe).setFillColor(a.colorMain),ws.builder().setX(a.width/2-w/2-a.delta/2*3).setY(a.height+a.delta-Qe).setWidth(2.5*a.delta).setHeight(a.delta+Qe).setFillColor(a.colorMain),ws.builder().setX(a.width/2+w/2-a.delta).setY(a.height+a.delta-Qe).setWidth(2.5*a.delta).setHeight(a.delta+Qe).setFillColor(a.colorMain),ws.builder().setX(a.width/2-w/2-a.delta/2*3).setY(a.height+2*a.delta-Qe).setWidth(a.delta).setHeight(a.delta+Qe).setFillColor(a.colorMain),ws.builder().setX(a.width/2+w/2+a.delta/2).setY(a.height+2*a.delta-Qe).setWidth(a.delta).setHeight(a.delta+Qe).setFillColor(a.colorMain)),S.forEach(Oe=>Oe.addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})).addClass("cursor"));let Ve=(Oe,Ze)=>{S.push(Se(ws.builder().setRx(.7*D(O,Oe)/2*.9).setRy(.7*M(O,Oe)/2*.9).setWidth(D(O,Oe)).setHeight(.7*M(O,Oe)).setFillColor(Ze?a.colorBackground:a.colorMain),[a.width/2-D(O,Oe)/2,a.height+a.delta+O+k+ae],-45,Me(Oe)),Se(ws.builder().setRx(.4*M(O,Oe)/2*.8).setRy(.4*M(O,Oe)/2*.8).setWidth(V*D(O,Oe)).setHeight(.4*M(O,Oe)).setFillColor(Ze?a.colorBackground:a.colorMain),[a.width/2-V*D(O,Oe)/2+z(O,Oe),a.height+a.delta+O+k+M(O,Oe)*A+ae],-45,Me(Oe)),Se(ws.builder().setRx($(O,Oe)/2).setRy($(O,Oe)/2).setWidth($(O,Oe)*U).setHeight($(O,Oe)).setFillColor(Ze?a.colorMain:a.colorBackground),[a.width/2+z(O,Oe)-N(O,Oe)/2+N(O,Oe)/2-$(O,Oe)*U/2-D(O,Oe)*W*1,a.height+a.delta+O+k+M(O,Oe)*A/2+ae],-45,Me(Oe)),Se(ws.builder().setRx($(O,Oe)/2).setRy($(O,Oe)/2).setWidth($(O,Oe)*U).setHeight($(O,Oe)).setFillColor(Ze?a.colorMain:a.colorBackground),[a.width/2+z(O,Oe)-N(O,Oe)/2+N(O,Oe)/2-$(O,Oe)*U/2+D(O,Oe)*W,a.height+a.delta+O+k+M(O,Oe)*A/2+ae],-45,Me(Oe)))};"white"==a.colorBackground&&Ve(1.15,!1),Ve(1,"white"==a.colorBackground);let st=[],Ye=(Oe,Ze)=>{st.push(((Oe,Ze,Gt="gold",Tn=1)=>{let Gn=(Oe=>({dd:Oe||[[0,0],[1,1],[1,-1],[0,0]],path:mh().x(Tn=>Tn[0]).y(Tn=>Tn[1]).curve(rS)}))(Ze);return((Oe,Ze,Gt)=>Oe.rotate(-45,Gt[0],Gt[1]))(hs.builder().setDatum(Gn.dd).setD(Gn.path).setStrokeColor(Gt).setStrokeWidth(1).setFillColor(Gt).translate(Oe[0],Oe[1]),0,Me(Tn))})([0,0],((Oe,Ze,Gt,Tn)=>{let Gn=[];return[[.5,0],[1,1],[0,1],[.5,0]].forEach(ge=>{let oe=[];oe.push(ge[0]*Ze+Gt),oe.push(ge[1]*Ze+Tn),Gn.push(oe)}),Gn})(0,1.35*N(O,Oe),a.width/2+z(O,Oe)-N(O,Oe)/2,a.height+a.delta+O+k+M(O,Oe)*A+ae),Ze?a.colorMain:a.colorBackground,Oe))};return"white"==a.colorBackground&&Ye(1.15,!1),Ye(1,"white"==a.colorBackground),[S,st].forEach(Oe=>Oe.forEach(Ze=>{0==Ze.events.length&&Ze.addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})).addClass("cursor")})),new A0(S,st)}createCross(a,h=!0,d=0,f=0,p=0,g=0,m=0,v=0,y=0,_=0,b=0){let C=d,x=f,S=p||a.width,w=g||a.height,T=a.delta/a.width*S,O=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),k=S*(m||O),D=b||Math.atan2(1-O,.5),M=k*(v||1-O),A=k*(y||1-O),L=k*(y||.25),E=_?w*_+L*Math.tan(D):w-k/2,V=h?[ws.builder().setX(C).setY(x).setWidth(S).setHeight(w).setFillColor(a.colorBackground).setLocked(!0)]:[];return V.push(ws.builder().setX(C+S/2-T/2).setY(x).setWidth(T).setHeight(w).setFillColor(a.colorMain).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),ws.builder().setX(C+(S-k)/2).setY(x+M-T/2).setWidth(k).setHeight(T).setFillColor(a.colorMain).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),ws.builder().setX(0).setY(0).setWidth(A).setHeight(T).setFillColor(a.colorMain).translate(C+(S-A)/2,x+(v?(k*(v||1-O)-T/2)/2:k*Math.pow(1-O,2))-T/2).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439")})),ws.builder().setX(0).setY(0).setWidth(L).setHeight(T/Math.cos(D)).setFillColor(a.colorMain).translate(C+(S-L)/2,x+E-L/Math.cos(D)/2).skewY(this.toDegrees(D)).addEvent(Ui.builder().setName("click").setFunc(()=>{a.onItemSelected&&a.onItemSelected("\u043a\u0440\u0435\u0441\u0442")}))),V}createData(a,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),S=(p&&Math.tan(y),this.createCross(a,!0,0,0,0,0,h,d,f,p,g));[S].forEach(k=>k.forEach((D,M)=>{M&&D.addClass("cursor")}));let w=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?new A0([],[]):this.createSkull(a,h,d,f,p,g);S.push(...w.first);let T=w.second;w=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?w:this.createKopie(a,h,d,f,p,g),S.push(...w.first),T.push(...w.second),w=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?w:this.createTrost(a,h,d,f,p,g),S.push(...w.first),T.push(...w.second);let O=a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?[[],[]]:this.createCrossText(a,h,d,f,p,g);return new A0(S,T,O[0])}createSizeHorizontalArrows(a,h,d,f,p,g=!0,m=!0,v="",y=""){let _=h.y<d.y?h:d,b=h.y<d.y?d:h,C=a.lineSizeExtra*(_.x<f.x?1:-1),x=[],S=[gi.builder().setX1(_.x).setY1(_.y).setX2(f.x+C).setY2(_.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth),gi.builder().setX1(b.x).setY1(b.y).setX2(f.x+C).setY2(b.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)];if(_.y<=f.y&&f.y<=b.y){if(S.push(gi.builder().setX1(f.x).setY1(_.y).setX2(f.x).setY2(b.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setStartArrow(g?"arrowN":"arrow").setEndArrow(g?"arrowN":"arrow")),v){let w=Math.abs(C),T=w/2*v.length/2;x.push(pi.builder().setText(v).setFontSize(`${w}px`).translate(f.x-Math.abs(C)/2,(_.y+b.y)/2+T).rotate(-90).setColor("white"))}}else{let w=f.y<_.y?_.y-f.y:f.y-b.y;if(S.push(gi.builder().setX1(f.x).setY1(_.y-w).setX2(f.x).setY2(_.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"arrowN":"arrow"),gi.builder().setX1(f.x).setY1(b.y+w).setX2(f.x).setY2(b.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"arrowN":"arrow")),v){let T=Math.abs(C),O=-T/2*3;x.push(pi.builder().setText(v).setFontSize(`${T}px`).translate(f.x-Math.abs(C)/2,_.y+O).rotate(-90).setColor("white"))}if(y){let T=Math.abs(C),O=T/2*(y.length+3);x.push(pi.builder().setText(y).setFontSize(`${T}px`).translate(f.x-Math.abs(C)/2,b.y+O).rotate(-90).setColor("white"))}m&&(p?S.push(gi.builder().setX1(f.x).setY1(_.y).setX2(f.x).setY2(p.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"pointN":"pointH"),gi.builder().setX1(f.x).setY1(b.y).setX2(f.x).setY2(p.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"pointN":"pointH"),gi.builder().setX1(p.x).setY1(p.y).setX2(f.x+C).setY2(p.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)):S.push(gi.builder().setX1(f.x).setY1(_.y).setX2(f.x).setY2(b.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)))}return[S,x]}createSizeVirtualArrows(a,h,d,f,p,g=!0,m=!0,v="",y=""){let _=h.x<d.x?h:d,b=h.x<d.x?d:h,C=a.lineSizeExtra*(_.y<f.y?1:-1),x=[],S=[gi.builder().setX1(_.x).setY1(_.y).setX2(_.x).setY2(f.y+C).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth),gi.builder().setX1(b.x).setY1(b.y).setX2(b.x).setY2(f.y+C).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)];if(_.x<=f.x&&f.x<=b.x){if(S.push(gi.builder().setX1(_.x).setY1(f.y).setX2(b.x).setY2(f.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setStartArrow(g?"arrowN":"arrow").setEndArrow(g?"arrowN":"arrow")),v){let w=Math.abs(C),T=w/2*v.length/2;x.push(pi.builder().setText(v).setFontSize(`${w}px`).translate((_.x+b.x)/2-T,f.y-Math.abs(C)/2).rotate(0).setColor("white"))}}else{let w=f.x<_.x?_.x-f.x:f.x-b.x;if(S.push(gi.builder().setX1(_.x-w).setY1(f.y).setX2(_.x).setY2(f.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"arrowN":"arrow"),gi.builder().setX1(b.x+w).setY1(f.y).setX2(b.x).setY2(f.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"arrowN":"arrow")),m)if(p){if(S.push(gi.builder().setX1(_.x).setY1(f.y).setX2(p.x).setY2(f.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"pointN":"pointH"),gi.builder().setX1(b.x).setY1(f.y).setX2(p.x).setY2(f.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth).setEndArrow(g?"pointN":"pointH"),gi.builder().setX1(p.x).setY1(p.y).setX2(p.x).setY2(f.y+C).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth)),v){let T=Math.abs(C),O=-T/2*(y.length+3);x.push(pi.builder().setText(v).setFontSize(`${T}px`).translate(_.x+O,f.y-Math.abs(C)/2).rotate(0).setColor("white"))}if(y){let T=Math.abs(C),O=T/2*3;x.push(pi.builder().setText(y).setFontSize(`${T}px`).translate(b.x+O,f.y-Math.abs(C)/2).rotate(0).setColor("white"))}}else S.push(gi.builder().setX1(_.x).setY1(f.y).setX2(b.x).setY2(f.y).setColor(g?a.colorLines:a.colorLinesHighlighted).setWidth(a.lineWidth))}return[S,x]}get createLinesPlateDataPtr(){return a=>this.createLinesPlateData(a)}createLinesPlateData(a){let h=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),d=a.width*h,f=(a.width-d)/2,g=(Math.atan2(1-h,.5),a.lineWidth),m=[],_=a.height/13,b=d/8;for(let C=0;C<=13;C++)m.push(gi.builder().setX1(f).setY1(_*C).setX2(a.width-f).setY2(_*C).setColor(a.colorLinesSecondary).setWidth(g));for(let C=0;C<=8;C++)m.push(gi.builder().setX1(f+b*C).setY1(0).setX2(f+b*C).setY2(a.height).setColor(a.colorLinesSecondary).setWidth(g));return m.push(gi.builder().setX1(a.width/2).setY1(0).setX2(f).setY2(3*_).setColor(a.colorLinesSecondary).setWidth(g)),m.push(gi.builder().setX1(a.width/2).setY1(0).setX2(a.width-f).setY2(3*_).setColor(a.colorLinesSecondary).setWidth(g)),new A0(m)}get createLinesDataPtr(){return a=>this.createLinesData(a)}createLinesData(a){let h=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),d=a.width*h,f=(a.width-d)/2,p=Math.atan2(1-h,.5),g=a.lineWidth,m=[],v=[gi.builder().setX1(f).setY1(0).setX2(a.width-f).setY2(0).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(f).setY1(a.height).setX2(a.width-f).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(f).setY1(0).setX2(f).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(a.width/2).setY1(0).setX2(a.width/2).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(a.width-f).setY1(0).setX2(a.width-f).setY2(a.height).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(f).setY1(d*(1-h)).setX2(a.width-f).setY2(d*(1-h)).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1((a.width-d*(1-h))/2).setY1(d*Math.pow(1-h,2)).setX2((a.width-d*(1-h))/2+d*(1-h)).setY2(d*Math.pow(1-h,2)).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(f).setY1(a.height-.5*d).setX2(a.width-f).setY2(a.height-.5*d).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(f).setY1(a.height-d*(1-h+.5)).setX2(a.width-f).setY2(a.height-d*(.5-(1-h))).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(f).setY1(a.height-d*(1-h+.5)).setX2(a.width-f).setY2(a.height-d*(1-h+.5)).setColor(a.colorLinesHighlighted).setWidth(g),gi.builder().setX1(f).setY1(a.height-d*(.5-(1-h))).setX2(a.width-f).setY2(a.height-d*(.5-(1-h))).setColor(a.colorLinesHighlighted).setWidth(g)],y=C=>{v.push(...C[0]),m.push(...C[1])},_=Math.min(a.width,a.height)/10;return y(this.createSizeVirtualArrows(a,new zi(f,a.height),new zi(a.width-f,a.height),new zi(a.width/2,a.height+3*_),null,!0,!0,"1.0")),y(this.createSizeVirtualArrows(a,new zi(f,a.height),new zi(a.width/2,a.height),new zi(a.width/2,a.height+2*_),null,!0,!0,"0.5")),y(this.createSizeVirtualArrows(a,new zi(a.width/2,a.height),new zi(a.width-f,a.height),new zi(a.width/2,a.height+2*_),null,!0,!0,"0.5")),y(this.createSizeVirtualArrows(a,new zi(a.width/2-.125*d,a.height-.5*d-.25*d/Math.cos(p)/2+a.delta/Math.cos(p)),new zi(a.width/2+.125*d,a.height-.5*d+.25*d/Math.cos(p)/2),new zi(1.2*f,a.height+1*_),new zi(a.width/2,a.height+1*_),!0,!0,"0.125","0.125")),y(this.createSizeVirtualArrows(a,new zi((a.width-d*(1-h))/2,d*Math.pow(1-h,2)-a.delta/2),new zi((a.width+d*(1-h))/2,d*Math.pow(1-h,2)-a.delta/2),new zi(a.width/2,0-2*_),null,!0,!0,"0.382")),y(this.createSizeVirtualArrows(a,new zi((a.width-d*(1-h))/2,d*Math.pow(1-h,2)-a.delta/2),new zi((a.width+d*(1-h))/2,d*Math.pow(1-h,2)-a.delta/2),new zi(1.2*f,0-1*_),new zi(a.width/2,0),!0,!0,"0.192","0.192")),y(this.createSizeHorizontalArrows(a,new zi(f,0),new zi(f,a.height),new zi(f-2*_,a.height/2),null,!0,!0,"1.618")),y(this.createSizeHorizontalArrows(a,new zi(f,0),new zi(f,d*(1-h)),new zi(f-1*_,d*(1-h)/2),null,!0,!0,"0.146")),y(this.createSizeHorizontalArrows(a,new zi(f,a.height),new zi(f,a.height-.5*d),new zi(f-1*_,a.height-.5*d/2),null,!0,!0,"0.5")),y(this.createSizeHorizontalArrows(a,new zi(f,a.height-.5*d),new zi(f,a.height-d*(1-h+.5)),new zi(f-1*_,a.height-d*(.5+(1-h)/2)),null,!0,!0,"0.382")),y(this.createSizeHorizontalArrows(a,new zi(a.width-f,0),new zi(a.width-f,d*(1-h)),new zi(a.width-f+1*_,-f),new zi((a.width-d*(1-h))/2+d*(1-h),d*Math.pow(1-h,2)),!0,!0,"0.146","0.236")),y(this.createSizeHorizontalArrows(a,new zi(a.width-f,a.height),new zi(a.width-f,a.height-.5*d),new zi(a.width-f+1*_,a.height+f),new zi(a.width-f,a.height-d*(.5-(1-h))),!0,!0,"0.382","0.118")),new A0(v,m)}toDegrees(a){return a/Math.PI*180}transformToString(a){return a.map((h,d)=>{let f=`${h.name}(`;return"translate"==h.name||"scale"==h.name?f+=`${h.x},${h.y}`:"rotate"==h.name?(f+=h.angle,(h.x||h.y)&&(f+=`,${h.x},${h.y}`)):("skewY"==h.name||"skewX"==h.name)&&(f+=h.angle),f+=")",f}).join(" ")}render(a,h){let d=h.rects,f=h.lines,p=h.linesPlate,g=h.texts,m=h.circles,v=h.ellipses,y=h.pathes,_=Math.min(h.width,h.height)/20*h.scale,b=_,C=_/2,x=0*b,S=C/2,O=[[0,0],[0,C],[b,C/2]];if(h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439){a.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,b,C]).attr("refX",x).attr("refY",S).attr("markerWidth",b).attr("markerHeight",C).attr("orient","auto-start-reverse").append("path").attr("d",mh()(O)).attr("fill",h.colorLinesHighlighted),a.select("defs").append("marker").attr("id","arrowN").attr("viewBox",[0,0,b,C]).attr("refX",x).attr("refY",S).attr("markerWidth",b).attr("markerHeight",C).attr("orient","auto-start-reverse").append("path").attr("d",mh()(O)).attr("fill",h.colorLines);let D=_,M=_,L=(V,z,U)=>"M "+V+" "+z+" m -"+U+", 0 a "+U+","+U+" 0 1,0 "+2*U+",0 a "+U+","+U+" 0 1,0 -"+2*U+",0";a.select("defs").append("marker").attr("id","pointH").attr("viewBox",[0,0,D,M]).attr("refX",D/2).attr("refY",M/2).attr("markerWidth",_).attr("markerHeight",_).attr("orient","auto-start-reverse").append("path").attr("d",L(_/2,_/2,_/4)).attr("fill",h.colorLinesHighlighted),a.select("defs").append("marker").attr("id","pointN").attr("viewBox",[0,0,D,M]).attr("refX",D/2).attr("refY",M/2).attr("markerWidth",_).attr("markerHeight",_).attr("orient","auto-start-reverse").append("path").attr("d",L(_/2,_/2,_/4)).attr("fill",h.colorLines)}h.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442&&d.forEach(D=>{var M=a.append("rect").attr("x",D.x).attr("y",D.y).attr("rx",D.rx).attr("ry",D.ry).attr("transform",this.transformToString(D.transform||[])).attr("width",D.width).attr("height",D.height).style("fill",D.fillColor||"black").attr("fill-opacity",D.fillOpacity||1).style("stroke",D.strokeColor||"black").style("stroke-width",D.strokeWidth).attr("stroke-opacity",D.strokeOpacity||1).attr("class",D.classes.join(" ")).style("visibility",D.visible?"visible":"hidden");D.events.forEach(A=>{M.on(A.name,A.func)}),D.d3Object=M});let k=[];if(h.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b&&k.push(...f),h.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443&&k.push(...p),k){let D=L=>_/h.scale*Math.cos(Math.atan2(L.y2-L.y1,L.x2-L.x1)),M=L=>_/h.scale*Math.sin(Math.atan2(L.y2-L.y1,L.x2-L.x1)),A=L=>L&&L.startsWith("arrow");k.forEach(L=>{let E=a.append("line"),V=(z,U)=>z.style("stroke",U.color).style("stroke-width",U.width).attr("x1",U.x1+(A(U.startArrow)?D(U):0)).attr("y1",U.y1+(A(U.startArrow)?M(U):0)).attr("x2",U.x2-(A(U.endArrow)?D(U):0)).attr("y2",U.y2-(A(U.endArrow)?M(U):0)).attr("transform",this.transformToString(U.transform||[])).attr("marker-start",U.startArrow?"url(#"+U.startArrow+")":"").attr("marker-end",U.endArrow?"url(#"+U.endArrow+")":"").attr("class",U.classes.join(" ")).style("visibility",U.visible?"visible":"hidden");E=V(E,L),L.transitions&&L.transitions.forEach(z=>{E=V(E.transition().delay(z.delay).duration(z.duration),z.data)})})}m.forEach(D=>{let M=a.append("circle");M=D.applyToD3Object(M),M=D.applyEventsToD3Object(M)}),a.selectAll("ellipse").data(v).enter().append("ellipse").attr("cx",0).attr("cy",0).attr("rx",D=>D.rx).attr("ry",D=>D.ry).attr("fill",D=>D.fillColor).attr("fill-opacity",D=>D.fillOpacity).attr("stroke",D=>D.strokeColor).attr("stroke-width",D=>D.strokeWidth).attr("transform",D=>this.transformToString(D&&D.transform||[])).attr("class",D=>D.classes.join(" ")).style("visibility",D=>D.visible?"visible":"hidden"),y.forEach(D=>{if(D.renderHandler)D.renderHandler(a,D);else{let M=a.append("path").datum(D.datum);M=D.applyToD3Object(M),M=D.applyEventsToD3Object(M)}}),g.forEach(D=>{let M=a.append("text").text(D.text);M=D.applyToD3Object(M),M=D.applyEventsToD3Object(M)})}textSizeDirect(a,h,d){if($e){var f=po("body").append("svg");f.append("text").attr("x",-99999).attr("y",-99999).attr("font-size",h).attr("font-weight",d).text(a);var g=f.node().getBBox();return f.remove(),{width:g.width,height:g.height}}}textSize(a,h){if($e){var d=po("body").append("svg");a.append("text").text(h.text).attr("x",-99999).attr("y",-99999).attr("font-size",h.fontSize).attr("font-weight",h.fontWeight).attr("text-anchor",h.textAnchor).style("fill",h.color).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden");var p=d.node().getBBox();return d.remove(),{width:p.width,height:p.height}}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class E6{constructor(l,a,h,d,f=null,p=null,g=null){this.logoWidth=l,this.logoHeight=a,this.d3Svc=h,this.mySvgRef=d,this.generator=f,this.delayedRun=p,this.d3Config=g,this.delta=1,this.svg=null,this.delta=Math.min(l,a)/10,null==this.d3Config&&this.regenerateConfig()}regenerateConfig(){return this.d3Config=new I0(!0,!0,!1,!0,.5,this.logoWidth,this.logoHeight,Math.min(this.logoWidth,this.logoHeight)/15,2,Math.min(this.logoWidth,this.logoHeight)/20,"black","gold","firebrick","red","white","green","cyan",this),this}getGenerator(){return this.generator}setGenerator(l){return this.generator&&this.clear().regenerateConfig(),this.generator=l,this}createD3Config(l){this.generator?this.generator.generate(this.d3Svc,this.d3Config,l)&&l():(this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createDataPtr,(a,h)=>a.rects=h.first),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesDataPtr,(a,h)=>{a.lines=h.first,h.second&&a.texts.push(...h.second)}),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesPlateDataPtr,(a,h)=>a.linesPlate=h.first),l())}clear(){return this.removeExistingSvgFromParent(),this.generator.clear(),this}clearDelayed(){this.delayedRun(()=>this.clear(),0)}clearAll(){this.g.selectAll("*").remove()}updateSvg(l=(()=>{})){return this.svg||this.createSvgImage(l),this}createSvgImage(l){this.createD3Config(()=>{this.afterCreateSvgImage(l)})}afterCreateSvgImage(l){this.applySizeAfterGeneration(),this.removeExistingSvgFromParent(),this.setSvgDimensions(),this.addGraphicsElement(),this.createAreaSvg(),l&&l()}applySizeAfterGeneration(){this.generator&&(this.logoWidth=this.generator.getWidth(),this.logoHeight=this.generator.getHeight())}removeExistingSvgFromParent(){po(this.mySvgRef.nativeElement).select("svg").remove(),this.svg=null,this.g=null}addGraphicsElement(){this.g=this.svg.append("g").attr("transform","translate(0,0)")}createAreaSvg(){this.d3Svc.render(this.g,this.d3Config)}setSvgDimensions(){let l=this.generator.getHeight(),a=this.generator.getWidth();this.svg=po(this.mySvgRef.nativeElement).append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+a+" "+l)}}class yl{constructor(l='\u041a\u0440\u0435\u0441\u0442 \u043f\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0443 "\u0437\u043e\u043b\u043e\u0442\u043e\u0433\u043e \u0441\u0435\u0447\u0435\u043d\u0438\u044f".',a=512,h=512){this.name=l,this.width=a,this.height=h}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}generate(l,a,h){return l.createDataScale(a,l.createDataPtr,(d,f)=>d.rects=f.first),l.createDataScale(a,l.createLinesDataPtr,(d,f)=>{d.lines=f.first,d.texts.push(...f.second)}),l.createDataScale(a,l.createLinesPlateDataPtr,(d,f)=>d.linesPlate=f.first),a.texts.push(pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("gold")),!0}}class Que extends yl{constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430.",a=512,h=512){super(l,a,h)}generate(l,a,h){a.rects.push(l.createBackground(a)),a.texts.push(pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));for(let f=0;f<10;f++)a.texts.push(pi.builder().setText("\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430: "+f).setFontSize("20px").translate(a.width/2,a.height/2).rotate(36*f).setColor("white"));return!0}}class jue extends yl{constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043a\u0440\u0443\u0436\u043d\u043e\u0441\u0442\u0435\u0439.",a=512,h=512){super(l,a,h)}generate(l,a,h){a.rects.push(l.createBackground(a)),a.texts.push(pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick")),a.circles.push(fg.builder().setR(100).translate(a.width/2,a.height/2).rotate(0).setFillColor("gold"));for(let p=0;p<12;p++)a.circles.push(fg.builder().setR(10).translate(a.width/2,a.height/2).rotate(30*p).setFillColor("gold").translate(130,0));return!0}}class que extends yl{constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u044d\u043b\u043b\u0438\u043f\u0441\u043e\u0432.",a=512,h=512){super(l,a,h)}generate(l,a,h){a.rects.push(l.createBackground(a)),a.texts.push(pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));for(let f=0;f<3;f++)a.ellipses.push(M6.builder().setRx(50).setRy(100).translate(a.width/2,a.height/2).rotate(60*f).setFillColor("gold").setFillOpacity(.5));return!0}}class Zue extends yl{constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u043e\u0432.",a=512,h=512){super(l,a,h)}generate(l,a,h){a.rects.push(l.createBackground(a)),a.texts.push(pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));for(let f=0;f<5;f++)a.rects.push(ws.builder().setX(100*f).setY(0).setWidth(100).setHeight(100).setRx(5*f).setRy(5*f).translate(6,a.height/3).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2));return a.rects.push(ws.builder().setX(0).setY(0).setWidth(200).setHeight(200).translate(a.width/2-100,a.height/3*1.5).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2).addClass("rxanimated")),!0}}class Xue extends yl{constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432.",a=512,h=512){super(l,a,h)}generate(l,a,h){a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,a.rects.push(l.createBackground(a)),a.texts.push(pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));let f=()=>{const v=Cc(0,10).map(C=>[.5*C*Math.PI,Math.sin(.5*C*Math.PI)]),y=Q_().range([0,a.width/2]).domain(e0(v,C=>C[0])),_=Q_().range([a.height/2-20,0]).domain([-1,1]);return{sine:v,line:mh().x(C=>y(C[0])).y(C=>_(C[1])),x:y,y:_}},p=[10,a.height/4];{let v=f();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.line).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.line.curve(S6)).setStrokeColor("green").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.line.curve(rS)).setStrokeColor("red").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.line.curve(g6)).setStrokeColor("cyan").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.line.curve(w6)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}let g=()=>{const v=Cc(0,10).map(C=>[.5*C*Math.PI,Math.sin(.5*C*Math.PI)]),y=Q_().range([a.width/2+10,a.width-20]).domain(e0(v,C=>C[0])),_=Q_().range([a.height/2-20,0]).domain([-1,1]);return{sine:v,area:f6().x(C=>y(C[0])).y0(a.height/4-10).y1(C=>_(C[1]))}};{let v=g();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.area.curve(S6)).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(p[0],p[1]))}{let v=g();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.area.curve(w6)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("gold").setFillOpacity(.5).translate(p[0],p[1]))}{let v=g();a.pathes.push(hs.builder().setDatum(v.sine).setD(v.area.curve(rS)).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(p[0],p[1]))}{let v=u6();a.pathes.push(hs.builder().setD(v({outerRadius:100,innerRadius:50,startAngle:.25*-Math.PI,endAngle:.25*Math.PI})).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(100,a.height))}a.pathes.push(hs.builder().setRenderHandler((v,y)=>{v.append("path").attr("d",BB()({source:{radius:50,startAngle:.3*-Math.PI,endAngle:.2*-Math.PI},target:{radius:50,startAngle:.3*Math.PI,endAngle:.3*Math.PI}})).attr("stroke",y.strokeColor).attr("stroke-width",y.strokeWidth).attr("fill",y.fillColor).attr("transform",(_,b)=>l.transformToString(y.transform||[]))}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(a.width/2,a.height-50));{const v=Yie(Cc(0,12),qie(Cc(0,12))),y=["linen","lightsteelblue","lightcyan","lavender","honeydew","gainsboro"],_=100;a.pathes.push(hs.builder().setRenderHandler((b,C)=>{v.forEach((x,S)=>{let w=x[0],T=x[1];b.append("path").attr("d",BB()({source:{radius:_,startAngle:-2*Math.PI*(1/v.length)*w,endAngle:-2*Math.PI*(1/v.length)*(w-1)%v.length},target:{radius:_,startAngle:-2*Math.PI*(1/v.length)*T,endAngle:-2*Math.PI*(1/v.length)*(T-1)%v.length}})).attr("stroke",y[(S+1)%y.length]).attr("stroke-width",C.strokeWidth).attr("fill",y[(S+0)%y.length]).attr("transform",(O,k)=>l.transformToString(C.transform||[]))})}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(a.width/4*3+50,a.height-_))}return!0}}class Yue extends yl{constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0439.",a=512,h=512){super(l,a,h)}generate(l,a,h){return a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,a.rects.push(l.createBackground(a)),a.texts.push(pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick")),["easeLinear","easeQuadIn","easeQuadInOut","easeQuadOut","easeCubicIn","easeSinIn","easeCircleIn","easeBounceIn","easeCubicIn","easeCubicOut","easeCubicInOut"].forEach((d,f)=>{let p=100+30*f;a.pathes.push(hs.builder().setRenderHandler((m,v)=>{let y=fg.builder().setR(10).translate(a.width/2,p),_=m.append("circle").attr("cx",0).attr("cy",0).attr("r",y.r).attr("fill",y.fillColor).attr("fill-opacity",y.fillOpacity).attr("stroke",y.strokeColor).attr("stroke-width",y.strokeWidth).attr("transform",l.transformToString(y&&y.transform||[])),b=m.append("text").attr("x",0).attr("y",p).text(d).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),x=a.width/2-10,S=(O,k)=>{O.transition().duration(3e3).ease($e[d]).attr("x",x).attr("cx",x).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease($e[d]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue").on("end",k)},w=null;w=()=>S(_,w);let T=null;T=()=>S(b,T),w(),T()}))}),!0}}class Kue extends yl{constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 UI.",a=512,h=512){super(l,a,h)}generate(l,a,h){a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,a.rects.push(l.createBackground(a)),a.texts.push(pi.builder().setText("UI interaction demo.").setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("firebrick"));let d=100;return[{easeFunc:"easeCubicOut",r:10},{easeFunc:"easeCubic",r:10},{easeFunc:"drag circle: ",r:50,drag:!0}].forEach((f,p)=>{let g=d+f.r+10,m=f.r;a.pathes.push(hs.builder().setRenderHandler((v,y)=>{let _=fg.builder().setR(m).translate(a.width/2,g),b=0,C=v.append("circle").attr("cx",b).attr("cy",0).attr("r",_.r).attr("fill",_.fillColor).attr("fill-opacity",_.fillOpacity).attr("stroke",_.strokeColor).attr("stroke-width",_.strokeWidth).attr("transform",l.transformToString(_&&_.transform||[])),x=v.append("text").attr("x",0).attr("y",g).text(f.easeFunc).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),w=a.width/2-m,T=(M,A)=>{M.transition().duration(3e3).ease($e[f.easeFunc]).attr("x",w).attr("cx",w).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease($e[f.easeFunc]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue")},O=null;O=()=>T(C);let k=null;k=()=>T(x);let D=()=>{O(),k()};if(f.drag){let M=Qse().on("drag",A=>{const L=Math.round(1e3*A.dx)/1e3;x.text("drag: dx: "+L);let E=b+L;E<0?E=0:E>a.width/2&&(E=a.width/2),b=E,C.attr("cx",b)});C.call(M)}else C.on("click",D),x.on("click",D)})),d+=2*f.r+20}),!0}}var _l=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2"}(_l||(_l={})),_l))();class e1{constructor(l=_l.Default,a="\u041a\u0440\u0435\u0441\u0442.",h=512,d=512){this.theme=l,this.name=a,this.width=h,this.height=d}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(l){switch(this.theme){case _l.Dark:l.colorBackground="#0e161b",l.colorMain="white";break;case _l.Light:l.colorBackground="#00364D",l.colorMain="white";break;case _l.Dark2:l.colorBackground="white",l.colorMain="#0e161b";break;case _l.Light2:l.colorBackground="white",l.colorMain="#00364D"}}generate(l,a,h){a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!1,this.updateThemeConfig(a),l.createDataScale(a,l.createGolgofaDataPtr,(f,p)=>{f.rects=p.first,p.isSecond()&&(f.pathes=p.second),p.isThird()&&(f.texts=p.third)});var d=pi.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(a.width/2,50).rotate(0).setColor("none");return a.texts.push(d),a.onItemSelected=f=>{d.d3Object&&d.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",a.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(f).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}var Lo=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2"}(Lo||(Lo={})),Lo))();class La{constructor(l,a){this.name=l,this.tag=a}static builder(){return new La("",null)}setName(l){return this.name=l,this}setTag(l){return this.tag=l,this}}class pg{constructor(){this.genName="Menu",this.commands=[],this.printOnly=!1}static builder(){return new pg}setGenName(l){return this.genName=l,this}setCommands(l){return this.commands=l,this}setPrintOnly(l){return this.printOnly=l,this}addCommand(l){return this.commands.push(l),this}}class Jue extends yl{constructor(l=Lo.Default,a=512,h=128){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",a,h),this.theme=l,this.svgImage=null,this.onCommandHandler=null,this.onPreviewCommandHandler=null,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.updateAll=null,this.updateText=null,this.updateAllPds=null,this.updateAllRects=null,this.commands=[La.builder().setName("\u0418\u043c\u044f"),La.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),La.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),La.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0}regenerate(){return super.regenerate(),this.updateAll&&this.updateAll(),this}setAutoClickOnChange(l){return this.autoClickOnChangeEnabled=l,this}setCommands(l,a=null){return this.commands=l,this.currentIndex=a?this.commands.indexOf(a):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(l){return this.onCommandHandler=l,this}setOnPreviewCommandHandler(l){return this.onPreviewCommandHandler=l,this}setTheme(l){return this.theme=l,this}setSvgImages(l){return this.svgImage=l,this}updateThemeConfig(l){switch(this.theme){case Lo.Dark:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="white";break;case Lo.Light:this.strokeInvisible=!0,l.colorBackground="#00364D",l.colorMain="white";break;case Lo.Dark2:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="white";break;case Lo.Light2:this.strokeInvisible=!0,l.colorBackground="white",l.colorMain="#00364D"}}isLight(){let l=!0;switch(this.theme){case Lo.Light2:case Lo.Light:break;default:l=!1}return l}runOnCommand(l){return this.onCommandHandler&&this.onCommandHandler(l),this}runOnPreviewCommand(l){return this.onPreviewCommandHandler&&this.onPreviewCommandHandler(l),this}isGenerated(){return!!this.updateAll}generate(l,a,h){if(this.updateAll)return this.updateAll(),!0;a.clearAll(),this.updateThemeConfig(a);let d=$=>{let H=ah($);return H.r<<16|H.g<<8|H.b},f=($,H)=>{H?$.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):$.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},p=d(a.colorMain),m=.8,v=.3;a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let x=($,H=1,G)=>{let W=(16711680&$)>>16,j=(65280&$)>>8,Q=255&$;H<1&&0==W&&0==j&&0==Q&&(W=j=Q=255);let J=W*H&255,te=j*H&255,ce=Q*H&255;if(H<1){let Se=d(a.colorBackground);J=(16711680&Se)>>16,te=(65280&Se)>>8,ce=255&Se}return Nf(J,te,ce,G).formatHex()},w=a.height/32*1,T=a.height/32*1,O=Math.round(.8*a.height),k=()=>a.width/8*6,D=$=>{let H=Math.round(.8*a.height),G=l.textSizeDirect($,H,300),W=.8*k();return G.width>W&&(H=H*W/G.width),H},M=pi.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${D(this.commands[this.currentIndex].name)}px`).translate(a.width/2+w,a.height/2+O/4+T).rotate(0).setColor(x(p,v)).setStrokeColor(x(p,v)).setStrokeWidth(1).setVisible(!0).addEvent(Ui.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),A=pi.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${D(this.commands[this.currentIndex].name)}px`).translate(a.width/2,a.height/2+O/4).rotate(0).setColor(x(p)).setStrokeColor(x(p,this.strokeInvisible?1:v)).setStrokeWidth(1).addEvent(Ui.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");a.texts.push(M),a.texts.push(A),this.updateText=$=>{M.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",x(p,v)).style("stroke",x(p,v)).attr("font-size",`${D(this.commands[this.currentIndex].name)}px`).text($),A.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",x(p)).style("stoke",x(p)).attr("font-size",`${D(this.commands[this.currentIndex].name)}px`).text($)};let V=[];this.updateAllPds=()=>{V.forEach($=>{$.shadow?f($.pd.d3Object,this.commands.length>1):($.leftArrow&&0==this.currentIndex?f($.pd.d3Object,!1):$.leftArrow&&f($.pd.d3Object,!0),$.leftArrow||this.currentIndex+1!=this.commands.length?$.leftArrow||f($.pd.d3Object,!0):f($.pd.d3Object,!1))})},this.updateAll=()=>{let $=this.commands[this.currentIndex];this.updateText&&$&&this.updateText($.name),this.updateAllPds&&this.updateAllPds(),this.updateAllRects&&this.updateAllRects(),this.runOnPreviewCommand($)};let z=($,H=null,G="gold",W="white",j=!0,Q=!1)=>{let J=(($=null)=>({dd:$||[[0,0],[1,1],[1,-1],[0,0]],line:mh().x(W=>W[0]*(a.width/8)).y(W=>(W[1]/2+.5)*(a.height-2))}))(H),te=hs.builder().setDatum(J.dd).setD(J.line).setStrokeColor(W).setStrokeWidth(1).setFillColor(G).translate($[0],$[1]+1).addEvent(Ui.builder().setName("click").setFunc(()=>{j?--this.currentIndex<0&&(this.currentIndex=0):++this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.updateAll&&this.updateAll(),this.onChange()})).setVisible(Q&&this.commands.length>1||j&&this.currentIndex>0||!j&&this.currentIndex+1<this.commands.length);Q||te.addClass("cursor"),V.push({leftArrow:j,pd:te,shadow:Q}),a.pathes.push(te)},U=($,H,G,W)=>{let j=[];return $.forEach(Q=>{let J=[];J.push(Q[0]*H+G/(a.width/8)),J.push(Q[1]*H+W/a.height),j.push(J)}),j};z([0,0],U([[0,0],[1,1],[1,-1],[0,0]],m,w,T),x(p,v),x(p,1),!0,!0),z([a.width/8*7,0],U([[0,1],[1,0],[0,-1],[0,1]],m,w,T),x(p,v),x(p,1),!1,!0),z([0,0],U([[0,0],[1,1],[1,-1],[0,0]],m,0,0),x(p,1),x(d(x(p,1)),v),!0),z([a.width/8*7,0],U([[0,1],[1,0],[0,-1],[0,1]],m,0,0),x(p,1),x(d(x(p,1)),v),!1);let Z=this.commands.length,Y=.9*k(),N=[];this.updateAllRects=()=>{N.forEach(($,H)=>{$.forEach((G,W)=>{if(0==W)return f(G[0].d3Object,!0),void f(G[1].d3Object,!0);H==this.currentIndex?(f(G[0].d3Object,!0),f(G[1].d3Object,!0)):(f(G[0].d3Object,!1),f(G[1].d3Object,!1))})})};for(let $=0;$<Z;$++){let H=Y/Z,G=.9,W=(a.width-Y)/2+H*$+H*(1-G)/2,j=[ws.builder().setFillColor("none").setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(H*G).setHeight(a.height/10*1).translate(W+w,a.height/10*8+T).setVisible(!0),ws.builder().setFillColor(x(p,v)).setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(H*G).setHeight(a.height/10*1).translate(W+w,a.height/10*8+T).setVisible(!0)],Q=[ws.builder().setFillColor("none").setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(H*G).setHeight(a.height/10*1).translate(W,a.height/10*8).setVisible($==this.currentIndex),ws.builder().setFillColor(x(p,1)).setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(H*G).setHeight(a.height/10*1).translate(W,a.height/10*8).setVisible($==this.currentIndex)];a.rects.push(...j),a.rects.push(...Q),N.push([j,Q])}return!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var js=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2",c[c.Dark3=5]="Dark3",c[c.Light3=6]="Light3"}(js||(js={})),js))();class gg{constructor(l,a){this.name=l,this.tag=a}static builder(){return new gg("",null)}setName(l){return this.name=l,this}setTag(l){return this.tag=l,this}}class _E extends yl{constructor(l=js.Default){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",512,512),this.theme=l,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.useShadow=!0,this.commands=[gg.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),gg.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),gg.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0}setShadowEnabled(l){return this.useShadow=l,this}setAutoClickOnChange(l){return this.autoClickOnChangeEnabled=l,this}setCommands(l,a){return this.commands=l,this.currentIndex=this.commands.indexOf(a),this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(l){return this.onCommandHandler=l,this}setTheme(l){return this.theme=l,this}setSvgImages(l){return this.svgImage=l,this}updateThemeConfig(l){switch(this.theme){case js.Dark:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="white";break;case js.Light:this.strokeInvisible=!0,l.colorBackground="#00364D",l.colorMain="white";break;case js.Dark2:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="white";break;case js.Light2:this.strokeInvisible=!0,l.colorBackground="white",l.colorMain="#00364D";break;case js.Dark3:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="#4AAED9";break;case js.Light3:this.strokeInvisible=!0,l.colorBackground="white",l.colorMain="#0072A3"}}isLight(){let l=!0;switch(this.theme){case js.Light3:case js.Light2:case js.Light:break;default:l=!1}return l}runOnCommand(l){return this.onCommandHandler&&this.onCommandHandler(l,this),this}generate(l,a,h){this.updateThemeConfig(a);let d=J=>{let te=ah(J);return te.r<<16|te.g<<8|te.b},f=(J,te)=>{te?J.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):J.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},p=d(a.colorMain),g=this.useShadow,v=.3;a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let x=(J,te=1,ce)=>{let ae=(16711680&J)>>16,Se=(65280&J)>>8,_e=255&J;te<1&&0==ae&&0==Se&&0==_e&&(ae=Se=_e=255);let Me=ae*te&255,Qe=Se*te&255,Ie=_e*te&255;if(te<1){let Je=d(a.colorBackground);Me=(16711680&Je)>>16,Qe=(65280&Je)>>8,Ie=255&Je}return Nf(Me,Qe,Ie,ce).formatHex()},w=a.width/32*1,T=a.height/32*1,M=(Math.round(.8*a.height),1/3),A=2/3,E=J=>{let te=Math.round(.8*a.height),ce=l.textSizeDirect(J,te,300),ae=a.width/24*22*.8,Se=a.height/3*.8;return ce.width>ae&&(te=te*ae/ce.width,ce=l.textSizeDirect(J,te,300)),ce.height>Se&&(te=te*Se/ce.height),te},V=E(this.commands[this.currentIndex].name),z=pi.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${V}px`).translate(a.width/2+w,a.height/2+V/4+T).rotate(0).setColor(x(p,v)).setStrokeColor(x(p,v)).setStrokeWidth(1).setVisible(g).addEvent(Ui.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),U=pi.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${V}px`).translate(a.width/2,a.height/2+V/4).rotate(0).setColor(x(p)).setStrokeColor(x(p,this.strokeInvisible?1:v)).setStrokeWidth(1).addEvent(Ui.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");a.texts.push(z),a.texts.push(U);let Z=J=>{z.d3Object.transition().duration(1e3).attr("font-size",`${E(this.commands[this.currentIndex].name)}px`).text(J),U.d3Object.transition().duration(1e3).attr("font-size",`${E(this.commands[this.currentIndex].name)}px`).text(J)},$=[],H=()=>{$.forEach(J=>{J.shadow?f(J.pd.d3Object,!0):(J.upArrow||0!=this.currentIndex?J.upArrow||f(J.pd.d3Object,!0):f(J.pd.d3Object,!1),J.upArrow&&this.currentIndex+1==this.commands.length?f(J.pd.d3Object,!1):J.upArrow&&f(J.pd.d3Object,!0))})},G=(J,te,ce="gold",ae="white",Se=!0,_e=!1)=>{let Me=(J=>({dd:J||[[0,0],[1,1],[1,-1],[0,0]],line:mh().x(ae=>(0+ae[0])*a.width).y(ae=>(1-ae[1])*(a.height-24))}))(te),Qe=hs.builder().setDatum(Me.dd).setD(Me.line).setStrokeColor(ae).setStrokeWidth(1).setFillColor(ce).translate(J[0]+0*(_e?w:0),J[1]+1+(_e?T:0)).addEvent(Ui.builder().setName("click").setFunc(()=>{Se?(this.currentIndex+1<this.commands.length&&++this.currentIndex,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1)):(this.currentIndex>0&&--this.currentIndex,this.currentIndex<0&&(this.currentIndex=0)),Z(this.commands[this.currentIndex].name),H(),this.onChange()})).setVisible(!0);_e||Qe.addClass("cursor"),$.push({upArrow:Se,pd:Qe,shadow:_e}),a.pathes.push(Qe)},W=(J,te,ce,ae,Se)=>{let _e=[];return J.forEach(Me=>{let Qe=[];Qe.push(Me[0]*te+ae),Qe.push(Me[1]*ce+Se),_e.push(Qe)}),_e};return g&&(G([0,0],W([[0,0],[.5,1],[1,0],[0,0]],1,M,0,A),x(p,v),x(p,1),!0,!0),G([0,A],W([[0,1],[.5,0],[1,1],[0,1]],1,M,0,0),x(p,v),x(p,1),!1,!0)),G([0,0],W([[0,0],[.5,1],[1,0],[0,0]],1,1*M,0,A),x(p,1),x(d(x(p,1)),v),!0),G([0,A],W([[0,1],[.5,0],[1,1],[0,1]],1,1*M,0,0),x(p,1),x(d(x(p,1)),v),!1),!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var Jo=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2",c[c.Dark3=5]="Dark3",c[c.Light3=6]="Light3"}(Jo||(Jo={})),Jo))();class bl{constructor(l,a,h,d){this.name=l,this.index=a,this.iWidth=h,this.tag=d,this.rect=null,this.text=null,this.classes=""}static builder(){return new bl("",0,1,null)}setName(l){return this.name=l,this}setTag(l){return this.tag=l,this}setIndex(l){return this.index=l,this}setIWidth(l){return this.iWidth=l,this}setClasses(l){return this.classes=l,this}}class ehe extends yl{constructor(l=Jo.Default,a="\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",h=512,d=512){super(a,h,d),this.theme=l,this.svgImage=null,this.onCommandHandler=null,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.useShadow=!0,this.useBackgroundColor=!0,this.commands=[bl.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),bl.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),bl.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0,this.linesOfMonth=7,this.columnsCount=7,this.columnsOffsets=[]}addColumnOffset(l){return this.columnsOffsets.push(l),this}setShadowEnabled(l){return this.useShadow=l,this}setAutoClickOnChange(l){return this.autoClickOnChangeEnabled=l,this}setCommands(l,a=null){return this.commands=l,this.currentIndex=a?this.commands.indexOf(a):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(l){return this.onCommandHandler=l,this}setTheme(l){return this.theme=l,this}setSvgImages(l){return this.svgImage=l,this}updateThemeConfig(l){switch(this.theme){case Jo.Dark:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="white";break;case Jo.Light:this.strokeInvisible=!0,l.colorBackground="#00364D",l.colorMain="white";break;case Jo.Dark2:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="white";break;case Jo.Light2:this.strokeInvisible=!0,l.colorBackground="white",l.colorMain="#00364D";break;case Jo.Dark3:this.strokeInvisible=!0,l.colorBackground="#0e161b",l.colorMain="#4AAED9";break;case Jo.Light3:this.strokeInvisible=!0,l.colorBackground="white",l.colorMain="#0072A3"}}isLight(){let l=!0;switch(this.theme){case Jo.Light3:case Jo.Light2:case Jo.Light:break;default:l=!1}return l}runOnCommand(l){return this.onCommandHandler&&this.onCommandHandler(l,this),this}color(l,a,h=1,d){let f=(16711680&a)>>16,p=(65280&a)>>8,g=255&a;h<1&&0==f&&0==p&&0==g&&(f=p=g=255);let m=f*h&255,v=p*h&255,y=g*h&255;if(this.useBackgroundColor&&h<1){let b=this.colorValueToNumber(l.colorBackground);m=(16711680&b)>>16,v=(65280&b)>>8,y=255&b}return Nf(m,v,y,d).formatHex()}colorValueToNumber(l){let a=ah(l);return a.r<<16|a.g<<8|a.b}textRecommendedWidth(l){return l.width/this.columnsCount}getFontHeightForText(l,a,h,d){let p=Math.round(a.height/this.linesOfMonth*.7),g=l.textSizeDirect(h,p,300),m=.7*d,v=a.height/this.linesOfMonth*.7;return g.width>m&&(p=p*m/g.width,g=l.textSizeDirect(h,p,300)),g.height>v&&(p=p*v/g.height,g=l.textSizeDirect(h,p,300)),g}generate(l,a,h){return this.updateThemeConfig(a),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,this.commands.forEach(f=>{this.drawRect(l,a,f)}),!0}getLineOfIndex(l){return Math.floor(l/this.columnsCount)}getRelativeX(l){let a=l%this.columnsCount,h=this.getLineOfIndex(l);return a+=h<this.columnsOffsets.length?this.columnsOffsets[h]:0,a}drawRect(l,a,h){if(!h.name)return;let d=this.colorValueToNumber(a.colorMain),p=h.name,g=h.index,m=h.iWidth,v=Math.floor(a.width/this.columnsCount)*m,y=1*Math.floor(a.width/this.columnsCount),_=Math.floor(a.height/this.linesOfMonth),b=ws.builder().setX(y*this.getRelativeX(g)).setY(_*this.getLineOfIndex(g)).setRx(v/m/10).setRy(_/10).setWidth(v).setHeight(_).setFillColor(a.colorBackground).setStrokeWidth(2).setStrokeColor(a.colorMain).addEvent(Ui.builder().setName("click").setFunc(()=>{this.runOnCommand(h)})),C=this.getFontHeightForText(l,a,p,this.textRecommendedWidth(a)*m),x=pi.builder().setText(p).setTextAnchor("middle").setFontSize(`${C.height}px`).translate(y*this.getRelativeX(g)+.5*v,_*(3/4+this.getLineOfIndex(g))).rotate(0).setColor(this.color(a,d)).setStrokeColor(this.color(a,d,this.strokeInvisible?1:.3)).setStrokeWidth(1).addEvent(Ui.builder().setName("click").setFunc(()=>{this.runOnCommand(h)})).addClass("cursor"+(h.classes?" "+h.classes:""));h.rect=b,a.rects.push(h.rect),h.text=x,a.texts.push(h.text)}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}class ui{constructor(l,a){this.\u0438\u043c\u044f=l,this.\u043a\u043b\u0430\u0441\u0441=a}static \u043d\u043e\u0432\u044b\u0439(){return new ui("",null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l){return this.\u0438\u043c\u044f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(l){return this.\u043a\u043b\u0430\u0441\u0441=l,this}}class P0{constructor(l){this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=l}static \u043d\u043e\u0432\u0430\u044f(){return new P0(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l){return this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=l,this}}class fn{constructor(l){this.\u043e\u0431\u044a\u0435\u043a\u0442=l}static \u043d\u043e\u0432\u044b\u0439(){return new fn(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(l){return this.\u043e\u0431\u044a\u0435\u043a\u0442=l,this}}class fe{constructor(l,a,h=null){this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=l,this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=a,this.\u043a\u0430\u0440\u0442\u0430=h}static \u043d\u043e\u0432\u044b\u0439(){return new fe(null,null,null)}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new fe(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(l){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=l,this}\u0435\u0441\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(){return!!this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()}\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return this.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u0424\u0443\u043d\u043a\u0446\u0438\u044f"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(l){return null!=l&&"object"==typeof l&&l.constructor===P0}\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(l=!1){return!l&&!this.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041c\u0430\u0441\u0441\u0438\u0432"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432(){return Array.isArray(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430(){return this.\u043a\u0430\u0440\u0442\u0430}\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(this.\u043a\u0430\u0440\u0442\u0430)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(l){return null!=l&&"object"==typeof l&&l.constructor===Map}\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u041d\u0443\u043b\u044c(){return null==this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==this.\u043a\u0430\u0440\u0442\u0430}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(l){return null!=l&&"object"==typeof l&&(l.constructor===fe||l.constructor===Ba)}\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(l){return null!=l&&"object"==typeof l&&l.constructor===fn}\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(){return this.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("number"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(l){return null!=l&&"number"==typeof l}\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(){return this.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("boolean"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(l){return null!=l&&"boolean"==typeof l}\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443(l){throw new Error(`\u041d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0438\u043f\u0430: \u043e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f ${l}, \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f: ${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"null"}; \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}.`)}\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(){return this.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("string"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(l){return null!=l&&"string"==typeof l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0441\u0442\u0440\u043e\u043a\u0430"===l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f||l.constructor===R0)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(l){return null!=l&&"string"==typeof l}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(l,a=!1,h=!1){var d=fe.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,l,!1);if(null==d&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(d=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(l,!1)),null==d&&a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${l}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==d&&h&&(d=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),d}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(l,a=!1,h=!1){var d=fe.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(this,l,!1);if(null==d&&a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${l}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==d&&h&&(d=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),d||null}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(l,a,h=!1){var d=null;if(l.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())d=l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(a)||null;else if(h)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return d}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(l,a,h=!1){var d=void 0;if(l.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())d=l.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[a];else if(h)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0438\u043d\u0434\u0435\u043a\u0441 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return d}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(l,a=!1){var h=fe.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,l,!1);if(null==h&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(h=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(l,!1)),null==h&&a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${l}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return h}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(l,a,h=!1){var d=void 0;if(l.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())d=l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(a);else if(l.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442())d=l.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442[a];else if(h)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return d}\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f(l){if(this.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().forEach((p,g,m)=>{l(g,p)});else if(this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()){var a=this.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;for(var h in a){var d=a[h],f="object"==typeof d;l(h,fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f?fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(d):d))}}}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(l){return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l))}}class Ba extends fe{constructor(l){super(l,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new Ba(null)}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new Ba(null)}}class R0 extends fe{constructor(l){super(l,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new R0(null)}static \u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new R0(null)}}class bE extends fe{constructor(l){super(l,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new bE(null)}static \u043d\u043e\u0432\u044b\u0439\u0411\u0443\u043b\u0435\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new bE(null)}}class oS extends fe{constructor(l){super(l,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new oS(null)}static \u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432\u041e\u0431\u044a\u0435\u043a\u0442(){return new oS(null)}}class Nr extends fe{constructor(){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u044b"),null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new Nr}static \u043d\u043e\u0432\u044b\u0435(){return new Nr}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u044b(l){this.\u043a\u0430\u0440\u0442\u0430=l}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(l,a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(l,a),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(l){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(l)||null}\u0435\u0441\u0442\u044c(l){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(l)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c(l){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().delete(l)}}let mKe=(()=>{class c{constructor(a,h,d,f=null,p=0,g=!0){this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=a,this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=h,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=d,this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=f,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=p,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=g,this.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=null,this.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=-1}static \u043d\u043e\u0432\u044b\u0439(){return new c(null,null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a){return this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(a){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(a){return this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(a){return this.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a,this}\u0435\u0441\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(a){return null!=this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0435\u0441\u0442\u044c(a)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,h){null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&(this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=new Nr);let d=null;return null===h?this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0434\u0430\u043b\u0438\u0442\u044c(a):(d=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(a,d)),d}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(a){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=a,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a){return null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435?null:this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a)}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(){var a=this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++;return this.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=this.\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(),a}\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(){return c.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439++}}return c.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=0,c})();class ut extends fe{constructor(l,a,h){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"),l?fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(l)?l:P0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l):null),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=h}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return!0}static \u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return new ut(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(l)?l:P0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l)),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(l){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(l){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=l,this}}class R6 extends fe{constructor(l,a,h){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"),l),this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=h}static \u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return new R6(null,!0,!1)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(l){return this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u044f\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(l){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=l,this}}class F6 extends fe{constructor(l){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u043e\u0433\u043e\u0425\u043e\u043b\u0441\u0442\u0430"),null),this.canvas2D=l}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u043e\u0433\u043e\u0425\u043e\u043b\u0441\u0442\u0430(){return new F6(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0425\u043e\u043b\u0441\u0442(l){return this.canvas2D=l,this}}class N6 extends fe{constructor(l){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"),null),this.imageData=l}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f(){return new N6(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(l){return this.imageData=l,this}}class L6 extends fe{constructor(l){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432"),null),this.data=l}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432(){return new L6(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(l){return this.data=l,this}}class bn{constructor(l,a){this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=l,this.\u0442\u0435\u043b\u043e=a}static \u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434(){return new bn(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(l){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(l){return this.\u0442\u0435\u043b\u043e=l,this}}class B6{constructor(l){this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=l}static \u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435(){return new B6(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(l){return this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=l,this}}class V6{constructor(l,a){this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=l,this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=a}static \u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442(){return new V6(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(l){return this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f(l){return this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=l,this}}class CE{constructor(l){this.\u043e\u0431\u044a\u0435\u043a\u0442=l}static \u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return new CE(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(l){return this.\u043e\u0431\u044a\u0435\u043a\u0442=l,this}}class vKe{constructor(){this.\u0434\u043b\u0438\u043d\u0430=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().length)},this.\u043f\u043e\u0434\u0441\u0442\u0440\u043e\u043a\u0430=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),f=a.length>2?l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]):null;return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().substr(d?d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():0,f?f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():void 0))},this.\u0440\u0430\u0437\u0431\u0438\u0442\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),f=h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(new RegExp(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()));return l.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.filter(g=>null!=g).map(g=>l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.trim())))},this.\u0432\u0435\u0440\u0445\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440=(l,a)=>{var h=a[0];return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toUpperCase())},this.\u043d\u0438\u0436\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440=(l,a)=>{var h=a[0];return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toLowerCase())},this.\u0432\u0427\u0438\u0441\u043b\u043e=(l,a)=>{var h=a[0];return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(+h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},this.\u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c=(l,a)=>{var h=a[0];return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().trim())},this.\u0438\u043d\u0434\u0435\u043a\u0441\u0414\u043b\u044f=(l,a)=>{var h=a[0],d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().indexOf(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))},this.\u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c\u0412\u0441\u0435=(l,a)=>{for(var h=a[0],d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]),p=h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g=new RegExp(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p.replace(g,f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());m!=p;)m=(p=m).replace(g,f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}}}class yKe{constructor(){this.\u0434\u043b\u0438\u043d\u0430=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().length)},this.\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),d=a.length>1?l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]):null;return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(p=>""+p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435).join(d?d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""))},this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(d),h},this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(...d.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()),h}}}class Bo{static builder(){return Bo.setup(new Bo)}static convertToObject(l){var a,h=null;return l.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()||l.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()||l.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?h=l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:l.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?h=l.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(d=>Bo.convertToObject(d)):l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"==l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?h=l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.imageData:l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432"==l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?h=l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.data:l.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&(h={},null===(a=l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===a||a.forEach((d,f,p)=>{h[f]=Bo.convertToObject(d)})),h}static \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(l,a){var h;if("boolean"==typeof a)return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a);if("number"==typeof a)return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a);if("string"==typeof a)return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a);if(Array.isArray(a)){for(var d=l.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432"),f=[],p=0;p<a.length;++p)f.push(Bo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(l,a[p]));return d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f),d}if("object"==typeof a){if(a.constructor&&"ImageData"==a.constructor.name){let y=N6.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(a);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c("\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y)}var g=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a&&a.constructor?a.constructor.name:"\u043e\u0431\u044a\u0435\u043a\u0442");for(var m in a){var v=a[m];null===(h=g.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===h||h.set(m,Bo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(l,v))}return g}return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("null")}static addMethod(l,a){return a[l]=(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!p.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u043c\u0425\u043e\u043b\u0441\u0442\u043e\u043c.");var m=h.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(p)),v=d.filter((_,b)=>b>0).map(_=>Bo.convertToObject(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(_))),y=m.canvas2D[l].apply(m.canvas2D,v);return Bo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(h,y)},a}static addGetter(l,a){return a["get"+this.upFirstLetter(l)]=(f,p)=>{var m=f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!m.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u043c\u0425\u043e\u043b\u0441\u0442\u043e\u043c.");var v=f.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(m));return Bo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(f,v.canvas2D[l])},a}static addSetter(l,a){return a["set"+this.upFirstLetter(l)]=(f,p)=>{var g=f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p[1]),m=f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p[0]),v=m.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!v.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u043c\u0425\u043e\u043b\u0441\u0442\u043e\u043c.");return f.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(v)).canvas2D[l]=Bo.convertToObject(g),m},a}static upFirstLetter(l){return l.substring(0,1).toUpperCase()+l.substring(1)}static setup(l){return["kx","ky","width","height","virtualWidth","virtualHeight"].concat(...this.allCanvasProps()).forEach(a=>{a.endsWith("()")?Bo.addMethod(a.substring(0,a.length-2),l):(Bo.addGetter(a,l),Bo.addSetter(a,l))}),l}static allCanvasProps(){return["isContextLost()","clearRect()","fillRect()","strokeRect()","fillText()","strokeText()","measureText()","lineWidth","lineCap","lineJoin","miterLimit","getLineDash()","setLineDash()","lineDashOffset","font","textAlign","textBaseline","direction","letterSpacing","fontKerning","fontStretch","fontVariantCaps","textRendering","wordSpacing","fillStyle","strokeStyle","createConicGradient()","createLinearGradient()","createRadialGradient()","createPattern()","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","beginPath()","closePath()","moveTo()","lineTo()","bezierCurveTo()","quadraticCurveTo()","arc()","arcTo()","ellipse()","rect()","roundRect()","fill()","stroke()","drawFocusIfNeeded()","scrollPathIntoView()","clip()","isPointInPath()","isPointInStroke()","getTransform()","rotate()","scale()","translate()","transform()","setTransform()","resetTransform()","globalAlpha","globalCompositeOperation","drawImage()","createImageData()","getImageData()","putImageData()","imageSmoothingEnabled","imageSmoothingQuality","save()","restore()","canvas","getContextAttributes()","reset()","isContextLost()","filter"]}}class _Ke{constructor(){this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c=(l,a)=>l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this.\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),f=d?Bo.convertToObject(d):JSON.stringify(d,null,2);return console.log(f),h},this.\u043e\u0431\u044a\u0435\u043a\u0442\u0418\u043c\u0435\u0435\u0442\u041f\u043e\u043b\u0435=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[2]),f=h&&h.\u043a\u0430\u0440\u0442\u0430&&h.\u043a\u0430\u0440\u0442\u0430.has(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return f&&(f=!0),l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!f)},this.\u0432\u0440\u0435\u043c\u044f\u0412\u041c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445=(l,a)=>{var h=Date.now();return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h)},this.\u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c\u0412\u0440\u0435\u043c\u044f\u0412\u0421\u0442\u0440\u043e\u043a\u0443=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),d=h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%1e3,f=Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/1e3),p=Math.floor(f/60);f-=60*p;var g=Math.floor(p/60);p-=60*g;var m=(v,y)=>{for(var _=""+v;_.length<y;)_="0"+_;return _};return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`${m(g,2)}:${m(p,2)}:${m(f,2)}.${m(d,3)}`)},this.\u043c\u0438\u043d\u0438\u043c\u0443\u043c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()<=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?h:d},this.\u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?h:d},this.\u043e\u043a\u0440\u0443\u0433\u043b\u0438\u0442\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.round(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.floor=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.ceil=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.ceil(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.sqrt=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sqrt(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.pow=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.pow(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.cos=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.cos(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.sin=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sin(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.atan2=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[2]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.atan2(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.\u0410\u0421\u0414=(l,a)=>{var h=a.length>1?l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]):null,d=l.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414");return null!=h&&d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),d},this.\u0441\u0442\u043e\u043f=(l,a)=>a.length>1?a[1]:a[0]}}class bKe{constructor(){this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]);return l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d)),h},this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())},this.\u0435\u0441\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[0]);return l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a[1]),l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0411\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},this.\u0442\u0438\u043f=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d));return f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"):f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"):f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u0445\u0432\u0430\u0442"):f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u0430"):f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043c\u0430\u0441\u0441\u0438\u0432"):f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0447\u0438\u0441\u043b\u043e"):f.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0431\u0443\u043b\u0435\u0432\u043e"):f.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"):l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")},this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d)),p="";return f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&(p=f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)},this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();return d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d)):l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")},this.\u0438\u043c\u044f\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d));if(f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442())return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var p=l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(f);return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p&&p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"")}return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")},this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var f=l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d);if(!f||!f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var p=f;return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length:0)},this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440=(l,a)=>{var m=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1])),d=l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(m.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(d instanceof ut))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");var f=d,p=h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),g=-1==p?f:f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[p]:null;return m=l.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414"),null!=g&&m.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g)),m},this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1])),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[2])),p=l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(p instanceof ut))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");var g=p,m=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e();return-1==m?g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u0431\u044a\u0435\u043a\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([f]):g.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&(g.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[m]=f),f},this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),d=l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442()));if(!d.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");return l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d)}}}class xu{static \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(l){return l&&l.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f()?l.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():l}static useSetOperation(l,a,h){var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]),f=null,p=null;a[0].\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]):(p=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),f=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())));var g=h(xu.\u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(f).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,xu.\u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(d).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);if(d=("string"==typeof g?l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430"):fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g),f&&f.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f())f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d);else if(p)l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d);else{let m=a[0].\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;m.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(m.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d)}return d}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(l){l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",(a,h)=>null,!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0440\u043e\u0441\u0438\u0442\u044c",(a,h)=>{throw a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0].\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);if(!a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(h[0],null,d)){var p=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(null,p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d)}return d},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d+f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d-f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d*f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d/f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u043e\u0434\u0443\u043b\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d%f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d<<f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d>>f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,h)=>xu.useSetOperation(a,h,(d,f)=>d>>>f),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());if(!f)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e: "${d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}".`);return f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():f},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0431\u044a\u0435\u043a\u0442",(a,h)=>a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0430\u0441\u0441\u0438\u0432",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([...d.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(p=>a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p)))])},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d,f)},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u043a\u0430",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043c\u0438\u043d\u0443\u0441",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=null;if(d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())f=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e());else{if(!d.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())throw new Error("\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: "+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);f=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return f},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043f\u043b\u044e\u0441",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=null;if(d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())f=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e());else{if(!d.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())throw new Error("\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: "+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);f=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(+d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return f},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,h)=>{var f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):h[0],p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,p)}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}return p},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,h)=>{var f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):h[0],p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=m,f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}return p},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,p)}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}return p},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=m,f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}return p},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,p)}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}return p},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()*a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0430\u0441\u0442\u043d\u043e\u0435",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u043e\u0434\u0443\u043b\u044c",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0443\u043c\u043c\u0430",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+Bo.convertToObject(d)+Bo.convertToObject(f))},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0432\u043d\u043e",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!((!d||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==d.\u043a\u0430\u0440\u0442\u0430)&&(!f||null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u043a\u0430\u0440\u0442\u0430)||d&&f&&(null!=d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(d.\u043a\u0430\u0440\u0442\u0430==f.\u043a\u0430\u0440\u0442\u0430||d.\u043a\u0430\u0440\u0442\u0430&&f.\u043a\u0430\u0440\u0442\u0430&&0==d.\u043a\u0430\u0440\u0442\u0430.size&&0==f.\u043a\u0430\u0440\u0442\u0430.size))))},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!((!d||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==d.\u043a\u0430\u0440\u0442\u0430)&&(!f||null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u043a\u0430\u0440\u0442\u0430)||d&&f&&(null!=d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(d.\u043a\u0430\u0440\u0442\u0430==f.\u043a\u0430\u0440\u0442\u0430||d.\u043a\u0430\u0440\u0442\u0430&&f.\u043a\u0430\u0440\u0442\u0430&&0==d.\u043a\u0430\u0440\u0442\u0430.size&&0==f.\u043a\u0430\u0440\u0442\u0430.size))))},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d&&d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)===(f&&f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)&&(d&&d.\u043a\u0430\u0440\u0442\u0430)===(f&&f.\u043a\u0430\u0440\u0442\u0430))},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||d.\u043a\u0430\u0440\u0442\u0430!==f.\u043a\u0430\u0440\u0442\u0430)},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-1):d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1):fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f="\u043d\u0443\u043b\u044c";return null==d?f="\u043d\u0443\u043b\u044c":d.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?f="\u0444\u0443\u043d\u043a\u0446\u0438\u044f":d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?f="\u0447\u0438\u0441\u043b\u043e":d.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?f="\u0441\u0442\u0440\u043e\u043a\u0430":d.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?f="\u043c\u0430\u0441\u0441\u0438\u0432":d.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?f=d.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442 instanceof bn?"\u043c\u0435\u0442\u043e\u0434":"\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442":d.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?f="\u0431\u0443\u043b\u0435\u0432\u043e":(d.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()||d.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())&&(f="\u043e\u0431\u044a\u0435\u043a\u0442"),R0.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f)},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=d&&(d.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().size||d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);return bE.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!f)},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)<<(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)>>(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)>>>(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438\u043b\u0438",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)|(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)&(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u043d\u0435",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)^(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u043b\u0438",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?d:a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1])},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438",(a,h)=>{if(!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);var f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u043d\u0435\u0440\u0433\u0438\u0447\u043d\u043e\u0435 \u0438\u043b\u0438",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return d||f||fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.min(+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",(a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.max(+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0435\u0441\u043b\u0438",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=h[1],p=h[2],g=d.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?f:p;return null==g?null:a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=h[1],p=h[2],g=d.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?f:p;return null==g?null:a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043a\u0430",(a,h)=>{var d=!1,f=null;try{var p=h[0];do{if(p&&(d=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!d)break;var g=h[1];if(g){try{f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)}catch(m){if(m&&m.constructor!==TE)throw m}if(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}}while(d)}catch(m){if(m&&m.constructor!==SE)throw m}return f},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u0435\u043b\u0430\u0442\u044c",(a,h)=>{var d=!1,f=null;try{var p=h[0],g=h[1];do{if(g){try{f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)}catch(m){if(m&&m.constructor!==TE)throw m}if(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}p&&(d=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}while(d)}catch(m){if(m&&m.constructor!==SE)throw m}return f},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u043f\u044f\u0442\u0430\u044f",(a,h)=>{var d=null;for(let p of h)d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p)||null;return d},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0446\u0438\u043a\u043b",(a,h)=>{var d=!0,f=null,p=h[0],g=h[1],m=h[2],v=h[3];let y=()=>{p&&(d=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);try{for(;d;){if(g){try{f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)}catch(_){if(_&&_.constructor!==TE)throw _}if(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}v&&a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null),p&&(d=!!a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}}catch(_){if(_&&_.constructor!==SE)throw _}return f};return m?a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,y):y(),f},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c",(a,h)=>{var d=null,f=h[0],p=h[1],g=h[2],m=h[3];try{f&&(d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null)),m&&(d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,null))}catch(v){if(g)try{a.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(null,null,null,!0,!1,!1),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),fe.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(v)?v:fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+v)),a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null),a.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),d=a.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442}catch(y){throw a.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),m&&(d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,null)),y}m&&(d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,null))}return d},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043b\u0430\u0441\u0441",(a,h)=>{var d=h[0].\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(),f=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u043b\u0430\u0441\u0441");f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442();var p=f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();return d.forEach(g=>{a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(g,p)}),f},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",(a,h)=>a.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[0]),!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u0435\u0440\u043d\u0443\u0442\u044c",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return a.\u0432\u043e\u0437\u0432\u0440\u0430\u0442(d),d},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043e\u043f\u0438\u044f",(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]);return null==d?null:a.\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(d)},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u0442\u043e",(a,h)=>a.\u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c",(a,h)=>{throw new SE},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",(a,h)=>{throw new TE},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e",(a,h)=>{var f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),p=null;if(f&&f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var g=f.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442.\u043e\u0431\u044a\u0435\u043a\u0442;p=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g),null,null,!1,!1,!1,null)}return p},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c",(a,h)=>{var d=!1;do{d=!1;var p=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h[0],null,null,!0,!1,!1,null),g=null,m=null,v=null,y=null;if(p&&p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f&&(y=p.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442).\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430&&y.\u0438\u043c\u044f\u041f\u043e\u043b\u044f){v=y.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();var _=y.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(v);m=y.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430,p=_}var b=!1;if(p&&p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)if("\u043a\u043b\u0430\u0441\u0441"===p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){b=!0,(g=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442")).\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=p;var C=p;if(C&&C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f((L,E)=>{if("\u043f\u043e\u043b\u0435"==E.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var V=E.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442,z=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(V.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f,null,null,!0,!1,!1,null));g.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(L,z)}}),C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"))){var S=[a.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g,"\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)];for(let L=2;L<a.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length;L++)S.push(a.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[L]);var w=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(S);a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(w)}}else if("\u043c\u0435\u0442\u043e\u0434"==p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){b=!0;var T=h[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(),O=h[2],k=[m||fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()];if(O)for(let L=2;L<h.length;L++){var M=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h[L],null,null,!0,!1,!1,null);k.push(M)}var A=p.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;g=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(A.\u0442\u0435\u043b\u043e,k,A.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(!0),!1,T,T,null)}if(!b&&!d)throw a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v?`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${v}".`:`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${p?p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}".`)}while(d);return g},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e",(a,h)=>{var f=h[1],p=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h[0],null,null,!0,!1,!1,null)),m=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null));return a.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p,m)},!1)}}class CKe{constructor(){this.floor=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.ceil=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.ceil(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.abs=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.abs(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.sqrt=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sqrt(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.sin=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sin(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.cos=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.cos(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))},this.tan=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.tan(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}}}class xE{constructor(){this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435=(l,a)=>{var f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.imageData.data,p=L6.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(f);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c("\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432","\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)},this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0428\u0438\u0440\u0438\u043d\u0443=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.imageData.width)},this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0412\u044b\u0441\u043e\u0442\u0443=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.imageData.height)}}static builder(){return xE.setup(new xE)}static setup(l){return l}}class wE{constructor(){this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]),f=h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.data[d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()])},this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c=(l,a)=>{var h=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]),d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[1]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[2]);return h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.data[d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h},this.\u0434\u043b\u0438\u043d\u0430=(l,a)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.data.length)}}static builder(){return wE.setup(new wE)}static setup(l){return l}}class SE{}class TE{}class wu{constructor(){this.\u043f\u0430\u0440\u0441\u0435\u0440=null,this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b=[],this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438=new Map,this.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b=new Nr,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=1,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=0,this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=[],this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!1,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(l){return this.\u043f\u0430\u0440\u0441\u0435\u0440=l,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}get \u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length>0}get \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[0]}get \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}get \u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(l){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.unshift(l)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.shift()}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0435\u0442\u043e\u0434\u0412\u041e\u0431\u044a\u0435\u043a\u0442(l,a,h,d){var f;let p=l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();if(null==p)throw new Error(`\u041e\u0431\u044a\u0435\u043a\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0439, \u0430 \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f: "${null===(f=l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)||void 0===f?void 0:f.\u0438\u043c\u044f}".`);if(p.has(a))throw new Error(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${a}".`);return p.set(a,this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(h))))),l}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(l){return this.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=l,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(){return this.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l,a,h){if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(l))throw new Error(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${l}".`);return this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.set(l,R6.\u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(P0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(h)),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l){let a=this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.get(l);if(!a)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f: "${l}".`);return a}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(l,a){var h=l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;let d=h[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),p=null;return h[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?(p=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(h[2]).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(h[3]))),null!=a&&a.set(d,p)):(p=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043f\u043e\u043b\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(B6.\u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(h[2]))),null!=a&&a.set(d,p)),p}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(l){var a=null;for(let _=0;_<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;_++){var h=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[_];if(!(_<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(a=h.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l))break;if(h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var d=h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],f=d;if(d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var p=d.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;f=p.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}if(f.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&(a=f.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(l))&&(a=this.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f,l)),a)break}if(h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432){for(var g=-1,m=0;m<h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.length;m++)if(h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432[m].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==l){g=m+1;break}if(g>=0&&(a=h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[g]),a)break}if(!a&&h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(_+1<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length){_=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length-2;continue}if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(l)){var v=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[2];a=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(v.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&v.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length>=2?[...v.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.filter((b,C)=>C>=2)]:null))))}else{var y=this.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(l);y&&(a=y)}}if(a||h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}return a}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(l,a,h){let d=!1;if(l&&l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var f=l.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?f.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),h):f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(f.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=h),d=!0}else a&&(this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a,h),d=!0);return d}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(l,a){let h=null;for(let f=0;f<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;f++){let p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[f];if(!(f<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||p.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(h=p.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l),h)break;if(p.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var d=p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0];if(d.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(l))return d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(l,a),a;if(h)break}if(h||p.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}if(null==h&&(h=this.\u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l,a)),h)h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=a;else if(null!=a)throw new Error(`\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${l}".`);return h}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l){return this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l))}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l){return this.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l)))}\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l){if(null==l)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: \u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442.");return l}\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(l){var a=l;return l.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=this.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):l.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?a=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):l.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&(a=this.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().concat([]))),a}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442(l){if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw new Error("\u041f\u0430\u0440\u0441\u0435\u0440 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.");let a=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(l);return this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a),null,null,!0,!0,!1,null))}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l){var a=null;if(l.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())if(l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){let f=l;if(f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()){var h=this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),d=h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b):f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430();try{a=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h,d,f.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!1,h.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435,!1,null),h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430()}catch(p){throw h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(),p}}else l.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()&&(a=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(l,f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b,f.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!0,!0,!1,null))}else a=l;else a=l;return a}\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(l,a,h,d=!0,f=!0,p=!1){var g=d?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a):a;return this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(mKe.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(f)),p?(this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.push({\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430}),this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=1,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=0):this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(l=!1,a=!1){var h=!!l&&this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,d=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445;if(this.\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(),l&&h&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=h),this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&d?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!1:this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=Number.MAX_VALUE),a){var f=this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.pop();this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=f.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=f.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430}else this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430;return this}\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(l){return null==l?null:l.map(a=>this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a))}\u0432\u043e\u0437\u0432\u0440\u0430\u0442(l){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=l,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!0,this}\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l){var a=null;if(l&&l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var h=l.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(a=h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}else a=l;return a}\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l,a){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0437\u0430\u0445\u0432\u0430\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(V6.\u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f("string"!=typeof a?a:this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a))))}\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(CE.\u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(l)))}\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(l){var a,h=l.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;if(!(h instanceof CE))throw new Error(`\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u043c. \u0418\u043c\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430: '${null===(a=l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)||void 0===a?void 0:a.\u0438\u043c\u044f}'.`);return h.\u043e\u0431\u044a\u0435\u043a\u0442}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(){var l=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442,a=l.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439,h=!1,d=null;try{if(l.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()){var f=l.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432();if(l.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<f.length){let p=f[l.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++];h=l.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<f.length,l.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p)}}else l.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=l.\u043a\u043e\u043c\u0430\u043d\u0434\u0430}catch(p){d=p}if(a!==l.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439&&(h=!0),d)throw d;return h}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(l,a,h,d,f,p,g){var m=null;if(l.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f())try{var v=l.\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0444\u0443\u043d\u043a\u0446\u0438\u044f;this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(l,a,h,d,f,p),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=v(this,this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b),g&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g()),m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p)}catch(y){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p),y}else if(l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===l.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f)try{this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(l,a,h,d,f,p),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l),g&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g()),m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p)}catch(y){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p),y}else if(l.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())try{for(this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(l,a,h,!0,f,p);this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(););g&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g()),m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p)}catch(y){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p),y}else m=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l),g&&(m=g());return null==m&&(m=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),m}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l,a){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l,a),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l,a){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(){return xu.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),wu.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),this}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u041f\u043e\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0443(l,a="\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e"){return Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a)))}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(l){return Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l))}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c(l,a=""){return Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(a?ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a))):ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l))}\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430(l){return R0.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430")))}\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432(l){return oS.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432")))}\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414(l){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c(l,"\u0410\u0421\u0414")}\u043d\u043e\u0432\u044b\u0439\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442(l){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c(l,"\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442")}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(l){var a,h,d,f=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u041f\u043e\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e");null===(a=l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430")).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435().\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===a||a.set("\u0441\u0438\u0441\u0442\u0435\u043c\u0430",f),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",(g,m)=>f,!0);var p=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u041f\u043e\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0443("\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430","\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430");null===(h=p.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===h||h.set("PI",l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.PI)),null===(d=l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435().\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===d||d.set("\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",p),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u043e\u043f",(g,m)=>(g.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m[0]),m.length?m[0]:fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(g,m)=>{var v=g.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m[0]),y=g.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m[1]);return f.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),y),y},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(g,m)=>{var v=g.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m[0]);return f.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(g,m)=>{var v=g.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m[0]),y=g.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m[1]);return f.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),y),y},!1),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(g,m)=>{var v=g.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m[0]);return f.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(l,a){for(let h in l)this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0435\u0442\u043e\u0434\u0412\u041e\u0431\u044a\u0435\u043a\u0442(a,h,l[h],!1);return a}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b(){this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new vKe,Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new yKe,Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()));{let l=new _Ke;l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c=(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let f=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[0])},l.\u0444\u0430\u0431\u0440\u0438\u043a\u0430\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439=(a,h)=>{if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let d=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n              \u0440\u0430\u0437\u0431\u043e\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 \u043a\u043b\u0430\u0441\u0441 {\n                \u0438\u043d\u043b\u0430\u0439\u043d\u0417\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439)\n                {\n                  \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                    \u0430\u0441\u0434 = 0;\n                    \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                    \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                      \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                      \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                    }\n                  };\n                  \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n                    \u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435) {\n                      \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;\n                    }\n                    \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043a\u043e\u043f\u0438\u044f, \u0441\u043f\u0438\u0441\u043e\u043a) {\n                      \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                        \u0430\u0441\u0434 = 0;\n                        \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                        \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                          \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                          \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                        }\n                      };\n                      \u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 = \u0430\u0441\u0434.\u0442\u0438\u043f();\n                      \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = \u0430\u0441\u0434.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432();\n                      if (\u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 === '\u043a\u043e\u043c\u0430\u043d\u0434\u0430'){\n                        if (\u0430\u0441\u0434.\u043a\u043e\u043c\u0430\u043d\u0434\u0430() === '\u043a\u043e\u043f\u0438\u044f') {\n                          \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043f\u0438\u044f);\n                          \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = 0;\n                        }\n                      }\n                      for(i = 0; i < \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432; ++i) {\n                       \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 = \u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(i);\n                       \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, i),  \u0441\u043f\u0438\u0441\u043e\u043a);\n                      }\n                    }\n                  };\n                  //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0437\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439 = \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438;...');\n                  \u0430\u0441\u0434 = \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0410\u0421\u0414(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439);\n                  //\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c\u0410\u0421\u0414(\u0430\u0441\u0434, '');\n                  \u0441\u043f\u0438\u0441\u043e\u043a = [];\n                  \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, -1), \u0441\u043f\u0438\u0441\u043e\u043a);\n                  //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0414\u043b\u0438\u043d\u0430 \u0441\u043f\u0438\u0441\u043a\u0430: ' + \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430());\n                  for(i = 0; i < \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430(); ++i){\n                    \u043f\u0430\u0440\u0430 = \u0441\u043f\u0438\u0441\u043e\u043a[i];\n                    //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u043f\u0430\u0440\u0430: [' + \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 + '];');\n                    \u0440\u0435\u0437 = \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 == -1 ? \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c() :\n                      \u0412\u042b\u0417\u041e\u0412 \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c();\n                    \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441, \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0440\u0435\u0437));\n                  }\n                }\n              }");return a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[0])},l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043eHttp=(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]),f=pageLoadedFrom+d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();let p=new XMLHttpRequest;p.open("GET",f,!1);var g=null;try{if(p.send(),200!=p.status)throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${p.status}: ${p.statusText}`;g=a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.response)}catch(m){throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${p.status}: ${p.statusText}`}return g},l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=(a,h)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]),f=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return null==f&&(f=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),f},l.\u0432\u0440\u0435\u043c\u044f=(a,h)=>{var d=Date.now();return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)},this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(l,Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()))}this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new CKe,Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0410\u0421\u0414",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new bKe,Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Bo.builder(),Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xE.builder(),Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(wE.builder(),Ba.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()))}}class z6{constructor(l,a){this.op=l,this.exp=a}static builder(){return new z6("",null)}setExp(l){return this.exp=l,this}setOp(l){return this.op=l,this}\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(l){return class xKe{static \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(l){for(var a="",h=!1,d=0;d<l.length;++d){var f=l.charAt(d);if(h){switch(f){case"\\":a+="\\";break;case'"':a+='"';break;case"'":a+="'";break;case"r":a+="\r";break;case"n":a+="\n";break;case"t":a+="\t";break;default:a+=f}h=!1}else(h="\\"==f)||(a+=f)}return a}}.\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(l)}done(){let l=this.exp;switch(this.op){case"!":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"+i":{let a=this.exp;l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043f\u043b\u044e\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a])}break;case"-i":{let a=this.exp;l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043c\u0438\u043d\u0443\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a])}break;case"++i":{let a=this.exp,h=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,h])}break;case"i++":{let a=this.exp,h=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,h])}break;case"--i":{let a=this.exp,h=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,h])}break;case"i--":{let a=this.exp,h=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a,h])}break;case";":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438");break;case"{;}":case"number":case"\u043f\u043e\u043b\u044f":l=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp);break;case"(,)":break;case"{,}":{let a=[];this.exp&&this.exp.forEach(h=>{a.push(h)}),l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a)]),l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([l])}break;case"object":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0431\u044a\u0435\u043a\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"array":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"string":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([R0.\u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u044d\u0442\u043e":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u044d\u0442\u043e");break;case"\u043d\u0443\u043b\u044c":l=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null);break;case"\u0438\u0441\u0442\u0438\u043d\u0430":l=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0);break;case"\u043b\u043e\u0436\u044c":l=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);break;case"id":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u0431\u0440\u043e\u0441\u0438\u0442\u044c":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0440\u043e\u0441\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u043a\u043b\u0430\u0441\u0441":{let a=[];this.exp&&this.exp.forEach(h=>{a.push(h)}),l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a)])}break;case"[,]":l=oS.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp?this.exp:[]);break;case"#":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u0435\u0440\u043d\u0443\u0442\u044c":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u0435\u0440\u043d\u0443\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp?this.exp:fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)]);break;case"\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c");break;case"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c");break;case"\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u044b\u0437\u043e\u0432":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"{{{?}}}":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043e\u043f\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0443\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f "${this.op}".`)}return l}}class U6{constructor(l,a,h){this.left=l,this.op=a,this.right=h}static builder(){return new U6(null,"",null)}setLeft(l){return this.left=l,this}setRight(l){return this.right=l,this}setOp(l){return this.op=l,this}done(){let l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),a=h=>{let d=this.left;"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&typeof d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()&&(d=d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([d,this.right])};switch(this.op){case"(.)":{let h=this.right?this.right:[];h.unshift(this.left,fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"((.))":{let h=this.right?this.right:[];h.unshift(this.left,fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"[.]":l=ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"=":a("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+=":a("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"-=":a("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"*=":a("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"/=":a("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"%=":a("\u043c\u043e\u0434\u0443\u043b\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"<<=":a("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case">>=":a("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case">>>=":a("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"-":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"*":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"/":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0447\u0430\u0441\u0442\u043d\u043e\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"%":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u043e\u0434\u0443\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"|":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"&":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"^":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u043d\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<<":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">>":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">>>":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"||":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"&&":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"==":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!=":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"===":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!==":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">=":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=>":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"?":{let d=[...this.right];d.unshift(this.left),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(d)}break;case"\u0435\u0441\u043b\u0438":{let h=this.right?this.right:[];h.unshift(this.left),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"\u043f\u043e\u043a\u0430":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0434\u0435\u043b\u0430\u0442\u044c":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u0435\u043b\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0446\u0438\u043a\u043b":{let h=this.right?this.right:[];h.unshift(this.left),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0446\u0438\u043a\u043b").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c":{let h=this.right?this.right:[];h[0]=fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[0]),h.unshift(this.left),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"\u043c\u0435\u0442\u043e\u0434":{let h=this.right?this.right:[];h[0]&&h[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&h[0].\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.map(d=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.name))),h.unshift(...[this.left,!0].map(d=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d))),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h.map(d=>d||fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)))}break;case"\u043f\u043e\u043b\u0435":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.left),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1),this.right]);break;case".":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.right)]);break;case",":l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0437\u0430\u043f\u044f\u0442\u0430\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0431\u0438\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f: "${this.op}".`)}return l}}class F0{constructor(){this.\u0434\u0432\u0438\u0436\u043e\u043a=new wu,this.\u0442\u0435\u043a\u0441\u0442="",this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430=0,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(this)}\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){return this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430<this.\u0442\u0435\u043a\u0441\u0442.length}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){if(!this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b())throw new Error("\u0412\u0441\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u044b. \u041a\u043e\u043d\u0435\u0446 \u0442\u0435\u043a\u0441\u0442\u0430.");return this.\u0442\u0435\u043a\u0441\u0442[++this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430]}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c(l){for(this.\u0442\u0435\u043a\u0441\u0442=l,this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430=0;this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b();)this.\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b()}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(l){for(var a={BinOpBuilder:()=>U6.builder(),UnOpBuilder:()=>z6.builder()},h=null;null==h;)try{return universalParserStatic.parse(l,{builder:a})}catch(d){h=d}throw h}}class mg{constructor(l,a){this.\u043e\u0431\u044a\u0435\u043a\u0442=l,this.\u0438\u043c\u044f=a}static \u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new mg(null,"")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(l){return this.\u043e\u0431\u044a\u0435\u043a\u0442=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l){return this.\u0438\u043c\u044f=l,this}}class OE{constructor(l,a,h,d,f,p,g=0,m=!0,v=1,y=1){this.d3Config=l,this.d3Svc=a,this.\u0434\u0432\u0438\u0436\u043e\u043a=h,this.\u043f\u0430\u043c\u044f\u0442\u044c=d,this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=f,this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=p,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=g,this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=m,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=v,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=y}static \u043d\u043e\u0432\u0430\u044f(){return new OE}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let l=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==l?1:l.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(l){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(l){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(l){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(l){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(l){return this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(l,a){return this.d3Config.width=l,this.d3Config.height=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(l){return this.d3Config=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(l){return this.d3Svc=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(l){return this.\u0434\u0432\u0438\u0436\u043e\u043a=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(l){return this.\u043f\u0430\u043c\u044f\u0442\u044c=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(l){return this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=l,this}\u0437\u0430\u043f\u0443\u0441\u043a(l=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u043f\u0443\u0441\u043a"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(l.map(h=>h.\u043e\u0431\u044a\u0435\u043a\u0442)),[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(l.map(h=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0438\u043c\u044f))),!0,!0,!1,null))}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435(l=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(l.map(h=>h.\u043e\u0431\u044a\u0435\u043a\u0442)),[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(l.map(h=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0438\u043c\u044f))),!0,!0,!1,null))}}class aS{constructor(l=0,a=0){this.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=l,this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=a,this.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b=new Map,this.\u0441\u043e\u0431\u044b\u0442\u0438\u044f=new Map}static \u043d\u043e\u0432\u044b\u0439(){return new aS}}class H6{constructor(){this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b=[aS.\u043d\u043e\u0432\u044b\u0439()],this.d3Element=null,this.d3ElementTransition=null}static \u043d\u043e\u0432\u0430\u044f(){return new H6}get \u043f\u0435\u0440\u0435\u0445\u043e\u0434(){return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b[this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.length-1]}transition(){return this.d3Element?this.d3ElementTransition=this.d3Element.transition():this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(aS.\u043d\u043e\u0432\u044b\u0439()),this}resetTransition(){return this.d3Element?this.d3ElementTransition=null:this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(aS.\u043d\u043e\u0432\u044b\u0439()),this}duration(l){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.duration(l)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=l,this}delay(l){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.delay(l)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=l,this}attr(l,a){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.attr(l,a):this.d3Element=this.d3Element.attr(l,a):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.set(l,a),this}text(l){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.text(l):this.d3Element=this.d3Element.text(l):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0442\u0435\u043a\u0441\u0442=l,this}event(l,a){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.on(l,a(this.d3Element)):this.d3Element=this.d3Element.on(l,a(this.d3Element)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.set(l,a),this}apply(l){this.d3Element=l;let a=this.d3Element;return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.forEach((h,d)=>{d&&(a=a.transition().duration(h.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c),h.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430&&(a=a.delay(h.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430))),h.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.forEach((f,p,g)=>{a=a.on(p,f(a))}),h.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.forEach((f,p,g)=>{a=a.attr(p,f)}),h.\u0442\u0435\u043a\u0441\u0442&&(a=a.text(h.\u0442\u0435\u043a\u0441\u0442)),d||(this.d3Element=a)}),this}}class DE extends fe{constructor(l,a){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0422\u0435\u043a\u0441\u0442 D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this.\u043f\u0422\u0435\u043a\u0441\u0442=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u0442\u0435\u043a\u0441\u0442(){return this.\u043f\u0422\u0435\u043a\u0441\u0442}set \u0442\u0435\u043a\u0441\u0442(l){this.\u043f\u0422\u0435\u043a\u0441\u0442=l}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(l){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l}static \u043d\u043e\u0432\u044b\u0439(){return new DE(null,null)}static \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(){return new DE(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(l){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(l){return this.\u0442\u0435\u043a\u0441\u0442=l,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let l=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();l.set("\u0442\u0435\u043a\u0441\u0442",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.text(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1])).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("x",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u0442\u0435\u043a\u0441\u0442.attr("y",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0440\u0430\u0437\u043c\u0435\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-size",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0436\u0438\u0440\u043d\u044b\u0439",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-weight",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300),this)))))),l.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439\u042f\u043a\u043e\u0440\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("text-anchor",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this))))));let a=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u0442\u0435\u043a\u0441\u0442.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([mg.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));l.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),l.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),l.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.transition(),this)))))),l.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.resetTransition(),this)))))),l.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u0442\u0435\u043a\u0441\u0442.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),l.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u0442\u0435\u043a\u0441\u0442.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class kE extends fe{constructor(l,a){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041a\u0440\u0443\u0433 D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this.\u043f\u041a\u0440\u0443\u0433=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u0440\u0443\u0433(){return this.\u043f\u041a\u0440\u0443\u0433}set \u043a\u0440\u0443\u0433(l){this.\u043f\u041a\u0440\u0443\u0433=l}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(l){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l}static \u043d\u043e\u0432\u044b\u0439(){return new kE}static \u043d\u043e\u0432\u044b\u0439\u041a\u0440\u0443\u0433(){return new kE}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(l){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(l){return this.\u043a\u0440\u0443\u0433=l,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let l=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();l.set("\u0440\u0430\u0434\u0438\u0443\u0441",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("r",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("cx",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043a\u0440\u0443\u0433.attr("cy",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("fill",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let a=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u043a\u0440\u0443\u0433.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([mg.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));l.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),l.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),l.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.transition(),this)))))),l.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.resetTransition(),this)))))),l.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043a\u0440\u0443\u0433.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),l.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043a\u0440\u0443\u0433.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class ME extends fe{constructor(l,a){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a}set \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(l){this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=l}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(l){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l}static \u043d\u043e\u0432\u044b\u0439(){return new ME}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return new ME}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(l){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(l){return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=l,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let l=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();l.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("height",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("x",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("y",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("transform",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u0441\u043a\u0440\u0443\u0433\u043b\u0435\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("rx",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("ry",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let a=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([mg.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));l.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),l.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),l.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.transition(),this)))))),l.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.resetTransition(),this)))))),l.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),l.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class EE extends fe{constructor(l,a){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041b\u0438\u043d\u0438\u044f D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this.\u043f\u041b\u0438\u043d\u0438\u044f=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043b\u0438\u043d\u0438\u044f(){return this.\u043f\u041b\u0438\u043d\u0438\u044f}set \u043b\u0438\u043d\u0438\u044f(l){this.\u043f\u041b\u0438\u043d\u0438\u044f=l}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(l){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l}static \u043d\u043e\u0432\u044b\u0439(){return new EE}static \u043d\u043e\u0432\u0430\u044f\u041b\u0438\u043d\u0438\u044f(){return new EE}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(l){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(l){return this.\u043b\u0438\u043d\u0438\u044f=l,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let l=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();l.set("\u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("x1",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y1",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("x2",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[3]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y2",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[4]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("transform",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),l.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),l.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let a=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u043b\u0438\u043d\u0438\u044f.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([mg.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));l.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",a("click")),l.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",a("end")),l.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.transition(),this)))))),l.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.resetTransition(),this)))))),l.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043b\u0438\u043d\u0438\u044f.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),l.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043b\u0438\u043d\u0438\u044f.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class lS extends fe{constructor(l){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(l){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(l,a){let h=lS.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a);l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443D3",(d,f)=>h,!0),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",(d,f)=>(h.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),h),!0)}static \u043d\u043e\u0432\u0430\u044f(){return new lS}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(l){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=l,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let l=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();l.set("\u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0422\u0435\u043a\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),v=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[3]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300,y=this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Svc.textSizeDirect(p,g,v),_=h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u0440\u0438\u043a\u0430");return _.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0448\u0438\u0440\u0438\u043d\u0430",h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0448\u0438\u0440\u0438\u043d\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y.width)),_.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u044b\u0441\u043e\u0442\u0430",h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0432\u044b\u0441\u043e\u0442\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y.height)),_}))))),l.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.width)))))),l.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.height))))));let a=(h,d)=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((f,p)=>{let m=H6.\u043d\u043e\u0432\u0430\u044f();return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.pathes.push(hs.builder().setRenderHandler((v,y)=>{m.apply(v.append(d))})),h.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(m)}))));l.set("\u043a\u0440\u0443\u0433",a(kE,"circle")),l.set("\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a",a(ME,"rect")),l.set("\u0442\u0435\u043a\u0441\u0442",a(DE,"text")),l.set("\u043b\u0438\u043d\u0438\u044f",a(EE,"line")),l.set("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),d[0])))))),l.set("\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c\u0412\u0441\u0451",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{var f;return null===(f=this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.svgImage)||void 0===f||f.clearAll(),this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.clearAll(),d[0]}))))),l.set("\u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440.regenerate(),d[0]))))))}}class the extends yl{constructor(){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 JS."),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439="",this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=null,this.d3SvcSaved=null,this.d3ConfigSaved=null,this.cacheService=null,this.\u043f\u0430\u043c\u044f\u0442\u044c=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(l){return this.cacheService=l,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(l="/scenes/logo.scene.txt"){let a=this.cacheService.getRestPoint(l,null);this.cacheService.getTextRestcallUrl(a,h=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=h,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})}clear(){return super.clear(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let a=(new F0).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),h=new wu,d=OE.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this);return h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),lS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(h,d),d.\u0437\u0430\u043f\u0443\u0441\u043a(),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(l,a,h){return this.d3SvcSaved=l,this.d3ConfigSaved=a,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=h,!1)}}class AE extends fe{constructor(){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432"),null,new Map),this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435="\n\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}\n===\n1\n\u0421\u0411\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c\n\u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c.\n\u041c\u0423\u0427\u0415\u041d\u0418\u041a\u0410 \u0412\u041e\u041d\u0418\u0424\u0410\u0422\u0418\u042f\n--\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n17.00{\u043a}\n===\n2{\u043a}\n\u0412\u0421{\u043a}\n--\n\u041d\u0415\u0414\u0415\u041b\u042f 28-\u042f{\u043a}\n\u041f\u041e \u041f\u042f\u0422\u0418\u0414\u0415\u0421\u042f\u0422\u041d\u0418\u0426\u0415,{\u043a}\n\u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c,{\u043a}\n\u0421\u0412\u042f\u0422\u042b\u0425 \u041e\u0422\u0415\u0426.{\u043a}\n\u041f\u0420\u0410\u0412. \u0418\u041e\u0410\u041d\u041d\u0410 \u041a\u0420\u041e\u041d\u0428\u0422\u0410\u0414\u0422\u0421\u041a\u041e\u0413\u041e{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421{\u0437}\n--\n6.00{\u043a}\n\n8.00{\u043a}\n8.40{\u043a}\n\n17.00{\u0437}\n===\n3{\u0437}\n\u041f\u041d{\u0437}\n--\n\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n4\n\u0412\u0422\n--\n\u0412\u041c\u0426. \u0410\u041d\u0410\u0421\u0422\u0410\u0421\u0418\u0418 \u0423\u0417\u041e\u0420\u0415\u0428\u0418\u0422\u0415\u041b\u042c\u041d\u0418\u0426\u042b\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n5\n\u0421\u0420\n--\n\u0414\u0415\u0421\u042f\u0422\u0418 \u041c\u0423\u0427\u0415\u041d\u0418\u041a\u041e\u0412, \u0418\u0416\u0415 \u0412 \u041a\u0420\u0418\u0422\u0415\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f.\n--\n8.40\n\n17.00\n===\n6\n\u0427\u0422\n--\n\u041d\u0410\u0412\u0415\u0427\u0415\u0420\u0418\u0415\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0410 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u0410.\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415\u041d\u0421\u041a\u0418\u0419 \u0421\u041e\u0427\u0415\u041b\u042c\u041d\u0418\u041a\n\u041f\u0420\u041c\u0426. \u0415\u0412\u0413\u0415\u041d\u0418\u0418\n--\n\u0426\u0410\u0420\u0421\u041a\u0418\u0415 \u0427\u0410\u0421\u042b.\n\u0418\u0417\u041e\u0411\u0420\u0410\u0417\u0418\u0422\u0415\u041b\u042c\u041d\u042b.\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f \u0421 \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u0415\u0419\n\u0421\u0412\u0422. \u0412\u0410\u0421\u0418\u041b\u0418\u042f \u0412\u0415\u041b\u0418\u041a\u041e\u0413\u041e\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n--\n8.00\n\n\n\n17.00{\u043a}\n23.00{\u043a}\n===\n7{\u043a}\n\u041f\u0422{\u043a}\n--\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e \u0413\u041e\u0421\u041f\u041e\u0414\u0410 \u0411\u041e\u0413\u0410 \u0418 \u0421\u041f\u0410\u0421\u0410{\u043a}\n\u041d\u0410\u0428\u0415\u0413\u041e \u0418\u0418\u0421\u0423\u0421\u0410 \u0425\u0420\u0418\u0421\u0422\u0410{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u0412\u0415\u041b\u0418\u041a\u0410\u042f \u0412\u0415\u0427\u0415\u0420\u041d\u042f{\u0441}\n--\n8.40{\u043a}\n17.00{\u0441}\n===\n8{\u0441}\n\u0421\u0411{\u0441}\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u041e \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u041e\u041c.{\u0441}\n\u0421\u041e\u0411\u041e\u0420 \u041f\u0420\u0415\u0421\u0412\u042f\u0422\u041e\u0419 \u0411\u041e\u0413\u041e\u0420\u041e\u0414\u0418\u0426\u042b{\u0441}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0441}\n\u041f\u0430\u043d\u0438\u0445\u0438\u0434\u0430{\u0441}\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n8.40{\u0441}\n\n17.00{\u043a}\n===\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223\n                      ",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(l){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=l,this}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(l){let a=AE.\u043d\u043e\u0432\u0430\u044f();l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432",(h,d)=>a,!0)}static \u043d\u043e\u0432\u0430\u044f(){return new AE}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u043a\u0441\u0442\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((a,h)=>a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435))))))}}class $6 extends yl{constructor(l=210,a=297){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f JS.",l,a),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439="",this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=null,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=null,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f=null,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=0,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=0,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=0,this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=!0,this.d3SvcSaved=null,this.d3ConfigSaved=null,this.cacheService=null,this.\u043f\u0430\u043c\u044f\u0442\u044c=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=new Map}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(l,a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.set(l,a),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(l){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(l){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(l){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(l){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(l){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=l,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let l=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==l?1:l.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}getWidth(){return this.d3ConfigSaved?this.d3ConfigSaved.width:this.width}getHeight(){return this.d3ConfigSaved?this.d3ConfigSaved.height:this.height}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(l,a="/scenes/scheduler.scene.txt"){return this.cacheService=l,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(a),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(l="/scenes/scheduler.scene.txt",a="/scenes/scheduler4.txt"){let h=this.cacheService.getRestPoint(l,null),d=this.cacheService.getRestPoint(a,null);this.cacheService.getTextRestcallUrl(h,f=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=f,null!=this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():this.cacheService.getTextRestcallUrl(d,p=>{this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=p,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})})}clear(){return super.clear(),this.d3ConfigSaved.clearAll(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let l=new F0,a=l.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),h=l.\u0434\u0432\u0438\u0436\u043e\u043a,d=AE.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435),f=OE.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b);h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),lS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(h,f);let p=[mg.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(d).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438")];return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.forEach((m,v)=>p.push(mg.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(h.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(v))),f.\u0437\u0430\u043f\u0443\u0441\u043a(p),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(l,a,h){return this.d3SvcSaved=l,this.d3ConfigSaved=a,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=h,!1)}}class jf{static saveData(l,a){const h=document.createElement("a"),d=window.URL.createObjectURL(l);h.href=d,h.download=a,h.click(),window.URL.revokeObjectURL(d)}static startDownload(l,a){const h=document.createElement("a");h.setAttribute("href",l),h.setAttribute("download",a),h.click(),h.remove()}}var IE=Ot(650);class wKe{StatementValue(){return W6.builder()}VariableValue(){return G6.builder()}UnaryOp(){return Z6.builder()}BinaryOp(){return X6.builder()}NumberValue(){return Q6.builder()}IdValue(){return j6.builder()}FuncValue(){return q6.builder()}}var Ac=(()=>(function(c){c[c.Number=0]="Number",c[c.Id=1]="Id",c[c.Function=2]="Function",c[c.UnaryOp=3]="UnaryOp",c[c.BinaryOp=4]="BinaryOp"}(Ac||(Ac={})),Ac))();class W6{constructor(l,a){this.value=l,this.variables=a}static builder(){return new W6(null,[])}setValue(l){return this.value=l,this}setVariables(l){return this.variables=l,this}toString(){var l;let a=this.variables.map(h=>h.toString()).join("\r\n");return`${null===(l=this.value)||void 0===l?void 0:l.toString()};`+(a?` \u0433\u0434\u0435\n      ${a}\n`:"")+"\n."}}class G6{constructor(l,a,h){this.name=l,this.constant=a,this.type=h}static builder(){return new G6("",!1,"")}setName(l){return this.name=l,this}setConstant(l){return this.constant=l,this}setType(l){return this.type=l,this}toString(){return`${this.name}: ${this.constant?"\u043f\u043e\u0441\u0442 ":""}${this.type};`}}class cS{constructor(l){this.type=l}getType(){return this.type}toString(){return""}}class Q6 extends cS{constructor(l){super(Ac.Number),this.value=l}static builder(){return new Q6(0)}setValue(l){return this.value=l,this}toString(){return`${this.value}`}}class j6 extends cS{constructor(l){return super(Ac.Id),this.name=l,this}static builder(){return new j6("")}setName(l){return this.name=l,this}toString(){return`${this.name}`}}class q6 extends cS{constructor(l,a){super(Ac.Function),this.name=l,this.params=a}static builder(){return new q6("",[])}setName(l){return this.name=l,this}setParams(l){return this.params=l,this}isIntegralName(l){let a=!1;switch(l){case"integrate":case"integral":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u043b":a=!0}return a}isDiffName(l){let a=!1;switch(l){case"diff":case"differentiate":case"\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f":a=!0}return a}toString(){return this.isDiffName(this.name)&&2==this.params.length?`diff(${this.params.map(l=>l.toString()).join(",")})`:this.isIntegralName(this.name)&&2==this.params.length?`integrate(${this.params.map(l=>l.toString()).join(",")},1)`:this.isIntegralName(this.name)&&3==this.params.length?`integrate(${this.params.map(l=>l.toString()).join(",")})`:`${this.name}(${this.params.map(l=>l.toString()).join(",")})`}}class Z6 extends cS{constructor(l,a){return super(Ac.UnaryOp),this.name=l,this.value=a,this}static builder(){return new Z6("",null)}setName(l){return this.name=l,this}setValue(l){return this.value=l,this}toString(){var l,a;return"()"==this.name?`(${null===(l=this.value)||void 0===l?void 0:l.toString()})`:`${this.name}${null===(a=this.value)||void 0===a?void 0:a.toString()}`}}class X6 extends cS{constructor(l,a,h){return super(Ac.BinaryOp),this.left=l,this.name=a,this.right=h,this}static builder(){return new X6(null,"",null)}setLeft(l){return this.left=l,this}setName(l){return this.name=l,this}setRight(l){return this.right=l,this}toString(){var l,a;return`${null===(l=this.left)||void 0===l?void 0:l.toString()} ${this.name} ${null===(a=this.right)||void 0===a?void 0:a.toString()}`}}class PE{parse(l){return formulasParserStatic.parse(l,{builder:new wKe})}}class Lr{constructor(l,a){this.width=l,this.height=a,this.underline=!1,this.overline=!1,this.system=!1,this.space=!1}static builder(){return new Lr(0,0)}setWidth(l){return this.width=l,this}setHeight(l){return this.height=l,this}setUnderline(l){return this.underline=l,this}setOverline(l){return this.overline=l,this}setSystem(l){return this.system=l,this}setSpace(l){return this.space=l,this}calculateFor(l,a){this.width=this.space?a.fontSize/10:0,this.height=0}drawFor(l,a,h,d,f,p){this.overline&&p.lines.push(gi.builder().setWidth(p.lineWidth).setColor(p.colorLines).setX1(l).setY1(a).setX2(l+h).setY2(a)),this.underline&&p.lines.push(gi.builder().setWidth(p.lineWidth).setColor(p.colorLines).setX1(l).setY1(a+d).setX2(l+h).setY2(a+d))}}class ql extends Lr{constructor(l){super(0,0),this.text=l}static builder(){return new ql("")}setText(l){return this.text=l,this}calculateFor(l,a){let h=l.textSizeDirect(this.text,a.fontSize,a.fontWeight);h&&this.setWidth(h.width).setHeight(h.height)}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p),p.texts.push(pi.builder().setText(this.text).setTextAnchor("left").setFontSize(p.fontSize+"px").translate(l,a+d-this.height*(1-p.fontLineRelativeOffset)).rotate(0).setColor(p.colorLines))}}class Su extends Lr{constructor(l){super(0,0),this.childs=l,this.centerDy=0}static builder(){return new Su([])}setChilds(l){return this.childs=l,this}getCurCenterDy(l,a){return nhe.getCurCenterDy(l,a)}calculateFor(l,a){this.childs.forEach(f=>f.calculateFor(l,a));let h=0,d=0;this.centerDy=0,this.childs.forEach(f=>{h+=f.width;let p=this.getCurCenterDy(f,a);if(this.centerDy<p){let g=this.centerDy,m=d-g,v=p,y=f.height-v;this.centerDy=p,d=Math.max(g,v)+Math.max(m,y)}else d=Math.max(d,f.height+(p-this.centerDy))}),this.setWidth(h).setHeight(d)}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let g=l,m=a,_=h-0;this.childs.forEach(C=>{let x=this.getCurCenterDy(C,p);0==x&&(x=this.centerDy>0?(C.system?d:C.height)/2:0),C.drawFor(g,m+(C.system?0:this.centerDy-x),C.width,C.system?d:C.height,f,p),g+=C.width,_-=C.width})}}class vg extends Lr{constructor(l){super(0,0),this.opened=l}static builder(){return new vg(!0)}setOpened(l){return this.opened=l,this}getDivHeight(l){return l.lineWidth}calculateFor(l,a){this.setWidth(a.fontSize/4).setHeight(0).setSystem(!0)}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let m=p.fontSize/4*(p.fontSize/d),v=a+d-p.fontSize*(1-p.fontLineRelativeOffset),y=a+p.fontSize*(1-p.fontLineRelativeOffset),_=(y+v)/2,x=(v-y)/4,S=y+x,w=S+x,T=w+x;p.pathes.push(hs.builder().setRenderHandler((O,k)=>{let D=Vf();this.opened?(D.moveTo(m,y),D.bezierCurveTo(0,S,0,w,0,_),D.bezierCurveTo(0,w,0,T,m,v)):(D.moveTo(0,y),D.bezierCurveTo(m,S,m,w,m,_),D.bezierCurveTo(m,w,m,T,0,v)),O.append("path").attr("d",D).attr("stroke",p.colorMain).attr("stroke-width",k.strokeWidth).attr("fill","none").attr("transform",(M,A)=>f.transformToString(k.transform||[]))}).setStrokeColor(p.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(l+1,0))}}class RE extends Lr{constructor(l){super(0,0),this.childs=l}static builder(){return new RE([])}setChilds(l){return this.childs=l,this}getUpPartHeight(){let l=0;for(let a=0;a<this.childs.length;++a)if(!this.childs[a].system){l=this.childs[a].height;break}return l}calculateFor(l,a){this.childs.forEach(f=>f.calculateFor(l,a));let h=0,d=0;this.childs.forEach(f=>{d+=f.height,h=Math.max(h,f.width)}),this.setWidth(h).setHeight(d)}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let g=l,m=a;g+=0,m+=d>this.height?d-this.height:0,this.childs.forEach(_=>{let b=0==_.width?0:h>_.width?(h-_.width)/2:0;_.drawFor(g+b,m,_.width?_.width:h-b,_.height,f,p),m+=_.height})}}class FE extends Lr{constructor(l){super(0,0),this.underRootValue=l}static builder(){return new FE(Lr.builder())}setUnderRootValue(l){return this.underRootValue=l,this}getDivHeight(l){return 2*l.lineWidth}calculateFor(l,a){this.underRootValue.calculateFor(l,a),this.setWidth(a.fontSize/2+this.underRootValue.width).setHeight(this.underRootValue.height+2*this.getDivHeight(a))}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let g=p.fontSize/2,m=a+this.getDivHeight(p),v=a+d-p.fontSize*(1-p.fontLineRelativeOffset);p.lines.push(gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(l).setY1(m+d/2).setX2(l+g/3).setY2(m+d/2),gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(l+g/3).setY1(m+d/2).setX2(l+2*g/3).setY2(v),gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(l+2*g/3).setY1(v).setX2(l+g).setY2(m),gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(l+g).setY1(m).setX2(l+h).setY2(m));let y=this.getDivHeight(p);this.underRootValue.drawFor(l+g,m+y,h-g,d-2*y,f,p)}}class NE extends Lr{constructor(l,a){super(0,0),this.rootNumberValue=l,this.underRootValue=a}static builder(){return new NE(Lr.builder(),Lr.builder())}setUnderRootValue(l){return this.underRootValue=l,this}setNumberRootValue(l){return this.rootNumberValue=l,this}getDivHeight(l){return 2*l.lineWidth}getCenterDy(l){let a=this.getDivHeight(l),d=this.rootNumberValue.height;return this.underRootValue.height/2<d&&(a+=d),a}calculateFor(l,a){this.underRootValue.calculateFor(l,a),this.rootNumberValue.calculateFor(l,a);let h=a.fontSize/2,d=this.underRootValue.height,f=this.rootNumberValue.height,p=d/2,g=this.underRootValue.height+2*this.getDivHeight(a);if(d<=a.fontSize)g=d+f;else if(f>p){let m=a.fontSize+f+2*this.getDivHeight(a);g=g<m?m:g}this.setWidth(h+this.underRootValue.width+this.rootNumberValue.width).setHeight(g)}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let g=p.fontSize/2,m=a+this.getDivHeight(p),v=a+d-p.fontSize*(1-p.fontLineRelativeOffset),y=this.underRootValue.height,_=this.rootNumberValue.height,b=y/2,C=b<_?_:d/2;y<=p.fontSize?C=_:_>b&&(C=_+2*this.getDivHeight(p)),this.rootNumberValue.drawFor(l+g/3,m+C-this.rootNumberValue.height,this.rootNumberValue.width,this.rootNumberValue.height,f,p);let x=l+this.rootNumberValue.width;p.lines.push(gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(l).setY1(m+C).setX2(x+g/3).setY2(m+C),gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(x+g/3).setY1(m+C).setX2(x+2*g/3).setY2(v),gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(x+2*g/3).setY1(v).setX2(x+g).setY2(m),gi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(x+g).setY1(m).setX2(x+h-this.rootNumberValue.width).setY2(m)),this.underRootValue.drawFor(l+g+this.rootNumberValue.width,v-this.underRootValue.height,h-g-this.rootNumberValue.width,this.underRootValue.height,f,p)}}class uS extends Lr{constructor(l){super(0,0),this.underRootValue=l}static builder(){return new uS(Lr.builder())}setUnderRootValue(l){return this.underRootValue=l,this}getDivHeight(l){return l.lineWidth}calculateFor(l,a){this.underRootValue.calculateFor(l,a);let h=a.fontSize/2;this.setWidth(h/2+h+this.underRootValue.width).setHeight(this.underRootValue.height+this.getDivHeight(a))}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let g=p.fontSize/2,m=g/2,v=g/2,y=a+d-p.fontSize*(1-p.fontLineRelativeOffset),_=a+p.fontSize*(1-p.fontLineRelativeOffset);p.pathes.push(hs.builder().setRenderHandler((b,C)=>{let x=Vf();x.moveTo(0,y-v),x.bezierCurveTo(0,y,v,y,v,y-v),x.lineTo(v,_+v),x.bezierCurveTo(v,_,g,_,g,_+v),b.append("path").attr("d",x).attr("stroke",p.colorMain).attr("stroke-width",C.strokeWidth).attr("fill","none").attr("transform",(S,w)=>f.transformToString(C.transform||[]))}).setStrokeColor(p.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(l+1,0)),this.underRootValue.drawFor(l+g+m,a+this.getDivHeight(p),h-g,d,f,p)}}class LE extends Lr{constructor(l,a){super(0,0),this.power=l,this.value=a}static builder(){return new LE(Lr.builder(),Lr.builder())}setValue(l){return this.value=l,this}setPower(l){return this.power=l,this}calculateFor(l,a){this.value.calculateFor(l,a),this.power.calculateFor(l,a);let g=this.value.height+this.power.height-a.fontSize/4*3;this.setWidth(0*a.fontSize/4+this.value.width+this.power.width).setHeight(g)}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let m=0*p.fontSize/4;this.value.drawFor(l,a+(this.power.height-p.fontSize/4*3),this.value.width,this.value.height,f,p),this.power.drawFor(l+this.value.width+m,a,this.power.width,this.power.height,f,p)}getCenterDy(l){return this.power.height-l.fontSize/4*3+this.value.height/2}}class BE extends Lr{constructor(l,a,h){super(0,0),this.diffOp=l,this.byVar=a,this.value=h}static builder(){return new BE(Lr.builder(),Lr.builder(),Lr.builder())}setValue(l){return this.value=l,this}setDiffOp(l){return this.diffOp=l,this}setByVar(l){return this.byVar=l,this}calculateFor(l,a){this.value.calculateFor(l,a),this.byVar.calculateFor(l,a),this.diffOp.calculateFor(l,a);let p=this.value.height+this.byVar.height/2+this.diffOp.height/2;this.setWidth(this.value.width+Math.max(this.diffOp.width,this.byVar.width)).setHeight(p)}drawFor(l,a,h,d,f,p){super.drawFor(l,a,h,d,f,p);let y=this.byVar.height;this.value.drawFor(l,a+this.diffOp.height/2,this.value.width,this.value.height,f,p),this.diffOp.drawFor(l+this.value.width,a,this.diffOp.width,this.diffOp.height,f,p),this.byVar.drawFor(l+this.value.width,a+d-y,this.byVar.width,this.byVar.height,f,p)}getCenterDy(l){let d=this.diffOp.height,f=nhe.getCurCenterDy(this.value,l);return f=f||this.value.height/2,f+d/2}}class nhe{static getCurCenterDy(l,a){let h=0;return l instanceof RE?h=l.getUpPartHeight():l instanceof Su?h=l.centerDy:l instanceof uS||l instanceof FE?h=this.getCurCenterDy(l.underRootValue,a):(l instanceof NE||l instanceof LE||l instanceof BE)&&(h=l.getCenterDy(a)),h}}class SKe{constructor(l=3){this.divHight=l}convert(l){switch(l.getType()){case Ac.Id:return this.getId(l);case Ac.Number:return this.getNumber(l);case Ac.Function:return this.getFunction(l);case Ac.UnaryOp:return this.getUnary(l);case Ac.BinaryOp:return this.getBinary(l);default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f: ${l.getType()}`)}}getId(l){return ql.builder().setText(l.name)}getNumber(l){return ql.builder().setText(""+l.value)}getUnary(l){return"()"==l.name?Su.builder().setChilds([vg.builder().setOpened(!0),this.convertValueOrNull(l.value),vg.builder().setOpened(!1)]):Su.builder().setChilds([ql.builder().setText(l.name),this.convertValueOrNull(l.value)])}getBinary(l){return"/"==l.name?RE.builder().setChilds([this.convertValueOrNull(l.left),Lr.builder().setOverline(!0).setSystem(!0).setHeight(this.divHight),this.convertValueOrNull(l.right)]):"*"==l.name||"+"==l.name||"-"==l.name||"="==l.name?Su.builder().setChilds([this.convertValueOrNull(l.left),Lr.builder().setSpace(!0),ql.builder().setText(l.name),Lr.builder().setSpace(!0),this.convertValueOrNull(l.right)]):Su.builder().setChilds([this.convertValueOrNull(l.left),ql.builder().setText(l.name),this.convertValueOrNull(l.right)])}convertValueOrNull(l){return l?this.convert(l):ql.builder().setText("null")}getFunction(l){return"pow"==l.name&&2==l.params.length?LE.builder().setValue(this.convertValueOrNull(l.params[0])).setPower(this.convertValueOrNull(l.params[1])):"sqrt"==l.name&&1==l.params.length?FE.builder().setUnderRootValue(this.convertValueOrNull(l.params[0])):"root"==l.name&&2==l.params.length?NE.builder().setUnderRootValue(this.convertValueOrNull(l.params[0])).setNumberRootValue(this.convertValueOrNull(l.params[1])):"diff"==l.name&&2==l.params.length?BE.builder().setValue(Su.builder().setChilds([vg.builder().setOpened(!0),this.convertValueOrNull(l.params[0]),vg.builder().setOpened(!1)])).setByVar(this.convertValueOrNull(l.params[1])).setDiffOp(ql.builder().setText("'")):"integral"==l.name&&2==l.params.length||"integrate"==l.name&&3==l.params.length?uS.builder().setUnderRootValue(Su.builder().setChilds([this.convertValueOrNull(l.params[0]),Lr.builder().setSpace(!0),Lr.builder().setSpace(!0),ql.builder().setText("d"),Lr.builder().setSpace(!0),this.convertValueOrNull(l.params[1])])):Su.builder().setChilds([ql.builder().setText(l.name),vg.builder().setOpened(!0),Su.builder().setChilds(l.params.flatMap((a,h)=>h>0?[ql.builder().setText(","),this.convertValueOrNull(a)]:[this.convertValueOrNull(a)])),vg.builder().setOpened(!1)])}}class VE extends yl{getFormula(l){let a=l.getParam("\u0442\u0435\u043a\u0441\u0442"),h=null;try{let f=(new PE).parse(a),p=new SKe,g=f[f.length-1];g.value&&(h=p.convert(g.value))}catch(d){h=ql.builder().setText("\u041e\u0448\u0438\u0431\u043a\u0430: "+a)}return h}constructor(l="\u041f\u0440\u0438\u043c\u0435\u0440 \u0444\u043e\u0440\u043c\u0443\u043b.",a=512,h=512){super(l,a,h)}generate(l,a,h){let d=this.getFormula(a);return d.calculateFor(l,a),this.width=a.width=d.width,this.height=a.height=d.height,a.colorBackground&&a.rects.push(l.createBackground(a)),d.drawFor(0,0,d.width,d.height,l,a),!0}}class vh{constructor(l,a,h){this._id=l,this.key=a,this.value=h}static create(l){return l?new vh(l._id,l.key,l.value):new vh(-1,"","")}static of(l,a){return new vh(0,l,a)}}class yg{constructor(l,a,h){this.success=l,this.error=a,this.item=h}static create(l){return new yg(l.success,l.error,vh.create(l.item))}}let go=(()=>{class c{constructor(a,h){this.config=a,this.localstorageSvc=h,this.autoThemeKey="autotheme",this.themeKey="theme"}themeName(a=!0){return this.config.baseHref+(a?"/index.html":"/index.night.html")}nowIsNight(){return thisIsNightTheme}nowIsDay(){return!thisIsNightTheme}isLight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!0)}isNight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!1)}isAutoTheme(){return"true"==this.localstorageSvc.getStorage(this.autoThemeKey)}onToggleAutoTheme(){let a=this.isLight(),h=this.isNight();if(a||h||!a&&!h){this.localstorageSvc.setStorage(this.autoThemeKey,""+!0);let d=this.themeName(a);window.location.href=d}}switchToLight(){let a=this.themeName(!0);(this.localstorageSvc.getStorage(this.themeKey)!=a||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!0)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=a)}switchToNight(){let a=this.themeName(!1);(this.localstorageSvc.getStorage(this.themeKey)!=a||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!1)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=a)}applyTheme(){let a=window.ThemeHandler;if(a)try{let h=thisIsNightTheme?"night":"day";a.setTheme(h)}catch(h){}}printWindow(a){let h=!1,d=window.ThemeHandler;if(d)try{d.printWindow(a),h=!0}catch(f){}return h}getAudioRootFolder(){let a=window.ThemeHandler,h="./";if(a)try{h=a.getAudioRootFolder()}catch(d){}return h}}return c.\u0275fac=function(a){return new(a||c)(Ae(on),Ae(NN))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class Hi{static handleError(l,a){let h="";return h=l.error instanceof ErrorEvent?`Message: ${l.error.message}`:`Code: ${l.status}; Message: ${l.message}`,Ty(()=>"Something bad happened; please try again later. Error: "+h)}static callOnDone(l,a){null==a?l&&l(null):l&&("string"==typeof a||ArrayBuffer,l(a))}}class Ar{static merge(l,a){if(!l&&!a)return"";if(!l)return a;if(!a)return l;let h=l.endsWith("/"),d=a.startsWith("/"),f=l;return h!=d?f+=a:h?f+=d?a.substring(1):a:f?f+="/"+a:f=a,f}}class ihe{}class rhe{}class qf{constructor(l){this.normalizedNames=new Map,this.lazyUpdate=null,l?this.lazyInit="string"==typeof l?()=>{this.headers=new Map,l.split("\n").forEach(a=>{const h=a.indexOf(":");if(h>0){const d=a.slice(0,h),f=d.toLowerCase(),p=a.slice(h+1).trim();this.maybeSetNormalizedName(d,f),this.headers.has(f)?this.headers.get(f).push(p):this.headers.set(f,[p])}})}:()=>{this.headers=new Map,Object.keys(l).forEach(a=>{let h=l[a];const d=a.toLowerCase();"string"==typeof h&&(h=[h]),h.length>0&&(this.headers.set(d,h),this.maybeSetNormalizedName(a,d))})}:this.headers=new Map}has(l){return this.init(),this.headers.has(l.toLowerCase())}get(l){this.init();const a=this.headers.get(l.toLowerCase());return a&&a.length>0?a[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(l){return this.init(),this.headers.get(l.toLowerCase())||null}append(l,a){return this.clone({name:l,value:a,op:"a"})}set(l,a){return this.clone({name:l,value:a,op:"s"})}delete(l,a){return this.clone({name:l,value:a,op:"d"})}maybeSetNormalizedName(l,a){this.normalizedNames.has(a)||this.normalizedNames.set(a,l)}init(){this.lazyInit&&(this.lazyInit instanceof qf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(l=>this.applyUpdate(l)),this.lazyUpdate=null))}copyFrom(l){l.init(),Array.from(l.headers.keys()).forEach(a=>{this.headers.set(a,l.headers.get(a)),this.normalizedNames.set(a,l.normalizedNames.get(a))})}clone(l){const a=new qf;return a.lazyInit=this.lazyInit&&this.lazyInit instanceof qf?this.lazyInit:this,a.lazyUpdate=(this.lazyUpdate||[]).concat([l]),a}applyUpdate(l){const a=l.name.toLowerCase();switch(l.op){case"a":case"s":let h=l.value;if("string"==typeof h&&(h=[h]),0===h.length)return;this.maybeSetNormalizedName(l.name,a);const d=("a"===l.op?this.headers.get(a):void 0)||[];d.push(...h),this.headers.set(a,d);break;case"d":const f=l.value;if(f){let p=this.headers.get(a);if(!p)return;p=p.filter(g=>-1===f.indexOf(g)),0===p.length?(this.headers.delete(a),this.normalizedNames.delete(a)):this.headers.set(a,p)}else this.headers.delete(a),this.normalizedNames.delete(a)}}forEach(l){this.init(),Array.from(this.normalizedNames.keys()).forEach(a=>l(this.normalizedNames.get(a),this.headers.get(a)))}}class TKe{encodeKey(l){return she(l)}encodeValue(l){return she(l)}decodeKey(l){return decodeURIComponent(l)}decodeValue(l){return decodeURIComponent(l)}}const DKe=/%(\d[a-f0-9])/gi,kKe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function she(c){return encodeURIComponent(c).replace(DKe,(l,a)=>{var h;return null!==(h=kKe[a])&&void 0!==h?h:l})}function zE(c){return`${c}`}class Zf{constructor(l={}){if(this.updates=null,this.cloneFrom=null,this.encoder=l.encoder||new TKe,l.fromString){if(l.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function OKe(c,l){const a=new Map;return c.length>0&&c.replace(/^\?/,"").split("&").forEach(d=>{const f=d.indexOf("="),[p,g]=-1==f?[l.decodeKey(d),""]:[l.decodeKey(d.slice(0,f)),l.decodeValue(d.slice(f+1))],m=a.get(p)||[];m.push(g),a.set(p,m)}),a}(l.fromString,this.encoder)}else l.fromObject?(this.map=new Map,Object.keys(l.fromObject).forEach(a=>{const h=l.fromObject[a],d=Array.isArray(h)?h.map(zE):[zE(h)];this.map.set(a,d)})):this.map=null}has(l){return this.init(),this.map.has(l)}get(l){this.init();const a=this.map.get(l);return a?a[0]:null}getAll(l){return this.init(),this.map.get(l)||null}keys(){return this.init(),Array.from(this.map.keys())}append(l,a){return this.clone({param:l,value:a,op:"a"})}appendAll(l){const a=[];return Object.keys(l).forEach(h=>{const d=l[h];Array.isArray(d)?d.forEach(f=>{a.push({param:h,value:f,op:"a"})}):a.push({param:h,value:d,op:"a"})}),this.clone(a)}set(l,a){return this.clone({param:l,value:a,op:"s"})}delete(l,a){return this.clone({param:l,value:a,op:"d"})}toString(){return this.init(),this.keys().map(l=>{const a=this.encoder.encodeKey(l);return this.map.get(l).map(h=>a+"="+this.encoder.encodeValue(h)).join("&")}).filter(l=>""!==l).join("&")}clone(l){const a=new Zf({encoder:this.encoder});return a.cloneFrom=this.cloneFrom||this,a.updates=(this.updates||[]).concat(l),a}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(l=>this.map.set(l,this.cloneFrom.map.get(l))),this.updates.forEach(l=>{switch(l.op){case"a":case"s":const a=("a"===l.op?this.map.get(l.param):void 0)||[];a.push(zE(l.value)),this.map.set(l.param,a);break;case"d":if(void 0===l.value){this.map.delete(l.param);break}{let h=this.map.get(l.param)||[];const d=h.indexOf(zE(l.value));-1!==d&&h.splice(d,1),h.length>0?this.map.set(l.param,h):this.map.delete(l.param)}}}),this.cloneFrom=this.updates=null)}}class MKe{constructor(){this.map=new Map}set(l,a){return this.map.set(l,a),this}get(l){return this.map.has(l)||this.map.set(l,l.defaultValue()),this.map.get(l)}delete(l){return this.map.delete(l),this}has(l){return this.map.has(l)}keys(){return this.map.keys()}}function ohe(c){return"undefined"!=typeof ArrayBuffer&&c instanceof ArrayBuffer}function ahe(c){return"undefined"!=typeof Blob&&c instanceof Blob}function lhe(c){return"undefined"!=typeof FormData&&c instanceof FormData}class hS{constructor(l,a,h,d){let f;if(this.url=a,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=l.toUpperCase(),function EKe(c){switch(c){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==h?h:null,f=d):f=h,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new qf),this.context||(this.context=new MKe),this.params){const p=this.params.toString();if(0===p.length)this.urlWithParams=a;else{const g=a.indexOf("?");this.urlWithParams=a+(-1===g?"?":g<a.length-1?"&":"")+p}}else this.params=new Zf,this.urlWithParams=a}serializeBody(){return null===this.body?null:ohe(this.body)||ahe(this.body)||lhe(this.body)||function AKe(c){return"undefined"!=typeof URLSearchParams&&c instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Zf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lhe(this.body)?null:ahe(this.body)?this.body.type||null:ohe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Zf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(l={}){var a;const h=l.method||this.method,d=l.url||this.url,f=l.responseType||this.responseType,p=void 0!==l.body?l.body:this.body,g=void 0!==l.withCredentials?l.withCredentials:this.withCredentials,m=void 0!==l.reportProgress?l.reportProgress:this.reportProgress;let v=l.headers||this.headers,y=l.params||this.params;const _=null!==(a=l.context)&&void 0!==a?a:this.context;return void 0!==l.setHeaders&&(v=Object.keys(l.setHeaders).reduce((b,C)=>b.set(C,l.setHeaders[C]),v)),l.setParams&&(y=Object.keys(l.setParams).reduce((b,C)=>b.set(C,l.setParams[C]),y)),new hS(h,d,p,{params:y,headers:v,context:_,reportProgress:m,responseType:f,withCredentials:g})}}var mo=(()=>((mo=mo||{})[mo.Sent=0]="Sent",mo[mo.UploadProgress=1]="UploadProgress",mo[mo.ResponseHeader=2]="ResponseHeader",mo[mo.DownloadProgress=3]="DownloadProgress",mo[mo.Response=4]="Response",mo[mo.User=5]="User",mo))();class Y6{constructor(l,a=200,h="OK"){this.headers=l.headers||new qf,this.status=void 0!==l.status?l.status:a,this.statusText=l.statusText||h,this.url=l.url||null,this.ok=this.status>=200&&this.status<300}}class K6 extends Y6{constructor(l={}){super(l),this.type=mo.ResponseHeader}clone(l={}){return new K6({headers:l.headers||this.headers,status:void 0!==l.status?l.status:this.status,statusText:l.statusText||this.statusText,url:l.url||this.url||void 0})}}class UE extends Y6{constructor(l={}){super(l),this.type=mo.Response,this.body=void 0!==l.body?l.body:null}clone(l={}){return new UE({body:void 0!==l.body?l.body:this.body,headers:l.headers||this.headers,status:void 0!==l.status?l.status:this.status,statusText:l.statusText||this.statusText,url:l.url||this.url||void 0})}}class che extends Y6{constructor(l){super(l,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${l.url||"(unknown url)"}`:`Http failure response for ${l.url||"(unknown url)"}: ${l.status} ${l.statusText}`,this.error=l.error||null}}function J6(c,l){return{body:l,headers:c.headers,context:c.context,observe:c.observe,params:c.params,reportProgress:c.reportProgress,responseType:c.responseType,withCredentials:c.withCredentials}}let xd=(()=>{class c{constructor(a){this.handler=a}request(a,h,d={}){let f;if(a instanceof hS)f=a;else{let m,v;m=d.headers instanceof qf?d.headers:new qf(d.headers),d.params&&(v=d.params instanceof Zf?d.params:new Zf({fromObject:d.params})),f=new hS(a,h,void 0!==d.body?d.body:null,{headers:m,context:d.context,params:v,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const p=$n(f).pipe(Pp(m=>this.handler.handle(m)));if(a instanceof hS||"events"===d.observe)return p;const g=p.pipe(es(m=>m instanceof UE));switch(d.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return g.pipe(an(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return g.pipe(an(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return g.pipe(an(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return g.pipe(an(m=>m.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(a,h={}){return this.request("DELETE",a,h)}get(a,h={}){return this.request("GET",a,h)}head(a,h={}){return this.request("HEAD",a,h)}jsonp(a,h){return this.request("JSONP",a,{params:(new Zf).append(h,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(a,h={}){return this.request("OPTIONS",a,h)}patch(a,h,d={}){return this.request("PATCH",a,J6(d,h))}post(a,h,d={}){return this.request("POST",a,J6(d,h))}put(a,h,d={}){return this.request("PUT",a,J6(d,h))}}return c.\u0275fac=function(a){return new(a||c)(Ae(ihe))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class uhe{constructor(l,a){this.next=l,this.interceptor=a}handle(l){return this.interceptor.intercept(l,this.next)}}const ez=new Ln("HTTP_INTERCEPTORS");let IKe=(()=>{class c{intercept(a,h){return h.handle(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const PKe=/^\)\]\}',?\n/;let hhe=(()=>{class c{constructor(a){this.xhrFactory=a}handle(a){if("JSONP"===a.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new En(h=>{const d=this.xhrFactory.build();if(d.open(a.method,a.urlWithParams),a.withCredentials&&(d.withCredentials=!0),a.headers.forEach((C,x)=>d.setRequestHeader(C,x.join(","))),a.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!a.headers.has("Content-Type")){const C=a.detectContentTypeHeader();null!==C&&d.setRequestHeader("Content-Type",C)}if(a.responseType){const C=a.responseType.toLowerCase();d.responseType="json"!==C?C:"text"}const f=a.serializeBody();let p=null;const g=()=>{if(null!==p)return p;const C=d.statusText||"OK",x=new qf(d.getAllResponseHeaders()),S=function RKe(c){return"responseURL"in c&&c.responseURL?c.responseURL:/^X-Request-URL:/m.test(c.getAllResponseHeaders())?c.getResponseHeader("X-Request-URL"):null}(d)||a.url;return p=new K6({headers:x,status:d.status,statusText:C,url:S}),p},m=()=>{let{headers:C,status:x,statusText:S,url:w}=g(),T=null;204!==x&&(T=void 0===d.response?d.responseText:d.response),0===x&&(x=T?200:0);let O=x>=200&&x<300;if("json"===a.responseType&&"string"==typeof T){const k=T;T=T.replace(PKe,"");try{T=""!==T?JSON.parse(T):null}catch(D){T=k,O&&(O=!1,T={error:D,text:T})}}O?(h.next(new UE({body:T,headers:C,status:x,statusText:S,url:w||void 0})),h.complete()):h.error(new che({error:T,headers:C,status:x,statusText:S,url:w||void 0}))},v=C=>{const{url:x}=g(),S=new che({error:C,status:d.status||0,statusText:d.statusText||"Unknown Error",url:x||void 0});h.error(S)};let y=!1;const _=C=>{y||(h.next(g()),y=!0);let x={type:mo.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),"text"===a.responseType&&!!d.responseText&&(x.partialText=d.responseText),h.next(x)},b=C=>{let x={type:mo.UploadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),h.next(x)};return d.addEventListener("load",m),d.addEventListener("error",v),d.addEventListener("timeout",v),d.addEventListener("abort",v),a.reportProgress&&(d.addEventListener("progress",_),null!==f&&d.upload&&d.upload.addEventListener("progress",b)),d.send(f),h.next({type:mo.Sent}),()=>{d.removeEventListener("error",v),d.removeEventListener("abort",v),d.removeEventListener("load",m),d.removeEventListener("timeout",v),a.reportProgress&&(d.removeEventListener("progress",_),null!==f&&d.upload&&d.upload.removeEventListener("progress",b)),d.readyState!==d.DONE&&d.abort()}})}}return c.\u0275fac=function(a){return new(a||c)(Ae(mY))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const tz=new Ln("XSRF_COOKIE_NAME"),nz=new Ln("XSRF_HEADER_NAME");class dhe{}let FKe=(()=>{class c{constructor(a,h,d){this.doc=a,this.platform=h,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const a=this.doc.cookie||"";return a!==this.lastCookieString&&(this.parseCount++,this.lastToken=oY(a,this.cookieName),this.lastCookieString=a),this.lastToken}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr),Ae(_s),Ae(tz))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),iz=(()=>{class c{constructor(a,h){this.tokenService=a,this.headerName=h}intercept(a,h){const d=a.url.toLowerCase();if("GET"===a.method||"HEAD"===a.method||d.startsWith("http://")||d.startsWith("https://"))return h.handle(a);const f=this.tokenService.getToken();return null!==f&&!a.headers.has(this.headerName)&&(a=a.clone({headers:a.headers.set(this.headerName,f)})),h.handle(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(dhe),Ae(nz))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),NKe=(()=>{class c{constructor(a,h){this.backend=a,this.injector=h,this.chain=null}handle(a){if(null===this.chain){const h=this.injector.get(ez,[]);this.chain=h.reduceRight((d,f)=>new uhe(d,f),this.backend)}return this.chain.handle(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(rhe),Ae(Qr))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),LKe=(()=>{class c{static disable(){return{ngModule:c,providers:[{provide:iz,useClass:IKe}]}}static withOptions(a={}){return{ngModule:c,providers:[a.cookieName?{provide:tz,useValue:a.cookieName}:[],a.headerName?{provide:nz,useValue:a.headerName}:[]]}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({providers:[iz,{provide:ez,useExisting:iz,multi:!0},{provide:dhe,useClass:FKe},{provide:tz,useValue:"XSRF-TOKEN"},{provide:nz,useValue:"X-XSRF-TOKEN"}]}),c})(),BKe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({providers:[xd,{provide:ihe,useClass:NKe},hhe,{provide:rhe,useExisting:hhe}],imports:[LKe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),c})(),fhe=(()=>{class c{constructor(a,h){this.http=a,this.config=h,this.restPoint="/settings"}getRestPoint(a,h){return Ar.merge(Ar.merge(h||this.config.serviceAPIHost,this.restPoint),a)}handleError(a,h){return Hi.handleError(a,h)}findKey(a,h){const d={_id:0,key:a,value:""};this.http.post(this.getRestPoint("/find",null),d,{}).pipe(hr(this.handleError)).subscribe({next:p=>{Hi.callOnDone(h,yg.create(p))},error:p=>{Hi.callOnDone(h,null)}})}insertKey(a,h){this.http.post(this.getRestPoint("/insert",null),a,{}).pipe(hr(this.handleError)).subscribe({next:f=>{Hi.callOnDone(h,yg.create(f))},error:f=>{Hi.callOnDone(h,null)}})}updateKey(a,h){this.http.post(this.getRestPoint("/update",null),a,{}).pipe(hr(this.handleError)).subscribe({next:f=>{Hi.callOnDone(h,yg.create(f))},error:f=>{Hi.callOnDone(h,null)}})}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),phe=(()=>{class c{constructor(a){this.config=a,this.kvs=null,this.localStorageName="",this.localStorageName=a.serviceAPIHost+"KVSvc"}checkOrloadData(){if(this.kvs)return;const a=localStorage.getItem(this.localStorageName);if(a)try{this.kvs=JSON.parse(a)}catch(h){}this.kvs||(this.kvs={})}saveData(){const a=JSON.stringify(this.kvs);localStorage.setItem(this.localStorageName,a)}findKey(a,h){this.checkOrloadData();const d=this.kvs[a],f=null!=d;return this.config.post(()=>{Hi.callOnDone(h,new yg(f,f?null:"Not found",f?new vh(-1,a,d):null))}),d}insertKey(a,h){this.checkOrloadData(),this.kvs[a.key]=a.value,this.saveData(),this.config.post(()=>{Hi.callOnDone(h,new yg(!0,null,a))})}updateKey(a,h){this.checkOrloadData(),this.kvs[a.key]=a.value,this.saveData(),this.config.post(()=>{Hi.callOnDone(h,new yg(!0,null,a))})}}return c.\u0275fac=function(a){return new(a||c)(Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),rz=(()=>{class c{constructor(a,h,d){this.kvRest=a,this.kvMemory=h,this.config=d,this.kv=null,this.config.isMemoryServerType()&&(this.kv=this.kvMemory),(null==this.kv||this.config.isRestServerType())&&(this.kv=this.kvRest)}findKey(a,h){this.kv.findKey(a,h)}insertKey(a,h){this.kv.insertKey(a,h)}updateKey(a,h){this.kv.updateKey(a,h)}}return c.\u0275fac=function(a){return new(a||c)(Ae(fhe),Ae(phe),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class sz{constructor(l,a){this.name=l,this.value=a}equalsTo(l){return this.name==l.name&&this.value==l.value}static cloneFrom(l){return new sz(l.name,l.value)}}var Kt=(()=>(function(c){c[c.Number=0]="Number",c[c.String=1]="String",c[c.Boolean=2]="Boolean"}(Kt||(Kt={})),Kt))();class yn{constructor(l,a,h,d,f,p){this.name=l,this.description=a,this.type=h,this.cfg=d,this.saver=f,this.defaultValue=p}static uiTypeToString(l){return["Number","String","Boolean"][l]}static builder(){return new yn("","",Kt.String,()=>null,()=>{},null)}setName(l){return this.name=l,this}setDescription(l){return this.description=l,this}setType(l){return this.type=l,this}setDefaultValue(l){return this.defaultValue=l,this}setCfg(l){return this.cfg=l,this}setSaver(l){return this.saver=l,this}get stype(){return yn.uiTypeToString(this.type)}init(){let l=this.cfg();return null==l[this.name]&&(l[this.name]=this.defaultValue),this}getStringValue(){if(this.type!==Kt.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyStringValue(l=null,a=""){let h=null==l?this.cfg():l;if(this.type!==Kt.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let d=h[this.name];return("string"!=typeof d||null==d)&&(d=null==a?null==this.defaultValue?"":this.defaultValue:a),d}getNumberValue(){if(this.type!==Kt.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyNumberValue(l=null,a=0){let h=null==l?this.cfg():l;if(this.type!==Kt.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let d=h[this.name];return("number"!=typeof d||null==d)&&(d=null==a?null==this.defaultValue?0:this.defaultValue:a),d}getBooleanValue(){if(this.type!==Kt.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyBooleanValue(l=null,a=0){let h=null==l?this.cfg():l;if(this.type!==Kt.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let d=h[this.name];return("boolean"!=typeof d||null==d)&&(d=null==a?null!=this.defaultValue&&this.defaultValue:a),d}getAndVerifyValue(l=null,a=null){let h=null;switch(this.type){case Kt.String:h=this.getAndVerifyStringValue(l,a);break;case Kt.Number:h=this.getAndVerifyNumberValue(l,a);break;case Kt.Boolean:h=this.getAndVerifyBooleanValue(l,a);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u044b\u043d\u0439 \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${this.stype}.`)}return h}setStringValue(l){if(this.type!==Kt.String)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=l,this.save()}setNumberValue(l){if(this.type!==Kt.Number)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=l,this.save()}setBooleanValue(l){if(this.type!==Kt.Boolean)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=l,this.save()}setValue(l,a=null){return(null==a?this.cfg():a)[this.name]=l,null==a&&this.save(),this}get rawValue(){let l=this.cfg()[this.name];return null==l&&(this.cfg()[this.name]=this.defaultValue,l=this.cfg()[this.name]),l}set rawValue(l){this.cfg()[this.name]=l,this.save()}save(){this.saver&&this.saver()}}class VKe{constructor(){this.lastLoginApp=yn.builder().setType(Kt.String).setDescription("\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435").setDefaultValue(""),this.defaultAppRoute=yn.builder().setType(Kt.String).setDescription("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e").setDefaultValue(""),this.stopServiceFlag=yn.builder().setType(Kt.Boolean).setDescription("\u0412\u044b\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441").setDefaultValue(!0),this.autoDownloadAudioFiles=yn.builder().setType(Kt.Boolean).setDescription("\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0443\u0434\u0438\u043e").setDefaultValue(!1),this.parallel=yn.builder().setType(Kt.Boolean).setDescription("\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u043a\u0430\u0437").setDefaultValue(!0),this.fineText=yn.builder().setType(Kt.Boolean).setDescription("\u0420\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442").setDefaultValue(!0),this.lineBreaks=yn.builder().setType(Kt.Boolean).setDescription("\u0420\u0430\u0437\u0440\u044b\u0432\u044b \u0441\u0442\u0440\u043e\u043a").setDefaultValue(!0),this.coloredTranslations=yn.builder().setType(Kt.Boolean).setDescription("\u0426\u0432\u0435\u0442\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u043e\u0432").setDefaultValue(!0),this.fontSize=yn.builder().setType(Kt.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430").setDefaultValue("0"),this.visitedBooksHelp=yn.builder().setType(Kt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043d\u0438\u0433").setDefaultValue(""),this.visitedMemorialHelp=yn.builder().setType(Kt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430").setDefaultValue(""),this.visitedCalculatorHelp=yn.builder().setType(Kt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue(""),this.visitedCalendarHelp=yn.builder().setType(Kt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044f").setDefaultValue(""),this.visitedCompilerHelp=yn.builder().setType(Kt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue(""),this.visitedSchedulerHelp=yn.builder().setType(Kt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.currentBook=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.currentBookName=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0438\u043c\u044f \u043a\u043d\u0438\u0433\u0438").setDefaultValue(""),this.currentBookLink=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043a\u043d\u0438\u0433\u0438").setDefaultValue(""),this.currentChapter=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.currentLanguages=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u044f\u0437\u044b\u043a\u0438").setDefaultValue(""),this.bookmarks=yn.builder().setType(Kt.String).setDescription("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setDefaultValue(""),this.currentMemorial=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setDefaultValue(""),this.currentMemorialPage=yn.builder().setType(Kt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430").setDefaultValue(1),this.currentMemorialPsalom=yn.builder().setType(Kt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(0),this.memorialChapterRequested=yn.builder().setType(Kt.Number).setDescription("\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(-1),this.memorialPageSize=yn.builder().setType(Kt.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b").setDefaultValue("30"),this.sortPersonsPriests=yn.builder().setType(Kt.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0438\u043f\u044b \u0438\u043c\u0451\u043d").setDefaultValue(!1),this.sortPersonsNames=yn.builder().setType(Kt.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u0430").setDefaultValue(!1),this.memorialVerticalView=yn.builder().setType(Kt.Boolean).setDescription("\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0438\u0434").setDefaultValue(!1),this.mergeNameOnImport=yn.builder().setType(Kt.Boolean).setDescription("\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u043c\u0435\u043d\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435").setDefaultValue(!1),this.showMolitvy=yn.builder().setType(Kt.Boolean).setDescription("\u041f\u043e\u043a\u0430\u0437 \u043c\u043e\u043b\u0438\u0442\u0432").setDefaultValue(!0),this.addCommentToName=yn.builder().setType(Kt.Boolean).setDescription("\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0432 \u0438\u043c\u044f").setDefaultValue(!0),this.currentOffset=yn.builder().setType(Kt.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435").setDefaultValue(0),this.currentPersonOffset=yn.builder().setType(Kt.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u044b").setDefaultValue(1),this.memorialBook=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.memorialChapter=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.memorialLine=yn.builder().setType(Kt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.memorialsTitleRemark=yn.builder().setType(Kt.String).setDescription("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043f\u0438\u0441\u043e\u043a").setDefaultValue(""),this.memorialSlava1Zdrav=yn.builder().setType(Kt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava2Zdrav=yn.builder().setType(Kt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava3Zdrav=yn.builder().setType(Kt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava1Upok=yn.builder().setType(Kt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialSlava2Upok=yn.builder().setType(Kt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialSlava3Upok=yn.builder().setType(Kt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialPsaltir=yn.builder().setType(Kt.Boolean).setDescription("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setDefaultValue(!0),this.showFacePage=yn.builder().setType(Kt.Boolean).setDescription("\u041e\u0431\u043b\u043e\u0436\u043a\u0430").setDefaultValue(!1),this.memorialPrintAllBook=yn.builder().setType(Kt.Boolean).setDescription("\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0432\u0441\u044e \u043a\u043d\u0438\u0433\u0443").setDefaultValue(!1),this.audioValue=yn.builder().setType(Kt.String).setDescription("\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435").setDefaultValue("1"),this.calculatorBook=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.calculatorChapter=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.calculatorLine=yn.builder().setType(Kt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.calculatorFormulaText=yn.builder().setType(Kt.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue(""),this.calendarBook=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.calendarChapter=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.calendarLine=yn.builder().setType(Kt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.calendarText=yn.builder().setType(Kt.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue(""),this.compilerBook=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.compilerChapter=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.compilerLine=yn.builder().setType(Kt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.compilerSourceText=yn.builder().setType(Kt.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue(""),this.schedulerBook=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.schedulerChapter=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.schedulerLine=yn.builder().setType(Kt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.schedulerSourceText=yn.builder().setType(Kt.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue(""),this.calendarCurrentDate=yn.builder().setType(Kt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0434\u0430\u0442\u0430").setDefaultValue(""),this.schedulerCurrentSettingsName=yn.builder().setType(Kt.String).setDescription("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerText=yn.builder().setType(Kt.String).setDescription("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setDefaultValue(""),this.schedulerAllVariants=yn.builder().setType(Kt.String).setDescription("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerServices=yn.builder().setType(Kt.String).setDescription("\u0421\u043b\u0443\u0436\u0431\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerClerics=yn.builder().setType(Kt.String).setDescription("\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue("")}}class zKe{constructor(l){this.onChange=l,this.saveCfg={},this.metaCfg=new VKe,this.values=new Map,this.setup()}get ui(){return this.metaCfg}cloneSaveCfg(l){let a={};return this.values.forEach((h,d,f)=>{h.setValue(h.getAndVerifyValue(l,null),a)}),a}add(l){return this.values.set(l.name,l.setCfg(()=>this.saveCfg).setSaver(()=>this.save())),l.init(),this}setup(){for(let l in this.metaCfg)this.add(this.metaCfg[l].setName(l))}getByName(l){return this.values.get(l)}forceSave(){this.save()}save(){this.onChange&&this.onChange(JSON.stringify(this.saveCfg))}get readonly(){return!!pageRequestedReadonly}load(l){try{const a=JSON.parse(l);this.saveCfg=this.cloneSaveCfg(a)}catch(a){}}toString(){return JSON.stringify(this.saveCfg)}}class N0{constructor(l,a){this.enabled=l,this.onChange=a}static builder(){return new N0(!1,l=>l)}setEnabled(l,a=!0){return this.enabled=l,a&&this.onChange(this),this}setOnChange(l){return this.onChange=l,this}}class HE{constructor(l){this.settings=l}static builder(){return new HE([])}add(l){return this.settings.push(l.setOnChange(a=>this.resetOther(a))),this}resetOther(l){!l.enabled||this.settings.forEach(a=>{a!==l&&a.setEnabled(!1,!1)})}}class ns{constructor(l){this.uiValue=l,this.oldRawValue=null}static builder(){return new ns(null)}setUIValue(l){return this.uiValue=l,this}resetDetector(){return this.oldRawValue=null,this}checkAndUpdate(l=null){var a,h;let d=this.oldRawValue!==(null!=l?l:null===(a=this.uiValue)||void 0===a?void 0:a.rawValue);return this.oldRawValue=null!=l?l:null===(h=this.uiValue)||void 0===h?void 0:h.rawValue,d}}let ti=(()=>{class c{constructor(a,h,d){this.themesService=a,this.kv=h,this.config=d,this.key="uiConfig20",this.keyKafizma="kafizmyOffset",this.keyBooks="booksLink",this.ready=!1,this.pui=new zKe(f=>{this.save(f)}),this.appRoutesId=0,this.appRoutes=null,this.mainContainerEnabled=!1,this.appParams=new Map,this.check()}getAppParam(a,h={}){return this.appParams.has(a)||this.appParams.set(a,h),this.appParams.get(a)}enableMainContainer(a){return this.mainContainerEnabled=a,this}setAppRoutes(a){let h=this.appRoutes;this.appRoutes=a;let d=++this.appRoutesId,f=this;return{unsubscribe(){d==f.appRoutesId&&(f.appRoutes=h)}}}get ui(){return this.pui.ui}get readonly(){return this.pui.readonly}check(a,h=!1){!this.ready||h?this.kv.findKey(this.key,d=>{d&&d.success&&this.pui.load(d.item.value),this.ready=!0,this.applyServiceFlag(),a&&a()}):a&&a()}applyServiceFlag(){let a=window.ThemeHandler;if(a)try{a.requestStopServiceOnExitFlag&&a.requestStopServiceOnExitFlag(this.ui.stopServiceFlag.getBooleanValue())}catch(h){}}downloadAudioFile(a,h){let d=window.ThemeHandler;if(d)try{if(this.ui.autoDownloadAudioFiles.getBooleanValue()&&d.downloadAudioFile)return d.downloadAudioFile(a,h)}catch(f){}return""}getAudioTranslations(){let a=window.ThemeHandler;if(a)try{if(a.getAudioTranslations){let h=a.getAudioTranslations(),d=JSON.parse(h),f=[];for(let p=0;p<d.length;++p)f.push(sz.cloneFrom(d[p]));return f}}catch(h){}return[]}deleteAudioTranslation(a){let h=window.ThemeHandler;if(h)try{h.deleteAudioTranslation&&h.deleteAudioTranslation(a)}catch(d){}return""}setUIReady(){let a=window.UIHandler;if(a)try{a.onUIReady&&a.onUIReady(!0)}catch(h){}}save(a){if(this.readonly)return;const h=a||this.ui.toString(),d=vh.of(this.key,h),f=v=>{};this.kv.findKey(this.key,v=>{v&&v.success?(d._id=v.item._id,this.kv.updateKey(d,f)):this.kv.insertKey(d,f),this.applyServiceFlag()});let g=()=>{if("books"!=this.config.getApplication().id)return;let v=this.ui.currentBookName.getStringValue(),y=this.ui.currentBookLink.getStringValue();if(!v)return;const b=vh.of(this.keyBooks,JSON.stringify({link:y,name:v}));this.kv.findKey(this.keyBooks,C=>{C&&C.success&&C.item?(b._id=C.item._id,this.kv.updateKey(b,x=>{})):this.kv.insertKey(b,x=>{})})},m=()=>{if("memorial"!=this.config.getApplication().id)return;let v=this.ui.currentOffset.getNumberValue();v<0&&(v=this.ui.currentPersonOffset.getNumberValue());let y={offset:17,personOffset:v,theme:this.themesService.isAutoTheme()?0:this.themesService.isLight()?1:-1};const _=vh.of(this.keyKafizma,JSON.stringify(y));this.kv.findKey(this.keyKafizma,b=>{b&&b.success&&b.item?(_._id=b.item._id,this.kv.updateKey(_,C=>{this.config.post(g,1)})):this.kv.insertKey(_,C=>{this.config.post(g,1)})})};switch(this.config.getApplication().id){case"books":g();break;case"memorial":m();break;case"d3examples":case"d3Dexamples":case"calculator":case"calendar":case"compiler":case"scheduler":case"about":break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f: ${this.config.getApplication().id}.`)}}static getKafizmNumberBy(a,h){if(h<0)return 0;const d=new Date,f=d.getTime()-6e4*d.getTimezoneOffset(),p=Math.floor(f/1e3),g=Math.floor(p/60),m=Math.floor(g/60);return(Math.floor(m/24)%20+a+h)%20+1}static getOffsetByKafizmNumber(a,h){if(h<=0)return-1;const d=new Date,f=d.getTime()-6e4*d.getTimezoneOffset(),p=Math.floor(f/1e3),g=Math.floor(p/60),m=Math.floor(g/60);let _=(Math.floor(m/24)%20+a+0)%20+1;return h>=_?h-_:h-_+20}}return c.\u0275fac=function(a){return new(a||c)(Ae(go),Ae(rz),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class $E{static dtr(l,a){for(var h=a>=0?a:47,d=new ArrayBuffer(l.length-1),f=new Uint8Array(d),p=h,g=0;g<l.length;++g){var v=255&(l[g]^p);g>0&&(f[g-1]=v),p=255&(p+v^5)}return f}static fromByteArray(l){let a="";for(let h=0;h<l.length;h+=2)a+=String.fromCharCode(l[h+1]<<8|l[h]);return a}}let wd=(()=>{class c{constructor(a,h){this.http=a,this.config=h,this.relativeCacheService=!0,this.cache=new Map,this.cacheTextWaiting=new Map,this.cacheZip=null,this.loaded=!1,this.loading=!1,this.failOnCacheMiss=!1,this.requests=[],this.cache=h.cache,this.loaded=0!==this.cache.size}get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":"/static"}getRestPoint(a,h,d=null){const f=this.relativeCacheService||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return Ar.merge(Ar.merge(h||f,null!=d?d:this.restPoint),a)}getLinkTo(a,h){const d=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return(h||d)+a}handleError(a,h){return Hi.handleError(a,h)}getText(a,h){this.loaded?this.getTextDirect(a,h):this.loading?this.requests.push(()=>{this.getTextDirect(a,h)}):this.startLoadingStatic(a,!0,h)}getBinary(a,h){this.loaded?this.zipLoadOrReturnFalse(a,!1,h)||this.getBlobRestcall(a,h):this.loading?this.requests.push(()=>{this.zipLoadOrReturnFalse(a,!1,h)}):this.startLoadingStatic(a,!1,h)}startLoadingStatic(a,h,d){this.loading=!0,this.getBlobRestcall("/static.zip",f=>{let p=()=>{this.loaded=!0,this.loading=!1,h?this.getTextDirect(a,d):this.zipLoadOrReturnFalse(a,h,d),this.requests.forEach(g=>{g()}),this.requests=[]};if(f){this.failOnCacheMiss=!0;let g=new Blob([new Uint8Array(f,0,f.byteLength)]);this.onLoadZipFile(g,p,()=>{this.cacheZip=null,this.failOnCacheMiss=!1,p()})}else this.failOnCacheMiss=!1,p()})}zipLoadOrReturnFalse(a,h,d){if(!this.cacheZip)return!1;let f=!1,p=a.startsWith("/")?a.substr(1):a,g=this.cacheZip.file(p);return g&&(f=!0,g.async(h?"string":"arraybuffer").then(m=>{Hi.callOnDone(d,m)}).catch(()=>{Hi.callOnDone(d,null)})),f}getTextDirect(a,h){if(!this.zipLoadOrReturnFalse(a,!0,h))if(this.cache.has(a)){const d=this.cache.get(a);setTimeout(()=>{Hi.callOnDone(h,d)},0)}else this.failOnCacheMiss?Hi.callOnDone(h,null):this.getTextRestcall(a,h)}getTextRestcall(a,h){let d=this.getRestPoint(a,null);return this.getTextRestcallUrl(d,h)}completeTextOnDone(a,h){let d=this.cacheTextWaiting.get(a);d&&(d.forEach(f=>{this.config.post(()=>{f&&f(h)})}),this.cacheTextWaiting.delete(a))}readArrayBufferToString(a,h){var d=new Blob([new Uint8Array(a)]),f=new FileReader;f.onload=function(p){var g;h&&h(null===(g=p.target)||void 0===g?void 0:g.result)},f.readAsText(d)}getTextRestcallUrl(a,h){return this.coding?this.getBlobRestcallUrl(a,d=>{if(d)if(a.endsWith(".txt")||a.endsWith(".xhtml")){let p=new Uint8Array(d),g=$E.fromByteArray(p);h&&h(g)}else this.readArrayBufferToString(d,h);else h&&h(null)}):this.getTextRestcallUrlRaw(a,h)}getTextRestcallUrlRaw(a,h){if(this.cache&&this.cache.has(a)){if(h){let d=this.cache.get(a);this.config.post(()=>{Hi.callOnDone(h,d)})}}else this.cacheTextWaiting.has(a)?h&&this.cacheTextWaiting.get(a).push(h):(h&&this.cacheTextWaiting.set(a,[h]),this.http.get(a,{responseType:"text"}).pipe(hr(this.handleError)).subscribe({next:d=>{d&&this.cache.set(a,d),this.completeTextOnDone(a,d)},error:d=>{this.completeTextOnDone(a,null)}}))}getBlobRestcall(a,h){return this.getBlobRestcallUrl(this.getRestPoint(a,null),h)}getBlobRestcallUrl(a,h){let d=a;if(this.coding){let f=d.lastIndexOf(".");f>=0&&(d=d.substring(0,f)+".bin")}return this.getBlobRestcallUrlRaw(d,f=>{if(f)if(this.coding){let p=new Uint8Array(f),g=$E.dtr(p,-1);h&&h(g)}else h&&h(f);else h&&h(null)})}getBlobRestcallUrlRaw(a,h){this.http.get(a,{responseType:"arraybuffer"}).pipe(hr(this.handleError)).subscribe(d=>{Hi.callOnDone(h,d)},d=>{Hi.callOnDone(h,null)})}save(){const a=new IE;a.file("version.txt","v.1.0"),this.cache.forEach((h,d,f)=>{a.file(d,h)}),a.generateAsync({type:"blob"}).then(h=>{new TextEncoder;const f=new Blob([h],{type:"octet/stream"}),g=`Static.Cache.${(new Date).toISOString().split("T")[0]}.zip`;jf.saveData(f,g)})}onLoadZipFile(a,h,d){const f=new FileReader;f.onload=p=>{const g=m=>{this.cacheZip=null,this.failOnCacheMiss=!1,h()};try{IE.loadAsync(f.result).then(m=>{this.cacheZip=m,h()}).catch(g)}catch(m){g()}},f.readAsArrayBuffer(a)}unpackZip(a,h){const d=this.cacheZip.file(/^.*$/);let f=0;d.forEach(p=>{p.async("string").then(g=>{this.cache.set((p.name.startsWith("/")?"":"/")+p.name,g),++f==d.length&&a()}).catch(h)})}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class Kn{constructor(l,a,h,d,f,p){this.vId=l,this.vName=a,this.vDescription=h,this.vOffset=d,this.vLive=f,this.vTags=p,this.vDirty=!1,this.vPerson=null,this.vOnDirty=null}static isPriest(l){return Kn.getIndex(l)>0}static getIndex(l){const a=l.name.split(" ");if(a.length<=1)return-1;const h={"\u043f\u0430\u0442\u0440.":200,"\u0441\u0445\u0438\u043c\u0438\u0442\u0440.":100,"\u043c\u0438\u0442\u0440.":100,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f.":97,"\u0430\u0440\u0445\u0438\u0435\u043f.":96,"\u0441\u0445\u0438\u0435\u043f.":95,"\u0435\u043f.":90,"\u0432\u0438\u043a.":89,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c.":81,"\u0430\u0440\u0445\u0438\u043c.":80,"\u043f\u0440\u043e\u0442\u043e\u043f\u0440.":75,"\u0441\u0445\u0438\u0438\u0433\u0443\u043c.":70,"\u0438\u0433\u0443\u043c.":70,"\u043f\u0440\u043e\u0442.":60,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c.":56,"\u0438\u0435\u0440\u043e\u043c.":55,"\u0438\u0435\u0440.":50,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434.":48,"\u0430\u0440\u0445\u0438\u0434.":47,"\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a.":46,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434.":45,"\u0438\u0435\u0440\u043e\u0434.":44,"\u0434\u0438\u0430\u043a.":43,"\u0441\u0445\u0438\u043c.":35,"\u043c\u043e\u043d.":30,"\u0438\u043d.":25,"\u0438\u043f\u043e\u0434\u0438\u0430\u043a.":20,"\u0447\u0442.":10};let d=0;return a.forEach(f=>{const p=h[f];void 0!==p&&d<p&&(d=p)}),d}static sort(l,a=!1,h=!0){Kn.sortPersons(l,d=>d,a,h)}static namesCompare(l,a){return Kn.trimPrefixes(l).localeCompare(Kn.trimPrefixes(a))}static trimPrefixes(l){return l.indexOf("."),l.split(" ").filter(h=>!h.trim().endsWith(".")).join(" ")}static namesSortFunction(l){return(a,h)=>{let d=l(a),f=l(h);return Kn.namesCompare(d.name,f.name)}}static fullSortFunction(l,a=!0){return(h,d)=>{let f=l(h),p=l(d);if(f.live!==p.live)return f.live?-1:1;const g=Kn.getIndex(f),m=Kn.getIndex(p);if(g>0||m>0){let y=m-g;return 0==y&&a&&(y=Kn.namesCompare(f.name,p.name)),y}let v=0;return 0==v&&a&&(v=Kn.namesCompare(f.name,p.name)),0===v?0:v<0?-1:1}}static sortPersons(l,a,h=!1,d=!0){return d?l.sort(Kn.fullSortFunction(a,h)):h&&l.sort(Kn.namesSortFunction(a)),l}setOnDirty(l){return this.vOnDirty=l,this}revertDirty(){this.vPerson&&(this.vName=this.vPerson.name,this.vOffset=this.vPerson.offset,this.vDescription=this.vPerson.description,this.vLive=this.vPerson.live,this.vTags=this.vPerson.tags,this.vPerson=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vPerson=null}setDirty(){this.dirty=!0,null==this.vPerson&&(this.vPerson=new Kn(this._id,this.name,this.description,this.offset,this.live,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vPerson}get dirty(){return this.vDirty}set dirty(l){this.vDirty=l}get _id(){return this.vId}set _id(l){this.setDirty(),this.vId=l,this.onDirty()}get name(){return this.vName}set name(l){this.setDirty(),this.vName=l,this.onDirty()}get description(){return this.vDescription}set description(l){this.setDirty(),this.vDescription=l,this.onDirty()}get offset(){return this.vOffset}set offset(l){this.setDirty(),this.vOffset=l,this.onDirty()}get live(){return this.vLive}set live(l){this.setDirty(),this.vLive=l,this.onDirty()}get tags(){return this.vTags}set tags(l){this.setDirty(),this.vTags=l,this.onDirty()}get kafizma(){return ti.getKafizmNumberBy(17,this.offset)}}class t1{constructor(l){this.items=l,this.handler=null,this.handlerNewPerson=null,this.handlerDeletePerson=null}clone(){let l=new t1([...this.items]);return l.handler=this.handler,l.handlerNewPerson=this.handlerNewPerson,l.handlerDeletePerson=this.handlerDeletePerson,l}setOnDirty(l){return this.handler=l,this.items.forEach(a=>{a.setOnDirty(l)}),this}setNewPersonHandler(l){return this.handlerNewPerson=l,this}setDeletePersonHandler(l){return this.handlerDeletePerson=l,this}newPerson(l,a){if(!this.handlerNewPerson)throw new Error("handlerNewPerson is null.");return this.handlerNewPerson(l,a)}deletePerson(l,a){if(!this.handlerDeletePerson)throw new Error("handlerDeletePerson is null.");return this.handlerDeletePerson(l)}}class az{constructor(l,a,h,d,f,p){this._id=l,this.name=a,this.description=h,this.offset=d,this.live=f,this.tags=p}}class Ic{constructor(l,a){this.success=l,this.error=a}static builder(){return new Ic(!1,"")}setSuccess(l){return this.success=l,this}setError(l){return this.error=l,this}}class lz{constructor(l,a,h){this.success=l,this.error=a,this.fileName=h}static builder(){return new lz(!1,"","")}setSuccess(l){return this.success=l,this}setError(l){return this.error=l,this}setFileName(l){return this.fileName=l,this}}class cz{constructor(l,a){this.success=l,this.text=a}static builder(){return new cz(!1,"")}setSuccess(l){return this.success=l,this}setText(l){return this.text=l,this}}class uz{constructor(l){this.items=l}static toPersons(l,a,h,d){const f=[];return l.items.forEach(p=>{f.push(new Kn(p._id,p.name,p.description,p.offset,!!p.live,p.tags))}),new t1(f).setOnDirty(a).setNewPersonHandler(h).setDeletePersonHandler(d)}}class UKe{constructor(l,a,h,d,f,p,g){this.memkey=l,this.id=a,this.name=h,this.description=d,this.offset=f,this.live=p,this.tags=g}}let ha=(()=>{class c{constructor(){this.intersectTagsMap=new Map,this.tagsHasFlagMap=new Map}static tagsHasFlag(a,h){const d=a.split(",");let f=!1;return d.forEach(p=>{p===h&&(f=!0)}),f}static addTagToTags(a,h){const d=a.split(","),f=[];let p=!1;return d.forEach(g=>{g!==h?g&&f.push(g):p=!0}),p||f.push(h),f.join(",")}static removeModificators(a){const h=a.split(","),d="\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3,\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439".split(",");let f=[];return h.forEach(p=>{d.findIndex(g=>g===p)<0&&f.push(p)}),f.join(",")}static removeTag(a,h){const d=a.split(",");let f=[];return d.forEach(p=>{p!=h&&f.push(p)}),f.join(",")}static intersectTags(a,h){let f=h;return a.split(",").filter(g=>c.tagsHasFlag(f,g)).join(",")}intersectTags(a,h){let d=this.intersectTagsMap.get(a);if(d){let p=d.get(h);if(null!=p)return p}let f=c.intersectTags(a,h);return d||(d=new Map,this.intersectTagsMap.set(a,d)),d.set(h,f),f}tagsHasFlag(a,h){let d=this.tagsHasFlagMap.get(a);if(d){let p=d.get(h);if(null!=p)return p}let f=c.tagsHasFlag(a,h);return d||(d=new Map,this.tagsHasFlagMap.set(a,d)),d.set(h,f),f}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),ghe=(()=>{class c{constructor(a,h){this.http=a,this.config=h,this.persons=[],this.restPoint="/kafizmy",this.canSave=null,this.personSaved=new wt,this.personsSubscribersMap=new Map}setCanSave(a){this.canSave=a}getRestPoint(a,h){return Ar.merge(Ar.merge(h||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,h){return Ar.merge(h||this.config.serviceAPIHost,a)}getAllPromise(a,h){let d=h||-1;const f=this.personsSubscribersMap.has(d);f||this.personsSubscribersMap.set(d,[]);const p=this.personsSubscribersMap.get(d);if(f)p.push(a);else{p.push(a);{const g=null!=d&&(d>=0||-1===d),m={params:{_memkey:""+d}},v={params:{}};this.http.get(this.getRestPoint(g?"/mempersons":"/persons",null),g?m:v).pipe(hr(Hi.handleError)).subscribe({next:y=>{const _=this.personsSubscribersMap.get(d);null!=_&&(_.forEach(b=>{b(uz.toPersons(y,C=>{},(C,x)=>{this.newPerson(d,new Kn(-1,C.name,C.description,C.offset,C.live,C.tags)).then(S=>{x&&x(S)},S=>{x&&x(Ic.builder().setSuccess(!1).setError(S))})},C=>{this.deletePerson(d,C)}),null)}),this.personsSubscribersMap.delete(d))},error:y=>{const _=this.personsSubscribersMap.get(d);null!=_&&(_.forEach(b=>{b(null,y)}),this.personsSubscribersMap.delete(d))}})}}}getAll(){return new Promise((a,h)=>{this.getAllPromise((d,f)=>{d?a(d):h(f)})})}getPersons(a){return new Promise((h,d)=>{this.getAllPromise((f,p)=>{f?h(f):d(p)},a)})}save(a,h,d){if(!d&&this.canSave&&!this.canSave(h))return new Promise((p,g)=>{this.config.post(()=>{p(Ic.builder().setSuccess(!0))})});const f={params:{__id:""+h._id,_memkey:""+a,_name:h.old.name,_description:h.old.description,_offset:""+h.old.offset,_live:h.old.live?"1":"0",_newName:h.name,_newDescription:h.description,_newOffset:""+h.offset,_newLive:h.live?"1":"0",_tags:h.tags}};return new Promise((p,g)=>{this.http.get(this.getRestPoint("/updatePerson",null),f).pipe(hr(Hi.handleError)).subscribe({next:m=>{p(m)},error:m=>{g(""+m)}}),h.clearDirty(),this.personSaved.emit(h)})}newPerson(a,h){const d={params:{_memkey:""+a,_name:h.name,_description:h.description,_offset:""+h.offset,_live:h.live?"1":"0",_tags:h.tags}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/addPerson",null),d).pipe(hr(Hi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(""+g)}}),h.clearDirty()})}newPersons(a){let d=[];a.forEach(g=>{d.push((g=>({memkey:g.memkey,name:g.name,description:g.description,offset:g.offset,live:g.live?1:0,tags:g.tags}))(g))});let f={persons:d};const p={params:{}};return new Promise((g,m)=>{this.http.post(this.getRestPoint("/addPersons",null),f,p).pipe(hr(Hi.handleError)).subscribe({next:v=>{g(v)},error:v=>{m(""+v)}})})}deletePerson(a,h){const d={params:{_personId:""+h._id}};this.http.get(this.getRestPoint("/deletePersonById",null),d).pipe(hr(Hi.handleError)).subscribe(f=>{},f=>{}),h.clearDirty()}deletePersons(a,h){const d={};let f=[];return a.forEach(p=>{f.push(p._id)}),new Promise((p,g)=>{this.http.post(this.getRestPoint("/deletePersons",null),{ids:f},d).pipe(hr(Hi.handleError)).subscribe({next:m=>{p(m)},error:m=>{g(""+m)}})})}deleteAll(a){const h=null!=a&&a>=0,d={params:{_memkey:""+a}},f={params:{}};return new Promise((p,g)=>{this.http.get(this.getRestPoint(h?"/deleteMemorialPersons":"/deleteAllPersons",null),h?d:f).pipe(hr(Hi.handleError)).subscribe({next:m=>{p(m)},error:m=>{g(""+m)}})})}addTempFile(a,h){const d={params:{_name:a}};return new Promise((f,p)=>{this.http.post(this.getRestPoint("/addFile",null),h,d).pipe(hr(Hi.handleError)).subscribe({next:g=>{f(lz.builder().setSuccess(!0).setFileName(this.getRestPointRaw("/temp/"+a,null)))},error:g=>{p(null)}})})}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class Xf{constructor(){this.result=!1,this.errors=""}static build(){return new Xf}setResult(l){return this.result=l,this}setErrors(l){return this.errors=l,this}}class hz{constructor(){this.valid=!1,this.added=!1,this.authId="noId"}static build(){return new hz}setValid(l){return this.valid=l,this}setAdded(l){return this.added=l,this}setAuthId(l){return this.authId=l,this}}class dz{constructor(){this.errors="",this.result=!1,this.status=""}static build(){return new dz}setResult(l){return this.result=l,this}setErrors(l){return this.errors=l,this}setStatus(l){return this.status=l,this}}class dS{constructor(l,a,h){this.username=l,this.password=a,this.authId=h}static clone(l){return new dS(l.username,l.password,l.authId)}static cloneArray(l){const a=[];return l.forEach(h=>{a.push(dS.clone(h))}),a}}let fS=(()=>{class c{constructor(a){this.config=a,this.bLoggedIn=!1,this.participants=[],this.nextNewAuthId=1,this.localStorageName="",this.localStorageName=a.serviceAPIHost+"AuthSvc",this.loadData()}loadData(){const a=localStorage.getItem(this.localStorageName);if(a)try{const h=JSON.parse(a);this.participants=dS.cloneArray(h)}catch(h){this.config.addAlert(Fr.of("Error: "+h,"OK",10))}}saveData(){const a=JSON.stringify(this.participants);localStorage.setItem(this.localStorageName,a)}isLoggedIn(){return new Promise((a,h)=>{this.config.post(()=>{a(Xf.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((a,h)=>{this.config.post(()=>{a(Xf.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((a,h)=>{this.config.post(()=>{a(Xf.build().setResult(!0))})})}handleError(a,h){return Hi.handleError(a,h)}requestForUser(a,h){const d=hz.build().setValid(!1);let f=!1;if(this.participants.forEach(p=>{p.username===a&&(f=!0,d.setValid(h===p.password),d.setAuthId(p.authId=this.newAuthId()),d.setAdded(!1))}),!f&&a){const p=new dS(a,h,this.newAuthId());this.participants.push(p),d.setValid(!0),d.setAuthId(p.authId),d.setAdded(!0)}return this.saveData(),new Promise((p,g)=>{this.config.post(()=>{p(d)})})}logoutAll(){this.participants.forEach(h=>{h.authId=""});const a=Xf.build();return a.setErrors(""),a.setResult(!0),new Promise((h,d)=>{this.config.post(()=>{h(a)})})}requestVersion(){this.participants.forEach(h=>{h.authId=""});const a=dz.build();return a.setErrors(""),a.setResult(!0),a.setStatus("memory.version"),new Promise((h,d)=>{this.config.post(()=>{h(a)})})}newAuthId(){return"MAT"+this.nextNewAuthId++}getParticipant(a){let h=null;return this.participants.forEach(d=>{d.authId===a&&(h=d)}),h}}return c.\u0275fac=function(a){return new(a||c)(Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),fz=(()=>{class c{constructor(a,h){this.auth=a,this.config=h,this.memkey=-1,this.authedPersons=null,this.nextPersonId=1,this.localStorageName="",this.localStorageName=h.serviceAPIHost+"KafSvc"}getUserId(){const h=this.auth.getParticipant(this.config.authId);if(!h)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return h.username}get persons(){const a=this.getUserId();return this.checkOrLoadData(),this.authedPersons[a]||(this.authedPersons[a]=new uz([])),this.authedPersons[a]}checkOrLoadData(){if(this.authedPersons)return;const a=localStorage.getItem(this.localStorageName);if(a)try{const h=JSON.parse(a);h&&(this.authedPersons=h)}catch(h){this.authedPersons={},this.config.addAlert(Fr.of("Error: "+h,"OK",10))}else this.authedPersons={};this.nextPersonId=1,this.persons.items.forEach(h=>{h._id>this.nextPersonId&&(this.nextPersonId=h._id+1)})}getNextPersonId(){return++this.nextPersonId}saveData(){const a=JSON.stringify(this.authedPersons);localStorage.setItem(this.localStorageName,a)}deleteAll(a){return this.checkOrLoadData(),this.persons.items=[],this.saveData(),new Promise((h,d)=>{h(Ic.builder().setSuccess(!0))})}deletePersons(a,h){return this.checkOrLoadData(),a.forEach(d=>{let f=this.persons.items.findIndex(p=>p._id===d._id);f>=0&&this.persons.items.splice(f,1)}),this.saveData(),new Promise((d,f)=>{d(Ic.builder().setSuccess(!0))})}checkAndAddDefaultHramvkostino(){let a="hramvkostino";this.persons.items.findIndex(h=>h.tags.indexOf(a)>=0)<0&&(this.addDefaultHramvkostino(this.persons,a),this.saveData())}checkAndAddDefaultAuthors(){let a="\u0430\u0432\u0442\u043e\u0440\u044b";this.persons.items.findIndex(h=>h.tags.indexOf(a)>=0)<0&&(this.addDefaultAuthors(this.persons,a),this.saveData())}addDefaultHramvkostino(a,h="\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"){const f="\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f|-1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|-1|true\n\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f|1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|0|true\n\u0421\u0435\u0440\u0433\u0438\u044f|2|true\n\u041c\u0430\u0440\u0438\u0438|3|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|4|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|5|true\n\u0413\u0430\u043b\u0438\u043d\u044b|6|true\n\u041f\u0430\u0432\u043b\u0430|7|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|8|true\n\u0415\u043b\u0435\u043d\u044b|9|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|10|true\n\u041b\u044e\u0431\u043e\u0432\u0438|11|true\n\u041d\u0430\u0434\u0435\u0436\u0434\u044b|12|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|13|true\n\u041b\u044e\u0434\u043c\u0438\u043b\u044b|14|true\n\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430|15|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|16|true\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|17|true\n\u0410\u043d\u0434\u0440\u0435\u044f|18|true\n\u041c\u0430\u0440\u0438\u043d\u044b|19|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|-1|false\n\u0412\u0438\u043a\u0442\u043e\u0440\u0430|-1|false\n\u0424\u043e\u0442\u0438\u043d\u0438\u0438|-1|false".split("\n"),p=h;f.forEach((g,m)=>{const v=g.trim().split("|");0!==v.length&&a.items.push(new az(this.getNextPersonId(),v[0],"",+v[1],"true"===v[2],p))})}addDefaultAuthors(a,h="\u0430\u0432\u0442\u043e\u0440\u044b"){const f="\u0415\u0432\u0433\u0435\u043d\u0438\u044f|-1|true\n\u0410\u043d\u0434\u0440\u0435\u044f|-1|true".split("\n"),p=h;f.forEach((g,m)=>{const v=g.trim().split("|");0!==v.length&&a.items.push(new az(this.getNextPersonId(),v[0],"",+v[1],"true"===v[2],p))})}getPersons(a){this.checkOrLoadData();const h=uz.toPersons(this.persons,d=>{},(d,f)=>{this.newPerson(this.memkey,new Kn(-1,d.name,d.description,d.offset,d.live,d.tags)).then(p=>{f&&f(p)},p=>{f&&f(Ic.builder().setSuccess(!1).setError(""+p))})},(d,f)=>{this.deletePerson(this.memkey,d,f)});return new Promise((d,f)=>{this.config.post(()=>{d(h)})})}newPersons(a,h){return new Promise((d,f)=>{this.config.post(()=>{a.forEach(p=>{this.newPersonSync(p.memkey,new Kn(p.id,p.name,p.description,p.offset,p.live,p.tags),h)}),d(Ic.builder().setSuccess(!0))},0)})}newPerson(a,h,d){return new Promise((f,p)=>{this.config.post(()=>{this.newPersonSync(a,h,d).then(g=>f(g))},0)})}newPersonSync(a,h,d){return this.checkOrLoadData(),this.persons.items.push(new az(this.getNextPersonId(),h.name,h.description,h.offset,h.live,h.tags)),this.saveData(),new Promise((f,p)=>{f(Ic.builder().setSuccess(!0))})}save(a,h,d,f){this.checkOrLoadData();let p=!1;return this.persons.items.forEach(g=>{g._id===h._id&&(g.name=h.name,g.description=h.description,g.tags=h.tags,g.offset=h.offset,g.live=h.live,p=!0)}),p&&this.saveData(),h.clearDirty(),f&&f(new Ic(p,p?"OK":"Not found")),new Promise((g,m)=>{g(new Ic(p,p?"OK":"Not found"))})}deletePerson(a,h,d){this.checkOrLoadData();const f=this.persons.items.findIndex(g=>g._id===h._id),p=f>=0;return p&&(this.persons.items.splice(f,1),this.saveData()),h.clearDirty(),d&&d(new Ic(p,p?"OK":"Not found")),new Promise((g,m)=>{g(new Ic(p,p?"OK":"Not found"))})}addTempFile(a,h){return new Promise((d,f)=>{this.config.post(()=>{f("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.")})})}}return c.\u0275fac=function(a){return new(a||c)(Ae(fS),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class n1{constructor(l,a,h,d){this.vId=l,this.vName=a,this.vMode=h,this.vTags=d,this.vDirty=!1,this.vMemorial=null,this.vOnDirty=null,this.clazz={},this.clazzBadge={}}getOnDirty(){return this.vOnDirty}setOnDirty(l){return this.vOnDirty=l,this}revertDirty(){this.vMemorial&&(this.vName=this.vMemorial.name,this.vMode=this.vMemorial.mode,this.vMemorial=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vMemorial=null}setDirty(){this.dirty=!0,null==this.vMemorial&&(this.vMemorial=new n1(this._id,this.name,this.mode,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vMemorial}get dirty(){return this.vDirty}set dirty(l){this.vDirty=l}get _id(){return this.vId}set _id(l){this.setDirty(),this.vId=l,this.onDirty()}get name(){return this.vName}set name(l){this.setDirty(),this.vName=l,this.onDirty()}get mode(){return this.vMode}set mode(l){this.setDirty(),this.vMode=l,this.onDirty()}get tags(){return this.vTags}set tags(l){this.setDirty(),this.vTags=l,this.onDirty()}get enabled(){return"on"===this.mode}set enabled(l){this.mode=l?"on":"off"}}class $Ke{constructor(l){this.items=l,this.handler=null,this.handlerNewMemorial=null,this.handlerDeleteMemorial=null}setOnDirty(l){return this.handler=l,this.items.forEach(a=>{a.setOnDirty(l)}),this}setNewMemorialHandler(l){return this.handlerNewMemorial=l,this}addNewMemorialHandler(l){if(this.handlerNewMemorial){const a=this.handlerNewMemorial;this.handlerNewMemorial=(h,d)=>{a(h,f=>{l(h,f.success?d:void 0),!f.success&&d&&d(f)})}}else this.handlerNewMemorial=l;return this}setDeleteMemorialHandler(l){return this.handlerDeleteMemorial=l,this}addDeleteMemorialHandler(l){if(this.handlerDeleteMemorial){const a=this.handlerDeleteMemorial;this.handlerDeleteMemorial=(h,d)=>{a(h,f=>{l(h,f.success?d:void 0),!f.success&&d&&d(f)})}}else this.handlerDeleteMemorial=l;return this}newMemorial(l,a){if(this.handlerNewMemorial)return this.handlerNewMemorial(l,a);a&&a(vo.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}deleteMemorial(l,a){if(this.handlerDeleteMemorial)return this.handlerDeleteMemorial(l,a);a&&a(vo.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}}class vo{constructor(l,a){this.success=l,this.error=a}static builder(){return new vo(!1,"")}setSuccess(l){return this.success=l,this}setError(l){return this.error=l,this}}class WKe{constructor(l,a,h,d){this._id=l,this.name=a,this.mode=h,this.tags=d}}class WE{constructor(l){this.items=l}static toMemorials(l,a,h,d){const f=[];return l.items.forEach(p=>{f.push(new n1(p._id,p.name,p.mode,p.tags))}),new $Ke(f).setOnDirty(a).setNewMemorialHandler(h).setDeleteMemorialHandler(d)}}let mhe=(()=>{class c{constructor(a,h,d){this.http=a,this.config=h,this.auth=d,this.restPoint="/kafizmy",this.canSave=null,this.memorialsSubscribers=null,this.memorialSaved=new wt}setCanSave(a){this.canSave=a}getRestPoint(a,h){return Ar.merge(Ar.merge(h||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,h){return Ar.merge(h||this.config.serviceAPIHost,a)}getAllSubscribe(){return new Promise((a,h)=>{if(null!=this.memorialsSubscribers)this.memorialsSubscribers.push((d,f)=>{d?a(d):h(f)});else{this.memorialsSubscribers=[],this.memorialsSubscribers.push((f,p)=>{f?a(f):h(p)});const d={params:{}};this.http.get(this.getRestPoint("/memorials",null),d).pipe(hr(Hi.handleError)).subscribe({next:f=>{if(null==this.memorialsSubscribers)return;const p=this.memorialsSubscribers;this.memorialsSubscribers=null,p.forEach(g=>{g(WE.toMemorials(f,m=>{this.save(m)},(m,v)=>{this.newMemorial(new n1(-1,m,"on","")).then(y=>v?v(y):null,y=>v?v(vo.builder().setError(y)):null)},(m,v)=>{this.deleteMemorial(m).then(y=>v?v(y):null,y=>v?v(vo.builder().setError(y)):null)}),null)})},error:f=>{if(null==this.memorialsSubscribers)return;const p=this.memorialsSubscribers;this.memorialsSubscribers=null,p.forEach(g=>{g(null,f)})}})}})}isReady(){return new Promise((a,h)=>{this.config.post(()=>{const f=this.auth.getParticipant(this.config.authId);a(vo.builder().setSuccess(!!f))})})}getAll(){return this.getAllSubscribe()}save(a,h){if(!h&&this.canSave&&!this.canSave(a)||!a.dirty)return new Promise((f,p)=>{this.config.post(()=>{f(vo.builder().setSuccess(!0))})});const d={params:{_name:a.old.name,_mode:a.old.mode,_newName:a.name,_newMode:a.mode,_newTags:a.tags}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/updateMemorial",null),d).pipe(hr(Hi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(null)}}),a.clearDirty(),this.memorialSaved.emit(a)})}newMemorial(a,h){const d={params:{_name:a.name,_mode:a.mode}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/addMemorial",null),d).pipe(hr(Hi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(null)}}),a.clearDirty()})}deleteMemorial(a,h){const d={params:{_name:a.name,_mode:a.mode}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/deleteMemorial",null),d).pipe(hr(Hi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(null)}}),a.clearDirty()})}deleteAll(){const a={params:{}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/deleteAllMemorials",null),a).pipe(hr(Hi.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}})})}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on),Ae(fS))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),vhe=(()=>{class c{constructor(a,h,d){this.kafizmSvc=a,this.auth=h,this.config=d,this.memkey=-1,this.authedMemorials=null,this.localStorageName="",this.nextMemorialId=1,this.localStorageName=d.serviceAPIHost+"MemSvc"}isReady(){return new Promise((a,h)=>{this.config.post(()=>{const f=this.auth.getParticipant(this.config.authId);a(vo.builder().setSuccess(!!f))})})}getUserId(){const h=this.auth.getParticipant(this.config.authId);if(!h)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return h.username}get memorials(){const a=this.getUserId();return this.authedMemorials[a]||(this.authedMemorials[a]=new WE([])),this.authedMemorials[a]}getNextMemorialId(){return++this.nextMemorialId}checkOrloadData(){const a=()=>{let d=!0;this.memorials.items.forEach(p=>{"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"===p.name&&(d=!1)})};if(this.authedMemorials)return void a();const h=localStorage.getItem(this.localStorageName);if(h)try{const d=JSON.parse(h);this.authedMemorials=d||{}}catch(d){this.authedMemorials={},this.config.addAlert(Fr.of("Error: "+d,"OK",10))}this.authedMemorials||(this.authedMemorials={}),a(),this.nextMemorialId=1,this.memorials.items.forEach(d=>{d._id>this.nextMemorialId&&(this.nextMemorialId=d._id+1)})}saveData(){const a=JSON.stringify(this.authedMemorials);localStorage.setItem(this.localStorageName,a)}addTempFile(a,h,d){this.checkOrloadData()}deleteAll(){return new Promise((a,h)=>{this.config.post(()=>{this.checkOrloadData(),this.memorials.items=[],this.saveData(),a(vo.builder().setSuccess(!0))})})}deleteMemorial(a){return new Promise((h,d)=>{this.config.post(()=>{this.checkOrloadData();const f=this.memorials.items.findIndex(g=>g._id===a._id),p=f>=0;p&&this.memorials.items.splice(f,1),this.saveData(),a.clearDirty(),h(new vo(p,""))})})}getAll(){return new Promise((a,h)=>{this.config.post(()=>{this.checkOrloadData();const d=WE.toMemorials(this.memorials,f=>{},(f,p)=>{this.newMemorial(new n1(-1,f,"on","")).then(g=>p?p(g):null,g=>p?p(vo.builder().setError(g)):null)},(f,p)=>{this.deleteMemorial(f).then(g=>p?p(g):null,g=>p?p(vo.builder().setError(g)):null)});a(d)})})}getAllSubscribe(){return new Promise((a,h)=>{this.config.post(()=>{this.checkOrloadData();const d=WE.toMemorials(this.memorials,f=>{},(f,p)=>{this.newMemorial(new n1(-1,f,"on","")).then(g=>p?p(g):null,g=>p?p(vo.builder().setError(g)):null)},(f,p)=>{this.deleteMemorial(f).then(g=>p?p(g):null,g=>p?p(vo.builder().setError(g)):null)});a(d)})})}newMemorial(a){return new Promise((h,d)=>{this.config.post(()=>{if(this.checkOrloadData(),null!=this.memorials.items.find(p=>p.name==a.name))return void d(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c: '${a.name}'.`);let f=a.tags;f||(f+=a.name+",\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3"),this.memorials.items.push(new WKe(this.getNextMemorialId(),a.name,a.mode,f)),this.saveData(),"hramvkostino"==a.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==a.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),h(new vo(!0,""))})})}save(a,h){return new Promise((d,f)=>{this.config.post(()=>{this.checkOrloadData();let p=!1;this.memorials.items.forEach(g=>{g._id===a._id&&(g.name=a.name,g.tags=a.tags,g.mode=a.mode,p=!0)}),p&&this.saveData(),"hramvkostino"==a.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==a.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),a.clearDirty(),d(new vo(p,p?"OK":"Not found"))})})}}return c.\u0275fac=function(a){return new(a||c)(Ae(fz),Ae(fS),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),r1=(()=>{class c{constructor(a,h,d){this.msRest=a,this.msMemory=h,this.config=d,this.memorials=null,this.subscribers=null,this.ms=null,this.updateMemorialsAction=new tJ(f=>{this.getAll().then(p=>{null==f||f.map(g=>g(!0))})},100,(f,p)=>this.config.post(p,f)),this.config.isMemoryServerType()&&(this.ms=this.msMemory),(!this.ms||this.config.isRestServerType())&&(this.ms=this.msRest)}getMemorials(){return this.memorials}getActivePredefinedMemorialsRaw(){return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"]}getActivePredefinedMemorials(){let a=[],h=this.getActivePredefinedMemorialsRaw();return this.memorials&&this.memorials.items&&this.memorials.items.forEach(d=>{h.forEach(f=>{f==d.name&&a.indexOf(f)<0&&a.push(f)})}),a}setMemorials(a){this.memorials=a,this.memorials.addDeleteMemorialHandler((h,d)=>{this.reloadMemorials(),d&&d(new vo(!0,""))}),this.memorials.addNewMemorialHandler((h,d)=>{this.reloadMemorials(()=>{d&&d(new vo(!0,""))})})}isReady(){return this.ms?this.ms.isReady():new Promise((a,h)=>{this.config.post(()=>{h(vo.builder().setSuccess(!1).setError("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0433\u043e\u0442\u043e\u0432."))})})}getAll(){return new Promise((a,h)=>{if(null==this.subscribers)if(null!=this.memorials)a(this.memorials);else{this.subscribers=[(f,p)=>{f?a(f):p&&h(p)}];const d=(f,p)=>{if(f&&this.setMemorials(f),null!=this.subscribers){let g=this.subscribers;this.subscribers=null,g.forEach(m=>{p?m(null,p):m(this.memorials,null)})}};this.ms.getAll().then(f=>{d(f,null)},f=>{d(null,f)})}else this.subscribers.push((d,f)=>{d?a(d):f&&h(f)})})}save(a,h){return new Promise((d,f)=>{this.ms.save(a,h).then(p=>{this.reloadMemorials(),d(p)},p=>{f(p)})})}newMemorial(a){return new Promise((h,d)=>{this.ms.newMemorial(a).then(f=>{this.reloadMemorials(p=>{f&&f.success?h(f):d(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${a.name}"`)})},f=>{d(f)})})}deleteMemorial(a){return new Promise((h,d)=>{this.ms.deleteMemorial(a).then(f=>{this.reloadMemorials(p=>{f&&f.success?h(f):d(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${a.name}"`)})},f=>{d(f)})})}deleteAll(){return new Promise((a,h)=>{this.ms.deleteAll().then(d=>{this.reloadMemorials(f=>{d&&d.success?a(d):h('\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u043e\u0432."')})},d=>{h(d)})})}reloadMemorials(a){this.memorials=null,this.updateMemorialsAction.requestAction(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(mhe),Ae(vhe),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),_g=(()=>{class c extends class HKe{constructor(){this.handler=()=>{},this.onChangesEvent=new yt,this.enabled=!0}setDetectChangesHandler(l){return this.handler=l,this}enableChangeDetector(l){this.enabled=l}getChangeDetector(){return this.onChangesEvent.asObservable()}detectedChanges(l){this.enabled&&(this.onChangesEvent.next(l),this.handler())}}{constructor(a,h,d,f){super(),this.ksRest=a,this.ksMemory=h,this.config=d,this.memorialsSvc=f,this.memkey=-1,this.persons=null,this.subscribers=null,this.ks=null,this.predefinedPersons=null,this.activePredefinedMemorialTags="",this.changesId=0,this.virtualIdBase=1e8,this.config.isMemoryServerType()&&(this.ks=this.ksMemory),(!this.ks||this.config.isRestServerType())&&(this.ks=this.ksRest),this.setupPredefinedPersons()}newChangesId(){return++this.changesId}getPersonsDirect(){return this.persons}reloadPersons(){this.persons=null,this.getPersons(-1)}getPersons(a){return new Promise((h,d)=>{var f;let p=(g,m)=>{g?h(g):d(""+m)};null==this.subscribers?null!=this.persons?h(this.persons):(this.subscribers=[p],null===(f=this.ks)||void 0===f||f.getPersons(this.memkey).then(g=>{if(this.persons=this.filterPersonsAndPredefined(g),null!=this.subscribers){const m=this.subscribers;this.subscribers=null,m.forEach(v=>{v(this.persons,null)})}this.config.post(()=>{this.runDetectAnyChanges()})},g=>{if(null!=this.subscribers){const m=this.subscribers;this.subscribers=null,m.forEach(v=>{v(null,""+g)})}})):this.subscribers.push(p)})}autoRejectOnFail(a){return this.ks?a(this.ks):new Promise((h,d)=>{this.config.post(()=>{d("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}runDetectAnyChanges(){return this.detectedChanges(new Kn(-1,"","",-1,!0,"")),this}runChangeDetector(a){return new Promise((h,d)=>{a.then(f=>{h(f),this.runDetectAnyChanges()},f=>{d(d),this.runDetectAnyChanges()})})}save(a,h,d){return this.autoRejectOnFail(f=>this.runChangeDetector(f.save(this.memkey,h,d)))}deleteAll(a){return this.autoRejectOnFail(h=>this.runChangeDetector(h.deleteAll(this.memkey)))}deletePersons(a){return this.autoRejectOnFail(h=>this.runChangeDetector(h.deletePersons(a,this.memkey)))}newPerson(a,h,d){return this.autoRejectOnFail(f=>this.runChangeDetector(f.newPerson(this.memkey,h,d)))}newPersons(a,h){return this.autoRejectOnFail(d=>this.runChangeDetector(d.newPersons(a,h)))}addTempFile(a,h){return this.autoRejectOnFail(d=>d.addTempFile(a,h))}filterPersonsAndPredefined(a,h=!0){let d=a.items,f=a;f.items=[];let p=new t1([]),g=!1;d.forEach(v=>{this.isValidPerson(v)?f.items.push(v):v._id<this.virtualIdBase&&(g=!0,this.removePredefinedTags(v)?(this.ks.save(this.memkey,v,!0),f.items.push(v)):p.items.push(v))}),g&&this.config.addAlert(Fr.of("\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.","OK",30));let m=this.memorialsSvc.getActivePredefinedMemorials();return this.activePredefinedMemorialTags=m.join(","),this.predefinedPersons.forEach((v,y)=>{m.forEach(_=>{_==y&&f.items.push(...v.clone().items)})}),p.items.length>0&&h&&this.deletePersons(p.items).then(v=>{this.config.addAlert(Fr.of(v.success?"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.":v.error,"OK",30))},v=>{this.config.addAlert(Fr.of(v,"OK",30))}),a}removePredefinedTags(a){let h=!1,d=a.tags;["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(m=>{let v=ha.removeTag(d,m);v!=d&&(h=!0,d=v)});let g=""!=ha.removeModificators(d);return g&&(a.tags=d),g}isValidPerson(a){let h=ha.removeModificators(a.tags),f=!1;return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(p=>{let g=ha.removeTag(h,p);g!=h&&(f=!0),h=g}),!f}setupPredefinedPersons(){this.predefinedPersons=new Map;let a=this.virtualIdBase,h=()=>++a,d="\u0430\u0432\u0442\u043e\u0440\u044b";this.predefinedPersons.set(d,new t1([new Kn(h(),"\u0415\u0432\u0433\u0435\u043d\u0438\u044f","",-1,!0,d),new Kn(h(),"\u0410\u043d\u0434\u0440\u0435\u044f","",-1,!0,d)])),d="hramvkostino",this.predefinedPersons.set(d,new t1([new Kn(h(),"\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","",-1,!0,d),new Kn(h(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,d),new Kn(h(),"\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",-1,!0,d),new Kn(h(),"\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f","",1,!0,d),new Kn(h(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,d),new Kn(h(),"\u0434\u0438\u0430\u043a. \u0413\u0435\u043e\u0440\u0433\u0438\u044f","",-1,!0,d),new Kn(h(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",0,!0,d),new Kn(h(),"\u0421\u0435\u0440\u0433\u0438\u044f","",2,!0,d),new Kn(h(),"\u041c\u0430\u0440\u0438\u0438","",3,!0,d),new Kn(h(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",4,!0,d),new Kn(h(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",5,!0,d),new Kn(h(),"\u0413\u0430\u043b\u0438\u043d\u044b","",6,!0,d),new Kn(h(),"\u041f\u0430\u0432\u043b\u0430","",7,!0,d),new Kn(h(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",8,!0,d),new Kn(h(),"\u0415\u043b\u0435\u043d\u044b","",9,!0,d),new Kn(h(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",10,!0,d),new Kn(h(),"\u041b\u044e\u0431\u043e\u0432\u0438","",11,!0,d),new Kn(h(),"\u041d\u0430\u0434\u0435\u0436\u0434\u044b","",12,!0,d),new Kn(h(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",13,!0,d),new Kn(h(),"\u041b\u044e\u0434\u043c\u0438\u043b\u044b","",14,!0,d),new Kn(h(),"\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430","",15,!0,d),new Kn(h(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",16,!0,d),new Kn(h(),"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",17,!0,d),new Kn(h(),"\u0410\u043d\u0434\u0440\u0435\u044f","",18,!0,d),new Kn(h(),"\u041c\u0430\u0440\u0438\u043d\u044b","",19,!0,d),new Kn(h(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",-1,!1,d),new Kn(h(),"\u0412\u0438\u043a\u0442\u043e\u0440\u0430","",-1,!1,d),new Kn(h(),"\u0424\u043e\u0442\u0438\u043d\u0438\u0438","",-1,!1,d)]))}}return c.\u0275fac=function(a){return new(a||c)(Ae(ghe),Ae(fz),Ae(on),Ae(r1))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),yhe=(()=>{class c{constructor(a,h){this.http=a,this.config=h,this.bLoggedIn=!1,this.restPoint="/participant"}getRestPoint(a,h){const d=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return Ar.merge(Ar.merge(h||d,this.restPoint),a)}isLoggedIn(){return new Promise((a,h)=>{this.config.post(()=>{a(Xf.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((a,h)=>{this.config.post(()=>{a(Xf.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((a,h)=>{this.config.post(()=>{a(Xf.build().setResult(!0))})})}requestForUser(a,h){const d={params:{username:a,password:h}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/login",null),d).pipe(hr(Hi.handleError)).subscribe({next:g=>f(g),error:g=>p(g)})})}logoutAll(){const a={params:{}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/logoutAll",null),a).pipe(hr(Hi.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}requestVersion(){const a={params:{}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/version",null),a).pipe(hr(Hi.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),yh=(()=>{class c{constructor(a,h,d){this.config=a,this.authRest=h,this.authMemory=d,this.auth=null,this.config.isMemoryServerType()&&(this.auth=d),(!this.auth||this.config.isRestServerType())&&(this.auth=h)}autoRejectOnFail(a){return this.auth?a(this.auth):new Promise((h,d)=>{this.config.post(()=>{d("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}isLoggedIn(){return this.autoRejectOnFail(a=>a.isLoggedIn())}login(){return this.autoRejectOnFail(a=>a.login())}logout(){return this.autoRejectOnFail(a=>a.logout())}requestForUser(a,h){return this.autoRejectOnFail(d=>d.requestForUser(a,h))}logoutAll(){return this.autoRejectOnFail(a=>a.logoutAll())}requestVersion(){return this.autoRejectOnFail(a=>a.requestVersion())}}return c.\u0275fac=function(a){return new(a||c)(Ae(on),Ae(yhe),Ae(fS))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class bg{constructor(l){this.data=l}static builder(){return new bg(null)}setData(l){return this.data=l,this}}class mi{constructor(l,a,h){this.text=l,this.onClick=a,this.tag=h}static builder(){return new mi("",null,null)}setText(l){return this.text=l,this}setOnClick(l){return this.onClick=l,this}setTag(l){return this.tag=l,this}click(l){this.onClick&&this.onClick(l)}}let Cg=(()=>{class c{constructor(a,h,d){this.config=a,this.uiConfig=h,this.authSvc=d,this.aComponents=[],this.menuLinksOld=null,this.menuLinks=[],this.serviceReady=!1}get components(){return this.syncComponents(),this.aComponents}set components(a){this.aComponents=a}isComponentType(a,h){var d;if(this.components.length<=0)return!1;let f=this.components[0].data instanceof a;return f&&null!=h?(null===(d=this.components[0].data.component)||void 0===d?void 0:d.data)instanceof h:f}addMenuLink(a){return this.menuLinks.push(a),this}applyMenuAppRoutes(a=!1){let h=this.uiConfig.setAppRoutes(this.menuLinks);a||(this.menuLinksOld=h)}ngOnInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}ngOnDestroy(){this.menuLinksOld&&this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0)}ngAfterViewInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}syncComponents(){}doLogin(a){this.authSvc.isLoggedIn().then(h=>{h.result?(this.serviceReady=!1,a&&a(this.serviceReady)):this.authSvc.login().then(d=>{if(d.result){let f="hramvkostino",p="hramvkostino";this.authSvc.requestForUser(f,p).then(g=>{this.serviceReady=g.valid,this.config.authId=g.authId,this.config.authBody=btoa(f+":"+p),a&&a(this.serviceReady)})}})})}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh))},c.\u0275cmp=je({type:c,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,h){},encapsulation:2}),c})();var dt=(()=>(function(c){c.NZ_KZ="NZ_KZ",c.NZ_KI="NZ_KI",c.NZ_KU="NZ_KU",c.NZ_KP="NZ_KP",c.VZ_KZ="VZ_KZ",c.VZ_KI="VZ_KI",c.VZ_KU="VZ_KU",c.VZ_KP="VZ_KP",c.SL_OV="SL_OV",c.SL_BL="SL_BL",c.SL_LG="SL_LG",c.SL_TF="SL_TF"}(dt||(dt={})),dt))();class pz{static builder(){return new pz}build(l,a,h,d,f,p,g,m){let v=mz.builder(),_=b=>{v.switchState(b,a,m,()=>{v.hideOrShowMainMenu(b,a,m,()=>{b.complementedByMenuName&&v.hideOrShowStateByType(b.complementedByMenuName,b.on,null,a,m,[b.complementedByMenuName]);let C=h();C&&C(b)})})};return new GKe(v,a,l,d,f,p,g,Math.PI,m).add(ct.builder().setText("\u041d\u043e\u0432\u044b\u0439 \u0417\u0430\u0432\u0435\u0442").setSize(Math.PI).setOnClick(_)).add(ct.builder().setText("\u0412\u0435\u0442\u0445\u0438\u0439 \u0417\u0430\u0432\u0435\u0442").setOnClick(_).setTypeName(ds.DOWN)).newLine().add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI).setComplementedByTypeName(dt.NZ_KZ).setOnClick(_)).add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(dt.VZ_KZ).setOnClick(_).setTypeName(ds.DOWN)).newLine().add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0430\u044f").setSize(Math.PI).setComplementedByTypeName(dt.NZ_KI).setOnClick(_)).add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435").setComplementedByTypeName(dt.VZ_KI).setOnClick(_).setTypeName(ds.DOWN)).newLine().add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI/2).setComplementedByTypeName(dt.NZ_KU).setOnClick(_)).add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0430\u044f").setComplementedByTypeName(dt.NZ_KP).setSize(Math.PI/2).setOnClick(_)).add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0438\u0435").setSize(Math.PI/2).setComplementedByTypeName(dt.VZ_KP).setOnClick(_).setTypeName(ds.DOWN)).add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(dt.VZ_KU).setOnClick(_).setTypeName(ds.DOWN)).newLine().setAlpha0(Math.PI/6*4).add(ct.builder().setText("   \u041e \u0432\u0435\u0440\u0435   ").setComplementedByTypeName(dt.SL_OV).setTypeName(ds.AROUND).setSize(Math.PI/6*2).setOnClick(_)).add(ct.builder().setText("\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0430\u044f \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u0430\u044f \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430").setTypeName(ds.AROUND).setSize(Math.PI/6*4).setDelayIndex(3).setComplementedByTypeName(dt.SL_BL).setOnClick(_)).add(ct.builder().setText("   \u042f\u0437\u044b\u043a   ").setTypeName(ds.AROUND).setSize(Math.PI/6*2).setDelayIndex(1).setOnClick(_)).add(ct.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u044f \u0424\u0435\u043e\u0444\u0438\u043b\u0430\u043a\u0442\u0430 \u0411\u043e\u043b\u0433\u0430\u0440\u0441\u043a\u043e\u0433\u043e").setTypeName(ds.AROUND).setDelayIndex(2).setComplementedByTypeName(dt.SL_TF).setOnClick(_)).newLine(!0,!0).setAlpha0(0).newLine().add(ct.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(dt.NZ_KZ)).newLine().add(ct.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.NZ_KZ)).add(ct.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.NZ_KZ)).newLine().add(ct.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.NZ_KZ)).add(ct.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.NZ_KZ)).newLine(!0,!0).newLine().newLine().setAlpha0(0).add(ct.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(_).setTypeName(dt.NZ_KI)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().add(ct.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(dt.NZ_KU)).newLine().add(ct.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(_).setTypeName(dt.NZ_KU)).newLine().add(ct.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(dt.NZ_KU)).newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(ct.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).newLine().setAlpha0(Math.PI/4*5).add(ct.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(_).setTypeName(dt.NZ_KU)).add(ct.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(_).setTypeName(dt.NZ_KU)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().newLine().newLine().add(ct.builder().setText("\u041e\u0442\u043a\u0440\u043e\u0432\u0435\u043d\u0438\u0435 \u0418\u043e\u0430\u043d\u043d\u0430 \u0411\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u0430").setOnClick(_).setTypeName(dt.NZ_KP)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).newLine().add(ct.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0411\u044b\u0442\u0438\u044f").setOnClick(_).setTypeName(dt.VZ_KZ)).newLine().add(ct.builder().setText("\u0418\u0441\u0445\u043e\u0434").setOnClick(_).setTypeName(dt.VZ_KZ)).add(ct.builder().setText("\u041b\u0435\u0432\u0438\u0442").setOnClick(_).setTypeName(dt.VZ_KZ)).newLine().add(ct.builder().setText("\u0427\u0438\u0441\u043b\u0430").setOnClick(_).setTypeName(dt.VZ_KZ)).add(ct.builder().setText("\u0412\u0442\u043e\u0440\u043e\u0437\u0430\u043a\u043e\u043d\u0438\u0435").setOnClick(_).setTypeName(dt.VZ_KZ)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(ct.builder().setText("\u0418\u0438\u0441\u0443\u0441\u0430 \u041d\u0430\u0432\u0438\u043d\u0430").setOnClick(_).setTypeName(dt.VZ_KI)).newLine().add(ct.builder().setText("\u0421\u0443\u0434\u0435\u0439 \u0418\u0437\u0440\u0430\u0438\u043b\u0435\u0432\u044b\u0445").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("\u0420\u0443\u0444\u0438").setOnClick(_).setTypeName(dt.VZ_KI)).newLine().add(ct.builder().setText("1 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("2 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("3 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("4 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(dt.VZ_KI)).newLine().add(ct.builder().setText("1 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("2 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("1 \u0415\u0437\u0434\u0440\u044b").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("\u041d\u0435\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KI)).newLine().setRadialSize(Math.PI).add(ct.builder().setText("2 \u0415\u0437\u0434\u0440\u044b").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("\u0422\u043e\u0432\u0438\u0442\u0430").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("\u0418\u0443\u0434\u0438\u0444\u0438").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("\u0415\u0441\u0444\u0438\u0440\u0438").setOnClick(_).setTypeName(dt.VZ_KI)).newLine(!0,!1,!1).setRadialSize(Math.PI).setAlpha0(0).add(ct.builder().setText("1 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("2 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(_).setTypeName(dt.VZ_KI)).add(ct.builder().setText("3 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(_).setTypeName(dt.VZ_KI)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(ct.builder().setText(" \u0418\u043e\u0432\u0430 ").setOnClick(_).setTypeName(dt.VZ_KU)).newLine().setAlpha0(Math.PI).setRadialSize(Math.PI).add(ct.builder().setText("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setOnClick(_).setTypeName(dt.VZ_KU)).add(ct.builder().setText("\u041f\u0440\u0438\u0442\u0447\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(_).setTypeName(dt.VZ_KU)).newLine().add(ct.builder().setText("\u042d\u043a\u043a\u043b\u0435\u0437\u0438\u0430\u0441\u0442").setOnClick(_).setTypeName(dt.VZ_KU)).add(ct.builder().setText("\u041f\u0435\u0441\u043d\u044c \u041f\u0435\u0441\u043d\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(_).setTypeName(dt.VZ_KU)).newLine().add(ct.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u0430").setOnClick(_).setTypeName(dt.VZ_KU)).add(ct.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0418\u0438\u0441\u0443\u0441\u0430").setOnClick(_).setTypeName(dt.VZ_KU)).newLine(!0,!0).setRadialSize(Math.PI).add(ct.builder().setText(" \u0418\u0441\u0430\u0438\u0438 ").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KP)).newLine().add(ct.builder().setText("\u041f\u043b\u0430\u0447 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u0435 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KP)).newLine().add(ct.builder().setText("\u0412\u0430\u0440\u0443\u0445\u0430").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0418\u0435\u0437\u0435\u043a\u0438\u043b\u044f").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0414\u0430\u043d\u0438\u0438\u043b\u0430").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u041e\u0441\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KP)).newLine().add(ct.builder().setText("\u0418\u043e\u0438\u043b\u044f").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0410\u043c\u043e\u0441\u0430").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0410\u0432\u0434\u0438\u044f").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0418\u043e\u043d\u044b").setOnClick(_).setTypeName(dt.VZ_KP)).newLine().setRadialSize(2*Math.PI).add(ct.builder().setText("\u041c\u0438\u0445\u0435\u044f").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u041d\u0430\u0443\u043c\u0430").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0410\u0432\u0432\u0430\u043a\u0443\u043c\u0430").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0421\u043e\u0444\u043e\u043d\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0410\u0433\u0433\u0435\u044f").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u0417\u0430\u0445\u0430\u0440\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("\u041c\u0430\u043b\u0430\u0445\u0438\u0438").setOnClick(_).setTypeName(dt.VZ_KP)).add(ct.builder().setText("3 \u0415\u0437\u0434\u0440\u044b").setOnClick(_).setTypeName(dt.VZ_KP)).newLine(!0,!0).setRadialSize(Math.PI).newLine().newLine().setRadialSize(2*Math.PI).add(ct.builder().setText("\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435 \u0421\u0438\u043c\u0432\u043e\u043b\u0430 \u0432\u0435\u0440\u044b").setOnClick(_).setTypeName(dt.SL_OV)).add(ct.builder().setText("\u0422\u043e\u0447\u043d\u043e\u0435 \u0438\u0437\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0432\u0435\u0440\u044b").setOnClick(_).setTypeName(dt.SL_OV)).newLine().add(ct.builder().setText("\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u0425\u0440\u0438\u0441\u0442\u0438\u0430\u043d\u0441\u043a\u0438\u0439 \u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441").setOnClick(_).setTypeName(dt.SL_OV)).add(ct.builder().setText("\u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441 \u0412\u043e\u0441\u0442\u043e\u0447\u043d\u043e\u0439 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0426\u0435\u0440\u043a\u0432\u0438").setOnClick(_).setTypeName(dt.SL_OV)).newLine().newLine(!0,!0).setRadialSize(2*Math.PI).add(ct.builder().setText("\u041c\u043e\u043b\u0438\u0442\u0432\u043e\u0441\u043b\u043e\u0432").setOnClick(_).setSize(Math.PI).setTypeName(dt.SL_BL)).add(ct.builder().setText("\u0427\u0430\u0441\u043e\u0441\u043b\u043e\u0432").setOnClick(_).setSize(Math.PI).setTypeName(dt.SL_BL)).newLine().setAlpha0(Math.PI).setRadialSize(2*Math.PI).add(ct.builder().setText("\u0411\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f").setOnClick(_).setTypeName(dt.SL_BL)).add(ct.builder().setText("\u041c\u0435\u0441\u044f\u0446\u0435\u0441\u043b\u043e\u0432").setOnClick(_).setTypeName(dt.SL_BL)).newLine().add(ct.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438, \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0438 \u0432\u0435\u043b\u0438\u0447\u0430\u043d\u0438\u044f \u043e\u0431\u0449\u0438\u0435").setOnClick(_).setTypeName(dt.SL_BL)).add(ct.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0434\u043d\u0435\u0432\u043d\u044b\u0435").setOnClick(_).setTypeName(dt.SL_BL)).newLine().add(ct.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u043d\u044b\u0435").setOnClick(_).setTypeName(dt.SL_BL)).add(ct.builder().setText("\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0414\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435").setOnClick(_).setTypeName(dt.SL_BL)).newLine().newLine().setAlpha0(0).setRadialSize(Math.PI).add(ct.builder().setText("\u0412\u0441\u0435\u043d\u043e\u0449\u043d\u043e\u0435 \u0431\u0434\u0435\u043d\u0438\u0435 \u0438 \u041b\u0438\u0442\u0443\u0440\u0433\u0438\u044f").setOnClick(_).setTypeName(dt.SL_BL)).newLine(!0,!0).setRadialSize(2*Math.PI).setAlpha0(Math.PI).add(ct.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(dt.SL_TF)).newLine().add(ct.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(dt.SL_TF)).newLine().add(ct.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(_).setTypeName(dt.SL_TF)).newLine().add(ct.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(dt.SL_TF)).newLine().newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(ct.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).newLine().setAlpha0(Math.PI/4*5).add(ct.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(_).setTypeName(dt.SL_TF)).add(ct.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(_).setTypeName(dt.SL_TF)).newLine(),v}}var _h=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2"}(_h||(_h={})),_h))();class gz{constructor(l,a=[]){this.back=l,this.texts=a,this.currentOn=!1,this.on=!1,this.forceOn=!1,this.complementedByMenuName="",this.text="",this.typeName=""}static builder(){return new gz(null)}setTypeName(l){return this.typeName=l,this}isToggledOn(){return this.on&&!this.forceOn}setBack(l){return this.back=l,this}addText(l){return this.text+=l.text,this.texts.push(l),this}setTexts(l){return this.texts=l,this}setOn(l){return this.on=l,this}setForceOn(l){return this.forceOn=l,this}setComplementedByMenuName(l){return this.complementedByMenuName=l,this}isVisible(){var l;return!(null===(l=this.back)||void 0===l||!l.visible)}setVisible(l,a,h=null){this.back.emulateCollapseTransitions().setVisible(l),this.back.apply(0,a,null,h),this.texts.forEach(d=>{d.emulateCollapseTransitions().setVisible(l),d.apply(0,a)})}setAndSwitchState(l,a,h,d=null,f="",p=""){this.on=l||this.forceOn,(l||this.back.visible)&&(this.back.emulateCollapseTransitions().setFillColor(l?f||a.colorMain:p||"#00000000"),this.back.setStrokeColor(l?f||a.colorMain:p||a.colorMain),this.back.apply(0,h,null,d),this.texts.forEach(g=>{g.emulateCollapseTransitions().setColor(l?f||a.colorBackground:p||a.colorMain).apply(0,h)}))}}var ds=(()=>(function(c){c.UP="UP",c.DOWN="DOWN",c.AROUND="AROUND"}(ds||(ds={})),ds))();class mz{constructor(){this.menuName="",this.alternative=new Map}static builder(){return new mz}getAlternative(l){let a=this.alternative.get(l);return null==a&&(a=[],this.alternative.set(l,a)),a}isPrimaryType(l){return l==ds.UP||l==ds.DOWN||l==ds.AROUND}get up(){return this.getAlternative(ds.UP)}get down(){return this.getAlternative(ds.DOWN)}get around(){return this.getAlternative(ds.AROUND)}findType(l){let a="";return null!=l&&this.alternative.forEach((h,d)=>{h.indexOf(l)>=0&&(a=d)}),a||this.menuName}switchState(l,a,h,d=null){if(l&&l.on&&l.forceOn)return;let f=this.findType(l),p=m=>{m.complementedByMenuName&&this.hideOrShowStateByType(m.complementedByMenuName,m.on,null,a,h,[m.complementedByMenuName])};l&&(l.on=l.forceOn?l.forceOn:!l.on,this.getAlternative(f).forEach(m=>{let v=!0;m!=l&&(v=m.on,m.on=m.forceOn),v&&p(m)}),this.isPrimaryType(f)||l.on?this.hideOrShowStateByType(f,!1,l,a,h,[f]):this.hideOrShowStateByType(f,!1,null,a,h,[f])),this.alternative.forEach((m,v)=>{((m,v)=>{m.forEach(y=>{if(y!=l||null==l){let _=y.on;y.on=y.forceOn,_&&y.complementedByMenuName&&p(y)}})})(m)}),l&&(this.menuName=f),d&&d()}hideOrShowMainMenu(l,a,h,d=null){let f=this.findType(l);return f&&!this.isPrimaryType(f)&&(this.getAlternative(f).filter(v=>v.isToggledOn()).length>0||this.hideOrShowStateByType(f,!1,null,a,h,[f])),this.hideOrShowStateByType(f,!((!l||l.on)&&l),l,a,h,[ds.UP,ds.DOWN,ds.AROUND],d)}hideOrShowStateByType(l,a,h,d,f,p=[],g=null){let m=!1,v=()=>m?null:(m=!0,g);p.forEach(_=>{((_,b)=>{let C=_.filter(x=>x.isToggledOn()).length>0;_.forEach(x=>{C||b||a?x.setVisible(!0,0,()=>{x.setAndSwitchState(x.on,d,f,x==h?v():null)}):x.setAndSwitchState(!1,d,f,x==h?v():()=>{x.setVisible(!1,0,v())},"#00000000","#00000000")})})(this.getAlternative(_),a&&l==_)}),!m&&g&&(m=!0,g())}addAlt(l,a){return this.getAlternative(l).push(a),this}addUp(l){return this.up.push(l),this}addDown(l){return this.down.push(l),this}addAround(l){return this.around.push(l),this}addText(l,a,h,d,f,p,g,m,v,y,_,b,C,x,S=null,w,T=!0){let O=$=>null!=S?S:$>=0&&$<=Math.PI,k=gz.builder().setTypeName(d),D=f,M=y-v,A=(y+v)/2,L=!0,E=a.textSizeDirect("_"+h+"_",m,300),V=(f+p)/2+(g+m/2)*(O(A)?1:-1),z=Math.abs(M)*V,U=m;E.width>z&&(U=Math.ceil(z/E.width*U));let Z=l.width/512*15/V;Z*=M<0?-1:1;for(let $=0;$<=h.length;$++){D=f;let H=h.substring($,$+1),j=($+0)/(h.length-1)*(M-2*Z)+v+Z,Q=O(j);L=Q;let J=pi.builder().setText(H).setTextAnchor("middle").setFontSize(`${U}px`).translate(l.width/2,l.height/2).translate(D*Math.cos(j),-D*Math.sin(j)).rotate(90-j/Math.PI*180+(Q?0:-180)).setColor("#00000000").addClass("cursor").setVisible(T).addEvent(Ui.builder().setName("click").setFunc(()=>{w&&w(k)}));D=p+g*(Q?1:-1),J.addTransition(vE.builder().setData(J.clone().setColor(l.colorMain).setTransforms([]).setVisible(T).translate(l.width/2,l.height/2).translate(D*Math.cos(j),-D*Math.sin(j)).rotate(90-j/Math.PI*180+(Q?0:-180))).setDelay(_).setDuration(b)),l.texts.push(J),k.addText(J)}D=f;let Y=D+(L?C:-C);return l.pathes.push((H=_,G=b,($=hs.builder().setDatum([]).setD(u6().innerRadius(Math.min(D,Y)).outerRadius(Math.max(D,Y)).startAngle(-Math.min(v,y)+Math.PI/2).endAngle(-Math.max(v,y)+Math.PI/2)).setStrokeWidth(l.lineWidth).setStrokeColor("#00000000").setFillColor("#00000000").setVisible(T).translate(l.width/2,l.height/2).addClass("cursor").addEvent(Ui.builder().setName("click").setFunc(()=>{w&&w(k)}))).addTransition(vE.builder().setDelay(H).setDuration(G).setData($.clone().setStrokeColor(l.colorMain).setVisible(T))),k.setBack($),$)),k;var $,H,G}}class ct{constructor(l,a,h,d,f,p,g,m){this.text=l,this.size=a,this.alpha0=h,this.typeName=d,this.complementedByTypeName=f,this.delayIndex=p,this.forceOn=g,this.onClick=m}static builder(){return new ct("",0,0,ds.UP,"",0,!1,null)}setText(l){return this.text=l,this}setSize(l){return this.size=l,this}setAlpha0(l){return this.alpha0=l,this}setTypeName(l){return this.typeName=l,this}setComplementedByTypeName(l){return this.complementedByTypeName=l,this}setDelayIndex(l){return this.delayIndex=l,this}setForceOn(l){return this.forceOn=l,this}setOnClick(l){return this.onClick=l,this}}class GKe{constructor(l,a,h,d,f,p,g,m,v){this.menu=l,this.d3Config=a,this.d3Svc=h,this.r=d,this.dr=f,this.textDr=p,this.textHeight=g,this.alpha0=m,this.delta=v,this.items=[],this.lineIndex=0,this.currentR=0,this.radialSize=2*Math.PI,this.currentR=this.r}newLine(l=!0,a=!1,h=!0){return l&&this.addLine(h),this.items=[],a&&(this.currentR=this.r),this}setAlpha0(l){return this.alpha0=l,this}setRadialSize(l){return this.radialSize=l,this}add(l){return this.items.push(l),this}addLine(l=!0){let a=this.radialSize;a-=this.items.filter(p=>p.size>0).map(p=>p.size).reduce((p,g)=>p+g,0);let d=a/this.items.filter(p=>p.size<=0).length,f=this.alpha0;return this.items.forEach(p=>{let g=p.size>0?p.size:d,m=f,v=m-g,y=Math.PI/180,_=Math.PI+y>=m&&v>=-y,b=_?this.currentR:this.currentR+this.dr;if(!_&&m>v){let S=m;m=v,v=S}let C=p.typeName==ds.UP||p.typeName==ds.DOWN||p.typeName==ds.AROUND,x=this.menu.addText(this.d3Config,this.d3Svc,p.text,p.typeName,b,b,this.textDr,this.textHeight,m,v,(C?1:0)*(this.lineIndex+p.delayIndex)*this.delta,2*this.delta,this.dr,this.d3Config.lineWidth,_,p.onClick,C).setComplementedByMenuName(p.complementedByTypeName).setForceOn(p.forceOn);this.menu.addAlt(p.typeName,x),f-=g}),l&&(this.currentR+=this.dr),++this.lineIndex,this}}class vz{constructor(l=null){this.onSelect=l}static builder(){return new vz}}class yz extends mi{constructor(l,a,h,d){super(l,a,h),this.menuState=d}static builder(){return new yz("",null,null,vz.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setOnSelect(l=null){return this.menuState.onSelect=l,this}}class QKe{constructor(l=_h.Default,a="\u0411\u0438\u0431\u043b\u0438\u044f",h=512,d=512,f=null,p=pz.builder()){this.theme=l,this.name=a,this.width=h,this.height=d,this.data=f,this.menuBuilder=p}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(l){switch(this.theme){case _h.Dark:l.colorBackground="#0e161b",l.colorMain="white";break;case _h.Light:l.colorBackground="#00364D",l.colorMain="white";break;case _h.Dark2:l.colorBackground="white",l.colorMain="#0e161b";break;case _h.Light2:l.colorBackground="white",l.colorMain="#00364D"}}getFontHeight(l){return Math.ceil(l.width/23)}generate(l,a,h){a.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!0,this.updateThemeConfig(a),a.rects=[l.createBackground(a)];let f=this.name,p=this.getFontHeight(a),g=Math.ceil(p/10*3),m=l.textSizeDirect(f.substring(0,1),p,300),v=m.height;a.circles=[];let _=50-(null==m?void 0:m.height);a.rects.push(...l.createCross(a,!1,a.width/2-_/2,a.height/2-_-(null==m?void 0:m.height)/2,_,_));let S=()=>{T.switchState(null,a,w),T.hideOrShowMainMenu(null,a,w,null),this.data&&this.data.menuState&&this.data.menuState.onSelect&&this.data.menuState.onSelect(null)};a.texts.push(pi.builder().setText(f).setTextAnchor("middle").setFontSize(`${p}px`).translate(a.width/2,a.height/2+m.height/4).rotate(0).setColor(a.colorMain).addClass("cursor").addEvent(Ui.builder().setName("click").setFunc(S))),a.circles.push(fg.builder().translate(a.width/2,a.height/2).setR(50).setFillColor("#00000000").setStrokeColor(a.colorMain).addClass("cursor").addEvent(Ui.builder().setName("click").setFunc(S)));let w=400,T=this.menuBuilder.build(l,a,()=>this.data&&this.data.menuState&&this.data.menuState.onSelect?this.data.menuState.onSelect:null,50,v,g,p,w);var O=pi.builder().setText(this.name).setTextAnchor("middle").setFontSize(`${p}px`).translate(a.width/2,50).rotate(0).setColor("none");return a.texts.push(O),a.onItemSelected=k=>{O.d3Object&&O.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",a.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(k).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}const jKe=["mySvg"],qKe=function(c){return{"fade-in-3":!0,"print-only":c}};function ZKe(c,l){if(1&c&&(lu(),ue(0,"svg",9,10)),2&c){const a=q();R("ngClass",ys(1,qKe,a.printOnly))}}const L0=function(c){return{centeredImage:!0,"fade-in-3":!0,"print-only":c}};function XKe(c,l){if(1&c&&(lu(),ue(0,"svg",11,10)),2&c){const a=q();R("ngClass",ys(1,L0,a.printOnly))}}function YKe(c,l){if(1&c&&(lu(),ue(0,"svg",12,10)),2&c){const a=q();R("ngClass",ys(1,L0,a.printOnly))}}const KKe=function(c){return{centeredImage:!1,"fade-in-3":!0,"print-only":c}};function JKe(c,l){if(1&c&&(lu(),ue(0,"svg",13,10)),2&c){const a=q();R("ngClass",ys(1,KKe,a.printOnly))}}function eJe(c,l){if(1&c&&(lu(),ue(0,"svg",14,10)),2&c){const a=q();R("ngClass",ys(1,L0,a.printOnly))}}function tJe(c,l){if(1&c&&(lu(),ue(0,"svg",15,10)),2&c){const a=q();R("ngClass",ys(1,L0,a.printOnly))}}function nJe(c,l){if(1&c&&(lu(),ue(0,"svg",16,10)),2&c){const a=q();R("ngClass",ys(1,L0,a.printOnly))}}function iJe(c,l){if(1&c&&(lu(),ue(0,"svg",17,10)),2&c){const a=q();R("ngClass",ys(1,L0,a.printOnly))}}function rJe(c,l){if(1&c&&(lu(),ue(0,"svg",18,10)),2&c){const a=q();R("ngClass",ys(1,L0,a.printOnly))}}class da{constructor(l,a,h,d){this.generator=l,this.onCreate=a,this.onUpdate=h,this.onSend=d}create(){this.onCreate&&this.onCreate(this)}update(){return!!this.onUpdate&&this.onUpdate(this)}send(){this.onSend&&this.onSend(this)}}class Va{constructor(l="JsScheduler",a="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",h="/scenes/app.logo.scene.txt",d=null,f=210,p=297,g=0,m=null,v=0,y=1,_=1,b=!0,C=""){this.genName=l,this.logoText=a,this.scene=h,this.tag=d,this.svgWidth=f,this.svgHeight=p,this.type=g,this.generator=m,this.startPageIndex=v,this.horizontalPagesCount=y,this.verticalPagesCount=_,this.showFooter=b,this.schedulerText=C}static builder(){return new Va}setGenName(l){return this.genName=l,this}setLogoText(l){return this.logoText=l,this}setScene(l){return this.scene=l,this}setTag(l){return this.tag=l,this}setSvgWidth(l){return this.svgWidth=l,this}setSvgHeight(l){return this.svgHeight=l,this}setType(l){return this.type=l,this}setGenerator(l){return this.generator=l,this}setStartPageIndex(l){return this.startPageIndex=l,this}setHorizontalPagesCount(l){return this.horizontalPagesCount=l,this}setVerticalPagesCount(l){return this.verticalPagesCount=l,this}setShowFooter(l){return this.showFooter=l,this}setSchedulerText(l){return this.schedulerText=l,this}clone(){return Va.builder().setGenName(this.genName).setScene(this.scene).setTag(this.tag).setSvgWidth(this.svgWidth).setSvgHeight(this.svgHeight).setType(this.type).setGenerator(this.generator).setStartPageIndex(this.startPageIndex).setHorizontalPagesCount(this.horizontalPagesCount).setVerticalPagesCount(this.verticalPagesCount).setShowFooter(this.showFooter).setSchedulerText(this.schedulerText)}}let Zl=(()=>{class c{constructor(a,h,d,f){this.config=a,this.d3Svc=h,this.cacheService=d,this.themesService=f,this.name="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",this.svgImage=null,this.generator=null,this.allReady=!1,this.svgData=Va.builder(),this.updateSvgAction=new tJ(p=>{this.changed()},100,(p,g)=>this.config.post(g,p)),this.printOnly=!1,this.pagesCount=new wt,this.svg=new wt,this.onCommand=new wt,this.onPreviewCommand=new wt}get data(){return this.svgData}set data(a){this.svgData=a,this.config.post(()=>{this.recreate()})}set type(a){switch(this.svgData.type!=a&&this.config.post(()=>{this.recreate()}),this.svgData.setType(a),a){default:case 0:this.svgData.setSvgWidth(210).setSvgHeight(297);break;case 297210:this.svgData.setSvgWidth(297).setSvgHeight(210)}}get type(){return this.svgData.type}get scene(){return this.data.scene}set scene(a){this.data.scene=a,this.updateSvgAction.requestAction(void 0)}get logoText(){return this.data.logoText}set logoText(a){this.data.logoText=a,this.changed()}set genName(a){this.data.genName=a}get genName(){return this.data.genName}get tag(){return this.data.tag}set tag(a){this.data.tag=a,this.generator&&this.changed()}get iStartPageIndex(){return this.svgData?this.svgData.startPageIndex:0}set iStartPageIndex(a){this.svgData&&(this.svgData.startPageIndex=a)}get iHorizontalPagesCount(){return this.svgData?this.svgData.horizontalPagesCount:1}set iHorizontalPagesCount(a){this.svgData&&(this.svgData.horizontalPagesCount=a)}get iVerticalPagesCount(){return this.svgData?this.svgData.verticalPagesCount:1}set iVerticalPagesCount(a){this.svgData&&(this.svgData.verticalPagesCount=a)}get startPageIndex(){return this.iStartPageIndex}set startPageIndex(a){this.iStartPageIndex=a,this.updateSvgAction.requestAction(void 0)}get horizontalPagesCount(){return this.iHorizontalPagesCount}set horizontalPagesCount(a){this.iHorizontalPagesCount=a,this.updateSvgAction.requestAction(void 0)}get verticalPagesCount(){return this.iVerticalPagesCount}set verticalPagesCount(a){this.iVerticalPagesCount=a,this.updateSvgAction.requestAction(void 0)}get showFooter(){return!this.svgData||this.svgData.showFooter}set showFooter(a){this.svgData.showFooter=a}set svgWidth(a){this.svgData.svgWidth=a}get svgWidth(){return this.svgData.svgWidth}set svgHeight(a){this.svgData.svgHeight=a}get svgHeight(){return this.svgData.svgHeight}get sSchedulerText(){return this.svgData?this.svgData.schedulerText:""}set sSchedulerText(a){this.svgData&&(this.svgData.schedulerText=a)}get schedulerText(){return this.sSchedulerText}set schedulerText(a){this.sSchedulerText!=a&&(this.sSchedulerText=a,this.changed())}ngOnInit(){}get version(){return this.config.environment.version}resetVars(){this.iStartPageIndex=0,this.iHorizontalPagesCount=1,this.iVerticalPagesCount=1}newGenerator(){let a=h=>new da(new Jue(h,this.svgWidth,this.svgHeight),()=>{var d;let f=[];this.tag?f.push(...this.tag.commands.map(m=>({cmd:m,enabled:!0}))):this.config.environment.applications.forEach(g=>{f.push({cmd:La.builder().setName(g.name).setTag(g),enabled:g.applicationEnabled&&!g.applicationHidden})});let p=f.find(g=>{var m;return(null===(m=g.cmd.tag)||void 0===m?void 0:m.id)==this.config.defaultApplication});p||(p=f[0],p.cmd.tag&&p.cmd.tag.id&&(this.config.defaultApplication=p.cmd.tag.id)),(null===(d=this.generator)||void 0===d?void 0:d.generator).setCommands(f.filter(g=>g.enabled).map(g=>g.cmd),p?p.cmd:null).setOnCommandHandler(g=>{this.sendCommand(g.tag)}).setOnPreviewCommandHandler(g=>{this.sendPreviewCommand(g.tag)})},d=>{if(this.tag){let p=d.generator.setCommands(this.tag.commands).isGenerated();return d.generator.regenerate(),p}return!1},()=>{});return"Logo"==this.genName?new da(new e1(this.themesService.nowIsDay()?_l.Light:_l.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight"==this.genName?new da(new e1(_l.Light,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark"==this.genName?new da(new e1(_l.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight2"==this.genName?new da(new e1(_l.Light2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark2"==this.genName?new da(new e1(_l.Dark2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Default"==this.genName?new da(new yl("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Texts"==this.genName?new da(new Que("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Circles"==this.genName?new da(new jue("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Ellipses"==this.genName?new da(new que("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Rects"==this.genName?new da(new Zue("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Graphics"==this.genName?new da(new Xue("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Animation"==this.genName?new da(new Yue("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"UIInteraction"==this.genName?new da(new Kue("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"BibleMenu"==this.genName?new da(new QKe(this.themesService.nowIsDay()?_h.Light:_h.Dark,"\u0411\u0438\u0431\u043b\u0438\u044f",this.svgWidth,this.svgHeight,this.tag),()=>{},()=>!1,()=>{}):"Menu"==this.genName?a(this.themesService.nowIsDay()?Lo.Light:Lo.Dark):"MenuDay"==this.genName?a(Lo.Light):"MenuDay2"==this.genName?a(Lo.Light2):"MenuNight"==this.genName?a(Lo.Dark):"MenuNight2"==this.genName?a(Lo.Dark2):"this"==this.genName&&this.svgData.generator?new da(this.svgData.generator,()=>{},()=>!1,()=>{}):new da(new $6(this.svgWidth,this.svgHeight),h=>{h.generator.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService,this.scene).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText)},h=>(h.generator.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText),!1),h=>{this.pagesCount.emit(h.generator.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446())})}ngAfterViewInit(){this.allReady=!0,this.recreate()}recreate(){!this.allReady||this.mySvgRef&&(this.generator=this.newGenerator(),this.generator.create(),this.svgImage=new E6(this.generator.generator.getWidth(),this.generator.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator.generator),this.svgImage.updateSvg(()=>{var a;this.generator.update(),this.saveSvg(),null===(a=this.generator)||void 0===a||a.send()}))}changed(){this.generator&&(this.generator.update()||this.svgImage.clear().updateSvg(()=>{var a;null===(a=this.generator)||void 0===a||a.send(),this.saveSvg()}))}saveSvg(){var a=this.mySvgRef.nativeElement,d=(new XMLSerializer).serializeToString(a);d.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(d=d.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),d.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(d=d.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),this.svg.emit(d='<?xml version="1.0" standalone="no"?>\r\n'+d)}sendCommand(a){this.onCommand.emit(a)}sendPreviewCommand(a){this.onPreviewCommand.emit(a)}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(yE),B(wd),B(go))},c.\u0275cmp=je({type:c,selectors:[["app-svg-js-image"]],viewQuery:function(a,h){if(1&a&&ci(jKe,5),2&a){let d;Ht(d=$t())&&(h.mySvgRef=d.first)}},inputs:{data:"data",type:"type",printOnly:"printOnly",scene:"scene",logoText:"logoText",genName:"genName",tag:"tag",startPageIndex:"startPageIndex",horizontalPagesCount:"horizontalPagesCount",verticalPagesCount:"verticalPagesCount",showFooter:"showFooter",svgWidth:"svgWidth",svgHeight:"svgHeight",schedulerText:"schedulerText"},outputs:{pagesCount:"pagesCount",svg:"svg",onCommand:"onCommand",onPreviewCommand:"onPreviewCommand"},decls:9,vars:9,consts:[["width","100%","height","100%",3,"ngClass",4,"ngIf"],["width","2100","height","2970",3,"ngClass",4,"ngIf"],["width","2970","height","2100",3,"ngClass",4,"ngIf"],["width","114","height","114",3,"ngClass",4,"ngIf"],["width","5120","height","5120",3,"ngClass",4,"ngIf"],["width","5000","height","2000",3,"ngClass",4,"ngIf"],["width","4000","height","2000",3,"ngClass",4,"ngIf"],["width","3000","height","2000",3,"ngClass",4,"ngIf"],["width","5120","height","1280",3,"ngClass",4,"ngIf"],["width","100%","height","100%",3,"ngClass"],["mySvg",""],["width","2100","height","2970",3,"ngClass"],["width","2970","height","2100",3,"ngClass"],["width","114","height","114",3,"ngClass"],["width","5120","height","5120",3,"ngClass"],["width","5000","height","2000",3,"ngClass"],["width","4000","height","2000",3,"ngClass"],["width","3000","height","2000",3,"ngClass"],["width","5120","height","1280",3,"ngClass"]],template:function(a,h){1&a&&(X(0,ZKe,2,3,"svg",0),X(1,XKe,2,3,"svg",1),X(2,YKe,2,3,"svg",2),X(3,JKe,2,3,"svg",3),X(4,eJe,2,3,"svg",4),X(5,tJe,2,3,"svg",5),X(6,nJe,2,3,"svg",6),X(7,iJe,2,3,"svg",7),X(8,rJe,2,3,"svg",8)),2&a&&(R("ngIf",0==h.type),P(1),R("ngIf",1==h.type),P(1),R("ngIf",297210==h.type),P(1),R("ngIf",114==h.type),P(1),R("ngIf",512==h.type),P(1),R("ngIf",500200==h.type),P(1),R("ngIf",400200==h.type),P(1),R("ngIf",300200==h.type),P(1),R("ngIf",512128==h.type))},dependencies:[si,_n],styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),c})();const sJe=["mySvg"];let _he=(()=>{class c{constructor(a,h){this.d3Svc=a,this.config=h,this.svgImage=null,this.inited=!1,this.igen=null,this.cfgD3Config=null,this.iWidth=512,this.iHeight=512}get d3Config(){return this.cfgD3Config}set d3Config(a){this.cfgD3Config=a,this.svgImage&&this.setup(!0)}set generator(a){this.igen=a}get generator(){return this.igen}get width(){return this.svgImage&&this.iWidth!=this.svgImage.logoWidth&&this.updateSize(),this.iWidth}get height(){return this.svgImage&&this.iHeight!=this.svgImage.logoHeight&&this.updateSize(),this.iHeight}updateSize(){this.config.post(()=>{this.svgImage&&(this.iWidth=this.svgImage.logoWidth,this.iHeight=this.svgImage.logoHeight)})}setup(a=!1){this.inited&&!a||(this.generator&&(this.svgImage=new E6(this.generator.getWidth(),this.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator,null,this.d3Config),this.svgImage.updateSvg()),this.inited=!0)}ngOnInit(){}ngAfterViewInit(){this.setup()}}return c.\u0275fac=function(a){return new(a||c)(B(yE),B(on))},c.\u0275cmp=je({type:c,selectors:[["app-d3-svg"]],viewQuery:function(a,h){if(1&a&&ci(sJe,5),2&a){let d;Ht(d=$t())&&(h.mySvgRef=d.first)}},inputs:{d3Config:"d3Config",generator:"generator"},decls:2,vars:2,consts:[[1,"centeredImage","fade-in-3"],["mySvg",""]],template:function(a,h){1&a&&(lu(),ue(0,"svg",0,1)),2&a&&et("width",h.width)("height",h.height)},styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),c})();const oJe=["myCanvas"],aJe=["mySvgMulti"];function lJe(c,l){if(1&c&&ue(0,"app-d3-svg",7),2&c){const a=l.$implicit;R("generator",a.generator)("d3Config",a.d3Config)}}function cJe(c,l){if(1&c){const a=at();I(0,"div",8)(1,"app-svg-js-image",9),ee("svg",function(d){const p=De(a).$implicit;return ke(q().onSaveSvg(p.genName,d))}),F()()}if(2&c){const a=l.$implicit;P(1),R("svgWidth",a.width)("svgHeight",a.height)("scene",a.scene)("genName",a.genName)}}class Pc{constructor(l,a,h,d){this.width=l,this.height=a,this.scene=h,this.genName=d}}class _z{constructor(l,a){this.generator=l,this.d3Config=a}static builder(){return new _z(null,null)}setGenerator(l){return this.generator=l,this}setD3Config(l){return this.d3Config=l,this}}let uJe=(()=>{class c{constructor(a,h,d,f,p,g){this.config=a,this.uiConfig=h,this.d3Svc=d,this.themeSvc=f,this.cacheService=p,this.ks=g,this.generators=[],this.svgImage2=[],this.svgJsImages=[new Pc(512,512,"/scenes/cross.scene.txt","Logo"),new Pc(512,512,"/scenes/cross.scene.txt","LogoLight"),new Pc(512,512,"/scenes/cross.scene.txt","LogoLight2"),new Pc(512,512,"/scenes/cross.scene.txt","LogoDark"),new Pc(512,512,"/scenes/cross.scene.txt","LogoDark2"),new Pc(512,512,"/scenes/cross.scene.txt","Default"),new Pc(512,512,"/scenes/cross.scene.txt","Texts"),new Pc(512,512,"/scenes/cross.scene.txt","Circles"),new Pc(512,512,"/scenes/cross.scene.txt","Ellipses"),new Pc(512,512,"/scenes/cross.scene.txt","Rects"),new Pc(512,512,"/scenes/cross.scene.txt","Graphics"),new Pc(512,512,"/scenes/cross.scene.txt","Animation"),new Pc(512,512,"/scenes/cross.scene.txt","UIInteraction")],this.svgSaved=new Map}ngOnInit(){this.uiConfig.setAppRoutes(null)}addGenerator(a,h=null){return this.generators.push(_z.builder().setGenerator(a).setD3Config(h)),(a instanceof the||a instanceof $6)&&a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService),this}ngAfterViewInit(){let f=this.themeSvc.nowIsDay()?"black":"white";this.addGenerator(new VE,I0.builder().setColorBackground("").setColorMain(f).setColorText(f).setColorLines(f).setLineWidth(1).addParam("\u0442\u0435\u043a\u0441\u0442","integral(x*sin(x),x);.")),this.addGenerator(new yl),this.addGenerator(new Que),this.addGenerator(new jue),this.addGenerator(new que),this.addGenerator(new Zue),this.addGenerator(new Xue),this.addGenerator(new Yue),this.addGenerator(new Kue),this.addGenerator(new e1);let p=this.generators[this.generators.length-1];p&&p.generator&&this.svgImage2.push(new E6(p.generator.getWidth(),p.generator.getHeight(),this.d3Svc,this.mySvgMultiRef,p.generator)),this.addGenerator((()=>(new _E).setTheme(this.themeSvc.nowIsDay()?js.Light3:js.Dark3))()),this.addGenerator((()=>{let g=new ehe,m=[bl.builder().setName("\u0414\u0435\u043a\u0430\u0431\u0440\u044c").setIndex(0).setIWidth(7)];["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].forEach((_,b)=>{m.push(bl.builder().setName(_).setIndex(b+7).setIWidth(1))});for(let _=0;_<31;_++){let b=""+(_+1);m.push(bl.builder().setName(b).setIndex(_+16).setIWidth(1))}return g.setTheme(this.themeSvc.nowIsDay()?Jo.Light3:Jo.Dark3).setCommands(m).setOnCommandHandler(_=>{let b=["black","#d94a4a","#DFF0D0","#4aaed9"],C=_.tag;C||(C=b[0]);let x=b.indexOf(C);x=(x+1)%b.length,C=b[x],_.tag=C,_.rect.d3Object.transition().duration(1e3).style("fill",C),_.text.d3Object.transition().duration(1e3).style("fill","black"==C?"white":"black").style("stroke","black"==C?"white":"black").style("stroke-width",0)})})()),this.addGenerator(new the),this.addGenerator((new $6).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430","\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")),this.addGenerator((()=>(new Jue).setTheme(this.themeSvc.nowIsDay()?Lo.Light2:Lo.Dark2).setCommands(this.generators.map((g,m)=>La.builder().setName(g.generator.name).setTag(m))).setOnCommandHandler(g=>{let m=this.generators[g.tag];m&&m.generator&&this.svgImage2[0].setGenerator(m.generator).clear().updateSvg()}).setAutoClickOnChange(!0))()),this.svgImage2.forEach(g=>{g.updateSvg()})}downloadAllImages(){this.onSaveSvgDirect()}onSaveSvg(a,h){this.svgSaved.set(a,h)}onSaveSvgDirect(a=1){const h=new IE;this.svgSaved.forEach((m,v)=>{h.file("page"+v+".svg",m)});let d='<html>\n<head>\n    <style type="text/css">\n    .centeredImage {\n      max-width: 100%;\n      max-height: 100%;\n      width: auto;\n      height: auto;\n    }\n</style>\n</head>\n<body>';this.svgSaved.forEach((m,v,y)=>{d+=`<div><img src="page${v}.svg" width="630" height="891" alt="page${v}" class="centeredImage"></div>`}),d+="</body></html>",h.file("pages.html",d);let f=new Date,p=(m,v)=>{let y=""+m;for(;y.length<v;)y="0"+y;return y},g=f.getFullYear()+"_"+p(f.getMonth()+1,2)+"_"+p(f.getDate(),2);h.generateAsync({type:"blob"}).then(m=>{const v=new Blob([m],{type:"octet/stream"}),y=`\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u044b.${g}.zip`;this.config.isPlatformAndroid()?this.ks.addTempFile(y,v).then(_=>{jf.startDownload(_.fileName,y)}):jf.saveData(v,y)})}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yE),B(go),B(wd),B(_g))},c.\u0275cmp=je({type:c,selectors:[["app-d3-examples"]],viewQuery:function(a,h){if(1&a&&(ci(oJe,5),ci(aJe,5)),2&a){let d;Ht(d=$t())&&(h.myCanvasRef=d.first),Ht(d=$t())&&(h.mySvgMultiRef=d.first)}},decls:11,vars:2,consts:[["id","load-font"],[3,"generator","d3Config",4,"ngFor","ngForOf"],["class","h512",4,"ngFor","ngForOf"],["width","512","height","512",1,"centeredImage","fade-in-3"],["mySvgMulti",""],[1,"no-print"],[1,"btn","btn-success","btn-block","ucs","center","top-space",3,"click"],[3,"generator","d3Config"],[1,"h512"],[3,"svgWidth","svgHeight","scene","genName","svg"]],template:function(a,h){1&a&&(I(0,"div")(1,"div",0),ie(2,"\u0411\u043b\u0483\u0436\u0435\u0301\u043d\u044a \u043c\ua64b\u0301\u0436\u044a"),F(),X(3,lJe,1,2,"app-d3-svg",1),X(4,cJe,2,4,"div",2),lu(),ue(5,"svg",3,4),function LG(){!function fxe(){_i.lFrame.currentNamespace=null}()}(),I(7,"div")(8,"div",5)(9,"button",6),ee("click",function(){return h.downloadAllImages()}),ie(10,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),F()()()()),2&a&&(P(3),R("ngForOf",h.generators),P(1),R("ngForOf",h.svgJsImages))},dependencies:[fi,Zl,_he],styles:[".h512[_ngcontent-%COMP%]{height:512px;width:512px}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}.rxanimated[_ngcontent-%COMP%]{animation:rxakf 3s linear infinite;stroke:#00f;fill:green;rx:1!important;width:50px!important}@keyframes rxakf{0%{rx:100;ry:1}50%{rx:400;ry:4}to{rx:100;ry:1}}.ani[_ngcontent-%COMP%]{animation:moveCircle 4s linear infinite}@keyframes moveCircle{0%{rx:1}50%{rx:4}to{rx:1}}"]}),c})();class hJe{constructor(l,a){this.zipService=l,this.cacheService=a}}class Rc{constructor(l,a){this.action=l,this.name=a,this.from=null,this.upto=null,this.onStop=null,this.config=null}static of(l,a){return new Rc(l,a)}start(l,a=null){this.config=a,this.onStop=l,this.from=new Date}stop(){this.upto=new Date}getTime(){return this.upto.getTime()-this.from.getTime()}str(l,a){for(;l.length<a;)l="0"+l;return l}getTimeString(){let l=this.upto.getTime()-this.from.getTime(),a=Math.floor(l/1e3),h=Math.floor(a/60),d=Math.floor(h/60);return l-=1e3*a,a-=60*h,h-=60*d,this.str(""+d,2)+":"+this.str(""+h,2)+":"+this.str(""+a,2)+"."+this.str(""+l,3)+" \u043e\u0442 "+this.from.toISOString()}toString(){return this.getTimeString()}stopAndGetResult(l){return this.stop(),GE.of(this.name,l,this.getTimeString())}sendAndGetResult(l){return this.onStop(l,this)}delay(l,a){return setTimeout(()=>{l&&l()},a),GE.of("","","")}}class GE{constructor(l,a,h){this.name=l,this.error=a,this.info=h}static of(l,a,h){return new GE(l,a,h)}}class pS extends fe{constructor(){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),null,new Map),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(l){let a=pS.\u043d\u043e\u0432\u044b\u0439();l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0440\u0438\u043c\u0435\u0440",(h,d)=>a,!0)}static \u043d\u043e\u0432\u044b\u0439(){return new pS}static \u043d\u043e\u0432\u044b\u0439\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u041f\u0440\u0438\u043c\u0435\u0440(){return new pS}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let l=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();l.set("\u0435\u0434\u0438\u043d\u0438\u0446\u0430",fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1)),l.set("\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0435\u0434\u0438\u043d\u0438\u0446\u0430")])]))))),l.set("\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[1].\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+10))))))}}class gS extends fe{constructor(){super(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u0430\u0440\u0441\u0435\u0440"),null,new Map),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(l){let a=gS.\u043d\u043e\u0432\u044b\u0439();l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0430\u0440\u0441\u0435\u0440",(h,d)=>a,!0)}static \u043d\u043e\u0432\u044b\u0439(){return new gS}static \u043d\u043e\u0432\u044b\u0439\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0430\u0440\u0441\u0435\u0440(){return new gS}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(l){return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(l))}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let l=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();l.set("\u0435\u0434\u0438\u043d\u0438\u0446\u0430",fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1)),l.set("\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0435\u0434\u0438\u043d\u0438\u0446\u0430")])]))))),l.set("\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((a,h)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[1].\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+10))))))}}class B0{constructor(l,a){this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=l,this.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a}static \u043d\u043e\u0432\u044b\u0439(){return new B0(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l){return this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430="string"==typeof l?fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l):l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(l){return this.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=l,this}}class fa{static tests(){return[Rc.of(fa.\u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439: \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),Rc.of(fa.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439: \u0441\u0430\u043c \u043f\u0430\u0440\u0441\u0435\u0440"),Rc.of(fa.\u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),Rc.of(fa.\u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),Rc.of(fa.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),Rc.of(fa.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434,"\u0442\u0435\u0441\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 (\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043a\u043e\u0434)"),Rc.of(fa.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 (\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043a\u043e\u0434) \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439")]}static \u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(l,a,h){return B0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a.map(d=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)))).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(h)}static \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(l){let a="",h=new wu;return h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0443\u043c\u043c\u0430",(f,p)=>p[0].\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()+f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),!0),h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u0441\u0443\u043c\u043c\u0430",(f,p)=>p[0].\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()+f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),!0),h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",(f,p)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.min(f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),!0),h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",(f,p)=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.max(f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),!0),[fa.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u0441\u0443\u043c\u043c\u0430",[1,2],3),fa.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",[1,2],1),fa.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",[1,2],2),fa.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0441\u0443\u043c\u043c\u0430",[1,2],3),fa.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0441\u0443\u043c\u043c\u0430",["1","2"],"12"),B0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(()=>fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f."))).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f."),B0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. (2)")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. (2)")].forEach((f,p)=>{let g=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f.\u043a\u043e\u043c\u0430\u043d\u0434\u0430);g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=f.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${g}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${f.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442}; \u0438\u043d\u0434\u0435\u043a\u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u044b: ${p}.`)}),l.sendAndGetResult(a)}static \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(l){let a="",h=new wu;h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e();let d=[ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(2)])]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])],f=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d),[],null,!0,!0,!1,null),p=4;f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=p&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${p}`);let g=[ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];f=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g),[],null,!0,!0,!1,null),p=1,f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=p&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${p}`);let m=[ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u044d\u043d\u0435\u0440\u0433\u0438\u0447\u043d\u043e\u0435 \u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];return f=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m),[],null,!0,!0,!1,null),p=2,f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=p&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${p}`),l.sendAndGetResult(a)}static \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(l){let a="",h=new wu;h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e();let d=[ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)])],f=[ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d),[],null,!0,!0,!1,null);for(let p=1;p<5;p++){let g=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f),[],null,!0,!0,!1,null),m=p;g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=m&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${g}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${m}`)}return l.sendAndGetResult(a)}static \u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(l){return l.split(/\/\/EOT/).map(f=>f.trim()).filter(f=>!!f).map(f=>{let p=f.trim().split("\n").map(v=>v.trimRight()),g=p[p.length-1],m="//null"===g?null:+g.substr(2);return B0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p.filter(v=>!v.startsWith("//")).join("\r\n")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(m)})}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(l,a="/tests/universal_engine/all_tests.txt"){return l.delay(()=>{let d=l.config.cacheService.getRestPoint(a,null);l.config.cacheService.getTextRestcallUrl(d,f=>{try{let p="",g=new F0,m=fa.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(f),v=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m.forEach((y,_)=>{console.log("------------------------------"),console.log(y.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let b=g.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(y.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),C=new wu;C.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),C.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",(x,S)=>{var w=S[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();if("\u0435\u0434\u0438\u043d\u0438\u0446\u0430"===w)return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f"===w)return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430")])]))));if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f"===w){let T=g.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n                  \u0440\u0430\u0437\u0431\u043e\u0440 \u043c\u0435\u0442\u043e\u0434\u0430 \u0438\u043c\u044f(\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440){\n                    \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n                  }\n                  ");return x.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(T[0],null)}return null},!0);{let x=C.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(b),[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),v],[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c")],!0,!0,!1,null)),S=y.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!x||x.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=S)&&(p+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${x?x.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${S}`,console.log(`\u041e\u0448\u0438\u0431\u043a\u0430: #${_}: ${x?x.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null} == ${S}`))}}),l.sendAndGetResult(p)}catch(p){l.sendAndGetResult("Error: "+p)}})},1)}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434(l){let a="",h=new F0;return[B0.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443('\n        \u043a\u043b\u0430\u0441\u0441\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430 = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0435\u0434\u0438\u043d\u0438\u0446\u0430");\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f");\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f");\n          \u0435\u0449\u0451\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(\u0437\u043d\u0430\u0447){\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0437\u043d\u0430\u0447 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n          }\n          \u0431\u0430\u0437\u043e\u0432\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442){\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(12)\n              + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(12)\n              + \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 + \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442\n              + \u0435\u0449\u0451\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(2)\n            ;\n          }\n        };\n        \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430();\n        \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440.\u0431\u0430\u0437\u043e\u0432\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(70,1);\n      ').\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(100)].forEach(d=>{let f=h.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(d.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());console.log("------------------------------"),console.log(d.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let p=new wu;p.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(h),p.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),p.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",(g,m)=>{var v=m[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();if("\u0435\u0434\u0438\u043d\u0438\u0446\u0430"===v)return fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f"===v)return g.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ut.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430")])]))));if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f"===v){let y=h.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n              \u0440\u0430\u0437\u0431\u043e\u0440 \u043c\u0435\u0442\u043e\u0434\u0430 \u0438\u043c\u044f(\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440){\n                \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n              }\n            ");return g.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(y[0],null)}return null},!0);{let g=p.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f),[],null,!0,!0,!1,null)),m=d.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!g||g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=m)&&(a+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${g?g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${m}`)}}),l.sendAndGetResult(a)}static \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(l,a="/tests/universal_engine/dynamic_objects_tests.txt"){return l.delay(()=>{let d=l.config.cacheService.getRestPoint(a,null);l.config.cacheService.getTextRestcallUrl(d,f=>{try{let p="",g=new F0;fa.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(f).forEach(v=>{console.log("------------------------------"),console.log(v.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let y=g.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(v.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),_=new wu;_.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),pS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(_);{let b=_.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y),[],null,!0,!0,!1,null)),C=v.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!b||b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=C)&&(p+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${b?b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${C}`)}}),l.sendAndGetResult(p)}catch(p){l.sendAndGetResult("Error: "+p)}})},1)}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(l,a="/tests/universal_engine/parser_tests.txt"){return l.delay(()=>{let d=l.config.cacheService.getRestPoint(a,null);l.config.cacheService.getTextRestcallUrl(d,f=>{try{let p="",g=new F0;fa.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(f).forEach(v=>{console.log("------------------------------"),console.log(v.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let y=g.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(v.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),_=new wu;_.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),gS.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(_);{let b=_.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y),[],null,!0,!0,!1,null)),C=v.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!b||b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=C)&&(p+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${b?b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${C}`)}}),l.sendAndGetResult(p)}catch(p){l.sendAndGetResult("Error: "+p)}})},1)}}class QE{constructor(l,a){this.fileName=l,this.content=a}static builder(){return new QE("","")}setFileName(l){return this.fileName=l,this}setContent(l){return this.content=l,this}}let bz=(()=>{class c{zip(a){return new Promise((h,d)=>{const f=new IE;a.forEach(p=>{p.content&&f.file(p.fileName,p.content)}),f.generateAsync({type:"blob"}).then(p=>{p.arrayBuffer().then(g=>{h(g)})})})}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();function dJe(c,l){1&c&&ue(0,"clr-icon",7)}function fJe(c,l){1&c&&ue(0,"clr-icon",8)}const bhe=function(c,l){return{"bg-4":c,"bg-6":l}};function pJe(c,l){if(1&c&&(I(0,"div")(1,"span",3),X(2,dJe,1,0,"clr-icon",4),X(3,fJe,1,0,"clr-icon",5),F(),I(4,"span",6),ie(5),F(),I(6,"span"),ie(7),F(),I(8,"span",3),ie(9),F(),I(10,"span"),ie(11),F()()),2&c){const a=l.$implicit,h=l.index;P(1),R("ngClass",as(8,bhe,!a.error,!!a.error)),P(1),R("ngIf",!!a.error),P(1),R("ngIf",!a.error),P(2),Ti(" ",h+1," "),P(2),Ti("",a.name,": "),P(1),R("ngClass",as(11,bhe,!a.error,!!a.error)),P(1),Ut(a.error?a.error:"\u0443\u0441\u043f\u0435\u0448\u043d\u043e"),P(2),Ti(" (",a.info,")")}}function gJe(c,l){1&c&&(I(0,"div"),ue(1,"clr-icon",8),ie(2," \u0412\u0441\u0435 \u0442\u0435\u0441\u0442\u044b \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u044b. "),F())}function mJe(c,l){1&c&&(I(0,"div")(1,"span",9),ie(2," \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u044e... "),F()())}let vJe=(()=>{class c{constructor(a,h,d){var p;this.config=a,this.zipService=h,this.cacheService=d,this.testResults=[],this.tests=[],this.testConfig=null,this.tests.push(...(p=fa.tests(),"UniversalEngineTest::",p.map(v=>(v.name="UniversalEngineTest::"+v.name,v)))),this.testConfig=new hJe(this.zipService,this.cacheService)}static tests(){return[Rc.of(c.firstTest,"\u041f\u0435\u0440\u0432\u044b\u0439 \u0442\u0435\u0441\u0442"),Rc.of(c.secondTest,"\u0412\u0442\u043e\u0440\u043e\u0439 \u0442\u0435\u0441\u0442"),Rc.of(c.thirdTest,"\u0422\u0440\u0435\u0442\u0438\u0439 \u0442\u0435\u0441\u0442"),Rc.of(c.forthTest,"\u0427\u0435\u0442\u0432\u0451\u0440\u0442\u044b\u0439 \u0442\u0435\u0441\u0442")]}static firstTest(a){return a.sendAndGetResult("")}static secondTest(a){return a.sendAndGetResult("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static thirdTest(a){throw new Error("\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0442\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static forthTest(a){return a.delay(()=>a.sendAndGetResult(""),1200)}ngOnInit(){}runTests(){this.testResults=[];let a=0,h=()=>{if(a>=this.tests.length)return;let d=null,f=null;try{f=this.tests[a++],f.start((p,g)=>{let m=g.stopAndGetResult(p);return m&&this.testResults.push(m),this.config.post(h,1),m},this.testConfig),d=f.action(f),d||(d=f.sendAndGetResult("\u041d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430."))}catch(p){d=f.sendAndGetResult(""+p)}};this.config.post(h,1)}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(bz),B(wd))},c.\u0275cmp=je({type:c,selectors:[["app-tests"]],decls:6,vars:3,consts:[[1,"btn","btn-primary","btn-block",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],["shape","times",4,"ngIf"],["shape","check",4,"ngIf"],[1,"red"],["shape","times"],["shape","check"],[1,"spinner","spinner-inline"]],template:function(a,h){1&a&&(I(0,"div")(1,"button",0),ee("click",function(){return h.runTests()}),ie(2,"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0442\u0435\u0441\u0442\u044b"),F(),X(3,pJe,12,14,"div",1),X(4,gJe,3,0,"div",2),X(5,mJe,3,0,"div",2),F()),2&a&&(P(3),R("ngForOf",h.testResults),P(1),R("ngIf",h.testResults.length==h.tests.length),P(1),R("ngIf",h.testResults.length!=h.tests.length&&h.testResults.length>0))},dependencies:[si,fi,_n,eo],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();function yJe(c,l){if(1&c&&(I(0,"div",7),ue(1,"app-svg-js-image",8),F()),2&c){const a=l.$implicit,h=q();P(1),R("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h.logText)("type",1)("startPageIndex",a)("horizontalPagesCount",h.horizontalPagesCount)("verticalPagesCount",h.verticalPagesCount)}}let _Je=(()=>{class c{constructor(a){this.router=a,this.logText=["*\u041c\u043e\u043b\u0435\u0431\u0435\u043d","*\u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438"].join(", "),this.extraPages=[],this.horizontalPagesCount=2,this.verticalPagesCount=2}ngOnInit(){}onPagesCount(a){this.extraPages=[];let h=this.horizontalPagesCount*this.verticalPagesCount,d=a-h,f=0;for(;d>0;)d=Math.max(0,d-h),f+=h,this.extraPages.push(f)}}return c.\u0275fac=function(a){return new(a||c)(B(ts))},c.\u0275cmp=je({type:c,selectors:[["app-memorial-pages-editor"]],decls:9,vars:11,consts:[[1,"no-print"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"memorialsText",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"form",1)(2,"div",2)(3,"textarea",3),ee("ngModelChange",function(f){return h.logText=f}),F()(),I(4,"span",4),ie(5,"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),F()()(),I(6,"div")(7,"app-svg-js-image",5),ee("pagesCount",function(f){return h.onPagesCount(f)}),F()(),X(8,yJe,2,9,"div",6)),2&a&&(P(3),R("ngModel",h.logText),P(4),R("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",h.horizontalPagesCount)("verticalPagesCount",h.verticalPagesCount),P(1),R("ngForOf",h.extraPages))},dependencies:[fi,l5,Ly,Vl,jo,Fy,Bm,Ao,xf,Zl],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}.memorialsText[_ngcontent-%COMP%]{width:97vw;height:10em}"]}),c})();class Tu{constructor(l=null){this.curValue=l}getCurValue(l){return this.isChanged()&&(this.curValue=l()),this.curValue}isChanged(){return null==this.curValue}markChanged(){this.curValue=null}}class za extends Tu{constructor(l=null){super(),this.rememberValue=l}static builder(){return new za}checkAndGetValue(l){let a=[];for(let h in l)a.push(h,l[h]);return this.checkChanged(...a),this.getCurValue(()=>l)}checkChanged(...l){let a=!1;if(null!=this.rememberValue&&null!=l&&this.rememberValue.length==l.length){a=!0;for(let h=0;h<this.rememberValue.length;h++)if(this.rememberValue[h]!==l[h]){a=!1;break}}return a||(this.rememberValue=l,this.markChanged()),this}}class Vn{constructor(l,a){this.component=l,this.data=a,this.detector=za.builder()}}class xg extends mi{constructor(l,a,h,d,f=!1){super(l,a,h),this.menuState=d,this.whiteBack=f}static builder(){return new xg("",null,null,pg.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setWhiteBack(l){return this.whiteBack=l,this}setMenuState(l){return this.menuState=l,this}addCommand(l){return this.menuState.addCommand(l),this}}const bJe=function(c){return{whiteBG:c}};let jE=(()=>{class c{constructor(a){this.config=a}get menuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getMenuState(){return this.menuData.menuState}onCommand(a){this.data.onClick&&this.data.onClick(a)}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-menu"]],inputs:{data:"data"},decls:2,vars:8,consts:[[3,"ngClass"],[3,"genName","tag","svgWidth","svgHeight","printOnly","onCommand"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"app-svg-js-image",1),ee("onCommand",function(f){return h.onCommand(f)}),F()()),2&a&&(R("ngClass",ys(6,bJe,h.menuData.whiteBack)),P(1),R("genName",h.getMenuState().genName)("tag",h.getMenuState())("svgWidth",512)("svgHeight",64)("printOnly",h.getMenuState().printOnly))},dependencies:[si,Zl],styles:[".whiteBG[_ngcontent-%COMP%]{background-color:#fff!important}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})(),Che=(()=>{class c extends Cg{constructor(a,h,d){super(a,h,d),this.data=null,this.myBibleMenuData=yz.builder().setOnSelect(f=>{this.onBibleSelect(f)}),this.menuData=xg.builder().addCommand(La.builder().setName("\u0411\u0438\u0431\u043b\u0438\u044f")).setOnClick(f=>{f&&this.onMenuClick(f.text)}),this.addMenuLink(ei.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setIsActive(()=>!0)),this.addMenuLink(ei.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.onMenuClick("")}).setIsActive(()=>!1)),this.addMenuLink(ei.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.onMenuClick("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")}).setIsActive(()=>!1)),this.addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.onMenuClick("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}get bibleMenuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}onMenuClick(a){this.data&&this.data.onClick&&this.data.onClick(a)}onBibleSelect(a){let h=a&&a.on?a.text:"\u0411\u0438\u0431\u043b\u0438\u044f",d=a&&a.on?a.typeName:"CENTER",f=h+(d?" "+d:"");this.menuData=xg.builder().addCommand(La.builder().setName(h).setTag(f)).setOnClick(p=>{this.onMenuClick(p)})}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-bible-menu"]],inputs:{data:"data"},features:[gn],decls:5,vars:5,consts:[[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"genName","svgWidth","svgHeight","tag"],[1,"login-footer"],[1,"gapTitle",3,"data"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"div",1),ue(2,"app-svg-js-image",2),F(),I(3,"div",3),ue(4,"app-dynamic-menu",4),F()()),2&a&&(P(2),R("genName","BibleMenu")("svgWidth",512)("svgHeight",512)("tag",h.myBibleMenuData),P(2),R("data",h.menuData))},dependencies:[Zl,jE],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{inset:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:calc(100vh - 60px)}.h80[_ngcontent-%COMP%]{height:calc(78vh - 60px);width:78vh}"]}),c})();class Cz extends Tu{constructor(){super()}static builder(){return new Cz}}class mS extends mi{constructor(l,a,h,d){super(l,a,h),this.menuState=d}static builder(){return new mS("",null,null,Cz.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}class qE{constructor(l,a){this.workerId=l,this.message=a}static builder(){return new qE(-1,null)}setWorkerId(l){return this.workerId=l,this}setMessage(l){return this.message=l,this}}let xhe=(()=>{class c{constructor(a){this.type=a,this.id=0,this.callbackId=-1,this.id=c.newId()}static newId(){return c.staticId++}setCallbackId(a){return this.callbackId=a,this}}return c.staticId=0,c})(),CJe=(()=>{class c extends xhe{constructor(a){super(c.TYPE),this.pageLoadedFrom=a}static builder(){return new c("")}setPageLoadedFrom(a){return this.pageLoadedFrom=a,this}}return c.TYPE="SetupWorkerRequest",c})(),Sd=null;class Ua{constructor(){this.handler=null,this.workerId=Ua.nextWorkerId()}static nextWorkerId(){return Ua.iNextWorkerId++}static builder(){return new Ua}enabled(){return!!Sd}subscribe(){Sd&&(Ua.appWorkerStaticOnmessageMap.set(this.workerId,l=>{this.handler&&this.handler(l)}),Sd.onmessage=({data:l})=>{let a=l;if(Ua.appWorkerStaticOnmessageMap.has(a.workerId)){let h=Ua.appWorkerStaticOnmessageMap.get(a.workerId);h&&h(a.message)}})}unsubscribe(){Sd&&Ua.appWorkerStaticOnmessageMap.delete(this.workerId)}sendMessage(l="hello"){Sd&&Sd.postMessage(qE.builder().setWorkerId(this.workerId).setMessage(l))}setOnMessage(l){return this.handler=l,this.subscribe(),this}}Ua.iNextWorkerId=0,Ua.appWorkerStaticOnmessageMap=new Map,"undefined"!=typeof Worker&&(Sd=new Worker(Ot.tu(new URL(Ot.p+Ot.u(273),Ot.b))),Sd.onmessage=({data:c})=>{let l=c;if(Ua.appWorkerStaticOnmessageMap.has(l.workerId)){let a=Ua.appWorkerStaticOnmessageMap.get(l.workerId);a&&a(l.message)}},Sd.onerror=c=>{},Sd.postMessage(qE.builder().setWorkerId(-1).setMessage(CJe.builder().setPageLoadedFrom(pageLoadedFrom))));class wg extends xhe{}let whe=(()=>{class c extends wg{constructor(a,h){super(c.TYPE),this.libraryRef=a,this.libraryType=h}static builder(){return new c("","")}setLibraryRef(a){return this.libraryRef=a,this}setLibraryType(a){return this.libraryType=a,this}}return c.TYPE="LibraryInfoRequest",c})(),She=(()=>{class c extends wg{constructor(a,h,d){super(c.TYPE),this.libraryType=a,this.bookRef=h,this.loadBooksEnabled=d}static builder(){return new c("","",!0)}setLibraryType(a){return this.libraryType=a,this}setBookRef(a){return this.bookRef=a,this}setLoadBooksEnabled(a){return this.loadBooksEnabled=a,this}}return c.TYPE="BookInfoRequest",c})(),The=(()=>{class c extends wg{constructor(a,h,d){super(c.TYPE),this.libraryType=a,this.bookRef=h,this.languages=d}static builder(){return new c("","",[])}setLibraryType(a){return this.libraryType=a,this}setBookRef(a){return this.bookRef=a,this}setLanguages(a){return this.languages=a,this}addLanguage(a){return this.languages.push(a),this}}return c.TYPE="BookRequest",c})();class xz{constructor(l,a,h){this.bookRef=l,this.bookPath=a,this.bookPage=h}static builder(){return new xz("","","")}setBookRef(l){return this.bookRef=l,this}setBookPath(l){return this.bookPath=l,this}setBookPage(l){return this.bookPage=l,this}}let Ohe=(()=>{class c extends wg{constructor(a){super(c.TYPE),this.pages=a}static builder(){return new c([])}setBookPages(a){return this.pages=a,this}addBookPage(a){return this.pages.push(a),this}}return c.TYPE="PagesRequest",c})(),wz=(()=>{class c extends wg{constructor(a){super(c.TYPE),this.pages=a}static builder(){return new c([])}setPages(a){return this.pages=a,this}addPage(a){return this.pages.push(a),this}}return c.TYPE="PagesResponse",c})();class Sz{constructor(l,a,h){this.bookRef=l,this.path=a,this.content=h}static builder(){return new Sz("","","")}setBookRef(l){return this.bookRef=l,this}setPath(l){return this.path=l,this}setContent(l){return this.content=l,this}}let Dhe=(()=>{class c extends wg{constructor(a){super(c.TYPE),this.metaBooks=a}static builder(){return new c([])}setMetaBooks(a){return this.metaBooks=a,this}addMetaBook(a){return this.metaBooks.push(a),this}}return c.TYPE="BookResponse",c})(),khe=(()=>{class c extends wg{constructor(a,h,d){super(c.TYPE),this.bookRef=a,this.metaContent=h,this.loadBooksEnabled=d}static builder(){return new c("","",!0)}setBookRef(a){return this.bookRef=a,this}setMetaContent(a){return this.metaContent=a,this}setLoadBooksEnabled(a){return this.loadBooksEnabled=a,this}}return c.TYPE="BookInfoResponse",c})(),Mhe=(()=>{class c extends wg{constructor(a,h){super(c.TYPE),this.libraryRef=a,this.metaContent=h}static builder(){return new c("","")}setLibraryRef(a){return this.libraryRef=a,this}setMetaContent(a){return this.metaContent=a,this}}return c.TYPE="LibraryInfoResponse",c})();class Ehe{constructor(l=null){this.messageSender=l,this.requests=new Map}send(l,a){return this.messageSender&&(this.requests.set(a.type,a),this.messageSender(l,a)),this}post(l,a){return this}runAll(l,a,h){let d=0,f=()=>{if(d>=l.length)return void(h&&h(!0));let p=l[d++];a(p,g=>{g?f():h&&h(!1)})};f()}}class Tz{constructor(l,a="/static"){this.config=l,this.sRestPoint=a,this.textCache=new Map,this.waitingTextCache=new Map}get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}getRestPoint(l,a,h=null){const d=this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return Ar.merge(Ar.merge(a||d,null!=h?h:this.restPoint),l)}completeOnDone(l,a){let h=this.waitingTextCache.get(l);h&&(h.forEach(d=>{this.config.post(()=>{d&&d(a)})}),this.waitingTextCache.delete(l))}getTextRestcallUrl(l,a){if(this.coding){if(this.textCache.has(l)){let h=this.textCache.get(l);if(null!=h)return void this.config.post(()=>{a&&a(h)})}return this.waitingTextCache.has(l)?void(a&&this.waitingTextCache.get(l).push(a)):(a&&this.waitingTextCache.set(l,[a]),this.getBinRestcallUrlRaw(l,h=>{if(h){let d=new Uint8Array(h),f=$E.fromByteArray(d);this.completeOnDone(l,f)}else a&&a(null)}))}return this.getTextRestcallUrlRaw(l,a)}getTextRestcallUrlRaw(l,a){if(this.textCache.has(l)){let d=this.textCache.get(l);if(null!=d)return void this.config.post(()=>{a&&a(d)})}if(this.waitingTextCache.has(l))a&&this.waitingTextCache.get(l).push(a);else{a&&this.waitingTextCache.set(l,[a]);var h=new XMLHttpRequest;h.onload=()=>{if(a){let d=4===h.readyState&&200===h.status?h.responseText:null;null!=d?this.textCache.set(l,d):this.textCache.delete(l),this.completeOnDone(l,d)}},h.open("get",l,!0),h.send()}}getBinRestcallUrlRaw(l,a){let h=l;if(this.coding){let f=h.lastIndexOf(".");f>=0&&(h=h.substring(0,f)+".bin")}var d=new XMLHttpRequest;d.onload=()=>{if(a){let p=new Uint8Array(4===d.readyState&&200===d.status?d.response:null),g=$E.dtr(p,-1);a&&a(g)}},d.open("get",h,!0),d.responseType="arraybuffer",d.send()}}class Oz extends Ehe{constructor(l=null){super(l),this.cacheService=null}setCacheService(l){return this.cacheService=l,this}post(l,a){switch(a.type){case whe.TYPE:this.onLibraryInfoRequest(l,a);break;case She.TYPE:this.onBookInfoRequest(l,a);break;case The.TYPE:this.onBookRequest(l,a);break;case Ohe.TYPE:this.onPagesRequest(l,a);break;default:throw new Error(`Unknown message type: ${a.type}.`)}return this}onLibraryInfoRequest(l,a){let h=Mhe.builder().setCallbackId(a.id);a.libraryRef?this.loadLibraryInfo(a,h,a.libraryType+"/"+a.libraryRef+".library.txt",d=>{this.send(l,h)}):this.send(l,h)}loadLibraryInfo(l,a,h,d=null){let f=this.cacheService.getRestPoint(h,null);this.cacheService.getTextRestcallUrl(f,p=>{a.setMetaContent(p||"").setLibraryRef(l.libraryRef),d&&d(!!p)})}onBookInfoRequest(l,a){let h=khe.builder().setCallbackId(a.id);a.bookRef?this.loadBookInfo(a,h,a.libraryType+"/"+a.bookRef+".book.txt",d=>{this.send(l,h)}):this.send(l,h)}loadBookInfo(l,a,h,d=null){let f=this.cacheService.getRestPoint(h,null);this.cacheService.getTextRestcallUrl(f,p=>{a.setMetaContent(p||"").setBookRef(l.bookRef),d&&d(!!p)})}onBookRequest(l,a){let h=Dhe.builder().setCallbackId(a.id),d=a.languages.map(f=>f);d.length||d.push("CS","Sinodal"),d=d.map(f=>Ar.merge("/"+a.libraryType,a.bookRef+"_"+f+"/index.txt")),a.bookRef?this.runAll(d,(f,p)=>{this.loadBookPath(a,h,f,p)},f=>{this.send(l,h)}):this.send(l,h)}loadBookPath(l,a,h,d=null){let f=this.cacheService.getRestPoint(h,null);this.cacheService.getTextRestcallUrl(f,p=>{a.addMetaBook(Sz.builder().setBookRef(l.bookRef).setPath(h).setContent(p||"")),d&&d(!!p)})}onPagesRequest(l,a){let h=wz.builder().setCallbackId(a.id);this.runAll(a.pages,(d,f)=>{let p=this.findPathPrefix(d.bookPath),g=this.cacheService.getRestPoint(Ar.merge(p,d.bookPage),null);this.cacheService.getTextRestcallUrl(g,m=>{h.addPage(m||""),f(!0)})},d=>{this.send(l,h)})}findPathPrefix(l){let a=l.lastIndexOf("/");return l.substring(0,a)}}class vS{static builder(){return new vS}Book(){return Dz.builder()}NameValue(){return kz.builder()}NamePath(){return Mz.builder()}}class Dz{constructor(l,a){this.settings=l,this.content=a,this.cs=null,this.cs2=null}static builder(){return new Dz([],[])}setSettings(l){return this.settings=l,this}setContent(l){return this.content=l,this}getCs(){return null==this.cs&&(this.cs=!!this.settings.find(l=>"\u044f\u0437\u044b\u043a"===l.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439"===l.value.toLowerCase())),this.cs}setCs(l){return this.cs=l,this}getCs2(){return null==this.cs2&&(this.cs2=!!this.settings.find(l=>"\u044f\u0437\u044b\u043a"===l.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-ucs8"===l.value.toLowerCase())),this.cs2}setCs2(l){return this.cs2=l,this}}class kz{constructor(l,a,h){this.name=l,this.value=a,this.value2=h}static builder(){return new kz("","",[])}setName(l){return this.name=l,this}setValue(l){return this.value=l,this}setValue2(l){return this.value2=l,this}}class Mz{constructor(l,a,h){this.name=l,this.path=a,this.path2=h}static builder(){return new Mz("","",[])}setName(l){return this.name=l,this}setPath(l){return this.path=l,this}setPath2(l){return this.path2=l,this}}var yS=(()=>(function(c){c.\u0422\u0435\u043a\u0441\u0442="\u0442\u0435\u043a\u0442",c.\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435="\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",c.\u0413\u0440\u0430\u0444\u0438\u043a="\u0433\u0440\u0430\u0444\u0438\u043a",c.\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442="\u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442",c.\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f="\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"}(yS||(yS={})),yS))();class _S{constructor(l,a,h,d){this.\u0442\u0438\u043f=l,this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=a,this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=h,this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=d,this.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440=za.builder()}static builder(){return new _S(yS.\u0422\u0435\u043a\u0441\u0442,!0,[],null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(l){return this.\u0442\u0438\u043f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(l){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(l){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=l,this}get fragments(){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(l){return this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=l,this}}class Ur{constructor(l,a,h,d){this.classes=l,this.text=a,this.link=h,this.component=d}static builder(){return new Ur({},"",null,null)}setClasses(l){return this.classes=l,this}setText(l){return this.text=l,this}setLink(l){return this.link=l,this}setComponent(l){return this.component=l,this}}let Ez=(()=>{class c{constructor(a){this.config=a}get textFragmentData(){return this.data}get classes(){return this.textFragmentData.config.fragment.classes}get text2(){return this.textFragmentData.config.fragment.text}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-text-fragment"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"]],template:function(a,h){1&a&&(I(0,"span",0),ie(1),F()),2&a&&(R("ngClass",h.classes),P(1),Ut(h.text2?h.text2:"\xa0"))},dependencies:[si],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class Az{constructor(l){this.fragment=l}static builder(){return new Az(null)}setFragment(l){return this.fragment=l,this}}class bS extends mi{constructor(l,a,h,d){super(l,a,h),this.config=d}static builder(){return new bS("",null,null,Az.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}class Ahe{static uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,l=>(l^crypto.getRandomValues(new Uint8Array(1))[0]&15>>l/4).toString(16))}}class ea{constructor(l,a,h,d,f,p=!0){this.path=l,this.isText=a,this.content=h,this.data=d,this.pathZip=f,this.printable=p}getPath(){return this.pathZip?this.pathZip:this.path}}class ZE{constructor(l,a,h){this.index=l,this.text=a,this.classes=h,this.lines=[]}}class Iz{constructor(l,a){this.lineNumber=l,this.translations=a}}class xJe{constructor(l,a,h,d,f){this.psalom=l,this.slava=a,this.lines=h,this.names=d,this.textJustifyClass=f,this.translations=[],this.memorials=[]}sync(){return this.translations=[],this.lines.forEach((l,a)=>{l.translations.forEach((h,d)=>{for(;this.translations.length<=d;)this.translations.push(new ZE("","",""));let f=this.translations[d];h.classes&&(f.classes=h.classes),h.index&&(f.index=h.index),f.lines.push(new Iz(l.lineNumber,[new ZE(h.index,h.text,h.classes)]))})}),this}get translationsCount(){return this.lines.length?this.lines[0].translations.length:0}}class wJe{constructor(l,a,h,d,f){this.name=l,this.link=a,this.id=h,this.order=d,this.children=f}}class Rz{constructor(l,a){this.textSizeClass=l,this.lines=a}}class SJe{constructor(l,a,h){this.type=l,this.link=a,this.name=h}}class TJe{constructor(l,a){this.kafizma=l,this.psalmy=a,this.uuidContent="",this.uuidContributer="",this.textSizeClass="",this.textJustifyClass="",this.name="",this.psalomName="",this.application="",this.applicationId="",this.developerId="",this.developerName="",this.developerNameSortOrder="",this.developerLink="",this.date="",this.content=[],this.fileNames=[],this.molitva=new Rz("",[]),this.startMolitva=new Rz("",[]),this.endMolitva=new Rz("",[])}}class s1{constructor(l,a,h,d,f,p,g,m){this.name=l,this.psalomName=a,this.allBooks=h,this.bookNames=d,this.allBooksChapters=f,this.emptyFirstLines=p,this.showLineIndexes=g,this.showMiddleContent=m}static builder(){return new s1("","",[],[],[],[],!0,!0)}setName(l){return this.name=l,this}setPsalomName(l){return this.psalomName=l,this}setAllBooks(l){return this.allBooks=l,this}setBookNames(l){return this.bookNames=l,this}setAllBooksChapters(l){return this.allBooksChapters=l,this}setEmptyFirstLines(l){return this.emptyFirstLines=l,this}setShowLineIndexes(l){return this.showLineIndexes=l,this}setShowMiddleContent(l){return this.showMiddleContent=l,this}}class Fz{constructor(l){this.requestsPack=l}static builder(){return new Fz([])}setRequestPack(l){return this.requestsPack=l,this}addRequest(l){return this.requestsPack.push(l),this}}class CS{constructor(l){this.handler=l}static builder(){return new CS(null)}setHandler(l){return this.handler=l,this}print(l){this.handler&&this.handler(l)}}let Ihe=(()=>{class c{constructor(a,h,d,f,p){this.cacheSvc=a,this.zipSvc=h,this.config=d,this.uiConfig=f,this.ks=p,this.prefix="templates/",this.baseContents=[],this.uniqueId=0,this.tocIndex=1,this.zipEntries=[],this.content=[],this.kafizmyContent=null,this.startRequest=null,this.setup()}setup(){this.baseContents=[new ea("ebook/mimetype.txt",!0,"",null,"mimetype"),new ea("ebook/stylesheet.css",!0,"",null,"stylesheet.css"),new ea("ebook/PonomarUnicode.ttf",!1,"",null,"PonomarUnicode.ttf"),new ea("ebook/triodion-ieUcs.ttf",!1,"",null,"triodion-ieUcs.ttf"),new ea("ebook/logo.png",!1,"",null,"logo.png"),new ea("ebook/meta_inf/container.xml.txt",!0,"",null,"META-INF/container.xml"),new ea("ebook/toc.ncx.txt",!0,"",null,"toc.ncx"),new ea("ebook/metadata.opf.txt",!0,"",null,"metadata.opf"),new ea("ebook/content.xhtml",!0,"",null,"content.xhtml"),new ea("ebook/titlepage.xhtml",!0,"",null,"titlepage.xhtml"),new ea("kafizma.parallel.xhtml",!0,"",null,"",!1),new ea("kafizma.parallel.redline.xhtml",!0,"",null,"",!1),new ea("kafizma.parallel.redline.nobreaks.xhtml",!0,"",null,"",!1),new ea("kafizma.xhtml",!0,"",null,"",!1),new ea("kafizma.nobreaks.xhtml",!0,"",null,"",!1)]}clearGeneratePrintRequestsPack(a,h){this.zipEntries=[],this.content=[],this.startRequest=a,this.kafizmyContent=h,this.tocIndex=1}startGeneratePrintRequestsPack(a,h){}nextUniqueId(){return this.uniqueId++}nextTocIndex(){return++this.tocIndex}newMustacheFileName(a,h,d,f,p){return new wJe(a,h,d+"_"+f,f,p)}findContent(a){return this.content.find(h=>h.path==a)}addToc(a,h,d,f,p){a.content.push(new SJe(h,d,f)),a.fileNames.push(this.newMustacheFileName(f,d,p,`${this.nextTocIndex()}`,[]))}doGeneratePrintRequestsPack(a,h){let d=a.bookNames.map(p=>p.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439")||p.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439 (\u0440\u0443\u0441)")?"cs":p.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-UCS8")?"cs2":p.endsWith("\u043f\u0440\u0435\u0444\u0438\u043a\u0441")?"right":"").map(p=>p+" "+(this.uiConfig.ui.fineText.getBooleanValue()?"ftext":"")),f=!!a.bookNames.find(p=>"\u043f\u0440\u0435\u0444\u0438\u043a\u0441"===p);for(let p=0;p<a.allBooksChapters.length;++p){let g=this.findContent(f?"kafizma.parallel.redline.xhtml":this.uiConfig.ui.parallel.getBooleanValue()?this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.parallel.redline.xhtml":"kafizma.parallel.redline.nobreaks.xhtml":this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.xhtml":"kafizma.nobreaks.xhtml");if(!g)continue;let m=(x,S)=>a.allBooks[x].flatMap((w,T)=>w.filter((O,k)=>k==S).map((O,k)=>new ZE(`${S}`,O,d[T]))),v=a.allBooks[p][0].map((x,S)=>{let w=a.emptyFirstLines[p].reduce((M,A)=>M>A?A:M,100),O=m(p,S),k=S+1-w,D=O.map(M=>M.lines.length>0).reduce((M,A,L,E)=>M&&A,!0);return new Iz(`${k>0&&!D&&a.showLineIndexes?k:""}`,O)}),y=new xJe(a.allBooksChapters[p],[],v,[],this.uiConfig.ui.fineText.getBooleanValue()?"ftext":""),_=a.allBooks[p].length;for(let x=0;x<_;++x){let S=new ZE("","",d[x]);S.lines=v.map(w=>new Iz(w.lineNumber,[w.translations[x]])),y.translations.push(S)}h.psalmy=[y];const b=Mustache.render(g.content,h,{navPoint:"",item:"",itemref:""});let C=this.nextUniqueId();this.content.push(new ea(`glava_${a.allBooksChapters[p]}_${C}.xhtml`,!0,b,null,"")),this.addToc(h,"TextTOC",`glava_${a.allBooksChapters[p]}_${C}.xhtml`,`${h.psalomName} ${a.allBooksChapters[p]}`,`num_glava_${a.allBooksChapters[p]}_${C}`)}}updateContent(a){!this.kafizmyContent||(a.content=this.kafizmyContent.content,a.fileNames=this.kafizmyContent.fileNames)}endGeneratePrintRequestsPack(a,h,d){this.content.forEach(f=>{if(f.printable)if(f.isText)try{const p=Mustache.render(f.content,f.data?f.data:h,{navPoint:'\n    <navPoint id="{{id}}" playOrder="{{order}}">\n        <navLabel>\n          <text>{{name}}</text>\n        </navLabel>\n        <content src="{{link}}"/>{{#children}}{{>navPoint}}{{/children}}\n      </navPoint>',item:'\n    <item href="{{link}}" id="r{{id}}" media-type="application/xhtml+xml"/>{{#children}}{{>item}}{{/children}}',itemref:'\n    <itemref idref="r{{id}}"/>{{#children}}{{>itemref}}{{/children}}'});this.zipEntries.push(QE.builder().setFileName(f.getPath()).setContent(p))}catch(p){}else this.zipEntries.push(QE.builder().setFileName(f.getPath()).setContent(f.content))}),this.zipSvc.zip(this.zipEntries).then(f=>{const p=new Blob([f],{type:"octet/stream"}),g=(new Date).toISOString().split("T")[0];if(this.config.isPlatformAndroid()){const v=`${a.name}.epub`;this.ks.addTempFile(v,p).then(y=>{y&&y.success&&jf.startDownload(y.fileName,v),d(!0)})}else jf.saveData(p,`${a.name}.${g}.epub`),d(!0)})}loadBaseContent(a,h,d){let f=this.baseContents[a];f.isText?this.cacheSvc.getText(this.prefix+f.path,p=>{p?(this.content.push(new ea(f.path,f.isText,p,f.data,f.pathZip,f.printable)),this.config.post(()=>{h()})):(this.config.addAlert(Fr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${f.path}`,"\u041e\u041a",15)),d(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${f.path}.`))}):this.cacheSvc.getBinary(this.prefix+f.path,p=>{p?(this.content.push(new ea(f.path,f.isText,p,f.data,f.pathZip,f.printable)),this.config.post(()=>{h()})):(this.config.addAlert(Fr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${f.path}`,"\u041e\u041a",15)),d(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${f.path}.`))})}generate(a,h=!0,d=!0,f=!0){return new Promise((p,g)=>{let m=h?0:this.baseContents.length;const v=(this.uiConfig.ui.parallel.getBooleanValue()?"P":"")+(this.uiConfig.ui.coloredTranslations.getBooleanValue()?"C":"")+(this.uiConfig.ui.fineText.getBooleanValue()?"J":"")+(this.uiConfig.ui.showMolitvy.getBooleanValue()?"M":"");let y=new TJe(1,[]);y.name=a.name,y.psalomName=a.psalomName,y.application=this.config.getApplication().name,y.applicationId=this.config.getApplication().id,y.developerId=this.config.developerId,y.developerName=this.config.developerName,y.developerNameSortOrder=this.config.developerNameSortOrder,y.developerLink=this.config.developerLink,y.uuidContent=Ahe.uuidv4(),y.uuidContributer=Ahe.uuidv4(),y.application=`${this.config.getApplication().name} (${this.config.version}) ${v}`;const _=(new Date).toISOString(),b=_.lastIndexOf(".");y.date=_.substring(0,b)+"+00:00",h&&this.clearGeneratePrintRequestsPack(a,y);let C=()=>{let x=m++;x>=this.baseContents.length?(h?(this.startGeneratePrintRequestsPack(a,y),this.addToc(y,"TextTOC","titlepage.xhtml","\u041e\u0431\u043b\u043e\u0436\u043a\u0430","num_title"),this.addToc(y,"TextTOC","content.xhtml","\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","num_content")):this.updateContent(y),d&&this.doGeneratePrintRequestsPack(a,y),f?this.endGeneratePrintRequestsPack(a,y,S=>p(S)):p(!0)):this.loadBaseContent(x,()=>C(),S=>g(S))};C()})}}return c.\u0275fac=function(a){return new(a||c)(Ae(wd),Ae(bz),Ae(on),Ae(ti),Ae(_g))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class Nz{constructor(l,a){this.libName=l,this.link=a}static builder(){return new Nz("",null)}setLibName(l){return this.libName=l,this}setLink(l){return this.link=l,this}}class Lz{constructor(l,a){this.fragment=l,this.link=a}static builder(){return new Lz(null,null)}setFragment(l){return this.fragment=l,this}setLink(l){return this.link=l,this}}class Bz extends mi{constructor(l,a,h,d){super(l,a,h),this.config=d,this.id="",this.targetId="",this.waitingForSenderId="",this.printerHandler=CS.builder()}static builder(){return new Bz("",null,null,Lz.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setId(l){return this.id=l,this}setTargetId(l){return this.targetId=l,this}setWaitingForSenderId(l){return this.waitingForSenderId=l,this}}class Cl extends Tu{constructor(l){super(),this.onRoute=l,this.logical=!0,this.shortName=!1,this.textIsPage=!1,this.chapter="",this.startLine=-1,this.endLine=-1,this.bookName="",this.languages=null}static builder(){return new Cl(null)}setShortName(l){return this.shortName=l,this.markChanged(),this}setTextIsPage(l){return this.textIsPage=l,this.markChanged(),this}setChapter(l){return this.chapter=l,this.markChanged(),this}setStartLine(l){return this.startLine=l,this.markChanged(),this}setEndLine(l){return this.endLine=l,this.markChanged(),this}setBookName(l){return this.bookName=l,this.markChanged(),this}setLanguages(l){return this.languages=l,this.markChanged(),this}setLogical(l){return this.logical=l,this.markChanged(),this}setOnRoute(l){return this.onRoute=l,this.markChanged(),this}route(l){this.onRoute&&this.onRoute(l)}}class xl extends mi{constructor(l,a,h,d,f){super(l,a,h),this.link=d,this.search=f,this.menuLinks=null,this.forceMenu=!1,this.hideUI=!1,this.enableEpub=!0,this.showPrintButtons=!1,this.handleMemorialNewTitleTarget="",this.facePage=!1,this.parallel=null,this.linebreaks=null,this.id="",this.targetId="",this.printerHandler=CS.builder(),this.autoPrint=!1}static builder(){return new xl("",null,null,Cl.builder().setShortName(!0),"")}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setLink(l){return this.link=l,this}setSearch(l){return this.search=l,this}setMenu(l){return this.menuLinks=l,this}setForceMenu(l){return this.forceMenu=l,this}setHideUI(l){return this.hideUI=l,this}setEpubEnabled(l){return this.enableEpub=l,this}setShowPrintButtons(l){return this.showPrintButtons=l,this}setHandleMemorialNewTitle(l){return this.handleMemorialNewTitleTarget=l,this}setFacePage(l){return this.facePage=l,this}setParallel(l){return this.parallel=l,this}setLinebreaks(l){return this.linebreaks=l,this}setId(l){return this.id=l,this}setTargetId(l){return this.targetId=l,this}setAutoPrint(l){return this.autoPrint=l,this}}function OJe(c,l){1&c&&(I(0,"span"),ie(1,"+"),F())}function DJe(c,l){if(1&c&&(I(0,"span"),ie(1),F()),2&c){const a=q(2);P(1),Ti("",a.link.endChapter,":")}}function kJe(c,l){if(1&c&&(I(0,"span"),ie(1),F()),2&c){const a=q(2);P(1),Ut(a.link.endLine)}}function MJe(c,l){if(1&c&&(I(0,"span"),ie(1,"-"),X(2,DJe,2,1,"span",2),X(3,kJe,2,1,"span",2),F()),2&c){const a=q();P(2),R("ngIf",a.link.endChapter>0),P(1),R("ngIf",a.link.endLine)}}function EJe(c,l){1&c&&ue(0,"app-dynamic-library-book",4),2&c&&R("data",q().bookData)}const AJe=function(c){return{"is-solid":c,cursor:!0,blue:!0}};let Vz=(()=>{class c{constructor(a){this.config=a,this.bookData=xl.builder(),this.checkLater=rx.builder(),this.opened=!1}get linkFragmentData(){return this.data}get classes(){return this.linkFragmentData.config.fragment.classes}get link(){return this.linkFragmentData.config.link.link}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){var a,h;if(this.linkFragmentData.printerHandler.setHandler(d=>{this.bookData.printerHandler.print(d)}),this.checkLater.setConfig(this.config).setWaitingForSenderId(this.linkFragmentData.waitingForSenderId).checkEnabled(),this.linkFragmentData.config.link){let d=this.linkFragmentData.config.link.libName;d||(d="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),this.opened!=!(null===(h=null===(a=this.linkFragmentData.config.link)||void 0===a?void 0:a.link)||void 0===h||!h.opened)&&this.config.post(()=>{var f,p;this.opened=!(null===(p=null===(f=this.linkFragmentData.config.link)||void 0===f?void 0:f.link)||void 0===p||!p.opened)}),this.bookData.setText(d).setId(this.linkFragmentData.id).setTargetId(this.linkFragmentData.targetId).setLink(Cl.builder().setOnRoute(f=>{}).setChapter(""+this.linkFragmentData.config.link.link.startChapter).setStartLine(this.linkFragmentData.config.link.link.startLine).setEndLine(this.linkFragmentData.config.link.link.endLine))}}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}toggleOpened(a){this.opened=!this.opened,a.stopPropagation()}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-link-fragment"]],inputs:{data:"data"},decls:7,vars:11,consts:[[3,"click"],[3,"ngClass","click"],[4,"ngIf"],[3,"data",4,"ngIf"],[3,"data"]],template:function(a,h){1&a&&(I(0,"span",0),ee("click",function(f){return f.stopPropagation()}),I(1,"clr-icon",1),ee("click",function(f){return h.toggleOpened(f)}),F(),I(2,"span",1),ee("click",function(f){return h.toggleOpened(f)}),ie(3),X(4,OJe,2,0,"span",2),X(5,MJe,4,2,"span",2),F(),X(6,EJe,1,1,"app-dynamic-library-book",3),F()),2&a&&(P(1),R("ngClass",ys(9,AJe,h.opened)),et("shape","scroll"),P(1),R("ngClass",h.classes),P(1),wC("",h.link.name,".",h.link.startChapter,":",h.link.startLine,""),P(1),R("ngIf",h.link.endChapter>0||h.link.endLine>=1e3),P(1),R("ngIf",h.link.endChapter>0||h.link.endLine>0&&h.link.endLine<1e3),P(1),R("ngIf",h.opened&&h.checkLater.enabled))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class zz{FragmentIdOp(){return Hz.builder()}TextOp(){return $z.builder()}LinkOp(){return Wz.builder()}}var Xl=(()=>(function(c){c[c.Text=0]="Text",c[c.Link=1]="Link",c[c.Id=2]="Id"}(Xl||(Xl={})),Xl))();class Uz{constructor(l){this.type=l}}class Hz extends Uz{constructor(l){super(Xl.Id),this.id=l}static builder(){return new Hz("")}setId(l){return this.id=l,this}}class $z extends Uz{constructor(l,a){super(Xl.Text),this.text=l,this.color=a}static builder(){return new $z("","")}setText(l){return this.text=l,this}setColor(l){return this.color=l,this}}class Wz extends Uz{constructor(l,a,h,d,f,p=null,g=!1,m="",v="",y=""){super(Xl.Link),this.name=l,this.startChapter=a,this.startLine=h,this.endChapter=d,this.endLine=f,this.langugages=p,this.opened=g,this.id=m,this.targetId=v,this.waitingForSenderId=y}static builder(){return new Wz("",1,1,-1,-1)}setName(l){return this.name=l,this}setStartChapter(l){return this.startChapter=l,this}setStartLine(l){return this.startLine=l,this}setEndChapter(l){return this.endChapter=l,this}setEndLine(l){return this.endLine=l,this}setLanguages(l){return this.langugages=l,this}setOpened(l){return this.opened=l,this}setId(l){return this.id=l,this}setTargetId(l){return this.targetId=l,this}setWaitingForSenderId(l){return this.waitingForSenderId=l,this}}let Gz=(()=>{class c{parseFragments(a,h,d,f="red"){let p=[],g=fragmentsParserStatic.parse(d,{builder:new zz});if(null!=g&&g.length)g[0].forEach(m=>{switch(m.type){case Xl.Text:{let v=m,y=Ur.builder().setClasses(c.getLastClass(v.color,f)).setText(v.text),_=bS.builder();_.config.setFragment(y),p.push(y.setComponent(new Vn(Ez,_)))}break;case Xl.Link:{let v=m,y=Ur.builder().setClasses(c.getLastClass("\u0441",f));y.classes.cursor=!0;let _=Bz.builder();_.config.setLink(Nz.builder().setLink(v).setLibName(h(v.name))).setFragment(y),_.setId(v.id).setWaitingForSenderId(v.waitingForSenderId).setTargetId(v.targetId),p.push(y.setComponent(new Vn(Vz,_)))}break;case Xl.Id:{let v=m,y=a.get(v.id);if(y)p.push(y);else{let _=Ur.builder().setClasses(c.getLastClass("\u043a",f)).setText(v.id),b=bS.builder();b.config.setFragment(_),p.push(_.setComponent(new Vn(Ez,b)))}}break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430: ${m.type}.`)}});else{let m=Ur.builder().setText(""),v=bS.builder();v.config.setFragment(m),p.push(m.setComponent(new Vn(Ez,v)))}return p}}return c.getLastClass=(l,a="red",h=!0)=>{let d={};switch(l){case"\u041a":case"\u043a":h&&(d[a]=h);break;case"\u0417":case"\u0437":h&&(d.green=h);break;case"\u0401":case"\u0451":h&&(d.yellow=h);break;case"\u0421":case"\u0441":h&&(d.blue=h);break;case"\u0424":case"\u0444":h&&(d.indigo=h);break;case"\u041f":case"\u043f":h&&(d.purple=h);break;case"\u041c":case"\u043c":h&&(d.cyan=h);break;case"\u041b":case"\u043b":h&&(d.greenYellow=h);break;case"\u0420":case"\u0440":h&&(d.darkRed=h)}return d},c})();class Qz{constructor(l,a,h){this.book=l,this.lineIndex=a,this.bookSvc=h}static builder(){return new Qz(null,0,null)}setBook(l){return this.book=l,this}setLineIndex(l){return this.lineIndex=l,this}setBookSvc(l){return this.bookSvc=l,this}}class o1 extends mi{constructor(l,a,h,d){super(l,a,h),this.config=d}static builder(){return new o1("",null,null,Qz.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}let Phe=(()=>{class c{constructor(a){this.viewContainerRef=a}}return c.\u0275fac=function(a){return new(a||c)(B(Vi))},c.\u0275dir=bt({type:c,selectors:[["","addComponent",""]]}),c})();function IJe(c,l){}let Yl=(()=>{class c{constructor(){this.thisComponent=null,this.currentAdIndex=-1}set component(a){if(!a)throw new Error("Error: thisComponent is null.");this.thisComponent=a}get component(){return this.thisComponent}ngOnInit(){this.loadComponent()}ngOnDestroy(){}loadComponent(){const a=this.thisComponent,h=this.adHost.viewContainerRef;h.clear(),h.createComponent(a.component).instance.data=a.data}reload(){this.loadComponent()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["app-add-component"]],viewQuery:function(a,h){if(1&a&&ci(Phe,7),2&a){let d;Ht(d=$t())&&(h.adHost=d.first)}},inputs:{component:"component"},decls:1,vars:0,consts:[["addComponent",""]],template:function(a,h){1&a&&X(0,IJe,0,0,"ng-template",0)},dependencies:[Phe],encapsulation:2}),c})();function PJe(c,l){1&c&&(I(0,"span"),ie(1,"\xa0"),F())}const RJe=function(c,l){return{red:c,redDark:l}};function FJe(c,l){if(1&c&&(I(0,"span")(1,"span",2),ie(2),F(),I(3,"span")(4,"span",3),ie(5,"."),F()()()),2&c){const a=q(2);P(1),R("ngClass",as(2,RJe,!(a.colored&&a.bookIndex%2),a.colored&&!!(a.bookIndex%2))),P(1),Ut(a.lineIndex?a.lineIndex:"")}}function NJe(c,l){1&c&&ue(0,"app-add-component",5),2&c&&R("component",q().$implicit.component)}function LJe(c,l){if(1&c&&(I(0,"span"),X(1,NJe,1,1,"app-add-component",4),F()),2&c){const a=l.$implicit;P(1),R("ngIf",a.component)}}function BJe(c,l){if(1&c&&(I(0,"span"),X(1,FJe,6,5,"span",0),X(2,LJe,2,1,"span",1),F()),2&c){const a=q();P(1),R("ngIf",a.isLineIndexed(a.book,a.lineIndex)),P(1),R("ngForOf",a.getBookFragments(a.bookIndex,a.book,a.lineIndex))}}let XE=(()=>{class c{constructor(a){this.uiConfig=a}get spanTextData(){return this.data}get bookIndex(){return this.spanTextData.config.book?this.spanTextData.config.book.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438:0}get book(){return this.spanTextData.config.book}get lineIndex(){return this.spanTextData.config.lineIndex}get bookSvc(){return this.spanTextData.config.bookSvc}get text(){return this.data&&this.data.text?this.data.text:""}get colored(){return this.uiConfig.ui.coloredTranslations.getBooleanValue()}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}isLineIndexed(a,h){return h>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[h].fragments.length>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}getBookFragments(a,h,d){var f,p,g;if(null==h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430){let m=null===(g=null===(p=null===(f=this.bookSvc)||void 0===f?void 0:f.bookContent[a])||void 0===p?void 0:p.parsed)||void 0===g?void 0:g.settings.find(v=>"\u044f\u0437\u044b\u043a"===v.name.toLowerCase());h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=[Ur.builder().setText(m?m.value:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e").setClasses({red:!0})]}return d<0?h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430:h.\u0441\u0442\u0440\u043e\u043a\u0438[d].fragments}}return c.\u0275fac=function(a){return new(a||c)(B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-span-text"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"hidden"],[3,"component",4,"ngIf"],[3,"component"]],template:function(a,h){1&a&&(X(0,PJe,2,0,"span",0),X(1,BJe,3,2,"span",0)),2&a&&(R("ngIf",!h.book),P(1),R("ngIf",h.book))},dependencies:[si,fi,_n,Yl]}),c})();class VJe{newText(){return jz.builder()}}class jz{constructor(l,a){this.type=l,this.text=a}static builder(){return new jz("","")}setType(l){return this.type=l,this}setText(l){return this.text=l,this}}class YE{static escapeString(l){let a="",h=!1;for(let d=0;d<l.length;d++){let f=l.charAt(d);switch(f){case"'":h||(a+="\\"),a+=f,h=!1;break;case"\\":a+=f,h=!0;break;default:a+=f,h=!1}}return a}static stdConverter(l){let a="";switch(l.type){case"*":a+=l.text;break;case"=":a+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438("+l.text+");";break;case"":a+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438('"+YE.escapeString(l.text)+"');"}return a}parse(l){return bracerParserStatic.parse(l,{builder:new VJe})}getStdConverter(){return l=>YE.stdConverter(l)}join(l,a=null){return a||(a=this.getStdConverter()),l.map(h=>a(h)).join("")}parseAndJoin(l,a=null){return this.join(this.parse(l),a)}}class qz extends Tu{constructor(){super(),this.block=!1,this.outline=!1,this.type="primary"}static builder(){return new qz}setBlock(l){return this.block=l,this.markChanged(),this}setOutline(l){return this.outline=l,this.markChanged(),this}setType(l){return this.type=l,this.markChanged(),this}}class KE extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d}static builder(){return new KE("",null,null,qz.builder().setBlock(!0))}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}let Rhe=(()=>{class c{constructor(a){this.config=a}get btnData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.btnData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var a=this.btnData.classes;return{btn:!0,"btn-block":a.block,"btn-link":"link"==a.type&&!a.outline,"btn-primary":"primary"==a.type&&!a.outline,"btn-primary-outline":"primary"==a.type&&a.outline,"btn-success":"success"==a.type&&!a.outline,"btn-success-outline":"success"==a.type&&a.outline,"btn-danger":"danger"==a.type&&!a.outline,"btn-danger-outline":"danger"==a.type&&a.outline,"no-print":!0}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-button"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass","click"]],template:function(a,h){1&a&&(I(0,"button",0),ee("click",function(f){return h.onClick(f)}),ie(1),F()),2&a&&(R("ngClass",h.getClasses()),P(1),Ut(h.text))},dependencies:[si]}),c})(),a1=(()=>{class c{constructor(a){this.uiConfig=a}getBookmarks(){return this.uiConfig.ui.bookmarks.getStringValue().split(",").filter(a=>!!a)}setBookmarks(a){return this.uiConfig.ui.bookmarks.setStringValue(a.join(",")),this}addBookmark(a,h,d,f){if(!a)return this;let p=this.getBookmarks();return p.push(a+"."+h+(d>0?":"+d+(f>0?"-"+f:""):"")),this.setBookmarks(p),this}deleteBookmark(a){let h=this.getBookmarks(),d=h.findIndex(f=>f===a);return d>=0&&(h.splice(d,1),this.setBookmarks(h)),this}}return c.\u0275fac=function(a){return new(a||c)(Ae(ti))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class JE{constructor(){this.\u0434\u0432\u0438\u0436\u043e\u043a=new wu,this.\u0434\u0432\u0438\u0436\u043e\u043a\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d=!1,this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=new Map,this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438=[],this.\u0441\u0442\u0440\u043e\u043a\u0430\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438\u0414\u0432\u0438\u0436\u043a\u0430="\n  //{{ ========= \u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u0432 ========= {{\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u041c\u0430\u0441\u0441\u0438\u0432\u0430 = \u0441\u0438\u0441\u0442\u0435\u043c\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f('\u043c\u0430\u0441\u0441\u0438\u0432');\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u041c\u0430\u0441\u0441\u0438\u0432\u0430.\u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c = \u043a\u043b\u0430\u0441\u0441{\u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440){\n      \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = [];\n      \u0446\u0438\u043a\u043b(i = 0; i < \u044d\u0442\u043e.\u0434\u043b\u0438\u043d\u0430(); ++i){\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435(\u044d\u0442\u043e[i], i, \u044d\u0442\u043e));\n      }\n      \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;\n    }}.\u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c;\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u041c\u0430\u0441\u0441\u0438\u0432\u0430.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c = \u043a\u043b\u0430\u0441\u0441{\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c(\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440){\n      \u0446\u0438\u043a\u043b(i = 0; i < \u044d\u0442\u043e.\u0434\u043b\u0438\u043d\u0430(); ++i){\n        \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435(\u044d\u0442\u043e[i], i, \u044d\u0442\u043e);\n      }\n    }}.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c;\n    //-----------------------------------------------\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e = \u0441\u0438\u0441\u0442\u0435\u043c\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f('\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e');\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e.\u0432\u0441\u0442\u0440\u043e\u0438\u0442\u044c\u041a\u043e\u043f\u0438\u0438 =\n      \u043a\u043b\u0430\u0441\u0441 {\n        \u0432\u0441\u0442\u0440\u043e\u0438\u0442\u044c\u041a\u043e\u043f\u0438\u0438(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439)\n        {\n          \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n            \u0430\u0441\u0434 = 0;\n            \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n            \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n              \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n              \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n            }\n          };\n          \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n            \u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435) {\n              \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;\n            }\n            \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043a\u043e\u043f\u0438\u044f, \u0441\u043f\u0438\u0441\u043e\u043a) {\n              \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                \u0430\u0441\u0434 = 0;\n                \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                  \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                  \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                }\n              };\n              \u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 = \u0430\u0441\u0434.\u0442\u0438\u043f();\n              \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = \u0430\u0441\u0434.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432();\n              if (\u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 === '\u043a\u043e\u043c\u0430\u043d\u0434\u0430'){\n                if (\u0430\u0441\u0434.\u043a\u043e\u043c\u0430\u043d\u0434\u0430() === '\u043a\u043e\u043f\u0438\u044f') {\n                  \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043f\u0438\u044f);\n                  \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = 0;\n                }\n              }\n              for(i = 0; i < \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432; ++i) {\n               \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 = \u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(i);\n               \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, i),  \u0441\u043f\u0438\u0441\u043e\u043a);\n              }\n            }\n          };\n          //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0437\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439 = \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438;...');\n          \u0430\u0441\u0434 = \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0410\u0421\u0414(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439);\n          //\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c\u0410\u0421\u0414(\u0430\u0441\u0434, '');\n          \u0441\u043f\u0438\u0441\u043e\u043a = [];\n          \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, -1), \u0441\u043f\u0438\u0441\u043e\u043a);\n          //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0414\u043b\u0438\u043d\u0430 \u0441\u043f\u0438\u0441\u043a\u0430: ' + \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430());\n          for(i = 0; i < \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430(); ++i){\n            \u043f\u0430\u0440\u0430 = \u0441\u043f\u0438\u0441\u043e\u043a[i];\n            //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u043f\u0430\u0440\u0430: [' + \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 + '];');\n            \u0440\u0435\u0437 = \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 == -1 ? \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c() :\n              \u0412\u042b\u0417\u041e\u0412 \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c();\n            \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441, \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0440\u0435\u0437));\n          }\n        }\n      }.\u0432\u0441\u0442\u0440\u043e\u0438\u0442\u044c\u041a\u043e\u043f\u0438\u0438;\n    //}} ========= \u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u0432 ========= }}\n  ",this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e()}addMethod(l,a,h){return l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(a,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(fn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(bn.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(fe.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(P0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(h)))))),this}addBookmarksEnvironment(l,a){this.addMethod(l,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445",(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);if(a){let g=new a1(a),m=g.getBookmarks(),v=m.findIndex(_=>_==p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),y=m;if(v>0){y=[];let _=v-1;y.push(...m.slice(0,_));let b=m.splice(v,1);y.push(...b),y.push(...m.slice(_))}g.setBookmarks(y)}return d[0]}),this.addMethod(l,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437",(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);if(a){let g=new a1(a),m=g.getBookmarks(),v=m.findIndex(_=>_==p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),y=m;if(v>=0&&v+1<m.length){y=[],y.push(...m.slice(0,v));let b=m.splice(v,1),C=m.splice(v,1);y.push(...C),y.push(...b),y.push(...m.slice(v))}g.setBookmarks(y)}return d[0]}),this.addMethod(l,"\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);if(a){let g=new a1(a),m=g.getBookmarks(),v=m.findIndex(_=>_==p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),y=m;v>=0&&m.splice(v,1),g.setBookmarks(y)}return d[0]})}run(l,a=null,h=null,d=null){this.\u0434\u0432\u0438\u0436\u043e\u043a\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d||(this.\u0434\u0432\u0438\u0436\u043e\u043a\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d=!0,this.run(this.\u0441\u0442\u0440\u043e\u043a\u0430\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438\u0414\u0432\u0438\u0436\u043a\u0430));let f=a||Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),p=h||Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),g=d||Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),m=this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434.get(l);if(null==m){let _=new F0,b=_.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(l);if(this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438.length>=10){let C=this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438.shift();C&&this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434.delete(C)}this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438.push(l),this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434.set(l,b),m=b,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(_)}let v=m||[],y=null;{let _=this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v),[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),f,p,g],[fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435"),fe.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442")],!0,!0,!1,null));_&&_.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()&&"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e"==_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&(y=g.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"))}return y}}class Zz{constructor(l){this.check=l}static builder(){return new Zz(!1)}setCheck(l){return this.check=l,this}}class Xz extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d}static builder(){return new Xz("",null,null,Zz.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}let zJe=(()=>{class c{constructor(a){this.config=a}get cbData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{"clr-checkbox":!0}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-checkbox"]],inputs:{data:"data"},decls:6,vars:3,consts:[[1,"clr-form-control","no-print"],[1,"clr-control-container","clr-control-inline"],[1,"clr-checkbox-wrapper"],["type","checkbox","id","vertical-checkbox1","name","checkbox-inline-1","value","option1",3,"checked","ngClass","click"],["for","vertical-checkbox1",1,"clr-control-label"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),ee("click",function(f){return h.onClick(f)}),F(),I(4,"label",4),ie(5),F()()()()),2&a&&(P(3),R("checked",h.cbData.classes.check)("ngClass",h.getClasses()),P(2),Ut(h.text))},dependencies:[si,cs]}),c})();class Yz{constructor(){this.ordered=!1}static builder(){return new Yz}setOrdered(l){return this.ordered=l,this}}class Kz extends mi{constructor(l,a,h,d,f){super(l,a,h),this.classes=d,this.items=f}static builder(){return new Kz("",null,null,Yz.builder(),[])}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setItems(l){return this.items=l,this}addItem(l){return this.items.push(l),this}}function UJe(c,l){if(1&c&&(I(0,"li"),ue(1,"app-add-component",3),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}function HJe(c,l){if(1&c&&(I(0,"ol",1),X(1,UJe,2,1,"li",2),F()),2&c){const a=q();R("ngClass",a.getClasses()),P(1),R("ngForOf",a.listData.items)}}function $Je(c,l){if(1&c&&(I(0,"li"),ue(1,"app-add-component",3),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}function WJe(c,l){if(1&c&&(I(0,"ul",1),X(1,$Je,2,1,"li",2),F()),2&c){const a=q();R("ngClass",a.getClasses()),P(1),R("ngForOf",a.listData.items)}}let GJe=(()=>{class c{constructor(a){this.config=a}get listData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{list:!0}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-list"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(X(0,HJe,2,2,"ol",0),X(1,WJe,2,2,"ul",0)),2&a&&(R("ngIf",h.listData.classes.ordered),P(1),R("ngIf",!h.listData.classes.ordered))},dependencies:[si,fi,_n,Yl]}),c})();class l1{static builder(){return new l1}parse(l,a=null){return fragmentsParserStatic.parse(l,{builder:a||new zz})}}class Jz{constructor(l=!0,a=!0,h=!0,d=!0,f=!0,p=!0){this.slava1Zdrav=l,this.slava1Upok=a,this.slava2Zdrav=h,this.slava2Upok=d,this.slava3Zdrav=f,this.slava3Upok=p}static builder(){return new Jz}setSlava1Zdrav(l){return this.slava1Zdrav=l,this}setSlava1Upok(l){return this.slava1Upok=l,this}setSlava2Zdrav(l){return this.slava2Zdrav=l,this}setSlava2Upok(l){return this.slava2Upok=l,this}setSlava3Zdrav(l){return this.slava3Zdrav=l,this}setSlava3Upok(l){return this.slava3Upok=l,this}isLiveAcceptable(l){let a=!1;return a=l?this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav:this.slava1Upok||this.slava2Upok||this.slava3Upok,a}getLiveValue(){let l=null,a=this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav;return a!==(this.slava1Upok||this.slava2Upok||this.slava3Upok)&&(l=a),l}}class eU extends mi{constructor(l,a,h,d,f){super(l,a,h),this.classes=d,this.readonly=f,this.id="",this.targetId="",this.printerHandler=CS.builder()}static builder(){return new eU("",null,null,Jz.builder(),!1)}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setReadonly(l){return this.readonly=l,this}setId(l){return this.id=l,this}setTargetId(l){return this.targetId=l,this}}class tU extends Tu{constructor(l,a,h){super(),this.alertClass=l,this.alertShape=a,this.noPrint=h}static builder(){return new tU("alert-danger","exclamation-circle",!1)}setAlertClass(l){return this.alertClass=l,this.markChanged(),this}setAlertShape(l){return this.alertShape=l,this.markChanged(),this}setNoPrint(l){return this.noPrint=l,this.markChanged(),this}}class Fc{constructor(l,a,h){this.text=l,this.enabled=a,this.onClick=h}static builder(){return new Fc("",!0,null)}setText(l){return this.text=l,this}setEnabled(l){return this.enabled=l,this}setOnClick(l){return this.onClick=l,this}runOnClick(){return this.onClick&&this.onClick(this),this}}class Nc extends mi{constructor(l,a,h,d,f,p,g){super(l,a,h),this.errors=d,this.classes=f,this.buttons=p,this.actions=g}static builder(){return new Nc("",null,null,[],tU.builder(),[],[])}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setErrors(l){return this.errors=l,this}setButtons(l){return this.buttons=l,this}setActions(l){return this.actions=l,this}updateClasses(l){return l(this.classes),this}}class nU{constructor(l,a){this.prefix=l,this.name=a}static builder(){return new nU("","")}setPrefix(l){return this.prefix=l,this}setName(l){return this.name=l,this}}class Fn{constructor(l,a){this.index=l,this.name=a}static builder(){return new Fn(-1,"")}setIndex(l){return this.index=l,this}setName(l){return this.name=l,this}}let eA=(()=>{class c{constructor(){this.statuses=[Fn.builder().setIndex(1).setName("\u0431\u043e\u043b."),Fn.builder().setIndex(2).setName("\u0431."),Fn.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),Fn.builder().setIndex(2).setName("\u0442.\u0431."),Fn.builder().setIndex(3).setName("\u043f\u0443\u0442."),Fn.builder().setIndex(3).setName("\u043f."),Fn.builder().setIndex(4).setName("\u0437\u043a."),Fn.builder().setIndex(5).setName("\u0437\u0430\u0431\u043b.")],this.statusesWiman=[Fn.builder().setIndex(1).setName("\u0431\u043e\u043b."),Fn.builder().setIndex(2).setName("\u0431."),Fn.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),Fn.builder().setIndex(2).setName("\u0442.\u0431."),Fn.builder().setIndex(3).setName("\u043f\u0443\u0442."),Fn.builder().setIndex(3).setName("\u043f."),Fn.builder().setIndex(4).setName("\u0437\u043a."),Fn.builder().setIndex(5).setName("\u043d\u0435\u043f\u0440\u0430\u0437\u0434."),Fn.builder().setIndex(6).setName("\u0437\u0430\u0431\u043b.")],this.statusesDead=[Fn.builder().setIndex(1).setName("\u043d.\u043f."),Fn.builder().setIndex(2).setName("\u043f.\u043f."),Fn.builder().setIndex(3).setName("\u0443\u0431.")],this.prefixes=[Fn.builder().setIndex(1).setName("\u043f\u0430\u0442\u0440."),Fn.builder().setIndex(2).setName("\u0441\u0445\u0438\u043c\u0438\u0442\u0440."),Fn.builder().setIndex(3).setName("\u043c\u0438\u0442\u0440."),Fn.builder().setIndex(4).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f."),Fn.builder().setIndex(5).setName("\u0430\u0440\u0445\u0438\u0435\u043f."),Fn.builder().setIndex(6).setName("\u0441\u0445\u0438\u0435\u043f."),Fn.builder().setIndex(7).setName("\u0435\u043f."),Fn.builder().setIndex(8).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c."),Fn.builder().setIndex(9).setName("\u0430\u0440\u0445\u0438\u043c."),Fn.builder().setIndex(10).setName("\u043f\u0440\u043e\u0442\u043e\u043f\u0440."),Fn.builder().setIndex(11).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),Fn.builder().setIndex(12).setName("\u0438\u0433\u0443\u043c."),Fn.builder().setIndex(13).setName("\u043f\u0440\u043e\u0442."),Fn.builder().setIndex(14).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c."),Fn.builder().setIndex(15).setName("\u0438\u0435\u0440\u043e\u043c."),Fn.builder().setIndex(16).setName("\u0438\u0435\u0440."),Fn.builder().setIndex(17).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434."),Fn.builder().setIndex(18).setName("\u0430\u0440\u0445\u0438\u0434."),Fn.builder().setIndex(19).setName("\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a."),Fn.builder().setIndex(20).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434."),Fn.builder().setIndex(21).setName("\u0438\u0435\u0440\u043e\u0434."),Fn.builder().setIndex(22).setName("\u0434\u0438\u0430\u043a."),Fn.builder().setIndex(23).setName("\u0441\u0445\u0438\u043c."),Fn.builder().setIndex(24).setName("\u043c\u043e\u043d."),Fn.builder().setIndex(25).setName("\u0438\u043d."),Fn.builder().setIndex(26).setName("\u0438\u043f\u043e\u0434\u0438\u0430\u043a."),Fn.builder().setIndex(28).setName("\u0447\u0442."),Fn.builder().setIndex(27).setName("\u043f\u043e\u0441\u043b."),Fn.builder().setIndex(29).setName("\u043e."),Fn.builder().setIndex(30).setName("\u043c\u043b."),Fn.builder().setIndex(31).setName("\u0432.")],this.prefixesWiman=[Fn.builder().setIndex(1).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),Fn.builder().setIndex(2).setName("\u0438\u0433\u0443\u043c."),Fn.builder().setIndex(3).setName("\u0441\u0445\u0438\u043c."),Fn.builder().setIndex(4).setName("\u043c\u043e\u043d."),Fn.builder().setIndex(5).setName("\u0438\u043d."),Fn.builder().setIndex(6).setName("\u043c\u0430\u0442."),Fn.builder().setIndex(7).setName("\u043f\u043e\u0441\u043b."),Fn.builder().setIndex(8).setName("\u043e."),Fn.builder().setIndex(9).setName("\u043c\u043b."),Fn.builder().setIndex(10).setName("\u0432.")]}isKnownPrefix(a){let h=!1,d=f=>f.findIndex(p=>p.name===a)>=0;return h=h||d(this.prefixes),h=h||d(this.prefixesWiman),h=h||d(this.statuses),h=h||d(this.statusesWiman),h}getName(a){const h=a.split(/\s/),d=[];return h.forEach(f=>{this.isKnownPrefix(f)||d.push(f)}),d.join(" ")}getNameFrom(a,h){let d="";return h.forEach(f=>{f.index===a&&(d=f.name)}),d}getPrefixByName(a,h){return this.getIndexByName(a,h?this.prefixes:this.prefixesWiman)}getStatusByName(a,h){return this.getIndexByName(a,h?this.statuses:this.statusesWiman)}getPrefix(a,h=!0,d=!0){return this.getNameFrom(a,h?this.prefixes:this.prefixesWiman)}getStatus(a,h=!0,d=!0){return this.getNameFrom(a,d?h?this.statuses:this.statusesWiman:this.statusesDead)}getIndexByName(a,h){const d=a.split(/\s/);let f=0;return d.forEach(p=>{h.forEach(g=>{g.name===p&&f<g.index&&(f=g.index)})}),f}getPrefixedName(a){let h=a.split(/\s/),d="",f="",p=[...this.prefixes,...this.prefixesWiman,...this.statuses,...this.statusesWiman,...this.statusesDead];return h.forEach((g,m)=>{let v=m+1==h.length?"":" ";p.findIndex(y=>y.name==g)>=0?d+=g+v:f+=g+v}),new nU(d,f)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class iU{constructor(l="label-warning",a="label-success",h=!1){this.labelSelected=l,this.labelNormal=a,this.noPrint=h}static builder(){return new iU}setLabelSelected(l){return this.labelSelected=l,this}setLabelNormal(l){return this.labelNormal=l,this}setNoPrint(l){return this.noPrint=l,this}}class pa{constructor(l,a,h){this.text=l,this.tag=a,this.selected=h,this.getSpanClassDetector=za.builder()}static builder(){return new pa("","",!1)}setText(l){return this.text=l,this}setTag(l){return this.tag=l,this}setSelected(l){return this.selected=l,this}}class Ou extends mi{constructor(l,a,h,d,f){super(l,h,d),this.items=a,this.classes=f}static builder(){return new Ou("",[],null,null,iU.builder())}setText(l){return super.setText(l)}setItems(l){return this.items=l,this}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}updateClasses(l){return l(this.classes),this}}class rU{constructor(){this.bookSettings=!0,this.calculatorSettings=!1,this.memorialSettings=!1}static builder(){return new rU}clear(){this.bookSettings=!1,this.calculatorSettings=!1,this.memorialSettings=!1}setBookSettings(l){return l&&this.clear(),this.bookSettings=l,this}setCalculatorSettings(l){return l&&this.clear(),this.calculatorSettings=l,this}setMemorialSettings(l){return l&&this.clear(),this.memorialSettings=l,this}}class bh extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d}static builder(){return new bh("",null,null,rU.builder().setBookSettings(!0))}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}updateClasses(l){return l(this.classes),this}}class sU{constructor(l,a,h){this.name=l,this.pvalue=a,this.onChange=h}get value(){return this.pvalue}set value(l){this.pvalue=l,this.onChange&&this.onChange()}}let $i=(()=>{class c{constructor(){this.properties=[],this.onChange=null}setOnChangeCallback(a){this.onChange=a}load(a){this.properties=[],a.split(";").forEach(d=>{const f=d.split(":");if(2===f.length)this.properties.push(new sU(f[0].trim(),f[1].trim(),this.onChange));else if(1===f.length){let p=f[0].trim();if(p){let g=this.properties.findIndex(m=>m.name==c.TEXT);g>=0?this.properties[g].value+=p:this.properties.push(new sU(c.TEXT,p,this.onChange))}}})}toString(){let a="";return this.properties.forEach(h=>{h.value&&(a&&(a+=";"),a+=h.name+":"+h.value)}),a}pushNew(a,h){this.properties.push(new sU(a,h,this.onChange))}getValue(a,h){let d=null;return this.properties.forEach(f=>{f.name===a&&(d=f.value)}),null==d?h?d:"":d}setValue(a,h){let d=!1;this.properties.forEach(f=>{f.name===a&&(f.value=h,d=!0)}),d||this.pushNew(a,h)}getOffset(){const a=this.getValue(c.OFFSET);let h=a?+a:-1;return Number.isInteger(h)||(h=-1),h}isLive(){const a=this.getValue(c.STATUS,!0);return null==a?null:!(a===c.STATUS_DEAD||a===c.STATUS_DEAD_WOMAN)}isMan(){const a=this.getValue(c.GENDER,!0);return null==a?null:a!==c.GENDER_WOMAN}}return c.OFFSET="\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435",c.ORDER="\u043f\u043e\u0440\u044f\u0434\u043e\u043a",c.STATUS="\u0441\u0442\u0430\u0442\u0443\u0441",c.STATUS_LIVE="\u0436\u0438\u0432\u043e\u0439",c.STATUS_LIVE_WOMAN="\u0436\u0438\u0432\u0430\u044f",c.STATUS_DEAD="\u0443\u0441\u043e\u043f\u0448\u0438\u0439",c.STATUS_DEAD_WOMAN="\u0443\u0441\u043e\u043f\u0448\u0430\u044f",c.GENDER="\u043f\u043e\u043b",c.GENDER_MAN="\u043c\u043e\u0436\u0441\u043a\u043e\u0439",c.GENDER_WOMAN="\u0436\u0435\u043d\u0441\u043a\u0438\u0439",c.REF_ID="\u0441\u0441\u044b\u043b\u043a\u0430",c.TEXT="\u0442\u0435\u043a\u0441\u0442",c.UNION="\u043e\u0431\u044a\u0435\u0434\u0435\u043d\u0435\u043d\u043e",c.TAGS="\u0442\u0435\u0433\u0438",c.YES="\u0434\u0430",c.NO="\u043d\u0435\u0442",c})();class oU{constructor(){}static builder(){return new oU}}class aU extends mi{constructor(l,a,h,d,f){super(l,a,h),this.classes=d,this.person=f}static builder(){return new aU("",null,null,oU.builder(),new Kn(-1,"","",-1,!0,""))}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setPerson(l){return this.person=l,this}updateClasses(l){return l(this.classes),this}}class QJe{constructor(l,a){this.index=l,this.include=a}setInclude(l){return this.include=!!l,this}}class jJe{constructor(l,a,h){this.left=l,this.right=a,this.everyYear=h}}class qJe{constructor(l,a,h){this.date=l,this.month=a,this.year=h}}class ZJe{constructor(l,a){this.date=l,this.intervals=a}eventDate(l=0,a=0){let h=new Date;return h.setFullYear(+this.date.year+a,+this.date.month-1,+this.date.date),h.setDate(h.getDate()+l),h}isToday(){if(this.isTodayDate(this.eventDate()))return!0;let l=!1;return this.intervals.forEach(a=>{this.isTodayInterval(a)&&(l=!0)}),l}isTodayDate(l){let a=new Date;return l.getFullYear()==a.getFullYear()&&l.getMonth()==a.getMonth()&&l.getDate()==a.getDate()}isLess(l,a,h=!1){return!h&&l.getFullYear()<a.getFullYear()||!(!h&&l.getFullYear()>a.getFullYear())&&(l.getMonth()<a.getMonth()||!(l.getMonth()>a.getMonth())&&l.getDate()<a.getDate())}isEquals(l,a,h=!1){return(h||l.getFullYear()==a.getFullYear())&&l.getMonth()==a.getMonth()&&l.getDate()==a.getDate()}isTodayInterval(l){let a=l.everyYear?[-1,0,1]:[0],h=!1,d=new Date;return a.forEach(f=>{if(!h){let p=this.eventDate(0,f),g=this.eventDate(l.left.index,f),m=this.eventDate(l.right.index,f);if(g.getTime()>m.getTime()){let T=g;g=m,m=T}let v=l.everyYear&&g.getFullYear()<p.getFullYear(),y=l.everyYear&&m.getFullYear()>p.getFullYear(),_=this.isLess(g,d,l.everyYear),b=this.isLess(d,m,l.everyYear),C=l.left.include&&this.isEquals(g,d,l.everyYear),x=l.right.include&&this.isEquals(d,m,l.everyYear),S=_||C,w=b||x;(!v&&!y&&S&&w||(v||y)&&y!=v&&(w||S)||v&&y&&(!w||!S))&&(h=!0)}}),h}}class XJe{newEvent(l,a){return new ZJe(l,a)}newEventDate(l,a,h){return new qJe(l,a,h)}newDaysInterval(l,a,h){return new jJe(l,a,h)}newDay(l,a){return new QJe(l,a)}}let tA=(()=>{class c{parseEvent(a){return dateEventsParserStatic.parse(a,{builder:new XJe})}isToday(a){let h=new $i;h.load(a);let d=!1;return h.properties.forEach(f=>{if(!d)try{let p=this.parseEvent(f.value);p&&p.isToday()&&(d=!0)}catch(p){}}),d}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class YJe{constructor(l){this.cacheMap=new Map,this.getter=l}setGetter(l){return this.getter=l,this}getCachedResult(l,a,h){let d=this.cacheMap.get(l),f=null==d?void 0:d.get(a),p=null==f?void 0:f.get(h);return null!=p||(p=this.getter(l,a,h),f||(f=new Map),f.set(h,p),d||(d=new Map),d.set(a,f),this.cacheMap.set(l,d)),p}clear(){return this.cacheMap.clear(),this}}let lU=(()=>{class c{constructor(a,h,d,f,p,g){this.authSvc=a,this.memorialsSvc=h,this.personsSvc=d,this.config=f,this.tagsSvc=p,this.dateEventsSvc=g,this.serviceReady=!1,this.personsCache=new YJe((m,v,y)=>this.getChachedPersonsDirect(m,v,y))}getChachedPersonsDirect(a,h,d){var f;let p=null===(f=this.memorials)||void 0===f?void 0:f.items.find(g=>g.name==a);if(this.persons){let g=!!p&&this.tagsSvc.tagsHasFlag(p.tags,"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"),m=!!p&&this.tagsSvc.tagsHasFlag(p.tags,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"),v=this.persons.items;return h&&(v=v.filter(_=>null==d||d==_.live)),v.filter(_=>m||!p||!!this.tagsSvc.intersectTags(_.tags,p.tags)).filter(_=>!g||this.dateEventsSvc.isToday(_.description))}return[]}get isReady(){return this.serviceReady}setup(a){this.doLogin(a)}doLogout(){this.authSvc.isLoggedIn().then(a=>{a.result?this.authSvc.logout().then(h=>{this.serviceReady=!1,this.config.authId=""}):(this.serviceReady=!1,this.config.authId="")})}reloadMemorials(a){this.memorialsSvc.reloadMemorials(h=>{h&&this.personsSvc.reloadPersons(),a&&a(this.serviceReady)})}doLogin(a){this.authSvc.isLoggedIn().then(h=>{h.result?(this.serviceReady=!0,this.reloadMemorials(a)):this.authSvc.login().then(d=>{if(d.result){let f="hramvkostino",p="hramvkostino";this.authSvc.requestForUser(f,p).then(g=>{this.serviceReady=g.valid,this.config.authId=g.authId,this.config.authBody=btoa(f+":"+p),this.reloadMemorials(a)})}})})}get memorials(){return this.memorialsSvc.getMemorials()}get persons(){return this.personsSvc.getPersonsDirect()}getAuth(){return this.authSvc}getMemorials(){return this.memorialsSvc}getPersons(){return this.personsSvc}}return c.\u0275fac=function(a){return new(a||c)(Ae(yh),Ae(r1),Ae(_g),Ae(on),Ae(ha),Ae(tA))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class cU{static builder(){return new cU}newLine(){return fU.builder()}newMemorial(){return dU.builder()}newComment(){return hU.builder()}}var Td=(()=>(function(c){c[c.Memorial=0]="Memorial",c[c.Line=1]="Line",c[c.Comment=2]="Comment"}(Td||(Td={})),Td))();class uU{constructor(l){this.type=l}toString(){return""}}class hU extends uU{constructor(l){super(Td.Comment),this.text=l}static builder(){return new hU("")}setText(l){return this.text=l,this}toString(){return`/*${this.text}*/`}}class dU extends uU{constructor(l,a){super(Td.Memorial),this.name=l,this.tags=a}static builder(){return new dU("","")}setName(l){return this.name=l,this}setTags(l){return this.tags=l,this}toString(){return`[${this.name}${this.tags?":"+this.tags:""}]`}}class fU extends uU{constructor(l,a,h,d){super(Td.Line),this.name=l,this.description=a,this.offset=h,this.live=d}static builder(){return new fU("","",-1,!0)}setName(l){return this.name=l,this}setDescription(l){return this.description=l,this}setOffset(l){return this.offset=l,this}setLive(l){return this.live=l,this}toString(){return`${this.name}(${this.description?this.description:""})${null!=this.offset&&this.offset>=0?" "+this.offset:""}${this.live?"":" \u0443\u0441\u043e\u043f\u0448\u0438\u0439"}`}}class Nhe{static parse(l){return personsParserStatic.parse(l,{builder:cU.builder()})}}class Yf{constructor(l,a,h='"'){this.value=a,this.simbol=h,this.names=null,this.names=[l],this.value=a}static newFrom(l){return new Yf(l.name,l.value)}get name(){return this.names?this.names.join(":"):""}set name(l){this.names=[l]}toString(){return this.name+"="+this.simbol+this.value+this.simbol}}class Lhe{constructor(l="  ",a=!0){this.prefix=l,this.prettyPrint=a,this.offset=0}incOffset(){return++this.offset,this.getOffset()}decOffset(){return--this.offset,this.getOffset()}getOffset(){let l="";for(let a=0;a<this.offset;++a)l+=this.prefix;return l}}class ga{constructor(l,a,h,d){this.name=l,this.attributes=a,this.children=h,this.text=d,this.name=l,this.attributes=a,this.children=h,this.text=d}static newFrom(l){const a=[];l.attributes&&l.attributes.forEach(d=>{a.push(Yf.newFrom(d))});const h=[];return l.children&&l.children.forEach(d=>{h.push(ga.newFrom(d))}),new ga(l.name,a,h,l.text)}setAttributes(l){return this.attributes=l,this}setChildren(l){return this.children=l,this}toString(l=null){let a="";if(this.name&&(a+="<"+this.name,this.attributes&&this.attributes.forEach(h=>{a+=" "+h.toString()}),a+=">"),this.children&&this.children.length){let h=this.children.length>1||!!this.children[0].name;this.children.forEach(d=>{h&&(null==l?void 0:l.prettyPrint)&&(a+="\r\n",a+=l.incOffset()),a+=d.toString(l),h&&(null==l?void 0:l.prettyPrint)&&l.decOffset()}),h&&(null==l?void 0:l.prettyPrint)&&(a+="\r\n",a+=l.getOffset())}return a+=this.name?"</"+this.name+">":this.text,a}}let Bhe=(()=>{class c{parseXml(a){const h=xmlParserStatic.parse(a),d=[];return h.forEach(f=>{d.push(ga.newFrom(f))}),d}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class Vhe{constructor(l,a){this.person=l,this.props=a}}class pU{constructor(l,a){this.memorial=l,this.lines=a}static builder(){return new pU(null,[])}setMemorial(l){return this.memorial=l,this}setLines(l){return this.lines=l,this}addLine(l){return this.lines.push(l),this}toString(){var l;return`${null===(l=this.memorial)||void 0===l?void 0:l.toString()}\n${this.lines.map(a=>a.toString()).join("\r\n")}`}}let gU=(()=>{class c{constructor(a,h,d,f,p,g){this.mems=a,this.ks=h,this.config=d,this.uiConfig=f,this.xml=p,this.nameSvc=g}addPersons(a,h,d,f=!0,p=null,g=0,m=1){try{this.addPersonsDirect(a,h,d,f,p)}catch(v){this.config.addAlert(new Fr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+v,"OK",180)),p&&p()}}previewPersons(a){const h=Nhe.parse(a);let d=[],f=null;return h.forEach(p=>{switch(p.type){case Td.Memorial:{let g=p;f=pU.builder().setMemorial(g),d.push(f)}break;case Td.Line:{let g=p;null==f||f.addLine(g)}}}),d}addPersonsDirect(a,h,d,f=!0,p=null,g=0,m=1){const v=Nhe.parse(h);let y=[],_="",b=new Map,C=this.mems.getActivePredefinedMemorialsRaw(),x=!1;v.forEach(S=>{switch(S.type){case Td.Memorial:_=S.name,x=null!=C.find(T=>T==_);break;case Td.Line:{let w=S,T=a(_);if(T>=0){const O=new $i;O.load(w.description?w.description:"");const k=O.getOffset(),D=w.live||O.isLive();O.setValue($i.ORDER,""),O.setValue($i.OFFSET,""),O.setValue($i.STATUS,""),O.setValue($i.UNION,"");let M=d(_);{let z=O.getValue($i.TAGS);z&&z.split(",").forEach(Z=>{let Y=Z.trim();Y&&(M=ha.addTagToTags(M,Y))})}const A=new UKe(T,-1,w.name,O.toString(),k,null!=D&&D,M);let L=O.getValue($i.REF_ID),E=!1,V=z=>{let U,Z=this.getNormalName(A.name);if(b.forEach(Y=>{Z==this.getNormalName(Y.person.name)&&O.getValue($i.TEXT)&&O.getValue($i.TEXT)===Y.props.getValue($i.TEXT)&&(U=Y.person)}),U){if(!ha.tagsHasFlag(U.tags,_)){U.name=this.mergeNames(U.name,A.name),U.tags=ha.addTagToTags(U.tags,_);const Y=new $i;Y.load(U.description),Y.getValue($i.UNION)!=$i.YES&&Y.setValue($i.UNION,$i.YES),U.description=Y.toString(),E=!0}}else b.set(z||"#"+b.size,new Vhe(A,O))};L?b.has(L)?(b.get(L).person.tags+=","+_,E=!0):b.set(L,new Vhe(A,O)):this.uiConfig.ui.mergeNameOnImport.getBooleanValue()&&V(""),!E&&!x&&y.push(A)}}}}),this.addPersonsByPersons(y,p)}addPersonsByPersons(a=[],h=null){a.length?this.ks.newPersons(a).then(d=>{setTimeout(()=>{this.config.addAlert(d&&d.success?new Fr("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: "+a.length+` ${c.getWordName(a.length)}.`,"OK",30):new Fr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+(d?d.error:"?"),"OK",180)),h&&h()},0)},d=>{this.config.addAlert(new Fr("\u041e\u0448\u0438\u0431\u043a\u0430: "+d,"OK",180))}):(this.config.addAlert(new Fr("\u041f\u0435\u0440\u0441\u043e\u043d \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.","OK",60)),h&&h())}static getWordName(a){let h="";switch(Math.floor(a%10)){case 1:h="\u0438\u043c\u044f";break;case 2:case 3:case 4:h="\u0438\u043c\u0435\u043d\u0438";break;default:h="\u0438\u043c\u0451\u043d"}return h}addPersonsOld(a,h,d,f=!0,p=null,g=0,m=1){const v=personsParserStatic.parse(h),y={i:0,memorialName:""},_=new $i;this.config.waitingIOOperationValueMax=v.length*m;const b=C=>{if(this.config.waitingIOOperationValue=y.i+v.length*g,C&&!C.success)return this.config.addAlert(new Fr(C.error,"OK",30)),this.endIOWaiting(),void(null!=p&&p());if(y.i>=v.length)this.endIOWaiting(),null!=p&&p();else{const x=v[y.i];if(++y.i,void 0!==x.memorial)y.memorialName=x.memorial,setTimeout(()=>{b(C)},0);else if(void 0===x.comment){let S=a(y.memorialName);if(S>=0){_.load(x.description?x.description:"");const w=_.getOffset(),T=x.live||_.isLive();_.setValue($i.ORDER,""),_.setValue($i.OFFSET,""),_.setValue($i.STATUS,"");const O=new Kn(-1,x.name,_.toString(),w,T,d(y.memorialName));this.ks.newPerson(S,O).then(k=>{setTimeout(()=>{b(k)},0)},k=>{setTimeout(()=>{b(null)},0)})}else setTimeout(()=>{b(C)},0)}else b(null)}};b(null),this.beginIOWaiting(f,v.length*g)}beginIOWaiting(a,h=0){this.config.incWaitingIO(),this.config.waitingIOOperationValue=h}endIOWaiting(){this.config.decWaitingIO()}onChildren(a,h){a&&a.forEach(d=>{h&&h(d)})}getTextFromTag(a){let h="";return a&&(a.text?h+=a.text:a.children.forEach(d=>{d.text&&(h+=d.text)})),h}onAttribute(a,h,d){a&&a.forEach(f=>{f.name===h&&d&&d(f)})}sortByOrd(a){let h=[];return h=a.slice(0),h.sort((d,f)=>{let p=0,g=0;return this.onAttribute(d.attributes,"ord",m=>{p=+m.value}),this.onAttribute(f.attributes,"ord",m=>{g=+m.value}),p-g}),h}readTagAsText(a){let h=a.text?a.text:"";return this.onChildren(a.children,d=>{h+=this.readTagAsText(d)}),h}convertRecord(a,h){if("record"!==a.name)return"";let d="",f="",p="",g=!0,m="";if(this.onAttribute(a.attributes,"gender",v=>{g="true"===v.value}),this.onAttribute(a.attributes,"prefix",v=>{m=this.nameSvc.getPrefix(+v.value,g,h)}),this.onAttribute(a.attributes,"status",v=>{let y=this.nameSvc.getStatus(+v.value,g,h);y&&(m=y+(m&&" "+m))}),this.onChildren(a.children,v=>{"name"===v.name?f=this.readTagAsText(v):"comment"===v.name&&(p=this.readTagAsText(v))}),f){m&&(d+=m+" "),d+=f+"([";const v=new $i;v.load(p),v.setValue($i.GENDER,g?"":$i.GENDER_WOMAN),d+=v.toString()+"])",h||(d+=" "+(g?$i.STATUS_DEAD:$i.STATUS_DEAD_WOMAN))}return d&&(d+="\n"),d}convertMemorial(a){let h="",d=!0;return this.onAttribute(a.attributes,"health",f=>{d="true"===f.value}),this.onChildren(a.children,f=>{"records"===f.name&&this.onChildren(this.sortByOrd(f.children),p=>{h+=this.convertRecord(p,d)})}),h}convertXmlToString(a){const h=this.xml.parseXml(a);return this.convertTagsToString(h)}convertTagsToString(a){let h="";return a.forEach(d=>{"memorials"===d.name&&this.onChildren(d.children,f=>{let p="";this.onChildren(f.children,g=>{"notes"===g.name&&(p=this.readTagAsText(g))}),f.children.forEach(g=>{"name"===g.name&&(h+="["+this.getTextFromTag(g)+(p?":"+p:"")+"]\n")}),h+=this.convertMemorial(f)})}),h}getNormalName(a){let h=!1;return a.split(/[ \t\r\n]+/).map(f=>f.trim()).filter(f=>!!f).filter(f=>h?"":(h=h||!f.endsWith("."),f)).join(" ")||a}getPrefixes(a){let h=!1;return a.filter(d=>h||(h=h||!d.endsWith("."))?"":d).filter(d=>!!d)}getName(a){let h=!1;return a.filter(d=>h?"":(h=h||!d.endsWith("."))?d:"").filter(d=>!!d)}getPostfixes(a){let h=!1;return a.filter(d=>h?d:(h=h||!d.endsWith("."),"")).filter(d=>!!d)}mergeNames(a,h){let d=a.split(/[ \t\r\n]+/).map(C=>C.trim()).filter(C=>!!C),f=h.split(/[ \t\r\n]+/).map(C=>C.trim()).filter(C=>!!C),p=this.getPrefixes(d).join(" "),g=this.getName(d).join(" "),m=this.getPostfixes(d).join(" "),v=this.getPrefixes(f).join(" "),y=this.getName(f).join(" "),_=this.getPostfixes(f).join(" ");if(g!=y||p!=v)throw new Error(`\u041d\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430: '${a}' != '${h}'.`);let b=[];return p&&b.push(p),g&&b.push(g),(m||_)&&(m?(b.push(m),_&&!m.includes(_)&&b.push(_)):_&&b.push(_)),b.join(" ")}}return c.\u0275fac=function(a){return new(a||c)(Ae(r1),Ae(_g),Ae(on),Ae(ti),Ae(Bhe),Ae(eA))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),zhe=(()=>{class c{constructor(a,h){this.config=a,this.memXmlLoader=h,this.text="",this.memName=""}onLoadAnyFile(a,h,d){this.memName=h,a.name.toLowerCase().endsWith(".csv")||a.name.toLowerCase().endsWith(".tsv")?this.onLoadXsvFile(a,d):this.onLoadXmlFile(a,d)}convertXsvToString(a,h,d=!0){let f=(b,C)=>{let x=b.split(C);for(let S=0;S<x.length;S++)x[S]=x[S].trim();return x},g=f(a,"\n"),m=0,v="",y=[],_=[];{let b=f(g[m],h);if(2!=b.length||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"!=b[0]||"\u0422\u0435\u0433\u0438"!=b[1])return this.config.addAlert(new Fr("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(++m;g.length>m&&g[m];){b=f(g[m++],h);let C=b[0].trim(),x=b[1].trim();_.push(C),y.push(x),d&&(v+=`[${C}${x?":"+x:""}]\r\n`)}if(++m,b=f(g[m++],h),5!=b.length||"\u0418\u043c\u044f"!=b[0]||"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"!=b[1]||"\u0421\u0442\u0430\u0442\u0443\u0441"!=b[2]||"\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"!=b[3]||"\u0422\u0435\u0433\u0438"!=b[4])return this.config.addAlert(new Fr("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(d&&(v+="[\u0432\u0441\u0435]\r\n");g.length>m&&g[m];){b=f(g[m++],h);let C=b[4].split(","),x=!1;if(C&&C.forEach(w=>{(!this.memName||w==this.memName)&&(x=!0)}),!x)continue;v+=b[0],v+="(";let S=v.length;v+=b[1],+b[3]>=0&&(b[1]&&(v+=";"),v+=$i.OFFSET+":",v+=b[3]),v.length!=S&&(v+=";"),v+=$i.TAGS+":",v+=b[4],v+=")",b[2].toLowerCase()===$i.STATUS_LIVE||b[2].toLowerCase()===$i.STATUS_LIVE_WOMAN||(v+=" "+$i.STATUS_DEAD),v+="\r\n"}}return v}onLoadXsvFile(a,h){if(!a)return;const d=new FileReader;d.onload=f=>{try{this.text=this.convertXsvToString(d.result.toString(),a.name.toLowerCase().endsWith(".csv")?";":"\t")}catch(p){this.config.addAlert(Fr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+p,"OK",30))}h&&h(this.text)},d.readAsText(a)}makeHtml(a){return a.replace(/(?:\r\n|\r|\n)/g,"<br />\n")}onLoadXmlFile(a,h){if(!a)return;const d=new FileReader;d.onload=f=>{try{let p=a.name.toLowerCase().endsWith(".xml");this.text=p?this.memXmlLoader.convertXmlToString(d.result.toString()):d.result.toString()}catch(p){this.config.addAlert(Fr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+p,"OK",30))}h&&h(this.text)},d.readAsText(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(on),Ae(gU))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class KJe{constructor(l,a,h){this.memorial=l,this.setName=a,this.getName=h}}let Uhe=(()=>{class c{constructor(a,h){this.mems=a,this.nameSvc=h}getMemorialsXmlString(a,h,d){let f="<?xml version='1.0' encoding='UTF-8' ?>\n",p=null;h.forEach((m,v)=>{let y=this.generateMemorials(a,m,d[v]);y&&(null==p?p=y:p.children.push(...y.children))}),null==p&&(p=new ga("memorials",[],[],""));let g=new Lhe;return f+=p.toString(g),f}getPersonsXmlString(a,h,d){let f="<?xml version='1.0' encoding='UTF-8' ?>\n",p=this.generateMemorials(a,h,d),g=new Lhe;return f+=p.toString(g),f}generateMemorials(a,h,d){let f=new ga("memorials",[],[],""),p=[],g=m=>{m&&m.memorial.children.length&&(f.children.push(m.memorial),p.push(m))};return g(this.getMemorial(a,h,d,!0,1)),g(this.getMemorial(a,h,d,!1,2)),f}getDescription(a,h,d=!1,f=""){const p=new $i;return p.load(a.description),p.setValue($i.OFFSET,a.offset<0?"":""+a.offset),p.setValue($i.ORDER,""),p.setValue($i.STATUS,""),d&&p.setValue($i.GENDER,""),f&&p.setValue($i.REF_ID,f),p.toString()}getMemorial(a,h,d,f,p,g=!0){const m=h;let v=null,y=new ga("memorial",[new Yf("health",""+f),new Yf("ord",""+p)],[new ga("name",[],[v=new ga("",[],[],m||"\u0432\u0441\u0435")],""),new ga("notes",[],[new ga("",[],[],d)],"")],""),_=new ga("records",[],[],"");y.children.push(_);let C=this.mems.getActivePredefinedMemorialsRaw();return a.filter(x=>!h||ha.tagsHasFlag(x.tags,h)).forEach((x,S)=>{const w=x.tags.split(",");let T=!1;if(w.forEach(O=>{null==C.find(k=>k==O)&&(T=!0)}),T&&x.live===f){let O=this.isMan(x);_.children.push(this.newRecord(this.nameSvc.getName(x.name),O,S+1,this.nameSvc.getStatusByName(x.name,O),this.nameSvc.getPrefixByName(x.name,O),this.getDescription(x,S,!0,(x=>{let S=a.findIndex(w=>w===x);return S>=0?""+S:""})(x))))}}),g||_.children.length>0?new KJe(y,x=>{v&&(v.text=x)},()=>v?v.text:""):null}isMan(a){const h=new $i;h.load(a.description);let d=h.isMan();return null==d||d}newRecord(a,h,d,f,p,g){return new ga("record",[new Yf("gender",`${h}`),new Yf("ord",`${d}`),new Yf("status",`${f}`),new Yf("prefix",`${p}`)],[new ga("name",[],[new ga("",[],[],`${a}`)],""),new ga("comment",[],[new ga("",[],[],`${g}`)],"")],"")}}return c.\u0275fac=function(a){return new(a||c)(Ae(r1),Ae(eA))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class JJe{constructor(l){this.xsv=l,this.text="",this.useSeparator=!1}print(l,a=!0){return a&&(this.useSeparator?this.text+=this.xsv:this.useSeparator=!0),this.text+=l,this}println(l,a=!0){return this.print(l,a),this.text+="\r\n",this.useSeparator=!1,this}}let Hhe=(()=>{class c{constructor(){}getMemorialsString(a,h,d,f=";"){let p=new JJe(f);return p.print("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),p.print("\u0422\u0435\u0433\u0438"),p.println("",!1),h.forEach((g,m)=>{!g||(p.print(g),p.print(d[m]),p.println("",!1))}),p.println("",!1),p.print("\u0418\u043c\u044f"),p.print("\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),p.print("\u0421\u0442\u0430\u0442\u0443\u0441"),p.print("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"),p.print("\u0422\u0435\u0433\u0438"),p.println("",!1),a.filter(g=>{if(!h)return!0;let m=!1;return h.forEach(v=>{ha.tagsHasFlag(g.tags,v)&&(m=!0)}),m}).forEach((g,m)=>{g.tags.split(","),p.print(g.name),p.print(g.description),p.print(g.live?"\u0416\u0438\u0432\u043e\u0439":"\u0423\u0441\u043e\u043f\u0448\u0438\u0439"),p.print(""+g.offset),p.print(g.tags),p.println("",!1)}),p.text}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();var V0=(()=>(function(c){c[c.Begining=-1]="Begining",c[c.Tropari=-2]="Tropari",c[c.GospodiPomily=-3]="GospodiPomily",c[c.Molitva=-4]="Molitva"}(V0||(V0={})),V0))();class eet{constructor(l,a,h,d){this.link=l,this.name=a,this.kafizma=h,this.psalom=d}isPsalom(){return this.psalom>0}isBegining(){return this.psalom===V0.Begining}isTropari(){return this.psalom===V0.Tropari}isGospodiPomiluy(){return this.psalom===V0.GospodiPomily}isMolitva(){return this.psalom===V0.Molitva}}class tet{constructor(l,a,h,d){this.kafizma=l,this.psalom=a,this.add=h,this.filter=d}}let c1=(()=>{class c{constructor(a,h,d,f,p,g){this.psSvc=a,this.uiConfig=h,this.config=d,this.kvSvc=f,this.http=p,this.themeSvc=g,this.items=[],this.audio=null,this.current=null,this.playList=[],this.playRunning=!1,this.currentAudioValue=-1,this.currentAudioValueId=0,this.restPoint="/",this.startRequests=[],this.startRequestsId=0,this.setAudioDir(g.getAudioRootFolder(),()=>{}),this.control=this.getAudioSubscription(!0)}setAudioDir(a,h){let d="audioDir";this.kvSvc.findKey(d,f=>{f&&f.success?this.kvSvc.updateKey(vh.of(d,a),p=>{h&&h(p?p.error:null)}):this.kvSvc.insertKey(vh.of(d,a),p=>{h&&h(p?p.error:null)})})}ngOnDestroy(){this.stop()}autoPlay(){if(this.playList.length){const a=this.playList.shift();if(a){this.playRunning=!0;let h=(d,f)=>{let p=this.uiConfig.downloadAudioFile(d,"translation"+this.toString(""+this.currentAudioValue,3));p||(f=!0);let g=()=>{this.audio=new Audio(f?d:this.getPlayedLink(d)),this.audio.onended=()=>{this.autoPlay()},f||(this.audio.onerror=m=>{h(a.link,!0)});try{this.audio.play()}catch(m){}this.current=a};p?this.setAudioDir(p,()=>{g()}):g()};h(a.link,this.config.isMemoryServerType())}else this.playRunning=!1}else this.playRunning=!1}getUIAudioValue(){let a=1;try{a=+this.uiConfig.ui.audioValue.getStringValue()}catch(h){a=1}return(a<1||a>10)&&(a=1),a}reload(a,h=!1){let d=this.getUIAudioValue();if(d!==this.currentAudioValue&&(h=!0),!h&&this.items.length>0)a&&a();else{this.items=[],this.currentAudioValue=d;let f=++this.currentAudioValueId,p="audio/CS/"+this.toString(""+this.currentAudioValue,3)+".txt";this.psSvc.getText(p,g=>{if(f==this.currentAudioValueId)return g?(JSON.parse(g).forEach(v=>{this.items.push(new eet(v.link,v.name,+v.kafizma,+v.psalom))}),void(a&&a())):(this.config.addAlert(Fr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: "+this.currentAudioValue,"Ok",15)),void(a&&a()));this.config.post(()=>{a&&a()})})}}isStarted(){return!!this.audio}isPlaying(a=!1){return this.audio&&!this.audio.paused||a&&this.playRunning}currentName(){return this.current?this.current.name:""}startCheckUI(a,h,d,f,p){let g=this.uiConfig.ui.audioValue.getStringValue();if(g&&"0"!=g)return this.start(a,h,d,f,p)}start(a,h,d,f,p){let g=this.startDirect(h,d,f,p);a&&a(g)}startDirectRaw(a,h,d,f,p){f||(this.playList=[]),this.items.forEach(g=>{(h<0||g.kafizma===h)&&(d<-5||g.psalom===d)&&(!p||p(g.psalom))&&this.playList.push(g)}),a&&(!f||!this.isPlaying(!0))&&(this.isPlaying(!0)&&!f&&this.stop(),this.autoPlay())}startDirect(a,h,d,f){const p=a<0&&h<0;let g=++this.startRequestsId;return this.startRequests.push(new tet(a,h,d,f)),p||this.reload(()=>{if(g==this.startRequestsId){let m=this.startRequests;this.startRequests=[],m.forEach((v,y)=>this.startDirectRaw(y+1==m.length,v.kafizma,v.psalom,v.add,v.filter))}}),this.getAudioSubscription(p)}getAudioSubscription(a){const h=this;return new class d{close(p){return(!a||p)&&h.stop(),this}currentName(){return h.currentName()}isPlaying(){return h.isPlaying()}isStarted(){return h.isStarted()}next(){return h.stop(),h.autoPlay(),this}pause(){return h.pause(),this}resume(){return h.resume(),this}}}next(){this.stop(),this.autoPlay()}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio=null,this.current=null,this.playRunning=!1)}pause(){this.audio&&this.audio.pause()}resume(){this.audio&&this.audio.play()}getRestPoint(a,h){return Ar.merge(Ar.merge(h||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,h){return Ar.merge(h||this.config.serviceAPIHost,a)}toString(a,h){for(;a.length<h;)a="0"+a;return a}getPlayedLink(a){let h=a.split("/"),d=h[h.length-1];return this.getRestPointRaw(Ar.merge("/audio/audio/translation"+this.toString(""+this.currentAudioValue,3),d),null)}downloadAll(a,h){let d=[];this.items.forEach(g=>{d.push(g.link)});let f=0;a(.01);let p=()=>{this.config.post(()=>{if(f>=d.length)return a(100),void h();let g=d[f++];this.uiConfig.downloadAudioFile(g,"translation"+this.toString(""+this.currentAudioValue,3)),a((f+1)/d.length*100),p()},100)};p()}deleteAudioAll(a,h){this.config.post(()=>{this.uiConfig.deleteAudioTranslation(a),h&&h()},100)}downloadAllUrls(a){var h=document.createElement("a");h.setAttribute("download",""),h.style.display="none",document.body.appendChild(h);for(var d=0;d<a.length;d++)h.setAttribute("href",a[d]),h.click();document.body.removeChild(h)}exists(a,h){this.http.get(this.getRestPoint("/exists/audio/"+a,null),{}).pipe(hr(Hi.handleError)).subscribe({next:f=>{h(f,null)},error:f=>{h(null,""+f)}})}}return c.\u0275fac=function(a){return new(a||c)(Ae(wd),Ae(ti),Ae(on),Ae(rz),Ae(xd),Ae(go))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const net=function(c){return{"print-only":!1,pageBreak:c}};function iet(c,l){if(1&c&&(I(0,"div",1),ue(1,"app-svg-js-image",2)(2,"app-dynamic-menu",3),F()),2&c){const a=q();R("ngClass",ys(6,net,a.enabled&&a.uiConfig.ui.showFacePage.getBooleanValue()||a.showAnyWay)),P(1),R("genName","LogoLight2")("svgWidth",512)("svgHeight",512)("type",a.type),P(1),R("data",a.dynMenuData)}}let $he=(()=>{class c{constructor(a){this.uiConfig=a,this.enabled=!0,this.showAnyWay=!1,this.type=512,this.dynMenuData=xg.builder().setWhiteBack(!0).setMenuState(pg.builder().addCommand(La.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay2"))}set menuClick(a){this.dynMenuData&&this.dynMenuData.setOnClick(a)}set name(a){this.dynMenuData.setMenuState(pg.builder().addCommand(La.builder().setName(a)).setGenName("MenuDay2"))}get name(){return this.dynMenuData.menuState.commands[0].name}ngOnInit(){}}return c.\u0275fac=function(a){return new(a||c)(B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-print-logo"]],inputs:{enabled:"enabled",showAnyWay:"showAnyWay",type:"type",menuClick:"menuClick",name:"name"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(a,h){1&a&&X(0,iet,3,8,"div",0),2&a&&R("ngIf",h.enabled&&h.uiConfig.ui.showFacePage.getBooleanValue()||h.showAnyWay)},dependencies:[si,_n,Zl,jE]}),c})();function ret(c,l){if(1&c){const a=at();I(0,"clr-radio-wrapper")(1,"input",17),ee("ngModelChange",function(d){return De(a),ke(q(2).uiConfig.ui.fontSize.rawValue=d)}),F(),I(2,"label"),ie(3),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("name","mainFontSize")("value",""+a)("ngModel",h.uiConfig.ui.fontSize.rawValue),P(2),Ti("x",a,"")}}const set=function(){return[0,1,2,3,4,5,6,7,8,9,10,20,30]};function oet(c,l){if(1&c&&(I(0,"clr-radio-container",1)(1,"label"),ie(2),F(),X(3,ret,4,4,"clr-radio-wrapper",2),F()),2&c){const a=q();P(2),Ti("",a.uiConfig.ui.fontSize.description,":"),P(1),R("ngForOf",Ll(2,set))}}function aet(c,l){if(1&c){const a=at();I(0,"clr-toggle-wrapper")(1,"input",18),ee("ngModelChange",function(d){return ke(De(a).$implicit.rawValue=d)}),F(),I(2,"label"),ie(3),F()()}if(2&c){const a=l.$implicit;P(1),R("name",a.name)("value",a.name)("ngModel",a.rawValue),P(2),Ut(a.description)}}function cet(c,l){if(1&c){const a=at();I(0,"clr-radio-wrapper")(1,"input",17),ee("ngModelChange",function(d){return De(a),ke(q(2).uiConfig.ui.memorialPageSize.rawValue=d)}),F(),I(2,"label"),ie(3),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("name","mainPageSize")("value",""+a)("ngModel",h.uiConfig.ui.memorialPageSize.rawValue),P(2),Ti("x",a,"")}}const uet=function(){return[10,20,30,40,50,60,70,80,90,100]};function het(c,l){if(1&c&&(I(0,"clr-radio-container",1)(1,"label"),ie(2),F(),X(3,cet,4,4,"clr-radio-wrapper",2),F()),2&c){const a=q();P(2),Ti("",a.uiConfig.ui.memorialPageSize.description,":"),P(1),R("ngForOf",Ll(2,uet))}}function det(c,l){if(1&c){const a=at();I(0,"clr-radio-wrapper")(1,"input",17),ee("ngModelChange",function(d){return De(a),ke(q(2).currentKafizma=d)}),F(),I(2,"label"),ie(3),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("name","mainKafizma")("value",""+a)("ngModel",h.currentKafizma),P(2),Ut(a||"\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u0432 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0435")}}const fet=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]};function pet(c,l){1&c&&(I(0,"clr-radio-container",1)(1,"label"),ie(2,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430:"),F(),X(3,det,4,4,"clr-radio-wrapper",2),F()),2&c&&(P(3),R("ngForOf",Ll(1,fet)))}function get(c,l){if(1&c){const a=at();I(0,"clr-radio-wrapper")(1,"input",17),ee("ngModelChange",function(d){return De(a),ke(q(2).uiConfig.ui.audioValue.rawValue=d)}),F(),I(2,"label"),ie(3),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("name","mainAudio")("value",a.value)("ngModel",h.uiConfig.ui.audioValue.rawValue),P(2),Ut(a.name)}}function met(c,l){if(1&c&&(I(0,"clr-radio-container",1)(1,"label"),ie(2,"\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435:"),F(),X(3,get,4,4,"clr-radio-wrapper",2),F()),2&c){const a=q();P(3),R("ngForOf",a.audios)}}function vet(c,l){1&c&&(I(0,"h4"),ie(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),F())}function yet(c,l){1&c&&ue(0,"clr-progress-bar",19),2&c&&R("clrValue",q().translationLoadingPersantage)}function _et(c,l){if(1&c){const a=at();I(0,"button",20),ee("click",function(){return De(a),ke(q().downloadAll())}),ue(1,"clr-icon",21),ie(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0434\n"),F()}}function bet(c,l){if(1&c){const a=at();I(0,"button",20),ee("click",function(){const f=De(a).$implicit;return ke(q(2).deleteTranslation(f))}),ue(1,"clr-icon",23),ie(2),F()}if(2&c){const a=l.$implicit;P(2),xC(" ",a.name," (",a.nameOriginal,") ")}}function Cet(c,l){if(1&c&&(I(0,"div"),X(1,bet,3,2,"button",22),F()),2&c){const a=q();P(1),R("ngForOf",a.translationInfos)}}const mU=function(c,l,a,h){return{btn:!0,"btn-primary":c,"btn-success":l,"btn-primary-outline":a,"btn-success-outline":h}};class Ch{constructor(l,a,h){this.name=l,this.nameSimple=a,this.value=h}}class xet{constructor(l,a,h){this.name=l,this.nameOriginal=a,this.value=h}equalsTo(l){return this.nameOriginal==l.name&&this.value==l.value}}class wet{constructor(l=!1,a="",h=""){this.modalFlag=l,this.currentName=a,this.text=h}}let u1=(()=>{class c{constructor(a,h,d,f){this.config=a,this.uiConfig=h,this.themesSvc=d,this.audioSvc=f,this.translationLoadingPersantage=0,this.settingsBooks=[],this.settingsMemorial=[],this.settingsCalculator=[],this.audios=[new Ch("\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","0"),new Ch("\u041f\u0441\u0430\u043b\u043c\u044b \u0414\u0430\u0432\u0438\u0434\u043e\u0432\u044b (\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432))","\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432)","1"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0441\u0438\u043d\u043e\u0434\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434) (\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439)","\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439","9"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u0411\u0438\u0440\u0443\u043a\u043e\u0432\u044b\u0445) (\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432)","\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432","2"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435","\u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0439","4"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432)","\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432","3"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432)","\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432","5"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432)","\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432","6"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432)","\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432","7"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432))","\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432)","8"),new Ch("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432))","\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432)","10")],this.translationInfosArray=[],this.deleteTranslationDlg=new wet,this.settingsCalculator=[],this.settingsBooks=[h.ui.parallel,h.ui.coloredTranslations,h.ui.fineText,h.ui.lineBreaks,h.ui.showFacePage],this.settingsMemorial=[h.ui.sortPersonsPriests,h.ui.sortPersonsNames,h.ui.memorialVerticalView,h.ui.mergeNameOnImport,h.ui.showMolitvy,h.ui.addCommentToName,h.ui.memorialSlava1Zdrav,h.ui.memorialSlava1Upok,h.ui.memorialSlava2Zdrav,h.ui.memorialSlava2Upok,h.ui.memorialSlava3Zdrav,h.ui.memorialSlava3Upok,h.ui.memorialPsaltir,h.ui.autoDownloadAudioFiles,h.ui.showFacePage,h.ui.stopServiceFlag]}isMemorial(){return null!=this.data&&this.stgsData.classes.memorialSettings}isCalculator(){return null!=this.data&&this.stgsData.classes.calculatorSettings}isBook(){return null==this.data||this.stgsData.classes.bookSettings}get settings(){return this.isBook()?this.settingsBooks:this.isMemorial()?this.settingsMemorial:this.settingsCalculator}get stgsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get translationInfos(){let a=this.uiConfig.getAudioTranslations(),h=()=>{this.translationInfosArray=[];for(let d=0;d<a.length;++d){let f=a[d];this.audios.forEach(p=>{p.value==""+ +f.value&&this.translationInfosArray.push(new xet(p.nameSimple,f.name,f.value))})}};if(a.length!=this.translationInfosArray.length)h();else for(let d=0;d<a.length;++d)if(!this.translationInfosArray[d].equalsTo(a[d])){h();break}return this.translationInfosArray}get currentKafizma(){return""+ti.getKafizmNumberBy(17,this.uiConfig.ui.currentOffset.getNumberValue())}set currentKafizma(a){this.uiConfig.ui.currentOffset.setNumberValue(ti.getOffsetByKafizmNumber(17,+a))}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}toggleParallel(){return this.uiConfig.ui.parallel.setBooleanValue(!this.uiConfig.ui.parallel.getAndVerifyBooleanValue()),this}toggleLineBreaks(){return this.uiConfig.ui.lineBreaks.setBooleanValue(!this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()),this}toggleColoredTranslations(){return this.uiConfig.ui.coloredTranslations.setBooleanValue(!this.uiConfig.ui.coloredTranslations.getAndVerifyBooleanValue()),this}isRedTheme(){return this.config.isRedTheme()}isLight(){return this.themesSvc.isLight()}isNight(){return this.themesSvc.isNight()}isAutoTheme(){return this.themesSvc.isAutoTheme()}onToggleAutoTheme(){this.themesSvc.onToggleAutoTheme()}switchToLight(){this.themesSvc.switchToLight()}switchToNight(){this.themesSvc.switchToNight()}downloadAll(){this.audioSvc.downloadAll(a=>(this.translationLoadingPersantage=Math.round(100*a)/100,!0),()=>{this.translationLoadingPersantage=100})}isTranslationDownloading(){return this.config.isRestServerType()&&this.translationLoadingPersantage>0&&this.translationLoadingPersantage<100}isTranslationDownloadNeeded(a){return this.config.isRestServerType()&&(!a||a&&this.uiConfig.ui.autoDownloadAudioFiles.getBooleanValue())&&this.isMemorial()}deleteTranslation(a){this.deleteTranslationDlg.currentName=a.name,this.deleteTranslationDlg.modalFlag=!0}deleteTranslationDirect(){this.config.post(()=>{let a=this.translationInfos.findIndex(f=>f.name==this.deleteTranslationDlg.currentName);a<0||a>=0&&a<this.translationInfos.length&&this.uiConfig.deleteAudioTranslation(this.translationInfos[a].value),this.deleteTranslationDlg.modalFlag=!1})}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(go),B(c1))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-settings"]],inputs:{data:"data"},decls:34,vars:29,consts:[["clrInline","",4,"ngIf"],["clrInline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["class","btn btn-primary btn-block",3,"click",4,"ngIf"],[1,"top-space","bottom-space"],[1,"btn-group","btn-primary-outline"],[3,"ngClass","click"],["shape","sun",1,"is-solid"],["shape","moon",1,"is-solid"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],["clrSuccess","","clrLabeled","",3,"clrValue"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","download"],["class","btn btn-primary btn-block",3,"click",4,"ngFor","ngForOf"],["shape","times"]],template:function(a,h){1&a&&(X(0,oet,4,3,"clr-radio-container",0),I(1,"clr-toggle-container",1)(2,"label"),ie(3,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),F(),X(4,aet,4,4,"clr-toggle-wrapper",2),F(),X(5,het,4,3,"clr-radio-container",0),X(6,pet,4,2,"clr-radio-container",0),X(7,met,4,1,"clr-radio-container",0),X(8,vet,2,0,"h4",3),X(9,yet,1,1,"clr-progress-bar",4),X(10,_et,3,0,"button",5),X(11,Cet,2,1,"div",3),I(12,"div",6)(13,"clr-toggle-container",1)(14,"label"),ie(15,"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441:"),F()(),I(16,"div",7)(17,"button",8),ee("click",function(){return h.switchToLight()}),ue(18,"clr-icon",9),F(),I(19,"button",8),ee("click",function(){return h.onToggleAutoTheme()}),ue(20,"clr-icon",9)(21,"clr-icon",10),F(),I(22,"button",8),ee("click",function(){return h.switchToNight()}),ue(23,"clr-icon",10),F()()(),I(24,"clr-modal",11),ee("clrModalOpenChange",function(f){return h.deleteTranslationDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(25,"h3",12),ie(26,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),F(),I(27,"div",13),ie(28),F(),I(29,"div",14)(30,"button",15),ee("click",function(){return h.deleteTranslationDlg.modalFlag=!1}),ie(31,"\u041e\u0442\u043c\u0435\u043d\u0430"),F(),I(32,"button",16),ee("click",function(){return h.deleteTranslationDirect()}),ie(33,"Ok"),F()()()),2&a&&(R("ngIf",h.isBook()||h.isMemorial()),P(4),R("ngForOf",h.settings),P(1),R("ngIf",h.isMemorial()),P(1),R("ngIf",h.isMemorial()),P(1),R("ngIf",h.isMemorial()),P(1),R("ngIf",h.isTranslationDownloading()),P(1),R("ngIf",h.isTranslationDownloading()),P(1),R("ngIf",h.isTranslationDownloadNeeded(!0)&&!h.isTranslationDownloading()),P(1),R("ngIf",!h.isTranslationDownloading()),P(6),R("ngClass",pO(14,mU,!h.isRedTheme()&&h.isLight(),h.isRedTheme()&&h.isLight(),!h.isRedTheme()&&!h.isLight(),h.isRedTheme()&&!h.isLight())),P(2),R("ngClass",pO(19,mU,!h.isRedTheme()&&h.isAutoTheme(),h.isRedTheme()&&h.isAutoTheme(),!h.isRedTheme()&&!h.isAutoTheme(),h.isRedTheme()&&!h.isAutoTheme())),P(3),R("ngClass",pO(24,mU,!h.isRedTheme()&&h.isNight(),h.isRedTheme()&&h.isNight(),!h.isRedTheme()&&!h.isNight(),h.isRedTheme()&&!h.isNight())),P(2),R("clrModalOpen",h.deleteTranslationDlg.modalFlag),P(4),Ti(' \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430: "',h.deleteTranslationDlg.currentName,'"? '))},dependencies:[si,fi,_n,eo,Rf,Ff,cs,Hp,LD,Up,WD,hne,a5,G5,Vl,td,gx,jo,Ao],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();function Tet(c,l){if(1&c){const a=at();I(0,"span",2),ee("click",function(){const f=De(a).$implicit;return ke(q().onItem(f))}),ie(1),F()}if(2&c){const a=l.$implicit;R("ngClass",q().getSpanClass(a)),P(1),Ut(a.text)}}const Oet=function(c){return{"bottom-top-space":!0,"no-print":c}};let nA=(()=>{class c{constructor(a,h){this.config=a,this.uiConfig=h,this.currentItem=null}get toolbarData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){var h={};return h["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}onItem(a){this.currentItem=a,this.toolbarData.onClick&&this.toolbarData.onClick(a)}getSpanClass(a){let h=this.getSpanClassRaw(a);return a.getSpanClassDetector.checkAndGetValue(h)}getSpanClassRaw(a){let h={cursor:!0,label:!0};return h[this.toolbarData.classes.labelNormal]=!a.selected,h[this.toolbarData.classes.labelSelected]=a.selected,h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-content-toolbar"]],inputs:{data:"data"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Tet,2,2,"span",1),F()),2&a&&(R("ngClass",ys(2,Oet,h.toolbarData.classes.noPrint)),P(1),R("ngForOf",h.toolbarData.items))},dependencies:[si,fi]}),c})(),vU=(()=>{class c{constructor(a){this.config=a,this.clazz={}}get spinnerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){var a,h=null===(a=this.spinnerData)||void 0===a?void 0:a.classes;return this.clazz.spinner=!0,this.clazz["spinner-inline"]=!h||h.spinnerInline,this.clazz}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-spinner"]],inputs:{data:"data"},decls:5,vars:3,consts:[[3,"ngClass"]],template:function(a,h){1&a&&(I(0,"span")(1,"span",0),ie(2),F(),I(3,"span"),ie(4),F()()),2&a&&(P(1),R("ngClass",h.getClasses()),P(1),Ti(" ",h.text," "),P(2),Ti(" ",h.text," "))},dependencies:[si]}),c})();function Det(c,l){if(1&c){const a=at();I(0,"div",6)(1,"a",7),ee("click",function(){return ke(De(a).$implicit.runOnClick())}),ie(2),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("ngClass",h.getAlertActionClass(!1))("hidden",!a.enabled),P(1),Ut(a.text)}}function ket(c,l){1&c&&ue(0,"clr-icon",9),2&c&&et("shape",q(3).errorsData.classes.alertShape)}function Met(c,l){if(1&c){const a=at();I(0,"span"),X(1,ket,1,1,"clr-icon",8),I(2,"span",1),ee("click",function(){const f=De(a).$implicit;return ke(q(2).onErrorMessage(f))}),ie(3),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("ngIf",h.errorsData.classes.alertShape),P(1),R("ngClass",h.getAlertTextClass(!1)),P(1),Ti(" ",a," ")}}function Eet(c,l){if(1&c){const a=at();I(0,"button",10)(1,"clr-icon",1),ee("click",function(){return ke(De(a).$implicit.runOnClick())}),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("ngClass",h.getAlertButtonClass(!1)),et("shape",a.shape)}}function Aet(c,l){if(1&c&&(I(0,"div")(1,"div",1),ee("click",function(h){return h.stopPropagation()}),I(2,"div",2),X(3,Det,3,3,"div",3),X(4,Met,4,3,"span",4),F(),X(5,Eet,2,2,"button",5),F()()),2&c){const a=q();P(1),R("ngClass",a.getClasses()),P(2),R("ngForOf",a.errorsData.actions),P(1),R("ngForOf",a.errorsData.errors),P(1),R("ngForOf",a.errorsData.buttons)}}function Iet(c,l){if(1&c&&(I(0,"div",18),ue(1,"clr-icon",9),F()),2&c){const a=q(3);P(1),et("shape",a.errorsData.classes.alertShape)}}function Pet(c,l){if(1&c){const a=at();I(0,"a",7),ee("click",function(){return ke(De(a).$implicit.runOnClick())}),ie(1),F()}if(2&c){const a=l.$implicit;R("ngClass",q(3).getAlertActionClass())("hidden",!a.enabled),P(1),Ut(a.text)}}function Ret(c,l){if(1&c){const a=at();I(0,"div",14),X(1,Iet,2,1,"div",15),I(2,"span",1),ee("click",function(){const f=De(a).$implicit;return ke(q(2).onErrorMessage(f))}),ie(3),F(),I(4,"div",16),X(5,Pet,2,3,"a",17),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("ngIf",h.errorsData.classes.alertShape),P(1),R("ngClass",h.getAlertTextClass()),P(1),Ti(" ",a," "),P(2),R("ngForOf",h.errorsData.actions)}}function Fet(c,l){if(1&c){const a=at();I(0,"button",10)(1,"clr-icon",1),ee("click",function(){return ke(De(a).$implicit.runOnClick())}),F()()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("ngClass",h.getAlertButtonClass()),et("shape",a.shape)}}function Net(c,l){if(1&c&&(I(0,"div")(1,"div",11),ee("click",function(h){return h.stopPropagation()}),I(2,"div",12),X(3,Ret,6,4,"div",13),F(),X(4,Fet,2,2,"button",5),F()()),2&c){const a=q();P(1),R("ngClass",a.getClasses()),P(2),R("ngForOf",a.errorsData.errors),P(1),R("ngForOf",a.errorsData.buttons)}}let h1=(()=>{class c{constructor(a){this.uiConfig=a,this.stdErrorsEnabled=!1,this.getClassesDetector=za.builder(),this.getAlertActionClassDetector=za.builder(),this.getAlertTextClassTrueDetector=za.builder(),this.getAlertTextClassFalseDetector=za.builder()}get errorsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(a=!0){let h=this.getClassesRaw(a);return this.getClassesDetector.checkAndGetValue(h)}getClassesRaw(a=!0){var h,d=null===(h=this.errorsData)||void 0===h?void 0:h.classes,f={alert:a};return d&&(f[d.alertClass]=a,f["no-print"]=d.noPrint),f}getAlertButtonClass(a=!0){let h={"alert-icon":a};return h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}getAlertActionClass(a=!0){let h=this.getAlertActionClassRaw(a);return this.getAlertActionClassDetector.checkAndGetValue(h)}getAlertActionClassRaw(a=!0){let h={"alert-action":a};return a||(h["left-space"]=!0,h["right-space"]=!0),h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}getAlertTextClass(a=!0){let h=this.getAlertTextClassRaw(a);return(a?this.getAlertTextClassTrueDetector:this.getAlertTextClassFalseDetector).checkAndGetValue(h)}getAlertTextClassRaw(a=!0){let h={"alert-text":a,cursor:!0};return h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}onErrorMessage(a){return this.errorsData.click(a),this}}return c.\u0275fac=function(a){return new(a||c)(B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-errors"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","click"],[1,"left-space","right-space","bottom-top-space","w100"],["class","inlineBlock underline floatRight no-print",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["type","button","class","close","aria-label","Close",4,"ngFor","ngForOf"],[1,"inlineBlock","underline","floatRight","no-print"],["href","javascript:void(0)",3,"ngClass","hidden","click"],["class","alert-icon",4,"ngIf"],[1,"alert-icon"],["type","button","aria-label","Close",1,"close"],["role","alert",3,"ngClass","click"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],[1,"alert-item","static"],["class","alert-icon-wrapper",4,"ngIf"],[1,"alert-actions"],["href","javascript:void(0)",3,"ngClass","hidden","click",4,"ngFor","ngForOf"],[1,"alert-icon-wrapper"]],template:function(a,h){1&a&&(X(0,Aet,6,4,"div",0),X(1,Net,5,3,"div",0)),2&a&&(R("ngIf",!h.stdErrorsEnabled&&(null==h.errorsData||null==h.errorsData.errors?null:h.errorsData.errors.length)),P(1),R("ngIf",h.stdErrorsEnabled&&(null==h.errorsData||null==h.errorsData.errors?null:h.errorsData.errors.length)))},dependencies:[si,fi,_n,eo],styles:[".floatRight[_ngcontent-%COMP%]{float:right}.inlineBlock[_ngcontent-%COMP%]{display:inline-block}.underline[_ngcontent-%COMP%]{text-decoration:underline}.w100[_ngcontent-%COMP%]{width:100%}"]}),c})();function Let(c,l){1&c&&ue(0,"clr-icon",16)}function Bet(c,l){1&c&&ue(0,"clr-icon",17)}function Vet(c,l){if(1&c){const a=at();I(0,"clr-input-container")(1,"label"),X(2,Let,1,0,"clr-icon",13),X(3,Bet,1,0,"clr-icon",14),ie(4),F(),I(5,"input",15),ee("ngModelChange",function(d){return ke(De(a).$implicit.value=d)}),F(),I(6,"clr-control-error"),ie(7,"\u041f\u043e\u043b\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e!"),F()()}if(2&c){const a=l.$implicit,h=q(2);P(2),R("ngIf",h.isEventProperty(a,!1)),P(1),R("ngIf",h.isEventProperty(a,!0)),P(1),Ti(" ",a.name,""),P(1),yy("name","prop_",a.name,""),R("ngModel",a.value)}}function zet(c,l){if(1&c){const a=at();I(0,"button",18),ee("click",function(){return De(a),ke(q(2).deletePerson())}),ue(1,"clr-icon",19),F()}}function Uet(c,l){if(1&c){const a=at();I(0,"button",11),ee("click",function(){return De(a),ke(q(2).addProperty())}),ue(1,"clr-icon",20),F()}}function Het(c,l){if(1&c){const a=at();I(0,"button",21),ee("click",function(){De(a);const d=q(2);return ke(d.savePerson(d.person))}),ie(1," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),F()}}function $et(c,l){if(1&c){const a=at();I(0,"form",1)(1,"clr-input-container")(2,"label"),ie(3,"\u0418\u043c\u044f"),F(),I(4,"input",2),ee("ngModelChange",function(d){return De(a),ke(q().person.name=d)}),F()(),I(5,"clr-input-container")(6,"label"),ie(7,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430"),F(),I(8,"input",3),ee("ngModelChange",function(d){return De(a),ke(q().kafizma=d)}),F()(),I(9,"clr-checkbox-container",4)(10,"label"),ie(11,"\u0421\u0442\u0430\u0442\u0443\u0441"),F(),I(12,"clr-checkbox-wrapper")(13,"input",5),ee("ngModelChange",function(d){return De(a),ke(q().person.live=d)}),F(),I(14,"label"),ie(15,"\u0416\u0438\u0432\u043e\u0439"),F()()(),X(16,Vet,8,5,"clr-input-container",6),I(17,"span",7),ie(18,"\xa0"),F(),I(19,"clr-input-container")(20,"label"),ie(21,"*\u041d\u043e\u0432\u043e\u0435"),F(),I(22,"input",8),ee("ngModelChange",function(d){return De(a),ke(q().newName=d)}),F()(),I(23,"span",7),ie(24,"\xa0"),F(),X(25,zet,2,0,"button",9),X(26,Uet,2,0,"button",10),I(27,"button",11),ee("click",function(){De(a);const d=q();return ke(d.revertPerson(d.person))}),ie(28," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c "),F(),X(29,Het,2,0,"button",12),F()}if(2&c){const a=q();P(4),R("ngModel",a.person.name),P(4),R("ngModel",a.kafizma),P(5),R("ngModel",a.person.live),P(3),R("ngForOf",a.properties.properties),P(6),R("ngModel",a.newName),P(3),R("ngIf",a.personDeletionEnabled),P(1),R("ngIf",a.newName),P(3),R("ngIf",a.person.dirty)}}let Wet=(()=>{class c{constructor(a,h,d,f){this.ks=a,this.eventParserSvc=h,this.config=d,this.uiConfig=f,this.personDeletionEnabled=!1,this.memkey=-1,this.data=null,this.changesDetectorPerson=ns.builder(),this.myProperties=new $i,this.newName=""}get person(){var a;return null===(a=this.data)||void 0===a?void 0:a.person}get kafizma(){return!this.person||this.person.offset<0?0:ti.getKafizmNumberBy(17,this.person.offset)}set kafizma(a){if(a<=0)this.person&&(this.person.offset=-1);else if(this.person){let h=ti.getOffsetByKafizmNumber(17,a);this.person.offset=h,this.uiConfig.ui.currentPersonOffset.setNumberValue(h)}}get properties(){return this.syncData(),this.myProperties}updateProperties(){this.newName="",this.properties.setOnChangeCallback(()=>{this.person&&this.person.setDirty()}),this.properties.load(this.person?this.person.description:""),this.properties.properties.find(a=>"\u0442\u0435\u043a\u0441\u0442"==a.name)||this.properties.pushNew("\u0442\u0435\u043a\u0441\u0442","")}ngOnDestroy(){}ngOnInit(){this.updateProperties()}savePerson(a){a.description=this.properties.toString(),this.ks.save(this.memkey,a,!0).then(h=>{var d;null===(d=this.data)||void 0===d||d.click(!0)},h=>{var d;this.config.addAlert(Fr.of(""+h,"OK",15)),null===(d=this.data)||void 0===d||d.click(!1)})}revertPerson(a){var h;a.revertDirty(),null===(h=this.data)||void 0===h||h.click(!1)}addProperty(){this.newName&&(this.properties.pushNew(this.newName,""),this.newName="")}isEventProperty(a,h){try{let d=a.value?this.eventParserSvc.parseEvent(a.value):null;return null!=d&&h==d.isToday()}catch(d){}return!1}syncData(){var a;this.changesDetectorPerson.checkAndUpdate(null===(a=this.data)||void 0===a?void 0:a.person)&&this.config.post(()=>{this.updateProperties()})}deletePerson(){!this.data||this.ks.deletePersons([this.data.person]).then(a=>{var h,d;a&&a.success?null===(h=this.data)||void 0===h||h.click(!0):(this.config.addAlert(Fr.of("\u041e\u0448\u0438\u0431\u043a\u0430: "+(null==a?void 0:a.error),"OK",15)),null===(d=this.data)||void 0===d||d.click(!1))},a=>{var h;this.config.addAlert(Fr.of(""+a,"OK",15)),null===(h=this.data)||void 0===h||h.click(!1)})}}return c.\u0275fac=function(a){return new(a||c)(B(_g),B(tA),B(on),B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-person-details"]],inputs:{data:"data"},decls:1,vars:1,consts:[["clrForm","",4,"ngIf"],["clrForm",""],["clrInput","","placeholder","\u0418\u043c\u044f","name","name",3,"ngModel","ngModelChange"],["clrInput","","placeholder","\u0418\u043d\u0434\u0435\u043a\u0441","name","offset",3,"ngModel","ngModelChange"],["clrInline",""],["type","checkbox","clrCheckbox","","name","options","value","option1",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"clr-subtext"],["clrInput","","placeholder","\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e","name","prop_new_name",3,"ngModel","ngModelChange"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["shape","event",4,"ngIf"],["shape","event","class","is-solid",4,"ngIf"],["clrInput","","placeholder","\u0422\u0435\u043a\u0441\u0442","required","",3,"name","ngModel","ngModelChange"],["shape","event"],["shape","event",1,"is-solid"],[1,"btn","btn-danger",3,"click"],["shape","trash"],["shape","plus"],[1,"btn","btn-success",3,"click"]],template:function(a,h){1&a&&X(0,$et,30,8,"form",0),2&a&&R("ngIf",h.person)},dependencies:[fi,_n,eo,cs,HL,ND,Hp,LD,Up,Bx,e_,Ly,Vl,td,jo,Fy,Bm,Ao,xf],styles:[".template-editor[_ngcontent-%COMP%]{height:calc(100vh - 290px)}.template-editor-2[_ngcontent-%COMP%]{height:calc(100vh - 230px)}"]}),c})();const Get=["pagesView"];function Qet(c,l){if(1&c){const a=at();I(0,"clr-accordion-panel",72),ee("clrAccordionPanelOpenChange",function(d){return De(a),ke(q(2).showSettings=d)}),I(1,"clr-accordion-title"),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),F(),I(3,"clr-accordion-content"),ue(4,"app-dynamic-settings",4),I(5,"div",73)(6,"button",74),ee("click",function(){return De(a),ke(q(2).printBook())}),ue(7,"clr-icon",75),ie(8," \u041f\u0435\u0447\u0430\u0442\u044c "),F()()()()}if(2&c){const a=q(2);R("clrAccordionPanelOpen",a.showSettings),P(4),R("data",a.settingsData)}}function jet(c,l){if(1&c){const a=at();I(0,"clr-accordion-panel",72),ee("clrAccordionPanelOpenChange",function(d){return De(a),ke(q(2).filterMemorials=d)}),I(1,"clr-accordion-title"),ie(2,"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f"),F(),I(3,"clr-accordion-content"),ue(4,"app-dynamic-content-toolbar",4)(5,"app-dynamic-content-toolbar",4),F()()}if(2&c){const a=q(2);R("clrAccordionPanelOpen",a.filterMemorials),P(4),R("data",a.toolbarMemorialsFilters),P(1),R("data",a.toolbarMemorialsFlags)}}function qet(c,l){if(1&c){const a=at();I(0,"clr-dropdown-menu")(1,"label",76),ie(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),F(),I(3,"div",77),ee("click",function(){return De(a),ke(q(2).addMemorial())}),ue(4,"clr-icon",56),I(5,"span"),ie(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),F()(),I(7,"div",78),ee("click",function(){return De(a),ke(q(2).onAddNewPerson())}),ue(8,"clr-icon",56),I(9,"span"),ie(10," \u0418\u043c\u044f"),F()()()}}function Zet(c,l){if(1&c){const a=at();I(0,"clr-dropdown-menu",79)(1,"label",76),ie(2,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F(),I(3,"div",77),ee("click",function(){return De(a),ke(q(2).deleteMemorial())}),ue(4,"clr-icon",59),I(5,"span"),ie(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),F()(),I(7,"div",78),ee("click",function(){return De(a),ke(q(2).deleteAll())}),ue(8,"clr-icon",59),I(9,"span"),ie(10," \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),F()()()}}function Xet(c,l){if(1&c){const a=at();I(0,"clr-dropdown-menu",79)(1,"label",76),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),F(),I(3,"div",77),ee("click",function(){return De(a),ke(q(2).onEditTitleInfo())}),ue(4,"clr-icon"),I(5,"span"),ie(6," \u041c\u043e\u043b\u0435\u0431\u0435\u043d"),F()(),I(7,"div",78),ee("click",function(){return De(a),ke(q(2).importMemorials())}),ue(8,"clr-icon",52),I(9,"span"),ie(10," \u0418\u043c\u043f\u043e\u0440\u0442"),F()(),I(11,"div",80),ee("click",function(){return De(a),ke(q(2).exportMemorials())}),ue(12,"clr-icon",53),I(13,"span"),ie(14," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),F()()()}2&c&&(P(4),et("shape","form"))}function Yet(c,l){if(1&c){const a=at();I(0,"clr-dropdown-menu")(1,"label",76),ie(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),F(),I(3,"div",77),ee("click",function(){return De(a),ke(q(2).addMemorial())}),ue(4,"clr-icon",56),I(5,"span"),ie(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),F()(),I(7,"div",78),ee("click",function(){return De(a),ke(q(2).onAddNewPerson())}),ue(8,"clr-icon",56),I(9,"span"),ie(10," \u0418\u043c\u044f"),F()()()}}function Ket(c,l){if(1&c){const a=at();I(0,"clr-dropdown-menu",79)(1,"label",76),ie(2,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F(),I(3,"div",77),ee("click",function(){return De(a),ke(q(2).deleteMemorial())}),ue(4,"clr-icon",59),I(5,"span"),ie(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),F()(),I(7,"div",78),ee("click",function(){return De(a),ke(q(2).deleteAll())}),ue(8,"clr-icon",59),I(9,"span"),ie(10," \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),F()()()}}function Jet(c,l){if(1&c){const a=at();I(0,"clr-dropdown-menu",79)(1,"label",76),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),F(),I(3,"div",77),ee("click",function(){return De(a),ke(q(2).onEditTitleInfo())}),ue(4,"clr-icon"),I(5,"span"),ie(6," \u041c\u043e\u043b\u0435\u0431\u0435\u043d"),F()(),I(7,"div",78),ee("click",function(){return De(a),ke(q(2).importMemorials())}),ue(8,"clr-icon",52),I(9,"span"),ie(10," \u0418\u043c\u043f\u043e\u0440\u0442"),F()(),I(11,"div",80),ee("click",function(){return De(a),ke(q(2).exportMemorials())}),ue(12,"clr-icon",53),I(13,"span"),ie(14," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),F()()()}2&c&&(P(4),et("shape","form"))}function ett(c,l){if(1&c){const a=at();I(0,"clr-dropdown-menu",79)(1,"label",76),ie(2,"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),F(),I(3,"div",77),ee("click",function(){return De(a),ke(q(2).addMemorial())}),ue(4,"clr-icon",56),I(5,"span"),ie(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),F()(),I(7,"div",78),ee("click",function(){return De(a),ke(q(2).onAddNewPerson())}),ue(8,"clr-icon",56),I(9,"span"),ie(10," \u0418\u043c\u044f"),F()(),ue(11,"div",81),I(12,"div",77),ee("click",function(){return De(a),ke(q(2).deleteMemorial())}),ue(13,"clr-icon",59),I(14,"span"),ie(15),F()(),I(16,"div",78),ee("click",function(){return De(a),ke(q(2).deleteAll())}),ue(17,"clr-icon",59),I(18,"span"),ie(19," \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),F()()()}if(2&c){const a=q(2);P(15),Ti(" ",a.currentMemorial?a.currentMemorial:"\u0412\u0441\u0435","")}}function ttt(c,l){if(1&c){const a=at();I(0,"div",69)(1,"form",5)(2,"clr-input-container")(3,"label"),ie(4,"\u0418\u043c\u044f:"),F(),I(5,"input",82),ee("ngModelChange",function(d){return De(a),ke(q(2).search=d)}),F()()()()}if(2&c){const a=q(2);P(5),R("ngModel",a.search)}}function ntt(c,l){1&c&&Sa(0)}const itt=function(c,l,a){return{$implicit:c,horPagesCount:l,showPersons:a}};function rtt(c,l){if(1&c){const a=at();I(0,"div",44),ee("click",function(d){return d.stopPropagation()}),ue(1,"app-print-logo",45)(2,"app-dynamic-content-toolbar",4)(3,"app-dynamic-errors",4),I(4,"clr-accordion",46),X(5,Qet,9,2,"clr-accordion-panel",47),X(6,jet,6,3,"clr-accordion-panel",47),F(),I(7,"div",48)(8,"div",49)(9,"button",50),ee("click",function(){return De(a),ke(q().toggleSearching())}),ue(10,"clr-icon",51),I(11,"span",29),ie(12," \u041f\u043e\u0438\u0441\u043a"),F()()(),I(13,"div",49)(14,"button",50),ee("click",function(){return De(a),ke(q().onEditTitleInfo())}),ue(15,"clr-icon"),I(16,"span",29),ie(17," \u041c\u043e\u043b\u0435\u0431\u0435\u043d"),F()()(),I(18,"div",49)(19,"button",50),ee("click",function(){return De(a),ke(q().importMemorials())}),ue(20,"clr-icon",52),I(21,"span",29),ie(22," \u0418\u043c\u043f\u043e\u0440\u0442"),F()()(),I(23,"div",49)(24,"button",50),ee("click",function(){return De(a),ke(q().exportMemorials())}),ue(25,"clr-icon",53),I(26,"span",29),ie(27," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),F()()(),I(28,"div",49)(29,"clr-dropdown",54)(30,"button",55),ue(31,"clr-icon",56),I(32,"span",29),ie(33,"\xa0\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),F(),ue(34,"cds-icon",57),F(),X(35,qet,11,0,"clr-dropdown-menu",58),F()(),I(36,"div",49)(37,"clr-dropdown",54)(38,"button",55),ue(39,"clr-icon",59),I(40,"span",29),ie(41,"\xa0\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F(),ue(42,"cds-icon",57),F(),X(43,Zet,11,0,"clr-dropdown-menu",60),F()()(),I(44,"div",61)(45,"div",62)(46,"button",50),ee("click",function(){return De(a),ke(q().toggleSearching())}),ue(47,"clr-icon",51),I(48,"span",29),ie(49," \u041f\u043e\u0438\u0441\u043a"),F()()(),I(50,"div",62)(51,"clr-dropdown",54)(52,"button",63),ue(53,"clr-icon",64)(54,"cds-icon",57),F(),X(55,Xet,15,1,"clr-dropdown-menu",60),F()(),I(56,"div",62)(57,"clr-dropdown",54)(58,"button",63),ue(59,"clr-icon",56),I(60,"span",29),ie(61," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),F(),ue(62,"cds-icon",57),F(),X(63,Yet,11,0,"clr-dropdown-menu",58),F()(),I(64,"div",62)(65,"clr-dropdown",54)(66,"button",55),ue(67,"clr-icon",59),I(68,"span",29),ie(69," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F(),ue(70,"cds-icon",57),F(),X(71,Ket,11,0,"clr-dropdown-menu",60),F()()(),I(72,"div",65)(73,"div",66)(74,"button",50),ee("click",function(){return De(a),ke(q().toggleSearching())}),ue(75,"clr-icon",51),I(76,"span",29),ie(77," \u041f\u043e\u0438\u0441\u043a"),F()()(),I(78,"div",66)(79,"clr-dropdown",54)(80,"button",63),ue(81,"clr-icon",64)(82,"cds-icon",57),F(),X(83,Jet,15,1,"clr-dropdown-menu",60),F()(),I(84,"div",66)(85,"clr-dropdown",54)(86,"button",55),ue(87,"clr-icon",56)(88,"clr-icon",59),I(89,"span",29),ie(90," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),F(),ue(91,"cds-icon",57),F(),X(92,ett,20,1,"clr-dropdown-menu",60),F()()(),X(93,ttt,6,1,"div",67),I(94,"div",null,68)(96,"div",69)(97,"div"),ue(98,"app-dynamic-content-toolbar",4),F()(),X(99,ntt,1,0,"ng-container",70),I(100,"div",69)(101,"div"),ue(102,"app-dynamic-content-toolbar",4),F()(),I(103,"div",71),ie(104),F()()()}if(2&c){const a=q(),h=Go(163),d=Go(165),f=Go(167),p=Go(169);P(1),R("enabled",!a.personsData.readonly)("name",a.currentMemorial?a.currentMemorial:"\u0412\u0441\u0435"),P(1),R("data",a.toolbarMemorials),P(1),R("data",a.headerData),P(2),R("ngIf",a.showSettings&&!a.personsData.readonly),P(1),R("ngIf",a.filterMemorials&&!a.personsData.text),P(1),R("hidden",a.personsData.readonly),P(8),et("shape","form"),P(14),R("clrCloseMenuOnItemClick",!0),P(8),R("clrCloseMenuOnItemClick",!0),P(7),R("hidden",a.personsData.readonly),P(7),R("clrCloseMenuOnItemClick",!0),P(6),R("clrCloseMenuOnItemClick",!0),P(8),R("clrCloseMenuOnItemClick",!0),P(7),R("hidden",a.personsData.readonly),P(7),R("clrCloseMenuOnItemClick",!0),P(6),R("clrCloseMenuOnItemClick",!0),P(8),R("ngIf",a.isSearching()),P(5),R("data",a.toolbarPages),P(1),R("ngTemplateOutlet",h)("ngTemplateOutletContext",NZ(25,itt,a.verticalView?a.verticalView10||a.verticalView40?d:f:p,a.verticalView10?1:a.verticalView40?2:1,a.persons)),P(3),R("data",a.toolbarPages),P(2),wC("\u0412\u0441\u0435\u0433\u043e: ",a.myPersons.length," ",a.getWordName(a.myPersons.length)," \u0438\u0437 ",a.personsAllCount,".")}}function stt(c,l){if(1&c){const a=at();I(0,"clr-toggle-wrapper")(1,"input",17),ee("ngModelChange",function(d){return ke(De(a).$implicit.enabled=d)}),F(),I(2,"label"),ie(3),F()()}if(2&c){const a=l.$implicit;P(1),R("name",a.memorial.memorial.name)("value",a.memorial.memorial.name)("ngModel",a.enabled),P(2),Ut(a.memorial.memorial.name)}}function ott(c,l){1&c&&(I(0,"span",83),ie(1,"\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f"),F())}function att(c,l){1&c&&Sa(0)}const ltt=function(c,l,a,h,d){return{mark:c,showPersons:l,horPagesCount:a,liveText:h,usopText:d}};function ctt(c,l){if(1&c&&(I(0,"div"),X(1,att,1,0,"ng-container",70),F()),2&c){const a=l.$implicit,h=l.mark,d=l.showPersons,f=l.horPagesCount,p=q();P(1),R("ngTemplateOutlet",a)("ngTemplateOutletContext",function LZ(c,l,a,h,d,f,p,g){const m=Ka()+c,v=Rt(),y=cu(v,m,a,h,d,f);return wa(v,m+4,p)||y?Hh(v,m+5,g?l.call(g,a,h,d,f,p):l(a,h,d,f,p)):yC(v,m+5)}(2,ltt,h,d,f,p.getMemorialPageText(d,!0),p.getMemorialPageText(d,!1)))}}function utt(c,l){if(1&c){const a=at();I(0,"div",86)(1,"app-svg-js-image",87),ee("pagesCount",function(d){De(a);const f=q(),p=f.horPagesCount,g=f.horPagesCount;return ke(q().onPagesCount(d,p*g,!0))}),F()()}if(2&c){const a=q(),h=a.liveText,d=a.horPagesCount,f=a.horPagesCount;P(1),R("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h)("type",1)("startPageIndex",0)("horizontalPagesCount",d)("verticalPagesCount",f)}}function htt(c,l){if(1&c&&(I(0,"div",86),ue(1,"app-svg-js-image",89),F()),2&c){const a=l.$implicit,h=q(2),d=h.liveText,f=h.horPagesCount,p=h.horPagesCount;P(1),R("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",d)("type",1)("startPageIndex",a)("horizontalPagesCount",f)("verticalPagesCount",p)}}function dtt(c,l){if(1&c&&(I(0,"div"),X(1,htt,2,9,"div",88),F()),2&c){const a=q(2);P(1),R("ngForOf",a.extraPagesLive)}}function ftt(c,l){if(1&c){const a=at();I(0,"div",86)(1,"app-svg-js-image",87),ee("pagesCount",function(d){De(a);const f=q(),p=f.horPagesCount,g=f.horPagesCount;return ke(q().onPagesCount(d,p*g,!1))}),F()()}if(2&c){const a=q(),h=a.usopText,d=a.horPagesCount,f=a.horPagesCount;P(1),R("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h)("type",1)("startPageIndex",0)("horizontalPagesCount",d)("verticalPagesCount",f)}}function ptt(c,l){if(1&c&&(I(0,"div",86),ue(1,"app-svg-js-image",89),F()),2&c){const a=l.$implicit,h=q(2),d=h.usopText,f=h.horPagesCount,p=h.horPagesCount;P(1),R("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",d)("type",1)("startPageIndex",a)("horizontalPagesCount",f)("verticalPagesCount",p)}}function gtt(c,l){if(1&c&&(I(0,"div"),X(1,ptt,2,9,"div",88),F()),2&c){const a=q(2);P(1),R("ngForOf",a.extraPagesUsop)}}function mtt(c,l){if(1&c&&(X(0,utt,2,9,"div",84),X(1,dtt,2,1,"div",85),X(2,ftt,2,9,"div",84),X(3,gtt,2,1,"div",85)),2&c){const a=l.liveText,h=l.usopText;R("ngIf",a),P(1),R("ngIf",a),P(1),R("ngIf",h),P(1),R("ngIf",h)}}function vtt(c,l){1&c&&(I(0,"span",95),ie(1,"+"),F())}function ytt(c,l){if(1&c&&(I(0,"span",92),ie(1),F()),2&c){const a=q().$implicit;R("ngClass",q(2).getClasses(a,a.classesBadgeHorizontal,!1,"",!1,!0)),P(1),Ut(a.badge)}}function _tt(c,l){if(1&c){const a=at();I(0,"span",91),ee("click",function(d){const p=De(a).$implicit,g=q(2).$implicit;return ke(q(2).onPersonFilterClick(d,g,p))}),ie(1),F()}if(2&c){const a=l.$implicit;R("ngClass",q(4).getFilterClasses(a)),P(1),Ut(a.name)}}function btt(c,l){if(1&c&&(I(0,"div"),X(1,_tt,2,2,"span",90),F()),2&c){const a=q(3);P(1),R("ngForOf",a.personsFilters)}}const Ctt=function(){return{"left-space-0":!0,"right-space-0":!0}};function xtt(c,l){if(1&c){const a=at();I(0,"div",91),ee("click",function(d){const p=De(a).$implicit;return ke(q(2).onPersonClick(d,p))}),I(1,"div",92),ie(2),F(),I(3,"div",92),X(4,vtt,2,0,"span",93),ie(5),I(6,"span"),X(7,ytt,2,2,"span",94),F()(),X(8,btt,2,1,"div",85),F()}if(2&c){const a=l.$implicit,h=q(2);R("ngClass",h.getClasses(a,Ll(8,Ctt))),P(1),R("ngClass",h.getClasses(a,a.classesVertical,!1,"clr-col-4 right")),P(1),Ut(a.prefix),P(1),R("ngClass",h.getClasses(a,a.classesVertical,!1,"clr-col-8")),P(1),R("ngIf",!(null!=a.person&&a.person.live)),P(1),Ti("",a.name," "),P(2),R("ngIf",a.badge),P(1),R("ngIf",h.personsClickHandler.person===a&&h.personsClickHandler.selectionToggle)}}function wtt(c,l){1&c&&X(0,xtt,9,9,"div",90),2&c&&R("ngForOf",l.showPersons)}function Stt(c,l){1&c&&(I(0,"span",95),ie(1,"+"),F())}function Ttt(c,l){if(1&c&&(I(0,"span",92),ie(1),F()),2&c){const a=q().$implicit;R("ngClass",q(2).getClasses(a,a.classesBadgeHorizontal,!1,"",!1,!0)),P(1),Ut(a.badge)}}function Ott(c,l){if(1&c){const a=at();I(0,"span",91),ee("click",function(d){const p=De(a).$implicit,g=q(2).$implicit;return ke(q(2).onPersonFilterClick(d,g,p))}),ie(1),F()}if(2&c){const a=l.$implicit;R("ngClass",q(4).getFilterClasses(a)),P(1),Ut(a.name)}}function Dtt(c,l){if(1&c&&(I(0,"span"),X(1,Ott,2,2,"span",90),F()),2&c){const a=q(3);P(1),R("ngForOf",a.personsFilters)}}function ktt(c,l){if(1&c){const a=at();I(0,"span")(1,"span",91),ee("click",function(d){const p=De(a).$implicit;return ke(q(2).onPersonClick(d,p))}),ie(2),X(3,Stt,2,0,"span",93),ie(4),X(5,Ttt,2,2,"span",94),F(),X(6,Dtt,2,1,"span",85),F()}if(2&c){const a=l.$implicit,h=q(2);P(1),R("ngClass",h.getClasses(a,a.classesHorizontal,!1,"",!0)),P(1),Ti("",a.prefix," "),P(1),R("ngIf",!(null!=a.person&&a.person.live)),P(1),Ut(a.name),P(1),R("ngIf",a.badge),P(1),R("ngIf",h.personsClickHandler.person===a&&h.personsClickHandler.selectionToggle)}}function Mtt(c,l){if(1&c&&(I(0,"span"),X(1,ktt,7,6,"span",18),F()),2&c){const a=l.showPersons;P(1),R("ngForOf",a)}}class xS{constructor(l,a,h){this.name=l,this.enabled=a,this.system=h}static builder(){return new xS("",!1,!1)}setName(l){return this.name=l,this}setEnabled(l){return this.enabled=l,this}setSystem(l){return this.system=l,this}}class iA{constructor(l,a,h){this.memorial=l,this.bEnabled=a,this.onEnabledChanged=h}get enabled(){return this.bEnabled}set enabled(l){this.bEnabled=l,this.onEnabledChanged&&this.onEnabledChanged()}static builder(){return new iA(null,!0,()=>{})}setMemorial(l){return this.memorial=l,this}setEnabled(l){return this.enabled=l,this}setOnEnabledChanged(l){this.onEnabledChanged=l}}class yU{constructor(l,a,h,d,f,p,g,m){this.prefix=l,this.name=a,this.description=h,this.badge=d,this.person=f,this.classesVertical=p,this.classesHorizontal=g,this.classesBadgeHorizontal=m}static builder(){return new yU("","","","",null,{},{},{})}setPrefix(l){return this.prefix=l,this}setName(l){return this.name=l,this}setDescription(l){return this.description=l,this}setBadge(l){return this.badge=l,this}setPerson(l){return this.person=l,this}addClassVertical(l,a=!0){return this.classesVertical[l]=a,this}addClassHorizontal(l,a=!0){return this.classesHorizontal[l]=a,this}addClassBadgeHorizontal(l,a=!0){return this.classesBadgeHorizontal[l]=a,this}}class Kf{constructor(l=!1,a=!0,h="",d="",f=[]){this.modalFlag=l,this.modalAddingFlag=a,this.currentName=h,this.text=d,this.preview=f,this.updating=!1,this.singleMemorial=!0,this.clearMemorial=!1}setUpdating(l){return this.updating=l,this}updateTextByPreview(){this.updating||(this.text=this.preview.filter((l,a)=>l.enabled).map((l,a)=>l.memorial.toString()).join("\r\n"))}}class _U{constructor(l,a){this.person=l,this.handler=a,this.lastDate=new Date,this.selectionToggle=!1}static builder(){return new _U(null,()=>{})}setHandler(l){return this.handler=l,this}clickByPerson(l){let a=new Date;this.person!=l?(this.person=l,this.lastDate=a,this.selectionToggle=!0):a.getTime()-this.lastDate.getTime()<500?(this.handler(l),this.person=null):(this.lastDate=a,this.selectionToggle=!this.selectionToggle)}}let Whe=(()=>{class c{constructor(a,h,d,f,p,g,m,v,y,_,b,C){this.config=a,this.uiConfig=h,this.themeSvc=d,this.memDataSvc=f,this.memLoaderSvc=p,this.memImporterSvc=g,this.memExporterSvc=m,this.memExporterXsvSvc=v,this.kafizmySvc=y,this.dateEventsSvc=_,this.audioSvc=b,this.tagsSvc=C,this.memorialsDlg=new Kf,this.memorialsDeleteDlg=new Kf,this.memorialsDeleteAllDlg=new Kf,this.memorialsImportDlg=new Kf,this.memorialsExportDlg=new Kf,this.memorialsWaitingDlg=new Kf,this.personDetailsDlg=new Kf,this.personDeleteDlg=new Kf,this.memorialsTitleInfoDlg=new Kf,this.headerData=Nc.builder(),this.personsClickHandler=_U.builder().setHandler(x=>this.onEditPerson(x)),this.personDetailsData=aU.builder().setOnClick(x=>{this.personDetailsDlg.modalFlag=!1,x&&this.reload()}),this.personsFilters=[],this.search=null,this.extraPagesLive=[],this.extraPagesUsop=[],this.stgShowSettings=N0.builder(),this.stgFilterMemorials=N0.builder(),this.allSettings=HE.builder().add(this.stgShowSettings).add(this.stgFilterMemorials),this.settingsData=bh.builder().updateClasses(x=>x.setMemorialSettings(!0)),this.oldPersons=null,this.myPersons=[],this.nameSvc=new eA,this.sendReadyChanges=ns.builder(),this.sortNamesChanges=ns.builder(),this.sortTypesChanges=ns.builder(),this.searchChanges=ns.builder(),this.pageSizeChanges=ns.builder(),this.personOffsetChanges=ns.builder(),this.offsetChanges=ns.builder(),this.addCommentToNameChanges=ns.builder(),this.toolbarPages=Ou.builder().setItems([]).setOnClick(x=>{this.selectPersonsPage(+x.tag)}).updateClasses(x=>{x.setLabelNormal("label-info")}),this.toolbarMemorials=Ou.builder().setItems([]).setOnClick(x=>{this.selectMemorial(x.tag)}).updateClasses(x=>{x.setLabelNormal("label-info")}),this.toolbarMemorialsFilters=Ou.builder().setItems([]).setOnClick(x=>{this.selectMemorialFlag(x.tag)}).updateClasses(x=>{x.setLabelNormal("label-success")}),this.toolbarMemorialsFlags=Ou.builder().setItems([]).setOnClick(x=>{this.selectMemorialFlag(x.tag)}).updateClasses(x=>{x.setLabelNormal("label-danger")}),this.personChangesSubscription=null}isSearching(){return null!=this.search}get showSettings(){return this.stgShowSettings.enabled}set showSettings(a){this.stgShowSettings.setEnabled(a)}get filterMemorials(){return this.stgFilterMemorials.enabled}set filterMemorials(a){this.stgFilterMemorials.setEnabled(a)}get verticalView10(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"10"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView40(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"40"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()}set verticalView(a){this.uiConfig.ui.memorialVerticalView.setBooleanValue(a)}get sortPersonPriests(){return this.uiConfig.ui.sortPersonsPriests.getBooleanValue()}get sortPersonNames(){return this.uiConfig.ui.sortPersonsNames.getBooleanValue()}get pageSize(){let a=this.uiConfig.ui.memorialPageSize.getStringValue();return a?+a:15}get currentPage(){return this.uiConfig.ui.currentMemorialPage.getNumberValue()}set currentPage(a){this.uiConfig.ui.currentMemorialPage.setNumberValue(a)}get currentMemorial(){return this.personsData.text?this.personsData.text:this.uiConfig.ui.currentMemorial.getStringValue()}set currentMemorial(a){this.personsData.text||this.uiConfig.ui.currentMemorial.setStringValue(a)}get persons(){return this.syncMyPersons(),this.myPersons}get personsAllCount(){return this.getPersonsAllCount(this.currentMemorial)}get personsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){this.personChangesSubscription=this.memDataSvc.getPersons().getChangeDetector().subscribe(a=>this.clearCaches())}ngOnDestroy(){this.personChangesSubscription&&(this.personChangesSubscription.unsubscribe(),this.personChangesSubscription=null)}ngAfterViewInit(){this.personsData.printerHandler.setHandler(a=>this.onEpubPrint(a)),this.setErrors([this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435"]),this.sortNamesChanges.setUIValue(this.uiConfig.ui.sortPersonsNames),this.sortTypesChanges.setUIValue(this.uiConfig.ui.sortPersonsPriests),this.personsData.readonly||this.audioSvc.stop(),this.isMemorialEnabled()||this.sendReady()}clearCaches(){this.memDataSvc.personsCache.clear()}getPersonsAll(a){return this.memDataSvc.personsCache.getCachedResult(a,this.personsData.readonly,this.personsData.classes.getLiveValue())}getPersonsAllCount(a){return this.getPersonsAll(a).length}setErrors(a){this.config.post(()=>{let h=[];this.personsData.text||h.push(Fc.builder().setText("\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f").setOnClick(()=>{this.filterMemorials=!this.filterMemorials})),this.personsData.readonly||h.unshift(Fc.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings})),this.headerData.setErrors(a).setActions(h).updateClasses(d=>d.setAlertClass("alert-success").setAlertShape(""))})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(a,h,d=!0,f="",p=!1,g=!1){let v={"clr-row":d};(f=f.trim())&&f.split(" ").forEach(y=>v[f]=!0);for(const y in h)v[y]=h[y];return p||g?v[(g?"hbs":"hs")+this.uiConfig.ui.fontSize.getStringValue()]=!0:v["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,v}printBook(){this.themeSvc.printWindow("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a")||window.print()}isActivePersonHasTag(a){var h;let d=!1;return!(null===(h=this.personsClickHandler.person)||void 0===h)&&h.person&&(d=ha.tagsHasFlag(this.personsClickHandler.person.person.tags,a)),"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"==a&&(d=!0),d}updatePersonFilterItemsDelayed(){this.config.post(()=>{this.updatePersonFilterItems()})}updatePersonFilterItems(){this.personsData.readonly?this.personsFilters.length&&(this.personsFilters=[]):this.memDataSvc.memorials?(this.personsFilters=this.memDataSvc.memorials.items.map(a=>a.name).map(a=>xS.builder().setName(a).setEnabled(this.isActivePersonHasTag(a))),this.personsFilters.unshift(xS.builder().setName("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c").setEnabled(!1).setSystem(!0),xS.builder().setName("\u0423\u0434\u0430\u043b\u0438\u0442\u044c").setEnabled(!1).setSystem(!0))):this.personsFilters.length&&(this.personsFilters=[])}getFilterItems(a){var h;let d=null===(h=this.memDataSvc.memorials)||void 0===h?void 0:h.items.find(p=>p.name==a),f=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(p=>!this.personsData.readonly||p.enabled).filter(p=>this.personsData.readonly?this.getPersonsAllCount(a)>0:this.getPersonsAllCount(a)>=0).map(p=>p.name).map(p=>pa.builder().setText(p).setTag(p).setSelected(this.tagsSvc.tagsHasFlag(d?d.tags:a,p))):[];return f.unshift(pa.builder().setText("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setTag("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setSelected(this.tagsSvc.tagsHasFlag(d?d.tags:a,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"))),f}syncMyPersons(a=!1){var h;let d=a;d=d||this.sortTypesChanges.checkAndUpdate(),d=d||this.sortNamesChanges.checkAndUpdate(),d=d||this.searchChanges.checkAndUpdate(this.search),d=d||this.pageSizeChanges.checkAndUpdate(this.pageSize),d=d||this.personOffsetChanges.checkAndUpdate(this.uiConfig.ui.currentPersonOffset.getNumberValue()),d=d||this.offsetChanges.checkAndUpdate(this.uiConfig.ui.currentOffset.getNumberValue()),d=d||this.addCommentToNameChanges.checkAndUpdate(this.uiConfig.ui.addCommentToName.getBooleanValue());let f=this.memDataSvc.persons;if(null==(null===(h=this.memDataSvc.memorials)||void 0===h?void 0:h.items.find(p=>p.name==this.currentMemorial))&&this.memDataSvc.memorials&&this.currentMemorial&&this.memDataSvc.memorials.items.length>0&&(this.currentMemorial=this.memDataSvc.memorials.items[0].name,d=!0),!f||f===this.oldPersons&&!d)return!f&&this.myPersons.length>0&&(this.myPersons=[]),void this.sendReady();this.oldPersons=f,this.config.post(()=>this.syncMyPersonsPosted())}syncMyPersonsPosted(){var a,h;this.sendReady(),this.setErrors([(this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435")+(this.personsData.readonly?this.personsData.classes.isLiveAcceptable(!0)?": \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438":": \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438":"")]);{this.toolbarMemorials.setItems((b=>{let C=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(x=>!this.personsData.readonly||x.enabled).filter(x=>this.personsData.readonly?this.getPersonsAllCount(x.name)>0:this.getPersonsAllCount(x.name)>=0).map(x=>x.name).map(x=>pa.builder().setText(x).setTag(x).setSelected(x==this.currentMemorial)):[];return C.unshift(pa.builder().setText("\u0412\u0441\u0435").setTag("").setSelected(!this.currentMemorial)),C})()),this.updatePersonFilterItems(),this.toolbarMemorialsFilters.setItems(this.getFilterItems(this.currentMemorial));let y=["\u0421\u043b\u0430\u0432\u0430 1","\u0421\u043b\u0430\u0432\u0430 2","\u0421\u043b\u0430\u0432\u0430 3","\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"],_=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(b=>b.name==this.currentMemorial);this.toolbarMemorialsFlags.setItems(y.map(b=>pa.builder().setText(b).setTag(b).setSelected(!!_&&this.tagsSvc.tagsHasFlag(_.tags,b))))}let d=null===(h=this.search)||void 0===h?void 0:h.toLowerCase(),f=[...this.getPersonsAll(this.currentMemorial).filter(v=>!d||v.name.toLowerCase().indexOf(d)>=0)],p=Math.ceil(f.length/this.pageSize);this.currentPage>p&&(this.currentPage=1);let g=this.currentPage?this.pageSize*(this.currentPage-1):0,m=this.currentPage?this.pageSize*this.currentPage-1:f.length-1;(this.sortPersonPriests||this.sortPersonNames)&&(f=Kn.sortPersons(f,v=>v,this.sortPersonNames,this.sortPersonPriests));{let v=this.uiConfig.ui.currentOffset.getNumberValue(),y=this.uiConfig.ui.currentPersonOffset.getNumberValue();v<0&&(v=y);let _=this.uiConfig.ui.addCommentToName.getBooleanValue(),b=ti.getKafizmNumberBy(17,v),C=ti.getKafizmNumberBy(17,y);this.myPersons=f.map(x=>{let S=this.nameSvc.getPrefixedName(x.name),w=Kn.isPriest(x),T=x.kafizma==b,O=x.kafizma==C,k=new $i;k.load(x.description);let D=k.getValue("\u0442\u0435\u043a\u0441\u0442");return D&&D.length>10&&(D=D.substring(0,8)+".."),yU.builder().setPrefix(S.prefix).setName(S.name+(_&&D?" ("+D+")":"")).setBadge(x.kafizma>0?""+x.kafizma:"").setPerson(x).addClassVertical("cursor",!0).addClassVertical("bg-4",w&&x.live).addClassVertical("bg-5",!w&&x.live).addClassVertical("bg-3",!x.live).addClassHorizontal("cursor",!0).addClassHorizontal("label",!0).addClassHorizontal("label-success",w&&x.live).addClassHorizontal("label-info",!w&&x.live).addClassHorizontal("label-warning",!x.live).addClassHorizontal("label-orange",!x.live).addClassBadgeHorizontal("badge",!0).addClassBadgeHorizontal("badge-purple",T&&x.live).addClassBadgeHorizontal("badge-danger",!T&&O&&x.live).addClassBadgeHorizontal("badge-light-blue",!(T||O)&&x.live)}).filter((x,S,w)=>g<=S&&S<=m)}this.toolbarPages.setItems([pa.builder().setText("\u0412\u0441\u0435").setTag("0").setSelected(0==this.currentPage)].concat(Array.from(Array(p).keys()).map(v=>v+1).map(v=>pa.builder().setText(""+v).setTag(""+v).setSelected(v==this.currentPage))))}sendReady(){this.sendReadyChanges.checkAndUpdate(!0)&&this.config.messageBus.putMessage(Py.builder().setSender(this.personsData.id).setTarget(this.personsData.targetId))}getMemorialPageText(a,h){let d=this.uiConfig.ui.addCommentToName.getBooleanValue(),f=a.filter(g=>g.person).map(g=>g.person).filter(g=>g.live==h).map(g=>{if(!d)return g.name;let m=new $i;m.load(g.description);let v=m.getValue("\u0442\u0435\u043a\u0441\u0442");return v&&v.length>10&&(v=v.substring(0,8)+".."),g.name+(d&&v?" ("+v+")":"")}).join(", "),p=this.uiConfig.ui.memorialsTitleRemark.getStringValue();return p&&(p=p.split(",").filter(g=>!!g).map(g=>g.trim()).map(g=>g.startsWith("*")?g:"*"+g).join(",")),this.personsData.readonly?this.personsData.classes.isLiveAcceptable(h)&&f?(h?`${p||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+f:"":f?(h?`${p||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+f:""}updateSelectedPage(){this.toolbarPages.items.forEach(a=>+a.tag==this.currentPage)}scrollToPersons(){return this.pagesView.nativeElement.scrollIntoView(!0),this}reSyncView(a){this.config.post(()=>{this.oldPersons=null,a&&a()})}selectPersonsPage(a){this.currentPage=a,this.reSyncView(()=>{this.scrollToPersons()})}selectMemorialFlag(a){var h;let d=null===(h=this.memDataSvc.memorials)||void 0===h?void 0:h.items.find(f=>f.name==this.currentMemorial);d&&(d.tags=this.tagsSvc.tagsHasFlag(d.tags,a)?ha.removeTag(d.tags,a):ha.addTagToTags(d.tags,a),this.memDataSvc.getMemorials().save(d,!0).then(f=>{this.reload()}))}selectMemorial(a){this.currentMemorial=a,this.reSyncView(),this.config.post(()=>{this.scrollToPersons()})}addMemorial(){this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!0,this.memorialsDlg.currentName=""}editMemorial(){!this.currentMemorial||(this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!1,this.memorialsDlg.currentName=this.currentMemorial)}deleteMemorial(){this.memorialsDeleteDlg.modalFlag=!0,this.memorialsDeleteDlg.currentName=this.currentMemorial}deleteAll(){this.memorialsDeleteAllDlg.modalFlag=!0,this.memorialsDeleteAllDlg.currentName=this.currentMemorial}reload(){this.memDataSvc.getMemorials().reloadMemorials(a=>{a&&this.memDataSvc.getPersons().reloadPersons()})}newMemorial(a){var h;null===(h=this.memDataSvc.memorials)||void 0===h||h.newMemorial(a,d=>{d.success?(this.currentMemorial=a,this.reload()):this.config.addAlert(Fr.of(d.error,"Ok",30))})}onAddNewMemorial(){this.newMemorial(this.memorialsDlg.currentName),this.memorialsDlg.modalFlag=!1}onChangeMemorial(){var a;let h=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(d=>d.name==this.currentMemorial);h&&(h.name=this.memorialsDlg.currentName,this.currentMemorial=h.name,this.config.post(()=>this.reload(),100)),this.memorialsDlg.modalFlag=!1}onDeleteAllPersons(){this.memorialsDeleteAllDlg.modalFlag=!1,this.memDataSvc.getMemorials().deleteAll().then(a=>{a&&a.success&&this.memDataSvc.getPersons().deleteAll(-1).then(h=>{h&&h.success&&(this.currentMemorial="",this.reload())})})}onDeleteMemorial(){var a,h,d;let f=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(g=>g.name==this.currentMemorial),p=null===(h=this.memDataSvc.memorials)||void 0===h?void 0:h.items.find(g=>g.name!=this.currentMemorial);f&&(this.currentMemorial=p?p.name:"",null===(d=this.memDataSvc.memorials)||void 0===d||d.deleteMemorial(f,g=>{this.reload()})),this.memorialsDeleteDlg.modalFlag=!1}toggleSearching(){this.search=null==this.search?"":null}get visible(){var a;let h=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(d=>d.name==this.currentMemorial);return!!h&&h.enabled}set visible(a){var h;let d=null===(h=this.memDataSvc.memorials)||void 0===h?void 0:h.items.find(f=>f.name==this.currentMemorial);d&&(d.enabled=a)}toggleVisible(){var a;let h=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(d=>d.name==this.currentMemorial);h&&(h.enabled=!h.enabled)}importMemorials(){this.memorialsImportDlg.modalFlag=!0,this.memorialsImportDlg.currentName=this.currentMemorial,!this.memorialsImportDlg.text&&this.persons.length&&(this.memorialsImportDlg.text=this.getCurrentMemorialText())}getWordName(a){let h="";switch(Math.floor(a%10)){case 1:h="\u0438\u043c\u044f";break;case 2:case 3:case 4:h="\u0438\u043c\u0435\u043d\u0438";break;default:h="\u0438\u043c\u0451\u043d"}return h}onPersonFilterClick(a,h,d){a.stopPropagation(),h.person&&("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"==d.name?this.onEditPerson(h):"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"==d.name?this.personDeleteDlg.modalFlag=!0:(h.person.tags=ha.addTagToTags(h.person.tags,d.name),this.memDataSvc.getPersons().save(-1,h.person,!0))),this.updatePersonFilterItemsDelayed()}onPersonClick(a,h){a.stopPropagation();let d=h.person.offset;d>=0&&!this.personsData.readonly&&this.uiConfig.ui.currentPersonOffset.setNumberValue(d),this.personsClickHandler.clickByPerson(h),this.updatePersonFilterItemsDelayed()}getTags(a=""){var h;let d="";return null===(h=this.memDataSvc.memorials)||void 0===h||h.items.forEach(f=>{f.name==(a||this.currentMemorial)&&(d+=f.name)}),d}onClearImportPreview(){this.memorialsImportDlg.preview=[],this.memorialsImportDlg.text=this.getCurrentMemorialText()}onImportMemorial(){this.memorialsWaitingDlg.modalFlag=!0,this.memorialsImportDlg.modalFlag=!1,this.memorialsImportDlg.singleMemorial&&this.memorialsImportDlg.clearMemorial&&this.clearCurrentMemorial(!1),this.onImportMemorialSource(this.memorialsImportDlg.text,this.memorialsImportDlg.singleMemorial?[]:this.memorialsImportDlg.preview,this.memorialsImportDlg.singleMemorial)}onAddNewPerson(){let a=`[${this.currentMemorial}]\n\u0418\u043c\u044f\u0420\u0435\u043a`;this.onImportMemorialSource(a,[iA.builder().setEnabled(!0).setMemorial(this.memLoaderSvc.previewPersons(a)[0])],!0)}onImportMemorialSource(a,h,d){let f=h,p=f.find(m=>{var v,y;return"\u0432\u0441\u0435"===(null===(y=null===(v=m.memorial)||void 0===v?void 0:v.memorial)||void 0===y?void 0:y.name)}),g=()=>{var m,v,y,_;if(f.length){let b=f[0];f=f.slice(1);let C=null===(v=null===(m=b.memorial)||void 0===m?void 0:m.memorial)||void 0===v?void 0:v.name;b.enabled&&C?(null===(y=this.memDataSvc.memorials)||void 0===y?void 0:y.items.find(S=>S.name==C))?this.config.post(g):null===(_=this.memDataSvc.memorials)||void 0===_||_.newMemorial(C,S=>{S.success?this.config.post(g):this.memDataSvc.getMemorials().reloadMemorials(w=>{this.config.post(g)})}):this.config.post(g)}else this.memDataSvc.getMemorials().reloadMemorials(b=>{b?this.memLoaderSvc.addPersons(x=>{var S,w;return(null===(w=null===(S=this.memDataSvc.memorials)||void 0===S?void 0:S.items.find(O=>O.name==(d?this.currentMemorial:x)))||void 0===w?void 0:w._id)||-1},a,x=>this.getTags(d?this.currentMemorial:x),!0,()=>{var x;let S=null===(x=this.memDataSvc.getMemorials().getMemorials())||void 0===x?void 0:x.items.find(w=>"\u0432\u0441\u0435"===w.name);p&&S?this.memDataSvc.getMemorials().deleteMemorial(S).then(w=>{(!w||!w.success)&&this.config.addAlert(Fr.of('\u041d\u0435 \u043c\u043e\u0433\u0443 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "\u0432\u0441\u0435".',"\u041e\u041a",15)),this.memorialsWaitingDlg.modalFlag=!1,this.reload()}):(this.memorialsWaitingDlg.modalFlag=!1,this.reload())}):this.memorialsWaitingDlg.modalFlag=!1})};this.config.post(g)}get allMemorialEnabled(){return this.memorialsImportDlg.preview.map(a=>a.enabled).reduce((a,h)=>a&&h,!0)}set allMemorialEnabled(a){this.memorialsImportDlg.setUpdating(!0),this.memorialsImportDlg.preview.forEach(h=>h.enabled=a),this.memorialsImportDlg.setUpdating(!1),this.memorialsImportDlg.updateTextByPreview()}onImportFile(a){0!==a.target.files.length&&this.memImporterSvc.onLoadAnyFile(a.target.files[0],"",h=>{this.memorialsImportDlg.text=h,this.memorialsImportDlg.preview=this.memLoaderSvc.previewPersons(h).map(d=>iA.builder().setMemorial(d).setEnabled(!0)),this.memorialsImportDlg.preview.forEach(d=>d.setOnEnabledChanged(()=>this.memorialsImportDlg.updateTextByPreview()))})}exportMemorials(){this.memorialsExportDlg.modalFlag=!0,this.memorialsExportDlg.currentName=this.currentMemorial}onSaveAs(a){this.memorialsExportDlg.modalFlag=!1,this.onSaveAllMemorials(a)}getCurrentMemorialText(){var a,h;let d=null===(a=this.memDataSvc.memorials)||void 0===a?void 0:a.items.find(v=>v.name==this.currentMemorial);if(!d)return"";let g="",m=null===(h=this.memDataSvc.persons)||void 0===h?void 0:h.items;return g=this.memExporterSvc.getMemorialsXmlString(m,[this.currentMemorial],[d.tags]),g=this.memLoaderSvc.convertXmlToString(g),g}onSaveAllMemorials(a="xml",h=!0){var d;let f=[""],p=[""],g=this.memDataSvc.getMemorials().getActivePredefinedMemorialsRaw();null===(d=this.memDataSvc.memorials)||void 0===d||d.items.forEach(v=>{let y=null==g.find(_=>_==v.name);h&&(y=!0),v.enabled&&y&&(f.push(v.name),p.push(v.tags))}),(()=>{var v;let y="",_=null===(v=this.memDataSvc.persons)||void 0===v?void 0:v.items;switch(a){case"xml":y=this.memExporterSvc.getMemorialsXmlString(_,f,p);break;case"csv":y=this.memExporterXsvSvc.getMemorialsString(_,f,p,";");break;case"tsv":y=this.memExporterXsvSvc.getMemorialsString(_,f,p,"\t");break;default:y=this.memExporterSvc.getMemorialsXmlString(_,f,p),y=this.memLoaderSvc.convertXmlToString(y)}const b=(new Date).toISOString().split("T")[0];let C=a;if(this.config.isPlatformAndroid())this.kafizmySvc.addTempFile(`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${C}`,y).then(x=>{x&&x.success&&jf.startDownload(x.fileName,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${b}.${C}`)});else{const x=new TextEncoder,S=new Blob([x.encode(y)],{type:"octet/stream"});jf.saveData(S,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${b}.${C}`)}})()}onPagesCount(a,h,d){this.config.post(()=>{this.onPagesCountDirect(a,h,d)})}onPagesCountDirect(a,h,d){d?this.extraPagesLive=[]:this.extraPagesUsop=[];let f=a-h,p=0;for(;f>0;)f=Math.max(0,f-h),p+=h,d?this.extraPagesLive.push(p):this.extraPagesUsop.push(p)}onEditPerson(a){a.person&&!this.personsData.readonly&&(this.personDetailsData.setPerson(a.person),this.personDetailsDlg.modalFlag=!0)}isMemorialEnabled(a){let h=!1;return this.personsData.readonly||(h=!0),this.personsData.classes.slava1Zdrav&&this.uiConfig.ui.memorialSlava1Zdrav.getBooleanValue()&&(h=!0===a||void 0===a),this.personsData.classes.slava2Zdrav&&this.uiConfig.ui.memorialSlava2Zdrav.getBooleanValue()&&(h=!0===a||void 0===a),this.personsData.classes.slava3Zdrav&&this.uiConfig.ui.memorialSlava3Zdrav.getBooleanValue()&&(h=!0===a||void 0===a),this.personsData.classes.slava1Upok&&this.uiConfig.ui.memorialSlava1Upok.getBooleanValue()&&(h=!1===a||void 0===a),this.personsData.classes.slava2Upok&&this.uiConfig.ui.memorialSlava2Upok.getBooleanValue()&&(h=!1===a||void 0===a),this.personsData.classes.slava3Upok&&this.uiConfig.ui.memorialSlava3Upok.getBooleanValue()&&(h=!1===a||void 0===a),h}onEpubPrint(a){let h=[[],[],[]],d=[[],[],[]];if(this.persons.filter(f=>{var p;return null===(p=f.person)||void 0===p?void 0:p.live}).forEach(f=>{h[0].push(""),h[1].push(f.prefix),h[2].push(f.name)}),this.persons.filter(f=>{var p;return!(null!==(p=f.person)&&void 0!==p&&p.live)}).forEach(f=>{d[0].push("+"),d[1].push(f.prefix),d[2].push(f.name)}),h[0].length>0&&this.isMemorialEnabled(!0)||d[0].length>0&&this.isMemorialEnabled(!1)){let f=[],p=[],g=[],m=this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435";h[0].length&&(f.push(m+" - \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"),p.push(h),g.push([0])),d[0].length&&(f.push(m+" - \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"),p.push(d),g.push([0])),f.length>0&&a.addRequest(s1.builder().setName(m).setBookNames(["\u0436\u0438\u0432","\u043f\u0440\u0435\u0444\u0438\u043a\u0441","\u0438\u043c\u044f"]).setPsalomName("").setAllBooksChapters(f).setAllBooks(p).setEmptyFirstLines(g).setShowLineIndexes(!1))}}onEditTitleInfo(){this.memorialsTitleInfoDlg.modalFlag=!0,this.memorialsTitleInfoDlg.currentName=this.uiConfig.ui.memorialsTitleRemark.getStringValue()}onEndTitleInfoDlg(){this.uiConfig.ui.memorialsTitleRemark.setStringValue(this.memorialsTitleInfoDlg.currentName),this.memorialsTitleInfoDlg.modalFlag=!1}getFilterClasses(a){let h={label:!0,"label-danger":!a.enabled&&!a.system,"label-success":a.enabled&&!a.system};return h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}onDeleteCurrentPerson(){var a;this.personsClickHandler.person&&this.personsClickHandler.person.person&&(null===(a=this.memDataSvc.persons)||void 0===a||a.deletePerson(this.personsClickHandler.person.person),this.reload()),this.personDeleteDlg.modalFlag=!1}clearCurrentMemorial(a){let h=[];this.persons.forEach(d=>{d.person&&(d.person.tags=ha.removeTag(d.person.tags,this.currentMemorial),d.person.tags?this.memDataSvc.getPersons().save(-1,d.person,!0):h.push(d.person))}),this.memDataSvc.getPersons().deletePersons(h),a&&this.reload()}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(go),B(lU),B(gU),B(zhe),B(Uhe),B(Hhe),B(_g),B(tA),B(c1),B(ha))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-persons"]],viewQuery:function(a,h){if(1&a&&ci(Get,5),2&a){let d;Ht(d=$t())&&(h.pagesView=d.first)}},inputs:{data:"data"},decls:170,vars:28,consts:[[3,"click",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[3,"data"],["clrForm",""],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u043b\u0435\u0431\u043d\u0430","name","input",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","name","input",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-danger"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","singleMemorial",3,"ngModel","ngModelChange"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","clearMemorial",3,"ngModel","disabled","ngModelChange"],["class","badge",4,"ngIf"],["type","checkbox","clrCheckbox","","value","mergeNames","name","mergeNames",3,"ngModel","ngModelChange"],[1,"clr-form"],["clrTextarea","","name","description","required","",3,"ngModel","ngModelChange"],[1,"clr-row"],[1,"clr-col-6","clr-hidden-sm-up"],["type","button",1,"btn","btn-link","btn-block",3,"click"],["shape","recycle"],[1,"clr-hidden-md-down"],[1,"btn","btn-link","btn-block"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b","accept",".xml,.json,.csv,.tsv,.txt",1,"button-input",3,"change"],["shape","upload"],[1,"clr-col-3","clr-hidden-xs-down"],["type","button",1,"btn","btn-outline","btn-block",3,"click"],["shape","ban"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"clr-col-6","clr-hidden-xs-down"],[1,"clr-col-6"],[1,"clr-col-12"],["tpl1",""],["paramTemplateVerticalX",""],["paramTemplateVertical",""],["paramTemplateHorizontal",""],[3,"click"],[3,"enabled","name"],[1,"no-print","s0"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"clr-row","no-print","clr-hidden-sm-down",3,"hidden"],[1,"clr-col-2"],[1,"btn","btn-link","btn-block",3,"click"],["shape","search"],["shape","import"],["shape","export"],[1,"btn","btn-link","btn-block",3,"clrCloseMenuOnItemClick"],["clrDropdownTrigger","",1,"btn","btn-link","btn-block"],["shape","add-text"],["shape","angle","direction","down"],[4,"clrIfOpen"],["shape","times"],["clrPosition","bottom-right",4,"clrIfOpen"],[1,"clr-row","left-space-0","right-space-0","no-print","clr-hidden-xs-down","clr-hidden-md-up",3,"hidden"],[1,"clr-col-3"],["clrDropdownTrigger","",1,"btn","btn-link"],["shape","form"],[1,"clr-row","left-space-0","right-space-0","no-print","clr-hidden-sm-up",3,"hidden"],[1,"clr-col-4"],["class","no-print",4,"ngIf"],["pagesView",""],[1,"no-print"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pageBreak","pageBreakBefore"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],["aria-hidden","true",1,"dropdown-header"],["aria-label","Dropdown header Action 1","clrDropdownItem","",3,"click"],["aria-label","Dropdown header Action 2","clrDropdownItem","",3,"click"],["clrPosition","bottom-right"],["aria-label","Dropdown header Action 3","clrDropdownItem","",3,"click"],["role","separator","aria-hidden","true",1,"dropdown-divider"],["clrInput","","placeholder","\u0418\u043c\u044f","name","input",3,"ngModel","ngModelChange"],[1,"badge"],["class","pageBreakBefore",4,"ngIf"],[4,"ngIf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"ngClass"],["class","print-only",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"print-only"]],template:function(a,h){1&a&&(X(0,rtt,105,29,"div",0),I(1,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.personDetailsDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(2,"h3",2),ie(3,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u044b"),F(),I(4,"div",3),ue(5,"app-person-details",4),F()(),I(6,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.memorialsTitleInfoDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(7,"h3",2),ie(8,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u043b\u0435\u0431\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),F(),I(9,"div",3)(10,"form",5)(11,"clr-input-container")(12,"label"),ie(13,"\u0422\u0435\u043a\u0441\u0442:"),F(),I(14,"input",6),ee("ngModelChange",function(f){return h.memorialsTitleInfoDlg.currentName=f}),F(),I(15,"clr-control-helper"),ie(16,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041c\u043e\u043b\u0435\u0431\u0435\u043d, \u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435"),F()()()(),I(17,"div",7)(18,"button",8),ee("click",function(){return h.memorialsTitleInfoDlg.modalFlag=!1}),ie(19,"\u041e\u0442\u043c\u0435\u043d\u0430"),F(),I(20,"button",9),ee("click",function(){return h.onEndTitleInfoDlg()}),ie(21,"Ok"),F()()(),I(22,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.memorialsDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(23,"h3",2),ie(24),F(),I(25,"div",3)(26,"form",5)(27,"clr-input-container")(28,"label"),ie(29,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:"),F(),I(30,"input",10),ee("ngModelChange",function(f){return h.memorialsDlg.currentName=f}),F()()()(),I(31,"div",7)(32,"button",8),ee("click",function(){return h.memorialsDlg.modalFlag=!1}),ie(33,"\u041e\u0442\u043c\u0435\u043d\u0430"),F(),I(34,"button",11),ee("click",function(){return h.memorialsDlg.modalAddingFlag?h.onAddNewMemorial():h.onChangeMemorial()}),ie(35,"Ok"),F()()(),I(36,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.personDeleteDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(37,"h3",2),ie(38,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438"),F(),I(39,"div",3)(40,"p")(41,"button",12),ue(42,"clr-icon",13),F(),ie(43),F()(),I(44,"div",7)(45,"button",8),ee("click",function(){return h.personDeleteDlg.modalFlag=!1}),ie(46,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),F(),I(47,"button",14),ee("click",function(){return h.onDeleteCurrentPerson()}),ie(48,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F()()(),I(49,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.memorialsDeleteDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(50,"h3",2),ie(51,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),F(),I(52,"div",3)(53,"p")(54,"button",12),ue(55,"clr-icon",13),F(),ie(56),F()(),I(57,"div",7)(58,"button",8),ee("click",function(){return h.memorialsDeleteDlg.modalFlag=!1}),ie(59,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),F(),I(60,"button",9),ee("click",function(){return h.onDeleteMemorial()}),ie(61,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F()()(),I(62,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.memorialsDeleteAllDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(63,"h3",2),ie(64,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"),F(),I(65,"div",3)(66,"p")(67,"button",15),ue(68,"clr-icon",13),F(),ie(69," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435?"),F()(),I(70,"div",7)(71,"button",8),ee("click",function(){return h.memorialsDeleteAllDlg.modalFlag=!1}),ie(72,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),F(),I(73,"button",14),ee("click",function(){return h.onDeleteAllPersons()}),ie(74,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()()(),I(75,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.memorialsImportDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(76,"h3",2),ie(77,"\u0418\u043c\u043f\u043e\u0440\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),F(),I(78,"div",3)(79,"clr-toggle-container",16)(80,"label"),ie(81,"\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438:"),F(),I(82,"clr-toggle-wrapper")(83,"input",17),ee("ngModelChange",function(f){return h.allMemorialEnabled=f}),F(),I(84,"label"),ie(85,"\u0412\u0441\u0435"),F()(),X(86,stt,4,4,"clr-toggle-wrapper",18),F(),I(87,"clr-checkbox-container")(88,"clr-checkbox-wrapper")(89,"input",19),ee("ngModelChange",function(f){return h.memorialsImportDlg.singleMemorial=f}),F(),I(90,"label"),ie(91,"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),F()(),I(92,"clr-checkbox-wrapper")(93,"input",20),ee("ngModelChange",function(f){return h.memorialsImportDlg.clearMemorial=f}),F(),I(94,"label"),ie(95,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "),X(96,ott,2,0,"span",21),F()(),I(97,"clr-checkbox-wrapper")(98,"input",22),ee("ngModelChange",function(f){return h.uiConfig.ui.mergeNameOnImport.rawValue=f}),F(),I(99,"label"),ie(100),F()()(),I(101,"form",23)(102,"clr-textarea-container")(103,"label"),ie(104,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d:"),F(),I(105,"textarea",24),ee("ngModelChange",function(f){return h.memorialsImportDlg.text=f}),F(),I(106,"clr-control-helper"),ie(107,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u043f\u0430\u0442\u0440. \u041a\u0438\u0440\u0438\u043b\u043b (\u043f\u0430\u0442\u0440\u0438\u0430\u0440\u0445 \u041a\u0438\u0440\u0438\u043b\u043b)"),F(),I(108,"clr-control-error"),ie(109,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043f\u0443\u0441\u0442\u043e\u0439!"),F()()()(),I(110,"div",7)(111,"div",25)(112,"div",26)(113,"button",27),ee("click",function(){return h.onClearImportPreview()}),ue(114,"clr-icon",28),I(115,"span",29),ie(116," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()(),I(117,"label",30)(118,"input",31),ee("change",function(f){return h.onImportFile(f)}),F(),ue(119,"clr-icon",32),F()(),I(120,"div",33)(121,"button",27),ee("click",function(){return h.onClearImportPreview()}),ue(122,"clr-icon",28),I(123,"span",29),ie(124," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()()(),I(125,"div",33)(126,"label",30)(127,"input",31),ee("change",function(f){return h.onImportFile(f)}),F(),ue(128,"clr-icon",32),F()(),I(129,"div",26)(130,"button",34),ee("click",function(){return h.memorialsImportDlg.modalFlag=!1}),ue(131,"clr-icon",35),F(),I(132,"button",36),ee("click",function(){return h.onImportMemorial()}),ie(133,"\u041e\u041a"),F()(),I(134,"div",37)(135,"div",25)(136,"div",38)(137,"button",34),ee("click",function(){return h.memorialsImportDlg.modalFlag=!1}),ue(138,"clr-icon",35),F()(),I(139,"div",38)(140,"button",36),ee("click",function(){return h.onImportMemorial()}),ie(141,"\u041e\u041a"),F()()()()()()(),I(142,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.memorialsExportDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(143,"h3",2),ie(144,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a"),F(),I(145,"div",3),ie(146," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430: "),F(),I(147,"div",7)(148,"div",25)(149,"div",39)(150,"button",8),ee("click",function(){return h.onSaveAs("tsv")}),ie(151,"TSV"),F(),I(152,"button",8),ee("click",function(){return h.onSaveAs("xml")}),ie(153,"XML"),F(),I(154,"button",9),ee("click",function(){return h.onSaveAs("txt")}),ie(155,"TXT"),F()()()()(),I(156,"clr-modal",1),ee("clrModalOpenChange",function(f){return h.memorialsWaitingDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),I(157,"h3",2),ie(158,"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),F(),I(159,"div",3),ue(160,"app-dynamic-spinner"),F(),ue(161,"div",7),F(),X(162,ctt,2,8,"ng-template",null,40,Oa),X(164,mtt,4,4,"ng-template",null,41,Oa),X(166,wtt,1,1,"ng-template",null,42,Oa),X(168,Mtt,2,1,"ng-template",null,43,Oa)),2&a&&(R("ngIf",h.isMemorialEnabled()),P(1),R("clrModalOpen",h.personDetailsDlg.modalFlag),P(4),R("data",h.personDetailsData),P(1),R("clrModalOpen",h.memorialsTitleInfoDlg.modalFlag),P(8),R("ngModel",h.memorialsTitleInfoDlg.currentName),P(8),R("clrModalOpen",h.memorialsDlg.modalFlag),P(2),Ti("",h.memorialsDlg.modalAddingFlag?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435"," \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),P(6),R("ngModel",h.memorialsDlg.currentName),P(4),R("disabled",!h.memorialsDlg.currentName),P(2),R("clrModalOpen",h.personDeleteDlg.modalFlag),P(7),Ti(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",h.personsClickHandler.person?h.personsClickHandler.person.name:"\u041e\u0448\u0438\u0431\u043a\u0430","?"),P(6),R("clrModalOpen",h.memorialsDeleteDlg.modalFlag),P(7),Ti(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a '",h.memorialsDeleteDlg.currentName?h.memorialsDeleteDlg.currentName:"\u041e\u0448\u0438\u0431\u043a\u0430","'?"),P(6),R("clrModalOpen",h.memorialsDeleteAllDlg.modalFlag),P(13),R("clrModalOpen",h.memorialsImportDlg.modalFlag),P(8),R("name","all")("value","all")("ngModel",h.allMemorialEnabled),P(3),R("ngForOf",h.memorialsImportDlg.preview),P(3),R("ngModel",h.memorialsImportDlg.singleMemorial),P(4),R("ngModel",h.memorialsImportDlg.clearMemorial)("disabled",!h.memorialsImportDlg.singleMemorial),P(3),R("ngIf",!h.memorialsImportDlg.singleMemorial),P(2),R("ngModel",h.uiConfig.ui.mergeNameOnImport.rawValue),P(2),Ut(h.uiConfig.ui.mergeNameOnImport.description),P(5),R("ngModel",h.memorialsImportDlg.text),P(37),R("clrModalOpen",h.memorialsExportDlg.modalFlag),P(14),R("clrModalOpen",h.memorialsWaitingDlg.modalFlag))},dependencies:[si,fi,_n,qh,eo,pr,Rf,Ff,QL,cs,HL,Kte,ND,Hp,LD,Up,Bx,e_,l5,dne,Xx,R5,F5,I5,Sx,Wm,Ox,Tx,Dx,jy,Ly,Vl,td,jo,Fy,Bm,Ao,xf,Zl,$he,u1,nA,vU,h1,Wet],styles:[".button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:7rem}.s0[_ngcontent-%COMP%]{font-size:.7rem!important;line-height:1.2rem!important}.left-space-0[_ngcontent-%COMP%]{margin-left:0!important}.right-space-0[_ngcontent-%COMP%]{margin-right:0!important}"]}),c})();class bU{constructor(){this.printOnly=!1}static builder(){return new bU}setPrintOnly(l){return this.printOnly=l,this}}class CU extends mi{constructor(l,a,h,d,f,p){super("",d,f),this.genName=l,this.svgWidth=a,this.svgHeight=h,this.classes=p}static builder(){return new CU("",512,512,null,null,bU.builder())}setGenName(l){return this.genName=l,this}setSvgWidth(l){return this.svgWidth=l,this}setSvgHeight(l){return this.svgHeight=l,this}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}updateClasses(l){return l(this.classes),this}}let Ett=(()=>{class c{constructor(a){this.config=a}get svgData(){return this.data}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){var a=this.svgData.classes;return{"print-only":a&&a.printOnly}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-svg"]],inputs:{data:"data"},decls:1,vars:5,consts:[[3,"genName","svgWidth","svgHeight","type","ngClass"]],template:function(a,h){1&a&&ue(0,"app-svg-js-image",0),2&a&&R("genName",h.genName)("svgWidth",h.svgWidth)("svgHeight",h.svgHeight)("type",512)("ngClass",h.getClasses())},dependencies:[si,Zl],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();function Att(c,l){if(1&c&&(I(0,"span"),ie(1),F()),2&c){const a=q(2);P(1),Ut(a.text)}}function Itt(c,l){1&c&&ue(0,"app-add-component",5),2&c&&R("component",l.$implicit)}function Ptt(c,l){if(1&c&&(I(0,"div"),X(1,Itt,1,1,"app-add-component",4),F()),2&c){const a=q(2);P(1),R("ngForOf",a.components)}}function Rtt(c,l){if(1&c&&(I(0,"div",9),ue(1,"app-add-component",5),F()),2&c){const a=l.$implicit;R("ngClass",q(3).getColClass(a)),P(1),R("component",a)}}function Ftt(c,l){if(1&c&&(I(0,"div",6)(1,"div",7),X(2,Rtt,2,2,"div",8),F()()),2&c){const a=q(2);P(2),R("ngForOf",a.components)}}function Ntt(c,l){if(1&c){const a=at();I(0,"div",1),ee("click",function(d){return De(a),ke(q().onClick(d))}),X(1,Att,2,1,"span",2),X(2,Ptt,2,1,"div",2),X(3,Ftt,3,1,"div",3),F()}if(2&c){const a=q();R("ngClass",a.getClasses()),P(1),R("ngIf",!a.components.length),P(1),R("ngIf",!a.isRow),P(1),R("ngIf",a.isRow)}}let xU=(()=>{class c{constructor(a){this.config=a,this.checkLater=rx.builder().setEnabled(!1)}get divData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.divData.components.length?this.divData.components[0]:null}get components(){return this.divData.components}get isRow(){return this.divData.classes.sClasses.findIndex((a,h,d)=>"clr-row"==a)>=0}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.config.post(()=>{this.checkLater.setConfig(this.config).setWaitingForSenderId(this.divData.waitingForSenderId),this.checkLater.checkEnabled()})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.divData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var a=this.divData.classes;let h={ftext:a.fineText,pageBreak:a.pageBreakAfter,pageBreakBefore:a.pageBreakBefore};return a.sClasses.filter(d=>"clr-row"!=d&&!d.startsWith("clr-col-")).forEach(d=>h[d]=!0),h}getColClass(a){let h=this.getColClassRaw(a);return a.detector.checkAndGetValue(h)}getColClassRaw(a){let h={"clr-col":!0};return a.component===c&&a.data.classes.sClasses.filter(f=>f.startsWith("clr-col-")).forEach(f=>h[f]=!0),h}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-div"]],inputs:{data:"data"},decls:1,vars:1,consts:[[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],[4,"ngIf"],["class","clr-col-12",4,"ngIf"],[3,"component",4,"ngFor","ngForOf"],[3,"component"],[1,"clr-col-12"],[1,"clr-row"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(a,h){1&a&&X(0,Ntt,4,4,"div",0),2&a&&R("ngIf",h.checkLater.enabled)},dependencies:[si,fi,_n,Yl],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class wU extends Tu{constructor(){super(),this.fineText=!1,this.pageBreakBefore=!1,this.pageBreakAfter=!1,this.printOnly=!1,this.noPrint=!1,this.sClasses=[]}static builder(){return new wU}setFineText(l){return this.fineText=l,this.markChanged(),this}setPageBreakBefore(l){return this.pageBreakBefore=l,this.markChanged(),this}setPageBreakAfter(l){return this.pageBreakAfter=l,this.markChanged(),this}setPrintOnly(l){return this.printOnly=l,this.markChanged(),this}setNoPrint(l){return this.noPrint=l,this.markChanged(),this}addSClass(l){return this.sClasses.push(l),this.markChanged(),this}setSClasses(l){return this.sClasses=l,this.markChanged(),this}}class rA extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new rA("",null,null,wU.builder().setFineText(!0))}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setId(l){return this.id=l,this}setWaitingForSenderid(l){return this.waitingForSenderId=l,this}setComponents(l){return this.components=l,this}}const Ltt=function(c,l){return{"no-print":!0,alert:!0,"alert-warning":c,"alert-success":l,"bottom-top-space":!0}};function Btt(c,l){if(1&c){const a=at();I(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"clr-icon",5),ee("click",function(){return De(a),ke(q().toggleAudio())}),F()(),I(5,"span",6),ie(6),F()()(),I(7,"button",7)(8,"clr-icon",5),ee("click",function(){return De(a),ke(q().autioSvc.control.next())}),F()(),I(9,"button",7)(10,"clr-icon",8),ee("click",function(){return De(a),ke(q().autioSvc.control.close(!0))}),F()()()}if(2&c){const a=q();R("ngClass",as(4,Ltt,!a.autioSvc.control.isPlaying(),a.autioSvc.control.isPlaying())),P(4),et("shape",a.autioSvc.control.isPlaying()?"pause":"play"),P(2),Ut(a.autioSvc.control.currentName()),P(2),et("shape","step-forward")}}let Vtt=(()=>{class c{constructor(a,h){this.config=a,this.autioSvc=h}get audioData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.audioData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}toggleAudio(){this.autioSvc.control.isPlaying()?this.autioSvc.control.pause():this.autioSvc.control.resume()}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(c1))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-audio"]],inputs:{data:"data"},decls:1,vars:1,consts:[["role","alert",3,"ngClass",4,"ngIf"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon",3,"click"],[1,"alert-text"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close",3,"click"]],template:function(a,h){1&a&&X(0,Btt,11,7,"div",0),2&a&&R("ngIf",h.autioSvc.control.isStarted())},dependencies:[si,_n,ik,eo],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class SU extends Tu{constructor(){super()}static builder(){return new SU}}class TU extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d}static builder(){return new TU("",null,null,SU.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}}function ztt(c,l){1&c&&ue(0,"app-add-component",4),2&c&&R("component",q(2).$implicit.component)}function Utt(c,l){if(1&c&&(I(0,"clr-accordion-content"),X(1,ztt,1,1,"app-add-component",3),F()),2&c){const a=q().$implicit;P(1),R("ngIf",a.component)}}function Htt(c,l){if(1&c&&(I(0,"clr-accordion-panel")(1,"clr-accordion-title"),ie(2),F(),X(3,Utt,2,1,"clr-accordion-content",2),F()),2&c){const a=l.$implicit;P(2),Ut(a.title)}}let $tt=(()=>{class c{constructor(a){this.config=a}get accordionData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.accordionData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-accordion"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[4,"clrIfExpanded"],[3,"component",4,"ngIf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"clr-accordion",0),X(1,Htt,4,1,"clr-accordion-panel",1),F()),2&a&&(R("ngClass",h.getClasses()),P(1),R("ngForOf",h.accordionData.items))},dependencies:[si,fi,_n,k5,GL,Sx,Wm,Ox,Tx,Dx,jy,Yl],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class OU extends Tu{constructor(){super()}static builder(){return new OU}}class DU{constructor(l,a){this.title=l,this.component=a}static builder(){return new DU("",null)}setTitle(l){return this.title=l,this}setComponent(l){return this.component=l,this}}class kU extends mi{constructor(l,a,h,d,f){super(l,a,h),this.classes=d,this.items=f}static builder(){return new kU("",null,null,OU.builder(),[])}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}addItem(l){return this.items.push(l),this}}class MU{constructor(){}static builder(){return new MU}}class EU extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new EU("",null,null,MU.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setId(l){return this.id=l,this}setWaitingForSenderid(l){return this.waitingForSenderId=l,this}setComponents(l){return this.components=l,this}}let Sg=(()=>{class c{constructor(a,h){this.http=a,this.config=h,this.persons=[],this.restPoint="/math",this.canSave=null,this.personSaved=new wt,this.personsSubscribersMap=new Map}setCanSave(a){this.canSave=a}getRestPoint(a,h){return Ar.merge(Ar.merge(h||this.config.serviceAPIHost,this.restPoint),a)}getRestPointRaw(a,h){return Ar.merge(h||this.config.serviceAPIHost,a)}mathSolve(a){const h={params:{}};return new Promise((d,f)=>{this.http.post(this.getRestPoint("/solve",null),a,h).pipe(hr(Hi.handleError)).subscribe({next:p=>{d(cz.builder().setSuccess(!!p.success).setText(p.text))},error:p=>{f(null)}})})}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class AU extends Tu{constructor(){super(),this.fineText=!1,this.pageBreakBefore=!1,this.pageBreakAfter=!1,this.printOnly=!1,this.noPrint=!1,this.sClasses=[]}static builder(){return new AU}setFineText(l){return this.fineText=l,this.markChanged(),this}setPageBreakBefore(l){return this.pageBreakBefore=l,this.markChanged(),this}setPageBreakAfter(l){return this.pageBreakAfter=l,this.markChanged(),this}setPrintOnly(l){return this.printOnly=l,this.markChanged(),this}setNoPrint(l){return this.noPrint=l,this.markChanged(),this}addSClass(l){return this.sClasses.push(l),this.markChanged(),this}setSClasses(l){return this.sClasses=l,this.markChanged(),this}}class wS extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.id="",this.waitingForSenderId="",this.components=[],this.messageTarget="",this.messageUndoText=""}static builder(){return new wS("",null,null,AU.builder().setFineText(!0))}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setId(l){return this.id=l,this}setWaitingForSenderid(l){return this.waitingForSenderId=l,this}setComponents(l){return this.components=l,this}setMessageTarget(l){return this.messageTarget=l,this}setMessageUndoText(l){return this.messageUndoText=l,this}}class Ir{constructor(){}lineAt(l){if(l<0||l>this.length)throw new RangeError(`Invalid position ${l} in document of length ${this.length}`);return this.lineInner(l,!1,1,0)}line(l){if(l<1||l>this.lines)throw new RangeError(`Invalid line number ${l} in ${this.lines}-line document`);return this.lineInner(l,!0,1,0)}replace(l,a,h){let d=[];return this.decompose(0,l,d,2),h.length&&h.decompose(0,h.length,d,3),this.decompose(a,this.length,d,1),Od.from(d,this.length-(a-l)+h.length)}append(l){return this.replace(this.length,this.length,l)}slice(l,a=this.length){let h=[];return this.decompose(l,a,h,0),Od.from(h,a-l)}eq(l){if(l==this)return!0;if(l.length!=this.length||l.lines!=this.lines)return!1;let a=this.scanIdentical(l,1),h=this.length-this.scanIdentical(l,-1),d=new SS(this),f=new SS(l);for(let p=a,g=a;;){if(d.next(p),f.next(p),p=0,d.lineBreak!=f.lineBreak||d.done!=f.done||d.value!=f.value)return!1;if(g+=d.value.length,d.done||g>=h)return!0}}iter(l=1){return new SS(this,l)}iterRange(l,a=this.length){return new Qhe(this,l,a)}iterLines(l,a){let h;if(null==l)h=this.iter();else{null==a&&(a=this.lines+1);let d=this.line(l).from;h=this.iterRange(d,Math.max(d,a==this.lines+1?this.length:a<=1?0:this.line(a-1).to))}return new jhe(h)}toString(){return this.sliceString(0)}toJSON(){let l=[];return this.flatten(l),l}static of(l){if(0==l.length)throw new RangeError("A document must have at least one line");return 1!=l.length||l[0]?l.length<=32?new no(l):Od.from(no.split(l,[])):Ir.empty}}class no extends Ir{constructor(l,a=function Wtt(c){let l=-1;for(let a of c)l+=a.length+1;return l}(l)){super(),this.text=l,this.length=a}get lines(){return this.text.length}get children(){return null}lineInner(l,a,h,d){for(let f=0;;f++){let p=this.text[f],g=d+p.length;if((a?h:g)>=l)return new Gtt(d,g,h,p);d=g+1,h++}}decompose(l,a,h,d){let f=l<=0&&a>=this.length?this:new no(Ghe(this.text,l,a),Math.min(a,this.length)-Math.max(0,l));if(1&d){let p=h.pop(),g=sA(f.text,p.text.slice(),0,f.length);if(g.length<=32)h.push(new no(g,p.length+f.length));else{let m=g.length>>1;h.push(new no(g.slice(0,m)),new no(g.slice(m)))}}else h.push(f)}replace(l,a,h){if(!(h instanceof no))return super.replace(l,a,h);let d=sA(this.text,sA(h.text,Ghe(this.text,0,l)),a),f=this.length+h.length-(a-l);return d.length<=32?new no(d,f):Od.from(no.split(d,[]),f)}sliceString(l,a=this.length,h="\n"){let d="";for(let f=0,p=0;f<=a&&p<this.text.length;p++){let g=this.text[p],m=f+g.length;f>l&&p&&(d+=h),l<m&&a>f&&(d+=g.slice(Math.max(0,l-f),a-f)),f=m+1}return d}flatten(l){for(let a of this.text)l.push(a)}scanIdentical(){return 0}static split(l,a){let h=[],d=-1;for(let f of l)h.push(f),d+=f.length+1,32==h.length&&(a.push(new no(h,d)),h=[],d=-1);return d>-1&&a.push(new no(h,d)),a}}class Od extends Ir{constructor(l,a){super(),this.children=l,this.length=a,this.lines=0;for(let h of l)this.lines+=h.lines}lineInner(l,a,h,d){for(let f=0;;f++){let p=this.children[f],g=d+p.length,m=h+p.lines-1;if((a?m:g)>=l)return p.lineInner(l,a,h,d);d=g+1,h=m+1}}decompose(l,a,h,d){for(let f=0,p=0;p<=a&&f<this.children.length;f++){let g=this.children[f],m=p+g.length;if(l<=m&&a>=p){let v=d&((p<=l?1:0)|(m>=a?2:0));p>=l&&m<=a&&!v?h.push(g):g.decompose(l-p,a-p,h,v)}p=m+1}}replace(l,a,h){if(h.lines<this.lines)for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],g=f+p.length;if(l>=f&&a<=g){let m=p.replace(l-f,a-f,h),v=this.lines-p.lines+m.lines;if(m.lines<v>>4&&m.lines>v>>6){let y=this.children.slice();return y[d]=m,new Od(y,this.length-(a-l)+h.length)}return super.replace(f,g,m)}f=g+1}return super.replace(l,a,h)}sliceString(l,a=this.length,h="\n"){let d="";for(let f=0,p=0;f<this.children.length&&p<=a;f++){let g=this.children[f],m=p+g.length;p>l&&f&&(d+=h),l<m&&a>p&&(d+=g.sliceString(l-p,a-p,h)),p=m+1}return d}flatten(l){for(let a of this.children)a.flatten(l)}scanIdentical(l,a){if(!(l instanceof Od))return 0;let h=0,[d,f,p,g]=a>0?[0,0,this.children.length,l.children.length]:[this.children.length-1,l.children.length-1,-1,-1];for(;;d+=a,f+=a){if(d==p||f==g)return h;let m=this.children[d],v=l.children[f];if(m!=v)return h+m.scanIdentical(v,a);h+=m.length+1}}static from(l,a=l.reduce((h,d)=>h+d.length+1,-1)){let h=0;for(let C of l)h+=C.lines;if(h<32){let C=[];for(let x of l)x.flatten(C);return new no(C,a)}let d=Math.max(32,h>>5),f=d<<1,p=d>>1,g=[],m=0,v=-1,y=[];function _(C){let x;if(C.lines>f&&C instanceof Od)for(let S of C.children)_(S);else C.lines>p&&(m>p||!m)?(b(),g.push(C)):C instanceof no&&m&&(x=y[y.length-1])instanceof no&&C.lines+x.lines<=32?(m+=C.lines,v+=C.length+1,y[y.length-1]=new no(x.text.concat(C.text),x.length+1+C.length)):(m+C.lines>d&&b(),m+=C.lines,v+=C.length+1,y.push(C))}function b(){0!=m&&(g.push(1==y.length?y[0]:Od.from(y,v)),v=-1,m=y.length=0)}for(let C of l)_(C);return b(),1==g.length?g[0]:new Od(g,a)}}function sA(c,l,a=0,h=1e9){for(let d=0,f=0,p=!0;f<c.length&&d<=h;f++){let g=c[f],m=d+g.length;m>=a&&(m>h&&(g=g.slice(0,h-d)),d<a&&(g=g.slice(a-d)),p?(l[l.length-1]+=g,p=!1):l.push(g)),d=m+1}return l}function Ghe(c,l,a){return sA(c,[""],l,a)}Ir.empty=new no([""],0);class SS{constructor(l,a=1){this.dir=a,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[l],this.offsets=[a>0?1:(l instanceof no?l.text.length:l.children.length)<<1]}nextInner(l,a){for(this.done=this.lineBreak=!1;;){let h=this.nodes.length-1,d=this.nodes[h],f=this.offsets[h],p=f>>1,g=d instanceof no?d.text.length:d.children.length;if(p==(a>0?g:0)){if(0==h)return this.done=!0,this.value="",this;a>0&&this.offsets[h-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&f)==(a>0?0:1)){if(this.offsets[h]+=a,0==l)return this.lineBreak=!0,this.value="\n",this;l--}else if(d instanceof no){let m=d.text[p+(a<0?-1:0)];if(this.offsets[h]+=a,m.length>Math.max(0,l))return this.value=0==l?m:a>0?m.slice(l):m.slice(0,m.length-l),this;l-=m.length}else{let m=d.children[p+(a<0?-1:0)];l>m.length?(l-=m.length,this.offsets[h]+=a):(a<0&&this.offsets[h]--,this.nodes.push(m),this.offsets.push(a>0?1:(m instanceof no?m.text.length:m.children.length)<<1))}}}next(l=0){return l<0&&(this.nextInner(-l,-this.dir),l=this.value.length),this.nextInner(l,this.dir)}}class Qhe{constructor(l,a,h){this.value="",this.done=!1,this.cursor=new SS(l,a>h?-1:1),this.pos=a>h?l.length:0,this.from=Math.min(a,h),this.to=Math.max(a,h)}nextInner(l,a){if(a<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;l+=Math.max(0,a<0?this.pos-this.to:this.from-this.pos);let h=a<0?this.pos-this.from:this.to-this.pos;l>h&&(l=h),h-=l;let{value:d}=this.cursor.next(l);return this.pos+=(d.length+l)*a,this.value=d.length<=h?d:a<0?d.slice(d.length-h):d.slice(0,h),this.done=!this.value,this}next(l=0){return l<0?l=Math.max(l,this.from-this.pos):l>0&&(l=Math.min(l,this.to-this.pos)),this.nextInner(l,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class jhe{constructor(l){this.inner=l,this.afterBreak=!0,this.value="",this.done=!1}next(l=0){let{done:a,lineBreak:h,value:d}=this.inner.next(l);return a?(this.done=!0,this.value=""):h?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=d,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Ir.prototype[Symbol.iterator]=function(){return this.iter()},SS.prototype[Symbol.iterator]=Qhe.prototype[Symbol.iterator]=jhe.prototype[Symbol.iterator]=function(){return this});class Gtt{constructor(l,a,h,d){this.from=l,this.to=a,this.number=h,this.text=d}get length(){return this.to-this.from}}let d1="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(c=>c?parseInt(c,36):1);for(let c=1;c<d1.length;c++)d1[c]+=d1[c-1];function Qtt(c){for(let l=1;l<d1.length;l+=2)if(d1[l]>c)return d1[l-1]<=c;return!1}function qhe(c){return c>=127462&&c<=127487}function wl(c,l,a=!0,h=!0){return(a?Xhe:jtt)(c,l,h)}function Xhe(c,l,a){if(l==c.length)return l;l&&Yhe(c.charCodeAt(l))&&Khe(c.charCodeAt(l-1))&&l--;let h=ma(c,l);for(l+=Lc(h);l<c.length;){let d=ma(c,l);if(8205==h||8205==d||a&&Qtt(d))l+=Lc(d),h=d;else{if(!qhe(d))break;{let f=0,p=l-2;for(;p>=0&&qhe(ma(c,p));)f++,p-=2;if(f%2==0)break;l+=2}}}return l}function jtt(c,l,a){for(;l>0;){let h=Xhe(c,l-2,a);if(h<l)return h;l--}return 0}function Yhe(c){return c>=56320&&c<57344}function Khe(c){return c>=55296&&c<56320}function ma(c,l){let a=c.charCodeAt(l);if(!Khe(a)||l+1==c.length)return a;let h=c.charCodeAt(l+1);return Yhe(h)?h-56320+(a-55296<<10)+65536:a}function IU(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode(55296+(c>>10),56320+(1023&c)))}function Lc(c){return c<65536?1:2}const PU=/\r\n?|\n/;var va=function(c){return c[c.Simple=0]="Simple",c[c.TrackDel=1]="TrackDel",c[c.TrackBefore=2]="TrackBefore",c[c.TrackAfter=3]="TrackAfter",c}(va||(va={}));class Dd{constructor(l){this.sections=l}get length(){let l=0;for(let a=0;a<this.sections.length;a+=2)l+=this.sections[a];return l}get newLength(){let l=0;for(let a=0;a<this.sections.length;a+=2){let h=this.sections[a+1];l+=h<0?this.sections[a]:h}return l}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(l){for(let a=0,h=0,d=0;a<this.sections.length;){let f=this.sections[a++],p=this.sections[a++];p<0?(l(h,d,f),d+=f):d+=p,h+=f}}iterChangedRanges(l,a=!1){RU(this,l,a)}get invertedDesc(){let l=[];for(let a=0;a<this.sections.length;){let h=this.sections[a++],d=this.sections[a++];d<0?l.push(h,d):l.push(d,h)}return new Dd(l)}composeDesc(l){return this.empty?l:l.empty?this:Jhe(this,l)}mapDesc(l,a=!1){return l.empty?this:FU(this,l,a)}mapPos(l,a=-1,h=va.Simple){let d=0,f=0;for(let p=0;p<this.sections.length;){let g=this.sections[p++],m=this.sections[p++],v=d+g;if(m<0){if(v>l)return f+(l-d);f+=g}else{if(h!=va.Simple&&v>=l&&(h==va.TrackDel&&d<l&&v>l||h==va.TrackBefore&&d<l||h==va.TrackAfter&&v>l))return null;if(v>l||v==l&&a<0&&!g)return l==d||a<0?f:f+m;f+=m}d=v}if(l>d)throw new RangeError(`Position ${l} is out of range for changeset of length ${d}`);return f}touchesRange(l,a=l){for(let h=0,d=0;h<this.sections.length&&d<=a;){let g=d+this.sections[h++];if(this.sections[h++]>=0&&d<=a&&g>=l)return!(d<l&&g>a)||"cover";d=g}return!1}toString(){let l="";for(let a=0;a<this.sections.length;){let h=this.sections[a++],d=this.sections[a++];l+=(l?" ":"")+h+(d>=0?":"+d:"")}return l}toJSON(){return this.sections}static fromJSON(l){if(!Array.isArray(l)||l.length%2||l.some(a=>"number"!=typeof a))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Dd(l)}static create(l){return new Dd(l)}}class Vo extends Dd{constructor(l,a){super(l),this.inserted=a}apply(l){if(this.length!=l.length)throw new RangeError("Applying change set to a document with the wrong length");return RU(this,(a,h,d,f,p)=>l=l.replace(d,d+(h-a),p),!1),l}mapDesc(l,a=!1){return FU(this,l,a,!0)}invert(l){let a=this.sections.slice(),h=[];for(let d=0,f=0;d<a.length;d+=2){let p=a[d],g=a[d+1];if(g>=0){a[d]=g,a[d+1]=p;let m=d>>1;for(;h.length<m;)h.push(Ir.empty);h.push(p?l.slice(f,f+p):Ir.empty)}f+=p}return new Vo(a,h)}compose(l){return this.empty?l:l.empty?this:Jhe(this,l,!0)}map(l,a=!1){return l.empty?this:FU(this,l,a,!0)}iterChanges(l,a=!1){RU(this,l,a)}get desc(){return Dd.create(this.sections)}filter(l){let a=[],h=[],d=[],f=new TS(this);e:for(let p=0,g=0;;){let m=p==l.length?1e9:l[p++];for(;g<m||g==m&&0==f.len;){if(f.done)break e;let y=Math.min(f.len,m-g);Ha(d,y,-1);let _=-1==f.ins?-1:0==f.off?f.ins:0;Ha(a,y,_),_>0&&Tg(h,a,f.text),f.forward(y),g+=y}let v=l[p++];for(;g<v;){if(f.done)break e;let y=Math.min(f.len,v-g);Ha(a,y,-1),Ha(d,y,-1==f.ins?-1:0==f.off?f.ins:0),f.forward(y),g+=y}}return{changes:new Vo(a,h),filtered:Dd.create(d)}}toJSON(){let l=[];for(let a=0;a<this.sections.length;a+=2){let h=this.sections[a],d=this.sections[a+1];l.push(d<0?h:0==d?[h]:[h].concat(this.inserted[a>>1].toJSON()))}return l}static of(l,a,h){let d=[],f=[],p=0,g=null;function m(y=!1){if(!y&&!d.length)return;p<a&&Ha(d,a-p,-1);let _=new Vo(d,f);g=g?g.compose(_.map(g)):_,d=[],f=[],p=0}return function v(y){if(Array.isArray(y))for(let _ of y)v(_);else if(y instanceof Vo){if(y.length!=a)throw new RangeError(`Mismatched change set length (got ${y.length}, expected ${a})`);m(),g=g?g.compose(y.map(g)):y}else{let{from:_,to:b=_,insert:C}=y;if(_>b||_<0||b>a)throw new RangeError(`Invalid change range ${_} to ${b} (in doc of length ${a})`);let x=C?"string"==typeof C?Ir.of(C.split(h||PU)):C:Ir.empty,S=x.length;if(_==b&&0==S)return;_<p&&m(),_>p&&Ha(d,_-p,-1),Ha(d,b-_,S),Tg(f,d,x),p=b}}(l),m(!g),g}static empty(l){return new Vo(l?[l,-1]:[],[])}static fromJSON(l){if(!Array.isArray(l))throw new RangeError("Invalid JSON representation of ChangeSet");let a=[],h=[];for(let d=0;d<l.length;d++){let f=l[d];if("number"==typeof f)a.push(f,-1);else{if(!Array.isArray(f)||"number"!=typeof f[0]||f.some((p,g)=>g&&"string"!=typeof p))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==f.length)a.push(f[0],0);else{for(;h.length<d;)h.push(Ir.empty);h[d]=Ir.of(f.slice(1)),a.push(f[0],h[d].length)}}}return new Vo(a,h)}static createSet(l,a){return new Vo(l,a)}}function Ha(c,l,a,h=!1){if(0==l&&a<=0)return;let d=c.length-2;d>=0&&a<=0&&a==c[d+1]?c[d]+=l:0==l&&0==c[d]?c[d+1]+=a:h?(c[d]+=l,c[d+1]+=a):c.push(l,a)}function Tg(c,l,a){if(0==a.length)return;let h=l.length-2>>1;if(h<c.length)c[c.length-1]=c[c.length-1].append(a);else{for(;c.length<h;)c.push(Ir.empty);c.push(a)}}function RU(c,l,a){let h=c.inserted;for(let d=0,f=0,p=0;p<c.sections.length;){let g=c.sections[p++],m=c.sections[p++];if(m<0)d+=g,f+=g;else{let v=d,y=f,_=Ir.empty;for(;v+=g,y+=m,m&&h&&(_=_.append(h[p-2>>1])),!(a||p==c.sections.length||c.sections[p+1]<0);)g=c.sections[p++],m=c.sections[p++];l(d,v,f,y,_),d=v,f=y}}}function FU(c,l,a,h=!1){let d=[],f=h?[]:null,p=new TS(c),g=new TS(l);for(let m=-1;;)if(-1==p.ins&&-1==g.ins){let v=Math.min(p.len,g.len);Ha(d,v,-1),p.forward(v),g.forward(v)}else if(g.ins>=0&&(p.ins<0||m==p.i||0==p.off&&(g.len<p.len||g.len==p.len&&!a))){let v=g.len;for(Ha(d,g.ins,-1);v;){let y=Math.min(p.len,v);p.ins>=0&&m<p.i&&p.len<=y&&(Ha(d,0,p.ins),f&&Tg(f,d,p.text),m=p.i),p.forward(y),v-=y}g.next()}else{if(!(p.ins>=0)){if(p.done&&g.done)return f?Vo.createSet(d,f):Dd.create(d);throw new Error("Mismatched change set lengths")}{let v=0,y=p.len;for(;y;)if(-1==g.ins){let _=Math.min(y,g.len);v+=_,y-=_,g.forward(_)}else{if(!(0==g.ins&&g.len<y))break;y-=g.len,g.next()}Ha(d,v,m<p.i?p.ins:0),f&&m<p.i&&Tg(f,d,p.text),m=p.i,p.forward(p.len-y)}}}function Jhe(c,l,a=!1){let h=[],d=a?[]:null,f=new TS(c),p=new TS(l);for(let g=!1;;){if(f.done&&p.done)return d?Vo.createSet(h,d):Dd.create(h);if(0==f.ins)Ha(h,f.len,0,g),f.next();else if(0!=p.len||p.done){if(f.done||p.done)throw new Error("Mismatched change set lengths");{let m=Math.min(f.len2,p.len),v=h.length;if(-1==f.ins){let y=-1==p.ins?-1:p.off?0:p.ins;Ha(h,m,y,g),d&&y&&Tg(d,h,p.text)}else-1==p.ins?(Ha(h,f.off?0:f.len,m,g),d&&Tg(d,h,f.textBit(m))):(Ha(h,f.off?0:f.len,p.off?0:p.ins,g),d&&!p.off&&Tg(d,h,p.text));g=(f.ins>m||p.ins>=0&&p.len>m)&&(g||h.length>v),f.forward2(m),p.forward(m)}}else Ha(h,0,p.ins,g),d&&Tg(d,h,p.text),p.next()}}class TS{constructor(l){this.set=l,this.i=0,this.next()}next(){let{sections:l}=this.set;this.i<l.length?(this.len=l[this.i++],this.ins=l[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:l}=this.set,a=this.i-2>>1;return a>=l.length?Ir.empty:l[a]}textBit(l){let{inserted:a}=this.set,h=this.i-2>>1;return h>=a.length&&!l?Ir.empty:a[h].slice(this.off,null==l?void 0:this.off+l)}forward(l){l==this.len?this.next():(this.len-=l,this.off+=l)}forward2(l){-1==this.ins?this.forward(l):l==this.ins?this.next():(this.ins-=l,this.off+=l)}}class z0{constructor(l,a,h){this.from=l,this.to=a,this.flags=h}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let l=3&this.flags;return 3==l?null:l}get goalColumn(){let l=this.flags>>5;return 33554431==l?void 0:l}map(l,a=-1){let h,d;return this.empty?h=d=l.mapPos(this.from,a):(h=l.mapPos(this.from,1),d=l.mapPos(this.to,-1)),h==this.from&&d==this.to?this:new z0(h,d,this.flags)}extend(l,a=l){if(l<=this.anchor&&a>=this.anchor)return At.range(l,a);let h=Math.abs(l-this.anchor)>Math.abs(a-this.anchor)?l:a;return At.range(this.anchor,h)}eq(l){return this.anchor==l.anchor&&this.head==l.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(l){if(!l||"number"!=typeof l.anchor||"number"!=typeof l.head)throw new RangeError("Invalid JSON representation for SelectionRange");return At.range(l.anchor,l.head)}static create(l,a,h){return new z0(l,a,h)}}class At{constructor(l,a){this.ranges=l,this.mainIndex=a}map(l,a=-1){return l.empty?this:At.create(this.ranges.map(h=>h.map(l,a)),this.mainIndex)}eq(l){if(this.ranges.length!=l.ranges.length||this.mainIndex!=l.mainIndex)return!1;for(let a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(l.ranges[a]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new At([this.main],0)}addRange(l,a=!0){return At.create([l].concat(this.ranges),a?0:this.mainIndex+1)}replaceRange(l,a=this.mainIndex){let h=this.ranges.slice();return h[a]=l,At.create(h,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(l=>l.toJSON()),main:this.mainIndex}}static fromJSON(l){if(!l||!Array.isArray(l.ranges)||"number"!=typeof l.main||l.main>=l.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new At(l.ranges.map(a=>z0.fromJSON(a)),l.main)}static single(l,a=l){return new At([At.range(l,a)],0)}static create(l,a=0){if(0==l.length)throw new RangeError("A selection needs at least one range");for(let h=0,d=0;d<l.length;d++){let f=l[d];if(f.empty?f.from<=h:f.from<h)return At.normalized(l.slice(),a);h=f.to}return new At(l,a)}static cursor(l,a=0,h,d){return z0.create(l,l,(0==a?0:a<0?4:8)|(null==h?3:Math.min(2,h))|(null!=d?d:33554431)<<5)}static range(l,a,h){let d=(null!=h?h:33554431)<<5;return a<l?z0.create(a,l,24|d):z0.create(l,a,d|(a>l?4:0))}static normalized(l,a=0){let h=l[a];l.sort((d,f)=>d.from-f.from),a=l.indexOf(h);for(let d=1;d<l.length;d++){let f=l[d],p=l[d-1];if(f.empty?f.from<=p.to:f.from<p.to){let g=p.from,m=Math.max(f.to,p.to);d<=a&&a--,l.splice(--d,2,f.anchor>f.head?At.range(m,g):At.range(g,m))}}return new At(l,a)}}function ede(c,l){for(let a of c.ranges)if(a.to>l)throw new RangeError("Selection points outside of document")}let NU=0;class zn{constructor(l,a,h,d,f){this.combine=l,this.compareInput=a,this.compare=h,this.isStatic=d,this.id=NU++,this.default=l([]),this.extensions="function"==typeof f?f(this):f}static define(l={}){return new zn(l.combine||(a=>a),l.compareInput||((a,h)=>a===h),l.compare||(l.combine?(a,h)=>a===h:LU),!!l.static,l.enables)}of(l){return new oA([],this,0,l)}compute(l,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new oA(l,this,1,a)}computeN(l,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new oA(l,this,2,a)}from(l,a){return a||(a=h=>h),this.compute([l],h=>a(h.field(l)))}}function LU(c,l){return c==l||c.length==l.length&&c.every((a,h)=>a===l[h])}class oA{constructor(l,a,h,d){this.dependencies=l,this.facet=a,this.type=h,this.value=d,this.id=NU++}dynamicSlot(l){var a;let h=this.value,d=this.facet.compareInput,f=this.id,p=l[f]>>1,g=2==this.type,m=!1,v=!1,y=[];for(let _ of this.dependencies)"doc"==_?m=!0:"selection"==_?v=!0:0==(1&(null!==(a=l[_.id])&&void 0!==a?a:1))&&y.push(l[_.id]);return{create:_=>(_.values[p]=h(_),1),update(_,b){if(m&&b.docChanged||v&&(b.docChanged||b.selection)||BU(_,y)){let C=h(_);if(g?!tde(C,_.values[p],d):!d(C,_.values[p]))return _.values[p]=C,1}return 0},reconfigure:(_,b)=>{let C=h(_),x=b.config.address[f];if(null!=x){let S=lA(b,x);if(this.dependencies.every(w=>w instanceof zn?b.facet(w)===_.facet(w):!(w instanceof yo)||b.field(w,!1)==_.field(w,!1))||(g?tde(C,S,d):d(C,S)))return _.values[p]=S,0}return _.values[p]=C,1}}}}function tde(c,l,a){if(c.length!=l.length)return!1;for(let h=0;h<c.length;h++)if(!a(c[h],l[h]))return!1;return!0}function BU(c,l){let a=!1;for(let h of l)1&DS(c,h)&&(a=!0);return a}function qtt(c,l,a){let h=a.map(m=>c[m.id]),d=a.map(m=>m.type),f=h.filter(m=>!(1&m)),p=c[l.id]>>1;function g(m){let v=[];for(let y=0;y<h.length;y++){let _=lA(m,h[y]);if(2==d[y])for(let b of _)v.push(b);else v.push(_)}return l.combine(v)}return{create(m){for(let v of h)DS(m,v);return m.values[p]=g(m),1},update(m,v){if(!BU(m,f))return 0;let y=g(m);return l.compare(y,m.values[p])?0:(m.values[p]=y,1)},reconfigure(m,v){let y=BU(m,h),_=v.config.facets[l.id],b=v.facet(l);if(_&&!y&&LU(a,_))return m.values[p]=b,0;let C=g(m);return l.compare(C,b)?(m.values[p]=b,0):(m.values[p]=C,1)}}}const nde=zn.define({static:!0});class yo{constructor(l,a,h,d,f){this.id=l,this.createF=a,this.updateF=h,this.compareF=d,this.spec=f,this.provides=void 0}static define(l){let a=new yo(NU++,l.create,l.update,l.compare||((h,d)=>h===d),l);return l.provide&&(a.provides=l.provide(a)),a}create(l){let a=l.facet(nde).find(h=>h.field==this);return((null==a?void 0:a.create)||this.createF)(l)}slot(l){let a=l[this.id]>>1;return{create:h=>(h.values[a]=this.create(h),1),update:(h,d)=>{let f=h.values[a],p=this.updateF(f,d);return this.compareF(f,p)?0:(h.values[a]=p,1)},reconfigure:(h,d)=>null!=d.config.address[this.id]?(h.values[a]=d.field(this),0):(h.values[a]=this.create(h),1)}}init(l){return[this,nde.of({field:this,create:l})]}get extension(){return this}}function OS(c){return l=>new ide(l,c)}const H0={highest:OS(0),high:OS(1),default:OS(2),low:OS(3),lowest:OS(4)};class ide{constructor(l,a){this.inner=l,this.prec=a}}class $0{of(l){return new VU(this,l)}reconfigure(l){return $0.reconfigure.of({compartment:this,extension:l})}get(l){return l.config.compartments.get(this)}}class VU{constructor(l,a){this.compartment=l,this.inner=a}}class aA{constructor(l,a,h,d,f,p){for(this.base=l,this.compartments=a,this.dynamicSlots=h,this.address=d,this.staticValues=f,this.facets=p,this.statusTemplate=[];this.statusTemplate.length<h.length;)this.statusTemplate.push(0)}staticFacet(l){let a=this.address[l.id];return null==a?l.default:this.staticValues[a>>1]}static resolve(l,a,h){let d=[],f=Object.create(null),p=new Map;for(let b of function Ztt(c,l,a){let h=[[],[],[],[],[]],d=new Map;return function f(p,g){let m=d.get(p);if(null!=m){if(m<=g)return;let v=h[m].indexOf(p);v>-1&&h[m].splice(v,1),p instanceof VU&&a.delete(p.compartment)}if(d.set(p,g),Array.isArray(p))for(let v of p)f(v,g);else if(p instanceof VU){if(a.has(p.compartment))throw new RangeError("Duplicate use of compartment in extensions");let v=l.get(p.compartment)||p.inner;a.set(p.compartment,v),f(v,g)}else if(p instanceof ide)f(p.inner,p.prec);else if(p instanceof yo)h[g].push(p),p.provides&&f(p.provides,g);else if(p instanceof oA)h[g].push(p),p.facet.extensions&&f(p.facet.extensions,2);else{let v=p.extension;if(!v)throw new Error(`Unrecognized extension value in extension set (${p}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);f(v,g)}}(c,2),h.reduce((p,g)=>p.concat(g))}(l,a,p))b instanceof yo?d.push(b):(f[b.facet.id]||(f[b.facet.id]=[])).push(b);let g=Object.create(null),m=[],v=[];for(let b of d)g[b.id]=v.length<<1,v.push(C=>b.slot(C));let y=null==h?void 0:h.config.facets;for(let b in f){let C=f[b],x=C[0].facet,S=y&&y[b]||[];if(C.every(w=>0==w.type))if(g[x.id]=m.length<<1|1,LU(S,C))m.push(h.facet(x));else{let w=x.combine(C.map(T=>T.value));m.push(h&&x.compare(w,h.facet(x))?h.facet(x):w)}else{for(let w of C)0==w.type?(g[w.id]=m.length<<1|1,m.push(w.value)):(g[w.id]=v.length<<1,v.push(T=>w.dynamicSlot(T)));g[x.id]=v.length<<1,v.push(w=>qtt(w,x,C))}}let _=v.map(b=>b(g));return new aA(l,p,_,g,m,f)}}function DS(c,l){if(1&l)return 2;let a=l>>1,h=c.status[a];if(4==h)throw new Error("Cyclic dependency between fields and/or facets");if(2&h)return h;c.status[a]=4;let d=c.computeSlot(c,c.config.dynamicSlots[a]);return c.status[a]=2|d}function lA(c,l){return 1&l?c.config.staticValues[l>>1]:c.values[l>>1]}const rde=zn.define(),sde=zn.define({combine:c=>c.some(l=>l),static:!0}),ode=zn.define({combine:c=>c.length?c[0]:void 0,static:!0}),ade=zn.define(),lde=zn.define(),cde=zn.define(),ude=zn.define({combine:c=>!!c.length&&c[0]});class W0{constructor(l,a){this.type=l,this.value=a}static define(){return new Xtt}}class Xtt{of(l){return new W0(this,l)}}class Ytt{constructor(l){this.map=l}of(l){return new Yi(this,l)}}let Yi=(()=>{class c{constructor(a,h){this.type=a,this.value=h}map(a){let h=this.type.map(this.value,a);return void 0===h?void 0:h==this.value?this:new c(this.type,h)}is(a){return this.type==a}static define(a={}){return new Ytt(a.map||(h=>h))}static mapEffects(a,h){if(!a.length)return a;let d=[];for(let f of a){let p=f.map(h);p&&d.push(p)}return d}}return c.reconfigure=c.define(),c.appendConfig=c.define(),c})(),kd=(()=>{class c{constructor(a,h,d,f,p,g){this.startState=a,this.changes=h,this.selection=d,this.effects=f,this.annotations=p,this.scrollIntoView=g,this._doc=null,this._state=null,d&&ede(d,h.newLength),p.some(m=>m.type==c.time)||(this.annotations=p.concat(c.time.of(Date.now())))}static create(a,h,d,f,p,g){return new c(a,h,d,f,p,g)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(a){for(let h of this.annotations)if(h.type==a)return h.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(a){let h=this.annotation(c.userEvent);return!(!h||!(h==a||h.length>a.length&&h.slice(0,a.length)==a&&"."==h[a.length]))}}return c.time=W0.define(),c.userEvent=W0.define(),c.addToHistory=W0.define(),c.remote=W0.define(),c})();function Ktt(c,l){let a=[];for(let h=0,d=0;;){let f,p;if(h<c.length&&(d==l.length||l[d]>=c[h]))f=c[h++],p=c[h++];else{if(!(d<l.length))return a;f=l[d++],p=l[d++]}!a.length||a[a.length-1]<f?a.push(f,p):a[a.length-1]<p&&(a[a.length-1]=p)}}function hde(c,l,a){var h;let d,f,p;return a?(d=l.changes,f=Vo.empty(l.changes.length),p=c.changes.compose(l.changes)):(d=l.changes.map(c.changes),f=c.changes.mapDesc(l.changes,!0),p=c.changes.compose(d)),{changes:p,selection:l.selection?l.selection.map(f):null===(h=c.selection)||void 0===h?void 0:h.map(d),effects:Yi.mapEffects(c.effects,d).concat(Yi.mapEffects(l.effects,f)),annotations:c.annotations.length?c.annotations.concat(l.annotations):l.annotations,scrollIntoView:c.scrollIntoView||l.scrollIntoView}}function zU(c,l,a){let h=l.selection,d=f1(l.annotations);return l.userEvent&&(d=d.concat(kd.userEvent.of(l.userEvent))),{changes:l.changes instanceof Vo?l.changes:Vo.of(l.changes||[],a,c.facet(ode)),selection:h&&(h instanceof At?h:At.single(h.anchor,h.head)),effects:f1(l.effects),annotations:d,scrollIntoView:!!l.scrollIntoView}}function dde(c,l,a){let h=zU(c,l.length?l[0]:{},c.doc.length);l.length&&!1===l[0].filter&&(a=!1);for(let f=1;f<l.length;f++){!1===l[f].filter&&(a=!1);let p=!!l[f].sequential;h=hde(h,zU(c,l[f],p?h.changes.newLength:c.doc.length),p)}let d=kd.create(c,h.changes,h.selection,h.effects,h.annotations,h.scrollIntoView);return function ent(c){let l=c.startState,a=l.facet(cde),h=c;for(let d=a.length-1;d>=0;d--){let f=a[d](c);f&&Object.keys(f).length&&(h=hde(h,zU(l,f,c.changes.newLength),!0))}return h==c?c:kd.create(l,c.changes,c.selection,h.effects,h.annotations,h.scrollIntoView)}(a?function Jtt(c){let l=c.startState,a=!0;for(let d of l.facet(ade)){let f=d(c);if(!1===f){a=!1;break}Array.isArray(f)&&(a=!0===a?f:Ktt(a,f))}if(!0!==a){let d,f;if(!1===a)f=c.changes.invertedDesc,d=Vo.empty(l.doc.length);else{let p=c.changes.filter(a);d=p.changes,f=p.filtered.mapDesc(p.changes).invertedDesc}c=kd.create(l,d,c.selection&&c.selection.map(f),Yi.mapEffects(c.effects,f),c.annotations,c.scrollIntoView)}let h=l.facet(lde);for(let d=h.length-1;d>=0;d--){let f=h[d](c);c=f instanceof kd?f:Array.isArray(f)&&1==f.length&&f[0]instanceof kd?f[0]:dde(l,f1(f),!1)}return c}(d):d)}const tnt=[];function f1(c){return null==c?tnt:Array.isArray(c)?c:[c]}var Ss=function(c){return c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other",c}(Ss||(Ss={}));const nnt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let UU;try{UU=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(c){}let Sl=(()=>{class c{constructor(a,h,d,f,p,g){this.config=a,this.doc=h,this.selection=d,this.values=f,this.status=a.statusTemplate.slice(),this.computeSlot=p,g&&(g._state=this);for(let m=0;m<this.config.dynamicSlots.length;m++)DS(this,m<<1);this.computeSlot=null}field(a,h=!0){let d=this.config.address[a.id];if(null!=d)return DS(this,d),lA(this,d);if(h)throw new RangeError("Field is not present in this state")}update(...a){return dde(this,a,!0)}applyTransaction(a){let p,h=this.config,{base:d,compartments:f}=h;for(let g of a.effects)g.is($0.reconfigure)?(h&&(f=new Map,h.compartments.forEach((m,v)=>f.set(v,m)),h=null),f.set(g.value.compartment,g.value.extension)):g.is(Yi.reconfigure)?(h=null,d=g.value):g.is(Yi.appendConfig)&&(h=null,d=f1(d).concat(g.value));h?p=a.startState.values.slice():(h=aA.resolve(d,f,this),p=new c(h,this.doc,this.selection,h.dynamicSlots.map(()=>null),(m,v)=>v.reconfigure(m,this),null).values),new c(h,a.newDoc,a.newSelection,p,(g,m)=>m.update(g,a),a)}replaceSelection(a){return"string"==typeof a&&(a=this.toText(a)),this.changeByRange(h=>({changes:{from:h.from,to:h.to,insert:a},range:At.cursor(h.from+a.length)}))}changeByRange(a){let h=this.selection,d=a(h.ranges[0]),f=this.changes(d.changes),p=[d.range],g=f1(d.effects);for(let m=1;m<h.ranges.length;m++){let v=a(h.ranges[m]),y=this.changes(v.changes),_=y.map(f);for(let C=0;C<m;C++)p[C]=p[C].map(_);let b=f.mapDesc(y,!0);p.push(v.range.map(b)),f=f.compose(_),g=Yi.mapEffects(g,_).concat(Yi.mapEffects(f1(v.effects),b))}return{changes:f,selection:At.create(p,h.mainIndex),effects:g}}changes(a=[]){return a instanceof Vo?a:Vo.of(a,this.doc.length,this.facet(c.lineSeparator))}toText(a){return Ir.of(a.split(this.facet(c.lineSeparator)||PU))}sliceDoc(a=0,h=this.doc.length){return this.doc.sliceString(a,h,this.lineBreak)}facet(a){let h=this.config.address[a.id];return null==h?a.default:(DS(this,h),lA(this,h))}toJSON(a){let h={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(a)for(let d in a){let f=a[d];f instanceof yo&&null!=this.config.address[f.id]&&(h[d]=f.spec.toJSON(this.field(a[d]),this))}return h}static fromJSON(a,h={},d){if(!a||"string"!=typeof a.doc)throw new RangeError("Invalid JSON representation for EditorState");let f=[];if(d)for(let p in d)if(Object.prototype.hasOwnProperty.call(a,p)){let g=d[p],m=a[p];f.push(g.init(v=>g.spec.fromJSON(m,v)))}return c.create({doc:a.doc,selection:At.fromJSON(a.selection),extensions:h.extensions?f.concat([h.extensions]):f})}static create(a={}){let h=aA.resolve(a.extensions||[],new Map),d=a.doc instanceof Ir?a.doc:Ir.of((a.doc||"").split(h.staticFacet(c.lineSeparator)||PU)),f=a.selection?a.selection instanceof At?a.selection:At.single(a.selection.anchor,a.selection.head):At.single(0);return ede(f,d.length),h.staticFacet(sde)||(f=f.asSingle()),new c(h,d,f,h.dynamicSlots.map(()=>null),(p,g)=>g.create(p),null)}get tabSize(){return this.facet(c.tabSize)}get lineBreak(){return this.facet(c.lineSeparator)||"\n"}get readOnly(){return this.facet(ude)}phrase(a,...h){for(let d of this.facet(c.phrases))if(Object.prototype.hasOwnProperty.call(d,a)){a=d[a];break}return h.length&&(a=a.replace(/\$(\$|\d*)/g,(d,f)=>{if("$"==f)return"$";let p=+(f||1);return!p||p>h.length?d:h[p-1]})),a}languageDataAt(a,h,d=-1){let f=[];for(let p of this.facet(rde))for(let g of p(this,h,d))Object.prototype.hasOwnProperty.call(g,a)&&f.push(g[a]);return f}charCategorizer(a){return function rnt(c){return l=>{if(!/\S/.test(l))return Ss.Space;if(function int(c){if(UU)return UU.test(c);for(let l=0;l<c.length;l++){let a=c[l];if(/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||nnt.test(a)))return!0}return!1}(l))return Ss.Word;for(let a=0;a<c.length;a++)if(l.indexOf(c[a])>-1)return Ss.Word;return Ss.Other}}(this.languageDataAt("wordChars",a).join(""))}wordAt(a){let{text:h,from:d,length:f}=this.doc.lineAt(a),p=this.charCategorizer(a),g=a-d,m=a-d;for(;g>0;){let v=wl(h,g,!1);if(p(h.slice(v,g))!=Ss.Word)break;g=v}for(;m<f;){let v=wl(h,m);if(p(h.slice(m,v))!=Ss.Word)break;m=v}return g==m?null:At.range(g+d,m+d)}}return c.allowMultipleSelections=sde,c.tabSize=zn.define({combine:l=>l.length?l[0]:4}),c.lineSeparator=ode,c.readOnly=ude,c.phrases=zn.define({compare(l,a){let h=Object.keys(l),d=Object.keys(a);return h.length==d.length&&h.every(f=>l[f]==a[f])}}),c.languageData=rde,c.changeFilter=ade,c.transactionFilter=lde,c.transactionExtender=cde,c})();function xh(c,l,a={}){let h={};for(let d of c)for(let f of Object.keys(d)){let p=d[f],g=h[f];if(void 0===g)h[f]=p;else if(g!==p&&void 0!==p){if(!Object.hasOwnProperty.call(a,f))throw new Error("Config merge conflict for field "+f);h[f]=a[f](g,p)}}for(let d in l)void 0===h[d]&&(h[d]=l[d]);return h}$0.reconfigure=Yi.define();class G0{eq(l){return this==l}range(l,a=l){return kS.create(l,a,this)}}G0.prototype.startSide=G0.prototype.endSide=0,G0.prototype.point=!1,G0.prototype.mapMode=va.TrackDel;class kS{constructor(l,a,h){this.from=l,this.to=a,this.value=h}static create(l,a,h){return new kS(l,a,h)}}function HU(c,l){return c.from-l.from||c.value.startSide-l.value.startSide}class $U{constructor(l,a,h,d){this.from=l,this.to=a,this.value=h,this.maxPoint=d}get length(){return this.to[this.to.length-1]}findIndex(l,a,h,d=0){let f=h?this.to:this.from;for(let p=d,g=f.length;;){if(p==g)return p;let m=p+g>>1,v=f[m]-l||(h?this.value[m].endSide:this.value[m].startSide)-a;if(m==p)return v>=0?p:g;v>=0?g=m:p=m+1}}between(l,a,h,d){for(let f=this.findIndex(a,-1e9,!0),p=this.findIndex(h,1e9,!1,f);f<p;f++)if(!1===d(this.from[f]+l,this.to[f]+l,this.value[f]))return!1}map(l,a){let h=[],d=[],f=[],p=-1,g=-1;for(let m=0;m<this.value.length;m++){let b,C,v=this.value[m],y=this.from[m]+l,_=this.to[m]+l;if(y==_){let x=a.mapPos(y,v.startSide,v.mapMode);if(null==x||(b=C=x,v.startSide!=v.endSide&&(C=a.mapPos(y,v.endSide),C<b)))continue}else if(b=a.mapPos(y,v.startSide),C=a.mapPos(_,v.endSide),b>C||b==C&&v.startSide>0&&v.endSide<=0)continue;(C-b||v.endSide-v.startSide)<0||(p<0&&(p=b),v.point&&(g=Math.max(g,C-b)),h.push(v),d.push(b-p),f.push(C-p))}return{mapped:h.length?new $U(d,f,h,g):null,pos:p}}}let Es=(()=>{class c{constructor(a,h,d,f){this.chunkPos=a,this.chunk=h,this.nextLayer=d,this.maxPoint=f}static create(a,h,d,f){return new c(a,h,d,f)}get length(){let a=this.chunk.length-1;return a<0?0:Math.max(this.chunkEnd(a),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let a=this.nextLayer.size;for(let h of this.chunk)a+=h.value.length;return a}chunkEnd(a){return this.chunkPos[a]+this.chunk[a].length}update(a){let{add:h=[],sort:d=!1,filterFrom:f=0,filterTo:p=this.length}=a,g=a.filter;if(0==h.length&&!g)return this;if(d&&(h=h.slice().sort(HU)),this.isEmpty)return h.length?c.of(h):this;let m=new pde(this,null,-1).goto(0),v=0,y=[],_=new Og;for(;m.value||v<h.length;)if(v<h.length&&(m.from-h[v].from||m.startSide-h[v].value.startSide)>=0){let b=h[v++];_.addInner(b.from,b.to,b.value)||y.push(b)}else 1==m.rangeIndex&&m.chunkIndex<this.chunk.length&&(v==h.length||this.chunkEnd(m.chunkIndex)<h[v].from)&&(!g||f>this.chunkEnd(m.chunkIndex)||p<this.chunkPos[m.chunkIndex])&&_.addChunk(this.chunkPos[m.chunkIndex],this.chunk[m.chunkIndex])?m.nextChunk():((!g||f>m.to||p<m.from||g(m.from,m.to,m.value))&&(_.addInner(m.from,m.to,m.value)||y.push(kS.create(m.from,m.to,m.value))),m.next());return _.finishInner(this.nextLayer.isEmpty&&!y.length?c.empty:this.nextLayer.update({add:y,filter:g,filterFrom:f,filterTo:p}))}map(a){if(a.empty||this.isEmpty)return this;let h=[],d=[],f=-1;for(let g=0;g<this.chunk.length;g++){let m=this.chunkPos[g],v=this.chunk[g],y=a.touchesRange(m,m+v.length);if(!1===y)f=Math.max(f,v.maxPoint),h.push(v),d.push(a.mapPos(m));else if(!0===y){let{mapped:_,pos:b}=v.map(m,a);_&&(f=Math.max(f,_.maxPoint),h.push(_),d.push(b))}}let p=this.nextLayer.map(a);return 0==h.length?p:new c(d,h,p||c.empty,f)}between(a,h,d){if(!this.isEmpty){for(let f=0;f<this.chunk.length;f++){let p=this.chunkPos[f],g=this.chunk[f];if(h>=p&&a<=p+g.length&&!1===g.between(p,a-p,h-p,d))return}this.nextLayer.between(a,h,d)}}iter(a=0){return MS.from([this]).goto(a)}get isEmpty(){return this.nextLayer==this}static iter(a,h=0){return MS.from(a).goto(h)}static compare(a,h,d,f,p=-1){let g=a.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=p),m=h.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=p),v=fde(g,m,d),y=new ES(g,v,p),_=new ES(m,v,p);d.iterGaps((b,C,x)=>gde(y,b,_,C,x,f)),d.empty&&0==d.length&&gde(y,0,_,0,0,f)}static eq(a,h,d=0,f){null==f&&(f=1e9);let p=a.filter(_=>!_.isEmpty&&h.indexOf(_)<0),g=h.filter(_=>!_.isEmpty&&a.indexOf(_)<0);if(p.length!=g.length)return!1;if(!p.length)return!0;let m=fde(p,g),v=new ES(p,m,0).goto(d),y=new ES(g,m,0).goto(d);for(;;){if(v.to!=y.to||!GU(v.active,y.active)||v.point&&(!y.point||!v.point.eq(y.point)))return!1;if(v.to>f)return!0;v.next(),y.next()}}static spans(a,h,d,f,p=-1){let g=new ES(a,null,p).goto(h),m=h,v=g.openStart;for(;;){let y=Math.min(g.to,d);if(g.point?(f.point(m,y,g.point,g.activeForPoint(g.to),v,g.pointRank),v=g.openEnd(y)+(g.to>y?1:0)):y>m&&(f.span(m,y,g.active,v),v=g.openEnd(y)),g.to>d)break;m=g.to,g.next()}return v}static of(a,h=!1){let d=new Og;for(let f of a instanceof kS?[a]:h?function snt(c){if(c.length>1)for(let l=c[0],a=1;a<c.length;a++){let h=c[a];if(HU(l,h)>0)return c.slice().sort(HU);l=h}return c}(a):a)d.add(f.from,f.to,f.value);return d.finish()}}return c.empty=new c([],[],null,-1),c})();Es.empty.nextLayer=Es.empty;class Og{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(l){this.chunks.push(new $U(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,l&&(this.from=[],this.to=[],this.value=[])}add(l,a,h){this.addInner(l,a,h)||(this.nextLayer||(this.nextLayer=new Og)).add(l,a,h)}addInner(l,a,h){let d=l-this.lastTo||h.startSide-this.last.endSide;if(d<=0&&(l-this.lastFrom||h.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(d<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=l),this.from.push(l-this.chunkStart),this.to.push(a-this.chunkStart),this.last=h,this.lastFrom=l,this.lastTo=a,this.value.push(h),h.point&&(this.maxPoint=Math.max(this.maxPoint,a-l)),0))}addChunk(l,a){if((l-this.lastTo||a.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,a.maxPoint),this.chunks.push(a),this.chunkPos.push(l);let h=a.value.length-1;return this.last=a.value[h],this.lastFrom=a.from[h]+l,this.lastTo=a.to[h]+l,!0}finish(){return this.finishInner(Es.empty)}finishInner(l){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return l;let a=Es.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(l):l,this.setMaxPoint);return this.from=null,a}}function fde(c,l,a){let h=new Map;for(let f of c)for(let p=0;p<f.chunk.length;p++)f.chunk[p].maxPoint<=0&&h.set(f.chunk[p],f.chunkPos[p]);let d=new Set;for(let f of l)for(let p=0;p<f.chunk.length;p++){let g=h.get(f.chunk[p]);null!=g&&(a?a.mapPos(g):g)==f.chunkPos[p]&&(null==a||!a.touchesRange(g,g+f.chunk[p].length))&&d.add(f.chunk[p])}return d}class pde{constructor(l,a,h,d=0){this.layer=l,this.skip=a,this.minPoint=h,this.rank=d}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(l,a=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(l,a,!1),this}gotoInner(l,a,h){for(;this.chunkIndex<this.layer.chunk.length;){let d=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(d)||this.layer.chunkEnd(this.chunkIndex)<l||d.maxPoint<this.minPoint))break;this.chunkIndex++,h=!1}if(this.chunkIndex<this.layer.chunk.length){let d=this.layer.chunk[this.chunkIndex].findIndex(l-this.layer.chunkPos[this.chunkIndex],a,!0);(!h||this.rangeIndex<d)&&this.setRangeIndex(d)}this.next()}forward(l,a){(this.to-l||this.endSide-a)<0&&this.gotoInner(l,a,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let l=this.layer.chunkPos[this.chunkIndex],a=this.layer.chunk[this.chunkIndex];if(this.from=l+a.from[this.rangeIndex],this.to=l+a.to[this.rangeIndex],this.value=a.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(l){if(l==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=l}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(l){return this.from-l.from||this.startSide-l.startSide||this.rank-l.rank||this.to-l.to||this.endSide-l.endSide}}class MS{constructor(l){this.heap=l}static from(l,a=null,h=-1){let d=[];for(let f=0;f<l.length;f++)for(let p=l[f];!p.isEmpty;p=p.nextLayer)p.maxPoint>=h&&d.push(new pde(p,a,h,f));return 1==d.length?d[0]:new MS(d)}get startSide(){return this.value?this.value.startSide:0}goto(l,a=-1e9){for(let h of this.heap)h.goto(l,a);for(let h=this.heap.length>>1;h>=0;h--)WU(this.heap,h);return this.next(),this}forward(l,a){for(let h of this.heap)h.forward(l,a);for(let h=this.heap.length>>1;h>=0;h--)WU(this.heap,h);(this.to-l||this.value.endSide-a)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let l=this.heap[0];this.from=l.from,this.to=l.to,this.value=l.value,this.rank=l.rank,l.value&&l.next(),WU(this.heap,0)}}}function WU(c,l){for(let a=c[l];;){let h=1+(l<<1);if(h>=c.length)break;let d=c[h];if(h+1<c.length&&d.compare(c[h+1])>=0&&(d=c[h+1],h++),a.compare(d)<0)break;c[h]=a,c[l]=d,l=h}}class ES{constructor(l,a,h){this.minPoint=h,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=MS.from(l,a,h)}goto(l,a=-1e9){return this.cursor.goto(l,a),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=l,this.endSide=a,this.openStart=-1,this.next(),this}forward(l,a){for(;this.minActive>-1&&(this.activeTo[this.minActive]-l||this.active[this.minActive].endSide-a)<0;)this.removeActive(this.minActive);this.cursor.forward(l,a)}removeActive(l){cA(this.active,l),cA(this.activeTo,l),cA(this.activeRank,l),this.minActive=mde(this.active,this.activeTo)}addActive(l){let a=0,{value:h,to:d,rank:f}=this.cursor;for(;a<this.activeRank.length&&this.activeRank[a]<=f;)a++;uA(this.active,a,h),uA(this.activeTo,a,d),uA(this.activeRank,a,f),l&&uA(l,a,this.cursor.from),this.minActive=mde(this.active,this.activeTo)}next(){let l=this.to,a=this.point;this.point=null;let h=this.openStart<0?[]:null,d=0;for(;;){let f=this.minActive;if(f>-1&&(this.activeTo[f]-this.cursor.from||this.active[f].endSide-this.cursor.startSide)<0){if(this.activeTo[f]>l){this.to=this.activeTo[f],this.endSide=this.active[f].endSide;break}this.removeActive(f),h&&cA(h,f)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>l){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let p=this.cursor.value;if(p.point){if(!(a&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=p,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=p.endSide,this.cursor.from<l&&(d=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(h),this.cursor.from<l&&this.cursor.to>l&&d++,this.cursor.next()}}}if(h){let f=0;for(;f<h.length&&h[f]<l;)f++;this.openStart=f+d}}activeForPoint(l){if(!this.active.length)return this.active;let a=[];for(let h=this.active.length-1;h>=0&&!(this.activeRank[h]<this.pointRank);h--)(this.activeTo[h]>l||this.activeTo[h]==l&&this.active[h].endSide>=this.point.endSide)&&a.push(this.active[h]);return a.reverse()}openEnd(l){let a=0;for(let h=this.activeTo.length-1;h>=0&&this.activeTo[h]>l;h--)a++;return a}}function gde(c,l,a,h,d,f){c.goto(l),a.goto(h);let p=h+d,g=h,m=h-l;for(;;){let v=c.to+m-a.to||c.endSide-a.endSide,y=v<0?c.to+m:a.to,_=Math.min(y,p);if(c.point||a.point?c.point&&a.point&&(c.point==a.point||c.point.eq(a.point))&&GU(c.activeForPoint(c.to+m),a.activeForPoint(a.to))||f.comparePoint(g,_,c.point,a.point):_>g&&!GU(c.active,a.active)&&f.compareRange(g,_,c.active,a.active),y>p)break;g=y,v<=0&&c.next(),v>=0&&a.next()}}function GU(c,l){if(c.length!=l.length)return!1;for(let a=0;a<c.length;a++)if(c[a]!=l[a]&&!c[a].eq(l[a]))return!1;return!0}function cA(c,l){for(let a=l,h=c.length-1;a<h;a++)c[a]=c[a+1];c.pop()}function uA(c,l,a){for(let h=c.length-1;h>=l;h--)c[h+1]=c[h];c[l]=a}function mde(c,l){let a=-1,h=1e9;for(let d=0;d<l.length;d++)(l[d]-h||c[d].endSide-c[a].endSide)<0&&(a=d,h=l[d]);return a}function AS(c,l,a=c.length){let h=0;for(let d=0;d<a;)9==c.charCodeAt(d)?(h+=l-h%l,d++):(h++,d=wl(c,d));return h}function QU(c,l,a,h){for(let d=0,f=0;;){if(f>=l)return d;if(d==c.length)break;f+=9==c.charCodeAt(d)?a-f%a:1,d=wl(c,d)}return!0===h?-1:c.length}const vde="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),qU="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),yde="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Dg{constructor(l,a){this.rules=[];let{finish:h}=a||{};function d(p){return/^@/.test(p)?[p]:p.split(/,\s*/)}function f(p,g,m,v){let y=[],_=/^@(\w+)\b/.exec(p[0]),b=_&&"keyframes"==_[1];if(_&&null==g)return m.push(p[0]+";");for(let C in g){let x=g[C];if(/&/.test(C))f(C.split(/,\s*/).map(S=>p.map(w=>S.replace(/&/,w))).reduce((S,w)=>S.concat(w)),x,m);else if(x&&"object"==typeof x){if(!_)throw new RangeError("The value of a property ("+C+") should be a primitive value.");f(d(C),x,y,b)}else null!=x&&y.push(C.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+x+";")}(y.length||b)&&m.push((!h||_||v?p:p.map(h)).join(", ")+" {"+y.join(" ")+"}")}for(let p in l)f(d(p),l[p],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let l=yde[vde]||1;return yde[vde]=l+1,"\u037c"+l.toString(36)}static mount(l,a){(l[qU]||new ont(l)).mount(Array.isArray(a)?a:[a])}}let hA=null;class ont{constructor(l){if(!l.head&&l.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(hA)return l.adoptedStyleSheets=[hA.sheet].concat(l.adoptedStyleSheets),l[qU]=hA;this.sheet=new CSSStyleSheet,l.adoptedStyleSheets=[this.sheet].concat(l.adoptedStyleSheets),hA=this}else{this.styleTag=(l.ownerDocument||l).createElement("style");let a=l.head||l;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],l[qU]=this}mount(l){let a=this.sheet,h=0,d=0;for(let f=0;f<l.length;f++){let p=l[f],g=this.modules.indexOf(p);if(g<d&&g>-1&&(this.modules.splice(g,1),d--,g=-1),-1==g){if(this.modules.splice(d++,0,p),a)for(let m=0;m<p.rules.length;m++)a.insertRule(p.rules[m],h++)}else{for(;d<g;)h+=this.modules[d++].rules.length;h+=p.rules.length,d++}}if(!a){let f="";for(let p=0;p<this.modules.length;p++)f+=this.modules[p].getRules()+"\n";this.styleTag.textContent=f}}}for(var kg={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},IS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_de="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),ant=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),lnt="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),cnt=ant||_de&&+_de[1]<57,ya=0;ya<10;ya++)kg[48+ya]=kg[96+ya]=String(ya);for(ya=1;ya<=24;ya++)kg[ya+111]="F"+ya;for(ya=65;ya<=90;ya++)kg[ya]=String.fromCharCode(ya+32),IS[ya]=String.fromCharCode(ya);for(var ZU in kg)IS.hasOwnProperty(ZU)||(IS[ZU]=kg[ZU]);function dA(c){let l;return l=11==c.nodeType?c.getSelection?c:c.ownerDocument:c,l.getSelection()}function p1(c,l){return!!l&&(c==l||c.contains(1!=l.nodeType?l.parentNode:l))}function fA(c,l){if(!l.anchorNode)return!1;try{return p1(c,l.anchorNode)}catch(a){return!1}}function PS(c){return 3==c.nodeType?m1(c,0,c.nodeValue.length).getClientRects():1==c.nodeType?c.getClientRects():[]}function pA(c,l,a,h){return!!a&&(bde(c,l,a,h,-1)||bde(c,l,a,h,1))}function gA(c){for(var l=0;;l++)if(!(c=c.previousSibling))return l}function bde(c,l,a,h,d){for(;;){if(c==a&&l==h)return!0;if(l==(d<0?0:RS(c))){if("DIV"==c.nodeName)return!1;let f=c.parentNode;if(!f||1!=f.nodeType)return!1;l=gA(c)+(d<0?0:1),c=f}else{if(1!=c.nodeType)return!1;if(1==(c=c.childNodes[l+(d<0?-1:0)]).nodeType&&"false"==c.contentEditable)return!1;l=d<0?RS(c):0}}}function RS(c){return 3==c.nodeType?c.nodeValue.length:c.childNodes.length}const Cde={left:0,right:0,top:0,bottom:0};function mA(c,l){let a=l?c.left:c.right;return{left:a,right:a,top:c.top,bottom:c.bottom}}function dnt(c){return{left:0,right:c.innerWidth,top:0,bottom:c.innerHeight}}class pnt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(l){return this.anchorNode==l.anchorNode&&this.anchorOffset==l.anchorOffset&&this.focusNode==l.focusNode&&this.focusOffset==l.focusOffset}setRange(l){this.set(l.anchorNode,l.anchorOffset,l.focusNode,l.focusOffset)}set(l,a,h,d){this.anchorNode=l,this.anchorOffset=a,this.focusNode=h,this.focusOffset=d}}let wde,g1=null;function xde(c){if(c.setActive)return c.setActive();if(g1)return c.focus(g1);let l=[];for(let a=c;a&&(l.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=a.parentNode);if(c.focus(null==g1?{get preventScroll(){return g1={preventScroll:!0},!0}}:void 0),!g1){g1=!1;for(let a=0;a<l.length;){let h=l[a++],d=l[a++],f=l[a++];h.scrollTop!=d&&(h.scrollTop=d),h.scrollLeft!=f&&(h.scrollLeft=f)}}}function m1(c,l,a=l){let h=wde||(wde=document.createRange());return h.setEnd(c,a),h.setStart(c,l),h}function FS(c,l,a){let h={key:l,code:l,keyCode:a,which:a,cancelable:!0},d=new KeyboardEvent("keydown",h);d.synthetic=!0,c.dispatchEvent(d);let f=new KeyboardEvent("keyup",h);return f.synthetic=!0,c.dispatchEvent(f),d.defaultPrevented||f.defaultPrevented}function Sde(c){for(;c.attributes.length;)c.removeAttributeNode(c.attributes[0])}class $a{constructor(l,a,h=!0){this.node=l,this.offset=a,this.precise=h}static before(l,a){return new $a(l.parentNode,gA(l),a)}static after(l,a){return new $a(l.parentNode,gA(l)+1,a)}}const XU=[];class fs{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(l){let a=this.posAtStart;for(let h of this.children){if(h==l)return a;a+=h.length+h.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(l){return this.posBefore(l)+l.length}coordsAt(l,a){return null}sync(l){if(2&this.dirty){let d,a=this.dom,h=null;for(let f of this.children){if(f.dirty){if(!f.dom&&(d=h?h.nextSibling:a.firstChild)){let p=fs.get(d);(!p||!p.parent&&p.canReuseDOM(f))&&f.reuseDOM(d)}f.sync(l),f.dirty=0}if(d=h?h.nextSibling:a.firstChild,l&&!l.written&&l.node==a&&d!=f.dom&&(l.written=!0),f.dom.parentNode==a)for(;d&&d!=f.dom;)d=Tde(d);else a.insertBefore(f.dom,d);h=f.dom}for(d=h?h.nextSibling:a.firstChild,d&&l&&l.node==a&&(l.written=!0);d;)d=Tde(d)}else if(1&this.dirty)for(let a of this.children)a.dirty&&(a.sync(l),a.dirty=0)}reuseDOM(l){}localPosFromDOM(l,a){let h;if(l==this.dom)h=this.dom.childNodes[a];else{let d=0==RS(l)?0:0==a?-1:1;for(;;){let f=l.parentNode;if(f==this.dom)break;0==d&&f.firstChild!=f.lastChild&&(d=l==f.firstChild?-1:1),l=f}h=d<0?l:l.nextSibling}if(h==this.dom.firstChild)return 0;for(;h&&!fs.get(h);)h=h.nextSibling;if(!h)return this.length;for(let d=0,f=0;;d++){let p=this.children[d];if(p.dom==h)return f;f+=p.length+p.breakAfter}}domBoundsAround(l,a,h=0){let d=-1,f=-1,p=-1,g=-1;for(let m=0,v=h,y=h;m<this.children.length;m++){let _=this.children[m],b=v+_.length;if(v<l&&b>a)return _.domBoundsAround(l,a,v);if(b>=l&&-1==d&&(d=m,f=v),v>a&&_.dom.parentNode==this.dom){p=m,g=y;break}y=b,v=b+_.breakAfter}return{from:f,to:g<0?h+this.length:g,startDOM:(d?this.children[d-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:p<this.children.length&&p>=0?this.children[p].dom:null}}markDirty(l=!1){this.dirty|=2,this.markParentsDirty(l)}markParentsDirty(l){for(let a=this.parent;a;a=a.parent){if(l&&(a.dirty|=2),1&a.dirty)return;a.dirty|=1,l=!1}}setParent(l){this.parent!=l&&(this.parent=l,this.dirty&&this.markParentsDirty(!0))}setDOM(l){this.dom&&(this.dom.cmView=null),this.dom=l,l.cmView=this}get rootView(){for(let l=this;;){let a=l.parent;if(!a)return l;l=a}}replaceChildren(l,a,h=XU){this.markDirty();for(let d=l;d<a;d++){let f=this.children[d];f.parent==this&&f.destroy()}this.children.splice(l,a-l,...h);for(let d=0;d<h.length;d++)h[d].setParent(this)}ignoreMutation(l){return!1}ignoreEvent(l){return!1}childCursor(l=this.length){return new Ode(this.children,l,this.children.length)}childPos(l,a=1){return this.childCursor().findPos(l,a)}toString(){let l=this.constructor.name.replace("View","");return l+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==l?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(l){return l.cmView}get isEditable(){return!0}merge(l,a,h,d,f,p){return!1}become(l){return!1}canReuseDOM(l){return l.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function Tde(c){let l=c.nextSibling;return c.parentNode.removeChild(c),l}fs.prototype.breakAfter=0;class Ode{constructor(l,a,h){this.children=l,this.pos=a,this.i=h,this.off=0}findPos(l,a=1){for(;;){if(l>this.pos||l==this.pos&&(a>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=l-this.pos,this;let h=this.children[--this.i];this.pos-=h.length+h.breakAfter}}}function Dde(c,l,a,h,d,f,p,g,m){let{children:v}=c,y=v.length?v[l]:null,_=f.length?f[f.length-1]:null,b=_?_.breakAfter:p;if(!(l==h&&y&&!p&&!b&&f.length<2&&y.merge(a,d,f.length?_:null,0==a,g,m))){if(h<v.length){let C=v[h];C&&d<C.length?(l==h&&(C=C.split(d),d=0),!b&&_&&C.merge(0,d,_,!0,0,m)?f[f.length-1]=C:(d&&C.merge(0,d,null,!1,0,m),f.push(C))):null!=C&&C.breakAfter&&(_?_.breakAfter=1:p=1),h++}for(y&&(y.breakAfter=p,a>0&&(!p&&f.length&&y.merge(a,y.length,f[0],!1,g,0)?y.breakAfter=f.shift().breakAfter:(a<y.length||y.children.length&&0==y.children[y.children.length-1].length)&&y.merge(a,y.length,null,!1,g,0),l++));l<h&&f.length;)if(v[h-1].become(f[f.length-1]))h--,f.pop(),m=f.length?0:g;else{if(!v[l].become(f[0]))break;l++,f.shift(),g=f.length?0:m}!f.length&&l&&h<v.length&&!v[l-1].breakAfter&&v[h].merge(0,0,v[l-1],!1,g,m)&&l--,(l<h||f.length)&&c.replaceChildren(l,h,f)}}function kde(c,l,a,h,d,f){let p=c.childCursor(),{i:g,off:m}=p.findPos(a,1),{i:v,off:y}=p.findPos(l,-1),_=l-a;for(let b of h)_+=b.length;c.length+=_,Dde(c,v,y,g,m,h,0,d,f)}let Bc="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},YU="undefined"!=typeof document?document:{documentElement:{style:{}}};const KU=/Edge\/(\d+)/.exec(Bc.userAgent),Mde=/MSIE \d/.test(Bc.userAgent),JU=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bc.userAgent),vA=!!(Mde||JU||KU),Ede=!vA&&/gecko\/(\d+)/i.test(Bc.userAgent),e7=!vA&&/Chrome\/(\d+)/.exec(Bc.userAgent),Ade="webkitFontSmoothing"in YU.documentElement.style,Ide=!vA&&/Apple Computer/.test(Bc.vendor),Pde=Ide&&(/Mobile\/\w+/.test(Bc.userAgent)||Bc.maxTouchPoints>2);var Un={mac:Pde||/Mac/.test(Bc.platform),windows:/Win/.test(Bc.platform),linux:/Linux|X11/.test(Bc.platform),ie:vA,ie_version:Mde?YU.documentMode||6:JU?+JU[1]:KU?+KU[1]:0,gecko:Ede,gecko_version:Ede?+(/Firefox\/(\d+)/.exec(Bc.userAgent)||[0,0])[1]:0,chrome:!!e7,chrome_version:e7?+e7[1]:0,ios:Pde,android:/Android\b/.test(Bc.userAgent),webkit:Ade,safari:Ide,webkit_version:Ade?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=YU.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Mg extends fs{constructor(l){super(),this.text=l}get length(){return this.text.length}createDOM(l){this.setDOM(l||document.createTextNode(this.text))}sync(l){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(l&&l.node==this.dom&&(l.written=!0),this.dom.nodeValue=this.text)}reuseDOM(l){3==l.nodeType&&this.createDOM(l)}merge(l,a,h){return(!h||h instanceof Mg&&!(this.length-(a-l)+h.length>256))&&(this.text=this.text.slice(0,l)+(h?h.text:"")+this.text.slice(a),this.markDirty(),!0)}split(l){let a=new Mg(this.text.slice(l));return this.text=this.text.slice(0,l),this.markDirty(),a}localPosFromDOM(l,a){return l==this.dom?a:a?this.text.length:0}domAtPos(l){return new $a(this.dom,l)}domBoundsAround(l,a,h){return{from:h,to:h+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(l,a){return t7(this.dom,l,a)}}class Md extends fs{constructor(l,a=[],h=0){super(),this.mark=l,this.children=a,this.length=h;for(let d of a)d.setParent(this)}setAttrs(l){if(Sde(l),this.mark.class&&(l.className=this.mark.class),this.mark.attrs)for(let a in this.mark.attrs)l.setAttribute(a,this.mark.attrs[a]);return l}reuseDOM(l){l.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(l),this.dirty|=6)}sync(l){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(l)}merge(l,a,h,d,f,p){return!(h&&(!(h instanceof Md&&h.mark.eq(this.mark))||l&&f<=0||a<this.length&&p<=0)||(kde(this,l,a,h?h.children:[],f-1,p-1),this.markDirty(),0))}split(l){let a=[],h=0,d=-1,f=0;for(let g of this.children){let m=h+g.length;m>l&&a.push(h<l?g.split(l-h):g),d<0&&h>=l&&(d=f),h=m,f++}let p=this.length-l;return this.length=l,d>-1&&(this.children.length=d,this.markDirty()),new Md(this.mark,a,p)}domAtPos(l){return Nde(this,l)}coordsAt(l,a){return Bde(this,l,a)}}function t7(c,l,a){let h=c.nodeValue.length;l>h&&(l=h);let d=l,f=l,p=0;0==l&&a<0||l==h&&a>=0?Un.chrome||Un.gecko||(l?(d--,p=1):f<h&&(f++,p=-1)):a<0?d--:f<h&&f++;let g=m1(c,d,f).getClientRects();if(!g.length)return Cde;let m=g[(p?p<0:a>=0)?0:g.length-1];return Un.safari&&!p&&0==m.width&&(m=Array.prototype.find.call(g,v=>v.width)||m),p?mA(m,p<0):m||null}class Eg extends fs{constructor(l,a,h){super(),this.widget=l,this.length=a,this.side=h,this.prevWidget=null}static create(l,a,h){return new(l.customView||Eg)(l,a,h)}split(l){let a=Eg.create(this.widget,this.length-l,this.side);return this.length-=l,a}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(l,a,h,d,f,p){return!(h&&(!(h instanceof Eg&&this.widget.compare(h.widget))||l>0&&f<=0||a<this.length&&p<=0)||(this.length=l+(h?h.length:0)+(this.length-a),0))}become(l){return l.length==this.length&&l instanceof Eg&&l.side==this.side&&this.widget.constructor==l.widget.constructor&&(this.widget.eq(l.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=l.widget,!0)}ignoreMutation(){return!0}ignoreEvent(l){return this.widget.ignoreEvent(l)}get overrideDOMText(){if(0==this.length)return Ir.empty;let l=this;for(;l.parent;)l=l.parent;let a=l.editorView,h=a&&a.state.doc,d=this.posAtStart;return h?h.slice(d,d+this.length):Ir.empty}domAtPos(l){return 0==l?$a.before(this.dom):$a.after(this.dom,l==this.length)}domBoundsAround(){return null}coordsAt(l,a){let h=this.dom.getClientRects(),d=null;if(!h.length)return Cde;for(let f=l>0?h.length-1:0;d=h[f],!(l>0?0==f:f==h.length-1||d.top<d.bottom);f+=l>0?-1:1);return 0==l&&a>0||l==this.length&&a<=0?d:mA(d,0==l)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Rde extends Eg{domAtPos(l){let{topView:a,text:h}=this.widget;return a?n7(l,0,a,h,(d,f)=>d.domAtPos(f),d=>new $a(h,Math.min(d,h.nodeValue.length))):new $a(h,Math.min(l,h.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(l,a){let{topView:h,text:d}=this.widget;return h?Fde(l,a,h,d):Math.min(a,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(l,a){let{topView:h,text:d}=this.widget;return h?n7(l,a,h,d,(f,p,g)=>f.coordsAt(p,g),(f,p)=>t7(d,f,p)):t7(d,l,a)}destroy(){var l;super.destroy(),null===(l=this.widget.topView)||void 0===l||l.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function n7(c,l,a,h,d,f){if(a instanceof Md){for(let p=a.dom.firstChild;p;p=p.nextSibling){let g=fs.get(p);if(!g)return f(c,l);let m=p1(p,h),v=g.length+(m?h.nodeValue.length:0);if(c<v||c==v&&g.getSide()<=0)return m?n7(c,l,g,h,d,f):d(g,c,l);c-=v}return d(a,a.length,-1)}return a.dom==h?f(c,l):d(a,c,l)}function Fde(c,l,a,h){if(a instanceof Md)for(let d of a.children){let f=0,p=p1(d.dom,h);if(p1(d.dom,c))return f+(p?Fde(c,l,d,h):d.localPosFromDOM(c,l));f+=p?h.nodeValue.length:d.length}else if(a.dom==h)return Math.min(l,h.nodeValue.length);return a.localPosFromDOM(c,l)}class v1 extends fs{constructor(l){super(),this.side=l}get length(){return 0}merge(){return!1}become(l){return l instanceof v1&&l.side==this.side}split(){return new v1(this.side)}sync(){if(!this.dom){let l=document.createElement("img");l.className="cm-widgetBuffer",l.setAttribute("aria-hidden","true"),this.setDOM(l)}}getSide(){return this.side}domAtPos(l){return $a.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(l){let a=this.dom.getBoundingClientRect(),h=function ynt(c,l){let a=c.parent,h=a?a.children.indexOf(c):-1;for(;a&&h>=0;)if(l<0?h>0:h<a.children.length){let d=a.children[h+l];if(d instanceof Mg){let f=d.coordsAt(l<0?d.length:0,l);if(f)return f}h+=l}else{if(!(a instanceof Md&&a.parent)){let d=a.dom.lastChild;if(d&&"BR"==d.nodeName)return d.getClientRects()[0];break}h=a.parent.children.indexOf(a)+(l<0?0:1),a=a.parent}}(this,this.side>0?-1:1);return h&&h.top<a.bottom&&h.bottom>a.top?{left:a.left,right:a.right,top:h.top,bottom:h.bottom}:a}get overrideDOMText(){return Ir.empty}}function Nde(c,l){let a=c.dom,{children:h}=c,d=0;for(let f=0;d<h.length;d++){let p=h[d],g=f+p.length;if(!(g==f&&p.getSide()<=0)){if(l>f&&l<g&&p.dom.parentNode==a)return p.domAtPos(l-f);if(l<=f)break;f=g}}for(let f=d;f>0;f--){let p=h[f-1];if(p.dom.parentNode==a)return p.domAtPos(p.length)}for(let f=d;f<h.length;f++){let p=h[f];if(p.dom.parentNode==a)return p.domAtPos(0)}return new $a(a,0)}function Lde(c,l,a){let h,{children:d}=c;a>0&&l instanceof Md&&d.length&&(h=d[d.length-1])instanceof Md&&h.mark.eq(l.mark)?Lde(h,l.children[0],a-1):(d.push(l),l.setParent(c)),c.length+=l.length}function Bde(c,l,a){for(let f=0,p=0;p<c.children.length;p++){let v,g=c.children[p],m=f+g.length;if((a<=0||m==c.length||g.getSide()>0?m>=l:m>l)&&(l<m||p+1==c.children.length||(v=c.children[p+1]).length||v.getSide()>0)){let y=0;if(m==f){if(g.getSide()<=0)continue;y=a=-g.getSide()}let _=g.coordsAt(Math.max(0,l-f),a);return y&&_?mA(_,a<0):_}f=m}let h=c.dom.lastChild;if(!h)return c.dom.getBoundingClientRect();let d=PS(h);return d[d.length-1]||null}function i7(c,l){for(let a in c)"class"==a&&l.class?l.class+=" "+c.class:"style"==a&&l.style?l.style+=";"+c.style:l[a]=c[a];return l}function r7(c,l){if(c==l)return!0;if(!c||!l)return!1;let a=Object.keys(c),h=Object.keys(l);if(a.length!=h.length)return!1;for(let d of a)if(-1==h.indexOf(d)||c[d]!==l[d])return!1;return!0}function s7(c,l,a){let h=null;if(l)for(let d in l)a&&d in a||c.removeAttribute(h=d);if(a)for(let d in a)l&&l[d]==a[d]||c.setAttribute(h=d,a[d]);return!!h}Mg.prototype.children=Eg.prototype.children=v1.prototype.children=XU;class Jf{eq(l){return!1}updateDOM(l){return!1}compare(l){return this==l||this.constructor==l.constructor&&this.eq(l)}get estimatedHeight(){return-1}ignoreEvent(l){return!0}get customView(){return null}destroy(l){}}var is=function(c){return c[c.Text=0]="Text",c[c.WidgetBefore=1]="WidgetBefore",c[c.WidgetAfter=2]="WidgetAfter",c[c.WidgetRange=3]="WidgetRange",c}(is||(is={}));class Hn extends G0{constructor(l,a,h,d){super(),this.startSide=l,this.endSide=a,this.widget=h,this.spec=d}get heightRelevant(){return!1}static mark(l){return new yA(l)}static widget(l){let a=l.side||0,h=!!l.block;return a+=h?a>0?3e8:-4e8:a>0?1e8:-1e8,new Q0(l,a,a,h,l.widget||null,!1)}static replace(l){let h,d,a=!!l.block;if(l.isBlockGap)h=-5e8,d=4e8;else{let{start:f,end:p}=Vde(l,a);h=(f?a?-3e8:-1:5e8)-1,d=1+(p?a?2e8:1:-6e8)}return new Q0(l,h,d,a,l.widget||null,!0)}static line(l){return new NS(l)}static set(l,a=!1){return Es.of(l,a)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Hn.none=Es.empty;class yA extends Hn{constructor(l){let{start:a,end:h}=Vde(l);super(a?-1:5e8,h?1:-6e8,null,l),this.tagName=l.tagName||"span",this.class=l.class||"",this.attrs=l.attributes||null}eq(l){return this==l||l instanceof yA&&this.tagName==l.tagName&&this.class==l.class&&r7(this.attrs,l.attrs)}range(l,a=l){if(l>=a)throw new RangeError("Mark decorations may not be empty");return super.range(l,a)}}yA.prototype.point=!1;class NS extends Hn{constructor(l){super(-2e8,-2e8,null,l)}eq(l){return l instanceof NS&&r7(this.spec.attributes,l.spec.attributes)}range(l,a=l){if(a!=l)throw new RangeError("Line decoration ranges must be zero-length");return super.range(l,a)}}NS.prototype.mapMode=va.TrackBefore,NS.prototype.point=!0;class Q0 extends Hn{constructor(l,a,h,d,f,p){super(a,h,f,l),this.block=d,this.isReplace=p,this.mapMode=d?a<=0?va.TrackBefore:va.TrackAfter:va.TrackDel}get type(){return this.startSide<this.endSide?is.WidgetRange:this.startSide<=0?is.WidgetBefore:is.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(l){return l instanceof Q0&&function _nt(c,l){return c==l||!!(c&&l&&c.compare(l))}(this.widget,l.widget)&&this.block==l.block&&this.startSide==l.startSide&&this.endSide==l.endSide}range(l,a=l){if(this.isReplace&&(l>a||l==a&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&a!=l)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(l,a)}}function Vde(c,l=!1){let{inclusiveStart:a,inclusiveEnd:h}=c;return null==a&&(a=c.inclusive),null==h&&(h=c.inclusive),{start:null!=a?a:l,end:null!=h?h:l}}function o7(c,l,a,h=0){let d=a.length-1;d>=0&&a[d]+h>=c?a[d]=Math.max(a[d],l):a.push(c,l)}Q0.prototype.point=!0;class Tl extends fs{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(l,a,h,d,f,p){if(h){if(!(h instanceof Tl))return!1;this.dom||h.transferDOM(this)}return d&&this.setDeco(h?h.attrs:null),kde(this,l,a,h?h.children:[],f,p),!0}split(l){let a=new Tl;if(a.breakAfter=this.breakAfter,0==this.length)return a;let{i:h,off:d}=this.childPos(l);d&&(a.append(this.children[h].split(d),0),this.children[h].merge(d,this.children[h].length,null,!1,0,0),h++);for(let f=h;f<this.children.length;f++)a.append(this.children[f],0);for(;h>0&&0==this.children[h-1].length;)this.children[--h].destroy();return this.children.length=h,this.markDirty(),this.length=l,a}transferDOM(l){!this.dom||(this.markDirty(),l.setDOM(this.dom),l.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(l){r7(this.attrs,l)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=l)}append(l,a){Lde(this,l,a)}addLineDeco(l){let a=l.spec.attributes,h=l.spec.class;a&&(this.attrs=i7(a,this.attrs||{})),h&&(this.attrs=i7({class:h},this.attrs||{}))}domAtPos(l){return Nde(this,l)}reuseDOM(l){"DIV"==l.nodeName&&(this.setDOM(l),this.dirty|=6)}sync(l){var a;this.dom?4&this.dirty&&(Sde(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(s7(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(l);let h=this.dom.lastChild;for(;h&&fs.get(h)instanceof Md;)h=h.lastChild;if(!(h&&this.length&&("BR"==h.nodeName||0!=(null===(a=fs.get(h))||void 0===a?void 0:a.isEditable)||Un.ios&&this.children.some(d=>d instanceof Mg)))){let d=document.createElement("BR");d.cmIgnore=!0,this.dom.appendChild(d)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let l=0;for(let a of this.children){if(!(a instanceof Mg)||/[^ -~]/.test(a.text))return null;let h=PS(a.dom);if(1!=h.length)return null;l+=h[0].width}return l?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:l/this.length}:null}coordsAt(l,a){return Bde(this,l,a)}become(l){return!1}get type(){return is.Text}static find(l,a){for(let h=0,d=0;h<l.children.length;h++){let f=l.children[h],p=d+f.length;if(p>=a){if(f instanceof Tl)return f;if(p>a)break}d=p+f.breakAfter}return null}}class j0 extends fs{constructor(l,a,h){super(),this.widget=l,this.length=a,this.type=h,this.breakAfter=0,this.prevWidget=null}merge(l,a,h,d,f,p){return!(h&&(!(h instanceof j0&&this.widget.compare(h.widget))||l>0&&f<=0||a<this.length&&p<=0)||(this.length=l+(h?h.length:0)+(this.length-a),0))}domAtPos(l){return 0==l?$a.before(this.dom):$a.after(this.dom,l==this.length)}split(l){let a=this.length-l;this.length=l;let h=new j0(this.widget,a,this.type);return h.breakAfter=this.breakAfter,h}get children(){return XU}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ir.empty}domBoundsAround(){return null}become(l){return l instanceof j0&&l.type==this.type&&l.widget.constructor==this.widget.constructor&&(l.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=l.widget,this.length=l.length,this.breakAfter=l.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(l){return this.widget.ignoreEvent(l)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class a7{constructor(l,a,h,d){this.doc=l,this.pos=a,this.end=h,this.disallowBlockEffectsFor=d,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=l.iter(),this.skip=a}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let l=this.content[this.content.length-1];return!(l.breakAfter||l instanceof j0&&l.type==is.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Tl),this.atCursorPos=!0),this.curLine}flushBuffer(l){this.pendingBuffer&&(this.curLine.append(_A(new v1(-1),l),l.length),this.pendingBuffer=0)}addBlockWidget(l){this.flushBuffer([]),this.curLine=null,this.content.push(l)}finish(l){l?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(l,a,h){for(;l>0;){if(this.textOff==this.text.length){let{value:f,lineBreak:p,done:g}=this.cursor.next(this.skip);if(this.skip=0,g)throw new Error("Ran out of text content when drawing inline views");if(p){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,l--;continue}this.text=f,this.textOff=0}let d=Math.min(this.text.length-this.textOff,l,512);this.flushBuffer(a.slice(0,h)),this.getLine().append(_A(new Mg(this.text.slice(this.textOff,this.textOff+d)),a),h),this.atCursorPos=!0,this.textOff+=d,l-=d,h=0}}span(l,a,h,d){this.buildText(a-l,h,d),this.pos=a,this.openStart<0&&(this.openStart=d)}point(l,a,h,d,f,p){if(this.disallowBlockEffectsFor[p]&&h instanceof Q0){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let g=a-l;if(h instanceof Q0)if(h.block){let{type:m}=h;m==is.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new j0(h.widget||new zde("div"),g,m))}else{let m=Eg.create(h.widget||new zde("span"),g,h.startSide),v=this.atCursorPos&&!m.isEditable&&f<=d.length&&(l<a||h.startSide>0),y=!m.isEditable&&(l<a||h.startSide<=0),_=this.getLine();2==this.pendingBuffer&&!v&&(this.pendingBuffer=0),this.flushBuffer(d),v&&(_.append(_A(new v1(1),d),f),f=d.length+Math.max(0,f-d.length)),_.append(_A(m,d),f),this.atCursorPos=y,this.pendingBuffer=y?l<a?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(h);g&&(this.textOff+g<=this.text.length?this.textOff+=g:(this.skip+=g-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=a),this.openStart<0&&(this.openStart=f)}static build(l,a,h,d,f){let p=new a7(l,a,h,f);return p.openEnd=Es.spans(d,a,h,p),p.openStart<0&&(p.openStart=p.openEnd),p.finish(p.openEnd),p}}function _A(c,l){for(let a of l)c=new Md(a,[c],c.length);return c}class zde extends Jf{constructor(l){super(),this.tag=l}eq(l){return l.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(l){return l.nodeName.toLowerCase()==this.tag}}const Ude=zn.define(),Hde=zn.define(),$de=zn.define(),Wde=zn.define(),l7=zn.define(),Gde=zn.define(),Qde=zn.define({combine:c=>c.some(l=>l)});class bA{constructor(l,a="nearest",h="nearest",d=5,f=5){this.range=l,this.y=a,this.x=h,this.yMargin=d,this.xMargin=f}map(l){return l.empty?this:new bA(this.range.map(l),this.y,this.x,this.yMargin,this.xMargin)}}const jde=Yi.define({map:(c,l)=>c.map(l)});function Vc(c,l,a){let h=c.facet(Wde);h.length?h[0](l):window.onerror?window.onerror(String(l),a,void 0,void 0,l):a?console.error(a+":",l):console.error(l)}const CA=zn.define({combine:c=>!c.length||c[0]});let bnt=0;const LS=zn.define();class io{constructor(l,a,h,d){this.id=l,this.create=a,this.domEventHandlers=h,this.extension=d(this)}static define(l,a){const{eventHandlers:h,provide:d,decorations:f}=a||{};return new io(bnt++,l,h,p=>{let g=[LS.of(p)];return f&&g.push(BS.of(m=>{let v=m.plugin(p);return v?f(v):Hn.none})),d&&g.push(d(p)),g})}static fromClass(l,a){return io.define(h=>new l(h),a)}}class c7{constructor(l){this.spec=l,this.mustUpdate=null,this.value=null}update(l){if(this.value){if(this.mustUpdate){let a=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(a)}catch(h){if(Vc(a.state,h,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(d){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(l)}catch(a){Vc(l.state,a,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(l){var a;if(null!==(a=this.value)&&void 0!==a&&a.destroy)try{this.value.destroy()}catch(h){Vc(l.state,h,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const qde=zn.define(),u7=zn.define(),BS=zn.define(),Zde=zn.define(),Xde=zn.define(),VS=zn.define();class Ed{constructor(l,a,h,d){this.fromA=l,this.toA=a,this.fromB=h,this.toB=d}join(l){return new Ed(Math.min(this.fromA,l.fromA),Math.max(this.toA,l.toA),Math.min(this.fromB,l.fromB),Math.max(this.toB,l.toB))}addToSet(l){let a=l.length,h=this;for(;a>0;a--){let d=l[a-1];if(!(d.fromA>h.toA)){if(d.toA<h.fromA)break;h=h.join(d),l.splice(a-1,1)}}return l.splice(a,0,h),l}static extendWithRanges(l,a){if(0==a.length)return l;let h=[];for(let d=0,f=0,p=0,g=0;;d++){let m=d==l.length?null:l[d],v=p-g,y=m?m.fromB:1e9;for(;f<a.length&&a[f]<y;){let b=a[f+1],C=Math.max(g,a[f]),x=Math.min(y,b);if(C<=x&&new Ed(C+v,x+v,C,x).addToSet(h),b>y)break;f+=2}if(!m)return h;new Ed(m.fromA,m.toA,m.fromB,m.toB).addToSet(h),p=m.toA,g=m.toB}}}class xA{constructor(l,a,h){this.view=l,this.state=a,this.transactions=h,this.flags=0,this.startState=l.state,this.changes=Vo.empty(this.startState.doc.length);for(let p of h)this.changes=this.changes.compose(p.changes);let d=[];this.changes.iterChangedRanges((p,g,m,v)=>d.push(new Ed(p,g,m,v))),this.changedRanges=d;let f=l.hasFocus;f!=l.inputState.notifiedFocused&&(l.inputState.notifiedFocused=f,this.flags|=1)}static create(l,a,h){return new xA(l,a,h)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(l=>l.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var As=function(c){return c[c.LTR=0]="LTR",c[c.RTL=1]="RTL",c}(As||(As={}));const h7=As.LTR,Cnt=As.RTL;function Yde(c){let l=[];for(let a=0;a<c.length;a++)l.push(1<<+c[a]);return l}const xnt=Yde("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),wnt=Yde("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),d7=Object.create(null),Ad=[];for(let c of["()","[]","{}"]){let l=c.charCodeAt(0),a=c.charCodeAt(1);d7[l]=a,d7[a]=-l}function Snt(c){return c<=247?xnt[c]:1424<=c&&c<=1524?2:1536<=c&&c<=1785?wnt[c-1536]:1774<=c&&c<=2220?4:8192<=c&&c<=8203?256:64336<=c&&c<=65023?4:8204==c?256:1}const Tnt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class y1{constructor(l,a,h){this.from=l,this.to=a,this.level=h}get dir(){return this.level%2?Cnt:h7}side(l,a){return this.dir==a==l?this.to:this.from}static find(l,a,h,d){let f=-1;for(let p=0;p<l.length;p++){let g=l[p];if(g.from<=a&&g.to>=a){if(g.level==h)return p;(f<0||(0!=d?d<0?g.from<a:g.to>a:l[f].level>g.level))&&(f=p)}}if(f<0)throw new RangeError("Index out of range");return f}}const Is=[];function Jde(c){return[new y1(0,c,0)]}let efe="";function tfe(c,l,a,h,d){var f;let p=h.head-c.from,g=-1;if(0==p){if(!d||!c.length)return null;l[0].level!=a&&(p=l[0].side(!1,a),g=0)}else if(p==c.length){if(d)return null;let b=l[l.length-1];b.level!=a&&(p=b.side(!0,a),g=l.length-1)}g<0&&(g=y1.find(l,p,null!==(f=h.bidiLevel)&&void 0!==f?f:-1,h.assoc));let m=l[g];p==m.side(d,a)&&(m=l[g+=d?1:-1],p=m.side(!d,a));let v=d==(m.dir==a),y=wl(c.text,p,v);if(efe=c.text.slice(Math.min(p,y),Math.max(p,y)),y!=m.side(d,a))return At.cursor(y+c.from,v?-1:1,m.level);let _=g==(d?l.length-1:0)?null:l[g+(d?1:-1)];return _||m.level==a?_&&_.level<m.level?At.cursor(_.side(!d,a)+c.from,d?1:-1,_.level):At.cursor(y+c.from,d?-1:1,m.level):At.cursor(d?c.to:c.from,d?-1:1,a)}class nfe{constructor(l,a){this.points=l,this.text="",this.lineSeparator=a.facet(Sl.lineSeparator)}append(l){this.text+=l}lineBreak(){this.text+="\uffff"}readRange(l,a){if(!l)return this;let h=l.parentNode;for(let d=l;;){this.findPointBefore(h,d),this.readNode(d);let f=d.nextSibling;if(f==a)break;let p=fs.get(d),g=fs.get(f);(p&&g?p.breakAfter:(p?p.breakAfter:ife(d))||ife(f)&&("BR"!=d.nodeName||d.cmIgnore))&&this.lineBreak(),d=f}return this.findPointBefore(h,a),this}readTextNode(l){let a=l.nodeValue;for(let h of this.points)h.node==l&&(h.pos=this.text.length+Math.min(h.offset,a.length));for(let h=0,d=this.lineSeparator?null:/\r\n?|\n/g;;){let g,f=-1,p=1;if(this.lineSeparator?(f=a.indexOf(this.lineSeparator,h),p=this.lineSeparator.length):(g=d.exec(a))&&(f=g.index,p=g[0].length),this.append(a.slice(h,f<0?a.length:f)),f<0)break;if(this.lineBreak(),p>1)for(let m of this.points)m.node==l&&m.pos>this.text.length&&(m.pos-=p-1);h=f+p}}readNode(l){if(l.cmIgnore)return;let a=fs.get(l),h=a&&a.overrideDOMText;if(null!=h){this.findPointInside(l,h.length);for(let d=h.iter();!d.next().done;)d.lineBreak?this.lineBreak():this.append(d.value)}else 3==l.nodeType?this.readTextNode(l):"BR"==l.nodeName?l.nextSibling&&this.lineBreak():1==l.nodeType&&this.readRange(l.firstChild,null)}findPointBefore(l,a){for(let h of this.points)h.node==l&&l.childNodes[h.offset]==a&&(h.pos=this.text.length)}findPointInside(l,a){for(let h of this.points)(3==l.nodeType?h.node==l:l.contains(h.node))&&(h.pos=this.text.length+Math.min(a,h.offset))}}function ife(c){return 1==c.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(c.nodeName)}class rfe{constructor(l,a){this.node=l,this.offset=a,this.pos=-1}}class sfe extends fs{constructor(l){super(),this.view=l,this.compositionDeco=Hn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(l.contentDOM),this.children=[new Tl],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ed(0,0,0,l.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(l){let a=l.changedRanges;this.minWidth>0&&a.length&&(a.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=l.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=l.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Hn.none:(l.transactions.length||this.dirty)&&(this.compositionDeco=function Dnt(c,l){let a=afe(c);if(!a)return Hn.none;let{from:h,to:d,node:f,text:p}=a,g=l.mapPos(h,1),m=Math.max(g,l.mapPos(d,-1)),{state:v}=c,y=3==f.nodeType?f.nodeValue:new nfe([],v).readRange(f.firstChild,null).text;if(m-g<y.length)if(v.doc.sliceString(g,Math.min(v.doc.length,g+y.length),"\uffff")==y)m=g+y.length;else{if(v.doc.sliceString(Math.max(0,m-y.length),m,"\uffff")!=y)return Hn.none;g=m-y.length}else if(v.doc.sliceString(g,m,"\uffff")!=y)return Hn.none;let _=fs.get(f);return _ instanceof Rde?_=_.widget.topView:_&&(_.parent=null),Hn.set(Hn.replace({widget:new knt(f,p,_),inclusive:!0}).range(g,m))}(this.view,l.changes)),(Un.ie||Un.chrome)&&!this.compositionDeco.size&&l&&l.state.doc.lines!=l.startState.doc.lines&&(this.forceSelection=!0);let f=function Ant(c,l,a){let h=new Ent;return Es.compare(c,l,a,h),h.changes}(this.decorations,this.updateDeco(),l.changes);return a=Ed.extendWithRanges(a,f),(0!=this.dirty||0!=a.length)&&(this.updateInner(a,l.startState.doc.length),l.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(l,a){this.view.viewState.mustMeasureContent=!0,this.updateChildren(l,a);let{observer:h}=this.view;h.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let f=Un.chrome||Un.ios?{node:h.selectionRange.focusNode,written:!1}:void 0;this.sync(f),this.dirty=0,f&&(f.written||h.selectionRange.focusNode!=f.node)&&(this.forceSelection=!0),this.dom.style.height=""});let d=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let f of this.children)f instanceof j0&&f.widget instanceof ofe&&d.push(f.dom);h.updateGaps(d)}updateChildren(l,a){let h=this.childCursor(a);for(let d=l.length-1;;d--){let f=d>=0?l[d]:null;if(!f)break;let{fromA:p,toA:g,fromB:m,toB:v}=f,{content:y,breakAtStart:_,openStart:b,openEnd:C}=a7.build(this.view.state.doc,m,v,this.decorations,this.dynamicDecorationMap),{i:x,off:S}=h.findPos(g,1),{i:w,off:T}=h.findPos(p,-1);Dde(this,w,T,x,S,y,_,b,C)}}updateSelection(l=!1,a=!1){if((l||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!a&&!this.mayControlSelection())return;let h=this.forceSelection;this.forceSelection=!1;let d=this.view.state.selection.main,f=this.domAtPos(d.anchor),p=d.empty?f:this.domAtPos(d.head);if(Un.gecko&&d.empty&&function Ont(c){return 1==c.node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)}(f)){let m=document.createTextNode("");this.view.observer.ignore(()=>f.node.insertBefore(m,f.node.childNodes[f.offset]||null)),f=p=new $a(m,0),h=!0}let g=this.view.observer.selectionRange;(h||!g.focusNode||!pA(f.node,f.offset,g.anchorNode,g.anchorOffset)||!pA(p.node,p.offset,g.focusNode,g.focusOffset))&&(this.view.observer.ignore(()=>{Un.android&&Un.chrome&&this.dom.contains(g.focusNode)&&function Int(c,l){for(let a=c;a&&a!=l;a=a.assignedSlot||a.parentNode)if(1==a.nodeType&&"false"==a.contentEditable)return!0;return!1}(g.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=dA(this.view.root);if(m)if(d.empty){if(Un.gecko){let v=function Mnt(c,l){return 1!=c.nodeType?0:(l&&"false"==c.childNodes[l-1].contentEditable?1:0)|(l<c.childNodes.length&&"false"==c.childNodes[l].contentEditable?2:0)}(f.node,f.offset);if(v&&3!=v){let y=lfe(f.node,f.offset,1==v?1:-1);y&&(f=new $a(y,1==v?0:y.nodeValue.length))}}m.collapse(f.node,f.offset),null!=d.bidiLevel&&null!=g.cursorBidiLevel&&(g.cursorBidiLevel=d.bidiLevel)}else if(m.extend){m.collapse(f.node,f.offset);try{m.extend(p.node,p.offset)}catch(v){}}else{let v=document.createRange();d.anchor>d.head&&([f,p]=[p,f]),v.setEnd(p.node,p.offset),v.setStart(f.node,f.offset),m.removeAllRanges(),m.addRange(v)}}),this.view.observer.setSelectionRange(f,p)),this.impreciseAnchor=f.precise?null:new $a(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new $a(g.focusNode,g.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let l=this.view.state.selection.main,a=dA(this.view.root);if(!(a&&l.empty&&l.assoc&&a.modify))return;let h=Tl.find(this,l.head);if(!h)return;let d=h.posAtStart;if(l.head==d||l.head==d+h.length)return;let f=this.coordsAt(l.head,-1),p=this.coordsAt(l.head,1);if(!f||!p||f.bottom>p.top)return;let g=this.domAtPos(l.head+l.assoc);a.collapse(g.node,g.offset),a.modify("move",l.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let l=this.view.root.activeElement;return l==this.dom||fA(this.dom,this.view.observer.selectionRange)&&!(l&&this.dom.contains(l))}nearest(l){for(let a=l;a;){let h=fs.get(a);if(h&&h.rootView==this)return h;a=a.parentNode}return null}posFromDOM(l,a){let h=this.nearest(l);if(!h)throw new RangeError("Trying to find position for a DOM position outside of the document");return h.localPosFromDOM(l,a)+h.posAtStart}domAtPos(l){let{i:a,off:h}=this.childCursor().findPos(l,-1);for(;a<this.children.length-1;){let d=this.children[a];if(h<d.length||d instanceof Tl)break;a++,h=0}return this.children[a].domAtPos(h)}coordsAt(l,a){for(let h=this.length,d=this.children.length-1;;d--){let f=this.children[d],p=h-f.breakAfter-f.length;if(l>p||l==p&&f.type!=is.WidgetBefore&&f.type!=is.WidgetAfter&&(!d||2==a||this.children[d-1].breakAfter||this.children[d-1].type==is.WidgetBefore&&a>-2))return f.coordsAt(l-p,a);h=p}}measureVisibleLineHeights(l){let a=[],{from:h,to:d}=l,f=this.view.contentDOM.clientWidth,p=f>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,g=-1,m=this.view.textDirection==As.LTR;for(let v=0,y=0;y<this.children.length;y++){let _=this.children[y],b=v+_.length;if(b>d)break;if(v>=h){let C=_.dom.getBoundingClientRect();if(a.push(C.height),p){let x=_.dom.lastChild,S=x?PS(x):[];if(S.length){let w=S[S.length-1],T=m?w.right-C.left:C.right-w.left;T>g&&(g=T,this.minWidth=f,this.minWidthFrom=v,this.minWidthTo=b)}}}v=b+_.breakAfter}return a}textDirectionAt(l){let{i:a}=this.childPos(l,1);return"rtl"==getComputedStyle(this.children[a].dom).direction?As.RTL:As.LTR}measureTextSize(){for(let d of this.children)if(d instanceof Tl){let f=d.measureTextSize();if(f)return f}let a,h,l=document.createElement("div");return l.className="cm-line",l.style.width="99999px",l.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(l);let d=PS(l.firstChild)[0];a=l.getBoundingClientRect().height,h=d?d.width/27:7,l.remove()}),{lineHeight:a,charWidth:h}}childCursor(l=this.length){let a=this.children.length;return a&&(l-=this.children[--a].length),new Ode(this.children,l,a)}computeBlockGapDeco(){let l=[],a=this.view.viewState;for(let h=0,d=0;;d++){let f=d==a.viewports.length?null:a.viewports[d],p=f?f.from-1:this.length;if(p>h){let g=a.lineBlockAt(p).bottom-a.lineBlockAt(h).top;l.push(Hn.replace({widget:new ofe(g),block:!0,inclusive:!0,isBlockGap:!0}).range(h,p))}if(!f)break;h=f.to+1}return Hn.set(l)}updateDeco(){let l=this.view.state.facet(BS).map((a,h)=>(this.dynamicDecorationMap[h]="function"==typeof a)?a(this.view):a);for(let a=l.length;a<l.length+3;a++)this.dynamicDecorationMap[a]=!1;return this.decorations=[...l,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(l){let d,{range:a}=l,h=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1);if(!h)return;!a.empty&&(d=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(h={left:Math.min(h.left,d.left),top:Math.min(h.top,d.top),right:Math.max(h.right,d.right),bottom:Math.max(h.bottom,d.bottom)});let f=0,p=0,g=0,m=0;for(let y of this.view.state.facet(Xde).map(_=>_(this.view)))if(y){let{left:_,right:b,top:C,bottom:x}=y;null!=_&&(f=Math.max(f,_)),null!=b&&(p=Math.max(p,b)),null!=C&&(g=Math.max(g,C)),null!=x&&(m=Math.max(m,x))}!function fnt(c,l,a,h,d,f,p,g){let m=c.ownerDocument,v=m.defaultView||window;for(let y=c;y;)if(1==y.nodeType){let _,b=y==m.body;if(b)_=dnt(v);else{if(y.scrollHeight<=y.clientHeight&&y.scrollWidth<=y.clientWidth){y=y.assignedSlot||y.parentNode;continue}let S=y.getBoundingClientRect();_={left:S.left,right:S.left+y.clientWidth,top:S.top,bottom:S.top+y.clientHeight}}let C=0,x=0;if("nearest"==d)l.top<_.top?(x=-(_.top-l.top+p),a>0&&l.bottom>_.bottom+x&&(x=l.bottom-_.bottom+x+p)):l.bottom>_.bottom&&(x=l.bottom-_.bottom+p,a<0&&l.top-x<_.top&&(x=-(_.top+x-l.top+p)));else{let S=l.bottom-l.top,w=_.bottom-_.top;x=("center"==d&&S<=w?l.top+S/2-w/2:"start"==d||"center"==d&&a<0?l.top-p:l.bottom-w+p)-_.top}if("nearest"==h?l.left<_.left?(C=-(_.left-l.left+f),a>0&&l.right>_.right+C&&(C=l.right-_.right+C+f)):l.right>_.right&&(C=l.right-_.right+f,a<0&&l.left<_.left+C&&(C=-(_.left+C-l.left+f))):C=("center"==h?l.left+(l.right-l.left)/2-(_.right-_.left)/2:"start"==h==g?l.left-f:l.right-(_.right-_.left)+f)-_.left,C||x)if(b)v.scrollBy(C,x);else{let S=0,w=0;if(x){let T=y.scrollTop;y.scrollTop+=x,w=y.scrollTop-T}if(C){let T=y.scrollLeft;y.scrollLeft+=C,S=y.scrollLeft-T}l={left:l.left-S,top:l.top-w,right:l.right-S,bottom:l.bottom-w},S&&Math.abs(S-C)<1&&(h="nearest"),w&&Math.abs(w-x)<1&&(d="nearest")}if(b)break;y=y.assignedSlot||y.parentNode}else{if(11!=y.nodeType)break;y=y.host}}(this.view.scrollDOM,{left:h.left-f,top:h.top-g,right:h.right+p,bottom:h.bottom+m},a.head<a.anchor?-1:1,l.x,l.y,l.xMargin,l.yMargin,this.view.textDirection==As.LTR)}}class ofe extends Jf{constructor(l){super(),this.height=l}toDOM(){let l=document.createElement("div");return this.updateDOM(l),l}eq(l){return l.height==this.height}updateDOM(l){return l.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function afe(c){let l=c.observer.selectionRange,a=l.focusNode&&lfe(l.focusNode,l.focusOffset,0);if(!a)return null;let h=c.docView.nearest(a);if(!h)return null;if(h instanceof Tl){let d=a;for(;d.parentNode!=h.dom;)d=d.parentNode;let f=d.previousSibling;for(;f&&!fs.get(f);)f=f.previousSibling;let p=f?fs.get(f).posAtEnd:h.posAtStart;return{from:p,to:p,node:d,text:a}}{for(;;){let{parent:f}=h;if(!f)return null;if(f instanceof Tl)break;h=f}let d=h.posAtStart;return{from:d,to:d+h.length,node:h.dom,text:a}}}class knt extends Jf{constructor(l,a,h){super(),this.top=l,this.text=a,this.topView=h}eq(l){return this.top==l.top&&this.text==l.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Rde}}function lfe(c,l,a){for(;;){if(3==c.nodeType)return c;if(1==c.nodeType&&l>0&&a<=0)l=RS(c=c.childNodes[l-1]);else{if(!(1==c.nodeType&&l<c.childNodes.length&&a>=0))return null;c=c.childNodes[l],l=0}}}class Ent{constructor(){this.changes=[]}compareRange(l,a){o7(l,a,this.changes)}comparePoint(l,a){o7(l,a,this.changes)}}function Rnt(c,l){return l.left>c?l.left-c:Math.max(0,c-l.right)}function Fnt(c,l){return l.top>c?l.top-c:Math.max(0,c-l.bottom)}function f7(c,l){return c.top<l.bottom-1&&c.bottom>l.top+1}function cfe(c,l){return l<c.top?{top:l,left:c.left,right:c.right,bottom:c.bottom}:c}function ufe(c,l){return l>c.bottom?{top:c.top,left:c.left,right:c.right,bottom:l}:c}function p7(c,l,a){let h,d,f,p,m,v,y,_,g=!1;for(let x=c.firstChild;x;x=x.nextSibling){let S=PS(x);for(let w=0;w<S.length;w++){let T=S[w];d&&f7(d,T)&&(T=cfe(ufe(T,d.bottom),d.top));let O=Rnt(l,T),k=Fnt(a,T);if(0==O&&0==k)return 3==x.nodeType?hfe(x,l,a):p7(x,l,a);(!h||p>k||p==k&&f>O)&&(h=x,d=T,f=O,p=k,g=!O||(O>0?w<S.length-1:w>0)),0==O?a>T.bottom&&(!y||y.bottom<T.bottom)?(m=x,y=T):a<T.top&&(!_||_.top>T.top)&&(v=x,_=T):y&&f7(y,T)?y=ufe(y,T.bottom):_&&f7(_,T)&&(_=cfe(_,T.top))}}if(y&&y.bottom>=a?(h=m,d=y):_&&_.top<=a&&(h=v,d=_),!h)return{node:c,offset:0};let b=Math.max(d.left,Math.min(d.right,l));return 3==h.nodeType?hfe(h,b,a):g&&"false"!=h.contentEditable?p7(h,b,a):{node:c,offset:Array.prototype.indexOf.call(c.childNodes,h)+(l>=(d.left+d.right)/2?1:0)}}function hfe(c,l,a){let h=c.nodeValue.length,d=-1,f=1e9,p=0;for(let g=0;g<h;g++){let m=m1(c,g,g+1).getClientRects();for(let v=0;v<m.length;v++){let y=m[v];if(y.top==y.bottom)continue;p||(p=l-y.left);let _=(y.top>a?y.top-a:a-y.bottom)-1;if(y.left-1<=l&&y.right+1>=l&&_<f){let b=l>=(y.left+y.right)/2,C=b;if((Un.chrome||Un.gecko)&&m1(c,g).getBoundingClientRect().left==y.right&&(C=!b),_<=0)return{node:c,offset:g+(C?1:0)};d=g+(C?1:0),f=_}}}return{node:c,offset:d>-1?d:p>0?c.nodeValue.length:0}}function dfe(c,{x:l,y:a},h,d=-1){var f;let m,p=c.contentDOM.getBoundingClientRect(),g=p.top+c.viewState.paddingTop,{docHeight:v}=c.viewState,y=a-g;if(y<0)return 0;if(y>v)return c.state.doc.length;for(let T=c.defaultLineHeight/2,O=!1;m=c.elementAtHeight(y),m.type!=is.Text;)for(;y=d>0?m.bottom+T:m.top-T,!(y>=0&&y<=v);){if(O)return h?null:0;O=!0,d=-d}a=g+y;let _=m.from;if(_<c.viewport.from)return 0==c.viewport.from?0:h?null:ffe(c,p,m,l,a);if(_>c.viewport.to)return c.viewport.to==c.state.doc.length?c.state.doc.length:h?null:ffe(c,p,m,l,a);let b=c.dom.ownerDocument,C=c.root.elementFromPoint?c.root:b,x=C.elementFromPoint(l,a);x&&!c.contentDOM.contains(x)&&(x=null),x||(l=Math.max(p.left+1,Math.min(p.right-1,l)),x=C.elementFromPoint(l,a),x&&!c.contentDOM.contains(x)&&(x=null));let S,w=-1;if(x&&0!=(null===(f=c.docView.nearest(x))||void 0===f?void 0:f.isEditable))if(b.caretPositionFromPoint){let T=b.caretPositionFromPoint(l,a);T&&({offsetNode:S,offset:w}=T)}else if(b.caretRangeFromPoint){let T=b.caretRangeFromPoint(l,a);T&&(({startContainer:S,startOffset:w}=T),(!c.contentDOM.contains(S)||Un.safari&&function Nnt(c,l,a){let h;if(3!=c.nodeType||l!=(h=c.nodeValue.length))return!1;for(let d=c.nextSibling;d;d=d.nextSibling)if(1!=d.nodeType||"BR"!=d.nodeName)return!1;return m1(c,h-1,h).getBoundingClientRect().left>a}(S,w,l)||Un.chrome&&function Lnt(c,l,a){if(0!=l)return!1;for(let d=c;;){let f=d.parentNode;if(!f||1!=f.nodeType||f.firstChild!=d)return!1;if(f.classList.contains("cm-line"))break;d=f}return a-(1==c.nodeType?c.getBoundingClientRect():m1(c,0,Math.max(c.nodeValue.length,1)).getBoundingClientRect()).left>5}(S,w,l))&&(S=void 0))}if(!S||!c.docView.dom.contains(S)){let T=Tl.find(c.docView,_);if(!T)return y>m.top+m.height/2?m.to:m.from;({node:S,offset:w}=p7(T.dom,l,a))}return c.docView.posFromDOM(S,w)}function ffe(c,l,a,h,d){let f=Math.round((h-l.left)*c.defaultCharacterWidth);c.lineWrapping&&a.height>1.5*c.defaultLineHeight&&(f+=Math.floor((d-a.top)/c.defaultLineHeight)*c.viewState.heightOracle.lineLength);let p=c.state.sliceDoc(a.from,a.to);return a.from+QU(p,f,c.state.tabSize)}function pfe(c,l,a,h){let d=c.state.doc.lineAt(l.head),f=c.bidiSpans(d),p=c.textDirectionAt(d.from);for(let g=l,m=null;;){let v=tfe(d,f,p,g,a),y=efe;if(!v){if(d.number==(a?c.state.doc.lines:1))return g;y="\n",d=c.state.doc.line(d.number+(a?1:-1)),f=c.bidiSpans(d),v=At.cursor(a?d.from:d.to)}if(m){if(!m(y))return g}else{if(!h)return v;m=h(y)}g=v}}function g7(c,l,a){let h=c.state.facet(Zde).map(d=>d(c));for(;;){let d=!1;for(let f of h)f.between(a.from-1,a.from+1,(p,g,m)=>{a.from>p&&a.from<g&&(a=l.head>a.from?At.cursor(p,1):At.cursor(g,-1),d=!0)});if(!d)return a}}class Unt{constructor(l){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let a in ta){let h=ta[a];l.contentDOM.addEventListener(a,d=>{!vfe(l,d)||this.ignoreDuringComposition(d)||"keydown"==a&&this.keydown(l,d)||(this.mustFlushObserver(d)&&l.observer.forceFlush(),this.runCustomHandlers(a,l,d)?d.preventDefault():h(l,d))},m7[a]),this.registeredEvents.push(a)}Un.chrome&&102==Un.chrome_version&&l.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?l.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,l.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=l.hasFocus,Un.safari&&l.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(l){this.lastSelectionOrigin=l,this.lastSelectionTime=Date.now()}ensureHandlers(l,a){var h;let d;this.customHandlers=[];for(let f of a)if(d=null===(h=f.update(l).spec)||void 0===h?void 0:h.domEventHandlers){this.customHandlers.push({plugin:f.value,handlers:d});for(let p in d)this.registeredEvents.indexOf(p)<0&&"scroll"!=p&&(this.registeredEvents.push(p),l.contentDOM.addEventListener(p,g=>{!vfe(l,g)||this.runCustomHandlers(p,l,g)&&g.preventDefault()}))}}runCustomHandlers(l,a,h){for(let d of this.customHandlers){let f=d.handlers[l];if(f)try{if(f.call(d.plugin,h,a)||h.defaultPrevented)return!0}catch(p){Vc(a.state,p)}}return!1}runScrollHandlers(l,a){this.lastScrollTop=l.scrollDOM.scrollTop,this.lastScrollLeft=l.scrollDOM.scrollLeft;for(let h of this.customHandlers){let d=h.handlers.scroll;if(d)try{d.call(h.plugin,a,l)}catch(f){Vc(l.state,f)}}}keydown(l,a){if(this.lastKeyCode=a.keyCode,this.lastKeyTime=Date.now(),9==a.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Un.android&&Un.chrome&&!a.synthetic&&(13==a.keyCode||8==a.keyCode))return l.observer.delayAndroidKey(a.key,a.keyCode),!0;let h;return!(!Un.ios||a.synthetic||a.altKey||a.metaKey||!((h=gfe.find(d=>d.keyCode==a.keyCode))&&!a.ctrlKey||Hnt.indexOf(a.key)>-1&&a.ctrlKey&&!a.shiftKey)||(this.pendingIOSKey=h||a,setTimeout(()=>this.flushIOSKey(l),250),0))}flushIOSKey(l){let a=this.pendingIOSKey;return!!a&&(this.pendingIOSKey=void 0,FS(l.contentDOM,a.key,a.keyCode))}ignoreDuringComposition(l){return!!/^key/.test(l.type)&&(this.composing>0||!!(Un.safari&&!Un.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(l){return"keydown"==l.type&&229!=l.keyCode}startMouseSelection(l){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=l}update(l){this.mouseSelection&&this.mouseSelection.update(l),l.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const gfe=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Hnt="dthko",mfe=[16,17,18,20,91,92,224,225];class $nt{constructor(l,a,h,d){this.view=l,this.style=h,this.mustSelect=d,this.lastEvent=a;let f=l.contentDOM.ownerDocument;f.addEventListener("mousemove",this.move=this.move.bind(this)),f.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=a.shiftKey,this.multiple=l.state.facet(Sl.allowMultipleSelections)&&function Wnt(c,l){let a=c.state.facet(Ude);return a.length?a[0](l):Un.mac?l.metaKey:l.ctrlKey}(l,a),this.dragMove=function Gnt(c,l){let a=c.state.facet(Hde);return a.length?a[0](l):Un.mac?!l.altKey:!l.ctrlKey}(l,a),this.dragging=!(!function Qnt(c,l){let{main:a}=c.state.selection;if(a.empty)return!1;let h=dA(c.root);if(!h||0==h.rangeCount)return!0;let d=h.getRangeAt(0).getClientRects();for(let f=0;f<d.length;f++){let p=d[f];if(p.left<=l.clientX&&p.right>=l.clientX&&p.top<=l.clientY&&p.bottom>=l.clientY)return!0}return!1}(l,a)||1!=Dfe(a))&&null,!1===this.dragging&&(a.preventDefault(),this.select(a))}move(l){if(0==l.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=l)}up(l){null==this.dragging&&this.select(this.lastEvent),this.dragging||l.preventDefault(),this.destroy()}destroy(){let l=this.view.contentDOM.ownerDocument;l.removeEventListener("mousemove",this.move),l.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(l){let a=this.style.get(l,this.extend,this.multiple);(this.mustSelect||!a.eq(this.view.state.selection)||a.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:a,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(l){l.docChanged&&this.dragging&&(this.dragging=this.dragging.map(l.changes)),this.style.update(l)&&setTimeout(()=>this.select(this.lastEvent),20)}}function vfe(c,l){if(!l.bubbles)return!0;if(l.defaultPrevented)return!1;for(let h,a=l.target;a!=c.contentDOM;a=a.parentNode)if(!a||11==a.nodeType||(h=fs.get(a))&&h.ignoreEvent(l))return!1;return!0}const ta=Object.create(null),m7=Object.create(null),yfe=Un.ie&&Un.ie_version<15||Un.ios&&Un.webkit_version<604;function _fe(c,l){let h,{state:a}=c,d=1,f=a.toText(l),p=f.lines==a.selection.ranges.length;if(null!=v7&&a.selection.ranges.every(m=>m.empty)&&v7==f.toString()){let m=-1;h=a.changeByRange(v=>{let y=a.doc.lineAt(v.from);if(y.from==m)return{range:v};m=y.from;let _=a.toText((p?f.line(d++).text:l)+a.lineBreak);return{changes:{from:y.from,insert:_},range:At.cursor(v.from+_.length)}})}else h=p?a.changeByRange(m=>{let v=f.line(d++);return{changes:{from:m.from,to:m.to,insert:v.text},range:At.cursor(m.from+v.length)}}):a.replaceSelection(f);c.dispatch(h,{userEvent:"input.paste",scrollIntoView:!0})}function bfe(c,l,a,h){if(1==h)return At.cursor(l,a);if(2==h)return function Pnt(c,l,a=1){let h=c.charCategorizer(l),d=c.doc.lineAt(l),f=l-d.from;if(0==d.length)return At.cursor(l);0==f?a=1:f==d.length&&(a=-1);let p=f,g=f;a<0?p=wl(d.text,f,!1):g=wl(d.text,f);let m=h(d.text.slice(p,g));for(;p>0;){let v=wl(d.text,p,!1);if(h(d.text.slice(v,p))!=m)break;p=v}for(;g<d.length;){let v=wl(d.text,g);if(h(d.text.slice(g,v))!=m)break;g=v}return At.range(p+d.from,g+d.from)}(c.state,l,a);{let d=Tl.find(c.docView,l),f=c.state.doc.lineAt(d?d.posAtEnd:l),g=d?d.posAtEnd:f.to;return g<c.state.doc.length&&g==f.to&&g++,At.range(d?d.posAtStart:f.from,g)}}ta.keydown=(c,l)=>{c.inputState.setSelectionOrigin("select"),27==l.keyCode?c.inputState.lastEscPress=Date.now():mfe.indexOf(l.keyCode)<0&&(c.inputState.lastEscPress=0)},ta.touchstart=(c,l)=>{c.inputState.lastTouchTime=Date.now(),c.inputState.setSelectionOrigin("select.pointer")},ta.touchmove=c=>{c.inputState.setSelectionOrigin("select.pointer")},m7.touchstart=m7.touchmove={passive:!0},ta.mousedown=(c,l)=>{if(c.observer.flush(),c.inputState.lastTouchTime>Date.now()-2e3)return;let a=null;for(let h of c.state.facet($de))if(a=h(c,l),a)break;if(!a&&0==l.button&&(a=function Xnt(c,l){let a=wfe(c,l),h=Dfe(l),d=c.state.selection,f=a,p=l;return{update(g){g.docChanged&&(a.pos=g.changes.mapPos(a.pos),d=d.map(g.changes),p=null)},get(g,m,v){let y;p&&g.clientX==p.clientX&&g.clientY==p.clientY?y=f:(y=f=wfe(c,g),p=g);let _=bfe(c,y.pos,y.bias,h);if(a.pos!=y.pos&&!m){let b=bfe(c,a.pos,a.bias,h),C=Math.min(b.from,_.from),x=Math.max(b.to,_.to);_=C<_.from?At.range(C,x):At.range(x,C)}return m?d.replaceRange(d.main.extend(_.from,_.to)):v&&d.ranges.length>1&&d.ranges.some(b=>b.eq(_))?function Ynt(c,l){for(let a=0;;a++)if(c.ranges[a].eq(l))return At.create(c.ranges.slice(0,a).concat(c.ranges.slice(a+1)),c.mainIndex==a?0:c.mainIndex-(c.mainIndex>a?1:0))}(d,_):v?d.addRange(_):At.create([_])}}}(c,l)),a){let h=c.root.activeElement!=c.contentDOM;h&&c.observer.ignore(()=>xde(c.contentDOM)),c.inputState.startMouseSelection(new $nt(c,l,a,h))}};let Cfe=(c,l)=>c>=l.top&&c<=l.bottom,xfe=(c,l,a)=>Cfe(l,a)&&c>=a.left&&c<=a.right;function qnt(c,l,a,h){let d=Tl.find(c.docView,l);if(!d)return 1;let f=l-d.posAtStart;if(0==f)return 1;if(f==d.length)return-1;let p=d.coordsAt(f,-1);if(p&&xfe(a,h,p))return-1;let g=d.coordsAt(f,1);return g&&xfe(a,h,g)?1:p&&Cfe(h,p)?-1:1}function wfe(c,l){let a=c.posAtCoords({x:l.clientX,y:l.clientY},!1);return{pos:a,bias:qnt(c,a,l.clientX,l.clientY)}}const Znt=Un.ie&&Un.ie_version<=11;let Sfe=null,Tfe=0,Ofe=0;function Dfe(c){if(!Znt)return c.detail;let l=Sfe,a=Ofe;return Sfe=c,Ofe=Date.now(),Tfe=!l||a>Date.now()-400&&Math.abs(l.clientX-c.clientX)<2&&Math.abs(l.clientY-c.clientY)<2?(Tfe+1)%3:1}function kfe(c,l,a,h){if(!a)return;let d=c.posAtCoords({x:l.clientX,y:l.clientY},!1);l.preventDefault();let{mouseSelection:f}=c.inputState,p=h&&f&&f.dragging&&f.dragMove?{from:f.dragging.from,to:f.dragging.to}:null,g={from:d,insert:a},m=c.state.changes(p?[p,g]:g);c.focus(),c.dispatch({changes:m,selection:{anchor:m.mapPos(d,-1),head:m.mapPos(d,1)},userEvent:p?"move.drop":"input.drop"})}ta.dragstart=(c,l)=>{let{selection:{main:a}}=c.state,{mouseSelection:h}=c.inputState;h&&(h.dragging=a),l.dataTransfer&&(l.dataTransfer.setData("Text",c.state.sliceDoc(a.from,a.to)),l.dataTransfer.effectAllowed="copyMove")},ta.drop=(c,l)=>{if(!l.dataTransfer)return;if(c.state.readOnly)return l.preventDefault();let a=l.dataTransfer.files;if(a&&a.length){l.preventDefault();let h=Array(a.length),d=0,f=()=>{++d==a.length&&kfe(c,l,h.filter(p=>null!=p).join(c.state.lineBreak),!1)};for(let p=0;p<a.length;p++){let g=new FileReader;g.onerror=f,g.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(g.result)||(h[p]=g.result),f()},g.readAsText(a[p])}}else kfe(c,l,l.dataTransfer.getData("Text"),!0)},ta.paste=(c,l)=>{if(c.state.readOnly)return l.preventDefault();c.observer.flush();let a=yfe?null:l.clipboardData;a?(_fe(c,a.getData("text/plain")),l.preventDefault()):function jnt(c){let l=c.dom.parentNode;if(!l)return;let a=l.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(()=>{c.focus(),a.remove(),_fe(c,a.value)},50)}(c)};let v7=null;function Mfe(c){setTimeout(()=>{c.hasFocus!=c.inputState.notifiedFocused&&c.update([])},10)}ta.copy=ta.cut=(c,l)=>{let{text:a,ranges:h,linewise:d}=function Jnt(c){let l=[],a=[],h=!1;for(let d of c.selection.ranges)d.empty||(l.push(c.sliceDoc(d.from,d.to)),a.push(d));if(!l.length){let d=-1;for(let{from:f}of c.selection.ranges){let p=c.doc.lineAt(f);p.number>d&&(l.push(p.text),a.push({from:p.from,to:Math.min(c.doc.length,p.to+1)})),d=p.number}h=!0}return{text:l.join(c.lineBreak),ranges:a,linewise:h}}(c.state);if(!a&&!d)return;v7=d?a:null;let f=yfe?null:l.clipboardData;f?(l.preventDefault(),f.clearData(),f.setData("text/plain",a)):function Knt(c,l){let a=c.dom.parentNode;if(!a)return;let h=a.appendChild(document.createElement("textarea"));h.style.cssText="position: fixed; left: -10000px; top: 10px",h.value=l,h.focus(),h.selectionEnd=l.length,h.selectionStart=0,setTimeout(()=>{h.remove(),c.focus()},50)}(c,a),"cut"==l.type&&!c.state.readOnly&&c.dispatch({changes:h,scrollIntoView:!0,userEvent:"delete.cut"})},ta.focus=c=>{c.inputState.lastFocusTime=Date.now(),!c.scrollDOM.scrollTop&&(c.inputState.lastScrollTop||c.inputState.lastScrollLeft)&&(c.scrollDOM.scrollTop=c.inputState.lastScrollTop,c.scrollDOM.scrollLeft=c.inputState.lastScrollLeft),Mfe(c)},ta.blur=c=>{c.observer.clearSelectionRange(),Mfe(c)},ta.compositionstart=ta.compositionupdate=c=>{null==c.inputState.compositionFirstChange&&(c.inputState.compositionFirstChange=!0),c.inputState.composing<0&&(c.inputState.composing=0)},ta.compositionend=c=>{c.inputState.composing=-1,c.inputState.compositionEndedAt=Date.now(),c.inputState.compositionFirstChange=null,Un.chrome&&Un.android&&c.observer.flushSoon(),setTimeout(()=>{c.inputState.composing<0&&c.docView.compositionDeco.size&&c.update([])},50)},ta.contextmenu=c=>{c.inputState.lastContextMenu=Date.now()},ta.beforeinput=(c,l)=>{var a;let h;if(Un.chrome&&Un.android&&(h=gfe.find(d=>d.inputType==l.inputType))&&(c.observer.delayAndroidKey(h.key,h.keyCode),"Backspace"==h.key||"Delete"==h.key)){let d=(null===(a=window.visualViewport)||void 0===a?void 0:a.height)||0;setTimeout(()=>{var f;((null===(f=window.visualViewport)||void 0===f?void 0:f.height)||0)>d+10&&c.hasFocus&&(c.contentDOM.blur(),c.focus())},100)}};const Efe=["pre-wrap","normal","pre-line","break-spaces"];class Afe{constructor(){this.doc=Ir.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(l,a){let h=this.doc.lineAt(a).number-this.doc.lineAt(l).number+1;return this.lineWrapping&&(h+=Math.ceil((a-l-h*this.lineLength*.5)/this.lineLength)),this.lineHeight*h}heightForLine(l){return this.lineWrapping?(1+Math.max(0,Math.ceil((l-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(l){return this.doc=l,this}mustRefreshForWrapping(l){return Efe.indexOf(l)>-1!=this.lineWrapping}mustRefreshForHeights(l){let a=!1;for(let h=0;h<l.length;h++){let d=l[h];d<0?h++:this.heightSamples[Math.floor(10*d)]||(a=!0,this.heightSamples[Math.floor(10*d)]=!0)}return a}refresh(l,a,h,d,f){let p=Efe.indexOf(l)>-1,g=Math.round(a)!=Math.round(this.lineHeight)||this.lineWrapping!=p;if(this.lineWrapping=p,this.lineHeight=a,this.charWidth=h,this.lineLength=d,g){this.heightSamples={};for(let m=0;m<f.length;m++){let v=f[m];v<0?m++:this.heightSamples[Math.floor(10*v)]=!0}}return g}}class Ife{constructor(l,a){this.from=l,this.heights=a,this.index=0}get more(){return this.index<this.heights.length}}class Ig{constructor(l,a,h,d,f){this.from=l,this.length=a,this.top=h,this.height=d,this.type=f}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(l){let a=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(l.type)?l.type:[l]);return new Ig(this.from,this.length+l.length,this.top,this.height+l.height,a)}}var rs=function(c){return c[c.ByPos=0]="ByPos",c[c.ByHeight=1]="ByHeight",c[c.ByPosNoHeight=2]="ByPosNoHeight",c}(rs||(rs={}));const wA=.001;class Ol{constructor(l,a,h=2){this.length=l,this.height=a,this.flags=h}get outdated(){return(2&this.flags)>0}set outdated(l){this.flags=(l?2:0)|-3&this.flags}setHeight(l,a){this.height!=a&&(Math.abs(this.height-a)>wA&&(l.heightChanged=!0),this.height=a)}replace(l,a,h){return Ol.of(h)}decomposeLeft(l,a){a.push(this)}decomposeRight(l,a){a.push(this)}applyChanges(l,a,h,d){let f=this;for(let p=d.length-1;p>=0;p--){let{fromA:g,toA:m,fromB:v,toB:y}=d[p],_=f.lineAt(g,rs.ByPosNoHeight,a,0,0),b=_.to>=m?_:f.lineAt(m,rs.ByPosNoHeight,a,0,0);for(y+=b.to-m,m=b.to;p>0&&_.from<=d[p-1].toA;)g=d[p-1].fromA,v=d[p-1].fromB,p--,g<_.from&&(_=f.lineAt(g,rs.ByPosNoHeight,a,0,0));v+=_.from-g,g=_.from;let C=y7.build(h,l,v,y);f=f.replace(g,m,C)}return f.updateHeight(h,0)}static empty(){return new zc(0,0)}static of(l){if(1==l.length)return l[0];let a=0,h=l.length,d=0,f=0;for(;;)if(a==h)if(d>2*f){let g=l[a-1];g.break?l.splice(--a,1,g.left,null,g.right):l.splice(--a,1,g.left,g.right),h+=1+g.break,d-=g.size}else{if(!(f>2*d))break;{let g=l[h];g.break?l.splice(h,1,g.left,null,g.right):l.splice(h,1,g.left,g.right),h+=2+g.break,f-=g.size}}else if(d<f){let g=l[a++];g&&(d+=g.size)}else{let g=l[--h];g&&(f+=g.size)}let p=0;return null==l[a-1]?(p=1,a--):null==l[a]&&(p=1,h++),new eit(Ol.of(l.slice(0,a)),p,Ol.of(l.slice(h)))}}Ol.prototype.size=1;class Pfe extends Ol{constructor(l,a,h){super(l,a),this.type=h}blockAt(l,a,h,d){return new Ig(d,this.length,h,this.height,this.type)}lineAt(l,a,h,d,f){return this.blockAt(0,h,d,f)}forEachLine(l,a,h,d,f,p){l<=f+this.length&&a>=f&&p(this.blockAt(0,h,d,f))}updateHeight(l,a=0,h=!1,d){return d&&d.from<=a&&d.more&&this.setHeight(l,d.heights[d.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zc extends Pfe{constructor(l,a){super(l,a,is.Text),this.collapsed=0,this.widgetHeight=0}replace(l,a,h){let d=h[0];return 1==h.length&&(d instanceof zc||d instanceof _a&&4&d.flags)&&Math.abs(this.length-d.length)<10?(d instanceof _a?d=new zc(d.length,this.height):d.height=this.height,this.outdated||(d.outdated=!1),d):Ol.of(h)}updateHeight(l,a=0,h=!1,d){return d&&d.from<=a&&d.more?this.setHeight(l,d.heights[d.index++]):(h||this.outdated)&&this.setHeight(l,Math.max(this.widgetHeight,l.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class _a extends Ol{constructor(l){super(l,0)}lines(l,a){let h=l.lineAt(a).number,d=l.lineAt(a+this.length).number;return{firstLine:h,lastLine:d,lineHeight:this.height/(d-h+1)}}blockAt(l,a,h,d){let{firstLine:f,lastLine:p,lineHeight:g}=this.lines(a,d),m=Math.max(0,Math.min(p-f,Math.floor((l-h)/g))),{from:v,length:y}=a.line(f+m);return new Ig(v,y,h+g*m,g,is.Text)}lineAt(l,a,h,d,f){if(a==rs.ByHeight)return this.blockAt(l,h,d,f);if(a==rs.ByPosNoHeight){let{from:_,to:b}=h.lineAt(l);return new Ig(_,b-_,0,0,is.Text)}let{firstLine:p,lineHeight:g}=this.lines(h,f),{from:m,length:v,number:y}=h.lineAt(l);return new Ig(m,v,d+g*(y-p),g,is.Text)}forEachLine(l,a,h,d,f,p){let{firstLine:g,lineHeight:m}=this.lines(h,f);for(let v=Math.max(l,f),y=Math.min(f+this.length,a);v<=y;){let _=h.lineAt(v);v==l&&(d+=m*(_.number-g)),p(new Ig(_.from,_.length,d,m,is.Text)),d+=m,v=_.to+1}}replace(l,a,h){let d=this.length-a;if(d>0){let f=h[h.length-1];f instanceof _a?h[h.length-1]=new _a(f.length+d):h.push(null,new _a(d-1))}if(l>0){let f=h[0];f instanceof _a?h[0]=new _a(l+f.length):h.unshift(new _a(l-1),null)}return Ol.of(h)}decomposeLeft(l,a){a.push(new _a(l-1),null)}decomposeRight(l,a){a.push(null,new _a(this.length-l-1))}updateHeight(l,a=0,h=!1,d){let f=a+this.length;if(d&&d.from<=a+this.length&&d.more){let p=[],g=Math.max(a,d.from),m=-1,v=l.heightChanged;for(d.from>a&&p.push(new _a(d.from-a-1).updateHeight(l,a));g<=f&&d.more;){let _=l.doc.lineAt(g).length;p.length&&p.push(null);let b=d.heights[d.index++];-1==m?m=b:Math.abs(b-m)>=wA&&(m=-2);let C=new zc(_,b);C.outdated=!1,p.push(C),g+=_+1}g<=f&&p.push(null,new _a(f-g).updateHeight(l,g));let y=Ol.of(p);return l.heightChanged=v||m<0||Math.abs(y.height-this.height)>=wA||Math.abs(m-this.lines(l.doc,a).lineHeight)>=wA,y}return(h||this.outdated)&&(this.setHeight(l,l.heightForGap(a,a+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class eit extends Ol{constructor(l,a,h){super(l.length+a+h.length,l.height+h.height,a|(l.outdated||h.outdated?2:0)),this.left=l,this.right=h,this.size=l.size+h.size}get break(){return 1&this.flags}blockAt(l,a,h,d){let f=h+this.left.height;return l<f?this.left.blockAt(l,a,h,d):this.right.blockAt(l,a,f,d+this.left.length+this.break)}lineAt(l,a,h,d,f){let p=d+this.left.height,g=f+this.left.length+this.break,m=a==rs.ByHeight?l<p:l<g,v=m?this.left.lineAt(l,a,h,d,f):this.right.lineAt(l,a,h,p,g);if(this.break||(m?v.to<g:v.from>g))return v;let y=a==rs.ByPosNoHeight?rs.ByPosNoHeight:rs.ByPos;return m?v.join(this.right.lineAt(g,y,h,p,g)):this.left.lineAt(g,y,h,d,f).join(v)}forEachLine(l,a,h,d,f,p){let g=d+this.left.height,m=f+this.left.length+this.break;if(this.break)l<m&&this.left.forEachLine(l,a,h,d,f,p),a>=m&&this.right.forEachLine(l,a,h,g,m,p);else{let v=this.lineAt(m,rs.ByPos,h,d,f);l<v.from&&this.left.forEachLine(l,v.from-1,h,d,f,p),v.to>=l&&v.from<=a&&p(v),a>v.to&&this.right.forEachLine(v.to+1,a,h,g,m,p)}}replace(l,a,h){let d=this.left.length+this.break;if(a<d)return this.balanced(this.left.replace(l,a,h),this.right);if(l>this.left.length)return this.balanced(this.left,this.right.replace(l-d,a-d,h));let f=[];l>0&&this.decomposeLeft(l,f);let p=f.length;for(let g of h)f.push(g);if(l>0&&Rfe(f,p-1),a<this.length){let g=f.length;this.decomposeRight(a,f),Rfe(f,g)}return Ol.of(f)}decomposeLeft(l,a){let h=this.left.length;if(l<=h)return this.left.decomposeLeft(l,a);a.push(this.left),this.break&&(h++,l>=h&&a.push(null)),l>h&&this.right.decomposeLeft(l-h,a)}decomposeRight(l,a){let h=this.left.length,d=h+this.break;if(l>=d)return this.right.decomposeRight(l-d,a);l<h&&this.left.decomposeRight(l,a),this.break&&l<d&&a.push(null),a.push(this.right)}balanced(l,a){return l.size>2*a.size||a.size>2*l.size?Ol.of(this.break?[l,null,a]:[l,a]):(this.left=l,this.right=a,this.height=l.height+a.height,this.outdated=l.outdated||a.outdated,this.size=l.size+a.size,this.length=l.length+this.break+a.length,this)}updateHeight(l,a=0,h=!1,d){let{left:f,right:p}=this,g=a+f.length+this.break,m=null;return d&&d.from<=a+f.length&&d.more?m=f=f.updateHeight(l,a,h,d):f.updateHeight(l,a,h),d&&d.from<=g+p.length&&d.more?m=p=p.updateHeight(l,g,h,d):p.updateHeight(l,g,h),m?this.balanced(f,p):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Rfe(c,l){let a,h;null==c[l]&&(a=c[l-1])instanceof _a&&(h=c[l+1])instanceof _a&&c.splice(l-1,3,new _a(a.length+1+h.length))}class y7{constructor(l,a){this.pos=l,this.oracle=a,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=l}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(l,a){if(this.lineStart>-1){let h=Math.min(a,this.lineEnd),d=this.nodes[this.nodes.length-1];d instanceof zc?d.length+=h-this.pos:(h>this.pos||!this.isCovered)&&this.nodes.push(new zc(h-this.pos,-1)),this.writtenTo=h,a>h&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}point(l,a,h){if(l<a||h.heightRelevant){let d=h.widget?h.widget.estimatedHeight:0;d<0&&(d=this.oracle.lineHeight);let f=a-l;h.block?this.addBlock(new Pfe(f,d,h.type)):(f||d>=5)&&this.addLineDeco(d,f)}else a>l&&this.span(l,a);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:l,to:a}=this.oracle.doc.lineAt(this.pos);this.lineStart=l,this.lineEnd=a,this.writtenTo<l&&((this.writtenTo<l-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,l-1)),this.nodes.push(null)),this.pos>l&&this.nodes.push(new zc(this.pos-l,-1)),this.writtenTo=this.pos}blankContent(l,a){let h=new _a(a-l);return this.oracle.doc.lineAt(l).to==a&&(h.flags|=4),h}ensureLine(){this.enterLine();let l=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(l instanceof zc)return l;let a=new zc(0,-1);return this.nodes.push(a),a}addBlock(l){this.enterLine(),l.type==is.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(l),this.writtenTo=this.pos=this.pos+l.length,l.type!=is.WidgetBefore&&(this.covering=l)}addLineDeco(l,a){let h=this.ensureLine();h.length+=a,h.collapsed+=a,h.widgetHeight=Math.max(h.widgetHeight,l),this.writtenTo=this.pos=this.pos+a}finish(l){let a=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||a instanceof zc||this.isCovered?(this.writtenTo<this.pos||null==a)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new zc(0,-1));let h=l;for(let d of this.nodes)d instanceof zc&&d.updateHeight(this.oracle,h),h+=d?d.length:1;return this.nodes}static build(l,a,h,d){let f=new y7(h,l);return Es.spans(a,h,d,f,0),f.finish(h)}}class iit{constructor(){this.changes=[]}compareRange(){}comparePoint(l,a,h,d){(l<a||h&&h.heightRelevant||d&&d.heightRelevant)&&o7(l,a,this.changes,5)}}function rit(c,l){let a=c.getBoundingClientRect(),h=c.ownerDocument,d=h.defaultView||window,f=Math.max(0,a.left),p=Math.min(d.innerWidth,a.right),g=Math.max(0,a.top),m=Math.min(d.innerHeight,a.bottom);for(let v=c.parentNode;v&&v!=h.body;)if(1==v.nodeType){let y=v,_=window.getComputedStyle(y);if((y.scrollHeight>y.clientHeight||y.scrollWidth>y.clientWidth)&&"visible"!=_.overflow){let b=y.getBoundingClientRect();f=Math.max(f,b.left),p=Math.min(p,b.right),g=Math.max(g,b.top),m=v==c.parentNode?b.bottom:Math.min(m,b.bottom)}v="absolute"==_.position||"fixed"==_.position?y.offsetParent:y.parentNode}else{if(11!=v.nodeType)break;v=v.host}return{left:f-a.left,right:Math.max(f,p)-a.left,top:g-(a.top+l),bottom:Math.max(g,m)-(a.top+l)}}function sit(c,l){let a=c.getBoundingClientRect();return{left:0,right:a.right-a.left,top:l,bottom:a.bottom-(a.top+l)}}class _7{constructor(l,a,h){this.from=l,this.to=a,this.size=h}static same(l,a){if(l.length!=a.length)return!1;for(let h=0;h<l.length;h++){let d=l[h],f=a[h];if(d.from!=f.from||d.to!=f.to||d.size!=f.size)return!1}return!0}draw(l){return Hn.replace({widget:new oit(this.size,l)}).range(this.from,this.to)}}class oit extends Jf{constructor(l,a){super(),this.size=l,this.vertical=a}eq(l){return l.size==this.size&&l.vertical==this.vertical}toDOM(){let l=document.createElement("div");return this.vertical?l.style.height=this.size+"px":(l.style.width=this.size+"px",l.style.height="2px",l.style.display="inline-block"),l}get estimatedHeight(){return this.vertical?this.size:-1}}class Ffe{constructor(l){this.state=l,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Afe,this.scaler=Lfe,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=As.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=l.facet(BS).filter(a=>"function"!=typeof a),this.heightMap=Ol.empty().applyChanges(this.stateDeco,Ir.empty,this.heightOracle.setDoc(l.doc),[new Ed(0,0,0,l.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Hn.set(this.lineGaps.map(a=>a.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let l=[this.viewport],{main:a}=this.state.selection;for(let h=0;h<=1;h++){let d=h?a.head:a.anchor;if(!l.some(({from:f,to:p})=>d>=f&&d<=p)){let{from:f,to:p}=this.lineBlockAt(d);l.push(new SA(f,p))}}this.viewports=l.sort((h,d)=>h.from-d.from),this.scaler=this.heightMap.height<=7e6?Lfe:new cit(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,l=>{this.viewportLines.push(1==this.scaler.scale?l:zS(l,this.scaler))})}update(l,a=null){this.state=l.state;let h=this.stateDeco;this.stateDeco=this.state.facet(BS).filter(v=>"function"!=typeof v);let f=Ed.extendWithRanges(l.changedRanges,function nit(c,l,a){let h=new iit;return Es.compare(c,l,a,h,0),h.changes}(h,this.stateDeco,l?l.changes:Vo.empty(this.state.doc.length))),p=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,l.startState.doc,this.heightOracle.setDoc(this.state.doc),f),this.heightMap.height!=p&&(l.flags|=2);let g=f.length?this.mapViewport(this.viewport,l.changes):this.viewport;(a&&(a.range.head<g.from||a.range.head>g.to)||!this.viewportIsAppropriate(g))&&(g=this.getViewport(0,a));let m=!l.changes.empty||2&l.flags||g.from!=this.viewport.from||g.to!=this.viewport.to;this.viewport=g,this.updateForViewport(),m&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,l.changes))),l.flags|=this.computeVisibleRanges(),a&&(this.scrollTarget=a),!this.mustEnforceCursorAssoc&&l.selectionSet&&l.view.lineWrapping&&l.state.selection.main.empty&&l.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(l){let a=l.contentDOM,h=window.getComputedStyle(a),d=this.heightOracle,f=h.whiteSpace;this.defaultTextDirection="rtl"==h.direction?As.RTL:As.LTR;let p=this.heightOracle.mustRefreshForWrapping(f),g=p||this.mustMeasureContent||this.contentDOMHeight!=a.clientHeight;this.contentDOMHeight=a.clientHeight,this.mustMeasureContent=!1;let m=0,v=0,y=parseInt(h.paddingTop)||0,_=parseInt(h.paddingBottom)||0;(this.paddingTop!=y||this.paddingBottom!=_)&&(this.paddingTop=y,this.paddingBottom=_,m|=10),this.editorWidth!=l.scrollDOM.clientWidth&&(d.lineWrapping&&(g=!0),this.editorWidth=l.scrollDOM.clientWidth,m|=8);let b=(this.printing?sit:rit)(a,this.paddingTop),C=b.top-this.pixelViewport.top,x=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(g=!0)),!this.inView&&!this.scrollTarget)return 0;let w=a.clientWidth;if((this.contentDOMWidth!=w||this.editorHeight!=l.scrollDOM.clientHeight)&&(this.contentDOMWidth=w,this.editorHeight=l.scrollDOM.clientHeight,m|=8),g){let O=l.docView.measureVisibleLineHeights(this.viewport);if(d.mustRefreshForHeights(O)&&(p=!0),p||d.lineWrapping&&Math.abs(w-this.contentDOMWidth)>d.charWidth){let{lineHeight:k,charWidth:D}=l.docView.measureTextSize();p=d.refresh(f,k,D,w/D,O),p&&(l.docView.minWidth=0,m|=8)}C>0&&x>0?v=Math.max(C,x):C<0&&x<0&&(v=Math.min(C,x)),d.heightChanged=!1;for(let k of this.viewports){let D=k.from==this.viewport.from?O:l.docView.measureVisibleLineHeights(k);this.heightMap=this.heightMap.updateHeight(d,0,p,new Ife(k.from,D))}d.heightChanged&&(m|=2)}let T=!this.viewportIsAppropriate(this.viewport,v)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(this.viewport=this.getViewport(v,this.scrollTarget)),this.updateForViewport(),(2&m||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(p?[]:this.lineGaps,l)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,l.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(l,a){let h=.5-Math.max(-.5,Math.min(.5,l/1e3/2)),d=this.heightMap,f=this.state.doc,{visibleTop:p,visibleBottom:g}=this,m=new SA(d.lineAt(p-1e3*h,rs.ByHeight,f,0,0).from,d.lineAt(g+1e3*(1-h),rs.ByHeight,f,0,0).to);if(a){let{head:v}=a.range;if(v<m.from||v>m.to){let b,y=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),_=d.lineAt(v,rs.ByPos,f,0,0);b="center"==a.y?(_.top+_.bottom)/2-y/2:"start"==a.y||"nearest"==a.y&&v<m.from?_.top:_.bottom-y,m=new SA(d.lineAt(b-500,rs.ByHeight,f,0,0).from,d.lineAt(b+y+500,rs.ByHeight,f,0,0).to)}}return m}mapViewport(l,a){let h=a.mapPos(l.from,-1),d=a.mapPos(l.to,1);return new SA(this.heightMap.lineAt(h,rs.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(d,rs.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:l,to:a},h=0){if(!this.inView)return!0;let{top:d}=this.heightMap.lineAt(l,rs.ByPos,this.state.doc,0,0),{bottom:f}=this.heightMap.lineAt(a,rs.ByPos,this.state.doc,0,0),{visibleTop:p,visibleBottom:g}=this;return(0==l||d<=p-Math.max(10,Math.min(-h,250)))&&(a==this.state.doc.length||f>=g+Math.max(10,Math.min(h,250)))&&d>p-2e3&&f<g+2e3}mapLineGaps(l,a){if(!l.length||a.empty)return l;let h=[];for(let d of l)a.touchesRange(d.from,d.to)||h.push(new _7(a.mapPos(d.from),a.mapPos(d.to),d.size));return h}ensureLineGaps(l,a){let h=this.heightOracle.lineWrapping,d=h?1e4:2e3,f=d>>1,p=d<<1;if(this.defaultTextDirection!=As.LTR&&!h)return[];let g=[],m=(v,y,_,b)=>{if(y-v<f)return;let C=this.state.selection.main,x=[C.from];C.empty||x.push(C.to);for(let w of x)if(w>v&&w<y)return m(v,w-10,_,b),void m(w+10,y,_,b);let S=function lit(c,l){for(let a of c)if(l(a))return a}(l,w=>w.from>=_.from&&w.to<=_.to&&Math.abs(w.from-v)<f&&Math.abs(w.to-y)<f&&!x.some(T=>w.from<T&&w.to>T));if(!S){if(y<_.to&&a&&h&&a.visibleRanges.some(w=>w.from<=y&&w.to>=y)){let w=a.moveToLineBoundary(At.cursor(y),!1,!0).head;w>v&&(y=w)}S=new _7(v,y,this.gapSize(_,v,y,b))}g.push(S)};for(let v of this.viewportLines){if(v.length<p)continue;let y=ait(v.from,v.to,this.stateDeco);if(y.total<p)continue;let b,C,_=this.scrollTarget?this.scrollTarget.range.head:null;if(h){let S,w,x=d/this.heightOracle.lineLength*this.heightOracle.lineHeight;null!=_?(S=Math.max(v.from,_-d),w=Math.min(v.to,_+d)):(S=(this.visibleTop-v.top-x)/v.height,w=(this.visibleBottom-v.top+x)/v.height),b=TA(y,S),C=TA(y,w)}else{let x,S;if(null!=_)x=Math.max(v.from,_-p),S=Math.min(v.to,_+p);else{let w=y.total*this.heightOracle.charWidth,T=d*this.heightOracle.charWidth;x=(this.pixelViewport.left-T)/w,S=(this.pixelViewport.right+T)/w}b=TA(y,x),C=TA(y,S)}b>v.from&&m(v.from,b,v,y),C<v.to&&m(C,v.to,v,y)}return g}gapSize(l,a,h,d){let f=Nfe(d,h)-Nfe(d,a);return this.heightOracle.lineWrapping?l.height*f:d.total*this.heightOracle.charWidth*f}updateLineGaps(l){_7.same(l,this.lineGaps)||(this.lineGaps=l,this.lineGapDeco=Hn.set(l.map(a=>a.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let l=this.stateDeco;this.lineGaps.length&&(l=l.concat(this.lineGapDeco));let a=[];Es.spans(l,this.viewport.from,this.viewport.to,{span(d,f){a.push({from:d,to:f})},point(){}},20);let h=a.length!=this.visibleRanges.length||this.visibleRanges.some((d,f)=>d.from!=a[f].from||d.to!=a[f].to);return this.visibleRanges=a,h?4:0}lineBlockAt(l){return l>=this.viewport.from&&l<=this.viewport.to&&this.viewportLines.find(a=>a.from<=l&&a.to>=l)||zS(this.heightMap.lineAt(l,rs.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(l){return zS(this.heightMap.lineAt(this.scaler.fromDOM(l),rs.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(l){return zS(this.heightMap.blockAt(this.scaler.fromDOM(l),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class SA{constructor(l,a){this.from=l,this.to=a}}function ait(c,l,a){let h=[],d=c,f=0;return Es.spans(a,c,l,{span(){},point(p,g){p>d&&(h.push({from:d,to:p}),f+=p-d),d=g}},20),d<l&&(h.push({from:d,to:l}),f+=l-d),{total:f,ranges:h}}function TA({total:c,ranges:l},a){if(a<=0)return l[0].from;if(a>=1)return l[l.length-1].to;let h=Math.floor(c*a);for(let d=0;;d++){let{from:f,to:p}=l[d],g=p-f;if(h<=g)return f+h;h-=g}}function Nfe(c,l){let a=0;for(let{from:h,to:d}of c.ranges){if(l<=d){a+=l-h;break}a+=d-h}return a/c.total}const Lfe={toDOM:c=>c,fromDOM:c=>c,scale:1};class cit{constructor(l,a,h){let d=0,f=0,p=0;this.viewports=h.map(({from:g,to:m})=>{let v=a.lineAt(g,rs.ByPos,l,0,0).top,y=a.lineAt(m,rs.ByPos,l,0,0).bottom;return d+=y-v,{from:g,to:m,top:v,bottom:y,domTop:0,domBottom:0}}),this.scale=(7e6-d)/(a.height-d);for(let g of this.viewports)g.domTop=p+(g.top-f)*this.scale,p=g.domBottom=g.domTop+(g.bottom-g.top),f=g.bottom}toDOM(l){for(let a=0,h=0,d=0;;a++){let f=a<this.viewports.length?this.viewports[a]:null;if(!f||l<f.top)return d+(l-h)*this.scale;if(l<=f.bottom)return f.domTop+(l-f.top);h=f.bottom,d=f.domBottom}}fromDOM(l){for(let a=0,h=0,d=0;;a++){let f=a<this.viewports.length?this.viewports[a]:null;if(!f||l<f.domTop)return h+(l-d)/this.scale;if(l<=f.domBottom)return f.top+(l-f.domTop);h=f.bottom,d=f.domBottom}}}function zS(c,l){if(1==l.scale)return c;let a=l.toDOM(c.top),h=l.toDOM(c.bottom);return new Ig(c.from,c.length,a,h-a,Array.isArray(c.type)?c.type.map(d=>zS(d,l)):c.type)}const OA=zn.define({combine:c=>c.join(" ")}),b7=zn.define({combine:c=>c.indexOf(!0)>-1}),C7=Dg.newName(),Bfe=Dg.newName(),Vfe=Dg.newName(),zfe={"&light":"."+Bfe,"&dark":"."+Vfe};function x7(c,l,a){return new Dg(l,{finish:h=>/&/.test(h)?h.replace(/&\w*/,d=>{if("&"==d)return c;if(!a||!a[d])throw new RangeError(`Unsupported selector: ${d}`);return a[d]}):c+" "+h})}const uit=x7("."+C7,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},zfe),hit={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},w7=Un.ie&&Un.ie_version<=11;class dit{constructor(l,a,h){this.view=l,this.onChange=a,this.onScrollChanged=h,this.active=!1,this.selectionRange=new pnt,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=l.contentDOM,this.observer=new MutationObserver(d=>{for(let f of d)this.queue.push(f);(Un.ie&&Un.ie_version<=11||Un.ios&&l.composing)&&d.some(f=>"childList"==f.type&&f.removedNodes.length||"characterData"==f.type&&f.oldValue.length>f.target.nodeValue.length)?this.flushSoon():this.flush()}),w7&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(l.scrollDOM)),this.addWindowListeners(this.win=l.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(d=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),d.length>0&&d[d.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(d=>{d.length>0&&d[d.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(l){this.intersecting&&this.flush(!1),this.onScrollChanged(l)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(l){if(this.gapIntersection&&(l.length!=this.gaps.length||this.gaps.some((a,h)=>a!=l[h]))){this.gapIntersection.disconnect();for(let a of l)this.gapIntersection.observe(a);this.gaps=l}}onSelectionChange(l){let a=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:h}=this,d=this.selectionRange;if(h.state.facet(CA)?h.root.activeElement!=this.dom:!fA(h.dom,d))return;let f=d.anchorNode&&h.docView.nearest(d.anchorNode);f&&f.ignoreEvent(l)?a||(this.selectionChanged=!1):(Un.ie&&Un.ie_version<=11||Un.android&&Un.chrome)&&!h.state.selection.main.empty&&d.focusNode&&pA(d.focusNode,d.focusOffset,d.anchorNode,d.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:l}=this,a=Un.safari&&11==l.root.nodeType&&function hnt(c){let l=c.activeElement;for(;l&&l.shadowRoot;)l=l.shadowRoot.activeElement;return l}(this.dom.ownerDocument)==this.dom&&function fit(c){let l=null;function a(m){m.preventDefault(),m.stopImmediatePropagation(),l=m.getTargetRanges()[0]}if(c.contentDOM.addEventListener("beforeinput",a,!0),c.dom.ownerDocument.execCommand("indent"),c.contentDOM.removeEventListener("beforeinput",a,!0),!l)return null;let h=l.startContainer,d=l.startOffset,f=l.endContainer,p=l.endOffset,g=c.docView.domAtPos(c.state.selection.main.anchor);return pA(g.node,g.offset,f,p)&&([h,d,f,p]=[f,p,h,d]),{anchorNode:h,anchorOffset:d,focusNode:f,focusOffset:p}}(this.view)||dA(l.root);if(!a||this.selectionRange.eq(a))return!1;let h=fA(this.dom,a);return h&&!this.selectionChanged&&l.inputState.lastFocusTime>Date.now()-200&&l.inputState.lastTouchTime<Date.now()-300&&function mnt(c,l){let a=l.focusNode,h=l.focusOffset;if(!a||l.anchorNode!=a||l.anchorOffset!=h)return!1;for(;;)if(h){if(1!=a.nodeType)return!1;let d=a.childNodes[h-1];"false"==d.contentEditable?h--:(a=d,h=RS(a))}else{if(a==c)return!0;h=gA(a),a=a.parentNode}}(this.dom,a)?(this.view.inputState.lastFocusTime=0,l.docView.updateSelection(),!1):(this.selectionRange.setRange(a),h&&(this.selectionChanged=!0),!0)}setSelectionRange(l,a){this.selectionRange.set(l.node,l.offset,a.node,a.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let l=0,a=null;for(let h=this.dom;h;)if(1==h.nodeType)!a&&l<this.scrollTargets.length&&this.scrollTargets[l]==h?l++:a||(a=this.scrollTargets.slice(0,l)),a&&a.push(h),h=h.assignedSlot||h.parentNode;else{if(11!=h.nodeType)break;h=h.host}if(l<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,l)),a){for(let h of this.scrollTargets)h.removeEventListener("scroll",this.onScroll);for(let h of this.scrollTargets=a)h.addEventListener("scroll",this.onScroll)}}ignore(l){if(!this.active)return l();try{return this.stop(),l()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,hit),w7&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),w7&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(l,a){var h;this.delayedAndroidKey||this.view.win.requestAnimationFrame(()=>{let d=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,!this.flush()&&d.force&&FS(this.dom,d.key,d.keyCode)}),(!this.delayedAndroidKey||"Enter"==l)&&(this.delayedAndroidKey={key:l,keyCode:a,force:this.lastChange<Date.now()-50||!(null===(h=this.delayedAndroidKey)||void 0===h||!h.force)})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let l=this.queue;for(let f of this.observer.takeRecords())l.push(f);l.length&&(this.queue=[]);let a=-1,h=-1,d=!1;for(let f of l){let p=this.readMutation(f);!p||(p.typeOver&&(d=!0),-1==a?({from:a,to:h}=p):(a=Math.min(p.from,a),h=Math.max(p.to,h)))}return{from:a,to:h,typeOver:d}}flush(l=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;l&&this.readSelectionRange();let{from:a,to:h,typeOver:d}=this.processRecords(),f=this.selectionChanged&&fA(this.dom,this.selectionRange);if(a<0&&!f)return!1;a>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let p=this.view.state,g=this.onChange(a,h,d);return this.view.state==p&&this.view.update([]),g}readMutation(l){let a=this.view.docView.nearest(l.target);if(!a||a.ignoreMutation(l))return null;if(a.markDirty("attributes"==l.type),"attributes"==l.type&&(a.dirty|=4),"childList"==l.type){let h=Ufe(a,l.previousSibling||l.target.previousSibling,-1),d=Ufe(a,l.nextSibling||l.target.nextSibling,1);return{from:h?a.posAfter(h):a.posAtStart,to:d?a.posBefore(d):a.posAtEnd,typeOver:!1}}return"characterData"==l.type?{from:a.posAtStart,to:a.posAtEnd,typeOver:l.target.nodeValue==l.oldValue}:null}setWindow(l){l!=this.win&&(this.removeWindowListeners(this.win),this.win=l,this.addWindowListeners(this.win))}addWindowListeners(l){l.addEventListener("resize",this.onResize),l.addEventListener("beforeprint",this.onPrint),l.addEventListener("scroll",this.onScroll),l.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(l){l.removeEventListener("scroll",this.onScroll),l.removeEventListener("resize",this.onResize),l.removeEventListener("beforeprint",this.onPrint),l.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var l,a,h;this.stop(),null===(l=this.intersection)||void 0===l||l.disconnect(),null===(a=this.gapIntersection)||void 0===a||a.disconnect(),null===(h=this.resize)||void 0===h||h.disconnect();for(let d of this.scrollTargets)d.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Ufe(c,l,a){for(;l;){let h=fs.get(l);if(h&&h.parent==c)return h;let d=l.parentNode;l=d!=c.dom?d:a>0?l.nextSibling:l.previousSibling}return null}let Ai=(()=>{class c{constructor(a={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=a.dispatch||(h=>this.update([h])),this.dispatch=this.dispatch.bind(this),this._root=a.root||function gnt(c){for(;c;){if(c&&(9==c.nodeType||11==c.nodeType&&c.host))return c;c=c.assignedSlot||c.parentNode}return null}(a.parent)||document,this.viewState=new Ffe(a.state||Sl.create(a)),this.plugins=this.state.facet(LS).map(h=>new c7(h));for(let h of this.plugins)h.update(this);this.observer=new dit(this,(h,d,f)=>function pit(c,l,a,h){let d,f,p=c.state.selection.main;if(l>-1){let g=c.docView.domBoundsAround(l,a,0);if(!g||c.state.readOnly)return!1;let{from:m,to:v}=g,y=c.docView.impreciseHead||c.docView.impreciseAnchor?[]:function mit(c){let l=[];if(c.root.activeElement!=c.contentDOM)return l;let{anchorNode:a,anchorOffset:h,focusNode:d,focusOffset:f}=c.observer.selectionRange;return a&&(l.push(new rfe(a,h)),(d!=a||f!=h)&&l.push(new rfe(d,f))),l}(c),_=new nfe(y,c.state);_.readRange(g.startDOM,g.endDOM);let b=p.from,C=null;(8===c.inputState.lastKeyCode&&c.inputState.lastKeyTime>Date.now()-100||Un.android&&_.text.length<v-m)&&(b=p.to,C="end");let x=function git(c,l,a,h){let d=Math.min(c.length,l.length),f=0;for(;f<d&&c.charCodeAt(f)==l.charCodeAt(f);)f++;if(f==d&&c.length==l.length)return null;let p=c.length,g=l.length;for(;p>0&&g>0&&c.charCodeAt(p-1)==l.charCodeAt(g-1);)p--,g--;return"end"==h&&(a-=p+Math.max(0,f-Math.min(p,g))-f),p<f&&c.length<l.length?(f-=a<=f&&a>=p?f-a:0,g=f+(g-p),p=f):g<f&&(f-=a<=f&&a>=g?f-a:0,p=f+(p-g),g=f),{from:f,toA:p,toB:g}}(c.state.doc.sliceString(m,v,"\uffff"),_.text,b-m,C);x&&(Un.chrome&&13==c.inputState.lastKeyCode&&x.toB==x.from+2&&"\uffff\uffff"==_.text.slice(x.from,x.toB)&&x.toB--,d={from:m+x.from,to:m+x.toA,insert:Ir.of(_.text.slice(x.from,x.toB).split("\uffff"))}),f=function vit(c,l){if(0==c.length)return null;let a=c[0].pos,h=2==c.length?c[1].pos:a;return a>-1&&h>-1?At.single(a+l,h+l):null}(y,m)}else if(c.hasFocus||!c.state.facet(CA)){let g=c.observer.selectionRange,{impreciseHead:m,impreciseAnchor:v}=c.docView,y=m&&m.node==g.focusNode&&m.offset==g.focusOffset||!p1(c.contentDOM,g.focusNode)?c.state.selection.main.head:c.docView.posFromDOM(g.focusNode,g.focusOffset),_=v&&v.node==g.anchorNode&&v.offset==g.anchorOffset||!p1(c.contentDOM,g.anchorNode)?c.state.selection.main.anchor:c.docView.posFromDOM(g.anchorNode,g.anchorOffset);(y!=p.head||_!=p.anchor)&&(f=At.single(_,y))}if(!d&&!f)return!1;if(!d&&h&&!p.empty&&f&&f.main.empty?d={from:p.from,to:p.to,insert:c.state.doc.slice(p.from,p.to)}:d&&d.from>=p.from&&d.to<=p.to&&(d.from!=p.from||d.to!=p.to)&&p.to-p.from-(d.to-d.from)<=4?d={from:p.from,to:p.to,insert:c.state.doc.slice(p.from,d.from).append(d.insert).append(c.state.doc.slice(d.to,p.to))}:(Un.mac||Un.android)&&d&&d.from==d.to&&d.from==p.head-1&&/^\. ?$/.test(d.insert.toString())&&(f&&2==d.insert.length&&(f=At.single(f.main.anchor-1,f.main.head-1)),d={from:p.from,to:p.to,insert:Ir.of([" "])}),d){let g=c.state;if(Un.ios&&c.inputState.flushIOSKey(c)||Un.android&&(d.from==p.from&&d.to==p.to&&1==d.insert.length&&2==d.insert.lines&&FS(c.contentDOM,"Enter",13)||d.from==p.from-1&&d.to==p.to&&0==d.insert.length&&FS(c.contentDOM,"Backspace",8)||d.from==p.from&&d.to==p.to+1&&0==d.insert.length&&FS(c.contentDOM,"Delete",46)))return!0;let v,m=d.insert.toString();if(c.state.facet(Gde).some(_=>_(c,d.from,d.to,m)))return!0;if(c.inputState.composing>=0&&c.inputState.composing++,d.from>=p.from&&d.to<=p.to&&d.to-d.from>=(p.to-p.from)/3&&(!f||f.main.empty&&f.main.from==d.from+d.insert.length)&&c.inputState.composing<0){let _=p.from<d.from?g.sliceDoc(p.from,d.from):"",b=p.to>d.to?g.sliceDoc(d.to,p.to):"";v=g.replaceSelection(c.state.toText(_+d.insert.sliceString(0,void 0,c.state.lineBreak)+b))}else{let _=g.changes(d),b=f&&!g.selection.main.eq(f.main)&&f.main.to<=_.newLength?f.main:void 0;if(g.selection.ranges.length>1&&c.inputState.composing>=0&&d.to<=p.to&&d.to>=p.to-10){let C=c.state.sliceDoc(d.from,d.to),x=afe(c)||c.state.doc.lineAt(p.head),S=p.to-d.to,w=p.to-p.from;v=g.changeByRange(T=>{if(T.from==p.from&&T.to==p.to)return{changes:_,range:b||T.map(_)};let O=T.to-S,k=O-C.length;if(T.to-T.from!=w||c.state.sliceDoc(k,O)!=C||x&&T.to>=x.from&&T.from<=x.to)return{range:T};let D=g.changes({from:k,to:O,insert:d.insert}),M=T.to-p.to;return{changes:D,range:b?At.range(Math.max(0,b.anchor+M),Math.max(0,b.head+M)):T.map(D)}})}else v={changes:_,selection:b&&g.selection.replaceRange(b)}}let y="input.type";return c.composing&&(y+=".compose",c.inputState.compositionFirstChange&&(y+=".start",c.inputState.compositionFirstChange=!1)),c.dispatch(v,{scrollIntoView:!0,userEvent:y}),!0}if(f&&!f.main.eq(p)){let g=!1,m="select";return c.inputState.lastSelectionTime>Date.now()-50&&("select"==c.inputState.lastSelectionOrigin&&(g=!0),m=c.inputState.lastSelectionOrigin),c.dispatch({selection:f,scrollIntoView:g,userEvent:m}),!0}return!1}(this,h,d,f),h=>{this.inputState.runScrollHandlers(this,h),this.observer.intersecting&&this.measure()}),this.inputState=new Unt(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new sfe(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),a.parent&&a.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...a){this._dispatch(1==a.length&&a[0]instanceof kd?a[0]:this.state.update(...a))}update(a){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let f,h=!1,d=!1,p=this.state;for(let m of a){if(m.startState!=p)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");p=m.state}if(this.destroyed)return void(this.viewState.state=p);if(this.observer.clear(),p.facet(Sl.phrases)!=this.state.facet(Sl.phrases))return this.setState(p);f=xA.create(this,p,a);let g=this.viewState.scrollTarget;try{this.updateState=2;for(let m of a){if(g&&(g=g.map(m.changes)),m.scrollIntoView){let{main:v}=m.state.selection;g=new bA(v.empty?v:At.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of m.effects)v.is(jde)&&(g=v.value)}this.viewState.update(f,g),this.bidiCache=DA.update(this.bidiCache,f.changes),f.empty||(this.updatePlugins(f),this.inputState.update(f)),h=this.docView.update(f),this.state.facet(VS)!=this.styleModules&&this.mountStyles(),d=this.updateAttrs(),this.showAnnouncements(a),this.docView.updateSelection(h,a.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(f.startState.facet(OA)!=f.state.facet(OA)&&(this.viewState.mustMeasureContent=!0),(h||d||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!f.empty)for(let m of this.state.facet(l7))m(f)}setState(a){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=a);this.updateState=2;let h=this.hasFocus;try{for(let d of this.plugins)d.destroy(this);this.viewState=new Ffe(a),this.plugins=a.facet(LS).map(d=>new c7(d)),this.pluginMap.clear();for(let d of this.plugins)d.update(this);this.docView=new sfe(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}h&&this.focus(),this.requestMeasure()}updatePlugins(a){let h=a.startState.facet(LS),d=a.state.facet(LS);if(h!=d){let f=[];for(let p of d){let g=h.indexOf(p);if(g<0)f.push(new c7(p));else{let m=this.plugins[g];m.mustUpdate=a,f.push(m)}}for(let p of this.plugins)p.mustUpdate!=a&&p.destroy(this);this.plugins=f,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let f of this.plugins)f.mustUpdate=a;for(let f=0;f<this.plugins.length;f++)this.plugins[f].update(this)}measure(a=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,a&&this.observer.forceFlush();let h=null,{scrollHeight:d,scrollTop:f,clientHeight:p}=this.scrollDOM,g=f>d-p-4?d:f;try{for(let m=0;;m++){this.updateState=1;let v=this.viewport,y=this.viewState.lineBlockAtHeight(g),_=this.viewState.measure(this);if(!_&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(m>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let b=[];4&_||([this.measureRequests,b]=[b,this.measureRequests]);let C=b.map(T=>{try{return T.read(this)}catch(O){return Vc(this.state,O),Hfe}}),x=xA.create(this,this.state,[]),S=!1,w=!1;x.flags|=_,h?h.flags|=_:h=x,this.updateState=2,x.empty||(this.updatePlugins(x),this.inputState.update(x),this.updateAttrs(),S=this.docView.update(x));for(let T=0;T<b.length;T++)if(C[T]!=Hfe)try{let O=b[T];O.write&&O.write(C[T],this)}catch(O){Vc(this.state,O)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,w=!0;else{let T=this.viewState.lineBlockAt(y.from).top-y.top;(T>1||T<-1)&&(this.scrollDOM.scrollTop+=T,w=!0)}if(S&&this.docView.updateSelection(!0),this.viewport.from==v.from&&this.viewport.to==v.to&&!w&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(h&&!h.empty)for(let m of this.state.facet(l7))m(h)}get themeClasses(){return C7+" "+(this.state.facet(b7)?Vfe:Bfe)+" "+this.state.facet(OA)}updateAttrs(){let a=$fe(this,qde,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),h={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(CA)?"true":"false",class:"cm-content",style:`${Un.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(h["aria-readonly"]="true"),$fe(this,u7,h);let d=this.observer.ignore(()=>{let f=s7(this.contentDOM,this.contentAttrs,h),p=s7(this.dom,this.editorAttrs,a);return f||p});return this.editorAttrs=a,this.contentAttrs=h,d}showAnnouncements(a){let h=!0;for(let d of a)for(let f of d.effects)f.is(c.announce)&&(h&&(this.announceDOM.textContent=""),h=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=f.value)}mountStyles(){this.styleModules=this.state.facet(VS),Dg.mount(this.root,this.styleModules.concat(uit).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(a){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),a){if(null!=a.key)for(let h=0;h<this.measureRequests.length;h++)if(this.measureRequests[h].key===a.key)return void(this.measureRequests[h]=a);this.measureRequests.push(a)}}plugin(a){let h=this.pluginMap.get(a);return(void 0===h||h&&h.spec!=a)&&this.pluginMap.set(a,h=this.plugins.find(d=>d.spec==a)||null),h&&h.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(a){return this.readMeasured(),this.viewState.elementAtHeight(a)}lineBlockAtHeight(a){return this.readMeasured(),this.viewState.lineBlockAtHeight(a)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(a){return this.viewState.lineBlockAt(a)}get contentHeight(){return this.viewState.contentHeight}moveByChar(a,h,d){return g7(this,a,pfe(this,a,h,d))}moveByGroup(a,h){return g7(this,a,pfe(this,a,h,d=>function Vnt(c,l,a){let h=c.state.charCategorizer(l),d=h(a);return f=>{let p=h(f);return d==Ss.Space&&(d=p),d==p}}(this,a.head,d)))}moveToLineBoundary(a,h,d=!0){return function Bnt(c,l,a,h){let d=c.state.doc.lineAt(l.head),f=h&&c.lineWrapping?c.coordsAtPos(l.assoc<0&&l.head>d.from?l.head-1:l.head):null;if(f){let m=c.dom.getBoundingClientRect(),v=c.textDirectionAt(d.from),y=c.posAtCoords({x:a==(v==As.LTR)?m.right-1:m.left+1,y:(f.top+f.bottom)/2});if(null!=y)return At.cursor(y,a?-1:1)}let p=Tl.find(c.docView,l.head);return At.cursor(p?a?p.posAtEnd:p.posAtStart:a?d.to:d.from,a?-1:1)}(this,a,h,d)}moveVertically(a,h,d){return g7(this,a,function znt(c,l,a,h){let d=l.head,f=a?1:-1;if(d==(a?c.state.doc.length:0))return At.cursor(d,l.assoc);let g,p=l.goalColumn,m=c.contentDOM.getBoundingClientRect(),v=c.coordsAtPos(d),y=c.documentTop;if(v)null==p&&(p=v.left-m.left),g=f<0?v.top:v.bottom;else{let C=c.viewState.lineBlockAt(d);null==p&&(p=Math.min(m.right-m.left,c.defaultCharacterWidth*(d-C.from))),g=(f<0?C.top:C.bottom)+y}let _=m.left+p,b=null!=h?h:c.defaultLineHeight>>1;for(let C=0;;C+=10){let x=g+(b+C)*f,S=dfe(c,{x:_,y:x},!1,f);if(x<m.top||x>m.bottom||(f<0?S<d:S>d))return At.cursor(S,l.assoc,void 0,p)}}(this,a,h,d))}domAtPos(a){return this.docView.domAtPos(a)}posAtDOM(a,h=0){return this.docView.posFromDOM(a,h)}posAtCoords(a,h=!0){return this.readMeasured(),dfe(this,a,h)}coordsAtPos(a,h=1){this.readMeasured();let d=this.docView.coordsAt(a,h);if(!d||d.left==d.right)return d;let f=this.state.doc.lineAt(a),p=this.bidiSpans(f);return mA(d,p[y1.find(p,a-f.from,-1,h)].dir==As.LTR==h>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(a){return!this.state.facet(Qde)||a<this.viewport.from||a>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(a))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(a){if(a.length>yit)return Jde(a.length);let h=this.textDirectionAt(a.from);for(let f of this.bidiCache)if(f.from==a.from&&f.dir==h)return f.order;let d=function Kde(c,l){let a=c.length,h=l==h7?1:2,d=l==h7?2:1;if(!c||1==h&&!Tnt.test(c))return Jde(a);for(let p=0,g=h,m=h;p<a;p++){let v=Snt(c.charCodeAt(p));512==v?v=g:8==v&&4==m&&(v=16),Is[p]=4==v?2:v,7&v&&(m=v),g=v}for(let p=0,g=h,m=h;p<a;p++){let v=Is[p];if(128==v)p<a-1&&g==Is[p+1]&&24&g?v=Is[p]=g:Is[p]=256;else if(64==v){let y=p+1;for(;y<a&&64==Is[y];)y++;let _=p&&8==g||y<a&&8==Is[y]?1==m?1:8:256;for(let b=p;b<y;b++)Is[b]=_;p=y-1}else 8==v&&1==m&&(Is[p]=1);g=v,7&v&&(m=v)}for(let v,y,_,p=0,g=0,m=0;p<a;p++)if(y=d7[v=c.charCodeAt(p)])if(y<0){for(let b=g-3;b>=0;b-=3)if(Ad[b+1]==-y){let C=Ad[b+2],x=2&C?h:4&C?1&C?d:h:0;x&&(Is[p]=Is[Ad[b]]=x),g=b;break}}else{if(189==Ad.length)break;Ad[g++]=p,Ad[g++]=v,Ad[g++]=m}else if(2==(_=Is[p])||1==_){let b=_==h;m=b?0:1;for(let C=g-3;C>=0;C-=3){let x=Ad[C+2];if(2&x)break;if(b)Ad[C+2]|=2;else{if(4&x)break;Ad[C+2]|=4}}}for(let p=0;p<a;p++)if(256==Is[p]){let g=p+1;for(;g<a&&256==Is[g];)g++;let m=1==(p?Is[p-1]:h),y=m==(1==(g<a?Is[g]:h))?m?1:2:h;for(let _=p;_<g;_++)Is[_]=y;p=g-1}let f=[];if(1==h)for(let p=0;p<a;){let g=p,m=1!=Is[p++];for(;p<a&&m==(1!=Is[p]);)p++;if(m)for(let v=p;v>g;){let y=v,_=2!=Is[--v];for(;v>g&&_==(2!=Is[v-1]);)v--;f.push(new y1(v,y,_?2:1))}else f.push(new y1(g,p,0))}else for(let p=0;p<a;){let g=p,m=2==Is[p++];for(;p<a&&m==(2==Is[p]);)p++;f.push(new y1(g,p,m?1:2))}return f}(a.text,h);return this.bidiCache.push(new DA(a.from,a.to,h,d)),d}get hasFocus(){var a;return(this.dom.ownerDocument.hasFocus()||Un.safari&&(null===(a=this.inputState)||void 0===a?void 0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{xde(this.contentDOM),this.docView.updateSelection()})}setRoot(a){this._root!=a&&(this._root=a,this.observer.setWindow((9==a.nodeType?a:a.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let a of this.plugins)a.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(a,h={}){return jde.of(new bA("number"==typeof a?At.cursor(a):a,h.y,h.x,h.yMargin,h.xMargin))}static domEventHandlers(a){return io.define(()=>({}),{eventHandlers:a})}static theme(a,h){let d=Dg.newName(),f=[OA.of(d),VS.of(x7(`.${d}`,a))];return h&&h.dark&&f.push(b7.of(!0)),f}static baseTheme(a){return H0.lowest(VS.of(x7("."+C7,a,zfe)))}static findFromDOM(a){var h;let d=a.querySelector(".cm-content"),f=d&&fs.get(d)||fs.get(a);return(null===(h=null==f?void 0:f.rootView)||void 0===h?void 0:h.view)||null}}return c.styleModule=VS,c.inputHandler=Gde,c.perLineTextDirection=Qde,c.exceptionSink=Wde,c.updateListener=l7,c.editable=CA,c.mouseSelectionStyle=$de,c.dragMovesSelection=Hde,c.clickAddsSelectionRange=Ude,c.decorations=BS,c.atomicRanges=Zde,c.scrollMargins=Xde,c.darkTheme=b7,c.contentAttributes=u7,c.editorAttributes=qde,c.lineWrapping=c.contentAttributes.of({class:"cm-lineWrapping"}),c.announce=Yi.define(),c})();const yit=4096,Hfe={};class DA{constructor(l,a,h,d){this.from=l,this.to=a,this.dir=h,this.order=d}static update(l,a){if(a.empty)return l;let h=[],d=l.length?l[l.length-1].dir:As.LTR;for(let f=Math.max(0,l.length-10);f<l.length;f++){let p=l[f];p.dir==d&&!a.touchesRange(p.from,p.to)&&h.push(new DA(a.mapPos(p.from,1),a.mapPos(p.to,-1),p.dir,p.order))}return h}}function $fe(c,l,a){for(let h=c.state.facet(l),d=h.length-1;d>=0;d--){let f=h[d],p="function"==typeof f?f(c):f;p&&i7(p,a)}return a}const _it=Un.mac?"mac":Un.windows?"win":Un.linux?"linux":"key";function kA(c,l,a){return l.altKey&&(c="Alt-"+c),l.ctrlKey&&(c="Ctrl-"+c),l.metaKey&&(c="Meta-"+c),!1!==a&&l.shiftKey&&(c="Shift-"+c),c}const Cit=H0.default(Ai.domEventHandlers({keydown:(c,l)=>Qfe(Gfe(l.state),c,l,"editor")})),MA=zn.define({enables:Cit}),Wfe=new WeakMap;function Gfe(c){let l=c.facet(MA),a=Wfe.get(l);return a||Wfe.set(l,a=function Sit(c,l=_it){let a=Object.create(null),h=Object.create(null),d=(p,g)=>{let m=h[p];if(null==m)h[p]=g;else if(m!=g)throw new Error("Key binding "+p+" is used both as a regular binding and as a multi-stroke prefix")},f=(p,g,m,v)=>{var y,_;let b=a[p]||(a[p]=Object.create(null)),C=g.split(/ (?!$)/).map(w=>function bit(c,l){const a=c.split(/-(?!$)/);let d,f,p,g,h=a[a.length-1];"Space"==h&&(h=" ");for(let m=0;m<a.length-1;++m){const v=a[m];if(/^(cmd|meta|m)$/i.test(v))g=!0;else if(/^a(lt)?$/i.test(v))d=!0;else if(/^(c|ctrl|control)$/i.test(v))f=!0;else if(/^s(hift)?$/i.test(v))p=!0;else{if(!/^mod$/i.test(v))throw new Error("Unrecognized modifier name: "+v);"mac"==l?g=!0:f=!0}}return d&&(h="Alt-"+h),f&&(h="Ctrl-"+h),g&&(h="Meta-"+h),p&&(h="Shift-"+h),h}(w,l));for(let w=1;w<C.length;w++){let T=C.slice(0,w).join(" ");d(T,!0),b[T]||(b[T]={preventDefault:!0,run:[O=>{let k=Pg={view:O,prefix:T,scope:p};return setTimeout(()=>{Pg==k&&(Pg=null)},4e3),!0}]})}let x=C.join(" ");d(x,!1);let S=b[x]||(b[x]={preventDefault:!1,run:(null===(_=null===(y=b._any)||void 0===y?void 0:y.run)||void 0===_?void 0:_.slice())||[]});m&&S.run.push(m),v&&(S.preventDefault=!0)};for(let p of c){let g=p.scope?p.scope.split(" "):["editor"];if(p.any)for(let v of g){let y=a[v]||(a[v]=Object.create(null));y._any||(y._any={preventDefault:!1,run:[]});for(let _ in y)y[_].run.push(p.any)}let m=p[l]||p.key;if(m)for(let v of g)f(v,m,p.run,p.preventDefault),p.shift&&f(v,"Shift-"+m,p.shift,p.preventDefault)}return a}(l.reduce((h,d)=>h.concat(d),[]))),a}let Pg=null;function Qfe(c,l,a,h){let d=function unt(c){var a=!(cnt&&(c.ctrlKey||c.altKey||c.metaKey)||lnt&&c.shiftKey&&c.key&&1==c.key.length||"Unidentified"==c.key)&&c.key||(c.shiftKey?IS:kg)[c.keyCode]||c.key||"Unidentified";return"Esc"==a&&(a="Escape"),"Del"==a&&(a="Delete"),"Left"==a&&(a="ArrowLeft"),"Up"==a&&(a="ArrowUp"),"Right"==a&&(a="ArrowRight"),"Down"==a&&(a="ArrowDown"),a}(l),f=ma(d,0),p=Lc(f)==d.length&&" "!=d,g="",m=!1;Pg&&Pg.view==a&&Pg.scope==h&&(g=Pg.prefix+" ",(m=mfe.indexOf(l.keyCode)<0)&&(Pg=null));let b,C,v=new Set,y=x=>{if(x){for(let S of x.run)if(!v.has(S)&&(v.add(S),S(a,l)))return!0;x.preventDefault&&(m=!0)}return!1},_=c[h];if(_){if(y(_[g+kA(d,l,!p)]))return!0;if(p&&(l.shiftKey||l.altKey||l.metaKey||f>127)&&(b=kg[l.keyCode])&&b!=d){if(y(_[g+kA(b,l,!0)]))return!0;if(l.shiftKey&&(C=IS[l.keyCode])!=d&&C!=b&&y(_[g+kA(C,l,!1)]))return!0}else if(p&&l.shiftKey&&y(_[g+kA(d,l,!0)]))return!0;if(y(_._any))return!0}return m}const jfe=!Un.ios,US=zn.define({combine:c=>xh(c,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(l,a)=>Math.min(l,a),drawRangeCursor:(l,a)=>l||a})});function Tit(c={}){return[US.of(c),Oit,Dit]}class qfe{constructor(l,a,h,d,f){this.left=l,this.top=a,this.width=h,this.height=d,this.className=f}draw(){let l=document.createElement("div");return l.className=this.className,this.adjust(l),l}adjust(l){l.style.left=this.left+"px",l.style.top=this.top+"px",this.width>=0&&(l.style.width=this.width+"px"),l.style.height=this.height+"px"}eq(l){return this.left==l.left&&this.top==l.top&&this.width==l.width&&this.height==l.height&&this.className==l.className}}const Oit=io.fromClass(class{constructor(c){this.view=c,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=c.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=c.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),c.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(US).cursorBlinkRate+"ms"}update(c){let l=c.startState.facet(US)!=c.state.facet(US);(l||c.selectionSet||c.geometryChanged||c.viewportChanged)&&this.view.requestMeasure(this.measureReq),c.transactions.some(a=>a.scrollIntoView)&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),l&&this.setBlinkRate()}readPos(){let{state:c}=this.view,l=c.facet(US),a=c.selection.ranges.map(d=>d.empty?[]:function kit(c,l){if(l.to<=c.viewport.from||l.from>=c.viewport.to)return[];let a=Math.max(l.from,c.viewport.from),h=Math.min(l.to,c.viewport.to),d=c.textDirection==As.LTR,f=c.contentDOM,p=f.getBoundingClientRect(),g=Xfe(c),m=window.getComputedStyle(f.firstChild),v=p.left+parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)),y=p.right-parseInt(m.paddingRight),_=Kfe(c,a),b=Kfe(c,h),C=_.type==is.Text?_:null,x=b.type==is.Text?b:null;if(c.lineWrapping&&(C&&(C=Yfe(c,a,C)),x&&(x=Yfe(c,h,x))),C&&x&&C.from==x.from)return w(T(l.from,l.to,C));{let k=C?T(l.from,null,C):O(_,!1),D=x?T(null,l.to,x):O(b,!0),M=[];return(C||_).to<(x||b).from-1?M.push(S(v,k.bottom,y,D.top)):k.bottom<D.top&&c.elementAtHeight((k.bottom+D.top)/2).type==is.Text&&(k.bottom=D.top=(k.bottom+D.top)/2),w(k).concat(M).concat(w(D))}function S(k,D,M,A){return new qfe(k-g.left,D-g.top-.01,M-k,A-D+.01,"cm-selectionBackground")}function w({top:k,bottom:D,horizontal:M}){let A=[];for(let L=0;L<M.length;L+=2)A.push(S(M[L],k,M[L+1],D));return A}function T(k,D,M){let A=1e9,L=-1e9,E=[];function V(Z,Y,N,$,H){let G=c.coordsAtPos(Z,Z==M.to?-2:2),W=c.coordsAtPos(N,N==M.from?2:-2);A=Math.min(G.top,W.top,A),L=Math.max(G.bottom,W.bottom,L),H==As.LTR?E.push(d&&Y?v:G.left,d&&$?y:W.right):E.push(!d&&$?v:W.left,!d&&Y?y:G.right)}let z=null!=k?k:M.from,U=null!=D?D:M.to;for(let Z of c.visibleRanges)if(Z.to>z&&Z.from<U)for(let Y=Math.max(Z.from,z),N=Math.min(Z.to,U);;){let $=c.state.doc.lineAt(Y);for(let H of c.bidiSpans($)){let G=H.from+$.from,W=H.to+$.from;if(G>=N)break;W>Y&&V(Math.max(G,Y),null==k&&G<=z,Math.min(W,N),null==D&&W>=U,H.dir)}if(Y=$.to+1,Y>=N)break}return 0==E.length&&V(z,null==k,U,null==D,c.textDirection),{top:A,bottom:L,horizontal:E}}function O(k,D){let M=p.top+(D?k.top:k.bottom);return{top:M,bottom:M,horizontal:[]}}}(this.view,d)).reduce((d,f)=>d.concat(f)),h=[];for(let d of c.selection.ranges){let f=d==c.selection.main;if(d.empty?!f||jfe:l.drawRangeCursor){let p=Mit(this.view,d,f);p&&h.push(p)}}return{rangePieces:a,cursors:h}}drawSel({rangePieces:c,cursors:l}){if(c.length!=this.rangePieces.length||c.some((a,h)=>!a.eq(this.rangePieces[h]))){this.selectionLayer.textContent="";for(let a of c)this.selectionLayer.appendChild(a.draw());this.rangePieces=c}if(l.length!=this.cursors.length||l.some((a,h)=>!a.eq(this.cursors[h]))){let a=this.cursorLayer.children;if(a.length!==l.length){this.cursorLayer.textContent="";for(const h of l)this.cursorLayer.appendChild(h.draw())}else l.forEach((h,d)=>h.adjust(a[d]));this.cursors=l}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Zfe={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};jfe&&(Zfe[".cm-line"].caretColor="transparent !important");const Dit=H0.highest(Ai.theme(Zfe));function Xfe(c){let l=c.scrollDOM.getBoundingClientRect();return{left:(c.textDirection==As.LTR?l.left:l.right-c.scrollDOM.clientWidth)-c.scrollDOM.scrollLeft,top:l.top-c.scrollDOM.scrollTop}}function Yfe(c,l,a){let h=At.cursor(l);return{from:Math.max(a.from,c.moveToLineBoundary(h,!1,!0).from),to:Math.min(a.to,c.moveToLineBoundary(h,!0,!0).from),type:is.Text}}function Kfe(c,l){let a=c.lineBlockAt(l);if(Array.isArray(a.type))for(let h of a.type)if(h.to>l||h.to==l&&(h.to==a.to||h.type==is.Text))return h;return a}function Mit(c,l,a){let h=c.coordsAtPos(l.head,l.assoc||1);if(!h)return null;let d=Xfe(c);return new qfe(h.left-d.left,h.top-d.top,-1,h.bottom-h.top,a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Jfe=Yi.define({map:(c,l)=>null==c?null:l.mapPos(c)}),HS=yo.define({create:()=>null,update:(c,l)=>(null!=c&&(c=l.changes.mapPos(c)),l.effects.reduce((a,h)=>h.is(Jfe)?h.value:a,c))}),Eit=io.fromClass(class{constructor(c){this.view=c,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(c){var l;let a=c.state.field(HS);null==a?null!=this.cursor&&(null===(l=this.cursor)||void 0===l||l.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(c.startState.field(HS)!=a||c.docChanged||c.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let c=this.view.state.field(HS),l=null!=c&&this.view.coordsAtPos(c);if(!l)return null;let a=this.view.scrollDOM.getBoundingClientRect();return{left:l.left-a.left+this.view.scrollDOM.scrollLeft,top:l.top-a.top+this.view.scrollDOM.scrollTop,height:l.bottom-l.top}}drawCursor(c){this.cursor&&(c?(this.cursor.style.left=c.left+"px",this.cursor.style.top=c.top+"px",this.cursor.style.height=c.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(c){this.view.state.field(HS)!=c&&this.view.dispatch({effects:Jfe.of(c)})}},{eventHandlers:{dragover(c){this.setDropPos(this.view.posAtCoords({x:c.clientX,y:c.clientY}))},dragleave(c){(c.target==this.view.contentDOM||!this.view.contentDOM.contains(c.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function epe(c,l,a,h,d){l.lastIndex=0;for(let g,f=c.iterRange(a,h),p=a;!f.next().done;p+=f.value.length)if(!f.lineBreak)for(;g=l.exec(f.value);)d(p+g.index,g)}class Pit{constructor(l){const{regexp:a,decoration:h,decorate:d,boundary:f,maxLength:p=1e3}=l;if(!a.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=a,d)this.addMatch=(g,m,v,y)=>d(y,v,v+g[0].length,g,m);else if("function"==typeof h)this.addMatch=(g,m,v,y)=>{let _=h(g,m,v);_&&y(v,v+g[0].length,_)};else{if(!h)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(g,m,v,y)=>y(v,v+g[0].length,h)}this.boundary=f,this.maxLength=p}createDeco(l){let a=new Og,h=a.add.bind(a);for(let{from:d,to:f}of function Iit(c,l){let a=c.visibleRanges;if(1==a.length&&a[0].from==c.viewport.from&&a[0].to==c.viewport.to)return a;let h=[];for(let{from:d,to:f}of a)d=Math.max(c.state.doc.lineAt(d).from,d-l),f=Math.min(c.state.doc.lineAt(f).to,f+l),h.length&&h[h.length-1].to>=d?h[h.length-1].to=f:h.push({from:d,to:f});return h}(l,this.maxLength))epe(l.state.doc,this.regexp,d,f,(p,g)=>this.addMatch(g,l,p,h));return a.finish()}updateDeco(l,a){let h=1e9,d=-1;return l.docChanged&&l.changes.iterChanges((f,p,g,m)=>{m>l.view.viewport.from&&g<l.view.viewport.to&&(h=Math.min(g,h),d=Math.max(m,d))}),l.viewportChanged||d-h>1e3?this.createDeco(l.view):d>-1?this.updateRange(l.view,a.map(l.changes),h,d):a}updateRange(l,a,h,d){for(let f of l.visibleRanges){let p=Math.max(f.from,h),g=Math.min(f.to,d);if(g>p){let m=l.state.doc.lineAt(p),v=m.to<g?l.state.doc.lineAt(g):m,y=Math.max(f.from,m.from),_=Math.min(f.to,v.to);if(this.boundary){for(;p>m.from;p--)if(this.boundary.test(m.text[p-1-m.from])){y=p;break}for(;g<v.to;g++)if(this.boundary.test(v.text[g-v.from])){_=g;break}}let C,b=[],x=(S,w,T)=>b.push(T.range(S,w));if(m==v)for(this.regexp.lastIndex=y-m.from;(C=this.regexp.exec(m.text))&&C.index<_-m.from;)this.addMatch(C,l,C.index+m.from,x);else epe(l.state.doc,this.regexp,y,_,(S,w)=>this.addMatch(w,l,S,x));a=a.update({filterFrom:y,filterTo:_,filter:(S,w)=>S<y||w>_,add:b})}}return a}}const S7=null!=/x/.unicode?"gu":"g",Rit=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",S7),Fit={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let T7=null;const EA=zn.define({combine(c){let l=xh(c,{render:null,specialChars:Rit,addSpecialChars:null});return(l.replaceTabs=!function Nit(){var c;if(null==T7&&"undefined"!=typeof document&&document.body){let l=document.body.style;T7=null!=(null!==(c=l.tabSize)&&void 0!==c?c:l.MozTabSize)}return T7||!1}())&&(l.specialChars=new RegExp("\t|"+l.specialChars.source,S7)),l.addSpecialChars&&(l.specialChars=new RegExp(l.specialChars.source+"|"+l.addSpecialChars.source,S7)),l}});function Lit(c={}){return[EA.of(c),tpe||(tpe=io.fromClass(class{constructor(c){this.view=c,this.decorations=Hn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(c.state.facet(EA)),this.decorations=this.decorator.createDeco(c)}makeDecorator(c){return new Pit({regexp:c.specialChars,decoration:(l,a,h)=>{let{doc:d}=a.state,f=ma(l[0],0);if(9==f){let p=d.lineAt(h),g=a.state.tabSize,m=AS(p.text,g,h-p.from);return Hn.replace({widget:new Hit((g-m%g)*this.view.defaultCharacterWidth)})}return this.decorationCache[f]||(this.decorationCache[f]=Hn.replace({widget:new Uit(c,f)}))},boundary:c.replaceTabs?void 0:/[^]/})}update(c){let l=c.state.facet(EA);c.startState.facet(EA)!=l?(this.decorator=this.makeDecorator(l),this.decorations=this.decorator.createDeco(c.view)):this.decorations=this.decorator.updateDeco(c,this.decorations)}},{decorations:c=>c.decorations}))]}let tpe=null;class Uit extends Jf{constructor(l,a){super(),this.options=l,this.code=a}eq(l){return l.code==this.code}toDOM(l){let a=function zit(c){return c>=32?"\u2022":10==c?"\u2424":String.fromCharCode(9216+c)}(this.code),h=l.state.phrase("Control character")+" "+(Fit[this.code]||"0x"+this.code.toString(16)),d=this.options.render&&this.options.render(this.code,h,a);if(d)return d;let f=document.createElement("span");return f.textContent=a,f.title=h,f.setAttribute("aria-label",h),f.className="cm-specialChar",f}ignoreEvent(){return!1}}class Hit extends Jf{constructor(l){super(),this.width=l}eq(l){return l.width==this.width}toDOM(){let l=document.createElement("span");return l.textContent="\t",l.className="cm-tab",l.style.width=this.width+"px",l}ignoreEvent(){return!1}}const Wit=Hn.line({class:"cm-activeLine"}),Git=io.fromClass(class{constructor(c){this.decorations=this.getDeco(c)}update(c){(c.docChanged||c.selectionSet)&&(this.decorations=this.getDeco(c.view))}getDeco(c){let l=-1,a=[];for(let h of c.state.selection.ranges){let d=c.lineBlockAt(h.head);d.from>l&&(a.push(Wit.range(d.from)),l=d.from)}return Hn.set(a)}},{decorations:c=>c.decorations});function ipe(c,l){let a=c.posAtCoords({x:l.clientX,y:l.clientY},!1),h=c.state.doc.lineAt(a),d=a-h.from,f=d>2e3?-1:d==h.length?function qit(c,l){let a=c.coordsAtPos(c.viewport.from);return a?Math.round(Math.abs((a.left-l)/c.defaultCharacterWidth)):-1}(c,l.clientX):AS(h.text,c.state.tabSize,a-h.from);return{line:h.number,col:f,off:d}}function Xit(c){let l=(null==c?void 0:c.eventFilter)||(a=>a.altKey&&0==a.button);return Ai.mouseSelectionStyle.of((a,h)=>l(h)?function Zit(c,l){let a=ipe(c,l),h=c.state.selection;return a?{update(d){if(d.docChanged){let f=d.changes.mapPos(d.startState.doc.line(a.line).from),p=d.state.doc.lineAt(f);a={line:p.number,col:a.col,off:Math.min(a.off,p.length)},h=h.map(d.changes)}},get(d,f,p){let g=ipe(c,d);if(!g)return h;let m=function jit(c,l,a){let h=Math.min(l.line,a.line),d=Math.max(l.line,a.line),f=[];if(l.off>2e3||a.off>2e3||l.col<0||a.col<0){let p=Math.min(l.off,a.off),g=Math.max(l.off,a.off);for(let m=h;m<=d;m++){let v=c.doc.line(m);v.length<=g&&f.push(At.range(v.from+p,v.to+g))}}else{let p=Math.min(l.col,a.col),g=Math.max(l.col,a.col);for(let m=h;m<=d;m++){let v=c.doc.line(m),y=QU(v.text,p,c.tabSize,!0);if(y>-1){let _=QU(v.text,g,c.tabSize);f.push(At.range(v.from+y,v.from+_))}}}return f}(c.state,a,g);return m.length?At.create(p?m.concat(h.ranges):m):h}}:null}(a,h):null)}const Yit={Alt:[18,c=>c.altKey],Control:[17,c=>c.ctrlKey],Shift:[16,c=>c.shiftKey],Meta:[91,c=>c.metaKey]},Kit={style:"cursor: crosshair"};function Jit(c={}){let[l,a]=Yit[c.key||"Alt"],h=io.fromClass(class{constructor(d){this.view=d,this.isDown=!1}set(d){this.isDown!=d&&(this.isDown=d,this.view.update([]))}},{eventHandlers:{keydown(d){this.set(d.keyCode==l||a(d))},keyup(d){(d.keyCode==l||!a(d))&&this.set(!1)}}});return[h,Ai.contentAttributes.of(d=>{var f;return null!==(f=d.plugin(h))&&void 0!==f&&f.isDown?Kit:null})]}const D7="-10000px";class rpe{constructor(l,a,h){this.facet=a,this.createTooltipView=h,this.input=l.state.facet(a),this.tooltips=this.input.filter(d=>d),this.tooltipViews=this.tooltips.map(h)}update(l){let a=l.state.facet(this.facet),h=a.filter(f=>f);if(a===this.input){for(let f of this.tooltipViews)f.update&&f.update(l);return!1}let d=[];for(let f=0;f<h.length;f++){let p=h[f],g=-1;if(p){for(let m=0;m<this.tooltips.length;m++){let v=this.tooltips[m];v&&v.create==p.create&&(g=m)}if(g<0)d[f]=this.createTooltipView(p);else{let m=d[f]=this.tooltipViews[g];m.update&&m.update(l)}}}for(let f of this.tooltipViews)d.indexOf(f)<0&&f.dom.remove();return this.input=a,this.tooltips=h,this.tooltipViews=d,!0}}function ert(c){let{win:l}=c;return{top:0,left:0,bottom:l.innerHeight,right:l.innerWidth}}const AA=zn.define({combine:c=>{var l,a,h;return{position:Un.ios?"absolute":(null===(l=c.find(d=>d.position))||void 0===l?void 0:l.position)||"fixed",parent:(null===(a=c.find(d=>d.parent))||void 0===a?void 0:a.parent)||null,tooltipSpace:(null===(h=c.find(d=>d.tooltipSpace))||void 0===h?void 0:h.tooltipSpace)||ert}}}),k7=io.fromClass(class{constructor(c){this.view=c,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let l=c.state.facet(AA);this.position=l.position,this.parent=l.parent,this.classes=c.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new rpe(c,IA,a=>this.createTooltip(a)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(a=>{Date.now()>this.lastTransaction-50&&a.length>0&&a[a.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),c.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let c of this.manager.tooltipViews)this.intersectionObserver.observe(c.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(c){c.transactions.length&&(this.lastTransaction=Date.now());let l=this.manager.update(c);l&&this.observeIntersection();let a=l||c.geometryChanged,h=c.state.facet(AA);if(h.position!=this.position){this.position=h.position;for(let d of this.manager.tooltipViews)d.dom.style.position=this.position;a=!0}if(h.parent!=this.parent){this.parent&&this.container.remove(),this.parent=h.parent,this.createContainer();for(let d of this.manager.tooltipViews)this.container.appendChild(d.dom);a=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);a&&this.maybeMeasure()}createTooltip(c){let l=c.create(this.view);if(l.dom.classList.add("cm-tooltip"),c.arrow&&!l.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let a=document.createElement("div");a.className="cm-tooltip-arrow",l.dom.appendChild(a)}return l.dom.style.position=this.position,l.dom.style.top=D7,this.container.appendChild(l.dom),l.mount&&l.mount(this.view),l}destroy(){var c;this.view.win.removeEventListener("resize",this.measureSoon);for(let{dom:l}of this.manager.tooltipViews)l.remove();null===(c=this.intersectionObserver)||void 0===c||c.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let c=this.view.dom.getBoundingClientRect();return{editor:c,parent:this.parent?this.container.getBoundingClientRect():c,pos:this.manager.tooltips.map((l,a)=>{let h=this.manager.tooltipViews[a];return h.getCoords?h.getCoords(l.pos):this.view.coordsAtPos(l.pos)}),size:this.manager.tooltipViews.map(({dom:l})=>l.getBoundingClientRect()),space:this.view.state.facet(AA).tooltipSpace(this.view)}}writeMeasure(c){let{editor:l,space:a}=c,h=[];for(let d=0;d<this.manager.tooltips.length;d++){let f=this.manager.tooltips[d],p=this.manager.tooltipViews[d],{dom:g}=p,m=c.pos[d],v=c.size[d];if(!m||m.bottom<=Math.max(l.top,a.top)||m.top>=Math.min(l.bottom,a.bottom)||m.right<Math.max(l.left,a.left)-.1||m.left>Math.min(l.right,a.right)+.1){g.style.top=D7;continue}let y=f.arrow?p.dom.querySelector(".cm-tooltip-arrow"):null,_=y?7:0,b=v.right-v.left,C=v.bottom-v.top,x=p.offset||nrt,S=this.view.textDirection==As.LTR,w=v.width>a.right-a.left?S?a.left:a.right-v.width:S?Math.min(m.left-(y?14:0)+x.x,a.right-b):Math.max(a.left,m.left-b+(y?14:0)-x.x),T=!!f.above;!f.strictSide&&(T?m.top-(v.bottom-v.top)-x.y<a.top:m.bottom+(v.bottom-v.top)+x.y>a.bottom)&&T==a.bottom-m.bottom>m.top-a.top&&(T=!T);let O=T?m.top-C-_-x.y:m.bottom+_+x.y,k=w+b;if(!0!==p.overlap)for(let D of h)D.left<k&&D.right>w&&D.top<O+C&&D.bottom>O&&(O=T?D.top-C-2-_:D.bottom+_+2);"absolute"==this.position?(g.style.top=O-c.parent.top+"px",g.style.left=w-c.parent.left+"px"):(g.style.top=O+"px",g.style.left=w+"px"),y&&(y.style.left=m.left+(S?x.x:-x.x)-(w+14-7)+"px"),!0!==p.overlap&&h.push({left:w,top:O,right:k,bottom:O+C}),g.classList.toggle("cm-tooltip-above",T),g.classList.toggle("cm-tooltip-below",!T),p.positioned&&p.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let c of this.manager.tooltipViews)c.dom.style.top=D7}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),nrt={x:0,y:0},IA=zn.define({enables:[k7,Ai.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}})]}),$S=zn.define();class M7{constructor(l){this.view=l,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new rpe(l,$S,a=>this.createHostedView(a))}static create(l){return new M7(l)}createHostedView(l){let a=l.create(this.view);return a.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(a.dom),this.mounted&&a.mount&&a.mount(this.view),a}mount(l){for(let a of this.manager.tooltipViews)a.mount&&a.mount(l);this.mounted=!0}positioned(){for(let l of this.manager.tooltipViews)l.positioned&&l.positioned()}update(l){this.manager.update(l)}}const irt=IA.compute([$S],c=>{let l=c.facet($S).filter(a=>a);return 0===l.length?null:{pos:Math.min(...l.map(a=>a.pos)),end:Math.max(...l.filter(a=>null!=a.end).map(a=>a.end)),create:M7.create,above:l[0].above,arrow:l.some(a=>a.arrow)}});class rrt{constructor(l,a,h,d,f){this.view=l,this.source=a,this.field=h,this.setHover=d,this.hoverTime=f,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:l.dom,time:0},this.checkHover=this.checkHover.bind(this),l.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),l.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let l=Date.now()-this.lastMove.time;l<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-l):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:l}=this,a=this.view.contentDOM.contains(l.target)?this.view.posAtCoords(l):null;if(null==a)return;let h=this.view.coordsAtPos(a);if(null==h||l.y<h.top||l.y>h.bottom||l.x<h.left-this.view.defaultCharacterWidth||l.x>h.right+this.view.defaultCharacterWidth)return;let d=this.view.bidiSpans(this.view.state.doc.lineAt(a)).find(g=>g.from<=a&&g.to>=a),f=d&&d.dir==As.RTL?-1:1,p=this.source(this.view,a,l.x<h.left?-f:f);if(null!=p&&p.then){let g=this.pending={pos:a};p.then(m=>{this.pending==g&&(this.pending=null,m&&this.view.dispatch({effects:this.setHover.of(m)}))},m=>Vc(this.view.state,m,"hover tooltip"))}else p&&this.view.dispatch({effects:this.setHover.of(p)})}mousemove(l){var a;this.lastMove={x:l.clientX,y:l.clientY,target:l.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let h=this.active;if(h&&!function srt(c){for(let l=c;l;l=l.parentNode)if(1==l.nodeType&&l.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:d}=h||this.pending,f=null!==(a=null==h?void 0:h.end)&&void 0!==a?a:d;(d==f?this.view.posAtCoords(this.lastMove)!=d:!function ort(c,l,a,h,d,f){let p=document.createRange(),g=c.domAtPos(l),m=c.domAtPos(a);p.setEnd(m.node,m.offset),p.setStart(g.node,g.offset);let v=p.getClientRects();p.detach();for(let y=0;y<v.length;y++){let _=v[y];if(Math.max(_.top-d,d-_.bottom,_.left-h,h-_.right)<=f)return!0}return!1}(this.view,d,f,l.clientX,l.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function art(c,l={}){let a=Yi.define(),h=yo.define({create:()=>null,update(d,f){if(d&&(l.hideOnChange&&(f.docChanged||f.selection)||l.hideOn&&l.hideOn(f,d)))return null;if(d&&f.docChanged){let p=f.changes.mapPos(d.pos,-1,va.TrackDel);if(null==p)return null;let g=Object.assign(Object.create(null),d);g.pos=p,null!=d.end&&(g.end=f.changes.mapPos(d.end)),d=g}for(let p of f.effects)p.is(a)&&(d=p.value),p.is(crt)&&(d=null);return d},provide:d=>$S.from(d)});return[h,io.define(d=>new rrt(d,c,h,a,l.hoverTime||300)),irt]}const crt=Yi.define(),E7=zn.define({combine(c){let l,a;for(let h of c)l=l||h.topContainer,a=a||h.bottomContainer;return{topContainer:l,bottomContainer:a}}});function WS(c,l){let a=c.plugin(spe),h=a?a.specs.indexOf(l):-1;return h>-1?a.panels[h]:null}const spe=io.fromClass(class{constructor(c){this.input=c.state.facet(GS),this.specs=this.input.filter(a=>a),this.panels=this.specs.map(a=>a(c));let l=c.state.facet(E7);this.top=new PA(c,!0,l.topContainer),this.bottom=new PA(c,!1,l.bottomContainer),this.top.sync(this.panels.filter(a=>a.top)),this.bottom.sync(this.panels.filter(a=>!a.top));for(let a of this.panels)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}update(c){let l=c.state.facet(E7);this.top.container!=l.topContainer&&(this.top.sync([]),this.top=new PA(c.view,!0,l.topContainer)),this.bottom.container!=l.bottomContainer&&(this.bottom.sync([]),this.bottom=new PA(c.view,!1,l.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let a=c.state.facet(GS);if(a!=this.input){let h=a.filter(m=>m),d=[],f=[],p=[],g=[];for(let m of h){let y,v=this.specs.indexOf(m);v<0?(y=m(c.view),g.push(y)):(y=this.panels[v],y.update&&y.update(c)),d.push(y),(y.top?f:p).push(y)}this.specs=h,this.panels=d,this.top.sync(f),this.bottom.sync(p);for(let m of g)m.dom.classList.add("cm-panel"),m.mount&&m.mount()}else for(let h of this.panels)h.update&&h.update(c)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:c=>Ai.scrollMargins.of(l=>{let a=l.plugin(c);return a&&{top:a.top.scrollMargin(),bottom:a.bottom.scrollMargin()}})});class PA{constructor(l,a,h){this.view=l,this.top=a,this.container=h,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(l){for(let a of this.panels)a.destroy&&l.indexOf(a)<0&&a.destroy();this.panels=l,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let a=this.container||this.view.dom;a.insertBefore(this.dom,this.top?a.firstChild:null)}let l=this.dom.firstChild;for(let a of this.panels)if(a.dom.parentNode==this.dom){for(;l!=a.dom;)l=ope(l);l=l.nextSibling}else this.dom.insertBefore(a.dom,l);for(;l;)l=ope(l)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let l of this.classes.split(" "))l&&this.container.classList.remove(l);for(let l of(this.classes=this.view.themeClasses).split(" "))l&&this.container.classList.add(l)}}}function ope(c){let l=c.nextSibling;return c.remove(),l}const GS=zn.define({enables:spe});class Id extends G0{compare(l){return this==l||this.constructor==l.constructor&&this.eq(l)}eq(l){return!1}destroy(l){}}Id.prototype.elementClass="",Id.prototype.toDOM=void 0,Id.prototype.mapMode=va.TrackBefore,Id.prototype.startSide=Id.prototype.endSide=-1,Id.prototype.point=!0;const RA=zn.define(),urt={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Es.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},QS=zn.define();function ape(c){return[lpe(),QS.of(Object.assign(Object.assign({},urt),c))]}const A7=zn.define({combine:c=>c.some(l=>l)});function lpe(c){let l=[hrt];return c&&!1===c.fixed&&l.push(A7.of(!0)),l}const hrt=io.fromClass(class{constructor(c){this.view=c,this.prevViewport=c.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=c.state.facet(QS).map(l=>new hpe(c,l));for(let l of this.gutters)this.dom.appendChild(l.dom);this.fixed=!c.state.facet(A7),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),c.scrollDOM.insertBefore(this.dom,c.contentDOM)}update(c){if(this.updateGutters(c)){let l=this.prevViewport,a=c.view.viewport,h=Math.min(l.to,a.to)-Math.max(l.from,a.from);this.syncGutters(h<.8*(a.to-a.from))}c.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(A7)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=c.view.viewport}syncGutters(c){let l=this.dom.nextSibling;c&&this.dom.remove();let a=Es.iter(this.view.state.facet(RA),this.view.viewport.from),h=[],d=this.gutters.map(f=>new drt(f,this.view.viewport,-this.view.documentPadding.top));for(let f of this.view.viewportLineBlocks){let p;if(Array.isArray(f.type)){for(let g of f.type)if(g.type==is.Text){p=g;break}}else p=f.type==is.Text?f:void 0;if(p){h.length&&(h=[]),upe(a,h,f.from);for(let g of d)g.line(this.view,p,h)}}for(let f of d)f.finish();c&&this.view.scrollDOM.insertBefore(this.dom,l)}updateGutters(c){let l=c.startState.facet(QS),a=c.state.facet(QS),h=c.docChanged||c.heightChanged||c.viewportChanged||!Es.eq(c.startState.facet(RA),c.state.facet(RA),c.view.viewport.from,c.view.viewport.to);if(l==a)for(let d of this.gutters)d.update(c)&&(h=!0);else{h=!0;let d=[];for(let f of a){let p=l.indexOf(f);p<0?d.push(new hpe(this.view,f)):(this.gutters[p].update(c),d.push(this.gutters[p]))}for(let f of this.gutters)f.dom.remove(),d.indexOf(f)<0&&f.destroy();for(let f of d)this.dom.appendChild(f.dom);this.gutters=d}return h}destroy(){for(let c of this.gutters)c.destroy();this.dom.remove()}},{provide:c=>Ai.scrollMargins.of(l=>{let a=l.plugin(c);return a&&0!=a.gutters.length&&a.fixed?l.textDirection==As.LTR?{left:a.dom.offsetWidth}:{right:a.dom.offsetWidth}:null})});function cpe(c){return Array.isArray(c)?c:[c]}function upe(c,l,a){for(;c.value&&c.from<=a;)c.from==a&&l.push(c.value),c.next()}class drt{constructor(l,a,h){this.gutter=l,this.height=h,this.localMarkers=[],this.i=0,this.cursor=Es.iter(l.markers,a.from)}line(l,a,h){this.localMarkers.length&&(this.localMarkers=[]),upe(this.cursor,this.localMarkers,a.from);let d=h.length?this.localMarkers.concat(h):this.localMarkers,f=this.gutter.config.lineMarker(l,a,d);f&&d.unshift(f);let p=this.gutter;if(0==d.length&&!p.config.renderEmptyElements)return;let g=a.top-this.height;if(this.i==p.elements.length){let m=new dpe(l,a.height,g,d);p.elements.push(m),p.dom.appendChild(m.dom)}else p.elements[this.i].update(l,a.height,g,d);this.height=a.bottom,this.i++}finish(){let l=this.gutter;for(;l.elements.length>this.i;){let a=l.elements.pop();l.dom.removeChild(a.dom),a.destroy()}}}class hpe{constructor(l,a){this.view=l,this.config=a,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let h in a.domEventHandlers)this.dom.addEventListener(h,d=>{let f=l.lineBlockAtHeight(d.clientY-l.documentTop);a.domEventHandlers[h](l,f,d)&&d.preventDefault()});this.markers=cpe(a.markers(l)),a.initialSpacer&&(this.spacer=new dpe(l,0,0,[a.initialSpacer(l)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(l){let a=this.markers;if(this.markers=cpe(this.config.markers(l.view)),this.spacer&&this.config.updateSpacer){let d=this.config.updateSpacer(this.spacer.markers[0],l);d!=this.spacer.markers[0]&&this.spacer.update(l.view,0,0,[d])}let h=l.view.viewport;return!Es.eq(this.markers,a,h.from,h.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(l)}destroy(){for(let l of this.elements)l.destroy()}}class dpe{constructor(l,a,h,d){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(l,a,h,d)}update(l,a,h,d){this.height!=a&&(this.dom.style.height=(this.height=a)+"px"),this.above!=h&&(this.dom.style.marginTop=(this.above=h)?h+"px":""),function frt(c,l){if(c.length!=l.length)return!1;for(let a=0;a<c.length;a++)if(!c[a].compare(l[a]))return!1;return!0}(this.markers,d)||this.setMarkers(l,d)}setMarkers(l,a){let h="cm-gutterElement",d=this.dom.firstChild;for(let f=0,p=0;;){let g=p,m=f<a.length?a[f++]:null,v=!1;if(m){let y=m.elementClass;y&&(h+=" "+y);for(let _=p;_<this.markers.length;_++)if(this.markers[_].compare(m)){g=_,v=!0;break}}else g=this.markers.length;for(;p<g;){let y=this.markers[p++];if(y.toDOM){y.destroy(d);let _=d.nextSibling;d.remove(),d=_}}if(!m)break;m.toDOM&&(v?d=d.nextSibling:this.dom.insertBefore(m.toDOM(l),d)),v&&p++}this.dom.className=h,this.markers=a}destroy(){this.setMarkers(null,[])}}const prt=zn.define(),_1=zn.define({combine:c=>xh(c,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(l,a){let h=Object.assign({},l);for(let d in a){let f=h[d],p=a[d];h[d]=f?(g,m,v)=>f(g,m,v)||p(g,m,v):p}return h}})});class I7 extends Id{constructor(l){super(),this.number=l}eq(l){return this.number==l.number}toDOM(){return document.createTextNode(this.number)}}function P7(c,l){return c.state.facet(_1).formatNumber(l,c.state)}const grt=QS.compute([_1],c=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:l=>l.state.facet(prt),lineMarker:(l,a,h)=>h.some(d=>d.toDOM)?null:new I7(P7(l,l.state.doc.lineAt(a.from).number)),lineMarkerChange:l=>l.startState.facet(_1)!=l.state.facet(_1),initialSpacer:l=>new I7(P7(l,fpe(l.state.doc.lines))),updateSpacer(l,a){let h=P7(a.view,fpe(a.view.state.doc.lines));return h==l.number?l:new I7(h)},domEventHandlers:c.facet(_1).domEventHandlers}));function mrt(c={}){return[_1.of(c),lpe(),grt]}function fpe(c){let l=9;for(;l<c;)l=10*l+9;return l}const vrt=new class extends Id{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},yrt=RA.compute(["selection"],c=>{let l=[],a=-1;for(let h of c.selection.ranges){let d=c.doc.lineAt(h.head).from;d>a&&(a=d,l.push(vrt.range(d)))}return Es.of(l)}),ppe=1024;let brt=0;class Du{constructor(l,a){this.from=l,this.to=a}}class Ki{constructor(l={}){this.id=brt++,this.perNode=!!l.perNode,this.deserialize=l.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(l){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof l&&(l=Dl.match(l)),a=>{let h=l(a);return void 0===h?null:[this,h]}}}Ki.closedBy=new Ki({deserialize:c=>c.split(" ")}),Ki.openedBy=new Ki({deserialize:c=>c.split(" ")}),Ki.group=new Ki({deserialize:c=>c.split(" ")}),Ki.contextHash=new Ki({perNode:!0}),Ki.lookAhead=new Ki({perNode:!0}),Ki.mounted=new Ki({perNode:!0});const xrt=Object.create(null);class Dl{constructor(l,a,h,d=0){this.name=l,this.props=a,this.id=h,this.flags=d}static define(l){let a=l.props&&l.props.length?Object.create(null):xrt,d=new Dl(l.name||"",a,l.id,(l.top?1:0)|(l.skipped?2:0)|(l.error?4:0)|(null==l.name?8:0));if(l.props)for(let f of l.props)if(Array.isArray(f)||(f=f(d)),f){if(f[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");a[f[0].id]=f[1]}return d}prop(l){return this.props[l.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(l){if("string"==typeof l){if(this.name==l)return!0;let a=this.prop(Ki.group);return!!a&&a.indexOf(l)>-1}return this.id==l}static match(l){let a=Object.create(null);for(let h in l)for(let d of h.split(" "))a[d]=l[h];return h=>{for(let d=h.prop(Ki.group),f=-1;f<(d?d.length:0);f++){let p=a[f<0?h.name:d[f]];if(p)return p}}}}Dl.none=new Dl("",Object.create(null),0,8);class FA{constructor(l){this.types=l;for(let a=0;a<l.length;a++)if(l[a].id!=a)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...l){let a=[];for(let h of this.types){let d=null;for(let f of l){let p=f(h);p&&(d||(d=Object.assign({},h.props)),d[p[0].id]=p[1])}a.push(d?new Dl(h.name,d,h.id,h.flags):h)}return new FA(a)}}const NA=new WeakMap,gpe=new WeakMap;var ps=(()=>(function(c){c[c.ExcludeBuffers=1]="ExcludeBuffers",c[c.IncludeAnonymous=2]="IncludeAnonymous",c[c.IgnoreMounts=4]="IgnoreMounts",c[c.IgnoreOverlays=8]="IgnoreOverlays"}(ps||(ps={})),ps))();class Ps{constructor(l,a,h,d,f){if(this.type=l,this.children=a,this.positions=h,this.length=d,this.props=null,f&&f.length){this.props=Object.create(null);for(let[p,g]of f)this.props["number"==typeof p?p:p.id]=g}}toString(){let l=this.prop(Ki.mounted);if(l&&!l.overlay)return l.tree.toString();let a="";for(let h of this.children){let d=h.toString();d&&(a&&(a+=","),a+=d)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(a.length?"("+a+")":""):a}cursor(l=0){return new jS(this.topNode,l)}cursorAt(l,a=0,h=0){let d=NA.get(this)||this.topNode,f=new jS(d);return f.moveTo(l,a),NA.set(this,f._tree),f}get topNode(){return new ku(this,0,0,null)}resolve(l,a=0){let h=b1(NA.get(this)||this.topNode,l,a,!1);return NA.set(this,h),h}resolveInner(l,a=0){let h=b1(gpe.get(this)||this.topNode,l,a,!0);return gpe.set(this,h),h}iterate(l){let{enter:a,leave:h,from:d=0,to:f=this.length}=l;for(let p=this.cursor((l.mode||0)|ps.IncludeAnonymous);;){let g=!1;if(p.from<=f&&p.to>=d&&(p.type.isAnonymous||!1!==a(p))){if(p.firstChild())continue;g=!0}for(;g&&h&&!p.type.isAnonymous&&h(p),!p.nextSibling();){if(!p.parent())return;g=!0}}}prop(l){return l.perNode?this.props?this.props[l.id]:void 0:this.type.prop(l)}get propValues(){let l=[];if(this.props)for(let a in this.props)l.push([+a,this.props[a]]);return l}balance(l={}){return this.children.length<=8?this:N7(Dl.none,this.children,this.positions,0,this.children.length,0,this.length,(a,h,d)=>new Ps(this.type,a,h,d,this.propValues),l.makeTree||((a,h,d)=>new Ps(Dl.none,a,h,d)))}static build(l){return function Srt(c){var l;let{buffer:a,nodeSet:h,maxBufferLength:d=ppe,reused:f=[],minRepeatType:p=h.types.length}=c,g=Array.isArray(a)?new R7(a,a.length):a,m=h.types,v=0,y=0;function _(D,M,A,L,E){let{id:V,start:z,end:U,size:Z}=g,Y=y;for(;Z<0;){if(g.next(),-1==Z)return A.push(f[V]),void L.push(z-D);if(-3==Z)return void(v=V);if(-4==Z)return void(y=V);throw new RangeError(`Unrecognized record size: ${Z}`)}let $,H,N=m[V],G=z-D;if(U-z<=d&&(H=function S(D,M){let A=g.fork(),L=0,E=0,V=0,z=A.end-d,U={size:0,start:0,skip:0};e:for(let Z=A.pos-D;A.pos>Z;){let Y=A.size;if(A.id==M&&Y>=0){U.size=L,U.start=E,U.skip=V,V+=4,L+=4,A.next();continue}let N=A.pos-Y;if(Y<0||N<Z||A.start<z)break;let $=A.id>=p?4:0,H=A.start;for(A.next();A.pos>N;){if(A.size<0){if(-3!=A.size)break e;$+=4}else A.id>=p&&($+=4);A.next()}E=H,L+=Y,V+=$}return(M<0||L==D)&&(U.size=L,U.start=E,U.skip=V),U.size>4?U:void 0}(g.pos-M,E))){let W=new Uint16Array(H.size-H.skip),j=g.pos-H.size,Q=W.length;for(;g.pos>j;)Q=w(H.start,W,Q);$=new q0(W,U-H.start,h),G=H.start-D}else{let W=g.pos-Z;g.next();let j=[],Q=[],J=V>=p?V:-1,te=0,ce=U;for(;g.pos>W;)J>=0&&g.id==J&&g.size>=0?(g.end<=ce-d&&(C(j,Q,z,te,g.end,ce,J,Y),te=j.length,ce=g.end),g.next()):_(z,W,j,Q,J);if(J>=0&&te>0&&te<j.length&&C(j,Q,z,te,z,ce,J,Y),j.reverse(),Q.reverse(),J>-1&&te>0){let ae=function b(D){return(M,A,L)=>{let z,U,E=0,V=M.length-1;if(V>=0&&(z=M[V])instanceof Ps){if(!V&&z.type==D&&z.length==L)return z;(U=z.prop(Ki.lookAhead))&&(E=A[V]+z.length+U)}return x(D,M,A,L,E)}}(N);$=N7(N,j,Q,0,j.length,0,U-z,ae,ae)}else $=x(N,j,Q,U-z,Y-U)}A.push($),L.push(G)}function C(D,M,A,L,E,V,z,U){let Z=[],Y=[];for(;D.length>L;)Z.push(D.pop()),Y.push(M.pop()+A-E);D.push(x(h.types[z],Z,Y,V-E,U-V)),M.push(E-A)}function x(D,M,A,L,E=0,V){if(v){let z=[Ki.contextHash,v];V=V?[z].concat(V):[z]}if(E>25){let z=[Ki.lookAhead,E];V=V?[z].concat(V):[z]}return new Ps(D,M,A,L,V)}function w(D,M,A){let{id:L,start:E,end:V,size:z}=g;if(g.next(),z>=0&&L<p){let U=A;if(z>4){let Z=g.pos-(z-4);for(;g.pos>Z;)A=w(D,M,A)}M[--A]=U,M[--A]=V-D,M[--A]=E-D,M[--A]=L}else-3==z?v=L:-4==z&&(y=L);return A}let T=[],O=[];for(;g.pos>0;)_(c.start||0,c.bufferStart||0,T,O,-1);let k=null!==(l=c.length)&&void 0!==l?l:T.length?O[0]+T[0].length:0;return new Ps(m[c.topID],T.reverse(),O.reverse(),k)}(l)}}Ps.empty=new Ps(Dl.none,[],[],0);class R7{constructor(l,a){this.buffer=l,this.index=a}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new R7(this.buffer,this.index)}}class q0{constructor(l,a,h){this.buffer=l,this.length=a,this.set=h}get type(){return Dl.none}toString(){let l=[];for(let a=0;a<this.buffer.length;)l.push(this.childString(a)),a=this.buffer[a+3];return l.join(",")}childString(l){let h=this.buffer[l+3],d=this.set.types[this.buffer[l]],f=d.name;if(/\W/.test(f)&&!d.isError&&(f=JSON.stringify(f)),h==(l+=4))return f;let p=[];for(;l<h;)p.push(this.childString(l)),l=this.buffer[l+3];return f+"("+p.join(",")+")"}findChild(l,a,h,d,f){let{buffer:p}=this,g=-1;for(let m=l;m!=a&&!(mpe(f,d,p[m+1],p[m+2])&&(g=m,h>0));m=p[m+3]);return g}slice(l,a,h,d){let f=this.buffer,p=new Uint16Array(a-l);for(let g=l,m=0;g<a;)p[m++]=f[g++],p[m++]=f[g++]-h,p[m++]=f[g++]-h,p[m++]=f[g++]-l;return new q0(p,d-h,this.set)}}function mpe(c,l,a,h){switch(c){case-2:return a<l;case-1:return h>=l&&a<l;case 0:return a<l&&h>l;case 1:return a<=l&&h>l;case 2:return h>l;case 4:return!0}}function vpe(c,l){let a=c.childBefore(l);for(;a;){let h=a.lastChild;if(!h||h.to!=a.to)break;h.type.isError&&h.from==h.to?(c=a,a=h.prevSibling):a=h}return c}function b1(c,l,a,h){for(var d;c.from==c.to||(a<1?c.from>=l:c.from>l)||(a>-1?c.to<=l:c.to<l);){let p=!h&&c instanceof ku&&c.index<0?null:c.parent;if(!p)return c;c=p}let f=h?0:ps.IgnoreOverlays;if(h)for(let p=c,g=p.parent;g;p=g,g=p.parent)p instanceof ku&&p.index<0&&(null===(d=g.enter(l,a,f))||void 0===d?void 0:d.from)!=p.from&&(c=g);for(;;){let p=c.enter(l,a,f);if(!p)return c;c=p}}class ku{constructor(l,a,h,d){this._tree=l,this.from=a,this.index=h,this._parent=d}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(l,a,h,d,f=0){for(let p=this;;){for(let{children:g,positions:m}=p._tree,v=a>0?g.length:-1;l!=v;l+=a){let y=g[l],_=m[l]+p.from;if(mpe(d,h,_,_+y.length))if(y instanceof q0){if(f&ps.ExcludeBuffers)continue;let b=y.findChild(0,y.buffer.length,a,h-_,d);if(b>-1)return new Pd(new wrt(p,y,l,_),null,b)}else if(f&ps.IncludeAnonymous||!y.type.isAnonymous||F7(y)){let b;if(!(f&ps.IgnoreMounts)&&y.props&&(b=y.prop(Ki.mounted))&&!b.overlay)return new ku(b.tree,_,l,p);let C=new ku(y,_,l,p);return f&ps.IncludeAnonymous||!C.type.isAnonymous?C:C.nextChild(a<0?y.children.length-1:0,a,h,d)}}if(f&ps.IncludeAnonymous||!p.type.isAnonymous||(l=p.index>=0?p.index+a:a<0?-1:p._parent._tree.children.length,p=p._parent,!p))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(l){return this.nextChild(0,1,l,2)}childBefore(l){return this.nextChild(this._tree.children.length-1,-1,l,-2)}enter(l,a,h=0){let d;if(!(h&ps.IgnoreOverlays)&&(d=this._tree.prop(Ki.mounted))&&d.overlay){let f=l-this.from;for(let{from:p,to:g}of d.overlay)if((a>0?p<=f:p<f)&&(a<0?g>=f:g>f))return new ku(d.tree,d.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,l,a,h)}nextSignificantParent(){let l=this;for(;l.type.isAnonymous&&l._parent;)l=l._parent;return l}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(l=0){return new jS(this,l)}get tree(){return this._tree}toTree(){return this._tree}resolve(l,a=0){return b1(this,l,a,!1)}resolveInner(l,a=0){return b1(this,l,a,!0)}enterUnfinishedNodesBefore(l){return vpe(this,l)}getChild(l,a=null,h=null){let d=LA(this,l,a,h);return d.length?d[0]:null}getChildren(l,a=null,h=null){return LA(this,l,a,h)}toString(){return this._tree.toString()}get node(){return this}matchContext(l){return BA(this,l)}}function LA(c,l,a,h){let d=c.cursor(),f=[];if(!d.firstChild())return f;if(null!=a)for(;!d.type.is(a);)if(!d.nextSibling())return f;for(;;){if(null!=h&&d.type.is(h))return f;if(d.type.is(l)&&f.push(d.node),!d.nextSibling())return null==h?f:[]}}function BA(c,l,a=l.length-1){for(let h=c.parent;a>=0;h=h.parent){if(!h)return!1;if(!h.type.isAnonymous){if(l[a]&&l[a]!=h.name)return!1;a--}}return!0}class wrt{constructor(l,a,h,d){this.parent=l,this.buffer=a,this.index=h,this.start=d}}class Pd{constructor(l,a,h){this.context=l,this._parent=a,this.index=h,this.type=l.buffer.set.types[l.buffer.buffer[h]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(l,a,h){let{buffer:d}=this.context,f=d.findChild(this.index+4,d.buffer[this.index+3],l,a-this.context.start,h);return f<0?null:new Pd(this.context,this,f)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(l){return this.child(1,l,2)}childBefore(l){return this.child(-1,l,-2)}enter(l,a,h=0){if(h&ps.ExcludeBuffers)return null;let{buffer:d}=this.context,f=d.findChild(this.index+4,d.buffer[this.index+3],a>0?1:-1,l-this.context.start,a);return f<0?null:new Pd(this.context,this,f)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(l){return this._parent?null:this.context.parent.nextChild(this.context.index+l,l,0,4)}get nextSibling(){let{buffer:l}=this.context,a=l.buffer[this.index+3];return a<(this._parent?l.buffer[this._parent.index+3]:l.buffer.length)?new Pd(this.context,this._parent,a):this.externalSibling(1)}get prevSibling(){let{buffer:l}=this.context,a=this._parent?this._parent.index+4:0;return this.index==a?this.externalSibling(-1):new Pd(this.context,this._parent,l.findChild(a,this.index,-1,0,4))}cursor(l=0){return new jS(this,l)}get tree(){return null}toTree(){let l=[],a=[],{buffer:h}=this.context,d=this.index+4,f=h.buffer[this.index+3];return f>d&&(l.push(h.slice(d,f,h.buffer[this.index+1],h.buffer[this.index+2])),a.push(0)),new Ps(this.type,l,a,this.to-this.from)}resolve(l,a=0){return b1(this,l,a,!1)}resolveInner(l,a=0){return b1(this,l,a,!0)}enterUnfinishedNodesBefore(l){return vpe(this,l)}toString(){return this.context.buffer.childString(this.index)}getChild(l,a=null,h=null){let d=LA(this,l,a,h);return d.length?d[0]:null}getChildren(l,a=null,h=null){return LA(this,l,a,h)}get node(){return this}matchContext(l){return BA(this,l)}}class jS{constructor(l,a=0){if(this.mode=a,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,l instanceof ku)this.yieldNode(l);else{this._tree=l.context.parent,this.buffer=l.context;for(let h=l._parent;h;h=h._parent)this.stack.unshift(h.index);this.bufferNode=l,this.yieldBuf(l.index)}}get name(){return this.type.name}yieldNode(l){return!!l&&(this._tree=l,this.type=l.type,this.from=l.from,this.to=l.to,!0)}yieldBuf(l,a){this.index=l;let{start:h,buffer:d}=this.buffer;return this.type=a||d.set.types[d.buffer[l]],this.from=h+d.buffer[l+1],this.to=h+d.buffer[l+2],!0}yield(l){return!!l&&(l instanceof ku?(this.buffer=null,this.yieldNode(l)):(this.buffer=l.context,this.yieldBuf(l.index,l.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(l,a,h){if(!this.buffer)return this.yield(this._tree.nextChild(l<0?this._tree._tree.children.length-1:0,l,a,h,this.mode));let{buffer:d}=this.buffer,f=d.findChild(this.index+4,d.buffer[this.index+3],l,a-this.buffer.start,h);return!(f<0)&&(this.stack.push(this.index),this.yieldBuf(f))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(l){return this.enterChild(1,l,2)}childBefore(l){return this.enterChild(-1,l,-2)}enter(l,a,h=this.mode){return this.buffer?!(h&ps.ExcludeBuffers)&&this.enterChild(1,l,a):this.yield(this._tree.enter(l,a,h))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ps.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let l=this.mode&ps.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(l)}sibling(l){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+l,l,0,4,this.mode));let{buffer:a}=this.buffer,h=this.stack.length-1;if(l<0){let d=h<0?0:this.stack[h]+4;if(this.index!=d)return this.yieldBuf(a.findChild(d,this.index,-1,0,4))}else{let d=a.buffer[this.index+3];if(d<(h<0?a.buffer.length:a.buffer[this.stack[h]+3]))return this.yieldBuf(d)}return h<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+l,l,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(l){let a,h,{buffer:d}=this;if(d){if(l>0){if(this.index<d.buffer.buffer.length)return!1}else for(let f=0;f<this.index;f++)if(d.buffer.buffer[f+3]<this.index)return!1;({index:a,parent:h}=d)}else({index:a,_parent:h}=this._tree);for(;h;({index:a,_parent:h}=h))if(a>-1)for(let f=a+l,p=l<0?-1:h._tree.children.length;f!=p;f+=l){let g=h._tree.children[f];if(this.mode&ps.IncludeAnonymous||g instanceof q0||!g.type.isAnonymous||F7(g))return!1}return!0}move(l,a){if(a&&this.enterChild(l,0,4))return!0;for(;;){if(this.sibling(l))return!0;if(this.atLastNode(l)||!this.parent())return!1}}next(l=!0){return this.move(1,l)}prev(l=!0){return this.move(-1,l)}moveTo(l,a=0){for(;(this.from==this.to||(a<1?this.from>=l:this.from>l)||(a>-1?this.to<=l:this.to<l))&&this.parent(););for(;this.enterChild(1,l,a););return this}get node(){if(!this.buffer)return this._tree;let l=this.bufferNode,a=null,h=0;if(l&&l.context==this.buffer)e:for(let d=this.index,f=this.stack.length;f>=0;){for(let p=l;p;p=p._parent)if(p.index==d){if(d==this.index)return p;a=p,h=f+1;break e}d=this.stack[--f]}for(let d=h;d<this.stack.length;d++)a=new Pd(this.buffer,a,this.stack[d]);return this.bufferNode=new Pd(this.buffer,a,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(l,a){for(let h=0;;){let d=!1;if(this.type.isAnonymous||!1!==l(this)){if(this.firstChild()){h++;continue}this.type.isAnonymous||(d=!0)}for(;d&&a&&a(this),d=this.type.isAnonymous,!this.nextSibling();){if(!h)return;this.parent(),h--,d=!0}}}matchContext(l){if(!this.buffer)return BA(this.node,l);let{buffer:a}=this.buffer,{types:h}=a.set;for(let d=l.length-1,f=this.stack.length-1;d>=0;f--){if(f<0)return BA(this.node,l,d);let p=h[a.buffer[this.stack[f]]];if(!p.isAnonymous){if(l[d]&&l[d]!=p.name)return!1;d--}}return!0}}function F7(c){return c.children.some(l=>l instanceof q0||!l.type.isAnonymous||F7(l))}const ype=new WeakMap;function VA(c,l){if(!c.isAnonymous||l instanceof q0||l.type!=c)return 1;let a=ype.get(l);if(null==a){a=1;for(let h of l.children){if(h.type!=c||!(h instanceof Ps)){a=1;break}a+=VA(c,h)}ype.set(l,a)}return a}function N7(c,l,a,h,d,f,p,g,m){let v=0;for(let x=h;x<d;x++)v+=VA(c,l[x]);let y=Math.ceil(1.5*v/8),_=[],b=[];return function C(x,S,w,T,O){for(let k=w;k<T;){let D=k,M=S[k],A=VA(c,x[k]);for(k++;k<T;k++){let L=VA(c,x[k]);if(A+L>=y)break;A+=L}if(k==D+1){if(A>y){let L=x[D];C(L.children,L.positions,0,L.children.length,S[D]+O);continue}_.push(x[D])}else _.push(N7(c,x,S,D,k,M,S[k-1]+x[k-1].length-M,null,m));b.push(M+O-f)}}(l,a,h,d,0),(g||m)(_,b,p)}class Trt{constructor(){this.map=new WeakMap}setBuffer(l,a,h){let d=this.map.get(l);d||this.map.set(l,d=new Map),d.set(a,h)}getBuffer(l,a){let h=this.map.get(l);return h&&h.get(a)}set(l,a){l instanceof Pd?this.setBuffer(l.context.buffer,l.index,a):l instanceof ku&&this.map.set(l.tree,a)}get(l){return l instanceof Pd?this.getBuffer(l.context.buffer,l.index):l instanceof ku?this.map.get(l.tree):void 0}cursorSet(l,a){l.buffer?this.setBuffer(l.buffer.buffer,l.index,a):this.map.set(l.tree,a)}cursorGet(l){return l.buffer?this.getBuffer(l.buffer.buffer,l.index):this.map.get(l.tree)}}class ep{constructor(l,a,h,d,f=!1,p=!1){this.from=l,this.to=a,this.tree=h,this.offset=d,this.open=(f?1:0)|(p?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(l,a=[],h=!1){let d=[new ep(0,l.length,l,0,!1,h)];for(let f of a)f.to>l.length&&d.push(f);return d}static applyChanges(l,a,h=128){if(!a.length)return l;let d=[],f=1,p=l.length?l[0]:null;for(let g=0,m=0,v=0;;g++){let y=g<a.length?a[g]:null,_=y?y.fromA:1e9;if(_-m>=h)for(;p&&p.from<_;){let b=p;if(m>=b.from||_<=b.to||v){let C=Math.max(b.from,m)-v,x=Math.min(b.to,_)-v;b=C>=x?null:new ep(C,x,b.tree,b.offset+v,g>0,!!y)}if(b&&d.push(b),p.to>_)break;p=f<l.length?l[f++]:null}if(!y)break;m=y.toA,v=y.toA-y.toB}return d}}class _pe{startParse(l,a,h){return"string"==typeof l&&(l=new Ort(l)),h=h?h.length?h.map(d=>new Du(d.from,d.to)):[new Du(0,0)]:[new Du(0,l.length)],this.createParse(l,a||[],h)}parse(l,a,h){let d=this.startParse(l,a,h);for(;;){let f=d.advance();if(f)return f}}}class Ort{constructor(l){this.string=l}get length(){return this.string.length}chunk(l){return this.string.slice(l)}get lineChunks(){return!1}read(l,a){return this.string.slice(l,a)}}new Ki({perNode:!0});let Prt=0;class Rd{constructor(l,a,h){this.set=l,this.base=a,this.modified=h,this.id=Prt++}static define(l){if(null!=l&&l.base)throw new Error("Can not derive from a modified tag");let a=new Rd([],null,[]);if(a.set.push(a),l)for(let h of l.set)a.set.push(h);return a}static defineModifier(){let l=new zA;return a=>a.modified.indexOf(l)>-1?a:zA.get(a.base||a,a.modified.concat(l).sort((h,d)=>h.id-d.id))}}let Rrt=0;class zA{constructor(){this.instances=[],this.id=Rrt++}static get(l,a){if(!a.length)return l;let h=a[0].instances.find(g=>g.base==l&&function Frt(c,l){return c.length==l.length&&c.every((a,h)=>a==l[h])}(a,g.modified));if(h)return h;let d=[],f=new Rd(d,l,a);for(let g of a)g.instances.push(f);let p=Tpe(a);for(let g of l.set)for(let m of p)d.push(zA.get(g,m));return f}}function Tpe(c){let l=[c];for(let a=0;a<c.length;a++)for(let h of Tpe(c.slice(0,a).concat(c.slice(a+1))))l.push(h);return l}function Ope(c){let l=Object.create(null);for(let a in c){let h=c[a];Array.isArray(h)||(h=[h]);for(let d of a.split(" "))if(d){let f=[],p=2,g=d;for(let _=0;;){if("..."==g&&_>0&&_+3==d.length){p=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(g);if(!b)throw new RangeError("Invalid path: "+d);if(f.push("*"==b[0]?"":'"'==b[0][0]?JSON.parse(b[0]):b[0]),_+=b[0].length,_==d.length)break;let C=d[_++];if(_==d.length&&"!"==C){p=0;break}if("/"!=C)throw new RangeError("Invalid path: "+d);g=d.slice(_)}let m=f.length-1,v=f[m];if(!v)throw new RangeError("Invalid path: "+d);let y=new UA(h,p,m>0?f.slice(0,m):null);l[v]=y.sort(l[v])}}return Dpe.add(l)}const Dpe=new Ki;class UA{constructor(l,a,h,d){this.tags=l,this.mode=a,this.context=h,this.next=d}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(l){return!l||l.depth<this.depth?(this.next=l,this):(l.next=this.sort(l.next),l)}get depth(){return this.context?this.context.length:0}}function kpe(c,l){let a=Object.create(null);for(let f of c)if(Array.isArray(f.tag))for(let p of f.tag)a[p.id]=f.class;else a[f.tag.id]=f.class;let{scope:h,all:d=null}=l||{};return{style:f=>{let p=d;for(let g of f)for(let m of g.set){let v=a[m.id];if(v){p=p?p+" "+v:v;break}}return p},scope:h}}function Lrt(c,l,a,h=0,d=c.length){let f=new Brt(h,Array.isArray(l)?l:[l],a);f.highlightRange(c.cursor(),h,d,"",f.highlighters),f.flush(d)}UA.empty=new UA([],2,null);class Brt{constructor(l,a,h){this.at=l,this.highlighters=a,this.span=h,this.class=""}startSpan(l,a){a!=this.class&&(this.flush(l),l>this.at&&(this.at=l),this.class=a)}flush(l){l>this.at&&this.class&&this.span(this.at,l,this.class)}highlightRange(l,a,h,d,f){let{type:p,from:g,to:m}=l;if(g>=h||m<=a)return;p.isTop&&(f=this.highlighters.filter(C=>!C.scope||C.scope(p)));let v=d,y=function Vrt(c){let l=c.type.prop(Dpe);for(;l&&l.context&&!c.matchContext(l.context);)l=l.next;return l||null}(l)||UA.empty,_=function Nrt(c,l){let a=null;for(let h of c){let d=h.style(l);d&&(a=a?a+" "+d:d)}return a}(f,y.tags);if(_&&(v&&(v+=" "),v+=_,1==y.mode&&(d+=(d?" ":"")+_)),this.startSpan(l.from,v),y.opaque)return;let b=l.tree&&l.tree.prop(Ki.mounted);if(b&&b.overlay){let C=l.node.enter(b.overlay[0].from+g,1),x=this.highlighters.filter(w=>!w.scope||w.scope(b.tree.type)),S=l.firstChild();for(let w=0,T=g;;w++){let O=w<b.overlay.length?b.overlay[w]:null,k=O?O.from+g:m,D=Math.max(a,T),M=Math.min(h,k);if(D<M&&S)for(;l.from<M&&(this.highlightRange(l,D,M,d,f),this.startSpan(Math.min(h,l.to),v),!(l.to>=k)&&l.nextSibling()););if(!O||k>h)break;T=O.to+g,T>a&&(this.highlightRange(C.cursor(),Math.max(a,O.from+g),Math.min(h,T),d,x),this.startSpan(T,v))}S&&l.parent()}else if(l.firstChild()){do{if(!(l.to<=a)){if(l.from>=h)break;this.highlightRange(l,a,h,d,f),this.startSpan(Math.min(h,l.to),v)}}while(l.nextSibling());l.parent()}}}const ln=Rd.define,HA=ln(),Rg=ln(),Mpe=ln(Rg),Epe=ln(Rg),Fg=ln(),$A=ln(Fg),B7=ln(Fg),Fd=ln(),Z0=ln(Fd),Nd=ln(),Ld=ln(),V7=ln(),qS=ln(V7),WA=ln(),Ue={comment:HA,lineComment:ln(HA),blockComment:ln(HA),docComment:ln(HA),name:Rg,variableName:ln(Rg),typeName:Mpe,tagName:ln(Mpe),propertyName:Epe,attributeName:ln(Epe),className:ln(Rg),labelName:ln(Rg),namespace:ln(Rg),macroName:ln(Rg),literal:Fg,string:$A,docString:ln($A),character:ln($A),attributeValue:ln($A),number:B7,integer:ln(B7),float:ln(B7),bool:ln(Fg),regexp:ln(Fg),escape:ln(Fg),color:ln(Fg),url:ln(Fg),keyword:Nd,self:ln(Nd),null:ln(Nd),atom:ln(Nd),unit:ln(Nd),modifier:ln(Nd),operatorKeyword:ln(Nd),controlKeyword:ln(Nd),definitionKeyword:ln(Nd),moduleKeyword:ln(Nd),operator:Ld,derefOperator:ln(Ld),arithmeticOperator:ln(Ld),logicOperator:ln(Ld),bitwiseOperator:ln(Ld),compareOperator:ln(Ld),updateOperator:ln(Ld),definitionOperator:ln(Ld),typeOperator:ln(Ld),controlOperator:ln(Ld),punctuation:V7,separator:ln(V7),bracket:qS,angleBracket:ln(qS),squareBracket:ln(qS),paren:ln(qS),brace:ln(qS),content:Fd,heading:Z0,heading1:ln(Z0),heading2:ln(Z0),heading3:ln(Z0),heading4:ln(Z0),heading5:ln(Z0),heading6:ln(Z0),contentSeparator:ln(Fd),list:ln(Fd),quote:ln(Fd),emphasis:ln(Fd),strong:ln(Fd),link:ln(Fd),monospace:ln(Fd),strikethrough:ln(Fd),inserted:ln(),deleted:ln(),changed:ln(),invalid:ln(),meta:WA,documentMeta:ln(WA),annotation:ln(WA),processingInstruction:ln(WA),definition:Rd.defineModifier(),constant:Rd.defineModifier(),function:Rd.defineModifier(),standard:Rd.defineModifier(),local:Rd.defineModifier(),special:Rd.defineModifier()};var z7;kpe([{tag:Ue.link,class:"tok-link"},{tag:Ue.heading,class:"tok-heading"},{tag:Ue.emphasis,class:"tok-emphasis"},{tag:Ue.strong,class:"tok-strong"},{tag:Ue.keyword,class:"tok-keyword"},{tag:Ue.atom,class:"tok-atom"},{tag:Ue.bool,class:"tok-bool"},{tag:Ue.url,class:"tok-url"},{tag:Ue.labelName,class:"tok-labelName"},{tag:Ue.inserted,class:"tok-inserted"},{tag:Ue.deleted,class:"tok-deleted"},{tag:Ue.literal,class:"tok-literal"},{tag:Ue.string,class:"tok-string"},{tag:Ue.number,class:"tok-number"},{tag:[Ue.regexp,Ue.escape,Ue.special(Ue.string)],class:"tok-string2"},{tag:Ue.variableName,class:"tok-variableName"},{tag:Ue.local(Ue.variableName),class:"tok-variableName tok-local"},{tag:Ue.definition(Ue.variableName),class:"tok-variableName tok-definition"},{tag:Ue.special(Ue.variableName),class:"tok-variableName2"},{tag:Ue.definition(Ue.propertyName),class:"tok-propertyName tok-definition"},{tag:Ue.typeName,class:"tok-typeName"},{tag:Ue.namespace,class:"tok-namespace"},{tag:Ue.className,class:"tok-className"},{tag:Ue.macroName,class:"tok-macroName"},{tag:Ue.propertyName,class:"tok-propertyName"},{tag:Ue.operator,class:"tok-operator"},{tag:Ue.comment,class:"tok-comment"},{tag:Ue.meta,class:"tok-meta"},{tag:Ue.invalid,class:"tok-invalid"},{tag:Ue.punctuation,class:"tok-punctuation"}]);const C1=new Ki;let Mu=(()=>{class c{constructor(a,h,d=[]){this.data=a,Sl.prototype.hasOwnProperty("tree")||Object.defineProperty(Sl.prototype,"tree",{get(){return ro(this)}}),this.parser=h,this.extension=[Ng.of(this),Sl.languageData.of((f,p,g)=>f.facet(Ipe(f,p,g)))].concat(d)}isActiveAt(a,h,d=-1){return Ipe(a,h,d)==this.data}findRegions(a){let h=a.facet(Ng);if((null==h?void 0:h.data)==this.data)return[{from:0,to:a.doc.length}];if(!h||!h.allowsNesting)return[];let d=[],f=(p,g)=>{if(p.prop(C1)==this.data)return void d.push({from:g,to:g+p.length});let m=p.prop(Ki.mounted);if(m){if(m.tree.prop(C1)==this.data){if(m.overlay)for(let v of m.overlay)d.push({from:v.from+g,to:v.to+g});else d.push({from:g,to:g+p.length});return}if(m.overlay){let v=d.length;if(f(m.tree,m.overlay[0].from+g),d.length>v)return}}for(let v=0;v<p.children.length;v++){let y=p.children[v];y instanceof Ps&&f(y,p.positions[v]+g)}};return f(ro(a),0),d}get allowsNesting(){return!0}}return c.setState=Yi.define(),c})();function Ipe(c,l,a){let h=c.facet(Ng);if(!h)return null;let d=h.data;if(h.allowsNesting)for(let f=ro(c).topNode;f;f=f.enter(l,a,ps.ExcludeBuffers))d=f.type.prop(C1)||d;return d}class GA extends Mu{constructor(l,a){super(l,a),this.parser=a}static define(l){let a=function Ape(c){return zn.define({combine:c?l=>l.concat(c):void 0})}(l.languageData);return new GA(a,l.parser.configure({props:[C1.add(h=>h.isTop?a:void 0)]}))}configure(l){return new GA(this.data,this.parser.configure(l))}get allowsNesting(){return this.parser.hasWrappers()}}function ro(c){let l=c.field(Mu.state,!1);return l?l.tree:Ps.empty}class Urt{constructor(l,a=l.length){this.doc=l,this.length=a,this.cursorPos=0,this.string="",this.cursor=l.iter()}syncTo(l){return this.string=this.cursor.next(l-this.cursorPos).value,this.cursorPos=l+this.string.length,this.cursorPos-this.string.length}chunk(l){return this.syncTo(l),this.string}get lineChunks(){return!0}read(l,a){let h=this.cursorPos-this.string.length;return l<h||a>=this.cursorPos?this.doc.sliceString(l,a):this.string.slice(l-h,a-h)}}let ZS=null;class x1{constructor(l,a,h=[],d,f,p,g,m){this.parser=l,this.state=a,this.fragments=h,this.tree=d,this.treeLen=f,this.viewport=p,this.skipped=g,this.scheduleOn=m,this.parse=null,this.tempSkipped=[]}static create(l,a,h){return new x1(l,a,[],Ps.empty,0,h,[],null)}startParse(){return this.parser.startParse(new Urt(this.state.doc),this.fragments)}work(l,a){return null!=a&&a>=this.state.doc.length&&(a=void 0),this.tree!=Ps.empty&&this.isDone(null!=a?a:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var h;if("number"==typeof l){let d=Date.now()+l;l=()=>Date.now()>d}for(this.parse||(this.parse=this.startParse()),null!=a&&(null==this.parse.stoppedAt||this.parse.stoppedAt>a)&&a<this.state.doc.length&&this.parse.stopAt(a);;){let d=this.parse.advance();if(d){if(this.fragments=this.withoutTempSkipped(ep.addTree(d,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(h=this.parse.stoppedAt)&&void 0!==h?h:this.state.doc.length,this.tree=d,this.parse=null,!(this.treeLen<(null!=a?a:this.state.doc.length)))return!0;this.parse=this.startParse()}if(l())return!1}})}takeTree(){let l,a;this.parse&&(l=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>l)&&this.parse.stopAt(l),this.withContext(()=>{for(;!(a=this.parse.advance()););}),this.treeLen=l,this.tree=a,this.fragments=this.withoutTempSkipped(ep.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(l){let a=ZS;ZS=this;try{return l()}finally{ZS=a}}withoutTempSkipped(l){for(let a;a=this.tempSkipped.pop();)l=Ppe(l,a.from,a.to);return l}changes(l,a){let{fragments:h,tree:d,treeLen:f,viewport:p,skipped:g}=this;if(this.takeTree(),!l.empty){let m=[];if(l.iterChangedRanges((v,y,_,b)=>m.push({fromA:v,toA:y,fromB:_,toB:b})),h=ep.applyChanges(h,m),d=Ps.empty,f=0,p={from:l.mapPos(p.from,-1),to:l.mapPos(p.to,1)},this.skipped.length){g=[];for(let v of this.skipped){let y=l.mapPos(v.from,1),_=l.mapPos(v.to,-1);y<_&&g.push({from:y,to:_})}}}return new x1(this.parser,a,h,d,f,p,g,this.scheduleOn)}updateViewport(l){if(this.viewport.from==l.from&&this.viewport.to==l.to)return!1;this.viewport=l;let a=this.skipped.length;for(let h=0;h<this.skipped.length;h++){let{from:d,to:f}=this.skipped[h];d<l.to&&f>l.from&&(this.fragments=Ppe(this.fragments,d,f),this.skipped.splice(h--,1))}return!(this.skipped.length>=a||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(l,a){this.skipped.push({from:l,to:a})}static getSkippingParser(l){return new class extends _pe{createParse(a,h,d){let f=d[0].from,p=d[d.length-1].to;return{parsedPos:f,advance(){let m=ZS;if(m){for(let v of d)m.tempSkipped.push(v);l&&(m.scheduleOn=m.scheduleOn?Promise.all([m.scheduleOn,l]):l)}return this.parsedPos=p,new Ps(Dl.none,[],[],p-f)},stoppedAt:null,stopAt(){}}}}}isDone(l){l=Math.min(l,this.state.doc.length);let a=this.fragments;return this.treeLen>=l&&a.length&&0==a[0].from&&a[0].to>=l}static get(){return ZS}}function Ppe(c,l,a){return ep.applyChanges(c,[{fromA:l,toA:a,fromB:l,toB:a}])}class w1{constructor(l){this.context=l,this.tree=l.tree}apply(l){if(!l.docChanged&&this.tree==this.context.tree)return this;let a=this.context.changes(l.changes,l.state),h=this.context.treeLen==l.startState.doc.length?void 0:Math.max(l.changes.mapPos(this.context.treeLen),a.viewport.to);return a.work(20,h)||a.takeTree(),new w1(a)}static init(l){let a=Math.min(3e3,l.doc.length),h=x1.create(l.facet(Ng).parser,l,{from:0,to:a});return h.work(20,a)||h.takeTree(),new w1(h)}}Mu.state=yo.define({create:w1.init,update(c,l){for(let a of l.effects)if(a.is(Mu.setState))return a.value;return l.startState.facet(Ng)!=l.state.facet(Ng)?w1.init(l.state):c.apply(l)}});let Rpe=c=>{let l=setTimeout(()=>c(),500);return()=>clearTimeout(l)};"undefined"!=typeof requestIdleCallback&&(Rpe=c=>{let l=-1,a=setTimeout(()=>{l=requestIdleCallback(c,{timeout:400})},100);return()=>l<0?clearTimeout(a):cancelIdleCallback(l)});const U7="undefined"!=typeof navigator&&(null===(z7=navigator.scheduling)||void 0===z7?void 0:z7.isInputPending)?()=>navigator.scheduling.isInputPending():null,Fpe=io.fromClass(class{constructor(l){this.view=l,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(l){let a=this.view.state.field(Mu.state).context;(a.updateViewport(l.view.viewport)||this.view.viewport.to>a.treeLen)&&this.scheduleWork(),l.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(a)}scheduleWork(){if(this.working)return;let{state:l}=this.view,a=l.field(Mu.state);(a.tree!=a.context.tree||!a.context.isDone(l.doc.length))&&(this.working=Rpe(this.work))}work(l){this.working=null;let a=Date.now();if(this.chunkEnd<a&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=a+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:h,viewport:{to:d}}=this.view,f=h.field(Mu.state);if(f.tree==f.context.tree&&f.context.isDone(d+1e5))return;let p=Date.now()+Math.min(this.chunkBudget,100,l&&!U7?Math.max(25,l.timeRemaining()-5):1e9),g=f.context.treeLen<d&&h.doc.length>d+1e3,m=f.context.work(()=>U7&&U7()||Date.now()>p,d+(g?0:1e5));this.chunkBudget-=Date.now()-a,(m||this.chunkBudget<=0)&&(f.context.takeTree(),this.view.dispatch({effects:Mu.setState.of(new w1(f.context))})),this.chunkBudget>0&&!(m&&!g)&&this.scheduleWork(),this.checkAsyncSchedule(f.context)}checkAsyncSchedule(l){l.scheduleOn&&(this.workScheduled++,l.scheduleOn.then(()=>this.scheduleWork()).catch(a=>Vc(this.view.state,a)).then(()=>this.workScheduled--),l.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ng=zn.define({combine:c=>c.length?c[0]:null,enables:[Mu.state,Fpe]});class Hrt{constructor(l,a=[]){this.language=l,this.support=a,this.extension=[l,a]}}const Lpe=zn.define(),QA=zn.define({combine:c=>{if(!c.length)return"  ";if(!/^(?: +|\t+)$/.test(c[0]))throw new Error("Invalid indent unit: "+JSON.stringify(c[0]));return c[0]}});function X0(c){let l=c.facet(QA);return 9==l.charCodeAt(0)?c.tabSize*l.length:l.length}function S1(c,l){let a="",h=c.tabSize;if(9==c.facet(QA).charCodeAt(0))for(;l>=h;)a+="\t",l-=h;for(let d=0;d<l;d++)a+=" ";return a}function jA(c,l){c instanceof Sl&&(c=new XS(c));for(let h of c.state.facet(Lpe)){let d=h(c,l);if(null!=d)return d}let a=ro(c.state);return a?function $rt(c,l,a){return Vpe(l.resolveInner(a).enterUnfinishedNodesBefore(a),a,c)}(c,a,l):null}class XS{constructor(l,a={}){this.state=l,this.options=a,this.unit=X0(l)}lineAt(l,a=1){let h=this.state.doc.lineAt(l),{simulateBreak:d,simulateDoubleBreak:f}=this.options;return null!=d&&d>=h.from&&d<=h.to?f&&d==l?{text:"",from:l}:(a<0?d<l:d<=l)?{text:h.text.slice(d-h.from),from:d}:{text:h.text.slice(0,d-h.from),from:h.from}:h}textAfterPos(l,a=1){if(this.options.simulateDoubleBreak&&l==this.options.simulateBreak)return"";let{text:h,from:d}=this.lineAt(l,a);return h.slice(l-d,Math.min(h.length,l+100-d))}column(l,a=1){let{text:h,from:d}=this.lineAt(l,a),f=this.countColumn(h,l-d),p=this.options.overrideIndentation?this.options.overrideIndentation(d):-1;return p>-1&&(f+=p-this.countColumn(h,h.search(/\S|$/))),f}countColumn(l,a=l.length){return AS(l,this.state.tabSize,a)}lineIndent(l,a=1){let{text:h,from:d}=this.lineAt(l,a),f=this.options.overrideIndentation;if(f){let p=f(d);if(p>-1)return p}return this.countColumn(h,h.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Bpe=new Ki;function Grt(c){let l=c.type.prop(Bpe);if(l)return l;let h,a=c.firstChild;if(a&&(h=a.type.prop(Ki.closedBy))){let d=c.lastChild,f=d&&h.indexOf(d.name)>-1;return p=>zpe(p,!0,1,void 0,f&&!function Wrt(c){return c.pos==c.options.simulateBreak&&c.options.simulateDoubleBreak}(p)?d.from:void 0)}return null==c.parent?Qrt:null}function Vpe(c,l,a){for(;c;c=c.parent){let h=Grt(c);if(h)return h(H7.create(a,l,c))}return null}function Qrt(){return 0}class H7 extends XS{constructor(l,a,h){super(l.state,l.options),this.base=l,this.pos=a,this.node=h}static create(l,a,h){return new H7(l,a,h)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let l=this.state.doc.lineAt(this.node.from);for(;;){let a=this.node.resolve(l.from);for(;a.parent&&a.parent.from==a.from;)a=a.parent;if(jrt(a,this.node))break;l=this.state.doc.lineAt(a.from)}return this.lineIndent(l.from)}continue(){let l=this.node.parent;return l?Vpe(l,this.pos,this.base):0}}function jrt(c,l){for(let a=l;a;a=a.parent)if(c==a)return!0;return!1}function Zrt({closing:c,align:l=!0,units:a=1}){return h=>zpe(h,l,a,c)}function zpe(c,l,a,h,d){let f=c.textAfter,p=f.match(/^\s*/)[0].length,g=h&&f.slice(p,p+h.length)==h||d==c.pos+p,m=l?function qrt(c){let l=c.node,a=l.childAfter(l.from),h=l.lastChild;if(!a)return null;let d=c.options.simulateBreak,f=c.state.doc.lineAt(a.from),p=null==d||d<=f.from?f.to:Math.min(f.to,d);for(let g=a.to;;){let m=l.childAfter(g);if(!m||m==h)return null;if(!m.type.isSkipped)return m.from<p?a:null;g=m.to}}(c):null;return m?c.column(g?m.from:m.to):c.baseIndent+(g?0:c.unit*a)}function $7({except:c,units:l=1}={}){return a=>{let h=c&&c.test(a.textAfter);return a.baseIndent+(h?0:l*a.unit)}}const Jrt=zn.define(),Upe=new Ki;function nst(c){let l=c.lastChild;return l&&l.to==c.to&&l.type.isError}function qA(c,l,a){for(let h of c.facet(Jrt)){let d=h(c,l,a);if(d)return d}return function tst(c,l,a){let h=ro(c);if(h.length<a)return null;let f=null;for(let p=h.resolveInner(a);p;p=p.parent){if(p.to<=a||p.from>a)continue;if(f&&p.from<l)break;let g=p.type.prop(Upe);if(g&&(p.to<h.length-50||h.length==c.doc.length||!nst(p))){let m=g(p,c);m&&m.from<=a&&m.from>=l&&m.to>a&&(f=m)}}return f}(c,l,a)}function Hpe(c,l){let a=l.mapPos(c.from,1),h=l.mapPos(c.to,-1);return a>=h?void 0:{from:a,to:h}}const ZA=Yi.define({map:Hpe}),YS=Yi.define({map:Hpe});function $pe(c){let l=[];for(let{head:a}of c.state.selection.ranges)l.some(h=>h.from<=a&&h.to>=a)||l.push(c.lineBlockAt(a));return l}const Lg=yo.define({create:()=>Hn.none,update(c,l){c=c.map(l.changes);for(let a of l.effects)a.is(ZA)&&!ist(c,a.value.from,a.value.to)?c=c.update({add:[qpe.range(a.value.from,a.value.to)]}):a.is(YS)&&(c=c.update({filter:(h,d)=>a.value.from!=h||a.value.to!=d,filterFrom:a.value.from,filterTo:a.value.to}));if(l.selection){let a=!1,{head:h}=l.selection.main;c.between(h,h,(d,f)=>{d<h&&f>h&&(a=!0)}),a&&(c=c.update({filterFrom:h,filterTo:h,filter:(d,f)=>f<=h||d>=h}))}return c},provide:c=>Ai.decorations.from(c),toJSON(c,l){let a=[];return c.between(0,l.doc.length,(h,d)=>{a.push(h,d)}),a},fromJSON(c){if(!Array.isArray(c)||c.length%2)throw new RangeError("Invalid JSON for fold state");let l=[];for(let a=0;a<c.length;){let h=c[a++],d=c[a++];if("number"!=typeof h||"number"!=typeof d)throw new RangeError("Invalid JSON for fold state");l.push(qpe.range(h,d))}return Hn.set(l,!0)}});function XA(c,l,a){var h;let d=null;return null===(h=c.field(Lg,!1))||void 0===h||h.between(l,a,(f,p)=>{(!d||d.from>f)&&(d={from:f,to:p})}),d}function ist(c,l,a){let h=!1;return c.between(l,l,(d,f)=>{d==l&&f==a&&(h=!0)}),h}function Wpe(c,l){return c.field(Lg,!1)?l:l.concat(Yi.appendConfig.of(jpe()))}function Gpe(c,l,a=!0){let h=c.state.doc.lineAt(l.from).number,d=c.state.doc.lineAt(l.to).number;return Ai.announce.of(`${c.state.phrase(a?"Folded lines":"Unfolded lines")} ${h} ${c.state.phrase("to")} ${d}.`)}const ost=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:c=>{for(let l of $pe(c)){let a=qA(c.state,l.from,l.to);if(a)return c.dispatch({effects:Wpe(c.state,[ZA.of(a),Gpe(c,a)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:c=>{if(!c.state.field(Lg,!1))return!1;let l=[];for(let a of $pe(c)){let h=XA(c.state,a.from,a.to);h&&l.push(YS.of(h),Gpe(c,h,!1))}return l.length&&c.dispatch({effects:l}),l.length>0}},{key:"Ctrl-Alt-[",run:c=>{let{state:l}=c,a=[];for(let h=0;h<l.doc.length;){let d=c.lineBlockAt(h),f=qA(l,d.from,d.to);f&&a.push(ZA.of(f)),h=(f?c.lineBlockAt(f.to):d).to+1}return a.length&&c.dispatch({effects:Wpe(c.state,a)}),!!a.length}},{key:"Ctrl-Alt-]",run:c=>{let l=c.state.field(Lg,!1);if(!l||!l.size)return!1;let a=[];return l.between(0,c.state.doc.length,(h,d)=>{a.push(YS.of({from:h,to:d}))}),c.dispatch({effects:a}),!0}}],ast={placeholderDOM:null,placeholderText:"\u2026"},Qpe=zn.define({combine:c=>xh(c,ast)});function jpe(c){let l=[Lg,ust];return c&&l.push(Qpe.of(c)),l}const qpe=Hn.replace({widget:new class extends Jf{toDOM(c){let{state:l}=c,a=l.facet(Qpe),h=f=>{let p=c.lineBlockAt(c.posAtDOM(f.target)),g=XA(c.state,p.from,p.to);g&&c.dispatch({effects:YS.of(g)}),f.preventDefault()};if(a.placeholderDOM)return a.placeholderDOM(c,h);let d=document.createElement("span");return d.textContent=a.placeholderText,d.setAttribute("aria-label",l.phrase("folded code")),d.title=l.phrase("unfold"),d.className="cm-foldPlaceholder",d.onclick=h,d}}}),lst={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class W7 extends Id{constructor(l,a){super(),this.config=l,this.open=a}eq(l){return this.config==l.config&&this.open==l.open}toDOM(l){if(this.config.markerDOM)return this.config.markerDOM(this.open);let a=document.createElement("span");return a.textContent=this.open?this.config.openText:this.config.closedText,a.title=l.state.phrase(this.open?"Fold line":"Unfold line"),a}}function cst(c={}){let l=Object.assign(Object.assign({},lst),c),a=new W7(l,!0),h=new W7(l,!1),d=io.fromClass(class{constructor(p){this.from=p.viewport.from,this.markers=this.buildMarkers(p)}update(p){(p.docChanged||p.viewportChanged||p.startState.facet(Ng)!=p.state.facet(Ng)||p.startState.field(Lg,!1)!=p.state.field(Lg,!1)||ro(p.startState)!=ro(p.state)||l.foldingChanged(p))&&(this.markers=this.buildMarkers(p.view))}buildMarkers(p){let g=new Og;for(let m of p.viewportLineBlocks){let v=XA(p.state,m.from,m.to)?h:qA(p.state,m.from,m.to)?a:null;v&&g.add(m.from,m.from,v)}return g.finish()}}),{domEventHandlers:f}=l;return[d,ape({class:"cm-foldGutter",markers(p){var g;return(null===(g=p.plugin(d))||void 0===g?void 0:g.markers)||Es.empty},initialSpacer:()=>new W7(l,!1),domEventHandlers:Object.assign(Object.assign({},f),{click:(p,g,m)=>{if(f.click&&f.click(p,g,m))return!0;let v=XA(p.state,g.from,g.to);if(v)return p.dispatch({effects:YS.of(v)}),!0;let y=qA(p.state,g.from,g.to);return!!y&&(p.dispatch({effects:ZA.of(y)}),!0)}})}),jpe()]}const ust=Ai.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class KS{constructor(l,a){let h;function d(g){let m=Dg.newName();return(h||(h=Object.create(null)))["."+m]=g,m}const f="string"==typeof a.all?a.all:a.all?d(a.all):void 0,p=a.scope;this.scope=p instanceof Mu?g=>g.prop(C1)==p.data:p?g=>g==p:void 0,this.style=kpe(l.map(g=>({tag:g.tag,class:g.class||d(Object.assign({},g,{tag:null}))})),{all:f}).style,this.module=h?new Dg(h):null,this.themeType=a.themeType}static define(l,a){return new KS(l,a||{})}}const G7=zn.define(),Zpe=zn.define({combine:c=>c.length?[c[0]]:null});function YA(c){let l=c.facet(G7);return l.length?l:c.facet(Zpe)}function KA(c,l){let h,a=[dst];return c instanceof KS&&(c.module&&a.push(Ai.styleModule.of(c.module)),h=c.themeType),a.push(null!=l&&l.fallback?Zpe.of(c):h?G7.computeN([Ai.darkTheme],d=>d.facet(Ai.darkTheme)==("dark"==h)?[c]:[]):G7.of(c)),a}class hst{constructor(l){this.markCache=Object.create(null),this.tree=ro(l.state),this.decorations=this.buildDeco(l,YA(l.state))}update(l){let a=ro(l.state),h=YA(l.state),d=h!=YA(l.startState);a.length<l.view.viewport.to&&!d&&a.type==this.tree.type?this.decorations=this.decorations.map(l.changes):(a!=this.tree||l.viewportChanged||d)&&(this.tree=a,this.decorations=this.buildDeco(l.view,h))}buildDeco(l,a){if(!a||!this.tree.length)return Hn.none;let h=new Og;for(let{from:d,to:f}of l.visibleRanges)Lrt(this.tree,a,(p,g,m)=>{h.add(p,g,this.markCache[m]||(this.markCache[m]=Hn.mark({class:m})))},d,f);return h.finish()}}const dst=H0.high(io.fromClass(hst,{decorations:c=>c.decorations})),Xpe=KS.define([{tag:Ue.meta,color:"#7a757a"},{tag:Ue.link,textDecoration:"underline"},{tag:Ue.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ue.emphasis,fontStyle:"italic"},{tag:Ue.strong,fontWeight:"bold"},{tag:Ue.strikethrough,textDecoration:"line-through"},{tag:Ue.keyword,color:"#708"},{tag:[Ue.atom,Ue.bool,Ue.url,Ue.contentSeparator,Ue.labelName],color:"#219"},{tag:[Ue.literal,Ue.inserted],color:"#164"},{tag:[Ue.string,Ue.deleted],color:"#a11"},{tag:[Ue.regexp,Ue.escape,Ue.special(Ue.string)],color:"#e40"},{tag:Ue.definition(Ue.variableName),color:"#00f"},{tag:Ue.local(Ue.variableName),color:"#30a"},{tag:[Ue.typeName,Ue.namespace],color:"#085"},{tag:Ue.className,color:"#167"},{tag:[Ue.special(Ue.variableName),Ue.macroName],color:"#256"},{tag:Ue.definition(Ue.propertyName),color:"#00c"},{tag:Ue.comment,color:"#940"},{tag:Ue.invalid,color:"#f00"}]),fst=Ai.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Jpe=zn.define({combine:c=>xh(c,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4,renderMatch:mst})}),pst=Hn.mark({class:"cm-matchingBracket"}),gst=Hn.mark({class:"cm-nonmatchingBracket"});function mst(c){let l=[],a=c.matched?pst:gst;return l.push(a.range(c.start.from,c.start.to)),c.end&&l.push(a.range(c.end.from,c.end.to)),l}const vst=[yo.define({create:()=>Hn.none,update(c,l){if(!l.docChanged&&!l.selection)return c;let a=[],h=l.state.facet(Jpe);for(let d of l.state.selection.ranges){if(!d.empty)continue;let f=Bd(l.state,d.head,-1,h)||d.head>0&&Bd(l.state,d.head-1,1,h)||h.afterCursor&&(Bd(l.state,d.head,1,h)||d.head<l.state.doc.length&&Bd(l.state,d.head+1,-1,h));f&&(a=a.concat(h.renderMatch(f,l.state)))}return Hn.set(a,!0)},provide:c=>Ai.decorations.from(c)}),fst];function yst(c={}){return[Jpe.of(c),vst]}function Q7(c,l,a){let h=c.prop(l<0?Ki.openedBy:Ki.closedBy);if(h)return h;if(1==c.name.length){let d=a.indexOf(c.name);if(d>-1&&d%2==(l<0?1:0))return[a[d+l]]}return null}function Bd(c,l,a,h={}){let d=h.maxScanDistance||1e4,f=h.brackets||"()[]{}",p=ro(c),g=p.resolveInner(l,a);for(let m=g;m;m=m.parent){let v=Q7(m.type,a,f);if(v&&m.from<m.to)return _st(0,0,a,m,v,f)}return function bst(c,l,a,h,d,f,p){let g=a<0?c.sliceDoc(l-1,l):c.sliceDoc(l,l+1),m=p.indexOf(g);if(m<0||m%2==0!=a>0)return null;let v={from:a<0?l-1:l,to:a>0?l+1:l},y=c.doc.iterRange(l,a>0?c.doc.length:0),_=0;for(let b=0;!y.next().done&&b<=f;){let C=y.value;a<0&&(b+=C.length);let x=l+b*a;for(let S=a>0?0:C.length-1,w=a>0?C.length:-1;S!=w;S+=a){let T=p.indexOf(C[S]);if(!(T<0||h.resolveInner(x+S,1).type!=d))if(T%2==0==a>0)_++;else{if(1==_)return{start:v,end:{from:x+S,to:x+S+1},matched:T>>1==m>>1};_--}}a>0&&(b+=C.length)}return y.done?{start:v,matched:!1}:null}(c,l,a,p,g.type,d,f)}function _st(c,l,a,h,d,f){let p=h.parent,g={from:h.from,to:h.to},m=0,v=null==p?void 0:p.cursor();if(v&&(a<0?v.childBefore(h.from):v.childAfter(h.to)))do{if(a<0?v.to<=h.from:v.from>=h.to){if(0==m&&d.indexOf(v.type.name)>-1&&v.from<v.to)return{start:g,end:{from:v.from,to:v.to},matched:!0};if(Q7(v.type,a,f))m++;else if(Q7(v.type,-a,f)){if(0==m)return{start:g,end:v.from==v.to?void 0:{from:v.from,to:v.to},matched:!1};m--}}}while(a<0?v.prevSibling():v.nextSibling());return{start:g,matched:!1}}const q7=Object.create(null),JS=[Dl.none],sge=[],oge=Object.create(null);for(let[c,l]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])oge[c]=lge(q7,l);function Z7(c,l){sge.indexOf(c)>-1||(sge.push(c),console.warn(l))}function lge(c,l){let a=null;for(let f of l.split(".")){let p=c[f]||Ue[f];p?"function"==typeof p?a?a=p(a):Z7(f,`Modifier ${f} used at start of tag`):a?Z7(f,`Tag ${f} used as modifier`):a=p:Z7(f,`Unknown highlighting tag ${f}`)}if(!a)return 0;let h=l.replace(/ /g,"_"),d=Dl.define({id:JS.length,name:h,props:[Ope({[h]:a})]});return JS.push(d),d.id}function X7(c,l){return({state:a,dispatch:h})=>{if(a.readOnly)return!1;let d=c(l,a);return!!d&&(h(a.update(d)),!0)}}const Mst=X7(Rst,0),Est=X7(cge,0),Ast=X7((c,l)=>cge(c,l,function Pst(c){let l=[];for(let a of c.selection.ranges){let h=c.doc.lineAt(a.from),d=a.to<=h.to?h:c.doc.lineAt(a.to),f=l.length-1;f>=0&&l[f].to>h.from?l[f].to=d.to:l.push({from:h.from,to:d.to})}return l}(l)),0);function Y7(c,l=c.selection.main.head){let a=c.languageDataAt("commentTokens",l);return a.length?a[0]:{}}function cge(c,l,a=l.selection.ranges){let h=a.map(f=>Y7(l,f.from).block);if(!h.every(f=>f))return null;let d=a.map((f,p)=>function Ist(c,{open:l,close:a},h,d){let y,_,f=c.sliceDoc(h-50,h),p=c.sliceDoc(d,d+50),g=/\s*$/.exec(f)[0].length,m=/^\s*/.exec(p)[0].length,v=f.length-g;if(f.slice(v-l.length,v)==l&&p.slice(m,m+a.length)==a)return{open:{pos:h-g,margin:g&&1},close:{pos:d+m,margin:m&&1}};d-h<=100?y=_=c.sliceDoc(h,d):(y=c.sliceDoc(h,h+50),_=c.sliceDoc(d-50,d));let b=/^\s*/.exec(y)[0].length,C=/\s*$/.exec(_)[0].length,x=_.length-C-a.length;return y.slice(b,b+l.length)==l&&_.slice(x,x+a.length)==a?{open:{pos:h+b+l.length,margin:/\s/.test(y.charAt(b+l.length))?1:0},close:{pos:d-C-a.length,margin:/\s/.test(_.charAt(x-1))?1:0}}:null}(l,h[p],f.from,f.to));if(2!=c&&!d.every(f=>f))return{changes:l.changes(a.map((f,p)=>d[p]?[]:[{from:f.from,insert:h[p].open+" "},{from:f.to,insert:" "+h[p].close}]))};if(1!=c&&d.some(f=>f)){let f=[];for(let g,p=0;p<d.length;p++)if(g=d[p]){let m=h[p],{open:v,close:y}=g;f.push({from:v.pos-m.open.length,to:v.pos+v.margin},{from:y.pos-y.margin,to:y.pos+m.close.length})}return{changes:f}}return null}function Rst(c,l,a=l.selection.ranges){let h=[],d=-1;for(let{from:f,to:p}of a){let g=h.length,m=1e9;for(let v=f;v<=p;){let y=l.doc.lineAt(v);if(y.from>d&&(f==p||p>y.from)){d=y.from;let _=Y7(l,v).line;if(!_)continue;let b=/^\s*/.exec(y.text)[0].length,C=b==y.length,x=y.text.slice(b,b+_.length)==_?b:-1;b<y.text.length&&b<m&&(m=b),h.push({line:y,comment:x,token:_,indent:b,empty:C,single:!1})}v=y.to+1}if(m<1e9)for(let v=g;v<h.length;v++)h[v].indent<h[v].line.text.length&&(h[v].indent=m);h.length==g+1&&(h[g].single=!0)}if(2!=c&&h.some(f=>f.comment<0&&(!f.empty||f.single))){let f=[];for(let{line:g,token:m,indent:v,empty:y,single:_}of h)(_||!y)&&f.push({from:g.from+v,insert:m+" "});let p=l.changes(f);return{changes:p,selection:l.selection.map(p,1)}}if(1!=c&&h.some(f=>f.comment>=0)){let f=[];for(let{line:p,comment:g,token:m}of h)if(g>=0){let v=p.from+g,y=v+m.length;" "==p.text[y-p.from]&&y++,f.push({from:v,to:y})}return{changes:f}}return null}const K7=W0.define(),Fst=W0.define(),Nst=zn.define(),uge=zn.define({combine:c=>xh(c,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),J7=yo.define({create:()=>nH.empty,update(c,l){let a=l.state.facet(uge),h=l.annotation(K7);if(h){let m=l.docChanged?At.single(function Lst(c){let l=0;return c.iterChangedRanges((a,h)=>l=h),l}(l.changes)):void 0,v=Kl.fromTransaction(l,m),y=h.side,_=0==y?c.undone:c.done;return _=v?eI(_,_.length,a.minDepth,v):fge(_,l.startState.selection),new nH(0==y?h.rest:_,0==y?_:h.rest)}let d=l.annotation(Fst);if(("full"==d||"before"==d)&&(c=c.isolate()),!1===l.annotation(kd.addToHistory))return l.changes.empty?c:c.addMapping(l.changes.desc);let f=Kl.fromTransaction(l),p=l.annotation(kd.time),g=l.annotation(kd.userEvent);return f?c=c.addChanges(f,p,g,a.newGroupDelay,a.minDepth):l.selection&&(c=c.addSelection(l.startState.selection,p,g,a.newGroupDelay)),("full"==d||"after"==d)&&(c=c.isolate()),c},toJSON:c=>({done:c.done.map(l=>l.toJSON()),undone:c.undone.map(l=>l.toJSON())}),fromJSON:c=>new nH(c.done.map(Kl.fromJSON),c.undone.map(Kl.fromJSON))});function Bst(c={}){return[J7,uge.of(c),Ai.domEventHandlers({beforeinput(l,a){let h="historyUndo"==l.inputType?hge:"historyRedo"==l.inputType?eH:null;return!!h&&(l.preventDefault(),h(a))}})]}function JA(c,l){return function({state:a,dispatch:h}){if(!l&&a.readOnly)return!1;let d=a.field(J7,!1);if(!d)return!1;let f=d.pop(c,a,l);return!!f&&(h(f),!0)}}const hge=JA(0,!1),eH=JA(1,!1),Vst=JA(0,!0),zst=JA(1,!0);class Kl{constructor(l,a,h,d,f){this.changes=l,this.effects=a,this.mapped=h,this.startSelection=d,this.selectionsAfter=f}setSelAfter(l){return new Kl(this.changes,this.effects,this.mapped,this.startSelection,l)}toJSON(){var l,a,h;return{changes:null===(l=this.changes)||void 0===l?void 0:l.toJSON(),mapped:null===(a=this.mapped)||void 0===a?void 0:a.toJSON(),startSelection:null===(h=this.startSelection)||void 0===h?void 0:h.toJSON(),selectionsAfter:this.selectionsAfter.map(d=>d.toJSON())}}static fromJSON(l){return new Kl(l.changes&&Vo.fromJSON(l.changes),[],l.mapped&&Dd.fromJSON(l.mapped),l.startSelection&&At.fromJSON(l.startSelection),l.selectionsAfter.map(At.fromJSON))}static fromTransaction(l,a){let h=Eu;for(let d of l.startState.facet(Nst)){let f=d(l);f.length&&(h=h.concat(f))}return!h.length&&l.changes.empty?null:new Kl(l.changes.invert(l.startState.doc),h,void 0,a||l.startState.selection,Eu)}static selection(l){return new Kl(void 0,Eu,void 0,void 0,l)}}function eI(c,l,a,h){let f=c.slice(l+1>a+20?l-a-1:0,l);return f.push(h),f}function dge(c,l){return c.length?l.length?c.concat(l):c:l}const Eu=[];function fge(c,l){if(c.length){let a=c[c.length-1],h=a.selectionsAfter.slice(Math.max(0,a.selectionsAfter.length-200));return h.length&&h[h.length-1].eq(l)?c:(h.push(l),eI(c,c.length-1,1e9,a.setSelAfter(h)))}return[Kl.selection([l])]}function Wst(c){let l=c[c.length-1],a=c.slice();return a[c.length-1]=l.setSelAfter(l.selectionsAfter.slice(0,l.selectionsAfter.length-1)),a}function tH(c,l){if(!c.length)return c;let a=c.length,h=Eu;for(;a;){let d=Gst(c[a-1],l,h);if(d.changes&&!d.changes.empty||d.effects.length){let f=c.slice(0,a);return f[a-1]=d,f}l=d.mapped,a--,h=d.selectionsAfter}return h.length?[Kl.selection(h)]:Eu}function Gst(c,l,a){let h=dge(c.selectionsAfter.length?c.selectionsAfter.map(g=>g.map(l)):Eu,a);if(!c.changes)return Kl.selection(h);let d=c.changes.map(l),f=l.mapDesc(c.changes,!0),p=c.mapped?c.mapped.composeDesc(f):f;return new Kl(d,Yi.mapEffects(c.effects,l),p,c.startSelection.map(f),h)}const Qst=/^(input\.type|delete)($|\.)/;let nH=(()=>{class c{constructor(a,h,d=0,f){this.done=a,this.undone=h,this.prevTime=d,this.prevUserEvent=f}isolate(){return this.prevTime?new c(this.done,this.undone):this}addChanges(a,h,d,f,p){let g=this.done,m=g[g.length-1];return g=m&&m.changes&&!m.changes.empty&&a.changes&&(!d||Qst.test(d))&&(!m.selectionsAfter.length&&h-this.prevTime<f&&function Ust(c,l){let a=[],h=!1;return c.iterChangedRanges((d,f)=>a.push(d,f)),l.iterChangedRanges((d,f,p,g)=>{for(let m=0;m<a.length;){let v=a[m++],y=a[m++];g>=v&&p<=y&&(h=!0)}}),h}(m.changes,a.changes)||"input.type.compose"==d)?eI(g,g.length-1,p,new Kl(a.changes.compose(m.changes),dge(a.effects,m.effects),m.mapped,m.startSelection,Eu)):eI(g,g.length,p,a),new c(g,Eu,h,d)}addSelection(a,h,d,f){let p=this.done.length?this.done[this.done.length-1].selectionsAfter:Eu;return p.length>0&&h-this.prevTime<f&&d==this.prevUserEvent&&d&&/^select($|\.)/.test(d)&&function Hst(c,l){return c.ranges.length==l.ranges.length&&0===c.ranges.filter((a,h)=>a.empty!=l.ranges[h].empty).length}(p[p.length-1],a)?this:new c(fge(this.done,a),this.undone,h,d)}addMapping(a){return new c(tH(this.done,a),tH(this.undone,a),this.prevTime,this.prevUserEvent)}pop(a,h,d){let f=0==a?this.done:this.undone;if(0==f.length)return null;let p=f[f.length-1];if(d&&p.selectionsAfter.length)return h.update({selection:p.selectionsAfter[p.selectionsAfter.length-1],annotations:K7.of({side:a,rest:Wst(f)}),userEvent:0==a?"select.undo":"select.redo",scrollIntoView:!0});if(p.changes){let g=1==f.length?Eu:f.slice(0,f.length-1);return p.mapped&&(g=tH(g,p.mapped)),h.update({changes:p.changes,selection:p.startSelection,effects:p.effects,annotations:K7.of({side:a,rest:g}),filter:!1,userEvent:0==a?"undo":"redo",scrollIntoView:!0})}return null}}return c.empty=new c(Eu,Eu),c})();const jst=[{key:"Mod-z",run:hge,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:eH,preventDefault:!0},{linux:"Ctrl-Shift-z",run:eH,preventDefault:!0},{key:"Mod-u",run:Vst,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:zst,preventDefault:!0}];function T1(c,l){return At.create(c.ranges.map(l),c.mainIndex)}function Vd(c,l){return c.update({selection:l,scrollIntoView:!0,userEvent:"select"})}function Au({state:c,dispatch:l},a){let h=T1(c.selection,a);return!h.eq(c.selection)&&(l(Vd(c,h)),!0)}function t2(c,l){return At.cursor(l?c.to:c.from)}function tI(c,l){return Au(c,a=>a.empty?c.moveByChar(a,l):t2(a,l))}function Wa(c){return c.textDirectionAt(c.state.selection.main.head)==As.LTR}const pge=c=>tI(c,!Wa(c)),gge=c=>tI(c,Wa(c));function nI(c,l){return Au(c,a=>a.empty?c.moveByGroup(a,l):t2(a,l))}function Xst(c,l,a){if(l.type.prop(a))return!0;let h=l.to-l.from;return h&&(h>2||/[^\s,.;:]/.test(c.sliceDoc(l.from,l.to)))||l.firstChild}function iI(c,l,a){let p,g,h=ro(c).resolveInner(l.head),d=a?Ki.closedBy:Ki.openedBy;for(let m=l.head;;){let v=a?h.childAfter(m):h.childBefore(m);if(!v)break;Xst(c,v,d)?h=v:m=a?v.to:v.from}return g=h.type.prop(d)&&(p=a?Bd(c,h.from,1):Bd(c,h.to,-1))&&p.matched?a?p.end.to:p.end.from:a?h.to:h.from,At.cursor(g,a?-1:1)}function yge(c,l){return Au(c,a=>{if(!a.empty)return t2(a,l);let h=c.moveVertically(a,l);return h.head!=a.head?h:c.moveToLineBoundary(a,l)})}const _ge=c=>yge(c,!1),bge=c=>yge(c,!0);function Cge(c){return Math.max(c.defaultLineHeight,Math.min(c.dom.clientHeight,innerHeight)-5)}function xge(c,l){let{state:a}=c,h=T1(a.selection,g=>g.empty?c.moveVertically(g,l,Cge(c)):t2(g,l));if(h.eq(a.selection))return!1;let p,d=c.coordsAtPos(a.selection.main.head),f=c.scrollDOM.getBoundingClientRect();return d&&d.top>f.top&&d.bottom<f.bottom&&d.top-f.top<=c.scrollDOM.scrollHeight-c.scrollDOM.scrollTop-c.scrollDOM.clientHeight&&(p=Ai.scrollIntoView(h.main.head,{y:"start",yMargin:d.top-f.top})),c.dispatch(Vd(a,h),{effects:p}),!0}const wge=c=>xge(c,!1),iH=c=>xge(c,!0);function Bg(c,l,a){let h=c.lineBlockAt(l.head),d=c.moveToLineBoundary(l,a);if(d.head==l.head&&d.head!=(a?h.to:h.from)&&(d=c.moveToLineBoundary(l,a,!1)),!a&&d.head==h.from&&h.length){let f=/^\s*/.exec(c.state.sliceDoc(h.from,Math.min(h.from+100,h.to)))[0].length;f&&l.head!=h.from+f&&(d=At.cursor(h.from+f))}return d}function Uc(c,l){let a=T1(c.state.selection,h=>{let d=l(h);return At.range(h.anchor,d.head,d.goalColumn)});return!a.eq(c.state.selection)&&(c.dispatch(Vd(c.state,a)),!0)}function rI(c,l){return Uc(c,a=>c.moveByChar(a,l))}const Tge=c=>rI(c,!Wa(c)),Oge=c=>rI(c,Wa(c));function sI(c,l){return Uc(c,a=>c.moveByGroup(a,l))}function kge(c,l){return Uc(c,a=>c.moveVertically(a,l))}const Mge=c=>kge(c,!1),Ege=c=>kge(c,!0);function Age(c,l){return Uc(c,a=>c.moveVertically(a,l,Cge(c)))}const Ige=c=>Age(c,!1),Pge=c=>Age(c,!0),Rge=({state:c,dispatch:l})=>(l(Vd(c,{anchor:0})),!0),Fge=({state:c,dispatch:l})=>(l(Vd(c,{anchor:c.doc.length})),!0),Nge=({state:c,dispatch:l})=>(l(Vd(c,{anchor:c.selection.main.anchor,head:0})),!0),Lge=({state:c,dispatch:l})=>(l(Vd(c,{anchor:c.selection.main.anchor,head:c.doc.length})),!0);function oI(c,l){if(c.state.readOnly)return!1;let a="delete.selection",{state:h}=c,d=h.changeByRange(f=>{let{from:p,to:g}=f;if(p==g){let m=l(p);m<p?(a="delete.backward",m=aI(c,m,!1)):m>p&&(a="delete.forward",m=aI(c,m,!0)),p=Math.min(p,m),g=Math.max(g,m)}else p=aI(c,p,!1),g=aI(c,p,!0);return p==g?{range:f}:{changes:{from:p,to:g},range:At.cursor(p)}});return!d.changes.empty&&(c.dispatch(h.update(d,{scrollIntoView:!0,userEvent:a,effects:"delete.selection"==a?Ai.announce.of(h.phrase("Selection deleted")):void 0})),!0)}function aI(c,l,a){if(c instanceof Ai)for(let h of c.state.facet(Ai.atomicRanges).map(d=>d(c)))h.between(l,l,(d,f)=>{d<l&&f>l&&(l=a?f:d)});return l}const Bge=(c,l)=>oI(c,a=>{let f,p,{state:h}=c,d=h.doc.lineAt(a);if(!l&&a>d.from&&a<d.from+200&&!/[^ \t]/.test(f=d.text.slice(0,a-d.from))){if("\t"==f[f.length-1])return a-1;let m=AS(f,h.tabSize)%X0(h)||X0(h);for(let v=0;v<m&&" "==f[f.length-1-v];v++)a--;p=a}else p=wl(d.text,a-d.from,l,l)+d.from,p==a&&d.number!=(l?h.doc.lines:1)&&(p+=l?1:-1);return p}),rH=c=>Bge(c,!1),Vge=c=>Bge(c,!0),zge=(c,l)=>oI(c,a=>{let h=a,{state:d}=c,f=d.doc.lineAt(h),p=d.charCategorizer(h);for(let g=null;;){if(h==(l?f.to:f.from)){h==a&&f.number!=(l?d.doc.lines:1)&&(h+=l?1:-1);break}let m=wl(f.text,h-f.from,l)+f.from,v=f.text.slice(Math.min(h,m)-f.from,Math.max(h,m)-f.from),y=p(v);if(null!=g&&y!=g)break;(" "!=v||h!=a)&&(g=y),h=m}return h}),Uge=c=>zge(c,!1),Hge=c=>oI(c,l=>{let a=c.lineBlockAt(l).to;return l<a?a:Math.min(c.state.doc.length,l+1)});function lI(c){let l=[],a=-1;for(let h of c.selection.ranges){let d=c.doc.lineAt(h.from),f=c.doc.lineAt(h.to);if(!h.empty&&h.to==f.from&&(f=c.doc.lineAt(h.to-1)),a>=d.number){let p=l[l.length-1];p.to=f.to,p.ranges.push(h)}else l.push({from:d.from,to:f.to,ranges:[h]});a=f.number+1}return l}function $ge(c,l,a){if(c.readOnly)return!1;let h=[],d=[];for(let f of lI(c)){if(a?f.to==c.doc.length:0==f.from)continue;let p=c.doc.lineAt(a?f.to+1:f.from-1),g=p.length+1;if(a){h.push({from:f.to,to:p.to},{from:f.from,insert:p.text+c.lineBreak});for(let m of f.ranges)d.push(At.range(Math.min(c.doc.length,m.anchor+g),Math.min(c.doc.length,m.head+g)))}else{h.push({from:p.from,to:f.from},{from:f.to,insert:c.lineBreak+p.text});for(let m of f.ranges)d.push(At.range(m.anchor-g,m.head-g))}}return!!h.length&&(l(c.update({changes:h,scrollIntoView:!0,selection:At.create(d,c.selection.mainIndex),userEvent:"move.line"})),!0)}function Wge(c,l,a){if(c.readOnly)return!1;let h=[];for(let d of lI(c))h.push(a?{from:d.from,insert:c.doc.slice(d.from,d.to)+c.lineBreak}:{from:d.to,insert:c.lineBreak+c.doc.slice(d.from,d.to)});return l(c.update({changes:h,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Eot=Gge(!1),Aot=Gge(!0);function Gge(c){return({state:l,dispatch:a})=>{if(l.readOnly)return!1;let h=l.changeByRange(d=>{let{from:f,to:p}=d,g=l.doc.lineAt(f),m=!c&&f==p&&function Mot(c,l){if(/\(\)|\[\]|\{\}/.test(c.sliceDoc(l-1,l+1)))return{from:l,to:l};let f,a=ro(c).resolveInner(l),h=a.childBefore(l),d=a.childAfter(l);return h&&d&&h.to<=l&&d.from>=l&&(f=h.type.prop(Ki.closedBy))&&f.indexOf(d.name)>-1&&c.doc.lineAt(h.to).from==c.doc.lineAt(d.from).from?{from:h.to,to:d.from}:null}(l,f);c&&(f=p=(p<=g.to?g:l.doc.lineAt(p)).to);let v=new XS(l,{simulateBreak:f,simulateDoubleBreak:!!m}),y=jA(v,f);for(null==y&&(y=/^\s*/.exec(l.doc.lineAt(f).text)[0].length);p<g.to&&/\s/.test(g.text[p-g.from]);)p++;m?({from:f,to:p}=m):f>g.from&&f<g.from+100&&!/\S/.test(g.text.slice(0,f))&&(f=g.from);let _=["",S1(l,y)];return m&&_.push(S1(l,v.lineIndent(g.from,-1))),{changes:{from:f,to:p,insert:Ir.of(_)},range:At.cursor(f+1+_[1].length)}});return a(l.update(h,{scrollIntoView:!0,userEvent:"input"})),!0}}function sH(c,l){let a=-1;return c.changeByRange(h=>{let d=[];for(let p=h.from;p<=h.to;){let g=c.doc.lineAt(p);g.number>a&&(h.empty||h.to>g.from)&&(l(g,d,h),a=g.number),p=g.to+1}let f=c.changes(d);return{changes:d,range:At.range(f.mapPos(h.anchor,1),f.mapPos(h.head,1))}})}const Pot=[{key:"Ctrl-b",run:pge,shift:Tge,preventDefault:!0},{key:"Ctrl-f",run:gge,shift:Oge},{key:"Ctrl-p",run:_ge,shift:Mge},{key:"Ctrl-n",run:bge,shift:Ege},{key:"Ctrl-a",run:c=>Au(c,l=>At.cursor(c.lineBlockAt(l.head).from,1)),shift:c=>Uc(c,l=>At.cursor(c.lineBlockAt(l.head).from))},{key:"Ctrl-e",run:c=>Au(c,l=>At.cursor(c.lineBlockAt(l.head).to,-1)),shift:c=>Uc(c,l=>At.cursor(c.lineBlockAt(l.head).to))},{key:"Ctrl-d",run:Vge},{key:"Ctrl-h",run:rH},{key:"Ctrl-k",run:Hge},{key:"Ctrl-Alt-h",run:Uge},{key:"Ctrl-o",run:({state:c,dispatch:l})=>{if(c.readOnly)return!1;let a=c.changeByRange(h=>({changes:{from:h.from,to:h.to,insert:Ir.of(["",""])},range:At.cursor(h.from)}));return l(c.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:c,dispatch:l})=>{if(c.readOnly)return!1;let a=c.changeByRange(h=>{if(!h.empty||0==h.from||h.from==c.doc.length)return{range:h};let d=h.from,f=c.doc.lineAt(d),p=d==f.from?d-1:wl(f.text,d-f.from,!1)+f.from,g=d==f.to?d+1:wl(f.text,d-f.from,!0)+f.from;return{changes:{from:p,to:g,insert:c.doc.slice(d,g).append(c.doc.slice(p,d))},range:At.cursor(g)}});return!a.changes.empty&&(l(c.update(a,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:iH}],Rot=[{key:"ArrowLeft",run:pge,shift:Tge,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:c=>nI(c,!Wa(c)),shift:c=>sI(c,!Wa(c)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:c=>Au(c,l=>Bg(c,l,!Wa(c))),shift:c=>Uc(c,l=>Bg(c,l,!Wa(c))),preventDefault:!0},{key:"ArrowRight",run:gge,shift:Oge,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:c=>nI(c,Wa(c)),shift:c=>sI(c,Wa(c)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:c=>Au(c,l=>Bg(c,l,Wa(c))),shift:c=>Uc(c,l=>Bg(c,l,Wa(c))),preventDefault:!0},{key:"ArrowUp",run:_ge,shift:Mge,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Rge,shift:Nge},{mac:"Ctrl-ArrowUp",run:wge,shift:Ige},{key:"ArrowDown",run:bge,shift:Ege,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Fge,shift:Lge},{mac:"Ctrl-ArrowDown",run:iH,shift:Pge},{key:"PageUp",run:wge,shift:Ige},{key:"PageDown",run:iH,shift:Pge},{key:"Home",run:c=>Au(c,l=>Bg(c,l,!1)),shift:c=>Uc(c,l=>Bg(c,l,!1)),preventDefault:!0},{key:"Mod-Home",run:Rge,shift:Nge},{key:"End",run:c=>Au(c,l=>Bg(c,l,!0)),shift:c=>Uc(c,l=>Bg(c,l,!0)),preventDefault:!0},{key:"Mod-End",run:Fge,shift:Lge},{key:"Enter",run:Eot},{key:"Mod-a",run:({state:c,dispatch:l})=>(l(c.update({selection:{anchor:0,head:c.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:rH,shift:rH},{key:"Delete",run:Vge},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Uge},{key:"Mod-Delete",mac:"Alt-Delete",run:c=>zge(c,!0)},{mac:"Mod-Backspace",run:c=>oI(c,l=>{let a=c.lineBlockAt(l).from;return l>a?a:Math.max(0,l-1)})},{mac:"Mod-Delete",run:Hge}].concat(Pot.map(c=>({mac:c.key,run:c.run,shift:c.shift}))),Fot=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:c=>Au(c,l=>iI(c.state,l,!Wa(c))),shift:c=>Uc(c,l=>iI(c.state,l,!Wa(c)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:c=>Au(c,l=>iI(c.state,l,Wa(c))),shift:c=>Uc(c,l=>iI(c.state,l,Wa(c)))},{key:"Alt-ArrowUp",run:({state:c,dispatch:l})=>$ge(c,l,!1)},{key:"Shift-Alt-ArrowUp",run:({state:c,dispatch:l})=>Wge(c,l,!1)},{key:"Alt-ArrowDown",run:({state:c,dispatch:l})=>$ge(c,l,!0)},{key:"Shift-Alt-ArrowDown",run:({state:c,dispatch:l})=>Wge(c,l,!0)},{key:"Escape",run:({state:c,dispatch:l})=>{let a=c.selection,h=null;return a.ranges.length>1?h=At.create([a.main]):a.main.empty||(h=At.create([At.cursor(a.main.head)])),!!h&&(l(Vd(c,h)),!0)}},{key:"Mod-Enter",run:Aot},{key:"Alt-l",mac:"Ctrl-l",run:({state:c,dispatch:l})=>{let a=lI(c).map(({from:h,to:d})=>At.range(h,Math.min(d+1,c.doc.length)));return l(c.update({selection:At.create(a),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:c,dispatch:l})=>{let a=T1(c.selection,h=>{var d;let f=ro(c).resolveInner(h.head,1);for(;!(f.from<h.from&&f.to>=h.to||f.to>h.to&&f.from<=h.from||null===(d=f.parent)||void 0===d)&&d.parent;)f=f.parent;return At.range(f.to,f.from)});return l(Vd(c,a)),!0},preventDefault:!0},{key:"Mod-[",run:({state:c,dispatch:l})=>!c.readOnly&&(l(c.update(sH(c,(a,h)=>{let d=/^\s*/.exec(a.text)[0];if(!d)return;let f=AS(d,c.tabSize),p=0,g=S1(c,Math.max(0,f-X0(c)));for(;p<d.length&&p<g.length&&d.charCodeAt(p)==g.charCodeAt(p);)p++;h.push({from:a.from+p,to:a.from+d.length,insert:g.slice(p)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:c,dispatch:l})=>!c.readOnly&&(l(c.update(sH(c,(a,h)=>{h.push({from:a.from,insert:c.facet(QA)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:c,dispatch:l})=>{if(c.readOnly)return!1;let a=Object.create(null),h=new XS(c,{overrideIndentation:f=>{let p=a[f];return null==p?-1:p}}),d=sH(c,(f,p,g)=>{let m=jA(h,f.from);if(null==m)return;/\S/.test(f.text)||(m=0);let v=/^\s*/.exec(f.text)[0],y=S1(c,m);(v!=y||g.from<f.from+v.length)&&(a[f.from]=m,p.push({from:f.from,to:f.from+v.length,insert:y}))});return d.changes.empty||l(c.update(d,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:c=>{if(c.state.readOnly)return!1;let{state:l}=c,a=l.changes(lI(l).map(({from:d,to:f})=>(d>0?d--:f<l.doc.length&&f++,{from:d,to:f}))),h=T1(l.selection,d=>c.moveVertically(d,!0)).map(a);return c.dispatch({changes:a,selection:h,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:c,dispatch:l})=>function Sge(c,l,a){let h=!1,d=T1(c.selection,f=>{let p=Bd(c,f.head,-1)||Bd(c,f.head,1)||f.head>0&&Bd(c,f.head-1,1)||f.head<c.doc.length&&Bd(c,f.head+1,-1);if(!p||!p.end)return f;h=!0;let g=p.start.from==f.head?p.end.to:p.end.from;return a?At.range(f.anchor,g):At.cursor(g)});return!!h&&(l(Vd(c,d)),!0)}(c,l,!1)},{key:"Mod-/",run:c=>{let l=Y7(c.state);return l.line?Mst(c):!!l.block&&Ast(c)}},{key:"Alt-A",run:Est}].concat(Rot);function ss(){var c=arguments[0];"string"==typeof c&&(c=document.createElement(c));var l=1,a=arguments[1];if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){for(var h in a)if(Object.prototype.hasOwnProperty.call(a,h)){var d=a[h];"string"==typeof d?c.setAttribute(h,d):null!=d&&(c[h]=d)}l++}for(;l<arguments.length;l++)jge(c,arguments[l]);return c}function jge(c,l){if("string"==typeof l)c.appendChild(document.createTextNode(l));else if(null!=l)if(null!=l.nodeType)c.appendChild(l);else{if(!Array.isArray(l))throw new RangeError("Unsupported child node: "+l);for(var a=0;a<l.length;a++)jge(c,l[a])}}const qge="function"==typeof String.prototype.normalize?c=>c.normalize("NFKD"):c=>c;class O1{constructor(l,a,h=0,d=l.length,f,p){this.test=p,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=l.iterRange(h,d),this.bufferStart=h,this.normalize=f?g=>f(qge(g)):qge,this.query=this.normalize(a)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ma(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let l=this.peek();if(l<0)return this.done=!0,this;let a=IU(l),h=this.bufferStart+this.bufferPos;this.bufferPos+=Lc(l);let d=this.normalize(a);for(let f=0,p=h;;f++){let g=d.charCodeAt(f),m=this.match(g,p);if(m)return this.value=m,this;if(f==d.length-1)break;p==h&&f<a.length&&a.charCodeAt(f)==g&&p++}}}match(l,a){let h=null;for(let d=0;d<this.matches.length;d+=2){let f=this.matches[d],p=!1;this.query.charCodeAt(f)==l&&(f==this.query.length-1?h={from:this.matches[d+1],to:a+1}:(this.matches[d]++,p=!0)),p||(this.matches.splice(d,2),d-=2)}return this.query.charCodeAt(0)==l&&(1==this.query.length?h={from:a,to:a+1}:this.matches.push(1,a)),h&&this.test&&!this.test(h.from,h.to,this.buffer,this.bufferPos)&&(h=null),h}}"undefined"!=typeof Symbol&&(O1.prototype[Symbol.iterator]=function(){return this});const Zge={from:-1,to:-1,match:/.*/.exec("")},aH="gm"+(null==/x/.unicode?"":"u");class Xge{constructor(l,a,h,d=0,f=l.length){if(this.text=l,this.to=f,this.curLine="",this.done=!1,this.value=Zge,/\\[sWDnr]|\n|\r|\[\^/.test(a))return new Yge(l,a,h,d,f);this.re=new RegExp(a,aH+(null!=h&&h.ignoreCase?"i":"")),this.test=null==h?void 0:h.test,this.iter=l.iter();let p=l.lineAt(d);this.curLineStart=p.from,this.matchPos=cI(l,d),this.getLine(this.curLineStart)}getLine(l){this.iter.next(l),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let l=this.matchPos-this.curLineStart;;){this.re.lastIndex=l;let a=this.matchPos<=this.to&&this.re.exec(this.curLine);if(a){let h=this.curLineStart+a.index,d=h+a[0].length;if(this.matchPos=cI(this.text,d+(h==d?1:0)),h==this.curLine.length&&this.nextLine(),(h<d||h>this.value.to)&&(!this.test||this.test(h,d,a)))return this.value={from:h,to:d,match:a},this;l=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),l=0}}}}const lH=new WeakMap;class D1{constructor(l,a){this.from=l,this.text=a}get to(){return this.from+this.text.length}static get(l,a,h){let d=lH.get(l);if(!d||d.from>=h||d.to<=a){let g=new D1(a,l.sliceString(a,h));return lH.set(l,g),g}if(d.from==a&&d.to==h)return d;let{text:f,from:p}=d;return p>a&&(f=l.sliceString(a,p)+f,p=a),d.to<h&&(f+=l.sliceString(d.to,h)),lH.set(l,new D1(p,f)),new D1(a,f.slice(a-p,h-p))}}class Yge{constructor(l,a,h,d,f){this.text=l,this.to=f,this.done=!1,this.value=Zge,this.matchPos=cI(l,d),this.re=new RegExp(a,aH+(null!=h&&h.ignoreCase?"i":"")),this.test=null==h?void 0:h.test,this.flat=D1.get(l,d,this.chunkEnd(d+5e3))}chunkEnd(l){return l>=this.to?this.to:this.text.lineAt(l).to}next(){for(;;){let l=this.re.lastIndex=this.matchPos-this.flat.from,a=this.re.exec(this.flat.text);if(a&&!a[0]&&a.index==l&&(this.re.lastIndex=l+1,a=this.re.exec(this.flat.text)),a){let h=this.flat.from+a.index,d=h+a[0].length;if((this.flat.to>=this.to||a.index+a[0].length<=this.flat.text.length-10)&&(!this.test||this.test(h,d,a)))return this.value={from:h,to:d,match:a},this.matchPos=cI(this.text,d+(h==d?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=D1.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function cI(c,l){if(l>=c.length)return l;let h,a=c.lineAt(l);for(;l<a.to&&(h=a.text.charCodeAt(l-a.from))>=56320&&h<57344;)l++;return l}function cH(c){let l=ss("input",{class:"cm-textfield",name:"line"});function h(){let d=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(l.value);if(!d)return;let{state:f}=c,p=f.doc.lineAt(f.selection.main.head),[,g,m,v,y]=d,_=v?+v.slice(1):0,b=m?+m:p.number;if(m&&y){let x=b/100;g&&(x=x*("-"==g?-1:1)+p.number/f.doc.lines),b=Math.round(f.doc.lines*x)}else m&&g&&(b=b*("-"==g?-1:1)+p.number);let C=f.doc.line(Math.max(1,Math.min(f.doc.lines,b)));c.dispatch({effects:uI.of(!1),selection:At.cursor(C.from+Math.max(0,Math.min(_,C.length))),scrollIntoView:!0}),c.focus()}return{dom:ss("form",{class:"cm-gotoLine",onkeydown:d=>{27==d.keyCode?(d.preventDefault(),c.dispatch({effects:uI.of(!1)}),c.focus()):13==d.keyCode&&(d.preventDefault(),h())},onsubmit:d=>{d.preventDefault(),h()}},ss("label",c.state.phrase("Go to line"),": ",l)," ",ss("button",{class:"cm-button",type:"submit"},c.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Xge.prototype[Symbol.iterator]=Yge.prototype[Symbol.iterator]=function(){return this});const uI=Yi.define(),Kge=yo.define({create:()=>!0,update(c,l){for(let a of l.effects)a.is(uI)&&(c=a.value);return c},provide:c=>GS.from(c,l=>l?cH:null)}),Bot=Ai.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Vot={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Jge=zn.define({combine:c=>xh(c,Vot,{highlightWordAroundCursor:(l,a)=>l||a,minSelectionLength:Math.min,maxMatches:Math.min})});function zot(c){let l=[Got,Wot];return c&&l.push(Jge.of(c)),l}const Uot=Hn.mark({class:"cm-selectionMatch"}),Hot=Hn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function eme(c,l,a,h){return!(0!=a&&c(l.sliceDoc(a-1,a))==Ss.Word||h!=l.doc.length&&c(l.sliceDoc(h,h+1))==Ss.Word)}const Wot=io.fromClass(class{constructor(c){this.decorations=this.getDeco(c)}update(c){(c.selectionSet||c.docChanged||c.viewportChanged)&&(this.decorations=this.getDeco(c.view))}getDeco(c){let l=c.state.facet(Jge),{state:a}=c,h=a.selection;if(h.ranges.length>1)return Hn.none;let f,d=h.main,p=null;if(d.empty){if(!l.highlightWordAroundCursor)return Hn.none;let m=a.wordAt(d.head);if(!m)return Hn.none;p=a.charCategorizer(d.head),f=a.sliceDoc(m.from,m.to)}else{let m=d.to-d.from;if(m<l.minSelectionLength||m>200)return Hn.none;if(l.wholeWords){if(f=a.sliceDoc(d.from,d.to),p=a.charCategorizer(d.head),!eme(p,a,d.from,d.to)||!function $ot(c,l,a,h){return c(l.sliceDoc(a,a+1))==Ss.Word&&c(l.sliceDoc(h-1,h))==Ss.Word}(p,a,d.from,d.to))return Hn.none}else if(f=a.sliceDoc(d.from,d.to).trim(),!f)return Hn.none}let g=[];for(let m of c.visibleRanges){let v=new O1(a.doc,f,m.from,m.to);for(;!v.next().done;){let{from:y,to:_}=v.value;if((!p||eme(p,a,y,_))&&(d.empty&&y<=d.from&&_>=d.to?g.push(Hot.range(y,_)):(y>=d.to||_<=d.from)&&g.push(Uot.range(y,_)),g.length>l.maxMatches))return Hn.none}}return Hn.set(g)}},{decorations:c=>c.decorations}),Got=Ai.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),hI=zn.define({combine:c=>xh(c,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:l=>new oat(l)})});class tme{constructor(l){this.search=l.search,this.caseSensitive=!!l.caseSensitive,this.literal=!!l.literal,this.regexp=!!l.regexp,this.replace=l.replace||"",this.valid=!!this.search&&(!this.regexp||function Not(c){try{return new RegExp(c,aH),!0}catch(l){return!1}}(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(a,h)=>"n"==h?"\n":"r"==h?"\r":"t"==h?"\t":"\\"),this.wholeWord=!!l.wholeWord}eq(l){return this.search==l.search&&this.replace==l.replace&&this.caseSensitive==l.caseSensitive&&this.regexp==l.regexp&&this.wholeWord==l.wholeWord}create(){return this.regexp?new Kot(this):new Xot(this)}getCursor(l,a=0,h){let d=l.doc?l:Sl.create({doc:l});return null==h&&(h=d.doc.length),this.regexp?M1(this,d,a,h):k1(this,d,a,h)}}class nme{constructor(l){this.spec=l}}function k1(c,l,a,h){return new O1(l.doc,c.unquoted,a,h,c.caseSensitive?void 0:d=>d.toLowerCase(),c.wholeWord?function Zot(c,l){return(a,h,d,f)=>((f>a||f+d.length<h)&&(f=Math.max(0,a-2),d=c.sliceString(f,Math.min(c.length,h+2))),!(l(dI(d,a-f))==Ss.Word&&l(fI(d,a-f))==Ss.Word||l(fI(d,h-f))==Ss.Word&&l(dI(d,h-f))==Ss.Word))}(l.doc,l.charCategorizer(l.selection.main.head)):void 0)}class Xot extends nme{constructor(l){super(l)}nextMatch(l,a,h){let d=k1(this.spec,l,h,l.doc.length).nextOverlapping();return d.done&&(d=k1(this.spec,l,0,a).nextOverlapping()),d.done?null:d.value}prevMatchInRange(l,a,h){for(let d=h;;){let f=Math.max(a,d-1e4-this.spec.unquoted.length),p=k1(this.spec,l,f,d),g=null;for(;!p.nextOverlapping().done;)g=p.value;if(g)return g;if(f==a)return null;d-=1e4}}prevMatch(l,a,h){return this.prevMatchInRange(l,0,a)||this.prevMatchInRange(l,h,l.doc.length)}getReplacement(l){return this.spec.replace}matchAll(l,a){let h=k1(this.spec,l,0,l.doc.length),d=[];for(;!h.next().done;){if(d.length>=a)return null;d.push(h.value)}return d}highlight(l,a,h,d){let f=k1(this.spec,l,Math.max(0,a-this.spec.unquoted.length),Math.min(h+this.spec.unquoted.length,l.doc.length));for(;!f.next().done;)d(f.value.from,f.value.to)}}function M1(c,l,a,h){return new Xge(l.doc,c.search,{ignoreCase:!c.caseSensitive,test:c.wholeWord?Yot(l.charCategorizer(l.selection.main.head)):void 0},a,h)}function dI(c,l){return c.slice(wl(c,l,!1),l)}function fI(c,l){return c.slice(l,wl(c,l))}function Yot(c){return(l,a,h)=>!h[0].length||(c(dI(h.input,h.index))!=Ss.Word||c(fI(h.input,h.index))!=Ss.Word)&&(c(fI(h.input,h.index+h[0].length))!=Ss.Word||c(dI(h.input,h.index+h[0].length))!=Ss.Word)}class Kot extends nme{nextMatch(l,a,h){let d=M1(this.spec,l,h,l.doc.length).next();return d.done&&(d=M1(this.spec,l,0,a).next()),d.done?null:d.value}prevMatchInRange(l,a,h){for(let d=1;;d++){let f=Math.max(a,h-1e4*d),p=M1(this.spec,l,f,h),g=null;for(;!p.next().done;)g=p.value;if(g&&(f==a||g.from>f+10))return g;if(f==a)return null}}prevMatch(l,a,h){return this.prevMatchInRange(l,0,a)||this.prevMatchInRange(l,h,l.doc.length)}getReplacement(l){return this.spec.replace.replace(/\$([$&\d+])/g,(a,h)=>"$"==h?"$":"&"==h?l.match[0]:"0"!=h&&+h<l.match.length?l.match[h]:a)}matchAll(l,a){let h=M1(this.spec,l,0,l.doc.length),d=[];for(;!h.next().done;){if(d.length>=a)return null;d.push(h.value)}return d}highlight(l,a,h,d){let f=M1(this.spec,l,Math.max(0,a-250),Math.min(h+250,l.doc.length));for(;!f.next().done;)d(f.value.from,f.value.to)}}const n2=Yi.define(),uH=Yi.define(),zd=yo.define({create:c=>new hH(mI(c).create(),null),update(c,l){for(let a of l.effects)a.is(n2)?c=new hH(a.value.create(),c.panel):a.is(uH)&&(c=new hH(c.query,a.value?dH:null));return c},provide:c=>GS.from(c,l=>l.panel)});class hH{constructor(l,a){this.query=l,this.panel=a}}const Jot=Hn.mark({class:"cm-searchMatch"}),eat=Hn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),tat=io.fromClass(class{constructor(c){this.view=c,this.decorations=this.highlight(c.state.field(zd))}update(c){let l=c.state.field(zd);(l!=c.startState.field(zd)||c.docChanged||c.selectionSet||c.viewportChanged)&&(this.decorations=this.highlight(l))}highlight({query:c,panel:l}){if(!l||!c.spec.valid)return Hn.none;let{view:a}=this,h=new Og;for(let d=0,f=a.visibleRanges,p=f.length;d<p;d++){let{from:g,to:m}=f[d];for(;d<p-1&&m>f[d+1].from-500;)m=f[++d].to;c.highlight(a.state,g,m,(v,y)=>{let _=a.state.selection.ranges.some(b=>b.from==v&&b.to==y);h.add(v,y,_?eat:Jot)})}return h.finish()}},{decorations:c=>c.decorations});function i2(c){return l=>{let a=l.state.field(zd,!1);return a&&a.query.spec.valid?c(l,a):rme(l)}}const pI=i2((c,{query:l})=>{let{to:a}=c.state.selection.main,h=l.nextMatch(c.state,a,a);return!!h&&(c.dispatch({selection:{anchor:h.from,head:h.to},scrollIntoView:!0,effects:fH(c,h),userEvent:"select.search"}),!0)}),gI=i2((c,{query:l})=>{let{state:a}=c,{from:h}=a.selection.main,d=l.prevMatch(a,h,h);return!!d&&(c.dispatch({selection:{anchor:d.from,head:d.to},scrollIntoView:!0,effects:fH(c,d),userEvent:"select.search"}),!0)}),nat=i2((c,{query:l})=>{let a=l.matchAll(c.state,1e3);return!(!a||!a.length||(c.dispatch({selection:At.create(a.map(h=>At.range(h.from,h.to))),userEvent:"select.search.matches"}),0))}),ime=i2((c,{query:l})=>{let{state:a}=c,{from:h,to:d}=a.selection.main;if(a.readOnly)return!1;let f=l.nextMatch(a,h,h);if(!f)return!1;let g,m,p=[],v=[];if(f.from==h&&f.to==d&&(m=a.toText(l.getReplacement(f)),p.push({from:f.from,to:f.to,insert:m}),f=l.nextMatch(a,f.from,f.to),v.push(Ai.announce.of(a.phrase("replaced match on line $",a.doc.lineAt(h).number)+"."))),f){let y=0==p.length||p[0].from>=f.to?0:f.to-f.from-m.length;g={anchor:f.from-y,head:f.to-y},v.push(fH(c,f))}return c.dispatch({changes:p,selection:g,scrollIntoView:!!g,effects:v,userEvent:"input.replace"}),!0}),rat=i2((c,{query:l})=>{if(c.state.readOnly)return!1;let a=l.matchAll(c.state,1e9).map(d=>{let{from:f,to:p}=d;return{from:f,to:p,insert:l.getReplacement(d)}});if(!a.length)return!1;let h=c.state.phrase("replaced $ matches",a.length)+".";return c.dispatch({changes:a,effects:Ai.announce.of(h),userEvent:"input.replace.all"}),!0});function dH(c){return c.state.facet(hI).createPanel(c)}function mI(c,l){var a,h,d,f;let p=c.selection.main,g=p.empty||p.to>p.from+100?"":c.sliceDoc(p.from,p.to);if(l&&!g)return l;let m=c.facet(hI);return new tme({search:(null!==(a=null==l?void 0:l.literal)&&void 0!==a?a:m.literal)?g:g.replace(/\n/g,"\\n"),caseSensitive:null!==(h=null==l?void 0:l.caseSensitive)&&void 0!==h?h:m.caseSensitive,literal:null!==(d=null==l?void 0:l.literal)&&void 0!==d?d:m.literal,wholeWord:null!==(f=null==l?void 0:l.wholeWord)&&void 0!==f?f:m.wholeWord})}const rme=c=>{let l=c.state.field(zd,!1);if(l&&l.panel){let a=WS(c,dH);if(!a)return!1;let h=a.dom.querySelector("[main-field]");if(h&&h!=c.root.activeElement){let d=mI(c.state,l.query.spec);d.valid&&c.dispatch({effects:n2.of(d)}),h.focus(),h.select()}}else c.dispatch({effects:[uH.of(!0),l?n2.of(mI(c.state,l.query.spec)):Yi.appendConfig.of(pH)]});return!0},sme=c=>{let l=c.state.field(zd,!1);if(!l||!l.panel)return!1;let a=WS(c,dH);return a&&a.dom.contains(c.root.activeElement)&&c.focus(),c.dispatch({effects:uH.of(!1)}),!0},sat=[{key:"Mod-f",run:rme,scope:"editor search-panel"},{key:"F3",run:pI,shift:gI,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:pI,shift:gI,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:sme,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:c,dispatch:l})=>{let a=c.selection;if(a.ranges.length>1||a.main.empty)return!1;let{from:h,to:d}=a.main,f=[],p=0;for(let g=new O1(c.doc,c.sliceDoc(h,d));!g.next().done;){if(f.length>1e3)return!1;g.value.from==h&&(p=f.length),f.push(At.range(g.value.from,g.value.to))}return l(c.update({selection:At.create(f,p),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:c=>{let l=WS(c,cH);if(!l){let a=[uI.of(!0)];null==c.state.field(Kge,!1)&&a.push(Yi.appendConfig.of([Kge,Bot])),c.dispatch({effects:a}),l=WS(c,cH)}return l&&l.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:c,dispatch:l})=>{let{ranges:a}=c.selection;if(a.some(f=>f.from===f.to))return(({state:c,dispatch:l})=>{let{selection:a}=c,h=At.create(a.ranges.map(d=>c.wordAt(d.head)||At.cursor(d.head)),a.mainIndex);return!h.eq(a)&&(l(c.update({selection:h})),!0)})({state:c,dispatch:l});let h=c.sliceDoc(a[0].from,a[0].to);if(c.selection.ranges.some(f=>c.sliceDoc(f.from,f.to)!=h))return!1;let d=function jot(c,l){let{main:a,ranges:h}=c.selection,d=c.wordAt(a.head),f=d&&d.from==a.from&&d.to==a.to;for(let p=!1,g=new O1(c.doc,l,h[h.length-1].to);;){if(g.next(),!g.done){if(p&&h.some(m=>m.from==g.value.from))continue;if(f){let m=c.wordAt(g.value.from);if(!m||m.from!=g.value.from||m.to!=g.value.to)continue}return g.value}if(p)return null;g=new O1(c.doc,l,0,Math.max(0,h[h.length-1].from-1)),p=!0}}(c,h);return!!d&&(l(c.update({selection:c.selection.addRange(At.range(d.from,d.to),!1),effects:Ai.scrollIntoView(d.to)})),!0)},preventDefault:!0}];class oat{constructor(l){this.view=l;let a=this.query=l.state.field(zd).query.spec;function h(d,f,p){return ss("button",{class:"cm-button",name:d,onclick:f,type:"button"},p)}this.commit=this.commit.bind(this),this.searchField=ss("input",{value:a.search,placeholder:Hc(l,"Find"),"aria-label":Hc(l,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ss("input",{value:a.replace,placeholder:Hc(l,"Replace"),"aria-label":Hc(l,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=ss("input",{type:"checkbox",name:"case",checked:a.caseSensitive,onchange:this.commit}),this.reField=ss("input",{type:"checkbox",name:"re",checked:a.regexp,onchange:this.commit}),this.wordField=ss("input",{type:"checkbox",name:"word",checked:a.wholeWord,onchange:this.commit}),this.dom=ss("div",{onkeydown:d=>this.keydown(d),class:"cm-search"},[this.searchField,h("next",()=>pI(l),[Hc(l,"next")]),h("prev",()=>gI(l),[Hc(l,"previous")]),h("select",()=>nat(l),[Hc(l,"all")]),ss("label",null,[this.caseField,Hc(l,"match case")]),ss("label",null,[this.reField,Hc(l,"regexp")]),ss("label",null,[this.wordField,Hc(l,"by word")]),...l.state.readOnly?[]:[ss("br"),this.replaceField,h("replace",()=>ime(l),[Hc(l,"replace")]),h("replaceAll",()=>rat(l),[Hc(l,"replace all")]),ss("button",{name:"close",onclick:()=>sme(l),"aria-label":Hc(l,"close"),type:"button"},["\xd7"])]])}commit(){let l=new tme({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});l.eq(this.query)||(this.query=l,this.view.dispatch({effects:n2.of(l)}))}keydown(l){!function xit(c,l,a){return Qfe(Gfe(c.state),l,c,a)}(this.view,l,"search-panel")?13==l.keyCode&&l.target==this.searchField?(l.preventDefault(),(l.shiftKey?gI:pI)(this.view)):13==l.keyCode&&l.target==this.replaceField&&(l.preventDefault(),ime(this.view)):l.preventDefault()}update(l){for(let a of l.transactions)for(let h of a.effects)h.is(n2)&&!h.value.eq(this.query)&&this.setQuery(h.value)}setQuery(l){this.query=l,this.searchField.value=l.search,this.replaceField.value=l.replace,this.caseField.checked=l.caseSensitive,this.reField.checked=l.regexp,this.wordField.checked=l.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(hI).top}}function Hc(c,l){return c.state.phrase(l)}const yI=/[\s\.,:;?!]/;function fH(c,{from:l,to:a}){let h=c.state.doc.lineAt(l),d=c.state.doc.lineAt(a).to,f=Math.max(h.from,l-30),p=Math.min(d,a+30),g=c.state.sliceDoc(f,p);if(f!=h.from)for(let m=0;m<30;m++)if(!yI.test(g[m+1])&&yI.test(g[m])){g=g.slice(m);break}if(p!=d)for(let m=g.length-1;m>g.length-30;m--)if(!yI.test(g[m-1])&&yI.test(g[m])){g=g.slice(0,m);break}return Ai.announce.of(`${c.state.phrase("current match")}. ${g} ${c.state.phrase("on line")} ${h.number}.`)}const aat=Ai.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),pH=[zd,H0.lowest(tat),aat];class ome{constructor(l,a,h){this.state=l,this.pos=a,this.explicit=h,this.abortListeners=[]}tokenBefore(l){let a=ro(this.state).resolveInner(this.pos,-1);for(;a&&l.indexOf(a.name)<0;)a=a.parent;return a?{from:a.from,to:this.pos,text:this.state.sliceDoc(a.from,this.pos),type:a.type}:null}matchBefore(l){let a=this.state.doc.lineAt(this.pos),h=Math.max(a.from,this.pos-250),d=a.text.slice(h-a.from,this.pos-a.from),f=d.search(ume(l,!1));return f<0?null:{from:h+f,to:this.pos,text:d.slice(f)}}get aborted(){return null==this.abortListeners}addEventListener(l,a){"abort"==l&&this.abortListeners&&this.abortListeners.push(a)}}function ame(c){let l=Object.keys(c).join(""),a=/\w/.test(l);return a&&(l=l.replace(/\w/g,"")),`[${a?"\\w":""}${l.replace(/[^\w\s]/g,"\\$&")}]`}function lme(c){let l=c.map(d=>"string"==typeof d?{label:d}:d),[a,h]=l.every(d=>/^\w+$/.test(d.label))?[/\w*$/,/\w+$/]:function lat(c){let l=Object.create(null),a=Object.create(null);for(let{label:d}of c){l[d[0]]=!0;for(let f=1;f<d.length;f++)a[d[f]]=!0}let h=ame(l)+ame(a)+"*$";return[new RegExp("^"+h),new RegExp(h)]}(l);return d=>{let f=d.matchBefore(h);return f||d.explicit?{from:f?f.from:d.pos,options:l,validFor:a}:null}}function cat(c,l){return a=>{for(let h=ro(a.state).resolveInner(a.pos,-1);h;h=h.parent)if(c.indexOf(h.name)>-1)return null;return l(a)}}class cme{constructor(l,a,h){this.completion=l,this.source=a,this.match=h}}function Vg(c){return c.selection.main.head}function ume(c,l){var a;let{source:h}=c,d=l&&"^"!=h[0],f="$"!=h[h.length-1];return d||f?new RegExp(`${d?"^":""}(?:${h})${f?"$":""}`,null!==(a=c.flags)&&void 0!==a?a:c.ignoreCase?"i":""):c}function hme(c,l){const a=l.completion.apply||l.completion.label;let h=l.source;"string"==typeof a?c.dispatch(function uat(c,l,a,h){return Object.assign(Object.assign({},c.changeByRange(d=>{if(d==c.selection.main)return{changes:{from:a,to:h,insert:l},range:At.cursor(a+l.length)};let f=h-a;return!d.empty||f&&c.sliceDoc(d.from-f,d.from)!=c.sliceDoc(a,h)?{range:d}:{changes:{from:d.from-f,to:d.from,insert:l},range:At.cursor(d.from-f+l.length)}})),{userEvent:"input.complete"})}(c.state,a,h.from,h.to)):a(c,l.completion,h.from,h.to)}const dme=new WeakMap;function hat(c){if(!Array.isArray(c))return c;let l=dme.get(c);return l||dme.set(c,l=lme(c)),l}class dat{constructor(l){this.pattern=l,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let a=0;a<l.length;){let h=ma(l,a),d=Lc(h);this.chars.push(h);let f=l.slice(a,a+d),p=f.toUpperCase();this.folded.push(ma(p==f?f.toLowerCase():p,0)),a+=d}this.astral=l.length!=this.chars.length}match(l){if(0==this.pattern.length)return[0];if(l.length<this.pattern.length)return null;let{chars:a,folded:h,any:d,precise:f,byWord:p}=this;if(1==a.length){let O=ma(l,0);return O==a[0]?[0,0,Lc(O)]:O==h[0]?[-200,0,Lc(O)]:null}let g=l.indexOf(this.pattern);if(0==g)return[0,0,this.pattern.length];let m=a.length,v=0;if(g<0){for(let O=0,k=Math.min(l.length,200);O<k&&v<m;){let D=ma(l,O);(D==a[v]||D==h[v])&&(d[v++]=O),O+=Lc(D)}if(v<m)return null}let y=0,_=0,b=!1,C=0,x=-1,S=-1,w=/[a-z]/.test(l),T=!0;for(let O=0,k=Math.min(l.length,200),D=0;O<k&&_<m;){let M=ma(l,O);g<0&&(y<m&&M==a[y]&&(f[y++]=O),C<m&&(M==a[C]||M==h[C]?(0==C&&(x=O),S=O+1,C++):C=0));let A,L=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(A=IU(M))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!O||1==L&&w||0==D&&0!=L)&&(a[_]==M||h[_]==M&&(b=!0)?p[_++]=O:p.length&&(T=!1)),D=L,O+=Lc(M)}return _==m&&0==p[0]&&T?this.result((b?-200:0)-100,p,l):C==m&&0==x?[-200-l.length,0,S]:g>-1?[-700-l.length,g,g+this.pattern.length]:C==m?[-900-l.length,x,S]:_==m?this.result((b?-200:0)-100-700+(T?0:-1100),p,l):2==a.length?null:this.result((d[0]?-700:0)-200-1100,d,l)}result(l,a,h){let d=[l-h.length],f=1;for(let p of a){let g=p+(this.astral?Lc(ma(h,p)):1);f>1&&d[f-1]==p?d[f-1]=g:(d[f++]=p,d[f++]=g)}return d}}const Iu=zn.define({combine:c=>xh(c,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(l,a)=>l.label.localeCompare(a.label),interactionDelay:75},{defaultKeymap:(l,a)=>l&&a,closeOnBlur:(l,a)=>l&&a,icons:(l,a)=>l&&a,optionClass:(l,a)=>h=>function fat(c,l){return c?l?c+" "+l:c:l}(l(h),a(h)),addToOptions:(l,a)=>l.concat(a)})});function fme(c,l,a){if(c<=a)return{from:0,to:c};if(l<0&&(l=0),l<=c>>1){let d=Math.floor(l/a);return{from:d*a,to:(d+1)*a}}let h=Math.floor((c-l)/a);return{from:c-(h+1)*a,to:c-h*a}}class gat{constructor(l,a){this.view=l,this.stateField=a,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:g=>this.positionInfo(g),key:this};let h=l.state.field(a),{options:d,selected:f}=h.open,p=l.state.facet(Iu);this.optionContent=function pat(c){let l=c.addToOptions.slice();return c.icons&&l.push({render(a){let h=document.createElement("div");return h.classList.add("cm-completionIcon"),a.type&&h.classList.add(...a.type.split(/\s+/g).map(d=>"cm-completionIcon-"+d)),h.setAttribute("aria-hidden","true"),h},position:20}),l.push({render(a,h,d){let f=document.createElement("span");f.className="cm-completionLabel";let{label:p}=a,g=0;for(let m=1;m<d.length;){let v=d[m++],y=d[m++];v>g&&f.appendChild(document.createTextNode(p.slice(g,v)));let _=f.appendChild(document.createElement("span"));_.appendChild(document.createTextNode(p.slice(v,y))),_.className="cm-completionMatchedText",g=y}return g<p.length&&f.appendChild(document.createTextNode(p.slice(g))),f},position:50},{render(a){if(!a.detail)return null;let h=document.createElement("span");return h.className="cm-completionDetail",h.textContent=a.detail,h},position:80}),l.sort((a,h)=>a.position-h.position).map(a=>a.render)}(p),this.optionClass=p.optionClass,this.range=fme(d.length,f,p.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",g=>{for(let v,m=g.target;m&&m!=this.dom;m=m.parentNode)if("LI"==m.nodeName&&(v=/-(\d+)$/.exec(m.id))&&+v[1]<d.length)return hme(l,d[+v[1]]),void g.preventDefault()}),this.list=this.dom.appendChild(this.createListBox(d,h.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(l){l.state.field(this.stateField)!=l.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let l=this.view.state.field(this.stateField),a=l.open;if((a.selected>-1&&a.selected<this.range.from||a.selected>=this.range.to)&&(this.range=fme(a.options.length,a.selected,this.view.state.facet(Iu).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(a.options,l.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(a.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:h}=a.options[a.selected],{info:d}=h;if(!d)return;let f="string"==typeof d?document.createTextNode(d):d(h);if(!f)return;"then"in f?f.then(p=>{p&&this.view.state.field(this.stateField,!1)==l&&this.addInfoPane(p)}).catch(p=>Vc(this.view.state,p,"completion info")):this.addInfoPane(f)}}addInfoPane(l){let a=this.info=document.createElement("div");a.className="cm-tooltip cm-completionInfo",a.appendChild(l),this.dom.appendChild(a),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(l){let a=null;for(let h=this.list.firstChild,d=this.range.from;h;h=h.nextSibling,d++)d==l?h.hasAttribute("aria-selected")||(h.setAttribute("aria-selected","true"),a=h):h.hasAttribute("aria-selected")&&h.removeAttribute("aria-selected");return a&&function vat(c,l){let a=c.getBoundingClientRect(),h=l.getBoundingClientRect();h.top<a.top?c.scrollTop-=a.top-h.top:h.bottom>a.bottom&&(c.scrollTop+=h.bottom-a.bottom)}(this.list,a),a}measureInfo(){let l=this.dom.querySelector("[aria-selected]");if(!l||!this.info)return null;let a=this.dom.ownerDocument.defaultView||window,h=this.dom.getBoundingClientRect(),d=this.info.getBoundingClientRect(),f=l.getBoundingClientRect();if(f.top>Math.min(a.innerHeight,h.bottom)-10||f.bottom<Math.max(0,h.top)+10)return null;let v,p=this.view.textDirection==As.RTL,g=p,m=!1,y="",_="",b=h.left,C=a.innerWidth-h.right;if(g&&b<Math.min(d.width,C)?g=!1:!g&&C<Math.min(d.width,b)&&(g=!0),d.width<=(g?b:C))y=Math.max(0,Math.min(f.top,a.innerHeight-d.height))-h.top+"px",v=Math.min(400,g?b:C)+"px";else{m=!0,v=Math.min(400,(p?h.right:a.innerWidth-h.left)-30)+"px";let x=a.innerHeight-h.bottom;x>=d.height||x>h.top?y=f.bottom-h.top+"px":_=h.bottom-f.top+"px"}return{top:y,bottom:_,maxWidth:v,class:m?p?"left-narrow":"right-narrow":g?"left":"right"}}positionInfo(l){this.info&&(l?(this.info.style.top=l.top,this.info.style.bottom=l.bottom,this.info.style.maxWidth=l.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+l.class):this.info.style.top="-1e6px")}createListBox(l,a,h){const d=document.createElement("ul");d.id=a,d.setAttribute("role","listbox"),d.setAttribute("aria-expanded","true"),d.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let f=h.from;f<h.to;f++){let{completion:p,match:g}=l[f];const m=d.appendChild(document.createElement("li"));m.id=a+"-"+f,m.setAttribute("role","option");let v=this.optionClass(p);v&&(m.className=v);for(let y of this.optionContent){let _=y(p,this.view.state,g);_&&m.appendChild(_)}}return h.from&&d.classList.add("cm-completionListIncompleteTop"),h.to<l.length&&d.classList.add("cm-completionListIncompleteBottom"),d}}function mat(c){return l=>new gat(l,c)}function pme(c){return 100*(c.boost||0)+(c.apply?10:0)+(c.info?5:0)+(c.type?1:0)}class r2{constructor(l,a,h,d,f){this.options=l,this.attrs=a,this.tooltip=h,this.timestamp=d,this.selected=f}setSelected(l,a){return l==this.selected||l>=this.options.length?this:new r2(this.options,gme(a,l),this.tooltip,this.timestamp,l)}static build(l,a,h,d,f){let p=function yat(c,l){let a=[],h=0;for(let g of c)if(g.hasResult())if(!1===g.result.filter){let m=g.result.getMatch;for(let v of g.result.options){let y=[1e9-h++];if(m)for(let _ of m(v))y.push(_);a.push(new cme(v,g,y))}}else{let v,m=new dat(l.sliceDoc(g.from,g.to));for(let y of g.result.options)(v=m.match(y.label))&&(null!=y.boost&&(v[0]+=y.boost),a.push(new cme(y,g,v)))}let d=[],f=null,p=l.facet(Iu).compareCompletions;for(let g of a.sort((m,v)=>v.match[0]-m.match[0]||p(m.completion,v.completion)))!f||f.label!=g.completion.label||f.detail!=g.completion.detail||null!=f.type&&null!=g.completion.type&&f.type!=g.completion.type||f.apply!=g.completion.apply?d.push(g):pme(g.completion)>pme(f)&&(d[d.length-1]=g),f=g.completion;return d}(l,a);if(!p.length)return null;let g=a.facet(Iu).selectOnOpen?0:-1;if(d&&d.selected!=g&&-1!=d.selected){let m=d.options[d.selected].completion;for(let v=0;v<p.length;v++)if(p[v].completion==m){g=v;break}}return new r2(p,gme(h,g),{pos:l.reduce((m,v)=>v.hasResult()?Math.min(m,v.from):m,1e8),create:mat(Ga),above:f.aboveCursor},d?d.timestamp:Date.now(),g)}map(l){return new r2(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:l.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class _I{constructor(l,a,h){this.active=l,this.id=a,this.open=h}static start(){return new _I(Cat,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(l){let{state:a}=l,h=a.facet(Iu),f=(h.override||a.languageDataAt("autocomplete",Vg(a)).map(hat)).map(g=>(this.active.find(v=>v.source==g)||new Jl(g,this.active.some(v=>0!=v.state)?1:0)).update(l,h));f.length==this.active.length&&f.every((g,m)=>g==this.active[m])&&(f=this.active);let p=l.selection||f.some(g=>g.hasResult()&&l.changes.touchesRange(g.from,g.to))||!function _at(c,l){if(c==l)return!0;for(let a=0,h=0;;){for(;a<c.length&&!c[a].hasResult;)a++;for(;h<l.length&&!l[h].hasResult;)h++;let d=a==c.length,f=h==l.length;if(d||f)return d==f;if(c[a++].result!=l[h++].result)return!1}}(f,this.active)?r2.build(f,a,this.id,this.open,h):this.open&&l.docChanged?this.open.map(l.changes):this.open;!p&&f.every(g=>1!=g.state)&&f.some(g=>g.hasResult())&&(f=f.map(g=>g.hasResult()?new Jl(g.source,0):g));for(let g of l.effects)g.is(vH)&&(p=p&&p.setSelected(g.value,this.id));return f==this.active&&p==this.open?this:new _I(f,this.id,p)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:bat}}const bat={"aria-autocomplete":"list"};function gme(c,l){let a={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":c};return l>-1&&(a["aria-activedescendant"]=c+"-"+l),a}const Cat=[];function gH(c){return c.isUserEvent("input.type")?"input":c.isUserEvent("delete.backward")?"delete":null}class Jl{constructor(l,a,h=-1){this.source=l,this.state=a,this.explicitPos=h}hasResult(){return!1}update(l,a){let h=gH(l),d=this;h?d=d.handleUserEvent(l,h,a):l.docChanged?d=d.handleChange(l):l.selection&&0!=d.state&&(d=new Jl(d.source,0));for(let f of l.effects)if(f.is(mH))d=new Jl(d.source,1,f.value?Vg(l.state):-1);else if(f.is(bI))d=new Jl(d.source,0);else if(f.is(mme))for(let p of f.value)p.source==d.source&&(d=p);return d}handleUserEvent(l,a,h){return"delete"!=a&&h.activateOnTyping?new Jl(this.source,1):this.map(l.changes)}handleChange(l){return l.changes.touchesRange(Vg(l.startState))?new Jl(this.source,0):this.map(l.changes)}map(l){return l.empty||this.explicitPos<0?this:new Jl(this.source,this.state,l.mapPos(this.explicitPos))}}class s2 extends Jl{constructor(l,a,h,d,f){super(l,2,a),this.result=h,this.from=d,this.to=f}hasResult(){return!0}handleUserEvent(l,a,h){var d;let f=l.changes.mapPos(this.from),p=l.changes.mapPos(this.to,1),g=Vg(l.state);if((this.explicitPos<0?g<=f:g<this.from)||g>p||"delete"==a&&Vg(l.startState)==this.from)return new Jl(this.source,"input"==a&&h.activateOnTyping?1:0);let v,m=this.explicitPos<0?-1:l.changes.mapPos(this.explicitPos);return function xat(c,l,a,h){if(!c)return!1;let d=l.sliceDoc(a,h);return"function"==typeof c?c(d,a,h,l):ume(c,!0).test(d)}(this.result.validFor,l.state,f,p)?new s2(this.source,m,this.result,f,p):this.result.update&&(v=this.result.update(this.result,f,p,new ome(l.state,g,m>=0)))?new s2(this.source,m,v,v.from,null!==(d=v.to)&&void 0!==d?d:Vg(l.state)):new Jl(this.source,1,m)}handleChange(l){return l.changes.touchesRange(this.from,this.to)?new Jl(this.source,0):this.map(l.changes)}map(l){return l.empty?this:new s2(this.source,this.explicitPos<0?-1:l.mapPos(this.explicitPos),this.result,l.mapPos(this.from),l.mapPos(this.to,1))}}const mH=Yi.define(),bI=Yi.define(),mme=Yi.define({map:(c,l)=>c.map(a=>a.map(l))}),vH=Yi.define(),Ga=yo.define({create:()=>_I.start(),update:(c,l)=>c.update(l),provide:c=>[IA.from(c,l=>l.tooltip),Ai.contentAttributes.from(c,l=>l.attrs)]});function CI(c,l="option"){return a=>{let h=a.state.field(Ga,!1);if(!h||!h.open||Date.now()-h.open.timestamp<a.state.facet(Iu).interactionDelay)return!1;let f,d=1;"page"==l&&(f=function lrt(c,l){let a=c.plugin(k7);if(!a)return null;let h=a.manager.tooltips.indexOf(l);return h<0?null:a.manager.tooltipViews[h]}(a,h.open.tooltip))&&(d=Math.max(2,Math.floor(f.dom.offsetHeight/f.dom.querySelector("li").offsetHeight)-1));let{length:p}=h.open.options,g=h.open.selected>-1?h.open.selected+d*(c?1:-1):c?0:p-1;return g<0?g="page"==l?0:p-1:g>=p&&(g="page"==l?p-1:0),a.dispatch({effects:vH.of(g)}),!0}}class Oat{constructor(l,a){this.active=l,this.context=a,this.time=Date.now(),this.updates=[],this.done=void 0}}const Mat=io.fromClass(class{constructor(c){this.view=c,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let l of c.state.field(Ga).active)1==l.state&&this.startQuery(l)}update(c){let l=c.state.field(Ga);if(!c.selectionSet&&!c.docChanged&&c.startState.field(Ga)==l)return;let a=c.transactions.some(h=>(h.selection||h.docChanged)&&!gH(h));for(let h=0;h<this.running.length;h++){let d=this.running[h];if(a||d.updates.length+c.transactions.length>50&&Date.now()-d.time>1e3){for(let f of d.context.abortListeners)try{f()}catch(p){Vc(this.view.state,p)}d.context.abortListeners=null,this.running.splice(h--,1)}else d.updates.push(...c.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=l.active.some(h=>1==h.state&&!this.running.some(d=>d.active.source==h.source))?setTimeout(()=>this.startUpdate(),50):-1,0!=this.composing)for(let h of c.transactions)"input"==gH(h)?this.composing=2:2==this.composing&&h.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:c}=this.view,l=c.field(Ga);for(let a of l.active)1==a.state&&!this.running.some(h=>h.active.source==a.source)&&this.startQuery(a)}startQuery(c){let{state:l}=this.view,a=Vg(l),h=new ome(l,a,c.explicitPos==a),d=new Oat(c,h);this.running.push(d),Promise.resolve(c.source(h)).then(f=>{d.context.aborted||(d.done=f||null,this.scheduleAccept())},f=>{this.view.dispatch({effects:bI.of(null)}),Vc(this.view.state,f)})}scheduleAccept(){this.running.every(c=>void 0!==c.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),50))}accept(){var c;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let l=[],a=this.view.state.facet(Iu);for(let h=0;h<this.running.length;h++){let d=this.running[h];if(void 0===d.done)continue;if(this.running.splice(h--,1),d.done){let p=new s2(d.active.source,d.active.explicitPos,d.done,d.done.from,null!==(c=d.done.to)&&void 0!==c?c:Vg(d.updates.length?d.updates[0].startState:this.view.state));for(let g of d.updates)p=p.update(g,a);if(p.hasResult()){l.push(p);continue}}let f=this.view.state.field(Ga).active.find(p=>p.source==d.active.source);if(f&&1==f.state)if(null==d.done){let p=new Jl(d.active.source,0);for(let g of d.updates)p=p.update(g,a);1!=p.state&&l.push(p)}else this.startQuery(f)}l.length&&this.view.dispatch({effects:mme.of(l)})}},{eventHandlers:{blur(){let c=this.view.state.field(Ga,!1);c&&c.tooltip&&this.view.state.facet(Iu).closeOnBlur&&this.view.dispatch({effects:bI.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:mH.of(!1)}),20),this.composing=0}}}),yme=Ai.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1d465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1d436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1d461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Eat{constructor(l,a,h,d){this.field=l,this.line=a,this.from=h,this.to=d}}class yH{constructor(l,a,h){this.field=l,this.from=a,this.to=h}map(l){let a=l.mapPos(this.from,-1,va.TrackDel),h=l.mapPos(this.to,1,va.TrackDel);return null==a||null==h?null:new yH(this.field,a,h)}}class _H{constructor(l,a){this.lines=l,this.fieldPositions=a}instantiate(l,a){let h=[],d=[a],f=l.doc.lineAt(a),p=/^\s*/.exec(f.text)[0];for(let m of this.lines){if(h.length){let v=p,y=/^\t*/.exec(m)[0].length;for(let _=0;_<y;_++)v+=l.facet(QA);d.push(a+v.length-y),m=v+m.slice(y)}h.push(m),a+=m.length+1}return{text:h,ranges:this.fieldPositions.map(m=>new yH(m.field,d[m.line]+m.from,d[m.line]+m.to))}}static parse(l){let f,a=[],h=[],d=[];for(let p of l.split(/\r\n?|\n/)){for(;f=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(p);){let g=f[1]?+f[1]:null,m=f[2]||f[3]||"",v=-1;for(let y=0;y<a.length;y++)(null!=g?a[y].seq==g:m&&a[y].name==m)&&(v=y);if(v<0){let y=0;for(;y<a.length&&(null==g||null!=a[y].seq&&a[y].seq<g);)y++;a.splice(y,0,{seq:g,name:m}),v=y;for(let _ of d)_.field>=v&&_.field++}d.push(new Eat(v,h.length,f.index,f.index+m.length)),p=p.slice(0,f.index)+m+p.slice(f.index+f[0].length)}for(let g;g=/([$#])\\{/.exec(p);){p=p.slice(0,g.index)+g[1]+"{"+p.slice(g.index+g[0].length);for(let m of d)m.line==h.length&&m.from>g.index&&(m.from--,m.to--)}h.push(p)}return new _H(h,d)}}let Aat=Hn.widget({widget:new class extends Jf{toDOM(){let c=document.createElement("span");return c.className="cm-snippetFieldPosition",c}ignoreEvent(){return!1}}}),Iat=Hn.mark({class:"cm-snippetField"});class E1{constructor(l,a){this.ranges=l,this.active=a,this.deco=Hn.set(l.map(h=>(h.from==h.to?Aat:Iat).range(h.from,h.to)))}map(l){let a=[];for(let h of this.ranges){let d=h.map(l);if(!d)return null;a.push(d)}return new E1(a,this.active)}selectionInsideField(l){return l.ranges.every(a=>this.ranges.some(h=>h.field==this.active&&h.from<=a.from&&h.to>=a.to))}}const o2=Yi.define({map:(c,l)=>c&&c.map(l)}),Pat=Yi.define(),a2=yo.define({create:()=>null,update(c,l){for(let a of l.effects){if(a.is(o2))return a.value;if(a.is(Pat)&&c)return new E1(c.ranges,a.value)}return c&&l.docChanged&&(c=c.map(l.changes)),c&&l.selection&&!c.selectionInsideField(l.selection)&&(c=null),c},provide:c=>Ai.decorations.from(c,l=>l?l.deco:Hn.none)});function bH(c,l){return At.create(c.filter(a=>a.field==l).map(a=>At.range(a.from,a.to)))}function Rat(c){let l=_H.parse(c);return(a,h,d,f)=>{let{text:p,ranges:g}=l.instantiate(a.state,d),m={changes:{from:d,to:f,insert:Ir.of(p)},scrollIntoView:!0};if(g.length&&(m.selection=bH(g,0)),g.length>1){let v=new E1(g,0),y=m.effects=[o2.of(v)];void 0===a.state.field(a2,!1)&&y.push(Yi.appendConfig.of([a2,Nat,Lat,yme]))}a.dispatch(a.state.update(m))}}function _me(c){return({state:l,dispatch:a})=>{let h=l.field(a2,!1);if(!h||c<0&&0==h.active)return!1;let d=h.active+c,f=c>0&&!h.ranges.some(p=>p.field==d+c);return a(l.update({selection:bH(h.ranges,d),effects:o2.of(f?null:new E1(h.ranges,d))})),!0}}const Fat=[{key:"Tab",run:_me(1),shift:_me(-1)},{key:"Escape",run:({state:c,dispatch:l})=>!!c.field(a2,!1)&&(l(c.update({effects:o2.of(null)})),!0)}],bme=zn.define({combine:c=>c.length?c[0]:Fat}),Nat=H0.highest(MA.compute([bme],c=>c.facet(bme)));function wh(c,l){return Object.assign(Object.assign({},l),{apply:Rat(c)})}const Lat=Ai.domEventHandlers({mousedown(c,l){let h,a=l.state.field(a2,!1);if(!a||null==(h=l.posAtCoords({x:c.clientX,y:c.clientY})))return!1;let d=a.ranges.find(f=>f.from<=h&&f.to>=h);return!(!d||d.field==a.active||(l.dispatch({selection:bH(a.ranges,d.field),effects:o2.of(a.ranges.some(f=>f.field>d.field)?new E1(a.ranges,d.field):null)}),0))}}),l2={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Y0=Yi.define({map(c,l){let a=l.mapPos(c,-1,va.TrackAfter);return null==a?void 0:a}}),CH=Yi.define({map:(c,l)=>l.mapPos(c)}),xH=new class extends G0{};xH.startSide=1,xH.endSide=-1;const Tme=yo.define({create:()=>Es.empty,update(c,l){if(l.selection){let a=l.state.doc.lineAt(l.selection.main.head).from,h=l.startState.doc.lineAt(l.startState.selection.main.head).from;a!=l.changes.mapPos(h,-1)&&(c=Es.empty)}c=c.map(l.changes);for(let a of l.effects)a.is(Y0)?c=c.update({add:[xH.range(a.value,a.value+1)]}):a.is(CH)&&(c=c.update({filter:h=>h!=a.value}));return c}}),wH="()[]{}<>";function Ome(c){for(let l=0;l<wH.length;l+=2)if(wH.charCodeAt(l)==c)return wH.charAt(l+1);return IU(c<128?c:c+1)}function Dme(c,l){return c.languageDataAt("closeBrackets",l)[0]||l2}const Uat="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Hat=Ai.inputHandler.of((c,l,a,h)=>{if((Uat?c.composing:c.compositionStarted)||c.state.readOnly)return!1;let d=c.state.selection.main;if(h.length>2||2==h.length&&1==Lc(ma(h,0))||l!=d.from||a!=d.to)return!1;let f=function Wat(c,l){let a=Dme(c,c.selection.main.head),h=a.brackets||l2.brackets;for(let d of h){let f=Ome(ma(d,0));if(l==d)return f==d?qat(c,d,h.indexOf(d+d+d)>-1,a):Qat(c,d,f,a.before||l2.before);if(l==f&&kme(c,c.selection.main.from))return jat(c,0,f)}return null}(c.state,h);return!!f&&(c.dispatch(f),!0)}),$at=[{key:"Backspace",run:({state:c,dispatch:l})=>{if(c.readOnly)return!1;let h=Dme(c,c.selection.main.head).brackets||l2.brackets,d=null,f=c.changeByRange(p=>{if(p.empty){let g=function Gat(c,l){let a=c.sliceString(l-2,l);return Lc(ma(a,0))==a.length?a:a.slice(1)}(c.doc,p.head);for(let m of h)if(m==g&&xI(c.doc,p.head)==Ome(ma(m,0)))return{changes:{from:p.head-m.length,to:p.head+m.length},range:At.cursor(p.head-m.length)}}return{range:d=p}});return d||l(c.update(f,{scrollIntoView:!0,userEvent:"delete.backward"})),!d}}];function kme(c,l){let a=!1;return c.field(Tme).between(0,c.doc.length,h=>{h==l&&(a=!0)}),a}function xI(c,l){let a=c.sliceString(l,l+2);return a.slice(0,Lc(ma(a,0)))}function Qat(c,l,a,h){let d=null,f=c.changeByRange(p=>{if(!p.empty)return{changes:[{insert:l,from:p.from},{insert:a,from:p.to}],effects:Y0.of(p.to+l.length),range:At.range(p.anchor+l.length,p.head+l.length)};let g=xI(c.doc,p.head);return!g||/\s/.test(g)||h.indexOf(g)>-1?{changes:{insert:l+a,from:p.head},effects:Y0.of(p.head+l.length),range:At.cursor(p.head+l.length)}:{range:d=p}});return d?null:c.update(f,{scrollIntoView:!0,userEvent:"input.type"})}function jat(c,l,a){let h=null,d=c.selection.ranges.map(f=>f.empty&&xI(c.doc,f.head)==a?At.cursor(f.head+a.length):h=f);return h?null:c.update({selection:At.create(d,c.selection.mainIndex),scrollIntoView:!0,effects:c.selection.ranges.map(({from:f})=>CH.of(f))})}function qat(c,l,a,h){let d=h.stringPrefixes||l2.stringPrefixes,f=null,p=c.changeByRange(g=>{if(!g.empty)return{changes:[{insert:l,from:g.from},{insert:l,from:g.to}],effects:Y0.of(g.to+l.length),range:At.range(g.anchor+l.length,g.head+l.length)};let y,m=g.head,v=xI(c.doc,m);if(v==l){if(Mme(c,m))return{changes:{insert:l+l,from:m},effects:Y0.of(m+l.length),range:At.cursor(m+l.length)};if(kme(c,m)){let _=a&&c.sliceDoc(m,m+3*l.length)==l+l+l;return{range:At.cursor(m+l.length*(_?3:1)),effects:CH.of(m)}}}else{if(a&&c.sliceDoc(m-2*l.length,m)==l+l&&(y=Eme(c,m-2*l.length,d))>-1&&Mme(c,y))return{changes:{insert:l+l+l+l,from:m},effects:Y0.of(m+l.length),range:At.cursor(m+l.length)};if(c.charCategorizer(m)(v)!=Ss.Word&&Eme(c,m,d)>-1&&!function Zat(c,l,a,h){let d=ro(c).resolveInner(l,-1),f=h.reduce((p,g)=>Math.max(p,g.length),0);for(let p=0;p<5;p++){let g=c.sliceDoc(d.from,Math.min(d.to,d.from+a.length+f)),m=g.indexOf(a);if(!m||m>-1&&h.indexOf(g.slice(0,m))>-1){let y=d.firstChild;for(;y&&y.from==d.from&&y.to-y.from>a.length+m;){if(c.sliceDoc(y.to-a.length,y.to)==a)return!1;y=y.firstChild}return!0}let v=d.to==l&&d.parent;if(!v)break;d=v}return!1}(c,m,l,d))return{changes:{insert:l+l,from:m},effects:Y0.of(m+l.length),range:At.cursor(m+l.length)}}return{range:f=g}});return f?null:c.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function Mme(c,l){let a=ro(c).resolveInner(l+1);return a.parent&&a.from==l}function Eme(c,l,a){let h=c.charCategorizer(l);if(h(c.sliceDoc(l-1,l))!=Ss.Word)return l;for(let d of a){let f=l-d.length;if(c.sliceDoc(f,l)==d&&h(c.sliceDoc(f-1,f))!=Ss.Word)return f}return-1}function Ame(c={}){return[Ga,Iu.of(c),Mat,Xat,yme]}const Ime=[{key:"Ctrl-Space",run:c=>!!c.state.field(Ga,!1)&&(c.dispatch({effects:mH.of(!0)}),!0)},{key:"Escape",run:c=>{let l=c.state.field(Ga,!1);return!(!l||!l.active.some(a=>0!=a.state)||(c.dispatch({effects:bI.of(null)}),0))}},{key:"ArrowDown",run:CI(!0)},{key:"ArrowUp",run:CI(!1)},{key:"PageDown",run:CI(!0,"page")},{key:"PageUp",run:CI(!1,"page")},{key:"Enter",run:c=>{let l=c.state.field(Ga,!1);return!(c.state.readOnly||!l||!l.open||l.open.selected<0||Date.now()-l.open.timestamp<c.state.facet(Iu).interactionDelay||(hme(c,l.open.options[l.open.selected]),0))}}],Xat=H0.highest(MA.computeN([Iu],c=>c.facet(Iu).defaultKeymap?[Ime]:[]));class Yat{constructor(l,a,h){this.from=l,this.to=a,this.diagnostic=h}}class K0{constructor(l,a,h){this.diagnostics=l,this.panel=a,this.selected=h}static init(l,a,h){let d=l,f=h.facet(J0).markerFilter;f&&(d=f(d));let p=Hn.set(d.map(g=>g.from==g.to||g.from==g.to-1&&h.doc.lineAt(g.from).to==g.from?Hn.widget({widget:new ilt(g),diagnostic:g}).range(g.from):Hn.mark({attributes:{class:"cm-lintRange cm-lintRange-"+g.severity},diagnostic:g}).range(g.from,g.to)),!0);return new K0(p,a,A1(p))}}function A1(c,l=null,a=0){let h=null;return c.between(a,1e9,(d,f,{spec:p})=>{if(!l||p.diagnostic==l)return h=new Yat(d,f,p.diagnostic),!1}),h}function Rme(c,l){return!(!c.effects.some(a=>a.is(wI))&&!c.changes.touchesRange(l.pos))}function Fme(c,l){return c.field(ec,!1)?l:l.concat(Yi.appendConfig.of([ec,Ai.decorations.compute([ec],a=>{let{selected:h,panel:d}=a.field(ec);return h&&d&&h.from!=h.to?Hn.set([Jat.range(h.from,h.to)]):Hn.none}),art(elt,{hideOn:Rme}),rlt]))}const wI=Yi.define(),SH=Yi.define(),Nme=Yi.define(),ec=yo.define({create:()=>new K0(Hn.none,null,null),update(c,l){if(l.docChanged){let a=c.diagnostics.map(l.changes),h=null;if(c.selected){let d=l.changes.mapPos(c.selected.from,1);h=A1(a,c.selected.diagnostic,d)||A1(a,null,d)}c=new K0(a,c.panel,h)}for(let a of l.effects)a.is(wI)?c=K0.init(a.value,c.panel,l.state):a.is(SH)?c=new K0(c.diagnostics,a.value?SI.open:null,c.selected):a.is(Nme)&&(c=new K0(c.diagnostics,c.panel,a.value));return c},provide:c=>[GS.from(c,l=>l.panel),Ai.decorations.from(c,l=>l.diagnostics)]}),Jat=Hn.mark({class:"cm-lintRange cm-lintRange-active"});function elt(c,l,a){let{diagnostics:h}=c.state.field(ec),d=[],f=2e8,p=0;h.between(l-(a<0?1:0),l+(a>0?1:0),(m,v,{spec:y})=>{l>=m&&l<=v&&(m==v||(l>m||a>0)&&(l<v||a<0))&&(d.push(y.diagnostic),f=Math.min(m,f),p=Math.max(v,p))});let g=c.state.facet(J0).tooltipFilter;return g&&(d=g(d)),d.length?{pos:f,end:p,above:c.state.doc.lineAt(f).to<p,create:()=>({dom:Lme(c,d)})}:null}function Lme(c,l){return ss("ul",{class:"cm-tooltip-lint"},l.map(a=>Ume(c,a,!1)))}const Bme=c=>{let l=c.state.field(ec,!1);return!(!l||!l.panel||(c.dispatch({effects:SH.of(!1)}),0))},nlt=[{key:"Mod-Shift-m",run:c=>{let l=c.state.field(ec,!1);(!l||!l.panel)&&c.dispatch({effects:Fme(c.state,[SH.of(!0)])});let a=WS(c,SI.open);return a&&a.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:c=>{let l=c.state.field(ec,!1);if(!l)return!1;let a=c.state.selection.main,h=l.diagnostics.iter(a.to+1);return!(!h.value&&(h=l.diagnostics.iter(0),!h.value||h.from==a.from&&h.to==a.to)||(c.dispatch({selection:{anchor:h.from,head:h.to},scrollIntoView:!0}),0))}}],Vme=io.fromClass(class{constructor(c){this.view=c,this.timeout=-1,this.set=!0;let{delay:l}=c.state.facet(J0);this.lintTime=Date.now()+l,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,l)}run(){let c=Date.now();if(c<this.lintTime-10)setTimeout(this.run,this.lintTime-c);else{this.set=!1;let{state:l}=this.view,{sources:a}=l.facet(J0);Promise.all(a.map(h=>Promise.resolve(h(this.view)))).then(h=>{let d=h.reduce((f,p)=>f.concat(p));this.view.state.doc==l.doc&&this.view.dispatch(function Kat(c,l){return{effects:Fme(c,[wI.of(l)])}}(this.view.state,d))},h=>{Vc(this.view.state,h)})}}update(c){let l=c.state.facet(J0);(c.docChanged||l!=c.startState.facet(J0))&&(this.lintTime=Date.now()+l.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,l.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),J0=zn.define({combine:c=>Object.assign({sources:c.map(l=>l.source)},xh(c.map(l=>l.config),{delay:750,markerFilter:null,tooltipFilter:null})),enables:Vme});function zme(c){let l=[];if(c)e:for(let{name:a}of c){for(let h=0;h<a.length;h++){let d=a[h];if(/[a-zA-Z]/.test(d)&&!l.some(f=>f.toLowerCase()==d.toLowerCase())){l.push(d);continue e}}l.push("")}return l}function Ume(c,l,a){var h;let d=a?zme(l.actions):[];return ss("li",{class:"cm-diagnostic cm-diagnostic-"+l.severity},ss("span",{class:"cm-diagnosticText"},l.renderMessage?l.renderMessage():l.message),null===(h=l.actions)||void 0===h?void 0:h.map((f,p)=>{let g=_=>{_.preventDefault();let b=A1(c.state.field(ec).diagnostics,l);b&&f.apply(c,b.from,b.to)},{name:m}=f,v=d[p]?m.indexOf(d[p]):-1,y=v<0?m:[m.slice(0,v),ss("u",m.slice(v,v+1)),m.slice(v+1)];return ss("button",{type:"button",class:"cm-diagnosticAction",onclick:g,onmousedown:g,"aria-label":` Action: ${m}${v<0?"":` (access key "${d[p]})"`}.`},y)}),l.source&&ss("div",{class:"cm-diagnosticSource"},l.source))}class ilt extends Jf{constructor(l){super(),this.diagnostic=l}eq(l){return l.diagnostic==this.diagnostic}toDOM(){return ss("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Hme{constructor(l,a){this.diagnostic=a,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Ume(l,a,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class SI{constructor(l){this.view=l,this.items=[],this.list=ss("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:d=>{if(27==d.keyCode)Bme(this.view),this.view.focus();else if(38==d.keyCode||33==d.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==d.keyCode||34==d.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==d.keyCode)this.moveSelection(0);else if(35==d.keyCode)this.moveSelection(this.items.length-1);else if(13==d.keyCode)this.view.focus();else{if(!(d.keyCode>=65&&d.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:f}=this.items[this.selectedIndex],p=zme(f.actions);for(let g=0;g<p.length;g++)if(p[g].toUpperCase().charCodeAt(0)==d.keyCode){let m=A1(this.view.state.field(ec).diagnostics,f);m&&f.actions[g].apply(l,m.from,m.to)}}}d.preventDefault()},onclick:d=>{for(let f=0;f<this.items.length;f++)this.items[f].dom.contains(d.target)&&this.moveSelection(f)}}),this.dom=ss("div",{class:"cm-panel-lint"},this.list,ss("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Bme(this.view)},"\xd7")),this.update()}get selectedIndex(){let l=this.view.state.field(ec).selected;if(!l)return-1;for(let a=0;a<this.items.length;a++)if(this.items[a].diagnostic==l.diagnostic)return a;return-1}update(){let{diagnostics:l,selected:a}=this.view.state.field(ec),h=0,d=!1,f=null;for(l.between(0,this.view.state.doc.length,(p,g,{spec:m})=>{let y,v=-1;for(let _=h;_<this.items.length;_++)if(this.items[_].diagnostic==m.diagnostic){v=_;break}v<0?(y=new Hme(this.view,m.diagnostic),this.items.splice(h,0,y),d=!0):(y=this.items[v],v>h&&(this.items.splice(h,v-h),d=!0)),a&&y.diagnostic==a.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),f=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),h++});h<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)d=!0,this.items.pop();0==this.items.length&&(this.items.push(new Hme(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),d=!0),f?(this.list.setAttribute("aria-activedescendant",f.id),this.view.requestMeasure({key:this,read:()=>({sel:f.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:p,panel:g})=>{p.top<g.top?this.list.scrollTop-=g.top-p.top:p.bottom>g.bottom&&(this.list.scrollTop+=p.bottom-g.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),d&&this.sync()}sync(){let l=this.list.firstChild;function a(){let h=l;l=h.nextSibling,h.remove()}for(let h of this.items)if(h.dom.parentNode==this.list){for(;l!=h.dom;)a();l=h.dom.nextSibling}else this.list.insertBefore(h.dom,l);for(;l;)a()}moveSelection(l){if(this.selectedIndex<0)return;let h=A1(this.view.state.field(ec).diagnostics,this.items[l].diagnostic);!h||this.view.dispatch({selection:{anchor:h.from,head:h.to},scrollIntoView:!0,effects:Nme.of(h)})}static open(l){return new SI(l)}}function TH(c){return function TI(c,l='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${l}>${encodeURIComponent(c)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${c}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const rlt=Ai.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:TH("#d11")},".cm-lintRange-warning":{backgroundImage:TH("orange")},".cm-lintRange-info":{backgroundImage:TH("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),hlt=(()=>[mrt(),yrt,Lit(),Bst(),cst(),Tit(),[HS,Eit],Sl.allowMultipleSelections.of(!0),Sl.transactionFilter.of(c=>{if(!c.docChanged||!c.isUserEvent("input.type")&&!c.isUserEvent("input.complete"))return c;let l=c.startState.languageDataAt("indentOnInput",c.startState.selection.main.head);if(!l.length)return c;let a=c.newDoc,{head:h}=c.newSelection.main,d=a.lineAt(h);if(h>d.from+200)return c;let f=a.sliceString(d.from,h);if(!l.some(v=>v.test(f)))return c;let{state:p}=c,g=-1,m=[];for(let{head:v}of p.selection.ranges){let y=p.doc.lineAt(v);if(y.from==g)continue;g=y.from;let _=jA(p,y.from);if(null==_)continue;let b=/^\s*/.exec(y.text)[0],C=S1(p,_);b!=C&&m.push({from:y.from,to:y.from+b.length,insert:C})}return m.length?[c,{changes:m,sequential:!0}]:c}),KA(Xpe,{fallback:!0}),yst(),[Hat,Tme],Ame(),Xit(),Jit(),Git,zot(),MA.of([...$at,...Fot,...sat,...jst,...ost,...Ime,...nlt])])();class DI{constructor(l,a,h,d,f,p,g,m,v,y=0,_){this.p=l,this.stack=a,this.state=h,this.reducePos=d,this.pos=f,this.score=p,this.buffer=g,this.bufferBase=m,this.curContext=v,this.lookAhead=y,this.parent=_}toString(){return`[${this.stack.filter((l,a)=>a%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(l,a,h=0){let d=l.parser.context;return new DI(l,[],a,h,h,0,[],0,d?new Gme(d,d.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(l,a){this.stack.push(this.state,a,this.bufferBase+this.buffer.length),this.state=l}reduce(l){let a=l>>19,h=65535&l,{parser:d}=this.p,f=d.dynamicPrecedence(h);if(f&&(this.score+=f),0==a)return this.pushState(d.getGoto(this.state,h,!0),this.reducePos),h<d.minRepeatTerm&&this.storeNode(h,this.reducePos,this.reducePos,4,!0),void this.reduceContext(h,this.reducePos);let p=this.stack.length-3*(a-1)-(262144&l?6:0),g=this.stack[p-2],v=this.bufferBase+this.buffer.length-this.stack[p-1];if(h<d.minRepeatTerm||131072&l){let y=d.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(h,g,y,v+4,!0)}for(this.state=262144&l?this.stack[p]:d.getGoto(this.stack[p-3],h,!0);this.stack.length>p;)this.stack.pop();this.reduceContext(h,g)}storeNode(l,a,h,d=4,f=!1){if(0==l&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let p=this,g=this.buffer.length;if(0==g&&p.parent&&(g=p.bufferBase-p.parent.bufferBase,p=p.parent),g>0&&0==p.buffer[g-4]&&p.buffer[g-1]>-1){if(a==h)return;if(p.buffer[g-2]>=a)return void(p.buffer[g-2]=h)}}if(f&&this.pos!=h){let p=this.buffer.length;if(p>0&&0!=this.buffer[p-4])for(;p>0&&this.buffer[p-2]>h;)this.buffer[p]=this.buffer[p-4],this.buffer[p+1]=this.buffer[p-3],this.buffer[p+2]=this.buffer[p-2],this.buffer[p+3]=this.buffer[p-1],p-=4,d>4&&(d-=4);this.buffer[p]=l,this.buffer[p+1]=a,this.buffer[p+2]=h,this.buffer[p+3]=d}else this.buffer.push(l,a,h,d)}shift(l,a,h){let d=this.pos;if(131072&l)this.pushState(65535&l,this.pos);else if(0==(262144&l)){let f=l,{parser:p}=this.p;(h>this.pos||a<=p.maxNode)&&(this.pos=h,p.stateFlag(f,1)||(this.reducePos=h)),this.pushState(f,d),this.shiftContext(a,d),a<=p.maxNode&&this.buffer.push(a,d,h,4)}else this.pos=h,this.shiftContext(a,d),a<=this.p.parser.maxNode&&this.buffer.push(a,d,h,4)}apply(l,a,h){65536&l?this.reduce(l):this.shift(l,a,h)}useNode(l,a){let h=this.p.reused.length-1;(h<0||this.p.reused[h]!=l)&&(this.p.reused.push(l),h++);let d=this.pos;this.reducePos=this.pos=d+l.length,this.pushState(a,d),this.buffer.push(h,d,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,l,this,this.p.stream.reset(this.pos-l.length)))}split(){let l=this,a=l.buffer.length;for(;a>0&&l.buffer[a-2]>l.reducePos;)a-=4;let h=l.buffer.slice(a),d=l.bufferBase+a;for(;l&&d==l.bufferBase;)l=l.parent;return new DI(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,h,d,this.curContext,this.lookAhead,l)}recoverByDelete(l,a){let h=l<=this.p.parser.maxNode;h&&this.storeNode(l,this.pos,a,4),this.storeNode(0,this.pos,a,h?8:4),this.pos=this.reducePos=a,this.score-=190}canShift(l){for(let a=new dlt(this);;){let h=this.p.parser.stateSlot(a.state,4)||this.p.parser.hasAction(a.state,l);if(0==(65536&h))return!0;if(0==h)return!1;a.reduce(h)}}recoverByInsert(l){if(this.stack.length>=300)return[];let a=this.p.parser.nextStates(this.state);if(a.length>8||this.stack.length>=120){let d=[];for(let p,f=0;f<a.length;f+=2)(p=a[f+1])!=this.state&&this.p.parser.hasAction(p,l)&&d.push(a[f],p);if(this.stack.length<120)for(let f=0;d.length<8&&f<a.length;f+=2){let p=a[f+1];d.some((g,m)=>1&m&&g==p)||d.push(a[f],p)}a=d}let h=[];for(let d=0;d<a.length&&h.length<4;d+=2){let f=a[d+1];if(f==this.state)continue;let p=this.split();p.pushState(f,this.pos),p.storeNode(0,p.pos,p.pos,4,!0),p.shiftContext(a[d],this.pos),p.score-=200,h.push(p)}return h}forceReduce(){let l=this.p.parser.stateSlot(this.state,5);if(0==(65536&l))return!1;let{parser:a}=this.p;if(!a.validAction(this.state,l)){let d=65535&l,f=this.stack.length-3*(l>>19);if(f<0||a.getGoto(this.stack[f],d,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(l),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:l}=this.p;return 65535==l.data[l.stateSlot(this.state,1)]&&!l.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(l){if(this.state!=l.state||this.stack.length!=l.stack.length)return!1;for(let a=0;a<this.stack.length;a+=3)if(this.stack[a]!=l.stack[a])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(l){return this.p.parser.dialect.flags[l]}shiftContext(l,a){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,l,this,this.p.stream.reset(a)))}reduceContext(l,a){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,l,this,this.p.stream.reset(a)))}emitContext(){let l=this.buffer.length-1;(l<0||-3!=this.buffer[l])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let l=this.buffer.length-1;(l<0||-4!=this.buffer[l])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(l){if(l!=this.curContext.context){let a=new Gme(this.curContext.tracker,l);a.hash!=this.curContext.hash&&this.emitContext(),this.curContext=a}}setLookAhead(l){l>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=l)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Gme{constructor(l,a){this.tracker=l,this.context=a,this.hash=l.strict?l.hash(a):0}}class dlt{constructor(l){this.start=l,this.state=l.state,this.stack=l.stack,this.base=this.stack.length}reduce(l){let a=65535&l,h=l>>19;0==h?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(h-1);let d=this.start.p.parser.getGoto(this.stack[this.base-3],a,!0);this.state=d}}class kI{constructor(l,a,h){this.stack=l,this.pos=a,this.index=h,this.buffer=l.buffer,0==this.index&&this.maybeNext()}static create(l,a=l.bufferBase+l.buffer.length){return new kI(l,a,a-l.bufferBase)}maybeNext(){let l=this.stack.parent;null!=l&&(this.index=this.stack.bufferBase-l.bufferBase,this.stack=l,this.buffer=l.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new kI(this.stack,this.pos,this.index)}}class MI{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Qme=new MI;class flt{constructor(l,a){this.input=l,this.ranges=a,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Qme,this.rangeIndex=0,this.pos=this.chunkPos=a[0].from,this.range=a[0],this.end=a[a.length-1].to,this.readNext()}resolveOffset(l,a){let h=this.range,d=this.rangeIndex,f=this.pos+l;for(;f<h.from;){if(!d)return null;let p=this.ranges[--d];f-=h.from-p.to,h=p}for(;a<0?f>h.to:f>=h.to;){if(d==this.ranges.length-1)return null;let p=this.ranges[++d];f+=p.from-h.to,h=p}return f}clipPos(l){if(l>=this.range.from&&l<this.range.to)return l;for(let a of this.ranges)if(a.to>l)return Math.max(l,a.from);return this.end}peek(l){let h,d,a=this.chunkOff+l;if(a>=0&&a<this.chunk.length)h=this.pos+l,d=this.chunk.charCodeAt(a);else{let f=this.resolveOffset(l,1);if(null==f)return-1;if(h=f,h>=this.chunk2Pos&&h<this.chunk2Pos+this.chunk2.length)d=this.chunk2.charCodeAt(h-this.chunk2Pos);else{let p=this.rangeIndex,g=this.range;for(;g.to<=h;)g=this.ranges[++p];this.chunk2=this.input.chunk(this.chunk2Pos=h),h+this.chunk2.length>g.to&&(this.chunk2=this.chunk2.slice(0,g.to-h)),d=this.chunk2.charCodeAt(0)}}return h>=this.token.lookAhead&&(this.token.lookAhead=h+1),d}acceptToken(l,a=0){let h=a?this.resolveOffset(a,-1):this.pos;if(null==h||h<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=l,this.token.end=h}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:l,chunkPos:a}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=l,this.chunk2Pos=a,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let l=this.input.chunk(this.pos);this.chunk=this.pos+l.length>this.range.to?l.slice(0,this.range.to-this.pos):l,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.next=this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?-1:this.chunk.charCodeAt(this.chunkOff)}advance(l=1){for(this.chunkOff+=l;this.pos+l>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();l-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=l,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(l,a){if(a?(this.token=a,a.start=l,a.lookAhead=l+1,a.value=a.extended=-1):this.token=Qme,this.pos!=l){if(this.pos=l,l==this.end)return this.setDone(),this;for(;l<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;l>=this.range.to;)this.range=this.ranges[++this.rangeIndex];l>=this.chunkPos&&l<this.chunkPos+this.chunk.length?this.chunkOff=l-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(l,a){if(l>=this.chunkPos&&a<=this.chunkPos+this.chunk.length)return this.chunk.slice(l-this.chunkPos,a-this.chunkPos);if(l>=this.chunk2Pos&&a<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(l-this.chunk2Pos,a-this.chunk2Pos);if(l>=this.range.from&&a<=this.range.to)return this.input.read(l,a);let h="";for(let d of this.ranges){if(d.from>=a)break;d.to>l&&(h+=this.input.read(Math.max(d.from,l),Math.min(d.to,a)))}return h}}class EI{constructor(l,a){this.data=l,this.id=a}token(l,a){!function plt(c,l,a,h){let d=0,f=1<<h,{parser:p}=a.p,{dialect:g}=p;e:for(;0!=(f&c[d]);){let m=c[d+1];for(let b=d+3;b<m;b+=2)if((c[b+1]&f)>0){let C=c[b];if(g.allows(C)&&(-1==l.token.value||l.token.value==C||p.overrides(C,l.token.value))){l.acceptToken(C);break}}let v=l.next,y=0,_=c[d+2];if(!(l.next<0&&_>y&&65535==c[m+3*_-3])){for(;y<_;){let b=y+_>>1,C=m+b+(b<<1),S=c[C+1];if(v<c[C])_=b;else{if(!(v>=S)){d=c[C+2],l.advance();continue e}y=b+1}}break}d=c[m+3*_-1]}}(this.data,l,a,this.id)}}EI.prototype.contextual=EI.prototype.fallback=EI.prototype.extend=!1;class c2{constructor(l,a={}){this.token=l,this.contextual=!!a.contextual,this.fallback=!!a.fallback,this.extend=!!a.extend}}function AI(c,l=Uint16Array){if("string"!=typeof c)return c;let a=null;for(let h=0,d=0;h<c.length;){let f=0;for(;;){let p=c.charCodeAt(h++),g=!1;if(126==p){f=65535;break}p>=92&&p--,p>=34&&p--;let m=p-32;if(m>=46&&(m-=46,g=!0),f+=m,g)break;f*=46}a?a[d++]=f:a=new l(f)}return a}const Sh="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let DH=null;function jme(c,l,a){let h=c.cursor(ps.IncludeAnonymous);for(h.moveTo(l);;)if(!(a<0?h.childBefore(l):h.childAfter(l)))for(;;){if((a<0?h.to<l:h.from>l)&&!h.type.isError)return a<0?Math.max(0,Math.min(h.to-1,l-25)):Math.min(c.length,Math.max(h.from+1,l+25));if(a<0?h.prevSibling():h.nextSibling())break;if(!h.parent())return a<0?0:c.length}}class glt{constructor(l,a){this.fragments=l,this.nodeSet=a,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let l=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(l){for(this.safeFrom=l.openStart?jme(l.tree,l.from+l.offset,1)-l.offset:l.from,this.safeTo=l.openEnd?jme(l.tree,l.to+l.offset,-1)-l.offset:l.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(l.tree),this.start.push(-l.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(l){if(l<this.nextStart)return null;for(;this.fragment&&this.safeTo<=l;)this.nextFragment();if(!this.fragment)return null;for(;;){let a=this.trees.length-1;if(a<0)return this.nextFragment(),null;let h=this.trees[a],d=this.index[a];if(d==h.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let f=h.children[d],p=this.start[a]+h.positions[d];if(p>l)return this.nextStart=p,null;if(f instanceof Ps){if(p==l){if(p<this.safeFrom)return null;let g=p+f.length;if(g<=this.safeTo){let m=f.prop(Ki.lookAhead);if(!m||g+m<this.fragment.to)return f}}this.index[a]++,p+f.length>=Math.max(this.safeFrom,l)&&(this.trees.push(f),this.start.push(p),this.index.push(0))}else this.index[a]++,this.nextStart=p+f.length}}}class mlt{constructor(l,a){this.stream=a,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=l.tokenizers.map(h=>new MI)}getActions(l){let a=0,h=null,{parser:d}=l.p,{tokenizers:f}=d,p=d.stateSlot(l.state,3),g=l.curContext?l.curContext.hash:0,m=0;for(let v=0;v<f.length;v++){if(0==(1<<v&p))continue;let y=f[v],_=this.tokens[v];if((!h||y.fallback)&&((y.contextual||_.start!=l.pos||_.mask!=p||_.context!=g)&&(this.updateCachedToken(_,y,l),_.mask=p,_.context=g),_.lookAhead>_.end+25&&(m=Math.max(_.lookAhead,m)),0!=_.value)){let b=a;if(_.extended>-1&&(a=this.addActions(l,_.extended,_.end,a)),a=this.addActions(l,_.value,_.end,a),!y.extend&&(h=_,a>b))break}}for(;this.actions.length>a;)this.actions.pop();return m&&l.setLookAhead(m),!h&&l.pos==this.stream.end&&(h=new MI,h.value=l.p.parser.eofTerm,h.start=h.end=l.pos,a=this.addActions(l,h.value,h.end,a)),this.mainToken=h,this.actions}getMainToken(l){if(this.mainToken)return this.mainToken;let a=new MI,{pos:h,p:d}=l;return a.start=h,a.end=Math.min(h+1,d.stream.end),a.value=h==d.stream.end?d.parser.eofTerm:0,a}updateCachedToken(l,a,h){let d=this.stream.clipPos(h.pos);if(a.token(this.stream.reset(d,l),h),l.value>-1){let{parser:f}=h.p;for(let p=0;p<f.specialized.length;p++)if(f.specialized[p]==l.value){let g=f.specializers[p](this.stream.read(l.start,l.end),h);if(g>=0&&h.p.parser.dialect.allows(g>>1)){0==(1&g)?l.value=g>>1:l.extended=g>>1;break}}}else l.value=0,l.end=this.stream.clipPos(d+1)}putAction(l,a,h,d){for(let f=0;f<d;f+=3)if(this.actions[f]==l)return d;return this.actions[d++]=l,this.actions[d++]=a,this.actions[d++]=h,d}addActions(l,a,h,d){let{state:f}=l,{parser:p}=l.p,{data:g}=p;for(let m=0;m<2;m++)for(let v=p.stateSlot(f,m?2:1);;v+=3){if(65535==g[v]){if(1!=g[v+1]){0==d&&2==g[v+1]&&(d=this.putAction(tp(g,v+2),a,h,d));break}v=tp(g,v+2)}g[v]==a&&(d=this.putAction(tp(g,v+1),a,h,d))}return d}}class vlt{constructor(l,a,h,d){this.parser=l,this.input=a,this.ranges=d,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new flt(a,d),this.tokens=new mlt(l,this.stream),this.topTerm=l.top[1];let{from:f}=d[0];this.stacks=[DI.start(this,l.top[0],f)],this.fragments=h.length&&this.stream.end-f>4*l.bufferLength?new glt(h,l.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let d,f,l=this.stacks,a=this.minStackPos,h=this.stacks=[];for(let p=0;p<l.length;p++){let g=l[p];for(;;){if(this.tokens.mainToken=null,g.pos>a)h.push(g);else{if(this.advanceStack(g,h,l))continue;{d||(d=[],f=[]),d.push(g);let m=this.tokens.getMainToken(g);f.push(m.value,m.end)}}break}}if(!h.length){let p=d&&function blt(c){let l=null;for(let a of c){let h=a.p.stoppedAt;(a.pos==a.p.stream.end||null!=h&&a.pos>h)&&a.p.parser.stateFlag(a.state,2)&&(!l||l.score<a.score)&&(l=a)}return l}(d);if(p)return this.stackToTree(p);if(this.parser.strict)throw Sh&&d&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+a);this.recovering||(this.recovering=5)}if(this.recovering&&d){let p=null!=this.stoppedAt&&d[0].pos>this.stoppedAt?d[0]:this.runRecovery(d,f,h);if(p)return this.stackToTree(p.forceAll())}if(this.recovering){let p=1==this.recovering?1:3*this.recovering;if(h.length>p)for(h.sort((g,m)=>m.score-g.score);h.length>p;)h.pop();h.some(g=>g.reducePos>a)&&this.recovering--}else if(h.length>1)e:for(let p=0;p<h.length-1;p++){let g=h[p];for(let m=p+1;m<h.length;m++){let v=h[m];if(g.sameState(v)||g.buffer.length>500&&v.buffer.length>500){if(!((g.score-v.score||g.buffer.length-v.buffer.length)>0)){h.splice(p--,1);continue e}h.splice(m--,1)}}}this.minStackPos=h[0].pos;for(let p=1;p<h.length;p++)h[p].pos<this.minStackPos&&(this.minStackPos=h[p].pos);return null}stopAt(l){if(null!=this.stoppedAt&&this.stoppedAt<l)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=l}advanceStack(l,a,h){let d=l.pos,{parser:f}=this,p=Sh?this.stackID(l)+" -> ":"";if(null!=this.stoppedAt&&d>this.stoppedAt)return l.forceReduce()?l:null;if(this.fragments){let v=l.curContext&&l.curContext.tracker.strict,y=v?l.curContext.hash:0;for(let _=this.fragments.nodeAt(d);_;){let b=this.parser.nodeSet.types[_.type.id]==_.type?f.getGoto(l.state,_.type.id):-1;if(b>-1&&_.length&&(!v||(_.prop(Ki.contextHash)||0)==y))return l.useNode(_,b),Sh&&console.log(p+this.stackID(l)+` (via reuse of ${f.getName(_.type.id)})`),!0;if(!(_ instanceof Ps)||0==_.children.length||_.positions[0]>0)break;let C=_.children[0];if(!(C instanceof Ps&&0==_.positions[0]))break;_=C}}let g=f.stateSlot(l.state,4);if(g>0)return l.reduce(g),Sh&&console.log(p+this.stackID(l)+` (via always-reduce ${f.getName(65535&g)})`),!0;if(l.stack.length>=15e3)for(;l.stack.length>9e3&&l.forceReduce(););let m=this.tokens.getActions(l);for(let v=0;v<m.length;){let y=m[v++],_=m[v++],b=m[v++],C=v==m.length||!h,x=C?l:l.split();if(x.apply(y,_,b),Sh&&console.log(p+this.stackID(x)+` (via ${0==(65536&y)?"shift":`reduce of ${f.getName(65535&y)}`} for ${f.getName(_)} @ ${d}${x==l?"":", split"})`),C)return!0;x.pos>d?a.push(x):h.push(x)}return!1}advanceFully(l,a){let h=l.pos;for(;;){if(!this.advanceStack(l,null,null))return!1;if(l.pos>h)return qme(l,a),!0}}runRecovery(l,a,h){let d=null,f=!1;for(let p=0;p<l.length;p++){let g=l[p],m=a[p<<1],v=a[1+(p<<1)],y=Sh?this.stackID(g)+" -> ":"";if(g.deadEnd&&(f||(f=!0,g.restart(),Sh&&console.log(y+this.stackID(g)+" (restarted)"),this.advanceFully(g,h))))continue;let _=g.split(),b=y;for(let C=0;_.forceReduce()&&C<10&&(Sh&&console.log(b+this.stackID(_)+" (via force-reduce)"),!this.advanceFully(_,h));C++)Sh&&(b=this.stackID(_)+" -> ");for(let C of g.recoverByInsert(m))Sh&&console.log(y+this.stackID(C)+" (via recover-insert)"),this.advanceFully(C,h);this.stream.end>g.pos?(v==g.pos&&(v++,m=0),g.recoverByDelete(m,v),Sh&&console.log(y+this.stackID(g)+` (via recover-delete ${this.parser.getName(m)})`),qme(g,h)):(!d||d.score<g.score)&&(d=g)}return d}stackToTree(l){return l.close(),Ps.build({buffer:kI.create(l),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:l.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(l){let a=(DH||(DH=new WeakMap)).get(l);return a||DH.set(l,a=String.fromCodePoint(this.nextStackID++)),a+l}}function qme(c,l){for(let a=0;a<l.length;a++){let h=l[a];if(h.pos==c.pos&&h.sameState(c))return void(l[a].score<c.score&&(l[a]=c))}l.push(c)}class ylt{constructor(l,a,h){this.source=l,this.flags=a,this.disabled=h}allows(l){return!this.disabled||0==this.disabled[l]}}const kH=c=>c;class II extends _pe{constructor(l){if(super(),this.wrappers=[],14!=l.version)throw new RangeError(`Parser version (${l.version}) doesn't match runtime version (14)`);let a=l.nodeNames.split(" ");this.minRepeatTerm=a.length;for(let g=0;g<l.repeatNodeCount;g++)a.push("");let h=Object.keys(l.topRules).map(g=>l.topRules[g][1]),d=[];for(let g=0;g<a.length;g++)d.push([]);function f(g,m,v){d[g].push([m,m.deserialize(String(v))])}if(l.nodeProps)for(let g of l.nodeProps){let m=g[0];"string"==typeof m&&(m=Ki[m]);for(let v=1;v<g.length;){let y=g[v++];if(y>=0)f(y,m,g[v++]);else{let _=g[v+-y];for(let b=-y;b>0;b--)f(g[v++],m,_);v++}}}this.nodeSet=new FA(a.map((g,m)=>Dl.define({name:m>=this.minRepeatTerm?void 0:g,id:m,props:d[m],top:h.indexOf(m)>-1,error:0==m,skipped:l.skippedNodes&&l.skippedNodes.indexOf(m)>-1}))),l.propSources&&(this.nodeSet=this.nodeSet.extend(...l.propSources)),this.strict=!1,this.bufferLength=ppe;let p=AI(l.tokenData);this.context=l.context,this.specializerSpecs=l.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let g=0;g<this.specializerSpecs.length;g++)this.specialized[g]=this.specializerSpecs[g].term;this.specializers=this.specializerSpecs.map(Xme),this.states=AI(l.states,Uint32Array),this.data=AI(l.stateData),this.goto=AI(l.goto),this.maxTerm=l.maxTerm,this.tokenizers=l.tokenizers.map(g=>"number"==typeof g?new EI(p,g):g),this.topRules=l.topRules,this.dialects=l.dialects||{},this.dynamicPrecedences=l.dynamicPrecedences||null,this.tokenPrecTable=l.tokenPrec,this.termNames=l.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(l,a,h){let d=new vlt(this,l,a,h);for(let f of this.wrappers)d=f(d,l,a,h);return d}getGoto(l,a,h=!1){let d=this.goto;if(a>=d[0])return-1;for(let f=d[a+1];;){let p=d[f++],g=1&p,m=d[f++];if(g&&h)return m;for(let v=f+(p>>1);f<v;f++)if(d[f]==l)return m;if(g)return-1}}hasAction(l,a){let h=this.data;for(let d=0;d<2;d++)for(let p,f=this.stateSlot(l,d?2:1);;f+=3){if(65535==(p=h[f])){if(1!=h[f+1]){if(2==h[f+1])return tp(h,f+2);break}p=h[f=tp(h,f+2)]}if(p==a||0==p)return tp(h,f+1)}return 0}stateSlot(l,a){return this.states[6*l+a]}stateFlag(l,a){return(this.stateSlot(l,0)&a)>0}validAction(l,a){if(a==this.stateSlot(l,4))return!0;for(let h=this.stateSlot(l,1);;h+=3){if(65535==this.data[h]){if(1!=this.data[h+1])return!1;h=tp(this.data,h+2)}if(a==tp(this.data,h+1))return!0}}nextStates(l){let a=[];for(let h=this.stateSlot(l,1);;h+=3){if(65535==this.data[h]){if(1!=this.data[h+1])break;h=tp(this.data,h+2)}if(0==(1&this.data[h+2])){let d=this.data[h+1];a.some((f,p)=>1&p&&f==d)||a.push(this.data[h],d)}}return a}overrides(l,a){let h=Zme(this.data,this.tokenPrecTable,a);return h<0||Zme(this.data,this.tokenPrecTable,l)<h}configure(l){let a=Object.assign(Object.create(II.prototype),this);if(l.props&&(a.nodeSet=this.nodeSet.extend(...l.props)),l.top){let h=this.topRules[l.top];if(!h)throw new RangeError(`Invalid top rule name ${l.top}`);a.top=h}return l.tokenizers&&(a.tokenizers=this.tokenizers.map(h=>{let d=l.tokenizers.find(f=>f.from==h);return d?d.to:h})),l.specializers&&(a.specializers=this.specializers.slice(),a.specializerSpecs=this.specializerSpecs.map((h,d)=>{let f=l.specializers.find(g=>g.from==h.external);if(!f)return h;let p=Object.assign(Object.assign({},h),{external:f.to});return a.specializers[d]=Xme(p),p})),l.contextTracker&&(a.context=l.contextTracker),l.dialect&&(a.dialect=this.parseDialect(l.dialect)),null!=l.strict&&(a.strict=l.strict),l.wrap&&(a.wrappers=a.wrappers.concat(l.wrap)),null!=l.bufferLength&&(a.bufferLength=l.bufferLength),a}hasWrappers(){return this.wrappers.length>0}getName(l){return this.termNames?this.termNames[l]:String(l<=this.maxNode&&this.nodeSet.types[l].name||l)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(l){let a=this.dynamicPrecedences;return null==a?0:a[l]||0}parseDialect(l){let a=Object.keys(this.dialects),h=a.map(()=>!1);if(l)for(let f of l.split(" ")){let p=a.indexOf(f);p>=0&&(h[p]=!0)}let d=null;for(let f=0;f<a.length;f++)if(!h[f])for(let g,p=this.dialects[a[f]];65535!=(g=this.data[p++]);)(d||(d=new Uint8Array(this.maxTerm+1)))[g]=1;return new ylt(l,h,d)}static deserialize(l){return new II(l)}}function tp(c,l){return c[l]|c[l+1]<<16}function Zme(c,l,a){for(let d,h=l;65535!=(d=c[h]);h++)if(d==a)return h-l;return-1}function Xme(c){if(c.external){let l=c.extend?1:0;return(a,h)=>c.external(a,h)<<1|l}return c.get}const Elt=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Vlt=new class _lt{constructor(l){this.start=l.start,this.shift=l.shift||kH,this.reduce=l.reduce||kH,this.reuse=l.reuse||kH,this.hash=l.hash||(()=>0),this.strict=!1!==l.strict}}({start:!1,shift:(c,l)=>5==l||6==l||286==l?c:287==l,strict:!1}),zlt=new c2((c,l)=>{let{next:a}=c;(125==a||-1==a||l.context)&&l.canShift(284)&&c.acceptToken(284)},{contextual:!0,fallback:!0}),Ult=new c2((c,l)=>{let h,{next:a}=c;Elt.indexOf(a)>-1||47==a&&(47==(h=c.peek(1))||42==h)||125!=a&&59!=a&&-1!=a&&!l.context&&l.canShift(281)&&c.acceptToken(281)},{contextual:!0}),Hlt=new c2((c,l)=>{let{next:a}=c;if((43==a||45==a)&&(c.advance(),a==c.next)){c.advance();let h=!l.context&&l.canShift(2);c.acceptToken(h?2:3)}},{contextual:!0}),$lt=new c2(c=>{for(let l=!1,a=0;;a++){let{next:h}=c;if(h<0){a&&c.acceptToken(282);break}if(96==h){a?c.acceptToken(282):c.acceptToken(283,1);break}if(123==h&&l){1==a?c.acceptToken(4,1):c.acceptToken(282,-1);break}if(10==h&&a){c.advance(),c.acceptToken(282);break}92==h&&c.advance(),l=36==h,c.advance()}}),Wlt=new c2((c,l)=>{if(101==c.next&&l.dialectEnabled(1)){c.advance();for(let a=0;a<6;a++){if(c.next!="xtends".charCodeAt(a))return;c.advance()}c.next>=57&&c.next<=65||c.next>=48&&c.next<=90||95==c.next||c.next>=97&&c.next<=122||c.next>160||c.acceptToken(1)}}),Glt=Ope({"get set async static":Ue.modifier,"for while do if else switch try catch finally return throw break continue default case":Ue.controlKeyword,"in of await yield void typeof delete instanceof":Ue.operatorKeyword,"let var const function class extends":Ue.definitionKeyword,"import export from":Ue.moduleKeyword,"with debugger as new":Ue.keyword,TemplateString:Ue.special(Ue.string),super:Ue.atom,BooleanLiteral:Ue.bool,this:Ue.self,null:Ue.null,Star:Ue.modifier,VariableName:Ue.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Ue.function(Ue.variableName),VariableDefinition:Ue.definition(Ue.variableName),Label:Ue.labelName,PropertyName:Ue.propertyName,PrivatePropertyName:Ue.special(Ue.propertyName),"CallExpression/MemberExpression/PropertyName":Ue.function(Ue.propertyName),"FunctionDeclaration/VariableDefinition":Ue.function(Ue.definition(Ue.variableName)),"ClassDeclaration/VariableDefinition":Ue.definition(Ue.className),PropertyDefinition:Ue.definition(Ue.propertyName),PrivatePropertyDefinition:Ue.definition(Ue.special(Ue.propertyName)),UpdateOp:Ue.updateOperator,LineComment:Ue.lineComment,BlockComment:Ue.blockComment,Number:Ue.number,String:Ue.string,ArithOp:Ue.arithmeticOperator,LogicOp:Ue.logicOperator,BitOp:Ue.bitwiseOperator,CompareOp:Ue.compareOperator,RegExp:Ue.regexp,Equals:Ue.definitionOperator,Arrow:Ue.function(Ue.punctuation),": Spread":Ue.punctuation,"( )":Ue.paren,"[ ]":Ue.squareBracket,"{ }":Ue.brace,"InterpolationStart InterpolationEnd":Ue.special(Ue.brace),".":Ue.derefOperator,", ;":Ue.separator,TypeName:Ue.typeName,TypeDefinition:Ue.definition(Ue.typeName),"type enum interface implements namespace module declare":Ue.definitionKeyword,"abstract global Privacy readonly override":Ue.modifier,"is keyof unique infer":Ue.operatorKeyword,JSXAttributeValue:Ue.attributeValue,JSXText:Ue.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Ue.angleBracket,"JSXIdentifier JSXNameSpacedName":Ue.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Ue.attributeName}),Qlt={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},jlt={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},qlt={__proto__:null,"<":129},Zlt=II.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26a0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:Vlt,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[Glt],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[Wlt,Ult,Hlt,$lt,0,1,2,3,4,5,6,7,8,9,zlt],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:c=>Qlt[c]||-1},{term:299,get:c=>jlt[c]||-1},{term:63,get:c=>qlt[c]||-1}],tokenPrec:12130}),Xlt=[wh("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),wh("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),wh("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),wh("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),wh("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),wh("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),wh("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),wh("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),wh("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),wh('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),wh('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],n0e=new Trt,i0e=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function u2(c){return(l,a)=>{let h=l.node.getChild("VariableDefinition");return h&&a(h,c),!0}}const Ylt=["FunctionDeclaration"],Klt={FunctionDeclaration:u2("function"),ClassDeclaration:u2("class"),ClassExpression:()=>!0,EnumDeclaration:u2("constant"),TypeAliasDeclaration:u2("type"),NamespaceDeclaration:u2("namespace"),VariableDefinition(c,l){c.matchContext(Ylt)||l(c,"variable")},TypeDefinition(c,l){l(c,"type")},__proto__:null};function r0e(c,l){let a=n0e.get(l);if(a)return a;let h=[],d=!0;function f(p,g){let m=c.sliceString(p.from,p.to);h.push({label:m,type:g})}return l.cursor(ps.IncludeAnonymous).iterate(p=>{if(d)d=!1;else if(p.name){let g=Klt[p.name];if(g&&g(p,f)||i0e.has(p.name))return!1}else if(p.to-p.from>8192){for(let g of r0e(c,p.node))h.push(g);return!1}}),n0e.set(l,h),h}const RI=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,MH=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function Jlt(c){let l=ro(c.state).resolveInner(c.pos,-1);if(MH.indexOf(l.name)>-1)return null;let a="VariableName"==l.name||l.to-l.from<20&&RI.test(c.state.sliceDoc(l.from,l.to));if(!a&&!c.explicit)return null;let h=[];for(let d=l;d;d=d.parent)i0e.has(d.name)&&(h=h.concat(r0e(c.state.doc,d)));return{options:h,from:a?l.from:c.pos,validFor:RI}}const zg=GA.define({parser:Zlt.configure({props:[Bpe.add({IfStatement:$7({except:/^\s*({|else\b)/}),TryStatement:$7({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:c=>c.baseIndent,SwitchBody:c=>{let l=c.textAfter,a=/^\s*\}/.test(l),h=/^\s*(case|default)\b/.test(l);return c.baseIndent+(a?0:h?1:2)*c.unit},Block:Zrt({closing:"}"}),ArrowFunction:c=>c.baseIndent+c.unit,"TemplateString BlockComment":()=>null,"Statement Property":$7({except:/^{/}),JSXElement(c){let l=/^\s*<\//.test(c.textAfter);return c.lineIndent(c.node.from)+(l?0:c.unit)},JSXEscape(c){let l=/\s*\}/.test(c.textAfter);return c.lineIndent(c.node.from)+(l?0:c.unit)},"JSXOpenTag JSXSelfClosingTag":c=>c.column(c.node.from)+c.unit}),Upe.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":function est(c){let l=c.firstChild,a=c.lastChild;return l&&l.to<a.from?{from:l.to,to:a.type.isError?c.to:a.from}:null},BlockComment:c=>({from:c.from+2,to:c.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),nct=zg.configure({dialect:"ts"}),ict=zg.configure({dialect:"jsx"}),rct=zg.configure({dialect:"jsx ts"}),sct="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(c=>({label:c,type:"keyword"}));function oct(c={}){return new Hrt(c.jsx?c.typescript?rct:ict:c.typescript?nct:zg,[zg.data.of({autocomplete:cat(MH,lme(Xlt.concat(sct)))}),zg.data.of({autocomplete:Jlt}),c.jsx?lct:[]])}function s0e(c,l,a=c.length){if(!l)return"";let h=l.getChild("JSXIdentifier");return h?c.sliceString(h.from,Math.min(h.to,a)):""}const act="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),lct=Ai.inputHandler.of((c,l,a,h)=>{if((act?c.composing:c.compositionStarted)||c.state.readOnly||l!=a||">"!=h&&"/"!=h||!zg.isActiveAt(c.state,l,-1))return!1;let{state:d}=c,f=d.changeByRange(p=>{var g,m,v;let b,{head:y}=p,_=ro(d).resolveInner(y,-1);if("JSXStartTag"==_.name&&(_=_.parent),">"==h&&"JSXFragmentTag"==_.name)return{range:At.cursor(y+1),changes:{from:y,insert:"><>"}};if(">"==h&&"JSXIdentifier"==_.name){if("JSXEndTag"!=(null===(m=null===(g=_.parent)||void 0===g?void 0:g.lastChild)||void 0===m?void 0:m.name)&&(b=s0e(d.doc,_.parent,y)))return{range:At.cursor(y+1),changes:{from:y,insert:`></${b}>`}}}else if("/"==h&&"JSXFragmentTag"==_.name){let C=_.parent,x=null==C?void 0:C.parent;if(C.from==y-1&&"JSXEndTag"!=(null===(v=x.lastChild)||void 0===v?void 0:v.name)&&(b=s0e(d.doc,null==x?void 0:x.firstChild,y))){let S=`/${b}>`;return{range:At.cursor(y+S.length),changes:{from:y,insert:S}}}}return{range:p}});return!f.changes.empty&&(c.dispatch(f,{userEvent:"input.type",scrollIntoView:!0}),!0)}),AH="#e06c75",h2="#abb2bf",FI="#7d8799",IH="#d19a66",PH="#2c313a",RH="#282c34",NI="#353a42",FH="#528bff",g0e=Ai.theme({"&":{color:h2,backgroundColor:RH},".cm-content":{caretColor:FH},".cm-cursor, .cm-dropCursor":{borderLeftColor:FH},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:h2},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:RH,color:FI,border:"none"},".cm-activeLineGutter":{backgroundColor:PH},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:NI},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:NI,borderBottomColor:NI},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:PH,color:h2}}},{dark:!0}),m0e=KS.define([{tag:Ue.keyword,color:"#c678dd"},{tag:[Ue.name,Ue.deleted,Ue.character,Ue.propertyName,Ue.macroName],color:AH},{tag:[Ue.function(Ue.variableName),Ue.labelName],color:"#61afef"},{tag:[Ue.color,Ue.constant(Ue.name),Ue.standard(Ue.name)],color:IH},{tag:[Ue.definition(Ue.name),Ue.separator],color:h2},{tag:[Ue.typeName,Ue.className,Ue.number,Ue.changed,Ue.annotation,Ue.modifier,Ue.self,Ue.namespace],color:"#e5c07b"},{tag:[Ue.operator,Ue.operatorKeyword,Ue.url,Ue.escape,Ue.regexp,Ue.link,Ue.special(Ue.string)],color:"#56b6c2"},{tag:[Ue.meta,Ue.comment],color:FI},{tag:Ue.strong,fontWeight:"bold"},{tag:Ue.emphasis,fontStyle:"italic"},{tag:Ue.strikethrough,textDecoration:"line-through"},{tag:Ue.link,color:FI,textDecoration:"underline"},{tag:Ue.heading,fontWeight:"bold",color:AH},{tag:[Ue.atom,Ue.bool,Ue.special(Ue.variableName)],color:IH},{tag:[Ue.processingInstruction,Ue.string,Ue.inserted],color:"#98c379"},{tag:Ue.invalid,color:"#ffffff"}]),uct=["editorContainer"];let LI=(()=>{class c{constructor(a,h){this.config=a,this.themesSvc=h,this.data=wS.builder(),this.checkLater=rx.builder().setEnabled(!1),this.autocompleteType="cjs",this.textChanged=new wt,this.maxHeightStr100vh="calc(100vh - 60px - 80px)",this.maxHeightStr=this.maxHeightStr100vh,this.minHeightStr="100px",this.themes=new $0,this.language=new $0,this.tabSize=new $0,this.editor=null,this.history=[],this.handlerSubscription=null}set text(a){this.setText(a)}get myTheme(){return Ai.theme({"&":{fontSize:"11pt",maxHeight:this.maxHeightStr},".cm-gutter,.cm-content":{minHeight:this.minHeightStr},".cm-scroller":{overflow:"auto"}})}get codemirrorData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.codemirrorData.components.length?this.codemirrorData.components[0]:null}get components(){return this.codemirrorData.components}get isRow(){return this.codemirrorData.classes.sClasses.findIndex((a,h,d)=>"clr-row"==a)>=0}ngOnInit(){this.handlerSubscription=this.config.messageBus.addHandler(a=>{if(a.target==this.codemirrorData.messageTarget&&a.text==this.codemirrorData.messageUndoText&&this.history.length){let h=this.history.pop();null!=h&&this.setText(h)}})}setTabSize(a){this.editor&&this.editor.dispatch({effects:this.tabSize.reconfigure(Sl.tabSize.of(a))})}ngOnDestroy(){this.handlerSubscription&&(this.handlerSubscription.unsubscribe(),this.handlerSubscription=null)}createNewCodemirrorState(){let a=[];switch(this.autocompleteType){case"cjs":a=[{label:"class",type:"keyword"},{label:"\u043a\u043b\u0430\u0441\u0441",type:"keyword"},{label:"\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435",type:"constant",info:"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"},{label:"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"method",info:"\u043c\u0435\u0442\u043e\u0434 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"},{label:"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",type:"constant",info:"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"}];break;case"math":a=["integrate","integral","pow","sin","cos","tg","ctg","arcsin","arccos","arctg","arcctg","ln","exp","diff","differentiate","\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u043b","\u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c","\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f","\u0440\u0430\u0441\u043a\u0440\u044b\u0442\u044c","\u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u044c","\u0440\u0430\u0437\u043b\u043e\u0436\u0438\u0442\u044c"].map(f=>({label:f,type:"keyword",info:""})).concat([{label:"Pi",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e \u03c0"},{label:"pi",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e \u03c0"},{label:"e",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e e"}])}return Sl.create({extensions:[hlt,this.language.of(oct()),this.tabSize.of(Sl.tabSize.of(4)),Ai.updateListener.of(f=>{f.docChanged&&this.onTextChanged()}),Ame({override:[f=>{let p=f.matchBefore(/[\u0430-\u044f\u0410-\u042fa-zA-Z]+/);return f.explicit||p?{from:p?p.from:f.pos,options:a,validFor:/^[\u0430-\u044f\u0410-\u042fa-zA-Z]*$/}:null}]}),...this.themesSvc.nowIsDay()?[this.myTheme,KA(Xpe)]:[g0e,this.myTheme,KA(m0e)]],doc:this.codemirrorData.text})}ngAfterViewInit(){let a=this.createNewCodemirrorState(),h=new Ai({state:a,parent:this.editorContainerRef.nativeElement});this.editor=h,this.config.post(()=>{this.checkLater.setConfig(this.config).setWaitingForSenderId(this.codemirrorData.waitingForSenderId),this.checkLater.checkEnabled()})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.codemirrorData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{h100:this.maxHeightStr==this.maxHeightStr100vh}}getColClass(a){let h={"clr-col":!0};return a.component===c&&a.data.classes.sClasses.filter(f=>f.startsWith("clr-col-")).forEach(f=>h[f]=!0),h}onTextChanged(){if(this.editor){let a=this.editor.state.doc.toString();(!this.history.length||this.history[this.history.length-1]!=a)&&(this.history.length>100&&this.history.unshift(),this.history.push(this.codemirrorData.text)),this.codemirrorData.text=a,this.textChanged.emit(this.codemirrorData.text)}}resizeEditor(){this.editor&&this.editor.dispatch({effects:this.themes.reconfigure(this.myTheme)})}onResize(){this.resizeEditor()}recreate(){this.editor&&this.editor.setState(this.createNewCodemirrorState())}setText(a){if(this.text!=a&&(this.codemirrorData.text=a,this.editor)){this.editor.dispatch({changes:{from:0,to:this.editor.state.doc.length,insert:a}});let h=this.editor.state.doc.line(this.editor.state.doc.lines).from;this.editor.dispatch({selection:{anchor:h}}),this.editor.dispatch({effects:Ai.scrollIntoView(h)})}}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(go))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-codemirror"]],viewQuery:function(a,h){if(1&a&&ci(uct,5),2&a){let d;Ht(d=$t())&&(h.editorContainerRef=d.first)}},hostBindings:function(a,h){1&a&&ee("resize",function(f){return h.onResize(f.target)},0,iy)},inputs:{data:"data",autocompleteType:"autocompleteType",text:"text",maxHeightStr:"maxHeightStr",minHeightStr:"minHeightStr"},outputs:{textChanged:"textChanged"},decls:2,vars:1,consts:[[3,"ngClass"],["editorContainer",""]],template:function(a,h){1&a&&ue(0,"div",0,1),2&a&&R("ngClass",h.getClasses())},dependencies:[si],styles:[".h100[_ngcontent-%COMP%]{height:calc(100vh - 140px)}.b[_ngcontent-%COMP%]{display:block}.db[_ngcontent-%COMP%]{display:flex;align-content:stretch;align-items:stretch;position:relative;height:80vh;border:1px solid white}"]}),c})();function hct(c,l){1&c&&(I(0,"h5"),ie(1,"\u0420\u0435\u0448\u0435\u043d\u0438\u0435:"),F())}function dct(c,l){if(1&c&&(I(0,"div",10)(1,"div",5),ue(2,"app-d3-svg",3),F()()),2&c){const a=l.$implicit,h=q();P(2),R("generator",h.generator)("d3Config",a)}}function fct(c,l){if(1&c){const a=at();I(0,"div",2)(1,"button",11),ee("click",function(){De(a);const d=q();return ke(d.onSelectFormula(d.d3Configs[d.d3Configs.length-1]))}),ue(2,"clr-icon",12),ie(3," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443"),F()()}}let pct=(()=>{class c{constructor(a,h,d){this.uiConfig=a,this.themes=h,this.mathSvc=d,this.generator=new VE,this.d3Configs=[],this.d3ConfigFormulaText=I0.builder(),this.solving=!1}get formulaText(){return this.uiConfig.ui.calculatorFormulaText.getStringValue()}set formulaText(a){this.uiConfig.ui.calculatorFormulaText.setStringValue(a),this.onUpdateFormulaTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateFormulaTextConfig()}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onMathSolved(a){let h=this.themes.nowIsDay(),d="#0e161b",f=h?"white":"lightgrey",p=h?f:d,g=h?d:f;try{this.d3Configs=[],(new PE).parse(a).forEach(y=>{let _=y.toString(),b=I0.builder().setColorBackground(p).setColorMain(g).setColorText(g).setColorLines(g).setLineWidth(1);b.addParam("\u0442\u0435\u043a\u0441\u0442",_),this.d3Configs.push(b)})}catch(m){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0444\u043e\u0440\u043c\u0443\u043b\u0435: "+a),console.log(m)}}getFormulaTextFormated(){let a=this.formulaText,h=!1,d=!1;for(let f=a.length-1;f>0;--f)switch(a.substring(f,f+1)){case".":if(h){f=0;break}h=!0;break;case";":d=!0,f=0;break;case"\r":case"\n":case"\t":case" ":break;default:f=0}return d||(a+=";"),h||(a+="."),a}getFormulaTextFormattedAndConverted(){let a=this.getFormulaTextFormated(),h=new PE,d=this.formulaText;try{let f=h.parse(a);f&&(d=f.toString())}catch(f){}return d}isFormulaTextValid(){let a=this.getFormulaTextFormated(),h=new PE;try{return!!h.parse(a)}catch(d){return!1}}onSolve(){this.solving=!0,this.mathSvc.mathSolve(this.getFormulaTextFormattedAndConverted()).then(a=>{this.solving=!1,this.onMathSolved(a&&a.success?a.text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439.")})}onUpdateFormulaTextConfig(){let a=this.themes.nowIsDay(),h="#0e161b",d=a?"white":"lightgrey",f=a?d:h,p=a?h:d,g=I0.builder().setColorBackground(f).setColorMain(p).setColorText(p).setColorLines(p).setLineWidth(1);g.addParam("\u0442\u0435\u043a\u0441\u0442",this.getFormulaTextFormattedAndConverted()),this.d3ConfigFormulaText=g,this.d3Configs=[]}onSelectFormula(a){this.formulaText=a.params.get("\u0442\u0435\u043a\u0441\u0442")}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(go),B(Sg))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-calculator-view"]],inputs:{data:"data"},decls:13,vars:10,consts:[[3,"ngClass"],[3,"maxHeightStr","autocompleteType","text","textChanged"],[1,"no-print"],[3,"generator","d3Config"],[1,"clr-row","no-print"],[1,"clr-col-12"],[1,"btn","btn-primary","btn-block",3,"disabled","click"],[4,"ngIf"],["class","clr-row",4,"ngFor","ngForOf"],["class","no-print",4,"ngIf"],[1,"clr-row"],["aria-label","arrow",1,"btn","btn-link","btn-block",3,"click"],["shape","arrow"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"h5"),ie(2,"\u0424\u043e\u0440\u043c\u0443\u043b\u0430:"),F(),I(3,"app-dynamic-codemirror",1),ee("textChanged",function(f){return h.formulaText=f}),F(),I(4,"div",2),ue(5,"app-d3-svg",3),F(),I(6,"div",4)(7,"div",5)(8,"button",6),ee("click",function(){return h.onSolve()}),ie(9,"\u0420\u0435\u0448\u0438\u0442\u044c"),F()()(),X(10,hct,2,0,"h5",7),X(11,dct,3,2,"div",8),X(12,fct,4,0,"div",9),F()),2&a&&(R("ngClass",h.getClasses()),P(3),R("maxHeightStr","100px")("autocompleteType","math")("text",h.formulaText),P(2),R("generator",h.generator)("d3Config",h.d3ConfigFormulaText),P(3),R("disabled",h.solving||!h.isFormulaTextValid()),P(2),R("ngIf",h.d3Configs.length),P(1),R("ngForOf",h.d3Configs),P(1),R("ngIf",h.d3Configs.length))},dependencies:[si,fi,_n,eo,_he,LI],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),c})();class NH{constructor(){}static builder(){return new NH}}class LH extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new LH("",null,null,NH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setId(l){return this.id=l,this}setWaitingForSenderid(l){return this.waitingForSenderId=l,this}setComponents(l){return this.components=l,this}}let gct=(()=>{class c{constructor(a,h){this.config=a,this.uiConfig=h,this.codemirrorData=wS.builder().setMessageTarget("\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setMessageUndoText("\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),this.generator=new VE,this.solving=!1,this.sCompilerSourceText=""}get formulaText(){return this.sCompilerSourceText!=this.uiConfig.ui.compilerSourceText.getStringValue()&&this.config.post(()=>{this.sCompilerSourceText=this.uiConfig.ui.compilerSourceText.getStringValue()}),this.sCompilerSourceText}set formulaText(a){this.uiConfig.ui.compilerSourceText.setStringValue(a),this.onUpdateSourceTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){this.onUpdateSourceTextConfig()}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}isFormulaTextValid(){return!0}onRun(){this.codemirrorData.click("\u0441\u0442\u0430\u0440\u0442")}onUpdateSourceTextConfig(){}onSelectFormula(a){this.formulaText=a.params.get("\u0442\u0435\u043a\u0441\u0442")}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-compiler-view"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"data","text","textChanged"]],template:function(a,h){1&a&&(I(0,"div")(1,"app-dynamic-codemirror",0),ee("textChanged",function(f){return h.formulaText=f}),F()()),2&a&&(P(1),R("data",h.codemirrorData)("text",h.formulaText))},dependencies:[LI],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),c})();class BH{constructor(){}static builder(){return new BH}}class VH extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new VH("",null,null,BH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setId(l){return this.id=l,this}setWaitingForSenderid(l){return this.waitingForSenderId=l,this}setComponents(l){return this.components=l,this}}let mct=(()=>{class c{constructor(a,h,d){this.uiConfig=a,this.themes=h,this.mathSvc=d}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(go),B(Sg))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-calendar-view"]],inputs:{data:"data"},decls:2,vars:1,consts:[[3,"ngClass"]],template:function(a,h){1&a&&(I(0,"div",0),ie(1," \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c.\n"),F()),2&a&&R("ngClass",h.getClasses())},dependencies:[si],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),c})();class vct{constructor(l,a,h,d,f,p=null){this.name=l,this.description=a,this.object=h,this.fieldName=d,this.enabler=f,this.onChangeHandler=p}get value(){return this.object[this.fieldName]}set value(l){this.object[this.fieldName]!=l&&(this.object[this.fieldName]=l,this.changed())}get enabled(){return!this.enabler||!!this.enabler.value}changed(){!this.onChangeHandler||this.onChangeHandler()}}class Th{static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(l,a){let h=/\{[\u043a\u041a\u0441\u0421\u0437\u0417\u0451\u0401\u0444\u0424\u043f\u041f\u043c\u041c\u043b\u041b\u0440\u0420]\}/g;return l.split("\r\n").map(d=>d.includes("\u0442")?d:d.replace(h,"")).map(d=>d+(d.includes("\u0442")?"":a)).join("\r\n")}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0412\u041b\u044e\u0431\u043e\u043c\u0421\u043b\u0443\u0447\u0430\u0435(l,a){let h=/\{[\u043a\u041a\u0441\u0421\u0437\u0417\u0451\u0401\u0444\u0424\u043f\u041f\u043c\u041c\u043b\u041b\u0440\u0420]\}/g;return l.split("\r\n").map(d=>d.replace(h,"")).map(d=>d+a).join("\r\n")}static getTextColor(l){var a=l.split(""),h="",d="",f=0;for(let p=0;p<a.length;++p)"{"==a[p]?++f:"}"==a[p]?(2==f&&(h=`{${d}}`),f=0):1==f?"\u0442"==(d=a[p])?f=0:++f:f=0;return h}static utf8_to_b64(l){return window.btoa(encodeURIComponent(l))}static b64_to_utf8(l){return decodeURIComponent(window.atob(l))}}class BI{static getPasha(l,a=!0){let p=(l%19*19+15)%30,m=p+(l%4*2+l%7*4+6*p+6)%7,v=null;return v=m<=9?new Date(l,2,22+m):new Date(l,3,m-9),a&&v.setDate(v.getDate()+13),v}static getRelativePashaDayDate(l,a,h=!0){let d=BI.getPasha(l,h);return d.setDate(d.getDate()+a),d}static daysDiff(l,a){return Math.round((l.getTime()-a.getTime())/864e5)}}class ev{constructor(l,a){this.rang=l,this.text=a,this.extraRang=0}static builder(){return new ev(0,"")}setRang(l){return this.rang=l,this}setExtraRang(l){return this.extraRang=l,this}setText(l){return this.text=l,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l=0){let a=Math.max(l,this.rang);return a>0?a:1}\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(l=0){return 6==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l)||5==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l)}\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(l=0){return 4==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l)}\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(l=0){return 3==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l)}\u0448\u0435\u0441\u0442\u0438\u0440\u0438\u0447\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(l=0){return 2==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l)}\u0431\u0435\u0437\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u0447\u043d\u043e\u0433\u043e\u0417\u043d\u0430\u043a\u0430\u0421\u043b\u0443\u0436\u0431\u0430(l=0){return 1==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l)||0==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l)}\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(l=0){let a="";return this.\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(l)?a="{\u043a}":this.\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(l)?a="{\u0437}":this.\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(l)&&(a="{\u0441}"),a}}let v0e=(()=>{class c{constructor(a){this.cacheSvc=a,this.prazdniki=null,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u0412\u0435\u043b\u0438\u043a\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u041d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438="\u0414\u043e \u041f\u0430\u0441\u0445\u0438",this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438="\u041f\u043e\u0441\u043b\u0435 \u041f\u0430\u0441\u0445\u0438",this.\u0438\u043d\u044b\u0435="\u0418\u043d\u044b\u0435",this.\u0434\u043d\u0438\u041d\u0435\u0434\u0435\u043b\u0438=["","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431","\u0432\u0441","\u0432"]}load(){return new Promise(this.prazdniki?(a,h)=>{a(!0)}:(a,h)=>{let d=this.cacheSvc.getRestPoint("/calendar/prazdniki.txt",null);this.cacheSvc.getTextRestcallUrl(d,f=>{f?(this.prazdniki=JSON.parse(f),a(!0)):h(`Cann't load file: ${d}`)})})}getPrazdnikiPoDate(a,h){let d=null,f=0;for(;f<=8;++f)if(null!=a[f]){d=a[f];break}if(d)switch(f){case 0:break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.getDay()!==f%7&&(d=null);break;case 8:1==new Date(h.getFullYear(),1,29).getMonth()||(d=null);break;default:throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430.")}return d?d.map(p=>ev.builder().setRang(p[0]).setText(p[1])):[]}getPrazdniki(a){return a?a.map(h=>ev.builder().setRang(h[0]).setText(h[1])):[]}getPrazdnikiFor(a,h,d){let f=new Date(a,h,d-13),p=new Date(a,h,d),g=BI.getPasha(a),m=BI.daysDiff(p,g),v=[[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0438\u043d\u044b\u0435]].flatMap(y=>{let _=+y[0],x=this.prazdniki[y[1]][f.getMonth()];if(null==x)return[];let S=x[f.getDate()];return null==S?[]:this.getPrazdnikiPoDate(S,p).map(T=>T.setExtraRang(_))}).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438]].flatMap(y=>{let _=+y[0];if(m>=0)return[];let x=this.prazdniki[y[1]][-m];return null==x?[]:this.getPrazdniki(x).map(S=>S.setExtraRang(_))})).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438]].flatMap(y=>{let _=+y[0];if(m<0)return[];let x=this.prazdniki[y[1]][m];return null==x?[]:this.getPrazdniki(x).map(S=>S.setExtraRang(_))}));return v.sort((y,_)=>_.rang+_.extraRang-y.rang-y.extraRang),v}}return c.\u0275fac=function(a){return new(a||c)(Ae(wd))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class zH{constructor(){}static builder(){return new zH}}class VI extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.prazdniki=[]}static builder(){return new VI("",null,null,zH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setPrazdniki(l){return this.prazdniki=l,this}}class I1{constructor(l,a,h,d,f,p,g){this.text=l,this.time=a,this.morningService=h,this.requiredService=d,this.selectedClerics=f,this.ispovedClerics=p,this.serviceColor=g}static builder(){return new I1("","",!0,!1,"","","")}setText(l){return this.text=l,this}setTime(l){return this.time=l,this}setMorningService(l){return this.morningService=l,this}setRequiredService(l){return this.requiredService=l,this}getNormalizedText(){return this.getNormalizedManualText(this.text)}getNormalizedTime(){return this.getNormalizedManualText(this.time)}getNormalizedManualText(l){let a=l;return this.morningService||a.includes("{\u0432}")||(a+="{\u0432}"),this.requiredService&&(a.includes("{\u0442}")||(a+="{\u0442}")),a}setSelectedClerics(l){return this.selectedClerics=l,this}setIspovedClerics(l){return this.ispovedClerics=l,this}setServiceColor(l){return this.serviceColor=l,this}}class UH{constructor(){}static builder(){return new UH}}class tv extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.services=[]}static builder(){return new tv("",null,null,UH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setServices(l){return this.services=l,this}}class d2{constructor(l,a){this.name=l,this.week=a}static builder(){return new d2("",[!1,!1,!1,!1,!1,!1,!1])}setName(l){return this.name=l,this}setWeek(l){return this.week=l,this}}class HH{constructor(){}static builder(){return new HH}}class zI extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.clerics=[]}static builder(){return new zI("",null,null,HH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setClerics(l){return this.clerics=l,this}}let y0e=(()=>{class c{constructor(a,h,d){this.http=a,this.config=h,this.cacheSvc=d,this.names=[],this.restPoint="/calendar"}getRestPoint(a,h,d=null){return Ar.merge(Ar.merge(h||this.config.serviceAPIHost,d||this.restPoint),a)}getNames(a,h="calendar",d=null){const f={params:{}};return new Promise((p,g)=>{this.http.get(this.getRestPoint("/names",a,d),f).pipe(hr(Hi.handleError)).subscribe({next:m=>p(m),error:m=>g(m)})})}getSource(a,h){const d={params:{_name:a}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/source",h),d).pipe(hr(Hi.handleError)).subscribe({next:g=>f(g),error:g=>p(g)})})}getTextStr(a,h,d,f){let p=""+d;const g=Ar.merge(Ar.merge(a,h),p);this.cacheSvc.getText(g,f)}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on),Ae(wd))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class f2{constructor(l,a,h,d){this.open=l,this.text=a,this.color=h,this.tag=d}setOpen(l){return this.open=l,this}setText(l){return this.text=l,this}setColor(l){return this.color=l,this}setTag(l){return this.tag=l,this}static builder(){return new f2(!1,"","",null)}}let _0e=(()=>{class c{constructor(a){this.uiConfig=a,this.calendarScheduler=[],this.calendarIntervals=""}saveMonth(a,h,d){let f=[],p=g=>{let m="";return"blue"==g?m="B":"green"==g?m="G":"red"==g&&(m="R"),m};for(let g=0;g<1;g++){let m=a[g];for(let v=0;v<m.length;v++){let y=m[v];if(y.text){let _=p(y.color);f[32+v]=_}}}for(let g=1;g<a.length;g++){let m=a[g];for(let v=0;v<m.length;v++){let y=m[v];if(y.text){let _=p(y.color);f[+y.text]=_}}}this.calendarScheduler[h]||(this.calendarScheduler[h]=[]),this.calendarScheduler[h][d]=f,this.forceSave()}getMonthsDaysCount(a,h){return new Date(a,(h+1)%12,0).getDate()}createMonth(a,h){let d=C=>{let x="";return C?"R"==C?x="red":"G"==C?x="green":"B"==C&&(x="blue"):x="",x},f=[],p=this.getMonthsDaysCount(h,a),g=this.calendarScheduler[h],m=g?g[a]:[];m||(m=[]);let v=[],_=7;f.push(["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].map((C,x)=>f2.builder().setText(C).setColor((C=>{let x=m[C],S="";return x&&(S=d(x)),S})(32+x))));let b=1;{let x=new Date(h,a,1).getDay();0==x&&(x+=7);for(let S=1;S<x;S++)v.push(f2.builder());b=x-1,_=Math.ceil((p+b)/7)+2}for(let C=1;C<=p;C+=7)for(let x=0;x<7;x++)if(C+x<=p){let w=new Date(h,a,C+x).getDay();0==w&&(w+=7);let T=m[C+x];T=d(T),v.push(f2.builder().setText(""+(C+x)).setColor(T)),7==v.length&&(f.push(v),v=[])}return v.length&&f.push(v),f}dateLessOrEqual(a,h,d,f,p,g){return a<f||!(a>f)&&(h<p||!(h>p)&&d<g)}isInInterval(a,h,d){let f=h+1,p=this.calendarIntervals.split("\n"),g=!1;return p.forEach(m=>{try{let v=m.split("\t");if(v.length>=3){let y=v[1].split(/[\\/\.\-]/),_=v[2].split(/[\\/\.\-]/);if(this.dateLessOrEqual(+y[2],+y[1],+y[0],+_[2],+_[1],+_[0])){let b=this.dateLessOrEqual(+y[2],+y[1],+y[0],a,f,d),C=this.dateLessOrEqual(a,f,d,+y[2],+y[1],+y[0]),x=this.dateLessOrEqual(a,f,d,+_[2],+_[1],+_[0]),S=this.dateLessOrEqual(+_[2],+_[1],+_[0],a,f,d);(b||!b&&!C)&&(x||!x&&!S)&&(g=!0)}}}catch(v){}}),g}isLiturgiaFound(a,h,d){if(!this.isInInterval(a,h,d))return!0;let f=this.calendarScheduler[a];if(!f)return!0;let p=f?f[h]:[];if(!p)return!0;let g=p[d];return"B"==g||"G"==g}forceSave(){}}return c.\u0275fac=function(a){return new(a||c)(Ae(ti))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();function yct(c,l){if(1&c&&(I(0,"div",4),ue(1,"app-svg-js-image",3),F()),2&c){const a=q();P(1),R("data",a.svgDateData)}}const b0e=function(c,l){return{"clr-col-4":c,"clr-col-6":l}};let _ct=(()=>{class c{constructor(a,h,d,f,p){this.uiConfig=a,this.config=h,this.themes=d,this.mathSvc=f,this.calendarSvc=p,this.svgMonthData=Va.builder().setGenName("this").setType(114),this.svgYearData=Va.builder().setGenName("this").setType(114),this.svgDateData=Va.builder().setGenName("this").setType(114),this.change=new wt,this.dateChangedEnabled=!0,this.showDates=!1,this.useUniqueDate=!1,this.uniqueDateString="",this.oldUniqueDateString=null}get calendarText(){return this.uiConfig.ui.calendarCurrentDate.getStringValue()}set calendarText(a){this.uiConfig.ui.calendarCurrentDate.setStringValue(a)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}get sCurrentDate(){let a=this.useUniqueDate?this.uniqueDateString:this.calendarText;return a!==this.oldUniqueDateString&&(this.oldUniqueDateString=a,this.config.post(()=>{this.ngOnInitDirect()},10)),a}set sCurrentDate(a){this.useUniqueDate?this.uniqueDateString=a:this.calendarText=a,this.oldUniqueDateString=a}get sCurrentDateValidString(){let a=this.sCurrentDate;if(!a){let h=new Date;a=`${h.getDate()}.${h.getMonth()+1}.${h.getFullYear()}`}return a}get currentDate(){let d=+this.sCurrentDateValidString.split(/[\\/\.\-]/)[0],f=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);return d>f&&(d=f),d}set currentDate(a){let h=this.sCurrentDateValidString.split(/[\\/\.\-]/),d=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);this.sCurrentDate=`${a<=d?a:d}.${h[1]}.${h[2]}`,this.changed()}get currentMonthIndex(){return+this.sCurrentDateValidString.split(/[\\/\.\-]/)[1]-1}set currentMonthIndex(a){let h=this.sCurrentDateValidString.split(/[\\/\.\-]/),d=+h[0],f=this.calendarSvc.getMonthsDaysCount(this.currentYear,a);d=d<=f?d:f,this.sCurrentDate=`${d}.${a+1}.${h[2]}`,this.changed()}validateYear(a){let h=+a,d=(new Date).getFullYear();return Number.isNaN(h)&&(h=d),(+h+10<d||+h-10>d)&&(h=d-10),+h}get currentYear(){let a=this.sCurrentDateValidString.split(/[\\/\.\-]/);return+this.validateYear(+a[2])}set currentYear(a){let h=this.sCurrentDateValidString.split(/[\\/\.\-]/),d=+h[0];a=this.validateYear(a);let f=this.calendarSvc.getMonthsDaysCount(a,this.currentMonthIndex);d=d<=f?d:f,this.sCurrentDate=`${d}.${h[1]}.${a}`,this.changed()}ngOnInit(){this.ngOnInitDirect()}ngOnInitDirect(){let a=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"].map((m,v)=>gg.builder().setName(m).setTag(v));this.svgMonthData=Va.builder().setGenerator((new _E).setTheme(this.themes.nowIsDay()?js.Light3:js.Dark3).setCommands(a,a[this.currentMonthIndex]).setOnCommandHandler(m=>{this.currentMonthIndex=m.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114);let h=[],d=this.currentYear;for(let m=-15;m<=15;m++)h.push(d+m);let p=15,g=h.map((m,v)=>(m==d&&(p=v),gg.builder().setName(""+m).setTag(m)));this.svgYearData=Va.builder().setGenerator((new _E).setTheme(this.themes.nowIsDay()?js.Light3:js.Dark3).setCommands(g,g[15]).setOnCommandHandler(m=>{this.currentYear=m.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114),this.reloadDates()}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}reloadDates(){if(!this.showDates)return;let a=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex),h=[];for(let d=1;d<=a;d++)h.push(gg.builder().setName(""+d).setTag(d));this.svgDateData=Va.builder().setGenerator((new _E).setTheme(this.themes.nowIsDay()?js.Light3:js.Dark3).setCommands(h,h[this.currentDate-1]).setOnCommandHandler((d,f)=>{this.dateChangedEnabled=!1,this.currentDate=d.tag,this.dateChangedEnabled=!0}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114)}sendChanged(){this.change.emit(this.sCurrentDateValidString)}changed(){this.dateChangedEnabled&&this.reloadDates(),this.sendChanged()}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(on),B(go),B(Sg),B(_0e))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-calendar"]],inputs:{data:"data",showDates:"showDates",useUniqueDate:"useUniqueDate",uniqueDateString:"uniqueDateString"},outputs:{change:"change"},decls:6,vars:11,consts:[[1,"clr-row"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[3,"data"],[1,"clr-col-4"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,yct,2,1,"div",1),I(2,"div",2),ue(3,"app-svg-js-image",3),F(),I(4,"div",2),ue(5,"app-svg-js-image",3),F()()),2&a&&(P(1),R("ngIf",h.showDates),P(1),R("ngClass",as(5,b0e,h.showDates,!h.showDates)),P(1),R("data",h.svgMonthData),P(1),R("ngClass",as(8,b0e,h.showDates,!h.showDates)),P(1),R("data",h.svgYearData))},dependencies:[si,_n,Zl],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.inline[_ngcontent-%COMP%]{display:inline-block}"]}),c})();function bct(c,l){1&c&&ue(0,"img",6),2&c&&R("src","./imsvg/"+(7-q().$implicit.rang)+".svg",lC)}function Cct(c,l){if(1&c){const a=at();I(0,"div",2),ee("click",function(){const f=De(a).$implicit;return ke(q().onSelectPrazdnik(f))}),I(1,"div",3)(2,"span",4),ie(3,"\xa0"),X(4,bct,1,1,"img",5),ie(5,"\xa0"),F(),ie(6),F()()}if(2&c){const a=l.$implicit;P(4),R("ngIf",a.rang>1),P(2),Ut(a.text)}}let xct=(()=>{class c{constructor(a,h,d){this.uiConfig=a,this.themes=h,this.mathSvc=d,this.onSelected=new wt}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get prazdnkikiData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onSelectPrazdnik(a){this.onSelected.emit(a)}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(go),B(Sg))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-prazdniki"]],inputs:{data:"data"},outputs:{onSelected:"onSelected"},decls:2,vars:2,consts:[[3,"ngClass"],["class","clr-row cursor",3,"click",4,"ngFor","ngForOf"],[1,"clr-row","cursor",3,"click"],[1,"clr-col-12"],[1,"label","label-info"],["width","16px","height","16px",3,"src",4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Cct,7,2,"div",1),F()),2&a&&(R("ngClass",h.getClasses()),P(1),R("ngForOf",h.prazdnkikiData.prazdniki))},dependencies:[si,fi,_n],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),c})();class $H{constructor(){}static builder(){return new $H}}class WH extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.colors=[],this.color=""}static builder(){return new WH("",null,null,$H.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setColors(l){return this.colors=l,this}setColor(l){return this.color=l,this}}function wct(c,l){if(1&c){const a=at();I(0,"button",2),ee("click",function(d){const p=De(a).$implicit;return ke(q().onToggleColor(d,p))}),ie(1),F()}if(2&c){const a=l.$implicit;R("ngClass",q().getClass(a)),P(1),Ut(a.name)}}class Oh{constructor(l,a,h,d){this.name=l,this.clazz=a,this.value=h,this.selected=d}static builder(){return new Oh("","","",!1)}setName(l){return this.name=l,this}setClass(l){return this.clazz=l,this}setValue(l){return this.value=l,this}}let Sct=(()=>{class c{constructor(){this.data=WH.builder(),this.info="\u0426\u0432\u0435\u0442\u0430",this.colorChanged=new wt,this.colors=[Oh.builder().setName("\u041a\u0440\u0430\u0441\u043d\u044b\u0439").setClass("bcRed").setValue("{\u043a}"),Oh.builder().setName("\u0421\u0438\u043d\u0438\u0439").setClass("bcBlue").setValue("{\u0441}"),Oh.builder().setName("\u0417\u0435\u043b\u0451\u043d\u044b\u0439").setClass("bcGreen").setValue("{\u0437}"),Oh.builder().setName("\u0416\u0451\u043b\u0442\u044b\u0439").setClass("bcYellow").setValue("{\u0451}"),Oh.builder().setName("\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439").setClass("bcIndigo").setValue("{\u0444}"),Oh.builder().setName("\u041f\u0443\u0440\u043f\u0443\u0440\u043d\u044b\u0439").setClass("bcPurple").setValue("{\u043f}"),Oh.builder().setName("\u041c\u043e\u0440\u0441\u043a\u043e\u0439").setClass("bcCyan").setValue("{\u043c}"),Oh.builder().setName("\u0417\u0435\u043b\u0451\u043d\u043e-\u0436\u0451\u043b\u0442\u044b\u0439").setClass("bcGreenYellow").setValue("{\u043b}"),Oh.builder().setName("\u0422\u0451\u043c\u043d\u043e-\u043a\u0440\u0430\u0441\u043d\u044b\u0439").setClass("bcDarkRed").setValue("{\u0440}")]}get selColorsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}set text(a){this.data&&(this.data.text=a,this.color=Th.getTextColor(this.data.text))}set color(a){this.colors.forEach(h=>{h.selected=h.value==a})}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.data&&(this.color=Th.getTextColor(this.data.text))}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onToggleColor(a,h){a.stopPropagation(),h.selected=!h.selected,h.selected&&this.colors.filter(d=>d!=h).forEach(d=>d.selected=!1),this.colorChanged.emit(h.selected?h.value:"")}getClass(a){var h={btn:!0};return h.darkBtn=!a.selected,h[a.clazz]=a.selected,h}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-select-colors"]],inputs:{data:"data",info:"info",text:"text"},outputs:{colorChanged:"colorChanged"},decls:5,vars:3,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"h6")(2,"b"),ie(3),F()(),X(4,wct,2,2,"button",1),F()),2&a&&(R("ngClass",h.getClasses()),P(3),Ut(h.info),P(1),R("ngForOf",h.colors))},dependencies:[si,fi],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),c})();class GH{constructor(){}static builder(){return new GH}}class QH extends mi{constructor(l,a,h,d){super(l,a,h),this.config=d,this.useDefault=!1,this.object={},this.fieldName="name",this.description="\u0418\u043c\u044f",this.description2="",this.shapes=[],this.readonly=!1,this.command=null}static builder(){return new QH("",null,null,GH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setUseDefault(l){return this.useDefault=l,this}setObject(l){return this.object=l,this}setFieldName(l){return this.fieldName=l,this}setDescription(l){return this.description=l,this}setDescription2(l){return this.description2=l,this}setShapes(l){return this.shapes=l,this}setReadonly(l){return this.readonly=l,this}setCommand(l){return this.command=l,this}}function Tct(c,l){if(1&c){const a=at();I(0,"button",4),ee("click",function(d){const p=De(a).$implicit;return ke(q(2).onCommand(d,p))}),ue(1,"clr-icon"),F()}if(2&c){const a=l.$implicit;P(1),et("shape",a)}}function Oct(c,l){if(1&c){const a=at();I(0,"clr-input-container")(1,"label"),ie(2),X(3,Tct,2,1,"button",2),F(),I(4,"input",3),ee("ngModelChange",function(d){return De(a),ke(q().objectFieldName=d)}),F()()}if(2&c){const a=q();P(2),Ut(a.description),P(1),R("ngForOf",a.shapes),P(1),R("readOnly",a.readonly)("placeholder",a.description2)("name",a.fieldName)("ngModel",a.objectFieldName)}}function Dct(c,l){if(1&c){const a=at();I(0,"button",4),ee("click",function(d){const p=De(a).$implicit;return ke(q(2).onCommand(d,p))}),ue(1,"clr-icon"),F()}if(2&c){const a=l.$implicit;P(1),et("shape",a)}}function kct(c,l){if(1&c){const a=at();I(0,"clr-input-container",5)(1,"label"),ie(2),X(3,Dct,2,1,"button",2),F(),I(4,"input",3),ee("ngModelChange",function(d){return De(a),ke(q().objectFieldName=d)}),F()()}if(2&c){const a=q();P(2),Ti("",a.description," "),P(1),R("ngForOf",a.shapes),P(1),R("readOnly",a.readonly)("placeholder",a.description2)("name",a.fieldName)("ngModel",a.objectFieldName)}}let C0e=(()=>{class c{constructor(a){this.config=a,this.data=QH.builder(),this.changed=new wt}get textEditorData(){return this.data}get useDefault(){return this.textEditorData.useDefault}set useDefault(a){this.textEditorData.setUseDefault(a)}get description(){return this.textEditorData.description}set description(a){this.textEditorData.setDescription(a)}get description2(){return this.textEditorData.description2?this.textEditorData.description2:this.textEditorData.description}set description2(a){this.textEditorData.setDescription2(a)}get shapes(){return this.textEditorData.shapes}set shapes(a){this.textEditorData.setShapes(a)}get readonly(){return this.textEditorData.readonly}set readonly(a){this.textEditorData.setReadonly(a)}get object(){return this.textEditorData.object}set object(a){this.textEditorData.setObject(a)}get fieldName(){return this.textEditorData.fieldName}set fieldName(a){this.textEditorData.setFieldName(a)}set command(a){this.textEditorData.setCommand(a)}get objectFieldName(){return this.object[this.fieldName]}set objectFieldName(a){this.object[this.fieldName]=a,this.onChanged()}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onCommand(a,h){this.textEditorData.command&&this.textEditorData.command(this.object,this.fieldName,h),a.stopPropagation()}onChanged(){this.changed.emit(this.objectFieldName)}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-text-editor"]],inputs:{data:"data",useDefault:"useDefault",description:"description",description2:"description2",shapes:"shapes",readonly:"readonly",object:"object",fieldName:"fieldName",command:"command"},outputs:{changed:"changed"},decls:2,vars:2,consts:[[4,"ngIf"],["class","",4,"ngIf"],["class","btn btn-link btn-sx",3,"click",4,"ngFor","ngForOf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"],[1,"btn","btn-link","btn-sx",3,"click"],[1,""]],template:function(a,h){1&a&&(X(0,Oct,5,6,"clr-input-container",0),X(1,kct,5,6,"clr-input-container",1)),2&a&&(R("ngIf",h.useDefault),P(1),R("ngIf",!h.useDefault))},dependencies:[fi,_n,eo,cs,Bx,e_,Vl,jo,Ao],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class jH{constructor(){}static builder(){return new jH}}class qH extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.rang=1}static builder(){return new qH("",null,null,jH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setRang(l){return this.rang=l,this}}class ZH{constructor(){this.printOnly=!1}static builder(){return new ZH}setPrintOnly(l){return this.printOnly=l,this}}class XH extends mi{constructor(l,a,h,d,f,p){super("",d,f),this.genName=l,this.svgWidth=a,this.svgHeight=h,this.classes=p,this.rang=0}static builder(){return new XH("",512,512,null,null,ZH.builder())}setGenName(l){return this.genName=l,this}setSvgRangSignWidth(l){return this.svgWidth=l,this}setSvgRangSignHeight(l){return this.svgHeight=l,this}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}updateClasses(l){return l(this.classes),this}setRang(l){return this.rang=l,this}}function Mct(c,l){1&c&&ue(0,"img",1),2&c&&R("src","./imsvg/"+(7-q().rang)+".svg",lC)}let Ect=(()=>{class c{constructor(a){this.config=a,this.data=XH.builder()}get svgData(){return this.data}get rang(){return this.svgData.rang}set rang(a){this.svgData.rang=a}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{"print-only":this.svgData.classes.printOnly}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-svg-rang-sign"]],inputs:{data:"data",rang:"rang"},decls:1,vars:1,consts:[["width","16px","height","16px",3,"src",4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(a,h){1&a&&X(0,Mct,1,1,"img",0),2&a&&R("ngIf",h.rang>1)},dependencies:[_n],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();const Act=function(c,l){return{btn:!0,"btn-primary":c,darkBtn:l}};function Ict(c,l){if(1&c){const a=at();I(0,"button",2),ee("click",function(d){const p=De(a).$implicit;return ke(q().onSelectRang(d,p))}),ue(1,"app-dynamic-svg-rang-sign",3),F()}if(2&c){const a=l.$implicit,h=q();R("ngClass",as(2,Act,h.isSelectedRang(a),!h.isSelectedRang(a))),P(1),R("rang",a.rang)}}class Ug{constructor(l){this.rang=l}static builder(){return new Ug(0)}setRang(l){return this.rang=l,this}}let w0e=(()=>{class c{constructor(){this.data=qH.builder(),this.rangChanged=new wt,this.rangs=[Ug.builder().setRang(6),Ug.builder().setRang(5),Ug.builder().setRang(4),Ug.builder().setRang(3),Ug.builder().setRang(2),Ug.builder().setRang(1)],this.currentRang=this.rangs[0]}set rang(a){let h=this.rangs.find(d=>d.rang==a);this.currentRang=h||null}get rangsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}isSelectedRang(a){return this.currentRang===a}onSelectRang(a,h){a.stopPropagation(),this.currentRang=h,this.rangChanged.emit(h.rang)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-rangs"]],inputs:{data:"data",rang:"rang"},outputs:{rangChanged:"rangChanged"},decls:2,vars:2,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"rang"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Ict,2,5,"button",1),F()),2&a&&(R("ngClass",h.getClasses()),P(1),R("ngForOf",h.rangs))},dependencies:[si,fi,Ect],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),c})();class YH{constructor(){}static builder(){return new YH}}class KH extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.clerics=[]}static builder(){return new KH("",null,null,YH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setClerics(l){return this.clerics=l,this}}const S0e=function(c,l){return{btn:!0,"btn-primary":c,darkBtn:l}};function Pct(c,l){if(1&c){const a=at();I(0,"button",1),ee("click",function(d){const p=De(a).$implicit;return ke(q().onToggleClericIndex(d,p))}),ie(1),F()}if(2&c){const a=l.$implicit,h=q();R("ngClass",as(2,S0e,h.isClericSelected(a),!h.isClericSelected(a))),P(1),Ut(a.name)}}let Rct=(()=>{class c{constructor(){this.data=KH.builder(),this.info="\u0421\u043b\u0443\u0436\u0438\u0442",this.clericsChanged=new wt}get clerics(){return this.selClericsData.clerics}set clerics(a){this.selClericsData.clerics=a}get selClericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}set text(a){this.data&&(this.data.text=a)}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onToggleClericIndex(a,h){a.stopPropagation();let d=this.text.split(","),f=d.filter(g=>g==h.name).length>0,p=d.filter(g=>g!=h.name).join(",");f||(p&&(p+=","),p+=h.name),this.selClericsData.text=p,this.clericsChanged.emit(this.selClericsData.text)}isClericSelected(a){return this.text.split(",").filter(h=>h==a.name).length>0}onToggleAllClerics(a){a.stopPropagation(),this.text=this.text?"":this.clerics.map(h=>h.name).join(","),this.clericsChanged.emit(this.selClericsData.text)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-select-clerics"]],inputs:{data:"data",info:"info",clerics:"clerics",text:"text"},outputs:{clericsChanged:"clericsChanged"},decls:7,vars:7,consts:[[3,"ngClass"],[3,"ngClass","click"],["shape","lightbulb"],[3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"h6")(2,"b"),ie(3),F()(),I(4,"button",1),ee("click",function(f){return h.onToggleAllClerics(f)}),ue(5,"clr-icon",2),F(),X(6,Pct,2,5,"button",3),F()),2&a&&(R("ngClass",h.getClasses()),P(3),Ut(h.info),P(1),R("ngClass",as(4,S0e,!!h.text,!h.text)),P(2),R("ngForOf",h.clerics))},dependencies:[si,fi,eo],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),c})();function Fct(c,l){if(1&c){const a=at();I(0,"app-dynamic-scheduler-rangs",16),ee("rangChanged",function(d){return De(a),ke(q().onSelectRang(d))}),F()}2&c&&R("rang",q().currentRang)}function Nct(c,l){if(1&c){const a=at();I(0,"app-dynamic-scheduler-select-clerics",22),ee("clericsChanged",function(d){De(a);const f=q().$implicit;return ke(q().onClericsChanges(d,f))}),F()}if(2&c){const a=q().$implicit,h=q();R("text",a.selectedClerics)("clerics",h.clerics)("info",h.clericInfo)}}const Lct=function(c,l){return{"clr-col-8":c,"clr-col-12":l}},T0e=function(){return["add-text","upload","download","times"]},Bct=function(c,l){return{"clr-col-4":c,"clr-col-12":l}},O0e=function(c,l){return[c,l]};function Vct(c,l){if(1&c){const a=at();I(0,"div",17)(1,"div",0)(2,"app-dynamic-text-editor",18),ee("changed",function(d){return De(a),ke(q().onTextChanged(d))}),F()(),I(3,"div",0)(4,"app-dynamic-text-editor",18),ee("changed",function(d){return De(a),ke(q().onTextChanged(d))}),F()(),I(5,"div",19),X(6,Nct,1,3,"app-dynamic-scheduler-select-clerics",20),F(),I(7,"div",19)(8,"app-dynamic-scheduler-select-colors",21),ee("colorChanged",function(d){const p=De(a).$implicit;return ke(q().onColorChanges(d,p))}),F()()()}if(2&c){const a=l.$implicit,h=q();P(1),R("ngClass",as(14,Lct,!h.isVertical(),h.isVertical())),P(1),R("object",a)("fieldName","text")("description",h.serviceDesc)("shapes",Ll(17,T0e))("command",h.onCommandServiceTogglePtr),P(1),R("ngClass",as(18,Bct,!h.isVertical(),h.isVertical())),P(1),R("object",a)("fieldName","time")("description",h.timeDesc)("shapes",as(21,O0e,a.morningService?"sun":"moon",a.requiredService?"bell":"check"))("command",h.onCommandServiceTogglePtr),P(2),R("ngIf",h.clerics),P(2),R("text",a.text)}}function zct(c,l){if(1&c){const a=at();I(0,"app-dynamic-scheduler-select-clerics",25),ee("clericsChanged",function(d){De(a);const f=q().$implicit;return ke(q().onClericsChanges(d,f))}),F()}if(2&c){const a=q().$implicit,h=q();R("text",a.selectedClerics)("clerics",h.clerics)}}const D0e=function(){return{"clr-col-12":!0}};function Uct(c,l){if(1&c){const a=at();I(0,"div",23)(1,"div",0)(2,"app-dynamic-text-editor",18),ee("changed",function(d){return De(a),ke(q().onTextChanged(d))}),F()(),I(3,"div",0)(4,"app-dynamic-text-editor",18),ee("changed",function(d){return De(a),ke(q().onTextChanged(d))}),F()(),I(5,"div",19),X(6,zct,1,2,"app-dynamic-scheduler-select-clerics",24),F(),I(7,"div",19)(8,"app-dynamic-scheduler-select-colors",21),ee("colorChanged",function(d){const p=De(a).$implicit;return ke(q().onColorChanges(d,p))}),F()()()}if(2&c){const a=l.$implicit,h=q();P(1),R("ngClass",Ll(14,D0e)),P(1),R("object",a)("fieldName","text")("description","\u0421\u043b\u0443\u0436\u0431\u0430")("shapes",Ll(15,T0e))("command",h.onCommandServiceTogglePtr),P(1),R("ngClass",Ll(16,D0e)),P(1),R("object",a)("fieldName","time")("description","\u0412\u0440\u0435\u043c\u044f")("shapes",as(17,O0e,a.morningService?"sun":"moon",a.requiredService?"bell":"check"))("command",h.onCommandServiceTogglePtr),P(2),R("ngIf",h.clerics),P(2),R("text",a.text)}}function Hct(c,l){if(1&c){const a=at();I(0,"button",26),ee("click",function(){return De(a),ke(q().onSaveServices())}),ue(1,"clr-icon",27),ie(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),F()}2&c&&R("clrLoading",q().submitBtnState)}function $ct(c,l){if(1&c){const a=at();I(0,"button",28),ee("click",function(){return De(a),ke(q().modalClearServicesFlag=!0)}),ue(1,"clr-icon",29),ie(2," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()}}function Wct(c,l){if(1&c&&(I(0,"div",30)(1,"div",31),ie(2),F(),I(3,"div",32),ie(4),F()()),2&c){const a=q();P(2),Ut(a.modalDeleteService.text),P(2),Ut(a.modalDeleteService.time)}}let Gct=(()=>{class c{constructor(a,h,d,f){this.uiConfig=a,this.config=h,this.themes=d,this.mathSvc=f,this.data=tv.builder(),this.clerics=null,this.vertical=!1,this.singleRang=!1,this.autoSave=!1,this.clearBtn=!0,this.serviceDesc="\u0421\u043b\u0443\u0436\u0431\u0430",this.timeDesc="\u0412\u0440\u0435\u043c\u044f",this.clericInfo="\u0421\u043b\u0443\u0436\u0438\u0442",this.anyCaseAdd=!0,this.onSave=new wt,this.onClear=new wt,this.onReset=new wt,this.submitBtnState=Ds.DEFAULT,this.currentRang=1,this.modalClearServicesFlag=!1,this.modalDeleteServicesFlag=!1,this.modalDeleteService=null,this.onCommandServiceTogglePtr=(p,g,m)=>this.onCommandServiceToggle(p,g,m)}get services(){let a=this.currentRang-1;return null==this.servicesData.services[a]&&(this.servicesData.services[a]=[]),this.servicesData.services[a]}set services(a){this.servicesData.services[this.currentRang-1]=a}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get servicesData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}isVertical(){return this.vertical}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(a,h,d){if("time"==h)switch(d){case"moon":case"sun":a.morningService=!a.morningService;break;case"bell":case"check":a.requiredService=!a.requiredService}else if("text"==h)switch(d){case"upload":this.moveUp(a);break;case"download":this.moveDown(a);break;case"times":this.requestDeleteService(a);break;case"add-text":this.addNewAfterService(a)}this.onTextChanged("")}onSelectRang(a){this.currentRang=a}onAddNewService(){this.services.push(I1.builder()),this.onTextChanged("")}onSaveServices(){this.onSave.emit(this.servicesData.services),this.submitBtnState=Ds.LOADING,this.config.post(()=>{this.submitBtnState=Ds.DEFAULT},2e3)}moveUp(a){let h=this.services.indexOf(a);h>0&&(this.services[h]=this.services[h-1],this.services[h-1]=a)}moveDown(a){let h=this.services.indexOf(a);h+1<this.services.length&&(this.services[h]=this.services[h+1],this.services[h+1]=a)}deleteService(a){if(null==a)return;let h=this.services.indexOf(a);h>=0&&this.services.splice(h,1),this.onTextChanged("")}addNewAfterService(a){let h=this.services.indexOf(a);h>=0&&h<this.services.length&&this.services.splice(h+1,0,I1.builder())}onResetServices(){this.onReset.emit(this.servicesData.services)}onClearServices(){this.onClear.emit(this.servicesData.services)}requestDeleteService(a){this.modalDeleteService=a,this.modalDeleteServicesFlag=!0}onClericsChanges(a,h){h.setSelectedClerics(a),this.onTextChanged("")}onColorChanges(a,h){this.anyCaseAdd?(h.setTime(Th.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0412\u041b\u044e\u0431\u043e\u043c\u0421\u043b\u0443\u0447\u0430\u0435(h.time,a)),h.setText(Th.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0412\u041b\u044e\u0431\u043e\u043c\u0421\u043b\u0443\u0447\u0430\u0435(h.text,a))):(h.setTime(Th.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(h.time,a)),h.setText(Th.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(h.text,a))),h.setServiceColor(a),this.onTextChanged("")}onTextChanged(a){this.autoSave&&this.onSaveServices()}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(on),B(go),B(Sg))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-services"]],inputs:{data:"data",clerics:"clerics",vertical:"vertical",singleRang:"singleRang",autoSave:"autoSave",clearBtn:"clearBtn",serviceDesc:"serviceDesc",timeDesc:"timeDesc",clericInfo:"clericInfo",anyCaseAdd:"anyCaseAdd",services:"services"},outputs:{onSave:"onSave",onClear:"onClear",onReset:"onReset"},decls:35,vars:9,consts:[[3,"ngClass"],[3,"rang","rangChanged",4,"ngIf"],["class","clr-row cursor clr-hidden-xs-down",4,"ngFor","ngForOf"],["class","clr-row cursor clr-hidden-sm-up",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","clr-row",4,"ngIf"],[3,"rang","rangChanged"],[1,"clr-row","cursor","clr-hidden-xs-down"],[3,"object","fieldName","description","shapes","command","changed"],[1,"clr-col-12","top-space"],[3,"text","clerics","info","clericsChanged",4,"ngIf"],[3,"text","colorChanged"],[3,"text","clerics","info","clericsChanged"],[1,"clr-row","cursor","clr-hidden-sm-up"],[3,"text","clerics","clericsChanged",4,"ngIf"],[3,"text","clerics","clericsChanged"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"clr-row"],[1,"clr-col-8"],[1,"clr-col-4"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Fct,1,1,"app-dynamic-scheduler-rangs",1),X(2,Vct,9,24,"div",2),X(3,Uct,9,20,"div",3),I(4,"div",4)(5,"button",5),ee("click",function(){return h.onAddNewService()}),ue(6,"clr-icon",6),ie(7," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),F(),X(8,Hct,3,1,"button",7),X(9,$ct,3,0,"button",8),F()(),I(10,"clr-modal",9),ee("clrModalOpenChange",function(f){return h.modalClearServicesFlag=f}),I(11,"h3",10),ie(12,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043b\u0443\u0436\u0431"),F(),I(13,"div",11)(14,"p"),ie(15,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043b\u0443\u0436\u0431\u044b \u0432\u0441\u0435\u0445 \u0437\u043d\u0430\u043a\u043e\u0432?"),F()(),I(16,"div",12)(17,"button",13),ee("click",function(){return h.onResetServices(),h.modalClearServicesFlag=!1}),ie(18,"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"),F(),I(19,"button",13),ee("click",function(){return h.onClearServices(),h.modalClearServicesFlag=!1}),ie(20,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F(),I(21,"button",14),ee("click",function(){return h.modalClearServicesFlag=!1}),ie(22,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F()()(),I(23,"clr-modal",9),ee("clrModalOpenChange",function(f){return h.modalDeleteServicesFlag=f}),I(24,"h3",10),ie(25,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u0443\u0436\u0431\u044b"),F(),I(26,"div",11)(27,"p"),ie(28,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0431\u0443?"),F(),X(29,Wct,5,2,"div",15),F(),I(30,"div",12)(31,"button",13),ee("click",function(){return h.deleteService(h.modalDeleteService),h.modalDeleteServicesFlag=!1}),ie(32,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F(),I(33,"button",14),ee("click",function(){return h.modalDeleteServicesFlag=!1}),ie(34,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F()()()),2&a&&(R("ngClass",h.getClasses()),P(1),R("ngIf",!h.singleRang),P(1),R("ngForOf",h.services),P(1),R("ngForOf",h.services),P(5),R("ngIf",!h.autoSave),P(1),R("ngIf",h.clearBtn),P(1),R("clrModalOpen",h.modalClearServicesFlag),P(13),R("clrModalOpen",h.modalDeleteServicesFlag),P(6),R("ngIf",h.modalDeleteService))},dependencies:[si,fi,_n,eo,Rf,Ff,FL,zL,Sct,C0e,w0e,Rct],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),c})();class JH{constructor(){}static builder(){return new JH}}class e9 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.week=[]}static builder(){return new e9("",null,null,JH.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setWeek(l){return this.week=l,this}}const M0e=function(c,l){return{btn:!0,"btn-primary":c,darkBtn:l}};function Qct(c,l){if(1&c){const a=at();I(0,"button",1),ee("click",function(d){const p=De(a).index;return ke(q().onToggleWeekIndex(d,p))}),ue(1,"clr-icon"),ie(2),F()}if(2&c){const a=l.$implicit,h=l.index,d=q();R("ngClass",as(3,M0e,a,!a)),P(1),et("shape",a?"check":"times"),P(1),Ti(" ",d.dayNames[h],"")}}let jct=(()=>{class c{constructor(){this.data=e9.builder(),this.weekChanged=new wt,this.dayNames=["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"]}get week(){return this.weekData.week}set week(a){this.weekData.week=a}get weekData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){for(;this.week.length<7;)this.week.push(!1)}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onToggleWeekIndex(a,h){a.stopPropagation(),this.week[h]=!this.week[h],this.weekChanged.emit(this.week)}onToggleAllDays(a){a.stopPropagation();let h=this.isAllDays();for(let d=0;d<this.week.length;d++)this.week[d]=!h;this.weekChanged.emit(this.week)}isAllDays(){return this.week.reduce((h,d)=>h&&d,!0)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-week"]],inputs:{data:"data",week:"week"},outputs:{weekChanged:"weekChanged"},decls:4,vars:6,consts:[[3,"ngClass"],[3,"ngClass","click"],["shape","lightbulb"],[3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"button",1),ee("click",function(f){return h.onToggleAllDays(f)}),ue(2,"clr-icon",2),F(),X(3,Qct,3,6,"button",3),F()),2&a&&(R("ngClass",h.getClasses()),P(1),R("ngClass",as(3,M0e,h.isAllDays(),!h.isAllDays())),P(2),R("ngForOf",h.week))},dependencies:[si,fi,eo],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),c})();const qct=function(){return["add-text","upload","download","times"]};function Zct(c,l){if(1&c){const a=at();I(0,"div",15)(1,"div",16)(2,"app-dynamic-text-editor",17),ee("changed",function(d){return De(a),ke(q().onTextChanged(d))}),F()(),I(3,"app-dynamic-scheduler-week",18),ee("weekChanged",function(d){return De(a),ke(q().onWeekChanged(d))}),F()()}if(2&c){const a=l.$implicit,h=q();P(2),R("object",a)("fieldName","name")("description",h.clerikDesc)("shapes",Ll(6,qct))("command",h.onCommandServiceTogglePtr),P(1),R("week",a.week)}}function Xct(c,l){if(1&c){const a=at();I(0,"button",19),ee("click",function(){return De(a),ke(q().onSaveServices())}),ue(1,"clr-icon",20),ie(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),F()}2&c&&R("clrLoading",q().submitBtnState)}function Yct(c,l){if(1&c&&(I(0,"p"),ie(1),F()),2&c){const a=q();P(1),Ti("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",a.modalDeleteService.name," ?")}}let Kct=(()=>{class c{constructor(a,h,d,f){this.uiConfig=a,this.config=h,this.themes=d,this.mathSvc=f,this.autoSave=!1,this.clerikDesc="\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a",this.onSave=new wt,this.onClear=new wt,this.submitBtnState=Ds.DEFAULT,this.modalClearServicesFlag=!1,this.modalDeleteServicesFlag=!1,this.modalDeleteService=null,this.onCommandServiceTogglePtr=(p,g,m)=>this.onCommandServiceToggle(p,g,m)}get clerics(){return this.clericsData.clerics}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(a){this.uiConfig.ui.calendarText.setStringValue(a)}get clericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(a,h,d){if("name"==h)switch(d){case"upload":this.moveUp(a);break;case"download":this.moveDown(a);break;case"times":this.requestDeleteService(a);break;case"add-text":this.addNewAfterService(a)}}onAddNewService(){this.clerics.push(d2.builder()),this.startAutoSave()}onSaveServices(){this.onSave.emit(this.clericsData.clerics),this.submitBtnState=Ds.LOADING,this.config.post(()=>{this.submitBtnState=Ds.DEFAULT},2e3)}moveUp(a){let h=this.clerics.indexOf(a);h>0&&(this.clerics[h]=this.clerics[h-1],this.clerics[h-1]=a,this.startAutoSave())}moveDown(a){let h=this.clerics.indexOf(a);h+1<this.clerics.length&&(this.clerics[h]=this.clerics[h+1],this.clerics[h+1]=a,this.startAutoSave())}deleteCleric(a){if(null==a)return;let h=this.clerics.indexOf(a);h>=0&&(this.clerics.splice(h,1),this.startAutoSave())}addNewAfterService(a){let h=this.clerics.indexOf(a);h>=0&&h<this.clerics.length&&(this.clerics.splice(h+1,0,d2.builder()),this.startAutoSave())}onClearServices(){this.onClear.emit(this.clericsData.clerics),this.startAutoSave()}requestDeleteService(a){this.modalDeleteService=a,this.modalDeleteServicesFlag=!0}startAutoSave(){this.autoSave&&this.onSave.emit(this.clerics)}onTextChanged(a){this.startAutoSave()}onWeekChanged(a){this.startAutoSave()}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(on),B(go),B(Sg))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-clerics"]],inputs:{data:"data",autoSave:"autoSave",clerikDesc:"clerikDesc"},outputs:{onSave:"onSave",onClear:"onClear"},decls:31,vars:6,consts:[[3,"ngClass"],["class","clr-row cursor",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"clr-row","cursor"],[1,"clr-col-12","bottom-space"],[3,"object","fieldName","description","shapes","command","changed"],[3,"week","weekChanged"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Zct,4,7,"div",1),I(2,"div",2)(3,"button",3),ee("click",function(){return h.onAddNewService()}),ue(4,"clr-icon",4),ie(5," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),F(),X(6,Xct,3,1,"button",5),I(7,"button",6),ee("click",function(){return h.modalClearServicesFlag=!0}),ue(8,"clr-icon",7),ie(9," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()()(),I(10,"clr-modal",8),ee("clrModalOpenChange",function(f){return h.modalClearServicesFlag=f}),I(11,"h3",9),ie(12,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432"),F(),I(13,"div",10)(14,"p"),ie(15,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0435\u0441\u044c \u0441\u043f\u0438\u0441\u043e\u043a?"),F()(),I(16,"div",11)(17,"button",12),ee("click",function(){return h.onClearServices(),h.modalClearServicesFlag=!1}),ie(18,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F(),I(19,"button",13),ee("click",function(){return h.modalClearServicesFlag=!1}),ie(20,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F()()(),I(21,"clr-modal",8),ee("clrModalOpenChange",function(f){return h.modalDeleteServicesFlag=f}),I(22,"h3",9),ie(23,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438 \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0430"),F(),I(24,"div",10),X(25,Yct,2,1,"p",14),F(),I(26,"div",11)(27,"button",12),ee("click",function(){return h.deleteCleric(h.modalDeleteService),h.modalDeleteServicesFlag=!1}),ie(28,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F(),I(29,"button",13),ee("click",function(){return h.modalDeleteServicesFlag=!1}),ie(30,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F()()()),2&a&&(R("ngClass",h.getClasses()),P(1),R("ngForOf",h.clerics),P(5),R("ngIf",!h.autoSave),P(4),R("clrModalOpen",h.modalClearServicesFlag),P(11),R("clrModalOpen",h.modalDeleteServicesFlag),P(4),R("ngIf",h.modalDeleteService))},dependencies:[si,fi,_n,eo,Rf,Ff,FL,zL,C0e,jct],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),c})();function Jct(c,l){if(1&c){const a=at();I(0,"clr-radio-wrapper")(1,"input",39),ee("ngModelChange",function(d){return De(a),ke(q().currentSettingsName=d)}),F(),I(2,"label"),ie(3),F()()}if(2&c){const a=l.$implicit,h=q();P(1),R("name","settings")("value",a.name)("ngModel",h.currentSettingsName),P(2),Ut(a.name)}}function eut(c,l){if(1&c){const a=at();I(0,"button",40),ee("click",function(d){return De(a),ke(q().onDeleteCurrentSettings(d))}),ie(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c "),F()}}function tut(c,l){if(1&c){const a=at();I(0,"clr-accordion-content")(1,"app-dynamic-scheduler-clerics",41),ee("onSave",function(d){return De(a),ke(q().onSaveClerics(d))})("onClear",function(d){return De(a),ke(q().onClearClerics(d))}),F()()}if(2&c){const a=q();P(1),R("data",a.clerics)("autoSave",!0)("clerikDesc",2==a.fullSchedulerInfoType?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a")}}function nut(c,l){if(1&c){const a=at();I(0,"clr-accordion-content")(1,"app-dynamic-scheduler-services",42),ee("onSave",function(d){return De(a),ke(q().onSaveServices(d))})("onClear",function(d){return De(a),ke(q().onClearServices(d,!0))})("onReset",function(d){return De(a),ke(q().onClearServices(d,!1))}),F()()}if(2&c){const a=q();P(1),R("data",a.services)("autoSave",!0)("serviceDesc",2==a.fullSchedulerInfoType?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")}}function iut(c,l){if(1&c){const a=at();I(0,"div",48)(1,"div",20)(2,"form",49)(3,"div",50)(4,"textarea",79),ee("ngModelChange",function(d){return ke(De(a).$implicit.text=d)}),F()(),I(5,"span",52),ie(6),F()()()()}if(2&c){const a=l.$implicit;P(4),R("ngModel",a.text),P(2),Ut(a.info)}}function rut(c,l){if(1&c){const a=at();I(0,"div",48)(1,"div",20)(2,"form",49)(3,"div",50)(4,"textarea",80),ee("ngModelChange",function(d){return ke(De(a).$implicit.text=d)}),F()(),I(5,"span",52),ie(6),F()()()()}if(2&c){const a=l.$implicit;P(4),R("ngModel",a.text),P(2),Ut(a.info)}}function sut(c,l){if(1&c){const a=at();I(0,"div",48)(1,"div",20)(2,"form",49)(3,"div",50)(4,"textarea",81),ee("ngModelChange",function(d){return ke(De(a).$implicit.text=d)}),F()(),I(5,"span",52),ie(6),F()()()()}if(2&c){const a=l.$implicit;P(4),R("ngModel",a.text),P(2),Ut(a.info)}}function out(c,l){1&c&&ue(0,"app-svg-js-image",82),2&c&&R("data",q(2).getMainPage(!1).imageData)}function aut(c,l){1&c&&ue(0,"app-svg-js-image",82),2&c&&R("data",q(2).getMainPage(!1).imageData)}function lut(c,l){if(1&c){const a=at();I(0,"clr-accordion-content")(1,"div",43)(2,"div",44)(3,"div",45)(4,"span")(5,"app-dynamic-scheduler-calendar",46),ee("change",function(d){return De(a),ke(q().onCalendarChanged(d))}),F()()()(),I(6,"div",47)(7,"div",48)(8,"div",20)(9,"form",49)(10,"div",50)(11,"textarea",51),ee("ngModelChange",function(d){return De(a),ke(q().textDay.text=d)}),F()(),I(12,"span",52),ie(13),F()()()()(),I(14,"div",53)(15,"div",48)(16,"div",20)(17,"form",49)(18,"div",50)(19,"textarea",54),ee("ngModelChange",function(d){return De(a),ke(q().textHoliday.text=d)}),F()(),I(20,"span",52),ie(21),F()()()()(),I(22,"div",20)(23,"app-dynamic-scheduler-services",55),ee("onSave",function(d){return De(a),ke(q().onSaveDayServices(d))})("onClear",function(d){return De(a),ke(q().onClearDayServices(d))}),F()()(),I(24,"div",56)(25,"div",20)(26,"div",45)(27,"span")(28,"app-dynamic-scheduler-calendar",46),ee("change",function(d){return De(a),ke(q().onCalendarChanged(d))}),F()()()(),I(29,"div",44)(30,"div",48)(31,"div",20)(32,"form",49)(33,"div",50)(34,"textarea",57),ee("ngModelChange",function(d){return De(a),ke(q().textDay.text=d)}),F()(),I(35,"span",52),ie(36),F()()()()(),I(37,"div",44)(38,"div",48)(39,"div",20)(40,"form",49)(41,"div",50)(42,"textarea",58),ee("ngModelChange",function(d){return De(a),ke(q().textHoliday.text=d)}),F()(),I(43,"span",52),ie(44),F()()()()(),I(45,"div",20)(46,"app-dynamic-scheduler-services",59),ee("onSave",function(d){return De(a),ke(q().onSaveDayServices(d))})("onClear",function(d){return De(a),ke(q().onClearDayServices(d))}),F()()(),I(47,"div",60)(48,"div",20)(49,"div",45)(50,"span")(51,"app-dynamic-scheduler-calendar",46),ee("change",function(d){return De(a),ke(q().onCalendarChanged(d))}),F()()()(),I(52,"div",20)(53,"div",48)(54,"div",20)(55,"form",49)(56,"div",50)(57,"textarea",61),ee("ngModelChange",function(d){return De(a),ke(q().textDay.text=d)}),F()(),I(58,"span",52),ie(59),F()()()()(),I(60,"div",20)(61,"div",48)(62,"div",20)(63,"form",49)(64,"div",50)(65,"textarea",62),ee("ngModelChange",function(d){return De(a),ke(q().textHoliday.text=d)}),F()(),I(66,"span",52),ie(67),F()()()()(),I(68,"div",20)(69,"app-dynamic-scheduler-services",59),ee("onSave",function(d){return De(a),ke(q().onSaveDayServices(d))})("onClear",function(d){return De(a),ke(q().onClearDayServices(d))}),F()(),I(70,"div",63)(71,"app-dynamic-scheduler-rangs",64),ee("rangChanged",function(d){return De(a),ke(q().onSelectDayRang(d))}),F()(),I(72,"div",20)(73,"app-dynamic-scheduler-prazdniki",65),ee("onSelected",function(d){return De(a),ke(q().onSelectPrazdnik(d))}),F()()(),I(74,"div",66)(75,"div",67)(76,"div",48)(77,"div",20)(78,"div",7)(79,"app-dynamic-scheduler-rangs",64),ee("rangChanged",function(d){return De(a),ke(q().onSelectDayRang(d))}),F()(),I(80,"div",68)(81,"app-dynamic-scheduler-prazdniki",65),ee("onSelected",function(d){return De(a),ke(q().onSelectPrazdnik(d))}),F()()()(),X(82,iut,7,2,"div",69),I(83,"div",70)(84,"div",20)(85,"button",71),ee("click",function(){return De(a),ke(q().modalClearSchedulerFlag=!0)}),ie(86,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()()()(),I(87,"div",72)(88,"div",48)(89,"div",20)(90,"div",7)(91,"app-dynamic-scheduler-rangs",64),ee("rangChanged",function(d){return De(a),ke(q().onSelectDayRang(d))}),F()(),I(92,"div",73)(93,"app-dynamic-scheduler-prazdniki",65),ee("onSelected",function(d){return De(a),ke(q().onSelectPrazdnik(d))}),F()()()(),X(94,rut,7,2,"div",69),I(95,"div",70)(96,"div",20)(97,"button",74),ee("click",function(){return De(a),ke(q().modalClearSchedulerFlag=!0)}),ie(98,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()()()(),I(99,"div",75),X(100,sut,7,2,"div",69),I(101,"div",70)(102,"div",20)(103,"button",74),ee("click",function(){return De(a),ke(q().modalClearSchedulerFlag=!0)}),ie(104,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()()()(),I(105,"div",76),X(106,out,1,1,"app-svg-js-image",77),F(),I(107,"div",78),X(108,aut,1,1,"app-svg-js-image",77),F()()()}if(2&c){const a=q();P(5),R("showDates",!0)("uniqueDateString",a.currentDate)("useUniqueDate",!0),P(6),R("ngModel",a.textDay.text),P(2),Ut(a.textDay.info),P(6),R("ngModel",a.textHoliday.text),P(2),Ut(a.textHoliday.info),P(2),R("data",a.dayServices)("singleRang",!0)("clerics",a.clerics.clerics)("autoSave",!0)("clearBtn",!1)("serviceDesc",2==a.fullSchedulerInfoType?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")("clericInfo",2==a.fullSchedulerInfoType?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u043b\u0443\u0436\u0438\u0442"),P(5),R("showDates",!0)("uniqueDateString",a.currentDate)("useUniqueDate",!0),P(6),R("ngModel",a.textDay.text),P(2),Ut(a.textDay.info),P(6),R("ngModel",a.textHoliday.text),P(2),Ut(a.textHoliday.info),P(2),R("data",a.dayServices)("singleRang",!0)("vertical",!0)("clerics",a.clerics.clerics)("autoSave",!0)("clearBtn",!1)("serviceDesc",2==a.fullSchedulerInfoType?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")("clericInfo",2==a.fullSchedulerInfoType?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u043b\u0443\u0436\u0438\u0442"),P(5),R("showDates",!0)("uniqueDateString",a.currentDate)("useUniqueDate",!0),P(6),R("ngModel",a.textDay.text),P(2),Ut(a.textDay.info),P(6),R("ngModel",a.textHoliday.text),P(2),Ut(a.textHoliday.info),P(2),R("data",a.dayServices)("singleRang",!0)("vertical",!0)("clerics",a.clerics.clerics)("autoSave",!0)("clearBtn",!1)("serviceDesc",2==a.fullSchedulerInfoType?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")("clericInfo",2==a.fullSchedulerInfoType?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u043b\u0443\u0436\u0438\u0442"),P(2),R("rang",a.dayRang),P(2),R("data",a.prazdnikiData),P(6),R("rang",a.dayRang),P(2),R("data",a.prazdnikiData),P(1),R("ngForOf",a.editors),P(9),R("rang",a.dayRang),P(2),R("data",a.prazdnikiData),P(1),R("ngForOf",a.editors),P(6),R("ngForOf",a.editors),P(6),R("ngIf",!(null==a.previewPage||!a.previewPage.imageData)),P(2),R("ngIf",!(null==a.previewPage||!a.previewPage.imageData))}}function cut(c,l){if(1&c){const a=at();I(0,"div",44)(1,"button",21),ee("click",function(){return De(a),ke(q().onCopyPermanentLink())}),ie(2," \u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 "),F()()}}function uut(c,l){if(1&c){const a=at();I(0,"app-svg-js-image",83),ee("pagesCount",function(d){return De(a),ke(q().setPagesCount(d))})("svg",function(d){De(a);const f=q();return ke(f.saveSvg(d,f.getMainPage()))}),F()}2&c&&R("data",q().getMainPage().imageData)}function hut(c,l){if(1&c){const a=at();I(0,"div")(1,"app-svg-js-image",84),ee("svg",function(d){const p=De(a).$implicit;return ke(q().saveSvg(d,p))}),F()()}if(2&c){const a=l.$implicit;P(1),R("data",a.imageData)}}function dut(c,l){if(1&c){const a=at();I(0,"button",38),ee("click",function(){return De(a),ke(q().onSaveCurrentSettings())}),ie(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),F()}}const fut=function(){return{alert:!0,"alert-warning":!1,"alert-success":!0,"top-space":!1}};class Hg{constructor(l,a,h){this.info=a,this.onChange=h,this.sText=""}static builder(){return new Hg("","",null)}changed(){this.onChange&&this.onChange()}get text(){return this.sText}set text(l){this.setText(l)}setText(l,a=!0){return this.sText!=l&&(this.sText=l,a&&this.changed()),this}setInfo(l){return this.info=l,this}setOnChange(l){return this.onChange=l,this}}class p2{constructor(l,a,h,d,f,p,g,m){this.\u0440\u0430\u043d\u0433=l,this.\u0434\u0435\u043d\u044c=a,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=h,this.\u0441\u043b\u0443\u0436\u0431\u0430=d,this.\u0432\u0440\u0435\u043c\u044f=f,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=p,this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=g,this.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431=m}static \u043d\u043e\u0432\u044b\u0439(){return new p2(1,"","","","",[],"","")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(l){return this.\u0440\u0430\u043d\u0433=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(l){return this.\u0434\u0435\u043d\u044c=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(l){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(l){return this.\u0441\u043b\u0443\u0436\u0431\u0430=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(l){return this.\u0432\u0440\u0435\u043c\u044f=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(l){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(l){return this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(l){return this.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431=l,this}}class A0e{constructor(l,a){this.config=l,this.onUpdate=a,this.id=0,this.calling=0}nextId(){return++this.id,this}changed(){return this.calling&&this.requestForUpdate(),this}requestForUpdate(){this.nextId();let l=this.id;if(!this.calling)return++this.calling,this.config.post(()=>{l==this.id&&this.onUpdate?(this.onUpdate(),--this.calling):(--this.calling,this.requestForUpdate())},3e3),this}}var tc=(()=>(function(c){c[c.Short=0]="Short",c[c.Full=1]="Full",c[c.State=2]="State"}(tc||(tc={})),tc))();class $g{constructor(l,a){this.imageData=l,this.pageIndex=a}static builder(){return new $g(null,-1)}setImageData(l){return this.imageData=l,this}setPageIndex(l){return this.pageIndex=l,this}}let put=(()=>{class c{constructor(a,h,d,f,p,g,m){this.uiConfig=a,this.config=h,this.themes=d,this.mathSvc=f,this.ks=p,this.calendarSettingsSvc=g,this.calendarPrazdnikiSvc=m,this.mainPage=$g.builder(),this.extraPages=[],this.previewPage=$g.builder(),this.previewExtraPages=[],this.days=[],this.clerics=zI.builder(),this.services=tv.builder(),this.dayServices=tv.builder(),this.dayRang=1,this.fullSchedulerInfoType=tc.Full,this.textDay=Hg.builder().setText("1{\u0437}").setInfo("\u0414\u0435\u043d\u044c").setOnChange(()=>this.onTextChanged()),this.textHoliday=Hg.builder().setText("\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}").setInfo("\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a").setOnChange(()=>this.onTextChanged()),this.textService=Hg.builder().setText("\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421").setInfo("\u0421\u043b\u0443\u0436\u0431\u0430").setOnChange(()=>this.onTextChanged()),this.textTime=Hg.builder().setText("8.40{\u0437}\n{1}\n17.00").setInfo("\u0412\u0440\u0435\u043c\u044f").setOnChange(()=>this.onTextChanged()),this.textHeader=Hg.builder().setText("\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}").setInfo("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a").setOnChange(()=>this.onTextChanged()),this.textFooter=Hg.builder().setText("{1}\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223").setInfo("\u041f\u043e\u0434\u0432\u0430\u043b").setOnChange(()=>this.onTextChanged()),this.currentDate="01.02.2022",this.prazdnikiData=VI.builder(),this.editors=[this.textHeader,this.textFooter],this.requestForGeneratingScheduler=!1,this.generatingScheduler=!1,this.schedulerPagesCount=0,this.shortScheduler="01.01.2022\r\n==\r\n{1}\r\n==\r\n{1}",this.fullScheduler="01.01.2022\r\n==\r\n{1}\r\n==\r\n{1}",this.updater=null,this.dateUpdater=null,this.modalClearSchedulerFlag=!1,this.modalSaveSettingsFlag=!1,this.modalDeleteSettingsFlag=!1,this.modalAddSettingsFlag=!1,this.settings=[],this.pCurrentSettingsName=new vct("\u0418\u043c\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a","\u0438\u043c\u044f",this,"currentSettingsName",null),this.svgs=null,this.onTextChangedEnabled=!0;let v=new Date;this.currentDate=v.getDate()+"."+(v.getMonth()+1)+"."+v.getFullYear(),this.updater=new A0e(this.config,()=>this.generateAllSchedulers()),this.dateUpdater=new A0e(this.config,()=>this.modalClearSchedulerFlag=!0)}get currentSettingsName(){return this.uiConfig.ui.schedulerCurrentSettingsName.getStringValue()}set currentSettingsName(a){this.uiConfig.ui.schedulerCurrentSettingsName.setStringValue(a),this.setCurrentSettings(a)}get formulaText(){return this.uiConfig.ui.schedulerSourceText.getStringValue()}set formulaText(a){this.uiConfig.ui.schedulerSourceText.setStringValue(a)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}currentDayOfMonth(){return+this.currentDate.split(".")[0]}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onLoadSettingsDefault()}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}setPagesCount(a){this.extraPages=[];for(let h=1;h<a;h++)this.extraPages.push($g.builder().setPageIndex(h).setImageData(Va.builder().setScene("/scenes/scheduler.scene.txt").setGenName("Js").setType(2==this.fullSchedulerInfoType?297210:1).setSvgWidth(2==this.fullSchedulerInfoType?297:210).setSvgHeight(2==this.fullSchedulerInfoType?210:297).setLogoText(2==this.fullSchedulerInfoType?"\u0448\u0442\u0430\u0442\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":1==this.fullSchedulerInfoType?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setSchedulerText(this.createScheduler(!0)).setStartPageIndex(h).setShowFooter(!1)));this.schedulerPagesCount=a}onCalendarChanged(a){if(this.currentDate==a)return;let h=this.currentDate.split("."),d=a.split(".");this.currentDate=a,this.config.post(()=>{this.startEditDate(),this.requestClearScheduler(h[1]!=d[1]||h[2]!=d[2])},10)}onTextChanged(a=!1){if(!this.onTextChangedEnabled)return;let h=this.days[this.currentDayOfMonth()-1];h&&(h.\u0440\u0430\u043d\u0433=this.dayRang,h.\u0434\u0435\u043d\u044c=this.textDay.text,h.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=this.textHoliday.text,h.\u0441\u043b\u0443\u0436\u0431\u0430=this.textService.text,h.\u0432\u0440\u0435\u043c\u044f=this.textTime.text,this.onDayServicesSync()),a?this.updater&&this.updater.onUpdate():this.updater&&this.updater.requestForUpdate()}createScheduler(a=!1){return a?this.fullScheduler:this.shortScheduler}generateAllSchedulers(){this.generatingScheduler?this.requestForGeneratingScheduler=!0:(this.generatingScheduler=!0,this.shortScheduler=this.generateSchedulers(),this.fullScheduler=this.generateSchedulers(!0),this.uiConfig.ui.schedulerText.setStringValue(this.fullScheduler),this.svgs=[],this.schedulerPagesCount=0,this.extraPages=[],this.mainPage=$g.builder(),this.getMainPage(),this.previewPage=$g.builder(),this.getMainPage(!1))}convertAllClericsByColors(a,h){let d=h.split("\n").map(f=>f.trim());return a.split("\n").map(f=>f.trim()).map((f,p)=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(f,"")+d[p]).join("\r\n")}convertAllClerics(a){let h=["\u043a","\u0441","\u0437","\u0444","\u043f","\u043c","\u043b","\u0440"];return a.split("\n").map(d=>d.trim()).map(d=>{let f=d.split(",").map(g=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(g,"")),p=0;return f.length&&this.clerics.clerics.forEach((g,m)=>{g.name==f[0]&&(p=m)}),f.length>1&&f.length==this.clerics.clerics.length?"\u0412\u0421\u0415{\u043a}":this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(d,"")+"{"+h[(1+p)%h.length]+"}"}).join("\r\n")}removeUnneededServices(a,h=""){let d=(h||a).split("\n");return a.split("\n").map(f=>f.trim()).filter((f,p)=>this.fullSchedulerInfoType==tc.Full||!d[p].includes("{\u0442}")).join("\r\n")}generateSchedulers(a=!1,h=!0){let d=this.currentDate,f="\n==\n",p="\n--\n";return d+=f,d+=this.fullSchedulerInfoType,d+=f,d+=this.textHeader.text,d+=f,a?d+=this.fullSchedulerInfoType==tc.State?this.days.map(g=>h&&!g.\u0441\u043b\u0443\u0436\u0431\u0430?"":g.\u0440\u0430\u043d\u0433+p+g.\u0434\u0435\u043d\u044c+p+this.removeUnneededServices(g.\u0432\u0440\u0435\u043c\u044f)+p+this.removeUnneededServices(g.\u0441\u043b\u0443\u0436\u0431\u0430)+p+this.removeUnneededServices(2==this.fullSchedulerInfoType?this.convertAllClericsByColors(g.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438,this.getServicesColorsText(g.\u0441\u043b\u0443\u0436\u0431\u0430)):this.convertAllClerics(g.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438),g.\u0432\u0440\u0435\u043c\u044f)+p+g.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a.toUpperCase()+p+g.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431+f).reduce((g,m)=>g+m,""):this.days.map(g=>h&&!g.\u0441\u043b\u0443\u0436\u0431\u0430?"":g.\u0440\u0430\u043d\u0433+"\r\n---------------------\r\n"+g.\u0434\u0435\u043d\u044c+"\r\n---------------------\r\n"+g.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a.toUpperCase()+"\r\n---------------------\r\n"+this.removeUnneededServices(g.\u0441\u043b\u0443\u0436\u0431\u0430)+"\r\n---------------------\r\n"+this.removeUnneededServices(g.\u0432\u0440\u0435\u043c\u044f)+"\r\n---------------------\r\n"+this.removeUnneededServices(this.convertAllClerics(g.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438),g.\u0432\u0440\u0435\u043c\u044f)+"\r\n---------------------\r\n"+g.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431+"\r\n=====================\r\n").reduce((g,m)=>g+m,""):this.fullSchedulerInfoType==tc.State?(d+=this.dayRang,d+="\r\n---------------------\r\n",d+=this.textDay.text,d+="\r\n---------------------\r\n",d+=this.textTime.text,d+="\r\n---------------------\r\n",d+=this.textService.text,d+="\r\n---------------------\r\n",d+=2==this.fullSchedulerInfoType?this.getDayClericsWithServiceColors():this.convertAllClerics(this.getDayClericsWithServiceColors()),d+="\r\n---------------------\r\n",d+=this.textHoliday.text,d+="\r\n=====================\r\n"):(d+=this.dayRang,d+="\r\n---------------------\r\n",d+=this.textDay.text,d+="\r\n---------------------\r\n",d+=this.textHoliday.text,d+="\r\n---------------------\r\n",d+=this.textService.text,d+="\r\n---------------------\r\n",d+=this.textTime.text,d+="\r\n---------------------\r\n",d+=this.convertAllClerics(this.getDayClerics()),d+="\r\n=====================\r\n"),d+=this.textFooter.text,d}requestClearScheduler(a=!0){a?this.dateUpdater&&this.dateUpdater.requestForUpdate():this.dateUpdater&&this.dateUpdater.changed()}onClearScheduler(){this.calendarPrazdnikiSvc.load().then(a=>{this.onClearSchedulerRaw()})}breakLines(a,h){let f=a.split(" "),p="",g=0;for(let m=0;m<f.length;++m){g>=39&&(p+="\r\n",g=0);let v=f[m];v.length+g+(g>0?1:0)>39?0==g?(p+=h,p+=v,p+="\r\n",g=0):(p+="\r\n"+h,p+=v,g=v.length):(g>0?(p+=" ",g+=1):p+=h,p+=v,g+=v.length)}return p}\u0443\u0431\u0440\u0430\u0442\u044c\u0412\u0441\u0435\u041c\u0430\u0440\u043a\u0435\u0440\u044b(a){let h=/\{[a-z\u0430-\u044fA-Z\u0410-\u042f0-9]\}/g;return a.split("\r\n").map(d=>d.includes("\u0442")?d:d.replace(h,"")).map(d=>d.trim()).join("\r\n")}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(a,h){return Th.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(a,h)}getClericsForDayOfWeek(a){return this.clerics.clerics.filter(d=>d.week[a]).map(d=>d.name).join(",")}getRangServices(a){let h=this.services.services[a-1];return null==h&&(h=[]),h}getServicesColorsText(a){return a.split("\n").map(h=>Th.getTextColor(h)).join("\n")}getServiceColor(a,h){return a.requiredService?"{\u043f}":h}onClearSchedulerRaw(){let a=this.currentDate.split("."),d=+a[1],f=+a[2];this.days=[];for(let g=1;g<=31;g++){let m=new Date;if(m.setDate(1),m.setFullYear(f),m.setMonth(d-1,g),m.getMonth()+1!=d)break;let v=m.getDay(),_=g+"\r\n"+["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"][v],b=this.calendarPrazdnikiSvc.getPrazdnikiFor(f,d-1,g),C=b.length?b[0]:ev.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430"),x=0==v?6:0,S=C.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(x),w=this.breakLines(C.text,S),T=this.getRangServices(C.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(x)),O=this.getClericsForDayOfWeek(v?v-1:v+6),k=new Date;k.setDate(1),k.setFullYear(f),k.setMonth(d-1,g+1);let D=k.getDay(),M=this.calendarPrazdnikiSvc.getPrazdnikiFor(f,k.getMonth(),k.getDate()),L=0==D?6:0,E=(M.length?M[0]:ev.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430")).\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(L),V=this.getRangServices(C.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(L)),z=T.filter(N=>N.morningService).map(N=>N.getNormalizedText()+this.getServiceColor(N,S)).map(N=>N||"{1}").concat(V.filter(N=>!N.morningService).map(N=>N.getNormalizedText()+this.getServiceColor(N,E)).map(N=>N||"{1}")).join("\r\n"),U=T.filter(N=>N.morningService).map(N=>N.getNormalizedTime()+this.getServiceColor(N,S)).map(N=>N||"{1}").concat(V.filter(N=>!N.morningService).map(N=>N.getNormalizedTime()+this.getServiceColor(N,E)).map(N=>N||"{1}")).join("\r\n"),Z=T.filter(N=>N.morningService).map(N=>this.getServiceColor(N,S)).map(N=>N||"{1}").concat(V.filter(N=>!N.morningService).map(N=>this.getServiceColor(N,E)).map(N=>N||"{1}")).join("\r\n");_=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(_,S);let Y=U.split("\n").map(N=>this.\u0443\u0431\u0440\u0430\u0442\u044c\u0412\u0441\u0435\u041c\u0430\u0440\u043a\u0435\u0440\u044b(N).trim()).map(N=>N?O:"").join("\r\n");this.days.push(p2.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(C.rang).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(_).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(w).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(z).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(U).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(b).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(Y).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(Z))}this.textHeader.setText(`\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n${["\u042f \u041d \u0412 \u0410 \u0420 \u042c","\u0424 \u0415 \u0412 \u0420 \u0410 \u041b \u042c","\u041c \u0410 \u0420 \u0422","\u0410 \u041f \u0420 \u0415 \u041b \u042c","\u041c \u0410 \u0419","\u0418 \u042e \u041d \u042c","\u0418 \u042e \u041b \u042c","\u0410 \u0412 \u0413 \u0423 \u0421 \u0422","\u0421 \u0415 \u041d \u0422 \u042f \u0411 \u0420 \u042c","\u041e \u041a \u0422 \u042f \u0411 \u0420 \u042c","\u041d \u041e \u042f \u0411 \u0420 \u042c","\u0414 \u0415 \u041a \u0410 \u0411 \u0420 \u042c"][d-1]}{\u043a}`,!1),this.config.post(()=>this.startEditDate(!0))}parserScheduler(a){this.svgs=[];let h=a.split(/==+/).map(d=>d.trim());this.currentDate=h[0],this.fullSchedulerInfoType=+h[1],this.textHeader.setText(h[2],!1),this.textFooter.setText(h[h.length-1],!1),this.days=[];for(let d=3;d+1<h.length;++d){let p=h[d].split(/--+/),g=m=>m<p.length?p[m].trim():"";this.days.push(2==this.fullSchedulerInfoType?p2.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(+g(0)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(g(1)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(g(2)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(g(3)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(g(4)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(g(5)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(g(6)):p2.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(+g(0)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(g(1)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(g(2)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(g(3)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(g(4)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(g(5)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(g(6)))}this.startEditDate()}startEditDate(a=!1){let h=this.days[this.currentDayOfMonth()-1];this.dayRang=h.\u0440\u0430\u043d\u0433,this.textDay.setText(h?h.\u0434\u0435\u043d\u044c:"",!1),this.textHoliday.setText(h?h.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a:"",!1),this.textService.setText(h?h.\u0441\u043b\u0443\u0436\u0431\u0430:"",!1),this.textTime.setText(h?h.\u0432\u0440\u0435\u043c\u044f:"",!1);let d=this.currentDate.split("."),f=+d[0],p=+d[1],g=+d[2];this.calendarPrazdnikiSvc.load().then(m=>{let v=this.calendarPrazdnikiSvc.getPrazdnikiFor(g,p-1,f);this.prazdnikiData=VI.builder().setPrazdniki(v)}),this.onDayServicesSync(),this.onTextChanged(a)}onDayServicesSync(){let a=this.days[this.currentDayOfMonth()-1],h=a.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438.split("\n").map(g=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(g,"")).map(g=>g.trim()).map(g=>"\u0412\u0421\u0415"!=g?g:this.clerics.clerics.map(m=>m.name).join(",")),d=a.\u0432\u0440\u0435\u043c\u044f.split("\n").map(g=>g.trim());this.dayServices.services=[a.\u0441\u043b\u0443\u0436\u0431\u0430.split("\n").map(g=>g.trim()).map((g,m)=>I1.builder().setText(g).setTime((g=>g<d.length?d[g]:"")(m)).setMorningService(!g.includes("{\u0432}")).setRequiredService(g.includes("{\u0442}")).setSelectedClerics((g=>g<h.length?h[g]:"")(m)).setServiceColor(Th.getTextColor(g)))]}onPrint(){window.print()}setCurrentSettings(a){let h=this.settings.find(d=>d.name==a);!h||this.setCurrentSettingsDirect(h)}setCurrentSettingsDirect(a){this.parserScheduler(a.text)}getAllCurrentSettings(){let a={};return a.text=this.generateSchedulers(!0,!1),a}settingsFromString(a){try{return JSON.parse(a)}catch(h){}return[]}onSaveCurrentSettings(a=!0){let h=this.getAllCurrentSettings();h.name=this.pCurrentSettingsName.value;let d=!1;for(let f=0;f<this.settings.length;f++)this.settings[f].name==h.name&&(this.settings[f]=h,d=!0);!d&&a&&this.settings.push(h),this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.modalSaveSettingsFlag=!1}onLoadSettingsDefault(){this.config.post(()=>{this.onLoadSettingsDefaultRaw()})}onLoadSettingsDefaultRaw(){this.settings=this.settingsFromString(this.uiConfig.ui.schedulerAllVariants.getStringValue());let a="",h=!1;this.settings.forEach(d=>{d.name==this.currentSettingsName&&(h=!0),!a&&d.name&&(a=d.name)}),!h&&a&&(this.currentSettingsName=a),this.onLoadClericsOrDefault(),this.onLoadServicesOrDefault(),pageRequestedDoc?this.setCurrentSettings(Th.b64_to_utf8(pageRequestedDoc)):this.settings&&0!=this.settings.length?this.setCurrentSettings(this.currentSettingsName):this.onClearScheduler()}onLoadEmptyServices(){this.services=tv.builder().setServices([]),this.onSaveServices(this.services.services)}onLoadServicesOrDefault(a=!1){let h=this.uiConfig.ui.schedulerServices.getStringValue();(a||!h)&&(h="\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415|17.00|\u0432\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.|8.00|\u0443\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|8.40|\u0443\n\u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n    "),this.services=tv.builder().setServices(this.parserServices(h)),this.onSaveServices(this.services.services)}onLoadClericsOrDefault(a=!1){let h=this.uiConfig.ui.schedulerClerics.getStringValue();(a||!h)&&(h="\u043e. \u0418\u043c\u044f\u0420\u0435\u043a|false|true|false|true|false|true|true"),this.clerics=zI.builder().setClerics(this.parserClerics(h))}onDeleteCurrentSettings(a){this.modalDeleteSettingsFlag=!0}onDeleteCurrentSettingsDirect(a){let h=this.pCurrentSettingsName.value;for(let d=0;d<this.settings.length;d++)if(this.settings[d].name==h){this.settings.splice(d,1);break}this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.currentSettingsName="",this.onLoadSettingsDefault(),this.modalDeleteSettingsFlag=!1}onAddAllSettingsDirect(a){this.calendarSettingsSvc.getNames("","scheduler","/scheduler").then(h=>{let d=h.names;if(this.settings=[],null!=d&&d.length>0&&d[0].names.length>0){let f=p=>{p<d.length?this.calendarSettingsSvc.getSource(d[p].names[0],"").then(g=>{if(g){let m={};m.text=g,m.name=d[p].name,this.settings.push(m)}f(p+1)}):(this.onSaveCurrentSettings(!1),this.onLoadSettingsDefault(),this.modalAddSettingsFlag=!1)};f(0)}else this.modalAddSettingsFlag=!1})}onSave(a){this.modalSaveSettingsFlag=!0}onExport(a){let h=this.getAllCurrentSettings().text;const d=(new Date).toISOString().split("T")[0];if(this.config.isPlatformAndroid())this.ks.addTempFile("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.txt",h).then(p=>{jf.startDownload(p.fileName,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${d}.txt`)});else{const p=new TextEncoder,g=new Blob([p.encode(h)],{type:"octet/stream"});jf.saveData(g,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${d}.txt`)}}onImport(a){0!==a.target.files.length&&this.onImportFile(a.target.files[0])}onImportFile(a){if(!a)return;const h=new FileReader;h.onload=d=>{try{if(!h.result)throw new Error("FileReader is null.");let f=h.result.toString();this.parserScheduler(f)}catch(f){this.config.addAlert(Fr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+f,"OK",30))}},h.readAsText(a)}onSaveSvg(a=1){null==this.svgs||this.svgs.filter(h=>!!h).length==this.extraPages.length+1||a<=3&&this.config.post(()=>this.onSaveSvg(a+1),1e3)}saveSvg(a,h){if(!this.extraPages.includes(h)&&h!=this.getMainPage()||null==this.svgs)return;let f=h.pageIndex;for(;f+1>this.svgs.length;)this.svgs.push("");this.svgs[f]=a,this.svgs.filter(p=>!!p).length>=this.schedulerPagesCount&&(this.generatingScheduler=!1,this.requestForGeneratingScheduler&&(this.requestForGeneratingScheduler=!1,this.generateAllSchedulers()))}removeDayTask(a,h){return a.split("\n").map(f=>f.trim()).filter(f=>h==f.includes("{\u0432}")).join("\r\n")}updateRangServices(a,h){this.textService.text=this.replaceServices(this.textService.text,!0,a,h,f=>f.text),this.textTime.text=this.replaceServices(this.textTime.text,!0,a,h,f=>f.time);let d=this.currentDayOfMonth()-1;if(d>0){let f=this.days[d-1];f.\u0441\u043b\u0443\u0436\u0431\u0430=this.replaceServices(f.\u0441\u043b\u0443\u0436\u0431\u0430,!1,a,h,p=>p.text),f.\u0432\u0440\u0435\u043c\u044f=this.replaceServices(f.\u0432\u0440\u0435\u043c\u044f,!1,a,h,p=>p.time)}}onSelectPrazdnik(a){let h=this.currentDate.split("."),d=+h[0],f=+h[1],p=+h[2],g=new Date;g.setDate(1),g.setFullYear(p),g.setMonth(f-1,d);let v=0==g.getDay()?6:0,y=a.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(v),_=this.breakLines(a.text,y);this.textHoliday.setText(_),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,y),this.dayRang=a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(v),this.updateRangServices(a,v),this.onTextChanged()}parserServices(a){return a.split(/==+/).map(f=>f.trim()).filter(f=>!!f).map(f=>f.split("\n").map(p=>p.trim()).filter(p=>!!p).map(p=>{let g=p.split("|");return I1.builder().setText(g[0]).setTime(g[1]).setMorningService(!g[2].includes("\u0432")).setRequiredService(g[2].includes("\u0442"))}))}parserClerics(a){return a.split(/==+/).map(d=>d.trim()).filter(d=>!!d).map(d=>{let f=d.split("|"),p=d2.builder();f.length>0&&p.setName(f[0]);for(let g=1;g<f.length;++g)p.week[g-1]="true"==f[g];return p})}onSaveServices(a){let h=a.map(d=>d.map(f=>`${f.text}|${f.time}|${(f.requiredService?"\u0442":"")+(f.morningService?"\u0443":"\u0432")}`).join("\r\n")).join("==");h||(h="=="),this.uiConfig.ui.schedulerServices.setStringValue(h)}onClearServices(a,h){h?this.onLoadEmptyServices():this.onLoadServicesOrDefault(!0)}onSaveClerics(a){let h=a.map(d=>d.name+"|"+d.week.join("|")).join("==");this.uiConfig.ui.schedulerClerics.setStringValue(h)}onClearClerics(a){this.onLoadClericsOrDefault(!0)}onSelectDayRang(a){this.dayRang=a;let h=ev.builder().setRang(this.dayRang),d=h.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(),f=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textHoliday.text,d);this.textHoliday.setText(f),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,d),this.updateRangServices(h,0),this.onTextChanged()}replaceServices(a,h,d,f,p){let g=d.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(f),m=this.removeDayTask(a,h),y=this.services.services[d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(f)-1].filter(b=>b.morningService==h).map(b=>p(b)+(b.requiredService?"{\u043f}{\u0442}":g)+(h?"":"{\u0432}")).map(b=>b||"{1}").join("\r\n"),_=h?y:m;return(h?m:y)&&(_&&(_+="\r\n"),_+=h?m:y),_}onSaveDayServices(a){let h=this.days[this.currentDayOfMonth()-1];h&&(this.onTextChangedEnabled=!1,this.textService.text=h.\u0441\u043b\u0443\u0436\u0431\u0430=this.dayServices.services[0].map(d=>d.getNormalizedText()).join("\r\n"),this.textTime.text=h.\u0432\u0440\u0435\u043c\u044f=this.dayServices.services[0].map(d=>d.getNormalizedTime()).join("\r\n"),h.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=this.getDayClerics(),h.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431=this.dayServices.services[0].map(d=>d.serviceColor).join("\r\n"),this.updater&&this.updater.requestForUpdate(),this.onTextChangedEnabled=!0)}getDayClericsWithServiceColors(){return this.dayServices.services[0].map(a=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(a.selectedClerics,a.serviceColor)).join("\r\n")}getDayClerics(){return this.dayServices.services[0].map(a=>a.selectedClerics).join("\r\n")}onClearDayServices(a){this.config.post(()=>{this.onDayServicesSync()})}onSchedulerTypeToggle(){++this.fullSchedulerInfoType,this.fullSchedulerInfoType>tc.State&&(this.fullSchedulerInfoType=tc.Short),this.config.post(()=>this.generateAllSchedulers())}onCopyPermanentLink(){var a=Ar.merge(this.config.pageLoadedFrom,"/index.html");let h=this.getAllCurrentSettings();h.name=this.pCurrentSettingsName.value,console.log(JSON.stringify(h));let d=Th.utf8_to_b64(JSON.stringify(h));console.log(a+="?app=scheduler&doc="+d)}isNeedUpdate(a,h){let d=a?this.mainPage:this.previewPage;return null==(null==d?void 0:d.imageData)||"/scenes/scheduler.scene.txt"!=d.imageData.scene||"Js"!=d.imageData.genName||d.imageData.type!=(a?2==this.fullSchedulerInfoType?297210:1:512)||d.imageData.schedulerText!=this.createScheduler(a)||d.imageData.logoText!=(2==this.fullSchedulerInfoType?"\u0448\u0442\u0430\u0442\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":1==this.fullSchedulerInfoType?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")||0!=d.imageData.startPageIndex||d.imageData.showFooter!=h}getMainPage(a=!0){let h=!a;if(this.isNeedUpdate(a,h)){let f=$g.builder().setPageIndex(0).setImageData(Va.builder().setScene("/scenes/scheduler.scene.txt").setGenName("Js").setType(a?this.fullSchedulerInfoType==tc.State?297210:1:512).setSvgWidth(a?this.fullSchedulerInfoType==tc.State?297:210:512).setSvgHeight(a?this.fullSchedulerInfoType==tc.State?210:297:512).setSchedulerText(this.createScheduler(a)).setLogoText(this.fullSchedulerInfoType==tc.State?"\u0448\u0442\u0430\u0442\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":this.fullSchedulerInfoType==tc.Full?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setStartPageIndex(0).setShowFooter(h));a?this.mainPage=f:this.previewPage=f,this.config.post(()=>{a?this.extraPages=[]:this.previewExtraPages=[]})}return a?this.mainPage:this.previewPage}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(on),B(go),B(Sg),B(_g),B(y0e),B(v0e))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler-view"]],inputs:{data:"data"},decls:99,vars:23,consts:[[1,"no-print"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon"],[1,"alert-text"],[1,"bottom-space"],["clrForm",""],["clrInline",""],[4,"ngFor","ngForOf"],[1,"clr-row","top-space"],[1,"clr-col-3"],["type","button","aria-label","done",1,"btn","btn-icon","btn-success-outline","btn-block",3,"click"],[1,"btn","btn-success-outline","btn-block"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c","accept",".txt",1,"button-input",3,"change"],["type","button","class","btn btn-icon btn-danger-outline btn-block","aria-label","warning",3,"click",4,"ngIf"],[4,"clrIfExpanded"],[1,"clr-row","no-print","bottom-space"],["class","clr-col-6",4,"ngIf"],[1,"clr-col-12"],[1,"btn","btn-block",3,"click"],[3,"data","pagesCount","svg",4,"ngIf"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-body","height100px"],[3,"hidden"],["clrInput","",3,"placeholder","name","ngModel","ngModelChange"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-warning",3,"click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-success"],["shape","check"],["type","button",1,"btn","btn-success",3,"click"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-danger-outline","btn-block",3,"click"],[3,"data","autoSave","clerikDesc","onSave","onClear"],[3,"data","autoSave","serviceDesc","onSave","onClear","onReset"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-down"],[1,"clr-col-6"],[1,"inline-block","top-space"],[3,"showDates","uniqueDateString","useUniqueDate","change"],[1,"clr-col-1"],[1,"clr-row"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"heightDay",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[1,"clr-col-5"],["clrTextarea","","name","holiday","required","",1,"heightHoliday",3,"ngModel","ngModelChange"],[3,"data","singleRang","clerics","autoSave","clearBtn","serviceDesc","clericInfo","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-lg-up","clr-hidden-sm-down"],["clrTextarea","","name","day","required","",1,"heightDay2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday2",3,"ngModel","ngModelChange"],[3,"data","singleRang","vertical","clerics","autoSave","clearBtn","serviceDesc","clericInfo","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-up"],["clrTextarea","","name","day","required","",1,"heightDay3",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday3",3,"ngModel","ngModelChange"],[1,"clr-col-12","top-space"],[3,"rang","rangChanged"],[3,"data","onSelected"],[1,"clr-row","no-print"],[1,"clr-col-6","bottom-space","clr-hidden-md-down"],[1,"heightTAw"],["class","clr-row",4,"ngFor","ngForOf"],[1,"clr-row","bottom-top-space"],[1,"btn","btn-block","btn-danger-outline","heightTAw",3,"click"],[1,"clr-col-6","bottom-space","clr-hidden-lg-up","clr-hidden-sm-down"],[1,"heightTA2w"],[1,"btn","btn-block","btn-danger-outline",3,"click"],[1,"clr-col-12","bottom-space","clr-hidden-md-up"],[1,"clr-col-6","clr-hidden-sm-down"],[3,"data",4,"ngIf"],[1,"clr-col-12","clr-hidden-md-up"],["clrTextarea","","name","holiday","required","",1,"heightTA",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightTA2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightTA3",3,"ngModel","ngModelChange"],[3,"data"],[3,"data","pagesCount","svg"],[3,"data","svg"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),ue(5,"clr-icon",5),F(),I(6,"span",6),ie(7),F()()()(),I(8,"div",7)(9,"form",8)(10,"clr-radio-container",9),X(11,Jct,4,4,"clr-radio-wrapper",10),F()(),I(12,"div",11)(13,"div",12)(14,"button",13),ee("click",function(f){return h.onSave(f)}),ie(15,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),F()(),I(16,"div",12)(17,"button",13),ee("click",function(f){return h.onExport(f)}),ie(18,"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 "),F()(),I(19,"div",12)(20,"label",14)(21,"input",15),ee("change",function(f){return h.onImport(f)}),F(),ie(22," \u0418\u043c\u043f\u043e\u0440\u0442 "),F()(),I(23,"div",12),X(24,eut,2,0,"button",16),F()()()(),I(25,"clr-accordion",0)(26,"clr-accordion-panel")(27,"clr-accordion-title"),ie(28),F(),X(29,tut,2,3,"clr-accordion-content",17),F(),I(30,"clr-accordion-panel")(31,"clr-accordion-title"),ie(32),F(),X(33,nut,2,3,"clr-accordion-content",17),F(),I(34,"clr-accordion-panel")(35,"clr-accordion-title"),ie(36,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),F(),X(37,lut,109,55,"clr-accordion-content",17),F()(),I(38,"div")(39,"div",18),X(40,cut,3,0,"div",19),I(41,"div",20)(42,"button",21),ee("click",function(){return h.onSchedulerTypeToggle()}),ie(43),F()()(),X(44,uut,1,1,"app-svg-js-image",22),X(45,hut,2,1,"div",10),F(),I(46,"clr-modal",23),ee("clrModalOpenChange",function(f){return h.modalClearSchedulerFlag=f}),I(47,"h3",24),ie(48,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),F(),I(49,"div",25)(50,"p"),ie(51,"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446 \u0438\u043b\u0438 \u0433\u043e\u0434 \u0431\u044b\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b \u0438\u043b\u0438 \u043f\u043e\u0441\u0442\u0443\u043f\u0438\u043b \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0447\u0438\u0441\u0442\u043a\u0443."),ue(52,"br")(53,"br"),ie(54," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?"),F()(),I(55,"div",26)(56,"button",27),ee("click",function(){return h.onClearScheduler(),h.modalClearSchedulerFlag=!1}),ie(57,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F(),I(58,"button",28),ee("click",function(){return h.modalClearSchedulerFlag=!1}),ie(59,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F()()(),I(60,"clr-modal",23),ee("clrModalOpenChange",function(f){return h.modalSaveSettingsFlag=f}),I(61,"h3",24),ie(62,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),F(),I(63,"div",29)(64,"form")(65,"clr-input-container",30)(66,"label"),ie(67),F(),I(68,"input",31),ee("ngModelChange",function(f){return h.pCurrentSettingsName.value=f}),F()()()(),I(69,"div",26),X(70,dut,2,0,"button",32),I(71,"button",28),ee("click",function(){return h.modalSaveSettingsFlag=!1}),ie(72,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F()()(),I(73,"clr-modal",23),ee("clrModalOpenChange",function(f){return h.modalDeleteSettingsFlag=f}),I(74,"h3",24),ie(75,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),F(),I(76,"div",25)(77,"p")(78,"button",33),ue(79,"clr-icon",34),F(),ie(80),F()(),I(81,"div",26)(82,"button",28),ee("click",function(){return h.modalDeleteSettingsFlag=!1}),ie(83,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F(),I(84,"button",35),ee("click",function(f){return h.onDeleteCurrentSettingsDirect(f)}),ie(85,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),F()()(),I(86,"clr-modal",23),ee("clrModalOpenChange",function(f){return h.modalAddSettingsFlag=f}),I(87,"h3",24),ie(88,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),F(),I(89,"div",25)(90,"p")(91,"button",36),ue(92,"clr-icon",37),F(),ie(93," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e?"),F()(),I(94,"div",26)(95,"button",38),ee("click",function(f){return h.onAddAllSettingsDirect(f)}),ie(96,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),F(),I(97,"button",28),ee("click",function(){return h.modalAddSettingsFlag=!1}),ie(98,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),F()()()),2&a&&(P(1),R("ngClass",Ll(22,fut)),P(4),et("shape",h.settings.length?"check-circle":"help-info"),P(2),Ti("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b: ",h.settings.length?"":"\u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",""),P(4),R("ngForOf",h.settings),P(13),R("ngIf",h.settings.length),P(4),Ut(2==h.fullSchedulerInfoType?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438"),P(4),Ut(2==h.fullSchedulerInfoType?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f":"\u0421\u043b\u0443\u0436\u0431\u044b"),P(8),R("ngIf",!1),P(3),Ti(" ",2==h.fullSchedulerInfoType?"\u0428\u0442\u0430\u0442\u043d\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":1==h.fullSchedulerInfoType?"\u041f\u043e\u043b\u043d\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"," "),P(1),R("ngIf",!(null==h.mainPage||!h.mainPage.imageData)),P(1),R("ngForOf",h.extraPages),P(1),R("clrModalOpen",h.modalClearSchedulerFlag),P(14),R("clrModalOpen",h.modalSaveSettingsFlag),P(5),R("hidden",!h.pCurrentSettingsName.enabled),P(2),Ut(h.pCurrentSettingsName.name),P(1),bC("placeholder",h.pCurrentSettingsName.description),R("name","tparamsCurrentSettingsName")("ngModel",h.pCurrentSettingsName.value),P(2),R("ngIf",h.pCurrentSettingsName.value),P(3),R("clrModalOpen",h.modalDeleteSettingsFlag),P(7),Ti(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c '",h.pCurrentSettingsName.value,"'?"),P(6),R("clrModalOpen",h.modalAddSettingsFlag))},dependencies:[si,fi,_n,ik,k5,eo,Rf,Ff,GL,cs,ND,Bx,e_,WD,hne,a5,l5,Sx,Wm,Ox,Tx,Dx,jy,Ly,Vl,gx,jo,Fy,Bm,Ao,xf,Zl,_ct,xct,Gct,w0e,Kct],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.my-button[_ngcontent-%COMP%]{border-color:#4aaed9;background-color:#4aaed9;color:#000}.width100[_ngcontent-%COMP%]{width:100%}.height100[_ngcontent-%COMP%]{height:100%!important}.height100px[_ngcontent-%COMP%]{height:100px}.height114px[_ngcontent-%COMP%]{height:114px}.height400[_ngcontent-%COMP%]{width:500px;height:200px}.heightDay[_ngcontent-%COMP%]{width:7vw;height:10em}.heightDay2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightDay3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightHoliday[_ngcontent-%COMP%]{width:37.3vw;height:10em}.heightHoliday2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightHoliday3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightService[_ngcontent-%COMP%]{width:30vw;height:10em}.heightService2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightService3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTime[_ngcontent-%COMP%]{width:14.3vw;height:10em}.heightTime2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTime3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTA[_ngcontent-%COMP%]{width:45vw;height:10em}.heightTAw[_ngcontent-%COMP%]{width:45vw!important}.heightTA2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTA2w[_ngcontent-%COMP%]{width:42vw}.heightTA3[_ngcontent-%COMP%]{width:78vw;height:100px}@media print{.pagebreak[_ngcontent-%COMP%]{page-break-after:always}}.button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}"]}),c})();class t9{constructor(){}static builder(){return new t9}}class n9 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new n9("",null,null,t9.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setId(l){return this.id=l,this}setWaitingForSenderid(l){return this.waitingForSenderId=l,this}setComponents(l){return this.components=l,this}}class i9{constructor(l,a,h,d){this.width=l,this.height=a,this.memory=h,this.environment=d}static builder(){return new i9(512,512,null,null)}setWidth(l){return this.width=l,this}setHeight(l){return this.height=l,this}setMemory(l){return this.memory=l,this}setEnvironment(l){return this.environment=l,this}}class g2 extends mi{constructor(l,a,h,d){super(l,a,h),this.config=d}static builder(){return new g2("",null,null,i9.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}updateConfig(l){return l(this.config),this}}const gut=["canvasContainer"],mut=["runnerCanvas"];class r9{constructor(l,a,h){this.name=l,this.x=a,this.y=h}static builder(){return new r9("",-1,-1)}setName(l){return this.name=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}}let s9=(()=>{class c{constructor(a){this.config=a,this.onError=new wt,this.runned=!1,this.oldValue=ns.builder(),this.oldOldWidthValue=0,this.oldWidthValue=ns.builder(),this.oldHeightValue=ns.builder(),this.oldRequestUpdateLevel=ns.builder(),this.requestUpdateLevel=0,this.myMemory=Nr.\u043d\u043e\u0432\u044b\u0435(),this.myEnvironment=Nr.\u043d\u043e\u0432\u044b\u0435(),this.mouseMove=null,this.jsSvc=new JE}get codeRunnerTextData(){return this.data}get memory(){return this.codeRunnerTextData.config.memory?this.codeRunnerTextData.config.memory:this.myMemory}get environment(){return this.codeRunnerTextData.config.environment?this.codeRunnerTextData.config.environment:this.myEnvironment}get text(){return this.data&&this.data.text?this.data.text:""}get width(){return this.codeRunnerTextData&&this.codeRunnerTextData.config?this.codeRunnerTextData.config.width:512}get height(){return this.codeRunnerTextData&&this.codeRunnerTextData.config?this.codeRunnerTextData.config.height:512}ngOnInit(){this.runned=!0}ngOnDestroy(){this.runned=!1}ngAfterViewInit(){this.requestUpdate()}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}requestUpdate(){var a,h,d,f,p,g,m,v,y,_,b;if(!this.runned)return;const C=this.canvasContainerRef.nativeElement;let x=C.offsetWidth,S=C.offsetHeight,w=this.oldValue.checkAndUpdate(this.text),T=this.oldOldWidthValue!=x;T&&(this.oldOldWidthValue=this.oldWidthValue.oldRawValue),w=this.oldWidthValue.checkAndUpdate(x)||w,w=this.oldHeightValue.checkAndUpdate(S)||w,w=this.oldRequestUpdateLevel.checkAndUpdate(this.requestUpdateLevel)||w;const O=this.runnerCanvasRef.nativeElement;let k=T?Math.round(x/this.codeRunnerTextData.config.width*this.codeRunnerTextData.config.height):O.height;k<1&&(k=1);var D=500;if(w){O.width=x,O.height=k;const z=O.getContext("2d");z.width=x,z.height=k,z.virtaulWidth=this.codeRunnerTextData.config.width,z.virtualHeight=this.codeRunnerTextData.config.height,z.kx=x/this.codeRunnerTextData.config.width,z.ky=k/this.codeRunnerTextData.config.height;let U=Nr.\u043d\u043e\u0432\u044b\u0435(),Z=F6.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u043e\u0433\u043e\u0425\u043e\u043b\u0441\u0442\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0425\u043e\u043b\u0441\u0442(z),Y=this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442("\u0445\u043e\u043b\u0441\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Z));null===(a=U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===a||a.set("\u0445\u043e\u043b\u0441\u0442",Y),null===(h=U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===h||h.set("\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u0427\u0435\u0440\u0435\u0437\u041c\u0441",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-1));let N=this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432");if(this.mouseMove){let $=this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");null===(d=$.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===d||d.set("name",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.mouseMove.name)).set("x",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.mouseMove.x)).set("y",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.mouseMove.y)),N.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([$])}this.environment.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0441\u043e\u0431\u044b\u0442\u0438\u044f\u041c\u044b\u0448\u043a\u0438",N);try{if(this.text&&this.jsSvc.run(this.text,this.memory,this.environment,U),null===(p=null===(f=this.environment.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===f?void 0:f.get("\u0433\u0440\u0430\u0444\u0438\u043a\u0430"))||void 0===p?void 0:p.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()){var A=null===(m=null===(g=U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===g?void 0:g.get("\u0448\u0438\u0440\u0438\u043d\u0430"))||void 0===m?void 0:m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),L=null===(y=null===(v=U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===v?void 0:v.get("\u0432\u044b\u0441\u043e\u0442\u0430"))||void 0===y?void 0:y.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e();null!=A&&null!=L&&(A<=0&&(A=1),L<=0&&(L=1),(this.codeRunnerTextData.config.width!=A||this.codeRunnerTextData.config.height!=L)&&(this.codeRunnerTextData.config.width=A,this.codeRunnerTextData.config.height=L,++this.requestUpdateLevel,D=1,this.oldOldWidthValue=0))}var E=null===(b=null===(_=U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===_?void 0:_.get("\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u0427\u0435\u0440\u0435\u0437\u041c\u0441"))||void 0===b?void 0:b.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e();null!=E&&0<=E&&E<D&&(D=E,++this.requestUpdateLevel)}catch($){var V="\u041e\u0448\u0438\u0431\u043a\u0430: "+($ instanceof fe?Bo.convertToObject($):$);this.onError.emit(V)}}this.config.post(()=>this.requestUpdate(),D)}onMousemove(a){let h=this.runnerCanvasRef.nativeElement.getBoundingClientRect(),d=a.clientX-h.left,f=a.clientY-h.top;d>=0&&d<this.runnerCanvasRef.nativeElement.offsetWidth&&f>=0&&f<this.runnerCanvasRef.nativeElement.offsetHeight&&(this.mouseMove=r9.builder().setName("mousemove").setX(d).setY(f))}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-code-runner-text"]],viewQuery:function(a,h){if(1&a&&(ci(gut,5),ci(mut,5)),2&a){let d;Ht(d=$t())&&(h.canvasContainerRef=d.first),Ht(d=$t())&&(h.runnerCanvasRef=d.first)}},hostBindings:function(a,h){1&a&&ee("mousemove",function(f){return h.onMousemove(f)})},inputs:{data:"data"},outputs:{onError:"onError"},decls:4,vars:0,consts:[[1,"width100"],["canvasContainer",""],["width","10","height","10",1,"border"],["runnerCanvas",""]],template:function(a,h){1&a&&(I(0,"div",0,1),ue(2,"canvas",2,3),F())},styles:[".noBorder[_ngcontent-%COMP%]{border:1px solid transparent}.border[_ngcontent-%COMP%]{border:1px solid lightgray}"]}),c})();function vut(c,l){if(1&c&&(I(0,"span",2),ie(1),F()),2&c){const a=q();P(1),Ut(a.text)}}function yut(c,l){if(1&c&&(I(0,"span",2),ie(1),F()),2&c){const a=q(3);P(1),Ut(a.text)}}function _ut(c,l){if(1&c){const a=at();I(0,"app-dynamic-codemirror",5),ee("textChanged",function(d){return De(a),ke(q(3).onCodeTextChanged(d))}),F()}if(2&c){const a=q(3);R("text",a.lines)("maxHeightStr",a.getHeightStr())("minHeightStr",a.getHeightStr())}}function but(c,l){1&c&&ue(0,"app-dynamic-errors",9),2&c&&R("data",q(4).errors)}function Cut(c,l){if(1&c){const a=at();I(0,"div")(1,"div",6),ie(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),F(),X(3,but,1,1,"app-dynamic-errors",7),I(4,"app-dynamic-code-runner-text",8),ee("onError",function(d){return De(a),ke(q(3).onCodeRunnerError(d))}),F()()}if(2&c){const a=q(3);P(3),R("ngIf",a.errors.errors.length),P(1),R("data",a.runnerData)}}function xut(c,l){if(1&c&&(I(0,"div"),X(1,yut,2,1,"span",0),X(2,_ut,1,3,"app-dynamic-codemirror",4),X(3,Cut,5,2,"div",1),F()),2&c){const a=q(2);P(1),R("ngIf",!a.isMiltiline()),P(1),R("ngIf",a.isMiltiline()),P(1),R("ngIf",a.resultEnabled)}}function wut(c,l){if(1&c&&(I(0,"span",2),ie(1),F()),2&c){const a=q(4);P(1),Ut(a.text)}}function Sut(c,l){if(1&c){const a=at();I(0,"app-dynamic-codemirror",5),ee("textChanged",function(d){return De(a),ke(q(4).onCodeTextChanged(d))}),F()}if(2&c){const a=q(4);R("text",a.lines)("maxHeightStr",a.getHeightStr())("minHeightStr",a.getHeightStr())}}const Tut=function(c,l){return{"clr-col-6":c,"clr-col-12":l}};function Out(c,l){if(1&c&&(I(0,"div",13),X(1,wut,2,1,"span",0),X(2,Sut,1,3,"app-dynamic-codemirror",4),F()),2&c){const a=q(3);R("ngClass",as(3,Tut,a.resultEnabled,!a.resultEnabled)),P(1),R("ngIf",!a.isMiltiline()),P(1),R("ngIf",a.isMiltiline())}}function Dut(c,l){1&c&&ue(0,"app-dynamic-errors",9),2&c&&R("data",q(4).errors)}function kut(c,l){if(1&c){const a=at();I(0,"div",14)(1,"div",15),ie(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),F(),X(3,Dut,1,1,"app-dynamic-errors",7),I(4,"app-dynamic-code-runner-text",8),ee("onError",function(d){return De(a),ke(q(3).onCodeRunnerError(d))}),F()()}if(2&c){const a=q(3);P(3),R("ngIf",a.errors.errors.length),P(1),R("data",a.runnerData)}}function Mut(c,l){if(1&c&&(I(0,"div",10),X(1,Out,3,6,"div",11),X(2,kut,5,2,"div",12),F()),2&c){const a=q(2);P(1),R("ngIf",a.isMiltiline()),P(1),R("ngIf",a.isMiltiline()&&a.resultEnabled)}}function Eut(c,l){if(1&c&&(I(0,"div"),X(1,xut,4,3,"div",1),X(2,Mut,3,2,"div",3),F()),2&c){const a=q();P(1),R("ngIf",a.vertical),P(1),R("ngIf",!a.vertical)}}let Aut=(()=>{class c{constructor(a){this.config=a,this.oldValue=ns.builder(),this.lines=null,this.linesCount=0,this.errors=Nc.builder(),this.runnerData=g2.builder().updateConfig(h=>h.setWidth(256).setHeight(160)),this.requestCodeText="",this.bVertical=void 0}get vertical(){return(null!=this.bVertical?this.bVertical:window.innerWidth<window.innerHeight)||!this.isMiltiline()}get codeSpanTextData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get resultEnabled(){return!!this.codeSpanTextData&&this.codeSpanTextData.config.resultEnabled&&this.codeSpanTextData.config.resultWidth>0&&this.codeSpanTextData.config.resultHeight>0}ngOnInit(){void 0===this.bVertical&&(this.bVertical=window.innerWidth<window.innerHeight),this.codeSpanTextData.config.resultEnabled&&(this.runnerData.text=this.codeSpanTextData.text,this.runnerData.config.setWidth(this.codeSpanTextData.config.resultWidth).setHeight(this.codeSpanTextData.config.resultHeight))}ngOnDestroy(){}ngAfterViewInit(){}getLines(){let a=this.text;return this.oldValue.checkAndUpdate(a)&&(this.lines=null,(a.includes("\n")||this.codeSpanTextData.config.resultEnabled)&&(this.lines=a,this.linesCount=this.lines.split("\n").length,this.codeSpanTextData.config.setResultEnabled(!0),this.runnerData.config.setWidth(this.codeSpanTextData.config.resultWidth).setHeight(this.codeSpanTextData.config.resultHeight))),this.lines}isMiltiline(){return null!=this.getLines()||this.codeSpanTextData.config.resultEnabled}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getHeightStr(){return 11*(1+this.linesCount)*1.4+"pt"}onCodeTextChanged(a){this.requestCodeText=a,this.config.post(()=>{this.requestCodeText==a&&(this.onCodeRunnerError(""),this.runnerData.text=a)},3e3)}onCodeRunnerError(a){this.config.post(()=>{this.errors.errors=a?[a]:[]})}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-code-span-text"]],inputs:{data:"data"},decls:2,vars:2,consts:[["class","bg-2",4,"ngIf"],[4,"ngIf"],[1,"bg-2"],["class","clr-row",4,"ngIf"],[3,"text","maxHeightStr","minHeightStr","textChanged",4,"ngIf"],[3,"text","maxHeightStr","minHeightStr","textChanged"],[1,"green","bottom-top-space"],[3,"data",4,"ngIf"],[3,"data","onError"],[3,"data"],[1,"clr-row"],[3,"ngClass",4,"ngIf"],["class","clr-col-6",4,"ngIf"],[3,"ngClass"],[1,"clr-col-6"],[1,"green"]],template:function(a,h){1&a&&(X(0,vut,2,1,"span",0),X(1,Eut,3,2,"div",1)),2&a&&(R("ngIf",!h.isMiltiline()),P(1),R("ngIf",h.isMiltiline()))},dependencies:[si,_n,h1,LI,s9],styles:[".noBorder[_ngcontent-%COMP%]{border:1px solid transparent}"]}),c})();class o9{constructor(l,a,h){this.resultEnabled=l,this.resultWidth=a,this.resultHeight=h}static builder(){return new o9(!1,256,160)}setResultEnabled(l){return this.resultEnabled=l,this}setResultWidth(l){return this.resultWidth=l,this}setResultHeight(l){return this.resultHeight=l,this}}class a9 extends mi{constructor(l,a,h,d){super(l,a,h),this.config=d}static builder(){return new a9("",null,null,o9.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}updateConfig(l){return l(this.config),this}}class l9 extends Tu{constructor(){super(),this.fineText=!1,this.pageBreakBefore=!1,this.pageBreakAfter=!1,this.printOnly=!1,this.noPrint=!1,this.sClasses=[]}static builder(){return new l9}setFineText(l){return this.fineText=l,this.markChanged(),this}setPageBreakBefore(l){return this.pageBreakBefore=l,this.markChanged(),this}setPageBreakAfter(l){return this.pageBreakAfter=l,this.markChanged(),this}setPrintOnly(l){return this.printOnly=l,this.markChanged(),this}setNoPrint(l){return this.noPrint=l,this.markChanged(),this}addSClass(l){return this.sClasses.push(l),this.markChanged(),this}setSClasses(l){return this.sClasses=l,this.markChanged(),this}}class c9 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.components=[]}static builder(){return new c9("",null,null,l9.builder().setFineText(!0))}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setComponents(l){return this.components=l,this}}function Iut(c,l){if(1&c&&(I(0,"div",2),ue(1,"app-add-component",3),F()),2&c){const a=l.$implicit;R("ngClass",q().getColClass(a)),P(1),R("component",a)}}let Put=(()=>{class c{constructor(a){this.config=a}get columnsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.columnsData.components.length?this.columnsData.components[0]:null}get components(){return this.columnsData.components}get isRow(){return this.columnsData.classes.sClasses.findIndex((a,h,d)=>"clr-row"==a)>=0}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.columnsData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var a=this.columnsData.classes;let h={ftext:a.fineText,pageBreak:a.pageBreakAfter,pageBreakBefore:a.pageBreakBefore};return a.sClasses.filter(d=>"clr-row"!=d&&!d.startsWith("clr-col-")).forEach(d=>h[d]=!0),h}getColClass(a){let h=this.getColClassRaw(a);return a.detector.checkAndGetValue(h)}getColClassRaw(a){let h={},d=this.columnsData.components.length;return d>=1&&d<=12?h["clr-col-"+Math.floor(12/d)]=!0:h["clr-col"]=!0,h}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-columns"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"clr-row",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),ee("click",function(f){return h.onClick(f)}),X(1,Iut,2,2,"div",1),F()),2&a&&(P(1),R("ngForOf",h.components))},dependencies:[si,fi,Yl],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class UI{constructor(l,a){this.text=l,this.children=a}static builder(){return new UI("",[])}setText(l){return this.text=l,this}setChildren(l){return this.children=l,this}addChild(l){return this.children.push(l),this}}class u9 extends Tu{constructor(){super(),this.block=!1,this.outline=!1,this.type="primary",this.children=[]}static builder(){return(new u9).setupDefault()}setBlock(l){return this.block=l,this.markChanged(),this}setOutline(l){return this.outline=l,this.markChanged(),this}setType(l){return this.type=l,this.markChanged(),this}setChildren(l){return this.children=l,this}addChild(l){return this.children.push(l),this}setupDefault(){return this.addChild(UI.builder().setText("\u0413\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0435")).addChild(UI.builder().setText("\u041a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0435"))}}class h9 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d}static builder(){return new h9("",null,null,u9.builder().setBlock(!0))}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}function Rut(c,l){if(1&c){const a=at();I(0,"button",12),ee("click",function(){const f=De(a).$implicit;return ke(q(2).onClickButton(f.path))}),ie(1),F()}if(2&c){const a=l.$implicit;P(1),Ut(a.name)}}function Fut(c,l){if(1&c&&(I(0,"clr-dropdown-menu",6)(1,"label",7),ie(2,"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b"),F(),ue(3,"div",8),I(4,"clr-dropdown")(5,"button",9),ie(6,"\u0413\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0435"),F(),I(7,"clr-dropdown-menu",10),X(8,Rut,2,1,"button",11),F()()()),2&c){const a=q();P(8),R("ngForOf",a.graphicsExamples)}}class HI{constructor(l,a){this.name=l,this.path=a}static builder(){return new HI("","")}setName(l){return this.name=l,this}setPath(l){return this.path=l,this}}let Nut=(()=>{class c{constructor(a,h,d){this.config=a,this.uiConfig=h,this.cacheSvc=d,this.graphicsExamples=[HI.builder().setName("\u041301 \u041a\u0432\u0430\u0434\u0440\u0430\u0442").setPath("/compprod/examples/G01_movingRect.txt"),HI.builder().setName("\u041302 \u041a\u0440\u0443\u0433").setPath("/compprod/examples/G02_movingCircle.txt")]}get btnData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}onClickButton(a){this.cacheSvc.getText(a,h=>{!h||(this.uiConfig.ui.compilerSourceText.setStringValue(h),this.data.onClick&&this.data.onClick(a))})}getClasses(){return this.btnData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var a=this.btnData.classes;return{btn:!0,"btn-block":a.block,"btn-link":"link"==a.type&&!a.outline,"btn-primary":"primary"==a.type&&!a.outline,"btn-primary-outline":"primary"==a.type&&a.outline,"btn-success":"success"==a.type&&!a.outline,"btn-success-outline":"success"==a.type&&a.outline,"btn-danger":"danger"==a.type&&!a.outline,"btn-danger-outline":"danger"==a.type&&a.outline,"no-print":!0}}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(wd))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-button-examples"]],inputs:{data:"data"},decls:7,vars:0,consts:[[1,"clr-row"],[1,"clr-col-12"],[1,"btn-block","st"],["clrDropdownTrigger","",1,"btn","btn-link","btn-block"],["shape","angle","direction","down"],["clrPosition","top-left",4,"clrIfOpen"],["clrPosition","top-left"],["aria-hidden","true",1,"dropdown-header"],["role","separator","aria-hidden","true",1,"dropdown-divider"],["clrDropdownTrigger",""],["clrPosition","right-bottom"],["clrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["clrDropdownItem","",3,"click"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"div",1)(2,"clr-dropdown",2)(3,"button",3),ie(4," \u041f\u0440\u0438\u043c\u0435\u0440\u044b "),ue(5,"cds-icon",4),F(),X(6,Fut,9,1,"clr-dropdown-menu",5),F()()())},dependencies:[fi,pr,QL,cs,Xx,R5,F5,I5],styles:[".st[_ngcontent-%COMP%]{margin-top:7px}"]}),c})();class d9{constructor(l,a){this.meta=l,this.parsed=a}static builder(){return new d9(null,null)}setMeta(l){return this.meta=l,this}setParsed(l){return this.parsed=l,this}}class m2{constructor(l="",a=null){this.type=l,this.onEventHandler=a}setOnEventHandler(l){return this.onEventHandler=l,this}run(l){return this.onEventHandler&&this.onEventHandler(this,l),this}}class $I{constructor(l,a,h=0,d=null){this.\u0441\u0442\u0440\u043e\u043a\u0438=l,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=a,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a=h,this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=d,this.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u043e\u043b\u0431\u0446\u043e\u0432=za.builder(),this.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u0440\u043e\u043a=za.builder()}static builder(){return new $I([],0)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(l){return this.\u0441\u0442\u0440\u043e\u043a\u0438=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(l){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=l,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(l=1){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a+=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430(l){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=l,this}}class f9 extends Ehe{constructor(l=null){super(l),this.errors=[],this.libraryRef="biblia",this.libraryType="prod",this.libraryInfo=null,this.bookName="",this.bookNameNewLangs=[],this.bookChapterNewName="",this.bookLoadBooksEnabledNewName=!0,this.bookPageText="",this.bookRef="",this.bookInfo=null,this.bookLanguages=[],this.books=[],this.lineIndexes=[],this.bookContent=[],this.bookChapter=null,this.converter=new Gz,this.onLibraryLoadEvent=new m2("onLibraryLoad"),this.onPageLoadEvent=new m2("onPageLoad"),this.onBookInfoLoadEvent=new m2("onBookInfoLoad"),this.onRouteEvent=new m2("onRoute"),this.onNewTitleEvent=new m2("onNewTitle"),this.config=null,this.uiConfig=null,this.memorialSvc=null,this.audioSvc=null,this.linesTransformer=null,this.removableSubscriptions=[]}onDestroy(){this.removableSubscriptions.forEach(l=>{l.unsubscribe()}),this.removableSubscriptions=[]}addSubscription(l){l&&this.removableSubscriptions.push(l)}setLineTransformer(l){return this.linesTransformer=l,this}setConfig(l){var a;this.config=l;let h=null===(a=this.config)||void 0===a?void 0:a.getApplication();return h&&h.libraryType&&h.libraryRef&&(this.libraryType=h.libraryType,this.libraryRef=h.libraryRef),this}setUIConfig(l){return this.uiConfig=l,this}setMemorial(l){return this.memorialSvc=l,this}setAudio(l){return this.audioSvc=l,this}addError(l){return this.errors.push(l),this}clear(l=!1,a=!1,h=[],d=!0,f=!1){return this.errors=[],this.books=[],this.lineIndexes=[],l&&(this.bookContent=[]),a&&(d&&(this.bookInfo=null),this.bookLanguages=h),f&&(this.bookChapter=null),this}loadLibraryInfo(){return this.send(null,whe.builder().setLibraryType(this.libraryType).setLibraryRef(this.libraryRef)),this}tryLoadLibraryInfo(){null==this.libraryInfo?this.loadLibraryInfo():this.onLibraryLoadEvent.run(this.libraryInfo)}loadBookByName(l,a=[],h="",d=!0){this.bookName=l,this.bookNameNewLangs=a,this.bookChapterNewName=h,this.bookChapterNewName&&(this.bookChapter=null),this.bookLoadBooksEnabledNewName=d,this.retryLoadBookByName()}loadBookByPageText(l,a=!0,h="\u0420\u0443\u0441\u0441\u043a\u0438\u0439"){return this.bookPageText=l,this.clear(!0,!0,[h],a),this.retryLoadBookByName(),this}getBookSettingsNamePath(l){if(!this.libraryInfo)return null;let a=this.libraryInfo.settings.find(h=>h.name===l);return a||(a=this.libraryInfo.settings.find(h=>{var d;return null===(d=h.value2)||void 0===d?void 0:d.find(f=>f===l)})),a}getBookContentNamePath(l,a=!1){if(!this.libraryInfo)return null;let h=this.libraryInfo.content.find(d=>d.name===l);if(h||(h=this.libraryInfo.content.find(d=>{var f;return null===(f=d.path2)||void 0===f?void 0:f.find(p=>p===l)})),!h){let d=l1.builder().parse(l);if(null!=d&&d.length&&d[0].length){let f=d[0][0];if(f.type==Xl.Link){let p=f;h=this.getBookContentNamePath(p.name),a&&p.langugages&&p.langugages.length&&(this.bookNameNewLangs=p.langugages)}}}return h}retryLoadBookByName(){if(this.libraryInfo)if(this.bookPageText)this.onPagesResponse(wz.builder().setPages([this.bookPageText])),this.bookPageText="";else{let l=this.getBookContentNamePath(this.bookName,!0);l?this.loadBookByRef(l.path,this.bookNameNewLangs,this.bookLoadBooksEnabledNewName):this.addError(`\u041a\u043d\u0438\u0433\u0430 "${this.bookName}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430.`)}else this.loadLibraryInfo()}loadBookByRef(l,a=[],h=!0){return this.bookRef=l,this.clear(!0,!0,a),this.loadBookInfo(null,h),this}isLanguageEnabled(l){return null!=this.bookLanguages.find(a=>a==l)}loadBookInfo(l=null,a=!0){return this.send(null,She.builder().setLibraryType(this.libraryType).setBookRef(l||this.bookRef).setLoadBooksEnabled(a)),this}isPrevEnabled(){let l=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let a=this.bookContent[0];a.parsed&&a.parsed.content&&a.parsed.content.length>1&&(l=a.parsed.content[0].name!=this.bookChapter.name)}return l}isNextEnabled(){let l=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let a=this.bookContent[0];a.parsed&&a.parsed.content&&a.parsed.content.length>1&&(l=a.parsed.content[a.parsed.content.length-1].name!=this.bookChapter.name)}return l}loadNextPage(){if(!this.isNextEnabled())return;let l="";if(this.bookContent.length){let a=this.bookContent[0];if(a.parsed&&a.parsed.content&&a.parsed.content.length>1){let h=a.parsed.content.findIndex(d=>d.name==this.bookChapter.name);h>=0&&h+1<a.parsed.content.length&&(l=a.parsed.content[h+1].name)}}l&&this.loadPage(l)}loadPrevPage(){if(!this.isPrevEnabled())return;let l="";if(this.bookContent.length){let a=this.bookContent[0];if(a.parsed&&a.parsed.content&&a.parsed.content.length>1){let h=a.parsed.content.findIndex(d=>d.name==this.bookChapter.name);h>=1&&(l=a.parsed.content[h-1].name)}}l&&this.loadPage(l)}loadPage(l){let a=this.bookContent[0].parsed.content.find(h=>h.name===l);return a&&a!=this.bookChapter&&(this.bookName=this.getNormalBookName(),this.bookChapter=a,this.clear(),this.loadCurrentPages()),this}loadCurrentPages(){let l=Ohe.builder();return this.runAll(this.bookContent,(a,h)=>{let d=a.parsed.settings.find(g=>"\u044f\u0437\u044b\u043a"===g.name.toLowerCase());if(d&&(this.isLanguageEnabled(d.value)||(d=null)),!d)return void h(!0);let f=this.getBookChapterNewName(),p=a.parsed.content.find(g=>f==g.name);this.bookChapterNewName="",null==p&&(p=a.parsed.content.find(g=>!this.bookChapter||this.bookChapter.name==g.name)),p&&(l.addBookPage(xz.builder().setBookPage(a.meta.bookRef).setBookPath(a.meta.path).setBookPage(p.path)),this.bookChapter||(this.bookChapter=p)),h(!0)},a=>{a&&this.send(null,l)}),this}post(l,a){switch(a.type){case Mhe.TYPE:this.onLibraryInfoResponse(a);break;case khe.TYPE:this.onBookInfoResponse(a);break;case Dhe.TYPE:this.onBookResponse(a);break;case wz.TYPE:this.onPagesResponse(a);break;default:throw new Error(`Unknown message type: ${a.type}.`)}return this}onLibraryInfoResponse(l){try{this.libraryInfo=bookParserStatic.parse(l.metaContent,vS.builder())}catch(a){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438: ${l.libraryRef}: ${a}`)}return this.bookName||this.bookPageText?this.retryLoadBookByName():this.onLibraryLoadEvent.run(this.libraryInfo),this}onBookInfoResponse(l){try{this.bookInfo=bookParserStatic.parse(l.metaContent,vS.builder())}catch(a){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${l.bookRef}: ${a}`)}return l.loadBooksEnabled&&this.reloadBooks(),this.onBookInfoLoadEvent.run(this.bookInfo),this}reloadBooks(){this.clear(!0);let l=The.builder().setLibraryType(this.libraryType).setBookRef(this.bookRef);this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookLanguages.filter(a=>null!=this.bookInfo.content.find(h=>h.name==a))),!this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookInfo.content.map(a=>a.name),this.bookLanguages.length>2&&(this.bookLanguages=this.bookLanguages.slice(0,2))),this.bookInfo&&this.bookLanguages.forEach(a=>{let h=this.bookInfo.content.find(d=>d.name===a);h&&l.addLanguage(h.path)}),this.send(null,l)}onBookResponse(l){return this.runAll(l.metaBooks,(a,h)=>{this.loadBook(a,h)},a=>{a&&this.loadCurrentPages()}),this}loadBook(l,a=null){try{var h=bookParserStatic.parse(l.content,{builder:vS.builder()});this.bookContent.push(d9.builder().setMeta(l).setParsed(h)),a&&a(!0)}catch(d){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${this.bookRef}: ${d}`)}return this}onPagesResponse(l){l.pages.forEach(a=>{this.loadBookPageText(a)}),this.onPageLoadEvent.run(null)}getStdSrc(){return"\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '';\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c(\u0442\u0435\u043a\u0441\u0442) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n      }\n    }.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u0434 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(_\u043a\u043e\u0434) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c '/*' + _\u043a\u043e\u0434 + '*/';\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(\u0442\u0435\u043a\u0441\u0442) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0433\u0430\u043b\u043e\u0447\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0433\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442, _\u0433\u0430\u043b\u043e\u0447\u043a\u0430, _\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442,_\u0433\u0430\u043b\u043e\u0447\u043a\u0430,_\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0433\u0430\u043b\u043e\u0447\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442, \u0442\u0438\u043f, \u0441\u0441\u044b\u043b\u043a\u0430, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, \u0431\u043b\u043e\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442,\u0442\u0438\u043f,\u0441\u0441\u044b\u043b\u043a\u0430,\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a,\u0431\u043b\u043e\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u043e\u043f\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432(\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432(\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0441\u0442\u043e\u043b\u0431\u0446\u044b = \u043a\u043b\u0430\u0441\u0441 {\n      \u0441\u0442\u043e\u043b\u0431\u0446\u044b(\u0441\u0442\u0440\u043e\u043a\u0438) {\n        id = \u043d\u043e\u0432\u044b\u0435\u0421\u0442\u043e\u043b\u0431\u0446\u044b(\u0441\u0442\u0440\u043e\u043a\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0441\u0442\u043e\u043b\u0431\u0446\u044b;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0441\u043f\u0438\u0441\u043e\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u0441\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0441\u043f\u0438\u0441\u043e\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0442\u0435\u043a\u0441\u0442\u041a\u043e\u0434\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0442\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430,\u0432\u044b\u0441\u043e\u0442\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442\u041a\u043e\u0434\u0430(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430,\u0432\u044b\u0441\u043e\u0442\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0442\u0435\u043a\u0441\u0442;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0445\u043e\u043b\u0441\u0442 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0445\u043e\u043b\u0441\u0442(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430,\u0432\u044b\u0441\u043e\u0442\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0425\u043e\u043b\u0441\u0442(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430,\u0432\u044b\u0441\u043e\u0442\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0445\u043e\u043b\u0441\u0442;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u0438\u0433\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u0438\u0433\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u0438\u0433\u0430\u041f\u043e\u0421\u0441\u044b\u043b\u043a\u0435 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b,\u0433\u043b\u0430\u0432\u0430,\u043f\u0435\u0440\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430,\u0432\u0442\u043e\u0440\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430\u041f\u043e\u0421\u0441\u044b\u043b\u043a\u0435(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b,\u0433\u043b\u0430\u0432\u0430,\u043f\u0435\u0440\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430,\u0432\u0442\u043e\u0440\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u0438\u0433\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a, _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a,  _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.svg = \u043a\u043b\u0430\u0441\u0441 {\n      svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u044b\u0439Svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.svg;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043c\u0435\u043d\u044e = \u043a\u043b\u0430\u0441\u0441 {\n      \u043c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043c\u0435\u043d\u044e;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div = \u043a\u043b\u0430\u0441\u0441 {\n      div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c) {\n        id = \u043d\u043e\u0432\u044b\u0439Div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.div;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440() {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440();\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435;\n    "}convertBookPageText(l,a,h){let f=(new YE).parseAndJoin(l),p=this.getStdSrc()+f+" \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g=new JE,m=C=>{C.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u0435\u0440\u0441\u0438\u044f",g.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.config?this.config.environment.version:"\u0412\u0435\u0440\u0441\u0438\u044f 2.0+")),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0421\u043f\u0438\u0441\u043e\u043a\u041a\u043d\u0438\u0433\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438",(x,S)=>{let w=x.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432");return this.libraryInfo&&w.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.libraryInfo.content.map(T=>{let O=x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T.name));let k=this.libraryInfo.settings.find(D=>D.name==T.name);return O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u043c\u044f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(k?k.value:"")),O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",x.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((k&&k.value2?k.value2:[]).map(D=>x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(D)))),O})),w}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u043d\u0438\u0433\u0443",(x,S)=>{let w=this.uiConfig?this.uiConfig.ui.currentBook.getStringValue():"";return x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(x,S)=>{var T=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]);let O=this.uiConfig?this.uiConfig.ui.visitedBooksHelp.getStringValue():"";if(this.uiConfig)switch(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":O=this.uiConfig.ui.visitedBooksHelp.getStringValue();break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":O=this.uiConfig.ui.visitedMemorialHelp.getStringValue();break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":O=this.uiConfig.ui.visitedCalculatorHelp.getStringValue();break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":O=this.uiConfig.ui.visitedCalendarHelp.getStringValue();break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":O=this.uiConfig.ui.visitedCompilerHelp.getStringValue();break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":O=this.uiConfig.ui.visitedSchedulerHelp.getStringValue()}return x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(x,S)=>{var T=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]),k=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[2]);if(this.uiConfig)switch(k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":this.uiConfig.ui.visitedBooksHelp.setStringValue(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.uiConfig.ui.visitedMemorialHelp.setStringValue(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCalculatorHelp.setStringValue(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":this.uiConfig.ui.visitedCalendarHelp.setStringValue(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCompilerHelp.setStringValue(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":this.uiConfig.ui.visitedSchedulerHelp.setStringValue(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return S[0]}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u041a\u043d\u0438\u0433\u0438",(x,S)=>{var w,O=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]);return this.onNewTitleEvent.run(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),null===(w=this.config)||void 0===w||w.messageBus.sendMessage(Py.builder().setType("MemorialNewTitle").setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTarget("MemorialMainWindow")),S[0]}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(x,S)=>{let T=this.uiConfig?this.uiConfig.ui.currentOffset.getNumberValue():0;T<0&&(T=this.uiConfig?this.uiConfig.ui.currentPersonOffset.getNumberValue():0);let O=ti.getKafizmNumberBy(17,T);return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(x,S)=>{var T=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]);return this.uiConfig&&this.uiConfig.ui.currentOffset.setNumberValue(ti.getOffsetByKafizmNumber(17,T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),T}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(x,S)=>{var w;let T=this.uiConfig?this.uiConfig.ui.memorialChapterRequested.getNumberValue():0;return null===(w=this.uiConfig)||void 0===w||w.ui.memorialChapterRequested.setNumberValue(-1),x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T)}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(x,S)=>{let w=this.uiConfig?this.uiConfig.ui.currentMemorialPsalom.getNumberValue():0;return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(x,S)=>{var T=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setNumberValue(T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),T}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(x,S)=>{let w=!this.uiConfig||this.uiConfig.ui.showMolitvy.getBooleanValue();return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(x,S)=>{var T=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setBooleanValue(T.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),T}),g.addMethod(C,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c",(x,S)=>{let w=!this.uiConfig||this.uiConfig.ui.memorialPsaltir.getBooleanValue();return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),g.addMethod(C,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041e\u0431\u043b\u043e\u0436\u043a\u0443",(x,S)=>{let w=!this.uiConfig||this.uiConfig.ui.showFacePage.getBooleanValue();return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438",(x,S)=>{let w=x.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([]);if(this.memorialSvc){let T=this.memorialSvc.getMemorials();T&&T.items.forEach(O=>{var k;let D=x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");null===(k=D.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===k||k.set("\u0438\u043c\u044f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O.name)),w.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(D)})}return w}),g.addMethod(C,"\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\u0421\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u0438",(x,S)=>{var w,T,k=S[2],D=S[3],M=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]),A=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(k),L=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D);return L.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()||null===(w=this.audioSvc)||void 0===w||w.stop(),null===(T=this.audioSvc)||void 0===T||T.startCheckUI(E=>{},M.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),A.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),L.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",(x,S)=>{var w,T,k=S[2],D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]),M=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(k);return null===(w=this.config)||void 0===w||w.messageBus.removeAllTargetHandlers(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this.addSubscription(null===(T=this.config)||void 0===T?void 0:T.messageBus.addTargetHandler(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),A=>{var L;null===(L=this.config)||void 0===L||L.post(()=>{let E=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(E),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",M);let V=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),z=V.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();z&&(z.set("\u0446\u0435\u043b\u044c",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.target)),z.set("\u0442\u0435\u043a\u0441\u0442",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.text)),z.set("\u0442\u0438\u043f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.type)),z.set("\u043f\u043e\u0434\u0442\u0438\u043f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(A.subType))),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",V),g.run("\n              \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435);\n              \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n            ",v,E,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})})),x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),g.addMethod(C,"\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\u0426\u0435\u043b\u0435\u0432\u043e\u0435\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",(x,S)=>{var w,O=S[2],k=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S[1]),D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O);return null===(w=this.config)||void 0===w||w.messageBus.sendMessage(Py.builder().setTarget(k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setText(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),D}),g.addBookmarksEnvironment(C,this.uiConfig)},v=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),y=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(y);let _=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));return g.addMethod(_,"\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=this.convertBookPageText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),a,h);return C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442",(C,x)=>C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1])),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430",(C,x)=>{var w=x[2],T=x[3],O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),k=w?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null,D=T?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T):null;let M=Ur.builder().setClasses(Gz.getLastClass("")).setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),A=Xz.builder().setText(M.text).setOnClick(()=>{let E=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),V=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");m(E),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",A.tag.data),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0433\u0430\u043b\u043e\u0447\u043a\u0430",V),g.addMethod(V,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(U,Z)=>{var N=U.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Z[1]);return A.text=N.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),g.addMethod(V,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0430\u043b\u043e\u0447\u043a\u0443",(U,Z)=>{var N=U.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Z[1]);return A.classes.setCheck(N.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0433\u0430\u043b\u043e\u0447\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,E,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});A.classes.setCheck(!!k&&k.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),A.setTag(bg.builder().setData(D));let L=h();return a.set(L,M.setComponent(new Vn(zJe,A))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${L}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430",(C,x)=>{var w=x[2],T=x[3],O=x[4],k=x[5],D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),M=w?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null,A=T?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T):null,L=O?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O):null,E=k?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(k):null;let V=!1;A&&A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(Y=>{"outline"===Y&&(V=!0)});let z=Ur.builder().setClasses(Gz.getLastClass(M?M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"")).setText(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),U=KE.builder().setText(z.text).setOnClick(()=>{let Y=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(Y);let N=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");Y.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",U.tag.data),Y.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043a\u043d\u043e\u043f\u043a\u0430",N),g.addMethod(N,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(H,G)=>{var j=H.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(G[1]);return U.text=j.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),g.addMethod(N,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434",(H,G)=>{var j=H.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(G[1]);return this.onRouteEvent.run(j?j.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043a\u043d\u043e\u043f\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,Y,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});U.setTag(bg.builder().setData(L)),U.classes.setBlock(!E||E.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setType(M?M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"primary").setOutline(V);let Z=h();return a.set(Z,z.setComponent(new Vn(Rhe,U))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${Z}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432",(C,x)=>{var S=x[1],w=S?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S):null;let T=Ur.builder(),O=h(),k=h9.builder().setOnClick(D=>{let M=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(M);let A=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");M.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",k.tag.data),M.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043a\u043d\u043e\u043f\u043a\u0430",A),M.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u0441\u044b\u043b\u043a\u0430",g.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(D)),g.addMethod(A,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434",(E,V)=>{var U=E.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(V[1]);return this.onRouteEvent.run(U?U.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043a\u043d\u043e\u043f\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,M,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});return k.setTag(bg.builder().setData(w)),a.set(O,T.setComponent(new Vn(Nut,k))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0435\u0421\u0442\u043e\u043b\u0431\u0446\u044b",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let T=Ur.builder(),O=h(),D=[],M=w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),L=(this.getFragments(a,M,D,[]),c9.builder().setComponents(D.map(E=>E.component).filter(E=>!!E).map(E=>E)));return a.set(O,T.setComponent(new Vn(Put,L))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a",(C,x)=>{var w=x[2],T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),O=w?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null;let k=Ur.builder(),D=Kz.builder().setItems(T?T.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(A=>this.makeFragmentComponents(A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())):[]);D.classes.setOrdered(!!O&&O.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let M=h();return a.set(M,k.setComponent(new Vn(GJe,D))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${M}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]),A=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[4]),E=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[5]),z=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[6]);let U=Ur.builder(),Z=eU.builder();Z.setReadonly(w.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setId(E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTargetId(z.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),Z.classes.setSlava1Zdrav(1==D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava1Upok(1==D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Zdrav(2==D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Upok(2==D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Zdrav(3==D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Upok(3==D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let Y=h();return a.set(Y,U.setComponent(new Vn(Whe,Z))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${Y}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442\u041a\u043e\u0434\u0430",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]);let M=Ur.builder(),A=h();return a.set(A,M.setComponent(new Vn(Aut,a9.builder().setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).updateConfig(L=>L.setResultEnabled(O.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>0&&D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>0).setResultWidth(O.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setResultHeight(D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${A}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0425\u043e\u043b\u0441\u0442",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]);let M=Ur.builder(),A=h();return a.set(A,M.setComponent(new Vn(s9,g2.builder().setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).updateConfig(L=>{L.setWidth(O.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setHeight(D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())})))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${A}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let T=Ur.builder(),O=h();return a.set(O,T.setComponent(new Vn($c,xl.builder().setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setHideUI(!0).setParallel(!0).setLinebreaks(!0).setLink(Cl.builder().setTextIsPage(!0).setBookName("Mem").setChapter("1").setStartLine(1).setEndLine(1e3).setOnRoute(k=>{}))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430\u041f\u043e\u0421\u0441\u044b\u043b\u043a\u0435",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]),A=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[4]);let L=Ur.builder(),E=h();return a.set(E,L.setComponent(new Vn($c,xl.builder().setText(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setHideUI(!0).setParallel(!0).setLinebreaks(!0).setLink(Cl.builder().setTextIsPage(!1).setBookName(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setChapter(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setStartLine(D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setEndLine(A.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setOnRoute(V=>{}))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${E}}`)}),g.addMethod(_,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043d\u0438\u0433\u0443",(C,x)=>{var S,T=x[2],O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T);let D=k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();D=D.substring(1,D.length-1);let M=a.get(D),A=null===(S=null==M?void 0:M.component)||void 0===S?void 0:S.data;return A&&A.setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),A?k:C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(C,x)=>{var w=x[2],T=x[3],O=x[4],k=x[5],D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),M=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w),A=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(O),L=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(T),E=k?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(k):null;L&&L.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(L=null);let V=Ur.builder(),z=h(),U=Ou.builder().setItems(D.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(Z=>Z).map(Z=>pa.builder().setText(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Z.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Z.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(Z.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())));return L&&U.classes.setLabelNormal(L.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),A&&U.classes.setNoPrint(A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),U.setTag(bg.builder().setData(E)),U.setOnClick(Z=>{let Y=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(Y);let N=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");Y.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",U.tag.data),Y.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",N),Y.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u0433",C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Z.tag)),g.addMethod(N,"\u0432\u044b\u0431\u0440\u0430\u0442\u044c",(H,G)=>{var j=H.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(G[1]);return U.items.forEach(Q=>Q.setSelected(Q.tag==j.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,Y,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),a.set(z,V.setComponent(new Vn(nA,U))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${z}}`)}),g.addMethod(_,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(C,x)=>{var S,w=x[1],T=x[2],O=x[3],k=x[4],D=x[5],M=x[6],A=w?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null,L=T?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T):null,E=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(O),V=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(k),z=D?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D):null,U=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(M);A&&A.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(A=null),L&&L.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(L=null),E&&E.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(E=null),V&&V.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(V=null),z&&z.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(z=null);let Z=U.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();Z=Z.substring(1,Z.length-1);let Y=a.get(Z),N=null===(S=null==Y?void 0:Y.component)||void 0===S?void 0:S.data;return N&&(A?N.setItems(A.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map($=>$).map($=>pa.builder().setText(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==(null==L?void 0:L.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())))):N.items.forEach($=>$.setSelected($.tag==(null==L?void 0:L.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())))),E&&N.classes.setLabelNormal(E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),V&&N.classes.setNoPrint(V.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),z&&N.setTag(bg.builder().setData(z)),N?U:C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439Svg",(C,x)=>{var w=x[2],T=x[3],O=x[4],k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w),M=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T),A=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O);let L=Ur.builder(),E=h();return a.set(E,L.setComponent(new Vn(Ett,CU.builder().setText("").setGenName(k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSvgWidth(D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setSvgHeight(M.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).updateClasses(V=>V.setPrintOnly(A.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${E}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e",(C,x)=>{var w=x[2],T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w);let k=Ur.builder(),D=h(),M=xg.builder().setText("").setWhiteBack(!0);return M.menuState.setGenName("MenuDay2").setPrintOnly(O.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),T.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(A=>A).forEach(A=>{M.addCommand(La.builder().setName(A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),a.set(D,k.setComponent(new Vn(jE,M))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${D}}`)}),g.addMethod(_,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041c\u0435\u043d\u044e",(C,x)=>{var S,T=x[2],O=x[3],k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T);let A=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();A=A.substring(1,A.length-1);let L=a.get(A),E=null===(S=null==L?void 0:L.component)||void 0===S?void 0:S.data;if(E){let V=pg.builder().setGenName("MenuDay2").setPrintOnly(D.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());k.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(z=>z).forEach(z=>{V.addCommand(La.builder().setName(z.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(z.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),E.setMenuState(V)}return C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${A}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439Div",(C,x)=>{var w=x[2],T=x[3],O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w),D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T);let M=Ur.builder(),A=h(),L=[],E=[],V=k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),z=this.getFragments(a,V,E,L);return a.set(A,M.setComponent(new Vn(xU,rA.builder().setText(L.length?"":V).setId(z).setComponents(E.map(U=>U.component).filter(U=>!!U).map(U=>U)).setWaitingForSenderid(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).update(U=>{O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(Y=>{switch(Y.toLowerCase()){case"\u0440\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c":U.setFineText(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u0434\u043e":U.setPageBreakBefore(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u043f\u043e\u0441\u043b\u0435":U.setPageBreakAfter(!0);break;case"\u0442\u043e\u043b\u044c\u043a\u043e\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":U.setPrintOnly(!0);break;case"\u043d\u0435\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":U.setNoPrint(!0);break;default:U.addSClass(Y)}})})))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${A}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440",(C,x)=>{let S=Ur.builder(),w=h();return a.set(w,S.setComponent(new Vn(Vtt,TU.builder().setText("").update(T=>{})))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${w}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d",(C,x)=>{var w=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let T=kU.builder().setText("").update(D=>{});w.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(D=>D).forEach(D=>{var M,A,L,E;let V=null===(A=null===(M=D.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===M?void 0:M.get("\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"))||void 0===A?void 0:A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),z=null===(E=null===(L=D.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===L?void 0:L.get("\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442"))||void 0===E?void 0:E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();z&&(z=z.startsWith("{")?z.substring(1):z,z=z.endsWith("}")?z.substring(0,z.length-1):z);let U=a.get(z||"");U&&T.addItem(DU.builder().setTitle(V||"\u041f\u0443\u043d\u043a\u0442\u0438\u043a").setComponent(U.component))});let O=Ur.builder(),k=h();return a.set(k,O.setComponent(new Vn($tt,T))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${k}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let T=EU.builder().setText("").update(D=>{}),O=Ur.builder(),k=h();return a.set(k,O.setComponent(new Vn(pct,T))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${k}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let T=VH.builder().setText("").update(D=>{}),O=Ur.builder(),k=h();return a.set(k,O.setComponent(new Vn(mct,T))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${k}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let T=LH.builder().setText("").update(D=>{}),O=Ur.builder(),k=h();return a.set(k,O.setComponent(new Vn(gct,T))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${k}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let T=n9.builder().setText("").update(D=>{}),O=Ur.builder(),k=h();return a.set(k,O.setComponent(new Vn(put,T))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${k}}`)}),g.run(p,v,y,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}getFragments(l,a,h,d){let f="";return a.startsWith("{")&&a.endsWith("}")&&(d=a.split(",").filter(p=>{let g=!1;return p.startsWith("{")&&p.endsWith("}")&&(g=!0),g}).map(p=>p.substring(1,p.length-1))),d.forEach(p=>{let g=l.get(p);g&&(f||(f=p),h.push(g))}),f}makeFragmentComponents(l){let a=this.converter.parseFragments(new Map,f=>f,l),h=[_S.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(!1).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(yS.\u0422\u0435\u043a\u0441\u0442)],d=o1.builder().setText(l);return d.config.setLineIndex(0).setBook($I.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(h)),new Vn(XE,d)}loadBookPageText(l,a=null){if(!l)return void(a&&a(!1));let h=0,f=new Map,p=$I.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438([]);this.convertBookPageText(l,f,()=>""+h++).split("\n").forEach((m,v)=>{let y=this.transformLine(m),_=this.converter.parseFragments(f,C=>{let x="";if(this.libraryInfo){let S=this.libraryInfo.content.find(w=>{var T;return null===(T=w.path2)||void 0===T?void 0:T.find(O=>O==C)});S&&(x=S.name)}return x},y.trim(),(!this.uiConfig||this.uiConfig.ui.coloredTranslations.getBooleanValue())&&this.books.length%2?"redDark":"red"),b=o1.builder().setText(y.trim());b.config.setBook(p).setBookSvc(this),p.\u0441\u0442\u0440\u043e\u043a\u0438.push(_S.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(_).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new Vn(XE,b)))}),this.books.push(p.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(this.books.length)),this.generateLineIndexes(),a&&a(!0)}isZeroLineFound(l){return 0==l[0].fragments.length||1==l[0].\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.length&&null!=l[0].\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.find(a=>!!a.classes.redDark||!!a.classes.red)}generateLineIndexes(){this.lineIndexes=[];let l=this.books.map(f=>f.\u0441\u0442\u0440\u043e\u043a\u0438.length+(this.isZeroLineFound(f.\u0441\u0442\u0440\u043e\u043a\u0438)?0:1)).reduce((f,p)=>Math.max(f,p)),a=!1;this.books.forEach(f=>{let p=!1;this.isZeroLineFound(f.\u0441\u0442\u0440\u043e\u043a\u0438)&&(p=a=!0);let g=()=>_S.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new Vn(XE,o1.builder())),m=f.\u0441\u0442\u0440\u043e\u043a\u0438.map(v=>0==v.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.length).reduce((v,y)=>v&&y,!0);for(f.\u0441\u0442\u0440\u043e\u043a\u0438.length<l&&!p&&(f.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),f.\u0441\u0442\u0440\u043e\u043a\u0438.unshift(g()));f.\u0441\u0442\u0440\u043e\u043a\u0438.length<l;)m&&f.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),f.\u0441\u0442\u0440\u043e\u043a\u0438.push(g())});let h=this.getNormalBookName(),d=h.indexOf("VZ")>=0||h.indexOf("NZ")>=0;this.books.forEach((f,p)=>{for(f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(p),f.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((g,m)=>{g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(d),g.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442&&g.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.constructor===o1&&g.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.config.setLineIndex(m)});this.lineIndexes.length<f.\u0441\u0442\u0440\u043e\u043a\u0438.length;)this.lineIndexes.push(this.lineIndexes.length)})}toggleLanguage(l){return this.isLanguageEnabled(l)?this.bookLanguages=this.bookLanguages.filter(a=>a!=l):this.bookInfo&&null!=this.bookInfo.content.find(a=>a.name==l)&&this.bookLanguages.push(l),!this.bookLanguages.length&&this.bookInfo&&this.bookInfo.content&&this.bookLanguages.push(this.bookInfo.content[0].name),this}getShortBookName(l=null){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let a=l||this.bookName,h=this.getBookContentNamePath(a),d=a;if(h){if(!h.path2||!h.path2.length)throw new Error(`\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0438\u043c\u044f \u0434\u043b\u044f \u043a\u043d\u0438\u0433\u0438 "${a}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.`);d=h.path2[0]}return d}getNormalBookName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let l=this.getBookContentNamePath(this.bookName),a=this.bookName;return l&&(a=l.name),a}getBookChapterNewName(){let l=this.bookChapterNewName,a=l1.builder().parse(this.bookName);if(null!=a&&a.length&&a[0].length){let h=a[0][0];h.type==Xl.Link&&(l=""+h.startChapter)}return l}getBookTitleName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let l=this.getBookSettingsNamePath(this.bookName),a=this.bookName;return l&&(a=l.value),a}getChapterTitleName(){var l,a;if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let h=this.bookChapter?this.bookChapter.name:"1",d=null===(a=null===(l=this.bookContent[0])||void 0===l?void 0:l.parsed)||void 0===a?void 0:a.settings.find(p=>p.name===h),f="";if(d){f=d.value;let p=".txt";f.endsWith(p)&&(f=f.substring(0,f.length-p.length)),+f==+h&&(f="")}return f}getNormalBookNameByBookPath(l){var a;let h=null===(a=this.libraryInfo)||void 0===a?void 0:a.content.find(d=>l.startsWith(d.path));return h?h.name:null}transformLine(l){return this.linesTransformer?this.linesTransformer.transform(l):l}}class p9{constructor(){}static builder(){return new p9}}class g9 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.bookName="",this.bookTitle="",this.bookChapter="",this.bookLanguages=[],this.printEventsEmitter=new wt,this.printerHandler=null,this.showSettings=!0}static builder(){return new g9("",null,null,p9.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setBookName(l){return this.bookName=l,this}setBookTitle(l){return this.bookTitle=l,this}setBookChapter(l){return this.bookChapter=l,this}setBookLanguages(l){return this.bookLanguages=l,this}setEpubPrinterHandler(l){return this.printerHandler=l,this}setShowSettings(l){return this.showSettings=l,this}}const Lut=["booksViewTables"];function But(c,l){1&c&&ue(0,"app-dynamic-errors",18),2&c&&R("data",q(2).bookTitleData)}const Vut=function(c,l){return{btn:!0,"btn-primary":c,"btn-primary-outline":l,"btn-block":!0}};function zut(c,l){if(1&c){const a=at();I(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(d){return De(a),ke(q(2).showSettings=d)}),I(1,"clr-accordion-title"),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),F(),I(3,"clr-accordion-content"),ue(4,"app-dynamic-settings"),I(5,"div",25)(6,"div",26)(7,"div",27)(8,"button",28),ee("click",function(){return De(a),ke(q(2).printBook())}),ue(9,"clr-icon",29),ie(10," \u041f\u0435\u0447\u0430\u0442\u044c PDF "),F()(),I(11,"div",27)(12,"button",30),ee("click",function(){return De(a),ke(q(2).printBookEpub())}),ue(13,"clr-icon",31),ie(14," \u041f\u0435\u0447\u0430\u0442\u044c EPUB "),F()()()()()()}if(2&c){const a=q(2);R("clrAccordionPanelOpen",a.showSettings),P(12),R("ngClass",as(2,Vut,!a.modalPrintEpubFlag,a.modalPrintEpubFlag))}}function Uut(c,l){if(1&c){const a=at();I(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(d){return De(a),ke(q(2).showLanguages=d)}),I(1,"clr-accordion-title"),ie(2,"\u042f\u0437\u044b\u043a\u0438 \u0438 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b"),F(),I(3,"clr-accordion-content"),ue(4,"app-dynamic-content-toolbar",18),F()()}if(2&c){const a=q(2);R("clrAccordionPanelOpen",a.showLanguages),P(4),R("data",a.toolbarLangData)}}function Hut(c,l){if(1&c){const a=at();I(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(d){return De(a),ke(q(2).showChapters=d)}),I(1,"clr-accordion-title"),ie(2,"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435"),F(),I(3,"clr-accordion-content"),ue(4,"app-dynamic-content-toolbar",18),F()()}if(2&c){const a=q(2);R("clrAccordionPanelOpen",a.showChapters),P(4),R("data",a.toolbarData)}}function $ut(c,l){if(1&c&&(I(0,"div",3),ue(1,"app-dynamic-errors",18),X(2,But,1,1,"app-dynamic-errors",21),I(3,"clr-accordion",22),X(4,zut,15,5,"clr-accordion-panel",23),X(5,Uut,5,2,"clr-accordion-panel",23),X(6,Hut,5,2,"clr-accordion-panel",23),F()()),2&c){const a=q();R("ngClass",a.getMainDivClasses()),P(1),R("data",a.errorsData),P(1),R("ngIf",a.toolbarLangData),P(2),R("ngIf",a.showSettings),P(1),R("ngIf",a.showLanguages),P(1),R("ngIf",a.showChapters&&!a.staticView)}}function Wut(c,l){if(1&c){const a=at();I(0,"button",30),ee("click",function(){return De(a),ke(q(2).onPrev())}),ie(1,"<<"),F()}2&c&&R("ngClass",q(2).getChapterButtonClass())}function Gut(c,l){if(1&c){const a=at();I(0,"button",30),ee("click",function(){return De(a),ke(q(2).scrollToText())}),ie(1),F()}if(2&c){const a=q(2);R("ngClass",a.getChapterButtonClass()),P(1),Ut(a.getCurrentChapterName())}}function Qut(c,l){if(1&c){const a=at();I(0,"button",30),ee("click",function(){return De(a),ke(q(2).onNext())}),ie(1,">>"),F()}2&c&&R("ngClass",q(2).getChapterButtonClass())}const jut=function(c){return{"clr-row":!0,"fade-in-3":!0,"bottom-top-space":!0,"no-print":c}};function qut(c,l){if(1&c&&(I(0,"div",3)(1,"div",32),X(2,Wut,2,1,"button",33),F(),I(3,"div",27),X(4,Gut,2,2,"button",33),F(),I(5,"div",32),X(6,Qut,2,1,"button",33),F()()),2&c){const a=q();R("ngClass",ys(4,jut,!!a.changesDetectorBookDataText.oldRawValue)),P(2),R("ngIf",a.bookSvc.isPrevEnabled()),P(2),R("ngIf",a.bookSvc.lineIndexes.length),P(2),R("ngIf",a.bookSvc.isNextEnabled())}}function Zut(c,l){1&c&&(I(0,"div",36)(1,"div",37),ue(2,"app-dynamic-spinner"),F()())}function Xut(c,l){if(1&c&&(I(0,"span",3),ie(1),F()),2&c){const a=l.$implicit;R("ngClass",a.classes),P(1),Ut(a.text)}}function Yut(c,l){if(1&c&&(I(0,"div",3),X(1,Xut,2,2,"span",39),F()),2&c){const a=l.$implicit,h=l.index,d=q(3);R("ngClass",d.getColumnClass(a,h,d.bookSvc.books.length)),P(1),R("ngForOf",d.getBookFragments(h,a,-1))}}function Kut(c,l){if(1&c&&(I(0,"div",38),X(1,Yut,2,2,"div",39),F()),2&c){const a=q(2);P(1),R("ngForOf",a.bookSvc.books)}}function Jut(c,l){if(1&c){const a=at();I(0,"div",3)(1,"span",30),ee("click",function(){De(a);const d=q().$implicit;return ke(q(2).selectLine(d))}),ue(2,"app-add-component",40),F()()}if(2&c){const a=l.$implicit,h=l.index,d=q().$implicit,f=q(2);R("ngClass",f.getColumnClass(a,h,f.bookSvc.books.length)),P(1),R("ngClass",f.getLineSelectionClass(a,d)),P(1),R("component",f.getComponent(a,d))}}function eht(c,l){if(1&c&&(I(0,"div",38),X(1,Jut,3,3,"div",39),F()),2&c){const a=q(2);P(1),R("ngForOf",a.bookSvc.books)}}function tht(c,l){if(1&c&&(I(0,"div"),X(1,Zut,3,0,"div",6),X(2,Kut,2,1,"div",34),X(3,eht,2,1,"div",35),F()),2&c){const a=q();P(1),R("ngIf",!a.bookSvc.lineIndexes.length),P(1),R("ngIf",!a.hideUI),P(1),R("ngForOf",a.getBookIndexes(a.bookSvc.lineIndexes))}}function nht(c,l){1&c&&(I(0,"div",37),ue(1,"app-dynamic-spinner"),F())}function iht(c,l){if(1&c&&(I(0,"span",3),ie(1),F()),2&c){const a=l.$implicit;R("ngClass",a.classes),P(1),Ut(a.text)}}function rht(c,l){if(1&c&&(I(0,"div",43),X(1,iht,2,2,"span",39),F()),2&c){const a=l.$implicit,h=l.index,d=q(2);R("ngClass",d.getColumnClass(a,h,d.bookSvc.books.length))("hidden",d.hideUI),P(1),R("ngForOf",d.getBookFragments(h,a,-1))}}function sht(c,l){1&c&&(I(0,"span",46),ie(1,"."),F())}function oht(c,l){if(1&c){const a=at();I(0,"span",30),ee("click",function(){const f=De(a).$implicit;return ke(q(3).selectLine(f))}),I(1,"span"),ue(2,"app-add-component",40),F(),X(3,sht,2,0,"span",45),F()}if(2&c){const a=l.$implicit,h=q().$implicit,d=q(2);R("ngClass",d.getLineSelectionClass(h,a)),P(2),R("component",d.getComponent(h,a)),P(1),R("ngIf",d.isSpaceAppended(h,a))}}function aht(c,l){if(1&c&&(I(0,"div",3),X(1,oht,4,3,"span",44),F()),2&c){const a=l.$implicit,h=l.index,d=q(2);R("ngClass",d.getColumnClass(a,h,d.bookSvc.books.length)),P(1),R("ngForOf",d.getBookIndexes(d.bookSvc.lineIndexes))}}function lht(c,l){if(1&c&&(I(0,"div",36),X(1,nht,2,0,"div",41),X(2,rht,2,3,"div",42),X(3,aht,2,2,"div",39),F()),2&c){const a=q();P(1),R("ngIf",!a.bookSvc.lineIndexes.length),P(1),R("ngForOf",a.bookSvc.books),P(1),R("ngForOf",a.bookSvc.books)}}function cht(c,l){1&c&&(I(0,"div",49),ue(1,"app-dynamic-spinner"),F())}function uht(c,l){if(1&c&&(I(0,"span",3),ie(1),F()),2&c){const a=l.$implicit;R("ngClass",a.classes),P(1),Ut(a.text)}}function hht(c,l){if(1&c&&(I(0,"div",3)(1,"div",50),X(2,uht,2,2,"span",39),F()()),2&c){const a=l.$implicit,h=l.index,d=q(3);R("ngClass",d.getRowClass(a,h,d.bookSvc.books.length)),P(2),R("ngForOf",d.getBookFragments(h,a,-1))}}function dht(c,l){if(1&c&&(I(0,"div",49),X(1,hht,3,2,"div",39),F()),2&c){const a=q(2);P(1),R("ngForOf",a.bookSvc.books)}}function fht(c,l){if(1&c){const a=at();I(0,"div",3)(1,"div",50)(2,"span",30),ee("click",function(){De(a);const d=q().$implicit;return ke(q(2).selectLine(d))}),ue(3,"app-add-component",40),F()()()}if(2&c){const a=l.$implicit,h=l.index,d=q().$implicit,f=q(2);R("ngClass",f.getRowClass(a,h,f.bookSvc.books.length)),P(2),R("ngClass",f.getLineSelectionClass(a,d)),P(1),R("component",f.getComponent(a,d))}}function pht(c,l){if(1&c&&(I(0,"div",49),X(1,fht,4,3,"div",39),F()),2&c){const a=q(2);P(1),R("ngForOf",a.bookSvc.books)}}function ght(c,l){if(1&c&&(I(0,"div"),X(1,cht,2,0,"div",47),X(2,dht,2,1,"div",47),X(3,pht,2,1,"div",48),F()),2&c){const a=q();P(1),R("ngIf",!a.bookSvc.lineIndexes.length),P(1),R("ngIf",!a.hideUI),P(1),R("ngForOf",a.getBookIndexes(a.bookSvc.lineIndexes))}}function mht(c,l){1&c&&(I(0,"div",37),ue(1,"app-dynamic-spinner"),F())}function vht(c,l){1&c&&(I(0,"span",46),ie(1,"."),F())}function yht(c,l){if(1&c&&(I(0,"span",3),ie(1),F()),2&c){const a=l.$implicit;R("ngClass",a.classes),P(1),Ut(a.text)}}function _ht(c,l){if(1&c&&(I(0,"span",3),X(1,vht,2,0,"span",45),X(2,yht,2,2,"span",39),F()),2&c){const a=l.$implicit,h=l.index,d=q(3);R("ngClass",d.getRowClass(a,h,d.bookSvc.books.length,!1)),P(1),R("ngIf",h>0),P(1),R("ngForOf",d.getBookFragments(h,a,-1))}}function bht(c,l){if(1&c&&(I(0,"div",50),X(1,_ht,3,3,"span",39),F()),2&c){const a=q(2);P(1),R("ngForOf",a.bookSvc.books)}}function Cht(c,l){1&c&&(I(0,"span",46),ie(1,"."),F())}function xht(c,l){if(1&c){const a=at();I(0,"span",3)(1,"span",30),ee("click",function(){De(a);const d=q().$implicit;return ke(q(2).selectLine(d))}),X(2,Cht,2,0,"span",45),ue(3,"app-add-component",40),F()()}if(2&c){const a=l.$implicit,h=l.index,d=q().$implicit,f=q(2);R("ngClass",f.getRowClass(a,h,f.bookSvc.books.length,!1)),P(1),R("ngClass",f.getLineSelectionClass(a,d)),P(1),R("ngIf",h>0||f.isLineIndexed(a,d)),P(1),R("component",f.getComponent(a,d))}}function wht(c,l){if(1&c&&(I(0,"span"),X(1,xht,4,4,"span",39),F()),2&c){const a=q(2);P(1),R("ngForOf",a.bookSvc.books)}}function Sht(c,l){if(1&c&&(I(0,"div",51),X(1,mht,2,0,"div",41),X(2,bht,2,1,"div",52),I(3,"div",50),X(4,wht,2,1,"span",53),F()()),2&c){const a=q();P(1),R("ngIf",!a.bookSvc.lineIndexes.length),P(1),R("ngIf",!a.hideUI),P(2),R("ngForOf",a.getBookIndexes(a.bookSvc.lineIndexes))}}function Tht(c,l){if(1&c){const a=at();I(0,"button",30),ee("click",function(){return De(a),ke(q(2).onPrev())}),ie(1,"<<"),F()}2&c&&R("ngClass",q(2).getChapterButtonClass())}function Oht(c,l){if(1&c){const a=at();I(0,"button",30),ee("click",function(){return De(a),ke(q(2).scrollToText())}),ie(1),F()}if(2&c){const a=q(2);R("ngClass",a.getChapterButtonClass()),P(1),Ut(a.getCurrentChapterName())}}function Dht(c,l){if(1&c){const a=at();I(0,"button",30),ee("click",function(){return De(a),ke(q(2).onNext())}),ie(1,">>"),F()}2&c&&R("ngClass",q(2).getChapterButtonClass())}const kht=function(c){return{"clr-row":!0,"fade-in-3":!0,"top-space":!0,"no-print":c}};function Mht(c,l){if(1&c&&(I(0,"div",3)(1,"div",32),X(2,Tht,2,1,"button",33),F(),I(3,"div",27),X(4,Oht,2,2,"button",33),F(),I(5,"div",32),X(6,Dht,2,1,"button",33),F()()),2&c){const a=q();R("ngClass",ys(4,kht,!!a.changesDetectorBookDataText.oldRawValue)),P(2),R("ngIf",a.bookSvc.isPrevEnabled()),P(2),R("ngIf",a.bookSvc.lineIndexes.length),P(2),R("ngIf",a.bookSvc.isNextEnabled())}}function Eht(c,l){if(1&c){const a=at();I(0,"div",27)(1,"button",55),ee("click",function(){return De(a),ke(q(2).printBookEpub())}),ue(2,"clr-icon",58),ie(3,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),F()()}}const Aht=function(c,l){return{"clr-col-6":c,"clr-col-12":l}};function Iht(c,l){if(1&c){const a=at();I(0,"div",54)(1,"div",3)(2,"button",55),ee("click",function(){return De(a),ke(q().printBook())}),ue(3,"clr-icon",56),ie(4,"\u041f\u0435\u0447\u0430\u0442\u044c PDF"),F()(),X(5,Eht,4,0,"div",57),F()}if(2&c){const a=q();P(1),R("ngClass",as(2,Aht,a.bookData.enableEpub,!a.bookData.enableEpub)),P(4),R("ngIf",a.bookData.enableEpub)}}function Pht(c,l){if(1&c){const a=at();I(0,"button",15),ee("click",function(){return De(a),ke(q().modalPrintEpubFlag=!1)}),ue(1,"clr-icon",59),ie(2," \u041e\u0442\u043c\u0435\u043d\u0430"),F()}}function Rht(c,l){if(1&c){const a=at();I(0,"button",14),ee("click",function(){return De(a),ke(q().onStartPrintEpub())}),ue(1,"clr-icon",56),ie(2," \u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c"),F()}}class WI{constructor(l){this.transformers=l}static builder(){return new WI([])}addTransformer(l){return this.transformers.push(l),this}transform(l){let a=l;return this.transformers.forEach(h=>a=h.transform(a)),a}}class GI{static builder(){return new GI}transform(l){let a="";for(let h=0;h<l.length;h++){let d=l.charAt(h);a+="["==d?"{\u043a}"+d:"]"==d?d+"{/\u043a}":d}return a}}class QI{constructor(l=200){this.maxStringLength=l}static builder(){return new QI}getIndexCount(l,a){let h=0,d=0;for(var f=new RegExp(a);d<l.length;){let g=l.substring(d);var p=f.exec(g);p?(++h,d=d+p.index+p[0].length):d+=g.length}return h}transform(l){let a=l.indexOf(":"),h=l;if(a>=0&&a<=this.maxStringLength&&a+1==l.length){let d=l.substring(0,a+1),f=d.toLowerCase();[{str:"\\.",count:0},{str:"\\/",count:0}].map(p=>this.getIndexCount(f,p.str)<=p.count).reduce((p,g)=>g&&p,!0)&&[{str:"\u0442\u0440\u043e\u043f\u0430\u0440",count:1},{str:"\u043a\u043e\u043d\u0434\u0430\u043a",count:1},{str:"\u0433\u043b\u0430\u0441",count:1}].map(p=>this.getIndexCount(f,p.str)>=p.count).reduce((p,g)=>g||p,!1)&&(d.startsWith("*")&&(d=d.substring(1)),h=`{\u043a}${d}{/\u043a}${l.substring(a+1)}`)}return h}}class m9{constructor(l){this.search=l,this.includeWords=[],this.excludeWords=[]}static builder(){return new m9("")}setup(){let l=this.search.split(/\s+/);this.includeWords=[],this.excludeWords=[];for(let a=0;a<l.length;++a)if("\u041d\u0415"==l[a]){if(a+1<l.length){let h=l[++a].trim();h&&this.excludeWords.push(h.toLowerCase())}}else l[a].trim()&&this.includeWords.push(l[a].trim().toLowerCase())}setSearch(l){return this.search=l,this.setup(),this}startsWith(l,a,h){let d="";return h.forEach(f=>{var p=new RegExp(f);let g=l.substring(a);var m=p.exec(g);m&&0==m.index&&d.length<f.length&&(d=m[0])}),d}transform(l){if(0==this.includeWords.length)return l;let a=l.toLowerCase(),h="",d=-1,f=p=>{let g=0;if(d>=0){let m=l.substring(d,p);h+=m,g=m.length,d=-1}return g};for(let p=0;p<l.length;){let g=this.startsWith(a,p,this.includeWords);if(g){let m=p;f(p),h+=`{\u043a}${l.substring(m,m+g.length)}{/\u043a}`,p+=g.length}else d<0&&(d=p),++p}return f(l.length),h}}let $c=(()=>{class c{constructor(a,h,d,f,p,g,m){this.config=a,this.uiConfig=h,this.cacheService=d,this.bookmarksSvc=f,this.memorialSvc=p,this.themeSvc=g,this.audioSvc=m,this.ready=!1,this.bookTitleData=Nc.builder(),this.errorsData=Nc.builder(),this.stgShowSettings=N0.builder(),this.stgLanguages=N0.builder(),this.stgChapters=N0.builder(),this.allSettings=HE.builder().add(this.stgShowSettings).add(this.stgLanguages).add(this.stgChapters),this.changesDetectorSendReadyMessage=ns.builder(),this.changesDetectorBookDataText=ns.builder(),this.changesDetectorFacePage=ns.builder(),this.changesDetectorErrors=ns.builder(),this.changesDetectorNewTitle=ns.builder(),this.changesDetectorRequestedPrintLogName=ns.builder(),this.changesDetectorLanguages=ns.builder(),this.changesDetectorChapters=ns.builder(),this.changesDetectorChapters2=ns.builder(),this.changesDetectorChapters3=ns.builder(),this.fineTextDetector=za.builder(),this.getColumnClassDetector=za.builder(),this.getBookIndexesDetector=za.builder(),this.getChapterButtonClassDetector=za.builder(),this.getMainDivClassesDetector=za.builder(),this.menuLinksOld=null,this.menuLinks=null,this.dToolbarLangData=Ou.builder().setItems([]).setOnClick(v=>{v.setSelected(!v.selected),this.bookSvc.toggleLanguage(v.tag).reloadBooks(),this.saveChapter()}),this.dToolbarData=Ou.builder().setItems([]).setOnClick(v=>{if(this.toolbarData.items.forEach(y=>y.setSelected(y===v)),"\u0412\u0441\u0435"==v.text){let y=this.bookSvc.getShortBookName(null),_=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(_){let C=_.parsed.content.map(x=>`${y}.${x.name}:1-1000!/*\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div('\u0440\u0430\u0437\u0440\u044b\u0432\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438', '', '');*/`).join("\r\n");this.changesDetectorBookDataText.checkAndUpdate(C),this.bookSvc.loadBookByPageText(C,!1,"")}}else this.changesDetectorBookDataText.checkAndUpdate(""),this.bookSvc.bookContent.length?this.bookSvc.loadPage(v.text):this.config.post(()=>{this.uiConfig.ui.currentChapter.setStringValue(v.text),this.bookSvc.clear(void 0,void 0,void 0,void 0,!0),this.reload()});this.saveChapter()}),this.startLineSelection=-1,this.endLineSelection=-1,this.modalAddBookmarkFlag=!1,this.modalPrintEpubFlag=!1,this.printEpubData=g9.builder(),this.printEpubDataEventsSubscription=null,this.printing=!1,this.requestedPrintLogName="",this.printLogName="\u041a\u043d\u0438\u0433\u0438",this.workerSvc=Ua.builder(),this.bookServerSvc=new Oz((v,y)=>{this.config.post(()=>{this.bookSvc.post(v,y)})}),this.bookSvc=new f9((v,y)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(y):this.bookServerSvc.post(v,y)})}),this.handleMemorialNewTitleTargetSubscriptioin=null}get showSettings(){return this.stgShowSettings.enabled}set showSettings(a){this.stgShowSettings.setEnabled(a)}get showLanguages(){return this.stgLanguages.enabled}set showLanguages(a){this.stgLanguages.setEnabled(a)}get showChapters(){return this.stgChapters.enabled}set showChapters(a){this.stgChapters.setEnabled(a)}get toolbarLangData(){return this.syncToolbarData(),this.dToolbarLangData}get toolbarData(){return this.syncToolbarData(),this.dToolbarData}get staticView(){return this.bookData.link&&(this.bookData.link.textIsPage||this.bookData.link.chapter&&(this.bookData.link.startLine>0||this.bookData.link.endLine>0))}get hideUI(){return this.bookData.hideUI}get showPrintButtons(){return this.bookData.showPrintButtons}getMenuLinks(){return this.menuLinks||(this.menuLinks=this.bookData.menuLinks,null!=this.menuLinks||(this.menuLinks=[],["\u043c\u0435\u043d\u044e","\u043a\u043d\u0438\u0433\u0430","\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438","\u0441\u043f\u0440\u0430\u0432\u043a\u0430"].forEach(a=>{switch(a){case"\u043c\u0435\u043d\u044e":this.menuLinks.push(ei.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.menuLinks.push(ei.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043a\u043d\u0438\u0433\u0430":this.menuLinks.push(ei.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0430").setShape("book").setIsActive(()=>!0));break;case"\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438":this.menuLinks.push(ei.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")},0)}).setIsActive(()=>!1));break;case"\u0441\u043f\u0440\u0430\u0432\u043a\u0430":this.menuLinks.push(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")},0)}).setIsActive(()=>{var h;let d=null===(h=this.bookSvc.bookInfo)||void 0===h?void 0:h.settings.find(f=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==f.name.toLowerCase());return!!d&&"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"==d.value}))}}))),this.menuLinks}saveChapter(){var a,h;if(this.bookSvc.bookChapter){this.uiConfig.ui.currentChapter.setStringValue(this.bookSvc.bookChapter.name),this.uiConfig.ui.currentLanguages.setStringValue(this.bookSvc.bookLanguages.join("|"));let d=null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.settings.find(g=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==g.name.toLowerCase()),f=null===(h=this.bookSvc.libraryInfo)||void 0===h?void 0:h.content.find(g=>g.name==this.bookSvc.bookName),p=f?f.path2[0]+". "+this.bookSvc.bookChapter.name:"";this.uiConfig.ui.currentBookName.setStringValue(d?d.value:""),this.uiConfig.ui.currentBookLink.setStringValue(p)}}get parallel(){return null!=this.bookData.parallel?this.bookData.parallel:this.uiConfig.ui.parallel.getAndVerifyBooleanValue()}get lineBreaks(){return null!=this.bookData.linebreaks?this.bookData.linebreaks:this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()}get bookData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){this.bookData.printerHandler.setHandler(a=>this.onPrintEpub(a)),this.bookSvc.onNewTitleEvent.setOnEventHandler((a,h)=>this.requestedPrintLogName=""+h),this.bookData.handleMemorialNewTitleTarget&&(this.handleMemorialNewTitleTargetSubscriptioin&&this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=this.config.messageBus.addTargetHandler(this.bookData.handleMemorialNewTitleTarget,a=>{"MemorialNewTitle"===a.type&&this.config.post(()=>{this.requestedPrintLogName=""+a.text})}))}ngOnDestroy(){this.handleMemorialNewTitleTargetSubscriptioin&&(this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=null),this.bookSvc.onNewTitleEvent.setOnEventHandler(null),this.bookSvc.onPageLoadEvent.setOnEventHandler(null),this.workerSvc.unsubscribe(),this.staticView||this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0),this.bookSvc.onDestroy()}ngAfterViewInit(){this.changesDetectorSendReadyMessage.checkAndUpdate(!1),this.memorialSvc.isReady().then(a=>{a.success?this.memorialSvc.getMemorials()?this.onMyInit():this.memorialSvc.reloadMemorials(()=>{this.onMyInit()}):this.onMyInit()},a=>{this.onMyInit()})}onMyInit(){this.clearSelection(),(!this.staticView||this.bookData.forceMenu)&&this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.getMenuLinks())},0),this.bookTitleData.setActions([Fc.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings}),Fc.builder().setText("\u0413\u043b\u0430\u0432\u044b").setEnabled(!this.staticView).setOnClick(()=>{this.showChapters=!this.showChapters}),Fc.builder().setText("\u042f\u0437\u044b\u043a\u0438").setOnClick(()=>{this.showLanguages=!this.showLanguages})]),this.workerSvc.enabled()?this.workerSvc.setOnMessage(a=>{this.config.post(()=>{this.bookSvc.post(null,a)})}):this.bookServerSvc.setCacheService(new Tz(new cD)),this.bookSvc.setLineTransformer(this.bookData.search?WI.builder().addTransformer(GI.builder()).addTransformer(QI.builder()).addTransformer(m9.builder().setSearch(this.bookData.search)):WI.builder().addTransformer(GI.builder()).addTransformer(QI.builder())),this.bookSvc.onPageLoadEvent.setOnEventHandler(a=>{this.config.post(()=>this.scrollToText(),100)}),this.bookSvc.onRouteEvent.setOnEventHandler((a,h)=>{this.config.post(()=>this.bookData.link.route(h),100)}),this.bookSvc.setUIConfig(this.uiConfig).setConfig(this.config).setMemorial(this.memorialSvc).setAudio(this.audioSvc),this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()),this.reload(),this.ready=!0}reload(){let a=this.bookData.link.languages&&this.bookData.link.languages.length>0?this.bookData.link.languages:this.uiConfig.ui.currentLanguages.getStringValue().split("|").filter(h=>!!h);this.bookData.link.textIsPage?(this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text),this.bookSvc.loadBookByPageText(this.bookData.text)):this.bookSvc.loadBookByName(this.bookData.text,a,this.staticView?this.bookData.link.chapter:this.uiConfig.ui.currentChapter.getStringValue())}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return this.bookData.link.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}showMenu(){this.bookData&&this.bookData.link&&this.bookData.link.route&&this.bookData.link.route("")}getColumnClass(a,h,d){let f=this.getColumnClassRaw(h,d);return a.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u043e\u043b\u0431\u0446\u043e\u0432.checkAndGetValue(f)}getColumnClassRaw(a,h){var d,f,p,g;let m=12,v=m/h,y=0;for(let b=0;b<=a;b++)y=b%2?Math.floor(v):Math.ceil(v),y>m&&(y=m),m-=y;let _={};return _["clr-col-"+y]=!0,_["bg-3"]=a%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),_.altText=a%2,_.cs=null===(f=null===(d=this.bookSvc.bookContent[a])||void 0===d?void 0:d.parsed)||void 0===f?void 0:f.getCs(),_.cs2=null===(g=null===(p=this.bookSvc.bookContent[a])||void 0===p?void 0:p.parsed)||void 0===g?void 0:g.getCs2(),_["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,_["fade-in-3"]=!0,_}getRowClass(a,h,d,f=!0){let p=this.getRowClassRaw(h,d,f);return a.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u0440\u043e\u043a.checkAndGetValue(p)}getRowClassRaw(a,h,d=!0){var f,p,g,m;let v=12,y=v/h,_=0;for(let C=0;C<=a;C++)_=C%2?Math.floor(y):Math.ceil(y),_>v&&(_=v),v-=_;let b={};return b["clr-row"]=d,b["bg-3"]=a%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),b.altText=a%2,b.cs=null===(p=null===(f=this.bookSvc.bookContent[a])||void 0===f?void 0:f.parsed)||void 0===p?void 0:p.getCs(),b.cs2=null===(m=null===(g=this.bookSvc.bookContent[a])||void 0===g?void 0:g.parsed)||void 0===m?void 0:m.getCs2(),b["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,b["fade-in-3"]=!0,b}translateLanguageName(a){let h=a.replace(/\u0426\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439/gi,"\u0426\u0421");return h=h.replace(/\u0413\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u0439/gi,"\u0413\u0440"),h=h.replace(/\u0420\u0443\u0441\u0441\u043a\u0438\u0439/gi,"\u0420\u0443\u0441"),h}syncToolbarData(){var a,h;if(this.bookData.link.textIsPage&&this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text))return void this.config.post(()=>{this.bookSvc.loadBookByPageText(this.bookData.text)});if(this.ready&&this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()))return void this.config.post(()=>{this.bookSvc.clear(!0,!0,[],!0,!0),this.reload()});let d=this.changesDetectorErrors.checkAndUpdate(this.bookSvc.errors),f=!1,p="";if(this.bookSvc.bookInfo){if(this.requestedPrintLogName)p=this.requestedPrintLogName;else{p=this.bookSvc.getBookTitleName();let v=this.bookSvc.getChapterTitleName();p&&v&&(p+=": "+v)}f=this.changesDetectorNewTitle.checkAndUpdate(p)}else f=this.changesDetectorNewTitle.checkAndUpdate("")||this.changesDetectorRequestedPrintLogName.checkAndUpdate(this.requestedPrintLogName),f&&(p=this.requestedPrintLogName?this.requestedPrintLogName:this.config.getApplication().name);let g=this.changesDetectorLanguages.checkAndUpdate(null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.content),m=this.changesDetectorChapters.checkAndUpdate(this.bookSvc.bookContent)||this.changesDetectorChapters2.checkAndUpdate(this.bookSvc.bookContent.length)||this.changesDetectorChapters3.checkAndUpdate(null===(h=this.bookSvc.bookChapter)||void 0===h?void 0:h.name);(d||f||g||m)&&this.config.post(()=>{d&&this.syncErrors(),f&&this.syncBookTitleData(p,p?[p]:[]),g&&this.syncLanguages(),m&&this.syncChapters()})}syncErrors(){this.errorsData.setErrors(this.bookSvc.errors)}syncBookTitleData(a,h){this.printLogName=a,this.bookTitleData.errors[0]!=a&&(this.bookTitleData.setErrors(h),this.bookTitleData.classes.setAlertClass("alert-success").setAlertShape(""))}syncLanguages(){var a;this.dToolbarLangData.items.length!=(null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.content.length)&&this.dToolbarLangData.setItems([]),this.bookSvc.bookInfo&&this.bookSvc.bookInfo.content.forEach((h,d)=>{d+1>this.dToolbarLangData.items.length?this.dToolbarLangData.items.push(pa.builder().setText(this.translateLanguageName(h.name)).setTag(h.name).setSelected(this.bookSvc.isLanguageEnabled(h.name))):this.dToolbarLangData.items[d].setText(this.translateLanguageName(h.name)).setTag(h.name).setSelected(this.bookSvc.isLanguageEnabled(h.name))})}syncChapters(){let a=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(a){let h=1,d=a.parsed.content;h+d.length!=this.dToolbarData.items.length&&(this.dToolbarData.items=[]),0==this.dToolbarData.items.length?this.dToolbarData.items.push(pa.builder().setText("\u0412\u0441\u0435").setTag("\u0412\u0441\u0435")):this.dToolbarData.items[0].setText("\u0412\u0441\u0435").setSelected(!1),d.forEach((f,p)=>{var g;p+1+h>this.dToolbarData.items.length?this.dToolbarData.items.push(pa.builder().setText(f.name).setSelected(!1)):this.dToolbarData.items[p+h].setText(f.name).setSelected((null===(g=this.bookSvc.bookChapter)||void 0===g?void 0:g.name)===f.name)}),null==this.dToolbarData.items.find(f=>f.selected)&&this.dToolbarData.items.length&&this.dToolbarData.items[0+h].setSelected(!0)}}getBookFragments(a,h,d){var f,p;if(!h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430){let m=null===(p=null===(f=this.bookSvc.bookContent[a])||void 0===f?void 0:f.parsed)||void 0===p?void 0:p.settings.find(_=>"\u044f\u0437\u044b\u043a"===_.name.toLowerCase()),v=m?m.value:"";v=v||(this.bookSvc.bookLanguages.length?this.bookSvc.bookLanguages[0]:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"),v.endsWith("-UCS8")&&(v=v.substring(0,v.length-5));let y=this.uiConfig.ui.coloredTranslations.getBooleanValue();h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430([Ur.builder().setText(v).setClasses({red:!(y&&a%2),redDark:y&&!!(a%2)})])}return d<0?h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430:h.\u0441\u0442\u0440\u043e\u043a\u0438[d].fragments}isSpaceAppended(a,h){return a.\u0441\u0442\u0440\u043e\u043a\u0438[h].fragments.length>0&&h+1!=this.bookSvc.lineIndexes.length}isLineIndexed(a,h){return h>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[h].fragments.length>0&&a.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}clearSelection(){return this.startLineSelection=this.endLineSelection=-1,this}onPrev(){this.clearSelection(),this.bookSvc.loadPrevPage(),this.saveChapter()}onNext(){this.clearSelection(),this.bookSvc.loadNextPage(),this.saveChapter()}getCurrentChapterName(){return this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"\u041c\u0435\u043d\u044e"}scrollToText(){this.staticView||(this.booksViewTables.nativeElement.scrollIntoView(!0),this.saveChapter()),this.changesDetectorSendReadyMessage.checkAndUpdate(!0)&&this.config.messageBus.putMessage(Py.builder().setSender(this.bookData.id).setTarget(this.bookData.targetId))}getChapterButtonClass(){let a=this.getChapterButtonClassRaw();return this.getChapterButtonClassDetector.checkAndGetValue(a)}getChapterButtonClassRaw(){let a={btn:!0,"btn-block":!0,"btn-link":!0,greenBtn:!0};return a["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,a}isLineSelected(a,h=!1,d=!0){let f=this.bookSvc.getShortBookName(),p=l1.builder(),g=h&&this.bookmarksSvc.getBookmarks().map(v=>{let y=p.parse(v);if(y&&y.length&&y[0].length){let _=y[0][0];if(_.type===Xl.Link)return _}return null}).filter(v=>null!=v).filter(v=>v.name===f).filter(v=>{var y;return(null===(y=this.bookSvc.bookChapter)||void 0===y?void 0:y.name)==""+v.startChapter}).filter(v=>(v.startLine<0||v.startLine<=a)&&(v.endLine<0||a<=v.endLine)).length>0,m=this.startLineSelection>=0&&this.startLineSelection==a||this.startLineSelection>=0&&this.startLineSelection<=a&&this.endLineSelection>=0&&a<=this.endLineSelection;return!this.staticView&&(g&&!m||d&&m)}isSelectionEnabled(){return!this.staticView&&"\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"!=this.bookSvc.bookName}getLineSelectionClass(a,h){let f=this.getLineSelectionClassRaw(h);return a.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440.checkAndGetValue(f)}getLineSelectionClassRaw(a){let h=this.isSelectionEnabled();return{"bg-4":h&&this.isLineSelected(a,!1,!0),"bg-5":h&&this.isLineSelected(a,!0,!1),cursor:h&&!this.staticView}}getComponent(a,h){return a.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442}getBookIndexes(a){let h=0;!this.bookData.link.logical&&this.bookSvc.books.length&&(h=Math.max(0,1-this.bookSvc.books[0].\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a));let d=+(this.bookData.link.startLine>=0?this.bookData.link.startLine:0),f=+(this.bookData.link.endLine>=0?this.bookData.link.endLine:this.bookData.link.startLine>=0?this.bookData.link.startLine:1e3);return this.getBookIndexesDetector.checkChanged(a,h,d,f).getCurValue(()=>0==d&&1e3==f?a:a.filter(p=>d<=p+h&&p+h<=f))}selectLine(a){if(this.hideUI||!this.isSelectionEnabled())return this;if(this.startLineSelection<0)this.startLineSelection=a,this.endLineSelection=-1;else if(this.startLineSelection==a)this.endLineSelection=a,this.modalAddBookmarkFlag=!0;else if(this.endLineSelection<0){this.endLineSelection=a;let h=Math.min(this.startLineSelection,this.endLineSelection);this.endLineSelection=Math.max(this.startLineSelection,this.endLineSelection),this.startLineSelection=h}else this.isLineSelected(a,!1,!0)?this.modalAddBookmarkFlag=!0:(this.startLineSelection=-1,this.endLineSelection=-1);return this}onAddBookmark(){var a;if(this.startLineSelection>0){let h=this.bookSvc.getShortBookName();this.bookmarksSvc.addBookmark(h,null===(a=this.bookSvc.bookChapter)||void 0===a?void 0:a.name,this.startLineSelection,this.endLineSelection),this.startLineSelection=this.endLineSelection=-1}return this.modalAddBookmarkFlag=!1,this}onNotAddBookmark(){this.startLineSelection=this.endLineSelection=-1,this.modalAddBookmarkFlag=!1}getAllTextClass(){return this.syncToolbarData(),this.fineTextDetector.checkChanged(this.uiConfig.ui.fineText.getBooleanValue()).getCurValue(()=>this.getAllTextClassRaw())}getAllTextClassRaw(){return{ftext:this.uiConfig.ui.fineText.getBooleanValue()}}printBook(){let a=this.bookSvc.getBookTitleName(),h=this.bookSvc.getChapterTitleName();a&&h&&(a+=": "+h),this.themeSvc.printWindow(a)||window.print()}printBookEpub(){var a;let h=this.bookSvc.bookName;h&&(this.printEpubData.setBookName(h).setBookTitle(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookChapter(this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"").setBookLanguages(this.bookSvc.bookLanguages).setEpubPrinterHandler(this.bookData.printerHandler).setShowSettings(!this.bookData.autoPrint),null===(a=this.printEpubDataEventsSubscription)||void 0===a||a.unsubscribe(),this.printEpubDataEventsSubscription=this.printEpubData.printEventsEmitter.subscribe({next:d=>{"stop"==d?(this.onStopPrintEpub(),this.printing=!1):(d="print")&&(this.printing=!0)}}),this.modalPrintEpubFlag=!0,this.bookData.autoPrint&&this.config.post(()=>{this.onStartPrintEpub()},500))}onStartPrintEpub(){this.printEpubData.printEventsEmitter.emit("print")}onStopPrintEpub(){this.modalPrintEpubFlag=!1}onPrintEpub(a){var h;let d=this.bookSvc.bookName.indexOf("VZ")>=0||this.bookSvc.bookName.indexOf("NZ")>=0,f=this.bookSvc.getChapterTitleName();!f&&this.bookSvc.bookChapter&&(f=null===(h=this.bookSvc.bookChapter)||void 0===h?void 0:h.name);let p="\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430";f||(f=this.config.getApplication().name,p="");let g=()=>s1.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookNames(this.bookSvc.bookLanguages).setPsalomName(p).setAllBooksChapters([]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(d),m=g(),v=()=>{if(m.allBooks.length>1||m.allBooks[0].length>0){let _=m.allBooks.map((b,C)=>b.map((x,S)=>x.length>m.emptyFirstLines[C][S]).reduce((x,S,w,T)=>x||S,!1)).reduce((b,C,x,S)=>b||C,!1);!_&&0===a.requestsPack.length&&(_=this.bookSvc.getBookTitleName()!=m.name,m.setShowMiddleContent(!1)),_&&a.addRequest(m)}m=g()},y=(_,b,C)=>{let x="",S=!0,w=0,T=null,O=(k,D=!1)=>{if(T&&T.length>0){let M=_().allBooks.length-1,A=_().allBooks[M];for(;C+1>A.length;)A.push([]);let L=A[C];if(L&&L.push(...T),0==C)for(;M+1>_().allBooksChapters.length;)_().allBooksChapters.push(`${f}`);T=null,D&&v()}};b.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((k,D)=>{let M=!0,L=!1,E=(z=!1,U=!1)=>{L||(M&&(null==T&&(T=[]),(S&&D-w==0||!x)&&++_().emptyFirstLines[_().emptyFirstLines.length-1][C],T.push(x)),M=!0,x="",S=!0,z&&(O(0,U),w=D),L=!0)},V=z=>{L=!1,x+=z.text,S=S&&(!z.text||(z=>!(!(null==z?void 0:z.red)&&!(null==z?void 0:z.redDark)))(z.classes));let U=Z=>{var Y,N,$;if(Z.component===c){let H=Z.data;E(!0,!0),H.printerHandler.print(a)}else if(Z.component===Vz){let H=Z.data;!(null===(Y=H.config.link)||void 0===Y)&&Y.link&&(x+=`${H.config.link.link.name}.${H.config.link.link.startChapter}:${H.config.link.link.startLine}-${H.config.link.link.endLine}`.replace("-1000","+"),S=!1),null!==($=null===(N=H.config.link)||void 0===N?void 0:N.link)&&void 0!==$&&$.opened&&(E(!0,!0),H.printerHandler.print(a))}else if(Z.component===XE){let H=Z.data;if(H.config.book){E(!0,!0);let G=s1.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setBookNames(this.bookSvc.bookLanguages).setAllBooksChapters([`${f}`]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(!0);y(()=>G,H.config.book,0)}}else if(Z.component===Whe){let H=Z.data;E(!0,!0),H.printerHandler.print(a)}else if(Z.component===xU){let H=Z.data;H.components.length&&H.components.forEach(G=>U(G))}};z.component&&U(z.component)};L=!1,k.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.forEach(z=>{V(z)}),E()}),O()};this.bookSvc.books.forEach((_,b)=>{y(()=>m,_,b)}),v()}getMainDivClasses(){return this.getMainDivClassesDetector.checkAndGetValue({"fade-in-3":!0,"no-print":!!this.changesDetectorBookDataText.oldRawValue})}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(wd),B(a1),B(r1),B(go),B(c1))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-library-book"]],viewQuery:function(a,h){if(1&a&&ci(Lut,5),2&a){let d;Ht(d=$t())&&(h.booksViewTables=d.first)}},inputs:{data:"data"},decls:34,vars:16,consts:[[3,"click"],[3,"enabled","name"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["booksViewTables",""],[4,"ngIf"],["class","clr-row mainText",4,"ngIf"],["class","mainText fade-in-3 clr-row",4,"ngIf"],["class","clr-row no-print top-space fade-in-3",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","add-text"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["shape","times"],[1,"bottom-space"],[3,"data"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[3,"data",4,"ngIf"],[1,"no-print"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"clr-row"],[1,"clr-col-6"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],[3,"ngClass","click"],["shape","book",1,"is-solid"],[1,"clr-col-3","no-print"],[3,"ngClass","click",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngFor","ngForOf"],[1,"clr-row","mainText"],[1,"clr-col-12","fade-in-3"],[1,"clr-row","mainText","fade-in-3"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"component"],["class","clr-col-12 fade-in-3",4,"ngIf"],[3,"ngClass","hidden",4,"ngFor","ngForOf"],[3,"ngClass","hidden"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","hidden",4,"ngIf"],[1,"hidden"],["class","mainText fade-in-3",4,"ngIf"],["class","mainText fade-in-3",4,"ngFor","ngForOf"],[1,"mainText","fade-in-3"],[1,"clr-col-12"],[1,"mainText","fade-in-3","clr-row"],["class","clr-col-12",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"clr-row","no-print","top-space","fade-in-3"],["type","button",1,"btn","btn-link","btn-block",3,"click"],["shape","printer"],["class","clr-col-6",4,"ngIf"],["shape","book"],["shape","ban"]],template:function(a,h){1&a&&(I(0,"div",0),ee("click",function(f){return f.stopPropagation()}),ue(1,"app-print-logo",1),X(2,$ut,7,6,"div",2),X(3,qut,7,6,"div",2),I(4,"div",3,4),X(6,tht,4,3,"div",5),X(7,lht,4,3,"div",6),X(8,ght,4,3,"div",5),X(9,Sht,5,3,"div",7),X(10,Mht,7,6,"div",2),X(11,Iht,6,5,"div",8),F(),I(12,"clr-modal",9),ee("clrModalOpenChange",function(f){return h.modalAddBookmarkFlag=f}),I(13,"h3",10),ie(14,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),F(),I(15,"div",11),ue(16,"clr-icon",12),ie(17," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),F(),I(18,"div",13)(19,"button",14),ee("click",function(){return h.onAddBookmark()}),ue(20,"clr-icon",12),ie(21,"\u0414\u0430"),F(),I(22,"button",15),ee("click",function(){return h.onNotAddBookmark()}),ue(23,"clr-icon",16),ie(24,"\u041d\u0435\u0442"),F()()(),I(25,"clr-modal",9),ee("clrModalOpenChange",function(f){return h.modalPrintEpubFlag=f}),I(26,"h3",10),ie(27,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),F(),I(28,"div",11)(29,"div",17),ue(30,"app-dynamic-print-epub",18),F()(),I(31,"div",13),X(32,Pht,3,0,"button",19),X(33,Rht,3,0,"button",20),F()()()),2&a&&(P(1),R("enabled",h.bookData.facePage)("name",h.printLogName),P(1),R("ngIf",!h.hideUI),P(1),R("ngIf",!h.staticView),P(1),R("ngClass",h.getAllTextClass()),P(2),R("ngIf",h.parallel&&h.lineBreaks),P(1),R("ngIf",h.parallel&&!h.lineBreaks),P(1),R("ngIf",!h.parallel&&h.lineBreaks),P(1),R("ngIf",!h.parallel&&!h.lineBreaks),P(1),R("ngIf",!h.staticView),P(1),R("ngIf",h.showPrintButtons),P(1),R("clrModalOpen",h.modalAddBookmarkFlag),P(13),R("clrModalOpen",h.modalPrintEpubFlag),P(5),R("data",h.printEpubData),P(2),R("ngIf",!h.printing),P(1),R("ngIf",!h.printing))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();function Fht(c,l){1&c&&ue(0,"app-add-component",5),2&c&&R("component",q(2).containerData.component)}const Nht=function(){return{"content-container":!0}},Lht=function(){return{"content-area":!0}};function Bht(c,l){if(1&c&&(I(0,"div",2)(1,"div",3)(2,"div",3),X(3,Fht,1,1,"app-add-component",4),F()()()),2&c){const a=q();P(1),R("ngClass",Ll(3,Nht)),P(1),R("ngClass",Ll(4,Lht)),P(1),R("ngIf",a.containerData.component)}}function Vht(c,l){1&c&&ue(0,"app-add-component",5),2&c&&R("component",q(2).containerData.component)}function zht(c,l){if(1&c&&(I(0,"div",6),X(1,Vht,1,1,"app-add-component",4),F()),2&c){const a=q();P(1),R("ngIf",a.containerData.component)}}let nc=(()=>{class c{constructor(a){this.config=a}get containerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-container"]],inputs:{data:"data"},decls:2,vars:2,consts:[["class","main-container",4,"ngIf"],["class","myContainer",4,"ngIf"],[1,"main-container"],[3,"ngClass"],[3,"component",4,"ngIf"],[3,"component"],[1,"myContainer"]],template:function(a,h){1&a&&(X(0,Bht,4,5,"div",0),X(1,zht,2,1,"div",1)),2&a&&(R("ngIf",h.containerData&&!1),P(1),R("ngIf",h.containerData))},dependencies:[si,_n,Yl],styles:[".myContainer[_ngcontent-%COMP%]{padding:1em}"]}),c})();class v9{constructor(){}static builder(){return new v9}}class _o extends mi{constructor(l,a,h,d,f){super(l,a,h),this.classes=d,this.component=f}static builder(){return new _o("",null,null,v9.builder(),null)}setComponent(l){return this.component=l,this}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}function Uht(c,l){if(1&c&&(I(0,"div"),ue(1,"app-add-component",2),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}let Hht=(()=>{class c{constructor(a,h){this.config=a,this.uiConfig=h,this.components=[new Vn(Rhe,KE.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u041a\u043d\u043e\u043f\u043a\u0438").setOnClick(d=>{if(d.text="\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u044f: "+d.tag.data++,d.classes.outline){let f=["primary","success","danger"],p=f.indexOf(d.classes.type);p=(p+1)%f.length,d.classes.type=f[p]}d.classes.outline=!d.classes.outline}).setTag(new bg(0))),new Vn(xU,rA.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u0434\u043b\u044f div."))]}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}reset(){this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(""),this.components=[new Vn(Che,mS.builder().setOnClick(a=>{this.routeTo(a.trim())}))]}routeTo(a){a!=this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(a),this.components=[new Vn(nc,_o.builder().setComponent(new Vn($c,xl.builder().setText(a).setLink(Cl.builder().setOnRoute(h=>{h?this.routeTo(h.trim()):this.reset()})))))]}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-component"]],decls:2,vars:1,consts:[[1,"ftext","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Uht,2,1,"div",1),F()),2&a&&(P(1),R("ngForOf",h.components))},dependencies:[fi,Yl]}),c})();class y9{constructor(l,a){this.name=l,this.items=a,this.pageName=""}}class _9{constructor(l,a){this.name=l,this.items=a,this.activeNumberPage=""}}var na=(()=>(function(c){c[c.Replace=0]="Replace",c[c.Add=1]="Add",c[c.Intersect=2]="Intersect",c[c.Remove=3]="Remove"}(na||(na={})),na))();class $ht{constructor(){this.searchDataItems=[]}clear(){this.searchDataItems=[]}mergeSearchInfos(l,a,h){let d=[];switch(h){case na.Intersect:l.forEach(f=>{let p=a.find(g=>g.line==f.line);p&&(d.push(f),f.column!=p.column&&d.push(p))});break;case na.Add:d.push(...l),d.push(...a);break;case na.Remove:l.forEach(f=>{null==a.find(g=>g.line==f.line)&&d.push(f)});break;case na.Replace:d=a}return d.sort((f,p)=>f.line-p.line),d}mergeSearchDatas(l,a,h){let d=[],f=()=>{l.forEach(p=>{let g=a.find(m=>p.name==m.name);if(null!=g){let m=this.mergeSearchInfos(p.items,g.items,h);m.length&&d.push(new y9(p.name,m))}})};switch(h){case na.Intersect:f();break;case na.Add:f(),a.forEach(p=>{null==l.find(m=>p.name==m.name)&&d.push(p)}),l.forEach(p=>{null==a.find(m=>p.name==m.name)&&d.push(p)});break;case na.Remove:l.forEach(p=>{let g=a.find(m=>p.name==m.name);if(null!=g){let m=this.mergeSearchInfos(p.items,g.items,h);m.length&&d.push(new y9(p.name,m))}else d.push(p)});break;case na.Replace:d=a}return d}mergeSearchData(l,a=na.Replace){let h=[],d=()=>{this.searchDataItems.forEach(f=>{let p=l.find(g=>g.name==f.name);if(p){let g=this.mergeSearchDatas(f.items,p.items,a);g.length&&h.push(new _9(p.name,g))}})};0==this.searchDataItems.length?h=l:a==na.Intersect?d():a==na.Add?(d(),this.searchDataItems.forEach(f=>{l.find(g=>g.name==f.name)||h.push(f)}),l.forEach(f=>{this.searchDataItems.find(g=>g.name==f.name)||h.push(f)})):a==na.Remove&&this.searchDataItems.forEach(f=>{let p=l.find(g=>g.name==f.name);if(p){let g=this.mergeSearchDatas(f.items,p.items,a);g.length&&h.push(new _9(p.name,g))}else h.push(f)}),this.searchDataItems=h}}class Ght{constructor(l,a){this.searcher=l,this.config=a,this.langProps=[],this.results=new $ht,this.maxElemenetsOnPageCount=10,this.searchedPages=[],this.currentPage=-1,this.searchObject={search:""},this.search="",this.searchIndex=0,this.searchRemainsCount=0}onSearch(l,a,h){if(this.searchedPages=[],this.results.clear(),this.search=this.translateSearchString(this.searchObject.search),this.search){++this.searchIndex;let f=this.searchIndex,p=this.search.split(" ");this.searchRemainsCount+=p.length+1;let g=na.Intersect,m=0,v=()=>{if(--this.searchRemainsCount,this.searchIndex!=f)return this.searchRemainsCount-=p.length-m,void h(!1);if(m>0&&0==this.results.searchDataItems.length&&(this.searchRemainsCount-=p.length-m,m=p.length),m>=p.length)return void(h&&h(!0));let y=p[m++];if("\u041d\u0415"==y){if(g=na.Remove,--this.searchRemainsCount,m>=p.length)return;y=p[m++]}else g=na.Intersect;this.searcher.search(y,a,(_,b)=>{this.config.post(()=>{this.searchIndex==f&&this.onSearchDataResult(_,b,g,null),v()})},this.langProps)};v()}}getBook(l){let a=l.split("/");return a.length>=1&&a.splice(a.length-1,1),a.filter(function(h,d,f){return!(" "==h&&d>0)||" "!=f[d-1]}).join("/")}getChapter(l){let a="\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",h=l.split("/");return h.length>=1&&(a=h[h.length-1]),a}getNamedSearchItem(l,a){let h=this.getBook(l),d=a.find(g=>g.name===h);null==d&&(d=new _9(h,[]),d.activeNumberPage="1",a.push(d));let f=this.getChapter(l),p=d.items.find(g=>g.name==f);return null==p&&(p=new y9(f,[]),p.pageName=""+Math.ceil((d.items.length+1)/this.maxElemenetsOnPageCount),d.items.push(p)),p}onSearchDataResult(l,a,h,d){let f=[];l&&l.forEach(p=>{this.getNamedSearchItem(p.key,f).items.push(...p.value)}),this.results.mergeSearchData(f,h),d&&d(null!=l)}translateSearchString(l){return class Wht{static parse(l){return regexParserStatic.parse(l)}}.parse(l)}}class b9{constructor(){}static builder(){return new b9}}class jI extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.object={},this.fieldName="name",this.description="\u0418\u043c\u044f",this.sDescription2="",this.shape="",this.shape2="",this.readonly=!1,this.keyboard=!1}set description2(l){this.sDescription2=l}get description2(){return this.sDescription2?this.sDescription2:this.description}static builder(){return new jI("",null,null,b9.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setObject(l){return this.object=l,this}setFieldName(l){return this.fieldName=l,this}setDescription(l){return this.description=l,this}setDescription2(l){return this.description2=l,this}setShape(l){return this.shape=l,this}setShape2(l){return this.shape2=l,this}setReadonly(l){return this.readonly=l,this}toggleKeyboard(){this.keyboard=!this.keyboard}}class C9{constructor(l){this.spinnerInline=l}static builder(){return new C9(!0)}}class x9 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d}static builder(){return new x9("",null,null,C9.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}}let I0e=(()=>{class c{constructor(a,h){this.http=a,this.config=h,this.restPoint="/kafizmy"}getRestPoint(a,h){return Ar.merge(Ar.merge(h||this.config.serviceAPIHost,this.restPoint),a)}handleError(a,h){return Hi.handleError(a,h)}search(a,h,d,f){const p={params:{query:a,paths:h.join("|")}};this.http.get(this.getRestPoint("/search",null),p).pipe(hr(this.handleError)).subscribe({next:g=>{d(g,null)},error:g=>{d(null,""+g)}})}}return c.\u0275fac=function(a){return new(a||c)(Ae(xd),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),P0e=(()=>{class c{constructor(a,h){this.searchRestSvc=a,this.config=h,this.searchSvc=null,this.searchingCount=0,this.config.isRestServerType()&&(this.searchSvc=this.searchRestSvc)}isSearching(){return this.searchingCount>0}search(a,h,d,f){this.config.post(this.searchSvc?()=>{++this.searchingCount,this.searchSvc&&this.searchSvc.search(a,h,(p,g)=>{d&&d(p,g),--this.searchingCount},f)}:()=>{++this.searchingCount,this.config.post(()=>{d&&d(null,null),--this.searchingCount})})}}return c.\u0275fac=function(a){return new(a||c)(Ae(I0e),Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class P1 extends Tu{constructor(){super(),this.classes="",this.name="",this.buttons=[]}static builder(){return new P1}setClasses(l){return this.classes=l,this}setName(l){return this.name=l,this.markChanged(),this}setButtons(l){return this.buttons=l,this.markChanged(),this}}class w9 extends mi{constructor(l,a,h,d,f){super(l,a,h),this.keyboards=d,this.onKeyHandler=f}static builder(){return new w9("",null,null,[],l=>null)}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setKeyboards(...l){return this.keyboards=[...l],this}addKeyboard(l){return this.keyboards.push(l),this}setOnKeyHandler(l){return this.onKeyHandler=l,this}onKey(l){return this.onKeyHandler&&this.onKeyHandler(l),this}}let Qht=(()=>{class c{constructor(a,h){this.config=a,this.themesSvc=h,this.imageData=Va.builder(),this.currentKeyboardName=""}get kbData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}getCurrentKeyboard(){let a=this.kbData.keyboards.find(h=>h.name==this.currentKeyboardName);return null==a&&(a=this.kbData.keyboards[0]),this.currentKeyboardName=a.name,a}ngOnInit(){this.recreate()}recreate(){let a=new ehe(this.themesSvc.nowIsDay()?Jo.Light2:Jo.Dark2,"",400,200);this.imageData=Va.builder(),this.imageData.setGenerator(a).setGenName("this").setSvgWidth(a.getWidth()).setSvgHeight(a.getHeight()).setType(1e3*a.getWidth()+a.getHeight());let h=[],d=this.getCurrentKeyboard(),f=d.buttons,p=f.reduce((g,m)=>Math.max(g,m.length),0);a.linesOfMonth=f.length,a.columnsCount=p,a.columnsOffsets=[],f.forEach((g,m)=>{g.forEach((v,y,_)=>{h.push(bl.builder().setName(v).setIndex(y+m*p).setIWidth(1).setClasses(d.classes)),y+1==_.length&&(y+1<p?(h.push(bl.builder().setName("").setIndex(y+m*p+1).setIWidth(p-(y+1))),a.addColumnOffset((p-(y+1))/2)):a.addColumnOffset(0))})}),h.push(bl.builder().setName(this.currentKeyboardName).setIndex(a.linesOfMonth*p).setIWidth(2),bl.builder().setName("<").setIndex(a.linesOfMonth*p+2).setIWidth(2),bl.builder().setName(" ").setIndex(a.linesOfMonth*p+4).setIWidth(p-8),bl.builder().setName(">").setIndex(a.linesOfMonth*p+p-4).setIWidth(2),bl.builder().setName("\u21e6").setIndex(a.linesOfMonth*p+p-2).setIWidth(2)),++a.linesOfMonth,a.setOnCommandHandler((g,m)=>{"<"==g.name?this.toogleKeybard(-1):">"==g.name?this.toogleKeybard(1):g.name==this.currentKeyboardName?this.toogleKeybard():"\u043f\u0440\u043e\u0431\u0435\u043b"==g.name||" "==g.name?this.kbData.onKey(" "):"<X"==g.name||"\u21e6"==g.name?this.kbData.onKey("<X"):g.name&&this.kbData.onKey(g.name)}),a.setCommands(h)}ngOnDestroy(){}ngAfterViewInit(){}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}toogleKeybard(a=1){let h=this.getCurrentKeyboard(),d=this.kbData.keyboards.indexOf(h);return d=(this.kbData.keyboards.length+d+a)%this.kbData.keyboards.length,this.currentKeyboardName=this.kbData.keyboards[d].name,this.config.post(()=>{this.recreate()}),this}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(go))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-keyboard"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"top-space","maxWidth800","center",3,"click"],[3,"data"]],template:function(a,h){1&a&&(I(0,"div",0),ee("click",function(f){return h.onClick(f)}),ue(1,"app-svg-js-image",1),F()),2&a&&(P(1),R("data",h.imageData))},dependencies:[Zl],styles:[".maxWidth800[_ngcontent-%COMP%]{max-width:800px}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}"]}),c})();function jht(c,l){if(1&c){const a=at();I(0,"span"),ie(1,"\xa0"),I(2,"clr-icon",1),ee("click",function(d){return De(a),ke(q().onCommand2(d))}),F(),ie(3,"\xa0"),F()}if(2&c){const a=q();P(2),et("shape",a.data.shape2)}}function qht(c,l){if(1&c){const a=at();I(0,"input",6),ee("ngModelChange",function(d){De(a);const f=q();return ke(f.data.object[f.data.fieldName]=d)}),F()}if(2&c){const a=q();R("readOnly",a.data.readonly)("placeholder",a.data.description2)("name",a.data.fieldName)("ngModel",a.data.object[a.data.fieldName])}}function Zht(c,l){if(1&c&&(I(0,"label",7),ie(1),F()),2&c){const a=q();P(1),Ut(a.data.object[a.data.fieldName])}}function Xht(c,l){1&c&&ue(0,"app-dynamic-keyboard",8),2&c&&R("data",q().keyboardData)}let Yht=(()=>{class c{constructor(){this.data=jI.builder(),this.keyboardData=w9.builder().addKeyboard(P1.builder().setName("\u0420\u0443\u0441").setButtons(["1234567890".split(""),"\u0439\u0446\u0443\u043a\u0435\u043d\u0433\u0448\u0449\u0437\u0445\u044a".split(""),"\u0444\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u044d".split(""),"\u044f\u0447\u0441\u043c\u0438\u0442\u044c\u0431\u044e\u0451".split("")])).addKeyboard(P1.builder().setName("\u0420\u0423\u0421").setButtons(["1234567890".split(""),"\u0439\u0446\u0443\u043a\u0435\u043d\u0433\u0448\u0449\u0437\u0445\u044a".toUpperCase().split(""),"\u0444\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u044d".toUpperCase().split(""),"\u044f\u0447\u0441\u043c\u0438\u0442\u044c\u0431\u044e\u0451".toUpperCase().split("")])).addKeyboard(P1.builder().setName("\u0446\u0441").setButtons([[".\u0301",".\u0486",".\u0311",".\u0300",".\u2de3",".\u2ded\u0487",".\u2de2\u0487",".\u2dea\u0487",".\u2dec\u0487",".\u0483"],["\u0463","\u0475","\u0456","\u0457","\u047b","\u047d","\u0461","\u047f","\u1c82\u0443","\ua64b","\u046f","\u0471"],"\u0439\u0446\u0443\u043a\u0435\u0454\u043d\u0433\u0448\u0449\u0437\u0445".split(""),"\u0444\u2c2a\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u03b6".split(""),"\ua657\u0467\u0468\u0447\u0441\u043c\u0438\u0442\u044c\u044a\u0431\u044e".toLowerCase().split("")]).setClasses("cs")).addKeyboard(P1.builder().setName("\u0426\u0421").setButtons([[".\u0301",".\u0486",".\u0311",".\u0300",".\u2de3",".\u2ded\u0487",".\u2de2\u0487",".\u2dea\u0487",".\u2dec\u0487",".\u0483"],["\u0463".toUpperCase(),"\u0474".toUpperCase(),"\u0406","\u0407","\u047b".toUpperCase(),"\u047c","\u0460","\u047e","\u041e\u0443","\ua64b","\u046e","\u0470"],"\u0439\u0446\u0443\u043a\u0435\u0454\u043d\u0433\u0448\u0449\u0437\u0445".split("").map(a=>"\u0454"==a?a:a.toUpperCase()),"\u0444\u0472\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u0405".toUpperCase().split(""),"\ua656\u0467\u0468\u0447\u0441\u043c\u0438\u0442\u044c\u044a\u0431\u044e".toUpperCase().split("")]).setClasses("cs")).setOnKeyHandler(a=>{this.onKey(a.replace(/[_\.]/g,""))})}onCommand(a){this.data.keyboard=!1,this.data.click(!0),a.stopPropagation()}onCommand2(a){this.data.click(this.data.shape2),a.stopPropagation()}onKey(a){let h=this.data.object[this.data.fieldName];"<X"==a?h=h.substring(0,h.length-1):h+=a,this.data.object[this.data.fieldName]=h}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-form-input-editor"]],inputs:{data:"data"},decls:12,vars:6,consts:[[1,"cursor",3,"click"],[3,"click"],[4,"ngIf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange",4,"ngIf"],["class","cs",4,"ngIf"],[3,"data",4,"ngIf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"],[1,"cs"],[3,"data"]],template:function(a,h){1&a&&(I(0,"clr-input-container")(1,"label",0),ee("click",function(f){return h.onCommand(f)}),ie(2),I(3,"span"),ie(4,"\xa0"),I(5,"clr-icon",1),ee("click",function(f){return h.onCommand(f)}),F(),ie(6,"\xa0"),F(),ie(7," \xa0 "),X(8,jht,4,1,"span",2),F(),X(9,qht,1,4,"input",3),X(10,Zht,2,1,"label",4),F(),X(11,Xht,1,1,"app-dynamic-keyboard",5)),2&a&&(P(2),Ti("",h.data.description,"\xa0 "),P(3),et("shape",h.data.shape),P(3),R("ngIf",h.data.shape2),P(1),R("ngIf",!h.data.keyboard),P(1),R("ngIf",h.data.keyboard),P(1),R("ngIf",h.data.keyboard))},dependencies:[_n,eo,cs,Bx,e_,Vl,jo,Ao,Qht],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}"]}),c})();const Kht=["bookmarksView"],Jht=function(c,l){return{btn:!0,"btn-block":!0,"btn-success-outline":c,"btn-success":l}};function edt(c,l){if(1&c){const a=at();I(0,"div",14)(1,"button",15),ee("click",function(){return De(a),ke(q().toggleSearch())}),ie(2),F()()}if(2&c){const a=q();P(1),R("ngClass",as(2,Jht,!a.searchMode,a.searchMode)),P(1),Ut(a.searchMode?"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438":"\u041f\u043e\u0438\u0441\u043a")}}const tdt=function(c,l){return{btn:!0,"btn-block":!0,"btn-primary-outline":c,"btn-primary":l}};function ndt(c,l){if(1&c){const a=at();I(0,"button",15),ee("click",function(){return De(a),ke(q(2).onNewSearch())}),ie(1,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),F()}if(2&c){const a=q(2);R("ngClass",as(1,tdt,!a.isBookmarksExists(),a.isBookmarksExists()))}}function idt(c,l){if(1&c){const a=at();I(0,"button",3),ee("click",function(){return De(a),ke(q(2).modalDeleteAllBookmarksFlag=!0)}),ie(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435"),F()}}const R0e=function(c,l){return{"clr-col-4":c,"clr-col-6":l}};function rdt(c,l){if(1&c&&(I(0,"div",2),X(1,ndt,2,4,"button",16),X(2,idt,2,0,"button",17),F()),2&c){const a=q();R("ngClass",as(3,R0e,a.searchEnabled&&a.bookmarksEnabled,!(a.searchEnabled&&a.bookmarksEnabled))),P(1),R("ngIf",a.searchMode),P(1),R("ngIf",!a.searchMode)}}function sdt(c,l){if(1&c&&(I(0,"div",19),ue(1,"app-dynamic-spinner",20),F()),2&c){const a=q(2);P(1),R("data",a.searchingSpinnerData)}}function odt(c,l){if(1&c&&(I(0,"div"),ue(1,"app-dynamic-content-toolbar",20),F()),2&c){const a=q(3);P(1),R("data",a.toolbarBooksHeaders)}}function adt(c,l){if(1&c&&(I(0,"div")(1,"div"),ue(2,"app-dynamic-content-toolbar",20),F(),I(3,"div"),ue(4,"app-dynamic-content-toolbar",20),F()()),2&c){const a=q(3);P(2),R("data",a.currentHeaders()),P(2),R("data",a.currentPages())}}function ldt(c,l){1&c&&ue(0,"app-dynamic-library-book",20),2&c&&R("data",q().$implicit.libData)}function cdt(c,l){if(1&c&&(I(0,"div",null,24),ue(2,"app-dynamic-errors",20),X(3,ldt,1,1,"app-dynamic-library-book",25),F()),2&c){const a=l.$implicit;P(2),R("data",a.errorsData),P(1),R("ngIf",a.libDataShow)}}function udt(c,l){if(1&c&&(I(0,"div")(1,"div")(2,"form",21),ue(3,"app-dynamic-form-input-editor",20),F(),I(4,"form",22),ue(5,"app-dynamic-form-input-editor",20),F()(),X(6,odt,2,1,"div",5),X(7,adt,5,2,"div",5),X(8,cdt,4,2,"div",23),I(9,"div")(10,"div"),ue(11,"app-dynamic-content-toolbar",20),F()()()),2&c){const a=q(2);P(3),R("data",a.dataSearchEditorData),P(2),R("data",a.dataSearchEditorData),P(1),R("ngIf",!a.isBookmarksExists()),P(1),R("ngIf",a.isBookmarksExists()),P(1),R("ngForOf",a.bookmarks),P(3),R("data",a.currentPages())}}function hdt(c,l){if(1&c&&(I(0,"div"),X(1,sdt,2,1,"div",18),X(2,udt,12,6,"div",5),F()),2&c){const a=q();P(1),R("ngIf",a.isSearching),P(1),R("ngIf",!a.isSearching)}}function ddt(c,l){1&c&&ue(0,"app-dynamic-library-book",20),2&c&&R("data",q().$implicit.libData)}function fdt(c,l){if(1&c&&(I(0,"div",null,24),ue(2,"app-dynamic-errors",20),X(3,ddt,1,1,"app-dynamic-library-book",25),F()),2&c){const a=l.$implicit;P(2),R("data",a.errorsData),P(1),R("ngIf",a.libDataShow)}}function pdt(c,l){if(1&c&&(I(0,"div"),X(1,fdt,4,2,"div",23),F()),2&c){const a=q();P(1),R("ngForOf",a.bookmarks)}}class qI{constructor(l,a){this.errorsData=Nc.builder(),this.libData=xl.builder(),this.libDataShow=!1,this.\u043f\u0430\u043c\u044f\u0442\u044c=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.errorsData.setErrors(l).setActions(a)}static builder(){return new qI([],[])}setMessages(l){return this.errorsData.setErrors(l),this}addMessage(l){return this.errorsData.errors.push(l),this}setActions(l){return this.errorsData.setActions(l),this}addAction(l){return this.errorsData.actions.push(l),this}toggleLinkShow(){return this.libDataShow=!this.libDataShow,this}setLink(l,a,h=!0,d=!0){let p=fragmentsParserStatic.parse(l,{builder:new zz})[0][0];if(p.type!=Xl.Link&&h)throw new Error(`\u041d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0441\u044b\u043b\u043a\u043e\u0439: ${l}`);let g=p;return this.libData.setText(l.replace("-1000","+")).setSearch(a).setLink(Cl.builder().setBookName(g.name).setShortName(!0).setChapter(""+g.startChapter).setStartLine(g.startLine).setEndLine(g.endLine).setLanguages(g.langugages).setLogical(d)),this}}class S9{constructor(l,a,h,d){this.items=l,this.pageItems=a,this.pageSize=d,this.iPageIndex=0}static builder(){return new S9([],[],0,10)}get pageIndex(){return this.iPageIndex}set pageIndex(l){this.iPageIndex=l,this.updatePage()}updatePage(){let a=Math.min(this.pageIndex*this.pageSize+this.pageSize,this.items.length);return this.pageItems=this.items.slice(this.pageIndex*this.pageSize,a),this}setItems(l){return this.items=l,this.recalculate(),this.updatePage()}setPageIndex(l){if(l<0||l+1>=this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${l}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [0,${this.pagesCount-1}].`);return this.pageIndex=l,this}setPageSize(l){if(l!=this.pageSize)return this.pageSize=l,this.recalculate(!0)}recalculate(l=!1){let a=this.pagesCount;return this.pageNumber>a&&(this.pageNumber=a),l?this.updatePage():this}prevPage(){return this.pageIndex>0&&(this.pageIndex=this.pageIndex-1),this}get pagesCount(){return Math.ceil(this.items.length/this.pageSize)}get pageNumber(){return this.pageIndex+1}set pageNumber(l){if(l<1||l>this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${l}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [1,${this.pagesCount}].`);this.pageIndex=l-1}nextPage(){return this.pageIndex+1<this.pagesCount&&(this.pageIndex=this.pageIndex+1),this}}class T9{constructor(l,a){this.name=l,this.bookmarks=a}static builder(){return new T9("",S9.builder())}setName(l){return this.name=l,this}setBookmarks(l){return this.bookmarks=l,this}}let F0e=(()=>{class c extends Cg{constructor(a,h,d,f,p,g){super(a,h,d),this.bookmarksSvc=f,this.searcher=p,this.audioSvc=g,this.bookmarksEnabled=!0,this.searchEnabled=!0,this.searchMode=!1,this.searcherHelper=null,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.jsSvc=new JE,this.bookmarksDatas=[],this.bookmarksSearchDatasAll=[],this.bookmarksSearchDatas=null,this.searchingSpinnerData=x9.builder().setText("\u041f\u043e\u0438\u0441\u043a..."),this.tryLoadRemainsBookInfoCount=0,this.toolbarBooksHeaders=Ou.builder().setItems([]).setOnClick(m=>{m.setSelected(!m.selected)}).updateClasses(m=>{m.setLabelNormal("label-info")}),this.toolbarSearchHeaders=Ou.builder().setItems([]).setOnClick(m=>{let v=this.bookmarksSearchDatasAll.find(y=>y.name==m.tag);v&&(this.bookmarksSearchDatas=v,this.config.post(()=>{this.scrollToBookmarks()}))}),this.toolbarPages=Ou.builder().setItems([]).setOnClick(m=>{this.bookmarksSearchDatas&&(this.bookmarksSearchDatas.bookmarks.pageNumber=+m.tag,this.config.post(()=>{this.loadRemainsBookInfoActiveGroup(),this.scrollToBookmarks()}))}).updateClasses(m=>{m.setLabelNormal("label-info")}),this.modalDeleteAllBookmarksFlag=!1,this.modalDeleteBookmark="",this.modalDeleteBookmarkFlag=!1,this.component=new Vn($c,xl.builder().setText("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP").setLink(Cl.builder().setTextIsPage(!0).setOnRoute(m=>{}))),this.dataSearchEditorData=jI.builder(),this.workerSvc=Ua.builder(),this.bookServerSvc=new Oz((m,v)=>{this.config.post(()=>{this.bookSvc.post(m,v)})}),this.bookSvc=new f9((m,v)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(v):this.bookServerSvc.post(m,v)})}),this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookmarksEnabled="books"==this.config.getApplication().id,this.searchEnabled=this.config.isRestServerType(),this.searcherHelper=new Ght(this.searcher,a),this.dataSearchEditorData.setObject(this.searcherHelper.searchObject).setDescription("\u041f\u043e\u0438\u0441\u043a").setDescription2("\u0441\u043b\u043e\u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0435 [\u041d\u0415] \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435").setFieldName("search").setShape("search").setShape2("keyboard").setReadonly(!1).setOnClick(m=>{var v;m==this.dataSearchEditorData.shape2?this.toggleKeyboard():null===(v=this.searcherHelper)||void 0===v||v.onSearch("search",this.getSearchBookPaths(),y=>{this.syncSearchDatas(!0),this.dataSearchEditorData.setReadonly(!0)})}),this.jsSvc.addBookmarksEnvironment(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.uiConfig),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443",(m,v)=>{var _=m.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v[1]);if(this.bookmarks){let b=this.bookmarks.find(C=>C.errorsData.errors[0]==_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());null!=b&&b.toggleLinkShow()}return null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432",(m,v)=>{var _=m.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v[1]);if(this.bookmarks){let b=this.bookmarks.find(C=>C.errorsData.errors[0]==_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());null!=b&&b.toggleLinkShow()}return null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(m,v)=>{var _=m.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v[1]);return this.modalDeleteBookmark=_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),this.modalDeleteBookmarkFlag=!0,null}),this.addMenuLink(ei.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("books"==this.config.getApplication().id?"cog":"users").setOnClick(()=>{this.boomarksData.click(null)}).setIsActive(()=>!1)),this.addMenuLink(ei.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.boomarksData.click("")}).setIsActive(()=>!1)),this.addMenuLink(ei.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("books"==this.config.getApplication().id?"bookmark":"search").setIsActive(()=>!0)),this.addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.boomarksData.click("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}get bookmarkData(){return this.data}get boomarksData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get bookmarks(){var a;return this.sync(),this.searchMode?null===(a=this.bookmarksSearchDatas)||void 0===a?void 0:a.bookmarks.pageItems:this.bookmarksDatas}get isSearching(){return this.searcher.isSearching()}ngOnInit(){super.ngOnInit(),this.bookmarkData&&(this.searchMode=this.bookmarkData.startSearch)}ngOnDestroy(){super.ngOnDestroy(),this.workerSvc.unsubscribe()}ngAfterViewInit(){super.ngAfterViewInit(),this.audioSvc.stop(),this.config.post(()=>{this.searchMode=this.bookmarkData.startSearch}),this.workerSvc.enabled()?this.workerSvc.setOnMessage(a=>{this.config.post(()=>{this.bookSvc.post(null,a)})}):this.bookServerSvc.setCacheService(new Tz(new cD)),this.bookSvc.onLibraryLoadEvent.setOnEventHandler(()=>{this.tryLoadRemainsBookInfo(),this.loadBooksHeaders()}),this.bookSvc.onBookInfoLoadEvent.setOnEventHandler((a,h)=>{this.config.post(()=>{this.loadRemainsBookInfo2()})}),this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()})}getBookNameByPath(a){let h=a.split("/");return this.bookSvc.getNormalBookNameByBookPath(h[h.length-1])}loadRemainsBookInfo2(){var a;if(!this.bookmarksSearchDatas)return;let d=this.bookmarksSearchDatas.bookmarks.pageItems.find(f=>f.errorsData.errors[0].indexOf("|")>=0&&!!this.getBookNameByPath(f.errorsData.errors[0]));if(null!=d){let p=d.errorsData.errors[0].split("|");if(p.length>1){let g=p[0],m=p[1],v=this.getBookNameByPath(g);if(v){let y=this.bookSvc.getShortBookName(v),_=null===(a=this.bookSvc.bookInfo)||void 0===a?void 0:a.content.find(x=>g.endsWith(x.path)),C=`${y}${m}{${_?_.name:""}}`;d.setLink(C,this.searcherHelper?this.searcherHelper.search:"",!0,!1),d.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(C)),d.errorsData.errors[0]=`${C}`}}this.tryLoadRemainsBookInfo()}}tryLoadRemainsBookInfo(){this.tryLoadRemainsBookInfoCount>0||(++this.tryLoadRemainsBookInfoCount,this.config.post(()=>{this.loadRemainsBookInfo(),--this.tryLoadRemainsBookInfoCount}))}loadRemainsBookInfo(){let a=this.bookmarksSearchDatasAll.map(h=>{let d=this.getBookNameByPath(h.name);return{d:h,name:d?this.bookSvc.getShortBookName(d):null}}).filter(h=>!!h.name&&"\u0421\u043f\u0440"!=h.name).map(h=>h);!this.bookmarksSearchDatasAll||this.toolbarSearchHeaders.items.length==a.length||(this.toolbarSearchHeaders.setItems(a.map(h=>pa.builder().setText(h.name).setTag(h.d.name))).setOnClick(h=>{let d=this.bookmarksSearchDatasAll.find(f=>f.name==h.tag);d&&(this.bookmarksSearchDatas=d,this.loadRemainsBookInfoActiveGroup())}),this.bookmarksSearchDatas||this.config.post(()=>{this.toolbarSearchHeaders.click(this.toolbarSearchHeaders.items[0])}))}loadRemainsBookInfoActiveGroup(){this.bookmarksSearchDatas&&this.bookmarksSearchDatas.bookmarks.pageItems.forEach(h=>{if(null!=h){let p=h.errorsData.errors[0].split("|")[0],g=this.getBookNameByPath(p);g&&this.bookSvc.loadBookByName(g,[],"",!1)}})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}syncBookmarks(){let a=this.bookmarksSvc.getBookmarks(),h=!1,d=this.getStdBookmarks();return h=this.bookmarksDatas.length!=a.length+d.length||null!=a.find((p,g)=>p!=this.bookmarksDatas[g+d.length].errorsData.errors[0]),h&&a.unshift(...d),h&&(this.bookmarksDatas=[],a.forEach((f,p)=>{let g=f.replace("-1000","+"),m=`\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${g}';\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 1) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 2) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 3) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 4) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          `,v=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),_=(this.jsSvc.run(m,v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),qI.builder());_.errorsData.setOnClick(b=>{this.boomarksData.click(b)}),_.setLink(f,"").setMessages([g]).setActions(p<d.length?[Fc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]:[Fc.builder().setText("X").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(2).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Fc.builder().setText("\u041d\u0438\u0436\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(1).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Fc.builder().setText("\u0412\u044b\u0448\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(0).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Fc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),_.errorsData.classes.setAlertClass("warning").setAlertShape("").setNoPrint(!0),this.bookmarksDatas.push(_)})),h&&this.component.data.setText(a.map(p=>p+` /*\n\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441{\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0432\u0432\u0435\u0440\u0445 = false;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0432\u0432\u0435\u0440\u0445){\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${p}';\n    \u0432\u0432\u0435\u0440\u0445 = _\u0432\u0432\u0435\u0440\u0445;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043a\u043d\u043e\u043f\u043a\u0430){\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c(\n      '\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + (\u0432\u0432\u0435\u0440\u0445?'\u0432\u0432\u0435\u0440\u0445':'\u0432\u043d\u0438\u0437'));\n    \u0435\u0441\u043b\u0438 (\u0432\u0432\u0435\u0440\u0445) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2191','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(true), false);\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2193','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(false), false);\n*/`).join("\r\n")),this}saveBookmarks(a){return this.bookmarksSvc.setBookmarks(a),this}deleteAllBookmarks(){return this.bookmarksSvc.setBookmarks([]),this}toggleBookmarksView(){let a=this.isAllBookmarksVisible();return this.bookmarks&&this.bookmarks.forEach(h=>{h.libDataShow==a&&h.toggleLinkShow()}),this}isAllBookmarksVisible(){this.sync();let a=this.bookmarks;return!!a&&a.map(d=>d.libDataShow).reduce((d,f)=>d&&f,!0)}isBookmarksExists(){this.sync();let a=this.bookmarks;return!!a&&a.length>0}onDeleteAllBookmarks(){this.deleteAllBookmarks(),this.modalDeleteAllBookmarksFlag=!1}onDeleteBookmark(a){return this.bookmarksSvc.deleteBookmark(a),this.modalDeleteBookmarkFlag=!1,this}getDaysFromYear(){var a=new Date,h=new Date(a.getFullYear(),0,0),d=a.getTime()-h.getTime()+60*(h.getTimezoneOffset()-a.getTimezoneOffset())*1e3,f=864e5,p=Math.floor(d/f);if(p<14&&a.getFullYear()>2022){var g=new Date(a.getFullYear()-1,0,0),m=new Date(a.getFullYear()-1,11,31),v=m.getTime()-g.getTime()+60*(g.getTimezoneOffset()-m.getTimezoneOffset())*1e3;p+=Math.floor(v/f)}return p-13}getStdBookmarks(){let a=this.getDaysFromYear();return[`\u041c\u04412022.${a}:1-1000`,`\u0411\u04432022.${a}:1-1000`]}toggleSearch(){return this.searchMode=!this.searchMode,this}getChapter(a){let h=a.indexOf("."),f=+a.substring(0,h>=0?h:void 0).replace(/_/g,"");return isNaN(f)?null:f}getLines(a){let h=[],d=a.map(f=>f.items.map(p=>p.line)).flatMap(f=>f);return d.sort((f,p)=>f-p),d.forEach(f=>{h.indexOf(f)<0&&h.push(f)}),h}getLinesSingle(a){let h=[],d=a.items.map(f=>f.line);return d.sort((f,p)=>f-p),d.forEach(f=>{h.indexOf(f)<0&&h.push(f)}),h}createBookmarksFor(a,h){let d=[],f=this.getChapter(h.name),p=h.items.length?this.getLinesSingle(h):[1];return null!=f&&p.forEach(g=>{d.push(this.createBookmarksForSingle(`${a}|.${f}:${g}`))}),d}createBookmarksForSingle(a){let h=qI.builder(),d=h.\u043f\u0430\u043c\u044f\u0442\u044c;return d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a)),this.jsSvc.run("\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: \"' + \u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '\": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u0442\u0438\u043f = 0;\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",d,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),h.errorsData.setOnClick(g=>{this.boomarksData.click(g)}).updateClasses(g=>{g.setAlertClass("info").setAlertShape("bookmark")}),h.setLink(a,this.searcherHelper?this.searcherHelper.search:"",!1,!1).setMessages([a]).setActions([Fc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(4).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",d,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),h}syncSearchDatas(a){var h;!a||(this.bookmarksSearchDatasAll=[],null===(h=this.searcherHelper)||void 0===h||h.results.searchDataItems.forEach(d=>{let f=d.items.flatMap(p=>this.createBookmarksFor(d.name,p));if(f.length){let p=T9.builder();p.bookmarks.setItems(f),p.setName(d.name),this.bookmarksSearchDatasAll.push(p)}}),this.bookmarksSearchDatasAll.length>0&&this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()}))}currentPages(){if(this.bookmarksSearchDatas){let a=this.bookmarksSearchDatas.bookmarks.pagesCount;this.toolbarPages.items.length!=a&&this.toolbarPages.setItems([...Array(a).keys()].map(h=>h+1).map(h=>pa.builder().setTag(""+h).setText(""+h))),this.toolbarPages.items.forEach(h=>h.setSelected(h.tag==""+this.bookmarksSearchDatas.bookmarks.pageNumber))}else 0!=this.toolbarPages.items.length&&this.toolbarPages.setItems([]);return this.toolbarPages}currentHeaders(){return this.bookmarksSearchDatas&&this.toolbarSearchHeaders.items.forEach(a=>{var h;a.setSelected(a.tag==(null===(h=this.bookmarksSearchDatas)||void 0===h?void 0:h.name))}),this.toolbarSearchHeaders}scrollToBookmarks(){return this.bookmarksView.nativeElement.scrollIntoView(!0),this}onNewSearch(){return this.dataSearchEditorData.setReadonly(!1),this.bookmarksSearchDatasAll=[],this.bookmarksSearchDatas=null,this.toolbarSearchHeaders.setItems([]),this}sync(){this.searchMode?this.syncSearchDatas(!1):this.syncBookmarks()}loadBooksHeaders(){!this.bookSvc.libraryInfo||this.toolbarBooksHeaders.items.length>0||this.toolbarBooksHeaders.setItems(this.bookSvc.libraryInfo.content.map(a=>a.path2?{name:a.path2[0],path:a.path}:null).filter(a=>!!a&&"\u0421\u043f\u0440"!=a.name).map(a=>a).map(a=>pa.builder().setText(a.name).setTag(a.path)))}getSearchBookPaths(){return this.toolbarBooksHeaders.items.filter(h=>h.selected).map(h=>h.tag)}toggleKeyboard(){this.dataSearchEditorData.toggleKeyboard()}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh),B(a1),B(P0e),B(c1))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-bookmarks"]],viewQuery:function(a,h){if(1&a&&ci(Kht,5),2&a){let d;Ht(d=$t())&&(h.bookmarksView=d.first)}},inputs:{data:"data"},features:[gn],decls:34,vars:12,consts:[[1,"clr-row","no-print"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[1,"btn","btn-block","btn-primary-outline",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","flame",1,"is-solid"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["shape","ban"],[1,"clr-col-4"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],["class","btn btn-block btn-primary-outline",3,"click",4,"ngIf"],["class","bottom-top-space",4,"ngIf"],[1,"bottom-top-space"],[3,"data"],["clrForm","","clrLayout","horizontal",1,"clr-hidden-xs-down"],["clrForm","","clrLayout","vertical",1,"clr-hidden-sm-up"],[4,"ngFor","ngForOf"],["bookmarksView",""],[3,"data",4,"ngIf"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,edt,3,5,"div",1),I(2,"div",2)(3,"button",3),ee("click",function(){return h.toggleBookmarksView()}),ie(4),F()(),X(5,rdt,3,6,"div",4),F(),X(6,hdt,3,2,"div",5),X(7,pdt,2,1,"div",5),I(8,"clr-modal",6),ee("clrModalOpenChange",function(f){return h.modalDeleteAllBookmarksFlag=f}),I(9,"h3",7),ie(10,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),F(),I(11,"div",8),ue(12,"clr-icon",9),ie(13," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),F(),I(14,"div",10)(15,"button",11),ee("click",function(){return h.onDeleteAllBookmarks()}),ue(16,"clr-icon",9),ie(17,"\u0414\u0430"),F(),I(18,"button",12),ee("click",function(){return h.modalDeleteAllBookmarksFlag=!1}),ue(19,"clr-icon",13),ie(20,"\u041d\u0435\u0442"),F()()(),I(21,"clr-modal",6),ee("clrModalOpenChange",function(f){return h.modalDeleteBookmarkFlag=f}),I(22,"h3",7),ie(23,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"),F(),I(24,"div",8),ue(25,"clr-icon",9),ie(26),F(),I(27,"div",10)(28,"button",11),ee("click",function(){return h.onDeleteBookmark(h.modalDeleteBookmark)}),ue(29,"clr-icon",9),ie(30,"\u0414\u0430"),F(),I(31,"button",12),ee("click",function(){return h.modalDeleteBookmarkFlag=!1}),ue(32,"clr-icon",13),ie(33,"\u041d\u0435\u0442"),F()()()),2&a&&(P(1),R("ngIf",h.searchEnabled&&h.bookmarksEnabled),P(1),R("ngClass",as(9,R0e,h.searchEnabled&&h.bookmarksEnabled,!(h.searchEnabled&&h.bookmarksEnabled))),P(2),Ti("",h.isAllBookmarksVisible()?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"," \u0432\u0441\u0435"),P(1),R("ngIf",h.isBookmarksExists()||h.searchMode),P(1),R("ngIf",h.searchMode),P(1),R("ngIf",!h.searchMode),P(1),R("clrModalOpen",h.modalDeleteAllBookmarksFlag),P(13),R("clrModalOpen",h.modalDeleteBookmarkFlag),P(5),Ti(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0443 '",h.modalDeleteBookmark,"'? "))},dependencies:[si,fi,_n,eo,Rf,Ff,ND,I8e,Ly,Fy,xf,$c,nA,vU,h1,Yht],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();class O9{constructor(){}static builder(){return new O9}}class R1 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.startSearch=!1}static builder(){return new R1("",null,null,O9.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}setStartSearch(l){return this.startSearch=l,this}}function gdt(c,l){if(1&c&&(I(0,"div"),ue(1,"app-add-component",2),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}let mdt=(()=>{class c extends Cg{constructor(a,h,d,f){super(a,h,d),this.router=f,this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.addMenuLink(ei.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.reset()},0)}).setIsActive(()=>this.isComponentType(mS,null))).addMenuLink(ei.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.routeTo("")}).setIsActive(()=>this.isComponentType(_o,xl))).addMenuLink(ei.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(_o,R1))).addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(a=>{this.config.post(()=>this.ngAfterViewInitRaw())})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)return pageRequestedDoc="",void this.routeToHelp("3");this.uiConfig.ui.visitedBooksHelp.getStringValue()===this.config.environment.version?this.uiConfig.ui.currentBook.getStringValue()?this.config.post(()=>{this.routeTo(this.uiConfig.ui.currentBook.getStringValue())}):this.config.post(()=>{this.reset()}):this.config.post(()=>{this.routeToHelp()})}reset(){this.components=[new Vn(Che,mS.builder().setOnClick(a=>{this.routeTo(a.trim())}))],this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}isComponent(a,h=""){var d;if(this.components.length<=0)return!1;let f=this.components[0].data,p=f instanceof _o?f:null,g=null===(d=null==p?void 0:p.component)||void 0===d?void 0:d.data;return(null==g?void 0:g.text)==a&&((null==g?void 0:g.link.chapter)==h||!h)||""==a&&!(null==g||!g.text)}routeToHelp(a="1"){this.isComponent(this.helpBookName,a)&&"1"===a?this.routeTo(""):this.routeTo(this.helpBookName,a,0)}routeTo(a,h="",d=-1){let f=a,p=h,g=d;if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelp("3");if("books_help"==f||f==this.helpBookName&&""==p&&g<0)return void this.routeToHelp();if("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"==f)return void this.routeToBookmarks();if(f||(f=this.uiConfig.ui.currentBook.getStringValue()),!f||["UP","DOWN","AROUND","CENTER"].map(v=>f.endsWith(v)).reduce((v,y)=>v||y,!1))return;f!=this.uiConfig.ui.currentBook.getStringValue()&&f!=this.helpBookName&&this.uiConfig.ui.currentBook.setStringValue(f);let m=!1;f==this.helpBookName&&("3"!=p&&(p="1"),g=0,m=!0),this.components=[new Vn(nc,_o.builder().setComponent(new Vn($c,xl.builder().setText(f).setMenu(this.menuLinks).setForceMenu(!0).setHideUI(m).setFacePage(!0).setShowPrintButtons(!0).setLink(Cl.builder().setChapter(p).setStartLine(g).setEndLine(g>=0?1e3:-1).setOnRoute(v=>{v?this.routeTo(v.trim()):this.reset()})))))]}routeToBookmarks(){this.components=[new Vn(nc,_o.builder().setComponent(new Vn(F0e,R1.builder().setText("bookmark").setOnClick(a=>{let h="string"==typeof a?a:null,d=h||this.uiConfig.ui.currentBook.getStringValue();d&&null!=h?this.routeTo(d):this.reset()}))))]}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh),B(ts))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-books"]],features:[gn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,gdt,2,1,"div",1),F()),2&a&&(P(1),R("ngForOf",h.components))},dependencies:[fi,Yl]}),c})();function vdt(c,l){if(1&c&&(I(0,"div"),ue(1,"app-add-component",3),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}let ydt=(()=>{class c extends Cg{constructor(a,h,d,f){super(a,h,d),this.memDataSvc=f,this.appBookName="\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a APP_MMR",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.errorsData=Nc.builder(),this.addMenuLink(ei.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("users").setOnClick(()=>{this.reset("2")}).setIsActive(()=>this.isComponent(this.appBookName,"2"))).addMenuLink(ei.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("book").setOnClick(()=>{this.reset("1")}).setIsActive(()=>this.isComponent(this.appBookName,"1"))),this.config.isRestServerType()&&this.addMenuLink(ei.builder().setLink("#").setName("\u041f\u043e\u0438\u0441\u043a").setShape("search").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(_o,R1))),this.addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}isComponent(a,h=""){var d;if(this.components.length<=0)return!1;let p=null===(d=this.components[0].data.component)||void 0===d?void 0:d.data;return(null==p?void 0:p.text)==a&&(!h||(null==p?void 0:p.link.chapter)==h)}ngAfterViewInit(){this.memDataSvc.setup(a=>{if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed("4");else if(this.uiConfig.ui.visitedMemorialHelp.getStringValue()!==this.config.environment.version)this.routeToHelpDelayed();else{let h=this.uiConfig.ui.memorialBook.getStringValue(),d=this.uiConfig.ui.memorialChapter.getStringValue(),f=this.uiConfig.ui.memorialLine.getNumberValue();h?this.routeTo(h,d,f):this.resetDelayed()}}),super.ngAfterViewInit()}resetDelayed(a="2"){this.config.post(()=>{this.reset(a)})}reset(a="2"){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a="2"){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a="2"){this.isComponent(this.helpBookName,a)&&"2"===a?this.reset():this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,h="",d=-1){this.config.post(()=>{this.routeTo(a,h,d)})}routeTo(a,h="",d=-1){let f=a;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed("4");if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed();""==h&&(h="1"),d<0&&(d=1),this.uiConfig.ui.memorialBook.setStringValue(f),this.uiConfig.ui.memorialChapter.setStringValue(h),this.uiConfig.ui.memorialLine.setNumberValue(d),this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn($c,xl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setShowPrintButtons(!0).setHandleMemorialNewTitle("MemorialMainWindow").setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Cl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed()})))))])}}routeToBookmarks(){this.components=[new Vn(nc,_o.builder().setComponent(new Vn(F0e,R1.builder().setText("bookmark").setStartSearch(!0).setOnClick(a=>{if(this.config.post(()=>{this.applyMenuAppRoutes(!0)}),"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==a)this.routeToHelp("4");else if(a){let h=l1.builder().parse(a),d=h[0]?h[0][0]:null;if(d&&(null==d?void 0:d.type)==Xl.Link){let f=d;this.uiConfig.ui.memorialChapterRequested.setNumberValue(f.startChapter),f.langugages&&f.langugages.length>0&&this.uiConfig.ui.currentLanguages.setStringValue(f.langugages.join("|")),this.resetDelayed("1")}else this.routeToHelpDelayed()}else this.resetDelayed(null==a?"2":"1")}))))]}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(h=>h.setAlertClass("alert-danger"))}onNewMemorial(){this.clearErrors(),this.newMemorial("\u0430\u0432\u0442\u043e\u0440\u044b")}onDeleteAllMemorials(){var a,h,d;this.clearErrors(),null!==(a=this.memDataSvc.memorials)&&void 0!==a&&a.items.length&&(null===(h=this.memDataSvc.memorials)||void 0===h||h.deleteMemorial(null===(d=this.memDataSvc.memorials)||void 0===d?void 0:d.items[0]))}newMemorial(a){var h;null===(h=this.memDataSvc.memorials)||void 0===h||h.newMemorial(a,d=>{d.success?this.memDataSvc.getMemorials().reloadMemorials(f=>{f&&this.memDataSvc.getPersons().reloadPersons()}):this.setErrors([d.error])})}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh),B(lU))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-memorial"]],features:[gn],decls:3,vars:2,consts:[[1,"ftext-no","fade-in-3-no"],[3,"data"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),ue(1,"app-dynamic-errors",1),X(2,vdt,2,1,"div",2),F()),2&a&&(P(1),R("data",h.errorsData),P(1),R("ngForOf",h.components))},dependencies:[fi,Yl,h1]}),c})();const B1=1e3,ic=1001,zo=1003,bo=1006,rv=1009,sv=1014,Gg=1015,_2=1016,z1=1020,Dh=1023,ov=1026,U1=1027,av=3e3,Rs=3001,ip="srgb",lv="srgb-linear";class G1{addEventListener(l,a){void 0===this._listeners&&(this._listeners={});const h=this._listeners;void 0===h[l]&&(h[l]=[]),-1===h[l].indexOf(a)&&h[l].push(a)}hasEventListener(l,a){if(void 0===this._listeners)return!1;const h=this._listeners;return void 0!==h[l]&&-1!==h[l].indexOf(a)}removeEventListener(l,a){if(void 0===this._listeners)return;const d=this._listeners[l];if(void 0!==d){const f=d.indexOf(a);-1!==f&&d.splice(f,1)}}dispatchEvent(l){if(void 0===this._listeners)return;const h=this._listeners[l.type];if(void 0!==h){l.target=this;const d=h.slice(0);for(let f=0,p=d.length;f<p;f++)d[f].call(this,l);l.target=null}}}const Qa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],cv=Math.PI/180,b2=180/Math.PI;function Gc(){const c=4294967295*Math.random()|0,l=4294967295*Math.random()|0,a=4294967295*Math.random()|0,h=4294967295*Math.random()|0;return(Qa[255&c]+Qa[c>>8&255]+Qa[c>>16&255]+Qa[c>>24&255]+"-"+Qa[255&l]+Qa[l>>8&255]+"-"+Qa[l>>16&15|64]+Qa[l>>24&255]+"-"+Qa[63&a|128]+Qa[a>>8&255]+"-"+Qa[a>>16&255]+Qa[a>>24&255]+Qa[255&h]+Qa[h>>8&255]+Qa[h>>16&255]+Qa[h>>24&255]).toLowerCase()}function so(c,l,a){return Math.max(l,Math.min(a,c))}function C2(c,l,a){return(1-a)*c+a*l}function $9(c){return 0==(c&c-1)&&0!==c}function n3(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))}class mt{constructor(l=0,a=0){mt.prototype.isVector2=!0,this.x=l,this.y=a}get width(){return this.x}set width(l){this.x=l}get height(){return this.y}set height(l){this.y=l}set(l,a){return this.x=l,this.y=a,this}setScalar(l){return this.x=l,this.y=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setComponent(l,a){switch(l){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y)}copy(l){return this.x=l.x,this.y=l.y,this}add(l,a){return void 0!==a?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,a)):(this.x+=l.x,this.y+=l.y,this)}addScalar(l){return this.x+=l,this.y+=l,this}addVectors(l,a){return this.x=l.x+a.x,this.y=l.y+a.y,this}addScaledVector(l,a){return this.x+=l.x*a,this.y+=l.y*a,this}sub(l,a){return void 0!==a?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,a)):(this.x-=l.x,this.y-=l.y,this)}subScalar(l){return this.x-=l,this.y-=l,this}subVectors(l,a){return this.x=l.x-a.x,this.y=l.y-a.y,this}multiply(l){return this.x*=l.x,this.y*=l.y,this}multiplyScalar(l){return this.x*=l,this.y*=l,this}divide(l){return this.x/=l.x,this.y/=l.y,this}divideScalar(l){return this.multiplyScalar(1/l)}applyMatrix3(l){const a=this.x,h=this.y,d=l.elements;return this.x=d[0]*a+d[3]*h+d[6],this.y=d[1]*a+d[4]*h+d[7],this}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this}clamp(l,a){return this.x=Math.max(l.x,Math.min(a.x,this.x)),this.y=Math.max(l.y,Math.min(a.y,this.y)),this}clampScalar(l,a){return this.x=Math.max(l,Math.min(a,this.x)),this.y=Math.max(l,Math.min(a,this.y)),this}clampLength(l,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(l,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(l){return this.x*l.x+this.y*l.y}cross(l){return this.x*l.y-this.y*l.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(l){return Math.sqrt(this.distanceToSquared(l))}distanceToSquared(l){const a=this.x-l.x,h=this.y-l.y;return a*a+h*h}manhattanDistanceTo(l){return Math.abs(this.x-l.x)+Math.abs(this.y-l.y)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,a){return this.x+=(l.x-this.x)*a,this.y+=(l.y-this.y)*a,this}lerpVectors(l,a,h){return this.x=l.x+(a.x-l.x)*h,this.y=l.y+(a.y-l.y)*h,this}equals(l){return l.x===this.x&&l.y===this.y}fromArray(l,a=0){return this.x=l[a],this.y=l[a+1],this}toArray(l=[],a=0){return l[a]=this.x,l[a+1]=this.y,l}fromBufferAttribute(l,a,h){return void 0!==h&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(a),this.y=l.getY(a),this}rotateAround(l,a){const h=Math.cos(a),d=Math.sin(a),f=this.x-l.x,p=this.y-l.y;return this.x=f*h-p*d+l.x,this.y=f*d+p*h+l.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class rc{constructor(){rc.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(l,a,h,d,f,p,g,m,v){const y=this.elements;return y[0]=l,y[1]=d,y[2]=g,y[3]=a,y[4]=f,y[5]=m,y[6]=h,y[7]=p,y[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(l){const a=this.elements,h=l.elements;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],this}extractBasis(l,a,h){return l.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),h.setFromMatrix3Column(this,2),this}setFromMatrix4(l){const a=l.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(l){return this.multiplyMatrices(this,l)}premultiply(l){return this.multiplyMatrices(l,this)}multiplyMatrices(l,a){const h=l.elements,d=a.elements,f=this.elements,p=h[0],g=h[3],m=h[6],v=h[1],y=h[4],_=h[7],b=h[2],C=h[5],x=h[8],S=d[0],w=d[3],T=d[6],O=d[1],k=d[4],D=d[7],M=d[2],A=d[5],L=d[8];return f[0]=p*S+g*O+m*M,f[3]=p*w+g*k+m*A,f[6]=p*T+g*D+m*L,f[1]=v*S+y*O+_*M,f[4]=v*w+y*k+_*A,f[7]=v*T+y*D+_*L,f[2]=b*S+C*O+x*M,f[5]=b*w+C*k+x*A,f[8]=b*T+C*D+x*L,this}multiplyScalar(l){const a=this.elements;return a[0]*=l,a[3]*=l,a[6]*=l,a[1]*=l,a[4]*=l,a[7]*=l,a[2]*=l,a[5]*=l,a[8]*=l,this}determinant(){const l=this.elements,a=l[0],h=l[1],d=l[2],f=l[3],p=l[4],g=l[5],m=l[6],v=l[7],y=l[8];return a*p*y-a*g*v-h*f*y+h*g*m+d*f*v-d*p*m}invert(){const l=this.elements,a=l[0],h=l[1],d=l[2],f=l[3],p=l[4],g=l[5],m=l[6],v=l[7],y=l[8],_=y*p-g*v,b=g*m-y*f,C=v*f-p*m,x=a*_+h*b+d*C;if(0===x)return this.set(0,0,0,0,0,0,0,0,0);const S=1/x;return l[0]=_*S,l[1]=(d*v-y*h)*S,l[2]=(g*h-d*p)*S,l[3]=b*S,l[4]=(y*a-d*m)*S,l[5]=(d*f-g*a)*S,l[6]=C*S,l[7]=(h*m-v*a)*S,l[8]=(p*a-h*f)*S,this}transpose(){let l;const a=this.elements;return l=a[1],a[1]=a[3],a[3]=l,l=a[2],a[2]=a[6],a[6]=l,l=a[5],a[5]=a[7],a[7]=l,this}getNormalMatrix(l){return this.setFromMatrix4(l).invert().transpose()}transposeIntoArray(l){const a=this.elements;return l[0]=a[0],l[1]=a[3],l[2]=a[6],l[3]=a[1],l[4]=a[4],l[5]=a[7],l[6]=a[2],l[7]=a[5],l[8]=a[8],this}setUvTransform(l,a,h,d,f,p,g){const m=Math.cos(f),v=Math.sin(f);return this.set(h*m,h*v,-h*(m*p+v*g)+p+l,-d*v,d*m,-d*(-v*p+m*g)+g+a,0,0,1),this}scale(l,a){const h=this.elements;return h[0]*=l,h[3]*=l,h[6]*=l,h[1]*=a,h[4]*=a,h[7]*=a,this}rotate(l){const a=Math.cos(l),h=Math.sin(l),d=this.elements,f=d[0],p=d[3],g=d[6],m=d[1],v=d[4],y=d[7];return d[0]=a*f+h*m,d[3]=a*p+h*v,d[6]=a*g+h*y,d[1]=-h*f+a*m,d[4]=-h*p+a*v,d[7]=-h*g+a*y,this}translate(l,a){const h=this.elements;return h[0]+=l*h[2],h[3]+=l*h[5],h[6]+=l*h[8],h[1]+=a*h[2],h[4]+=a*h[5],h[7]+=a*h[8],this}equals(l){const a=this.elements,h=l.elements;for(let d=0;d<9;d++)if(a[d]!==h[d])return!1;return!0}fromArray(l,a=0){for(let h=0;h<9;h++)this.elements[h]=l[h+a];return this}toArray(l=[],a=0){const h=this.elements;return l[a]=h[0],l[a+1]=h[1],l[a+2]=h[2],l[a+3]=h[3],l[a+4]=h[4],l[a+5]=h[5],l[a+6]=h[6],l[a+7]=h[7],l[a+8]=h[8],l}clone(){return(new this.constructor).fromArray(this.elements)}}function bve(c){for(let l=c.length-1;l>=0;--l)if(c[l]>65535)return!0;return!1}function x2(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function uv(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function i3(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const W9={[ip]:{[lv]:uv},[lv]:{[ip]:i3}},kh={legacyMode:!0,get workingColorSpace(){return lv},set workingColorSpace(c){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(c,l,a){if(this.legacyMode||l===a||!l||!a)return c;if(W9[l]&&void 0!==W9[l][a]){const h=W9[l][a];return c.r=h(c.r),c.g=h(c.g),c.b=h(c.b),c}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(c,l){return this.convert(c,this.workingColorSpace,l)},toWorkingColorSpace:function(c,l){return this.convert(c,l,this.workingColorSpace)}},Cve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Uo={r:0,g:0,b:0},Mh={h:0,s:0,l:0},r3={h:0,s:0,l:0};function G9(c,l,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?c+6*(l-c)*a:a<.5?l:a<2/3?c+6*(l-c)*(2/3-a):c}function s3(c,l){return l.r=c.r,l.g=c.g,l.b=c.b,l}let j1,hn=(()=>{class c{constructor(a,h,d){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===h&&void 0===d?this.set(a):this.setRGB(a,h,d)}set(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this}setScalar(a){return this.r=a,this.g=a,this.b=a,this}setHex(a,h=ip){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,kh.toWorkingColorSpace(this,h),this}setRGB(a,h,d,f=lv){return this.r=a,this.g=h,this.b=d,kh.toWorkingColorSpace(this,f),this}setHSL(a,h,d,f=lv){if(a=function H9(c,l){return(c%l+l)%l}(a,1),h=so(h,0,1),d=so(d,0,1),0===h)this.r=this.g=this.b=d;else{const p=d<=.5?d*(1+h):d+h-d*h,g=2*d-p;this.r=G9(g,p,a+1/3),this.g=G9(g,p,a),this.b=G9(g,p,a-1/3)}return kh.toWorkingColorSpace(this,f),this}setStyle(a,h=ip){function d(p){void 0!==p&&parseFloat(p)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}let f;if(f=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(a)){let p;const m=f[2];switch(f[1]){case"rgb":case"rgba":if(p=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(255,parseInt(p[1],10))/255,this.g=Math.min(255,parseInt(p[2],10))/255,this.b=Math.min(255,parseInt(p[3],10))/255,kh.toWorkingColorSpace(this,h),d(p[4]),this;if(p=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(100,parseInt(p[1],10))/100,this.g=Math.min(100,parseInt(p[2],10))/100,this.b=Math.min(100,parseInt(p[3],10))/100,kh.toWorkingColorSpace(this,h),d(p[4]),this;break;case"hsl":case"hsla":if(p=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m)){const v=parseFloat(p[1])/360,y=parseInt(p[2],10)/100,_=parseInt(p[3],10)/100;return d(p[4]),this.setHSL(v,y,_,h)}}}else if(f=/^\#([A-Fa-f\d]+)$/.exec(a)){const p=f[1],g=p.length;if(3===g)return this.r=parseInt(p.charAt(0)+p.charAt(0),16)/255,this.g=parseInt(p.charAt(1)+p.charAt(1),16)/255,this.b=parseInt(p.charAt(2)+p.charAt(2),16)/255,kh.toWorkingColorSpace(this,h),this;if(6===g)return this.r=parseInt(p.charAt(0)+p.charAt(1),16)/255,this.g=parseInt(p.charAt(2)+p.charAt(3),16)/255,this.b=parseInt(p.charAt(4)+p.charAt(5),16)/255,kh.toWorkingColorSpace(this,h),this}return a&&a.length>0?this.setColorName(a,h):this}setColorName(a,h=ip){const d=Cve[a.toLowerCase()];return void 0!==d?this.setHex(d,h):console.warn("THREE.Color: Unknown color "+a),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){return this.r=a.r,this.g=a.g,this.b=a.b,this}copySRGBToLinear(a){return this.r=uv(a.r),this.g=uv(a.g),this.b=uv(a.b),this}copyLinearToSRGB(a){return this.r=i3(a.r),this.g=i3(a.g),this.b=i3(a.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(a=ip){return kh.fromWorkingColorSpace(s3(this,Uo),a),so(255*Uo.r,0,255)<<16^so(255*Uo.g,0,255)<<8^so(255*Uo.b,0,255)<<0}getHexString(a=ip){return("000000"+this.getHex(a).toString(16)).slice(-6)}getHSL(a,h=lv){kh.fromWorkingColorSpace(s3(this,Uo),h);const d=Uo.r,f=Uo.g,p=Uo.b,g=Math.max(d,f,p),m=Math.min(d,f,p);let v,y;const _=(m+g)/2;if(m===g)v=0,y=0;else{const b=g-m;switch(y=_<=.5?b/(g+m):b/(2-g-m),g){case d:v=(f-p)/b+(f<p?6:0);break;case f:v=(p-d)/b+2;break;case p:v=(d-f)/b+4}v/=6}return a.h=v,a.s=y,a.l=_,a}getRGB(a,h=lv){return kh.fromWorkingColorSpace(s3(this,Uo),h),a.r=Uo.r,a.g=Uo.g,a.b=Uo.b,a}getStyle(a=ip){return kh.fromWorkingColorSpace(s3(this,Uo),a),a!==ip?`color(${a} ${Uo.r} ${Uo.g} ${Uo.b})`:`rgb(${255*Uo.r|0},${255*Uo.g|0},${255*Uo.b|0})`}offsetHSL(a,h,d){return this.getHSL(Mh),Mh.h+=a,Mh.s+=h,Mh.l+=d,this.setHSL(Mh.h,Mh.s,Mh.l),this}add(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this}addColors(a,h){return this.r=a.r+h.r,this.g=a.g+h.g,this.b=a.b+h.b,this}addScalar(a){return this.r+=a,this.g+=a,this.b+=a,this}sub(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this}multiply(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this}multiplyScalar(a){return this.r*=a,this.g*=a,this.b*=a,this}lerp(a,h){return this.r+=(a.r-this.r)*h,this.g+=(a.g-this.g)*h,this.b+=(a.b-this.b)*h,this}lerpColors(a,h,d){return this.r=a.r+(h.r-a.r)*d,this.g=a.g+(h.g-a.g)*d,this.b=a.b+(h.b-a.b)*d,this}lerpHSL(a,h){this.getHSL(Mh),a.getHSL(r3);const d=C2(Mh.h,r3.h,h),f=C2(Mh.s,r3.s,h),p=C2(Mh.l,r3.l,h);return this.setHSL(d,f,p),this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,h=0){return this.r=a[h],this.g=a[h+1],this.b=a[h+2],this}toArray(a=[],h=0){return a[h]=this.r,a[h+1]=this.g,a[h+2]=this.b,a}fromBufferAttribute(a,h){return this.r=a.getX(h),this.g=a.getY(h),this.b=a.getZ(h),!0===a.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return c.NAMES=Cve,c})();class xve{static getDataURL(l){if(/^data:/i.test(l.src)||"undefined"==typeof HTMLCanvasElement)return l.src;let a;if(l instanceof HTMLCanvasElement)a=l;else{void 0===j1&&(j1=x2("canvas")),j1.width=l.width,j1.height=l.height;const h=j1.getContext("2d");l instanceof ImageData?h.putImageData(l,0,0):h.drawImage(l,0,0,l.width,l.height),a=j1}return a.width>2048||a.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",l),a.toDataURL("image/jpeg",.6)):a.toDataURL("image/png")}static sRGBToLinear(l){if("undefined"!=typeof HTMLImageElement&&l instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&l instanceof ImageBitmap){const a=x2("canvas");a.width=l.width,a.height=l.height;const h=a.getContext("2d");h.drawImage(l,0,0,l.width,l.height);const d=h.getImageData(0,0,l.width,l.height),f=d.data;for(let p=0;p<f.length;p++)f[p]=255*uv(f[p]/255);return h.putImageData(d,0,0),a}if(l.data){const a=l.data.slice(0);for(let h=0;h<a.length;h++)a[h]=a instanceof Uint8Array||a instanceof Uint8ClampedArray?Math.floor(255*uv(a[h]/255)):uv(a[h]);return{data:a,width:l.width,height:l.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),l}}class q1{constructor(l=null){this.isSource=!0,this.uuid=Gc(),this.data=l,this.version=0}set needsUpdate(l){!0===l&&this.version++}toJSON(l){const a=void 0===l||"string"==typeof l;if(!a&&void 0!==l.images[this.uuid])return l.images[this.uuid];const h={uuid:this.uuid,url:""},d=this.data;if(null!==d){let f;if(Array.isArray(d)){f=[];for(let p=0,g=d.length;p<g;p++)f.push(Q9(d[p].isDataTexture?d[p].image:d[p]))}else f=Q9(d);h.url=f}return a||(l.images[this.uuid]=h),h}}function Q9(c){return"undefined"!=typeof HTMLImageElement&&c instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&c instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&c instanceof ImageBitmap?xve.getDataURL(c):c.data?{data:Array.from(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Eft=0,Hd=(()=>{class c extends G1{constructor(a=c.DEFAULT_IMAGE,h=c.DEFAULT_MAPPING,d=ic,f=ic,p=bo,g=1008,m=Dh,v=rv,y=1,_=av){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Eft++}),this.uuid=Gc(),this.name="",this.source=new q1(a),this.mipmaps=[],this.mapping=h,this.wrapS=d,this.wrapT=f,this.magFilter=p,this.minFilter=g,this.anisotropy=y,this.format=m,this.internalFormat=null,this.type=v,this.offset=new mt(0,0),this.repeat=new mt(1,1),this.center=new mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(a){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){return this.name=a.name,this.source=a.source,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this.userData=JSON.parse(JSON.stringify(a.userData)),this.needsUpdate=!0,this}toJSON(a){const h=void 0===a||"string"==typeof a;if(!h&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const d={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData),h||(a.textures[this.uuid]=d),d}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case B1:a.x=a.x-Math.floor(a.x);break;case ic:a.x=a.x<0?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case B1:a.y=a.y-Math.floor(a.y);break;case ic:a.y=a.y<0?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){!0===a&&(this.version++,this.source.needsUpdate=!0)}}return c.DEFAULT_IMAGE=null,c.DEFAULT_MAPPING=300,c})();class ar{constructor(l=0,a=0,h=0,d=1){ar.prototype.isVector4=!0,this.x=l,this.y=a,this.z=h,this.w=d}get width(){return this.z}set width(l){this.z=l}get height(){return this.w}set height(l){this.w=l}set(l,a,h,d){return this.x=l,this.y=a,this.z=h,this.w=d,this}setScalar(l){return this.x=l,this.y=l,this.z=l,this.w=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setZ(l){return this.z=l,this}setW(l){return this.w=l,this}setComponent(l,a){switch(l){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this.w=void 0!==l.w?l.w:1,this}add(l,a){return void 0!==a?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,a)):(this.x+=l.x,this.y+=l.y,this.z+=l.z,this.w+=l.w,this)}addScalar(l){return this.x+=l,this.y+=l,this.z+=l,this.w+=l,this}addVectors(l,a){return this.x=l.x+a.x,this.y=l.y+a.y,this.z=l.z+a.z,this.w=l.w+a.w,this}addScaledVector(l,a){return this.x+=l.x*a,this.y+=l.y*a,this.z+=l.z*a,this.w+=l.w*a,this}sub(l,a){return void 0!==a?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,a)):(this.x-=l.x,this.y-=l.y,this.z-=l.z,this.w-=l.w,this)}subScalar(l){return this.x-=l,this.y-=l,this.z-=l,this.w-=l,this}subVectors(l,a){return this.x=l.x-a.x,this.y=l.y-a.y,this.z=l.z-a.z,this.w=l.w-a.w,this}multiply(l){return this.x*=l.x,this.y*=l.y,this.z*=l.z,this.w*=l.w,this}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this.w*=l,this}applyMatrix4(l){const a=this.x,h=this.y,d=this.z,f=this.w,p=l.elements;return this.x=p[0]*a+p[4]*h+p[8]*d+p[12]*f,this.y=p[1]*a+p[5]*h+p[9]*d+p[13]*f,this.z=p[2]*a+p[6]*h+p[10]*d+p[14]*f,this.w=p[3]*a+p[7]*h+p[11]*d+p[15]*f,this}divideScalar(l){return this.multiplyScalar(1/l)}setAxisAngleFromQuaternion(l){this.w=2*Math.acos(l.w);const a=Math.sqrt(1-l.w*l.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=l.x/a,this.y=l.y/a,this.z=l.z/a),this}setAxisAngleFromRotationMatrix(l){let a,h,d,f;const m=l.elements,v=m[0],y=m[4],_=m[8],b=m[1],C=m[5],x=m[9],S=m[2],w=m[6],T=m[10];if(Math.abs(y-b)<.01&&Math.abs(_-S)<.01&&Math.abs(x-w)<.01){if(Math.abs(y+b)<.1&&Math.abs(_+S)<.1&&Math.abs(x+w)<.1&&Math.abs(v+C+T-3)<.1)return this.set(1,0,0,0),this;a=Math.PI;const k=(v+1)/2,D=(C+1)/2,M=(T+1)/2,A=(y+b)/4,L=(_+S)/4,E=(x+w)/4;return k>D&&k>M?k<.01?(h=0,d=.707106781,f=.707106781):(h=Math.sqrt(k),d=A/h,f=L/h):D>M?D<.01?(h=.707106781,d=0,f=.707106781):(d=Math.sqrt(D),h=A/d,f=E/d):M<.01?(h=.707106781,d=.707106781,f=0):(f=Math.sqrt(M),h=L/f,d=E/f),this.set(h,d,f,a),this}let O=Math.sqrt((w-x)*(w-x)+(_-S)*(_-S)+(b-y)*(b-y));return Math.abs(O)<.001&&(O=1),this.x=(w-x)/O,this.y=(_-S)/O,this.z=(b-y)/O,this.w=Math.acos((v+C+T-1)/2),this}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this.w=Math.min(this.w,l.w),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this.w=Math.max(this.w,l.w),this}clamp(l,a){return this.x=Math.max(l.x,Math.min(a.x,this.x)),this.y=Math.max(l.y,Math.min(a.y,this.y)),this.z=Math.max(l.z,Math.min(a.z,this.z)),this.w=Math.max(l.w,Math.min(a.w,this.w)),this}clampScalar(l,a){return this.x=Math.max(l,Math.min(a,this.x)),this.y=Math.max(l,Math.min(a,this.y)),this.z=Math.max(l,Math.min(a,this.z)),this.w=Math.max(l,Math.min(a,this.w)),this}clampLength(l,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(l,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(l){return this.x*l.x+this.y*l.y+this.z*l.z+this.w*l.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,a){return this.x+=(l.x-this.x)*a,this.y+=(l.y-this.y)*a,this.z+=(l.z-this.z)*a,this.w+=(l.w-this.w)*a,this}lerpVectors(l,a,h){return this.x=l.x+(a.x-l.x)*h,this.y=l.y+(a.y-l.y)*h,this.z=l.z+(a.z-l.z)*h,this.w=l.w+(a.w-l.w)*h,this}equals(l){return l.x===this.x&&l.y===this.y&&l.z===this.z&&l.w===this.w}fromArray(l,a=0){return this.x=l[a],this.y=l[a+1],this.z=l[a+2],this.w=l[a+3],this}toArray(l=[],a=0){return l[a]=this.x,l[a+1]=this.y,l[a+2]=this.z,l[a+3]=this.w,l}fromBufferAttribute(l,a,h){return void 0!==h&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(a),this.y=l.getY(a),this.z=l.getZ(a),this.w=l.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class kl extends G1{constructor(l,a,h={}){super(),this.isWebGLRenderTarget=!0,this.width=l,this.height=a,this.depth=1,this.scissor=new ar(0,0,l,a),this.scissorTest=!1,this.viewport=new ar(0,0,l,a),this.texture=new Hd({width:l,height:a,depth:1},h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.internalFormat=void 0!==h.internalFormat?h.internalFormat:null,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:bo,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0!==h.stencilBuffer&&h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null,this.samples=void 0!==h.samples?h.samples:0}setSize(l,a,h=1){(this.width!==l||this.height!==a||this.depth!==h)&&(this.width=l,this.height=a,this.depth=h,this.texture.image.width=l,this.texture.image.height=a,this.texture.image.depth=h,this.dispose()),this.viewport.set(0,0,l,a),this.scissor.set(0,0,l,a)}clone(){return(new this.constructor).copy(this)}copy(l){this.width=l.width,this.height=l.height,this.depth=l.depth,this.viewport.copy(l.viewport),this.texture=l.texture.clone(),this.texture.isRenderTargetTexture=!0;const a=Object.assign({},l.texture.image);return this.texture.source=new q1(a),this.depthBuffer=l.depthBuffer,this.stencilBuffer=l.stencilBuffer,null!==l.depthTexture&&(this.depthTexture=l.depthTexture.clone()),this.samples=l.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class j9 extends Hd{constructor(l=null,a=1,h=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:l,width:a,height:h,depth:d},this.magFilter=zo,this.minFilter=zo,this.wrapR=ic,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wve extends Hd{constructor(l=null,a=1,h=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:l,width:a,height:h,depth:d},this.magFilter=zo,this.minFilter=zo,this.wrapR=ic,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qc{constructor(l=0,a=0,h=0,d=1){this.isQuaternion=!0,this._x=l,this._y=a,this._z=h,this._w=d}static slerp(l,a,h,d){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),h.slerpQuaternions(l,a,d)}static slerpFlat(l,a,h,d,f,p,g){let m=h[d+0],v=h[d+1],y=h[d+2],_=h[d+3];const b=f[p+0],C=f[p+1],x=f[p+2],S=f[p+3];if(0===g)return l[a+0]=m,l[a+1]=v,l[a+2]=y,void(l[a+3]=_);if(1===g)return l[a+0]=b,l[a+1]=C,l[a+2]=x,void(l[a+3]=S);if(_!==S||m!==b||v!==C||y!==x){let w=1-g;const T=m*b+v*C+y*x+_*S,O=T>=0?1:-1,k=1-T*T;if(k>Number.EPSILON){const M=Math.sqrt(k),A=Math.atan2(M,T*O);w=Math.sin(w*A)/M,g=Math.sin(g*A)/M}const D=g*O;if(m=m*w+b*D,v=v*w+C*D,y=y*w+x*D,_=_*w+S*D,w===1-g){const M=1/Math.sqrt(m*m+v*v+y*y+_*_);m*=M,v*=M,y*=M,_*=M}}l[a]=m,l[a+1]=v,l[a+2]=y,l[a+3]=_}static multiplyQuaternionsFlat(l,a,h,d,f,p){const g=h[d],m=h[d+1],v=h[d+2],y=h[d+3],_=f[p],b=f[p+1],C=f[p+2],x=f[p+3];return l[a]=g*x+y*_+m*C-v*b,l[a+1]=m*x+y*b+v*_-g*C,l[a+2]=v*x+y*C+g*b-m*_,l[a+3]=y*x-g*_-m*b-v*C,l}get x(){return this._x}set x(l){this._x=l,this._onChangeCallback()}get y(){return this._y}set y(l){this._y=l,this._onChangeCallback()}get z(){return this._z}set z(l){this._z=l,this._onChangeCallback()}get w(){return this._w}set w(l){this._w=l,this._onChangeCallback()}set(l,a,h,d){return this._x=l,this._y=a,this._z=h,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(l){return this._x=l.x,this._y=l.y,this._z=l.z,this._w=l.w,this._onChangeCallback(),this}setFromEuler(l,a){if(!l||!l.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const h=l._x,d=l._y,f=l._z,p=l._order,g=Math.cos,m=Math.sin,v=g(h/2),y=g(d/2),_=g(f/2),b=m(h/2),C=m(d/2),x=m(f/2);switch(p){case"XYZ":this._x=b*y*_+v*C*x,this._y=v*C*_-b*y*x,this._z=v*y*x+b*C*_,this._w=v*y*_-b*C*x;break;case"YXZ":this._x=b*y*_+v*C*x,this._y=v*C*_-b*y*x,this._z=v*y*x-b*C*_,this._w=v*y*_+b*C*x;break;case"ZXY":this._x=b*y*_-v*C*x,this._y=v*C*_+b*y*x,this._z=v*y*x+b*C*_,this._w=v*y*_-b*C*x;break;case"ZYX":this._x=b*y*_-v*C*x,this._y=v*C*_+b*y*x,this._z=v*y*x-b*C*_,this._w=v*y*_+b*C*x;break;case"YZX":this._x=b*y*_+v*C*x,this._y=v*C*_+b*y*x,this._z=v*y*x-b*C*_,this._w=v*y*_-b*C*x;break;case"XZY":this._x=b*y*_-v*C*x,this._y=v*C*_-b*y*x,this._z=v*y*x+b*C*_,this._w=v*y*_+b*C*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return!1!==a&&this._onChangeCallback(),this}setFromAxisAngle(l,a){const h=a/2,d=Math.sin(h);return this._x=l.x*d,this._y=l.y*d,this._z=l.z*d,this._w=Math.cos(h),this._onChangeCallback(),this}setFromRotationMatrix(l){const a=l.elements,h=a[0],d=a[4],f=a[8],p=a[1],g=a[5],m=a[9],v=a[2],y=a[6],_=a[10],b=h+g+_;if(b>0){const C=.5/Math.sqrt(b+1);this._w=.25/C,this._x=(y-m)*C,this._y=(f-v)*C,this._z=(p-d)*C}else if(h>g&&h>_){const C=2*Math.sqrt(1+h-g-_);this._w=(y-m)/C,this._x=.25*C,this._y=(d+p)/C,this._z=(f+v)/C}else if(g>_){const C=2*Math.sqrt(1+g-h-_);this._w=(f-v)/C,this._x=(d+p)/C,this._y=.25*C,this._z=(m+y)/C}else{const C=2*Math.sqrt(1+_-h-g);this._w=(p-d)/C,this._x=(f+v)/C,this._y=(m+y)/C,this._z=.25*C}return this._onChangeCallback(),this}setFromUnitVectors(l,a){let h=l.dot(a)+1;return h<Number.EPSILON?(h=0,Math.abs(l.x)>Math.abs(l.z)?(this._x=-l.y,this._y=l.x,this._z=0,this._w=h):(this._x=0,this._y=-l.z,this._z=l.y,this._w=h)):(this._x=l.y*a.z-l.z*a.y,this._y=l.z*a.x-l.x*a.z,this._z=l.x*a.y-l.y*a.x,this._w=h),this.normalize()}angleTo(l){return 2*Math.acos(Math.abs(so(this.dot(l),-1,1)))}rotateTowards(l,a){const h=this.angleTo(l);if(0===h)return this;const d=Math.min(1,a/h);return this.slerp(l,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(l){return this._x*l._x+this._y*l._y+this._z*l._z+this._w*l._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let l=this.length();return 0===l?(this._x=0,this._y=0,this._z=0,this._w=1):(l=1/l,this._x=this._x*l,this._y=this._y*l,this._z=this._z*l,this._w=this._w*l),this._onChangeCallback(),this}multiply(l,a){return void 0!==a?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(l,a)):this.multiplyQuaternions(this,l)}premultiply(l){return this.multiplyQuaternions(l,this)}multiplyQuaternions(l,a){const h=l._x,d=l._y,f=l._z,p=l._w,g=a._x,m=a._y,v=a._z,y=a._w;return this._x=h*y+p*g+d*v-f*m,this._y=d*y+p*m+f*g-h*v,this._z=f*y+p*v+h*m-d*g,this._w=p*y-h*g-d*m-f*v,this._onChangeCallback(),this}slerp(l,a){if(0===a)return this;if(1===a)return this.copy(l);const h=this._x,d=this._y,f=this._z,p=this._w;let g=p*l._w+h*l._x+d*l._y+f*l._z;if(g<0?(this._w=-l._w,this._x=-l._x,this._y=-l._y,this._z=-l._z,g=-g):this.copy(l),g>=1)return this._w=p,this._x=h,this._y=d,this._z=f,this;const m=1-g*g;if(m<=Number.EPSILON){const C=1-a;return this._w=C*p+a*this._w,this._x=C*h+a*this._x,this._y=C*d+a*this._y,this._z=C*f+a*this._z,this.normalize(),this._onChangeCallback(),this}const v=Math.sqrt(m),y=Math.atan2(v,g),_=Math.sin((1-a)*y)/v,b=Math.sin(a*y)/v;return this._w=p*_+this._w*b,this._x=h*_+this._x*b,this._y=d*_+this._y*b,this._z=f*_+this._z*b,this._onChangeCallback(),this}slerpQuaternions(l,a,h){return this.copy(l).slerp(a,h)}random(){const l=Math.random(),a=Math.sqrt(1-l),h=Math.sqrt(l),d=2*Math.PI*Math.random(),f=2*Math.PI*Math.random();return this.set(a*Math.cos(d),h*Math.sin(f),h*Math.cos(f),a*Math.sin(d))}equals(l){return l._x===this._x&&l._y===this._y&&l._z===this._z&&l._w===this._w}fromArray(l,a=0){return this._x=l[a],this._y=l[a+1],this._z=l[a+2],this._w=l[a+3],this._onChangeCallback(),this}toArray(l=[],a=0){return l[a]=this._x,l[a+1]=this._y,l[a+2]=this._z,l[a+3]=this._w,l}fromBufferAttribute(l,a){return this._x=l.getX(a),this._y=l.getY(a),this._z=l.getZ(a),this._w=l.getW(a),this}_onChange(l){return this._onChangeCallback=l,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(l=0,a=0,h=0){re.prototype.isVector3=!0,this.x=l,this.y=a,this.z=h}set(l,a,h){return void 0===h&&(h=this.z),this.x=l,this.y=a,this.z=h,this}setScalar(l){return this.x=l,this.y=l,this.z=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setZ(l){return this.z=l,this}setComponent(l,a){switch(l){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this}add(l,a){return void 0!==a?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,a)):(this.x+=l.x,this.y+=l.y,this.z+=l.z,this)}addScalar(l){return this.x+=l,this.y+=l,this.z+=l,this}addVectors(l,a){return this.x=l.x+a.x,this.y=l.y+a.y,this.z=l.z+a.z,this}addScaledVector(l,a){return this.x+=l.x*a,this.y+=l.y*a,this.z+=l.z*a,this}sub(l,a){return void 0!==a?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,a)):(this.x-=l.x,this.y-=l.y,this.z-=l.z,this)}subScalar(l){return this.x-=l,this.y-=l,this.z-=l,this}subVectors(l,a){return this.x=l.x-a.x,this.y=l.y-a.y,this.z=l.z-a.z,this}multiply(l,a){return void 0!==a?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(l,a)):(this.x*=l.x,this.y*=l.y,this.z*=l.z,this)}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this}multiplyVectors(l,a){return this.x=l.x*a.x,this.y=l.y*a.y,this.z=l.z*a.z,this}applyEuler(l){return l&&l.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Sve.setFromEuler(l))}applyAxisAngle(l,a){return this.applyQuaternion(Sve.setFromAxisAngle(l,a))}applyMatrix3(l){const a=this.x,h=this.y,d=this.z,f=l.elements;return this.x=f[0]*a+f[3]*h+f[6]*d,this.y=f[1]*a+f[4]*h+f[7]*d,this.z=f[2]*a+f[5]*h+f[8]*d,this}applyNormalMatrix(l){return this.applyMatrix3(l).normalize()}applyMatrix4(l){const a=this.x,h=this.y,d=this.z,f=l.elements,p=1/(f[3]*a+f[7]*h+f[11]*d+f[15]);return this.x=(f[0]*a+f[4]*h+f[8]*d+f[12])*p,this.y=(f[1]*a+f[5]*h+f[9]*d+f[13])*p,this.z=(f[2]*a+f[6]*h+f[10]*d+f[14])*p,this}applyQuaternion(l){const a=this.x,h=this.y,d=this.z,f=l.x,p=l.y,g=l.z,m=l.w,v=m*a+p*d-g*h,y=m*h+g*a-f*d,_=m*d+f*h-p*a,b=-f*a-p*h-g*d;return this.x=v*m+b*-f+y*-g-_*-p,this.y=y*m+b*-p+_*-f-v*-g,this.z=_*m+b*-g+v*-p-y*-f,this}project(l){return this.applyMatrix4(l.matrixWorldInverse).applyMatrix4(l.projectionMatrix)}unproject(l){return this.applyMatrix4(l.projectionMatrixInverse).applyMatrix4(l.matrixWorld)}transformDirection(l){const a=this.x,h=this.y,d=this.z,f=l.elements;return this.x=f[0]*a+f[4]*h+f[8]*d,this.y=f[1]*a+f[5]*h+f[9]*d,this.z=f[2]*a+f[6]*h+f[10]*d,this.normalize()}divide(l){return this.x/=l.x,this.y/=l.y,this.z/=l.z,this}divideScalar(l){return this.multiplyScalar(1/l)}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this}clamp(l,a){return this.x=Math.max(l.x,Math.min(a.x,this.x)),this.y=Math.max(l.y,Math.min(a.y,this.y)),this.z=Math.max(l.z,Math.min(a.z,this.z)),this}clampScalar(l,a){return this.x=Math.max(l,Math.min(a,this.x)),this.y=Math.max(l,Math.min(a,this.y)),this.z=Math.max(l,Math.min(a,this.z)),this}clampLength(l,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(l,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(l){return this.x*l.x+this.y*l.y+this.z*l.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,a){return this.x+=(l.x-this.x)*a,this.y+=(l.y-this.y)*a,this.z+=(l.z-this.z)*a,this}lerpVectors(l,a,h){return this.x=l.x+(a.x-l.x)*h,this.y=l.y+(a.y-l.y)*h,this.z=l.z+(a.z-l.z)*h,this}cross(l,a){return void 0!==a?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(l,a)):this.crossVectors(this,l)}crossVectors(l,a){const h=l.x,d=l.y,f=l.z,p=a.x,g=a.y,m=a.z;return this.x=d*m-f*g,this.y=f*p-h*m,this.z=h*g-d*p,this}projectOnVector(l){const a=l.lengthSq();if(0===a)return this.set(0,0,0);const h=l.dot(this)/a;return this.copy(l).multiplyScalar(h)}projectOnPlane(l){return q9.copy(this).projectOnVector(l),this.sub(q9)}reflect(l){return this.sub(q9.copy(l).multiplyScalar(2*this.dot(l)))}angleTo(l){const a=Math.sqrt(this.lengthSq()*l.lengthSq());if(0===a)return Math.PI/2;const h=this.dot(l)/a;return Math.acos(so(h,-1,1))}distanceTo(l){return Math.sqrt(this.distanceToSquared(l))}distanceToSquared(l){const a=this.x-l.x,h=this.y-l.y,d=this.z-l.z;return a*a+h*h+d*d}manhattanDistanceTo(l){return Math.abs(this.x-l.x)+Math.abs(this.y-l.y)+Math.abs(this.z-l.z)}setFromSpherical(l){return this.setFromSphericalCoords(l.radius,l.phi,l.theta)}setFromSphericalCoords(l,a,h){const d=Math.sin(a)*l;return this.x=d*Math.sin(h),this.y=Math.cos(a)*l,this.z=d*Math.cos(h),this}setFromCylindrical(l){return this.setFromCylindricalCoords(l.radius,l.theta,l.y)}setFromCylindricalCoords(l,a,h){return this.x=l*Math.sin(a),this.y=h,this.z=l*Math.cos(a),this}setFromMatrixPosition(l){const a=l.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(l){const a=this.setFromMatrixColumn(l,0).length(),h=this.setFromMatrixColumn(l,1).length(),d=this.setFromMatrixColumn(l,2).length();return this.x=a,this.y=h,this.z=d,this}setFromMatrixColumn(l,a){return this.fromArray(l.elements,4*a)}setFromMatrix3Column(l,a){return this.fromArray(l.elements,3*a)}setFromEuler(l){return this.x=l._x,this.y=l._y,this.z=l._z,this}equals(l){return l.x===this.x&&l.y===this.y&&l.z===this.z}fromArray(l,a=0){return this.x=l[a],this.y=l[a+1],this.z=l[a+2],this}toArray(l=[],a=0){return l[a]=this.x,l[a+1]=this.y,l[a+2]=this.z,l}fromBufferAttribute(l,a,h){return void 0!==h&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(a),this.y=l.getY(a),this.z=l.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const l=2*(Math.random()-.5),a=Math.random()*Math.PI*2,h=Math.sqrt(1-l**2);return this.x=h*Math.cos(a),this.y=h*Math.sin(a),this.z=l,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const q9=new re,Sve=new Qc;class Z1{constructor(l=new re(1/0,1/0,1/0),a=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=l,this.max=a}set(l,a){return this.min.copy(l),this.max.copy(a),this}setFromArray(l){let a=1/0,h=1/0,d=1/0,f=-1/0,p=-1/0,g=-1/0;for(let m=0,v=l.length;m<v;m+=3){const y=l[m],_=l[m+1],b=l[m+2];y<a&&(a=y),_<h&&(h=_),b<d&&(d=b),y>f&&(f=y),_>p&&(p=_),b>g&&(g=b)}return this.min.set(a,h,d),this.max.set(f,p,g),this}setFromBufferAttribute(l){let a=1/0,h=1/0,d=1/0,f=-1/0,p=-1/0,g=-1/0;for(let m=0,v=l.count;m<v;m++){const y=l.getX(m),_=l.getY(m),b=l.getZ(m);y<a&&(a=y),_<h&&(h=_),b<d&&(d=b),y>f&&(f=y),_>p&&(p=_),b>g&&(g=b)}return this.min.set(a,h,d),this.max.set(f,p,g),this}setFromPoints(l){this.makeEmpty();for(let a=0,h=l.length;a<h;a++)this.expandByPoint(l[a]);return this}setFromCenterAndSize(l,a){const h=hv.copy(a).multiplyScalar(.5);return this.min.copy(l).sub(h),this.max.copy(l).add(h),this}setFromObject(l,a=!1){return this.makeEmpty(),this.expandByObject(l,a)}clone(){return(new this.constructor).copy(this)}copy(l){return this.min.copy(l.min),this.max.copy(l.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(l){return this.isEmpty()?l.set(0,0,0):l.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(l){return this.isEmpty()?l.set(0,0,0):l.subVectors(this.max,this.min)}expandByPoint(l){return this.min.min(l),this.max.max(l),this}expandByVector(l){return this.min.sub(l),this.max.add(l),this}expandByScalar(l){return this.min.addScalar(-l),this.max.addScalar(l),this}expandByObject(l,a=!1){l.updateWorldMatrix(!1,!1);const h=l.geometry;if(void 0!==h)if(a&&null!=h.attributes&&void 0!==h.attributes.position){const f=h.attributes.position;for(let p=0,g=f.count;p<g;p++)hv.fromBufferAttribute(f,p).applyMatrix4(l.matrixWorld),this.expandByPoint(hv)}else null===h.boundingBox&&h.computeBoundingBox(),Z9.copy(h.boundingBox),Z9.applyMatrix4(l.matrixWorld),this.union(Z9);const d=l.children;for(let f=0,p=d.length;f<p;f++)this.expandByObject(d[f],a);return this}containsPoint(l){return!(l.x<this.min.x||l.x>this.max.x||l.y<this.min.y||l.y>this.max.y||l.z<this.min.z||l.z>this.max.z)}containsBox(l){return this.min.x<=l.min.x&&l.max.x<=this.max.x&&this.min.y<=l.min.y&&l.max.y<=this.max.y&&this.min.z<=l.min.z&&l.max.z<=this.max.z}getParameter(l,a){return a.set((l.x-this.min.x)/(this.max.x-this.min.x),(l.y-this.min.y)/(this.max.y-this.min.y),(l.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(l){return!(l.max.x<this.min.x||l.min.x>this.max.x||l.max.y<this.min.y||l.min.y>this.max.y||l.max.z<this.min.z||l.min.z>this.max.z)}intersectsSphere(l){return this.clampPoint(l.center,hv),hv.distanceToSquared(l.center)<=l.radius*l.radius}intersectsPlane(l){let a,h;return l.normal.x>0?(a=l.normal.x*this.min.x,h=l.normal.x*this.max.x):(a=l.normal.x*this.max.x,h=l.normal.x*this.min.x),l.normal.y>0?(a+=l.normal.y*this.min.y,h+=l.normal.y*this.max.y):(a+=l.normal.y*this.max.y,h+=l.normal.y*this.min.y),l.normal.z>0?(a+=l.normal.z*this.min.z,h+=l.normal.z*this.max.z):(a+=l.normal.z*this.max.z,h+=l.normal.z*this.min.z),a<=-l.constant&&h>=-l.constant}intersectsTriangle(l){if(this.isEmpty())return!1;this.getCenter(w2),o3.subVectors(this.max,w2),X1.subVectors(l.a,w2),Y1.subVectors(l.b,w2),K1.subVectors(l.c,w2),Qg.subVectors(Y1,X1),jg.subVectors(K1,Y1),dv.subVectors(X1,K1);let a=[0,-Qg.z,Qg.y,0,-jg.z,jg.y,0,-dv.z,dv.y,Qg.z,0,-Qg.x,jg.z,0,-jg.x,dv.z,0,-dv.x,-Qg.y,Qg.x,0,-jg.y,jg.x,0,-dv.y,dv.x,0];return!(!X9(a,X1,Y1,K1,o3)||(a=[1,0,0,0,1,0,0,0,1],!X9(a,X1,Y1,K1,o3)))&&(a3.crossVectors(Qg,jg),a=[a3.x,a3.y,a3.z],X9(a,X1,Y1,K1,o3))}clampPoint(l,a){return a.copy(l).clamp(this.min,this.max)}distanceToPoint(l){return hv.copy(l).clamp(this.min,this.max).sub(l).length()}getBoundingSphere(l){return this.getCenter(l.center),l.radius=.5*this.getSize(hv).length(),l}intersect(l){return this.min.max(l.min),this.max.min(l.max),this.isEmpty()&&this.makeEmpty(),this}union(l){return this.min.min(l.min),this.max.max(l.max),this}applyMatrix4(l){return this.isEmpty()||(rp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(l),rp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(l),rp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(l),rp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(l),rp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(l),rp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(l),rp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(l),rp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(l),this.setFromPoints(rp)),this}translate(l){return this.min.add(l),this.max.add(l),this}equals(l){return l.min.equals(this.min)&&l.max.equals(this.max)}}const rp=[new re,new re,new re,new re,new re,new re,new re,new re],hv=new re,Z9=new Z1,X1=new re,Y1=new re,K1=new re,Qg=new re,jg=new re,dv=new re,w2=new re,o3=new re,a3=new re,fv=new re;function X9(c,l,a,h,d){for(let f=0,p=c.length-3;f<=p;f+=3){fv.fromArray(c,f);const g=d.x*Math.abs(fv.x)+d.y*Math.abs(fv.y)+d.z*Math.abs(fv.z),m=l.dot(fv),v=a.dot(fv),y=h.dot(fv);if(Math.max(-Math.max(m,v,y),Math.min(m,v,y))>g)return!1}return!0}const Aft=new Z1,Tve=new re,l3=new re,Y9=new re;class J1{constructor(l=new re,a=-1){this.center=l,this.radius=a}set(l,a){return this.center.copy(l),this.radius=a,this}setFromPoints(l,a){const h=this.center;void 0!==a?h.copy(a):Aft.setFromPoints(l).getCenter(h);let d=0;for(let f=0,p=l.length;f<p;f++)d=Math.max(d,h.distanceToSquared(l[f]));return this.radius=Math.sqrt(d),this}copy(l){return this.center.copy(l.center),this.radius=l.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(l){return l.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(l){return l.distanceTo(this.center)-this.radius}intersectsSphere(l){const a=this.radius+l.radius;return l.center.distanceToSquared(this.center)<=a*a}intersectsBox(l){return l.intersectsSphere(this)}intersectsPlane(l){return Math.abs(l.distanceToPoint(this.center))<=this.radius}clampPoint(l,a){const h=this.center.distanceToSquared(l);return a.copy(l),h>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(l){return this.isEmpty()?(l.makeEmpty(),l):(l.set(this.center,this.center),l.expandByScalar(this.radius),l)}applyMatrix4(l){return this.center.applyMatrix4(l),this.radius=this.radius*l.getMaxScaleOnAxis(),this}translate(l){return this.center.add(l),this}expandByPoint(l){Y9.subVectors(l,this.center);const a=Y9.lengthSq();if(a>this.radius*this.radius){const h=Math.sqrt(a),d=.5*(h-this.radius);this.center.add(Y9.multiplyScalar(d/h)),this.radius+=d}return this}union(l){return!0===this.center.equals(l.center)?l3.set(0,0,1).multiplyScalar(l.radius):l3.subVectors(l.center,this.center).normalize().multiplyScalar(l.radius),this.expandByPoint(Tve.copy(l.center).add(l3)),this.expandByPoint(Tve.copy(l.center).sub(l3)),this}equals(l){return l.center.equals(this.center)&&l.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sp=new re,K9=new re,c3=new re,qg=new re,J9=new re,u3=new re,e$=new re;class h3{constructor(l=new re,a=new re(0,0,-1)){this.origin=l,this.direction=a}set(l,a){return this.origin.copy(l),this.direction.copy(a),this}copy(l){return this.origin.copy(l.origin),this.direction.copy(l.direction),this}at(l,a){return a.copy(this.direction).multiplyScalar(l).add(this.origin)}lookAt(l){return this.direction.copy(l).sub(this.origin).normalize(),this}recast(l){return this.origin.copy(this.at(l,sp)),this}closestPointToPoint(l,a){a.subVectors(l,this.origin);const h=a.dot(this.direction);return h<0?a.copy(this.origin):a.copy(this.direction).multiplyScalar(h).add(this.origin)}distanceToPoint(l){return Math.sqrt(this.distanceSqToPoint(l))}distanceSqToPoint(l){const a=sp.subVectors(l,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(l):(sp.copy(this.direction).multiplyScalar(a).add(this.origin),sp.distanceToSquared(l))}distanceSqToSegment(l,a,h,d){K9.copy(l).add(a).multiplyScalar(.5),c3.copy(a).sub(l).normalize(),qg.copy(this.origin).sub(K9);const f=.5*l.distanceTo(a),p=-this.direction.dot(c3),g=qg.dot(this.direction),m=-qg.dot(c3),v=qg.lengthSq(),y=Math.abs(1-p*p);let _,b,C,x;if(y>0)if(_=p*m-g,b=p*g-m,x=f*y,_>=0)if(b>=-x)if(b<=x){const S=1/y;_*=S,b*=S,C=_*(_+p*b+2*g)+b*(p*_+b+2*m)+v}else b=f,_=Math.max(0,-(p*b+g)),C=-_*_+b*(b+2*m)+v;else b=-f,_=Math.max(0,-(p*b+g)),C=-_*_+b*(b+2*m)+v;else b<=-x?(_=Math.max(0,-(-p*f+g)),b=_>0?-f:Math.min(Math.max(-f,-m),f),C=-_*_+b*(b+2*m)+v):b<=x?(_=0,b=Math.min(Math.max(-f,-m),f),C=b*(b+2*m)+v):(_=Math.max(0,-(p*f+g)),b=_>0?f:Math.min(Math.max(-f,-m),f),C=-_*_+b*(b+2*m)+v);else b=p>0?-f:f,_=Math.max(0,-(p*b+g)),C=-_*_+b*(b+2*m)+v;return h&&h.copy(this.direction).multiplyScalar(_).add(this.origin),d&&d.copy(c3).multiplyScalar(b).add(K9),C}intersectSphere(l,a){sp.subVectors(l.center,this.origin);const h=sp.dot(this.direction),d=sp.dot(sp)-h*h,f=l.radius*l.radius;if(d>f)return null;const p=Math.sqrt(f-d),g=h-p,m=h+p;return g<0&&m<0?null:this.at(g<0?m:g,a)}intersectsSphere(l){return this.distanceSqToPoint(l.center)<=l.radius*l.radius}distanceToPlane(l){const a=l.normal.dot(this.direction);if(0===a)return 0===l.distanceToPoint(this.origin)?0:null;const h=-(this.origin.dot(l.normal)+l.constant)/a;return h>=0?h:null}intersectPlane(l,a){const h=this.distanceToPlane(l);return null===h?null:this.at(h,a)}intersectsPlane(l){const a=l.distanceToPoint(this.origin);return 0===a||l.normal.dot(this.direction)*a<0}intersectBox(l,a){let h,d,f,p,g,m;const v=1/this.direction.x,y=1/this.direction.y,_=1/this.direction.z,b=this.origin;return v>=0?(h=(l.min.x-b.x)*v,d=(l.max.x-b.x)*v):(h=(l.max.x-b.x)*v,d=(l.min.x-b.x)*v),y>=0?(f=(l.min.y-b.y)*y,p=(l.max.y-b.y)*y):(f=(l.max.y-b.y)*y,p=(l.min.y-b.y)*y),h>p||f>d||((f>h||h!=h)&&(h=f),(p<d||d!=d)&&(d=p),_>=0?(g=(l.min.z-b.z)*_,m=(l.max.z-b.z)*_):(g=(l.max.z-b.z)*_,m=(l.min.z-b.z)*_),h>m||g>d)||((g>h||h!=h)&&(h=g),(m<d||d!=d)&&(d=m),d<0)?null:this.at(h>=0?h:d,a)}intersectsBox(l){return null!==this.intersectBox(l,sp)}intersectTriangle(l,a,h,d,f){J9.subVectors(a,l),u3.subVectors(h,l),e$.crossVectors(J9,u3);let g,p=this.direction.dot(e$);if(p>0){if(d)return null;g=1}else{if(!(p<0))return null;g=-1,p=-p}qg.subVectors(this.origin,l);const m=g*this.direction.dot(u3.crossVectors(qg,u3));if(m<0)return null;const v=g*this.direction.dot(J9.cross(qg));if(v<0||m+v>p)return null;const y=-g*qg.dot(e$);return y<0?null:this.at(y/p,f)}applyMatrix4(l){return this.origin.applyMatrix4(l),this.direction.transformDirection(l),this}equals(l){return l.origin.equals(this.origin)&&l.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class bi{constructor(){bi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(l,a,h,d,f,p,g,m,v,y,_,b,C,x,S,w){const T=this.elements;return T[0]=l,T[4]=a,T[8]=h,T[12]=d,T[1]=f,T[5]=p,T[9]=g,T[13]=m,T[2]=v,T[6]=y,T[10]=_,T[14]=b,T[3]=C,T[7]=x,T[11]=S,T[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new bi).fromArray(this.elements)}copy(l){const a=this.elements,h=l.elements;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15],this}copyPosition(l){const a=this.elements,h=l.elements;return a[12]=h[12],a[13]=h[13],a[14]=h[14],this}setFromMatrix3(l){const a=l.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(l,a,h){return l.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),h.setFromMatrixColumn(this,2),this}makeBasis(l,a,h){return this.set(l.x,a.x,h.x,0,l.y,a.y,h.y,0,l.z,a.z,h.z,0,0,0,0,1),this}extractRotation(l){const a=this.elements,h=l.elements,d=1/eb.setFromMatrixColumn(l,0).length(),f=1/eb.setFromMatrixColumn(l,1).length(),p=1/eb.setFromMatrixColumn(l,2).length();return a[0]=h[0]*d,a[1]=h[1]*d,a[2]=h[2]*d,a[3]=0,a[4]=h[4]*f,a[5]=h[5]*f,a[6]=h[6]*f,a[7]=0,a[8]=h[8]*p,a[9]=h[9]*p,a[10]=h[10]*p,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(l){l&&l.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const a=this.elements,h=l.x,d=l.y,f=l.z,p=Math.cos(h),g=Math.sin(h),m=Math.cos(d),v=Math.sin(d),y=Math.cos(f),_=Math.sin(f);if("XYZ"===l.order){const b=p*y,C=p*_,x=g*y,S=g*_;a[0]=m*y,a[4]=-m*_,a[8]=v,a[1]=C+x*v,a[5]=b-S*v,a[9]=-g*m,a[2]=S-b*v,a[6]=x+C*v,a[10]=p*m}else if("YXZ"===l.order){const b=m*y,C=m*_,x=v*y,S=v*_;a[0]=b+S*g,a[4]=x*g-C,a[8]=p*v,a[1]=p*_,a[5]=p*y,a[9]=-g,a[2]=C*g-x,a[6]=S+b*g,a[10]=p*m}else if("ZXY"===l.order){const b=m*y,C=m*_,x=v*y,S=v*_;a[0]=b-S*g,a[4]=-p*_,a[8]=x+C*g,a[1]=C+x*g,a[5]=p*y,a[9]=S-b*g,a[2]=-p*v,a[6]=g,a[10]=p*m}else if("ZYX"===l.order){const b=p*y,C=p*_,x=g*y,S=g*_;a[0]=m*y,a[4]=x*v-C,a[8]=b*v+S,a[1]=m*_,a[5]=S*v+b,a[9]=C*v-x,a[2]=-v,a[6]=g*m,a[10]=p*m}else if("YZX"===l.order){const b=p*m,C=p*v,x=g*m,S=g*v;a[0]=m*y,a[4]=S-b*_,a[8]=x*_+C,a[1]=_,a[5]=p*y,a[9]=-g*y,a[2]=-v*y,a[6]=C*_+x,a[10]=b-S*_}else if("XZY"===l.order){const b=p*m,C=p*v,x=g*m,S=g*v;a[0]=m*y,a[4]=-_,a[8]=v*y,a[1]=b*_+S,a[5]=p*y,a[9]=C*_-x,a[2]=x*_-C,a[6]=g*y,a[10]=S*_+b}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(l){return this.compose(Ift,l,Pft)}lookAt(l,a,h){const d=this.elements;return jc.subVectors(l,a),0===jc.lengthSq()&&(jc.z=1),jc.normalize(),Zg.crossVectors(h,jc),0===Zg.lengthSq()&&(1===Math.abs(h.z)?jc.x+=1e-4:jc.z+=1e-4,jc.normalize(),Zg.crossVectors(h,jc)),Zg.normalize(),d3.crossVectors(jc,Zg),d[0]=Zg.x,d[4]=d3.x,d[8]=jc.x,d[1]=Zg.y,d[5]=d3.y,d[9]=jc.y,d[2]=Zg.z,d[6]=d3.z,d[10]=jc.z,this}multiply(l,a){return void 0!==a?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(l,a)):this.multiplyMatrices(this,l)}premultiply(l){return this.multiplyMatrices(l,this)}multiplyMatrices(l,a){const h=l.elements,d=a.elements,f=this.elements,p=h[0],g=h[4],m=h[8],v=h[12],y=h[1],_=h[5],b=h[9],C=h[13],x=h[2],S=h[6],w=h[10],T=h[14],O=h[3],k=h[7],D=h[11],M=h[15],A=d[0],L=d[4],E=d[8],V=d[12],z=d[1],U=d[5],Z=d[9],Y=d[13],N=d[2],$=d[6],H=d[10],G=d[14],W=d[3],j=d[7],Q=d[11],J=d[15];return f[0]=p*A+g*z+m*N+v*W,f[4]=p*L+g*U+m*$+v*j,f[8]=p*E+g*Z+m*H+v*Q,f[12]=p*V+g*Y+m*G+v*J,f[1]=y*A+_*z+b*N+C*W,f[5]=y*L+_*U+b*$+C*j,f[9]=y*E+_*Z+b*H+C*Q,f[13]=y*V+_*Y+b*G+C*J,f[2]=x*A+S*z+w*N+T*W,f[6]=x*L+S*U+w*$+T*j,f[10]=x*E+S*Z+w*H+T*Q,f[14]=x*V+S*Y+w*G+T*J,f[3]=O*A+k*z+D*N+M*W,f[7]=O*L+k*U+D*$+M*j,f[11]=O*E+k*Z+D*H+M*Q,f[15]=O*V+k*Y+D*G+M*J,this}multiplyScalar(l){const a=this.elements;return a[0]*=l,a[4]*=l,a[8]*=l,a[12]*=l,a[1]*=l,a[5]*=l,a[9]*=l,a[13]*=l,a[2]*=l,a[6]*=l,a[10]*=l,a[14]*=l,a[3]*=l,a[7]*=l,a[11]*=l,a[15]*=l,this}determinant(){const l=this.elements,a=l[0],h=l[4],d=l[8],f=l[12],p=l[1],g=l[5],m=l[9],v=l[13],y=l[2],_=l[6],b=l[10],C=l[14];return l[3]*(+f*m*_-d*v*_-f*g*b+h*v*b+d*g*C-h*m*C)+l[7]*(+a*m*C-a*v*b+f*p*b-d*p*C+d*v*y-f*m*y)+l[11]*(+a*v*_-a*g*C-f*p*_+h*p*C+f*g*y-h*v*y)+l[15]*(-d*g*y-a*m*_+a*g*b+d*p*_-h*p*b+h*m*y)}transpose(){const l=this.elements;let a;return a=l[1],l[1]=l[4],l[4]=a,a=l[2],l[2]=l[8],l[8]=a,a=l[6],l[6]=l[9],l[9]=a,a=l[3],l[3]=l[12],l[12]=a,a=l[7],l[7]=l[13],l[13]=a,a=l[11],l[11]=l[14],l[14]=a,this}setPosition(l,a,h){const d=this.elements;return l.isVector3?(d[12]=l.x,d[13]=l.y,d[14]=l.z):(d[12]=l,d[13]=a,d[14]=h),this}invert(){const l=this.elements,a=l[0],h=l[1],d=l[2],f=l[3],p=l[4],g=l[5],m=l[6],v=l[7],y=l[8],_=l[9],b=l[10],C=l[11],x=l[12],S=l[13],w=l[14],T=l[15],O=_*w*v-S*b*v+S*m*C-g*w*C-_*m*T+g*b*T,k=x*b*v-y*w*v-x*m*C+p*w*C+y*m*T-p*b*T,D=y*S*v-x*_*v+x*g*C-p*S*C-y*g*T+p*_*T,M=x*_*m-y*S*m-x*g*b+p*S*b+y*g*w-p*_*w,A=a*O+h*k+d*D+f*M;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/A;return l[0]=O*L,l[1]=(S*b*f-_*w*f-S*d*C+h*w*C+_*d*T-h*b*T)*L,l[2]=(g*w*f-S*m*f+S*d*v-h*w*v-g*d*T+h*m*T)*L,l[3]=(_*m*f-g*b*f-_*d*v+h*b*v+g*d*C-h*m*C)*L,l[4]=k*L,l[5]=(y*w*f-x*b*f+x*d*C-a*w*C-y*d*T+a*b*T)*L,l[6]=(x*m*f-p*w*f-x*d*v+a*w*v+p*d*T-a*m*T)*L,l[7]=(p*b*f-y*m*f+y*d*v-a*b*v-p*d*C+a*m*C)*L,l[8]=D*L,l[9]=(x*_*f-y*S*f-x*h*C+a*S*C+y*h*T-a*_*T)*L,l[10]=(p*S*f-x*g*f+x*h*v-a*S*v-p*h*T+a*g*T)*L,l[11]=(y*g*f-p*_*f-y*h*v+a*_*v+p*h*C-a*g*C)*L,l[12]=M*L,l[13]=(y*S*d-x*_*d+x*h*b-a*S*b-y*h*w+a*_*w)*L,l[14]=(x*g*d-p*S*d-x*h*m+a*S*m+p*h*w-a*g*w)*L,l[15]=(p*_*d-y*g*d+y*h*m-a*_*m-p*h*b+a*g*b)*L,this}scale(l){const a=this.elements,h=l.x,d=l.y,f=l.z;return a[0]*=h,a[4]*=d,a[8]*=f,a[1]*=h,a[5]*=d,a[9]*=f,a[2]*=h,a[6]*=d,a[10]*=f,a[3]*=h,a[7]*=d,a[11]*=f,this}getMaxScaleOnAxis(){const l=this.elements;return Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1]+l[2]*l[2],l[4]*l[4]+l[5]*l[5]+l[6]*l[6],l[8]*l[8]+l[9]*l[9]+l[10]*l[10]))}makeTranslation(l,a,h){return this.set(1,0,0,l,0,1,0,a,0,0,1,h,0,0,0,1),this}makeRotationX(l){const a=Math.cos(l),h=Math.sin(l);return this.set(1,0,0,0,0,a,-h,0,0,h,a,0,0,0,0,1),this}makeRotationY(l){const a=Math.cos(l),h=Math.sin(l);return this.set(a,0,h,0,0,1,0,0,-h,0,a,0,0,0,0,1),this}makeRotationZ(l){const a=Math.cos(l),h=Math.sin(l);return this.set(a,-h,0,0,h,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(l,a){const h=Math.cos(a),d=Math.sin(a),f=1-h,p=l.x,g=l.y,m=l.z,v=f*p,y=f*g;return this.set(v*p+h,v*g-d*m,v*m+d*g,0,v*g+d*m,y*g+h,y*m-d*p,0,v*m-d*g,y*m+d*p,f*m*m+h,0,0,0,0,1),this}makeScale(l,a,h){return this.set(l,0,0,0,0,a,0,0,0,0,h,0,0,0,0,1),this}makeShear(l,a,h,d,f,p){return this.set(1,h,f,0,l,1,p,0,a,d,1,0,0,0,0,1),this}compose(l,a,h){const d=this.elements,f=a._x,p=a._y,g=a._z,m=a._w,v=f+f,y=p+p,_=g+g,b=f*v,C=f*y,x=f*_,S=p*y,w=p*_,T=g*_,O=m*v,k=m*y,D=m*_,M=h.x,A=h.y,L=h.z;return d[0]=(1-(S+T))*M,d[1]=(C+D)*M,d[2]=(x-k)*M,d[3]=0,d[4]=(C-D)*A,d[5]=(1-(b+T))*A,d[6]=(w+O)*A,d[7]=0,d[8]=(x+k)*L,d[9]=(w-O)*L,d[10]=(1-(b+S))*L,d[11]=0,d[12]=l.x,d[13]=l.y,d[14]=l.z,d[15]=1,this}decompose(l,a,h){const d=this.elements;let f=eb.set(d[0],d[1],d[2]).length();const p=eb.set(d[4],d[5],d[6]).length(),g=eb.set(d[8],d[9],d[10]).length();this.determinant()<0&&(f=-f),l.x=d[12],l.y=d[13],l.z=d[14],Eh.copy(this);const v=1/f,y=1/p,_=1/g;return Eh.elements[0]*=v,Eh.elements[1]*=v,Eh.elements[2]*=v,Eh.elements[4]*=y,Eh.elements[5]*=y,Eh.elements[6]*=y,Eh.elements[8]*=_,Eh.elements[9]*=_,Eh.elements[10]*=_,a.setFromRotationMatrix(Eh),h.x=f,h.y=p,h.z=g,this}makePerspective(l,a,h,d,f,p){void 0===p&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const g=this.elements,v=2*f/(h-d),y=(a+l)/(a-l),_=(h+d)/(h-d),b=-(p+f)/(p-f),C=-2*p*f/(p-f);return g[0]=2*f/(a-l),g[4]=0,g[8]=y,g[12]=0,g[1]=0,g[5]=v,g[9]=_,g[13]=0,g[2]=0,g[6]=0,g[10]=b,g[14]=C,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(l,a,h,d,f,p){const g=this.elements,m=1/(a-l),v=1/(h-d),y=1/(p-f),_=(a+l)*m,b=(h+d)*v,C=(p+f)*y;return g[0]=2*m,g[4]=0,g[8]=0,g[12]=-_,g[1]=0,g[5]=2*v,g[9]=0,g[13]=-b,g[2]=0,g[6]=0,g[10]=-2*y,g[14]=-C,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(l){const a=this.elements,h=l.elements;for(let d=0;d<16;d++)if(a[d]!==h[d])return!1;return!0}fromArray(l,a=0){for(let h=0;h<16;h++)this.elements[h]=l[h+a];return this}toArray(l=[],a=0){const h=this.elements;return l[a]=h[0],l[a+1]=h[1],l[a+2]=h[2],l[a+3]=h[3],l[a+4]=h[4],l[a+5]=h[5],l[a+6]=h[6],l[a+7]=h[7],l[a+8]=h[8],l[a+9]=h[9],l[a+10]=h[10],l[a+11]=h[11],l[a+12]=h[12],l[a+13]=h[13],l[a+14]=h[14],l[a+15]=h[15],l}}const eb=new re,Eh=new bi,Ift=new re(0,0,0),Pft=new re(1,1,1),Zg=new re,d3=new re,jc=new re,Ove=new bi,Dve=new Qc;let Rft=(()=>{class c{constructor(a=0,h=0,d=0,f=c.DefaultOrder){this.isEuler=!0,this._x=a,this._y=h,this._z=d,this._order=f}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,h,d,f=this._order){return this._x=a,this._y=h,this._z=d,this._order=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,h=this._order,d=!0){const f=a.elements,p=f[0],g=f[4],m=f[8],v=f[1],y=f[5],_=f[9],b=f[2],C=f[6],x=f[10];switch(h){case"XYZ":this._y=Math.asin(so(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-_,x),this._z=Math.atan2(-g,p)):(this._x=Math.atan2(C,y),this._z=0);break;case"YXZ":this._x=Math.asin(-so(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(m,x),this._z=Math.atan2(v,y)):(this._y=Math.atan2(-b,p),this._z=0);break;case"ZXY":this._x=Math.asin(so(C,-1,1)),Math.abs(C)<.9999999?(this._y=Math.atan2(-b,x),this._z=Math.atan2(-g,y)):(this._y=0,this._z=Math.atan2(v,p));break;case"ZYX":this._y=Math.asin(-so(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(C,x),this._z=Math.atan2(v,p)):(this._x=0,this._z=Math.atan2(-g,y));break;case"YZX":this._z=Math.asin(so(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(-_,y),this._y=Math.atan2(-b,p)):(this._x=0,this._y=Math.atan2(m,x));break;case"XZY":this._z=Math.asin(-so(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(C,y),this._y=Math.atan2(m,p)):(this._x=Math.atan2(-_,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+h)}return this._order=h,!0===d&&this._onChangeCallback(),this}setFromQuaternion(a,h,d){return Ove.makeRotationFromQuaternion(a),this.setFromRotationMatrix(Ove,h,d)}setFromVector3(a,h=this._order){return this.set(a.x,a.y,a.z,h)}reorder(a){return Dve.setFromEuler(this),this.setFromQuaternion(Dve,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],h=0){return a[h]=this._x,a[h+1]=this._y,a[h+2]=this._z,a[h+3]=this._order,a}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return c.DefaultOrder="XYZ",c.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],c})();class t${constructor(){this.mask=1}set(l){this.mask=(1<<l|0)>>>0}enable(l){this.mask|=1<<l|0}enableAll(){this.mask=-1}toggle(l){this.mask^=1<<l|0}disable(l){this.mask&=~(1<<l|0)}disableAll(){this.mask=0}test(l){return 0!=(this.mask&l.mask)}isEnabled(l){return 0!=(this.mask&(1<<l|0))}}let Fft=0;const kve=new re,tb=new Qc,op=new bi,f3=new re,S2=new re,Nft=new re,Lft=new Qc,Mve=new re(1,0,0),Eve=new re(0,1,0),Ave=new re(0,0,1),Bft={type:"added"},Ive={type:"removed"};let qc=(()=>{class c extends G1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Fft++}),this.uuid=Gc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=c.DefaultUp.clone();const a=new re,h=new Rft,d=new Qc,f=new re(1,1,1);h._onChange(function p(){d.setFromEuler(h,!1)}),d._onChange(function g(){h.setFromQuaternion(d,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:h},quaternion:{configurable:!0,enumerable:!0,value:d},scale:{configurable:!0,enumerable:!0,value:f},modelViewMatrix:{value:new bi},normalMatrix:{value:new rc}}),this.matrix=new bi,this.matrixWorld=new bi,this.matrixAutoUpdate=c.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new t$,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){return this.quaternion.premultiply(a),this}setRotationFromAxisAngle(a,h){this.quaternion.setFromAxisAngle(a,h)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,h){return tb.setFromAxisAngle(a,h),this.quaternion.multiply(tb),this}rotateOnWorldAxis(a,h){return tb.setFromAxisAngle(a,h),this.quaternion.premultiply(tb),this}rotateX(a){return this.rotateOnAxis(Mve,a)}rotateY(a){return this.rotateOnAxis(Eve,a)}rotateZ(a){return this.rotateOnAxis(Ave,a)}translateOnAxis(a,h){return kve.copy(a).applyQuaternion(this.quaternion),this.position.add(kve.multiplyScalar(h)),this}translateX(a){return this.translateOnAxis(Mve,a)}translateY(a){return this.translateOnAxis(Eve,a)}translateZ(a){return this.translateOnAxis(Ave,a)}localToWorld(a){return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){return a.applyMatrix4(op.copy(this.matrixWorld).invert())}lookAt(a,h,d){a.isVector3?f3.copy(a):f3.set(a,h,d);const f=this.parent;this.updateWorldMatrix(!0,!1),S2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?op.lookAt(S2,f3,this.up):op.lookAt(f3,S2,this.up),this.quaternion.setFromRotationMatrix(op),f&&(op.extractRotation(f.matrixWorld),tb.setFromRotationMatrix(op),this.quaternion.premultiply(tb.invert()))}add(a){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.add(arguments[h]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(Bft)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}remove(a){if(arguments.length>1){for(let d=0;d<arguments.length;d++)this.remove(arguments[d]);return this}const h=this.children.indexOf(a);return-1!==h&&(a.parent=null,this.children.splice(h,1),a.dispatchEvent(Ive)),this}removeFromParent(){const a=this.parent;return null!==a&&a.remove(this),this}clear(){for(let a=0;a<this.children.length;a++){const h=this.children[a];h.parent=null,h.dispatchEvent(Ive)}return this.children.length=0,this}attach(a){return this.updateWorldMatrix(!0,!1),op.copy(this.matrixWorld).invert(),null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),op.multiply(a.parent.matrixWorld)),a.applyMatrix4(op),this.add(a),a.updateWorldMatrix(!1,!0),this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,h){if(this[a]===h)return this;for(let d=0,f=this.children.length;d<f;d++){const g=this.children[d].getObjectByProperty(a,h);if(void 0!==g)return g}}getWorldPosition(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S2,a,Nft),a}getWorldScale(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S2,Lft,a),a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const h=this.matrixWorld.elements;return a.set(h[8],h[9],h[10]).normalize()}raycast(){}traverse(a){a(this);const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].traverse(a)}traverseVisible(a){if(!1===this.visible)return;a(this);const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].traverseVisible(a)}traverseAncestors(a){const h=this.parent;null!==h&&(a(h),h.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].updateMatrixWorld(a)}updateWorldMatrix(a,h){const d=this.parent;if(!0===a&&null!==d&&d.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===h){const f=this.children;for(let p=0,g=f.length;p<g;p++)f[p].updateWorldMatrix(!1,!0)}}toJSON(a){const h=void 0===a||"string"==typeof a,d={};h&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},d.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const f={};function p(m,v){return void 0===m[v.uuid]&&(m[v.uuid]=v.toJSON(a)),v.uuid}if(f.uuid=this.uuid,f.type=this.type,""!==this.name&&(f.name=this.name),!0===this.castShadow&&(f.castShadow=!0),!0===this.receiveShadow&&(f.receiveShadow=!0),!1===this.visible&&(f.visible=!1),!1===this.frustumCulled&&(f.frustumCulled=!1),0!==this.renderOrder&&(f.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(f.matrixAutoUpdate=!1),this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(f.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?f.background=this.background.toJSON():this.background.isTexture&&(f.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&(f.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){f.geometry=p(a.geometries,this.geometry);const m=this.geometry.parameters;if(void 0!==m&&void 0!==m.shapes){const v=m.shapes;if(Array.isArray(v))for(let y=0,_=v.length;y<_;y++)p(a.shapes,v[y]);else p(a.shapes,v)}}if(this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(p(a.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const m=[];for(let v=0,y=this.material.length;v<y;v++)m.push(p(a.materials,this.material[v]));f.material=m}else f.material=p(a.materials,this.material);if(this.children.length>0){f.children=[];for(let m=0;m<this.children.length;m++)f.children.push(this.children[m].toJSON(a).object)}if(this.animations.length>0){f.animations=[];for(let m=0;m<this.animations.length;m++)f.animations.push(p(a.animations,this.animations[m]))}if(h){const m=g(a.geometries),v=g(a.materials),y=g(a.textures),_=g(a.images),b=g(a.shapes),C=g(a.skeletons),x=g(a.animations),S=g(a.nodes);m.length>0&&(d.geometries=m),v.length>0&&(d.materials=v),y.length>0&&(d.textures=y),_.length>0&&(d.images=_),b.length>0&&(d.shapes=b),C.length>0&&(d.skeletons=C),x.length>0&&(d.animations=x),S.length>0&&(d.nodes=S)}return d.object=f,d;function g(m){const v=[];for(const y in m){const _=m[y];delete _.metadata,v.push(_)}return v}}clone(a){return(new this.constructor).copy(this,a)}copy(a,h=!0){if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===h)for(let d=0;d<a.children.length;d++)this.add(a.children[d].clone());return this}}return c.DefaultUp=new re(0,1,0),c.DefaultMatrixAutoUpdate=!0,c})();const Ah=new re,ap=new re,n$=new re,lp=new re,nb=new re,ib=new re,Pve=new re,i$=new re,r$=new re,s$=new re;class Ih{constructor(l=new re,a=new re,h=new re){this.a=l,this.b=a,this.c=h}static getNormal(l,a,h,d){d.subVectors(h,a),Ah.subVectors(l,a),d.cross(Ah);const f=d.lengthSq();return f>0?d.multiplyScalar(1/Math.sqrt(f)):d.set(0,0,0)}static getBarycoord(l,a,h,d,f){Ah.subVectors(d,a),ap.subVectors(h,a),n$.subVectors(l,a);const p=Ah.dot(Ah),g=Ah.dot(ap),m=Ah.dot(n$),v=ap.dot(ap),y=ap.dot(n$),_=p*v-g*g;if(0===_)return f.set(-2,-1,-1);const b=1/_,C=(v*m-g*y)*b,x=(p*y-g*m)*b;return f.set(1-C-x,x,C)}static containsPoint(l,a,h,d){return this.getBarycoord(l,a,h,d,lp),lp.x>=0&&lp.y>=0&&lp.x+lp.y<=1}static getUV(l,a,h,d,f,p,g,m){return this.getBarycoord(l,a,h,d,lp),m.set(0,0),m.addScaledVector(f,lp.x),m.addScaledVector(p,lp.y),m.addScaledVector(g,lp.z),m}static isFrontFacing(l,a,h,d){return Ah.subVectors(h,a),ap.subVectors(l,a),Ah.cross(ap).dot(d)<0}set(l,a,h){return this.a.copy(l),this.b.copy(a),this.c.copy(h),this}setFromPointsAndIndices(l,a,h,d){return this.a.copy(l[a]),this.b.copy(l[h]),this.c.copy(l[d]),this}setFromAttributeAndIndices(l,a,h,d){return this.a.fromBufferAttribute(l,a),this.b.fromBufferAttribute(l,h),this.c.fromBufferAttribute(l,d),this}clone(){return(new this.constructor).copy(this)}copy(l){return this.a.copy(l.a),this.b.copy(l.b),this.c.copy(l.c),this}getArea(){return Ah.subVectors(this.c,this.b),ap.subVectors(this.a,this.b),.5*Ah.cross(ap).length()}getMidpoint(l){return l.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(l){return Ih.getNormal(this.a,this.b,this.c,l)}getPlane(l){return l.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(l,a){return Ih.getBarycoord(l,this.a,this.b,this.c,a)}getUV(l,a,h,d,f){return Ih.getUV(l,this.a,this.b,this.c,a,h,d,f)}containsPoint(l){return Ih.containsPoint(l,this.a,this.b,this.c)}isFrontFacing(l){return Ih.isFrontFacing(this.a,this.b,this.c,l)}intersectsBox(l){return l.intersectsTriangle(this)}closestPointToPoint(l,a){const h=this.a,d=this.b,f=this.c;let p,g;nb.subVectors(d,h),ib.subVectors(f,h),i$.subVectors(l,h);const m=nb.dot(i$),v=ib.dot(i$);if(m<=0&&v<=0)return a.copy(h);r$.subVectors(l,d);const y=nb.dot(r$),_=ib.dot(r$);if(y>=0&&_<=y)return a.copy(d);const b=m*_-y*v;if(b<=0&&m>=0&&y<=0)return p=m/(m-y),a.copy(h).addScaledVector(nb,p);s$.subVectors(l,f);const C=nb.dot(s$),x=ib.dot(s$);if(x>=0&&C<=x)return a.copy(f);const S=C*v-m*x;if(S<=0&&v>=0&&x<=0)return g=v/(v-x),a.copy(h).addScaledVector(ib,g);const w=y*x-C*_;if(w<=0&&_-y>=0&&C-x>=0)return Pve.subVectors(f,d),g=(_-y)/(_-y+(C-x)),a.copy(d).addScaledVector(Pve,g);const T=1/(w+S+b);return p=S*T,g=b*T,a.copy(h).addScaledVector(nb,p).addScaledVector(ib,g)}equals(l){return l.a.equals(this.a)&&l.b.equals(this.b)&&l.c.equals(this.c)}}let Vft=0;class pv extends G1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Vft++}),this.uuid=Gc(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(l){this._alphaTest>0!=l>0&&this.version++,this._alphaTest=l}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(l){if(void 0!==l)for(const a in l){const h=l[a];if(void 0===h){console.warn("THREE.Material: '"+a+"' parameter is undefined.");continue}if("shading"===a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===h;continue}const d=this[a];void 0!==d?d&&d.isColor?d.set(h):d&&d.isVector3&&h&&h.isVector3?d.copy(h):this[a]=h:console.warn("THREE."+this.type+": '"+a+"' is not a property of this material.")}}toJSON(l){const a=void 0===l||"string"==typeof l;a&&(l={textures:{},images:{}});const h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function d(f){const p=[];for(const g in f){const m=f[g];delete m.metadata,p.push(m)}return p}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),void 0!==this.roughness&&(h.roughness=this.roughness),void 0!==this.metalness&&(h.metalness=this.metalness),void 0!==this.sheen&&(h.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(h.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(h.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(h.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(h.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(h.shininess=this.shininess),void 0!==this.clearcoat&&(h.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(h.clearcoatMap=this.clearcoatMap.toJSON(l).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(h.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(l).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(l).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(h.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(h.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(h.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(h.iridescenceMap=this.iridescenceMap.toJSON(l).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(h.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(l).uuid),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(l).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(l).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(l).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(l).uuid,h.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(l).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(l).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(l).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(l).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(l).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(l).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(l).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(l).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(h.specularIntensityMap=this.specularIntensityMap.toJSON(l).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(h.specularColorMap=this.specularColorMap.toJSON(l).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(l).uuid,void 0!==this.combine&&(h.combine=this.combine)),void 0!==this.envMapIntensity&&(h.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(h.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(h.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(l).uuid),void 0!==this.transmission&&(h.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(h.transmissionMap=this.transmissionMap.toJSON(l).uuid),void 0!==this.thickness&&(h.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(h.thicknessMap=this.thicknessMap.toJSON(l).uuid),void 0!==this.attenuationDistance&&(h.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(h.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(h.size=this.size),null!==this.shadowSide&&(h.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(h.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(h.blending=this.blending),0!==this.side&&(h.side=this.side),this.vertexColors&&(h.vertexColors=!0),this.opacity<1&&(h.opacity=this.opacity),!0===this.transparent&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.colorWrite=this.colorWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(h.rotation=this.rotation),!0===this.polygonOffset&&(h.polygonOffset=!0),0!==this.polygonOffsetFactor&&(h.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(h.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(h.linewidth=this.linewidth),void 0!==this.dashSize&&(h.dashSize=this.dashSize),void 0!==this.gapSize&&(h.gapSize=this.gapSize),void 0!==this.scale&&(h.scale=this.scale),!0===this.dithering&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(h.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(h.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(h.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(h.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(h.flatShading=this.flatShading),!1===this.visible&&(h.visible=!1),!1===this.toneMapped&&(h.toneMapped=!1),!1===this.fog&&(h.fog=!1),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),a){const f=d(l.textures),p=d(l.images);f.length>0&&(h.textures=f),p.length>0&&(h.images=p)}return h}clone(){return(new this.constructor).copy(this)}copy(l){this.name=l.name,this.blending=l.blending,this.side=l.side,this.vertexColors=l.vertexColors,this.opacity=l.opacity,this.transparent=l.transparent,this.blendSrc=l.blendSrc,this.blendDst=l.blendDst,this.blendEquation=l.blendEquation,this.blendSrcAlpha=l.blendSrcAlpha,this.blendDstAlpha=l.blendDstAlpha,this.blendEquationAlpha=l.blendEquationAlpha,this.depthFunc=l.depthFunc,this.depthTest=l.depthTest,this.depthWrite=l.depthWrite,this.stencilWriteMask=l.stencilWriteMask,this.stencilFunc=l.stencilFunc,this.stencilRef=l.stencilRef,this.stencilFuncMask=l.stencilFuncMask,this.stencilFail=l.stencilFail,this.stencilZFail=l.stencilZFail,this.stencilZPass=l.stencilZPass,this.stencilWrite=l.stencilWrite;const a=l.clippingPlanes;let h=null;if(null!==a){const d=a.length;h=new Array(d);for(let f=0;f!==d;++f)h[f]=a[f].clone()}return this.clippingPlanes=h,this.clipIntersection=l.clipIntersection,this.clipShadows=l.clipShadows,this.shadowSide=l.shadowSide,this.colorWrite=l.colorWrite,this.precision=l.precision,this.polygonOffset=l.polygonOffset,this.polygonOffsetFactor=l.polygonOffsetFactor,this.polygonOffsetUnits=l.polygonOffsetUnits,this.dithering=l.dithering,this.alphaTest=l.alphaTest,this.alphaToCoverage=l.alphaToCoverage,this.premultipliedAlpha=l.premultipliedAlpha,this.visible=l.visible,this.toneMapped=l.toneMapped,this.userData=JSON.parse(JSON.stringify(l.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(l){!0===l&&this.version++}}class oo extends pv{constructor(l){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new hn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.fog=l.fog,this}}const Co=new re,p3=new mt;class Fs{constructor(l,a,h){if(Array.isArray(l))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=l,this.itemSize=a,this.count=void 0!==l?l.length/a:0,this.normalized=!0===h,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(l){!0===l&&this.version++}setUsage(l){return this.usage=l,this}copy(l){return this.name=l.name,this.array=new l.array.constructor(l.array),this.itemSize=l.itemSize,this.count=l.count,this.normalized=l.normalized,this.usage=l.usage,this}copyAt(l,a,h){l*=this.itemSize,h*=a.itemSize;for(let d=0,f=this.itemSize;d<f;d++)this.array[l+d]=a.array[h+d];return this}copyArray(l){return this.array.set(l),this}copyColorsArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let p=l[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),p=new hn),a[h++]=p.r,a[h++]=p.g,a[h++]=p.b}return this}copyVector2sArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let p=l[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),p=new mt),a[h++]=p.x,a[h++]=p.y}return this}copyVector3sArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let p=l[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),p=new re),a[h++]=p.x,a[h++]=p.y,a[h++]=p.z}return this}copyVector4sArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let p=l[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),p=new ar),a[h++]=p.x,a[h++]=p.y,a[h++]=p.z,a[h++]=p.w}return this}applyMatrix3(l){if(2===this.itemSize)for(let a=0,h=this.count;a<h;a++)p3.fromBufferAttribute(this,a),p3.applyMatrix3(l),this.setXY(a,p3.x,p3.y);else if(3===this.itemSize)for(let a=0,h=this.count;a<h;a++)Co.fromBufferAttribute(this,a),Co.applyMatrix3(l),this.setXYZ(a,Co.x,Co.y,Co.z);return this}applyMatrix4(l){for(let a=0,h=this.count;a<h;a++)Co.fromBufferAttribute(this,a),Co.applyMatrix4(l),this.setXYZ(a,Co.x,Co.y,Co.z);return this}applyNormalMatrix(l){for(let a=0,h=this.count;a<h;a++)Co.fromBufferAttribute(this,a),Co.applyNormalMatrix(l),this.setXYZ(a,Co.x,Co.y,Co.z);return this}transformDirection(l){for(let a=0,h=this.count;a<h;a++)Co.fromBufferAttribute(this,a),Co.transformDirection(l),this.setXYZ(a,Co.x,Co.y,Co.z);return this}set(l,a=0){return this.array.set(l,a),this}getX(l){return this.array[l*this.itemSize]}setX(l,a){return this.array[l*this.itemSize]=a,this}getY(l){return this.array[l*this.itemSize+1]}setY(l,a){return this.array[l*this.itemSize+1]=a,this}getZ(l){return this.array[l*this.itemSize+2]}setZ(l,a){return this.array[l*this.itemSize+2]=a,this}getW(l){return this.array[l*this.itemSize+3]}setW(l,a){return this.array[l*this.itemSize+3]=a,this}setXY(l,a,h){return this.array[0+(l*=this.itemSize)]=a,this.array[l+1]=h,this}setXYZ(l,a,h,d){return this.array[0+(l*=this.itemSize)]=a,this.array[l+1]=h,this.array[l+2]=d,this}setXYZW(l,a,h,d,f){return this.array[0+(l*=this.itemSize)]=a,this.array[l+1]=h,this.array[l+2]=d,this.array[l+3]=f,this}onUpload(l){return this.onUploadCallback=l,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const l={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(l.name=this.name),35044!==this.usage&&(l.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(l.updateRange=this.updateRange),l}}class Rve extends Fs{constructor(l,a,h){super(new Uint16Array(l),a,h)}}class Fve extends Fs{constructor(l,a,h){super(new Uint32Array(l),a,h)}}class In extends Fs{constructor(l,a,h){super(new Float32Array(l),a,h)}}let zft=0;const Pu=new bi,o$=new qc,rb=new re,Zc=new Z1,T2=new Z1,ia=new re;class Fi extends G1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zft++}),this.uuid=Gc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(l){return this.index=Array.isArray(l)?new(bve(l)?Fve:Rve)(l,1):l,this}getAttribute(l){return this.attributes[l]}setAttribute(l,a){return this.attributes[l]=a,this}deleteAttribute(l){return delete this.attributes[l],this}hasAttribute(l){return void 0!==this.attributes[l]}addGroup(l,a,h=0){this.groups.push({start:l,count:a,materialIndex:h})}clearGroups(){this.groups=[]}setDrawRange(l,a){this.drawRange.start=l,this.drawRange.count=a}applyMatrix4(l){const a=this.attributes.position;void 0!==a&&(a.applyMatrix4(l),a.needsUpdate=!0);const h=this.attributes.normal;if(void 0!==h){const f=(new rc).getNormalMatrix(l);h.applyNormalMatrix(f),h.needsUpdate=!0}const d=this.attributes.tangent;return void 0!==d&&(d.transformDirection(l),d.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(l){return Pu.makeRotationFromQuaternion(l),this.applyMatrix4(Pu),this}rotateX(l){return Pu.makeRotationX(l),this.applyMatrix4(Pu),this}rotateY(l){return Pu.makeRotationY(l),this.applyMatrix4(Pu),this}rotateZ(l){return Pu.makeRotationZ(l),this.applyMatrix4(Pu),this}translate(l,a,h){return Pu.makeTranslation(l,a,h),this.applyMatrix4(Pu),this}scale(l,a,h){return Pu.makeScale(l,a,h),this.applyMatrix4(Pu),this}lookAt(l){return o$.lookAt(l),o$.updateMatrix(),this.applyMatrix4(o$.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rb).negate(),this.translate(rb.x,rb.y,rb.z),this}setFromPoints(l){const a=[];for(let h=0,d=l.length;h<d;h++){const f=l[h];a.push(f.x,f.y,f.z||0)}return this.setAttribute("position",new In(a,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Z1);const l=this.attributes.position,a=this.morphAttributes.position;if(l&&l.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));if(void 0!==l){if(this.boundingBox.setFromBufferAttribute(l),a)for(let h=0,d=a.length;h<d;h++)Zc.setFromBufferAttribute(a[h]),this.morphTargetsRelative?(ia.addVectors(this.boundingBox.min,Zc.min),this.boundingBox.expandByPoint(ia),ia.addVectors(this.boundingBox.max,Zc.max),this.boundingBox.expandByPoint(ia)):(this.boundingBox.expandByPoint(Zc.min),this.boundingBox.expandByPoint(Zc.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new J1);const l=this.attributes.position,a=this.morphAttributes.position;if(l&&l.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new re,1/0);if(l){const h=this.boundingSphere.center;if(Zc.setFromBufferAttribute(l),a)for(let f=0,p=a.length;f<p;f++)T2.setFromBufferAttribute(a[f]),this.morphTargetsRelative?(ia.addVectors(Zc.min,T2.min),Zc.expandByPoint(ia),ia.addVectors(Zc.max,T2.max),Zc.expandByPoint(ia)):(Zc.expandByPoint(T2.min),Zc.expandByPoint(T2.max));Zc.getCenter(h);let d=0;for(let f=0,p=l.count;f<p;f++)ia.fromBufferAttribute(l,f),d=Math.max(d,h.distanceToSquared(ia));if(a)for(let f=0,p=a.length;f<p;f++){const g=a[f],m=this.morphTargetsRelative;for(let v=0,y=g.count;v<y;v++)ia.fromBufferAttribute(g,v),m&&(rb.fromBufferAttribute(l,v),ia.add(rb)),d=Math.max(d,h.distanceToSquared(ia))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const l=this.index,a=this.attributes;if(null===l||void 0===a.position||void 0===a.normal||void 0===a.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const h=l.array,d=a.position.array,f=a.normal.array,p=a.uv.array,g=d.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Fs(new Float32Array(4*g),4));const m=this.getAttribute("tangent").array,v=[],y=[];for(let z=0;z<g;z++)v[z]=new re,y[z]=new re;const _=new re,b=new re,C=new re,x=new mt,S=new mt,w=new mt,T=new re,O=new re;function k(z,U,Z){_.fromArray(d,3*z),b.fromArray(d,3*U),C.fromArray(d,3*Z),x.fromArray(p,2*z),S.fromArray(p,2*U),w.fromArray(p,2*Z),b.sub(_),C.sub(_),S.sub(x),w.sub(x);const Y=1/(S.x*w.y-w.x*S.y);!isFinite(Y)||(T.copy(b).multiplyScalar(w.y).addScaledVector(C,-S.y).multiplyScalar(Y),O.copy(C).multiplyScalar(S.x).addScaledVector(b,-w.x).multiplyScalar(Y),v[z].add(T),v[U].add(T),v[Z].add(T),y[z].add(O),y[U].add(O),y[Z].add(O))}let D=this.groups;0===D.length&&(D=[{start:0,count:h.length}]);for(let z=0,U=D.length;z<U;++z){const Z=D[z],Y=Z.start;for(let $=Y,H=Y+Z.count;$<H;$+=3)k(h[$+0],h[$+1],h[$+2])}const M=new re,A=new re,L=new re,E=new re;function V(z){L.fromArray(f,3*z),E.copy(L);const U=v[z];M.copy(U),M.sub(L.multiplyScalar(L.dot(U))).normalize(),A.crossVectors(E,U);const Y=A.dot(y[z])<0?-1:1;m[4*z]=M.x,m[4*z+1]=M.y,m[4*z+2]=M.z,m[4*z+3]=Y}for(let z=0,U=D.length;z<U;++z){const Z=D[z],Y=Z.start;for(let $=Y,H=Y+Z.count;$<H;$+=3)V(h[$+0]),V(h[$+1]),V(h[$+2])}}computeVertexNormals(){const l=this.index,a=this.getAttribute("position");if(void 0!==a){let h=this.getAttribute("normal");if(void 0===h)h=new Fs(new Float32Array(3*a.count),3),this.setAttribute("normal",h);else for(let b=0,C=h.count;b<C;b++)h.setXYZ(b,0,0,0);const d=new re,f=new re,p=new re,g=new re,m=new re,v=new re,y=new re,_=new re;if(l)for(let b=0,C=l.count;b<C;b+=3){const x=l.getX(b+0),S=l.getX(b+1),w=l.getX(b+2);d.fromBufferAttribute(a,x),f.fromBufferAttribute(a,S),p.fromBufferAttribute(a,w),y.subVectors(p,f),_.subVectors(d,f),y.cross(_),g.fromBufferAttribute(h,x),m.fromBufferAttribute(h,S),v.fromBufferAttribute(h,w),g.add(y),m.add(y),v.add(y),h.setXYZ(x,g.x,g.y,g.z),h.setXYZ(S,m.x,m.y,m.z),h.setXYZ(w,v.x,v.y,v.z)}else for(let b=0,C=a.count;b<C;b+=3)d.fromBufferAttribute(a,b+0),f.fromBufferAttribute(a,b+1),p.fromBufferAttribute(a,b+2),y.subVectors(p,f),_.subVectors(d,f),y.cross(_),h.setXYZ(b+0,y.x,y.y,y.z),h.setXYZ(b+1,y.x,y.y,y.z),h.setXYZ(b+2,y.x,y.y,y.z);this.normalizeNormals(),h.needsUpdate=!0}}merge(l,a){if(!l||!l.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",l);void 0===a&&(a=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const h=this.attributes;for(const d in h){if(void 0===l.attributes[d])continue;const p=h[d].array,g=l.attributes[d],m=g.array,v=g.itemSize*a,y=Math.min(m.length,p.length-v);for(let _=0,b=v;_<y;_++,b++)p[b]=m[_]}return this}normalizeNormals(){const l=this.attributes.normal;for(let a=0,h=l.count;a<h;a++)ia.fromBufferAttribute(l,a),ia.normalize(),l.setXYZ(a,ia.x,ia.y,ia.z)}toNonIndexed(){function l(g,m){const v=g.array,y=g.itemSize,_=g.normalized,b=new v.constructor(m.length*y);let C=0,x=0;for(let S=0,w=m.length;S<w;S++){C=g.isInterleavedBufferAttribute?m[S]*g.data.stride+g.offset:m[S]*y;for(let T=0;T<y;T++)b[x++]=v[C++]}return new Fs(b,y,_)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const a=new Fi,h=this.index.array,d=this.attributes;for(const g in d){const v=l(d[g],h);a.setAttribute(g,v)}const f=this.morphAttributes;for(const g in f){const m=[],v=f[g];for(let y=0,_=v.length;y<_;y++){const C=l(v[y],h);m.push(C)}a.morphAttributes[g]=m}a.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let g=0,m=p.length;g<m;g++){const v=p[g];a.addGroup(v.start,v.count,v.materialIndex)}return a}toJSON(){const l={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(l.uuid=this.uuid,l.type=this.type,""!==this.name&&(l.name=this.name),Object.keys(this.userData).length>0&&(l.userData=this.userData),void 0!==this.parameters){const m=this.parameters;for(const v in m)void 0!==m[v]&&(l[v]=m[v]);return l}l.data={attributes:{}};const a=this.index;null!==a&&(l.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});const h=this.attributes;for(const m in h)l.data.attributes[m]=h[m].toJSON(l.data);const d={};let f=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],y=[];for(let _=0,b=v.length;_<b;_++)y.push(v[_].toJSON(l.data));y.length>0&&(d[m]=y,f=!0)}f&&(l.data.morphAttributes=d,l.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(l.data.groups=JSON.parse(JSON.stringify(p)));const g=this.boundingSphere;return null!==g&&(l.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),l}clone(){return(new this.constructor).copy(this)}copy(l){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const a={};this.name=l.name;const h=l.index;null!==h&&this.setIndex(h.clone(a));const d=l.attributes;for(const v in d)this.setAttribute(v,d[v].clone(a));const f=l.morphAttributes;for(const v in f){const y=[],_=f[v];for(let b=0,C=_.length;b<C;b++)y.push(_[b].clone(a));this.morphAttributes[v]=y}this.morphTargetsRelative=l.morphTargetsRelative;const p=l.groups;for(let v=0,y=p.length;v<y;v++){const _=p[v];this.addGroup(_.start,_.count,_.materialIndex)}const g=l.boundingBox;null!==g&&(this.boundingBox=g.clone());const m=l.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=l.drawRange.start,this.drawRange.count=l.drawRange.count,this.userData=l.userData,void 0!==l.parameters&&(this.parameters=Object.assign({},l.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Nve=new bi,sb=new h3,a$=new J1,Xg=new re,Yg=new re,Kg=new re,l$=new re,c$=new re,u$=new re,g3=new re,m3=new re,v3=new re,y3=new mt,_3=new mt,b3=new mt,h$=new re,C3=new re;class sr extends qc{constructor(l=new Fi,a=new oo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=l,this.material=a,this.updateMorphTargets()}copy(l,a){return super.copy(l,a),void 0!==l.morphTargetInfluences&&(this.morphTargetInfluences=l.morphTargetInfluences.slice()),void 0!==l.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},l.morphTargetDictionary)),this.material=l.material,this.geometry=l.geometry,this}updateMorphTargets(){const a=this.geometry.morphAttributes,h=Object.keys(a);if(h.length>0){const d=a[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,p=d.length;f<p;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}raycast(l,a){const h=this.geometry,d=this.material,f=this.matrixWorld;if(void 0===d||(null===h.boundingSphere&&h.computeBoundingSphere(),a$.copy(h.boundingSphere),a$.applyMatrix4(f),!1===l.ray.intersectsSphere(a$))||(Nve.copy(f).invert(),sb.copy(l.ray).applyMatrix4(Nve),null!==h.boundingBox&&!1===sb.intersectsBox(h.boundingBox)))return;let p;const g=h.index,m=h.attributes.position,v=h.morphAttributes.position,y=h.morphTargetsRelative,_=h.attributes.uv,b=h.attributes.uv2,C=h.groups,x=h.drawRange;if(null!==g)if(Array.isArray(d))for(let S=0,w=C.length;S<w;S++){const T=C[S],O=d[T.materialIndex];for(let M=Math.max(T.start,x.start),A=Math.min(g.count,Math.min(T.start+T.count,x.start+x.count));M<A;M+=3){const L=g.getX(M),E=g.getX(M+1),V=g.getX(M+2);p=x3(this,O,l,sb,m,v,y,_,b,L,E,V),p&&(p.faceIndex=Math.floor(M/3),p.face.materialIndex=T.materialIndex,a.push(p))}}else for(let T=Math.max(0,x.start),O=Math.min(g.count,x.start+x.count);T<O;T+=3){const k=g.getX(T),D=g.getX(T+1),M=g.getX(T+2);p=x3(this,d,l,sb,m,v,y,_,b,k,D,M),p&&(p.faceIndex=Math.floor(T/3),a.push(p))}else if(void 0!==m)if(Array.isArray(d))for(let S=0,w=C.length;S<w;S++){const T=C[S],O=d[T.materialIndex];for(let M=Math.max(T.start,x.start),A=Math.min(m.count,Math.min(T.start+T.count,x.start+x.count));M<A;M+=3)p=x3(this,O,l,sb,m,v,y,_,b,M,M+1,M+2),p&&(p.faceIndex=Math.floor(M/3),p.face.materialIndex=T.materialIndex,a.push(p))}else for(let T=Math.max(0,x.start),O=Math.min(m.count,x.start+x.count);T<O;T+=3)p=x3(this,d,l,sb,m,v,y,_,b,T,T+1,T+2),p&&(p.faceIndex=Math.floor(T/3),a.push(p))}}function x3(c,l,a,h,d,f,p,g,m,v,y,_){Xg.fromBufferAttribute(d,v),Yg.fromBufferAttribute(d,y),Kg.fromBufferAttribute(d,_);const b=c.morphTargetInfluences;if(f&&b){g3.set(0,0,0),m3.set(0,0,0),v3.set(0,0,0);for(let x=0,S=f.length;x<S;x++){const w=b[x],T=f[x];0!==w&&(l$.fromBufferAttribute(T,v),c$.fromBufferAttribute(T,y),u$.fromBufferAttribute(T,_),p?(g3.addScaledVector(l$,w),m3.addScaledVector(c$,w),v3.addScaledVector(u$,w)):(g3.addScaledVector(l$.sub(Xg),w),m3.addScaledVector(c$.sub(Yg),w),v3.addScaledVector(u$.sub(Kg),w)))}Xg.add(g3),Yg.add(m3),Kg.add(v3)}c.isSkinnedMesh&&(c.boneTransform(v,Xg),c.boneTransform(y,Yg),c.boneTransform(_,Kg));const C=function Uft(c,l,a,h,d,f,p,g){let m;if(m=1===l.side?h.intersectTriangle(p,f,d,!0,g):h.intersectTriangle(d,f,p,2!==l.side,g),null===m)return null;C3.copy(g),C3.applyMatrix4(c.matrixWorld);const v=a.ray.origin.distanceTo(C3);return v<a.near||v>a.far?null:{distance:v,point:C3.clone(),object:c}}(c,l,a,h,Xg,Yg,Kg,h$);if(C){g&&(y3.fromBufferAttribute(g,v),_3.fromBufferAttribute(g,y),b3.fromBufferAttribute(g,_),C.uv=Ih.getUV(h$,Xg,Yg,Kg,y3,_3,b3,new mt)),m&&(y3.fromBufferAttribute(m,v),_3.fromBufferAttribute(m,y),b3.fromBufferAttribute(m,_),C.uv2=Ih.getUV(h$,Xg,Yg,Kg,y3,_3,b3,new mt));const x={a:v,b:y,c:_,normal:new re,materialIndex:0};Ih.getNormal(Xg,Yg,Kg,x.normal),C.face=x}return C}class cp extends Fi{constructor(l=1,a=1,h=1,d=1,f=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:l,height:a,depth:h,widthSegments:d,heightSegments:f,depthSegments:p};const g=this;d=Math.floor(d),f=Math.floor(f),p=Math.floor(p);const m=[],v=[],y=[],_=[];let b=0,C=0;function x(S,w,T,O,k,D,M,A,L,E,V){const z=D/L,U=M/E,Z=D/2,Y=M/2,N=A/2,$=L+1,H=E+1;let G=0,W=0;const j=new re;for(let Q=0;Q<H;Q++){const J=Q*U-Y;for(let te=0;te<$;te++)j[S]=(te*z-Z)*O,j[w]=J*k,j[T]=N,v.push(j.x,j.y,j.z),j[S]=0,j[w]=0,j[T]=A>0?1:-1,y.push(j.x,j.y,j.z),_.push(te/L),_.push(1-Q/E),G+=1}for(let Q=0;Q<E;Q++)for(let J=0;J<L;J++){const ce=b+J+$*(Q+1),ae=b+(J+1)+$*(Q+1),Se=b+(J+1)+$*Q;m.push(b+J+$*Q,ce,Se),m.push(ce,ae,Se),W+=6}g.addGroup(C,W,V),C+=W,b+=G}x("z","y","x",-1,-1,h,a,l,p,f,0),x("z","y","x",1,-1,h,a,-l,p,f,1),x("x","z","y",1,1,l,h,a,d,p,2),x("x","z","y",1,-1,l,h,-a,d,p,3),x("x","y","z",1,-1,l,a,h,d,f,4),x("x","y","z",-1,-1,l,a,-h,d,f,5),this.setIndex(m),this.setAttribute("position",new In(v,3)),this.setAttribute("normal",new In(y,3)),this.setAttribute("uv",new In(_,2))}static fromJSON(l){return new cp(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments)}}function ob(c){const l={};for(const a in c){l[a]={};for(const h in c[a]){const d=c[a][h];l[a][h]=d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?d.clone():Array.isArray(d)?d.slice():d}}return l}function ja(c){const l={};for(let a=0;a<c.length;a++){const h=ob(c[a]);for(const d in h)l[d]=h[d]}return l}const w3={clone:ob,merge:ja};class qa extends pv{constructor(l){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==l&&(void 0!==l.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(l))}copy(l){return super.copy(l),this.fragmentShader=l.fragmentShader,this.vertexShader=l.vertexShader,this.uniforms=ob(l.uniforms),this.defines=Object.assign({},l.defines),this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.fog=l.fog,this.lights=l.lights,this.clipping=l.clipping,this.extensions=Object.assign({},l.extensions),this.glslVersion=l.glslVersion,this}toJSON(l){const a=super.toJSON(l);a.glslVersion=this.glslVersion,a.uniforms={};for(const d in this.uniforms){const p=this.uniforms[d].value;a.uniforms[d]=p&&p.isTexture?{type:"t",value:p.toJSON(l).uuid}:p&&p.isColor?{type:"c",value:p.getHex()}:p&&p.isVector2?{type:"v2",value:p.toArray()}:p&&p.isVector3?{type:"v3",value:p.toArray()}:p&&p.isVector4?{type:"v4",value:p.toArray()}:p&&p.isMatrix3?{type:"m3",value:p.toArray()}:p&&p.isMatrix4?{type:"m4",value:p.toArray()}:{value:p}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader;const h={};for(const d in this.extensions)!0===this.extensions[d]&&(h[d]=!0);return Object.keys(h).length>0&&(a.extensions=h),a}}class d$ extends qc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new bi,this.projectionMatrix=new bi,this.projectionMatrixInverse=new bi}copy(l,a){return super.copy(l,a),this.matrixWorldInverse.copy(l.matrixWorldInverse),this.projectionMatrix.copy(l.projectionMatrix),this.projectionMatrixInverse.copy(l.projectionMatrixInverse),this}getWorldDirection(l){this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return l.set(-a[8],-a[9],-a[10]).normalize()}updateMatrixWorld(l){super.updateMatrixWorld(l),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(l,a){super.updateWorldMatrix(l,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class xo extends d${constructor(l=50,a=1,h=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=l,this.zoom=1,this.near=h,this.far=d,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(l,a){return super.copy(l,a),this.fov=l.fov,this.zoom=l.zoom,this.near=l.near,this.far=l.far,this.focus=l.focus,this.aspect=l.aspect,this.view=null===l.view?null:Object.assign({},l.view),this.filmGauge=l.filmGauge,this.filmOffset=l.filmOffset,this}setFocalLength(l){const a=.5*this.getFilmHeight()/l;this.fov=2*b2*Math.atan(a),this.updateProjectionMatrix()}getFocalLength(){const l=Math.tan(.5*cv*this.fov);return.5*this.getFilmHeight()/l}getEffectiveFOV(){return 2*b2*Math.atan(Math.tan(.5*cv*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(l,a,h,d,f,p){this.aspect=l/a,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=l,this.view.fullHeight=a,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const l=this.near;let a=l*Math.tan(.5*cv*this.fov)/this.zoom,h=2*a,d=this.aspect*h,f=-.5*d;const p=this.view;if(null!==this.view&&this.view.enabled){const m=p.fullWidth,v=p.fullHeight;f+=p.offsetX*d/m,a-=p.offsetY*h/v,d*=p.width/m,h*=p.height/v}const g=this.filmOffset;0!==g&&(f+=l*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(f,f+d,a,a-h,l,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(l){const a=super.toJSON(l);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,null!==this.view&&(a.object.view=Object.assign({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a}}class Wft extends qc{constructor(l,a,h){if(super(),this.type="CubeCamera",!0!==h.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=h;const d=new xo(90,1,l,a);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new re(1,0,0)),this.add(d);const f=new xo(90,1,l,a);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new re(-1,0,0)),this.add(f);const p=new xo(90,1,l,a);p.layers=this.layers,p.up.set(0,0,1),p.lookAt(new re(0,1,0)),this.add(p);const g=new xo(90,1,l,a);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(new re(0,-1,0)),this.add(g);const m=new xo(90,1,l,a);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new re(0,0,1)),this.add(m);const v=new xo(90,1,l,a);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new re(0,0,-1)),this.add(v)}update(l,a){null===this.parent&&this.updateMatrixWorld();const h=this.renderTarget,[d,f,p,g,m,v]=this.children,y=l.getRenderTarget(),_=l.toneMapping,b=l.xr.enabled;l.toneMapping=0,l.xr.enabled=!1;const C=h.texture.generateMipmaps;h.texture.generateMipmaps=!1,l.setRenderTarget(h,0),l.render(a,d),l.setRenderTarget(h,1),l.render(a,f),l.setRenderTarget(h,2),l.render(a,p),l.setRenderTarget(h,3),l.render(a,g),l.setRenderTarget(h,4),l.render(a,m),h.texture.generateMipmaps=C,l.setRenderTarget(h,5),l.render(a,v),l.setRenderTarget(y),l.toneMapping=_,l.xr.enabled=b,h.texture.needsPMREMUpdate=!0}}class S3 extends Hd{constructor(l,a,h,d,f,p,g,m,v,y){super(l=void 0!==l?l:[],a=void 0!==a?a:301,h,d,f,p,g,m,v,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(l){this.image=l}}class Gft extends kl{constructor(l,a={}){super(l,l,a),this.isWebGLCubeRenderTarget=!0;const h={width:l,height:l,depth:1};this.texture=new S3([h,h,h,h,h,h],a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,this.texture.minFilter=void 0!==a.minFilter?a.minFilter:bo}fromEquirectangularTexture(l,a){this.texture.type=a.type,this.texture.encoding=a.encoding,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;const h_uniforms={tEquirect:{value:null}},h_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",h_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",d=new cp(5,5,5),f=new qa({name:"CubemapFromEquirect",uniforms:ob(h_uniforms),vertexShader:h_vertexShader,fragmentShader:h_fragmentShader,side:1,blending:0});f.uniforms.tEquirect.value=a;const p=new sr(d,f),g=a.minFilter;return 1008===a.minFilter&&(a.minFilter=bo),new Wft(1,10,this).update(l,p),a.minFilter=g,p.geometry.dispose(),p.material.dispose(),this}clear(l,a,h,d){const f=l.getRenderTarget();for(let p=0;p<6;p++)l.setRenderTarget(this,p),l.clear(a,h,d);l.setRenderTarget(f)}}const f$=new re,Qft=new re,jft=new rc;class gv{constructor(l=new re(1,0,0),a=0){this.isPlane=!0,this.normal=l,this.constant=a}set(l,a){return this.normal.copy(l),this.constant=a,this}setComponents(l,a,h,d){return this.normal.set(l,a,h),this.constant=d,this}setFromNormalAndCoplanarPoint(l,a){return this.normal.copy(l),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(l,a,h){const d=f$.subVectors(h,a).cross(Qft.subVectors(l,a)).normalize();return this.setFromNormalAndCoplanarPoint(d,l),this}copy(l){return this.normal.copy(l.normal),this.constant=l.constant,this}normalize(){const l=1/this.normal.length();return this.normal.multiplyScalar(l),this.constant*=l,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(l){return this.normal.dot(l)+this.constant}distanceToSphere(l){return this.distanceToPoint(l.center)-l.radius}projectPoint(l,a){return a.copy(this.normal).multiplyScalar(-this.distanceToPoint(l)).add(l)}intersectLine(l,a){const h=l.delta(f$),d=this.normal.dot(h);if(0===d)return 0===this.distanceToPoint(l.start)?a.copy(l.start):null;const f=-(l.start.dot(this.normal)+this.constant)/d;return f<0||f>1?null:a.copy(h).multiplyScalar(f).add(l.start)}intersectsLine(l){const a=this.distanceToPoint(l.start),h=this.distanceToPoint(l.end);return a<0&&h>0||h<0&&a>0}intersectsBox(l){return l.intersectsPlane(this)}intersectsSphere(l){return l.intersectsPlane(this)}coplanarPoint(l){return l.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(l,a){const h=a||jft.getNormalMatrix(l),d=this.coplanarPoint(f$).applyMatrix4(l),f=this.normal.applyMatrix3(h).normalize();return this.constant=-d.dot(f),this}translate(l){return this.constant-=l.dot(this.normal),this}equals(l){return l.normal.equals(this.normal)&&l.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const cb=new J1,T3=new re;class p${constructor(l=new gv,a=new gv,h=new gv,d=new gv,f=new gv,p=new gv){this.planes=[l,a,h,d,f,p]}set(l,a,h,d,f,p){const g=this.planes;return g[0].copy(l),g[1].copy(a),g[2].copy(h),g[3].copy(d),g[4].copy(f),g[5].copy(p),this}copy(l){const a=this.planes;for(let h=0;h<6;h++)a[h].copy(l.planes[h]);return this}setFromProjectionMatrix(l){const a=this.planes,h=l.elements,d=h[0],f=h[1],p=h[2],g=h[3],m=h[4],v=h[5],y=h[6],_=h[7],b=h[8],C=h[9],x=h[10],S=h[11],w=h[12],T=h[13],O=h[14],k=h[15];return a[0].setComponents(g-d,_-m,S-b,k-w).normalize(),a[1].setComponents(g+d,_+m,S+b,k+w).normalize(),a[2].setComponents(g+f,_+v,S+C,k+T).normalize(),a[3].setComponents(g-f,_-v,S-C,k-T).normalize(),a[4].setComponents(g-p,_-y,S-x,k-O).normalize(),a[5].setComponents(g+p,_+y,S+x,k+O).normalize(),this}intersectsObject(l){const a=l.geometry;return null===a.boundingSphere&&a.computeBoundingSphere(),cb.copy(a.boundingSphere).applyMatrix4(l.matrixWorld),this.intersectsSphere(cb)}intersectsSprite(l){return cb.center.set(0,0,0),cb.radius=.7071067811865476,cb.applyMatrix4(l.matrixWorld),this.intersectsSphere(cb)}intersectsSphere(l){const a=this.planes,h=l.center,d=-l.radius;for(let f=0;f<6;f++)if(a[f].distanceToPoint(h)<d)return!1;return!0}intersectsBox(l){const a=this.planes;for(let h=0;h<6;h++){const d=a[h];if(T3.x=d.normal.x>0?l.max.x:l.min.x,T3.y=d.normal.y>0?l.max.y:l.min.y,T3.z=d.normal.z>0?l.max.z:l.min.z,d.distanceToPoint(T3)<0)return!1}return!0}containsPoint(l){const a=this.planes;for(let h=0;h<6;h++)if(a[h].distanceToPoint(l)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Lve(){let c=null,l=!1,a=null,h=null;function d(f,p){a(f,p),h=c.requestAnimationFrame(d)}return{start:function(){!0!==l&&null!==a&&(h=c.requestAnimationFrame(d),l=!0)},stop:function(){c.cancelAnimationFrame(h),l=!1},setAnimationLoop:function(f){a=f},setContext:function(f){c=f}}}function qft(c,l){const a=l.isWebGL2,h=new WeakMap;return{get:function p(v){return v.isInterleavedBufferAttribute&&(v=v.data),h.get(v)},remove:function g(v){v.isInterleavedBufferAttribute&&(v=v.data);const y=h.get(v);y&&(c.deleteBuffer(y.buffer),h.delete(v))},update:function m(v,y){if(v.isGLBufferAttribute){const b=h.get(v);return void((!b||b.version<v.version)&&h.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version}))}v.isInterleavedBufferAttribute&&(v=v.data);const _=h.get(v);void 0===_?h.set(v,function d(v,y){const _=v.array,b=v.usage,C=c.createBuffer();let x;if(c.bindBuffer(y,C),c.bufferData(y,_,b),v.onUploadCallback(),_ instanceof Float32Array)x=5126;else if(_ instanceof Uint16Array)if(v.isFloat16BufferAttribute){if(!a)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");x=5131}else x=5123;else if(_ instanceof Int16Array)x=5122;else if(_ instanceof Uint32Array)x=5125;else if(_ instanceof Int32Array)x=5124;else if(_ instanceof Int8Array)x=5120;else if(_ instanceof Uint8Array)x=5121;else{if(!(_ instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);x=5121}return{buffer:C,type:x,bytesPerElement:_.BYTES_PER_ELEMENT,version:v.version}}(v,y)):_.version<v.version&&(function f(v,y,_){const b=y.array,C=y.updateRange;c.bindBuffer(_,v),-1===C.count?c.bufferSubData(_,0,b):(a?c.bufferSubData(_,C.offset*b.BYTES_PER_ELEMENT,b,C.offset,C.count):c.bufferSubData(_,C.offset*b.BYTES_PER_ELEMENT,b.subarray(C.offset,C.offset+C.count)),C.count=-1)}(_.buffer,v,y),_.version=v.version)}}}class ub extends Fi{constructor(l=1,a=1,h=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:l,height:a,widthSegments:h,heightSegments:d};const f=l/2,p=a/2,g=Math.floor(h),m=Math.floor(d),v=g+1,y=m+1,_=l/g,b=a/m,C=[],x=[],S=[],w=[];for(let T=0;T<y;T++){const O=T*b-p;for(let k=0;k<v;k++)x.push(k*_-f,-O,0),S.push(0,0,1),w.push(k/g),w.push(1-T/m)}for(let T=0;T<m;T++)for(let O=0;O<g;O++){const D=O+v*(T+1),M=O+1+v*(T+1),A=O+1+v*T;C.push(O+v*T,D,A),C.push(D,M,A)}this.setIndex(C),this.setAttribute("position",new In(x,3)),this.setAttribute("normal",new In(S,3)),this.setAttribute("uv",new In(w,2))}static fromJSON(l){return new ub(l.width,l.height,l.widthSegments,l.heightSegments)}}const ir={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},un={common:{diffuse:{value:new hn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new rc},uv2Transform:{value:new rc},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new hn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rc}},sprite:{diffuse:{value:new hn(16777215)},opacity:{value:1},center:{value:new mt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rc}}},$d={basic:{uniforms:ja([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.fog]),vertexShader:ir.meshbasic_vert,fragmentShader:ir.meshbasic_frag},lambert:{uniforms:ja([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.fog,un.lights,{emissive:{value:new hn(0)}}]),vertexShader:ir.meshlambert_vert,fragmentShader:ir.meshlambert_frag},phong:{uniforms:ja([un.common,un.specularmap,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.fog,un.lights,{emissive:{value:new hn(0)},specular:{value:new hn(1118481)},shininess:{value:30}}]),vertexShader:ir.meshphong_vert,fragmentShader:ir.meshphong_frag},standard:{uniforms:ja([un.common,un.envmap,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.roughnessmap,un.metalnessmap,un.fog,un.lights,{emissive:{value:new hn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ir.meshphysical_vert,fragmentShader:ir.meshphysical_frag},toon:{uniforms:ja([un.common,un.aomap,un.lightmap,un.emissivemap,un.bumpmap,un.normalmap,un.displacementmap,un.gradientmap,un.fog,un.lights,{emissive:{value:new hn(0)}}]),vertexShader:ir.meshtoon_vert,fragmentShader:ir.meshtoon_frag},matcap:{uniforms:ja([un.common,un.bumpmap,un.normalmap,un.displacementmap,un.fog,{matcap:{value:null}}]),vertexShader:ir.meshmatcap_vert,fragmentShader:ir.meshmatcap_frag},points:{uniforms:ja([un.points,un.fog]),vertexShader:ir.points_vert,fragmentShader:ir.points_frag},dashed:{uniforms:ja([un.common,un.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ir.linedashed_vert,fragmentShader:ir.linedashed_frag},depth:{uniforms:ja([un.common,un.displacementmap]),vertexShader:ir.depth_vert,fragmentShader:ir.depth_frag},normal:{uniforms:ja([un.common,un.bumpmap,un.normalmap,un.displacementmap,{opacity:{value:1}}]),vertexShader:ir.meshnormal_vert,fragmentShader:ir.meshnormal_frag},sprite:{uniforms:ja([un.sprite,un.fog]),vertexShader:ir.sprite_vert,fragmentShader:ir.sprite_frag},background:{uniforms:{uvTransform:{value:new rc},t2D:{value:null}},vertexShader:ir.background_vert,fragmentShader:ir.background_frag},cube:{uniforms:ja([un.envmap,{opacity:{value:1}}]),vertexShader:ir.cube_vert,fragmentShader:ir.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ir.equirect_vert,fragmentShader:ir.equirect_frag},distanceRGBA:{uniforms:ja([un.common,un.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ir.distanceRGBA_vert,fragmentShader:ir.distanceRGBA_frag},shadow:{uniforms:ja([un.lights,un.fog,{color:{value:new hn(0)},opacity:{value:1}}]),vertexShader:ir.shadow_vert,fragmentShader:ir.shadow_frag}};function Qgt(c,l,a,h,d,f){const p=new hn(0);let m,v,g=!0===d?0:1,y=null,_=0,b=null;function x(S,w){a.buffers.color.setClear(S.r,S.g,S.b,w,f)}return{getClearColor:function(){return p},setClearColor:function(S,w=1){p.set(S),g=w,x(p,g)},getClearAlpha:function(){return g},setClearAlpha:function(S){g=S,x(p,g)},render:function C(S,w){let T=!1,O=!0===w.isScene?w.background:null;O&&O.isTexture&&(O=l.get(O));const k=c.xr,D=k.getSession&&k.getSession();D&&"additive"===D.environmentBlendMode&&(O=null),null===O?x(p,g):O&&O.isColor&&(x(O,1),T=!0),(c.autoClear||T)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil),O&&(O.isCubeTexture||306===O.mapping)?(void 0===v&&(v=new sr(new cp(1,1,1),new qa({name:"BackgroundCubeMaterial",uniforms:ob($d.cube.uniforms),vertexShader:$d.cube.vertexShader,fragmentShader:$d.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(M,A,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),h.update(v)),v.material.uniforms.envMap.value=O,v.material.uniforms.flipEnvMap.value=O.isCubeTexture&&!1===O.isRenderTargetTexture?-1:1,(y!==O||_!==O.version||b!==c.toneMapping)&&(v.material.needsUpdate=!0,y=O,_=O.version,b=c.toneMapping),v.layers.enableAll(),S.unshift(v,v.geometry,v.material,0,0,null)):O&&O.isTexture&&(void 0===m&&(m=new sr(new ub(2,2),new qa({name:"BackgroundMaterial",uniforms:ob($d.background.uniforms),vertexShader:$d.background.vertexShader,fragmentShader:$d.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),h.update(m)),m.material.uniforms.t2D.value=O,!0===O.matrixAutoUpdate&&O.updateMatrix(),m.material.uniforms.uvTransform.value.copy(O.matrix),(y!==O||_!==O.version||b!==c.toneMapping)&&(m.material.needsUpdate=!0,y=O,_=O.version,b=c.toneMapping),m.layers.enableAll(),S.unshift(m,m.geometry,m.material,0,0,null))}}}function jgt(c,l,a,h){const d=c.getParameter(34921),f=h.isWebGL2?null:l.get("OES_vertex_array_object"),p=h.isWebGL2||null!==f,g={},m=w(null);let v=m,y=!1;function C(N){return h.isWebGL2?c.bindVertexArray(N):f.bindVertexArrayOES(N)}function x(N){return h.isWebGL2?c.deleteVertexArray(N):f.deleteVertexArrayOES(N)}function w(N){const $=[],H=[],G=[];for(let W=0;W<d;W++)$[W]=0,H[W]=0,G[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:H,attributeDivisors:G,object:N,attributes:{},index:null}}function k(){const N=v.newAttributes;for(let $=0,H=N.length;$<H;$++)N[$]=0}function D(N){M(N,0)}function M(N,$){const G=v.enabledAttributes,W=v.attributeDivisors;v.newAttributes[N]=1,0===G[N]&&(c.enableVertexAttribArray(N),G[N]=1),W[N]!==$&&((h.isWebGL2?c:l.get("ANGLE_instanced_arrays"))[h.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,$),W[N]=$)}function A(){const N=v.newAttributes,$=v.enabledAttributes;for(let H=0,G=$.length;H<G;H++)$[H]!==N[H]&&(c.disableVertexAttribArray(H),$[H]=0)}function L(N,$,H,G,W,j){!0!==h.isWebGL2||5124!==H&&5125!==H?c.vertexAttribPointer(N,$,H,G,W,j):c.vertexAttribIPointer(N,$,H,W,j)}function Z(){Y(),y=!0,v!==m&&(v=m,C(v.object))}function Y(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:function _(N,$,H,G,W){let j=!1;if(p){const Q=function S(N,$,H){const G=!0===H.wireframe;let W=g[N.id];void 0===W&&(W={},g[N.id]=W);let j=W[$.id];void 0===j&&(j={},W[$.id]=j);let Q=j[G];return void 0===Q&&(Q=w(function b(){return h.isWebGL2?c.createVertexArray():f.createVertexArrayOES()}()),j[G]=Q),Q}(G,H,$);v!==Q&&(v=Q,C(v.object)),j=function T(N,$,H,G){const W=v.attributes,j=$.attributes;let Q=0;const J=H.getAttributes();for(const te in J)if(J[te].location>=0){const ae=W[te];let Se=j[te];if(void 0===Se&&("instanceMatrix"===te&&N.instanceMatrix&&(Se=N.instanceMatrix),"instanceColor"===te&&N.instanceColor&&(Se=N.instanceColor)),void 0===ae||ae.attribute!==Se||Se&&ae.data!==Se.data)return!0;Q++}return v.attributesNum!==Q||v.index!==G}(N,G,H,W),j&&function O(N,$,H,G){const W={},j=$.attributes;let Q=0;const J=H.getAttributes();for(const te in J)if(J[te].location>=0){let ae=j[te];void 0===ae&&("instanceMatrix"===te&&N.instanceMatrix&&(ae=N.instanceMatrix),"instanceColor"===te&&N.instanceColor&&(ae=N.instanceColor));const Se={};Se.attribute=ae,ae&&ae.data&&(Se.data=ae.data),W[te]=Se,Q++}v.attributes=W,v.attributesNum=Q,v.index=G}(N,G,H,W)}else{const Q=!0===$.wireframe;(v.geometry!==G.id||v.program!==H.id||v.wireframe!==Q)&&(v.geometry=G.id,v.program=H.id,v.wireframe=Q,j=!0)}null!==W&&a.update(W,34963),(j||y)&&(y=!1,function E(N,$,H,G){if(!1===h.isWebGL2&&(N.isInstancedMesh||G.isInstancedBufferGeometry)&&null===l.get("ANGLE_instanced_arrays"))return;k();const W=G.attributes,j=H.getAttributes(),Q=$.defaultAttributeValues;for(const J in j){const te=j[J];if(te.location>=0){let ce=W[J];if(void 0===ce&&("instanceMatrix"===J&&N.instanceMatrix&&(ce=N.instanceMatrix),"instanceColor"===J&&N.instanceColor&&(ce=N.instanceColor)),void 0!==ce){const ae=ce.normalized,Se=ce.itemSize,_e=a.get(ce);if(void 0===_e)continue;const Me=_e.buffer,Qe=_e.type,Ie=_e.bytesPerElement;if(ce.isInterleavedBufferAttribute){const Ve=ce.data,Je=Ve.stride,pe=ce.offset;if(Ve.isInstancedInterleavedBuffer){for(let Le=0;Le<te.locationSize;Le++)M(te.location+Le,Ve.meshPerAttribute);!0!==N.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let Le=0;Le<te.locationSize;Le++)D(te.location+Le);c.bindBuffer(34962,Me);for(let Le=0;Le<te.locationSize;Le++)L(te.location+Le,Se/te.locationSize,Qe,ae,Je*Ie,(pe+Se/te.locationSize*Le)*Ie)}else{if(ce.isInstancedBufferAttribute){for(let Ve=0;Ve<te.locationSize;Ve++)M(te.location+Ve,ce.meshPerAttribute);!0!==N.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Ve=0;Ve<te.locationSize;Ve++)D(te.location+Ve);c.bindBuffer(34962,Me);for(let Ve=0;Ve<te.locationSize;Ve++)L(te.location+Ve,Se/te.locationSize,Qe,ae,Se*Ie,Se/te.locationSize*Ve*Ie)}}else if(void 0!==Q){const ae=Q[J];if(void 0!==ae)switch(ae.length){case 2:c.vertexAttrib2fv(te.location,ae);break;case 3:c.vertexAttrib3fv(te.location,ae);break;case 4:c.vertexAttrib4fv(te.location,ae);break;default:c.vertexAttrib1fv(te.location,ae)}}}}A()}(N,$,H,G),null!==W&&c.bindBuffer(34963,a.get(W).buffer))},reset:Z,resetDefaultState:Y,dispose:function V(){Z();for(const N in g){const $=g[N];for(const H in $){const G=$[H];for(const W in G)x(G[W].object),delete G[W];delete $[H]}delete g[N]}},releaseStatesOfGeometry:function z(N){if(void 0===g[N.id])return;const $=g[N.id];for(const H in $){const G=$[H];for(const W in G)x(G[W].object),delete G[W];delete $[H]}delete g[N.id]},releaseStatesOfProgram:function U(N){for(const $ in g){const H=g[$];if(void 0===H[N.id])continue;const G=H[N.id];for(const W in G)x(G[W].object),delete G[W];delete H[N.id]}},initAttributes:k,enableAttribute:D,disableUnusedAttributes:A}}function qgt(c,l,a,h){const d=h.isWebGL2;let f;this.setMode=function p(v){f=v},this.render=function g(v,y){c.drawArrays(f,v,y),a.update(y,f,1)},this.renderInstances=function m(v,y,_){if(0===_)return;let b,C;if(d)b=c,C="drawArraysInstanced";else if(b=l.get("ANGLE_instanced_arrays"),C="drawArraysInstancedANGLE",null===b)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[C](f,v,y,_),a.update(y,f,_)}}function Zgt(c,l,a){let h;function f(L){if("highp"===L){if(c.getShaderPrecisionFormat(35633,36338).precision>0&&c.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";L="mediump"}return"mediump"===L&&c.getShaderPrecisionFormat(35633,36337).precision>0&&c.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const p="undefined"!=typeof WebGL2RenderingContext&&c instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&c instanceof WebGL2ComputeRenderingContext;let g=void 0!==a.precision?a.precision:"highp";const m=f(g);m!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",m,"instead."),g=m);const v=p||l.has("WEBGL_draw_buffers"),y=!0===a.logarithmicDepthBuffer,_=c.getParameter(34930),b=c.getParameter(35660),C=c.getParameter(3379),x=c.getParameter(34076),S=c.getParameter(34921),w=c.getParameter(36347),T=c.getParameter(36348),O=c.getParameter(36349),k=b>0,D=p||l.has("OES_texture_float");return{isWebGL2:p,drawBuffers:v,getMaxAnisotropy:function d(){if(void 0!==h)return h;if(!0===l.has("EXT_texture_filter_anisotropic")){const L=l.get("EXT_texture_filter_anisotropic");h=c.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h},getMaxPrecision:f,precision:g,logarithmicDepthBuffer:y,maxTextures:_,maxVertexTextures:b,maxTextureSize:C,maxCubemapSize:x,maxAttributes:S,maxVertexUniforms:w,maxVaryings:T,maxFragmentUniforms:O,vertexTextures:k,floatFragmentTextures:D,floatVertexTextures:k&&D,maxSamples:p?c.getParameter(36183):0}}function Xgt(c){const l=this;let a=null,h=0,d=!1,f=!1;const p=new gv,g=new rc,m={value:null,needsUpdate:!1};function v(){m.value!==a&&(m.value=a,m.needsUpdate=h>0),l.numPlanes=h,l.numIntersection=0}function y(_,b,C,x){const S=null!==_?_.length:0;let w=null;if(0!==S){if(w=m.value,!0!==x||null===w){const T=C+4*S,O=b.matrixWorldInverse;g.getNormalMatrix(O),(null===w||w.length<T)&&(w=new Float32Array(T));for(let k=0,D=C;k!==S;++k,D+=4)p.copy(_[k]).applyMatrix4(O,g),p.normal.toArray(w,D),w[D+3]=p.constant}m.value=w,m.needsUpdate=!0}return l.numPlanes=S,l.numIntersection=0,w}this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(_,b,C){const x=0!==_.length||b||0!==h||d;return d=b,a=y(_,C,0),h=_.length,x},this.beginShadows=function(){f=!0,y(null)},this.endShadows=function(){f=!1,v()},this.setState=function(_,b,C){const x=_.clippingPlanes,S=_.clipIntersection,w=_.clipShadows,T=c.get(_);if(!d||null===x||0===x.length||f&&!w)f?y(null):v();else{const O=f?0:h,k=4*O;let D=T.clippingState||null;m.value=D,D=y(x,b,k,C);for(let M=0;M!==k;++M)D[M]=a[M];T.clippingState=D,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=O}}}function Ygt(c){let l=new WeakMap;function a(p,g){return 303===g?p.mapping=301:304===g&&(p.mapping=302),p}function d(p){const g=p.target;g.removeEventListener("dispose",d);const m=l.get(g);void 0!==m&&(l.delete(g),m.dispose())}return{get:function h(p){if(p&&p.isTexture&&!1===p.isRenderTargetTexture){const g=p.mapping;if(303===g||304===g){if(l.has(p))return a(l.get(p).texture,p.mapping);{const m=p.image;if(m&&m.height>0){const v=new Gft(m.height/2);return v.fromEquirectangularTexture(c,p),l.set(p,v),p.addEventListener("dispose",d),a(v.texture,p.mapping)}return null}}}return p},dispose:function f(){l=new WeakMap}}}$d.physical={uniforms:ja([$d.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new mt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new hn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new hn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new hn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ir.meshphysical_vert,fragmentShader:ir.meshphysical_frag};class O2 extends d${constructor(l=-1,a=1,h=1,d=-1,f=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=l,this.right=a,this.top=h,this.bottom=d,this.near=f,this.far=p,this.updateProjectionMatrix()}copy(l,a){return super.copy(l,a),this.left=l.left,this.right=l.right,this.top=l.top,this.bottom=l.bottom,this.near=l.near,this.far=l.far,this.zoom=l.zoom,this.view=null===l.view?null:Object.assign({},l.view),this}setViewOffset(l,a,h,d,f,p){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=l,this.view.fullHeight=a,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const l=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let f=h-l,p=h+l,g=d+a,m=d-a;if(null!==this.view&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f+=v*this.view.offsetX,p=f+v*this.view.width,g-=y*this.view.offsetY,m=g-y*this.view.height}this.projectionMatrix.makeOrthographic(f,p,g,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(l){const a=super.toJSON(l);return a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,null!==this.view&&(a.object.view=Object.assign({},this.view)),a}}const Bve=[.125,.215,.35,.446,.526,.582],g$=new O2,Vve=new hn;let m$=null;const vv=(1+Math.sqrt(5))/2,db=1/vv,zve=[new re(1,1,1),new re(-1,1,1),new re(1,1,-1),new re(-1,1,-1),new re(0,vv,db),new re(0,vv,-db),new re(db,0,vv),new re(-db,0,vv),new re(vv,db,0),new re(-vv,db,0)];class Uve{constructor(l){this._renderer=l,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(l,a=0,h=.1,d=100){m$=this._renderer.getRenderTarget(),this._setSize(256);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(l,h,d,f),a>0&&this._blur(f,0,0,a),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(l,a=null){return this._fromTexture(l,a)}fromCubemap(l,a=null){return this._fromTexture(l,a)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Wve(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=$ve(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(l){this._lodMax=Math.floor(Math.log2(l)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let l=0;l<this._lodPlanes.length;l++)this._lodPlanes[l].dispose()}_cleanup(l){this._renderer.setRenderTarget(m$),l.scissorTest=!1,O3(l,0,0,l.width,l.height)}_fromTexture(l,a){this._setSize(301===l.mapping||302===l.mapping?0===l.image.length?16:l.image[0].width||l.image[0].image.width:l.image.width/4),m$=this._renderer.getRenderTarget();const h=a||this._allocateTargets();return this._textureToCubeUV(l,h),this._applyPMREM(h),this._cleanup(h),h}_allocateTargets(){const l=3*Math.max(this._cubeSize,112),a=4*this._cubeSize,h={magFilter:bo,minFilter:bo,generateMipmaps:!1,type:_2,format:Dh,encoding:av,depthBuffer:!1},d=Hve(l,a,h);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==l){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Hve(l,a,h);const{_lodMax:f}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Kgt(c){const l=[],a=[],h=[];let d=c;const f=c-4+1+Bve.length;for(let p=0;p<f;p++){const g=Math.pow(2,d);a.push(g);let m=1/g;p>c-4?m=Bve[p-c+4-1]:0===p&&(m=0),h.push(m);const v=1/(g-2),y=-v,_=1+v,b=[y,y,_,y,_,_,y,y,_,_,y,_],C=6,x=6,S=3,w=2,T=1,O=new Float32Array(S*x*C),k=new Float32Array(w*x*C),D=new Float32Array(T*x*C);for(let A=0;A<C;A++){const L=A%3*2/3-1,E=A>2?0:-1;O.set([L,E,0,L+2/3,E,0,L+2/3,E+1,0,L,E,0,L+2/3,E+1,0,L,E+1,0],S*x*A),k.set(b,w*x*A),D.set([A,A,A,A,A,A],T*x*A)}const M=new Fi;M.setAttribute("position",new Fs(O,S)),M.setAttribute("uv",new Fs(k,w)),M.setAttribute("faceIndex",new Fs(D,T)),l.push(M),d>4&&d--}return{lodPlanes:l,sizeLods:a,sigmas:h}}(f)),this._blurMaterial=function Jgt(c,l,a){const h=new Float32Array(20),d=new re(0,1,0);return new qa({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/l,CUBEUV_TEXEL_HEIGHT:1/a,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:h},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(f,l,a)}return d}_compileMaterial(l){const a=new sr(this._lodPlanes[0],l);this._renderer.compile(a,g$)}_sceneToCubeUV(l,a,h,d){const g=new xo(90,1,a,h),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],y=this._renderer,_=y.autoClear,b=y.toneMapping;y.getClearColor(Vve),y.toneMapping=0,y.autoClear=!1;const C=new oo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),x=new sr(new cp,C);let S=!1;const w=l.background;w?w.isColor&&(C.color.copy(w),l.background=null,S=!0):(C.color.copy(Vve),S=!0);for(let T=0;T<6;T++){const O=T%3;0===O?(g.up.set(0,m[T],0),g.lookAt(v[T],0,0)):1===O?(g.up.set(0,0,m[T]),g.lookAt(0,v[T],0)):(g.up.set(0,m[T],0),g.lookAt(0,0,v[T]));const k=this._cubeSize;O3(d,O*k,T>2?k:0,k,k),y.setRenderTarget(d),S&&y.render(x,g),y.render(l,g)}x.geometry.dispose(),x.material.dispose(),y.toneMapping=b,y.autoClear=_,l.background=w}_textureToCubeUV(l,a){const h=this._renderer,d=301===l.mapping||302===l.mapping;d?(null===this._cubemapMaterial&&(this._cubemapMaterial=Wve()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===l.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=$ve());const f=d?this._cubemapMaterial:this._equirectMaterial,p=new sr(this._lodPlanes[0],f);f.uniforms.envMap.value=l;const m=this._cubeSize;O3(a,0,0,3*m,2*m),h.setRenderTarget(a),h.render(p,g$)}_applyPMREM(l){const a=this._renderer,h=a.autoClear;a.autoClear=!1;for(let d=1;d<this._lodPlanes.length;d++){const f=Math.sqrt(this._sigmas[d]*this._sigmas[d]-this._sigmas[d-1]*this._sigmas[d-1]);this._blur(l,d-1,d,f,zve[(d-1)%zve.length])}a.autoClear=h}_blur(l,a,h,d,f){const p=this._pingPongRenderTarget;this._halfBlur(l,p,a,h,d,"latitudinal",f),this._halfBlur(p,l,h,h,d,"longitudinal",f)}_halfBlur(l,a,h,d,f,p,g){const m=this._renderer,v=this._blurMaterial;"latitudinal"!==p&&"longitudinal"!==p&&console.error("blur direction must be either latitudinal or longitudinal!");const _=new sr(this._lodPlanes[d],v),b=v.uniforms,C=this._sizeLods[h]-1,x=isFinite(f)?Math.PI/(2*C):2*Math.PI/39,S=f/x,w=isFinite(f)?1+Math.floor(3*S):20;w>20&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${w} samples when the maximum is set to 20`);const T=[];let O=0;for(let L=0;L<20;++L){const E=L/S,V=Math.exp(-E*E/2);T.push(V),0===L?O+=V:L<w&&(O+=2*V)}for(let L=0;L<T.length;L++)T[L]=T[L]/O;b.envMap.value=l.texture,b.samples.value=w,b.weights.value=T,b.latitudinal.value="latitudinal"===p,g&&(b.poleAxis.value=g);const{_lodMax:k}=this;b.dTheta.value=x,b.mipInt.value=k-h;const D=this._sizeLods[d];O3(a,3*D*(d>k-4?d-k+4:0),4*(this._cubeSize-D),3*D,2*D),m.setRenderTarget(a),m.render(_,g$)}}function Hve(c,l,a){const h=new kl(c,l,a);return h.texture.mapping=306,h.texture.name="PMREM.cubeUv",h.scissorTest=!0,h}function O3(c,l,a,h,d){c.viewport.set(l,a,h,d),c.scissor.set(l,a,h,d)}function $ve(){return new qa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Wve(){return new qa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function emt(c){let l=new WeakMap,a=null;function f(g){const m=g.target;m.removeEventListener("dispose",f);const v=l.get(m);void 0!==v&&(l.delete(m),v.dispose())}return{get:function h(g){if(g&&g.isTexture){const m=g.mapping,v=303===m||304===m,y=301===m||302===m;if(v||y){if(g.isRenderTargetTexture&&!0===g.needsPMREMUpdate){g.needsPMREMUpdate=!1;let _=l.get(g);return null===a&&(a=new Uve(c)),_=v?a.fromEquirectangular(g,_):a.fromCubemap(g,_),l.set(g,_),_.texture}if(l.has(g))return l.get(g).texture;{const _=g.image;if(v&&_&&_.height>0||y&&_&&function d(g){let m=0;for(let y=0;y<6;y++)void 0!==g[y]&&m++;return 6===m}(_)){null===a&&(a=new Uve(c));const b=v?a.fromEquirectangular(g):a.fromCubemap(g);return l.set(g,b),g.addEventListener("dispose",f),b.texture}return null}}}return g},dispose:function p(){l=new WeakMap,null!==a&&(a.dispose(),a=null)}}}function tmt(c){const l={};function a(h){if(void 0!==l[h])return l[h];let d;switch(h){case"WEBGL_depth_texture":d=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=c.getExtension(h)}return l[h]=d,d}return{has:function(h){return null!==a(h)},init:function(h){h.isWebGL2?a("EXT_color_buffer_float"):(a("WEBGL_depth_texture"),a("OES_texture_float"),a("OES_texture_half_float"),a("OES_texture_half_float_linear"),a("OES_standard_derivatives"),a("OES_element_index_uint"),a("OES_vertex_array_object"),a("ANGLE_instanced_arrays")),a("OES_texture_float_linear"),a("EXT_color_buffer_half_float"),a("WEBGL_multisampled_render_to_texture")},get:function(h){const d=a(h);return null===d&&console.warn("THREE.WebGLRenderer: "+h+" extension not supported."),d}}}function nmt(c,l,a,h){const d={},f=new WeakMap;function p(_){const b=_.target;null!==b.index&&l.remove(b.index);for(const x in b.attributes)l.remove(b.attributes[x]);b.removeEventListener("dispose",p),delete d[b.id];const C=f.get(b);C&&(l.remove(C),f.delete(b)),h.releaseStatesOfGeometry(b),!0===b.isInstancedBufferGeometry&&delete b._maxInstanceCount,a.memory.geometries--}function v(_){const b=[],C=_.index,x=_.attributes.position;let S=0;if(null!==C){const O=C.array;S=C.version;for(let k=0,D=O.length;k<D;k+=3){const M=O[k+0],A=O[k+1],L=O[k+2];b.push(M,A,A,L,L,M)}}else{S=x.version;for(let k=0,D=x.array.length/3-1;k<D;k+=3){const M=k+0,A=k+1,L=k+2;b.push(M,A,A,L,L,M)}}const w=new(bve(b)?Fve:Rve)(b,1);w.version=S;const T=f.get(_);T&&l.remove(T),f.set(_,w)}return{get:function g(_,b){return!0===d[b.id]||(b.addEventListener("dispose",p),d[b.id]=!0,a.memory.geometries++),b},update:function m(_){const b=_.attributes;for(const x in b)l.update(b[x],34962);const C=_.morphAttributes;for(const x in C){const S=C[x];for(let w=0,T=S.length;w<T;w++)l.update(S[w],34962)}},getWireframeAttribute:function y(_){const b=f.get(_);if(b){const C=_.index;null!==C&&b.version<C.version&&v(_)}else v(_);return f.get(_)}}}function imt(c,l,a,h){const d=h.isWebGL2;let f,g,m;this.setMode=function p(b){f=b},this.setIndex=function v(b){g=b.type,m=b.bytesPerElement},this.render=function y(b,C){c.drawElements(f,C,g,b*m),a.update(C,f,1)},this.renderInstances=function _(b,C,x){if(0===x)return;let S,w;if(d)S=c,w="drawElementsInstanced";else if(S=l.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",null===S)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");S[w](f,C,g,b*m,x),a.update(C,f,x)}}function rmt(c){const a={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:a,programs:null,autoReset:!0,reset:function d(){a.frame++,a.calls=0,a.triangles=0,a.points=0,a.lines=0},update:function h(f,p,g){switch(a.calls++,p){case 4:a.triangles+=g*(f/3);break;case 1:a.lines+=g*(f/2);break;case 3:a.lines+=g*(f-1);break;case 2:a.lines+=g*f;break;case 0:a.points+=g*f;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p)}}}}function smt(c,l){return c[0]-l[0]}function omt(c,l){return Math.abs(l[1])-Math.abs(c[1])}function y$(c,l){let a=1;const h=l.isInterleavedBufferAttribute?l.data.array:l.array;h instanceof Int8Array?a=127:h instanceof Uint8Array?a=255:h instanceof Uint16Array?a=65535:h instanceof Int16Array?a=32767:h instanceof Int32Array?a=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",h),c.divideScalar(a)}function amt(c,l,a){const h={},d=new Float32Array(8),f=new WeakMap,p=new ar,g=[];for(let v=0;v<8;v++)g[v]=[v,0];return{update:function m(v,y,_,b){const C=v.morphTargetInfluences;if(!0===l.isWebGL2){const x=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,S=void 0!==x?x.length:0;let w=f.get(y);if(void 0===w||w.count!==S){let $=function(){Y.dispose(),f.delete(y),y.removeEventListener("dispose",$)};void 0!==w&&w.texture.dispose();const k=void 0!==y.morphAttributes.position,D=void 0!==y.morphAttributes.normal,M=void 0!==y.morphAttributes.color,A=y.morphAttributes.position||[],L=y.morphAttributes.normal||[],E=y.morphAttributes.color||[];let V=0;!0===k&&(V=1),!0===D&&(V=2),!0===M&&(V=3);let z=y.attributes.position.count*V,U=1;z>l.maxTextureSize&&(U=Math.ceil(z/l.maxTextureSize),z=l.maxTextureSize);const Z=new Float32Array(z*U*4*S),Y=new j9(Z,z,U,S);Y.type=Gg,Y.needsUpdate=!0;const N=4*V;for(let H=0;H<S;H++){const G=A[H],W=L[H],j=E[H],Q=z*U*4*H;for(let J=0;J<G.count;J++){const te=J*N;!0===k&&(p.fromBufferAttribute(G,J),!0===G.normalized&&y$(p,G),Z[Q+te+0]=p.x,Z[Q+te+1]=p.y,Z[Q+te+2]=p.z,Z[Q+te+3]=0),!0===D&&(p.fromBufferAttribute(W,J),!0===W.normalized&&y$(p,W),Z[Q+te+4]=p.x,Z[Q+te+5]=p.y,Z[Q+te+6]=p.z,Z[Q+te+7]=0),!0===M&&(p.fromBufferAttribute(j,J),!0===j.normalized&&y$(p,j),Z[Q+te+8]=p.x,Z[Q+te+9]=p.y,Z[Q+te+10]=p.z,Z[Q+te+11]=4===j.itemSize?p.w:1)}}w={count:S,texture:Y,size:new mt(z,U)},f.set(y,w),y.addEventListener("dispose",$)}let T=0;for(let k=0;k<C.length;k++)T+=C[k];const O=y.morphTargetsRelative?1:1-T;b.getUniforms().setValue(c,"morphTargetBaseInfluence",O),b.getUniforms().setValue(c,"morphTargetInfluences",C),b.getUniforms().setValue(c,"morphTargetsTexture",w.texture,a),b.getUniforms().setValue(c,"morphTargetsTextureSize",w.size)}else{const x=void 0===C?0:C.length;let S=h[y.id];if(void 0===S||S.length!==x){S=[];for(let D=0;D<x;D++)S[D]=[D,0];h[y.id]=S}for(let D=0;D<x;D++){const M=S[D];M[0]=D,M[1]=C[D]}S.sort(omt);for(let D=0;D<8;D++)D<x&&S[D][1]?(g[D][0]=S[D][0],g[D][1]=S[D][1]):(g[D][0]=Number.MAX_SAFE_INTEGER,g[D][1]=0);g.sort(smt);const w=y.morphAttributes.position,T=y.morphAttributes.normal;let O=0;for(let D=0;D<8;D++){const M=g[D],A=M[0],L=M[1];A!==Number.MAX_SAFE_INTEGER&&L?(w&&y.getAttribute("morphTarget"+D)!==w[A]&&y.setAttribute("morphTarget"+D,w[A]),T&&y.getAttribute("morphNormal"+D)!==T[A]&&y.setAttribute("morphNormal"+D,T[A]),d[D]=L,O+=L):(w&&!0===y.hasAttribute("morphTarget"+D)&&y.deleteAttribute("morphTarget"+D),T&&!0===y.hasAttribute("morphNormal"+D)&&y.deleteAttribute("morphNormal"+D),d[D]=0)}const k=y.morphTargetsRelative?1:1-O;b.getUniforms().setValue(c,"morphTargetBaseInfluence",k),b.getUniforms().setValue(c,"morphTargetInfluences",d)}}}}function lmt(c,l,a,h){let d=new WeakMap;function g(m){const v=m.target;v.removeEventListener("dispose",g),a.remove(v.instanceMatrix),null!==v.instanceColor&&a.remove(v.instanceColor)}return{update:function f(m){const v=h.render.frame,_=l.get(m,m.geometry);return d.get(_)!==v&&(l.update(_),d.set(_,v)),m.isInstancedMesh&&(!1===m.hasEventListener("dispose",g)&&m.addEventListener("dispose",g),a.update(m.instanceMatrix,34962),null!==m.instanceColor&&a.update(m.instanceColor,34962)),_},dispose:function p(){d=new WeakMap}}}const Gve=new Hd,Qve=new j9,jve=new wve,qve=new S3,Zve=[],Xve=[],Yve=new Float32Array(16),Kve=new Float32Array(9),Jve=new Float32Array(4);function fb(c,l,a){const h=c[0];if(h<=0||h>0)return c;const d=l*a;let f=Zve[d];if(void 0===f&&(f=new Float32Array(d),Zve[d]=f),0!==l){h.toArray(f,0);for(let p=1,g=0;p!==l;++p)g+=a,c[p].toArray(f,g)}return f}function Ml(c,l){if(c.length!==l.length)return!1;for(let a=0,h=c.length;a<h;a++)if(c[a]!==l[a])return!1;return!0}function El(c,l){for(let a=0,h=l.length;a<h;a++)c[a]=l[a]}function D3(c,l){let a=Xve[l];void 0===a&&(a=new Int32Array(l),Xve[l]=a);for(let h=0;h!==l;++h)a[h]=c.allocateTextureUnit();return a}function cmt(c,l){const a=this.cache;a[0]!==l&&(c.uniform1f(this.addr,l),a[0]=l)}function umt(c,l){const a=this.cache;if(void 0!==l.x)(a[0]!==l.x||a[1]!==l.y)&&(c.uniform2f(this.addr,l.x,l.y),a[0]=l.x,a[1]=l.y);else{if(Ml(a,l))return;c.uniform2fv(this.addr,l),El(a,l)}}function hmt(c,l){const a=this.cache;if(void 0!==l.x)(a[0]!==l.x||a[1]!==l.y||a[2]!==l.z)&&(c.uniform3f(this.addr,l.x,l.y,l.z),a[0]=l.x,a[1]=l.y,a[2]=l.z);else if(void 0!==l.r)(a[0]!==l.r||a[1]!==l.g||a[2]!==l.b)&&(c.uniform3f(this.addr,l.r,l.g,l.b),a[0]=l.r,a[1]=l.g,a[2]=l.b);else{if(Ml(a,l))return;c.uniform3fv(this.addr,l),El(a,l)}}function dmt(c,l){const a=this.cache;if(void 0!==l.x)(a[0]!==l.x||a[1]!==l.y||a[2]!==l.z||a[3]!==l.w)&&(c.uniform4f(this.addr,l.x,l.y,l.z,l.w),a[0]=l.x,a[1]=l.y,a[2]=l.z,a[3]=l.w);else{if(Ml(a,l))return;c.uniform4fv(this.addr,l),El(a,l)}}function fmt(c,l){const a=this.cache,h=l.elements;if(void 0===h){if(Ml(a,l))return;c.uniformMatrix2fv(this.addr,!1,l),El(a,l)}else{if(Ml(a,h))return;Jve.set(h),c.uniformMatrix2fv(this.addr,!1,Jve),El(a,h)}}function pmt(c,l){const a=this.cache,h=l.elements;if(void 0===h){if(Ml(a,l))return;c.uniformMatrix3fv(this.addr,!1,l),El(a,l)}else{if(Ml(a,h))return;Kve.set(h),c.uniformMatrix3fv(this.addr,!1,Kve),El(a,h)}}function gmt(c,l){const a=this.cache,h=l.elements;if(void 0===h){if(Ml(a,l))return;c.uniformMatrix4fv(this.addr,!1,l),El(a,l)}else{if(Ml(a,h))return;Yve.set(h),c.uniformMatrix4fv(this.addr,!1,Yve),El(a,h)}}function mmt(c,l){const a=this.cache;a[0]!==l&&(c.uniform1i(this.addr,l),a[0]=l)}function vmt(c,l){const a=this.cache;Ml(a,l)||(c.uniform2iv(this.addr,l),El(a,l))}function ymt(c,l){const a=this.cache;Ml(a,l)||(c.uniform3iv(this.addr,l),El(a,l))}function _mt(c,l){const a=this.cache;Ml(a,l)||(c.uniform4iv(this.addr,l),El(a,l))}function bmt(c,l){const a=this.cache;a[0]!==l&&(c.uniform1ui(this.addr,l),a[0]=l)}function Cmt(c,l){const a=this.cache;Ml(a,l)||(c.uniform2uiv(this.addr,l),El(a,l))}function xmt(c,l){const a=this.cache;Ml(a,l)||(c.uniform3uiv(this.addr,l),El(a,l))}function wmt(c,l){const a=this.cache;Ml(a,l)||(c.uniform4uiv(this.addr,l),El(a,l))}function Smt(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.setTexture2D(l||Gve,d)}function Tmt(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.setTexture3D(l||jve,d)}function Omt(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.setTextureCube(l||qve,d)}function Dmt(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.setTexture2DArray(l||Qve,d)}function Mmt(c,l){c.uniform1fv(this.addr,l)}function Emt(c,l){const a=fb(l,this.size,2);c.uniform2fv(this.addr,a)}function Amt(c,l){const a=fb(l,this.size,3);c.uniform3fv(this.addr,a)}function Imt(c,l){const a=fb(l,this.size,4);c.uniform4fv(this.addr,a)}function Pmt(c,l){const a=fb(l,this.size,4);c.uniformMatrix2fv(this.addr,!1,a)}function Rmt(c,l){const a=fb(l,this.size,9);c.uniformMatrix3fv(this.addr,!1,a)}function Fmt(c,l){const a=fb(l,this.size,16);c.uniformMatrix4fv(this.addr,!1,a)}function Nmt(c,l){c.uniform1iv(this.addr,l)}function Lmt(c,l){c.uniform2iv(this.addr,l)}function Bmt(c,l){c.uniform3iv(this.addr,l)}function Vmt(c,l){c.uniform4iv(this.addr,l)}function zmt(c,l){c.uniform1uiv(this.addr,l)}function Umt(c,l){c.uniform2uiv(this.addr,l)}function Hmt(c,l){c.uniform3uiv(this.addr,l)}function $mt(c,l){c.uniform4uiv(this.addr,l)}function Wmt(c,l,a){const h=l.length,d=D3(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.setTexture2D(l[f]||Gve,d[f])}function Gmt(c,l,a){const h=l.length,d=D3(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.setTexture3D(l[f]||jve,d[f])}function Qmt(c,l,a){const h=l.length,d=D3(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.setTextureCube(l[f]||qve,d[f])}function jmt(c,l,a){const h=l.length,d=D3(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.setTexture2DArray(l[f]||Qve,d[f])}class Zmt{constructor(l,a,h){this.id=l,this.addr=h,this.cache=[],this.setValue=function kmt(c){switch(c){case 5126:return cmt;case 35664:return umt;case 35665:return hmt;case 35666:return dmt;case 35674:return fmt;case 35675:return pmt;case 35676:return gmt;case 5124:case 35670:return mmt;case 35667:case 35671:return vmt;case 35668:case 35672:return ymt;case 35669:case 35673:return _mt;case 5125:return bmt;case 36294:return Cmt;case 36295:return xmt;case 36296:return wmt;case 35678:case 36198:case 36298:case 36306:case 35682:return Smt;case 35679:case 36299:case 36307:return Tmt;case 35680:case 36300:case 36308:case 36293:return Omt;case 36289:case 36303:case 36311:case 36292:return Dmt}}(a.type)}}class Xmt{constructor(l,a,h){this.id=l,this.addr=h,this.cache=[],this.size=a.size,this.setValue=function qmt(c){switch(c){case 5126:return Mmt;case 35664:return Emt;case 35665:return Amt;case 35666:return Imt;case 35674:return Pmt;case 35675:return Rmt;case 35676:return Fmt;case 5124:case 35670:return Nmt;case 35667:case 35671:return Lmt;case 35668:case 35672:return Bmt;case 35669:case 35673:return Vmt;case 5125:return zmt;case 36294:return Umt;case 36295:return Hmt;case 36296:return $mt;case 35678:case 36198:case 36298:case 36306:case 35682:return Wmt;case 35679:case 36299:case 36307:return Gmt;case 35680:case 36300:case 36308:case 36293:return Qmt;case 36289:case 36303:case 36311:case 36292:return jmt}}(a.type)}}class Ymt{constructor(l){this.id=l,this.seq=[],this.map={}}setValue(l,a,h){const d=this.seq;for(let f=0,p=d.length;f!==p;++f){const g=d[f];g.setValue(l,a[g.id],h)}}}const _$=/(\w+)(\])?(\[|\.)?/g;function eye(c,l){c.seq.push(l),c.map[l.id]=l}function Kmt(c,l,a){const h=c.name,d=h.length;for(_$.lastIndex=0;;){const f=_$.exec(h),p=_$.lastIndex;let g=f[1];const v=f[3];if("]"===f[2]&&(g|=0),void 0===v||"["===v&&p+2===d){eye(a,void 0===v?new Zmt(g,c,l):new Xmt(g,c,l));break}{let _=a.map[g];void 0===_&&(_=new Ymt(g),eye(a,_)),a=_}}}class k3{constructor(l,a){this.seq=[],this.map={};const h=l.getProgramParameter(a,35718);for(let d=0;d<h;++d){const f=l.getActiveUniform(a,d);Kmt(f,l.getUniformLocation(a,f.name),this)}}setValue(l,a,h,d){const f=this.map[a];void 0!==f&&f.setValue(l,h,d)}setOptional(l,a,h){const d=a[h];void 0!==d&&this.setValue(l,h,d)}static upload(l,a,h,d){for(let f=0,p=a.length;f!==p;++f){const g=a[f],m=h[g.id];!1!==m.needsUpdate&&g.setValue(l,m.value,d)}}static seqWithValue(l,a){const h=[];for(let d=0,f=l.length;d!==f;++d){const p=l[d];p.id in a&&h.push(p)}return h}}function tye(c,l,a){const h=c.createShader(l);return c.shaderSource(h,a),c.compileShader(h),h}let Jmt=0;function nye(c,l,a){const h=c.getShaderParameter(l,35713),d=c.getShaderInfoLog(l).trim();if(h&&""===d)return"";const f=/ERROR: 0:(\d+)/.exec(d);if(f){const p=parseInt(f[1]);return a.toUpperCase()+"\n\n"+d+"\n\n"+function e0t(c,l){const a=c.split("\n"),h=[],d=Math.max(l-6,0),f=Math.min(l+6,a.length);for(let p=d;p<f;p++){const g=p+1;h.push(`${g===l?">":" "} ${g}: ${a[p]}`)}return h.join("\n")}(c.getShaderSource(l),p)}return d}function n0t(c,l){const a=function t0t(c){switch(c){case av:return["Linear","( value )"];case Rs:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",c),["Linear","( value )"]}}(l);return"vec4 "+c+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function i0t(c,l){let a;switch(l){case 1:a="Linear";break;case 2:a="Reinhard";break;case 3:a="OptimizedCineon";break;case 4:a="ACESFilmic";break;case 5:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",l),a="Linear"}return"vec3 "+c+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function D2(c){return""!==c}function iye(c,l){return c.replace(/NUM_DIR_LIGHTS/g,l.numDirLights).replace(/NUM_SPOT_LIGHTS/g,l.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,l.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,l.numPointLights).replace(/NUM_HEMI_LIGHTS/g,l.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,l.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,l.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,l.numPointLightShadows)}function rye(c,l){return c.replace(/NUM_CLIPPING_PLANES/g,l.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,l.numClippingPlanes-l.numClipIntersection)}const a0t=/^[ \t]*#include +<([\w\d./]+)>/gm;function b$(c){return c.replace(a0t,l0t)}function l0t(c,l){const a=ir[l];if(void 0===a)throw new Error("Can not resolve #include <"+l+">");return b$(a)}const c0t=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,u0t=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sye(c){return c.replace(u0t,oye).replace(c0t,h0t)}function h0t(c,l,a,h){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),oye(0,l,a,h)}function oye(c,l,a,h){let d="";for(let f=parseInt(l);f<parseInt(a);f++)d+=h.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return d}function aye(c){let l="precision "+c.precision+" float;\nprecision "+c.precision+" int;";return"highp"===c.precision?l+="\n#define HIGH_PRECISION":"mediump"===c.precision?l+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(l+="\n#define LOW_PRECISION"),l}function v0t(c,l,a,h){const d=c.getContext(),f=a.defines;let p=a.vertexShader,g=a.fragmentShader;const m=function d0t(c){let l="SHADOWMAP_TYPE_BASIC";return 1===c.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===c.shadowMapType?l="SHADOWMAP_TYPE_PCF_SOFT":3===c.shadowMapType&&(l="SHADOWMAP_TYPE_VSM"),l}(a),v=function f0t(c){let l="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case 301:case 302:l="ENVMAP_TYPE_CUBE";break;case 306:l="ENVMAP_TYPE_CUBE_UV"}return l}(a),y=function p0t(c){let l="ENVMAP_MODE_REFLECTION";return c.envMap&&302===c.envMapMode&&(l="ENVMAP_MODE_REFRACTION"),l}(a),_=function g0t(c){let l="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case 0:l="ENVMAP_BLENDING_MULTIPLY";break;case 1:l="ENVMAP_BLENDING_MIX";break;case 2:l="ENVMAP_BLENDING_ADD"}return l}(a),b=function m0t(c){const l=c.envMapCubeUVHeight;if(null===l)return null;const a=Math.log2(l)-2,h=1/l;return{texelWidth:1/(3*Math.max(Math.pow(2,a),112)),texelHeight:h,maxMip:a}}(a),C=a.isWebGL2?"":function r0t(c){return[c.extensionDerivatives||c.envMapCubeUVHeight||c.bumpMap||c.tangentSpaceNormalMap||c.clearcoatNormalMap||c.flatShading||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(D2).join("\n")}(a),x=function s0t(c){const l=[];for(const a in c){const h=c[a];!1!==h&&l.push("#define "+a+" "+h)}return l.join("\n")}(f),S=d.createProgram();let w,T,O=a.glslVersion?"#version "+a.glslVersion+"\n":"";a.isRawShaderMaterial?(w=[x].filter(D2).join("\n"),w.length>0&&(w+="\n"),T=[C,x].filter(D2).join("\n"),T.length>0&&(T+="\n")):(w=[aye(a),"#define SHADER_NAME "+a.shaderName,x,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"",a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+y:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.morphColors&&a.isWebGL2?"#define USE_MORPHCOLORS":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+a.morphTextureStride:"",a.morphTargetsCount>0&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+m:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(D2).join("\n"),T=[C,aye(a),"#define SHADER_NAME "+a.shaderName,x,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+v:"",a.envMap?"#define "+y:"",a.envMap?"#define "+_:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.iridescence?"#define USE_IRIDESCENCE":"",a.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",a.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+m:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?ir.tonemapping_pars_fragment:"",0!==a.toneMapping?i0t("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.opaque?"#define OPAQUE":"",ir.encodings_pars_fragment,n0t("linearToOutputTexel",a.outputEncoding),a.useDepthPacking?"#define DEPTH_PACKING "+a.depthPacking:"","\n"].filter(D2).join("\n")),p=b$(p),p=iye(p,a),p=rye(p,a),g=b$(g),g=iye(g,a),g=rye(g,a),p=sye(p),g=sye(g),a.isWebGL2&&!0!==a.isRawShaderMaterial&&(O="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,T=["#define varying in","300 es"===a.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===a.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+T);const D=O+T+g,M=tye(d,35633,O+w+p),A=tye(d,35632,D);if(d.attachShader(S,M),d.attachShader(S,A),void 0!==a.index0AttributeName?d.bindAttribLocation(S,0,a.index0AttributeName):!0===a.morphTargets&&d.bindAttribLocation(S,0,"position"),d.linkProgram(S),c.debug.checkShaderErrors){const V=d.getProgramInfoLog(S).trim(),z=d.getShaderInfoLog(M).trim(),U=d.getShaderInfoLog(A).trim();let Z=!0,Y=!0;if(!1===d.getProgramParameter(S,35714)){Z=!1;const N=nye(d,M,"vertex"),$=nye(d,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(S,35715)+"\n\nProgram Info Log: "+V+"\n"+N+"\n"+$)}else""!==V?console.warn("THREE.WebGLProgram: Program Info Log:",V):(""===z||""===U)&&(Y=!1);Y&&(this.diagnostics={runnable:Z,programLog:V,vertexShader:{log:z,prefix:w},fragmentShader:{log:U,prefix:T}})}let L,E;return d.deleteShader(M),d.deleteShader(A),this.getUniforms=function(){return void 0===L&&(L=new k3(d,S)),L},this.getAttributes=function(){return void 0===E&&(E=function o0t(c,l){const a={},h=c.getProgramParameter(l,35721);for(let d=0;d<h;d++){const f=c.getActiveAttrib(l,d),p=f.name;let g=1;35674===f.type&&(g=2),35675===f.type&&(g=3),35676===f.type&&(g=4),a[p]={type:f.type,location:c.getAttribLocation(l,p),locationSize:g}}return a}(d,S)),E},this.destroy=function(){h.releaseStatesOfProgram(this),d.deleteProgram(S),this.program=void 0},this.name=a.shaderName,this.id=Jmt++,this.cacheKey=l,this.usedTimes=1,this.program=S,this.vertexShader=M,this.fragmentShader=A,this}let y0t=0;class _0t{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(l){const h=l.fragmentShader,d=this._getShaderStage(l.vertexShader),f=this._getShaderStage(h),p=this._getShaderCacheForMaterial(l);return!1===p.has(d)&&(p.add(d),d.usedTimes++),!1===p.has(f)&&(p.add(f),f.usedTimes++),this}remove(l){const a=this.materialCache.get(l);for(const h of a)h.usedTimes--,0===h.usedTimes&&this.shaderCache.delete(h.code);return this.materialCache.delete(l),this}getVertexShaderID(l){return this._getShaderStage(l.vertexShader).id}getFragmentShaderID(l){return this._getShaderStage(l.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(l){const a=this.materialCache;return!1===a.has(l)&&a.set(l,new Set),a.get(l)}_getShaderStage(l){const a=this.shaderCache;if(!1===a.has(l)){const h=new b0t(l);a.set(l,h)}return a.get(l)}}class b0t{constructor(l){this.id=y0t++,this.code=l,this.usedTimes=0}}function C0t(c,l,a,h,d,f,p){const g=new t$,m=new _0t,v=[],y=d.isWebGL2,_=d.logarithmicDepthBuffer,b=d.vertexTextures;let C=d.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function S(E,V,z,U,Z){const Y=U.fog,N=Z.geometry,H=(E.isMeshStandardMaterial?a:l).get(E.envMap||(E.isMeshStandardMaterial?U.environment:null)),G=H&&306===H.mapping?H.image.height:null,W=x[E.type];null!==E.precision&&(C=d.getMaxPrecision(E.precision),C!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",C,"instead."));const j=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,Q=void 0!==j?j.length:0;let te,ce,ae,Se,J=0;if(void 0!==N.morphAttributes.position&&(J=1),void 0!==N.morphAttributes.normal&&(J=2),void 0!==N.morphAttributes.color&&(J=3),W){const Je=$d[W];te=Je.vertexShader,ce=Je.fragmentShader}else te=E.vertexShader,ce=E.fragmentShader,m.update(E),ae=m.getVertexShaderID(E),Se=m.getFragmentShaderID(E);const _e=c.getRenderTarget(),Qe=E.clearcoat>0,Ie=E.iridescence>0;return{isWebGL2:y,shaderID:W,shaderName:E.type,vertexShader:te,fragmentShader:ce,defines:E.defines,customVertexShaderID:ae,customFragmentShaderID:Se,isRawShaderMaterial:!0===E.isRawShaderMaterial,glslVersion:E.glslVersion,precision:C,instancing:!0===Z.isInstancedMesh,instancingColor:!0===Z.isInstancedMesh&&null!==Z.instanceColor,supportsVertexTextures:b,outputEncoding:null===_e?c.outputEncoding:!0===_e.isXRRenderTarget?_e.texture.encoding:av,map:!!E.map,matcap:!!E.matcap,envMap:!!H,envMapMode:H&&H.mapping,envMapCubeUVHeight:G,lightMap:!!E.lightMap,aoMap:!!E.aoMap,emissiveMap:!!E.emissiveMap,bumpMap:!!E.bumpMap,normalMap:!!E.normalMap,objectSpaceNormalMap:1===E.normalMapType,tangentSpaceNormalMap:0===E.normalMapType,decodeVideoTexture:!!E.map&&!0===E.map.isVideoTexture&&E.map.encoding===Rs,clearcoat:Qe,clearcoatMap:Qe&&!!E.clearcoatMap,clearcoatRoughnessMap:Qe&&!!E.clearcoatRoughnessMap,clearcoatNormalMap:Qe&&!!E.clearcoatNormalMap,iridescence:Ie,iridescenceMap:Ie&&!!E.iridescenceMap,iridescenceThicknessMap:Ie&&!!E.iridescenceThicknessMap,displacementMap:!!E.displacementMap,roughnessMap:!!E.roughnessMap,metalnessMap:!!E.metalnessMap,specularMap:!!E.specularMap,specularIntensityMap:!!E.specularIntensityMap,specularColorMap:!!E.specularColorMap,opaque:!1===E.transparent&&1===E.blending,alphaMap:!!E.alphaMap,alphaTest:E.alphaTest>0,gradientMap:!!E.gradientMap,sheen:E.sheen>0,sheenColorMap:!!E.sheenColorMap,sheenRoughnessMap:!!E.sheenRoughnessMap,transmission:E.transmission>0,transmissionMap:!!E.transmissionMap,thicknessMap:!!E.thicknessMap,combine:E.combine,vertexTangents:!!E.normalMap&&!!N.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:!0===E.vertexColors&&!!N.attributes.color&&4===N.attributes.color.itemSize,vertexUvs:!!(E.map||E.bumpMap||E.normalMap||E.specularMap||E.alphaMap||E.emissiveMap||E.roughnessMap||E.metalnessMap||E.clearcoatMap||E.clearcoatRoughnessMap||E.clearcoatNormalMap||E.iridescenceMap||E.iridescenceThicknessMap||E.displacementMap||E.transmissionMap||E.thicknessMap||E.specularIntensityMap||E.specularColorMap||E.sheenColorMap||E.sheenRoughnessMap),uvsVertexOnly:!(E.map||E.bumpMap||E.normalMap||E.specularMap||E.alphaMap||E.emissiveMap||E.roughnessMap||E.metalnessMap||E.clearcoatNormalMap||E.iridescenceMap||E.iridescenceThicknessMap||E.transmission>0||E.transmissionMap||E.thicknessMap||E.specularIntensityMap||E.specularColorMap||E.sheen>0||E.sheenColorMap||E.sheenRoughnessMap||!E.displacementMap),fog:!!Y,useFog:!0===E.fog,fogExp2:Y&&Y.isFogExp2,flatShading:!!E.flatShading,sizeAttenuation:E.sizeAttenuation,logarithmicDepthBuffer:_,skinning:!0===Z.isSkinnedMesh,morphTargets:void 0!==N.morphAttributes.position,morphNormals:void 0!==N.morphAttributes.normal,morphColors:void 0!==N.morphAttributes.color,morphTargetsCount:Q,morphTextureStride:J,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:E.dithering,shadowMapEnabled:c.shadowMap.enabled&&z.length>0,shadowMapType:c.shadowMap.type,toneMapping:E.toneMapped?c.toneMapping:0,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:2===E.side,flipSided:1===E.side,useDepthPacking:!!E.depthPacking,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:E.extensions&&E.extensions.derivatives,extensionFragDepth:E.extensions&&E.extensions.fragDepth,extensionDrawBuffers:E.extensions&&E.extensions.drawBuffers,extensionShaderTextureLOD:E.extensions&&E.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||h.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}},getProgramCacheKey:function w(E){const V=[];if(E.shaderID?V.push(E.shaderID):(V.push(E.customVertexShaderID),V.push(E.customFragmentShaderID)),void 0!==E.defines)for(const z in E.defines)V.push(z),V.push(E.defines[z]);return!1===E.isRawShaderMaterial&&(function T(E,V){E.push(V.precision),E.push(V.outputEncoding),E.push(V.envMapMode),E.push(V.envMapCubeUVHeight),E.push(V.combine),E.push(V.vertexUvs),E.push(V.fogExp2),E.push(V.sizeAttenuation),E.push(V.morphTargetsCount),E.push(V.morphAttributeCount),E.push(V.numDirLights),E.push(V.numPointLights),E.push(V.numSpotLights),E.push(V.numHemiLights),E.push(V.numRectAreaLights),E.push(V.numDirLightShadows),E.push(V.numPointLightShadows),E.push(V.numSpotLightShadows),E.push(V.shadowMapType),E.push(V.toneMapping),E.push(V.numClippingPlanes),E.push(V.numClipIntersection),E.push(V.depthPacking)}(V,E),function O(E,V){g.disableAll(),V.isWebGL2&&g.enable(0),V.supportsVertexTextures&&g.enable(1),V.instancing&&g.enable(2),V.instancingColor&&g.enable(3),V.map&&g.enable(4),V.matcap&&g.enable(5),V.envMap&&g.enable(6),V.lightMap&&g.enable(7),V.aoMap&&g.enable(8),V.emissiveMap&&g.enable(9),V.bumpMap&&g.enable(10),V.normalMap&&g.enable(11),V.objectSpaceNormalMap&&g.enable(12),V.tangentSpaceNormalMap&&g.enable(13),V.clearcoat&&g.enable(14),V.clearcoatMap&&g.enable(15),V.clearcoatRoughnessMap&&g.enable(16),V.clearcoatNormalMap&&g.enable(17),V.iridescence&&g.enable(18),V.iridescenceMap&&g.enable(19),V.iridescenceThicknessMap&&g.enable(20),V.displacementMap&&g.enable(21),V.specularMap&&g.enable(22),V.roughnessMap&&g.enable(23),V.metalnessMap&&g.enable(24),V.gradientMap&&g.enable(25),V.alphaMap&&g.enable(26),V.alphaTest&&g.enable(27),V.vertexColors&&g.enable(28),V.vertexAlphas&&g.enable(29),V.vertexUvs&&g.enable(30),V.vertexTangents&&g.enable(31),V.uvsVertexOnly&&g.enable(32),V.fog&&g.enable(33),E.push(g.mask),g.disableAll(),V.useFog&&g.enable(0),V.flatShading&&g.enable(1),V.logarithmicDepthBuffer&&g.enable(2),V.skinning&&g.enable(3),V.morphTargets&&g.enable(4),V.morphNormals&&g.enable(5),V.morphColors&&g.enable(6),V.premultipliedAlpha&&g.enable(7),V.shadowMapEnabled&&g.enable(8),V.physicallyCorrectLights&&g.enable(9),V.doubleSided&&g.enable(10),V.flipSided&&g.enable(11),V.useDepthPacking&&g.enable(12),V.dithering&&g.enable(13),V.specularIntensityMap&&g.enable(14),V.specularColorMap&&g.enable(15),V.transmission&&g.enable(16),V.transmissionMap&&g.enable(17),V.thicknessMap&&g.enable(18),V.sheen&&g.enable(19),V.sheenColorMap&&g.enable(20),V.sheenRoughnessMap&&g.enable(21),V.decodeVideoTexture&&g.enable(22),V.opaque&&g.enable(23),E.push(g.mask)}(V,E),V.push(c.outputEncoding)),V.push(E.customProgramCacheKey),V.join()},getUniforms:function k(E){const V=x[E.type];let z;return z=V?w3.clone($d[V].uniforms):E.uniforms,z},acquireProgram:function D(E,V){let z;for(let U=0,Z=v.length;U<Z;U++){const Y=v[U];if(Y.cacheKey===V){z=Y,++z.usedTimes;break}}return void 0===z&&(z=new v0t(c,V,E,f),v.push(z)),z},releaseProgram:function M(E){if(0==--E.usedTimes){const V=v.indexOf(E);v[V]=v[v.length-1],v.pop(),E.destroy()}},releaseShaderCache:function A(E){m.remove(E)},programs:v,dispose:function L(){m.dispose()}}}function x0t(){let c=new WeakMap;return{get:function l(f){let p=c.get(f);return void 0===p&&(p={},c.set(f,p)),p},remove:function a(f){c.delete(f)},update:function h(f,p,g){c.get(f)[p]=g},dispose:function d(){c=new WeakMap}}}function w0t(c,l){return c.groupOrder!==l.groupOrder?c.groupOrder-l.groupOrder:c.renderOrder!==l.renderOrder?c.renderOrder-l.renderOrder:c.material.id!==l.material.id?c.material.id-l.material.id:c.z!==l.z?c.z-l.z:c.id-l.id}function lye(c,l){return c.groupOrder!==l.groupOrder?c.groupOrder-l.groupOrder:c.renderOrder!==l.renderOrder?c.renderOrder-l.renderOrder:c.z!==l.z?l.z-c.z:c.id-l.id}function cye(){const c=[];let l=0;const a=[],h=[],d=[];function p(_,b,C,x,S,w){let T=c[l];return void 0===T?(T={id:_.id,object:_,geometry:b,material:C,groupOrder:x,renderOrder:_.renderOrder,z:S,group:w},c[l]=T):(T.id=_.id,T.object=_,T.geometry=b,T.material=C,T.groupOrder=x,T.renderOrder=_.renderOrder,T.z=S,T.group=w),l++,T}return{opaque:a,transmissive:h,transparent:d,init:function f(){l=0,a.length=0,h.length=0,d.length=0},push:function g(_,b,C,x,S,w){const T=p(_,b,C,x,S,w);C.transmission>0?h.push(T):!0===C.transparent?d.push(T):a.push(T)},unshift:function m(_,b,C,x,S,w){const T=p(_,b,C,x,S,w);C.transmission>0?h.unshift(T):!0===C.transparent?d.unshift(T):a.unshift(T)},finish:function y(){for(let _=l,b=c.length;_<b;_++){const C=c[_];if(null===C.id)break;C.id=null,C.object=null,C.geometry=null,C.material=null,C.group=null}},sort:function v(_,b){a.length>1&&a.sort(_||w0t),h.length>1&&h.sort(b||lye),d.length>1&&d.sort(b||lye)}}}function S0t(){let c=new WeakMap;return{get:function l(h,d){let f;return!1===c.has(h)?(f=new cye,c.set(h,[f])):d>=c.get(h).length?(f=new cye,c.get(h).push(f)):f=c.get(h)[d],f},dispose:function a(){c=new WeakMap}}}function T0t(){const c={};return{get:function(l){if(void 0!==c[l.id])return c[l.id];let a;switch(l.type){case"DirectionalLight":a={direction:new re,color:new hn};break;case"SpotLight":a={position:new re,direction:new re,color:new hn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new re,color:new hn,distance:0,decay:0};break;case"HemisphereLight":a={direction:new re,skyColor:new hn,groundColor:new hn};break;case"RectAreaLight":a={color:new hn,position:new re,halfWidth:new re,halfHeight:new re}}return c[l.id]=a,a}}}let D0t=0;function k0t(c,l){return(l.castShadow?1:0)-(c.castShadow?1:0)}function M0t(c,l){const a=new T0t,h=function O0t(){const c={};return{get:function(l){if(void 0!==c[l.id])return c[l.id];let a;switch(l.type){case"DirectionalLight":case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt,shadowCameraNear:1,shadowCameraFar:1e3}}return c[l.id]=a,a}}}(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let y=0;y<9;y++)d.probe.push(new re);const f=new re,p=new bi,g=new bi;return{setup:function m(y,_){let b=0,C=0,x=0;for(let V=0;V<9;V++)d.probe[V].set(0,0,0);let S=0,w=0,T=0,O=0,k=0,D=0,M=0,A=0;y.sort(k0t);const L=!0!==_?Math.PI:1;for(let V=0,z=y.length;V<z;V++){const U=y[V],Z=U.color,Y=U.intensity,N=U.distance,$=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)b+=Z.r*Y*L,C+=Z.g*Y*L,x+=Z.b*Y*L;else if(U.isLightProbe)for(let H=0;H<9;H++)d.probe[H].addScaledVector(U.sh.coefficients[H],Y);else if(U.isDirectionalLight){const H=a.get(U);if(H.color.copy(U.color).multiplyScalar(U.intensity*L),U.castShadow){const G=U.shadow,W=h.get(U);W.shadowBias=G.bias,W.shadowNormalBias=G.normalBias,W.shadowRadius=G.radius,W.shadowMapSize=G.mapSize,d.directionalShadow[S]=W,d.directionalShadowMap[S]=$,d.directionalShadowMatrix[S]=U.shadow.matrix,D++}d.directional[S]=H,S++}else if(U.isSpotLight){const H=a.get(U);if(H.position.setFromMatrixPosition(U.matrixWorld),H.color.copy(Z).multiplyScalar(Y*L),H.distance=N,H.coneCos=Math.cos(U.angle),H.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),H.decay=U.decay,U.castShadow){const G=U.shadow,W=h.get(U);W.shadowBias=G.bias,W.shadowNormalBias=G.normalBias,W.shadowRadius=G.radius,W.shadowMapSize=G.mapSize,d.spotShadow[T]=W,d.spotShadowMap[T]=$,d.spotShadowMatrix[T]=U.shadow.matrix,A++}d.spot[T]=H,T++}else if(U.isRectAreaLight){const H=a.get(U);H.color.copy(Z).multiplyScalar(Y),H.halfWidth.set(.5*U.width,0,0),H.halfHeight.set(0,.5*U.height,0),d.rectArea[O]=H,O++}else if(U.isPointLight){const H=a.get(U);if(H.color.copy(U.color).multiplyScalar(U.intensity*L),H.distance=U.distance,H.decay=U.decay,U.castShadow){const G=U.shadow,W=h.get(U);W.shadowBias=G.bias,W.shadowNormalBias=G.normalBias,W.shadowRadius=G.radius,W.shadowMapSize=G.mapSize,W.shadowCameraNear=G.camera.near,W.shadowCameraFar=G.camera.far,d.pointShadow[w]=W,d.pointShadowMap[w]=$,d.pointShadowMatrix[w]=U.shadow.matrix,M++}d.point[w]=H,w++}else if(U.isHemisphereLight){const H=a.get(U);H.skyColor.copy(U.color).multiplyScalar(Y*L),H.groundColor.copy(U.groundColor).multiplyScalar(Y*L),d.hemi[k]=H,k++}}O>0&&(l.isWebGL2||!0===c.has("OES_texture_float_linear")?(d.rectAreaLTC1=un.LTC_FLOAT_1,d.rectAreaLTC2=un.LTC_FLOAT_2):!0===c.has("OES_texture_half_float_linear")?(d.rectAreaLTC1=un.LTC_HALF_1,d.rectAreaLTC2=un.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=b,d.ambient[1]=C,d.ambient[2]=x;const E=d.hash;(E.directionalLength!==S||E.pointLength!==w||E.spotLength!==T||E.rectAreaLength!==O||E.hemiLength!==k||E.numDirectionalShadows!==D||E.numPointShadows!==M||E.numSpotShadows!==A)&&(d.directional.length=S,d.spot.length=T,d.rectArea.length=O,d.point.length=w,d.hemi.length=k,d.directionalShadow.length=D,d.directionalShadowMap.length=D,d.pointShadow.length=M,d.pointShadowMap.length=M,d.spotShadow.length=A,d.spotShadowMap.length=A,d.directionalShadowMatrix.length=D,d.pointShadowMatrix.length=M,d.spotShadowMatrix.length=A,E.directionalLength=S,E.pointLength=w,E.spotLength=T,E.rectAreaLength=O,E.hemiLength=k,E.numDirectionalShadows=D,E.numPointShadows=M,E.numSpotShadows=A,d.version=D0t++)},setupView:function v(y,_){let b=0,C=0,x=0,S=0,w=0;const T=_.matrixWorldInverse;for(let O=0,k=y.length;O<k;O++){const D=y[O];if(D.isDirectionalLight){const M=d.directional[b];M.direction.setFromMatrixPosition(D.matrixWorld),f.setFromMatrixPosition(D.target.matrixWorld),M.direction.sub(f),M.direction.transformDirection(T),b++}else if(D.isSpotLight){const M=d.spot[x];M.position.setFromMatrixPosition(D.matrixWorld),M.position.applyMatrix4(T),M.direction.setFromMatrixPosition(D.matrixWorld),f.setFromMatrixPosition(D.target.matrixWorld),M.direction.sub(f),M.direction.transformDirection(T),x++}else if(D.isRectAreaLight){const M=d.rectArea[S];M.position.setFromMatrixPosition(D.matrixWorld),M.position.applyMatrix4(T),g.identity(),p.copy(D.matrixWorld),p.premultiply(T),g.extractRotation(p),M.halfWidth.set(.5*D.width,0,0),M.halfHeight.set(0,.5*D.height,0),M.halfWidth.applyMatrix4(g),M.halfHeight.applyMatrix4(g),S++}else if(D.isPointLight){const M=d.point[C];M.position.setFromMatrixPosition(D.matrixWorld),M.position.applyMatrix4(T),C++}else if(D.isHemisphereLight){const M=d.hemi[w];M.direction.setFromMatrixPosition(D.matrixWorld),M.direction.transformDirection(T),w++}}},state:d}}function uye(c,l){const a=new M0t(c,l),h=[],d=[];return{init:function f(){h.length=0,d.length=0},state:{lightsArray:h,shadowsArray:d,lights:a},setupLights:function m(_){a.setup(h,_)},setupLightsView:function v(_){a.setupView(h,_)},pushLight:function p(_){h.push(_)},pushShadow:function g(_){d.push(_)}}}function E0t(c,l){let a=new WeakMap;return{get:function h(f,p=0){let g;return!1===a.has(f)?(g=new uye(c,l),a.set(f,[g])):p>=a.get(f).length?(g=new uye(c,l),a.get(f).push(g)):g=a.get(f)[p],g},dispose:function d(){a=new WeakMap}}}class C$ extends pv{constructor(l){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(l)}copy(l){return super.copy(l),this.depthPacking=l.depthPacking,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this}}class hye extends pv{constructor(l){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new re,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(l)}copy(l){return super.copy(l),this.referencePosition.copy(l.referencePosition),this.nearDistance=l.nearDistance,this.farDistance=l.farDistance,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this}}function P0t(c,l,a){let h=new p$;const d=new mt,f=new mt,p=new ar,g=new C$({depthPacking:3201}),m=new hye,v={},y=a.maxTextureSize,_={0:1,1:0,2:2},b=new qa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),C=b.clone();C.defines.HORIZONTAL_PASS=1;const x=new Fi;x.setAttribute("position",new Fs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new sr(x,b),w=this;function T(D,M){const A=l.update(S);b.defines.VSM_SAMPLES!==D.blurSamples&&(b.defines.VSM_SAMPLES=D.blurSamples,C.defines.VSM_SAMPLES=D.blurSamples,b.needsUpdate=!0,C.needsUpdate=!0),null===D.mapPass&&(D.mapPass=new kl(d.x,d.y)),b.uniforms.shadow_pass.value=D.map.texture,b.uniforms.resolution.value=D.mapSize,b.uniforms.radius.value=D.radius,c.setRenderTarget(D.mapPass),c.clear(),c.renderBufferDirect(M,null,A,b,S,null),C.uniforms.shadow_pass.value=D.mapPass.texture,C.uniforms.resolution.value=D.mapSize,C.uniforms.radius.value=D.radius,c.setRenderTarget(D.map),c.clear(),c.renderBufferDirect(M,null,A,C,S,null)}function O(D,M,A,L,E,V){let z=null;const U=!0===A.isPointLight?D.customDistanceMaterial:D.customDepthMaterial;if(z=void 0!==U?U:!0===A.isPointLight?m:g,c.localClippingEnabled&&!0===M.clipShadows&&Array.isArray(M.clippingPlanes)&&0!==M.clippingPlanes.length||M.displacementMap&&0!==M.displacementScale||M.alphaMap&&M.alphaTest>0){const Z=z.uuid,Y=M.uuid;let N=v[Z];void 0===N&&(N={},v[Z]=N);let $=N[Y];void 0===$&&($=z.clone(),N[Y]=$),z=$}return z.visible=M.visible,z.wireframe=M.wireframe,z.side=3===V?null!==M.shadowSide?M.shadowSide:M.side:null!==M.shadowSide?M.shadowSide:_[M.side],z.alphaMap=M.alphaMap,z.alphaTest=M.alphaTest,z.clipShadows=M.clipShadows,z.clippingPlanes=M.clippingPlanes,z.clipIntersection=M.clipIntersection,z.displacementMap=M.displacementMap,z.displacementScale=M.displacementScale,z.displacementBias=M.displacementBias,z.wireframeLinewidth=M.wireframeLinewidth,z.linewidth=M.linewidth,!0===A.isPointLight&&!0===z.isMeshDistanceMaterial&&(z.referencePosition.setFromMatrixPosition(A.matrixWorld),z.nearDistance=L,z.farDistance=E),z}function k(D,M,A,L,E){if(!1===D.visible)return;if(D.layers.test(M.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&3===E)&&(!D.frustumCulled||h.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,D.matrixWorld);const U=l.update(D),Z=D.material;if(Array.isArray(Z)){const Y=U.groups;for(let N=0,$=Y.length;N<$;N++){const H=Y[N],G=Z[H.materialIndex];if(G&&G.visible){const W=O(D,G,L,A.near,A.far,E);c.renderBufferDirect(A,null,U,W,D,H)}}}else if(Z.visible){const Y=O(D,Z,L,A.near,A.far,E);c.renderBufferDirect(A,null,U,Y,D,null)}}const z=D.children;for(let U=0,Z=z.length;U<Z;U++)k(z[U],M,A,L,E)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(D,M,A){if(!1===w.enabled||!1===w.autoUpdate&&!1===w.needsUpdate||0===D.length)return;const L=c.getRenderTarget(),E=c.getActiveCubeFace(),V=c.getActiveMipmapLevel(),z=c.state;z.setBlending(0),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);for(let U=0,Z=D.length;U<Z;U++){const Y=D[U],N=Y.shadow;if(void 0===N){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(!1===N.autoUpdate&&!1===N.needsUpdate)continue;d.copy(N.mapSize);const $=N.getFrameExtents();d.multiply($),f.copy(N.mapSize),(d.x>y||d.y>y)&&(d.x>y&&(f.x=Math.floor(y/$.x),d.x=f.x*$.x,N.mapSize.x=f.x),d.y>y&&(f.y=Math.floor(y/$.y),d.y=f.y*$.y,N.mapSize.y=f.y)),null===N.map&&(N.map=new kl(d.x,d.y,3!==this.type?{minFilter:zo,magFilter:zo}:{}),N.map.texture.name=Y.name+".shadowMap",N.camera.updateProjectionMatrix()),c.setRenderTarget(N.map),c.clear();const H=N.getViewportCount();for(let G=0;G<H;G++){const W=N.getViewport(G);p.set(f.x*W.x,f.y*W.y,f.x*W.z,f.y*W.w),z.viewport(p),N.updateMatrices(Y,G),h=N.getFrustum(),k(M,A,N.camera,Y,this.type)}!0!==N.isPointLightShadow&&3===this.type&&T(N,A),N.needsUpdate=!1}w.needsUpdate=!1,c.setRenderTarget(L,E,V)}}function R0t(c,l,a){const h=a.isWebGL2,g=new function d(){let Fe=!1;const cn=new ar;let rn=null;const vi=new ar(0,0,0,0);return{setMask:function(Nn){rn!==Nn&&!Fe&&(c.colorMask(Nn,Nn,Nn,Nn),rn=Nn)},setLocked:function(Nn){Fe=Nn},setClear:function(Nn,Di,nn,ki,Br){!0===Br&&(Nn*=ki,Di*=ki,nn*=ki),cn.set(Nn,Di,nn,ki),!1===vi.equals(cn)&&(c.clearColor(Nn,Di,nn,ki),vi.copy(cn))},reset:function(){Fe=!1,rn=null,vi.set(-1,0,0,0)}}},m=new function f(){let Fe=!1,cn=null,rn=null,vi=null;return{setTest:function(Nn){Nn?Se(2929):_e(2929)},setMask:function(Nn){cn!==Nn&&!Fe&&(c.depthMask(Nn),cn=Nn)},setFunc:function(Nn){if(rn!==Nn){if(Nn)switch(Nn){case 0:c.depthFunc(512);break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:default:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517)}else c.depthFunc(515);rn=Nn}},setLocked:function(Nn){Fe=Nn},setClear:function(Nn){vi!==Nn&&(c.clearDepth(Nn),vi=Nn)},reset:function(){Fe=!1,cn=null,rn=null,vi=null}}},v=new function p(){let Fe=!1,cn=null,rn=null,vi=null,Nn=null,Di=null,nn=null,ki=null,Br=null;return{setTest:function(Vr){Fe||(Vr?Se(2960):_e(2960))},setMask:function(Vr){cn!==Vr&&!Fe&&(c.stencilMask(Vr),cn=Vr)},setFunc:function(Vr,Il,Yd){(rn!==Vr||vi!==Il||Nn!==Yd)&&(c.stencilFunc(Vr,Il,Yd),rn=Vr,vi=Il,Nn=Yd)},setOp:function(Vr,Il,Yd){(Di!==Vr||nn!==Il||ki!==Yd)&&(c.stencilOp(Vr,Il,Yd),Di=Vr,nn=Il,ki=Yd)},setLocked:function(Vr){Fe=Vr},setClear:function(Vr){Br!==Vr&&(c.clearStencil(Vr),Br=Vr)},reset:function(){Fe=!1,cn=null,rn=null,vi=null,Nn=null,Di=null,nn=null,ki=null,Br=null}}};let y={},_={},b=new WeakMap,C=[],x=null,S=!1,w=null,T=null,O=null,k=null,D=null,M=null,A=null,L=!1,E=null,V=null,z=null,U=null,Z=null;const Y=c.getParameter(35661);let N=!1,$=0;const H=c.getParameter(7938);-1!==H.indexOf("WebGL")?($=parseFloat(/^WebGL (\d)/.exec(H)[1]),N=$>=1):-1!==H.indexOf("OpenGL ES")&&($=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),N=$>=2);let G=null,W={};const j=c.getParameter(3088),Q=c.getParameter(2978),J=(new ar).fromArray(j),te=(new ar).fromArray(Q);function ce(Fe,cn,rn){const vi=new Uint8Array(4),Nn=c.createTexture();c.bindTexture(Fe,Nn),c.texParameteri(Fe,10241,9728),c.texParameteri(Fe,10240,9728);for(let Di=0;Di<rn;Di++)c.texImage2D(cn+Di,0,6408,1,1,0,6408,5121,vi);return Nn}const ae={};function Se(Fe){!0!==y[Fe]&&(c.enable(Fe),y[Fe]=!0)}function _e(Fe){!1!==y[Fe]&&(c.disable(Fe),y[Fe]=!1)}ae[3553]=ce(3553,3553,1),ae[34067]=ce(34067,34069,6),g.setClear(0,0,0,1),m.setClear(1),v.setClear(0),Se(2929),m.setFunc(3),tt(!1),st(1),Se(2884),pe(0);const Ve={100:32774,101:32778,102:32779};if(h)Ve[103]=32775,Ve[104]=32776;else{const Fe=l.get("EXT_blend_minmax");null!==Fe&&(Ve[103]=Fe.MIN_EXT,Ve[104]=Fe.MAX_EXT)}const Je={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function pe(Fe,cn,rn,vi,Nn,Di,nn,ki){if(0!==Fe){if(!1===S&&(Se(3042),S=!0),5===Fe)Nn=Nn||cn,Di=Di||rn,nn=nn||vi,(cn!==T||Nn!==D)&&(c.blendEquationSeparate(Ve[cn],Ve[Nn]),T=cn,D=Nn),(rn!==O||vi!==k||Di!==M||nn!==A)&&(c.blendFuncSeparate(Je[rn],Je[vi],Je[Di],Je[nn]),O=rn,k=vi,M=Di,A=nn),w=Fe,L=null;else if(Fe!==w||ki!==L){if((100!==T||100!==D)&&(c.blendEquation(32774),T=100,D=100),ki)switch(Fe){case 1:c.blendFuncSeparate(1,771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe)}else switch(Fe){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe)}O=null,k=null,M=null,A=null,w=Fe,L=ki}}else!0===S&&(_e(3042),S=!1)}function tt(Fe){E!==Fe&&(c.frontFace(Fe?2304:2305),E=Fe)}function st(Fe){0!==Fe?(Se(2884),Fe!==V&&c.cullFace(1===Fe?1029:2===Fe?1028:1032)):_e(2884),V=Fe}function Oe(Fe,cn,rn){Fe?(Se(32823),(U!==cn||Z!==rn)&&(c.polygonOffset(cn,rn),U=cn,Z=rn)):_e(32823)}function Gt(Fe){void 0===Fe&&(Fe=33984+Y-1),G!==Fe&&(c.activeTexture(Fe),G=Fe)}return{buffers:{color:g,depth:m,stencil:v},enable:Se,disable:_e,bindFramebuffer:function Me(Fe,cn){return _[Fe]!==cn&&(c.bindFramebuffer(Fe,cn),_[Fe]=cn,h&&(36009===Fe&&(_[36160]=cn),36160===Fe&&(_[36009]=cn)),!0)},drawBuffers:function Qe(Fe,cn){let rn=C,vi=!1;if(Fe)if(rn=b.get(cn),void 0===rn&&(rn=[],b.set(cn,rn)),Fe.isWebGLMultipleRenderTargets){const Nn=Fe.texture;if(rn.length!==Nn.length||36064!==rn[0]){for(let Di=0,nn=Nn.length;Di<nn;Di++)rn[Di]=36064+Di;rn.length=Nn.length,vi=!0}}else 36064!==rn[0]&&(rn[0]=36064,vi=!0);else 1029!==rn[0]&&(rn[0]=1029,vi=!0);vi&&(a.isWebGL2?c.drawBuffers(rn):l.get("WEBGL_draw_buffers").drawBuffersWEBGL(rn))},useProgram:function Ie(Fe){return x!==Fe&&(c.useProgram(Fe),x=Fe,!0)},setBlending:pe,setMaterial:function Le(Fe,cn){2===Fe.side?_e(2884):Se(2884);let rn=1===Fe.side;cn&&(rn=!rn),tt(rn),1===Fe.blending&&!1===Fe.transparent?pe(0):pe(Fe.blending,Fe.blendEquation,Fe.blendSrc,Fe.blendDst,Fe.blendEquationAlpha,Fe.blendSrcAlpha,Fe.blendDstAlpha,Fe.premultipliedAlpha),m.setFunc(Fe.depthFunc),m.setTest(Fe.depthTest),m.setMask(Fe.depthWrite),g.setMask(Fe.colorWrite);const vi=Fe.stencilWrite;v.setTest(vi),vi&&(v.setMask(Fe.stencilWriteMask),v.setFunc(Fe.stencilFunc,Fe.stencilRef,Fe.stencilFuncMask),v.setOp(Fe.stencilFail,Fe.stencilZFail,Fe.stencilZPass)),Oe(Fe.polygonOffset,Fe.polygonOffsetFactor,Fe.polygonOffsetUnits),!0===Fe.alphaToCoverage?Se(32926):_e(32926)},setFlipSided:tt,setCullFace:st,setLineWidth:function Ye(Fe){Fe!==z&&(N&&c.lineWidth(Fe),z=Fe)},setPolygonOffset:Oe,setScissorTest:function Ze(Fe){Fe?Se(3089):_e(3089)},activeTexture:Gt,bindTexture:function Tn(Fe,cn){null===G&&Gt();let rn=W[G];void 0===rn&&(rn={type:void 0,texture:void 0},W[G]=rn),(rn.type!==Fe||rn.texture!==cn)&&(c.bindTexture(Fe,cn||ae[Fe]),rn.type=Fe,rn.texture=cn)},unbindTexture:function Gn(){const Fe=W[G];void 0!==Fe&&void 0!==Fe.type&&(c.bindTexture(Fe.type,null),Fe.type=void 0,Fe.texture=void 0)},compressedTexImage2D:function ge(){try{c.compressedTexImage2D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},texImage2D:function Bt(){try{c.texImage2D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},texImage3D:function Ke(){try{c.texImage3D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},texStorage2D:function Qt(){try{c.texStorage2D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},texStorage3D:function Nt(){try{c.texStorage3D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},texSubImage2D:function oe(){try{c.texSubImage2D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},texSubImage3D:function lt(){try{c.texSubImage3D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},compressedTexSubImage2D:function xt(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}},scissor:function en(Fe){!1===J.equals(Fe)&&(c.scissor(Fe.x,Fe.y,Fe.z,Fe.w),J.copy(Fe))},viewport:function Zt(Fe){!1===te.equals(Fe)&&(c.viewport(Fe.x,Fe.y,Fe.z,Fe.w),te.copy(Fe))},reset:function xn(){c.disable(3042),c.disable(2884),c.disable(2929),c.disable(32823),c.disable(3089),c.disable(2960),c.disable(32926),c.blendEquation(32774),c.blendFunc(1,0),c.blendFuncSeparate(1,0,1,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(513),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(519,0,4294967295),c.stencilOp(7680,7680,7680),c.clearStencil(0),c.cullFace(1029),c.frontFace(2305),c.polygonOffset(0,0),c.activeTexture(33984),c.bindFramebuffer(36160,null),!0===h&&(c.bindFramebuffer(36009,null),c.bindFramebuffer(36008,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),y={},G=null,W={},_={},b=new WeakMap,C=[],x=null,S=!1,w=null,T=null,O=null,k=null,D=null,M=null,A=null,L=!1,E=null,V=null,z=null,U=null,Z=null,J.set(0,0,c.canvas.width,c.canvas.height),te.set(0,0,c.canvas.width,c.canvas.height),g.reset(),m.reset(),v.reset()}}}function F0t(c,l,a,h,d,f,p){const g=d.isWebGL2,m=d.maxTextures,v=d.maxCubemapSize,y=d.maxTextureSize,_=d.maxSamples,b=l.has("WEBGL_multisampled_render_to_texture")?l.get("WEBGL_multisampled_render_to_texture"):null,C=/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let S;const w=new WeakMap;let T=!1;try{T="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ge){}function O(ge,oe){return T?new OffscreenCanvas(ge,oe):x2("canvas")}function k(ge,oe,lt,xt){let Qt=1;if((ge.width>xt||ge.height>xt)&&(Qt=xt/Math.max(ge.width,ge.height)),Qt<1||!0===oe){if("undefined"!=typeof HTMLImageElement&&ge instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&ge instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&ge instanceof ImageBitmap){const Nt=oe?n3:Math.floor,Bt=Nt(Qt*ge.width),Ke=Nt(Qt*ge.height);void 0===S&&(S=O(Bt,Ke));const en=lt?O(Bt,Ke):S;return en.width=Bt,en.height=Ke,en.getContext("2d").drawImage(ge,0,0,Bt,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ge.width+"x"+ge.height+") to ("+Bt+"x"+Ke+")."),en}return"data"in ge&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ge.width+"x"+ge.height+")."),ge}return ge}function D(ge){return $9(ge.width)&&$9(ge.height)}function A(ge,oe){return ge.generateMipmaps&&oe&&ge.minFilter!==zo&&ge.minFilter!==bo}function L(ge){c.generateMipmap(ge)}function E(ge,oe,lt,xt,Qt=!1){if(!1===g)return oe;if(null!==ge){if(void 0!==c[ge])return c[ge];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ge+"'")}let Nt=oe;return 6403===oe&&(5126===lt&&(Nt=33326),5131===lt&&(Nt=33325),5121===lt&&(Nt=33321)),33319===oe&&(5126===lt&&(Nt=33328),5131===lt&&(Nt=33327),5121===lt&&(Nt=33323)),6408===oe&&(5126===lt&&(Nt=34836),5131===lt&&(Nt=34842),5121===lt&&(Nt=xt===Rs&&!1===Qt?35907:32856),32819===lt&&(Nt=32854),32820===lt&&(Nt=32855)),(33325===Nt||33326===Nt||33327===Nt||33328===Nt||34842===Nt||34836===Nt)&&l.get("EXT_color_buffer_float"),Nt}function V(ge,oe,lt){return!0===A(ge,lt)||ge.isFramebufferTexture&&ge.minFilter!==zo&&ge.minFilter!==bo?Math.log2(Math.max(oe.width,oe.height))+1:void 0!==ge.mipmaps&&ge.mipmaps.length>0?ge.mipmaps.length:ge.isCompressedTexture&&Array.isArray(ge.image)?oe.mipmaps.length:1}function z(ge){return ge===zo||1004===ge||1005===ge?9728:9729}function U(ge){const oe=ge.target;oe.removeEventListener("dispose",U),function Y(ge){const oe=h.get(ge);if(void 0===oe.__webglInit)return;const lt=ge.source,xt=w.get(lt);if(xt){const Qt=xt[oe.__cacheKey];Qt.usedTimes--,0===Qt.usedTimes&&N(ge),0===Object.keys(xt).length&&w.delete(lt)}h.remove(ge)}(oe),oe.isVideoTexture&&x.delete(oe)}function Z(ge){const oe=ge.target;oe.removeEventListener("dispose",Z),function $(ge){const oe=ge.texture,lt=h.get(ge),xt=h.get(oe);if(void 0!==xt.__webglTexture&&(c.deleteTexture(xt.__webglTexture),p.memory.textures--),ge.depthTexture&&ge.depthTexture.dispose(),ge.isWebGLCubeRenderTarget)for(let Qt=0;Qt<6;Qt++)c.deleteFramebuffer(lt.__webglFramebuffer[Qt]),lt.__webglDepthbuffer&&c.deleteRenderbuffer(lt.__webglDepthbuffer[Qt]);else{if(c.deleteFramebuffer(lt.__webglFramebuffer),lt.__webglDepthbuffer&&c.deleteRenderbuffer(lt.__webglDepthbuffer),lt.__webglMultisampledFramebuffer&&c.deleteFramebuffer(lt.__webglMultisampledFramebuffer),lt.__webglColorRenderbuffer)for(let Qt=0;Qt<lt.__webglColorRenderbuffer.length;Qt++)lt.__webglColorRenderbuffer[Qt]&&c.deleteRenderbuffer(lt.__webglColorRenderbuffer[Qt]);lt.__webglDepthRenderbuffer&&c.deleteRenderbuffer(lt.__webglDepthRenderbuffer)}if(ge.isWebGLMultipleRenderTargets)for(let Qt=0,Nt=oe.length;Qt<Nt;Qt++){const Bt=h.get(oe[Qt]);Bt.__webglTexture&&(c.deleteTexture(Bt.__webglTexture),p.memory.textures--),h.remove(oe[Qt])}h.remove(oe),h.remove(ge)}(oe)}function N(ge){const oe=h.get(ge);c.deleteTexture(oe.__webglTexture),delete w.get(ge.source)[oe.__cacheKey],p.memory.textures--}let H=0;function Q(ge,oe){const lt=h.get(ge);if(ge.isVideoTexture&&function Tn(ge){const oe=p.render.frame;x.get(ge)!==oe&&(x.set(ge,oe),ge.update())}(ge),!1===ge.isRenderTargetTexture&&ge.version>0&&lt.__version!==ge.version){const xt=ge.image;if(null===xt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==xt.complete)return void Qe(lt,ge,oe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(33984+oe),a.bindTexture(3553,lt.__webglTexture)}const ae={[B1]:10497,[ic]:33071,1002:33648},Se={[zo]:9728,1004:9984,1005:9986,[bo]:9729,1007:9985,1008:9987};function _e(ge,oe,lt){if(lt?(c.texParameteri(ge,10242,ae[oe.wrapS]),c.texParameteri(ge,10243,ae[oe.wrapT]),(32879===ge||35866===ge)&&c.texParameteri(ge,32882,ae[oe.wrapR]),c.texParameteri(ge,10240,Se[oe.magFilter]),c.texParameteri(ge,10241,Se[oe.minFilter])):(c.texParameteri(ge,10242,33071),c.texParameteri(ge,10243,33071),(32879===ge||35866===ge)&&c.texParameteri(ge,32882,33071),(oe.wrapS!==ic||oe.wrapT!==ic)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),c.texParameteri(ge,10240,z(oe.magFilter)),c.texParameteri(ge,10241,z(oe.minFilter)),oe.minFilter!==zo&&oe.minFilter!==bo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===l.has("EXT_texture_filter_anisotropic")){const xt=l.get("EXT_texture_filter_anisotropic");if(oe.type===Gg&&!1===l.has("OES_texture_float_linear")||!1===g&&oe.type===_2&&!1===l.has("OES_texture_half_float_linear"))return;(oe.anisotropy>1||h.get(oe).__currentAnisotropy)&&(c.texParameterf(ge,xt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,d.getMaxAnisotropy())),h.get(oe).__currentAnisotropy=oe.anisotropy)}}function Me(ge,oe){let lt=!1;void 0===ge.__webglInit&&(ge.__webglInit=!0,oe.addEventListener("dispose",U));const xt=oe.source;let Qt=w.get(xt);void 0===Qt&&(Qt={},w.set(xt,Qt));const Nt=function j(ge){const oe=[];return oe.push(ge.wrapS),oe.push(ge.wrapT),oe.push(ge.magFilter),oe.push(ge.minFilter),oe.push(ge.anisotropy),oe.push(ge.internalFormat),oe.push(ge.format),oe.push(ge.type),oe.push(ge.generateMipmaps),oe.push(ge.premultiplyAlpha),oe.push(ge.flipY),oe.push(ge.unpackAlignment),oe.push(ge.encoding),oe.join()}(oe);if(Nt!==ge.__cacheKey){void 0===Qt[Nt]&&(Qt[Nt]={texture:c.createTexture(),usedTimes:0},p.memory.textures++,lt=!0),Qt[Nt].usedTimes++;const Bt=Qt[ge.__cacheKey];void 0!==Bt&&(Qt[ge.__cacheKey].usedTimes--,0===Bt.usedTimes&&N(oe)),ge.__cacheKey=Nt,ge.__webglTexture=Qt[Nt].texture}return lt}function Qe(ge,oe,lt){let xt=3553;oe.isDataArrayTexture&&(xt=35866),oe.isData3DTexture&&(xt=32879);const Qt=Me(ge,oe),Nt=oe.source;if(a.activeTexture(33984+lt),a.bindTexture(xt,ge.__webglTexture),Nt.version!==Nt.__currentVersion||!0===Qt){c.pixelStorei(37440,oe.flipY),c.pixelStorei(37441,oe.premultiplyAlpha),c.pixelStorei(3317,oe.unpackAlignment),c.pixelStorei(37443,0);const Bt=function M(ge){return!g&&(ge.wrapS!==ic||ge.wrapT!==ic||ge.minFilter!==zo&&ge.minFilter!==bo)}(oe)&&!1===D(oe.image);let Ke=k(oe.image,Bt,!1,y);Ke=Gn(oe,Ke);const en=D(Ke)||g,Zt=f.convert(oe.format,oe.encoding);let cn,xn=f.convert(oe.type),Fe=E(oe.internalFormat,Zt,xn,oe.encoding,oe.isVideoTexture);_e(xt,oe,en);const rn=oe.mipmaps,vi=g&&!0!==oe.isVideoTexture,Nn=void 0===Nt.__currentVersion||!0===Qt,Di=V(oe,Ke,en);if(oe.isDepthTexture)Fe=6402,g?Fe=oe.type===Gg?36012:oe.type===sv?33190:oe.type===z1?35056:33189:oe.type===Gg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),oe.format===ov&&6402===Fe&&1012!==oe.type&&oe.type!==sv&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),oe.type=sv,xn=f.convert(oe.type)),oe.format===U1&&6402===Fe&&(Fe=34041,oe.type!==z1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),oe.type=z1,xn=f.convert(oe.type))),Nn&&(vi?a.texStorage2D(3553,1,Fe,Ke.width,Ke.height):a.texImage2D(3553,0,Fe,Ke.width,Ke.height,0,Zt,xn,null));else if(oe.isDataTexture)if(rn.length>0&&en){vi&&Nn&&a.texStorage2D(3553,Di,Fe,rn[0].width,rn[0].height);for(let nn=0,ki=rn.length;nn<ki;nn++)cn=rn[nn],vi?a.texSubImage2D(3553,nn,0,0,cn.width,cn.height,Zt,xn,cn.data):a.texImage2D(3553,nn,Fe,cn.width,cn.height,0,Zt,xn,cn.data);oe.generateMipmaps=!1}else vi?(Nn&&a.texStorage2D(3553,Di,Fe,Ke.width,Ke.height),a.texSubImage2D(3553,0,0,0,Ke.width,Ke.height,Zt,xn,Ke.data)):a.texImage2D(3553,0,Fe,Ke.width,Ke.height,0,Zt,xn,Ke.data);else if(oe.isCompressedTexture){vi&&Nn&&a.texStorage2D(3553,Di,Fe,rn[0].width,rn[0].height);for(let nn=0,ki=rn.length;nn<ki;nn++)cn=rn[nn],oe.format!==Dh?null!==Zt?vi?a.compressedTexSubImage2D(3553,nn,0,0,cn.width,cn.height,Zt,cn.data):a.compressedTexImage2D(3553,nn,Fe,cn.width,cn.height,0,cn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):vi?a.texSubImage2D(3553,nn,0,0,cn.width,cn.height,Zt,xn,cn.data):a.texImage2D(3553,nn,Fe,cn.width,cn.height,0,Zt,xn,cn.data)}else if(oe.isDataArrayTexture)vi?(Nn&&a.texStorage3D(35866,Di,Fe,Ke.width,Ke.height,Ke.depth),a.texSubImage3D(35866,0,0,0,0,Ke.width,Ke.height,Ke.depth,Zt,xn,Ke.data)):a.texImage3D(35866,0,Fe,Ke.width,Ke.height,Ke.depth,0,Zt,xn,Ke.data);else if(oe.isData3DTexture)vi?(Nn&&a.texStorage3D(32879,Di,Fe,Ke.width,Ke.height,Ke.depth),a.texSubImage3D(32879,0,0,0,0,Ke.width,Ke.height,Ke.depth,Zt,xn,Ke.data)):a.texImage3D(32879,0,Fe,Ke.width,Ke.height,Ke.depth,0,Zt,xn,Ke.data);else if(oe.isFramebufferTexture){if(Nn)if(vi)a.texStorage2D(3553,Di,Fe,Ke.width,Ke.height);else{let nn=Ke.width,ki=Ke.height;for(let Br=0;Br<Di;Br++)a.texImage2D(3553,Br,Fe,nn,ki,0,Zt,xn,null),nn>>=1,ki>>=1}}else if(rn.length>0&&en){vi&&Nn&&a.texStorage2D(3553,Di,Fe,rn[0].width,rn[0].height);for(let nn=0,ki=rn.length;nn<ki;nn++)cn=rn[nn],vi?a.texSubImage2D(3553,nn,0,0,Zt,xn,cn):a.texImage2D(3553,nn,Fe,Zt,xn,cn);oe.generateMipmaps=!1}else vi?(Nn&&a.texStorage2D(3553,Di,Fe,Ke.width,Ke.height),a.texSubImage2D(3553,0,0,0,Zt,xn,Ke)):a.texImage2D(3553,0,Fe,Zt,xn,Ke);A(oe,en)&&L(xt),Nt.__currentVersion=Nt.version,oe.onUpdate&&oe.onUpdate(oe)}ge.__version=oe.version}function Ve(ge,oe,lt,xt,Qt){const Nt=f.convert(lt.format,lt.encoding),Bt=f.convert(lt.type),Ke=E(lt.internalFormat,Nt,Bt,lt.encoding);h.get(oe).__hasExternalTextures||(32879===Qt||35866===Qt?a.texImage3D(Qt,0,Ke,oe.width,oe.height,oe.depth,0,Nt,Bt,null):a.texImage2D(Qt,0,Ke,oe.width,oe.height,0,Nt,Bt,null)),a.bindFramebuffer(36160,ge),Gt(oe)?b.framebufferTexture2DMultisampleEXT(36160,xt,Qt,h.get(lt).__webglTexture,0,Ze(oe)):c.framebufferTexture2D(36160,xt,Qt,h.get(lt).__webglTexture,0),a.bindFramebuffer(36160,null)}function Je(ge,oe,lt){if(c.bindRenderbuffer(36161,ge),oe.depthBuffer&&!oe.stencilBuffer){let xt=33189;if(lt||Gt(oe)){const Qt=oe.depthTexture;Qt&&Qt.isDepthTexture&&(Qt.type===Gg?xt=36012:Qt.type===sv&&(xt=33190));const Nt=Ze(oe);Gt(oe)?b.renderbufferStorageMultisampleEXT(36161,Nt,xt,oe.width,oe.height):c.renderbufferStorageMultisample(36161,Nt,xt,oe.width,oe.height)}else c.renderbufferStorage(36161,xt,oe.width,oe.height);c.framebufferRenderbuffer(36160,36096,36161,ge)}else if(oe.depthBuffer&&oe.stencilBuffer){const xt=Ze(oe);lt&&!1===Gt(oe)?c.renderbufferStorageMultisample(36161,xt,35056,oe.width,oe.height):Gt(oe)?b.renderbufferStorageMultisampleEXT(36161,xt,35056,oe.width,oe.height):c.renderbufferStorage(36161,34041,oe.width,oe.height),c.framebufferRenderbuffer(36160,33306,36161,ge)}else{const xt=!0===oe.isWebGLMultipleRenderTargets?oe.texture:[oe.texture];for(let Qt=0;Qt<xt.length;Qt++){const Nt=xt[Qt],Bt=f.convert(Nt.format,Nt.encoding),Ke=f.convert(Nt.type),en=E(Nt.internalFormat,Bt,Ke,Nt.encoding),Zt=Ze(oe);lt&&!1===Gt(oe)?c.renderbufferStorageMultisample(36161,Zt,en,oe.width,oe.height):Gt(oe)?b.renderbufferStorageMultisampleEXT(36161,Zt,en,oe.width,oe.height):c.renderbufferStorage(36161,en,oe.width,oe.height)}}c.bindRenderbuffer(36161,null)}function Le(ge){const oe=h.get(ge),lt=!0===ge.isWebGLCubeRenderTarget;if(ge.depthTexture&&!oe.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");!function pe(ge,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,ge),!oe.depthTexture||!oe.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!h.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),Q(oe.depthTexture,0);const xt=h.get(oe.depthTexture).__webglTexture,Qt=Ze(oe);if(oe.depthTexture.format===ov)Gt(oe)?b.framebufferTexture2DMultisampleEXT(36160,36096,3553,xt,0,Qt):c.framebufferTexture2D(36160,36096,3553,xt,0);else{if(oe.depthTexture.format!==U1)throw new Error("Unknown depthTexture format");Gt(oe)?b.framebufferTexture2DMultisampleEXT(36160,33306,3553,xt,0,Qt):c.framebufferTexture2D(36160,33306,3553,xt,0)}}(oe.__webglFramebuffer,ge)}else if(lt){oe.__webglDepthbuffer=[];for(let xt=0;xt<6;xt++)a.bindFramebuffer(36160,oe.__webglFramebuffer[xt]),oe.__webglDepthbuffer[xt]=c.createRenderbuffer(),Je(oe.__webglDepthbuffer[xt],ge,!1)}else a.bindFramebuffer(36160,oe.__webglFramebuffer),oe.__webglDepthbuffer=c.createRenderbuffer(),Je(oe.__webglDepthbuffer,ge,!1);a.bindFramebuffer(36160,null)}function Ze(ge){return Math.min(_,ge.samples)}function Gt(ge){const oe=h.get(ge);return g&&ge.samples>0&&!0===l.has("WEBGL_multisampled_render_to_texture")&&!1!==oe.__useRenderToTexture}function Gn(ge,oe){const lt=ge.encoding,xt=ge.format,Qt=ge.type;return!0===ge.isCompressedTexture||!0===ge.isVideoTexture||1035===ge.format||lt!==av&&(lt===Rs?!1===g?!0===l.has("EXT_sRGB")&&xt===Dh?(ge.format=1035,ge.minFilter=bo,ge.generateMipmaps=!1):oe=xve.sRGBToLinear(oe):(xt!==Dh||Qt!==rv)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",lt)),oe}this.allocateTextureUnit=function W(){const ge=H;return ge>=m&&console.warn("THREE.WebGLTextures: Trying to use "+ge+" texture units while this GPU supports only "+m),H+=1,ge},this.resetTextureUnits=function G(){H=0},this.setTexture2D=Q,this.setTexture2DArray=function J(ge,oe){const lt=h.get(ge);ge.version>0&&lt.__version!==ge.version?Qe(lt,ge,oe):(a.activeTexture(33984+oe),a.bindTexture(35866,lt.__webglTexture))},this.setTexture3D=function te(ge,oe){const lt=h.get(ge);ge.version>0&&lt.__version!==ge.version?Qe(lt,ge,oe):(a.activeTexture(33984+oe),a.bindTexture(32879,lt.__webglTexture))},this.setTextureCube=function ce(ge,oe){const lt=h.get(ge);ge.version>0&&lt.__version!==ge.version?function Ie(ge,oe,lt){if(6!==oe.image.length)return;const xt=Me(ge,oe),Qt=oe.source;if(a.activeTexture(33984+lt),a.bindTexture(34067,ge.__webglTexture),Qt.version!==Qt.__currentVersion||!0===xt){c.pixelStorei(37440,oe.flipY),c.pixelStorei(37441,oe.premultiplyAlpha),c.pixelStorei(3317,oe.unpackAlignment),c.pixelStorei(37443,0);const Nt=oe.isCompressedTexture||oe.image[0].isCompressedTexture,Bt=oe.image[0]&&oe.image[0].isDataTexture,Ke=[];for(let nn=0;nn<6;nn++)Ke[nn]=Nt||Bt?Bt?oe.image[nn].image:oe.image[nn]:k(oe.image[nn],!1,!0,v),Ke[nn]=Gn(oe,Ke[nn]);const en=Ke[0],Zt=D(en)||g,xn=f.convert(oe.format,oe.encoding),Fe=f.convert(oe.type),cn=E(oe.internalFormat,xn,Fe,oe.encoding),rn=g&&!0!==oe.isVideoTexture,vi=void 0===Qt.__currentVersion||!0===xt;let Di,Nn=V(oe,en,Zt);if(_e(34067,oe,Zt),Nt){rn&&vi&&a.texStorage2D(34067,Nn,cn,en.width,en.height);for(let nn=0;nn<6;nn++){Di=Ke[nn].mipmaps;for(let ki=0;ki<Di.length;ki++){const Br=Di[ki];oe.format!==Dh?null!==xn?rn?a.compressedTexSubImage2D(34069+nn,ki,0,0,Br.width,Br.height,xn,Br.data):a.compressedTexImage2D(34069+nn,ki,cn,Br.width,Br.height,0,Br.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rn?a.texSubImage2D(34069+nn,ki,0,0,Br.width,Br.height,xn,Fe,Br.data):a.texImage2D(34069+nn,ki,cn,Br.width,Br.height,0,xn,Fe,Br.data)}}}else{Di=oe.mipmaps,rn&&vi&&(Di.length>0&&Nn++,a.texStorage2D(34067,Nn,cn,Ke[0].width,Ke[0].height));for(let nn=0;nn<6;nn++)if(Bt){rn?a.texSubImage2D(34069+nn,0,0,0,Ke[nn].width,Ke[nn].height,xn,Fe,Ke[nn].data):a.texImage2D(34069+nn,0,cn,Ke[nn].width,Ke[nn].height,0,xn,Fe,Ke[nn].data);for(let ki=0;ki<Di.length;ki++){const Vr=Di[ki].image[nn].image;rn?a.texSubImage2D(34069+nn,ki+1,0,0,Vr.width,Vr.height,xn,Fe,Vr.data):a.texImage2D(34069+nn,ki+1,cn,Vr.width,Vr.height,0,xn,Fe,Vr.data)}}else{rn?a.texSubImage2D(34069+nn,0,0,0,xn,Fe,Ke[nn]):a.texImage2D(34069+nn,0,cn,xn,Fe,Ke[nn]);for(let ki=0;ki<Di.length;ki++){const Br=Di[ki];rn?a.texSubImage2D(34069+nn,ki+1,0,0,xn,Fe,Br.image[nn]):a.texImage2D(34069+nn,ki+1,cn,xn,Fe,Br.image[nn])}}}A(oe,Zt)&&L(34067),Qt.__currentVersion=Qt.version,oe.onUpdate&&oe.onUpdate(oe)}ge.__version=oe.version}(lt,ge,oe):(a.activeTexture(33984+oe),a.bindTexture(34067,lt.__webglTexture))},this.rebindTextures=function tt(ge,oe,lt){const xt=h.get(ge);void 0!==oe&&Ve(xt.__webglFramebuffer,ge,ge.texture,36064,3553),void 0!==lt&&Le(ge)},this.setupRenderTarget=function st(ge){const oe=ge.texture,lt=h.get(ge),xt=h.get(oe);ge.addEventListener("dispose",Z),!0!==ge.isWebGLMultipleRenderTargets&&(void 0===xt.__webglTexture&&(xt.__webglTexture=c.createTexture()),xt.__version=oe.version,p.memory.textures++);const Qt=!0===ge.isWebGLCubeRenderTarget,Nt=!0===ge.isWebGLMultipleRenderTargets,Bt=D(ge)||g;if(Qt){lt.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)lt.__webglFramebuffer[Ke]=c.createFramebuffer()}else{if(lt.__webglFramebuffer=c.createFramebuffer(),Nt)if(d.drawBuffers){const Ke=ge.texture;for(let en=0,Zt=Ke.length;en<Zt;en++){const xn=h.get(Ke[en]);void 0===xn.__webglTexture&&(xn.__webglTexture=c.createTexture(),p.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&ge.samples>0&&!1===Gt(ge)){const Ke=Nt?oe:[oe];lt.__webglMultisampledFramebuffer=c.createFramebuffer(),lt.__webglColorRenderbuffer=[],a.bindFramebuffer(36160,lt.__webglMultisampledFramebuffer);for(let en=0;en<Ke.length;en++){const Zt=Ke[en];lt.__webglColorRenderbuffer[en]=c.createRenderbuffer(),c.bindRenderbuffer(36161,lt.__webglColorRenderbuffer[en]);const xn=f.convert(Zt.format,Zt.encoding),Fe=f.convert(Zt.type),cn=E(Zt.internalFormat,xn,Fe,Zt.encoding),rn=Ze(ge);c.renderbufferStorageMultisample(36161,rn,cn,ge.width,ge.height),c.framebufferRenderbuffer(36160,36064+en,36161,lt.__webglColorRenderbuffer[en])}c.bindRenderbuffer(36161,null),ge.depthBuffer&&(lt.__webglDepthRenderbuffer=c.createRenderbuffer(),Je(lt.__webglDepthRenderbuffer,ge,!0)),a.bindFramebuffer(36160,null)}}if(Qt){a.bindTexture(34067,xt.__webglTexture),_e(34067,oe,Bt);for(let Ke=0;Ke<6;Ke++)Ve(lt.__webglFramebuffer[Ke],ge,oe,36064,34069+Ke);A(oe,Bt)&&L(34067),a.unbindTexture()}else if(Nt){const Ke=ge.texture;for(let en=0,Zt=Ke.length;en<Zt;en++){const xn=Ke[en],Fe=h.get(xn);a.bindTexture(3553,Fe.__webglTexture),_e(3553,xn,Bt),Ve(lt.__webglFramebuffer,ge,xn,36064+en,3553),A(xn,Bt)&&L(3553)}a.unbindTexture()}else{let Ke=3553;(ge.isWebGL3DRenderTarget||ge.isWebGLArrayRenderTarget)&&(g?Ke=ge.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),a.bindTexture(Ke,xt.__webglTexture),_e(Ke,oe,Bt),Ve(lt.__webglFramebuffer,ge,oe,36064,Ke),A(oe,Bt)&&L(Ke),a.unbindTexture()}ge.depthBuffer&&Le(ge)},this.updateRenderTargetMipmap=function Ye(ge){const oe=D(ge)||g,lt=!0===ge.isWebGLMultipleRenderTargets?ge.texture:[ge.texture];for(let xt=0,Qt=lt.length;xt<Qt;xt++){const Nt=lt[xt];if(A(Nt,oe)){const Bt=ge.isWebGLCubeRenderTarget?34067:3553,Ke=h.get(Nt).__webglTexture;a.bindTexture(Bt,Ke),L(Bt),a.unbindTexture()}}},this.updateMultisampleRenderTarget=function Oe(ge){if(g&&ge.samples>0&&!1===Gt(ge)){const oe=ge.isWebGLMultipleRenderTargets?ge.texture:[ge.texture],lt=ge.width,xt=ge.height;let Qt=16384;const Nt=[],Bt=ge.stencilBuffer?33306:36096,Ke=h.get(ge),en=!0===ge.isWebGLMultipleRenderTargets;if(en)for(let Zt=0;Zt<oe.length;Zt++)a.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064+Zt,36161,null),a.bindFramebuffer(36160,Ke.__webglFramebuffer),c.framebufferTexture2D(36009,36064+Zt,3553,null,0);a.bindFramebuffer(36008,Ke.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,Ke.__webglFramebuffer);for(let Zt=0;Zt<oe.length;Zt++){Nt.push(36064+Zt),ge.depthBuffer&&Nt.push(Bt);const xn=void 0!==Ke.__ignoreDepthValues&&Ke.__ignoreDepthValues;if(!1===xn&&(ge.depthBuffer&&(Qt|=256),ge.stencilBuffer&&(Qt|=1024)),en&&c.framebufferRenderbuffer(36008,36064,36161,Ke.__webglColorRenderbuffer[Zt]),!0===xn&&(c.invalidateFramebuffer(36008,[Bt]),c.invalidateFramebuffer(36009,[Bt])),en){const Fe=h.get(oe[Zt]).__webglTexture;c.framebufferTexture2D(36009,36064,3553,Fe,0)}c.blitFramebuffer(0,0,lt,xt,0,0,lt,xt,Qt,9728),C&&c.invalidateFramebuffer(36008,Nt)}if(a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,null),en)for(let Zt=0;Zt<oe.length;Zt++){a.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064+Zt,36161,Ke.__webglColorRenderbuffer[Zt]);const xn=h.get(oe[Zt]).__webglTexture;a.bindFramebuffer(36160,Ke.__webglFramebuffer),c.framebufferTexture2D(36009,36064+Zt,3553,xn,0)}a.bindFramebuffer(36009,Ke.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Le,this.setupFrameBufferTexture=Ve,this.useMultisampledRTT=Gt}function N0t(c,l,a){const h=a.isWebGL2;return{convert:function d(f,p=null){let g;if(f===rv)return 5121;if(1017===f)return 32819;if(1018===f)return 32820;if(1010===f)return 5120;if(1011===f)return 5122;if(1012===f)return 5123;if(1013===f)return 5124;if(f===sv)return 5125;if(f===Gg)return 5126;if(f===_2)return h?5131:(g=l.get("OES_texture_half_float"),null!==g?g.HALF_FLOAT_OES:null);if(1021===f)return 6406;if(f===Dh)return 6408;if(1024===f)return 6409;if(1025===f)return 6410;if(f===ov)return 6402;if(f===U1)return 34041;if(1028===f)return 6403;if(1022===f)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===f)return g=l.get("EXT_sRGB"),null!==g?g.SRGB_ALPHA_EXT:null;if(1029===f)return 36244;if(1030===f)return 33319;if(1031===f)return 33320;if(1033===f)return 36249;if(33776===f||33777===f||33778===f||33779===f)if(p===Rs){if(g=l.get("WEBGL_compressed_texture_s3tc_srgb"),null===g)return null;if(33776===f)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(g=l.get("WEBGL_compressed_texture_s3tc"),null===g)return null;if(33776===f)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===f||35841===f||35842===f||35843===f){if(g=l.get("WEBGL_compressed_texture_pvrtc"),null===g)return null;if(35840===f)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===f)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===f)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===f)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===f)return g=l.get("WEBGL_compressed_texture_etc1"),null!==g?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===f||37496===f){if(g=l.get("WEBGL_compressed_texture_etc"),null===g)return null;if(37492===f)return p===Rs?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(37496===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}if(37808===f||37809===f||37810===f||37811===f||37812===f||37813===f||37814===f||37815===f||37816===f||37817===f||37818===f||37819===f||37820===f||37821===f){if(g=l.get("WEBGL_compressed_texture_astc"),null===g)return null;if(37808===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===f)return p===Rs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===f){if(g=l.get("EXT_texture_compression_bptc"),null===g)return null;if(36492===f)return p===Rs?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}return f===z1?h?34042:(g=l.get("WEBGL_depth_texture"),null!==g?g.UNSIGNED_INT_24_8_WEBGL:null):void 0!==c[f]?c[f]:null}}}class L0t extends xo{constructor(l=[]){super(),this.isArrayCamera=!0,this.cameras=l}}class pb extends qc{constructor(){super(),this.isGroup=!0,this.type="Group"}}const B0t={type:"move"};class x${constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new pb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new pb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new pb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(l){return null!==this._targetRay&&this._targetRay.dispatchEvent(l),null!==this._grip&&this._grip.dispatchEvent(l),null!==this._hand&&this._hand.dispatchEvent(l),this}disconnect(l){return this.dispatchEvent({type:"disconnected",data:l}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(l,a,h){let d=null,f=null,p=null;const g=this._targetRay,m=this._grip,v=this._hand;if(l&&"visible-blurred"!==a.session.visibilityState){if(v&&l.hand){p=!0;for(const S of l.hand.values()){const w=a.getJointPose(S,h);if(void 0===v.joints[S.jointName]){const O=new pb;O.matrixAutoUpdate=!1,O.visible=!1,v.joints[S.jointName]=O,v.add(O)}const T=v.joints[S.jointName];null!==w&&(T.matrix.fromArray(w.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.jointRadius=w.radius),T.visible=null!==w}const b=v.joints["index-finger-tip"].position.distanceTo(v.joints["thumb-tip"].position),C=.02,x=.005;v.inputState.pinching&&b>C+x?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:l.handedness,target:this})):!v.inputState.pinching&&b<=C-x&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:l.handedness,target:this}))}else null!==m&&l.gripSpace&&(f=a.getPose(l.gripSpace,h),null!==f&&(m.matrix.fromArray(f.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),f.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(f.linearVelocity)):m.hasLinearVelocity=!1,f.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(f.angularVelocity)):m.hasAngularVelocity=!1));null!==g&&(d=a.getPose(l.targetRaySpace,h),null===d&&null!==f&&(d=f),null!==d&&(g.matrix.fromArray(d.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),d.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(d.linearVelocity)):g.hasLinearVelocity=!1,d.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(d.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(B0t)))}return null!==g&&(g.visible=null!==d),null!==m&&(m.visible=null!==f),null!==v&&(v.visible=null!==p),this}}class V0t extends Hd{constructor(l,a,h,d,f,p,g,m,v,y){if((y=void 0!==y?y:ov)!==ov&&y!==U1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===h&&y===ov&&(h=sv),void 0===h&&y===U1&&(h=z1),super(null,d,f,p,g,m,y,h,v),this.isDepthTexture=!0,this.image={width:l,height:a},this.magFilter=void 0!==g?g:zo,this.minFilter=void 0!==m?m:zo,this.flipY=!1,this.generateMipmaps=!1}}class z0t extends G1{constructor(l,a){super();const h=this;let d=null,f=1,p=null,g="local-floor",m=null,v=null,y=null,_=null,b=null,C=null;const x=a.getContextAttributes();let S=null,w=null;const T=[],O=[],k=new xo;k.layers.enable(1),k.viewport=new ar;const D=new xo;D.layers.enable(2),D.viewport=new ar;const M=[k,D],A=new L0t;A.layers.enable(1),A.layers.enable(2);let L=null,E=null;function V(j){const Q=O.indexOf(j.inputSource);if(-1===Q)return;const J=T[Q];void 0!==J&&J.dispatchEvent({type:j.type,data:j.inputSource})}function z(){d.removeEventListener("select",V),d.removeEventListener("selectstart",V),d.removeEventListener("selectend",V),d.removeEventListener("squeeze",V),d.removeEventListener("squeezestart",V),d.removeEventListener("squeezeend",V),d.removeEventListener("end",z),d.removeEventListener("inputsourceschange",U);for(let j=0;j<T.length;j++){const Q=O[j];null!==Q&&(O[j]=null,T[j].disconnect(Q))}L=null,E=null,l.setRenderTarget(S),b=null,_=null,y=null,d=null,w=null,W.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function U(j){for(let Q=0;Q<j.removed.length;Q++){const J=j.removed[Q],te=O.indexOf(J);te>=0&&(O[te]=null,T[te].dispatchEvent({type:"disconnected",data:J}))}for(let Q=0;Q<j.added.length;Q++){const J=j.added[Q];let te=O.indexOf(J);if(-1===te){for(let ae=0;ae<T.length;ae++){if(ae>=O.length){O.push(J),te=ae;break}if(null===O[ae]){O[ae]=J,te=ae;break}}if(-1===te)break}const ce=T[te];ce&&ce.dispatchEvent({type:"connected",data:J})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let Q=T[j];return void 0===Q&&(Q=new x$,T[j]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(j){let Q=T[j];return void 0===Q&&(Q=new x$,T[j]=Q),Q.getGripSpace()},this.getHand=function(j){let Q=T[j];return void 0===Q&&(Q=new x$,T[j]=Q),Q.getHandSpace()},this.setFramebufferScaleFactor=function(j){f=j,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){g=j,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||p},this.setReferenceSpace=function(j){m=j},this.getBaseLayer=function(){return null!==_?_:b},this.getBinding=function(){return y},this.getFrame=function(){return C},this.getSession=function(){return d},this.setSession=function(){var j=yL(function*(Q){if(d=Q,null!==d){if(S=l.getRenderTarget(),d.addEventListener("select",V),d.addEventListener("selectstart",V),d.addEventListener("selectend",V),d.addEventListener("squeeze",V),d.addEventListener("squeezestart",V),d.addEventListener("squeezeend",V),d.addEventListener("end",z),d.addEventListener("inputsourceschange",U),!0!==x.xrCompatible&&(yield a.makeXRCompatible()),void 0===d.renderState.layers||!1===l.capabilities.isWebGL2)b=new XRWebGLLayer(d,a,{antialias:void 0!==d.renderState.layers||x.antialias,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:f}),d.updateRenderState({baseLayer:b}),w=new kl(b.framebufferWidth,b.framebufferHeight,{format:Dh,type:rv,encoding:l.outputEncoding});else{let J=null,te=null,ce=null;x.depth&&(ce=x.stencil?35056:33190,J=x.stencil?U1:ov,te=x.stencil?z1:sv);const ae={colorFormat:32856,depthFormat:ce,scaleFactor:f};y=new XRWebGLBinding(d,a),_=y.createProjectionLayer(ae),d.updateRenderState({layers:[_]}),w=new kl(_.textureWidth,_.textureHeight,{format:Dh,type:rv,depthTexture:new V0t(_.textureWidth,_.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,J),stencilBuffer:x.stencil,encoding:l.outputEncoding,samples:x.antialias?4:0}),l.properties.get(w).__ignoreDepthValues=_.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),m=null,p=yield d.requestReferenceSpace(g),W.setContext(d),W.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}});return function(Q){return j.apply(this,arguments)}}();const Z=new re,Y=new re;function $(j,Q){null===Q?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(Q.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(null===d)return;A.near=D.near=k.near=j.near,A.far=D.far=k.far=j.far,(L!==A.near||E!==A.far)&&(d.updateRenderState({depthNear:A.near,depthFar:A.far}),L=A.near,E=A.far);const Q=j.parent,J=A.cameras;$(A,Q);for(let ce=0;ce<J.length;ce++)$(J[ce],Q);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),j.position.copy(A.position),j.quaternion.copy(A.quaternion),j.scale.copy(A.scale),j.matrix.copy(A.matrix),j.matrixWorld.copy(A.matrixWorld);const te=j.children;for(let ce=0,ae=te.length;ce<ae;ce++)te[ce].updateMatrixWorld(!0);2===J.length?function N(j,Q,J){Z.setFromMatrixPosition(Q.matrixWorld),Y.setFromMatrixPosition(J.matrixWorld);const te=Z.distanceTo(Y),ce=Q.projectionMatrix.elements,ae=J.projectionMatrix.elements,Se=ce[14]/(ce[10]-1),_e=ce[14]/(ce[10]+1),Me=(ce[9]+1)/ce[5],Qe=(ce[9]-1)/ce[5],Ie=(ce[8]-1)/ce[0],Ve=(ae[8]+1)/ae[0],Je=Se*Ie,pe=Se*Ve,Le=te/(-Ie+Ve),tt=Le*-Ie;Q.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(tt),j.translateZ(Le),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();const st=Se+Le,Ye=_e+Le;j.projectionMatrix.makePerspective(Je-tt,pe+(te-tt),Me*_e/Ye*st,Qe*_e/Ye*st,st,Ye)}(A,k,D):A.projectionMatrix.copy(k.projectionMatrix)},this.getCamera=function(){return A},this.getFoveation=function(){return null!==_?_.fixedFoveation:null!==b?b.fixedFoveation:void 0},this.setFoveation=function(j){null!==_&&(_.fixedFoveation=j),null!==b&&void 0!==b.fixedFoveation&&(b.fixedFoveation=j)};let H=null;const W=new Lve;W.setAnimationLoop(function G(j,Q){if(v=Q.getViewerPose(m||p),C=Q,null!==v){const J=v.views;null!==b&&(l.setRenderTargetFramebuffer(w,b.framebuffer),l.setRenderTarget(w));let te=!1;J.length!==A.cameras.length&&(A.cameras.length=0,te=!0);for(let ce=0;ce<J.length;ce++){const ae=J[ce];let Se=null;if(null!==b)Se=b.getViewport(ae);else{const Me=y.getViewSubImage(_,ae);Se=Me.viewport,0===ce&&(l.setRenderTargetTextures(w,Me.colorTexture,_.ignoreDepthValues?void 0:Me.depthStencilTexture),l.setRenderTarget(w))}let _e=M[ce];void 0===_e&&(_e=new xo,_e.layers.enable(ce),_e.viewport=new ar,M[ce]=_e),_e.matrix.fromArray(ae.transform.matrix),_e.projectionMatrix.fromArray(ae.projectionMatrix),_e.viewport.set(Se.x,Se.y,Se.width,Se.height),0===ce&&A.matrix.copy(_e.matrix),!0===te&&A.cameras.push(_e)}}for(let J=0;J<T.length;J++){const te=O[J],ce=T[J];null!==te&&void 0!==ce&&ce.update(te,Q,m||p)}H&&H(j,Q),C=null}),this.setAnimationLoop=function(j){H=j},this.dispose=function(){}}}function U0t(c,l){function d(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map),w.alphaMap&&(S.alphaMap.value=w.alphaMap),w.bumpMap&&(S.bumpMap.value=w.bumpMap,S.bumpScale.value=w.bumpScale,1===w.side&&(S.bumpScale.value*=-1)),w.displacementMap&&(S.displacementMap.value=w.displacementMap,S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap),w.normalMap&&(S.normalMap.value=w.normalMap,S.normalScale.value.copy(w.normalScale),1===w.side&&S.normalScale.value.negate()),w.specularMap&&(S.specularMap.value=w.specularMap),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);const T=l.get(w).envMap;if(T&&(S.envMap.value=T,S.flipEnvMap.value=T.isCubeTexture&&!1===T.isRenderTargetTexture?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap){S.lightMap.value=w.lightMap;const D=!0!==c.physicallyCorrectLights?Math.PI:1;S.lightMapIntensity.value=w.lightMapIntensity*D}let O,k;w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity),w.map?O=w.map:w.specularMap?O=w.specularMap:w.displacementMap?O=w.displacementMap:w.normalMap?O=w.normalMap:w.bumpMap?O=w.bumpMap:w.roughnessMap?O=w.roughnessMap:w.metalnessMap?O=w.metalnessMap:w.alphaMap?O=w.alphaMap:w.emissiveMap?O=w.emissiveMap:w.clearcoatMap?O=w.clearcoatMap:w.clearcoatNormalMap?O=w.clearcoatNormalMap:w.clearcoatRoughnessMap?O=w.clearcoatRoughnessMap:w.iridescenceMap?O=w.iridescenceMap:w.iridescenceThicknessMap?O=w.iridescenceThicknessMap:w.specularIntensityMap?O=w.specularIntensityMap:w.specularColorMap?O=w.specularColorMap:w.transmissionMap?O=w.transmissionMap:w.thicknessMap?O=w.thicknessMap:w.sheenColorMap?O=w.sheenColorMap:w.sheenRoughnessMap&&(O=w.sheenRoughnessMap),void 0!==O&&(O.isWebGLRenderTarget&&(O=O.texture),!0===O.matrixAutoUpdate&&O.updateMatrix(),S.uvTransform.value.copy(O.matrix)),w.aoMap?k=w.aoMap:w.lightMap&&(k=w.lightMap),void 0!==k&&(k.isWebGLRenderTarget&&(k=k.texture),!0===k.matrixAutoUpdate&&k.updateMatrix(),S.uv2Transform.value.copy(k.matrix))}return{refreshFogUniforms:function a(S,w){S.fogColor.value.copy(w.color),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)},refreshMaterialUniforms:function h(S,w,T,O,k){w.isMeshBasicMaterial||w.isMeshLambertMaterial?d(S,w):w.isMeshToonMaterial?(d(S,w),function y(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}(S,w)):w.isMeshPhongMaterial?(d(S,w),function v(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}(S,w)):w.isMeshStandardMaterial?(d(S,w),function _(S,w){S.roughness.value=w.roughness,S.metalness.value=w.metalness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap),l.get(w).envMap&&(S.envMapIntensity.value=w.envMapIntensity)}(S,w),w.isMeshPhysicalMaterial&&function b(S,w,T){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),S.clearcoatNormalMap.value=w.clearcoatNormalMap,1===w.side&&S.clearcoatNormalScale.value.negate())),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=T.texture,S.transmissionSamplerSize.value.set(T.width,T.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap)}(S,w,k)):w.isMeshMatcapMaterial?(d(S,w),function C(S,w){w.matcap&&(S.matcap.value=w.matcap)}(S,w)):w.isMeshDepthMaterial?d(S,w):w.isMeshDistanceMaterial?(d(S,w),function x(S,w){S.referencePosition.value.copy(w.referencePosition),S.nearDistance.value=w.nearDistance,S.farDistance.value=w.farDistance}(S,w)):w.isMeshNormalMaterial?d(S,w):w.isLineBasicMaterial?(function f(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity}(S,w),w.isLineDashedMaterial&&function p(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}(S,w)):w.isPointsMaterial?function g(S,w,T,O){let k;S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*T,S.scale.value=.5*O,w.map&&(S.map.value=w.map),w.alphaMap&&(S.alphaMap.value=w.alphaMap),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest),w.map?k=w.map:w.alphaMap&&(k=w.alphaMap),void 0!==k&&(!0===k.matrixAutoUpdate&&k.updateMatrix(),S.uvTransform.value.copy(k.matrix))}(S,w,T,O):w.isSpriteMaterial?function m(S,w){let T;S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map),w.alphaMap&&(S.alphaMap.value=w.alphaMap),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest),w.map?T=w.map:w.alphaMap&&(T=w.alphaMap),void 0!==T&&(!0===T.matrixAutoUpdate&&T.updateMatrix(),S.uvTransform.value.copy(T.matrix))}(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function dye(c={}){this.isWebGLRenderer=!0;const l=void 0!==c.canvas?c.canvas:function H0t(){const c=x2("canvas");return c.style.display="block",c}(),a=void 0!==c.context?c.context:null,h=void 0===c.depth||c.depth,d=void 0===c.stencil||c.stencil,f=void 0!==c.antialias&&c.antialias,p=void 0===c.premultipliedAlpha||c.premultipliedAlpha,g=void 0!==c.preserveDrawingBuffer&&c.preserveDrawingBuffer,m=void 0!==c.powerPreference?c.powerPreference:"default",v=void 0!==c.failIfMajorPerformanceCaveat&&c.failIfMajorPerformanceCaveat;let y;y=null!==a?a.getContextAttributes().alpha:void 0!==c.alpha&&c.alpha;let _=null,b=null;const C=[],x=[];this.domElement=l,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=av,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const S=this;let w=!1,T=0,O=0,k=null,D=-1,M=null;const A=new ar,L=new ar;let E=null,V=l.width,z=l.height,U=1,Z=null,Y=null;const N=new ar(0,0,V,z),$=new ar(0,0,V,z);let H=!1;const G=new p$;let W=!1,j=!1,Q=null;const J=new bi,te=new mt,ce=new re,ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Se(){return null===k?U:1}let Qe,Ie,Ve,Je,pe,Le,tt,st,Ye,Oe,Ze,Gt,Tn,Gn,ge,oe,lt,xt,Qt,Nt,Bt,Ke,en,_e=a;function Me(me,rt){for(let _t=0;_t<me.length;_t++){const It=l.getContext(me[_t],rt);if(null!==It)return It}return null}try{const me={alpha:!0,depth:h,stencil:d,antialias:f,premultipliedAlpha:p,preserveDrawingBuffer:g,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in l&&l.setAttribute("data-engine","three.js r142"),l.addEventListener("webglcontextlost",Fe,!1),l.addEventListener("webglcontextrestored",cn,!1),l.addEventListener("webglcontextcreationerror",rn,!1),null===_e){const rt=["webgl2","webgl","experimental-webgl"];if(!0===S.isWebGL1Renderer&&rt.shift(),_e=Me(rt,me),null===_e)throw Me(rt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===_e.getShaderPrecisionFormat&&(_e.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(me){throw console.error("THREE.WebGLRenderer: "+me.message),me}function Zt(){Qe=new tmt(_e),Ie=new Zgt(_e,Qe,c),Qe.init(Ie),Ke=new N0t(_e,Qe,Ie),Ve=new R0t(_e,Qe,Ie),Je=new rmt,pe=new x0t,Le=new F0t(_e,Qe,Ve,pe,Ie,Ke,Je),tt=new Ygt(S),st=new emt(S),Ye=new qft(_e,Ie),en=new jgt(_e,Qe,Ye,Ie),Oe=new nmt(_e,Ye,Je,en),Ze=new lmt(_e,Oe,Ye,Je),Qt=new amt(_e,Ie,Le),oe=new Xgt(pe),Gt=new C0t(S,tt,st,Qe,Ie,en,oe),Tn=new U0t(S,pe),Gn=new S0t,ge=new E0t(Qe,Ie),xt=new Qgt(S,tt,Ve,Ze,y,p),lt=new P0t(S,Ze,Ie),Nt=new qgt(_e,Qe,Je,Ie),Bt=new imt(_e,Qe,Je,Ie),Je.programs=Gt.programs,S.capabilities=Ie,S.extensions=Qe,S.properties=pe,S.renderLists=Gn,S.shadowMap=lt,S.state=Ve,S.info=Je}Zt();const xn=new z0t(S,_e);function Fe(me){me.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function cn(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const me=Je.autoReset,rt=lt.enabled,_t=lt.autoUpdate,ft=lt.needsUpdate,It=lt.type;Zt(),Je.autoReset=me,lt.enabled=rt,lt.autoUpdate=_t,lt.needsUpdate=ft,lt.type=It}function rn(me){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",me.statusMessage)}function vi(me){const rt=me.target;rt.removeEventListener("dispose",vi),function Nn(me){(function Di(me){const rt=pe.get(me).programs;void 0!==rt&&(rt.forEach(function(_t){Gt.releaseProgram(_t)}),me.isShaderMaterial&&Gt.releaseShaderCache(me))})(me),pe.remove(me)}(rt)}this.xr=xn,this.getContext=function(){return _e},this.getContextAttributes=function(){return _e.getContextAttributes()},this.forceContextLoss=function(){const me=Qe.get("WEBGL_lose_context");me&&me.loseContext()},this.forceContextRestore=function(){const me=Qe.get("WEBGL_lose_context");me&&me.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(me){void 0!==me&&(U=me,this.setSize(V,z,!1))},this.getSize=function(me){return me.set(V,z)},this.setSize=function(me,rt,_t){xn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(V=me,z=rt,l.width=Math.floor(me*U),l.height=Math.floor(rt*U),!1!==_t&&(l.style.width=me+"px",l.style.height=rt+"px"),this.setViewport(0,0,me,rt))},this.getDrawingBufferSize=function(me){return me.set(V*U,z*U).floor()},this.setDrawingBufferSize=function(me,rt,_t){V=me,z=rt,U=_t,l.width=Math.floor(me*_t),l.height=Math.floor(rt*_t),this.setViewport(0,0,me,rt)},this.getCurrentViewport=function(me){return me.copy(A)},this.getViewport=function(me){return me.copy(N)},this.setViewport=function(me,rt,_t,ft){me.isVector4?N.set(me.x,me.y,me.z,me.w):N.set(me,rt,_t,ft),Ve.viewport(A.copy(N).multiplyScalar(U).floor())},this.getScissor=function(me){return me.copy($)},this.setScissor=function(me,rt,_t,ft){me.isVector4?$.set(me.x,me.y,me.z,me.w):$.set(me,rt,_t,ft),Ve.scissor(L.copy($).multiplyScalar(U).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(me){Ve.setScissorTest(H=me)},this.setOpaqueSort=function(me){Z=me},this.setTransparentSort=function(me){Y=me},this.getClearColor=function(me){return me.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor.apply(xt,arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha.apply(xt,arguments)},this.clear=function(me=!0,rt=!0,_t=!0){let ft=0;me&&(ft|=16384),rt&&(ft|=256),_t&&(ft|=1024),_e.clear(ft)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){l.removeEventListener("webglcontextlost",Fe,!1),l.removeEventListener("webglcontextrestored",cn,!1),l.removeEventListener("webglcontextcreationerror",rn,!1),Gn.dispose(),ge.dispose(),pe.dispose(),tt.dispose(),st.dispose(),Ze.dispose(),en.dispose(),Gt.dispose(),xn.dispose(),xn.removeEventListener("sessionstart",Br),xn.removeEventListener("sessionend",Vr),Q&&(Q.dispose(),Q=null),Il.stop()},this.renderBufferDirect=function(me,rt,_t,ft,It,Ci){null===rt&&(rt=ae);const Ni=It.isMesh&&It.matrixWorld.determinant()<0,Ji=function f2t(me,rt,_t,ft,It){!0!==rt.isScene&&(rt=ae),Le.resetTextureUnits();const Ci=rt.fog,Ji=null===k?S.outputEncoding:!0===k.isXRRenderTarget?k.texture.encoding:av,qi=(ft.isMeshStandardMaterial?st:tt).get(ft.envMap||(ft.isMeshStandardMaterial?rt.environment:null)),zr=!0===ft.vertexColors&&!!_t.attributes.color&&4===_t.attributes.color.itemSize,mr=!!ft.normalMap&&!!_t.attributes.tangent,_r=!!_t.morphAttributes.position,Xs=!!_t.morphAttributes.normal,Av=!!_t.morphAttributes.color,Fb=ft.toneMapped?S.toneMapping:0,Nb=_t.morphAttributes.position||_t.morphAttributes.normal||_t.morphAttributes.color,Kd=void 0!==Nb?Nb.length:0,Pr=pe.get(ft),Lb=b.state.lights;!0!==W||!0!==j&&me===M||oe.setState(ft,me,me===M&&ft.id===D);let So=!1;ft.version===Pr.__version?(Pr.needsLights&&Pr.lightsStateVersion!==Lb.state.version||Pr.outputEncoding!==Ji||It.isInstancedMesh&&!1===Pr.instancing||!It.isInstancedMesh&&!0===Pr.instancing||It.isSkinnedMesh&&!1===Pr.skinning||!It.isSkinnedMesh&&!0===Pr.skinning||Pr.envMap!==qi||!0===ft.fog&&Pr.fog!==Ci||void 0!==Pr.numClippingPlanes&&(Pr.numClippingPlanes!==oe.numPlanes||Pr.numIntersection!==oe.numIntersection)||Pr.vertexAlphas!==zr||Pr.vertexTangents!==mr||Pr.morphTargets!==_r||Pr.morphNormals!==Xs||Pr.morphColors!==Av||Pr.toneMapping!==Fb||!0===Ie.isWebGL2&&Pr.morphTargetsCount!==Kd)&&(So=!0):(So=!0,Pr.__version=ft.version);let Jd=Pr.currentProgram;!0===So&&(Jd=nG(ft,rt,It));let hm=!1,aT=!1,iG=!1;const Pl=Jd.getUniforms(),lT=Pr.uniforms;if(Ve.useProgram(Jd.program)&&(hm=!0,aT=!0,iG=!0),ft.id!==D&&(D=ft.id,aT=!0),hm||M!==me){if(Pl.setValue(_e,"projectionMatrix",me.projectionMatrix),Ie.logarithmicDepthBuffer&&Pl.setValue(_e,"logDepthBufFC",2/(Math.log(me.far+1)/Math.LN2)),M!==me&&(M=me,aT=!0,iG=!0),ft.isShaderMaterial||ft.isMeshPhongMaterial||ft.isMeshToonMaterial||ft.isMeshStandardMaterial||ft.envMap){const ef=Pl.map.cameraPosition;void 0!==ef&&ef.setValue(_e,ce.setFromMatrixPosition(me.matrixWorld))}(ft.isMeshPhongMaterial||ft.isMeshToonMaterial||ft.isMeshLambertMaterial||ft.isMeshBasicMaterial||ft.isMeshStandardMaterial||ft.isShaderMaterial)&&Pl.setValue(_e,"isOrthographic",!0===me.isOrthographicCamera),(ft.isMeshPhongMaterial||ft.isMeshToonMaterial||ft.isMeshLambertMaterial||ft.isMeshBasicMaterial||ft.isMeshStandardMaterial||ft.isShaderMaterial||ft.isShadowMaterial||It.isSkinnedMesh)&&Pl.setValue(_e,"viewMatrix",me.matrixWorldInverse)}if(It.isSkinnedMesh){Pl.setOptional(_e,It,"bindMatrix"),Pl.setOptional(_e,It,"bindMatrixInverse");const ef=It.skeleton;ef&&(Ie.floatVertexTextures?(null===ef.boneTexture&&ef.computeBoneTexture(),Pl.setValue(_e,"boneTexture",ef.boneTexture,Le),Pl.setValue(_e,"boneTextureSize",ef.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const rG=_t.morphAttributes;return(void 0!==rG.position||void 0!==rG.normal||void 0!==rG.color&&!0===Ie.isWebGL2)&&Qt.update(It,_t,ft,Jd),(aT||Pr.receiveShadow!==It.receiveShadow)&&(Pr.receiveShadow=It.receiveShadow,Pl.setValue(_e,"receiveShadow",It.receiveShadow)),aT&&(Pl.setValue(_e,"toneMappingExposure",S.toneMappingExposure),Pr.needsLights&&function p2t(me,rt){me.ambientLightColor.needsUpdate=rt,me.lightProbe.needsUpdate=rt,me.directionalLights.needsUpdate=rt,me.directionalLightShadows.needsUpdate=rt,me.pointLights.needsUpdate=rt,me.pointLightShadows.needsUpdate=rt,me.spotLights.needsUpdate=rt,me.spotLightShadows.needsUpdate=rt,me.rectAreaLights.needsUpdate=rt,me.hemisphereLights.needsUpdate=rt}(lT,iG),Ci&&!0===ft.fog&&Tn.refreshFogUniforms(lT,Ci),Tn.refreshMaterialUniforms(lT,ft,U,z,Q),k3.upload(_e,Pr.uniformsList,lT,Le)),ft.isShaderMaterial&&!0===ft.uniformsNeedUpdate&&(k3.upload(_e,Pr.uniformsList,lT,Le),ft.uniformsNeedUpdate=!1),ft.isSpriteMaterial&&Pl.setValue(_e,"center",It.center),Pl.setValue(_e,"modelViewMatrix",It.modelViewMatrix),Pl.setValue(_e,"normalMatrix",It.normalMatrix),Pl.setValue(_e,"modelMatrix",It.matrixWorld),Jd}(me,rt,_t,ft,It);Ve.setMaterial(ft,Ni);let qi=_t.index;const zr=_t.attributes.position;if(null===qi){if(void 0===zr||0===zr.count)return}else if(0===qi.count)return;let mr=1;!0===ft.wireframe&&(qi=Oe.getWireframeAttribute(_t),mr=2),en.setup(It,ft,Ji,_t,qi);let _r,Xs=Nt;null!==qi&&(_r=Ye.get(qi),Xs=Bt,Xs.setIndex(_r));const Av=null!==qi?qi.count:zr.count,Fb=_t.drawRange.start*mr,Nb=_t.drawRange.count*mr,Kd=null!==Ci?Ci.start*mr:0,Pr=null!==Ci?Ci.count*mr:1/0,Lb=Math.max(Fb,Kd),So=Math.min(Av,Fb+Nb,Kd+Pr)-1,Jd=Math.max(0,So-Lb+1);if(0!==Jd){if(It.isMesh)!0===ft.wireframe?(Ve.setLineWidth(ft.wireframeLinewidth*Se()),Xs.setMode(1)):Xs.setMode(4);else if(It.isLine){let hm=ft.linewidth;void 0===hm&&(hm=1),Ve.setLineWidth(hm*Se()),Xs.setMode(It.isLineSegments?1:It.isLineLoop?2:3)}else It.isPoints?Xs.setMode(0):It.isSprite&&Xs.setMode(4);if(It.isInstancedMesh)Xs.renderInstances(Lb,Jd,It.count);else if(_t.isInstancedBufferGeometry){const hm=Math.min(_t.instanceCount,_t._maxInstanceCount);Xs.renderInstances(Lb,Jd,hm)}else Xs.render(Lb,Jd)}},this.compile=function(me,rt){b=ge.get(me),b.init(),x.push(b),me.traverseVisible(function(_t){_t.isLight&&_t.layers.test(rt.layers)&&(b.pushLight(_t),_t.castShadow&&b.pushShadow(_t))}),b.setupLights(S.physicallyCorrectLights),me.traverse(function(_t){const ft=_t.material;if(ft)if(Array.isArray(ft))for(let It=0;It<ft.length;It++)nG(ft[It],me,_t);else nG(ft,me,_t)}),x.pop(),b=null};let nn=null;function Br(){Il.stop()}function Vr(){Il.start()}const Il=new Lve;function Yd(me,rt,_t,ft){if(!1===me.visible)return;if(me.layers.test(rt.layers))if(me.isGroup)_t=me.renderOrder;else if(me.isLOD)!0===me.autoUpdate&&me.update(rt);else if(me.isLight)b.pushLight(me),me.castShadow&&b.pushShadow(me);else if(me.isSprite){if(!me.frustumCulled||G.intersectsSprite(me)){ft&&ce.setFromMatrixPosition(me.matrixWorld).applyMatrix4(J);const Ni=Ze.update(me),Ji=me.material;Ji.visible&&_.push(me,Ni,Ji,_t,ce.z,null)}}else if((me.isMesh||me.isLine||me.isPoints)&&(me.isSkinnedMesh&&me.skeleton.frame!==Je.render.frame&&(me.skeleton.update(),me.skeleton.frame=Je.render.frame),!me.frustumCulled||G.intersectsObject(me))){ft&&ce.setFromMatrixPosition(me.matrixWorld).applyMatrix4(J);const Ni=Ze.update(me),Ji=me.material;if(Array.isArray(Ji)){const qi=Ni.groups;for(let zr=0,mr=qi.length;zr<mr;zr++){const _r=qi[zr],Xs=Ji[_r.materialIndex];Xs&&Xs.visible&&_.push(me,Ni,Xs,_t,ce.z,_r)}}else Ji.visible&&_.push(me,Ni,Ji,_t,ce.z,null)}const Ci=me.children;for(let Ni=0,Ji=Ci.length;Ni<Ji;Ni++)Yd(Ci[Ni],rt,_t,ft)}function nCe(me,rt,_t,ft){const It=me.opaque,Ci=me.transmissive,Ni=me.transparent;b.setupLightsView(_t),Ci.length>0&&function h2t(me,rt,_t){const ft=Ie.isWebGL2;null===Q&&(Q=new kl(1,1,{generateMipmaps:!0,type:Qe.has("EXT_color_buffer_half_float")?_2:rv,minFilter:1008,samples:ft&&!0===f?4:0})),S.getDrawingBufferSize(te),ft?Q.setSize(te.x,te.y):Q.setSize(n3(te.x),n3(te.y));const It=S.getRenderTarget();S.setRenderTarget(Q),S.clear();const Ci=S.toneMapping;S.toneMapping=0,Z4(me,rt,_t),S.toneMapping=Ci,Le.updateMultisampleRenderTarget(Q),Le.updateRenderTargetMipmap(Q),S.setRenderTarget(It)}(It,rt,_t),ft&&Ve.viewport(A.copy(ft)),It.length>0&&Z4(It,rt,_t),Ci.length>0&&Z4(Ci,rt,_t),Ni.length>0&&Z4(Ni,rt,_t),Ve.buffers.depth.setTest(!0),Ve.buffers.depth.setMask(!0),Ve.buffers.color.setMask(!0),Ve.setPolygonOffset(!1)}function Z4(me,rt,_t){const ft=!0===rt.isScene?rt.overrideMaterial:null;for(let It=0,Ci=me.length;It<Ci;It++){const Ni=me[It],Ji=Ni.object,qi=Ni.geometry,zr=null===ft?Ni.material:ft,mr=Ni.group;Ji.layers.test(_t.layers)&&d2t(Ji,rt,_t,qi,zr,mr)}}function d2t(me,rt,_t,ft,It,Ci){me.onBeforeRender(S,rt,_t,ft,It,Ci),me.modelViewMatrix.multiplyMatrices(_t.matrixWorldInverse,me.matrixWorld),me.normalMatrix.getNormalMatrix(me.modelViewMatrix),It.onBeforeRender(S,rt,_t,ft,me,Ci),!0===It.transparent&&2===It.side?(It.side=1,It.needsUpdate=!0,S.renderBufferDirect(_t,rt,ft,It,me,Ci),It.side=0,It.needsUpdate=!0,S.renderBufferDirect(_t,rt,ft,It,me,Ci),It.side=2):S.renderBufferDirect(_t,rt,ft,It,me,Ci),me.onAfterRender(S,rt,_t,ft,It,Ci)}function nG(me,rt,_t){!0!==rt.isScene&&(rt=ae);const ft=pe.get(me),It=b.state.lights,Ni=It.state.version,Ji=Gt.getParameters(me,It.state,b.state.shadowsArray,rt,_t),qi=Gt.getProgramCacheKey(Ji);let zr=ft.programs;ft.environment=me.isMeshStandardMaterial?rt.environment:null,ft.fog=rt.fog,ft.envMap=(me.isMeshStandardMaterial?st:tt).get(me.envMap||ft.environment),void 0===zr&&(me.addEventListener("dispose",vi),zr=new Map,ft.programs=zr);let mr=zr.get(qi);if(void 0!==mr){if(ft.currentProgram===mr&&ft.lightsStateVersion===Ni)return iCe(me,Ji),mr}else Ji.uniforms=Gt.getUniforms(me),me.onBuild(_t,Ji,S),me.onBeforeCompile(Ji,S),mr=Gt.acquireProgram(Ji,qi),zr.set(qi,mr),ft.uniforms=Ji.uniforms;const _r=ft.uniforms;(!me.isShaderMaterial&&!me.isRawShaderMaterial||!0===me.clipping)&&(_r.clippingPlanes=oe.uniform),iCe(me,Ji),ft.needsLights=function g2t(me){return me.isMeshLambertMaterial||me.isMeshToonMaterial||me.isMeshPhongMaterial||me.isMeshStandardMaterial||me.isShadowMaterial||me.isShaderMaterial&&!0===me.lights}(me),ft.lightsStateVersion=Ni,ft.needsLights&&(_r.ambientLightColor.value=It.state.ambient,_r.lightProbe.value=It.state.probe,_r.directionalLights.value=It.state.directional,_r.directionalLightShadows.value=It.state.directionalShadow,_r.spotLights.value=It.state.spot,_r.spotLightShadows.value=It.state.spotShadow,_r.rectAreaLights.value=It.state.rectArea,_r.ltc_1.value=It.state.rectAreaLTC1,_r.ltc_2.value=It.state.rectAreaLTC2,_r.pointLights.value=It.state.point,_r.pointLightShadows.value=It.state.pointShadow,_r.hemisphereLights.value=It.state.hemi,_r.directionalShadowMap.value=It.state.directionalShadowMap,_r.directionalShadowMatrix.value=It.state.directionalShadowMatrix,_r.spotShadowMap.value=It.state.spotShadowMap,_r.spotShadowMatrix.value=It.state.spotShadowMatrix,_r.pointShadowMap.value=It.state.pointShadowMap,_r.pointShadowMatrix.value=It.state.pointShadowMatrix);const Xs=mr.getUniforms(),Av=k3.seqWithValue(Xs.seq,_r);return ft.currentProgram=mr,ft.uniformsList=Av,mr}function iCe(me,rt){const _t=pe.get(me);_t.outputEncoding=rt.outputEncoding,_t.instancing=rt.instancing,_t.skinning=rt.skinning,_t.morphTargets=rt.morphTargets,_t.morphNormals=rt.morphNormals,_t.morphColors=rt.morphColors,_t.morphTargetsCount=rt.morphTargetsCount,_t.numClippingPlanes=rt.numClippingPlanes,_t.numIntersection=rt.numClipIntersection,_t.vertexAlphas=rt.vertexAlphas,_t.vertexTangents=rt.vertexTangents,_t.toneMapping=rt.toneMapping}Il.setAnimationLoop(function ki(me){nn&&nn(me)}),"undefined"!=typeof self&&Il.setContext(self),this.setAnimationLoop=function(me){nn=me,xn.setAnimationLoop(me),null===me?Il.stop():Il.start()},xn.addEventListener("sessionstart",Br),xn.addEventListener("sessionend",Vr),this.render=function(me,rt){if(void 0===rt||!0===rt.isCamera){if(!0!==w){if(!0===me.autoUpdate&&me.updateMatrixWorld(),null===rt.parent&&rt.updateMatrixWorld(),!0===xn.enabled&&!0===xn.isPresenting&&(!0===xn.cameraAutoUpdate&&xn.updateCamera(rt),rt=xn.getCamera()),!0===me.isScene&&me.onBeforeRender(S,me,rt,k),b=ge.get(me,x.length),b.init(),x.push(b),J.multiplyMatrices(rt.projectionMatrix,rt.matrixWorldInverse),G.setFromProjectionMatrix(J),j=this.localClippingEnabled,W=oe.init(this.clippingPlanes,j,rt),_=Gn.get(me,C.length),_.init(),C.push(_),Yd(me,rt,0,S.sortObjects),_.finish(),!0===S.sortObjects&&_.sort(Z,Y),!0===W&&oe.beginShadows(),lt.render(b.state.shadowsArray,me,rt),!0===W&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),xt.render(_,me),b.setupLights(S.physicallyCorrectLights),rt.isArrayCamera){const ft=rt.cameras;for(let It=0,Ci=ft.length;It<Ci;It++){const Ni=ft[It];nCe(_,me,Ni,Ni.viewport)}}else nCe(_,me,rt);null!==k&&(Le.updateMultisampleRenderTarget(k),Le.updateRenderTargetMipmap(k)),!0===me.isScene&&me.onAfterRender(S,me,rt),en.resetDefaultState(),D=-1,M=null,x.pop(),b=x.length>0?x[x.length-1]:null,C.pop(),_=C.length>0?C[C.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(me,rt,_t){pe.get(me.texture).__webglTexture=rt,pe.get(me.depthTexture).__webglTexture=_t;const ft=pe.get(me);ft.__hasExternalTextures=!0,ft.__hasExternalTextures&&(ft.__autoAllocateDepthBuffer=void 0===_t,ft.__autoAllocateDepthBuffer||!0===Qe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ft.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(me,rt){const _t=pe.get(me);_t.__webglFramebuffer=rt,_t.__useDefaultFramebuffer=void 0===rt},this.setRenderTarget=function(me,rt=0,_t=0){k=me,T=rt,O=_t;let ft=!0;if(me){const qi=pe.get(me);void 0!==qi.__useDefaultFramebuffer?(Ve.bindFramebuffer(36160,null),ft=!1):void 0===qi.__webglFramebuffer?Le.setupRenderTarget(me):qi.__hasExternalTextures&&Le.rebindTextures(me,pe.get(me.texture).__webglTexture,pe.get(me.depthTexture).__webglTexture)}let It=null,Ci=!1,Ni=!1;if(me){const qi=me.texture;(qi.isData3DTexture||qi.isDataArrayTexture)&&(Ni=!0);const zr=pe.get(me).__webglFramebuffer;me.isWebGLCubeRenderTarget?(It=zr[rt],Ci=!0):It=Ie.isWebGL2&&me.samples>0&&!1===Le.useMultisampledRTT(me)?pe.get(me).__webglMultisampledFramebuffer:zr,A.copy(me.viewport),L.copy(me.scissor),E=me.scissorTest}else A.copy(N).multiplyScalar(U).floor(),L.copy($).multiplyScalar(U).floor(),E=H;if(Ve.bindFramebuffer(36160,It)&&Ie.drawBuffers&&ft&&Ve.drawBuffers(me,It),Ve.viewport(A),Ve.scissor(L),Ve.setScissorTest(E),Ci){const qi=pe.get(me.texture);_e.framebufferTexture2D(36160,36064,34069+rt,qi.__webglTexture,_t)}else if(Ni){const qi=pe.get(me.texture);_e.framebufferTextureLayer(36160,36064,qi.__webglTexture,_t||0,rt||0)}D=-1},this.readRenderTargetPixels=function(me,rt,_t,ft,It,Ci,Ni){if(!me||!me.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ji=pe.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&void 0!==Ni&&(Ji=Ji[Ni]),Ji){Ve.bindFramebuffer(36160,Ji);try{const qi=me.texture,zr=qi.format,mr=qi.type;if(zr!==Dh&&Ke.convert(zr)!==_e.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const _r=mr===_2&&(Qe.has("EXT_color_buffer_half_float")||Ie.isWebGL2&&Qe.has("EXT_color_buffer_float"));if(!(mr===rv||Ke.convert(mr)===_e.getParameter(35738)||mr===Gg&&(Ie.isWebGL2||Qe.has("OES_texture_float")||Qe.has("WEBGL_color_buffer_float"))||_r))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");rt>=0&&rt<=me.width-ft&&_t>=0&&_t<=me.height-It&&_e.readPixels(rt,_t,ft,It,Ke.convert(zr),Ke.convert(mr),Ci)}finally{const qi=null!==k?pe.get(k).__webglFramebuffer:null;Ve.bindFramebuffer(36160,qi)}}},this.copyFramebufferToTexture=function(me,rt,_t=0){const ft=Math.pow(2,-_t),It=Math.floor(rt.image.width*ft),Ci=Math.floor(rt.image.height*ft);Le.setTexture2D(rt,0),_e.copyTexSubImage2D(3553,_t,0,0,me.x,me.y,It,Ci),Ve.unbindTexture()},this.copyTextureToTexture=function(me,rt,_t,ft=0){const It=rt.image.width,Ci=rt.image.height,Ni=Ke.convert(_t.format),Ji=Ke.convert(_t.type);Le.setTexture2D(_t,0),_e.pixelStorei(37440,_t.flipY),_e.pixelStorei(37441,_t.premultiplyAlpha),_e.pixelStorei(3317,_t.unpackAlignment),rt.isDataTexture?_e.texSubImage2D(3553,ft,me.x,me.y,It,Ci,Ni,Ji,rt.image.data):rt.isCompressedTexture?_e.compressedTexSubImage2D(3553,ft,me.x,me.y,rt.mipmaps[0].width,rt.mipmaps[0].height,Ni,rt.mipmaps[0].data):_e.texSubImage2D(3553,ft,me.x,me.y,Ni,Ji,rt.image),0===ft&&_t.generateMipmaps&&_e.generateMipmap(3553),Ve.unbindTexture()},this.copyTextureToTexture3D=function(me,rt,_t,ft,It=0){if(S.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ci=me.max.x-me.min.x+1,Ni=me.max.y-me.min.y+1,Ji=me.max.z-me.min.z+1,qi=Ke.convert(ft.format),zr=Ke.convert(ft.type);let mr;if(ft.isData3DTexture)Le.setTexture3D(ft,0),mr=32879;else{if(!ft.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Le.setTexture2DArray(ft,0),mr=35866}_e.pixelStorei(37440,ft.flipY),_e.pixelStorei(37441,ft.premultiplyAlpha),_e.pixelStorei(3317,ft.unpackAlignment);const _r=_e.getParameter(3314),Xs=_e.getParameter(32878),Av=_e.getParameter(3316),Fb=_e.getParameter(3315),Nb=_e.getParameter(32877),Kd=_t.isCompressedTexture?_t.mipmaps[0]:_t.image;_e.pixelStorei(3314,Kd.width),_e.pixelStorei(32878,Kd.height),_e.pixelStorei(3316,me.min.x),_e.pixelStorei(3315,me.min.y),_e.pixelStorei(32877,me.min.z),_t.isDataTexture||_t.isData3DTexture?_e.texSubImage3D(mr,It,rt.x,rt.y,rt.z,Ci,Ni,Ji,qi,zr,Kd.data):_t.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),_e.compressedTexSubImage3D(mr,It,rt.x,rt.y,rt.z,Ci,Ni,Ji,qi,Kd.data)):_e.texSubImage3D(mr,It,rt.x,rt.y,rt.z,Ci,Ni,Ji,qi,zr,Kd),_e.pixelStorei(3314,_r),_e.pixelStorei(32878,Xs),_e.pixelStorei(3316,Av),_e.pixelStorei(3315,Fb),_e.pixelStorei(32877,Nb),0===It&&ft.generateMipmaps&&_e.generateMipmap(mr),Ve.unbindTexture()},this.initTexture=function(me){me.isCubeTexture?Le.setTextureCube(me,0):me.isData3DTexture?Le.setTexture3D(me,0):me.isDataArrayTexture?Le.setTexture2DArray(me,0):Le.setTexture2D(me,0),Ve.unbindTexture()},this.resetState=function(){T=0,O=0,k=null,Ve.reset(),en.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class $0t extends dye{}).prototype.isWebGL1Renderer=!0;class k2 extends qc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(l,a){return super.copy(l,a),null!==l.background&&(this.background=l.background.clone()),null!==l.environment&&(this.environment=l.environment.clone()),null!==l.fog&&(this.fog=l.fog.clone()),null!==l.overrideMaterial&&(this.overrideMaterial=l.overrideMaterial.clone()),this.autoUpdate=l.autoUpdate,this.matrixAutoUpdate=l.matrixAutoUpdate,this}toJSON(l){const a=super.toJSON(l);return null!==this.fog&&(a.object.fog=this.fog.toJSON()),a}}class bb extends Hd{constructor(l=null,a=1,h=1,d,f,p,g,m,v=zo,y=zo,_,b){super(null,p,g,m,v,y,d,f,_,b),this.isDataTexture=!0,this.image={data:l,width:a,height:h},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nye extends Hd{constructor(l,a,h,d,f,p,g,m,v){super(l,a,h,d,f,p,g,m,v),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Wd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(l,a){const h=this.getUtoTmapping(l);return this.getPoint(h,a)}getPoints(l=5){const a=[];for(let h=0;h<=l;h++)a.push(this.getPoint(h/l));return a}getSpacedPoints(l=5){const a=[];for(let h=0;h<=l;h++)a.push(this.getPointAt(h/l));return a}getLength(){const l=this.getLengths();return l[l.length-1]}getLengths(l=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const a=[];let h,d=this.getPoint(0),f=0;a.push(0);for(let p=1;p<=l;p++)h=this.getPoint(p/l),f+=h.distanceTo(d),a.push(f),d=h;return this.cacheArcLengths=a,a}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(l,a){const h=this.getLengths();let d=0;const f=h.length;let p;p=a||l*h[f-1];let v,g=0,m=f-1;for(;g<=m;)if(d=Math.floor(g+(m-g)/2),v=h[d]-p,v<0)g=d+1;else{if(!(v>0)){m=d;break}m=d-1}if(d=m,h[d]===p)return d/(f-1);const y=h[d];return(d+(p-y)/(h[d+1]-y))/(f-1)}getTangent(l,a){let d=l-1e-4,f=l+1e-4;d<0&&(d=0),f>1&&(f=1);const p=this.getPoint(d),g=this.getPoint(f),m=a||(p.isVector2?new mt:new re);return m.copy(g).sub(p).normalize(),m}getTangentAt(l,a){const h=this.getUtoTmapping(l);return this.getTangent(h,a)}computeFrenetFrames(l,a){const h=new re,d=[],f=[],p=[],g=new re,m=new bi;for(let C=0;C<=l;C++)d[C]=this.getTangentAt(C/l,new re);f[0]=new re,p[0]=new re;let v=Number.MAX_VALUE;const y=Math.abs(d[0].x),_=Math.abs(d[0].y),b=Math.abs(d[0].z);y<=v&&(v=y,h.set(1,0,0)),_<=v&&(v=_,h.set(0,1,0)),b<=v&&h.set(0,0,1),g.crossVectors(d[0],h).normalize(),f[0].crossVectors(d[0],g),p[0].crossVectors(d[0],f[0]);for(let C=1;C<=l;C++){if(f[C]=f[C-1].clone(),p[C]=p[C-1].clone(),g.crossVectors(d[C-1],d[C]),g.length()>Number.EPSILON){g.normalize();const x=Math.acos(so(d[C-1].dot(d[C]),-1,1));f[C].applyMatrix4(m.makeRotationAxis(g,x))}p[C].crossVectors(d[C],f[C])}if(!0===a){let C=Math.acos(so(f[0].dot(f[l]),-1,1));C/=l,d[0].dot(g.crossVectors(f[0],f[l]))>0&&(C=-C);for(let x=1;x<=l;x++)f[x].applyMatrix4(m.makeRotationAxis(d[x],C*x)),p[x].crossVectors(d[x],f[x])}return{tangents:d,normals:f,binormals:p}}clone(){return(new this.constructor).copy(this)}copy(l){return this.arcLengthDivisions=l.arcLengthDivisions,this}toJSON(){const l={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return l.arcLengthDivisions=this.arcLengthDivisions,l.type=this.type,l}fromJSON(l){return this.arcLengthDivisions=l.arcLengthDivisions,this}}class M$ extends Wd{constructor(l=0,a=0,h=1,d=1,f=0,p=2*Math.PI,g=!1,m=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=l,this.aY=a,this.xRadius=h,this.yRadius=d,this.aStartAngle=f,this.aEndAngle=p,this.aClockwise=g,this.aRotation=m}getPoint(l,a){const h=a||new mt,d=2*Math.PI;let f=this.aEndAngle-this.aStartAngle;const p=Math.abs(f)<Number.EPSILON;for(;f<0;)f+=d;for(;f>d;)f-=d;f<Number.EPSILON&&(f=p?0:d),!0===this.aClockwise&&!p&&(f===d?f=-d:f-=d);const g=this.aStartAngle+l*f;let m=this.aX+this.xRadius*Math.cos(g),v=this.aY+this.yRadius*Math.sin(g);if(0!==this.aRotation){const y=Math.cos(this.aRotation),_=Math.sin(this.aRotation),b=m-this.aX,C=v-this.aY;m=b*y-C*_+this.aX,v=b*_+C*y+this.aY}return h.set(m,v)}copy(l){return super.copy(l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this}toJSON(){const l=super.toJSON();return l.aX=this.aX,l.aY=this.aY,l.xRadius=this.xRadius,l.yRadius=this.yRadius,l.aStartAngle=this.aStartAngle,l.aEndAngle=this.aEndAngle,l.aClockwise=this.aClockwise,l.aRotation=this.aRotation,l}fromJSON(l){return super.fromJSON(l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this}}function E$(){let c=0,l=0,a=0,h=0;function d(f,p,g,m){c=f,l=g,a=-3*f+3*p-2*g-m,h=2*f-2*p+g+m}return{initCatmullRom:function(f,p,g,m,v){d(p,g,v*(g-f),v*(m-p))},initNonuniformCatmullRom:function(f,p,g,m,v,y,_){let b=(p-f)/v-(g-f)/(v+y)+(g-p)/y,C=(g-p)/y-(m-p)/(y+_)+(m-g)/_;b*=y,C*=y,d(p,g,b,C)},calc:function(f){const p=f*f;return c+l*f+a*p+h*(p*f)}}}const B3=new re,A$=new E$,I$=new E$,P$=new E$;class Lye extends Wd{constructor(l=[],a=!1,h="centripetal",d=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=l,this.closed=a,this.curveType=h,this.tension=d}getPoint(l,a=new re){const h=a,d=this.points,f=d.length,p=(f-(this.closed?0:1))*l;let v,y,g=Math.floor(p),m=p-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/f)+1)*f:0===m&&g===f-1&&(g=f-2,m=1),this.closed||g>0?v=d[(g-1)%f]:(B3.subVectors(d[0],d[1]).add(d[0]),v=B3);const _=d[g%f],b=d[(g+1)%f];if(this.closed||g+2<f?y=d[(g+2)%f]:(B3.subVectors(d[f-1],d[f-2]).add(d[f-1]),y=B3),"centripetal"===this.curveType||"chordal"===this.curveType){const C="chordal"===this.curveType?.5:.25;let x=Math.pow(v.distanceToSquared(_),C),S=Math.pow(_.distanceToSquared(b),C),w=Math.pow(b.distanceToSquared(y),C);S<1e-4&&(S=1),x<1e-4&&(x=S),w<1e-4&&(w=S),A$.initNonuniformCatmullRom(v.x,_.x,b.x,y.x,x,S,w),I$.initNonuniformCatmullRom(v.y,_.y,b.y,y.y,x,S,w),P$.initNonuniformCatmullRom(v.z,_.z,b.z,y.z,x,S,w)}else"catmullrom"===this.curveType&&(A$.initCatmullRom(v.x,_.x,b.x,y.x,this.tension),I$.initCatmullRom(v.y,_.y,b.y,y.y,this.tension),P$.initCatmullRom(v.z,_.z,b.z,y.z,this.tension));return h.set(A$.calc(m),I$.calc(m),P$.calc(m)),h}copy(l){super.copy(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++)this.points.push(l.points[a].clone());return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this}toJSON(){const l=super.toJSON();l.points=[];for(let a=0,h=this.points.length;a<h;a++)l.points.push(this.points[a].toArray());return l.closed=this.closed,l.curveType=this.curveType,l.tension=this.tension,l}fromJSON(l){super.fromJSON(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++){const d=l.points[a];this.points.push((new re).fromArray(d))}return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this}}function Bye(c,l,a,h,d){const f=.5*(h-l),p=.5*(d-a),g=c*c;return(2*a-2*h+f+p)*(c*g)+(-3*a+3*h-2*f-p)*g+f*c+a}function R2(c,l,a,h){return function evt(c,l){const a=1-c;return a*a*l}(c,l)+function tvt(c,l){return 2*(1-c)*c*l}(c,a)+function nvt(c,l){return c*c*l}(c,h)}function F2(c,l,a,h,d){return function ivt(c,l){const a=1-c;return a*a*a*l}(c,l)+function rvt(c,l){const a=1-c;return 3*a*a*c*l}(c,a)+function svt(c,l){return 3*(1-c)*c*c*l}(c,h)+function ovt(c,l){return c*c*c*l}(c,d)}class Vye extends Wd{constructor(l=new mt,a=new mt,h=new mt,d=new mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=l,this.v1=a,this.v2=h,this.v3=d}getPoint(l,a=new mt){const h=a,d=this.v0,f=this.v1,p=this.v2,g=this.v3;return h.set(F2(l,d.x,f.x,p.x,g.x),F2(l,d.y,f.y,p.y,g.y)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this}}class R$ extends Wd{constructor(l=new mt,a=new mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=l,this.v2=a}getPoint(l,a=new mt){const h=a;return 1===l?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(l).add(this.v1)),h}getPointAt(l,a){return this.getPoint(l,a)}getTangent(l,a){const h=a||new mt;return h.copy(this.v2).sub(this.v1).normalize(),h}copy(l){return super.copy(l),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}class zye extends Wd{constructor(l=new mt,a=new mt,h=new mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=l,this.v1=a,this.v2=h}getPoint(l,a=new mt){const h=a,d=this.v0,f=this.v1,p=this.v2;return h.set(R2(l,d.x,f.x,p.x),R2(l,d.y,f.y,p.y)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}class Hye extends Wd{constructor(l=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=l}getPoint(l,a=new mt){const h=a,d=this.points,f=(d.length-1)*l,p=Math.floor(f),g=f-p,m=d[0===p?p:p-1],v=d[p],y=d[p>d.length-2?d.length-1:p+1],_=d[p>d.length-3?d.length-1:p+2];return h.set(Bye(g,m.x,v.x,y.x,_.x),Bye(g,m.y,v.y,y.y,_.y)),h}copy(l){super.copy(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++)this.points.push(l.points[a].clone());return this}toJSON(){const l=super.toJSON();l.points=[];for(let a=0,h=this.points.length;a<h;a++)l.points.push(this.points[a].toArray());return l}fromJSON(l){super.fromJSON(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++){const d=l.points[a];this.points.push((new mt).fromArray(d))}return this}}var F$=Object.freeze({__proto__:null,ArcCurve:class J0t extends M${constructor(l,a,h,d,f,p){super(l,a,h,h,d,f,p),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:Lye,CubicBezierCurve:Vye,CubicBezierCurve3:class avt extends Wd{constructor(l=new re,a=new re,h=new re,d=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=l,this.v1=a,this.v2=h,this.v3=d}getPoint(l,a=new re){const h=a,d=this.v0,f=this.v1,p=this.v2,g=this.v3;return h.set(F2(l,d.x,f.x,p.x,g.x),F2(l,d.y,f.y,p.y,g.y),F2(l,d.z,f.z,p.z,g.z)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this}},EllipseCurve:M$,LineCurve:R$,LineCurve3:class lvt extends Wd{constructor(l=new re,a=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=l,this.v2=a}getPoint(l,a=new re){const h=a;return 1===l?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(l).add(this.v1)),h}getPointAt(l,a){return this.getPoint(l,a)}copy(l){return super.copy(l),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}},QuadraticBezierCurve:zye,QuadraticBezierCurve3:class Uye extends Wd{constructor(l=new re,a=new re,h=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=l,this.v1=a,this.v2=h}getPoint(l,a=new re){const h=a,d=this.v0,f=this.v1,p=this.v2;return h.set(R2(l,d.x,f.x,p.x),R2(l,d.y,f.y,p.y),R2(l,d.z,f.z,p.z)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}},SplineCurve:Hye});class cvt extends Wd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(l){this.curves.push(l)}closePath(){const l=this.curves[0].getPoint(0),a=this.curves[this.curves.length-1].getPoint(1);l.equals(a)||this.curves.push(new R$(a,l))}getPoint(l,a){const h=l*this.getLength(),d=this.getCurveLengths();let f=0;for(;f<d.length;){if(d[f]>=h){const p=d[f]-h,g=this.curves[f],m=g.getLength();return g.getPointAt(0===m?0:1-p/m,a)}f++}return null}getLength(){const l=this.getCurveLengths();return l[l.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const l=[];let a=0;for(let h=0,d=this.curves.length;h<d;h++)a+=this.curves[h].getLength(),l.push(a);return this.cacheLengths=l,l}getSpacedPoints(l=40){const a=[];for(let h=0;h<=l;h++)a.push(this.getPoint(h/l));return this.autoClose&&a.push(a[0]),a}getPoints(l=12){const a=[];let h;for(let d=0,f=this.curves;d<f.length;d++){const p=f[d],m=p.getPoints(p.isEllipseCurve?2*l:p.isLineCurve||p.isLineCurve3?1:p.isSplineCurve?l*p.points.length:l);for(let v=0;v<m.length;v++){const y=m[v];h&&h.equals(y)||(a.push(y),h=y)}}return this.autoClose&&a.length>1&&!a[a.length-1].equals(a[0])&&a.push(a[0]),a}copy(l){super.copy(l),this.curves=[];for(let a=0,h=l.curves.length;a<h;a++)this.curves.push(l.curves[a].clone());return this.autoClose=l.autoClose,this}toJSON(){const l=super.toJSON();l.autoClose=this.autoClose,l.curves=[];for(let a=0,h=this.curves.length;a<h;a++)l.curves.push(this.curves[a].toJSON());return l}fromJSON(l){super.fromJSON(l),this.autoClose=l.autoClose,this.curves=[];for(let a=0,h=l.curves.length;a<h;a++){const d=l.curves[a];this.curves.push((new F$[d.type]).fromJSON(d))}return this}}class yv extends cvt{constructor(l){super(),this.type="Path",this.currentPoint=new mt,l&&this.setFromPoints(l)}setFromPoints(l){this.moveTo(l[0].x,l[0].y);for(let a=1,h=l.length;a<h;a++)this.lineTo(l[a].x,l[a].y);return this}moveTo(l,a){return this.currentPoint.set(l,a),this}lineTo(l,a){const h=new R$(this.currentPoint.clone(),new mt(l,a));return this.curves.push(h),this.currentPoint.set(l,a),this}quadraticCurveTo(l,a,h,d){const f=new zye(this.currentPoint.clone(),new mt(l,a),new mt(h,d));return this.curves.push(f),this.currentPoint.set(h,d),this}bezierCurveTo(l,a,h,d,f,p){const g=new Vye(this.currentPoint.clone(),new mt(l,a),new mt(h,d),new mt(f,p));return this.curves.push(g),this.currentPoint.set(f,p),this}splineThru(l){const a=[this.currentPoint.clone()].concat(l),h=new Hye(a);return this.curves.push(h),this.currentPoint.copy(l[l.length-1]),this}arc(l,a,h,d,f,p){return this.absarc(l+this.currentPoint.x,a+this.currentPoint.y,h,d,f,p),this}absarc(l,a,h,d,f,p){return this.absellipse(l,a,h,h,d,f,p),this}ellipse(l,a,h,d,f,p,g,m){return this.absellipse(l+this.currentPoint.x,a+this.currentPoint.y,h,d,f,p,g,m),this}absellipse(l,a,h,d,f,p,g,m){const v=new M$(l,a,h,d,f,p,g,m);if(this.curves.length>0){const _=v.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(v);const y=v.getPoint(1);return this.currentPoint.copy(y),this}copy(l){return super.copy(l),this.currentPoint.copy(l.currentPoint),this}toJSON(){const l=super.toJSON();return l.currentPoint=this.currentPoint.toArray(),l}fromJSON(l){return super.fromJSON(l),this.currentPoint.fromArray(l.currentPoint),this}}class Jg extends Fi{constructor(l=[],a=[],h=1,d=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:l,indices:a,radius:h,detail:d};const f=[],p=[];function m(O,k,D,M){const A=M+1,L=[];for(let E=0;E<=A;E++){L[E]=[];const V=O.clone().lerp(D,E/A),z=k.clone().lerp(D,E/A),U=A-E;for(let Z=0;Z<=U;Z++)L[E][Z]=0===Z&&E===A?V:V.clone().lerp(z,Z/U)}for(let E=0;E<A;E++)for(let V=0;V<2*(A-E)-1;V++){const z=Math.floor(V/2);V%2==0?(b(L[E][z+1]),b(L[E+1][z]),b(L[E][z])):(b(L[E][z+1]),b(L[E+1][z+1]),b(L[E+1][z]))}}function b(O){f.push(O.x,O.y,O.z)}function C(O,k){const D=3*O;k.x=l[D+0],k.y=l[D+1],k.z=l[D+2]}function S(O,k,D,M){M<0&&1===O.x&&(p[k]=O.x-1),0===D.x&&0===D.z&&(p[k]=M/2/Math.PI+.5)}function w(O){return Math.atan2(O.z,-O.x)}function T(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}(function g(O){const k=new re,D=new re,M=new re;for(let A=0;A<a.length;A+=3)C(a[A+0],k),C(a[A+1],D),C(a[A+2],M),m(k,D,M,O)})(d),function v(O){const k=new re;for(let D=0;D<f.length;D+=3)k.x=f[D+0],k.y=f[D+1],k.z=f[D+2],k.normalize().multiplyScalar(O),f[D+0]=k.x,f[D+1]=k.y,f[D+2]=k.z}(h),function y(){const O=new re;for(let k=0;k<f.length;k+=3){O.x=f[k+0],O.y=f[k+1],O.z=f[k+2];const D=w(O)/2/Math.PI+.5,M=T(O)/Math.PI+.5;p.push(D,1-M)}(function x(){const O=new re,k=new re,D=new re,M=new re,A=new mt,L=new mt,E=new mt;for(let V=0,z=0;V<f.length;V+=9,z+=6){O.set(f[V+0],f[V+1],f[V+2]),k.set(f[V+3],f[V+4],f[V+5]),D.set(f[V+6],f[V+7],f[V+8]),A.set(p[z+0],p[z+1]),L.set(p[z+2],p[z+3]),E.set(p[z+4],p[z+5]),M.copy(O).add(k).add(D).divideScalar(3);const U=w(M);S(A,z+0,O,U),S(L,z+2,k,U),S(E,z+4,D,U)}})(),function _(){for(let O=0;O<p.length;O+=6){const k=p[O+0],D=p[O+2],M=p[O+4],A=Math.max(k,D,M),L=Math.min(k,D,M);A>.9&&L<.1&&(k<.2&&(p[O+0]+=1),D<.2&&(p[O+2]+=1),M<.2&&(p[O+4]+=1))}}()}(),this.setAttribute("position",new In(f,3)),this.setAttribute("normal",new In(f.slice(),3)),this.setAttribute("uv",new In(p,2)),0===d?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(l){return new Jg(l.vertices,l.indices,l.radius,l.details)}}class up extends yv{constructor(l){super(l),this.uuid=Gc(),this.type="Shape",this.holes=[]}getPointsHoles(l){const a=[];for(let h=0,d=this.holes.length;h<d;h++)a[h]=this.holes[h].getPoints(l);return a}extractPoints(l){return{shape:this.getPoints(l),holes:this.getPointsHoles(l)}}copy(l){super.copy(l),this.holes=[];for(let a=0,h=l.holes.length;a<h;a++)this.holes.push(l.holes[a].clone());return this}toJSON(){const l=super.toJSON();l.uuid=this.uuid,l.holes=[];for(let a=0,h=this.holes.length;a<h;a++)l.holes.push(this.holes[a].toJSON());return l}fromJSON(l){super.fromJSON(l),this.uuid=l.uuid,this.holes=[];for(let a=0,h=l.holes.length;a<h;a++){const d=l.holes[a];this.holes.push((new yv).fromJSON(d))}return this}}function $ye(c,l,a,h,d){let f,p;if(d===function Dvt(c,l,a,h){let d=0;for(let f=l,p=a-h;f<a;f+=h)d+=(c[p]-c[f])*(c[f+1]+c[p+1]),p=f;return d}(c,l,a,h)>0)for(f=l;f<a;f+=h)p=Qye(f,c[f],c[f+1],p);else for(f=a-h;f>=l;f-=h)p=Qye(f,c[f],c[f+1],p);return p&&Q3(p,p.next)&&(V2(p),p=p.next),p}function em(c,l){if(!c)return c;l||(l=c);let h,a=c;do{if(h=!1,a.steiner||!Q3(a,a.next)&&0!==Ns(a.prev,a,a.next))a=a.next;else{if(V2(a),a=l=a.prev,a===a.next)break;h=!0}}while(h||a!==l);return l}function L2(c,l,a,h,d,f,p){if(!c)return;!p&&f&&function Cvt(c,l,a,h){let d=c;do{null===d.z&&(d.z=L$(d.x,d.y,l,a,h)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next}while(d!==c);d.prevZ.nextZ=null,d.prevZ=null,function xvt(c){let l,a,h,d,f,p,g,m,v=1;do{for(a=c,c=null,f=null,p=0;a;){for(p++,h=a,g=0,l=0;l<v&&(g++,h=h.nextZ,h);l++);for(m=v;g>0||m>0&&h;)0!==g&&(0===m||!h||a.z<=h.z)?(d=a,a=a.nextZ,g--):(d=h,h=h.nextZ,m--),f?f.nextZ=d:c=d,d.prevZ=f,f=d;a=h}f.nextZ=null,v*=2}while(p>1)}(d)}(c,h,d,f);let m,v,g=c;for(;c.prev!==c.next;)if(m=c.prev,v=c.next,f?fvt(c,h,d,f):dvt(c))l.push(m.i/a),l.push(c.i/a),l.push(v.i/a),V2(c),c=v.next,g=v.next;else if((c=v)===g){p?1===p?L2(c=pvt(em(c),l,a),l,a,h,d,f,2):2===p&&gvt(c,l,a,h,d,f):L2(em(c),l,a,h,d,f,1);break}}function dvt(c){const l=c.prev,a=c,h=c.next;if(Ns(l,a,h)>=0)return!1;let d=c.next.next;for(;d!==c.prev;){if(xb(l.x,l.y,a.x,a.y,h.x,h.y,d.x,d.y)&&Ns(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function fvt(c,l,a,h){const d=c.prev,f=c,p=c.next;if(Ns(d,f,p)>=0)return!1;const v=d.x>f.x?d.x>p.x?d.x:p.x:f.x>p.x?f.x:p.x,y=d.y>f.y?d.y>p.y?d.y:p.y:f.y>p.y?f.y:p.y,_=L$(d.x<f.x?d.x<p.x?d.x:p.x:f.x<p.x?f.x:p.x,d.y<f.y?d.y<p.y?d.y:p.y:f.y<p.y?f.y:p.y,l,a,h),b=L$(v,y,l,a,h);let C=c.prevZ,x=c.nextZ;for(;C&&C.z>=_&&x&&x.z<=b;){if(C!==c.prev&&C!==c.next&&xb(d.x,d.y,f.x,f.y,p.x,p.y,C.x,C.y)&&Ns(C.prev,C,C.next)>=0||(C=C.prevZ,x!==c.prev&&x!==c.next&&xb(d.x,d.y,f.x,f.y,p.x,p.y,x.x,x.y)&&Ns(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;C&&C.z>=_;){if(C!==c.prev&&C!==c.next&&xb(d.x,d.y,f.x,f.y,p.x,p.y,C.x,C.y)&&Ns(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;x&&x.z<=b;){if(x!==c.prev&&x!==c.next&&xb(d.x,d.y,f.x,f.y,p.x,p.y,x.x,x.y)&&Ns(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function pvt(c,l,a){let h=c;do{const d=h.prev,f=h.next.next;!Q3(d,f)&&Wye(d,h,h.next,f)&&B2(d,f)&&B2(f,d)&&(l.push(d.i/a),l.push(h.i/a),l.push(f.i/a),V2(h),V2(h.next),h=c=f),h=h.next}while(h!==c);return em(h)}function gvt(c,l,a,h,d,f){let p=c;do{let g=p.next.next;for(;g!==p.prev;){if(p.i!==g.i&&Svt(p,g)){let m=Gye(p,g);return p=em(p,p.next),m=em(m,m.next),L2(p,l,a,h,d,f),void L2(m,l,a,h,d,f)}g=g.next}p=p.next}while(p!==c)}function vvt(c,l){return c.x-l.x}function yvt(c,l){if(l=function _vt(c,l){let a=l;const h=c.x,d=c.y;let p,f=-1/0;do{if(d<=a.y&&d>=a.next.y&&a.next.y!==a.y){const b=a.x+(d-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(b<=h&&b>f){if(f=b,b===h){if(d===a.y)return a;if(d===a.next.y)return a.next}p=a.x<a.next.x?a:a.next}}a=a.next}while(a!==l);if(!p)return null;if(h===f)return p;const g=p,m=p.x,v=p.y;let _,y=1/0;a=p;do{h>=a.x&&a.x>=m&&h!==a.x&&xb(d<v?h:f,d,m,v,d<v?f:h,d,a.x,a.y)&&(_=Math.abs(d-a.y)/(h-a.x),B2(a,c)&&(_<y||_===y&&(a.x>p.x||a.x===p.x&&bvt(p,a)))&&(p=a,y=_)),a=a.next}while(a!==g);return p}(c,l),l){const a=Gye(l,c);em(l,l.next),em(a,a.next)}}function bvt(c,l){return Ns(c.prev,c,l.prev)<0&&Ns(l.next,c,c.next)<0}function L$(c,l,a,h,d){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-a)*d)|c<<8))|c<<4))|c<<2))|c<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-h)*d)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function wvt(c){let l=c,a=c;do{(l.x<a.x||l.x===a.x&&l.y<a.y)&&(a=l),l=l.next}while(l!==c);return a}function xb(c,l,a,h,d,f,p,g){return(d-p)*(l-g)-(c-p)*(f-g)>=0&&(c-p)*(h-g)-(a-p)*(l-g)>=0&&(a-p)*(f-g)-(d-p)*(h-g)>=0}function Svt(c,l){return c.next.i!==l.i&&c.prev.i!==l.i&&!function Tvt(c,l){let a=c;do{if(a.i!==c.i&&a.next.i!==c.i&&a.i!==l.i&&a.next.i!==l.i&&Wye(a,a.next,c,l))return!0;a=a.next}while(a!==c);return!1}(c,l)&&(B2(c,l)&&B2(l,c)&&function Ovt(c,l){let a=c,h=!1;const d=(c.x+l.x)/2,f=(c.y+l.y)/2;do{a.y>f!=a.next.y>f&&a.next.y!==a.y&&d<(a.next.x-a.x)*(f-a.y)/(a.next.y-a.y)+a.x&&(h=!h),a=a.next}while(a!==c);return h}(c,l)&&(Ns(c.prev,c,l.prev)||Ns(c,l.prev,l))||Q3(c,l)&&Ns(c.prev,c,c.next)>0&&Ns(l.prev,l,l.next)>0)}function Ns(c,l,a){return(l.y-c.y)*(a.x-l.x)-(l.x-c.x)*(a.y-l.y)}function Q3(c,l){return c.x===l.x&&c.y===l.y}function Wye(c,l,a,h){const d=q3(Ns(c,l,a)),f=q3(Ns(c,l,h)),p=q3(Ns(a,h,c)),g=q3(Ns(a,h,l));return!!(d!==f&&p!==g||0===d&&j3(c,a,l)||0===f&&j3(c,h,l)||0===p&&j3(a,c,h)||0===g&&j3(a,l,h))}function j3(c,l,a){return l.x<=Math.max(c.x,a.x)&&l.x>=Math.min(c.x,a.x)&&l.y<=Math.max(c.y,a.y)&&l.y>=Math.min(c.y,a.y)}function q3(c){return c>0?1:c<0?-1:0}function B2(c,l){return Ns(c.prev,c,c.next)<0?Ns(c,l,c.next)>=0&&Ns(c,c.prev,l)>=0:Ns(c,l,c.prev)<0||Ns(c,c.next,l)<0}function Gye(c,l){const a=new B$(c.i,c.x,c.y),h=new B$(l.i,l.x,l.y),d=c.next,f=l.prev;return c.next=l,l.prev=c,a.next=d,d.prev=a,h.next=a,a.prev=h,f.next=h,h.prev=f,h}function Qye(c,l,a,h){const d=new B$(c,l,a);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function V2(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function B$(c,l,a){this.i=c,this.x=l,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class hp{static area(l){const a=l.length;let h=0;for(let d=a-1,f=0;f<a;d=f++)h+=l[d].x*l[f].y-l[f].x*l[d].y;return.5*h}static isClockWise(l){return hp.area(l)<0}static triangulateShape(l,a){const h=[],d=[],f=[];jye(l),qye(h,l);let p=l.length;a.forEach(jye);for(let m=0;m<a.length;m++)d.push(p),p+=a[m].length,qye(h,a[m]);const g=function(c,l,a=2){const h=l&&l.length,d=h?l[0]*a:c.length;let f=$ye(c,0,d,a,!0);const p=[];if(!f||f.next===f.prev)return p;let g,m,v,y,_,b,C;if(h&&(f=function mvt(c,l,a,h){const d=[];let f,p,g,m,v;for(f=0,p=l.length;f<p;f++)g=l[f]*h,m=f<p-1?l[f+1]*h:c.length,v=$ye(c,g,m,h,!1),v===v.next&&(v.steiner=!0),d.push(wvt(v));for(d.sort(vvt),f=0;f<d.length;f++)yvt(d[f],a),a=em(a,a.next);return a}(c,l,f,a)),c.length>80*a){g=v=c[0],m=y=c[1];for(let x=a;x<d;x+=a)_=c[x],b=c[x+1],_<g&&(g=_),b<m&&(m=b),_>v&&(v=_),b>y&&(y=b);C=Math.max(v-g,y-m),C=0!==C?1/C:0}return L2(f,p,a,g,m,C),p}(h,d);for(let m=0;m<g.length;m+=3)f.push(g.slice(m,m+3));return f}}function jye(c){const l=c.length;l>2&&c[l-1].equals(c[0])&&c.pop()}function qye(c,l){for(let a=0;a<l.length;a++)c.push(l[a].x),c.push(l[a].y)}class wb extends Fi{constructor(l=new up([new mt(.5,.5),new mt(-.5,.5),new mt(-.5,-.5),new mt(.5,-.5)]),a={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:l,options:a},l=Array.isArray(l)?l:[l];const h=this,d=[],f=[];for(let g=0,m=l.length;g<m;g++)p(l[g]);function p(g){const m=[],v=void 0!==a.curveSegments?a.curveSegments:12,y=void 0!==a.steps?a.steps:1;let _=void 0!==a.depth?a.depth:1,b=void 0===a.bevelEnabled||a.bevelEnabled,C=void 0!==a.bevelThickness?a.bevelThickness:.2,x=void 0!==a.bevelSize?a.bevelSize:C-.1,S=void 0!==a.bevelOffset?a.bevelOffset:0,w=void 0!==a.bevelSegments?a.bevelSegments:3;const T=a.extrudePath,O=void 0!==a.UVGenerator?a.UVGenerator:kvt;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),_=a.amount);let k,M,A,L,E,D=!1;T&&(k=T.getSpacedPoints(y),D=!0,b=!1,M=T.computeFrenetFrames(y,!1),A=new re,L=new re,E=new re),b||(w=0,C=0,x=0,S=0);const V=g.extractPoints(v);let z=V.shape;const U=V.holes;if(!hp.isClockWise(z)){z=z.reverse();for(let pe=0,Le=U.length;pe<Le;pe++){const tt=U[pe];hp.isClockWise(tt)&&(U[pe]=tt.reverse())}}const Y=hp.triangulateShape(z,U),N=z;for(let pe=0,Le=U.length;pe<Le;pe++)z=z.concat(U[pe]);function $(pe,Le,tt){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Le.clone().multiplyScalar(tt).add(pe)}const H=z.length,G=Y.length;function W(pe,Le,tt){let st,Ye,Oe;const Ze=pe.x-Le.x,Gt=pe.y-Le.y,Tn=tt.x-pe.x,Gn=tt.y-pe.y,ge=Ze*Ze+Gt*Gt;if(Math.abs(Ze*Gn-Gt*Tn)>Number.EPSILON){const lt=Math.sqrt(ge),xt=Math.sqrt(Tn*Tn+Gn*Gn),Qt=Le.x-Gt/lt,Nt=Le.y+Ze/lt,en=((tt.x-Gn/xt-Qt)*Gn-(tt.y+Tn/xt-Nt)*Tn)/(Ze*Gn-Gt*Tn);st=Qt+Ze*en-pe.x,Ye=Nt+Gt*en-pe.y;const Zt=st*st+Ye*Ye;if(Zt<=2)return new mt(st,Ye);Oe=Math.sqrt(Zt/2)}else{let lt=!1;Ze>Number.EPSILON?Tn>Number.EPSILON&&(lt=!0):Ze<-Number.EPSILON?Tn<-Number.EPSILON&&(lt=!0):Math.sign(Gt)===Math.sign(Gn)&&(lt=!0),lt?(st=-Gt,Ye=Ze,Oe=Math.sqrt(ge)):(st=Ze,Ye=Gt,Oe=Math.sqrt(ge/2))}return new mt(st/Oe,Ye/Oe)}const j=[];for(let pe=0,Le=N.length,tt=Le-1,st=pe+1;pe<Le;pe++,tt++,st++)tt===Le&&(tt=0),st===Le&&(st=0),j[pe]=W(N[pe],N[tt],N[st]);const Q=[];let J,te=j.concat();for(let pe=0,Le=U.length;pe<Le;pe++){const tt=U[pe];J=[];for(let st=0,Ye=tt.length,Oe=Ye-1,Ze=st+1;st<Ye;st++,Oe++,Ze++)Oe===Ye&&(Oe=0),Ze===Ye&&(Ze=0),J[st]=W(tt[st],tt[Oe],tt[Ze]);Q.push(J),te=te.concat(J)}for(let pe=0;pe<w;pe++){const Le=pe/w,tt=C*Math.cos(Le*Math.PI/2),st=x*Math.sin(Le*Math.PI/2)+S;for(let Ye=0,Oe=N.length;Ye<Oe;Ye++){const Ze=$(N[Ye],j[Ye],st);Me(Ze.x,Ze.y,-tt)}for(let Ye=0,Oe=U.length;Ye<Oe;Ye++){const Ze=U[Ye];J=Q[Ye];for(let Gt=0,Tn=Ze.length;Gt<Tn;Gt++){const Gn=$(Ze[Gt],J[Gt],st);Me(Gn.x,Gn.y,-tt)}}}const ce=x+S;for(let pe=0;pe<H;pe++){const Le=b?$(z[pe],te[pe],ce):z[pe];D?(L.copy(M.normals[0]).multiplyScalar(Le.x),A.copy(M.binormals[0]).multiplyScalar(Le.y),E.copy(k[0]).add(L).add(A),Me(E.x,E.y,E.z)):Me(Le.x,Le.y,0)}for(let pe=1;pe<=y;pe++)for(let Le=0;Le<H;Le++){const tt=b?$(z[Le],te[Le],ce):z[Le];D?(L.copy(M.normals[pe]).multiplyScalar(tt.x),A.copy(M.binormals[pe]).multiplyScalar(tt.y),E.copy(k[pe]).add(L).add(A),Me(E.x,E.y,E.z)):Me(tt.x,tt.y,_/y*pe)}for(let pe=w-1;pe>=0;pe--){const Le=pe/w,tt=C*Math.cos(Le*Math.PI/2),st=x*Math.sin(Le*Math.PI/2)+S;for(let Ye=0,Oe=N.length;Ye<Oe;Ye++){const Ze=$(N[Ye],j[Ye],st);Me(Ze.x,Ze.y,_+tt)}for(let Ye=0,Oe=U.length;Ye<Oe;Ye++){const Ze=U[Ye];J=Q[Ye];for(let Gt=0,Tn=Ze.length;Gt<Tn;Gt++){const Gn=$(Ze[Gt],J[Gt],st);D?Me(Gn.x,Gn.y+k[y-1].y,k[y-1].x+tt):Me(Gn.x,Gn.y,_+tt)}}}function _e(pe,Le){let tt=pe.length;for(;--tt>=0;){const st=tt;let Ye=tt-1;Ye<0&&(Ye=pe.length-1);for(let Oe=0,Ze=y+2*w;Oe<Ze;Oe++){const Gt=H*Oe,Tn=H*(Oe+1);Ie(Le+st+Gt,Le+Ye+Gt,Le+Ye+Tn,Le+st+Tn)}}}function Me(pe,Le,tt){m.push(pe),m.push(Le),m.push(tt)}function Qe(pe,Le,tt){Ve(pe),Ve(Le),Ve(tt);const st=d.length/3,Ye=O.generateTopUV(h,d,st-3,st-2,st-1);Je(Ye[0]),Je(Ye[1]),Je(Ye[2])}function Ie(pe,Le,tt,st){Ve(pe),Ve(Le),Ve(st),Ve(Le),Ve(tt),Ve(st);const Ye=d.length/3,Oe=O.generateSideWallUV(h,d,Ye-6,Ye-3,Ye-2,Ye-1);Je(Oe[0]),Je(Oe[1]),Je(Oe[3]),Je(Oe[1]),Je(Oe[2]),Je(Oe[3])}function Ve(pe){d.push(m[3*pe+0]),d.push(m[3*pe+1]),d.push(m[3*pe+2])}function Je(pe){f.push(pe.x),f.push(pe.y)}(function ae(){const pe=d.length/3;if(b){let Le=0,tt=H*Le;for(let st=0;st<G;st++){const Ye=Y[st];Qe(Ye[2]+tt,Ye[1]+tt,Ye[0]+tt)}Le=y+2*w,tt=H*Le;for(let st=0;st<G;st++){const Ye=Y[st];Qe(Ye[0]+tt,Ye[1]+tt,Ye[2]+tt)}}else{for(let Le=0;Le<G;Le++){const tt=Y[Le];Qe(tt[2],tt[1],tt[0])}for(let Le=0;Le<G;Le++){const tt=Y[Le];Qe(tt[0]+H*y,tt[1]+H*y,tt[2]+H*y)}}h.addGroup(pe,d.length/3-pe,0)})(),function Se(){const pe=d.length/3;let Le=0;_e(N,Le),Le+=N.length;for(let tt=0,st=U.length;tt<st;tt++){const Ye=U[tt];_e(Ye,Le),Le+=Ye.length}h.addGroup(pe,d.length/3-pe,1)}()}this.setAttribute("position",new In(d,3)),this.setAttribute("uv",new In(f,2)),this.computeVertexNormals()}toJSON(){const l=super.toJSON();return function Mvt(c,l,a){if(a.shapes=[],Array.isArray(c))for(let h=0,d=c.length;h<d;h++)a.shapes.push(c[h].uuid);else a.shapes.push(c.uuid);return a.options=Object.assign({},l),void 0!==l.extrudePath&&(a.options.extrudePath=l.extrudePath.toJSON()),a}(this.parameters.shapes,this.parameters.options,l)}static fromJSON(l,a){const h=[];for(let f=0,p=l.shapes.length;f<p;f++)h.push(a[l.shapes[f]]);const d=l.options.extrudePath;return void 0!==d&&(l.options.extrudePath=(new F$[d.type]).fromJSON(d)),new wb(h,l.options)}}const kvt={generateTopUV:function(c,l,a,h,d){const g=l[3*h],m=l[3*h+1],v=l[3*d],y=l[3*d+1];return[new mt(l[3*a],l[3*a+1]),new mt(g,m),new mt(v,y)]},generateSideWallUV:function(c,l,a,h,d,f){const p=l[3*a],g=l[3*a+1],m=l[3*a+2],v=l[3*h],y=l[3*h+1],_=l[3*h+2],b=l[3*d],C=l[3*d+1],x=l[3*d+2],S=l[3*f],w=l[3*f+1],T=l[3*f+2];return Math.abs(g-y)<Math.abs(p-v)?[new mt(p,1-m),new mt(v,1-_),new mt(b,1-x),new mt(S,1-T)]:[new mt(g,1-m),new mt(y,1-_),new mt(C,1-x),new mt(w,1-T)]}};class z2 extends Jg{constructor(l=1,a=0){const h=(1+Math.sqrt(5))/2;super([-1,h,0,1,h,0,-1,-h,0,1,-h,0,0,-1,h,0,1,h,0,-1,-h,0,1,-h,h,0,-1,h,0,1,-h,0,-1,-h,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],l,a),this.type="IcosahedronGeometry",this.parameters={radius:l,detail:a}}static fromJSON(l){return new z2(l.radius,l.detail)}}class Sb extends Fi{constructor(l=1,a=32,h=16,d=0,f=2*Math.PI,p=0,g=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:l,widthSegments:a,heightSegments:h,phiStart:d,phiLength:f,thetaStart:p,thetaLength:g},a=Math.max(3,Math.floor(a)),h=Math.max(2,Math.floor(h));const m=Math.min(p+g,Math.PI);let v=0;const y=[],_=new re,b=new re,C=[],x=[],S=[],w=[];for(let T=0;T<=h;T++){const O=[],k=T/h;let D=0;0==T&&0==p?D=.5/a:T==h&&m==Math.PI&&(D=-.5/a);for(let M=0;M<=a;M++){const A=M/a;_.x=-l*Math.cos(d+A*f)*Math.sin(p+k*g),_.y=l*Math.cos(p+k*g),_.z=l*Math.sin(d+A*f)*Math.sin(p+k*g),x.push(_.x,_.y,_.z),b.copy(_).normalize(),S.push(b.x,b.y,b.z),w.push(A+D,1-k),O.push(v++)}y.push(O)}for(let T=0;T<h;T++)for(let O=0;O<a;O++){const k=y[T][O+1],D=y[T][O],M=y[T+1][O],A=y[T+1][O+1];(0!==T||p>0)&&C.push(k,D,A),(T!==h-1||m<Math.PI)&&C.push(D,M,A)}this.setIndex(C),this.setAttribute("position",new In(x,3)),this.setAttribute("normal",new In(S,3)),this.setAttribute("uv",new In(w,2))}static fromJSON(l){return new Sb(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength)}}class Yye extends pv{constructor(l){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new hn(16777215),this.specular=new hn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.specular.copy(l.specular),this.shininess=l.shininess,this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.flatShading=l.flatShading,this.fog=l.fog,this}}class Kye extends pv{constructor(l){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new hn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.gradientMap=l.gradientMap,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.alphaMap=l.alphaMap,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.fog=l.fog,this}}const Ts={arraySlice:function(c,l,a){return Ts.isTypedArray(c)?new c.constructor(c.subarray(l,void 0!==a?a:c.length)):c.slice(l,a)},convertArray:function(c,l,a){return!c||!a&&c.constructor===l?c:"number"==typeof l.BYTES_PER_ELEMENT?new l(c):Array.prototype.slice.call(c)},isTypedArray:function(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)},getKeyframeOrder:function(c){const a=c.length,h=new Array(a);for(let d=0;d!==a;++d)h[d]=d;return h.sort(function l(d,f){return c[d]-c[f]}),h},sortedArray:function(c,l,a){const h=c.length,d=new c.constructor(h);for(let f=0,p=0;p!==h;++f){const g=a[f]*l;for(let m=0;m!==l;++m)d[p++]=c[g+m]}return d},flattenJSON:function(c,l,a,h){let d=1,f=c[0];for(;void 0!==f&&void 0===f[h];)f=c[d++];if(void 0===f)return;let p=f[h];if(void 0!==p)if(Array.isArray(p))do{p=f[h],void 0!==p&&(l.push(f.time),a.push.apply(a,p)),f=c[d++]}while(void 0!==f);else if(void 0!==p.toArray)do{p=f[h],void 0!==p&&(l.push(f.time),p.toArray(a,a.length)),f=c[d++]}while(void 0!==f);else do{p=f[h],void 0!==p&&(l.push(f.time),a.push(p)),f=c[d++]}while(void 0!==f)},subclip:function(c,l,a,h,d=30){const f=c.clone();f.name=l;const p=[];for(let m=0;m<f.tracks.length;++m){const v=f.tracks[m],y=v.getValueSize(),_=[],b=[];for(let C=0;C<v.times.length;++C){const x=v.times[C]*d;if(!(x<a||x>=h)){_.push(v.times[C]);for(let S=0;S<y;++S)b.push(v.values[C*y+S])}}0!==_.length&&(v.times=Ts.convertArray(_,v.times.constructor),v.values=Ts.convertArray(b,v.values.constructor),p.push(v))}f.tracks=p;let g=1/0;for(let m=0;m<f.tracks.length;++m)g>f.tracks[m].times[0]&&(g=f.tracks[m].times[0]);for(let m=0;m<f.tracks.length;++m)f.tracks[m].shift(-1*g);return f.resetDuration(),f},makeClipAdditive:function(c,l=0,a=c,h=30){h<=0&&(h=30);const d=a.tracks.length,f=l/h;for(let p=0;p<d;++p){const g=a.tracks[p],m=g.ValueTypeName;if("bool"===m||"string"===m)continue;const v=c.tracks.find(function(T){return T.name===g.name&&T.ValueTypeName===m});if(void 0===v)continue;let y=0;const _=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);let b=0;const C=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=C/3);const x=g.times.length-1;let S;if(f<=g.times[0])S=Ts.arraySlice(g.values,y,_-y);else if(f>=g.times[x]){const T=x*_+y;S=Ts.arraySlice(g.values,T,T+_-y)}else{const T=g.createInterpolant(),O=y,k=_-y;T.evaluate(f),S=Ts.arraySlice(T.resultBuffer,O,k)}"quaternion"===m&&(new Qc).fromArray(S).normalize().conjugate().toArray(S);const w=v.times.length;for(let T=0;T<w;++T){const O=T*C+b;if("quaternion"===m)Qc.multiplyQuaternionsFlat(v.values,O,S,0,v.values,O);else{const k=C-2*b;for(let D=0;D<k;++D)v.values[O+D]-=S[D]}}}return c.blendMode=2501,c}};class t4{constructor(l,a,h,d){this.parameterPositions=l,this._cachedIndex=0,this.resultBuffer=void 0!==d?d:new a.constructor(h),this.sampleValues=a,this.valueSize=h,this.settings=null,this.DefaultSettings_={}}evaluate(l){const a=this.parameterPositions;let h=this._cachedIndex,d=a[h],f=a[h-1];e:{t:{let p;n:{i:if(!(l<d)){for(let g=h+2;;){if(void 0===d){if(l<f)break i;return h=a.length,this._cachedIndex=h,this.copySampleValue_(h-1)}if(h===g)break;if(f=d,d=a[++h],l<d)break t}p=a.length;break n}if(l>=f)break e;{const g=a[1];l<g&&(h=2,f=g);for(let m=h-2;;){if(void 0===f)return this._cachedIndex=0,this.copySampleValue_(0);if(h===m)break;if(d=f,f=a[--h-1],l>=f)break t}p=h,h=0}}for(;h<p;){const g=h+p>>>1;l<a[g]?p=g:h=g+1}if(d=a[h],f=a[h-1],void 0===f)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===d)return h=a.length,this._cachedIndex=h,this.copySampleValue_(h-1)}this._cachedIndex=h,this.intervalChanged_(h,f,d)}return this.interpolate_(h,f,l,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(l){const a=this.resultBuffer,h=this.sampleValues,d=this.valueSize,f=l*d;for(let p=0;p!==d;++p)a[p]=h[f+p];return a}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zvt extends t4{constructor(l,a,h,d){super(l,a,h,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(l,a,h){const d=this.parameterPositions;let f=l-2,p=l+1,g=d[f],m=d[p];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:f=l,g=2*a-h;break;case 2402:f=d.length-2,g=a+d[f]-d[f+1];break;default:f=l,g=h}if(void 0===m)switch(this.getSettings_().endingEnd){case 2401:p=l,m=2*h-a;break;case 2402:p=1,m=h+d[1]-d[0];break;default:p=l-1,m=a}const v=.5*(h-a),y=this.valueSize;this._weightPrev=v/(a-g),this._weightNext=v/(m-h),this._offsetPrev=f*y,this._offsetNext=p*y}interpolate_(l,a,h,d){const f=this.resultBuffer,p=this.sampleValues,g=this.valueSize,m=l*g,v=m-g,y=this._offsetPrev,_=this._offsetNext,b=this._weightPrev,C=this._weightNext,x=(h-a)/(d-a),S=x*x,w=S*x,T=-b*w+2*b*S-b*x,O=(1+b)*w+(-1.5-2*b)*S+(-.5+b)*x+1,k=(-1-C)*w+(1.5+C)*S+.5*x,D=C*w-C*S;for(let M=0;M!==g;++M)f[M]=T*p[y+M]+O*p[v+M]+k*p[m+M]+D*p[_+M];return f}}class Jye extends t4{constructor(l,a,h,d){super(l,a,h,d)}interpolate_(l,a,h,d){const f=this.resultBuffer,p=this.sampleValues,g=this.valueSize,m=l*g,v=m-g,y=(h-a)/(d-a),_=1-y;for(let b=0;b!==g;++b)f[b]=p[v+b]*_+p[m+b]*y;return f}}class Uvt extends t4{constructor(l,a,h,d){super(l,a,h,d)}interpolate_(l){return this.copySampleValue_(l-1)}}class Gd{constructor(l,a,h,d){if(void 0===l)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===a||0===a.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+l);this.name=l,this.times=Ts.convertArray(a,this.TimeBufferType),this.values=Ts.convertArray(h,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(l){const a=l.constructor;let h;if(a.toJSON!==this.toJSON)h=a.toJSON(l);else{h={name:l.name,times:Ts.convertArray(l.times,Array),values:Ts.convertArray(l.values,Array)};const d=l.getInterpolation();d!==l.DefaultInterpolation&&(h.interpolation=d)}return h.type=l.ValueTypeName,h}InterpolantFactoryMethodDiscrete(l){return new Uvt(this.times,this.values,this.getValueSize(),l)}InterpolantFactoryMethodLinear(l){return new Jye(this.times,this.values,this.getValueSize(),l)}InterpolantFactoryMethodSmooth(l){return new zvt(this.times,this.values,this.getValueSize(),l)}setInterpolation(l){let a;switch(l){case 2300:a=this.InterpolantFactoryMethodDiscrete;break;case 2301:a=this.InterpolantFactoryMethodLinear;break;case 2302:a=this.InterpolantFactoryMethodSmooth}if(void 0===a){const h="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(l===this.DefaultInterpolation)throw new Error(h);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",h),this}return this.createInterpolant=a,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(l){if(0!==l){const a=this.times;for(let h=0,d=a.length;h!==d;++h)a[h]+=l}return this}scale(l){if(1!==l){const a=this.times;for(let h=0,d=a.length;h!==d;++h)a[h]*=l}return this}trim(l,a){const h=this.times,d=h.length;let f=0,p=d-1;for(;f!==d&&h[f]<l;)++f;for(;-1!==p&&h[p]>a;)--p;if(++p,0!==f||p!==d){f>=p&&(p=Math.max(p,1),f=p-1);const g=this.getValueSize();this.times=Ts.arraySlice(h,f,p),this.values=Ts.arraySlice(this.values,f*g,p*g)}return this}validate(){let l=!0;const a=this.getValueSize();a-Math.floor(a)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),l=!1);const h=this.times,d=this.values,f=h.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),l=!1);let p=null;for(let g=0;g!==f;g++){const m=h[g];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,m),l=!1;break}if(null!==p&&p>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,m,p),l=!1;break}p=m}if(void 0!==d&&Ts.isTypedArray(d))for(let g=0,m=d.length;g!==m;++g){const v=d[g];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,v),l=!1;break}}return l}optimize(){const l=Ts.arraySlice(this.times),a=Ts.arraySlice(this.values),h=this.getValueSize(),d=2302===this.getInterpolation(),f=l.length-1;let p=1;for(let g=1;g<f;++g){let m=!1;const v=l[g];if(v!==l[g+1]&&(1!==g||v!==l[0]))if(d)m=!0;else{const _=g*h,b=_-h,C=_+h;for(let x=0;x!==h;++x){const S=a[_+x];if(S!==a[b+x]||S!==a[C+x]){m=!0;break}}}if(m){if(g!==p){l[p]=l[g];const _=g*h,b=p*h;for(let C=0;C!==h;++C)a[b+C]=a[_+C]}++p}}if(f>0){l[p]=l[f];for(let g=f*h,m=p*h,v=0;v!==h;++v)a[m+v]=a[g+v];++p}return p!==l.length?(this.times=Ts.arraySlice(l,0,p),this.values=Ts.arraySlice(a,0,p*h)):(this.times=l,this.values=a),this}clone(){const l=Ts.arraySlice(this.times,0),a=Ts.arraySlice(this.values,0),d=new(0,this.constructor)(this.name,l,a);return d.createInterpolant=this.createInterpolant,d}}Gd.prototype.TimeBufferType=Float32Array,Gd.prototype.ValueBufferType=Float32Array,Gd.prototype.DefaultInterpolation=2301;class Tb extends Gd{}Tb.prototype.ValueTypeName="bool",Tb.prototype.ValueBufferType=Array,Tb.prototype.DefaultInterpolation=2300,Tb.prototype.InterpolantFactoryMethodLinear=void 0,Tb.prototype.InterpolantFactoryMethodSmooth=void 0;(class e_e extends Gd{}).prototype.ValueTypeName="color";(class n4 extends Gd{}).prototype.ValueTypeName="number";class Hvt extends t4{constructor(l,a,h,d){super(l,a,h,d)}interpolate_(l,a,h,d){const f=this.resultBuffer,p=this.sampleValues,g=this.valueSize,m=(h-a)/(d-a);let v=l*g;for(let y=v+g;v!==y;v+=4)Qc.slerpFlat(f,0,p,v-g,p,v,m);return f}}class H2 extends Gd{InterpolantFactoryMethodLinear(l){return new Hvt(this.times,this.values,this.getValueSize(),l)}}H2.prototype.ValueTypeName="quaternion",H2.prototype.DefaultInterpolation=2301,H2.prototype.InterpolantFactoryMethodSmooth=void 0;class Ob extends Gd{}Ob.prototype.ValueTypeName="string",Ob.prototype.ValueBufferType=Array,Ob.prototype.DefaultInterpolation=2300,Ob.prototype.InterpolantFactoryMethodLinear=void 0,Ob.prototype.InterpolantFactoryMethodSmooth=void 0;(class i4 extends Gd{}).prototype.ValueTypeName="vector";const Db={enabled:!1,files:{},add:function(c,l){!1!==this.enabled&&(this.files[c]=l)},get:function(c){if(!1!==this.enabled)return this.files[c]},remove:function(c){delete this.files[c]},clear:function(){this.files={}}};const Gvt=new class t_e{constructor(l,a,h){const d=this;let m,f=!1,p=0,g=0;const v=[];this.onStart=void 0,this.onLoad=l,this.onProgress=a,this.onError=h,this.itemStart=function(y){g++,!1===f&&void 0!==d.onStart&&d.onStart(y,p,g),f=!0},this.itemEnd=function(y){p++,void 0!==d.onProgress&&d.onProgress(y,p,g),p===g&&(f=!1,void 0!==d.onLoad&&d.onLoad())},this.itemError=function(y){void 0!==d.onError&&d.onError(y)},this.resolveURL=function(y){return m?m(y):y},this.setURLModifier=function(y){return m=y,this},this.addHandler=function(y,_){return v.push(y,_),this},this.removeHandler=function(y){const _=v.indexOf(y);return-1!==_&&v.splice(_,2),this},this.getHandler=function(y){for(let _=0,b=v.length;_<b;_+=2){const C=v[_],x=v[_+1];if(C.global&&(C.lastIndex=0),C.test(y))return x}return null}}};class n_e{constructor(l){this.manager=void 0!==l?l:Gvt,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(l,a){const h=this;return new Promise(function(d,f){h.load(l,d,a,f)})}parse(){}setCrossOrigin(l){return this.crossOrigin=l,this}setWithCredentials(l){return this.withCredentials=l,this}setPath(l){return this.path=l,this}setResourcePath(l){return this.resourcePath=l,this}setRequestHeader(l){return this.requestHeader=l,this}}const dp={};class fp extends n_e{constructor(l){super(l)}load(l,a,h,d){void 0===l&&(l=""),void 0!==this.path&&(l=this.path+l),l=this.manager.resolveURL(l);const f=Db.get(l);if(void 0!==f)return this.manager.itemStart(l),setTimeout(()=>{a&&a(f),this.manager.itemEnd(l)},0),f;if(void 0!==dp[l])return void dp[l].push({onLoad:a,onProgress:h,onError:d});dp[l]=[],dp[l].push({onLoad:a,onProgress:h,onError:d});const p=new Request(l,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,m=this.responseType;fetch(p).then(v=>{if(200===v.status||0===v.status){if(0===v.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===v.body||void 0===v.body.getReader)return v;const y=dp[l],_=v.body.getReader(),b=v.headers.get("Content-Length"),C=b?parseInt(b):0,x=0!==C;let S=0;const w=new ReadableStream({start(T){!function O(){_.read().then(({done:k,value:D})=>{if(k)T.close();else{S+=D.byteLength;const M=new ProgressEvent("progress",{lengthComputable:x,loaded:S,total:C});for(let A=0,L=y.length;A<L;A++){const E=y[A];E.onProgress&&E.onProgress(M)}T.enqueue(D),O()}})}()}});return new Response(w)}throw Error(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(y=>(new DOMParser).parseFromString(y,g));case"json":return v.json();default:if(void 0===g)return v.text();{const _=/charset="?([^;"\s]*)"?/i.exec(g),b=_&&_[1]?_[1].toLowerCase():void 0,C=new TextDecoder(b);return v.arrayBuffer().then(x=>C.decode(x))}}}).then(v=>{Db.add(l,v);const y=dp[l];delete dp[l];for(let _=0,b=y.length;_<b;_++){const C=y[_];C.onLoad&&C.onLoad(v)}}).catch(v=>{const y=dp[l];if(void 0===y)throw this.manager.itemError(l),v;delete dp[l];for(let _=0,b=y.length;_<b;_++){const C=y[_];C.onError&&C.onError(v)}this.manager.itemError(l)}).finally(()=>{this.manager.itemEnd(l)}),this.manager.itemStart(l)}setResponseType(l){return this.responseType=l,this}setMimeType(l){return this.mimeType=l,this}}class V$ extends qc{constructor(l,a=1){super(),this.isLight=!0,this.type="Light",this.color=new hn(l),this.intensity=a}dispose(){}copy(l,a){return super.copy(l,a),this.color.copy(l.color),this.intensity=l.intensity,this}toJSON(l){const a=super.toJSON(l);return a.object.color=this.color.getHex(),a.object.intensity=this.intensity,void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(a.object.distance=this.distance),void 0!==this.angle&&(a.object.angle=this.angle),void 0!==this.decay&&(a.object.decay=this.decay),void 0!==this.penumbra&&(a.object.penumbra=this.penumbra),void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON()),a}}const i_e=new bi,r_e=new re,s_e=new re;class o_e{constructor(l){this.camera=l,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mt(512,512),this.map=null,this.mapPass=null,this.matrix=new bi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new p$,this._frameExtents=new mt(1,1),this._viewportCount=1,this._viewports=[new ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(l){const a=this.camera,h=this.matrix;r_e.setFromMatrixPosition(l.matrixWorld),a.position.copy(r_e),s_e.setFromMatrixPosition(l.target.matrixWorld),a.lookAt(s_e),a.updateMatrixWorld(),i_e.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i_e),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(a.projectionMatrix),h.multiply(a.matrixWorldInverse)}getViewport(l){return this._viewports[l]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(l){return this.camera=l.camera.clone(),this.bias=l.bias,this.radius=l.radius,this.mapSize.copy(l.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const l={};return 0!==this.bias&&(l.bias=this.bias),0!==this.normalBias&&(l.normalBias=this.normalBias),1!==this.radius&&(l.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(l.mapSize=this.mapSize.toArray()),l.camera=this.camera.toJSON(!1).object,delete l.camera.matrix,l}}const a_e=new bi,$2=new re,z$=new re;class Zvt extends o_e{constructor(){super(new xo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mt(4,2),this._viewportCount=6,this._viewports=[new ar(2,1,1,1),new ar(0,1,1,1),new ar(3,1,1,1),new ar(1,1,1,1),new ar(3,0,1,1),new ar(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(l,a=0){const h=this.camera,d=this.matrix,f=l.distance||h.far;f!==h.far&&(h.far=f,h.updateProjectionMatrix()),$2.setFromMatrixPosition(l.matrixWorld),h.position.copy($2),z$.copy(h.position),z$.add(this._cubeDirections[a]),h.up.copy(this._cubeUps[a]),h.lookAt(z$),h.updateMatrixWorld(),d.makeTranslation(-$2.x,-$2.y,-$2.z),a_e.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a_e)}}class l_e extends V${constructor(l,a,h=0,d=1){super(l,a),this.isPointLight=!0,this.type="PointLight",this.distance=h,this.decay=d,this.shadow=new Zvt}get power(){return 4*this.intensity*Math.PI}set power(l){this.intensity=l/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(l,a){return super.copy(l,a),this.distance=l.distance,this.decay=l.decay,this.shadow=l.shadow.clone(),this}}class Xvt extends o_e{constructor(){super(new O2(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class c_e extends V${constructor(l,a){super(l,a),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qc.DefaultUp),this.updateMatrix(),this.target=new qc,this.shadow=new Xvt}dispose(){this.shadow.dispose()}copy(l){return super.copy(l),this.target=l.target.clone(),this.shadow=l.shadow.clone(),this}}class o4 extends V${constructor(l,a){super(l,a),this.isAmbientLight=!0,this.type="AmbientLight"}}class m_e{constructor(l=!0){this.autoStart=l,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=v_e(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let l=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const a=v_e();l=(a-this.oldTime)/1e3,this.oldTime=a,this.elapsedTime+=l}return l}}function v_e(){return("undefined"==typeof performance?Date:performance).now()}const H$="\\[\\]\\.:\\/",oyt=new RegExp("["+H$+"]","g"),$$="[^"+H$+"]",ayt="[^"+H$.replace("\\.","")+"]",dyt=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",$$)+/(WCOD+)?/.source.replace("WCOD",ayt)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$$)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$$)+"$"),fyt=["material","materials","bones"];class pyt{constructor(l,a,h){const d=h||gs.parseTrackName(a);this._targetGroup=l,this._bindings=l.subscribe_(a,d)}getValue(l,a){this.bind();const d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(l,a)}setValue(l,a){const h=this._bindings;for(let d=this._targetGroup.nCachedObjects_,f=h.length;d!==f;++d)h[d].setValue(l,a)}bind(){const l=this._bindings;for(let a=this._targetGroup.nCachedObjects_,h=l.length;a!==h;++a)l[a].bind()}unbind(){const l=this._bindings;for(let a=this._targetGroup.nCachedObjects_,h=l.length;a!==h;++a)l[a].unbind()}}let gs=(()=>{class c{constructor(a,h,d){this.path=h,this.parsedPath=d||c.parseTrackName(h),this.node=c.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(a,h,d){return a&&a.isAnimationObjectGroup?new c.Composite(a,h,d):new c(a,h,d)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(oyt,"")}static parseTrackName(a){const h=dyt.exec(a);if(null===h)throw new Error("PropertyBinding: Cannot parse trackName: "+a);const d={nodeName:h[2],objectName:h[3],objectIndex:h[4],propertyName:h[5],propertyIndex:h[6]},f=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==f&&-1!==f){const p=d.nodeName.substring(f+1);-1!==fyt.indexOf(p)&&(d.nodeName=d.nodeName.substring(0,f),d.objectName=p)}if(null===d.propertyName||0===d.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+a);return d}static findNode(a,h){if(void 0===h||""===h||"."===h||-1===h||h===a.name||h===a.uuid)return a;if(a.skeleton){const d=a.skeleton.getBoneByName(h);if(void 0!==d)return d}if(a.children){const d=function(p){for(let g=0;g<p.length;g++){const m=p[g];if(m.name===h||m.uuid===h)return m;const v=d(m.children);if(v)return v}return null},f=d(a.children);if(f)return f}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,h){a[h]=this.targetObject[this.propertyName]}_getValue_array(a,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)a[h++]=d[f]}_getValue_arrayElement(a,h){a[h]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,h){this.resolvedProperty.toArray(a,h)}_setValue_direct(a,h){this.targetObject[this.propertyName]=a[h]}_setValue_direct_setNeedsUpdate(a,h){this.targetObject[this.propertyName]=a[h],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,h){this.targetObject[this.propertyName]=a[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)d[f]=a[h++]}_setValue_array_setNeedsUpdate(a,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)d[f]=a[h++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(a,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)d[f]=a[h++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,h){this.resolvedProperty[this.propertyIndex]=a[h]}_setValue_arrayElement_setNeedsUpdate(a,h){this.resolvedProperty[this.propertyIndex]=a[h],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,h){this.resolvedProperty[this.propertyIndex]=a[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(a,h){this.resolvedProperty.fromArray(a,h)}_setValue_fromArray_setNeedsUpdate(a,h){this.resolvedProperty.fromArray(a,h),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,h){this.resolvedProperty.fromArray(a,h),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,h){this.bind(),this.getValue(a,h)}_setValue_unbound(a,h){this.bind(),this.setValue(a,h)}bind(){let a=this.node;const h=this.parsedPath,d=h.objectName,f=h.propertyName;let p=h.propertyIndex;if(a||(a=c.findNode(this.rootNode,h.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!a)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(d){let y=h.objectIndex;switch(d){case"materials":if(!a.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!a.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);a=a.skeleton.bones;for(let _=0;_<a.length;_++)if(a[_].name===y){y=_;break}break;default:if(void 0===a[d])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);a=a[d]}if(void 0!==y){if(void 0===a[y])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);a=a[y]}}const g=a[f];if(void 0===g)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+h.nodeName+"."+f+" but it wasn't found.",a);let m=this.Versioning.None;this.targetObject=a,void 0!==a.needsUpdate?m=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(m=this.Versioning.MatrixWorldNeedsUpdate);let v=this.BindingType.Direct;if(void 0!==p){if("morphTargetInfluences"===f){if(!a.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!a.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==a.morphTargetDictionary[p]&&(p=a.morphTargetDictionary[p])}v=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=p}else void 0!==g.fromArray&&void 0!==g.toArray?(v=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(v=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=f;this.getValue=this.GetterByBindingType[v],this.setValue=this.SetterByBindingTypeAndVersioning[v][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=pyt,c})();gs.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},gs.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},gs.prototype.GetterByBindingType=[gs.prototype._getValue_direct,gs.prototype._getValue_array,gs.prototype._getValue_arrayElement,gs.prototype._getValue_toArray],gs.prototype.SetterByBindingTypeAndVersioning=[[gs.prototype._setValue_direct,gs.prototype._setValue_direct_setNeedsUpdate,gs.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gs.prototype._setValue_array,gs.prototype._setValue_array_setNeedsUpdate,gs.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gs.prototype._setValue_arrayElement,gs.prototype._setValue_arrayElement_setNeedsUpdate,gs.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gs.prototype._setValue_fromArray,gs.prototype._setValue_fromArray_setNeedsUpdate,gs.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vyt{constructor(l,a,h=0,d=1/0){this.ray=new h3(l,a),this.near=h,this.far=d,this.camera=null,this.layers=new t$,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(l,a){this.ray.set(l,a)}setFromCamera(l,a){a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(a.matrixWorld),this.ray.direction.set(l.x,l.y,.5).unproject(a).sub(this.ray.origin).normalize(),this.camera=a):a.isOrthographicCamera?(this.ray.origin.set(l.x,l.y,(a.near+a.far)/(a.near-a.far)).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld),this.camera=a):console.error("THREE.Raycaster: Unsupported camera type: "+a.type)}intersectObject(l,a=!0,h=[]){return W$(l,this,h,a),h.sort(C_e),h}intersectObjects(l,a=!0,h=[]){for(let d=0,f=l.length;d<f;d++)W$(l[d],this,h,a);return h.sort(C_e),h}}function C_e(c,l){return c.distance-l.distance}function W$(c,l,a,h){if(c.layers.test(l.layers)&&c.raycast(l,a),!0===h){const d=c.children;for(let f=0,p=d.length;f<p;f++)W$(d[f],l,a,!0)}}class _yt{constructor(){this.type="ShapePath",this.color=new hn,this.subPaths=[],this.currentPath=null}moveTo(l,a){return this.currentPath=new yv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(l,a),this}lineTo(l,a){return this.currentPath.lineTo(l,a),this}quadraticCurveTo(l,a,h,d){return this.currentPath.quadraticCurveTo(l,a,h,d),this}bezierCurveTo(l,a,h,d,f,p){return this.currentPath.bezierCurveTo(l,a,h,d,f,p),this}splineThru(l){return this.currentPath.splineThru(l),this}toShapes(l,a){function h(O){const k=[];for(let D=0,M=O.length;D<M;D++){const A=O[D],L=new up;L.curves=A.curves,k.push(L)}return k}function d(O,k){const D=k.length;let M=!1;for(let A=D-1,L=0;L<D;A=L++){let E=k[A],V=k[L],z=V.x-E.x,U=V.y-E.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(E=k[L],z=-z,V=k[A],U=-U),O.y<E.y||O.y>V.y)continue;if(O.y===E.y){if(O.x===E.x)return!0}else{const Z=U*(O.x-E.x)-z*(O.y-E.y);if(0===Z)return!0;if(Z<0)continue;M=!M}}else{if(O.y!==E.y)continue;if(V.x<=O.x&&O.x<=E.x||E.x<=O.x&&O.x<=V.x)return!0}}return M}const f=hp.isClockWise,p=this.subPaths;if(0===p.length)return[];if(!0===a)return h(p);let g,m,v;const y=[];if(1===p.length)return m=p[0],v=new up,v.curves=m.curves,y.push(v),y;let _=!f(p[0].getPoints());_=l?!_:_;const b=[],C=[];let w,T,x=[],S=0;C[S]=void 0,x[S]=[];for(let O=0,k=p.length;O<k;O++)m=p[O],w=m.getPoints(),g=f(w),g=l?!g:g,g?(!_&&C[S]&&S++,C[S]={s:new up,p:w},C[S].s.curves=m.curves,_&&S++,x[S]=[]):x[S].push({h:m,p:w[0]});if(!C[0])return h(p);if(C.length>1){let O=!1,k=0;for(let D=0,M=C.length;D<M;D++)b[D]=[];for(let D=0,M=C.length;D<M;D++){const A=x[D];for(let L=0;L<A.length;L++){const E=A[L];let V=!0;for(let z=0;z<C.length;z++)d(E.p,C[z].p)&&(D!==z&&k++,V?(V=!1,b[z].push(E)):O=!0);V&&b[D].push(E)}}k>0&&!1===O&&(x=b)}for(let O=0,k=C.length;O<k;O++){v=C[O].s,y.push(v),T=x[O];for(let D=0,M=T.length;D<M;D++)v.holes.push(T[D].h)}return y}}function Tyt(){const c=new ArrayBuffer(4),l=new Float32Array(c),a=new Uint32Array(c),h=new Uint32Array(512),d=new Uint32Array(512);for(let m=0;m<256;++m){const v=m-127;v<-27?(h[m]=0,h[256|m]=32768,d[m]=24,d[256|m]=24):v<-14?(h[m]=1024>>-v-14,h[256|m]=1024>>-v-14|32768,d[m]=-v-1,d[256|m]=-v-1):v<=15?(h[m]=v+15<<10,h[256|m]=v+15<<10|32768,d[m]=13,d[256|m]=13):v<128?(h[m]=31744,h[256|m]=64512,d[m]=24,d[256|m]=24):(h[m]=31744,h[256|m]=64512,d[m]=13,d[256|m]=13)}const f=new Uint32Array(2048),p=new Uint32Array(64),g=new Uint32Array(64);for(let m=1;m<1024;++m){let v=m<<13,y=0;for(;0==(8388608&v);)v<<=1,y-=8388608;v&=-8388609,y+=947912704,f[m]=v|y}for(let m=1024;m<2048;++m)f[m]=939524096+(m-1024<<13);for(let m=1;m<31;++m)p[m]=m<<23;p[31]=1199570944,p[32]=2147483648;for(let m=33;m<63;++m)p[m]=2147483648+(m-32<<23);p[63]=3347054592;for(let m=1;m<64;++m)32!==m&&(g[m]=1024);return{floatView:l,uint32View:a,baseTable:h,shiftTable:d,mantissaTable:f,exponentTable:p,offsetTable:g}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");class W2{constructor(){this.iWidthPixelIncrement=0,this.iHeightPixelIncrement=0,this.iXPixelIncrement=0,this.iYPixelIncrement=0,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iPercentage=!1,this.bLight=!0,this.actionHandler=()=>{},this.params=new Map,this.appLogoTextProvider=()=>"",this.appParamProvider=()=>({})}get canvasWidth(){let l=window.innerWidth+this.iWidthPixelIncrement;return this.iCanvasWidth>0?this.iCanvasWidth*(this.iPercentage?l/100:1):l}get canvasHeight(){let l=window.innerHeight+this.iHeightPixelIncrement;return this.iCanvasHeight>0?this.iCanvasHeight*(this.iPercentage?l/100:1):l}get canvasPercentage(){return this.iPercentage}incrementX(l){return l+this.iXPixelIncrement}incrementY(l){return l+this.iYPixelIncrement}isLight(){return this.bLight}setWidthPixelIncrement(l){return this.iWidthPixelIncrement=l,this}setHeightPixelIncrement(l){return this.iHeightPixelIncrement=l,this}setXPixelIncrement(l){return this.iXPixelIncrement=l,this}setYPixelIncrement(l){return this.iYPixelIncrement=l,this}setCanvasWidth(l){return this.iCanvasWidth=l,this}setCanvasHeight(l){return this.iCanvasHeight=l,this}setPercentage(l){return this.iPercentage=l,this}setLight(l){return this.bLight=l,this}setActionHandler(l){return this.actionHandler=l,this}setParam(l,a){return this.params.set(l,a),this}getParam(l){return this.params.get(l)}setAppLogoTextProvider(l){return this.appLogoTextProvider=l,this}setAppParamProvider(l){return this.appParamProvider=l,this}runAction(l){return this.actionHandler&&this.actionHandler(l),this}init(l){}render(){}onResize(){}onMouseMove(l){}onMouseClick(l){}dispose(){}}class kyt extends W2{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.cube=null,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(l){this.renderer=l;let a=this.canvasWidth,h=this.canvasHeight;this.renderer.setSize(a,h),this.renderer.setClearColor(255,1),this.scene=new k2,this.camera=new xo(75,a/h,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new o4(4210752),this.light.position.z=10,this.scene.add(this.light);const d=new cp(1,1,1),f=new oo({color:65280,wireframe:!1,transparent:!0});this.cube=new sr(d,f),this.scene.add(this.cube)}onMouseMove(l){}onResize(){const l=this.canvasWidth,a=this.canvasHeight;this.camera.aspect=l/a,this.camera.updateProjectionMatrix(),this.renderer.setSize(l,a)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.renderer.render(this.scene,this.camera)}}class Myt extends W2{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.cube=null,this.mouseX=0,this.mouseY=0,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(l){this.renderer=l,this.camera=new xo(20,this.canvasWidth/this.canvasHeight,1,1e4),this.camera.position.z=1800,this.scene=new k2,this.scene.background=new hn(16777215);const a=new c_e(16777215);a.position.set(0,0,1),this.scene.add(a);const h=document.createElement("canvas");h.width=128,h.height=128;const f=h.getContext("2d"),p=f.createRadialGradient(h.width/2,h.height/2,0,h.width/2,h.height/2,h.width/2);p.addColorStop(.1,"rgba(210,210,210,1)"),p.addColorStop(1,"rgba(255,255,255,1)"),f.fillStyle=p,f.fillRect(0,0,h.width,h.height);const g=new Nye(h),m=new oo({map:g}),v=new ub(300,300,1,1);let y;y=new sr(v,m),y.position.y=-250,y.rotation.x=-Math.PI/2,this.scene.add(y),y=new sr(v,m),y.position.y=-250,y.position.x=-400,y.rotation.x=-Math.PI/2,this.scene.add(y),y=new sr(v,m),y.position.y=-250,y.position.x=400,y.rotation.x=-Math.PI/2,this.scene.add(y);const _=200,b=new z2(_,1),C=b.attributes.position.count;b.setAttribute("color",new Fs(new Float32Array(3*C),3));const x=b.clone(),S=b.clone(),w=new hn,T=b.attributes.position,O=x.attributes.position,k=S.attributes.position,D=b.attributes.color,M=x.attributes.color,A=S.attributes.color;for(let Y=0;Y<C;Y++)w.setHSL((T.getY(Y)/_+1)/2,1,.5),D.setXYZ(Y,w.r,w.g,w.b),w.setHSL(0,(O.getY(Y)/_+1)/2,.5),M.setXYZ(Y,w.r,w.g,w.b),w.setRGB(1,.8-(k.getY(Y)/_+1)/2,0),A.setXYZ(Y,w.r,w.g,w.b);const L=new Yye({color:16777215,flatShading:!0,vertexColors:!0,shininess:0}),E=new oo({color:0,wireframe:!0,transparent:!0});let V=new sr(b,L),z=new sr(b,E);V.add(z),V.position.x=-400,V.rotation.x=-1.87,this.scene.add(V),V=new sr(x,L),z=new sr(x,E),V.add(z),V.position.x=400,this.scene.add(V),V=new sr(S,L),z=new sr(S,E),V.add(z),this.scene.add(V),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.setClearColor(255,1)}onMouseMove(l){let h=this.canvasHeight/2;this.mouseX=l.clientX-this.canvasWidth/2,this.mouseY=l.clientY-h}onResize(){const l=this.canvasWidth,a=this.canvasHeight;this.camera.aspect=l/a,this.camera.updateProjectionMatrix(),this.renderer.setSize(l,a)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position)),this.renderer.render(this.scene,this.camera)}}const p4={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class G2{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const Eyt=new O2(-1,1,1,-1,0,1),j$=new Fi;j$.setAttribute("position",new In([-1,3,0,-1,-1,0,3,-1,0],3)),j$.setAttribute("uv",new In([0,2,0,0,2,0],2));class P_e{constructor(l){this._mesh=new sr(j$,l)}dispose(){this._mesh.geometry.dispose()}render(l){l.render(this._mesh,Eyt)}get material(){return this._mesh.material}set material(l){this._mesh.material=l}}class q$ extends G2{constructor(l,a){super(),this.textureID=void 0!==a?a:"tDiffuse",l instanceof qa?(this.uniforms=l.uniforms,this.material=l):l&&(this.uniforms=w3.clone(l.uniforms),this.material=new qa({defines:Object.assign({},l.defines),uniforms:this.uniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader})),this.fsQuad=new P_e(this.material)}render(l,a,h){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=h.texture),this.fsQuad.material=this.material,this.renderToScreen?(l.setRenderTarget(null),this.fsQuad.render(l)):(l.setRenderTarget(a),this.clear&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),this.fsQuad.render(l))}}class R_e extends G2{constructor(l,a){super(),this.scene=l,this.camera=a,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(l,a,h){const d=l.getContext(),f=l.state;let p,g;f.buffers.color.setMask(!1),f.buffers.depth.setMask(!1),f.buffers.color.setLocked(!0),f.buffers.depth.setLocked(!0),this.inverse?(p=0,g=1):(p=1,g=0),f.buffers.stencil.setTest(!0),f.buffers.stencil.setOp(d.REPLACE,d.REPLACE,d.REPLACE),f.buffers.stencil.setFunc(d.ALWAYS,p,4294967295),f.buffers.stencil.setClear(g),f.buffers.stencil.setLocked(!0),l.setRenderTarget(h),this.clear&&l.clear(),l.render(this.scene,this.camera),l.setRenderTarget(a),this.clear&&l.clear(),l.render(this.scene,this.camera),f.buffers.color.setLocked(!1),f.buffers.depth.setLocked(!1),f.buffers.stencil.setLocked(!1),f.buffers.stencil.setFunc(d.EQUAL,1,4294967295),f.buffers.stencil.setOp(d.KEEP,d.KEEP,d.KEEP),f.buffers.stencil.setLocked(!0)}}class Ayt extends G2{constructor(){super(),this.needsSwap=!1}render(l){l.state.buffers.stencil.setLocked(!1),l.state.buffers.stencil.setTest(!1)}}class Iyt{constructor(l,a){if(this.renderer=l,void 0===a){const h=l.getSize(new mt);this._pixelRatio=l.getPixelRatio(),this._width=h.width,this._height=h.height,(a=new kl(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=a.width,this._height=a.height;this.renderTarget1=a,this.renderTarget2=a.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===p4&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===q$&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new q$(p4),this.clock=new m_e}swapBuffers(){const l=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=l}addPass(l){this.passes.push(l),l.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(l,a){this.passes.splice(a,0,l),l.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(l){const a=this.passes.indexOf(l);-1!==a&&this.passes.splice(a,1)}isLastEnabledPass(l){for(let a=l+1;a<this.passes.length;a++)if(this.passes[a].enabled)return!1;return!0}render(l){void 0===l&&(l=this.clock.getDelta());const a=this.renderer.getRenderTarget();let h=!1;for(let d=0,f=this.passes.length;d<f;d++){const p=this.passes[d];if(!1!==p.enabled){if(p.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(d),p.render(this.renderer,this.writeBuffer,this.readBuffer,l,h),p.needsSwap){if(h){const g=this.renderer.getContext(),m=this.renderer.state.buffers.stencil;m.setFunc(g.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,l),m.setFunc(g.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==R_e&&(p instanceof R_e?h=!0:p instanceof Ayt&&(h=!1))}}this.renderer.setRenderTarget(a)}reset(l){if(void 0===l){const a=this.renderer.getSize(new mt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=a.width,this._height=a.height,(l=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=l,this.renderTarget2=l.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(l,a){this._width=l,this._height=a;const h=this._width*this._pixelRatio,d=this._height*this._pixelRatio;this.renderTarget1.setSize(h,d),this.renderTarget2.setSize(h,d);for(let f=0;f<this.passes.length;f++)this.passes[f].setSize(h,d)}setPixelRatio(l){this._pixelRatio=l,this.setSize(this._width,this._height)}}new O2(-1,1,1,-1,0,1);const Z$=new Fi;Z$.setAttribute("position",new In([-1,3,0,-1,-1,0,3,-1,0],3)),Z$.setAttribute("uv",new In([0,2,0,0,2,0],2));class Ryt extends G2{constructor(l,a,h,d,f){super(),this.scene=l,this.camera=a,this.overrideMaterial=h,this.clearColor=d,this.clearAlpha=void 0!==f?f:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new hn}render(l,a,h){const d=l.autoClear;let f,p;l.autoClear=!1,void 0!==this.overrideMaterial&&(p=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(l.getClearColor(this._oldClearColor),f=l.getClearAlpha(),l.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&l.clearDepth(),l.setRenderTarget(this.renderToScreen?null:h),this.clear&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),l.render(this.scene,this.camera),this.clearColor&&l.setClearColor(this._oldClearColor,f),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=p),l.autoClear=d}}class nm extends G2{constructor(l,a,h,d){super(),this.renderScene=a,this.renderCamera=h,this.selectedObjects=void 0!==d?d:[],this.visibleEdgeColor=new hn(1,1,1),this.hiddenEdgeColor=new hn(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==l?new mt(l.x,l.y):new mt(256,256);const f=Math.round(this.resolution.x/this.downSampleRatio),p=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new kl(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new C$,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=function y(_,b){return _.replace(/DEPTH_TO_VIEW_Z/g,(b.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new kl(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new kl(f,p),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new kl(f,p),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new kl(Math.round(f/2),Math.round(p/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new kl(f,p),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new kl(Math.round(f/2),Math.round(p/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(f,p),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(f/2),Math.round(p/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===p4&&console.error("THREE.OutlinePass relies on CopyShader");const v=p4;this.copyUniforms=w3.clone(v.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new qa({uniforms:this.copyUniforms,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,blending:0,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new hn,this.oldClearAlpha=1,this.fsQuad=new P_e(null),this.tempPulseColor1=new hn,this.tempPulseColor2=new hn,this.textureMatrix=new bi}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(l,a){this.renderTargetMaskBuffer.setSize(l,a),this.renderTargetDepthBuffer.setSize(l,a);let h=Math.round(l/this.downSampleRatio),d=Math.round(a/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(h,d),this.renderTargetBlurBuffer1.setSize(h,d),this.renderTargetEdgeBuffer1.setSize(h,d),this.separableBlurMaterial1.uniforms.texSize.value.set(h,d),h=Math.round(h/2),d=Math.round(d/2),this.renderTargetBlurBuffer2.setSize(h,d),this.renderTargetEdgeBuffer2.setSize(h,d),this.separableBlurMaterial2.uniforms.texSize.value.set(h,d)}changeVisibilityOfSelectedObjects(l){const a=this._visibilityCache;function h(d){d.isMesh&&(!0===l?d.visible=a.get(d):(a.set(d,d.visible),d.visible=l))}for(let d=0;d<this.selectedObjects.length;d++)this.selectedObjects[d].traverse(h)}changeVisibilityOfNonSelectedObjects(l){const a=this._visibilityCache,h=[];function d(p){p.isMesh&&h.push(p)}for(let p=0;p<this.selectedObjects.length;p++)this.selectedObjects[p].traverse(d);this.renderScene.traverse(function f(p){if(p.isMesh||p.isSprite){let g=!1;for(let m=0;m<h.length;m++)if(h[m].id===p.id){g=!0;break}if(!1===g){const m=p.visible;(!1===l||!0===a.get(p))&&(p.visible=l),a.set(p,m)}}else(p.isPoints||p.isLine)&&(!0===l?p.visible=a.get(p):(a.set(p,p.visible),p.visible=l))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(l,a,h,d,f){if(this.selectedObjects.length>0){l.getClearColor(this._oldClearColor),this.oldClearAlpha=l.getClearAlpha();const p=l.autoClear;l.autoClear=!1,f&&l.state.buffers.stencil.setTest(!1),l.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const g=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,l.setRenderTarget(this.renderTargetDepthBuffer),l.clear(),l.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,l.setRenderTarget(this.renderTargetMaskBuffer),l.clear(),l.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=g,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,l.setRenderTarget(this.renderTargetMaskDownSampleBuffer),l.clear(),this.fsQuad.render(l),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const m=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(m),this.tempPulseColor2.multiplyScalar(m)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,l.setRenderTarget(this.renderTargetEdgeBuffer1),l.clear(),this.fsQuad.render(l),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=nm.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,l.setRenderTarget(this.renderTargetBlurBuffer1),l.clear(),this.fsQuad.render(l),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=nm.BlurDirectionY,l.setRenderTarget(this.renderTargetEdgeBuffer1),l.clear(),this.fsQuad.render(l),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=nm.BlurDirectionX,l.setRenderTarget(this.renderTargetBlurBuffer2),l.clear(),this.fsQuad.render(l),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=nm.BlurDirectionY,l.setRenderTarget(this.renderTargetEdgeBuffer2),l.clear(),this.fsQuad.render(l),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,f&&l.state.buffers.stencil.setTest(!0),l.setRenderTarget(h),this.fsQuad.render(l),l.setClearColor(this._oldClearColor,this.oldClearAlpha),l.autoClear=p}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=h.texture,l.setRenderTarget(null),this.fsQuad.render(l))}getPrepareMaskMaterial(){return new qa({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new mt(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new qa({uniforms:{maskTexture:{value:null},texSize:{value:new mt(.5,.5)},visibleEdgeColor:{value:new re(1,1,1)},hiddenEdgeColor:{value:new re(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(l){return new qa({defines:{MAX_RADIUS:l},uniforms:{colorTexture:{value:null},texSize:{value:new mt(.5,.5)},direction:{value:new mt(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new qa({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}nm.BlurDirectionX=new mt(1,0),nm.BlurDirectionY=new mt(0,1);const Fyt={uniforms:{tDiffuse:{value:null},resolution:{value:new mt(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t"};class Nyt extends W2{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.cube=null,this.mouseX=0,this.mouseY=0,this.composer=null,this.effectFXAA=null,this.outlinePass=null,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(l){this.renderer=l;let a=this.canvasWidth,h=this.canvasHeight;this.renderer.setSize(a,h),this.renderer.setClearColor(255,1),this.scene=new k2,this.camera=new xo(75,a/h,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new o4(4210752),this.light.position.z=10,this.scene.add(this.light);const d=new cp(1,1,1),f=new oo({color:65280,wireframe:!1,transparent:!0}),p=new oo({color:0,wireframe:!0,transparent:!0});this.cube=new sr(d,f),this.cube.add(new sr(d,p)),this.scene.add(this.cube),this.composer=new Iyt(this.renderer);const g=new Ryt(this.scene,this.camera);this.composer.addPass(g),this.outlinePass=new nm(new mt(a,h),this.scene,this.camera),this.composer.addPass(this.outlinePass),this.effectFXAA=new q$(Fyt),this.effectFXAA.uniforms.resolution.value.set(1/a,1/h),this.composer.addPass(this.effectFXAA),this.composer.setSize(a,h),this.outlinePass.selectedObjects=[this.cube];const m=document.createElement("canvas");m.width=128,m.height=128;const y=m.getContext("2d");y.fillStyle="red",y.fillRect(0,0,m.width,m.height);const _=new Nye(m);_.wrapS=B1,_.wrapT=B1,this.outlinePass.patternTexture=_,this.outlinePass.edgeStrength=10,this.outlinePass.edgeGlow=1,this.outlinePass.edgeThickness=1,this.outlinePass.pulsePeriod=0,this.outlinePass.usePatternTexture=!0,this.outlinePass.visibleEdgeColor=new hn(16746632)}onMouseMove(l){let h=this.canvasHeight/2;this.mouseX=l.clientX-this.canvasWidth/2,this.mouseY=l.clientY-h}onResize(){const l=this.canvasWidth,a=this.canvasHeight;this.camera.aspect=l/a,this.camera.updateProjectionMatrix(),this.renderer.setSize(l,a),this.composer.setSize(l,a)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.composer&&this.composer.render()}}var pp=(()=>(function(c){c[c.Vertexes=0]="Vertexes",c[c.Normals=1]="Normals",c[c.UV=2]="UV"}(pp||(pp={})),pp))();class kb{constructor(){this.vertexes=[],this.normals=[],this.uv=[]}static builder(){return new kb}addTriangle(l,a,h,d,f,p){this.vertexes.push(l,a,h);let g=new re;g.copy(a),g.sub(l);let m=new re;m.copy(h),m.sub(l);let v=g.cross(m);return v=v.normalize(),this.normals.push(v,v,v),this}addPlaneXY(l,a,h,d=0,f=0){let p=new re(l.x,l.y,l.z),g=new re(l.x,l.y,l.z),m=new re(l.x,l.y,l.z),v=new re(l.x,l.y,l.z);g.add(new re(a,0,0)),m.add(new re(0,-h,0)),v.add(new re(a,-h,0));let y=new rc;return y.set(1,0,0,Math.tan(-f),1,0,0,0,1),p.applyMatrix3(y),g.applyMatrix3(y),m.applyMatrix3(y),v.applyMatrix3(y),this.addTriangle(p,m,g,new mt(0,0),new mt(0,1),new mt(1,0)),this.addTriangle(g,m,v,new mt(1,0),new mt(0,1),new mt(1,1)),this}toPlainArray(l=pp.Vertexes){switch(l){case pp.Normals:return this.normals.flatMap(a=>[a.x,a.y,a.z]);case pp.UV:return this.uv.flatMap(a=>[a.x,a.y]);default:return this.vertexes.flatMap(a=>[a.x,a.y,a.z])}}}function Q2(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Lyt(c,l){this.source=c,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=l,this.destLen=0,this.ltree=new Q2,this.dtree=new Q2}String.prototype.codePointAt||function(){var c=function(){try{var a={},h=Object.defineProperty,d=h(a,a,a)&&h}catch(f){}return d}(),l=function(a){if(null==this)throw TypeError();var h=String(this),d=h.length,f=a?Number(a):0;if(f!=f&&(f=0),!(f<0||f>=d)){var g,p=h.charCodeAt(f);return p>=55296&&p<=56319&&d>f+1&&(g=h.charCodeAt(f+1))>=56320&&g<=57343?1024*(p-55296)+g-56320+65536:p}};c?c(String.prototype,"codePointAt",{value:l,configurable:!0,writable:!0}):String.prototype.codePointAt=l}();var N_e=new Q2,L_e=new Q2,Y$=new Uint8Array(30),K$=new Uint16Array(30),B_e=new Uint8Array(30),V_e=new Uint16Array(30),Byt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),z_e=new Q2,Qd=new Uint8Array(320);function U_e(c,l,a,h){var d,f;for(d=0;d<a;++d)c[d]=0;for(d=0;d<30-a;++d)c[d+a]=d/a|0;for(f=h,d=0;d<30;++d)l[d]=f,f+=1<<c[d]}var H_e=new Uint16Array(16);function J$(c,l,a,h){var d,f;for(d=0;d<16;++d)c.table[d]=0;for(d=0;d<h;++d)c.table[l[a+d]]++;for(c.table[0]=0,f=0,d=0;d<16;++d)H_e[d]=f,f+=c.table[d];for(d=0;d<h;++d)l[a+d]&&(c.trans[H_e[l[a+d]]++]=d)}function zyt(c){c.bitcount--||(c.tag=c.source[c.sourceIndex++],c.bitcount=7);var l=1&c.tag;return c.tag>>>=1,l}function jd(c,l,a){if(!l)return a;for(;c.bitcount<24;)c.tag|=c.source[c.sourceIndex++]<<c.bitcount,c.bitcount+=8;var h=c.tag&65535>>>16-l;return c.tag>>>=l,c.bitcount-=l,h+a}function eW(c,l){for(;c.bitcount<24;)c.tag|=c.source[c.sourceIndex++]<<c.bitcount,c.bitcount+=8;var a=0,h=0,d=0,f=c.tag;do{h=2*h+(1&f),f>>>=1,++d,a+=l.table[d],h-=l.table[d]}while(h>=0);return c.tag=f,c.bitcount-=d,l.trans[a+h]}function Uyt(c,l,a){var h,d,f,p,g,m;for(h=jd(c,5,257),d=jd(c,5,1),f=jd(c,4,4),p=0;p<19;++p)Qd[p]=0;for(p=0;p<f;++p){var v=jd(c,3,0);Qd[Byt[p]]=v}for(J$(z_e,Qd,0,19),g=0;g<h+d;){var y=eW(c,z_e);switch(y){case 16:var _=Qd[g-1];for(m=jd(c,2,3);m;--m)Qd[g++]=_;break;case 17:for(m=jd(c,3,3);m;--m)Qd[g++]=0;break;case 18:for(m=jd(c,7,11);m;--m)Qd[g++]=0;break;default:Qd[g++]=y}}J$(l,Qd,0,h),J$(a,Qd,h,d)}function $_e(c,l,a){for(;;){var d,f,p,g,h=eW(c,l);if(256===h)return 0;if(h<256)c.dest[c.destLen++]=h;else for(d=jd(c,Y$[h-=257],K$[h]),f=eW(c,a),g=p=c.destLen-jd(c,B_e[f],V_e[f]);g<p+d;++g)c.dest[c.destLen++]=c.dest[g]}}function Hyt(c){for(var l,h;c.bitcount>8;)c.sourceIndex--,c.bitcount-=8;if((l=256*(l=c.source[c.sourceIndex+1])+c.source[c.sourceIndex])!==(65535&~(256*c.source[c.sourceIndex+3]+c.source[c.sourceIndex+2])))return-3;for(c.sourceIndex+=4,h=l;h;--h)c.dest[c.destLen++]=c.source[c.sourceIndex++];return c.bitcount=0,0}(function Vyt(c,l){var a;for(a=0;a<7;++a)c.table[a]=0;for(c.table[7]=24,c.table[8]=152,c.table[9]=112,a=0;a<24;++a)c.trans[a]=256+a;for(a=0;a<144;++a)c.trans[24+a]=a;for(a=0;a<8;++a)c.trans[168+a]=280+a;for(a=0;a<112;++a)c.trans[176+a]=144+a;for(a=0;a<5;++a)l.table[a]=0;for(l.table[5]=32,a=0;a<32;++a)l.trans[a]=a})(N_e,L_e),U_e(Y$,K$,4,3),U_e(B_e,V_e,2,1),Y$[28]=0,K$[28]=258;function Mb(c,l,a,h,d){return Math.pow(1-d,3)*c+3*Math.pow(1-d,2)*d*l+3*(1-d)*Math.pow(d,2)*a+Math.pow(d,3)*h}function gp(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function wo(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function W_e(c){throw new Error(c)}function G_e(c,l){c||W_e(l)}gp.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},gp.prototype.addPoint=function(c,l){"number"==typeof c&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=c,this.x2=c),c<this.x1&&(this.x1=c),c>this.x2&&(this.x2=c)),"number"==typeof l&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=l,this.y2=l),l<this.y1&&(this.y1=l),l>this.y2&&(this.y2=l))},gp.prototype.addX=function(c){this.addPoint(c,null)},gp.prototype.addY=function(c){this.addPoint(null,c)},gp.prototype.addBezier=function(c,l,a,h,d,f,p,g){var m=[c,l],v=[a,h],y=[d,f],_=[p,g];this.addPoint(c,l),this.addPoint(p,g);for(var b=0;b<=1;b++){var C=6*m[b]-12*v[b]+6*y[b],x=-3*m[b]+9*v[b]-9*y[b]+3*_[b],S=3*v[b]-3*m[b];if(0!==x){var T=Math.pow(C,2)-4*S*x;if(!(T<0)){var O=(-C+Math.sqrt(T))/(2*x);0<O&&O<1&&(0===b&&this.addX(Mb(m[b],v[b],y[b],_[b],O)),1===b&&this.addY(Mb(m[b],v[b],y[b],_[b],O)));var k=(-C-Math.sqrt(T))/(2*x);0<k&&k<1&&(0===b&&this.addX(Mb(m[b],v[b],y[b],_[b],k)),1===b&&this.addY(Mb(m[b],v[b],y[b],_[b],k)))}}else{if(0===C)continue;var w=-S/C;0<w&&w<1&&(0===b&&this.addX(Mb(m[b],v[b],y[b],_[b],w)),1===b&&this.addY(Mb(m[b],v[b],y[b],_[b],w)))}}},gp.prototype.addQuad=function(c,l,a,h,d,f){var p=c+.6666666666666666*(a-c),g=l+2/3*(h-l);this.addBezier(c,l,p,g,p+1/3*(d-c),g+1/3*(f-l),d,f)},wo.prototype.moveTo=function(c,l){this.commands.push({type:"M",x:c,y:l})},wo.prototype.lineTo=function(c,l){this.commands.push({type:"L",x:c,y:l})},wo.prototype.curveTo=wo.prototype.bezierCurveTo=function(c,l,a,h,d,f){this.commands.push({type:"C",x1:c,y1:l,x2:a,y2:h,x:d,y:f})},wo.prototype.quadTo=wo.prototype.quadraticCurveTo=function(c,l,a,h){this.commands.push({type:"Q",x1:c,y1:l,x:a,y:h})},wo.prototype.close=wo.prototype.closePath=function(){this.commands.push({type:"Z"})},wo.prototype.extend=function(c){if(c.commands)c=c.commands;else if(c instanceof gp){var l=c;return this.moveTo(l.x1,l.y1),this.lineTo(l.x2,l.y1),this.lineTo(l.x2,l.y2),this.lineTo(l.x1,l.y2),void this.close()}Array.prototype.push.apply(this.commands,c)},wo.prototype.getBoundingBox=function(){for(var c=new gp,l=0,a=0,h=0,d=0,f=0;f<this.commands.length;f++){var p=this.commands[f];switch(p.type){case"M":c.addPoint(p.x,p.y),l=h=p.x,a=d=p.y;break;case"L":c.addPoint(p.x,p.y),h=p.x,d=p.y;break;case"Q":c.addQuad(h,d,p.x1,p.y1,p.x,p.y),h=p.x,d=p.y;break;case"C":c.addBezier(h,d,p.x1,p.y1,p.x2,p.y2,p.x,p.y),h=p.x,d=p.y;break;case"Z":h=l,d=a;break;default:throw new Error("Unexpected path command "+p.type)}}return c.isEmpty()&&c.addPoint(0,0),c},wo.prototype.draw=function(c){c.beginPath();for(var l=0;l<this.commands.length;l+=1){var a=this.commands[l];"M"===a.type?c.moveTo(a.x,a.y):"L"===a.type?c.lineTo(a.x,a.y):"C"===a.type?c.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?c.quadraticCurveTo(a.x1,a.y1,a.x,a.y):"Z"===a.type&&c.closePath()}this.fill&&(c.fillStyle=this.fill,c.fill()),this.stroke&&(c.strokeStyle=this.stroke,c.lineWidth=this.strokeWidth,c.stroke())},wo.prototype.toPathData=function(c){function l(p){return Math.round(p)===p?""+Math.round(p):p.toFixed(c)}function a(){for(var p=arguments,g="",m=0;m<arguments.length;m+=1){var v=p[m];v>=0&&m>0&&(g+=" "),g+=l(v)}return g}c=void 0!==c?c:2;for(var h="",d=0;d<this.commands.length;d+=1){var f=this.commands[d];"M"===f.type?h+="M"+a(f.x,f.y):"L"===f.type?h+="L"+a(f.x,f.y):"C"===f.type?h+="C"+a(f.x1,f.y1,f.x2,f.y2,f.x,f.y):"Q"===f.type?h+="Q"+a(f.x1,f.y1,f.x,f.y):"Z"===f.type&&(h+="Z")}return h},wo.prototype.toSVG=function(c){var l='<path d="';return l+=this.toPathData(c),l+='"',this.fill&&"black"!==this.fill&&(l+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(l+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),l+"/>"},wo.prototype.toDOMElement=function(c){var l=this.toPathData(c),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",l),a};var Qn={fail:W_e,argument:G_e,assert:G_e},Eb={},dn={},hi={};function Ph(c){return function(){return c}}dn.BYTE=function(c){return Qn.argument(c>=0&&c<=255,"Byte value should be between 0 and 255."),[c]},hi.BYTE=Ph(1),dn.CHAR=function(c){return[c.charCodeAt(0)]},hi.CHAR=Ph(1),dn.CHARARRAY=function(c){void 0===c&&(c="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var l=[],a=0;a<c.length;a+=1)l[a]=c.charCodeAt(a);return l},hi.CHARARRAY=function(c){return void 0===c?0:c.length},dn.USHORT=function(c){return[c>>8&255,255&c]},hi.USHORT=Ph(2),dn.SHORT=function(c){return c>=32768&&(c=-(65536-c)),[c>>8&255,255&c]},hi.SHORT=Ph(2),dn.UINT24=function(c){return[c>>16&255,c>>8&255,255&c]},hi.UINT24=Ph(3),dn.ULONG=function(c){return[c>>24&255,c>>16&255,c>>8&255,255&c]},hi.ULONG=Ph(4),dn.LONG=function(c){return c>=2147483648&&(c=-(4294967296-c)),[c>>24&255,c>>16&255,c>>8&255,255&c]},hi.LONG=Ph(4),dn.FIXED=dn.ULONG,hi.FIXED=hi.ULONG,dn.FWORD=dn.SHORT,hi.FWORD=hi.SHORT,dn.UFWORD=dn.USHORT,hi.UFWORD=hi.USHORT,dn.LONGDATETIME=function(c){return[0,0,0,0,c>>24&255,c>>16&255,c>>8&255,255&c]},hi.LONGDATETIME=Ph(8),dn.TAG=function(c){return Qn.argument(4===c.length,"Tag should be exactly 4 ASCII characters."),[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]},hi.TAG=Ph(4),dn.Card8=dn.BYTE,hi.Card8=hi.BYTE,dn.Card16=dn.USHORT,hi.Card16=hi.USHORT,dn.OffSize=dn.BYTE,hi.OffSize=hi.BYTE,dn.SID=dn.USHORT,hi.SID=hi.USHORT,dn.NUMBER=function(c){return c>=-107&&c<=107?[c+139]:c>=108&&c<=1131?[247+((c-=108)>>8),255&c]:c>=-1131&&c<=-108?[251+((c=-c-108)>>8),255&c]:c>=-32768&&c<=32767?dn.NUMBER16(c):dn.NUMBER32(c)},hi.NUMBER=function(c){return dn.NUMBER(c).length},dn.NUMBER16=function(c){return[28,c>>8&255,255&c]},hi.NUMBER16=Ph(3),dn.NUMBER32=function(c){return[29,c>>24&255,c>>16&255,c>>8&255,255&c]},hi.NUMBER32=Ph(5),dn.REAL=function(c){var l=c.toString(),a=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(l);if(a){var h=parseFloat("1e"+((a[2]?+a[2]:0)+a[1].length));l=(Math.round(c*h)/h).toString()}for(var d="",f=0,p=l.length;f<p;f+=1){var g=l[f];d+="e"===g?"-"===l[++f]?"c":"b":"."===g?"a":"-"===g?"e":g}for(var m=[30],v=0,y=(d+=1&d.length?"f":"ff").length;v<y;v+=2)m.push(parseInt(d.substr(v,2),16));return m},hi.REAL=function(c){return dn.REAL(c).length},dn.NAME=dn.CHARARRAY,hi.NAME=hi.CHARARRAY,dn.STRING=dn.CHARARRAY,hi.STRING=hi.CHARARRAY,Eb.UTF8=function(c,l,a){for(var h=[],d=a,f=0;f<d;f++,l+=1)h[f]=c.getUint8(l);return String.fromCharCode.apply(null,h)},Eb.UTF16=function(c,l,a){for(var h=[],d=a/2,f=0;f<d;f++,l+=2)h[f]=c.getUint16(l);return String.fromCharCode.apply(null,h)},dn.UTF16=function(c){for(var l=[],a=0;a<c.length;a+=1){var h=c.charCodeAt(a);l[l.length]=h>>8&255,l[l.length]=255&h}return l},hi.UTF16=function(c){return 2*c.length};var tW={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};Eb.MACSTRING=function(c,l,a,h){var d=tW[h];if(void 0!==d){for(var f="",p=0;p<a;p++){var g=c.getUint8(l+p);f+=g<=127?String.fromCharCode(g):d[127&g]}return f}};var m4,g4="function"==typeof WeakMap&&new WeakMap;function nW(c){return c>=-128&&c<=127}function Qyt(c,l,a){for(var h=0,d=c.length;l<d&&h<64&&0===c[l];)++l,++h;return a.push(128|h-1),l}function jyt(c,l,a){for(var h=0,d=c.length,f=l;f<d&&h<64;){var p=c[f];if(!nW(p)||0===p&&f+1<d&&0===c[f+1])break;++f,++h}a.push(h-1);for(var g=l;g<f;++g)a.push(c[g]+256&255);return f}function qyt(c,l,a){for(var h=0,d=c.length,f=l;f<d&&h<64;){var p=c[f];if(0===p||nW(p)&&f+1<d&&nW(c[f+1]))break;++f,++h}a.push(64|h-1);for(var g=l;g<f;++g){var m=c[g];a.push(m+65536>>8&255,m+256&255)}return f}dn.MACSTRING=function(c,l){var a=function(c){if(!m4)for(var l in m4={},tW)m4[l]=new String(l);var a=m4[c];if(void 0!==a){if(g4){var h=g4.get(a);if(void 0!==h)return h}var d=tW[c];if(void 0!==d){for(var f={},p=0;p<d.length;p++)f[d.charCodeAt(p)]=p+128;return g4&&g4.set(a,f),f}}}(l);if(void 0!==a){for(var h=[],d=0;d<c.length;d++){var f=c.charCodeAt(d);if(f>=128&&void 0===(f=a[f]))return;h[d]=f}return h}},hi.MACSTRING=function(c,l){var a=dn.MACSTRING(c,l);return void 0!==a?a.length:0},dn.VARDELTAS=function(c){for(var l=0,a=[];l<c.length;){var h=c[l];l=0===h?Qyt(c,l,a):h>=-128&&h<=127?jyt(c,l,a):qyt(c,l,a)}return a},dn.INDEX=function(c){for(var l=1,a=[l],h=[],d=0;d<c.length;d+=1){var f=dn.OBJECT(c[d]);Array.prototype.push.apply(h,f),a.push(l+=f.length)}if(0===h.length)return[0,0];for(var p=[],g=1+Math.floor(Math.log(l)/Math.log(2))/8|0,m=[void 0,dn.BYTE,dn.USHORT,dn.UINT24,dn.ULONG][g],v=0;v<a.length;v+=1){var y=m(a[v]);Array.prototype.push.apply(p,y)}return Array.prototype.concat(dn.Card16(c.length),dn.OffSize(g),p,h)},hi.INDEX=function(c){return dn.INDEX(c).length},dn.DICT=function(c){for(var l=[],a=Object.keys(c),h=a.length,d=0;d<h;d+=1){var f=parseInt(a[d],0),p=c[f];l=(l=l.concat(dn.OPERAND(p.value,p.type))).concat(dn.OPERATOR(f))}return l},hi.DICT=function(c){return dn.DICT(c).length},dn.OPERATOR=function(c){return c<1200?[c]:[12,c-1200]},dn.OPERAND=function(c,l){var a=[];if(Array.isArray(l))for(var h=0;h<l.length;h+=1)Qn.argument(c.length===l.length,"Not enough arguments given for type"+l),a=a.concat(dn.OPERAND(c[h],l[h]));else if("SID"===l)a=a.concat(dn.NUMBER(c));else if("offset"===l)a=a.concat(dn.NUMBER32(c));else if("number"===l)a=a.concat(dn.NUMBER(c));else{if("real"!==l)throw new Error("Unknown operand type "+l);a=a.concat(dn.REAL(c))}return a},dn.OP=dn.BYTE,hi.OP=hi.BYTE;var v4="function"==typeof WeakMap&&new WeakMap;function ra(c,l,a){if(l.length&&("coverageFormat"!==l[0].name||1===l[0].value))for(var h=0;h<l.length;h+=1){var d=l[h];this[d.name]=d.value}if(this.tableName=c,this.fields=l,a)for(var f=Object.keys(a),p=0;p<f.length;p+=1){var g=f[p];void 0!==this[g]&&(this[g]=a[g])}}function j2(c,l,a){void 0===a&&(a=l.length);var h=new Array(l.length+1);h[0]={name:c+"Count",type:"USHORT",value:a};for(var d=0;d<l.length;d++)h[d+1]={name:c+d,type:"USHORT",value:l[d]};return h}function iW(c,l,a){var h=l.length,d=new Array(h+1);d[0]={name:c+"Count",type:"USHORT",value:h};for(var f=0;f<h;f++)d[f+1]={name:c+f,type:"TABLE",value:a(l[f],f)};return d}function q2(c,l,a){var h=l.length,d=[];d[0]={name:c+"Count",type:"USHORT",value:h};for(var f=0;f<h;f++)d=d.concat(a(l[f],f));return d}function y4(c){1===c.format?ra.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(j2("glyph",c.glyphs))):2===c.format?ra.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(q2("rangeRecord",c.ranges,function(l){return[{name:"startGlyphID",type:"USHORT",value:l.start},{name:"endGlyphID",type:"USHORT",value:l.end},{name:"startCoverageIndex",type:"USHORT",value:l.index}]}))):Qn.assert(!1,"Coverage format must be 1 or 2.")}function _4(c){ra.call(this,"scriptListTable",q2("scriptRecord",c,function(l,a){var h=l.script,d=h.defaultLangSys;return Qn.assert(!!d,"Unable to write GSUB: script "+l.tag+" has no default language system."),[{name:"scriptTag"+a,type:"TAG",value:l.tag},{name:"script"+a,type:"TABLE",value:new ra("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ra("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:d.reqFeatureIndex}].concat(j2("featureIndex",d.featureIndexes)))}].concat(q2("langSys",h.langSysRecords,function(f,p){var g=f.langSys;return[{name:"langSysTag"+p,type:"TAG",value:f.tag},{name:"langSys"+p,type:"TABLE",value:new ra("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:g.reqFeatureIndex}].concat(j2("featureIndex",g.featureIndexes)))}]})))}]}))}function b4(c){ra.call(this,"featureListTable",q2("featureRecord",c,function(l,a){var h=l.feature;return[{name:"featureTag"+a,type:"TAG",value:l.tag},{name:"feature"+a,type:"TABLE",value:new ra("featureTable",[{name:"featureParams",type:"USHORT",value:h.featureParams}].concat(j2("lookupListIndex",h.lookupListIndexes)))}]}))}function C4(c,l){ra.call(this,"lookupListTable",iW("lookup",c,function(a){var h=l[a.lookupType];return Qn.assert(!!h,"Unable to write GSUB lookup type "+a.lookupType+" tables."),new ra("lookupTable",[{name:"lookupType",type:"USHORT",value:a.lookupType},{name:"lookupFlag",type:"USHORT",value:a.lookupFlag}].concat(iW("subtable",a.subtables,h)))}))}dn.CHARSTRING=function(c){if(v4){var l=v4.get(c);if(void 0!==l)return l}for(var a=[],h=c.length,d=0;d<h;d+=1){var f=c[d];a=a.concat(dn[f.type](f.value))}return v4&&v4.set(c,a),a},hi.CHARSTRING=function(c){return dn.CHARSTRING(c).length},dn.OBJECT=function(c){var l=dn[c.type];return Qn.argument(void 0!==l,"No encoding function for type "+c.type),l(c.value)},hi.OBJECT=function(c){var l=hi[c.type];return Qn.argument(void 0!==l,"No sizeOf function for type "+c.type),l(c.value)},dn.TABLE=function(c){for(var l=[],a=c.fields.length,h=[],d=[],f=0;f<a;f+=1){var p=c.fields[f],g=dn[p.type];Qn.argument(void 0!==g,"No encoding function for field type "+p.type+" ("+p.name+")");var m=c[p.name];void 0===m&&(m=p.value);var v=g(m);"TABLE"===p.type?(d.push(l.length),l=l.concat([0,0]),h.push(v)):l=l.concat(v)}for(var y=0;y<h.length;y+=1){var _=d[y],b=l.length;Qn.argument(b<65536,"Table "+c.tableName+" too big."),l[_]=b>>8,l[_+1]=255&b,l=l.concat(h[y])}return l},hi.TABLE=function(c){for(var l=0,a=c.fields.length,h=0;h<a;h+=1){var d=c.fields[h],f=hi[d.type];Qn.argument(void 0!==f,"No sizeOf function for field type "+d.type+" ("+d.name+")");var p=c[d.name];void 0===p&&(p=d.value),l+=f(p),"TABLE"===d.type&&(l+=2)}return l},dn.RECORD=dn.TABLE,hi.RECORD=hi.TABLE,dn.LITERAL=function(c){return c},hi.LITERAL=function(c){return c.length},ra.prototype.encode=function(){return dn.TABLE(this)},ra.prototype.sizeOf=function(){return hi.TABLE(this)},(y4.prototype=Object.create(ra.prototype)).constructor=y4,(_4.prototype=Object.create(ra.prototype)).constructor=_4,(b4.prototype=Object.create(ra.prototype)).constructor=b4,(C4.prototype=Object.create(ra.prototype)).constructor=C4;var Cn={Table:ra,Record:ra,Coverage:y4,ScriptList:_4,FeatureList:b4,LookupList:C4,ushortList:j2,tableList:iW,recordList:q2};function q_e(c,l){return c.getUint8(l)}function x4(c,l){return c.getUint16(l,!1)}function rW(c,l){return c.getUint32(l,!1)}function Z_e(c,l){return c.getInt16(l,!1)+c.getUint16(l+2,!1)/65535}var e_t={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function it(c,l){this.data=c,this.offset=l,this.relativeOffset=0}it.prototype.parseByte=function(){var c=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,c},it.prototype.parseChar=function(){var c=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,c},it.prototype.parseCard8=it.prototype.parseByte,it.prototype.parseCard16=it.prototype.parseUShort=function(){var c=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,c},it.prototype.parseSID=it.prototype.parseUShort,it.prototype.parseOffset16=it.prototype.parseUShort,it.prototype.parseShort=function(){var c=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,c},it.prototype.parseF2Dot14=function(){var c=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,c},it.prototype.parseOffset32=it.prototype.parseULong=function(){var c=rW(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,c},it.prototype.parseFixed=function(){var c=Z_e(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,c},it.prototype.parseString=function(c){var l=this.data,a=this.offset+this.relativeOffset,h="";this.relativeOffset+=c;for(var d=0;d<c;d++)h+=String.fromCharCode(l.getUint8(a+d));return h},it.prototype.parseTag=function(){return this.parseString(4)},it.prototype.parseLongDateTime=function(){var c=rW(this.data,this.offset+this.relativeOffset+4);return c-=2082844800,this.relativeOffset+=8,c},it.prototype.parseVersion=function(c){var l=x4(this.data,this.offset+this.relativeOffset),a=x4(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===c&&(c=4096),l+a/c/10},it.prototype.skip=function(c,l){void 0===l&&(l=1),this.relativeOffset+=e_t[c]*l},it.prototype.parseULongList=function(c){void 0===c&&(c=this.parseULong());for(var l=new Array(c),a=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)l[d]=a.getUint32(h),h+=4;return this.relativeOffset+=4*c,l},it.prototype.parseOffset16List=it.prototype.parseUShortList=function(c){void 0===c&&(c=this.parseUShort());for(var l=new Array(c),a=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)l[d]=a.getUint16(h),h+=2;return this.relativeOffset+=2*c,l},it.prototype.parseShortList=function(c){for(var l=new Array(c),a=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)l[d]=a.getInt16(h),h+=2;return this.relativeOffset+=2*c,l},it.prototype.parseByteList=function(c){for(var l=new Array(c),a=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)l[d]=a.getUint8(h++);return this.relativeOffset+=c,l},it.prototype.parseList=function(c,l){l||(l=c,c=this.parseUShort());for(var a=new Array(c),h=0;h<c;h++)a[h]=l.call(this);return a},it.prototype.parseList32=function(c,l){l||(l=c,c=this.parseULong());for(var a=new Array(c),h=0;h<c;h++)a[h]=l.call(this);return a},it.prototype.parseRecordList=function(c,l){l||(l=c,c=this.parseUShort());for(var a=new Array(c),h=Object.keys(l),d=0;d<c;d++){for(var f={},p=0;p<h.length;p++){var g=h[p];f[g]=l[g].call(this)}a[d]=f}return a},it.prototype.parseRecordList32=function(c,l){l||(l=c,c=this.parseULong());for(var a=new Array(c),h=Object.keys(l),d=0;d<c;d++){for(var f={},p=0;p<h.length;p++){var g=h[p];f[g]=l[g].call(this)}a[d]=f}return a},it.prototype.parseStruct=function(c){if("function"==typeof c)return c.call(this);for(var l=Object.keys(c),a={},h=0;h<l.length;h++){var d=l[h];a[d]=c[d].call(this)}return a},it.prototype.parseValueRecord=function(c){if(void 0===c&&(c=this.parseUShort()),0!==c){var l={};return 1&c&&(l.xPlacement=this.parseShort()),2&c&&(l.yPlacement=this.parseShort()),4&c&&(l.xAdvance=this.parseShort()),8&c&&(l.yAdvance=this.parseShort()),16&c&&(l.xPlaDevice=void 0,this.parseShort()),32&c&&(l.yPlaDevice=void 0,this.parseShort()),64&c&&(l.xAdvDevice=void 0,this.parseShort()),128&c&&(l.yAdvDevice=void 0,this.parseShort()),l}},it.prototype.parseValueRecordList=function(){for(var c=this.parseUShort(),l=this.parseUShort(),a=new Array(l),h=0;h<l;h++)a[h]=this.parseValueRecord(c);return a},it.prototype.parsePointer=function(c){var l=this.parseOffset16();if(l>0)return new it(this.data,this.offset+l).parseStruct(c)},it.prototype.parsePointer32=function(c){var l=this.parseOffset32();if(l>0)return new it(this.data,this.offset+l).parseStruct(c)},it.prototype.parseListOfLists=function(c){for(var l=this.parseOffset16List(),a=l.length,h=this.relativeOffset,d=new Array(a),f=0;f<a;f++){var p=l[f];if(0!==p)if(this.relativeOffset=p,c){for(var g=this.parseOffset16List(),m=new Array(g.length),v=0;v<g.length;v++)this.relativeOffset=p+g[v],m[v]=c.call(this);d[f]=m}else d[f]=this.parseUShortList();else d[f]=void 0}return this.relativeOffset=h,d},it.prototype.parseCoverage=function(){var c=this.offset+this.relativeOffset,l=this.parseUShort(),a=this.parseUShort();if(1===l)return{format:1,glyphs:this.parseUShortList(a)};if(2===l){for(var h=new Array(a),d=0;d<a;d++)h[d]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:h}}throw new Error("0x"+c.toString(16)+": Coverage format must be 1 or 2.")},it.prototype.parseClassDef=function(){var c=this.offset+this.relativeOffset,l=this.parseUShort();if(1===l)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===l)return{format:2,ranges:this.parseRecordList({start:it.uShort,end:it.uShort,classId:it.uShort})};throw new Error("0x"+c.toString(16)+": ClassDef format must be 1 or 2.")},it.list=function(c,l){return function(){return this.parseList(c,l)}},it.list32=function(c,l){return function(){return this.parseList32(c,l)}},it.recordList=function(c,l){return function(){return this.parseRecordList(c,l)}},it.recordList32=function(c,l){return function(){return this.parseRecordList32(c,l)}},it.pointer=function(c){return function(){return this.parsePointer(c)}},it.pointer32=function(c){return function(){return this.parsePointer32(c)}},it.tag=it.prototype.parseTag,it.byte=it.prototype.parseByte,it.uShort=it.offset16=it.prototype.parseUShort,it.uShortList=it.prototype.parseUShortList,it.uLong=it.offset32=it.prototype.parseULong,it.uLongList=it.prototype.parseULongList,it.struct=it.prototype.parseStruct,it.coverage=it.prototype.parseCoverage,it.classDef=it.prototype.parseClassDef;var X_e={reserved:it.uShort,reqFeatureIndex:it.uShort,featureIndexes:it.uShortList};it.prototype.parseScriptList=function(){return this.parsePointer(it.recordList({tag:it.tag,script:it.pointer({defaultLangSys:it.pointer(X_e),langSysRecords:it.recordList({tag:it.tag,langSys:it.pointer(X_e)})})}))||[]},it.prototype.parseFeatureList=function(){return this.parsePointer(it.recordList({tag:it.tag,feature:it.pointer({featureParams:it.offset16,lookupListIndexes:it.uShortList})}))||[]},it.prototype.parseLookupList=function(c){return this.parsePointer(it.list(it.pointer(function(){var l=this.parseUShort();Qn.argument(1<=l&&l<=9,"GPOS/GSUB lookup type "+l+" unknown.");var a=this.parseUShort(),h=16&a;return{lookupType:l,lookupFlag:a,subtables:this.parseList(it.pointer(c[l])),markFilteringSet:h?this.parseUShort():void 0}})))||[]},it.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var c=this.parseUShort(),l=this.parseUShort();return Qn.argument(1===c&&l<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:it.offset32,featureTableSubstitutionOffset:it.offset32})})||[]};var Pn={getByte:q_e,getCard8:q_e,getUShort:x4,getCard16:x4,getShort:function Zyt(c,l){return c.getInt16(l,!1)},getULong:rW,getFixed:Z_e,getTag:function Xyt(c,l){for(var a="",h=l;h<l+4;h+=1)a+=String.fromCharCode(c.getInt8(h));return a},getOffset:function Yyt(c,l,a){for(var h=0,d=0;d<a;d+=1)h<<=8,h+=c.getUint8(l+d);return h},getBytes:function Kyt(c,l,a){for(var h=[],d=l;d<a;d+=1)h.push(c.getUint8(d));return h},bytesToString:function Jyt(c){for(var l="",a=0;a<c.length;a+=1)l+=String.fromCharCode(c[a]);return l},Parser:it};function r_t(c,l,a){c.segments.push({end:l,start:l,delta:-(l-a),offset:0,glyphIndex:a})}var Y_e_parse=function i_t(c,l){var a={};a.version=Pn.getUShort(c,l),Qn.argument(0===a.version,"cmap table version should be 0."),a.numTables=Pn.getUShort(c,l+2);for(var h=-1,d=a.numTables-1;d>=0;d-=1){var f=Pn.getUShort(c,l+4+8*d),p=Pn.getUShort(c,l+4+8*d+2);if(3===f&&(0===p||1===p||10===p)||0===f&&(0===p||1===p||2===p||3===p||4===p)){h=Pn.getULong(c,l+4+8*d+4);break}}if(-1===h)throw new Error("No valid cmap sub-tables found.");var g=new Pn.Parser(c,l+h);if(a.format=g.parseUShort(),12===a.format)!function t_t(c,l){var a;l.parseUShort(),c.length=l.parseULong(),c.language=l.parseULong(),c.groupCount=a=l.parseULong(),c.glyphIndexMap={};for(var h=0;h<a;h+=1)for(var d=l.parseULong(),f=l.parseULong(),p=l.parseULong(),g=d;g<=f;g+=1)c.glyphIndexMap[g]=p,p++}(a,g);else{if(4!==a.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+a.format+").");!function n_t(c,l,a,h,d){var f;c.length=l.parseUShort(),c.language=l.parseUShort(),c.segCount=f=l.parseUShort()>>1,l.skip("uShort",3),c.glyphIndexMap={};for(var p=new Pn.Parser(a,h+d+14),g=new Pn.Parser(a,h+d+16+2*f),m=new Pn.Parser(a,h+d+16+4*f),v=new Pn.Parser(a,h+d+16+6*f),y=h+d+16+8*f,_=0;_<f-1;_+=1)for(var b=void 0,C=p.parseUShort(),x=g.parseUShort(),S=m.parseShort(),w=v.parseUShort(),T=x;T<=C;T+=1)0!==w?(y=v.offset+v.relativeOffset-2,y+=w,0!==(b=Pn.getUShort(a,y+=2*(T-x)))&&(b=b+S&65535)):b=T+S&65535,c.glyphIndexMap[T]=b}(a,g,c,l,h)}return a},Y_e_make=function o_t(c){var a,l=!0;for(a=c.length-1;a>0;a-=1)if(c.get(a).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),l=!1;break}var d=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:l?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:l?12:20}];l||(d=d.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),d=d.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var f=new Cn.Table("cmap",d);for(f.segments=[],a=0;a<c.length;a+=1){for(var p=c.get(a),g=0;g<p.unicodes.length;g+=1)r_t(f,p.unicodes[g],a);f.segments=f.segments.sort(function(O,k){return O.start-k.start})}!function s_t(c){c.segments.push({end:65535,start:65535,delta:1,offset:0})}(f);var m=f.segments.length,v=0,y=[],_=[],b=[],C=[],x=[],S=[];for(a=0;a<m;a+=1){var w=f.segments[a];w.end<=65535&&w.start<=65535?(y=y.concat({name:"end_"+a,type:"USHORT",value:w.end}),_=_.concat({name:"start_"+a,type:"USHORT",value:w.start}),b=b.concat({name:"idDelta_"+a,type:"SHORT",value:w.delta}),C=C.concat({name:"idRangeOffset_"+a,type:"USHORT",value:w.offset}),void 0!==w.glyphId&&(x=x.concat({name:"glyph_"+a,type:"USHORT",value:w.glyphId}))):v+=1,!l&&void 0!==w.glyphIndex&&(S=(S=(S=S.concat({name:"cmap12Start_"+a,type:"ULONG",value:w.start})).concat({name:"cmap12End_"+a,type:"ULONG",value:w.end})).concat({name:"cmap12Glyph_"+a,type:"ULONG",value:w.glyphIndex}))}if(f.segCountX2=2*(m-v),f.searchRange=2*Math.pow(2,Math.floor(Math.log(m-v)/Math.log(2))),f.entrySelector=Math.log(f.searchRange/2)/Math.log(2),f.rangeShift=f.segCountX2-f.searchRange,f.fields=f.fields.concat(y),f.fields.push({name:"reservedPad",type:"USHORT",value:0}),f.fields=f.fields.concat(_),f.fields=f.fields.concat(b),f.fields=f.fields.concat(C),f.fields=f.fields.concat(x),f.cmap4Length=14+2*y.length+2+2*_.length+2*b.length+2*C.length+2*x.length,!l){var T=16+4*S.length;f.cmap12Offset=20+f.cmap4Length,f.fields=f.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:T},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:S.length/3}]),f.fields=f.fields.concat(S)}return f},w4=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],a_t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],l_t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Sv=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function K_e(c){this.font=c}function J_e(c){this.cmap=c}function S4(c,l){this.encoding=c,this.charset=l}function sW(c){switch(c.version){case 1:this.names=Sv.slice();break;case 2:this.names=new Array(c.numberOfGlyphs);for(var l=0;l<c.numberOfGlyphs;l++)this.names[l]=c.glyphNameIndex[l]<Sv.length?Sv[c.glyphNameIndex[l]]:c.names[c.glyphNameIndex[l]-Sv.length];break;case 2.5:this.names=new Array(c.numberOfGlyphs);for(var a=0;a<c.numberOfGlyphs;a++)this.names[a]=Sv[a+c.glyphNameIndex[a]];break;default:this.names=[]}}K_e.prototype.charToGlyphIndex=function(c){var l=c.codePointAt(0),a=this.font.glyphs;if(a)for(var h=0;h<a.length;h+=1)for(var d=a.get(h),f=0;f<d.unicodes.length;f+=1)if(d.unicodes[f]===l)return h;return null},J_e.prototype.charToGlyphIndex=function(c){return this.cmap.glyphIndexMap[c.codePointAt(0)]||0},S4.prototype.charToGlyphIndex=function(c){var l=c.codePointAt(0);return this.charset.indexOf(this.encoding[l])},sW.prototype.nameToGlyphIndex=function(c){return this.names.indexOf(c)},sW.prototype.glyphIndexToName=function(c){return this.names[c]};var Tv_line=function d_t(c,l,a,h,d){c.beginPath(),c.moveTo(l,a),c.lineTo(h,d),c.stroke()};function Yc(c){this.bindConstructorValues(c)}function T4(c,l,a){Object.defineProperty(c,l,{get:function(){return c[a]},set:function(h){c[a]=h},enumerable:!0,configurable:!0})}function oW(c,l){if(this.font=c,this.glyphs={},Array.isArray(l))for(var a=0;a<l.length;a++){var h=l[a];h.path.unitsPerEm=c.unitsPerEm,this.glyphs[a]=h}this.length=l&&l.length||0}Yc.prototype.bindConstructorValues=function(c){this.index=c.index||0,this.name=c.name||null,this.unicode=c.unicode||void 0,this.unicodes=c.unicodes||void 0!==c.unicode?[c.unicode]:[],"xMin"in c&&(this.xMin=c.xMin),"yMin"in c&&(this.yMin=c.yMin),"xMax"in c&&(this.xMax=c.xMax),"yMax"in c&&(this.yMax=c.yMax),"advanceWidth"in c&&(this.advanceWidth=c.advanceWidth),Object.defineProperty(this,"path",function f_t(c,l){var a=l||new wo;return{configurable:!0,get:function(){return"function"==typeof a&&(a=a()),a},set:function(h){a=h}}}(0,c.path))},Yc.prototype.addUnicode=function(c){0===this.unicodes.length&&(this.unicode=c),this.unicodes.push(c)},Yc.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Yc.prototype.getPath=function(c,l,a,h,d){var f,p;c=void 0!==c?c:0,l=void 0!==l?l:0,a=void 0!==a?a:72,h||(h={});var g=h.xScale,m=h.yScale;if(h.hinting&&d&&d.hinting&&(p=this.path&&d.hinting.exec(this,a)),p)f=d.hinting.getCommands(p),c=Math.round(c),l=Math.round(l),g=m=1;else{f=this.path.commands;var v=1/(this.path.unitsPerEm||1e3)*a;void 0===g&&(g=v),void 0===m&&(m=v)}for(var y=new wo,_=0;_<f.length;_+=1){var b=f[_];"M"===b.type?y.moveTo(c+b.x*g,l+-b.y*m):"L"===b.type?y.lineTo(c+b.x*g,l+-b.y*m):"Q"===b.type?y.quadraticCurveTo(c+b.x1*g,l+-b.y1*m,c+b.x*g,l+-b.y*m):"C"===b.type?y.curveTo(c+b.x1*g,l+-b.y1*m,c+b.x2*g,l+-b.y2*m,c+b.x*g,l+-b.y*m):"Z"===b.type&&y.closePath()}return y},Yc.prototype.getContours=function(){if(void 0===this.points)return[];for(var c=[],l=[],a=0;a<this.points.length;a+=1){var h=this.points[a];l.push(h),h.lastPointOfContour&&(c.push(l),l=[])}return Qn.argument(0===l.length,"There are still points left in the current contour."),c},Yc.prototype.getMetrics=function(){for(var c=this.path.commands,l=[],a=[],h=0;h<c.length;h+=1){var d=c[h];"Z"!==d.type&&(l.push(d.x),a.push(d.y)),("Q"===d.type||"C"===d.type)&&(l.push(d.x1),a.push(d.y1)),"C"===d.type&&(l.push(d.x2),a.push(d.y2))}var f={xMin:Math.min.apply(null,l),yMin:Math.min.apply(null,a),xMax:Math.max.apply(null,l),yMax:Math.max.apply(null,a),leftSideBearing:this.leftSideBearing};return isFinite(f.xMin)||(f.xMin=0),isFinite(f.xMax)||(f.xMax=this.advanceWidth),isFinite(f.yMin)||(f.yMin=0),isFinite(f.yMax)||(f.yMax=0),f.rightSideBearing=this.advanceWidth-f.leftSideBearing-(f.xMax-f.xMin),f},Yc.prototype.draw=function(c,l,a,h,d){this.getPath(l,a,h,d).draw(c)},Yc.prototype.drawPoints=function(c,l,a,h){function d(_,b,C,x){c.beginPath();for(var S=0;S<_.length;S+=1)c.moveTo(b+_[S].x*x,C+_[S].y*x),c.arc(b+_[S].x*x,C+_[S].y*x,2,0,2*Math.PI,!1);c.closePath(),c.fill()}l=void 0!==l?l:0,a=void 0!==a?a:0;for(var f=1/this.path.unitsPerEm*(h=void 0!==h?h:24),p=[],g=[],m=this.path,v=0;v<m.commands.length;v+=1){var y=m.commands[v];void 0!==y.x&&p.push({x:y.x,y:-y.y}),void 0!==y.x1&&g.push({x:y.x1,y:-y.y1}),void 0!==y.x2&&g.push({x:y.x2,y:-y.y2})}c.fillStyle="blue",d(p,l,a,f),c.fillStyle="red",d(g,l,a,f)},Yc.prototype.drawMetrics=function(c,l,a,h){var d;l=void 0!==l?l:0,a=void 0!==a?a:0,d=1/this.path.unitsPerEm*(h=void 0!==h?h:24),c.lineWidth=1,c.strokeStyle="black",Tv_line(c,l,-1e4,l,1e4),Tv_line(c,-1e4,a,1e4,a);var f=this.xMin||0,p=this.yMin||0,g=this.xMax||0,m=this.yMax||0,v=this.advanceWidth||0;c.strokeStyle="blue",Tv_line(c,l+f*d,-1e4,l+f*d,1e4),Tv_line(c,l+g*d,-1e4,l+g*d,1e4),Tv_line(c,-1e4,a+-p*d,1e4,a+-p*d),Tv_line(c,-1e4,a+-m*d,1e4,a+-m*d),c.strokeStyle="green",Tv_line(c,l+v*d,-1e4,l+v*d,1e4)},oW.prototype.get=function(c){if(void 0===this.glyphs[c]){this.font._push(c),"function"==typeof this.glyphs[c]&&(this.glyphs[c]=this.glyphs[c]());var l=this.glyphs[c],a=this.font._IndexToUnicodeMap[c];if(a)for(var h=0;h<a.unicodes.length;h++)l.addUnicode(a.unicodes[h]);this.font.cffEncoding?l.name=this.font.isCIDFont?"gid"+c:this.font.cffEncoding.charset[c]:this.font.glyphNames.names&&(l.name=this.font.glyphNames.glyphIndexToName(c)),this.glyphs[c].advanceWidth=this.font._hmtxTableData[c].advanceWidth,this.glyphs[c].leftSideBearing=this.font._hmtxTableData[c].leftSideBearing}else"function"==typeof this.glyphs[c]&&(this.glyphs[c]=this.glyphs[c]());return this.glyphs[c]},oW.prototype.push=function(c,l){this.glyphs[c]=l,this.length++};var qd={GlyphSet:oW,glyphLoader:function p_t(c,l){return new Yc({index:l,font:c})},ttfGlyphLoader:function g_t(c,l,a,h,d,f){return function(){var p=new Yc({index:l,font:c});return p.path=function(){a(p,h,d);var g=f(c.glyphs,p);return g.unitsPerEm=c.unitsPerEm,g},T4(p,"xMin","_xMin"),T4(p,"xMax","_xMax"),T4(p,"yMin","_yMin"),T4(p,"yMax","_yMax"),p}},cffGlyphLoader:function m_t(c,l,a,h){return function(){var d=new Yc({index:l,font:c});return d.path=function(){var f=a(c,d,h);return f.unitsPerEm=c.unitsPerEm,f},d}}};function e1e(c,l){if(c===l)return!0;if(Array.isArray(c)&&Array.isArray(l)){if(c.length!==l.length)return!1;for(var a=0;a<c.length;a+=1)if(!e1e(c[a],l[a]))return!1;return!0}return!1}function aW(c){return c.length<1240?107:c.length<33900?1131:32768}function im(c,l,a){var p,g,h=[],d=[],f=Pn.getCard16(c,l);if(0!==f){var m=Pn.getByte(c,l+2);p=l+(f+1)*m+2;for(var v=l+3,y=0;y<f+1;y+=1)h.push(Pn.getOffset(c,v,m)),v+=m;g=p+h[f]}else g=l+2;for(var _=0;_<h.length-1;_+=1){var b=Pn.getBytes(c,p+h[_],p+h[_+1]);a&&(b=a(b)),d.push(b)}return{objects:d,startOffset:l,endOffset:g}}function b_t(c,l){if(28===l)return c.parseByte()<<8|c.parseByte();if(29===l)return c.parseByte()<<24|c.parseByte()<<16|c.parseByte()<<8|c.parseByte();if(30===l)return function __t(c){for(var l="",h=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var d=c.parseByte(),f=d>>4,p=15&d;if(15===f||(l+=h[f],15===p))break;l+=h[p]}return parseFloat(l)}(c);if(l>=32&&l<=246)return l-139;if(l>=247&&l<=250)return 256*(l-247)+c.parseByte()+108;if(l>=251&&l<=254)return 256*-(l-251)-c.parseByte()-108;throw new Error("Invalid b0 "+l)}function t1e(c,l,a){var h=new Pn.Parser(c,l=void 0!==l?l:0),d=[],f=[];for(a=void 0!==a?a:c.length;h.relativeOffset<a;){var p=h.parseByte();p<=21?(12===p&&(p=1200+h.parseByte()),d.push([p,f]),f=[]):f.push(b_t(h,p))}return function C_t(c){for(var l={},a=0;a<c.length;a+=1){var f,h=c[a][0],d=c[a][1];if(f=1===d.length?d[0]:d,l.hasOwnProperty(h)&&!isNaN(l[h]))throw new Error("Object "+l+" already has key "+h);l[h]=f}return l}(d)}function Z2(c,l){return l<=390?w4[l]:c[l-391]}function n1e(c,l,a){for(var d,h={},f=0;f<l.length;f+=1){var p=l[f];if(Array.isArray(p.type)){var g=[];g.length=p.type.length;for(var m=0;m<p.type.length;m++)void 0===(d=void 0!==c[p.op]?c[p.op][m]:void 0)&&(d=void 0!==p.value&&void 0!==p.value[m]?p.value[m]:null),"SID"===p.type[m]&&(d=Z2(a,d)),g[m]=d;h[p.name]=g}else void 0===(d=c[p.op])&&(d=void 0!==p.value?p.value:null),"SID"===p.type&&(d=Z2(a,d)),h[p.name]=d}return h}var i1e=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],r1e=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function w_t(c,l){return n1e(t1e(c,0,c.byteLength),i1e,l)}function s1e(c,l,a,h){return n1e(t1e(c,l,a),r1e,h)}function o1e(c,l,a,h){for(var d=[],f=0;f<a.length;f+=1){var g=w_t(new DataView(new Uint8Array(a[f]).buffer),h);g._subrs=[],g._subrsBias=0,g._defaultWidthX=0,g._nominalWidthX=0;var m=g.private[0],v=g.private[1];if(0!==m&&0!==v){var y=s1e(c,v+l,m,h);if(g._defaultWidthX=y.defaultWidthX,g._nominalWidthX=y.nominalWidthX,0!==y.subrs){var b=im(c,v+y.subrs+l);g._subrs=b.objects,g._subrsBias=aW(g._subrs)}g._privateDict=y}d.push(g)}return d}function a1e(c,l,a){var h,d,f,p,x,S,w,T,g=new wo,m=[],v=0,y=!1,_=!1,b=0,C=0;if(c.isCIDFont){var k=c.tables.cff.topDict._fdArray[c.tables.cff.topDict._fdSelect[l.index]];x=k._subrs,S=k._subrsBias,w=k._defaultWidthX,T=k._nominalWidthX}else x=c.tables.cff.topDict._subrs,S=c.tables.cff.topDict._subrsBias,w=c.tables.cff.topDict._defaultWidthX,T=c.tables.cff.topDict._nominalWidthX;var D=w;function M(E,V){_&&g.closePath(),g.moveTo(E,V),_=!0}function A(){m.length%2!=0&&!y&&(D=m.shift()+T),v+=m.length>>1,m.length=0,y=!0}return function L(E){for(var V,z,U,Z,Y,N,$,H,G,W,j,Q,J=0;J<E.length;){var te=E[J];switch(J+=1,te){case 1:case 3:case 18:case 23:A();break;case 4:m.length>1&&!y&&(D=m.shift()+T,y=!0),C+=m.pop(),M(b,C);break;case 5:for(;m.length>0;)b+=m.shift(),C+=m.shift(),g.lineTo(b,C);break;case 6:for(;m.length>0&&(b+=m.shift(),g.lineTo(b,C),0!==m.length);)C+=m.shift(),g.lineTo(b,C);break;case 7:for(;m.length>0&&(C+=m.shift(),g.lineTo(b,C),0!==m.length);)b+=m.shift(),g.lineTo(b,C);break;case 8:for(;m.length>0;)h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+m.shift(),g.curveTo(h,d,f,p,b,C);break;case 10:Y=m.pop()+S,(N=x[Y])&&L(N);break;case 11:return;case 12:switch(te=E[J],J+=1,te){case 35:h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),$=f+m.shift(),H=p+m.shift(),G=$+m.shift(),W=H+m.shift(),j=G+m.shift(),Q=W+m.shift(),b=j+m.shift(),C=Q+m.shift(),m.shift(),g.curveTo(h,d,f,p,$,H),g.curveTo(G,W,j,Q,b,C);break;case 34:h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),$=f+m.shift(),H=p,G=$+m.shift(),W=p,j=G+m.shift(),Q=C,b=j+m.shift(),g.curveTo(h,d,f,p,$,H),g.curveTo(G,W,j,Q,b,C);break;case 36:h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),$=f+m.shift(),H=p,G=$+m.shift(),W=p,j=G+m.shift(),Q=W+m.shift(),b=j+m.shift(),g.curveTo(h,d,f,p,$,H),g.curveTo(G,W,j,Q,b,C);break;case 37:h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),$=f+m.shift(),H=p+m.shift(),G=$+m.shift(),W=H+m.shift(),j=G+m.shift(),Q=W+m.shift(),Math.abs(j-b)>Math.abs(Q-C)?b=j+m.shift():C=Q+m.shift(),g.curveTo(h,d,f,p,$,H),g.curveTo(G,W,j,Q,b,C);break;default:console.log("Glyph "+l.index+": unknown operator 1200"+te),m.length=0}break;case 14:m.length>0&&!y&&(D=m.shift()+T,y=!0),_&&(g.closePath(),_=!1);break;case 19:case 20:A(),J+=v+7>>3;break;case 21:m.length>2&&!y&&(D=m.shift()+T,y=!0),C+=m.pop(),M(b+=m.pop(),C);break;case 22:m.length>1&&!y&&(D=m.shift()+T,y=!0),M(b+=m.pop(),C);break;case 24:for(;m.length>2;)h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+m.shift(),g.curveTo(h,d,f,p,b,C);b+=m.shift(),C+=m.shift(),g.lineTo(b,C);break;case 25:for(;m.length>6;)b+=m.shift(),C+=m.shift(),g.lineTo(b,C);h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+m.shift(),g.curveTo(h,d,f,p,b,C);break;case 26:for(m.length%2&&(b+=m.shift());m.length>0;)h=b,d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f,C=p+m.shift(),g.curveTo(h,d,f,p,b,C);break;case 27:for(m.length%2&&(C+=m.shift());m.length>0;)h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),g.curveTo(h,d,f,p,b,C=p);break;case 28:m.push(((V=E[J])<<24|(z=E[J+1])<<16)>>16),J+=2;break;case 29:Y=m.pop()+c.gsubrsBias,(N=c.gsubrs[Y])&&L(N);break;case 30:for(;m.length>0&&(h=b,d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C),0!==m.length);)h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),C=p+m.shift(),b=f+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C);break;case 31:for(;m.length>0&&(h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),C=p+m.shift(),b=f+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C),0!==m.length);)h=b,d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C);break;default:te<32?console.log("Glyph "+l.index+": unknown operator "+te):te<247?m.push(te-139):te<251?(V=E[J],J+=1,m.push(256*(te-247)+V+108)):te<255?(V=E[J],J+=1,m.push(256*-(te-251)-V-108)):(V=E[J],z=E[J+1],U=E[J+2],Z=E[J+3],J+=4,m.push((V<<24|z<<16|U<<8|Z)/65536))}}}(a),l.advanceWidth=D,g}function l1e(c,l){var a,h=w4.indexOf(c);return h>=0&&(a=h),(h=l.indexOf(c))>=0?a=h+w4.length:(a=w4.length+l.length,l.push(c)),a}function c1e(c,l,a){for(var h={},d=0;d<c.length;d+=1){var f=c[d],p=l[f.name];void 0!==p&&!e1e(p,f.value)&&("SID"===f.type&&(p=l1e(p,a)),h[f.op]={name:f.name,type:f.type,value:p})}return h}function u1e(c,l){var a=new Cn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=c1e(i1e,c,l),a}function h1e(c){var l=new Cn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return l.topDicts=[{name:"topDict_0",type:"TABLE",value:c}],l}function P_t(c){var l=[],a=c.path;l.push({name:"width",type:"NUMBER",value:c.advanceWidth});for(var h=0,d=0,f=0;f<a.commands.length;f+=1){var p=void 0,g=void 0,m=a.commands[f];if("Q"===m.type){var v=.3333333333333333,y=2/3;m={type:"C",x:m.x,y:m.y,x1:Math.round(v*h+y*m.x1),y1:Math.round(v*d+y*m.y1),x2:Math.round(v*m.x+y*m.x1),y2:Math.round(v*m.y+y*m.y1)}}if("M"===m.type)p=Math.round(m.x-h),g=Math.round(m.y-d),l.push({name:"dx",type:"NUMBER",value:p}),l.push({name:"dy",type:"NUMBER",value:g}),l.push({name:"rmoveto",type:"OP",value:21}),h=Math.round(m.x),d=Math.round(m.y);else if("L"===m.type)p=Math.round(m.x-h),g=Math.round(m.y-d),l.push({name:"dx",type:"NUMBER",value:p}),l.push({name:"dy",type:"NUMBER",value:g}),l.push({name:"rlineto",type:"OP",value:5}),h=Math.round(m.x),d=Math.round(m.y);else if("C"===m.type){var _=Math.round(m.x1-h),b=Math.round(m.y1-d),C=Math.round(m.x2-m.x1),x=Math.round(m.y2-m.y1);p=Math.round(m.x-m.x2),g=Math.round(m.y-m.y2),l.push({name:"dx1",type:"NUMBER",value:_}),l.push({name:"dy1",type:"NUMBER",value:b}),l.push({name:"dx2",type:"NUMBER",value:C}),l.push({name:"dy2",type:"NUMBER",value:x}),l.push({name:"dx",type:"NUMBER",value:p}),l.push({name:"dy",type:"NUMBER",value:g}),l.push({name:"rrcurveto",type:"OP",value:8}),h=Math.round(m.x),d=Math.round(m.y)}}return l.push({name:"endchar",type:"OP",value:14}),l}var d1e_parse=function D_t(c,l,a,h){a.tables.cff={};var d=function x_t(c,l){var a={};return a.formatMajor=Pn.getCard8(c,l),a.formatMinor=Pn.getCard8(c,l+1),a.size=Pn.getCard8(c,l+2),a.offsetSize=Pn.getCard8(c,l+3),a.startOffset=l,a.endOffset=l+4,a}(c,l),f=im(c,d.endOffset,Pn.bytesToString),p=im(c,f.endOffset),g=im(c,p.endOffset,Pn.bytesToString),m=im(c,g.endOffset);a.gsubrs=m.objects,a.gsubrsBias=aW(a.gsubrs);var v=o1e(c,l,p.objects,g.objects);if(1!==v.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+v.length);var y=v[0];if(a.tables.cff.topDict=y,y._privateDict&&(a.defaultWidthX=y._privateDict.defaultWidthX,a.nominalWidthX=y._privateDict.nominalWidthX),void 0!==y.ros[0]&&void 0!==y.ros[1]&&(a.isCIDFont=!0),a.isCIDFont){var _=y.fdArray,b=y.fdSelect;if(0===_||0===b)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var C=im(c,_+=l),x=o1e(c,l,C.objects,g.objects);y._fdArray=x,y._fdSelect=function O_t(c,l,a,h){var f,d=[],p=new Pn.Parser(c,l),g=p.parseCard8();if(0===g)for(var m=0;m<a;m++){if((f=p.parseCard8())>=h)throw new Error("CFF table CID Font FDSelect has bad FD index value "+f+" (FD count "+h+")");d.push(f)}else{if(3!==g)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+g);var v=p.parseCard16(),y=p.parseCard16();if(0!==y)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+y);for(var _,b=0;b<v;b++){if(f=p.parseCard8(),_=p.parseCard16(),f>=h)throw new Error("CFF table CID Font FDSelect has bad FD index value "+f+" (FD count "+h+")");if(_>a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+_);for(;y<_;y++)d.push(f);y=_}if(_!==a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+_)}return d}(c,b+=l,a.numGlyphs,x.length)}var k,S=l+y.private[1],w=s1e(c,S,y.private[0],g.objects);if(a.defaultWidthX=w.defaultWidthX,a.nominalWidthX=w.nominalWidthX,0!==w.subrs){var O=im(c,S+w.subrs);a.subrs=O.objects,a.subrsBias=aW(a.subrs)}else a.subrs=[],a.subrsBias=0;h.lowMemory?(k=function v_t(c,l){var d,f,a=[],h=Pn.getCard16(c,l);if(0!==h){var p=Pn.getByte(c,l+2);d=l+(h+1)*p+2;for(var g=l+3,m=0;m<h+1;m+=1)a.push(Pn.getOffset(c,g,p)),g+=p;f=d+a[h]}else f=l+2;return{offsets:a,startOffset:l,endOffset:f}}(c,l+y.charStrings),a.nGlyphs=k.offsets.length):(k=im(c,l+y.charStrings),a.nGlyphs=k.objects.length);var D=function S_t(c,l,a,h){var d,f,p=new Pn.Parser(c,l);a-=1;var g=[".notdef"],m=p.parseCard8();if(0===m)for(var v=0;v<a;v+=1)d=p.parseSID(),g.push(Z2(h,d));else if(1===m)for(;g.length<=a;){d=p.parseSID(),f=p.parseCard8();for(var y=0;y<=f;y+=1)g.push(Z2(h,d)),d+=1}else{if(2!==m)throw new Error("Unknown charset format "+m);for(;g.length<=a;){d=p.parseSID(),f=p.parseCard16();for(var _=0;_<=f;_+=1)g.push(Z2(h,d)),d+=1}}return g}(c,l+y.charset,a.nGlyphs,g.objects);if(a.cffEncoding=0===y.encoding?new S4(a_t,D):1===y.encoding?new S4(l_t,D):function T_t(c,l,a){var h,d={},f=new Pn.Parser(c,l),p=f.parseCard8();if(0===p)for(var g=f.parseCard8(),m=0;m<g;m+=1)d[h=f.parseCard8()]=m;else{if(1!==p)throw new Error("Unknown encoding format "+p);var v=f.parseCard8();h=1;for(var y=0;y<v;y+=1)for(var _=f.parseCard8(),b=f.parseCard8(),C=_;C<=_+b;C+=1)d[C]=h,h+=1}return new S4(d,a)}(c,l+y.encoding,D),a.encoding=a.encoding||a.cffEncoding,a.glyphs=new qd.GlyphSet(a),h.lowMemory)a._push=function(L){var E=function y_t(c,l,a,h,d){var f=Pn.getCard16(a,h),p=0;0!==f&&(p=h+(f+1)*Pn.getByte(a,h+2)+2);var m=Pn.getBytes(a,p+l[c],p+l[c+1]);return d&&(m=d(m)),m}(L,k.offsets,c,l+y.charStrings);a.glyphs.push(L,qd.cffGlyphLoader(a,L,a1e,E))};else for(var M=0;M<a.nGlyphs;M+=1)a.glyphs.push(M,qd.cffGlyphLoader(a,M,a1e,k.objects[M]))},d1e_make=function N_t(c,l){for(var g,a=new Cn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),h=1/l.unitsPerEm,d={version:l.version,fullName:l.fullName,familyName:l.familyName,weight:l.weightName,fontBBox:l.fontBBox||[0,0,0,0],fontMatrix:[h,0,0,h,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},p=[],m=1;m<c.length;m+=1)g=c.get(m),p.push(g.name);var v=[];a.header=function k_t(){return new Cn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}(),a.nameIndex=function M_t(c){var l=new Cn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);l.names=[];for(var a=0;a<c.length;a+=1)l.names.push({name:"name_"+a,type:"NAME",value:c[a]});return l}([l.postScriptName]);var y=u1e(d,v);a.topDictIndex=h1e(y),a.globalSubrIndex=function A_t(){return new Cn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}(),a.charsets=function I_t(c,l){for(var a=new Cn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),h=0;h<c.length;h+=1){var f=l1e(c[h],l);a.fields.push({name:"glyph_"+h,type:"SID",value:f})}return a}(p,v),a.charStringsIndex=function R_t(c){for(var l=new Cn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),a=0;a<c.length;a+=1){var h=c.get(a),d=P_t(h);l.charStrings.push({name:h.name,type:"CHARSTRING",value:d})}return l}(c),a.privateDict=function F_t(c,l){var a=new Cn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=c1e(r1e,c,l),a}({},v),a.stringIndex=function E_t(c){var l=new Cn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);l.strings=[];for(var a=0;a<c.length;a+=1)l.strings.push({name:"string_"+a,type:"STRING",value:c[a]});return l}(v);var _=a.header.sizeOf()+a.nameIndex.sizeOf()+a.topDictIndex.sizeOf()+a.stringIndex.sizeOf()+a.globalSubrIndex.sizeOf();return d.charset=_,d.encoding=0,d.charStrings=d.charset+a.charsets.sizeOf(),d.private[1]=d.charStrings+a.charStringsIndex.sizeOf(),y=u1e(d,v),a.topDictIndex=h1e(y),a},f1e_parse=function L_t(c,l){var a={},h=new Pn.Parser(c,l);return a.version=h.parseVersion(),a.fontRevision=Math.round(1e3*h.parseFixed())/1e3,a.checkSumAdjustment=h.parseULong(),a.magicNumber=h.parseULong(),Qn.argument(1594834165===a.magicNumber,"Font header has wrong magic number."),a.flags=h.parseUShort(),a.unitsPerEm=h.parseUShort(),a.created=h.parseLongDateTime(),a.modified=h.parseLongDateTime(),a.xMin=h.parseShort(),a.yMin=h.parseShort(),a.xMax=h.parseShort(),a.yMax=h.parseShort(),a.macStyle=h.parseUShort(),a.lowestRecPPEM=h.parseUShort(),a.fontDirectionHint=h.parseShort(),a.indexToLocFormat=h.parseShort(),a.glyphDataFormat=h.parseShort(),a},f1e_make=function B_t(c){var l=Math.round((new Date).getTime()/1e3)+2082844800,a=l;return c.createdTimestamp&&(a=c.createdTimestamp+2082844800),new Cn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:a},{name:"modified",type:"LONGDATETIME",value:l},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],c)},p1e_parse=function V_t(c,l){var a={},h=new Pn.Parser(c,l);return a.version=h.parseVersion(),a.ascender=h.parseShort(),a.descender=h.parseShort(),a.lineGap=h.parseShort(),a.advanceWidthMax=h.parseUShort(),a.minLeftSideBearing=h.parseShort(),a.minRightSideBearing=h.parseShort(),a.xMaxExtent=h.parseShort(),a.caretSlopeRise=h.parseShort(),a.caretSlopeRun=h.parseShort(),a.caretOffset=h.parseShort(),h.relativeOffset+=8,a.metricDataFormat=h.parseShort(),a.numberOfHMetrics=h.parseUShort(),a},p1e_make=function z_t(c){return new Cn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],c)},g1e_parse=function $_t(c,l,a,h,d,f,p){p.lowMemory?function H_t(c,l,a,h,d){c._hmtxTableData={};for(var f,p,g=new Pn.Parser(l,a),m=0;m<d;m+=1)m<h&&(f=g.parseUShort(),p=g.parseShort()),c._hmtxTableData[m]={advanceWidth:f,leftSideBearing:p}}(c,l,a,h,d):function U_t(c,l,a,h,d){for(var f,p,g=new Pn.Parser(c,l),m=0;m<h;m+=1){m<a&&(f=g.parseUShort(),p=g.parseShort());var v=d.get(m);v.advanceWidth=f,v.leftSideBearing=p}}(l,a,h,d,f)},g1e_make=function W_t(c){for(var l=new Cn.Table("hmtx",[]),a=0;a<c.length;a+=1){var h=c.get(a),f=h.leftSideBearing||0;l.fields.push({name:"advanceWidth_"+a,type:"USHORT",value:h.advanceWidth||0}),l.fields.push({name:"leftSideBearing_"+a,type:"SHORT",value:f})}return l},m1e_make=function G_t(c){for(var l=new Cn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:c.length}]),a="",h=12+4*c.length,d=0;d<c.length;++d){var f=a.indexOf(c[d]);f<0&&(f=a.length,a+=c[d]),l.fields.push({name:"offset "+d,type:"USHORT",value:h+f}),l.fields.push({name:"length "+d,type:"USHORT",value:c[d].length})}return l.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),l},m1e_parse=function Q_t(c,l){var a=new Pn.Parser(c,l),h=a.parseULong();Qn.argument(1===h,"Unsupported ltag table version."),a.skip("uLong",1);for(var d=a.parseULong(),f=[],p=0;p<d;p++){for(var g="",m=l+a.parseUShort(),v=a.parseUShort(),y=m;y<m+v;++y)g+=String.fromCharCode(c.getInt8(y));f.push(g)}return f},v1e_parse=function j_t(c,l){var a={},h=new Pn.Parser(c,l);return a.version=h.parseVersion(),a.numGlyphs=h.parseUShort(),1===a.version&&(a.maxPoints=h.parseUShort(),a.maxContours=h.parseUShort(),a.maxCompositePoints=h.parseUShort(),a.maxCompositeContours=h.parseUShort(),a.maxZones=h.parseUShort(),a.maxTwilightPoints=h.parseUShort(),a.maxStorage=h.parseUShort(),a.maxFunctionDefs=h.parseUShort(),a.maxInstructionDefs=h.parseUShort(),a.maxStackElements=h.parseUShort(),a.maxSizeOfInstructions=h.parseUShort(),a.maxComponentElements=h.parseUShort(),a.maxComponentDepth=h.parseUShort()),a},v1e_make=function q_t(c){return new Cn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:c}])},y1e=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],_1e={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Z_t={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},b1e={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function X_t(c,l,a){switch(c){case 0:if(65535===l)return"und";if(a)return a[l];break;case 1:return _1e[l];case 3:return b1e[l]}}var lW="utf-16",Y_t={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},K_t={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function C1e(c,l,a){switch(c){case 0:return lW;case 1:return K_t[a]||Y_t[l];case 3:if(1===l||10===l)return lW}}function cW(c){var l={};for(var a in c)l[c[a]]=parseInt(a);return l}function x1e(c,l,a,h,d,f){return new Cn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:c},{name:"encodingID",type:"USHORT",value:l},{name:"languageID",type:"USHORT",value:a},{name:"nameID",type:"USHORT",value:h},{name:"length",type:"USHORT",value:d},{name:"offset",type:"USHORT",value:f}])}function w1e(c,l){var a=function e1t(c,l){var a=c.length,h=l.length-a+1;e:for(var d=0;d<h;d++)for(;d<h;d++){for(var f=0;f<a;f++)if(l[d+f]!==c[f])continue e;return d}return-1}(c,l);if(a<0){a=l.length;for(var h=0,d=c.length;h<d;++h)l.push(c[h])}return a}var S1e_parse=function J_t(c,l,a){for(var h={},d=new Pn.Parser(c,l),f=d.parseUShort(),p=d.parseUShort(),g=d.offset+d.parseUShort(),m=0;m<p;m++){var v=d.parseUShort(),y=d.parseUShort(),_=d.parseUShort(),b=d.parseUShort(),C=y1e[b]||b,x=d.parseUShort(),S=d.parseUShort(),w=X_t(v,_,a),T=C1e(v,y,_);if(void 0!==T&&void 0!==w){var O;if(O=T===lW?Eb.UTF16(c,g+S,x):Eb.MACSTRING(c,g+S,x,T)){var k=h[C];void 0===k&&(k=h[C]={}),k[w]=O}}}return 1===f&&d.parseUShort(),h},S1e_make=function t1t(c,l){var a,h=[],d={},f=cW(y1e);for(var p in c){var g=f[p];if(void 0===g&&(g=p),a=parseInt(g),isNaN(a))throw new Error('Name table entry "'+p+'" does not exist, see nameTableNames for complete list.');d[a]=c[p],h.push(a)}for(var m=cW(_1e),v=cW(b1e),y=[],_=[],b=0;b<h.length;b++){var C=d[a=h[b]];for(var x in C){var S=C[x],w=1,T=m[x],O=Z_t[T],k=C1e(w,O,T),D=dn.MACSTRING(S,k);void 0===D&&(w=0,(T=l.indexOf(x))<0&&(T=l.length,l.push(x)),O=4,D=dn.UTF16(S));var M=w1e(D,_);y.push(x1e(w,O,T,a,D.length,M));var A=v[x];if(void 0!==A){var L=dn.UTF16(S),E=w1e(L,_);y.push(x1e(3,1,A,a,L.length,E))}}}y.sort(function(U,Z){return U.platformID-Z.platformID||U.encodingID-Z.encodingID||U.languageID-Z.languageID||U.nameID-Z.nameID});for(var V=new Cn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:y.length},{name:"stringOffset",type:"USHORT",value:6+12*y.length}]),z=0;z<y.length;z++)V.fields.push({name:"record_"+z,type:"RECORD",value:y[z]});return V.fields.push({name:"strings",type:"LITERAL",value:_}),V},uW=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],hW_parse=function i1t(c,l){var a={},h=new Pn.Parser(c,l);a.version=h.parseUShort(),a.xAvgCharWidth=h.parseShort(),a.usWeightClass=h.parseUShort(),a.usWidthClass=h.parseUShort(),a.fsType=h.parseUShort(),a.ySubscriptXSize=h.parseShort(),a.ySubscriptYSize=h.parseShort(),a.ySubscriptXOffset=h.parseShort(),a.ySubscriptYOffset=h.parseShort(),a.ySuperscriptXSize=h.parseShort(),a.ySuperscriptYSize=h.parseShort(),a.ySuperscriptXOffset=h.parseShort(),a.ySuperscriptYOffset=h.parseShort(),a.yStrikeoutSize=h.parseShort(),a.yStrikeoutPosition=h.parseShort(),a.sFamilyClass=h.parseShort(),a.panose=[];for(var d=0;d<10;d++)a.panose[d]=h.parseByte();return a.ulUnicodeRange1=h.parseULong(),a.ulUnicodeRange2=h.parseULong(),a.ulUnicodeRange3=h.parseULong(),a.ulUnicodeRange4=h.parseULong(),a.achVendID=String.fromCharCode(h.parseByte(),h.parseByte(),h.parseByte(),h.parseByte()),a.fsSelection=h.parseUShort(),a.usFirstCharIndex=h.parseUShort(),a.usLastCharIndex=h.parseUShort(),a.sTypoAscender=h.parseShort(),a.sTypoDescender=h.parseShort(),a.sTypoLineGap=h.parseShort(),a.usWinAscent=h.parseUShort(),a.usWinDescent=h.parseUShort(),a.version>=1&&(a.ulCodePageRange1=h.parseULong(),a.ulCodePageRange2=h.parseULong()),a.version>=2&&(a.sxHeight=h.parseShort(),a.sCapHeight=h.parseShort(),a.usDefaultChar=h.parseUShort(),a.usBreakChar=h.parseUShort(),a.usMaxContent=h.parseUShort()),a},hW_make=function r1t(c){return new Cn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],c)},hW_getUnicodeRange=function n1t(c){for(var l=0;l<uW.length;l+=1){var a=uW[l];if(c>=a.begin&&c<a.end)return l}return-1},T1e_parse=function s1t(c,l){var a={},h=new Pn.Parser(c,l);switch(a.version=h.parseVersion(),a.italicAngle=h.parseFixed(),a.underlinePosition=h.parseShort(),a.underlineThickness=h.parseShort(),a.isFixedPitch=h.parseULong(),a.minMemType42=h.parseULong(),a.maxMemType42=h.parseULong(),a.minMemType1=h.parseULong(),a.maxMemType1=h.parseULong(),a.version){case 1:a.names=Sv.slice();break;case 2:a.numberOfGlyphs=h.parseUShort(),a.glyphNameIndex=new Array(a.numberOfGlyphs);for(var d=0;d<a.numberOfGlyphs;d++)a.glyphNameIndex[d]=h.parseUShort();a.names=[];for(var f=0;f<a.numberOfGlyphs;f++)if(a.glyphNameIndex[f]>=Sv.length){var p=h.parseChar();a.names.push(h.parseString(p))}break;case 2.5:a.numberOfGlyphs=h.parseUShort(),a.offset=new Array(a.numberOfGlyphs);for(var g=0;g<a.numberOfGlyphs;g++)a.offset[g]=h.parseChar()}return a},T1e_make=function o1t(){return new Cn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},Rh=new Array(9);Rh[1]=function(){var l=this.offset+this.relativeOffset,a=this.parseUShort();return 1===a?{substFormat:1,coverage:this.parsePointer(it.coverage),deltaGlyphId:this.parseUShort()}:2===a?{substFormat:2,coverage:this.parsePointer(it.coverage),substitute:this.parseOffset16List()}:void Qn.assert(!1,"0x"+l.toString(16)+": lookup type 1 format must be 1 or 2.")},Rh[2]=function(){var l=this.parseUShort();return Qn.argument(1===l,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:l,coverage:this.parsePointer(it.coverage),sequences:this.parseListOfLists()}},Rh[3]=function(){var l=this.parseUShort();return Qn.argument(1===l,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:l,coverage:this.parsePointer(it.coverage),alternateSets:this.parseListOfLists()}},Rh[4]=function(){var l=this.parseUShort();return Qn.argument(1===l,"GSUB ligature table identifier-format must be 1"),{substFormat:l,coverage:this.parsePointer(it.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var Ab={sequenceIndex:it.uShort,lookupListIndex:it.uShort};Rh[5]=function(){var l=this.offset+this.relativeOffset,a=this.parseUShort();if(1===a)return{substFormat:a,coverage:this.parsePointer(it.coverage),ruleSets:this.parseListOfLists(function(){var f=this.parseUShort(),p=this.parseUShort();return{input:this.parseUShortList(f-1),lookupRecords:this.parseRecordList(p,Ab)}})};if(2===a)return{substFormat:a,coverage:this.parsePointer(it.coverage),classDef:this.parsePointer(it.classDef),classSets:this.parseListOfLists(function(){var f=this.parseUShort(),p=this.parseUShort();return{classes:this.parseUShortList(f-1),lookupRecords:this.parseRecordList(p,Ab)}})};if(3===a){var h=this.parseUShort(),d=this.parseUShort();return{substFormat:a,coverages:this.parseList(h,it.pointer(it.coverage)),lookupRecords:this.parseRecordList(d,Ab)}}Qn.assert(!1,"0x"+l.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Rh[6]=function(){var l=this.offset+this.relativeOffset,a=this.parseUShort();return 1===a?{substFormat:1,coverage:this.parsePointer(it.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Ab)}})}:2===a?{substFormat:2,coverage:this.parsePointer(it.coverage),backtrackClassDef:this.parsePointer(it.classDef),inputClassDef:this.parsePointer(it.classDef),lookaheadClassDef:this.parsePointer(it.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Ab)}})}:3===a?{substFormat:3,backtrackCoverage:this.parseList(it.pointer(it.coverage)),inputCoverage:this.parseList(it.pointer(it.coverage)),lookaheadCoverage:this.parseList(it.pointer(it.coverage)),lookupRecords:this.parseRecordList(Ab)}:void Qn.assert(!1,"0x"+l.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Rh[7]=function(){var l=this.parseUShort();Qn.argument(1===l,"GSUB Extension Substitution subtable identifier-format must be 1");var a=this.parseUShort(),h=new it(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:a,extension:Rh[a].call(h)}},Rh[8]=function(){var l=this.parseUShort();return Qn.argument(1===l,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:l,coverage:this.parsePointer(it.coverage),backtrackCoverage:this.parseList(it.pointer(it.coverage)),lookaheadCoverage:this.parseList(it.pointer(it.coverage)),substitutes:this.parseUShortList()}};var Ib=new Array(9);Ib[1]=function(l){return new Cn.Table("substitutionTable",1===l.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Cn.Coverage(l.coverage)},{name:"deltaGlyphID",type:"USHORT",value:l.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Cn.Coverage(l.coverage)}].concat(Cn.ushortList("substitute",l.substitute)))},Ib[2]=function(l){return Qn.assert(1===l.substFormat,"Lookup type 2 substFormat must be 1."),new Cn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Cn.Coverage(l.coverage)}].concat(Cn.tableList("seqSet",l.sequences,function(a){return new Cn.Table("sequenceSetTable",Cn.ushortList("sequence",a))})))},Ib[3]=function(l){return Qn.assert(1===l.substFormat,"Lookup type 3 substFormat must be 1."),new Cn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Cn.Coverage(l.coverage)}].concat(Cn.tableList("altSet",l.alternateSets,function(a){return new Cn.Table("alternateSetTable",Cn.ushortList("alternate",a))})))},Ib[4]=function(l){return Qn.assert(1===l.substFormat,"Lookup type 4 substFormat must be 1."),new Cn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Cn.Coverage(l.coverage)}].concat(Cn.tableList("ligSet",l.ligatureSets,function(a){return new Cn.Table("ligatureSetTable",Cn.tableList("ligature",a,function(h){return new Cn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:h.ligGlyph}].concat(Cn.ushortList("component",h.components,h.components.length+1)))}))})))},Ib[6]=function(l){if(1===l.substFormat)return new Cn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:l.substFormat},{name:"coverage",type:"TABLE",value:new Cn.Coverage(l.coverage)}].concat(Cn.tableList("chainRuleSet",l.chainRuleSets,function(f){return new Cn.Table("chainRuleSetTable",Cn.tableList("chainRule",f,function(p){var g=Cn.ushortList("backtrackGlyph",p.backtrack,p.backtrack.length).concat(Cn.ushortList("inputGlyph",p.input,p.input.length+1)).concat(Cn.ushortList("lookaheadGlyph",p.lookahead,p.lookahead.length)).concat(Cn.ushortList("substitution",[],p.lookupRecords.length));return p.lookupRecords.forEach(function(m,v){g=g.concat({name:"sequenceIndex"+v,type:"USHORT",value:m.sequenceIndex}).concat({name:"lookupListIndex"+v,type:"USHORT",value:m.lookupListIndex})}),new Cn.Table("chainRuleTable",g)}))})));if(2===l.substFormat)Qn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===l.substFormat){var h=[{name:"substFormat",type:"USHORT",value:l.substFormat}];return h.push({name:"backtrackGlyphCount",type:"USHORT",value:l.backtrackCoverage.length}),l.backtrackCoverage.forEach(function(f,p){h.push({name:"backtrackCoverage"+p,type:"TABLE",value:new Cn.Coverage(f)})}),h.push({name:"inputGlyphCount",type:"USHORT",value:l.inputCoverage.length}),l.inputCoverage.forEach(function(f,p){h.push({name:"inputCoverage"+p,type:"TABLE",value:new Cn.Coverage(f)})}),h.push({name:"lookaheadGlyphCount",type:"USHORT",value:l.lookaheadCoverage.length}),l.lookaheadCoverage.forEach(function(f,p){h.push({name:"lookaheadCoverage"+p,type:"TABLE",value:new Cn.Coverage(f)})}),h.push({name:"substitutionCount",type:"USHORT",value:l.lookupRecords.length}),l.lookupRecords.forEach(function(f,p){h=h.concat({name:"sequenceIndex"+p,type:"USHORT",value:f.sequenceIndex}).concat({name:"lookupListIndex"+p,type:"USHORT",value:f.lookupListIndex})}),new Cn.Table("chainContextTable",h)}Qn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var O1e_parse=function a1t(c,l){var a=new it(c,l=l||0),h=a.parseVersion(1);return Qn.argument(1===h||1.1===h,"Unsupported GSUB table version."),1===h?{version:h,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(Rh)}:{version:h,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(Rh),variations:a.parseFeatureVariationsList()}},O1e_make=function l1t(c){return new Cn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Cn.ScriptList(c.scripts)},{name:"features",type:"TABLE",value:new Cn.FeatureList(c.features)},{name:"lookups",type:"TABLE",value:new Cn.LookupList(c.lookups,Ib)}])},D1e_parse=function c1t(c,l){var a=new Pn.Parser(c,l),h=a.parseULong();Qn.argument(1===h,"Unsupported META table version."),a.parseULong(),a.parseULong();for(var d=a.parseULong(),f={},p=0;p<d;p++){var g=a.parseTag(),m=a.parseULong(),v=a.parseULong(),y=Eb.UTF8(c,l+m,v);f[g]=y}return f},D1e_make=function u1t(c){var l=Object.keys(c).length,a="",h=16+12*l,d=new Cn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:h},{name:"numTags",type:"ULONG",value:l}]);for(var f in c){var p=a.length;a+=c[f],d.fields.push({name:"tag "+f,type:"TAG",value:f}),d.fields.push({name:"offset "+f,type:"ULONG",value:h+p}),d.fields.push({name:"length "+f,type:"ULONG",value:c[f].length})}return d.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),d},k1e_parse=function h1t(c,l){var a=new it(c,l),h=a.parseUShort();Qn.argument(0===h,"Only COLRv0 supported.");var d=a.parseUShort(),f=a.parseOffset32(),p=a.parseOffset32(),g=a.parseUShort();a.relativeOffset=f;var m=a.parseRecordList(d,{glyphID:it.uShort,firstLayerIndex:it.uShort,numLayers:it.uShort});return a.relativeOffset=p,{version:h,baseGlyphRecords:m,layerRecords:a.parseRecordList(g,{glyphID:it.uShort,paletteIndex:it.uShort})}},k1e_make=function d1t(c){var l=c.version;void 0===l&&(l=0);var a=c.baseGlyphRecords;void 0===a&&(a=[]);var h=c.layerRecords;void 0===h&&(h=[]),Qn.argument(0===l,"Only COLRv0 supported.");var d=14;return new Cn.Table("COLR",[{name:"version",type:"USHORT",value:l},{name:"numBaseGlyphRecords",type:"USHORT",value:a.length},{name:"baseGlyphRecordsOffset",type:"ULONG",value:d},{name:"layerRecordsOffset",type:"ULONG",value:d+6*a.length},{name:"numLayerRecords",type:"USHORT",value:h.length}].concat(a.map(function(p,g){return[{name:"glyphID_"+g,type:"USHORT",value:p.glyphID},{name:"firstLayerIndex_"+g,type:"USHORT",value:p.firstLayerIndex},{name:"numLayers_"+g,type:"USHORT",value:p.numLayers}]}).flat(),h.map(function(p,g){return[{name:"LayerGlyphID_"+g,type:"USHORT",value:p.glyphID},{name:"paletteIndex_"+g,type:"USHORT",value:p.paletteIndex}]}).flat()))},M1e_parse=function f1t(c,l){var a=new it(c,l),h=a.parseShort(),d=a.parseShort(),f=a.parseShort(),p=a.parseShort(),g=a.parseOffset32(),m=a.parseUShortList(f);return a.relativeOffset=g,{version:h,numPaletteEntries:d,colorRecords:a.parseULongList(p),colorRecordIndices:m}},M1e_make=function p1t(c){var l=c.version;void 0===l&&(l=0);var a=c.numPaletteEntries;void 0===a&&(a=0);var h=c.colorRecords;void 0===h&&(h=[]);var d=c.colorRecordIndices;return void 0===d&&(d=[0]),Qn.argument(0===l,"Only CPALv0 are supported."),Qn.argument(h.length,"No colorRecords given."),Qn.argument(d.length,"No colorRecordIndices given."),Qn.argument(!a&&1==d.length,"Can't infer numPaletteEntries on multiple colorRecordIndices"),new Cn.Table("CPAL",[{name:"version",type:"USHORT",value:l},{name:"numPaletteEntries",type:"USHORT",value:a||h.length},{name:"numPalettes",type:"USHORT",value:d.length},{name:"numColorRecords",type:"USHORT",value:h.length},{name:"colorRecordsArrayOffset",type:"ULONG",value:12+2*d.length}].concat(d.map(function(f,p){return{name:"colorRecordIndices_"+p,type:"USHORT",value:f}}),h.map(function(f,p){return{name:"colorRecords_"+p,type:"ULONG",value:f}})))};function E1e(c){return Math.log(c)/Math.log(2)|0}function dW(c){for(;c.length%4!=0;)c.push(0);for(var l=0,a=0;a<c.length;a+=4)l+=(c[a]<<24)+(c[a+1]<<16)+(c[a+2]<<8)+c[a+3];return l%Math.pow(2,32)}function A1e(c,l,a,h){return new Cn.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==c?c:""},{name:"checkSum",type:"ULONG",value:void 0!==l?l:0},{name:"offset",type:"ULONG",value:void 0!==a?a:0},{name:"length",type:"ULONG",value:void 0!==h?h:0}])}function I1e(c){var l=new Cn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);l.tables=c,l.numTables=c.length;var a=Math.pow(2,E1e(l.numTables));l.searchRange=16*a,l.entrySelector=E1e(a),l.rangeShift=16*l.numTables-l.searchRange;for(var h=[],d=[],f=l.sizeOf()+A1e().sizeOf()*l.numTables;f%4!=0;)f+=1,d.push({name:"padding",type:"BYTE",value:0});for(var p=0;p<c.length;p+=1){var g=c[p];Qn.argument(4===g.tableName.length,"Table name"+g.tableName+" is invalid.");var m=g.sizeOf(),v=A1e(g.tableName,dW(g.encode()),f,m);for(h.push({name:v.tag+" Table Record",type:"RECORD",value:v}),d.push({name:g.tableName+" table",type:"RECORD",value:g}),f+=m,Qn.argument(!isNaN(f),"Something went wrong calculating the offset.");f%4!=0;)f+=1,d.push({name:"padding",type:"BYTE",value:0})}return h.sort(function(y,_){return y.value.tag>_.value.tag?1:-1}),l.fields=l.fields.concat(h),l.fields=l.fields.concat(d),l}function P1e(c,l,a){for(var h=0;h<l.length;h+=1){var d=c.charToGlyphIndex(l[h]);if(d>0)return c.glyphs.get(d).getMetrics()}return a}function g1t(c){for(var l=0,a=0;a<c.length;a+=1)l+=c[a];return l/c.length}var v1t_fontToTable=function m1t(c){for(var m,l=[],a=[],h=[],d=[],f=[],p=[],g=[],v=0,y=0,_=0,b=0,C=0,x=0;x<c.glyphs.length;x+=1){var S=c.glyphs.get(x),w=0|S.unicode;if(isNaN(S.advanceWidth))throw new Error("Glyph "+S.name+" ("+x+"): advanceWidth is not a number.");(m>w||void 0===m)&&w>0&&(m=w),v<w&&(v=w);var T=hW_getUnicodeRange(w);if(T<32)y|=1<<T;else if(T<64)_|=1<<T-32;else if(T<96)b|=1<<T-64;else{if(!(T<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");C|=1<<T-96}if(".notdef"!==S.name){var O=S.getMetrics();l.push(O.xMin),a.push(O.yMin),h.push(O.xMax),d.push(O.yMax),p.push(O.leftSideBearing),g.push(O.rightSideBearing),f.push(S.advanceWidth)}}var k={xMin:Math.min.apply(null,l),yMin:Math.min.apply(null,a),xMax:Math.max.apply(null,h),yMax:Math.max.apply(null,d),advanceWidthMax:Math.max.apply(null,f),advanceWidthAvg:g1t(f),minLeftSideBearing:Math.min.apply(null,p),maxLeftSideBearing:Math.max.apply(null,p),minRightSideBearing:Math.min.apply(null,g)};k.ascender=c.ascender,k.descender=c.descender;var D=f1e_make({flags:3,unitsPerEm:c.unitsPerEm,xMin:k.xMin,yMin:k.yMin,xMax:k.xMax,yMax:k.yMax,lowestRecPPEM:3,createdTimestamp:c.createdTimestamp}),M=p1e_make({ascender:k.ascender,descender:k.descender,advanceWidthMax:k.advanceWidthMax,minLeftSideBearing:k.minLeftSideBearing,minRightSideBearing:k.minRightSideBearing,xMaxExtent:k.maxLeftSideBearing+(k.xMax-k.xMin),numberOfHMetrics:c.glyphs.length}),A=v1e_make(c.glyphs.length),L=hW_make(Object.assign({xAvgCharWidth:Math.round(k.advanceWidthAvg),usFirstCharIndex:m,usLastCharIndex:v,ulUnicodeRange1:y,ulUnicodeRange2:_,ulUnicodeRange3:b,ulUnicodeRange4:C,sTypoAscender:k.ascender,sTypoDescender:k.descender,sTypoLineGap:0,usWinAscent:k.yMax,usWinDescent:Math.abs(k.yMin),ulCodePageRange1:1,sxHeight:P1e(c,"xyvw",{yMax:Math.round(k.ascender/2)}).yMax,sCapHeight:P1e(c,"HIKLEFJMNTZBDPRAGOQSUVWXY",k).yMax,usDefaultChar:c.hasChar(" ")?32:0,usBreakChar:c.hasChar(" ")?32:0},c.tables.os2)),E=g1e_make(c.glyphs),V=Y_e_make(c.glyphs),z=c.getEnglishName("fontFamily"),U=c.getEnglishName("fontSubfamily"),Z=z+" "+U,Y=c.getEnglishName("postScriptName");Y||(Y=z.replace(/\s/g,"")+"-"+U);var N={};for(var $ in c.names)N[$]=c.names[$];N.uniqueID||(N.uniqueID={en:c.getEnglishName("manufacturer")+":"+Z}),N.postScriptName||(N.postScriptName={en:Y}),N.preferredFamily||(N.preferredFamily=c.names.fontFamily),N.preferredSubfamily||(N.preferredSubfamily=c.names.fontSubfamily);var H=[],G=S1e_make(N,H),W=H.length>0?m1e_make(H):void 0,j=T1e_make(),Q=d1e_make(c.glyphs,{version:c.getEnglishName("version"),fullName:Z,familyName:z,weightName:U,postScriptName:Y,unitsPerEm:c.unitsPerEm,fontBBox:[0,k.yMin,k.ascender,k.advanceWidthMax]}),J=c.metas&&Object.keys(c.metas).length>0?D1e_make(c.metas):void 0,te=[D,M,A,L,G,V,j,Q,E];W&&te.push(W),c.tables.gsub&&te.push(O1e_make(c.tables.gsub)),c.tables.cpal&&te.push(M1e_make(c.tables.cpal)),c.tables.colr&&te.push(k1e_make(c.tables.colr)),J&&te.push(J);for(var ce=I1e(te),Se=dW(ce.encode()),_e=ce.fields,Me=!1,Qe=0;Qe<_e.length;Qe+=1)if("head table"===_e[Qe].name){_e[Qe].value.checkSumAdjustment=2981146554-Se,Me=!0;break}if(!Me)throw new Error("Could not find head table with checkSum to adjust.");return ce};function fW(c,l){for(var a=0,h=c.length-1;a<=h;){var d=a+h>>>1,f=c[d].tag;if(f===l)return d;f<l?a=d+1:h=d-1}return-a-1}function R1e(c,l){for(var a=0,h=c.length-1;a<=h;){var d=a+h>>>1,f=c[d];if(f===l)return d;f<l?a=d+1:h=d-1}return-a-1}function F1e(c,l){for(var a,h=0,d=c.length-1;h<=d;){var f=h+d>>>1,p=(a=c[f]).start;if(p===l)return a;p<l?h=f+1:d=f-1}if(h>0)return l>(a=c[h-1]).end?0:a}function X2(c,l){this.font=c,this.tableName=l}function Y2(c){X2.call(this,c,"gpos")}function Kc(c){X2.call(this,c,"gsub")}function y1t(c,l){var a=c.length;if(a!==l.length)return!1;for(var h=0;h<a;h++)if(c[h]!==l[h])return!1;return!0}function pW(c,l,a){for(var h=c.subtables,d=0;d<h.length;d++){var f=h[d];if(f.substFormat===l)return f}if(a)return h.push(a),a}function N1e(c){for(var l=new ArrayBuffer(c.length),a=new Uint8Array(l),h=0;h<c.length;++h)a[h]=c[h];return l}function K2(c,l){if(!c)throw l}function L1e(c,l,a,h,d){var f;return(l&h)>0?(f=c.parseByte(),0==(l&d)&&(f=-f),f=a+f):f=(l&d)>0?a:a+c.parseShort(),f}function B1e(c,l,a){var d,f,h=new Pn.Parser(l,a);if(c.numberOfContours=h.parseShort(),c._xMin=h.parseShort(),c._yMin=h.parseShort(),c._xMax=h.parseShort(),c._yMax=h.parseShort(),c.numberOfContours>0){for(var p=c.endPointIndices=[],g=0;g<c.numberOfContours;g+=1)p.push(h.parseUShort());c.instructionLength=h.parseUShort(),c.instructions=[];for(var m=0;m<c.instructionLength;m+=1)c.instructions.push(h.parseByte());var v=p[p.length-1]+1;d=[];for(var y=0;y<v;y+=1)if(f=h.parseByte(),d.push(f),(8&f)>0)for(var _=h.parseByte(),b=0;b<_;b+=1)d.push(f),y+=1;if(Qn.argument(d.length===v,"Bad flags."),p.length>0){var x,C=[];if(v>0){for(var S=0;S<v;S+=1)(x={}).onCurve=!!(1&(f=d[S])),x.lastPointOfContour=p.indexOf(S)>=0,C.push(x);for(var w=0,T=0;T<v;T+=1)(x=C[T]).x=L1e(h,f=d[T],w,2,16),w=x.x;for(var O=0,k=0;k<v;k+=1)(x=C[k]).y=L1e(h,f=d[k],O,4,32),O=x.y}c.points=C}else c.points=[]}else if(0===c.numberOfContours)c.points=[];else{c.isComposite=!0,c.points=[],c.components=[];for(var D=!0;D;){d=h.parseUShort();var M={glyphIndex:h.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&d)>0?(2&d)>0?(M.dx=h.parseShort(),M.dy=h.parseShort()):M.matchedPoints=[h.parseUShort(),h.parseUShort()]:(2&d)>0?(M.dx=h.parseChar(),M.dy=h.parseChar()):M.matchedPoints=[h.parseByte(),h.parseByte()],(8&d)>0?M.xScale=M.yScale=h.parseF2Dot14():(64&d)>0?(M.xScale=h.parseF2Dot14(),M.yScale=h.parseF2Dot14()):(128&d)>0&&(M.xScale=h.parseF2Dot14(),M.scale01=h.parseF2Dot14(),M.scale10=h.parseF2Dot14(),M.yScale=h.parseF2Dot14()),c.components.push(M),D=!!(32&d)}if(256&d){c.instructionLength=h.parseUShort(),c.instructions=[];for(var A=0;A<c.instructionLength;A+=1)c.instructions.push(h.parseByte())}}}function gW(c,l){for(var a=[],h=0;h<c.length;h+=1){var d=c[h];a.push({x:l.xScale*d.x+l.scale01*d.y+l.dx,y:l.scale10*d.x+l.yScale*d.y+l.dy,onCurve:d.onCurve,lastPointOfContour:d.lastPointOfContour})}return a}function V1e(c){var l=new wo;if(!c)return l;for(var a=function C1t(c){for(var l=[],a=[],h=0;h<c.length;h+=1){var d=c[h];a.push(d),d.lastPointOfContour&&(l.push(a),a=[])}return Qn.argument(0===a.length,"There are still points left in the current contour."),l}(c),h=0;h<a.length;++h){var d=a[h],p=d[d.length-1],g=d[0];if(p.onCurve)l.moveTo(p.x,p.y);else if(g.onCurve)l.moveTo(g.x,g.y);else{var m={x:.5*(p.x+g.x),y:.5*(p.y+g.y)};l.moveTo(m.x,m.y)}for(var v=0;v<d.length;++v)if(p,p=g,g=d[(v+1)%d.length],p.onCurve)l.lineTo(p.x,p.y);else{var _=g;g.onCurve||(_={x:.5*(p.x+g.x),y:.5*(p.y+g.y)}),l.quadraticCurveTo(p.x,p.y,_.x,_.y)}l.closePath()}return l}function z1e(c,l){if(l.isComposite)for(var a=0;a<l.components.length;a+=1){var h=l.components[a],d=c.get(h.glyphIndex);if(d.getPath(),d.points){var f=void 0;if(void 0===h.matchedPoints)f=gW(d.points,h);else{if(h.matchedPoints[0]>l.points.length-1||h.matchedPoints[1]>d.points.length-1)throw Error("Matched points out of range in "+l.name);var p=l.points[h.matchedPoints[0]],g=d.points[h.matchedPoints[1]],m={xScale:h.xScale,scale01:h.scale01,scale10:h.scale10,yScale:h.yScale,dx:0,dy:0};g=gW([g],m)[0],m.dx=p.x-g.x,m.dy=p.y-g.y,f=gW(d.points,m)}l.points=l.points.concat(f)}}return V1e(l.points)}(Y2.prototype=X2.prototype={searchTag:fW,binSearch:R1e,getTable:function(c){var l=this.font.tables[this.tableName];return!l&&c&&(l=this.font.tables[this.tableName]=this.createDefaultTable()),l},getScriptNames:function(){var c=this.getTable();return c?c.scripts.map(function(l){return l.tag}):[]},getDefaultScriptName:function(){var c=this.getTable();if(c){for(var l=!1,a=0;a<c.scripts.length;a++){var h=c.scripts[a].tag;if("DFLT"===h)return h;"latn"===h&&(l=!0)}if(l)return"latn"}},getScriptTable:function(c,l){var a=this.getTable(l);if(a){var h=a.scripts,d=fW(a.scripts,c=c||"DFLT");if(d>=0)return h[d].script;if(l){var f={tag:c,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return h.splice(-1-d,0,f),f.script}}},getLangSysTable:function(c,l,a){var h=this.getScriptTable(c,a);if(h){if(!l||"dflt"===l||"DFLT"===l)return h.defaultLangSys;var d=fW(h.langSysRecords,l);if(d>=0)return h.langSysRecords[d].langSys;if(a){var f={tag:l,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return h.langSysRecords.splice(-1-d,0,f),f.langSys}}},getFeatureTable:function(c,l,a,h){var d=this.getLangSysTable(c,l,h);if(d){for(var f,p=d.featureIndexes,g=this.font.tables[this.tableName].features,m=0;m<p.length;m++)if((f=g[p[m]]).tag===a)return f.feature;if(h){var v=g.length;return Qn.assert(0===v||a>=g[v-1].tag,"Features must be added in alphabetical order."),g.push(f={tag:a,feature:{params:0,lookupListIndexes:[]}}),p.push(v),f.feature}}},getLookupTables:function(c,l,a,h,d){var f=this.getFeatureTable(c,l,a,d),p=[];if(f){for(var g,m=f.lookupListIndexes,v=this.font.tables[this.tableName].lookups,y=0;y<m.length;y++)(g=v[m[y]]).lookupType===h&&p.push(g);if(0===p.length&&d){var _=v.length;return v.push(g={lookupType:h,lookupFlag:0,subtables:[],markFilteringSet:void 0}),m.push(_),[g]}}return p},getGlyphClass:function(c,l){switch(c.format){case 1:return c.startGlyph<=l&&l<c.startGlyph+c.classes.length?c.classes[l-c.startGlyph]:0;case 2:var a=F1e(c.ranges,l);return a?a.classId:0}},getCoverageIndex:function(c,l){switch(c.format){case 1:var a=R1e(c.glyphs,l);return a>=0?a:-1;case 2:var h=F1e(c.ranges,l);return h?h.index+l-h.start:-1}},expandCoverage:function(c){if(1===c.format)return c.glyphs;for(var l=[],a=c.ranges,h=0;h<a.length;h++)for(var d=a[h],p=d.end,g=d.start;g<=p;g++)l.push(g);return l}}).init=function(){var c=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(c)},Y2.prototype.getKerningValue=function(c,l,a){for(var h=0;h<c.length;h++)for(var d=c[h].subtables,f=0;f<d.length;f++){var p=d[f],g=this.getCoverageIndex(p.coverage,l);if(!(g<0))switch(p.posFormat){case 1:for(var m=p.pairSets[g],v=0;v<m.length;v++){var y=m[v];if(y.secondGlyph===a)return y.value1&&y.value1.xAdvance||0}break;case 2:var _=this.getGlyphClass(p.classDef1,l),b=this.getGlyphClass(p.classDef2,a),C=p.classRecords[_][b];return C.value1&&C.value1.xAdvance||0}}return 0},Y2.prototype.getKerningTables=function(c,l){if(this.font.tables.gpos)return this.getLookupTables(c,l,"kern",2)},(Kc.prototype=X2.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Kc.prototype.getSingle=function(c,l,a){for(var h=[],d=this.getLookupTables(l,a,c,1),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++){var m=p[g],v=this.expandCoverage(m.coverage),y=void 0;if(1===m.substFormat){var _=m.deltaGlyphId;for(y=0;y<v.length;y++){var b=v[y];h.push({sub:b,by:b+_})}}else{var C=m.substitute;for(y=0;y<v.length;y++)h.push({sub:v[y],by:C[y]})}}return h},Kc.prototype.getMultiple=function(c,l,a){for(var h=[],d=this.getLookupTables(l,a,c,2),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++){var m=p[g],v=this.expandCoverage(m.coverage),y=void 0;for(y=0;y<v.length;y++)h.push({sub:v[y],by:m.sequences[y]})}return h},Kc.prototype.getAlternates=function(c,l,a){for(var h=[],d=this.getLookupTables(l,a,c,3),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++)for(var m=p[g],v=this.expandCoverage(m.coverage),y=m.alternateSets,_=0;_<v.length;_++)h.push({sub:v[_],by:y[_]});return h},Kc.prototype.getLigatures=function(c,l,a){for(var h=[],d=this.getLookupTables(l,a,c,4),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++)for(var m=p[g],v=this.expandCoverage(m.coverage),y=m.ligatureSets,_=0;_<v.length;_++)for(var b=v[_],C=y[_],x=0;x<C.length;x++){var S=C[x];h.push({sub:[b].concat(S.components),by:S.ligGlyph})}return h},Kc.prototype.addSingle=function(c,l,a,h){var f=pW(this.getLookupTables(a,h,c,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Qn.assert(1===f.coverage.format,"Single: unable to modify coverage table format "+f.coverage.format);var p=l.sub,g=this.binSearch(f.coverage.glyphs,p);g<0&&(f.coverage.glyphs.splice(g=-1-g,0,p),f.substitute.splice(g,0,0)),f.substitute[g]=l.by},Kc.prototype.addMultiple=function(c,l,a,h){Qn.assert(l.by instanceof Array&&l.by.length>1,'Multiple: "by" must be an array of two or more ids');var f=pW(this.getLookupTables(a,h,c,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Qn.assert(1===f.coverage.format,"Multiple: unable to modify coverage table format "+f.coverage.format);var p=l.sub,g=this.binSearch(f.coverage.glyphs,p);g<0&&(f.coverage.glyphs.splice(g=-1-g,0,p),f.sequences.splice(g,0,0)),f.sequences[g]=l.by},Kc.prototype.addAlternate=function(c,l,a,h){var f=pW(this.getLookupTables(a,h,c,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Qn.assert(1===f.coverage.format,"Alternate: unable to modify coverage table format "+f.coverage.format);var p=l.sub,g=this.binSearch(f.coverage.glyphs,p);g<0&&(f.coverage.glyphs.splice(g=-1-g,0,p),f.alternateSets.splice(g,0,0)),f.alternateSets[g]=l.by},Kc.prototype.addLigature=function(c,l,a,h){var d=this.getLookupTables(a,h,c,4,!0)[0],f=d.subtables[0];f||(d.subtables[0]=f={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),Qn.assert(1===f.coverage.format,"Ligature: unable to modify coverage table format "+f.coverage.format);var p=l.sub[0],g=l.sub.slice(1),m={ligGlyph:l.by,components:g},v=this.binSearch(f.coverage.glyphs,p);if(v>=0){for(var y=f.ligatureSets[v],_=0;_<y.length;_++)if(y1t(y[_].components,g))return;y.push(m)}else f.coverage.glyphs.splice(v=-1-v,0,p),f.ligatureSets.splice(v,0,[m])},Kc.prototype.getFeature=function(c,l,a){if(/ss\d\d/.test(c))return this.getSingle(c,l,a);switch(c){case"aalt":case"salt":return this.getSingle(c,l,a).concat(this.getAlternates(c,l,a));case"dlig":case"liga":case"rlig":return this.getLigatures(c,l,a);case"ccmp":return this.getMultiple(c,l,a).concat(this.getLigatures(c,l,a));case"stch":return this.getMultiple(c,l,a)}},Kc.prototype.add=function(c,l,a,h){if(/ss\d\d/.test(c))return this.addSingle(c,l,a,h);switch(c){case"aalt":case"salt":return"number"==typeof l.by?this.addSingle(c,l,a,h):this.addAlternate(c,l,a,h);case"dlig":case"liga":case"rlig":return this.addLigature(c,l,a,h);case"ccmp":return l.by instanceof Array?this.addMultiple(c,l,a,h):this.addLigature(c,l,a,h)}};var H1e,Ov,$1e,mW,U1e={getPath:V1e,parse:function S1t(c,l,a,h,d){return d.lowMemory?function w1t(c,l,a,h){var d=new qd.GlyphSet(h);return h._push=function(f){var p=a[f];d.push(f,p!==a[f+1]?qd.ttfGlyphLoader(h,f,B1e,c,l+p,z1e):qd.glyphLoader(h,f))},d}(c,l,a,h):function x1t(c,l,a,h){for(var d=new qd.GlyphSet(h),f=0;f<a.length-1;f+=1){var p=a[f];d.push(f,p!==a[f+1]?qd.ttfGlyphLoader(h,f,B1e,c,l+p,z1e):qd.glyphLoader(h,f))}return d}(c,l,a,h)}};function W1e(c){this.font=c,this.getCommands=function(l){return U1e.getPath(l).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function T1t(c){return c}function G1e(c){return Math.sign(c)*Math.round(Math.abs(c))}function O1t(c){return Math.sign(c)*Math.round(Math.abs(2*c))/2}function D1t(c){return Math.sign(c)*(Math.round(Math.abs(c)+.5)-.5)}function k1t(c){return Math.sign(c)*Math.ceil(Math.abs(c))}function M1t(c){return Math.sign(c)*Math.floor(Math.abs(c))}var Q1e=function(c){var l=this.srPeriod,a=this.srPhase,d=1;return c<0&&(c=-c,d=-1),c+=this.srThreshold-a,c=Math.trunc(c/l)*l,(c+=a)<0?a*d:c*d},Zd={x:1,y:0,axis:"x",distance:function(c,l,a,h){return(a?c.xo:c.x)-(h?l.xo:l.x)},interpolate:function(c,l,a,h){var d,f,p,g,m,v,y;if(!h||h===this)return d=c.xo-l.xo,f=c.xo-a.xo,m=l.x-l.xo,v=a.x-a.xo,0===(y=(p=Math.abs(d))+(g=Math.abs(f)))?void(c.x=c.xo+(m+v)/2):void(c.x=c.xo+(m*g+v*p)/y);d=h.distance(c,l,!0,!0),f=h.distance(c,a,!0,!0),m=h.distance(l,l,!1,!0),v=h.distance(a,a,!1,!0),0!==(y=(p=Math.abs(d))+(g=Math.abs(f)))?Zd.setRelative(c,c,(m*g+v*p)/y,h,!0):Zd.setRelative(c,c,(m+v)/2,h,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(c,l,a,h,d){c.x=h&&h!==this?(d?l.xo:l.x)+a*h.x+(c.y-((d?l.yo:l.y)+a*h.y))/h.normalSlope:(d?l.xo:l.x)+a},slope:0,touch:function(c){c.xTouched=!0},touched:function(c){return c.xTouched},untouch:function(c){c.xTouched=!1}},mp={x:0,y:1,axis:"y",distance:function(c,l,a,h){return(a?c.yo:c.y)-(h?l.yo:l.y)},interpolate:function(c,l,a,h){var d,f,p,g,m,v,y;if(!h||h===this)return d=c.yo-l.yo,f=c.yo-a.yo,m=l.y-l.yo,v=a.y-a.yo,0===(y=(p=Math.abs(d))+(g=Math.abs(f)))?void(c.y=c.yo+(m+v)/2):void(c.y=c.yo+(m*g+v*p)/y);d=h.distance(c,l,!0,!0),f=h.distance(c,a,!0,!0),m=h.distance(l,l,!1,!0),v=h.distance(a,a,!1,!0),0!==(y=(p=Math.abs(d))+(g=Math.abs(f)))?mp.setRelative(c,c,(m*g+v*p)/y,h,!0):mp.setRelative(c,c,(m+v)/2,h,!0)},normalSlope:0,setRelative:function(c,l,a,h,d){c.y=h&&h!==this?(d?l.yo:l.y)+a*h.y+h.normalSlope*(c.x-((d?l.xo:l.x)+a*h.x)):(d?l.yo:l.y)+a},slope:Number.POSITIVE_INFINITY,touch:function(c){c.yTouched=!0},touched:function(c){return c.yTouched},untouch:function(c){c.yTouched=!1}};function J2(c,l){this.x=c,this.y=l,this.axis=void 0,this.slope=l/c,this.normalSlope=-c/l,Object.freeze(this)}function eT(c,l){var a=Math.sqrt(c*c+l*l);return l/=a,1==(c/=a)&&0===l?Zd:0===c&&1===l?mp:new J2(c,l)}function vp(c,l,a,h){this.x=this.xo=Math.round(64*c)/64,this.y=this.yo=Math.round(64*l)/64,this.lastPointOfContour=a,this.onCurve=h,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Zd),Object.freeze(mp),J2.prototype.distance=function(c,l,a,h){return this.x*Zd.distance(c,l,a,h)+this.y*mp.distance(c,l,a,h)},J2.prototype.interpolate=function(c,l,a,h){var d,f,p,g,m,v,y;p=h.distance(c,l,!0,!0),g=h.distance(c,a,!0,!0),d=h.distance(l,l,!1,!0),f=h.distance(a,a,!1,!0),0!==(y=(m=Math.abs(p))+(v=Math.abs(g)))?this.setRelative(c,c,(d*v+f*m)/y,h,!0):this.setRelative(c,c,(d+f)/2,h,!0)},J2.prototype.setRelative=function(c,l,a,h,d){var v=(h=h||this).normalSlope,y=this.slope,_=c.x,b=c.y;c.x=(y*_-v*((d?l.xo:l.x)+a*h.x)+((d?l.yo:l.y)+a*h.y)-b)/(y-v),c.y=y*(c.x-_)+b},J2.prototype.touch=function(c){c.xTouched=!0,c.yTouched=!0},vp.prototype.nextTouched=function(c){for(var l=this.nextPointOnContour;!c.touched(l)&&l!==this;)l=l.nextPointOnContour;return l},vp.prototype.prevTouched=function(c){for(var l=this.prevPointOnContour;!c.touched(l)&&l!==this;)l=l.prevPointOnContour;return l};var tT=Object.freeze(new vp(0,0)),E1t={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function rm(c,l){switch(this.env=c,this.stack=[],this.prog=l,c){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Zd,this.round=G1e}}function O4(c){for(var l=c.tZone=new Array(c.gZone.length),a=0;a<l.length;a++)l[a]=new vp(0,0)}function j1e(c,l){var f,a=c.prog,h=c.ip,d=1;do{if(88===(f=a[++h]))d++;else if(89===f)d--;else if(64===f)h+=a[h+1]+1;else if(65===f)h+=2*a[h+1]+1;else if(f>=176&&f<=183)h+=f-176+1;else if(f>=184&&f<=191)h+=2*(f-184+1);else if(l&&1===d&&27===f)break}while(d>0);c.ip=h}function q1e(c,l){exports.DEBUG&&console.log(l.step,"SVTCA["+c.axis+"]"),l.fv=l.pv=l.dpv=c}function Z1e(c,l){exports.DEBUG&&console.log(l.step,"SPVTCA["+c.axis+"]"),l.pv=l.dpv=c}function X1e(c,l){exports.DEBUG&&console.log(l.step,"SFVTCA["+c.axis+"]"),l.fv=c}function Y1e(c,l){var g,m,a=l.stack,h=a.pop(),d=a.pop(),f=l.z2[h],p=l.z1[d];exports.DEBUG&&console.log("SPVTL["+c+"]",h,d),c?(g=f.y-p.y,m=p.x-f.x):(g=p.x-f.x,m=p.y-f.y),l.pv=l.dpv=eT(g,m)}function K1e(c,l){var g,m,a=l.stack,h=a.pop(),d=a.pop(),f=l.z2[h],p=l.z1[d];exports.DEBUG&&console.log("SFVTL["+c+"]",h,d),c?(g=f.y-p.y,m=p.x-f.x):(g=p.x-f.x,m=p.y-f.y),l.fv=eT(g,m)}function vW(c){exports.DEBUG&&console.log(c.step,"POP[]"),c.stack.pop()}function J1e(c,l){var a=l.stack.pop(),h=l.z0[a],d=l.fv,f=l.pv;exports.DEBUG&&console.log(l.step,"MDAP["+c+"]",a);var p=f.distance(h,tT);c&&(p=l.round(p)),d.setRelative(h,tT,p,f),d.touch(h),l.rp0=l.rp1=a}function ebe(c,l){var d,f,p,a=l.z2,h=a.length-2;exports.DEBUG&&console.log(l.step,"IUP["+c.axis+"]");for(var g=0;g<h;g++)!c.touched(d=a[g])&&(f=d.prevTouched(c))!==d&&(f===(p=d.nextTouched(c))&&c.setRelative(d,d,c.distance(f,f,!1,!0),c,!0),c.interpolate(d,f,p,c))}function tbe(c,l){for(var a=l.stack,d=(c?l.z0:l.z1)[c?l.rp1:l.rp2],f=l.fv,p=l.pv,g=l.loop,m=l.z2;g--;){var v=a.pop(),y=m[v],_=p.distance(d,d,!1,!0);f.setRelative(y,y,_,p),f.touch(y),exports.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-g)+": ":"")+"SHP["+(c?"rp1":"rp2")+"]",v)}l.loop=1}function nbe(c,l){var d=(c?l.z0:l.z1)[c?l.rp1:l.rp2],f=l.fv,p=l.pv,g=l.stack.pop(),m=l.z2[l.contours[g]],v=m;exports.DEBUG&&console.log(l.step,"SHC["+c+"]",g);var y=p.distance(d,d,!1,!0);do{v!==d&&f.setRelative(v,v,y,p),v=v.nextPointOnContour}while(v!==m)}function ibe(c,l){var m,d=(c?l.z0:l.z1)[c?l.rp1:l.rp2],f=l.fv,p=l.pv,g=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SHZ["+c+"]",g),g){case 0:m=l.tZone;break;case 1:m=l.gZone;break;default:throw new Error("Invalid zone")}for(var v,y=p.distance(d,d,!1,!0),_=m.length-2,b=0;b<_;b++)f.setRelative(v=m[b],v,y,p)}function rbe(c,l){var a=l.stack,h=a.pop()/64,d=a.pop(),f=l.z1[d],g=l.fv;g.setRelative(f,l.z0[l.rp0],h,l.pv),g.touch(f),exports.DEBUG&&console.log(l.step,"MSIRP["+c+"]",h,d),l.rp1=l.rp0,l.rp2=d,c&&(l.rp0=d)}function sbe(c,l){var a=l.stack,h=a.pop(),d=a.pop(),f=l.z0[d],p=l.fv,g=l.pv,m=l.cvt[h];exports.DEBUG&&console.log(l.step,"MIAP["+c+"]",h,"(",m,")",d);var v=g.distance(f,tT);c&&(Math.abs(v-m)<l.cvCutIn&&(v=m),v=l.round(v)),p.setRelative(f,tT,v,g),0===l.zp0&&(f.xo=f.x,f.yo=f.y),p.touch(f),l.rp0=l.rp1=d}function obe(c,l){var a=l.stack,h=a.pop(),d=l.z2[h];exports.DEBUG&&console.log(l.step,"GC["+c+"]",h),a.push(64*l.dpv.distance(d,tT,c,!1))}function abe(c,l){var a=l.stack,h=a.pop(),d=a.pop(),g=l.dpv.distance(l.z0[d],l.z1[h],c,c);exports.DEBUG&&console.log(l.step,"MD["+c+"]",h,d,"->",g),l.stack.push(Math.round(64*g))}function yW(c,l){var a=l.stack,h=a.pop(),d=l.fv,f=l.pv,p=l.ppem,g=l.deltaBase+16*(c-1),m=l.deltaShift,v=l.z0;exports.DEBUG&&console.log(l.step,"DELTAP["+c+"]",h,a);for(var y=0;y<h;y++){var _=a.pop(),b=a.pop();if(g+((240&b)>>4)===p){var x=(15&b)-8;x>=0&&x++,exports.DEBUG&&console.log(l.step,"DELTAPFIX",_,"by",x*m);var S=v[_];d.setRelative(S,S,x*m,f)}}}function D4(c,l){var a=l.stack,h=a.pop();exports.DEBUG&&console.log(l.step,"ROUND[]"),a.push(64*l.round(h/64))}function _W(c,l){var a=l.stack,h=a.pop(),d=l.ppem,f=l.deltaBase+16*(c-1),p=l.deltaShift;exports.DEBUG&&console.log(l.step,"DELTAC["+c+"]",h,a);for(var g=0;g<h;g++){var m=a.pop(),v=a.pop();if(f+((240&v)>>4)===d){var _=(15&v)-8;_>=0&&_++;var b=_*p;exports.DEBUG&&console.log(l.step,"DELTACFIX",m,"by",b),l.cvt[m]+=b}}}function lbe(c,l){var g,m,a=l.stack,h=a.pop(),d=a.pop(),f=l.z2[h],p=l.z1[d];exports.DEBUG&&console.log(l.step,"SDPVTL["+c+"]",h,d),c?(g=f.y-p.y,m=p.x-f.x):(g=p.x-f.x,m=p.y-f.y),l.dpv=eT(g,m)}function sm(c,l){var a=l.stack,h=l.prog,d=l.ip;exports.DEBUG&&console.log(l.step,"PUSHB["+c+"]");for(var f=0;f<c;f++)a.push(h[++d]);l.ip=d}function om(c,l){var a=l.ip,h=l.prog,d=l.stack;exports.DEBUG&&console.log(l.ip,"PUSHW["+c+"]");for(var f=0;f<c;f++){var p=h[++a]<<8|h[++a];32768&p&&(p=-(1+(65535^p))),d.push(p)}l.ip=a}function Rn(c,l,a,h,d,f){var S,w,T,O,p=f.stack,g=c&&p.pop(),m=p.pop(),y=f.z0[f.rp0],_=f.z1[m],b=f.minDis,C=f.fv,x=f.dpv;T=(w=S=x.distance(_,y,!0,!0))>=0?1:-1,w=Math.abs(w),c&&(O=f.cvt[g],h&&Math.abs(w-O)<f.cvCutIn&&(w=O)),a&&w<b&&(w=b),h&&(w=f.round(w)),C.setRelative(_,y,T*w,x),C.touch(_),exports.DEBUG&&console.log(f.step,(c?"MIRP[":"MDRP[")+(l?"M":"m")+(a?">":"_")+(h?"R":"_")+(0===d?"Gr":1===d?"Bl":2===d?"Wh":"")+"]",c?g+"("+f.cvt[g]+","+O+")":"",m,"(d =",S,"->",T*w,")"),f.rp1=f.rp0,f.rp2=m,l&&(f.rp0=m)}function Pb(c){this.char=c,this.state={},this.activeState=null}function bW(c,l,a){this.contextName=a,this.startIndex=c,this.endOffset=l}function eCt(c,l,a){this.contextName=c,this.openRange=null,this.ranges=[],this.checkStart=l,this.checkEnd=a}function Fh(c,l){this.context=c,this.index=l,this.length=c.length,this.current=c[l],this.backtrack=c.slice(0,l),this.lookahead=c.slice(l+1)}function k4(c){this.eventId=c,this.subscribers=[]}function tCt(c){var l=this,a=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];a.forEach(function(d){Object.defineProperty(l.events,d,{value:new k4(d)})}),c&&a.forEach(function(d){var f=c[d];"function"==typeof f&&l.events[d].subscribe(f)}),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach(function(d){l.events[d].subscribe(l.updateContextsRanges)})}function Zs(c){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],tCt.call(this,c)}function am(c){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(c)}function cbe(c){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(c)}function lm(c){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(c)}function M4(c){return/[A-z]/.test(c)}function Jc(c){this.font=c,this.features={}}function Dv(c){this.id=c.id,this.tag=c.tag,this.substitution=c.substitution}function nT(c,l){if(!c)return-1;switch(l.format){case 1:return l.glyphs.indexOf(c);case 2:for(var a=l.ranges,h=0;h<a.length;h++){var d=a[h];if(c>=d.start&&c<=d.end)return d.index+(c-d.start)}break;default:return-1}return-1}function iCt(c,l){return-1===nT(c,l.coverage)?null:c+l.deltaGlyphId}function rCt(c,l){var a=nT(c,l.coverage);return-1===a?null:l.substitute[a]}function CW(c,l){for(var a=[],h=0;h<c.length;h++){var d=c[h],f=l.current,p=nT(f=Array.isArray(f)?f[0]:f,d);-1!==p&&a.push(p)}return a.length!==c.length?-1:a}function sCt(c,l){if(c.context.length<l.inputCoverage.length+l.lookaheadCoverage.length+l.backtrackCoverage.length)return[];var h=CW(l.inputCoverage,c);if(-1===h)return[];if(c.lookahead.length<l.lookaheadCoverage.length)return[];for(var f=c.lookahead.slice(l.inputCoverage.length-1);f.length&&lm(f[0].char);)f.shift();var p=new Fh(f,0),g=CW(l.lookaheadCoverage,p),m=[].concat(c.backtrack);for(m.reverse();m.length&&lm(m[0].char);)m.shift();if(m.length<l.backtrackCoverage.length)return[];var v=new Fh(m,0),y=CW(l.backtrackCoverage,v),b=[];if(h.length===l.inputCoverage.length&&g.length===l.lookaheadCoverage.length&&y.length===l.backtrackCoverage.length)for(var C=0;C<l.lookupRecords.length;C++)for(var w=this.getLookupByIndex(l.lookupRecords[C].lookupListIndex),T=0;T<w.subtables.length;T++){var O=w.subtables[T],k=this.getLookupMethod(w,O);if("12"===this.getSubstitutionType(w,O))for(var M=0;M<h.length;M++){var L=k(c.get(M));L&&b.push(L)}}return b}function oCt(c,l){var h=nT(c.current,l.coverage);if(-1===h)return null;for(var d,f=l.ligatureSets[h],p=0;p<f.length;p++){d=f[p];for(var g=0;g<d.components.length&&c.lookahead[g]===d.components[g];g++)if(g===d.components.length-1)return d}return null}function aCt(c,l){var a=nT(c,l.coverage);return-1===a?null:l.sequences[a]}W1e.prototype.exec=function(c,l){if("number"!=typeof l)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var a=this.font,h=this._prepState;if(!h||h.ppem!==l){var d=this._fpgmState;if(!d){rm.prototype=E1t,(d=this._fpgmState=new rm("fpgm",a.tables.fpgm)).funcs=[],d.font=a,exports.DEBUG&&(console.log("---EXEC FPGM---"),d.step=-1);try{Ov(d)}catch(v){return console.log("Hinting error in FPGM:"+v),void(this._errorState=3)}}rm.prototype=d,(h=this._prepState=new rm("prep",a.tables.prep)).ppem=l;var f=a.tables.cvt;if(f)for(var p=h.cvt=new Array(f.length),g=l/a.unitsPerEm,m=0;m<f.length;m++)p[m]=f[m]*g;else h.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),h.step=-1);try{Ov(h)}catch(v){this._errorState<2&&console.log("Hinting error in PREP:"+v),this._errorState=2}}if(!(this._errorState>1))try{return $1e(c,h)}catch(v){return this._errorState<1&&(console.log("Hinting error:"+v),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},$1e=function(c,l){var f,p,g,a=l.ppem/l.font.unitsPerEm,h=a,d=c.components;if(rm.prototype=l,d){var m=l.font;p=[],f=[];for(var v=0;v<d.length;v++){var y=d[v],_=m.glyphs.get(y.glyphIndex);g=new rm("glyf",_.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+v+"---"),g.step=-1),mW(_,g,a,h);for(var b=Math.round(y.dx*a),C=Math.round(y.dy*h),x=g.gZone,S=g.contours,w=0;w<x.length;w++){var T=x[w];T.xTouched=T.yTouched=!1,T.xo=T.x=T.x+b,T.yo=T.y=T.y+C}var O=p.length;p.push.apply(p,x);for(var k=0;k<S.length;k++)f.push(S[k]+O)}c.instructions&&!g.inhibitGridFit&&((g=new rm("glyf",c.instructions)).gZone=g.z0=g.z1=g.z2=p,g.contours=f,p.push(new vp(0,0),new vp(Math.round(c.advanceWidth*a),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),g.step=-1),Ov(g),p.length-=2)}else g=new rm("glyf",c.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),g.step=-1),mW(c,g,a,h),p=g.gZone;return p},mW=function(c,l,a,h){for(var m,d=c.points||[],f=d.length,p=l.gZone=l.z0=l.z1=l.z2=[],g=l.contours=[],v=0;v<f;v++)p[v]=new vp((m=d[v]).x*a,m.y*h,m.lastPointOfContour,m.onCurve);for(var y,_,b=0;b<f;b++)m=p[b],y||(y=m,g.push(b)),m.lastPointOfContour?(m.nextPointOnContour=y,y.prevPointOnContour=m,y=void 0):(m.nextPointOnContour=_=p[b+1],_.prevPointOnContour=m);if(!l.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",l.stack);for(var C=0;C<f;C++)console.log(C,p[C].x,p[C].y)}if(p.push(new vp(0,0),new vp(Math.round(c.advanceWidth*a),0)),Ov(l),p.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",l.stack);for(var x=0;x<f;x++)console.log(x,p[x].x,p[x].y)}}},Ov=function(c){var l=c.prog;if(l){var h,a=l.length;for(c.ip=0;c.ip<a;c.ip++){if(exports.DEBUG&&c.step++,!(h=H1e[l[c.ip]]))throw new Error("unknown instruction: 0x"+Number(l[c.ip]).toString(16));h(c)}}},H1e=[q1e.bind(void 0,mp),q1e.bind(void 0,Zd),Z1e.bind(void 0,mp),Z1e.bind(void 0,Zd),X1e.bind(void 0,mp),X1e.bind(void 0,Zd),Y1e.bind(void 0,0),Y1e.bind(void 0,1),K1e.bind(void 0,0),K1e.bind(void 0,1),function A1t(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"SPVFS[]",a,h),c.pv=c.dpv=eT(h,a)},function I1t(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"SPVFS[]",a,h),c.fv=eT(h,a)},function P1t(c){var l=c.stack,a=c.pv;exports.DEBUG&&console.log(c.step,"GPV[]"),l.push(16384*a.x),l.push(16384*a.y)},function R1t(c){var l=c.stack,a=c.fv;exports.DEBUG&&console.log(c.step,"GFV[]"),l.push(16384*a.x),l.push(16384*a.y)},function F1t(c){c.fv=c.pv,exports.DEBUG&&console.log(c.step,"SFVTPV[]")},function N1t(c){var l=c.stack,a=l.pop(),h=l.pop(),d=l.pop(),f=l.pop(),p=l.pop(),g=c.z0,m=c.z1,v=g[a],y=g[h],_=m[d],b=m[f],C=c.z2[p];exports.DEBUG&&console.log("ISECT[], ",a,h,d,f,p);var x=v.x,S=v.y,w=y.x,T=y.y,O=_.x,k=_.y,D=b.x,M=b.y,A=(x-w)*(k-M)-(S-T)*(O-D),L=x*T-S*w,E=O*M-k*D;C.x=(L*(O-D)-E*(x-w))/A,C.y=(L*(k-M)-E*(S-T))/A},function L1t(c){c.rp0=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SRP0[]",c.rp0)},function B1t(c){c.rp1=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SRP1[]",c.rp1)},function V1t(c){c.rp2=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SRP2[]",c.rp2)},function z1t(c){var l=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZP0[]",l),c.zp0=l,l){case 0:c.tZone||O4(c),c.z0=c.tZone;break;case 1:c.z0=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function U1t(c){var l=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZP1[]",l),c.zp1=l,l){case 0:c.tZone||O4(c),c.z1=c.tZone;break;case 1:c.z1=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function H1t(c){var l=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZP2[]",l),c.zp2=l,l){case 0:c.tZone||O4(c),c.z2=c.tZone;break;case 1:c.z2=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function $1t(c){var l=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZPS[]",l),c.zp0=c.zp1=c.zp2=l,l){case 0:c.tZone||O4(c),c.z0=c.z1=c.z2=c.tZone;break;case 1:c.z0=c.z1=c.z2=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function W1t(c){c.loop=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SLOOP[]",c.loop)},function G1t(c){exports.DEBUG&&console.log(c.step,"RTG[]"),c.round=G1e},function Q1t(c){exports.DEBUG&&console.log(c.step,"RTHG[]"),c.round=D1t},function j1t(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"SMD[]",l),c.minDis=l/64},function q1t(c){exports.DEBUG&&console.log(c.step,"ELSE[]"),j1e(c,!1)},function Z1t(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"JMPR[]",l),c.ip+=l-1},function X1t(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"SCVTCI[]",l),c.cvCutIn=l/64},void 0,void 0,function Y1t(c){var l=c.stack;exports.DEBUG&&console.log(c.step,"DUP[]"),l.push(l[l.length-1])},vW,function K1t(c){exports.DEBUG&&console.log(c.step,"CLEAR[]"),c.stack.length=0},function J1t(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"SWAP[]"),l.push(a),l.push(h)},function ebt(c){var l=c.stack;exports.DEBUG&&console.log(c.step,"DEPTH[]"),l.push(l.length)},function ibt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"CINDEX[]",a),l.push(l[l.length-a])},function rbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"MINDEX[]",a),l.push(l.splice(l.length-a,1)[0])},void 0,void 0,void 0,function tbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"LOOPCALL[]",a,h);var d=c.ip,f=c.prog;c.prog=c.funcs[a];for(var p=0;p<h;p++)Ov(c),exports.DEBUG&&console.log(++c.step,p+1<h?"next loopcall":"done loopcall",p);c.ip=d,c.prog=f},function nbt(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"CALL[]",l);var a=c.ip,h=c.prog;c.prog=c.funcs[l],Ov(c),c.ip=a,c.prog=h,exports.DEBUG&&console.log(++c.step,"returning from",l)},function sbt(c){if("fpgm"!==c.env)throw new Error("FDEF not allowed here");var a=c.prog,h=c.ip,d=c.stack.pop(),f=h;for(exports.DEBUG&&console.log(c.step,"FDEF[]",d);45!==a[++h];);c.ip=h,c.funcs[d]=a.slice(f+1,h)},void 0,J1e.bind(void 0,0),J1e.bind(void 0,1),ebe.bind(void 0,mp),ebe.bind(void 0,Zd),tbe.bind(void 0,0),tbe.bind(void 0,1),nbe.bind(void 0,0),nbe.bind(void 0,1),ibe.bind(void 0,0),ibe.bind(void 0,1),function obt(c){for(var l=c.stack,a=c.loop,h=c.fv,d=l.pop()/64,f=c.z2;a--;){var p=l.pop(),g=f[p];exports.DEBUG&&console.log(c.step,(c.loop>1?"loop "+(c.loop-a)+": ":"")+"SHPIX[]",p,d),h.setRelative(g,g,d),h.touch(g)}c.loop=1},function abt(c){for(var l=c.stack,a=c.rp1,h=c.rp2,d=c.loop,f=c.z0[a],p=c.z1[h],g=c.fv,m=c.dpv,v=c.z2;d--;){var y=l.pop(),_=v[y];exports.DEBUG&&console.log(c.step,(c.loop>1?"loop "+(c.loop-d)+": ":"")+"IP[]",y,a,"<->",h),g.interpolate(_,f,p,m),g.touch(_)}c.loop=1},rbe.bind(void 0,0),rbe.bind(void 0,1),function lbt(c){for(var l=c.stack,h=c.z0[c.rp0],d=c.loop,f=c.fv,p=c.pv,g=c.z1;d--;){var m=l.pop(),v=g[m];exports.DEBUG&&console.log(c.step,(c.loop>1?"loop "+(c.loop-d)+": ":"")+"ALIGNRP[]",m),f.setRelative(v,h,0,p),f.touch(v)}c.loop=1},function cbt(c){exports.DEBUG&&console.log(c.step,"RTDG[]"),c.round=O1t},sbe.bind(void 0,0),sbe.bind(void 0,1),function ubt(c){var l=c.prog,a=c.ip,h=c.stack,d=l[++a];exports.DEBUG&&console.log(c.step,"NPUSHB[]",d);for(var f=0;f<d;f++)h.push(l[++a]);c.ip=a},function hbt(c){var l=c.ip,a=c.prog,h=c.stack,d=a[++l];exports.DEBUG&&console.log(c.step,"NPUSHW[]",d);for(var f=0;f<d;f++){var p=a[++l]<<8|a[++l];32768&p&&(p=-(1+(65535^p))),h.push(p)}c.ip=l},function dbt(c){var l=c.stack,a=c.store;a||(a=c.store=[]);var h=l.pop(),d=l.pop();exports.DEBUG&&console.log(c.step,"WS",h,d),a[d]=h},function fbt(c){var l=c.stack,a=c.store,h=l.pop();exports.DEBUG&&console.log(c.step,"RS",h),l.push(a&&a[h]||0)},function pbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"WCVTP",a,h),c.cvt[h]=a/64},function gbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"RCVT",a),l.push(64*c.cvt[a])},obe.bind(void 0,0),obe.bind(void 0,1),void 0,abe.bind(void 0,0),abe.bind(void 0,1),function mbt(c){exports.DEBUG&&console.log(c.step,"MPPEM[]"),c.stack.push(c.ppem)},void 0,function vbt(c){exports.DEBUG&&console.log(c.step,"FLIPON[]"),c.autoFlip=!0},void 0,void 0,function ybt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"LT[]",a,h),l.push(h<a?1:0)},function _bt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"LTEQ[]",a,h),l.push(h<=a?1:0)},function bbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"GT[]",a,h),l.push(h>a?1:0)},function Cbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"GTEQ[]",a,h),l.push(h>=a?1:0)},function xbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"EQ[]",a,h),l.push(a===h?1:0)},function wbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"NEQ[]",a,h),l.push(a!==h?1:0)},function Sbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"ODD[]",a),l.push(Math.trunc(a)%2?1:0)},function Tbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"EVEN[]",a),l.push(Math.trunc(a)%2?0:1)},function Obt(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"IF[]",l),l||(j1e(c,!0),exports.DEBUG&&console.log(c.step,"EIF[]"))},function Dbt(c){exports.DEBUG&&console.log(c.step,"EIF[]")},function kbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"AND[]",a,h),l.push(a&&h?1:0)},function Mbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"OR[]",a,h),l.push(a||h?1:0)},function Ebt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"NOT[]",a),l.push(a?0:1)},yW.bind(void 0,1),function Abt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"SDB[]",a),c.deltaBase=a},function Ibt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"SDS[]",a),c.deltaShift=Math.pow(.5,a)},function Pbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"ADD[]",a,h),l.push(h+a)},function Rbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"SUB[]",a,h),l.push(h-a)},function Fbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"DIV[]",a,h),l.push(64*h/a)},function Nbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"MUL[]",a,h),l.push(h*a/64)},function Lbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"ABS[]",a),l.push(Math.abs(a))},function Bbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"NEG[]",a),l.push(-a)},function Vbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"FLOOR[]",a),l.push(64*Math.floor(a/64))},function zbt(c){var l=c.stack,a=l.pop();exports.DEBUG&&console.log(c.step,"CEILING[]",a),l.push(64*Math.ceil(a/64))},D4.bind(void 0,0),D4.bind(void 0,1),D4.bind(void 0,2),D4.bind(void 0,3),void 0,void 0,void 0,void 0,function Ubt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"WCVTF[]",a,h),c.cvt[h]=a*c.ppem/c.font.unitsPerEm},yW.bind(void 0,2),yW.bind(void 0,3),_W.bind(void 0,1),_W.bind(void 0,2),_W.bind(void 0,3),function Hbt(c){var a,l=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SROUND[]",l),c.round=Q1e,192&l){case 0:a=.5;break;case 64:a=1;break;case 128:a=2;break;default:throw new Error("invalid SROUND value")}switch(c.srPeriod=a,48&l){case 0:c.srPhase=0;break;case 16:c.srPhase=.25*a;break;case 32:c.srPhase=.5*a;break;case 48:c.srPhase=.75*a;break;default:throw new Error("invalid SROUND value")}c.srThreshold=0==(l&=15)?0:(l/8-.5)*a},function $bt(c){var a,l=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"S45ROUND[]",l),c.round=Q1e,192&l){case 0:a=Math.sqrt(2)/2;break;case 64:a=Math.sqrt(2);break;case 128:a=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(c.srPeriod=a,48&l){case 0:c.srPhase=0;break;case 16:c.srPhase=.25*a;break;case 32:c.srPhase=.5*a;break;case 48:c.srPhase=.75*a;break;default:throw new Error("invalid S45ROUND value")}c.srThreshold=0==(l&=15)?0:(l/8-.5)*a},void 0,void 0,function Wbt(c){exports.DEBUG&&console.log(c.step,"ROFF[]"),c.round=T1t},void 0,function Gbt(c){exports.DEBUG&&console.log(c.step,"RUTG[]"),c.round=k1t},function Qbt(c){exports.DEBUG&&console.log(c.step,"RDTG[]"),c.round=M1t},vW,vW,void 0,void 0,void 0,void 0,void 0,function jbt(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"SCANCTRL[]",l)},lbe.bind(void 0,0),lbe.bind(void 0,1),function qbt(c){var l=c.stack,a=l.pop(),h=0;exports.DEBUG&&console.log(c.step,"GETINFO[]",a),1&a&&(h=35),32&a&&(h|=4096),l.push(h)},void 0,function Zbt(c){var l=c.stack,a=l.pop(),h=l.pop(),d=l.pop();exports.DEBUG&&console.log(c.step,"ROLL[]"),l.push(h),l.push(a),l.push(d)},function Xbt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"MAX[]",a,h),l.push(Math.max(h,a))},function Ybt(c){var l=c.stack,a=l.pop(),h=l.pop();exports.DEBUG&&console.log(c.step,"MIN[]",a,h),l.push(Math.min(h,a))},function Kbt(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"SCANTYPE[]",l)},function Jbt(c){var l=c.stack.pop(),a=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"INSTCTRL[]",l,a),l){case 1:return void(c.inhibitGridFit=!!a);case 2:return void(c.ignoreCvt=!!a);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,sm.bind(void 0,1),sm.bind(void 0,2),sm.bind(void 0,3),sm.bind(void 0,4),sm.bind(void 0,5),sm.bind(void 0,6),sm.bind(void 0,7),sm.bind(void 0,8),om.bind(void 0,1),om.bind(void 0,2),om.bind(void 0,3),om.bind(void 0,4),om.bind(void 0,5),om.bind(void 0,6),om.bind(void 0,7),om.bind(void 0,8),Rn.bind(void 0,0,0,0,0,0),Rn.bind(void 0,0,0,0,0,1),Rn.bind(void 0,0,0,0,0,2),Rn.bind(void 0,0,0,0,0,3),Rn.bind(void 0,0,0,0,1,0),Rn.bind(void 0,0,0,0,1,1),Rn.bind(void 0,0,0,0,1,2),Rn.bind(void 0,0,0,0,1,3),Rn.bind(void 0,0,0,1,0,0),Rn.bind(void 0,0,0,1,0,1),Rn.bind(void 0,0,0,1,0,2),Rn.bind(void 0,0,0,1,0,3),Rn.bind(void 0,0,0,1,1,0),Rn.bind(void 0,0,0,1,1,1),Rn.bind(void 0,0,0,1,1,2),Rn.bind(void 0,0,0,1,1,3),Rn.bind(void 0,0,1,0,0,0),Rn.bind(void 0,0,1,0,0,1),Rn.bind(void 0,0,1,0,0,2),Rn.bind(void 0,0,1,0,0,3),Rn.bind(void 0,0,1,0,1,0),Rn.bind(void 0,0,1,0,1,1),Rn.bind(void 0,0,1,0,1,2),Rn.bind(void 0,0,1,0,1,3),Rn.bind(void 0,0,1,1,0,0),Rn.bind(void 0,0,1,1,0,1),Rn.bind(void 0,0,1,1,0,2),Rn.bind(void 0,0,1,1,0,3),Rn.bind(void 0,0,1,1,1,0),Rn.bind(void 0,0,1,1,1,1),Rn.bind(void 0,0,1,1,1,2),Rn.bind(void 0,0,1,1,1,3),Rn.bind(void 0,1,0,0,0,0),Rn.bind(void 0,1,0,0,0,1),Rn.bind(void 0,1,0,0,0,2),Rn.bind(void 0,1,0,0,0,3),Rn.bind(void 0,1,0,0,1,0),Rn.bind(void 0,1,0,0,1,1),Rn.bind(void 0,1,0,0,1,2),Rn.bind(void 0,1,0,0,1,3),Rn.bind(void 0,1,0,1,0,0),Rn.bind(void 0,1,0,1,0,1),Rn.bind(void 0,1,0,1,0,2),Rn.bind(void 0,1,0,1,0,3),Rn.bind(void 0,1,0,1,1,0),Rn.bind(void 0,1,0,1,1,1),Rn.bind(void 0,1,0,1,1,2),Rn.bind(void 0,1,0,1,1,3),Rn.bind(void 0,1,1,0,0,0),Rn.bind(void 0,1,1,0,0,1),Rn.bind(void 0,1,1,0,0,2),Rn.bind(void 0,1,1,0,0,3),Rn.bind(void 0,1,1,0,1,0),Rn.bind(void 0,1,1,0,1,1),Rn.bind(void 0,1,1,0,1,2),Rn.bind(void 0,1,1,0,1,3),Rn.bind(void 0,1,1,1,0,0),Rn.bind(void 0,1,1,1,0,1),Rn.bind(void 0,1,1,1,0,2),Rn.bind(void 0,1,1,1,0,3),Rn.bind(void 0,1,1,1,1,0),Rn.bind(void 0,1,1,1,1,1),Rn.bind(void 0,1,1,1,1,2),Rn.bind(void 0,1,1,1,1,3)],Pb.prototype.setState=function(c,l){return this.state[c]=l,this.activeState={key:c,value:this.state[c]},this.activeState},Pb.prototype.getState=function(c){return this.state[c]||null},Zs.prototype.inboundIndex=function(c){return c>=0&&c<this.tokens.length},Zs.prototype.composeRUD=function(c){var l=this,h=c.map(function(f){return l[f[0]].apply(l,f.slice(1).concat(!0))}),d=function(f){return"object"==typeof f&&f.hasOwnProperty("FAIL")};if(h.every(d))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:h.filter(d)};this.dispatch("composeRUD",[h.filter(function(f){return!d(f)})])},Zs.prototype.replaceRange=function(c,l,a,h){l=null!==l?l:this.tokens.length;var d=a.every(function(p){return p instanceof Pb});if(!isNaN(c)&&this.inboundIndex(c)&&d){var f=this.tokens.splice.apply(this.tokens,[c,l].concat(a));return h||this.dispatch("replaceToken",[c,l,a]),[f,a]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},Zs.prototype.replaceToken=function(c,l,a){if(!isNaN(c)&&this.inboundIndex(c)&&l instanceof Pb){var h=this.tokens.splice(c,1,l);return a||this.dispatch("replaceToken",[c,l]),[h[0],l]}return{FAIL:"replaceToken: invalid token or index."}},Zs.prototype.removeRange=function(c,l,a){l=isNaN(l)?this.tokens.length:l;var h=this.tokens.splice(c,l);return a||this.dispatch("removeRange",[h,c,l]),h},Zs.prototype.removeToken=function(c,l){if(!isNaN(c)&&this.inboundIndex(c)){var a=this.tokens.splice(c,1);return l||this.dispatch("removeToken",[a,c]),a}return{FAIL:"removeToken: invalid token index."}},Zs.prototype.insertToken=function(c,l,a){return c.every(function(d){return d instanceof Pb})?(this.tokens.splice.apply(this.tokens,[l,0].concat(c)),a||this.dispatch("insertToken",[c,l]),c):{FAIL:"insertToken: invalid token(s)."}},Zs.prototype.registerModifier=function(c,l,a){this.events.newToken.subscribe(function(h,d){if(null===l||!0===l.apply(this,[h,d])){var m=a.apply(this,[h,d]);h.setState(c,m)}}),this.registeredModifiers.push(c)},k4.prototype.subscribe=function(c){return"function"==typeof c?this.subscribers.push(c)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},k4.prototype.unsubscribe=function(c){this.subscribers.splice(c,1)},Fh.prototype.setCurrentIndex=function(c){this.index=c,this.current=this.context[c],this.backtrack=this.context.slice(0,c),this.lookahead=this.context.slice(c+1)},Fh.prototype.get=function(c){switch(!0){case 0===c:return this.current;case c<0&&Math.abs(c)<=this.backtrack.length:return this.backtrack.slice(c)[0];case c>0&&c<=this.lookahead.length:return this.lookahead[c-1];default:return null}},Zs.prototype.rangeToText=function(c){if(c instanceof bW)return this.getRangeTokens(c).map(function(l){return l.char}).join("")},Zs.prototype.getText=function(){return this.tokens.map(function(c){return c.char}).join("")},Zs.prototype.getContext=function(c){return this.registeredContexts[c]||null},Zs.prototype.on=function(c,l){var a=this.events[c];return a?a.subscribe(l):null},Zs.prototype.dispatch=function(c,l){var a=this,h=this.events[c];h instanceof k4&&h.subscribers.forEach(function(d){d.apply(a,l||[])})},Zs.prototype.registerContextChecker=function(c,l,a){if(this.getContext(c))return{FAIL:"context name '"+c+"' is already registered."};if("function"!=typeof l)return{FAIL:"missing context start check."};if("function"!=typeof a)return{FAIL:"missing context end check."};var h=new eCt(c,l,a);return this.registeredContexts[c]=h,this.contextCheckers.push(h),h},Zs.prototype.getRangeTokens=function(c){return[].concat(this.tokens.slice(c.startIndex,c.startIndex+c.endOffset))},Zs.prototype.getContextRanges=function(c){var l=this.getContext(c);return l?l.ranges:{FAIL:"context checker '"+c+"' is not registered."}},Zs.prototype.resetContextsRanges=function(){var c=this.registeredContexts;for(var l in c)c.hasOwnProperty(l)&&(c[l].ranges=[])},Zs.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var c=this.tokens.map(function(h){return h.char}),l=0;l<c.length;l++){var a=new Fh(c,l);this.runContextCheck(a)}this.dispatch("updateContextsRanges",[this.registeredContexts])},Zs.prototype.setEndOffset=function(c,l){var h=new bW(this.getContext(l).openRange.startIndex,c,l),d=this.getContext(l).ranges;return h.rangeId=l+"."+d.length,d.push(h),this.getContext(l).openRange=null,h},Zs.prototype.runContextCheck=function(c){var l=this,a=c.index;this.contextCheckers.forEach(function(h){var d=h.contextName,f=l.getContext(d).openRange;if(!f&&h.checkStart(c)&&(f=new bW(a,null,d),l.getContext(d).openRange=f,l.dispatch("contextStart",[d,a])),f&&h.checkEnd(c)){var g=l.setEndOffset(a-f.startIndex+1,d);l.dispatch("contextEnd",[d,g])}})},Zs.prototype.tokenize=function(c){this.tokens=[],this.resetContextsRanges();var l=Array.from(c);this.dispatch("start");for(var a=0;a<l.length;a++){var h=l[a],d=new Fh(l,a);this.dispatch("next",[d]),this.runContextCheck(d);var f=new Pb(h);this.tokens.push(f),this.dispatch("newToken",[f,d])}return this.dispatch("end",[this.tokens]),this.tokens},Jc.prototype.getDefaultScriptFeaturesIndexes=function(){for(var c=this.font.tables.gsub.scripts,l=0;l<c.length;l++){var a=c[l];if("DFLT"===a.tag)return a.script.defaultLangSys.featureIndexes}return[]},Jc.prototype.getScriptFeaturesIndexes=function(c){if(!this.font.tables.gsub)return[];if(!c)return this.getDefaultScriptFeaturesIndexes();for(var a=this.font.tables.gsub.scripts,h=0;h<a.length;h++){var d=a[h];if(d.tag===c&&d.script.defaultLangSys)return d.script.defaultLangSys.featureIndexes;var f=d.langSysRecords;if(f)for(var p=0;p<f.length;p++){var g=f[p];if(g.tag===c)return g.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Jc.prototype.mapTagsToFeatures=function(c,l){for(var a={},h=0;h<c.length;h++)a[c[h].tag]=c[h].feature;this.features[l].tags=a},Jc.prototype.getScriptFeatures=function(c){var l=this.features[c];if(this.features.hasOwnProperty(c))return l;var a=this.getScriptFeaturesIndexes(c);if(!a)return null;var h=this.font.tables.gsub;return l=a.map(function(d){return h.features[d]}),this.features[c]=l,this.mapTagsToFeatures(l,c),l},Jc.prototype.getSubstitutionType=function(c,l){return c.lookupType.toString()+l.substFormat.toString()},Jc.prototype.getLookupMethod=function(c,l){var a=this;switch(this.getSubstitutionType(c,l)){case"11":return function(d){return iCt.apply(a,[d,l])};case"12":return function(d){return rCt.apply(a,[d,l])};case"63":return function(d){return sCt.apply(a,[d,l])};case"41":return function(d){return oCt.apply(a,[d,l])};case"21":return function(d){return aCt.apply(a,[d,l])};default:throw new Error("lookupType: "+c.lookupType+" - substFormat: "+l.substFormat+" is not yet supported")}},Jc.prototype.lookupFeature=function(c){var l=c.contextParams,a=l.index,h=this.getFeature({tag:c.tag,script:c.script});if(!h)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+c.tag+"' for script '"+c.script+"'.");for(var d=this.getFeatureLookups(h),f=[].concat(l.context),p=0;p<d.length;p++)for(var g=d[p],m=this.getLookupSubtables(g),v=0;v<m.length;v++){var y=m[v],_=this.getSubstitutionType(g,y),b=this.getLookupMethod(g,y),C=void 0;switch(_){case"11":(C=b(l.current))&&f.splice(a,1,new Dv({id:11,tag:c.tag,substitution:C}));break;case"12":(C=b(l.current))&&f.splice(a,1,new Dv({id:12,tag:c.tag,substitution:C}));break;case"63":C=b(l),Array.isArray(C)&&C.length&&f.splice(a,1,new Dv({id:63,tag:c.tag,substitution:C}));break;case"41":(C=b(l))&&f.splice(a,1,new Dv({id:41,tag:c.tag,substitution:C}));break;case"21":(C=b(l.current))&&f.splice(a,1,new Dv({id:21,tag:c.tag,substitution:C}))}l=new Fh(f,a),(!Array.isArray(C)||C.length)&&(C=null)}return f.length?f:null},Jc.prototype.supports=function(c){if(!c.script)return!1;this.getScriptFeatures(c.script);var l=this.features.hasOwnProperty(c.script);if(!c.tag)return l;var a=this.features[c.script].some(function(h){return h.tag===c.tag});return l&&a},Jc.prototype.getLookupSubtables=function(c){return c.subtables||null},Jc.prototype.getLookupByIndex=function(c){return this.font.tables.gsub.lookups[c]||null},Jc.prototype.getFeatureLookups=function(c){return c.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Jc.prototype.getFeature=function(l){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(l.script)||this.getScriptFeatures(l.script);var a=this.features[l.script];return a?a.tags[l.tag]?this.features[l.script].tags[l.tag]:null:{FAIL:"No feature for script "+l.script}};var uCt={startCheck:function lCt(c){var l=c.current,a=c.get(-1);return null===a&&am(l)||!am(a)&&am(l)},endCheck:function cCt(c){var l=c.get(1);return null===l||!am(l)}},fCt={startCheck:function hCt(c){var l=c.current,a=c.get(-1);return(am(l)||lm(l))&&!am(a)},endCheck:function dCt(c){var l=c.get(1);switch(!0){case null===l:return!0;case!am(l)&&!lm(l):var a=function nCt(c){return/\s/.test(c)}(l);if(!a)return!0;if(a&&!c.lookahead.some(function(d){return am(d)||lm(d)}))return!0;break;default:return!1}}},ube={11:function pCt(c,l,a){l[a].setState(c.tag,c.substitution)},12:function gCt(c,l,a){l[a].setState(c.tag,c.substitution)},63:function mCt(c,l,a){c.substitution.forEach(function(h,d){l[a+d].setState(c.tag,h)})},41:function vCt(c,l,a){var h=l[a];h.setState(c.tag,c.substitution.ligGlyph);for(var d=c.substitution.components.length,f=0;f<d;f++)(h=l[a+f+1]).setState("deleted",!0)}};function xW(c,l,a){c instanceof Dv&&ube[c.id]&&ube[c.id](c,l,a)}function bCt(c){var l=this,a="arab",h=this.featuresTags[a],d=this.tokenizer.getRangeTokens(c);if(1!==d.length){var f=new Fh(d.map(function(g){return g.getState("glyphIndex")}),0),p=new Fh(d.map(function(g){return g.char}),0);d.forEach(function(g,m){if(!lm(g.char)){f.setCurrentIndex(m),p.setCurrentIndex(m);var y,v=0;switch(function yCt(c){for(var l=[].concat(c.backtrack),a=l.length-1;a>=0;a--){var h=l[a],d=cbe(h),f=lm(h);if(!d&&!f)return!0;if(d)return!1}return!1}(p)&&(v|=1),function _Ct(c){if(cbe(c.current))return!1;for(var l=0;l<c.lookahead.length;l++)if(!lm(c.lookahead[l]))return!0;return!1}(p)&&(v|=2),v){case 1:y="fina";break;case 2:y="init";break;case 3:y="medi"}if(-1!==h.indexOf(y)){var _=l.query.lookupFeature({tag:y,script:a,contextParams:f});if(_ instanceof Error)return console.info(_.message);_.forEach(function(b,C){b instanceof Dv&&(xW(b,d,C),f.context[C]=b.substitution)})}}})}}function hbe(c,l){return new Fh(c.map(function(h){return h.activeState.value}),l||0)}function CCt(c){var l=this,h=this.tokenizer.getRangeTokens(c),d=hbe(h);d.context.forEach(function(f,p){d.setCurrentIndex(p);var g=l.query.lookupFeature({tag:"rlig",script:"arab",contextParams:d});g.length&&(g.forEach(function(m){return xW(m,h,p)}),d=hbe(h))})}var SCt={startCheck:function xCt(c){var l=c.current,a=c.get(-1);return null===a&&M4(l)||!M4(a)&&M4(l)},endCheck:function wCt(c){var l=c.get(1);return null===l||!M4(l)}};function dbe(c,l){return new Fh(c.map(function(h){return h.activeState.value}),l||0)}function TCt(c){var l=this,h=this.tokenizer.getRangeTokens(c),d=dbe(h);d.context.forEach(function(f,p){d.setCurrentIndex(p);var g=l.query.lookupFeature({tag:"liga",script:"latn",contextParams:d});g.length&&(g.forEach(function(m){return xW(m,h,p)}),d=dbe(h))})}function Nh(c){this.baseDir=c||"ltr",this.tokenizer=new Zs,this.featuresTags={}}function wW(c){var l=this.contextChecks[c+"Check"];return this.tokenizer.registerContextChecker(c,l.startCheck,l.endCheck)}function OCt(){return wW.call(this,"latinWord"),wW.call(this,"arabicWord"),wW.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function DCt(){var c=this;this.tokenizer.getContextRanges("arabicSentence").forEach(function(a){var h=c.tokenizer.getRangeTokens(a);c.tokenizer.replaceRange(a.startIndex,a.endOffset,h.reverse())})}function SW(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function kCt(){var c=this;this.featuresTags.hasOwnProperty("arab")&&(SW.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(h){bCt.call(c,h)}))}function MCt(){var c=this,l="arab";this.featuresTags.hasOwnProperty(l)&&-1!==this.featuresTags[l].indexOf("rlig")&&(SW.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(d){CCt.call(c,d)}))}function ECt(){var c=this,l="latn";this.featuresTags.hasOwnProperty(l)&&-1!==this.featuresTags[l].indexOf("liga")&&(SW.call(this),this.tokenizer.getContextRanges("latinWord").forEach(function(d){TCt.call(c,d)}))}function Hr(c){(c=c||{}).tables=c.tables||{},c.empty||(K2(c.familyName,"When creating a new Font object, familyName is required."),K2(c.styleName,"When creating a new Font object, styleName is required."),K2(c.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),K2(c.ascender,"When creating a new Font object, ascender is required."),K2(c.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:c.familyName||" "},fontSubfamily:{en:c.styleName||" "},fullName:{en:c.fullName||c.familyName+" "+c.styleName},postScriptName:{en:c.postScriptName||(c.familyName+c.styleName).replace(/\s/g,"")},designer:{en:c.designer||" "},designerURL:{en:c.designerURL||" "},manufacturer:{en:c.manufacturer||" "},manufacturerURL:{en:c.manufacturerURL||" "},license:{en:c.license||" "},licenseURL:{en:c.licenseURL||" "},version:{en:c.version||"Version 0.1"},description:{en:c.description||" "},copyright:{en:c.copyright||" "},trademark:{en:c.trademark||" "}},this.unitsPerEm=c.unitsPerEm||1e3,this.ascender=c.ascender,this.descender=c.descender,this.createdTimestamp=c.createdTimestamp,this.tables=Object.assign(c.tables,{os2:Object.assign({usWeightClass:c.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:c.widthClass||this.usWidthClasses.MEDIUM,fsSelection:c.fsSelection||this.fsSelectionValues.REGULAR},c.tables.os2)})),this.supported=!0,this.glyphs=new qd.GlyphSet(this,c.glyphs||[]),this.encoding=new K_e(this),this.position=new Y2(this),this.substitution=new Kc(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new W1e(this):void 0}})}function ICt(c,l,a){var h={},d=new Pn.Parser(c,l);return h.tag=d.parseTag(),h.minValue=d.parseFixed(),h.defaultValue=d.parseFixed(),h.maxValue=d.parseFixed(),d.skip("uShort",1),h.name=a[d.parseUShort()]||{},h}function RCt(c,l,a,h){var d={},f=new Pn.Parser(c,l);d.name=h[f.parseUShort()]||{},f.skip("uShort",1),d.coordinates={};for(var p=0;p<a.length;++p)d.coordinates[a[p].tag]=f.parseFixed();return d}Nh.prototype.setText=function(c){this.text=c},Nh.prototype.contextChecks={latinWordCheck:SCt,arabicWordCheck:uCt,arabicSentenceCheck:fCt},Nh.prototype.registerFeatures=function(c,l){var a=this,h=l.filter(function(d){return a.query.supports({script:c,tag:d})});this.featuresTags[c]=this.featuresTags.hasOwnProperty(c)?this.featuresTags[c].concat(h):h},Nh.prototype.applyFeatures=function(c,l){if(!c)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Jc(c));for(var a=0;a<l.length;a++){var h=l[a];!this.query.supports({script:h.script})||this.registerFeatures(h.script,h.tags)}},Nh.prototype.registerModifier=function(c,l,a){this.tokenizer.registerModifier(c,l,a)},Nh.prototype.checkContextReady=function(c){return!!this.tokenizer.getContext(c)},Nh.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(kCt.call(this),MCt.call(this)),this.checkContextReady("latinWord")&&ECt.call(this),this.checkContextReady("arabicSentence")&&DCt.call(this)},Nh.prototype.processText=function(c){(!this.text||this.text!==c)&&(this.setText(c),OCt.call(this),this.applyFeaturesToContexts())},Nh.prototype.getBidiText=function(c){return this.processText(c),this.tokenizer.getText()},Nh.prototype.getTextGlyphs=function(c){this.processText(c);for(var l=[],a=0;a<this.tokenizer.tokens.length;a++){var h=this.tokenizer.tokens[a];if(!h.state.deleted){var d=h.activeState.value;l.push(Array.isArray(d)?d[0]:d)}}return l},Hr.prototype.hasChar=function(c){return null!==this.encoding.charToGlyphIndex(c)},Hr.prototype.charToGlyphIndex=function(c){return this.encoding.charToGlyphIndex(c)},Hr.prototype.charToGlyph=function(c){var l=this.charToGlyphIndex(c),a=this.glyphs.get(l);return a||(a=this.glyphs.get(0)),a},Hr.prototype.updateFeatures=function(c){return this.defaultRenderOptions.features.map(function(l){return"latn"===l.script?{script:"latn",tags:l.tags.filter(function(a){return c[a]})}:l})},Hr.prototype.stringToGlyphs=function(c,l){var a=this,h=new Nh;h.registerModifier("glyphIndex",null,function(_){return a.charToGlyphIndex(_.char)});var f=l?this.updateFeatures(l.features):this.defaultRenderOptions.features;h.applyFeatures(this,f);for(var p=h.getTextGlyphs(c),g=p.length,m=new Array(g),v=this.glyphs.get(0),y=0;y<g;y+=1)m[y]=this.glyphs.get(p[y])||v;return m},Hr.prototype.nameToGlyphIndex=function(c){return this.glyphNames.nameToGlyphIndex(c)},Hr.prototype.nameToGlyph=function(c){var l=this.nameToGlyphIndex(c),a=this.glyphs.get(l);return a||(a=this.glyphs.get(0)),a},Hr.prototype.glyphIndexToName=function(c){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(c):""},Hr.prototype.getKerningValue=function(c,l){c=c.index||c,l=l.index||l;var a=this.position.defaultKerningTables;return a?this.position.getKerningValue(a,c,l):this.kerningPairs[c+","+l]||0},Hr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Hr.prototype.forEachGlyph=function(c,l,a,h,d,f){l=void 0!==l?l:0,a=void 0!==a?a:0,h=void 0!==h?h:72,d=Object.assign({},this.defaultRenderOptions,d);var m,p=1/this.unitsPerEm*h,g=this.stringToGlyphs(c,d);if(d.kerning){var v=d.script||this.position.getDefaultScriptName();m=this.position.getKerningTables(v,d.language)}for(var y=0;y<g.length;y+=1){var _=g[y];f.call(this,_,l,a,h,d),_.advanceWidth&&(l+=_.advanceWidth*p),d.kerning&&y<g.length-1&&(l+=(m?this.position.getKerningValue(m,_.index,g[y+1].index):this.getKerningValue(_,g[y+1]))*p),d.letterSpacing?l+=d.letterSpacing*h:d.tracking&&(l+=d.tracking/1e3*h)}return l},Hr.prototype.getPath=function(c,l,a,h,d){var f=new wo;return this.forEachGlyph(c,l,a,h,d,function(p,g,m,v){var y=p.getPath(g,m,v,d,this);f.extend(y)}),f},Hr.prototype.getPaths=function(c,l,a,h,d){var f=[];return this.forEachGlyph(c,l,a,h,d,function(p,g,m,v){var y=p.getPath(g,m,v,d,this);f.push(y)}),f},Hr.prototype.getAdvanceWidth=function(c,l,a){return this.forEachGlyph(c,0,0,l,a,function(){})},Hr.prototype.draw=function(c,l,a,h,d,f){this.getPath(l,a,h,d,f).draw(c)},Hr.prototype.drawPoints=function(c,l,a,h,d,f){this.forEachGlyph(l,a,h,d,f,function(p,g,m,v){p.drawPoints(c,g,m,v)})},Hr.prototype.drawMetrics=function(c,l,a,h,d,f){this.forEachGlyph(l,a,h,d,f,function(p,g,m,v){p.drawMetrics(c,g,m,v)})},Hr.prototype.getEnglishName=function(c){var l=this.names[c];if(l)return l.en},Hr.prototype.validate=function(){var c=this;function a(h){var d=c.getEnglishName(h);d&&d.trim()}a("fontFamily"),a("weightName"),a("manufacturer"),a("copyright"),a("version")},Hr.prototype.toTables=function(){return v1t_fontToTable(this)},Hr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Hr.prototype.toArrayBuffer=function(){for(var l=this.toTables().encode(),a=new ArrayBuffer(l.length),h=new Uint8Array(a),d=0;d<l.length;d++)h[d]=l[d];return a},Hr.prototype.download=function(c){var l=this.getEnglishName("fontFamily"),a=this.getEnglishName("fontSubfamily");c=c||l.replace(/\s/g,"")+"-"+a+".otf";var h=this.toArrayBuffer();if(function _1t(){return"undefined"!=typeof window}())if(window.URL=window.URL||window.webkitURL,window.URL){var d=new DataView(h),f=new Blob([d],{type:"font/opentype"}),p=document.createElement("a");p.href=window.URL.createObjectURL(f),p.download=c;var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!1),p.dispatchEvent(g)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var m=require("fs"),v=function b1t(c){for(var l=new Buffer(c.byteLength),a=new Uint8Array(c),h=0;h<l.length;++h)l[h]=a[h];return l}(h);m.writeFileSync(c,v)}},Hr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Hr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Hr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var LCt_parse=function NCt(c,l,a){var h=new Pn.Parser(c,l),d=h.parseULong();Qn.argument(65536===d,"Unsupported fvar table version.");var f=h.parseOffset16();h.skip("uShort",1);for(var p=h.parseUShort(),g=h.parseUShort(),m=h.parseUShort(),v=h.parseUShort(),y=[],_=0;_<p;_++)y.push(ICt(c,l+f+_*g,a));for(var b=[],C=l+f+p*g,x=0;x<m;x++)b.push(RCt(c,C+x*v,y,a));return{axes:y,instances:b}},BCt=function(){return{coverage:this.parsePointer(it.coverage),attachPoints:this.parseList(it.pointer(it.uShortList))}},VCt=function(){var c=this.parseUShort();return Qn.argument(1===c||2===c||3===c,"Unsupported CaretValue table version."),1===c?{coordinate:this.parseShort()}:2===c?{pointindex:this.parseShort()}:3===c?{coordinate:this.parseShort()}:void 0},zCt=function(){return this.parseList(it.pointer(VCt))},UCt=function(){return{coverage:this.parsePointer(it.coverage),ligGlyphs:this.parseList(it.pointer(zCt))}},HCt=function(){return this.parseUShort(),this.parseList(it.pointer(it.coverage))},WCt_parse=function $Ct(c,l){var a=new it(c,l=l||0),h=a.parseVersion(1);Qn.argument(1===h||1.2===h||1.3===h,"Unsupported GDEF table version.");var d={version:h,classDef:a.parsePointer(it.classDef),attachList:a.parsePointer(BCt),ligCaretList:a.parsePointer(UCt),markAttachClassDef:a.parsePointer(it.classDef)};return h>=1.2&&(d.markGlyphSets=a.parsePointer(HCt)),d},Lh=new Array(10);Lh[1]=function(){var l=this.offset+this.relativeOffset,a=this.parseUShort();return 1===a?{posFormat:1,coverage:this.parsePointer(it.coverage),value:this.parseValueRecord()}:2===a?{posFormat:2,coverage:this.parsePointer(it.coverage),values:this.parseValueRecordList()}:void Qn.assert(!1,"0x"+l.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Lh[2]=function(){var l=this.offset+this.relativeOffset,a=this.parseUShort();Qn.assert(1===a||2===a,"0x"+l.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var h=this.parsePointer(it.coverage),d=this.parseUShort(),f=this.parseUShort();if(1===a)return{posFormat:a,coverage:h,valueFormat1:d,valueFormat2:f,pairSets:this.parseList(it.pointer(it.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(d),value2:this.parseValueRecord(f)}})))};if(2===a){var p=this.parsePointer(it.classDef),g=this.parsePointer(it.classDef),m=this.parseUShort(),v=this.parseUShort();return{posFormat:a,coverage:h,valueFormat1:d,valueFormat2:f,classDef1:p,classDef2:g,class1Count:m,class2Count:v,classRecords:this.parseList(m,it.list(v,function(){return{value1:this.parseValueRecord(d),value2:this.parseValueRecord(f)}}))}}},Lh[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Lh[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Lh[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Lh[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Lh[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Lh[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Lh[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var qCt_parse=function GCt(c,l){var a=new it(c,l=l||0),h=a.parseVersion(1);return Qn.argument(1===h||1.1===h,"Unsupported GPOS table version "+h),1===h?{version:h,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(Lh)}:{version:h,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(Lh),variations:a.parseFeatureVariationsList()}},KCt_parse=function YCt(c,l){var a=new Pn.Parser(c,l),h=a.parseUShort();if(0===h)return function ZCt(c){var l={};c.skip("uShort");var a=c.parseUShort();Qn.argument(0===a,"Unsupported kern sub-table version."),c.skip("uShort",2);var h=c.parseUShort();c.skip("uShort",3);for(var d=0;d<h;d+=1){var f=c.parseUShort(),p=c.parseUShort(),g=c.parseShort();l[f+","+p]=g}return l}(a);if(1===h)return function XCt(c){var l={};c.skip("uShort"),c.parseULong()>1&&console.warn("Only the first kern subtable is supported."),c.skip("uLong");var d=255&c.parseUShort();if(c.skip("uShort"),0===d){var f=c.parseUShort();c.skip("uShort",3);for(var p=0;p<f;p+=1){var g=c.parseUShort(),m=c.parseUShort(),v=c.parseShort();l[g+","+m]=v}}return l}(a);throw new Error("Unsupported kern table version ("+h+").")},ext_parse=function JCt(c,l,a,h){for(var d=new Pn.Parser(c,l),f=h?d.parseUShort:d.parseULong,p=[],g=0;g<a+1;g+=1){var m=f.call(d);h&&(m*=2),p.push(m)}return p};function txt(c,l){require("fs").readFile(c,function(h,d){if(h)return l(h.message);l(null,N1e(d))})}function nxt(c,l){var a=new XMLHttpRequest;a.open("get",c,!0),a.responseType="arraybuffer",a.onload=function(){return a.response?l(null,a.response):l("Font could not be loaded: "+a.statusText)},a.onerror=function(){l("Font could not be loaded")},a.send()}function pbe(c,l){for(var a=[],h=12,d=0;d<l;d+=1){var f=Pn.getTag(c,h),p=Pn.getULong(c,h+4),g=Pn.getULong(c,h+8),m=Pn.getULong(c,h+12);a.push({tag:f,checksum:p,offset:g,length:m,compression:!1}),h+=16}return a}function Ls(c,l){if("WOFF"===l.compression){var a=new Uint8Array(c.buffer,l.offset+2,l.compressedLength-2),h=new Uint8Array(l.length);if(function $yt(c,l){var h,f,a=new Lyt(c,l);do{switch(h=zyt(a),jd(a,2,0)){case 0:f=Hyt(a);break;case 1:f=$_e(a,N_e,L_e);break;case 2:Uyt(a,a.ltree,a.dtree),f=$_e(a,a.ltree,a.dtree);break;default:f=-3}if(0!==f)throw new Error("Data error")}while(!h);a.destLen<a.dest.length&&("function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen))}(a,h),h.byteLength!==l.length)throw new Error("Decompression error: "+l.tag+" decompressed length doesn't match recorded length");return{data:new DataView(h.buffer,0),offset:0}}return{data:c,offset:l.offset}}function TW(c,l){l=null==l?{}:l;var a,h,p,d=new Hr({empty:!0}),f=new DataView(c,0),g=[],m=Pn.getTag(f,0);if(m===String.fromCharCode(0,1,0,0)||"true"===m||"typ1"===m)d.outlinesFormat="truetype",g=pbe(f,p=Pn.getUShort(f,4));else if("OTTO"===m)d.outlinesFormat="cff",g=pbe(f,p=Pn.getUShort(f,4));else{if("wOFF"!==m)throw new Error("Unsupported OpenType signature "+m);var v=Pn.getTag(f,4);if(v===String.fromCharCode(0,1,0,0))d.outlinesFormat="truetype";else{if("OTTO"!==v)throw new Error("Unsupported OpenType flavor "+m);d.outlinesFormat="cff"}g=function ixt(c,l){for(var a=[],h=44,d=0;d<l;d+=1){var f=Pn.getTag(c,h),p=Pn.getULong(c,h+4),g=Pn.getULong(c,h+8),m=Pn.getULong(c,h+12);a.push({tag:f,offset:p,compression:g<m&&"WOFF",compressedLength:g,length:m}),h+=20}return a}(f,p=Pn.getUShort(f,12))}for(var y,_,b,C,x,S,w,T,O,k,D,M,A=0;A<p;A+=1){var L=g[A],E=void 0;switch(L.tag){case"cmap":E=Ls(f,L),d.tables.cmap=Y_e_parse(E.data,E.offset),d.encoding=new J_e(d.tables.cmap);break;case"cvt ":E=Ls(f,L),M=new Pn.Parser(E.data,E.offset),d.tables.cvt=M.parseShortList(L.length/2);break;case"fvar":_=L;break;case"fpgm":E=Ls(f,L),M=new Pn.Parser(E.data,E.offset),d.tables.fpgm=M.parseByteList(L.length);break;case"head":E=Ls(f,L),d.tables.head=f1e_parse(E.data,E.offset),d.unitsPerEm=d.tables.head.unitsPerEm,a=d.tables.head.indexToLocFormat;break;case"hhea":E=Ls(f,L),d.tables.hhea=p1e_parse(E.data,E.offset),d.ascender=d.tables.hhea.ascender,d.descender=d.tables.hhea.descender,d.numberOfHMetrics=d.tables.hhea.numberOfHMetrics;break;case"hmtx":w=L;break;case"ltag":E=Ls(f,L),h=m1e_parse(E.data,E.offset);break;case"COLR":E=Ls(f,L),d.tables.colr=k1e_parse(E.data,E.offset);break;case"CPAL":E=Ls(f,L),d.tables.cpal=M1e_parse(E.data,E.offset);break;case"maxp":E=Ls(f,L),d.tables.maxp=v1e_parse(E.data,E.offset),d.numGlyphs=d.tables.maxp.numGlyphs;break;case"name":k=L;break;case"OS/2":E=Ls(f,L),d.tables.os2=hW_parse(E.data,E.offset);break;case"post":E=Ls(f,L),d.tables.post=T1e_parse(E.data,E.offset),d.glyphNames=new sW(d.tables.post);break;case"prep":E=Ls(f,L),M=new Pn.Parser(E.data,E.offset),d.tables.prep=M.parseByteList(L.length);break;case"glyf":b=L;break;case"loca":O=L;break;case"CFF ":y=L;break;case"kern":T=L;break;case"GDEF":C=L;break;case"GPOS":x=L;break;case"GSUB":S=L;break;case"meta":D=L}}var V=Ls(f,k);if(d.tables.name=S1e_parse(V.data,V.offset,h),d.names=d.tables.name,b&&O){var z=0===a,U=Ls(f,O),Z=ext_parse(U.data,U.offset,d.numGlyphs,z),Y=Ls(f,b);d.glyphs=U1e.parse(Y.data,Y.offset,Z,d,l)}else{if(!y)throw new Error("Font doesn't contain TrueType or CFF outlines.");var N=Ls(f,y);d1e_parse(N.data,N.offset,d,l)}var $=Ls(f,w);if(g1e_parse(d,$.data,$.offset,d.numberOfHMetrics,d.numGlyphs,d.glyphs,l),function h_t(c,l){l.lowMemory?function u_t(c){c._IndexToUnicodeMap={};for(var l=c.tables.cmap.glyphIndexMap,a=Object.keys(l),h=0;h<a.length;h+=1){var d=a[h],f=l[d];void 0===c._IndexToUnicodeMap[f]?c._IndexToUnicodeMap[f]={unicodes:[parseInt(d)]}:c._IndexToUnicodeMap[f].unicodes.push(parseInt(d))}}(c):function c_t(c){for(var l,a=c.tables.cmap.glyphIndexMap,h=Object.keys(a),d=0;d<h.length;d+=1){var f=h[d];(l=c.glyphs.get(a[f])).addUnicode(parseInt(f))}for(var g=0;g<c.glyphs.length;g+=1)l=c.glyphs.get(g),c.cffEncoding?l.name=c.isCIDFont?"gid"+g:c.cffEncoding.charset[g]:c.glyphNames.names&&(l.name=c.glyphNames.glyphIndexToName(g))}(c)}(d,l),T){var H=Ls(f,T);d.kerningPairs=KCt_parse(H.data,H.offset)}else d.kerningPairs={};if(C){var G=Ls(f,C);d.tables.gdef=WCt_parse(G.data,G.offset)}if(x){var W=Ls(f,x);d.tables.gpos=qCt_parse(W.data,W.offset),d.position.init()}if(S){var j=Ls(f,S);d.tables.gsub=O1e_parse(j.data,j.offset)}if(_){var Q=Ls(f,_);d.tables.fvar=LCt_parse(Q.data,Q.offset,d.names)}if(D){var J=Ls(f,D);d.tables.meta=D1e_parse(J.data,J.offset),d.metas=d.tables.meta}return d}var oxt=Object.freeze({__proto__:null,Font:Hr,Glyph:Yc,Path:wo,BoundingBox:gp,_parse:Pn,parse:TW,load:function rxt(c,l,a){a=null==a?{}:a;var d="undefined"!=typeof window||a.isUrl?nxt:txt;return new Promise(function(f,p){d(c,function(g,m){if(g){if(l)return l(g);p(g)}var v;try{v=TW(m,a)}catch(y){if(l)return l(y,null);p(y)}if(l)return l(null,v);f(v)})})},loadSync:function sxt(c,l){return TW(N1e(require("fs").readFileSync(c)),l)}});const gbe=oxt;class axt extends n_e{constructor(l){super(l),this.reversed=!1}load(l,a,h,d){const f=this,p=new fp(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(l,function(g){try{a(f.parse(g))}catch(m){d?d(m):console.error(m),f.manager.itemError(l)}},h,d)}parse(l){function h(d){const f=[];let p;d.forEach(function(m){"m"===m.type.toLowerCase()?(p=[m],f.push(p)):"z"!==m.type.toLowerCase()&&p.push(m)});const g=[];return f.forEach(function(m){g.push({type:"m",x:m[m.length-1].x,y:m[m.length-1].y});for(let y=m.length-1;y>0;y--){const _=m[y],b={type:_.type};void 0!==_.x2&&void 0!==_.y2?(b.x1=_.x2,b.y1=_.y2,b.x2=_.x1,b.y2=_.y1):void 0!==_.x1&&void 0!==_.y1&&(b.x1=_.x1,b.y1=_.y1),b.x=m[y-1].x,b.y=m[y-1].y,g.push(b)}}),g}return void 0===gbe?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function a(d,f){const p=Math.round,g={},m=1e5/(72*(d.unitsPerEm||2048)),v=d.encoding.cmap.glyphIndexMap,y=Object.keys(v);for(let _=0;_<y.length;_++){const b=y[_],C=d.glyphs.glyphs[v[b]];if(void 0!==b){const x={ha:p(C.advanceWidth*m),x_min:p(C.xMin*m),x_max:p(C.xMax*m),o:""};f&&(C.path.commands=h(C.path.commands)),C.path.commands.forEach(function(S){"c"===S.type.toLowerCase()&&(S.type="b"),x.o+=S.type.toLowerCase()+" ",void 0!==S.x&&void 0!==S.y&&(x.o+=p(S.x*m)+" "+p(S.y*m)+" "),void 0!==S.x1&&void 0!==S.y1&&(x.o+=p(S.x1*m)+" "+p(S.y1*m)+" "),void 0!==S.x2&&void 0!==S.y2&&(x.o+=p(S.x2*m)+" "+p(S.y2*m)+" ")}),g[String.fromCodePoint(C.unicode)]=x}}return{glyphs:g,familyName:d.getEnglishName("fullName"),ascender:p(d.ascender*m),descender:p(d.descender*m),underlinePosition:d.tables.post.underlinePosition,underlineThickness:d.tables.post.underlineThickness,boundingBox:{xMin:d.tables.head.xMin,xMax:d.tables.head.xMax,yMin:d.tables.head.yMin,yMax:d.tables.head.yMax},resolution:1e3,original_font_information:d.tables.name}}(gbe.parse(l),this.reversed)}}class mbe{constructor(l){this.isFont=!0,this.type="Font",this.data=l}generateShapes(l,a=100){const h=[],d=function lxt(c,l,a){const h=Array.from(c),d=l/a.resolution,f=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*d,p=[];let g=0,m=0;for(let v=0;v<h.length;v++){const y=h[v];if("\n"===y)g=0,m-=f;else{const _=cxt(y,d,g,m,a);g+=_.offsetX,p.push(_.path)}}return p}(l,a,this.data);for(let f=0,p=d.length;f<p;f++)h.push(...d[f].toShapes());return h}}function cxt(c,l,a,h,d){const f=d.glyphs[c]||d.glyphs["?"];if(!f)return void console.error('THREE.Font: character "'+c+'" does not exists in font family '+d.familyName+".");const p=new _yt;let g,m,v,y,_,b,C,x;if(f.o){const S=f._cachedOutline||(f._cachedOutline=f.o.split(" "));for(let w=0,T=S.length;w<T;)switch(S[w++]){case"m":g=S[w++]*l+a,m=S[w++]*l+h,p.moveTo(g,m);break;case"l":g=S[w++]*l+a,m=S[w++]*l+h,p.lineTo(g,m);break;case"q":v=S[w++]*l+a,y=S[w++]*l+h,_=S[w++]*l+a,b=S[w++]*l+h,p.quadraticCurveTo(_,b,v,y);break;case"b":v=S[w++]*l+a,y=S[w++]*l+h,_=S[w++]*l+a,b=S[w++]*l+h,C=S[w++]*l+a,x=S[w++]*l+h,p.bezierCurveTo(_,b,C,x,v,y)}}return{offsetX:f.ha*l,path:p}}class uxt extends wb{constructor(l,a={}){const h=a.font;if(void 0===h)super();else{const d=h.generateShapes(l,a.size);a.depth=void 0!==a.height?a.height:50,void 0===a.bevelThickness&&(a.bevelThickness=10),void 0===a.bevelSize&&(a.bevelSize=8),void 0===a.bevelEnabled&&(a.bevelEnabled=!1),super(d,a)}this.type="TextGeometry"}}var ji=(()=>(function(c){c[c.Left=0]="Left",c[c.Right=1]="Right",c[c.Middle=2]="Middle"}(ji||(ji={})),ji))();class hxt{constructor(){this.scale=1,this.width=100,this.height=100,this.delta=10,this.lineWidth=1,this.lineSizeExtra=1}setWidth(l){return this.width=l,this}setHeight(l){return this.height=l,this}setDelta(l){return this.delta=l,this}clearAll(){return this}}class OW{constructor(l,a){this.name=l,this.vertexes=a}static builder(){return new OW("",null)}setName(l){return this.name=l,this}setVertexes(l){return this.vertexes=l,this}}class dxt{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(l){return 1/(l*(Math.sqrt(5)+1)/2)}toDegrees(l){return l/Math.PI*180}translation(l,a,h){return(new bi).makeTranslation(l,a,h)}zRotation(l,a,h,d){const f=new bi;f.makeRotationZ(l);const p=new bi;p.makeTranslation(a,h,0);const g=new bi;return g.identity(),d&&g.scale(d),g.multiply(f.multiply(p))}extrudeShape(l){const a=new Lye([new re(0,0,-.1),new re(0,0,0)]);return new wb(l,{steps:1,bevelEnabled:!1,extrudePath:a})}extrudePath(l,a,h,d){let f=-a+Math.PI/2,p=[-h,d];const g=[],m=this.zRotation(f,p[0],p[1]);l.forEach(y=>{let b=new ar(y[0],y[1],0,1).applyMatrix4(m);g.push(new mt(b.x,b.y))});const v=new up(g);return this.extrudeShape(v)}createTrost(l,a=0,h=0,d=0,f=0,p=0){let g=l.delta/2/4,m=l.height*(1-h)*.8;return this.extrudePath([[-g,0],[-g,m+3*g],[g,m+3*g],[g,0],[-g,0]],.05*Math.PI,4*-l.delta,-l.height/2)}createKopie(l,a=0,h=0,d=0,f=0,p=0){let g=l.delta/2/4,m=l.height*(1-h)*.8;return this.extrudePath([[-g,0],[-g,m+3*g],[g,m+3*g],[g,0],[-g,0]],-.05*Math.PI,4*+l.delta,-l.height/2)}createTri1(l,a,h=0,d=0,f=0,p=0,g=0){let m=a.delta/2/4,v=a.height*(1-d)*.8;return this.extrudePath([[4*-m/2,+v-2*m],[0,+v+2*m],[4*+m/2,+v-2*m],[4*-m/2,+v-2*m]],180*l/20*1/180*Math.PI,l*-a.delta*4,-a.height/2)}createTri2(l,a,h=0,d=0,f=0,p=0,g=0){let m=a.delta/2/4,v=a.height*(1-d)*.8;return this.extrudePath([[4*-m/2,+v-6*m],[0,+v-2*m],[4*+m/2,+v-6*m],[4*-m/2,+v-6*m]],180*l/20*1/180*Math.PI,l*-a.delta*4,-a.height/2)}createTrostNakonechnik(l,a,h=0,d=0,f=0,p=0,g=0){let m=a.delta/2/4,v=a.height*(1-d)*.8,y=a.delta,_=a.height,b=new up;b.moveTo(0,+v+2*m);let S=.5,w=[[0,+v+2*m],[5*-m*S,+v+2*m],[5*-m,+v+2*m],[5*-m,+v+8*m],[5*-m,+v+16*m],[5*-m*S,+v+16*m],[0,+v+16*m],[5*+m*S,+v+16*m],[5*+m,+v+16*m],[5*+m,+v+8*m],[5*+m,+v+2*m],[5*+m*S,+v+2*m],[0,+v+2*m]],D=-180*l/20*1/180*Math.PI+Math.PI/2,M=[-l*-y*4,-_/2];const L=this.zRotation(D,M[0],M[1]);let E=w.map(V=>{let U=new ar(V[0],V[1],0,1).applyMatrix4(L);return new mt(U.x,U.y)});return b.moveTo(E[0].x,E[0].y),b.bezierCurveTo(E[1].x,E[1].y,E[2].x,E[2].y,E[3].x,E[3].y),b.bezierCurveTo(E[4].x,E[4].y,E[5].x,E[5].y,E[6].x,E[6].y),b.bezierCurveTo(E[7].x,E[7].y,E[8].x,E[8].y,E[9].x,E[9].y),b.bezierCurveTo(E[10].x,E[10].y,E[11].x,E[11].y,E[12].x,E[12].y),this.extrudeShape(b)}createTri3_2(l,a,h=0,d=0,f=0,p=0,g=0){let m=a.delta/2/4,v=a.height*(1-d)*.8;return this.extrudePath([[0,+v+2*m],[5*-m,+v+2*m],[5*-m,+v+16*m],[0,+v+16*m],[5*+m,+v+16*m],[5*+m,+v+2*m],[0,+v+2*m]],180*l/20*1/180*Math.PI,l*-a.delta*4,-a.height/2)}createKopieNakonechnik(l,a,h=0,d=0,f=0,p=0,g=0){let m=a.delta/2/4,v=a.height*(1-d)*.8;return this.extrudePath([[0,+v-2*m],[2*-m,+v+2*m],[0,+v+16*m],[2*+m,+v+2*m],[0,+v-2*m]],180*l/20*1/180*Math.PI,l*-a.delta*4,-a.height/2)}createSkull(l,a,h=0,d=0,f=0,p=0,g=0){let y=a.delta,_=a.height,b=new up,O=0*a.delta/4/2,D=(Nt,Bt)=>Bt*(1.75*a.delta+2*Nt),M=(Nt,Bt)=>Bt*(1.75*a.delta+2*Nt)*.8,Y=.7*D(O,1)/2*.5,N=.7*M(O,1)/2*.5,G=(D(O,1),M(O,1),D(O,1)),W=M(O,1),Q=.275*G,J=.9*G/4,te=N/4*2,ce=Y/4*2,Se=(Nt,Bt,Ke,en,Zt)=>[[Bt/2,0],[Bt-en,0],[Bt,Zt],[Bt,Ke/2],[Bt,Ke-Zt],[Bt-en,Ke],[Bt/2,Ke],[en,Ke],[0,Ke-Zt],[0,Ke/2],[0,Zt],[en,0],[Bt/2,0]].map(Fe=>[Fe[0]+Nt.x,Fe[1]+Nt.y]),Ve=Math.PI/4+Math.PI/2,Je=[G/2,-W/2],Le=this.zRotation(Ve,-Je[0],Je[1],new re(-1,1,1)),tt=this.zRotation(Math.PI/2,0,-_/2-2*y-y/4),st=(Nt=new mt(0,0),Bt=G,Ke=W,en=Y,Zt=N,[[Bt/2,0],[Bt-en,0],[Bt,Zt],[Bt,Ke/2],[Bt,Ke-Zt],[Bt/2+Bt/6+.16*Bt,Ke-Zt],[Bt/2+Bt/6+.16*Bt,Ke],[Bt/2+Bt/6+.16*Bt,Ke+Zt],[Bt/2-Bt/4+.16*Bt,Ke+Zt],[Bt/2-Bt/4+.16*Bt,Ke],[Bt/2-Bt/4+.16*Bt,Ke-Zt],[0,Ke-Zt],[0,Ke/2],[0,Zt],[en,0],[Bt/2,0]].map(Fe=>[Fe[0]+Nt.x,Fe[1]+Nt.y])).map(Nt=>{let en=new ar(Nt[0],Nt[1],0,1).applyMatrix4(Le).applyMatrix4(tt);return new mt(en.x,en.y)});var Nt,Bt,Ke,en,Zt;b.moveTo(st[0].x,st[0].y),b.bezierCurveTo(st[1].x,st[1].y,st[2].x,st[2].y,st[3].x,st[3].y),b.bezierCurveTo(st[4].x,st[4].y,st[5].x,st[5].y,st[6].x,st[6].y),b.bezierCurveTo(st[7].x,st[7].y,st[8].x,st[8].y,st[9].x,st[9].y),b.bezierCurveTo(st[10].x,st[10].y,st[11].x,st[11].y,st[12].x,st[12].y),b.bezierCurveTo(st[13].x,st[13].y,st[14].x,st[14].y,st[15].x,st[15].y);let Ye=Se(new mt(G/2-G/6,W/3),Q,J,ce,te).map(Nt=>{let en=new ar(Nt[0],Nt[1],0,1).applyMatrix4(Le).applyMatrix4(tt);return new mt(en.x,en.y)}),Oe=new yv;Oe.moveTo(Ye[0].x,Ye[0].y),Oe.bezierCurveTo(Ye[1].x,Ye[1].y,Ye[2].x,Ye[2].y,Ye[3].x,Ye[3].y),Oe.bezierCurveTo(Ye[4].x,Ye[4].y,Ye[5].x,Ye[5].y,Ye[6].x,Ye[6].y),Oe.bezierCurveTo(Ye[7].x,Ye[7].y,Ye[8].x,Ye[8].y,Ye[9].x,Ye[9].y),Oe.bezierCurveTo(Ye[10].x,Ye[10].y,Ye[11].x,Ye[11].y,Ye[12].x,Ye[12].y),b.holes.push(Oe);let Ze=Se(new mt(G/2+G/6,W/3),Q,J,ce,te).map(Nt=>{let en=new ar(Nt[0],Nt[1],0,1).applyMatrix4(Le).applyMatrix4(tt);return new mt(en.x,en.y)}),Gt=new yv;Gt.moveTo(Ze[0].x,Ze[0].y),Gt.bezierCurveTo(Ze[1].x,Ze[1].y,Ze[2].x,Ze[2].y,Ze[3].x,Ze[3].y),Gt.bezierCurveTo(Ze[4].x,Ze[4].y,Ze[5].x,Ze[5].y,Ze[6].x,Ze[6].y),Gt.bezierCurveTo(Ze[7].x,Ze[7].y,Ze[8].x,Ze[8].y,Ze[9].x,Ze[9].y),Gt.bezierCurveTo(Ze[10].x,Ze[10].y,Ze[11].x,Ze[11].y,Ze[12].x,Ze[12].y),b.holes.push(Gt);let Gn=G/4*.6,ge=.9*G/4,oe=.2*Gn,lt=.2*ge,xt=((Nt,Bt,Ke,en,Zt)=>[[Bt/2,0],[Bt/2+en,0],[Bt,Ke-Zt],[Bt,Ke],[Bt,Ke+Zt],[0,Ke+Zt],[0,Ke],[0,Ke-Zt],[Bt/2-en,0],[Bt/2,0]].map(Fe=>[Fe[0]+Nt.x,Fe[1]+Nt.y]))(new mt(G/2+2*Q*.16,W/3*2*.9),Gn,ge,oe,lt).map(Nt=>{let en=new ar(Nt[0],Nt[1],0,1).applyMatrix4(Le).applyMatrix4(tt);return new mt(en.x,en.y)}),Qt=new yv;return Qt.moveTo(xt[0].x,xt[0].y),Qt.bezierCurveTo(xt[1].x,xt[1].y,xt[2].x,xt[2].y,xt[3].x,xt[3].y),Qt.bezierCurveTo(xt[4].x,xt[4].y,xt[5].x,xt[5].y,xt[6].x,xt[6].y),Qt.bezierCurveTo(xt[7].x,xt[7].y,xt[8].x,xt[8].y,xt[9].x,xt[9].y),b.holes.push(Qt),this.extrudeShape(b)}createCrossParts(l,a=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0){let _=[],C=h,x=d||l.width,S=f||l.height,w=l.delta/l.width*x,T=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),O=x*(p||T),k=y||Math.atan2(1-T,.5),D=O*(g||1-T),M=O*(m||1-T),A=O*(m||.25),L=v?S*v+A*Math.tan(k):S-O/2,E=kb.builder(),V=(Z,Y,N,$,H,G)=>{E.addPlaneXY(Y,N,$,H,G),_.push(OW.builder().setVertexes(E).setName(Z)),E=kb.builder()};V("\u043a\u0440\u0435\u0441\u0442",new re(-w/2,S/2,0),w,S),V("\u043a\u0440\u0435\u0441\u0442",new re(-O/2,S/2-(D-w/2),0),O,w),V("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439",new re(-M/2,S/2-(C+(g?(O*(g||1-T)-w/2)/2:O*Math.pow(1-T,2))-w/2),0),M,w),V("\u043a\u0440\u0435\u0441\u0442",new re(-A/2,S/2-(L-A/Math.cos(k)/2)-w,0),A,w/Math.cos(k),0,k);let z=.55*l.width,U=1.5/l.width;return V("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new re(-z/2,-l.height/2+U,0),z,l.delta+U),V("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new re(-z/2-l.delta/2*3,-l.height/2-l.delta+U,0),2.5*l.delta,l.delta+U),V("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new re(+z/2-l.delta,-l.height/2-l.delta+U,0),2.5*l.delta,l.delta+U),V("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new re(-z/2-l.delta/2*3,-l.height/2-2*l.delta+U,0),l.delta,l.delta+U),V("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new re(+z/2+l.delta/2,-l.height/2-2*l.delta+U,0),l.delta,l.delta+U),_}createCross(l,a=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0){let _=kb.builder();return _.vertexes=this.createCrossParts(l,a,h,d,f,p,g,m,v,y).flatMap(b=>b.vertexes.vertexes),_}createConfig(){return new hxt}createTextDirect(l,a,h,d,f){let C=new uxt(a,{font:l,size:h,height:h/10,curveSegments:4,bevelThickness:h/100,bevelSize:h/100,bevelEnabled:!1});C.computeBoundingBox(),C.computeVertexNormals();let x=0;switch(f){case ji.Left:x=0;break;case ji.Right:x=-(C.boundingBox.max.x-C.boundingBox.min.x);break;case ji.Middle:x=-.5*(C.boundingBox.max.x-C.boundingBox.min.x)}const S=new oo({color:16777215,transparent:!0});let w=new sr(C,S);return w.position.x=d.x-C.boundingBox.min.x+x,w.position.y=d.y,w.position.z=d.z,w.rotation.x=0,w.rotation.y=0,w}createText(l,a,h,d=0,f=0,p=0,g=0,m=0,v=0,y=0,_=0,b=0){let C=(Se,_e,Me="",Qe=1,Ie=0,Ve=0)=>{l(Se,_e,Me,Qe,Ie,Ve)},x=p||h.width,S=g||h.height,w=h.delta/h.width*x,T=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),O=x*(m||T),k=b||Math.atan2(1-T,.5),D=O*(v||1-T),M=O*(y||1-T),A=O*(y||.25),L=_?S*_+A*Math.tan(k):S-O/2,E=0,V=S/2+4*w,z=this.createTextDirect(a,"\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b",w,new re(E,V,0),ji.Middle),U=this.createTextDirect(a,"\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441",w,new re(E,V,0),ji.Middle),Z=this.createTextDirect(a,"\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439",w,new re(E,V,0),ji.Middle),Y=this.createTextDirect(a,"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c",w,new re(E,V,0),ji.Middle),N=this.createTextDirect(a,"\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",w,new re(E,V,0),ji.Middle),$=this.createTextDirect(a,"\u043a\u043e\u043f\u0438\u0435",w,new re(E,V,0),ji.Middle),H=this.createTextDirect(a,"\u0442\u0440\u043e\u0441\u0442\u044c",w,new re(E,V,0),ji.Middle),G=this.createTextDirect(a,"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430",w,new re(E,V,0),ji.Middle),W=this.createTextDirect(a,"\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435",w,new re(E,V,0),ji.Middle),j=this.createTextDirect(a,"\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c",w,new re(E,V,0),ji.Middle);E=-M/2,V=S/2+w,C(this.createTextDirect(a,"\u0446\u0440\u0483\u044c",w,new re(E,V,0),ji.Right),z),C(this.createTextDirect(a,"\u0441\u043b\u0483\u0432\u044b",w,new re(E+M,V,0),ji.Left),z),E=-O/2,V=S/2-(D-w/2)+w/2,C(this.createTextDirect(a,"\u0406\u0421",w,new re(E,V,0),ji.Left),U),C(this.createTextDirect(a,"\u0483",w,new re(E+.2*w,V+.6*w,0),ji.Left),U),C(this.createTextDirect(a,"\u0425\u0421",w,new re(E+O,V,0),ji.Right),U),C(this.createTextDirect(a,"\u0483",w,new re(E+O-1.1*w,V+.6*w,0),ji.Left),U),V-=3*w,C(this.createTextDirect(a,"\u0441\u043d\u0483\u044a",w,new re(E,V,0),ji.Middle),Z),C(this.createTextDirect(a,"\u0431\u0436\u0483\u0457\u0439",w,new re(E+O,V,0),ji.Middle),Z),E=-w/2,V=(S/2-(L-A/Math.cos(k)/2)-w+S/2-(D-w/2)+w/2)/2-w/2,C(this.createTextDirect(a,"\u043d\u0438",w,new re(E-w/2,V,0),ji.Right),Y),C(this.createTextDirect(a,"\u043a\u0430",w,new re(E+w+.3*w,V,0),ji.Left),Y);let Q=.55*h.width,J=h.delta,te=J/2*3/2;E=-Q/2,V=-h.height/2,C(this.createTextDirect(a,"\u0433",w,new re(E-te,V,0),ji.Middle),N),C(this.createTextDirect(a,"\u0433",w,new re(E+te+Q,V,0),ji.Middle),N),V=.3*-(D-w/2),C(this.createTextDirect(a,"\u043a",w,new re(E-te,V,0),ji.Middle),$),C(this.createTextDirect(a,"\u0442",w,new re(E+te+Q,V,0),ji.Middle),H),E=-Q/2*.5,V=-h.height/2-2.5*J,C(this.createTextDirect(a,"\u0433",w,new re(E,V,0),ji.Middle),G),E=Q/2*.5,C(this.createTextDirect(a,"\u0430",w,new re(E,V,0),ji.Middle),G);let ce=S/2-(L+A*Math.tan(k)/2+h.delta/Math.cos(k)/2),ae=S/2-(h.height+L+A*Math.tan(k)/2+h.delta/Math.cos(k)/2)/2;E=-Q/2*.5,V=ce-w/2,C(this.createTextDirect(a,"\u043c",w,new re(E,V,0),ji.Middle),W),E=Q/2*.5,C(this.createTextDirect(a,"\u043b",w,new re(E,V,0),ji.Middle),W),E=-Q/2*.5,V=ae-w/2,C(this.createTextDirect(a,"\u0440",w,new re(E,V,0),ji.Middle),j),E=Q/2*.5,C(this.createTextDirect(a,"\u0431",w,new re(E,V,0),ji.Middle),j)}createLeftArrow(l,a,h,d){return this.extrudePath([[a.x,a.y],[a.x,a.y-d],[a.x+l*h,a.y-d/2],[a.x,a.y]],0,0,0)}createRect(l,a,h,d){return this.extrudePath([[a.x,a.y],[a.x,a.y-d],[a.x+l*h,a.y-d],[a.x+l*h,a.y],[a.x,a.y]],0,0,0)}}class fxt{constructor(l,a={}){this.enabled=!0;const h=void 0!==a.defaultThickness?a.defaultThickness:.003,d=(new hn).fromArray(void 0!==a.defaultColor?a.defaultColor:[0,0,0]),p=void 0!==a.defaultKeepAlive&&a.defaultKeepAlive,g={},v={},y={},_={outlineThickness:{value:h},outlineColor:{value:d},outlineAlpha:{value:void 0!==a.defaultAlpha?a.defaultAlpha:1}},b=["#include <common>","#include <uv_pars_vertex>","#include <displacementmap_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 normal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + normal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}","void main() {","\t#include <uv_vertex>","\t#include <beginnormal_vertex>","\t#include <morphnormal_vertex>","\t#include <skinbase_vertex>","\t#include <skinnormal_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <displacementmap_vertex>","\t#include <project_vertex>","\tvec3 outlineNormal = - objectNormal;","\tgl_Position = calculateOutline( gl_Position, outlineNormal, vec4( transformed, 1.0 ) );","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\t#include <fog_vertex>","}"].join("\n"),C=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\t#include <clipping_planes_fragment>","\t#include <logdepthbuf_fragment>","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","\t#include <premultiplied_alpha_fragment>","}"].join("\n");function w(E){const V=function S(E){let V=g[E.uuid];return void 0===V&&(V={material:new qa({type:"OutlineEffect",uniforms:w3.merge([un.fog,un.displacementmap,_]),vertexShader:b,fragmentShader:C,side:1}),used:!0,keepAlive:p,count:0},g[E.uuid]=V),V.used=!0,V.material}(E);return v[V.uuid]=E,function A(E,V){if("invisible"===E.name)return;const z=V.userData.outlineParameters;E.fog=V.fog,E.toneMapped=V.toneMapped,E.premultipliedAlpha=V.premultipliedAlpha,E.displacementMap=V.displacementMap,void 0!==z?(E.visible=!1!==V.visible&&(void 0===z.visible||z.visible),E.transparent=void 0!==z.alpha&&z.alpha<1||V.transparent,void 0!==z.keepAlive&&(g[V.uuid].keepAlive=z.keepAlive)):(E.transparent=V.transparent,E.visible=V.visible),(!0===V.wireframe||!1===V.depthTest)&&(E.visible=!1),V.clippingPlanes&&(E.clipping=!0,E.clippingPlanes=V.clippingPlanes,E.clipIntersection=V.clipIntersection,E.clipShadows=V.clipShadows),E.version=V.version}(V,E),V}function T(E){const V=E.geometry;let z=!1;return void 0!==E.geometry&&(z=!V.isBufferGeometry||void 0!==V.attributes.normal),!0===E.isMesh&&void 0!==E.material&&!0===z}function O(E){if(!1!==T(E)){if(Array.isArray(E.material))for(let V=0,z=E.material.length;V<z;V++)E.material[V]=w(E.material[V]);else E.material=w(E.material);y[E.uuid]=E.onBeforeRender,E.onBeforeRender=D}}function k(E){if(!1!==T(E)){if(Array.isArray(E.material))for(let V=0,z=E.material.length;V<z;V++)E.material[V]=v[E.material[V].uuid];else E.material=v[E.material.uuid];E.onBeforeRender=y[E.uuid]}}function D(E,V,z,U,Z){const Y=v[Z.uuid];void 0!==Y&&function M(E,V){const z=V.userData.outlineParameters;E.uniforms.outlineAlpha.value=V.opacity,void 0!==z&&(void 0!==z.thickness&&(E.uniforms.outlineThickness.value=z.thickness),void 0!==z.color&&E.uniforms.outlineColor.value.fromArray(z.color),void 0!==z.alpha&&(E.uniforms.outlineAlpha.value=z.alpha)),V.displacementMap&&(E.uniforms.displacementMap.value=V.displacementMap,E.uniforms.displacementScale.value=V.displacementScale,E.uniforms.displacementBias.value=V.displacementBias)}(Z,Y)}this.render=function(E,V){let z,U=!1;if(void 0!==arguments[2]&&(console.warn("THREE.OutlineEffect.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),z=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.OutlineEffect.render(): the forceClear argument has been removed. Use .clear() instead."),U=arguments[3]),void 0!==z&&l.setRenderTarget(z),U&&l.clear(),!1===this.enabled)return void l.render(E,V);const Z=l.autoClear;l.autoClear=this.autoClear,l.render(E,V),l.autoClear=Z,this.renderOutline(E,V)},this.renderOutline=function(E,V){const z=l.autoClear,U=E.autoUpdate,Z=E.background,Y=l.shadowMap.enabled;E.autoUpdate=!1,E.background=null,l.autoClear=!1,l.shadowMap.enabled=!1,E.traverse(O),l.render(E,V),E.traverse(k),function L(){let E;E=Object.keys(v);for(let V=0,z=E.length;V<z;V++)v[E[V]]=void 0;E=Object.keys(y);for(let V=0,z=E.length;V<z;V++)y[E[V]]=void 0;E=Object.keys(g);for(let V=0,z=E.length;V<z;V++){const U=E[V];!1===g[U].used?(g[U].count++,!1===g[U].keepAlive&&g[U].count>60&&delete g[U]):(g[U].used=!1,g[U].count=0)}}(),E.autoUpdate=U,E.background=Z,l.autoClear=z,l.shadowMap.enabled=Y},this.autoClear=l.autoClear,this.domElement=l.domElement,this.shadowMap=l.shadowMap,this.clear=function(E,V,z){l.clear(E,V,z)},this.getPixelRatio=function(){return l.getPixelRatio()},this.setPixelRatio=function(E){l.setPixelRatio(E)},this.getSize=function(E){return l.getSize(E)},this.setSize=function(E,V,z){l.setSize(E,V,z)},this.setViewport=function(E,V,z,U){l.setViewport(E,V,z,U)},this.setScissor=function(E,V,z,U){l.setScissor(E,V,z,U)},this.setScissorTest=function(E){l.setScissorTest(E)},this.setRenderTarget=function(E){l.setRenderTarget(E)}}}class E4{constructor(l,a){this.names=l,this.selected=a}static builder(){return new E4([],"")}setNames(l){return this.names=l,this}setSelected(l){return this.selected=l,this}}class DW{constructor(l,a,h="",d=1,f=0,p=0){this.meshText=l,this.mesh=a,this.infoText=h,this.d=d,this.x=f,this.y=p}static builder(){return new DW(null,null)}setMeshText(l){return this.meshText=l,this}setMesh(l){return this.mesh=l,this}setInfoText(l){return this.infoText=l,this}setD(l){return this.d=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}}class A4{constructor(l,a,h,d){this.mesh=l,this.meshVisible=a,this.action=h,this.update=d}static builder(){return new A4(null,null,()=>{},()=>{})}setMesh(l){return this.mesh=l,this}setMeshVisible(l){return this.meshVisible=l,this}setAction(l){return this.action=l,this}setUpdate(l){return this.update=l,this}runAction(){return this.action(this),this}runUpdate(){return this.update(this),this}}let pxt=(()=>{class c extends W2{constructor(){super(...arguments),this.modelGenerator=new dxt,this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.logoMeshes=[],this.crossMeshes=[],this.cube=null,this.group=null,this.font=null,this.infoDelayed=[],this.frameId=null,this.config=null,this.raycaster=null,this.id2Mesh=new Map,this.infoObject=null,this.infoStartTime=0,this.infoAlphaTime=0,this.infoAlpha=0,this.infoAlphaIncrement=.001,this.infoAlphaFadeOutTime=5e3,this.effect=null,this.toonMaterial=null,this.particleLight=null,this.menuTextScaleTime=0,this.menuTextScale=1,this.menuTextScaleSpeed=.001,this.menuTextMesh=null,this.menuTextMeshes=[],this.menuTextMeshesUnderline=[],this.meshActions=[]}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}getFovInRadians(a,h){let p=15/a;return p<22&&(p=22),2*Math.atan2(p/2,h)}init(a){this.renderer=a,this.recreate()}recreate(){if(!this.renderer)return;this.menuTextMesh=null,this.menuTextMeshes=[],this.menuTextMeshesUnderline=[];let a=this.canvasWidth,h=this.canvasHeight;this.renderer.setSize(a,h),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=Rs,this.scene=new k2;let f=this.getFovInRadians(a/h,15);this.camera=new xo(f/Math.PI*180,a/h,.1,1e3),this.camera.position.z=15,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.light=new o4(16777215),this.light.position.z=10,this.scene.add(this.light),this.particleLight=new sr(new Sb(1,8,8),new oo({color:16746632})),new l_e(16777215,2,50);const g=this.renderer.capabilities.isWebGL2?1028:1024,_=(new hn).setHSL(34/255,23/255,240/255),C=new Uint8Array(4);for(let S=0;S<=C.length;S++)C[S]=S/C.length*256;const x=new bb(C,C.length,1,g);x.needsUpdate=!0,this.toonMaterial=new Kye({color:_,gradientMap:x}),this.effect=new fxt(this.renderer,{defaultThickness:.005}),this.createCrossMeshes().forEach((S,w)=>{0==w&&(this.cube=S),this.scene.add(S),this.crossMeshes.push(S)}),this.getLogoText()&&this.scene.remove(...this.crossMeshes),this.createMenuMeshes().forEach((S,w)=>{this.scene.add(S)}),this.group=new pb,this.group.position.y=0,this.scene.add(this.group),this.font=this.appParamProvider(c.font3dParamName).font,this.font?this.onFontLoaded():(new axt).load("./fonts/PonomarUnicode.ttf",w=>{this.appParamProvider(c.font3dParamName).font=this.font=new mbe(w),this.onFontLoaded()}),this.raycaster=new vyt}onFontLoaded(){!this.font||this.config&&(this.modelGenerator.createText((a,h,d="",f=1,p=0,g=0)=>this.pushInfo(a,h,d,f,p,g),this.font,this.config,0,0,0,0,1,1-.8,.27,.6,Math.PI/8),this.createMenuText(),this.runPushInfoDelayed(),this.calculateMenuArrows(),this.recreateLogoText())}onMouseMove(a){}onMouseClick(a){this.onMouseClickDIrect(a)}onMouseClickDIrect(a){if(!this.raycaster)return;const h=new mt(this.incrementX(a.clientX)/this.canvasWidth*2-1,-this.incrementY(a.clientY)/this.canvasHeight*2+1);this.raycaster.setFromCamera(h,this.camera);let d=[];this.id2Mesh.forEach((y,_,b)=>{d.push(y)});let f=this.scene.children.filter(y=>this.id2Mesh.has(y.uuid));const p=this.raycaster.intersectObjects(f,!1);let g="",m=!1;if(p.length>0){let y=p[0].object;m="\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"==y.userData.text,g=y.uuid}let v=this.meshActions.find(y=>{var _;return(null===(_=y.mesh)||void 0===_?void 0:_.uuid)==g});if(m)this.runMenuItemAction();else if(v)v.runAction();else if(g){let y=p[0].object;y.material.wireframe=!y.material.wireframe,y.material.opacity=this.infoAlpha=0;const _=new Date;this.infoStartTime=this.infoAlphaTime=_.getTime(),this.id2Mesh.forEach((b,C,x)=>{b.visible=!1}),this.id2Mesh.forEach((b,C,x)=>{C==g&&(b.visible=!0,this.infoObject=b)})}}onResize(){const a=this.canvasWidth,h=this.canvasHeight;this.camera.aspect=a/h,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,h)}render(){if(this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.fov=180/Math.PI*this.getFovInRadians(this.canvasWidth/this.canvasHeight,this.camera.position.z)),this.group&&this.cube&&(this.group.rotation.y=this.cube.rotation.y),this.infoObject){let d=this.infoObject;const f=new Date;let p=this.infoAlphaTime?f.getTime()-this.infoAlphaTime:0;this.infoAlphaTime=f.getTime(),this.infoAlpha+=p*this.infoAlphaIncrement*(this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime?-1:1),this.infoAlpha<0&&(this.infoAlpha=0),this.infoAlpha>1&&(this.infoAlpha=1),d.material.opacity=this.infoAlpha,this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime&&0==this.infoAlpha&&(this.infoObject.visible=!1,this.infoObject=null)}this.calculateMenuTextScale();const a=25e-5*Date.now();this.particleLight.position.x=13*Math.sin(7*a)/2,this.particleLight.position.y=14*Math.cos(5*a)/2,this.particleLight.position.z=13*Math.cos(3*a)/2,this.effect?this.effect.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera)}getMenuItems(){let a=this.getParam("\u043f\u0443\u043d\u043a\u0442\u044b");return null==a&&(a=E4.builder().setNames(["\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a","\u041a\u043d\u0438\u0433\u0438","\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D"]).setSelected("")),a}getLogoText(){var a;let h=null===(a=this.menuTextMesh)||void 0===a?void 0:a.userData.text;if(!h){let d=this.getMenuItems();h=d.selected,!h&&d.names.length>0&&(h=d.names[0])}return this.appLogoTextProvider(h||"")}recreateLogoText(){var a,h,d;null===(a=this.scene)||void 0===a||a.remove(...this.logoMeshes),this.logoMeshes=[],this.getLogoText()?(this.getLogoText()&&(null===(d=this.scene)||void 0===d||d.remove(...this.crossMeshes)),this.createLogoText()):null===(h=this.scene)||void 0===h||h.add(...this.crossMeshes)}createLogoText(){let h=this.getLogoText().split("|"),f=10/3,p=this.addLogoText(h[0],0,f);this.addLogoText(h[1],0,f-1.5*p),((y,_,b=!0)=>{var C;const x=this.toonMaterial?this.toonMaterial:new oo({color:16777215});let S=new sr(y,x);y.computeBoundingBox(),null===(C=this.scene)||void 0===C||C.add(S),this.logoMeshes.push(S),S.visible=b,S.userData={material:x,text:_}})(this.modelGenerator.createRect(1,new re(-5,f-p+.25,0),10,.5),"\u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043b\u0438\u043d\u0438\u044f",!0)}createMenuText(){let a=this.getMenuItems();a.names.forEach((h,d,f)=>this.addMenuText(h,h==a.selected||!!a.selected&&!this.menuTextMesh&&d+1==f.length||!a.selected&&0==d))}addLogoText(a,h,d){var f;let g=2.5,m=this.modelGenerator.createTextDirect(this.font,a,g,new re(h,d-g/2,0),ji.Middle);if(m.geometry.boundingBox){let v=m.geometry.boundingBox.max.x-m.geometry.boundingBox.min.x;if(v>10){let y=10/v;m.scale.set(y,y,y),g*=y,m.position.set(h-v*y/2,d-g/2,0)}}return null===(f=this.scene)||void 0===f||f.add(m),this.logoMeshes.push(m),m.visible=!0,m.userData={text:a},g}addMenuText(a,h){var d;let O=this.modelGenerator.createTextDirect(this.font,a,2.4,new re(0,-10.066666666666666,0),ji.Middle);null===(d=this.scene)||void 0===d||d.add(O),this.menuTextMeshes.push(O),O.visible=!1,O.userData={text:a},!this.menuTextMesh&&h&&(this.menuTextMesh=O,this.menuTextMesh.visible=!0)}calculateMenuTextScale(){if(!this.menuTextMesh)return;let y=.26666666666666666,C=(new Date).getTime(),x=this.menuTextScaleTime?C-this.menuTextScaleTime:0;if(this.menuTextScaleTime=C,this.menuTextMesh.geometry.boundingBox){let S=this.menuTextMesh.geometry.boundingBox.max.x-this.menuTextMesh.geometry.boundingBox.min.x;if(S>10-2*y){let w=(10-2*y)/S,T=w-this.menuTextScale,O=x*this.menuTextScaleSpeed*(T<0?-1:1);Math.abs(T)<Math.abs(O)?this.menuTextScale=w:this.menuTextScale+=O}else{let T=2.4/(this.menuTextMesh.geometry.boundingBox.max.y-this.menuTextMesh.geometry.boundingBox.min.y),O=T-this.menuTextScale,k=x*this.menuTextScaleSpeed*(O<0?-1:1);Math.abs(O)<Math.abs(k)?this.menuTextScale=T:this.menuTextScale+=k}this.menuTextMesh.position.x=(-S/2-this.menuTextMesh.geometry.boundingBox.min.x)*this.menuTextScale,this.menuTextMesh.position.y=-9.666666666666666}this.menuTextMesh.scale.set(this.menuTextScale,this.menuTextScale,this.menuTextScale)}createMenuMeshes(){let h=10/15,m=0,v=-5-4*h,y=2*h,_=4*h,b=[];const x=new oo({color:16777215,wireframe:!0});let S=(O,k,D=!0)=>{const M=this.toonMaterial?this.toonMaterial:new oo({color:16777215});let A=new sr(O,M);return O.computeBoundingBox(),b.push(A),A.visible=D,A.userData={material:M,materialWireframe:x,text:k},this.pushInfoDelayed(A,null,k,h,0,7.666666666666666),A};m=-5,S(this.modelGenerator.createRect(1,new re(m,v,0),10,_),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e",!1);let w=_/10,T=_/10;return this.getMenuItems().names.forEach((O,k,D)=>{let A=(10-w)/D.length;this.menuTextMeshesUnderline.push(S(this.modelGenerator.createRect(1,new re(m+A*k+w,v-_+T,0),A-w,T),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"))}),S(this.modelGenerator.createLeftArrow(-1,new re(m,v,0),y,_),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"),m=5,S(this.modelGenerator.createLeftArrow(1,new re(m,v,0),y,_),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"),b}createCrossMeshes(){let h=10/15,d=this.modelGenerator.createConfig().setWidth(10).setHeight(10).setDelta(h);this.config=d;let m=5+4*h;new oo({color:0,wireframe:!0,transparent:!0});let _=this.modelGenerator.createCrossParts(d,0,0,0,0,1,1-.8,.27,.6,Math.PI/8).map(C=>{const x=new Fi;x.setAttribute("position",new Fs(new Float32Array(C.vertexes.toPlainArray()),3)),x.setAttribute("normal",new Fs(new Float32Array(C.vertexes.toPlainArray(pp.Normals)),3)),x.setAttribute("uv",new Fs(new Float32Array(C.vertexes.toPlainArray(pp.UV)),2)),x.computeBoundingBox();const S=this.toonMaterial?this.toonMaterial:new oo({color:16777215}),w=new sr(x,S);return this.pushInfoDelayed(w,null,C.name,h,0,m),w}),b=(C,x)=>{const S=this.toonMaterial?this.toonMaterial:new oo({color:16777215});let w=new sr(C,S);C.computeBoundingBox(),_.push(w),this.pushInfoDelayed(w,null,x,h,0,m)};return b(this.modelGenerator.createTrost(d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createTri1(1,d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createTri2(1,d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createKopie(d,-1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createTri1(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createTri2(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createTrostNakonechnik(1,d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createKopieNakonechnik(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createSkull(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430"),_}pushInfoDelayed(a,h,d="",f=1,p=0,g=0){this.infoDelayed.push(DW.builder().setMeshText(a).setMesh(h).setInfoText(d).setD(f).setX(p).setY(g))}runPushInfoDelayed(){this.infoDelayed.forEach(a=>{a.meshText&&this.pushInfo(a.meshText,a.mesh,a.infoText,a.d,a.x,a.y)}),this.infoDelayed=[]}pushInfo(a,h,d="",f=1,p=0,g=0){var m,v,y;if(d&&(h=this.modelGenerator.createTextDirect(this.font,d,f,new re(p,g,0),ji.Middle)),!h)return;d||(null===(m=this.scene)||void 0===m||m.add(a),this.crossMeshes.push(a)),h.visible=!1,null===(v=this.scene)||void 0===v||v.add(h),this.crossMeshes.push(h);let _=a.geometry.boundingBox,b=kb.builder();b.addPlaneXY(new re(_.min.x,_.max.y,_.min.z),_.max.x-_.min.x,_.max.y-_.min.y);let C=new Fi;C.setAttribute("position",new Fs(new Float32Array(b.toPlainArray()),3));const x=new oo({color:16777215,wireframe:!1});let S=new sr(C,x);null===(y=this.scene)||void 0===y||y.add(S),S.position.add(a.position),S.visible=!1,S.userData={text:d},this.id2Mesh.set(S.uuid,h),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"==d&&this.meshActions.push(A4.builder().setMesh(S).setMeshVisible(a).setAction(()=>this.onPrevMenu()).setUpdate(T=>{if(this.menuTextMesh){let O=this.menuTextMeshes.indexOf(this.menuTextMesh);T.meshVisible&&(T.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(0==O,T.meshVisible))}})),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"==d&&this.meshActions.push(A4.builder().setMesh(S).setMeshVisible(a).setAction(()=>this.onNextMenu()).setUpdate(T=>{if(this.menuTextMesh){let O=this.menuTextMeshes.indexOf(this.menuTextMesh);T.meshVisible&&(T.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(O+1==this.menuTextMeshes.length,T.meshVisible))}}))}setMeshMaterial(a,h){a?h.material=h.userData.materialWireframe:h&&(h.material=h.userData.material)}calculateMenuArrows(){let a=this.menuTextMeshes.indexOf(this.menuTextMesh);this.menuTextMeshesUnderline.forEach((h,d)=>{this.setMeshMaterial(d!=a,h)}),this.meshActions.forEach(h=>h.runUpdate())}onPrevMenu(){let a=this.menuTextMeshes.indexOf(this.menuTextMesh);a>0&&(--a,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[a],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}onNextMenu(){let a=this.menuTextMeshes.indexOf(this.menuTextMesh);a+1<this.menuTextMeshes.length&&(++a,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[a],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}runMenuItemAction(){var a;let h=null===(a=this.menuTextMesh)||void 0===a?void 0:a.userData.text;this.runAction(h)}}return c.font3dParamName="font3d",c})(),kW=(()=>{class c{constructor(a,h,d){this.uiConfig=a,this.config=h,this.router=d}onLoginCommand(a){let h=a;this.config.setShowNormal(),this.config.defaultApplication=h.id,this.uiConfig.ui.lastLoginApp.setStringValue(h.id);let d=pageRequestedRoute||this.uiConfig.ui.defaultAppRoute.getStringValue();pageRequestedRoute="",h.routes.find(f=>f.link==d)||(d=h.routes[0].link),this.uiConfig.ui.defaultAppRoute.setStringValue(d),this.uiConfig.setAppRoutes(null),this.router.navigate([d])}autoLogin(){let a=pageRequestedApp||this.uiConfig.ui.lastLoginApp.getStringValue(),h=this.config.environment.applications.filter(f=>f.applicationEnabled);if(!a&&1!=h.length)return;let d=null;h.forEach((f,p,g)=>{f.id==a&&(d=f)}),null==d&&1==h.length&&h.forEach((f,p,g)=>{d=f}),pageRequestedApp="",null!=d&&this.onLoginCommand(d)}}return c.\u0275fac=function(a){return new(a||c)(Ae(ti),Ae(on),Ae(ts))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const gxt=["myCanvas"];function mxt(c,l){if(1&c){const a=at();I(0,"button",6),ee("click",function(){return De(a),ke(q(2).routeToV1())}),ie(1,"v1"),F()}}function vxt(c,l){if(1&c){const a=at();I(0,"div",4),X(1,mxt,2,0,"button",5),I(2,"button",6),ee("click",function(){return De(a),ke(q().routeToLogo())}),ie(3,"2D"),F()()}if(2&c){const a=q();P(1),R("ngIf",a.config.showOldVersions)}}class MW extends W2{constructor(l,a,h){super(),this.scene=l,this.initialized=a,this.name=h}static builder(){return new MW(null,!1,"")}setScene(l){return this.scene=l,this}setInitialized(l){return this.initialized=l,this}setName(l){return this.name=l,this}get canvasWidth(){return this.scene?this.scene.canvasWidth:this.iCanvasWidth}get canvasHeight(){return this.scene?this.scene.canvasHeight:this.iCanvasHeight}get canvasPercentage(){return this.scene?this.scene.canvasPercentage:this.iPercentage}setWidthPixelIncrement(l){var a;return null===(a=this.scene)||void 0===a||a.setWidthPixelIncrement(l),super.setWidthPixelIncrement(l)}setHeightPixelIncrement(l){var a;return null===(a=this.scene)||void 0===a||a.setHeightPixelIncrement(l),super.setHeightPixelIncrement(l)}setXPixelIncrement(l){var a;return null===(a=this.scene)||void 0===a||a.setXPixelIncrement(l),super.setXPixelIncrement(l)}setYPixelIncrement(l){var a;return null===(a=this.scene)||void 0===a||a.setYPixelIncrement(l),super.setYPixelIncrement(l)}setCanvasWidth(l){var a;return null===(a=this.scene)||void 0===a||a.setCanvasWidth(l),super.setCanvasWidth(l)}setCanvasHeight(l){var a;return null===(a=this.scene)||void 0===a||a.setCanvasHeight(l),super.setCanvasHeight(l)}setPercentage(l){var a;return null===(a=this.scene)||void 0===a||a.setPercentage(l),super.setPercentage(l)}setLight(l){var a;return null===(a=this.scene)||void 0===a||a.setLight(l),super.setLight(l)}setActionHandler(l){var a;return null===(a=this.scene)||void 0===a||a.setActionHandler(l),super.setActionHandler(l)}setParam(l,a){var h;return null===(h=this.scene)||void 0===h||h.setParam(l,a),super.setParam(l,a)}setAppLogoTextProvider(l){var a;return null===(a=this.scene)||void 0===a||a.setAppLogoTextProvider(l),super.setAppLogoTextProvider(l)}setAppParamProvider(l){var a;return null===(a=this.scene)||void 0===a||a.setAppParamProvider(l),super.setAppParamProvider(l)}dispose(){var l;this.initialized&&(null===(l=this.scene)||void 0===l||l.dispose(),this.initialized=!1)}init(l){var a;null===(a=this.scene)||void 0===a||a.init(l),this.initialized=!0}onMouseMove(l){var a;this.initialized&&(null===(a=this.scene)||void 0===a||a.onMouseMove(l))}onMouseClick(l){var a;this.initialized&&(null===(a=this.scene)||void 0===a||a.onMouseClick(l))}onResize(){var l;this.initialized&&(null===(l=this.scene)||void 0===l||l.onResize())}render(){var l;null===(l=this.scene)||void 0===l||l.render()}}let vbe=(()=>{class c{constructor(a,h,d,f,p){this.uiConfig=a,this.config=h,this.renderer2=d,this.themesSvc=f,this.autoLoginSvc=p,this.running=!1,this.canvas=null,this.renderer=null,this.fullScreen=!1,this.allScenes=[],this.sceneIndex=-1,this.requestedSceneName="\u041a\u0440\u0435\u0441\u0442",this.iRequestedCanvasWidth=90,this.iRequestedCanvasHeight=100,this.iRequestedPercentage=!0,this.enabled=!0,this.sName="",this.scenes="\u041a\u0440\u0435\u0441\u0442"}set scenes(a){let h=a.split(",");0==h.length&&(h=["\u041a\u0440\u0435\u0441\u0442"]),this.allScenes=[],h.forEach(d=>{let f=MW.builder().setName(d);switch(d){default:case"\u041a\u0443\u0431":f.setScene(new kyt);break;case"\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d":f.setScene(new Myt);break;case"\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435":f.setScene(new Nyt);break;case"\u041a\u0440\u0435\u0441\u0442":f.setScene(new pxt)}this.allScenes.push(f)})}get scene(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?null:this.allScenes[this.sceneIndex]}get sceneName(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?this.requestedSceneName:this.allScenes[this.sceneIndex].name}set sceneName(a){this.renderer?this.selectSceneByName(a):this.requestedSceneName=a}get requestedCanvasWidth(){return this.iRequestedCanvasWidth}set requestedCanvasWidth(a){this.iRequestedCanvasWidth=a;let h=this.scene;h&&h.dispose()}get requestedCanvasHeight(){return this.iRequestedCanvasHeight}set requestedCanvasHeight(a){this.iRequestedCanvasHeight=a;let h=this.scene;h&&h.dispose()}get requestedPercentage(){return this.iRequestedPercentage}set requestedPercentage(a){this.iRequestedPercentage=a;let h=this.scene;h&&h.dispose()}selectScene(a){var h;a>=0&&a<this.allScenes.length&&a!=this.sceneIndex&&(null===(h=this.scene)||void 0===h||h.dispose(),this.sceneIndex=a,this.config.post(()=>{this.render()}))}selectSceneByName(a){let h=this.allScenes.findIndex(d=>d.name==a);this.selectScene(h)}set name(a){this.sName=a}get name(){return this.sName}onResize(){var a;null===(a=this.scene)||void 0===a||a.onResize()}onMouseMove(a){var h;null===(h=this.scene)||void 0===h||h.onMouseMove(a)}onMouseClick(a){var h;a.ctrlKey?this.selectScene((this.sceneIndex+1)%this.allScenes.length):null===(h=this.scene)||void 0===h||h.onMouseClick(a)}ngOnInit(){this.fullScreen&&this.addOverflowClass(),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.fullScreen&&this.autoLoginSvc.autoLogin()}),this.running=!0}ngOnDestroy(){var a;this.fullScreen&&this.removeOverflowClass(),null===(a=this.scene)||void 0===a||a.dispose(),this.canvas=null,this.running=!1}addOverflowClass(){this.renderer2.addClass(document.body,"overflowHidden")}removeOverflowClass(){this.renderer2.removeClass(document.body,"overflowHidden")}routeToV1(){window.location.href="./v1"}routeToLogo(){this.config.requestLogin3d(!1),this.config.setShowLogin(!1)}ngAfterViewInit(){this.canvas=this.myCanvasRef.nativeElement,this.canvas&&(this.renderer=new dye({canvas:this.canvas,alpha:!0,antialias:!0}),this.config.post(()=>{this.selectSceneByName(this.requestedSceneName)}))}render(){var a,h,d,f,p;if(!this.running)return null===(a=this.scene)||void 0===a||a.dispose(),void(this.sceneIndex=-1);!(null!==(h=this.scene)&&void 0!==h&&h.initialized)&&this.renderer&&(!this.fullScreen&&this.canvas&&(null===(d=this.scene)||void 0===d||d.setCanvasWidth(this.requestedCanvasWidth).setCanvasHeight(this.requestedCanvasHeight).setPercentage(this.requestedPercentage).setHeightPixelIncrement(-60).setYPixelIncrement(-60)),null===(f=this.scene)||void 0===f||f.setLight(this.themesSvc.nowIsDay()).setParam("\u043f\u0443\u043d\u043a\u0442\u044b",this.getMenuItems()).setActionHandler(g=>this.runMenuItemClick(g)).setAppLogoTextProvider(g=>{let m=this.config.getApplicationByNameOrNull(g);return m||(m=this.config.getSingleAppOrNull()),m||(m=this.config.getApplication()),m?m.applicationLogoText:""}).setAppParamProvider(g=>this.uiConfig.getAppParam(g)).init(this.renderer)),null===(p=this.scene)||void 0===p||p.render()}getMenuItems(){let a=this.config.environment.applications.filter(f=>f.applicationEnabled&&!f.applicationHidden).map(f=>f.name),h=this.uiConfig.ui.lastLoginApp.getStringValue(),d=this.config.environment.applications.find(f=>f.id==h);return E4.builder().setNames(a).setSelected(d?d.name:"")}runMenuItemClick(a){let h=this.config.environment.applications.find(d=>d.name==a);h?this.autoLoginSvc.onLoginCommand(h):console.log(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435: "${a}".`)}getLogoText(){let a=this.config.getSingleAppOrNull();return null==a&&(a=this.config.getApplication()),a?a.applicationLogoText:""}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(on),B(di),B(go),B(kW))},c.\u0275cmp=je({type:c,selectors:[["app-three-logo"]],viewQuery:function(a,h){if(1&a&&ci(gxt,5),2&a){let d;Ht(d=$t())&&(h.myCanvasRef=d.first)}},hostBindings:function(a,h){1&a&&ee("resize",function(f){return h.onResize(f.target)},0,iy)("mousemove",function(f){return h.onMouseMove(f)},!1,iy)("click",function(f){return h.onMouseClick(f)},!1,iy)},inputs:{fullScreen:"fullScreen",scenes:"scenes",requestedSceneName:"requestedSceneName",sceneName:"sceneName",requestedCanvasWidth:"requestedCanvasWidth",requestedCanvasHeight:"requestedCanvasHeight",requestedPercentage:"requestedPercentage",enabled:"enabled",name:"name"},decls:4,vars:1,consts:[["class","flyout",4,"ngIf"],[1,"container","bgColor","fade-in-3"],[1,"centeredCanvas"],["myCanvas",""],[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"]],template:function(a,h){1&a&&(X(0,vxt,4,1,"div",0),I(1,"div",1),ue(2,"canvas",2,3),F()),2&a&&R("ngIf",h.fullScreen)},dependencies:[_n],styles:[".centeredCanvas[_ngcontent-%COMP%]{padding:0;margin:auto;display:block;width:90vw}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}.container[_ngcontent-%COMP%]{width:100%}"]}),c})(),yxt=(()=>{class c{constructor(a){this.uiConfig=a,this.scenes="\u041a\u0440\u0435\u0441\u0442,\u041a\u0443\u0431,\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d,\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435"}ngOnInit(){this.uiConfig.setAppRoutes(null)}ngAfterViewInit(){}}return c.\u0275fac=function(a){return new(a||c)(B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-d3d-examples"]],decls:2,vars:6,consts:[[3,"fullScreen","sceneName","requestedCanvasWidth","requestedCanvasHeight","requestedPercentage","scenes"]],template:function(a,h){1&a&&(I(0,"div"),ue(1,"app-three-logo",0),F()),2&a&&(P(1),R("fullScreen",!1)("sceneName","\u041a\u0440\u0435\u0441\u0442")("requestedCanvasWidth",100)("requestedCanvasHeight",100)("requestedPercentage",!0)("scenes",h.scenes))},dependencies:[vbe]}),c})();function _xt(c,l){if(1&c){const a=at();I(0,"button",2),ee("click",function(){return De(a),ke(q().routeToV1())}),ie(1,"v1"),F()}}let ybe=(()=>{class c{constructor(a,h,d,f){this.router=a,this.autologinSvc=h,this.config=d,this.uiConfig=f,this.logoData=Va.builder()}ngOnInit(){let a=this.config.getSingleAppOrNull();null==a&&(a=this.config.getApplication()),this.logoData=this.newLogoData(a?a.applicationLogoText:""),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.autologinSvc.autoLogin()})}newLogoData(a){return Va.builder().setSvgWidth(512).setSvgHeight(512).setLogoText(a).setGenName(a?"NoLogo":"Logo").setScene(a?"/scenes/name.logo.scene.txt":"/scenes/cross.scene.txt")}navigateTo(a,h){this.uiConfig.ui.defaultAppRoute.setStringValue(h),this.uiConfig.setAppRoutes(null),this.router.navigate([h])}isActive(a){return this.router.isActive(a,!1)}onLoginCommand(a){this.autologinSvc.onLoginCommand(a)}onPreviewCommand(a){this.logoData=this.newLogoData(a?a.applicationLogoText:"")}routeToV1(){window.location.href="./v1"}routeTo3D(){this.config.requestLogin3d(!0),this.config.setShowLogin(!1)}}return c.\u0275fac=function(a){return new(a||c)(B(ts),B(kW),B(on),B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-login"]],decls:9,vars:7,consts:[[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"],[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"svgWidth","svgHeight","data"],[1,"login-footer"],[3,"svgWidth","svgHeight","genName","onCommand","onPreviewCommand"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,_xt,2,0,"button",1),I(2,"button",2),ee("click",function(){return h.routeTo3D()}),ie(3,"3d"),F()(),I(4,"div",3)(5,"div",4),ue(6,"app-svg-js-image",5),F(),I(7,"div",6)(8,"app-svg-js-image",7),ee("onCommand",function(f){return h.onLoginCommand(f)})("onPreviewCommand",function(f){return h.onPreviewCommand(f)}),F()()()),2&a&&(P(1),R("ngIf",h.config.showOldVersions),P(5),R("svgWidth",512)("svgHeight",512)("data",h.logoData),P(2),R("svgWidth",512)("svgHeight",128)("genName","Menu"))},dependencies:[_n,Zl],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{inset:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:100vh}.h80[_ngcontent-%COMP%]{height:75vh;width:75vh}flyout-toggle[_ngcontent-%COMP%]{position:absolute;transform:rotate(90deg);top:50%;left:-50px;z-index:998;width:85px;height:35px;font-size:13px;background:#92C7B8;border:solid #fff 1px}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}"]}),c})(),bxt=(()=>{class c{constructor(a,h,d,f){this.router=a,this.config=h,this.uiConfig=d,this.themesSvc=f,this.dynMenuData=xg.builder().setWhiteBack(!1).setMenuState(pg.builder().addCommand(La.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay")),this.menuLinksOld=null,this.light=!0}ngOnInit(){this.light=this.themesSvc.nowIsDay(),this.dynMenuData=xg.builder().setWhiteBack(!1).setMenuState(pg.builder().addCommand(La.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName(this.light?"MenuDay":"MenuNight2")).setOnClick(this.getOnOk()),this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes([])},0)}ngOnDestroy(){this.menuLinksOld&&(this.menuLinksOld.unsubscribe(),this.menuLinksOld=null)}get version(){return this.config.environment.version}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.config.setShowLogin(!1)})}}return c.\u0275fac=function(a){return new(a||c)(B(ts),B(on),B(ti),B(go))},c.\u0275cmp=je({type:c,selectors:[["app-about"]],decls:4,vars:5,consts:[[1,"ftext","fade-in-3","pad","fullHeight","bgColor"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"div"),ue(2,"app-svg-js-image",1)(3,"app-dynamic-menu",2),F()()),2&a&&(P(2),R("genName",h.light?"LogoLight":"LogoDark")("svgWidth",512)("svgHeight",512)("type",0),P(1),R("data",h.dynMenuData))},dependencies:[Zl,jE],styles:[".pad[_ngcontent-%COMP%]{padding:1em}.fullHeight[_ngcontent-%COMP%]{height:calc(100vh - 60px)}"]}),c})(),Cxt=(()=>{class c{constructor(a){this.router=a,this.logText=["\u041c\u043e\u043b\u0435\u0431\u0435\u043d"].join(", "),this.extraPages=[],this.horizontalPagesCount=2,this.verticalPagesCount=2}ngOnInit(){}onPagesCount(a){this.extraPages=[];let h=this.horizontalPagesCount*this.verticalPagesCount,d=a-h,f=0;for(;d>0;)d=Math.max(0,d-h),f+=h,this.extraPages.push(f)}}return c.\u0275fac=function(a){return new(a||c)(B(ts))},c.\u0275cmp=je({type:c,selectors:[["app-main"]],decls:2,vars:9,consts:[[1,"pageBreak"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"app-svg-js-image",1),ee("pagesCount",function(f){return h.onPagesCount(f)}),F()()),2&a&&(P(1),R("svgWidth",210)("svgHeight",297)("scene","/scenes/parser.scene.txt")("genName","Js")("logoText",h.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",h.horizontalPagesCount)("verticalPagesCount",h.verticalPagesCount))},dependencies:[Zl],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),c})();function xxt(c,l){if(1&c&&(I(0,"div"),ue(1,"app-add-component",2),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}let wxt=(()=>{class c extends Cg{constructor(a,h,d){super(a,h,d),this.appBookName="\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 APP_CLC",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=Nc.builder(),this.addMenuLink(ei.builder().setLink("#").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ei.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCalculatorHelp}getUIBook(){return this.uiConfig.ui.calculatorBook}getUIChapter(){return this.uiConfig.ui.calculatorChapter}getUILine(){return this.uiConfig.ui.calculatorLine}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof bh}isComponent(a,h=""){var d;if(this.components.length<=0)return!1;let p=null===(d=this.components[0].data.component)||void 0===d?void 0:d.data;return(null==p?void 0:p.text)==a&&(!h||(null==p?void 0:p.link.chapter)==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();a?this.routeTo(a,h,d):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,h="",d=-1){this.config.post(()=>{this.routeTo(a,h,d)})}routeTo(a,h="",d=-1){let f=a;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn($c,xl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Cl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn(u1,bh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-calculator"]],features:[gn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,xxt,2,1,"div",1),F()),2&a&&(P(1),R("ngForOf",h.components))},dependencies:[fi,Yl]}),c})();function Sxt(c,l){1&c&&ue(0,"app-dynamic-errors",7),2&c&&R("data",q(3).errors)}function Txt(c,l){if(1&c){const a=at();I(0,"div")(1,"div",4),ie(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),F(),X(3,Sxt,1,1,"app-dynamic-errors",5),I(4,"app-dynamic-code-runner-text",6),ee("onError",function(d){return De(a),ke(q(2).onCodeRunnerError(d))}),F()()}if(2&c){const a=q(2);P(3),R("ngIf",a.errors.errors.length),P(1),R("data",a.runnerData)}}function Oxt(c,l){if(1&c&&(I(0,"div",1),X(1,Txt,5,2,"div",2),ue(2,"app-dynamic-codemirror",3),F()),2&c){const a=q();R("ngClass",a.getClasses()),P(1),R("ngIf",a.graphicsEnabled),P(1),R("text",a.logText)("maxHeightStr","300px")}}function Dxt(c,l){1&c&&ue(0,"app-dynamic-errors",7),2&c&&R("data",q(3).errors)}function kxt(c,l){if(1&c){const a=at();I(0,"div",9)(1,"div",10),ie(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),F(),X(3,Dxt,1,1,"app-dynamic-errors",5),I(4,"app-dynamic-code-runner-text",6),ee("onError",function(d){return De(a),ke(q(2).onCodeRunnerError(d))}),F()()}if(2&c){const a=q(2);P(3),R("ngIf",a.errors.errors.length),P(1),R("data",a.runnerData)}}const Mxt=function(c,l){return{"clr-col-6":c,"clr-col-12":l}};function Ext(c,l){if(1&c&&(I(0,"div",1),X(1,kxt,5,2,"div",8),I(2,"div",1),ue(3,"app-dynamic-codemirror",3),F()()),2&c){const a=q();R("ngClass",a.getClasses()),P(1),R("ngIf",a.graphicsEnabled),P(1),R("ngClass",as(5,Mxt,a.graphicsEnabled,!a.graphicsEnabled)),P(1),R("text",a.logText)("maxHeightStr","calc(100vh - 60px - 30px)")}}let Axt=(()=>{class c{constructor(a,h){this.uiConfig=a,this.config=h,this.generator=new VE,this.solving=!1,this.codemirrorData=wS.builder(),this.logText="",this.starterSvc=null,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435=null,this.graphicsEnabled=!0,this.errors=Nc.builder(),this.runnerData=g2.builder().updateConfig(d=>d.setWidth(256).setHeight(160)),this.requestCodeText="",this.bVertical=null,this.sCompilerSourceText=""}get formulaText(){return this.sCompilerSourceText!=this.uiConfig.ui.compilerSourceText.getStringValue()&&this.config.post(()=>{this.sCompilerSourceText=this.uiConfig.ui.compilerSourceText.getStringValue()}),this.sCompilerSourceText}set formulaText(a){this.uiConfig.ui.compilerSourceText.setStringValue(a),this.onUpdateSourceTextConfig()}get compilerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.compilerData.components.length?this.compilerData.components[0]:null}get components(){return this.compilerData.components}get vertical(){return null!=this.bVertical?this.bVertical:window.innerWidth<window.innerHeight}ngOnInit(){void 0===this.bVertical&&(this.bVertical=window.innerWidth<window.innerHeight),this.sCompilerSourceText=this.uiConfig.ui.compilerSourceText.getStringValue()}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateSourceTextConfig(),this.requestRun()}createJsService(){if(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435&&this.starterSvc)return void this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c",this.starterSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1));this.starterSvc=new JE,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.runnerData.config.environment=Nr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(ui.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));let a=(h,d)=>{let f=d[0],g=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.logText&&(this.logText+="\r\n"),this.logText+=g.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),this.syncLogText(),f};this.starterSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",a),this.starterSvc.addMethod(this.runnerData.config.environment,"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",a)}requestRun(){this.solving=!0,this.createJsService();let a=this.formulaText;this.requestCodeText=a,this.config.post(()=>{this.requestCodeText==a&&(this.onCodeRunnerError(""),this.runnerData.text=a)},1)}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{"clr-row":!this.vertical}}onRun(){let a=!1;if(this.starterSvc&&this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435){this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c",this.starterSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)),this.starterSvc.run(this.formulaText,null,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435);let h=this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c");h&&(a=h.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e())}a?this.config.post(()=>this.onRun()):this.solving=!1}onUpdateSourceTextConfig(){}onSelectFormula(a){this.formulaText=a.params.get("\u0442\u0435\u043a\u0441\u0442")}syncLogText(){this.codemirrorData.text=this.logText}onCodeRunnerError(a){this.config.post(()=>{this.errors.errors=a?[a]:[]})}}return c.\u0275fac=function(a){return new(a||c)(B(ti),B(on))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-compiler-runner"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],[3,"text","maxHeightStr"],[1,"green","bottom-top-space"],[3,"data",4,"ngIf"],[3,"data","onError"],[3,"data"],["class","clr-col-6",4,"ngIf"],[1,"clr-col-6"],[1,"green"]],template:function(a,h){1&a&&(X(0,Oxt,3,4,"div",0),X(1,Ext,4,8,"div",0)),2&a&&(R("ngIf",h.vertical),P(1),R("ngIf",!h.vertical))},dependencies:[si,_n,h1,LI,s9],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),c})();class EW{constructor(){}static builder(){return new EW}}class I4 extends mi{constructor(l,a,h,d){super(l,a,h),this.classes=d,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new I4("",null,null,EW.builder())}setText(l){return super.setText(l)}setOnClick(l){return super.setOnClick(l)}setTag(l){return super.setTag(l)}update(l){return l(this.classes),this}setId(l){return this.id=l,this}setWaitingForSenderid(l){return this.waitingForSenderId=l,this}setComponents(l){return this.components=l,this}}function Ixt(c,l){if(1&c&&(I(0,"div"),ue(1,"app-add-component",2),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}let Pxt=(()=>{class c extends Cg{constructor(a,h,d){super(a,h,d),this.appBookName="\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 APP_CMP",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=Nc.builder(),this.addMenuLink(ei.builder().setLink("#").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ei.builder().setLink("#").setName("\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c").setShape("play").setOnClick(()=>{this.showRunner()}).setIsActive(()=>this.isRunner())).addMenuLink(ei.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCompilerHelp}getUIBook(){return this.uiConfig.ui.compilerBook}getUIChapter(){return this.uiConfig.ui.compilerChapter}getUILine(){return this.uiConfig.ui.compilerLine}isRunner(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof I4}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof bh}isComponent(a,h=""){var d;if(this.components.length<=0)return!1;let p=null===(d=this.components[0].data.component)||void 0===d?void 0:d.data;return(null==p?void 0:p.text)==a&&(!h||(null==p?void 0:p.link.chapter)==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();a?this.routeTo(a,h,d):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,h="",d=-1){this.config.post(()=>{this.routeTo(a,h,d)})}routeTo(a,h="",d=-1){let f=a;if(f){if("\u0441\u0442\u0430\u0440\u0442"==f)return void this.showRunner();if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn($c,xl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!1).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Cl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn(u1,bh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}showRunner(){this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn(Axt,I4.builder())))])}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-compiler"]],features:[gn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Ixt,2,1,"div",1),F()),2&a&&(P(1),R("ngForOf",h.components))},dependencies:[fi,Yl]}),c})();function Rxt(c,l){if(1&c&&(I(0,"div"),ue(1,"app-add-component",2),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}let Fxt=(()=>{class c extends Cg{constructor(a,h,d){super(a,h,d),this.appBookName="\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c APP_CLD",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=Nc.builder(),this.addMenuLink(ei.builder().setLink("#").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ei.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCalendarHelp}getUIBook(){return this.uiConfig.ui.calendarBook}getUIChapter(){return this.uiConfig.ui.calendarChapter}getUILine(){return this.uiConfig.ui.calendarLine}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof bh}isComponent(a,h=""){var d;if(this.components.length<=0)return!1;let p=null===(d=this.components[0].data.component)||void 0===d?void 0:d.data;return(null==p?void 0:p.text)==a&&(!h||(null==p?void 0:p.link.chapter)==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();a?this.routeTo(a,h,d):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,h="",d=-1){this.config.post(()=>{this.routeTo(a,h,d)})}routeTo(a,h="",d=-1){let f=a;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn($c,xl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Cl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn(u1,bh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-calendar"]],features:[gn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Rxt,2,1,"div",1),F()),2&a&&(P(1),R("ngForOf",h.components))},dependencies:[fi,Yl]}),c})();function Nxt(c,l){if(1&c&&(I(0,"div"),ue(1,"app-add-component",2),F()),2&c){const a=l.$implicit;P(1),R("component",a)}}const Lxt=[{path:"about",component:bxt},{path:"main",component:ybe},{path:"main-test",component:Cxt},{path:"memorials-pages-editor",component:_Je},{path:"help",component:eze},{path:"d3examples",component:uJe},{path:"d3Dexamples",component:yxt},{path:"books",component:mdt},{path:"dynamic-components-examples",component:Hht},{path:"tests",component:vJe},{path:"memorial",component:ydt},{path:"calculator",component:wxt},{path:"calendar",component:Fxt},{path:"compiler",component:Pxt},{path:"scheduler",component:(()=>{class c extends Cg{constructor(a,h,d){super(a,h,d),this.appBookName="\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 APP_SCH",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=Nc.builder(),this.addMenuLink(ei.builder().setLink("#").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ei.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ei.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedSchedulerHelp}getUIBook(){return this.uiConfig.ui.schedulerBook}getUIChapter(){return this.uiConfig.ui.schedulerChapter}getUILine(){return this.uiConfig.ui.schedulerLine}isSettings(){var a;return!(this.components.length<=0)&&(null===(a=this.components[0].data.component)||void 0===a?void 0:a.data)instanceof bh}isComponent(a,h=""){var d;if(this.components.length<=0)return!1;let p=null===(d=this.components[0].data.component)||void 0===d?void 0:d.data;return(null==p?void 0:p.text)==a&&(!h||(null==p?void 0:p.link.chapter)==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let a=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();a?this.routeTo(a,h,d):this.resetDelayed(this.appBookChapter)}}resetDelayed(a){this.config.post(()=>{this.reset(a)})}reset(a){this.routeTo(this.appBookName,a,1)}routeToHelpDelayed(a){this.config.post(()=>{this.routeToHelp(a)})}routeToHelp(a){this.isComponent(this.helpBookName,a)&&a===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,a,1)}routeToDelayed(a,h="",d=-1){this.config.post(()=>{this.routeTo(a,h,d)})}routeTo(a,h="",d=-1){let f=a;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn($c,xl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Cl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(a){this.config.post(()=>{this.components=a})}clearErrors(){this.errorsData.setErrors([])}setErrors(a){this.errorsData.setErrors(a).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Vn(nc,_o.builder().setComponent(new Vn(u1,bh.builder().updateClasses(a=>a.setCalculatorSettings(!0)))))])}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(yh))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-scheduler"]],features:[gn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(a,h){1&a&&(I(0,"div",0),X(1,Nxt,2,1,"div",1),F()),2&a&&(P(1),R("ngForOf",h.components))},dependencies:[fi,Yl]}),c})()},{path:"index.html",redirectTo:"/about",pathMatch:"full"},{path:"index.night.html",redirectTo:"/about",pathMatch:"full"},{path:"",redirectTo:"/about",pathMatch:"full"}];let Bxt=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({imports:[KK.forRoot(Lxt),KK]}),c})();function _be(c){return new Et(3e3,!1)}function _wt(){return"undefined"!=typeof window&&void 0!==window.document}function AW(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function cm(c){switch(c.length){case 0:return new ux;case 1:return c[0];default:return new GJ(c)}}function bbe(c,l,a,h,d=new Map,f=new Map){const p=[],g=[];let m=-1,v=null;if(h.forEach(y=>{const _=y.get("offset"),b=_==m,C=b&&v||new Map;y.forEach((x,S)=>{let w=S,T=x;if("offset"!==S)switch(w=l.normalizePropertyName(w,p),T){case"!":T=d.get(S);break;case Cf:T=f.get(S);break;default:T=l.normalizeStyleValue(S,w,T,p)}C.set(w,T)}),b||g.push(C),v=C,m=_}),p.length)throw function awt(c){return new Et(3502,!1)}();return g}function IW(c,l,a,h){switch(l){case"start":c.onStart(()=>h(a&&PW(a,"start",c)));break;case"done":c.onDone(()=>h(a&&PW(a,"done",c)));break;case"destroy":c.onDestroy(()=>h(a&&PW(a,"destroy",c)))}}function PW(c,l,a){const h=a.totalTime,f=RW(c.element,c.triggerName,c.fromState,c.toState,l||c.phaseName,null==h?c.totalTime:h,!!a.disabled),p=c._data;return null!=p&&(f._data=p),f}function RW(c,l,a,h,d="",f=0,p){return{element:c,triggerName:l,fromState:a,toState:h,phaseName:d,totalTime:f,disabled:!!p}}function eu(c,l,a){let h=c.get(l);return h||c.set(l,h=a),h}function Cbe(c){const l=c.indexOf(":");return[c.substring(1,l),c.slice(l+1)]}let FW=(c,l)=>!1,xbe=(c,l,a)=>[],wbe=null;function NW(c){const l=c.parentNode||c.host;return l===wbe?null:l}(AW()||"undefined"!=typeof Element)&&(_wt()?(wbe=(()=>document.documentElement)(),FW=(c,l)=>{for(;l;){if(l===c)return!0;l=NW(l)}return!1}):FW=(c,l)=>c.contains(l),xbe=(c,l,a)=>{if(a)return Array.from(c.querySelectorAll(l));const h=c.querySelector(l);return h?[h]:[]});let kv=null,Sbe=!1;const Tbe=FW,Obe=xbe;let Dbe=(()=>{class c{validateStyleProperty(a){return function Cwt(c){kv||(kv=function xwt(){return"undefined"!=typeof document?document.body:null}()||{},Sbe=!!kv.style&&"WebkitAppearance"in kv.style);let l=!0;return kv.style&&!function bwt(c){return"ebkit"==c.substring(1,6)}(c)&&(l=c in kv.style,!l&&Sbe&&(l="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in kv.style)),l}(a)}matchesElement(a,h){return!1}containsElement(a,h){return Tbe(a,h)}getParentElement(a){return NW(a)}query(a,h,d){return Obe(a,h,d)}computeStyle(a,h,d){return d||""}animate(a,h,d,f,p,g=[],m){return new ux(d,f)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})(),LW=(()=>{class c{}return c.NOOP=new Dbe,c})();const BW="ng-enter",P4="ng-leave",R4="ng-trigger",F4=".ng-trigger",Mbe="ng-animating",VW=".ng-animating";function yp(c){if("number"==typeof c)return c;const l=c.match(/^(-?[\.\d]+)(m?s)/);return!l||l.length<2?0:zW(parseFloat(l[1]),l[2])}function zW(c,l){return"s"===l?1e3*c:c}function N4(c,l,a){return c.hasOwnProperty("duration")?c:function Twt(c,l,a){let d,f=0,p="";if("string"==typeof c){const g=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return l.push(_be()),{duration:0,delay:0,easing:""};d=zW(parseFloat(g[1]),g[2]);const m=g[3];null!=m&&(f=zW(parseFloat(m),g[4]));const v=g[5];v&&(p=v)}else d=c;if(!a){let g=!1,m=l.length;d<0&&(l.push(function Vxt(){return new Et(3100,!1)}()),g=!0),f<0&&(l.push(function zxt(){return new Et(3101,!1)}()),g=!0),g&&l.splice(m,0,_be())}return{duration:d,delay:f,easing:p}}(c,l,a)}function iT(c,l={}){return Object.keys(c).forEach(a=>{l[a]=c[a]}),l}function Ebe(c){const l=new Map;return Object.keys(c).forEach(a=>{l.set(a,c[a])}),l}function um(c,l=new Map,a){if(a)for(let[h,d]of a)l.set(h,d);for(let[h,d]of c)l.set(h,d);return l}function Ibe(c,l,a){return a?l+":"+a+";":""}function Pbe(c){let l="";for(let a=0;a<c.style.length;a++){const h=c.style.item(a);l+=Ibe(0,h,c.style.getPropertyValue(h))}for(const a in c.style)c.style.hasOwnProperty(a)&&!a.startsWith("_")&&(l+=Ibe(0,Mwt(a),c.style[a]));c.setAttribute("style",l)}function Xd(c,l,a){c.style&&(l.forEach((h,d)=>{const f=HW(d);a&&!a.has(d)&&a.set(d,c.style[f]),c.style[f]=h}),AW()&&Pbe(c))}function Mv(c,l){c.style&&(l.forEach((a,h)=>{const d=HW(h);c.style[d]=""}),AW()&&Pbe(c))}function rT(c){return Array.isArray(c)?1==c.length?c[0]:$J(c):c}const UW=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rbe(c){let l=[];if("string"==typeof c){let a;for(;a=UW.exec(c);)l.push(a[1]);UW.lastIndex=0}return l}function sT(c,l,a){const h=c.toString(),d=h.replace(UW,(f,p)=>{let g=l[p];return null==g&&(a.push(function Hxt(c){return new Et(3003,!1)}()),g=""),g.toString()});return d==h?c:d}function L4(c){const l=[];let a=c.next();for(;!a.done;)l.push(a.value),a=c.next();return l}const kwt=/-+([a-z0-9])/g;function HW(c){return c.replace(kwt,(...l)=>l[1].toUpperCase())}function Mwt(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function tu(c,l,a){switch(l.type){case 7:return c.visitTrigger(l,a);case 0:return c.visitState(l,a);case 1:return c.visitTransition(l,a);case 2:return c.visitSequence(l,a);case 3:return c.visitGroup(l,a);case 4:return c.visitAnimate(l,a);case 5:return c.visitKeyframes(l,a);case 6:return c.visitStyle(l,a);case 8:return c.visitReference(l,a);case 9:return c.visitAnimateChild(l,a);case 10:return c.visitAnimateRef(l,a);case 11:return c.visitQuery(l,a);case 12:return c.visitStagger(l,a);default:throw function $xt(c){return new Et(3004,!1)}()}}function Fbe(c,l){return window.getComputedStyle(c)[l]}function Fwt(c,l){const a=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function Nwt(c,l,a){if(":"==c[0]){const m=function Lwt(c,l){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,h)=>parseFloat(h)>parseFloat(a);case":decrement":return(a,h)=>parseFloat(h)<parseFloat(a);default:return l.push(function iwt(c){return new Et(3016,!1)}()),"* => *"}}(c,a);if("function"==typeof m)return void l.push(m);c=m}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return a.push(function nwt(c){return new Et(3015,!1)}()),l;const d=h[1],f=h[2],p=h[3];l.push(Nbe(d,p));"<"==f[0]&&!("*"==d&&"*"==p)&&l.push(Nbe(p,d))}(h,a,l)):a.push(c),a}const U4=new Set(["true","1"]),H4=new Set(["false","0"]);function Nbe(c,l){const a=U4.has(c)||H4.has(c),h=U4.has(l)||H4.has(l);return(d,f)=>{let p="*"==c||c==d,g="*"==l||l==f;return!p&&a&&"boolean"==typeof d&&(p=d?U4.has(c):H4.has(c)),!g&&h&&"boolean"==typeof f&&(g=f?U4.has(l):H4.has(l)),p&&g}}const Bwt=new RegExp("s*:selfs*,?","g");function $W(c,l,a,h){return new Vwt(c).build(l,a,h)}class Vwt{constructor(l){this._driver=l}build(l,a,h){const d=new Hwt(a);return this._resetContextStyleTimingState(d),tu(this,rT(l),d)}_resetContextStyleTimingState(l){l.currentQuerySelector="",l.collectedStyles=new Map,l.collectedStyles.set("",new Map),l.currentTime=0}visitTrigger(l,a){let h=a.queryCount=0,d=a.depCount=0;const f=[],p=[];return"@"==l.name.charAt(0)&&a.errors.push(function Gxt(){return new Et(3006,!1)}()),l.definitions.forEach(g=>{if(this._resetContextStyleTimingState(a),0==g.type){const m=g,v=m.name;v.toString().split(/\s*,\s*/).forEach(y=>{m.name=y,f.push(this.visitState(m,a))}),m.name=v}else if(1==g.type){const m=this.visitTransition(g,a);h+=m.queryCount,d+=m.depCount,p.push(m)}else a.errors.push(function Qxt(){return new Et(3007,!1)}())}),{type:7,name:l.name,states:f,transitions:p,queryCount:h,depCount:d,options:null}}visitState(l,a){const h=this.visitStyle(l.styles,a),d=l.options&&l.options.params||null;if(h.containsDynamicStyles){const f=new Set,p=d||{};h.styles.forEach(g=>{g instanceof Map&&g.forEach(m=>{Rbe(m).forEach(v=>{p.hasOwnProperty(v)||f.add(v)})})}),f.size&&(L4(f.values()),a.errors.push(function jxt(c,l){return new Et(3008,!1)}()))}return{type:0,name:l.name,style:h,options:d?{params:d}:null}}visitTransition(l,a){a.queryCount=0,a.depCount=0;const h=tu(this,rT(l.animation),a);return{type:1,matchers:Fwt(l.expr,a.errors),animation:h,queryCount:a.queryCount,depCount:a.depCount,options:Ev(l.options)}}visitSequence(l,a){return{type:2,steps:l.steps.map(h=>tu(this,h,a)),options:Ev(l.options)}}visitGroup(l,a){const h=a.currentTime;let d=0;const f=l.steps.map(p=>{a.currentTime=h;const g=tu(this,p,a);return d=Math.max(d,a.currentTime),g});return a.currentTime=d,{type:3,steps:f,options:Ev(l.options)}}visitAnimate(l,a){const h=function Wwt(c,l){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return WW(N4(c,l).duration,0,"");const a=c;if(a.split(/\s+/).some(f=>"{"==f.charAt(0)&&"{"==f.charAt(1))){const f=WW(0,0,"");return f.dynamic=!0,f.strValue=a,f}const d=N4(a,l);return WW(d.duration,d.delay,d.easing)}(l.timings,a.errors);a.currentAnimateTimings=h;let d,f=l.styles?l.styles:Gi({});if(5==f.type)d=this.visitKeyframes(f,a);else{let p=l.styles,g=!1;if(!p){g=!0;const v={};h.easing&&(v.easing=h.easing),p=Gi(v)}a.currentTime+=h.duration+h.delay;const m=this.visitStyle(p,a);m.isEmptyStep=g,d=m}return a.currentAnimateTimings=null,{type:4,timings:h,style:d,options:null}}visitStyle(l,a){const h=this._makeStyleAst(l,a);return this._validateStyleAst(h,a),h}_makeStyleAst(l,a){const h=[],d=Array.isArray(l.styles)?l.styles:[l.styles];for(let g of d)"string"==typeof g?g===Cf?h.push(g):a.errors.push(new Et(3002,!1)):h.push(Ebe(g));let f=!1,p=null;return h.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(p=g.get("easing"),g.delete("easing")),!f))for(let m of g.values())if(m.toString().indexOf("{{")>=0){f=!0;break}}),{type:6,styles:h,easing:p,offset:l.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(l,a){const h=a.currentAnimateTimings;let d=a.currentTime,f=a.currentTime;h&&f>0&&(f-=h.duration+h.delay),l.styles.forEach(p=>{"string"!=typeof p&&p.forEach((g,m)=>{const v=a.collectedStyles.get(a.currentQuerySelector),y=v.get(m);let _=!0;y&&(f!=d&&f>=y.startTime&&d<=y.endTime&&(a.errors.push(function Zxt(c,l,a,h,d){return new Et(3010,!1)}()),_=!1),f=y.startTime),_&&v.set(m,{startTime:f,endTime:d}),a.options&&function Dwt(c,l,a){const h=l.params||{},d=Rbe(c);d.length&&d.forEach(f=>{h.hasOwnProperty(f)||a.push(function Uxt(c){return new Et(3001,!1)}())})}(g,a.options,a.errors)})})}visitKeyframes(l,a){const h={type:5,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push(function Xxt(){return new Et(3011,!1)}()),h;let f=0;const p=[];let g=!1,m=!1,v=0;const y=l.steps.map(T=>{const O=this._makeStyleAst(T,a);let k=null!=O.offset?O.offset:function $wt(c){if("string"==typeof c)return null;let l=null;if(Array.isArray(c))c.forEach(a=>{if(a instanceof Map&&a.has("offset")){const h=a;l=parseFloat(h.get("offset")),h.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const a=c;l=parseFloat(a.get("offset")),a.delete("offset")}return l}(O.styles),D=0;return null!=k&&(f++,D=O.offset=k),m=m||D<0||D>1,g=g||D<v,v=D,p.push(D),O});m&&a.errors.push(function Yxt(){return new Et(3012,!1)}()),g&&a.errors.push(function Kxt(){return new Et(3200,!1)}());const _=l.steps.length;let b=0;f>0&&f<_?a.errors.push(function Jxt(){return new Et(3202,!1)}()):0==f&&(b=1/(_-1));const C=_-1,x=a.currentTime,S=a.currentAnimateTimings,w=S.duration;return y.forEach((T,O)=>{const k=b>0?O==C?1:b*O:p[O],D=k*w;a.currentTime=x+S.delay+D,S.duration=D,this._validateStyleAst(T,a),T.offset=k,h.styles.push(T)}),h}visitReference(l,a){return{type:8,animation:tu(this,rT(l.animation),a),options:Ev(l.options)}}visitAnimateChild(l,a){return a.depCount++,{type:9,options:Ev(l.options)}}visitAnimateRef(l,a){return{type:10,animation:this.visitReference(l.animation,a),options:Ev(l.options)}}visitQuery(l,a){const h=a.currentQuerySelector,d=l.options||{};a.queryCount++,a.currentQuery=l;const[f,p]=function zwt(c){const l=!!c.split(/\s*,\s*/).find(a=>":self"==a);return l&&(c=c.replace(Bwt,"")),c=c.replace(/@\*/g,F4).replace(/@\w+/g,a=>F4+"-"+a.slice(1)).replace(/:animating/g,VW),[c,l]}(l.selector);a.currentQuerySelector=h.length?h+" "+f:f,eu(a.collectedStyles,a.currentQuerySelector,new Map);const g=tu(this,rT(l.animation),a);return a.currentQuery=null,a.currentQuerySelector=h,{type:11,selector:f,limit:d.limit||0,optional:!!d.optional,includeSelf:p,animation:g,originalSelector:l.selector,options:Ev(l.options)}}visitStagger(l,a){a.currentQuery||a.errors.push(function ewt(){return new Et(3013,!1)}());const h="full"===l.timings?{duration:0,delay:0,easing:"full"}:N4(l.timings,a.errors,!0);return{type:12,animation:tu(this,rT(l.animation),a),timings:h,options:null}}}class Hwt{constructor(l){this.errors=l,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ev(c){return c?(c=iT(c)).params&&(c.params=function Uwt(c){return c?iT(c):null}(c.params)):c={},c}function WW(c,l,a){return{duration:c,delay:l,easing:a}}function GW(c,l,a,h,d,f,p=null,g=!1){return{type:1,element:c,keyframes:l,preStyleProps:a,postStyleProps:h,duration:d,delay:f,totalTime:d+f,easing:p,subTimeline:g}}class $4{constructor(){this._map=new Map}get(l){return this._map.get(l)||[]}append(l,a){let h=this._map.get(l);h||this._map.set(l,h=[]),h.push(...a)}has(l){return this._map.has(l)}clear(){this._map.clear()}}const jwt=new RegExp(":enter","g"),Zwt=new RegExp(":leave","g");function QW(c,l,a,h,d,f=new Map,p=new Map,g,m,v=[]){return(new Xwt).buildKeyframes(c,l,a,h,d,f,p,g,m,v)}class Xwt{buildKeyframes(l,a,h,d,f,p,g,m,v,y=[]){v=v||new $4;const _=new jW(l,a,v,d,f,y,[]);_.options=m;const b=m.delay?yp(m.delay):0;_.currentTimeline.delayNextStep(b),_.currentTimeline.setStyles([p],null,_.errors,m),tu(this,h,_);const C=_.timelines.filter(x=>x.containsAnimation());if(C.length&&g.size){let x;for(let S=C.length-1;S>=0;S--){const w=C[S];if(w.element===a){x=w;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([g],null,_.errors,m)}return C.length?C.map(x=>x.buildKeyframes()):[GW(a,[],[],[],0,b,"",!1)]}visitTrigger(l,a){}visitState(l,a){}visitTransition(l,a){}visitAnimateChild(l,a){const h=a.subInstructions.get(a.element);if(h){const d=a.createSubContext(l.options),f=a.currentTimeline.currentTime,p=this._visitSubInstructions(h,d,d.options);f!=p&&a.transformIntoNewTimeline(p)}a.previousNode=l}visitAnimateRef(l,a){const h=a.createSubContext(l.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([l.options,l.animation.options],a,h),this.visitReference(l.animation,h),a.transformIntoNewTimeline(h.currentTimeline.currentTime),a.previousNode=l}_applyAnimationRefDelays(l,a,h){var d;for(const f of l){const p=null==f?void 0:f.delay;if(p){const g="number"==typeof p?p:yp(sT(p,null!==(d=null==f?void 0:f.params)&&void 0!==d?d:{},a.errors));h.delayNextStep(g)}}}_visitSubInstructions(l,a,h){let f=a.currentTimeline.currentTime;const p=null!=h.duration?yp(h.duration):null,g=null!=h.delay?yp(h.delay):null;return 0!==p&&l.forEach(m=>{const v=a.appendInstructionToTimeline(m,p,g);f=Math.max(f,v.duration+v.delay)}),f}visitReference(l,a){a.updateOptions(l.options,!0),tu(this,l.animation,a),a.previousNode=l}visitSequence(l,a){const h=a.subContextCount;let d=a;const f=l.options;if(f&&(f.params||f.delay)&&(d=a.createSubContext(f),d.transformIntoNewTimeline(),null!=f.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=W4);const p=yp(f.delay);d.delayNextStep(p)}l.steps.length&&(l.steps.forEach(p=>tu(this,p,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>h&&d.transformIntoNewTimeline()),a.previousNode=l}visitGroup(l,a){const h=[];let d=a.currentTimeline.currentTime;const f=l.options&&l.options.delay?yp(l.options.delay):0;l.steps.forEach(p=>{const g=a.createSubContext(l.options);f&&g.delayNextStep(f),tu(this,p,g),d=Math.max(d,g.currentTimeline.currentTime),h.push(g.currentTimeline)}),h.forEach(p=>a.currentTimeline.mergeTimelineCollectedStyles(p)),a.transformIntoNewTimeline(d),a.previousNode=l}_visitTiming(l,a){if(l.dynamic){const h=l.strValue;return N4(a.params?sT(h,a.params,a.errors):h,a.errors)}return{duration:l.duration,delay:l.delay,easing:l.easing}}visitAnimate(l,a){const h=a.currentAnimateTimings=this._visitTiming(l.timings,a),d=a.currentTimeline;h.delay&&(a.incrementTime(h.delay),d.snapshotCurrentStyles());const f=l.style;5==f.type?this.visitKeyframes(f,a):(a.incrementTime(h.duration),this.visitStyle(f,a),d.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=l}visitStyle(l,a){const h=a.currentTimeline,d=a.currentAnimateTimings;!d&&h.hasCurrentStyleProperties()&&h.forwardFrame();const f=d&&d.easing||l.easing;l.isEmptyStep?h.applyEmptyStep(f):h.setStyles(l.styles,f,a.errors,a.options),a.previousNode=l}visitKeyframes(l,a){const h=a.currentAnimateTimings,d=a.currentTimeline.duration,f=h.duration,g=a.createSubContext().currentTimeline;g.easing=h.easing,l.styles.forEach(m=>{g.forwardTime((m.offset||0)*f),g.setStyles(m.styles,m.easing,a.errors,a.options),g.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(g),a.transformIntoNewTimeline(d+f),a.previousNode=l}visitQuery(l,a){const h=a.currentTimeline.currentTime,d=l.options||{},f=d.delay?yp(d.delay):0;f&&(6===a.previousNode.type||0==h&&a.currentTimeline.hasCurrentStyleProperties())&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=W4);let p=h;const g=a.invokeQuery(l.selector,l.originalSelector,l.limit,l.includeSelf,!!d.optional,a.errors);a.currentQueryTotal=g.length;let m=null;g.forEach((v,y)=>{a.currentQueryIndex=y;const _=a.createSubContext(l.options,v);f&&_.delayNextStep(f),v===a.element&&(m=_.currentTimeline),tu(this,l.animation,_),_.currentTimeline.applyStylesToKeyframe(),p=Math.max(p,_.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(p),m&&(a.currentTimeline.mergeTimelineCollectedStyles(m),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=l}visitStagger(l,a){const h=a.parentContext,d=a.currentTimeline,f=l.timings,p=Math.abs(f.duration),g=p*(a.currentQueryTotal-1);let m=p*a.currentQueryIndex;switch(f.duration<0?"reverse":f.easing){case"reverse":m=g-m;break;case"full":m=h.currentStaggerTime}const y=a.currentTimeline;m&&y.delayNextStep(m);const _=y.currentTime;tu(this,l.animation,a),a.previousNode=l,h.currentStaggerTime=d.currentTime-_+(d.startTime-h.currentTimeline.startTime)}}const W4={};class jW{constructor(l,a,h,d,f,p,g,m){this._driver=l,this.element=a,this.subInstructions=h,this._enterClassName=d,this._leaveClassName=f,this.errors=p,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=W4,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new G4(this._driver,a,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(l,a){if(!l)return;const h=l;let d=this.options;null!=h.duration&&(d.duration=yp(h.duration)),null!=h.delay&&(d.delay=yp(h.delay));const f=h.params;if(f){let p=d.params;p||(p=this.options.params={}),Object.keys(f).forEach(g=>{(!a||!p.hasOwnProperty(g))&&(p[g]=sT(f[g],p,this.errors))})}}_copyOptions(){const l={};if(this.options){const a=this.options.params;if(a){const h=l.params={};Object.keys(a).forEach(d=>{h[d]=a[d]})}}return l}createSubContext(l=null,a,h){const d=a||this.element,f=new jW(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,h||0));return f.previousNode=this.previousNode,f.currentAnimateTimings=this.currentAnimateTimings,f.options=this._copyOptions(),f.updateOptions(l),f.currentQueryIndex=this.currentQueryIndex,f.currentQueryTotal=this.currentQueryTotal,f.parentContext=this,this.subContextCount++,f}transformIntoNewTimeline(l){return this.previousNode=W4,this.currentTimeline=this.currentTimeline.fork(this.element,l),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(l,a,h){const d={duration:null!=a?a:l.duration,delay:this.currentTimeline.currentTime+(null!=h?h:0)+l.delay,easing:""},f=new Ywt(this._driver,l.element,l.keyframes,l.preStyleProps,l.postStyleProps,d,l.stretchStartingKeyframe);return this.timelines.push(f),d}incrementTime(l){this.currentTimeline.forwardTime(this.currentTimeline.duration+l)}delayNextStep(l){l>0&&this.currentTimeline.delayNextStep(l)}invokeQuery(l,a,h,d,f,p){let g=[];if(d&&g.push(this.element),l.length>0){l=(l=l.replace(jwt,"."+this._enterClassName)).replace(Zwt,"."+this._leaveClassName);let v=this._driver.query(this.element,l,1!=h);0!==h&&(v=h<0?v.slice(v.length+h,v.length):v.slice(0,h)),g.push(...v)}return!f&&0==g.length&&p.push(function twt(c){return new Et(3014,!1)}()),g}}class G4{constructor(l,a,h,d){this._driver=l,this.element=a,this.startTime=h,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(l){const a=1===this._keyframes.size&&this._pendingStyles.size;this.duration||a?(this.forwardTime(this.currentTime+l),a&&this.snapshotCurrentStyles()):this.startTime+=l}fork(l,a){return this.applyStylesToKeyframe(),new G4(this._driver,l,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(l){this.applyStylesToKeyframe(),this.duration=l,this._loadKeyframe()}_updateStyle(l,a){this._localTimelineStyles.set(l,a),this._globalTimelineStyles.set(l,a),this._styleSummary.set(l,{time:this.currentTime,value:a})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(l){l&&this._previousKeyframe.set("easing",l);for(let[a,h]of this._globalTimelineStyles)this._backFill.set(a,h||Cf),this._currentKeyframe.set(a,Cf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(l,a,h,d){var f;a&&this._previousKeyframe.set("easing",a);const p=d&&d.params||{},g=function Kwt(c,l){const a=new Map;let h;return c.forEach(d=>{if("*"===d){h=h||l.keys();for(let f of h)a.set(f,Cf)}else um(d,a)}),a}(l,this._globalTimelineStyles);for(let[m,v]of g){const y=sT(v,p,h);this._pendingStyles.set(m,y),this._localTimelineStyles.has(m)||this._backFill.set(m,null!==(f=this._globalTimelineStyles.get(m))&&void 0!==f?f:Cf),this._updateStyle(m,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((l,a)=>{this._currentKeyframe.set(a,l)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((l,a)=>{this._currentKeyframe.has(a)||this._currentKeyframe.set(a,l)}))}snapshotCurrentStyles(){for(let[l,a]of this._localTimelineStyles)this._pendingStyles.set(l,a),this._updateStyle(l,a)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const l=[];for(let a in this._currentKeyframe)l.push(a);return l}mergeTimelineCollectedStyles(l){l._styleSummary.forEach((a,h)=>{const d=this._styleSummary.get(h);(!d||a.time>d.time)&&this._updateStyle(h,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const l=new Set,a=new Set,h=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((g,m)=>{const v=um(g,new Map,this._backFill);v.forEach((y,_)=>{"!"===y?l.add(_):y===Cf&&a.add(_)}),h||v.set("offset",m/this.duration),d.push(v)});const f=l.size?L4(l.values()):[],p=a.size?L4(a.values()):[];if(h){const g=d[0],m=new Map(g);g.set("offset",0),m.set("offset",1),d=[g,m]}return GW(this.element,d,f,p,this.duration,this.startTime,this.easing,!1)}}class Ywt extends G4{constructor(l,a,h,d,f,p,g=!1){super(l,a,p.delay),this.keyframes=h,this.preStyleProps=d,this.postStyleProps=f,this._stretchStartingKeyframe=g,this.timings={duration:p.duration,delay:p.delay,easing:p.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let l=this.keyframes,{delay:a,duration:h,easing:d}=this.timings;if(this._stretchStartingKeyframe&&a){const f=[],p=h+a,g=a/p,m=um(l[0]);m.set("offset",0),f.push(m);const v=um(l[0]);v.set("offset",Vbe(g)),f.push(v);const y=l.length-1;for(let _=1;_<=y;_++){let b=um(l[_]);const C=b.get("offset");b.set("offset",Vbe((a+C*h)/p)),f.push(b)}h=p,a=0,d="",l=f}return GW(this.element,l,this.preStyleProps,this.postStyleProps,h,a,d,!0)}}function Vbe(c,l=3){const a=Math.pow(10,l-1);return Math.round(c*a)/a}class qW{}const Jwt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class eSt extends qW{normalizePropertyName(l,a){return HW(l)}normalizeStyleValue(l,a,h,d){let f="";const p=h.toString().trim();if(Jwt.has(a)&&0!==h&&"0"!==h)if("number"==typeof h)f="px";else{const g=h.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&d.push(function Wxt(c,l){return new Et(3005,!1)}())}return p+f}}function zbe(c,l,a,h,d,f,p,g,m,v,y,_,b){return{type:0,element:c,triggerName:l,isRemovalTransition:d,fromState:a,fromStyles:f,toState:h,toStyles:p,timelines:g,queriedElements:m,preStyleProps:v,postStyleProps:y,totalTime:_,errors:b}}const ZW={};class Ube{constructor(l,a,h){this._triggerName=l,this.ast=a,this._stateStyles=h}match(l,a,h,d){return function tSt(c,l,a,h,d){return c.some(f=>f(l,a,h,d))}(this.ast.matchers,l,a,h,d)}buildStyles(l,a,h){let d=this._stateStyles.get("*");return void 0!==l&&(d=this._stateStyles.get(null==l?void 0:l.toString())||d),d?d.buildStyles(a,h):new Map}build(l,a,h,d,f,p,g,m,v,y){var _;const b=[],C=this.ast.options&&this.ast.options.params||ZW,S=this.buildStyles(h,g&&g.params||ZW,b),w=m&&m.params||ZW,T=this.buildStyles(d,w,b),O=new Set,k=new Map,D=new Map,M="void"===d,A={params:nSt(w,C),delay:null===(_=this.ast.options)||void 0===_?void 0:_.delay},L=y?[]:QW(l,a,this.ast.animation,f,p,S,T,A,v,b);let E=0;if(L.forEach(z=>{E=Math.max(z.duration+z.delay,E)}),b.length)return zbe(a,this._triggerName,h,d,M,S,T,[],[],k,D,E,b);L.forEach(z=>{const U=z.element,Z=eu(k,U,new Set);z.preStyleProps.forEach(N=>Z.add(N));const Y=eu(D,U,new Set);z.postStyleProps.forEach(N=>Y.add(N)),U!==a&&O.add(U)});const V=L4(O.values());return zbe(a,this._triggerName,h,d,M,S,T,L,V,k,D,E)}}function nSt(c,l){const a=iT(l);for(const h in c)c.hasOwnProperty(h)&&null!=c[h]&&(a[h]=c[h]);return a}class iSt{constructor(l,a,h){this.styles=l,this.defaultParams=a,this.normalizer=h}buildStyles(l,a){const h=new Map,d=iT(this.defaultParams);return Object.keys(l).forEach(f=>{const p=l[f];null!==p&&(d[f]=p)}),this.styles.styles.forEach(f=>{"string"!=typeof f&&f.forEach((p,g)=>{p&&(p=sT(p,d,a));const m=this.normalizer.normalizePropertyName(g,a);p=this.normalizer.normalizeStyleValue(g,m,p,a),h.set(m,p)})}),h}}class sSt{constructor(l,a,h){this.name=l,this.ast=a,this._normalizer=h,this.transitionFactories=[],this.states=new Map,a.states.forEach(d=>{this.states.set(d.name,new iSt(d.style,d.options&&d.options.params||{},h))}),Hbe(this.states,"true","1"),Hbe(this.states,"false","0"),a.transitions.forEach(d=>{this.transitionFactories.push(new Ube(l,d,this.states))}),this.fallbackTransition=function oSt(c,l,a){return new Ube(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(p,g)=>!0],options:null,queryCount:0,depCount:0},l)}(l,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(l,a,h,d){return this.transitionFactories.find(p=>p.match(l,a,h,d))||null}matchStyles(l,a,h){return this.fallbackTransition.buildStyles(l,a,h)}}function Hbe(c,l,a){c.has(l)?c.has(a)||c.set(a,c.get(l)):c.has(a)&&c.set(l,c.get(a))}const aSt=new $4;class lSt{constructor(l,a,h){this.bodyNode=l,this._driver=a,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(l,a){const h=[],f=$W(this._driver,a,h,[]);if(h.length)throw function lwt(c){return new Et(3503,!1)}();this._animations.set(l,f)}_buildPlayer(l,a,h){const d=l.element,f=bbe(0,this._normalizer,0,l.keyframes,a,h);return this._driver.animate(d,f,l.duration,l.delay,l.easing,[],!0)}create(l,a,h={}){const d=[],f=this._animations.get(l);let p;const g=new Map;if(f?(p=QW(this._driver,a,f,BW,P4,new Map,new Map,h,aSt,d),p.forEach(y=>{const _=eu(g,y.element,new Map);y.postStyleProps.forEach(b=>_.set(b,null))})):(d.push(function cwt(){return new Et(3300,!1)}()),p=[]),d.length)throw function uwt(c){return new Et(3504,!1)}();g.forEach((y,_)=>{y.forEach((b,C)=>{y.set(C,this._driver.computeStyle(_,C,Cf))})});const v=cm(p.map(y=>{const _=g.get(y.element);return this._buildPlayer(y,new Map,_)}));return this._playersById.set(l,v),v.onDestroy(()=>this.destroy(l)),this.players.push(v),v}destroy(l){const a=this._getPlayer(l);a.destroy(),this._playersById.delete(l);const h=this.players.indexOf(a);h>=0&&this.players.splice(h,1)}_getPlayer(l){const a=this._playersById.get(l);if(!a)throw function hwt(c){return new Et(3301,!1)}();return a}listen(l,a,h,d){const f=RW(a,"","","");return IW(this._getPlayer(l),h,f,d),()=>{}}command(l,a,h,d){if("register"==h)return void this.register(l,d[0]);if("create"==h)return void this.create(l,a,d[0]||{});const f=this._getPlayer(l);switch(h){case"play":f.play();break;case"pause":f.pause();break;case"reset":f.reset();break;case"restart":f.restart();break;case"finish":f.finish();break;case"init":f.init();break;case"setPosition":f.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(l)}}}const $be="ng-animate-queued",XW="ng-animate-disabled",fSt=[],Wbe={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},pSt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ru="__ng_removed";class YW{constructor(l,a=""){this.namespaceId=a;const h=l&&l.hasOwnProperty("value");if(this.value=function ySt(c){return null!=c?c:null}(h?l.value:l),h){const f=iT(l);delete f.value,this.options=f}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(l){const a=l.params;if(a){const h=this.options.params;Object.keys(a).forEach(d=>{null==h[d]&&(h[d]=a[d])})}}}const oT="void",KW=new YW(oT);class gSt{constructor(l,a,h){this.id=l,this.hostElement=a,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+l,Fu(a,this._hostClassName)}listen(l,a,h,d){if(!this._triggers.has(a))throw function dwt(c,l){return new Et(3302,!1)}();if(null==h||0==h.length)throw function fwt(c){return new Et(3303,!1)}();if(!function _St(c){return"start"==c||"done"==c}(h))throw function pwt(c,l){return new Et(3400,!1)}();const f=eu(this._elementListeners,l,[]),p={name:a,phase:h,callback:d};f.push(p);const g=eu(this._engine.statesByElement,l,new Map);return g.has(a)||(Fu(l,R4),Fu(l,R4+"-"+a),g.set(a,KW)),()=>{this._engine.afterFlush(()=>{const m=f.indexOf(p);m>=0&&f.splice(m,1),this._triggers.has(a)||g.delete(a)})}}register(l,a){return!this._triggers.has(l)&&(this._triggers.set(l,a),!0)}_getTrigger(l){const a=this._triggers.get(l);if(!a)throw function gwt(c){return new Et(3401,!1)}();return a}trigger(l,a,h,d=!0){const f=this._getTrigger(a),p=new JW(this.id,a,l);let g=this._engine.statesByElement.get(l);g||(Fu(l,R4),Fu(l,R4+"-"+a),this._engine.statesByElement.set(l,g=new Map));let m=g.get(a);const v=new YW(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),g.set(a,v),m||(m=KW),v.value!==oT&&m.value===v.value){if(!function xSt(c,l){const a=Object.keys(c),h=Object.keys(l);if(a.length!=h.length)return!1;for(let d=0;d<a.length;d++){const f=a[d];if(!l.hasOwnProperty(f)||c[f]!==l[f])return!1}return!0}(m.params,v.params)){const S=[],w=f.matchStyles(m.value,m.params,S),T=f.matchStyles(v.value,v.params,S);S.length?this._engine.reportError(S):this._engine.afterFlush(()=>{Mv(l,w),Xd(l,T)})}return}const b=eu(this._engine.playersByElement,l,[]);b.forEach(S=>{S.namespaceId==this.id&&S.triggerName==a&&S.queued&&S.destroy()});let C=f.matchTransition(m.value,v.value,l,v.params),x=!1;if(!C){if(!d)return;C=f.fallbackTransition,x=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:a,transition:C,fromState:m,toState:v,player:p,isFallbackTransition:x}),x||(Fu(l,$be),p.onStart(()=>{Rb(l,$be)})),p.onDone(()=>{let S=this.players.indexOf(p);S>=0&&this.players.splice(S,1);const w=this._engine.playersByElement.get(l);if(w){let T=w.indexOf(p);T>=0&&w.splice(T,1)}}),this.players.push(p),b.push(p),p}deregister(l){this._triggers.delete(l),this._engine.statesByElement.forEach(a=>a.delete(l)),this._elementListeners.forEach((a,h)=>{this._elementListeners.set(h,a.filter(d=>d.name!=l))})}clearElementCache(l){this._engine.statesByElement.delete(l),this._elementListeners.delete(l);const a=this._engine.playersByElement.get(l);a&&(a.forEach(h=>h.destroy()),this._engine.playersByElement.delete(l))}_signalRemovalForInnerTriggers(l,a){const h=this._engine.driver.query(l,F4,!0);h.forEach(d=>{if(d[Ru])return;const f=this._engine.fetchNamespacesByElement(d);f.size?f.forEach(p=>p.triggerLeaveAnimation(d,a,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(l,a,h,d){const f=this._engine.statesByElement.get(l),p=new Map;if(f){const g=[];if(f.forEach((m,v)=>{if(p.set(v,m.value),this._triggers.has(v)){const y=this.trigger(l,v,oT,d);y&&g.push(y)}}),g.length)return this._engine.markElementAsRemoved(this.id,l,!0,a,p),h&&cm(g).onDone(()=>this._engine.processLeaveNode(l)),!0}return!1}prepareLeaveAnimationListeners(l){const a=this._elementListeners.get(l),h=this._engine.statesByElement.get(l);if(a&&h){const d=new Set;a.forEach(f=>{const p=f.name;if(d.has(p))return;d.add(p);const m=this._triggers.get(p).fallbackTransition,v=h.get(p)||KW,y=new YW(oT),_=new JW(this.id,p,l);this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:p,transition:m,fromState:v,toState:y,player:_,isFallbackTransition:!0})})}}removeNode(l,a){const h=this._engine;if(l.childElementCount&&this._signalRemovalForInnerTriggers(l,a),this.triggerLeaveAnimation(l,a,!0))return;let d=!1;if(h.totalAnimations){const f=h.players.length?h.playersByQueriedElement.get(l):[];if(f&&f.length)d=!0;else{let p=l;for(;p=p.parentNode;)if(h.statesByElement.get(p)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(l),d)h.markElementAsRemoved(this.id,l,!1,a);else{const f=l[Ru];(!f||f===Wbe)&&(h.afterFlush(()=>this.clearElementCache(l)),h.destroyInnerAnimations(l),h._onRemovalComplete(l,a))}}insertNode(l,a){Fu(l,this._hostClassName)}drainQueuedTransitions(l){const a=[];return this._queue.forEach(h=>{const d=h.player;if(d.destroyed)return;const f=h.element,p=this._elementListeners.get(f);p&&p.forEach(g=>{if(g.name==h.triggerName){const m=RW(f,h.triggerName,h.fromState.value,h.toState.value);m._data=l,IW(h.player,g.phase,m,g.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):a.push(h)}),this._queue=[],a.sort((h,d)=>{const f=h.transition.ast.depCount,p=d.transition.ast.depCount;return 0==f||0==p?f-p:this._engine.driver.containsElement(h.element,d.element)?1:-1})}destroy(l){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,l)}elementContainsData(l){let a=!1;return this._elementListeners.has(l)&&(a=!0),a=!!this._queue.find(h=>h.element===l)||a,a}}class mSt{constructor(l,a,h){this.bodyNode=l,this.driver=a,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,f)=>{}}_onRemovalComplete(l,a){this.onRemovalComplete(l,a)}get queuedPlayers(){const l=[];return this._namespaceList.forEach(a=>{a.players.forEach(h=>{h.queued&&l.push(h)})}),l}createNamespace(l,a){const h=new gSt(l,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(h,a):(this.newHostElements.set(a,h),this.collectEnterElement(a)),this._namespaceLookup[l]=h}_balanceNamespaceList(l,a){const h=this._namespaceList,d=this.namespacesByHostElement;if(h.length-1>=0){let p=!1,g=this.driver.getParentElement(a);for(;g;){const m=d.get(g);if(m){const v=h.indexOf(m);h.splice(v+1,0,l),p=!0;break}g=this.driver.getParentElement(g)}p||h.unshift(l)}else h.push(l);return d.set(a,l),l}register(l,a){let h=this._namespaceLookup[l];return h||(h=this.createNamespace(l,a)),h}registerTrigger(l,a,h){let d=this._namespaceLookup[l];d&&d.register(a,h)&&this.totalAnimations++}destroy(l,a){if(!l)return;const h=this._fetchNamespace(l);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[l];const d=this._namespaceList.indexOf(h);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>h.destroy(a))}_fetchNamespace(l){return this._namespaceLookup[l]}fetchNamespacesByElement(l){const a=new Set,h=this.statesByElement.get(l);if(h)for(let d of h.values())if(d.namespaceId){const f=this._fetchNamespace(d.namespaceId);f&&a.add(f)}return a}trigger(l,a,h,d){if(Q4(a)){const f=this._fetchNamespace(l);if(f)return f.trigger(a,h,d),!0}return!1}insertNode(l,a,h,d){if(!Q4(a))return;const f=a[Ru];if(f&&f.setForRemoval){f.setForRemoval=!1,f.setForMove=!0;const p=this.collectedLeaveElements.indexOf(a);p>=0&&this.collectedLeaveElements.splice(p,1)}if(l){const p=this._fetchNamespace(l);p&&p.insertNode(a,h)}d&&this.collectEnterElement(a)}collectEnterElement(l){this.collectedEnterElements.push(l)}markElementAsDisabled(l,a){a?this.disabledNodes.has(l)||(this.disabledNodes.add(l),Fu(l,XW)):this.disabledNodes.has(l)&&(this.disabledNodes.delete(l),Rb(l,XW))}removeNode(l,a,h,d){if(Q4(a)){const f=l?this._fetchNamespace(l):null;if(f?f.removeNode(a,d):this.markElementAsRemoved(l,a,!1,d),h){const p=this.namespacesByHostElement.get(a);p&&p.id!==l&&p.removeNode(a,d)}}else this._onRemovalComplete(a,d)}markElementAsRemoved(l,a,h,d,f){this.collectedLeaveElements.push(a),a[Ru]={namespaceId:l,setForRemoval:d,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:f}}listen(l,a,h,d,f){return Q4(a)?this._fetchNamespace(l).listen(a,h,d,f):()=>{}}_buildInstruction(l,a,h,d,f){return l.transition.build(this.driver,l.element,l.fromState.value,l.toState.value,h,d,l.fromState.options,l.toState.options,a,f)}destroyInnerAnimations(l){let a=this.driver.query(l,F4,!0);a.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(l,VW,!0),a.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(l){const a=this.playersByElement.get(l);a&&a.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(l){const a=this.playersByQueriedElement.get(l);a&&a.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(l=>{if(this.players.length)return cm(this.players).onDone(()=>l());l()})}processLeaveNode(l){var a;const h=l[Ru];if(h&&h.setForRemoval){if(l[Ru]=Wbe,h.namespaceId){this.destroyInnerAnimations(l);const d=this._fetchNamespace(h.namespaceId);d&&d.clearElementCache(l)}this._onRemovalComplete(l,h.setForRemoval)}!(null===(a=l.classList)||void 0===a)&&a.contains(XW)&&this.markElementAsDisabled(l,!1),this.driver.query(l,".ng-animate-disabled",!0).forEach(d=>{this.markElementAsDisabled(d,!1)})}flush(l=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,d)=>this._balanceNamespaceList(h,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Fu(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{a=this._flushAnimations(h,l)}finally{for(let d=0;d<h.length;d++)h[d]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],a.length?cm(a).onDone(()=>{h.forEach(d=>d())}):h.forEach(d=>d())}}reportError(l){throw function mwt(c){return new Et(3402,!1)}()}_flushAnimations(l,a){const h=new $4,d=[],f=new Map,p=[],g=new Map,m=new Map,v=new Map,y=new Set;this.disabledNodes.forEach(H=>{y.add(H);const G=this.driver.query(H,".ng-animate-queued",!0);for(let W=0;W<G.length;W++)y.add(G[W])});const _=this.bodyNode,b=Array.from(this.statesByElement.keys()),C=jbe(b,this.collectedEnterElements),x=new Map;let S=0;C.forEach((H,G)=>{const W=BW+S++;x.set(G,W),H.forEach(j=>Fu(j,W))});const w=[],T=new Set,O=new Set;for(let H=0;H<this.collectedLeaveElements.length;H++){const G=this.collectedLeaveElements[H],W=G[Ru];W&&W.setForRemoval&&(w.push(G),T.add(G),W.hasAnimation?this.driver.query(G,".ng-star-inserted",!0).forEach(j=>T.add(j)):O.add(G))}const k=new Map,D=jbe(b,Array.from(T));D.forEach((H,G)=>{const W=P4+S++;k.set(G,W),H.forEach(j=>Fu(j,W))}),l.push(()=>{C.forEach((H,G)=>{const W=x.get(G);H.forEach(j=>Rb(j,W))}),D.forEach((H,G)=>{const W=k.get(G);H.forEach(j=>Rb(j,W))}),w.forEach(H=>{this.processLeaveNode(H)})});const M=[],A=[];for(let H=this._namespaceList.length-1;H>=0;H--)this._namespaceList[H].drainQueuedTransitions(a).forEach(W=>{const j=W.player,Q=W.element;if(M.push(j),this.collectedEnterElements.length){const Me=Q[Ru];if(Me&&Me.setForMove){if(Me.previousTriggersValues&&Me.previousTriggersValues.has(W.triggerName)){const Qe=Me.previousTriggersValues.get(W.triggerName),Ie=this.statesByElement.get(W.element);if(Ie&&Ie.has(W.triggerName)){const Ve=Ie.get(W.triggerName);Ve.value=Qe,Ie.set(W.triggerName,Ve)}}return void j.destroy()}}const J=!_||!this.driver.containsElement(_,Q),te=k.get(Q),ce=x.get(Q),ae=this._buildInstruction(W,h,ce,te,J);if(ae.errors&&ae.errors.length)return void A.push(ae);if(J)return j.onStart(()=>Mv(Q,ae.fromStyles)),j.onDestroy(()=>Xd(Q,ae.toStyles)),void d.push(j);if(W.isFallbackTransition)return j.onStart(()=>Mv(Q,ae.fromStyles)),j.onDestroy(()=>Xd(Q,ae.toStyles)),void d.push(j);const Se=[];ae.timelines.forEach(Me=>{Me.stretchStartingKeyframe=!0,this.disabledNodes.has(Me.element)||Se.push(Me)}),ae.timelines=Se,h.append(Q,ae.timelines),p.push({instruction:ae,player:j,element:Q}),ae.queriedElements.forEach(Me=>eu(g,Me,[]).push(j)),ae.preStyleProps.forEach((Me,Qe)=>{if(Me.size){let Ie=m.get(Qe);Ie||m.set(Qe,Ie=new Set),Me.forEach((Ve,Je)=>Ie.add(Je))}}),ae.postStyleProps.forEach((Me,Qe)=>{let Ie=v.get(Qe);Ie||v.set(Qe,Ie=new Set),Me.forEach((Ve,Je)=>Ie.add(Je))})});if(A.length){const H=[];A.forEach(G=>{H.push(function vwt(c,l){return new Et(3505,!1)}())}),M.forEach(G=>G.destroy()),this.reportError(H)}const L=new Map,E=new Map;p.forEach(H=>{const G=H.element;h.has(G)&&(E.set(G,G),this._beforeAnimationBuild(H.player.namespaceId,H.instruction,L))}),d.forEach(H=>{const G=H.element;this._getPreviousPlayers(G,!1,H.namespaceId,H.triggerName,null).forEach(j=>{eu(L,G,[]).push(j),j.destroy()})});const V=w.filter(H=>Zbe(H,m,v)),z=new Map;Qbe(z,this.driver,O,v,Cf).forEach(H=>{Zbe(H,m,v)&&V.push(H)});const Z=new Map;C.forEach((H,G)=>{Qbe(Z,this.driver,new Set(H),m,"!")}),V.forEach(H=>{var G,W;const j=z.get(H),Q=Z.get(H);z.set(H,new Map([...Array.from(null!==(G=null==j?void 0:j.entries())&&void 0!==G?G:[]),...Array.from(null!==(W=null==Q?void 0:Q.entries())&&void 0!==W?W:[])]))});const Y=[],N=[],$={};p.forEach(H=>{const{element:G,player:W,instruction:j}=H;if(h.has(G)){if(y.has(G))return W.onDestroy(()=>Xd(G,j.toStyles)),W.disabled=!0,W.overrideTotalTime(j.totalTime),void d.push(W);let Q=$;if(E.size>1){let te=G;const ce=[];for(;te=te.parentNode;){const ae=E.get(te);if(ae){Q=ae;break}ce.push(te)}ce.forEach(ae=>E.set(ae,Q))}const J=this._buildAnimation(W.namespaceId,j,L,f,Z,z);if(W.setRealPlayer(J),Q===$)Y.push(W);else{const te=this.playersByElement.get(Q);te&&te.length&&(W.parentPlayer=cm(te)),d.push(W)}}else Mv(G,j.fromStyles),W.onDestroy(()=>Xd(G,j.toStyles)),N.push(W),y.has(G)&&d.push(W)}),N.forEach(H=>{const G=f.get(H.element);if(G&&G.length){const W=cm(G);H.setRealPlayer(W)}}),d.forEach(H=>{H.parentPlayer?H.syncPlayerEvents(H.parentPlayer):H.destroy()});for(let H=0;H<w.length;H++){const G=w[H],W=G[Ru];if(Rb(G,P4),W&&W.hasAnimation)continue;let j=[];if(g.size){let J=g.get(G);J&&J.length&&j.push(...J);let te=this.driver.query(G,VW,!0);for(let ce=0;ce<te.length;ce++){let ae=g.get(te[ce]);ae&&ae.length&&j.push(...ae)}}const Q=j.filter(J=>!J.destroyed);Q.length?bSt(this,G,Q):this.processLeaveNode(G)}return w.length=0,Y.forEach(H=>{this.players.push(H),H.onDone(()=>{H.destroy();const G=this.players.indexOf(H);this.players.splice(G,1)}),H.play()}),Y}elementContainsData(l,a){let h=!1;const d=a[Ru];return d&&d.setForRemoval&&(h=!0),this.playersByElement.has(a)&&(h=!0),this.playersByQueriedElement.has(a)&&(h=!0),this.statesByElement.has(a)&&(h=!0),this._fetchNamespace(l).elementContainsData(a)||h}afterFlush(l){this._flushFns.push(l)}afterFlushAnimationsDone(l){this._whenQuietFns.push(l)}_getPreviousPlayers(l,a,h,d,f){let p=[];if(a){const g=this.playersByQueriedElement.get(l);g&&(p=g)}else{const g=this.playersByElement.get(l);if(g){const m=!f||f==oT;g.forEach(v=>{v.queued||!m&&v.triggerName!=d||p.push(v)})}}return(h||d)&&(p=p.filter(g=>!(h&&h!=g.namespaceId||d&&d!=g.triggerName))),p}_beforeAnimationBuild(l,a,h){const f=a.element,p=a.isRemovalTransition?void 0:l,g=a.isRemovalTransition?void 0:a.triggerName;for(const m of a.timelines){const v=m.element,y=v!==f,_=eu(h,v,[]);this._getPreviousPlayers(v,y,p,g,a.toState).forEach(C=>{const x=C.getRealPlayer();x.beforeDestroy&&x.beforeDestroy(),C.destroy(),_.push(C)})}Mv(f,a.fromStyles)}_buildAnimation(l,a,h,d,f,p){const g=a.triggerName,m=a.element,v=[],y=new Set,_=new Set,b=a.timelines.map(x=>{const S=x.element;y.add(S);const w=S[Ru];if(w&&w.removedBeforeQueried)return new ux(x.duration,x.delay);const T=S!==m,O=function CSt(c){const l=[];return qbe(c,l),l}((h.get(S)||fSt).map(L=>L.getRealPlayer())).filter(L=>!!L.element&&L.element===S),k=f.get(S),D=p.get(S),M=bbe(0,this._normalizer,0,x.keyframes,k,D),A=this._buildPlayer(x,M,O);if(x.subTimeline&&d&&_.add(S),T){const L=new JW(l,g,S);L.setRealPlayer(A),v.push(L)}return A});v.forEach(x=>{eu(this.playersByQueriedElement,x.element,[]).push(x),x.onDone(()=>function vSt(c,l,a){let h=c.get(l);if(h){if(h.length){const d=h.indexOf(a);h.splice(d,1)}0==h.length&&c.delete(l)}return h}(this.playersByQueriedElement,x.element,x))}),y.forEach(x=>Fu(x,Mbe));const C=cm(b);return C.onDestroy(()=>{y.forEach(x=>Rb(x,Mbe)),Xd(m,a.toStyles)}),_.forEach(x=>{eu(d,x,[]).push(C)}),C}_buildPlayer(l,a,h){return a.length>0?this.driver.animate(l.element,a,l.duration,l.delay,l.easing,h):new ux(l.duration,l.delay)}}class JW{constructor(l,a,h){this.namespaceId=l,this.triggerName=a,this.element=h,this._player=new ux,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(l){this._containsRealPlayer||(this._player=l,this._queuedCallbacks.forEach((a,h)=>{a.forEach(d=>IW(l,h,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(l.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(l){this.totalTime=l}syncPlayerEvents(l){const a=this._player;a.triggerCallback&&l.onStart(()=>a.triggerCallback("start")),l.onDone(()=>this.finish()),l.onDestroy(()=>this.destroy())}_queueEvent(l,a){eu(this._queuedCallbacks,l,[]).push(a)}onDone(l){this.queued&&this._queueEvent("done",l),this._player.onDone(l)}onStart(l){this.queued&&this._queueEvent("start",l),this._player.onStart(l)}onDestroy(l){this.queued&&this._queueEvent("destroy",l),this._player.onDestroy(l)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(l){this.queued||this._player.setPosition(l)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(l){const a=this._player;a.triggerCallback&&a.triggerCallback(l)}}function Q4(c){return c&&1===c.nodeType}function Gbe(c,l){const a=c.style.display;return c.style.display=null!=l?l:"none",a}function Qbe(c,l,a,h,d){const f=[];a.forEach(m=>f.push(Gbe(m)));const p=[];h.forEach((m,v)=>{const y=new Map;m.forEach(_=>{const b=l.computeStyle(v,_,d);y.set(_,b),(!b||0==b.length)&&(v[Ru]=pSt,p.push(v))}),c.set(v,y)});let g=0;return a.forEach(m=>Gbe(m,f[g++])),p}function jbe(c,l){const a=new Map;if(c.forEach(g=>a.set(g,[])),0==l.length)return a;const d=new Set(l),f=new Map;function p(g){if(!g)return 1;let m=f.get(g);if(m)return m;const v=g.parentNode;return m=a.has(v)?v:d.has(v)?1:p(v),f.set(g,m),m}return l.forEach(g=>{const m=p(g);1!==m&&a.get(m).push(g)}),a}function Fu(c,l){var a;null===(a=c.classList)||void 0===a||a.add(l)}function Rb(c,l){var a;null===(a=c.classList)||void 0===a||a.remove(l)}function bSt(c,l,a){cm(a).onDone(()=>c.processLeaveNode(l))}function qbe(c,l){for(let a=0;a<c.length;a++){const h=c[a];h instanceof GJ?qbe(h.players,l):l.push(h)}}function Zbe(c,l,a){const h=a.get(c);if(!h)return!1;let d=l.get(c);return d?h.forEach(f=>d.add(f)):l.set(c,h),a.delete(c),!0}class j4{constructor(l,a,h){this.bodyNode=l,this._driver=a,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(d,f)=>{},this._transitionEngine=new mSt(l,a,h),this._timelineEngine=new lSt(l,a,h),this._transitionEngine.onRemovalComplete=(d,f)=>this.onRemovalComplete(d,f)}registerTrigger(l,a,h,d,f){const p=l+"-"+d;let g=this._triggerCache[p];if(!g){const m=[],y=$W(this._driver,f,m,[]);if(m.length)throw function owt(c,l){return new Et(3404,!1)}();g=function rSt(c,l,a){return new sSt(c,l,a)}(d,y,this._normalizer),this._triggerCache[p]=g}this._transitionEngine.registerTrigger(a,d,g)}register(l,a){this._transitionEngine.register(l,a)}destroy(l,a){this._transitionEngine.destroy(l,a)}onInsert(l,a,h,d){this._transitionEngine.insertNode(l,a,h,d)}onRemove(l,a,h,d){this._transitionEngine.removeNode(l,a,d||!1,h)}disableAnimations(l,a){this._transitionEngine.markElementAsDisabled(l,a)}process(l,a,h,d){if("@"==h.charAt(0)){const[f,p]=Cbe(h);this._timelineEngine.command(f,a,p,d)}else this._transitionEngine.trigger(l,a,h,d)}listen(l,a,h,d,f){if("@"==h.charAt(0)){const[p,g]=Cbe(h);return this._timelineEngine.listen(p,a,g,f)}return this._transitionEngine.listen(l,a,h,d,f)}flush(l=-1){this._transitionEngine.flush(l)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let SSt=(()=>{class c{constructor(a,h,d){this._element=a,this._startStyles=h,this._endStyles=d,this._state=0;let f=c.initialStylesByElement.get(a);f||c.initialStylesByElement.set(a,f=new Map),this._initialStyles=f}start(){this._state<1&&(this._startStyles&&Xd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xd(this._element,this._initialStyles),this._endStyles&&(Xd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(Mv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mv(this._element,this._endStyles),this._endStyles=null),Xd(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function eG(c){let l=null;return c.forEach((a,h)=>{(function TSt(c){return"display"===c||"position"===c})(h)&&(l=l||new Map,l.set(h,a))}),l}class Xbe{constructor(l,a,h,d){this.element=l,this.keyframes=a,this.options=h,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const l=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,l,this.options),this._finalKeyframe=l.length?l[l.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(l){const a=[];return l.forEach(h=>{a.push(Object.fromEntries(h))}),a}_triggerWebAnimation(l,a,h){return l.animate(this._convertKeyframesToObject(a),h)}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(l=>l()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}setPosition(l){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=l*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const l=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,d)=>{"offset"!==d&&l.set(d,this._finished?h:Fbe(this.element,d))}),this.currentSnapshot=l}triggerCallback(l){const a="start"===l?this._onStartFns:this._onDoneFns;a.forEach(h=>h()),a.length=0}}class OSt{validateStyleProperty(l){return!0}validateAnimatableStyleProperty(l){return!0}matchesElement(l,a){return!1}containsElement(l,a){return Tbe(l,a)}getParentElement(l){return NW(l)}query(l,a,h){return Obe(l,a,h)}computeStyle(l,a,h){return window.getComputedStyle(l)[a]}animate(l,a,h,d,f,p=[]){const m={duration:h,delay:d,fill:0==d?"both":"forwards"};f&&(m.easing=f);const v=new Map,y=p.filter(C=>C instanceof Xbe);(function Ewt(c,l){return 0===c||0===l})(h,d)&&y.forEach(C=>{C.currentSnapshot.forEach((x,S)=>v.set(S,x))});let _=function Owt(c){return c.length?c[0]instanceof Map?c:c.map(l=>Ebe(l)):[]}(a).map(C=>um(C));_=function Awt(c,l,a){if(a.size&&l.length){let h=l[0],d=[];if(a.forEach((f,p)=>{h.has(p)||d.push(p),h.set(p,f)}),d.length)for(let f=1;f<l.length;f++){let p=l[f];d.forEach(g=>p.set(g,Fbe(c,g)))}}return l}(l,_,v);const b=function wSt(c,l){let a=null,h=null;return Array.isArray(l)&&l.length?(a=eG(l[0]),l.length>1&&(h=eG(l[l.length-1]))):l instanceof Map&&(a=eG(l)),a||h?new SSt(c,a,h):null}(l,_);return new Xbe(l,_,m,b)}}let DSt=(()=>{class c extends HJ{constructor(a,h){super(),this._nextAnimationId=0,this._renderer=a.createRenderer(h.body,{id:"0",encapsulation:Vu.None,styles:[],data:{animation:[]}})}build(a){const h=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(a)?$J(a):a;return Ybe(this._renderer,null,h,"register",[d]),new kSt(h,this._renderer)}}return c.\u0275fac=function(a){return new(a||c)(Ae(ty),Ae(Dr))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class kSt extends class j4e{}{constructor(l,a){super(),this._id=l,this._renderer=a}create(l,a){return new MSt(this._id,l,a||{},this._renderer)}}class MSt{constructor(l,a,h,d){this.id=l,this.element=a,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(l,a){return this._renderer.listen(this.element,`@@${this.id}:${l}`,a)}_command(l,...a){return Ybe(this._renderer,this.element,this.id,l,a)}onDone(l){this._listen("done",l)}onStart(l){this._listen("start",l)}onDestroy(l){this._listen("destroy",l)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(l){this._command("setPosition",l)}getPosition(){var l,a;return null!==(a=null===(l=this._renderer.engine.players[+this.id])||void 0===l?void 0:l.getPosition())&&void 0!==a?a:0}}function Ybe(c,l,a,h,d){return c.setProperty(l,`@@${a}:${h}`,d)}const Kbe="@.disabled";let ESt=(()=>{class c{constructor(a,h,d){this.delegate=a,this.engine=h,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(f,p)=>{const g=null==p?void 0:p.parentNode(f);g&&p.removeChild(g,f)}}createRenderer(a,h){const f=this.delegate.createRenderer(a,h);if(!(a&&h&&h.data&&h.data.animation)){let y=this._rendererCache.get(f);return y||(y=new Jbe("",f,this.engine),this._rendererCache.set(f,y)),y}const p=h.id,g=h.id+"-"+this._currentId;this._currentId++,this.engine.register(g,a);const m=y=>{Array.isArray(y)?y.forEach(m):this.engine.registerTrigger(p,g,a,y.name,y)};return h.data.animation.forEach(m),new ASt(this,g,f,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(a,h,d){a>=0&&a<this._microtaskId?this._zone.run(()=>h(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(f=>{const[p,g]=f;p(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(a){return new(a||c)(Ae(ty),Ae(j4),Ae(Zi))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class Jbe{constructor(l,a,h){this.namespaceId=l,this.delegate=a,this.engine=h,this.destroyNode=this.delegate.destroyNode?d=>a.destroyNode(d):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(l,a){return this.delegate.createElement(l,a)}createComment(l){return this.delegate.createComment(l)}createText(l){return this.delegate.createText(l)}appendChild(l,a){this.delegate.appendChild(l,a),this.engine.onInsert(this.namespaceId,a,l,!1)}insertBefore(l,a,h,d=!0){this.delegate.insertBefore(l,a,h),this.engine.onInsert(this.namespaceId,a,l,d)}removeChild(l,a,h){this.engine.onRemove(this.namespaceId,a,this.delegate,h)}selectRootElement(l,a){return this.delegate.selectRootElement(l,a)}parentNode(l){return this.delegate.parentNode(l)}nextSibling(l){return this.delegate.nextSibling(l)}setAttribute(l,a,h,d){this.delegate.setAttribute(l,a,h,d)}removeAttribute(l,a,h){this.delegate.removeAttribute(l,a,h)}addClass(l,a){this.delegate.addClass(l,a)}removeClass(l,a){this.delegate.removeClass(l,a)}setStyle(l,a,h,d){this.delegate.setStyle(l,a,h,d)}removeStyle(l,a,h){this.delegate.removeStyle(l,a,h)}setProperty(l,a,h){"@"==a.charAt(0)&&a==Kbe?this.disableAnimations(l,!!h):this.delegate.setProperty(l,a,h)}setValue(l,a){this.delegate.setValue(l,a)}listen(l,a,h){return this.delegate.listen(l,a,h)}disableAnimations(l,a){this.engine.disableAnimations(l,a)}}class ASt extends Jbe{constructor(l,a,h,d){super(a,h,d),this.factory=l,this.namespaceId=a}setProperty(l,a,h){"@"==a.charAt(0)?"."==a.charAt(1)&&a==Kbe?this.disableAnimations(l,h=void 0===h||!!h):this.engine.process(this.namespaceId,l,a.slice(1),h):this.delegate.setProperty(l,a,h)}listen(l,a,h){if("@"==a.charAt(0)){const d=function ISt(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(l);let f=a.slice(1),p="";return"@"!=f.charAt(0)&&([f,p]=function PSt(c){const l=c.indexOf(".");return[c.substring(0,l),c.slice(l+1)]}(f)),this.engine.listen(this.namespaceId,d,f,p,g=>{this.factory.scheduleListenerCallback(g._data||-1,h,g)})}return this.delegate.listen(l,a,h)}}let RSt=(()=>{class c extends j4{constructor(a,h,d,f){super(a.body,h,d)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dr),Ae(LW),Ae(qW),Ae(NC))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();const eCe=[{provide:HJ,useClass:DSt},{provide:qW,useFactory:function FSt(){return new eSt}},{provide:j4,useClass:RSt},{provide:ty,useFactory:function NSt(c,l,a){return new ESt(c,l,a)},deps:[VO,j4,Zi]}],tG=[{provide:LW,useFactory:()=>new OSt},{provide:yX,useValue:"BrowserAnimations"},...eCe],tCe=[{provide:LW,useClass:Dbe},{provide:yX,useValue:"NoopAnimations"},...eCe];let LSt=(()=>{class c{static withConfig(a){return{ngModule:c,providers:a.disableAnimations?tCe:tG}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c}),c.\u0275inj=Mn({providers:tG,imports:[FY]}),c})();function BSt(c,l){if(1&c){const a=at();I(0,"div",11),ee("click",function(){return De(a),ke(q().$implicit.onButtonClick())}),I(1,"button",12),ie(2),F()()}if(2&c){const a=q().$implicit;P(2),Ut(a.buttonText)}}function VSt(c,l){if(1&c&&(I(0,"div",6)(1,"div",7),ue(2,"clr-icon",8),F(),I(3,"div",9),ie(4),F(),X(5,BSt,3,1,"div",10),F()),2&c){const a=l.$implicit;P(4),Ti(" ",a.text," "),P(1),R("ngIf",a.buttonText)}}function zSt(c,l){if(1&c&&(I(0,"div",1)(1,"div",2),X(2,VSt,6,2,"div",3),F(),I(3,"button",4),ue(4,"clr-icon",5),F()()),2&c){const a=q();P(2),R("ngForOf",a.config.alerts)}}let USt=(()=>{class c{constructor(a){this.config=a,this.id=0}isShowType(a){return this.config.showType==a}ngOnInit(){let a=++this.id,d=()=>{a===this.id&&(this.update(),this.config.post(d,1e3))};this.config.post(d,1e3)}ngOnDestroy(){++this.id}update(){!this.config.alerts||0==this.config.alerts.length||this.config.alerts.map(a=>a).forEach(a=>{a.update()||a.remove()})}}return c.\u0275fac=function(a){return new(a||c)(B(on))},c.\u0275cmp=je({type:c,selectors:[["app-alerts"]],decls:1,vars:1,consts:[["class","alert alert-app-level alert-info","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-app-level","alert-info"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","exclamation-circle",1,"alert-icon"],[1,"alert-text"],["class","alert-actions",3,"click",4,"ngIf"],[1,"alert-actions",3,"click"],[1,"btn","alert-action"]],template:function(a,h){1&a&&X(0,zSt,5,1,"div",0),2&a&&R("ngIf",h.config.alerts.length>0)},dependencies:[fi,_n,ik,eo]}),c})();const HSt=function(c){return{"nav-link":!0,"nav-icon":!0,active:c}},$St=function(c,l){return{"has-badge":c,"has-alert":l}};function WSt(c,l){if(1&c){const a=at();I(0,"a",7),ee("click",function(d){const p=De(a).$implicit;return ke(q(2).navigateTo(d,p))}),ue(1,"clr-icon",1),F()}if(2&c){const a=l.$implicit,h=q(2);R("ngClass",ys(3,HSt,h.isActive(a))),P(1),R("ngClass",as(5,$St,a.hasBadge,a.hasAlert)),et("shape",a.shape)}}const GSt=function(c){return{header:!0,"header-6":!0,bgmaroon:c,"no-print":!0}};function QSt(c,l){if(1&c){const a=at();I(0,"header")(1,"div",3),ee("click",function(){return De(a),ke(q().onRootRoute())}),ue(2,"app-svg-js-image",4),F(),I(3,"div",5),X(4,WSt,2,8,"a",6),F()()}if(2&c){const a=q();jR(ys(6,GSt,a.isRedTheme())),P(2),R("svgWidth",128)("svgHeight",32)("logoText",a.getTitle()),P(2),R("ngForOf",a.getLinks())}}const jSt=function(c){return{"main-container":c}},qSt=function(c){return{"content-container":c}},ZSt=function(c){return{"content-area":c}};let XSt=(()=>{class c{constructor(a,h,d){this.router=a,this.config=h,this.uiConfig=d,this.names=[ei.builder().setLink("https://deviskin.github.io").setName("Deviskin")]}get applicationInfo(){return this.config.getApplication()}ngOnInit(){}navigateTo(a,h){h.onClick?h.onClick(h):(this.uiConfig.ui.defaultAppRoute.setStringValue(h.link),this.router.navigate([h.link]))}navigateToMain(a){this.router.navigate(["/main"])}isActive(a){return a.isActive?a.isActive(a):this.router.isActive(a.link,!1)}isUpperMenuEnabled(){return!0}isLeftBarEnabled(){return!1}isRightBarEnabled(){return!1}isFooterBarEnabled(){return!1}onCompiler(){this.router.navigate(["/compiler"])}isRedTheme(){return!1}onRootRoute(){this.config.setShowLogin(!1)}getTitle(){return this.applicationInfo.name}getLinks(){return this.uiConfig.appRoutes||this.applicationInfo.routes}isMainContainerEnabled(){return this.uiConfig.mainContainerEnabled}}return c.\u0275fac=function(a){return new(a||c)(B(ts),B(on),B(ti))},c.\u0275cmp=je({type:c,selectors:[["app-default"]],decls:6,vars:10,consts:[[1,"clr-example"],[3,"ngClass"],[3,"class",4,"ngIf"],[1,"logotypeImage","cursor",3,"click"],[3,"svgWidth","svgHeight","logoText"],[1,"header-nav"],["href","javascript://",3,"ngClass","click",4,"ngFor","ngForOf"],["href","javascript://",3,"ngClass","click"]],template:function(a,h){1&a&&(I(0,"div",0)(1,"div",1),X(2,QSt,5,8,"header",2),I(3,"div",1)(4,"div",1),ue(5,"router-outlet"),F()()()()),2&a&&(P(1),R("ngClass",ys(4,jSt,h.isMainContainerEnabled())),P(1),R("ngIf",h.isUpperMenuEnabled()),P(1),R("ngClass",ys(6,qSt,h.isMainContainerEnabled())),P(1),R("ngClass",ys(8,ZSt,h.isMainContainerEnabled())))},dependencies:[si,fi,_n,_N,eo,Zl],styles:[".logotypeImage[_ngcontent-%COMP%]{width:150px;height:100%;padding-right:10px;padding-left:10px}.clr-example[_ngcontent-%COMP%]{padding:0;overflow:hidden}.clr-example[_ngcontent-%COMP%]   .example-aside-section[_ngcontent-%COMP%]{width:20%;padding:24px;border:1px solid}.clr-example[_ngcontent-%COMP%]   .example-footer[_ngcontent-%COMP%]{height:40px;padding-top:0;padding-bottom:10px;padding-left:24px}"]}),c})();function YSt(c,l){1&c&&ue(0,"app-default")}function KSt(c,l){1&c&&ue(0,"app-login")}function JSt(c,l){1&c&&ue(0,"app-three-logo",2),2&c&&R("fullScreen",!0)}let e2t=(()=>{class c{constructor(a,h,d){this.router=a,this.config=h,this.themeSvc=d}isShowType(a){return this.config.showType==a}ngOnInit(){this.themeSvc.applyTheme()}}return c.\u0275fac=function(a){return new(a||c)(B(ts),B(on),B(go))},c.\u0275cmp=je({type:c,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],["class","fullSize",3,"fullScreen",4,"ngIf"],[1,"fullSize",3,"fullScreen"]],template:function(a,h){1&a&&(ue(0,"app-alerts"),X(1,YSt,1,0,"app-default",0),X(2,KSt,1,0,"app-login",0),X(3,JSt,1,1,"app-three-logo",1)),2&a&&(P(1),R("ngIf",h.isShowType("normal")),P(1),R("ngIf",h.isShowType("login")),P(1),R("ngIf",h.isShowType("login3d")))},dependencies:[_n,USt,ybe,XSt,vbe],styles:[".fullSize[_ngcontent-%COMP%]{width:100vw;height:100vh}"]}),c})();const Bh=void 0,n2t=["ru",[["AM","PM"],Bh,Bh],Bh,[["\u0412","\u041f","\u0412","\u0421","\u0427","\u041f","\u0421"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"]],Bh,[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440.","\u0430\u043f\u0440.","\u043c\u0430\u044f","\u0438\u044e\u043d.","\u0438\u044e\u043b.","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"]],[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440.","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044c","\u0444\u0435\u0432\u0440\u0430\u043b\u044c","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0435\u043b\u044c","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u043e\u043a\u0442\u044f\u0431\u0440\u044c","\u043d\u043e\u044f\u0431\u0440\u044c","\u0434\u0435\u043a\u0430\u0431\u0440\u044c"]],[["\u0434\u043e \u043d.\u044d.","\u043d.\u044d."],["\u0434\u043e \u043d. \u044d.","\u043d. \u044d."],["\u0434\u043e \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430","\u043e\u0442 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430"]],1,[6,0],["dd.MM.y","d MMM y '\u0433'.","d MMMM y '\u0433'.","EEEE, d MMMM y '\u0433'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",Bh,Bh,Bh],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","\u043d\u0435\xa0\u0447\u0438\u0441\u043b\u043e",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"RUB","\u20bd","\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c",{BYN:[Bh,"\u0440."],GEL:[Bh,"\u10da"],PHP:[Bh,"\u20b1"],RON:[Bh,"L"],RUB:["\u20bd"],RUR:["\u0440."],THB:["\u0e3f"],TMT:["\u0422\u041c\u0422"],TWD:["NT$"],UAH:["\u20b4"],XXX:["XXXX"]},"ltr",function t2t(c){const a=Math.floor(Math.abs(c)),h=c.toString().replace(/^[^.]*\.?/,"").length;return 0===h&&a%10==1&&a%100!=11?1:0===h&&a%10===Math.floor(a%10)&&a%10>=2&&a%10<=4&&!(a%100>=12&&a%100<=14)?3:0===h&&a%10==0||0===h&&a%10===Math.floor(a%10)&&a%10>=5&&a%10<=9||0===h&&a%100===Math.floor(a%100)&&a%100>=11&&a%100<=14?4:5}];let r2t=(()=>{class c{constructor(a){this.config=a}intercept(a,h){let d=a.headers.set("X-Requested-With","XMLHttpRequest");this.config.authBody&&(d=d.set("Authorization","Basic "+this.config.authBody),d=d.set(this.config.authIdKey,this.config.authId));const f=new Zf({encoder:new s2t,fromString:a.params.toString()});return a=a.clone({withCredentials:!0,headers:d,params:f}),h.handle(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(on))},c.\u0275prov=qe({token:c,factory:c.\u0275fac}),c})();class s2t{encodeKey(l){return encodeURIComponent(l)}encodeValue(l){return encodeURIComponent(l)}decodeKey(l){return decodeURIComponent(l)}decodeValue(l){return decodeURIComponent(l)}}function o2t(c,l){1&c&&(I(0,"span"),ie(1,"\u0421\u043e\u0431\u0440\u0430\u043d\u043e "),F())}function a2t(c,l){1&c&&ue(0,"clr-progress-bar",3),2&c&&R("clrValue",q().progressValue)}function l2t(c,l){if(1&c){const a=at();I(0,"clr-toggle-container",4)(1,"label"),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),F(),I(3,"clr-toggle-wrapper")(4,"input",5),ee("ngModelChange",function(d){return De(a),ke(q().v.rawValue=d)}),F(),I(5,"label"),ie(6),F()()()}if(2&c){const a=q();P(4),R("name",a.v.name)("value",a.v.name)("ngModel",a.v.rawValue),P(2),Ut(a.v.description)}}let c2t=(()=>{class c{constructor(a,h,d){this.config=a,this.uiConfig=h,this.epubBuilder=d,this.progressValue=0,this.lastEvent="",this.fileEntries=[],this.workerSvc=Ua.builder(),this.bookServerSvc=new Oz((f,p)=>{this.config.post(()=>{this.bookSvc.post(f,p)})}),this.bookSvc=new f9((f,p)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(p):this.bookServerSvc.post(f,p)})}),this.allBookslines=[],this.allBooksChapters=[],this.allBooksEmptyLines=[],this.allBooksNames=[]}get printEpubData(){return this.data}get v(){return this.uiConfig.ui.memorialPrintAllBook}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.workerSvc.enabled()?this.workerSvc.setOnMessage(a=>{this.config.post(()=>{this.bookSvc.post(null,a)})}):this.bookServerSvc.setCacheService(new Tz(new cD)),this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookSvc.onPageLoadEvent.setOnEventHandler(a=>{this.onPageCompleted()}),this.printEpubData.printEventsEmitter.subscribe({next:a=>{this.onPrintEpubEvent(a)}})}onClick(a){this.data.onClick&&(this.data.onClick(this.data),a.stopPropagation())}getClasses(){return{}}clearAllItems(){this.fileEntries=[],this.allBookslines=[],this.allBooksChapters=[],this.allBooksEmptyLines=[],this.allBooksNames=[]}onPageCompleted(){this.config.post(()=>{var a,h;if(this.bookSvc.bookChapter){this.allBooksNames.length||(this.allBooksNames=[...this.bookSvc.bookLanguages]);let d=this.bookSvc.getChapterTitleName();this.allBooksChapters.push(d||this.bookSvc.bookChapter.name),this.allBooksEmptyLines.push(this.bookSvc.books.map(g=>g.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a)),this.allBookslines.push(this.bookSvc.books.map((g,m)=>{var v,y;let _=[],b=(x,S)=>x?x[S]:null;var x;return((null==(x=null===(y=b(null===(v=b(g.\u0441\u0442\u0440\u043e\u043a\u0438,0))||void 0===v?void 0:v.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b,0))||void 0===y?void 0:y.classes)?void 0:x.red)||(null==x?void 0:x.redDark))&&++this.allBooksEmptyLines[this.allBooksEmptyLines.length-1][m],g.\u0441\u0442\u0440\u043e\u043a\u0438.forEach(x=>{_.push(x.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.map(S=>S.text).join(""))}),_}));let f=""+(+this.bookSvc.bookChapter.name+1),p=this.printEpubData.showSettings&&this.uiConfig.ui.memorialPrintAllBook.getBooleanValue();if(p&&null!=(null===(a=this.bookSvc.bookContent[0].parsed)||void 0===a?void 0:a.content.find((g,m,v)=>g.name==f)))this.lastEvent="loaded chapter: "+f,this.progressValue=Math.floor(+this.bookSvc.bookChapter.name/(null===(h=this.bookSvc.bookContent[0].parsed)||void 0===h?void 0:h.content.length)*100),this.config.post(()=>{this.bookSvc.loadPage(f)},1);else if(p){this.lastEvent="stopped after chapter: "+f,this.progressValue=100;let g=this.printEpubData.bookTitle;if(p){let m=g.indexOf(":");m>0&&(g=g.substring(0,m))}this.epubBuilder.generate(s1.builder().setName(g).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setAllBooks(this.allBookslines).setBookNames(this.allBooksNames).setAllBooksChapters(this.allBooksChapters).setEmptyFirstLines(this.allBooksEmptyLines).setShowLineIndexes(this.bookSvc.bookName.includes("VZ")||this.bookSvc.bookName.includes("NZ"))).then(m=>{this.printEpubData.printEventsEmitter.emit("stop")},m=>{this.config.addAlert(Fr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${m}`,"\u041e\u041a",15)),this.printEpubData.printEventsEmitter.emit("stop")})}else if(this.printEpubData.printerHandler){let g=Fz.builder();this.printEpubData.printerHandler.print(g);let m=0,v=()=>{if(m>=g.requestsPack.length)this.progressValue=100,g.requestsPack.length>=1?this.epubBuilder.generate(g.requestsPack[0],!1,!1,!0).then(_=>{this.printEpubData.printEventsEmitter.emit("stop")}):this.printEpubData.printEventsEmitter.emit("stop");else{let y=m++;this.progressValue=Math.floor((y+1)/g.requestsPack.length*100);let _=g.requestsPack[y];this.epubBuilder.generate(_,0==y,_.showMiddleContent,!1).then(b=>{this.config.post(()=>v())})}};v()}else this.printEpubData.printEventsEmitter.emit("stop")}else this.printEpubData.printEventsEmitter.emit("stop")})}onPrintEpubEvent(a){"print"===(this.lastEvent=a,a)?(this.clearAllItems(),this.progressValue=1,this.bookSvc.loadBookByName(this.printEpubData.bookName,this.printEpubData.bookLanguages,this.uiConfig.ui.memorialPrintAllBook.getBooleanValue()?"1":this.printEpubData.bookChapter)):this.progressValue=0}}return c.\u0275fac=function(a){return new(a||c)(B(on),B(ti),B(Ihe))},c.\u0275cmp=je({type:c,selectors:[["app-dynamic-print-epub"]],inputs:{data:"data"},decls:6,vars:4,consts:[[4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["clrInline","",4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"]],template:function(a,h){1&a&&(I(0,"div")(1,"div"),X(2,o2t,2,0,"span",0),ie(3),F(),X(4,a2t,1,1,"clr-progress-bar",1),F(),X(5,l2t,7,4,"clr-toggle-container",2)),2&a&&(P(2),R("ngIf",h.progressValue>0),P(1),Ti('"',h.printEpubData.bookTitle,'":'),P(1),R("ngIf",h.progressValue>0),P(1),R("ngIf",h.printEpubData.showSettings))},dependencies:[_n,cs,Hp,LD,Up,G5,td,jo,Ao],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),c})();!function bMe(c,l,a){(function ZTe(c,l,a){"string"!=typeof l&&(a=l,l=c[mn.LocaleId]),l=l.toLowerCase().replace(/_/g,"-"),by[l]=c,a&&(by[l][mn.ExtraData]=a)})(c,l,a)}(n2t,"ru",[[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447.","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"]],[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447.","\u043d\u043e\u0447\u044c"],void 0,["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447\u0435\u0440","\u043d\u043e\u0447\u044c"]],["00:00","12:00",["04:00","12:00"],["12:00","18:00"],["18:00","22:00"],["22:00","04:00"]]]);let u2t=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=An({type:c,bootstrap:[e2t]}),c.\u0275inj=Mn({providers:[on,go,yE,wd,bz,ti,rz,fhe,phe,a1,Ua,I0e,P0e,yh,fS,yhe,r1,vhe,mhe,_g,fz,ghe,lU,Bhe,Uhe,Hhe,gU,zhe,eA,tA,c1,ha,Ihe,kW,NN,Sg,_0e,y0e,v0e,[{provide:ez,useClass:r2t,multi:!0},{provide:ju,useValue:"ru"}]],imports:[FY,Bxt,J6e,LSt,BKe,Vp]}),c})();oP($c,[si,fi,_n,eo,Rf,Ff,Sx,Wm,Ox,Tx,Dx,jy,Yl,$he,u1,nA,vU,h1,c2t],[]),oP(Vz,[si,_n,eo,$c],[]),Xh.production&&function fke(){FX=!1}(),BEe().bootstrapModule(u2t).catch(c=>console.error(c))},650:Za=>{Za.exports=function Pe(Ot,$e,de){function we(Ne,He){if(!$e[Ne]){if(!Ot[Ne]){if(se)return se(Ne,!0);var ze=new Error("Cannot find module '"+Ne+"'");throw ze.code="MODULE_NOT_FOUND",ze}var he=$e[Ne]={exports:{}};Ot[Ne][0].call(he.exports,function(Te){return we(Ot[Ne][1][Te]||Te)},he,he.exports,Pe,Ot,$e,de)}return $e[Ne].exports}for(var se=void 0,be=0;be<de.length;be++)we(de[be]);return we}({1:[function(Pe,Ot,$e){"use strict";var de=Pe("./utils"),we=Pe("./support"),se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";$e.encode=function(be){for(var Ne,He,Be,he,Te,Ee,le=[],ye=0,xe=be.length,We=xe,St="string"!==de.getTypeOf(be);ye<be.length;)We=xe-ye,Be=St?(Ne=be[ye++],He=ye<xe?be[ye++]:0,ye<xe?be[ye++]:0):(Ne=be.charCodeAt(ye++),He=ye<xe?be.charCodeAt(ye++):0,ye<xe?be.charCodeAt(ye++):0),he=(3&Ne)<<4|He>>4,Te=1<We?(15&He)<<2|Be>>6:64,Ee=2<We?63&Be:64,le.push(se.charAt(Ne>>2)+se.charAt(he)+se.charAt(Te)+se.charAt(Ee));return le.join("")},$e.decode=function(be){var Ne,He,Be,ze,he,Te,Ee=0,le=0;if("data:"===be.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var xe,We=3*(be=be.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(be.charAt(be.length-1)===se.charAt(64)&&We--,be.charAt(be.length-2)===se.charAt(64)&&We--,We%1!=0)throw new Error("Invalid base64 input, bad content length.");for(xe=we.uint8array?new Uint8Array(0|We):new Array(0|We);Ee<be.length;)Ne=se.indexOf(be.charAt(Ee++))<<2|(ze=se.indexOf(be.charAt(Ee++)))>>4,He=(15&ze)<<4|(he=se.indexOf(be.charAt(Ee++)))>>2,Be=(3&he)<<6|(Te=se.indexOf(be.charAt(Ee++))),xe[le++]=Ne,64!==he&&(xe[le++]=He),64!==Te&&(xe[le++]=Be);return xe}},{"./support":30,"./utils":32}],2:[function(Pe,Ot,$e){"use strict";var de=Pe("./external"),we=Pe("./stream/DataWorker"),se=Pe("./stream/Crc32Probe"),be=Pe("./stream/DataLengthProbe");function Ne(He,Be,ze,he,Te){this.compressedSize=He,this.uncompressedSize=Be,this.crc32=ze,this.compression=he,this.compressedContent=Te}Ne.prototype={getContentWorker:function(){var He=new we(de.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new be("data_length")),Be=this;return He.on("end",function(){if(this.streamInfo.data_length!==Be.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),He},getCompressedWorker:function(){return new we(de.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Ne.createWorkerFrom=function(He,Be,ze){return He.pipe(new se).pipe(new be("uncompressedSize")).pipe(Be.compressWorker(ze)).pipe(new be("compressedSize")).withStreamInfo("compression",Be)},Ot.exports=Ne},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(Pe,Ot,$e){"use strict";var de=Pe("./stream/GenericWorker");$e.STORE={magic:"\0\0",compressWorker:function(we){return new de("STORE compression")},uncompressWorker:function(){return new de("STORE decompression")}},$e.DEFLATE=Pe("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(Pe,Ot,$e){"use strict";var de=Pe("./utils"),we=function(){for(var se,be=[],Ne=0;Ne<256;Ne++){se=Ne;for(var He=0;He<8;He++)se=1&se?3988292384^se>>>1:se>>>1;be[Ne]=se}return be}();Ot.exports=function(se,be){return void 0!==se&&se.length?"string"!==de.getTypeOf(se)?function(Ne,He,Be,ze){var he=we,Te=0+Be;Ne^=-1;for(var Ee=0;Ee<Te;Ee++)Ne=Ne>>>8^he[255&(Ne^He[Ee])];return-1^Ne}(0|be,se,se.length):function(Ne,He,Be,ze){var he=we,Te=0+Be;Ne^=-1;for(var Ee=0;Ee<Te;Ee++)Ne=Ne>>>8^he[255&(Ne^He.charCodeAt(Ee))];return-1^Ne}(0|be,se,se.length):0}},{"./utils":32}],5:[function(Pe,Ot,$e){"use strict";$e.base64=!1,$e.binary=!1,$e.dir=!1,$e.createFolders=!0,$e.date=null,$e.compression=null,$e.compressionOptions=null,$e.comment=null,$e.unixPermissions=null,$e.dosPermissions=null},{}],6:[function(Pe,Ot,$e){"use strict";var de;de="undefined"!=typeof Promise?Promise:Pe("lie"),Ot.exports={Promise:de}},{lie:37}],7:[function(Pe,Ot,$e){"use strict";var de="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,we=Pe("pako"),se=Pe("./utils"),be=Pe("./stream/GenericWorker"),Ne=de?"uint8array":"array";function He(Be,ze){be.call(this,"FlateWorker/"+Be),this._pako=null,this._pakoAction=Be,this._pakoOptions=ze,this.meta={}}$e.magic="\b\0",se.inherits(He,be),He.prototype.processChunk=function(Be){this.meta=Be.meta,null===this._pako&&this._createPako(),this._pako.push(se.transformTo(Ne,Be.data),!1)},He.prototype.flush=function(){be.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},He.prototype.cleanUp=function(){be.prototype.cleanUp.call(this),this._pako=null},He.prototype._createPako=function(){this._pako=new we[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Be=this;this._pako.onData=function(ze){Be.push({data:ze,meta:Be.meta})}},$e.compressWorker=function(Be){return new He("Deflate",Be)},$e.uncompressWorker=function(){return new He("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(Pe,Ot,$e){"use strict";function de(he,Te){var Ee,le="";for(Ee=0;Ee<Te;Ee++)le+=String.fromCharCode(255&he),he>>>=8;return le}function we(he,Te,Ee,le,ye,xe){var We,St,Xe=he.file,Lt=he.compression,Mt=xe!==Ne.utf8encode,Jt=se.transformTo("string",xe(Xe.name)),vt=se.transformTo("string",Ne.utf8encode(Xe.name)),Xt=Xe.comment,Yn=se.transformTo("string",xe(Xt)),Re=se.transformTo("string",Ne.utf8encode(Xt)),Ct=vt.length!==Xe.name.length,ne=Re.length!==Xt.length,Tt="",yi="",Wt="",En=Xe.dir,qt=Xe.date,ai={crc32:0,compressedSize:0,uncompressedSize:0};Te&&!Ee||(ai.crc32=he.crc32,ai.compressedSize=he.compressedSize,ai.uncompressedSize=he.uncompressedSize);var ht=0;Te&&(ht|=8),Mt||!Ct&&!ne||(ht|=2048);var sn,Li,ot=0,yt=0;En&&(ot|=16),"UNIX"===ye?(yt=798,ot|=(Li=sn=Xe.unixPermissions,sn||(Li=En?16893:33204),(65535&Li)<<16)):(yt=20,ot|=function(sn){return 63&(sn||0)}(Xe.dosPermissions)),We=qt.getUTCHours(),We<<=6,We|=qt.getUTCMinutes(),We<<=5,We|=qt.getUTCSeconds()/2,St=qt.getUTCFullYear()-1980,St<<=4,St|=qt.getUTCMonth()+1,St<<=5,St|=qt.getUTCDate(),Ct&&(yi=de(1,1)+de(He(Jt),4)+vt,Tt+="up"+de(yi.length,2)+yi),ne&&(Wt=de(1,1)+de(He(Yn),4)+Re,Tt+="uc"+de(Wt.length,2)+Wt);var wn="";return wn+="\n\0",wn+=de(ht,2),wn+=Lt.magic,wn+=de(We,2),wn+=de(St,2),wn+=de(ai.crc32,4),wn+=de(ai.compressedSize,4),wn+=de(ai.uncompressedSize,4),wn+=de(Jt.length,2),wn+=de(Tt.length,2),{fileRecord:Be.LOCAL_FILE_HEADER+wn+Jt+Tt,dirRecord:Be.CENTRAL_FILE_HEADER+de(yt,2)+wn+de(Yn.length,2)+"\0\0\0\0"+de(ot,4)+de(le,4)+Jt+Tt+Yn}}var se=Pe("../utils"),be=Pe("../stream/GenericWorker"),Ne=Pe("../utf8"),He=Pe("../crc32"),Be=Pe("../signature");function ze(he,Te,Ee,le){be.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=Te,this.zipPlatform=Ee,this.encodeFileName=le,this.streamFiles=he,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}se.inherits(ze,be),ze.prototype.push=function(he){var Te=he.meta.percent||0,Ee=this.entriesCount,le=this._sources.length;this.accumulate?this.contentBuffer.push(he):(this.bytesWritten+=he.data.length,be.prototype.push.call(this,{data:he.data,meta:{currentFile:this.currentFile,percent:Ee?(Te+100*(Ee-le-1))/Ee:100}}))},ze.prototype.openedSource=function(he){this.currentSourceOffset=this.bytesWritten,this.currentFile=he.file.name;var Te=this.streamFiles&&!he.file.dir;if(Te){var Ee=we(he,Te,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Ee.fileRecord,meta:{percent:0}})}else this.accumulate=!0},ze.prototype.closedSource=function(he){this.accumulate=!1;var le,Te=this.streamFiles&&!he.file.dir,Ee=we(he,Te,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Ee.dirRecord),Te)this.push({data:(le=he,Be.DATA_DESCRIPTOR+de(le.crc32,4)+de(le.compressedSize,4)+de(le.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Ee.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},ze.prototype.flush=function(){for(var he=this.bytesWritten,Te=0;Te<this.dirRecords.length;Te++)this.push({data:this.dirRecords[Te],meta:{percent:100}});var ye,xe,We,Lt,le=(ye=this.dirRecords.length,xe=this.bytesWritten-he,We=he,Lt=se.transformTo("string",(0,this.encodeFileName)(this.zipComment)),Be.CENTRAL_DIRECTORY_END+"\0\0\0\0"+de(ye,2)+de(ye,2)+de(xe,4)+de(We,4)+de(Lt.length,2)+Lt);this.push({data:le,meta:{percent:100}})},ze.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},ze.prototype.registerPrevious=function(he){this._sources.push(he);var Te=this;return he.on("data",function(Ee){Te.processChunk(Ee)}),he.on("end",function(){Te.closedSource(Te.previous.streamInfo),Te._sources.length?Te.prepareNextSource():Te.end()}),he.on("error",function(Ee){Te.error(Ee)}),this},ze.prototype.resume=function(){return!!be.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},ze.prototype.error=function(he){var Te=this._sources;if(!be.prototype.error.call(this,he))return!1;for(var Ee=0;Ee<Te.length;Ee++)try{Te[Ee].error(he)}catch(le){}return!0},ze.prototype.lock=function(){be.prototype.lock.call(this);for(var he=this._sources,Te=0;Te<he.length;Te++)he[Te].lock()},Ot.exports=ze},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(Pe,Ot,$e){"use strict";var de=Pe("../compressions"),we=Pe("./ZipFileWorker");$e.generateWorker=function(se,be,Ne){var He=new we(be.streamFiles,Ne,be.platform,be.encodeFileName),Be=0;try{se.forEach(function(ze,he){Be++;var Te=function(xe,We){var St=xe||We,Xe=de[St];if(!Xe)throw new Error(St+" is not a valid compression method !");return Xe}(he.options.compression,be.compression),le=he.dir,ye=he.date;he._compressWorker(Te,he.options.compressionOptions||be.compressionOptions||{}).withStreamInfo("file",{name:ze,dir:le,date:ye,comment:he.comment||"",unixPermissions:he.unixPermissions,dosPermissions:he.dosPermissions}).pipe(He)}),He.entriesCount=Be}catch(ze){He.error(ze)}return He}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(Pe,Ot,$e){"use strict";function de(){if(!(this instanceof de))return new de;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var we=new de;for(var se in this)"function"!=typeof this[se]&&(we[se]=this[se]);return we}}(de.prototype=Pe("./object")).loadAsync=Pe("./load"),de.support=Pe("./support"),de.defaults=Pe("./defaults"),de.version="3.7.1",de.loadAsync=function(we,se){return(new de).loadAsync(we,se)},de.external=Pe("./external"),Ot.exports=de},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(Pe,Ot,$e){"use strict";var de=Pe("./utils"),we=Pe("./external"),se=Pe("./utf8"),be=Pe("./zipEntries"),Ne=Pe("./stream/Crc32Probe"),He=Pe("./nodejsUtils");function Be(ze){return new we.Promise(function(he,Te){var Ee=ze.decompressed.getContentWorker().pipe(new Ne);Ee.on("error",function(le){Te(le)}).on("end",function(){Ee.streamInfo.crc32!==ze.decompressed.crc32?Te(new Error("Corrupted zip : CRC32 mismatch")):he()}).resume()})}Ot.exports=function(ze,he){var Te=this;return he=de.extend(he||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:se.utf8decode}),He.isNode&&He.isStream(ze)?we.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):de.prepareContent("the loaded zip file",ze,!0,he.optimizedBinaryString,he.base64).then(function(Ee){var le=new be(he);return le.load(Ee),le}).then(function(Ee){var le=[we.Promise.resolve(Ee)],ye=Ee.files;if(he.checkCRC32)for(var xe=0;xe<ye.length;xe++)le.push(Be(ye[xe]));return we.Promise.all(le)}).then(function(Ee){for(var le=Ee.shift(),ye=le.files,xe=0;xe<ye.length;xe++){var We=ye[xe];Te.file(We.fileNameStr,We.decompressed,{binary:!0,optimizedBinaryString:!0,date:We.date,dir:We.dir,comment:We.fileCommentStr.length?We.fileCommentStr:null,unixPermissions:We.unixPermissions,dosPermissions:We.dosPermissions,createFolders:he.createFolders})}return le.zipComment.length&&(Te.comment=le.zipComment),Te})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils"),we=Pe("../stream/GenericWorker");function se(be,Ne){we.call(this,"Nodejs stream input adapter for "+be),this._upstreamEnded=!1,this._bindStream(Ne)}de.inherits(se,we),se.prototype._bindStream=function(be){var Ne=this;(this._stream=be).pause(),be.on("data",function(He){Ne.push({data:He,meta:{percent:0}})}).on("error",function(He){Ne.isPaused?this.generatedError=He:Ne.error(He)}).on("end",function(){Ne.isPaused?Ne._upstreamEnded=!0:Ne.end()})},se.prototype.pause=function(){return!!we.prototype.pause.call(this)&&(this._stream.pause(),!0)},se.prototype.resume=function(){return!!we.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Ot.exports=se},{"../stream/GenericWorker":28,"../utils":32}],13:[function(Pe,Ot,$e){"use strict";var de=Pe("readable-stream").Readable;function we(se,be,Ne){de.call(this,be),this._helper=se;var He=this;se.on("data",function(Be,ze){He.push(Be)||He._helper.pause(),Ne&&Ne(ze)}).on("error",function(Be){He.emit("error",Be)}).on("end",function(){He.push(null)})}Pe("../utils").inherits(we,de),we.prototype._read=function(){this._helper.resume()},Ot.exports=we},{"../utils":32,"readable-stream":16}],14:[function(Pe,Ot,$e){"use strict";Ot.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(de,we){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(de,we);if("number"==typeof de)throw new Error('The "data" argument must not be a number');return new Buffer(de,we)},allocBuffer:function(de){if(Buffer.alloc)return Buffer.alloc(de);var we=new Buffer(de);return we.fill(0),we},isBuffer:function(de){return Buffer.isBuffer(de)},isStream:function(de){return de&&"function"==typeof de.on&&"function"==typeof de.pause&&"function"==typeof de.resume}}},{}],15:[function(Pe,Ot,$e){"use strict";function de(Xe,Lt,Mt){var Jt,vt=se.getTypeOf(Lt),Xt=se.extend(Mt||{},He);Xt.date=Xt.date||new Date,null!==Xt.compression&&(Xt.compression=Xt.compression.toUpperCase()),"string"==typeof Xt.unixPermissions&&(Xt.unixPermissions=parseInt(Xt.unixPermissions,8)),Xt.unixPermissions&&16384&Xt.unixPermissions&&(Xt.dir=!0),Xt.dosPermissions&&16&Xt.dosPermissions&&(Xt.dir=!0),Xt.dir&&(Xe=ye(Xe)),Xt.createFolders&&(Jt=le(Xe))&&xe.call(this,Jt,!0),Mt&&void 0!==Mt.binary||(Xt.binary=!("string"===vt&&!1===Xt.binary&&!1===Xt.base64)),(Lt instanceof Be&&0===Lt.uncompressedSize||Xt.dir||!Lt||0===Lt.length)&&(Xt.base64=!1,Xt.binary=!0,Lt="",Xt.compression="STORE",vt="string");var Re;Re=Lt instanceof Be||Lt instanceof be?Lt:Te.isNode&&Te.isStream(Lt)?new Ee(Xe,Lt):se.prepareContent(Xe,Lt,Xt.binary,Xt.optimizedBinaryString,Xt.base64);var Ct=new ze(Xe,Re,Xt);this.files[Xe]=Ct}var we=Pe("./utf8"),se=Pe("./utils"),be=Pe("./stream/GenericWorker"),Ne=Pe("./stream/StreamHelper"),He=Pe("./defaults"),Be=Pe("./compressedObject"),ze=Pe("./zipObject"),he=Pe("./generate"),Te=Pe("./nodejsUtils"),Ee=Pe("./nodejs/NodejsStreamInputAdapter"),le=function(Xe){"/"===Xe.slice(-1)&&(Xe=Xe.substring(0,Xe.length-1));var Lt=Xe.lastIndexOf("/");return 0<Lt?Xe.substring(0,Lt):""},ye=function(Xe){return"/"!==Xe.slice(-1)&&(Xe+="/"),Xe},xe=function(Xe,Lt){return Lt=void 0!==Lt?Lt:He.createFolders,Xe=ye(Xe),this.files[Xe]||de.call(this,Xe,null,{dir:!0,createFolders:Lt}),this.files[Xe]};function We(Xe){return"[object RegExp]"===Object.prototype.toString.call(Xe)}var St={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Xe){var Lt,Mt,Jt;for(Lt in this.files)Jt=this.files[Lt],(Mt=Lt.slice(this.root.length,Lt.length))&&Lt.slice(0,this.root.length)===this.root&&Xe(Mt,Jt)},filter:function(Xe){var Lt=[];return this.forEach(function(Mt,Jt){Xe(Mt,Jt)&&Lt.push(Jt)}),Lt},file:function(Xe,Lt,Mt){if(1!==arguments.length)return de.call(this,Xe=this.root+Xe,Lt,Mt),this;if(We(Xe)){var Jt=Xe;return this.filter(function(Xt,Yn){return!Yn.dir&&Jt.test(Xt)})}var vt=this.files[this.root+Xe];return vt&&!vt.dir?vt:null},folder:function(Xe){if(!Xe)return this;if(We(Xe))return this.filter(function(vt,Xt){return Xt.dir&&Xe.test(vt)});var Mt=xe.call(this,this.root+Xe),Jt=this.clone();return Jt.root=Mt.name,Jt},remove:function(Xe){var Lt=this.files[Xe=this.root+Xe];if(Lt||("/"!==Xe.slice(-1)&&(Xe+="/"),Lt=this.files[Xe]),Lt&&!Lt.dir)delete this.files[Xe];else for(var Mt=this.filter(function(vt,Xt){return Xt.name.slice(0,Xe.length)===Xe}),Jt=0;Jt<Mt.length;Jt++)delete this.files[Mt[Jt].name];return this},generate:function(Xe){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Xe){var Lt,Mt={};try{if((Mt=se.extend(Xe||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:we.utf8encode})).type=Mt.type.toLowerCase(),Mt.compression=Mt.compression.toUpperCase(),"binarystring"===Mt.type&&(Mt.type="string"),!Mt.type)throw new Error("No output type specified.");se.checkSupport(Mt.type),"darwin"!==Mt.platform&&"freebsd"!==Mt.platform&&"linux"!==Mt.platform&&"sunos"!==Mt.platform||(Mt.platform="UNIX"),"win32"===Mt.platform&&(Mt.platform="DOS"),Lt=he.generateWorker(this,Mt,Mt.comment||this.comment||"")}catch(vt){(Lt=new be("error")).error(vt)}return new Ne(Lt,Mt.type||"string",Mt.mimeType)},generateAsync:function(Xe,Lt){return this.generateInternalStream(Xe).accumulate(Lt)},generateNodeStream:function(Xe,Lt){return(Xe=Xe||{}).type||(Xe.type="nodebuffer"),this.generateInternalStream(Xe).toNodejsStream(Lt)}};Ot.exports=St},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(Pe,Ot,$e){Ot.exports=Pe("stream")},{stream:void 0}],17:[function(Pe,Ot,$e){"use strict";var de=Pe("./DataReader");function we(se){de.call(this,se);for(var be=0;be<this.data.length;be++)se[be]=255&se[be]}Pe("../utils").inherits(we,de),we.prototype.byteAt=function(se){return this.data[this.zero+se]},we.prototype.lastIndexOfSignature=function(se){for(var be=se.charCodeAt(0),Ne=se.charCodeAt(1),He=se.charCodeAt(2),Be=se.charCodeAt(3),ze=this.length-4;0<=ze;--ze)if(this.data[ze]===be&&this.data[ze+1]===Ne&&this.data[ze+2]===He&&this.data[ze+3]===Be)return ze-this.zero;return-1},we.prototype.readAndCheckSignature=function(se){var be=se.charCodeAt(0),Ne=se.charCodeAt(1),He=se.charCodeAt(2),Be=se.charCodeAt(3),ze=this.readData(4);return be===ze[0]&&Ne===ze[1]&&He===ze[2]&&Be===ze[3]},we.prototype.readData=function(se){if(this.checkOffset(se),0===se)return[];var be=this.data.slice(this.zero+this.index,this.zero+this.index+se);return this.index+=se,be},Ot.exports=we},{"../utils":32,"./DataReader":18}],18:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils");function we(se){this.data=se,this.length=se.length,this.index=0,this.zero=0}we.prototype={checkOffset:function(se){this.checkIndex(this.index+se)},checkIndex:function(se){if(this.length<this.zero+se||se<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+se+"). Corrupted zip ?")},setIndex:function(se){this.checkIndex(se),this.index=se},skip:function(se){this.setIndex(this.index+se)},byteAt:function(se){},readInt:function(se){var be,Ne=0;for(this.checkOffset(se),be=this.index+se-1;be>=this.index;be--)Ne=(Ne<<8)+this.byteAt(be);return this.index+=se,Ne},readString:function(se){return de.transformTo("string",this.readData(se))},readData:function(se){},lastIndexOfSignature:function(se){},readAndCheckSignature:function(se){},readDate:function(){var se=this.readInt(4);return new Date(Date.UTC(1980+(se>>25&127),(se>>21&15)-1,se>>16&31,se>>11&31,se>>5&63,(31&se)<<1))}},Ot.exports=we},{"../utils":32}],19:[function(Pe,Ot,$e){"use strict";var de=Pe("./Uint8ArrayReader");function we(se){de.call(this,se)}Pe("../utils").inherits(we,de),we.prototype.readData=function(se){this.checkOffset(se);var be=this.data.slice(this.zero+this.index,this.zero+this.index+se);return this.index+=se,be},Ot.exports=we},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(Pe,Ot,$e){"use strict";var de=Pe("./DataReader");function we(se){de.call(this,se)}Pe("../utils").inherits(we,de),we.prototype.byteAt=function(se){return this.data.charCodeAt(this.zero+se)},we.prototype.lastIndexOfSignature=function(se){return this.data.lastIndexOf(se)-this.zero},we.prototype.readAndCheckSignature=function(se){return se===this.readData(4)},we.prototype.readData=function(se){this.checkOffset(se);var be=this.data.slice(this.zero+this.index,this.zero+this.index+se);return this.index+=se,be},Ot.exports=we},{"../utils":32,"./DataReader":18}],21:[function(Pe,Ot,$e){"use strict";var de=Pe("./ArrayReader");function we(se){de.call(this,se)}Pe("../utils").inherits(we,de),we.prototype.readData=function(se){if(this.checkOffset(se),0===se)return new Uint8Array(0);var be=this.data.subarray(this.zero+this.index,this.zero+this.index+se);return this.index+=se,be},Ot.exports=we},{"../utils":32,"./ArrayReader":17}],22:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils"),we=Pe("../support"),se=Pe("./ArrayReader"),be=Pe("./StringReader"),Ne=Pe("./NodeBufferReader"),He=Pe("./Uint8ArrayReader");Ot.exports=function(Be){var ze=de.getTypeOf(Be);return de.checkSupport(ze),"string"!==ze||we.uint8array?"nodebuffer"===ze?new Ne(Be):we.uint8array?new He(de.transformTo("uint8array",Be)):new se(de.transformTo("array",Be)):new be(Be)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(Pe,Ot,$e){"use strict";$e.LOCAL_FILE_HEADER="PK\x03\x04",$e.CENTRAL_FILE_HEADER="PK\x01\x02",$e.CENTRAL_DIRECTORY_END="PK\x05\x06",$e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",$e.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",$e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(Pe,Ot,$e){"use strict";var de=Pe("./GenericWorker"),we=Pe("../utils");function se(be){de.call(this,"ConvertWorker to "+be),this.destType=be}we.inherits(se,de),se.prototype.processChunk=function(be){this.push({data:we.transformTo(this.destType,be.data),meta:be.meta})},Ot.exports=se},{"../utils":32,"./GenericWorker":28}],25:[function(Pe,Ot,$e){"use strict";var de=Pe("./GenericWorker"),we=Pe("../crc32");function se(){de.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Pe("../utils").inherits(se,de),se.prototype.processChunk=function(be){this.streamInfo.crc32=we(be.data,this.streamInfo.crc32||0),this.push(be)},Ot.exports=se},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils"),we=Pe("./GenericWorker");function se(be){we.call(this,"DataLengthProbe for "+be),this.propName=be,this.withStreamInfo(be,0)}de.inherits(se,we),se.prototype.processChunk=function(be){be&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+be.data.length),we.prototype.processChunk.call(this,be)},Ot.exports=se},{"../utils":32,"./GenericWorker":28}],27:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils"),we=Pe("./GenericWorker");function se(be){we.call(this,"DataWorker");var Ne=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,be.then(function(He){Ne.dataIsReady=!0,Ne.data=He,Ne.max=He&&He.length||0,Ne.type=de.getTypeOf(He),Ne.isPaused||Ne._tickAndRepeat()},function(He){Ne.error(He)})}de.inherits(se,we),se.prototype.cleanUp=function(){we.prototype.cleanUp.call(this),this.data=null},se.prototype.resume=function(){return!!we.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,de.delay(this._tickAndRepeat,[],this)),!0)},se.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(de.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},se.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var be=null,Ne=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":be=this.data.substring(this.index,Ne);break;case"uint8array":be=this.data.subarray(this.index,Ne);break;case"array":case"nodebuffer":be=this.data.slice(this.index,Ne)}return this.index=Ne,this.push({data:be,meta:{percent:this.max?this.index/this.max*100:0}})},Ot.exports=se},{"../utils":32,"./GenericWorker":28}],28:[function(Pe,Ot,$e){"use strict";function de(we){this.name=we||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}de.prototype={push:function(we){this.emit("data",we)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(we){this.emit("error",we)}return!0},error:function(we){return!this.isFinished&&(this.isPaused?this.generatedError=we:(this.isFinished=!0,this.emit("error",we),this.previous&&this.previous.error(we),this.cleanUp()),!0)},on:function(we,se){return this._listeners[we].push(se),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(we,se){if(this._listeners[we])for(var be=0;be<this._listeners[we].length;be++)this._listeners[we][be].call(this,se)},pipe:function(we){return we.registerPrevious(this)},registerPrevious:function(we){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=we.streamInfo,this.mergeStreamInfo(),this.previous=we;var se=this;return we.on("data",function(be){se.processChunk(be)}),we.on("end",function(){se.end()}),we.on("error",function(be){se.error(be)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var we=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),we=!0),this.previous&&this.previous.resume(),!we},flush:function(){},processChunk:function(we){this.push(we)},withStreamInfo:function(we,se){return this.extraStreamInfo[we]=se,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var we in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(we)&&(this.streamInfo[we]=this.extraStreamInfo[we])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var we="Worker "+this.name;return this.previous?this.previous+" -> "+we:we}},Ot.exports=de},{}],29:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils"),we=Pe("./ConvertWorker"),se=Pe("./GenericWorker"),be=Pe("../base64"),Ne=Pe("../support"),He=Pe("../external"),Be=null;if(Ne.nodestream)try{Be=Pe("../nodejs/NodejsStreamOutputAdapter")}catch(Te){}function he(Te,Ee,le){var ye=Ee;switch(Ee){case"blob":case"arraybuffer":ye="uint8array";break;case"base64":ye="string"}try{this._internalType=ye,this._outputType=Ee,this._mimeType=le,de.checkSupport(ye),this._worker=Te.pipe(new we(ye)),Te.lock()}catch(xe){this._worker=new se("error"),this._worker.error(xe)}}he.prototype={accumulate:function(Te){return function ze(Te,Ee){return new He.Promise(function(le,ye){var xe=[],We=Te._internalType,St=Te._outputType,Xe=Te._mimeType;Te.on("data",function(Lt,Mt){xe.push(Lt),Ee&&Ee(Mt)}).on("error",function(Lt){xe=[],ye(Lt)}).on("end",function(){try{var Lt=function(Mt,Jt,vt){switch(Mt){case"blob":return de.newBlob(de.transformTo("arraybuffer",Jt),vt);case"base64":return be.encode(Jt);default:return de.transformTo(Mt,Jt)}}(St,function(Mt,Jt){var vt,Xt=0,Yn=null,Re=0;for(vt=0;vt<Jt.length;vt++)Re+=Jt[vt].length;switch(Mt){case"string":return Jt.join("");case"array":return Array.prototype.concat.apply([],Jt);case"uint8array":for(Yn=new Uint8Array(Re),vt=0;vt<Jt.length;vt++)Yn.set(Jt[vt],Xt),Xt+=Jt[vt].length;return Yn;case"nodebuffer":return Buffer.concat(Jt);default:throw new Error("concat : unsupported type '"+Mt+"'")}}(We,xe),Xe);le(Lt)}catch(Mt){ye(Mt)}xe=[]}).resume()})}(this,Te)},on:function(Te,Ee){var le=this;return this._worker.on(Te,"data"===Te?function(ye){Ee.call(le,ye.data,ye.meta)}:function(){de.delay(Ee,arguments,le)}),this},resume:function(){return de.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Te){if(de.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Be(this,{objectMode:"nodebuffer"!==this._outputType},Te)}},Ot.exports=he},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(Pe,Ot,$e){"use strict";if($e.base64=!0,$e.array=!0,$e.string=!0,$e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,$e.nodebuffer="undefined"!=typeof Buffer,$e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)$e.blob=!1;else{var de=new ArrayBuffer(0);try{$e.blob=0===new Blob([de],{type:"application/zip"}).size}catch(se){try{var we=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);we.append(de),$e.blob=0===we.getBlob("application/zip").size}catch(be){$e.blob=!1}}}try{$e.nodestream=!!Pe("readable-stream").Readable}catch(se){$e.nodestream=!1}},{"readable-stream":16}],31:[function(Pe,Ot,$e){"use strict";for(var de=Pe("./utils"),we=Pe("./support"),se=Pe("./nodejsUtils"),be=Pe("./stream/GenericWorker"),Ne=new Array(256),He=0;He<256;He++)Ne[He]=252<=He?6:248<=He?5:240<=He?4:224<=He?3:192<=He?2:1;function Be(){be.call(this,"utf-8 decode"),this.leftOver=null}function ze(){be.call(this,"utf-8 encode")}Ne[254]=Ne[254]=1,$e.utf8encode=function(he){return we.nodebuffer?se.newBufferFrom(he,"utf-8"):function(Te){var Ee,le,ye,xe,We,St=Te.length,Xe=0;for(xe=0;xe<St;xe++)55296==(64512&(le=Te.charCodeAt(xe)))&&xe+1<St&&56320==(64512&(ye=Te.charCodeAt(xe+1)))&&(le=65536+(le-55296<<10)+(ye-56320),xe++),Xe+=le<128?1:le<2048?2:le<65536?3:4;for(Ee=we.uint8array?new Uint8Array(Xe):new Array(Xe),xe=We=0;We<Xe;xe++)55296==(64512&(le=Te.charCodeAt(xe)))&&xe+1<St&&56320==(64512&(ye=Te.charCodeAt(xe+1)))&&(le=65536+(le-55296<<10)+(ye-56320),xe++),le<128?Ee[We++]=le:(le<2048?Ee[We++]=192|le>>>6:(le<65536?Ee[We++]=224|le>>>12:(Ee[We++]=240|le>>>18,Ee[We++]=128|le>>>12&63),Ee[We++]=128|le>>>6&63),Ee[We++]=128|63&le);return Ee}(he)},$e.utf8decode=function(he){return we.nodebuffer?de.transformTo("nodebuffer",he).toString("utf-8"):function(Te){var Ee,le,ye,xe,We=Te.length,St=new Array(2*We);for(Ee=le=0;Ee<We;)if((ye=Te[Ee++])<128)St[le++]=ye;else if(4<(xe=Ne[ye]))St[le++]=65533,Ee+=xe-1;else{for(ye&=2===xe?31:3===xe?15:7;1<xe&&Ee<We;)ye=ye<<6|63&Te[Ee++],xe--;1<xe?St[le++]=65533:ye<65536?St[le++]=ye:(St[le++]=55296|(ye-=65536)>>10&1023,St[le++]=56320|1023&ye)}return St.length!==le&&(St.subarray?St=St.subarray(0,le):St.length=le),de.applyFromCharCode(St)}(he=de.transformTo(we.uint8array?"uint8array":"array",he))},de.inherits(Be,be),Be.prototype.processChunk=function(he){var Te=de.transformTo(we.uint8array?"uint8array":"array",he.data);if(this.leftOver&&this.leftOver.length){if(we.uint8array){var Ee=Te;(Te=new Uint8Array(Ee.length+this.leftOver.length)).set(this.leftOver,0),Te.set(Ee,this.leftOver.length)}else Te=this.leftOver.concat(Te);this.leftOver=null}var le=function(xe,We){var St;for((We=We||xe.length)>xe.length&&(We=xe.length),St=We-1;0<=St&&128==(192&xe[St]);)St--;return St<0||0===St?We:St+Ne[xe[St]]>We?St:We}(Te),ye=Te;le!==Te.length&&(we.uint8array?(ye=Te.subarray(0,le),this.leftOver=Te.subarray(le,Te.length)):(ye=Te.slice(0,le),this.leftOver=Te.slice(le,Te.length))),this.push({data:$e.utf8decode(ye),meta:he.meta})},Be.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:$e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},$e.Utf8DecodeWorker=Be,de.inherits(ze,be),ze.prototype.processChunk=function(he){this.push({data:$e.utf8encode(he.data),meta:he.meta})},$e.Utf8EncodeWorker=ze},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(Pe,Ot,$e){"use strict";var de=Pe("./support"),we=Pe("./base64"),se=Pe("./nodejsUtils"),be=Pe("set-immediate-shim"),Ne=Pe("./external");function He(le){return le}function Be(le,ye){for(var xe=0;xe<le.length;++xe)ye[xe]=255&le.charCodeAt(xe);return ye}$e.newBlob=function(le,ye){$e.checkSupport("blob");try{return new Blob([le],{type:ye})}catch(We){try{var xe=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return xe.append(le),xe.getBlob(ye)}catch(St){throw new Error("Bug : can't construct the Blob.")}}};var ze={stringifyByChunk:function(le,ye,xe){var We=[],St=0,Xe=le.length;if(Xe<=xe)return String.fromCharCode.apply(null,le);for(;St<Xe;)We.push(String.fromCharCode.apply(null,"array"===ye||"nodebuffer"===ye?le.slice(St,Math.min(St+xe,Xe)):le.subarray(St,Math.min(St+xe,Xe)))),St+=xe;return We.join("")},stringifyByChar:function(le){for(var ye="",xe=0;xe<le.length;xe++)ye+=String.fromCharCode(le[xe]);return ye},applyCanBeUsed:{uint8array:function(){try{return de.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(le){return!1}}(),nodebuffer:function(){try{return de.nodebuffer&&1===String.fromCharCode.apply(null,se.allocBuffer(1)).length}catch(le){return!1}}()}};function he(le){var ye=65536,xe=$e.getTypeOf(le),We=!0;if("uint8array"===xe?We=ze.applyCanBeUsed.uint8array:"nodebuffer"===xe&&(We=ze.applyCanBeUsed.nodebuffer),We)for(;1<ye;)try{return ze.stringifyByChunk(le,xe,ye)}catch(St){ye=Math.floor(ye/2)}return ze.stringifyByChar(le)}function Te(le,ye){for(var xe=0;xe<le.length;xe++)ye[xe]=le[xe];return ye}$e.applyFromCharCode=he;var Ee={};Ee.string={string:He,array:function(le){return Be(le,new Array(le.length))},arraybuffer:function(le){return Ee.string.uint8array(le).buffer},uint8array:function(le){return Be(le,new Uint8Array(le.length))},nodebuffer:function(le){return Be(le,se.allocBuffer(le.length))}},Ee.array={string:he,array:He,arraybuffer:function(le){return new Uint8Array(le).buffer},uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return se.newBufferFrom(le)}},Ee.arraybuffer={string:function(le){return he(new Uint8Array(le))},array:function(le){return Te(new Uint8Array(le),new Array(le.byteLength))},arraybuffer:He,uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return se.newBufferFrom(new Uint8Array(le))}},Ee.uint8array={string:he,array:function(le){return Te(le,new Array(le.length))},arraybuffer:function(le){return le.buffer},uint8array:He,nodebuffer:function(le){return se.newBufferFrom(le)}},Ee.nodebuffer={string:he,array:function(le){return Te(le,new Array(le.length))},arraybuffer:function(le){return Ee.nodebuffer.uint8array(le).buffer},uint8array:function(le){return Te(le,new Uint8Array(le.length))},nodebuffer:He},$e.transformTo=function(le,ye){if(ye=ye||"",!le)return ye;$e.checkSupport(le);var xe=$e.getTypeOf(ye);return Ee[xe][le](ye)},$e.getTypeOf=function(le){return"string"==typeof le?"string":"[object Array]"===Object.prototype.toString.call(le)?"array":de.nodebuffer&&se.isBuffer(le)?"nodebuffer":de.uint8array&&le instanceof Uint8Array?"uint8array":de.arraybuffer&&le instanceof ArrayBuffer?"arraybuffer":void 0},$e.checkSupport=function(le){if(!de[le.toLowerCase()])throw new Error(le+" is not supported by this platform")},$e.MAX_VALUE_16BITS=65535,$e.MAX_VALUE_32BITS=-1,$e.pretty=function(le){var ye,xe,We="";for(xe=0;xe<(le||"").length;xe++)We+="\\x"+((ye=le.charCodeAt(xe))<16?"0":"")+ye.toString(16).toUpperCase();return We},$e.delay=function(le,ye,xe){be(function(){le.apply(xe||null,ye||[])})},$e.inherits=function(le,ye){function xe(){}xe.prototype=ye.prototype,le.prototype=new xe},$e.extend=function(){var le,ye,xe={};for(le=0;le<arguments.length;le++)for(ye in arguments[le])arguments[le].hasOwnProperty(ye)&&void 0===xe[ye]&&(xe[ye]=arguments[le][ye]);return xe},$e.prepareContent=function(le,ye,xe,We,St){return Ne.Promise.resolve(ye).then(function(Xe){return de.blob&&(Xe instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Xe)))&&"undefined"!=typeof FileReader?new Ne.Promise(function(Lt,Mt){var Jt=new FileReader;Jt.onload=function(vt){Lt(vt.target.result)},Jt.onerror=function(vt){Mt(vt.target.error)},Jt.readAsArrayBuffer(Xe)}):Xe}).then(function(Xe){var Mt,Lt=$e.getTypeOf(Xe);return Lt?("arraybuffer"===Lt?Xe=$e.transformTo("uint8array",Xe):"string"===Lt&&(St?Xe=we.decode(Xe):xe&&!0!==We&&(Xe=Be(Mt=Xe,de.uint8array?new Uint8Array(Mt.length):new Array(Mt.length)))),Xe):Ne.Promise.reject(new Error("Can't read the data of '"+le+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(Pe,Ot,$e){"use strict";var de=Pe("./reader/readerFor"),we=Pe("./utils"),se=Pe("./signature"),be=Pe("./zipEntry"),Ne=(Pe("./utf8"),Pe("./support"));function He(Be){this.files=[],this.loadOptions=Be}He.prototype={checkSignature:function(Be){if(!this.reader.readAndCheckSignature(Be)){this.reader.index-=4;var ze=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+we.pretty(ze)+", expected "+we.pretty(Be)+")")}},isSignature:function(Be,ze){var he=this.reader.index;this.reader.setIndex(Be);var Te=this.reader.readString(4)===ze;return this.reader.setIndex(he),Te},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Be=this.reader.readData(this.zipCommentLength),he=we.transformTo(Ne.uint8array?"uint8array":"array",Be);this.zipComment=this.loadOptions.decodeFileName(he)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Be,ze,he,Te=this.zip64EndOfCentralSize-44;0<Te;)Be=this.reader.readInt(2),ze=this.reader.readInt(4),he=this.reader.readData(ze),this.zip64ExtensibleData[Be]={id:Be,length:ze,value:he}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Be,ze;for(Be=0;Be<this.files.length;Be++)this.reader.setIndex((ze=this.files[Be]).localHeaderOffset),this.checkSignature(se.LOCAL_FILE_HEADER),ze.readLocalPart(this.reader),ze.handleUTF8(),ze.processAttributes()},readCentralDir:function(){var Be;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(se.CENTRAL_FILE_HEADER);)(Be=new be({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Be);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Be=this.reader.lastIndexOfSignature(se.CENTRAL_DIRECTORY_END);if(Be<0)throw this.isSignature(0,se.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Be);var ze=Be;if(this.checkSignature(se.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===we.MAX_VALUE_16BITS||this.diskWithCentralDirStart===we.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===we.MAX_VALUE_16BITS||this.centralDirRecords===we.MAX_VALUE_16BITS||this.centralDirSize===we.MAX_VALUE_32BITS||this.centralDirOffset===we.MAX_VALUE_32BITS){if(this.zip64=!0,(Be=this.reader.lastIndexOfSignature(se.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Be),this.checkSignature(se.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,se.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(se.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(se.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var he=this.centralDirOffset+this.centralDirSize;this.zip64&&(he+=20,he+=12+this.zip64EndOfCentralSize);var Te=ze-he;if(0<Te)this.isSignature(ze,se.CENTRAL_FILE_HEADER)||(this.reader.zero=Te);else if(Te<0)throw new Error("Corrupted zip: missing "+Math.abs(Te)+" bytes.")},prepareReader:function(Be){this.reader=de(Be)},load:function(Be){this.prepareReader(Be),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Ot.exports=He},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(Pe,Ot,$e){"use strict";var de=Pe("./reader/readerFor"),we=Pe("./utils"),se=Pe("./compressedObject"),be=Pe("./crc32"),Ne=Pe("./utf8"),He=Pe("./compressions"),Be=Pe("./support");function ze(he,Te){this.options=he,this.loadOptions=Te}ze.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(he){var Te,Ee;if(he.skip(22),this.fileNameLength=he.readInt(2),Ee=he.readInt(2),this.fileName=he.readData(this.fileNameLength),he.skip(Ee),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(Te=function(le){for(var ye in He)if(He.hasOwnProperty(ye)&&He[ye].magic===le)return He[ye];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+we.pretty(this.compressionMethod)+" unknown (inner file : "+we.transformTo("string",this.fileName)+")");this.decompressed=new se(this.compressedSize,this.uncompressedSize,this.crc32,Te,he.readData(this.compressedSize))},readCentralPart:function(he){this.versionMadeBy=he.readInt(2),he.skip(2),this.bitFlag=he.readInt(2),this.compressionMethod=he.readString(2),this.date=he.readDate(),this.crc32=he.readInt(4),this.compressedSize=he.readInt(4),this.uncompressedSize=he.readInt(4);var Te=he.readInt(2);if(this.extraFieldsLength=he.readInt(2),this.fileCommentLength=he.readInt(2),this.diskNumberStart=he.readInt(2),this.internalFileAttributes=he.readInt(2),this.externalFileAttributes=he.readInt(4),this.localHeaderOffset=he.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");he.skip(Te),this.readExtraFields(he),this.parseZIP64ExtraField(he),this.fileComment=he.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var he=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==he&&(this.dosPermissions=63&this.externalFileAttributes),3==he&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(he){if(this.extraFields[1]){var Te=de(this.extraFields[1].value);this.uncompressedSize===we.MAX_VALUE_32BITS&&(this.uncompressedSize=Te.readInt(8)),this.compressedSize===we.MAX_VALUE_32BITS&&(this.compressedSize=Te.readInt(8)),this.localHeaderOffset===we.MAX_VALUE_32BITS&&(this.localHeaderOffset=Te.readInt(8)),this.diskNumberStart===we.MAX_VALUE_32BITS&&(this.diskNumberStart=Te.readInt(4))}},readExtraFields:function(he){var Te,Ee,le,ye=he.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});he.index+4<ye;)Te=he.readInt(2),Ee=he.readInt(2),le=he.readData(Ee),this.extraFields[Te]={id:Te,length:Ee,value:le};he.setIndex(ye)},handleUTF8:function(){var he=Be.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Ne.utf8decode(this.fileName),this.fileCommentStr=Ne.utf8decode(this.fileComment);else{var Te=this.findExtraFieldUnicodePath();if(null!==Te)this.fileNameStr=Te;else{var Ee=we.transformTo(he,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Ee)}var le=this.findExtraFieldUnicodeComment();if(null!==le)this.fileCommentStr=le;else{var ye=we.transformTo(he,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ye)}}},findExtraFieldUnicodePath:function(){var he=this.extraFields[28789];if(he){var Te=de(he.value);return 1!==Te.readInt(1)||be(this.fileName)!==Te.readInt(4)?null:Ne.utf8decode(Te.readData(he.length-5))}return null},findExtraFieldUnicodeComment:function(){var he=this.extraFields[25461];if(he){var Te=de(he.value);return 1!==Te.readInt(1)||be(this.fileComment)!==Te.readInt(4)?null:Ne.utf8decode(Te.readData(he.length-5))}return null}},Ot.exports=ze},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(Pe,Ot,$e){"use strict";function de(Te,Ee,le){this.name=Te,this.dir=le.dir,this.date=le.date,this.comment=le.comment,this.unixPermissions=le.unixPermissions,this.dosPermissions=le.dosPermissions,this._data=Ee,this._dataBinary=le.binary,this.options={compression:le.compression,compressionOptions:le.compressionOptions}}var we=Pe("./stream/StreamHelper"),se=Pe("./stream/DataWorker"),be=Pe("./utf8"),Ne=Pe("./compressedObject"),He=Pe("./stream/GenericWorker");de.prototype={internalStream:function(Te){var Ee=null,le="string";try{if(!Te)throw new Error("No output type specified.");var ye="string"===(le=Te.toLowerCase())||"text"===le;"binarystring"!==le&&"text"!==le||(le="string"),Ee=this._decompressWorker();var xe=!this._dataBinary;xe&&!ye&&(Ee=Ee.pipe(new be.Utf8EncodeWorker)),!xe&&ye&&(Ee=Ee.pipe(new be.Utf8DecodeWorker))}catch(We){(Ee=new He("error")).error(We)}return new we(Ee,le,"")},async:function(Te,Ee){return this.internalStream(Te).accumulate(Ee)},nodeStream:function(Te,Ee){return this.internalStream(Te||"nodebuffer").toNodejsStream(Ee)},_compressWorker:function(Te,Ee){if(this._data instanceof Ne&&this._data.compression.magic===Te.magic)return this._data.getCompressedWorker();var le=this._decompressWorker();return this._dataBinary||(le=le.pipe(new be.Utf8EncodeWorker)),Ne.createWorkerFrom(le,Te,Ee)},_decompressWorker:function(){return this._data instanceof Ne?this._data.getContentWorker():this._data instanceof He?this._data:new se(this._data)}};for(var Be=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],ze=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},he=0;he<Be.length;he++)de.prototype[Be[he]]=ze;Ot.exports=de},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(Pe,Ot,$e){(function(de){"use strict";var we,se,be=de.MutationObserver||de.WebKitMutationObserver;if(be){var Ne=0,He=new be(Te),Be=de.document.createTextNode("");He.observe(Be,{characterData:!0}),we=function(){Be.data=Ne=++Ne%2}}else if(de.setImmediate||void 0===de.MessageChannel)we="document"in de&&"onreadystatechange"in de.document.createElement("script")?function(){var Ee=de.document.createElement("script");Ee.onreadystatechange=function(){Te(),Ee.onreadystatechange=null,Ee.parentNode.removeChild(Ee),Ee=null},de.document.documentElement.appendChild(Ee)}:function(){setTimeout(Te,0)};else{var ze=new de.MessageChannel;ze.port1.onmessage=Te,we=function(){ze.port2.postMessage(0)}}var he=[];function Te(){var Ee,le;se=!0;for(var ye=he.length;ye;){for(le=he,he=[],Ee=-1;++Ee<ye;)le[Ee]();ye=he.length}se=!1}Ot.exports=function(Ee){1!==he.push(Ee)||se||we()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(Pe,Ot,$e){"use strict";var de=Pe("immediate");function we(){}var se={},be=["REJECTED"],Ne=["FULFILLED"],He=["PENDING"];function Be(ye){if("function"!=typeof ye)throw new TypeError("resolver must be a function");this.state=He,this.queue=[],this.outcome=void 0,ye!==we&&Ee(this,ye)}function ze(ye,xe,We){this.promise=ye,"function"==typeof xe&&(this.onFulfilled=xe,this.callFulfilled=this.otherCallFulfilled),"function"==typeof We&&(this.onRejected=We,this.callRejected=this.otherCallRejected)}function he(ye,xe,We){de(function(){var St;try{St=xe(We)}catch(Xe){return se.reject(ye,Xe)}St===ye?se.reject(ye,new TypeError("Cannot resolve promise with itself")):se.resolve(ye,St)})}function Te(ye){var xe=ye&&ye.then;if(ye&&("object"==typeof ye||"function"==typeof ye)&&"function"==typeof xe)return function(){xe.apply(ye,arguments)}}function Ee(ye,xe){var We=!1;function St(Mt){We||(We=!0,se.reject(ye,Mt))}function Xe(Mt){We||(We=!0,se.resolve(ye,Mt))}var Lt=le(function(){xe(Xe,St)});"error"===Lt.status&&St(Lt.value)}function le(ye,xe){var We={};try{We.value=ye(xe),We.status="success"}catch(St){We.status="error",We.value=St}return We}(Ot.exports=Be).prototype.finally=function(ye){if("function"!=typeof ye)return this;var xe=this.constructor;return this.then(function(We){return xe.resolve(ye()).then(function(){return We})},function(We){return xe.resolve(ye()).then(function(){throw We})})},Be.prototype.catch=function(ye){return this.then(null,ye)},Be.prototype.then=function(ye,xe){if("function"!=typeof ye&&this.state===Ne||"function"!=typeof xe&&this.state===be)return this;var We=new this.constructor(we);return this.state!==He?he(We,this.state===Ne?ye:xe,this.outcome):this.queue.push(new ze(We,ye,xe)),We},ze.prototype.callFulfilled=function(ye){se.resolve(this.promise,ye)},ze.prototype.otherCallFulfilled=function(ye){he(this.promise,this.onFulfilled,ye)},ze.prototype.callRejected=function(ye){se.reject(this.promise,ye)},ze.prototype.otherCallRejected=function(ye){he(this.promise,this.onRejected,ye)},se.resolve=function(ye,xe){var We=le(Te,xe);if("error"===We.status)return se.reject(ye,We.value);var St=We.value;if(St)Ee(ye,St);else{ye.state=Ne,ye.outcome=xe;for(var Xe=-1,Lt=ye.queue.length;++Xe<Lt;)ye.queue[Xe].callFulfilled(xe)}return ye},se.reject=function(ye,xe){ye.state=be,ye.outcome=xe;for(var We=-1,St=ye.queue.length;++We<St;)ye.queue[We].callRejected(xe);return ye},Be.resolve=function(ye){return ye instanceof this?ye:se.resolve(new this(we),ye)},Be.reject=function(ye){var xe=new this(we);return se.reject(xe,ye)},Be.all=function(ye){var xe=this;if("[object Array]"!==Object.prototype.toString.call(ye))return this.reject(new TypeError("must be an array"));var We=ye.length,St=!1;if(!We)return this.resolve([]);for(var Xe=new Array(We),Lt=0,Mt=-1,Jt=new this(we);++Mt<We;)vt(ye[Mt],Mt);return Jt;function vt(Xt,Yn){xe.resolve(Xt).then(function(Re){Xe[Yn]=Re,++Lt!==We||St||(St=!0,se.resolve(Jt,Xe))},function(Re){St||(St=!0,se.reject(Jt,Re))})}},Be.race=function(ye){if("[object Array]"!==Object.prototype.toString.call(ye))return this.reject(new TypeError("must be an array"));var We=ye.length,St=!1;if(!We)return this.resolve([]);for(var Xe=-1,Lt=new this(we);++Xe<We;)this.resolve(ye[Xe]).then(function(Jt){St||(St=!0,se.resolve(Lt,Jt))},function(Jt){St||(St=!0,se.reject(Lt,Jt))});return Lt}},{immediate:36}],38:[function(Pe,Ot,$e){"use strict";var de={};(0,Pe("./lib/utils/common").assign)(de,Pe("./lib/deflate"),Pe("./lib/inflate"),Pe("./lib/zlib/constants")),Ot.exports=de},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(Pe,Ot,$e){"use strict";var de=Pe("./zlib/deflate"),we=Pe("./utils/common"),se=Pe("./utils/strings"),be=Pe("./zlib/messages"),Ne=Pe("./zlib/zstream"),He=Object.prototype.toString;function Ee(ye){if(!(this instanceof Ee))return new Ee(ye);this.options=we.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ye||{});var xe=this.options;xe.raw&&0<xe.windowBits?xe.windowBits=-xe.windowBits:xe.gzip&&0<xe.windowBits&&xe.windowBits<16&&(xe.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ne,this.strm.avail_out=0;var We=de.deflateInit2(this.strm,xe.level,xe.method,xe.windowBits,xe.memLevel,xe.strategy);if(0!==We)throw new Error(be[We]);if(xe.header&&de.deflateSetHeader(this.strm,xe.header),xe.dictionary){var St;if(St="string"==typeof xe.dictionary?se.string2buf(xe.dictionary):"[object ArrayBuffer]"===He.call(xe.dictionary)?new Uint8Array(xe.dictionary):xe.dictionary,0!==(We=de.deflateSetDictionary(this.strm,St)))throw new Error(be[We]);this._dict_set=!0}}function le(ye,xe){var We=new Ee(xe);if(We.push(ye,!0),We.err)throw We.msg||be[We.err];return We.result}Ee.prototype.push=function(ye,xe){var We,St,Xe=this.strm,Lt=this.options.chunkSize;if(this.ended)return!1;St=xe===~~xe?xe:!0===xe?4:0,Xe.input="string"==typeof ye?se.string2buf(ye):"[object ArrayBuffer]"===He.call(ye)?new Uint8Array(ye):ye,Xe.next_in=0,Xe.avail_in=Xe.input.length;do{if(0===Xe.avail_out&&(Xe.output=new we.Buf8(Lt),Xe.next_out=0,Xe.avail_out=Lt),1!==(We=de.deflate(Xe,St))&&0!==We)return this.onEnd(We),!(this.ended=!0);0!==Xe.avail_out&&(0!==Xe.avail_in||4!==St&&2!==St)||this.onData("string"===this.options.to?se.buf2binstring(we.shrinkBuf(Xe.output,Xe.next_out)):we.shrinkBuf(Xe.output,Xe.next_out))}while((0<Xe.avail_in||0===Xe.avail_out)&&1!==We);return 4===St?(We=de.deflateEnd(this.strm),this.onEnd(We),this.ended=!0,0===We):2!==St||(this.onEnd(0),!(Xe.avail_out=0))},Ee.prototype.onData=function(ye){this.chunks.push(ye)},Ee.prototype.onEnd=function(ye){0===ye&&(this.result="string"===this.options.to?this.chunks.join(""):we.flattenChunks(this.chunks)),this.chunks=[],this.err=ye,this.msg=this.strm.msg},$e.Deflate=Ee,$e.deflate=le,$e.deflateRaw=function(ye,xe){return(xe=xe||{}).raw=!0,le(ye,xe)},$e.gzip=function(ye,xe){return(xe=xe||{}).gzip=!0,le(ye,xe)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(Pe,Ot,$e){"use strict";var de=Pe("./zlib/inflate"),we=Pe("./utils/common"),se=Pe("./utils/strings"),be=Pe("./zlib/constants"),Ne=Pe("./zlib/messages"),He=Pe("./zlib/zstream"),Be=Pe("./zlib/gzheader"),ze=Object.prototype.toString;function he(Ee){if(!(this instanceof he))return new he(Ee);this.options=we.assign({chunkSize:16384,windowBits:0,to:""},Ee||{});var le=this.options;le.raw&&0<=le.windowBits&&le.windowBits<16&&(le.windowBits=-le.windowBits,0===le.windowBits&&(le.windowBits=-15)),!(0<=le.windowBits&&le.windowBits<16)||Ee&&Ee.windowBits||(le.windowBits+=32),15<le.windowBits&&le.windowBits<48&&0==(15&le.windowBits)&&(le.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new He,this.strm.avail_out=0;var ye=de.inflateInit2(this.strm,le.windowBits);if(ye!==be.Z_OK)throw new Error(Ne[ye]);this.header=new Be,de.inflateGetHeader(this.strm,this.header)}function Te(Ee,le){var ye=new he(le);if(ye.push(Ee,!0),ye.err)throw ye.msg||Ne[ye.err];return ye.result}he.prototype.push=function(Ee,le){var ye,xe,We,St,Xe,Lt,Mt=this.strm,Jt=this.options.chunkSize,vt=this.options.dictionary,Xt=!1;if(this.ended)return!1;xe=le===~~le?le:!0===le?be.Z_FINISH:be.Z_NO_FLUSH,Mt.input="string"==typeof Ee?se.binstring2buf(Ee):"[object ArrayBuffer]"===ze.call(Ee)?new Uint8Array(Ee):Ee,Mt.next_in=0,Mt.avail_in=Mt.input.length;do{if(0===Mt.avail_out&&(Mt.output=new we.Buf8(Jt),Mt.next_out=0,Mt.avail_out=Jt),(ye=de.inflate(Mt,be.Z_NO_FLUSH))===be.Z_NEED_DICT&&vt&&(Lt="string"==typeof vt?se.string2buf(vt):"[object ArrayBuffer]"===ze.call(vt)?new Uint8Array(vt):vt,ye=de.inflateSetDictionary(this.strm,Lt)),ye===be.Z_BUF_ERROR&&!0===Xt&&(ye=be.Z_OK,Xt=!1),ye!==be.Z_STREAM_END&&ye!==be.Z_OK)return this.onEnd(ye),!(this.ended=!0);Mt.next_out&&(0!==Mt.avail_out&&ye!==be.Z_STREAM_END&&(0!==Mt.avail_in||xe!==be.Z_FINISH&&xe!==be.Z_SYNC_FLUSH)||("string"===this.options.to?(We=se.utf8border(Mt.output,Mt.next_out),St=Mt.next_out-We,Xe=se.buf2string(Mt.output,We),Mt.next_out=St,Mt.avail_out=Jt-St,St&&we.arraySet(Mt.output,Mt.output,We,St,0),this.onData(Xe)):this.onData(we.shrinkBuf(Mt.output,Mt.next_out)))),0===Mt.avail_in&&0===Mt.avail_out&&(Xt=!0)}while((0<Mt.avail_in||0===Mt.avail_out)&&ye!==be.Z_STREAM_END);return ye===be.Z_STREAM_END&&(xe=be.Z_FINISH),xe===be.Z_FINISH?(ye=de.inflateEnd(this.strm),this.onEnd(ye),this.ended=!0,ye===be.Z_OK):xe!==be.Z_SYNC_FLUSH||(this.onEnd(be.Z_OK),!(Mt.avail_out=0))},he.prototype.onData=function(Ee){this.chunks.push(Ee)},he.prototype.onEnd=function(Ee){Ee===be.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):we.flattenChunks(this.chunks)),this.chunks=[],this.err=Ee,this.msg=this.strm.msg},$e.Inflate=he,$e.inflate=Te,$e.inflateRaw=function(Ee,le){return(le=le||{}).raw=!0,Te(Ee,le)},$e.ungzip=Te},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(Pe,Ot,$e){"use strict";var de="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;$e.assign=function(be){for(var Ne=Array.prototype.slice.call(arguments,1);Ne.length;){var He=Ne.shift();if(He){if("object"!=typeof He)throw new TypeError(He+"must be non-object");for(var Be in He)He.hasOwnProperty(Be)&&(be[Be]=He[Be])}}return be},$e.shrinkBuf=function(be,Ne){return be.length===Ne?be:be.subarray?be.subarray(0,Ne):(be.length=Ne,be)};var we={arraySet:function(be,Ne,He,Be,ze){if(Ne.subarray&&be.subarray)be.set(Ne.subarray(He,He+Be),ze);else for(var he=0;he<Be;he++)be[ze+he]=Ne[He+he]},flattenChunks:function(be){var Ne,He,Be,ze,he,Te;for(Ne=Be=0,He=be.length;Ne<He;Ne++)Be+=be[Ne].length;for(Te=new Uint8Array(Be),Ne=ze=0,He=be.length;Ne<He;Ne++)Te.set(he=be[Ne],ze),ze+=he.length;return Te}},se={arraySet:function(be,Ne,He,Be,ze){for(var he=0;he<Be;he++)be[ze+he]=Ne[He+he]},flattenChunks:function(be){return[].concat.apply([],be)}};$e.setTyped=function(be){be?($e.Buf8=Uint8Array,$e.Buf16=Uint16Array,$e.Buf32=Int32Array,$e.assign($e,we)):($e.Buf8=Array,$e.Buf16=Array,$e.Buf32=Array,$e.assign($e,se))},$e.setTyped(de)},{}],42:[function(Pe,Ot,$e){"use strict";var de=Pe("./common"),we=!0,se=!0;try{String.fromCharCode.apply(null,[0])}catch(Be){we=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Be){se=!1}for(var be=new de.Buf8(256),Ne=0;Ne<256;Ne++)be[Ne]=252<=Ne?6:248<=Ne?5:240<=Ne?4:224<=Ne?3:192<=Ne?2:1;function He(Be,ze){if(ze<65537&&(Be.subarray&&se||!Be.subarray&&we))return String.fromCharCode.apply(null,de.shrinkBuf(Be,ze));for(var he="",Te=0;Te<ze;Te++)he+=String.fromCharCode(Be[Te]);return he}be[254]=be[254]=1,$e.string2buf=function(Be){var ze,he,Te,Ee,le,ye=Be.length,xe=0;for(Ee=0;Ee<ye;Ee++)55296==(64512&(he=Be.charCodeAt(Ee)))&&Ee+1<ye&&56320==(64512&(Te=Be.charCodeAt(Ee+1)))&&(he=65536+(he-55296<<10)+(Te-56320),Ee++),xe+=he<128?1:he<2048?2:he<65536?3:4;for(ze=new de.Buf8(xe),Ee=le=0;le<xe;Ee++)55296==(64512&(he=Be.charCodeAt(Ee)))&&Ee+1<ye&&56320==(64512&(Te=Be.charCodeAt(Ee+1)))&&(he=65536+(he-55296<<10)+(Te-56320),Ee++),he<128?ze[le++]=he:(he<2048?ze[le++]=192|he>>>6:(he<65536?ze[le++]=224|he>>>12:(ze[le++]=240|he>>>18,ze[le++]=128|he>>>12&63),ze[le++]=128|he>>>6&63),ze[le++]=128|63&he);return ze},$e.buf2binstring=function(Be){return He(Be,Be.length)},$e.binstring2buf=function(Be){for(var ze=new de.Buf8(Be.length),he=0,Te=ze.length;he<Te;he++)ze[he]=Be.charCodeAt(he);return ze},$e.buf2string=function(Be,ze){var he,Te,Ee,le,ye=ze||Be.length,xe=new Array(2*ye);for(he=Te=0;he<ye;)if((Ee=Be[he++])<128)xe[Te++]=Ee;else if(4<(le=be[Ee]))xe[Te++]=65533,he+=le-1;else{for(Ee&=2===le?31:3===le?15:7;1<le&&he<ye;)Ee=Ee<<6|63&Be[he++],le--;1<le?xe[Te++]=65533:Ee<65536?xe[Te++]=Ee:(xe[Te++]=55296|(Ee-=65536)>>10&1023,xe[Te++]=56320|1023&Ee)}return He(xe,Te)},$e.utf8border=function(Be,ze){var he;for((ze=ze||Be.length)>Be.length&&(ze=Be.length),he=ze-1;0<=he&&128==(192&Be[he]);)he--;return he<0||0===he?ze:he+be[Be[he]]>ze?he:ze}},{"./common":41}],43:[function(Pe,Ot,$e){"use strict";Ot.exports=function(de,we,se,be){for(var Ne=65535&de|0,He=de>>>16&65535|0,Be=0;0!==se;){for(se-=Be=2e3<se?2e3:se;He=He+(Ne=Ne+we[be++]|0)|0,--Be;);Ne%=65521,He%=65521}return Ne|He<<16|0}},{}],44:[function(Pe,Ot,$e){"use strict";Ot.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(Pe,Ot,$e){"use strict";var de=function(){for(var we,se=[],be=0;be<256;be++){we=be;for(var Ne=0;Ne<8;Ne++)we=1&we?3988292384^we>>>1:we>>>1;se[be]=we}return se}();Ot.exports=function(we,se,be,Ne){var He=de,Be=Ne+be;we^=-1;for(var ze=Ne;ze<Be;ze++)we=we>>>8^He[255&(we^se[ze])];return-1^we}},{}],46:[function(Pe,Ot,$e){"use strict";var de,we=Pe("../utils/common"),se=Pe("./trees"),be=Pe("./adler32"),Ne=Pe("./crc32"),He=Pe("./messages"),Xt=258,Yn=262;function En(K,kt){return K.msg=He[kt],kt}function qt(K){return(K<<1)-(4<K?9:0)}function ai(K){for(var kt=K.length;0<=--kt;)K[kt]=0}function ht(K){var kt=K.state,gt=kt.pending;gt>K.avail_out&&(gt=K.avail_out),0!==gt&&(we.arraySet(K.output,kt.pending_buf,kt.pending_out,gt,K.next_out),K.next_out+=gt,kt.pending_out+=gt,K.total_out+=gt,K.avail_out-=gt,kt.pending-=gt,0===kt.pending&&(kt.pending_out=0))}function ot(K,kt){se._tr_flush_block(K,0<=K.block_start?K.block_start:-1,K.strstart-K.block_start,kt),K.block_start=K.strstart,ht(K.strm)}function yt(K,kt){K.pending_buf[K.pending++]=kt}function wn(K,kt){K.pending_buf[K.pending++]=kt>>>8&255,K.pending_buf[K.pending++]=255&kt}function sn(K,kt){var gt,Ce,ve=K.max_chain_length,Ge=K.strstart,Pt=K.prev_length,Vt=K.nice_match,nt=K.strstart>K.w_size-Yn?K.strstart-(K.w_size-Yn):0,Yt=K.window,On=K.w_mask,jt=K.prev,jn=K.strstart+Xt,$r=Yt[Ge+Pt-1],rr=Yt[Ge+Pt];K.prev_length>=K.good_match&&(ve>>=2),Vt>K.lookahead&&(Vt=K.lookahead);do{if(Yt[(gt=kt)+Pt]===rr&&Yt[gt+Pt-1]===$r&&Yt[gt]===Yt[Ge]&&Yt[++gt]===Yt[Ge+1]){Ge+=2,gt++;do{}while(Yt[++Ge]===Yt[++gt]&&Yt[++Ge]===Yt[++gt]&&Yt[++Ge]===Yt[++gt]&&Yt[++Ge]===Yt[++gt]&&Yt[++Ge]===Yt[++gt]&&Yt[++Ge]===Yt[++gt]&&Yt[++Ge]===Yt[++gt]&&Yt[++Ge]===Yt[++gt]&&Ge<jn);if(Ce=Xt-(jn-Ge),Ge=jn-Xt,Pt<Ce){if(K.match_start=kt,Vt<=(Pt=Ce))break;$r=Yt[Ge+Pt-1],rr=Yt[Ge+Pt]}}}while((kt=jt[kt&On])>nt&&0!=--ve);return Pt<=K.lookahead?Pt:K.lookahead}function xi(K){var kt,gt,Ce,ve,Ge,Pt,Vt,nt,Yt,On,jt=K.w_size;do{if(ve=K.window_size-K.lookahead-K.strstart,K.strstart>=jt+(jt-Yn)){for(we.arraySet(K.window,K.window,jt,jt,0),K.match_start-=jt,K.strstart-=jt,K.block_start-=jt,kt=gt=K.hash_size;Ce=K.head[--kt],K.head[kt]=jt<=Ce?Ce-jt:0,--gt;);for(kt=gt=jt;Ce=K.prev[--kt],K.prev[kt]=jt<=Ce?Ce-jt:0,--gt;);ve+=jt}if(0===K.strm.avail_in)break;if(Vt=K.window,nt=K.strstart+K.lookahead,On=void 0,(Yt=ve)<(On=(Pt=K.strm).avail_in)&&(On=Yt),gt=0===On?0:(Pt.avail_in-=On,we.arraySet(Vt,Pt.input,Pt.next_in,On,nt),1===Pt.state.wrap?Pt.adler=be(Pt.adler,Vt,On,nt):2===Pt.state.wrap&&(Pt.adler=Ne(Pt.adler,Vt,On,nt)),Pt.next_in+=On,Pt.total_in+=On,On),K.lookahead+=gt,K.lookahead+K.insert>=3)for(K.ins_h=K.window[Ge=K.strstart-K.insert],K.ins_h=(K.ins_h<<K.hash_shift^K.window[Ge+1])&K.hash_mask;K.insert&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[Ge+3-1])&K.hash_mask,K.prev[Ge&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=Ge,Ge++,K.insert--,!(K.lookahead+K.insert<3)););}while(K.lookahead<Yn&&0!==K.strm.avail_in)}function Li(K,kt){for(var gt,Ce;;){if(K.lookahead<Yn){if(xi(K),K.lookahead<Yn&&0===kt)return 1;if(0===K.lookahead)break}if(gt=0,K.lookahead>=3&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+3-1])&K.hash_mask,gt=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),0!==gt&&K.strstart-gt<=K.w_size-Yn&&(K.match_length=sn(K,gt)),K.match_length>=3)if(Ce=se._tr_tally(K,K.strstart-K.match_start,K.match_length-3),K.lookahead-=K.match_length,K.match_length<=K.max_lazy_match&&K.lookahead>=3){for(K.match_length--;K.strstart++,K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+3-1])&K.hash_mask,gt=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart,0!=--K.match_length;);K.strstart++}else K.strstart+=K.match_length,K.match_length=0,K.ins_h=K.window[K.strstart],K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+1])&K.hash_mask;else Ce=se._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++;if(Ce&&(ot(K,!1),0===K.strm.avail_out))return 1}return K.insert=K.strstart<2?K.strstart:2,4===kt?(ot(K,!0),0===K.strm.avail_out?3:4):K.last_lit&&(ot(K,!1),0===K.strm.avail_out)?1:2}function an(K,kt){for(var gt,Ce,ve;;){if(K.lookahead<Yn){if(xi(K),K.lookahead<Yn&&0===kt)return 1;if(0===K.lookahead)break}if(gt=0,K.lookahead>=3&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+3-1])&K.hash_mask,gt=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),K.prev_length=K.match_length,K.prev_match=K.match_start,K.match_length=2,0!==gt&&K.prev_length<K.max_lazy_match&&K.strstart-gt<=K.w_size-Yn&&(K.match_length=sn(K,gt),K.match_length<=5&&(1===K.strategy||3===K.match_length&&4096<K.strstart-K.match_start)&&(K.match_length=2)),K.prev_length>=3&&K.match_length<=K.prev_length){for(ve=K.strstart+K.lookahead-3,Ce=se._tr_tally(K,K.strstart-1-K.prev_match,K.prev_length-3),K.lookahead-=K.prev_length-1,K.prev_length-=2;++K.strstart<=ve&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+3-1])&K.hash_mask,gt=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),0!=--K.prev_length;);if(K.match_available=0,K.match_length=2,K.strstart++,Ce&&(ot(K,!1),0===K.strm.avail_out))return 1}else if(K.match_available){if((Ce=se._tr_tally(K,0,K.window[K.strstart-1]))&&ot(K,!1),K.strstart++,K.lookahead--,0===K.strm.avail_out)return 1}else K.match_available=1,K.strstart++,K.lookahead--}return K.match_available&&(Ce=se._tr_tally(K,0,K.window[K.strstart-1]),K.match_available=0),K.insert=K.strstart<2?K.strstart:2,4===kt?(ot(K,!0),0===K.strm.avail_out?3:4):K.last_lit&&(ot(K,!1),0===K.strm.avail_out)?1:2}function lr(K,kt,gt,Ce,ve){this.good_length=K,this.max_lazy=kt,this.nice_length=gt,this.max_chain=Ce,this.func=ve}function Oo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new we.Buf16(1146),this.dyn_dtree=new we.Buf16(122),this.bl_tree=new we.Buf16(78),ai(this.dyn_ltree),ai(this.dyn_dtree),ai(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new we.Buf16(16),this.heap=new we.Buf16(573),ai(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new we.Buf16(573),ai(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ms(K){var kt;return K&&K.state?(K.total_in=K.total_out=0,K.data_type=2,(kt=K.state).pending=0,kt.pending_out=0,kt.wrap<0&&(kt.wrap=-kt.wrap),kt.status=kt.wrap?42:113,K.adler=2===kt.wrap?0:1,kt.last_flush=0,se._tr_init(kt),0):En(K,-2)}function Nu(K){var gt,kt=ms(K);return 0===kt&&((gt=K.state).window_size=2*gt.w_size,ai(gt.head),gt.max_lazy_match=de[gt.level].max_lazy,gt.good_match=de[gt.level].good_length,gt.nice_match=de[gt.level].nice_length,gt.max_chain_length=de[gt.level].max_chain,gt.strstart=0,gt.block_start=0,gt.lookahead=0,gt.insert=0,gt.match_length=gt.prev_length=2,gt.match_available=0,gt.ins_h=0),kt}function er(K,kt,gt,Ce,ve,Ge){if(!K)return-2;var Pt=1;if(-1===kt&&(kt=6),Ce<0?(Pt=0,Ce=-Ce):15<Ce&&(Pt=2,Ce-=16),ve<1||9<ve||8!==gt||Ce<8||15<Ce||kt<0||9<kt||Ge<0||4<Ge)return En(K,-2);8===Ce&&(Ce=9);var Vt=new Oo;return(K.state=Vt).strm=K,Vt.wrap=Pt,Vt.gzhead=null,Vt.w_bits=Ce,Vt.w_size=1<<Vt.w_bits,Vt.w_mask=Vt.w_size-1,Vt.hash_bits=ve+7,Vt.hash_size=1<<Vt.hash_bits,Vt.hash_mask=Vt.hash_size-1,Vt.hash_shift=~~((Vt.hash_bits+3-1)/3),Vt.window=new we.Buf8(2*Vt.w_size),Vt.head=new we.Buf16(Vt.hash_size),Vt.prev=new we.Buf16(Vt.w_size),Vt.lit_bufsize=1<<ve+6,Vt.pending_buf_size=4*Vt.lit_bufsize,Vt.pending_buf=new we.Buf8(Vt.pending_buf_size),Vt.d_buf=1*Vt.lit_bufsize,Vt.l_buf=3*Vt.lit_bufsize,Vt.level=kt,Vt.strategy=Ge,Vt.method=gt,Nu(K)}de=[new lr(0,0,0,0,function(K,kt){var gt=65535;for(gt>K.pending_buf_size-5&&(gt=K.pending_buf_size-5);;){if(K.lookahead<=1){if(xi(K),0===K.lookahead&&0===kt)return 1;if(0===K.lookahead)break}K.strstart+=K.lookahead,K.lookahead=0;var Ce=K.block_start+gt;if((0===K.strstart||K.strstart>=Ce)&&(K.lookahead=K.strstart-Ce,K.strstart=Ce,ot(K,!1),0===K.strm.avail_out)||K.strstart-K.block_start>=K.w_size-Yn&&(ot(K,!1),0===K.strm.avail_out))return 1}return K.insert=0,4===kt?(ot(K,!0),0===K.strm.avail_out?3:4):(K.strstart>K.block_start&&ot(K,!1),1)}),new lr(4,4,8,4,Li),new lr(4,5,16,8,Li),new lr(4,6,32,32,Li),new lr(4,4,16,16,an),new lr(8,16,32,32,an),new lr(8,16,128,128,an),new lr(8,32,128,256,an),new lr(32,128,258,1024,an),new lr(32,258,258,4096,an)],$e.deflateInit=function(K,kt){return er(K,kt,8,15,8,0)},$e.deflateInit2=er,$e.deflateReset=Nu,$e.deflateResetKeep=ms,$e.deflateSetHeader=function(K,kt){return K&&K.state?2!==K.state.wrap?-2:(K.state.gzhead=kt,0):-2},$e.deflate=function(K,kt){var gt,Ce,ve,Ge;if(!K||!K.state||5<kt||kt<0)return K?En(K,-2):-2;if(Ce=K.state,!K.output||!K.input&&0!==K.avail_in||666===Ce.status&&4!==kt)return En(K,0===K.avail_out?-5:-2);if(Ce.strm=K,gt=Ce.last_flush,Ce.last_flush=kt,42===Ce.status)if(2===Ce.wrap)K.adler=0,yt(Ce,31),yt(Ce,139),yt(Ce,8),Ce.gzhead?(yt(Ce,(Ce.gzhead.text?1:0)+(Ce.gzhead.hcrc?2:0)+(Ce.gzhead.extra?4:0)+(Ce.gzhead.name?8:0)+(Ce.gzhead.comment?16:0)),yt(Ce,255&Ce.gzhead.time),yt(Ce,Ce.gzhead.time>>8&255),yt(Ce,Ce.gzhead.time>>16&255),yt(Ce,Ce.gzhead.time>>24&255),yt(Ce,9===Ce.level?2:2<=Ce.strategy||Ce.level<2?4:0),yt(Ce,255&Ce.gzhead.os),Ce.gzhead.extra&&Ce.gzhead.extra.length&&(yt(Ce,255&Ce.gzhead.extra.length),yt(Ce,Ce.gzhead.extra.length>>8&255)),Ce.gzhead.hcrc&&(K.adler=Ne(K.adler,Ce.pending_buf,Ce.pending,0)),Ce.gzindex=0,Ce.status=69):(yt(Ce,0),yt(Ce,0),yt(Ce,0),yt(Ce,0),yt(Ce,0),yt(Ce,9===Ce.level?2:2<=Ce.strategy||Ce.level<2?4:0),yt(Ce,3),Ce.status=113);else{var Pt=8+(Ce.w_bits-8<<4)<<8;Pt|=(2<=Ce.strategy||Ce.level<2?0:Ce.level<6?1:6===Ce.level?2:3)<<6,0!==Ce.strstart&&(Pt|=32),Pt+=31-Pt%31,Ce.status=113,wn(Ce,Pt),0!==Ce.strstart&&(wn(Ce,K.adler>>>16),wn(Ce,65535&K.adler)),K.adler=1}if(69===Ce.status)if(Ce.gzhead.extra){for(ve=Ce.pending;Ce.gzindex<(65535&Ce.gzhead.extra.length)&&(Ce.pending!==Ce.pending_buf_size||(Ce.gzhead.hcrc&&Ce.pending>ve&&(K.adler=Ne(K.adler,Ce.pending_buf,Ce.pending-ve,ve)),ht(K),ve=Ce.pending,Ce.pending!==Ce.pending_buf_size));)yt(Ce,255&Ce.gzhead.extra[Ce.gzindex]),Ce.gzindex++;Ce.gzhead.hcrc&&Ce.pending>ve&&(K.adler=Ne(K.adler,Ce.pending_buf,Ce.pending-ve,ve)),Ce.gzindex===Ce.gzhead.extra.length&&(Ce.gzindex=0,Ce.status=73)}else Ce.status=73;if(73===Ce.status)if(Ce.gzhead.name){ve=Ce.pending;do{if(Ce.pending===Ce.pending_buf_size&&(Ce.gzhead.hcrc&&Ce.pending>ve&&(K.adler=Ne(K.adler,Ce.pending_buf,Ce.pending-ve,ve)),ht(K),ve=Ce.pending,Ce.pending===Ce.pending_buf_size)){Ge=1;break}Ge=Ce.gzindex<Ce.gzhead.name.length?255&Ce.gzhead.name.charCodeAt(Ce.gzindex++):0,yt(Ce,Ge)}while(0!==Ge);Ce.gzhead.hcrc&&Ce.pending>ve&&(K.adler=Ne(K.adler,Ce.pending_buf,Ce.pending-ve,ve)),0===Ge&&(Ce.gzindex=0,Ce.status=91)}else Ce.status=91;if(91===Ce.status)if(Ce.gzhead.comment){ve=Ce.pending;do{if(Ce.pending===Ce.pending_buf_size&&(Ce.gzhead.hcrc&&Ce.pending>ve&&(K.adler=Ne(K.adler,Ce.pending_buf,Ce.pending-ve,ve)),ht(K),ve=Ce.pending,Ce.pending===Ce.pending_buf_size)){Ge=1;break}Ge=Ce.gzindex<Ce.gzhead.comment.length?255&Ce.gzhead.comment.charCodeAt(Ce.gzindex++):0,yt(Ce,Ge)}while(0!==Ge);Ce.gzhead.hcrc&&Ce.pending>ve&&(K.adler=Ne(K.adler,Ce.pending_buf,Ce.pending-ve,ve)),0===Ge&&(Ce.status=103)}else Ce.status=103;if(103===Ce.status&&(Ce.gzhead.hcrc?(Ce.pending+2>Ce.pending_buf_size&&ht(K),Ce.pending+2<=Ce.pending_buf_size&&(yt(Ce,255&K.adler),yt(Ce,K.adler>>8&255),K.adler=0,Ce.status=113)):Ce.status=113),0!==Ce.pending){if(ht(K),0===K.avail_out)return Ce.last_flush=-1,0}else if(0===K.avail_in&&qt(kt)<=qt(gt)&&4!==kt)return En(K,-5);if(666===Ce.status&&0!==K.avail_in)return En(K,-5);if(0!==K.avail_in||0!==Ce.lookahead||0!==kt&&666!==Ce.status){var Vt=2===Ce.strategy?function(nt,Yt){for(var On;;){if(0===nt.lookahead&&(xi(nt),0===nt.lookahead)){if(0===Yt)return 1;break}if(nt.match_length=0,On=se._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++,On&&(ot(nt,!1),0===nt.strm.avail_out))return 1}return nt.insert=0,4===Yt?(ot(nt,!0),0===nt.strm.avail_out?3:4):nt.last_lit&&(ot(nt,!1),0===nt.strm.avail_out)?1:2}(Ce,kt):3===Ce.strategy?function(nt,Yt){for(var On,jt,jn,$r,rr=nt.window;;){if(nt.lookahead<=Xt){if(xi(nt),nt.lookahead<=Xt&&0===Yt)return 1;if(0===nt.lookahead)break}if(nt.match_length=0,nt.lookahead>=3&&0<nt.strstart&&(jt=rr[jn=nt.strstart-1])===rr[++jn]&&jt===rr[++jn]&&jt===rr[++jn]){$r=nt.strstart+Xt;do{}while(jt===rr[++jn]&&jt===rr[++jn]&&jt===rr[++jn]&&jt===rr[++jn]&&jt===rr[++jn]&&jt===rr[++jn]&&jt===rr[++jn]&&jt===rr[++jn]&&jn<$r);nt.match_length=Xt-($r-jn),nt.match_length>nt.lookahead&&(nt.match_length=nt.lookahead)}if(nt.match_length>=3?(On=se._tr_tally(nt,1,nt.match_length-3),nt.lookahead-=nt.match_length,nt.strstart+=nt.match_length,nt.match_length=0):(On=se._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++),On&&(ot(nt,!1),0===nt.strm.avail_out))return 1}return nt.insert=0,4===Yt?(ot(nt,!0),0===nt.strm.avail_out?3:4):nt.last_lit&&(ot(nt,!1),0===nt.strm.avail_out)?1:2}(Ce,kt):de[Ce.level].func(Ce,kt);if(3!==Vt&&4!==Vt||(Ce.status=666),1===Vt||3===Vt)return 0===K.avail_out&&(Ce.last_flush=-1),0;if(2===Vt&&(1===kt?se._tr_align(Ce):5!==kt&&(se._tr_stored_block(Ce,0,0,!1),3===kt&&(ai(Ce.head),0===Ce.lookahead&&(Ce.strstart=0,Ce.block_start=0,Ce.insert=0))),ht(K),0===K.avail_out))return Ce.last_flush=-1,0}return 4!==kt?0:Ce.wrap<=0?1:(2===Ce.wrap?(yt(Ce,255&K.adler),yt(Ce,K.adler>>8&255),yt(Ce,K.adler>>16&255),yt(Ce,K.adler>>24&255),yt(Ce,255&K.total_in),yt(Ce,K.total_in>>8&255),yt(Ce,K.total_in>>16&255),yt(Ce,K.total_in>>24&255)):(wn(Ce,K.adler>>>16),wn(Ce,65535&K.adler)),ht(K),0<Ce.wrap&&(Ce.wrap=-Ce.wrap),0!==Ce.pending?0:1)},$e.deflateEnd=function(K){var kt;return K&&K.state?42!==(kt=K.state.status)&&69!==kt&&73!==kt&&91!==kt&&103!==kt&&113!==kt&&666!==kt?En(K,-2):(K.state=null,113===kt?En(K,-3):0):-2},$e.deflateSetDictionary=function(K,kt){var gt,Ce,ve,Ge,Pt,Vt,nt,Yt,On=kt.length;if(!K||!K.state||2===(Ge=(gt=K.state).wrap)||1===Ge&&42!==gt.status||gt.lookahead)return-2;for(1===Ge&&(K.adler=be(K.adler,kt,On,0)),gt.wrap=0,On>=gt.w_size&&(0===Ge&&(ai(gt.head),gt.strstart=0,gt.block_start=0,gt.insert=0),Yt=new we.Buf8(gt.w_size),we.arraySet(Yt,kt,On-gt.w_size,gt.w_size,0),kt=Yt,On=gt.w_size),Pt=K.avail_in,Vt=K.next_in,nt=K.input,K.avail_in=On,K.next_in=0,K.input=kt,xi(gt);gt.lookahead>=3;){for(Ce=gt.strstart,ve=gt.lookahead-2;gt.ins_h=(gt.ins_h<<gt.hash_shift^gt.window[Ce+3-1])&gt.hash_mask,gt.prev[Ce&gt.w_mask]=gt.head[gt.ins_h],gt.head[gt.ins_h]=Ce,Ce++,--ve;);gt.strstart=Ce,gt.lookahead=2,xi(gt)}return gt.strstart+=gt.lookahead,gt.block_start=gt.strstart,gt.insert=gt.lookahead,gt.lookahead=0,gt.match_length=gt.prev_length=2,gt.match_available=0,K.next_in=Vt,K.input=nt,K.avail_in=Pt,gt.wrap=Ge,0},$e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(Pe,Ot,$e){"use strict";Ot.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(Pe,Ot,$e){"use strict";Ot.exports=function(de,we){var se,be,Ne,He,Be,ze,he,Te,Ee,le,ye,xe,We,St,Xe,Lt,Mt,Jt,vt,Xt,Yn,Re,Ct,ne,Tt;ne=de.input,Ne=(be=de.next_in)+(de.avail_in-5),Tt=de.output,Be=(He=de.next_out)-(we-de.avail_out),ze=He+(de.avail_out-257),he=(se=de.state).dmax,Te=se.wsize,Ee=se.whave,le=se.wnext,ye=se.window,xe=se.hold,We=se.bits,St=se.lencode,Xe=se.distcode,Lt=(1<<se.lenbits)-1,Mt=(1<<se.distbits)-1;e:do{We<15&&(xe+=ne[be++]<<We,xe+=ne[be++]<<(We+=8),We+=8),Jt=St[xe&Lt];t:for(;;){if(xe>>>=vt=Jt>>>24,We-=vt,0==(vt=Jt>>>16&255))Tt[He++]=65535&Jt;else{if(!(16&vt)){if(0==(64&vt)){Jt=St[(65535&Jt)+(xe&(1<<vt)-1)];continue t}if(32&vt){se.mode=12;break e}de.msg="invalid literal/length code",se.mode=30;break e}Xt=65535&Jt,(vt&=15)&&(We<vt&&(xe+=ne[be++]<<We,We+=8),Xt+=xe&(1<<vt)-1,xe>>>=vt,We-=vt),We<15&&(xe+=ne[be++]<<We,xe+=ne[be++]<<(We+=8),We+=8),Jt=Xe[xe&Mt];n:for(;;){if(xe>>>=vt=Jt>>>24,We-=vt,!(16&(vt=Jt>>>16&255))){if(0==(64&vt)){Jt=Xe[(65535&Jt)+(xe&(1<<vt)-1)];continue n}de.msg="invalid distance code",se.mode=30;break e}if(Yn=65535&Jt,We<(vt&=15)&&(xe+=ne[be++]<<We,(We+=8)<vt&&(xe+=ne[be++]<<We,We+=8)),he<(Yn+=xe&(1<<vt)-1)){de.msg="invalid distance too far back",se.mode=30;break e}if(xe>>>=vt,We-=vt,(vt=He-Be)<Yn){if(Ee<(vt=Yn-vt)&&se.sane){de.msg="invalid distance too far back",se.mode=30;break e}if(Ct=ye,(Re=0)===le){if(Re+=Te-vt,vt<Xt){for(Xt-=vt;Tt[He++]=ye[Re++],--vt;);Re=He-Yn,Ct=Tt}}else if(le<vt){if(Re+=Te+le-vt,(vt-=le)<Xt){for(Xt-=vt;Tt[He++]=ye[Re++],--vt;);if(Re=0,le<Xt){for(Xt-=vt=le;Tt[He++]=ye[Re++],--vt;);Re=He-Yn,Ct=Tt}}}else if(Re+=le-vt,vt<Xt){for(Xt-=vt;Tt[He++]=ye[Re++],--vt;);Re=He-Yn,Ct=Tt}for(;2<Xt;)Tt[He++]=Ct[Re++],Tt[He++]=Ct[Re++],Tt[He++]=Ct[Re++],Xt-=3;Xt&&(Tt[He++]=Ct[Re++],1<Xt&&(Tt[He++]=Ct[Re++]))}else{for(Re=He-Yn;Tt[He++]=Tt[Re++],Tt[He++]=Tt[Re++],Tt[He++]=Tt[Re++],2<(Xt-=3););Xt&&(Tt[He++]=Tt[Re++],1<Xt&&(Tt[He++]=Tt[Re++]))}break}}break}}while(be<Ne&&He<ze);be-=Xt=We>>3,xe&=(1<<(We-=Xt<<3))-1,de.next_in=be,de.next_out=He,de.avail_in=be<Ne?Ne-be+5:5-(be-Ne),de.avail_out=He<ze?ze-He+257:257-(He-ze),se.hold=xe,se.bits=We}},{}],49:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils/common"),we=Pe("./adler32"),se=Pe("./crc32"),be=Pe("./inffast"),Ne=Pe("./inftrees");function ye(Re){return(Re>>>24&255)+(Re>>>8&65280)+((65280&Re)<<8)+((255&Re)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new de.Buf16(320),this.work=new de.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function We(Re){var Ct;return Re&&Re.state?(Re.total_in=Re.total_out=(Ct=Re.state).total=0,Re.msg="",Ct.wrap&&(Re.adler=1&Ct.wrap),Ct.mode=1,Ct.last=0,Ct.havedict=0,Ct.dmax=32768,Ct.head=null,Ct.hold=0,Ct.bits=0,Ct.lencode=Ct.lendyn=new de.Buf32(852),Ct.distcode=Ct.distdyn=new de.Buf32(592),Ct.sane=1,Ct.back=-1,0):-2}function St(Re){var Ct;return Re&&Re.state?((Ct=Re.state).wsize=0,Ct.whave=0,Ct.wnext=0,We(Re)):-2}function Xe(Re,Ct){var ne,Tt;return Re&&Re.state?(Tt=Re.state,Ct<0?(ne=0,Ct=-Ct):(ne=1+(Ct>>4),Ct<48&&(Ct&=15)),Ct&&(Ct<8||15<Ct)?-2:(null!==Tt.window&&Tt.wbits!==Ct&&(Tt.window=null),Tt.wrap=ne,Tt.wbits=Ct,St(Re))):-2}function Lt(Re,Ct){var ne,Tt;return Re?(Tt=new xe,(Re.state=Tt).window=null,0!==(ne=Xe(Re,Ct))&&(Re.state=null),ne):-2}var Mt,Jt,vt=!0;function Xt(Re){if(vt){var Ct;for(Mt=new de.Buf32(512),Jt=new de.Buf32(32),Ct=0;Ct<144;)Re.lens[Ct++]=8;for(;Ct<256;)Re.lens[Ct++]=9;for(;Ct<280;)Re.lens[Ct++]=7;for(;Ct<288;)Re.lens[Ct++]=8;for(Ne(1,Re.lens,0,288,Mt,0,Re.work,{bits:9}),Ct=0;Ct<32;)Re.lens[Ct++]=5;Ne(2,Re.lens,0,32,Jt,0,Re.work,{bits:5}),vt=!1}Re.lencode=Mt,Re.lenbits=9,Re.distcode=Jt,Re.distbits=5}function Yn(Re,Ct,ne,Tt){var yi,Wt=Re.state;return null===Wt.window&&(Wt.wsize=1<<Wt.wbits,Wt.wnext=0,Wt.whave=0,Wt.window=new de.Buf8(Wt.wsize)),Tt>=Wt.wsize?(de.arraySet(Wt.window,Ct,ne-Wt.wsize,Wt.wsize,0),Wt.wnext=0,Wt.whave=Wt.wsize):(Tt<(yi=Wt.wsize-Wt.wnext)&&(yi=Tt),de.arraySet(Wt.window,Ct,ne-Tt,yi,Wt.wnext),(Tt-=yi)?(de.arraySet(Wt.window,Ct,ne-Tt,Tt,0),Wt.wnext=Tt,Wt.whave=Wt.wsize):(Wt.wnext+=yi,Wt.wnext===Wt.wsize&&(Wt.wnext=0),Wt.whave<Wt.wsize&&(Wt.whave+=yi))),0}$e.inflateReset=St,$e.inflateReset2=Xe,$e.inflateResetKeep=We,$e.inflateInit=function(Re){return Lt(Re,15)},$e.inflateInit2=Lt,$e.inflate=function(Re,Ct){var ne,Tt,yi,Wt,En,qt,ai,ht,ot,yt,wn,sn,xi,Li,an,lr,Oo,ms,Nu,er,K,kt,gt,Ce,ve=0,Ge=new de.Buf8(4),Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Re||!Re.state||!Re.output||!Re.input&&0!==Re.avail_in)return-2;12===(ne=Re.state).mode&&(ne.mode=13),En=Re.next_out,yi=Re.output,Wt=Re.next_in,Tt=Re.input,ht=ne.hold,ot=ne.bits,yt=qt=Re.avail_in,wn=ai=Re.avail_out,kt=0;e:for(;;)switch(ne.mode){case 1:if(0===ne.wrap){ne.mode=13;break}for(;ot<16;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(2&ne.wrap&&35615===ht){Ge[ne.check=0]=255&ht,Ge[1]=ht>>>8&255,ne.check=se(ne.check,Ge,2,0),ot=ht=0,ne.mode=2;break}if(ne.flags=0,ne.head&&(ne.head.done=!1),!(1&ne.wrap)||(((255&ht)<<8)+(ht>>8))%31){Re.msg="incorrect header check",ne.mode=30;break}if(8!=(15&ht)){Re.msg="unknown compression method",ne.mode=30;break}if(ot-=4,K=8+(15&(ht>>>=4)),0===ne.wbits)ne.wbits=K;else if(K>ne.wbits){Re.msg="invalid window size",ne.mode=30;break}ne.dmax=1<<K,Re.adler=ne.check=1,ne.mode=512&ht?10:12,ot=ht=0;break;case 2:for(;ot<16;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(ne.flags=ht,8!=(255&ne.flags)){Re.msg="unknown compression method",ne.mode=30;break}if(57344&ne.flags){Re.msg="unknown header flags set",ne.mode=30;break}ne.head&&(ne.head.text=ht>>8&1),512&ne.flags&&(Ge[0]=255&ht,Ge[1]=ht>>>8&255,ne.check=se(ne.check,Ge,2,0)),ot=ht=0,ne.mode=3;case 3:for(;ot<32;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ne.head&&(ne.head.time=ht),512&ne.flags&&(Ge[0]=255&ht,Ge[1]=ht>>>8&255,Ge[2]=ht>>>16&255,Ge[3]=ht>>>24&255,ne.check=se(ne.check,Ge,4,0)),ot=ht=0,ne.mode=4;case 4:for(;ot<16;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ne.head&&(ne.head.xflags=255&ht,ne.head.os=ht>>8),512&ne.flags&&(Ge[0]=255&ht,Ge[1]=ht>>>8&255,ne.check=se(ne.check,Ge,2,0)),ot=ht=0,ne.mode=5;case 5:if(1024&ne.flags){for(;ot<16;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ne.length=ht,ne.head&&(ne.head.extra_len=ht),512&ne.flags&&(Ge[0]=255&ht,Ge[1]=ht>>>8&255,ne.check=se(ne.check,Ge,2,0)),ot=ht=0}else ne.head&&(ne.head.extra=null);ne.mode=6;case 6:if(1024&ne.flags&&(qt<(sn=ne.length)&&(sn=qt),sn&&(ne.head&&(K=ne.head.extra_len-ne.length,ne.head.extra||(ne.head.extra=new Array(ne.head.extra_len)),de.arraySet(ne.head.extra,Tt,Wt,sn,K)),512&ne.flags&&(ne.check=se(ne.check,Tt,sn,Wt)),qt-=sn,Wt+=sn,ne.length-=sn),ne.length))break e;ne.length=0,ne.mode=7;case 7:if(2048&ne.flags){if(0===qt)break e;for(sn=0;K=Tt[Wt+sn++],ne.head&&K&&ne.length<65536&&(ne.head.name+=String.fromCharCode(K)),K&&sn<qt;);if(512&ne.flags&&(ne.check=se(ne.check,Tt,sn,Wt)),qt-=sn,Wt+=sn,K)break e}else ne.head&&(ne.head.name=null);ne.length=0,ne.mode=8;case 8:if(4096&ne.flags){if(0===qt)break e;for(sn=0;K=Tt[Wt+sn++],ne.head&&K&&ne.length<65536&&(ne.head.comment+=String.fromCharCode(K)),K&&sn<qt;);if(512&ne.flags&&(ne.check=se(ne.check,Tt,sn,Wt)),qt-=sn,Wt+=sn,K)break e}else ne.head&&(ne.head.comment=null);ne.mode=9;case 9:if(512&ne.flags){for(;ot<16;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(ht!==(65535&ne.check)){Re.msg="header crc mismatch",ne.mode=30;break}ot=ht=0}ne.head&&(ne.head.hcrc=ne.flags>>9&1,ne.head.done=!0),Re.adler=ne.check=0,ne.mode=12;break;case 10:for(;ot<32;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}Re.adler=ne.check=ye(ht),ot=ht=0,ne.mode=11;case 11:if(0===ne.havedict)return Re.next_out=En,Re.avail_out=ai,Re.next_in=Wt,Re.avail_in=qt,ne.hold=ht,ne.bits=ot,2;Re.adler=ne.check=1,ne.mode=12;case 12:if(5===Ct||6===Ct)break e;case 13:if(ne.last){ht>>>=7&ot,ot-=7&ot,ne.mode=27;break}for(;ot<3;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}switch(ne.last=1&ht,ot-=1,3&(ht>>>=1)){case 0:ne.mode=14;break;case 1:if(Xt(ne),ne.mode=20,6!==Ct)break;ht>>>=2,ot-=2;break e;case 2:ne.mode=17;break;case 3:Re.msg="invalid block type",ne.mode=30}ht>>>=2,ot-=2;break;case 14:for(ht>>>=7&ot,ot-=7&ot;ot<32;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if((65535&ht)!=(ht>>>16^65535)){Re.msg="invalid stored block lengths",ne.mode=30;break}if(ne.length=65535&ht,ot=ht=0,ne.mode=15,6===Ct)break e;case 15:ne.mode=16;case 16:if(sn=ne.length){if(qt<sn&&(sn=qt),ai<sn&&(sn=ai),0===sn)break e;de.arraySet(yi,Tt,Wt,sn,En),qt-=sn,Wt+=sn,ai-=sn,En+=sn,ne.length-=sn;break}ne.mode=12;break;case 17:for(;ot<14;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(ne.nlen=257+(31&ht),ot-=5,ne.ndist=1+(31&(ht>>>=5)),ot-=5,ne.ncode=4+(15&(ht>>>=5)),ht>>>=4,ot-=4,286<ne.nlen||30<ne.ndist){Re.msg="too many length or distance symbols",ne.mode=30;break}ne.have=0,ne.mode=18;case 18:for(;ne.have<ne.ncode;){for(;ot<3;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ne.lens[Pt[ne.have++]]=7&ht,ht>>>=3,ot-=3}for(;ne.have<19;)ne.lens[Pt[ne.have++]]=0;if(ne.lencode=ne.lendyn,ne.lenbits=7,kt=Ne(0,ne.lens,0,19,ne.lencode,0,ne.work,gt={bits:ne.lenbits}),ne.lenbits=gt.bits,kt){Re.msg="invalid code lengths set",ne.mode=30;break}ne.have=0,ne.mode=19;case 19:for(;ne.have<ne.nlen+ne.ndist;){for(;lr=(ve=ne.lencode[ht&(1<<ne.lenbits)-1])>>>16&255,Oo=65535&ve,!((an=ve>>>24)<=ot);){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(Oo<16)ht>>>=an,ot-=an,ne.lens[ne.have++]=Oo;else{if(16===Oo){for(Ce=an+2;ot<Ce;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(ht>>>=an,ot-=an,0===ne.have){Re.msg="invalid bit length repeat",ne.mode=30;break}K=ne.lens[ne.have-1],sn=3+(3&ht),ht>>>=2,ot-=2}else if(17===Oo){for(Ce=an+3;ot<Ce;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ot-=an,K=0,sn=3+(7&(ht>>>=an)),ht>>>=3,ot-=3}else{for(Ce=an+7;ot<Ce;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ot-=an,K=0,sn=11+(127&(ht>>>=an)),ht>>>=7,ot-=7}if(ne.have+sn>ne.nlen+ne.ndist){Re.msg="invalid bit length repeat",ne.mode=30;break}for(;sn--;)ne.lens[ne.have++]=K}}if(30===ne.mode)break;if(0===ne.lens[256]){Re.msg="invalid code -- missing end-of-block",ne.mode=30;break}if(ne.lenbits=9,kt=Ne(1,ne.lens,0,ne.nlen,ne.lencode,0,ne.work,gt={bits:ne.lenbits}),ne.lenbits=gt.bits,kt){Re.msg="invalid literal/lengths set",ne.mode=30;break}if(ne.distbits=6,ne.distcode=ne.distdyn,kt=Ne(2,ne.lens,ne.nlen,ne.ndist,ne.distcode,0,ne.work,gt={bits:ne.distbits}),ne.distbits=gt.bits,kt){Re.msg="invalid distances set",ne.mode=30;break}if(ne.mode=20,6===Ct)break e;case 20:ne.mode=21;case 21:if(6<=qt&&258<=ai){Re.next_out=En,Re.avail_out=ai,Re.next_in=Wt,Re.avail_in=qt,ne.hold=ht,ne.bits=ot,be(Re,wn),En=Re.next_out,yi=Re.output,ai=Re.avail_out,Wt=Re.next_in,Tt=Re.input,qt=Re.avail_in,ht=ne.hold,ot=ne.bits,12===ne.mode&&(ne.back=-1);break}for(ne.back=0;lr=(ve=ne.lencode[ht&(1<<ne.lenbits)-1])>>>16&255,Oo=65535&ve,!((an=ve>>>24)<=ot);){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(lr&&0==(240&lr)){for(ms=an,Nu=lr,er=Oo;lr=(ve=ne.lencode[er+((ht&(1<<ms+Nu)-1)>>ms)])>>>16&255,Oo=65535&ve,!(ms+(an=ve>>>24)<=ot);){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ht>>>=ms,ot-=ms,ne.back+=ms}if(ht>>>=an,ot-=an,ne.back+=an,ne.length=Oo,0===lr){ne.mode=26;break}if(32&lr){ne.back=-1,ne.mode=12;break}if(64&lr){Re.msg="invalid literal/length code",ne.mode=30;break}ne.extra=15&lr,ne.mode=22;case 22:if(ne.extra){for(Ce=ne.extra;ot<Ce;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ne.length+=ht&(1<<ne.extra)-1,ht>>>=ne.extra,ot-=ne.extra,ne.back+=ne.extra}ne.was=ne.length,ne.mode=23;case 23:for(;lr=(ve=ne.distcode[ht&(1<<ne.distbits)-1])>>>16&255,Oo=65535&ve,!((an=ve>>>24)<=ot);){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(0==(240&lr)){for(ms=an,Nu=lr,er=Oo;lr=(ve=ne.distcode[er+((ht&(1<<ms+Nu)-1)>>ms)])>>>16&255,Oo=65535&ve,!(ms+(an=ve>>>24)<=ot);){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ht>>>=ms,ot-=ms,ne.back+=ms}if(ht>>>=an,ot-=an,ne.back+=an,64&lr){Re.msg="invalid distance code",ne.mode=30;break}ne.offset=Oo,ne.extra=15&lr,ne.mode=24;case 24:if(ne.extra){for(Ce=ne.extra;ot<Ce;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}ne.offset+=ht&(1<<ne.extra)-1,ht>>>=ne.extra,ot-=ne.extra,ne.back+=ne.extra}if(ne.offset>ne.dmax){Re.msg="invalid distance too far back",ne.mode=30;break}ne.mode=25;case 25:if(0===ai)break e;if(ne.offset>(sn=wn-ai)){if((sn=ne.offset-sn)>ne.whave&&ne.sane){Re.msg="invalid distance too far back",ne.mode=30;break}xi=sn>ne.wnext?ne.wsize-(sn-=ne.wnext):ne.wnext-sn,sn>ne.length&&(sn=ne.length),Li=ne.window}else Li=yi,xi=En-ne.offset,sn=ne.length;for(ai<sn&&(sn=ai),ai-=sn,ne.length-=sn;yi[En++]=Li[xi++],--sn;);0===ne.length&&(ne.mode=21);break;case 26:if(0===ai)break e;yi[En++]=ne.length,ai--,ne.mode=21;break;case 27:if(ne.wrap){for(;ot<32;){if(0===qt)break e;qt--,ht|=Tt[Wt++]<<ot,ot+=8}if(Re.total_out+=wn-=ai,ne.total+=wn,wn&&(Re.adler=ne.check=ne.flags?se(ne.check,yi,wn,En-wn):we(ne.check,yi,wn,En-wn)),wn=ai,(ne.flags?ht:ye(ht))!==ne.check){Re.msg="incorrect data check",ne.mode=30;break}ot=ht=0}ne.mode=28;case 28:if(ne.wrap&&ne.flags){for(;ot<32;){if(0===qt)break e;qt--,ht+=Tt[Wt++]<<ot,ot+=8}if(ht!==(4294967295&ne.total)){Re.msg="incorrect length check",ne.mode=30;break}ot=ht=0}ne.mode=29;case 29:kt=1;break e;case 30:kt=-3;break e;case 31:return-4;default:return-2}return Re.next_out=En,Re.avail_out=ai,Re.next_in=Wt,Re.avail_in=qt,ne.hold=ht,ne.bits=ot,(ne.wsize||wn!==Re.avail_out&&ne.mode<30&&(ne.mode<27||4!==Ct))&&Yn(Re,Re.output,Re.next_out,wn-Re.avail_out)?(ne.mode=31,-4):(wn-=Re.avail_out,Re.total_in+=yt-=Re.avail_in,Re.total_out+=wn,ne.total+=wn,ne.wrap&&wn&&(Re.adler=ne.check=ne.flags?se(ne.check,yi,wn,Re.next_out-wn):we(ne.check,yi,wn,Re.next_out-wn)),Re.data_type=ne.bits+(ne.last?64:0)+(12===ne.mode?128:0)+(20===ne.mode||15===ne.mode?256:0),(0==yt&&0===wn||4===Ct)&&0===kt&&(kt=-5),kt)},$e.inflateEnd=function(Re){if(!Re||!Re.state)return-2;var Ct=Re.state;return Ct.window&&(Ct.window=null),Re.state=null,0},$e.inflateGetHeader=function(Re,Ct){var ne;return Re&&Re.state?0==(2&(ne=Re.state).wrap)?-2:((ne.head=Ct).done=!1,0):-2},$e.inflateSetDictionary=function(Re,Ct){var ne,Tt=Ct.length;return Re&&Re.state?0!==(ne=Re.state).wrap&&11!==ne.mode?-2:11===ne.mode&&we(1,Ct,Tt,0)!==ne.check?-3:Yn(Re,Ct,Tt,Tt)?(ne.mode=31,-4):(ne.havedict=1,0):-2},$e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils/common"),we=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],se=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],be=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Ne=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Ot.exports=function(He,Be,ze,he,Te,Ee,le,ye){var xe,We,St,Xe,Lt,Mt,Jt,vt,Xt,Yn=ye.bits,Re=0,Ct=0,ne=0,Tt=0,yi=0,Wt=0,En=0,qt=0,ai=0,ht=0,ot=null,yt=0,wn=new de.Buf16(16),sn=new de.Buf16(16),xi=null,Li=0;for(Re=0;Re<=15;Re++)wn[Re]=0;for(Ct=0;Ct<he;Ct++)wn[Be[ze+Ct]]++;for(yi=Yn,Tt=15;1<=Tt&&0===wn[Tt];Tt--);if(Tt<yi&&(yi=Tt),0===Tt)return Te[Ee++]=20971520,Te[Ee++]=20971520,ye.bits=1,0;for(ne=1;ne<Tt&&0===wn[ne];ne++);for(yi<ne&&(yi=ne),Re=qt=1;Re<=15;Re++)if(qt<<=1,(qt-=wn[Re])<0)return-1;if(0<qt&&(0===He||1!==Tt))return-1;for(sn[1]=0,Re=1;Re<15;Re++)sn[Re+1]=sn[Re]+wn[Re];for(Ct=0;Ct<he;Ct++)0!==Be[ze+Ct]&&(le[sn[Be[ze+Ct]]++]=Ct);if(Mt=0===He?(ot=xi=le,19):1===He?(ot=we,yt-=257,xi=se,Li-=257,256):(ot=be,xi=Ne,-1),Re=ne,Lt=Ee,En=Ct=ht=0,St=-1,Xe=(ai=1<<(Wt=yi))-1,1===He&&852<ai||2===He&&592<ai)return 1;for(;;){for(Jt=Re-En,Xt=le[Ct]<Mt?(vt=0,le[Ct]):le[Ct]>Mt?(vt=xi[Li+le[Ct]],ot[yt+le[Ct]]):(vt=96,0),xe=1<<Re-En,ne=We=1<<Wt;Te[Lt+(ht>>En)+(We-=xe)]=Jt<<24|vt<<16|Xt|0,0!==We;);for(xe=1<<Re-1;ht&xe;)xe>>=1;if(0!==xe?(ht&=xe-1,ht+=xe):ht=0,Ct++,0==--wn[Re]){if(Re===Tt)break;Re=Be[ze+le[Ct]]}if(yi<Re&&(ht&Xe)!==St){for(0===En&&(En=yi),Lt+=ne,qt=1<<(Wt=Re-En);Wt+En<Tt&&!((qt-=wn[Wt+En])<=0);)Wt++,qt<<=1;if(ai+=1<<Wt,1===He&&852<ai||2===He&&592<ai)return 1;Te[St=ht&Xe]=yi<<24|Wt<<16|Lt-Ee|0}}return 0!==ht&&(Te[Lt+ht]=Re-En<<24|64<<16|0),ye.bits=yi,0}},{"../utils/common":41}],51:[function(Pe,Ot,$e){"use strict";Ot.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(Pe,Ot,$e){"use strict";var de=Pe("../utils/common");function be(ve){for(var Ge=ve.length;0<=--Ge;)ve[Ge]=0}var Mt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Jt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Xt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Yn=new Array(576);be(Yn);var Re=new Array(60);be(Re);var Ct=new Array(512);be(Ct);var ne=new Array(256);be(ne);var Tt=new Array(29);be(Tt);var yi,Wt,En,qt=new Array(30);function ai(ve,Ge,Pt,Vt,nt){this.static_tree=ve,this.extra_bits=Ge,this.extra_base=Pt,this.elems=Vt,this.max_length=nt,this.has_stree=ve&&ve.length}function ht(ve,Ge){this.dyn_tree=ve,this.max_code=0,this.stat_desc=Ge}function ot(ve){return ve<256?Ct[ve]:Ct[256+(ve>>>7)]}function yt(ve,Ge){ve.pending_buf[ve.pending++]=255&Ge,ve.pending_buf[ve.pending++]=Ge>>>8&255}function wn(ve,Ge,Pt){ve.bi_valid>16-Pt?(ve.bi_buf|=Ge<<ve.bi_valid&65535,yt(ve,ve.bi_buf),ve.bi_buf=Ge>>16-ve.bi_valid,ve.bi_valid+=Pt-16):(ve.bi_buf|=Ge<<ve.bi_valid&65535,ve.bi_valid+=Pt)}function sn(ve,Ge,Pt){wn(ve,Pt[2*Ge],Pt[2*Ge+1])}function xi(ve,Ge){for(var Pt=0;Pt|=1&ve,ve>>>=1,Pt<<=1,0<--Ge;);return Pt>>>1}function Li(ve,Ge,Pt){var Vt,nt,Yt=new Array(16),On=0;for(Vt=1;Vt<=15;Vt++)Yt[Vt]=On=On+Pt[Vt-1]<<1;for(nt=0;nt<=Ge;nt++){var jt=ve[2*nt+1];0!==jt&&(ve[2*nt]=xi(Yt[jt]++,jt))}}function an(ve){var Ge;for(Ge=0;Ge<286;Ge++)ve.dyn_ltree[2*Ge]=0;for(Ge=0;Ge<30;Ge++)ve.dyn_dtree[2*Ge]=0;for(Ge=0;Ge<19;Ge++)ve.bl_tree[2*Ge]=0;ve.dyn_ltree[512]=1,ve.opt_len=ve.static_len=0,ve.last_lit=ve.matches=0}function lr(ve){8<ve.bi_valid?yt(ve,ve.bi_buf):0<ve.bi_valid&&(ve.pending_buf[ve.pending++]=ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0}function Oo(ve,Ge,Pt,Vt){var nt=2*Ge,Yt=2*Pt;return ve[nt]<ve[Yt]||ve[nt]===ve[Yt]&&Vt[Ge]<=Vt[Pt]}function ms(ve,Ge,Pt){for(var Vt=ve.heap[Pt],nt=Pt<<1;nt<=ve.heap_len&&(nt<ve.heap_len&&Oo(Ge,ve.heap[nt+1],ve.heap[nt],ve.depth)&&nt++,!Oo(Ge,Vt,ve.heap[nt],ve.depth));)ve.heap[Pt]=ve.heap[nt],Pt=nt,nt<<=1;ve.heap[Pt]=Vt}function Nu(ve,Ge,Pt){var Vt,nt,Yt,On,jt=0;if(0!==ve.last_lit)for(;Vt=ve.pending_buf[ve.d_buf+2*jt]<<8|ve.pending_buf[ve.d_buf+2*jt+1],nt=ve.pending_buf[ve.l_buf+jt],jt++,0===Vt?sn(ve,nt,Ge):(sn(ve,(Yt=ne[nt])+256+1,Ge),0!==(On=Mt[Yt])&&wn(ve,nt-=Tt[Yt],On),sn(ve,Yt=ot(--Vt),Pt),0!==(On=Jt[Yt])&&wn(ve,Vt-=qt[Yt],On)),jt<ve.last_lit;);sn(ve,256,Ge)}function er(ve,Ge){var Pt,Vt,nt,Yt=Ge.dyn_tree,On=Ge.stat_desc.static_tree,jt=Ge.stat_desc.has_stree,jn=Ge.stat_desc.elems,$r=-1;for(ve.heap_len=0,ve.heap_max=573,Pt=0;Pt<jn;Pt++)0!==Yt[2*Pt]?(ve.heap[++ve.heap_len]=$r=Pt,ve.depth[Pt]=0):Yt[2*Pt+1]=0;for(;ve.heap_len<2;)Yt[2*(nt=ve.heap[++ve.heap_len]=$r<2?++$r:0)]=1,ve.depth[nt]=0,ve.opt_len--,jt&&(ve.static_len-=On[2*nt+1]);for(Ge.max_code=$r,Pt=ve.heap_len>>1;1<=Pt;Pt--)ms(ve,Yt,Pt);for(nt=jn;Pt=ve.heap[1],ve.heap[1]=ve.heap[ve.heap_len--],ms(ve,Yt,1),Vt=ve.heap[1],ve.heap[--ve.heap_max]=Pt,ve.heap[--ve.heap_max]=Vt,Yt[2*nt]=Yt[2*Pt]+Yt[2*Vt],ve.depth[nt]=(ve.depth[Pt]>=ve.depth[Vt]?ve.depth[Pt]:ve.depth[Vt])+1,Yt[2*Pt+1]=Yt[2*Vt+1]=nt,ve.heap[1]=nt++,ms(ve,Yt,1),2<=ve.heap_len;);ve.heap[--ve.heap_max]=ve.heap[1],function(rr,sc){var dm,Lu,Iv,Bs,Bb,fm,nu=sc.dyn_tree,Vb=sc.max_code,uT=sc.stat_desc.static_tree,hT=sc.stat_desc.has_stree,X4=sc.stat_desc.extra_bits,zb=sc.stat_desc.extra_base,_p=sc.stat_desc.max_length,pm=0;for(Bs=0;Bs<=15;Bs++)rr.bl_count[Bs]=0;for(nu[2*rr.heap[rr.heap_max]+1]=0,dm=rr.heap_max+1;dm<573;dm++)_p<(Bs=nu[2*nu[2*(Lu=rr.heap[dm])+1]+1]+1)&&(Bs=_p,pm++),nu[2*Lu+1]=Bs,Vb<Lu||(rr.bl_count[Bs]++,Bb=0,zb<=Lu&&(Bb=X4[Lu-zb]),rr.opt_len+=(fm=nu[2*Lu])*(Bs+Bb),hT&&(rr.static_len+=fm*(uT[2*Lu+1]+Bb)));if(0!==pm){do{for(Bs=_p-1;0===rr.bl_count[Bs];)Bs--;rr.bl_count[Bs]--,rr.bl_count[Bs+1]+=2,rr.bl_count[_p]--,pm-=2}while(0<pm);for(Bs=_p;0!==Bs;Bs--)for(Lu=rr.bl_count[Bs];0!==Lu;)Vb<(Iv=rr.heap[--dm])||(nu[2*Iv+1]!==Bs&&(rr.opt_len+=(Bs-nu[2*Iv+1])*nu[2*Iv],nu[2*Iv+1]=Bs),Lu--)}}(ve,Ge),Li(Yt,$r,ve.bl_count)}function K(ve,Ge,Pt){var Vt,nt,Yt=-1,On=Ge[1],jt=0,jn=7,$r=4;for(0===On&&(jn=138,$r=3),Ge[2*(Pt+1)+1]=65535,Vt=0;Vt<=Pt;Vt++)nt=On,On=Ge[2*(Vt+1)+1],++jt<jn&&nt===On||(jt<$r?ve.bl_tree[2*nt]+=jt:0!==nt?(nt!==Yt&&ve.bl_tree[2*nt]++,ve.bl_tree[32]++):jt<=10?ve.bl_tree[34]++:ve.bl_tree[36]++,Yt=nt,$r=(jt=0)===On?(jn=138,3):nt===On?(jn=6,3):(jn=7,4))}function kt(ve,Ge,Pt){var Vt,nt,Yt=-1,On=Ge[1],jt=0,jn=7,$r=4;for(0===On&&(jn=138,$r=3),Vt=0;Vt<=Pt;Vt++)if(nt=On,On=Ge[2*(Vt+1)+1],!(++jt<jn&&nt===On)){if(jt<$r)for(;sn(ve,nt,ve.bl_tree),0!=--jt;);else 0!==nt?(nt!==Yt&&(sn(ve,nt,ve.bl_tree),jt--),sn(ve,16,ve.bl_tree),wn(ve,jt-3,2)):jt<=10?(sn(ve,17,ve.bl_tree),wn(ve,jt-3,3)):(sn(ve,18,ve.bl_tree),wn(ve,jt-11,7));Yt=nt,$r=(jt=0)===On?(jn=138,3):nt===On?(jn=6,3):(jn=7,4)}}be(qt);var gt=!1;function Ce(ve,Ge,Pt,Vt){var nt,Yt,On;wn(ve,0+(Vt?1:0),3),Yt=Ge,On=Pt,lr(nt=ve),yt(nt,On),yt(nt,~On),de.arraySet(nt.pending_buf,nt.window,Yt,On,nt.pending),nt.pending+=On}$e._tr_init=function(ve){gt||(function(){var Ge,Pt,Vt,nt,Yt,On=new Array(16);for(nt=Vt=0;nt<28;nt++)for(Tt[nt]=Vt,Ge=0;Ge<1<<Mt[nt];Ge++)ne[Vt++]=nt;for(ne[Vt-1]=nt,nt=Yt=0;nt<16;nt++)for(qt[nt]=Yt,Ge=0;Ge<1<<Jt[nt];Ge++)Ct[Yt++]=nt;for(Yt>>=7;nt<30;nt++)for(qt[nt]=Yt<<7,Ge=0;Ge<1<<Jt[nt]-7;Ge++)Ct[256+Yt++]=nt;for(Pt=0;Pt<=15;Pt++)On[Pt]=0;for(Ge=0;Ge<=143;)Yn[2*Ge+1]=8,Ge++,On[8]++;for(;Ge<=255;)Yn[2*Ge+1]=9,Ge++,On[9]++;for(;Ge<=279;)Yn[2*Ge+1]=7,Ge++,On[7]++;for(;Ge<=287;)Yn[2*Ge+1]=8,Ge++,On[8]++;for(Li(Yn,287,On),Ge=0;Ge<30;Ge++)Re[2*Ge+1]=5,Re[2*Ge]=xi(Ge,5);yi=new ai(Yn,Mt,257,286,15),Wt=new ai(Re,Jt,0,30,15),En=new ai(new Array(0),vt,0,19,7)}(),gt=!0),ve.l_desc=new ht(ve.dyn_ltree,yi),ve.d_desc=new ht(ve.dyn_dtree,Wt),ve.bl_desc=new ht(ve.bl_tree,En),ve.bi_buf=0,ve.bi_valid=0,an(ve)},$e._tr_stored_block=Ce,$e._tr_flush_block=function(ve,Ge,Pt,Vt){var nt,Yt,On=0;0<ve.level?(2===ve.strm.data_type&&(ve.strm.data_type=function(jt){var jn,$r=4093624447;for(jn=0;jn<=31;jn++,$r>>>=1)if(1&$r&&0!==jt.dyn_ltree[2*jn])return 0;if(0!==jt.dyn_ltree[18]||0!==jt.dyn_ltree[20]||0!==jt.dyn_ltree[26])return 1;for(jn=32;jn<256;jn++)if(0!==jt.dyn_ltree[2*jn])return 1;return 0}(ve)),er(ve,ve.l_desc),er(ve,ve.d_desc),On=function(jt){var jn;for(K(jt,jt.dyn_ltree,jt.l_desc.max_code),K(jt,jt.dyn_dtree,jt.d_desc.max_code),er(jt,jt.bl_desc),jn=18;3<=jn&&0===jt.bl_tree[2*Xt[jn]+1];jn--);return jt.opt_len+=3*(jn+1)+5+5+4,jn}(ve),(Yt=ve.static_len+3+7>>>3)<=(nt=ve.opt_len+3+7>>>3)&&(nt=Yt)):nt=Yt=Pt+5,Pt+4<=nt&&-1!==Ge?Ce(ve,Ge,Pt,Vt):4===ve.strategy||Yt===nt?(wn(ve,2+(Vt?1:0),3),Nu(ve,Yn,Re)):(wn(ve,4+(Vt?1:0),3),function(jt,jn,$r,rr){var sc;for(wn(jt,jn-257,5),wn(jt,$r-1,5),wn(jt,rr-4,4),sc=0;sc<rr;sc++)wn(jt,jt.bl_tree[2*Xt[sc]+1],3);kt(jt,jt.dyn_ltree,jn-1),kt(jt,jt.dyn_dtree,$r-1)}(ve,ve.l_desc.max_code+1,ve.d_desc.max_code+1,On+1),Nu(ve,ve.dyn_ltree,ve.dyn_dtree)),an(ve),Vt&&lr(ve)},$e._tr_tally=function(ve,Ge,Pt){return ve.pending_buf[ve.d_buf+2*ve.last_lit]=Ge>>>8&255,ve.pending_buf[ve.d_buf+2*ve.last_lit+1]=255&Ge,ve.pending_buf[ve.l_buf+ve.last_lit]=255&Pt,ve.last_lit++,0===Ge?ve.dyn_ltree[2*Pt]++:(ve.matches++,Ge--,ve.dyn_ltree[2*(ne[Pt]+256+1)]++,ve.dyn_dtree[2*ot(Ge)]++),ve.last_lit===ve.lit_bufsize-1},$e._tr_align=function(ve){var Ge;wn(ve,2,3),sn(ve,256,Yn),16===(Ge=ve).bi_valid?(yt(Ge,Ge.bi_buf),Ge.bi_buf=0,Ge.bi_valid=0):8<=Ge.bi_valid&&(Ge.pending_buf[Ge.pending++]=255&Ge.bi_buf,Ge.bi_buf>>=8,Ge.bi_valid-=8)}},{"../utils/common":41}],53:[function(Pe,Ot,$e){"use strict";Ot.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(Pe,Ot,$e){"use strict";Ot.exports="function"==typeof setImmediate?setImmediate:function(){var de=[].slice.apply(arguments);de.splice(1,0,0),setTimeout.apply(null,de)}},{}]},{},[10])(10)}},Za=>{Za(Za.s=723)}]);