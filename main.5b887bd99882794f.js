(self.webpackChunkscheduler13=self.webpackChunkscheduler13||[]).push([[179],{793:(uC,$e,Bt)=>{"use strict";var je={};function ge(c){return"function"==typeof c}function Se(c){const l=c(h=>{Error.call(h),h.stack=(new Error).stack});return l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l}Bt.r(je),Bt.d(je,{Adder:()=>Uo,Delaunay:()=>SV,FormatSpecifier:()=>UM,InternMap:()=>xx,InternSet:()=>n0,Node:()=>E0,Path:()=>Ux,Voronoi:()=>Qae,ZoomTransform:()=>Ad,active:()=>RGe,arc:()=>sU,area:()=>lU,areaRadial:()=>rde,ascending:()=>Ps,autoType:()=>Dje,axisBottom:()=>C$e,axisLeft:()=>S$e,axisRight:()=>b$e,axisTop:()=>_$e,bin:()=>$se,bisect:()=>e0,bisectCenter:()=>yHe,bisectLeft:()=>vHe,bisectRight:()=>Tse,bisector:()=>Uk,blob:()=>eZe,blur:()=>_He,blur2:()=>kse,blurImage:()=>bHe,brush:()=>jGe,brushSelection:()=>WGe,brushX:()=>GGe,brushY:()=>QGe,buffer:()=>nZe,chord:()=>qGe,chordDirected:()=>YGe,chordTranspose:()=>XGe,cluster:()=>bXe,color:()=>dh,contourDensity:()=>DQe,contours:()=>j8,count:()=>zk,create:()=>Iet,creator:()=>Kk,cross:()=>THe,csv:()=>sZe,csvFormat:()=>gje,csvFormatBody:()=>mje,csvFormatRow:()=>yje,csvFormatRows:()=>vje,csvFormatValue:()=>_je,csvParse:()=>Yae,csvParseRows:()=>pje,cubehelix:()=>mh,cumsum:()=>kHe,curveBasis:()=>Tw,curveBasisClosed:()=>utt,curveBasisOpen:()=>htt,curveBumpX:()=>uU,curveBumpY:()=>ode,curveBundle:()=>dtt,curveCardinal:()=>ftt,curveCardinalClosed:()=>ptt,curveCardinalOpen:()=>gtt,curveCatmullRom:()=>mtt,curveCatmullRomClosed:()=>vtt,curveCatmullRomOpen:()=>ytt,curveLinear:()=>q4,curveLinearClosed:()=>_tt,curveMonotoneX:()=>btt,curveMonotoneY:()=>Ctt,curveNatural:()=>_U,curveStep:()=>Stt,curveStepAfter:()=>xtt,curveStepBefore:()=>bU,descending:()=>xse,deviation:()=>Ase,difference:()=>a$e,disjoint:()=>l$e,dispatch:()=>T_,drag:()=>jae,dragDisable:()=>Jk,dragEnable:()=>eM,dsv:()=>rZe,dsvFormat:()=>FM,easeBack:()=>ole,easeBackIn:()=>qje,easeBackInOut:()=>ole,easeBackOut:()=>Xje,easeBounce:()=>qx,easeBounceIn:()=>jje,easeBounceInOut:()=>Zje,easeBounceOut:()=>qx,easeCircle:()=>sle,easeCircleIn:()=>Nje,easeCircleInOut:()=>sle,easeCircleOut:()=>Bje,easeCubic:()=>k8,easeCubicIn:()=>kGe,easeCubicInOut:()=>k8,easeCubicOut:()=>MGe,easeElastic:()=>ale,easeElasticIn:()=>Yje,easeElasticInOut:()=>Kje,easeElasticOut:()=>ale,easeExp:()=>rle,easeExpIn:()=>Fje,easeExpInOut:()=>rle,easeExpOut:()=>Lje,easeLinear:()=>kje,easePoly:()=>ele,easePolyIn:()=>Aje,easePolyInOut:()=>ele,easePolyOut:()=>Ije,easeQuad:()=>Jae,easeQuadIn:()=>Mje,easeQuadInOut:()=>Jae,easeQuadOut:()=>Eje,easeSin:()=>ile,easeSinIn:()=>Pje,easeSinInOut:()=>ile,easeSinOut:()=>Rje,every:()=>t$e,extent:()=>t0,fcumsum:()=>EHe,filter:()=>i$e,flatGroup:()=>AHe,flatRollup:()=>IHe,forceCenter:()=>fZe,forceCollide:()=>IZe,forceLink:()=>RZe,forceManyBody:()=>$Ze,forceRadial:()=>WZe,forceSimulation:()=>HZe,forceX:()=>GZe,forceY:()=>QZe,format:()=>HM,formatDefaultLocale:()=>ble,formatLocale:()=>_le,formatPrefix:()=>RV,formatSpecifier:()=>Y_,fsum:()=>MHe,geoAlbers:()=>Nce,geoAlbersUsa:()=>Kqe,geoArea:()=>nqe,geoAzimuthalEqualArea:()=>Jqe,geoAzimuthalEqualAreaRaw:()=>_6,geoAzimuthalEquidistant:()=>eXe,geoAzimuthalEquidistantRaw:()=>b6,geoBounds:()=>oqe,geoCentroid:()=>dqe,geoCircle:()=>fqe,geoClipAntimeridian:()=>KV,geoClipCircle:()=>nce,geoClipExtent:()=>bqe,geoClipRectangle:()=>c4,geoConicConformal:()=>nXe,geoConicConformalRaw:()=>Uce,geoConicEqualArea:()=>S4,geoConicEqualAreaRaw:()=>Lce,geoConicEquidistant:()=>rXe,geoConicEquidistantRaw:()=>zce,geoContains:()=>Tqe,geoDistance:()=>d4,geoEqualEarth:()=>oXe,geoEqualEarthRaw:()=>C6,geoEquirectangular:()=>iXe,geoEquirectangularRaw:()=>uw,geoGnomonic:()=>aXe,geoGnomonicRaw:()=>S6,geoGraticule:()=>dce,geoGraticule10:()=>kqe,geoIdentity:()=>lXe,geoInterpolate:()=>Mqe,geoLength:()=>ice,geoMercator:()=>tXe,geoMercatorRaw:()=>cw,geoNaturalEarth1:()=>cXe,geoNaturalEarth1Raw:()=>x6,geoOrthographic:()=>uXe,geoOrthographicRaw:()=>w6,geoPath:()=>Hqe,geoProjection:()=>kd,geoProjectionMutator:()=>v6,geoRotation:()=>Zle,geoStereographic:()=>hXe,geoStereographicRaw:()=>O6,geoStream:()=>_h,geoTransform:()=>$qe,geoTransverseMercator:()=>dXe,geoTransverseMercatorRaw:()=>D6,gray:()=>uQe,greatest:()=>Wse,greatestIndex:()=>YHe,group:()=>Fse,groupSort:()=>FHe,groups:()=>Lse,hcl:()=>bM,hierarchy:()=>T6,histogram:()=>$se,hsl:()=>iM,html:()=>hZe,image:()=>aZe,index:()=>PHe,indexes:()=>RHe,interpolate:()=>eg,interpolateArray:()=>vWe,interpolateBasis:()=>Soe,interpolateBasisClosed:()=>xoe,interpolateBlues:()=>det,interpolateBrBG:()=>WJe,interpolateBuGn:()=>JJe,interpolateBuPu:()=>eet,interpolateCividis:()=>yet,interpolateCool:()=>Cet,interpolateCubehelix:()=>xYe,interpolateCubehelixDefault:()=>_et,interpolateCubehelixLong:()=>A4,interpolateDate:()=>Moe,interpolateDiscrete:()=>fYe,interpolateGnBu:()=>tet,interpolateGreens:()=>fet,interpolateGreys:()=>pet,interpolateHcl:()=>CYe,interpolateHclLong:()=>SYe,interpolateHsl:()=>yYe,interpolateHslLong:()=>_Ye,interpolateHue:()=>pYe,interpolateInferno:()=>Eet,interpolateLab:()=>bYe,interpolateMagma:()=>Met,interpolateNumber:()=>_u,interpolateNumberArray:()=>m8,interpolateObject:()=>Eoe,interpolateOrRd:()=>net,interpolateOranges:()=>vet,interpolatePRGn:()=>GJe,interpolatePiYG:()=>QJe,interpolatePlasma:()=>Aet,interpolatePuBu:()=>ret,interpolatePuBuGn:()=>iet,interpolatePuOr:()=>jJe,interpolatePuRd:()=>set,interpolatePurples:()=>get,interpolateRainbow:()=>xet,interpolateRdBu:()=>ZJe,interpolateRdGy:()=>qJe,interpolateRdPu:()=>oet,interpolateRdYlBu:()=>XJe,interpolateRdYlGn:()=>YJe,interpolateReds:()=>met,interpolateRgb:()=>Ix,interpolateRgbBasis:()=>Doe,interpolateRgbBasisClosed:()=>mWe,interpolateRound:()=>E4,interpolateSinebow:()=>Det,interpolateSpectral:()=>KJe,interpolateString:()=>_8,interpolateTransformCss:()=>zoe,interpolateTransformSvg:()=>Hoe,interpolateTurbo:()=>Tet,interpolateViridis:()=>ket,interpolateWarm:()=>bet,interpolateYlGn:()=>cet,interpolateYlGnBu:()=>aet,interpolateYlOrBr:()=>uet,interpolateYlOrRd:()=>het,interpolateZoom:()=>aue,interrupt:()=>h0,intersection:()=>c$e,interval:()=>ztt,isoFormat:()=>Ntt,isoParse:()=>Utt,json:()=>cZe,lab:()=>_M,lch:()=>hQe,least:()=>XHe,leastIndex:()=>jse,line:()=>Sh,lineRadial:()=>ide,link:()=>X4,linkHorizontal:()=>Ket,linkRadial:()=>ett,linkVertical:()=>Jet,local:()=>Yhe,map:()=>r$e,matcher:()=>a8,max:()=>wx,maxIndex:()=>n8,mean:()=>HHe,median:()=>$He,medianIndex:()=>WHe,merge:()=>r8,min:()=>Wk,minIndex:()=>i8,mode:()=>QHe,namespace:()=>kx,namespaces:()=>c8,nice:()=>e8,now:()=>Nx,pack:()=>XXe,packEnclose:()=>WXe,packSiblings:()=>ZXe,pairs:()=>jHe,partition:()=>YXe,path:()=>zx,pathRound:()=>eQe,permute:()=>zse,pie:()=>jet,piecewise:()=>hue,pointRadial:()=>Dw,pointer:()=>Oc,pointers:()=>Ret,polygonArea:()=>OYe,polygonCentroid:()=>DYe,polygonContains:()=>EYe,polygonHull:()=>MYe,polygonLength:()=>AYe,precisionFixed:()=>Cle,precisionPrefix:()=>Sle,precisionRound:()=>xle,quadtree:()=>BM,quantile:()=>Dx,quantileIndex:()=>Qse,quantileSorted:()=>Gse,quantize:()=>wYe,quickselect:()=>Gk,radialArea:()=>rde,radialLine:()=>ide,randomBates:()=>FYe,randomBernoulli:()=>BYe,randomBeta:()=>gue,randomBinomial:()=>mue,randomCauchy:()=>UYe,randomExponential:()=>LYe,randomGamma:()=>L6,randomGeometric:()=>pue,randomInt:()=>PYe,randomIrwinHall:()=>fue,randomLcg:()=>GYe,randomLogNormal:()=>RYe,randomLogistic:()=>zYe,randomNormal:()=>F6,randomPareto:()=>NYe,randomPoisson:()=>HYe,randomUniform:()=>IYe,randomWeibull:()=>VYe,range:()=>yu,rank:()=>qHe,reduce:()=>s$e,reverse:()=>o$e,rgb:()=>Wf,ribbon:()=>U8,ribbonArrow:()=>lQe,rollup:()=>Bse,rollups:()=>Vse,scaleBand:()=>V6,scaleDiverging:()=>Che,scaleDivergingLog:()=>She,scaleDivergingPow:()=>iU,scaleDivergingSqrt:()=>PJe,scaleDivergingSymlog:()=>xhe,scaleIdentity:()=>Cue,scaleImplicit:()=>N6,scaleLinear:()=>a1,scaleLog:()=>Due,scaleOrdinal:()=>B6,scalePoint:()=>QYe,scalePow:()=>G6,scaleQuantile:()=>Pue,scaleQuantize:()=>Rue,scaleRadial:()=>Iue,scaleSequential:()=>vhe,scaleSequentialLog:()=>yhe,scaleSequentialPow:()=>nU,scaleSequentialQuantile:()=>bhe,scaleSequentialSqrt:()=>IJe,scaleSequentialSymlog:()=>_he,scaleSqrt:()=>rKe,scaleSymlog:()=>Mue,scaleThreshold:()=>Fue,scaleTime:()=>EJe,scaleUtc:()=>AJe,scan:()=>KHe,schemeAccent:()=>FJe,schemeBlues:()=>Ghe,schemeBrBG:()=>whe,schemeBuGn:()=>Phe,schemeBuPu:()=>Rhe,schemeCategory10:()=>RJe,schemeDark2:()=>LJe,schemeGnBu:()=>Fhe,schemeGreens:()=>Qhe,schemeGreys:()=>jhe,schemeOrRd:()=>Lhe,schemeOranges:()=>Xhe,schemePRGn:()=>Ohe,schemePaired:()=>NJe,schemePastel1:()=>BJe,schemePastel2:()=>VJe,schemePiYG:()=>Dhe,schemePuBu:()=>Bhe,schemePuBuGn:()=>Nhe,schemePuOr:()=>The,schemePuRd:()=>Vhe,schemePurples:()=>Zhe,schemeRdBu:()=>khe,schemeRdGy:()=>Mhe,schemeRdPu:()=>Uhe,schemeRdYlBu:()=>Ehe,schemeRdYlGn:()=>Ahe,schemeReds:()=>qhe,schemeSet1:()=>UJe,schemeSet2:()=>zJe,schemeSet3:()=>HJe,schemeSpectral:()=>Ihe,schemeTableau10:()=>$Je,schemeYlGn:()=>Hhe,schemeYlGnBu:()=>zhe,schemeYlOrBr:()=>$he,schemeYlOrRd:()=>Whe,select:()=>yo,selectAll:()=>Fet,selection:()=>k_,selector:()=>Xk,selectorAll:()=>o8,shuffle:()=>Zse,shuffler:()=>qse,some:()=>n$e,sort:()=>YB,stack:()=>Dtt,stackOffsetDiverging:()=>ktt,stackOffsetExpand:()=>Ttt,stackOffsetNone:()=>p1,stackOffsetSilhouette:()=>Mtt,stackOffsetWiggle:()=>Ett,stackOrderAppearance:()=>Fde,stackOrderAscending:()=>Lde,stackOrderDescending:()=>Itt,stackOrderInsideOut:()=>Ptt,stackOrderNone:()=>g1,stackOrderReverse:()=>Rtt,stratify:()=>tYe,style:()=>o0,subset:()=>h$e,sum:()=>JHe,superset:()=>Kse,svg:()=>dZe,symbol:()=>ctt,symbolAsterisk:()=>ade,symbolCircle:()=>Y4,symbolCross:()=>lde,symbolDiamond:()=>ude,symbolDiamond2:()=>hde,symbolPlus:()=>dde,symbolSquare:()=>fde,symbolSquare2:()=>pde,symbolStar:()=>mde,symbolTimes:()=>fU,symbolTriangle:()=>vde,symbolTriangle2:()=>yde,symbolWye:()=>_de,symbolX:()=>fU,symbols:()=>bde,symbolsFill:()=>bde,symbolsStroke:()=>ltt,text:()=>NM,thresholdFreedmanDiaconis:()=>UHe,thresholdScott:()=>zHe,thresholdSturges:()=>t8,tickFormat:()=>bue,tickIncrement:()=>s0,tickStep:()=>$k,ticks:()=>r0,timeDay:()=>c1,timeDays:()=>uKe,timeFormat:()=>J6,timeFormatDefaultLocale:()=>mhe,timeFormatLocale:()=>ehe,timeFriday:()=>zue,timeFridays:()=>vKe,timeHour:()=>L4,timeHours:()=>lKe,timeInterval:()=>_o,timeMillisecond:()=>l1,timeMilliseconds:()=>Nue,timeMinute:()=>R4,timeMinutes:()=>oKe,timeMonday:()=>_w,timeMondays:()=>fKe,timeMonth:()=>B4,timeMonths:()=>OKe,timeParse:()=>ghe,timeSaturday:()=>Hue,timeSaturdays:()=>yKe,timeSecond:()=>ep,timeSeconds:()=>Bue,timeSunday:()=>u1,timeSundays:()=>$ue,timeThursday:()=>P0,timeThursdays:()=>mKe,timeTickInterval:()=>Jue,timeTicks:()=>Kue,timeTuesday:()=>Vue,timeTuesdays:()=>pKe,timeWednesday:()=>Uue,timeWednesdays:()=>gKe,timeWeek:()=>u1,timeWeeks:()=>$ue,timeYear:()=>Md,timeYears:()=>TKe,timeout:()=>C8,timer:()=>uM,timerFlush:()=>Roe,transition:()=>Goe,transpose:()=>Xse,tree:()=>lYe,treemap:()=>cYe,treemapBinary:()=>uYe,treemapDice:()=>mw,treemapResquarify:()=>dYe,treemapSlice:()=>M4,treemapSliceDice:()=>hYe,treemapSquarify:()=>sue,tsv:()=>oZe,tsvFormat:()=>Cje,tsvFormatBody:()=>Sje,tsvFormatRow:()=>wje,tsvFormatRows:()=>xje,tsvFormatValue:()=>Oje,tsvParse:()=>Kae,tsvParseRows:()=>bje,union:()=>d$e,unixDay:()=>X6,unixDays:()=>dKe,utcDay:()=>yw,utcDays:()=>hKe,utcFormat:()=>U4,utcFriday:()=>Que,utcFridays:()=>xKe,utcHour:()=>N4,utcHours:()=>cKe,utcMillisecond:()=>l1,utcMilliseconds:()=>Nue,utcMinute:()=>F4,utcMinutes:()=>aKe,utcMonday:()=>bw,utcMondays:()=>_Ke,utcMonth:()=>V4,utcMonths:()=>DKe,utcParse:()=>eU,utcSaturday:()=>jue,utcSaturdays:()=>wKe,utcSecond:()=>ep,utcSeconds:()=>Bue,utcSunday:()=>h1,utcSundays:()=>Zue,utcThursday:()=>F0,utcThursdays:()=>SKe,utcTickInterval:()=>Yue,utcTicks:()=>Xue,utcTuesday:()=>Wue,utcTuesdays:()=>bKe,utcWednesday:()=>Gue,utcWednesdays:()=>CKe,utcWeek:()=>h1,utcWeeks:()=>Zue,utcYear:()=>Ed,utcYears:()=>kKe,variance:()=>Ese,window:()=>u8,xml:()=>uZe,zip:()=>Yse,zoom:()=>Ztt,zoomIdentity:()=>rE,zoomTransform:()=>Vde});const ue=Se(c=>function(l){c(this),this.message=l?`${l.length} errors occurred during unsubscription:\n${l.map((h,d)=>`${d+1}) ${h.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=l});function xe(c,a){if(c){const l=c.indexOf(a);0<=l&&c.splice(l,1)}}class Re{constructor(a){this.initialTeardown=a,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let a;if(!this.closed){this.closed=!0;const{_parentage:l}=this;if(l)if(this._parentage=null,Array.isArray(l))for(const f of l)f.remove(this);else l.remove(this);const{initialTeardown:h}=this;if(ge(h))try{h()}catch(f){a=f instanceof ue?f.errors:[f]}const{_finalizers:d}=this;if(d){this._finalizers=null;for(const f of d)try{He(f)}catch(p){a=a??[],p instanceof ue?a=[...a,...p.errors]:a.push(p)}}if(a)throw new ue(a)}}add(a){var l;if(a&&a!==this)if(this.closed)He(a);else{if(a instanceof Re){if(a.closed||a._hasParent(this))return;a._addParent(this)}(this._finalizers=null!==(l=this._finalizers)&&void 0!==l?l:[]).push(a)}}_hasParent(a){const{_parentage:l}=this;return l===a||Array.isArray(l)&&l.includes(a)}_addParent(a){const{_parentage:l}=this;this._parentage=Array.isArray(l)?(l.push(a),l):l?[l,a]:a}_removeParent(a){const{_parentage:l}=this;l===a?this._parentage=null:Array.isArray(l)&&xe(l,a)}remove(a){const{_finalizers:l}=this;l&&xe(l,a),a instanceof Re&&a._removeParent(this)}}Re.EMPTY=(()=>{const c=new Re;return c.closed=!0,c})();const Ge=Re.EMPTY;function Ve(c){return c instanceof Re||c&&"closed"in c&&ge(c.remove)&&ge(c.add)&&ge(c.unsubscribe)}function He(c){ge(c)?c():c.unsubscribe()}const he={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ke={setTimeout(c,a,...l){const{delegate:h}=ke;return h?.setTimeout?h.setTimeout(c,a,...l):setTimeout(c,a,...l)},clearTimeout(c){const{delegate:a}=ke;return(a?.clearTimeout||clearTimeout)(c)},delegate:void 0};function le(c){ke.setTimeout(()=>{const{onUnhandledError:a}=he;if(!a)throw c;a(c)})}function Oe(){}const me=rt("C",void 0,void 0);function rt(c,a,l){return{kind:c,value:a,error:l}}let Ye=null;function Pt(c){if(he.useDeprecatedSynchronousErrorHandling){const a=!Ye;if(a&&(Ye={errorThrown:!1,error:null}),c(),a){const{errorThrown:l,error:h}=Ye;if(Ye=null,l)throw h}}else c()}class Qt extends Re{constructor(a){super(),this.isStopped=!1,a?(this.destination=a,Ve(a)&&a.add(this)):this.destination=xi}static create(a,l,h){return new Ne(a,l,h)}next(a){this.isStopped?At(function Qe(c){return rt("N",c,void 0)}(a),this):this._next(a)}error(a){this.isStopped?At(function Me(c){return rt("E",void 0,c)}(a),this):(this.isStopped=!0,this._error(a))}complete(){this.isStopped?At(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(a){this.destination.next(a)}_error(a){try{this.destination.error(a)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const St=Function.prototype.bind;function Jt(c,a){return St.call(c,a)}class si{constructor(a){this.partialObserver=a}next(a){const{partialObserver:l}=this;if(l.next)try{l.next(a)}catch(h){wt(h)}}error(a){const{partialObserver:l}=this;if(l.error)try{l.error(a)}catch(h){wt(h)}else wt(a)}complete(){const{partialObserver:a}=this;if(a.complete)try{a.complete()}catch(l){wt(l)}}}class Ne extends Qt{constructor(a,l,h){let d;if(super(),ge(a)||!a)d={next:a??void 0,error:l??void 0,complete:h??void 0};else{let f;this&&he.useDeprecatedNextContext?(f=Object.create(a),f.unsubscribe=()=>this.unsubscribe(),d={next:a.next&&Jt(a.next,f),error:a.error&&Jt(a.error,f),complete:a.complete&&Jt(a.complete,f)}):d=a}this.destination=new si(d)}}function wt(c){he.useDeprecatedSynchronousErrorHandling?function Ot(c){he.useDeprecatedSynchronousErrorHandling&&Ye&&(Ye.errorThrown=!0,Ye.error=c)}(c):le(c)}function At(c,a){const{onStoppedNotification:l}=he;l&&ke.setTimeout(()=>l(c,a))}const xi={closed:!0,next:Oe,error:function oe(c){throw c},complete:Oe},Wt="function"==typeof Symbol&&Symbol.observable||"@@observable";function pi(c){return c}function ui(c){return 0===c.length?pi:1===c.length?c[0]:function(l){return c.reduce((h,d)=>d(h),l)}}let Ke=(()=>{class c{constructor(l){l&&(this._subscribe=l)}lift(l){const h=new c;return h.source=this,h.operator=l,h}subscribe(l,h,d){const f=function xn(c){return c&&c instanceof Qt||function ti(c){return c&&ge(c.next)&&ge(c.error)&&ge(c.complete)}(c)&&Ve(c)}(l)?l:new Ne(l,h,d);return Pt(()=>{const{operator:p,source:g}=this;f.add(p?p.call(f,g):g?this._subscribe(f):this._trySubscribe(f))}),f}_trySubscribe(l){try{return this._subscribe(l)}catch(h){l.error(h)}}forEach(l,h){return new(h=ht(h))((d,f)=>{const p=new Ne({next:g=>{try{l(g)}catch(m){f(m),p.unsubscribe()}},error:f,complete:d});this.subscribe(p)})}_subscribe(l){var h;return null===(h=this.source)||void 0===h?void 0:h.subscribe(l)}[Wt](){return this}pipe(...l){return ui(l)(this)}toPromise(l){return new(l=ht(l))((h,d)=>{let f;this.subscribe(p=>f=p,p=>d(p),()=>h(f))})}}return c.create=a=>new c(a),c})();function ht(c){var a;return null!==(a=c??he.Promise)&&void 0!==a?a:Promise}const cn=Se(c=>function(){c(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Tt=(()=>{class c extends Ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(l){const h=new Ao(this,this);return h.operator=l,h}_throwIfClosed(){if(this.closed)throw new cn}next(l){Pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const h of this.currentObservers)h.next(l)}})}error(l){Pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=l;const{observers:h}=this;for(;h.length;)h.shift().error(l)}})}complete(){Pt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:l}=this;for(;l.length;)l.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var l;return(null===(l=this.observers)||void 0===l?void 0:l.length)>0}_trySubscribe(l){return this._throwIfClosed(),super._trySubscribe(l)}_subscribe(l){return this._throwIfClosed(),this._checkFinalizedStatuses(l),this._innerSubscribe(l)}_innerSubscribe(l){const{hasError:h,isStopped:d,observers:f}=this;return h||d?Ge:(this.currentObservers=null,f.push(l),new Re(()=>{this.currentObservers=null,xe(f,l)}))}_checkFinalizedStatuses(l){const{hasError:h,thrownError:d,isStopped:f}=this;h?l.error(d):f&&l.complete()}asObservable(){const l=new Ke;return l.source=this,l}}return c.create=(a,l)=>new Ao(a,l),c})();class Ao extends Tt{constructor(a,l){super(),this.destination=a,this.source=l}next(a){var l,h;null===(h=null===(l=this.destination)||void 0===l?void 0:l.next)||void 0===h||h.call(l,a)}error(a){var l,h;null===(h=null===(l=this.destination)||void 0===l?void 0:l.error)||void 0===h||h.call(l,a)}complete(){var a,l;null===(l=null===(a=this.destination)||void 0===a?void 0:a.complete)||void 0===l||l.call(a)}_subscribe(a){var l,h;return null!==(h=null===(l=this.source)||void 0===l?void 0:l.subscribe(a))&&void 0!==h?h:Ge}}function or(c){return ge(c?.lift)}function Yn(c){return a=>{if(or(a))return a.lift(function(l){try{return c(l,this)}catch(h){this.error(h)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ti(c,a,l,h,d){return new Ms(c,a,l,h,d)}class Ms extends Qt{constructor(a,l,h,d,f,p){super(a),this.onFinalize=f,this.shouldUnsubscribe=p,this._next=l?function(g){try{l(g)}catch(m){a.error(m)}}:super._next,this._error=d?function(g){try{d(g)}catch(m){a.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=h?function(){try{h()}catch(g){a.error(g)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:l}=this;super.unsubscribe(),!l&&(null===(a=this.onFinalize)||void 0===a||a.call(this))}}}function Qn(c,a){return Yn((l,h)=>{let d=0;l.subscribe(Ti(h,f=>{h.next(c.call(a,f,d++))}))})}function be(c,a,l,h){var p,d=arguments.length,f=d<3?a:null===h?h=Object.getOwnPropertyDescriptor(a,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(c,a,l,h);else for(var g=c.length-1;g>=0;g--)(p=c[g])&&(f=(d<3?p(f):d>3?p(a,l,f):p(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f}function Br(c){return this instanceof Br?(this.v=c,this):new Br(c)}function Bv(c,a,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,h=l.apply(c,a||[]),f=[];return d={},p("next"),p("throw"),p("return"),d[Symbol.asyncIterator]=function(){return this},d;function p(b){h[b]&&(d[b]=function(C){return new Promise(function(x,w){f.push([b,C,x,w])>1||g(b,C)})})}function g(b,C){try{!function m(b){b.value instanceof Br?Promise.resolve(b.value.v).then(v,y):_(f[0][2],b)}(h[b](C))}catch(x){_(f[0][3],x)}}function v(b){g("next",b)}function y(b){g("throw",b)}function _(b,C){b(C),f.shift(),f.length&&g(f[0][0],f[0][1])}}function Hu(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,a=c[Symbol.asyncIterator];return a?a.call(c):(c=function ar(c){var a="function"==typeof Symbol&&Symbol.iterator,l=a&&c[a],h=0;if(l)return l.call(c);if(c&&"number"==typeof c.length)return{next:function(){return c&&h>=c.length&&(c=void 0),{value:c&&c[h++],done:!c}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l);function h(f){l[f]=c[f]&&function(p){return new Promise(function(g,m){!function d(f,p,g,m){Promise.resolve(m).then(function(v){f({value:v,done:g})},p)}(g,m,(p=c[f](p)).done,p.value)})}}}const YP=c=>c&&"number"==typeof c.length&&"function"!=typeof c;function bQ(c){return ge(c?.then)}function CQ(c){return ge(c[Wt])}function SQ(c){return Symbol.asyncIterator&&ge(c?.[Symbol.asyncIterator])}function xQ(c){return new TypeError(`You provided ${null!==c&&"object"==typeof c?"an invalid object":`'${c}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wQ=function Exe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function OQ(c){return ge(c?.[wQ])}function DQ(c){return Bv(this,arguments,function*(){const l=c.getReader();try{for(;;){const{value:h,done:d}=yield Br(l.read());if(d)return yield Br(void 0);yield yield Br(h)}}finally{l.releaseLock()}})}function TQ(c){return ge(c?.getReader)}function Ja(c){if(c instanceof Ke)return c;if(null!=c){if(CQ(c))return function Axe(c){return new Ke(a=>{const l=c[Wt]();if(ge(l.subscribe))return l.subscribe(a);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(c);if(YP(c))return function Ixe(c){return new Ke(a=>{for(let l=0;l<c.length&&!a.closed;l++)a.next(c[l]);a.complete()})}(c);if(bQ(c))return function Pxe(c){return new Ke(a=>{c.then(l=>{a.closed||(a.next(l),a.complete())},l=>a.error(l)).then(null,le)})}(c);if(SQ(c))return kQ(c);if(OQ(c))return function Rxe(c){return new Ke(a=>{for(const l of c)if(a.next(l),a.closed)return;a.complete()})}(c);if(TQ(c))return function Fxe(c){return kQ(DQ(c))}(c)}throw xQ(c)}function kQ(c){return new Ke(a=>{(function Lxe(c,a){var l,h,d,f;return function wn(c,a,l,h){return new(l||(l=Promise))(function(f,p){function g(y){try{v(h.next(y))}catch(_){p(_)}}function m(y){try{v(h.throw(y))}catch(_){p(_)}}function v(y){y.done?f(y.value):function d(f){return f instanceof l?f:new l(function(p){p(f)})}(y.value).then(g,m)}v((h=h.apply(c,a||[])).next())})}(this,void 0,void 0,function*(){try{for(l=Hu(c);!(h=yield l.next()).done;)if(a.next(h.value),a.closed)return}catch(p){d={error:p}}finally{try{h&&!h.done&&(f=l.return)&&(yield f.call(l))}finally{if(d)throw d.error}}a.complete()})})(c,a).catch(l=>a.error(l))})}function df(c,a,l,h=0,d=!1){const f=a.schedule(function(){l(),d?c.add(this.schedule(null,h)):this.unsubscribe()},h);if(c.add(f),!d)return f}function Xo(c,a,l=1/0){return ge(a)?Xo((h,d)=>Qn((f,p)=>a(h,f,d,p))(Ja(c(h,d))),l):("number"==typeof a&&(l=a),Yn((h,d)=>function Nxe(c,a,l,h,d,f,p,g){const m=[];let v=0,y=0,_=!1;const b=()=>{_&&!m.length&&!v&&a.complete()},C=w=>v<h?x(w):m.push(w),x=w=>{f&&a.next(w),v++;let O=!1;Ja(l(w,y++)).subscribe(Ti(a,D=>{d?.(D),f?C(D):a.next(D)},()=>{O=!0},void 0,()=>{if(O)try{for(v--;m.length&&v<h;){const D=m.shift();p?df(a,p,()=>x(D)):x(D)}b()}catch(D){a.error(D)}}))};return c.subscribe(Ti(a,C,()=>{_=!0,b()})),()=>{g?.()}}(h,d,c,l)))}function Uv(c=1/0){return Xo(pi,c)}const Qh=new Ke(c=>c.complete());function KP(c){return c[c.length-1]}function EQ(c){return ge(KP(c))?c.pop():void 0}function dC(c){return function MQ(c){return c&&ge(c.schedule)}(KP(c))?c.pop():void 0}function AQ(c,a=0){return Yn((l,h)=>{l.subscribe(Ti(h,d=>df(h,c,()=>h.next(d),a),()=>df(h,c,()=>h.complete(),a),d=>df(h,c,()=>h.error(d),a)))})}function IQ(c,a=0){return Yn((l,h)=>{h.add(c.schedule(()=>l.subscribe(h),a))})}function PQ(c,a){if(!c)throw new Error("Iterable cannot be null");return new Ke(l=>{df(l,a,()=>{const h=c[Symbol.asyncIterator]();df(l,a,()=>{h.next().then(d=>{d.done?l.complete():l.next(d.value)})},0,!0)})})}function ho(c,a){return a?function Gxe(c,a){if(null!=c){if(CQ(c))return function Uxe(c,a){return Ja(c).pipe(IQ(a),AQ(a))}(c,a);if(YP(c))return function Hxe(c,a){return new Ke(l=>{let h=0;return a.schedule(function(){h===c.length?l.complete():(l.next(c[h++]),l.closed||this.schedule())})})}(c,a);if(bQ(c))return function zxe(c,a){return Ja(c).pipe(IQ(a),AQ(a))}(c,a);if(SQ(c))return PQ(c,a);if(OQ(c))return function $xe(c,a){return new Ke(l=>{let h;return df(l,a,()=>{h=c[wQ](),df(l,a,()=>{let d,f;try{({value:d,done:f}=h.next())}catch(p){return void l.error(p)}f?l.complete():l.next(d)},0,!0)}),()=>ge(h?.return)&&h.return()})}(c,a);if(TQ(c))return function Wxe(c,a){return PQ(DQ(c),a)}(c,a)}throw xQ(c)}(c,a):Ja(c)}function JP(c,a,...l){if(!0===a)return void c();if(!1===a)return;const h=new Ne({next:()=>{h.unsubscribe(),c()}});return Ja(a(...l)).subscribe(h)}function qr(c){for(let a in c)if(c[a]===qr)return a;throw Error("Could not find renamed property on target object.")}function eR(c,a){for(const l in a)a.hasOwnProperty(l)&&!c.hasOwnProperty(l)&&(c[l]=a[l])}function is(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(is).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const a=c.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function tR(c,a){return null==c||""===c?null===a?"":a:null==a||""===a?c:c+" "+a}const jxe=qr({__forward_ref__:qr});function rs(c){return c.__forward_ref__=rs,c.toString=function(){return is(this())},c}function li(c){return nR(c)?c():c}function nR(c){return"function"==typeof c&&c.hasOwnProperty(jxe)&&c.__forward_ref__===rs}function iR(c){return c&&!!c.\u0275providers}const RQ="https://g.co/ng/security#xss";class xt extends Error{constructor(a,l){super(function H2(c,a){return`NG0${Math.abs(c)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function ki(c){return"string"==typeof c?c:null==c?"":String(c)}function $2(c,a){throw new xt(-201,!1)}function iu(c,a){null==c&&function Ar(c,a,l,h){throw new Error(`ASSERTION ERROR: ${c}`+(null==h?"":` [Expected=> ${l} ${h} ${a} <=Actual]`))}(a,c,null,"!=")}function Xe(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Ln(c){return{providers:c.providers||[],imports:c.imports||[]}}function W2(c){return FQ(c,G2)||FQ(c,NQ)}function FQ(c,a){return c.hasOwnProperty(a)?c[a]:null}function LQ(c){return c&&(c.hasOwnProperty(rR)||c.hasOwnProperty(nwe))?c[rR]:null}const G2=qr({\u0275prov:qr}),rR=qr({\u0275inj:qr}),NQ=qr({ngInjectableDef:qr}),nwe=qr({ngInjectorDef:qr});var ci=(()=>((ci=ci||{})[ci.Default=0]="Default",ci[ci.Host=1]="Host",ci[ci.Self=2]="Self",ci[ci.SkipSelf=4]="SkipSelf",ci[ci.Optional=8]="Optional",ci))();let sR;function ru(c){const a=sR;return sR=c,a}function BQ(c,a,l){const h=W2(c);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&ci.Optional?null:void 0!==a?a:void $2(is(c))}const ss=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fC={},oR="__NG_DI_FLAG__",Q2="ngTempTokenPath",swe=/\n/gm,VQ="__source";let pC;function zv(c){const a=pC;return pC=c,a}function awe(c,a=ci.Default){if(void 0===pC)throw new xt(-203,!1);return null===pC?BQ(c,void 0,a):pC.get(c,a&ci.Optional?null:void 0,a)}function Pe(c,a=ci.Default){return(function iwe(){return sR}()||awe)(li(c),a)}function Gi(c,a=ci.Default){return Pe(c,j2(a))}function j2(c){return typeof c>"u"||"number"==typeof c?c:0|(c.optional&&8)|(c.host&&1)|(c.self&&2)|(c.skipSelf&&4)}function aR(c){const a=[];for(let l=0;l<c.length;l++){const h=li(c[l]);if(Array.isArray(h)){if(0===h.length)throw new xt(900,!1);let d,f=ci.Default;for(let p=0;p<h.length;p++){const g=h[p],m=lwe(g);"number"==typeof m?-1===m?d=g.token:f|=m:d=g}a.push(Pe(d,f))}else a.push(Pe(h))}return a}function gC(c,a){return c[oR]=a,c.prototype[oR]=a,c}function lwe(c){return c[oR]}function Ap(c){return{toString:c}.toString()}var $u=(()=>(($u=$u||{})[$u.OnPush=0]="OnPush",$u[$u.Default=1]="Default",$u))(),Wu=(()=>{return(c=Wu||(Wu={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",Wu;var c})();const ff={},Dr=[],Z2=qr({\u0275cmp:qr}),lR=qr({\u0275dir:qr}),cR=qr({\u0275pipe:qr}),zQ=qr({\u0275mod:qr}),pf=qr({\u0275fac:qr}),mC=qr({__NG_ELEMENT_ID__:qr});let hwe=0;function Je(c){return Ap(()=>{const l=!0===c.standalone,h={},d={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===$u.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&c.dependencies||null,getStandaloneInjector:null,selectors:c.selectors||Dr,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||Wu.Emulated,id:"c"+hwe++,styles:c.styles||Dr,_:null,setInput:null,schemas:c.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=c.dependencies,p=c.features;return d.inputs=WQ(c.inputs,h),d.outputs=WQ(c.outputs),p&&p.forEach(g=>g(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(HQ).filter($Q):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(el).filter($Q):null,d})}function uR(c,a,l){const h=c.\u0275cmp;h.directiveDefs=()=>("function"==typeof a?a():a).map(HQ),h.pipeDefs=()=>("function"==typeof l?l():l).map(el)}function HQ(c){return Ir(c)||Da(c)}function $Q(c){return null!==c}function Un(c){return Ap(()=>({type:c.type,bootstrap:c.bootstrap||Dr,declarations:c.declarations||Dr,imports:c.imports||Dr,exports:c.exports||Dr,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null}))}function WQ(c,a){if(null==c)return ff;const l={};for(const h in c)if(c.hasOwnProperty(h)){let d=c[h],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),l[d]=h,a&&(a[d]=f)}return l}const _t=Je;function Hl(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function Ir(c){return c[Z2]||null}function Da(c){return c[lR]||null}function el(c){return c[cR]||null}function hc(c,a){const l=c[zQ]||null;if(!l&&!0===a)throw new Error(`Type ${is(c)} does not have '\u0275mod' property.`);return l}function dc(c){return Array.isArray(c)&&"object"==typeof c[1]}function Qu(c){return Array.isArray(c)&&!0===c[1]}function fR(c){return 0!=(4&c.flags)}function bC(c){return c.componentOffset>-1}function J2(c){return 1==(1&c.flags)}function ju(c){return null!==c.template}function fwe(c){return 0!=(256&c[2])}function gm(c,a){return c.hasOwnProperty(pf)?c[pf]:null}class mwe{constructor(a,l,h){this.previousValue=a,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function ro(){return XQ}function XQ(c){return c.type.prototype.ngOnChanges&&(c.setInput=ywe),vwe}function vwe(){const c=KQ(this),a=c?.current;if(a){const l=c.previous;if(l===ff)c.previous=a;else for(let h in a)l[h]=a[h];c.current=null,this.ngOnChanges(a)}}function ywe(c,a,l,h){const d=this.declaredInputs[l],f=KQ(c)||function _we(c,a){return c[YQ]=a}(c,{previous:ff,current:null}),p=f.current||(f.current={}),g=f.previous,m=g[d];p[d]=new mwe(m&&m.currentValue,a,g===ff),c[h]=a}ro.ngInherit=!0;const YQ="__ngSimpleChanges__";function KQ(c){return c[YQ]||null}function ha(c){for(;Array.isArray(c);)c=c[0];return c}function eD(c,a){return ha(a[c])}function fc(c,a){return ha(a[c.index])}function tj(c,a){return c.data[a]}function jv(c,a){return c[a]}function pc(c,a){const l=a[c];return dc(l)?l:l[0]}function tD(c){return 64==(64&c[2])}function Ip(c,a){return null==a?null:c[a]}function nj(c){c[18]=0}function gR(c,a){c[5]+=a;let l=c,h=c[3];for(;null!==h&&(1===a&&1===l[5]||-1===a&&0===l[5]);)h[5]+=a,l=h,h=h[3]}const Mi={lFrame:dj(null),bindingsEnabled:!0};function rj(){return Mi.bindingsEnabled}function Ft(){return Mi.lFrame.lView}function gr(){return Mi.lFrame.tView}function Ee(c){return Mi.lFrame.contextLView=c,c[8]}function Ae(c){return Mi.lFrame.contextLView=null,c}function da(){let c=sj();for(;null!==c&&64===c.type;)c=c.parent;return c}function sj(){return Mi.lFrame.currentTNode}function Zh(c,a){const l=Mi.lFrame;l.currentTNode=c,l.isParent=a}function mR(){return Mi.lFrame.isParent}function vR(){Mi.lFrame.isParent=!1}function nl(){const c=Mi.lFrame;let a=c.bindingRootIndex;return-1===a&&(a=c.bindingRootIndex=c.tView.bindingStartIndex),a}function mf(){return Mi.lFrame.bindingIndex}function Zv(){return Mi.lFrame.bindingIndex++}function vf(c){const a=Mi.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+c,l}function Iwe(c,a){const l=Mi.lFrame;l.bindingIndex=l.bindingRootIndex=c,yR(a)}function yR(c){Mi.lFrame.currentDirectiveIndex=c}function cj(){return Mi.lFrame.currentQueryIndex}function bR(c){Mi.lFrame.currentQueryIndex=c}function Rwe(c){const a=c[1];return 2===a.type?a.declTNode:1===a.type?c[6]:null}function uj(c,a,l){if(l&ci.SkipSelf){let d=a,f=c;for(;!(d=d.parent,null!==d||l&ci.Host||(d=Rwe(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;a=d,c=f}const h=Mi.lFrame=hj();return h.currentTNode=a,h.lView=c,!0}function CR(c){const a=hj(),l=c[1];Mi.lFrame=a,a.currentTNode=l.firstChild,a.lView=c,a.tView=l,a.contextLView=c,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function hj(){const c=Mi.lFrame,a=null===c?null:c.child;return null===a?dj(c):a}function dj(c){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=a),a}function fj(){const c=Mi.lFrame;return Mi.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const pj=fj;function SR(){const c=fj();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function il(){return Mi.lFrame.selectedIndex}function mm(c){Mi.lFrame.selectedIndex=c}function Es(){const c=Mi.lFrame;return tj(c.tView,c.selectedIndex)}function gc(){Mi.lFrame.currentNamespace="svg"}function nD(c,a){for(let l=a.directiveStart,h=a.directiveEnd;l<h;l++){const f=c.data[l].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:g,ngAfterViewInit:m,ngAfterViewChecked:v,ngOnDestroy:y}=f;p&&(c.contentHooks||(c.contentHooks=[])).push(-l,p),g&&((c.contentHooks||(c.contentHooks=[])).push(l,g),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(l,g)),m&&(c.viewHooks||(c.viewHooks=[])).push(-l,m),v&&((c.viewHooks||(c.viewHooks=[])).push(l,v),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(l,v)),null!=y&&(c.destroyHooks||(c.destroyHooks=[])).push(l,y)}}function iD(c,a,l){mj(c,a,3,l)}function rD(c,a,l,h){(3&c[2])===l&&mj(c,a,l,h)}function xR(c,a){let l=c[2];(3&l)===a&&(l&=2047,l+=1,c[2]=l)}function mj(c,a,l,h){const f=h??-1,p=a.length-1;let g=0;for(let m=void 0!==h?65535&c[18]:0;m<p;m++)if("number"==typeof a[m+1]){if(g=a[m],null!=h&&g>=h)break}else a[m]<0&&(c[18]+=65536),(g<f||-1==f)&&(zwe(c,l,a,m),c[18]=(4294901760&c[18])+m+2),m++}function zwe(c,a,l,h){const d=l[h]<0,f=l[h+1],g=c[d?-l[h]:l[h]];if(d){if(c[2]>>11<c[18]>>16&&(3&c[2])===a){c[2]+=2048;try{f.call(g)}finally{}}}else try{f.call(g)}finally{}}class SC{constructor(a,l,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function OR(c,a,l){let h=0;for(;h<l.length;){const d=l[h];if("number"==typeof d){if(0!==d)break;h++;const f=l[h++],p=l[h++],g=l[h++];c.setAttribute(a,p,g,f)}else{const f=d,p=l[++h];yj(f)?c.setProperty(a,f,p):c.setAttribute(a,f,p),h++}}return h}function vj(c){return 3===c||4===c||6===c}function yj(c){return 64===c.charCodeAt(0)}function xC(c,a){if(null!==a&&0!==a.length)if(null===c||0===c.length)c=a.slice();else{let l=-1;for(let h=0;h<a.length;h++){const d=a[h];"number"==typeof d?l=d:0===l||_j(c,l,d,null,-1===l||2===l?a[++h]:null)}}return c}function _j(c,a,l,h,d){let f=0,p=c.length;if(-1===a)p=-1;else for(;f<c.length;){const g=c[f++];if("number"==typeof g){if(g===a){p=-1;break}if(g>a){p=f-1;break}}}for(;f<c.length;){const g=c[f];if("number"==typeof g)break;if(g===l){if(null===h)return void(null!==d&&(c[f+1]=d));if(h===c[f+1])return void(c[f+2]=d)}f++,null!==h&&f++,null!==d&&f++}-1!==p&&(c.splice(p,0,a),f=p+1),c.splice(f++,0,l),null!==h&&c.splice(f++,0,h),null!==d&&c.splice(f++,0,d)}function bj(c){return-1!==c}function sD(c){return 32767&c}function oD(c,a){let l=function Gwe(c){return c>>16}(c),h=a;for(;l>0;)h=h[15],l--;return h}let DR=!0;function aD(c){const a=DR;return DR=c,a}let Qwe=0;const qh={};function lD(c,a){const l=xj(c,a);if(-1!==l)return l;const h=a[1];h.firstCreatePass&&(c.injectorIndex=a.length,TR(h.data,c),TR(a,null),TR(h.blueprint,null));const d=kR(c,a),f=c.injectorIndex;if(bj(d)){const p=sD(d),g=oD(d,a),m=g[1].data;for(let v=0;v<8;v++)a[f+v]=g[p+v]|m[p+v]}return a[f+8]=d,f}function TR(c,a){c.push(0,0,0,0,0,0,0,0,a)}function xj(c,a){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===a[c.injectorIndex+8]?-1:c.injectorIndex}function kR(c,a){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let l=0,h=null,d=a;for(;null!==d;){if(h=Ej(d),null===h)return-1;if(l++,d=d[15],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return-1}function MR(c,a,l){!function jwe(c,a,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(mC)&&(h=l[mC]),null==h&&(h=l[mC]=Qwe++);const d=255&h;a.data[c+(d>>5)]|=1<<d}(c,a,l)}function wj(c,a,l){if(l&ci.Optional||void 0!==c)return c;$2()}function Oj(c,a,l,h){if(l&ci.Optional&&void 0===h&&(h=null),!(l&(ci.Self|ci.Host))){const d=c[9],f=ru(void 0);try{return d?d.get(a,h,l&ci.Optional):BQ(a,h,l&ci.Optional)}finally{ru(f)}}return wj(h,0,l)}function Dj(c,a,l,h=ci.Default,d){if(null!==c){if(1024&a[2]){const p=function Kwe(c,a,l,h,d){let f=c,p=a;for(;null!==f&&null!==p&&1024&p[2]&&!(256&p[2]);){const g=Tj(f,p,l,h|ci.Self,qh);if(g!==qh)return g;let m=f.parent;if(!m){const v=p[21];if(v){const y=v.get(l,qh,h);if(y!==qh)return y}m=Ej(p),p=p[15]}f=m}return d}(c,a,l,h,qh);if(p!==qh)return p}const f=Tj(c,a,l,h,qh);if(f!==qh)return f}return Oj(a,l,h,d)}function Tj(c,a,l,h,d){const f=function Xwe(c){if("string"==typeof c)return c.charCodeAt(0)||0;const a=c.hasOwnProperty(mC)?c[mC]:void 0;return"number"==typeof a?a>=0?255&a:Ywe:a}(l);if("function"==typeof f){if(!uj(a,c,h))return h&ci.Host?wj(d,0,h):Oj(a,l,h,d);try{const p=f(h);if(null!=p||h&ci.Optional)return p;$2()}finally{pj()}}else if("number"==typeof f){let p=null,g=xj(c,a),m=-1,v=h&ci.Host?a[16][6]:null;for((-1===g||h&ci.SkipSelf)&&(m=-1===g?kR(c,a):a[g+8],-1!==m&&Mj(h,!1)?(p=a[1],g=sD(m),a=oD(m,a)):g=-1);-1!==g;){const y=a[1];if(kj(f,g,y.data)){const _=qwe(g,a,l,p,h,v);if(_!==qh)return _}m=a[g+8],-1!==m&&Mj(h,a[1].data[g+8]===v)&&kj(f,g,a)?(p=y,g=sD(m),a=oD(m,a)):g=-1}}return d}function qwe(c,a,l,h,d,f){const p=a[1],g=p.data[c+8],y=cD(g,p,l,null==h?bC(g)&&DR:h!=p&&0!=(3&g.type),d&ci.Host&&f===g);return null!==y?vm(a,p,y,g):qh}function cD(c,a,l,h,d){const f=c.providerIndexes,p=a.data,g=1048575&f,m=c.directiveStart,y=f>>20,b=d?g+y:c.directiveEnd;for(let C=h?g:g+y;C<b;C++){const x=p[C];if(C<m&&l===x||C>=m&&x.type===l)return C}if(d){const C=p[m];if(C&&ju(C)&&C.type===l)return m}return null}function vm(c,a,l,h){let d=c[l];const f=a.data;if(function Hwe(c){return c instanceof SC}(d)){const p=d;p.resolving&&function Zxe(c,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${c}`:"";throw new xt(-200,`Circular dependency in DI detected for ${c}${l}`)}(function Er(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():ki(c)}(f[l]));const g=aD(p.canSeeViewProviders);p.resolving=!0;const m=p.injectImpl?ru(p.injectImpl):null;uj(c,h,ci.Default);try{d=c[l]=p.factory(void 0,f,c,h),a.firstCreatePass&&l>=h.directiveStart&&function Uwe(c,a,l){const{ngOnChanges:h,ngOnInit:d,ngDoCheck:f}=a.type.prototype;if(h){const p=XQ(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(c,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(c,p)}d&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-c,d),f&&((l.preOrderHooks||(l.preOrderHooks=[])).push(c,f),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(c,f))}(l,f[l],a)}finally{null!==m&&ru(m),aD(g),p.resolving=!1,pj()}}return d}function kj(c,a,l){return!!(l[a+(c>>5)]&1<<c)}function Mj(c,a){return!(c&ci.Self||c&ci.Host&&a)}class Xv{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,h){return Dj(this._tNode,this._lView,a,j2(h),l)}}function Ywe(){return new Xv(da(),Ft())}function Vr(c){return Ap(()=>{const a=c.prototype.constructor,l=a[pf]||ER(a),h=Object.prototype;let d=Object.getPrototypeOf(c.prototype).constructor;for(;d&&d!==h;){const f=d[pf]||ER(d);if(f&&f!==l)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function ER(c){return nR(c)?()=>{const a=ER(li(c));return a&&a()}:gm(c)}function Ej(c){const a=c[1],l=a.type;return 2===l?a.declTNode:1===l?c[6]:null}const Kv="__parameters__";function ey(c,a,l){return Ap(()=>{const h=function AR(c){return function(...l){if(c){const h=c(...l);for(const d in h)this[d]=h[d]}}}(a);function d(...f){if(this instanceof d)return h.apply(this,f),this;const p=new d(...f);return g.annotation=p,g;function g(m,v,y){const _=m.hasOwnProperty(Kv)?m[Kv]:Object.defineProperty(m,Kv,{value:[]})[Kv];for(;_.length<=y;)_.push(null);return(_[y]=_[y]||[]).push(p),m}}return l&&(d.prototype=Object.create(l.prototype)),d.prototype.ngMetadataName=c,d.annotationCls=d,d})}class sn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Xe({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const uD=Function;function ym(c,a){c.forEach(l=>Array.isArray(l)?ym(l,a):a(l))}function Ij(c,a,l){a>=c.length?c.push(l):c.splice(a,0,l)}function hD(c,a){return a>=c.length-1?c.pop():c.splice(a,1)[0]}function TC(c,a){const l=[];for(let h=0;h<c;h++)l.push(a);return l}function mc(c,a,l){let h=ty(c,a);return h>=0?c[1|h]=l:(h=~h,function nOe(c,a,l,h){let d=c.length;if(d==a)c.push(l,h);else if(1===d)c.push(h,c[0]),c[0]=l;else{for(d--,c.push(c[d-1],c[d]);d>a;)c[d]=c[d-2],d--;c[a]=l,c[a+1]=h}}(c,h,a,l)),h}function IR(c,a){const l=ty(c,a);if(l>=0)return c[1|l]}function ty(c,a){return function Pj(c,a,l){let h=0,d=c.length>>l;for(;d!==h;){const f=h+(d-h>>1),p=c[f<<l];if(a===p)return f<<l;p>a?d=f:h=f+1}return~(d<<l)}(c,a,1)}const Pp=gC(ey("Optional"),8),Rp=gC(ey("SkipSelf"),4);var $l=(()=>(($l=$l||{})[$l.Important=1]="Important",$l[$l.DashCase=2]="DashCase",$l))();const BR=new Map;let wOe=0;const UR="__ngContext__";function Ma(c,a){dc(a)?(c[UR]=a[20],function DOe(c){BR.set(c[20],c)}(a)):c[UR]=a}function HR(c,a){return undefined(c,a)}function AC(c){const a=c[3];return Qu(a)?a[3]:a}function $R(c){return Jj(c[13])}function WR(c){return Jj(c[4])}function Jj(c){for(;null!==c&&!Qu(c);)c=c[4];return c}function iy(c,a,l,h,d){if(null!=h){let f,p=!1;Qu(h)?f=h:dc(h)&&(p=!0,h=h[0]);const g=ha(h);0===c&&null!==l?null==d?sZ(a,l,g):_m(a,l,g,d||null,!0):1===c&&null!==l?_m(a,l,g,d||null,!0):2===c?function YR(c,a,l){const h=gD(c,a);h&&function QOe(c,a,l,h){c.removeChild(a,l,h)}(c,h,a,l)}(a,g,p):3===c&&a.destroyNode(g),null!=f&&function qOe(c,a,l,h,d){const f=l[7];f!==ha(l)&&iy(a,c,h,f,d);for(let g=10;g<l.length;g++){const m=l[g];IC(m[1],m,c,a,h,f)}}(a,c,f,l,d)}}function QR(c,a,l){return c.createElement(a,l)}function tZ(c,a){const l=c[9],h=l.indexOf(a),d=a[3];512&a[2]&&(a[2]&=-513,gR(d,-1)),l.splice(h,1)}function jR(c,a){if(c.length<=10)return;const l=10+a,h=c[l];if(h){const d=h[17];null!==d&&d!==c&&tZ(d,h),a>0&&(c[l-1][4]=h[4]);const f=hD(c,10+a);!function BOe(c,a){IC(c,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const p=f[19];null!==p&&p.detachView(f[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function nZ(c,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&IC(c,a,l,3,null,null),function zOe(c){let a=c[13];if(!a)return ZR(c[1],c);for(;a;){let l=null;if(dc(a))l=a[13];else{const h=a[10];h&&(l=h)}if(!l){for(;a&&!a[4]&&a!==c;)dc(a)&&ZR(a[1],a),a=a[3];null===a&&(a=c),dc(a)&&ZR(a[1],a),l=a&&a[4]}a=l}}(a)}}function ZR(c,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function GOe(c,a){let l;if(null!=c&&null!=(l=c.destroyHooks))for(let h=0;h<l.length;h+=2){const d=a[l[h]];if(!(d instanceof SC)){const f=l[h+1];if(Array.isArray(f))for(let p=0;p<f.length;p+=2){const g=d[f[p]],m=f[p+1];try{m.call(g)}finally{}}else try{f.call(d)}finally{}}}}(c,a),function WOe(c,a){const l=c.cleanup,h=a[7];let d=-1;if(null!==l)for(let f=0;f<l.length-1;f+=2)if("string"==typeof l[f]){const p=l[f+3];p>=0?h[d=p]():h[d=-p].unsubscribe(),f+=2}else{const p=h[d=l[f+1]];l[f].call(p)}if(null!==h){for(let f=d+1;f<h.length;f++)(0,h[f])();a[7]=null}}(c,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&Qu(a[3])){l!==a[3]&&tZ(l,a);const h=a[19];null!==h&&h.detachView(c)}!function TOe(c){BR.delete(c[20])}(a)}}function iZ(c,a,l){return function rZ(c,a,l){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return l[0];{const{componentOffset:d}=h;if(d>-1){const{encapsulation:f}=c.data[h.directiveStart+d];if(f===Wu.None||f===Wu.Emulated)return null}return fc(h,l)}}(c,a.parent,l)}function _m(c,a,l,h,d){c.insertBefore(a,l,h,d)}function sZ(c,a,l){c.appendChild(a,l)}function oZ(c,a,l,h,d){null!==h?_m(c,a,l,h,d):sZ(c,a,l)}function gD(c,a){return c.parentNode(a)}function aZ(c,a,l){return cZ(c,a,l)}let eF,cZ=function lZ(c,a,l){return 40&c.type?fc(c,l):null};function mD(c,a,l,h){const d=iZ(c,h,a),f=a[11],g=aZ(h.parent||a[6],h,a);if(null!=d)if(Array.isArray(l))for(let m=0;m<l.length;m++)oZ(f,d,l[m],g,!1);else oZ(f,d,l,g,!1)}function vD(c,a){if(null!==a){const l=a.type;if(3&l)return fc(a,c);if(4&l)return XR(-1,c[a.index]);if(8&l){const h=a.child;if(null!==h)return vD(c,h);{const d=c[a.index];return Qu(d)?XR(-1,d):ha(d)}}if(32&l)return HR(a,c)()||ha(c[a.index]);{const h=hZ(c,a);return null!==h?Array.isArray(h)?h[0]:vD(AC(c[16]),h):vD(c,a.next)}}return null}function hZ(c,a){return null!==a?c[16][6].projection[a.projection]:null}function XR(c,a){const l=10+c+1;if(l<a.length){const h=a[l],d=h[1].firstChild;if(null!==d)return vD(h,d)}return a[7]}function KR(c,a,l,h,d,f,p){for(;null!=l;){const g=h[l.index],m=l.type;if(p&&0===a&&(g&&Ma(ha(g),h),l.flags|=2),32!=(32&l.flags))if(8&m)KR(c,a,l.child,h,d,f,!1),iy(a,c,d,g,f);else if(32&m){const v=HR(l,h);let y;for(;y=v();)iy(a,c,d,y,f);iy(a,c,d,g,f)}else 16&m?dZ(c,a,h,l,d,f):iy(a,c,d,g,f);l=p?l.projectionNext:l.next}}function IC(c,a,l,h,d,f){KR(l,h,c.firstChild,a,d,f,!1)}function dZ(c,a,l,h,d,f){const p=l[16],m=p[6].projection[h.projection];if(Array.isArray(m))for(let v=0;v<m.length;v++)iy(a,c,d,m[v],f);else KR(c,a,m,p[3],d,f,!0)}function fZ(c,a,l){""===l?c.removeAttribute(a,"class"):c.setAttribute(a,"class",l)}function pZ(c,a,l){const{mergedAttrs:h,classes:d,styles:f}=l;null!==h&&OR(c,a,h),null!==d&&fZ(c,a,d),null!==f&&function YOe(c,a,l){c.setAttribute(a,"style",l)}(c,a,f)}class _Z{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${RQ})`}}function Fp(c){return c instanceof _Z?c.changingThisBreaksApplicationSecurity:c}const h2e=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var fo=(()=>((fo=fo||{})[fo.NONE=0]="NONE",fo[fo.HTML=1]="HTML",fo[fo.STYLE=2]="STYLE",fo[fo.SCRIPT=3]="SCRIPT",fo[fo.URL=4]="URL",fo[fo.RESOURCE_URL=5]="RESOURCE_URL",fo))();function CD(c){const a=function FC(){const c=Ft();return c&&c[12]}();return a?a.sanitize(fo.URL,c)||"":function PC(c,a){const l=function a2e(c){return c instanceof _Z&&c.getTypeName()||null}(c);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${RQ})`)}return l===a}(c,"URL")?Fp(c):function nF(c){return(c=String(c)).match(h2e)?c:"unsafe:"+c}(ki(c))}const SD=new sn("ENVIRONMENT_INITIALIZER"),kZ=new sn("INJECTOR",-1),MZ=new sn("INJECTOR_DEF_TYPES");class EZ{get(a,l=fC){if(l===fC){const h=new Error(`NullInjectorError: No provider for ${is(a)}!`);throw h.name="NullInjectorError",h}return l}}function O2e(...c){return{\u0275providers:AZ(0,c),\u0275fromNgModule:!0}}function AZ(c,...a){const l=[],h=new Set;let d;return ym(a,f=>{const p=f;oF(p,l,[],h)&&(d||(d=[]),d.push(p))}),void 0!==d&&IZ(d,l),l}function IZ(c,a){for(let l=0;l<c.length;l++){const{providers:d}=c[l];aF(d,f=>{a.push(f)})}}function oF(c,a,l,h){if(!(c=li(c)))return!1;let d=null,f=LQ(c);const p=!f&&Ir(c);if(f||p){if(p&&!p.standalone)return!1;d=c}else{const m=c.ngModule;if(f=LQ(m),!f)return!1;d=m}const g=h.has(d);if(p){if(g)return!1;if(h.add(d),p.dependencies){const m="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const v of m)oF(v,a,l,h)}}else{if(!f)return!1;{if(null!=f.imports&&!g){let v;h.add(d);try{ym(f.imports,y=>{oF(y,a,l,h)&&(v||(v=[]),v.push(y))})}finally{}void 0!==v&&IZ(v,a)}if(!g){const v=gm(d)||(()=>new d);a.push({provide:d,useFactory:v,deps:Dr},{provide:MZ,useValue:d,multi:!0},{provide:SD,useValue:()=>Pe(d),multi:!0})}const m=f.providers;null==m||g||aF(m,y=>{a.push(y)})}}return d!==c&&void 0!==c.providers}function aF(c,a){for(let l of c)iR(l)&&(l=l.\u0275providers),Array.isArray(l)?aF(l,a):a(l)}const D2e=qr({provide:String,useValue:qr});function lF(c){return null!==c&&"object"==typeof c&&D2e in c}function Cm(c){return"function"==typeof c}const cF=new sn("Set Injector scope."),xD={},k2e={};let uF;function wD(){return void 0===uF&&(uF=new EZ),uF}class Xh{}class FZ extends Xh{get destroyed(){return this._destroyed}constructor(a,l,h,d){super(),this.parent=l,this.source=h,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dF(a,p=>this.processProvider(p)),this.records.set(kZ,ry(void 0,this)),d.has("environment")&&this.records.set(Xh,ry(void 0,this));const f=this.records.get(cF);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(MZ.multi,Dr,ci.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=zv(this),h=ru(void 0);try{return a()}finally{zv(l),ru(h)}}get(a,l=fC,h=ci.Default){this.assertNotDestroyed(),h=j2(h);const d=zv(this),f=ru(void 0);try{if(!(h&ci.SkipSelf)){let g=this.records.get(a);if(void 0===g){const m=function P2e(c){return"function"==typeof c||"object"==typeof c&&c instanceof sn}(a)&&W2(a);g=m&&this.injectableDefInScope(m)?ry(hF(a),xD):null,this.records.set(a,g)}if(null!=g)return this.hydrate(a,g)}return(h&ci.Self?wD():this.parent).get(a,l=h&ci.Optional&&l===fC?null:l)}catch(p){if("NullInjectorError"===p.name){if((p[Q2]=p[Q2]||[]).unshift(is(a)),d)throw p;return function cwe(c,a,l,h){const d=c[Q2];throw a[VQ]&&d.unshift(a[VQ]),c.message=function uwe(c,a,l,h=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.slice(2):c;let d=is(a);if(Array.isArray(a))d=a.map(is).join(" -> ");else if("object"==typeof a){let f=[];for(let p in a)if(a.hasOwnProperty(p)){let g=a[p];f.push(p+":"+("string"==typeof g?JSON.stringify(g):is(g)))}d=`{${f.join(", ")}}`}return`${l}${h?"("+h+")":""}[${d}]: ${c.replace(swe,"\n  ")}`}("\n"+c.message,d,l,h),c.ngTokenPath=d,c[Q2]=null,c}(p,a,"R3InjectorError",this.source)}throw p}finally{ru(f),zv(d)}}resolveInjectorInitializers(){const a=zv(this),l=ru(void 0);try{const h=this.get(SD.multi,Dr,ci.Self);for(const d of h)d()}finally{zv(a),ru(l)}}toString(){const a=[],l=this.records;for(const h of l.keys())a.push(is(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xt(205,!1)}processProvider(a){let l=Cm(a=li(a))?a:li(a&&a.provide);const h=function E2e(c){return lF(c)?ry(void 0,c.useValue):ry(LZ(c),xD)}(a);if(Cm(a)||!0!==a.multi)this.records.get(l);else{let d=this.records.get(l);d||(d=ry(void 0,xD,!0),d.factory=()=>aR(d.multi),this.records.set(l,d)),l=a,d.multi.push(a)}this.records.set(l,h)}hydrate(a,l){return l.value===xD&&(l.value=k2e,l.value=l.factory()),"object"==typeof l.value&&l.value&&function I2e(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=li(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function hF(c){const a=W2(c),l=null!==a?a.factory:gm(c);if(null!==l)return l;if(c instanceof sn)throw new xt(204,!1);if(c instanceof Function)return function M2e(c){const a=c.length;if(a>0)throw TC(a,"?"),new xt(204,!1);const l=function ewe(c){const a=c&&(c[G2]||c[NQ]);if(a){const l=function twe(c){if(c.hasOwnProperty("name"))return c.name;const a=(""+c).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(c);return null!==l?()=>l.factory(c):()=>new c}(c);throw new xt(204,!1)}function LZ(c,a,l){let h;if(Cm(c)){const d=li(c);return gm(d)||hF(d)}if(lF(c))h=()=>li(c.useValue);else if(function RZ(c){return!(!c||!c.useFactory)}(c))h=()=>c.useFactory(...aR(c.deps||[]));else if(function PZ(c){return!(!c||!c.useExisting)}(c))h=()=>Pe(li(c.useExisting));else{const d=li(c&&(c.useClass||c.provide));if(!function A2e(c){return!!c.deps}(c))return gm(d)||hF(d);h=()=>new d(...aR(c.deps))}return h}function ry(c,a,l=!1){return{factory:c,value:a,multi:l?[]:void 0}}function dF(c,a){for(const l of c)Array.isArray(l)?dF(l,a):l&&iR(l)?dF(l.\u0275providers,a):a(l)}class R2e{}class NZ{}class L2e{resolveComponentFactory(a){throw function F2e(c){const a=Error(`No component factory found for ${is(c)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=c,a}(a)}}let Sm=(()=>{class c{}return c.NULL=new L2e,c})();function N2e(){return sy(da(),Ft())}function sy(c,a){return new Mn(fc(c,a))}let Mn=(()=>{class c{constructor(l){this.nativeElement=l}}return c.__NG_ELEMENT_ID__=N2e,c})();function B2e(c){return c instanceof Mn?c.nativeElement:c}class oy{}let Yi=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function V2e(){const c=Ft(),l=pc(da().index,c);return(dc(l)?l:c)[11]}(),c})(),U2e=(()=>{class c{}return c.\u0275prov=Xe({token:c,providedIn:"root",factory:()=>null}),c})();class LC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const z2e=new LC("15.1.5"),fF={};function gF(c){return c.ngOriginalError}class ay{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&gF(a);for(;l&&gF(l);)l=gF(l);return l||null}}function ly(c){return c.ownerDocument.defaultView}function _f(c){return c instanceof Function?c():c}function UZ(c,a,l){let h=c.length;for(;;){const d=c.indexOf(a,l);if(-1===d)return d;if(0===d||c.charCodeAt(d-1)<=32){const f=a.length;if(d+f===h||c.charCodeAt(d+f)<=32)return d}l=d+1}}const zZ="ng-template";function X2e(c,a,l){let h=0;for(;h<c.length;){let d=c[h++];if(l&&"class"===d){if(d=c[h],-1!==UZ(d.toLowerCase(),a,0))return!0}else if(1===d){for(;h<c.length&&"string"==typeof(d=c[h++]);)if(d.toLowerCase()===a)return!0;return!1}}return!1}function HZ(c){return 4===c.type&&c.value!==zZ}function Y2e(c,a,l){return a===(4!==c.type||l?c.value:zZ)}function K2e(c,a,l){let h=4;const d=c.attrs||[],f=function tDe(c){for(let a=0;a<c.length;a++)if(vj(c[a]))return a;return c.length}(d);let p=!1;for(let g=0;g<a.length;g++){const m=a[g];if("number"!=typeof m){if(!p)if(4&h){if(h=2|1&h,""!==m&&!Y2e(c,m,l)||""===m&&1===a.length){if(Zu(h))return!1;p=!0}}else{const v=8&h?m:a[++g];if(8&h&&null!==c.attrs){if(!X2e(c.attrs,v,l)){if(Zu(h))return!1;p=!0}continue}const _=J2e(8&h?"class":m,d,HZ(c),l);if(-1===_){if(Zu(h))return!1;p=!0;continue}if(""!==v){let b;b=_>f?"":d[_+1].toLowerCase();const C=8&h?b:null;if(C&&-1!==UZ(C,v,0)||2&h&&v!==b){if(Zu(h))return!1;p=!0}}}}else{if(!p&&!Zu(h)&&!Zu(m))return!1;if(p&&Zu(m))continue;p=!1,h=m|1&h}}return Zu(h)||p}function Zu(c){return 0==(1&c)}function J2e(c,a,l,h){if(null===a)return-1;let d=0;if(h||!l){let f=!1;for(;d<a.length;){const p=a[d];if(p===c)return d;if(3===p||6===p)f=!0;else{if(1===p||2===p){let g=a[++d];for(;"string"==typeof g;)g=a[++d];continue}if(4===p)break;if(0===p){d+=4;continue}}d+=f?1:2}return-1}return function nDe(c,a){let l=c.indexOf(4);if(l>-1)for(l++;l<c.length;){const h=c[l];if("number"==typeof h)return-1;if(h===a)return l;l++}return-1}(a,c)}function $Z(c,a,l=!1){for(let h=0;h<a.length;h++)if(K2e(c,a[h],l))return!0;return!1}function iDe(c,a){e:for(let l=0;l<a.length;l++){const h=a[l];if(c.length===h.length){for(let d=0;d<c.length;d++)if(c[d]!==h[d])continue e;return!0}}return!1}function WZ(c,a){return c?":not("+a.trim()+")":a}function rDe(c){let a=c[0],l=1,h=2,d="",f=!1;for(;l<c.length;){let p=c[l];if("string"==typeof p)if(2&h){const g=c[++l];d+="["+p+(g.length>0?'="'+g+'"':"")+"]"}else 8&h?d+="."+p:4&h&&(d+=" "+p);else""!==d&&!Zu(p)&&(a+=WZ(f,d),d=""),h=p,f=f||!Zu(h);l++}return""!==d&&(a+=WZ(f,d)),a}const Ei={};function F(c){GZ(gr(),Ft(),il()+c,!1)}function GZ(c,a,l,h){if(!h)if(3==(3&a[2])){const f=c.preOrderCheckHooks;null!==f&&iD(a,f,l)}else{const f=c.preOrderHooks;null!==f&&rD(a,f,0,l)}mm(l)}function qZ(c,a=null,l=null,h){const d=XZ(c,a,l,h);return d.resolveInjectorInitializers(),d}function XZ(c,a=null,l=null,h,d=new Set){const f=[l||Dr,O2e(c)];return h=h||("object"==typeof c?void 0:is(c)),new FZ(f,a||wD(),h||null,d)}let As=(()=>{class c{static create(l,h){if(Array.isArray(l))return qZ({name:""},h,l,"");{const d=l.name??"";return qZ({name:d},l.parent,l.providers,d)}}}return c.THROW_IF_NOT_FOUND=fC,c.NULL=new EZ,c.\u0275prov=Xe({token:c,providedIn:"any",factory:()=>Pe(kZ)}),c.__NG_ELEMENT_ID__=-1,c})();function z(c,a=ci.Default){const l=Ft();return null===l?Pe(c,a):Dj(da(),l,li(c),a)}function rq(c,a){const l=c.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const f=l[h+1];if(-1!==f){const p=c.data[f];bR(l[h]),p.contentQueries(2,a[f],f)}}}function DD(c,a,l,h,d,f,p,g,m,v,y){const _=a.blueprint.slice();return _[0]=d,_[2]=76|h,(null!==y||c&&1024&c[2])&&(_[2]|=1024),nj(_),_[3]=_[15]=c,_[8]=l,_[10]=p||c&&c[10],_[11]=g||c&&c[11],_[12]=m||c&&c[12]||null,_[9]=v||c&&c[9]||null,_[6]=f,_[20]=function OOe(){return wOe++}(),_[21]=y,_[16]=2==a.type?c[16]:_,_}function hy(c,a,l,h,d){let f=c.data[a];if(null===f)f=function CF(c,a,l,h,d){const f=sj(),p=mR(),m=c.data[a]=function EDe(c,a,l,h,d,f){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?f:f&&f.parent,l,a,h,d);return null===c.firstChild&&(c.firstChild=m),null!==f&&(p?null==f.child&&null!==m.parent&&(f.child=m):null===f.next&&(f.next=m)),m}(c,a,l,h,d),function Awe(){return Mi.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=l,f.value=h,f.attrs=d;const p=function CC(){const c=Mi.lFrame,a=c.currentTNode;return c.isParent?a:a.parent}();f.injectorIndex=null===p?-1:p.injectorIndex}return Zh(f,!0),f}function NC(c,a,l,h){if(0===l)return-1;const d=a.length;for(let f=0;f<l;f++)a.push(h),c.blueprint.push(h),c.data.push(null);return d}function SF(c,a,l){CR(a);try{const h=c.viewQuery;null!==h&&IF(1,h,l);const d=c.template;null!==d&&sq(c,a,d,1,l),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&rq(c,a),c.staticViewQueries&&IF(2,c.viewQuery,l);const f=c.components;null!==f&&function TDe(c,a){for(let l=0;l<a.length;l++)qDe(c,a[l])}(a,f)}catch(h){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),h}finally{a[2]&=-5,SR()}}function TD(c,a,l,h){const d=a[2];if(128!=(128&d)){CR(a);try{nj(a),function aj(c){return Mi.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==l&&sq(c,a,l,2,h);const p=3==(3&d);if(p){const v=c.preOrderCheckHooks;null!==v&&iD(a,v,null)}else{const v=c.preOrderHooks;null!==v&&rD(a,v,0,null),xR(a,0)}if(function jDe(c){for(let a=$R(c);null!==a;a=WR(a)){if(!a[2])continue;const l=a[9];for(let h=0;h<l.length;h++){const d=l[h];512&d[2]||gR(d[3],1),d[2]|=512}}}(a),function QDe(c){for(let a=$R(c);null!==a;a=WR(a))for(let l=10;l<a.length;l++){const h=a[l],d=h[1];tD(h)&&TD(d,h,d.template,h[8])}}(a),null!==c.contentQueries&&rq(c,a),p){const v=c.contentCheckHooks;null!==v&&iD(a,v)}else{const v=c.contentHooks;null!==v&&rD(a,v,1),xR(a,1)}!function ODe(c,a){const l=c.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const d=l[h];if(d<0)mm(~d);else{const f=d,p=l[++h],g=l[++h];Iwe(p,f),g(2,a[f])}}}finally{mm(-1)}}(c,a);const g=c.components;null!==g&&function DDe(c,a){for(let l=0;l<a.length;l++)ZDe(c,a[l])}(a,g);const m=c.viewQuery;if(null!==m&&IF(2,m,h),p){const v=c.viewCheckHooks;null!==v&&iD(a,v)}else{const v=c.viewHooks;null!==v&&rD(a,v,2),xR(a,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,gR(a[3],-1))}finally{SR()}}}function sq(c,a,l,h,d){const f=il(),p=2&h;try{mm(-1),p&&a.length>22&&GZ(c,a,22,!1),l(h,d)}finally{mm(f)}}function xF(c,a,l){if(fR(a)){const d=a.directiveEnd;for(let f=a.directiveStart;f<d;f++){const p=c.data[f];p.contentQueries&&p.contentQueries(1,l[f],f)}}}function wF(c,a,l){rj()&&(function LDe(c,a,l,h){const d=l.directiveStart,f=l.directiveEnd;bC(l)&&function $De(c,a,l){const h=fc(a,c),d=oq(l),f=c[10],p=kD(c,DD(c,d,null,l.onPush?32:16,h,a,f,f.createRenderer(h,l),null,null,null));c[a.index]=p}(a,l,c.data[d+l.componentOffset]),c.firstCreatePass||lD(l,a),Ma(h,a);const p=l.initialInputs;for(let g=d;g<f;g++){const m=c.data[g],v=vm(a,c,g,l);Ma(v,a),null!==p&&WDe(0,g-d,v,m,0,p),ju(m)&&(pc(l.index,a)[8]=vm(a,c,g,l))}}(c,a,l,fc(l,a)),64==(64&l.flags)&&dq(c,a,l))}function OF(c,a,l=fc){const h=a.localNames;if(null!==h){let d=a.index+1;for(let f=0;f<h.length;f+=2){const p=h[f+1],g=-1===p?l(a,c):c[p];c[d++]=g}}}function oq(c){const a=c.tView;return null===a||a.incompleteFirstPass?c.tView=DF(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):a}function DF(c,a,l,h,d,f,p,g,m,v){const y=22+h,_=y+d,b=function kDe(c,a){const l=[];for(let h=0;h<a;h++)l.push(h<c?null:Ei);return l}(y,_),C="function"==typeof v?v():v;return b[1]={type:c,blueprint:b,template:l,queries:null,viewQuery:g,declTNode:a,data:b.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:m,consts:C,incompleteFirstPass:!1}}function aq(c,a,l,h){const d=pq(a);null===l?d.push(h):(d.push(l),c.firstCreatePass&&gq(c).push(h,d.length-1))}function lq(c,a,l,h){for(let d in c)if(c.hasOwnProperty(d)){l=null===l?{}:l;const f=c[d];null===h?cq(l,a,d,f):h.hasOwnProperty(d)&&cq(l,a,h[d],f)}return l}function cq(c,a,l,h){c.hasOwnProperty(l)?c[l].push(a,h):c[l]=[a,h]}function vc(c,a,l,h,d,f,p,g){const m=fc(a,l);let y,v=a.inputs;!g&&null!=v&&(y=v[h])?(PF(c,l,y,h,d),bC(a)&&uq(l,a.index)):3&a.type&&(h=function IDe(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(h),d=null!=p?p(d,a.value||"",h):d,f.setProperty(m,h,d))}function uq(c,a){const l=pc(a,c);16&l[2]||(l[2]|=32)}function TF(c,a,l,h){let d=!1;if(rj()){const f=null===h?null:{"":-1},p=function BDe(c,a){const l=c.directiveRegistry;let h=null,d=null;if(l)for(let f=0;f<l.length;f++){const p=l[f];if($Z(a,p.selectors,!1))if(h||(h=[]),ju(p))if(null!==p.findHostDirectiveDefs){const g=[];d=d||new Map,p.findHostDirectiveDefs(p,g,d),h.unshift(...g,p),kF(c,a,g.length)}else h.unshift(p),kF(c,a,0);else d=d||new Map,p.findHostDirectiveDefs?.(p,h,d),h.push(p)}return null===h?null:[h,d]}(c,l);let g,m;null===p?g=m=null:[g,m]=p,null!==g&&(d=!0,hq(c,a,l,g,f,m)),f&&function VDe(c,a,l){if(a){const h=c.localNames=[];for(let d=0;d<a.length;d+=2){const f=l[a[d+1]];if(null==f)throw new xt(-301,!1);h.push(a[d],f)}}}(l,h,f)}return l.mergedAttrs=xC(l.mergedAttrs,l.attrs),d}function hq(c,a,l,h,d,f){for(let v=0;v<h.length;v++)MR(lD(l,a),c,h[v].type);!function zDe(c,a,l){c.flags|=1,c.directiveStart=a,c.directiveEnd=a+l,c.providerIndexes=a}(l,c.data.length,h.length);for(let v=0;v<h.length;v++){const y=h[v];y.providersResolver&&y.providersResolver(y)}let p=!1,g=!1,m=NC(c,a,h.length,null);for(let v=0;v<h.length;v++){const y=h[v];l.mergedAttrs=xC(l.mergedAttrs,y.hostAttrs),HDe(c,l,a,m,y),UDe(m,y,d),null!==y.contentQueries&&(l.flags|=4),(null!==y.hostBindings||null!==y.hostAttrs||0!==y.hostVars)&&(l.flags|=64);const _=y.type.prototype;!p&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(l.index),p=!0),!g&&(_.ngOnChanges||_.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(l.index),g=!0),m++}!function ADe(c,a,l){const d=a.directiveEnd,f=c.data,p=a.attrs,g=[];let m=null,v=null;for(let y=a.directiveStart;y<d;y++){const _=f[y],b=l?l.get(_):null,x=b?b.outputs:null;m=lq(_.inputs,y,m,b?b.inputs:null),v=lq(_.outputs,y,v,x);const w=null===m||null===p||HZ(a)?null:GDe(m,y,p);g.push(w)}null!==m&&(m.hasOwnProperty("class")&&(a.flags|=8),m.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=g,a.inputs=m,a.outputs=v}(c,l,f)}function dq(c,a,l){const h=l.directiveStart,d=l.directiveEnd,f=l.index,p=function Pwe(){return Mi.lFrame.currentDirectiveIndex}();try{mm(f);for(let g=h;g<d;g++){const m=c.data[g],v=a[g];yR(g),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&NDe(m,v)}}finally{mm(-1),yR(p)}}function NDe(c,a){null!==c.hostBindings&&c.hostBindings(1,a)}function kF(c,a,l){a.componentOffset=l,(c.components||(c.components=[])).push(a.index)}function UDe(c,a,l){if(l){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)l[a.exportAs[h]]=c;ju(a)&&(l[""]=c)}}function HDe(c,a,l,h,d){c.data[h]=d;const f=d.factory||(d.factory=gm(d.type)),p=new SC(f,ju(d),z);c.blueprint[h]=p,l[h]=p,function RDe(c,a,l,h,d){const f=d.hostBindings;if(f){let p=c.hostBindingOpCodes;null===p&&(p=c.hostBindingOpCodes=[]);const g=~a.index;(function FDe(c){let a=c.length;for(;a>0;){const l=c[--a];if("number"==typeof l&&l<0)return l}return 0})(p)!=g&&p.push(g),p.push(l,h,f)}}(c,a,h,NC(c,l,d.hostVars,Ei),d)}function Yh(c,a,l,h,d,f){const p=fc(c,a);!function MF(c,a,l,h,d,f,p){if(null==f)c.removeAttribute(a,d,l);else{const g=null==p?ki(f):p(f,h||"",d);c.setAttribute(a,d,g,l)}}(a[11],p,f,c.value,l,h,d)}function WDe(c,a,l,h,d,f){const p=f[a];if(null!==p){const g=h.setInput;for(let m=0;m<p.length;){const v=p[m++],y=p[m++],_=p[m++];null!==g?h.setInput(l,_,v,y):l[y]=_}}}function GDe(c,a,l){let h=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(c.hasOwnProperty(f)){null===h&&(h=[]);const p=c[f];for(let g=0;g<p.length;g+=2)if(p[g]===a){h.push(f,p[g+1],l[d+1]);break}}d+=2}else d+=2;else d+=4}return h}function fq(c,a,l,h){return[c,!0,!1,a,null,0,h,l,null,null]}function ZDe(c,a){const l=pc(a,c);if(tD(l)){const h=l[1];48&l[2]?TD(h,l,h.template,l[8]):l[5]>0&&EF(l)}}function EF(c){for(let h=$R(c);null!==h;h=WR(h))for(let d=10;d<h.length;d++){const f=h[d];if(tD(f))if(512&f[2]){const p=f[1];TD(p,f,p.template,f[8])}else f[5]>0&&EF(f)}const l=c[1].components;if(null!==l)for(let h=0;h<l.length;h++){const d=pc(l[h],c);tD(d)&&d[5]>0&&EF(d)}}function qDe(c,a){const l=pc(a,c),h=l[1];(function XDe(c,a){for(let l=a.length;l<c.blueprint.length;l++)a.push(c.blueprint[l])})(h,l),SF(h,l,l[8])}function kD(c,a){return c[13]?c[14][4]=a:c[13]=a,c[14]=a,a}function AF(c){for(;c;){c[2]|=32;const a=AC(c);if(fwe(c)&&!a)return c;c=a}return null}function MD(c,a,l,h=!0){const d=a[10];d.begin&&d.begin();try{TD(c,a,c.template,l)}catch(p){throw h&&vq(a,p),p}finally{d.end&&d.end()}}function IF(c,a,l){bR(0),a(c,l)}function pq(c){return c[7]||(c[7]=[])}function gq(c){return c.cleanup||(c.cleanup=[])}function vq(c,a){const l=c[9],h=l?l.get(ay,null):null;h&&h.handleError(a)}function PF(c,a,l,h,d){for(let f=0;f<l.length;){const p=l[f++],g=l[f++],m=a[p],v=c.data[p];null!==v.setInput?v.setInput(m,d,h,g):m[g]=d}}function bf(c,a,l){const h=eD(a,c);!function eZ(c,a,l){c.setValue(a,l)}(c[11],h,l)}function ED(c,a,l){let h=l?c.styles:null,d=l?c.classes:null,f=0;if(null!==a)for(let p=0;p<a.length;p++){const g=a[p];"number"==typeof g?f=g:1==f?d=tR(d,g):2==f&&(h=tR(h,g+": "+a[++p]+";"))}l?c.styles=h:c.stylesWithoutHost=h,l?c.classes=d:c.classesWithoutHost=d}function AD(c,a,l,h,d=!1){for(;null!==l;){const f=a[l.index];if(null!==f&&h.push(ha(f)),Qu(f))for(let g=10;g<f.length;g++){const m=f[g],v=m[1].firstChild;null!==v&&AD(m[1],m,v,h)}const p=l.type;if(8&p)AD(c,a,l.child,h);else if(32&p){const g=HR(l,a);let m;for(;m=g();)h.push(m)}else if(16&p){const g=hZ(a,l);if(Array.isArray(g))h.push(...g);else{const m=AC(a[16]);AD(m[1],m,g,h,!0)}}l=d?l.projectionNext:l.next}return h}class BC{get rootNodes(){const a=this._lView,l=a[1];return AD(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Qu(a)){const l=a[8],h=l?l.indexOf(this):-1;h>-1&&(jR(a,h),hD(l,h))}this._attachedToViewContainer=!1}nZ(this._lView[1],this._lView)}onDestroy(a){aq(this._lView[1],this._lView,null,a)}markForCheck(){AF(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){MD(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function UOe(c,a){IC(c,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new xt(902,!1);this._appRef=a}}class YDe extends BC{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;MD(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class yq extends Sm{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Ir(a);return new VC(l,this.ngModule)}}function _q(c){const a=[];for(let l in c)c.hasOwnProperty(l)&&a.push({propName:c[l],templateName:l});return a}class JDe{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,h){h=j2(h);const d=this.injector.get(a,fF,h);return d!==fF||l===fF?d:this.parentInjector.get(a,l,h)}}class VC extends NZ{get inputs(){return _q(this.componentDef.inputs)}get outputs(){return _q(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function sDe(c){return c.map(rDe).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,h,d){let f=(d=d||this.ngModule)instanceof Xh?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const p=f?new JDe(a,f):a,g=p.get(oy,null);if(null===g)throw new xt(407,!1);const m=p.get(U2e,null),v=g.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",_=h?function MDe(c,a,l){return c.selectRootElement(a,l===Wu.ShadowDom)}(v,h,this.componentDef.encapsulation):QR(v,y,function KDe(c){const a=c.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(y)),b=this.componentDef.onPush?288:272,C=DF(0,null,null,1,0,null,null,null,null,null),x=DD(null,C,null,b,null,null,g,v,m,p,null);let w,O;CR(x);try{const D=this.componentDef;let T,M=null;D.findHostDirectiveDefs?(T=[],M=new Map,D.findHostDirectiveDefs(D,T,M),T.push(D)):T=[D];const k=function tTe(c,a){const l=c[1];return c[22]=a,hy(l,22,2,"#host",null)}(x,_),E=function nTe(c,a,l,h,d,f,p,g){const m=d[1];!function iTe(c,a,l,h){for(const d of c)a.mergedAttrs=xC(a.mergedAttrs,d.hostAttrs);null!==a.mergedAttrs&&(ED(a,a.mergedAttrs,!0),null!==l&&pZ(h,l,a))}(h,c,a,p);const v=f.createRenderer(a,l),y=DD(d,oq(l),null,l.onPush?32:16,d[c.index],c,f,v,g||null,null,null);return m.firstCreatePass&&kF(m,c,h.length-1),kD(d,y),d[c.index]=y}(k,_,D,T,x,g,v);O=tj(C,22),_&&function sTe(c,a,l,h){if(h)OR(c,l,["ng-version",z2e.full]);else{const{attrs:d,classes:f}=function oDe(c){const a=[],l=[];let h=1,d=2;for(;h<c.length;){let f=c[h];if("string"==typeof f)2===d?""!==f&&a.push(f,c[++h]):8===d&&l.push(f);else{if(!Zu(d))break;d=f}h++}return{attrs:a,classes:l}}(a.selectors[0]);d&&OR(c,l,d),f&&f.length>0&&fZ(c,l,f.join(" "))}}(v,D,_,h),void 0!==l&&function oTe(c,a,l){const h=c.projection=[];for(let d=0;d<a.length;d++){const f=l[d];h.push(null!=f?Array.from(f):null)}}(O,this.ngContentSelectors,l),w=function rTe(c,a,l,h,d,f){const p=da(),g=d[1],m=fc(p,d);hq(g,d,p,l,null,h);for(let y=0;y<l.length;y++)Ma(vm(d,g,p.directiveStart+y,p),d);dq(g,d,p),m&&Ma(m,d);const v=vm(d,g,p.directiveStart+p.componentOffset,p);if(c[8]=d[8]=v,null!==f)for(const y of f)y(v,a);return xF(g,p,c),v}(E,D,T,M,x,[aTe]),SF(C,x,null)}finally{SR()}return new eTe(this.componentType,w,sy(O,x),x,O)}}class eTe extends R2e{constructor(a,l,h,d,f){super(),this.location=h,this._rootLView=d,this._tNode=f,this.instance=l,this.hostView=this.changeDetectorRef=new YDe(d),this.componentType=a}setInput(a,l){const h=this._tNode.inputs;let d;if(null!==h&&(d=h[a])){const f=this._rootLView;PF(f[1],f,d,a,l),uq(f,this._tNode.index)}}get injector(){return new Xv(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function aTe(){const c=da();nD(Ft()[1],c)}function vn(c){let a=function bq(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),l=!0;const h=[c];for(;a;){let d;if(ju(c))d=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new xt(903,!1);d=a.\u0275dir}if(d){if(l){h.push(d);const p=c;p.inputs=RF(c.inputs),p.declaredInputs=RF(c.declaredInputs),p.outputs=RF(c.outputs);const g=d.hostBindings;g&&hTe(c,g);const m=d.viewQuery,v=d.contentQueries;if(m&&cTe(c,m),v&&uTe(c,v),eR(c.inputs,d.inputs),eR(c.declaredInputs,d.declaredInputs),eR(c.outputs,d.outputs),ju(d)&&d.data.animation){const y=c.data;y.animation=(y.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let p=0;p<f.length;p++){const g=f[p];g&&g.ngInherit&&g(c),g===vn&&(l=!1)}}a=Object.getPrototypeOf(a)}!function lTe(c){let a=0,l=null;for(let h=c.length-1;h>=0;h--){const d=c[h];d.hostVars=a+=d.hostVars,d.hostAttrs=xC(d.hostAttrs,l=xC(l,d.hostAttrs))}}(h)}function RF(c){return c===ff?{}:c===Dr?[]:c}function cTe(c,a){const l=c.viewQuery;c.viewQuery=l?(h,d)=>{a(h,d),l(h,d)}:a}function uTe(c,a){const l=c.contentQueries;c.contentQueries=l?(h,d,f)=>{a(h,d,f),l(h,d,f)}:a}function hTe(c,a){const l=c.hostBindings;c.hostBindings=l?(h,d)=>{a(h,d),l(h,d)}:a}function au(c){return a=>{a.findHostDirectiveDefs=Cq,a.hostDirectives=(Array.isArray(c)?c:c()).map(l=>"function"==typeof l?{directive:li(l),inputs:ff,outputs:ff}:{directive:li(l.directive),inputs:Sq(l.inputs),outputs:Sq(l.outputs)})}}function Cq(c,a,l){if(null!==c.hostDirectives)for(const h of c.hostDirectives){const d=Da(h.directive);gTe(d.declaredInputs,h.inputs),Cq(d,a,l),l.set(d,h),a.push(d)}}function Sq(c){if(void 0===c||0===c.length)return ff;const a={};for(let l=0;l<c.length;l+=2)a[c[l]]=c[l+1];return a}function gTe(c,a){for(const l in a)a.hasOwnProperty(l)&&(c[a[l]]=c[l])}let ID=null;function xm(){if(!ID){const c=ss.Symbol;if(c&&c.iterator)ID=c.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const h=a[l];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(ID=h)}}}return ID}function PD(c){return!!FF(c)&&(Array.isArray(c)||!(c instanceof Map)&&xm()in c)}function FF(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function Kh(c,a,l){return c[a]=l}function UC(c,a){return c[a]}function Ea(c,a,l){return!Object.is(c[a],l)&&(c[a]=l,!0)}function wm(c,a,l,h){const d=Ea(c,a,l);return Ea(c,a+1,h)||d}function RD(c,a,l,h,d){const f=wm(c,a,l,h);return Ea(c,a+2,d)||f}function lu(c,a,l,h,d,f){const p=wm(c,a,l,h);return wm(c,a+2,d,f)||p}function ot(c,a,l,h){const d=Ft();return Ea(d,Zv(),a)&&(gr(),Yh(Es(),d,c,a,l,h)),ot}function fy(c,a,l,h){return Ea(c,Zv(),l)?a+ki(l)+h:Ei}function K(c,a,l,h,d,f,p,g){const m=Ft(),v=gr(),y=c+22,_=v.firstCreatePass?function bTe(c,a,l,h,d,f,p,g,m){const v=a.consts,y=hy(a,c,4,p||null,Ip(v,g));TF(a,l,y,Ip(v,m)),nD(a,y);const _=y.tViews=DF(2,y,h,d,f,a.directiveRegistry,a.pipeRegistry,null,a.schemas,v);return null!==a.queries&&(a.queries.template(a,y),_.queries=a.queries.embeddedTView(y)),y}(y,v,m,a,l,h,d,f,p):v.data[y];Zh(_,!1);const b=m[11].createComment("");mD(v,m,b,_),Ma(b,m),kD(m,m[y]=fq(b,m,b,_)),J2(_)&&wF(v,m,_),null!=p&&OF(m,_,g)}function po(c){return jv(function Ewe(){return Mi.lFrame.contextLView}(),22+c)}function L(c,a,l){const h=Ft();return Ea(h,Zv(),a)&&vc(gr(),Es(),h,c,a,h[11],l,!1),L}function LF(c,a,l,h,d){const p=d?"class":"style";PF(c,l,a.inputs[p],p,h)}function R(c,a,l,h){const d=Ft(),f=gr(),p=22+c,g=d[11],m=d[p]=QR(g,a,function Vwe(){return Mi.lFrame.currentNamespace}()),v=f.firstCreatePass?function STe(c,a,l,h,d,f,p){const g=a.consts,v=hy(a,c,2,d,Ip(g,f));return TF(a,l,v,Ip(g,p)),null!==v.attrs&&ED(v,v.attrs,!1),null!==v.mergedAttrs&&ED(v,v.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,v),v}(p,f,d,0,a,l,h):f.data[p];return Zh(v,!0),pZ(g,m,v),32!=(32&v.flags)&&mD(f,d,m,v),0===function Owe(){return Mi.lFrame.elementDepthCount}()&&Ma(m,d),function Dwe(){Mi.lFrame.elementDepthCount++}(),J2(v)&&(wF(f,d,v),xF(f,v,d)),null!==h&&OF(d,v),R}function N(){let c=da();mR()?vR():(c=c.parent,Zh(c,!1));const a=c;!function Twe(){Mi.lFrame.elementDepthCount--}();const l=gr();return l.firstCreatePass&&(nD(l,c),fR(c)&&l.queries.elementEnd(c)),null!=a.classesWithoutHost&&function $we(c){return 0!=(8&c.flags)}(a)&&LF(l,a,Ft(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Wwe(c){return 0!=(16&c.flags)}(a)&&LF(l,a,Ft(),a.stylesWithoutHost,!1),N}function pe(c,a,l,h){return R(c,a,l,h),N(),pe}function Xr(c,a,l){const h=Ft(),d=gr(),f=c+22,p=d.firstCreatePass?function xTe(c,a,l,h,d){const f=a.consts,p=Ip(f,h),g=hy(a,c,8,"ng-container",p);return null!==p&&ED(g,p,!0),TF(a,l,g,Ip(f,d)),null!==a.queries&&a.queries.elementStart(a,g),g}(f,d,h,a,l):d.data[f];Zh(p,!0);const g=h[f]=h[11].createComment("");return mD(d,h,g,p),Ma(g,h),J2(p)&&(wF(d,h,p),xF(d,p,h)),null!=l&&OF(h,p),Xr}function Yr(){let c=da();const a=gr();return mR()?vR():(c=c.parent,Zh(c,!1)),a.firstCreatePass&&(nD(a,c),fR(c)&&a.queries.elementEnd(c)),Yr}function Yo(c,a,l){return Xr(c,a,l),Yr(),Yo}function ct(){return Ft()}function zC(c){return!!c&&"function"==typeof c.then}function Pq(c){return!!c&&"function"==typeof c.subscribe}const NF=Pq;function ie(c,a,l,h){const d=Ft(),f=gr(),p=da();return function Rq(c,a,l,h,d,f,p){const g=J2(h),v=c.firstCreatePass&&gq(c),y=a[8],_=pq(a);let b=!0;if(3&h.type||p){const w=fc(h,a),O=p?p(w):w,D=_.length,T=p?k=>p(ha(k[h.index])):h.index;let M=null;if(!p&&g&&(M=function wTe(c,a,l,h){const d=c.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const p=d[f];if(p===l&&d[f+1]===h){const g=a[7],m=d[f+2];return g.length>m?g[m]:null}"string"==typeof p&&(f+=2)}return null}(c,a,d,h.index)),null!==M)(M.__ngLastListenerFn__||M).__ngNextListenerFn__=f,M.__ngLastListenerFn__=f,b=!1;else{f=Lq(h,a,y,f,!1);const k=l.listen(O,d,f);_.push(f,k),v&&v.push(d,T,D,D+1)}}else f=Lq(h,a,y,f,!1);const C=h.outputs;let x;if(b&&null!==C&&(x=C[d])){const w=x.length;if(w)for(let O=0;O<w;O+=2){const E=a[x[O]][x[O+1]].subscribe(f),P=_.length;_.push(f,E),v&&v.push(d,h.index,P,-(P+1))}}}(f,d,d[11],p,c,a,h),ie}function Fq(c,a,l,h){try{return!1!==l(h)}catch(d){return vq(c,d),!1}}function Lq(c,a,l,h,d){return function f(p){if(p===Function)return h;AF(c.componentOffset>-1?pc(c.index,a):a);let m=Fq(a,0,h,p),v=f.__ngNextListenerFn__;for(;v;)m=Fq(a,0,v,p)&&m,v=v.__ngNextListenerFn__;return d&&!1===m&&(p.preventDefault(),p.returnValue=!1),m}}function q(c=1){return function Fwe(c){return(Mi.lFrame.contextLView=function Lwe(c,a){for(;c>0;)a=a[15],c--;return a}(c,Mi.lFrame.contextLView))[8]}(c)}function OTe(c,a){let l=null;const h=function eDe(c){const a=c.attrs;if(null!=a){const l=a.indexOf(5);if(!(1&l))return a[l+1]}return null}(c);for(let d=0;d<a.length;d++){const f=a[d];if("*"!==f){if(null===h?$Z(c,f,!0):iDe(h,f))return d}else l=d}return l}function dn(c){const a=Ft()[16][6];if(!a.projection){const h=a.projection=TC(c?c.length:1,null),d=h.slice();let f=a.child;for(;null!==f;){const p=c?OTe(f,c):0;null!==p&&(d[p]?d[p].projectionNext=f:h[p]=f,d[p]=f),f=f.next}}}function bt(c,a=0,l){const h=Ft(),d=gr(),f=hy(d,22+c,16,null,l||null);null===f.projection&&(f.projection=a),vR(),32!=(32&f.flags)&&function ZOe(c,a,l){dZ(a[11],0,a,l,iZ(c,l,a),aZ(l.parent||a[6],l,a))}(d,h,f)}function Cy(c,a,l){return Sy(c,"",a,"",l),Cy}function Sy(c,a,l,h,d){const f=Ft(),p=fy(f,a,l,h);return p!==Ei&&vc(gr(),Es(),f,c,p,f[11],d,!1),Sy}function FD(c,a){return c<<17|a<<2}function Lp(c){return c>>17&32767}function VF(c){return 2|c}function Om(c){return(131068&c)>>2}function UF(c,a){return-131069&c|a<<2}function zF(c){return 1|c}function Gq(c,a,l,h,d){const f=c[l+1],p=null===a;let g=h?Lp(f):Om(f),m=!1;for(;0!==g&&(!1===m||p);){const y=c[g+1];ATe(c[g],a)&&(m=!0,c[g+1]=h?zF(y):VF(y)),g=h?Lp(y):Om(y)}m&&(c[l+1]=h?VF(f):zF(f))}function ATe(c,a){return null===c||null==a||(Array.isArray(c)?c[1]:c)===a||!(!Array.isArray(c)||"string"!=typeof a)&&ty(c,a)>=0}const Po={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qq(c){return c.substring(Po.key,Po.keyEnd)}function jq(c,a){const l=Po.textEnd;return l===a?-1:(a=Po.keyEnd=function FTe(c,a,l){for(;a<l&&c.charCodeAt(a)>32;)a++;return a}(c,Po.key=a,l),xy(c,a,l))}function xy(c,a,l){for(;a<l&&c.charCodeAt(a)<=32;)a++;return a}function Nt(c,a){return function qu(c,a,l,h){const d=Ft(),f=gr(),p=vf(2);f.firstUpdatePass&&Jq(f,c,p,h),a!==Ei&&Ea(d,p,a)&&tX(f,f.data[il()],d,d[11],c,d[p+1]=function GTe(c,a){return null==c||("string"==typeof a?c+=a:"object"==typeof c&&(c=is(Fp(c)))),c}(a,l),h,p)}(c,a,null,!0),Nt}function HF(c){!function Xu(c,a,l,h){const d=gr(),f=vf(2);d.firstUpdatePass&&Jq(d,null,f,h);const p=Ft();if(l!==Ei&&Ea(p,f,l)){const g=d.data[il()];if(iX(g,h)&&!Kq(d,f)){let m=h?g.classesWithoutHost:g.stylesWithoutHost;null!==m&&(l=tR(m,l||"")),LF(d,g,p,l,h)}else!function WTe(c,a,l,h,d,f,p,g){d===Ei&&(d=Dr);let m=0,v=0,y=0<d.length?d[0]:null,_=0<f.length?f[0]:null;for(;null!==y||null!==_;){const b=m<d.length?d[m+1]:void 0,C=v<f.length?f[v+1]:void 0;let w,x=null;y===_?(m+=2,v+=2,b!==C&&(x=_,w=C)):null===_||null!==y&&y<_?(m+=2,x=y):(v+=2,x=_,w=C),null!==x&&tX(c,a,l,h,x,w,p,g),y=m<d.length?d[m]:null,_=v<f.length?f[v]:null}}(d,g,p,p[11],p[f+1],p[f+1]=function $Te(c,a,l){if(null==l||""===l)return Dr;const h=[],d=Fp(l);if(Array.isArray(d))for(let f=0;f<d.length;f++)c(h,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&c(h,f,d[f]);else"string"==typeof d&&a(h,d);return h}(c,a,l),h,f)}}(mc,ed,c,!0)}function ed(c,a){for(let l=function PTe(c){return function qq(c){Po.key=0,Po.keyEnd=0,Po.value=0,Po.valueEnd=0,Po.textEnd=c.length}(c),jq(c,xy(c,0,Po.textEnd))}(a);l>=0;l=jq(a,l))mc(c,Qq(a),!0)}function Kq(c,a){return a>=c.expandoStartIndex}function Jq(c,a,l,h){const d=c.data;if(null===d[l+1]){const f=d[il()],p=Kq(c,l);iX(f,h)&&null===a&&!p&&(a=!1),a=function VTe(c,a,l,h){const d=function _R(c){const a=Mi.lFrame.currentDirectiveIndex;return-1===a?null:c[a]}(c);let f=h?a.residualClasses:a.residualStyles;if(null===d)0===(h?a.classBindings:a.styleBindings)&&(l=HC(l=$F(null,c,a,l,h),a.attrs,h),f=null);else{const p=a.directiveStylingLast;if(-1===p||c[p]!==d)if(l=$F(d,c,a,l,h),null===f){let m=function UTe(c,a,l){const h=l?a.classBindings:a.styleBindings;if(0!==Om(h))return c[Lp(h)]}(c,a,h);void 0!==m&&Array.isArray(m)&&(m=$F(null,c,a,m[1],h),m=HC(m,a.attrs,h),function zTe(c,a,l,h){c[Lp(l?a.classBindings:a.styleBindings)]=h}(c,a,h,m))}else f=function HTe(c,a,l){let h;const d=a.directiveEnd;for(let f=1+a.directiveStylingLast;f<d;f++)h=HC(h,c[f].hostAttrs,l);return HC(h,a.attrs,l)}(c,a,h)}return void 0!==f&&(h?a.residualClasses=f:a.residualStyles=f),l}(d,f,a,h),function MTe(c,a,l,h,d,f){let p=f?a.classBindings:a.styleBindings,g=Lp(p),m=Om(p);c[h]=l;let y,v=!1;if(Array.isArray(l)?(y=l[1],(null===y||ty(l,y)>0)&&(v=!0)):y=l,d)if(0!==m){const b=Lp(c[g+1]);c[h+1]=FD(b,g),0!==b&&(c[b+1]=UF(c[b+1],h)),c[g+1]=function TTe(c,a){return 131071&c|a<<17}(c[g+1],h)}else c[h+1]=FD(g,0),0!==g&&(c[g+1]=UF(c[g+1],h)),g=h;else c[h+1]=FD(m,0),0===g?g=h:c[m+1]=UF(c[m+1],h),m=h;v&&(c[h+1]=VF(c[h+1])),Gq(c,y,h,!0),Gq(c,y,h,!1),function ETe(c,a,l,h,d){const f=d?c.residualClasses:c.residualStyles;null!=f&&"string"==typeof a&&ty(f,a)>=0&&(l[h+1]=zF(l[h+1]))}(a,y,c,h,f),p=FD(g,m),f?a.classBindings=p:a.styleBindings=p}(d,f,a,l,p,h)}}function $F(c,a,l,h,d){let f=null;const p=l.directiveEnd;let g=l.directiveStylingLast;for(-1===g?g=l.directiveStart:g++;g<p&&(f=a[g],h=HC(h,f.hostAttrs,d),f!==c);)g++;return null!==c&&(l.directiveStylingLast=g),h}function HC(c,a,l){const h=l?1:2;let d=-1;if(null!==a)for(let f=0;f<a.length;f++){const p=a[f];"number"==typeof p?d=p:d===h&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),mc(c,p,!!l||a[++f]))}return void 0===c?null:c}function tX(c,a,l,h,d,f,p,g){if(!(3&a.type))return;const m=c.data,v=m[g+1],y=function kTe(c){return 1==(1&c)}(v)?nX(m,a,l,d,Om(v),p):void 0;ND(y)||(ND(f)||function DTe(c){return 2==(2&c)}(v)&&(f=nX(m,null,l,d,g,p)),function XOe(c,a,l,h,d){if(a)d?c.addClass(l,h):c.removeClass(l,h);else{let f=-1===h.indexOf("-")?void 0:$l.DashCase;null==d?c.removeStyle(l,h,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=$l.Important),c.setStyle(l,h,d,f))}}(h,p,eD(il(),l),d,f))}function nX(c,a,l,h,d,f){const p=null===a;let g;for(;d>0;){const m=c[d],v=Array.isArray(m),y=v?m[1]:m,_=null===y;let b=l[d+1];b===Ei&&(b=_?Dr:void 0);let C=_?IR(b,h):y===h?b:void 0;if(v&&!ND(C)&&(C=IR(m,h)),ND(C)&&(g=C,p))return g;const x=c[d+1];d=p?Lp(x):Om(x)}if(null!==a){let m=f?a.residualClasses:a.residualStyles;null!=m&&(g=IR(m,h))}return g}function ND(c){return void 0!==c}function iX(c,a){return 0!=(c.flags&(a?8:16))}function se(c,a=""){const l=Ft(),h=gr(),d=c+22,f=h.firstCreatePass?hy(h,d,1,a,null):h.data[d],p=l[d]=function GR(c,a){return c.createText(a)}(l[11],a);mD(h,l,p,f),Zh(f,!1)}function Ht(c){return gi("",c,""),Ht}function gi(c,a,l){const h=Ft(),d=fy(h,c,a,l);return d!==Ei&&bf(h,il(),d),gi}function $C(c,a,l,h,d){const f=Ft(),p=function py(c,a,l,h,d,f){const g=wm(c,mf(),l,d);return vf(2),g?a+ki(l)+h+ki(d)+f:Ei}(f,c,a,l,h,d);return p!==Ei&&bf(f,il(),p),$C}function WC(c,a,l,h,d,f,p){const g=Ft(),m=function gy(c,a,l,h,d,f,p,g){const v=RD(c,mf(),l,d,p);return vf(3),v?a+ki(l)+h+ki(d)+f+ki(p)+g:Ei}(g,c,a,l,h,d,f,p);return m!==Ei&&bf(g,il(),m),WC}function td(c,a,l){const h=Ft();return Ea(h,Zv(),a)&&vc(gr(),Es(),h,c,a,h[11],l,!0),td}let wy={};var yn=(()=>((yn=yn||{})[yn.LocaleId=0]="LocaleId",yn[yn.DayPeriodsFormat=1]="DayPeriodsFormat",yn[yn.DayPeriodsStandalone=2]="DayPeriodsStandalone",yn[yn.DaysFormat=3]="DaysFormat",yn[yn.DaysStandalone=4]="DaysStandalone",yn[yn.MonthsFormat=5]="MonthsFormat",yn[yn.MonthsStandalone=6]="MonthsStandalone",yn[yn.Eras=7]="Eras",yn[yn.FirstDayOfWeek=8]="FirstDayOfWeek",yn[yn.WeekendRange=9]="WeekendRange",yn[yn.DateFormat=10]="DateFormat",yn[yn.TimeFormat=11]="TimeFormat",yn[yn.DateTimeFormat=12]="DateTimeFormat",yn[yn.NumberSymbols=13]="NumberSymbols",yn[yn.NumberFormats=14]="NumberFormats",yn[yn.CurrencyCode=15]="CurrencyCode",yn[yn.CurrencySymbol=16]="CurrencySymbol",yn[yn.CurrencyName=17]="CurrencyName",yn[yn.Currencies=18]="Currencies",yn[yn.Directionality=19]="Directionality",yn[yn.PluralCase=20]="PluralCase",yn[yn.ExtraData=21]="ExtraData",yn))();const Oy="en-US";let CX=Oy;function jF(c,a,l,h,d){if(c=li(c),Array.isArray(c))for(let f=0;f<c.length;f++)jF(c[f],a,l,h,d);else{const f=gr(),p=Ft();let g=Cm(c)?c:li(c.provide),m=LZ(c);const v=da(),y=1048575&v.providerIndexes,_=v.directiveStart,b=v.providerIndexes>>20;if(Cm(c)||!c.multi){const C=new SC(m,d,z),x=qF(g,a,d?y:y+b,_);-1===x?(MR(lD(v,p),f,g),ZF(f,c,a.length),a.push(g),v.directiveStart++,v.directiveEnd++,d&&(v.providerIndexes+=1048576),l.push(C),p.push(C)):(l[x]=C,p[x]=C)}else{const C=qF(g,a,y+b,_),x=qF(g,a,y,y+b),O=x>=0&&l[x];if(d&&!O||!d&&!(C>=0&&l[C])){MR(lD(v,p),f,g);const D=function uMe(c,a,l,h,d){const f=new SC(c,l,z);return f.multi=[],f.index=a,f.componentProviders=0,QX(f,d,h&&!l),f}(d?cMe:lMe,l.length,d,h,m);!d&&O&&(l[x].providerFactory=D),ZF(f,c,a.length,0),a.push(g),v.directiveStart++,v.directiveEnd++,d&&(v.providerIndexes+=1048576),l.push(D),p.push(D)}else ZF(f,c,C>-1?C:x,QX(l[d?x:C],m,!d&&h));!d&&h&&O&&l[x].componentProviders++}}}function ZF(c,a,l,h){const d=Cm(a),f=function T2e(c){return!!c.useClass}(a);if(d||f){const m=(f?li(a.useClass):a).prototype.ngOnDestroy;if(m){const v=c.destroyHooks||(c.destroyHooks=[]);if(!d&&a.multi){const y=v.indexOf(l);-1===y?v.push(l,[h,m]):v[y+1].push(h,m)}else v.push(l,m)}}}function QX(c,a,l){return l&&c.componentProviders++,c.multi.push(a)-1}function qF(c,a,l,h){for(let d=l;d<h;d++)if(a[d]===c)return d;return-1}function lMe(c,a,l,h){return XF(this.multi,[])}function cMe(c,a,l,h){const d=this.multi;let f;if(this.providerFactory){const p=this.providerFactory.componentProviders,g=vm(l,l[1],this.providerFactory.index,h);f=g.slice(0,p),XF(d,f);for(let m=p;m<g.length;m++)f.push(g[m])}else f=[],XF(d,f);return f}function XF(c,a){for(let l=0;l<c.length;l++)a.push((0,c[l])());return a}function _n(c,a=[]){return l=>{l.providersResolver=(h,d)=>function aMe(c,a,l){const h=gr();if(h.firstCreatePass){const d=ju(c);jF(l,h.data,h.blueprint,d,!0),jF(a,h.data,h.blueprint,d,!1)}}(h,d?d(c):c,a)}}class Dy{}class jX{}class ZX extends Dy{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yq(this);const h=hc(a);this._bootstrapComponents=_f(h.bootstrap),this._r3Injector=XZ(a,l,[{provide:Dy,useValue:this},{provide:Sm,useValue:this.componentFactoryResolver}],is(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class YF extends jX{constructor(a){super(),this.moduleType=a}create(a){return new ZX(this.moduleType,a)}}class dMe extends Dy{constructor(a,l,h){super(),this.componentFactoryResolver=new yq(this),this.instance=null;const d=new FZ([...a,{provide:Dy,useValue:this},{provide:Sm,useValue:this.componentFactoryResolver}],l||wD(),h,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function HD(c,a,l=null){return new dMe(c,a,l).injector}let fMe=(()=>{class c{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const h=AZ(0,l.type),d=h.length>0?HD([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,d)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return c.\u0275prov=Xe({token:c,providedIn:"environment",factory:()=>new c(Pe(Xh))}),c})();function qX(c){c.getStandaloneInjector=a=>a.get(fMe).getOrCreateStandaloneInjector(c)}function yc(c,a,l){const h=nl()+c,d=Ft();return d[h]===Ei?Kh(d,h,l?a.call(l):a()):UC(d,h)}function ds(c,a,l,h){return rY(Ft(),nl(),c,a,l,h)}function Wr(c,a,l,h,d){return function sY(c,a,l,h,d,f,p){const g=a+l;return wm(c,g,d,f)?Kh(c,g+2,p?h.call(p,d,f):h(d,f)):XC(c,g+2)}(Ft(),nl(),c,a,l,h,d)}function nY(c,a,l,h,d,f){return function oY(c,a,l,h,d,f,p,g){const m=a+l;return RD(c,m,d,f,p)?Kh(c,m+3,g?h.call(g,d,f,p):h(d,f,p)):XC(c,m+3)}(Ft(),nl(),c,a,l,h,d,f)}function $D(c,a,l,h,d,f,p){return function aY(c,a,l,h,d,f,p,g,m){const v=a+l;return lu(c,v,d,f,p,g)?Kh(c,v+4,m?h.call(m,d,f,p,g):h(d,f,p,g)):XC(c,v+4)}(Ft(),nl(),c,a,l,h,d,f,p)}function XC(c,a){const l=c[a];return l===Ei?void 0:l}function rY(c,a,l,h,d,f){const p=a+l;return Ea(c,p,d)?Kh(c,p+1,f?h.call(f,d):h(d)):XC(c,p+1)}function YC(c,a){const l=gr();let h;const d=c+22;l.firstCreatePass?(h=function DMe(c,a){if(a)for(let l=a.length-1;l>=0;l--){const h=a[l];if(c===h.name)return h}}(a,l.pipeRegistry),l.data[d]=h,h.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(d,h.onDestroy)):h=l.data[d];const f=h.factory||(h.factory=gm(h.type)),p=ru(z);try{const g=aD(!1),m=f();return aD(g),function CTe(c,a,l,h){l>=c.data.length&&(c.data[l]=null,c.blueprint[l]=null),a[l]=h}(l,Ft(),d,m),m}finally{ru(p)}}function KC(c,a,l){const h=c+22,d=Ft(),f=jv(d,h);return function JC(c,a){return c[1].data[a].pure}(d,h)?rY(d,nl(),a,f.transform,l,f):f.transform(l)}function JF(c){return a=>{setTimeout(c,void 0,a)}}const Mt=class AMe extends Tt{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,h){let d=a,f=l||(()=>null),p=h;if(a&&"object"==typeof a){const m=a;d=m.next?.bind(m),f=m.error?.bind(m),p=m.complete?.bind(m)}this.__isAsync&&(f=JF(f),d&&(d=JF(d)),p&&(p=JF(p)));const g=super.subscribe({next:d,error:f,complete:p});return a instanceof Re&&a.add(g),g}};function IMe(){return this._results[xm()]()}class eL{get changes(){return this._changes||(this._changes=new Mt)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=xm(),h=eL.prototype;h[l]||(h[l]=IMe)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const h=this;h.dirty=!1;const d=function ou(c){return c.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function eOe(c,a,l){if(c.length!==a.length)return!1;for(let h=0;h<c.length;h++){let d=c[h],f=a[h];if(l&&(d=l(d),f=l(f)),f!==d)return!1}return!0}(h._results,d,l))&&(h._results=d,h.length=d.length,h.last=d[this.length-1],h.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cs=(()=>{class c{}return c.__NG_ELEMENT_ID__=FMe,c})();const PMe=Cs,RMe=class extends PMe{constructor(a,l,h){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(a,l){const h=this._declarationTContainer.tViews,d=DD(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,l||null);d[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(d[19]=p.createEmbeddedView(h)),SF(h,d,a),new BC(d)}};function FMe(){return WD(da(),Ft())}function WD(c,a){return 4&c.type?new RMe(a,c,sy(c,a)):null}let Ki=(()=>{class c{}return c.__NG_ELEMENT_ID__=LMe,c})();function LMe(){return hY(da(),Ft())}const NMe=Ki,cY=class extends NMe{constructor(a,l,h){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=h}get element(){return sy(this._hostTNode,this._hostLView)}get injector(){return new Xv(this._hostTNode,this._hostLView)}get parentInjector(){const a=kR(this._hostTNode,this._hostLView);if(bj(a)){const l=oD(a,this._hostLView),h=sD(a);return new Xv(l[1].data[h+8],l)}return new Xv(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=uY(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,h){let d,f;"number"==typeof h?d=h:null!=h&&(d=h.index,f=h.injector);const p=a.createEmbeddedView(l||{},f);return this.insert(p,d),p}createComponent(a,l,h,d,f){const p=a&&!function DC(c){return"function"==typeof c}(a);let g;if(p)g=l;else{const _=l||{};g=_.index,h=_.injector,d=_.projectableNodes,f=_.environmentInjector||_.ngModuleRef}const m=p?a:new VC(Ir(a)),v=h||this.parentInjector;if(!f&&null==m.ngModule){const b=(p?v:this.parentInjector).get(Xh,null);b&&(f=b)}const y=m.create(v,d,void 0,f);return this.insert(y.hostView,g),y}insert(a,l){const h=a._lView,d=h[1];if(function wwe(c){return Qu(c[3])}(h)){const y=this.indexOf(a);if(-1!==y)this.detach(y);else{const _=h[3],b=new cY(_,_[6],_[3]);b.detach(b.indexOf(a))}}const f=this._adjustIndex(l),p=this._lContainer;!function HOe(c,a,l,h){const d=10+h,f=l.length;h>0&&(l[d-1][4]=a),h<f-10?(a[4]=l[d],Ij(l,10+h,a)):(l.push(a),a[4]=null),a[3]=l;const p=a[17];null!==p&&l!==p&&function $Oe(c,a){const l=c[9];a[16]!==a[3][3][16]&&(c[2]=!0),null===l?c[9]=[a]:l.push(a)}(p,a);const g=a[19];null!==g&&g.insertView(c),a[2]|=64}(d,h,p,f);const g=XR(f,p),m=h[11],v=gD(m,p[7]);return null!==v&&function VOe(c,a,l,h,d,f){h[0]=d,h[6]=a,IC(c,h,l,1,d,f)}(d,p[6],m,h,v,g),a.attachToViewContainerRef(),Ij(tL(p),f,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=uY(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),h=jR(this._lContainer,l);h&&(hD(tL(this._lContainer),l),nZ(h[1],h))}detach(a){const l=this._adjustIndex(a,-1),h=jR(this._lContainer,l);return h&&null!=hD(tL(this._lContainer),l)?new BC(h):null}_adjustIndex(a,l=0){return a??this.length+l}};function uY(c){return c[8]}function tL(c){return c[8]||(c[8]=[])}function hY(c,a){let l;const h=a[c.index];if(Qu(h))l=h;else{let d;if(8&c.type)d=ha(h);else{const f=a[11];d=f.createComment("");const p=fc(c,a);_m(f,gD(f,p),d,function jOe(c,a){return c.nextSibling(a)}(f,p),!1)}a[c.index]=l=fq(h,a,d,c),kD(a,l)}return new cY(l,c,a)}class nL{constructor(a){this.queryList=a,this.matches=null}clone(){return new nL(this.queryList)}setDirty(){this.queryList.setDirty()}}class iL{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const h=null!==a.contentQueries?a.contentQueries[0]:l.length,d=[];for(let f=0;f<h;f++){const p=l.getByIndex(f);d.push(this.queries[p.indexInDeclarationView].clone())}return new iL(d)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==mY(a,l).matches&&this.queries[l].setDirty()}}class dY{constructor(a,l,h=null){this.predicate=a,this.flags=l,this.read=h}}class rL{constructor(a=[]){this.queries=a}elementStart(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let h=0;h<this.length;h++){const d=null!==l?l.length:0,f=this.getByIndex(h).embeddedTView(a,d);f&&(f.indexInDeclarationView=h,null!==l?l.push(f):l=[f])}return null!==l?new rL(l):null}template(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class sL{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new sL(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let d=0;d<h.length;d++){const f=h[d];this.matchTNodeWithReadOption(a,l,BMe(l,f)),this.matchTNodeWithReadOption(a,l,cD(l,a,f,!1,!1))}else h===Cs?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,cD(l,a,h,!1,!1))}matchTNodeWithReadOption(a,l,h){if(null!==h){const d=this.metadata.read;if(null!==d)if(d===Mn||d===Ki||d===Cs&&4&l.type)this.addMatch(l.index,-2);else{const f=cD(l,a,d,!1,!1);null!==f&&this.addMatch(l.index,f)}else this.addMatch(l.index,h)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function BMe(c,a){const l=c.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===a)return l[h+1];return null}function UMe(c,a,l,h){return-1===l?function VMe(c,a){return 11&c.type?sy(c,a):4&c.type?WD(c,a):null}(a,c):-2===l?function zMe(c,a,l){return l===Mn?sy(a,c):l===Cs?WD(a,c):l===Ki?hY(a,c):void 0}(c,a,h):vm(c,c[1],l,a)}function fY(c,a,l,h){const d=a[19].queries[h];if(null===d.matches){const f=c.data,p=l.matches,g=[];for(let m=0;m<p.length;m+=2){const v=p[m];g.push(v<0?null:UMe(a,f[v],p[m+1],l.metadata.read))}d.matches=g}return d.matches}function oL(c,a,l,h){const d=c.queries.getByIndex(l),f=d.matches;if(null!==f){const p=fY(c,a,d,l);for(let g=0;g<f.length;g+=2){const m=f[g];if(m>0)h.push(p[g/2]);else{const v=f[g+1],y=a[-m];for(let _=10;_<y.length;_++){const b=y[_];b[17]===b[3]&&oL(b[1],b,v,h)}if(null!==y[9]){const _=y[9];for(let b=0;b<_.length;b++){const C=_[b];oL(C[1],C,v,h)}}}}}return h}function jt(c){const a=Ft(),l=gr(),h=cj();bR(h+1);const d=mY(l,h);if(c.dirty&&function xwe(c){return 4==(4&c[2])}(a)===(2==(2&d.metadata.flags))){if(null===d.matches)c.reset([]);else{const f=d.crossesNgTemplate?oL(l,a,h,[]):fY(l,a,d,h);c.reset(f,B2e),c.notifyOnChanges()}return!0}return!1}function mi(c,a,l){const h=gr();h.firstCreatePass&&(gY(h,new dY(c,a,l),-1),2==(2&a)&&(h.staticViewQueries=!0)),pY(h,Ft(),a)}function fi(c,a,l,h){const d=gr();if(d.firstCreatePass){const f=da();gY(d,new dY(a,l,h),f.index),function $Me(c,a){const l=c.contentQueries||(c.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(c.queries.length-1,a)}(d,c),2==(2&l)&&(d.staticContentQueries=!0)}pY(d,Ft(),l)}function Zt(){return function HMe(c,a){return c[19].queries[a].queryList}(Ft(),cj())}function pY(c,a,l){const h=new eL(4==(4&l));aq(c,a,h,h.destroy),null===a[19]&&(a[19]=new iL),a[19].queries.push(new nL(h))}function gY(c,a,l){null===c.queries&&(c.queries=new rL),c.queries.track(new sL(a,l))}function mY(c,a){return c.queries.getByIndex(a)}function fa(c,a){return WD(c,a)}function QD(...c){}const jD=new sn("Application Initializer");let ZD=(()=>{class c{constructor(l){this.appInits=l,this.resolve=QD,this.reject=QD,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,d)=>{this.resolve=h,this.reject=d})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(zC(f))l.push(f);else if(NF(f)){const p=new Promise((g,m)=>{f.subscribe({complete:g,error:m})});l.push(p)}}Promise.all(l).then(()=>{h()}).catch(d=>{this.reject(d)}),0===l.length&&h(),this.initialized=!0}}return c.\u0275fac=function(l){return new(l||c)(Pe(jD,8))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const tS=new sn("AppId",{providedIn:"root",factory:function FY(){return`${hL()}${hL()}${hL()}`}});function hL(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LY=new sn("Platform Initializer"),Ss=new sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),NY=new sn("appBootstrapListener"),BY=new sn("AnimationModuleType");let c4e=(()=>{class c{log(l){console.log(l)}warn(l){console.warn(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const Yu=new sn("LocaleId",{providedIn:"root",factory:()=>Gi(Yu,ci.Optional|ci.SkipSelf)||function u4e(){return typeof $localize<"u"&&$localize.locale||Oy}()});class d4e{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let VY=(()=>{class c{compileModuleSync(l){return new YF(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),f=_f(hc(l).declarations).reduce((p,g)=>{const m=Ir(g);return m&&p.push(new VC(m)),p},[]);return new d4e(h,f)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const g4e=(()=>Promise.resolve(0))();function dL(c){typeof Zone>"u"?g4e.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class Bi{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mt(!1),this.onMicrotaskEmpty=new Mt(!1),this.onStable=new Mt(!1),this.onError=new Mt(!1),typeof Zone>"u")throw new xt(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!h&&l,d.shouldCoalesceRunChangeDetection=h,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function m4e(){let c=ss.requestAnimationFrame,a=ss.cancelAnimationFrame;if(typeof Zone<"u"&&c&&a){const l=c[Zone.__symbol__("OriginalDelegate")];l&&(c=l);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function _4e(c){const a=()=>{!function y4e(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(ss,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,pL(c),c.isCheckStableRunning=!0,fL(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),pL(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,d,f,p,g)=>{try{return HY(c),l.invokeTask(d,f,p,g)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||c.shouldCoalesceRunChangeDetection)&&a(),$Y(c)}},onInvoke:(l,h,d,f,p,g,m)=>{try{return HY(c),l.invoke(d,f,p,g,m)}finally{c.shouldCoalesceRunChangeDetection&&a(),$Y(c)}},onHasTask:(l,h,d,f)=>{l.hasTask(d,f),h===d&&("microTask"==f.change?(c._hasPendingMicrotasks=f.microTask,pL(c),fL(c)):"macroTask"==f.change&&(c.hasPendingMacrotasks=f.macroTask))},onHandleError:(l,h,d,f)=>(l.handleError(d,f),c.runOutsideAngular(()=>c.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bi.isInAngularZone())throw new xt(909,!1)}static assertNotInAngularZone(){if(Bi.isInAngularZone())throw new xt(909,!1)}run(a,l,h){return this._inner.run(a,l,h)}runTask(a,l,h,d){const f=this._inner,p=f.scheduleEventTask("NgZoneEvent: "+d,a,v4e,QD,QD);try{return f.runTask(p,l,h)}finally{f.cancelTask(p)}}runGuarded(a,l,h){return this._inner.runGuarded(a,l,h)}runOutsideAngular(a){return this._outer.run(a)}}const v4e={};function fL(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function pL(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function HY(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function $Y(c){c._nesting--,fL(c)}class b4e{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mt,this.onMicrotaskEmpty=new Mt,this.onStable=new Mt,this.onError=new Mt}run(a,l,h){return a.apply(l,h)}runGuarded(a,l,h){return a.apply(l,h)}runOutsideAngular(a){return a()}runTask(a,l,h,d){return a.apply(l,h)}}const WY=new sn(""),qD=new sn("");let vL,gL=(()=>{class c{constructor(l,h,d){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vL||(function C4e(c){vL=c}(d),d.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bi.assertNotInAngularZone(),dL(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dL(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,d){let f=-1;h&&h>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==f),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:f,updateCb:d})}whenStable(l,h,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,d){return[]}}return c.\u0275fac=function(l){return new(l||c)(Pe(Bi),Pe(mL),Pe(qD))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),mL=(()=>{class c{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return vL?.findTestabilityInTree(this,l,h)??null}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})(),Np=null;const GY=new sn("AllowMultipleToken"),yL=new sn("PlatformDestroyListeners");class QY{constructor(a,l){this.name=a,this.token=l}}function ZY(c,a,l=[]){const h=`Platform: ${a}`,d=new sn(h);return(f=[])=>{let p=_L();if(!p||p.injector.get(GY,!1)){const g=[...l,...f,{provide:d,useValue:!0}];c?c(g):function w4e(c){if(Np&&!Np.get(GY,!1))throw new xt(400,!1);Np=c;const a=c.get(XY);(function jY(c){const a=c.get(LY,null);a&&a.forEach(l=>l())})(c)}(function qY(c=[],a){return As.create({name:a,providers:[{provide:cF,useValue:"platform"},{provide:yL,useValue:new Set([()=>Np=null])},...c]})}(g,h))}return function D4e(c){const a=_L();if(!a)throw new xt(401,!1);return a}()}}function _L(){return Np?.get(XY)??null}let XY=(()=>{class c{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const d=function KY(c,a){let l;return l="noop"===c?new b4e:("zone.js"===c?void 0:c)||new Bi(a),l}(h?.ngZone,function YY(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(h)),f=[{provide:Bi,useValue:d}];return d.run(()=>{const p=As.create({providers:f,parent:this.injector,name:l.moduleType.name}),g=l.create(p),m=g.injector.get(ay,null);if(!m)throw new xt(402,!1);return d.runOutsideAngular(()=>{const v=d.onError.subscribe({next:y=>{m.handleError(y)}});g.onDestroy(()=>{XD(this._modules,g),v.unsubscribe()})}),function JY(c,a,l){try{const h=l();return zC(h)?h.catch(d=>{throw a.runOutsideAngular(()=>c.handleError(d)),d}):h}catch(h){throw a.runOutsideAngular(()=>c.handleError(h)),h}}(m,d,()=>{const v=g.injector.get(ZD);return v.runInitializers(),v.donePromise.then(()=>(function SX(c){iu(c,"Expected localeId to be defined"),"string"==typeof c&&(CX=c.toLowerCase().replace(/_/g,"-"))}(g.injector.get(Yu,Oy)||Oy),this._moduleDoBootstrap(g),g))})})}bootstrapModule(l,h=[]){const d=eK({},h);return function S4e(c,a,l){const h=new YF(l);return Promise.resolve(h)}(0,0,l).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(l){const h=l.injector.get(nS);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(d=>h.bootstrap(d));else{if(!l.instance.ngDoBootstrap)throw new xt(-403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xt(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(yL,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(l){return new(l||c)(Pe(As))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function eK(c,a){return Array.isArray(a)?a.reduce(eK,c):{...c,...a}}let nS=(()=>{class c{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,h,d){this._zone=l,this._injector=h,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new Ke(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),p=new Ke(g=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{Bi.assertNotInAngularZone(),dL(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{Bi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});this.isStable=function z2(...c){const a=dC(c),l=function Vxe(c,a){return"number"==typeof KP(c)?c.pop():a}(c,1/0),h=c;return h.length?1===h.length?Ja(h[0]):Uv(l)(ho(h,a)):Qh}(f,p.pipe(function Qxe(c={}){const{connector:a=(()=>new Tt),resetOnError:l=!0,resetOnComplete:h=!0,resetOnRefCountZero:d=!0}=c;return f=>{let p,g,m,v=0,y=!1,_=!1;const b=()=>{g?.unsubscribe(),g=void 0},C=()=>{b(),p=m=void 0,y=_=!1},x=()=>{const w=p;C(),w?.unsubscribe()};return Yn((w,O)=>{v++,!_&&!y&&b();const D=m=m??a();O.add(()=>{v--,0===v&&!_&&!y&&(g=JP(x,d))}),D.subscribe(O),!p&&v>0&&(p=new Ne({next:T=>D.next(T),error:T=>{_=!0,b(),g=JP(C,l,T),D.error(T)},complete:()=>{y=!0,b(),g=JP(C,h),D.complete()}}),Ja(w).subscribe(p))})(f)}}()))}bootstrap(l,h){const d=l instanceof NZ;if(!this._injector.get(ZD).done)throw!d&&function Hv(c){const a=Ir(c)||Da(c)||el(c);return null!==a&&a.standalone}(l),new xt(405,false);let p;p=d?l:this._injector.get(Sm).resolveComponentFactory(l),this.componentTypes.push(p.componentType);const g=function x4e(c){return c.isBoundToModule}(p)?void 0:this._injector.get(Dy),v=p.create(As.NULL,[],h||p.selector,g),y=v.location.nativeElement,_=v.injector.get(WY,null);return _?.registerApplication(y),v.onDestroy(()=>{this.detachView(v.hostView),XD(this.components,v),_?.unregisterApplication(y)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new xt(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;XD(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const h=this._injector.get(NY,[]);h.push(...this._bootstrapListeners),h.forEach(d=>d(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>XD(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new xt(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(l){return new(l||c)(Pe(Bi),Pe(Xh),Pe(ay))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function XD(c,a){const l=c.indexOf(a);l>-1&&c.splice(l,1)}let Ro=(()=>{class c{}return c.__NG_ELEMENT_ID__=k4e,c})();function k4e(c){return function M4e(c,a,l){if(bC(c)&&!l){const h=pc(c.index,a);return new BC(h,h)}return 47&c.type?new BC(a[16],a):null}(da(),Ft(),16==(16&c))}class sK{constructor(){}supports(a){return PD(a)}create(a){return new F4e(a)}}const R4e=(c,a)=>a;class F4e{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||R4e}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,h=this._removalsHead,d=0,f=null;for(;l||h;){const p=!h||l&&l.currentIndex<aK(h,d,f)?l:h,g=aK(p,d,f),m=p.currentIndex;if(p===h)d--,h=h._nextRemoved;else if(l=l._next,null==p.previousIndex)d++;else{f||(f=[]);const v=g-d,y=m-d;if(v!=y){for(let b=0;b<v;b++){const C=b<f.length?f[b]:f[b]=0,x=C+b;y<=x&&x<v&&(f[b]=C+1)}f[p.previousIndex]=y-v}}g!==m&&a(p,g,m)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!PD(a))throw new xt(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d,f,p,l=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let g=0;g<this.length;g++)f=a[g],p=this._trackByFn(g,f),null!==l&&Object.is(l.trackById,p)?(h&&(l=this._verifyReinsertion(l,f,p,g)),Object.is(l.item,f)||this._addIdentityChange(l,f)):(l=this._mismatch(l,f,p,g),h=!0),l=l._next}else d=0,function vTe(c,a){if(Array.isArray(c))for(let l=0;l<c.length;l++)a(c[l]);else{const l=c[xm()]();let h;for(;!(h=l.next()).done;)a(h.value)}}(a,g=>{p=this._trackByFn(d,g),null!==l&&Object.is(l.trackById,p)?(h&&(l=this._verifyReinsertion(l,g,p,d)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,p,d),h=!0),l=l._next,d++}),this.length=d;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,h,d){let f;return null===a?f=this._itTail:(f=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,f,d)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,d))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,f,d)):a=this._addAfter(new L4e(l,h),f,d),a}_verifyReinsertion(a,l,h,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==f?a=this._reinsertAfter(f,a._prev,d):a.currentIndex!=d&&(a.currentIndex=d,this._addToMoves(a,d)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const d=a._prevRemoved,f=a._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(a,l,h),this._addToMoves(a,h),a}_moveAfter(a,l,h){return this._unlink(a),this._insertAfter(a,l,h),this._addToMoves(a,h),a}_addAfter(a,l,h){return this._insertAfter(a,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,h){const d=null===l?this._itHead:l._next;return a._next=d,a._prev=l,null===d?this._itTail=a:d._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new oK),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,h=a._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oK),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class L4e{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class N4e{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const l=a._prevDup,h=a._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class oK{constructor(){this.map=new Map}put(a){const l=a.trackById;let h=this.map.get(l);h||(h=new N4e,this.map.set(l,h)),h.add(a)}get(a,l){const d=this.map.get(a);return d?d.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aK(c,a,l){const h=c.previousIndex;if(null===h)return h;let d=0;return l&&h<l.length&&(d=l[h]),h+a+d}class lK{constructor(){}supports(a){return a instanceof Map||FF(a)}create(){return new B4e}}class B4e{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||FF(a)))throw new xt(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,d)=>{if(l&&l.key===d)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const f=this._getOrCreateRecordForKey(d,h);l=this._insertBeforeOrAppend(l,f)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const h=a._prev;return l._next=a,l._prev=h,a._prev=l,h&&(h._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const d=this._records.get(a);this._maybeAddToChanges(d,l);const f=d._prev,p=d._next;return f&&(f._next=p),p&&(p._prev=f),d._next=null,d._prev=null,d}const h=new V4e(a);return this._records.set(a,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(h=>l(a[h],h))}}class V4e{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cK(){return new My([new sK])}let My=(()=>{class c{constructor(l){this.factories=l}static create(l,h){if(null!=h){const d=h.factories.slice();l=l.concat(d)}return new c(l)}static extend(l){return{provide:c,useFactory:h=>c.create(l,h||cK()),deps:[[c,new Rp,new Pp]]}}find(l){const h=this.factories.find(d=>d.supports(l));if(null!=h)return h;throw new xt(901,!1)}}return c.\u0275prov=Xe({token:c,providedIn:"root",factory:cK}),c})();function uK(){return new iS([new lK])}let iS=(()=>{class c{constructor(l){this.factories=l}static create(l,h){if(h){const d=h.factories.slice();l=l.concat(d)}return new c(l)}static extend(l){return{provide:c,useFactory:h=>c.create(l,h||uK()),deps:[[c,new Rp,new Pp]]}}find(l){const h=this.factories.find(d=>d.supports(l));if(h)return h;throw new xt(901,!1)}}return c.\u0275prov=Xe({token:c,providedIn:"root",factory:uK}),c})();const H4e=ZY(null,"core",[]);let $4e=(()=>{class c{constructor(l){}}return c.\u0275fac=function(l){return new(l||c)(Pe(nS))},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({}),c})();function Ey(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}let wL=null;function nd(){return wL}class Q4e{}const hr=new sn("DocumentToken");let OL=(()=>{class c{historyGo(l){throw new Error("Not implemented")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:function(){return function j4e(){return Pe(hK)}()},providedIn:"platform"}),c})();const Z4e=new sn("Location Initialized");let hK=(()=>{class c extends OL{constructor(l){super(),this._doc=l,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return nd().getBaseHref(this._doc)}onPopState(l){const h=nd().getGlobalEventTarget(this._doc,"window");return h.addEventListener("popstate",l,!1),()=>h.removeEventListener("popstate",l)}onHashChange(l){const h=nd().getGlobalEventTarget(this._doc,"window");return h.addEventListener("hashchange",l,!1),()=>h.removeEventListener("hashchange",l)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(l){this._location.pathname=l}pushState(l,h,d){dK()?this._history.pushState(l,h,d):this._location.hash=d}replaceState(l,h,d){dK()?this._history.replaceState(l,h,d):this._location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(l=0){this._history.go(l)}getState(){return this._history.state}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr))},c.\u0275prov=Xe({token:c,factory:function(){return function q4e(){return new hK(Pe(hr))}()},providedIn:"platform"}),c})();function dK(){return!!window.history.pushState}function DL(c,a){if(0==c.length)return a;if(0==a.length)return c;let l=0;return c.endsWith("/")&&l++,a.startsWith("/")&&l++,2==l?c+a.substring(1):1==l?c+a:c+"/"+a}function fK(c){const a=c.match(/#|\?|$/),l=a&&a.index||c.length;return c.slice(0,l-("/"===c[l-1]?1:0))+c.slice(l)}function Sf(c){return c&&"?"!==c[0]?"?"+c:c}let km=(()=>{class c{historyGo(l){throw new Error("Not implemented")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:function(){return Gi(gK)},providedIn:"root"}),c})();const pK=new sn("appBaseHref");let gK=(()=>{class c extends km{constructor(l,h){super(),this._platformLocation=l,this._removeListenerFns=[],this._baseHref=h??this._platformLocation.getBaseHrefFromDOM()??Gi(hr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(l){this._removeListenerFns.push(this._platformLocation.onPopState(l),this._platformLocation.onHashChange(l))}getBaseHref(){return this._baseHref}prepareExternalUrl(l){return DL(this._baseHref,l)}path(l=!1){const h=this._platformLocation.pathname+Sf(this._platformLocation.search),d=this._platformLocation.hash;return d&&l?`${h}${d}`:h}pushState(l,h,d,f){const p=this.prepareExternalUrl(d+Sf(f));this._platformLocation.pushState(l,h,p)}replaceState(l,h,d,f){const p=this.prepareExternalUrl(d+Sf(f));this._platformLocation.replaceState(l,h,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(l=0){this._platformLocation.historyGo?.(l)}}return c.\u0275fac=function(l){return new(l||c)(Pe(OL),Pe(pK,8))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),X4e=(()=>{class c extends km{constructor(l,h){super(),this._platformLocation=l,this._baseHref="",this._removeListenerFns=[],null!=h&&(this._baseHref=h)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(l){this._removeListenerFns.push(this._platformLocation.onPopState(l),this._platformLocation.onHashChange(l))}getBaseHref(){return this._baseHref}path(l=!1){let h=this._platformLocation.hash;return null==h&&(h="#"),h.length>0?h.substring(1):h}prepareExternalUrl(l){const h=DL(this._baseHref,l);return h.length>0?"#"+h:h}pushState(l,h,d,f){let p=this.prepareExternalUrl(d+Sf(f));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(l,h,p)}replaceState(l,h,d,f){let p=this.prepareExternalUrl(d+Sf(f));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(l,h,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(l=0){this._platformLocation.historyGo?.(l)}}return c.\u0275fac=function(l){return new(l||c)(Pe(OL),Pe(pK,8))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),TL=(()=>{class c{constructor(l){this._subject=new Mt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=l;const h=this._locationStrategy.getBaseHref();this._basePath=function J4e(c){if(new RegExp("^(https?:)?//").test(c)){const[,l]=c.split(/\/\/[^\/]+/);return l}return c}(fK(mK(h))),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(l=!1){return this.normalize(this._locationStrategy.path(l))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(l,h=""){return this.path()==this.normalize(l+Sf(h))}normalize(l){return c.stripTrailingSlash(function K4e(c,a){return c&&new RegExp(`^${c}([/;?#]|$)`).test(a)?a.substring(c.length):a}(this._basePath,mK(l)))}prepareExternalUrl(l){return l&&"/"!==l[0]&&(l="/"+l),this._locationStrategy.prepareExternalUrl(l)}go(l,h="",d=null){this._locationStrategy.pushState(d,"",l,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(l+Sf(h)),d)}replaceState(l,h="",d=null){this._locationStrategy.replaceState(d,"",l,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(l+Sf(h)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(l=0){this._locationStrategy.historyGo?.(l)}onUrlChange(l){return this._urlChangeListeners.push(l),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(h=>{this._notifyUrlChangeListeners(h.url,h.state)})),()=>{const h=this._urlChangeListeners.indexOf(l);this._urlChangeListeners.splice(h,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(l="",h){this._urlChangeListeners.forEach(d=>d(l,h))}subscribe(l,h,d){return this._subject.subscribe({next:l,error:h,complete:d})}}return c.normalizeQueryParams=Sf,c.joinWithSlash=DL,c.stripTrailingSlash=fK,c.\u0275fac=function(l){return new(l||c)(Pe(km))},c.\u0275prov=Xe({token:c,factory:function(){return function Y4e(){return new TL(Pe(km))}()},providedIn:"root"}),c})();function mK(c){return c.replace(/\/index.html$/,"")}function OK(c,a){a=encodeURIComponent(a);for(const l of c.split(";")){const h=l.indexOf("="),[d,f]=-1==h?[l,""]:[l.slice(0,h),l.slice(h+1)];if(d.trim()===a)return decodeURIComponent(f)}return null}const VL=/\s+/,DK=[];let di=(()=>{class c{constructor(l,h,d,f){this._iterableDiffers=l,this._keyValueDiffers=h,this._ngEl=d,this._renderer=f,this.initialClasses=DK,this.stateMap=new Map}set klass(l){this.initialClasses=null!=l?l.trim().split(VL):DK}set ngClass(l){this.rawClass="string"==typeof l?l.trim().split(VL):l}ngDoCheck(){for(const h of this.initialClasses)this._updateState(h,!0);const l=this.rawClass;if(Array.isArray(l)||l instanceof Set)for(const h of l)this._updateState(h,!0);else if(null!=l)for(const h of Object.keys(l))this._updateState(h,Boolean(l[h]));this._applyStateDiff()}_updateState(l,h){const d=this.stateMap.get(l);void 0!==d?(d.enabled!==h&&(d.changed=!0,d.enabled=h),d.touched=!0):this.stateMap.set(l,{enabled:h,changed:!0,touched:!0})}_applyStateDiff(){for(const l of this.stateMap){const h=l[0],d=l[1];d.changed?(this._toggleClass(h,d.enabled),d.changed=!1):d.touched||(d.enabled&&this._toggleClass(h,!1),this.stateMap.delete(h)),d.touched=!1}}_toggleClass(l,h){(l=l.trim()).length>0&&l.split(VL).forEach(d=>{h?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return c.\u0275fac=function(l){return new(l||c)(z(My),z(iS),z(Mn),z(Yi))},c.\u0275dir=_t({type:c,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),c})();class NEe{constructor(a,l,h,d){this.$implicit=a,this.ngForOf=l,this.index=h,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vi=(()=>{class c{set ngForOf(l){this._ngForOf=l,this._ngForOfDirty=!0}set ngForTrackBy(l){this._trackByFn=l}get ngForTrackBy(){return this._trackByFn}constructor(l,h,d){this._viewContainer=l,this._template=h,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(l){l&&(this._template=l)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const l=this._ngForOf;!this._differ&&l&&(this._differ=this._differs.find(l).create(this.ngForTrackBy))}if(this._differ){const l=this._differ.diff(this._ngForOf);l&&this._applyChanges(l)}}_applyChanges(l){const h=this._viewContainer;l.forEachOperation((d,f,p)=>{if(null==d.previousIndex)h.createEmbeddedView(this._template,new NEe(d.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)h.remove(null===f?void 0:f);else if(null!==f){const g=h.get(f);h.move(g,p),MK(g,d)}});for(let d=0,f=h.length;d<f;d++){const g=h.get(d).context;g.index=d,g.count=f,g.ngForOf=this._ngForOf}l.forEachIdentityChange(d=>{MK(h.get(d.currentIndex),d)})}static ngTemplateContextGuard(l,h){return!0}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(Cs),z(My))},c.\u0275dir=_t({type:c,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),c})();function MK(c,a){c.context.$implicit=a.item}let Sn=(()=>{class c{constructor(l,h){this._viewContainer=l,this._context=new VEe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=h}set ngIf(l){this._context.$implicit=this._context.ngIf=l,this._updateView()}set ngIfThen(l){EK("ngIfThen",l),this._thenTemplateRef=l,this._thenViewRef=null,this._updateView()}set ngIfElse(l){EK("ngIfElse",l),this._elseTemplateRef=l,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(l,h){return!0}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(Cs))},c.\u0275dir=_t({type:c,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),c})();class VEe{constructor(){this.$implicit=null,this.ngIf=null}}function EK(c,a){if(a&&!a.createEmbeddedView)throw new Error(`${c} must be a TemplateRef, but received '${is(a)}'.`)}class UL{constructor(a,l){this._viewContainerRef=a,this._templateRef=l,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(a){a&&!this._created?this.create():!a&&this._created&&this.destroy()}}let aT=(()=>{class c{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(l){this._ngSwitch=l,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(l){this._defaultViews.push(l)}_matchCase(l){const h=l==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||h,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),h}_updateDefaultCases(l){if(this._defaultViews.length>0&&l!==this._defaultUsed){this._defaultUsed=l;for(const h of this._defaultViews)h.enforceState(l)}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),c})(),AK=(()=>{class c{constructor(l,h,d){this.ngSwitch=d,d._addCase(),this._view=new UL(l,h)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(Cs),z(aT,9))},c.\u0275dir=_t({type:c,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),c})(),eh=(()=>{class c{constructor(l){this._viewContainerRef=l,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(l){if(l.ngTemplateOutlet||l.ngTemplateOutletInjector){const h=this._viewContainerRef;if(this._viewRef&&h.remove(h.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:f,ngTemplateOutletInjector:p}=this;this._viewRef=h.createEmbeddedView(d,f,p?{injector:p}:void 0)}else this._viewRef=null}else this._viewRef&&l.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return c.\u0275fac=function(l){return new(l||c)(z(Ki))},c.\u0275dir=_t({type:c,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ro]}),c})();class $Ee{createSubscription(a,l){return a.subscribe({next:l,error:h=>{throw h}})}dispose(a){a.unsubscribe()}}class WEe{createSubscription(a,l){return a.then(l,h=>{throw h})}dispose(a){}}const GEe=new WEe,QEe=new $Ee;let zL=(()=>{class c{constructor(l){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=l}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(l){return this._obj?l!==this._obj?(this._dispose(),this.transform(l)):this._latestValue:(l&&this._subscribe(l),this._latestValue)}_subscribe(l){this._obj=l,this._strategy=this._selectStrategy(l),this._subscription=this._strategy.createSubscription(l,h=>this._updateLatestValue(l,h))}_selectStrategy(l){if(zC(l))return GEe;if(Pq(l))return QEe;throw function th(c,a){return new xt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(l,h){l===this._obj&&(this._latestValue=h,this._ref.markForCheck())}}return c.\u0275fac=function(l){return new(l||c)(z(Ro,16))},c.\u0275pipe=Hl({name:"async",type:c,pure:!1,standalone:!0}),c})(),zi=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({}),c})();const RK="browser";function Tr(c){return c===RK}let fAe=(()=>{class c{}return c.\u0275prov=Xe({token:c,providedIn:"root",factory:()=>new pAe(Pe(hr),window)}),c})();class pAe{constructor(a,l){this.document=a,this.window=l,this.offset=()=>[0,0]}setOffset(a){this.offset=Array.isArray(a)?()=>a:a}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(a){this.supportsScrolling()&&this.window.scrollTo(a[0],a[1])}scrollToAnchor(a){if(!this.supportsScrolling())return;const l=function gAe(c,a){const l=c.getElementById(a)||c.getElementsByName(a)[0];if(l)return l;if("function"==typeof c.createTreeWalker&&c.body&&(c.body.createShadowRoot||c.body.attachShadow)){const h=c.createTreeWalker(c.body,NodeFilter.SHOW_ELEMENT);let d=h.currentNode;for(;d;){const f=d.shadowRoot;if(f){const p=f.getElementById(a)||f.querySelector(`[name="${a}"]`);if(p)return p}d=h.nextNode()}}return null}(this.document,a);l&&(this.scrollToElement(l),l.focus())}setHistoryScrollRestoration(a){if(this.supportScrollRestoration()){const l=this.window.history;l&&l.scrollRestoration&&(l.scrollRestoration=a)}}scrollToElement(a){const l=a.getBoundingClientRect(),h=l.left+this.window.pageXOffset,d=l.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(h-f[0],d-f[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const a=FK(this.window.history)||FK(Object.getPrototypeOf(this.window.history));return!(!a||!a.writable&&!a.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function FK(c){return Object.getOwnPropertyDescriptor(c,"scrollRestoration")}class LK{}class HAe extends Q4e{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class jL extends HAe{static makeCurrent(){!function G4e(c){wL||(wL=c)}(new jL)}onAndCancel(a,l,h){return a.addEventListener(l,h,!1),()=>{a.removeEventListener(l,h,!1)}}dispatchEvent(a,l){a.dispatchEvent(l)}remove(a){a.parentNode&&a.parentNode.removeChild(a)}createElement(a,l){return(l=l||this.getDefaultDocument()).createElement(a)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(a){return a.nodeType===Node.ELEMENT_NODE}isShadowRoot(a){return a instanceof DocumentFragment}getGlobalEventTarget(a,l){return"window"===l?window:"document"===l?a:"body"===l?a.body:null}getBaseHref(a){const l=function $Ae(){return lS=lS||document.querySelector("base"),lS?lS.getAttribute("href"):null}();return null==l?null:function WAe(c){cT=cT||document.createElement("a"),cT.setAttribute("href",c);const a=cT.pathname;return"/"===a.charAt(0)?a:`/${a}`}(l)}resetBaseElement(){lS=null}getUserAgent(){return window.navigator.userAgent}getCookie(a){return OK(document.cookie,a)}}let cT,lS=null;const zK=new sn("TRANSITION_ID"),QAe=[{provide:jD,useFactory:function GAe(c,a,l){return()=>{l.get(ZD).donePromise.then(()=>{const h=nd(),d=a.querySelectorAll(`style[ng-transition="${c}"]`);for(let f=0;f<d.length;f++)h.remove(d[f])})}},deps:[zK,hr,As],multi:!0}];let ZAe=(()=>{class c{build(){return new XMLHttpRequest}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const uT=new sn("EventManagerPlugins");let hT=(()=>{class c{constructor(l,h){this._zone=h,this._eventNameToPlugin=new Map,l.forEach(d=>d.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,h,d){return this._findPluginFor(h).addEventListener(l,h,d)}addGlobalEventListener(l,h,d){return this._findPluginFor(h).addGlobalEventListener(l,h,d)}getZone(){return this._zone}_findPluginFor(l){const h=this._eventNameToPlugin.get(l);if(h)return h;const d=this._plugins;for(let f=0;f<d.length;f++){const p=d[f];if(p.supports(l))return this._eventNameToPlugin.set(l,p),p}throw new Error(`No event manager plugin found for event ${l}`)}}return c.\u0275fac=function(l){return new(l||c)(Pe(uT),Pe(Bi))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();class HK{constructor(a){this._doc=a}addGlobalEventListener(a,l,h){const d=nd().getGlobalEventTarget(this._doc,a);if(!d)throw new Error(`Unsupported event target ${d} for event ${l}`);return this.addEventListener(d,l,h)}}let $K=(()=>{class c{constructor(){this._stylesSet=new Set}addStyles(l){const h=new Set;l.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),h.add(d))}),this.onStylesAdded(h)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),cS=(()=>{class c extends $K{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,h,d){l.forEach(f=>{const p=this._doc.createElement("style");p.textContent=f,d.push(h.appendChild(p))})}addHost(l){const h=[];this._addStylesToHost(this._stylesSet,l,h),this._hostNodes.set(l,h)}removeHost(l){const h=this._hostNodes.get(l);h&&h.forEach(WK),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((h,d)=>{this._addStylesToHost(l,d,h)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(WK))}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();function WK(c){nd().remove(c)}const ZL={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qL=/%COMP%/g;function XL(c,a){return a.flat(100).map(l=>l.replace(qL,c))}function jK(c){return a=>{if("__ngUnwrap__"===a)return c;!1===c(a)&&(a.preventDefault(),a.returnValue=!1)}}let dT=(()=>{class c{constructor(l,h,d){this.eventManager=l,this.sharedStylesHost=h,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new YL(l)}createRenderer(l,h){if(!l||!h)return this.defaultRenderer;switch(h.encapsulation){case Wu.Emulated:{let d=this.rendererByCompId.get(h.id);return d||(d=new e3e(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,d)),d.applyToHost(l),d}case Wu.ShadowDom:return new t3e(this.eventManager,this.sharedStylesHost,l,h);default:if(!this.rendererByCompId.has(h.id)){const d=XL(h.id,h.styles);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return c.\u0275fac=function(l){return new(l||c)(Pe(hT),Pe(cS),Pe(tS))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();class YL{constructor(a){this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(a,l){return l?document.createElementNS(ZL[l]||l,a):document.createElement(a)}createComment(a){return document.createComment(a)}createText(a){return document.createTextNode(a)}appendChild(a,l){(qK(a)?a.content:a).appendChild(l)}insertBefore(a,l,h){a&&(qK(a)?a.content:a).insertBefore(l,h)}removeChild(a,l){a&&a.removeChild(l)}selectRootElement(a,l){let h="string"==typeof a?document.querySelector(a):a;if(!h)throw new Error(`The selector "${a}" did not match any elements`);return l||(h.textContent=""),h}parentNode(a){return a.parentNode}nextSibling(a){return a.nextSibling}setAttribute(a,l,h,d){if(d){l=d+":"+l;const f=ZL[d];f?a.setAttributeNS(f,l,h):a.setAttribute(l,h)}else a.setAttribute(l,h)}removeAttribute(a,l,h){if(h){const d=ZL[h];d?a.removeAttributeNS(d,l):a.removeAttribute(`${h}:${l}`)}else a.removeAttribute(l)}addClass(a,l){a.classList.add(l)}removeClass(a,l){a.classList.remove(l)}setStyle(a,l,h,d){d&($l.DashCase|$l.Important)?a.style.setProperty(l,h,d&$l.Important?"important":""):a.style[l]=h}removeStyle(a,l,h){h&$l.DashCase?a.style.removeProperty(l):a.style[l]=""}setProperty(a,l,h){a[l]=h}setValue(a,l){a.nodeValue=l}listen(a,l,h){return"string"==typeof a?this.eventManager.addGlobalEventListener(a,l,jK(h)):this.eventManager.addEventListener(a,l,jK(h))}}function qK(c){return"TEMPLATE"===c.tagName&&void 0!==c.content}class e3e extends YL{constructor(a,l,h,d){super(a),this.component=h;const f=XL(d+"-"+h.id,h.styles);l.addStyles(f),this.contentAttr=function YAe(c){return"_ngcontent-%COMP%".replace(qL,c)}(d+"-"+h.id),this.hostAttr=function KAe(c){return"_nghost-%COMP%".replace(qL,c)}(d+"-"+h.id)}applyToHost(a){super.setAttribute(a,this.hostAttr,"")}createElement(a,l){const h=super.createElement(a,l);return super.setAttribute(h,this.contentAttr,""),h}}class t3e extends YL{constructor(a,l,h,d){super(a),this.sharedStylesHost=l,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=XL(d.id,d.styles);for(let p=0;p<f.length;p++){const g=document.createElement("style");g.textContent=f[p],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(a){return a===this.hostEl?this.shadowRoot:a}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(a,l){return super.appendChild(this.nodeOrShadowRoot(a),l)}insertBefore(a,l,h){return super.insertBefore(this.nodeOrShadowRoot(a),l,h)}removeChild(a,l){return super.removeChild(this.nodeOrShadowRoot(a),l)}parentNode(a){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(a)))}}let n3e=(()=>{class c extends HK{constructor(l){super(l)}supports(l){return!0}addEventListener(l,h,d){return l.addEventListener(h,d,!1),()=>this.removeEventListener(l,h,d)}removeEventListener(l,h,d){return l.removeEventListener(h,d)}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const XK=["alt","control","meta","shift"],i3e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},r3e={alt:c=>c.altKey,control:c=>c.ctrlKey,meta:c=>c.metaKey,shift:c=>c.shiftKey};let s3e=(()=>{class c extends HK{constructor(l){super(l)}supports(l){return null!=c.parseEventName(l)}addEventListener(l,h,d){const f=c.parseEventName(h),p=c.eventCallback(f.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nd().onAndCancel(l,f.domEventName,p))}static parseEventName(l){const h=l.toLowerCase().split("."),d=h.shift();if(0===h.length||"keydown"!==d&&"keyup"!==d)return null;const f=c._normalizeKey(h.pop());let p="",g=h.indexOf("code");if(g>-1&&(h.splice(g,1),p="code."),XK.forEach(v=>{const y=h.indexOf(v);y>-1&&(h.splice(y,1),p+=v+".")}),p+=f,0!=h.length||0===f.length)return null;const m={};return m.domEventName=d,m.fullKey=p,m}static matchEventFullKeyCode(l,h){let d=i3e[l.key]||l.key,f="";return h.indexOf("code.")>-1&&(d=l.code,f="code."),!(null==d||!d)&&(d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),XK.forEach(p=>{p!==d&&(0,r3e[p])(l)&&(f+=p+".")}),f+=d,f===h)}static eventCallback(l,h,d){return f=>{c.matchEventFullKeyCode(f,l)&&d.runGuarded(()=>h(f))}}static _normalizeKey(l){return"esc"===l?"escape":l}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const KK=[{provide:Ss,useValue:RK},{provide:LY,useValue:function o3e(){jL.makeCurrent()},multi:!0},{provide:hr,useFactory:function l3e(){return function t2e(c){eF=c}(document),document},deps:[]}],c3e=ZY(H4e,"browser",KK),JK=new sn(""),eJ=[{provide:qD,useClass:class jAe{addToWindow(a){ss.getAngularTestability=(h,d=!0)=>{const f=a.findTestabilityInTree(h,d);if(null==f)throw new Error("Could not find testability for element.");return f},ss.getAllAngularTestabilities=()=>a.getAllTestabilities(),ss.getAllAngularRootElements=()=>a.getAllRootElements(),ss.frameworkStabilizers||(ss.frameworkStabilizers=[]),ss.frameworkStabilizers.push(h=>{const d=ss.getAllAngularTestabilities();let f=d.length,p=!1;const g=function(m){p=p||m,f--,0==f&&h(p)};d.forEach(function(m){m.whenStable(g)})})}findTestabilityInTree(a,l,h){return null==l?null:a.getTestability(l)??(h?nd().isShadowRoot(l)?this.findTestabilityInTree(a,l.host,!0):this.findTestabilityInTree(a,l.parentElement,!0):null)}},deps:[]},{provide:WY,useClass:gL,deps:[Bi,mL,qD]},{provide:gL,useClass:gL,deps:[Bi,mL,qD]}],tJ=[{provide:cF,useValue:"root"},{provide:ay,useFactory:function a3e(){return new ay},deps:[]},{provide:uT,useClass:n3e,multi:!0,deps:[hr,Bi,Ss]},{provide:uT,useClass:s3e,multi:!0,deps:[hr]},{provide:dT,useClass:dT,deps:[hT,cS,tS]},{provide:oy,useExisting:dT},{provide:$K,useExisting:cS},{provide:cS,useClass:cS,deps:[hr]},{provide:hT,useClass:hT,deps:[uT,Bi]},{provide:LK,useClass:ZAe,deps:[]},[]];let nJ=(()=>{class c{constructor(l){}static withServerTransition(l){return{ngModule:c,providers:[{provide:tS,useValue:l.appId},{provide:zK,useExisting:tS},QAe]}}}return c.\u0275fac=function(l){return new(l||c)(Pe(JK,12))},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({providers:[...tJ,...eJ],imports:[zi,$4e]}),c})(),iJ=(()=>{class c{constructor(l){this._doc=l}getTitle(){return this._doc.title}setTitle(l){this._doc.title=l||""}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr))},c.\u0275prov=Xe({token:c,factory:function(l){let h=null;return h=l?new l:function h3e(){return new iJ(Pe(hr))}(),h},providedIn:"root"}),c})();function uS(c){return(uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(c)}function S(c,a,l){return(a=function b3e(c){var a=function _3e(c,a){if("object"!==uS(c)||null===c)return c;var l=c[Symbol.toPrimitive];if(void 0!==l){var h=l.call(c,a||"default");if("object"!==uS(h))return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(c)}(c,"string");return"symbol"===uS(a)?a:String(a)}(a))in c?Object.defineProperty(c,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[a]=l,c}function jn(...c){return ho(c,dC(c))}typeof window<"u"&&window;class as extends Tt{constructor(a){super(),this._value=a}get value(){return this.getValue()}_subscribe(a){const l=super._subscribe(a);return!l.closed&&a.next(this._value),l}getValue(){const{hasError:a,thrownError:l,_value:h}=this;if(a)throw l;return this._throwIfClosed(),h}next(a){super.next(this._value=a)}}const fT=Se(c=>function(){c(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:C3e}=Array,{getPrototypeOf:S3e,prototype:x3e,keys:w3e}=Object;function oJ(c){if(1===c.length){const a=c[0];if(C3e(a))return{args:a,keys:null};if(function O3e(c){return c&&"object"==typeof c&&S3e(c)===x3e}(a)){const l=w3e(a);return{args:l.map(h=>a[h]),keys:l}}}return{args:c,keys:null}}const{isArray:D3e}=Array;function eN(c){return Qn(a=>function T3e(c,a){return D3e(a)?c(...a):c(a)}(c,a))}function aJ(c,a){return c.reduce((l,h,d)=>(l[h]=a[d],l),{})}function pT(...c){const a=dC(c),l=EQ(c),{args:h,keys:d}=oJ(c);if(0===h.length)return ho([],a);const f=new Ke(function k3e(c,a,l=pi){return h=>{lJ(a,()=>{const{length:d}=c,f=new Array(d);let p=d,g=d;for(let m=0;m<d;m++)lJ(a,()=>{const v=ho(c[m],a);let y=!1;v.subscribe(Ti(h,_=>{f[m]=_,y||(y=!0,g--),g||h.next(l(f.slice()))},()=>{--p||h.complete()}))},h)},h)}}(h,a,d?p=>aJ(d,p):pi));return l?f.pipe(eN(l)):f}function lJ(c,a,l){c?df(l,c,a):a()}function tN(...c){return function M3e(){return Uv(1)}()(ho(c,dC(c)))}function cJ(c){return new Ke(a=>{Ja(c()).subscribe(a)})}function Ay(c,a){const l=ge(c)?c:()=>c,h=d=>d.error(l());return new Ke(a?d=>a.schedule(h,0,d):h)}function nN(){return Yn((c,a)=>{let l=null;c._refCount++;const h=Ti(a,void 0,void 0,void 0,()=>{if(!c||c._refCount<=0||0<--c._refCount)return void(l=null);const d=c._connection,f=l;l=null,d&&(!f||d===f)&&d.unsubscribe(),a.unsubscribe()});c.subscribe(h),h.closed||(l=c.connect())})}class uJ extends Ke{constructor(a,l){super(),this.source=a,this.subjectFactory=l,this._subject=null,this._refCount=0,this._connection=null,or(a)&&(this.lift=a.lift)}_subscribe(a){return this.getSubject().subscribe(a)}getSubject(){const a=this._subject;return(!a||a.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:a}=this;this._subject=this._connection=null,a?.unsubscribe()}connect(){let a=this._connection;if(!a){a=this._connection=new Re;const l=this.getSubject();a.add(this.source.subscribe(Ti(l,void 0,()=>{this._teardown(),l.complete()},h=>{this._teardown(),l.error(h)},()=>this._teardown()))),a.closed&&(this._connection=null,a=Re.EMPTY)}return a}refCount(){return nN()(this)}}function hu(c,a){return Yn((l,h)=>{let d=null,f=0,p=!1;const g=()=>p&&!d&&h.complete();l.subscribe(Ti(h,m=>{d?.unsubscribe();let v=0;const y=f++;Ja(c(m,y)).subscribe(d=Ti(h,_=>h.next(a?a(m,_,y,v++):_),()=>{d=null,g()}))},()=>{p=!0,g()}))})}function id(c){return c<=0?()=>Qh:Yn((a,l)=>{let h=0;a.subscribe(Ti(l,d=>{++h<=c&&(l.next(d),c<=h&&l.complete())}))})}function Vp(...c){const a=dC(c);return Yn((l,h)=>{(a?tN(c,l,a):tN(c,l)).subscribe(h)})}function Kr(c,a){return Yn((l,h)=>{let d=0;l.subscribe(Ti(h,f=>c.call(a,f,d++)&&h.next(f)))})}function gT(c){return Yn((a,l)=>{let h=!1;a.subscribe(Ti(l,d=>{h=!0,l.next(d)},()=>{h||l.next(c),l.complete()}))})}function hJ(c=E3e){return Yn((a,l)=>{let h=!1;a.subscribe(Ti(l,d=>{h=!0,l.next(d)},()=>h?l.complete():l.error(c())))})}function E3e(){return new fT}function wf(c,a){const l=arguments.length>=2;return h=>h.pipe(c?Kr((d,f)=>c(d,f,h)):pi,id(1),l?gT(a):hJ(()=>new fT))}function Up(c,a){return ge(a)?Xo(c,a,1):Xo(c,1)}function Lo(c,a,l){const h=ge(c)||a||l?{next:c,error:a,complete:l}:c;return h?Yn((d,f)=>{var p;null===(p=h.subscribe)||void 0===p||p.call(h);let g=!0;d.subscribe(Ti(f,m=>{var v;null===(v=h.next)||void 0===v||v.call(h,m),f.next(m)},()=>{var m;g=!1,null===(m=h.complete)||void 0===m||m.call(h),f.complete()},m=>{var v;g=!1,null===(v=h.error)||void 0===v||v.call(h,m),f.error(m)},()=>{var m,v;g&&(null===(m=h.unsubscribe)||void 0===m||m.call(h)),null===(v=h.finalize)||void 0===v||v.call(h)}))}):pi}function mr(c){return Yn((a,l)=>{let f,h=null,d=!1;h=a.subscribe(Ti(l,void 0,void 0,p=>{f=Ja(c(p,mr(c)(a))),h?(h.unsubscribe(),h=null,f.subscribe(l)):d=!0})),d&&(h.unsubscribe(),h=null,f.subscribe(l))})}function A3e(c,a,l,h,d){return(f,p)=>{let g=l,m=a,v=0;f.subscribe(Ti(p,y=>{const _=v++;m=g?c(m,y,_):(g=!0,y),h&&p.next(m)},d&&(()=>{g&&p.next(m),p.complete()})))}}function dJ(c,a){return Yn(A3e(c,a,arguments.length>=2,!0))}function iN(c){return c<=0?()=>Qh:Yn((a,l)=>{let h=[];a.subscribe(Ti(l,d=>{h.push(d),c<h.length&&h.shift()},()=>{for(const d of h)l.next(d);l.complete()},void 0,()=>{h=null}))})}function fJ(c,a){const l=arguments.length>=2;return h=>h.pipe(c?Kr((d,f)=>c(d,f,h)):pi,iN(1),l?gT(a):hJ(()=>new fT))}function rN(c){return Yn((a,l)=>{try{a.subscribe(l)}finally{l.add(c)}})}const Fi="primary",hS=Symbol("RouteTitle");class R3e{constructor(a){this.params=a||{}}has(a){return Object.prototype.hasOwnProperty.call(this.params,a)}get(a){if(this.has(a)){const l=this.params[a];return Array.isArray(l)?l[0]:l}return null}getAll(a){if(this.has(a)){const l=this.params[a];return Array.isArray(l)?l:[l]}return[]}get keys(){return Object.keys(this.params)}}function Iy(c){return new R3e(c)}function F3e(c,a,l){const h=l.path.split("/");if(h.length>c.length||"full"===l.pathMatch&&(a.hasChildren()||h.length<c.length))return null;const d={};for(let f=0;f<h.length;f++){const p=h[f],g=c[f];if(p.startsWith(":"))d[p.substring(1)]=g;else if(p!==g.path)return null}return{consumed:c.slice(0,h.length),posParams:d}}function rd(c,a){const l=c?Object.keys(c):void 0,h=a?Object.keys(a):void 0;if(!l||!h||l.length!=h.length)return!1;let d;for(let f=0;f<l.length;f++)if(d=l[f],!pJ(c[d],a[d]))return!1;return!0}function pJ(c,a){if(Array.isArray(c)&&Array.isArray(a)){if(c.length!==a.length)return!1;const l=[...c].sort(),h=[...a].sort();return l.every((d,f)=>h[f]===d)}return c===a}function gJ(c){return Array.prototype.concat.apply([],c)}function mJ(c){return c.length>0?c[c.length-1]:null}function pa(c,a){for(const l in c)c.hasOwnProperty(l)&&a(c[l],l)}function zp(c){return NF(c)?c:zC(c)?ho(Promise.resolve(c)):jn(c)}const mT=!1,N3e={exact:function _J(c,a,l){if(!Em(c.segments,a.segments)||!vT(c.segments,a.segments,l)||c.numberOfChildren!==a.numberOfChildren)return!1;for(const h in a.children)if(!c.children[h]||!_J(c.children[h],a.children[h],l))return!1;return!0},subset:bJ},vJ={exact:function B3e(c,a){return rd(c,a)},subset:function V3e(c,a){return Object.keys(a).length<=Object.keys(c).length&&Object.keys(a).every(l=>pJ(c[l],a[l]))},ignored:()=>!0};function yJ(c,a,l){return N3e[l.paths](c.root,a.root,l.matrixParams)&&vJ[l.queryParams](c.queryParams,a.queryParams)&&!("exact"===l.fragment&&c.fragment!==a.fragment)}function bJ(c,a,l){return CJ(c,a,a.segments,l)}function CJ(c,a,l,h){if(c.segments.length>l.length){const d=c.segments.slice(0,l.length);return!(!Em(d,l)||a.hasChildren()||!vT(d,l,h))}if(c.segments.length===l.length){if(!Em(c.segments,l)||!vT(c.segments,l,h))return!1;for(const d in a.children)if(!c.children[d]||!bJ(c.children[d],a.children[d],h))return!1;return!0}{const d=l.slice(0,c.segments.length),f=l.slice(c.segments.length);return!!(Em(c.segments,d)&&vT(c.segments,d,h)&&c.children[Fi])&&CJ(c.children[Fi],a,f,h)}}function vT(c,a,l){return a.every((h,d)=>vJ[l](c[d].parameters,h.parameters))}class Mm{constructor(a=new tr([],{}),l={},h=null){this.root=a,this.queryParams=l,this.fragment=h}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return H3e.serialize(this)}}class tr{constructor(a,l){this.segments=a,this.children=l,this.parent=null,pa(l,(h,d)=>h.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yT(this)}}class dS{constructor(a,l){this.path=a,this.parameters=l}get parameterMap(){return this._parameterMap||(this._parameterMap=Iy(this.parameters)),this._parameterMap}toString(){return wJ(this)}}function Em(c,a){return c.length===a.length&&c.every((l,h)=>l.path===a[h].path)}let fS=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:function(){return new sN},providedIn:"root"}),c})();class sN{parse(a){const l=new Y3e(a);return new Mm(l.parseRootSegment(),l.parseQueryParams(),l.parseFragment())}serialize(a){const l=`/${pS(a.root,!0)}`,h=function G3e(c){const a=Object.keys(c).map(l=>{const h=c[l];return Array.isArray(h)?h.map(d=>`${_T(l)}=${_T(d)}`).join("&"):`${_T(l)}=${_T(h)}`}).filter(l=>!!l);return a.length?`?${a.join("&")}`:""}(a.queryParams);return`${l}${h}${"string"==typeof a.fragment?`#${function $3e(c){return encodeURI(c)}(a.fragment)}`:""}`}}const H3e=new sN;function yT(c){return c.segments.map(a=>wJ(a)).join("/")}function pS(c,a){if(!c.hasChildren())return yT(c);if(a){const l=c.children[Fi]?pS(c.children[Fi],!1):"",h=[];return pa(c.children,(d,f)=>{f!==Fi&&h.push(`${f}:${pS(d,!1)}`)}),h.length>0?`${l}(${h.join("//")})`:l}{const l=function z3e(c,a){let l=[];return pa(c.children,(h,d)=>{d===Fi&&(l=l.concat(a(h,d)))}),pa(c.children,(h,d)=>{d!==Fi&&(l=l.concat(a(h,d)))}),l}(c,(h,d)=>d===Fi?[pS(c.children[Fi],!1)]:[`${d}:${pS(h,!1)}`]);return 1===Object.keys(c.children).length&&null!=c.children[Fi]?`${yT(c)}/${l[0]}`:`${yT(c)}/(${l.join("//")})`}}function SJ(c){return encodeURIComponent(c).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _T(c){return SJ(c).replace(/%3B/gi,";")}function oN(c){return SJ(c).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bT(c){return decodeURIComponent(c)}function xJ(c){return bT(c.replace(/\+/g,"%20"))}function wJ(c){return`${oN(c.path)}${function W3e(c){return Object.keys(c).map(a=>`;${oN(a)}=${oN(c[a])}`).join("")}(c.parameters)}`}const Q3e=/^[^\/()?;=#]+/;function CT(c){const a=c.match(Q3e);return a?a[0]:""}const j3e=/^[^=?&#]+/,q3e=/^[^&#]+/;class Y3e{constructor(a){this.url=a,this.remaining=a}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tr([],{}):new tr([],this.parseChildren())}parseQueryParams(){const a={};if(this.consumeOptional("?"))do{this.parseQueryParam(a)}while(this.consumeOptional("&"));return a}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const a=[];for(this.peekStartsWith("(")||a.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),a.push(this.parseSegment());let l={};this.peekStartsWith("/(")&&(this.capture("/"),l=this.parseParens(!0));let h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(a.length>0||Object.keys(l).length>0)&&(h[Fi]=new tr(a,l)),h}parseSegment(){const a=CT(this.remaining);if(""===a&&this.peekStartsWith(";"))throw new xt(4009,mT);return this.capture(a),new dS(bT(a),this.parseMatrixParams())}parseMatrixParams(){const a={};for(;this.consumeOptional(";");)this.parseParam(a);return a}parseParam(a){const l=CT(this.remaining);if(!l)return;this.capture(l);let h="";if(this.consumeOptional("=")){const d=CT(this.remaining);d&&(h=d,this.capture(h))}a[bT(l)]=bT(h)}parseQueryParam(a){const l=function Z3e(c){const a=c.match(j3e);return a?a[0]:""}(this.remaining);if(!l)return;this.capture(l);let h="";if(this.consumeOptional("=")){const p=function X3e(c){const a=c.match(q3e);return a?a[0]:""}(this.remaining);p&&(h=p,this.capture(h))}const d=xJ(l),f=xJ(h);if(a.hasOwnProperty(d)){let p=a[d];Array.isArray(p)||(p=[p],a[d]=p),p.push(f)}else a[d]=f}parseParens(a){const l={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const h=CT(this.remaining),d=this.remaining[h.length];if("/"!==d&&")"!==d&&";"!==d)throw new xt(4010,mT);let f;h.indexOf(":")>-1?(f=h.slice(0,h.indexOf(":")),this.capture(f),this.capture(":")):a&&(f=Fi);const p=this.parseChildren();l[f]=1===Object.keys(p).length?p[Fi]:new tr([],p),this.consumeOptional("//")}return l}peekStartsWith(a){return this.remaining.startsWith(a)}consumeOptional(a){return!!this.peekStartsWith(a)&&(this.remaining=this.remaining.substring(a.length),!0)}capture(a){if(!this.consumeOptional(a))throw new xt(4011,mT)}}function aN(c){return c.segments.length>0?new tr([],{[Fi]:c}):c}function ST(c){const a={};for(const h of Object.keys(c.children)){const f=ST(c.children[h]);(f.segments.length>0||f.hasChildren())&&(a[h]=f)}return function K3e(c){if(1===c.numberOfChildren&&c.children[Fi]){const a=c.children[Fi];return new tr(c.segments.concat(a.segments),a.children)}return c}(new tr(c.segments,a))}function Am(c){return c instanceof Mm}function tIe(c,a,l,h,d){if(0===l.length)return Py(a.root,a.root,a.root,h,d);const f=function TJ(c){if("string"==typeof c[0]&&1===c.length&&"/"===c[0])return new DJ(!0,0,c);let a=0,l=!1;const h=c.reduce((d,f,p)=>{if("object"==typeof f&&null!=f){if(f.outlets){const g={};return pa(f.outlets,(m,v)=>{g[v]="string"==typeof m?m.split("/"):m}),[...d,{outlets:g}]}if(f.segmentPath)return[...d,f.segmentPath]}return"string"!=typeof f?[...d,f]:0===p?(f.split("/").forEach((g,m)=>{0==m&&"."===g||(0==m&&""===g?l=!0:".."===g?a++:""!=g&&d.push(g))}),d):[...d,f]},[]);return new DJ(l,a,h)}(l);return f.toRoot()?Py(a.root,a.root,new tr([],{}),h,d):function p(m){const v=function iIe(c,a,l,h){if(c.isAbsolute)return new Ry(a.root,!0,0);if(-1===h)return new Ry(l,l===a.root,0);return function kJ(c,a,l){let h=c,d=a,f=l;for(;f>d;){if(f-=d,h=h.parent,!h)throw new xt(4005,!1);d=h.segments.length}return new Ry(h,!1,d-f)}(l,h+(gS(c.commands[0])?0:1),c.numberOfDoubleDots)}(f,a,c.snapshot?._urlSegment,m),y=v.processChildren?Fy(v.segmentGroup,v.index,f.commands):cN(v.segmentGroup,v.index,f.commands);return Py(a.root,v.segmentGroup,y,h,d)}(c.snapshot?._lastPathIndex)}function gS(c){return"object"==typeof c&&null!=c&&!c.outlets&&!c.segmentPath}function mS(c){return"object"==typeof c&&null!=c&&c.outlets}function Py(c,a,l,h,d){let p,f={};h&&pa(h,(m,v)=>{f[v]=Array.isArray(m)?m.map(y=>`${y}`):`${m}`}),p=c===a?l:OJ(c,a,l);const g=aN(ST(p));return new Mm(g,f,d)}function OJ(c,a,l){const h={};return pa(c.children,(d,f)=>{h[f]=d===a?l:OJ(d,a,l)}),new tr(c.segments,h)}class DJ{constructor(a,l,h){if(this.isAbsolute=a,this.numberOfDoubleDots=l,this.commands=h,a&&h.length>0&&gS(h[0]))throw new xt(4003,!1);const d=h.find(mS);if(d&&d!==mJ(h))throw new xt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ry{constructor(a,l,h){this.segmentGroup=a,this.processChildren=l,this.index=h}}function cN(c,a,l){if(c||(c=new tr([],{})),0===c.segments.length&&c.hasChildren())return Fy(c,a,l);const h=function sIe(c,a,l){let h=0,d=a;const f={match:!1,pathIndex:0,commandIndex:0};for(;d<c.segments.length;){if(h>=l.length)return f;const p=c.segments[d],g=l[h];if(mS(g))break;const m=`${g}`,v=h<l.length-1?l[h+1]:null;if(d>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!EJ(m,v,p))return f;h+=2}else{if(!EJ(m,{},p))return f;h++}d++}return{match:!0,pathIndex:d,commandIndex:h}}(c,a,l),d=l.slice(h.commandIndex);if(h.match&&h.pathIndex<c.segments.length){const f=new tr(c.segments.slice(0,h.pathIndex),{});return f.children[Fi]=new tr(c.segments.slice(h.pathIndex),c.children),Fy(f,0,d)}return h.match&&0===d.length?new tr(c.segments,{}):h.match&&!c.hasChildren()?uN(c,a,l):h.match?Fy(c,0,d):uN(c,a,l)}function Fy(c,a,l){if(0===l.length)return new tr(c.segments,{});{const h=function rIe(c){return mS(c[0])?c[0].outlets:{[Fi]:c}}(l),d={};return!h[Fi]&&c.children[Fi]&&1===c.numberOfChildren&&0===c.children[Fi].segments.length?Fy(c.children[Fi],a,l):(pa(h,(f,p)=>{"string"==typeof f&&(f=[f]),null!==f&&(d[p]=cN(c.children[p],a,f))}),pa(c.children,(f,p)=>{void 0===h[p]&&(d[p]=f)}),new tr(c.segments,d))}}function uN(c,a,l){const h=c.segments.slice(0,a);let d=0;for(;d<l.length;){const f=l[d];if(mS(f)){const m=oIe(f.outlets);return new tr(h,m)}if(0===d&&gS(l[0])){h.push(new dS(c.segments[a].path,MJ(l[0]))),d++;continue}const p=mS(f)?f.outlets[Fi]:`${f}`,g=d<l.length-1?l[d+1]:null;p&&g&&gS(g)?(h.push(new dS(p,MJ(g))),d+=2):(h.push(new dS(p,{})),d++)}return new tr(h,{})}function oIe(c){const a={};return pa(c,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[h]=uN(new tr([],{}),0,l))}),a}function MJ(c){const a={};return pa(c,(l,h)=>a[h]=`${l}`),a}function EJ(c,a,l){return c==l.path&&rd(a,l.parameters)}const vS="imperative";class sd{constructor(a,l){this.id=a,this.url=l}}class hN extends sd{constructor(a,l,h="imperative",d=null){super(a,l),this.type=0,this.navigationTrigger=h,this.restoredState=d}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Im extends sd{constructor(a,l,h){super(a,l),this.urlAfterRedirects=h,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xT extends sd{constructor(a,l,h,d){super(a,l),this.reason=h,this.code=d,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class AJ extends sd{constructor(a,l,h,d){super(a,l),this.reason=h,this.code=d,this.type=16}}class IJ extends sd{constructor(a,l,h,d){super(a,l),this.error=h,this.target=d,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aIe extends sd{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lIe extends sd{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cIe extends sd{constructor(a,l,h,d,f){super(a,l),this.urlAfterRedirects=h,this.state=d,this.shouldActivate=f,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class uIe extends sd{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hIe extends sd{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dIe{constructor(a){this.route=a,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fIe{constructor(a){this.route=a,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pIe{constructor(a){this.snapshot=a,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gIe{constructor(a){this.snapshot=a,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mIe{constructor(a){this.snapshot=a,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vIe{constructor(a){this.snapshot=a,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PJ{constructor(a,l,h){this.routerEvent=a,this.position=l,this.anchor=h,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _Ie=(()=>{class c{createUrlTree(l,h,d,f,p,g){return tIe(l||h.root,d,f,p,g)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),bIe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:function(a){return _Ie.\u0275fac(a)},providedIn:"root"}),c})();class RJ{constructor(a){this._root=a}get root(){return this._root.value}parent(a){const l=this.pathFromRoot(a);return l.length>1?l[l.length-2]:null}children(a){const l=dN(a,this._root);return l?l.children.map(h=>h.value):[]}firstChild(a){const l=dN(a,this._root);return l&&l.children.length>0?l.children[0].value:null}siblings(a){const l=fN(a,this._root);return l.length<2?[]:l[l.length-2].children.map(d=>d.value).filter(d=>d!==a)}pathFromRoot(a){return fN(a,this._root).map(l=>l.value)}}function dN(c,a){if(c===a.value)return a;for(const l of a.children){const h=dN(c,l);if(h)return h}return null}function fN(c,a){if(c===a.value)return[a];for(const l of a.children){const h=fN(c,l);if(h.length)return h.unshift(a),h}return[]}class Of{constructor(a,l){this.value=a,this.children=l}toString(){return`TreeNode(${this.value})`}}function Ly(c){const a={};return c&&c.children.forEach(l=>a[l.value.outlet]=l),a}class FJ extends RJ{constructor(a,l){super(a),this.snapshot=l,pN(this,a)}toString(){return this.snapshot.toString()}}function LJ(c,a){const l=function CIe(c,a){const p=new wT([],{},{},"",{},Fi,a,null,c.root,-1,{});return new BJ("",new Of(p,[]))}(c,a),h=new as([new dS("",{})]),d=new as({}),f=new as({}),p=new as({}),g=new as(""),m=new Ny(h,d,p,g,f,Fi,a,l.root);return m.snapshot=l.root,new FJ(new Of(m,[]),l)}class Ny{constructor(a,l,h,d,f,p,g,m){this.url=a,this.params=l,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=p,this.component=g,this.title=this.data?.pipe(Qn(v=>v[hS]))??jn(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Qn(a=>Iy(a)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Qn(a=>Iy(a)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function NJ(c,a="emptyOnly"){const l=c.pathFromRoot;let h=0;if("always"!==a)for(h=l.length-1;h>=1;){const d=l[h],f=l[h-1];if(d.routeConfig&&""===d.routeConfig.path)h--;else{if(f.component)break;h--}}return function SIe(c){return c.reduce((a,l)=>({params:{...a.params,...l.params},data:{...a.data,...l.data},resolve:{...l.data,...a.resolve,...l.routeConfig?.data,...l._resolvedData}}),{params:{},data:{},resolve:{}})}(l.slice(h))}class wT{get title(){return this.data?.[hS]}constructor(a,l,h,d,f,p,g,m,v,y,_){this.url=a,this.params=l,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=p,this.component=g,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=y,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Iy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(h=>h.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class BJ extends RJ{constructor(a,l){super(l),this.url=a,pN(this,l)}toString(){return VJ(this._root)}}function pN(c,a){a.value._routerState=c,a.children.forEach(l=>pN(c,l))}function VJ(c){const a=c.children.length>0?` { ${c.children.map(VJ).join(", ")} } `:"";return`${c.value}${a}`}function gN(c){if(c.snapshot){const a=c.snapshot,l=c._futureSnapshot;c.snapshot=l,rd(a.queryParams,l.queryParams)||c.queryParams.next(l.queryParams),a.fragment!==l.fragment&&c.fragment.next(l.fragment),rd(a.params,l.params)||c.params.next(l.params),function L3e(c,a){if(c.length!==a.length)return!1;for(let l=0;l<c.length;++l)if(!rd(c[l],a[l]))return!1;return!0}(a.url,l.url)||c.url.next(l.url),rd(a.data,l.data)||c.data.next(l.data)}else c.snapshot=c._futureSnapshot,c.data.next(c._futureSnapshot.data)}function mN(c,a){const l=rd(c.params,a.params)&&function U3e(c,a){return Em(c,a)&&c.every((l,h)=>rd(l.parameters,a[h].parameters))}(c.url,a.url);return l&&!(!c.parent!=!a.parent)&&(!c.parent||mN(c.parent,a.parent))}function yS(c,a,l){if(l&&c.shouldReuseRoute(a.value,l.value.snapshot)){const h=l.value;h._futureSnapshot=a.value;const d=function wIe(c,a,l){return a.children.map(h=>{for(const d of l.children)if(c.shouldReuseRoute(h.value,d.value.snapshot))return yS(c,h,d);return yS(c,h)})}(c,a,l);return new Of(h,d)}{if(c.shouldAttach(a.value)){const f=c.retrieve(a.value);if(null!==f){const p=f.route;return p.value._futureSnapshot=a.value,p.children=a.children.map(g=>yS(c,g)),p}}const h=function OIe(c){return new Ny(new as(c.url),new as(c.params),new as(c.queryParams),new as(c.fragment),new as(c.data),c.outlet,c.component,c)}(a.value),d=a.children.map(f=>yS(c,f));return new Of(h,d)}}const vN="ngNavigationCancelingError";function UJ(c,a){const{redirectTo:l,navigationBehaviorOptions:h}=Am(a)?{redirectTo:a,navigationBehaviorOptions:void 0}:a,d=zJ(!1,0,a);return d.url=l,d.navigationBehaviorOptions=h,d}function zJ(c,a,l){const h=new Error("NavigationCancelingError: "+(c||""));return h[vN]=!0,h.cancellationCode=a,l&&(h.url=l),h}function HJ(c){return $J(c)&&Am(c.url)}function $J(c){return c&&c[vN]}class DIe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _S,this.attachRef=null}}let _S=(()=>{class c{constructor(){this.contexts=new Map}onChildOutletCreated(l,h){const d=this.getOrCreateContext(l);d.outlet=h,this.contexts.set(l,d)}onChildOutletDestroyed(l){const h=this.getContext(l);h&&(h.outlet=null,h.attachRef=null)}onOutletDeactivated(){const l=this.contexts;return this.contexts=new Map,l}onOutletReAttached(l){this.contexts=l}getOrCreateContext(l){let h=this.getContext(l);return h||(h=new DIe,this.contexts.set(l,h)),h}getContext(l){return this.contexts.get(l)||null}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const OT=!1;let yN=(()=>{class c{constructor(){this.activated=null,this._activatedRoute=null,this.name=Fi,this.activateEvents=new Mt,this.deactivateEvents=new Mt,this.attachEvents=new Mt,this.detachEvents=new Mt,this.parentContexts=Gi(_S),this.location=Gi(Ki),this.changeDetector=Gi(Ro),this.environmentInjector=Gi(Xh)}ngOnChanges(l){if(l.name){const{firstChange:h,previousValue:d}=l.name;if(h)return;this.isTrackedInParentContexts(d)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(d)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(l){return this.parentContexts.getContext(l)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const l=this.parentContexts.getContext(this.name);l?.route&&(l.attachRef?this.attach(l.attachRef,l.route):this.activateWith(l.route,l.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xt(4012,OT);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xt(4012,OT);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xt(4012,OT);this.location.detach();const l=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(l.instance),l}attach(l,h){this.activated=l,this._activatedRoute=h,this.location.insert(l.hostView),this.attachEvents.emit(l.instance)}deactivate(){if(this.activated){const l=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(l)}}activateWith(l,h){if(this.isActivated)throw new xt(4013,OT);this._activatedRoute=l;const d=this.location,p=l.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,m=new TIe(l,g,d.injector);if(h&&function kIe(c){return!!c.resolveComponentFactory}(h)){const v=h.resolveComponentFactory(p);this.activated=d.createComponent(v,d.length,m)}else this.activated=d.createComponent(p,{index:d.length,injector:m,environmentInjector:h??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ro]}),c})();class TIe{constructor(a,l,h){this.route=a,this.childContexts=l,this.parent=h}get(a,l){return a===Ny?this.route:a===_S?this.childContexts:this.parent.get(a,l)}}let _N=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=Je({type:c,selectors:[["ng-component"]],standalone:!0,features:[qX],decls:1,vars:0,template:function(l,h){1&l&&pe(0,"router-outlet")},dependencies:[yN],encapsulation:2}),c})();function WJ(c,a){return c.providers&&!c._injector&&(c._injector=HD(c.providers,a,`Route: ${c.path}`)),c._injector??a}function CN(c){const a=c.children&&c.children.map(CN),l=a?{...c,children:a}:{...c};return!l.component&&!l.loadComponent&&(a||l.loadChildren)&&l.outlet&&l.outlet!==Fi&&(l.component=_N),l}function du(c){return c.outlet||Fi}function GJ(c,a){const l=c.filter(h=>du(h)===a);return l.push(...c.filter(h=>du(h)!==a)),l}function bS(c){if(!c)return null;if(c.routeConfig?._injector)return c.routeConfig._injector;for(let a=c.parent;a;a=a.parent){const l=a.routeConfig;if(l?._loadedInjector)return l._loadedInjector;if(l?._injector)return l._injector}return null}class PIe{constructor(a,l,h,d){this.routeReuseStrategy=a,this.futureState=l,this.currState=h,this.forwardEvent=d}activate(a){const l=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(l,h,a),gN(this.futureState.root),this.activateChildRoutes(l,h,a)}deactivateChildRoutes(a,l,h){const d=Ly(l);a.children.forEach(f=>{const p=f.value.outlet;this.deactivateRoutes(f,d[p],h),delete d[p]}),pa(d,(f,p)=>{this.deactivateRouteAndItsChildren(f,h)})}deactivateRoutes(a,l,h){const d=a.value,f=l?l.value:null;if(d===f)if(d.component){const p=h.getContext(d.outlet);p&&this.deactivateChildRoutes(a,l,p.children)}else this.deactivateChildRoutes(a,l,h);else f&&this.deactivateRouteAndItsChildren(l,h)}deactivateRouteAndItsChildren(a,l){a.value.component&&this.routeReuseStrategy.shouldDetach(a.value.snapshot)?this.detachAndStoreRouteSubtree(a,l):this.deactivateRouteAndOutlet(a,l)}detachAndStoreRouteSubtree(a,l){const h=l.getContext(a.value.outlet),d=h&&a.value.component?h.children:l,f=Ly(a);for(const p of Object.keys(f))this.deactivateRouteAndItsChildren(f[p],d);if(h&&h.outlet){const p=h.outlet.detach(),g=h.children.onOutletDeactivated();this.routeReuseStrategy.store(a.value.snapshot,{componentRef:p,route:a,contexts:g})}}deactivateRouteAndOutlet(a,l){const h=l.getContext(a.value.outlet),d=h&&a.value.component?h.children:l,f=Ly(a);for(const p of Object.keys(f))this.deactivateRouteAndItsChildren(f[p],d);h&&h.outlet&&(h.outlet.deactivate(),h.children.onOutletDeactivated(),h.attachRef=null,h.resolver=null,h.route=null)}activateChildRoutes(a,l,h){const d=Ly(l);a.children.forEach(f=>{this.activateRoutes(f,d[f.value.outlet],h),this.forwardEvent(new vIe(f.value.snapshot))}),a.children.length&&this.forwardEvent(new gIe(a.value.snapshot))}activateRoutes(a,l,h){const d=a.value,f=l?l.value:null;if(gN(d),d===f)if(d.component){const p=h.getOrCreateContext(d.outlet);this.activateChildRoutes(a,l,p.children)}else this.activateChildRoutes(a,l,h);else if(d.component){const p=h.getOrCreateContext(d.outlet);if(this.routeReuseStrategy.shouldAttach(d.snapshot)){const g=this.routeReuseStrategy.retrieve(d.snapshot);this.routeReuseStrategy.store(d.snapshot,null),p.children.onOutletReAttached(g.contexts),p.attachRef=g.componentRef,p.route=g.route.value,p.outlet&&p.outlet.attach(g.componentRef,g.route.value),gN(g.route.value),this.activateChildRoutes(a,null,p.children)}else{const g=bS(d.snapshot),m=g?.get(Sm)??null;p.attachRef=null,p.route=d,p.resolver=m,p.injector=g,p.outlet&&p.outlet.activateWith(d,p.injector),this.activateChildRoutes(a,null,p.children)}}else this.activateChildRoutes(a,null,h)}}class QJ{constructor(a){this.path=a,this.route=this.path[this.path.length-1]}}class DT{constructor(a,l){this.component=a,this.route=l}}function RIe(c,a,l){const h=c._root;return CS(h,a?a._root:null,l,[h.value])}function By(c,a){const l=Symbol(),h=a.get(c,l);return h===l?"function"!=typeof c||function Jxe(c){return null!==W2(c)}(c)?a.get(c):c:h}function CS(c,a,l,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=Ly(a);return c.children.forEach(p=>{(function LIe(c,a,l,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=c.value,p=a?a.value:null,g=l?l.getContext(c.value.outlet):null;if(p&&f.routeConfig===p.routeConfig){const m=function NIe(c,a,l){if("function"==typeof l)return l(c,a);switch(l){case"pathParamsChange":return!Em(c.url,a.url);case"pathParamsOrQueryParamsChange":return!Em(c.url,a.url)||!rd(c.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mN(c,a)||!rd(c.queryParams,a.queryParams);default:return!mN(c,a)}}(p,f,f.routeConfig.runGuardsAndResolvers);m?d.canActivateChecks.push(new QJ(h)):(f.data=p.data,f._resolvedData=p._resolvedData),CS(c,a,f.component?g?g.children:null:l,h,d),m&&g&&g.outlet&&g.outlet.isActivated&&d.canDeactivateChecks.push(new DT(g.outlet.component,p))}else p&&SS(a,g,d),d.canActivateChecks.push(new QJ(h)),CS(c,null,f.component?g?g.children:null:l,h,d)})(p,f[p.value.outlet],l,h.concat([p.value]),d),delete f[p.value.outlet]}),pa(f,(p,g)=>SS(p,l.getContext(g),d)),d}function SS(c,a,l){const h=Ly(c),d=c.value;pa(h,(f,p)=>{SS(f,d.component?a?a.children.getContext(p):null:a,l)}),l.canDeactivateChecks.push(new DT(d.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,d))}function xS(c){return"function"==typeof c}function SN(c){return c instanceof fT||"EmptyError"===c?.name}const TT=Symbol("INITIAL_VALUE");function Vy(){return hu(c=>pT(c.map(a=>a.pipe(id(1),Vp(TT)))).pipe(Qn(a=>{for(const l of a)if(!0!==l){if(l===TT)return TT;if(!1===l||l instanceof Mm)return l}return!0}),Kr(a=>a!==TT),id(1)))}function jJ(c){return function Yt(...c){return ui(c)}(Lo(a=>{if(Am(a))throw UJ(0,a)}),Qn(a=>!0===a))}const xN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZJ(c,a,l,h,d){const f=wN(c,a,l);return f.matched?function ePe(c,a,l,h){const d=a.canMatch;return d&&0!==d.length?jn(d.map(p=>{const g=By(p,c);return zp(function $Ie(c){return c&&xS(c.canMatch)}(g)?g.canMatch(a,l):c.runInContext(()=>g(a,l)))})).pipe(Vy(),jJ()):jn(!0)}(h=WJ(a,h),a,l).pipe(Qn(p=>!0===p?f:{...xN})):jn(f)}function wN(c,a,l){if(""===a.path)return"full"===a.pathMatch&&(c.hasChildren()||l.length>0)?{...xN}:{matched:!0,consumedSegments:[],remainingSegments:l,parameters:{},positionalParamSegments:{}};const d=(a.matcher||F3e)(l,c,a);if(!d)return{...xN};const f={};pa(d.posParams,(g,m)=>{f[m]=g.path});const p=d.consumed.length>0?{...f,...d.consumed[d.consumed.length-1].parameters}:f;return{matched:!0,consumedSegments:d.consumed,remainingSegments:l.slice(d.consumed.length),parameters:p,positionalParamSegments:d.posParams??{}}}function kT(c,a,l,h){if(l.length>0&&function iPe(c,a,l){return l.some(h=>MT(c,a,h)&&du(h)!==Fi)}(c,l,h)){const f=new tr(a,function nPe(c,a,l,h){const d={};d[Fi]=h,h._sourceSegment=c,h._segmentIndexShift=a.length;for(const f of l)if(""===f.path&&du(f)!==Fi){const p=new tr([],{});p._sourceSegment=c,p._segmentIndexShift=a.length,d[du(f)]=p}return d}(c,a,h,new tr(l,c.children)));return f._sourceSegment=c,f._segmentIndexShift=a.length,{segmentGroup:f,slicedSegments:[]}}if(0===l.length&&function rPe(c,a,l){return l.some(h=>MT(c,a,h))}(c,l,h)){const f=new tr(c.segments,function tPe(c,a,l,h,d){const f={};for(const p of h)if(MT(c,l,p)&&!d[du(p)]){const g=new tr([],{});g._sourceSegment=c,g._segmentIndexShift=a.length,f[du(p)]=g}return{...d,...f}}(c,a,l,h,c.children));return f._sourceSegment=c,f._segmentIndexShift=a.length,{segmentGroup:f,slicedSegments:l}}const d=new tr(c.segments,c.children);return d._sourceSegment=c,d._segmentIndexShift=a.length,{segmentGroup:d,slicedSegments:l}}function MT(c,a,l){return(!(c.hasChildren()||a.length>0)||"full"!==l.pathMatch)&&""===l.path}function qJ(c,a,l,h){return!!(du(c)===h||h!==Fi&&MT(a,l,c))&&("**"===c.path||wN(a,c,l).matched)}function XJ(c,a,l){return 0===a.length&&!c.children[l]}const ET=!1;class AT{constructor(a){this.segmentGroup=a||null}}class YJ{constructor(a){this.urlTree=a}}function wS(c){return Ay(new AT(c))}function KJ(c){return Ay(new YJ(c))}class lPe{constructor(a,l,h,d,f){this.injector=a,this.configLoader=l,this.urlSerializer=h,this.urlTree=d,this.config=f,this.allowRedirects=!0}apply(){const a=kT(this.urlTree.root,[],[],this.config).segmentGroup,l=new tr(a.segments,a.children);return this.expandSegmentGroup(this.injector,this.config,l,Fi).pipe(Qn(f=>this.createUrlTree(ST(f),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mr(f=>{if(f instanceof YJ)return this.allowRedirects=!1,this.match(f.urlTree);throw f instanceof AT?this.noMatchError(f):f}))}match(a){return this.expandSegmentGroup(this.injector,this.config,a.root,Fi).pipe(Qn(d=>this.createUrlTree(ST(d),a.queryParams,a.fragment))).pipe(mr(d=>{throw d instanceof AT?this.noMatchError(d):d}))}noMatchError(a){return new xt(4002,ET)}createUrlTree(a,l,h){const d=aN(a);return new Mm(d,l,h)}expandSegmentGroup(a,l,h,d){return 0===h.segments.length&&h.hasChildren()?this.expandChildren(a,l,h).pipe(Qn(f=>new tr([],f))):this.expandSegment(a,h,l,h.segments,d,!0)}expandChildren(a,l,h){const d=[];for(const f of Object.keys(h.children))"primary"===f?d.unshift(f):d.push(f);return ho(d).pipe(Up(f=>{const p=h.children[f],g=GJ(l,f);return this.expandSegmentGroup(a,g,p,f).pipe(Qn(m=>({segment:m,outlet:f})))}),dJ((f,p)=>(f[p.outlet]=p.segment,f),{}),fJ())}expandSegment(a,l,h,d,f,p){return ho(h).pipe(Up(g=>this.expandSegmentAgainstRoute(a,l,h,g,d,f,p).pipe(mr(v=>{if(v instanceof AT)return jn(null);throw v}))),wf(g=>!!g),mr((g,m)=>{if(SN(g))return XJ(l,d,f)?jn(new tr([],{})):wS(l);throw g}))}expandSegmentAgainstRoute(a,l,h,d,f,p,g){return qJ(d,l,f,p)?void 0===d.redirectTo?this.matchSegmentAgainstRoute(a,l,d,f,p):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(a,l,h,d,f,p):wS(l):wS(l)}expandSegmentAgainstRouteUsingRedirect(a,l,h,d,f,p){return"**"===d.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(a,h,d,p):this.expandRegularSegmentAgainstRouteUsingRedirect(a,l,h,d,f,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(a,l,h,d){const f=this.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?KJ(f):this.lineralizeSegments(h,f).pipe(Xo(p=>{const g=new tr(p,{});return this.expandSegment(a,g,l,p,d,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(a,l,h,d,f,p){const{matched:g,consumedSegments:m,remainingSegments:v,positionalParamSegments:y}=wN(l,d,f);if(!g)return wS(l);const _=this.applyRedirectCommands(m,d.redirectTo,y);return d.redirectTo.startsWith("/")?KJ(_):this.lineralizeSegments(d,_).pipe(Xo(b=>this.expandSegment(a,l,h,b.concat(v),p,!1)))}matchSegmentAgainstRoute(a,l,h,d,f){return"**"===h.path?(a=WJ(h,a),h.loadChildren?(h._loadedRoutes?jn({routes:h._loadedRoutes,injector:h._loadedInjector}):this.configLoader.loadChildren(a,h)).pipe(Qn(g=>(h._loadedRoutes=g.routes,h._loadedInjector=g.injector,new tr(d,{})))):jn(new tr(d,{}))):ZJ(l,h,d,a).pipe(hu(({matched:p,consumedSegments:g,remainingSegments:m})=>p?this.getChildConfig(a=h._injector??a,h,d).pipe(Xo(y=>{const _=y.injector??a,b=y.routes,{segmentGroup:C,slicedSegments:x}=kT(l,g,m,b),w=new tr(C.segments,C.children);if(0===x.length&&w.hasChildren())return this.expandChildren(_,b,w).pipe(Qn(M=>new tr(g,M)));if(0===b.length&&0===x.length)return jn(new tr(g,{}));const O=du(h)===f;return this.expandSegment(_,w,b,x,O?Fi:f,!0).pipe(Qn(T=>new tr(g.concat(T.segments),T.children)))})):wS(l)))}getChildConfig(a,l,h){return l.children?jn({routes:l.children,injector:a}):l.loadChildren?void 0!==l._loadedRoutes?jn({routes:l._loadedRoutes,injector:l._loadedInjector}):function JIe(c,a,l,h){const d=a.canLoad;return void 0===d||0===d.length?jn(!0):jn(d.map(p=>{const g=By(p,c);return zp(function VIe(c){return c&&xS(c.canLoad)}(g)?g.canLoad(a,l):c.runInContext(()=>g(a,l)))})).pipe(Vy(),jJ())}(a,l,h).pipe(Xo(d=>d?this.configLoader.loadChildren(a,l).pipe(Lo(f=>{l._loadedRoutes=f.routes,l._loadedInjector=f.injector})):function oPe(c){return Ay(zJ(ET,3))}())):jn({routes:[],injector:a})}lineralizeSegments(a,l){let h=[],d=l.root;for(;;){if(h=h.concat(d.segments),0===d.numberOfChildren)return jn(h);if(d.numberOfChildren>1||!d.children[Fi])return Ay(new xt(4e3,ET));d=d.children[Fi]}}applyRedirectCommands(a,l,h){return this.applyRedirectCreateUrlTree(l,this.urlSerializer.parse(l),a,h)}applyRedirectCreateUrlTree(a,l,h,d){const f=this.createSegmentGroup(a,l.root,h,d);return new Mm(f,this.createQueryParams(l.queryParams,this.urlTree.queryParams),l.fragment)}createQueryParams(a,l){const h={};return pa(a,(d,f)=>{if("string"==typeof d&&d.startsWith(":")){const g=d.substring(1);h[f]=l[g]}else h[f]=d}),h}createSegmentGroup(a,l,h,d){const f=this.createSegments(a,l.segments,h,d);let p={};return pa(l.children,(g,m)=>{p[m]=this.createSegmentGroup(a,g,h,d)}),new tr(f,p)}createSegments(a,l,h,d){return l.map(f=>f.path.startsWith(":")?this.findPosParam(a,f,d):this.findOrReturn(f,h))}findPosParam(a,l,h){const d=h[l.path.substring(1)];if(!d)throw new xt(4001,ET);return d}findOrReturn(a,l){let h=0;for(const d of l){if(d.path===a.path)return l.splice(h),d;h++}return a}}class uPe{}class fPe{constructor(a,l,h,d,f,p,g){this.injector=a,this.rootComponentType=l,this.config=h,this.urlTree=d,this.url=f,this.paramsInheritanceStrategy=p,this.urlSerializer=g}recognize(){const a=kT(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,a,Fi).pipe(Qn(l=>{if(null===l)return null;const h=new wT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Fi,this.rootComponentType,null,this.urlTree.root,-1,{}),d=new Of(h,l),f=new BJ(this.url,d);return this.inheritParamsAndData(f._root),f}))}inheritParamsAndData(a){const l=a.value,h=NJ(l,this.paramsInheritanceStrategy);l.params=Object.freeze(h.params),l.data=Object.freeze(h.data),a.children.forEach(d=>this.inheritParamsAndData(d))}processSegmentGroup(a,l,h,d){return 0===h.segments.length&&h.hasChildren()?this.processChildren(a,l,h):this.processSegment(a,l,h,h.segments,d)}processChildren(a,l,h){return ho(Object.keys(h.children)).pipe(Up(d=>{const f=h.children[d],p=GJ(l,d);return this.processSegmentGroup(a,p,f,d)}),dJ((d,f)=>d&&f?(d.push(...f),d):null),function I3e(c,a=!1){return Yn((l,h)=>{let d=0;l.subscribe(Ti(h,f=>{const p=c(f,d++);(p||a)&&h.next(f),!p&&h.complete()}))})}(d=>null!==d),gT(null),fJ(),Qn(d=>{if(null===d)return null;const f=eee(d);return function pPe(c){c.sort((a,l)=>a.value.outlet===Fi?-1:l.value.outlet===Fi?1:a.value.outlet.localeCompare(l.value.outlet))}(f),f}))}processSegment(a,l,h,d,f){return ho(l).pipe(Up(p=>this.processSegmentAgainstRoute(p._injector??a,p,h,d,f)),wf(p=>!!p),mr(p=>{if(SN(p))return XJ(h,d,f)?jn([]):jn(null);throw p}))}processSegmentAgainstRoute(a,l,h,d,f){if(l.redirectTo||!qJ(l,h,d,f))return jn(null);let p;if("**"===l.path){const g=d.length>0?mJ(d).parameters:{},m=nee(h)+d.length;p=jn({snapshot:new wT(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iee(l),du(l),l.component??l._loadedComponent??null,l,tee(h),m,ree(l)),consumedSegments:[],remainingSegments:[]})}else p=ZJ(h,l,d,a).pipe(Qn(({matched:g,consumedSegments:m,remainingSegments:v,parameters:y})=>{if(!g)return null;const _=nee(h)+m.length;return{snapshot:new wT(m,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iee(l),du(l),l.component??l._loadedComponent??null,l,tee(h),_,ree(l)),consumedSegments:m,remainingSegments:v}}));return p.pipe(hu(g=>{if(null===g)return jn(null);const{snapshot:m,consumedSegments:v,remainingSegments:y}=g;a=l._injector??a;const _=l._loadedInjector??a,b=function gPe(c){return c.children?c.children:c.loadChildren?c._loadedRoutes:[]}(l),{segmentGroup:C,slicedSegments:x}=kT(h,v,y,b.filter(O=>void 0===O.redirectTo));if(0===x.length&&C.hasChildren())return this.processChildren(_,b,C).pipe(Qn(O=>null===O?null:[new Of(m,O)]));if(0===b.length&&0===x.length)return jn([new Of(m,[])]);const w=du(l)===f;return this.processSegment(_,b,C,x,w?Fi:f).pipe(Qn(O=>null===O?null:[new Of(m,O)]))}))}}function mPe(c){const a=c.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}function eee(c){const a=[],l=new Set;for(const h of c){if(!mPe(h)){a.push(h);continue}const d=a.find(f=>h.value.routeConfig===f.value.routeConfig);void 0!==d?(d.children.push(...h.children),l.add(d)):a.push(h)}for(const h of l){const d=eee(h.children);a.push(new Of(h.value,d))}return a.filter(h=>!l.has(h))}function tee(c){let a=c;for(;a._sourceSegment;)a=a._sourceSegment;return a}function nee(c){let a=c,l=a._segmentIndexShift??0;for(;a._sourceSegment;)a=a._sourceSegment,l+=a._segmentIndexShift??0;return l-1}function iee(c){return c.data||{}}function ree(c){return c.resolve||{}}function see(c){return"string"==typeof c.title||null===c.title}function ON(c){return hu(a=>{const l=c(a);return l?ho(l).pipe(Qn(()=>a)):jn(a)})}const Uy=new sn("ROUTES");let DN=(()=>{class c{constructor(l,h){this.injector=l,this.compiler=h,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(l){if(this.componentLoaders.get(l))return this.componentLoaders.get(l);if(l._loadedComponent)return jn(l._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(l);const h=zp(l.loadComponent()).pipe(Qn(aee),Lo(f=>{this.onLoadEndListener&&this.onLoadEndListener(l),l._loadedComponent=f}),rN(()=>{this.componentLoaders.delete(l)})),d=new uJ(h,()=>new Tt).pipe(nN());return this.componentLoaders.set(l,d),d}loadChildren(l,h){if(this.childrenLoaders.get(h))return this.childrenLoaders.get(h);if(h._loadedRoutes)return jn({routes:h._loadedRoutes,injector:h._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(h);const f=this.loadModuleFactoryOrRoutes(h.loadChildren).pipe(Qn(g=>{this.onLoadEndListener&&this.onLoadEndListener(h);let m,v,y=!1;Array.isArray(g)?v=g:(m=g.create(l).injector,v=gJ(m.get(Uy,[],ci.Self|ci.Optional)));return{routes:v.map(CN),injector:m}}),rN(()=>{this.childrenLoaders.delete(h)})),p=new uJ(f,()=>new Tt).pipe(nN());return this.childrenLoaders.set(h,p),p}loadModuleFactoryOrRoutes(l){return zp(l()).pipe(Qn(aee),Xo(d=>d instanceof jX||Array.isArray(d)?jn(d):ho(this.compiler.compileModuleAsync(d))))}}return c.\u0275fac=function(l){return new(l||c)(Pe(As),Pe(VY))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function aee(c){return function OPe(c){return c&&"object"==typeof c&&"default"in c}(c)?c.default:c}let PT=(()=>{class c{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Tt,this.configLoader=Gi(DN),this.environmentInjector=Gi(Xh),this.urlSerializer=Gi(fS),this.rootContexts=Gi(_S),this.navigationId=0,this.afterPreactivation=()=>jn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=d=>this.events.next(new fIe(d)),this.configLoader.onLoadStartListener=d=>this.events.next(new dIe(d))}complete(){this.transitions?.complete()}handleNavigationRequest(l){const h=++this.navigationId;this.transitions?.next({...this.transitions.value,...l,id:h})}setupNavigations(l){return this.transitions=new as({id:0,targetPageId:0,currentUrlTree:l.currentUrlTree,currentRawUrl:l.currentUrlTree,extractedUrl:l.urlHandlingStrategy.extract(l.currentUrlTree),urlAfterRedirects:l.urlHandlingStrategy.extract(l.currentUrlTree),rawUrl:l.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vS,restoredState:null,currentSnapshot:l.routerState.snapshot,targetSnapshot:null,currentRouterState:l.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kr(h=>0!==h.id),Qn(h=>({...h,extractedUrl:l.urlHandlingStrategy.extract(h.rawUrl)})),hu(h=>{let d=!1,f=!1;return jn(h).pipe(Lo(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hu(p=>{const g=l.browserUrlTree.toString(),m=!l.navigated||p.extractedUrl.toString()!==g||g!==l.currentUrlTree.toString();if(!m&&"reload"!==(p.extras.onSameUrlNavigation??l.onSameUrlNavigation)){const y="";return this.events.next(new AJ(p.id,l.serializeUrl(h.rawUrl),y,0)),l.rawUrlTree=p.rawUrl,p.resolve(null),Qh}if(l.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return lee(p.source)&&(l.browserUrlTree=p.extractedUrl),jn(p).pipe(hu(y=>{const _=this.transitions?.getValue();return this.events.next(new hN(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),_!==this.transitions?.getValue()?Qh:Promise.resolve(y)}),function cPe(c,a,l,h){return hu(d=>function aPe(c,a,l,h,d){return new lPe(c,a,l,h,d).apply()}(c,a,l,d.extractedUrl,h).pipe(Qn(f=>({...d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,l.config),Lo(y=>{this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects},h.urlAfterRedirects=y.urlAfterRedirects}),function yPe(c,a,l,h,d){return Xo(f=>function dPe(c,a,l,h,d,f,p="emptyOnly"){return new fPe(c,a,l,h,d,p,f).recognize().pipe(hu(g=>null===g?function hPe(c){return new Ke(a=>a.error(c))}(new uPe):jn(g)))}(c,a,l,f.urlAfterRedirects,h.serialize(f.urlAfterRedirects),h,d).pipe(Qn(p=>({...f,targetSnapshot:p}))))}(this.environmentInjector,this.rootComponentType,l.config,this.urlSerializer,l.paramsInheritanceStrategy),Lo(y=>{if(h.targetSnapshot=y.targetSnapshot,"eager"===l.urlUpdateStrategy){if(!y.extras.skipLocationChange){const b=l.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl);l.setBrowserUrl(b,y)}l.browserUrlTree=y.urlAfterRedirects}const _=new aIe(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(_)}));if(m&&l.urlHandlingStrategy.shouldProcessUrl(l.rawUrlTree)){const{id:y,extractedUrl:_,source:b,restoredState:C,extras:x}=p,w=new hN(y,this.urlSerializer.serialize(_),b,C);this.events.next(w);const O=LJ(_,this.rootComponentType).snapshot;return jn(h={...p,targetSnapshot:O,urlAfterRedirects:_,extras:{...x,skipLocationChange:!1,replaceUrl:!1}})}{const y="";return this.events.next(new AJ(p.id,l.serializeUrl(h.extractedUrl),y,1)),l.rawUrlTree=p.rawUrl,p.resolve(null),Qh}}),Lo(p=>{const g=new lIe(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}),Qn(p=>h={...p,guards:RIe(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function GIe(c,a){return Xo(l=>{const{targetSnapshot:h,currentSnapshot:d,guards:{canActivateChecks:f,canDeactivateChecks:p}}=l;return 0===p.length&&0===f.length?jn({...l,guardsResult:!0}):function QIe(c,a,l,h){return ho(c).pipe(Xo(d=>function KIe(c,a,l,h,d){const f=a&&a.routeConfig?a.routeConfig.canDeactivate:null;return f&&0!==f.length?jn(f.map(g=>{const m=bS(a)??d,v=By(g,m);return zp(function HIe(c){return c&&xS(c.canDeactivate)}(v)?v.canDeactivate(c,a,l,h):m.runInContext(()=>v(c,a,l,h))).pipe(wf())})).pipe(Vy()):jn(!0)}(d.component,d.route,l,a,h)),wf(d=>!0!==d,!0))}(p,h,d,c).pipe(Xo(g=>g&&function BIe(c){return"boolean"==typeof c}(g)?function jIe(c,a,l,h){return ho(a).pipe(Up(d=>tN(function qIe(c,a){return null!==c&&a&&a(new pIe(c)),jn(!0)}(d.route.parent,h),function ZIe(c,a){return null!==c&&a&&a(new mIe(c)),jn(!0)}(d.route,h),function YIe(c,a,l){const h=a[a.length-1],f=a.slice(0,a.length-1).reverse().map(p=>function FIe(c){const a=c.routeConfig?c.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:c,guards:a}:null}(p)).filter(p=>null!==p).map(p=>cJ(()=>jn(p.guards.map(m=>{const v=bS(p.node)??l,y=By(m,v);return zp(function zIe(c){return c&&xS(c.canActivateChild)}(y)?y.canActivateChild(h,c):v.runInContext(()=>y(h,c))).pipe(wf())})).pipe(Vy())));return jn(f).pipe(Vy())}(c,d.path,l),function XIe(c,a,l){const h=a.routeConfig?a.routeConfig.canActivate:null;if(!h||0===h.length)return jn(!0);const d=h.map(f=>cJ(()=>{const p=bS(a)??l,g=By(f,p);return zp(function UIe(c){return c&&xS(c.canActivate)}(g)?g.canActivate(a,c):p.runInContext(()=>g(a,c))).pipe(wf())}));return jn(d).pipe(Vy())}(c,d.route,l))),wf(d=>!0!==d,!0))}(h,f,c,a):jn(g)),Qn(g=>({...l,guardsResult:g})))})}(this.environmentInjector,p=>this.events.next(p)),Lo(p=>{if(h.guardsResult=p.guardsResult,Am(p.guardsResult))throw UJ(0,p.guardsResult);const g=new cIe(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(g)}),Kr(p=>!!p.guardsResult||(l.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),ON(p=>{if(p.guards.canActivateChecks.length)return jn(p).pipe(Lo(g=>{const m=new uIe(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),hu(g=>{let m=!1;return jn(g).pipe(function _Pe(c,a){return Xo(l=>{const{targetSnapshot:h,guards:{canActivateChecks:d}}=l;if(!d.length)return jn(l);let f=0;return ho(d).pipe(Up(p=>function bPe(c,a,l,h){const d=c.routeConfig,f=c._resolve;return void 0!==d?.title&&!see(d)&&(f[hS]=d.title),function CPe(c,a,l,h){const d=function SPe(c){return[...Object.keys(c),...Object.getOwnPropertySymbols(c)]}(c);if(0===d.length)return jn({});const f={};return ho(d).pipe(Xo(p=>function xPe(c,a,l,h){const d=bS(a)??h,f=By(c,d);return zp(f.resolve?f.resolve(a,l):d.runInContext(()=>f(a,l)))}(c[p],a,l,h).pipe(wf(),Lo(g=>{f[p]=g}))),iN(1),function P3e(c){return Qn(()=>c)}(f),mr(p=>SN(p)?Qh:Ay(p)))}(f,c,a,h).pipe(Qn(p=>(c._resolvedData=p,c.data=NJ(c,l).resolve,d&&see(d)&&(c.data[hS]=d.title),null)))}(p.route,h,c,a)),Lo(()=>f++),iN(1),Xo(p=>f===d.length?jn(l):Qh))})}(l.paramsInheritanceStrategy,this.environmentInjector),Lo({next:()=>m=!0,complete:()=>{m||(l.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),Lo(g=>{const m=new hIe(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}))}),ON(p=>{const g=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe(Lo(y=>{m.component=y}),Qn(()=>{})));for(const y of m.children)v.push(...g(y));return v};return pT(g(p.targetSnapshot.root)).pipe(gT(),id(1))}),ON(()=>this.afterPreactivation()),Qn(p=>{const g=function xIe(c,a,l){const h=yS(c,a._root,l?l._root:void 0);return new FJ(h,a)}(l.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return h={...p,targetRouterState:g}}),Lo(p=>{l.currentUrlTree=p.urlAfterRedirects,l.rawUrlTree=l.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),l.routerState=p.targetRouterState,"deferred"===l.urlUpdateStrategy&&(p.extras.skipLocationChange||l.setBrowserUrl(l.rawUrlTree,p),l.browserUrlTree=p.urlAfterRedirects)}),((c,a,l)=>Qn(h=>(new PIe(a,h.targetRouterState,h.currentRouterState,l).activate(c),h)))(this.rootContexts,l.routeReuseStrategy,p=>this.events.next(p)),Lo({next:p=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,l.navigated=!0,this.events.next(new Im(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(l.currentUrlTree))),l.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{d=!0}}),rN(()=>{d||f||this.cancelNavigationTransition(h,"",1),this.currentNavigation?.id===h.id&&(this.currentNavigation=null)}),mr(p=>{if(f=!0,$J(p)){HJ(p)||(l.navigated=!0,l.restoreHistory(h,!0));const g=new xT(h.id,this.urlSerializer.serialize(h.extractedUrl),p.message,p.cancellationCode);if(this.events.next(g),HJ(p)){const m=l.urlHandlingStrategy.merge(p.url,l.rawUrlTree),v={skipLocationChange:h.extras.skipLocationChange,replaceUrl:"eager"===l.urlUpdateStrategy||lee(h.source)};l.scheduleNavigation(m,vS,null,v,{resolve:h.resolve,reject:h.reject,promise:h.promise})}else h.resolve(!1)}else{l.restoreHistory(h,!0);const g=new IJ(h.id,this.urlSerializer.serialize(h.extractedUrl),p,h.targetSnapshot??void 0);this.events.next(g);try{h.resolve(l.errorHandler(p))}catch(m){h.reject(m)}}return Qh}))}))}cancelNavigationTransition(l,h,d){const f=new xT(l.id,this.urlSerializer.serialize(l.extractedUrl),h,d);this.events.next(f),l.resolve(!1)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function lee(c){return c!==vS}let cee=(()=>{class c{buildTitle(l){let h,d=l.root;for(;void 0!==d;)h=this.getResolvedTitleForRoute(d)??h,d=d.children.find(f=>f.outlet===Fi);return h}getResolvedTitleForRoute(l){return l.data[hS]}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:function(){return Gi(DPe)},providedIn:"root"}),c})(),DPe=(()=>{class c extends cee{constructor(l){super(),this.title=l}updateTitle(l){const h=this.buildTitle(l);void 0!==h&&this.title.setTitle(h)}}return c.\u0275fac=function(l){return new(l||c)(Pe(iJ))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),TPe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:function(){return Gi(MPe)},providedIn:"root"}),c})();class kPe{shouldDetach(a){return!1}store(a,l){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,l){return a.routeConfig===l.routeConfig}}let MPe=(()=>{class c extends kPe{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const RT=new sn("",{providedIn:"root",factory:()=>({})});let APe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:function(){return Gi(IPe)},providedIn:"root"}),c})(),IPe=(()=>{class c{shouldProcessUrl(l){return!0}extract(l){return l}merge(l,h){return l}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function PPe(c){throw c}function RPe(c,a,l){return a.parse("/")}const FPe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LPe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let js=(()=>{class c{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Gi(c4e),this.isNgZoneEnabled=!1,this.options=Gi(RT,{optional:!0})||{},this.errorHandler=this.options.errorHandler||PPe,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||RPe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Gi(APe),this.routeReuseStrategy=Gi(TPe),this.urlCreationStrategy=Gi(bIe),this.titleStrategy=Gi(cee),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=gJ(Gi(Uy,{optional:!0})??[]),this.navigationTransitions=Gi(PT),this.urlSerializer=Gi(fS),this.location=Gi(TL),this.isNgZoneEnabled=Gi(Bi)instanceof Bi&&Bi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mm,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=LJ(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(l=>{this.lastSuccessfulId=l.id,this.currentPageId=l.targetPageId},l=>{this.console.warn(`Unhandled Navigation Error: ${l}`)})}resetRootComponentType(l){this.routerState.root.component=l,this.navigationTransitions.rootComponentType=l}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const l=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vS,l)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(l=>{const h="popstate"===l.type?"popstate":"hashchange";"popstate"===h&&setTimeout(()=>{this.navigateToSyncWithBrowser(l.url,h,l.state)},0)}))}navigateToSyncWithBrowser(l,h,d){const f={replaceUrl:!0},p=d?.navigationId?d:null;if(d){const m={...d};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}const g=this.parseUrl(l);this.scheduleNavigation(g,h,p,f)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(l){this.config=l.map(CN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(l,h={}){const{relativeTo:d,queryParams:f,fragment:p,queryParamsHandling:g,preserveFragment:m}=h,v=m?this.currentUrlTree.fragment:p;let y=null;switch(g){case"merge":y={...this.currentUrlTree.queryParams,...f};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=f||null}return null!==y&&(y=this.removeEmptyProps(y)),this.urlCreationStrategy.createUrlTree(d,this.routerState,this.currentUrlTree,l,y,v??null)}navigateByUrl(l,h={skipLocationChange:!1}){const d=Am(l)?l:this.parseUrl(l),f=this.urlHandlingStrategy.merge(d,this.rawUrlTree);return this.scheduleNavigation(f,vS,null,h)}navigate(l,h={skipLocationChange:!1}){return function NPe(c){for(let a=0;a<c.length;a++){if(null==c[a])throw new xt(4008,!1)}}(l),this.navigateByUrl(this.createUrlTree(l,h),h)}serializeUrl(l){return this.urlSerializer.serialize(l)}parseUrl(l){let h;try{h=this.urlSerializer.parse(l)}catch(d){h=this.malformedUriErrorHandler(d,this.urlSerializer,l)}return h}isActive(l,h){let d;if(d=!0===h?{...FPe}:!1===h?{...LPe}:h,Am(l))return yJ(this.currentUrlTree,l,d);const f=this.parseUrl(l);return yJ(this.currentUrlTree,f,d)}removeEmptyProps(l){return Object.keys(l).reduce((h,d)=>{const f=l[d];return null!=f&&(h[d]=f),h},{})}scheduleNavigation(l,h,d,f,p){if(this.disposed)return Promise.resolve(!1);let g,m,v,y;return p?(g=p.resolve,m=p.reject,v=p.promise):v=new Promise((_,b)=>{g=_,m=b}),y="computed"===this.canceledNavigationResolution?d&&d.\u0275routerPageId?d.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:y,source:h,restoredState:d,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:l,extras:f,resolve:g,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(_=>Promise.reject(_))}setBrowserUrl(l,h){const d=this.urlSerializer.serialize(l),f={...h.extras.state,...this.generateNgRouterState(h.id,h.targetPageId)};this.location.isCurrentPathEqualTo(d)||h.extras.replaceUrl?this.location.replaceState(d,"",f):this.location.go(d,"",f)}restoreHistory(l,h=!1){if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-l.targetPageId;"popstate"!==l.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===d?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===d&&(this.resetState(l),this.browserUrlTree=l.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(h&&this.resetState(l),this.resetUrlToCurrentUrlTree())}resetState(l){this.routerState=l.currentRouterState,this.currentUrlTree=l.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,l.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(l,h){return"computed"===this.canceledNavigationResolution?{navigationId:l,\u0275routerPageId:h}:{navigationId:l}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class dee{}let VPe=(()=>{class c{constructor(l,h,d,f,p){this.router=l,this.injector=d,this.preloadingStrategy=f,this.loader=p}setUpPreloading(){this.subscription=this.router.events.pipe(Kr(l=>l instanceof Im),Up(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(l,h){const d=[];for(const f of h){f.providers&&!f._injector&&(f._injector=HD(f.providers,l,`Route: ${f.path}`));const p=f._injector??l,g=f._loadedInjector??p;f.loadChildren&&!f._loadedRoutes&&void 0===f.canLoad||f.loadComponent&&!f._loadedComponent?d.push(this.preloadConfig(p,f)):(f.children||f._loadedRoutes)&&d.push(this.processRoutes(g,f.children??f._loadedRoutes))}return ho(d).pipe(Uv())}preloadConfig(l,h){return this.preloadingStrategy.preload(h,()=>{let d;d=h.loadChildren&&void 0===h.canLoad?this.loader.loadChildren(l,h):jn(null);const f=d.pipe(Xo(p=>null===p?jn(void 0):(h._loadedRoutes=p.routes,h._loadedInjector=p.injector,this.processRoutes(p.injector??l,p.routes))));return h.loadComponent&&!h._loadedComponent?ho([f,this.loader.loadComponent(h)]).pipe(Uv()):f})}}return c.\u0275fac=function(l){return new(l||c)(Pe(js),Pe(VY),Pe(Xh),Pe(dee),Pe(DN))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const kN=new sn("");let fee=(()=>{class c{constructor(l,h,d,f,p={}){this.urlSerializer=l,this.transitions=h,this.viewportScroller=d,this.zone=f,this.options=p,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},p.scrollPositionRestoration=p.scrollPositionRestoration||"disabled",p.anchorScrolling=p.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(l=>{l instanceof hN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=l.navigationTrigger,this.restoredId=l.restoredState?l.restoredState.navigationId:0):l instanceof Im&&(this.lastId=l.id,this.scheduleScrollEvent(l,this.urlSerializer.parse(l.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(l=>{l instanceof PJ&&(l.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(l.position):l.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(l.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(l,h){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new PJ(l,"popstate"===this.lastSource?this.store[this.restoredId]:null,h))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return c.\u0275fac=function(l){!function iq(){throw new Error("invalid")}()},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();function Pm(c,a){return{\u0275kind:c,\u0275providers:a}}function gee(){const c=Gi(As);return a=>{const l=c.get(nS);if(a!==l.components[0])return;const h=c.get(js),d=c.get(mee);1===c.get(EN)&&h.initialNavigation(),c.get(vee,null,ci.Optional)?.setUpPreloading(),c.get(kN,null,ci.Optional)?.init(),h.resetRootComponentType(l.componentTypes[0]),d.closed||(d.next(),d.unsubscribe())}}const mee=new sn("",{factory:()=>new Tt}),EN=new sn("",{providedIn:"root",factory:()=>1});const vee=new sn("");function WPe(c){return Pm(0,[{provide:vee,useExisting:VPe},{provide:dee,useExisting:c}])}const yee=new sn("ROUTER_FORROOT_GUARD"),GPe=[TL,{provide:fS,useClass:sN},js,_S,{provide:Ny,useFactory:function pee(c){return c.routerState.root},deps:[js]},DN,[]];function QPe(){return new QY("Router",js)}let _ee=(()=>{class c{constructor(l){}static forRoot(l,h){return{ngModule:c,providers:[GPe,[],{provide:Uy,multi:!0,useValue:l},{provide:yee,useFactory:XPe,deps:[[js,new Pp,new Rp]]},{provide:RT,useValue:h||{}},h?.useHash?{provide:km,useClass:X4e}:{provide:km,useClass:gK},{provide:kN,useFactory:()=>{const c=Gi(fAe),a=Gi(Bi),l=Gi(RT),h=Gi(PT),d=Gi(fS);return l.scrollOffset&&c.setOffset(l.scrollOffset),new fee(d,h,c,a,l)}},h?.preloadingStrategy?WPe(h.preloadingStrategy).\u0275providers:[],{provide:QY,multi:!0,useFactory:QPe},h?.initialNavigation?YPe(h):[],[{provide:bee,useFactory:gee},{provide:NY,multi:!0,useExisting:bee}]]}}static forChild(l){return{ngModule:c,providers:[{provide:Uy,multi:!0,useValue:l}]}}}return c.\u0275fac=function(l){return new(l||c)(Pe(yee,8))},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[_N]}),c})();function XPe(c){return"guarded"}function YPe(c){return["disabled"===c.initialNavigation?Pm(3,[{provide:jD,multi:!0,useFactory:()=>{const a=Gi(js);return()=>{a.setUpLocationChangeListener()}}},{provide:EN,useValue:2}]).\u0275providers:[],"enabledBlocking"===c.initialNavigation?Pm(2,[{provide:EN,useValue:0},{provide:jD,multi:!0,deps:[As],useFactory:a=>{const l=a.get(Z4e,Promise.resolve());return()=>l.then(()=>new Promise(d=>{const f=a.get(js),p=a.get(mee);(function h(d){a.get(js).events.pipe(Kr(p=>p instanceof Im||p instanceof xT||p instanceof IJ),Qn(p=>p instanceof Im||p instanceof xT&&(0===p.code||1===p.code)&&null),Kr(p=>null!==p),id(1)).subscribe(()=>{d()})})(()=>{d(!0)}),a.get(PT).afterPreactivation=()=>(d(!0),p.closed?jn(void 0):p),f.initialNavigation()}))}}]).\u0275providers:[]]}const bee=new sn(""),tRe=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io"}];class nh{constructor(a,l,h,d,f,p,g,m,v){S(this,"id",void 0),S(this,"name",void 0),S(this,"routes",void 0),S(this,"routeEnabled",void 0),S(this,"applicationEnabled",void 0),S(this,"applicationHidden",void 0),S(this,"applicationLogoText",void 0),S(this,"libraryType",void 0),S(this,"libraryRef",void 0),this.id=a,this.name=l,this.routes=h,this.routeEnabled=d,this.applicationEnabled=f,this.applicationHidden=p,this.applicationLogoText=g,this.libraryType=m,this.libraryRef=v}static builder(){return new nh("","",[],!1,!1,!1,"","prod","book")}setId(a){return this.id=a,this}setName(a){return this.name=a,this}setRoutes(a){return this.routes=a,this}setRouteEnabled(a){return this.routeEnabled=a,this}setApplicatioinEnabled(a){return this.applicationEnabled=a,this}setApplicationLogoText(a){return this.applicationLogoText=a,this}setLibraryType(a){return this.libraryType=a,this}setLibraryRef(a){return this.libraryRef=a,this}enable(a=!0){return this.routeEnabled=a,this.applicationEnabled=a,this}hide(a=!0){return this.applicationHidden=a,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class ai{constructor(a,l,h,d,f,p=null,g=null){S(this,"link",void 0),S(this,"name",void 0),S(this,"shape",void 0),S(this,"hasBadge",void 0),S(this,"hasAlert",void 0),S(this,"onClick",void 0),S(this,"isActive",void 0),this.link=a,this.name=l,this.shape=h,this.hasBadge=d,this.hasAlert=f,this.onClick=p,this.isActive=g}static builder(){return new ai("","","",!1,!1)}setIsActive(a){return this.isActive=a,this}setOnClick(a){return this.onClick=a,this}setLink(a){return this.link=a,this}setName(a){return this.name=a,this}setShape(a){return this.shape=a,this}setHasBadge(a){return this.hasBadge=a,this}setHasAlert(a){return this.hasAlert=a,this}runOnClick(){this.onClick&&this.onClick(this)}}class nRe{constructor(){S(this,"version",""),S(this,"applicationId","memorial"),S(this,"applicationName","Memorial"),S(this,"developers",tRe),S(this,"production",!0),S(this,"platform","Web"),S(this,"relativeCacheService",!0),S(this,"serviceAPIHost",""),S(this,"redirectToServerAfterItIsReadyAdress",""),S(this,"portAutoDetection",!0),S(this,"portAutoIncrementValue",0),S(this,"defaultRoute","/compiler"),S(this,"coding",!0),S(this,"showOldVersions",!0),S(this,"useDictionaries",!1),S(this,"themeName","blue"),S(this,"serverType","rest"),S(this,"applications",[]),this.addApplication(nh.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setRoutes([ai.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(nh.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([ai.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),ai.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),ai.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image"),ai.builder().setLink("dynamic-components-examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0414\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442").setShape("blocks-group"),ai.builder().setLink("help").setName("\u041f\u043e\u043c\u043e\u0449\u044c").setShape("help"),ai.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")]).hide()).addApplication(nh.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([ai.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")]).hide()).addApplication(nh.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setLibraryType("prod").setLibraryRef("biblia").setRoutes([ai.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(nh.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setLibraryType("mprod").setLibraryRef("ps").setRoutes([ai.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("note")])).addApplication(nh.builder().setId("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setLibraryType("cprod").setLibraryRef("calc").setApplicationLogoText("\u041c\u0410\u0422\u0410\u041d|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([ai.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")]).hide()).addApplication(nh.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setLibraryType("clndrprod").setLibraryRef("clndr").setRoutes([ai.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")]).hide()).addApplication(nh.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setLibraryType("compprod").setLibraryRef("comp").setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([ai.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(nh.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setLibraryType("schprod").setLibraryRef("sch").setRoutes([ai.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).setVersion("BV.2.0.272"),this.afterConstruct()}addApplication(a){if(null!=this.applications.find(l=>l.id==a.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${a.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(a),this}setVersion(a){return this.version=a,this}setProduction(a){return this.production=a,this}setPlatform(a){return this.platform=a,this}setRelativeCacheService(a){return this.relativeCacheService=a,this}setServiceAPIHost(a){return this.serviceAPIHost=a,this}setRedirectToServerAfterItIsReadyAdress(a){return this.redirectToServerAfterItIsReadyAdress=a,this}setPortAutoDetection(a){return this.portAutoDetection=a,this}setPortAutoIncrementValue(a){return this.portAutoIncrementValue=a,this}setDefaultRoute(a){return this.defaultRoute=a,this}setServerType(a){return this.serverType=a,this}setCoding(a){return this.coding=a,this}setShowOldVersions(a){return this.showOldVersions=a,this}setUseDictionaries(a){return this.useDictionaries=a,this}afterConstruct(){}}class AN extends nRe{afterConstruct(){super.afterConstruct(),this.setVersion("WPR.2.0.272").setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((a,l,h)=>a.enable())}static builder(){return new AN}}const ih=AN.builder();class Hy{constructor(a,l,h,d,f,p){S(this,"type",void 0),S(this,"time",void 0),S(this,"sender",void 0),S(this,"target",void 0),S(this,"subType",void 0),S(this,"text",void 0),this.type=a,this.time=l,this.sender=h,this.target=d,this.subType=f,this.text=p}static builder(){return new Hy("",Date.now(),"","","","")}setType(a){return this.type=a,this}setTime(a){return this.time=a,this}setSender(a){return this.sender=a,this}setTarget(a){return this.target=a,this}setSubType(a){return this.subType=a,this}setText(a){return this.text=a,this}}class IN{constructor(a,l){S(this,"id",void 0),S(this,"handler",void 0),this.id=a,this.handler=l}static builder(){return new IN(-1,()=>{})}setId(a){return this.id=a,this}setHandler(a){return this.handler=a,this}}class iRe{constructor(){S(this,"id",1),S(this,"handlers",new Map),S(this,"targetHandlers",new Map),S(this,"messagesToTarget",new Map),S(this,"messagesTimeoutMs",18e4)}newId(){return this.id++}putMessage(a){let l=a.target,h=this.messagesToTarget.get(l);return null==h&&(h=[]),h.push(a),h=this.removeOld(h),h?this.messagesToTarget.set(l,h):this.messagesToTarget.delete(l),this}getMessages(a,l=!0){let h=this.messagesToTarget.get(a),d=this.removeOld(h);return null==h&&l&&this.messagesToTarget.delete(a),d}removeAllOld(){let a=[];return this.messagesToTarget.forEach((l,h,d)=>{a.push(h)}),a.forEach(l=>{this.getMessages(l,!1)}),this}removeOld(a){if(void 0===a)return;let l=Date.now(),h=a.findIndex(f=>f.time+this.messagesTimeoutMs>l),d=a;return h>0&&(d=a.splice(0,h)),d}sendMessage(a){this.handlers.forEach((h,d,f)=>{h(a)});let l=this.targetHandlers.get(a.target);l&&l.forEach(h=>{h.handler(a)})}addHandler(a){let l=this.newId();this.handlers.set(l,a);let h=this;return{unsubscribe(){h.removeHandler(l)}}}addTargetHandler(a,l){let h=this.newId(),d=this.targetHandlers.get(a);null==d&&(d=[],this.targetHandlers.set(a,d)),d.push(IN.builder().setId(h).setHandler(l));let f=this;return{unsubscribe(){f.removeTargetHandler(a,h)}}}removeAllTargetHandlers(a){return this.targetHandlers.delete(a),this}removeHandler(a){this.handlers.delete(a)}removeTargetHandler(a,l){let h=this.targetHandlers.get(a);if(h){let d=h.filter((f,p,g)=>f.id!=l);d.length?this.targetHandlers.set(a,d):this.targetHandlers.delete(a)}}}class Pr{static of(a,l,h){return new Pr(a,l,h)}constructor(a,l,h){S(this,"text",void 0),S(this,"innerButtonText",void 0),S(this,"timeout",void 0),S(this,"buttonText",""),S(this,"config",null),this.text=a,this.innerButtonText=l,this.timeout=h,this.update()}setConfig(a){this.config=a}update(){return this.buttonText=this.innerButtonText+" ("+this.timeout--+"s)",this.timeout>=0}onButtonClick(){this.remove()}remove(){this.config.removeAlert(this)}}class See{constructor(a,l,h){S(this,"action",void 0),S(this,"delayMS",void 0),S(this,"delayRequest",void 0),S(this,"requestedAction",!1),S(this,"runTimer",!1),S(this,"onDones",[]),this.action=a,this.delayMS=l,this.delayRequest=h}requestAction(a){this.requestedAction=!0,this.runTimer||this.delayRequest(this.delayMS,()=>{this.checkAction()}),a&&this.onDones.push(a)}checkAction(){if(this.requestedAction)this.runTimer||(this.delayRequest(this.delayMS,()=>this.checkAction()),this.runTimer=!0);else{let a=this.onDones;this.onDones=[],this.action?this.action(a):a&&a.forEach(l=>l(!0)),this.runTimer=!1}this.requestedAction=!1}}class DS{constructor(a,l){S(this,"config",void 0),S(this,"waitingForSenderId",void 0),S(this,"enabled",!1),S(this,"checkTimeoutMs",100),this.config=a,this.waitingForSenderId=l}static builder(){return new DS(null,"")}setConfig(a){return this.config=a,this}setWaitingForSenderId(a){return this.waitingForSenderId=a,this.enabled=!this.waitingForSenderId,this}setCheckTimeout(a){return this.checkTimeoutMs=a,this}checkEnabled(){return!(!this.enabled&&this.config)||(this.config.messageBus.getMessages(this.waitingForSenderId)?.length?this.config.post(()=>{this.enabled=!0}):this.checkLatter(),this.enabled)}checkLatter(){return!(!this.enabled&&this.config)||(this.config.post(()=>this.checkEnabled(),this.checkTimeoutMs),this.enabled)}setEnabled(a){return this.enabled=a,this}}class FT{setDictionaries(a){return this.dictionaries=a,this}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}isUseDictionaries(){return this.useDictionaries}setShowNormal(){return this.showType="normal",this}setShowLogin(a=null){return null!=a&&(this.autoLoginApplication=a),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let a="";return this.environment.developers.forEach(l=>{a=a+(a?"_":"")+l.id}),a}get developerName(){let a="";return this.environment.developers.forEach(l=>{a=a+(a?", ":"")+l.name}),a}get developerNameSortOrder(){let a="";return this.environment.developers.forEach(l=>{a=a+(a?", ":"")+l.nameSortOrder}),a}get developerLink(){return this.environment.developers[0].link}setPageLoadedFrom(a,l=!1){return this.pageLoadedFrom=a,l&&this.runPortAutoDetection(),this.setupBaseHref(),this}constructor(){S(this,"cache",new Map),S(this,"environment",ih),S(this,"themeName",ih.themeName),S(this,"serviceAPIHost",ih.serviceAPIHost),S(this,"redirectToServerAfterItIsReadyAdress",ih.redirectToServerAfterItIsReadyAdress),S(this,"portAutoDetection",ih.portAutoDetection),S(this,"portAutoIncrementValue",ih.portAutoIncrementValue),S(this,"messageBus",new iRe),S(this,"alerts",[]),S(this,"upperMenuEnabled",!0),S(this,"pageLoadedFrom",""),S(this,"authId",""),S(this,"authIdKey","authId"),S(this,"authBody",""),S(this,"baseHref",""),S(this,"waitingIOOperationCount",0),S(this,"waitingIOOperationValue",0),S(this,"waitingIOOperationValueMax",100),S(this,"outletOnly",!1),S(this,"autoLoginApplication",!0),S(this,"defaultApplication",""),S(this,"defaultLoginType","login"),S(this,"showType",this.defaultLoginType),S(this,"enableDefaultPersons",!0),S(this,"coding",ih.coding),S(this,"showOldVersions",ih.showOldVersions),S(this,"useDictionaries",ih.useDictionaries),S(this,"dictionaries",null),typeof pageLoadedFrom<"u"&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}setupBaseHref(){let a=this.pageLoadedFrom;a.endsWith("/")&&(a=a.substring(0,a.length-1)),this.baseHref=a}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(a){const l=a.lastIndexOf(":");if(l<0)return a;let h="";for(let p=l+1;p<a.length&&"0123456789".indexOf(a.charAt(p))>=0;++p)h+=a.charAt(p);return isNaN(+h)?a:a.substring(0,l)+":"+(+location.port+ih.portAutoIncrementValue)+a.substring(l+1+h.length,a.length)}addAlert(a){a.setConfig(this),this.alerts.push(a)}removeAlert(a){const l=this.alerts.findIndex((h,d,f)=>h===a);l>=0&&this.alerts.splice(l,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(a){return this.environment.platform===a}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(a){return this.environment.serverType===a}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(a){return this.themeName===a}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(a,l=0){setTimeout(()=>{a()},l)}getApplication(){let a=null;return this.environment.applications.forEach(l=>{l.id==this.defaultApplication&&(a=l)}),a}getApplicationByNameOrNull(a){let l=null;return this.environment.applications.forEach(h=>{h.name==a&&(l=h)}),l}getSingleAppOrNull(){let a=null,l=this.environment.applications.filter(h=>h.applicationEnabled&&!h.applicationHidden);return 1==l.length&&(a=l[0]),a}}const xee=class rRe{static isWebGLAvailable(){try{const a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch{return!1}}static isWebGL2Available(){try{const a=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!a.getContext("webgl2"))}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(a){const h={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let d='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const f=document.createElement("div");return f.id="webglmessage",f.style.fontFamily="monospace",f.style.fontSize="13px",f.style.fontWeight="normal",f.style.textAlign="center",f.style.background="#fff",f.style.color="#000",f.style.padding="1.5em",f.style.width="400px",f.style.margin="5em auto 0",d=d.replace("$0",h[a]?"graphics card":"browser"),d=d.replace("$1",{1:"WebGL",2:"WebGL 2"}[a]),f.innerHTML=d,f}};let PN=(()=>{class c{getStorage(l){try{return localStorage.getItem(l)}catch{}return""}setStorage(l,h){try{localStorage.setItem(l,h)}catch{}}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),ln=(()=>{class c extends FT{constructor(l){super(),S(this,"localStorageSvc",void 0),S(this,"loginTypeLSName","login3d"),S(this,"login3dValue","3d"),this.localStorageSvc=l,this.setDefaultLoginType(this.isLogin3dRequested()),this.showType=this.defaultLoginType}setDefaultLoginType(l){this.defaultLoginType=xee.isWebGLAvailable()&&l?"login3d":"login"}requestLogin3d(l){this.setDefaultLoginType(l),this.localStorageSvc.setStorage(this.loginTypeLSName,xee.isWebGLAvailable()&&l?this.login3dValue:"no")}isLogin3dRequested(){return!this.localStorageSvc.getStorage(this.loginTypeLSName)||this.localStorageSvc.getStorage(this.loginTypeLSName)==this.login3dValue}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(PN))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class sRe{constructor(a,l){this.fn=a,this.subscriptions=l}unsubscribe(){const a=this.subscriptions.indexOf(this);-1!==a&&this.subscriptions.splice(a,1)}}function Hp(c){return null!=c&&"object"==typeof c&&!0===c["@@functional/placeholder"]}function od(c){return function a(l){return 0===arguments.length||Hp(l)?a:c.apply(this,arguments)}}function ad(c){return function a(l,h){switch(arguments.length){case 0:return a;case 1:return Hp(l)?a:od(function(d){return c(l,d)});default:return Hp(l)&&Hp(h)?a:Hp(l)?od(function(d){return c(d,h)}):Hp(h)?od(function(d){return c(l,d)}):c(l,h)}}}const LT=ad(function(a,l){return l instanceof a||null!=l&&(l.constructor===a||"Object"===a.name&&"object"==typeof l)});function NT(c,a){return Object.prototype.hasOwnProperty.call(a,c)}var wee=Object.prototype.toString;const Oee=function(){return"[object Arguments]"===wee.call(arguments)?function(a){return"[object Arguments]"===wee.call(a)}:function(a){return NT("callee",a)}}(),RN=Array.isArray||function(a){return null!=a&&a.length>=0&&"[object Array]"===Object.prototype.toString.call(a)};function FN(c){return"[object String]"===Object.prototype.toString.call(c)}var uRe=od(function(a){return null!=a&&"function"==typeof a["fantasy-land/empty"]?a["fantasy-land/empty"]():null!=a&&null!=a.constructor&&"function"==typeof a.constructor["fantasy-land/empty"]?a.constructor["fantasy-land/empty"]():null!=a&&"function"==typeof a.empty?a.empty():null!=a&&null!=a.constructor&&"function"==typeof a.constructor.empty?a.constructor.empty():RN(a)?[]:FN(a)?"":function Dee(c){return"[object Object]"===Object.prototype.toString.call(c)}(a)?{}:Oee(a)?function(){return arguments}():function cRe(c){var a=Object.prototype.toString.call(c);return"[object Uint8ClampedArray]"===a||"[object Int8Array]"===a||"[object Uint8Array]"===a||"[object Int16Array]"===a||"[object Uint16Array]"===a||"[object Int32Array]"===a||"[object Uint32Array]"===a||"[object Float32Array]"===a||"[object Float64Array]"===a||"[object BigInt64Array]"===a||"[object BigUint64Array]"===a}(a)?a.constructor.from(""):void 0});const hRe=uRe;function Tee(c){for(var l,a=[];!(l=c.next()).done;)a.push(l.value);return a}function kee(c,a,l){for(var h=0,d=l.length;h<d;){if(c(a,l[h]))return!0;h+=1}return!1}const LN="function"==typeof Object.is?Object.is:function fRe(c,a){return c===a?0!==c||1/c==1/a:c!=c&&a!=a};var pRe=!{toString:null}.propertyIsEnumerable("toString"),Mee=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Eee=function(){return arguments.propertyIsEnumerable("length")}(),gRe=function(a,l){for(var h=0;h<a.length;){if(a[h]===l)return!0;h+=1}return!1};const NN=od("function"!=typeof Object.keys||Eee?function(a){if(Object(a)!==a)return[];var l,h,d=[],f=Eee&&Oee(a);for(l in a)NT(l,a)&&(!f||"length"!==l)&&(d[d.length]=l);if(pRe)for(h=Mee.length-1;h>=0;)NT(l=Mee[h],a)&&!gRe(d,l)&&(d[d.length]=l),h-=1;return d}:function(a){return Object(a)!==a?[]:Object.keys(a)}),Aee=od(function(a){return null===a?"Null":void 0===a?"Undefined":Object.prototype.toString.call(a).slice(8,-1)});function Iee(c,a,l,h){var d=Tee(c);function p(g,m){return BN(g,m,l.slice(),h.slice())}return!kee(function(g,m){return!kee(p,m,g)},Tee(a),d)}function BN(c,a,l,h){if(LN(c,a))return!0;var d=Aee(c);if(d!==Aee(a))return!1;if("function"==typeof c["fantasy-land/equals"]||"function"==typeof a["fantasy-land/equals"])return"function"==typeof c["fantasy-land/equals"]&&c["fantasy-land/equals"](a)&&"function"==typeof a["fantasy-land/equals"]&&a["fantasy-land/equals"](c);if("function"==typeof c.equals||"function"==typeof a.equals)return"function"==typeof c.equals&&c.equals(a)&&"function"==typeof a.equals&&a.equals(c);switch(d){case"Arguments":case"Array":case"Object":if("function"==typeof c.constructor&&"Promise"===function dRe(c){var a=String(c).match(/^function (\w*)/);return null==a?"":a[1]}(c.constructor))return c===a;break;case"Boolean":case"Number":case"String":if(typeof c!=typeof a||!LN(c.valueOf(),a.valueOf()))return!1;break;case"Date":if(!LN(c.valueOf(),a.valueOf()))return!1;break;case"Error":return c.name===a.name&&c.message===a.message;case"RegExp":if(c.source!==a.source||c.global!==a.global||c.ignoreCase!==a.ignoreCase||c.multiline!==a.multiline||c.sticky!==a.sticky||c.unicode!==a.unicode)return!1}for(var f=l.length-1;f>=0;){if(l[f]===c)return h[f]===a;f-=1}switch(d){case"Map":return c.size===a.size&&Iee(c.entries(),a.entries(),l.concat([c]),h.concat([a]));case"Set":return c.size===a.size&&Iee(c.values(),a.values(),l.concat([c]),h.concat([a]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var p=NN(c);if(p.length!==NN(a).length)return!1;var g=l.concat([c]),m=h.concat([a]);for(f=p.length-1;f>=0;){var v=p[f];if(!NT(v,a)||!BN(a[v],c[v],g,m))return!1;f-=1}return!0}const Pee=ad(function(a,l){return BN(a,l,[],[])}),Ree=od(function(a){return null!=a&&Pee(a,hRe(a))});function TS(c){return null==c}function $p(c){return TS(c)||Ree(c)}function VN(c){return LT(String,c)}function BT(c){return LT(Object,c)}function Lee(c){return LT(Map,c)}function Nee(c,a){return c!==a}function Bee(c,a){return JSON.stringify(c)===JSON.stringify(a)}function Vee(c){const a=new Map;for(const[l,h]of c)Lee(h)?a.set(l,Vee(h)):a.set(l,h);return a}function wRe(c){switch(!0){case Lee(c):return Vee(c);case BT(c)&&!Array.isArray(c):return Rm({},c);default:return JSON.parse(JSON.stringify(c))}}function Rm(...c){const a={};return c.map(l=>BT(l)?{...l}:{}).forEach(l=>{Object.keys(l).forEach(h=>{const d=l[h];a[h]=Array.isArray(d)?Array.from(d):BT(d)?Rm(a[h]||{},d):d})}),a}function zee(c=window){return!TS(c)}let VT,Hee,UN,zN;function $ee(c=!0){if(!c||!VT){const a=document&&document.querySelector("[ng-version]");VT=a?""+a.getAttribute("ng-version"):void 0}return VT}function MRe(c=!0){return c&&VT||(Hee=window?.angular?.version?.full),Hee}function Wee(c=!0){return c&&UN||(UN=window?.CDS?._react?.version?window.CDS._react.version:document.querySelector("[data-reactroot], [data-reactid]")?"unknown version":void 0),UN}function Gee(c=!0){if(!c||!zN){const a=document.querySelectorAll("*");let l;for(let h=0;h<a.length;h++)if(a[h].__vue__){l=a[h];break}zN=l?"unknown version":void 0}return zN}function Fm(c){return c.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}function Zee(c){return c.charAt(0).toUpperCase()+c.slice(1)}const LRe=new class{constructor(){if(this.supports={js:!0},!document.body.hasAttribute("cds-supports")||"no-js"===document.body.getAttribute("cds-supports")){const c=Fm(Object.keys(this.supports).reduce((a,l)=>`${a} ${this.supports[l]?l:"no-"+l}`,"")).trim();document.body.setAttribute("cds-supports",c)}}};function $N(c,a){switch(c){case 0:return function(){return a.apply(this,arguments)};case 1:return function(l){return a.apply(this,arguments)};case 2:return function(l,h){return a.apply(this,arguments)};case 3:return function(l,h,d){return a.apply(this,arguments)};case 4:return function(l,h,d,f){return a.apply(this,arguments)};case 5:return function(l,h,d,f,p){return a.apply(this,arguments)};case 6:return function(l,h,d,f,p,g){return a.apply(this,arguments)};case 7:return function(l,h,d,f,p,g,m){return a.apply(this,arguments)};case 8:return function(l,h,d,f,p,g,m,v){return a.apply(this,arguments)};case 9:return function(l,h,d,f,p,g,m,v,y){return a.apply(this,arguments)};case 10:return function(l,h,d,f,p,g,m,v,y,_){return a.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Yee(c,a,l){return function(){for(var h=[],d=0,f=c,p=0;p<a.length||d<arguments.length;){var g;p<a.length&&(!Hp(a[p])||d>=arguments.length)?g=a[p]:(g=arguments[d],d+=1),h[p]=g,Hp(g)||(f-=1),p+=1}return f<=0?l.apply(this,h):$N(f,Yee(c,h,l))}}const Kee=ad(function(a,l){return 1===a?od(l):$N(a,Yee(a,[],l))}),BRe=Number.isInteger||function(a){return a<<0===a},URe=ad(function(a,l){var h=a<0?l.length+a:a;return FN(l)?l.charAt(h):l[h]}),HRe=ad(function(a,l){return a.map(function(h){for(var p,d=l,f=0;f<h.length;){if(null==d)return;d=BRe(p=h[f])?URe(p,d):d[p],f+=1}return d})}),WRe=ad(function(a,l){return HRe([a],l)[0]}),QRe=Kee(2,(c,a)=>void 0!==WRe(c,a)),Jee=QRe({"@@functional/placeholder":!0},window);class Lm{static log(...a){GN()&&WN()&&console.log(...a)}static warn(...a){GN()&&WN()&&console.warn(...a)}static error(...a){GN()&&WN()&&console.error(...a)}}function WN(){return!Jee(["jasmine"])}function GN(){return!window.CDS.environment.production}function ete(){zee()&&(window.CDS=window.CDS||{_version:[],_react:{version:void 0},_supports:LRe.supports,_isStateProxied:!1,_state:{focusTrapItems:[],layerElements:[],i18nRegistry:{},elementRegistry:{},iconRegistry:{},motionRegistry:{}},environment:{production:!1},getDetails:tte,logDetails:ZRe},function(){const c="6.3.1";window.CDS._version.indexOf(c)<0&&(window.CDS._version.push(c),document.querySelector("body")?.setAttribute("cds-version",window.CDS._version.join(" "))),window.CDS._version.length>1&&Lm.warn("Running more than one version of Clarity can cause unexpected issues. Please ensure only one version is loaded.")}(),window.CDS._isStateProxied||(window.CDS._isStateProxied=!0,window.CDS._state=new Proxy(window.CDS._state,{set:(c,a,l)=>{const h={key:a,prev:window.CDS._state[a],current:l};return c[a]=l,document.dispatchEvent(new CustomEvent("CDS_STATE_UPDATE",{detail:h})),!0}})))}function tte(){return{versions:window.CDS._version,environment:window.CDS.environment,userAgent:navigator.userAgent,supports:window.CDS._supports,angularVersion:$ee(!1),angularJSVersion:MRe(!1),reactVersion:Wee(!1),vueVersion:Gee(!1),state:{...window.CDS._state,iconRegistry:Object.keys(window.CDS._state.iconRegistry),motionRegistry:Object.keys(window.CDS._state.motionRegistry),focusTrapRegistry:Object.keys(window.CDS._state.focusTrapItems.map(c=>c.focusTrapId))}}}function ZRe(){Lm.log(JSON.stringify(tte(),null,2))}const QN=new class oRe{constructor(){this.subscriptions=[]}subscribe(a){const l=new sRe(a,this.subscriptions);return this.subscriptions.push(l),l}emit(a){this.subscriptions.forEach(l=>l.fn(a))}toEventObservable(){return this}};QN.listener=document.addEventListener("CDS_STATE_UPDATE",c=>QN.emit(c.detail));class No{static get state(){return ete(),window.CDS._state}static getValue(a){return No.state[a]}static setValue(a,l){No.state[a]=l}static log(){Lm.log(JSON.stringify(No.state,null,2))}}No.stateUpdates=QN.toEventObservable();const qRe=["unknown",{outline:'<circle class="cds-internal-dot-3" cx="31.1" cy="18" r="2.9"/><circle class="cds-internal-dot-2" cx="18" cy="18" r="2.9"/><circle class="cds-internal-dot-1" cx="4.9" cy="18" r="2.9"/>'}];class vr{static get registry(){return{unknown:qRe[1],...No.state.iconRegistry}}static addIcons(...a){No.state.iconRegistry={...No.state.iconRegistry,...Object.fromEntries(a.filter(([l])=>!vr.registry[l]))}}static addAliases(...a){const l=a.filter(([h])=>vr.registry[h]).flatMap(([h,d])=>d.map(f=>[f,vr.registry[h]]));No.state.iconRegistry={...No.state.iconRegistry,...Object.fromEntries(l)}}static getIconNameFromShape(a){return a[0]}}const $y=["angle",{outline:'<path d="M29.52,22.52,18,10.6,6.48,22.52a1.7,1.7,0,0,0,2.45,2.36L18,15.49l9.08,9.39a1.7,1.7,0,0,0,2.45-2.36Z"/>'}],_c=["exclamation-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M18,20.07a1.3,1.3,0,0,1-1.3-1.3v-6a1.3,1.3,0,1,1,2.6,0v6A1.3,1.3,0,0,1,18,20.07Z"/><circle cx="17.95" cy="23.02" r="1.5"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-1.49,6a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,25.5a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,25.5Z"/>'}],bc=["check-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M16.34,23.74l-5-5a1,1,0,0,1,1.41-1.41l3.59,3.59,6.78-6.78a1,1,0,0,1,1.41,1.41Z"/>',solid:'<path d="M30,18A12,12,0,1,1,18,6,12,12,0,0,1,30,18Zm-4.77-2.16a1.4,1.4,0,0,0-2-2l-6.77,6.77L13,17.16a1.4,1.4,0,0,0-2,2l5.45,5.45Z"/>'}],nte=["ellipsis-horizontal",{outline:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>',outlineBadged:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>'}],kS=["window-close",{outline:'<path d="M19.41,18l7.29-7.29a1,1,0,0,0-1.41-1.41L18,16.59,10.71,9.29a1,1,0,0,0-1.41,1.41L16.59,18,9.29,25.29a1,1,0,1,0,1.41,1.41L18,19.41l7.29,7.29a1,1,0,0,0,1.41-1.41Z"/>'}],XRe=["event",{outline:'<path d="M16.17,25.86,10.81,20.5a1,1,0,0,1,1.41-1.41L16.17,23l8.64-8.64a1,1,0,0,1,1.41,1.41Z"/><path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0,.23-.41H23.8L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/><path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',outlineBadged:'<path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0-1.41-1.41L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><path d="M32.25,6h-4V9a2.2,2.2,0,0,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM25.94,16.58l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>',solidAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M33.68,15.4H26.3a1.34,1.34,0,0,1-.36,1.18l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38,7-7h-1A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5Zm-4.06,3.08-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>'}],YRe=["calendar",{outline:'<path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect" x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/>',outlineBadged:'<path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M32.25,6h-4V9a2.2,2.2,0,1,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/>',solidAlerted:'<path d="M33.68,15.4H22.23A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm6,5H26V24h2Zm0-5H26V19h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/>'}],KRe=["eye-hide",{outline:'<path d="M25.19,20.4A6.78,6.78,0,0,0,25.62,18a6.86,6.86,0,0,0-6.86-6.86,6.79,6.79,0,0,0-2.37.43L18,13.23a4.78,4.78,0,0,1,.74-.06A4.87,4.87,0,0,1,23.62,18a4.79,4.79,0,0,1-.06.74Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm9.75,9.75,6.65,6.65a4.81,4.81,0,0,1-2.5.72A4.87,4.87,0,0,1,13.9,18,4.81,4.81,0,0,1,14.62,15.53Zm-1.45-1.45a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>',solid:'<path d="M18.37,11.17A6.79,6.79,0,0,0,16,11.6l8.8,8.8A6.78,6.78,0,0,0,25.23,18,6.86,6.86,0,0,0,18.37,11.17Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm8.3,8.3a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>'}],JRe=["eye",{outline:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><path d="M18.09,11.17A6.86,6.86,0,1,0,25,18,6.86,6.86,0,0,0,18.09,11.17Zm0,11.72A4.86,4.86,0,1,1,23,18,4.87,4.87,0,0,1,18.09,22.89Z"/>',solid:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><circle cx="18.09" cy="18.03" r="6.86"/>'}],eFe=["ellipsis-vertical",{outline:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>',outlineBadged:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>'}],tFe=["view-columns",{outline:'<path d="M31,5H5A2,2,0,0,0,3,7V29a2,2,0,0,0,2,2H31a2,2,0,0,0,2-2V7A2,2,0,0,0,31,5ZM13,29H5V7h8Zm10,0H15V7h8Z"/>'}],nFe=["arrow",{outline:'<path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"/>'}],ite=["times",{outline:'<path d="M19.41,18l8.29-8.29a1,1,0,0,0-1.41-1.41L18,16.59,9.71,8.29A1,1,0,0,0,8.29,9.71L16.59,18,8.29,26.29a1,1,0,1,0,1.41,1.41L18,19.41l8.29,8.29a1,1,0,0,0,1.41-1.41Z"/>'}],iFe=["step-forward-2",{outline:'<path d="M7.08,6.52a1.68,1.68,0,0,0,0,2.4L16.51,18,7.12,27.08a1.7,1.7,0,0,0,2.36,2.44h0L21.4,18,9.48,6.47A1.69,1.69,0,0,0,7.08,6.52Z"/><path d="M26.49,5a1.7,1.7,0,0,0-1.7,1.7V29.3a1.7,1.7,0,0,0,3.4,0V6.7A1.7,1.7,0,0,0,26.49,5Z"/>'}],rte=["angle-double",{outline:'<path d="M29,19.41a1,1,0,0,1-.71-.29L18,8.83,7.71,19.12a1,1,0,0,1-1.41-1.41L18,6,29.71,17.71A1,1,0,0,1,29,19.41Z"/><path d="M29,30.41a1,1,0,0,1-.71-.29L18,19.83,7.71,30.12a1,1,0,0,1-1.41-1.41L18,17,29.71,28.71A1,1,0,0,1,29,30.41Z"/>'}],rFe=["filter-grid-circle",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/><path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],sFe=["filter-grid",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/>',solid:'<path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],ste=["info-circle",{outline:'<circle cx="17.93" cy="11.9" r="1.4"/><path d="M21,23H19V15H16a1,1,0,0,0,0,2h1v6H15a1,1,0,1,0,0,2h6a1,1,0,0,0,0-2Z"/><path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-2,5.15a2,2,0,1,1,2,2A2,2,0,0,1,15.9,11.15ZM23,24a1,1,0,0,1-1,1H15a1,1,0,1,1,0-2h2V17H16a1,1,0,0,1,0-2h4v8h2A1,1,0,0,1,23,24Z"/>'}],oFe=["exclamation-triangle",{outline:'<path d="M18,21.32a1.3,1.3,0,0,0,1.3-1.3V14a1.3,1.3,0,1,0-2.6,0v6A1.3,1.3,0,0,0,18,21.32Z"/><circle cx="17.95" cy="24.27" r="1.5"/><path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43Zm-1.78,1.94a1,1,0,0,1-.86.49H8.21a1,1,0,0,1-.88-1.48L17.07,8.55a1,1,0,0,1,1.76,0l9.74,17.94A1,1,0,0,1,28.55,27.48Z"/>',solid:'<path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43ZM16.46,12.74a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,26.25a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,26.25Z"/>'}],aFe=["circle",{outline:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34Z"/>'}],lFe=["dot-circle",{outline:'<path d="M18,11a7,7,0,1,1-7,7,7,7,0,0,1,7-7"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>'}],ote=["error-standard",{outline:'<circle cx="18" cy="26.06" r="1.33"/><path d="M18,22.61a1,1,0,0,1-1-1v-12a1,1,0,1,1,2,0v12A1,1,0,0,1,18,22.61Z"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,2.1a16,16,0,1,0,16,16A16,16,0,0,0,18,2.1ZM16.6,8.8a1.4,1.4,0,0,1,2.8,0v12a1.4,1.4,0,0,1-2.8,0ZM18,28.6a1.8,1.8,0,1,1,1.8-1.8A1.8,1.8,0,0,1,18,28.6Z"/>'}],cFe=["success-standard",{outline:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M28,12.1a1,1,0,0,0-1.41,0L15.49,23.15l-6-6A1,1,0,0,0,8,18.53L15.49,26,28,13.52A1,1,0,0,0,28,12.1Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM28.45,12.63,15.31,25.76,7.55,18a1.4,1.4,0,0,1,2-2l5.78,5.78L26.47,10.65a1.4,1.4,0,1,1,2,2Z"/>'}];class fFe extends Re{constructor(a,l){super()}schedule(a,l=0){return this}}const UT={setInterval(c,a,...l){const{delegate:h}=UT;return h?.setInterval?h.setInterval(c,a,...l):setInterval(c,a,...l)},clearInterval(c){const{delegate:a}=UT;return(a?.clearInterval||clearInterval)(c)},delegate:void 0};class jN extends fFe{constructor(a,l){super(a,l),this.scheduler=a,this.work=l,this.pending=!1}schedule(a,l=0){var h;if(this.closed)return this;this.state=a;const d=this.id,f=this.scheduler;return null!=d&&(this.id=this.recycleAsyncId(f,d,l)),this.pending=!0,this.delay=l,this.id=null!==(h=this.id)&&void 0!==h?h:this.requestAsyncId(f,this.id,l),this}requestAsyncId(a,l,h=0){return UT.setInterval(a.flush.bind(a,this),h)}recycleAsyncId(a,l,h=0){if(null!=h&&this.delay===h&&!1===this.pending)return l;null!=l&&UT.clearInterval(l)}execute(a,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(a,l);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,l){let d,h=!1;try{this.work(a)}catch(f){h=!0,d=f||new Error("Scheduled action threw falsy error")}if(h)return this.unsubscribe(),d}unsubscribe(){if(!this.closed){const{id:a,scheduler:l}=this,{actions:h}=l;this.work=this.state=this.scheduler=null,this.pending=!1,xe(h,this),null!=a&&(this.id=this.recycleAsyncId(l,a,null)),this.delay=null,super.unsubscribe()}}}const ZN={now:()=>(ZN.delegate||Date).now(),delegate:void 0};class MS{constructor(a,l=MS.now){this.schedulerActionCtor=a,this.now=l}schedule(a,l=0,h){return new this.schedulerActionCtor(this,a).schedule(h,l)}}MS.now=ZN.now;class qN extends MS{constructor(a,l=MS.now){super(a,l),this.actions=[],this._active=!1}flush(a){const{actions:l}=this;if(this._active)return void l.push(a);let h;this._active=!0;do{if(h=a.execute(a.state,a.delay))break}while(a=l.shift());if(this._active=!1,h){for(;a=l.shift();)a.unsubscribe();throw h}}}new qN(jN);const gFe=["addListener","removeListener"],mFe=["addEventListener","removeEventListener"],vFe=["on","off"];function rh(c,a,l,h){if(ge(l)&&(h=l,l=void 0),h)return rh(c,a,l).pipe(eN(h));const[d,f]=function bFe(c){return ge(c.addEventListener)&&ge(c.removeEventListener)}(c)?mFe.map(p=>g=>c[p](a,g,l)):function yFe(c){return ge(c.addListener)&&ge(c.removeListener)}(c)?gFe.map(ate(c,a)):function _Fe(c){return ge(c.on)&&ge(c.off)}(c)?vFe.map(ate(c,a)):[];if(!d&&YP(c))return Xo(p=>rh(p,a,l))(Ja(c));if(!d)throw new TypeError("Invalid event target");return new Ke(p=>{const g=(...m)=>p.next(1<m.length?m:m[0]);return d(g),()=>f(g)})}function ate(c,a){return l=>h=>c[l](a,h)}class XN extends Tt{constructor(a=1/0,l=1/0,h=ZN){super(),this._bufferSize=a,this._windowTime=l,this._timestampProvider=h,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=l===1/0,this._bufferSize=Math.max(1,a),this._windowTime=Math.max(1,l)}next(a){const{isStopped:l,_buffer:h,_infiniteTimeWindow:d,_timestampProvider:f,_windowTime:p}=this;l||(h.push(a),!d&&h.push(f.now()+p)),this._trimBuffer(),super.next(a)}_subscribe(a){this._throwIfClosed(),this._trimBuffer();const l=this._innerSubscribe(a),{_infiniteTimeWindow:h,_buffer:d}=this,f=d.slice();for(let p=0;p<f.length&&!a.closed;p+=h?1:2)a.next(f[p]);return this._checkFinalizedStatuses(a),l}_trimBuffer(){const{_bufferSize:a,_timestampProvider:l,_buffer:h,_infiniteTimeWindow:d}=this,f=(d?1:2)*a;if(a<1/0&&f<h.length&&h.splice(0,h.length-f),!d){const p=l.now();let g=0;for(let m=1;m<h.length&&h[m]<=p;m+=2)g=m;g&&h.splice(0,g+1)}}}class cte{}class CFe{}const Tf="*";function fu(c,a){return{type:7,name:c,definitions:a,options:{}}}function Ia(c,a=null){return{type:4,styles:a,timings:c}}function ute(c,a=null){return{type:2,steps:c,options:a}}function lr(c){return{type:6,styles:c,offset:null}}function SFe(c){return{type:5,steps:c}}function Bo(c,a,l=null){return{type:1,expr:c,animation:a,options:l}}function hte(c){Promise.resolve().then(c)}class AS{constructor(a=0,l=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=a+l}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){hte(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(a){this._position=this.totalTime?a*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(a){const l="start"==a?this._onStartFns:this._onDoneFns;l.forEach(h=>h()),l.length=0}}class dte{constructor(a){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=a;let l=0,h=0,d=0;const f=this.players.length;0==f?hte(()=>this._onFinish()):this.players.forEach(p=>{p.onDone(()=>{++l==f&&this._onFinish()}),p.onDestroy(()=>{++h==f&&this._onDestroy()}),p.onStart(()=>{++d==f&&this._onStart()})}),this.totalTime=this.players.reduce((p,g)=>Math.max(p,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this.players.forEach(a=>a.init())}onStart(a){this._onStartFns.push(a)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(a=>a()),this._onStartFns=[])}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(a=>a.play())}pause(){this.players.forEach(a=>a.pause())}restart(){this.players.forEach(a=>a.restart())}finish(){this._onFinish(),this.players.forEach(a=>a.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(a=>a.destroy()),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this.players.forEach(a=>a.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(a){const l=a*this.totalTime;this.players.forEach(h=>{const d=h.totalTime?Math.min(1,l/h.totalTime):1;h.setPosition(d)})}getPosition(){const a=this.players.reduce((l,h)=>null===l||h.totalTime>l.totalTime?h:l,null);return null!=a?a.getPosition():0}beforeDestroy(){this.players.forEach(a=>{a.beforeDestroy&&a.beforeDestroy()})}triggerCallback(a){const l="start"==a?this._onStartFns:this._onDoneFns;l.forEach(h=>h()),l.length=0}}let fte=(()=>{class c{constructor(l,h){this._renderer=l,this._elementRef=h,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(l,h){this._renderer.setProperty(this._elementRef.nativeElement,l,h)}registerOnTouched(l){this.onTouched=l}registerOnChange(l){this.onChange=l}setDisabledState(l){this.setProperty("disabled",l)}}return c.\u0275fac=function(l){return new(l||c)(z(Yi),z(Mn))},c.\u0275dir=_t({type:c}),c})(),Nm=(()=>{class c extends fte{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275dir=_t({type:c,features:[vn]}),c})();const ld=new sn("NgValueAccessor"),wFe={provide:ld,useExisting:rs(()=>cd),multi:!0};let cd=(()=>{class c extends Nm{writeValue(l){this.setProperty("checked",l)}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275dir=_t({type:c,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(l,h){1&l&&ie("change",function(f){return h.onChange(f.target.checked)})("blur",function(){return h.onTouched()})},features:[_n([wFe]),vn]}),c})();const OFe={provide:ld,useExisting:rs(()=>Cc),multi:!0},TFe=new sn("CompositionEventMode");let Cc=(()=>{class c extends fte{constructor(l,h,d){super(l,h),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function DFe(){const c=nd()?nd().getUserAgent():"";return/android (\d+)/.test(c.toLowerCase())}())}writeValue(l){this.setProperty("value",l??"")}_handleInput(l){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(l)}_compositionStart(){this._composing=!0}_compositionEnd(l){this._composing=!1,this._compositionMode&&this.onChange(l)}}return c.\u0275fac=function(l){return new(l||c)(z(Yi),z(Mn),z(TFe,8))},c.\u0275dir=_t({type:c,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(l,h){1&l&&ie("input",function(f){return h._handleInput(f.target.value)})("blur",function(){return h.onTouched()})("compositionstart",function(){return h._compositionStart()})("compositionend",function(f){return h._compositionEnd(f.target.value)})},features:[_n([OFe]),vn]}),c})();const ga=new sn("NgValidators"),Gp=new sn("NgAsyncValidators");function vte(c){return function Wp(c){return null==c||("string"==typeof c||Array.isArray(c))&&0===c.length}(c.value)?{required:!0}:null}function yte(c){return!0===c.value?null:{required:!0}}function $T(c){return null}function xte(c){return null!=c}function wte(c){return zC(c)?ho(c):c}function Ote(c){let a={};return c.forEach(l=>{a=null!=l?{...a,...l}:a}),0===Object.keys(a).length?null:a}function Dte(c,a){return a.map(l=>l(c))}function Tte(c){return c.map(a=>function EFe(c){return!c.validate}(a)?a:l=>a.validate(l))}function KN(c){return null!=c?function kte(c){if(!c)return null;const a=c.filter(xte);return 0==a.length?null:function(l){return Ote(Dte(l,a))}}(Tte(c)):null}function JN(c){return null!=c?function Mte(c){if(!c)return null;const a=c.filter(xte);return 0==a.length?null:function(l){return function xFe(...c){const a=EQ(c),{args:l,keys:h}=oJ(c),d=new Ke(f=>{const{length:p}=l;if(!p)return void f.complete();const g=new Array(p);let m=p,v=p;for(let y=0;y<p;y++){let _=!1;Ja(l[y]).subscribe(Ti(f,b=>{_||(_=!0,v--),g[y]=b},()=>m--,void 0,()=>{(!m||!_)&&(v||f.next(h?aJ(h,g):g),f.complete())}))}});return a?d.pipe(eN(a)):d}(Dte(l,a).map(wte)).pipe(Qn(Ote))}}(Tte(c)):null}function Ete(c,a){return null===c?[a]:Array.isArray(c)?[...c,a]:[c,a]}function e5(c){return c?Array.isArray(c)?c:[c]:[]}function WT(c,a){return Array.isArray(c)?c.includes(a):c===a}function Pte(c,a){const l=e5(a);return e5(c).forEach(d=>{WT(l,d)||l.push(d)}),l}function Rte(c,a){return e5(a).filter(l=>!WT(c,l))}class Fte{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(a){this._rawValidators=a||[],this._composedValidatorFn=KN(this._rawValidators)}_setAsyncValidators(a){this._rawAsyncValidators=a||[],this._composedAsyncValidatorFn=JN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(a){this._onDestroyCallbacks.push(a)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(a=>a()),this._onDestroyCallbacks=[]}reset(a){this.control&&this.control.reset(a)}hasError(a,l){return!!this.control&&this.control.hasError(a,l)}getError(a,l){return this.control?this.control.getError(a,l):null}}class sl extends Fte{get formDirective(){return null}get path(){return null}}class Ql extends Fte{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Lte{constructor(a){this._cd=a}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Pa=(()=>{class c extends Lte{constructor(l){super(l)}}return c.\u0275fac=function(l){return new(l||c)(z(Ql,2))},c.\u0275dir=_t({type:c,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(l,h){2&l&&Nt("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)},features:[vn]}),c})(),Wy=(()=>{class c extends Lte{constructor(l){super(l)}}return c.\u0275fac=function(l){return new(l||c)(z(sl,10))},c.\u0275dir=_t({type:c,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(l,h){2&l&&Nt("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)("ng-submitted",h.isSubmitted)},features:[vn]}),c})();const IS="VALID",QT="INVALID",Gy="PENDING",PS="DISABLED";function s5(c){return(jT(c)?c.validators:c)||null}function o5(c,a){return(jT(a)?a.asyncValidators:c)||null}function jT(c){return null!=c&&!Array.isArray(c)&&"object"==typeof c}class Ute{constructor(a,l){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(a),this._assignAsyncValidators(l)}get validator(){return this._composedValidatorFn}set validator(a){this._rawValidators=this._composedValidatorFn=a}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(a){this._rawAsyncValidators=this._composedAsyncValidatorFn=a}get parent(){return this._parent}get valid(){return this.status===IS}get invalid(){return this.status===QT}get pending(){return this.status==Gy}get disabled(){return this.status===PS}get enabled(){return this.status!==PS}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(a){this._assignValidators(a)}setAsyncValidators(a){this._assignAsyncValidators(a)}addValidators(a){this.setValidators(Pte(a,this._rawValidators))}addAsyncValidators(a){this.setAsyncValidators(Pte(a,this._rawAsyncValidators))}removeValidators(a){this.setValidators(Rte(a,this._rawValidators))}removeAsyncValidators(a){this.setAsyncValidators(Rte(a,this._rawAsyncValidators))}hasValidator(a){return WT(this._rawValidators,a)}hasAsyncValidator(a){return WT(this._rawAsyncValidators,a)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(a={}){this.touched=!0,this._parent&&!a.onlySelf&&this._parent.markAsTouched(a)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(a=>a.markAllAsTouched())}markAsUntouched(a={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(l=>{l.markAsUntouched({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}markAsDirty(a={}){this.pristine=!1,this._parent&&!a.onlySelf&&this._parent.markAsDirty(a)}markAsPristine(a={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(l=>{l.markAsPristine({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}markAsPending(a={}){this.status=Gy,!1!==a.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!a.onlySelf&&this._parent.markAsPending(a)}disable(a={}){const l=this._parentMarkedDirty(a.onlySelf);this.status=PS,this.errors=null,this._forEachChild(h=>{h.disable({...a,onlySelf:!0})}),this._updateValue(),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...a,skipPristineCheck:l}),this._onDisabledChange.forEach(h=>h(!0))}enable(a={}){const l=this._parentMarkedDirty(a.onlySelf);this.status=IS,this._forEachChild(h=>{h.enable({...a,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent}),this._updateAncestors({...a,skipPristineCheck:l}),this._onDisabledChange.forEach(h=>h(!1))}_updateAncestors(a){this._parent&&!a.onlySelf&&(this._parent.updateValueAndValidity(a),a.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(a){this._parent=a}getRawValue(){return this.value}updateValueAndValidity(a={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===IS||this.status===Gy)&&this._runAsyncValidator(a.emitEvent)),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!a.onlySelf&&this._parent.updateValueAndValidity(a)}_updateTreeValidity(a={emitEvent:!0}){this._forEachChild(l=>l._updateTreeValidity(a)),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?PS:IS}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(a){if(this.asyncValidator){this.status=Gy,this._hasOwnPendingAsyncValidator=!0;const l=wte(this.asyncValidator(this));this._asyncValidationSubscription=l.subscribe(h=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(h,{emitEvent:a})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(a,l={}){this.errors=a,this._updateControlsErrors(!1!==l.emitEvent)}get(a){let l=a;return null==l||(Array.isArray(l)||(l=l.split(".")),0===l.length)?null:l.reduce((h,d)=>h&&h._find(d),this)}getError(a,l){const h=l?this.get(l):this;return h&&h.errors?h.errors[a]:null}hasError(a,l){return!!this.getError(a,l)}get root(){let a=this;for(;a._parent;)a=a._parent;return a}_updateControlsErrors(a){this.status=this._calculateStatus(),a&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(a)}_initObservables(){this.valueChanges=new Mt,this.statusChanges=new Mt}_calculateStatus(){return this._allControlsDisabled()?PS:this.errors?QT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gy)?Gy:this._anyControlsHaveStatus(QT)?QT:IS}_anyControlsHaveStatus(a){return this._anyControls(l=>l.status===a)}_anyControlsDirty(){return this._anyControls(a=>a.dirty)}_anyControlsTouched(){return this._anyControls(a=>a.touched)}_updatePristine(a={}){this.pristine=!this._anyControlsDirty(),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}_updateTouched(a={}){this.touched=this._anyControlsTouched(),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}_registerOnCollectionChange(a){this._onCollectionChange=a}_setUpdateStrategy(a){jT(a)&&null!=a.updateOn&&(this._updateOn=a.updateOn)}_parentMarkedDirty(a){return!a&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(a){return null}_assignValidators(a){this._rawValidators=Array.isArray(a)?a.slice():a,this._composedValidatorFn=function NFe(c){return Array.isArray(c)?KN(c):c||null}(this._rawValidators)}_assignAsyncValidators(a){this._rawAsyncValidators=Array.isArray(a)?a.slice():a,this._composedAsyncValidatorFn=function BFe(c){return Array.isArray(c)?JN(c):c||null}(this._rawAsyncValidators)}}class ZT extends Ute{constructor(a,l,h){super(s5(l),o5(h,l)),this.controls=a,this._initObservables(),this._setUpdateStrategy(l),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(a,l){return this.controls[a]?this.controls[a]:(this.controls[a]=l,l.setParent(this),l._registerOnCollectionChange(this._onCollectionChange),l)}addControl(a,l,h={}){this.registerControl(a,l),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}removeControl(a,l={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],this.updateValueAndValidity({emitEvent:l.emitEvent}),this._onCollectionChange()}setControl(a,l,h={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],l&&this.registerControl(a,l),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}contains(a){return this.controls.hasOwnProperty(a)&&this.controls[a].enabled}setValue(a,l={}){(function Vte(c,a,l){c._forEachChild((h,d)=>{if(void 0===l[d])throw new xt(1002,"")})})(this,0,a),Object.keys(a).forEach(h=>{(function Bte(c,a,l){const h=c.controls;if(!(a?Object.keys(h):h).length)throw new xt(1e3,"");if(!h[l])throw new xt(1001,"")})(this,!0,h),this.controls[h].setValue(a[h],{onlySelf:!0,emitEvent:l.emitEvent})}),this.updateValueAndValidity(l)}patchValue(a,l={}){null!=a&&(Object.keys(a).forEach(h=>{const d=this.controls[h];d&&d.patchValue(a[h],{onlySelf:!0,emitEvent:l.emitEvent})}),this.updateValueAndValidity(l))}reset(a={},l={}){this._forEachChild((h,d)=>{h.reset(a[d],{onlySelf:!0,emitEvent:l.emitEvent})}),this._updatePristine(l),this._updateTouched(l),this.updateValueAndValidity(l)}getRawValue(){return this._reduceChildren({},(a,l,h)=>(a[h]=l.getRawValue(),a))}_syncPendingControls(){let a=this._reduceChildren(!1,(l,h)=>!!h._syncPendingControls()||l);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_forEachChild(a){Object.keys(this.controls).forEach(l=>{const h=this.controls[l];h&&a(h,l)})}_setUpControls(){this._forEachChild(a=>{a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(a){for(const[l,h]of Object.entries(this.controls))if(this.contains(l)&&a(h))return!0;return!1}_reduceValue(){return this._reduceChildren({},(l,h,d)=>((h.enabled||this.disabled)&&(l[d]=h.value),l))}_reduceChildren(a,l){let h=a;return this._forEachChild((d,f)=>{h=l(h,d,f)}),h}_allControlsDisabled(){for(const a of Object.keys(this.controls))if(this.controls[a].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(a){return this.controls.hasOwnProperty(a)?this.controls[a]:null}}const Qy=new sn("CallSetDisabledState",{providedIn:"root",factory:()=>qT}),qT="always";function RS(c,a,l=qT){a5(c,a),a.valueAccessor.writeValue(c.value),(c.disabled||"always"===l)&&a.valueAccessor.setDisabledState?.(c.disabled),function zFe(c,a){a.valueAccessor.registerOnChange(l=>{c._pendingValue=l,c._pendingChange=!0,c._pendingDirty=!0,"change"===c.updateOn&&zte(c,a)})}(c,a),function $Fe(c,a){const l=(h,d)=>{a.valueAccessor.writeValue(h),d&&a.viewToModelUpdate(h)};c.registerOnChange(l),a._registerOnDestroy(()=>{c._unregisterOnChange(l)})}(c,a),function HFe(c,a){a.valueAccessor.registerOnTouched(()=>{c._pendingTouched=!0,"blur"===c.updateOn&&c._pendingChange&&zte(c,a),"submit"!==c.updateOn&&c.markAsTouched()})}(c,a),function UFe(c,a){if(a.valueAccessor.setDisabledState){const l=h=>{a.valueAccessor.setDisabledState(h)};c.registerOnDisabledChange(l),a._registerOnDestroy(()=>{c._unregisterOnDisabledChange(l)})}}(c,a)}function KT(c,a){c.forEach(l=>{l.registerOnValidatorChange&&l.registerOnValidatorChange(a)})}function a5(c,a){const l=function Ate(c){return c._rawValidators}(c);null!==a.validator?c.setValidators(Ete(l,a.validator)):"function"==typeof l&&c.setValidators([l]);const h=function Ite(c){return c._rawAsyncValidators}(c);null!==a.asyncValidator?c.setAsyncValidators(Ete(h,a.asyncValidator)):"function"==typeof h&&c.setAsyncValidators([h]);const d=()=>c.updateValueAndValidity();KT(a._rawValidators,d),KT(a._rawAsyncValidators,d)}function zte(c,a){c._pendingDirty&&c.markAsDirty(),c.setValue(c._pendingValue,{emitModelToViewChange:!1}),a.viewToModelUpdate(c._pendingValue),c._pendingChange=!1}const ZFe={provide:sl,useExisting:rs(()=>kf)},FS=(()=>Promise.resolve())();let kf=(()=>{class c extends sl{constructor(l,h,d){super(),this.callSetDisabledState=d,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Mt,this.form=new ZT({},KN(l),JN(h))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(l){FS.then(()=>{const h=this._findContainer(l.path);l.control=h.registerControl(l.name,l.control),RS(l.control,l,this.callSetDisabledState),l.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(l)})}getControl(l){return this.form.get(l.path)}removeControl(l){FS.then(()=>{const h=this._findContainer(l.path);h&&h.removeControl(l.name),this._directives.delete(l)})}addFormGroup(l){FS.then(()=>{const h=this._findContainer(l.path),d=new ZT({});(function Hte(c,a){a5(c,a)})(d,l),h.registerControl(l.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(l){FS.then(()=>{const h=this._findContainer(l.path);h&&h.removeControl(l.name)})}getFormGroup(l){return this.form.get(l.path)}updateModel(l,h){FS.then(()=>{this.form.get(l.path).setValue(h)})}setValue(l){this.control.setValue(l)}onSubmit(l){return this.submitted=!0,function $te(c,a){c._syncPendingControls(),a.forEach(l=>{const h=l.control;"submit"===h.updateOn&&h._pendingChange&&(l.viewToModelUpdate(h._pendingValue),h._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(l),"dialog"===l?.target?.method}onReset(){this.resetForm()}resetForm(l){this.form.reset(l),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(l){return l.pop(),l.length?this.form.get(l):this.form}}return c.\u0275fac=function(l){return new(l||c)(z(ga,10),z(Gp,10),z(Qy,8))},c.\u0275dir=_t({type:c,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(l,h){1&l&&ie("submit",function(f){return h.onSubmit(f)})("reset",function(){return h.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_n([ZFe]),vn]}),c})();function Wte(c,a){const l=c.indexOf(a);l>-1&&c.splice(l,1)}function Gte(c){return"object"==typeof c&&null!==c&&2===Object.keys(c).length&&"value"in c&&"disabled"in c}const h5=class extends Ute{constructor(a=null,l,h){super(s5(l),o5(h,l)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(a),this._setUpdateStrategy(l),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jT(l)&&(l.nonNullable||l.initialValueIsDefault)&&(this.defaultValue=Gte(a)?a.value:a)}setValue(a,l={}){this.value=this._pendingValue=a,this._onChange.length&&!1!==l.emitModelToViewChange&&this._onChange.forEach(h=>h(this.value,!1!==l.emitViewToModelChange)),this.updateValueAndValidity(l)}patchValue(a,l={}){this.setValue(a,l)}reset(a=this.defaultValue,l={}){this._applyFormState(a),this.markAsPristine(l),this.markAsUntouched(l),this.setValue(this.value,l),this._pendingChange=!1}_updateValue(){}_anyControls(a){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(a){this._onChange.push(a)}_unregisterOnChange(a){Wte(this._onChange,a)}registerOnDisabledChange(a){this._onDisabledChange.push(a)}_unregisterOnDisabledChange(a){Wte(this._onDisabledChange,a)}_forEachChild(a){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(a){Gte(a)?(this.value=this._pendingValue=a.value,a.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=a}},YFe={provide:Ql,useExisting:rs(()=>ma)},jte=(()=>Promise.resolve())();let ma=(()=>{class c extends Ql{constructor(l,h,d,f,p,g){super(),this._changeDetectorRef=p,this.callSetDisabledState=g,this.control=new h5,this._registered=!1,this.update=new Mt,this._parent=l,this._setValidators(h),this._setAsyncValidators(d),this.valueAccessor=function u5(c,a){if(!a)return null;let l,h,d;return Array.isArray(a),a.forEach(f=>{f.constructor===Cc?l=f:function QFe(c){return Object.getPrototypeOf(c.constructor)===Nm}(f)?h=f:d=f}),d||h||l||null}(0,f)}ngOnChanges(l){if(this._checkForErrors(),!this._registered||"name"in l){if(this._registered&&(this._checkName(),this.formDirective)){const h=l.name.previousValue;this.formDirective.removeControl({name:h,path:this._getPath(h)})}this._setUpControl()}"isDisabled"in l&&this._updateDisabled(l),function c5(c,a){if(!c.hasOwnProperty("model"))return!1;const l=c.model;return!!l.isFirstChange()||!Object.is(a,l.currentValue)}(l,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(l){this.viewModel=l,this.update.emit(l)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){RS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(l){jte.then(()=>{this.control.setValue(l,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(l){const h=l.isDisabled.currentValue,d=0!==h&&Ey(h);jte.then(()=>{d&&!this.control.disabled?this.control.disable():!d&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(l){return this._parent?function XT(c,a){return[...a.path,c]}(l,this._parent):[l]}}return c.\u0275fac=function(l){return new(l||c)(z(sl,9),z(ga,10),z(Gp,10),z(ld,10),z(Ro,8),z(Qy,8))},c.\u0275dir=_t({type:c,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_n([YFe]),vn,ro]}),c})(),jy=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),c})();const JFe={provide:ld,useExisting:rs(()=>LS),multi:!0};let Zte=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({}),c})(),eLe=(()=>{class c{constructor(){this._accessors=[]}add(l,h){this._accessors.push([l,h])}remove(l){for(let h=this._accessors.length-1;h>=0;--h)if(this._accessors[h][1]===l)return void this._accessors.splice(h,1)}select(l){this._accessors.forEach(h=>{this._isSameGroup(h,l)&&h[1]!==l&&h[1].fireUncheck(l.value)})}_isSameGroup(l,h){return!!l[0].control&&l[0]._parent===h._control._parent&&l[1].name===h.name}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:Zte}),c})(),LS=(()=>{class c extends Nm{constructor(l,h,d,f){super(l,h),this._registry=d,this._injector=f,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Gi(Qy,{optional:!0})??qT}ngOnInit(){this._control=this._injector.get(Ql),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(l){this._state=l===this.value,this.setProperty("checked",this._state)}registerOnChange(l){this._fn=l,this.onChange=()=>{l(this.value),this._registry.select(this)}}setDisabledState(l){(this.setDisabledStateFired||l||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",l),this.setDisabledStateFired=!0}fireUncheck(l){this.writeValue(l)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return c.\u0275fac=function(l){return new(l||c)(z(Yi),z(Mn),z(eLe),z(As))},c.\u0275dir=_t({type:c,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(l,h){1&l&&ie("change",function(){return h.onChange()})("blur",function(){return h.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[_n([JFe]),vn]}),c})(),Bm=(()=>{class c{constructor(){this._validator=$T}ngOnChanges(l){if(this.inputName in l){const h=this.normalizeInput(l[this.inputName].currentValue);this._enabled=this.enabled(h),this._validator=this._enabled?this.createValidator(h):$T,this._onChange&&this._onChange()}}validate(l){return this._validator(l)}registerOnValidatorChange(l){this._onChange=l}enabled(l){return null!=l}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,features:[ro]}),c})();const fLe={provide:ga,useExisting:rs(()=>Vm),multi:!0},pLe={provide:ga,useExisting:rs(()=>m5),multi:!0};let v5,Vm=(()=>{class c extends Bm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ey,this.createValidator=l=>vte}enabled(l){return l}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275dir=_t({type:c,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(l,h){2&l&&ot("required",h._enabled?"":null)},inputs:{required:"required"},features:[_n([fLe]),vn]}),c})(),m5=(()=>{class c extends Vm{constructor(){super(...arguments),this.createValidator=l=>yte}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275dir=_t({type:c,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(l,h){2&l&&ot("required",h._enabled?"":null)},features:[_n([pLe]),vn]}),c})(),_Le=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[Zte]}),c})(),Qp=(()=>{class c{static withConfig(l){return{ngModule:c,providers:[{provide:Qy,useValue:l.callSetDisabledState??qT}]}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[_Le]}),c})();try{v5=typeof Intl<"u"&&Intl.v8BreakIterator}catch{v5=!1}let y5=(()=>{class c{constructor(l){this._platformId=l,this.isBrowser=this._platformId?Tr(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!v5)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return c.\u0275fac=function(l){return new(l||c)(Pe(Ss))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function ud(c){return null!=c&&"false"!=`${c}`}let PLe=(()=>{class c{constructor(l){this._platform=l}isDisabled(l){return l.hasAttribute("disabled")}isVisible(l){return function FLe(c){return!!(c.offsetWidth||c.offsetHeight||"function"==typeof c.getClientRects&&c.getClientRects().length)}(l)&&"visible"===getComputedStyle(l).visibility}isTabbable(l){if(!this._platform.isBrowser)return!1;const h=function RLe(c){try{return c.frameElement}catch{return null}}(function $Le(c){return c.ownerDocument&&c.ownerDocument.defaultView||window}(l));if(h&&(-1===yne(h)||!this.isVisible(h)))return!1;let d=l.nodeName.toLowerCase(),f=yne(l);return l.hasAttribute("contenteditable")?-1!==f:!("iframe"===d||"object"===d||this._platform.WEBKIT&&this._platform.IOS&&!function zLe(c){let a=c.nodeName.toLowerCase(),l="input"===a&&c.type;return"text"===l||"password"===l||"select"===a||"textarea"===a}(l))&&("audio"===d?!!l.hasAttribute("controls")&&-1!==f:"video"===d?-1!==f&&(null!==f||this._platform.FIREFOX||l.hasAttribute("controls")):l.tabIndex>=0)}isFocusable(l,h){return function HLe(c){return!function NLe(c){return function VLe(c){return"input"==c.nodeName.toLowerCase()}(c)&&"hidden"==c.type}(c)&&(function LLe(c){let a=c.nodeName.toLowerCase();return"input"===a||"select"===a||"button"===a||"textarea"===a}(c)||function BLe(c){return function ULe(c){return"a"==c.nodeName.toLowerCase()}(c)&&c.hasAttribute("href")}(c)||c.hasAttribute("contenteditable")||vne(c))}(l)&&!this.isDisabled(l)&&(h?.ignoreVisibility||this.isVisible(l))}}return c.\u0275fac=function(l){return new(l||c)(Pe(y5))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function vne(c){if(!c.hasAttribute("tabindex")||void 0===c.tabIndex)return!1;let a=c.getAttribute("tabindex");return!(!a||isNaN(parseInt(a,10)))}function yne(c){if(!vne(c))return null;const a=parseInt(c.getAttribute("tabindex")||"",10);return isNaN(a)?-1:a}class WLe{get enabled(){return this._enabled}set enabled(a){this._enabled=a,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(a,this._startAnchor),this._toggleAnchorTabIndex(a,this._endAnchor))}constructor(a,l,h,d,f=!1){this._element=a,this._checker=l,this._ngZone=h,this._document=d,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,f||this.attachAnchors()}destroy(){const a=this._startAnchor,l=this._endAnchor;a&&(a.removeEventListener("focus",this.startAnchorListener),a.remove()),l&&(l.removeEventListener("focus",this.endAnchorListener),l.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(a){return new Promise(l=>{this._executeOnStable(()=>l(this.focusInitialElement(a)))})}focusFirstTabbableElementWhenReady(a){return new Promise(l=>{this._executeOnStable(()=>l(this.focusFirstTabbableElement(a)))})}focusLastTabbableElementWhenReady(a){return new Promise(l=>{this._executeOnStable(()=>l(this.focusLastTabbableElement(a)))})}_getRegionBoundary(a){const l=this._element.querySelectorAll(`[cdk-focus-region-${a}], [cdkFocusRegion${a}], [cdk-focus-${a}]`);return"start"==a?l.length?l[0]:this._getFirstTabbableElement(this._element):l.length?l[l.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(a){const l=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(l){if(!this._checker.isFocusable(l)){const h=this._getFirstTabbableElement(l);return h?.focus(a),!!h}return l.focus(a),!0}return this.focusFirstTabbableElement(a)}focusFirstTabbableElement(a){const l=this._getRegionBoundary("start");return l&&l.focus(a),!!l}focusLastTabbableElement(a){const l=this._getRegionBoundary("end");return l&&l.focus(a),!!l}hasAttached(){return this._hasAttached}_getFirstTabbableElement(a){if(this._checker.isFocusable(a)&&this._checker.isTabbable(a))return a;const l=a.children;for(let h=0;h<l.length;h++){const d=l[h].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(l[h]):null;if(d)return d}return null}_getLastTabbableElement(a){if(this._checker.isFocusable(a)&&this._checker.isTabbable(a))return a;const l=a.children;for(let h=l.length-1;h>=0;h--){const d=l[h].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(l[h]):null;if(d)return d}return null}_createAnchor(){const a=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,a),a.classList.add("cdk-visually-hidden"),a.classList.add("cdk-focus-trap-anchor"),a.setAttribute("aria-hidden","true"),a}_toggleAnchorTabIndex(a,l){a?l.setAttribute("tabindex","0"):l.removeAttribute("tabindex")}toggleAnchors(a){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(a,this._startAnchor),this._toggleAnchorTabIndex(a,this._endAnchor))}_executeOnStable(a){this._ngZone.isStable?a():this._ngZone.onStable.pipe(id(1)).subscribe(a)}}let GLe=(()=>{class c{constructor(l,h,d){this._checker=l,this._ngZone=h,this._document=d}create(l,h=!1){return new WLe(l,this._checker,this._ngZone,this._document,h)}}return c.\u0275fac=function(l){return new(l||c)(Pe(PLe),Pe(Bi),Pe(hr))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),_ne=(()=>{class c{get enabled(){return this.focusTrap.enabled}set enabled(l){this.focusTrap.enabled=ud(l)}get autoCapture(){return this._autoCapture}set autoCapture(l){this._autoCapture=ud(l)}constructor(l,h,d){this._elementRef=l,this._focusTrapFactory=h,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(l){const h=l.autoCapture;h&&!h.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=function xLe(){let c=typeof document<"u"&&document?document.activeElement:null;for(;c&&c.shadowRoot;){const a=c.shadowRoot.activeElement;if(a===c)break;c=a}return c}(),this.focusTrap.focusInitialElementWhenReady()}}return c.\u0275fac=function(l){return new(l||c)(z(Mn),z(GLe),z(hr))},c.\u0275dir=_t({type:c,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[ro]}),c})();const VS={schedule(c){let a=requestAnimationFrame,l=cancelAnimationFrame;const{delegate:h}=VS;h&&(a=h.requestAnimationFrame,l=h.cancelAnimationFrame);const d=a(f=>{l=void 0,c(f)});return new Re(()=>l?.(d))},requestAnimationFrame(...c){const{delegate:a}=VS;return(a?.requestAnimationFrame||requestAnimationFrame)(...c)},cancelAnimationFrame(...c){const{delegate:a}=VS;return(a?.cancelAnimationFrame||cancelAnimationFrame)(...c)},delegate:void 0};new class XLe extends qN{flush(a){this._active=!0;const l=this._scheduled;this._scheduled=void 0;const{actions:h}=this;let d;a=a||h.shift();do{if(d=a.execute(a.state,a.delay))break}while((a=h[0])&&a.id===l&&h.shift());if(this._active=!1,d){for(;(a=h[0])&&a.id===l&&h.shift();)a.unsubscribe();throw d}}}(class qLe extends jN{constructor(a,l){super(a,l),this.scheduler=a,this.work=l}requestAsyncId(a,l,h=0){return null!==h&&h>0?super.requestAsyncId(a,l,h):(a.actions.push(this),a._scheduled||(a._scheduled=VS.requestAnimationFrame(()=>a.flush(void 0))))}recycleAsyncId(a,l,h=0){var d;if(null!=h?h>0:this.delay>0)return super.recycleAsyncId(a,l,h);const{actions:f}=a;null!=l&&(null===(d=f[f.length-1])||void 0===d?void 0:d.id)!==l&&(VS.cancelAnimationFrame(l),a._scheduled=void 0)}});let b5,YLe=1;const sk={};function Cne(c){return c in sk&&(delete sk[c],!0)}const KLe={setImmediate(c){const a=YLe++;return sk[a]=!0,b5||(b5=Promise.resolve()),b5.then(()=>Cne(a)&&c()),a},clearImmediate(c){Cne(c)}},{setImmediate:JLe,clearImmediate:eNe}=KLe,ok={setImmediate(...c){const{delegate:a}=ok;return(a?.setImmediate||JLe)(...c)},clearImmediate(c){const{delegate:a}=ok;return(a?.clearImmediate||eNe)(c)},delegate:void 0},INe=(new class nNe extends qN{flush(a){this._active=!0;const l=this._scheduled;this._scheduled=void 0;const{actions:h}=this;let d;a=a||h.shift();do{if(d=a.execute(a.state,a.delay))break}while((a=h[0])&&a.id===l&&h.shift());if(this._active=!1,d){for(;(a=h[0])&&a.id===l&&h.shift();)a.unsubscribe();throw d}}}(class tNe extends jN{constructor(a,l){super(a,l),this.scheduler=a,this.work=l}requestAsyncId(a,l,h=0){return null!==h&&h>0?super.requestAsyncId(a,l,h):(a.actions.push(this),a._scheduled||(a._scheduled=ok.setImmediate(a.flush.bind(a,void 0))))}recycleAsyncId(a,l,h=0){var d;if(null!=h?h>0:this.delay>0)return super.recycleAsyncId(a,l,h);const{actions:f}=a;null!=l&&(null===(d=f[f.length-1])||void 0===d?void 0:d.id)!==l&&(ok.clearImmediate(l),a._scheduled=void 0)}}),Kee(3,(c,a,l)=>{!function jRe(c,a){return a||(a=window&&window.customElements),!a||!!a.get(c)}(c)||function ERe(){return window?.location?.href?.includes("localhost:6006")}()?(l.define(c,a),ete(),window&&!Object.keys(window.CDS._state.elementRegistry).some(h=>h===c)&&(window.CDS._state.elementRegistry={...window.CDS._state.elementRegistry,[c]:{}})):Lm.warn(c+" has already been registered")}));function jne(c,a){zee()&&Jee(["customElements"])&&INe(c,a,window.customElements)}let Zne=!1;function PNe(c){if((c=Math.trunc(c)||0)<0&&(c+=this.length),!(c<0||c>=this.length))return this[c]}if(!Zne){Zne=!0;const c=Reflect.getPrototypeOf(Int8Array);for(const a of[Array,String,c])Object.defineProperty(a.prototype,"at",{value:PNe,writable:!0,enumerable:!1,configurable:!0})}let qne=!1,Xne=!1;function Yne(c,a,l){Object.defineProperty(c,l,{configurable:!0,enumerable:!0,get:function(){return this.hasAttribute(a)?this.getAttribute(a):null},set:function(h){null!==h?this.setAttribute(a,h):this.removeAttribute(a)}})}function Kne(c,a,l,h,d,f,p){try{var g=c[f](p),m=g.value}catch(v){return void l(v)}g.done?a(m):Promise.resolve(m).then(h,d)}function M5(c){return function(){var a=this,l=arguments;return new Promise(function(h,d){var f=c.apply(a,l);function p(m){Kne(f,h,d,p,g,"next",m)}function g(m){Kne(f,h,d,p,g,"throw",m)}p(void 0)})}}qne||Element.prototype.hasOwnProperty("role")||(Yne(Element.prototype,"role","role"),qne=!0),Xne||Element.prototype.hasOwnProperty("ariaLabel")||(Xne=!0,["ActiveDescendant","Atomic","AutoComplete","Busy","Checked","ColCount","ColIndex","ColSpan","Controls","Current","DescribedBy","Details","Disabled","ErrorMessage","Expanded","FlowTo","HasPopup","Hidden","Invalid","KeyShortcuts","Label","LabelledBy","Level","Live","Modal","MultiLine","MultiSelectable","Orientation","Owns","Placeholder","PosInSet","Pressed","ReadOnly","Relevant","Required","RoleDescription","RowCount","RowIndex","RowSpan","Selected","SetSize","Sort","ValueMax","ValueMin","ValueNow","ValueText"].forEach(c=>Yne(Element.prototype,"aria-"+c.toLowerCase(),"aria"+c)));const hk=window,E5=hk.ShadowRoot&&(void 0===hk.ShadyCSS||hk.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,A5=Symbol(),Jne=new WeakMap;class eie{constructor(a,l,h){if(this._$cssResult$=!0,h!==A5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=a,this.t=l}get styleSheet(){let a=this.o;const l=this.t;if(E5&&void 0===a){const h=void 0!==l&&1===l.length;h&&(a=Jne.get(l)),void 0===a&&((this.o=a=new CSSStyleSheet).replaceSync(this.cssText),h&&Jne.set(l,a))}return a}toString(){return this.cssText}}const I5=(c,...a)=>{const l=1===c.length?c[0]:a.reduce((h,d,f)=>h+(p=>{if(!0===p._$cssResult$)return p.cssText;if("number"==typeof p)return p;throw Error("Value passed to 'css' function must be a 'css' function result: "+p+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(d)+c[f+1],c[0]);return new eie(l,c,A5)},tie=E5?c=>c:c=>c instanceof CSSStyleSheet?(a=>{let l="";for(const h of a.cssRules)l+=h.cssText;return(c=>new eie("string"==typeof c?c:c+"",void 0,A5))(l)})(c):c;var P5;const dk=window,nie=dk.trustedTypes,LNe=nie?nie.emptyScript:"",iie=dk.reactiveElementPolyfillSupport,R5={toAttribute(c,a){switch(a){case Boolean:c=c?LNe:null;break;case Object:case Array:c=null==c?c:JSON.stringify(c)}return c},fromAttribute(c,a){let l=c;switch(a){case Boolean:l=null!==c;break;case Number:l=null===c?null:Number(c);break;case Object:case Array:try{l=JSON.parse(c)}catch{l=null}}return l}},rie=(c,a)=>a!==c&&(a==a||c==c),F5={attribute:!0,type:String,converter:R5,reflect:!1,hasChanged:rie};class Xy extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(a){var l;this.finalize(),(null!==(l=this.h)&&void 0!==l?l:this.h=[]).push(a)}static get observedAttributes(){this.finalize();const a=[];return this.elementProperties.forEach((l,h)=>{const d=this._$Ep(h,l);void 0!==d&&(this._$Ev.set(d,h),a.push(d))}),a}static createProperty(a,l=F5){if(l.state&&(l.attribute=!1),this.finalize(),this.elementProperties.set(a,l),!l.noAccessor&&!this.prototype.hasOwnProperty(a)){const h="symbol"==typeof a?Symbol():"__"+a,d=this.getPropertyDescriptor(a,h,l);void 0!==d&&Object.defineProperty(this.prototype,a,d)}}static getPropertyDescriptor(a,l,h){return{get(){return this[l]},set(d){const f=this[a];this[l]=d,this.requestUpdate(a,f,h)},configurable:!0,enumerable:!0}}static getPropertyOptions(a){return this.elementProperties.get(a)||F5}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const a=Object.getPrototypeOf(this);if(a.finalize(),void 0!==a.h&&(this.h=[...a.h]),this.elementProperties=new Map(a.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const l=this.properties,h=[...Object.getOwnPropertyNames(l),...Object.getOwnPropertySymbols(l)];for(const d of h)this.createProperty(d,l[d])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(a){const l=[];if(Array.isArray(a)){const h=new Set(a.flat(1/0).reverse());for(const d of h)l.unshift(tie(d))}else void 0!==a&&l.push(tie(a));return l}static _$Ep(a,l){const h=l.attribute;return!1===h?void 0:"string"==typeof h?h:"string"==typeof a?a.toLowerCase():void 0}u(){var a;this._$E_=new Promise(l=>this.enableUpdating=l),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(a=this.constructor.h)||void 0===a||a.forEach(l=>l(this))}addController(a){var l,h;(null!==(l=this._$ES)&&void 0!==l?l:this._$ES=[]).push(a),void 0!==this.renderRoot&&this.isConnected&&(null===(h=a.hostConnected)||void 0===h||h.call(a))}removeController(a){var l;null===(l=this._$ES)||void 0===l||l.splice(this._$ES.indexOf(a)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((a,l)=>{this.hasOwnProperty(l)&&(this._$Ei.set(l,this[l]),delete this[l])})}createRenderRoot(){var a;const l=null!==(a=this.shadowRoot)&&void 0!==a?a:this.attachShadow(this.constructor.shadowRootOptions);return((c,a)=>{E5?c.adoptedStyleSheets=a.map(l=>l instanceof CSSStyleSheet?l:l.styleSheet):a.forEach(l=>{const h=document.createElement("style"),d=hk.litNonce;void 0!==d&&h.setAttribute("nonce",d),h.textContent=l.cssText,c.appendChild(h)})})(l,this.constructor.elementStyles),l}connectedCallback(){var a;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(a=this._$ES)||void 0===a||a.forEach(l=>{var h;return null===(h=l.hostConnected)||void 0===h?void 0:h.call(l)})}enableUpdating(a){}disconnectedCallback(){var a;null===(a=this._$ES)||void 0===a||a.forEach(l=>{var h;return null===(h=l.hostDisconnected)||void 0===h?void 0:h.call(l)})}attributeChangedCallback(a,l,h){this._$AK(a,h)}_$EO(a,l,h=F5){var d;const f=this.constructor._$Ep(a,h);if(void 0!==f&&!0===h.reflect){const p=(void 0!==(null===(d=h.converter)||void 0===d?void 0:d.toAttribute)?h.converter:R5).toAttribute(l,h.type);this._$El=a,null==p?this.removeAttribute(f):this.setAttribute(f,p),this._$El=null}}_$AK(a,l){var h;const d=this.constructor,f=d._$Ev.get(a);if(void 0!==f&&this._$El!==f){const p=d.getPropertyOptions(f),g="function"==typeof p.converter?{fromAttribute:p.converter}:void 0!==(null===(h=p.converter)||void 0===h?void 0:h.fromAttribute)?p.converter:R5;this._$El=f,this[f]=g.fromAttribute(l,p.type),this._$El=null}}requestUpdate(a,l,h){let d=!0;void 0!==a&&(((h=h||this.constructor.getPropertyOptions(a)).hasChanged||rie)(this[a],l)?(this._$AL.has(a)||this._$AL.set(a,l),!0===h.reflect&&this._$El!==a&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(a,h))):d=!1),!this.isUpdatePending&&d&&(this._$E_=this._$Ej())}_$Ej(){var a=this;return M5(function*(){a.isUpdatePending=!0;try{yield a._$E_}catch(h){Promise.reject(h)}const l=a.scheduleUpdate();return null!=l&&(yield l),!a.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var a;if(!this.isUpdatePending)return;this._$Ei&&(this._$Ei.forEach((d,f)=>this[f]=d),this._$Ei=void 0);let l=!1;const h=this._$AL;try{l=this.shouldUpdate(h),l?(this.willUpdate(h),null===(a=this._$ES)||void 0===a||a.forEach(d=>{var f;return null===(f=d.hostUpdate)||void 0===f?void 0:f.call(d)}),this.update(h)):this._$Ek()}catch(d){throw l=!1,this._$Ek(),d}l&&this._$AE(h)}willUpdate(a){}_$AE(a){var l;null===(l=this._$ES)||void 0===l||l.forEach(h=>{var d;return null===(d=h.hostUpdated)||void 0===d?void 0:d.call(h)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(a)),this.updated(a)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(a){return!0}update(a){void 0!==this._$EC&&(this._$EC.forEach((l,h)=>this._$EO(h,this[h],l)),this._$EC=void 0),this._$Ek()}updated(a){}firstUpdated(a){}}var L5;Xy.finalized=!0,Xy.elementProperties=new Map,Xy.elementStyles=[],Xy.shadowRootOptions={mode:"open"},iie?.({ReactiveElement:Xy}),(null!==(P5=dk.reactiveElementVersions)&&void 0!==P5?P5:dk.reactiveElementVersions=[]).push("1.6.1");const fk=window,Yy=fk.trustedTypes,sie=Yy?Yy.createPolicy("lit-html",{createHTML:c=>c}):void 0,Mf=`lit$${(Math.random()+"").slice(9)}$`,N5="?"+Mf,NNe=`<${N5}>`,Ky=document,$S=(c="")=>Ky.createComment(c),WS=c=>null===c||"object"!=typeof c&&"function"!=typeof c,oie=Array.isArray,GS=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,lie=/-->/g,cie=/>/g,zm=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),uie=/'/g,hie=/"/g,die=/^(?:script|style|textarea|title)$/i,fie=c=>(a,...l)=>({_$litType$:c,strings:a,values:l}),B5=fie(1),BNe=fie(2),Jy=Symbol.for("lit-noChange"),Vo=Symbol.for("lit-nothing"),pie=new WeakMap,e_=Ky.createTreeWalker(Ky,129,null,!1);class QS{constructor({strings:a,_$litType$:l},h){let d;this.parts=[];let f=0,p=0;const g=a.length-1,m=this.parts,[v,y]=((c,a)=>{const l=c.length-1,h=[];let d,f=2===a?"<svg>":"",p=GS;for(let m=0;m<l;m++){const v=c[m];let y,_,b=-1,C=0;for(;C<v.length&&(p.lastIndex=C,_=p.exec(v),null!==_);)C=p.lastIndex,p===GS?"!--"===_[1]?p=lie:void 0!==_[1]?p=cie:void 0!==_[2]?(die.test(_[2])&&(d=RegExp("</"+_[2],"g")),p=zm):void 0!==_[3]&&(p=zm):p===zm?">"===_[0]?(p=d??GS,b=-1):void 0===_[1]?b=-2:(b=p.lastIndex-_[2].length,y=_[1],p=void 0===_[3]?zm:'"'===_[3]?hie:uie):p===hie||p===uie?p=zm:p===lie||p===cie?p=GS:(p=zm,d=void 0);const x=p===zm&&c[m+1].startsWith("/>")?" ":"";f+=p===GS?v+NNe:b>=0?(h.push(y),v.slice(0,b)+"$lit$"+v.slice(b)+Mf+x):v+Mf+(-2===b?(h.push(void 0),m):x)}const g=f+(c[l]||"<?>")+(2===a?"</svg>":"");if(!Array.isArray(c)||!c.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==sie?sie.createHTML(g):g,h]})(a,l);if(this.el=QS.createElement(v,h),e_.currentNode=this.el.content,2===l){const _=this.el.content,b=_.firstChild;b.remove(),_.append(...b.childNodes)}for(;null!==(d=e_.nextNode())&&m.length<g;){if(1===d.nodeType){if(d.hasAttributes()){const _=[];for(const b of d.getAttributeNames())if(b.endsWith("$lit$")||b.startsWith(Mf)){const C=y[p++];if(_.push(b),void 0!==C){const x=d.getAttribute(C.toLowerCase()+"$lit$").split(Mf),w=/([.?@])?(.*)/.exec(C);m.push({type:1,index:f,name:w[2],strings:x,ctor:"."===w[1]?vie:"?"===w[1]?yie:"@"===w[1]?_ie:jS})}else m.push({type:6,index:f})}for(const b of _)d.removeAttribute(b)}if(die.test(d.tagName)){const _=d.textContent.split(Mf),b=_.length-1;if(b>0){d.textContent=Yy?Yy.emptyScript:"";for(let C=0;C<b;C++)d.append(_[C],$S()),e_.nextNode(),m.push({type:2,index:++f});d.append(_[b],$S())}}}else if(8===d.nodeType)if(d.data===N5)m.push({type:2,index:f});else{let _=-1;for(;-1!==(_=d.data.indexOf(Mf,_+1));)m.push({type:7,index:f}),_+=Mf.length-1}f++}}static createElement(a,l){const h=Ky.createElement("template");return h.innerHTML=a,h}}function Hm(c,a,l=c,h){var d,f,p,g;if(a===Jy)return a;let m=void 0!==h?null===(d=l._$Co)||void 0===d?void 0:d[h]:l._$Cl;const v=WS(a)?void 0:a._$litDirective$;return m?.constructor!==v&&(null===(f=m?._$AO)||void 0===f||f.call(m,!1),void 0===v?m=void 0:(m=new v(c),m._$AT(c,l,h)),void 0!==h?(null!==(p=(g=l)._$Co)&&void 0!==p?p:g._$Co=[])[h]=m:l._$Cl=m),void 0!==m&&(a=Hm(c,m._$AS(c,a.values),m,h)),a}class mie{constructor(a,l){this.u=[],this._$AN=void 0,this._$AD=a,this._$AM=l}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(a){var l;const{el:{content:h},parts:d}=this._$AD,f=(null!==(l=a?.creationScope)&&void 0!==l?l:Ky).importNode(h,!0);e_.currentNode=f;let p=e_.nextNode(),g=0,m=0,v=d[0];for(;void 0!==v;){if(g===v.index){let y;2===v.type?y=new t_(p,p.nextSibling,this,a):1===v.type?y=new v.ctor(p,v.name,v.strings,this,a):6===v.type&&(y=new bie(p,this,a)),this.u.push(y),v=d[++m]}g!==v?.index&&(p=e_.nextNode(),g++)}return f}p(a){let l=0;for(const h of this.u)void 0!==h&&(void 0!==h.strings?(h._$AI(a,h,l),l+=h.strings.length-2):h._$AI(a[l])),l++}}class t_{constructor(a,l,h,d){var f;this.type=2,this._$AH=Vo,this._$AN=void 0,this._$AA=a,this._$AB=l,this._$AM=h,this.options=d,this._$Cm=null===(f=d?.isConnected)||void 0===f||f}get _$AU(){var a,l;return null!==(l=null===(a=this._$AM)||void 0===a?void 0:a._$AU)&&void 0!==l?l:this._$Cm}get parentNode(){let a=this._$AA.parentNode;const l=this._$AM;return void 0!==l&&11===a.nodeType&&(a=l.parentNode),a}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(a,l=this){a=Hm(this,a,l),WS(a)?a===Vo||null==a||""===a?(this._$AH!==Vo&&this._$AR(),this._$AH=Vo):a!==this._$AH&&a!==Jy&&this.g(a):void 0!==a._$litType$?this.$(a):void 0!==a.nodeType?this.T(a):(c=>oie(c)||"function"==typeof c?.[Symbol.iterator])(a)?this.k(a):this.g(a)}O(a,l=this._$AB){return this._$AA.parentNode.insertBefore(a,l)}T(a){this._$AH!==a&&(this._$AR(),this._$AH=this.O(a))}g(a){this._$AH!==Vo&&WS(this._$AH)?this._$AA.nextSibling.data=a:this.T(Ky.createTextNode(a)),this._$AH=a}$(a){var l;const{values:h,_$litType$:d}=a,f="number"==typeof d?this._$AC(a):(void 0===d.el&&(d.el=QS.createElement(d.h,this.options)),d);if((null===(l=this._$AH)||void 0===l?void 0:l._$AD)===f)this._$AH.p(h);else{const p=new mie(f,this),g=p.v(this.options);p.p(h),this.T(g),this._$AH=p}}_$AC(a){let l=pie.get(a.strings);return void 0===l&&pie.set(a.strings,l=new QS(a)),l}k(a){oie(this._$AH)||(this._$AH=[],this._$AR());const l=this._$AH;let h,d=0;for(const f of a)d===l.length?l.push(h=new t_(this.O($S()),this.O($S()),this,this.options)):h=l[d],h._$AI(f),d++;d<l.length&&(this._$AR(h&&h._$AB.nextSibling,d),l.length=d)}_$AR(a=this._$AA.nextSibling,l){var h;for(null===(h=this._$AP)||void 0===h||h.call(this,!1,!0,l);a&&a!==this._$AB;){const d=a.nextSibling;a.remove(),a=d}}setConnected(a){var l;void 0===this._$AM&&(this._$Cm=a,null===(l=this._$AP)||void 0===l||l.call(this,a))}}class jS{constructor(a,l,h,d,f){this.type=1,this._$AH=Vo,this._$AN=void 0,this.element=a,this.name=l,this._$AM=d,this.options=f,h.length>2||""!==h[0]||""!==h[1]?(this._$AH=Array(h.length-1).fill(new String),this.strings=h):this._$AH=Vo}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(a,l=this,h,d){const f=this.strings;let p=!1;if(void 0===f)a=Hm(this,a,l,0),p=!WS(a)||a!==this._$AH&&a!==Jy,p&&(this._$AH=a);else{const g=a;let m,v;for(a=f[0],m=0;m<f.length-1;m++)v=Hm(this,g[h+m],l,m),v===Jy&&(v=this._$AH[m]),p||(p=!WS(v)||v!==this._$AH[m]),v===Vo?a=Vo:a!==Vo&&(a+=(v??"")+f[m+1]),this._$AH[m]=v}p&&!d&&this.j(a)}j(a){a===Vo?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,a??"")}}class vie extends jS{constructor(){super(...arguments),this.type=3}j(a){this.element[this.name]=a===Vo?void 0:a}}const VNe=Yy?Yy.emptyScript:"";class yie extends jS{constructor(){super(...arguments),this.type=4}j(a){a&&a!==Vo?this.element.setAttribute(this.name,VNe):this.element.removeAttribute(this.name)}}class _ie extends jS{constructor(a,l,h,d,f){super(a,l,h,d,f),this.type=5}_$AI(a,l=this){var h;if((a=null!==(h=Hm(this,a,l,0))&&void 0!==h?h:Vo)===Jy)return;const d=this._$AH,f=a===Vo&&d!==Vo||a.capture!==d.capture||a.once!==d.once||a.passive!==d.passive,p=a!==Vo&&(d===Vo||f);f&&this.element.removeEventListener(this.name,this,d),p&&this.element.addEventListener(this.name,this,a),this._$AH=a}handleEvent(a){var l,h;"function"==typeof this._$AH?this._$AH.call(null!==(h=null===(l=this.options)||void 0===l?void 0:l.host)&&void 0!==h?h:this.element,a):this._$AH.handleEvent(a)}}class bie{constructor(a,l,h){this.element=a,this.type=6,this._$AN=void 0,this._$AM=l,this.options=h}get _$AU(){return this._$AM._$AU}_$AI(a){Hm(this,a)}}(0,fk.litHtmlPolyfillSupport)?.(QS,t_),(null!==(L5=fk.litHtmlVersions)&&void 0!==L5?L5:fk.litHtmlVersions=[]).push("2.6.1");const Sie=(c,a,l)=>{var h,d;const f=null!==(h=l?.renderBefore)&&void 0!==h?h:a;let p=f._$litPart$;if(void 0===p){const g=null!==(d=l?.renderBefore)&&void 0!==d?d:null;f._$litPart$=p=new t_(a.insertBefore($S(),g),g,void 0,l??{})}return p._$AI(c),p};var V5,U5;class n_ extends Xy{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var a,l;const h=super.createRenderRoot();return null!==(a=(l=this.renderOptions).renderBefore)&&void 0!==a||(l.renderBefore=h.firstChild),h}update(a){const l=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(a),this._$Do=Sie(l,this.renderRoot,this.renderOptions)}connectedCallback(){var a;super.connectedCallback(),null===(a=this._$Do)||void 0===a||a.setConnected(!0)}disconnectedCallback(){var a;super.disconnectedCallback(),null===(a=this._$Do)||void 0===a||a.setConnected(!1)}render(){return Jy}}n_.finalized=!0,n_._$litElement$=!0,null===(V5=globalThis.litElementHydrateSupport)||void 0===V5||V5.call(globalThis,{LitElement:n_}),(0,globalThis.litElementPolyfillSupport)?.({LitElement:n_}),(null!==(U5=globalThis.litElementVersions)&&void 0!==U5?U5:globalThis.litElementVersions=[]).push("3.2.2");const wie=I5`@charset "UTF-8";:host,:root{--δ2:var(--cds-global-layout-space-xxs, calc(4 * 1rem / var(--cds-global-base, 20)));--δ3:var(--cds-global-layout-space-xs, calc(8 * 1rem / var(--cds-global-base, 20)));--δ4:var(--cds-global-layout-space-sm, calc(12 * 1rem / var(--cds-global-base, 20)));--δ5:var(--cds-global-layout-space-md, calc(16 * 1rem / var(--cds-global-base, 20)));--δ6:var(--cds-global-layout-space-lg, calc(24 * 1rem / var(--cds-global-base, 20)));--δ7:var(--cds-global-layout-space-xl, calc(32 * 1rem / var(--cds-global-base, 20)))}[cds-layout~="wrap:none"]{flex-wrap:nowrap!important}[cds-layout*="align:stretch"]{flex-grow:1!important}[cds-layout*="align:shrink"]{flex-shrink:1!important;flex-grow:0!important}[cds-layout~=horizontal]{display:flex;flex-direction:row;flex-wrap:wrap;justify-items:flex-start;align-items:flex-start;width:100%;margin:0;min-height:0}[cds-layout~=horizontal]>[cds-layout~=horizontal],[cds-layout~=horizontal]>[cds-layout~=vertical],[cds-layout~=horizontal]>[cds-text]{width:initial!important}[cds-layout~=horizontal][cds-layout*="align:top"]{align-items:flex-start}[cds-layout~=horizontal][cds-layout*="align:left"]{justify-content:flex-start}[cds-layout~=horizontal][cds-layout*="align:right"]{justify-content:flex-end}[cds-layout~=horizontal][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=horizontal][cds-layout*="align:horizontal-center"]{justify-content:center}[cds-layout~=horizontal][cds-layout*="align:center"]{align-items:center;align-content:center;justify-content:center}[cds-layout~=horizontal][cds-layout*="order:reverse"]{flex-direction:row-reverse}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]{justify-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>*{flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:vertical-center"]{align-self:center}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:horizontal-center"]{margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:top"]{align-self:flex-start}[cds-layout~=horizontal]>[cds-layout*="align:right"]{margin-left:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:left"]{margin-right:auto!important}[cds-layout~=vertical]{width:100%;display:flex;flex-direction:column;align-items:flex-start}[cds-layout~=vertical],[cds-layout~=vertical][cds-layout*="align:top"]{justify-content:flex-start}[cds-layout~=vertical][cds-layout*="align:left"]{align-items:flex-start}[cds-layout~=vertical][cds-layout*="align:right"]{align-items:flex-end}[cds-layout~=vertical][cds-layout*="align:vertical-center"]{justify-content:center}[cds-layout~=vertical][cds-layout*="align:horizontal-center"]{align-items:center}[cds-layout~=vertical][cds-layout*="align:center"]{align-items:center;justify-content:center}[cds-layout~=vertical][cds-layout*="order:reverse"]{flex-direction:column-reverse}[cds-layout~=vertical][cds-layout*="align:horizontal-stretch"]{align-items:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]{align-items:stretch;justify-content:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:vertical-center"]{margin-top:auto;margin-bottom:auto}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:horizontal-center"]{align-self:center}[cds-layout~=vertical]>[cds-layout*="align:top"]{margin-bottom:auto!important}[cds-layout~=vertical]>[cds-layout*="align:right"]{margin-left:auto}[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}[cds-layout~=grid]{display:grid;align-items:start;align-content:start;grid-template-columns:repeat(var(--cds-global-layout-grid-cols,12),1fr);width:100%}[cds-layout~=grid][cds-layout*=rows]{grid-template-rows:repeat(12,auto)}[cds-layout~=grid]>[cds-layout*=row]{align-self:stretch}[cds-layout~=grid][cds-layout*="align:top"]{align-content:start}[cds-layout~=grid][cds-layout*="align:right"]{justify-content:end}[cds-layout~=grid][cds-layout*="align:left"]{justify-content:start}[cds-layout~=grid][cds-layout*="align:horizontal-stretch"]{justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=grid][cds-layout*="align:horizontal-center"]{justify-items:center;justify-content:center}[cds-layout~=grid][cds-layout*="align:center"]{align-items:center;align-content:center;justify-items:center;justify-content:center}::slotted([cds-layout~="display:screen-reader-only"]),[cds-layout~="display:screen-reader-only"]{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);padding:0;border:0;height:1px;width:1px;overflow:hidden;white-space:nowrap;top:0;left:0;display:block!important}[cds-layout*="gap:none"]{gap:0}[cds-layout*="gap:xxs"]{gap:var(--δ2)}[cds-layout*="gap:xs"]{gap:var(--δ3)}[cds-layout*="gap:sm"]{gap:var(--δ4)}[cds-layout*="gap:md"]{gap:var(--δ5)}[cds-layout*="gap:lg"]{gap:var(--δ6)}[cds-layout~="p:none"]{padding:0!important}[cds-layout~="p:xxs"]{padding:var(--δ2)!important}[cds-layout~="p:xs"]{padding:var(--δ3)!important}[cds-layout~="p:sm"]{padding:var(--δ4)!important}[cds-layout~="p:md"]{padding:var(--δ5)!important}[cds-layout~="m:md"]{margin:var(--δ5)!important}[cds-layout~="p:lg"]{padding:var(--δ6)!important}[cds-layout~="p-y:xs"]{padding-top:var(--δ3)!important;padding-bottom:var(--δ3)!important}[cds-layout~="p-x:lg"]{padding-left:var(--δ6)!important;padding-right:var(--δ6)!important}[cds-layout~="p-y:lg"]{padding-top:var(--δ6)!important;padding-bottom:var(--δ6)!important}[cds-layout~="p-l:md"]{padding-left:var(--δ5)!important}@media (min-width:992px){[cds-layout*="gap@md:lg"]{gap:var(--δ6)}[cds-layout~="p@md:lg"]{padding:var(--δ6)!important}[cds-layout~="m@md:xl"]{margin:var(--δ7)!important}}[cds-layout~=fill]{width:100%!important}*,:after,:before{box-sizing:border-box}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>::slotted(*),[cds-layout~=horizontal][cds-layout*="align:stretch"]>::slotted(*),[cds-layout~=vertical][cds-layout*="align:stretch"]>::slotted(*){flex-grow:1}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:left"]),[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}@media (min-width:576px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto}}@media (min-width:768px){[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto}}@media (min-width:992px){[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:left"]){margin-right:auto}}@media (min-width:1200px){[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto}}@media (min-width:1440px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto}}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:left"]){margin-right:auto!important}@media (min-width:576px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto!important}}@media (min-width:768px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto!important}}@media (min-width:992px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:left"]){margin-right:auto!important}}@media (min-width:1200px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto!important}}@media (min-width:1440px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto!important}}[cds-text]{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);margin-top:0;margin-bottom:0}[cds-text][cds-layout~=grid]::after,[cds-text][cds-layout~=grid]::before,[cds-text][cds-layout~=horizontal]::after,[cds-text][cds-layout~=horizontal]::before,[cds-text][cds-layout~=vertical]::after,[cds-text][cds-layout~=vertical]::before{display:none}[cds-text*=display],[cds-text*=section],[cds-text*=subsection],[cds-text*=title]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);color:var(--cds-global-typography-color-400,var(--cds-global-color-construction-900,#21333b))}[cds-text*=body],[cds-text*=message],[cds-text*=secondary]{color:var(--cds-global-typography-color-500,var(--cds-global-color-black,#000))}[cds-text*=inline]{width:auto!important;display:inline-block!important}[cds-text*=display]{font-size:var(--cds-global-typography-display-font-size,calc(40 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-display-font-weight,400);line-height:var(--cds-global-typography-display-line-height,1.1em);letter-spacing:var(--cds-global-typography-display-letter-spacing,-.0125em)}[cds-text*=display]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) + .037em)}[cds-text*=display]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) - .044em)}[cds-text*=title]{font-size:var(--cds-global-typography-title-font-size,calc(24 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-title-font-weight,400);line-height:var(--cds-global-typography-title-line-height,1.16667em);letter-spacing:var(--cds-global-typography-title-letter-spacing,-.008333em)}[cds-text*=title]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) + .037em)}[cds-text*=title]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) - .044em)}[cds-text*=section]{font-size:var(--cds-global-typography-section-font-size,calc(20 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-section-font-weight,400);line-height:var(--cds-global-typography-section-line-height,1.2em);letter-spacing:var(--cds-global-typography-section-letter-spacing,-.01em)}[cds-text*=section]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) + .037em)}[cds-text*=section]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) - .044em)}[cds-text*=subsection]{font-size:var(--cds-global-typography-subsection-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-subsection-font-weight,400);line-height:var(--cds-global-typography-subsection-line-height,1.25em);letter-spacing:var(--cds-global-typography-subsection-letter-spacing,-.0125em)}[cds-text*=subsection]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=subsection]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=body]{font-weight:var(--cds-global-typography-body-font-weight,400);font-size:var(--cds-global-typography-body-font-size,calc(14 * 1rem / var(--cds-global-base,20)));letter-spacing:var(--cds-global-typography-body-letter-spacing,-.014286em);line-height:var(--cds-global-typography-body-line-height,1.42857em)}[cds-text*=body]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) + .1em)}[cds-text*=body]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) - .044em)}body[cds-text*=body]::after,body[cds-text*=body]::before{content:none}[cds-text*=message]{font-size:var(--cds-global-typography-message-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-message-font-weight,calc(400 * 1rem / var(--cds-global-base,20)));line-height:var(--cds-global-typography-message-line-height,1.25em);letter-spacing:var(--cds-global-typography-message-letter-spacing,-.0125em)}[cds-text*=message]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=message]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=secondary]{font-size:var(--cds-global-typography-secondary-font-size,calc(13 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-secondary-font-weight,400);line-height:var(--cds-global-typography-secondary-line-height,1.23077em);letter-spacing:var(--cds-global-typography-secondary-letter-spacing,-.007692em)}[cds-text*=secondary]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) + .037em)}[cds-text*=secondary]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) - .044em)}[cds-text~=link]{color:var(--cds-global-typography-link-color,var(--cds-global-color-blue-800,#00608a))!important;text-decoration:underline!important;line-height:inherit!important;font-size:inherit!important}[cds-text~=link]:focus{outline:var(--cds-alias-object-interaction-outline,Highlight solid 2px);outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}[cds-text~=link]:hover{color:var(--cds-global-typography-link-color-hover,var(--cds-global-color-blue-900,#004b6b))!important}[cds-text~=link]:visited:not([cds-text~=static]){color:var(--cds-global-typography-link-color-visited,var(--cds-global-color-lavender-600,#3b40ce))!important}[cds-text~=link]:visited:not([cds-text~=static]):hover{color:var(--cds-global-typography-link-color-visited-hover,var(--cds-global-color-lavender-700,#2429c2))!important}@media (-webkit-min-device-pixel-ratio:0){[cds-text=link]:focus{outline:var(--cds-alias-object-interaction-outline-webkit,5px auto -webkit-focus-ring-color)}}[cds-text~=code]{color:var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200));font-family:monospace;font-size:1.1em}[cds-divider]{display:block;height:var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20)));overflow:hidden;box-shadow:var(--cds-alias-object-border-color,var(--cds-global-color-construction-200,#cbd4d8)) 0 0 0 var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20))) inset}[cds-text~=light]{font-weight:var(--cds-global-typography-font-weight-light,300)!important}[cds-text~=justify]{text-align:justify!important}[cds-text~=left]{text-align:left!important}[cds-text~=right]{text-align:right!important}[cds-text~=center]{text-align:center!important}[cds-text~=lhe]{padding:.05px 0}[cds-text~=lhe]::before{content:"";margin-top:-.124em;display:block;height:0}[cds-text~=lhe]::after{content:"";margin-bottom:-.221em;display:block;height:0}[cds-text*=h2],[cds-text*=h3]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);font-size:1.4rem;font-weight:200;color:var(--cds-global-typography-color-400);line-height:1.7143em;letter-spacing:-.017857em}[cds-text*=h2]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.7143em - 1em)/ 2))*-1) + .037em)}[cds-text*=h2]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.7143em - 1em)/ 2))*-1) - .044em)}[cds-text*=h3]{font-size:1.1rem;line-height:1.0909em;letter-spacing:-.013636em}[cds-text*=h3]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.0909em - 1em)/ 2))*-1) + .037em)}[cds-text*=h3]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.0909em - 1em)/ 2))*-1) - .044em)}:host{all:initial;display:block;visibility:inherit;font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);contain:layout;box-sizing:border-box!important;-webkit-appearance:none!important}*,:after,:before{box-sizing:inherit!important}slot{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);display:contents!important}::slotted(*){font-family:inherit;box-sizing:inherit}::slotted(*)::placeholder{color:var(--cds-global-typography-color-200,var(--cds-global-color-construction-600,#4f6169))}:host([_is-anchor]),:host([role=button]){cursor:pointer!important}:host([_is-anchor]) ::slotted(*),:host([role=button]) ::slotted(*){cursor:pointer!important}:host([role=button][disabled]){cursor:not-allowed!important}:host([role=button][disabled]) ::slotted(*){cursor:not-allowed!important;pointer-events:none}:host([hidden]),[hidden]{display:none!important}:host([hidden*=false]){display:block!important}:host([role=dialog][hidden]),:host([role=dialog][hidden]) ::slotted(*){display:block!important;visibility:hidden!important}:host([role=dialog][hidden*=false]),:host([role=dialog][hidden*=false]) ::slotted(*){visibility:visible!important}:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:Highlight solid 2px;outline:5px auto -webkit-focus-ring-color;outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}`;function z5(c){return`calc((${c} / var(--cds-global-base)) * 1rem)`}const WNe=(c,a)=>"method"===a.kind&&a.descriptor&&!("value"in a.descriptor)?{...a,finisher(l){l.createProperty(a.key,c)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:a.key,initializer(){"function"==typeof a.initializer&&(this[a.key]=a.initializer.call(this))},finisher(l){l.createProperty(a.key,c)}};function Oie(c){return(a,l)=>void 0!==l?void a.constructor.createProperty(l,c):WNe(c,a)}typeof Symbol<"u"&&Symbol;function Iie(c,a){switch(a&&a.type){case Array:case Object:return{reflect:!1,...a};case String:return{reflect:!0,attribute:Fm(c),converter:{toAttribute:l=>l||null},...a};case Number:return{reflect:!0,attribute:Fm(c),...a};case Boolean:return{reflect:!0,attribute:Fm(c),converter:{toAttribute:l=>l?"":null,fromAttribute:l=>function u5e(c){return null!=c&&""+c!="false"}(l)},...a};case Date:return{reflect:!1,converter:{fromAttribute:l=>new Date(l)},...a};default:return{...a}}}function Zs(c){return(a,l)=>(c?.required&&function h5e(c,a,l){const h=c.firstUpdated;c.firstUpdated=function(d){if(l&&l.required&&$p(this[a])){const f=l.requiredMessage||function(p="warning",g,m){const v=m.toLocaleLowerCase();return`${Zee(p)}: ${g} is required to use ${v} component. Set the JS Property or HTML Attribute.\n\n`+($ee()?`Angular: <${v} [${g}]="..."></${v}>\n`:"")+(Gee()?`Vue: <${v} :${g}="..."></${v}>\n`:"")+(Wee()?`React: <${function IRe(c){return Zee(function ARe(c){return c.split("-").map((a,l)=>l?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():a).join("")}(c))}(v)} ${y=g,y.startsWith("aria")?Fm(y):y}={...} />\n`:"")+`HTML: <${v} ${Fm(g)}="..."></${v}>\nJavaScript: document.querySelector('${v}').${g} = '...';\n\n`;var y}(l.required,a,this.tagName);if("error"===l.required)throw Error(f);Lm.warn(f,this)}h&&h.call(this,d)}}(a,l,c),Oie(Iie(l,c))(a,l))}function Pie(c){return(a,l)=>{const h=Iie(l,c);return h&&(h.reflect=!!c?.reflect&&c.reflect,h.reflect&&!c?.attribute&&(h.attribute="_"+Fm(l))),Oie(h)(a,l)}}var hd,c,p5e=I5`@keyframes fadeInAndOut{0%,to{opacity:0}75%{opacity:1}}:host{--color:currentColor;display:inline-block;height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));margin:0;vertical-align:middle;fill:var(--color);color:var(--color);contain:strict;cursor:inherit}svg{display:block}:host([size*=xs]){height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)))}:host([size*=sm]){height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)))}:host([size*=md]){height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)))}:host([size*=lg]){height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)))}:host([size*=xl]){height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)))}:host([size*=xxl]){height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))))}:host([size*=fit]){height:auto;width:auto;contain:layout}:host([status=success]){--color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([status=danger]){--color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([status=warning]){--color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([status=info]){--color:var(--cds-alias-status-info-shade, var(--cds-global-color-blue-800, #00608a))}:host([inverse]){--color:var(--cds-global-color-construction-200, #cbd4d8)}:host([direction=up]){transform:rotate(0)}:host([direction=down]){transform:rotate(180deg)}:host([direction=right]){transform:rotate(90deg)}:host([direction=left]){transform:rotate(270deg)}:host([flip=horizontal]){transform:scale(-1) rotateX(180deg)}:host([flip=vertical]){transform:scale(-1) rotateY(180deg)}.alert,.badge{fill:var(--badge-color,var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200)))}:host([badge=success]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge=danger]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge*=warning]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge=inherit]){--badge-color:currentColor}:host([badge=info]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([badge=inherit-triangle]){--badge-color:currentColor}:host([badge][inverse]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge=success][inverse]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge*=warning][inverse]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge*=inherit][inverse]){--badge-color:currentColor}:host([badge=info][inverse]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}.cds-internal-dot-1{animation:fadeInAndOut 1.8s ease-in 0s infinite}.cds-internal-dot-2{animation:fadeInAndOut 1.8s ease-out .422s infinite}.cds-internal-dot-3{animation:fadeInAndOut 1.8s ease-out .675s infinite}@media (prefers-reduced-motion){.cds-internal-dot-1,.cds-internal-dot-2,.cds-internal-dot-3{animation:none}}`;function y5e(c,a){let l="";switch(function g5e(c){switch(!0){case $p(c):return hd.NilSizeValue;case function Rie(c){return["xxs","xs","sm","md","lg","xl","xxl"].indexOf(c)>-1}(c):return hd.ValidSizeString;case function Fee(c){return VN(c)&&!Ree(c.trim())&&+c==+c}(c):return hd.ValidNumericString;default:return hd.BadSizeValue}}(function m5e(c){return $p(c)?"":function PRe(c,a,l=""){const h=c.split(" "),d=""===l?h.filter(f=>f!==a):h.map(f=>f===a?l:f);return d.length>0?d.join(" "):""}(c,"fit")}(a))){case hd.ValidNumericString:return l=z5(parseInt(a)),void function HNe(c,...a){a.forEach(([l,h])=>{c.style[l]=h})}(c,...function v5e(c,a){return!TS(c)&&c.indexOf("fit")>-1?[["width","auto"],["height","auto"],["min-width",a],["min-height",a]]:[["width",a],["height",a],["min-width",a],["min-height",a]]}(a,l));case hd.ValidSizeString:case hd.NilSizeValue:return void function $Ne(c,...a){a.forEach(l=>{c.style[l]=""})}(c,"width","height","min-width","min-height");default:return}}function H5(c){return c.badge&&("inherit-triangle"===c.badge||"warning-triangle"===c.badge)}(c=hd||(hd={})).BadSizeValue="bad-value",c.ValidSizeString="value-is-string",c.ValidNumericString="value-is-numeric",c.NilSizeValue="value-is-nil";class sh extends n_{constructor(){super(...arguments),this._shape="unknown",this.solid=!1,this.inverse=!1}static get styles(){return[wie,p5e]}get shape(){return this._shape}set shape(a){if(function SRe(c,a){return!$p(c)&&Nee(c,a)}(a,this._shape)){const l=this._shape;this._shape=a,this.requestUpdate("shape",l)}}get size(){return this._size}set size(a){if(function CRe(c,a){return function bRe(c){return LT(String,c)||TS(c)}(c)&&Nee(c,a)}(a,this._size)){const l=this._size;this._size=a,y5e(this,a),this.requestUpdate("size",l)}}updated(a){if(a.has("innerOffset")&&this.innerOffset>0){const l=z5(-1*this.innerOffset),h=`calc(100% + ${z5(2*this.innerOffset)})`;this.svg.style.width=h,this.svg.style.height=h,this.svg.style.margin=`${l} 0 0 ${l}`}}firstUpdated(a){if(super.firstUpdated(a),this.isConnected){let l="unknown";this.subscription=No.stateUpdates.subscribe(h=>{"iconRegistry"===h.key&&vr.registry[this.shape]&&l!==this.shape&&(l=this.shape,this.requestUpdate("shape"))})}}disconnectedCallback(){super.disconnectedCallback(),this.subscription?.unsubscribe()}render(){return VN(vr.registry[this.shape])?B5`<span .innerHTML="${vr.registry[this.shape]}"></span>`:BNe`<svg .innerHTML="${function b5e(c){const a=vr.registry[c.shape]??vr.registry.unknown;let l=c.solid&&a.solid?a.solid:a.outline;return c.badge&&!H5(c)&&(l=c.solid?a.solidBadged??l:a.outlineBadged??l),H5(c)&&(l=c.solid?a.solidAlerted??l:a.outlineAlerted??l),l}(this)+function _5e(c){let a="";return c.badge&&H5(c)?a='<path d="M26.85 1.14L21.13 11a1.28 1.28 0 001.1 2h11.45a1.28 1.28 0 001.1-2l-5.72-9.86a1.28 1.28 0 00-2.21 0z" class="alert" />':c.badge&&(a='<circle cx="30" cy="6" r="5" class="badge" />'),a}(this)}" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>`}}be([Zs({type:String})],sh.prototype,"shape",null),be([Zs({type:String})],sh.prototype,"size",null),be([Zs({type:String})],sh.prototype,"direction",void 0),be([Zs({type:String})],sh.prototype,"flip",void 0),be([Zs({type:Boolean})],sh.prototype,"solid",void 0),be([Zs({type:String})],sh.prototype,"status",void 0),be([Zs({type:Boolean})],sh.prototype,"inverse",void 0),be([Zs({type:String})],sh.prototype,"badge",void 0),be([Pie({type:Number})],sh.prototype,"innerOffset",void 0),be([function f5e(c,a){return(({finisher:c,descriptor:a})=>(l,h)=>{var d;if(void 0===h){const f=null!==(d=l.originalKey)&&void 0!==d?d:l.key,p=null!=a?{kind:"method",placement:"prototype",key:f,descriptor:a(l.key)}:{...l,key:f};return null!=c&&(p.finisher=function(g){c(g,f)}),p}{const f=l.constructor;void 0!==a&&Object.defineProperty(l,h,a(h)),c?.(f,h)}})({descriptor:l=>{const h={get(){var d,f;return null!==(f=null===(d=this.renderRoot)||void 0===d?void 0:d.querySelector(c))&&void 0!==f?f:null},enumerable:!0,configurable:!0};if(a){const d="symbol"==typeof l?Symbol():"__"+l;h.get=function(){var f,p;return void 0===this[d]&&(this[d]=null!==(p=null===(f=this.renderRoot)||void 0===f?void 0:f.querySelector(c))&&void 0!==p?p:null),this[d]}}return h}})}("svg")],sh.prototype,"svg",void 0),jne("cds-icon",sh);class S5e{constructor(a){this.host=a,this.host.addController(this)}hostConnected(){var a=this;return M5(function*(){yield a.host.updateComplete,a.host.addEventListener("keydown",l=>a.emulateActive(l)),a.host.addEventListener("mousedown",l=>a.emulateActive(l)),a.host.addEventListener("keyup",()=>a.emulateInactive()),a.host.addEventListener("blur",()=>a.emulateInactive()),a.host.addEventListener("mouseup",()=>a.emulateInactive())})()}emulateActive(a){this.host.disabled||this.host?.setAttribute("cds-active",""),"Space"===a.code&&a.target===this.host&&a.preventDefault()}emulateInactive(){this.host.removeAttribute("cds-active")}}class w5e{constructor(a){this.host=a,this.host.addController(this)}hostConnected(){(this.host.hasAttribute("aria-controls")||this.host.ariaControls)&&(this.host.ariaHasPopup="true",this.host.ariaExpanded="false")}}class D5e{constructor(a){this.host=a,this.host.addController(this)}hostUpdated(){null!==this.host.disabled&&(this.host.ariaDisabled=this.host.disabled),this.host.readonly&&(this.host.ariaDisabled=null)}}class k5e{constructor(a){this.host=a,this.host.addController(this)}hostUpdated(){null!=this.host.pressed&&(this.host.ariaPressed=this.host.pressed?"true":"false"),this.host.readonly&&(this.host.ariaPressed=null)}}class E5e{constructor(a){this.host=a,this.host.addController(this)}hostConnected(){this.host.tabIndex=0}hostUpdated(){this.host.role=this.host.readonly?null:"button",this.host.tabIndex=this.host.disabled?-1:0,this.host.readonly&&this.host.removeAttribute("tabindex")}}class I5e{constructor(a){this.host=a,this.host.addController(this)}get currentAnchor(){return"A"===this.host.parentElement?.tagName?this.host.parentElement:null}hostConnected(){this.setAnchor()}hostUpdated(){this.setAnchor()}setAnchor(){this.currentAnchor&&this.currentAnchor!==this.previousAnchor&&(this.previousAnchor=this.currentAnchor,this.host.readonly=!0,this.currentAnchor.style.lineHeight="0",this.currentAnchor.style.textDecoration="none")}}const $5=c=>c??Vo;function Fie(c){c.preventDefault(),c.stopPropagation()}const W5=new Map([["arrow-left","ArrowLeft"],["arrow-right","ArrowRight"],["arrow-up","ArrowUp"],["arrow-down","ArrowDown"],["tab","Tab"],["enter","Enter"],["escape","Escape"],["space"," "],["home","Home"],["end","End"]]);class R5e{static get keycodes(){return wRe(W5)}static add(a,l){W5.set(a,l)}static has(a){return W5.has(a)}static getCode(a,l=this.keycodes){return function F5e(c,a){return a.get(c)||""}(a,l)}}function G5(c,a){return R5e.getCode(a)===c.key}var dd;!function(c){c.ArrowUp="ArrowUp",c.ArrowDown="ArrowDown",c.ArrowLeft="ArrowLeft",c.ArrowRight="ArrowRight",c.End="End",c.Home="Home",c.PageUp="PageUp",c.PageDown="PageDown"}(dd||(dd={}));class H5e{constructor(a){this.host=a,this.triggerNativeButtonBehaviorHandler=this.triggerNativeButtonBehavior.bind(this),this.emulateKeyBoardEventBehaviorHandler=this.emulateKeyBoardEventBehavior.bind(this),this.host.addController(this)}hostUpdated(){this.setButtonType(),this.setupNativeButtonBehavior()}setButtonType(){!this.host.type&&this.host.closest("form")&&(this.host.type="submit")}setupNativeButtonBehavior(){this.host.readonly||this.host.disabled?(this.host.removeEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.removeEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler)):(this.host.addEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.addEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler))}emulateKeyBoardEventBehavior(a){!function L5e(c,a,l){c.filter(h=>G5(a,h)).length>0&&l()}(["enter","space"],a,()=>{"submit"===this.host.type?this.triggerNativeButtonBehavior(a):this.host.click(),Fie(a)})}triggerNativeButtonBehavior(a){if(this.host.disabled)Fie(a);else if(!a.defaultPrevented){const l=function U5e(c,a,l){const h=document.createElement("div");a.appendChild(h),Sie(c,a,{renderBefore:h,...l});const d=h.previousSibling;return h.remove(),d}(B5`<button aria-hidden="true" role="presentation" ?disabled="${this.host.disabled}" tabindex="-1" style="display:none!important" value="${$5(this.host.value)}" name="${$5(this.host.name)}" type="${$5(this.host.type)}"></button>`,this.host);l?.dispatchEvent(new MouseEvent("click",{relatedTarget:this.host,composed:!0})),l?.remove()}}}class W5e{constructor(a){this.host=a,this.host.addController(this)}hostUpdated(){null!=this.host.expanded&&(this.host.ariaExpanded=this.host.expanded?"true":"false"),this.host.readonly&&(this.host.ariaExpanded=null)}}let oh=class extends n_{constructor(){super(...arguments),this._disabled=!1}get disabled(){return this._disabled}set disabled(c){const a=this._disabled;this._disabled=c,this.requestUpdate("disabled",a)}};be([Zs({type:Boolean})],oh.prototype,"pressed",void 0),be([Zs({type:Boolean})],oh.prototype,"expanded",void 0),be([Zs({type:Boolean})],oh.prototype,"readonly",void 0),be([Zs({type:String})],oh.prototype,"type",void 0),be([Zs({type:String})],oh.prototype,"name",void 0),be([Zs({type:String})],oh.prototype,"value",void 0),be([Zs({type:Boolean})],oh.prototype,"disabled",null),be([Zs({type:String})],oh.prototype,"popup",void 0),oh=be([function C5e(){return c=>c.addInitializer(a=>new S5e(a))}(),function M5e(){return c=>c.addInitializer(a=>new E5e(a))}(),function T5e(){return c=>c.addInitializer(a=>new k5e(a))}(),function $5e(){return c=>c.addInitializer(a=>new W5e(a))}(),function O5e(){return c=>c.addInitializer(a=>new D5e(a))}(),function x5e(){return c=>c.addInitializer(a=>new w5e(a))}(),function z5e(){return c=>c.addInitializer(a=>new H5e(a))}(),function A5e(){return c=>c.addInitializer(a=>new I5e(a))}()],oh);const pk={actions:{sort:"Sort",expand:"Expand",close:"Close",resize:"Resize",filter:"Filter"},alert:{closeButtonAriaLabel:"Close",loading:"Loading",info:"Info",success:"Success",warning:"Warning",danger:"Error"},dropdown:{open:"Open"},file:{browse:"browse",files:"files",removeFile:"remove file"},modal:{closeButtonAriaLabel:"Close modal",contentStart:"Beginning of modal content",contentBox:"Scrollable modal body",contentEnd:"End of modal content"},navigation:{navigationElement:"navigation",navigationLabel:"navigation menu",navigationAbridgedText:"View abridged menu",navigationUnabridgedText:"View unabridged menu"},overlay:{closeButtonAriaLabel:"Close dialog",contentStart:"Beginning of dialog content",contentEnd:"End of dialog content"},popup:{closeButtonAriaLabel:"Close popup",contentStart:"Beginning of popup content",contentEnd:"End of popup content"},password:{showButtonAriaLabel:"Show password",hideButtonAriaLabel:"Hide password"},progress:{loading:"Loading",looping:"Loading"},treeview:{loading:"Loading"},grid:{resizeColumn:"Resize Column",closeDetails:"Close Details",noData:"No Results Found",rowDetailStart:"Start of row details",rowDetailEnd:"End of row details",footerEnd:"End of grid rows",action:"Action",dropTarget:"Drop Item",pagination:{label:"grid pagination",firstPage:"go to first page",previousPage:"go to previous page",nextPage:"go to next page",lastPage:"go to last page",pageSize:"rows per page",page:"page"}}};class $m{static get keys(){return 0===Object.keys(No.state.i18nRegistry).length&&(No.state.i18nRegistry=Rm(pk,No.state.i18nRegistry)),Rm(pk,No.state.i18nRegistry)}static findKey(a){const l=$m.keys;return Object.keys(l).find(h=>Bee(l[h],a))}static get(a){return a&&$m.keys[a]||{}}static reset(){No.state.i18nRegistry=Rm({},pk)}static hydrate(a,l){return JSON.parse(function FRe(c,a,l){return c.replace(/\$\{.+?\}/g,h=>function xRe(c,a,l=`\${${c}}`){return c.split(".").reduce((h,d)=>{try{const f=h[d];switch(!0){case null===f:case!1===f:case""===f:case 0===f:return f;default:return f||l}}catch{return l}},a)}(h.substr(2,h.length-3).trim(),a,l))}(JSON.stringify(a),l))}static localize(a){No.state.i18nRegistry=Rm(pk,No.state.i18nRegistry,a)}}var Z5e=I5`:host{--icon-width:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--width:var(--icon-width);--height:var(--icon-width);--cursor:pointer;--color:var(--cds-global-typography-color-300, var(--cds-global-color-construction-800, #2d4048));--font-size:var(--cds-global-typography-font-size-3, calc(13 * 1rem / var(--cds-global-base, 20)));--background:transparent;--padding:0;--outline:var(--cds-alias-object-interaction-outline, Highlight solid 2px);--outline-offset:calc(var(--cds-alias-object-interaction-outline-offset, 1px) * -1);pointer-events:none;display:inline-block;outline:0!important}:host([role=button]){pointer-events:initial;cursor:var(--cursor)!important}:host([status=active]){--color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}::slotted([shape=close]),::slotted([shape=info-circle]),::slotted([shape=times]),:host([shape=close]),:host([shape=info-circle]){--icon-width:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)))}:host(:hover){--color:var(--cds-alias-object-interaction-color-hover, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active){--color:var(--cds-alias-object-interaction-color-active, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active) .private-host{transform:translateY(calc(var(--cds-global-space-1,calc(1 * 1rem / var(--cds-global-base,20)))/ 2))}:host([disabled]){--color:var(--cds-alias-object-interaction-color-disabled, var(--cds-global-color-construction-300, #aeb8bc))}.private-host{--icon-color:var(--color);background:var(--background);padding:var(--padding);color:var(--color);font-size:var(--font-size);display:flex;justify-content:center;align-items:center;min-width:var(--width);min-height:var(--height)}::slotted(cds-icon),cds-icon{width:var(--icon-width);height:var(--icon-height);pointer-events:none}::slotted(cds-icon:not([status])),cds-icon{--color:var(--icon-color)}:host([disabled]:active){pointer-events:none!important}.private-host::after{content:"";position:absolute;left:calc(-1*var(--width) - 1);top:calc(-1*var(--height) - 1);width:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)));height:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)))}:host([disabled]) .private-host::after{outline:0!important}:host(:focus) .private-host::after{outline:var(--outline);outline-offset:var(--outline-offset)}@media (-webkit-min-device-pixel-ratio:0){:host(:focus) .private-host::after{outline-color:-webkit-focus-ring-color}}`;class Wm extends oh{constructor(){super(...arguments),this.i18n=$m.keys.actions,this.cdsButtonAction=!0}render(){return B5`<div class="private-host"><slot><cds-icon .shape="${this.shape?this.shape:"ellipsis-vertical"}" .size="${this.iconSize}" ?solid="${this.pressed||this.expanded}" inner-offset="${1}"></cds-icon></slot></div>`}updated(a){super.updated(a),this.ariaLabel||this.readonly||Lm.warn("A aria-label is required for interactive cds-button-action type",this),a.has("readonly")&&(this.ariaHidden=this.readonly&&!this.hasAttribute("aria-label")?"true":null)}}Wm.styles=[wie,Z5e],be([Zs({type:String})],Wm.prototype,"shape",void 0),be([Zs({type:String,reflect:!0})],Wm.prototype,"action",void 0),be([Zs({type:String})],Wm.prototype,"iconSize",void 0),be([function G5e(){return(c,a)=>{const l=c.connectedCallback,h=c.disconnectedCallback;c.connectedCallback=function(){c.__i18nSub=No.stateUpdates.subscribe(f=>{"i18nRegistry"===f.key&&this.requestUpdate(a)}),l&&l.apply(this)},c.disconnectedCallback=function(){c.__i18nSub.unsubscribe(),h&&h.apply(this)};const d={get(){const f=Rm($m.keys[this.__i18nKey],this.__i18n||{});return $m.hydrate(f,this)},set(f){const p=function Q5e(c,a){if($p(c)){let l={};if(a.hasAttribute("cds-i18n")){const h=a.getAttribute("cds-i18n")+"";if($p(h))l={};else try{l=JSON.parse(h)}catch{Lm.warn("Clarity i18n: Invalid JSON passed to cds-i18n"),l={}}}return l}return c}(f,this),g=function j5e(c,a,l,h){return $p(c)?Bee(l,h)?{update:!1}:{update:!0,values:l}:c===a?{update:!1,values:{}}:{update:!0,key:c,values:{}}}($m.findKey(p)||"",this.__i18nKey,p,this.__i18n);void 0!==g.key&&(this.__i18nKey=g.key+""),void 0!==g.values&&(this.__i18n={...g.values}),!0===g.update&&this.requestUpdate(),this.requestUpdate(a)},enumerable:!0,configurable:!0};return void 0!==a?function(f,p,g){const m=Object.defineProperty(p,g,f);return Zs({type:Object,attribute:"cds-i18n"})(m,g)}(d,c,a):function(f,p){const g={kind:"method",placement:"prototype",key:p.key,descriptor:f};return Zs({type:Object})(g)}(d,c)}}()],Wm.prototype,"i18n",void 0),be([Pie({type:Boolean,reflect:!0,attribute:"cds-button-action"})],Wm.prototype,"cdsButtonAction",void 0);class Nie extends Wm{constructor(){super(...arguments),this.shape="close"}connectedCallback(){super.connectedCallback(),this.ariaLabel=this.ariaLabel?this.ariaLabel:this.i18n.close}}be([Zs({type:String})],Nie.prototype,"shape",void 0),jne("cds-internal-close-button",Nie),vr.addIcons(ite),vr.addAliases(["times",["close"]]);const ni=["*"];function X5e(c,a){if(1&c&&(Xr(0),se(1),Yr()),2&c){const l=q(2);F(1),Ht(l.commonStrings.keys.danger)}}function Y5e(c,a){if(1&c&&(Xr(0),se(1),Yr()),2&c){const l=q(2);F(1),Ht(l.commonStrings.keys.success)}}function K5e(c,a){if(1&c){const l=ct();R(0,"div",13),ie("@toggle.done",function(){Ee(l);const d=q().$implicit;return Ae(q().collapsePanelOnAnimationDone(d))}),R(1,"div",14),bt(2,2),N()()}2&c&&L("@toggle",void 0)}function J5e(c,a){if(1&c){const l=ct();Xr(0),R(1,"div",1)(2,"div",2)(3,"button",3,4),ie("click",function(){return Ee(l),Ae(q().togglePanel())}),YC(5,"async"),R(6,"span",5),K(7,X5e,2,1,"ng-container",0),K(8,Y5e,2,1,"ng-container",0),N(),R(9,"span",6),pe(10,"cds-icon",7)(11,"span",8)(12,"cds-icon",9)(13,"cds-icon",10),N(),bt(14),bt(15,1),N()(),R(16,"div",11),K(17,K5e,3,1,"div",12),N()(),Yr()}if(2&c){const l=a.$implicit,h=q();let d;F(1),L("ngClass",h.getPanelStateClasses(l)),F(2),Nt("clr-accordion-header-has-description",(null==(d=KC(5,15,h.accordionDescription.changes))?null:d.length)||h.accordionDescription.length),L("id",h.getAccordionHeaderId(l.templateId))("disabled",h.isAccordion&&l.disabled),ot("aria-disabled",!h.isAccordion&&l.disabled)("aria-controls",h.getAccordionContentId(l.templateId))("aria-expanded",l.open),F(4),L("ngIf",l.status===h.AccordionStatus.Error),F(1),L("ngIf",l.status===h.AccordionStatus.Complete),F(8),L("@skipInitialRender",void 0)("id",h.getAccordionContentId(l.templateId)),ot("aria-hidden",!l.open)("aria-labelledby",h.getAccordionHeaderId(l.templateId)),F(1),L("ngIf",l.open)}}const Bie=[[["clr-accordion-title"],["clr-step-title"]],[["clr-accordion-description"],["clr-step-description"]],"*"],Vie=["clr-accordion-title, clr-step-title","clr-accordion-description, clr-step-description","*"],vBe=["clrLoading",""];function yBe(c,a){1&c&&(R(0,"span"),pe(1,"span",2),N()),2&c&&(F(1),L("@spinner",void 0))}function _Be(c,a){if(1&c){const l=ct();R(0,"span")(1,"span",3),ie("@validated.done",function(){Ee(l);const d=q();return Ae(d.loadingStateChange(d.buttonState.DEFAULT))}),N()()}2&c&&(F(1),L("@validated",void 0))}function bBe(c,a){1&c&&(R(0,"span"),bt(1),N()),2&c&&L("@defaultButton",void 0)}function CBe(c,a){1&c&&pe(0,"label")}const SBe=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],xBe=["[clrCheckbox],[clrToggle]","label"];function wBe(c,a){1&c&&pe(0,"label")}function OBe(c,a){1&c&&bt(0,2,["*ngIf","showHelper"])}function DBe(c,a){1&c&&pe(0,"cds-icon",5)}function TBe(c,a){1&c&&pe(0,"cds-icon",6)}function kBe(c,a){1&c&&bt(0,3,["*ngIf","showInvalid"])}function MBe(c,a){1&c&&bt(0,4,["*ngIf","showValid"])}const EBe=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],ABe=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function NBe(c,a){1&c&&pe(0,"label")}function BBe(c,a){1&c&&pe(0,"cds-icon",5)}function VBe(c,a){1&c&&pe(0,"cds-icon",6)}function UBe(c,a){1&c&&bt(0,2,["*ngIf","showHelper"])}function zBe(c,a){1&c&&bt(0,3,["*ngIf","showInvalid"])}function HBe(c,a){1&c&&bt(0,4,["*ngIf","showValid"])}const $Be=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],WBe=["label","[clrInput]","clr-control-helper","clr-control-error","clr-control-success"];function u8e(c,a){1&c&&pe(0,"label")}const h8e=[[["","clrRadio",""]],[["label"]]],d8e=["[clrRadio]","label"];function f8e(c,a){1&c&&pe(0,"label")}function p8e(c,a){1&c&&bt(0,2,["*ngIf","showHelper"])}function g8e(c,a){1&c&&pe(0,"cds-icon",5)}function m8e(c,a){1&c&&pe(0,"cds-icon",6)}function v8e(c,a){1&c&&bt(0,3,["*ngIf","showInvalid"])}function y8e(c,a){1&c&&bt(0,4,["*ngIf","showValid"])}const _8e=[[["label"]],[["clr-radio-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],b8e=["label","clr-radio-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function C8e(c,a){1&c&&pe(0,"label")}function S8e(c,a){1&c&&pe(0,"cds-icon",5)}function x8e(c,a){1&c&&pe(0,"cds-icon",6)}function w8e(c,a){1&c&&bt(0,2,["*ngIf","showHelper"])}function O8e(c,a){1&c&&bt(0,3,["*ngIf","showInvalid"])}function D8e(c,a){1&c&&bt(0,4,["*ngIf","showValid"])}const T8e=[[["label"]],[["","clrTextarea",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],k8e=["label","[clrTextarea]","clr-control-helper","clr-control-error","clr-control-success"];function oUe(c,a){if(1&c){const l=ct();R(0,"button",11),ie("click",function(){return Ee(l),Ae(q(2).close())}),pe(1,"cds-icon",12),N()}if(2&c){const l=q(2);ot("aria-label",l.closeButtonAriaLabel||l.commonStrings.keys.close)}}function aUe(c,a){if(1&c){const l=ct();R(0,"div",1)(1,"div",2),ie("@fadeDown.done",function(d){return Ee(l),Ae(q().fadeDone(d))}),R(2,"div",3),se(3),N(),R(4,"div",4),bt(5),R(6,"div",5)(7,"div",6)(8,"div",7),bt(9,1),N(),K(10,oUe,2,1,"button",8),N(),R(11,"div",9),bt(12,2),N(),bt(13,3),N()(),R(14,"div",3),se(15),N()(),R(16,"div",10),ie("click",function(){Ee(l);const d=q();return Ae(d.staticBackdrop||d.close())}),N()()}if(2&c){const l=q();F(1),Nt("modal-sm","sm"==l.size)("modal-lg","lg"==l.size)("modal-xl","xl"==l.size),L("cdkTrapFocusAutoCapture",!0)("@fadeDown",l.skipAnimation),ot("aria-hidden",!l._open)("aria-labelledby",l.labelledBy),F(2),Ht(l.commonStrings.keys.modalContentStart),F(5),Cy("id",l.modalId),F(2),L("ngIf",l.closable),F(5),Ht(l.commonStrings.keys.modalContentEnd),F(1),L("@fade",void 0)}}const lUe=[[["",8,"modal-nav"]],[["",8,"modal-title"]],[["",8,"modal-body"]],[["",8,"modal-footer"]]],cUe=[".modal-nav",".modal-title",".modal-body",".modal-footer"];function uUe(c,a){if(1&c&&(R(0,"span"),se(1),N()),2&c){const l=q();F(1),Ht(l.displayValue)}}let so=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,selectors:[["clr-icon"]]}),c})(),_r=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,selectors:[["cds-icon"]]}),c})(),kr=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})();class ZS{}var Is=(()=>(function(c){c[c.DEFAULT=0]="DEFAULT",c[c.LOADING=1]="LOADING",c[c.SUCCESS=2]="SUCCESS",c[c.ERROR=3]="ERROR"}(Is||(Is={})),Is))();let Q5=(()=>{class c{constructor(l){this.listener=l,this._loadingState=Is.DEFAULT}get loadingState(){return this._loadingState}set loadingState(l){!0===l?l=Is.LOADING:l||(l=Is.DEFAULT),l!==this._loadingState&&(this._loadingState=l,this.listener&&this.listener.loadingStateChange(l))}ngOnDestroy(){this.loadingState=Is.DEFAULT}}return c.\u0275fac=function(l){return new(l||c)(z(ZS,8))},c.\u0275dir=_t({type:c,selectors:[["","clrLoading",""]],inputs:{loadingState:["clrLoading","loadingState"]}}),c})(),ol=(()=>{class c{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new Tt}get loading(){return this._loading}set loading(l){(l=!!l)!==this._loading&&(this._loading=l)}get expanded(){return this._expanded}set expanded(l){(l=!!l)!==this._expanded&&(this._expanded=l,this._expandChange.next(l))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(l){this.loading=l===Is.LOADING}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),PUe=0;function Ko(){return"clr-id-"+PUe++}let zie=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=Je({type:c,selectors:[["clr-accordion-description"],["clr-step-description"]],hostVars:2,hostBindings:function(l,h){2&l&&Nt("clr-accordion-description",!0)},ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2,changeDetection:0}),c})();var ah=(()=>(function(c){c.Inactive="inactive",c.Error="error",c.Complete="complete"}(ah||(ah={})),ah))();const lh="0.2s ease-in-out",RUe=[fu("skipInitialRender",[Bo(":enter",[])]),fu("toggle",[Bo("void => *",[lr({display:"block",height:0}),Ia(lh,lr({height:"*"}))])])],j5=(fu("skipInitialRender",[Bo(":enter",[])]),fu("toggle",[Bo("void => *",[lr({display:"block",height:0}),Ia(lh,lr({height:"*"}))]),Bo("* => void",[lr({display:"block"}),Ia(lh,lr({height:0,display:"none"}))])]),{open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Manage Columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",filterItems:"Filter items",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Toggle {COLUMN} filter",datagridFilterDialogAriaLabel:"Filter dialog",columnSeparatorAriaLabel:"Column resize handle",columnSeparatorDescription:"Use left or right key to resize the column",alertCloseButtonAriaLabel:"Close alert",datepickerDialogLabel:"Choose date",datepickerToggleChooseDateLabel:"Choose date",datepickerToggleChangeDateLabel:"Change date, {SELECTED_DATE}",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",datepickerSelectedLabel:"{FULL_DATE} - Selected",stackViewChanged:"Value changed.",responsiveNavToggleOpen:"Navigation menu",responsiveNavToggleClose:"Navigation menu",responsiveNavOverflowOpen:"Navigation overflow menu",responsiveNavOverflowClose:"Navigation overflow menu",verticalNavToggle:"Toggle vertical navigation",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",comboboxDelete:"Delete selected option",comboboxSearching:'Searching for matches for "{INPUT}"',comboboxSelection:"Selection",comboboxSelected:"Selected",comboboxNoResults:"No results",comboboxOpen:"Show options",datagridExpandableBeginningOf:"Beginning of",datagridExpandableEndOf:"End of",datagridExpandableRowContent:"Expandable row content",datagridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button",wizardStepSuccess:"Completed",wizardStepError:"Error",passwordHide:"Hide password",passwordShow:"Show password",selectedRows:"Selected rows"});let nr=(()=>{class c{constructor(){this._strings=j5}localize(l){this._strings={...this._strings,...l}}get keys(){return this._strings}parse(l,h={}){const d=Object.keys(h);let f=l;return d.length&&d.forEach(p=>{f=f.replace(`{${p}}`,h[p])}),f}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var Gm=(()=>(function(c){c.Default="default",c.Multi="multi"}(Gm||(Gm={})),Gm))();let LUe=0;class NUe{constructor(a,l){this.id=a,this.accordionId=l,this.status=ah.Inactive,this.index=null,this.disabled=!1,this.open=!1,this.templateId=`${this.id}-${this.accordionId}`}}class Hie{constructor(){this.strategy=Gm.Default,this.accordionCount=LUe++,this._panels={}}get panels(){return Object.keys(this._panels).map(a=>this._panels[a])}setStrategy(a){this.strategy=a}updatePanelOrder(a){a.forEach((l,h)=>this._panels[l].index=h),this.removeOldPanels(a)}addPanel(a,l=!1){this._panels[a]=new NUe(a,this.accordionCount),this._panels[a].open=l}togglePanel(a,l){const d=void 0!==l?l:!this._panels[a].open;d&&this.strategy===Gm.Default&&this.closeAllPanels(),this._panels[a].open=d}disablePanel(a,l){this._panels[a].disabled=l}closeAllPanels(){this.panels.forEach(a=>this._panels[a.id].open=!1)}removeOldPanels(a){this.panels.filter(l=>void 0===a.find(h=>h===l.id)).forEach(l=>delete this._panels[l.id])}}let qS=(()=>{class c{constructor(){this.accordion=new Hie,this._panelsChanges=new as(this.accordion.panels)}getPanelChanges(l){return this._panelsChanges.pipe(Qn(h=>h.find(d=>d.id===l)))}setStrategy(l){this.accordion.setStrategy(l)}addPanel(l,h=!1){this.accordion.addPanel(l,h),this.emitUpdatedPanels()}togglePanel(l,h){this.accordion.togglePanel(l,h),this.emitUpdatedPanels()}disablePanel(l,h){this.accordion.disablePanel(l,h),this.emitUpdatedPanels()}updatePanelOrder(l){this.accordion.updatePanelOrder(l),this.emitUpdatedPanels()}emitUpdatedPanels(){this._panelsChanges.next(this.accordion.panels)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),Qm=(()=>{class c{constructor(l,h,d){this.commonStrings=l,this.accordionService=h,this.ifExpandService=d,this.disabled=!1,this.panelOpen=!1,this.panelOpenChange=new Mt,this.AccordionStatus=ah,this.isAccordion=!0,this._id=Ko()}get id(){return this._id}set id(l){this._id=l}ngOnInit(){this.panel=this.accordionService.getPanelChanges(this.id).pipe(Lo(l=>this.emitPanelChange(l))),this.accordionService.addPanel(this.id,this.panelOpen),this.accordionService.togglePanel(this.id,this.panelOpen),this.accordionService.disablePanel(this.id,this.disabled)}ngOnChanges(l){this.panel&&l.panelOpen&&l.panelOpen.currentValue!==l.panelOpen.previousValue&&this.accordionService.togglePanel(this.id,l.panelOpen.currentValue),this.panel&&l.disabled&&l.disabled.currentValue!==l.disabled.previousValue&&this.accordionService.disablePanel(this.id,l.disabled.currentValue)}togglePanel(){this.accordionService.togglePanel(this.id)}collapsePanelOnAnimationDone(l){l.open||(this.ifExpandService.expanded=!1)}getPanelStateClasses(l){return`clr-accordion-panel-${l.status} ${l.open?"clr-accordion-panel-open":""}`}getAccordionContentId(l){return`clr-accordion-content-${l}'`}getAccordionHeaderId(l){return`clr-accordion-header-${l}`}emitPanelChange(l){l.open!==this.panelOpen&&(this.panelOpenChange.emit(l.open),this.panelOpen=l.open),l.open&&(this.ifExpandService.expanded=!0)}}return c.\u0275fac=function(l){return new(l||c)(z(nr),z(qS),z(ol))},c.\u0275cmp=Je({type:c,selectors:[["clr-accordion-panel"]],contentQueries:function(l,h,d){if(1&l&&fi(d,zie,4),2&l){let f;jt(f=Zt())&&(h.accordionDescription=f)}},hostVars:2,hostBindings:function(l,h){2&l&&Nt("clr-accordion-panel",!0)},inputs:{disabled:["clrAccordionPanelDisabled","disabled"],panelOpen:["clrAccordionPanelOpen","panelOpen"]},outputs:{panelOpenChange:"clrAccordionPanelOpenChange"},features:[_n([ol]),ro],ngContentSelectors:Vie,decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngClass"],[1,"clr-accordion-header"],["type","button",1,"clr-accordion-header-button",3,"id","disabled","click"],["headerButton",""],[1,"clr-sr-only"],[1,"clr-accordion-status"],["shape","angle","direction","right",1,"clr-accordion-angle"],[1,"clr-accordion-number"],["status","danger","shape","exclamation-circle",1,"clr-accordion-error-icon"],["status","success","shape","check-circle",1,"clr-accordion-complete-icon"],["role","region",3,"id"],["class","clr-accordion-content",4,"ngIf"],[1,"clr-accordion-content"],[1,"clr-accordion-inner-content"]],template:function(l,h){1&l&&(dn(Bie),K(0,J5e,18,17,"ng-container",0),YC(1,"async")),2&l&&L("ngIf",KC(1,1,h.panel))},dependencies:[di,Sn,_r,zL],encapsulation:2,data:{animation:RUe},changeDetection:0}),c})(),XS=(()=>{class c{constructor(l){this.accordionService=l,this.multiPanel=!1,this.subscriptions=[]}ngOnInit(){this.setAccordionStrategy()}ngOnChanges(l){l.multiPanel.currentValue!==l.multiPanel.previousValue&&this.setAccordionStrategy()}ngAfterViewInit(){this.subscriptions.push(this.listenForDOMChanges())}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}setAccordionStrategy(){this.accordionService.setStrategy(this.multiPanel?Gm.Multi:Gm.Default)}listenForDOMChanges(){return this.panels.changes.pipe(Vp(this.panels)).subscribe(l=>this.accordionService.updatePanelOrder(l.toArray().map(h=>h.id)))}}return c.\u0275fac=function(l){return new(l||c)(z(qS))},c.\u0275cmp=Je({type:c,selectors:[["clr-accordion"]],contentQueries:function(l,h,d){if(1&l&&fi(d,Qm,5),2&l){let f;jt(f=Zt())&&(h.panels=f)}},hostVars:2,hostBindings:function(l,h){2&l&&Nt("clr-accordion",!0)},inputs:{multiPanel:["clrAccordionMultiPanel","multiPanel"]},features:[_n([qS]),ro],ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2,changeDetection:0}),c})(),YS=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=Je({type:c,selectors:[["clr-accordion-content"],["clr-step-content"]],ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2,changeDetection:0}),c})(),KS=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=Je({type:c,selectors:[["clr-accordion-title"],["clr-step-title"]],hostVars:2,hostBindings:function(l,h){2&l&&Nt("clr-accordion-title",!0)},ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2,changeDetection:0}),c})(),i_=(()=>{class c{constructor(){this._chocolate=new Tt,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c}),c})(),r_=(()=>{class c{constructor(l,h){this.subscription=h.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(h.disableChocolateCheck=!0,l.detectChanges(),h.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(z(Ro),z(i_))},c.\u0275dir=_t({type:c}),c})(),s_=(()=>{class c extends i_{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275dir=_t({type:c,selectors:[["clr-accordion"]],features:[vn]}),c})(),JS=(()=>{class c extends r_{constructor(l,h,d){if(!h)throw new Error("clr-accordion-panel should only be used inside of clr-accordion");super(l,h),this.expand=d}get flavor(){return this.expand.expanded}}return c.\u0275fac=function(l){return new(l||c)(z(Ro),z(s_,8),z(ol))},c.\u0275dir=_t({type:c,selectors:[["clr-accordion-panel"]],features:[vn]}),c})(),$ie=(()=>{class c{constructor(){vr.addIcons($y,_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr]}),c})(),HUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,$ie,$ie]}),c})();var Nn=(()=>(function(c){c.ArrowLeft="ArrowLeft",c.ArrowUp="ArrowUp",c.ArrowRight="ArrowRight",c.ArrowDown="ArrowDown",c.Backspace="Backspace",c.Tab="Tab",c.Enter="Enter",c.Escape="Escape",c.Space="Space",c.Spacebar=" ",c.Home="Home",c.End="End"}(Nn||(Nn={})),Nn))(),Ef=(()=>(function(c){c.ArrowUp="Up",c.ArrowDown="Down",c.ArrowRight="Right",c.ArrowLeft="Left",c.Space="Spacebar",c.Escape="Esc"}(Ef||(Ef={})),Ef))();function pu(c){return c===Nn.ArrowUp||c===Ef.ArrowUp?Nn.ArrowUp:c===Nn.ArrowDown||c===Ef.ArrowDown?Nn.ArrowDown:c===Nn.ArrowRight||c===Ef.ArrowRight?Nn.ArrowRight:c===Nn.ArrowLeft||c===Ef.ArrowLeft?Nn.ArrowLeft:c===Nn.Space||c===Ef.Space?Nn.Space:c===Nn.Escape||c===Ef.Escape?Nn.Escape:c}let ps=(()=>{class c{constructor(){this._open=!1,this._openChange=new Tt,this._openEventChange=new Tt,this._popoverAligned=new Tt}get openChange(){return this._openChange.asObservable()}set openEvent(l){this._openEvent=l,this._openEventChange.next(l)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(l){this._open!==(l=!!l)&&(this._open=l,this._openChange.next(l))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(l){(function q5(c){const a=pu(c.key);(a===Nn.ArrowUp||a===Nn.ArrowDown||a===Nn.ArrowLeft||a===Nn.ArrowRight)&&c.preventDefault()})(l),this.openEvent=l,this.open=!this.open}get popoverAligned(){return this._popoverAligned.asObservable()}popoverAlignedEmit(l){this._popoverAligned.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),nx=(()=>{class c{constructor(l,h,d){this.renderer=l,this.smartOpenService=h,this.document=d,this.outsideClickClose=!0,this.scrollToClose=!0,this.subscriptions=[],this.subscriptions.push(h.openChange.subscribe(f=>{f?(this.addEscapeListener(),this.addClickListener(),this.addScrollListener()):this.removeAllEventListeners()}),h.getEventChange().subscribe(f=>{this.ignoredEvent=f}))}addScrollListener(){this.scrollToClose&&(this.documentScroller=rh(this.document,"scroll",{capture:!0}),this.scrollSubscription=this.documentScroller.pipe(Kr(this.testForSmartPopoverContentContainer)).subscribe(()=>{this.smartOpenService.open=!1,this.setAnchorFocus()}))}removeScrollListener(){this.documentScroller&&(this.scrollSubscription.unsubscribe(),delete this.documentScroller)}testForSmartPopoverContentContainer(l){let h=l.target;for(;h.classList&&"body"!==h.parentElement.localName;)h=h.parentElement;return!!h.classList&&!h.classList.contains("clr-popover-content")}addClickListener(){this.outsideClickClose&&(this.documentClickListener=this.renderer.listen(this.document,"click",l=>{l===this.ignoredEvent?delete this.ignoredEvent:(this.smartOpenService.open=!1,l.target.focus())}))}removeClickListener(){this.outsideClickClose&&(delete this.ignoredEvent,this.documentClickListener&&(this.documentClickListener(),delete this.documentClickListener))}addEscapeListener(){this.escapeListener=this.renderer.listen(this.document,"keydown.escape",()=>{this.smartOpenService.open=!1,this.setAnchorFocus()})}removeEscapeListener(){this.escapeListener&&(this.escapeListener(),delete this.escapeListener)}set anchorButtonRef(l){this._anchorButtonRef=l}get anchorButtonRef(){return this._anchorButtonRef}set closeButtonRef(l){this._closeButtonRef=l}get closeButtonRef(){return this._closeButtonRef}setCloseFocus(){this._closeButtonRef.nativeElement.focus()}setAnchorFocus(){this.anchorButtonRef.nativeElement.focus()}set contentRef(l){this._contentRef=l}get contentRef(){return this._contentRef}removeAllEventListeners(){this.removeScrollListener(),this.removeClickListener(),this.removeEscapeListener()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe()),this.removeAllEventListeners()}}return c.\u0275fac=function(l){return new(l||c)(Pe(Yi),Pe(ps),Pe(hr))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();var Jo=(()=>(function(c){c[c.VERTICAL=0]="VERTICAL",c[c.HORIZONTAL=1]="HORIZONTAL"}(Jo||(Jo={})),Jo))(),cr=(()=>(function(c){c[c.START=0]="START",c[c.CENTER=.5]="CENTER",c[c.END=1]="END"}(cr||(cr={})),cr))(),jm=(()=>(function(c){c[c.BOTTOM=0]="BOTTOM",c[c.LEFT=1]="LEFT",c[c.RIGHT=2]="RIGHT",c[c.TOP=3]="TOP"}(jm||(jm={})),jm))();const jp=c=>({...c,side:-1*c.side}),Af=(c,a)=>{const l=c.content+(a?.5:-.5);return l<0||l>1?c:{...c,content:l}};function o_(c,a,l){return h=>a(c(h),l)}function Sc(c,a,l){let h=a.left,d=a.top;switch(c.axis+c.side){case-1:h+=jie(c,a,l),d-=l.height;break;case 1:h+=jie(c,a,l),d+=a.height;break;case 0:h-=l.width,d+=Zie(c,a,l);break;case 2:h+=a.width,d+=Zie(c,a,l)}return{xOffset:h,yOffset:d}}function jie(c,a,l){let h=0;switch(c.anchor){case cr.START:break;case cr.CENTER:h+=a.width/2;break;case cr.END:h+=a.width}switch(c.content){case cr.START:break;case cr.CENTER:h-=l.width/2;break;case cr.END:h-=l.width}return h}function Zie(c,a,l){let h=0;switch(c.anchor){case cr.START:break;case cr.CENTER:h+=a.height/2;break;case cr.END:h+=a.height}switch(c.content){case cr.START:break;case cr.CENTER:h-=l.height/2;break;case cr.END:h-=l.height}return h}let qie=(()=>{class c{constructor(l,h){this.eventService=l,this.platformId=h,this._shouldRealign=new Tt,this.shouldRealign=this._shouldRealign.asObservable()}realign(){this._shouldRealign.next()}set position(l){this._position=l}get position(){return this._position}alignContent(l){if(!Tr(this.platformId))return{xOffset:0,yOffset:0};this.currentAnchorCoords=this.eventService.anchorButtonRef.nativeElement.getBoundingClientRect(),this.currentContentCoords=l.getBoundingClientRect(),this.contentOffsets=Sc(this.position,this.currentAnchorCoords,this.currentContentCoords);const h=function WUe(c,a){const l=[],h_bottom=c.yOffset+a.height,h_left=c.xOffset,h_right=c.xOffset+a.width;return c.yOffset>=0||l.push(jm.TOP),h_left>=0||l.push(jm.LEFT),h_bottom<=(window.innerHeight||document.documentElement.clientHeight)||l.push(jm.BOTTOM),h_right<=(window.innerWidth||document.documentElement.clientWidth)||l.push(jm.RIGHT),l}(this.contentOffsets,this.currentContentCoords),d=h.reduce((f,p)=>f+p,0);return 1===h.length&&this.position.axis===Jo.VERTICAL?this.handleVerticalAxisOneViolation(d):1===h.length&&this.position.axis===Jo.HORIZONTAL?this.handleHorizontalAxisOneViolation(d):2===h.length&&this.position.axis===Jo.VERTICAL?this.handleVerticalAxisTwoViolations(d):2===h.length&&this.position.axis===Jo.HORIZONTAL&&this.handleHorizontalAxisTwoViolations(d),this.contentOffsets}handleVerticalAxisOneViolation(l){switch(l){case 0:case 3:this.contentOffsets=Sc(jp(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 1:this.contentOffsets=Sc(this.position,this.currentAnchorCoords,this.currentContentCoords),this.contentOffsets.xOffset<0&&(this.contentOffsets.xOffset=10);break;case 2:this.contentOffsets=Sc(Af(this.position,!0),this.currentAnchorCoords,this.currentContentCoords)}}handleVerticalAxisTwoViolations(l){switch(l){case 5:{const h=o_(jp,Af,!0);this.contentOffsets=Sc(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 4:{const h=o_(jp,Af,!1);this.contentOffsets=Sc(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:default:break;case 2:{const h=o_(jp,Af,!0);this.contentOffsets=Sc(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 1:{const h=o_(jp,Af,!1);this.contentOffsets=Sc(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}handleHorizontalAxisOneViolation(l){switch(l){case 1:case 2:this.contentOffsets=Sc(jp(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 0:this.contentOffsets=Sc(Af(this.position,!0),this.currentAnchorCoords,this.currentContentCoords);break;case 3:this.contentOffsets=Sc(Af(this.position),this.currentAnchorCoords,this.currentContentCoords)}}handleHorizontalAxisTwoViolations(l){switch(l){case 5:case 4:{const h=o_(jp,Af,!1);this.contentOffsets=Sc(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:default:break;case 2:case 1:{const h=o_(jp,Af,!0);this.contentOffsets=Sc(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}}return c.\u0275fac=function(l){return new(l||c)(Pe(nx),Pe(Ss))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),ox=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({}),c})();var Zl=(()=>(function(c){c[c.BEFORE=-1]="BEFORE",c[c.AFTER=1]="AFTER"}(Zl||(Zl={})),Zl))();class ql{}ql["top-right"]={axis:Jo.VERTICAL,side:Zl.BEFORE,anchor:cr.END,content:cr.END},ql["top-left"]={axis:Jo.VERTICAL,side:Zl.BEFORE,anchor:cr.START,content:cr.START},ql["bottom-right"]={axis:Jo.VERTICAL,side:Zl.AFTER,anchor:cr.END,content:cr.END},ql["bottom-left"]={axis:Jo.VERTICAL,side:Zl.AFTER,anchor:cr.START,content:cr.START},ql["right-top"]={axis:Jo.HORIZONTAL,side:Zl.AFTER,anchor:cr.CENTER,content:cr.END},ql["right-bottom"]={axis:Jo.HORIZONTAL,side:Zl.AFTER,anchor:cr.START,content:cr.START},ql["left-top"]={axis:Jo.HORIZONTAL,side:Zl.BEFORE,anchor:cr.CENTER,content:cr.END},ql["left-bottom"]={axis:Jo.HORIZONTAL,side:Zl.BEFORE,anchor:cr.START,content:cr.START};const gk=new sn("POPOVER_HOST_ANCHOR");let GUe=(()=>{class c{constructor(l){this.toggleService=l,this.lastOpenChange=null}ngOnInit(){this.subscription=this.toggleService.openChange.subscribe(l=>{this.lastOpenChange=l})}ngOnDestroy(){this.subscription?.unsubscribe()}onEscapeKey(l){null!==this.lastOpenChange&&(!1===this.lastOpenChange&&l.stopPropagation(),this.lastOpenChange=null)}}return c.\u0275fac=function(l){return new(l||c)(z(ps))},c.\u0275dir=_t({type:c,hostBindings:function(l,h){1&l&&ie("keyup.escape",function(f){return h.onEscapeKey(f)})},standalone:!0}),c})(),If=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,standalone:!0,features:[_n([ps,nx,qie,{provide:gk,useExisting:Mn}]),au([GUe])]}),c})(),QUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,ox]}),c})(),Y5=(()=>{class c{constructor(l,h){this.el=l,this.renderer=h,this.buttonState=Is,this.state=Is.DEFAULT,this.clrLoadingChange=new Mt(!1)}loadingStateChange(l){if(l!==this.state){switch(this.state=l,l){case Is.DEFAULT:this.renderer.removeStyle(this.el.nativeElement,"width"),this.renderer.removeStyle(this.el.nativeElement,"transform"),this.disabled||this.renderer.removeAttribute(this.el.nativeElement,"disabled");break;case Is.LOADING:this.setExplicitButtonWidth(),this.renderer.setStyle(this.el.nativeElement,"transform","translatez(0)"),this.renderer.setAttribute(this.el.nativeElement,"disabled","");break;case Is.SUCCESS:this.setExplicitButtonWidth();break;case Is.ERROR:this.loadingStateChange(Is.DEFAULT)}this.clrLoadingChange.emit(l)}}setExplicitButtonWidth(){if(this.el.nativeElement&&this.el.nativeElement.getBoundingClientRect){const l=this.el.nativeElement.getBoundingClientRect(),h=Math.max(42,l.width);this.renderer.setStyle(this.el.nativeElement,"width",`${h}px`)}}}return c.\u0275fac=function(l){return new(l||c)(z(Mn),z(Yi))},c.\u0275cmp=Je({type:c,selectors:[["button","clrLoading",""]],hostVars:1,hostBindings:function(l,h){2&l&&ot("disabled",h.disabled?"":null)},inputs:{disabled:"disabled"},outputs:{clrLoadingChange:"clrLoadingChange"},features:[_n([{provide:ZS,useExisting:c}])],attrs:vBe,ngContentSelectors:ni,decls:4,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"spinner","spinner-inline"],[1,"spinner","spinner-inline","spinner-check"]],template:function(l,h){1&l&&(dn(),Xr(0,0),K(1,yBe,2,1,"span",1),K(2,_Be,2,1,"span",1),K(3,bBe,2,1,"span",1),Yr()),2&l&&(L("ngSwitch",h.state),F(1),L("ngSwitchCase",h.buttonState.LOADING),F(1),L("ngSwitchCase",h.buttonState.SUCCESS),F(1),L("ngSwitchCase",h.buttonState.DEFAULT))},dependencies:[aT,AK],encapsulation:2,data:{animation:[fu("defaultButton",[Bo(":enter",[lr({opacity:0}),Ia("200ms 100ms ease-in",lr({opacity:1}))]),Bo(":leave",[lr({opacity:0})])]),fu("spinner",[Bo(":enter",[lr({opacity:0}),Ia("200ms 100ms ease-in",lr({opacity:1}))]),Bo(":leave",[lr({opacity:1}),Ia("100ms ease-out",lr({opacity:0}))])]),fu("validated",[Bo(":enter",[Ia("600ms",SFe([lr({transform:"scale(0,0)",offset:0}),lr({opacity:1,offset:.2}),lr({transform:"scale(1.2,1.2)",offset:.4}),lr({transform:"scale(.9,.9)",offset:.6}),lr({transform:"scale(1,1)",offset:1})]))]),Bo(":leave",[lr({opacity:1}),Ia("100ms ease-out",lr({opacity:0}))])])]}}),c})(),ZUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})(),qUe=(()=>{class c{constructor(){vr.addIcons(nte)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[ZUe,QUe]}),c})(),XUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=Je({type:c,selectors:[["ng-component"]],decls:0,vars:0,template:function(l,h){},encapsulation:2}),c})(),mk=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({}),c})(),YUe=0,ch=(()=>{class c{constructor(){this._id="clr-form-control-"+ ++YUe,this._idChange=new as(this._id)}get id(){return this._id}set id(l){this._id=l,this._idChange.next(l)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),KUe=0,Zm=(()=>{class c{constructor(){this._id="clr-form-container-"+ ++KUe,this._idChange=new as(this._id)}get id(){return this._id}set id(l){this._id=l,this._idChange.next(l)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();let K5=(()=>{class c{constructor(l,h){this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="abstract"}get id(){return this.containerIdService?`${this.containerIdService.id}-${this.controlIdSuffix}`:this.controlIdService?`${this.controlIdService.id}-${this.controlIdSuffix}`:null}}return c.\u0275fac=function(l){return new(l||c)(z(ch,8),z(Zm,8))},c.\u0275dir=_t({type:c}),c})(),J5=(()=>{class c extends K5{constructor(l,h){super(l,h),this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="error"}}return c.\u0275fac=function(l){return new(l||c)(z(ch,8),z(Zm,8))},c.\u0275cmp=Je({type:c,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(l,h){2&l&&(ot("id",h.id),Nt("clr-subtext",!0))},features:[vn],ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2}),c})(),Kie=(()=>{class c extends K5{constructor(l,h){super(l,h),this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="helper"}}return c.\u0275fac=function(l){return new(l||c)(z(ch,8),z(Zm,8))},c.\u0275cmp=Je({type:c,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(l,h){2&l&&(ot("id",h.id),Nt("clr-subtext",!0))},features:[vn],ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2}),c})(),gu=(()=>{class c{constructor(){this._controlChanges=new Tt,this._helpers=new Tt}get controlChanges(){return this._controlChanges.asObservable()}setControl(l){this._controlChanges.next(l)}get helpersChange(){return this._helpers.asObservable()}setHelpers(l){this._helpers.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();var Ra=(()=>(function(c){c.NONE="NONE",c.VALID="VALID",c.INVALID="INVALID"}(Ra||(Ra={})),Ra))();let fd=(()=>{class c{constructor(l){this.ngControlService=l,this.subscriptions=[],this._statusChanges=new as(Ra.NONE),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(h=>{h&&(this.control=h,this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.triggerStatusChange()})))}))}get statusChanges(){return this._statusChanges.asObservable()}triggerStatusChange(){if(this.control){const l=Ra[this.control.status];this._statusChanges.next(["VALID","INVALID"].includes(l)?l:Ra.NONE)}}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(Pe(gu))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();var Pf=(()=>(function(c){c.VERTICAL="vertical",c.HORIZONTAL="horizontal",c.COMPACT="compact"}(Pf||(Pf={})),Pf))();let Rf=(()=>{class c{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=Pf.HORIZONTAL,this.layoutValues=Object.keys(Pf).map(l=>Pf[l]),this._labelSize=2}set labelSize(l){this.labelSizeIsValid(l)&&(this._labelSize=l)}get labelSize(){return this._labelSize}isVertical(){return this.layout===Pf.VERTICAL}isHorizontal(){return this.layout===Pf.HORIZONTAL}isCompact(){return this.layout===Pf.COMPACT}get layoutClass(){return`clr-form-${this.layout}`}isValid(l){return this.layoutValues.indexOf(l)>-1}labelSizeIsValid(l){return Number.isInteger(l)&&l>=this.minLabelSize&&l<=this.maxLabelSize}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),ls=(()=>{class c{constructor(l,h,d,f,p){this.controlIdService=l,this.layoutService=h,this.ngControlService=d,this.renderer=f,this.el=p,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,`clr-col-md-${this.layoutService.labelSize}`)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(l=>this.forAttr=l))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(z(ch,8),z(Rf,8),z(gu,8),z(Yi),z(Mn))},c.\u0275dir=_t({type:c,selectors:[["label"]],hostVars:1,hostBindings:function(l,h){2&l&&ot("for",h.forAttr)},inputs:{forAttr:["for","forAttr"]}}),c})(),JUe=(()=>{class c extends K5{constructor(l,h){super(l,h),this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="success"}}return c.\u0275fac=function(l){return new(l||c)(z(ch,8),z(Zm,8))},c.\u0275cmp=Je({type:c,selectors:[["clr-control-success"]],hostVars:3,hostBindings:function(l,h){2&l&&(ot("id",h.id),Nt("clr-subtext",!0))},features:[vn],ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2}),c})(),pd=(()=>{class c{constructor(l){this.layoutService=l,this.className=""}controlClass(l=Ra.NONE,h=!1,d=""){const f=[this.className,d];switch(l){case Ra.VALID:f.push("clr-success");break;case Ra.INVALID:f.push("clr-error")}return h&&this.layoutService&&-1===this.className.indexOf("clr-col")&&f.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),f.join(" ").trim()}initControlClass(l,h){h&&h.className&&(this.className=h.className,h.className.split(" ").forEach(f=>{f.startsWith("clr-col")&&l.removeClass(h,f)}))}}return c.\u0275fac=function(l){return new(l||c)(Pe(Rf,8))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),ax=(()=>{class c{constructor(l,h,d,f){this.ifControlStateService=l,this.layoutService=h,this.controlClassService=d,this.ngControlService=f,this.subscriptions=[],this._dynamic=!1,this.subscriptions.push(this.ifControlStateService.statusChanges.subscribe(p=>{this.state=p,this.updateHelpers()})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(p=>{this.control=p}))}get showHelper(){return!!this.controlHelperComponent&&(!!this.controlHelperComponent&&this.state===Ra.NONE||!this.controlSuccessComponent&&this.state===Ra.VALID||!this.controlErrorComponent&&this.state===Ra.INVALID)}get showValid(){return this.state===Ra.VALID&&!!this.controlSuccessComponent}get showInvalid(){return this.state===Ra.INVALID&&!!this.controlErrorComponent}ngAfterContentInit(){this.updateHelpers()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}controlClass(){return this.controlClassService.controlClass(this.controlSuccessComponent||this.state!==Ra.VALID?this.state:Ra.NONE,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}updateHelpers(){this.ngControlService&&this.ngControlService.setHelpers({show:this.showInvalid||this.showHelper||this.showValid,showInvalid:this.showInvalid,showHelper:this.showHelper,showValid:this.showValid})}}return c.\u0275fac=function(l){return new(l||c)(z(fd),z(Rf,8),z(pd),z(gu))},c.\u0275dir=_t({type:c,contentQueries:function(l,h,d){if(1&l&&(fi(d,ls,5),fi(d,JUe,5),fi(d,J5,5),fi(d,Kie,5)),2&l){let f;jt(f=Zt())&&(h.label=f.first),jt(f=Zt())&&(h.controlSuccessComponent=f.first),jt(f=Zt())&&(h.controlErrorComponent=f.first),jt(f=Zt())&&(h.controlHelperComponent=f.first)}}}),c})();class vk{constructor(a,l,h=0){if(this.injector=l.injector,!this.injector.get(a,null)){const d=this.injector.get(Sm),f=this.injector.get(Mn);l.createComponent(d.resolveComponentFactory(XUe));const p=d.resolveComponentFactory(a),g=[];g[h]=[f.nativeElement];const m=l.createComponent(p,void 0,void 0,g);l.remove(0),m.instance._dynamic=!0,this.injector=m.injector}}get(a,l){return this.injector.get(a,l)}}let eB=(()=>{class c{constructor(){this._touched=new Tt}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),lx=(()=>{class c{constructor(l,h,d,f,p,g){this.vcr=l,this.wrapperType=h,this.ngControl=f,this.subscriptions=[],this.index=0,this.renderer=p,this.el=g;try{this.ngControlService=d.get(gu),this.ifControlStateService=d.get(fd),this.controlClassService=d.get(pd),this.markControlService=d.get(eB)}catch{}this.controlClassService&&this.controlClassService.initControlClass(p,g.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.markAsTouched()})),this.ngControlService&&this.subscriptions.push(this.ngControlService.helpersChange.subscribe(m=>{this.setAriaDescribedBy(m)}))}get id(){return this._id}set id(l){this._id=l,this.controlIdService&&(this.controlIdService.id=l)}triggerValidation(){this.ifControlStateService&&this.ifControlStateService.triggerStatusChange()}markAsTouched(){this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}getProviderFromContainer(l,h){try{return this._containerInjector.get(l,h)}catch{return h}}ngOnInit(){this._containerInjector=new vk(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(ch);try{this.containerIdService=this._containerInjector.get(Zm)}catch{}this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl)}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}setAriaDescribedBy(l){if(l.show){const h=this.getAriaDescribedById(l);if(null!==h)return void this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",h)}this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}getAriaDescribedById(l){let h="helper";return l.showInvalid?h="error":l.showValid&&(h="success"),this.containerIdService?this.containerIdService.id.concat("-",h):this.controlIdService?this.controlIdService.id.concat("-",h):null}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(uD),z(As),z(Ql),z(Yi),z(Mn))},c.\u0275dir=_t({type:c,hostVars:1,hostBindings:function(l,h){1&l&&ie("blur",function(){return h.triggerValidation()}),2&l&&td("id",h.id)},inputs:{id:"id"}}),c})(),yk=(()=>{class c{constructor(l,h){this.layoutService=l,this.markControlService=h}set labelSize(l){const h=parseInt(l,10)||2;this.layoutService.labelSize=h}markAsTouched(){this.markControlService.markAsTouched()}onFormSubmit(){this.markAsTouched()}}return c.\u0275fac=function(l){return new(l||c)(z(Rf),z(eB))},c.\u0275dir=_t({type:c,selectors:[["","clrForm",""]],contentQueries:function(l,h,d){if(1&l&&fi(d,ls,5),2&l){let f;jt(f=Zt())&&(h.labels=f)}},hostVars:6,hostBindings:function(l,h){1&l&&ie("submit",function(){return h.onFormSubmit()}),2&l&&Nt("clr-form",!0)("clr-form-horizontal",h.layoutService.isHorizontal())("clr-form-compact",h.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[_n([Rf,eB])]}),c})(),nze=(()=>{class c{constructor(l){this.layoutService=l}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}}return c.\u0275fac=function(l){return new(l||c)(z(Rf))},c.\u0275dir=_t({type:c,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),c})(),ea=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr]}),c})();const tB=new sn("IS_TOGGLE"),rze={provide:tB,useFactory:function ize(){return new as(!1)}};let Zp=(()=>{class c{constructor(l){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(l.subscribe(h=>{this.toggle=h}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(z(tB))},c.\u0275cmp=Je({type:c,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(l,h,d){if(1&l&&fi(d,ls,7),2&l){let f;jt(f=Zt())&&(h.label=f.first)}},hostVars:4,hostBindings:function(l,h){2&l&&Nt("clr-checkbox-wrapper",!h.toggle)("clr-toggle-wrapper",h.toggle)},features:[_n([ch,rze])],ngContentSelectors:xBe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(l,h){1&l&&(dn(SBe),bt(0),bt(1,1),K(2,CBe,1,0,"label",0)),2&l&&(F(2),L("ngIf",!h.label))},dependencies:[Sn,ls],encapsulation:2}),c})(),qp=(()=>{class c extends lx{constructor(l,h,d,f,p,g){super(l,Zp,h,d,f,p),this.toggle=g}ngOnInit(){super.ngOnInit();const l=this.getProviderFromContainer(tB,null);l&&null!==this.toggle&&l.next(!0)}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(As),z(Ql,10),z(Yi),z(Mn),function wC(c){return function Zwe(c,a){if("class"===a)return c.classes;if("style"===a)return c.styles;const l=c.attrs;if(l){const h=l.length;let d=0;for(;d<h;){const f=l[d];if(vj(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<h&&"string"==typeof l[d];)d++;else{if(f===a)return l[d+1];d+=2}}}return null}(da(),c)}("clrToggle"))},c.\u0275dir=_t({type:c,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[vn]}),c})(),_k=(()=>{class c extends ax{constructor(l,h,d,f){super(f,l,h,d),this.layoutService=l,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.inline=!1}set clrInline(l){this.inline="string"==typeof l?"false"!==l:!!l}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.checkboxes.length?"group":null}}return c.\u0275fac=function(l){return new(l||c)(z(Rf,8),z(pd),z(gu),z(fd))},c.\u0275cmp=Je({type:c,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],contentQueries:function(l,h,d){if(1&l&&fi(d,qp,5),2&l){let f;jt(f=Zt())&&(h.checkboxes=f)}},hostVars:7,hostBindings:function(l,h){2&l&&(ot("role",h.role),Nt("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid()))},inputs:{clrInline:"clrInline"},features:[_n([fd,gu,pd,Zm]),vn],ngContentSelectors:ABe,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(dn(EBe),bt(0),K(1,wBe,1,0,"label",0),R(2,"div",1),bt(3,1),R(4,"div",2),K(5,OBe,1,0,"ng-content",0),K(6,DBe,1,0,"cds-icon",3),K(7,TBe,1,0,"cds-icon",4),K(8,kBe,1,0,"ng-content",0),K(9,MBe,1,0,"ng-content",0),N()()),2&l&&(F(1),L("ngIf",!h.label&&h.addGrid()),F(1),Nt("clr-control-inline",h.clrInline),L("ngClass",h.controlClass()),F(3),L("ngIf",h.showHelper),F(1),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid),F(1),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid))},dependencies:[di,Sn,_r,ls],encapsulation:2}),c})(),sze=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,ea,mk,ea]}),c})();function mu(c){return null!==c&&("string"==typeof c?c.length>=0:"boolean"==typeof c&&c)}let cx=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})();new sn("IF_ACTIVE_ID");let nB=(()=>{class c{constructor(l,h,d,f,p){this.template=l,this.container=h,this.el=d,this.renderer=f,this.expand=p,this._expanded=!1,this.expandedChange=new Mt(!0),this._subscriptions=[],this._subscriptions.push(p.expandChange.subscribe(()=>{this.updateView(),this.expandedChange.emit(this.expand.expanded)}))}get expanded(){return this._expanded}set expanded(l){"boolean"==typeof l&&(this.expand.expanded=l,this._expanded=l)}updateView(){if(!this.expand.expanded||0===this.container.length)if(this.template)this.expand.expanded?this.container.createEmbeddedView(this.template):this.container.clear();else try{this.renderer.setStyle(this.el.nativeElement,"display",this.expand.expanded?null:"none")}catch{}}ngOnInit(){this.expand.expandable++,this.updateView()}ngOnDestroy(){this.expand.expandable--,this._subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(z(Cs,8),z(Ki),z(Mn),z(Yi),z(ol))},c.\u0275dir=_t({type:c,selectors:[["","clrIfExpanded",""]],inputs:{expanded:["clrIfExpanded","expanded"]},outputs:{expandedChange:"clrIfExpandedChange"}}),c})(),iB=(()=>{class c{constructor(l,h,d){this.toggleService=l,this.template=h,this.container=d,this.openChange=new Mt(!1),this.subscription=this.toggleService.openChange.subscribe(f=>{this.updateView(f),this.openChange.emit(f)})}set open(l){this.toggleService.open=l}get open(){return this.toggleService.open}updateView(l){l?this.container.createEmbeddedView(this.template):this.container.clear()}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(z(ps),z(Cs),z(Ki))},c.\u0275dir=_t({type:c,selectors:[["","clrIfOpen",""]],inputs:{open:["clrIfOpen","open"]},outputs:{openChange:"clrIfOpenChange"}}),c})(),vu=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})(),rB=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})();var al=(()=>(function(c){c.UP="up",c.DOWN="down",c.LEFT="left",c.RIGHT="right"}(al||(al={})),al))();let Ff=class{constructor(a){this.renderer=a,this._unlistenFuncs=[]}get current(){return this._current}reset(a){this._current=a}listenToArrowKeys(a){this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowup",()=>!this.move(al.UP))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowdown",()=>!this.move(al.DOWN))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowleft",()=>!this.move(al.LEFT))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowright",()=>!this.move(al.RIGHT)))}registerContainer(a){this.renderer.setAttribute(a,"tabindex","0"),this.listenToArrowKeys(a),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.enter",()=>!this.activateCurrent()))}moveTo(a){void 0!==a&&(this.current&&this.current.blur(),a.focus(),this._current=a)}move(a){let l=!1;if(this.current){const h=this.current[a];h&&(function lte(c){return!!c&&(c instanceof Ke||ge(c.lift)&&ge(c.subscribe))}(h)?h:jn(h)).subscribe(f=>{f&&(this.moveTo(f),l=!0)})}return l}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(a=>a())}};Ff.\u0275fac=function(a){return new(a||Ff)(Pe(Yi))},Ff.\u0275prov=Xe({token:Ff,factory:Ff.\u0275fac});const hze={provide:Ff,useFactory:function uze(c,a){return c||new Ff(a)},deps:[[new Pp,new Rp,Ff],Yi]};class dze{containsItem(a){return!!this.model&&this.model.includes(a)}select(a){this.addItem(a)}unselect(a){this.removeItem(a)}isEmpty(){return!(this.model&&this.model.length>0)}pop(){let a;return this.model&&this.model.length>0&&(a=this.model[this.model.length-1],this.removeItem(a)),a}toString(a,l=-1){let h="";return this.model&&(l>-1?this.model[l]&&(h+=a&&this.model[l][a]?this.model[l][a]:this.model[l].toString()):this.model.forEach(d=>{h+=a&&d[a]?d[a]:d.toString(),h+=" "})),h.trim()}addItem(a){this.containsItem(a)||(this.model=this.model||[],this.model.push(a))}removeItem(a){if(null==this.model)return;const l=this.model.indexOf(a);l>-1&&this.model.splice(l,1),0===this.model.length&&(this.model=null)}}class fze{containsItem(a){return this.model===a}select(a){this.model=a}unselect(a){this.containsItem(a)&&(this.model=null)}isEmpty(){return!this.model}pop(){const a=this.model;return this.model=null,a}toString(a){return this.model?a&&this.model[a]?this.model[a]:this.model.toString():""}}class Ck{}function ere(c){return[c,{provide:Ck,useExisting:c}]}class pze extends fze{constructor(){super(...arguments),this._focusChanged=new as(null)}get focusChanged(){return this._focusChanged.asObservable()}select(a){this.model!==a&&(this.model=a,this._focusChanged.next(a))}}let gze=(()=>{class c{constructor(){this.loading=!1,this.showAllOptions=!0,this._currentInput="",this._inputChanged=new as(""),this.inputChanged=this._inputChanged.asObservable(),this._selectionChanged=new XN(1)}get currentInput(){return this._currentInput}set currentInput(l){""===l&&!this.multiselectable&&this.setSelectionValue(null),this._currentInput=l,this._inputChanged.next(l)}get selectionChanged(){return this._selectionChanged.asObservable()}select(l){null==l||this.selectionModel.containsItem(l)||(this.selectionModel.select(l),this._selectionChanged.next(this.selectionModel))}toggle(l){null!=l&&(this.selectionModel.containsItem(l)?this.selectionModel.unselect(l):this.selectionModel.select(l),this._selectionChanged.next(this.selectionModel))}unselect(l){null==l||!this.selectionModel.containsItem(l)||(this.selectionModel.unselect(l),this._selectionChanged.next(this.selectionModel))}get multiselectable(){return this.selectionModel instanceof dze}setSelectionValue(l){!this.selectionModel||this.selectionModel.model===l||!this.selectionModel.model&&!l||(this.selectionModel.model=l,this._selectionChanged.next(this.selectionModel))}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();ere((()=>{class c{constructor(l,h,d,f){this.toggleService=h,this.selectionService=d,this.platformId=f,this.pseudoFocus=new pze,this.optionData=[],this.handleFocusSubscription(),this.renderer=l.createRenderer(null,null)}handleFocusSubscription(){this.toggleService.openChange.subscribe(l=>{l||(this.pseudoFocus.model=null)})}get trigger(){return this._trigger}set trigger(l){this._trigger=l,this.addFocusOnBlurListener(l)}get listbox(){return this._listbox}set listbox(l){this._listbox=l,this.addFocusOnBlurListener(l)}get textInput(){return this._textInput}set textInput(l){this._textInput=l,this.renderer.listen(l,"keydown",h=>!this.handleTextInput(h)),this.addFocusOnBlurListener(l)}moveFocusTo(l){let h=this.optionData.findIndex(d=>d.equals(this.pseudoFocus.model));l===al.UP?-1===h||0===h?h=this.optionData.length-1:h--:l===al.DOWN&&(-1===h||h===this.optionData.length-1?h=0:h++),this.pseudoFocus.select(this.optionData[h]),this.pseudoFocus.model&&this.pseudoFocus.model.el&&this.pseudoFocus.model.el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}openAndMoveTo(l){this.toggleService.open?this.moveFocusTo(l):(this.toggleService.openChange.pipe(id(1)).subscribe(h=>{h&&this.moveFocusTo(l)}),this.toggleService.open=!0)}handleTextInput(l){let h=!1;const d=pu(l.key);if(l)switch(d){case Nn.Enter:this.toggleService.open&&this.pseudoFocus.model&&(this.selectionService.multiselectable?this.selectionService.toggle(this.pseudoFocus.model.value):this.selectionService.select(this.pseudoFocus.model.value),h=!0);break;case Nn.Space:this.toggleService.open||(this.toggleService.open=!0,h=!0);break;case Nn.ArrowUp:this.preventViewportScrolling(l),this.openAndMoveTo(al.UP),h=!0;break;case Nn.ArrowDown:this.preventViewportScrolling(l),this.openAndMoveTo(al.DOWN),h=!0;break;default:l.key!==Nn.Tab&&(!this.selectionService.multiselectable||l.key!==Nn.Backspace)&&l.key!==Nn.Escape&&!this.toggleService.open&&(this.toggleService.open=!0)}return h}preventViewportScrolling(l){l.preventDefault(),l.stopImmediatePropagation()}focusInput(){this.textInput&&Tr(this.platformId)&&this.textInput.focus()}addFocusOnBlurListener(l){Tr(this.platformId)&&this.renderer.listen(l,"blur",h=>{this.focusOutOfComponent(h)&&(this.toggleService.open=!1,this.componentCdRef&&this.componentCdRef.detectChanges())})}focusOutOfComponent(l){const h=l.relatedTarget||document.activeElement;return!(this.textInput.contains(h)||this.trigger.contains(h)||this.listbox.contains(h))}focusFirstActive(){if(this.optionData.length>0)if(this.selectionService.selectionModel.isEmpty())this.pseudoFocus.select(this.optionData[0]);else{let l;l=this.selectionService.multiselectable?this.selectionService.selectionModel.model[0]:this.selectionService.selectionModel.model;const h=this.optionData.find(d=>d.value===l);this.pseudoFocus.select(h||this.optionData[0])}}addOptionValues(l){this.optionData=l}}return c.\u0275fac=function(l){return new(l||c)(Pe(oy),Pe(ps),Pe(gze),Pe(Ss))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})());let mze=(()=>{class c{constructor(){vr.addIcons(_c,bc,$y,kS)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,Qp,kr,rB,ea,vu,ox,cx,ea,vu]}),c})(),u_=(()=>{class c extends ax{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275cmp=Je({type:c,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(l,h){2&l&&Nt("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[_n([fd,gu,ch,pd]),vn],ngContentSelectors:WBe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(dn($Be),bt(0),K(1,NBe,1,0,"label",0),R(2,"div",1)(3,"div",2),bt(4,1),K(5,BBe,1,0,"cds-icon",3),K(6,VBe,1,0,"cds-icon",4),N(),K(7,UBe,1,0,"ng-content",0),K(8,zBe,1,0,"ng-content",0),K(9,HBe,1,0,"ng-content",0),N()),2&l&&(F(1),L("ngIf",!h.label&&h.addGrid()),F(1),L("ngClass",h.controlClass()),F(3),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid),F(1),L("ngIf",h.showHelper),F(1),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid))},dependencies:[di,Sn,_r,ls],encapsulation:2}),c})(),ux=(()=>{class c extends lx{constructor(l,h,d,f,p){super(l,u_,h,d,f,p),this.index=1}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(As),z(Ql,10),z(Yi),z(Mn))},c.\u0275dir=_t({type:c,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(l,h){2&l&&Nt("clr-input",!0)},features:[vn]}),c})(),tre=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,Qp,kr,ea,ea]}),c})(),vze=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,tre,kr]}),c})(),h_=(()=>{class c extends _ne{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275dir=_t({type:c,selectors:[["","cdkTrapFocus",""]],features:[vn]}),c})(),oB=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({}),c})(),Pze=(()=>{class c{constructor(){vr.addIcons(_c,bc,$y,XRe,YRe)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,oB,mk,vu,ox,kr,ea]}),c})();new sn(void 0);let Lze=(()=>{class c{constructor(){vr.addIcons(KRe,JRe,_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,Qp,kr,ea,ea]}),c})(),fB=(()=>{class c{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=Je({type:c,selectors:[["clr-radio-wrapper"]],contentQueries:function(l,h,d){if(1&l&&fi(d,ls,7),2&l){let f;jt(f=Zt())&&(h.label=f.first)}},hostVars:2,hostBindings:function(l,h){2&l&&Nt("clr-radio-wrapper",!0)},features:[_n([ch])],ngContentSelectors:d8e,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(l,h){1&l&&(dn(h8e),bt(0),bt(1,1),K(2,u8e,1,0,"label",0)),2&l&&(F(2),L("ngIf",!h.label))},dependencies:[Sn,ls],encapsulation:2}),c})(),wk=(()=>{class c extends lx{constructor(l,h,d,f,p){super(l,fB,h,d,f,p)}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(As),z(Ql,10),z(Yi),z(Mn))},c.\u0275dir=_t({type:c,selectors:[["","clrRadio",""]],features:[vn]}),c})(),hre=(()=>{class c extends ax{constructor(l,h,d,f){super(f,l,h,d),this.layoutService=l,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.inline=!1}set clrInline(l){this.inline="string"==typeof l?"false"!==l:!!l}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.radios.length?"group":null}}return c.\u0275fac=function(l){return new(l||c)(z(Rf,8),z(pd),z(gu),z(fd))},c.\u0275cmp=Je({type:c,selectors:[["clr-radio-container"]],contentQueries:function(l,h,d){if(1&l&&fi(d,wk,5),2&l){let f;jt(f=Zt())&&(h.radios=f)}},hostVars:7,hostBindings:function(l,h){2&l&&(ot("role",h.role),Nt("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid()))},inputs:{clrInline:"clrInline"},features:[_n([gu,fd,pd,Zm]),vn],ngContentSelectors:b8e,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(dn(_8e),bt(0),K(1,f8e,1,0,"label",0),R(2,"div",1),bt(3,1),R(4,"div",2),K(5,p8e,1,0,"ng-content",0),K(6,g8e,1,0,"cds-icon",3),K(7,m8e,1,0,"cds-icon",4),K(8,v8e,1,0,"ng-content",0),K(9,y8e,1,0,"ng-content",0),N()()),2&l&&(F(1),L("ngIf",!h.label&&h.addGrid()),F(1),Nt("clr-control-inline",h.clrInline),L("ngClass",h.controlClass()),F(3),L("ngIf",h.showHelper),F(1),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid),F(1),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid))},dependencies:[di,Sn,ls,_r],encapsulation:2}),c})(),Nze=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,ea,mk,kr,ea]}),c})(),Bze=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,ea,mk,kr,ea]}),c})(),Vze=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,Qp,kr,ea,ea]}),c})(),dre=(()=>{class c extends ax{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Vr(c)))(h||c)}}(),c.\u0275cmp=Je({type:c,selectors:[["clr-textarea-container"]],hostVars:6,hostBindings:function(l,h){2&l&&Nt("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[_n([fd,gu,ch,pd]),vn],ngContentSelectors:k8e,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-textarea-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(dn(T8e),bt(0),K(1,C8e,1,0,"label",0),R(2,"div",1)(3,"div",2),bt(4,1),K(5,S8e,1,0,"cds-icon",3),K(6,x8e,1,0,"cds-icon",4),N(),K(7,w8e,1,0,"ng-content",0),K(8,O8e,1,0,"ng-content",0),K(9,D8e,1,0,"ng-content",0),N()),2&l&&(F(1),L("ngIf",!h.label&&h.addGrid()),F(1),L("ngClass",h.controlClass()),F(3),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid),F(1),L("ngIf",h.showHelper),F(1),L("ngIf",h.showInvalid),F(1),L("ngIf",h.showValid))},dependencies:[di,Sn,_r,ls],encapsulation:2}),c})(),pB=(()=>{class c extends lx{constructor(l,h,d,f,p){super(l,dre,h,d,f,p),this.index=1}}return c.\u0275fac=function(l){return new(l||c)(z(Ki),z(As),z(Ql,10),z(Yi),z(Mn))},c.\u0275dir=_t({type:c,selectors:[["","clrTextarea",""]],hostVars:2,hostBindings:function(l,h){2&l&&Nt("clr-textarea",!0)},features:[vn]}),c})(),Uze=(()=>{class c{constructor(){vr.addIcons(_c,bc)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,Qp,kr,ea,ea]}),c})(),fre=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,ea,sze,mze,Pze,tre,Lze,Nze,Vze,Uze,Bze,vze]}),c})(),pre=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})(),Hze=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({}),c})(),gB=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})(),$ze=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})(),vre=(()=>{class c{constructor(l){this.platformId=l,this.modalStack=[],this.keyUpEventListener=this.onKeyUp.bind(this)}trackModalOpen(l){!1===this.modalStack.includes(l)&&this.modalStack.unshift(l),Tr(this.platformId)&&document.body.addEventListener("keyup",this.keyUpEventListener)}trackModalClose(l){const h=this.modalStack.indexOf(l);h>-1&&this.modalStack.splice(h,1),0===this.modalStack.length&&Tr(this.platformId)&&document.body.removeEventListener("keyup",this.keyUpEventListener)}onKeyUp(l){this.modalStack.length&&pu(l.key)===Nn.Escape&&this.modalStack[0].close()}}return c.\u0275fac=function(l){return new(l||c)(Pe(Ss))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),hh=(()=>{class c{constructor(l){this.modalStackService=l,this.toggleState=!1,this._state=new as(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(l){this._enabled=l}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.modalStackService.trackModalClose(this),this.button&&(this.button.focus(),this.button=null)}open(l,h){this.cache=l,this.button=h,this.toggleState=!0,this._state.next(this.toggleState),this.modalStackService.trackModalOpen(this)}toggle(l,h){this.isRowOpen(l)||!l?this.close():this.open(l,h)}get state(){return this.cache}isRowOpen(l){return!(!this.toggleState||this.cache!==l)}get isOpen(){return!0===this.toggleState}}return c.\u0275fac=function(l){return new(l||c)(Pe(vre))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),v_=(()=>{class c{constructor(l){this.detailService=l,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}}return c.\u0275fac=function(l){return new(l||c)(Pe(hh))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();var Fa=(()=>(function(c){c[c.WIDTH=0]="WIDTH",c[c.HIDDEN=1]="HIDDEN"}(Fa||(Fa={})),Fa))();Object.keys(Fa).map(c=>Fa[c]).filter(c=>c===parseInt(c,10));let EB=(()=>{class c{constructor(l){this.expandableRowsCount=l,this.expandableRowsCount&&this.expandableRowsCount.register()}ngOnDestroy(){this.expandableRowsCount&&this.expandableRowsCount.unregister()}}return c.\u0275fac=function(l){return new(l||c)(z(v_,8))},c.\u0275dir=_t({type:c,selectors:[["","clrIfExpanded",""]]}),c})();const t7e={provide:new sn("FOCUS_ON_VIEW_INIT"),useValue:!0};let Rk=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({providers:[t7e],imports:[zi]}),c})();new sn("COLUMN_STATE");let h7e=(()=>{class c{constructor(){vr.addIcons(eFe,tFe,kS,nFe,ite,iFe,rte,rFe,sFe)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,Hze,oB,kr,fre,Qp,gB,vu,$ze,pre,cx,ox,rB]}),c})(),g7e=(()=>{class c{constructor(){vr.addIcons($y)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,Qp,kr,pre]}),c})();new Pp,new Rp;let S7e=(()=>{class c{constructor(){vr.addIcons($y)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,gB]}),c})(),x7e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[h7e,g7e,S7e]}),c})();class Gre{static linkParent(a,l,h){a.forEach(d=>d[h]=l)}static linkVertical(a,l=!0){a.forEach((h,d)=>{d>0&&(h.up=a[d-1]),d<a.length-1&&(h.down=a[d+1])}),l&&a.length>1&&(a[0].up=a[a.length-1],a[a.length-1].down=a[0])}}function Qre(c,a,l){return Ke.create(h=>{a(h);const d=c.subscribe(h);return()=>{d.unsubscribe(),l&&l(h)}})}let PB=(()=>{class c{constructor(l,h,d,f,p){this.renderer=l,this.parent=h,this.toggleService=d,this.focusService=f,this.platformId=p,this.id=Ko(),this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){const l=this.toggleService.openChange.subscribe(h=>{h&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?al.RIGHT:al.DOWN)})});this._unlistenFuncs.push(()=>l.unsubscribe())}handleRootFocus(){const l=this.toggleService.openChange.subscribe(h=>{h||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=h});this._unlistenFuncs.push(()=>l.unsubscribe())}get trigger(){return this._trigger}set trigger(l){this._trigger=l,this.parent?this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowright",h=>this.toggleService.toggleWithEvent(h))):(this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowup",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowdown",h=>this.toggleService.toggleWithEvent(h))),this.focusService.listenToArrowKeys(l))}get container(){return this._container}set container(l){this._container=l,this._unlistenFuncs.push(this.renderer.listen(l,"keydown.tab",h=>this.toggleService.toggleWithEvent(h))),this.parent?this._unlistenFuncs.push(this.renderer.listen(l,"keydown.escape",h=>{this.focusService.move(al.LEFT),h.stopPropagation()})):(this.focusService.registerContainer(l),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.escape",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(l,"blur",h=>{this.children.pipe(id(1)).subscribe(f=>f.forEach(p=>p.blur()));const d=h.relatedTarget||document.activeElement;d&&Tr(this.platformId)&&(l.contains(d)||d===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&Tr(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&Tr(this.platformId)&&this.trigger.blur()}activate(){Tr(this.platformId)&&this.trigger.click()}openAndGetChildren(){return Qre(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return Qre(jn(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new XN(1),this.parent?this.right=this.openAndGetChildren().pipe(Qn(l=>l[0])):(this.down=this.openAndGetChildren().pipe(Qn(l=>l[0])),this.up=this.openAndGetChildren().pipe(Qn(l=>l[l.length-1])))}addChildren(l){Gre.linkVertical(l),this.parent&&Gre.linkParent(l,this.closeAndGetThis(),al.LEFT),this.children.next(l)}ngOnDestroy(){this._unlistenFuncs.forEach(l=>l()),this.focusService.detachListeners()}}return c.\u0275fac=function(l){return new(l||c)(Pe(Yi),Pe(c,12),Pe(ps),Pe(Ff),Pe(Ss))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const w7e=ere(PB);let vx=(()=>{class c{constructor(){this._changes=new Tt}get changes(){return this._changes.asObservable()}closeMenus(){this._changes.next(!1)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const D7e={provide:vx,useFactory:function O7e(c){return c||new vx},deps:[[new Pp,new Rp,vx]]};let yx=(()=>{class c{constructor(l,h,d,f){this.parent=l,this.toggleService=h,this.cdr=d,this.subscriptions=[],this.isMenuClosable=!0,this.subscriptions.push(f.changes.subscribe(p=>this.toggleService.open=p)),this.subscriptions.push(h.openChange.subscribe(()=>this.cdr.markForCheck()))}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(z(c,12),z(ps),z(Ro),z(vx))},c.\u0275cmp=Je({type:c,selectors:[["clr-dropdown"]],hostVars:4,hostBindings:function(l,h){2&l&&Nt("dropdown",!0)("open",h.toggleService.open)},inputs:{isMenuClosable:["clrCloseMenuOnItemClick","isMenuClosable"]},features:[_n([D7e,hze,w7e]),au([If])],ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2}),c})();const T7e=[{provide:Ck,useClass:(()=>{class c{constructor(l,h,d){this.el=l,this.renderer=h,this.platformId=d,this.id=Ko(),this.disabled=!1,h.setAttribute(l.nativeElement,"id",this.id),h.setAttribute(l.nativeElement,"tabindex","-1")}focus(){Tr(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","0"),this.el.nativeElement.focus(),this.el.nativeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))}blur(){Tr(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.blur())}activate(){Tr(this.platformId)&&this.el.nativeElement.click()}}return c.\u0275fac=function(l){return new(l||c)(Pe(Mn),Pe(Yi),Pe(Ss))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})()}];let RB=(()=>{class c{constructor(l,h,d){this.dropdown=l,this._dropdownService=h,this.focusableItem=d}set disabled(l){this.focusableItem.disabled=!!l||""===l}get disabled(){return this.focusableItem.disabled}set dropdownItemId(l){this.focusableItem.id=l}get dropdownItemId(){return this.focusableItem.id}onDropdownItemClick(){setTimeout(()=>{this.dropdown.isMenuClosable&&!this.disabled&&this._dropdownService.closeMenus()})}onSpaceKeydown(l){this.stopImmediatePropagationIfDisabled(l)}onEnterKeydown(l){this.stopImmediatePropagationIfDisabled(l)}stopImmediatePropagationIfDisabled(l){this.disabled&&l.stopImmediatePropagation()}}return c.\u0275fac=function(l){return new(l||c)(z(yx),z(vx),z(Ck))},c.\u0275dir=_t({type:c,selectors:[["","clrDropdownItem",""]],hostVars:7,hostBindings:function(l,h){1&l&&ie("click",function(){return h.onDropdownItemClick()})("keydown.space",function(f){return h.onSpaceKeydown(f)})("keydown.enter",function(f){return h.onEnterKeydown(f)}),2&l&&(ot("role","menuitem")("aria-disabled",h.disabled)("id",h.dropdownItemId),Nt("disabled",h.disabled)("dropdown-item",!0))},inputs:{disabled:["clrDisabled","disabled"],dropdownItemId:["id","dropdownItemId"]},features:[_n([T7e])]}),c})();var Et=(()=>(function(c){c[c.RIGHT_CENTER=0]="RIGHT_CENTER",c[c.RIGHT_TOP=1]="RIGHT_TOP",c[c.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",c[c.TOP_CENTER=3]="TOP_CENTER",c[c.TOP_RIGHT=4]="TOP_RIGHT",c[c.TOP_LEFT=5]="TOP_LEFT",c[c.BOTTOM_CENTER=6]="BOTTOM_CENTER",c[c.BOTTOM_RIGHT=7]="BOTTOM_RIGHT",c[c.BOTTOM_LEFT=8]="BOTTOM_LEFT",c[c.LEFT_CENTER=9]="LEFT_CENTER",c[c.LEFT_TOP=10]="LEFT_TOP",c[c.LEFT_BOTTOM=11]="LEFT_BOTTOM"}(Et||(Et={})),Et))();class E7e{constructor(a){this.element=a,this.scrollableElements=[],this.boundOnScrollListener=this.emitScrollEvent.bind(this),a.style.position="absolute",a.style.top=0,a.style.bottom="auto",a.style.left=0,a.style.right="auto"}anchor(a,l,h,{offsetX:d=0,offsetY:f=0,useAnchorParent:p=!1}={}){this.addScrollEventListeners(a),p&&(a=a.parentNode),a.style.position="static";const g=a.getBoundingClientRect(),m=this.element.getBoundingClientRect();let v=g.left-m.left+d,y=g.top-m.top+f;switch(l){case Et.LEFT_TOP:case Et.TOP_LEFT:break;case Et.TOP_CENTER:v+=g.width/2;break;case Et.TOP_RIGHT:case Et.RIGHT_TOP:v+=g.width;break;case Et.LEFT_BOTTOM:case Et.BOTTOM_LEFT:y+=g.height;break;case Et.BOTTOM_CENTER:y+=g.height,v+=g.width/2;break;case Et.BOTTOM_RIGHT:case Et.RIGHT_BOTTOM:y+=g.height,v+=g.width;break;case Et.LEFT_CENTER:y+=g.height/2;break;case Et.RIGHT_CENTER:y+=g.height/2,v+=g.width}switch(h){case Et.LEFT_TOP:case Et.TOP_LEFT:break;case Et.TOP_CENTER:v-=m.width/2;break;case Et.TOP_RIGHT:case Et.RIGHT_TOP:v-=m.width;break;case Et.LEFT_BOTTOM:case Et.BOTTOM_LEFT:y-=m.height;break;case Et.BOTTOM_CENTER:y-=m.height,v-=m.width/2;break;case Et.BOTTOM_RIGHT:case Et.RIGHT_BOTTOM:y-=m.height,v-=m.width;break;case Et.LEFT_CENTER:y-=m.height/2;break;case Et.RIGHT_CENTER:y-=m.height/2,v-=m.width}const _=getComputedStyle(this.element),b=parseInt(_.marginLeft,10),C=parseInt(_.marginRight,10),x=parseInt(_.marginTop,10),w=parseInt(_.marginBottom,10);switch(l){case Et.LEFT_TOP:case Et.TOP_LEFT:case Et.TOP_RIGHT:case Et.RIGHT_TOP:(h===Et.BOTTOM_RIGHT||h===Et.RIGHT_BOTTOM)&&(y-=w,v-=C),(h===Et.BOTTOM_LEFT||h===Et.LEFT_BOTTOM)&&(y-=x,v+=b),(h===Et.TOP_LEFT||h===Et.LEFT_TOP)&&(y+=x,v+=b),(h===Et.TOP_RIGHT||h===Et.RIGHT_TOP)&&(y+=x,v-=C);break;case Et.LEFT_BOTTOM:case Et.BOTTOM_LEFT:case Et.BOTTOM_RIGHT:case Et.RIGHT_BOTTOM:(h===Et.BOTTOM_LEFT||h===Et.LEFT_BOTTOM)&&(y-=w,v+=b),(h===Et.BOTTOM_RIGHT||h===Et.RIGHT_BOTTOM)&&(y-=w,v-=C),(h===Et.TOP_LEFT||h===Et.LEFT_TOP)&&(y+=x,v+=b),(h===Et.TOP_RIGHT||h===Et.RIGHT_TOP)&&(y+=x,v-=C);break;case Et.TOP_CENTER:y-=w,v+=b,v-=C;break;case Et.BOTTOM_CENTER:y+=x,v+=b,v-=C;break;case Et.LEFT_CENTER:y+=x,y-=w,v-=C;break;case Et.RIGHT_CENTER:y+=x,y-=w,v+=b}return this.element.style.transform=`translateX(${Math.round(v)}px) translateY(${Math.round(y)}px)`,this._scroll.asObservable()}release(){this.element.style.transform="",this.removeScrollEventListeners()}isPositioned(a){const l=getComputedStyle(a).position;return"relative"===l||"absolute"===l||"fixed"===l}emitScrollEvent(){this._scroll.next()}addScrollEventListeners(a){this._scroll=new Tt;const l=a;let h=a;for(;h&&h!==document&&(this.scrolls(h)&&(h.addEventListener("scroll",this.boundOnScrollListener),this.scrollableElements.push(h)),h===l||!this.isPositioned(h));)h=h.parentNode}removeScrollEventListeners(){for(const a of this.scrollableElements)a.removeEventListener("scroll",this.boundOnScrollListener);this.scrollableElements.length=0,this._scroll&&(this._scroll.complete(),delete this._scroll)}scrolls(a){const l=getComputedStyle(a);return"scroll"===l.overflowX||"auto"===l.overflowX||"scroll"===l.overflowY||"auto"===l.overflowY}}let FB=(()=>{class c{constructor(l,h){this.parentHost=h,this.updateAnchor=!1,this.popoverOptions={},this.closeOnOutsideClick=!1,this.documentESCListener=null,this.closeOnOutsideClickCallback=d=>{this.anchorElem.contains(d.target)||(this.toggleService.open=!1)},this.el=l.get(Mn),this.toggleService=l.get(ps),this.renderer=l.get(Yi),this.ngZone=l.get(Bi),this.ref=l.get(Ro),this.anchorElem=h.nativeElement,this.popoverInstance=new E7e(this.el.nativeElement),this.subscription=this.toggleService.openChange.subscribe(d=>{d?(this.anchor(),this.attachESCListener()):(this.release(),this.detachESCListener())}),this.toggleService.open&&(this.anchor(),this.attachESCListener())}anchor(){this.updateAnchor=!0}release(){this.detachOutsideClickListener(),this.popoverInstance.release()}ngAfterViewChecked(){this.updateAnchor&&(this.updateAnchor=!1,this.popoverInstance.anchor(this.anchorElem,this.anchorPoint,this.popoverPoint,this.popoverOptions).subscribe(()=>{this.toggleService.open=!1}),this.attachOutsideClickListener())}ngOnDestroy(){this.release(),this.detachESCListener(),this.subscription.unsubscribe()}get isOffScreen(){return!this.toggleService.open}attachESCListener(){this.popoverOptions.ignoreGlobalESCListener||this.ngZone.runOutsideAngular(()=>{this.documentESCListener=this.renderer.listen("document","keydown",l=>{l&&l.key&&pu(l.key)===Nn.Escape&&this.ngZone.run(()=>{this.toggleService.open=!1,this.ref.markForCheck()})})})}detachESCListener(){this.documentESCListener&&(this.documentESCListener(),this.documentESCListener=null)}attachOutsideClickListener(){this.closeOnOutsideClick&&this.toggleService.open&&document&&document.addEventListener&&document.addEventListener("click",this.closeOnOutsideClickCallback,!0)}detachOutsideClickListener(){this.closeOnOutsideClick&&document&&document.removeEventListener&&document.removeEventListener("click",this.closeOnOutsideClickCallback,!0)}}return c.\u0275fac=function(l){return new(l||c)(z(As),z(Mn,4))},c.\u0275dir=_t({type:c,hostVars:2,hostBindings:function(l,h){2&l&&Nt("is-off-screen",h.isOffScreen)}}),c})(),LB=(()=>{class c extends FB{constructor(l,h,d,f){if(!h)throw new Error("clr-dropdown-menu should only be used inside of a clr-dropdown");super(l,h),d?(this.anchorPoint=Et.RIGHT_TOP,this.popoverPoint=Et.LEFT_TOP):(this.anchorPoint=Et.BOTTOM_LEFT,this.popoverPoint=Et.LEFT_TOP),this.popoverOptions.allowMultipleOpen=!0,this.popoverOptions.ignoreGlobalESCListener=!0,this.closeOnOutsideClick=!0,this.focusHandler=f}set position(l){switch(l){case"top-right":this.anchorPoint=Et.TOP_RIGHT,this.popoverPoint=Et.RIGHT_BOTTOM;break;case"top-left":this.anchorPoint=Et.TOP_LEFT,this.popoverPoint=Et.LEFT_BOTTOM;break;case"bottom-right":this.anchorPoint=Et.BOTTOM_RIGHT,this.popoverPoint=Et.RIGHT_TOP;break;case"bottom-left":default:this.anchorPoint=Et.BOTTOM_LEFT,this.popoverPoint=Et.LEFT_TOP;break;case"right-top":this.anchorPoint=Et.RIGHT_TOP,this.popoverPoint=Et.LEFT_TOP;break;case"right-bottom":this.anchorPoint=Et.RIGHT_BOTTOM,this.popoverPoint=Et.LEFT_BOTTOM;break;case"left-top":this.anchorPoint=Et.LEFT_TOP,this.popoverPoint=Et.RIGHT_TOP;break;case"left-bottom":this.anchorPoint=Et.LEFT_BOTTOM,this.popoverPoint=Et.RIGHT_BOTTOM}}ngAfterContentInit(){this.focusHandler.container=this.el.nativeElement,this.items.changes.subscribe(()=>this.focusHandler.addChildren(this.items.toArray())),this.items.notifyOnChanges()}ngOnDestroy(){super.ngOnDestroy(),this.focusHandler.resetChildren()}}return c.\u0275fac=function(l){return new(l||c)(z(As),z(gk,8),z(c,12),z(PB))},c.\u0275cmp=Je({type:c,selectors:[["clr-dropdown-menu"]],contentQueries:function(l,h,d){if(1&l&&fi(d,Ck,4),2&l){let f;jt(f=Zt())&&(h.items=f)}},hostVars:3,hostBindings:function(l,h){2&l&&(ot("role","menu"),Nt("dropdown-menu",!0))},inputs:{position:["clrPosition","position"]},features:[vn],ngContentSelectors:ni,decls:1,vars:0,template:function(l,h){1&l&&(dn(),bt(0))},encapsulation:2}),c})(),NB=(()=>{class c{constructor(l,h,d,f){this.toggleService=h,this.isRootLevelToggle=!0,l.parent&&(this.isRootLevelToggle=!1),f.trigger=d.nativeElement}get active(){return this.toggleService.open}onDropdownTriggerClick(l){this.toggleService.toggleWithEvent(l)}}return c.\u0275fac=function(l){return new(l||c)(z(yx),z(ps),z(Mn),z(PB))},c.\u0275dir=_t({type:c,selectors:[["","clrDropdownTrigger",""],["","clrDropdownToggle",""]],hostVars:10,hostBindings:function(l,h){1&l&&ie("click",function(f){return h.onDropdownTriggerClick(f)}),2&l&&(ot("aria-haspopup","menu")("aria-expanded",h.active),Nt("dropdown-toggle",h.isRootLevelToggle)("dropdown-item",!h.isRootLevelToggle)("expandable",!h.isRootLevelToggle)("active",h.active))}}),c})(),BB=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,vu,kr]}),c})(),Bk=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=_t({type:c,selectors:[["",8,"alert-text"]]}),c})(),Kre=(()=>{class c{constructor(){vr.addIcons(bc,ste,_c,oFe,kS)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,BB]}),c})(),P7e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[Kre]}),c})(),R7e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr]}),c})(),V7e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,BB]}),c})(),U7e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})();new sn("TABS_ID");let j7e=(()=>{class c{constructor(){vr.addIcons(nte)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,vu,kr,U7e,rB,vu]}),c})(),q7e=(()=>{class c{constructor(){vr.addIcons($y,rte)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,vu,Rk,vu,kr,Rk]}),c})(),X7e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[R7e,V7e,j7e,q7e]}),c})(),ase=(()=>{class c{constructor(l){this._document=l}stopScrolling(){this._document.body.classList.add("no-scrolling")}resumeScrolling(){this._document.body.classList.contains("no-scrolling")&&this._document.body.classList.remove("no-scrolling")}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),Hf=(()=>{class c{constructor(l,h,d){this._scrollingService=l,this.commonStrings=h,this.modalStackService=d,this.modalId=Ko(),this._open=!1,this._openChanged=new Mt(!1),this.closable=!0,this.closeButtonAriaLabel=this.commonStrings.keys.close,this.staticBackdrop=!0,this.skipAnimation="false",this.stopClose=!1,this.altClose=new Mt(!1),this.labelledBy=this.modalId}ngOnChanges(l){l&&Object.prototype.hasOwnProperty.call(l,"_open")&&(l._open.currentValue?(this._scrollingService.stopScrolling(),this.modalStackService.trackModalOpen(this)):this._scrollingService.resumeScrolling())}ngOnDestroy(){this._scrollingService.resumeScrolling()}open(){this._open||(this._open=!0,this._openChanged.emit(!0),this.modalStackService.trackModalOpen(this))}close(){this.stopClose?this.altClose.emit(!1):!this.closable||!this._open||(this._open=!1)}fadeDone(l){"void"===l.toState&&(this._openChanged.emit(!1),this.modalStackService.trackModalClose(this))}}return c.\u0275fac=function(l){return new(l||c)(z(ase),z(nr),z(vre))},c.\u0275cmp=Je({type:c,selectors:[["clr-modal"]],hostVars:2,hostBindings:function(l,h){2&l&&Nt("open",h._open)},inputs:{_open:["clrModalOpen","_open"],closable:["clrModalClosable","closable"],closeButtonAriaLabel:["clrModalCloseButtonAriaLabel","closeButtonAriaLabel"],size:["clrModalSize","size"],staticBackdrop:["clrModalStaticBackdrop","staticBackdrop"],skipAnimation:["clrModalSkipAnimation","skipAnimation"],stopClose:["clrModalPreventClose","stopClose"],labelledBy:["clrModalLabelledById","labelledBy"]},outputs:{_openChanged:"clrModalOpenChange",altClose:"clrModalAlternateClose"},features:[_n([],[ase]),ro],ngContentSelectors:cUe,decls:1,vars:1,consts:[["class","modal",4,"ngIf"],[1,"modal"],["cdkTrapFocus","","role","dialog","aria-modal","true",1,"modal-dialog",3,"cdkTrapFocusAutoCapture"],[1,"clr-sr-only"],[1,"modal-content-wrapper"],[1,"modal-content"],[1,"modal-header--accessible"],["cdkFocusInitial","","tabindex","-1",1,"modal-title-wrapper",3,"id"],["type","button","class","close",3,"click",4,"ngIf"],[1,"modal-body-wrapper"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["type","button",1,"close",3,"click"],["shape","window-close"]],template:function(l,h){1&l&&(dn(lUe),K(0,aUe,17,15,"div",0)),2&l&&L("ngIf",h._open)},dependencies:[Sn,h_,_r],styles:["[_nghost-%COMP%]{display:none}.open[_nghost-%COMP%]{display:inline}"],data:{animation:[fu("fadeDown",[Bo("* => false",[lr({opacity:0,transform:"translate(0, -25%)"}),Ia("0.2s ease-in-out")]),Bo("false => *",[Ia("0.2s ease-in-out",lr({opacity:0,transform:"translate(0, -25%)"}))])]),fu("fade",[Bo("void => *",[lr({opacity:0}),Ia("0.2s ease-in-out",lr({opacity:.85}))]),Bo("* => void",[Ia("0.2s ease-in-out",lr({opacity:0}))])])]}}),c})(),$f=(()=>{class c{constructor(l,h,d){this.renderer=l,this.host=h,this.tabindex="0",this.unlisteners=[],d.runOutsideAngular(()=>{this.observer=new ResizeObserver(()=>this.addOrRemoveTabIndex()),this.observer.observe(this.host.nativeElement),this.unlisteners.push(this.renderer.listen(this.host.nativeElement,"mouseup",()=>{this.addOrRemoveTabIndex()}),this.renderer.listen(this.host.nativeElement,"mousedown",()=>{this.removeTabIndex()}))})}ngOnDestroy(){for(;this.unlisteners.length;)this.unlisteners.pop()();this.observer.disconnect(),this.observer=null}addTabIndex(){this.renderer.setAttribute(this.host.nativeElement,"tabindex",this.tabindex)}removeTabIndex(){this.renderer.removeAttribute(this.host.nativeElement,"tabindex")}addOrRemoveTabIndex(){const l=this.host.nativeElement.parentElement;l&&l.clientHeight<l.scrollHeight?this.addTabIndex():this.removeTabIndex()}}return c.\u0275fac=function(l){return new(l||c)(z(Yi),z(Mn),z(Bi))},c.\u0275dir=_t({type:c,selectors:[["",8,"modal-body"]]}),c})(),lse=(()=>{class c{constructor(){vr.addIcons(kS)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,oB,kr,kr]}),c})(),J7e=(()=>{class c{constructor(){vr.addIcons(kS,ste)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,Rk,vu]}),c})(),rHe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,vu,kr]}),c})(),sHe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[BB,J7e,rHe]}),c})(),ZB=(()=>{class c{constructor(){this.externalId="",this.max=100,this._value=0}set id(l){this._ID=l,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(l){this._value=l}get progressClass(){return!0}get labeledClass(){return this._labeled}set clrLabeled(l){this._labeled=mu(l)}get fadeClass(){return this._fade}set clrFade(l){this._fade=mu(l)}get loopClass(){return this._loop}set clrLoop(l){this._loop=mu(l)}get successClass(){return this._success}set clrSuccess(l){this._success=mu(l)}get dangerClass(){return this._danger}set clrDanger(l){this._danger=mu(l)}get flashClass(){return this._flash}set clrFlash(l){this._flash=mu(l)}get flashDangerClass(){return this._flashDanger}set clrFlashDanger(l){this._flashDanger=mu(l)}displayStringValue(){return this._labeled}get displayValue(){return this.displayval?this.displayval:`${this.value||0}%`}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=Je({type:c,selectors:[["clr-progress-bar"]],hostVars:17,hostBindings:function(l,h){2&l&&(ot("id",h.externalId),Nt("progress",h.progressClass)("labeled",h.labeledClass)("progress-fade",h.fadeClass)("loop",h.loopClass)("success",h.successClass)("danger",h.dangerClass)("flash",h.flashClass)("flash-danger",h.flashDangerClass))},inputs:{id:"id",max:["clrMax","max"],displayval:["clrDisplayval","displayval"],value:["clrValue","value"],clrLabeled:"clrLabeled",clrFade:"clrFade",clrLoop:"clrLoop",clrSuccess:"clrSuccess",clrDanger:"clrDanger",clrFlash:"clrFlash",clrFlashDanger:"clrFlashDanger"},decls:2,vars:5,consts:[[3,"id"],[4,"ngIf"]],template:function(l,h){1&l&&(pe(0,"progress",0),K(1,uUe,2,1,"span",1)),2&l&&(L("id",h.id),ot("max",h.max)("value",h.value)("data-displayval",h.displayValue),F(1),L("ngIf",h.displayStringValue()))},dependencies:[Sn],encapsulation:2}),c})(),oHe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi]}),c})(),lHe=(()=>{class c{constructor(){vr.addIcons(aFe,lFe,ote,cFe)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,kr,cx,kr,cx]}),c})(),fHe=(()=>{class c{constructor(){vr.addIcons(ote)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[zi,lse,Kre]}),c})(),pHe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({imports:[P7e,x7e,kr,lse,gB,vu,Rk,qUe,fre,X7e,sHe,fHe,HUe,cx,oHe,ox,lHe]}),c})(),gHe=(()=>{class c{constructor(l,h){S(this,"router",void 0),S(this,"config",void 0),S(this,"bShowNextTime",!0),this.router=l,this.config=h}ngOnInit(){}get version(){return this.config.environment.version}ngAfterViewInit(){}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.router.navigate(["main"])})}get showNextTime(){return this.bShowNextTime}set showNextTime(l){this.bShowNextTime=l}}return S(c,"\u0275fac",function(l){return new(l||c)(z(js),z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-help"]],decls:12,vars:2,consts:[[1,"ftext","fade-in-3","pad"],[1,"bottom-space"],["type","checkbox","clrCheckbox","","name","nextShowTime","required","","value","nextShow",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","btn-block","top-space",3,"click"],["shape","check"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"h4"),se(2),N(),R(3,"p"),se(4,"Online-\u0432\u0435\u0440\u0441\u0438\u044f \u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 D3 \u0442\u0443\u0442: https://deviskin.github.io"),N(),R(5,"clr-checkbox-wrapper",1)(6,"input",2),ie("ngModelChange",function(f){return h.showNextTime=f}),N(),R(7,"label"),se(8,"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0440\u0430\u0437"),N()(),R(9,"button",3),ie("click",function(){return h.onOk()}),pe(10,"clr-icon",4),se(11," \u041d\u0430\u0447\u0430\u0442\u044c "),N()()),2&l&&(F(2),gi("\u0421\u043f\u0440\u0430\u0432\u043a\u0430 (",h.version,")."),F(4),L("ngModel",h.showNextTime))},dependencies:[so,ls,qp,Zp,cd,Pa,m5,ma],styles:[".pad[_ngcontent-%COMP%]{padding:1em}"]})),c})();function Ps(c,a){return null==c||null==a?NaN:c<a?-1:c>a?1:c>=a?0:NaN}function xse(c,a){return null==c||null==a?NaN:a<c?-1:a>c?1:a>=c?0:NaN}function Uk(c){let a,l,h;function d(g,m,v=0,y=g.length){if(v<y){if(0!==a(m,m))return y;do{const _=v+y>>>1;l(g[_],m)<0?v=_+1:y=_}while(v<y)}return v}return 2!==c.length?(a=Ps,l=(g,m)=>Ps(c(g),m),h=(g,m)=>c(g)-m):(a=c===Ps||c===xse?c:mHe,l=c,h=c),{left:d,center:function p(g,m,v=0,y=g.length){const _=d(g,m,v,y-1);return _>v&&h(g[_-1],m)>-h(g[_],m)?_-1:_},right:function f(g,m,v=0,y=g.length){if(v<y){if(0!==a(m,m))return y;do{const _=v+y>>>1;l(g[_],m)<=0?v=_+1:y=_}while(v<y)}return v}}}function mHe(){return 0}function wse(c){return null===c?NaN:+c}function*Ose(c,a){if(void 0===a)for(let l of c)null!=l&&(l=+l)>=l&&(yield l);else{let l=-1;for(let h of c)null!=(h=a(h,++l,c))&&(h=+h)>=h&&(yield h)}}const Dse=Uk(Ps),Tse=Dse.right,vHe=Dse.left,yHe=Uk(wse).center,e0=Tse;function _He(c,a){if(!((a=+a)>=0))throw new RangeError("invalid r");let l=c.length;if(!((l=Math.floor(l))>=0))throw new RangeError("invalid length");if(!l||!a)return c;const h=qB(a),d=c.slice();return h(c,d,0,l,1),h(d,c,0,l,1),h(c,d,0,l,1),c}const kse=Mse(qB),bHe=Mse(function CHe(c){const a=qB(c);return(l,h,d,f,p)=>{a(l,h,0+(d<<=2),0+(f<<=2),p<<=2),a(l,h,d+1,f+1,p),a(l,h,d+2,f+2,p),a(l,h,d+3,f+3,p)}});function Mse(c){return function(a,l,h=l){if(!((l=+l)>=0))throw new RangeError("invalid rx");if(!((h=+h)>=0))throw new RangeError("invalid ry");let{data:d,width:f,height:p}=a;if(!((f=Math.floor(f))>=0))throw new RangeError("invalid width");if(!((p=Math.floor(void 0!==p?p:d.length/f))>=0))throw new RangeError("invalid height");if(!f||!p||!l&&!h)return a;const g=l&&c(l),m=h&&c(h),v=d.slice();return g&&m?(S_(g,v,d,f,p),S_(g,d,v,f,p),S_(g,v,d,f,p),x_(m,d,v,f,p),x_(m,v,d,f,p),x_(m,d,v,f,p)):g?(S_(g,d,v,f,p),S_(g,v,d,f,p),S_(g,d,v,f,p)):m&&(x_(m,d,v,f,p),x_(m,v,d,f,p),x_(m,d,v,f,p)),a}}function S_(c,a,l,h,d){for(let f=0,p=h*d;f<p;)c(a,l,f,f+=h,1)}function x_(c,a,l,h,d){for(let f=0,p=h*d;f<h;++f)c(a,l,f,f+p,h)}function qB(c){const a=Math.floor(c);if(a===c)return function SHe(c){const a=2*c+1;return(l,h,d,f,p)=>{if(!((f-=p)>=d))return;let g=c*h[d];const m=p*c;for(let v=d,y=d+m;v<y;v+=p)g+=h[Math.min(f,v)];for(let v=d,y=f;v<=y;v+=p)g+=h[Math.min(f,v+m)],l[v]=g/a,g-=h[Math.max(d,v-m)]}}(c);const l=c-a,h=2*c+1;return(d,f,p,g,m)=>{if(!((g-=m)>=p))return;let v=a*f[p];const y=m*a,_=y+m;for(let b=p,C=p+y;b<C;b+=m)v+=f[Math.min(g,b)];for(let b=p,C=g;b<=C;b+=m)v+=f[Math.min(g,b+y)],d[b]=(v+l*(f[Math.max(p,b-_)]+f[Math.min(g,b+_)]))/h,v-=f[Math.max(p,b-y)]}}function zk(c,a){let l=0;if(void 0===a)for(let h of c)null!=h&&(h=+h)>=h&&++l;else{let h=-1;for(let d of c)null!=(d=a(d,++h,c))&&(d=+d)>=d&&++l}return l}function xHe(c){return 0|c.length}function wHe(c){return!(c>0)}function OHe(c){return"object"!=typeof c||"length"in c?c:Array.from(c)}function THe(...c){const a="function"==typeof c[c.length-1]&&function DHe(c){return a=>c(...a)}(c.pop()),l=(c=c.map(OHe)).map(xHe),h=c.length-1,d=new Array(h+1).fill(0),f=[];if(h<0||l.some(wHe))return f;for(;;){f.push(d.map((g,m)=>c[m][g]));let p=h;for(;++d[p]===l[p];){if(0===p)return a?f.map(a):f;d[p--]=0}}}function kHe(c,a){var l=0,h=0;return Float64Array.from(c,void 0===a?d=>l+=+d||0:d=>l+=+a(d,h++,c)||0)}function Ese(c,a){let h,l=0,d=0,f=0;if(void 0===a)for(let p of c)null!=p&&(p=+p)>=p&&(h=p-d,d+=h/++l,f+=h*(p-d));else{let p=-1;for(let g of c)null!=(g=a(g,++p,c))&&(g=+g)>=g&&(h=g-d,d+=h/++l,f+=h*(g-d))}if(l>1)return f/(l-1)}function Ase(c,a){const l=Ese(c,a);return l&&Math.sqrt(l)}function t0(c,a){let l,h;if(void 0===a)for(const d of c)null!=d&&(void 0===l?d>=d&&(l=h=d):(l>d&&(l=d),h<d&&(h=d)));else{let d=-1;for(let f of c)null!=(f=a(f,++d,c))&&(void 0===l?f>=f&&(l=h=f):(l>f&&(l=f),h<f&&(h=f)))}return[l,h]}class Uo{constructor(){this._partials=new Float64Array(32),this._n=0}add(a){const l=this._partials;let h=0;for(let d=0;d<this._n&&d<32;d++){const f=l[d],p=a+f,g=Math.abs(a)<Math.abs(f)?a-(p-f):f-(p-a);g&&(l[h++]=g),a=p}return l[h]=a,this._n=h+1,this}valueOf(){const a=this._partials;let h,d,f,l=this._n,p=0;if(l>0){for(p=a[--l];l>0&&(h=p,d=a[--l],p=h+d,f=d-(p-h),!f););l>0&&(f<0&&a[l-1]<0||f>0&&a[l-1]>0)&&(d=2*f,h=p+d,d==h-p&&(p=h))}return p}}function MHe(c,a){const l=new Uo;if(void 0===a)for(let h of c)(h=+h)&&l.add(h);else{let h=-1;for(let d of c)(d=+a(d,++h,c))&&l.add(d)}return+l}function EHe(c,a){const l=new Uo;let h=-1;return Float64Array.from(c,void 0===a?d=>l.add(+d||0):d=>l.add(+a(d,++h,c)||0))}class xx extends Map{constructor(a,l=Rse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:l}}),null!=a)for(const[h,d]of a)this.set(h,d)}get(a){return super.get(XB(this,a))}has(a){return super.has(XB(this,a))}set(a,l){return super.set(Ise(this,a),l)}delete(a){return super.delete(Pse(this,a))}}class n0 extends Set{constructor(a,l=Rse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:l}}),null!=a)for(const h of a)this.add(h)}has(a){return super.has(XB(this,a))}add(a){return super.add(Ise(this,a))}delete(a){return super.delete(Pse(this,a))}}function XB({_intern:c,_key:a},l){const h=a(l);return c.has(h)?c.get(h):l}function Ise({_intern:c,_key:a},l){const h=a(l);return c.has(h)?c.get(h):(c.set(h,l),l)}function Pse({_intern:c,_key:a},l){const h=a(l);return c.has(h)&&(l=c.get(h),c.delete(h)),l}function Rse(c){return null!==c&&"object"==typeof c?c.valueOf():c}function w_(c){return c}function Fse(c,...a){return O_(c,w_,w_,a)}function Lse(c,...a){return O_(c,Array.from,w_,a)}function Nse(c,a){for(let l=1,h=a.length;l<h;++l)c=c.flatMap(d=>d.pop().map(([f,p])=>[...d,f,p]));return c}function AHe(c,...a){return Nse(Lse(c,...a),a)}function IHe(c,a,...l){return Nse(Vse(c,a,...l),l)}function Bse(c,a,...l){return O_(c,w_,a,l)}function Vse(c,a,...l){return O_(c,Array.from,a,l)}function PHe(c,...a){return O_(c,w_,Use,a)}function RHe(c,...a){return O_(c,Array.from,Use,a)}function Use(c){if(1!==c.length)throw new Error("duplicate key");return c[0]}function O_(c,a,l,h){return function d(f,p){if(p>=h.length)return l(f);const g=new xx,m=h[p++];let v=-1;for(const y of f){const _=m(y,++v,f),b=g.get(_);b?b.push(y):g.set(_,[y])}for(const[y,_]of g)g.set(y,d(_,p));return a(g)}(c,0)}function zse(c,a){return Array.from(a,l=>c[l])}function YB(c,...a){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");c=Array.from(c);let[l]=a;if(l&&2!==l.length||a.length>1){const h=Uint32Array.from(c,(d,f)=>f);return a.length>1?(a=a.map(d=>c.map(d)),h.sort((d,f)=>{for(const p of a){const g=D_(p[d],p[f]);if(g)return g}})):(l=c.map(l),h.sort((d,f)=>D_(l[d],l[f]))),zse(c,h)}return c.sort(KB(l))}function KB(c=Ps){if(c===Ps)return D_;if("function"!=typeof c)throw new TypeError("compare is not a function");return(a,l)=>{const h=c(a,l);return h||0===h?h:(0===c(l,l))-(0===c(a,a))}}function D_(c,a){return(null==c||!(c>=c))-(null==a||!(a>=a))||(c<a?-1:c>a?1:0)}function FHe(c,a,l){return(2!==a.length?YB(Bse(c,a,l),([h,d],[f,p])=>Ps(d,p)||Ps(h,f)):YB(Fse(c,l),([h,d],[f,p])=>a(d,p)||Ps(h,f))).map(([h])=>h)}var LHe=Array.prototype.slice;function JB(c){return()=>c}const NHe=Math.sqrt(50),BHe=Math.sqrt(10),VHe=Math.sqrt(2);function Hk(c,a,l){const h=(a-c)/Math.max(0,l),d=Math.floor(Math.log10(h)),f=h/Math.pow(10,d),p=f>=NHe?10:f>=BHe?5:f>=VHe?2:1;let g,m,v;return d<0?(v=Math.pow(10,-d)/p,g=Math.round(c*v),m=Math.round(a*v),g/v<c&&++g,m/v>a&&--m,v=-v):(v=Math.pow(10,d)*p,g=Math.round(c/v),m=Math.round(a/v),g*v<c&&++g,m*v>a&&--m),m<g&&.5<=l&&l<2?Hk(c,a,2*l):[g,m,v]}function r0(c,a,l){if(!((l=+l)>0))return[];if((c=+c)==(a=+a))return[c];const h=a<c,[d,f,p]=h?Hk(a,c,l):Hk(c,a,l);if(!(f>=d))return[];const g=f-d+1,m=new Array(g);if(h)if(p<0)for(let v=0;v<g;++v)m[v]=(f-v)/-p;else for(let v=0;v<g;++v)m[v]=(f-v)*p;else if(p<0)for(let v=0;v<g;++v)m[v]=(d+v)/-p;else for(let v=0;v<g;++v)m[v]=(d+v)*p;return m}function s0(c,a,l){return Hk(c=+c,a=+a,l=+l)[2]}function $k(c,a,l){l=+l;const h=(a=+a)<(c=+c),d=h?s0(a,c,l):s0(c,a,l);return(h?-1:1)*(d<0?1/-d:d)}function e8(c,a,l){let h;for(;;){const d=s0(c,a,l);if(d===h||0===d||!isFinite(d))return[c,a];d>0?(c=Math.floor(c/d)*d,a=Math.ceil(a/d)*d):d<0&&(c=Math.ceil(c*d)/d,a=Math.floor(a*d)/d),h=d}}function t8(c){return Math.ceil(Math.log(zk(c))/Math.LN2)+1}function $se(){var c=w_,a=t0,l=t8;function h(d){Array.isArray(d)||(d=Array.from(d));var f,g,m,p=d.length,v=new Array(p);for(f=0;f<p;++f)v[f]=c(d[f],f,d);var y=a(v),_=y[0],b=y[1],C=l(v,_,b);if(!Array.isArray(C)){const M=b,k=+C;if(a===t0&&([_,b]=e8(_,b,k)),(C=r0(_,b,k))[0]<=_&&(m=s0(_,b,k)),C[C.length-1]>=b)if(M>=b&&a===t0){const E=s0(_,b,k);isFinite(E)&&(E>0?b=(Math.floor(b/E)+1)*E:E<0&&(b=(Math.ceil(b*-E)+1)/-E))}else C.pop()}for(var x=C.length,w=0,O=x;C[w]<=_;)++w;for(;C[O-1]>b;)--O;(w||O<x)&&(C=C.slice(w,O),x=O-w);var T,D=new Array(x+1);for(f=0;f<=x;++f)(T=D[f]=[]).x0=f>0?C[f-1]:_,T.x1=f<x?C[f]:b;if(isFinite(m)){if(m>0)for(f=0;f<p;++f)null!=(g=v[f])&&_<=g&&g<=b&&D[Math.min(x,Math.floor((g-_)/m))].push(d[f]);else if(m<0)for(f=0;f<p;++f)if(null!=(g=v[f])&&_<=g&&g<=b){const M=Math.floor((_-g)*m);D[Math.min(x,M+(C[M]<=g))].push(d[f])}}else for(f=0;f<p;++f)null!=(g=v[f])&&_<=g&&g<=b&&D[e0(C,g,0,x)].push(d[f]);return D}return h.value=function(d){return arguments.length?(c="function"==typeof d?d:JB(d),h):c},h.domain=function(d){return arguments.length?(a="function"==typeof d?d:JB([d[0],d[1]]),h):a},h.thresholds=function(d){return arguments.length?(l="function"==typeof d?d:JB(Array.isArray(d)?LHe.call(d):d),h):l},h}function wx(c,a){let l;if(void 0===a)for(const h of c)null!=h&&(l<h||void 0===l&&h>=h)&&(l=h);else{let h=-1;for(let d of c)null!=(d=a(d,++h,c))&&(l<d||void 0===l&&d>=d)&&(l=d)}return l}function n8(c,a){let l,h=-1,d=-1;if(void 0===a)for(const f of c)++d,null!=f&&(l<f||void 0===l&&f>=f)&&(l=f,h=d);else for(let f of c)null!=(f=a(f,++d,c))&&(l<f||void 0===l&&f>=f)&&(l=f,h=d);return h}function Wk(c,a){let l;if(void 0===a)for(const h of c)null!=h&&(l>h||void 0===l&&h>=h)&&(l=h);else{let h=-1;for(let d of c)null!=(d=a(d,++h,c))&&(l>d||void 0===l&&d>=d)&&(l=d)}return l}function i8(c,a){let l,h=-1,d=-1;if(void 0===a)for(const f of c)++d,null!=f&&(l>f||void 0===l&&f>=f)&&(l=f,h=d);else for(let f of c)null!=(f=a(f,++d,c))&&(l>f||void 0===l&&f>=f)&&(l=f,h=d);return h}function Gk(c,a,l=0,h=1/0,d){if(a=Math.floor(a),l=Math.floor(Math.max(0,l)),h=Math.floor(Math.min(c.length-1,h)),!(l<=a&&a<=h))return c;for(d=void 0===d?D_:KB(d);h>l;){if(h-l>600){const m=h-l+1,v=a-l+1,y=Math.log(m),_=.5*Math.exp(2*y/3),b=.5*Math.sqrt(y*_*(m-_)/m)*(v-m/2<0?-1:1);Gk(c,a,Math.max(l,Math.floor(a-v*_/m+b)),Math.min(h,Math.floor(a+(m-v)*_/m+b)),d)}const f=c[a];let p=l,g=h;for(Ox(c,l,a),d(c[h],f)>0&&Ox(c,l,h);p<g;){for(Ox(c,p,g),++p,--g;d(c[p],f)<0;)++p;for(;d(c[g],f)>0;)--g}0===d(c[l],f)?Ox(c,l,g):(++g,Ox(c,g,h)),g<=a&&(l=g+1),a<=g&&(h=g-1)}return c}function Ox(c,a,l){const h=c[a];c[a]=c[l],c[l]=h}function Wse(c,a=Ps){let l,h=!1;if(1===a.length){let d;for(const f of c){const p=a(f);(h?Ps(p,d)>0:0===Ps(p,p))&&(l=f,d=p,h=!0)}}else for(const d of c)(h?a(d,l)>0:0===a(d,d))&&(l=d,h=!0);return l}function Dx(c,a,l){if((h=(c=Float64Array.from(Ose(c,l))).length)&&!isNaN(a=+a)){if(a<=0||h<2)return Wk(c);if(a>=1)return wx(c);var h,d=(h-1)*a,f=Math.floor(d),p=wx(Gk(c,f).subarray(0,f+1));return p+(Wk(c.subarray(f+1))-p)*(d-f)}}function Gse(c,a,l=wse){if((h=c.length)&&!isNaN(a=+a)){if(a<=0||h<2)return+l(c[0],0,c);if(a>=1)return+l(c[h-1],h-1,c);var h,d=(h-1)*a,f=Math.floor(d),p=+l(c[f],f,c);return p+(+l(c[f+1],f+1,c)-p)*(d-f)}}function Qse(c,a,l){if((h=(c=Float64Array.from(Ose(c,l))).length)&&!isNaN(a=+a)){if(a<=0||h<2)return i8(c);if(a>=1)return n8(c);var h,d=Math.floor((h-1)*a);return Wse(Gk(Uint32Array.from(c,(g,m)=>m),d,0,h-1,(g,m)=>D_(c[g],c[m])).subarray(0,d+1),g=>c[g])}}function UHe(c,a,l){return Math.ceil((l-a)/(2*(Dx(c,.75)-Dx(c,.25))*Math.pow(zk(c),-1/3)))}function zHe(c,a,l){return Math.ceil((l-a)*Math.cbrt(zk(c))/(3.49*Ase(c)))}function HHe(c,a){let l=0,h=0;if(void 0===a)for(let d of c)null!=d&&(d=+d)>=d&&(++l,h+=d);else{let d=-1;for(let f of c)null!=(f=a(f,++d,c))&&(f=+f)>=f&&(++l,h+=f)}if(l)return h/l}function $He(c,a){return Dx(c,.5,a)}function WHe(c,a){return Qse(c,.5,a)}function r8(c){return Array.from(function*GHe(c){for(const a of c)yield*a}(c))}function QHe(c,a){const l=new xx;if(void 0===a)for(let f of c)null!=f&&f>=f&&l.set(f,(l.get(f)||0)+1);else{let f=-1;for(let p of c)null!=(p=a(p,++f,c))&&p>=p&&l.set(p,(l.get(p)||0)+1)}let h,d=0;for(const[f,p]of l)p>d&&(d=p,h=f);return h}function jHe(c,a=ZHe){const l=[];let h,d=!1;for(const f of c)d&&l.push(a(h,f)),h=f,d=!0;return l}function ZHe(c,a){return[c,a]}function yu(c,a,l){c=+c,a=+a,l=(d=arguments.length)<2?(a=c,c=0,1):d<3?1:+l;for(var h=-1,d=0|Math.max(0,Math.ceil((a-c)/l)),f=new Array(d);++h<d;)f[h]=c+h*l;return f}function qHe(c,a=Ps){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");let l=Array.from(c);const h=new Float64Array(l.length);2!==a.length&&(l=l.map(a),a=Ps);const d=(g,m)=>a(l[g],l[m]);let f,p;return Uint32Array.from(l,(g,m)=>m).sort(a===Ps?(g,m)=>D_(l[g],l[m]):KB(d)).forEach((g,m)=>{const v=d(g,void 0===f?g:f);v>=0?((void 0===f||v>0)&&(f=g,p=m),h[g]=p):h[g]=NaN}),h}function XHe(c,a=Ps){let l,h=!1;if(1===a.length){let d;for(const f of c){const p=a(f);(h?Ps(p,d)<0:0===Ps(p,p))&&(l=f,d=p,h=!0)}}else for(const d of c)(h?a(d,l)<0:0===a(d,d))&&(l=d,h=!0);return l}function jse(c,a=Ps){if(1===a.length)return i8(c,a);let l,h=-1,d=-1;for(const f of c)++d,(h<0?0===a(f,f):a(f,l)<0)&&(l=f,h=d);return h}function YHe(c,a=Ps){if(1===a.length)return n8(c,a);let l,h=-1,d=-1;for(const f of c)++d,(h<0?0===a(f,f):a(f,l)>0)&&(l=f,h=d);return h}function KHe(c,a){const l=jse(c,a);return l<0?void 0:l}const Zse=qse(Math.random);function qse(c){return function(l,h=0,d=l.length){let f=d-(h=+h);for(;f;){const p=c()*f--|0,g=l[f+h];l[f+h]=l[p+h],l[p+h]=g}return l}}function JHe(c,a){let l=0;if(void 0===a)for(let h of c)(h=+h)&&(l+=h);else{let h=-1;for(let d of c)(d=+a(d,++h,c))&&(l+=d)}return l}function Xse(c){if(!(f=c.length))return[];for(var a=-1,l=Wk(c,e$e),h=new Array(l);++a<l;)for(var f,d=-1,p=h[a]=new Array(f);++d<f;)p[d]=c[d][a];return h}function e$e(c){return c.length}function Yse(){return Xse(arguments)}function t$e(c,a){if("function"!=typeof a)throw new TypeError("test is not a function");let l=-1;for(const h of c)if(!a(h,++l,c))return!1;return!0}function n$e(c,a){if("function"!=typeof a)throw new TypeError("test is not a function");let l=-1;for(const h of c)if(a(h,++l,c))return!0;return!1}function i$e(c,a){if("function"!=typeof a)throw new TypeError("test is not a function");const l=[];let h=-1;for(const d of c)a(d,++h,c)&&l.push(d);return l}function r$e(c,a){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof a)throw new TypeError("mapper is not a function");return Array.from(c,(l,h)=>a(l,h,c))}function s$e(c,a,l){if("function"!=typeof a)throw new TypeError("reducer is not a function");const h=c[Symbol.iterator]();let d,f,p=-1;if(arguments.length<3){if(({done:d,value:l}=h.next()),d)return;++p}for(;({done:d,value:f}=h.next()),!d;)l=a(l,f,++p,c);return l}function o$e(c){if("function"!=typeof c[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(c).reverse()}function a$e(c,...a){c=new n0(c);for(const l of a)for(const h of l)c.delete(h);return c}function l$e(c,a){const l=a[Symbol.iterator](),h=new n0;for(const d of c){if(h.has(d))return!1;let f,p;for(;({value:f,done:p}=l.next())&&!p;){if(Object.is(d,f))return!1;h.add(f)}}return!0}function c$e(c,...a){c=new n0(c),a=a.map(u$e);e:for(const l of c)for(const h of a)if(!h.has(l)){c.delete(l);continue e}return c}function u$e(c){return c instanceof n0?c:new n0(c)}function Kse(c,a){const l=c[Symbol.iterator](),h=new Set;for(const d of a){const f=Jse(d);if(h.has(f))continue;let p,g;for(;({value:p,done:g}=l.next());){if(g)return!1;const m=Jse(p);if(h.add(m),Object.is(f,m))break}}return!0}function Jse(c){return null!==c&&"object"==typeof c?c.valueOf():c}function h$e(c,a){return Kse(a,c)}function d$e(...c){const a=new n0;for(const l of c)for(const h of l)a.add(h);return a}function f$e(c){return c}function p$e(c){return"translate("+c+",0)"}function g$e(c){return"translate(0,"+c+")"}function m$e(c){return a=>+c(a)}function v$e(c,a){return a=Math.max(0,c.bandwidth()-2*a)/2,c.round()&&(a=Math.round(a)),l=>+c(l)+a}function y$e(){return!this.__axis}function Zk(c,a){var l=[],h=null,d=null,f=6,p=6,g=3,m=typeof window<"u"&&window.devicePixelRatio>1?0:.5,v=1===c||4===c?-1:1,y=4===c||2===c?"x":"y",_=1===c||3===c?p$e:g$e;function b(C){var x=h??(a.ticks?a.ticks.apply(a,l):a.domain()),w=d??(a.tickFormat?a.tickFormat.apply(a,l):f$e),O=Math.max(f,0)+g,D=a.range(),T=+D[0]+m,M=+D[D.length-1]+m,k=(a.bandwidth?v$e:m$e)(a.copy(),m),E=C.selection?C.selection():C,P=E.selectAll(".domain").data([null]),V=E.selectAll(".tick").data(x,a).order(),I=V.exit(),U=V.enter().append("g").attr("class","tick"),$=V.select("line"),H=V.select("text");P=P.merge(P.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),V=V.merge(U),$=$.merge(U.append("line").attr("stroke","currentColor").attr(y+"2",v*f)),H=H.merge(U.append("text").attr("fill","currentColor").attr(y,v*O).attr("dy",1===c?"0em":3===c?"0.71em":"0.32em")),C!==E&&(P=P.transition(C),V=V.transition(C),$=$.transition(C),H=H.transition(C),I=I.transition(C).attr("opacity",1e-6).attr("transform",function(J){return isFinite(J=k(J))?_(J+m):this.getAttribute("transform")}),U.attr("opacity",1e-6).attr("transform",function(J){var ee=this.parentNode.__axis;return _((ee&&isFinite(ee=ee(J))?ee:k(J))+m)})),I.remove(),P.attr("d",4===c||2===c?p?"M"+v*p+","+T+"H"+m+"V"+M+"H"+v*p:"M"+m+","+T+"V"+M:p?"M"+T+","+v*p+"V"+m+"H"+M+"V"+v*p:"M"+T+","+m+"H"+M),V.attr("opacity",1).attr("transform",function(J){return _(k(J)+m)}),$.attr(y+"2",v*f),H.attr(y,v*O).text(w),E.filter(y$e).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===c?"start":4===c?"end":"middle"),E.each(function(){this.__axis=k})}return b.scale=function(C){return arguments.length?(a=C,b):a},b.ticks=function(){return l=Array.from(arguments),b},b.tickArguments=function(C){return arguments.length?(l=null==C?[]:Array.from(C),b):l.slice()},b.tickValues=function(C){return arguments.length?(h=null==C?null:Array.from(C),b):h&&h.slice()},b.tickFormat=function(C){return arguments.length?(d=C,b):d},b.tickSize=function(C){return arguments.length?(f=p=+C,b):f},b.tickSizeInner=function(C){return arguments.length?(f=+C,b):f},b.tickSizeOuter=function(C){return arguments.length?(p=+C,b):p},b.tickPadding=function(C){return arguments.length?(g=+C,b):g},b.offset=function(C){return arguments.length?(m=+C,b):m},b}function _$e(c){return Zk(1,c)}function b$e(c){return Zk(2,c)}function C$e(c){return Zk(3,c)}function S$e(c){return Zk(4,c)}var x$e={value:()=>{}};function toe(){for(var h,c=0,a=arguments.length,l={};c<a;++c){if(!(h=arguments[c]+"")||h in l||/[\s.]/.test(h))throw new Error("illegal type: "+h);l[h]=[]}return new qk(l)}function qk(c){this._=c}function w$e(c,a){return c.trim().split(/^|\s+/).map(function(l){var h="",d=l.indexOf(".");if(d>=0&&(h=l.slice(d+1),l=l.slice(0,d)),l&&!a.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:h}})}function O$e(c,a){for(var d,l=0,h=c.length;l<h;++l)if((d=c[l]).name===a)return d.value}function noe(c,a,l){for(var h=0,d=c.length;h<d;++h)if(c[h].name===a){c[h]=x$e,c=c.slice(0,h).concat(c.slice(h+1));break}return null!=l&&c.push({name:a,value:l}),c}qk.prototype=toe.prototype={constructor:qk,on:function(c,a){var d,l=this._,h=w$e(c+"",l),f=-1,p=h.length;if(!(arguments.length<2)){if(null!=a&&"function"!=typeof a)throw new Error("invalid callback: "+a);for(;++f<p;)if(d=(c=h[f]).type)l[d]=noe(l[d],c.name,a);else if(null==a)for(d in l)l[d]=noe(l[d],c.name,null);return this}for(;++f<p;)if((d=(c=h[f]).type)&&(d=O$e(l[d],c.name)))return d},copy:function(){var c={},a=this._;for(var l in a)c[l]=a[l].slice();return new qk(c)},call:function(c,a){if((d=arguments.length-2)>0)for(var d,f,l=new Array(d),h=0;h<d;++h)l[h]=arguments[h+2];if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(h=0,d=(f=this._[c]).length;h<d;++h)f[h].value.apply(a,l)},apply:function(c,a,l){if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(var h=this._[c],d=0,f=h.length;d<f;++d)h[d].value.apply(a,l)}};const T_=toe;function D$e(){}function Xk(c){return null==c?D$e:function(){return this.querySelector(c)}}function ioe(c){return null==c?[]:Array.isArray(c)?c:Array.from(c)}function k$e(){return[]}function o8(c){return null==c?k$e:function(){return this.querySelectorAll(c)}}function a8(c){return function(){return this.matches(c)}}function roe(c){return function(a){return a.matches(c)}}var A$e=Array.prototype.find;function P$e(){return this.firstElementChild}var F$e=Array.prototype.filter;function L$e(){return Array.from(this.children)}function soe(c){return new Array(c.length)}function Yk(c,a){this.ownerDocument=c.ownerDocument,this.namespaceURI=c.namespaceURI,this._next=null,this._parent=c,this.__data__=a}function z$e(c){return function(){return c}}function H$e(c,a,l,h,d,f){for(var g,p=0,m=a.length,v=f.length;p<v;++p)(g=a[p])?(g.__data__=f[p],h[p]=g):l[p]=new Yk(c,f[p]);for(;p<m;++p)(g=a[p])&&(d[p]=g)}function $$e(c,a,l,h,d,f,p){var g,m,C,v=new Map,y=a.length,_=f.length,b=new Array(y);for(g=0;g<y;++g)(m=a[g])&&(b[g]=C=p.call(m,m.__data__,g,a)+"",v.has(C)?d[g]=m:v.set(C,m));for(g=0;g<_;++g)C=p.call(c,f[g],g,f)+"",(m=v.get(C))?(h[g]=m,m.__data__=f[g],v.delete(C)):l[g]=new Yk(c,f[g]);for(g=0;g<y;++g)(m=a[g])&&v.get(b[g])===m&&(d[g]=m)}function W$e(c){return c.__data__}function Q$e(c){return"object"==typeof c&&"length"in c?c:Array.from(c)}function K$e(c,a){return c<a?-1:c>a?1:c>=a?0:NaN}Yk.prototype={constructor:Yk,appendChild:function(c){return this._parent.insertBefore(c,this._next)},insertBefore:function(c,a){return this._parent.insertBefore(c,a)},querySelector:function(c){return this._parent.querySelector(c)},querySelectorAll:function(c){return this._parent.querySelectorAll(c)}};var l8="http://www.w3.org/1999/xhtml";const c8={svg:"http://www.w3.org/2000/svg",xhtml:l8,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kx(c){var a=c+="",l=a.indexOf(":");return l>=0&&"xmlns"!==(a=c.slice(0,l))&&(c=c.slice(l+1)),c8.hasOwnProperty(a)?{space:c8[a],local:c}:c}function s9e(c){return function(){this.removeAttribute(c)}}function o9e(c){return function(){this.removeAttributeNS(c.space,c.local)}}function a9e(c,a){return function(){this.setAttribute(c,a)}}function l9e(c,a){return function(){this.setAttributeNS(c.space,c.local,a)}}function c9e(c,a){return function(){var l=a.apply(this,arguments);null==l?this.removeAttribute(c):this.setAttribute(c,l)}}function u9e(c,a){return function(){var l=a.apply(this,arguments);null==l?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,l)}}function u8(c){return c.ownerDocument&&c.ownerDocument.defaultView||c.document&&c||c.defaultView}function d9e(c){return function(){this.style.removeProperty(c)}}function f9e(c,a,l){return function(){this.style.setProperty(c,a,l)}}function p9e(c,a,l){return function(){var h=a.apply(this,arguments);null==h?this.style.removeProperty(c):this.style.setProperty(c,h,l)}}function o0(c,a){return c.style.getPropertyValue(a)||u8(c).getComputedStyle(c,null).getPropertyValue(a)}function m9e(c){return function(){delete this[c]}}function v9e(c,a){return function(){this[c]=a}}function y9e(c,a){return function(){var l=a.apply(this,arguments);null==l?delete this[c]:this[c]=l}}function ooe(c){return c.trim().split(/^|\s+/)}function h8(c){return c.classList||new aoe(c)}function aoe(c){this._node=c,this._names=ooe(c.getAttribute("class")||"")}function loe(c,a){for(var l=h8(c),h=-1,d=a.length;++h<d;)l.add(a[h])}function coe(c,a){for(var l=h8(c),h=-1,d=a.length;++h<d;)l.remove(a[h])}function b9e(c){return function(){loe(this,c)}}function C9e(c){return function(){coe(this,c)}}function S9e(c,a){return function(){(a.apply(this,arguments)?loe:coe)(this,c)}}function w9e(){this.textContent=""}function O9e(c){return function(){this.textContent=c}}function D9e(c){return function(){var a=c.apply(this,arguments);this.textContent=a??""}}function k9e(){this.innerHTML=""}function M9e(c){return function(){this.innerHTML=c}}function E9e(c){return function(){var a=c.apply(this,arguments);this.innerHTML=a??""}}function I9e(){this.nextSibling&&this.parentNode.appendChild(this)}function R9e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function L9e(c){return function(){var a=this.ownerDocument,l=this.namespaceURI;return l===l8&&a.documentElement.namespaceURI===l8?a.createElement(c):a.createElementNS(l,c)}}function N9e(c){return function(){return this.ownerDocument.createElementNS(c.space,c.local)}}function Kk(c){var a=kx(c);return(a.local?N9e:L9e)(a)}function V9e(){return null}function z9e(){var c=this.parentNode;c&&c.removeChild(this)}function $9e(){var c=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(c,this.nextSibling):c}function W9e(){var c=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(c,this.nextSibling):c}function Z9e(c){return c.trim().split(/^|\s+/).map(function(a){var l="",h=a.indexOf(".");return h>=0&&(l=a.slice(h+1),a=a.slice(0,h)),{type:a,name:l}})}function q9e(c){return function(){var a=this.__on;if(a){for(var f,l=0,h=-1,d=a.length;l<d;++l)f=a[l],c.type&&f.type!==c.type||f.name!==c.name?a[++h]=f:this.removeEventListener(f.type,f.listener,f.options);++h?a.length=h:delete this.__on}}}function X9e(c,a,l){return function(){var d,h=this.__on,f=function j9e(c){return function(a){c.call(this,a,this.__data__)}}(a);if(h)for(var p=0,g=h.length;p<g;++p)if((d=h[p]).type===c.type&&d.name===c.name)return this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=l),void(d.value=a);this.addEventListener(c.type,f,l),d={type:c.type,name:c.name,value:a,listener:f,options:l},h?h.push(d):this.__on=[d]}}function uoe(c,a,l){var h=u8(c),d=h.CustomEvent;"function"==typeof d?d=new d(a,l):(d=h.document.createEvent("Event"),l?(d.initEvent(a,l.bubbles,l.cancelable),d.detail=l.detail):d.initEvent(a,!1,!1)),c.dispatchEvent(d)}function K9e(c,a){return function(){return uoe(this,c,a)}}function J9e(c,a){return function(){return uoe(this,c,a.apply(this,arguments))}}aoe.prototype={add:function(c){this._names.indexOf(c)<0&&(this._names.push(c),this._node.setAttribute("class",this._names.join(" ")))},remove:function(c){var a=this._names.indexOf(c);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(c){return this._names.indexOf(c)>=0}};var d8=[null];function cl(c,a){this._groups=c,this._parents=a}function hoe(){return new cl([[document.documentElement]],d8)}cl.prototype=hoe.prototype={constructor:cl,select:function T$e(c){"function"!=typeof c&&(c=Xk(c));for(var a=this._groups,l=a.length,h=new Array(l),d=0;d<l;++d)for(var m,v,f=a[d],p=f.length,g=h[d]=new Array(p),y=0;y<p;++y)(m=f[y])&&(v=c.call(m,m.__data__,y,f))&&("__data__"in m&&(v.__data__=m.__data__),g[y]=v);return new cl(h,this._parents)},selectAll:function E$e(c){c="function"==typeof c?function M$e(c){return function(){return ioe(c.apply(this,arguments))}}(c):o8(c);for(var a=this._groups,l=a.length,h=[],d=[],f=0;f<l;++f)for(var m,p=a[f],g=p.length,v=0;v<g;++v)(m=p[v])&&(h.push(c.call(m,m.__data__,v,p)),d.push(m));return new cl(h,d)},selectChild:function R$e(c){return this.select(null==c?P$e:function I$e(c){return function(){return A$e.call(this.children,c)}}("function"==typeof c?c:roe(c)))},selectChildren:function B$e(c){return this.selectAll(null==c?L$e:function N$e(c){return function(){return F$e.call(this.children,c)}}("function"==typeof c?c:roe(c)))},filter:function V$e(c){"function"!=typeof c&&(c=a8(c));for(var a=this._groups,l=a.length,h=new Array(l),d=0;d<l;++d)for(var m,f=a[d],p=f.length,g=h[d]=[],v=0;v<p;++v)(m=f[v])&&c.call(m,m.__data__,v,f)&&g.push(m);return new cl(h,this._parents)},data:function G$e(c,a){if(!arguments.length)return Array.from(this,W$e);var l=a?$$e:H$e,h=this._parents,d=this._groups;"function"!=typeof c&&(c=z$e(c));for(var f=d.length,p=new Array(f),g=new Array(f),m=new Array(f),v=0;v<f;++v){var y=h[v],_=d[v],b=_.length,C=Q$e(c.call(y,y&&y.__data__,v,h)),x=C.length,w=g[v]=new Array(x),O=p[v]=new Array(x),D=m[v]=new Array(b);l(y,_,w,O,D,C,a);for(var k,E,T=0,M=0;T<x;++T)if(k=w[T]){for(T>=M&&(M=T+1);!(E=O[M])&&++M<x;);k._next=E||null}}return(p=new cl(p,h))._enter=g,p._exit=m,p},enter:function U$e(){return new cl(this._enter||this._groups.map(soe),this._parents)},exit:function j$e(){return new cl(this._exit||this._groups.map(soe),this._parents)},join:function Z$e(c,a,l){var h=this.enter(),d=this,f=this.exit();return"function"==typeof c?(h=c(h))&&(h=h.selection()):h=h.append(c+""),null!=a&&(d=a(d))&&(d=d.selection()),null==l?f.remove():l(f),h&&d?h.merge(d).order():d},merge:function q$e(c){for(var a=c.selection?c.selection():c,l=this._groups,h=a._groups,d=l.length,p=Math.min(d,h.length),g=new Array(d),m=0;m<p;++m)for(var C,v=l[m],y=h[m],_=v.length,b=g[m]=new Array(_),x=0;x<_;++x)(C=v[x]||y[x])&&(b[x]=C);for(;m<d;++m)g[m]=l[m];return new cl(g,this._parents)},selection:function nWe(){return this},order:function X$e(){for(var c=this._groups,a=-1,l=c.length;++a<l;)for(var p,h=c[a],d=h.length-1,f=h[d];--d>=0;)(p=h[d])&&(f&&4^p.compareDocumentPosition(f)&&f.parentNode.insertBefore(p,f),f=p);return this},sort:function Y$e(c){function a(_,b){return _&&b?c(_.__data__,b.__data__):!_-!b}c||(c=K$e);for(var l=this._groups,h=l.length,d=new Array(h),f=0;f<h;++f){for(var v,p=l[f],g=p.length,m=d[f]=new Array(g),y=0;y<g;++y)(v=p[y])&&(m[y]=v);m.sort(a)}return new cl(d,this._parents).order()},call:function J$e(){var c=arguments[0];return arguments[0]=this,c.apply(null,arguments),this},nodes:function e9e(){return Array.from(this)},node:function t9e(){for(var c=this._groups,a=0,l=c.length;a<l;++a)for(var h=c[a],d=0,f=h.length;d<f;++d){var p=h[d];if(p)return p}return null},size:function n9e(){let c=0;for(const a of this)++c;return c},empty:function i9e(){return!this.node()},each:function r9e(c){for(var a=this._groups,l=0,h=a.length;l<h;++l)for(var g,d=a[l],f=0,p=d.length;f<p;++f)(g=d[f])&&c.call(g,g.__data__,f,d);return this},attr:function h9e(c,a){var l=kx(c);if(arguments.length<2){var h=this.node();return l.local?h.getAttributeNS(l.space,l.local):h.getAttribute(l)}return this.each((null==a?l.local?o9e:s9e:"function"==typeof a?l.local?u9e:c9e:l.local?l9e:a9e)(l,a))},style:function g9e(c,a,l){return arguments.length>1?this.each((null==a?d9e:"function"==typeof a?p9e:f9e)(c,a,l??"")):o0(this.node(),c)},property:function _9e(c,a){return arguments.length>1?this.each((null==a?m9e:"function"==typeof a?y9e:v9e)(c,a)):this.node()[c]},classed:function x9e(c,a){var l=ooe(c+"");if(arguments.length<2){for(var h=h8(this.node()),d=-1,f=l.length;++d<f;)if(!h.contains(l[d]))return!1;return!0}return this.each(("function"==typeof a?S9e:a?b9e:C9e)(l,a))},text:function T9e(c){return arguments.length?this.each(null==c?w9e:("function"==typeof c?D9e:O9e)(c)):this.node().textContent},html:function A9e(c){return arguments.length?this.each(null==c?k9e:("function"==typeof c?E9e:M9e)(c)):this.node().innerHTML},raise:function P9e(){return this.each(I9e)},lower:function F9e(){return this.each(R9e)},append:function B9e(c){var a="function"==typeof c?c:Kk(c);return this.select(function(){return this.appendChild(a.apply(this,arguments))})},insert:function U9e(c,a){var l="function"==typeof c?c:Kk(c),h=null==a?V9e:"function"==typeof a?a:Xk(a);return this.select(function(){return this.insertBefore(l.apply(this,arguments),h.apply(this,arguments)||null)})},remove:function H9e(){return this.each(z9e)},clone:function G9e(c){return this.select(c?W9e:$9e)},datum:function Q9e(c){return arguments.length?this.property("__data__",c):this.node().__data__},on:function Y9e(c,a,l){var d,p,h=Z9e(c+""),f=h.length;if(!(arguments.length<2)){for(g=a?X9e:q9e,d=0;d<f;++d)this.each(g(h[d],a,l));return this}var g=this.node().__on;if(g)for(var y,m=0,v=g.length;m<v;++m)for(d=0,y=g[m];d<f;++d)if((p=h[d]).type===y.type&&p.name===y.name)return y.value},dispatch:function eWe(c,a){return this.each(("function"==typeof a?J9e:K9e)(c,a))},[Symbol.iterator]:function*tWe(){for(var c=this._groups,a=0,l=c.length;a<l;++a)for(var p,h=c[a],d=0,f=h.length;d<f;++d)(p=h[d])&&(yield p)}};const k_=hoe;function yo(c){return"string"==typeof c?new cl([[document.querySelector(c)]],[document.documentElement]):new cl([[c]],d8)}const iWe={passive:!1},Mx={capture:!0,passive:!1};function f8(c){c.stopImmediatePropagation()}function M_(c){c.preventDefault(),c.stopImmediatePropagation()}function Jk(c){var a=c.document.documentElement,l=yo(c).on("dragstart.drag",M_,Mx);"onselectstart"in a?l.on("selectstart.drag",M_,Mx):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function eM(c,a){var l=c.document.documentElement,h=yo(c).on("dragstart.drag",null);a&&(h.on("click.drag",M_,Mx),setTimeout(function(){h.on("click.drag",null)},0)),"onselectstart"in l?h.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}function E_(c,a,l){c.prototype=a.prototype=l,l.constructor=c}function Ex(c,a){var l=Object.create(c.prototype);for(var h in a)l[h]=a[h];return l}function Jp(){}var A_=1/.7,I_="\\s*([+-]?\\d+)\\s*",Ax="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rWe=/^#([0-9a-f]{3,8})$/,sWe=new RegExp(`^rgb\\(${I_},${I_},${I_}\\)$`),oWe=new RegExp(`^rgb\\(${vd},${vd},${vd}\\)$`),aWe=new RegExp(`^rgba\\(${I_},${I_},${I_},${Ax}\\)$`),lWe=new RegExp(`^rgba\\(${vd},${vd},${vd},${Ax}\\)$`),cWe=new RegExp(`^hsl\\(${Ax},${vd},${vd}\\)$`),uWe=new RegExp(`^hsla\\(${Ax},${vd},${vd},${Ax}\\)$`),doe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function foe(){return this.rgb().formatHex()}function poe(){return this.rgb().formatRgb()}function dh(c){var a,l;return c=(c+"").trim().toLowerCase(),(a=rWe.exec(c))?(l=a[1].length,a=parseInt(a[1],16),6===l?goe(a):3===l?new ta(a>>8&15|a>>4&240,a>>4&15|240&a,(15&a)<<4|15&a,1):8===l?tM(a>>24&255,a>>16&255,a>>8&255,(255&a)/255):4===l?tM(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|240&a,((15&a)<<4|15&a)/255):null):(a=sWe.exec(c))?new ta(a[1],a[2],a[3],1):(a=oWe.exec(c))?new ta(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=aWe.exec(c))?tM(a[1],a[2],a[3],a[4]):(a=lWe.exec(c))?tM(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=cWe.exec(c))?yoe(a[1],a[2]/100,a[3]/100,1):(a=uWe.exec(c))?yoe(a[1],a[2]/100,a[3]/100,a[4]):doe.hasOwnProperty(c)?goe(doe[c]):"transparent"===c?new ta(NaN,NaN,NaN,0):null}function goe(c){return new ta(c>>16&255,c>>8&255,255&c,1)}function tM(c,a,l,h){return h<=0&&(c=a=l=NaN),new ta(c,a,l,h)}function p8(c){return c instanceof Jp||(c=dh(c)),c?new ta((c=c.rgb()).r,c.g,c.b,c.opacity):new ta}function Wf(c,a,l,h){return 1===arguments.length?p8(c):new ta(c,a,l,h??1)}function ta(c,a,l,h){this.r=+c,this.g=+a,this.b=+l,this.opacity=+h}function moe(){return`#${c0(this.r)}${c0(this.g)}${c0(this.b)}`}function voe(){const c=nM(this.opacity);return`${1===c?"rgb(":"rgba("}${l0(this.r)}, ${l0(this.g)}, ${l0(this.b)}${1===c?")":`, ${c})`}`}function nM(c){return isNaN(c)?1:Math.max(0,Math.min(1,c))}function l0(c){return Math.max(0,Math.min(255,Math.round(c)||0))}function c0(c){return((c=l0(c))<16?"0":"")+c.toString(16)}function yoe(c,a,l,h){return h<=0?c=a=l=NaN:l<=0||l>=1?c=a=NaN:a<=0&&(c=NaN),new fh(c,a,l,h)}function _oe(c){if(c instanceof fh)return new fh(c.h,c.s,c.l,c.opacity);if(c instanceof Jp||(c=dh(c)),!c)return new fh;if(c instanceof fh)return c;var a=(c=c.rgb()).r/255,l=c.g/255,h=c.b/255,d=Math.min(a,l,h),f=Math.max(a,l,h),p=NaN,g=f-d,m=(f+d)/2;return g?(p=a===f?(l-h)/g+6*(l<h):l===f?(h-a)/g+2:(a-l)/g+4,g/=m<.5?f+d:2-f-d,p*=60):g=m>0&&m<1?0:p,new fh(p,g,m,c.opacity)}function iM(c,a,l,h){return 1===arguments.length?_oe(c):new fh(c,a,l,h??1)}function fh(c,a,l,h){this.h=+c,this.s=+a,this.l=+l,this.opacity=+h}function boe(c){return(c=(c||0)%360)<0?c+360:c}function rM(c){return Math.max(0,Math.min(1,c||0))}function g8(c,a,l){return 255*(c<60?a+(l-a)*c/60:c<180?l:c<240?a+(l-a)*(240-c)/60:a)}function Coe(c,a,l,h,d){var f=c*c,p=f*c;return((1-3*c+3*f-p)*a+(4-6*f+3*p)*l+(1+3*c+3*f-3*p)*h+p*d)/6}function Soe(c){var a=c.length-1;return function(l){var h=l<=0?l=0:l>=1?(l=1,a-1):Math.floor(l*a),d=c[h],f=c[h+1];return Coe((l-h/a)*a,h>0?c[h-1]:2*d-f,d,f,h<a-1?c[h+2]:2*f-d)}}function xoe(c){var a=c.length;return function(l){var h=Math.floor(((l%=1)<0?++l:l)*a);return Coe((l-h/a)*a,c[(h+a-1)%a],c[h%a],c[(h+1)%a],c[(h+2)%a])}}E_(Jp,dh,{copy(c){return Object.assign(new this.constructor,this,c)},displayable(){return this.rgb().displayable()},hex:foe,formatHex:foe,formatHex8:function hWe(){return this.rgb().formatHex8()},formatHsl:function dWe(){return _oe(this).formatHsl()},formatRgb:poe,toString:poe}),E_(ta,Wf,Ex(Jp,{brighter(c){return c=null==c?A_:Math.pow(A_,c),new ta(this.r*c,this.g*c,this.b*c,this.opacity)},darker(c){return c=null==c?.7:Math.pow(.7,c),new ta(this.r*c,this.g*c,this.b*c,this.opacity)},rgb(){return this},clamp(){return new ta(l0(this.r),l0(this.g),l0(this.b),nM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:moe,formatHex:moe,formatHex8:function fWe(){return`#${c0(this.r)}${c0(this.g)}${c0(this.b)}${c0(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:voe,toString:voe})),E_(fh,iM,Ex(Jp,{brighter(c){return c=null==c?A_:Math.pow(A_,c),new fh(this.h,this.s,this.l*c,this.opacity)},darker(c){return c=null==c?.7:Math.pow(.7,c),new fh(this.h,this.s,this.l*c,this.opacity)},rgb(){var c=this.h%360+360*(this.h<0),a=isNaN(c)||isNaN(this.s)?0:this.s,l=this.l,h=l+(l<.5?l:1-l)*a,d=2*l-h;return new ta(g8(c>=240?c-240:c+120,d,h),g8(c,d,h),g8(c<120?c+240:c-120,d,h),this.opacity)},clamp(){return new fh(boe(this.h),rM(this.s),rM(this.l),nM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const c=nM(this.opacity);return`${1===c?"hsl(":"hsla("}${boe(this.h)}, ${100*rM(this.s)}%, ${100*rM(this.l)}%${1===c?")":`, ${c})`}`}}));const sM=c=>()=>c;function woe(c,a){return function(l){return c+l*a}}function oM(c,a){var l=a-c;return l?woe(c,l>180||l<-180?l-360*Math.round(l/360):l):sM(isNaN(c)?a:c)}function na(c,a){var l=a-c;return l?woe(c,l):sM(isNaN(c)?a:c)}const Ix=function c(a){var l=function gWe(c){return 1==(c=+c)?na:function(a,l){return l-a?function pWe(c,a,l){return c=Math.pow(c,l),a=Math.pow(a,l)-c,l=1/l,function(h){return Math.pow(c+h*a,l)}}(a,l,c):sM(isNaN(a)?l:a)}}(a);function h(d,f){var p=l((d=Wf(d)).r,(f=Wf(f)).r),g=l(d.g,f.g),m=l(d.b,f.b),v=na(d.opacity,f.opacity);return function(y){return d.r=p(y),d.g=g(y),d.b=m(y),d.opacity=v(y),d+""}}return h.gamma=c,h}(1);function Ooe(c){return function(a){var p,g,l=a.length,h=new Array(l),d=new Array(l),f=new Array(l);for(p=0;p<l;++p)g=Wf(a[p]),h[p]=g.r||0,d[p]=g.g||0,f[p]=g.b||0;return h=c(h),d=c(d),f=c(f),g.opacity=1,function(m){return g.r=h(m),g.g=d(m),g.b=f(m),g+""}}}var Doe=Ooe(Soe),mWe=Ooe(xoe);function m8(c,a){a||(a=[]);var d,l=c?Math.min(a.length,c.length):0,h=a.slice();return function(f){for(d=0;d<l;++d)h[d]=c[d]*(1-f)+a[d]*f;return h}}function Toe(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}function vWe(c,a){return(Toe(a)?m8:koe)(c,a)}function koe(c,a){var p,l=a?a.length:0,h=c?Math.min(l,c.length):0,d=new Array(h),f=new Array(l);for(p=0;p<h;++p)d[p]=eg(c[p],a[p]);for(;p<l;++p)f[p]=a[p];return function(g){for(p=0;p<h;++p)f[p]=d[p](g);return f}}function Moe(c,a){var l=new Date;return c=+c,a=+a,function(h){return l.setTime(c*(1-h)+a*h),l}}function _u(c,a){return c=+c,a=+a,function(l){return c*(1-l)+a*l}}function Eoe(c,a){var d,l={},h={};for(d in(null===c||"object"!=typeof c)&&(c={}),(null===a||"object"!=typeof a)&&(a={}),a)d in c?l[d]=eg(c[d],a[d]):h[d]=a[d];return function(f){for(d in l)h[d]=l[d](f);return h}}var v8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,y8=new RegExp(v8.source,"g");function _8(c,a){var h,d,f,l=v8.lastIndex=y8.lastIndex=0,p=-1,g=[],m=[];for(c+="",a+="";(h=v8.exec(c))&&(d=y8.exec(a));)(f=d.index)>l&&(f=a.slice(l,f),g[p]?g[p]+=f:g[++p]=f),(h=h[0])===(d=d[0])?g[p]?g[p]+=d:g[++p]=d:(g[++p]=null,m.push({i:p,x:_u(h,d)})),l=y8.lastIndex;return l<a.length&&(f=a.slice(l),g[p]?g[p]+=f:g[++p]=f),g.length<2?m[0]?function _We(c){return function(a){return c(a)+""}}(m[0].x):function yWe(c){return function(){return c}}(a):(a=m.length,function(v){for(var _,y=0;y<a;++y)g[(_=m[y]).i]=_.x(v);return g.join("")})}function eg(c,a){var h,l=typeof a;return null==a||"boolean"===l?sM(a):("number"===l?_u:"string"===l?(h=dh(a))?(a=h,Ix):_8:a instanceof dh?Ix:a instanceof Date?Moe:Toe(a)?m8:Array.isArray(a)?koe:"function"!=typeof a.valueOf&&"function"!=typeof a.toString||isNaN(a)?Eoe:_u)(c,a)}function Aoe(c){let a;for(;a=c.sourceEvent;)c=a;return c}function Oc(c,a){if(c=Aoe(c),void 0===a&&(a=c.currentTarget),a){var l=a.ownerSVGElement||a;if(l.createSVGPoint){var h=l.createSVGPoint();return h.x=c.clientX,h.y=c.clientY,[(h=h.matrixTransform(a.getScreenCTM().inverse())).x,h.y]}if(a.getBoundingClientRect){var d=a.getBoundingClientRect();return[c.clientX-d.left-a.clientLeft,c.clientY-d.top-a.clientTop]}}return[c.pageX,c.pageY]}var aM,Fx,P_=0,Px=0,Rx=0,lM=0,u0=0,cM=0,Lx="object"==typeof performance&&performance.now?performance:Date,Poe="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(c){setTimeout(c,17)};function Nx(){return u0||(Poe(bWe),u0=Lx.now()+cM)}function bWe(){u0=0}function Bx(){this._call=this._time=this._next=null}function uM(c,a,l){var h=new Bx;return h.restart(c,a,l),h}function Roe(){Nx(),++P_;for(var a,c=aM;c;)(a=u0-c._time)>=0&&c._call.call(void 0,a),c=c._next;--P_}function Foe(){u0=(lM=Lx.now())+cM,P_=Px=0;try{Roe()}finally{P_=0,function SWe(){for(var c,l,a=aM,h=1/0;a;)a._call?(h>a._time&&(h=a._time),c=a,a=a._next):(l=a._next,a._next=null,a=c?c._next=l:aM=l);Fx=c,b8(h)}(),u0=0}}function CWe(){var c=Lx.now(),a=c-lM;a>1e3&&(cM-=a,lM=c)}function b8(c){P_||(Px&&(Px=clearTimeout(Px)),c-u0>24?(c<1/0&&(Px=setTimeout(Foe,c-Lx.now()-cM)),Rx&&(Rx=clearInterval(Rx))):(Rx||(lM=Lx.now(),Rx=setInterval(CWe,1e3)),P_=1,Poe(Foe)))}function C8(c,a,l){var h=new Bx;return h.restart(d=>{h.stop(),c(d+a)},a=null==a?0:+a,l),h}Bx.prototype=uM.prototype={constructor:Bx,restart:function(c,a,l){if("function"!=typeof c)throw new TypeError("callback is not a function");l=(null==l?Nx():+l)+(null==a?0:+a),!this._next&&Fx!==this&&(Fx?Fx._next=this:aM=this,Fx=this),this._call=c,this._time=l,b8()},stop:function(){this._call&&(this._call=null,this._time=1/0,b8())}};var xWe=T_("start","end","cancel","interrupt"),wWe=[];function fM(c,a,l,h,d,f){var p=c.__transition;if(p){if(l in p)return}else c.__transition={};!function OWe(c,a,l){var d,h=c.__transition;function p(v){var y,_,b,C;if(1!==l.state)return m();for(y in h)if((C=h[y]).name===l.name){if(3===C.state)return C8(p);4===C.state?(C.state=6,C.timer.stop(),C.on.call("interrupt",c,c.__data__,C.index,C.group),delete h[y]):+y<a&&(C.state=6,C.timer.stop(),C.on.call("cancel",c,c.__data__,C.index,C.group),delete h[y])}if(C8(function(){3===l.state&&(l.state=4,l.timer.restart(g,l.delay,l.time),g(v))}),l.state=2,l.on.call("start",c,c.__data__,l.index,l.group),2===l.state){for(l.state=3,d=new Array(b=l.tween.length),y=0,_=-1;y<b;++y)(C=l.tween[y].value.call(c,c.__data__,l.index,l.group))&&(d[++_]=C);d.length=_+1}}function g(v){for(var y=v<l.duration?l.ease.call(null,v/l.duration):(l.timer.restart(m),l.state=5,1),_=-1,b=d.length;++_<b;)d[_].call(c,y);5===l.state&&(l.on.call("end",c,c.__data__,l.index,l.group),m())}function m(){for(var v in l.state=6,l.timer.stop(),delete h[a],h)return;delete c.__transition}h[a]=l,l.timer=uM(function f(v){l.state=1,l.timer.restart(p,l.delay,l.time),l.delay<=v&&p(v-l.delay)},0,l.time)}(c,l,{name:a,index:h,group:d,on:xWe,tween:wWe,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function O8(c,a){var l=ph(c,a);if(l.state>0)throw new Error("too late; already scheduled");return l}function yd(c,a){var l=ph(c,a);if(l.state>3)throw new Error("too late; already running");return l}function ph(c,a){var l=c.__transition;if(!l||!(l=l[a]))throw new Error("transition not found");return l}function h0(c,a){var h,d,p,l=c.__transition,f=!0;if(l){for(p in a=null==a?null:a+"",l)(h=l[p]).name===a?(d=h.state>2&&h.state<5,h.state=6,h.timer.stop(),h.on.call(d?"interrupt":"cancel",c,c.__data__,h.index,h.group),delete l[p]):f=!1;f&&delete c.__transition}}var pM,Boe=180/Math.PI,D8={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Voe(c,a,l,h,d,f){var p,g,m;return(p=Math.sqrt(c*c+a*a))&&(c/=p,a/=p),(m=c*l+a*h)&&(l-=c*m,h-=a*m),(g=Math.sqrt(l*l+h*h))&&(l/=g,h/=g,m/=g),c*h<a*l&&(c=-c,a=-a,m=-m,p=-p),{translateX:d,translateY:f,rotate:Math.atan2(a,c)*Boe,skewX:Math.atan(m)*Boe,scaleX:p,scaleY:g}}function Uoe(c,a,l,h){function d(v){return v.length?v.pop()+" ":""}return function(v,y){var _=[],b=[];return v=c(v),y=c(y),function f(v,y,_,b,C,x){if(v!==_||y!==b){var w=C.push("translate(",null,a,null,l);x.push({i:w-4,x:_u(v,_)},{i:w-2,x:_u(y,b)})}else(_||b)&&C.push("translate("+_+a+b+l)}(v.translateX,v.translateY,y.translateX,y.translateY,_,b),function p(v,y,_,b){v!==y?(v-y>180?y+=360:y-v>180&&(v+=360),b.push({i:_.push(d(_)+"rotate(",null,h)-2,x:_u(v,y)})):y&&_.push(d(_)+"rotate("+y+h)}(v.rotate,y.rotate,_,b),function g(v,y,_,b){v!==y?b.push({i:_.push(d(_)+"skewX(",null,h)-2,x:_u(v,y)}):y&&_.push(d(_)+"skewX("+y+h)}(v.skewX,y.skewX,_,b),function m(v,y,_,b,C,x){if(v!==_||y!==b){var w=C.push(d(C)+"scale(",null,",",null,")");x.push({i:w-4,x:_u(v,_)},{i:w-2,x:_u(y,b)})}else(1!==_||1!==b)&&C.push(d(C)+"scale("+_+","+b+")")}(v.scaleX,v.scaleY,y.scaleX,y.scaleY,_,b),v=y=null,function(C){for(var O,x=-1,w=b.length;++x<w;)_[(O=b[x]).i]=O.x(C);return _.join("")}}}var zoe=Uoe(function TWe(c){const a=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(c+"");return a.isIdentity?D8:Voe(a.a,a.b,a.c,a.d,a.e,a.f)},"px, ","px)","deg)"),Hoe=Uoe(function kWe(c){return null!=c&&(pM||(pM=document.createElementNS("http://www.w3.org/2000/svg","g")),pM.setAttribute("transform",c),c=pM.transform.baseVal.consolidate())?Voe((c=c.matrix).a,c.b,c.c,c.d,c.e,c.f):D8},", ",")",")");function MWe(c,a){var l,h;return function(){var d=yd(this,c),f=d.tween;if(f!==l)for(var p=0,g=(h=l=f).length;p<g;++p)if(h[p].name===a){(h=h.slice()).splice(p,1);break}d.tween=h}}function EWe(c,a,l){var h,d;if("function"!=typeof l)throw new Error;return function(){var f=yd(this,c),p=f.tween;if(p!==h){d=(h=p).slice();for(var g={name:a,value:l},m=0,v=d.length;m<v;++m)if(d[m].name===a){d[m]=g;break}m===v&&d.push(g)}f.tween=d}}function T8(c,a,l){var h=c._id;return c.each(function(){var d=yd(this,h);(d.value||(d.value={}))[a]=l.apply(this,arguments)}),function(d){return ph(d,h).value[a]}}function $oe(c,a){var l;return("number"==typeof a?_u:a instanceof dh?Ix:(l=dh(a))?(a=l,Ix):_8)(c,a)}function IWe(c){return function(){this.removeAttribute(c)}}function PWe(c){return function(){this.removeAttributeNS(c.space,c.local)}}function RWe(c,a,l){var h,f,d=l+"";return function(){var p=this.getAttribute(c);return p===d?null:p===h?f:f=a(h=p,l)}}function FWe(c,a,l){var h,f,d=l+"";return function(){var p=this.getAttributeNS(c.space,c.local);return p===d?null:p===h?f:f=a(h=p,l)}}function LWe(c,a,l){var h,d,f;return function(){var p,m,g=l(this);return null==g?void this.removeAttribute(c):(p=this.getAttribute(c))===(m=g+"")?null:p===h&&m===d?f:(d=m,f=a(h=p,g))}}function NWe(c,a,l){var h,d,f;return function(){var p,m,g=l(this);return null==g?void this.removeAttributeNS(c.space,c.local):(p=this.getAttributeNS(c.space,c.local))===(m=g+"")?null:p===h&&m===d?f:(d=m,f=a(h=p,g))}}function VWe(c,a){return function(l){this.setAttribute(c,a.call(this,l))}}function UWe(c,a){return function(l){this.setAttributeNS(c.space,c.local,a.call(this,l))}}function zWe(c,a){var l,h;function d(){var f=a.apply(this,arguments);return f!==h&&(l=(h=f)&&UWe(c,f)),l}return d._value=a,d}function HWe(c,a){var l,h;function d(){var f=a.apply(this,arguments);return f!==h&&(l=(h=f)&&VWe(c,f)),l}return d._value=a,d}function WWe(c,a){return function(){O8(this,c).delay=+a.apply(this,arguments)}}function GWe(c,a){return a=+a,function(){O8(this,c).delay=a}}function jWe(c,a){return function(){yd(this,c).duration=+a.apply(this,arguments)}}function ZWe(c,a){return a=+a,function(){yd(this,c).duration=a}}function XWe(c,a){if("function"!=typeof a)throw new Error;return function(){yd(this,c).ease=a}}function iGe(c,a,l){var h,d,f=function nGe(c){return(c+"").trim().split(/^|\s+/).every(function(a){var l=a.indexOf(".");return l>=0&&(a=a.slice(0,l)),!a||"start"===a})}(a)?O8:yd;return function(){var p=f(this,c),g=p.on;g!==h&&(d=(h=g).copy()).on(a,l),p.on=d}}var cGe=k_.prototype.constructor;function Woe(c){return function(){this.style.removeProperty(c)}}function mGe(c,a,l){return function(h){this.style.setProperty(c,a.call(this,h),l)}}function vGe(c,a,l){var h,d;function f(){var p=a.apply(this,arguments);return p!==d&&(h=(d=p)&&mGe(c,p,l)),h}return f._value=a,f}function SGe(c){return function(a){this.textContent=c.call(this,a)}}function xGe(c){var a,l;function h(){var d=c.apply(this,arguments);return d!==l&&(a=(l=d)&&SGe(d)),a}return h._value=c,h}var TGe=0;function _d(c,a,l,h){this._groups=c,this._parents=a,this._name=l,this._id=h}function Goe(c){return k_().transition(c)}function Qoe(){return++TGe}var Gf=k_.prototype;function kGe(c){return c*c*c}function MGe(c){return--c*c*c+1}function k8(c){return((c*=2)<=1?c*c*c:(c-=2)*c*c+2)/2}_d.prototype=Goe.prototype={constructor:_d,select:function aGe(c){var a=this._name,l=this._id;"function"!=typeof c&&(c=Xk(c));for(var h=this._groups,d=h.length,f=new Array(d),p=0;p<d;++p)for(var y,_,g=h[p],m=g.length,v=f[p]=new Array(m),b=0;b<m;++b)(y=g[b])&&(_=c.call(y,y.__data__,b,g))&&("__data__"in y&&(_.__data__=y.__data__),v[b]=_,fM(v[b],a,l,b,v,ph(y,l)));return new _d(f,this._parents,a,l)},selectAll:function lGe(c){var a=this._name,l=this._id;"function"!=typeof c&&(c=o8(c));for(var h=this._groups,d=h.length,f=[],p=[],g=0;g<d;++g)for(var y,m=h[g],v=m.length,_=0;_<v;++_)if(y=m[_]){for(var C,b=c.call(y,y.__data__,_,m),x=ph(y,l),w=0,O=b.length;w<O;++w)(C=b[w])&&fM(C,a,l,w,b,x);f.push(b),p.push(y)}return new _d(f,p,a,l)},selectChild:Gf.selectChild,selectChildren:Gf.selectChildren,filter:function eGe(c){"function"!=typeof c&&(c=a8(c));for(var a=this._groups,l=a.length,h=new Array(l),d=0;d<l;++d)for(var m,f=a[d],p=f.length,g=h[d]=[],v=0;v<p;++v)(m=f[v])&&c.call(m,m.__data__,v,f)&&g.push(m);return new _d(h,this._parents,this._name,this._id)},merge:function tGe(c){if(c._id!==this._id)throw new Error;for(var a=this._groups,l=c._groups,h=a.length,f=Math.min(h,l.length),p=new Array(h),g=0;g<f;++g)for(var b,m=a[g],v=l[g],y=m.length,_=p[g]=new Array(y),C=0;C<y;++C)(b=m[C]||v[C])&&(_[C]=b);for(;g<h;++g)p[g]=a[g];return new _d(p,this._parents,this._name,this._id)},selection:function uGe(){return new cGe(this._groups,this._parents)},transition:function OGe(){for(var c=this._name,a=this._id,l=Qoe(),h=this._groups,d=h.length,f=0;f<d;++f)for(var m,p=h[f],g=p.length,v=0;v<g;++v)if(m=p[v]){var y=ph(m,a);fM(m,c,l,v,p,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new _d(h,this._parents,c,l)},call:Gf.call,nodes:Gf.nodes,node:Gf.node,size:Gf.size,empty:Gf.empty,each:Gf.each,on:function rGe(c,a){var l=this._id;return arguments.length<2?ph(this.node(),l).on.on(c):this.each(iGe(l,c,a))},attr:function BWe(c,a){var l=kx(c),h="transform"===l?Hoe:$oe;return this.attrTween(c,"function"==typeof a?(l.local?NWe:LWe)(l,h,T8(this,"attr."+c,a)):null==a?(l.local?PWe:IWe)(l):(l.local?FWe:RWe)(l,h,a))},attrTween:function $We(c,a){var l="attr."+c;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==a)return this.tween(l,null);if("function"!=typeof a)throw new Error;var h=kx(c);return this.tween(l,(h.local?zWe:HWe)(h,a))},style:function gGe(c,a,l){var h="transform"==(c+="")?zoe:$oe;return null==a?this.styleTween(c,function hGe(c,a){var l,h,d;return function(){var f=o0(this,c),p=(this.style.removeProperty(c),o0(this,c));return f===p?null:f===l&&p===h?d:d=a(l=f,h=p)}}(c,h)).on("end.style."+c,Woe(c)):"function"==typeof a?this.styleTween(c,function fGe(c,a,l){var h,d,f;return function(){var p=o0(this,c),g=l(this),m=g+"";return null==g&&(this.style.removeProperty(c),m=g=o0(this,c)),p===m?null:p===h&&m===d?f:(d=m,f=a(h=p,g))}}(c,h,T8(this,"style."+c,a))).each(function pGe(c,a){var l,h,d,g,f="style."+a,p="end."+f;return function(){var m=yd(this,c),v=m.on,y=null==m.value[f]?g||(g=Woe(a)):void 0;(v!==l||d!==y)&&(h=(l=v).copy()).on(p,d=y),m.on=h}}(this._id,c)):this.styleTween(c,function dGe(c,a,l){var h,f,d=l+"";return function(){var p=o0(this,c);return p===d?null:p===h?f:f=a(h=p,l)}}(c,h,a),l).on("end.style."+c,null)},styleTween:function yGe(c,a,l){var h="style."+(c+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==a)return this.tween(h,null);if("function"!=typeof a)throw new Error;return this.tween(h,vGe(c,a,l??""))},text:function CGe(c){return this.tween("text","function"==typeof c?function bGe(c){return function(){var a=c(this);this.textContent=a??""}}(T8(this,"text",c)):function _Ge(c){return function(){this.textContent=c}}(null==c?"":c+""))},textTween:function wGe(c){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(null==c)return this.tween(a,null);if("function"!=typeof c)throw new Error;return this.tween(a,xGe(c))},remove:function oGe(){return this.on("end.remove",function sGe(c){return function(){var a=this.parentNode;for(var l in this.__transition)if(+l!==c)return;a&&a.removeChild(this)}}(this._id))},tween:function AWe(c,a){var l=this._id;if(c+="",arguments.length<2){for(var p,h=ph(this.node(),l).tween,d=0,f=h.length;d<f;++d)if((p=h[d]).name===c)return p.value;return null}return this.each((null==a?MWe:EWe)(l,c,a))},delay:function QWe(c){var a=this._id;return arguments.length?this.each(("function"==typeof c?WWe:GWe)(a,c)):ph(this.node(),a).delay},duration:function qWe(c){var a=this._id;return arguments.length?this.each(("function"==typeof c?jWe:ZWe)(a,c)):ph(this.node(),a).duration},ease:function YWe(c){var a=this._id;return arguments.length?this.each(XWe(a,c)):ph(this.node(),a).ease},easeVarying:function JWe(c){if("function"!=typeof c)throw new Error;return this.each(function KWe(c,a){return function(){var l=a.apply(this,arguments);if("function"!=typeof l)throw new Error;yd(this,c).ease=l}}(this._id,c))},end:function DGe(){var c,a,l=this,h=l._id,d=l.size();return new Promise(function(f,p){var g={value:p},m={value:function(){0==--d&&f()}};l.each(function(){var v=yd(this,h),y=v.on;y!==c&&((a=(c=y).copy())._.cancel.push(g),a._.interrupt.push(g),a._.end.push(m)),v.on=a}),0===d&&f()})},[Symbol.iterator]:Gf[Symbol.iterator]};var EGe={time:null,delay:0,duration:250,ease:k8};function AGe(c,a){for(var l;!(l=c.__transition)||!(l=l[a]);)if(!(c=c.parentNode))throw new Error(`transition ${a} not found`);return l}k_.prototype.interrupt=function DWe(c){return this.each(function(){h0(this,c)})},k_.prototype.transition=function IGe(c){var a,l;c instanceof _d?(a=c._id,c=c._name):(a=Qoe(),(l=EGe).time=Nx(),c=null==c?null:c+"");for(var h=this._groups,d=h.length,f=0;f<d;++f)for(var m,p=h[f],g=p.length,v=0;v<g;++v)(m=p[v])&&fM(m,c,a,v,p,l||AGe(m,a));return new _d(h,this._parents,c,a)};var PGe=[null];function RGe(c,a){var h,d,l=c.__transition;if(l)for(d in a=null==a?null:a+"",l)if((h=l[d]).state>1&&h.name===a)return new _d([[c]],PGe,a,+d);return null}const M8=c=>()=>c;function FGe(c,{sourceEvent:a,target:l,selection:h,mode:d,dispatch:f}){Object.defineProperties(this,{type:{value:c,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},selection:{value:h,enumerable:!0,configurable:!0},mode:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}function LGe(c){c.stopImmediatePropagation()}function E8(c){c.preventDefault(),c.stopImmediatePropagation()}var joe={name:"drag"},A8={name:"space"},R_={name:"handle"},F_={name:"center"};const{abs:Zoe,max:La,min:Na}=Math;function qoe(c){return[+c[0],+c[1]]}function I8(c){return[qoe(c[0]),qoe(c[1])]}var gM={name:"x",handles:["w","e"].map(Vx),input:function(c,a){return null==c?null:[[+c[0],a[0][1]],[+c[1],a[1][1]]]},output:function(c){return c&&[c[0][0],c[1][0]]}},mM={name:"y",handles:["n","s"].map(Vx),input:function(c,a){return null==c?null:[[a[0][0],+c[0]],[a[1][0],+c[1]]]},output:function(c){return c&&[c[0][1],c[1][1]]}},NGe={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Vx),input:function(c){return null==c?null:I8(c)},output:function(c){return c}},Qf={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xoe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Yoe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},BGe={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},VGe={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Vx(c){return{type:c}}function UGe(c){return!c.ctrlKey&&!c.button}function zGe(){var c=this.ownerSVGElement||this;return c.hasAttribute("viewBox")?[[(c=c.viewBox.baseVal).x,c.y],[c.x+c.width,c.y+c.height]]:[[0,0],[c.width.baseVal.value,c.height.baseVal.value]]}function HGe(){return navigator.maxTouchPoints||"ontouchstart"in this}function P8(c){for(;!c.__brush;)if(!(c=c.parentNode))return;return c.__brush}function $Ge(c){return c[0][0]===c[1][0]||c[0][1]===c[1][1]}function WGe(c){var a=c.__brush;return a?a.dim.output(a.selection):null}function GGe(){return R8(gM)}function QGe(){return R8(mM)}function jGe(){return R8(NGe)}function R8(c){var g,a=zGe,l=UGe,h=HGe,d=!0,f=T_("start","brush","end"),p=6;function m(O){var D=O.property("__brush",w).selectAll(".overlay").data([Vx("overlay")]);D.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Qf.overlay).merge(D).each(function(){var M=P8(this).extent;yo(this).attr("x",M[0][0]).attr("y",M[0][1]).attr("width",M[1][0]-M[0][0]).attr("height",M[1][1]-M[0][1])}),O.selectAll(".selection").data([Vx("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Qf.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var T=O.selectAll(".handle").data(c.handles,function(M){return M.type});T.exit().remove(),T.enter().append("rect").attr("class",function(M){return"handle handle--"+M.type}).attr("cursor",function(M){return Qf[M.type]}),O.each(v).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",b).filter(h).on("touchstart.brush",b).on("touchmove.brush",C).on("touchend.brush touchcancel.brush",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(){var O=yo(this),D=P8(this).selection;D?(O.selectAll(".selection").style("display",null).attr("x",D[0][0]).attr("y",D[0][1]).attr("width",D[1][0]-D[0][0]).attr("height",D[1][1]-D[0][1]),O.selectAll(".handle").style("display",null).attr("x",function(T){return"e"===T.type[T.type.length-1]?D[1][0]-p/2:D[0][0]-p/2}).attr("y",function(T){return"s"===T.type[0]?D[1][1]-p/2:D[0][1]-p/2}).attr("width",function(T){return"n"===T.type||"s"===T.type?D[1][0]-D[0][0]+p:p}).attr("height",function(T){return"e"===T.type||"w"===T.type?D[1][1]-D[0][1]+p:p})):O.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function y(O,D,T){var M=O.__brush.emitter;return!M||T&&M.clean?new _(O,D,T):M}function _(O,D,T){this.that=O,this.args=D,this.state=O.__brush,this.active=0,this.clean=T}function b(O){if((!g||O.touches)&&l.apply(this,arguments)){var $,H,ee,B,W,j,X,Y,fe,De,we,D=this,T=O.target.__data__.type,M="selection"===(d&&O.metaKey?T="overlay":T)?joe:d&&O.altKey?F_:R_,k=c===mM?null:BGe[T],E=c===gM?null:VGe[T],P=P8(D),V=P.extent,I=P.selection,U=V[0][0],J=V[0][1],G=V[1][0],Q=V[1][1],ne=0,re=0,de=k&&E&&d&&O.shiftKey,Fe=Array.from(O.touches||[O],Ie=>{const et=Ie.identifier;return(Ie=Oc(Ie,D)).point0=Ie.slice(),Ie.identifier=et,Ie});h0(D);var qe=y(D,arguments,!0).beforestart();if("overlay"===T){I&&(fe=!0);const Ie=[Fe[0],Fe[1]||Fe[0]];P.selection=I=[[$=c===mM?U:Na(Ie[0][0],Ie[1][0]),ee=c===gM?J:Na(Ie[0][1],Ie[1][1])],[W=c===mM?G:La(Ie[0][0],Ie[1][0]),X=c===gM?Q:La(Ie[0][1],Ie[1][1])]],Fe.length>1&&Ue(O)}else $=I[0][0],ee=I[0][1],W=I[1][0],X=I[1][1];H=$,B=ee,j=W,Y=X;var Le=yo(D).attr("pointer-events","none"),ze=Le.selectAll(".overlay").attr("cursor",Qf[T]);if(O.touches)qe.moved=ve,qe.ended=st;else{var it=yo(O.view).on("mousemove.brush",ve,!0).on("mouseup.brush",st,!0);d&&it.on("keydown.brush",dt,!0).on("keyup.brush",tt,!0),Jk(O.view)}v.call(D),qe.start(O,M.name)}function ve(Ie){for(const et of Ie.changedTouches||[Ie])for(const Gt of Fe)Gt.identifier===et.identifier&&(Gt.cur=Oc(et,D));if(de&&!De&&!we&&1===Fe.length){const et=Fe[0];Zoe(et.cur[0]-et[0])>Zoe(et.cur[1]-et[1])?we=!0:De=!0}for(const et of Fe)et.cur&&(et[0]=et.cur[0],et[1]=et.cur[1]);fe=!0,E8(Ie),Ue(Ie)}function Ue(Ie){const et=Fe[0],Gt=et.point0;var Tn;switch(ne=et[0]-Gt[0],re=et[1]-Gt[1],M){case A8:case joe:k&&(ne=La(U-$,Na(G-W,ne)),H=$+ne,j=W+ne),E&&(re=La(J-ee,Na(Q-X,re)),B=ee+re,Y=X+re);break;case R_:Fe[1]?(k&&(H=La(U,Na(G,Fe[0][0])),j=La(U,Na(G,Fe[1][0])),k=1),E&&(B=La(J,Na(Q,Fe[0][1])),Y=La(J,Na(Q,Fe[1][1])),E=1)):(k<0?(ne=La(U-$,Na(G-$,ne)),H=$+ne,j=W):k>0&&(ne=La(U-W,Na(G-W,ne)),H=$,j=W+ne),E<0?(re=La(J-ee,Na(Q-ee,re)),B=ee+re,Y=X):E>0&&(re=La(J-X,Na(Q-X,re)),B=ee,Y=X+re));break;case F_:k&&(H=La(U,Na(G,$-ne*k)),j=La(U,Na(G,W+ne*k))),E&&(B=La(J,Na(Q,ee-re*E)),Y=La(J,Na(Q,X+re*E)))}j<H&&(k*=-1,Tn=$,$=W,W=Tn,Tn=H,H=j,j=Tn,T in Xoe&&ze.attr("cursor",Qf[T=Xoe[T]])),Y<B&&(E*=-1,Tn=ee,ee=X,X=Tn,Tn=B,B=Y,Y=Tn,T in Yoe&&ze.attr("cursor",Qf[T=Yoe[T]])),P.selection&&(I=P.selection),De&&(H=I[0][0],j=I[1][0]),we&&(B=I[0][1],Y=I[1][1]),(I[0][0]!==H||I[0][1]!==B||I[1][0]!==j||I[1][1]!==Y)&&(P.selection=[[H,B],[j,Y]],v.call(D),qe.brush(Ie,M.name))}function st(Ie){if(LGe(Ie),Ie.touches){if(Ie.touches.length)return;g&&clearTimeout(g),g=setTimeout(function(){g=null},500)}else eM(Ie.view,fe),it.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Le.attr("pointer-events","all"),ze.attr("cursor",Qf.overlay),P.selection&&(I=P.selection),$Ge(I)&&(P.selection=null,v.call(D)),qe.end(Ie,M.name)}function dt(Ie){switch(Ie.keyCode){case 16:de=k&&E;break;case 18:M===R_&&(k&&(W=j-ne*k,$=H+ne*k),E&&(X=Y-re*E,ee=B+re*E),M=F_,Ue(Ie));break;case 32:(M===R_||M===F_)&&(k<0?W=j-ne:k>0&&($=H-ne),E<0?X=Y-re:E>0&&(ee=B-re),M=A8,ze.attr("cursor",Qf.selection),Ue(Ie));break;default:return}E8(Ie)}function tt(Ie){switch(Ie.keyCode){case 16:de&&(De=we=de=!1,Ue(Ie));break;case 18:M===F_&&(k<0?W=j:k>0&&($=H),E<0?X=Y:E>0&&(ee=B),M=R_,Ue(Ie));break;case 32:M===A8&&(Ie.altKey?(k&&(W=j-ne*k,$=H+ne*k),E&&(X=Y-re*E,ee=B+re*E),M=F_):(k<0?W=j:k>0&&($=H),E<0?X=Y:E>0&&(ee=B),M=R_),ze.attr("cursor",Qf[T]),Ue(Ie));break;default:return}E8(Ie)}}function C(O){y(this,arguments).moved(O)}function x(O){y(this,arguments).ended(O)}function w(){var O=this.__brush||{selection:null};return O.extent=I8(a.apply(this,arguments)),O.dim=c,O}return m.move=function(O,D,T){O.tween?O.on("start.brush",function(M){y(this,arguments).beforestart().start(M)}).on("interrupt.brush end.brush",function(M){y(this,arguments).end(M)}).tween("brush",function(){var M=this,k=M.__brush,E=y(M,arguments),P=k.selection,V=c.input("function"==typeof D?D.apply(this,arguments):D,k.extent),I=eg(P,V);function U($){k.selection=1===$&&null===V?null:I($),v.call(M),E.brush()}return null!==P&&null!==V?U:U(1)}):O.each(function(){var M=this,k=arguments,E=M.__brush,P=c.input("function"==typeof D?D.apply(M,k):D,E.extent),V=y(M,k).beforestart();h0(M),E.selection=null===P?null:P,v.call(M),V.start(T).brush(T).end(T)})},m.clear=function(O,D){m.move(O,null,D)},_.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(O,D){return this.starting?(this.starting=!1,this.emit("start",O,D)):this.emit("brush",O),this},brush:function(O,D){return this.emit("brush",O,D),this},end:function(O,D){return 0==--this.active&&(delete this.state.emitter,this.emit("end",O,D)),this},emit:function(O,D,T){var M=yo(this.that).datum();f.call(O,this.that,new FGe(O,{sourceEvent:D,target:m,selection:c.output(this.state.selection),mode:T,dispatch:f}),M)}},m.extent=function(O){return arguments.length?(a="function"==typeof O?O:M8(I8(O)),m):a},m.filter=function(O){return arguments.length?(l="function"==typeof O?O:M8(!!O),m):l},m.touchable=function(O){return arguments.length?(h="function"==typeof O?O:M8(!!O),m):h},m.handleSize=function(O){return arguments.length?(p=+O,m):p},m.keyModifiers=function(O){return arguments.length?(d=!!O,m):d},m.on=function(){var O=f.on.apply(f,arguments);return O===f?m:O},m}var Koe=Math.abs,L_=Math.cos,N_=Math.sin,Joe=Math.PI,vM=Joe/2,eae=2*Joe,tae=Math.max,F8=1e-12;function L8(c,a){return Array.from({length:a-c},(l,h)=>c+h)}function ZGe(c){return function(a,l){return c(a.source.value+a.target.value,l.source.value+l.target.value)}}function qGe(){return N8(!1,!1)}function XGe(){return N8(!1,!0)}function YGe(){return N8(!0,!1)}function N8(c,a){var l=0,h=null,d=null,f=null;function p(g){var x,m=g.length,v=new Array(m),y=L8(0,m),_=new Array(m*m),b=new Array(m),C=0;g=Float64Array.from({length:m*m},a?(w,O)=>g[O%m][O/m|0]:(w,O)=>g[O/m|0][O%m]);for(let w=0;w<m;++w){let O=0;for(let D=0;D<m;++D)O+=g[w*m+D]+c*g[D*m+w];C+=v[w]=O}x=(C=tae(0,eae-l*m)/C)?l:eae/m;{let w=0;h&&y.sort((O,D)=>h(v[O],v[D]));for(const O of y){const D=w;if(c){const T=L8(1+~m,m).filter(M=>M<0?g[~M*m+O]:g[O*m+M]);d&&T.sort((M,k)=>d(M<0?-g[~M*m+O]:g[O*m+M],k<0?-g[~k*m+O]:g[O*m+k]));for(const M of T)M<0?(_[~M*m+O]||(_[~M*m+O]={source:null,target:null})).target={index:O,startAngle:w,endAngle:w+=g[~M*m+O]*C,value:g[~M*m+O]}:(_[O*m+M]||(_[O*m+M]={source:null,target:null})).source={index:O,startAngle:w,endAngle:w+=g[O*m+M]*C,value:g[O*m+M]};b[O]={index:O,startAngle:D,endAngle:w,value:v[O]}}else{const T=L8(0,m).filter(M=>g[O*m+M]||g[M*m+O]);d&&T.sort((M,k)=>d(g[O*m+M],g[O*m+k]));for(const M of T){let k;if(O<M?(k=_[O*m+M]||(_[O*m+M]={source:null,target:null}),k.source={index:O,startAngle:w,endAngle:w+=g[O*m+M]*C,value:g[O*m+M]}):(k=_[M*m+O]||(_[M*m+O]={source:null,target:null}),k.target={index:O,startAngle:w,endAngle:w+=g[O*m+M]*C,value:g[O*m+M]},O===M&&(k.source=k.target)),k.source&&k.target&&k.source.value<k.target.value){const E=k.source;k.source=k.target,k.target=E}}b[O]={index:O,startAngle:D,endAngle:w,value:v[O]}}w+=x}}return(_=Object.values(_)).groups=b,f?_.sort(f):_}return p.padAngle=function(g){return arguments.length?(l=tae(0,g),p):l},p.sortGroups=function(g){return arguments.length?(h=g,p):h},p.sortSubgroups=function(g){return arguments.length?(d=g,p):d},p.sortChords=function(g){return arguments.length?(null==g?f=null:(f=ZGe(g))._=g,p):f&&f._},p}const B8=Math.PI,V8=2*B8,d0=1e-6,KGe=V8-d0;function nae(c){this._+=c[0];for(let a=1,l=c.length;a<l;++a)this._+=arguments[a]+c[a]}class Ux{constructor(a){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==a?nae:function JGe(c){let a=Math.floor(c);if(!(a>=0))throw new Error(`invalid digits: ${c}`);if(a>15)return nae;const l=10**a;return function(h){this._+=h[0];for(let d=1,f=h.length;d<f;++d)this._+=Math.round(arguments[d]*l)/l+h[d]}}(a)}moveTo(a,l){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(a,l){this._append`L${this._x1=+a},${this._y1=+l}`}quadraticCurveTo(a,l,h,d){this._append`Q${+a},${+l},${this._x1=+h},${this._y1=+d}`}bezierCurveTo(a,l,h,d,f,p){this._append`C${+a},${+l},${+h},${+d},${this._x1=+f},${this._y1=+p}`}arcTo(a,l,h,d,f){if(a=+a,l=+l,h=+h,d=+d,(f=+f)<0)throw new Error(`negative radius: ${f}`);let p=this._x1,g=this._y1,m=h-a,v=d-l,y=p-a,_=g-l,b=y*y+_*_;if(null===this._x1)this._append`M${this._x1=a},${this._y1=l}`;else if(b>d0)if(Math.abs(_*m-v*y)>d0&&f){let C=h-p,x=d-g,w=m*m+v*v,O=C*C+x*x,D=Math.sqrt(w),T=Math.sqrt(b),M=f*Math.tan((B8-Math.acos((w+b-O)/(2*D*T)))/2),k=M/T,E=M/D;Math.abs(k-1)>d0&&this._append`L${a+k*y},${l+k*_}`,this._append`A${f},${f},0,0,${+(_*C>y*x)},${this._x1=a+E*m},${this._y1=l+E*v}`}else this._append`L${this._x1=a},${this._y1=l}`}arc(a,l,h,d,f,p){if(a=+a,l=+l,p=!!p,(h=+h)<0)throw new Error(`negative radius: ${h}`);let g=h*Math.cos(d),m=h*Math.sin(d),v=a+g,y=l+m,_=1^p,b=p?d-f:f-d;null===this._x1?this._append`M${v},${y}`:(Math.abs(this._x1-v)>d0||Math.abs(this._y1-y)>d0)&&this._append`L${v},${y}`,h&&(b<0&&(b=b%V8+V8),b>KGe?this._append`A${h},${h},0,1,${_},${a-g},${l-m}A${h},${h},0,1,${_},${this._x1=v},${this._y1=y}`:b>d0&&this._append`A${h},${h},0,${+(b>=B8)},${_},${this._x1=a+h*Math.cos(f)},${this._y1=l+h*Math.sin(f)}`)}rect(a,l,h,d){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+l}h${h=+h}v${+d}h${-h}Z`}toString(){return this._}}function zx(){return new Ux}function eQe(c=3){return new Ux(+c)}zx.prototype=Ux.prototype;var tQe=Array.prototype.slice;function f0(c){return function(){return c}}function nQe(c){return c.source}function iQe(c){return c.target}function iae(c){return c.radius}function rQe(c){return c.startAngle}function sQe(c){return c.endAngle}function oQe(){return 0}function aQe(){return 10}function rae(c){var a=nQe,l=iQe,h=iae,d=iae,f=rQe,p=sQe,g=oQe,m=null;function v(){var y,_=a.apply(this,arguments),b=l.apply(this,arguments),C=g.apply(this,arguments)/2,x=tQe.call(arguments),w=+h.apply(this,(x[0]=_,x)),O=f.apply(this,x)-vM,D=p.apply(this,x)-vM,T=+d.apply(this,(x[0]=b,x)),M=f.apply(this,x)-vM,k=p.apply(this,x)-vM;if(m||(m=y=zx()),C>F8&&(Koe(D-O)>2*C+F8?D>O?(O+=C,D-=C):(O-=C,D+=C):O=D=(O+D)/2,Koe(k-M)>2*C+F8?k>M?(M+=C,k-=C):(M-=C,k+=C):M=k=(M+k)/2),m.moveTo(w*L_(O),w*N_(O)),m.arc(0,0,w,O,D),O!==M||D!==k)if(c){var E=+c.apply(this,arguments),P=T-E,V=(M+k)/2;m.quadraticCurveTo(0,0,P*L_(M),P*N_(M)),m.lineTo(T*L_(V),T*N_(V)),m.lineTo(P*L_(k),P*N_(k))}else m.quadraticCurveTo(0,0,T*L_(M),T*N_(M)),m.arc(0,0,T,M,k);if(m.quadraticCurveTo(0,0,w*L_(O),w*N_(O)),m.closePath(),y)return m=null,y+""||null}return c&&(v.headRadius=function(y){return arguments.length?(c="function"==typeof y?y:f0(+y),v):c}),v.radius=function(y){return arguments.length?(h=d="function"==typeof y?y:f0(+y),v):h},v.sourceRadius=function(y){return arguments.length?(h="function"==typeof y?y:f0(+y),v):h},v.targetRadius=function(y){return arguments.length?(d="function"==typeof y?y:f0(+y),v):d},v.startAngle=function(y){return arguments.length?(f="function"==typeof y?y:f0(+y),v):f},v.endAngle=function(y){return arguments.length?(p="function"==typeof y?y:f0(+y),v):p},v.padAngle=function(y){return arguments.length?(g="function"==typeof y?y:f0(+y),v):g},v.source=function(y){return arguments.length?(a=y,v):a},v.target=function(y){return arguments.length?(l=y,v):l},v.context=function(y){return arguments.length?(m=y??null,v):m},v}function U8(){return rae()}function lQe(){return rae(aQe)}const sae=Math.PI/180,oae=180/Math.PI,uae=4/29,B_=6/29,hae=3*B_*B_;function dae(c){if(c instanceof gh)return new gh(c.l,c.a,c.b,c.opacity);if(c instanceof bd)return pae(c);c instanceof ta||(c=p8(c));var f,p,a=W8(c.r),l=W8(c.g),h=W8(c.b),d=z8((.2225045*a+.7168786*l+.0606169*h)/1);return a===l&&l===h?f=p=d:(f=z8((.4360747*a+.3850649*l+.1430804*h)/.96422),p=z8((.0139322*a+.0971045*l+.7141733*h)/.82521)),new gh(116*d-16,500*(f-d),200*(d-p),c.opacity)}function uQe(c,a){return new gh(c,0,0,a??1)}function _M(c,a,l,h){return 1===arguments.length?dae(c):new gh(c,a,l,h??1)}function gh(c,a,l,h){this.l=+c,this.a=+a,this.b=+l,this.opacity=+h}function z8(c){return c>.008856451679035631?Math.pow(c,1/3):c/hae+uae}function H8(c){return c>B_?c*c*c:hae*(c-uae)}function $8(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function W8(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function fae(c){if(c instanceof bd)return new bd(c.h,c.c,c.l,c.opacity);if(c instanceof gh||(c=dae(c)),0===c.a&&0===c.b)return new bd(NaN,0<c.l&&c.l<100?0:NaN,c.l,c.opacity);var a=Math.atan2(c.b,c.a)*oae;return new bd(a<0?a+360:a,Math.sqrt(c.a*c.a+c.b*c.b),c.l,c.opacity)}function hQe(c,a,l,h){return 1===arguments.length?fae(c):new bd(l,a,c,h??1)}function bM(c,a,l,h){return 1===arguments.length?fae(c):new bd(c,a,l,h??1)}function bd(c,a,l,h){this.h=+c,this.c=+a,this.l=+l,this.opacity=+h}function pae(c){if(isNaN(c.h))return new gh(c.l,0,0,c.opacity);var a=c.h*sae;return new gh(c.l,Math.cos(a)*c.c,Math.sin(a)*c.c,c.opacity)}E_(gh,_M,Ex(Jp,{brighter(c){return new gh(this.l+18*(c??1),this.a,this.b,this.opacity)},darker(c){return new gh(this.l-18*(c??1),this.a,this.b,this.opacity)},rgb(){var c=(this.l+16)/116,a=isNaN(this.a)?c:c+this.a/500,l=isNaN(this.b)?c:c-this.b/200;return new ta($8(3.1338561*(a=.96422*H8(a))-1.6168667*(c=1*H8(c))-.4906146*(l=.82521*H8(l))),$8(-.9787684*a+1.9161415*c+.033454*l),$8(.0719453*a-.2289914*c+1.4052427*l),this.opacity)}})),E_(bd,bM,Ex(Jp,{brighter(c){return new bd(this.h,this.c,this.l+18*(c??1),this.opacity)},darker(c){return new bd(this.h,this.c,this.l-18*(c??1),this.opacity)},rgb(){return pae(this).rgb()}}));var G8=1.78277,Q8=-.29227,CM=-.90649,Hx=1.97294,mae=Hx*CM,vae=Hx*G8,yae=G8*Q8- -.14861*CM;function dQe(c){if(c instanceof p0)return new p0(c.h,c.s,c.l,c.opacity);c instanceof ta||(c=p8(c));var l=c.g/255,h=c.b/255,d=(yae*h+mae*(c.r/255)-vae*l)/(yae+mae-vae),f=h-d,p=(Hx*(l-d)-Q8*f)/CM,g=Math.sqrt(p*p+f*f)/(Hx*d*(1-d)),m=g?Math.atan2(p,f)*oae-120:NaN;return new p0(m<0?m+360:m,g,d,c.opacity)}function mh(c,a,l,h){return 1===arguments.length?dQe(c):new p0(c,a,l,h??1)}function p0(c,a,l,h){this.h=+c,this.s=+a,this.l=+l,this.opacity=+h}E_(p0,mh,Ex(Jp,{brighter(c){return c=null==c?A_:Math.pow(A_,c),new p0(this.h,this.s,this.l*c,this.opacity)},darker(c){return c=null==c?.7:Math.pow(.7,c),new p0(this.h,this.s,this.l*c,this.opacity)},rgb(){var c=isNaN(this.h)?0:(this.h+120)*sae,a=+this.l,l=isNaN(this.s)?0:this.s*a*(1-a),h=Math.cos(c),d=Math.sin(c);return new ta(255*(a+l*(-.14861*h+G8*d)),255*(a+l*(Q8*h+CM*d)),255*(a+l*(Hx*h)),this.opacity)}}));var _ae=Array.prototype.slice;function pQe(c,a){return c-a}const tg=c=>()=>c;function mQe(c,a){for(var d,l=-1,h=a.length;++l<h;)if(d=vQe(c,a[l]))return d;return 0}function vQe(c,a){for(var l=a[0],h=a[1],d=-1,f=0,p=c.length,g=p-1;f<p;g=f++){var m=c[f],v=m[0],y=m[1],_=c[g],b=_[0],C=_[1];if(yQe(m,_,a))return 0;y>h!=C>h&&l<(b-v)*(h-y)/(C-y)+v&&(d=-d)}return d}function yQe(c,a,l){var h;return function _Qe(c,a,l){return(a[0]-c[0])*(l[1]-c[1])==(l[0]-c[0])*(a[1]-c[1])}(c,a,l)&&function bQe(c,a,l){return c<=a&&a<=l||l<=a&&a<=c}(c[h=+(c[0]===a[0])],l[h],a[h])}function CQe(){}var jf=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function j8(){var c=1,a=1,l=t8,h=m;function d(v){var y=l(v);if(Array.isArray(y))y=y.slice().sort(pQe);else{const _=t0(v,SQe);for(y=r0(...e8(_[0],_[1],y),y);y[y.length-1]>=_[1];)y.pop();for(;y[1]<_[0];)y.shift()}return y.map(_=>f(v,_))}function f(v,y){const _=null==y?NaN:+y;if(isNaN(_))throw new Error(`invalid value: ${y}`);var b=[],C=[];return function p(v,y,_){var x,w,O,D,T,M,b=new Array,C=new Array;for(x=w=-1,D=g0(v[0],y),jf[D<<1].forEach(k);++x<c-1;)O=D,D=g0(v[x+1],y),jf[O|D<<1].forEach(k);for(jf[D<<0].forEach(k);++w<a-1;){for(x=-1,D=g0(v[w*c+c],y),T=g0(v[w*c],y),jf[D<<1|T<<2].forEach(k);++x<c-1;)O=D,D=g0(v[w*c+c+x+1],y),M=T,T=g0(v[w*c+x+1],y),jf[O|D<<1|T<<2|M<<3].forEach(k);jf[D|T<<3].forEach(k)}for(x=-1,jf[(T=v[w*c]>=y)<<2].forEach(k);++x<c-1;)M=T,T=g0(v[w*c+x+1],y),jf[T<<2|M<<3].forEach(k);function k(E){var $,H,P=[E[0][0]+x,E[0][1]+w],V=[E[1][0]+x,E[1][1]+w],I=g(P),U=g(V);($=C[I])?(H=b[U])?(delete C[$.end],delete b[H.start],$===H?($.ring.push(V),_($.ring)):b[$.start]=C[H.end]={start:$.start,end:H.end,ring:$.ring.concat(H.ring)}):(delete C[$.end],$.ring.push(V),C[$.end=U]=$):($=b[U])?(H=C[I])?(delete b[$.start],delete C[H.end],$===H?($.ring.push(V),_($.ring)):b[H.start]=C[$.end]={start:H.start,end:$.end,ring:H.ring.concat($.ring)}):(delete b[$.start],$.ring.unshift(P),b[$.start=I]=$):b[I]=C[U]={start:I,end:U,ring:[P,V]}}jf[T<<3].forEach(k)}(v,_,function(x){h(x,v,_),function gQe(c){for(var a=0,l=c.length,h=c[l-1][1]*c[0][0]-c[l-1][0]*c[0][1];++a<l;)h+=c[a-1][1]*c[a][0]-c[a-1][0]*c[a][1];return h}(x)>0?b.push([x]):C.push(x)}),C.forEach(function(x){for(var D,w=0,O=b.length;w<O;++w)if(-1!==mQe((D=b[w])[0],x))return void D.push(x)}),{type:"MultiPolygon",value:y,coordinates:b}}function g(v){return 2*v[0]+v[1]*(c+1)*4}function m(v,y,_){v.forEach(function(b){var C=b[0],x=b[1],w=0|C,O=0|x,D=Z8(y[O*c+w]);C>0&&C<c&&w===C&&(b[0]=bae(C,Z8(y[O*c+w-1]),D,_)),x>0&&x<a&&O===x&&(b[1]=bae(x,Z8(y[(O-1)*c+w]),D,_))})}return d.contour=f,d.size=function(v){if(!arguments.length)return[c,a];var y=Math.floor(v[0]),_=Math.floor(v[1]);if(!(y>=0&&_>=0))throw new Error("invalid size");return c=y,a=_,d},d.thresholds=function(v){return arguments.length?(l="function"==typeof v?v:Array.isArray(v)?tg(_ae.call(v)):tg(v),d):l},d.smooth=function(v){return arguments.length?(h=v?m:CQe,d):h===m},d}function SQe(c){return isFinite(c)?c:NaN}function g0(c,a){return null!=c&&+c>=a}function Z8(c){return null==c||isNaN(c=+c)?-1/0:c}function bae(c,a,l,h){const d=h-a,f=l-a,p=isFinite(d)||isFinite(f)?d/f:Math.sign(d)/Math.sign(f);return isNaN(p)?c:c+p-.5}function xQe(c){return c[0]}function wQe(c){return c[1]}function OQe(){return 1}function DQe(){var c=xQe,a=wQe,l=OQe,h=960,d=500,f=20,p=2,g=3*f,m=h+2*g>>p,v=d+2*g>>p,y=tg(20);function _(T){var M=new Float32Array(m*v),k=Math.pow(2,-p),E=-1;for(const ee of T){var P=(c(ee,++E,T)+g)*k,V=(a(ee,E,T)+g)*k,I=+l(ee,E,T);if(I&&P>=0&&P<m&&V>=0&&V<v){var U=Math.floor(P),$=Math.floor(V),H=P-U-.5,J=V-$-.5;M[U+$*m]+=(1-H)*(1-J)*I,M[U+1+$*m]+=H*(1-J)*I,M[U+1+($+1)*m]+=H*J*I,M[U+($+1)*m]+=(1-H)*J*I}}return kse({data:M,width:m,height:v},f*k),M}function b(T){var M=_(T),k=y(M),E=Math.pow(2,2*p);return Array.isArray(k)||(k=r0(Number.MIN_VALUE,wx(M)/E,k)),j8().size([m,v]).thresholds(k.map(P=>P*E))(M).map((P,V)=>(P.value=+k[V],C(P)))}function C(T){return T.coordinates.forEach(x),T}function x(T){T.forEach(w)}function w(T){T.forEach(O)}function O(T){T[0]=T[0]*Math.pow(2,p)-g,T[1]=T[1]*Math.pow(2,p)-g}function D(){return m=h+2*(g=3*f)>>p,v=d+2*g>>p,b}return b.contours=function(T){var M=_(T),k=j8().size([m,v]),E=Math.pow(2,2*p),P=V=>{var I=C(k.contour(M,(V=+V)*E));return I.value=V,I};return Object.defineProperty(P,"max",{get:()=>wx(M)/E}),P},b.x=function(T){return arguments.length?(c="function"==typeof T?T:tg(+T),b):c},b.y=function(T){return arguments.length?(a="function"==typeof T?T:tg(+T),b):a},b.weight=function(T){return arguments.length?(l="function"==typeof T?T:tg(+T),b):l},b.size=function(T){if(!arguments.length)return[h,d];var M=+T[0],k=+T[1];if(!(M>=0&&k>=0))throw new Error("invalid size");return h=M,d=k,D()},b.cellSize=function(T){if(!arguments.length)return 1<<p;if(!((T=+T)>=1))throw new Error("invalid cell size");return p=Math.floor(Math.log(T)/Math.LN2),D()},b.thresholds=function(T){return arguments.length?(y="function"==typeof T?T:Array.isArray(T)?tg(_ae.call(T)):tg(T),b):y},b.bandwidth=function(T){if(!arguments.length)return Math.sqrt(f*(f+1));if(!((T=+T)>=0))throw new Error("invalid bandwidth");return f=(Math.sqrt(4*T*T+1)-1)/2,D()},b}const zo=134217729;function $x(c,a,l,h,d){let f,p,g,m,v=a[0],y=h[0],_=0,b=0;y>v==y>-v?(f=v,v=a[++_]):(f=y,y=h[++b]);let C=0;if(_<c&&b<l)for(y>v==y>-v?(p=v+f,g=f-(p-v),v=a[++_]):(p=y+f,g=f-(p-y),y=h[++b]),f=p,0!==g&&(d[C++]=g);_<c&&b<l;)y>v==y>-v?(p=f+v,m=p-f,g=f-(p-m)+(v-m),v=a[++_]):(p=f+y,m=p-f,g=f-(p-m)+(y-m),y=h[++b]),f=p,0!==g&&(d[C++]=g);for(;_<c;)p=f+v,m=p-f,g=f-(p-m)+(v-m),v=a[++_],f=p,0!==g&&(d[C++]=g);for(;b<l;)p=f+y,m=p-f,g=f-(p-m)+(y-m),y=h[++b],f=p,0!==g&&(d[C++]=g);return(0!==f||0===C)&&(d[C++]=f),C}function $t(c){return new Float64Array(c)}const V_=$t(4),Cae=$t(8),Sae=$t(12),xae=$t(16),ul=$t(4);function SM(c,a,l,h,d,f){const p=(a-f)*(l-d),g=(c-d)*(h-f),m=p-g;if(0===p||0===g||p>0!=g>0)return m;const v=Math.abs(p+g);return Math.abs(m)>=33306690738754716e-32*v?m:-function IQe(c,a,l,h,d,f,p){let g,m,v,y,_,b,C,x,w,O,D,T,M,k,E,P,V,I;const U=c-d,$=l-d,H=a-f,J=h-f;k=U*J,b=zo*U,C=b-(b-U),x=U-C,b=zo*J,w=b-(b-J),O=J-w,E=x*O-(k-C*w-x*w-C*O),P=H*$,b=zo*H,C=b-(b-H),x=H-C,b=zo*$,w=b-(b-$),O=$-w,V=x*O-(P-C*w-x*w-C*O),D=E-V,_=E-D,V_[0]=E-(D+_)+(_-V),T=k+D,_=T-k,M=k-(T-_)+(D-_),D=M-P,_=M-D,V_[1]=M-(D+_)+(_-P),I=T+D,_=I-T,V_[2]=T-(I-_)+(D-_),V_[3]=I;let ee=function kQe(c,a){let l=a[0];for(let h=1;h<c;h++)l+=a[h];return l}(4,V_),B=22204460492503146e-32*p;if(ee>=B||-ee>=B||(_=c-U,g=c-(U+_)+(_-d),_=l-$,v=l-($+_)+(_-d),_=a-H,m=a-(H+_)+(_-f),_=h-J,y=h-(J+_)+(_-f),0===g&&0===m&&0===v&&0===y)||(B=11093356479670487e-47*p+33306690738754706e-32*Math.abs(ee),ee+=U*y+J*g-(H*v+$*m),ee>=B||-ee>=B))return ee;k=g*J,b=zo*g,C=b-(b-g),x=g-C,b=zo*J,w=b-(b-J),O=J-w,E=x*O-(k-C*w-x*w-C*O),P=m*$,b=zo*m,C=b-(b-m),x=m-C,b=zo*$,w=b-(b-$),O=$-w,V=x*O-(P-C*w-x*w-C*O),D=E-V,_=E-D,ul[0]=E-(D+_)+(_-V),T=k+D,_=T-k,M=k-(T-_)+(D-_),D=M-P,_=M-D,ul[1]=M-(D+_)+(_-P),I=T+D,_=I-T,ul[2]=T-(I-_)+(D-_),ul[3]=I;const G=$x(4,V_,4,ul,Cae);k=U*y,b=zo*U,C=b-(b-U),x=U-C,b=zo*y,w=b-(b-y),O=y-w,E=x*O-(k-C*w-x*w-C*O),P=H*v,b=zo*H,C=b-(b-H),x=H-C,b=zo*v,w=b-(b-v),O=v-w,V=x*O-(P-C*w-x*w-C*O),D=E-V,_=E-D,ul[0]=E-(D+_)+(_-V),T=k+D,_=T-k,M=k-(T-_)+(D-_),D=M-P,_=M-D,ul[1]=M-(D+_)+(_-P),I=T+D,_=I-T,ul[2]=T-(I-_)+(D-_),ul[3]=I;const W=$x(G,Cae,4,ul,Sae);k=g*y,b=zo*g,C=b-(b-g),x=g-C,b=zo*y,w=b-(b-y),O=y-w,E=x*O-(k-C*w-x*w-C*O),P=m*v,b=zo*m,C=b-(b-m),x=m-C,b=zo*v,w=b-(b-v),O=v-w,V=x*O-(P-C*w-x*w-C*O),D=E-V,_=E-D,ul[0]=E-(D+_)+(_-V),T=k+D,_=T-k,M=k-(T-_)+(D-_),D=M-P,_=M-D,ul[1]=M-(D+_)+(_-P),I=T+D,_=I-T,ul[2]=T-(I-_)+(D-_),ul[3]=I;const j=$x(W,Sae,4,ul,xae);return xae[j-1]}(c,a,l,h,d,f,v)}$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(8),$t(8),$t(8),$t(4),$t(8),$t(8),$t(8),$t(12),$t(192),$t(192),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(8),$t(8),$t(8),$t(8),$t(8),$t(8),$t(8),$t(8),$t(8),$t(4),$t(4),$t(4),$t(8),$t(16),$t(16),$t(16),$t(32),$t(32),$t(48),$t(64),$t(1152),$t(1152),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(4),$t(24),$t(24),$t(24),$t(24),$t(24),$t(24),$t(24),$t(24),$t(24),$t(24),$t(1152),$t(1152),$t(1152),$t(1152),$t(1152),$t(2304),$t(2304),$t(3456),$t(5760),$t(8),$t(8),$t(8),$t(16),$t(24),$t(48),$t(48),$t(96),$t(192),$t(384),$t(384),$t(384),$t(768),$t(96),$t(96),$t(96),$t(1152);const Wae=Math.pow(2,-52),IM=new Uint32Array(512);class PM{static from(a,l=KQe,h=JQe){const d=a.length,f=new Float64Array(2*d);for(let p=0;p<d;p++){const g=a[p];f[2*p]=l(g),f[2*p+1]=h(g)}return new PM(f)}constructor(a){const l=a.length>>1;if(l>0&&"number"!=typeof a[0])throw new Error("Expected coords to contain numbers.");this.coords=a;const h=Math.max(2*l-5,0);this._triangles=new Uint32Array(3*h),this._halfedges=new Int32Array(3*h),this._hashSize=Math.ceil(Math.sqrt(l)),this._hullPrev=new Uint32Array(l),this._hullNext=new Uint32Array(l),this._hullTri=new Uint32Array(l),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(l),this._dists=new Float64Array(l),this.update()}update(){const{coords:a,_hullPrev:l,_hullNext:h,_hullTri:d,_hullHash:f}=this,p=a.length>>1;let g=1/0,m=1/0,v=-1/0,y=-1/0;for(let $=0;$<p;$++){const H=a[2*$],J=a[2*$+1];H<g&&(g=H),J<m&&(m=J),H>v&&(v=H),J>y&&(y=J),this._ids[$]=$}const _=(g+v)/2,b=(m+y)/2;let x,w,O,C=1/0;for(let $=0;$<p;$++){const H=bV(_,b,a[2*$],a[2*$+1]);H<C&&(x=$,C=H)}const D=a[2*x],T=a[2*x+1];C=1/0;for(let $=0;$<p;$++){if($===x)continue;const H=bV(D,T,a[2*$],a[2*$+1]);H<C&&H>0&&(w=$,C=H)}let M=a[2*w],k=a[2*w+1],E=1/0;for(let $=0;$<p;$++){if($===x||$===w)continue;const H=XQe(D,T,M,k,a[2*$],a[2*$+1]);H<E&&(O=$,E=H)}let P=a[2*O],V=a[2*O+1];if(E===1/0){for(let J=0;J<p;J++)this._dists[J]=a[2*J]-a[0]||a[2*J+1]-a[1];j_(this._ids,this._dists,0,p-1);const $=new Uint32Array(p);let H=0;for(let J=0,ee=-1/0;J<p;J++){const B=this._ids[J];this._dists[B]>ee&&($[H++]=B,ee=this._dists[B])}return this.hull=$.subarray(0,H),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(SM(D,T,M,k,P,V)<0){const $=w,H=M,J=k;w=O,M=P,k=V,O=$,P=H,V=J}const I=function YQe(c,a,l,h,d,f){const p=l-c,g=h-a,m=d-c,v=f-a,y=p*p+g*g,_=m*m+v*v,b=.5/(p*v-g*m);return{x:c+(v*y-g*_)*b,y:a+(p*_-m*y)*b}}(D,T,M,k,P,V);this._cx=I.x,this._cy=I.y;for(let $=0;$<p;$++)this._dists[$]=bV(a[2*$],a[2*$+1],I.x,I.y);j_(this._ids,this._dists,0,p-1),this._hullStart=x;let U=3;h[x]=l[O]=w,h[w]=l[x]=O,h[O]=l[w]=x,d[x]=0,d[w]=1,d[O]=2,f.fill(-1),f[this._hashKey(D,T)]=x,f[this._hashKey(M,k)]=w,f[this._hashKey(P,V)]=O,this.trianglesLen=0,this._addTriangle(x,w,O,-1,-1,-1);for(let H,J,$=0;$<this._ids.length;$++){const ee=this._ids[$],B=a[2*ee],G=a[2*ee+1];if($>0&&Math.abs(B-H)<=Wae&&Math.abs(G-J)<=Wae||(H=B,J=G,ee===x||ee===w||ee===O))continue;let W=0;for(let ne=0,re=this._hashKey(B,G);ne<this._hashSize&&(W=f[(re+ne)%this._hashSize],-1===W||W===h[W]);ne++);W=l[W];let Q,j=W;for(;Q=h[j],SM(B,G,a[2*j],a[2*j+1],a[2*Q],a[2*Q+1])>=0;)if(j=Q,j===W){j=-1;break}if(-1===j)continue;let X=this._addTriangle(j,ee,h[j],-1,-1,d[j]);d[ee]=this._legalize(X+2),d[j]=X,U++;let Y=h[j];for(;Q=h[Y],SM(B,G,a[2*Y],a[2*Y+1],a[2*Q],a[2*Q+1])<0;)X=this._addTriangle(Y,ee,Q,d[ee],-1,d[Y]),d[ee]=this._legalize(X+2),h[Y]=Y,U--,Y=Q;if(j===W)for(;Q=l[j],SM(B,G,a[2*Q],a[2*Q+1],a[2*j],a[2*j+1])<0;)X=this._addTriangle(Q,ee,j,-1,d[j],d[Q]),this._legalize(X+2),d[Q]=X,h[j]=j,U--,j=Q;this._hullStart=l[ee]=j,h[j]=l[Y]=ee,h[ee]=Y,f[this._hashKey(B,G)]=ee,f[this._hashKey(a[2*j],a[2*j+1])]=j}this.hull=new Uint32Array(U);for(let $=0,H=this._hullStart;$<U;$++)this.hull[$]=H,H=h[H];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(a,l){return Math.floor(function ZQe(c,a){const l=c/(Math.abs(c)+Math.abs(a));return(a>0?3-l:1+l)/4}(a-this._cx,l-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:l,_halfedges:h,coords:d}=this;let f=0,p=0;for(;;){const g=h[a],m=a-a%3;if(p=m+(a+2)%3,-1===g){if(0===f)break;a=IM[--f];continue}const v=g-g%3,_=v+(g+2)%3,b=l[p],C=l[a],x=l[m+(a+1)%3],w=l[_];if(qQe(d[2*b],d[2*b+1],d[2*C],d[2*C+1],d[2*x],d[2*x+1],d[2*w],d[2*w+1])){l[a]=w,l[g]=b;const D=h[_];if(-1===D){let M=this._hullStart;do{if(this._hullTri[M]===_){this._hullTri[M]=a;break}M=this._hullPrev[M]}while(M!==this._hullStart)}this._link(a,D),this._link(g,h[p]),this._link(p,_),f<IM.length&&(IM[f++]=v+(g+1)%3)}else{if(0===f)break;a=IM[--f]}}return p}_link(a,l){this._halfedges[a]=l,-1!==l&&(this._halfedges[l]=a)}_addTriangle(a,l,h,d,f,p){const g=this.trianglesLen;return this._triangles[g]=a,this._triangles[g+1]=l,this._triangles[g+2]=h,this._link(g,d),this._link(g+1,f),this._link(g+2,p),this.trianglesLen+=3,g}}function bV(c,a,l,h){const d=c-l,f=a-h;return d*d+f*f}function qQe(c,a,l,h,d,f,p,g){const m=c-p,v=a-g,y=l-p,_=h-g,b=d-p,C=f-g,w=y*y+_*_,O=b*b+C*C;return m*(_*O-w*C)-v*(y*O-w*b)+(m*m+v*v)*(y*C-_*b)<0}function XQe(c,a,l,h,d,f){const p=l-c,g=h-a,m=d-c,v=f-a,y=p*p+g*g,_=m*m+v*v,b=.5/(p*v-g*m),C=(v*y-g*_)*b,x=(p*_-m*y)*b;return C*C+x*x}function j_(c,a,l,h){if(h-l<=20)for(let d=l+1;d<=h;d++){const f=c[d],p=a[f];let g=d-1;for(;g>=l&&a[c[g]]>p;)c[g+1]=c[g--];c[g+1]=f}else{let f=l+1,p=h;jx(c,l+h>>1,f),a[c[l]]>a[c[h]]&&jx(c,l,h),a[c[f]]>a[c[h]]&&jx(c,f,h),a[c[l]]>a[c[f]]&&jx(c,l,f);const g=c[f],m=a[g];for(;;){do{f++}while(a[c[f]]<m);do{p--}while(a[c[p]]>m);if(p<f)break;jx(c,f,p)}c[l+1]=c[p],c[p]=g,h-f+1>=p-l?(j_(c,a,f,h),j_(c,a,l,p-1)):(j_(c,a,l,p-1),j_(c,a,f,h))}}function jx(c,a,l){const h=c[a];c[a]=c[l],c[l]=h}function KQe(c){return c[0]}function JQe(c){return c[1]}class w0{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(a,l){this._+=`M${this._x0=this._x1=+a},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(a,l){this._+=`L${this._x1=+a},${this._y1=+l}`}arc(a,l,h){const d=(a=+a)+(h=+h),f=l=+l;if(h<0)throw new Error("negative radius");null===this._x1?this._+=`M${d},${f}`:(Math.abs(this._x1-d)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+d+","+f),h&&(this._+=`A${h},${h},0,1,1,${a-h},${l}A${h},${h},0,1,1,${this._x1=d},${this._y1=f}`)}rect(a,l,h,d){this._+=`M${this._x0=this._x1=+a},${this._y0=this._y1=+l}h${+h}v${+d}h${-h}Z`}value(){return this._||null}}class CV{constructor(){this._=[]}moveTo(a,l){this._.push([a,l])}closePath(){this._.push(this._[0].slice())}lineTo(a,l){this._.push([a,l])}value(){return this._.length?this._:null}}class Qae{constructor(a,[l,h,d,f]=[0,0,960,500]){if(!((d=+d)>=(l=+l)&&(f=+f)>=(h=+h)))throw new Error("invalid bounds");this.delaunay=a,this._circumcenters=new Float64Array(2*a.points.length),this.vectors=new Float64Array(2*a.points.length),this.xmax=d,this.xmin=l,this.ymax=f,this.ymin=h,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:a,hull:l,triangles:h},vectors:d}=this,f=this.circumcenters=this._circumcenters.subarray(0,h.length/3*2);for(let O,D,C=0,x=0,w=h.length;C<w;C+=3,x+=2){const T=2*h[C],M=2*h[C+1],k=2*h[C+2],E=a[T],P=a[T+1],U=a[k],$=a[k+1],H=a[M]-E,J=a[M+1]-P,ee=U-E,B=$-P,G=2*(H*B-J*ee);if(Math.abs(G)<1e-9){let W=1e9;const j=2*h[0];W*=Math.sign((a[j]-E)*B-(a[j+1]-P)*ee),O=(E+U)/2-W*B,D=(P+$)/2+W*ee}else{const W=1/G,j=H*H+J*J,Q=ee*ee+B*B;O=E+(B*j-J*Q)*W,D=P+(H*Q-ee*j)*W}f[x]=O,f[x+1]=D}let g,v,_,p=l[l.length-1],m=4*p,y=a[2*p],b=a[2*p+1];d.fill(0);for(let C=0;C<l.length;++C)p=l[C],g=m,v=y,_=b,m=4*p,y=a[2*p],b=a[2*p+1],d[g+2]=d[m]=_-b,d[g+3]=d[m+1]=y-v}render(a){const l=null==a?a=new w0:void 0,{delaunay:{halfedges:h,inedges:d,hull:f},circumcenters:p,vectors:g}=this;if(f.length<=1)return null;for(let y=0,_=h.length;y<_;++y){const b=h[y];if(b<y)continue;const C=2*Math.floor(y/3),x=2*Math.floor(b/3);this._renderSegment(p[C],p[C+1],p[x],p[x+1],a)}let m,v=f[f.length-1];for(let y=0;y<f.length;++y){m=v,v=f[y];const _=2*Math.floor(d[v]/3),b=p[_],C=p[_+1],x=4*m,w=this._project(b,C,g[x+2],g[x+3]);w&&this._renderSegment(b,C,w[0],w[1],a)}return l&&l.value()}renderBounds(a){const l=null==a?a=new w0:void 0;return a.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),l&&l.value()}renderCell(a,l){const h=null==l?l=new w0:void 0,d=this._clip(a);if(null===d||!d.length)return;l.moveTo(d[0],d[1]);let f=d.length;for(;d[0]===d[f-2]&&d[1]===d[f-1]&&f>1;)f-=2;for(let p=2;p<f;p+=2)(d[p]!==d[p-2]||d[p+1]!==d[p-1])&&l.lineTo(d[p],d[p+1]);return l.closePath(),h&&h.value()}*cellPolygons(){const{delaunay:{points:a}}=this;for(let l=0,h=a.length/2;l<h;++l){const d=this.cellPolygon(l);d&&(d.index=l,yield d)}}cellPolygon(a){const l=new CV;return this.renderCell(a,l),l.value()}_renderSegment(a,l,h,d,f){let p;const g=this._regioncode(a,l),m=this._regioncode(h,d);0===g&&0===m?(f.moveTo(a,l),f.lineTo(h,d)):(p=this._clipSegment(a,l,h,d,g,m))&&(f.moveTo(p[0],p[1]),f.lineTo(p[2],p[3]))}contains(a,l,h){return(l=+l)==l&&(h=+h)==h&&this.delaunay._step(a,l,h)===a}*neighbors(a){const l=this._clip(a);if(l)for(const h of this.delaunay.neighbors(a)){const d=this._clip(h);if(d)e:for(let f=0,p=l.length;f<p;f+=2)for(let g=0,m=d.length;g<m;g+=2)if(l[f]==d[g]&&l[f+1]==d[g+1]&&l[(f+2)%p]==d[(g+m-2)%m]&&l[(f+3)%p]==d[(g+m-1)%m]){yield h;break e}}}_cell(a){const{circumcenters:l,delaunay:{inedges:h,halfedges:d,triangles:f}}=this,p=h[a];if(-1===p)return null;const g=[];let m=p;do{const v=Math.floor(m/3);if(g.push(l[2*v],l[2*v+1]),m=m%3==2?m-2:m+1,f[m]!==a)break;m=d[m]}while(m!==p&&-1!==m);return g}_clip(a){if(0===a&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const l=this._cell(a);if(null===l)return null;const{vectors:h}=this,d=4*a;return h[d]||h[d+1]?this._clipInfinite(a,l,h[d],h[d+1],h[d+2],h[d+3]):this._clipFinite(a,l)}_clipFinite(a,l){const h=l.length;let f,p,v,_,d=null,g=l[h-2],m=l[h-1],y=this._regioncode(g,m),b=0;for(let C=0;C<h;C+=2)if(f=g,p=m,g=l[C],m=l[C+1],v=y,y=this._regioncode(g,m),0===v&&0===y)_=b,b=0,d?d.push(g,m):d=[g,m];else{let x,w,O,D,T;if(0===v){if(null===(x=this._clipSegment(f,p,g,m,v,y)))continue;[w,O,D,T]=x}else{if(null===(x=this._clipSegment(g,m,f,p,y,v)))continue;[D,T,w,O]=x,_=b,b=this._edgecode(w,O),_&&b&&this._edge(a,_,b,d,d.length),d?d.push(w,O):d=[w,O]}_=b,b=this._edgecode(D,T),_&&b&&this._edge(a,_,b,d,d.length),d?d.push(D,T):d=[D,T]}if(d)_=b,b=this._edgecode(d[0],d[1]),_&&b&&this._edge(a,_,b,d,d.length);else if(this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return d}_clipSegment(a,l,h,d,f,p){for(;;){if(0===f&&0===p)return[a,l,h,d];if(f&p)return null;let g,m,v=f||p;8&v?(g=a+(h-a)*(this.ymax-l)/(d-l),m=this.ymax):4&v?(g=a+(h-a)*(this.ymin-l)/(d-l),m=this.ymin):2&v?(m=l+(d-l)*(this.xmax-a)/(h-a),g=this.xmax):(m=l+(d-l)*(this.xmin-a)/(h-a),g=this.xmin),f?f=this._regioncode(a=g,l=m):p=this._regioncode(h=g,d=m)}}_clipInfinite(a,l,h,d,f,p){let m,g=Array.from(l);if((m=this._project(g[0],g[1],h,d))&&g.unshift(m[0],m[1]),(m=this._project(g[g.length-2],g[g.length-1],f,p))&&g.push(m[0],m[1]),g=this._clipFinite(a,g))for(let _,v=0,y=g.length,b=this._edgecode(g[y-2],g[y-1]);v<y;v+=2)_=b,b=this._edgecode(g[v],g[v+1]),_&&b&&(v=this._edge(a,_,b,g,v),y=g.length);else this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(g=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return g}_edge(a,l,h,d,f){for(;l!==h;){let p,g;switch(l){case 5:l=4;continue;case 4:l=6,p=this.xmax,g=this.ymin;break;case 6:l=2;continue;case 2:l=10,p=this.xmax,g=this.ymax;break;case 10:l=8;continue;case 8:l=9,p=this.xmin,g=this.ymax;break;case 9:l=1;continue;case 1:l=5,p=this.xmin,g=this.ymin}(d[f]!==p||d[f+1]!==g)&&this.contains(a,p,g)&&(d.splice(f,0,p,g),f+=2)}if(d.length>4)for(let p=0;p<d.length;p+=2){const g=(p+2)%d.length,m=(p+4)%d.length;(d[p]===d[g]&&d[g]===d[m]||d[p+1]===d[g+1]&&d[g+1]===d[m+1])&&(d.splice(g,2),p-=2)}return f}_project(a,l,h,d){let p,g,m,f=1/0;if(d<0){if(l<=this.ymin)return null;(p=(this.ymin-l)/d)<f&&(m=this.ymin,g=a+(f=p)*h)}else if(d>0){if(l>=this.ymax)return null;(p=(this.ymax-l)/d)<f&&(m=this.ymax,g=a+(f=p)*h)}if(h>0){if(a>=this.xmax)return null;(p=(this.xmax-a)/h)<f&&(g=this.xmax,m=l+(f=p)*d)}else if(h<0){if(a<=this.xmin)return null;(p=(this.xmin-a)/h)<f&&(g=this.xmin,m=l+(f=p)*d)}return[g,m]}_edgecode(a,l){return(a===this.xmin?1:a===this.xmax?2:0)|(l===this.ymin?4:l===this.ymax?8:0)}_regioncode(a,l){return(a<this.xmin?1:a>this.xmax?2:0)|(l<this.ymin?4:l>this.ymax?8:0)}}const eje=2*Math.PI,Z_=Math.pow;function tje(c){return c[0]}function nje(c){return c[1]}function rje(c,a,l){return[c+Math.sin(c+a)*l,a+Math.cos(c-a)*l]}class SV{static from(a,l=tje,h=nje,d){return new SV("length"in a?function sje(c,a,l,h){const d=c.length,f=new Float64Array(2*d);for(let p=0;p<d;++p){const g=c[p];f[2*p]=a.call(h,g,p,c),f[2*p+1]=l.call(h,g,p,c)}return f}(a,l,h,d):Float64Array.from(function*oje(c,a,l,h){let d=0;for(const f of c)yield a.call(h,f,d,c),yield l.call(h,f,d,c),++d}(a,l,h,d)))}constructor(a){this._delaunator=new PM(a),this.inedges=new Int32Array(a.length/2),this._hullIndex=new Int32Array(a.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const a=this._delaunator,l=this.points;if(a.hull&&a.hull.length>2&&function ije(c){const{triangles:a,coords:l}=c;for(let h=0;h<a.length;h+=3){const d=2*a[h],f=2*a[h+1],p=2*a[h+2];if((l[p]-l[d])*(l[f+1]-l[d+1])-(l[f]-l[d])*(l[p+1]-l[d+1])>1e-10)return!1}return!0}(a)){this.collinear=Int32Array.from({length:l.length/2},(b,C)=>C).sort((b,C)=>l[2*b]-l[2*C]||l[2*b+1]-l[2*C+1]);const m=this.collinear[0],v=this.collinear[this.collinear.length-1],y=[l[2*m],l[2*m+1],l[2*v],l[2*v+1]],_=1e-8*Math.hypot(y[3]-y[1],y[2]-y[0]);for(let b=0,C=l.length/2;b<C;++b){const x=rje(l[2*b],l[2*b+1],_);l[2*b]=x[0],l[2*b+1]=x[1]}this._delaunator=new PM(l)}else delete this.collinear;const h=this.halfedges=this._delaunator.halfedges,d=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,p=this.inedges.fill(-1),g=this._hullIndex.fill(-1);for(let m=0,v=h.length;m<v;++m){const y=f[m%3==2?m-2:m+1];(-1===h[m]||-1===p[y])&&(p[y]=m)}for(let m=0,v=d.length;m<v;++m)g[d[m]]=m;d.length<=2&&d.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=d[0],p[d[0]]=1,2===d.length&&(p[d[1]]=0,this.triangles[1]=d[1],this.triangles[2]=d[1]))}voronoi(a){return new Qae(this,a)}*neighbors(a){const{inedges:l,hull:h,_hullIndex:d,halfedges:f,triangles:p,collinear:g}=this;if(g){const _=g.indexOf(a);return _>0&&(yield g[_-1]),void(_<g.length-1&&(yield g[_+1]))}const m=l[a];if(-1===m)return;let v=m,y=-1;do{if(yield y=p[v],v=v%3==2?v-2:v+1,p[v]!==a)return;if(v=f[v],-1===v){const _=h[(d[a]+1)%h.length];return void(_!==y&&(yield _))}}while(v!==m)}find(a,l,h=0){if((a=+a)!=a||(l=+l)!=l)return-1;const d=h;let f;for(;(f=this._step(h,a,l))>=0&&f!==h&&f!==d;)h=f;return f}_step(a,l,h){const{inedges:d,hull:f,_hullIndex:p,halfedges:g,triangles:m,points:v}=this;if(-1===d[a]||!v.length)return(a+1)%(v.length>>1);let y=a,_=Z_(l-v[2*a],2)+Z_(h-v[2*a+1],2);const b=d[a];let C=b;do{let x=m[C];const w=Z_(l-v[2*x],2)+Z_(h-v[2*x+1],2);if(w<_&&(_=w,y=x),C=C%3==2?C-2:C+1,m[C]!==a)break;if(C=g[C],-1===C){if(C=f[(p[a]+1)%f.length],C!==x&&Z_(l-v[2*C],2)+Z_(h-v[2*C+1],2)<_)return C;break}}while(C!==b);return y}render(a){const l=null==a?a=new w0:void 0,{points:h,halfedges:d,triangles:f}=this;for(let p=0,g=d.length;p<g;++p){const m=d[p];if(m<p)continue;const v=2*f[p],y=2*f[m];a.moveTo(h[v],h[v+1]),a.lineTo(h[y],h[y+1])}return this.renderHull(a),l&&l.value()}renderPoints(a,l){void 0===l&&(!a||"function"!=typeof a.moveTo)&&(l=a,a=null),l=null==l?2:+l;const h=null==a?a=new w0:void 0,{points:d}=this;for(let f=0,p=d.length;f<p;f+=2){const g=d[f],m=d[f+1];a.moveTo(g+l,m),a.arc(g,m,l,0,eje)}return h&&h.value()}renderHull(a){const l=null==a?a=new w0:void 0,{hull:h,points:d}=this,f=2*h[0],p=h.length;a.moveTo(d[f],d[f+1]);for(let g=1;g<p;++g){const m=2*h[g];a.lineTo(d[m],d[m+1])}return a.closePath(),l&&l.value()}hullPolygon(){const a=new CV;return this.renderHull(a),a.value()}renderTriangle(a,l){const h=null==l?l=new w0:void 0,{points:d,triangles:f}=this,p=2*f[a*=3],g=2*f[a+1],m=2*f[a+2];return l.moveTo(d[p],d[p+1]),l.lineTo(d[g],d[g+1]),l.lineTo(d[m],d[m+1]),l.closePath(),h&&h.value()}*trianglePolygons(){const{triangles:a}=this;for(let l=0,h=a.length/3;l<h;++l)yield this.trianglePolygon(l)}trianglePolygon(a){const l=new CV;return this.renderTriangle(a,l),l.value()}}const RM=c=>()=>c;function xV(c,{sourceEvent:a,subject:l,target:h,identifier:d,active:f,x:p,y:g,dx:m,dy:v,dispatch:y}){Object.defineProperties(this,{type:{value:c,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:l,enumerable:!0,configurable:!0},target:{value:h,enumerable:!0,configurable:!0},identifier:{value:d,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:p,enumerable:!0,configurable:!0},y:{value:g,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:y}})}function aje(c){return!c.ctrlKey&&!c.button}function lje(){return this.parentNode}function cje(c,a){return a??{x:c.x,y:c.y}}function uje(){return navigator.maxTouchPoints||"ontouchstart"in this}function jae(){var g,m,v,y,c=aje,a=lje,l=cje,h=uje,d={},f=T_("start","drag","end"),p=0,_=0;function b(k){k.on("mousedown.drag",C).filter(h).on("touchstart.drag",O).on("touchmove.drag",D,iWe).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function C(k,E){if(!y&&c.call(this,k,E)){var P=M(this,a.call(this,k,E),k,E,"mouse");P&&(yo(k.view).on("mousemove.drag",x,Mx).on("mouseup.drag",w,Mx),Jk(k.view),f8(k),v=!1,g=k.clientX,m=k.clientY,P("start",k))}}function x(k){if(M_(k),!v){var E=k.clientX-g,P=k.clientY-m;v=E*E+P*P>_}d.mouse("drag",k)}function w(k){yo(k.view).on("mousemove.drag mouseup.drag",null),eM(k.view,v),M_(k),d.mouse("end",k)}function O(k,E){if(c.call(this,k,E)){var U,$,P=k.changedTouches,V=a.call(this,k,E),I=P.length;for(U=0;U<I;++U)($=M(this,V,k,E,P[U].identifier,P[U]))&&(f8(k),$("start",k,P[U]))}}function D(k){var V,I,E=k.changedTouches,P=E.length;for(V=0;V<P;++V)(I=d[E[V].identifier])&&(M_(k),I("drag",k,E[V]))}function T(k){var V,I,E=k.changedTouches,P=E.length;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),V=0;V<P;++V)(I=d[E[V].identifier])&&(f8(k),I("end",k,E[V]))}function M(k,E,P,V,I,U){var J,ee,B,$=f.copy(),H=Oc(U||P,E);if(null!=(B=l.call(k,new xV("beforestart",{sourceEvent:P,target:b,identifier:I,active:p,x:H[0],y:H[1],dx:0,dy:0,dispatch:$}),V)))return J=B.x-H[0]||0,ee=B.y-H[1]||0,function G(W,j,Q){var Y,X=H;switch(W){case"start":d[I]=G,Y=p++;break;case"end":delete d[I],--p;case"drag":H=Oc(Q||j,E),Y=p}$.call(W,k,new xV(W,{sourceEvent:j,subject:B,target:b,identifier:I,active:Y,x:H[0]+J,y:H[1]+ee,dx:H[0]-X[0],dy:H[1]-X[1],dispatch:$}),V)}}return b.filter=function(k){return arguments.length?(c="function"==typeof k?k:RM(!!k),b):c},b.container=function(k){return arguments.length?(a="function"==typeof k?k:RM(k),b):a},b.subject=function(k){return arguments.length?(l="function"==typeof k?k:RM(k),b):l},b.touchable=function(k){return arguments.length?(h="function"==typeof k?k:RM(!!k),b):h},b.on=function(){var k=f.on.apply(f,arguments);return k===f?b:k},b.clickDistance=function(k){return arguments.length?(_=(k=+k)*k,b):Math.sqrt(_)},b}xV.prototype.on=function(){var c=this._.on.apply(this._,arguments);return c===this._?this:c};var Zae={},wV={};function qae(c){return new Function("d","return {"+c.map(function(a,l){return JSON.stringify(a)+": d["+l+'] || ""'}).join(",")+"}")}function Xae(c){var a=Object.create(null),l=[];return c.forEach(function(h){for(var d in h)d in a||l.push(a[d]=d)}),l}function Kl(c,a){var l=c+"",h=l.length;return h<a?new Array(a-h+1).join(0)+l:l}function FM(c){var a=new RegExp('["'+c+"\n\r]"),l=c.charCodeAt(0);function d(_,b){var D,C=[],x=_.length,w=0,O=0,T=x<=0,M=!1;function k(){if(T)return wV;if(M)return M=!1,Zae;var P,I,V=w;if(34===_.charCodeAt(V)){for(;w++<x&&34!==_.charCodeAt(w)||34===_.charCodeAt(++w););return(P=w)>=x?T=!0:10===(I=_.charCodeAt(w++))?M=!0:13===I&&(M=!0,10===_.charCodeAt(w)&&++w),_.slice(V+1,P-1).replace(/""/g,'"')}for(;w<x;){if(10===(I=_.charCodeAt(P=w++)))M=!0;else if(13===I)M=!0,10===_.charCodeAt(w)&&++w;else if(I!==l)continue;return _.slice(V,P)}return T=!0,_.slice(V,x)}for(10===_.charCodeAt(x-1)&&--x,13===_.charCodeAt(x-1)&&--x;(D=k())!==wV;){for(var E=[];D!==Zae&&D!==wV;)E.push(D),D=k();b&&null==(E=b(E,O++))||C.push(E)}return C}function f(_,b){return _.map(function(C){return b.map(function(x){return y(C[x])}).join(c)})}function v(_){return _.map(y).join(c)}function y(_){return null==_?"":_ instanceof Date?function fje(c){var a=c.getUTCHours(),l=c.getUTCMinutes(),h=c.getUTCSeconds(),d=c.getUTCMilliseconds();return isNaN(c)?"Invalid Date":function dje(c){return c<0?"-"+Kl(-c,6):c>9999?"+"+Kl(c,6):Kl(c,4)}(c.getUTCFullYear())+"-"+Kl(c.getUTCMonth()+1,2)+"-"+Kl(c.getUTCDate(),2)+(d?"T"+Kl(a,2)+":"+Kl(l,2)+":"+Kl(h,2)+"."+Kl(d,3)+"Z":h?"T"+Kl(a,2)+":"+Kl(l,2)+":"+Kl(h,2)+"Z":l||a?"T"+Kl(a,2)+":"+Kl(l,2)+"Z":"")}(_):a.test(_+="")?'"'+_.replace(/"/g,'""')+'"':_}return{parse:function h(_,b){var C,x,w=d(_,function(O,D){if(C)return C(O,D-1);x=O,C=b?function hje(c,a){var l=qae(c);return function(h,d){return a(l(h),d,c)}}(O,b):qae(O)});return w.columns=x||[],w},parseRows:d,format:function p(_,b){return null==b&&(b=Xae(_)),[b.map(y).join(c)].concat(f(_,b)).join("\n")},formatBody:function g(_,b){return null==b&&(b=Xae(_)),f(_,b).join("\n")},formatRows:function m(_){return _.map(v).join("\n")},formatRow:v,formatValue:y}}var O0=FM(","),Yae=O0.parse,pje=O0.parseRows,gje=O0.format,mje=O0.formatBody,vje=O0.formatRows,yje=O0.formatRow,_je=O0.formatValue,D0=FM("\t"),Kae=D0.parse,bje=D0.parseRows,Cje=D0.format,Sje=D0.formatBody,xje=D0.formatRows,wje=D0.formatRow,Oje=D0.formatValue;function Dje(c){for(var a in c){var h,d,l=c[a].trim();if(l)if("true"===l)l=!0;else if("false"===l)l=!1;else if("NaN"===l)l=NaN;else if(isNaN(h=+l)){if(!(d=l.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Tje&&d[4]&&!d[7]&&(l=l.replace(/-/g,"/").replace(/T/," ")),l=new Date(l)}else l=h;else l=null;c[a]=l}return c}const Tje=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),kje=c=>+c;function Mje(c){return c*c}function Eje(c){return c*(2-c)}function Jae(c){return((c*=2)<=1?c*c:--c*(2-c)+1)/2}var Aje=function c(a){function l(h){return Math.pow(h,a)}return a=+a,l.exponent=c,l}(3),Ije=function c(a){function l(h){return 1-Math.pow(1-h,a)}return a=+a,l.exponent=c,l}(3),ele=function c(a){function l(h){return((h*=2)<=1?Math.pow(h,a):2-Math.pow(2-h,a))/2}return a=+a,l.exponent=c,l}(3),tle=Math.PI,nle=tle/2;function Pje(c){return 1==+c?1:1-Math.cos(c*nle)}function Rje(c){return Math.sin(c*nle)}function ile(c){return(1-Math.cos(tle*c))/2}function ag(c){return 1.0009775171065494*(Math.pow(2,-10*c)-.0009765625)}function Fje(c){return ag(1-+c)}function Lje(c){return 1-ag(c)}function rle(c){return((c*=2)<=1?ag(1-c):2-ag(c-1))/2}function Nje(c){return 1-Math.sqrt(1-c*c)}function Bje(c){return Math.sqrt(1- --c*c)}function sle(c){return((c*=2)<=1?1-Math.sqrt(1-c*c):Math.sqrt(1-(c-=2)*c)+1)/2}var LM=7.5625;function jje(c){return 1-qx(1-c)}function qx(c){return(c=+c)<.36363636363636365?LM*c*c:c<.7272727272727273?LM*(c-=.5454545454545454)*c+.75:c<.9090909090909091?LM*(c-=.8181818181818182)*c+.9375:LM*(c-=.9545454545454546)*c+.984375}function Zje(c){return((c*=2)<=1?1-qx(1-c):qx(c-1)+1)/2}var MV=1.70158,qje=function c(a){function l(h){return(h=+h)*h*(a*(h-1)+h)}return a=+a,l.overshoot=c,l}(MV),Xje=function c(a){function l(h){return--h*h*((h+1)*a+h)+1}return a=+a,l.overshoot=c,l}(MV),ole=function c(a){function l(h){return((h*=2)<1?h*h*((a+1)*h-a):(h-=2)*h*((a+1)*h+a)+2)/2}return a=+a,l.overshoot=c,l}(MV),q_=2*Math.PI,Yje=function c(a,l){var h=Math.asin(1/(a=Math.max(1,a)))*(l/=q_);function d(f){return a*ag(- --f)*Math.sin((h-f)/l)}return d.amplitude=function(f){return c(f,l*q_)},d.period=function(f){return c(a,f)},d}(1,.3),ale=function c(a,l){var h=Math.asin(1/(a=Math.max(1,a)))*(l/=q_);function d(f){return 1-a*ag(f=+f)*Math.sin((f+h)/l)}return d.amplitude=function(f){return c(f,l*q_)},d.period=function(f){return c(a,f)},d}(1,.3),Kje=function c(a,l){var h=Math.asin(1/(a=Math.max(1,a)))*(l/=q_);function d(f){return((f=2*f-1)<0?a*ag(-f)*Math.sin((h-f)/l):2-a*ag(f)*Math.sin((h+f)/l))/2}return d.amplitude=function(f){return c(f,l*q_)},d.period=function(f){return c(a,f)},d}(1,.3);function Jje(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);return c.blob()}function eZe(c,a){return fetch(c,a).then(Jje)}function tZe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);return c.arrayBuffer()}function nZe(c,a){return fetch(c,a).then(tZe)}function iZe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);return c.text()}function NM(c,a){return fetch(c,a).then(iZe)}function lle(c){return function(a,l,h){return 2===arguments.length&&"function"==typeof l&&(h=l,l=void 0),NM(a,l).then(function(d){return c(d,h)})}}function rZe(c,a,l,h){3===arguments.length&&"function"==typeof l&&(h=l,l=void 0);var d=FM(c);return NM(a,l).then(function(f){return d.parse(f,h)})}var sZe=lle(Yae),oZe=lle(Kae);function aZe(c,a){return new Promise(function(l,h){var d=new Image;for(var f in a)d[f]=a[f];d.onerror=h,d.onload=function(){l(d)},d.src=c})}function lZe(c){if(!c.ok)throw new Error(c.status+" "+c.statusText);if(204!==c.status&&205!==c.status)return c.json()}function cZe(c,a){return fetch(c,a).then(lZe)}function IV(c){return(a,l)=>NM(a,l).then(h=>(new DOMParser).parseFromString(h,c))}const uZe=IV("application/xml");var hZe=IV("text/html"),dZe=IV("image/svg+xml");function fZe(c,a){var l,h=1;function d(){var f,g,p=l.length,m=0,v=0;for(f=0;f<p;++f)m+=(g=l[f]).x,v+=g.y;for(m=(m/p-c)*h,v=(v/p-a)*h,f=0;f<p;++f)(g=l[f]).x-=m,g.y-=v}return null==c&&(c=0),null==a&&(a=0),d.initialize=function(f){l=f},d.x=function(f){return arguments.length?(c=+f,d):c},d.y=function(f){return arguments.length?(a=+f,d):a},d.strength=function(f){return arguments.length?(h=+f,d):h},d}function cle(c,a,l,h){if(isNaN(a)||isNaN(l))return c;var d,_,b,C,x,w,O,D,T,f=c._root,p={data:h},g=c._x0,m=c._y0,v=c._x1,y=c._y1;if(!f)return c._root=p,c;for(;f.length;)if((w=a>=(_=(g+v)/2))?g=_:v=_,(O=l>=(b=(m+y)/2))?m=b:y=b,d=f,!(f=f[D=O<<1|w]))return d[D]=p,c;if(C=+c._x.call(null,f.data),x=+c._y.call(null,f.data),a===C&&l===x)return p.next=f,d?d[D]=p:c._root=p,c;do{d=d?d[D]=new Array(4):c._root=new Array(4),(w=a>=(_=(g+v)/2))?g=_:v=_,(O=l>=(b=(m+y)/2))?m=b:y=b}while((D=O<<1|w)==(T=(x>=b)<<1|C>=_));return d[T]=f,d[D]=p,c}function fl(c,a,l,h,d){this.node=c,this.x0=a,this.y0=l,this.x1=h,this.y1=d}function DZe(c){return c[0]}function kZe(c){return c[1]}function BM(c,a,l){var h=new PV(a??DZe,l??kZe,NaN,NaN,NaN,NaN);return null==c?h:h.addAll(c)}function PV(c,a,l,h,d,f){this._x=c,this._y=a,this._x0=l,this._y0=h,this._x1=d,this._y1=f,this._root=void 0}function ule(c){for(var a={data:c.data},l=a;c=c.next;)l=l.next={data:c.data};return a}var pl=BM.prototype=PV.prototype;function Ho(c){return function(){return c}}function lg(c){return 1e-6*(c()-.5)}function EZe(c){return c.x+c.vx}function AZe(c){return c.y+c.vy}function IZe(c){var a,l,h,d=1,f=1;function p(){for(var v,_,b,C,x,w,O,y=a.length,D=0;D<f;++D)for(_=BM(a,EZe,AZe).visitAfter(g),v=0;v<y;++v)O=(w=l[(b=a[v]).index])*w,C=b.x+b.vx,x=b.y+b.vy,_.visit(T);function T(M,k,E,P,V){var I=M.data,U=M.r,$=w+U;if(!I)return k>C+$||P<C-$||E>x+$||V<x-$;if(I.index>b.index){var H=C-I.x-I.vx,J=x-I.y-I.vy,ee=H*H+J*J;ee<$*$&&(0===H&&(ee+=(H=lg(h))*H),0===J&&(ee+=(J=lg(h))*J),ee=($-(ee=Math.sqrt(ee)))/ee*d,b.vx+=(H*=ee)*($=(U*=U)/(O+U)),b.vy+=(J*=ee)*$,I.vx-=H*($=1-$),I.vy-=J*$)}}}function g(v){if(v.data)return v.r=l[v.data.index];for(var y=v.r=0;y<4;++y)v[y]&&v[y].r>v.r&&(v.r=v[y].r)}function m(){if(a){var v,_,y=a.length;for(l=new Array(y),v=0;v<y;++v)l[(_=a[v]).index]=+c(_,v,a)}}return"function"!=typeof c&&(c=Ho(null==c?1:+c)),p.initialize=function(v,y){a=v,h=y,m()},p.iterations=function(v){return arguments.length?(f=+v,p):f},p.strength=function(v){return arguments.length?(d=+v,p):d},p.radius=function(v){return arguments.length?(c="function"==typeof v?v:Ho(+v),m(),p):c},p}function PZe(c){return c.index}function hle(c,a){var l=c.get(a);if(!l)throw new Error("node not found: "+a);return l}function RZe(c){var h,f,p,g,m,v,a=PZe,l=function _(O){return 1/Math.min(g[O.source.index],g[O.target.index])},d=Ho(30),y=1;function b(O){for(var D=0,T=c.length;D<y;++D)for(var k,E,P,V,I,U,$,M=0;M<T;++M)V=(P=(k=c[M]).target).x+P.vx-(E=k.source).x-E.vx||lg(v),I=P.y+P.vy-E.y-E.vy||lg(v),I*=U=((U=Math.sqrt(V*V+I*I))-f[M])/U*O*h[M],P.vx-=(V*=U)*($=m[M]),P.vy-=I*$,E.vx+=V*($=1-$),E.vy+=I*$}function C(){if(p){var O,k,D=p.length,T=c.length,M=new Map(p.map((E,P)=>[a(E,P,p),E]));for(O=0,g=new Array(D);O<T;++O)(k=c[O]).index=O,"object"!=typeof k.source&&(k.source=hle(M,k.source)),"object"!=typeof k.target&&(k.target=hle(M,k.target)),g[k.source.index]=(g[k.source.index]||0)+1,g[k.target.index]=(g[k.target.index]||0)+1;for(O=0,m=new Array(T);O<T;++O)m[O]=g[(k=c[O]).source.index]/(g[k.source.index]+g[k.target.index]);h=new Array(T),x(),f=new Array(T),w()}}function x(){if(p)for(var O=0,D=c.length;O<D;++O)h[O]=+l(c[O],O,c)}function w(){if(p)for(var O=0,D=c.length;O<D;++O)f[O]=+d(c[O],O,c)}return null==c&&(c=[]),b.initialize=function(O,D){p=O,v=D,C()},b.links=function(O){return arguments.length?(c=O,C(),b):c},b.id=function(O){return arguments.length?(a=O,b):a},b.iterations=function(O){return arguments.length?(y=+O,b):y},b.strength=function(O){return arguments.length?(l="function"==typeof O?O:Ho(+O),x(),b):l},b.distance=function(O){return arguments.length?(d="function"==typeof O?O:Ho(+O),w(),b):d},b}function BZe(c){return c.x}function VZe(c){return c.y}pl.copy=function(){var l,h,c=new PV(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return c;if(!a.length)return c._root=ule(a),c;for(l=[{source:a,target:c._root=new Array(4)}];a=l.pop();)for(var d=0;d<4;++d)(h=a.source[d])&&(h.length?l.push({source:h,target:a.target[d]=new Array(4)}):a.target[d]=ule(h));return c},pl.add=function pZe(c){const a=+this._x.call(null,c),l=+this._y.call(null,c);return cle(this.cover(a,l),a,l,c)},pl.addAll=function gZe(c){var a,l,d,f,h=c.length,p=new Array(h),g=new Array(h),m=1/0,v=1/0,y=-1/0,_=-1/0;for(l=0;l<h;++l)isNaN(d=+this._x.call(null,a=c[l]))||isNaN(f=+this._y.call(null,a))||(p[l]=d,g[l]=f,d<m&&(m=d),d>y&&(y=d),f<v&&(v=f),f>_&&(_=f));if(m>y||v>_)return this;for(this.cover(m,v).cover(y,_),l=0;l<h;++l)cle(this,p[l],g[l],c[l]);return this},pl.cover=function mZe(c,a){if(isNaN(c=+c)||isNaN(a=+a))return this;var l=this._x0,h=this._y0,d=this._x1,f=this._y1;if(isNaN(l))d=(l=Math.floor(c))+1,f=(h=Math.floor(a))+1;else{for(var m,v,p=d-l||1,g=this._root;l>c||c>=d||h>a||a>=f;)switch(v=(a<h)<<1|c<l,m=new Array(4),m[v]=g,g=m,p*=2,v){case 0:d=l+p,f=h+p;break;case 1:l=d-p,f=h+p;break;case 2:d=l+p,h=f-p;break;case 3:l=d-p,h=f-p}this._root&&this._root.length&&(this._root=g)}return this._x0=l,this._y0=h,this._x1=d,this._y1=f,this},pl.data=function vZe(){var c=[];return this.visit(function(a){if(!a.length)do{c.push(a.data)}while(a=a.next)}),c},pl.extent=function yZe(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},pl.find=function _Ze(c,a,l){var h,p,g,m,v,x,w,d=this._x0,f=this._y0,y=this._x1,_=this._y1,b=[],C=this._root;for(C&&b.push(new fl(C,d,f,y,_)),null==l?l=1/0:(d=c-l,f=a-l,y=c+l,_=a+l,l*=l);x=b.pop();)if(!(!(C=x.node)||(p=x.x0)>y||(g=x.y0)>_||(m=x.x1)<d||(v=x.y1)<f))if(C.length){var O=(p+m)/2,D=(g+v)/2;b.push(new fl(C[3],O,D,m,v),new fl(C[2],p,D,O,v),new fl(C[1],O,g,m,D),new fl(C[0],p,g,O,D)),(w=(a>=D)<<1|c>=O)&&(x=b[b.length-1],b[b.length-1]=b[b.length-1-w],b[b.length-1-w]=x)}else{var T=c-+this._x.call(null,C.data),M=a-+this._y.call(null,C.data),k=T*T+M*M;if(k<l){var E=Math.sqrt(l=k);d=c-E,f=a-E,y=c+E,_=a+E,h=C.data}}return h},pl.remove=function bZe(c){if(isNaN(y=+this._x.call(null,c))||isNaN(_=+this._y.call(null,c)))return this;var a,h,d,f,y,_,b,C,x,w,O,D,l=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!l)return this;if(l.length)for(;;){if((x=y>=(b=(p+m)/2))?p=b:m=b,(w=_>=(C=(g+v)/2))?g=C:v=C,a=l,!(l=l[O=w<<1|x]))return this;if(!l.length)break;(a[O+1&3]||a[O+2&3]||a[O+3&3])&&(h=a,D=O)}for(;l.data!==c;)if(d=l,!(l=l.next))return this;return(f=l.next)&&delete l.next,d?(f?d.next=f:delete d.next,this):a?(f?a[O]=f:delete a[O],(l=a[0]||a[1]||a[2]||a[3])&&l===(a[3]||a[2]||a[1]||a[0])&&!l.length&&(h?h[D]=l:this._root=l),this):(this._root=f,this)},pl.removeAll=function CZe(c){for(var a=0,l=c.length;a<l;++a)this.remove(c[a]);return this},pl.root=function SZe(){return this._root},pl.size=function xZe(){var c=0;return this.visit(function(a){if(!a.length)do{++c}while(a=a.next)}),c},pl.visit=function wZe(c){var l,d,f,p,g,m,a=[],h=this._root;for(h&&a.push(new fl(h,this._x0,this._y0,this._x1,this._y1));l=a.pop();)if(!c(h=l.node,f=l.x0,p=l.y0,g=l.x1,m=l.y1)&&h.length){var v=(f+g)/2,y=(p+m)/2;(d=h[3])&&a.push(new fl(d,v,y,g,m)),(d=h[2])&&a.push(new fl(d,f,y,v,m)),(d=h[1])&&a.push(new fl(d,v,p,g,y)),(d=h[0])&&a.push(new fl(d,f,p,v,y))}return this},pl.visitAfter=function OZe(c){var h,a=[],l=[];for(this._root&&a.push(new fl(this._root,this._x0,this._y0,this._x1,this._y1));h=a.pop();){var d=h.node;if(d.length){var f,p=h.x0,g=h.y0,m=h.x1,v=h.y1,y=(p+m)/2,_=(g+v)/2;(f=d[0])&&a.push(new fl(f,p,g,y,_)),(f=d[1])&&a.push(new fl(f,y,g,m,_)),(f=d[2])&&a.push(new fl(f,p,_,y,v)),(f=d[3])&&a.push(new fl(f,y,_,m,v))}l.push(h)}for(;h=l.pop();)c(h.node,h.x0,h.y0,h.x1,h.y1);return this},pl.x=function TZe(c){return arguments.length?(this._x=c,this):this._x},pl.y=function MZe(c){return arguments.length?(this._y=c,this):this._y};var zZe=Math.PI*(3-Math.sqrt(5));function HZe(c){var a,l=1,h=.001,d=1-Math.pow(h,1/300),f=0,p=.6,g=new Map,m=uM(_),v=T_("tick","end"),y=function NZe(){let c=1;return()=>(c=(1664525*c+1013904223)%4294967296)/4294967296}();function _(){b(),v.call("tick",a),l<h&&(m.stop(),v.call("end",a))}function b(w){var O,T,D=c.length;void 0===w&&(w=1);for(var M=0;M<w;++M)for(l+=(f-l)*d,g.forEach(function(k){k(l)}),O=0;O<D;++O)null==(T=c[O]).fx?T.x+=T.vx*=p:(T.x=T.fx,T.vx=0),null==T.fy?T.y+=T.vy*=p:(T.y=T.fy,T.vy=0);return a}function C(){for(var D,w=0,O=c.length;w<O;++w){if((D=c[w]).index=w,null!=D.fx&&(D.x=D.fx),null!=D.fy&&(D.y=D.fy),isNaN(D.x)||isNaN(D.y)){var T=10*Math.sqrt(.5+w),M=w*zZe;D.x=T*Math.cos(M),D.y=T*Math.sin(M)}(isNaN(D.vx)||isNaN(D.vy))&&(D.vx=D.vy=0)}}function x(w){return w.initialize&&w.initialize(c,y),w}return null==c&&(c=[]),C(),a={tick:b,restart:function(){return m.restart(_),a},stop:function(){return m.stop(),a},nodes:function(w){return arguments.length?(c=w,C(),g.forEach(x),a):c},alpha:function(w){return arguments.length?(l=+w,a):l},alphaMin:function(w){return arguments.length?(h=+w,a):h},alphaDecay:function(w){return arguments.length?(d=+w,a):+d},alphaTarget:function(w){return arguments.length?(f=+w,a):f},velocityDecay:function(w){return arguments.length?(p=1-w,a):1-p},randomSource:function(w){return arguments.length?(y=w,g.forEach(x),a):y},force:function(w,O){return arguments.length>1?(null==O?g.delete(w):g.set(w,x(O)),a):g.get(w)},find:function(w,O,D){var k,E,P,V,I,T=0,M=c.length;for(null==D?D=1/0:D*=D,T=0;T<M;++T)(P=(k=w-(V=c[T]).x)*k+(E=O-V.y)*E)<D&&(I=V,D=P);return I},on:function(w,O){return arguments.length>1?(v.on(w,O),a):v.on(w)}}}function $Ze(){var c,a,l,h,f,d=Ho(-30),p=1,g=1/0,m=.81;function v(C){var x,w=c.length,O=BM(c,BZe,VZe).visitAfter(_);for(h=C,x=0;x<w;++x)a=c[x],O.visit(b)}function y(){if(c){var C,w,x=c.length;for(f=new Array(x),C=0;C<x;++C)f[(w=c[C]).index]=+d(w,C,c)}}function _(C){var w,O,T,M,k,x=0,D=0;if(C.length){for(T=M=k=0;k<4;++k)(w=C[k])&&(O=Math.abs(w.value))&&(x+=w.value,D+=O,T+=O*w.x,M+=O*w.y);C.x=T/D,C.y=M/D}else{(w=C).x=w.data.x,w.y=w.data.y;do{x+=f[w.data.index]}while(w=w.next)}C.value=x}function b(C,x,w,O){if(!C.value)return!0;var D=C.x-a.x,T=C.y-a.y,M=O-x,k=D*D+T*T;if(M*M/m<k)return k<g&&(0===D&&(k+=(D=lg(l))*D),0===T&&(k+=(T=lg(l))*T),k<p&&(k=Math.sqrt(p*k)),a.vx+=D*C.value*h/k,a.vy+=T*C.value*h/k),!0;if(!(C.length||k>=g)){(C.data!==a||C.next)&&(0===D&&(k+=(D=lg(l))*D),0===T&&(k+=(T=lg(l))*T),k<p&&(k=Math.sqrt(p*k)));do{C.data!==a&&(a.vx+=D*(M=f[C.data.index]*h/k),a.vy+=T*M)}while(C=C.next)}}return v.initialize=function(C,x){c=C,l=x,y()},v.strength=function(C){return arguments.length?(d="function"==typeof C?C:Ho(+C),y(),v):d},v.distanceMin=function(C){return arguments.length?(p=C*C,v):Math.sqrt(p)},v.distanceMax=function(C){return arguments.length?(g=C*C,v):Math.sqrt(g)},v.theta=function(C){return arguments.length?(m=C*C,v):Math.sqrt(m)},v}function WZe(c,a,l){var h,f,p,d=Ho(.1);function g(v){for(var y=0,_=h.length;y<_;++y){var b=h[y],C=b.x-a||1e-6,x=b.y-l||1e-6,w=Math.sqrt(C*C+x*x),O=(p[y]-w)*f[y]*v/w;b.vx+=C*O,b.vy+=x*O}}function m(){if(h){var v,y=h.length;for(f=new Array(y),p=new Array(y),v=0;v<y;++v)p[v]=+c(h[v],v,h),f[v]=isNaN(p[v])?0:+d(h[v],v,h)}}return"function"!=typeof c&&(c=Ho(+c)),null==a&&(a=0),null==l&&(l=0),g.initialize=function(v){h=v,m()},g.strength=function(v){return arguments.length?(d="function"==typeof v?v:Ho(+v),m(),g):d},g.radius=function(v){return arguments.length?(c="function"==typeof v?v:Ho(+v),m(),g):c},g.x=function(v){return arguments.length?(a=+v,g):a},g.y=function(v){return arguments.length?(l=+v,g):l},g}function GZe(c){var l,h,d,a=Ho(.1);function f(g){for(var y,m=0,v=l.length;m<v;++m)(y=l[m]).vx+=(d[m]-y.x)*h[m]*g}function p(){if(l){var g,m=l.length;for(h=new Array(m),d=new Array(m),g=0;g<m;++g)h[g]=isNaN(d[g]=+c(l[g],g,l))?0:+a(l[g],g,l)}}return"function"!=typeof c&&(c=Ho(null==c?0:+c)),f.initialize=function(g){l=g,p()},f.strength=function(g){return arguments.length?(a="function"==typeof g?g:Ho(+g),p(),f):a},f.x=function(g){return arguments.length?(c="function"==typeof g?g:Ho(+g),p(),f):c},f}function QZe(c){var l,h,d,a=Ho(.1);function f(g){for(var y,m=0,v=l.length;m<v;++m)(y=l[m]).vy+=(d[m]-y.y)*h[m]*g}function p(){if(l){var g,m=l.length;for(h=new Array(m),d=new Array(m),g=0;g<m;++g)h[g]=isNaN(d[g]=+c(l[g],g,l))?0:+a(l[g],g,l)}}return"function"!=typeof c&&(c=Ho(null==c?0:+c)),f.initialize=function(g){l=g,p()},f.strength=function(g){return arguments.length?(a="function"==typeof g?g:Ho(+g),p(),f):a},f.y=function(g){return arguments.length?(c="function"==typeof g?g:Ho(+g),p(),f):c},f}function VM(c,a){if((l=(c=a?c.toExponential(a-1):c.toExponential()).indexOf("e"))<0)return null;var l,h=c.slice(0,l);return[h.length>1?h[0]+h.slice(2):h,+c.slice(l+1)]}function X_(c){return(c=VM(Math.abs(c)))?c[1]:NaN}var fle,XZe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y_(c){if(!(a=XZe.exec(c)))throw new Error("invalid format: "+c);var a;return new UM({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}function UM(c){this.fill=void 0===c.fill?" ":c.fill+"",this.align=void 0===c.align?">":c.align+"",this.sign=void 0===c.sign?"-":c.sign+"",this.symbol=void 0===c.symbol?"":c.symbol+"",this.zero=!!c.zero,this.width=void 0===c.width?void 0:+c.width,this.comma=!!c.comma,this.precision=void 0===c.precision?void 0:+c.precision,this.trim=!!c.trim,this.type=void 0===c.type?"":c.type+""}function ple(c,a){var l=VM(c,a);if(!l)return c+"";var h=l[0],d=l[1];return d<0?"0."+new Array(-d).join("0")+h:h.length>d+1?h.slice(0,d+1)+"."+h.slice(d+1):h+new Array(d-h.length+2).join("0")}Y_.prototype=UM.prototype,UM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const gle={"%":(c,a)=>(100*c).toFixed(a),b:c=>Math.round(c).toString(2),c:c=>c+"",d:function jZe(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:(c,a)=>c.toExponential(a),f:(c,a)=>c.toFixed(a),g:(c,a)=>c.toPrecision(a),o:c=>Math.round(c).toString(8),p:(c,a)=>ple(100*c,a),r:ple,s:function KZe(c,a){var l=VM(c,a);if(!l)return c+"";var h=l[0],d=l[1],f=d-(fle=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,p=h.length;return f===p?h:f>p?h+new Array(f-p+1).join("0"):f>0?h.slice(0,f)+"."+h.slice(f):"0."+new Array(1-f).join("0")+VM(c,Math.max(0,a+f-1))[0]},X:c=>Math.round(c).toString(16).toUpperCase(),x:c=>Math.round(c).toString(16)};function mle(c){return c}var zM,HM,RV,vle=Array.prototype.map,yle=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function _le(c){var a=void 0===c.grouping||void 0===c.thousands?mle:function ZZe(c,a){return function(l,h){for(var d=l.length,f=[],p=0,g=c[0],m=0;d>0&&g>0&&(m+g+1>h&&(g=Math.max(1,h-m)),f.push(l.substring(d-=g,d+g)),!((m+=g+1)>h));)g=c[p=(p+1)%c.length];return f.reverse().join(a)}}(vle.call(c.grouping,Number),c.thousands+""),l=void 0===c.currency?"":c.currency[0]+"",h=void 0===c.currency?"":c.currency[1]+"",d=void 0===c.decimal?".":c.decimal+"",f=void 0===c.numerals?mle:function qZe(c){return function(a){return a.replace(/[0-9]/g,function(l){return c[+l]})}}(vle.call(c.numerals,String)),p=void 0===c.percent?"%":c.percent+"",g=void 0===c.minus?"\u2212":c.minus+"",m=void 0===c.nan?"NaN":c.nan+"";function v(_){var b=(_=Y_(_)).fill,C=_.align,x=_.sign,w=_.symbol,O=_.zero,D=_.width,T=_.comma,M=_.precision,k=_.trim,E=_.type;"n"===E?(T=!0,E="g"):gle[E]||(void 0===M&&(M=12),k=!0,E="g"),(O||"0"===b&&"="===C)&&(O=!0,b="0",C="=");var P="$"===w?l:"#"===w&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",V="$"===w?h:/[%p]/.test(E)?p:"",I=gle[E],U=/[defgprs%]/.test(E);function $(H){var B,G,W,J=P,ee=V;if("c"===E)ee=I(H)+ee,H="";else{var j=(H=+H)<0||1/H<0;if(H=isNaN(H)?m:I(Math.abs(H),M),k&&(H=function YZe(c){e:for(var d,a=c.length,l=1,h=-1;l<a;++l)switch(c[l]){case".":h=d=l;break;case"0":0===h&&(h=l),d=l;break;default:if(!+c[l])break e;h>0&&(h=0)}return h>0?c.slice(0,h)+c.slice(d+1):c}(H)),j&&0==+H&&"+"!==x&&(j=!1),J=(j?"("===x?x:g:"-"===x||"("===x?"":x)+J,ee=("s"===E?yle[8+fle/3]:"")+ee+(j&&"("===x?")":""),U)for(B=-1,G=H.length;++B<G;)if(48>(W=H.charCodeAt(B))||W>57){ee=(46===W?d+H.slice(B+1):H.slice(B))+ee,H=H.slice(0,B);break}}T&&!O&&(H=a(H,1/0));var Q=J.length+H.length+ee.length,X=Q<D?new Array(D-Q+1).join(b):"";switch(T&&O&&(H=a(X+H,X.length?D-ee.length:1/0),X=""),C){case"<":H=J+H+ee+X;break;case"=":H=J+X+H+ee;break;case"^":H=X.slice(0,Q=X.length>>1)+J+H+ee+X.slice(Q);break;default:H=X+J+H+ee}return f(H)}return M=void 0===M?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M)),$.toString=function(){return _+""},$}return{format:v,formatPrefix:function y(_,b){var C=v(((_=Y_(_)).type="f",_)),x=3*Math.max(-8,Math.min(8,Math.floor(X_(b)/3))),w=Math.pow(10,-x),O=yle[8+x/3];return function(D){return C(w*D)+O}}}}function ble(c){return zM=_le(c),HM=zM.format,RV=zM.formatPrefix,zM}function Cle(c){return Math.max(0,-X_(Math.abs(c)))}function Sle(c,a){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(X_(a)/3)))-X_(Math.abs(c)))}function xle(c,a){return c=Math.abs(c),a=Math.abs(a)-c,Math.max(0,X_(a)-X_(c))+1}ble({thousands:",",grouping:[3],currency:["$",""]});var Jn=1e-6,Xx=1e-12,ir=Math.PI,Xs=ir/2,$M=ir/4,gl=2*ir,Jr=180/ir,ei=ir/180,dr=Math.abs,K_=Math.atan,ml=Math.atan2,$n=Math.cos,WM=Math.ceil,wle=Math.exp,FV=(Math,Math.hypot),GM=Math.log,LV=Math.pow,kn=Math.sin,bu=Math.sign||function(c){return c>0?1:c<0?-1:0},ia=Math.sqrt,NV=Math.tan;function Ole(c){return c>1?0:c<-1?ir:Math.acos(c)}function vl(c){return c>1?Xs:c<-1?-Xs:Math.asin(c)}function Dle(c){return(c=kn(c/2))*c}function Rs(){}function QM(c,a){c&&kle.hasOwnProperty(c.type)&&kle[c.type](c,a)}var Tle={Feature:function(c,a){QM(c.geometry,a)},FeatureCollection:function(c,a){for(var l=c.features,h=-1,d=l.length;++h<d;)QM(l[h].geometry,a)}},kle={Sphere:function(c,a){a.sphere()},Point:function(c,a){a.point((c=c.coordinates)[0],c[1],c[2])},MultiPoint:function(c,a){for(var l=c.coordinates,h=-1,d=l.length;++h<d;)a.point((c=l[h])[0],c[1],c[2])},LineString:function(c,a){BV(c.coordinates,a,0)},MultiLineString:function(c,a){for(var l=c.coordinates,h=-1,d=l.length;++h<d;)BV(l[h],a,0)},Polygon:function(c,a){Mle(c.coordinates,a)},MultiPolygon:function(c,a){for(var l=c.coordinates,h=-1,d=l.length;++h<d;)Mle(l[h],a)},GeometryCollection:function(c,a){for(var l=c.geometries,h=-1,d=l.length;++h<d;)QM(l[h],a)}};function BV(c,a,l){var f,h=-1,d=c.length-l;for(a.lineStart();++h<d;)a.point((f=c[h])[0],f[1],f[2]);a.lineEnd()}function Mle(c,a){var l=-1,h=c.length;for(a.polygonStart();++l<h;)BV(c[l],a,1);a.polygonEnd()}function _h(c,a){c&&Tle.hasOwnProperty(c.type)?Tle[c.type](c,a):QM(c,a)}var Ele,Ale,VV,UV,zV,jM=new Uo,ZM=new Uo,Od={point:Rs,lineStart:Rs,lineEnd:Rs,polygonStart:function(){jM=new Uo,Od.lineStart=JZe,Od.lineEnd=eqe},polygonEnd:function(){var c=+jM;ZM.add(c<0?gl+c:c),this.lineStart=this.lineEnd=this.point=Rs},sphere:function(){ZM.add(gl)}};function JZe(){Od.point=tqe}function eqe(){Ile(Ele,Ale)}function tqe(c,a){Od.point=Ile,Ele=c,Ale=a,VV=c*=ei,UV=$n(a=(a*=ei)/2+$M),zV=kn(a)}function Ile(c,a){var l=(c*=ei)-VV,h=l>=0?1:-1,d=h*l,f=$n(a=(a*=ei)/2+$M),p=kn(a),g=zV*p,m=UV*f+g*$n(d),v=g*h*kn(d);jM.add(ml(v,m)),VV=c,UV=f,zV=p}function nqe(c){return ZM=new Uo,_h(c,Od),2*ZM}function qM(c){return[ml(c[1],c[0]),vl(c[2])]}function T0(c){var a=c[0],l=c[1],h=$n(l);return[h*$n(a),h*kn(a),kn(l)]}function XM(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function J_(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*a[1]-c[1]*a[0]]}function HV(c,a){c[0]+=a[0],c[1]+=a[1],c[2]+=a[2]}function YM(c,a){return[c[0]*a,c[1]*a,c[2]*a]}function KM(c){var a=ia(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a,c[1]/=a,c[2]/=a}var Fs,Jl,Ys,Ic,k0,Ple,Rle,e1,Yx,cg,Zf,qf={point:$V,lineStart:Lle,lineEnd:Nle,polygonStart:function(){qf.point=Ble,qf.lineStart=iqe,qf.lineEnd=rqe,Yx=new Uo,Od.polygonStart()},polygonEnd:function(){Od.polygonEnd(),qf.point=$V,qf.lineStart=Lle,qf.lineEnd=Nle,jM<0?(Fs=-(Ys=180),Jl=-(Ic=90)):Yx>Jn?Ic=90:Yx<-Jn&&(Jl=-90),Zf[0]=Fs,Zf[1]=Ys},sphere:function(){Fs=-(Ys=180),Jl=-(Ic=90)}};function $V(c,a){cg.push(Zf=[Fs=c,Ys=c]),a<Jl&&(Jl=a),a>Ic&&(Ic=a)}function Fle(c,a){var l=T0([c*ei,a*ei]);if(e1){var h=J_(e1,l),f=J_([h[1],-h[0],0],h);KM(f),f=qM(f);var v,p=c-k0,g=p>0?1:-1,m=f[0]*Jr*g,y=dr(p)>180;y^(g*k0<m&&m<g*c)?(v=f[1]*Jr)>Ic&&(Ic=v):y^(g*k0<(m=(m+360)%360-180)&&m<g*c)?(v=-f[1]*Jr)<Jl&&(Jl=v):(a<Jl&&(Jl=a),a>Ic&&(Ic=a)),y?c<k0?Pc(Fs,c)>Pc(Fs,Ys)&&(Ys=c):Pc(c,Ys)>Pc(Fs,Ys)&&(Fs=c):Ys>=Fs?(c<Fs&&(Fs=c),c>Ys&&(Ys=c)):c>k0?Pc(Fs,c)>Pc(Fs,Ys)&&(Ys=c):Pc(c,Ys)>Pc(Fs,Ys)&&(Fs=c)}else cg.push(Zf=[Fs=c,Ys=c]);a<Jl&&(Jl=a),a>Ic&&(Ic=a),e1=l,k0=c}function Lle(){qf.point=Fle}function Nle(){Zf[0]=Fs,Zf[1]=Ys,qf.point=$V,e1=null}function Ble(c,a){if(e1){var l=c-k0;Yx.add(dr(l)>180?l+(l>0?360:-360):l)}else Ple=c,Rle=a;Od.point(c,a),Fle(c,a)}function iqe(){Od.lineStart()}function rqe(){Ble(Ple,Rle),Od.lineEnd(),dr(Yx)>Jn&&(Fs=-(Ys=180)),Zf[0]=Fs,Zf[1]=Ys,e1=null}function Pc(c,a){return(a-=c)<0?a+360:a}function sqe(c,a){return c[0]-a[0]}function Vle(c,a){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}function oqe(c){var a,l,h,d,f,p,g;if(Ic=Ys=-(Fs=Jl=1/0),cg=[],_h(c,qf),l=cg.length){for(cg.sort(sqe),a=1,f=[h=cg[0]];a<l;++a)Vle(h,(d=cg[a])[0])||Vle(h,d[1])?(Pc(h[0],d[1])>Pc(h[0],h[1])&&(h[1]=d[1]),Pc(d[0],h[1])>Pc(h[0],h[1])&&(h[0]=d[0])):f.push(h=d);for(p=-1/0,a=0,h=f[l=f.length-1];a<=l;h=d,++a)(g=Pc(h[1],(d=f[a])[0]))>p&&(p=g,Fs=d[0],Ys=h[1])}return cg=Zf=null,Fs===1/0||Jl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Fs,Jl],[Ys,Ic]]}var Kx,JM,e4,t4,n4,i4,r4,s4,WV,GV,QV,Ule,zle,yl,_l,bl,bh={sphere:Rs,point:jV,lineStart:Hle,lineEnd:$le,polygonStart:function(){bh.lineStart=cqe,bh.lineEnd=uqe},polygonEnd:function(){bh.lineStart=Hle,bh.lineEnd=$le}};function jV(c,a){c*=ei;var l=$n(a*=ei);Jx(l*$n(c),l*kn(c),kn(a))}function Jx(c,a,l){++Kx,e4+=(c-e4)/Kx,t4+=(a-t4)/Kx,n4+=(l-n4)/Kx}function Hle(){bh.point=aqe}function aqe(c,a){c*=ei;var l=$n(a*=ei);yl=l*$n(c),_l=l*kn(c),bl=kn(a),bh.point=lqe,Jx(yl,_l,bl)}function lqe(c,a){c*=ei;var l=$n(a*=ei),h=l*$n(c),d=l*kn(c),f=kn(a),p=ml(ia((p=_l*f-bl*d)*p+(p=bl*h-yl*f)*p+(p=yl*d-_l*h)*p),yl*h+_l*d+bl*f);JM+=p,i4+=p*(yl+(yl=h)),r4+=p*(_l+(_l=d)),s4+=p*(bl+(bl=f)),Jx(yl,_l,bl)}function $le(){bh.point=jV}function cqe(){bh.point=hqe}function uqe(){Wle(Ule,zle),bh.point=jV}function hqe(c,a){Ule=c,zle=a,c*=ei,a*=ei,bh.point=Wle;var l=$n(a);yl=l*$n(c),_l=l*kn(c),bl=kn(a),Jx(yl,_l,bl)}function Wle(c,a){c*=ei;var l=$n(a*=ei),h=l*$n(c),d=l*kn(c),f=kn(a),p=_l*f-bl*d,g=bl*h-yl*f,m=yl*d-_l*h,v=FV(p,g,m),y=vl(v),_=v&&-y/v;WV.add(_*p),GV.add(_*g),QV.add(_*m),JM+=y,i4+=y*(yl+(yl=h)),r4+=y*(_l+(_l=d)),s4+=y*(bl+(bl=f)),Jx(yl,_l,bl)}function dqe(c){Kx=JM=e4=t4=n4=i4=r4=s4=0,WV=new Uo,GV=new Uo,QV=new Uo,_h(c,bh);var a=+WV,l=+GV,h=+QV,d=FV(a,l,h);return d<Xx&&(a=i4,l=r4,h=s4,JM<Jn&&(a=e4,l=t4,h=n4),(d=FV(a,l,h))<Xx)?[NaN,NaN]:[ml(l,a)*Jr,vl(h/d)*Jr]}function t1(c){return function(){return c}}function ZV(c,a){function l(h,d){return h=c(h,d),a(h[0],h[1])}return c.invert&&a.invert&&(l.invert=function(h,d){return(h=a.invert(h,d))&&c.invert(h[0],h[1])}),l}function qV(c,a){return dr(c)>ir&&(c-=Math.round(c/gl)*gl),[c,a]}function XV(c,a,l){return(c%=gl)?a||l?ZV(Qle(c),jle(a,l)):Qle(c):a||l?jle(a,l):qV}function Gle(c){return function(a,l){return dr(a+=c)>ir&&(a-=Math.round(a/gl)*gl),[a,l]}}function Qle(c){var a=Gle(c);return a.invert=Gle(-c),a}function jle(c,a){var l=$n(c),h=kn(c),d=$n(a),f=kn(a);function p(g,m){var v=$n(m),y=$n(g)*v,_=kn(g)*v,b=kn(m),C=b*l+y*h;return[ml(_*d-C*f,y*l-b*h),vl(C*d+_*f)]}return p.invert=function(g,m){var v=$n(m),y=$n(g)*v,_=kn(g)*v,b=kn(m),C=b*d-_*f;return[ml(_*d+b*f,y*l+C*h),vl(C*l-y*h)]},p}function Zle(c){function a(l){return(l=c(l[0]*ei,l[1]*ei))[0]*=Jr,l[1]*=Jr,l}return c=XV(c[0]*ei,c[1]*ei,c.length>2?c[2]*ei:0),a.invert=function(l){return(l=c.invert(l[0]*ei,l[1]*ei))[0]*=Jr,l[1]*=Jr,l},a}function qle(c,a,l,h,d,f){if(l){var p=$n(a),g=kn(a),m=h*l;null==d?(d=a+h*gl,f=a-m/2):(d=Xle(p,d),f=Xle(p,f),(h>0?d<f:d>f)&&(d+=h*gl));for(var v,y=d;h>0?y>f:y<f;y-=m)v=qM([p,-g*$n(y),-g*kn(y)]),c.point(v[0],v[1])}}function Xle(c,a){(a=T0(a))[0]-=c,KM(a);var l=Ole(-a[1]);return((-a[2]<0?-l:l)+gl-Jn)%gl}function fqe(){var h,d,c=t1([0,0]),a=t1(90),l=t1(6),f={point:function p(m,v){h.push(m=d(m,v)),m[0]*=Jr,m[1]*=Jr}};function g(){var m=c.apply(this,arguments),v=a.apply(this,arguments)*ei,y=l.apply(this,arguments)*ei;return h=[],d=XV(-m[0]*ei,-m[1]*ei,0).invert,qle(f,v,y,1),m={type:"Polygon",coordinates:[h]},h=d=null,m}return g.center=function(m){return arguments.length?(c="function"==typeof m?m:t1([+m[0],+m[1]]),g):c},g.radius=function(m){return arguments.length?(a="function"==typeof m?m:t1(+m),g):a},g.precision=function(m){return arguments.length?(l="function"==typeof m?m:t1(+m),g):l},g}function Yle(){var a,c=[];return{point:function(l,h,d){a.push([l,h,d])},lineStart:function(){c.push(a=[])},lineEnd:Rs,rejoin:function(){c.length>1&&c.push(c.pop().concat(c.shift()))},result:function(){var l=c;return c=[],a=null,l}}}function o4(c,a){return dr(c[0]-a[0])<Jn&&dr(c[1]-a[1])<Jn}function a4(c,a,l,h){this.x=c,this.z=a,this.o=l,this.e=h,this.v=!1,this.n=this.p=null}function Kle(c,a,l,h,d){var g,m,f=[],p=[];if(c.forEach(function(x){if(!((w=x.length-1)<=0)){var w,T,O=x[0],D=x[w];if(o4(O,D)){if(!O[2]&&!D[2]){for(d.lineStart(),g=0;g<w;++g)d.point((O=x[g])[0],O[1]);return void d.lineEnd()}D[0]+=2*Jn}f.push(T=new a4(O,x,null,!0)),p.push(T.o=new a4(O,null,T,!1)),f.push(T=new a4(D,x,null,!1)),p.push(T.o=new a4(D,null,T,!0))}}),f.length){for(p.sort(a),Jle(f),Jle(p),g=0,m=p.length;g<m;++g)p[g].e=l=!l;for(var y,_,v=f[0];;){for(var b=v,C=!0;b.v;)if((b=b.n)===v)return;y=b.z,d.lineStart();do{if(b.v=b.o.v=!0,b.e){if(C)for(g=0,m=y.length;g<m;++g)d.point((_=y[g])[0],_[1]);else h(b.x,b.n.x,1,d);b=b.n}else{if(C)for(g=(y=b.p.z).length-1;g>=0;--g)d.point((_=y[g])[0],_[1]);else h(b.x,b.p.x,-1,d);b=b.p}y=(b=b.o).z,C=!C}while(!b.v);d.lineEnd()}}}function Jle(c){if(a=c.length){for(var a,d,l=0,h=c[0];++l<a;)h.n=d=c[l],d.p=h,h=d;h.n=d=c[0],d.p=h}}function YV(c){return dr(c[0])<=ir?c[0]:bu(c[0])*((dr(c[0])+ir)%gl-ir)}function ece(c,a){var l=YV(a),h=a[1],d=kn(h),f=[kn(l),-$n(l),0],p=0,g=0,m=new Uo;1===d?h=Xs+Jn:-1===d&&(h=-Xs-Jn);for(var v=0,y=c.length;v<y;++v)if(b=(_=c[v]).length)for(var _,b,C=_[b-1],x=YV(C),w=C[1]/2+$M,O=kn(w),D=$n(w),T=0;T<b;++T,x=k,O=P,D=V,C=M){var M=_[T],k=YV(M),E=M[1]/2+$M,P=kn(E),V=$n(E),I=k-x,U=I>=0?1:-1,$=U*I,H=$>ir,J=O*P;if(m.add(ml(J*U*kn($),D*V+J*$n($))),p+=H?I+U*gl:I,H^x>=l^k>=l){var ee=J_(T0(C),T0(M));KM(ee);var B=J_(f,ee);KM(B);var G=(H^I>=0?-1:1)*vl(B[2]);(h>G||h===G&&(ee[0]||ee[1]))&&(g+=H^I>=0?1:-1)}}return(p<-Jn||p<Jn&&m<-Xx)^1&g}function tce(c,a,l,h){return function(d){var v,y,_,f=a(d),p=Yle(),g=a(p),m=!1,b={point:C,lineStart:w,lineEnd:O,polygonStart:function(){b.point=D,b.lineStart=T,b.lineEnd=M,y=[],v=[]},polygonEnd:function(){b.point=C,b.lineStart=w,b.lineEnd=O,y=r8(y);var k=ece(v,h);y.length?(m||(d.polygonStart(),m=!0),Kle(y,gqe,k,l,d)):k&&(m||(d.polygonStart(),m=!0),d.lineStart(),l(null,null,1,d),d.lineEnd()),m&&(d.polygonEnd(),m=!1),y=v=null},sphere:function(){d.polygonStart(),d.lineStart(),l(null,null,1,d),d.lineEnd(),d.polygonEnd()}};function C(k,E){c(k,E)&&d.point(k,E)}function x(k,E){f.point(k,E)}function w(){b.point=x,f.lineStart()}function O(){b.point=C,f.lineEnd()}function D(k,E){_.push([k,E]),g.point(k,E)}function T(){g.lineStart(),_=[]}function M(){D(_[0][0],_[0][1]),g.lineEnd();var P,I,U,$,k=g.clean(),E=p.result(),V=E.length;if(_.pop(),v.push(_),_=null,V){if(1&k){if((I=(U=E[0]).length-1)>0){for(m||(d.polygonStart(),m=!0),d.lineStart(),P=0;P<I;++P)d.point(($=U[P])[0],$[1]);d.lineEnd()}return}V>1&&2&k&&E.push(E.pop().concat(E.shift())),y.push(E.filter(pqe))}}return b}}function pqe(c){return c.length>1}function gqe(c,a){return((c=c.x)[0]<0?c[1]-Xs-Jn:Xs-c[1])-((a=a.x)[0]<0?a[1]-Xs-Jn:Xs-a[1])}qV.invert=qV;const KV=tce(function(){return!0},function mqe(c){var d,a=NaN,l=NaN,h=NaN;return{lineStart:function(){c.lineStart(),d=1},point:function(f,p){var g=f>0?ir:-ir,m=dr(f-a);dr(m-ir)<Jn?(c.point(a,l=(l+p)/2>0?Xs:-Xs),c.point(h,l),c.lineEnd(),c.lineStart(),c.point(g,l),c.point(f,l),d=0):h!==g&&m>=ir&&(dr(a-h)<Jn&&(a-=h*Jn),dr(f-g)<Jn&&(f-=g*Jn),l=function vqe(c,a,l,h){var d,f,p=kn(c-l);return dr(p)>Jn?K_((kn(a)*(f=$n(h))*kn(l)-kn(h)*(d=$n(a))*kn(c))/(d*f*p)):(a+h)/2}(a,l,f,p),c.point(h,l),c.lineEnd(),c.lineStart(),c.point(g,l),d=0),c.point(a=f,l=p),h=g},lineEnd:function(){c.lineEnd(),a=l=NaN},clean:function(){return 2-d}}},function yqe(c,a,l,h){var d;if(null==c)h.point(-ir,d=l*Xs),h.point(0,d),h.point(ir,d),h.point(ir,0),h.point(ir,-d),h.point(0,-d),h.point(-ir,-d),h.point(-ir,0),h.point(-ir,d);else if(dr(c[0]-a[0])>Jn){var f=c[0]<a[0]?ir:-ir;h.point(-f,d=l*f/2),h.point(0,d),h.point(f,d)}else h.point(a[0],a[1])},[-ir,-Xs]);function nce(c){var a=$n(c),l=6*ei,h=a>0,d=dr(a)>Jn;function p(y,_){return $n(y)*$n(_)>a}function m(y,_,b){var w=[1,0,0],O=J_(T0(y),T0(_)),D=XM(O,O),T=O[0],M=D-T*T;if(!M)return!b&&y;var k=a*D/M,E=-a*T/M,P=J_(w,O),V=YM(w,k);HV(V,YM(O,E));var U=P,$=XM(V,U),H=XM(U,U),J=$*$-H*(XM(V,V)-1);if(!(J<0)){var ee=ia(J),B=YM(U,(-$-ee)/H);if(HV(B,V),B=qM(B),!b)return B;var X,G=y[0],W=_[0],j=y[1],Q=_[1];W<G&&(X=G,G=W,W=X);var Y=W-G,ne=dr(Y-ir)<Jn;if(!ne&&Q<j&&(X=j,j=Q,Q=X),ne||Y<Jn?ne?j+Q>0^B[1]<(dr(B[0]-G)<Jn?j:Q):j<=B[1]&&B[1]<=Q:Y>ir^(G<=B[0]&&B[0]<=W)){var fe=YM(U,(-$+ee)/H);return HV(fe,V),[B,qM(fe)]}}}function v(y,_){var b=h?c:ir-c,C=0;return y<-b?C|=1:y>b&&(C|=2),_<-b?C|=4:_>b&&(C|=8),C}return tce(p,function g(y){var _,b,C,x,w;return{lineStart:function(){x=C=!1,w=1},point:function(O,D){var M,T=[O,D],k=p(O,D),E=h?k?0:v(O,D):k?v(O+(O<0?ir:-ir),D):0;if(!_&&(x=C=k)&&y.lineStart(),k!==C&&(!(M=m(_,T))||o4(_,M)||o4(T,M))&&(T[2]=1),k!==C)w=0,k?(y.lineStart(),M=m(T,_),y.point(M[0],M[1])):(M=m(_,T),y.point(M[0],M[1],2),y.lineEnd()),_=M;else if(d&&_&&h^k){var P;!(E&b)&&(P=m(T,_,!0))&&(w=0,h?(y.lineStart(),y.point(P[0][0],P[0][1]),y.point(P[1][0],P[1][1]),y.lineEnd()):(y.point(P[1][0],P[1][1]),y.lineEnd(),y.lineStart(),y.point(P[0][0],P[0][1],3)))}k&&(!_||!o4(_,T))&&y.point(T[0],T[1]),_=T,C=k,b=E},lineEnd:function(){C&&y.lineEnd(),_=null},clean:function(){return w|(x&&C)<<1}}},function f(y,_,b,C){qle(C,c,l,b,y,_)},h?[0,-c]:[-ir,c-ir])}var ew=1e9,l4=-ew;function c4(c,a,l,h){function d(v,y){return c<=v&&v<=l&&a<=y&&y<=h}function f(v,y,_,b){var C=0,x=0;if(null==v||(C=p(v,_))!==(x=p(y,_))||m(v,y)<0^_>0)do{b.point(0===C||3===C?c:l,C>1?h:a)}while((C=(C+_+4)%4)!==x);else b.point(y[0],y[1])}function p(v,y){return dr(v[0]-c)<Jn?y>0?0:3:dr(v[0]-l)<Jn?y>0?2:1:dr(v[1]-a)<Jn?y>0?1:0:y>0?3:2}function g(v,y){return m(v.x,y.x)}function m(v,y){var _=p(v,1),b=p(y,1);return _!==b?_-b:0===_?y[1]-v[1]:1===_?v[0]-y[0]:2===_?v[1]-y[1]:y[0]-v[0]}return function(v){var b,C,x,w,O,D,T,M,k,E,P,y=v,_=Yle(),V={point:I,lineStart:function J(){V.point=B,C&&C.push(x=[]),E=!0,k=!1,T=M=NaN},lineEnd:function ee(){b&&(B(w,O),D&&k&&_.rejoin(),b.push(_.result())),V.point=I,k&&y.lineEnd()},polygonStart:function $(){y=_,b=[],C=[],P=!0},polygonEnd:function H(){var G=function U(){for(var G=0,W=0,j=C.length;W<j;++W)for(var re,fe,Q=C[W],X=1,Y=Q.length,ne=Q[0],de=ne[0],De=ne[1];X<Y;++X)re=de,fe=De,de=(ne=Q[X])[0],De=ne[1],fe<=h?De>h&&(de-re)*(h-fe)>(De-fe)*(c-re)&&++G:De<=h&&(de-re)*(h-fe)<(De-fe)*(c-re)&&--G;return G}(),W=P&&G,j=(b=r8(b)).length;(W||j)&&(v.polygonStart(),W&&(v.lineStart(),f(null,null,1,v),v.lineEnd()),j&&Kle(b,g,G,f,v),v.polygonEnd()),y=v,b=C=x=null}};function I(G,W){d(G,W)&&y.point(G,W)}function B(G,W){var j=d(G,W);if(C&&x.push([G,W]),E)w=G,O=W,D=j,E=!1,j&&(y.lineStart(),y.point(G,W));else if(j&&k)y.point(G,W);else{var Q=[T=Math.max(l4,Math.min(ew,T)),M=Math.max(l4,Math.min(ew,M))],X=[G=Math.max(l4,Math.min(ew,G)),W=Math.max(l4,Math.min(ew,W))];!function _qe(c,a,l,h,d,f){var x,p=c[0],g=c[1],y=0,_=1,b=a[0]-p,C=a[1]-g;if(x=l-p,b||!(x>0)){if(x/=b,b<0){if(x<y)return;x<_&&(_=x)}else if(b>0){if(x>_)return;x>y&&(y=x)}if(x=d-p,b||!(x<0)){if(x/=b,b<0){if(x>_)return;x>y&&(y=x)}else if(b>0){if(x<y)return;x<_&&(_=x)}if(x=h-g,C||!(x>0)){if(x/=C,C<0){if(x<y)return;x<_&&(_=x)}else if(C>0){if(x>_)return;x>y&&(y=x)}if(x=f-g,C||!(x<0)){if(x/=C,C<0){if(x>_)return;x>y&&(y=x)}else if(C>0){if(x<y)return;x<_&&(_=x)}return y>0&&(c[0]=p+y*b,c[1]=g+y*C),_<1&&(a[0]=p+_*b,a[1]=g+_*C),!0}}}}}(Q,X,c,a,l,h)?j&&(y.lineStart(),y.point(G,W),P=!1):(k||(y.lineStart(),y.point(Q[0],Q[1])),y.point(X[0],X[1]),j||y.lineEnd(),P=!1)}T=G,M=W,k=j}return V}}function bqe(){var d,f,p,c=0,a=0,l=960,h=500;return p={stream:function(g){return d&&f===g?d:d=c4(c,a,l,h)(f=g)},extent:function(g){return arguments.length?(c=+g[0][0],a=+g[0][1],l=+g[1][0],h=+g[1][1],d=f=null,p):[[c,a],[l,h]]}}}var JV,e6,u4,h4,n1={sphere:Rs,point:Rs,lineStart:function Cqe(){n1.point=xqe,n1.lineEnd=Sqe},lineEnd:Rs,polygonStart:Rs,polygonEnd:Rs};function Sqe(){n1.point=n1.lineEnd=Rs}function xqe(c,a){e6=c*=ei,u4=kn(a*=ei),h4=$n(a),n1.point=wqe}function wqe(c,a){c*=ei;var l=kn(a*=ei),h=$n(a),d=dr(c-e6),f=$n(d),g=h*kn(d),m=h4*l-u4*h*f,v=u4*l+h4*h*f;JV.add(ml(ia(g*g+m*m),v)),e6=c,u4=l,h4=h}function ice(c){return JV=new Uo,_h(c,n1),+JV}var t6=[null,null],Oqe={type:"LineString",coordinates:t6};function d4(c,a){return t6[0]=c,t6[1]=a,ice(Oqe)}var rce={Feature:function(c,a){return f4(c.geometry,a)},FeatureCollection:function(c,a){for(var l=c.features,h=-1,d=l.length;++h<d;)if(f4(l[h].geometry,a))return!0;return!1}},sce={Sphere:function(){return!0},Point:function(c,a){return oce(c.coordinates,a)},MultiPoint:function(c,a){for(var l=c.coordinates,h=-1,d=l.length;++h<d;)if(oce(l[h],a))return!0;return!1},LineString:function(c,a){return ace(c.coordinates,a)},MultiLineString:function(c,a){for(var l=c.coordinates,h=-1,d=l.length;++h<d;)if(ace(l[h],a))return!0;return!1},Polygon:function(c,a){return lce(c.coordinates,a)},MultiPolygon:function(c,a){for(var l=c.coordinates,h=-1,d=l.length;++h<d;)if(lce(l[h],a))return!0;return!1},GeometryCollection:function(c,a){for(var l=c.geometries,h=-1,d=l.length;++h<d;)if(f4(l[h],a))return!0;return!1}};function f4(c,a){return!(!c||!sce.hasOwnProperty(c.type))&&sce[c.type](c,a)}function oce(c,a){return 0===d4(c,a)}function ace(c,a){for(var l,h,d,f=0,p=c.length;f<p;f++){if(0===(h=d4(c[f],a))||f>0&&(d=d4(c[f],c[f-1]))>0&&l<=d&&h<=d&&(l+h-d)*(1-Math.pow((l-h)/d,2))<Xx*d)return!0;l=h}return!1}function lce(c,a){return!!ece(c.map(Dqe),cce(a))}function Dqe(c){return(c=c.map(cce)).pop(),c}function cce(c){return[c[0]*ei,c[1]*ei]}function Tqe(c,a){return(c&&rce.hasOwnProperty(c.type)?rce[c.type]:f4)(c,a)}function uce(c,a,l){var h=yu(c,a-Jn,l).concat(a);return function(d){return h.map(function(f){return[d,f]})}}function hce(c,a,l){var h=yu(c,a-Jn,l).concat(a);return function(d){return h.map(function(f){return[f,d]})}}function dce(){var c,a,l,h,d,f,p,g,b,C,x,w,m=10,v=m,y=90,_=360,O=2.5;function D(){return{type:"MultiLineString",coordinates:T()}}function T(){return yu(WM(h/y)*y,l,y).map(x).concat(yu(WM(g/_)*_,p,_).map(w)).concat(yu(WM(a/m)*m,c,m).filter(function(M){return dr(M%y)>Jn}).map(b)).concat(yu(WM(f/v)*v,d,v).filter(function(M){return dr(M%_)>Jn}).map(C))}return D.lines=function(){return T().map(function(M){return{type:"LineString",coordinates:M}})},D.outline=function(){return{type:"Polygon",coordinates:[x(h).concat(w(p).slice(1),x(l).reverse().slice(1),w(g).reverse().slice(1))]}},D.extent=function(M){return arguments.length?D.extentMajor(M).extentMinor(M):D.extentMinor()},D.extentMajor=function(M){return arguments.length?(g=+M[0][1],p=+M[1][1],(h=+M[0][0])>(l=+M[1][0])&&(M=h,h=l,l=M),g>p&&(M=g,g=p,p=M),D.precision(O)):[[h,g],[l,p]]},D.extentMinor=function(M){return arguments.length?(f=+M[0][1],d=+M[1][1],(a=+M[0][0])>(c=+M[1][0])&&(M=a,a=c,c=M),f>d&&(M=f,f=d,d=M),D.precision(O)):[[a,f],[c,d]]},D.step=function(M){return arguments.length?D.stepMajor(M).stepMinor(M):D.stepMinor()},D.stepMajor=function(M){return arguments.length?(y=+M[0],_=+M[1],D):[y,_]},D.stepMinor=function(M){return arguments.length?(m=+M[0],v=+M[1],D):[m,v]},D.precision=function(M){return arguments.length?(O=+M,b=uce(f,d,90),C=hce(a,c,O),x=uce(g,p,90),w=hce(h,l,O),D):O},D.extentMajor([[-180,-90+Jn],[180,90-Jn]]).extentMinor([[-180,-80-Jn],[180,80+Jn]])}function kqe(){return dce()()}function Mqe(c,a){var l=c[0]*ei,h=c[1]*ei,d=a[0]*ei,f=a[1]*ei,p=$n(h),g=kn(h),m=$n(f),v=kn(f),y=p*$n(l),_=p*kn(l),b=m*$n(d),C=m*kn(d),x=2*vl(ia(Dle(f-h)+p*m*Dle(d-l))),w=kn(x),O=x?function(D){var T=kn(D*=x)/w,M=kn(x-D)/w,k=M*y+T*b,E=M*_+T*C,P=M*g+T*v;return[ml(E,k)*Jr,ml(P,ia(k*k+E*E))*Jr]}:function(){return[l*Jr,h*Jr]};return O.distance=x,O}const tw=c=>c;var fce,pce,r6,s6,n6=new Uo,i6=new Uo,ug={point:Rs,lineStart:Rs,lineEnd:Rs,polygonStart:function(){ug.lineStart=Eqe,ug.lineEnd=Iqe},polygonEnd:function(){ug.lineStart=ug.lineEnd=ug.point=Rs,n6.add(dr(i6)),i6=new Uo},result:function(){var c=n6/2;return n6=new Uo,c}};function Eqe(){ug.point=Aqe}function Aqe(c,a){ug.point=gce,fce=r6=c,pce=s6=a}function gce(c,a){i6.add(s6*c-r6*a),r6=c,s6=a}function Iqe(){gce(fce,pce)}const mce=ug;var r1=1/0,p4=r1,nw=-r1,g4=nw,Pqe={point:function Rqe(c,a){c<r1&&(r1=c),c>nw&&(nw=c),a<p4&&(p4=a),a>g4&&(g4=a)},lineStart:Rs,lineEnd:Rs,polygonStart:Rs,polygonEnd:Rs,result:function(){var c=[[r1,p4],[nw,g4]];return nw=g4=-(p4=r1=1/0),c}};const m4=Pqe;var vce,yce,Dd,Td,o6=0,a6=0,iw=0,v4=0,y4=0,s1=0,l6=0,c6=0,rw=0,Ch={point:M0,lineStart:_ce,lineEnd:bce,polygonStart:function(){Ch.lineStart=Nqe,Ch.lineEnd=Bqe},polygonEnd:function(){Ch.point=M0,Ch.lineStart=_ce,Ch.lineEnd=bce},result:function(){var c=rw?[l6/rw,c6/rw]:s1?[v4/s1,y4/s1]:iw?[o6/iw,a6/iw]:[NaN,NaN];return o6=a6=iw=v4=y4=s1=l6=c6=rw=0,c}};function M0(c,a){o6+=c,a6+=a,++iw}function _ce(){Ch.point=Fqe}function Fqe(c,a){Ch.point=Lqe,M0(Dd=c,Td=a)}function Lqe(c,a){var l=c-Dd,h=a-Td,d=ia(l*l+h*h);v4+=d*(Dd+c)/2,y4+=d*(Td+a)/2,s1+=d,M0(Dd=c,Td=a)}function bce(){Ch.point=M0}function Nqe(){Ch.point=Vqe}function Bqe(){Cce(vce,yce)}function Vqe(c,a){Ch.point=Cce,M0(vce=Dd=c,yce=Td=a)}function Cce(c,a){var l=c-Dd,h=a-Td,d=ia(l*l+h*h);v4+=d*(Dd+c)/2,y4+=d*(Td+a)/2,s1+=d,l6+=(d=Td*c-Dd*a)*(Dd+c),c6+=d*(Td+a),rw+=3*d,M0(Dd=c,Td=a)}const Sce=Ch;function xce(c){this._context=c}xce.prototype={_radius:4.5,pointRadius:function(c){return this._radius=c,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(c,a){switch(this._point){case 0:this._context.moveTo(c,a),this._point=1;break;case 1:this._context.lineTo(c,a);break;default:this._context.moveTo(c+this._radius,a),this._context.arc(c,a,this._radius,0,gl)}},result:Rs};var h6,wce,Oce,sw,ow,u6=new Uo,_4={point:Rs,lineStart:function(){_4.point=Uqe},lineEnd:function(){h6&&Dce(wce,Oce),_4.point=Rs},polygonStart:function(){h6=!0},polygonEnd:function(){h6=null},result:function(){var c=+u6;return u6=new Uo,c}};function Uqe(c,a){_4.point=Dce,wce=sw=c,Oce=ow=a}function Dce(c,a){u6.add(ia((sw-=c)*sw+(ow-=a)*ow)),sw=c,ow=a}const Tce=_4;let kce,b4,Mce,Ece;class Ace{constructor(a){this._append=null==a?Ice:function zqe(c){const a=Math.floor(c);if(!(a>=0))throw new RangeError(`invalid digits: ${c}`);if(a>15)return Ice;if(a!==kce){const l=10**a;kce=a,b4=function(d){let f=1;this._+=d[0];for(const p=d.length;f<p;++f)this._+=Math.round(arguments[f]*l)/l+d[f]}}return b4}(a),this._radius=4.5,this._=""}pointRadius(a){return this._radius=+a,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(a,l){switch(this._point){case 0:this._append`M${a},${l}`,this._point=1;break;case 1:this._append`L${a},${l}`;break;default:if(this._append`M${a},${l}`,this._radius!==Mce||this._append!==b4){const h=this._radius,d=this._;this._="",this._append`m0,${h}a${h},${h} 0 1,1 0,${-2*h}a${h},${h} 0 1,1 0,${2*h}z`,Mce=h,b4=this._append,Ece=this._,this._=d}this._+=Ece}}result(){const a=this._;return this._="",a.length?a:null}}function Ice(c){let a=1;this._+=c[0];for(const l=c.length;a<l;++a)this._+=arguments[a]+c[a]}function Hqe(c,a){let d,f,l=3,h=4.5;function p(g){return g&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),_h(g,d(f))),f.result()}return p.area=function(g){return _h(g,d(mce)),mce.result()},p.measure=function(g){return _h(g,d(Tce)),Tce.result()},p.bounds=function(g){return _h(g,d(m4)),m4.result()},p.centroid=function(g){return _h(g,d(Sce)),Sce.result()},p.projection=function(g){return arguments.length?(d=null==g?(c=null,tw):(c=g).stream,p):c},p.context=function(g){return arguments.length?(f=null==g?(a=null,new Ace(l)):new xce(a=g),"function"!=typeof h&&f.pointRadius(h),p):a},p.pointRadius=function(g){return arguments.length?(h="function"==typeof g?g:(f.pointRadius(+g),+g),p):h},p.digits=function(g){if(!arguments.length)return l;if(null==g)l=null;else{const m=Math.floor(g);if(!(m>=0))throw new RangeError(`invalid digits: ${g}`);l=m}return null===a&&(f=new Ace(l)),p},p.projection(c).digits(l).context(a)}function $qe(c){return{stream:aw(c)}}function aw(c){return function(a){var l=new d6;for(var h in c)l[h]=c[h];return l.stream=a,l}}function d6(){}function f6(c,a,l){var h=c.clipExtent&&c.clipExtent();return c.scale(150).translate([0,0]),null!=h&&c.clipExtent(null),_h(l,c.stream(m4)),a(m4.result()),null!=h&&c.clipExtent(h),c}function C4(c,a,l){return f6(c,function(h){var d=a[1][0]-a[0][0],f=a[1][1]-a[0][1],p=Math.min(d/(h[1][0]-h[0][0]),f/(h[1][1]-h[0][1])),g=+a[0][0]+(d-p*(h[1][0]+h[0][0]))/2,m=+a[0][1]+(f-p*(h[1][1]+h[0][1]))/2;c.scale(150*p).translate([g,m])},l)}function p6(c,a,l){return C4(c,[[0,0],a],l)}function g6(c,a,l){return f6(c,function(h){var d=+a,f=d/(h[1][0]-h[0][0]),p=(d-f*(h[1][0]+h[0][0]))/2,g=-f*h[0][1];c.scale(150*f).translate([p,g])},l)}function m6(c,a,l){return f6(c,function(h){var d=+a,f=d/(h[1][1]-h[0][1]),p=-f*h[0][0],g=(d-f*(h[1][1]+h[0][1]))/2;c.scale(150*f).translate([p,g])},l)}d6.prototype={constructor:d6,point:function(c,a){this.stream.point(c,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wqe=$n(30*ei);function Rce(c,a){return+a?function Qqe(c,a){function l(h,d,f,p,g,m,v,y,_,b,C,x,w,O){var D=v-h,T=y-d,M=D*D+T*T;if(M>4*a&&w--){var k=p+b,E=g+C,P=m+x,V=ia(k*k+E*E+P*P),I=vl(P/=V),U=dr(dr(P)-1)<Jn||dr(f-_)<Jn?(f+_)/2:ml(E,k),$=c(U,I),H=$[0],J=$[1],ee=H-h,B=J-d,G=T*ee-D*B;(G*G/M>a||dr((D*ee+T*B)/M-.5)>.3||p*b+g*C+m*x<Wqe)&&(l(h,d,f,p,g,m,H,J,U,k/=V,E/=V,P,w,O),O.point(H,J),l(H,J,U,k,E,P,v,y,_,b,C,x,w,O))}}return function(h){var d,f,p,g,m,v,y,_,b,C,x,w,O={point:D,lineStart:T,lineEnd:k,polygonStart:function(){h.polygonStart(),O.lineStart=E},polygonEnd:function(){h.polygonEnd(),O.lineStart=T}};function D(I,U){I=c(I,U),h.point(I[0],I[1])}function T(){_=NaN,O.point=M,h.lineStart()}function M(I,U){var $=T0([I,U]),H=c(I,U);l(_,b,y,C,x,w,_=H[0],b=H[1],y=I,C=$[0],x=$[1],w=$[2],16,h),h.point(_,b)}function k(){O.point=D,h.lineEnd()}function E(){T(),O.point=P,O.lineEnd=V}function P(I,U){M(d=I,U),f=_,p=b,g=C,m=x,v=w,O.point=M}function V(){l(_,b,y,C,x,w,f,p,d,g,m,v,16,h),O.lineEnd=k,k()}return O}}(c,a):function Gqe(c){return aw({point:function(a,l){a=c(a,l),this.stream.point(a[0],a[1])}})}(c)}var jqe=aw({point:function(c,a){this.stream.point(c*ei,a*ei)}});function Fce(c,a,l,h,d,f){if(!f)return function qqe(c,a,l,h,d){function f(p,g){return[a+c*(p*=h),l-c*(g*=d)]}return f.invert=function(p,g){return[(p-a)/c*h,(l-g)/c*d]},f}(c,a,l,h,d);var p=$n(f),g=kn(f),m=p*c,v=g*c,y=p/c,_=g/c,b=(g*l-p*a)/c,C=(g*a+p*l)/c;function x(w,O){return[m*(w*=h)-v*(O*=d)+a,l-v*w-m*O]}return x.invert=function(w,O){return[h*(y*w-_*O+b),d*(C-_*w-y*O)]},x}function kd(c){return v6(function(){return c})()}function v6(c){var a,y,D,T,M,P,V,I,U,$,l=150,h=480,d=250,f=0,p=0,g=0,m=0,v=0,_=0,b=1,C=1,x=null,w=KV,O=null,k=tw,E=.5;function H(G){return I(G[0]*ei,G[1]*ei)}function J(G){return(G=I.invert(G[0],G[1]))&&[G[0]*Jr,G[1]*Jr]}function ee(){var G=Fce(l,0,0,b,C,_).apply(null,a(f,p)),W=Fce(l,h-G[0],d-G[1],b,C,_);return y=XV(g,m,v),V=ZV(a,W),I=ZV(y,V),P=Rce(V,E),B()}function B(){return U=$=null,H}return H.stream=function(G){return U&&$===G?U:U=jqe(function Zqe(c){return aw({point:function(a,l){var h=c(a,l);return this.stream.point(h[0],h[1])}})}(y)(w(P(k($=G)))))},H.preclip=function(G){return arguments.length?(w=G,x=void 0,B()):w},H.postclip=function(G){return arguments.length?(k=G,O=D=T=M=null,B()):k},H.clipAngle=function(G){return arguments.length?(w=+G?nce(x=G*ei):(x=null,KV),B()):x*Jr},H.clipExtent=function(G){return arguments.length?(k=null==G?(O=D=T=M=null,tw):c4(O=+G[0][0],D=+G[0][1],T=+G[1][0],M=+G[1][1]),B()):null==O?null:[[O,D],[T,M]]},H.scale=function(G){return arguments.length?(l=+G,ee()):l},H.translate=function(G){return arguments.length?(h=+G[0],d=+G[1],ee()):[h,d]},H.center=function(G){return arguments.length?(f=G[0]%360*ei,p=G[1]%360*ei,ee()):[f*Jr,p*Jr]},H.rotate=function(G){return arguments.length?(g=G[0]%360*ei,m=G[1]%360*ei,v=G.length>2?G[2]%360*ei:0,ee()):[g*Jr,m*Jr,v*Jr]},H.angle=function(G){return arguments.length?(_=G%360*ei,ee()):_*Jr},H.reflectX=function(G){return arguments.length?(b=G?-1:1,ee()):b<0},H.reflectY=function(G){return arguments.length?(C=G?-1:1,ee()):C<0},H.precision=function(G){return arguments.length?(P=Rce(V,E=G*G),B()):ia(E)},H.fitExtent=function(G,W){return C4(H,G,W)},H.fitSize=function(G,W){return p6(H,G,W)},H.fitWidth=function(G,W){return g6(H,G,W)},H.fitHeight=function(G,W){return m6(H,G,W)},function(){return a=c.apply(this,arguments),H.invert=a.invert&&J,ee()}}function y6(c){var a=0,l=ir/3,h=v6(c),d=h(a,l);return d.parallels=function(f){return arguments.length?h(a=f[0]*ei,l=f[1]*ei):[a*Jr,l*Jr]},d}function Lce(c,a){var l=kn(c),h=(l+kn(a))/2;if(dr(h)<Jn)return function Xqe(c){var a=$n(c);function l(h,d){return[h*a,kn(d)/a]}return l.invert=function(h,d){return[h/a,vl(d*a)]},l}(c);var d=1+l*(2*h-l),f=ia(d)/h;function p(g,m){var v=ia(d-2*h*kn(m))/h;return[v*kn(g*=h),f-v*$n(g)]}return p.invert=function(g,m){var v=f-m,y=ml(g,dr(v))*bu(v);return v*h<0&&(y-=ir*bu(g)*bu(v)),[y/h,vl((d-(g*g+v*v)*h*h)/(2*h))]},p}function S4(){return y6(Lce).scale(155.424).center([0,33.6442])}function Nce(){return S4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Kqe(){var c,a,h,f,g,m,l=Nce(),d=S4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p=S4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),v={point:function(b,C){m=[b,C]}};function y(b){var C=b[0],x=b[1];return m=null,h.point(C,x),m||(f.point(C,x),m)||(g.point(C,x),m)}function _(){return c=a=null,y}return y.invert=function(b){var C=l.scale(),x=l.translate(),w=(b[0]-x[0])/C,O=(b[1]-x[1])/C;return(O>=.12&&O<.234&&w>=-.425&&w<-.214?d:O>=.166&&O<.234&&w>=-.214&&w<-.115?p:l).invert(b)},y.stream=function(b){return c&&a===b?c:c=function Yqe(c){var a=c.length;return{point:function(l,h){for(var d=-1;++d<a;)c[d].point(l,h)},sphere:function(){for(var l=-1;++l<a;)c[l].sphere()},lineStart:function(){for(var l=-1;++l<a;)c[l].lineStart()},lineEnd:function(){for(var l=-1;++l<a;)c[l].lineEnd()},polygonStart:function(){for(var l=-1;++l<a;)c[l].polygonStart()},polygonEnd:function(){for(var l=-1;++l<a;)c[l].polygonEnd()}}}([l.stream(a=b),d.stream(b),p.stream(b)])},y.precision=function(b){return arguments.length?(l.precision(b),d.precision(b),p.precision(b),_()):l.precision()},y.scale=function(b){return arguments.length?(l.scale(b),d.scale(.35*b),p.scale(b),y.translate(l.translate())):l.scale()},y.translate=function(b){if(!arguments.length)return l.translate();var C=l.scale(),x=+b[0],w=+b[1];return h=l.translate(b).clipExtent([[x-.455*C,w-.238*C],[x+.455*C,w+.238*C]]).stream(v),f=d.translate([x-.307*C,w+.201*C]).clipExtent([[x-.425*C+Jn,w+.12*C+Jn],[x-.214*C-Jn,w+.234*C-Jn]]).stream(v),g=p.translate([x-.205*C,w+.212*C]).clipExtent([[x-.214*C+Jn,w+.166*C+Jn],[x-.115*C-Jn,w+.234*C-Jn]]).stream(v),_()},y.fitExtent=function(b,C){return C4(y,b,C)},y.fitSize=function(b,C){return p6(y,b,C)},y.fitWidth=function(b,C){return g6(y,b,C)},y.fitHeight=function(b,C){return m6(y,b,C)},y.scale(1070)}function Bce(c){return function(a,l){var h=$n(a),d=$n(l),f=c(h*d);return f===1/0?[2,0]:[f*d*kn(a),f*kn(l)]}}function lw(c){return function(a,l){var h=ia(a*a+l*l),d=c(h),f=kn(d),p=$n(d);return[ml(a*f,h*p),vl(h&&l*f/h)]}}var _6=Bce(function(c){return ia(2/(1+c))});function Jqe(){return kd(_6).scale(124.75).clipAngle(179.999)}_6.invert=lw(function(c){return 2*vl(c/2)});var b6=Bce(function(c){return(c=Ole(c))&&c/kn(c)});function eXe(){return kd(b6).scale(79.4188).clipAngle(179.999)}function cw(c,a){return[c,GM(NV((Xs+a)/2))]}function tXe(){return Vce(cw).scale(961/gl)}function Vce(c){var g,m,v,a=kd(c),l=a.center,h=a.scale,d=a.translate,f=a.clipExtent,p=null;function y(){var _=ir*h(),b=a(Zle(a.rotate()).invert([0,0]));return f(null==p?[[b[0]-_,b[1]-_],[b[0]+_,b[1]+_]]:c===cw?[[Math.max(b[0]-_,p),g],[Math.min(b[0]+_,m),v]]:[[p,Math.max(b[1]-_,g)],[m,Math.min(b[1]+_,v)]])}return a.scale=function(_){return arguments.length?(h(_),y()):h()},a.translate=function(_){return arguments.length?(d(_),y()):d()},a.center=function(_){return arguments.length?(l(_),y()):l()},a.clipExtent=function(_){return arguments.length?(null==_?p=g=m=v=null:(p=+_[0][0],g=+_[0][1],m=+_[1][0],v=+_[1][1]),y()):null==p?null:[[p,g],[m,v]]},y()}function x4(c){return NV((Xs+c)/2)}function Uce(c,a){var l=$n(c),h=c===a?kn(c):GM(l/$n(a))/GM(x4(a)/x4(c)),d=l*LV(x4(c),h)/h;if(!h)return cw;function f(p,g){d>0?g<-Xs+Jn&&(g=-Xs+Jn):g>Xs-Jn&&(g=Xs-Jn);var m=d/LV(x4(g),h);return[m*kn(h*p),d-m*$n(h*p)]}return f.invert=function(p,g){var m=d-g,v=bu(h)*ia(p*p+m*m),y=ml(p,dr(m))*bu(m);return m*h<0&&(y-=ir*bu(p)*bu(m)),[y/h,2*K_(LV(d/v,1/h))-Xs]},f}function nXe(){return y6(Uce).scale(109.5).parallels([30,30])}function uw(c,a){return[c,a]}function iXe(){return kd(uw).scale(152.63)}function zce(c,a){var l=$n(c),h=c===a?kn(c):(l-$n(a))/(a-c),d=l/h+c;if(dr(h)<Jn)return uw;function f(p,g){var m=d-g,v=h*p;return[m*kn(v),d-m*$n(v)]}return f.invert=function(p,g){var m=d-g,v=ml(p,dr(m))*bu(m);return m*h<0&&(v-=ir*bu(p)*bu(m)),[v/h,d-bu(h)*ia(p*p+m*m)]},f}function rXe(){return y6(zce).scale(131.154).center([0,13.9389])}b6.invert=lw(function(c){return c}),cw.invert=function(c,a){return[c,2*K_(wle(a))-Xs]},uw.invert=uw;var hw=1.340264,dw=-.081106,fw=893e-6,pw=.003796,w4=ia(3)/2;function C6(c,a){var l=vl(w4*kn(a)),h=l*l,d=h*h*h;return[c*$n(l)/(w4*(hw+3*dw*h+d*(7*fw+9*pw*h))),l*(hw+dw*h+d*(fw+pw*h))]}function oXe(){return kd(C6).scale(177.158)}function S6(c,a){var l=$n(a),h=$n(c)*l;return[l*kn(c)/h,kn(a)/h]}function aXe(){return kd(S6).scale(144.049).clipAngle(60)}function lXe(){var p,g,v,y,_,O,D,c=1,a=0,l=0,h=1,d=1,f=0,m=null,b=1,C=1,x=aw({point:function(k,E){var P=M([k,E]);this.stream.point(P[0],P[1])}}),w=tw;function T(){return b=c*h,C=c*d,O=D=null,M}function M(k){var E=k[0]*b,P=k[1]*C;if(f){var V=P*p-E*g;E=E*p+P*g,P=V}return[E+a,P+l]}return M.invert=function(k){var E=k[0]-a,P=k[1]-l;if(f){var V=P*p+E*g;E=E*p-P*g,P=V}return[E/b,P/C]},M.stream=function(k){return O&&D===k?O:O=x(w(D=k))},M.postclip=function(k){return arguments.length?(w=k,m=v=y=_=null,T()):w},M.clipExtent=function(k){return arguments.length?(w=null==k?(m=v=y=_=null,tw):c4(m=+k[0][0],v=+k[0][1],y=+k[1][0],_=+k[1][1]),T()):null==m?null:[[m,v],[y,_]]},M.scale=function(k){return arguments.length?(c=+k,T()):c},M.translate=function(k){return arguments.length?(a=+k[0],l=+k[1],T()):[a,l]},M.angle=function(k){return arguments.length?(g=kn(f=k%360*ei),p=$n(f),T()):f*Jr},M.reflectX=function(k){return arguments.length?(h=k?-1:1,T()):h<0},M.reflectY=function(k){return arguments.length?(d=k?-1:1,T()):d<0},M.fitExtent=function(k,E){return C4(M,k,E)},M.fitSize=function(k,E){return p6(M,k,E)},M.fitWidth=function(k,E){return g6(M,k,E)},M.fitHeight=function(k,E){return m6(M,k,E)},M}function x6(c,a){var l=a*a,h=l*l;return[c*(.8707-.131979*l+h*(h*(.003971*l-.001529*h)-.013791)),a*(1.007226+l*(.015085+h*(.028874*l-.044475-.005916*h)))]}function cXe(){return kd(x6).scale(175.295)}function w6(c,a){return[$n(a)*kn(c),kn(a)]}function uXe(){return kd(w6).scale(249.5).clipAngle(90+Jn)}function O6(c,a){var l=$n(a),h=1+$n(c)*l;return[l*kn(c)/h,kn(a)/h]}function hXe(){return kd(O6).scale(250).clipAngle(142)}function D6(c,a){return[GM(NV((Xs+a)/2)),-c]}function dXe(){var c=Vce(D6),a=c.center,l=c.rotate;return c.center=function(h){return arguments.length?a([-h[1],h[0]]):[(h=a())[1],-h[0]]},c.rotate=function(h){return arguments.length?l([h[0],h[1],h.length>2?h[2]+90:90]):[(h=l())[0],h[1],h[2]-90]},l([0,0,90]).scale(159.155)}function fXe(c,a){return c.parent===a.parent?1:2}function gXe(c,a){return c+a.x}function vXe(c,a){return Math.max(c,a.y)}function bXe(){var c=fXe,a=1,l=1,h=!1;function d(f){var p,g=0;f.eachAfter(function(b){var C=b.children;C?(b.x=function pXe(c){return c.reduce(gXe,0)/c.length}(C),b.y=function mXe(c){return 1+c.reduce(vXe,0)}(C)):(b.x=p?g+=c(b,p):0,b.y=0,p=b)});var m=function yXe(c){for(var a;a=c.children;)c=a[0];return c}(f),v=function _Xe(c){for(var a;a=c.children;)c=a[a.length-1];return c}(f),y=m.x-c(m,v)/2,_=v.x+c(v,m)/2;return f.eachAfter(h?function(b){b.x=(b.x-f.x)*a,b.y=(f.y-b.y)*l}:function(b){b.x=(b.x-y)/(_-y)*a,b.y=(1-(f.y?b.y/f.y:1))*l})}return d.separation=function(f){return arguments.length?(c=f,d):c},d.size=function(f){return arguments.length?(h=!1,a=+f[0],l=+f[1],d):h?null:[a,l]},d.nodeSize=function(f){return arguments.length?(h=!0,a=+f[0],l=+f[1],d):h?[a,l]:null},d}function CXe(c){var a=0,l=c.children,h=l&&l.length;if(h)for(;--h>=0;)a+=l[h].value;else a=1;c.value=a}function T6(c,a){c instanceof Map?(c=[void 0,c],void 0===a&&(a=BXe)):void 0===a&&(a=NXe);for(var h,f,p,g,m,l=new E0(c),d=[l];h=d.pop();)if((p=a(h.data))&&(m=(p=Array.from(p)).length))for(h.children=p,g=m-1;g>=0;--g)d.push(f=p[g]=new E0(p[g])),f.parent=h,f.depth=h.depth+1;return l.eachBefore(Hce)}function NXe(c){return c.children}function BXe(c){return Array.isArray(c)?c[1]:null}function VXe(c){void 0!==c.data.value&&(c.value=c.data.value),c.data=c.data.data}function Hce(c){var a=0;do{c.height=a}while((c=c.parent)&&c.height<++a)}function E0(c){this.data=c,this.depth=this.height=0,this.parent=null}function O4(c){return null==c?null:$ce(c)}function $ce(c){if("function"!=typeof c)throw new Error;return c}function A0(){return 0}function o1(c){return function(){return c}}function k6(){let c=1;return()=>(c=(1664525*c+1013904223)%4294967296)/4294967296}function WXe(c){return Gce(c,k6())}function Gce(c,a){for(var f,p,l=0,h=(c=function $Xe(c,a){let h,d,l=c.length;for(;l;)d=a()*l--|0,h=c[l],c[l]=c[d],c[d]=h;return c}(Array.from(c),a)).length,d=[];l<h;)f=c[l],p&&Qce(p,f)?++l:(p=QXe(d=GXe(d,f)),l=0);return p}function GXe(c,a){var l,h;if(M6(a,c))return[a];for(l=0;l<c.length;++l)if(D4(a,c[l])&&M6(gw(c[l],a),c))return[c[l],a];for(l=0;l<c.length-1;++l)for(h=l+1;h<c.length;++h)if(D4(gw(c[l],c[h]),a)&&D4(gw(c[l],a),c[h])&&D4(gw(c[h],a),c[l])&&M6(jce(c[l],c[h],a),c))return[c[l],c[h],a];throw new Error}function D4(c,a){var l=c.r-a.r,h=a.x-c.x,d=a.y-c.y;return l<0||l*l<h*h+d*d}function Qce(c,a){var l=c.r-a.r+1e-9*Math.max(c.r,a.r,1),h=a.x-c.x,d=a.y-c.y;return l>0&&l*l>h*h+d*d}function M6(c,a){for(var l=0;l<a.length;++l)if(!Qce(c,a[l]))return!1;return!0}function QXe(c){switch(c.length){case 1:return function jXe(c){return{x:c.x,y:c.y,r:c.r}}(c[0]);case 2:return gw(c[0],c[1]);case 3:return jce(c[0],c[1],c[2])}}function gw(c,a){var l=c.x,h=c.y,d=c.r,f=a.x,p=a.y,g=a.r,m=f-l,v=p-h,y=g-d,_=Math.sqrt(m*m+v*v);return{x:(l+f+m/_*y)/2,y:(h+p+v/_*y)/2,r:(_+d+g)/2}}function jce(c,a,l){var h=c.x,d=c.y,f=c.r,p=a.x,g=a.y,m=a.r,v=l.x,y=l.y,_=l.r,b=h-p,C=h-v,x=d-g,w=d-y,O=m-f,D=_-f,T=h*h+d*d-f*f,M=T-p*p-g*g+m*m,k=T-v*v-y*y+_*_,E=C*x-b*w,P=(x*k-w*M)/(2*E)-h,V=(w*O-x*D)/E,I=(C*M-b*k)/(2*E)-d,U=(b*D-C*O)/E,$=V*V+U*U-1,H=2*(f+P*V+I*U),J=P*P+I*I-f*f,ee=-(Math.abs($)>1e-6?(H+Math.sqrt(H*H-4*$*J))/(2*$):J/H);return{x:h+P+V*ee,y:d+I+U*ee,r:ee}}function Zce(c,a,l){var d,f,g,m,h=c.x-a.x,p=c.y-a.y,v=h*h+p*p;v?(f=a.r+l.r,m=c.r+l.r,(f*=f)>(m*=m)?(d=(v+m-f)/(2*v),g=Math.sqrt(Math.max(0,m/v-d*d)),l.x=c.x-d*h-g*p,l.y=c.y-d*p+g*h):(d=(v+f-m)/(2*v),g=Math.sqrt(Math.max(0,f/v-d*d)),l.x=a.x+d*h-g*p,l.y=a.y+d*p+g*h)):(l.x=a.x+l.r,l.y=a.y)}function qce(c,a){var l=c.r+a.r-1e-6,h=a.x-c.x,d=a.y-c.y;return l>0&&l*l>h*h+d*d}function Xce(c){var a=c._,l=c.next._,h=a.r+l.r,d=(a.x*l.r+l.x*a.r)/h,f=(a.y*l.r+l.y*a.r)/h;return d*d+f*f}function T4(c){this._=c,this.next=null,this.previous=null}function Yce(c,a){if(!(f=(c=function HXe(c){return"object"==typeof c&&"length"in c?c:Array.from(c)}(c)).length))return 0;var l,h,d,f,p,g,m,v,y,_,b;if((l=c[0]).x=0,l.y=0,!(f>1))return l.r;if(l.x=-(h=c[1]).r,h.x=l.r,h.y=0,!(f>2))return l.r+h.r;Zce(h,l,d=c[2]),l=new T4(l),h=new T4(h),d=new T4(d),l.next=d.previous=h,h.next=l.previous=d,d.next=h.previous=l;e:for(m=3;m<f;++m){Zce(l._,h._,d=c[m]),d=new T4(d),v=h.next,y=l.previous,_=h._.r,b=l._.r;do{if(_<=b){if(qce(v._,d._)){l.next=h=v,h.previous=l,--m;continue e}_+=v._.r,v=v.next}else{if(qce(y._,d._)){(l=y).next=h,h.previous=l,--m;continue e}b+=y._.r,y=y.previous}}while(v!==y.next);for(d.previous=l,d.next=h,l.next=h.previous=h=d,p=Xce(l);(d=d.next)!==h;)(g=Xce(d))<p&&(l=d,p=g);h=l.next}for(l=[h._],d=h;(d=d.next)!==h;)l.push(d._);for(d=Gce(l,a),m=0;m<f;++m)(l=c[m]).x-=d.x,l.y-=d.y;return d.r}function ZXe(c){return Yce(c,k6()),c}function qXe(c){return Math.sqrt(c.value)}function XXe(){var c=null,a=1,l=1,h=A0;function d(f){const p=k6();return f.x=a/2,f.y=l/2,c?f.eachBefore(Kce(c)).eachAfter(E6(h,.5,p)).eachBefore(Jce(1)):f.eachBefore(Kce(qXe)).eachAfter(E6(A0,1,p)).eachAfter(E6(h,f.r/Math.min(a,l),p)).eachBefore(Jce(Math.min(a,l)/(2*f.r))),f}return d.radius=function(f){return arguments.length?(c=O4(f),d):c},d.size=function(f){return arguments.length?(a=+f[0],l=+f[1],d):[a,l]},d.padding=function(f){return arguments.length?(h="function"==typeof f?f:o1(+f),d):h},d}function Kce(c){return function(a){a.children||(a.r=Math.max(0,+c(a)||0))}}function E6(c,a,l){return function(h){if(d=h.children){var d,f,m,p=d.length,g=c(h)*a||0;if(g)for(f=0;f<p;++f)d[f].r+=g;if(m=Yce(d,l),g)for(f=0;f<p;++f)d[f].r-=g;h.r=m+g}}}function Jce(c){return function(a){var l=a.parent;a.r*=c,l&&(a.x=l.x+c*a.x,a.y=l.y+c*a.y)}}function eue(c){c.x0=Math.round(c.x0),c.y0=Math.round(c.y0),c.x1=Math.round(c.x1),c.y1=Math.round(c.y1)}function mw(c,a,l,h,d){for(var p,f=c.children,g=-1,m=f.length,v=c.value&&(h-a)/c.value;++g<m;)(p=f[g]).y0=l,p.y1=d,p.x0=a,p.x1=a+=p.value*v}function YXe(){var c=1,a=1,l=0,h=!1;function d(p){var g=p.height+1;return p.x0=p.y0=l,p.x1=c,p.y1=a/g,p.eachBefore(function f(p,g){return function(m){m.children&&mw(m,m.x0,p*(m.depth+1)/g,m.x1,p*(m.depth+2)/g);var v=m.x0,y=m.y0,_=m.x1-l,b=m.y1-l;_<v&&(v=_=(v+_)/2),b<y&&(y=b=(y+b)/2),m.x0=v,m.y0=y,m.x1=_,m.y1=b}}(a,g)),h&&p.eachBefore(eue),p}return d.round=function(p){return arguments.length?(h=!!p,d):h},d.size=function(p){return arguments.length?(c=+p[0],a=+p[1],d):[c,a]},d.padding=function(p){return arguments.length?(l=+p,d):l},d}C6.invert=function(c,a){for(var p,l=a,h=l*l,d=h*h*h,f=0;f<12&&(d=(h=(l-=p=(l*(hw+dw*h+d*(fw+pw*h))-a)/(hw+3*dw*h+d*(7*fw+9*pw*h)))*l)*h*h,!(dr(p)<Xx));++f);return[w4*c*(hw+3*dw*h+d*(7*fw+9*pw*h))/$n(l),vl(kn(l)/w4)]},S6.invert=lw(K_),x6.invert=function(c,a){var d,l=a,h=25;do{var f=l*l,p=f*f;l-=d=(l*(1.007226+f*(.015085+p*(.028874*f-.044475-.005916*p)))-a)/(1.007226+f*(.045255+p*(.259866*f-.311325-.005916*11*p)))}while(dr(d)>Jn&&--h>0);return[c/(.8707+(f=l*l)*(f*(f*f*f*(.003971-.001529*f)-.013791)-.131979)),l]},w6.invert=lw(vl),O6.invert=lw(function(c){return 2*K_(c)}),D6.invert=function(c,a){return[-a,2*K_(wle(c))-Xs]},E0.prototype=T6.prototype={constructor:E0,count:function SXe(){return this.eachAfter(CXe)},each:function xXe(c,a){let l=-1;for(const h of this)c.call(a,h,++l,this);return this},eachAfter:function OXe(c,a){for(var f,p,g,l=this,h=[l],d=[],m=-1;l=h.pop();)if(d.push(l),f=l.children)for(p=0,g=f.length;p<g;++p)h.push(f[p]);for(;l=d.pop();)c.call(a,l,++m,this);return this},eachBefore:function wXe(c,a){for(var d,f,l=this,h=[l],p=-1;l=h.pop();)if(c.call(a,l,++p,this),d=l.children)for(f=d.length-1;f>=0;--f)h.push(d[f]);return this},find:function DXe(c,a){let l=-1;for(const h of this)if(c.call(a,h,++l,this))return h},sum:function TXe(c){return this.eachAfter(function(a){for(var l=+c(a.data)||0,h=a.children,d=h&&h.length;--d>=0;)l+=h[d].value;a.value=l})},sort:function kXe(c){return this.eachBefore(function(a){a.children&&a.children.sort(c)})},path:function MXe(c){for(var a=this,l=function EXe(c,a){if(c===a)return c;var l=c.ancestors(),h=a.ancestors(),d=null;for(c=l.pop(),a=h.pop();c===a;)d=c,c=l.pop(),a=h.pop();return d}(a,c),h=[a];a!==l;)h.push(a=a.parent);for(var d=h.length;c!==l;)h.splice(d,0,c),c=c.parent;return h},ancestors:function AXe(){for(var c=this,a=[c];c=c.parent;)a.push(c);return a},descendants:function IXe(){return Array.from(this)},leaves:function PXe(){var c=[];return this.eachBefore(function(a){a.children||c.push(a)}),c},links:function RXe(){var c=this,a=[];return c.each(function(l){l!==c&&a.push({source:l.parent,target:l})}),a},copy:function LXe(){return T6(this).eachBefore(VXe)},[Symbol.iterator]:function*FXe(){var a,h,d,f,c=this,l=[c];do{for(a=l.reverse(),l=[];c=a.pop();)if(yield c,h=c.children)for(d=0,f=h.length;d<f;++d)l.push(h[d])}while(l.length)}};var KXe={depth:-1},tue={},A6={};function JXe(c){return c.id}function eYe(c){return c.parentId}function tYe(){var l,c=JXe,a=eYe;function h(d){var m,v,y,_,b,C,x,w,f=Array.from(d),p=c,g=a,O=new Map;if(null!=l){const D=f.map((k,E)=>function nYe(c){let a=(c=`${c}`).length;return I6(c,a-1)&&!I6(c,a-2)&&(c=c.slice(0,-1)),"/"===c[0]?c:`/${c}`}(l(k,E,d))),T=D.map(nue),M=new Set(D).add("");for(const k of T)M.has(k)||(M.add(k),D.push(k),T.push(nue(k)),f.push(A6));p=(k,E)=>D[E],g=(k,E)=>T[E]}for(y=0,m=f.length;y<m;++y)C=f[y]=new E0(v=f[y]),null!=(x=p(v,y,d))&&(x+="")&&(w=C.id=x,O.set(w,O.has(w)?tue:C)),null!=(x=g(v,y,d))&&(x+="")&&(C.parent=x);for(y=0;y<m;++y)if(x=(C=f[y]).parent){if(!(b=O.get(x)))throw new Error("missing: "+x);if(b===tue)throw new Error("ambiguous: "+x);b.children?b.children.push(C):b.children=[C],C.parent=b}else{if(_)throw new Error("multiple roots");_=C}if(!_)throw new Error("no root");if(null!=l){for(;_.data===A6&&1===_.children.length;)_=_.children[0],--m;for(let D=f.length-1;D>=0&&(C=f[D]).data===A6;--D)C.data=null}if(_.parent=KXe,_.eachBefore(function(D){D.depth=D.parent.depth+1,--m}).eachBefore(Hce),_.parent=null,m>0)throw new Error("cycle");return _}return h.id=function(d){return arguments.length?(c=O4(d),h):c},h.parentId=function(d){return arguments.length?(a=O4(d),h):a},h.path=function(d){return arguments.length?(l=O4(d),h):l},h}function nue(c){let a=c.length;if(a<2)return"";for(;--a>1&&!I6(c,a););return c.slice(0,a)}function I6(c,a){if("/"===c[a]){let l=0;for(;a>0&&"\\"===c[--a];)++l;if(!(1&l))return!0}return!1}function iYe(c,a){return c.parent===a.parent?1:2}function P6(c){var a=c.children;return a?a[0]:c.t}function R6(c){var a=c.children;return a?a[a.length-1]:c.t}function rYe(c,a,l){var h=l/(a.i-c.i);a.c-=h,a.s+=l,c.c+=h,a.z+=l,a.m+=l}function oYe(c,a,l){return c.a.parent===a.parent?c.a:l}function k4(c,a){this._=c,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=a}function lYe(){var c=iYe,a=1,l=1,h=null;function d(v){var y=function aYe(c){for(var l,d,f,p,g,a=new k4(c,0),h=[a];l=h.pop();)if(f=l._.children)for(l.children=new Array(g=f.length),p=g-1;p>=0;--p)h.push(d=l.children[p]=new k4(f[p],p)),d.parent=l;return(a.parent=new k4(null,0)).children=[a],a}(v);if(y.eachAfter(f),y.parent.m=-y.z,y.eachBefore(p),h)v.eachBefore(m);else{var _=v,b=v,C=v;v.eachBefore(function(T){T.x<_.x&&(_=T),T.x>b.x&&(b=T),T.depth>C.depth&&(C=T)});var x=_===b?1:c(_,b)/2,w=x-_.x,O=a/(b.x+x+w),D=l/(C.depth||1);v.eachBefore(function(T){T.x=(T.x+w)*O,T.y=T.depth*D})}return v}function f(v){var y=v.children,_=v.parent.children,b=v.i?_[v.i-1]:null;if(y){!function sYe(c){for(var f,a=0,l=0,h=c.children,d=h.length;--d>=0;)(f=h[d]).z+=a,f.m+=a,a+=f.s+(l+=f.c)}(v);var C=(y[0].z+y[y.length-1].z)/2;b?(v.z=b.z+c(v._,b._),v.m=v.z-C):v.z=C}else b&&(v.z=b.z+c(v._,b._));v.parent.A=function g(v,y,_){if(y){for(var k,b=v,C=v,x=y,w=b.parent.children[0],O=b.m,D=C.m,T=x.m,M=w.m;x=R6(x),b=P6(b),x&&b;)w=P6(w),(C=R6(C)).a=v,(k=x.z+T-b.z-O+c(x._,b._))>0&&(rYe(oYe(x,v,_),v,k),O+=k,D+=k),T+=x.m,O+=b.m,M+=w.m,D+=C.m;x&&!R6(C)&&(C.t=x,C.m+=T-D),b&&!P6(w)&&(w.t=b,w.m+=O-M,_=v)}return _}(v,b,v.parent.A||_[0])}function p(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function m(v){v.x*=a,v.y=v.depth*l}return d.separation=function(v){return arguments.length?(c=v,d):c},d.size=function(v){return arguments.length?(h=!1,a=+v[0],l=+v[1],d):h?null:[a,l]},d.nodeSize=function(v){return arguments.length?(h=!0,a=+v[0],l=+v[1],d):h?[a,l]:null},d}function M4(c,a,l,h,d){for(var p,f=c.children,g=-1,m=f.length,v=c.value&&(d-l)/c.value;++g<m;)(p=f[g]).x0=a,p.x1=h,p.y0=l,p.y1=l+=p.value*v}k4.prototype=Object.create(E0.prototype);var iue=(1+Math.sqrt(5))/2;function rue(c,a,l,h,d,f){for(var m,v,C,x,O,D,T,M,k,E,P,p=[],g=a.children,y=0,_=0,b=g.length,w=a.value;y<b;){C=d-l,x=f-h;do{O=g[_++].value}while(!O&&_<b);for(D=T=O,P=O*O*(E=Math.max(x/C,C/x)/(w*c)),k=Math.max(T/P,P/D);_<b;++_){if(O+=v=g[_].value,v<D&&(D=v),v>T&&(T=v),P=O*O*E,(M=Math.max(T/P,P/D))>k){O-=v;break}k=M}p.push(m={value:O,dice:C<x,children:g.slice(y,_)}),m.dice?mw(m,l,h,d,w?h+=x*O/w:f):M4(m,l,h,w?l+=C*O/w:d,f),w-=O,y=_}return p}const sue=function c(a){function l(h,d,f,p,g){rue(a,h,d,f,p,g)}return l.ratio=function(h){return c((h=+h)>1?h:1)},l}(iue);function cYe(){var c=sue,a=!1,l=1,h=1,d=[0],f=A0,p=A0,g=A0,m=A0,v=A0;function y(b){return b.x0=b.y0=0,b.x1=l,b.y1=h,b.eachBefore(_),d=[0],a&&b.eachBefore(eue),b}function _(b){var C=d[b.depth],x=b.x0+C,w=b.y0+C,O=b.x1-C,D=b.y1-C;O<x&&(x=O=(x+O)/2),D<w&&(w=D=(w+D)/2),b.x0=x,b.y0=w,b.x1=O,b.y1=D,b.children&&(C=d[b.depth+1]=f(b)/2,x+=v(b)-C,w+=p(b)-C,(O-=g(b)-C)<x&&(x=O=(x+O)/2),(D-=m(b)-C)<w&&(w=D=(w+D)/2),c(b,x,w,O,D))}return y.round=function(b){return arguments.length?(a=!!b,y):a},y.size=function(b){return arguments.length?(l=+b[0],h=+b[1],y):[l,h]},y.tile=function(b){return arguments.length?(c=$ce(b),y):c},y.padding=function(b){return arguments.length?y.paddingInner(b).paddingOuter(b):y.paddingInner()},y.paddingInner=function(b){return arguments.length?(f="function"==typeof b?b:o1(+b),y):f},y.paddingOuter=function(b){return arguments.length?y.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):y.paddingTop()},y.paddingTop=function(b){return arguments.length?(p="function"==typeof b?b:o1(+b),y):p},y.paddingRight=function(b){return arguments.length?(g="function"==typeof b?b:o1(+b),y):g},y.paddingBottom=function(b){return arguments.length?(m="function"==typeof b?b:o1(+b),y):m},y.paddingLeft=function(b){return arguments.length?(v="function"==typeof b?b:o1(+b),y):v},y}function uYe(c,a,l,h,d){var p,m,f=c.children,g=f.length,v=new Array(g+1);for(v[0]=m=p=0;p<g;++p)v[p+1]=m+=f[p].value;!function y(_,b,C,x,w,O,D){if(_>=b-1){var T=f[_];return T.x0=x,T.y0=w,T.x1=O,void(T.y1=D)}for(var M=v[_],k=C/2+M,E=_+1,P=b-1;E<P;){var V=E+P>>>1;v[V]<k?E=V+1:P=V}k-v[E-1]<v[E]-k&&_+1<E&&--E;var I=v[E]-M,U=C-I;if(O-x>D-w){var $=C?(x*U+O*I)/C:O;y(_,E,I,x,w,$,D),y(E,b,U,$,w,O,D)}else{var H=C?(w*U+D*I)/C:D;y(_,E,I,x,w,O,H),y(E,b,U,x,H,O,D)}}(0,g,c.value,a,l,h,d)}function hYe(c,a,l,h,d){(1&c.depth?M4:mw)(c,a,l,h,d)}const dYe=function c(a){function l(h,d,f,p,g){if((m=h._squarify)&&m.ratio===a)for(var m,v,y,_,C,b=-1,x=m.length,w=h.value;++b<x;){for(y=(v=m[b]).children,_=v.value=0,C=y.length;_<C;++_)v.value+=y[_].value;v.dice?mw(v,d,f,p,w?f+=(g-f)*v.value/w:g):M4(v,d,f,w?d+=(p-d)*v.value/w:p,g),w-=v.value}else h._squarify=m=rue(a,h,d,f,p,g),m.ratio=a}return l.ratio=function(h){return c((h=+h)>1?h:1)},l}(iue);function fYe(c){var a=c.length;return function(l){return c[Math.max(0,Math.min(a-1,Math.floor(l*a)))]}}function pYe(c,a){var l=oM(+c,+a);return function(h){var d=l(h);return d-360*Math.floor(d/360)}}function E4(c,a){return c=+c,a=+a,function(l){return Math.round(c*(1-l)+a*l)}}function oue(c){return((c=Math.exp(c))+1/c)/2}const aue=function c(a,l,h){function d(f,p){var O,D,g=f[0],m=f[1],v=f[2],b=p[2],C=p[0]-g,x=p[1]-m,w=C*C+x*x;if(w<1e-12)D=Math.log(b/v)/a,O=function(V){return[g+V*C,m+V*x,v*Math.exp(a*V*D)]};else{var T=Math.sqrt(w),M=(b*b-v*v+h*w)/(2*v*l*T),k=(b*b-v*v-h*w)/(2*b*l*T),E=Math.log(Math.sqrt(M*M+1)-M),P=Math.log(Math.sqrt(k*k+1)-k);D=(P-E)/a,O=function(V){var I=V*D,U=oue(E),$=v/(l*T)*(U*function vYe(c){return((c=Math.exp(2*c))-1)/(c+1)}(a*I+E)-function mYe(c){return((c=Math.exp(c))-1/c)/2}(E));return[g+$*C,m+$*x,v*U/oue(a*I+E)]}}return O.duration=1e3*D*a/Math.SQRT2,O}return d.rho=function(f){var p=Math.max(.001,+f),g=p*p;return c(p,g,g*g)},d}(Math.SQRT2,2,4);function lue(c){return function(a,l){var h=c((a=iM(a)).h,(l=iM(l)).h),d=na(a.s,l.s),f=na(a.l,l.l),p=na(a.opacity,l.opacity);return function(g){return a.h=h(g),a.s=d(g),a.l=f(g),a.opacity=p(g),a+""}}}const yYe=lue(oM);var _Ye=lue(na);function bYe(c,a){var l=na((c=_M(c)).l,(a=_M(a)).l),h=na(c.a,a.a),d=na(c.b,a.b),f=na(c.opacity,a.opacity);return function(p){return c.l=l(p),c.a=h(p),c.b=d(p),c.opacity=f(p),c+""}}function cue(c){return function(a,l){var h=c((a=bM(a)).h,(l=bM(l)).h),d=na(a.c,l.c),f=na(a.l,l.l),p=na(a.opacity,l.opacity);return function(g){return a.h=h(g),a.c=d(g),a.l=f(g),a.opacity=p(g),a+""}}}const CYe=cue(oM);var SYe=cue(na);function uue(c){return function a(l){function h(d,f){var p=c((d=mh(d)).h,(f=mh(f)).h),g=na(d.s,f.s),m=na(d.l,f.l),v=na(d.opacity,f.opacity);return function(y){return d.h=p(y),d.s=g(y),d.l=m(Math.pow(y,l)),d.opacity=v(y),d+""}}return l=+l,h.gamma=a,h}(1)}const xYe=uue(oM);var A4=uue(na);function hue(c,a){void 0===a&&(a=c,c=eg);for(var l=0,h=a.length-1,d=a[0],f=new Array(h<0?0:h);l<h;)f[l]=c(d,d=a[++l]);return function(p){var g=Math.max(0,Math.min(h-1,Math.floor(p*=h)));return f[g](p-g)}}function wYe(c,a){for(var l=new Array(a),h=0;h<a;++h)l[h]=c(h/(a-1));return l}function OYe(c){for(var h,a=-1,l=c.length,d=c[l-1],f=0;++a<l;)f+=(h=d)[1]*(d=c[a])[0]-h[0]*d[1];return f/2}function DYe(c){for(var f,g,a=-1,l=c.length,h=0,d=0,p=c[l-1],m=0;++a<l;)m+=g=(f=p)[0]*(p=c[a])[1]-p[0]*f[1],h+=(f[0]+p[0])*g,d+=(f[1]+p[1])*g;return[h/(m*=3),d/m]}function TYe(c,a,l){return(a[0]-c[0])*(l[1]-c[1])-(a[1]-c[1])*(l[0]-c[0])}function kYe(c,a){return c[0]-a[0]||c[1]-a[1]}function due(c){const a=c.length,l=[0,1];let d,h=2;for(d=2;d<a;++d){for(;h>1&&TYe(c[l[h-2]],c[l[h-1]],c[d])<=0;)--h;l[h++]=d}return l.slice(0,h)}function MYe(c){if((l=c.length)<3)return null;var a,l,h=new Array(l),d=new Array(l);for(a=0;a<l;++a)h[a]=[+c[a][0],+c[a][1],a];for(h.sort(kYe),a=0;a<l;++a)d[a]=[h[a][0],-h[a][1]];var f=due(h),p=due(d),g=p[0]===f[0],m=p[p.length-1]===f[f.length-1],v=[];for(a=f.length-1;a>=0;--a)v.push(c[h[f[a]][2]]);for(a=+g;a<p.length-m;++a)v.push(c[h[p[a]][2]]);return v}function EYe(c,a){for(var m,v,l=c.length,h=c[l-1],d=a[0],f=a[1],p=h[0],g=h[1],y=!1,_=0;_<l;++_)m=(h=c[_])[0],(v=h[1])>f!=g>f&&d<(p-m)*(f-v)/(g-v)+m&&(y=!y),p=m,g=v;return y}function AYe(c){for(var d,f,a=-1,l=c.length,h=c[l-1],p=h[0],g=h[1],m=0;++a<l;)d=p,f=g,d-=p=(h=c[a])[0],f-=g=h[1],m+=Math.hypot(d,f);return m}const va=Math.random,IYe=function c(a){function l(h,d){return h=null==h?0:+h,d=null==d?1:+d,1===arguments.length?(d=h,h=0):d-=h,function(){return a()*d+h}}return l.source=c,l}(va),PYe=function c(a){function l(h,d){return arguments.length<2&&(d=h,h=0),h=Math.floor(h),d=Math.floor(d)-h,function(){return Math.floor(a()*d+h)}}return l.source=c,l}(va),F6=function c(a){function l(h,d){var f,p;return h=null==h?0:+h,d=null==d?1:+d,function(){var g;if(null!=f)g=f,f=null;else do{f=2*a()-1,g=2*a()-1,p=f*f+g*g}while(!p||p>1);return h+d*g*Math.sqrt(-2*Math.log(p)/p)}}return l.source=c,l}(va),RYe=function c(a){var l=F6.source(a);function h(){var d=l.apply(this,arguments);return function(){return Math.exp(d())}}return h.source=c,h}(va),fue=function c(a){function l(h){return(h=+h)<=0?()=>0:function(){for(var d=0,f=h;f>1;--f)d+=a();return d+f*a()}}return l.source=c,l}(va),FYe=function c(a){var l=fue.source(a);function h(d){if(0==(d=+d))return a;var f=l(d);return function(){return f()/d}}return h.source=c,h}(va),LYe=function c(a){function l(h){return function(){return-Math.log1p(-a())/h}}return l.source=c,l}(va),NYe=function c(a){function l(h){if((h=+h)<0)throw new RangeError("invalid alpha");return h=1/-h,function(){return Math.pow(1-a(),h)}}return l.source=c,l}(va),BYe=function c(a){function l(h){if((h=+h)<0||h>1)throw new RangeError("invalid p");return function(){return Math.floor(a()+h)}}return l.source=c,l}(va),pue=function c(a){function l(h){if((h=+h)<0||h>1)throw new RangeError("invalid p");return 0===h?()=>1/0:1===h?()=>1:(h=Math.log1p(-h),function(){return 1+Math.floor(Math.log1p(-a())/h)})}return l.source=c,l}(va),L6=function c(a){var l=F6.source(a)();function h(d,f){if((d=+d)<0)throw new RangeError("invalid k");if(0===d)return()=>0;if(f=null==f?1:+f,1===d)return()=>-Math.log1p(-a())*f;var p=(d<1?d+1:d)-1/3,g=1/(3*Math.sqrt(p)),m=d<1?()=>Math.pow(a(),1/d):()=>1;return function(){do{do{var v=l(),y=1+g*v}while(y<=0);y*=y*y;var _=1-a()}while(_>=1-.0331*v*v*v*v&&Math.log(_)>=.5*v*v+p*(1-y+Math.log(y)));return p*y*m()*f}}return h.source=c,h}(va),gue=function c(a){var l=L6.source(a);function h(d,f){var p=l(d),g=l(f);return function(){var m=p();return 0===m?0:m/(m+g())}}return h.source=c,h}(va),mue=function c(a){var l=pue.source(a),h=gue.source(a);function d(f,p){return f=+f,(p=+p)>=1?()=>f:p<=0?()=>0:function(){for(var g=0,m=f,v=p;m*v>16&&m*(1-v)>16;){var y=Math.floor((m+1)*v),_=h(y,m-y+1)();_<=v?(g+=y,m-=y,v=(v-_)/(1-_)):(m=y-1,v/=_)}for(var b=v<.5,x=l(b?v:1-v),w=x(),O=0;w<=m;++O)w+=x();return g+(b?O:m-O)}}return d.source=c,d}(va),VYe=function c(a){function l(h,d,f){var p;return 0==(h=+h)?p=g=>-Math.log(g):(h=1/h,p=g=>Math.pow(g,h)),d=null==d?0:+d,f=null==f?1:+f,function(){return d+f*p(-Math.log1p(-a()))}}return l.source=c,l}(va),UYe=function c(a){function l(h,d){return h=null==h?0:+h,d=null==d?1:+d,function(){return h+d*Math.tan(Math.PI*a())}}return l.source=c,l}(va),zYe=function c(a){function l(h,d){return h=null==h?0:+h,d=null==d?1:+d,function(){var f=a();return h+d*Math.log(f/(1-f))}}return l.source=c,l}(va),HYe=function c(a){var l=L6.source(a),h=mue.source(a);function d(f){return function(){for(var p=0,g=f;g>16;){var m=Math.floor(.875*g),v=l(m)();if(v>g)return p+h(m-1,g/v)();p+=m,g-=v}for(var y=-Math.log1p(-a()),_=0;y<=g;++_)y-=Math.log1p(-a());return p+_}}return d.source=c,d}(va),vue=1/4294967296;function GYe(c=Math.random()){let a=0|(0<=c&&c<1?c/vue:Math.abs(c));return()=>(a=1664525*a+1013904223|0,vue*(a>>>0))}function Cu(c,a){switch(arguments.length){case 0:break;case 1:this.range(c);break;default:this.range(a).domain(c)}return this}function Xf(c,a){switch(arguments.length){case 0:break;case 1:"function"==typeof c?this.interpolator(c):this.range(c);break;default:this.domain(c),"function"==typeof a?this.interpolator(a):this.range(a)}return this}const N6=Symbol("implicit");function B6(){var c=new xx,a=[],l=[],h=N6;function d(f){let p=c.get(f);if(void 0===p){if(h!==N6)return h;c.set(f,p=a.push(f)-1)}return l[p%l.length]}return d.domain=function(f){if(!arguments.length)return a.slice();a=[],c=new xx;for(const p of f)c.has(p)||c.set(p,a.push(p)-1);return d},d.range=function(f){return arguments.length?(l=Array.from(f),d):l.slice()},d.unknown=function(f){return arguments.length?(h=f,d):h},d.copy=function(){return B6(a,l).unknown(h)},Cu.apply(d,arguments),d}function V6(){var f,p,c=B6().unknown(void 0),a=c.domain,l=c.range,h=0,d=1,g=!1,m=0,v=0,y=.5;function _(){var b=a().length,C=d<h,x=C?d:h,w=C?h:d;f=(w-x)/Math.max(1,b-m+2*v),g&&(f=Math.floor(f)),x+=(w-x-f*(b-m))*y,p=f*(1-m),g&&(x=Math.round(x),p=Math.round(p));var O=yu(b).map(function(D){return x+f*D});return l(C?O.reverse():O)}return delete c.unknown,c.domain=function(b){return arguments.length?(a(b),_()):a()},c.range=function(b){return arguments.length?([h,d]=b,h=+h,d=+d,_()):[h,d]},c.rangeRound=function(b){return[h,d]=b,h=+h,d=+d,g=!0,_()},c.bandwidth=function(){return p},c.step=function(){return f},c.round=function(b){return arguments.length?(g=!!b,_()):g},c.padding=function(b){return arguments.length?(m=Math.min(1,v=+b),_()):m},c.paddingInner=function(b){return arguments.length?(m=Math.min(1,b),_()):m},c.paddingOuter=function(b){return arguments.length?(v=+b,_()):v},c.align=function(b){return arguments.length?(y=Math.max(0,Math.min(1,b)),_()):y},c.copy=function(){return V6(a(),[h,d]).round(g).paddingInner(m).paddingOuter(v).align(y)},Cu.apply(_(),arguments)}function yue(c){var a=c.copy;return c.padding=c.paddingOuter,delete c.paddingInner,delete c.paddingOuter,c.copy=function(){return yue(a())},c}function QYe(){return yue(V6.apply(null,arguments).paddingInner(1))}function I4(c){return+c}var _ue=[0,1];function Cl(c){return c}function U6(c,a){return(a-=c=+c)?function(l){return(l-c)/a}:function jYe(c){return function(){return c}}(isNaN(a)?NaN:.5)}function qYe(c,a,l){var h=c[0],d=c[1],f=a[0],p=a[1];return d<h?(h=U6(d,h),f=l(p,f)):(h=U6(h,d),f=l(f,p)),function(g){return f(h(g))}}function XYe(c,a,l){var h=Math.min(c.length,a.length)-1,d=new Array(h),f=new Array(h),p=-1;for(c[h]<c[0]&&(c=c.slice().reverse(),a=a.slice().reverse());++p<h;)d[p]=U6(c[p],c[p+1]),f[p]=l(a[p],a[p+1]);return function(g){var m=e0(c,g,1,h)-1;return f[m](d[m](g))}}function vw(c,a){return a.domain(c.domain()).range(c.range()).interpolate(c.interpolate()).clamp(c.clamp()).unknown(c.unknown())}function P4(){var h,d,f,g,m,v,c=_ue,a=_ue,l=eg,p=Cl;function y(){var b=Math.min(c.length,a.length);return p!==Cl&&(p=function ZYe(c,a){var l;return c>a&&(l=c,c=a,a=l),function(h){return Math.max(c,Math.min(a,h))}}(c[0],c[b-1])),g=b>2?XYe:qYe,m=v=null,_}function _(b){return null==b||isNaN(b=+b)?f:(m||(m=g(c.map(h),a,l)))(h(p(b)))}return _.invert=function(b){return p(d((v||(v=g(a,c.map(h),_u)))(b)))},_.domain=function(b){return arguments.length?(c=Array.from(b,I4),y()):c.slice()},_.range=function(b){return arguments.length?(a=Array.from(b),y()):a.slice()},_.rangeRound=function(b){return a=Array.from(b),l=E4,y()},_.clamp=function(b){return arguments.length?(p=!!b||Cl,y()):p!==Cl},_.interpolate=function(b){return arguments.length?(l=b,y()):l},_.unknown=function(b){return arguments.length?(f=b,_):f},function(b,C){return h=b,d=C,y()}}function z6(){return P4()(Cl,Cl)}function bue(c,a,l,h){var f,d=$k(c,a,l);switch((h=Y_(h??",f")).type){case"s":var p=Math.max(Math.abs(c),Math.abs(a));return null==h.precision&&!isNaN(f=Sle(d,p))&&(h.precision=f),RV(h,p);case"":case"e":case"g":case"p":case"r":null==h.precision&&!isNaN(f=xle(d,Math.max(Math.abs(c),Math.abs(a))))&&(h.precision=f-("e"===h.type));break;case"f":case"%":null==h.precision&&!isNaN(f=Cle(d))&&(h.precision=f-2*("%"===h.type))}return HM(h)}function hg(c){var a=c.domain;return c.ticks=function(l){var h=a();return r0(h[0],h[h.length-1],l??10)},c.tickFormat=function(l,h){var d=a();return bue(d[0],d[d.length-1],l??10,h)},c.nice=function(l){null==l&&(l=10);var m,v,h=a(),d=0,f=h.length-1,p=h[d],g=h[f],y=10;for(g<p&&(v=p,p=g,g=v,v=d,d=f,f=v);y-- >0;){if((v=s0(p,g,l))===m)return h[d]=p,h[f]=g,a(h);if(v>0)p=Math.floor(p/v)*v,g=Math.ceil(g/v)*v;else{if(!(v<0))break;p=Math.ceil(p*v)/v,g=Math.floor(g*v)/v}m=v}return c},c}function a1(){var c=z6();return c.copy=function(){return vw(c,a1())},Cu.apply(c,arguments),hg(c)}function Cue(c){var a;function l(h){return null==h||isNaN(h=+h)?a:h}return l.invert=l,l.domain=l.range=function(h){return arguments.length?(c=Array.from(h,I4),l):c.slice()},l.unknown=function(h){return arguments.length?(a=h,l):a},l.copy=function(){return Cue(c).unknown(a)},c=arguments.length?Array.from(c,I4):[0,1],hg(l)}function Sue(c,a){var p,l=0,h=(c=c.slice()).length-1,d=c[l],f=c[h];return f<d&&(p=l,l=h,h=p,p=d,d=f,f=p),c[l]=a.floor(d),c[h]=a.ceil(f),c}function xue(c){return Math.log(c)}function wue(c){return Math.exp(c)}function YYe(c){return-Math.log(-c)}function KYe(c){return-Math.exp(-c)}function JYe(c){return isFinite(c)?+("1e"+c):c<0?0:c}function Oue(c){return(a,l)=>-c(-a,l)}function H6(c){const a=c(xue,wue),l=a.domain;let d,f,h=10;function p(){return d=function tKe(c){return c===Math.E?Math.log:10===c&&Math.log10||2===c&&Math.log2||(c=Math.log(c),a=>Math.log(a)/c)}(h),f=function eKe(c){return 10===c?JYe:c===Math.E?Math.exp:a=>Math.pow(c,a)}(h),l()[0]<0?(d=Oue(d),f=Oue(f),c(YYe,KYe)):c(xue,wue),a}return a.base=function(g){return arguments.length?(h=+g,p()):h},a.domain=function(g){return arguments.length?(l(g),p()):l()},a.ticks=g=>{const m=l();let v=m[0],y=m[m.length-1];const _=y<v;_&&([v,y]=[y,v]);let x,w,b=d(v),C=d(y);const O=null==g?10:+g;let D=[];if(!(h%1)&&C-b<O){if(b=Math.floor(b),C=Math.ceil(C),v>0){for(;b<=C;++b)for(x=1;x<h;++x)if(w=b<0?x/f(-b):x*f(b),!(w<v)){if(w>y)break;D.push(w)}}else for(;b<=C;++b)for(x=h-1;x>=1;--x)if(w=b>0?x/f(-b):x*f(b),!(w<v)){if(w>y)break;D.push(w)}2*D.length<O&&(D=r0(v,y,O))}else D=r0(b,C,Math.min(C-b,O)).map(f);return _?D.reverse():D},a.tickFormat=(g,m)=>{if(null==g&&(g=10),null==m&&(m=10===h?"s":","),"function"!=typeof m&&(!(h%1)&&null==(m=Y_(m)).precision&&(m.trim=!0),m=HM(m)),g===1/0)return m;const v=Math.max(1,h*g/a.ticks().length);return y=>{let _=y/f(Math.round(d(y)));return _*h<h-.5&&(_*=h),_<=v?m(y):""}},a.nice=()=>l(Sue(l(),{floor:g=>f(Math.floor(d(g))),ceil:g=>f(Math.ceil(d(g)))})),a}function Due(){const c=H6(P4()).domain([1,10]);return c.copy=()=>vw(c,Due()).base(c.base()),Cu.apply(c,arguments),c}function Tue(c){return function(a){return Math.sign(a)*Math.log1p(Math.abs(a/c))}}function kue(c){return function(a){return Math.sign(a)*Math.expm1(Math.abs(a))*c}}function $6(c){var a=1,l=c(Tue(a),kue(a));return l.constant=function(h){return arguments.length?c(Tue(a=+h),kue(a)):a},hg(l)}function Mue(){var c=$6(P4());return c.copy=function(){return vw(c,Mue()).constant(c.constant())},Cu.apply(c,arguments)}function Eue(c){return function(a){return a<0?-Math.pow(-a,c):Math.pow(a,c)}}function nKe(c){return c<0?-Math.sqrt(-c):Math.sqrt(c)}function iKe(c){return c<0?-c*c:c*c}function W6(c){var a=c(Cl,Cl),l=1;function h(){return 1===l?c(Cl,Cl):.5===l?c(nKe,iKe):c(Eue(l),Eue(1/l))}return a.exponent=function(d){return arguments.length?(l=+d,h()):l},hg(a)}function G6(){var c=W6(P4());return c.copy=function(){return vw(c,G6()).exponent(c.exponent())},Cu.apply(c,arguments),c}function rKe(){return G6.apply(null,arguments).exponent(.5)}function Aue(c){return Math.sign(c)*c*c}function sKe(c){return Math.sign(c)*Math.sqrt(Math.abs(c))}function Iue(){var h,c=z6(),a=[0,1],l=!1;function d(f){var p=sKe(c(f));return isNaN(p)?h:l?Math.round(p):p}return d.invert=function(f){return c.invert(Aue(f))},d.domain=function(f){return arguments.length?(c.domain(f),d):c.domain()},d.range=function(f){return arguments.length?(c.range((a=Array.from(f,I4)).map(Aue)),d):a.slice()},d.rangeRound=function(f){return d.range(f).round(!0)},d.round=function(f){return arguments.length?(l=!!f,d):l},d.clamp=function(f){return arguments.length?(c.clamp(f),d):c.clamp()},d.unknown=function(f){return arguments.length?(h=f,d):h},d.copy=function(){return Iue(c.domain(),a).round(l).clamp(c.clamp()).unknown(h)},Cu.apply(d,arguments),hg(d)}function Pue(){var h,c=[],a=[],l=[];function d(){var p=0,g=Math.max(1,a.length);for(l=new Array(g-1);++p<g;)l[p-1]=Gse(c,p/g);return f}function f(p){return null==p||isNaN(p=+p)?h:a[e0(l,p)]}return f.invertExtent=function(p){var g=a.indexOf(p);return g<0?[NaN,NaN]:[g>0?l[g-1]:c[0],g<l.length?l[g]:c[c.length-1]]},f.domain=function(p){if(!arguments.length)return c.slice();c=[];for(let g of p)null!=g&&!isNaN(g=+g)&&c.push(g);return c.sort(Ps),d()},f.range=function(p){return arguments.length?(a=Array.from(p),d()):a.slice()},f.unknown=function(p){return arguments.length?(h=p,f):h},f.quantiles=function(){return l.slice()},f.copy=function(){return Pue().domain(c).range(a).unknown(h)},Cu.apply(f,arguments)}function Rue(){var f,c=0,a=1,l=1,h=[.5],d=[0,1];function p(m){return null!=m&&m<=m?d[e0(h,m,0,l)]:f}function g(){var m=-1;for(h=new Array(l);++m<l;)h[m]=((m+1)*a-(m-l)*c)/(l+1);return p}return p.domain=function(m){return arguments.length?([c,a]=m,c=+c,a=+a,g()):[c,a]},p.range=function(m){return arguments.length?(l=(d=Array.from(m)).length-1,g()):d.slice()},p.invertExtent=function(m){var v=d.indexOf(m);return v<0?[NaN,NaN]:v<1?[c,h[0]]:v>=l?[h[l-1],a]:[h[v-1],h[v]]},p.unknown=function(m){return arguments.length&&(f=m),p},p.thresholds=function(){return h.slice()},p.copy=function(){return Rue().domain([c,a]).range(d).unknown(f)},Cu.apply(hg(p),arguments)}function Fue(){var l,c=[.5],a=[0,1],h=1;function d(f){return null!=f&&f<=f?a[e0(c,f,0,h)]:l}return d.domain=function(f){return arguments.length?(c=Array.from(f),h=Math.min(c.length,a.length-1),d):c.slice()},d.range=function(f){return arguments.length?(a=Array.from(f),h=Math.min(c.length,a.length-1),d):a.slice()},d.invertExtent=function(f){var p=a.indexOf(f);return[c[p-1],c[p]]},d.unknown=function(f){return arguments.length?(l=f,d):l},d.copy=function(){return Fue().domain(c).range(a).unknown(l)},Cu.apply(d,arguments)}const Yf=1e3,Su=6e4,Kf=60*Su,Jf=24*Kf,Q6=7*Jf,j6=365*Jf,Z6=new Date,q6=new Date;function _o(c,a,l,h){function d(f){return c(f=0===arguments.length?new Date:new Date(+f)),f}return d.floor=f=>(c(f=new Date(+f)),f),d.ceil=f=>(c(f=new Date(f-1)),a(f,1),c(f),f),d.round=f=>{const p=d(f),g=d.ceil(f);return f-p<g-f?p:g},d.offset=(f,p)=>(a(f=new Date(+f),null==p?1:Math.floor(p)),f),d.range=(f,p,g)=>{const m=[];if(f=d.ceil(f),g=null==g?1:Math.floor(g),!(f<p&&g>0))return m;let v;do{m.push(v=new Date(+f)),a(f,g),c(f)}while(v<f&&f<p);return m},d.filter=f=>_o(p=>{if(p>=p)for(;c(p),!f(p);)p.setTime(p-1)},(p,g)=>{if(p>=p)if(g<0)for(;++g<=0;)for(;a(p,-1),!f(p););else for(;--g>=0;)for(;a(p,1),!f(p););}),l&&(d.count=(f,p)=>(Z6.setTime(+f),q6.setTime(+p),c(Z6),c(q6),Math.floor(l(Z6,q6))),d.every=f=>(f=Math.floor(f),isFinite(f)&&f>0?f>1?d.filter(h?p=>h(p)%f==0:p=>d.count(0,p)%f==0):d:null)),d}const l1=_o(()=>{},(c,a)=>{c.setTime(+c+a)},(c,a)=>a-c);l1.every=c=>(c=Math.floor(c),isFinite(c)&&c>0?c>1?_o(a=>{a.setTime(Math.floor(a/c)*c)},(a,l)=>{a.setTime(+a+l*c)},(a,l)=>(l-a)/c):l1:null);const Nue=l1.range,ep=_o(c=>{c.setTime(c-c.getMilliseconds())},(c,a)=>{c.setTime(+c+a*Yf)},(c,a)=>(a-c)/Yf,c=>c.getUTCSeconds()),Bue=ep.range,R4=_o(c=>{c.setTime(c-c.getMilliseconds()-c.getSeconds()*Yf)},(c,a)=>{c.setTime(+c+a*Su)},(c,a)=>(a-c)/Su,c=>c.getMinutes()),oKe=R4.range,F4=_o(c=>{c.setUTCSeconds(0,0)},(c,a)=>{c.setTime(+c+a*Su)},(c,a)=>(a-c)/Su,c=>c.getUTCMinutes()),aKe=F4.range,L4=_o(c=>{c.setTime(c-c.getMilliseconds()-c.getSeconds()*Yf-c.getMinutes()*Su)},(c,a)=>{c.setTime(+c+a*Kf)},(c,a)=>(a-c)/Kf,c=>c.getHours()),lKe=L4.range,N4=_o(c=>{c.setUTCMinutes(0,0,0)},(c,a)=>{c.setTime(+c+a*Kf)},(c,a)=>(a-c)/Kf,c=>c.getUTCHours()),cKe=N4.range,c1=_o(c=>c.setHours(0,0,0,0),(c,a)=>c.setDate(c.getDate()+a),(c,a)=>(a-c-(a.getTimezoneOffset()-c.getTimezoneOffset())*Su)/Jf,c=>c.getDate()-1),uKe=c1.range,yw=_o(c=>{c.setUTCHours(0,0,0,0)},(c,a)=>{c.setUTCDate(c.getUTCDate()+a)},(c,a)=>(a-c)/Jf,c=>c.getUTCDate()-1),hKe=yw.range,X6=_o(c=>{c.setUTCHours(0,0,0,0)},(c,a)=>{c.setUTCDate(c.getUTCDate()+a)},(c,a)=>(a-c)/Jf,c=>Math.floor(c/Jf)),dKe=X6.range;function I0(c){return _o(a=>{a.setDate(a.getDate()-(a.getDay()+7-c)%7),a.setHours(0,0,0,0)},(a,l)=>{a.setDate(a.getDate()+7*l)},(a,l)=>(l-a-(l.getTimezoneOffset()-a.getTimezoneOffset())*Su)/Q6)}const u1=I0(0),_w=I0(1),Vue=I0(2),Uue=I0(3),P0=I0(4),zue=I0(5),Hue=I0(6),$ue=u1.range,fKe=_w.range,pKe=Vue.range,gKe=Uue.range,mKe=P0.range,vKe=zue.range,yKe=Hue.range;function R0(c){return _o(a=>{a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+7-c)%7),a.setUTCHours(0,0,0,0)},(a,l)=>{a.setUTCDate(a.getUTCDate()+7*l)},(a,l)=>(l-a)/Q6)}const h1=R0(0),bw=R0(1),Wue=R0(2),Gue=R0(3),F0=R0(4),Que=R0(5),jue=R0(6),Zue=h1.range,_Ke=bw.range,bKe=Wue.range,CKe=Gue.range,SKe=F0.range,xKe=Que.range,wKe=jue.range,B4=_o(c=>{c.setDate(1),c.setHours(0,0,0,0)},(c,a)=>{c.setMonth(c.getMonth()+a)},(c,a)=>a.getMonth()-c.getMonth()+12*(a.getFullYear()-c.getFullYear()),c=>c.getMonth()),OKe=B4.range,V4=_o(c=>{c.setUTCDate(1),c.setUTCHours(0,0,0,0)},(c,a)=>{c.setUTCMonth(c.getUTCMonth()+a)},(c,a)=>a.getUTCMonth()-c.getUTCMonth()+12*(a.getUTCFullYear()-c.getUTCFullYear()),c=>c.getUTCMonth()),DKe=V4.range,Md=_o(c=>{c.setMonth(0,1),c.setHours(0,0,0,0)},(c,a)=>{c.setFullYear(c.getFullYear()+a)},(c,a)=>a.getFullYear()-c.getFullYear(),c=>c.getFullYear());Md.every=c=>isFinite(c=Math.floor(c))&&c>0?_o(a=>{a.setFullYear(Math.floor(a.getFullYear()/c)*c),a.setMonth(0,1),a.setHours(0,0,0,0)},(a,l)=>{a.setFullYear(a.getFullYear()+l*c)}):null;const TKe=Md.range,Ed=_o(c=>{c.setUTCMonth(0,1),c.setUTCHours(0,0,0,0)},(c,a)=>{c.setUTCFullYear(c.getUTCFullYear()+a)},(c,a)=>a.getUTCFullYear()-c.getUTCFullYear(),c=>c.getUTCFullYear());Ed.every=c=>isFinite(c=Math.floor(c))&&c>0?_o(a=>{a.setUTCFullYear(Math.floor(a.getUTCFullYear()/c)*c),a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},(a,l)=>{a.setUTCFullYear(a.getUTCFullYear()+l*c)}):null;const kKe=Ed.range;function que(c,a,l,h,d,f){const p=[[ep,1,Yf],[ep,5,5e3],[ep,15,15e3],[ep,30,3e4],[f,1,Su],[f,5,5*Su],[f,15,15*Su],[f,30,30*Su],[d,1,Kf],[d,3,3*Kf],[d,6,6*Kf],[d,12,12*Kf],[h,1,Jf],[h,2,2*Jf],[l,1,Q6],[a,1,2592e6],[a,3,7776e6],[c,1,j6]];function m(v,y,_){const b=Math.abs(y-v)/_,C=Uk(([,,O])=>O).right(p,b);if(C===p.length)return c.every($k(v/j6,y/j6,_));if(0===C)return l1.every(Math.max($k(v,y,_),1));const[x,w]=p[b/p[C-1][2]<p[C][2]/b?C-1:C];return x.every(w)}return[function g(v,y,_){const b=y<v;b&&([v,y]=[y,v]);const C=_&&"function"==typeof _.range?_:m(v,y,_),x=C?C.range(v,+y+1):[];return b?x.reverse():x},m]}const[Xue,Yue]=que(Ed,V4,h1,X6,N4,F4),[Kue,Jue]=que(Md,B4,u1,c1,L4,R4);function Y6(c){if(0<=c.y&&c.y<100){var a=new Date(-1,c.m,c.d,c.H,c.M,c.S,c.L);return a.setFullYear(c.y),a}return new Date(c.y,c.m,c.d,c.H,c.M,c.S,c.L)}function K6(c){if(0<=c.y&&c.y<100){var a=new Date(Date.UTC(-1,c.m,c.d,c.H,c.M,c.S,c.L));return a.setUTCFullYear(c.y),a}return new Date(Date.UTC(c.y,c.m,c.d,c.H,c.M,c.S,c.L))}function Cw(c,a,l){return{y:c,m:a,d:l,H:0,M:0,S:0,L:0}}function ehe(c){var a=c.dateTime,l=c.date,h=c.time,d=c.periods,f=c.days,p=c.shortDays,g=c.months,m=c.shortMonths,v=Sw(d),y=xw(d),_=Sw(f),b=xw(f),C=Sw(p),x=xw(p),w=Sw(g),O=xw(g),D=Sw(m),T=xw(m),M={a:function j(Le){return p[Le.getDay()]},A:function Q(Le){return f[Le.getDay()]},b:function X(Le){return m[Le.getMonth()]},B:function Y(Le){return g[Le.getMonth()]},c:null,d:ohe,e:ohe,f:YKe,g:aJe,G:cJe,H:ZKe,I:qKe,j:XKe,L:ahe,m:KKe,M:JKe,p:function ne(Le){return d[+(Le.getHours()>=12)]},q:function re(Le){return 1+~~(Le.getMonth()/3)},Q:fhe,s:phe,S:eJe,u:tJe,U:nJe,V:iJe,w:rJe,W:sJe,x:null,X:null,y:oJe,Y:lJe,Z:uJe,"%":dhe},k={a:function fe(Le){return p[Le.getUTCDay()]},A:function de(Le){return f[Le.getUTCDay()]},b:function De(Le){return m[Le.getUTCMonth()]},B:function we(Le){return g[Le.getUTCMonth()]},c:null,d:che,e:che,f:pJe,g:wJe,G:DJe,H:hJe,I:dJe,j:fJe,L:uhe,m:gJe,M:mJe,p:function Fe(Le){return d[+(Le.getUTCHours()>=12)]},q:function qe(Le){return 1+~~(Le.getUTCMonth()/3)},Q:fhe,s:phe,S:vJe,u:yJe,U:_Je,V:bJe,w:CJe,W:SJe,x:null,X:null,y:xJe,Y:OJe,Z:TJe,"%":dhe},E={a:function $(Le,ze,it){var ve=C.exec(ze.slice(it));return ve?(Le.w=x.get(ve[0].toLowerCase()),it+ve[0].length):-1},A:function H(Le,ze,it){var ve=_.exec(ze.slice(it));return ve?(Le.w=b.get(ve[0].toLowerCase()),it+ve[0].length):-1},b:function J(Le,ze,it){var ve=D.exec(ze.slice(it));return ve?(Le.m=T.get(ve[0].toLowerCase()),it+ve[0].length):-1},B:function ee(Le,ze,it){var ve=w.exec(ze.slice(it));return ve?(Le.m=O.get(ve[0].toLowerCase()),it+ve[0].length):-1},c:function B(Le,ze,it){return I(Le,a,ze,it)},d:rhe,e:rhe,f:WKe,g:ihe,G:nhe,H:she,I:she,j:UKe,L:$Ke,m:VKe,M:zKe,p:function U(Le,ze,it){var ve=v.exec(ze.slice(it));return ve?(Le.p=y.get(ve[0].toLowerCase()),it+ve[0].length):-1},q:BKe,Q:QKe,s:jKe,S:HKe,u:PKe,U:RKe,V:FKe,w:IKe,W:LKe,x:function G(Le,ze,it){return I(Le,l,ze,it)},X:function W(Le,ze,it){return I(Le,h,ze,it)},y:ihe,Y:nhe,Z:NKe,"%":GKe};function P(Le,ze){return function(it){var tt,Ie,et,ve=[],Ue=-1,st=0,dt=Le.length;for(it instanceof Date||(it=new Date(+it));++Ue<dt;)37===Le.charCodeAt(Ue)&&(ve.push(Le.slice(st,Ue)),null!=(Ie=the[tt=Le.charAt(++Ue)])?tt=Le.charAt(++Ue):Ie="e"===tt?" ":"0",(et=ze[tt])&&(tt=et(it,Ie)),ve.push(tt),st=Ue+1);return ve.push(Le.slice(st,Ue)),ve.join("")}}function V(Le,ze){return function(it){var st,dt,ve=Cw(1900,void 0,1);if(I(ve,Le,it+="",0)!=it.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(1e3*ve.s+("L"in ve?ve.L:0));if(ze&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+12*ve.p),void 0===ve.m&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(dt=(st=K6(Cw(ve.y,0,1))).getUTCDay(),st=dt>4||0===dt?bw.ceil(st):bw(st),st=yw.offset(st,7*(ve.V-1)),ve.y=st.getUTCFullYear(),ve.m=st.getUTCMonth(),ve.d=st.getUTCDate()+(ve.w+6)%7):(dt=(st=Y6(Cw(ve.y,0,1))).getDay(),st=dt>4||0===dt?_w.ceil(st):_w(st),st=c1.offset(st,7*(ve.V-1)),ve.y=st.getFullYear(),ve.m=st.getMonth(),ve.d=st.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),dt="Z"in ve?K6(Cw(ve.y,0,1)).getUTCDay():Y6(Cw(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+7*ve.W-(dt+5)%7:ve.w+7*ve.U-(dt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,K6(ve)):Y6(ve)}}function I(Le,ze,it,ve){for(var tt,Ie,Ue=0,st=ze.length,dt=it.length;Ue<st;){if(ve>=dt)return-1;if(37===(tt=ze.charCodeAt(Ue++))){if(tt=ze.charAt(Ue++),!(Ie=E[tt in the?ze.charAt(Ue++):tt])||(ve=Ie(Le,it,ve))<0)return-1}else if(tt!=it.charCodeAt(ve++))return-1}return ve}return M.x=P(l,M),M.X=P(h,M),M.c=P(a,M),k.x=P(l,k),k.X=P(h,k),k.c=P(a,k),{format:function(Le){var ze=P(Le+="",M);return ze.toString=function(){return Le},ze},parse:function(Le){var ze=V(Le+="",!1);return ze.toString=function(){return Le},ze},utcFormat:function(Le){var ze=P(Le+="",k);return ze.toString=function(){return Le},ze},utcParse:function(Le){var ze=V(Le+="",!0);return ze.toString=function(){return Le},ze}}}var d1,J6,ghe,U4,eU,the={"-":"",_:" ",0:"0"},ra=/^\s*\d+/,MKe=/^%/,EKe=/[\\^$*+?|[\]().{}]/g;function xr(c,a,l){var h=c<0?"-":"",d=(h?-c:c)+"",f=d.length;return h+(f<l?new Array(l-f+1).join(a)+d:d)}function AKe(c){return c.replace(EKe,"\\$&")}function Sw(c){return new RegExp("^(?:"+c.map(AKe).join("|")+")","i")}function xw(c){return new Map(c.map((a,l)=>[a.toLowerCase(),l]))}function IKe(c,a,l){var h=ra.exec(a.slice(l,l+1));return h?(c.w=+h[0],l+h[0].length):-1}function PKe(c,a,l){var h=ra.exec(a.slice(l,l+1));return h?(c.u=+h[0],l+h[0].length):-1}function RKe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.U=+h[0],l+h[0].length):-1}function FKe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.V=+h[0],l+h[0].length):-1}function LKe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.W=+h[0],l+h[0].length):-1}function nhe(c,a,l){var h=ra.exec(a.slice(l,l+4));return h?(c.y=+h[0],l+h[0].length):-1}function ihe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.y=+h[0]+(+h[0]>68?1900:2e3),l+h[0].length):-1}function NKe(c,a,l){var h=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(a.slice(l,l+6));return h?(c.Z=h[1]?0:-(h[2]+(h[3]||"00")),l+h[0].length):-1}function BKe(c,a,l){var h=ra.exec(a.slice(l,l+1));return h?(c.q=3*h[0]-3,l+h[0].length):-1}function VKe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.m=h[0]-1,l+h[0].length):-1}function rhe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.d=+h[0],l+h[0].length):-1}function UKe(c,a,l){var h=ra.exec(a.slice(l,l+3));return h?(c.m=0,c.d=+h[0],l+h[0].length):-1}function she(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.H=+h[0],l+h[0].length):-1}function zKe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.M=+h[0],l+h[0].length):-1}function HKe(c,a,l){var h=ra.exec(a.slice(l,l+2));return h?(c.S=+h[0],l+h[0].length):-1}function $Ke(c,a,l){var h=ra.exec(a.slice(l,l+3));return h?(c.L=+h[0],l+h[0].length):-1}function WKe(c,a,l){var h=ra.exec(a.slice(l,l+6));return h?(c.L=Math.floor(h[0]/1e3),l+h[0].length):-1}function GKe(c,a,l){var h=MKe.exec(a.slice(l,l+1));return h?l+h[0].length:-1}function QKe(c,a,l){var h=ra.exec(a.slice(l));return h?(c.Q=+h[0],l+h[0].length):-1}function jKe(c,a,l){var h=ra.exec(a.slice(l));return h?(c.s=+h[0],l+h[0].length):-1}function ohe(c,a){return xr(c.getDate(),a,2)}function ZKe(c,a){return xr(c.getHours(),a,2)}function qKe(c,a){return xr(c.getHours()%12||12,a,2)}function XKe(c,a){return xr(1+c1.count(Md(c),c),a,3)}function ahe(c,a){return xr(c.getMilliseconds(),a,3)}function YKe(c,a){return ahe(c,a)+"000"}function KKe(c,a){return xr(c.getMonth()+1,a,2)}function JKe(c,a){return xr(c.getMinutes(),a,2)}function eJe(c,a){return xr(c.getSeconds(),a,2)}function tJe(c){var a=c.getDay();return 0===a?7:a}function nJe(c,a){return xr(u1.count(Md(c)-1,c),a,2)}function lhe(c){var a=c.getDay();return a>=4||0===a?P0(c):P0.ceil(c)}function iJe(c,a){return c=lhe(c),xr(P0.count(Md(c),c)+(4===Md(c).getDay()),a,2)}function rJe(c){return c.getDay()}function sJe(c,a){return xr(_w.count(Md(c)-1,c),a,2)}function oJe(c,a){return xr(c.getFullYear()%100,a,2)}function aJe(c,a){return xr((c=lhe(c)).getFullYear()%100,a,2)}function lJe(c,a){return xr(c.getFullYear()%1e4,a,4)}function cJe(c,a){var l=c.getDay();return xr((c=l>=4||0===l?P0(c):P0.ceil(c)).getFullYear()%1e4,a,4)}function uJe(c){var a=c.getTimezoneOffset();return(a>0?"-":(a*=-1,"+"))+xr(a/60|0,"0",2)+xr(a%60,"0",2)}function che(c,a){return xr(c.getUTCDate(),a,2)}function hJe(c,a){return xr(c.getUTCHours(),a,2)}function dJe(c,a){return xr(c.getUTCHours()%12||12,a,2)}function fJe(c,a){return xr(1+yw.count(Ed(c),c),a,3)}function uhe(c,a){return xr(c.getUTCMilliseconds(),a,3)}function pJe(c,a){return uhe(c,a)+"000"}function gJe(c,a){return xr(c.getUTCMonth()+1,a,2)}function mJe(c,a){return xr(c.getUTCMinutes(),a,2)}function vJe(c,a){return xr(c.getUTCSeconds(),a,2)}function yJe(c){var a=c.getUTCDay();return 0===a?7:a}function _Je(c,a){return xr(h1.count(Ed(c)-1,c),a,2)}function hhe(c){var a=c.getUTCDay();return a>=4||0===a?F0(c):F0.ceil(c)}function bJe(c,a){return c=hhe(c),xr(F0.count(Ed(c),c)+(4===Ed(c).getUTCDay()),a,2)}function CJe(c){return c.getUTCDay()}function SJe(c,a){return xr(bw.count(Ed(c)-1,c),a,2)}function xJe(c,a){return xr(c.getUTCFullYear()%100,a,2)}function wJe(c,a){return xr((c=hhe(c)).getUTCFullYear()%100,a,2)}function OJe(c,a){return xr(c.getUTCFullYear()%1e4,a,4)}function DJe(c,a){var l=c.getUTCDay();return xr((c=l>=4||0===l?F0(c):F0.ceil(c)).getUTCFullYear()%1e4,a,4)}function TJe(){return"+0000"}function dhe(){return"%"}function fhe(c){return+c}function phe(c){return Math.floor(+c/1e3)}function mhe(c){return d1=ehe(c),J6=d1.format,ghe=d1.parse,U4=d1.utcFormat,eU=d1.utcParse,d1}function kJe(c){return new Date(c)}function MJe(c){return c instanceof Date?+c:+new Date(+c)}function tU(c,a,l,h,d,f,p,g,m,v){var y=z6(),_=y.invert,b=y.domain,C=v(".%L"),x=v(":%S"),w=v("%I:%M"),O=v("%I %p"),D=v("%a %d"),T=v("%b %d"),M=v("%B"),k=v("%Y");function E(P){return(m(P)<P?C:g(P)<P?x:p(P)<P?w:f(P)<P?O:h(P)<P?d(P)<P?D:T:l(P)<P?M:k)(P)}return y.invert=function(P){return new Date(_(P))},y.domain=function(P){return arguments.length?b(Array.from(P,MJe)):b().map(kJe)},y.ticks=function(P){var V=b();return c(V[0],V[V.length-1],P??10)},y.tickFormat=function(P,V){return null==V?E:v(V)},y.nice=function(P){var V=b();return(!P||"function"!=typeof P.range)&&(P=a(V[0],V[V.length-1],P??10)),P?b(Sue(V,P)):y},y.copy=function(){return vw(y,tU(c,a,l,h,d,f,p,g,m,v))},y}function EJe(){return Cu.apply(tU(Kue,Jue,Md,B4,u1,c1,L4,R4,ep,J6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function AJe(){return Cu.apply(tU(Xue,Yue,Ed,V4,h1,yw,N4,F4,ep,U4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function z4(){var l,h,d,f,m,c=0,a=1,p=Cl,g=!1;function v(_){return null==_||isNaN(_=+_)?m:p(0===d?.5:(_=(f(_)-l)*d,g?Math.max(0,Math.min(1,_)):_))}function y(_){return function(b){var C,x;return arguments.length?([C,x]=b,p=_(C,x),v):[p(0),p(1)]}}return v.domain=function(_){return arguments.length?([c,a]=_,l=f(c=+c),h=f(a=+a),d=l===h?0:1/(h-l),v):[c,a]},v.clamp=function(_){return arguments.length?(g=!!_,v):g},v.interpolator=function(_){return arguments.length?(p=_,v):p},v.range=y(eg),v.rangeRound=y(E4),v.unknown=function(_){return arguments.length?(m=_,v):m},function(_){return f=_,l=_(c),h=_(a),d=l===h?0:1/(h-l),v}}function dg(c,a){return a.domain(c.domain()).interpolator(c.interpolator()).clamp(c.clamp()).unknown(c.unknown())}function vhe(){var c=hg(z4()(Cl));return c.copy=function(){return dg(c,vhe())},Xf.apply(c,arguments)}function yhe(){var c=H6(z4()).domain([1,10]);return c.copy=function(){return dg(c,yhe()).base(c.base())},Xf.apply(c,arguments)}function _he(){var c=$6(z4());return c.copy=function(){return dg(c,_he()).constant(c.constant())},Xf.apply(c,arguments)}function nU(){var c=W6(z4());return c.copy=function(){return dg(c,nU()).exponent(c.exponent())},Xf.apply(c,arguments)}function IJe(){return nU.apply(null,arguments).exponent(.5)}function bhe(){var c=[],a=Cl;function l(h){if(null!=h&&!isNaN(h=+h))return a((e0(c,h,1)-1)/(c.length-1))}return l.domain=function(h){if(!arguments.length)return c.slice();c=[];for(let d of h)null!=d&&!isNaN(d=+d)&&c.push(d);return c.sort(Ps),l},l.interpolator=function(h){return arguments.length?(a=h,l):a},l.range=function(){return c.map((h,d)=>a(d/(c.length-1)))},l.quantiles=function(h){return Array.from({length:h+1},(d,f)=>Dx(c,f/h))},l.copy=function(){return bhe(a).domain(c)},Xf.apply(l,arguments)}function H4(){var d,f,p,g,m,y,b,c=0,a=.5,l=1,h=1,v=Cl,_=!1;function C(w){return isNaN(w=+w)?b:(w=.5+((w=+y(w))-f)*(h*w<h*f?g:m),v(_?Math.max(0,Math.min(1,w)):w))}function x(w){return function(O){var D,T,M;return arguments.length?([D,T,M]=O,v=hue(w,[D,T,M]),C):[v(0),v(.5),v(1)]}}return C.domain=function(w){return arguments.length?([c,a,l]=w,d=y(c=+c),f=y(a=+a),p=y(l=+l),g=d===f?0:.5/(f-d),m=f===p?0:.5/(p-f),h=f<d?-1:1,C):[c,a,l]},C.clamp=function(w){return arguments.length?(_=!!w,C):_},C.interpolator=function(w){return arguments.length?(v=w,C):v},C.range=x(eg),C.rangeRound=x(E4),C.unknown=function(w){return arguments.length?(b=w,C):b},function(w){return y=w,d=w(c),f=w(a),p=w(l),g=d===f?0:.5/(f-d),m=f===p?0:.5/(p-f),h=f<d?-1:1,C}}function Che(){var c=hg(H4()(Cl));return c.copy=function(){return dg(c,Che())},Xf.apply(c,arguments)}function She(){var c=H6(H4()).domain([.1,1,10]);return c.copy=function(){return dg(c,She()).base(c.base())},Xf.apply(c,arguments)}function xhe(){var c=$6(H4());return c.copy=function(){return dg(c,xhe()).constant(c.constant())},Xf.apply(c,arguments)}function iU(){var c=W6(H4());return c.copy=function(){return dg(c,iU()).exponent(c.exponent())},Xf.apply(c,arguments)}function PJe(){return iU.apply(null,arguments).exponent(.5)}function Hi(c){for(var a=c.length/6|0,l=new Array(a),h=0;h<a;)l[h]="#"+c.slice(6*h,6*++h);return l}mhe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const RJe=Hi("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),FJe=Hi("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),LJe=Hi("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),NJe=Hi("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),BJe=Hi("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),VJe=Hi("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),UJe=Hi("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),zJe=Hi("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),HJe=Hi("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),$Je=Hi("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),es=c=>Doe(c[c.length-1]);var whe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Hi);const WJe=es(whe);var Ohe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Hi);const GJe=es(Ohe);var Dhe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Hi);const QJe=es(Dhe);var The=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Hi);const jJe=es(The);var khe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Hi);const ZJe=es(khe);var Mhe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Hi);const qJe=es(Mhe);var Ehe=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Hi);const XJe=es(Ehe);var Ahe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Hi);const YJe=es(Ahe);var Ihe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Hi);const KJe=es(Ihe);var Phe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Hi);const JJe=es(Phe);var Rhe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Hi);const eet=es(Rhe);var Fhe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Hi);const tet=es(Fhe);var Lhe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Hi);const net=es(Lhe);var Nhe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Hi);const iet=es(Nhe);var Bhe=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Hi);const ret=es(Bhe);var Vhe=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Hi);const set=es(Vhe);var Uhe=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Hi);const oet=es(Uhe);var zhe=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Hi);const aet=es(zhe);var Hhe=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Hi);const cet=es(Hhe);var $he=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Hi);const uet=es($he);var Whe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Hi);const het=es(Whe);var Ghe=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Hi);const det=es(Ghe);var Qhe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Hi);const fet=es(Qhe);var jhe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Hi);const pet=es(jhe);var Zhe=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Hi);const get=es(Zhe);var qhe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Hi);const met=es(qhe);var Xhe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Hi);const vet=es(Xhe);function yet(c){return c=Math.max(0,Math.min(1,c)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-c*(35.34-c*(2381.73-c*(6402.7-c*(7024.72-2710.57*c)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+c*(170.73+c*(52.82-c*(131.46-c*(176.58-67.37*c)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+c*(442.36-c*(2482.43-c*(6167.24-c*(6614.94-2475.67*c)))))))+")"}const _et=A4(mh(300,.5,0),mh(-240,.5,1));var bet=A4(mh(-100,.75,.35),mh(80,1.5,.8)),Cet=A4(mh(260,.75,.35),mh(80,1.5,.8)),$4=mh();function xet(c){(c<0||c>1)&&(c-=Math.floor(c));var a=Math.abs(c-.5);return $4.h=360*c-100,$4.s=1.5-1.5*a,$4.l=.8-.9*a,$4+""}var W4=Wf(),wet=Math.PI/3,Oet=2*Math.PI/3;function Det(c){var a;return c=(.5-c)*Math.PI,W4.r=255*(a=Math.sin(c))*a,W4.g=255*(a=Math.sin(c+wet))*a,W4.b=255*(a=Math.sin(c+Oet))*a,W4+""}function Tet(c){return c=Math.max(0,Math.min(1,c)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+c*(1172.33-c*(10793.56-c*(33300.12-c*(38394.49-14825.05*c)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+c*(557.33+c*(1225.33-c*(3574.96-c*(1073.77+707.56*c)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+c*(3211.1-c*(15327.97-c*(27814-c*(22569.18-6838.66*c)))))))+")"}function G4(c){var a=c.length;return function(l){return c[Math.max(0,Math.min(a-1,Math.floor(l*a)))]}}const ket=G4(Hi("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Met=G4(Hi("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Eet=G4(Hi("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Aet=G4(Hi("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Iet(c){return yo(Kk(c).call(document.documentElement))}var Pet=0;function Yhe(){return new rU}function rU(){this._="@"+(++Pet).toString(36)}function Ret(c,a){return c.target&&(c=Aoe(c),void 0===a&&(a=c.currentTarget),c=c.touches||[c]),Array.from(c,l=>Oc(l,a))}function Fet(c){return"string"==typeof c?new cl([document.querySelectorAll(c)],[document.documentElement]):new cl([ioe(c)],d8)}function Li(c){return function(){return c}}rU.prototype=Yhe.prototype={constructor:rU,get:function(c){for(var a=this._;!(a in c);)if(!(c=c.parentNode))return;return c[a]},set:function(c,a){return c[this._]=a},remove:function(c){return this._ in c&&delete c[this._]},toString:function(){return this._}};const Khe=Math.abs,Ba=Math.atan2,tp=Math.cos,Let=Math.max,f1=Math.min,ec=Math.sin,gs=Math.sqrt,Va=1e-12,fg=Math.PI,Q4=fg/2,pg=2*fg;function Net(c){return c>1?0:c<-1?fg:Math.acos(c)}function Jhe(c){return c>=1?Q4:c<=-1?-Q4:Math.asin(c)}function ww(c){let a=3;return c.digits=function(l){if(!arguments.length)return a;if(null==l)a=null;else{const h=Math.floor(l);if(!(h>=0))throw new RangeError(`invalid digits: ${l}`);a=h}return c},()=>new Ux(a)}function Bet(c){return c.innerRadius}function Vet(c){return c.outerRadius}function Uet(c){return c.startAngle}function zet(c){return c.endAngle}function Het(c){return c&&c.padAngle}function $et(c,a,l,h,d,f,p,g){var m=l-c,v=h-a,y=p-d,_=g-f,b=_*m-y*v;if(!(b*b<Va))return[c+(b=(y*(a-f)-_*(c-d))/b)*m,a+b*v]}function j4(c,a,l,h,d,f,p){var g=c-l,m=a-h,v=(p?f:-f)/gs(g*g+m*m),y=v*m,_=-v*g,b=c+y,C=a+_,x=l+y,w=h+_,O=(b+x)/2,D=(C+w)/2,T=x-b,M=w-C,k=T*T+M*M,E=d-f,P=b*w-x*C,V=(M<0?-1:1)*gs(Let(0,E*E*k-P*P)),I=(P*M-T*V)/k,U=(-P*T-M*V)/k,$=(P*M+T*V)/k,H=(-P*T+M*V)/k,J=I-O,ee=U-D,B=$-O,G=H-D;return J*J+ee*ee>B*B+G*G&&(I=$,U=H),{cx:I,cy:U,x01:-y,y01:-_,x11:I*(d/E-1),y11:U*(d/E-1)}}function sU(){var c=Bet,a=Vet,l=Li(0),h=null,d=Uet,f=zet,p=Het,g=null,m=ww(v);function v(){var y,_,b=+c.apply(this,arguments),C=+a.apply(this,arguments),x=d.apply(this,arguments)-Q4,w=f.apply(this,arguments)-Q4,O=Khe(w-x),D=w>x;if(g||(g=y=m()),C<b&&(_=C,C=b,b=_),C>Va)if(O>pg-Va)g.moveTo(C*tp(x),C*ec(x)),g.arc(0,0,C,x,w,!D),b>Va&&(g.moveTo(b*tp(w),b*ec(w)),g.arc(0,0,b,w,x,D));else{var ee,B,T=x,M=w,k=x,E=w,P=O,V=O,I=p.apply(this,arguments)/2,U=I>Va&&(h?+h.apply(this,arguments):gs(b*b+C*C)),$=f1(Khe(C-b)/2,+l.apply(this,arguments)),H=$,J=$;if(U>Va){var G=Jhe(U/b*ec(I)),W=Jhe(U/C*ec(I));(P-=2*G)>Va?(k+=G*=D?1:-1,E-=G):(P=0,k=E=(x+w)/2),(V-=2*W)>Va?(T+=W*=D?1:-1,M-=W):(V=0,T=M=(x+w)/2)}var j=C*tp(T),Q=C*ec(T),X=b*tp(E),Y=b*ec(E);if($>Va){var De,ne=C*tp(M),re=C*ec(M),fe=b*tp(k),de=b*ec(k);if(O<fg)if(De=$et(j,Q,fe,de,ne,re,X,Y)){var we=j-De[0],Fe=Q-De[1],qe=ne-De[0],Le=re-De[1],ze=1/ec(Net((we*qe+Fe*Le)/(gs(we*we+Fe*Fe)*gs(qe*qe+Le*Le)))/2),it=gs(De[0]*De[0]+De[1]*De[1]);H=f1($,(b-it)/(ze-1)),J=f1($,(C-it)/(ze+1))}else H=J=0}V>Va?J>Va?(ee=j4(fe,de,j,Q,C,J,D),B=j4(ne,re,X,Y,C,J,D),g.moveTo(ee.cx+ee.x01,ee.cy+ee.y01),J<$?g.arc(ee.cx,ee.cy,J,Ba(ee.y01,ee.x01),Ba(B.y01,B.x01),!D):(g.arc(ee.cx,ee.cy,J,Ba(ee.y01,ee.x01),Ba(ee.y11,ee.x11),!D),g.arc(0,0,C,Ba(ee.cy+ee.y11,ee.cx+ee.x11),Ba(B.cy+B.y11,B.cx+B.x11),!D),g.arc(B.cx,B.cy,J,Ba(B.y11,B.x11),Ba(B.y01,B.x01),!D))):(g.moveTo(j,Q),g.arc(0,0,C,T,M,!D)):g.moveTo(j,Q),b>Va&&P>Va?H>Va?(ee=j4(X,Y,ne,re,b,-H,D),B=j4(j,Q,fe,de,b,-H,D),g.lineTo(ee.cx+ee.x01,ee.cy+ee.y01),H<$?g.arc(ee.cx,ee.cy,H,Ba(ee.y01,ee.x01),Ba(B.y01,B.x01),!D):(g.arc(ee.cx,ee.cy,H,Ba(ee.y01,ee.x01),Ba(ee.y11,ee.x11),!D),g.arc(0,0,b,Ba(ee.cy+ee.y11,ee.cx+ee.x11),Ba(B.cy+B.y11,B.cx+B.x11),D),g.arc(B.cx,B.cy,H,Ba(B.y11,B.x11),Ba(B.y01,B.x01),!D))):g.arc(0,0,b,E,k,D):g.lineTo(X,Y)}else g.moveTo(0,0);if(g.closePath(),y)return g=null,y+""||null}return v.centroid=function(){var y=(+c.apply(this,arguments)+ +a.apply(this,arguments))/2,_=(+d.apply(this,arguments)+ +f.apply(this,arguments))/2-fg/2;return[tp(_)*y,ec(_)*y]},v.innerRadius=function(y){return arguments.length?(c="function"==typeof y?y:Li(+y),v):c},v.outerRadius=function(y){return arguments.length?(a="function"==typeof y?y:Li(+y),v):a},v.cornerRadius=function(y){return arguments.length?(l="function"==typeof y?y:Li(+y),v):l},v.padRadius=function(y){return arguments.length?(h=null==y?null:"function"==typeof y?y:Li(+y),v):h},v.startAngle=function(y){return arguments.length?(d="function"==typeof y?y:Li(+y),v):d},v.endAngle=function(y){return arguments.length?(f="function"==typeof y?y:Li(+y),v):f},v.padAngle=function(y){return arguments.length?(p="function"==typeof y?y:Li(+y),v):p},v.context=function(y){return arguments.length?(g=y??null,v):g},v}var Wet=Array.prototype.slice;function Z4(c){return"object"==typeof c&&"length"in c?c:Array.from(c)}function ede(c){this._context=c}function q4(c){return new ede(c)}function oU(c){return c[0]}function aU(c){return c[1]}function Sh(c,a){var l=Li(!0),h=null,d=q4,f=null,p=ww(g);function g(m){var v,_,C,y=(m=Z4(m)).length,b=!1;for(null==h&&(f=d(C=p())),v=0;v<=y;++v)!(v<y&&l(_=m[v],v,m))===b&&((b=!b)?f.lineStart():f.lineEnd()),b&&f.point(+c(_,v,m),+a(_,v,m));if(C)return f=null,C+""||null}return c="function"==typeof c?c:void 0===c?oU:Li(c),a="function"==typeof a?a:void 0===a?aU:Li(a),g.x=function(m){return arguments.length?(c="function"==typeof m?m:Li(+m),g):c},g.y=function(m){return arguments.length?(a="function"==typeof m?m:Li(+m),g):a},g.defined=function(m){return arguments.length?(l="function"==typeof m?m:Li(!!m),g):l},g.curve=function(m){return arguments.length?(d=m,null!=h&&(f=d(h)),g):d},g.context=function(m){return arguments.length?(null==m?h=f=null:f=d(h=m),g):h},g}function lU(c,a,l){var h=null,d=Li(!0),f=null,p=q4,g=null,m=ww(v);function v(_){var b,C,x,O,T,w=(_=Z4(_)).length,D=!1,M=new Array(w),k=new Array(w);for(null==f&&(g=p(T=m())),b=0;b<=w;++b){if(!(b<w&&d(O=_[b],b,_))===D)if(D=!D)C=b,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),x=b-1;x>=C;--x)g.point(M[x],k[x]);g.lineEnd(),g.areaEnd()}D&&(M[b]=+c(O,b,_),k[b]=+a(O,b,_),g.point(h?+h(O,b,_):M[b],l?+l(O,b,_):k[b]))}if(T)return g=null,T+""||null}function y(){return Sh().defined(d).curve(p).context(f)}return c="function"==typeof c?c:void 0===c?oU:Li(+c),a="function"==typeof a?a:Li(void 0===a?0:+a),l="function"==typeof l?l:void 0===l?aU:Li(+l),v.x=function(_){return arguments.length?(c="function"==typeof _?_:Li(+_),h=null,v):c},v.x0=function(_){return arguments.length?(c="function"==typeof _?_:Li(+_),v):c},v.x1=function(_){return arguments.length?(h=null==_?null:"function"==typeof _?_:Li(+_),v):h},v.y=function(_){return arguments.length?(a="function"==typeof _?_:Li(+_),l=null,v):a},v.y0=function(_){return arguments.length?(a="function"==typeof _?_:Li(+_),v):a},v.y1=function(_){return arguments.length?(l=null==_?null:"function"==typeof _?_:Li(+_),v):l},v.lineX0=v.lineY0=function(){return y().x(c).y(a)},v.lineY1=function(){return y().x(c).y(l)},v.lineX1=function(){return y().x(h).y(a)},v.defined=function(_){return arguments.length?(d="function"==typeof _?_:Li(!!_),v):d},v.curve=function(_){return arguments.length?(p=_,null!=f&&(g=p(f)),v):p},v.context=function(_){return arguments.length?(null==_?f=g=null:g=p(f=_),v):f},v}function Get(c,a){return a<c?-1:a>c?1:a>=c?0:NaN}function Qet(c){return c}function jet(){var c=Qet,a=Get,l=null,h=Li(0),d=Li(pg),f=Li(0);function p(g){var m,y,_,D,k,v=(g=Z4(g)).length,b=0,C=new Array(v),x=new Array(v),w=+h.apply(this,arguments),O=Math.min(pg,Math.max(-pg,d.apply(this,arguments)-w)),T=Math.min(Math.abs(O)/v,f.apply(this,arguments)),M=T*(O<0?-1:1);for(m=0;m<v;++m)(k=x[C[m]=m]=+c(g[m],m,g))>0&&(b+=k);for(null!=a?C.sort(function(E,P){return a(x[E],x[P])}):null!=l&&C.sort(function(E,P){return l(g[E],g[P])}),m=0,_=b?(O-v*M)/b:0;m<v;++m,w=D)x[y=C[m]]={data:g[y],index:m,value:k=x[y],startAngle:w,endAngle:D=w+(k>0?k*_:0)+M,padAngle:T};return x}return p.value=function(g){return arguments.length?(c="function"==typeof g?g:Li(+g),p):c},p.sortValues=function(g){return arguments.length?(a=g,l=null,p):a},p.sort=function(g){return arguments.length?(l=g,a=null,p):l},p.startAngle=function(g){return arguments.length?(h="function"==typeof g?g:Li(+g),p):h},p.endAngle=function(g){return arguments.length?(d="function"==typeof g?g:Li(+g),p):d},p.padAngle=function(g){return arguments.length?(f="function"==typeof g?g:Li(+g),p):f},p}ede.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,a):this._context.moveTo(c,a);break;case 1:this._point=2;default:this._context.lineTo(c,a)}}};var tde=cU(q4);function nde(c){this._curve=c}function cU(c){function a(l){return new nde(c(l))}return a._curve=c,a}function Ow(c){var a=c.curve;return c.angle=c.x,delete c.x,c.radius=c.y,delete c.y,c.curve=function(l){return arguments.length?a(cU(l)):a()._curve},c}function ide(){return Ow(Sh().curve(tde))}function rde(){var c=lU().curve(tde),a=c.curve,l=c.lineX0,h=c.lineX1,d=c.lineY0,f=c.lineY1;return c.angle=c.x,delete c.x,c.startAngle=c.x0,delete c.x0,c.endAngle=c.x1,delete c.x1,c.radius=c.y,delete c.y,c.innerRadius=c.y0,delete c.y0,c.outerRadius=c.y1,delete c.y1,c.lineStartAngle=function(){return Ow(l())},delete c.lineX0,c.lineEndAngle=function(){return Ow(h())},delete c.lineX1,c.lineInnerRadius=function(){return Ow(d())},delete c.lineY0,c.lineOuterRadius=function(){return Ow(f())},delete c.lineY1,c.curve=function(p){return arguments.length?a(cU(p)):a()._curve},c}function Dw(c,a){return[(a=+a)*Math.cos(c-=Math.PI/2),a*Math.sin(c)]}nde.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(c,a){this._curve.point(a*Math.sin(c),a*-Math.cos(c))}};class sde{constructor(a,l){this._context=a,this._x=l}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(a,l){switch(a=+a,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,l):this._context.moveTo(a,l);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+a)/2,this._y0,this._x0,l,a,l):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+l)/2,a,this._y0,a,l)}this._x0=a,this._y0=l}}class Zet{constructor(a){this._context=a}lineStart(){this._point=0}lineEnd(){}point(a,l){if(a=+a,l=+l,0===this._point)this._point=1;else{const h=Dw(this._x0,this._y0),d=Dw(this._x0,this._y0=(this._y0+l)/2),f=Dw(a,this._y0),p=Dw(a,l);this._context.moveTo(...h),this._context.bezierCurveTo(...d,...f,...p)}this._x0=a,this._y0=l}}function uU(c){return new sde(c,!0)}function ode(c){return new sde(c,!1)}function qet(c){return new Zet(c)}function Xet(c){return c.source}function Yet(c){return c.target}function X4(c){let a=Xet,l=Yet,h=oU,d=aU,f=null,p=null,g=ww(m);function m(){let v;const y=Wet.call(arguments),_=a.apply(this,y),b=l.apply(this,y);if(null==f&&(p=c(v=g())),p.lineStart(),y[0]=_,p.point(+h.apply(this,y),+d.apply(this,y)),y[0]=b,p.point(+h.apply(this,y),+d.apply(this,y)),p.lineEnd(),v)return p=null,v+""||null}return m.source=function(v){return arguments.length?(a=v,m):a},m.target=function(v){return arguments.length?(l=v,m):l},m.x=function(v){return arguments.length?(h="function"==typeof v?v:Li(+v),m):h},m.y=function(v){return arguments.length?(d="function"==typeof v?v:Li(+v),m):d},m.context=function(v){return arguments.length?(null==v?f=p=null:p=c(f=v),m):f},m}function Ket(){return X4(uU)}function Jet(){return X4(ode)}function ett(){const c=X4(qet);return c.angle=c.x,delete c.x,c.radius=c.y,delete c.y,c}const ttt=gs(3),ade={draw(c,a){const l=.59436*gs(a+f1(a/28,.75)),h=l/2,d=h*ttt;c.moveTo(0,l),c.lineTo(0,-l),c.moveTo(-d,-h),c.lineTo(d,h),c.moveTo(-d,h),c.lineTo(d,-h)}},Y4={draw(c,a){const l=gs(a/fg);c.moveTo(l,0),c.arc(0,0,l,0,pg)}},lde={draw(c,a){const l=gs(a/5)/2;c.moveTo(-3*l,-l),c.lineTo(-l,-l),c.lineTo(-l,-3*l),c.lineTo(l,-3*l),c.lineTo(l,-l),c.lineTo(3*l,-l),c.lineTo(3*l,l),c.lineTo(l,l),c.lineTo(l,3*l),c.lineTo(-l,3*l),c.lineTo(-l,l),c.lineTo(-3*l,l),c.closePath()}},cde=gs(1/3),ntt=2*cde,ude={draw(c,a){const l=gs(a/ntt),h=l*cde;c.moveTo(0,-l),c.lineTo(h,0),c.lineTo(0,l),c.lineTo(-h,0),c.closePath()}},hde={draw(c,a){const l=.62625*gs(a);c.moveTo(0,-l),c.lineTo(l,0),c.lineTo(0,l),c.lineTo(-l,0),c.closePath()}},dde={draw(c,a){const l=.87559*gs(a-f1(a/7,2));c.moveTo(-l,0),c.lineTo(l,0),c.moveTo(0,l),c.lineTo(0,-l)}},fde={draw(c,a){const l=gs(a),h=-l/2;c.rect(h,h,l,l)}},pde={draw(c,a){const l=.4431*gs(a);c.moveTo(l,l),c.lineTo(l,-l),c.lineTo(-l,-l),c.lineTo(-l,l),c.closePath()}},gde=ec(fg/10)/ec(7*fg/10),rtt=ec(pg/10)*gde,stt=-tp(pg/10)*gde,mde={draw(c,a){const l=gs(.8908130915292852*a),h=rtt*l,d=stt*l;c.moveTo(0,-l),c.lineTo(h,d);for(let f=1;f<5;++f){const p=pg*f/5,g=tp(p),m=ec(p);c.lineTo(m*l,-g*l),c.lineTo(g*h-m*d,m*h+g*d)}c.closePath()}},hU=gs(3),vde={draw(c,a){const l=-gs(a/(3*hU));c.moveTo(0,2*l),c.lineTo(-hU*l,-l),c.lineTo(hU*l,-l),c.closePath()}},ott=gs(3),yde={draw(c,a){const l=.6824*gs(a),h=l/2,d=l*ott/2;c.moveTo(0,-l),c.lineTo(d,h),c.lineTo(-d,h),c.closePath()}},xu=-.5,wu=gs(3)/2,dU=1/gs(12),att=3*(dU/2+1),_de={draw(c,a){const l=gs(a/att),h=l/2,d=l*dU,f=h,p=l*dU+l,g=-f,m=p;c.moveTo(h,d),c.lineTo(f,p),c.lineTo(g,m),c.lineTo(xu*h-wu*d,wu*h+xu*d),c.lineTo(xu*f-wu*p,wu*f+xu*p),c.lineTo(xu*g-wu*m,wu*g+xu*m),c.lineTo(xu*h+wu*d,xu*d-wu*h),c.lineTo(xu*f+wu*p,xu*p-wu*f),c.lineTo(xu*g+wu*m,xu*m-wu*g),c.closePath()}},fU={draw(c,a){const l=.6189*gs(a-f1(a/6,1.7));c.moveTo(-l,-l),c.lineTo(l,l),c.moveTo(-l,l),c.lineTo(l,-l)}},bde=[Y4,lde,ude,fde,mde,vde,_de],ltt=[Y4,dde,fU,yde,ade,pde,hde];function ctt(c,a){let l=null,h=ww(d);function d(){let f;if(l||(l=f=h()),c.apply(this,arguments).draw(l,+a.apply(this,arguments)),f)return l=null,f+""||null}return c="function"==typeof c?c:Li(c||Y4),a="function"==typeof a?a:Li(void 0===a?64:+a),d.type=function(f){return arguments.length?(c="function"==typeof f?f:Li(f),d):c},d.size=function(f){return arguments.length?(a="function"==typeof f?f:Li(+f),d):a},d.context=function(f){return arguments.length?(l=f??null,d):l},d}function gg(){}function K4(c,a,l){c._context.bezierCurveTo((2*c._x0+c._x1)/3,(2*c._y0+c._y1)/3,(c._x0+2*c._x1)/3,(c._y0+2*c._y1)/3,(c._x0+4*c._x1+a)/6,(c._y0+4*c._y1+l)/6)}function J4(c){this._context=c}function Tw(c){return new J4(c)}function Cde(c){this._context=c}function utt(c){return new Cde(c)}function Sde(c){this._context=c}function htt(c){return new Sde(c)}function xde(c,a){this._basis=new J4(c),this._beta=a}J4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:K4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,a):this._context.moveTo(c,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:K4(this,c,a)}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=a}},Cde.prototype={areaStart:gg,areaEnd:gg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1,this._x2=c,this._y2=a;break;case 1:this._point=2,this._x3=c,this._y3=a;break;case 2:this._point=3,this._x4=c,this._y4=a,this._context.moveTo((this._x0+4*this._x1+c)/6,(this._y0+4*this._y1+a)/6);break;default:K4(this,c,a)}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=a}},Sde.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var l=(this._x0+4*this._x1+c)/6,h=(this._y0+4*this._y1+a)/6;this._line?this._context.lineTo(l,h):this._context.moveTo(l,h);break;case 3:this._point=4;default:K4(this,c,a)}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=a}},xde.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var c=this._x,a=this._y,l=c.length-1;if(l>0)for(var m,h=c[0],d=a[0],f=c[l]-h,p=a[l]-d,g=-1;++g<=l;)this._basis.point(this._beta*c[g]+(1-this._beta)*(h+(m=g/l)*f),this._beta*a[g]+(1-this._beta)*(d+m*p));this._x=this._y=null,this._basis.lineEnd()},point:function(c,a){this._x.push(+c),this._y.push(+a)}};const dtt=function c(a){function l(h){return 1===a?new J4(h):new xde(h,a)}return l.beta=function(h){return c(+h)},l}(.85);function eE(c,a,l){c._context.bezierCurveTo(c._x1+c._k*(c._x2-c._x0),c._y1+c._k*(c._y2-c._y0),c._x2+c._k*(c._x1-a),c._y2+c._k*(c._y1-l),c._x2,c._y2)}function pU(c,a){this._context=c,this._k=(1-a)/6}pU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:eE(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,a):this._context.moveTo(c,a);break;case 1:this._point=2,this._x1=c,this._y1=a;break;case 2:this._point=3;default:eE(this,c,a)}this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const ftt=function c(a){function l(h){return new pU(h,a)}return l.tension=function(h){return c(+h)},l}(0);function gU(c,a){this._context=c,this._k=(1-a)/6}gU.prototype={areaStart:gg,areaEnd:gg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1,this._x3=c,this._y3=a;break;case 1:this._point=2,this._context.moveTo(this._x4=c,this._y4=a);break;case 2:this._point=3,this._x5=c,this._y5=a;break;default:eE(this,c,a)}this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const ptt=function c(a){function l(h){return new gU(h,a)}return l.tension=function(h){return c(+h)},l}(0);function mU(c,a){this._context=c,this._k=(1-a)/6}mU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eE(this,c,a)}this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const gtt=function c(a){function l(h){return new mU(h,a)}return l.tension=function(h){return c(+h)},l}(0);function vU(c,a,l){var h=c._x1,d=c._y1,f=c._x2,p=c._y2;if(c._l01_a>Va){var g=2*c._l01_2a+3*c._l01_a*c._l12_a+c._l12_2a,m=3*c._l01_a*(c._l01_a+c._l12_a);h=(h*g-c._x0*c._l12_2a+c._x2*c._l01_2a)/m,d=(d*g-c._y0*c._l12_2a+c._y2*c._l01_2a)/m}if(c._l23_a>Va){var v=2*c._l23_2a+3*c._l23_a*c._l12_a+c._l12_2a,y=3*c._l23_a*(c._l23_a+c._l12_a);f=(f*v+c._x1*c._l23_2a-a*c._l12_2a)/y,p=(p*v+c._y1*c._l23_2a-l*c._l12_2a)/y}c._context.bezierCurveTo(h,d,f,p,c._x2,c._y2)}function wde(c,a){this._context=c,this._alpha=a}wde.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){if(c=+c,a=+a,this._point){var l=this._x2-c,h=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(l*l+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(c,a):this._context.moveTo(c,a);break;case 1:this._point=2;break;case 2:this._point=3;default:vU(this,c,a)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const mtt=function c(a){function l(h){return a?new wde(h,a):new pU(h,0)}return l.alpha=function(h){return c(+h)},l}(.5);function Ode(c,a){this._context=c,this._alpha=a}Ode.prototype={areaStart:gg,areaEnd:gg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(c,a){if(c=+c,a=+a,this._point){var l=this._x2-c,h=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(l*l+h*h,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=c,this._y3=a;break;case 1:this._point=2,this._context.moveTo(this._x4=c,this._y4=a);break;case 2:this._point=3,this._x5=c,this._y5=a;break;default:vU(this,c,a)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const vtt=function c(a){function l(h){return a?new Ode(h,a):new gU(h,0)}return l.alpha=function(h){return c(+h)},l}(.5);function Dde(c,a){this._context=c,this._alpha=a}Dde.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){if(c=+c,a=+a,this._point){var l=this._x2-c,h=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(l*l+h*h,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vU(this,c,a)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=c,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const ytt=function c(a){function l(h){return a?new Dde(h,a):new mU(h,0)}return l.alpha=function(h){return c(+h)},l}(.5);function Tde(c){this._context=c}function _tt(c){return new Tde(c)}function kde(c){return c<0?-1:1}function Mde(c,a,l){var h=c._x1-c._x0,d=a-c._x1,f=(c._y1-c._y0)/(h||d<0&&-0),p=(l-c._y1)/(d||h<0&&-0),g=(f*d+p*h)/(h+d);return(kde(f)+kde(p))*Math.min(Math.abs(f),Math.abs(p),.5*Math.abs(g))||0}function Ede(c,a){var l=c._x1-c._x0;return l?(3*(c._y1-c._y0)/l-a)/2:a}function yU(c,a,l){var h=c._x0,f=c._x1,p=c._y1,g=(f-h)/3;c._context.bezierCurveTo(h+g,c._y0+g*a,f-g,p-g*l,f,p)}function tE(c){this._context=c}function Ade(c){this._context=new Ide(c)}function Ide(c){this._context=c}function btt(c){return new tE(c)}function Ctt(c){return new Ade(c)}function Pde(c){this._context=c}function Rde(c){var a,h,l=c.length-1,d=new Array(l),f=new Array(l),p=new Array(l);for(d[0]=0,f[0]=2,p[0]=c[0]+2*c[1],a=1;a<l-1;++a)d[a]=1,f[a]=4,p[a]=4*c[a]+2*c[a+1];for(d[l-1]=2,f[l-1]=7,p[l-1]=8*c[l-1]+c[l],a=1;a<l;++a)f[a]-=h=d[a]/f[a-1],p[a]-=h*p[a-1];for(d[l-1]=p[l-1]/f[l-1],a=l-2;a>=0;--a)d[a]=(p[a]-d[a+1])/f[a];for(f[l-1]=(c[l]+d[l-1])/2,a=0;a<l-1;++a)f[a]=2*c[a+1]-d[a+1];return[d,f]}function _U(c){return new Pde(c)}function nE(c,a){this._context=c,this._t=a}function Stt(c){return new nE(c,.5)}function bU(c){return new nE(c,0)}function xtt(c){return new nE(c,1)}function p1(c,a){if((p=c.length)>1)for(var h,d,p,l=1,f=c[a[0]],g=f.length;l<p;++l)for(d=f,f=c[a[l]],h=0;h<g;++h)f[h][1]+=f[h][0]=isNaN(d[h][1])?d[h][0]:d[h][1]}function g1(c){for(var a=c.length,l=new Array(a);--a>=0;)l[a]=a;return l}function wtt(c,a){return c[a]}function Ott(c){const a=[];return a.key=c,a}function Dtt(){var c=Li([]),a=g1,l=p1,h=wtt;function d(f){var g,y,p=Array.from(c.apply(this,arguments),Ott),m=p.length,v=-1;for(const _ of f)for(g=0,++v;g<m;++g)(p[g][v]=[0,+h(_,p[g].key,v,f)]).data=_;for(g=0,y=Z4(a(p));g<m;++g)p[y[g]].index=g;return l(p,y),p}return d.keys=function(f){return arguments.length?(c="function"==typeof f?f:Li(Array.from(f)),d):c},d.value=function(f){return arguments.length?(h="function"==typeof f?f:Li(+f),d):h},d.order=function(f){return arguments.length?(a=null==f?g1:"function"==typeof f?f:Li(Array.from(f)),d):a},d.offset=function(f){return arguments.length?(l=f??p1,d):l},d}function Ttt(c,a){if((h=c.length)>0){for(var l,h,p,d=0,f=c[0].length;d<f;++d){for(p=l=0;l<h;++l)p+=c[l][d][1]||0;if(p)for(l=0;l<h;++l)c[l][d][1]/=p}p1(c,a)}}function ktt(c,a){if((m=c.length)>0)for(var l,d,f,p,g,m,h=0,v=c[a[0]].length;h<v;++h)for(p=g=0,l=0;l<m;++l)(f=(d=c[a[l]][h])[1]-d[0])>0?(d[0]=p,d[1]=p+=f):f<0?(d[1]=g,d[0]=g+=f):(d[0]=0,d[1]=f)}function Mtt(c,a){if((d=c.length)>0){for(var d,l=0,h=c[a[0]],f=h.length;l<f;++l){for(var p=0,g=0;p<d;++p)g+=c[p][l][1]||0;h[l][1]+=h[l][0]=-g/2}p1(c,a)}}function Ett(c,a){if((p=c.length)>0&&(f=(d=c[a[0]]).length)>0){for(var d,f,p,l=0,h=1;h<f;++h){for(var g=0,m=0,v=0;g<p;++g){for(var y=c[a[g]],_=y[h][1]||0,C=(_-(y[h-1][1]||0))/2,x=0;x<g;++x){var w=c[a[x]];C+=(w[h][1]||0)-(w[h-1][1]||0)}m+=_,v+=C*_}d[h-1][1]+=d[h-1][0]=l,m&&(l-=v/m)}d[h-1][1]+=d[h-1][0]=l,p1(c,a)}}function Fde(c){var a=c.map(Att);return g1(c).sort(function(l,h){return a[l]-a[h]})}function Att(c){for(var d,a=-1,l=0,h=c.length,f=-1/0;++a<h;)(d=+c[a][1])>f&&(f=d,l=a);return l}function Lde(c){var a=c.map(Nde);return g1(c).sort(function(l,h){return a[l]-a[h]})}function Nde(c){for(var d,a=0,l=-1,h=c.length;++l<h;)(d=+c[l][1])&&(a+=d);return a}function Itt(c){return Lde(c).reverse()}function Ptt(c){var l,h,a=c.length,d=c.map(Nde),f=Fde(c),p=0,g=0,m=[],v=[];for(l=0;l<a;++l)h=f[l],p<g?(p+=d[h],m.push(h)):(g+=d[h],v.push(h));return v.reverse().concat(m)}function Rtt(c){return g1(c).reverse()}Tde.prototype={areaStart:gg,areaEnd:gg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(c,a){c=+c,a=+a,this._point?this._context.lineTo(c,a):(this._point=1,this._context.moveTo(c,a))}},tE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yU(this,this._t0,Ede(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(c,a){var l=NaN;if(a=+a,(c=+c)!==this._x1||a!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(c,a):this._context.moveTo(c,a);break;case 1:this._point=2;break;case 2:this._point=3,yU(this,Ede(this,l=Mde(this,c,a)),l);break;default:yU(this,this._t0,l=Mde(this,c,a))}this._x0=this._x1,this._x1=c,this._y0=this._y1,this._y1=a,this._t0=l}}},(Ade.prototype=Object.create(tE.prototype)).point=function(c,a){tE.prototype.point.call(this,a,c)},Ide.prototype={moveTo:function(c,a){this._context.moveTo(a,c)},closePath:function(){this._context.closePath()},lineTo:function(c,a){this._context.lineTo(a,c)},bezierCurveTo:function(c,a,l,h,d,f){this._context.bezierCurveTo(a,c,h,l,f,d)}},Pde.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var c=this._x,a=this._y,l=c.length;if(l)if(this._line?this._context.lineTo(c[0],a[0]):this._context.moveTo(c[0],a[0]),2===l)this._context.lineTo(c[1],a[1]);else for(var h=Rde(c),d=Rde(a),f=0,p=1;p<l;++f,++p)this._context.bezierCurveTo(h[0][f],d[0][f],h[1][f],d[1][f],c[p],a[p]);(this._line||0!==this._line&&1===l)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(c,a){this._x.push(+c),this._y.push(+a)}},nE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(c,a){switch(c=+c,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(c,a):this._context.moveTo(c,a);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,a),this._context.lineTo(c,a);else{var l=this._x*(1-this._t)+c*this._t;this._context.lineTo(l,this._y),this._context.lineTo(l,a)}}this._x=c,this._y=a}};var Bde="%Y-%m-%dT%H:%M:%S.%LZ",Ltt=Date.prototype.toISOString?function Ftt(c){return c.toISOString()}:U4(Bde);const Ntt=Ltt;var Vtt=+new Date("2000-01-01T00:00:00.000Z")?function Btt(c){var a=new Date(c);return isNaN(a)?null:a}:eU(Bde);const Utt=Vtt;function ztt(c,a,l){var h=new Bx,d=a;return null==a?(h.restart(c,a,l),h):(h._restart=h.restart,h.restart=function(f,p,g){p=+p,g=null==g?Nx():+g,h._restart(function m(v){v+=d,h._restart(m,d+=p,g),f(v)},p,g)},h.restart(c,a,l),h)}const iE=c=>()=>c;function Htt(c,{sourceEvent:a,target:l,transform:h,dispatch:d}){Object.defineProperties(this,{type:{value:c,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:h,enumerable:!0,configurable:!0},_:{value:d}})}function Ad(c,a,l){this.k=c,this.x=a,this.y=l}Ad.prototype={constructor:Ad,scale:function(c){return 1===c?this:new Ad(this.k*c,this.x,this.y)},translate:function(c,a){return 0===c&0===a?this:new Ad(this.k,this.x+this.k*c,this.y+this.k*a)},apply:function(c){return[c[0]*this.k+this.x,c[1]*this.k+this.y]},applyX:function(c){return c*this.k+this.x},applyY:function(c){return c*this.k+this.y},invert:function(c){return[(c[0]-this.x)/this.k,(c[1]-this.y)/this.k]},invertX:function(c){return(c-this.x)/this.k},invertY:function(c){return(c-this.y)/this.k},rescaleX:function(c){return c.copy().domain(c.range().map(this.invertX,this).map(c.invert,c))},rescaleY:function(c){return c.copy().domain(c.range().map(this.invertY,this).map(c.invert,c))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rE=new Ad(1,0,0);function Vde(c){for(;!c.__zoom;)if(!(c=c.parentNode))return rE;return c.__zoom}function CU(c){c.stopImmediatePropagation()}function kw(c){c.preventDefault(),c.stopImmediatePropagation()}function $tt(c){return!(c.ctrlKey&&"wheel"!==c.type||c.button)}function Wtt(){var c=this;return c instanceof SVGElement?(c=c.ownerSVGElement||c).hasAttribute("viewBox")?[[(c=c.viewBox.baseVal).x,c.y],[c.x+c.width,c.y+c.height]]:[[0,0],[c.width.baseVal.value,c.height.baseVal.value]]:[[0,0],[c.clientWidth,c.clientHeight]]}function Ude(){return this.__zoom||rE}function Gtt(c){return-c.deltaY*(1===c.deltaMode?.05:c.deltaMode?1:.002)*(c.ctrlKey?10:1)}function Qtt(){return navigator.maxTouchPoints||"ontouchstart"in this}function jtt(c,a,l){var h=c.invertX(a[0][0])-l[0][0],d=c.invertX(a[1][0])-l[1][0],f=c.invertY(a[0][1])-l[0][1],p=c.invertY(a[1][1])-l[1][1];return c.translate(d>h?(h+d)/2:Math.min(0,h)||Math.max(0,d),p>f?(f+p)/2:Math.min(0,f)||Math.max(0,p))}function Ztt(){var y,_,b,c=$tt,a=Wtt,l=jtt,h=Gtt,d=Qtt,f=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],g=250,m=aue,v=T_("start","zoom","end"),C=500,w=0,O=10;function D(B){B.property("__zoom",Ude).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",$).filter(d).on("touchstart.zoom",H).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",ee).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function T(B,G){return(G=Math.max(f[0],Math.min(f[1],G)))===B.k?B:new Ad(G,B.x,B.y)}function M(B,G,W){var j=G[0]-W[0]*B.k,Q=G[1]-W[1]*B.k;return j===B.x&&Q===B.y?B:new Ad(B.k,j,Q)}function k(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function E(B,G,W,j){B.on("start.zoom",function(){P(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(j).end()}).tween("zoom",function(){var Q=this,X=arguments,Y=P(Q,X).event(j),ne=a.apply(Q,X),re=null==W?k(ne):"function"==typeof W?W.apply(Q,X):W,fe=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),de=Q.__zoom,De="function"==typeof G?G.apply(Q,X):G,we=m(de.invert(re).concat(fe/de.k),De.invert(re).concat(fe/De.k));return function(Fe){if(1===Fe)Fe=De;else{var qe=we(Fe),Le=fe/qe[2];Fe=new Ad(Le,re[0]-qe[0]*Le,re[1]-qe[1]*Le)}Y.zoom(null,Fe)}})}function P(B,G,W){return!W&&B.__zooming||new V(B,G)}function V(B,G){this.that=B,this.args=G,this.active=0,this.sourceEvent=null,this.extent=a.apply(B,G),this.taps=0}function I(B,...G){if(c.apply(this,arguments)){var W=P(this,G).event(B),j=this.__zoom,Q=Math.max(f[0],Math.min(f[1],j.k*Math.pow(2,h.apply(this,arguments)))),X=Oc(B);if(W.wheel)(W.mouse[0][0]!==X[0]||W.mouse[0][1]!==X[1])&&(W.mouse[1]=j.invert(W.mouse[0]=X)),clearTimeout(W.wheel);else{if(j.k===Q)return;W.mouse=[X,j.invert(X)],h0(this),W.start()}kw(B),W.wheel=setTimeout(Y,150),W.zoom("mouse",l(M(T(j,Q),W.mouse[0],W.mouse[1]),W.extent,p))}function Y(){W.wheel=null,W.end()}}function U(B,...G){if(!b&&c.apply(this,arguments)){var W=B.currentTarget,j=P(this,G,!0).event(B),Q=yo(B.view).on("mousemove.zoom",re,!0).on("mouseup.zoom",fe,!0),X=Oc(B,W),Y=B.clientX,ne=B.clientY;Jk(B.view),CU(B),j.mouse=[X,this.__zoom.invert(X)],h0(this),j.start()}function re(de){if(kw(de),!j.moved){var De=de.clientX-Y,we=de.clientY-ne;j.moved=De*De+we*we>w}j.event(de).zoom("mouse",l(M(j.that.__zoom,j.mouse[0]=Oc(de,W),j.mouse[1]),j.extent,p))}function fe(de){Q.on("mousemove.zoom mouseup.zoom",null),eM(de.view,j.moved),kw(de),j.event(de).end()}}function $(B,...G){if(c.apply(this,arguments)){var W=this.__zoom,j=Oc(B.changedTouches?B.changedTouches[0]:B,this),Q=W.invert(j),X=W.k*(B.shiftKey?.5:2),Y=l(M(T(W,X),j,Q),a.apply(this,G),p);kw(B),g>0?yo(this).transition().duration(g).call(E,Y,j,B):yo(this).call(D.transform,Y,j,B)}}function H(B,...G){if(c.apply(this,arguments)){var X,Y,ne,re,W=B.touches,j=W.length,Q=P(this,G,B.changedTouches.length===j).event(B);for(CU(B),Y=0;Y<j;++Y)re=[re=Oc(ne=W[Y],this),this.__zoom.invert(re),ne.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==re[2]&&(Q.touch1=re,Q.taps=0):(Q.touch0=re,X=!0,Q.taps=1+!!y);y&&(y=clearTimeout(y)),X&&(Q.taps<2&&(_=re[0],y=setTimeout(function(){y=null},C)),h0(this),Q.start())}}function J(B,...G){if(this.__zooming){var X,Y,ne,re,W=P(this,G).event(B),j=B.changedTouches,Q=j.length;for(kw(B),X=0;X<Q;++X)ne=Oc(Y=j[X],this),W.touch0&&W.touch0[2]===Y.identifier?W.touch0[0]=ne:W.touch1&&W.touch1[2]===Y.identifier&&(W.touch1[0]=ne);if(Y=W.that.__zoom,W.touch1){var fe=W.touch0[0],de=W.touch0[1],De=W.touch1[0],we=W.touch1[1],Fe=(Fe=De[0]-fe[0])*Fe+(Fe=De[1]-fe[1])*Fe,qe=(qe=we[0]-de[0])*qe+(qe=we[1]-de[1])*qe;Y=T(Y,Math.sqrt(Fe/qe)),ne=[(fe[0]+De[0])/2,(fe[1]+De[1])/2],re=[(de[0]+we[0])/2,(de[1]+we[1])/2]}else{if(!W.touch0)return;ne=W.touch0[0],re=W.touch0[1]}W.zoom("touch",l(M(Y,ne,re),W.extent,p))}}function ee(B,...G){if(this.__zooming){var X,Y,W=P(this,G).event(B),j=B.changedTouches,Q=j.length;for(CU(B),b&&clearTimeout(b),b=setTimeout(function(){b=null},C),X=0;X<Q;++X)Y=j[X],W.touch0&&W.touch0[2]===Y.identifier?delete W.touch0:W.touch1&&W.touch1[2]===Y.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),2===W.taps&&(Y=Oc(Y,this),Math.hypot(_[0]-Y[0],_[1]-Y[1])<O)){var ne=yo(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return D.transform=function(B,G,W,j){var Q=B.selection?B.selection():B;Q.property("__zoom",Ude),B!==Q?E(B,G,W,j):Q.interrupt().each(function(){P(this,arguments).event(j).start().zoom(null,"function"==typeof G?G.apply(this,arguments):G).end()})},D.scaleBy=function(B,G,W,j){D.scaleTo(B,function(){var Q=this.__zoom.k,X="function"==typeof G?G.apply(this,arguments):G;return Q*X},W,j)},D.scaleTo=function(B,G,W,j){D.transform(B,function(){var Q=a.apply(this,arguments),X=this.__zoom,Y=null==W?k(Q):"function"==typeof W?W.apply(this,arguments):W,ne=X.invert(Y),re="function"==typeof G?G.apply(this,arguments):G;return l(M(T(X,re),Y,ne),Q,p)},W,j)},D.translateBy=function(B,G,W,j){D.transform(B,function(){return l(this.__zoom.translate("function"==typeof G?G.apply(this,arguments):G,"function"==typeof W?W.apply(this,arguments):W),a.apply(this,arguments),p)},null,j)},D.translateTo=function(B,G,W,j,Q){D.transform(B,function(){var X=a.apply(this,arguments),Y=this.__zoom,ne=null==j?k(X):"function"==typeof j?j.apply(this,arguments):j;return l(rE.translate(ne[0],ne[1]).scale(Y.k).translate("function"==typeof G?-G.apply(this,arguments):-G,"function"==typeof W?-W.apply(this,arguments):-W),X,p)},j,Q)},V.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,G){return this.mouse&&"mouse"!==B&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&"touch"!==B&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&"touch"!==B&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var G=yo(this.that).datum();v.call(B,this.that,new Htt(B,{sourceEvent:this.sourceEvent,target:D,type:B,transform:this.that.__zoom,dispatch:v}),G)}},D.wheelDelta=function(B){return arguments.length?(h="function"==typeof B?B:iE(+B),D):h},D.filter=function(B){return arguments.length?(c="function"==typeof B?B:iE(!!B),D):c},D.touchable=function(B){return arguments.length?(d="function"==typeof B?B:iE(!!B),D):d},D.extent=function(B){return arguments.length?(a="function"==typeof B?B:iE([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),D):a},D.scaleExtent=function(B){return arguments.length?(f[0]=+B[0],f[1]=+B[1],D):[f[0],f[1]]},D.translateExtent=function(B){return arguments.length?(p[0][0]=+B[0][0],p[1][0]=+B[1][0],p[0][1]=+B[0][1],p[1][1]=+B[1][1],D):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},D.constrain=function(B){return arguments.length?(l=B,D):l},D.duration=function(B){return arguments.length?(g=+B,D):g},D.interpolate=function(B){return arguments.length?(m=B,D):m},D.on=function(){var B=v.on.apply(v,arguments);return B===v?D:B},D.clickDistance=function(B){return arguments.length?(w=(B=+B)*B,D):Math.sqrt(w)},D.tapDistance=function(B){return arguments.length?(O=+B,D):O},D}Vde.prototype=Ad.prototype;class L0{constructor(a,l,h){S(this,"first",void 0),S(this,"second",void 0),S(this,"third",void 0),this.first=a,this.second=l,this.third=h}isSecond(){return!!this.second}isThird(){return!!this.third}toArrays(){let a=[this.first];return this.second&&a.push(this.second),this.third&&a.push(this.third),a}}class N0{constructor(a,l,h,d,f,p,g,m,v,y,_,b,C,x,w,O,D,T){S(this,"\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442",void 0),S(this,"\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b",void 0),S(this,"\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443",void 0),S(this,"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439",void 0),S(this,"scale",void 0),S(this,"width",void 0),S(this,"height",void 0),S(this,"delta",void 0),S(this,"lineWidth",void 0),S(this,"lineSizeExtra",void 0),S(this,"colorBackground",void 0),S(this,"colorMain",void 0),S(this,"colorText",void 0),S(this,"colorCircles",void 0),S(this,"colorLines",void 0),S(this,"colorLinesHighlighted",void 0),S(this,"colorLinesSecondary",void 0),S(this,"svgImage",void 0),S(this,"rects",[]),S(this,"lines",[]),S(this,"linesPlate",[]),S(this,"texts",[]),S(this,"circles",[]),S(this,"ellipses",[]),S(this,"pathes",[]),S(this,"onItemSelected",null),S(this,"params",new Map),S(this,"fontLineRelativeOffset",.75),S(this,"fontSize",20),S(this,"fontWeight",700),this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442=a,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=l,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443=h,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=d,this.scale=f,this.width=p,this.height=g,this.delta=m,this.lineWidth=v,this.lineSizeExtra=y,this.colorBackground=_,this.colorMain=b,this.colorText=C,this.colorCircles=x,this.colorLines=w,this.colorLinesHighlighted=O,this.colorLinesSecondary=D,this.svgImage=T}addParam(a,l){return this.params.set(a,l),this}getParam(a){return this.params.get(a)}setColorBackground(a){return this.colorBackground=a,this}setColorMain(a){return this.colorMain=a,this}setColorText(a){return this.colorText=a,this}setColorLines(a){return this.colorLines=a,this}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setFontSize(a){return this.fontSize=a,this}setFontLineRelativeOffset(a){return this.fontLineRelativeOffset=a,this}setFontWeight(a){return this.fontWeight=a,this}setLineWidth(a){return this.lineWidth=a,this}static builder(){return new N0(!0,!0,!1,!0,.5,512,512,Math.min(512,512)/15,2,Math.min(512,512)/20,"black","gold","firebrick","red","white","green","cyan",null)}clearAll(){return this.rects=[],this.lines=[],this.linesPlate=[],this.texts=[],this.circles=[],this.ellipses=[],this.pathes=[],this}}class ji{constructor(a,l){S(this,"x",void 0),S(this,"y",void 0),this.x=a,this.y=l}}class sE{constructor(a,l,h){S(this,"name",void 0),S(this,"x",void 0),S(this,"y",void 0),this.name=a,this.x=l,this.y=h}static builder(){return new sE("translate",0,0)}setName(a){return this.name=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}}class oE{constructor(a,l,h){S(this,"name",void 0),S(this,"x",void 0),S(this,"y",void 0),this.name=a,this.x=l,this.y=h}static builder(){return new oE("scale",0,0)}setName(a){return this.name=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}}class SU{constructor(a,l,h=0,d=0){S(this,"name",void 0),S(this,"angle",void 0),S(this,"x",void 0),S(this,"y",void 0),this.name=a,this.angle=l,this.x=h,this.y=d}static builder(){return new SU("rotate",0)}setName(a){return this.name=a,this}setAngle(a){return this.angle=a,this}setRotationX(a){return this.x=a,this}setRotationY(a){return this.y=a,this}}class xU{constructor(a,l){S(this,"name",void 0),S(this,"angle",void 0),this.name=a,this.angle=l}static builder(){return new xU("skewY",0)}setName(a){return this.name=a,this}setAngle(a){return this.angle=a,this}}class wU{constructor(a,l){S(this,"name",void 0),S(this,"angle",void 0),this.name=a,this.angle=l}static builder(){return new wU("skewX",0)}setName(a){return this.name=a,this}setAngle(a){return this.angle=a,this}}class Zi{constructor(a,l){S(this,"name",void 0),S(this,"func",void 0),this.name=a,this.func=l}static builder(){return new Zi("",null)}setName(a){return this.name=a,this}setFunc(a){return this.func=a,this}}class m1{constructor(a,l=[],h=[],d=!0,f=null){S(this,"transform",void 0),S(this,"classes",void 0),S(this,"events",void 0),S(this,"visible",void 0),S(this,"transitions",void 0),S(this,"d3Object",null),this.transform=a,this.classes=l,this.events=h,this.visible=d,this.transitions=f}transformToString(a=null){return(a||this.transform).map((h,d)=>{let f=`${h.name}(`;return"translate"==h.name||"scale"==h.name?f+=`${h.x},${h.y}`:"rotate"==h.name?(f+=h.angle,(h.x||h.y)&&(f+=`,${h.x},${h.y}`)):("skewY"==h.name||"skewX"==h.name)&&(f+=h.angle),f+=")",f}).join(" ")}apply(a,l,h=null,d=null){var f=h||this.d3Object;if(null==f)return null;var p=f.transition().delay(a).duration(l);return d&&(p=p.on("end",d)),this.applyToD3Object(p)}applyToD3Object(a=null){return null}applyEventsToD3Object(a=null){var l=this,h=a;if(l.events.forEach(d=>{h=h.on(d.name,d.func)}),l.d3Object=h,l.transitions&&l.transitions.length){let d=!1,f=()=>{let p=null;d&&l.transitions&&l.transitions.length&&l.transitions.shift(),l.transitions&&l.transitions.length>0&&(p=l.transitions[0]),null!=p&&(d=!0,p.data.clone(l),h=(h=p.apply(h)).on("end",f))};f()}return h}emulateCollapseTransitions(){return this.transitions&&this.transitions.length>0&&(this.d3Object.interrupt(),this.transitions[this.transitions.length-1].data.cloneTo(this),this.transitions=[]),this}setTransforms(a){return this.transform=a,this}translate(a,l){return this.transform.push(sE.builder().setX(a).setY(l)),this}scale(a,l){return this.transform.push(oE.builder().setX(a).setY(l)),this}rotate(a,l=0,h=0){return this.transform.push(SU.builder().setAngle(a).setRotationX(l).setRotationY(h)),this}skewY(a){return this.transform.push(xU.builder().setAngle(a)),this}skewX(a){return this.transform.push(wU.builder().setAngle(a)),this}setClasses(a){return this.classes=a,this}addClass(a){return this.classes.indexOf(a)<0&&this.classes.push(a),this}removeClass(a){let l=this.classes.indexOf(a);return l>=0&&this.classes.splice(l,1),this}addEvent(a){return this.events.push(a),this}setVisible(a){return this.visible=a,this}getVisible(){return this.visible}setTransitions(a){return this.transitions=a,this}addTransition(a){return null==this.transitions&&(this.transitions=[]),this.transitions.push(a),this}}class aE{constructor(a,l=0,h=1e3){S(this,"data",void 0),S(this,"delay",void 0),S(this,"duration",void 0),this.data=a,this.delay=l,this.duration=h}static builder(){return new aE(null)}setData(a){return this.data=a,this}setDelay(a){return this.delay=a,this}setDuration(a){return this.duration=a,this}apply(a=null){return this.data.apply(this.delay,this.duration,a)}}class _i extends m1{constructor(a,l,h,d,f,p,g,m,v,y,_=300){super(y),S(this,"text",void 0),S(this,"x",void 0),S(this,"y",void 0),S(this,"color",void 0),S(this,"strokeColor",void 0),S(this,"strokeWidth",void 0),S(this,"angle",void 0),S(this,"fontSize",void 0),S(this,"textAnchor",void 0),S(this,"fontWeight",void 0),this.text=a,this.x=l,this.y=h,this.color=d,this.strokeColor=f,this.strokeWidth=p,this.angle=g,this.fontSize=m,this.textAnchor=v,this.fontWeight=_}applyToD3Object(a=null){var h=this;return(a||this.d3Object).attr("x",0*h.x).attr("y",0*h.y).attr("font-size",h.fontSize).attr("font-weight",h.fontWeight).attr("text-anchor",h.textAnchor).attr("transform",this.transformToString(h.transform||[])).style("stroke",h.strokeColor).style("stroke-width",h.strokeWidth).style("fill",h.color).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden")}clone(a=null){return(a||_i.builder()).setText(this.text).setX(this.x).setY(this.y).setColor(this.color).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setAngle(this.angle).setFontSize(this.fontSize).setTextAnchor(this.textAnchor).setFontWeight(this.fontWeight).setTransitions(null).setTransforms([...this.transform]).setClasses([...this.classes])}static builder(){return new _i("\u0422\u0435\u043a\u0441\u0442",0,0,"firebrick","black",0,0,"20px","start",[])}setBold(a=!0){return this.fontWeight=a?700:300,this}setFontWeight(a){return this.fontWeight=a,this}setText(a){return this.text=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setColor(a){return this.color=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}setAngle(a){return this.angle=a,this}setTextAnchor(a){return this.textAnchor=a,this}setFontSize(a){return this.fontSize=a,this}}class mg extends m1{constructor(a,l,h,d,f,p){super(p),S(this,"r",void 0),S(this,"fillColor",void 0),S(this,"fillOpacity",void 0),S(this,"strokeColor",void 0),S(this,"strokeWidth",void 0),this.r=a,this.fillColor=l,this.fillOpacity=h,this.strokeColor=d,this.strokeWidth=f}clone(a=null){return(a||mg.builder()).setR(this.r).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setTransforms([...this.transform]).setTransitions(null).setClasses([...this.classes])}applyToD3Object(a=null){var h=this;return(a||this.d3Object).attr("cx",0).attr("cy",0).attr("r",h.r).attr("fill",h.fillColor).attr("fill-opacity",h.fillOpacity).attr("stroke",h.strokeColor).attr("stroke-width",h.strokeWidth).attr("transform",this.transformToString(h&&h.transform||[])).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden")}static builder(){return new mg(100,"green",1,"white",2,[])}setR(a){return this.r=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}}class OU extends m1{constructor(a,l,h,d,f,p,g){super(g),S(this,"rx",void 0),S(this,"ry",void 0),S(this,"fillColor",void 0),S(this,"fillOpacity",void 0),S(this,"strokeColor",void 0),S(this,"strokeWidth",void 0),this.rx=a,this.ry=l,this.fillColor=h,this.fillOpacity=d,this.strokeColor=f,this.strokeWidth=p}static builder(){return new OU(100,50,"green",1,"white",2,[])}setRx(a){return this.rx=a,this}setRy(a){return this.ry=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}}class bi extends m1{constructor(a,l,h,d,f,p,g,m,v){super(v),S(this,"x1",void 0),S(this,"y1",void 0),S(this,"x2",void 0),S(this,"y2",void 0),S(this,"color",void 0),S(this,"width",void 0),S(this,"startArrow",void 0),S(this,"endArrow",void 0),this.x1=a,this.y1=l,this.x2=h,this.y2=d,this.color=f,this.width=p,this.startArrow=g,this.endArrow=m}clone(){return bi.builder().setX1(this.x1).setY1(this.y1).setX2(this.x2).setY2(this.y2).setColor(this.color).setWidth(this.width).setStartArrow(this.startArrow).setEndArrow(this.endArrow).setTransforms(this.transform?[...this.transform]:[]).setTransitions(null)}static builder(){return new bi(0,0,0,0,"white",1,"","",[])}setX1(a){return this.x1=a,this}setY1(a){return this.y1=a,this}setX2(a){return this.x2=a,this}setY2(a){return this.y2=a,this}setColor(a){return this.color=a,this}setWidth(a){return this.width=a,this}setStartArrow(a){return this.startArrow=a,this}setEndArrow(a){return this.endArrow=a,this}}class Ds extends m1{constructor(a,l,h,d,f,p,g,m,v,y,_,b,C){super(C),S(this,"x",void 0),S(this,"y",void 0),S(this,"rx",void 0),S(this,"ry",void 0),S(this,"width",void 0),S(this,"height",void 0),S(this,"fillColor",void 0),S(this,"fillOpacity",void 0),S(this,"strokeColor",void 0),S(this,"strokeOpacity",void 0),S(this,"strokeWidth",void 0),S(this,"locked",void 0),this.x=a,this.y=l,this.rx=h,this.ry=d,this.width=f,this.height=p,this.fillColor=g,this.fillOpacity=m,this.strokeColor=v,this.strokeOpacity=y,this.strokeWidth=_,this.locked=b}static builder(){return new Ds(0,0,0,0,100,100,"white",1,"",1,0,!1,[])}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setRx(a){return this.rx=a,this}setRy(a){return this.ry=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeOpacity(a){return this.strokeOpacity=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}setLocked(a){return this.locked=a,this}}class ms extends m1{constructor(a,l,h,d,f,p,g,m,v){super(m),S(this,"datum",void 0),S(this,"d",void 0),S(this,"strokeColor",void 0),S(this,"strokeWidth",void 0),S(this,"strokeOpacity",void 0),S(this,"fillColor",void 0),S(this,"fillOpacity",void 0),S(this,"renderHandler",void 0),this.datum=a,this.d=l,this.strokeColor=h,this.strokeWidth=d,this.strokeOpacity=f,this.fillColor=p,this.fillOpacity=g,this.renderHandler=v}clone(a=null){return(a||ms.builder()).setD(this.datum).setD(this.d).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setStrokeOpacity(this.strokeOpacity).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setTransforms([...this.transform]).setTransitions(null).setRenderHandler(this.renderHandler).setClasses([...this.classes])}applyToD3Object(a=null){var h=this;return(a||this.d3Object).attr("d",h.d).attr("fill",h.fillColor).attr("fill-opacity",h.fillOpacity).attr("stroke",h.strokeColor).attr("stroke-width",h.strokeWidth).attr("stroke-opacity",h.strokeOpacity||1).attr("transform",this.transformToString(h.transform||[])).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden")}static builder(){return new ms(null,null,"steelblue",2,1,"none",1,[],null)}setDatum(a){return this.datum=a,this}setD(a){return this.d=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}setStrokeOpacity(a){return this.strokeOpacity=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setRenderHandler(a){return this.renderHandler=a,this}}let lE=(()=>{class c{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(l){return 1/(l*(Math.sqrt(5)+1)/2)}createDataScale(l,h,d){let f=h(l),p=l.scale,g=l.width*(1-p)/2,m=l.height*(1-p)/2;return f.toArrays().forEach(v=>{v.forEach(y=>{y.locked||(y.transform=y.transform||[],y.transform.unshift(sE.builder().setX(g).setY(m),oE.builder().setX(p).setY(p)))})}),d(l,f),f}get createDataPtr(){return l=>this.createData(l)}get createGolgofaDataPtr(){return l=>this.createData(l,1,1-.8,.27,.6,Math.PI/8)}createBackground(l,h=1){return Ds.builder().setX(0).setY(0).setWidth(l.width).setHeight(l.height).setFillColor(l.colorBackground).setFillOpacity(h).setLocked(!0)}createCrossText(l,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),v=l.width*(h||m),y=g||Math.atan2(1-m,.5),_=v*(d||1-m),b=v*(f||1-m),C=v*(f||.25),x=p?l.height*p+C*Math.tan(y):l.height-v/2,w=x+C*Math.tan(y)/2+l.delta/Math.cos(y)/2,O=(l.height+x+C*Math.tan(y)/2+l.delta/Math.cos(y)/2)/2,D=+(l.height-(x+C*Math.tan(y)/2+l.delta/Math.cos(y)/2)-l.height/12)/2/2,T=.55*l.width,M=[_i.builder().setText("\u0446\u0440\u0483\u044c").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(l.colorMain).translate(l.width/2-b/2,(d?(v*(d||1-m)-l.delta/2)/2:v*Math.pow(1-m,2))-2*l.delta).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),_i.builder().setText("\u0441\u043b\u0483\u0432\u044b").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(l.colorMain).translate(l.width/2+b/2,(d?(v*(d||1-m)-l.delta/2)/2:v*Math.pow(1-m,2))-2*l.delta).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),_i.builder().setText("\u0406\u0483\u0421").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(l.colorMain).translate((l.width-v)/2,_-l.delta).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),_i.builder().setText("\u0425\u0483\u0421").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(l.colorMain).translate((l.width+v)/2,_-l.delta).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),_i.builder().setText("\u0441\u043d\u0483\u044a").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width-v)/2,_+2*l.delta).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),_i.builder().setText("\u0431\u0436\u0483\u0457\u0439").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width+v)/2,_+2*l.delta).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),_i.builder().setText("\u043d\u0438").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(l.colorMain).translate((l.width-C)/2,(x-C/Math.cos(y)/2+(_+2*l.delta))/2-l.height/12/2).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),_i.builder().setText("\u043a\u0430").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(l.colorMain).translate((l.width+C)/2,(x-C/Math.cos(y)/2+(_+2*l.delta))/2-l.height/12/2).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),_i.builder().setText("\u043c").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width-C)/2,w+D).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),_i.builder().setText("\u043b").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width+C)/2,w+D).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),_i.builder().setText("\u0440").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width-C)/2,O+D).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),_i.builder().setText("\u0431").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width+C)/2,O+D).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),_i.builder().setText("\u0433").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate(l.width/2-(T/2+l.delta/2*3/2),l.height).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),_i.builder().setText("\u0433").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate(l.width/2+(T/2+l.delta/2*3/2),l.height).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),_i.builder().setText("\u043a").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate(l.width/2-(T/2+l.delta/2*3/2),_+.3*(l.height-_)+l.height/12).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})),_i.builder().setText("\u0442").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate(l.width/2+(T/2+l.delta/2*3/2),_+.3*(l.height-_)+l.height/12).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})),_i.builder().setText("\u0433").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width-C)/2,l.height+2*l.delta+l.height/12/2).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})),_i.builder().setText("\u0430").setFontSize(l.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(l.colorMain).translate((l.width+C)/2,l.height+2*l.delta+l.height/12/2).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")}))];return[M].forEach(k=>k.forEach(E=>E.addClass("cursor"))),[M]}createKopie(l,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),w=(p&&Math.tan(y),[]),O=l.delta/2/4,D=l.height*(1-d)*.8,E=[l.width/2-l.delta/2*5,l.height+l.delta/2],V=(H,J,ee="gold")=>{let B=(H=>({dd:H||[[0,0],[1,1],[1,-1],[0,0]],path:Sh().x(B=>B[0]).y(B=>B[1])}))(J);return((H,J,ee)=>H.rotate(-9,ee[0],ee[1]))(ms.builder().setDatum(B.dd).setD(B.path).setStrokeColor(ee).setStrokeWidth(1).setFillColor(ee).translate(H[0],H[1]),0,E)},I=(H,J,ee,B)=>{let G=[];return H.forEach(W=>{let j=[];j.push(W[0]*J+ee),j.push(W[1]*J+B),G.push(j)}),G},U=l.colorMain,$=[V([0,0],I([[-O,0],[-O,-D],[O,-D],[O,0],[-O,0]],1,E[0],E[1]),U),V([0,0],I([[0,2*O-D],[2*-O,-D-2*O],[0,-D-16*O],[2*+O,-D-2*O],[0,2*O-D]],1,E[0],E[1]),U),V([0,0],I([[3*-O/2,2*O-D],[0,-D-2*O],[3*+O/2,2*O-D],[3*-O/2,2*O-D]],1,E[0],E[1]),U),V([0,0],I([[3*-O/2,6*O-D],[0,2*O-D],[3*+O/2,6*O-D],[3*-O/2,6*O-D]],1,E[0],E[1]),U)];return[w,$].forEach(H=>H.forEach(J=>J.addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})).addClass("cursor"))),new L0(w,$)}createTrost(l,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),O=(p&&Math.tan(y),l.delta/2/4),D=l.height*(1-d)*.8,k=[l.width/2+l.delta/2*5,l.height+l.delta/2],P=($,H,J="gold",ee=!1)=>{let B=(($,H=!1)=>{let J=$||[[0,0],[1,1],[1,-1],[0,0]];const ee=Sh().x(B=>B[0]).y(B=>B[1]);return{dd:J,path:H?ee.curve(Tw):ee}})(H,ee);return(($,H,J)=>$.rotate(9,J[0],J[1]))(ms.builder().setDatum(B.dd).setD(B.path).setStrokeColor(J).setStrokeWidth(1).setFillColor(J).translate($[0],$[1]),0,k)},V=($,H,J,ee)=>{let B=[];return $.forEach(G=>{let W=[];W.push(G[0]*H+J),W.push(G[1]*H+ee),B.push(W)}),B},I=l.colorMain,U=[P([0,0],V([[-O,0],[-O,-D-3*O],[O,-D-3*O],[O,0],[-O,0]],1,k[0],k[1]),I),P([0,0],V([[0,-D-2*O],[5*-O,-D-2*O],[5*-O,-D-16*O],[0,-D-16*O],[5*+O,-D-16*O],[5*+O,-D-2*O],[0,-D-2*O]],1,k[0],k[1]),I,!0),P([0,0],V([[3*-O/2,2*O-D],[0,-D-2*O],[3*+O/2,2*O-D],[3*-O/2,2*O-D]],1,k[0],k[1]),I),P([0,0],V([[3*-O/2,6*O-D],[0,2*O-D],[3*+O/2,6*O-D],[3*-O/2,6*O-D]],1,k[0],k[1]),I)];return U.forEach($=>$.addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})).addClass("cursor")),new L0([],U)}createSkull(l,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),w=(p&&Math.tan(y),[]),O=.55*l.width,T=0*l.delta/4/2,M=l.delta/4/2,k=(Ie,et)=>et*(1.75*l.delta+2*Ie),E=(Ie,et)=>et*(1.75*l.delta+2*Ie),P=.5,U=.5,$=(Ie,et)=>U*k(Ie,et)/2/2,H=1.15,B=(Ie,et)=>k(Ie,et)*U/3.8,G=(Ie,et)=>k(Ie,et)*U/2.25,Q=1/5.7,X=(Ie,et)=>k(Ie,et)/2,Y=(Ie,et)=>k(Ie,et)/2,de=(k(T,1),k(T,1),2*M),De=(Ie,et,Gt,Tn)=>Ie.setX(et[0]).setY(et[1]).rotate(Gt,Tn[0],Tn[1]),Fe=Ie=>[l.width/2-k(T,Ie)/2+X(T,Ie),l.height+l.delta-T+M+de+Y(T,Ie)],qe=1.5;w.push(Ds.builder().setX(l.width/2-O/2).setY(l.height-qe).setWidth(O).setHeight(l.delta+qe).setFillColor(l.colorMain),Ds.builder().setX(l.width/2-O/2-l.delta/2*3).setY(l.height+l.delta-qe).setWidth(2.5*l.delta).setHeight(l.delta+qe).setFillColor(l.colorMain),Ds.builder().setX(l.width/2+O/2-l.delta).setY(l.height+l.delta-qe).setWidth(2.5*l.delta).setHeight(l.delta+qe).setFillColor(l.colorMain),Ds.builder().setX(l.width/2-O/2-l.delta/2*3).setY(l.height+2*l.delta-qe).setWidth(l.delta).setHeight(l.delta+qe).setFillColor(l.colorMain),Ds.builder().setX(l.width/2+O/2+l.delta/2).setY(l.height+2*l.delta-qe).setWidth(l.delta).setHeight(l.delta+qe).setFillColor(l.colorMain)),w.forEach(Ie=>Ie.addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})).addClass("cursor"));let ze=(Ie,et)=>{w.push(De(Ds.builder().setRx(.7*k(T,Ie)/2*.9).setRy(.7*E(T,Ie)/2*.9).setWidth(k(T,Ie)).setHeight(.7*E(T,Ie)).setFillColor(et?l.colorBackground:l.colorMain),[l.width/2-k(T,Ie)/2,l.height+l.delta+T+M+de],-45,Fe(Ie)),De(Ds.builder().setRx(.4*E(T,Ie)/2*.8).setRy(.4*E(T,Ie)/2*.8).setWidth(U*k(T,Ie)).setHeight(.4*E(T,Ie)).setFillColor(et?l.colorBackground:l.colorMain),[l.width/2-U*k(T,Ie)/2+$(T,Ie),l.height+l.delta+T+M+E(T,Ie)*P+de],-45,Fe(Ie)),De(Ds.builder().setRx(G(T,Ie)/2).setRy(G(T,Ie)/2).setWidth(G(T,Ie)*H).setHeight(G(T,Ie)).setFillColor(et?l.colorMain:l.colorBackground),[l.width/2+$(T,Ie)-B(T,Ie)/2+B(T,Ie)/2-G(T,Ie)*H/2-k(T,Ie)*Q*1,l.height+l.delta+T+M+E(T,Ie)*P/2+de],-45,Fe(Ie)),De(Ds.builder().setRx(G(T,Ie)/2).setRy(G(T,Ie)/2).setWidth(G(T,Ie)*H).setHeight(G(T,Ie)).setFillColor(et?l.colorMain:l.colorBackground),[l.width/2+$(T,Ie)-B(T,Ie)/2+B(T,Ie)/2-G(T,Ie)*H/2+k(T,Ie)*Q,l.height+l.delta+T+M+E(T,Ie)*P/2+de],-45,Fe(Ie)))};"white"==l.colorBackground&&ze(1.15,!1),ze(1,"white"==l.colorBackground);let dt=[],tt=(Ie,et)=>{dt.push(((Ie,et,Gt="gold",Tn=1)=>{let Zn=(Ie=>({dd:Ie||[[0,0],[1,1],[1,-1],[0,0]],path:Sh().x(Tn=>Tn[0]).y(Tn=>Tn[1]).curve(Tw)}))(et);return((Ie,et,Gt)=>Ie.rotate(-45,Gt[0],Gt[1]))(ms.builder().setDatum(Zn.dd).setD(Zn.path).setStrokeColor(Gt).setStrokeWidth(1).setFillColor(Gt).translate(Ie[0],Ie[1]),0,Fe(Tn))})([0,0],((Ie,et,Gt,Tn)=>{let Zn=[];return[[.5,0],[1,1],[0,1],[.5,0]].forEach(ye=>{let ce=[];ce.push(ye[0]*et+Gt),ce.push(ye[1]*et+Tn),Zn.push(ce)}),Zn})(0,1.35*B(T,Ie),l.width/2+$(T,Ie)-B(T,Ie)/2,l.height+l.delta+T+M+E(T,Ie)*P+de),et?l.colorMain:l.colorBackground,Ie))};return"white"==l.colorBackground&&tt(1.15,!1),tt(1,"white"==l.colorBackground),[w,dt].forEach(Ie=>Ie.forEach(et=>{0==et.events.length&&et.addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})).addClass("cursor")})),new L0(w,dt)}createCross(l,h=!0,d=0,f=0,p=0,g=0,m=0,v=0,y=0,_=0,b=0){let C=d,x=f,w=p||l.width,O=g||l.height,D=l.delta/l.width*w,T=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),M=w*(m||T),k=b||Math.atan2(1-T,.5),E=M*(v||1-T),P=M*(y||1-T),V=M*(y||.25),I=_?O*_+V*Math.tan(k):O-M/2,U=h?[Ds.builder().setX(C).setY(x).setWidth(w).setHeight(O).setFillColor(l.colorBackground).setLocked(!0)]:[];return U.push(Ds.builder().setX(C+w/2-D/2).setY(x).setWidth(D).setHeight(O).setFillColor(l.colorMain).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),Ds.builder().setX(C+(w-M)/2).setY(x+E-D/2).setWidth(M).setHeight(D).setFillColor(l.colorMain).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),Ds.builder().setX(0).setY(0).setWidth(P).setHeight(D).setFillColor(l.colorMain).translate(C+(w-P)/2,x+(v?(M*(v||1-T)-D/2)/2:M*Math.pow(1-T,2))-D/2).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439")})),Ds.builder().setX(0).setY(0).setWidth(V).setHeight(D/Math.cos(k)).setFillColor(l.colorMain).translate(C+(w-V)/2,x+I-V/Math.cos(k)/2).skewY(this.toDegrees(k)).addEvent(Zi.builder().setName("click").setFunc(()=>{l.onItemSelected&&l.onItemSelected("\u043a\u0440\u0435\u0441\u0442")}))),U}createData(l,h=0,d=0,f=0,p=0,g=0){let m=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),y=g||Math.atan2(1-m,.5),w=(p&&Math.tan(y),this.createCross(l,!0,0,0,0,0,h,d,f,p,g));[w].forEach(M=>M.forEach((k,E)=>{E&&k.addClass("cursor")}));let O=l.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?new L0([],[]):this.createSkull(l,h,d,f,p,g);w.push(...O.first);let D=O.second;O=l.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?O:this.createKopie(l,h,d,f,p,g),w.push(...O.first),D.push(...O.second),O=l.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?O:this.createTrost(l,h,d,f,p,g),w.push(...O.first),D.push(...O.second);let T=l.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?[[],[]]:this.createCrossText(l,h,d,f,p,g);return new L0(w,D,T[0])}createSizeHorizontalArrows(l,h,d,f,p,g=!0,m=!0,v="",y=""){let _=h.y<d.y?h:d,b=h.y<d.y?d:h,C=l.lineSizeExtra*(_.x<f.x?1:-1),x=[],w=[bi.builder().setX1(_.x).setY1(_.y).setX2(f.x+C).setY2(_.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth),bi.builder().setX1(b.x).setY1(b.y).setX2(f.x+C).setY2(b.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth)];if(_.y<=f.y&&f.y<=b.y){if(w.push(bi.builder().setX1(f.x).setY1(_.y).setX2(f.x).setY2(b.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setStartArrow(g?"arrowN":"arrow").setEndArrow(g?"arrowN":"arrow")),v){let O=Math.abs(C),D=O/2*v.length/2;x.push(_i.builder().setText(v).setFontSize(`${O}px`).translate(f.x-Math.abs(C)/2,(_.y+b.y)/2+D).rotate(-90).setColor("white"))}}else{let O=f.y<_.y?_.y-f.y:f.y-b.y;if(w.push(bi.builder().setX1(f.x).setY1(_.y-O).setX2(f.x).setY2(_.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"arrowN":"arrow"),bi.builder().setX1(f.x).setY1(b.y+O).setX2(f.x).setY2(b.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"arrowN":"arrow")),v){let D=Math.abs(C),T=-D/2*3;x.push(_i.builder().setText(v).setFontSize(`${D}px`).translate(f.x-Math.abs(C)/2,_.y+T).rotate(-90).setColor("white"))}if(y){let D=Math.abs(C),T=D/2*(y.length+3);x.push(_i.builder().setText(y).setFontSize(`${D}px`).translate(f.x-Math.abs(C)/2,b.y+T).rotate(-90).setColor("white"))}m&&(p?w.push(bi.builder().setX1(f.x).setY1(_.y).setX2(f.x).setY2(p.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"pointN":"pointH"),bi.builder().setX1(f.x).setY1(b.y).setX2(f.x).setY2(p.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"pointN":"pointH"),bi.builder().setX1(p.x).setY1(p.y).setX2(f.x+C).setY2(p.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth)):w.push(bi.builder().setX1(f.x).setY1(_.y).setX2(f.x).setY2(b.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth)))}return[w,x]}createSizeVirtualArrows(l,h,d,f,p,g=!0,m=!0,v="",y=""){let _=h.x<d.x?h:d,b=h.x<d.x?d:h,C=l.lineSizeExtra*(_.y<f.y?1:-1),x=[],w=[bi.builder().setX1(_.x).setY1(_.y).setX2(_.x).setY2(f.y+C).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth),bi.builder().setX1(b.x).setY1(b.y).setX2(b.x).setY2(f.y+C).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth)];if(_.x<=f.x&&f.x<=b.x){if(w.push(bi.builder().setX1(_.x).setY1(f.y).setX2(b.x).setY2(f.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setStartArrow(g?"arrowN":"arrow").setEndArrow(g?"arrowN":"arrow")),v){let O=Math.abs(C),D=O/2*v.length/2;x.push(_i.builder().setText(v).setFontSize(`${O}px`).translate((_.x+b.x)/2-D,f.y-Math.abs(C)/2).rotate(0).setColor("white"))}}else{let O=f.x<_.x?_.x-f.x:f.x-b.x;if(w.push(bi.builder().setX1(_.x-O).setY1(f.y).setX2(_.x).setY2(f.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"arrowN":"arrow"),bi.builder().setX1(b.x+O).setY1(f.y).setX2(b.x).setY2(f.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"arrowN":"arrow")),m)if(p){if(w.push(bi.builder().setX1(_.x).setY1(f.y).setX2(p.x).setY2(f.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"pointN":"pointH"),bi.builder().setX1(b.x).setY1(f.y).setX2(p.x).setY2(f.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth).setEndArrow(g?"pointN":"pointH"),bi.builder().setX1(p.x).setY1(p.y).setX2(p.x).setY2(f.y+C).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth)),v){let D=Math.abs(C),T=-D/2*(y.length+3);x.push(_i.builder().setText(v).setFontSize(`${D}px`).translate(_.x+T,f.y-Math.abs(C)/2).rotate(0).setColor("white"))}if(y){let D=Math.abs(C),T=D/2*3;x.push(_i.builder().setText(y).setFontSize(`${D}px`).translate(b.x+T,f.y-Math.abs(C)/2).rotate(0).setColor("white"))}}else w.push(bi.builder().setX1(_.x).setY1(f.y).setX2(b.x).setY2(f.y).setColor(g?l.colorLines:l.colorLinesHighlighted).setWidth(l.lineWidth))}return[w,x]}get createLinesPlateDataPtr(){return l=>this.createLinesPlateData(l)}createLinesPlateData(l){let h=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),d=l.width*h,f=(l.width-d)/2,g=(Math.atan2(1-h,.5),l.lineWidth),m=[],_=l.height/13,b=d/8;for(let C=0;C<=13;C++)m.push(bi.builder().setX1(f).setY1(_*C).setX2(l.width-f).setY2(_*C).setColor(l.colorLinesSecondary).setWidth(g));for(let C=0;C<=8;C++)m.push(bi.builder().setX1(f+b*C).setY1(0).setX2(f+b*C).setY2(l.height).setColor(l.colorLinesSecondary).setWidth(g));return m.push(bi.builder().setX1(l.width/2).setY1(0).setX2(f).setY2(3*_).setColor(l.colorLinesSecondary).setWidth(g)),m.push(bi.builder().setX1(l.width/2).setY1(0).setX2(l.width-f).setY2(3*_).setColor(l.colorLinesSecondary).setWidth(g)),new L0(m)}get createLinesDataPtr(){return l=>this.createLinesData(l)}createLinesData(l){let h=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),d=l.width*h,f=(l.width-d)/2,p=Math.atan2(1-h,.5),g=l.lineWidth,m=[],v=[bi.builder().setX1(f).setY1(0).setX2(l.width-f).setY2(0).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(f).setY1(l.height).setX2(l.width-f).setY2(l.height).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(f).setY1(0).setX2(f).setY2(l.height).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(l.width/2).setY1(0).setX2(l.width/2).setY2(l.height).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(l.width-f).setY1(0).setX2(l.width-f).setY2(l.height).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(f).setY1(d*(1-h)).setX2(l.width-f).setY2(d*(1-h)).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1((l.width-d*(1-h))/2).setY1(d*Math.pow(1-h,2)).setX2((l.width-d*(1-h))/2+d*(1-h)).setY2(d*Math.pow(1-h,2)).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(f).setY1(l.height-.5*d).setX2(l.width-f).setY2(l.height-.5*d).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(f).setY1(l.height-d*(1-h+.5)).setX2(l.width-f).setY2(l.height-d*(.5-(1-h))).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(f).setY1(l.height-d*(1-h+.5)).setX2(l.width-f).setY2(l.height-d*(1-h+.5)).setColor(l.colorLinesHighlighted).setWidth(g),bi.builder().setX1(f).setY1(l.height-d*(.5-(1-h))).setX2(l.width-f).setY2(l.height-d*(.5-(1-h))).setColor(l.colorLinesHighlighted).setWidth(g)],y=C=>{v.push(...C[0]),m.push(...C[1])},_=Math.min(l.width,l.height)/10;return y(this.createSizeVirtualArrows(l,new ji(f,l.height),new ji(l.width-f,l.height),new ji(l.width/2,l.height+3*_),null,!0,!0,"1.0")),y(this.createSizeVirtualArrows(l,new ji(f,l.height),new ji(l.width/2,l.height),new ji(l.width/2,l.height+2*_),null,!0,!0,"0.5")),y(this.createSizeVirtualArrows(l,new ji(l.width/2,l.height),new ji(l.width-f,l.height),new ji(l.width/2,l.height+2*_),null,!0,!0,"0.5")),y(this.createSizeVirtualArrows(l,new ji(l.width/2-.125*d,l.height-.5*d-.25*d/Math.cos(p)/2+l.delta/Math.cos(p)),new ji(l.width/2+.125*d,l.height-.5*d+.25*d/Math.cos(p)/2),new ji(1.2*f,l.height+1*_),new ji(l.width/2,l.height+1*_),!0,!0,"0.125","0.125")),y(this.createSizeVirtualArrows(l,new ji((l.width-d*(1-h))/2,d*Math.pow(1-h,2)-l.delta/2),new ji((l.width+d*(1-h))/2,d*Math.pow(1-h,2)-l.delta/2),new ji(l.width/2,0-2*_),null,!0,!0,"0.382")),y(this.createSizeVirtualArrows(l,new ji((l.width-d*(1-h))/2,d*Math.pow(1-h,2)-l.delta/2),new ji((l.width+d*(1-h))/2,d*Math.pow(1-h,2)-l.delta/2),new ji(1.2*f,0-1*_),new ji(l.width/2,0),!0,!0,"0.192","0.192")),y(this.createSizeHorizontalArrows(l,new ji(f,0),new ji(f,l.height),new ji(f-2*_,l.height/2),null,!0,!0,"1.618")),y(this.createSizeHorizontalArrows(l,new ji(f,0),new ji(f,d*(1-h)),new ji(f-1*_,d*(1-h)/2),null,!0,!0,"0.146")),y(this.createSizeHorizontalArrows(l,new ji(f,l.height),new ji(f,l.height-.5*d),new ji(f-1*_,l.height-.5*d/2),null,!0,!0,"0.5")),y(this.createSizeHorizontalArrows(l,new ji(f,l.height-.5*d),new ji(f,l.height-d*(1-h+.5)),new ji(f-1*_,l.height-d*(.5+(1-h)/2)),null,!0,!0,"0.382")),y(this.createSizeHorizontalArrows(l,new ji(l.width-f,0),new ji(l.width-f,d*(1-h)),new ji(l.width-f+1*_,-f),new ji((l.width-d*(1-h))/2+d*(1-h),d*Math.pow(1-h,2)),!0,!0,"0.146","0.236")),y(this.createSizeHorizontalArrows(l,new ji(l.width-f,l.height),new ji(l.width-f,l.height-.5*d),new ji(l.width-f+1*_,l.height+f),new ji(l.width-f,l.height-d*(.5-(1-h))),!0,!0,"0.382","0.118")),new L0(v,m)}toDegrees(l){return l/Math.PI*180}transformToString(l){return l.map((h,d)=>{let f=`${h.name}(`;return"translate"==h.name||"scale"==h.name?f+=`${h.x},${h.y}`:"rotate"==h.name?(f+=h.angle,(h.x||h.y)&&(f+=`,${h.x},${h.y}`)):("skewY"==h.name||"skewX"==h.name)&&(f+=h.angle),f+=")",f}).join(" ")}render(l,h){let d=h.rects,f=h.lines,p=h.linesPlate,g=h.texts,m=h.circles,v=h.ellipses,y=h.pathes,_=Math.min(h.width,h.height)/20*h.scale,b=_,C=_/2,x=0*b,w=C/2,T=[[0,0],[0,C],[b,C/2]];if(h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439){l.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,b,C]).attr("refX",x).attr("refY",w).attr("markerWidth",b).attr("markerHeight",C).attr("orient","auto-start-reverse").append("path").attr("d",Sh()(T)).attr("fill",h.colorLinesHighlighted),l.select("defs").append("marker").attr("id","arrowN").attr("viewBox",[0,0,b,C]).attr("refX",x).attr("refY",w).attr("markerWidth",b).attr("markerHeight",C).attr("orient","auto-start-reverse").append("path").attr("d",Sh()(T)).attr("fill",h.colorLines);let k=_,E=_,V=(U,$,H)=>"M "+U+" "+$+" m -"+H+", 0 a "+H+","+H+" 0 1,0 "+2*H+",0 a "+H+","+H+" 0 1,0 -"+2*H+",0";l.select("defs").append("marker").attr("id","pointH").attr("viewBox",[0,0,k,E]).attr("refX",k/2).attr("refY",E/2).attr("markerWidth",_).attr("markerHeight",_).attr("orient","auto-start-reverse").append("path").attr("d",V(_/2,_/2,_/4)).attr("fill",h.colorLinesHighlighted),l.select("defs").append("marker").attr("id","pointN").attr("viewBox",[0,0,k,E]).attr("refX",k/2).attr("refY",E/2).attr("markerWidth",_).attr("markerHeight",_).attr("orient","auto-start-reverse").append("path").attr("d",V(_/2,_/2,_/4)).attr("fill",h.colorLines)}h.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442&&d.forEach(k=>{var E=l.append("rect").attr("x",k.x).attr("y",k.y).attr("rx",k.rx).attr("ry",k.ry).attr("transform",this.transformToString(k.transform||[])).attr("width",k.width).attr("height",k.height).style("fill",k.fillColor||"black").attr("fill-opacity",k.fillOpacity||1).style("stroke",k.strokeColor||"black").style("stroke-width",k.strokeWidth).attr("stroke-opacity",k.strokeOpacity||1).attr("class",k.classes.join(" ")).style("visibility",k.visible?"visible":"hidden");k.events.forEach(P=>{E.on(P.name,P.func)}),k.d3Object=E});let M=[];if(h.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b&&M.push(...f),h.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443&&M.push(...p),M){let k=V=>_/h.scale*Math.cos(Math.atan2(V.y2-V.y1,V.x2-V.x1)),E=V=>_/h.scale*Math.sin(Math.atan2(V.y2-V.y1,V.x2-V.x1)),P=V=>V&&V.startsWith("arrow");M.forEach(V=>{let I=l.append("line"),U=($,H)=>$.style("stroke",H.color).style("stroke-width",H.width).attr("x1",H.x1+(P(H.startArrow)?k(H):0)).attr("y1",H.y1+(P(H.startArrow)?E(H):0)).attr("x2",H.x2-(P(H.endArrow)?k(H):0)).attr("y2",H.y2-(P(H.endArrow)?E(H):0)).attr("transform",this.transformToString(H.transform||[])).attr("marker-start",H.startArrow?"url(#"+H.startArrow+")":"").attr("marker-end",H.endArrow?"url(#"+H.endArrow+")":"").attr("class",H.classes.join(" ")).style("visibility",H.visible?"visible":"hidden");I=U(I,V),V.transitions&&V.transitions.forEach($=>{I=U(I.transition().delay($.delay).duration($.duration),$.data)})})}m.forEach(k=>{let E=l.append("circle");E=k.applyToD3Object(E),E=k.applyEventsToD3Object(E)}),l.selectAll("ellipse").data(v).enter().append("ellipse").attr("cx",0).attr("cy",0).attr("rx",k=>k.rx).attr("ry",k=>k.ry).attr("fill",k=>k.fillColor).attr("fill-opacity",k=>k.fillOpacity).attr("stroke",k=>k.strokeColor).attr("stroke-width",k=>k.strokeWidth).attr("transform",k=>this.transformToString(k&&k.transform||[])).attr("class",k=>k.classes.join(" ")).style("visibility",k=>k.visible?"visible":"hidden"),y.forEach(k=>{if(k.renderHandler)k.renderHandler(l,k);else{let E=l.append("path").datum(k.datum);E=k.applyToD3Object(E),E=k.applyEventsToD3Object(E)}}),g.forEach(k=>{let E=l.append("text").text(k.text);E=k.applyToD3Object(E),E=k.applyEventsToD3Object(E)})}textSizeDirect(l,h,d){if(je){var f=yo("body").append("svg");f.append("text").attr("x",-99999).attr("y",-99999).attr("font-size",h).attr("font-weight",d).text(l);var g=f.node().getBBox();return f.remove(),{width:g.width,height:g.height}}}textSize(l,h){if(je){var d=yo("body").append("svg");l.append("text").text(h.text).attr("x",-99999).attr("y",-99999).attr("font-size",h.fontSize).attr("font-weight",h.fontWeight).attr("text-anchor",h.textAnchor).style("fill",h.color).attr("class",h.classes.join(" ")).style("visibility",h.visible?"visible":"hidden");var p=d.node().getBBox();return d.remove(),{width:p.width,height:p.height}}}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class DU{constructor(a,l,h,d,f=null,p=null,g=null){S(this,"logoWidth",void 0),S(this,"logoHeight",void 0),S(this,"d3Svc",void 0),S(this,"mySvgRef",void 0),S(this,"generator",void 0),S(this,"delayedRun",void 0),S(this,"d3Config",void 0),S(this,"delta",1),S(this,"g",void 0),S(this,"svg",null),this.logoWidth=a,this.logoHeight=l,this.d3Svc=h,this.mySvgRef=d,this.generator=f,this.delayedRun=p,this.d3Config=g,this.delta=Math.min(a,l)/10,null==this.d3Config&&this.regenerateConfig()}regenerateConfig(){return this.d3Config=new N0(!0,!0,!1,!0,.5,this.logoWidth,this.logoHeight,Math.min(this.logoWidth,this.logoHeight)/15,2,Math.min(this.logoWidth,this.logoHeight)/20,"black","gold","firebrick","red","white","green","cyan",this),this}getGenerator(){return this.generator}setGenerator(a){return this.generator&&this.clear().regenerateConfig(),this.generator=a,this}createD3Config(a){this.generator?this.generator.generate(this.d3Svc,this.d3Config,a)&&a():(this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createDataPtr,(l,h)=>l.rects=h.first),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesDataPtr,(l,h)=>{l.lines=h.first,h.second&&l.texts.push(...h.second)}),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesPlateDataPtr,(l,h)=>l.linesPlate=h.first),a())}clear(){return this.removeExistingSvgFromParent(),this.generator.clear(),this}clearDelayed(){this.delayedRun(()=>this.clear(),0)}clearAll(){this.g.selectAll("*").remove()}updateSvg(a=(()=>{})){return this.svg||this.createSvgImage(a),this}createSvgImage(a){this.createD3Config(()=>{this.afterCreateSvgImage(a)})}afterCreateSvgImage(a){this.applySizeAfterGeneration(),this.removeExistingSvgFromParent(),this.setSvgDimensions(),this.addGraphicsElement(),this.createAreaSvg(),a&&a()}applySizeAfterGeneration(){this.generator&&(this.logoWidth=this.generator.getWidth(),this.logoHeight=this.generator.getHeight())}removeExistingSvgFromParent(){yo(this.mySvgRef.nativeElement).select("svg").remove(),this.svg=null,this.g=null}addGraphicsElement(){this.g=this.svg.append("g").attr("transform","translate(0,0)")}createAreaSvg(){this.d3Svc.render(this.g,this.d3Config)}setSvgDimensions(){let a=this.generator.getHeight(),l=this.generator.getWidth();this.svg=yo(this.mySvgRef.nativeElement).append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+l+" "+a)}}class Sl{constructor(a='\u041a\u0440\u0435\u0441\u0442 \u043f\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0443 "\u0437\u043e\u043b\u043e\u0442\u043e\u0433\u043e \u0441\u0435\u0447\u0435\u043d\u0438\u044f".',l=512,h=512){S(this,"name",void 0),S(this,"width",void 0),S(this,"height",void 0),this.name=a,this.width=l,this.height=h}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}generate(a,l,h){return a.createDataScale(l,a.createDataPtr,(d,f)=>d.rects=f.first),a.createDataScale(l,a.createLinesDataPtr,(d,f)=>{d.lines=f.first,d.texts.push(...f.second)}),a.createDataScale(l,a.createLinesPlateDataPtr,(d,f)=>d.linesPlate=f.first),l.texts.push(_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("gold")),!0}}class zde extends Sl{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430.",l=512,h=512){super(a,l,h)}generate(a,l,h){l.rects.push(a.createBackground(l)),l.texts.push(_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("firebrick"));for(let f=0;f<10;f++)l.texts.push(_i.builder().setText("\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430: "+f).setFontSize("20px").translate(l.width/2,l.height/2).rotate(36*f).setColor("white"));return!0}}class Hde extends Sl{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043a\u0440\u0443\u0436\u043d\u043e\u0441\u0442\u0435\u0439.",l=512,h=512){super(a,l,h)}generate(a,l,h){l.rects.push(a.createBackground(l)),l.texts.push(_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("firebrick")),l.circles.push(mg.builder().setR(100).translate(l.width/2,l.height/2).rotate(0).setFillColor("gold"));for(let p=0;p<12;p++)l.circles.push(mg.builder().setR(10).translate(l.width/2,l.height/2).rotate(30*p).setFillColor("gold").translate(130,0));return!0}}class $de extends Sl{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u044d\u043b\u043b\u0438\u043f\u0441\u043e\u0432.",l=512,h=512){super(a,l,h)}generate(a,l,h){l.rects.push(a.createBackground(l)),l.texts.push(_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("firebrick"));for(let f=0;f<3;f++)l.ellipses.push(OU.builder().setRx(50).setRy(100).translate(l.width/2,l.height/2).rotate(60*f).setFillColor("gold").setFillOpacity(.5));return!0}}class Wde extends Sl{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u043e\u0432.",l=512,h=512){super(a,l,h)}generate(a,l,h){l.rects.push(a.createBackground(l)),l.texts.push(_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("firebrick"));for(let f=0;f<5;f++)l.rects.push(Ds.builder().setX(100*f).setY(0).setWidth(100).setHeight(100).setRx(5*f).setRy(5*f).translate(6,l.height/3).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2));return l.rects.push(Ds.builder().setX(0).setY(0).setWidth(200).setHeight(200).translate(l.width/2-100,l.height/3*1.5).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2).addClass("rxanimated")),!0}}class Gde extends Sl{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432.",l=512,h=512){super(a,l,h)}generate(a,l,h){l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,l.rects.push(a.createBackground(l)),l.texts.push(_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("firebrick"));let f=()=>{const v=yu(0,10).map(C=>[.5*C*Math.PI,Math.sin(.5*C*Math.PI)]),y=a1().range([0,l.width/2]).domain(t0(v,C=>C[0])),_=a1().range([l.height/2-20,0]).domain([-1,1]);return{sine:v,line:Sh().x(C=>y(C[0])).y(C=>_(C[1])),x:y,y:_}},p=[10,l.height/4];{let v=f();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.line).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.line.curve(bU)).setStrokeColor("green").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.line.curve(Tw)).setStrokeColor("red").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.line.curve(uU)).setStrokeColor("cyan").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}{let v=f();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.line.curve(_U)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("none").translate(p[0],p[1]))}let g=()=>{const v=yu(0,10).map(C=>[.5*C*Math.PI,Math.sin(.5*C*Math.PI)]),y=a1().range([l.width/2+10,l.width-20]).domain(t0(v,C=>C[0])),_=a1().range([l.height/2-20,0]).domain([-1,1]);return{sine:v,area:lU().x(C=>y(C[0])).y0(l.height/4-10).y1(C=>_(C[1]))}};{let v=g();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.area.curve(bU)).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(p[0],p[1]))}{let v=g();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.area.curve(_U)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("gold").setFillOpacity(.5).translate(p[0],p[1]))}{let v=g();l.pathes.push(ms.builder().setDatum(v.sine).setD(v.area.curve(Tw)).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(p[0],p[1]))}{let v=sU();l.pathes.push(ms.builder().setD(v({outerRadius:100,innerRadius:50,startAngle:.25*-Math.PI,endAngle:.25*Math.PI})).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(100,l.height))}l.pathes.push(ms.builder().setRenderHandler((v,y)=>{v.append("path").attr("d",U8()({source:{radius:50,startAngle:.3*-Math.PI,endAngle:.2*-Math.PI},target:{radius:50,startAngle:.3*Math.PI,endAngle:.3*Math.PI}})).attr("stroke",y.strokeColor).attr("stroke-width",y.strokeWidth).attr("fill",y.fillColor).attr("transform",(_,b)=>a.transformToString(y.transform||[]))}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(l.width/2,l.height-50));{const v=Yse(yu(0,12),Zse(yu(0,12))),y=["linen","lightsteelblue","lightcyan","lavender","honeydew","gainsboro"],_=100;l.pathes.push(ms.builder().setRenderHandler((b,C)=>{v.forEach((x,w)=>{let O=x[0],D=x[1];b.append("path").attr("d",U8()({source:{radius:_,startAngle:-2*Math.PI*(1/v.length)*O,endAngle:-2*Math.PI*(1/v.length)*(O-1)%v.length},target:{radius:_,startAngle:-2*Math.PI*(1/v.length)*D,endAngle:-2*Math.PI*(1/v.length)*(D-1)%v.length}})).attr("stroke",y[(w+1)%y.length]).attr("stroke-width",C.strokeWidth).attr("fill",y[(w+0)%y.length]).attr("transform",(T,M)=>a.transformToString(C.transform||[]))})}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(l.width/4*3+50,l.height-_))}return!0}}class Qde extends Sl{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0439.",l=512,h=512){super(a,l,h)}generate(a,l,h){return l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,l.rects.push(a.createBackground(l)),l.texts.push(_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("firebrick")),["easeLinear","easeQuadIn","easeQuadInOut","easeQuadOut","easeCubicIn","easeSinIn","easeCircleIn","easeBounceIn","easeCubicIn","easeCubicOut","easeCubicInOut"].forEach((d,f)=>{let p=100+30*f;l.pathes.push(ms.builder().setRenderHandler((m,v)=>{let y=mg.builder().setR(10).translate(l.width/2,p),_=m.append("circle").attr("cx",0).attr("cy",0).attr("r",y.r).attr("fill",y.fillColor).attr("fill-opacity",y.fillOpacity).attr("stroke",y.strokeColor).attr("stroke-width",y.strokeWidth).attr("transform",a.transformToString(y&&y.transform||[])),b=m.append("text").attr("x",0).attr("y",p).text(d).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),x=l.width/2-10,w=(T,M)=>{T.transition().duration(3e3).ease(je[d]).attr("x",x).attr("cx",x).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease(je[d]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue").on("end",M)},O=null;O=()=>w(_,O);let D=null;D=()=>w(b,D),O(),D()}))}),!0}}class jde extends Sl{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 UI.",l=512,h=512){super(a,l,h)}generate(a,l,h){l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,l.rects.push(a.createBackground(l)),l.texts.push(_i.builder().setText("UI interaction demo.").setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("firebrick"));let d=100;return[{easeFunc:"easeCubicOut",r:10},{easeFunc:"easeCubic",r:10},{easeFunc:"drag circle: ",r:50,drag:!0}].forEach((f,p)=>{let g=d+f.r+10,m=f.r;l.pathes.push(ms.builder().setRenderHandler((v,y)=>{let _=mg.builder().setR(m).translate(l.width/2,g),b=0,C=v.append("circle").attr("cx",b).attr("cy",0).attr("r",_.r).attr("fill",_.fillColor).attr("fill-opacity",_.fillOpacity).attr("stroke",_.strokeColor).attr("stroke-width",_.strokeWidth).attr("transform",a.transformToString(_&&_.transform||[])),x=v.append("text").attr("x",0).attr("y",g).text(f.easeFunc).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),O=l.width/2-m,D=(E,P)=>{E.transition().duration(3e3).ease(je[f.easeFunc]).attr("x",O).attr("cx",O).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease(je[f.easeFunc]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue")},T=null;T=()=>D(C);let M=null;M=()=>D(x);let k=()=>{T(),M()};if(f.drag){let E=jae().on("drag",P=>{const V=Math.round(1e3*P.dx)/1e3;x.text("drag: dx: "+V);let I=b+V;I<0?I=0:I>l.width/2&&(I=l.width/2),b=I,C.attr("cx",b)});C.call(E)}else C.on("click",k),x.on("click",k)})),d+=2*f.r+20}),!0}}var xl=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2"}(xl||(xl={})),xl))();class v1{constructor(a=xl.Default,l="\u041a\u0440\u0435\u0441\u0442.",h=512,d=512){S(this,"theme",void 0),S(this,"name",void 0),S(this,"width",void 0),S(this,"height",void 0),this.theme=a,this.name=l,this.width=h,this.height=d}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(a){switch(this.theme){case xl.Dark:a.colorBackground="#0e161b",a.colorMain="white";break;case xl.Light:a.colorBackground="#00364D",a.colorMain="white";break;case xl.Dark2:a.colorBackground="white",a.colorMain="#0e161b";break;case xl.Light2:a.colorBackground="white",a.colorMain="#00364D"}}generate(a,l,h){l.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!1,this.updateThemeConfig(l),a.createDataScale(l,a.createGolgofaDataPtr,(f,p)=>{f.rects=p.first,p.isSecond()&&(f.pathes=p.second),p.isThird()&&(f.texts=p.third)});var d=_i.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(l.width/2,50).rotate(0).setColor("none");return l.texts.push(d),l.onItemSelected=f=>{d.d3Object&&d.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",l.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(f).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}var $o=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2"}($o||($o={})),$o))();class Ua{constructor(a,l){S(this,"name",void 0),S(this,"tag",void 0),this.name=a,this.tag=l}static builder(){return new Ua("",null)}setName(a){return this.name=a,this}setTag(a){return this.tag=a,this}}class vg{constructor(){S(this,"genName","Menu"),S(this,"commands",[]),S(this,"printOnly",!1)}static builder(){return new vg}setGenName(a){return this.genName=a,this}setCommands(a){return this.commands=a,this}setPrintOnly(a){return this.printOnly=a,this}addCommand(a){return this.commands.push(a),this}}class Zde extends Sl{constructor(a=$o.Default,l=512,h=128){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",l,h),S(this,"theme",void 0),S(this,"svgImage",null),S(this,"onCommandHandler",null),S(this,"onPreviewCommandHandler",null),S(this,"autoClickOnChangeEnabled",!1),S(this,"strokeInvisible",!0),S(this,"updateAll",null),S(this,"updateText",null),S(this,"updateAllPds",null),S(this,"updateAllRects",null),S(this,"commands",[Ua.builder().setName("\u0418\u043c\u044f"),Ua.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),Ua.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),Ua.builder().setName("\u041c\u0438\u0440")]),S(this,"currentIndex",0),this.theme=a}regenerate(){return super.regenerate(),this.updateAll&&this.updateAll(),this}setAutoClickOnChange(a){return this.autoClickOnChangeEnabled=a,this}setCommands(a,l=null){return this.commands=a,this.currentIndex=l?this.commands.indexOf(l):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(a){return this.onCommandHandler=a,this}setOnPreviewCommandHandler(a){return this.onPreviewCommandHandler=a,this}setTheme(a){return this.theme=a,this}setSvgImages(a){return this.svgImage=a,this}updateThemeConfig(a){switch(this.theme){case $o.Dark:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case $o.Light:this.strokeInvisible=!0,a.colorBackground="#00364D",a.colorMain="white";break;case $o.Dark2:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case $o.Light2:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#00364D"}}isLight(){let a=!0;switch(this.theme){case $o.Light2:case $o.Light:break;default:a=!1}return a}runOnCommand(a){return this.onCommandHandler&&this.onCommandHandler(a),this}runOnPreviewCommand(a){return this.onPreviewCommandHandler&&this.onPreviewCommandHandler(a),this}isGenerated(){return!!this.updateAll}generate(a,l,h){if(this.updateAll)return this.updateAll(),!0;l.clearAll(),this.updateThemeConfig(l);let d=G=>{let W=dh(G);return W.r<<16|W.g<<8|W.b},f=(G,W)=>{W?G.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):G.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},p=d(l.colorMain),m=.8,v=.3;l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let x=(G,W=1,j)=>{let Q=(16711680&G)>>16,X=(65280&G)>>8,Y=255&G;W<1&&0==Q&&0==X&&0==Y&&(Q=X=Y=255);let ne=Q*W&255,re=X*W&255,fe=Y*W&255;if(W<1){let De=d(l.colorBackground);ne=(16711680&De)>>16,re=(65280&De)>>8,fe=255&De}return Wf(ne,re,fe,j).formatHex()},O=l.height/32*1,D=l.height/32*1,T=Math.round(.8*l.height),M=()=>l.width/8*6,k=G=>{let W=Math.round(.8*l.height),j=a.textSizeDirect(G,W,300),Q=.8*M();return j.width>Q&&(W=W*Q/j.width),W},E=_i.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${k(this.commands[this.currentIndex].name)}px`).translate(l.width/2+O,l.height/2+T/4+D).rotate(0).setColor(x(p,v)).setStrokeColor(x(p,v)).setStrokeWidth(1).setVisible(!0).addEvent(Zi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),P=_i.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${k(this.commands[this.currentIndex].name)}px`).translate(l.width/2,l.height/2+T/4).rotate(0).setColor(x(p)).setStrokeColor(x(p,this.strokeInvisible?1:v)).setStrokeWidth(1).addEvent(Zi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");l.texts.push(E),l.texts.push(P),this.updateText=G=>{E.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",x(p,v)).style("stroke",x(p,v)).attr("font-size",`${k(this.commands[this.currentIndex].name)}px`).text(G),P.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",x(p)).style("stoke",x(p)).attr("font-size",`${k(this.commands[this.currentIndex].name)}px`).text(G)};let U=[];this.updateAllPds=()=>{U.forEach(G=>{G.shadow?f(G.pd.d3Object,this.commands.length>1):(G.leftArrow&&0==this.currentIndex?f(G.pd.d3Object,!1):G.leftArrow&&f(G.pd.d3Object,!0),G.leftArrow||this.currentIndex+1!=this.commands.length?G.leftArrow||f(G.pd.d3Object,!0):f(G.pd.d3Object,!1))})},this.updateAll=()=>{let G=this.commands[this.currentIndex];this.updateText&&G&&this.updateText(G.name),this.updateAllPds&&this.updateAllPds(),this.updateAllRects&&this.updateAllRects(),this.runOnPreviewCommand(G)};let $=(G,W=null,j="gold",Q="white",X=!0,Y=!1)=>{let ne=((G=null)=>({dd:G||[[0,0],[1,1],[1,-1],[0,0]],line:Sh().x(Q=>Q[0]*(l.width/8)).y(Q=>(Q[1]/2+.5)*(l.height-2))}))(W),re=ms.builder().setDatum(ne.dd).setD(ne.line).setStrokeColor(Q).setStrokeWidth(1).setFillColor(j).translate(G[0],G[1]+1).addEvent(Zi.builder().setName("click").setFunc(()=>{X?--this.currentIndex<0&&(this.currentIndex=0):++this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.updateAll&&this.updateAll(),this.onChange()})).setVisible(Y&&this.commands.length>1||X&&this.currentIndex>0||!X&&this.currentIndex+1<this.commands.length);Y||re.addClass("cursor"),U.push({leftArrow:X,pd:re,shadow:Y}),l.pathes.push(re)},H=(G,W,j,Q)=>{let X=[];return G.forEach(Y=>{let ne=[];ne.push(Y[0]*W+j/(l.width/8)),ne.push(Y[1]*W+Q/l.height),X.push(ne)}),X};$([0,0],H([[0,0],[1,1],[1,-1],[0,0]],m,O,D),x(p,v),x(p,1),!0,!0),$([l.width/8*7,0],H([[0,1],[1,0],[0,-1],[0,1]],m,O,D),x(p,v),x(p,1),!1,!0),$([0,0],H([[0,0],[1,1],[1,-1],[0,0]],m,0,0),x(p,1),x(d(x(p,1)),v),!0),$([l.width/8*7,0],H([[0,1],[1,0],[0,-1],[0,1]],m,0,0),x(p,1),x(d(x(p,1)),v),!1);let J=this.commands.length,ee=.9*M(),B=[];this.updateAllRects=()=>{B.forEach((G,W)=>{G.forEach((j,Q)=>{if(0==Q)return f(j[0].d3Object,!0),void f(j[1].d3Object,!0);W==this.currentIndex?(f(j[0].d3Object,!0),f(j[1].d3Object,!0)):(f(j[0].d3Object,!1),f(j[1].d3Object,!1))})})};for(let G=0;G<J;G++){let W=ee/J,j=.9,Q=(l.width-ee)/2+W*G+W*(1-j)/2,X=[Ds.builder().setFillColor("none").setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(W*j).setHeight(l.height/10*1).translate(Q+O,l.height/10*8+D).setVisible(!0),Ds.builder().setFillColor(x(p,v)).setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(W*j).setHeight(l.height/10*1).translate(Q+O,l.height/10*8+D).setVisible(!0)],Y=[Ds.builder().setFillColor("none").setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(W*j).setHeight(l.height/10*1).translate(Q,l.height/10*8).setVisible(G==this.currentIndex),Ds.builder().setFillColor(x(p,1)).setStrokeColor(x(p,1)).setStrokeWidth(1).setWidth(W*j).setHeight(l.height/10*1).translate(Q,l.height/10*8).setVisible(G==this.currentIndex)];l.rects.push(...X),l.rects.push(...Y),B.push([X,Y])}return!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var Ks=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2",c[c.Dark3=5]="Dark3",c[c.Light3=6]="Light3"}(Ks||(Ks={})),Ks))();class yg{constructor(a,l){S(this,"name",void 0),S(this,"tag",void 0),this.name=a,this.tag=l}static builder(){return new yg("",null)}setName(a){return this.name=a,this}setTag(a){return this.tag=a,this}}class cE extends Sl{constructor(a=Ks.Default){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",512,512),S(this,"theme",void 0),S(this,"svgImage",void 0),S(this,"onCommandHandler",void 0),S(this,"autoClickOnChangeEnabled",!1),S(this,"strokeInvisible",!0),S(this,"useShadow",!0),S(this,"commands",[yg.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),yg.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),yg.builder().setName("\u041c\u0438\u0440")]),S(this,"currentIndex",0),this.theme=a}setShadowEnabled(a){return this.useShadow=a,this}setAutoClickOnChange(a){return this.autoClickOnChangeEnabled=a,this}setCommands(a,l){return this.commands=a,this.currentIndex=this.commands.indexOf(l),this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(a){return this.onCommandHandler=a,this}setTheme(a){return this.theme=a,this}setSvgImages(a){return this.svgImage=a,this}updateThemeConfig(a){switch(this.theme){case Ks.Dark:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case Ks.Light:this.strokeInvisible=!0,a.colorBackground="#00364D",a.colorMain="white";break;case Ks.Dark2:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case Ks.Light2:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#00364D";break;case Ks.Dark3:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="#4AAED9";break;case Ks.Light3:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#0072A3"}}isLight(){let a=!0;switch(this.theme){case Ks.Light3:case Ks.Light2:case Ks.Light:break;default:a=!1}return a}runOnCommand(a){return this.onCommandHandler&&this.onCommandHandler(a,this),this}generate(a,l,h){this.updateThemeConfig(l);let d=ne=>{let re=dh(ne);return re.r<<16|re.g<<8|re.b},f=(ne,re)=>{re?ne.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):ne.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},p=d(l.colorMain),g=this.useShadow,v=.3;l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let x=(ne,re=1,fe)=>{let de=(16711680&ne)>>16,De=(65280&ne)>>8,we=255&ne;re<1&&0==de&&0==De&&0==we&&(de=De=we=255);let Fe=de*re&255,qe=De*re&255,Le=we*re&255;if(re<1){let it=d(l.colorBackground);Fe=(16711680&it)>>16,qe=(65280&it)>>8,Le=255&it}return Wf(Fe,qe,Le,fe).formatHex()},O=l.width/32*1,D=l.height/32*1,E=(Math.round(.8*l.height),1/3),P=2/3,I=ne=>{let re=Math.round(.8*l.height),fe=a.textSizeDirect(ne,re,300),de=l.width/24*22*.8,De=l.height/3*.8;return fe.width>de&&(re=re*de/fe.width,fe=a.textSizeDirect(ne,re,300)),fe.height>De&&(re=re*De/fe.height),re},U=I(this.commands[this.currentIndex].name),$=_i.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${U}px`).translate(l.width/2+O,l.height/2+U/4+D).rotate(0).setColor(x(p,v)).setStrokeColor(x(p,v)).setStrokeWidth(1).setVisible(g).addEvent(Zi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),H=_i.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${U}px`).translate(l.width/2,l.height/2+U/4).rotate(0).setColor(x(p)).setStrokeColor(x(p,this.strokeInvisible?1:v)).setStrokeWidth(1).addEvent(Zi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");l.texts.push($),l.texts.push(H);let J=ne=>{$.d3Object.transition().duration(1e3).attr("font-size",`${I(this.commands[this.currentIndex].name)}px`).text(ne),H.d3Object.transition().duration(1e3).attr("font-size",`${I(this.commands[this.currentIndex].name)}px`).text(ne)},G=[],W=()=>{G.forEach(ne=>{ne.shadow?f(ne.pd.d3Object,!0):(ne.upArrow||0!=this.currentIndex?ne.upArrow||f(ne.pd.d3Object,!0):f(ne.pd.d3Object,!1),ne.upArrow&&this.currentIndex+1==this.commands.length?f(ne.pd.d3Object,!1):ne.upArrow&&f(ne.pd.d3Object,!0))})},j=(ne,re,fe="gold",de="white",De=!0,we=!1)=>{let Fe=(ne=>({dd:ne||[[0,0],[1,1],[1,-1],[0,0]],line:Sh().x(de=>(0+de[0])*l.width).y(de=>(1-de[1])*(l.height-24))}))(re),qe=ms.builder().setDatum(Fe.dd).setD(Fe.line).setStrokeColor(de).setStrokeWidth(1).setFillColor(fe).translate(ne[0]+0*(we?O:0),ne[1]+1+(we?D:0)).addEvent(Zi.builder().setName("click").setFunc(()=>{De?(this.currentIndex+1<this.commands.length&&++this.currentIndex,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1)):(this.currentIndex>0&&--this.currentIndex,this.currentIndex<0&&(this.currentIndex=0)),J(this.commands[this.currentIndex].name),W(),this.onChange()})).setVisible(!0);we||qe.addClass("cursor"),G.push({upArrow:De,pd:qe,shadow:we}),l.pathes.push(qe)},Q=(ne,re,fe,de,De)=>{let we=[];return ne.forEach(Fe=>{let qe=[];qe.push(Fe[0]*re+de),qe.push(Fe[1]*fe+De),we.push(qe)}),we};return g&&(j([0,0],Q([[0,0],[.5,1],[1,0],[0,0]],1,E,0,P),x(p,v),x(p,1),!0,!0),j([0,P],Q([[0,1],[.5,0],[1,1],[0,1]],1,E,0,0),x(p,v),x(p,1),!1,!0)),j([0,0],Q([[0,0],[.5,1],[1,0],[0,0]],1,1*E,0,P),x(p,1),x(d(x(p,1)),v),!0),j([0,P],Q([[0,1],[.5,0],[1,1],[0,1]],1,1*E,0,0),x(p,1),x(d(x(p,1)),v),!1),!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var sa=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2",c[c.Dark3=5]="Dark3",c[c.Light3=6]="Light3"}(sa||(sa={})),sa))();class wl{constructor(a,l,h,d){S(this,"name",void 0),S(this,"index",void 0),S(this,"iWidth",void 0),S(this,"tag",void 0),S(this,"rect",null),S(this,"text",null),S(this,"classes",""),this.name=a,this.index=l,this.iWidth=h,this.tag=d}static builder(){return new wl("",0,1,null)}setName(a){return this.name=a,this}setTag(a){return this.tag=a,this}setIndex(a){return this.index=a,this}setIWidth(a){return this.iWidth=a,this}setClasses(a){return this.classes=a,this}}class qde extends Sl{constructor(a=sa.Default,l="\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",h=512,d=512){super(l,h,d),S(this,"theme",void 0),S(this,"svgImage",null),S(this,"onCommandHandler",null),S(this,"autoClickOnChangeEnabled",!1),S(this,"strokeInvisible",!0),S(this,"useShadow",!0),S(this,"useBackgroundColor",!0),S(this,"commands",[wl.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),wl.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),wl.builder().setName("\u041c\u0438\u0440")]),S(this,"currentIndex",0),S(this,"linesOfMonth",7),S(this,"columnsCount",7),S(this,"columnsOffsets",[]),this.theme=a}addColumnOffset(a){return this.columnsOffsets.push(a),this}setShadowEnabled(a){return this.useShadow=a,this}setAutoClickOnChange(a){return this.autoClickOnChangeEnabled=a,this}setCommands(a,l=null){return this.commands=a,this.currentIndex=l?this.commands.indexOf(l):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(a){return this.onCommandHandler=a,this}setTheme(a){return this.theme=a,this}setSvgImages(a){return this.svgImage=a,this}updateThemeConfig(a){switch(this.theme){case sa.Dark:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case sa.Light:this.strokeInvisible=!0,a.colorBackground="#00364D",a.colorMain="white";break;case sa.Dark2:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case sa.Light2:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#00364D";break;case sa.Dark3:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="#4AAED9";break;case sa.Light3:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#0072A3"}}isLight(){let a=!0;switch(this.theme){case sa.Light3:case sa.Light2:case sa.Light:break;default:a=!1}return a}runOnCommand(a){return this.onCommandHandler&&this.onCommandHandler(a,this),this}color(a,l,h=1,d){let f=(16711680&l)>>16,p=(65280&l)>>8,g=255&l;h<1&&0==f&&0==p&&0==g&&(f=p=g=255);let m=f*h&255,v=p*h&255,y=g*h&255;if(this.useBackgroundColor&&h<1){let b=this.colorValueToNumber(a.colorBackground);m=(16711680&b)>>16,v=(65280&b)>>8,y=255&b}return Wf(m,v,y,d).formatHex()}colorValueToNumber(a){let l=dh(a);return l.r<<16|l.g<<8|l.b}textRecommendedWidth(a){return a.width/this.columnsCount}getFontHeightForText(a,l,h,d){let p=Math.round(l.height/this.linesOfMonth*.7),g=a.textSizeDirect(h,p,300),m=.7*d,v=l.height/this.linesOfMonth*.7;return g.width>m&&(p=p*m/g.width,g=a.textSizeDirect(h,p,300)),g.height>v&&(p=p*v/g.height,g=a.textSizeDirect(h,p,300)),g}generate(a,l,h){return this.updateThemeConfig(l),l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,this.commands.forEach(f=>{this.drawRect(a,l,f)}),!0}getLineOfIndex(a){return Math.floor(a/this.columnsCount)}getRelativeX(a){let l=a%this.columnsCount,h=this.getLineOfIndex(a);return l+=h<this.columnsOffsets.length?this.columnsOffsets[h]:0,l}drawRect(a,l,h){if(!h.name)return;let d=this.colorValueToNumber(l.colorMain),p=h.name,g=h.index,m=h.iWidth,v=Math.floor(l.width/this.columnsCount)*m,y=1*Math.floor(l.width/this.columnsCount),_=Math.floor(l.height/this.linesOfMonth),b=Ds.builder().setX(y*this.getRelativeX(g)).setY(_*this.getLineOfIndex(g)).setRx(v/m/10).setRy(_/10).setWidth(v).setHeight(_).setFillColor(l.colorBackground).setStrokeWidth(2).setStrokeColor(l.colorMain).addEvent(Zi.builder().setName("click").setFunc(()=>{this.runOnCommand(h)})),C=this.getFontHeightForText(a,l,p,this.textRecommendedWidth(l)*m),x=_i.builder().setText(p).setTextAnchor("middle").setFontSize(`${C.height}px`).translate(y*this.getRelativeX(g)+.5*v,_*(3/4+this.getLineOfIndex(g))).rotate(0).setColor(this.color(l,d)).setStrokeColor(this.color(l,d,this.strokeInvisible?1:.3)).setStrokeWidth(1).addEvent(Zi.builder().setName("click").setFunc(()=>{this.runOnCommand(h)})).addClass("cursor"+(h.classes?" "+h.classes:""));h.rect=b,l.rects.push(h.rect),h.text=x,l.texts.push(h.text)}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}class Ai{constructor(a,l){S(this,"\u0438\u043c\u044f",void 0),S(this,"\u043a\u043b\u0430\u0441\u0441",void 0),this.\u0438\u043c\u044f=a,this.\u043a\u043b\u0430\u0441\u0441=l}static \u043d\u043e\u0432\u044b\u0439(){return new Ai("",null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a){return this.\u0438\u043c\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(a){return this.\u043a\u043b\u0430\u0441\u0441=a,this}}class B0{constructor(a){S(this,"\u0444\u0443\u043d\u043a\u0446\u0438\u044f",void 0),this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u0430\u044f(){return new B0(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a){return this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=a,this}}class Dn{constructor(a){S(this,"\u043e\u0431\u044a\u0435\u043a\u0442",void 0),this.\u043e\u0431\u044a\u0435\u043a\u0442=a}static \u043d\u043e\u0432\u044b\u0439(){return new Dn(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this}}class We{constructor(a,l,h=null){S(this,"\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f",void 0),S(this,"\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",void 0),S(this,"\u043a\u0430\u0440\u0442\u0430",void 0),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=a,this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=l,this.\u043a\u0430\u0440\u0442\u0430=h}static \u043d\u043e\u0432\u044b\u0439(){return new We(null,null,null)}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new We(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(a){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=a,this}\u0435\u0441\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(){return!!this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()}\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return this.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u0424\u0443\u043d\u043a\u0446\u0438\u044f"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(a){return null!=a&&"object"==typeof a&&a.constructor===B0}\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(a=!1){return!a&&!this.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041c\u0430\u0441\u0441\u0438\u0432"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432(){return Array.isArray(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430(){return this.\u043a\u0430\u0440\u0442\u0430}\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(this.\u043a\u0430\u0440\u0442\u0430)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(a){return null!=a&&"object"==typeof a&&a.constructor===Map}\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u041d\u0443\u043b\u044c(){return null==this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==this.\u043a\u0430\u0440\u0442\u0430}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(a){return null!=a&&"object"==typeof a&&(a.constructor===We||a.constructor===za)}\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return null!=a&&"object"==typeof a&&a.constructor===Dn}\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(){return this.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("number"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(a){return null!=a&&"number"==typeof a}\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(){return this.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("boolean"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(a){return null!=a&&"boolean"==typeof a}\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443(a){throw new Error(`\u041d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0438\u043f\u0430: \u043e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f ${a}, \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f: ${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"null"}; \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}.`)}\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(){return this.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("string"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return null!=a&&"string"==typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0441\u0442\u0440\u043e\u043a\u0430"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f||a.constructor===V0)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(a){return null!=a&&"string"==typeof a}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a,l=!1,h=!1){var d=We.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,a,!1);if(null==d&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(d=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a,!1)),null==d&&l)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==d&&h&&(d=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),d}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(a,l=!1,h=!1){var d=We.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(this,a,!1);if(null==d&&l)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==d&&h&&(d=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),d||null}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(a,l,h=!1){var d=null;if(a.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())d=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(l)||null;else if(h)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${l}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return d}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(a,l,h=!1){var d=void 0;if(a.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())d=a.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[l];else if(h)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0438\u043d\u0434\u0435\u043a\u0441 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 "${l}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return d}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a,l=!1){var h=We.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,a,!1);if(null==h&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(h=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a,!1)),null==h&&l)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return h}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(a,l,h=!1){var d=void 0;if(a.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())d=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(l);else if(a.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442())d=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442[l];else if(h)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${l}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return d}\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f(a){if(this.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().forEach((p,g,m)=>{a(g,p)});else if(this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()){var l=this.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;for(var h in l){var d=l[h],f="object"==typeof d;a(h,We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f?Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(d):d))}}}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a))}}class za extends We{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new za(null)}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new za(null)}}class V0 extends We{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new V0(null)}static \u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new V0(null)}}class uE extends We{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new uE(null)}static \u043d\u043e\u0432\u044b\u0439\u0411\u0443\u043b\u0435\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new uE(null)}}class Mw extends We{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new Mw(null)}static \u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432\u041e\u0431\u044a\u0435\u043a\u0442(){return new Mw(null)}}class Gr extends We{constructor(){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u044b"),null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new Gr}static \u043d\u043e\u0432\u044b\u0435(){return new Gr}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u044b(a){this.\u043a\u0430\u0440\u0442\u0430=a}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(a,l){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(a,l),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(a)||null}\u0435\u0441\u0442\u044c(a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(a)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c(a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().delete(a)}}let qtt=(()=>{class c{constructor(l,h,d,f=null,p=0,g=!0){S(this,"\u043a\u043e\u043c\u0430\u043d\u0434\u0430",void 0),S(this,"\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",void 0),S(this,"\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",void 0),S(this,"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435",void 0),S(this,"\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b",void 0),S(this,"\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445",void 0),S(this,"\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",null),S(this,"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439",-1),this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=l,this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=h,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=d,this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=f,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=p,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=g}static \u043d\u043e\u0432\u044b\u0439(){return new c(null,null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l){return this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(l){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(l){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(l){return this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(l){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(l){return this.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=l,this}\u0435\u0441\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(l){return null!=this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0435\u0441\u0442\u044c(l)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l,h){null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&(this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=new Gr);let d=null;return null===h?this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0434\u0430\u043b\u0438\u0442\u044c(l):(d=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(l,d)),d}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(l){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=l,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(l){return null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435?null:this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(l)}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(){var l=this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++;return this.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=this.\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(),l}\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(){return c.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439++}}return S(c,"\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439",0),c})();class qt extends We{constructor(a,l,h){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"),a?We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(a)?a:B0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a):null),S(this,"\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",void 0),S(this,"\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",void 0),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=l,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=h}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return!0}static \u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return new qt(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(a)?a:B0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a)),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(a){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=a,this}}class EU extends We{constructor(a,l,h){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"),a),S(this,"\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",void 0),S(this,"\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435",void 0),this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=l,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=h}static \u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return new EU(null,!0,!1)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(a){return this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u044f\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(a){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=a,this}}class AU extends We{constructor(a){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u043e\u0433\u043e\u0425\u043e\u043b\u0441\u0442\u0430"),null),S(this,"canvas2D",void 0),this.canvas2D=a}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u043e\u0433\u043e\u0425\u043e\u043b\u0441\u0442\u0430(){return new AU(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0425\u043e\u043b\u0441\u0442(a){return this.canvas2D=a,this}}class IU extends We{constructor(a){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"),null),S(this,"imageData",void 0),this.imageData=a}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f(){return new IU(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(a){return this.imageData=a,this}}class PU extends We{constructor(a){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432"),null),S(this,"data",void 0),this.data=a}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432(){return new PU(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(a){return this.data=a,this}}class An{constructor(a,l){S(this,"\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430",void 0),S(this,"\u0442\u0435\u043b\u043e",void 0),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=a,this.\u0442\u0435\u043b\u043e=l}static \u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434(){return new An(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(a){return this.\u0442\u0435\u043b\u043e=a,this}}class RU{constructor(a){S(this,"\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f",void 0),this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=a}static \u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435(){return new RU(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(a){return this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=a,this}}class FU{constructor(a,l){S(this,"\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430",void 0),S(this,"\u0438\u043c\u044f\u041f\u043e\u043b\u044f",void 0),this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=a,this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=l}static \u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442(){return new FU(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f(a){return this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=a,this}}class hE{constructor(a){S(this,"\u043e\u0431\u044a\u0435\u043a\u0442",void 0),this.\u043e\u0431\u044a\u0435\u043a\u0442=a}static \u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return new hE(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this}}class Xtt{constructor(){S(this,"\u0434\u043b\u0438\u043d\u0430",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]);return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().length)}),S(this,"\u043f\u043e\u0434\u0441\u0442\u0440\u043e\u043a\u0430",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),f=l.length>2?a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[2]):null;return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().substr(d?d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():0,f?f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():void 0))}),S(this,"\u0440\u0430\u0437\u0431\u0438\u0442\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),f=h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(new RegExp(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()));return a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.filter(g=>null!=g).map(g=>a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.trim())))}),S(this,"\u0432\u0435\u0440\u0445\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440",(a,l)=>{var h=l[0];return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toUpperCase())}),S(this,"\u043d\u0438\u0436\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440",(a,l)=>{var h=l[0];return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toLowerCase())}),S(this,"\u0432\u0427\u0438\u0441\u043b\u043e",(a,l)=>{var h=l[0];return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(+h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}),S(this,"\u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c",(a,l)=>{var h=l[0];return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().trim())}),S(this,"\u0438\u043d\u0434\u0435\u043a\u0441\u0414\u043b\u044f",(a,l)=>{var h=l[0],d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().indexOf(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),S(this,"\u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c\u0412\u0441\u0435",(a,l)=>{for(var h=l[0],d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[2]),p=h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g=new RegExp(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p.replace(g,f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());m!=p;)m=(p=m).replace(g,f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)})}}class Ytt{constructor(){S(this,"\u0434\u043b\u0438\u043d\u0430",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]);return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().length)}),S(this,"\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]),d=l.length>1?a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]):null;return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(p=>""+p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435).join(d?d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""))}),S(this,"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(d),h}),S(this,"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(...d.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()),h})}}class Wo{static builder(){return Wo.setup(new Wo)}static convertToObject(a){var l=null;return a.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()||a.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()||a.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?l=a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:a.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?l=a.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(h=>Wo.convertToObject(h)):a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"==a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?l=a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.imageData:a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432"==a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?l=a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.data:a.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&(l={},a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.forEach((h,d,f)=>{l[d]=Wo.convertToObject(h)})),l}static \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(a,l){if("boolean"==typeof l)return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l);if("number"==typeof l)return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l);if("string"==typeof l)return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l);if(Array.isArray(l)){for(var h=a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432"),d=[],f=0;f<l.length;++f)d.push(Wo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(a,l[f]));return h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d),h}if("object"==typeof l){if(l.constructor&&"ImageData"==l.constructor.name){let v=IU.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(l);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c("\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v)}var p=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(l&&l.constructor?l.constructor.name:"\u043e\u0431\u044a\u0435\u043a\u0442");for(var g in l){var m=l[g];p.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set(g,Wo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(a,m))}return p}return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("null")}static addMethod(a,l){return l[a]=(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!p.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u043c\u0425\u043e\u043b\u0441\u0442\u043e\u043c.");var m=h.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(p)),v=d.filter((_,b)=>b>0).map(_=>Wo.convertToObject(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(_))),y=m.canvas2D[a].apply(m.canvas2D,v);return Wo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(h,y)},l}static addGetter(a,l){return l["get"+this.upFirstLetter(a)]=(f,p)=>{var m=f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!m.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u043c\u0425\u043e\u043b\u0441\u0442\u043e\u043c.");var v=f.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(m));return Wo.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0412\u041e\u0431\u044a\u0435\u043a\u0442(f,v.canvas2D[a])},l}static addSetter(a,l){return l["set"+this.upFirstLetter(a)]=(f,p)=>{var g=f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p[1]),m=f.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p[0]),v=m.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!v.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u043c\u0425\u043e\u043b\u0441\u0442\u043e\u043c.");return f.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(v)).canvas2D[a]=Wo.convertToObject(g),m},l}static upFirstLetter(a){return a.substring(0,1).toUpperCase()+a.substring(1)}static setup(a){return["kx","ky","width","height","virtualWidth","virtualHeight"].concat(...this.allCanvasProps()).forEach(l=>{l.endsWith("()")?Wo.addMethod(l.substring(0,l.length-2),a):(Wo.addGetter(l,a),Wo.addSetter(l,a))}),a}static allCanvasProps(){return["isContextLost()","clearRect()","fillRect()","strokeRect()","fillText()","strokeText()","measureText()","lineWidth","lineCap","lineJoin","miterLimit","getLineDash()","setLineDash()","lineDashOffset","font","textAlign","textBaseline","direction","letterSpacing","fontKerning","fontStretch","fontVariantCaps","textRendering","wordSpacing","fillStyle","strokeStyle","createConicGradient()","createLinearGradient()","createRadialGradient()","createPattern()","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","beginPath()","closePath()","moveTo()","lineTo()","bezierCurveTo()","quadraticCurveTo()","arc()","arcTo()","ellipse()","rect()","roundRect()","fill()","stroke()","drawFocusIfNeeded()","scrollPathIntoView()","clip()","isPointInPath()","isPointInStroke()","getTransform()","rotate()","scale()","translate()","transform()","setTransform()","resetTransform()","globalAlpha","globalCompositeOperation","drawImage()","createImageData()","getImageData()","putImageData()","imageSmoothingEnabled","imageSmoothingQuality","save()","restore()","canvas","getContextAttributes()","reset()","isContextLost()","filter"]}}class Ktt{constructor(){S(this,"\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c",(a,l)=>a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),S(this,"\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),f=d?Wo.convertToObject(d):JSON.stringify(d,null,2);return console.log(f),h}),S(this,"\u043e\u0431\u044a\u0435\u043a\u0442\u0418\u043c\u0435\u0435\u0442\u041f\u043e\u043b\u0435",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[2]),f=h&&h.\u043a\u0430\u0440\u0442\u0430&&h.\u043a\u0430\u0440\u0442\u0430.has(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return f&&(f=!0),a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!f)}),S(this,"\u0432\u0440\u0435\u043c\u044f\u0412\u041c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445",(a,l)=>{var h=Date.now();return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h)}),S(this,"\u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c\u0412\u0440\u0435\u043c\u044f\u0412\u0421\u0442\u0440\u043e\u043a\u0443",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),d=h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%1e3,f=Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/1e3),p=Math.floor(f/60);f-=60*p;var g=Math.floor(p/60);p-=60*g;var m=(v,y)=>{for(var _=""+v;_.length<y;)_="0"+_;return _};return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`${m(g,2)}:${m(p,2)}:${m(f,2)}.${m(d,3)}`)}),S(this,"\u043c\u0438\u043d\u0438\u043c\u0443\u043c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[2]);return h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()<=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?h:d}),S(this,"\u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[2]);return h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?h:d}),S(this,"\u043e\u043a\u0440\u0443\u0433\u043b\u0438\u0442\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.round(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"floor",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"ceil",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.ceil(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"sqrt",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sqrt(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"pow",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[2]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.pow(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"cos",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.cos(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"sin",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sin(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"atan2",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[2]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.atan2(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"\u0410\u0421\u0414",(a,l)=>{var h=l.length>1?a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]):null,d=a.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414");return null!=h&&d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),d}),S(this,"\u0441\u0442\u043e\u043f",(a,l)=>l.length>1?l[1]:l[0])}}class Jtt{constructor(){S(this,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]);return a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d)),h}),S(this,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]);return a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())}),S(this,"\u0435\u0441\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[0]);return a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(l[1]),a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0411\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}),S(this,"\u0442\u0438\u043f",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d));return f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"):f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"):f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u0445\u0432\u0430\u0442"):f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u0430"):f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043c\u0430\u0441\u0441\u0438\u0432"):f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0447\u0438\u0441\u043b\u043e"):f.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0431\u0443\u043b\u0435\u0432\u043e"):f.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"):a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")}),S(this,"\u043a\u043e\u043c\u0430\u043d\u0434\u0430",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d)),p="";return f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&(p=f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}),S(this,"\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();return d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d)):a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")}),S(this,"\u0438\u043c\u044f\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d));if(f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442())return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var p=a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(f);return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p&&p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"")}return a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),S(this,"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var f=a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d);if(!f||!f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var p=f;return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length:0)}),S(this,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",(a,l)=>{var m=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]),h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1])),d=a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(m.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(d instanceof qt))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");var f=d,p=h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),g=-1==p?f:f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[p]:null;return m=a.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414"),null!=g&&m.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g)),m}),S(this,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1])),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[2])),p=a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(p instanceof qt))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");var g=p,m=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e();return-1==m?g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u0431\u044a\u0435\u043a\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([f]):g.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&(g.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[m]=f),f}),S(this,"\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]),d=a.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442()));if(!d.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");return a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d)})}}class Ou{static \u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(a){return a&&a.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f()?a.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():a}static useSetOperation(a,l,h){var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]),f=null,p=null;l[0].\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]):(p=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]),f=a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())));var g=h(Ou.\u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(f).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,Ou.\u0440\u0430\u0441\u043f\u0430\u043a\u043e\u0432\u0430\u0442\u044c(d).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);if(d=("string"==typeof g?a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430"):We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g),f&&f.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f())f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d);else if(p)a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d);else{let m=l[0].\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;m.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(m.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d)}return d}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",(l,h)=>null,!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0440\u043e\u0441\u0438\u0442\u044c",(l,h)=>{throw l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0].\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);if(!l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(h[0],null,d)){var p=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(null,p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d)}return d},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d+f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d-f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d*f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d/f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u043e\u0434\u0443\u043b\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d%f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d<<f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d>>f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(l,h)=>Ou.useSetOperation(l,h,(d,f)=>d>>>f),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());if(!f)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e: "${d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}".`);return f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():f},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0431\u044a\u0435\u043a\u0442",(l,h)=>l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0430\u0441\u0441\u0438\u0432",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return l.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([...d.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(p=>l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p)))])},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d,f)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u043a\u0430",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043c\u0438\u043d\u0443\u0441",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=null;if(d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())f=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e());else{if(!d.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())throw new Error("\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: "+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);f=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return f},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043f\u043b\u044e\u0441",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=null;if(d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())f=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e());else{if(!d.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())throw new Error("\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: "+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);f=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(+d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return f},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(l,h)=>{var f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):h[0],p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,p)}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}return p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(l,h)=>{var f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):h[0],p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=m,f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}return p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,p)}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}return p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=m,f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}return p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),p=null;if(f&&f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var g=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f);p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f,null,p)}else if(f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var m=f.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();p=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}return p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()*l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0430\u0441\u0442\u043d\u043e\u0435",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u043e\u0434\u0443\u043b\u044c",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0443\u043c\u043c\u0430",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+Wo.convertToObject(d)+Wo.convertToObject(f))},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0432\u043d\u043e",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!((!d||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==d.\u043a\u0430\u0440\u0442\u0430)&&(!f||null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u043a\u0430\u0440\u0442\u0430)||d&&f&&(null!=d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(d.\u043a\u0430\u0440\u0442\u0430==f.\u043a\u0430\u0440\u0442\u0430||d.\u043a\u0430\u0440\u0442\u0430&&f.\u043a\u0430\u0440\u0442\u0430&&0==d.\u043a\u0430\u0440\u0442\u0430.size&&0==f.\u043a\u0430\u0440\u0442\u0430.size))))},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!((!d||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==d.\u043a\u0430\u0440\u0442\u0430)&&(!f||null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u043a\u0430\u0440\u0442\u0430)||d&&f&&(null!=d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(d.\u043a\u0430\u0440\u0442\u0430==f.\u043a\u0430\u0440\u0442\u0430||d.\u043a\u0430\u0440\u0442\u0430&&f.\u043a\u0430\u0440\u0442\u0430&&0==d.\u043a\u0430\u0440\u0442\u0430.size&&0==f.\u043a\u0430\u0440\u0442\u0430.size))))},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d&&d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)===(f&&f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)&&(d&&d.\u043a\u0430\u0440\u0442\u0430)===(f&&f.\u043a\u0430\u0440\u0442\u0430))},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!==f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||d.\u043a\u0430\u0440\u0442\u0430!==f.\u043a\u0430\u0440\u0442\u0430)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-1):d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1):We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f="\u043d\u0443\u043b\u044c";return null==d?f="\u043d\u0443\u043b\u044c":d.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?f="\u0444\u0443\u043d\u043a\u0446\u0438\u044f":d.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?f="\u0447\u0438\u0441\u043b\u043e":d.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?f="\u0441\u0442\u0440\u043e\u043a\u0430":d.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?f="\u043c\u0430\u0441\u0441\u0438\u0432":d.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?f=d.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442 instanceof An?"\u043c\u0435\u0442\u043e\u0434":"\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442":d.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?f="\u0431\u0443\u043b\u0435\u0432\u043e":(d.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()||d.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())&&(f="\u043e\u0431\u044a\u0435\u043a\u0442"),V0.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=d&&(d.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().size||d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);return uE.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!f)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)<<(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)>>(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)>>>(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438\u043b\u0438",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)|(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)&(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u043d\u0435",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0)^(f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?+f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:0))},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u043b\u0438",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?d:l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1])},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438",(l,h)=>{if(!l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);var f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u043d\u0435\u0440\u0433\u0438\u0447\u043d\u043e\u0435 \u0438\u043b\u0438",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return d||f||We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.min(+l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",(l,h)=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.max(+l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0435\u0441\u043b\u0438",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=h[1],p=h[2],g=d.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?f:p;return null==g?null:l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]),f=h[1],p=h[2],g=d.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?f:p;return null==g?null:l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043a\u0430",(l,h)=>{var d=!1,f=null;try{var p=h[0];do{if(p&&(d=!!l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!d)break;var g=h[1];if(g){try{f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)}catch(m){if(m&&m.constructor!==gE)throw m}if(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}}while(d)}catch(m){if(m&&m.constructor!==pE)throw m}return f},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u0435\u043b\u0430\u0442\u044c",(l,h)=>{var d=!1,f=null;try{var p=h[0],g=h[1];do{if(g){try{f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)}catch(m){if(m&&m.constructor!==gE)throw m}if(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}p&&(d=!!l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}while(d)}catch(m){if(m&&m.constructor!==pE)throw m}return f},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u043f\u044f\u0442\u0430\u044f",(l,h)=>{var d=null;for(let p of h)d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p)||null;return d},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0446\u0438\u043a\u043b",(l,h)=>{var d=!0,f=null,p=h[0],g=h[1],m=h[2],v=h[3];let y=()=>{p&&(d=!!l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);try{for(;d;){if(g){try{f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null)}catch(_){if(_&&_.constructor!==gE)throw _}if(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}v&&l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null),p&&(d=!!l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}}catch(_){if(_&&_.constructor!==pE)throw _}return f};return m?l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,y):y(),f},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c",(l,h)=>{var d=null,f=h[0],p=h[1],g=h[2],m=h[3];try{f&&(d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null)),m&&(d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,null))}catch(v){if(g)try{l.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(null,null,null,!0,!1,!1),l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),We.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(v)?v:We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+v)),l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null),l.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),d=l.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442}catch(y){throw l.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),m&&(d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,null)),y}m&&(d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(m,null,null,!0,!1,!1,null))}return d},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043b\u0430\u0441\u0441",(l,h)=>{var d=h[0].\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(),f=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u043b\u0430\u0441\u0441");f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442();var p=f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();return d.forEach(g=>{l.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(g,p)}),f},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",(l,h)=>l.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[0]),!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u0435\u0440\u043d\u0443\u0442\u044c",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0]);return l.\u0432\u043e\u0437\u0432\u0440\u0430\u0442(d),d},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043e\u043f\u0438\u044f",(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]);return null==d?null:l.\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(d)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u0442\u043e",(l,h)=>l.\u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c",(l,h)=>{throw new pE},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",(l,h)=>{throw new gE},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e",(l,h)=>{var f=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[0]),p=null;if(f&&f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var g=f.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442.\u043e\u0431\u044a\u0435\u043a\u0442;p=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(l.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g),null,null,!1,!1,!1,null)}return p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c",(l,h)=>{var d=!1;do{d=!1;var p=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h[0],null,null,!0,!1,!1,null),g=null,m=null,v=null,y=null;if(p&&p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f&&(y=p.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442).\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430&&y.\u0438\u043c\u044f\u041f\u043e\u043b\u044f){v=y.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();var _=y.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(v);m=y.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430,p=_}var b=!1;if(p&&p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)if("\u043a\u043b\u0430\u0441\u0441"===p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){b=!0,(g=l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442")).\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=p;var C=p;if(C&&C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f((V,I)=>{if("\u043f\u043e\u043b\u0435"==I.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var U=I.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442,$=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(U.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f,null,null,!0,!1,!1,null));g.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(V,$)}}),C.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"))){var w=[l.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g,"\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)];for(let V=2;V<l.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length;V++)w.push(l.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[V]);var O=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(w);l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(O)}}else if("\u043c\u0435\u0442\u043e\u0434"==p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){b=!0;var D=h[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(),T=h[2],M=[m||We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()];if(T)for(let V=2;V<h.length;V++){var E=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h[V],null,null,!0,!1,!1,null);M.push(E)}var P=p.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;g=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(P.\u0442\u0435\u043b\u043e,M,P.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(!0),!1,D,D,null)}if(!b&&!d)throw l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v?`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${v}".`:`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${p?p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}".`)}while(d);return g},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e",(l,h)=>{var f=h[1],p=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h[0],null,null,!0,!1,!1,null)),m=l.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f,null,null,!0,!1,!1,null));return l.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p,m)},!1)}}class ent{constructor(){S(this,"floor",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"ceil",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.ceil(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"abs",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.abs(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"sqrt",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sqrt(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"sin",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sin(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"cos",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.cos(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}),S(this,"tan",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.tan(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))})}}class dE{constructor(){S(this,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435",(a,l)=>{var f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.imageData.data,p=PU.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0430\u043d\u043d\u044b\u0435(f);return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c("\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432","\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}),S(this,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0428\u0438\u0440\u0438\u043d\u0443",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.imageData.width)}),S(this,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0412\u044b\u0441\u043e\u0442\u0443",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.imageData.height)})}static builder(){return dE.setup(new dE)}static setup(a){return a}}class fE{constructor(){S(this,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]),f=h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.data[d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()])}),S(this,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(a,l)=>{var h=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]),d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[1]),f=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[2]);return h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.data[d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h}),S(this,"\u0434\u043b\u0438\u043d\u0430",(a,l)=>{var d=a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(l[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;return a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.data.length)})}static builder(){return fE.setup(new fE)}static setup(a){return a}}class pE{}class gE{}class Ew{constructor(){S(this,"\u043f\u0430\u0440\u0441\u0435\u0440",null),S(this,"\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b",[]),S(this,"\u0444\u0443\u043d\u043a\u0446\u0438\u0438",new Map),S(this,"\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435",We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))),S(this,"\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b",new Gr),S(this,"\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430",1),S(this,"\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430",0),S(this,"\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430",[]),S(this,"\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430",!1),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(a){return this.\u043f\u0430\u0440\u0441\u0435\u0440=a,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}get \u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length>0}get \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[0]}get \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}get \u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(a){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.unshift(a)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.shift()}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0435\u0442\u043e\u0434\u0412\u041e\u0431\u044a\u0435\u043a\u0442(a,l,h,d){let f=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();if(null==f)throw new Error(`\u041e\u0431\u044a\u0435\u043a\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0439, \u0430 \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f: "${a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?.\u0438\u043c\u044f}".`);if(f.has(l))throw new Error(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${l}".`);return f.set(l,this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(h))))),a}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(a){return this.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=a,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(){return this.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a,l,h){if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(a))throw new Error(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${a}".`);return this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.set(a,EU.\u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(B0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(l)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(h)),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a){let l=this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.get(a);if(!l)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f: "${a}".`);return l}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(a,l){var h=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;let d=h[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),p=null;return h[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?(p=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(h[2]).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(h[3]))),l?.set(d,p)):(p=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043f\u043e\u043b\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(RU.\u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(h[2]))),l?.set(d,p)),p}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a){var l=null;for(let _=0;_<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;_++){var h=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[_];if(!(_<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(l=h.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a))break;if(h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var d=h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],f=d;if(d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==d.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var p=d.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;f=p.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}if(f.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&(l=f.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a))&&(l=this.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f,a)),l)break}if(h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432){for(var g=-1,m=0;m<h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.length;m++)if(h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432[m].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==a){g=m+1;break}if(g>=0&&(l=h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[g]),l)break}if(!l&&h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(_+1<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length){_=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length-2;continue}if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(a)){var v=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[2];l=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(v.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&v.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length>=2?[...v.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.filter((b,C)=>C>=2)]:null))))}else{var y=this.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(a);y&&(l=y)}}if(l||h.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}return l}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a,l,h){let d=!1;if(a&&a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var f=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?f.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),h):f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(f.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[f.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=h),d=!0}else l&&(this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(l,h),d=!0);return d}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a,l){let h=null;for(let f=0;f<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;f++){let p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[f];if(!(f<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||p.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(h=p.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a),h)break;if(p.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var d=p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0];if(d.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(a))return d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(a,l),l;if(h)break}if(h||p.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}if(null==h&&(h=this.\u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,l)),h)h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=l;else if(null!=l)throw new Error(`\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${a}".`);return h}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a){return this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a))}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a){return this.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a)))}\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a){if(null==a)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: \u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442.");return a}\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(a){var l=a;return a.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?l=this.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):a.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?l=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):a.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&(l=this.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().concat([]))),l}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442(a){if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw new Error("\u041f\u0430\u0440\u0441\u0435\u0440 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d.");let l=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(a);return this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l),null,null,!0,!0,!1,null))}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a){var l=null;if(a.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())if(a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){let f=a;if(f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()){var h=this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),d=h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b):f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430();try{l=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(h,d,f.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!1,h.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435,!1,null),h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430()}catch(p){throw h.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(),p}}else a.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()&&(l=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(a,f.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b,f.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!0,!0,!1,null))}else l=a;else l=a;return l}\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,l,h,d=!0,f=!0,p=!1){var g=d?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(l):l;return this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(qtt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(f)),p?(this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.push({\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430}),this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=1,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=0):this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a=!1,l=!1){var h=!!a&&this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,d=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445;if(this.\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(),a&&h&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=h),this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&d?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!1:this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=Number.MAX_VALUE),l){var f=this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.pop();this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=f.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=f.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430}else this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430;return this}\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a){return null==a?null:a.map(l=>this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(l))}\u0432\u043e\u0437\u0432\u0440\u0430\u0442(a){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!0,this}\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a){var l=null;if(a&&a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var h=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?l=h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(l=h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}else l=a;return l}\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a,l){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0437\u0430\u0445\u0432\u0430\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(FU.\u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f("string"!=typeof l?l:this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l))))}\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(hE.\u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a)))}\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(a){var l=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;if(!(l instanceof hE))throw new Error(`\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u043c. \u0418\u043c\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430: '${a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?.\u0438\u043c\u044f}'.`);return l.\u043e\u0431\u044a\u0435\u043a\u0442}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(){var a=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442,l=a.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439,h=!1,d=null;try{if(a.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()){var f=a.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432();if(a.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<f.length){let p=f[a.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++];h=a.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<f.length,a.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(p)}}else a.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a.\u043a\u043e\u043c\u0430\u043d\u0434\u0430}catch(p){d=p}if(l!==a.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439&&(h=!0),d)throw d;return h}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(a,l,h,d,f,p,g){var m=null;if(a.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f())try{var v=a.\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0444\u0443\u043d\u043a\u0446\u0438\u044f;this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,l,h,d,f,p),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=v(this,this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b),g&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g()),m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p)}catch(y){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p),y}else if(a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f)try{this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,l,h,d,f,p),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a),g&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g()),m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p)}catch(y){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p),y}else if(a.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())try{for(this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,l,h,!0,f,p);this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(););g&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g()),m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p)}catch(y){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,p),y}else m=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a),g&&(m=g());return null==m&&(m=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),m}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,l){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,l),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,l){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(){return Ou.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),Ew.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),this}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u041f\u043e\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0443(a,l="\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e"){return za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(l)))}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a))}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c(a,l=""){return za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(l?Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(l))):Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a))}\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430(a){return V0.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430")))}\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432(a){return Mw.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432")))}\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414(a){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c(a,"\u0410\u0421\u0414")}\u043d\u043e\u0432\u044b\u0439\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442(a){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0421\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u043c(a,"\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442")}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){var l=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u041f\u043e\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e");a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430")).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435().\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set("\u0441\u0438\u0441\u0442\u0435\u043c\u0430",l),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",(d,f)=>l,!0);var h=a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u041f\u043e\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0443("\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430","\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430");h.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set("PI",a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.PI)),a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435().\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set("\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",h),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u043e\u043f",(d,f)=>(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f[0]),f.length?f[0]:We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(d,f)=>{var p=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f[0]),g=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f[1]);return l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g),g},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(d,f)=>{var p=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f[0]);return l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(d,f)=>{var p=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f[0]),g=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f[1]);return l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g),g},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(d,f)=>{var p=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(f[0]);return l.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(a,l){for(let h in a)this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0435\u0442\u043e\u0434\u0412\u041e\u0431\u044a\u0435\u043a\u0442(l,h,a[h],!1);return l}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b(){this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new Xtt,za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new Ytt,za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()));{let a=new Ktt;a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c=(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]);if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let f=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[0])},a.\u0444\u0430\u0431\u0440\u0438\u043a\u0430\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439=(l,h)=>{if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let d=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n              \u0440\u0430\u0437\u0431\u043e\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 \u043a\u043b\u0430\u0441\u0441 {\n                \u0438\u043d\u043b\u0430\u0439\u043d\u0417\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439)\n                {\n                  \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                    \u0430\u0441\u0434 = 0;\n                    \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                    \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                      \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                      \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                    }\n                  };\n                  \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n                    \u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435) {\n                      \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;\n                    }\n                    \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043a\u043e\u043f\u0438\u044f, \u0441\u043f\u0438\u0441\u043e\u043a) {\n                      \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                        \u0430\u0441\u0434 = 0;\n                        \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                        \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                          \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                          \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                        }\n                      };\n                      \u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 = \u0430\u0441\u0434.\u0442\u0438\u043f();\n                      \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = \u0430\u0441\u0434.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432();\n                      if (\u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 === '\u043a\u043e\u043c\u0430\u043d\u0434\u0430'){\n                        if (\u0430\u0441\u0434.\u043a\u043e\u043c\u0430\u043d\u0434\u0430() === '\u043a\u043e\u043f\u0438\u044f') {\n                          \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043f\u0438\u044f);\n                          \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = 0;\n                        }\n                      }\n                      for(i = 0; i < \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432; ++i) {\n                       \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 = \u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(i);\n                       \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, i),  \u0441\u043f\u0438\u0441\u043e\u043a);\n                      }\n                    }\n                  };\n                  //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0437\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439 = \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438;...');\n                  \u0430\u0441\u0434 = \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0410\u0421\u0414(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439);\n                  //\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c\u0410\u0421\u0414(\u0430\u0441\u0434, '');\n                  \u0441\u043f\u0438\u0441\u043e\u043a = [];\n                  \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, -1), \u0441\u043f\u0438\u0441\u043e\u043a);\n                  //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0414\u043b\u0438\u043d\u0430 \u0441\u043f\u0438\u0441\u043a\u0430: ' + \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430());\n                  for(i = 0; i < \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430(); ++i){\n                    \u043f\u0430\u0440\u0430 = \u0441\u043f\u0438\u0441\u043e\u043a[i];\n                    //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u043f\u0430\u0440\u0430: [' + \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 + '];');\n                    \u0440\u0435\u0437 = \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 == -1 ? \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c() :\n                      \u0412\u042b\u0417\u041e\u0412 \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c();\n                    \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441, \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0440\u0435\u0437));\n                  }\n                }\n              }");return l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[0])},a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043eHttp=(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]),f=pageLoadedFrom+d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();let p=new XMLHttpRequest;p.open("GET",f,!1);var g=null;try{if(p.send(),200!=p.status)throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${p.status}: ${p.statusText}`;g=l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.response)}catch{throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${p.status}: ${p.statusText}`}return g},a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=(l,h)=>{var d=l.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(h[1]),f=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return null==f&&(f=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),f},a.\u0432\u0440\u0435\u043c\u044f=(l,h)=>{var d=Date.now();return l.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)},this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(a,za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()))}this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new ent,za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0410\u0421\u0414",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(new Jtt,za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Wo.builder(),za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0414\u0430\u043d\u043d\u044b\u0435\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(dE.builder(),za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442())),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0411\u0430\u0439\u0442\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u0441\u0435\u041c\u0435\u0442\u043e\u0434\u044b\u041e\u0431\u044a\u0435\u043a\u0442\u0430\u0412\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(fE.builder(),za.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442()))}}class tnt{static \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(a){for(var l="",h=!1,d=0;d<a.length;++d){var f=a.charAt(d);if(h){switch(f){case"\\":l+="\\";break;case'"':l+='"';break;case"'":l+="'";break;case"r":l+="\r";break;case"n":l+="\n";break;case"t":l+="\t";break;default:l+=f}h=!1}else(h="\\"==f)||(l+=f)}return l}}class LU{constructor(a,l){S(this,"op",void 0),S(this,"exp",void 0),this.op=a,this.exp=l}static builder(){return new LU("",null)}setExp(a){return this.exp=a,this}setOp(a){return this.op=a,this}\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(a){return tnt.\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(a)}done(){let a=this.exp;switch(this.op){case"!":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"+i":{let l=this.exp;a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043f\u043b\u044e\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([l])}break;case"-i":{let l=this.exp;a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u043c\u0438\u043d\u0443\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([l])}break;case"++i":{let l=this.exp,h=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==l.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?l=l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([l,h])}break;case"i++":{let l=this.exp,h=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==l.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?l=l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([l,h])}break;case"--i":{let l=this.exp,h=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==l.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?l=l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([l,h])}break;case"i--":{let l=this.exp,h=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==l.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?l=l.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([l,h])}break;case";":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438");break;case"{;}":case"number":case"\u043f\u043e\u043b\u044f":a=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp);break;case"(,)":break;case"{,}":{let l=[];this.exp&&this.exp.forEach(h=>{l.push(h)}),a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l)]),a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a])}break;case"object":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0431\u044a\u0435\u043a\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"array":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"string":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([V0.\u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u044d\u0442\u043e":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u044d\u0442\u043e");break;case"\u043d\u0443\u043b\u044c":a=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null);break;case"\u0438\u0441\u0442\u0438\u043d\u0430":a=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0);break;case"\u043b\u043e\u0436\u044c":a=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);break;case"id":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u0431\u0440\u043e\u0441\u0438\u0442\u044c":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0440\u043e\u0441\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u043a\u043b\u0430\u0441\u0441":{let l=[];this.exp&&this.exp.forEach(h=>{l.push(h)}),a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l)])}break;case"[,]":a=Mw.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp?this.exp:[]);break;case"#":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u0435\u0440\u043d\u0443\u0442\u044c":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u0435\u0440\u043d\u0443\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp?this.exp:We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)]);break;case"\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c");break;case"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c");break;case"\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u044b\u0437\u043e\u0432":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"{{{?}}}":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043e\u043f\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0443\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f "${this.op}".`)}return a}}class NU{constructor(a,l,h){S(this,"left",void 0),S(this,"op",void 0),S(this,"right",void 0),this.left=a,this.op=l,this.right=h}static builder(){return new NU(null,"",null)}setLeft(a){return this.left=a,this}setRight(a){return this.right=a,this}setOp(a){return this.op=a,this}done(){let a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),l=h=>{let d=this.left;"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&typeof d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()&&(d=d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([d,this.right])};switch(this.op){case"(.)":{let h=this.right?this.right:[];h.unshift(this.left,We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"((.))":{let h=this.right?this.right:[];h.unshift(this.left,We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"[.]":a=qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"=":l("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+=":l("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"-=":l("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"*=":l("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"/=":l("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"%=":l("\u043c\u043e\u0434\u0443\u043b\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"<<=":l("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case">>=":l("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case">>>=":l("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"-":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"*":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"/":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0447\u0430\u0441\u0442\u043d\u043e\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"%":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u043e\u0434\u0443\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"|":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"&":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"^":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0438\u043d\u0430\u0440\u043d\u043e\u0435 \u043d\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<<":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0434\u0432\u0438\u0433 \u0432\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">>":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">>>":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0434\u0432\u0438\u0433 \u0432\u043f\u0440\u0430\u0432\u043e \u0441 \u043d\u0443\u043b\u0451\u043c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"||":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"&&":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"==":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!=":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"===":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!==":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">=":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=>":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"?":{let d=[...this.right];d.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(d)}break;case"\u0435\u0441\u043b\u0438":{let h=this.right?this.right:[];h.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"\u043f\u043e\u043a\u0430":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0434\u0435\u043b\u0430\u0442\u044c":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u0435\u043b\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0446\u0438\u043a\u043b":{let h=this.right?this.right:[];h.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0446\u0438\u043a\u043b").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c":{let h=this.right?this.right:[];h[0]=We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[0]),h.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h)}break;case"\u043c\u0435\u0442\u043e\u0434":{let h=this.right?this.right:[];h[0]&&h[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&h[0].\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.map(d=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.name))),h.unshift(...[this.left,!0].map(d=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d))),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h.map(d=>d||We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d)))}break;case"\u043f\u043e\u043b\u0435":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.left),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1),this.right]);break;case".":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.right)]);break;case",":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0437\u0430\u043f\u044f\u0442\u0430\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0431\u0438\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f: "${this.op}".`)}return a}}class BU{constructor(){S(this,"\u0434\u0432\u0438\u0436\u043e\u043a",new Ew),S(this,"\u0442\u0435\u043a\u0441\u0442",""),S(this,"\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430",0),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(this)}\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){return this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430<this.\u0442\u0435\u043a\u0441\u0442.length}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){if(!this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b())throw new Error("\u0412\u0441\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u044b. \u041a\u043e\u043d\u0435\u0446 \u0442\u0435\u043a\u0441\u0442\u0430.");return this.\u0442\u0435\u043a\u0441\u0442[++this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430]}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c(a){for(this.\u0442\u0435\u043a\u0441\u0442=a,this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430=0;this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b();)this.\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b()}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(a){for(var l={BinOpBuilder:()=>NU.builder(),UnOpBuilder:()=>LU.builder()},h=null;null==h;)try{return universalParserStatic.parse(a,{builder:l})}catch(d){h=d}throw h}}class _g{constructor(a,l){S(this,"\u043e\u0431\u044a\u0435\u043a\u0442",void 0),S(this,"\u0438\u043c\u044f",void 0),this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this.\u0438\u043c\u044f=l}static \u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new _g(null,"")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a){return this.\u0438\u043c\u044f=a,this}}class mE{constructor(a,l,h,d,f,p,g=0,m=!0,v=1,y=1){S(this,"d3Config",void 0),S(this,"d3Svc",void 0),S(this,"\u0434\u0432\u0438\u0436\u043e\u043a",void 0),S(this,"\u043f\u0430\u043c\u044f\u0442\u044c",void 0),S(this,"\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434",void 0),S(this,"\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440",void 0),S(this,"\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b",void 0),S(this,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b",void 0),S(this,"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438",void 0),S(this,"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438",void 0),this.d3Config=a,this.d3Svc=l,this.\u0434\u0432\u0438\u0436\u043e\u043a=h,this.\u043f\u0430\u043c\u044f\u0442\u044c=d,this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=f,this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=p,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=g,this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=m,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=v,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=y}static \u043d\u043e\u0432\u0430\u044f(){return new mE}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let a=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==a?1:a.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(a){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(a){return this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(a,l){return this.d3Config.width=a,this.d3Config.height=l,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(a){return this.d3Config=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(a){return this.d3Svc=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(a){return this.\u0434\u0432\u0438\u0436\u043e\u043a=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(a){return this.\u043f\u0430\u043c\u044f\u0442\u044c=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(a){return this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=a,this}\u0437\u0430\u043f\u0443\u0441\u043a(a=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u043f\u0443\u0441\u043a"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(a.map(h=>h.\u043e\u0431\u044a\u0435\u043a\u0442)),[We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(a.map(h=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0438\u043c\u044f))),!0,!0,!1,null))}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435(a=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(a.map(h=>h.\u043e\u0431\u044a\u0435\u043a\u0442)),[We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(a.map(h=>We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0438\u043c\u044f))),!0,!0,!1,null))}}class Aw{constructor(a=0,l=0){S(this,"\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",void 0),S(this,"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",void 0),S(this,"\u0442\u0435\u043a\u0441\u0442",void 0),S(this,"\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b",new Map),S(this,"\u0441\u043e\u0431\u044b\u0442\u0438\u044f",new Map),this.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=a,this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=l}static \u043d\u043e\u0432\u044b\u0439(){return new Aw}}class VU{constructor(){S(this,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b",[Aw.\u043d\u043e\u0432\u044b\u0439()]),S(this,"d3Element",null),S(this,"d3ElementTransition",null)}static \u043d\u043e\u0432\u0430\u044f(){return new VU}get \u043f\u0435\u0440\u0435\u0445\u043e\u0434(){return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b[this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.length-1]}transition(){return this.d3Element?this.d3ElementTransition=this.d3Element.transition():this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(Aw.\u043d\u043e\u0432\u044b\u0439()),this}resetTransition(){return this.d3Element?this.d3ElementTransition=null:this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(Aw.\u043d\u043e\u0432\u044b\u0439()),this}duration(a){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.duration(a)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=a,this}delay(a){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.delay(a)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=a,this}attr(a,l){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.attr(a,l):this.d3Element=this.d3Element.attr(a,l):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.set(a,l),this}text(a){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.text(a):this.d3Element=this.d3Element.text(a):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0442\u0435\u043a\u0441\u0442=a,this}event(a,l){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.on(a,l(this.d3Element)):this.d3Element=this.d3Element.on(a,l(this.d3Element)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.set(a,l),this}apply(a){this.d3Element=a;let l=this.d3Element;return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.forEach((h,d)=>{d&&(l=l.transition().duration(h.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c),h.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430&&(l=l.delay(h.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430))),h.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.forEach((f,p,g)=>{l=l.on(p,f(l))}),h.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.forEach((f,p,g)=>{l=l.attr(p,f)}),h.\u0442\u0435\u043a\u0441\u0442&&(l=l.text(h.\u0442\u0435\u043a\u0441\u0442)),d||(this.d3Element=l)}),this}}class vE extends We{constructor(a,l){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0422\u0435\u043a\u0441\u0442 D3"),null,new Map),S(this,"\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f",void 0),S(this,"\u043f\u0422\u0435\u043a\u0441\u0442",void 0),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u0422\u0435\u043a\u0441\u0442=l,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u0442\u0435\u043a\u0441\u0442(){return this.\u043f\u0422\u0435\u043a\u0441\u0442}set \u0442\u0435\u043a\u0441\u0442(a){this.\u043f\u0422\u0435\u043a\u0441\u0442=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new vE(null,null)}static \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(){return new vE(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u0442\u0435\u043a\u0441\u0442=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0442\u0435\u043a\u0441\u0442",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.text(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1])).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("x",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u0442\u0435\u043a\u0441\u0442.attr("y",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0440\u0430\u0437\u043c\u0435\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-size",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0436\u0438\u0440\u043d\u044b\u0439",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-weight",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300),this)))))),a.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439\u042f\u043a\u043e\u0440\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("text-anchor",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this))))));let l=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u0442\u0435\u043a\u0441\u0442.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([_g.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",l("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",l("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u0442\u0435\u043a\u0441\u0442.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u0442\u0435\u043a\u0441\u0442.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u0442\u0435\u043a\u0441\u0442.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class yE extends We{constructor(a,l){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041a\u0440\u0443\u0433 D3"),null,new Map),S(this,"\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f",void 0),S(this,"\u043f\u041a\u0440\u0443\u0433",void 0),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u041a\u0440\u0443\u0433=l,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u0440\u0443\u0433(){return this.\u043f\u041a\u0440\u0443\u0433}set \u043a\u0440\u0443\u0433(a){this.\u043f\u041a\u0440\u0443\u0433=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new yE}static \u043d\u043e\u0432\u044b\u0439\u041a\u0440\u0443\u0433(){return new yE}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u043a\u0440\u0443\u0433=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0440\u0430\u0434\u0438\u0443\u0441",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("r",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("cx",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043a\u0440\u0443\u0433.attr("cy",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("fill",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let l=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u043a\u0440\u0443\u0433.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([_g.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",l("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",l("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u0440\u0443\u0433.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043a\u0440\u0443\u0433.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043a\u0440\u0443\u0433.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class _E extends We{constructor(a,l){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a D3"),null,new Map),S(this,"\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f",void 0),S(this,"\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a",void 0),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=l,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a}set \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(a){this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new _E}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return new _E}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("height",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("x",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("y",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("transform",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0441\u043a\u0440\u0443\u0433\u043b\u0435\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("rx",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("ry",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let l=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([_g.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",l("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",l("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class bE extends We{constructor(a,l){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041b\u0438\u043d\u0438\u044f D3"),null,new Map),S(this,"\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f",void 0),S(this,"\u043f\u041b\u0438\u043d\u0438\u044f",void 0),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u041b\u0438\u043d\u0438\u044f=l,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043b\u0438\u043d\u0438\u044f(){return this.\u043f\u041b\u0438\u043d\u0438\u044f}set \u043b\u0438\u043d\u0438\u044f(a){this.\u043f\u041b\u0438\u043d\u0438\u044f=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new bE}static \u043d\u043e\u0432\u0430\u044f\u041b\u0438\u043d\u0438\u044f(){return new bE}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u043b\u0438\u043d\u0438\u044f=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("x1",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y1",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("x2",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[3]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y2",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[4]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("transform",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("fill-opacity",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke-width",h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let l=h=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((d,f)=>{let g=[f[1],We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];f.length>2&&g.push(...f.splice(2));let m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(g.map(v=>d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v))));return this.\u043b\u0438\u043d\u0438\u044f.event(h,v=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([_g.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(m).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",l("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",l("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043b\u0438\u043d\u0438\u044f.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043b\u0438\u043d\u0438\u044f.duration(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.\u043b\u0438\u043d\u0438\u044f.delay(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class Iw extends We{constructor(a){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),null,new Map),S(this,"\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f",void 0),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a,l){let h=Iw.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(l);a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443D3",(d,f)=>h,!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",(d,f)=>(h.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),h),!0)}static \u043d\u043e\u0432\u0430\u044f(){return new Iw}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0422\u0435\u043a\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),v=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[3]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300,y=this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Svc.textSizeDirect(p,g,v),_=h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u0440\u0438\u043a\u0430");return _.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0448\u0438\u0440\u0438\u043d\u0430",h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0448\u0438\u0440\u0438\u043d\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y.width)),_.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u044b\u0441\u043e\u0442\u0430",h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0432\u044b\u0441\u043e\u0442\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y.height)),_}))))),a.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.width)))))),a.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>h.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.height))))));let l=(h,d)=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((f,p)=>{let m=VU.\u043d\u043e\u0432\u0430\u044f();return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.pathes.push(ms.builder().setRenderHandler((v,y)=>{m.apply(v.append(d))})),h.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(m)}))));a.set("\u043a\u0440\u0443\u0433",l(yE,"circle")),a.set("\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a",l(_E,"rect")),a.set("\u0442\u0435\u043a\u0441\u0442",l(vE,"text")),a.set("\u043b\u0438\u043d\u0438\u044f",l(bE,"line")),a.set("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),d[0])))))),a.set("\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c\u0412\u0441\u0451",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.svgImage?.clearAll(),this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.clearAll(),d[0])))))),a.set("\u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440.regenerate(),d[0]))))))}}class Xde extends Sl{constructor(){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 JS."),S(this,"\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439",""),S(this,"\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",!1),S(this,"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f",null),S(this,"d3SvcSaved",null),S(this,"d3ConfigSaved",null),S(this,"cacheService",null),S(this,"\u043f\u0430\u043c\u044f\u0442\u044c",Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")))}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(a){return this.cacheService=a,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(a="/scenes/logo.scene.txt"){let l=this.cacheService.getRestPoint(a,null);this.cacheService.getTextRestcallUrl(l,h=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=h,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})}clear(){return super.clear(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let l=(new BU).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),h=new Ew,d=mE.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this);return h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),Iw.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(h,d),d.\u0437\u0430\u043f\u0443\u0441\u043a(),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(a,l,h){return this.d3SvcSaved=a,this.d3ConfigSaved=l,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=h,!1)}}class CE extends We{constructor(){super(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432"),null,new Map),S(this,"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435","\n\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}\n===\n1\n\u0421\u0411\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c\n\u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c.\n\u041c\u0423\u0427\u0415\u041d\u0418\u041a\u0410 \u0412\u041e\u041d\u0418\u0424\u0410\u0422\u0418\u042f\n--\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n17.00{\u043a}\n===\n2{\u043a}\n\u0412\u0421{\u043a}\n--\n\u041d\u0415\u0414\u0415\u041b\u042f 28-\u042f{\u043a}\n\u041f\u041e \u041f\u042f\u0422\u0418\u0414\u0415\u0421\u042f\u0422\u041d\u0418\u0426\u0415,{\u043a}\n\u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c,{\u043a}\n\u0421\u0412\u042f\u0422\u042b\u0425 \u041e\u0422\u0415\u0426.{\u043a}\n\u041f\u0420\u0410\u0412. \u0418\u041e\u0410\u041d\u041d\u0410 \u041a\u0420\u041e\u041d\u0428\u0422\u0410\u0414\u0422\u0421\u041a\u041e\u0413\u041e{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421{\u0437}\n--\n6.00{\u043a}\n\n8.00{\u043a}\n8.40{\u043a}\n\n17.00{\u0437}\n===\n3{\u0437}\n\u041f\u041d{\u0437}\n--\n\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n4\n\u0412\u0422\n--\n\u0412\u041c\u0426. \u0410\u041d\u0410\u0421\u0422\u0410\u0421\u0418\u0418 \u0423\u0417\u041e\u0420\u0415\u0428\u0418\u0422\u0415\u041b\u042c\u041d\u0418\u0426\u042b\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n5\n\u0421\u0420\n--\n\u0414\u0415\u0421\u042f\u0422\u0418 \u041c\u0423\u0427\u0415\u041d\u0418\u041a\u041e\u0412, \u0418\u0416\u0415 \u0412 \u041a\u0420\u0418\u0422\u0415\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f.\n--\n8.40\n\n17.00\n===\n6\n\u0427\u0422\n--\n\u041d\u0410\u0412\u0415\u0427\u0415\u0420\u0418\u0415\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0410 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u0410.\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415\u041d\u0421\u041a\u0418\u0419 \u0421\u041e\u0427\u0415\u041b\u042c\u041d\u0418\u041a\n\u041f\u0420\u041c\u0426. \u0415\u0412\u0413\u0415\u041d\u0418\u0418\n--\n\u0426\u0410\u0420\u0421\u041a\u0418\u0415 \u0427\u0410\u0421\u042b.\n\u0418\u0417\u041e\u0411\u0420\u0410\u0417\u0418\u0422\u0415\u041b\u042c\u041d\u042b.\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f \u0421 \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u0415\u0419\n\u0421\u0412\u0422. \u0412\u0410\u0421\u0418\u041b\u0418\u042f \u0412\u0415\u041b\u0418\u041a\u041e\u0413\u041e\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n--\n8.00\n\n\n\n17.00{\u043a}\n23.00{\u043a}\n===\n7{\u043a}\n\u041f\u0422{\u043a}\n--\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e \u0413\u041e\u0421\u041f\u041e\u0414\u0410 \u0411\u041e\u0413\u0410 \u0418 \u0421\u041f\u0410\u0421\u0410{\u043a}\n\u041d\u0410\u0428\u0415\u0413\u041e \u0418\u0418\u0421\u0423\u0421\u0410 \u0425\u0420\u0418\u0421\u0422\u0410{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u0412\u0415\u041b\u0418\u041a\u0410\u042f \u0412\u0415\u0427\u0415\u0420\u041d\u042f{\u0441}\n--\n8.40{\u043a}\n17.00{\u0441}\n===\n8{\u0441}\n\u0421\u0411{\u0441}\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u041e \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u041e\u041c.{\u0441}\n\u0421\u041e\u0411\u041e\u0420 \u041f\u0420\u0415\u0421\u0412\u042f\u0422\u041e\u0419 \u0411\u041e\u0413\u041e\u0420\u041e\u0414\u0418\u0426\u042b{\u0441}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0441}\n\u041f\u0430\u043d\u0438\u0445\u0438\u0434\u0430{\u0441}\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n8.40{\u0441}\n\n17.00{\u043a}\n===\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223\n                      "),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(a){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=a,this}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){let l=CE.\u043d\u043e\u0432\u0430\u044f();a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432",(h,d)=>l,!0)}static \u043d\u043e\u0432\u0430\u044f(){return new CE}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u043a\u0441\u0442\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(qt.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((l,h)=>l.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435))))))}}class UU extends Sl{constructor(a=210,l=297){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f JS.",a,l),S(this,"\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439",""),S(this,"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",null),S(this,"\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",!1),S(this,"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f",null),S(this,"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",null),S(this,"\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b",0),S(this,"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438",0),S(this,"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438",0),S(this,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b",!0),S(this,"d3SvcSaved",null),S(this,"d3ConfigSaved",null),S(this,"cacheService",null),S(this,"\u043f\u0430\u043c\u044f\u0442\u044c",Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))),S(this,"\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",new Map)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a,l){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.set(a,l),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(a){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(a){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=a,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let a=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==a?1:a.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}getWidth(){return this.d3ConfigSaved?this.d3ConfigSaved.width:this.width}getHeight(){return this.d3ConfigSaved?this.d3ConfigSaved.height:this.height}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(a,l="/scenes/scheduler.scene.txt"){return this.cacheService=a,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(l),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(a="/scenes/scheduler.scene.txt",l="/scenes/scheduler4.txt"){let h=this.cacheService.getRestPoint(a,null),d=this.cacheService.getRestPoint(l,null);this.cacheService.getTextRestcallUrl(h,f=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=f,null!=this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():this.cacheService.getTextRestcallUrl(d,p=>{this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=p,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})})}clear(){return super.clear(),this.d3ConfigSaved.clearAll(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let a=new BU,l=a.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),h=a.\u0434\u0432\u0438\u0436\u043e\u043a,d=CE.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435),f=mE.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b);h.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),Iw.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(h,f);let p=[_g.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(d).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438")];return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.forEach((m,v)=>p.push(_g.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(h.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(v))),f.\u0437\u0430\u043f\u0443\u0441\u043a(p),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(a,l,h){return this.d3SvcSaved=a,this.d3ConfigSaved=l,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=h,!1)}}class xh{static saveData(a,l){const h=document.createElement("a"),d=window.URL.createObjectURL(a);h.href=d,h.download=l,h.click(),window.URL.revokeObjectURL(d)}static startDownload(a,l){const h=document.createElement("a");h.setAttribute("href",a),h.setAttribute("download",l),h.click(),h.remove()}}var Pw=Bt(650);class nnt{StatementValue(){return zU.builder()}VariableValue(){return HU.builder()}UnaryOp(){return QU.builder()}BinaryOp(){return jU.builder()}NumberValue(){return $U.builder()}IdValue(){return WU.builder()}FuncValue(){return GU.builder()}}var Rc=(()=>(function(c){c[c.Number=0]="Number",c[c.Id=1]="Id",c[c.Function=2]="Function",c[c.UnaryOp=3]="UnaryOp",c[c.BinaryOp=4]="BinaryOp"}(Rc||(Rc={})),Rc))();class zU{constructor(a,l){S(this,"value",void 0),S(this,"variables",void 0),this.value=a,this.variables=l}static builder(){return new zU(null,[])}setValue(a){return this.value=a,this}setVariables(a){return this.variables=a,this}toString(){let a=this.variables.map(l=>l.toString()).join("\r\n");return`${this.value?.toString()};`+(a?` \u0433\u0434\u0435\n      ${a}\n`:"")+"\n."}}class HU{constructor(a,l,h){S(this,"name",void 0),S(this,"constant",void 0),S(this,"type",void 0),this.name=a,this.constant=l,this.type=h}static builder(){return new HU("",!1,"")}setName(a){return this.name=a,this}setConstant(a){return this.constant=a,this}setType(a){return this.type=a,this}toString(){return`${this.name}: ${this.constant?"\u043f\u043e\u0441\u0442 ":""}${this.type};`}}class Rw{constructor(a){S(this,"type",void 0),this.type=a}getType(){return this.type}toString(){return""}}class $U extends Rw{constructor(a){super(Rc.Number),S(this,"value",void 0),this.value=a}static builder(){return new $U(0)}setValue(a){return this.value=a,this}toString(){return`${this.value}`}}class WU extends Rw{constructor(a){return super(Rc.Id),S(this,"name",void 0),this.name=a,this}static builder(){return new WU("")}setName(a){return this.name=a,this}toString(){return`${this.name}`}}class GU extends Rw{constructor(a,l){super(Rc.Function),S(this,"name",void 0),S(this,"params",void 0),this.name=a,this.params=l}static builder(){return new GU("",[])}setName(a){return this.name=a,this}setParams(a){return this.params=a,this}isIntegralName(a){let l=!1;switch(a){case"integrate":case"integral":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u043b":l=!0}return l}isDiffName(a){let l=!1;switch(a){case"diff":case"differentiate":case"\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f":l=!0}return l}toString(){return this.isDiffName(this.name)&&2==this.params.length?`diff(${this.params.map(a=>a.toString()).join(",")})`:this.isIntegralName(this.name)&&2==this.params.length?`integrate(${this.params.map(a=>a.toString()).join(",")},1)`:this.isIntegralName(this.name)&&3==this.params.length?`integrate(${this.params.map(a=>a.toString()).join(",")})`:`${this.name}(${this.params.map(a=>a.toString()).join(",")})`}}class QU extends Rw{constructor(a,l){return super(Rc.UnaryOp),S(this,"name",void 0),S(this,"value",void 0),this.name=a,this.value=l,this}static builder(){return new QU("",null)}setName(a){return this.name=a,this}setValue(a){return this.value=a,this}toString(){return"()"==this.name?`(${this.value?.toString()})`:`${this.name}${this.value?.toString()}`}}class jU extends Rw{constructor(a,l,h){return super(Rc.BinaryOp),S(this,"left",void 0),S(this,"name",void 0),S(this,"right",void 0),this.left=a,this.name=l,this.right=h,this}static builder(){return new jU(null,"",null)}setLeft(a){return this.left=a,this}setName(a){return this.name=a,this}setRight(a){return this.right=a,this}toString(){return`${this.left?.toString()} ${this.name} ${this.right?.toString()}`}}class SE{parse(a){return formulasParserStatic.parse(a,{builder:new nnt})}}class Ur{constructor(a,l){S(this,"width",void 0),S(this,"height",void 0),S(this,"underline",!1),S(this,"overline",!1),S(this,"system",!1),S(this,"space",!1),this.width=a,this.height=l}static builder(){return new Ur(0,0)}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setUnderline(a){return this.underline=a,this}setOverline(a){return this.overline=a,this}setSystem(a){return this.system=a,this}setSpace(a){return this.space=a,this}calculateFor(a,l){this.width=this.space?l.fontSize/10:0,this.height=0}drawFor(a,l,h,d,f,p){this.overline&&p.lines.push(bi.builder().setWidth(p.lineWidth).setColor(p.colorLines).setX1(a).setY1(l).setX2(a+h).setY2(l)),this.underline&&p.lines.push(bi.builder().setWidth(p.lineWidth).setColor(p.colorLines).setX1(a).setY1(l+d).setX2(a+h).setY2(l+d))}}class tc extends Ur{constructor(a){super(0,0),S(this,"text",void 0),this.text=a}static builder(){return new tc("")}setText(a){return this.text=a,this}calculateFor(a,l){let h=a.textSizeDirect(this.text,l.fontSize,l.fontWeight);h&&this.setWidth(h.width).setHeight(h.height)}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p),p.texts.push(_i.builder().setText(this.text).setTextAnchor("left").setFontSize(p.fontSize+"px").translate(a,l+d-this.height*(1-p.fontLineRelativeOffset)).rotate(0).setColor(p.colorLines))}}class Du extends Ur{constructor(a){super(0,0),S(this,"childs",void 0),S(this,"centerDy",0),this.childs=a}static builder(){return new Du([])}setChilds(a){return this.childs=a,this}getCurCenterDy(a,l){return Yde.getCurCenterDy(a,l)}calculateFor(a,l){this.childs.forEach(f=>f.calculateFor(a,l));let h=0,d=0;this.centerDy=0,this.childs.forEach(f=>{h+=f.width;let p=this.getCurCenterDy(f,l);if(this.centerDy<p){let g=this.centerDy,m=d-g,v=p,y=f.height-v;this.centerDy=p,d=Math.max(g,v)+Math.max(m,y)}else d=Math.max(d,f.height+(p-this.centerDy))}),this.setWidth(h).setHeight(d)}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let g=a,m=l,_=h-0;this.childs.forEach(C=>{let x=this.getCurCenterDy(C,p);0==x&&(x=this.centerDy>0?(C.system?d:C.height)/2:0),C.drawFor(g,m+(C.system?0:this.centerDy-x),C.width,C.system?d:C.height,f,p),g+=C.width,_-=C.width})}}class bg extends Ur{constructor(a){super(0,0),S(this,"opened",void 0),this.opened=a}static builder(){return new bg(!0)}setOpened(a){return this.opened=a,this}getDivHeight(a){return a.lineWidth}calculateFor(a,l){this.setWidth(l.fontSize/4).setHeight(0).setSystem(!0)}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let m=p.fontSize/4*(p.fontSize/d),v=l+d-p.fontSize*(1-p.fontLineRelativeOffset),y=l+p.fontSize*(1-p.fontLineRelativeOffset),_=(y+v)/2,x=(v-y)/4,w=y+x,O=w+x,D=O+x;p.pathes.push(ms.builder().setRenderHandler((T,M)=>{let k=zx();this.opened?(k.moveTo(m,y),k.bezierCurveTo(0,w,0,O,0,_),k.bezierCurveTo(0,O,0,D,m,v)):(k.moveTo(0,y),k.bezierCurveTo(m,w,m,O,m,_),k.bezierCurveTo(m,O,m,D,0,v)),T.append("path").attr("d",k).attr("stroke",p.colorMain).attr("stroke-width",M.strokeWidth).attr("fill","none").attr("transform",(E,P)=>f.transformToString(M.transform||[]))}).setStrokeColor(p.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(a+1,0))}}class xE extends Ur{constructor(a){super(0,0),S(this,"childs",void 0),this.childs=a}static builder(){return new xE([])}setChilds(a){return this.childs=a,this}getUpPartHeight(){let a=0;for(let l=0;l<this.childs.length;++l)if(!this.childs[l].system){a=this.childs[l].height;break}return a}calculateFor(a,l){this.childs.forEach(f=>f.calculateFor(a,l));let h=0,d=0;this.childs.forEach(f=>{d+=f.height,h=Math.max(h,f.width)}),this.setWidth(h).setHeight(d)}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let g=a,m=l;g+=0,m+=d>this.height?d-this.height:0,this.childs.forEach(_=>{let b=0==_.width?0:h>_.width?(h-_.width)/2:0;_.drawFor(g+b,m,_.width?_.width:h-b,_.height,f,p),m+=_.height})}}class wE extends Ur{constructor(a){super(0,0),S(this,"underRootValue",void 0),this.underRootValue=a}static builder(){return new wE(Ur.builder())}setUnderRootValue(a){return this.underRootValue=a,this}getDivHeight(a){return 2*a.lineWidth}calculateFor(a,l){this.underRootValue.calculateFor(a,l),this.setWidth(l.fontSize/2+this.underRootValue.width).setHeight(this.underRootValue.height+2*this.getDivHeight(l))}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let g=p.fontSize/2,m=l+this.getDivHeight(p),v=l+d-p.fontSize*(1-p.fontLineRelativeOffset);p.lines.push(bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(a).setY1(m+d/2).setX2(a+g/3).setY2(m+d/2),bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(a+g/3).setY1(m+d/2).setX2(a+2*g/3).setY2(v),bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(a+2*g/3).setY1(v).setX2(a+g).setY2(m),bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(a+g).setY1(m).setX2(a+h).setY2(m));let y=this.getDivHeight(p);this.underRootValue.drawFor(a+g,m+y,h-g,d-2*y,f,p)}}class OE extends Ur{constructor(a,l){super(0,0),S(this,"rootNumberValue",void 0),S(this,"underRootValue",void 0),this.rootNumberValue=a,this.underRootValue=l}static builder(){return new OE(Ur.builder(),Ur.builder())}setUnderRootValue(a){return this.underRootValue=a,this}setNumberRootValue(a){return this.rootNumberValue=a,this}getDivHeight(a){return 2*a.lineWidth}getCenterDy(a){let l=this.getDivHeight(a),d=this.rootNumberValue.height;return this.underRootValue.height/2<d&&(l+=d),l}calculateFor(a,l){this.underRootValue.calculateFor(a,l),this.rootNumberValue.calculateFor(a,l);let h=l.fontSize/2,d=this.underRootValue.height,f=this.rootNumberValue.height,p=d/2,g=this.underRootValue.height+2*this.getDivHeight(l);if(d<=l.fontSize)g=d+f;else if(f>p){let m=l.fontSize+f+2*this.getDivHeight(l);g=g<m?m:g}this.setWidth(h+this.underRootValue.width+this.rootNumberValue.width).setHeight(g)}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let g=p.fontSize/2,m=l+this.getDivHeight(p),v=l+d-p.fontSize*(1-p.fontLineRelativeOffset),y=this.underRootValue.height,_=this.rootNumberValue.height,b=y/2,C=b<_?_:d/2;y<=p.fontSize?C=_:_>b&&(C=_+2*this.getDivHeight(p)),this.rootNumberValue.drawFor(a+g/3,m+C-this.rootNumberValue.height,this.rootNumberValue.width,this.rootNumberValue.height,f,p);let x=a+this.rootNumberValue.width;p.lines.push(bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(a).setY1(m+C).setX2(x+g/3).setY2(m+C),bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(x+g/3).setY1(m+C).setX2(x+2*g/3).setY2(v),bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(x+2*g/3).setY1(v).setX2(x+g).setY2(m),bi.builder().setColor(p.colorLines).setWidth(p.lineWidth).setX1(x+g).setY1(m).setX2(x+h-this.rootNumberValue.width).setY2(m)),this.underRootValue.drawFor(a+g+this.rootNumberValue.width,v-this.underRootValue.height,h-g-this.rootNumberValue.width,this.underRootValue.height,f,p)}}class Fw extends Ur{constructor(a){super(0,0),S(this,"underRootValue",void 0),this.underRootValue=a}static builder(){return new Fw(Ur.builder())}setUnderRootValue(a){return this.underRootValue=a,this}getDivHeight(a){return a.lineWidth}calculateFor(a,l){this.underRootValue.calculateFor(a,l);let h=l.fontSize/2;this.setWidth(h/2+h+this.underRootValue.width).setHeight(this.underRootValue.height+this.getDivHeight(l))}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let g=p.fontSize/2,m=g/2,v=g/2,y=l+d-p.fontSize*(1-p.fontLineRelativeOffset),_=l+p.fontSize*(1-p.fontLineRelativeOffset);p.pathes.push(ms.builder().setRenderHandler((b,C)=>{let x=zx();x.moveTo(0,y-v),x.bezierCurveTo(0,y,v,y,v,y-v),x.lineTo(v,_+v),x.bezierCurveTo(v,_,g,_,g,_+v),b.append("path").attr("d",x).attr("stroke",p.colorMain).attr("stroke-width",C.strokeWidth).attr("fill","none").attr("transform",(w,O)=>f.transformToString(C.transform||[]))}).setStrokeColor(p.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(a+1,0)),this.underRootValue.drawFor(a+g+m,l+this.getDivHeight(p),h-g,d,f,p)}}class DE extends Ur{constructor(a,l){super(0,0),S(this,"power",void 0),S(this,"value",void 0),this.power=a,this.value=l}static builder(){return new DE(Ur.builder(),Ur.builder())}setValue(a){return this.value=a,this}setPower(a){return this.power=a,this}calculateFor(a,l){this.value.calculateFor(a,l),this.power.calculateFor(a,l);let g=this.value.height+this.power.height-l.fontSize/4*3;this.setWidth(0*l.fontSize/4+this.value.width+this.power.width).setHeight(g)}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let m=0*p.fontSize/4;this.value.drawFor(a,l+(this.power.height-p.fontSize/4*3),this.value.width,this.value.height,f,p),this.power.drawFor(a+this.value.width+m,l,this.power.width,this.power.height,f,p)}getCenterDy(a){return this.power.height-a.fontSize/4*3+this.value.height/2}}class TE extends Ur{constructor(a,l,h){super(0,0),S(this,"diffOp",void 0),S(this,"byVar",void 0),S(this,"value",void 0),this.diffOp=a,this.byVar=l,this.value=h}static builder(){return new TE(Ur.builder(),Ur.builder(),Ur.builder())}setValue(a){return this.value=a,this}setDiffOp(a){return this.diffOp=a,this}setByVar(a){return this.byVar=a,this}calculateFor(a,l){this.value.calculateFor(a,l),this.byVar.calculateFor(a,l),this.diffOp.calculateFor(a,l);let p=this.value.height+this.byVar.height/2+this.diffOp.height/2;this.setWidth(this.value.width+Math.max(this.diffOp.width,this.byVar.width)).setHeight(p)}drawFor(a,l,h,d,f,p){super.drawFor(a,l,h,d,f,p);let y=this.byVar.height;this.value.drawFor(a,l+this.diffOp.height/2,this.value.width,this.value.height,f,p),this.diffOp.drawFor(a+this.value.width,l,this.diffOp.width,this.diffOp.height,f,p),this.byVar.drawFor(a+this.value.width,l+d-y,this.byVar.width,this.byVar.height,f,p)}getCenterDy(a){let d=this.diffOp.height,f=Yde.getCurCenterDy(this.value,a);return f=f||this.value.height/2,f+d/2}}class Yde{static getCurCenterDy(a,l){let h=0;return a instanceof xE?h=a.getUpPartHeight():a instanceof Du?h=a.centerDy:a instanceof Fw||a instanceof wE?h=this.getCurCenterDy(a.underRootValue,l):(a instanceof OE||a instanceof DE||a instanceof TE)&&(h=a.getCenterDy(l)),h}}class int{constructor(a=3){S(this,"divHight",void 0),this.divHight=a}convert(a){switch(a.getType()){case Rc.Id:return this.getId(a);case Rc.Number:return this.getNumber(a);case Rc.Function:return this.getFunction(a);case Rc.UnaryOp:return this.getUnary(a);case Rc.BinaryOp:return this.getBinary(a);default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f: ${a.getType()}`)}}getId(a){return tc.builder().setText(a.name)}getNumber(a){return tc.builder().setText(""+a.value)}getUnary(a){return"()"==a.name?Du.builder().setChilds([bg.builder().setOpened(!0),this.convertValueOrNull(a.value),bg.builder().setOpened(!1)]):Du.builder().setChilds([tc.builder().setText(a.name),this.convertValueOrNull(a.value)])}getBinary(a){return"/"==a.name?xE.builder().setChilds([this.convertValueOrNull(a.left),Ur.builder().setOverline(!0).setSystem(!0).setHeight(this.divHight),this.convertValueOrNull(a.right)]):"*"==a.name||"+"==a.name||"-"==a.name||"="==a.name?Du.builder().setChilds([this.convertValueOrNull(a.left),Ur.builder().setSpace(!0),tc.builder().setText(a.name),Ur.builder().setSpace(!0),this.convertValueOrNull(a.right)]):Du.builder().setChilds([this.convertValueOrNull(a.left),tc.builder().setText(a.name),this.convertValueOrNull(a.right)])}convertValueOrNull(a){return a?this.convert(a):tc.builder().setText("null")}getFunction(a){return"pow"==a.name&&2==a.params.length?DE.builder().setValue(this.convertValueOrNull(a.params[0])).setPower(this.convertValueOrNull(a.params[1])):"sqrt"==a.name&&1==a.params.length?wE.builder().setUnderRootValue(this.convertValueOrNull(a.params[0])):"root"==a.name&&2==a.params.length?OE.builder().setUnderRootValue(this.convertValueOrNull(a.params[0])).setNumberRootValue(this.convertValueOrNull(a.params[1])):"diff"==a.name&&2==a.params.length?TE.builder().setValue(Du.builder().setChilds([bg.builder().setOpened(!0),this.convertValueOrNull(a.params[0]),bg.builder().setOpened(!1)])).setByVar(this.convertValueOrNull(a.params[1])).setDiffOp(tc.builder().setText("'")):"integral"==a.name&&2==a.params.length||"integrate"==a.name&&3==a.params.length?Fw.builder().setUnderRootValue(Du.builder().setChilds([this.convertValueOrNull(a.params[0]),Ur.builder().setSpace(!0),Ur.builder().setSpace(!0),tc.builder().setText("d"),Ur.builder().setSpace(!0),this.convertValueOrNull(a.params[1])])):Du.builder().setChilds([tc.builder().setText(a.name),bg.builder().setOpened(!0),Du.builder().setChilds(a.params.flatMap((l,h)=>h>0?[tc.builder().setText(","),this.convertValueOrNull(l)]:[this.convertValueOrNull(l)])),bg.builder().setOpened(!1)])}}class kE extends Sl{getFormula(a){let l=a.getParam("\u0442\u0435\u043a\u0441\u0442"),h=null;try{let f=(new SE).parse(l),p=new int,g=f[f.length-1];g.value&&(h=p.convert(g.value))}catch{h=tc.builder().setText("\u041e\u0448\u0438\u0431\u043a\u0430: "+l)}return h}constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0444\u043e\u0440\u043c\u0443\u043b.",l=512,h=512){super(a,l,h)}generate(a,l,h){let d=this.getFormula(l);return d.calculateFor(a,l),this.width=l.width=d.width,this.height=l.height=d.height,l.colorBackground&&l.rects.push(a.createBackground(l)),d.drawFor(0,0,d.width,d.height,a,l),!0}}class wh{constructor(a,l,h){S(this,"_id",void 0),S(this,"key",void 0),S(this,"value",void 0),this._id=a,this.key=l,this.value=h}static create(a){return a?new wh(a._id,a.key,a.value):new wh(-1,"","")}static of(a,l){return new wh(0,a,l)}}class Cg{constructor(a,l,h){S(this,"success",void 0),S(this,"error",void 0),S(this,"item",void 0),this.success=a,this.error=l,this.item=h}static create(a){return new Cg(a.success,a.error,wh.create(a.item))}}let bo=(()=>{class c{constructor(l,h){S(this,"config",void 0),S(this,"localstorageSvc",void 0),S(this,"autoThemeKey","autotheme"),S(this,"themeKey","theme"),this.config=l,this.localstorageSvc=h}themeName(l=!0){return this.config.baseHref+(l?"/index.html":"/index.night.html")}nowIsNight(){return thisIsNightTheme}nowIsDay(){return!thisIsNightTheme}isLight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!0)}isNight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!1)}isAutoTheme(){return"true"==this.localstorageSvc.getStorage(this.autoThemeKey)}onToggleAutoTheme(){let l=this.isLight(),h=this.isNight();if(l||h||!l&&!h){this.localstorageSvc.setStorage(this.autoThemeKey,""+!0);let d=this.themeName(l);window.location.href=d}}switchToLight(){let l=this.themeName(!0);(this.localstorageSvc.getStorage(this.themeKey)!=l||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!0)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=l)}switchToNight(){let l=this.themeName(!1);(this.localstorageSvc.getStorage(this.themeKey)!=l||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!1)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=l)}applyTheme(){let l=window.ThemeHandler;if(l)try{let h=thisIsNightTheme?"night":"day";l.setTheme(h)}catch{}}printWindow(l){let h=!1,d=window.ThemeHandler;if(d)try{d.printWindow(l),h=!0}catch{}return h}getAudioRootFolder(){let l=window.ThemeHandler,h="./";if(l)try{h=l.getAudioRootFolder()}catch{}return h}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ln),Pe(PN))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class qi{static handleError(a,l){let h="";return h=a.error instanceof ErrorEvent?`Message: ${a.error.message}`:`Code: ${a.status}; Message: ${a.message}`,Ay(()=>"Something bad happened; please try again later. Error: "+h)}static callOnDone(a,l){null==l?a&&a(null):a&&("string"==typeof l||ArrayBuffer,a(l))}}class Mr{static merge(a,l){if(!a&&!l)return"";if(!a)return l;if(!l)return a;let h=a.endsWith("/"),d=l.startsWith("/"),f=a;return h!=d?f+=l:h?f+=d?l.substring(1):l:f?f+="/"+l:f=l,f}}class ME{}class ZU{}class np{constructor(a){this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?()=>{this.headers=new Map,a.split("\n").forEach(l=>{const h=l.indexOf(":");if(h>0){const d=l.slice(0,h),f=d.toLowerCase(),p=l.slice(h+1).trim();this.maybeSetNormalizedName(d,f),this.headers.has(f)?this.headers.get(f).push(p):this.headers.set(f,[p])}})}:()=>{this.headers=new Map,Object.keys(a).forEach(l=>{let h=a[l];const d=l.toLowerCase();"string"==typeof h&&(h=[h]),h.length>0&&(this.headers.set(d,h),this.maybeSetNormalizedName(l,d))})}:this.headers=new Map}has(a){return this.init(),this.headers.has(a.toLowerCase())}get(a){this.init();const l=this.headers.get(a.toLowerCase());return l&&l.length>0?l[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(a){return this.init(),this.headers.get(a.toLowerCase())||null}append(a,l){return this.clone({name:a,value:l,op:"a"})}set(a,l){return this.clone({name:a,value:l,op:"s"})}delete(a,l){return this.clone({name:a,value:l,op:"d"})}maybeSetNormalizedName(a,l){this.normalizedNames.has(l)||this.normalizedNames.set(l,a)}init(){this.lazyInit&&(this.lazyInit instanceof np?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(a=>this.applyUpdate(a)),this.lazyUpdate=null))}copyFrom(a){a.init(),Array.from(a.headers.keys()).forEach(l=>{this.headers.set(l,a.headers.get(l)),this.normalizedNames.set(l,a.normalizedNames.get(l))})}clone(a){const l=new np;return l.lazyInit=this.lazyInit&&this.lazyInit instanceof np?this.lazyInit:this,l.lazyUpdate=(this.lazyUpdate||[]).concat([a]),l}applyUpdate(a){const l=a.name.toLowerCase();switch(a.op){case"a":case"s":let h=a.value;if("string"==typeof h&&(h=[h]),0===h.length)return;this.maybeSetNormalizedName(a.name,l);const d=("a"===a.op?this.headers.get(l):void 0)||[];d.push(...h),this.headers.set(l,d);break;case"d":const f=a.value;if(f){let p=this.headers.get(l);if(!p)return;p=p.filter(g=>-1===f.indexOf(g)),0===p.length?(this.headers.delete(l),this.normalizedNames.delete(l)):this.headers.set(l,p)}else this.headers.delete(l),this.normalizedNames.delete(l)}}forEach(a){this.init(),Array.from(this.normalizedNames.keys()).forEach(l=>a(this.normalizedNames.get(l),this.headers.get(l)))}}class rnt{encodeKey(a){return Kde(a)}encodeValue(a){return Kde(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}const ont=/%(\d[a-f0-9])/gi,ant={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Kde(c){return encodeURIComponent(c).replace(ont,(a,l)=>ant[l]??a)}function EE(c){return`${c}`}class ip{constructor(a={}){if(this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new rnt,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function snt(c,a){const l=new Map;return c.length>0&&c.replace(/^\?/,"").split("&").forEach(d=>{const f=d.indexOf("="),[p,g]=-1==f?[a.decodeKey(d),""]:[a.decodeKey(d.slice(0,f)),a.decodeValue(d.slice(f+1))],m=l.get(p)||[];m.push(g),l.set(p,m)}),l}(a.fromString,this.encoder)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach(l=>{const h=a.fromObject[l],d=Array.isArray(h)?h.map(EE):[EE(h)];this.map.set(l,d)})):this.map=null}has(a){return this.init(),this.map.has(a)}get(a){this.init();const l=this.map.get(a);return l?l[0]:null}getAll(a){return this.init(),this.map.get(a)||null}keys(){return this.init(),Array.from(this.map.keys())}append(a,l){return this.clone({param:a,value:l,op:"a"})}appendAll(a){const l=[];return Object.keys(a).forEach(h=>{const d=a[h];Array.isArray(d)?d.forEach(f=>{l.push({param:h,value:f,op:"a"})}):l.push({param:h,value:d,op:"a"})}),this.clone(l)}set(a,l){return this.clone({param:a,value:l,op:"s"})}delete(a,l){return this.clone({param:a,value:l,op:"d"})}toString(){return this.init(),this.keys().map(a=>{const l=this.encoder.encodeKey(a);return this.map.get(a).map(h=>l+"="+this.encoder.encodeValue(h)).join("&")}).filter(a=>""!==a).join("&")}clone(a){const l=new ip({encoder:this.encoder});return l.cloneFrom=this.cloneFrom||this,l.updates=(this.updates||[]).concat(a),l}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(a=>this.map.set(a,this.cloneFrom.map.get(a))),this.updates.forEach(a=>{switch(a.op){case"a":case"s":const l=("a"===a.op?this.map.get(a.param):void 0)||[];l.push(EE(a.value)),this.map.set(a.param,l);break;case"d":if(void 0===a.value){this.map.delete(a.param);break}{let h=this.map.get(a.param)||[];const d=h.indexOf(EE(a.value));-1!==d&&h.splice(d,1),h.length>0?this.map.set(a.param,h):this.map.delete(a.param)}}}),this.cloneFrom=this.updates=null)}}class lnt{constructor(){this.map=new Map}set(a,l){return this.map.set(a,l),this}get(a){return this.map.has(a)||this.map.set(a,a.defaultValue()),this.map.get(a)}delete(a){return this.map.delete(a),this}has(a){return this.map.has(a)}keys(){return this.map.keys()}}function Jde(c){return typeof ArrayBuffer<"u"&&c instanceof ArrayBuffer}function efe(c){return typeof Blob<"u"&&c instanceof Blob}function tfe(c){return typeof FormData<"u"&&c instanceof FormData}class Lw{constructor(a,l,h,d){let f;if(this.url=l,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function cnt(c){switch(c){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==h?h:null,f=d):f=h,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new np),this.context||(this.context=new lnt),this.params){const p=this.params.toString();if(0===p.length)this.urlWithParams=l;else{const g=l.indexOf("?");this.urlWithParams=l+(-1===g?"?":g<l.length-1?"&":"")+p}}else this.params=new ip,this.urlWithParams=l}serializeBody(){return null===this.body?null:Jde(this.body)||efe(this.body)||tfe(this.body)||function unt(c){return typeof URLSearchParams<"u"&&c instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ip?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tfe(this.body)?null:efe(this.body)?this.body.type||null:Jde(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ip?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(a={}){const l=a.method||this.method,h=a.url||this.url,d=a.responseType||this.responseType,f=void 0!==a.body?a.body:this.body,p=void 0!==a.withCredentials?a.withCredentials:this.withCredentials,g=void 0!==a.reportProgress?a.reportProgress:this.reportProgress;let m=a.headers||this.headers,v=a.params||this.params;const y=a.context??this.context;return void 0!==a.setHeaders&&(m=Object.keys(a.setHeaders).reduce((_,b)=>_.set(b,a.setHeaders[b]),m)),a.setParams&&(v=Object.keys(a.setParams).reduce((_,b)=>_.set(b,a.setParams[b]),v)),new Lw(l,h,f,{params:v,headers:m,context:y,reportProgress:g,responseType:d,withCredentials:p})}}var Co=(()=>((Co=Co||{})[Co.Sent=0]="Sent",Co[Co.UploadProgress=1]="UploadProgress",Co[Co.ResponseHeader=2]="ResponseHeader",Co[Co.DownloadProgress=3]="DownloadProgress",Co[Co.Response=4]="Response",Co[Co.User=5]="User",Co))();class qU{constructor(a,l=200,h="OK"){this.headers=a.headers||new np,this.status=void 0!==a.status?a.status:l,this.statusText=a.statusText||h,this.url=a.url||null,this.ok=this.status>=200&&this.status<300}}class XU extends qU{constructor(a={}){super(a),this.type=Co.ResponseHeader}clone(a={}){return new XU({headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class AE extends qU{constructor(a={}){super(a),this.type=Co.Response,this.body=void 0!==a.body?a.body:null}clone(a={}){return new AE({body:void 0!==a.body?a.body:this.body,headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class nfe extends qU{constructor(a){super(a,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${a.url||"(unknown url)"}`:`Http failure response for ${a.url||"(unknown url)"}: ${a.status} ${a.statusText}`,this.error=a.error||null}}function YU(c,a){return{body:a,headers:c.headers,context:c.context,observe:c.observe,params:c.params,reportProgress:c.reportProgress,responseType:c.responseType,withCredentials:c.withCredentials}}let Id=(()=>{class c{constructor(l){this.handler=l}request(l,h,d={}){let f;if(l instanceof Lw)f=l;else{let m,v;m=d.headers instanceof np?d.headers:new np(d.headers),d.params&&(v=d.params instanceof ip?d.params:new ip({fromObject:d.params})),f=new Lw(l,h,void 0!==d.body?d.body:null,{headers:m,context:d.context,params:v,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const p=jn(f).pipe(Up(m=>this.handler.handle(m)));if(l instanceof Lw||"events"===d.observe)return p;const g=p.pipe(Kr(m=>m instanceof AE));switch(d.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return g.pipe(Qn(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return g.pipe(Qn(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return g.pipe(Qn(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return g.pipe(Qn(m=>m.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(l,h={}){return this.request("DELETE",l,h)}get(l,h={}){return this.request("GET",l,h)}head(l,h={}){return this.request("HEAD",l,h)}jsonp(l,h){return this.request("JSONP",l,{params:(new ip).append(h,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(l,h={}){return this.request("OPTIONS",l,h)}patch(l,h,d={}){return this.request("PATCH",l,YU(d,h))}post(l,h,d={}){return this.request("POST",l,YU(d,h))}put(l,h,d={}){return this.request("PUT",l,YU(d,h))}}return c.\u0275fac=function(l){return new(l||c)(Pe(ME))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();function ife(c,a){return a(c)}function hnt(c,a){return(l,h)=>a.intercept(l,{handle:d=>c(d,h)})}const rfe=new sn("HTTP_INTERCEPTORS"),Nw=new sn("HTTP_INTERCEPTOR_FNS");function fnt(){let c=null;return(a,l)=>(null===c&&(c=(Gi(rfe,{optional:!0})??[]).reduceRight(hnt,ife)),c(a,l))}let sfe=(()=>{class c extends ME{constructor(l,h){super(),this.backend=l,this.injector=h,this.chain=null}handle(l){if(null===this.chain){const h=Array.from(new Set(this.injector.get(Nw)));this.chain=h.reduceRight((d,f)=>function dnt(c,a,l){return(h,d)=>l.runInContext(()=>a(h,f=>c(f,d)))}(d,f,this.injector),ife)}return this.chain(l,h=>this.backend.handle(h))}}return c.\u0275fac=function(l){return new(l||c)(Pe(ZU),Pe(Xh))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const vnt=/^\)\]\}',?\n/;let afe=(()=>{class c{constructor(l){this.xhrFactory=l}handle(l){if("JSONP"===l.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ke(h=>{const d=this.xhrFactory.build();if(d.open(l.method,l.urlWithParams),l.withCredentials&&(d.withCredentials=!0),l.headers.forEach((C,x)=>d.setRequestHeader(C,x.join(","))),l.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!l.headers.has("Content-Type")){const C=l.detectContentTypeHeader();null!==C&&d.setRequestHeader("Content-Type",C)}if(l.responseType){const C=l.responseType.toLowerCase();d.responseType="json"!==C?C:"text"}const f=l.serializeBody();let p=null;const g=()=>{if(null!==p)return p;const C=d.statusText||"OK",x=new np(d.getAllResponseHeaders()),w=function ynt(c){return"responseURL"in c&&c.responseURL?c.responseURL:/^X-Request-URL:/m.test(c.getAllResponseHeaders())?c.getResponseHeader("X-Request-URL"):null}(d)||l.url;return p=new XU({headers:x,status:d.status,statusText:C,url:w}),p},m=()=>{let{headers:C,status:x,statusText:w,url:O}=g(),D=null;204!==x&&(D=typeof d.response>"u"?d.responseText:d.response),0===x&&(x=D?200:0);let T=x>=200&&x<300;if("json"===l.responseType&&"string"==typeof D){const M=D;D=D.replace(vnt,"");try{D=""!==D?JSON.parse(D):null}catch(k){D=M,T&&(T=!1,D={error:k,text:D})}}T?(h.next(new AE({body:D,headers:C,status:x,statusText:w,url:O||void 0})),h.complete()):h.error(new nfe({error:D,headers:C,status:x,statusText:w,url:O||void 0}))},v=C=>{const{url:x}=g(),w=new nfe({error:C,status:d.status||0,statusText:d.statusText||"Unknown Error",url:x||void 0});h.error(w)};let y=!1;const _=C=>{y||(h.next(g()),y=!0);let x={type:Co.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),"text"===l.responseType&&d.responseText&&(x.partialText=d.responseText),h.next(x)},b=C=>{let x={type:Co.UploadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),h.next(x)};return d.addEventListener("load",m),d.addEventListener("error",v),d.addEventListener("timeout",v),d.addEventListener("abort",v),l.reportProgress&&(d.addEventListener("progress",_),null!==f&&d.upload&&d.upload.addEventListener("progress",b)),d.send(f),h.next({type:Co.Sent}),()=>{d.removeEventListener("error",v),d.removeEventListener("abort",v),d.removeEventListener("load",m),d.removeEventListener("timeout",v),l.reportProgress&&(d.removeEventListener("progress",_),null!==f&&d.upload&&d.upload.removeEventListener("progress",b)),d.readyState!==d.DONE&&d.abort()}})}}return c.\u0275fac=function(l){return new(l||c)(Pe(LK))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const KU=new sn("XSRF_ENABLED"),lfe="XSRF-TOKEN",cfe=new sn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>lfe}),ufe="X-XSRF-TOKEN",hfe=new sn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>ufe});class dfe{}let _nt=(()=>{class c{constructor(l,h,d){this.doc=l,this.platform=h,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const l=this.doc.cookie||"";return l!==this.lastCookieString&&(this.parseCount++,this.lastToken=OK(l,this.cookieName),this.lastCookieString=l),this.lastToken}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr),Pe(Ss),Pe(cfe))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();function bnt(c,a){const l=c.url.toLowerCase();if(!Gi(KU)||"GET"===c.method||"HEAD"===c.method||l.startsWith("http://")||l.startsWith("https://"))return a(c);const h=Gi(dfe).getToken(),d=Gi(hfe);return null!=h&&!c.headers.has(d)&&(c=c.clone({headers:c.headers.set(d,h)})),a(c)}var oo=(()=>((oo=oo||{})[oo.Interceptors=0]="Interceptors",oo[oo.LegacyInterceptors=1]="LegacyInterceptors",oo[oo.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",oo[oo.NoXsrfProtection=3]="NoXsrfProtection",oo[oo.JsonpSupport=4]="JsonpSupport",oo[oo.RequestsMadeViaParent=5]="RequestsMadeViaParent",oo))();function y1(c,a){return{\u0275kind:c,\u0275providers:a}}function Cnt(...c){const a=[Id,afe,sfe,{provide:ME,useExisting:sfe},{provide:ZU,useExisting:afe},{provide:Nw,useValue:bnt,multi:!0},{provide:KU,useValue:!0},{provide:dfe,useClass:_nt}];for(const l of c)a.push(...l.\u0275providers);return function w2e(c){return{\u0275providers:c}}(a)}const ffe=new sn("LEGACY_INTERCEPTOR_FN");function xnt({cookieName:c,headerName:a}){const l=[];return void 0!==c&&l.push({provide:cfe,useValue:c}),void 0!==a&&l.push({provide:hfe,useValue:a}),y1(oo.CustomXsrfConfiguration,l)}let wnt=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({providers:[Cnt(y1(oo.LegacyInterceptors,[{provide:ffe,useFactory:fnt},{provide:Nw,useExisting:ffe,multi:!0}]),xnt({cookieName:lfe,headerName:ufe}))]}),c})(),pfe=(()=>{class c{getRestPoint(l,h){return Mr.merge(Mr.merge(h||this.config.serviceAPIHost,this.restPoint),l)}constructor(l,h){S(this,"http",void 0),S(this,"config",void 0),S(this,"restPoint","/settings"),this.http=l,this.config=h}handleError(l,h){return qi.handleError(l,h)}findKey(l,h){const d={_id:0,key:l,value:""};this.http.post(this.getRestPoint("/find",null),d,{}).pipe(mr(this.handleError)).subscribe({next:p=>{qi.callOnDone(h,Cg.create(p))},error:p=>{qi.callOnDone(h,null)}})}insertKey(l,h){this.http.post(this.getRestPoint("/insert",null),l,{}).pipe(mr(this.handleError)).subscribe({next:f=>{qi.callOnDone(h,Cg.create(f))},error:f=>{qi.callOnDone(h,null)}})}updateKey(l,h){this.http.post(this.getRestPoint("/update",null),l,{}).pipe(mr(this.handleError)).subscribe({next:f=>{qi.callOnDone(h,Cg.create(f))},error:f=>{qi.callOnDone(h,null)}})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),gfe=(()=>{class c{constructor(l){S(this,"config",void 0),S(this,"kvs",null),S(this,"localStorageName",""),this.config=l,this.localStorageName=l.serviceAPIHost+"KVSvc"}checkOrloadData(){if(this.kvs)return;const l=localStorage.getItem(this.localStorageName);if(l)try{this.kvs=JSON.parse(l)}catch{}this.kvs||(this.kvs={})}saveData(){const l=JSON.stringify(this.kvs);localStorage.setItem(this.localStorageName,l)}findKey(l,h){this.checkOrloadData();const d=this.kvs[l],f=null!=d;return this.config.post(()=>{qi.callOnDone(h,new Cg(f,f?null:"Not found",f?new wh(-1,l,d):null))}),d}insertKey(l,h){this.checkOrloadData(),this.kvs[l.key]=l.value,this.saveData(),this.config.post(()=>{qi.callOnDone(h,new Cg(!0,null,l))})}updateKey(l,h){this.checkOrloadData(),this.kvs[l.key]=l.value,this.saveData(),this.config.post(()=>{qi.callOnDone(h,new Cg(!0,null,l))})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),JU=(()=>{class c{constructor(l,h,d){S(this,"kvRest",void 0),S(this,"kvMemory",void 0),S(this,"config",void 0),S(this,"kv",null),this.kvRest=l,this.kvMemory=h,this.config=d,this.config.isMemoryServerType()&&(this.kv=this.kvMemory),(null==this.kv||this.config.isRestServerType())&&(this.kv=this.kvRest)}findKey(l,h){this.kv.findKey(l,h)}insertKey(l,h){this.kv.insertKey(l,h)}updateKey(l,h){this.kv.updateKey(l,h)}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(pfe),Pe(gfe),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class ez{constructor(a,l){S(this,"name",void 0),S(this,"value",void 0),this.name=a,this.value=l}equalsTo(a){return this.name==a.name&&this.value==a.value}static cloneFrom(a){return new ez(a.name,a.value)}}var tn=(()=>(function(c){c[c.Number=0]="Number",c[c.String=1]="String",c[c.Boolean=2]="Boolean"}(tn||(tn={})),tn))();class mn{static uiTypeToString(a){return["Number","String","Boolean"][a]}constructor(a,l,h,d,f,p){S(this,"name",void 0),S(this,"description",void 0),S(this,"type",void 0),S(this,"cfg",void 0),S(this,"saver",void 0),S(this,"defaultValue",void 0),this.name=a,this.description=l,this.type=h,this.cfg=d,this.saver=f,this.defaultValue=p}static builder(){return new mn("","",tn.String,()=>null,()=>{},null)}setName(a){return this.name=a,this}setDescription(a){return this.description=a,this}setType(a){return this.type=a,this}setDefaultValue(a){return this.defaultValue=a,this}setCfg(a){return this.cfg=a,this}setSaver(a){return this.saver=a,this}get stype(){return mn.uiTypeToString(this.type)}init(){let a=this.cfg();return null==a[this.name]&&(a[this.name]=this.defaultValue),this}getStringValue(){if(this.type!==tn.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyStringValue(a=null,l=""){let h=a??this.cfg();if(this.type!==tn.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let d=h[this.name];return("string"!=typeof d||null==d)&&(d=l??(null==this.defaultValue?"":this.defaultValue)),d}getNumberValue(){if(this.type!==tn.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyNumberValue(a=null,l=0){let h=a??this.cfg();if(this.type!==tn.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let d=h[this.name];return("number"!=typeof d||null==d)&&(d=l??(null==this.defaultValue?0:this.defaultValue)),d}getBooleanValue(){if(this.type!==tn.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyBooleanValue(a=null,l=0){let h=a??this.cfg();if(this.type!==tn.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let d=h[this.name];return("boolean"!=typeof d||null==d)&&(d=l??(null!=this.defaultValue&&this.defaultValue)),d}getAndVerifyValue(a=null,l=null){let h=null;switch(this.type){case tn.String:h=this.getAndVerifyStringValue(a,l);break;case tn.Number:h=this.getAndVerifyNumberValue(a,l);break;case tn.Boolean:h=this.getAndVerifyBooleanValue(a,l);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u044b\u043d\u0439 \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${this.stype}.`)}return h}setStringValue(a){if(this.type!==tn.String)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=a,this.save()}setNumberValue(a){if(this.type!==tn.Number)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=a,this.save()}setBooleanValue(a){if(this.type!==tn.Boolean)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=a,this.save()}setValue(a,l=null){return(l??this.cfg())[this.name]=a,null==l&&this.save(),this}get rawValue(){let a=this.cfg()[this.name];return null==a&&(this.cfg()[this.name]=this.defaultValue,a=this.cfg()[this.name]),a}set rawValue(a){this.cfg()[this.name]=a,this.save()}save(){this.saver&&this.saver()}}class Ont{constructor(){S(this,"lastLoginApp",mn.builder().setType(tn.String).setDescription("\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435").setDefaultValue("")),S(this,"defaultAppRoute",mn.builder().setType(tn.String).setDescription("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e").setDefaultValue("")),S(this,"stopServiceFlag",mn.builder().setType(tn.Boolean).setDescription("\u0412\u044b\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441").setDefaultValue(!0)),S(this,"autoDownloadAudioFiles",mn.builder().setType(tn.Boolean).setDescription("\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0443\u0434\u0438\u043e").setDefaultValue(!1)),S(this,"parallel",mn.builder().setType(tn.Boolean).setDescription("\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u043a\u0430\u0437").setDefaultValue(!0)),S(this,"fineText",mn.builder().setType(tn.Boolean).setDescription("\u0420\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442").setDefaultValue(!0)),S(this,"lineBreaks",mn.builder().setType(tn.Boolean).setDescription("\u0420\u0430\u0437\u0440\u044b\u0432\u044b \u0441\u0442\u0440\u043e\u043a").setDefaultValue(!0)),S(this,"coloredTranslations",mn.builder().setType(tn.Boolean).setDescription("\u0426\u0432\u0435\u0442\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u043e\u0432").setDefaultValue(!0)),S(this,"fontSize",mn.builder().setType(tn.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430").setDefaultValue("0")),S(this,"visitedBooksHelp",mn.builder().setType(tn.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043d\u0438\u0433").setDefaultValue("")),S(this,"visitedMemorialHelp",mn.builder().setType(tn.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430").setDefaultValue("")),S(this,"visitedCalculatorHelp",mn.builder().setType(tn.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue("")),S(this,"visitedCalendarHelp",mn.builder().setType(tn.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044f").setDefaultValue("")),S(this,"visitedCompilerHelp",mn.builder().setType(tn.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue("")),S(this,"visitedSchedulerHelp",mn.builder().setType(tn.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue("")),S(this,"currentBook",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue("")),S(this,"currentBookName",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0438\u043c\u044f \u043a\u043d\u0438\u0433\u0438").setDefaultValue("")),S(this,"currentBookLink",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043a\u043d\u0438\u0433\u0438").setDefaultValue("")),S(this,"currentChapter",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue("")),S(this,"currentLanguages",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u044f\u0437\u044b\u043a\u0438").setDefaultValue("")),S(this,"bookmarks",mn.builder().setType(tn.String).setDescription("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setDefaultValue("")),S(this,"currentMemorial",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setDefaultValue("")),S(this,"currentMemorialPage",mn.builder().setType(tn.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430").setDefaultValue(1)),S(this,"currentMemorialPsalom",mn.builder().setType(tn.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(0)),S(this,"memorialChapterRequested",mn.builder().setType(tn.Number).setDescription("\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(-1)),S(this,"memorialPageSize",mn.builder().setType(tn.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b").setDefaultValue("30")),S(this,"sortPersonsPriests",mn.builder().setType(tn.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0438\u043f\u044b \u0438\u043c\u0451\u043d").setDefaultValue(!1)),S(this,"sortPersonsNames",mn.builder().setType(tn.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u0430").setDefaultValue(!1)),S(this,"memorialVerticalView",mn.builder().setType(tn.Boolean).setDescription("\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0438\u0434").setDefaultValue(!1)),S(this,"mergeNameOnImport",mn.builder().setType(tn.Boolean).setDescription("\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u043c\u0435\u043d\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435").setDefaultValue(!1)),S(this,"showMolitvy",mn.builder().setType(tn.Boolean).setDescription("\u041f\u043e\u043a\u0430\u0437 \u043c\u043e\u043b\u0438\u0442\u0432").setDefaultValue(!0)),S(this,"addCommentToName",mn.builder().setType(tn.Boolean).setDescription("\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0432 \u0438\u043c\u044f").setDefaultValue(!0)),S(this,"addRepeatCommentToName",mn.builder().setType(tn.Boolean).setDescription("\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u044b").setDefaultValue(!1)),S(this,"currentOffset",mn.builder().setType(tn.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435").setDefaultValue(0)),S(this,"currentPersonOffset",mn.builder().setType(tn.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u044b").setDefaultValue(1)),S(this,"memorialBook",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue("")),S(this,"memorialChapter",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue("")),S(this,"memorialLine",mn.builder().setType(tn.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1)),S(this,"memorialsTitleRemark",mn.builder().setType(tn.String).setDescription("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043f\u0438\u0441\u043e\u043a").setDefaultValue("")),S(this,"memorialSlava1Zdrav",mn.builder().setType(tn.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0)),S(this,"memorialSlava2Zdrav",mn.builder().setType(tn.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0)),S(this,"memorialSlava3Zdrav",mn.builder().setType(tn.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0)),S(this,"memorialSlava1Upok",mn.builder().setType(tn.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0)),S(this,"memorialSlava2Upok",mn.builder().setType(tn.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0)),S(this,"memorialSlava3Upok",mn.builder().setType(tn.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0)),S(this,"memorialPsaltir",mn.builder().setType(tn.Boolean).setDescription("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setDefaultValue(!0)),S(this,"showFacePage",mn.builder().setType(tn.Boolean).setDescription("\u041e\u0431\u043b\u043e\u0436\u043a\u0430").setDefaultValue(!1)),S(this,"memorialPrintAllBook",mn.builder().setType(tn.Boolean).setDescription("\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0432\u0441\u044e \u043a\u043d\u0438\u0433\u0443").setDefaultValue(!1)),S(this,"audioValue",mn.builder().setType(tn.String).setDescription("\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435").setDefaultValue("1")),S(this,"calculatorBook",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue("")),S(this,"calculatorChapter",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue("")),S(this,"calculatorLine",mn.builder().setType(tn.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1)),S(this,"calculatorFormulaText",mn.builder().setType(tn.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue("")),S(this,"calendarBook",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue("")),S(this,"calendarChapter",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue("")),S(this,"calendarLine",mn.builder().setType(tn.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1)),S(this,"calendarText",mn.builder().setType(tn.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue("")),S(this,"compilerBook",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue("")),S(this,"compilerChapter",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue("")),S(this,"compilerLine",mn.builder().setType(tn.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1)),S(this,"compilerSourceText",mn.builder().setType(tn.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue("")),S(this,"schedulerBook",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue("")),S(this,"schedulerChapter",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue("")),S(this,"schedulerLine",mn.builder().setType(tn.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1)),S(this,"schedulerSourceText",mn.builder().setType(tn.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue("")),S(this,"calendarCurrentDate",mn.builder().setType(tn.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0434\u0430\u0442\u0430").setDefaultValue("")),S(this,"schedulerCurrentSettingsName",mn.builder().setType(tn.String).setDescription("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue("")),S(this,"schedulerText",mn.builder().setType(tn.String).setDescription("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setDefaultValue("")),S(this,"schedulerAllVariants",mn.builder().setType(tn.String).setDescription("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue("")),S(this,"schedulerServices",mn.builder().setType(tn.String).setDescription("\u0421\u043b\u0443\u0436\u0431\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue("")),S(this,"schedulerClerics",mn.builder().setType(tn.String).setDescription("\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""))}}class Dnt{constructor(a){S(this,"onChange",void 0),S(this,"saveCfg",{}),S(this,"metaCfg",new Ont),S(this,"values",new Map),this.onChange=a,this.setup()}get ui(){return this.metaCfg}cloneSaveCfg(a){let l={};return this.values.forEach((h,d,f)=>{h.setValue(h.getAndVerifyValue(a,null),l)}),l}add(a){return this.values.set(a.name,a.setCfg(()=>this.saveCfg).setSaver(()=>this.save())),a.init(),this}setup(){for(let a in this.metaCfg)this.add(this.metaCfg[a].setName(a))}getByName(a){return this.values.get(a)}forceSave(){this.save()}save(){this.onChange&&this.onChange(JSON.stringify(this.saveCfg))}get readonly(){return!!pageRequestedReadonly}load(a){try{const l=JSON.parse(a);this.saveCfg=this.cloneSaveCfg(l)}catch{}}toString(){return JSON.stringify(this.saveCfg)}}class U0{constructor(a,l){S(this,"enabled",void 0),S(this,"onChange",void 0),this.enabled=a,this.onChange=l}static builder(){return new U0(!1,a=>a)}setEnabled(a,l=!0){return this.enabled=a,l&&this.onChange(this),this}setOnChange(a){return this.onChange=a,this}}class IE{constructor(a){S(this,"settings",void 0),this.settings=a}static builder(){return new IE([])}add(a){return this.settings.push(a.setOnChange(l=>this.resetOther(l))),this}resetOther(a){a.enabled&&this.settings.forEach(l=>{l!==a&&l.setEnabled(!1,!1)})}}class ts{constructor(a){S(this,"uiValue",void 0),S(this,"oldRawValue",null),this.uiValue=a}static builder(){return new ts(null)}setUIValue(a){return this.uiValue=a,this}resetDetector(){return this.oldRawValue=null,this}checkAndUpdate(a=null){let l=this.oldRawValue!==(a??this.uiValue?.rawValue);return this.oldRawValue=a??this.uiValue?.rawValue,l}}let ii=(()=>{class c{getAppParam(l,h={}){return this.appParams.has(l)||this.appParams.set(l,h),this.appParams.get(l)}enableMainContainer(l){return this.mainContainerEnabled=l,this}setAppRoutes(l){let h=this.appRoutes;this.appRoutes=l;let d=++this.appRoutesId,f=this;return{unsubscribe(){d==f.appRoutesId&&(f.appRoutes=h)}}}get ui(){return this.pui.ui}get readonly(){return this.pui.readonly}constructor(l,h,d){S(this,"themesService",void 0),S(this,"kv",void 0),S(this,"config",void 0),S(this,"key","uiConfig20"),S(this,"keyKafizma","kafizmyOffset"),S(this,"keyBooks","booksLink"),S(this,"ready",!1),S(this,"pui",new Dnt(f=>{this.save(f)})),S(this,"appRoutesId",0),S(this,"appRoutes",null),S(this,"mainContainerEnabled",!1),S(this,"appParams",new Map),this.themesService=l,this.kv=h,this.config=d,this.check()}check(l,h=!1){!this.ready||h?this.kv.findKey(this.key,d=>{d&&d.success&&this.pui.load(d.item.value),this.ready=!0,this.applyServiceFlag(),l&&l()}):l&&l()}applyServiceFlag(){let l=window.ThemeHandler;if(l)try{l.requestStopServiceOnExitFlag&&l.requestStopServiceOnExitFlag(this.ui.stopServiceFlag.getBooleanValue())}catch{}}downloadAudioFile(l,h){let d=window.ThemeHandler;if(d)try{if(this.ui.autoDownloadAudioFiles.getBooleanValue()&&d.downloadAudioFile)return d.downloadAudioFile(l,h)}catch{}return""}getAudioTranslations(){let l=window.ThemeHandler;if(l)try{if(l.getAudioTranslations){let h=l.getAudioTranslations(),d=JSON.parse(h),f=[];for(let p=0;p<d.length;++p)f.push(ez.cloneFrom(d[p]));return f}}catch{}return[]}deleteAudioTranslation(l){let h=window.ThemeHandler;if(h)try{h.deleteAudioTranslation&&h.deleteAudioTranslation(l)}catch{}return""}setUIReady(){let l=window.UIHandler;if(l)try{l.onUIReady&&l.onUIReady(!0)}catch{}}save(l){if(this.readonly)return;const h=l||this.ui.toString(),d=wh.of(this.key,h),f=v=>{};this.kv.findKey(this.key,v=>{v&&v.success?(d._id=v.item._id,this.kv.updateKey(d,f)):this.kv.insertKey(d,f),this.applyServiceFlag()});let g=()=>{if("books"!=this.config.getApplication().id)return;let v=this.ui.currentBookName.getStringValue(),y=this.ui.currentBookLink.getStringValue();if(!v)return;const b=wh.of(this.keyBooks,JSON.stringify({link:y,name:v}));this.kv.findKey(this.keyBooks,C=>{C&&C.success&&C.item?(b._id=C.item._id,this.kv.updateKey(b,x=>{})):this.kv.insertKey(b,x=>{})})},m=()=>{if("memorial"!=this.config.getApplication().id)return;let v=this.ui.currentOffset.getNumberValue();v<0&&(v=this.ui.currentPersonOffset.getNumberValue());let y={offset:17,personOffset:v,theme:this.themesService.isAutoTheme()?0:this.themesService.isLight()?1:-1};const _=wh.of(this.keyKafizma,JSON.stringify(y));this.kv.findKey(this.keyKafizma,b=>{b&&b.success&&b.item?(_._id=b.item._id,this.kv.updateKey(_,C=>{this.config.post(g,1)})):this.kv.insertKey(_,C=>{this.config.post(g,1)})})};switch(this.config.getApplication().id){case"books":g();break;case"memorial":m();break;case"d3examples":case"d3Dexamples":case"calculator":case"calendar":case"compiler":case"scheduler":case"about":break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f: ${this.config.getApplication().id}.`)}}static getKafizmNumberBy(l,h){if(h<0)return 0;const d=new Date,f=d.getTime()-6e4*d.getTimezoneOffset(),p=Math.floor(f/1e3),g=Math.floor(p/60),m=Math.floor(g/60);return(Math.floor(m/24)%20+l+h)%20+1}static getOffsetByKafizmNumber(l,h){if(h<=0)return-1;const d=new Date,f=d.getTime()-6e4*d.getTimezoneOffset(),p=Math.floor(f/1e3),g=Math.floor(p/60),m=Math.floor(g/60);let _=(Math.floor(m/24)%20+l+0)%20+1;return h>=_?h-_:h-_+20}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(bo),Pe(JU),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class PE{static dtr(a,l){for(var h=l>=0?l:47,d=new ArrayBuffer(a.length-1),f=new Uint8Array(d),p=h,g=0;g<a.length;++g){var v=255&(a[g]^p);g>0&&(f[g-1]=v),p=255&(p+v^5)}return f}static fromByteArray(a){let l="";for(let h=0;h<a.length;h+=2)l+=String.fromCharCode(a[h+1]<<8|a[h]);return l}}let Pd=(()=>{class c{get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":"/static"}getRestPoint(l,h,d=null){const f=this.relativeCacheService||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return Mr.merge(Mr.merge(h||f,d??this.restPoint),l)}getLinkTo(l,h){const d=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return(h||d)+l}constructor(l,h){S(this,"http",void 0),S(this,"config",void 0),S(this,"relativeCacheService",!0),S(this,"cache",new Map),S(this,"cacheTextWaiting",new Map),S(this,"cacheZip",null),S(this,"loaded",!1),S(this,"loading",!1),S(this,"failOnCacheMiss",!1),S(this,"requests",[]),this.http=l,this.config=h,this.cache=h.cache,this.loaded=0!==this.cache.size}handleError(l,h){return qi.handleError(l,h)}getText(l,h){this.loaded?this.getTextDirect(l,h):this.loading?this.requests.push(()=>{this.getTextDirect(l,h)}):this.startLoadingStatic(l,!0,h)}getBinary(l,h){this.loaded?this.zipLoadOrReturnFalse(l,!1,h)||this.getBlobRestcall(l,h):this.loading?this.requests.push(()=>{this.zipLoadOrReturnFalse(l,!1,h)}):this.startLoadingStatic(l,!1,h)}startLoadingStatic(l,h,d){this.loading=!0,this.getBlobRestcall("/static.zip",f=>{let p=()=>{this.loaded=!0,this.loading=!1,h?this.getTextDirect(l,d):this.getBinaryDirect(l,d),this.requests.forEach(g=>{g()}),this.requests=[]};if(f){this.failOnCacheMiss=!0;let g=new Blob([new Uint8Array(f,0,f.byteLength)]);this.onLoadZipFile(g,p,()=>{this.cacheZip=null,this.failOnCacheMiss=!1,p()})}else this.failOnCacheMiss=!1,p()})}zipLoadOrReturnFalse(l,h,d){if(!this.cacheZip)return!1;let f=!1,p=l.startsWith("/")?l.substr(1):l,g=this.cacheZip.file(p);return g&&(f=!0,g.async(h?"string":"arraybuffer").then(m=>{qi.callOnDone(d,m)}).catch(()=>{qi.callOnDone(d,null)})),f}getTextDirect(l,h){if(!this.zipLoadOrReturnFalse(l,!0,h))if(this.cache.has(l)){const d=this.cache.get(l);setTimeout(()=>{qi.callOnDone(h,d)},0)}else this.failOnCacheMiss?qi.callOnDone(h,null):this.getTextRestcall(l,h)}getBinaryDirect(l,h){this.zipLoadOrReturnFalse(l,!1,h)||this.getBinaryRestcall(l,h)}getTextRestcall(l,h){let d=this.getRestPoint(l,null);return this.getTextRestcallUrl(d,h)}getBinaryRestcall(l,h){let d=this.getRestPoint(l,null);return this.getBinaryRestcallUrl(d,h)}completeTextOnDone(l,h){let d=this.cacheTextWaiting.get(l);d&&(d.forEach(f=>{this.config.post(()=>{f&&f(h)})}),this.cacheTextWaiting.delete(l))}readArrayBufferToString(l,h){var d=new Blob([new Uint8Array(l)]),f=new FileReader;f.onload=function(p){h&&h(p.target?.result)},f.readAsText(d)}getTextRestcallUrl(l,h){return this.coding?this.getBlobRestcallUrl(l,d=>{if(d)if(l.endsWith(".txt")||l.endsWith(".xhtml")){let p=new Uint8Array(d),g=PE.fromByteArray(p);h&&h(g)}else this.readArrayBufferToString(d,h);else h&&h(null)}):this.getTextRestcallUrlRaw(l,h)}getBinaryRestcallUrl(l,h){return this.getBlobRestcallUrl(l,d=>{h&&h(d)})}getTextRestcallUrlRaw(l,h){if(this.cache&&this.cache.has(l)){if(h){let d=this.cache.get(l);this.config.post(()=>{qi.callOnDone(h,d)})}}else this.cacheTextWaiting.has(l)?h&&this.cacheTextWaiting.get(l).push(h):(h&&this.cacheTextWaiting.set(l,[h]),this.http.get(l,{responseType:"text"}).pipe(mr(this.handleError)).subscribe({next:d=>{d&&this.cache.set(l,d),this.completeTextOnDone(l,d)},error:d=>{this.completeTextOnDone(l,null)}}))}getBlobRestcall(l,h){return this.getBlobRestcallUrl(this.getRestPoint(l,null),h)}getBlobRestcallUrl(l,h){let d=l;if(this.coding){let f=d.lastIndexOf(".");f>=0&&(d=d.substring(0,f)+".bin")}return this.getBlobRestcallUrlRaw(d,f=>{if(f)if(this.coding){let p=new Uint8Array(f),g=PE.dtr(p,-1);h&&h(g)}else h&&h(f);else h&&h(null)})}getBlobRestcallUrlRaw(l,h){this.http.get(l,{responseType:"arraybuffer"}).pipe(mr(this.handleError)).subscribe(d=>{qi.callOnDone(h,d)},d=>{qi.callOnDone(h,null)})}save(){const l=new Pw;l.file("version.txt","v.1.0"),this.cache.forEach((h,d,f)=>{l.file(d,h)}),l.generateAsync({type:"blob"}).then(h=>{new TextEncoder;const f=new Blob([h],{type:"octet/stream"}),g=`Static.Cache.${(new Date).toISOString().split("T")[0]}.zip`;xh.saveData(f,g)})}onLoadZipFile(l,h,d){const f=new FileReader;f.onload=p=>{const g=m=>{this.cacheZip=null,this.failOnCacheMiss=!1,h()};try{Pw.loadAsync(f.result).then(m=>{this.cacheZip=m,h()}).catch(g)}catch(m){g()}},f.readAsArrayBuffer(l)}unpackZip(l,h){const d=this.cacheZip.file(/^.*$/);let f=0;d.forEach(p=>{p.async("string").then(g=>{this.cache.set((p.name.startsWith("/")?"":"/")+p.name,g),++f==d.length&&l()}).catch(h)})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class ri{constructor(a,l,h,d,f,p){S(this,"vId",void 0),S(this,"vName",void 0),S(this,"vDescription",void 0),S(this,"vOffset",void 0),S(this,"vLive",void 0),S(this,"vTags",void 0),S(this,"vDirty",!1),S(this,"vPerson",null),S(this,"vOnDirty",null),this.vId=a,this.vName=l,this.vDescription=h,this.vOffset=d,this.vLive=f,this.vTags=p}static isPriest(a){return ri.getIndex(a)>0}static getIndex(a){const l=a.name.split(" ");if(l.length<=1)return-1;const h={"\u043f\u0430\u0442\u0440.":200,"\u0441\u0445\u0438\u043c\u0438\u0442\u0440.":100,"\u043c\u0438\u0442\u0440.":100,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f.":97,"\u0430\u0440\u0445\u0438\u0435\u043f.":96,"\u0441\u0445\u0438\u0435\u043f.":95,"\u0435\u043f.":90,"\u0432\u0438\u043a.":89,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c.":81,"\u0430\u0440\u0445\u0438\u043c.":80,"\u043f\u0440\u043e\u0442\u043e\u043f\u0440.":75,"\u0441\u0445\u0438\u0438\u0433\u0443\u043c.":70,"\u0438\u0433\u0443\u043c.":70,"\u043f\u0440\u043e\u0442.":60,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c.":56,"\u0438\u0435\u0440\u043e\u043c.":55,"\u0438\u0435\u0440.":50,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434.":48,"\u0430\u0440\u0445\u0438\u0434.":47,"\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a.":46,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434.":45,"\u0438\u0435\u0440\u043e\u0434.":44,"\u0434\u0438\u0430\u043a.":43,"\u0441\u0445\u0438\u043c.":35,"\u043c\u043e\u043d.":30,"\u0438\u043d.":25,"\u0438\u043f\u043e\u0434\u0438\u0430\u043a.":20,"\u0447\u0442.":10};let d=0;return l.forEach(f=>{const p=h[f];void 0!==p&&d<p&&(d=p)}),d}static sort(a,l=!1,h=!0){ri.sortPersons(a,d=>d,l,h)}static namesCompare(a,l){return ri.trimPrefixes(a).localeCompare(ri.trimPrefixes(l))}static trimPrefixes(a){return a.indexOf("."),a.split(" ").filter(h=>!h.trim().endsWith(".")).join(" ")}static namesSortFunction(a){return(l,h)=>{let d=a(l),f=a(h);return ri.namesCompare(d.name,f.name)}}static fullSortFunction(a,l=!0){return(h,d)=>{let f=a(h),p=a(d);if(f.live!==p.live)return f.live?-1:1;const g=ri.getIndex(f),m=ri.getIndex(p);if(g>0||m>0){let y=m-g;return 0==y&&l&&(y=ri.namesCompare(f.name,p.name)),y}let v=0;return 0==v&&l&&(v=ri.namesCompare(f.name,p.name)),0===v?0:v<0?-1:1}}static sortPersons(a,l,h=!1,d=!0){return d?a.sort(ri.fullSortFunction(l,h)):h&&a.sort(ri.namesSortFunction(l)),a}setOnDirty(a){return this.vOnDirty=a,this}revertDirty(){this.vPerson&&(this.vName=this.vPerson.name,this.vOffset=this.vPerson.offset,this.vDescription=this.vPerson.description,this.vLive=this.vPerson.live,this.vTags=this.vPerson.tags,this.vPerson=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vPerson=null}setDirty(){this.dirty=!0,null==this.vPerson&&(this.vPerson=new ri(this._id,this.name,this.description,this.offset,this.live,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vPerson}get dirty(){return this.vDirty}set dirty(a){this.vDirty=a}get _id(){return this.vId}set _id(a){this.setDirty(),this.vId=a,this.onDirty()}get name(){return this.vName}set name(a){this.setDirty(),this.vName=a,this.onDirty()}get description(){return this.vDescription}set description(a){this.setDirty(),this.vDescription=a,this.onDirty()}get offset(){return this.vOffset}set offset(a){this.setDirty(),this.vOffset=a,this.onDirty()}get live(){return this.vLive}set live(a){this.setDirty(),this.vLive=a,this.onDirty()}get tags(){return this.vTags}set tags(a){this.setDirty(),this.vTags=a,this.onDirty()}get kafizma(){return ii.getKafizmNumberBy(17,this.offset)}}class _1{constructor(a){S(this,"items",void 0),S(this,"handler",null),S(this,"handlerNewPerson",null),S(this,"handlerDeletePerson",null),this.items=a}clone(){let a=new _1([...this.items]);return a.handler=this.handler,a.handlerNewPerson=this.handlerNewPerson,a.handlerDeletePerson=this.handlerDeletePerson,a}setOnDirty(a){return this.handler=a,this.items.forEach(l=>{l.setOnDirty(a)}),this}setNewPersonHandler(a){return this.handlerNewPerson=a,this}setDeletePersonHandler(a){return this.handlerDeletePerson=a,this}newPerson(a,l){if(!this.handlerNewPerson)throw new Error("handlerNewPerson is null.");return this.handlerNewPerson(a,l)}deletePerson(a,l){if(!this.handlerDeletePerson)throw new Error("handlerDeletePerson is null.");return this.handlerDeletePerson(a)}}class nz{constructor(a,l,h,d,f,p){S(this,"_id",void 0),S(this,"name",void 0),S(this,"description",void 0),S(this,"offset",void 0),S(this,"live",void 0),S(this,"tags",void 0),this._id=a,this.name=l,this.description=h,this.offset=d,this.live=f,this.tags=p}}class Fc{constructor(a,l){S(this,"success",void 0),S(this,"error",void 0),this.success=a,this.error=l}static builder(){return new Fc(!1,"")}setSuccess(a){return this.success=a,this}setError(a){return this.error=a,this}}class iz{constructor(a,l,h){S(this,"success",void 0),S(this,"error",void 0),S(this,"fileName",void 0),this.success=a,this.error=l,this.fileName=h}static builder(){return new iz(!1,"","")}setSuccess(a){return this.success=a,this}setError(a){return this.error=a,this}setFileName(a){return this.fileName=a,this}}class rz{constructor(a,l){S(this,"success",void 0),S(this,"text",void 0),this.success=a,this.text=l}static builder(){return new rz(!1,"")}setSuccess(a){return this.success=a,this}setText(a){return this.text=a,this}}class sz{constructor(a){S(this,"items",void 0),this.items=a}static toPersons(a,l,h,d){const f=[];return a.items.forEach(p=>{f.push(new ri(p._id,p.name,p.description,p.offset,!!p.live,p.tags))}),new _1(f).setOnDirty(l).setNewPersonHandler(h).setDeletePersonHandler(d)}}class Tnt{constructor(a,l,h,d,f,p,g){S(this,"memkey",void 0),S(this,"id",void 0),S(this,"name",void 0),S(this,"description",void 0),S(this,"offset",void 0),S(this,"live",void 0),S(this,"tags",void 0),this.memkey=a,this.id=l,this.name=h,this.description=d,this.offset=f,this.live=p,this.tags=g}}class knt{constructor(){S(this,"handler",()=>{}),S(this,"onChangesEvent",new Tt),S(this,"enabled",!0)}setDetectChangesHandler(a){return this.handler=a,this}enableChangeDetector(a){this.enabled=a}getChangeDetector(){return this.onChangesEvent.asObservable()}detectedChanges(a){this.enabled&&(this.onChangesEvent.next(a),this.handler())}}let oa=(()=>{class c{constructor(){S(this,"intersectTagsMap",new Map),S(this,"tagsHasFlagMap",new Map)}static tagsHasFlag(l,h){const d=l.split(",");let f=!1;return d.forEach(p=>{p===h&&(f=!0)}),f}static addTagToTags(l,h){const d=l.split(","),f=[];let p=!1;return d.forEach(g=>{g!==h?g&&f.push(g):p=!0}),p||f.push(h),f.join(",")}static removeModificators(l){const h=l.split(","),d="\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3,\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439".split(",");let f=[];return h.forEach(p=>{d.findIndex(g=>g===p)<0&&f.push(p)}),f.join(",")}static removeTag(l,h){const d=l.split(",");let f=[];return d.forEach(p=>{p!=h&&f.push(p)}),f.join(",")}static intersectTags(l,h){let f=h;return l.split(",").filter(g=>c.tagsHasFlag(f,g)).join(",")}intersectTags(l,h){let d=this.intersectTagsMap.get(l);if(d){let p=d.get(h);if(null!=p)return p}let f=c.intersectTags(l,h);return d||(d=new Map,this.intersectTagsMap.set(l,d)),d.set(h,f),f}tagsHasFlag(l,h){let d=this.tagsHasFlagMap.get(l);if(d){let p=d.get(h);if(null!=p)return p}let f=c.tagsHasFlag(l,h);return d||(d=new Map,this.tagsHasFlagMap.set(l,d)),d.set(h,f),f}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),mfe=(()=>{class c{setCanSave(l){this.canSave=l}getRestPoint(l,h){return Mr.merge(Mr.merge(h||this.config.serviceAPIHost,this.restPoint),l)}getRestPointRaw(l,h){return Mr.merge(h||this.config.serviceAPIHost,l)}constructor(l,h){S(this,"http",void 0),S(this,"config",void 0),S(this,"persons",[]),S(this,"restPoint","/kafizmy"),S(this,"canSave",null),S(this,"personSaved",new Mt),S(this,"personsSubscribersMap",new Map),this.http=l,this.config=h}getAllPromise(l,h){let d=h||-1;const f=this.personsSubscribersMap.has(d);f||this.personsSubscribersMap.set(d,[]);const p=this.personsSubscribersMap.get(d);if(f)p.push(l);else{p.push(l);{const g=null!=d&&(d>=0||-1===d),m={params:{_memkey:""+d}},v={params:{}};this.http.get(this.getRestPoint(g?"/mempersons":"/persons",null),g?m:v).pipe(mr(qi.handleError)).subscribe({next:y=>{const _=this.personsSubscribersMap.get(d);null!=_&&(_.forEach(b=>{b(sz.toPersons(y,C=>{},(C,x)=>{this.newPerson(d,new ri(-1,C.name,C.description,C.offset,C.live,C.tags)).then(w=>{x&&x(w)},w=>{x&&x(Fc.builder().setSuccess(!1).setError(w))})},C=>{this.deletePerson(d,C)}),null)}),this.personsSubscribersMap.delete(d))},error:y=>{const _=this.personsSubscribersMap.get(d);null!=_&&(_.forEach(b=>{b(null,y)}),this.personsSubscribersMap.delete(d))}})}}}getAll(){return new Promise((l,h)=>{this.getAllPromise((d,f)=>{d?l(d):h(f)})})}getPersons(l){return new Promise((h,d)=>{this.getAllPromise((f,p)=>{f?h(f):d(p)},l)})}save(l,h,d){if(!d&&this.canSave&&!this.canSave(h))return new Promise((p,g)=>{this.config.post(()=>{p(Fc.builder().setSuccess(!0))})});const f={params:{__id:""+h._id,_memkey:""+l,_name:h.old.name,_description:h.old.description,_offset:""+h.old.offset,_live:h.old.live?"1":"0",_newName:h.name,_newDescription:h.description,_newOffset:""+h.offset,_newLive:h.live?"1":"0",_tags:h.tags}};return new Promise((p,g)=>{this.http.get(this.getRestPoint("/updatePerson",null),f).pipe(mr(qi.handleError)).subscribe({next:m=>{p(m)},error:m=>{g(""+m)}}),h.clearDirty(),this.personSaved.emit(h)})}newPerson(l,h){const d={params:{_memkey:""+l,_name:h.name,_description:h.description,_offset:""+h.offset,_live:h.live?"1":"0",_tags:h.tags}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/addPerson",null),d).pipe(mr(qi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(""+g)}}),h.clearDirty()})}newPersons(l){let d=[];l.forEach(g=>{d.push((g=>({memkey:g.memkey,name:g.name,description:g.description,offset:g.offset,live:g.live?1:0,tags:g.tags}))(g))});let f={persons:d};const p={params:{}};return new Promise((g,m)=>{this.http.post(this.getRestPoint("/addPersons",null),f,p).pipe(mr(qi.handleError)).subscribe({next:v=>{g(v)},error:v=>{m(""+v)}})})}deletePerson(l,h){const d={params:{_personId:""+h._id}};this.http.get(this.getRestPoint("/deletePersonById",null),d).pipe(mr(qi.handleError)).subscribe(f=>{},f=>{}),h.clearDirty()}deletePersons(l,h){const d={};let f=[];return l.forEach(p=>{f.push(p._id)}),new Promise((p,g)=>{this.http.post(this.getRestPoint("/deletePersons",null),{ids:f},d).pipe(mr(qi.handleError)).subscribe({next:m=>{p(m)},error:m=>{g(""+m)}})})}deleteAll(l){const h=null!=l&&l>=0,d={params:{_memkey:""+l}},f={params:{}};return new Promise((p,g)=>{this.http.get(this.getRestPoint(h?"/deleteMemorialPersons":"/deleteAllPersons",null),h?d:f).pipe(mr(qi.handleError)).subscribe({next:m=>{p(m)},error:m=>{g(""+m)}})})}addTempFile(l,h){const d={params:{_name:l}};return new Promise((f,p)=>{this.http.post(this.getRestPoint("/addFile",null),h,d).pipe(mr(qi.handleError)).subscribe({next:g=>{f(iz.builder().setSuccess(!0).setFileName(this.getRestPointRaw("/temp/"+l,null)))},error:g=>{p(null)}})})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class rp{constructor(){S(this,"result",!1),S(this,"errors","")}static build(){return new rp}setResult(a){return this.result=a,this}setErrors(a){return this.errors=a,this}}class oz{constructor(){S(this,"valid",!1),S(this,"added",!1),S(this,"authId","noId")}static build(){return new oz}setValid(a){return this.valid=a,this}setAdded(a){return this.added=a,this}setAuthId(a){return this.authId=a,this}}class az{constructor(){S(this,"errors",""),S(this,"result",!1),S(this,"status","")}static build(){return new az}setResult(a){return this.result=a,this}setErrors(a){return this.errors=a,this}setStatus(a){return this.status=a,this}}class Bw{constructor(a,l,h){S(this,"username",void 0),S(this,"password",void 0),S(this,"authId",void 0),this.username=a,this.password=l,this.authId=h}static clone(a){return new Bw(a.username,a.password,a.authId)}static cloneArray(a){const l=[];return a.forEach(h=>{l.push(Bw.clone(h))}),l}}let Vw=(()=>{class c{constructor(l){S(this,"config",void 0),S(this,"bLoggedIn",!1),S(this,"participants",[]),S(this,"nextNewAuthId",1),S(this,"localStorageName",""),this.config=l,this.localStorageName=l.serviceAPIHost+"AuthSvc",this.loadData()}loadData(){const l=localStorage.getItem(this.localStorageName);if(l)try{const h=JSON.parse(l);this.participants=Bw.cloneArray(h)}catch(h){this.config.addAlert(Pr.of("Error: "+h,"OK",10))}}saveData(){const l=JSON.stringify(this.participants);localStorage.setItem(this.localStorageName,l)}isLoggedIn(){return new Promise((l,h)=>{this.config.post(()=>{l(rp.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((l,h)=>{this.config.post(()=>{l(rp.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((l,h)=>{this.config.post(()=>{l(rp.build().setResult(!0))})})}handleError(l,h){return qi.handleError(l,h)}requestForUser(l,h){const d=oz.build().setValid(!1);let f=!1;if(this.participants.forEach(p=>{p.username===l&&(f=!0,d.setValid(h===p.password),d.setAuthId(p.authId=this.newAuthId()),d.setAdded(!1))}),!f&&l){const p=new Bw(l,h,this.newAuthId());this.participants.push(p),d.setValid(!0),d.setAuthId(p.authId),d.setAdded(!0)}return this.saveData(),new Promise((p,g)=>{this.config.post(()=>{p(d)})})}logoutAll(){this.participants.forEach(h=>{h.authId=""});const l=rp.build();return l.setErrors(""),l.setResult(!0),new Promise((h,d)=>{this.config.post(()=>{h(l)})})}requestVersion(){this.participants.forEach(h=>{h.authId=""});const l=az.build();return l.setErrors(""),l.setResult(!0),l.setStatus("memory.version"),new Promise((h,d)=>{this.config.post(()=>{h(l)})})}newAuthId(){return"MAT"+this.nextNewAuthId++}getParticipant(l){let h=null;return this.participants.forEach(d=>{d.authId===l&&(h=d)}),h}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),lz=(()=>{class c{constructor(l,h){S(this,"auth",void 0),S(this,"config",void 0),S(this,"memkey",-1),S(this,"authedPersons",null),S(this,"nextPersonId",1),S(this,"localStorageName",""),this.auth=l,this.config=h,this.localStorageName=h.serviceAPIHost+"KafSvc"}getUserId(){const h=this.auth.getParticipant(this.config.authId);if(!h)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return h.username}get persons(){const l=this.getUserId();return this.checkOrLoadData(),this.authedPersons[l]||(this.authedPersons[l]=new sz([])),this.authedPersons[l]}checkOrLoadData(){if(this.authedPersons)return;const l=localStorage.getItem(this.localStorageName);if(l)try{const h=JSON.parse(l);h&&(this.authedPersons=h)}catch(h){this.authedPersons={},this.config.addAlert(Pr.of("Error: "+h,"OK",10))}else this.authedPersons={};this.nextPersonId=1,this.persons.items.forEach(h=>{h._id>this.nextPersonId&&(this.nextPersonId=h._id+1)})}getNextPersonId(){return++this.nextPersonId}saveData(){const l=JSON.stringify(this.authedPersons);localStorage.setItem(this.localStorageName,l)}deleteAll(l){return this.checkOrLoadData(),this.persons.items=[],this.saveData(),new Promise((h,d)=>{h(Fc.builder().setSuccess(!0))})}deletePersons(l,h){return this.checkOrLoadData(),l.forEach(d=>{let f=this.persons.items.findIndex(p=>p._id===d._id);f>=0&&this.persons.items.splice(f,1)}),this.saveData(),new Promise((d,f)=>{d(Fc.builder().setSuccess(!0))})}checkAndAddDefaultHramvkostino(){let l="hramvkostino";this.persons.items.findIndex(h=>h.tags.indexOf(l)>=0)<0&&(this.addDefaultHramvkostino(this.persons,l),this.saveData())}checkAndAddDefaultAuthors(){let l="\u0430\u0432\u0442\u043e\u0440\u044b";this.persons.items.findIndex(h=>h.tags.indexOf(l)>=0)<0&&(this.addDefaultAuthors(this.persons,l),this.saveData())}addDefaultHramvkostino(l,h="\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"){const f="\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f|-1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|-1|true\n\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f|1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|0|true\n\u0421\u0435\u0440\u0433\u0438\u044f|2|true\n\u041c\u0430\u0440\u0438\u0438|3|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|4|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|5|true\n\u0413\u0430\u043b\u0438\u043d\u044b|6|true\n\u041f\u0430\u0432\u043b\u0430|7|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|8|true\n\u0415\u043b\u0435\u043d\u044b|9|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|10|true\n\u041b\u044e\u0431\u043e\u0432\u0438|11|true\n\u041d\u0430\u0434\u0435\u0436\u0434\u044b|12|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|13|true\n\u041b\u044e\u0434\u043c\u0438\u043b\u044b|14|true\n\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430|15|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|16|true\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|17|true\n\u0410\u043d\u0434\u0440\u0435\u044f|18|true\n\u041c\u0430\u0440\u0438\u043d\u044b|19|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|-1|false\n\u0412\u0438\u043a\u0442\u043e\u0440\u0430|-1|false\n\u0424\u043e\u0442\u0438\u043d\u0438\u0438|-1|false".split("\n"),p=h;f.forEach((g,m)=>{const v=g.trim().split("|");0!==v.length&&l.items.push(new nz(this.getNextPersonId(),v[0],"",+v[1],"true"===v[2],p))})}addDefaultAuthors(l,h="\u0430\u0432\u0442\u043e\u0440\u044b"){const f="\u0415\u0432\u0433\u0435\u043d\u0438\u044f|-1|true\n\u0410\u043d\u0434\u0440\u0435\u044f|-1|true".split("\n"),p=h;f.forEach((g,m)=>{const v=g.trim().split("|");0!==v.length&&l.items.push(new nz(this.getNextPersonId(),v[0],"",+v[1],"true"===v[2],p))})}getPersons(l){this.checkOrLoadData();const h=sz.toPersons(this.persons,d=>{},(d,f)=>{this.newPerson(this.memkey,new ri(-1,d.name,d.description,d.offset,d.live,d.tags)).then(p=>{f&&f(p)},p=>{f&&f(Fc.builder().setSuccess(!1).setError(""+p))})},(d,f)=>{this.deletePerson(this.memkey,d,f)});return new Promise((d,f)=>{this.config.post(()=>{d(h)})})}newPersons(l,h){return new Promise((d,f)=>{this.config.post(()=>{l.forEach(p=>{this.newPersonSync(p.memkey,new ri(p.id,p.name,p.description,p.offset,p.live,p.tags),h)}),d(Fc.builder().setSuccess(!0))},0)})}newPerson(l,h,d){return new Promise((f,p)=>{this.config.post(()=>{this.newPersonSync(l,h,d).then(g=>f(g))},0)})}newPersonSync(l,h,d){return this.checkOrLoadData(),this.persons.items.push(new nz(this.getNextPersonId(),h.name,h.description,h.offset,h.live,h.tags)),this.saveData(),new Promise((f,p)=>{f(Fc.builder().setSuccess(!0))})}save(l,h,d,f){this.checkOrLoadData();let p=!1;return this.persons.items.forEach(g=>{g._id===h._id&&(g.name=h.name,g.description=h.description,g.tags=h.tags,g.offset=h.offset,g.live=h.live,p=!0)}),p&&this.saveData(),h.clearDirty(),f&&f(new Fc(p,p?"OK":"Not found")),new Promise((g,m)=>{g(new Fc(p,p?"OK":"Not found"))})}deletePerson(l,h,d){this.checkOrLoadData();const f=this.persons.items.findIndex(g=>g._id===h._id),p=f>=0;return p&&(this.persons.items.splice(f,1),this.saveData()),h.clearDirty(),d&&d(new Fc(p,p?"OK":"Not found")),new Promise((g,m)=>{g(new Fc(p,p?"OK":"Not found"))})}addTempFile(l,h){return new Promise((d,f)=>{this.config.post(()=>{f("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.")})})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Vw),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class b1{constructor(a,l,h,d){S(this,"vId",void 0),S(this,"vName",void 0),S(this,"vMode",void 0),S(this,"vTags",void 0),S(this,"vDirty",!1),S(this,"vMemorial",null),S(this,"vOnDirty",null),S(this,"clazz",{}),S(this,"clazzBadge",{}),this.vId=a,this.vName=l,this.vMode=h,this.vTags=d}getOnDirty(){return this.vOnDirty}setOnDirty(a){return this.vOnDirty=a,this}revertDirty(){this.vMemorial&&(this.vName=this.vMemorial.name,this.vMode=this.vMemorial.mode,this.vMemorial=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vMemorial=null}setDirty(){this.dirty=!0,null==this.vMemorial&&(this.vMemorial=new b1(this._id,this.name,this.mode,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vMemorial}get dirty(){return this.vDirty}set dirty(a){this.vDirty=a}get _id(){return this.vId}set _id(a){this.setDirty(),this.vId=a,this.onDirty()}get name(){return this.vName}set name(a){this.setDirty(),this.vName=a,this.onDirty()}get mode(){return this.vMode}set mode(a){this.setDirty(),this.vMode=a,this.onDirty()}get tags(){return this.vTags}set tags(a){this.setDirty(),this.vTags=a,this.onDirty()}get enabled(){return"on"===this.mode}set enabled(a){this.mode=a?"on":"off"}}class Mnt{constructor(a){S(this,"items",void 0),S(this,"handler",null),S(this,"handlerNewMemorial",null),S(this,"handlerDeleteMemorial",null),this.items=a}setOnDirty(a){return this.handler=a,this.items.forEach(l=>{l.setOnDirty(a)}),this}setNewMemorialHandler(a){return this.handlerNewMemorial=a,this}addNewMemorialHandler(a){if(this.handlerNewMemorial){const l=this.handlerNewMemorial;this.handlerNewMemorial=(h,d)=>{l(h,f=>{a(h,f.success?d:void 0),!f.success&&d&&d(f)})}}else this.handlerNewMemorial=a;return this}setDeleteMemorialHandler(a){return this.handlerDeleteMemorial=a,this}addDeleteMemorialHandler(a){if(this.handlerDeleteMemorial){const l=this.handlerDeleteMemorial;this.handlerDeleteMemorial=(h,d)=>{l(h,f=>{a(h,f.success?d:void 0),!f.success&&d&&d(f)})}}else this.handlerDeleteMemorial=a;return this}newMemorial(a,l){if(this.handlerNewMemorial)return this.handlerNewMemorial(a,l);l&&l(So.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}deleteMemorial(a,l){if(this.handlerDeleteMemorial)return this.handlerDeleteMemorial(a,l);l&&l(So.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}}class So{constructor(a,l){S(this,"success",void 0),S(this,"error",void 0),this.success=a,this.error=l}static builder(){return new So(!1,"")}setSuccess(a){return this.success=a,this}setError(a){return this.error=a,this}}class Ent{constructor(a,l,h,d){S(this,"_id",void 0),S(this,"name",void 0),S(this,"mode",void 0),S(this,"tags",void 0),this._id=a,this.name=l,this.mode=h,this.tags=d}}class RE{constructor(a){S(this,"items",void 0),this.items=a}static toMemorials(a,l,h,d){const f=[];return a.items.forEach(p=>{f.push(new b1(p._id,p.name,p.mode,p.tags))}),new Mnt(f).setOnDirty(l).setNewMemorialHandler(h).setDeleteMemorialHandler(d)}}let vfe=(()=>{class c{setCanSave(l){this.canSave=l}getRestPoint(l,h){return Mr.merge(Mr.merge(h||this.config.serviceAPIHost,this.restPoint),l)}getRestPointRaw(l,h){return Mr.merge(h||this.config.serviceAPIHost,l)}constructor(l,h,d){S(this,"http",void 0),S(this,"config",void 0),S(this,"auth",void 0),S(this,"restPoint","/kafizmy"),S(this,"canSave",null),S(this,"memorialsSubscribers",null),S(this,"memorialSaved",new Mt),this.http=l,this.config=h,this.auth=d}getAllSubscribe(){return new Promise((l,h)=>{if(null!=this.memorialsSubscribers)this.memorialsSubscribers.push((d,f)=>{d?l(d):h(f)});else{this.memorialsSubscribers=[],this.memorialsSubscribers.push((f,p)=>{f?l(f):h(p)});const d={params:{}};this.http.get(this.getRestPoint("/memorials",null),d).pipe(mr(qi.handleError)).subscribe({next:f=>{if(null==this.memorialsSubscribers)return;const p=this.memorialsSubscribers;this.memorialsSubscribers=null,p.forEach(g=>{g(RE.toMemorials(f,m=>{this.save(m)},(m,v)=>{this.newMemorial(new b1(-1,m,"on","")).then(y=>v?v(y):null,y=>v?v(So.builder().setError(y)):null)},(m,v)=>{this.deleteMemorial(m).then(y=>v?v(y):null,y=>v?v(So.builder().setError(y)):null)}),null)})},error:f=>{if(null==this.memorialsSubscribers)return;const p=this.memorialsSubscribers;this.memorialsSubscribers=null,p.forEach(g=>{g(null,f)})}})}})}isReady(){return new Promise((l,h)=>{this.config.post(()=>{const f=this.auth.getParticipant(this.config.authId);l(So.builder().setSuccess(!!f))})})}getAll(){return this.getAllSubscribe()}save(l,h){if(!h&&this.canSave&&!this.canSave(l)||!l.dirty)return new Promise((f,p)=>{this.config.post(()=>{f(So.builder().setSuccess(!0))})});const d={params:{_name:l.old.name,_mode:l.old.mode,_newName:l.name,_newMode:l.mode,_newTags:l.tags}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/updateMemorial",null),d).pipe(mr(qi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(null)}}),l.clearDirty(),this.memorialSaved.emit(l)})}newMemorial(l,h){const d={params:{_name:l.name,_mode:l.mode}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/addMemorial",null),d).pipe(mr(qi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(null)}}),l.clearDirty()})}deleteMemorial(l,h){const d={params:{_name:l.name,_mode:l.mode}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/deleteMemorial",null),d).pipe(mr(qi.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(null)}}),l.clearDirty()})}deleteAll(){const l={params:{}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/deleteAllMemorials",null),l).pipe(mr(qi.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}})})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln),Pe(Vw))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),yfe=(()=>{class c{constructor(l,h,d){S(this,"kafizmSvc",void 0),S(this,"auth",void 0),S(this,"config",void 0),S(this,"memkey",-1),S(this,"authedMemorials",null),S(this,"localStorageName",""),S(this,"nextMemorialId",1),this.kafizmSvc=l,this.auth=h,this.config=d,this.localStorageName=d.serviceAPIHost+"MemSvc"}isReady(){return new Promise((l,h)=>{this.config.post(()=>{const f=this.auth.getParticipant(this.config.authId);l(So.builder().setSuccess(!!f))})})}getUserId(){const h=this.auth.getParticipant(this.config.authId);if(!h)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return h.username}get memorials(){const l=this.getUserId();return this.authedMemorials[l]||(this.authedMemorials[l]=new RE([])),this.authedMemorials[l]}getNextMemorialId(){return++this.nextMemorialId}checkOrloadData(){const l=()=>{let d=!0;this.memorials.items.forEach(p=>{"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"===p.name&&(d=!1)})};if(this.authedMemorials)return void l();const h=localStorage.getItem(this.localStorageName);if(h)try{const d=JSON.parse(h);this.authedMemorials=d||{}}catch(d){this.authedMemorials={},this.config.addAlert(Pr.of("Error: "+d,"OK",10))}this.authedMemorials||(this.authedMemorials={}),l(),this.nextMemorialId=1,this.memorials.items.forEach(d=>{d._id>this.nextMemorialId&&(this.nextMemorialId=d._id+1)})}saveData(){const l=JSON.stringify(this.authedMemorials);localStorage.setItem(this.localStorageName,l)}addTempFile(l,h,d){this.checkOrloadData()}deleteAll(){return new Promise((l,h)=>{this.config.post(()=>{this.checkOrloadData(),this.memorials.items=[],this.saveData(),l(So.builder().setSuccess(!0))})})}deleteMemorial(l){return new Promise((h,d)=>{this.config.post(()=>{this.checkOrloadData();const f=this.memorials.items.findIndex(g=>g._id===l._id),p=f>=0;p&&this.memorials.items.splice(f,1),this.saveData(),l.clearDirty(),h(new So(p,""))})})}getAll(){return new Promise((l,h)=>{this.config.post(()=>{this.checkOrloadData();const d=RE.toMemorials(this.memorials,f=>{},(f,p)=>{this.newMemorial(new b1(-1,f,"on","")).then(g=>p?p(g):null,g=>p?p(So.builder().setError(g)):null)},(f,p)=>{this.deleteMemorial(f).then(g=>p?p(g):null,g=>p?p(So.builder().setError(g)):null)});l(d)})})}getAllSubscribe(){return new Promise((l,h)=>{this.config.post(()=>{this.checkOrloadData();const d=RE.toMemorials(this.memorials,f=>{},(f,p)=>{this.newMemorial(new b1(-1,f,"on","")).then(g=>p?p(g):null,g=>p?p(So.builder().setError(g)):null)},(f,p)=>{this.deleteMemorial(f).then(g=>p?p(g):null,g=>p?p(So.builder().setError(g)):null)});l(d)})})}newMemorial(l){return new Promise((h,d)=>{this.config.post(()=>{if(this.checkOrloadData(),null!=this.memorials.items.find(p=>p.name==l.name))return void d(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c: '${l.name}'.`);let f=l.tags;f||(f+=l.name+",\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3"),this.memorials.items.push(new Ent(this.getNextMemorialId(),l.name,l.mode,f)),this.saveData(),"hramvkostino"==l.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==l.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),h(new So(!0,""))})})}save(l,h){return new Promise((d,f)=>{this.config.post(()=>{this.checkOrloadData();let p=!1;this.memorials.items.forEach(g=>{g._id===l._id&&(g.name=l.name,g.tags=l.tags,g.mode=l.mode,p=!0)}),p&&this.saveData(),"hramvkostino"==l.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==l.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),l.clearDirty(),d(new So(p,p?"OK":"Not found"))})})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(lz),Pe(Vw),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),C1=(()=>{class c{constructor(l,h,d){S(this,"msRest",void 0),S(this,"msMemory",void 0),S(this,"config",void 0),S(this,"memorials",null),S(this,"subscribers",null),S(this,"ms",null),S(this,"updateMemorialsAction",new See(f=>{this.getAll().then(p=>{f?.map(g=>g(!0))})},100,(f,p)=>this.config.post(p,f))),this.msRest=l,this.msMemory=h,this.config=d,this.config.isMemoryServerType()&&(this.ms=this.msMemory),(!this.ms||this.config.isRestServerType())&&(this.ms=this.msRest)}getMemorials(){return this.memorials}getActivePredefinedMemorialsRaw(){return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"]}getActivePredefinedMemorials(){let l=[],h=this.getActivePredefinedMemorialsRaw();return this.memorials&&this.memorials.items&&this.memorials.items.forEach(d=>{h.forEach(f=>{f==d.name&&l.indexOf(f)<0&&l.push(f)})}),l}setMemorials(l){this.memorials=l,this.memorials.addDeleteMemorialHandler((h,d)=>{this.reloadMemorials(),d&&d(new So(!0,""))}),this.memorials.addNewMemorialHandler((h,d)=>{this.reloadMemorials(()=>{d&&d(new So(!0,""))})})}isReady(){return this.ms?this.ms.isReady():new Promise((l,h)=>{this.config.post(()=>{h(So.builder().setSuccess(!1).setError("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0433\u043e\u0442\u043e\u0432."))})})}getAll(){return new Promise((l,h)=>{if(null==this.subscribers)if(null!=this.memorials)l(this.memorials);else{this.subscribers=[(f,p)=>{f?l(f):p&&h(p)}];const d=(f,p)=>{if(f&&this.setMemorials(f),null!=this.subscribers){let g=this.subscribers;this.subscribers=null,g.forEach(m=>{p?m(null,p):m(this.memorials,null)})}};this.ms.getAll().then(f=>{d(f,null)},f=>{d(null,f)})}else this.subscribers.push((d,f)=>{d?l(d):f&&h(f)})})}save(l,h){return new Promise((d,f)=>{this.ms.save(l,h).then(p=>{this.reloadMemorials(),d(p)},p=>{f(p)})})}newMemorial(l){return new Promise((h,d)=>{this.ms.newMemorial(l).then(f=>{this.reloadMemorials(p=>{f&&f.success?h(f):d(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${l.name}"`)})},f=>{d(f)})})}deleteMemorial(l){return new Promise((h,d)=>{this.ms.deleteMemorial(l).then(f=>{this.reloadMemorials(p=>{f&&f.success?h(f):d(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${l.name}"`)})},f=>{d(f)})})}deleteAll(){return new Promise((l,h)=>{this.ms.deleteAll().then(d=>{this.reloadMemorials(f=>{d&&d.success?l(d):h('\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u043e\u0432."')})},d=>{h(d)})})}reloadMemorials(l){this.memorials=null,this.updateMemorialsAction.requestAction(l)}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(vfe),Pe(yfe),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),Sg=(()=>{class c extends knt{newChangesId(){return++this.changesId}constructor(l,h,d,f){super(),S(this,"ksRest",void 0),S(this,"ksMemory",void 0),S(this,"config",void 0),S(this,"memorialsSvc",void 0),S(this,"memkey",-1),S(this,"persons",null),S(this,"subscribers",null),S(this,"ks",null),S(this,"predefinedPersons",null),S(this,"activePredefinedMemorialTags",""),S(this,"changesId",0),S(this,"virtualIdBase",1e8),this.ksRest=l,this.ksMemory=h,this.config=d,this.memorialsSvc=f,this.config.isMemoryServerType()&&(this.ks=this.ksMemory),(!this.ks||this.config.isRestServerType())&&(this.ks=this.ksRest),this.setupPredefinedPersons()}getPersonsDirect(){return this.persons}reloadPersons(){this.persons=null,this.getPersons(-1)}getPersons(l){return new Promise((h,d)=>{let f=(p,g)=>{p?h(p):d(""+g)};null==this.subscribers?null!=this.persons?h(this.persons):(this.subscribers=[f],this.ks?.getPersons(this.memkey).then(p=>{if(this.persons=this.filterPersonsAndPredefined(p),null!=this.subscribers){const g=this.subscribers;this.subscribers=null,g.forEach(m=>{m(this.persons,null)})}this.config.post(()=>{this.runDetectAnyChanges()})},p=>{if(null!=this.subscribers){const g=this.subscribers;this.subscribers=null,g.forEach(m=>{m(null,""+p)})}})):this.subscribers.push(f)})}autoRejectOnFail(l){return this.ks?l(this.ks):new Promise((h,d)=>{this.config.post(()=>{d("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}runDetectAnyChanges(){return this.detectedChanges(new ri(-1,"","",-1,!0,"")),this}runChangeDetector(l){return new Promise((h,d)=>{l.then(f=>{h(f),this.runDetectAnyChanges()},f=>{d(d),this.runDetectAnyChanges()})})}save(l,h,d){return this.autoRejectOnFail(f=>this.runChangeDetector(f.save(this.memkey,h,d)))}deleteAll(l){return this.autoRejectOnFail(h=>this.runChangeDetector(h.deleteAll(this.memkey)))}deletePersons(l){return this.autoRejectOnFail(h=>this.runChangeDetector(h.deletePersons(l,this.memkey)))}newPerson(l,h,d){return this.autoRejectOnFail(f=>this.runChangeDetector(f.newPerson(this.memkey,h,d)))}newPersons(l,h){return this.autoRejectOnFail(d=>this.runChangeDetector(d.newPersons(l,h)))}addTempFile(l,h){return this.autoRejectOnFail(d=>d.addTempFile(l,h))}filterPersonsAndPredefined(l,h=!0){let d=l.items,f=l;f.items=[];let p=new _1([]),g=!1;d.forEach(v=>{this.isValidPerson(v)?f.items.push(v):v._id<this.virtualIdBase&&(g=!0,this.removePredefinedTags(v)?(this.ks.save(this.memkey,v,!0),f.items.push(v)):p.items.push(v))}),g&&this.config.addAlert(Pr.of("\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.","OK",30));let m=this.memorialsSvc.getActivePredefinedMemorials();return this.activePredefinedMemorialTags=m.join(","),this.predefinedPersons.forEach((v,y)=>{m.forEach(_=>{_==y&&f.items.push(...v.clone().items)})}),p.items.length>0&&h&&this.deletePersons(p.items).then(v=>{this.config.addAlert(Pr.of(v.success?"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.":v.error,"OK",30))},v=>{this.config.addAlert(Pr.of(v,"OK",30))}),l}removePredefinedTags(l){let h=!1,d=l.tags;["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(m=>{let v=oa.removeTag(d,m);v!=d&&(h=!0,d=v)});let g=""!=oa.removeModificators(d);return g&&(l.tags=d),g}isValidPerson(l){let h=oa.removeModificators(l.tags),f=!1;return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(p=>{let g=oa.removeTag(h,p);g!=h&&(f=!0),h=g}),!f}setupPredefinedPersons(){this.predefinedPersons=new Map;let l=this.virtualIdBase,h=()=>++l,d="\u0430\u0432\u0442\u043e\u0440\u044b";this.predefinedPersons.set(d,new _1([new ri(h(),"\u0415\u0432\u0433\u0435\u043d\u0438\u044f","",-1,!0,d),new ri(h(),"\u0410\u043d\u0434\u0440\u0435\u044f","",-1,!0,d)])),d="hramvkostino",this.predefinedPersons.set(d,new _1([new ri(h(),"\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","",-1,!0,d),new ri(h(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,d),new ri(h(),"\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",-1,!0,d),new ri(h(),"\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f","",1,!0,d),new ri(h(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,d),new ri(h(),"\u0434\u0438\u0430\u043a. \u0413\u0435\u043e\u0440\u0433\u0438\u044f","",-1,!0,d),new ri(h(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",0,!0,d),new ri(h(),"\u0421\u0435\u0440\u0433\u0438\u044f","",2,!0,d),new ri(h(),"\u041c\u0430\u0440\u0438\u0438","",3,!0,d),new ri(h(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",4,!0,d),new ri(h(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",5,!0,d),new ri(h(),"\u0413\u0430\u043b\u0438\u043d\u044b","",6,!0,d),new ri(h(),"\u041f\u0430\u0432\u043b\u0430","",7,!0,d),new ri(h(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",8,!0,d),new ri(h(),"\u0415\u043b\u0435\u043d\u044b","",9,!0,d),new ri(h(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",10,!0,d),new ri(h(),"\u041b\u044e\u0431\u043e\u0432\u0438","",11,!0,d),new ri(h(),"\u041d\u0430\u0434\u0435\u0436\u0434\u044b","",12,!0,d),new ri(h(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",13,!0,d),new ri(h(),"\u041b\u044e\u0434\u043c\u0438\u043b\u044b","",14,!0,d),new ri(h(),"\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430","",15,!0,d),new ri(h(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",16,!0,d),new ri(h(),"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",17,!0,d),new ri(h(),"\u0410\u043d\u0434\u0440\u0435\u044f","",18,!0,d),new ri(h(),"\u041c\u0430\u0440\u0438\u043d\u044b","",19,!0,d),new ri(h(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",-1,!1,d),new ri(h(),"\u0412\u0438\u043a\u0442\u043e\u0440\u0430","",-1,!1,d),new ri(h(),"\u0424\u043e\u0442\u0438\u043d\u0438\u0438","",-1,!1,d)]))}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(mfe),Pe(lz),Pe(ln),Pe(C1))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),_fe=(()=>{class c{getRestPoint(l,h){const d=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return Mr.merge(Mr.merge(h||d,this.restPoint),l)}constructor(l,h){S(this,"http",void 0),S(this,"config",void 0),S(this,"bLoggedIn",!1),S(this,"restPoint","/participant"),this.http=l,this.config=h}isLoggedIn(){return new Promise((l,h)=>{this.config.post(()=>{l(rp.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((l,h)=>{this.config.post(()=>{l(rp.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((l,h)=>{this.config.post(()=>{l(rp.build().setResult(!0))})})}requestForUser(l,h){const d={params:{username:l,password:h}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/login",null),d).pipe(mr(qi.handleError)).subscribe({next:g=>f(g),error:g=>p(g)})})}logoutAll(){const l={params:{}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/logoutAll",null),l).pipe(mr(qi.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}requestVersion(){const l={params:{}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/version",null),l).pipe(mr(qi.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),Oh=(()=>{class c{constructor(l,h,d){S(this,"config",void 0),S(this,"authRest",void 0),S(this,"authMemory",void 0),S(this,"auth",null),this.config=l,this.authRest=h,this.authMemory=d,this.config.isMemoryServerType()&&(this.auth=d),(!this.auth||this.config.isRestServerType())&&(this.auth=h)}autoRejectOnFail(l){return this.auth?l(this.auth):new Promise((h,d)=>{this.config.post(()=>{d("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}isLoggedIn(){return this.autoRejectOnFail(l=>l.isLoggedIn())}login(){return this.autoRejectOnFail(l=>l.login())}logout(){return this.autoRejectOnFail(l=>l.logout())}requestForUser(l,h){return this.autoRejectOnFail(d=>d.requestForUser(l,h))}logoutAll(){return this.autoRejectOnFail(l=>l.logoutAll())}requestVersion(){return this.autoRejectOnFail(l=>l.requestVersion())}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ln),Pe(_fe),Pe(Vw))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class xg{constructor(a){S(this,"data",void 0),this.data=a}static builder(){return new xg(null)}setData(a){return this.data=a,this}}class Ci{constructor(a,l,h){S(this,"text",void 0),S(this,"onClick",void 0),S(this,"tag",void 0),this.text=a,this.onClick=l,this.tag=h}static builder(){return new Ci("",null,null)}setText(a){return this.text=a,this}setOnClick(a){return this.onClick=a,this}setTag(a){return this.tag=a,this}click(a){this.onClick&&this.onClick(a)}}let wg=(()=>{class c{get components(){return this.syncComponents(),this.aComponents}set components(l){this.aComponents=l}constructor(l,h,d){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"authSvc",void 0),S(this,"aComponents",[]),S(this,"menuLinksOld",null),S(this,"menuLinks",[]),S(this,"serviceReady",!1),this.config=l,this.uiConfig=h,this.authSvc=d}isComponentType(l,h){if(this.components.length<=0)return!1;let d=this.components[0].data instanceof l;return d&&null!=h?this.components[0].data.component?.data instanceof h:d}addMenuLink(l){return this.menuLinks.push(l),this}applyMenuAppRoutes(l=!1){let h=this.uiConfig.setAppRoutes(this.menuLinks);l||(this.menuLinksOld=h)}ngOnInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}ngOnDestroy(){this.menuLinksOld&&this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0)}ngAfterViewInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}syncComponents(){}doLogin(l){this.authSvc.isLoggedIn().then(h=>{h.result?(this.serviceReady=!1,l&&l(this.serviceReady)):this.authSvc.login().then(d=>{if(d.result){let f="hramvkostino",p="hramvkostino";this.authSvc.requestForUser(f,p).then(g=>{this.serviceReady=g.valid,this.config.authId=g.authId,this.config.authBody=btoa(f+":"+p),l&&l(this.serviceReady)})}})})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh))}),S(c,"\u0275cmp",Je({type:c,selectors:[["ng-component"]],decls:0,vars:0,template:function(l,h){},encapsulation:2})),c})();var gt=(()=>(function(c){c.NZ_KZ="NZ_KZ",c.NZ_KI="NZ_KI",c.NZ_KU="NZ_KU",c.NZ_KP="NZ_KP",c.VZ_KZ="VZ_KZ",c.VZ_KI="VZ_KI",c.VZ_KU="VZ_KU",c.VZ_KP="VZ_KP",c.SL_OV="SL_OV",c.SL_BL="SL_BL",c.SL_LG="SL_LG",c.SL_TF="SL_TF"}(gt||(gt={})),gt))();class cz{static builder(){return new cz}build(a,l,h,d,f,p,g,m){let v=hz.builder(),_=b=>{v.switchState(b,l,m,()=>{v.hideOrShowMainMenu(b,l,m,()=>{b.complementedByMenuName&&v.hideOrShowStateByType(b.complementedByMenuName,b.on,null,l,m,[b.complementedByMenuName]);let C=h();C&&C(b)})})};return new Ant(v,l,a,d,f,p,g,Math.PI,m).add(pt.builder().setText("\u041d\u043e\u0432\u044b\u0439 \u0417\u0430\u0432\u0435\u0442").setSize(Math.PI).setOnClick(_)).add(pt.builder().setText("\u0412\u0435\u0442\u0445\u0438\u0439 \u0417\u0430\u0432\u0435\u0442").setOnClick(_).setTypeName(vs.DOWN)).newLine().add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI).setComplementedByTypeName(gt.NZ_KZ).setOnClick(_)).add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(gt.VZ_KZ).setOnClick(_).setTypeName(vs.DOWN)).newLine().add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0430\u044f").setSize(Math.PI).setComplementedByTypeName(gt.NZ_KI).setOnClick(_)).add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435").setComplementedByTypeName(gt.VZ_KI).setOnClick(_).setTypeName(vs.DOWN)).newLine().add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI/2).setComplementedByTypeName(gt.NZ_KU).setOnClick(_)).add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0430\u044f").setComplementedByTypeName(gt.NZ_KP).setSize(Math.PI/2).setOnClick(_)).add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0438\u0435").setSize(Math.PI/2).setComplementedByTypeName(gt.VZ_KP).setOnClick(_).setTypeName(vs.DOWN)).add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(gt.VZ_KU).setOnClick(_).setTypeName(vs.DOWN)).newLine().setAlpha0(Math.PI/6*4).add(pt.builder().setText("   \u041e \u0432\u0435\u0440\u0435   ").setComplementedByTypeName(gt.SL_OV).setTypeName(vs.AROUND).setSize(Math.PI/6*2).setOnClick(_)).add(pt.builder().setText("\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0430\u044f \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u0430\u044f \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430").setTypeName(vs.AROUND).setSize(Math.PI/6*4).setDelayIndex(3).setComplementedByTypeName(gt.SL_BL).setOnClick(_)).add(pt.builder().setText("   \u042f\u0437\u044b\u043a   ").setTypeName(vs.AROUND).setSize(Math.PI/6*2).setDelayIndex(1).setOnClick(_)).add(pt.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u044f \u0424\u0435\u043e\u0444\u0438\u043b\u0430\u043a\u0442\u0430 \u0411\u043e\u043b\u0433\u0430\u0440\u0441\u043a\u043e\u0433\u043e").setTypeName(vs.AROUND).setDelayIndex(2).setComplementedByTypeName(gt.SL_TF).setOnClick(_)).newLine(!0,!0).setAlpha0(0).newLine().add(pt.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(gt.NZ_KZ)).newLine().add(pt.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.NZ_KZ)).add(pt.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.NZ_KZ)).newLine().add(pt.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.NZ_KZ)).add(pt.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.NZ_KZ)).newLine(!0,!0).newLine().newLine().setAlpha0(0).add(pt.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(_).setTypeName(gt.NZ_KI)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().add(pt.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(gt.NZ_KU)).newLine().add(pt.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(_).setTypeName(gt.NZ_KU)).newLine().add(pt.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(gt.NZ_KU)).newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(pt.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).newLine().setAlpha0(Math.PI/4*5).add(pt.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(_).setTypeName(gt.NZ_KU)).add(pt.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(_).setTypeName(gt.NZ_KU)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().newLine().newLine().add(pt.builder().setText("\u041e\u0442\u043a\u0440\u043e\u0432\u0435\u043d\u0438\u0435 \u0418\u043e\u0430\u043d\u043d\u0430 \u0411\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u0430").setOnClick(_).setTypeName(gt.NZ_KP)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).newLine().add(pt.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0411\u044b\u0442\u0438\u044f").setOnClick(_).setTypeName(gt.VZ_KZ)).newLine().add(pt.builder().setText("\u0418\u0441\u0445\u043e\u0434").setOnClick(_).setTypeName(gt.VZ_KZ)).add(pt.builder().setText("\u041b\u0435\u0432\u0438\u0442").setOnClick(_).setTypeName(gt.VZ_KZ)).newLine().add(pt.builder().setText("\u0427\u0438\u0441\u043b\u0430").setOnClick(_).setTypeName(gt.VZ_KZ)).add(pt.builder().setText("\u0412\u0442\u043e\u0440\u043e\u0437\u0430\u043a\u043e\u043d\u0438\u0435").setOnClick(_).setTypeName(gt.VZ_KZ)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(pt.builder().setText("\u0418\u0438\u0441\u0443\u0441\u0430 \u041d\u0430\u0432\u0438\u043d\u0430").setOnClick(_).setTypeName(gt.VZ_KI)).newLine().add(pt.builder().setText("\u0421\u0443\u0434\u0435\u0439 \u0418\u0437\u0440\u0430\u0438\u043b\u0435\u0432\u044b\u0445").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("\u0420\u0443\u0444\u0438").setOnClick(_).setTypeName(gt.VZ_KI)).newLine().add(pt.builder().setText("1 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("2 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("3 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("4 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(_).setTypeName(gt.VZ_KI)).newLine().add(pt.builder().setText("1 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("2 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("1 \u0415\u0437\u0434\u0440\u044b").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("\u041d\u0435\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KI)).newLine().setRadialSize(Math.PI).add(pt.builder().setText("2 \u0415\u0437\u0434\u0440\u044b").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("\u0422\u043e\u0432\u0438\u0442\u0430").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("\u0418\u0443\u0434\u0438\u0444\u0438").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("\u0415\u0441\u0444\u0438\u0440\u0438").setOnClick(_).setTypeName(gt.VZ_KI)).newLine(!0,!1,!1).setRadialSize(Math.PI).setAlpha0(0).add(pt.builder().setText("1 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("2 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(_).setTypeName(gt.VZ_KI)).add(pt.builder().setText("3 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(_).setTypeName(gt.VZ_KI)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(pt.builder().setText(" \u0418\u043e\u0432\u0430 ").setOnClick(_).setTypeName(gt.VZ_KU)).newLine().setAlpha0(Math.PI).setRadialSize(Math.PI).add(pt.builder().setText("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setOnClick(_).setTypeName(gt.VZ_KU)).add(pt.builder().setText("\u041f\u0440\u0438\u0442\u0447\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(_).setTypeName(gt.VZ_KU)).newLine().add(pt.builder().setText("\u042d\u043a\u043a\u043b\u0435\u0437\u0438\u0430\u0441\u0442").setOnClick(_).setTypeName(gt.VZ_KU)).add(pt.builder().setText("\u041f\u0435\u0441\u043d\u044c \u041f\u0435\u0441\u043d\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(_).setTypeName(gt.VZ_KU)).newLine().add(pt.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u0430").setOnClick(_).setTypeName(gt.VZ_KU)).add(pt.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0418\u0438\u0441\u0443\u0441\u0430").setOnClick(_).setTypeName(gt.VZ_KU)).newLine(!0,!0).setRadialSize(Math.PI).add(pt.builder().setText(" \u0418\u0441\u0430\u0438\u0438 ").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KP)).newLine().add(pt.builder().setText("\u041f\u043b\u0430\u0447 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u0435 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KP)).newLine().add(pt.builder().setText("\u0412\u0430\u0440\u0443\u0445\u0430").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0418\u0435\u0437\u0435\u043a\u0438\u043b\u044f").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0414\u0430\u043d\u0438\u0438\u043b\u0430").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u041e\u0441\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KP)).newLine().add(pt.builder().setText("\u0418\u043e\u0438\u043b\u044f").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0410\u043c\u043e\u0441\u0430").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0410\u0432\u0434\u0438\u044f").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0418\u043e\u043d\u044b").setOnClick(_).setTypeName(gt.VZ_KP)).newLine().setRadialSize(2*Math.PI).add(pt.builder().setText("\u041c\u0438\u0445\u0435\u044f").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u041d\u0430\u0443\u043c\u0430").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0410\u0432\u0432\u0430\u043a\u0443\u043c\u0430").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0421\u043e\u0444\u043e\u043d\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0410\u0433\u0433\u0435\u044f").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u0417\u0430\u0445\u0430\u0440\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("\u041c\u0430\u043b\u0430\u0445\u0438\u0438").setOnClick(_).setTypeName(gt.VZ_KP)).add(pt.builder().setText("3 \u0415\u0437\u0434\u0440\u044b").setOnClick(_).setTypeName(gt.VZ_KP)).newLine(!0,!0).setRadialSize(Math.PI).newLine().newLine().setRadialSize(2*Math.PI).add(pt.builder().setText("\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435 \u0421\u0438\u043c\u0432\u043e\u043b\u0430 \u0432\u0435\u0440\u044b").setOnClick(_).setTypeName(gt.SL_OV)).add(pt.builder().setText("\u0422\u043e\u0447\u043d\u043e\u0435 \u0438\u0437\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0432\u0435\u0440\u044b").setOnClick(_).setTypeName(gt.SL_OV)).newLine().add(pt.builder().setText("\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u0425\u0440\u0438\u0441\u0442\u0438\u0430\u043d\u0441\u043a\u0438\u0439 \u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441").setOnClick(_).setTypeName(gt.SL_OV)).add(pt.builder().setText("\u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441 \u0412\u043e\u0441\u0442\u043e\u0447\u043d\u043e\u0439 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0426\u0435\u0440\u043a\u0432\u0438").setOnClick(_).setTypeName(gt.SL_OV)).newLine().newLine(!0,!0).setRadialSize(2*Math.PI).add(pt.builder().setText("\u041c\u043e\u043b\u0438\u0442\u0432\u043e\u0441\u043b\u043e\u0432").setOnClick(_).setSize(Math.PI).setTypeName(gt.SL_BL)).add(pt.builder().setText("\u0427\u0430\u0441\u043e\u0441\u043b\u043e\u0432").setOnClick(_).setSize(Math.PI).setTypeName(gt.SL_BL)).newLine().setAlpha0(Math.PI).setRadialSize(2*Math.PI).add(pt.builder().setText("\u0411\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f").setOnClick(_).setTypeName(gt.SL_BL)).add(pt.builder().setText("\u041c\u0435\u0441\u044f\u0446\u0435\u0441\u043b\u043e\u0432").setOnClick(_).setTypeName(gt.SL_BL)).newLine().add(pt.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438, \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0438 \u0432\u0435\u043b\u0438\u0447\u0430\u043d\u0438\u044f \u043e\u0431\u0449\u0438\u0435").setOnClick(_).setTypeName(gt.SL_BL)).add(pt.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0434\u043d\u0435\u0432\u043d\u044b\u0435").setOnClick(_).setTypeName(gt.SL_BL)).newLine().add(pt.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u043d\u044b\u0435").setOnClick(_).setTypeName(gt.SL_BL)).add(pt.builder().setText("\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0414\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435").setOnClick(_).setTypeName(gt.SL_BL)).newLine().newLine().setAlpha0(0).setRadialSize(Math.PI).add(pt.builder().setText("\u0412\u0441\u0435\u043d\u043e\u0449\u043d\u043e\u0435 \u0431\u0434\u0435\u043d\u0438\u0435 \u0438 \u041b\u0438\u0442\u0443\u0440\u0433\u0438\u044f").setOnClick(_).setTypeName(gt.SL_BL)).newLine(!0,!0).setRadialSize(2*Math.PI).setAlpha0(Math.PI).add(pt.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(gt.SL_TF)).newLine().add(pt.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(_).setTypeName(gt.SL_TF)).newLine().add(pt.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(_).setTypeName(gt.SL_TF)).newLine().add(pt.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(_).setTypeName(gt.SL_TF)).newLine().newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(pt.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).newLine().setAlpha0(Math.PI/4*5).add(pt.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(_).setTypeName(gt.SL_TF)).add(pt.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(_).setTypeName(gt.SL_TF)).newLine(),v}}var Dh=(()=>(function(c){c[c.Default=0]="Default",c[c.Dark=1]="Dark",c[c.Light=2]="Light",c[c.Dark2=3]="Dark2",c[c.Light2=4]="Light2"}(Dh||(Dh={})),Dh))();class uz{constructor(a,l=[]){S(this,"back",void 0),S(this,"texts",void 0),S(this,"currentOn",!1),S(this,"on",!1),S(this,"forceOn",!1),S(this,"complementedByMenuName",""),S(this,"text",""),S(this,"typeName",""),this.back=a,this.texts=l}static builder(){return new uz(null)}setTypeName(a){return this.typeName=a,this}isToggledOn(){return this.on&&!this.forceOn}setBack(a){return this.back=a,this}addText(a){return this.text+=a.text,this.texts.push(a),this}setTexts(a){return this.texts=a,this}setOn(a){return this.on=a,this}setForceOn(a){return this.forceOn=a,this}setComplementedByMenuName(a){return this.complementedByMenuName=a,this}isVisible(){return!!this.back?.visible}setVisible(a,l,h=null){this.back.emulateCollapseTransitions().setVisible(a),this.back.apply(0,l,null,h),this.texts.forEach(d=>{d.emulateCollapseTransitions().setVisible(a),d.apply(0,l)})}setAndSwitchState(a,l,h,d=null,f="",p=""){this.on=a||this.forceOn,(a||this.back.visible)&&(this.back.emulateCollapseTransitions().setFillColor(a?f||l.colorMain:p||"#00000000"),this.back.setStrokeColor(a?f||l.colorMain:p||l.colorMain),this.back.apply(0,h,null,d),this.texts.forEach(g=>{g.emulateCollapseTransitions().setColor(a?f||l.colorBackground:p||l.colorMain).apply(0,h)}))}}var vs=(()=>(function(c){c.UP="UP",c.DOWN="DOWN",c.AROUND="AROUND"}(vs||(vs={})),vs))();class hz{constructor(){S(this,"menuName",""),S(this,"alternative",new Map)}static builder(){return new hz}getAlternative(a){let l=this.alternative.get(a);return null==l&&(l=[],this.alternative.set(a,l)),l}isPrimaryType(a){return a==vs.UP||a==vs.DOWN||a==vs.AROUND}get up(){return this.getAlternative(vs.UP)}get down(){return this.getAlternative(vs.DOWN)}get around(){return this.getAlternative(vs.AROUND)}findType(a){let l="";return null!=a&&this.alternative.forEach((h,d)=>{h.indexOf(a)>=0&&(l=d)}),l||this.menuName}switchState(a,l,h,d=null){if(a&&a.on&&a.forceOn)return;let f=this.findType(a),p=m=>{m.complementedByMenuName&&this.hideOrShowStateByType(m.complementedByMenuName,m.on,null,l,h,[m.complementedByMenuName])};a&&(a.on=a.forceOn?a.forceOn:!a.on,this.getAlternative(f).forEach(m=>{let v=!0;m!=a&&(v=m.on,m.on=m.forceOn),v&&p(m)}),this.isPrimaryType(f)||a.on?this.hideOrShowStateByType(f,!1,a,l,h,[f]):this.hideOrShowStateByType(f,!1,null,l,h,[f])),this.alternative.forEach((m,v)=>{((m,v)=>{m.forEach(y=>{if(y!=a||null==a){let _=y.on;y.on=y.forceOn,_&&y.complementedByMenuName&&p(y)}})})(m)}),a&&(this.menuName=f),d&&d()}hideOrShowMainMenu(a,l,h,d=null){let f=this.findType(a);return f&&!this.isPrimaryType(f)&&(this.getAlternative(f).filter(v=>v.isToggledOn()).length>0||this.hideOrShowStateByType(f,!1,null,l,h,[f])),this.hideOrShowStateByType(f,!((!a||a.on)&&a),a,l,h,[vs.UP,vs.DOWN,vs.AROUND],d)}hideOrShowStateByType(a,l,h,d,f,p=[],g=null){let m=!1,v=()=>m?null:(m=!0,g);p.forEach(_=>{((_,b)=>{let C=_.filter(x=>x.isToggledOn()).length>0;_.forEach(x=>{C||b||l?x.setVisible(!0,0,()=>{x.setAndSwitchState(x.on,d,f,x==h?v():null)}):x.setAndSwitchState(!1,d,f,x==h?v():()=>{x.setVisible(!1,0,v())},"#00000000","#00000000")})})(this.getAlternative(_),l&&a==_)}),!m&&g&&(m=!0,g())}addAlt(a,l){return this.getAlternative(a).push(l),this}addUp(a){return this.up.push(a),this}addDown(a){return this.down.push(a),this}addAround(a){return this.around.push(a),this}addText(a,l,h,d,f,p,g,m,v,y,_,b,C,x,w=null,O,D=!0){let T=G=>w??(G>=0&&G<=Math.PI),M=uz.builder().setTypeName(d),k=f,E=y-v,P=(y+v)/2,V=!0,I=l.textSizeDirect("_"+h+"_",m,300),U=(f+p)/2+(g+m/2)*(T(P)?1:-1),$=Math.abs(E)*U,H=m;I.width>$&&(H=Math.ceil($/I.width*H));let J=a.width/512*15/U;J*=E<0?-1:1;for(let G=0;G<=h.length;G++){k=f;let W=h.substring(G,G+1),X=(G+0)/(h.length-1)*(E-2*J)+v+J,Y=T(X);V=Y;let ne=_i.builder().setText(W).setTextAnchor("middle").setFontSize(`${H}px`).translate(a.width/2,a.height/2).translate(k*Math.cos(X),-k*Math.sin(X)).rotate(90-X/Math.PI*180+(Y?0:-180)).setColor("#00000000").addClass("cursor").setVisible(D).addEvent(Zi.builder().setName("click").setFunc(()=>{O&&O(M)}));k=p+g*(Y?1:-1),ne.addTransition(aE.builder().setData(ne.clone().setColor(a.colorMain).setTransforms([]).setVisible(D).translate(a.width/2,a.height/2).translate(k*Math.cos(X),-k*Math.sin(X)).rotate(90-X/Math.PI*180+(Y?0:-180))).setDelay(_).setDuration(b)),a.texts.push(ne),M.addText(ne)}k=f;let ee=k+(V?C:-C);return a.pathes.push((W=_,j=b,(G=ms.builder().setDatum([]).setD(sU().innerRadius(Math.min(k,ee)).outerRadius(Math.max(k,ee)).startAngle(-Math.min(v,y)+Math.PI/2).endAngle(-Math.max(v,y)+Math.PI/2)).setStrokeWidth(a.lineWidth).setStrokeColor("#00000000").setFillColor("#00000000").setVisible(D).translate(a.width/2,a.height/2).addClass("cursor").addEvent(Zi.builder().setName("click").setFunc(()=>{O&&O(M)}))).addTransition(aE.builder().setDelay(W).setDuration(j).setData(G.clone().setStrokeColor(a.colorMain).setVisible(D))),M.setBack(G),G)),M;var G,W,j}}class pt{constructor(a,l,h,d,f,p,g,m){S(this,"text",void 0),S(this,"size",void 0),S(this,"alpha0",void 0),S(this,"typeName",void 0),S(this,"complementedByTypeName",void 0),S(this,"delayIndex",void 0),S(this,"forceOn",void 0),S(this,"onClick",void 0),this.text=a,this.size=l,this.alpha0=h,this.typeName=d,this.complementedByTypeName=f,this.delayIndex=p,this.forceOn=g,this.onClick=m}static builder(){return new pt("",0,0,vs.UP,"",0,!1,null)}setText(a){return this.text=a,this}setSize(a){return this.size=a,this}setAlpha0(a){return this.alpha0=a,this}setTypeName(a){return this.typeName=a,this}setComplementedByTypeName(a){return this.complementedByTypeName=a,this}setDelayIndex(a){return this.delayIndex=a,this}setForceOn(a){return this.forceOn=a,this}setOnClick(a){return this.onClick=a,this}}class Ant{constructor(a,l,h,d,f,p,g,m,v){S(this,"menu",void 0),S(this,"d3Config",void 0),S(this,"d3Svc",void 0),S(this,"r",void 0),S(this,"dr",void 0),S(this,"textDr",void 0),S(this,"textHeight",void 0),S(this,"alpha0",void 0),S(this,"delta",void 0),S(this,"items",[]),S(this,"lineIndex",0),S(this,"currentR",0),S(this,"radialSize",2*Math.PI),this.menu=a,this.d3Config=l,this.d3Svc=h,this.r=d,this.dr=f,this.textDr=p,this.textHeight=g,this.alpha0=m,this.delta=v,this.currentR=this.r}newLine(a=!0,l=!1,h=!0){return a&&this.addLine(h),this.items=[],l&&(this.currentR=this.r),this}setAlpha0(a){return this.alpha0=a,this}setRadialSize(a){return this.radialSize=a,this}add(a){return this.items.push(a),this}addLine(a=!0){let l=this.radialSize;l-=this.items.filter(p=>p.size>0).map(p=>p.size).reduce((p,g)=>p+g,0);let d=l/this.items.filter(p=>p.size<=0).length,f=this.alpha0;return this.items.forEach(p=>{let g=p.size>0?p.size:d,m=f,v=m-g,y=Math.PI/180,_=Math.PI+y>=m&&v>=-y,b=_?this.currentR:this.currentR+this.dr;if(!_&&m>v){let w=m;m=v,v=w}let C=p.typeName==vs.UP||p.typeName==vs.DOWN||p.typeName==vs.AROUND,x=this.menu.addText(this.d3Config,this.d3Svc,p.text,p.typeName,b,b,this.textDr,this.textHeight,m,v,(C?1:0)*(this.lineIndex+p.delayIndex)*this.delta,2*this.delta,this.dr,this.d3Config.lineWidth,_,p.onClick,C).setComplementedByMenuName(p.complementedByTypeName).setForceOn(p.forceOn);this.menu.addAlt(p.typeName,x),f-=g}),a&&(this.currentR+=this.dr),++this.lineIndex,this}}class dz{constructor(a=null){S(this,"onSelect",void 0),this.onSelect=a}static builder(){return new dz}}class fz extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"menuState",void 0),this.menuState=d}static builder(){return new fz("",null,null,dz.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setOnSelect(a=null){return this.menuState.onSelect=a,this}}class Int{constructor(a=Dh.Default,l="\u0411\u0438\u0431\u043b\u0438\u044f",h=512,d=512,f=null,p=cz.builder()){S(this,"theme",void 0),S(this,"name",void 0),S(this,"width",void 0),S(this,"height",void 0),S(this,"data",void 0),S(this,"menuBuilder",void 0),this.theme=a,this.name=l,this.width=h,this.height=d,this.data=f,this.menuBuilder=p}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(a){switch(this.theme){case Dh.Dark:a.colorBackground="#0e161b",a.colorMain="white";break;case Dh.Light:a.colorBackground="#00364D",a.colorMain="white";break;case Dh.Dark2:a.colorBackground="white",a.colorMain="#0e161b";break;case Dh.Light2:a.colorBackground="white",a.colorMain="#00364D"}}getFontHeight(a){return Math.ceil(a.width/23)}generate(a,l,h){l.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!0,this.updateThemeConfig(l),l.rects=[a.createBackground(l)];let f=this.name,p=this.getFontHeight(l),g=Math.ceil(p/10*3),m=a.textSizeDirect(f.substring(0,1),p,300),v=m.height;l.circles=[];let _=50-m?.height;l.rects.push(...a.createCross(l,!1,l.width/2-_/2,l.height/2-_-m?.height/2,_,_));let w=()=>{D.switchState(null,l,O),D.hideOrShowMainMenu(null,l,O,null),this.data&&this.data.menuState&&this.data.menuState.onSelect&&this.data.menuState.onSelect(null)};l.texts.push(_i.builder().setText(f).setTextAnchor("middle").setFontSize(`${p}px`).translate(l.width/2,l.height/2+m.height/4).rotate(0).setColor(l.colorMain).addClass("cursor").addEvent(Zi.builder().setName("click").setFunc(w))),l.circles.push(mg.builder().translate(l.width/2,l.height/2).setR(50).setFillColor("#00000000").setStrokeColor(l.colorMain).addClass("cursor").addEvent(Zi.builder().setName("click").setFunc(w)));let O=400,D=this.menuBuilder.build(a,l,()=>this.data&&this.data.menuState&&this.data.menuState.onSelect?this.data.menuState.onSelect:null,50,v,g,p,O);var T=_i.builder().setText(this.name).setTextAnchor("middle").setFontSize(`${p}px`).translate(l.width/2,50).rotate(0).setColor("none");return l.texts.push(T),l.onItemSelected=M=>{T.d3Object&&T.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",l.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(M).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}const Pnt=["mySvg"],Rnt=function(c){return{"fade-in-3":!0,"print-only":c}};function Fnt(c,a){if(1&c&&(gc(),pe(0,"svg",9,10)),2&c){const l=q();L("ngClass",ds(1,Rnt,l.printOnly))}}const Og=function(c){return{centeredImage:!0,"fade-in-3":!0,"print-only":c}};function Lnt(c,a){if(1&c&&(gc(),pe(0,"svg",11,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}function Nnt(c,a){if(1&c&&(gc(),pe(0,"svg",11,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}function Bnt(c,a){if(1&c&&(gc(),pe(0,"svg",12,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}const Vnt=function(c){return{centeredImage:!1,"fade-in-3":!0,"print-only":c}};function Unt(c,a){if(1&c&&(gc(),pe(0,"svg",13,10)),2&c){const l=q();L("ngClass",ds(1,Vnt,l.printOnly))}}function znt(c,a){if(1&c&&(gc(),pe(0,"svg",14,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}function Hnt(c,a){if(1&c&&(gc(),pe(0,"svg",15,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}function $nt(c,a){if(1&c&&(gc(),pe(0,"svg",16,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}function Wnt(c,a){if(1&c&&(gc(),pe(0,"svg",17,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}function Gnt(c,a){if(1&c&&(gc(),pe(0,"svg",18,10)),2&c){const l=q();L("ngClass",ds(1,Og,l.printOnly))}}class ya{constructor(a,l,h,d){S(this,"generator",void 0),S(this,"onCreate",void 0),S(this,"onUpdate",void 0),S(this,"onSend",void 0),this.generator=a,this.onCreate=l,this.onUpdate=h,this.onSend=d}create(){this.onCreate&&this.onCreate(this)}update(){return!!this.onUpdate&&this.onUpdate(this)}send(){this.onSend&&this.onSend(this)}}class Ha{constructor(a="JsScheduler",l="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",h="/scenes/app.logo.scene.txt",d=null,f=210,p=297,g=0,m=null,v=0,y=1,_=1,b=!0,C=""){S(this,"genName",void 0),S(this,"logoText",void 0),S(this,"scene",void 0),S(this,"tag",void 0),S(this,"svgWidth",void 0),S(this,"svgHeight",void 0),S(this,"type",void 0),S(this,"generator",void 0),S(this,"startPageIndex",void 0),S(this,"horizontalPagesCount",void 0),S(this,"verticalPagesCount",void 0),S(this,"showFooter",void 0),S(this,"schedulerText",void 0),this.genName=a,this.logoText=l,this.scene=h,this.tag=d,this.svgWidth=f,this.svgHeight=p,this.type=g,this.generator=m,this.startPageIndex=v,this.horizontalPagesCount=y,this.verticalPagesCount=_,this.showFooter=b,this.schedulerText=C}static builder(){return new Ha}setGenName(a){return this.genName=a,this}setLogoText(a){return this.logoText=a,this}setScene(a){return this.scene=a,this}setTag(a){return this.tag=a,this}setSvgWidth(a){return this.svgWidth=a,this}setSvgHeight(a){return this.svgHeight=a,this}setType(a){return this.type=a,this}setGenerator(a){return this.generator=a,this}setStartPageIndex(a){return this.startPageIndex=a,this}setHorizontalPagesCount(a){return this.horizontalPagesCount=a,this}setVerticalPagesCount(a){return this.verticalPagesCount=a,this}setShowFooter(a){return this.showFooter=a,this}setSchedulerText(a){return this.schedulerText=a,this}clone(){return Ha.builder().setGenName(this.genName).setScene(this.scene).setTag(this.tag).setSvgWidth(this.svgWidth).setSvgHeight(this.svgHeight).setType(this.type).setGenerator(this.generator).setStartPageIndex(this.startPageIndex).setHorizontalPagesCount(this.horizontalPagesCount).setVerticalPagesCount(this.verticalPagesCount).setShowFooter(this.showFooter).setSchedulerText(this.schedulerText)}}let nc=(()=>{class c{get data(){return this.svgData}set data(l){this.svgData=l,this.config.post(()=>{this.recreate()})}set type(l){switch(this.svgData.type!=l&&this.config.post(()=>{this.recreate()}),this.svgData.setType(l),l){default:case 0:this.svgData.setSvgWidth(512).setSvgHeight(512);break;case 210297:case 10:this.svgData.setSvgWidth(210).setSvgHeight(297);break;case 297210:this.svgData.setSvgWidth(297).setSvgHeight(210)}}get type(){return this.svgData.type}get scene(){return this.data.scene}set scene(l){this.data.scene=l,this.updateSvgAction.requestAction(void 0)}get logoText(){return this.data.logoText}set logoText(l){this.data.logoText=l,this.changed()}set genName(l){this.data.genName=l}get genName(){return this.data.genName}get tag(){return this.data.tag}set tag(l){this.data.tag=l,this.generator&&this.changed()}get iStartPageIndex(){return this.svgData?this.svgData.startPageIndex:0}set iStartPageIndex(l){this.svgData&&(this.svgData.startPageIndex=l)}get iHorizontalPagesCount(){return this.svgData?this.svgData.horizontalPagesCount:1}set iHorizontalPagesCount(l){this.svgData&&(this.svgData.horizontalPagesCount=l)}get iVerticalPagesCount(){return this.svgData?this.svgData.verticalPagesCount:1}set iVerticalPagesCount(l){this.svgData&&(this.svgData.verticalPagesCount=l)}get startPageIndex(){return this.iStartPageIndex}set startPageIndex(l){this.iStartPageIndex=l,this.updateSvgAction.requestAction(void 0)}get horizontalPagesCount(){return this.iHorizontalPagesCount}set horizontalPagesCount(l){this.iHorizontalPagesCount=l,this.updateSvgAction.requestAction(void 0)}get verticalPagesCount(){return this.iVerticalPagesCount}set verticalPagesCount(l){this.iVerticalPagesCount=l,this.updateSvgAction.requestAction(void 0)}get showFooter(){return!this.svgData||this.svgData.showFooter}set showFooter(l){this.svgData.showFooter=l}set svgWidth(l){this.svgData.svgWidth=l}get svgWidth(){return this.svgData.svgWidth}set svgHeight(l){this.svgData.svgHeight=l}get svgHeight(){return this.svgData.svgHeight}get sSchedulerText(){return this.svgData?this.svgData.schedulerText:""}set sSchedulerText(l){this.svgData&&(this.svgData.schedulerText=l)}get schedulerText(){return this.sSchedulerText}set schedulerText(l){this.sSchedulerText!=l&&(this.sSchedulerText=l,this.changed())}constructor(l,h,d,f){S(this,"config",void 0),S(this,"d3Svc",void 0),S(this,"cacheService",void 0),S(this,"themesService",void 0),S(this,"name","\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),S(this,"mySvgRef",void 0),S(this,"svgImage",null),S(this,"generator",null),S(this,"allReady",!1),S(this,"svgData",Ha.builder()),S(this,"updateSvgAction",new See(p=>{this.changed()},100,(p,g)=>this.config.post(g,p))),S(this,"printOnly",!1),S(this,"pagesCount",new Mt),S(this,"svg",new Mt),S(this,"onCommand",new Mt),S(this,"onPreviewCommand",new Mt),this.config=l,this.d3Svc=h,this.cacheService=d,this.themesService=f}ngOnInit(){}get version(){return this.config.environment.version}resetVars(){this.iStartPageIndex=0,this.iHorizontalPagesCount=1,this.iVerticalPagesCount=1}newGenerator(){let l=h=>new ya(new Zde(h,this.svgWidth,this.svgHeight),()=>{let d=[];this.tag?d.push(...this.tag.commands.map(g=>({cmd:g,enabled:!0}))):this.config.environment.applications.forEach(p=>{d.push({cmd:Ua.builder().setName(p.name).setTag(p),enabled:p.applicationEnabled&&!p.applicationHidden})});let f=d.find(p=>p.cmd.tag?.id==this.config.defaultApplication);f||(f=d[0],f.cmd.tag&&f.cmd.tag.id&&(this.config.defaultApplication=f.cmd.tag.id)),this.generator?.generator.setCommands(d.filter(p=>p.enabled).map(p=>p.cmd),f?f.cmd:null).setOnCommandHandler(p=>{this.sendCommand(p.tag)}).setOnPreviewCommandHandler(p=>{this.sendPreviewCommand(p.tag)})},d=>{if(this.tag){let p=d.generator.setCommands(this.tag.commands).isGenerated();return d.generator.regenerate(),p}return!1},()=>{});return"Logo"==this.genName?new ya(new v1(this.themesService.nowIsDay()?xl.Light:xl.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight"==this.genName?new ya(new v1(xl.Light,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark"==this.genName?new ya(new v1(xl.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight2"==this.genName?new ya(new v1(xl.Light2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark2"==this.genName?new ya(new v1(xl.Dark2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Default"==this.genName?new ya(new Sl("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Texts"==this.genName?new ya(new zde("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Circles"==this.genName?new ya(new Hde("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Ellipses"==this.genName?new ya(new $de("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Rects"==this.genName?new ya(new Wde("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Graphics"==this.genName?new ya(new Gde("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Animation"==this.genName?new ya(new Qde("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"UIInteraction"==this.genName?new ya(new jde("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"BibleMenu"==this.genName?new ya(new Int(this.themesService.nowIsDay()?Dh.Light:Dh.Dark,"\u0411\u0438\u0431\u043b\u0438\u044f",this.svgWidth,this.svgHeight,this.tag),()=>{},()=>!1,()=>{}):"Menu"==this.genName?l(this.themesService.nowIsDay()?$o.Light:$o.Dark):"MenuDay"==this.genName?l($o.Light):"MenuDay2"==this.genName?l($o.Light2):"MenuNight"==this.genName?l($o.Dark):"MenuNight2"==this.genName?l($o.Dark2):"this"==this.genName&&this.svgData.generator?new ya(this.svgData.generator,()=>{},()=>!1,()=>{}):new ya(new UU(this.svgWidth,this.svgHeight),h=>{h.generator.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService,this.scene).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText)},h=>(h.generator.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText),!1),h=>{this.pagesCount.emit(h.generator.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446())})}ngAfterViewInit(){this.allReady=!0,this.recreate()}recreate(){this.allReady&&this.mySvgRef&&(this.generator=this.newGenerator(),this.generator.create(),this.svgImage=new DU(this.generator.generator.getWidth(),this.generator.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator.generator),this.svgImage.updateSvg(()=>{this.generator.update(),this.saveSvg(),this.generator?.send()}))}changed(){this.generator&&(this.generator.update()||this.svgImage.clear().updateSvg(()=>{this.generator?.send(),this.saveSvg()}))}saveSvg(){var l=this.mySvgRef.nativeElement,d=(new XMLSerializer).serializeToString(l);d.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(d=d.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),d.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(d=d.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),this.svg.emit(d='<?xml version="1.0" standalone="no"?>\r\n'+d)}sendCommand(l){this.onCommand.emit(l)}sendPreviewCommand(l){this.onPreviewCommand.emit(l)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(lE),z(Pd),z(bo))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-svg-js-image"]],viewQuery:function(l,h){if(1&l&&mi(Pnt,5),2&l){let d;jt(d=Zt())&&(h.mySvgRef=d.first)}},inputs:{data:"data",type:"type",printOnly:"printOnly",scene:"scene",logoText:"logoText",genName:"genName",tag:"tag",startPageIndex:"startPageIndex",horizontalPagesCount:"horizontalPagesCount",verticalPagesCount:"verticalPagesCount",showFooter:"showFooter",svgWidth:"svgWidth",svgHeight:"svgHeight",schedulerText:"schedulerText"},outputs:{pagesCount:"pagesCount",svg:"svg",onCommand:"onCommand",onPreviewCommand:"onPreviewCommand"},decls:10,vars:10,consts:[["width","100%","height","100%",3,"ngClass",4,"ngIf"],["width","2100","height","2970",3,"ngClass",4,"ngIf"],["width","2970","height","2000",3,"ngClass",4,"ngIf"],["width","114","height","114",3,"ngClass",4,"ngIf"],["width","5120","height","5120",3,"ngClass",4,"ngIf"],["width","5000","height","2000",3,"ngClass",4,"ngIf"],["width","4000","height","2000",3,"ngClass",4,"ngIf"],["width","3000","height","2000",3,"ngClass",4,"ngIf"],["width","5120","height","1280",3,"ngClass",4,"ngIf"],["width","100%","height","100%",3,"ngClass"],["mySvg",""],["width","2100","height","2970",3,"ngClass"],["width","2970","height","2000",3,"ngClass"],["width","114","height","114",3,"ngClass"],["width","5120","height","5120",3,"ngClass"],["width","5000","height","2000",3,"ngClass"],["width","4000","height","2000",3,"ngClass"],["width","3000","height","2000",3,"ngClass"],["width","5120","height","1280",3,"ngClass"]],template:function(l,h){1&l&&(K(0,Fnt,2,3,"svg",0),K(1,Lnt,2,3,"svg",1),K(2,Nnt,2,3,"svg",1),K(3,Bnt,2,3,"svg",2),K(4,Unt,2,3,"svg",3),K(5,znt,2,3,"svg",4),K(6,Hnt,2,3,"svg",5),K(7,$nt,2,3,"svg",6),K(8,Wnt,2,3,"svg",7),K(9,Gnt,2,3,"svg",8)),2&l&&(L("ngIf",0==h.type||10==h.type),F(1),L("ngIf",1==h.type),F(1),L("ngIf",210297==h.type),F(1),L("ngIf",297210==h.type),F(1),L("ngIf",114==h.type),F(1),L("ngIf",512==h.type),F(1),L("ngIf",500200==h.type),F(1),L("ngIf",400200==h.type),F(1),L("ngIf",300200==h.type),F(1),L("ngIf",512128==h.type))},dependencies:[di,Sn],styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]})),c})();const Qnt=["mySvg"];let bfe=(()=>{class c{get d3Config(){return this.cfgD3Config}set d3Config(l){this.cfgD3Config=l,this.svgImage&&this.setup(!0)}set generator(l){this.igen=l}get generator(){return this.igen}get width(){return this.svgImage&&this.iWidth!=this.svgImage.logoWidth&&this.updateSize(),this.iWidth}get height(){return this.svgImage&&this.iHeight!=this.svgImage.logoHeight&&this.updateSize(),this.iHeight}updateSize(){this.config.post(()=>{this.svgImage&&(this.iWidth=this.svgImage.logoWidth,this.iHeight=this.svgImage.logoHeight)})}constructor(l,h){S(this,"d3Svc",void 0),S(this,"config",void 0),S(this,"mySvgRef",void 0),S(this,"svgImage",null),S(this,"inited",!1),S(this,"igen",null),S(this,"cfgD3Config",null),S(this,"iWidth",512),S(this,"iHeight",512),this.d3Svc=l,this.config=h}setup(l=!1){this.inited&&!l||(this.generator&&(this.svgImage=new DU(this.generator.getWidth(),this.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator,null,this.d3Config),this.svgImage.updateSvg()),this.inited=!0)}ngOnInit(){}ngAfterViewInit(){this.setup()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(lE),z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-d3-svg"]],viewQuery:function(l,h){if(1&l&&mi(Qnt,5),2&l){let d;jt(d=Zt())&&(h.mySvgRef=d.first)}},inputs:{d3Config:"d3Config",generator:"generator"},decls:2,vars:2,consts:[[1,"centeredImage","fade-in-3"],["mySvg",""]],template:function(l,h){1&l&&(gc(),pe(0,"svg",0,1)),2&l&&ot("width",h.width)("height",h.height)},styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]})),c})();const jnt=["myCanvas"],Znt=["mySvgMulti"];function qnt(c,a){if(1&c&&pe(0,"app-d3-svg",7),2&c){const l=a.$implicit;L("generator",l.generator)("d3Config",l.d3Config)}}function Xnt(c,a){if(1&c){const l=ct();R(0,"div",8)(1,"app-svg-js-image",9),ie("svg",function(d){const p=Ee(l).$implicit;return Ae(q().onSaveSvg(p.genName,d))}),N()()}if(2&c){const l=a.$implicit;F(1),L("svgWidth",l.width)("svgHeight",l.height)("scene",l.scene)("genName",l.genName)}}class Lc{constructor(a,l,h,d){S(this,"width",void 0),S(this,"height",void 0),S(this,"scene",void 0),S(this,"genName",void 0),this.width=a,this.height=l,this.scene=h,this.genName=d}}class pz{constructor(a,l){S(this,"generator",void 0),S(this,"d3Config",void 0),this.generator=a,this.d3Config=l}static builder(){return new pz(null,null)}setGenerator(a){return this.generator=a,this}setD3Config(a){return this.d3Config=a,this}}let Ynt=(()=>{class c{constructor(l,h,d,f,p,g){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"d3Svc",void 0),S(this,"themeSvc",void 0),S(this,"cacheService",void 0),S(this,"ks",void 0),S(this,"myCanvasRef",void 0),S(this,"mySvgMultiRef",void 0),S(this,"generators",[]),S(this,"svgImage2",[]),S(this,"svgJsImages",[new Lc(512,512,"/scenes/cross.scene.txt","Logo"),new Lc(512,512,"/scenes/cross.scene.txt","LogoLight"),new Lc(512,512,"/scenes/cross.scene.txt","LogoLight2"),new Lc(512,512,"/scenes/cross.scene.txt","LogoDark"),new Lc(512,512,"/scenes/cross.scene.txt","LogoDark2"),new Lc(512,512,"/scenes/cross.scene.txt","Default"),new Lc(512,512,"/scenes/cross.scene.txt","Texts"),new Lc(512,512,"/scenes/cross.scene.txt","Circles"),new Lc(512,512,"/scenes/cross.scene.txt","Ellipses"),new Lc(512,512,"/scenes/cross.scene.txt","Rects"),new Lc(512,512,"/scenes/cross.scene.txt","Graphics"),new Lc(512,512,"/scenes/cross.scene.txt","Animation"),new Lc(512,512,"/scenes/cross.scene.txt","UIInteraction")]),S(this,"svgSaved",new Map),this.config=l,this.uiConfig=h,this.d3Svc=d,this.themeSvc=f,this.cacheService=p,this.ks=g}ngOnInit(){this.uiConfig.setAppRoutes(null)}addGenerator(l,h=null){return this.generators.push(pz.builder().setGenerator(l).setD3Config(h)),(l instanceof Xde||l instanceof UU)&&l.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService),this}ngAfterViewInit(){let f=this.themeSvc.nowIsDay()?"black":"white";this.addGenerator(new kE,N0.builder().setColorBackground("").setColorMain(f).setColorText(f).setColorLines(f).setLineWidth(1).addParam("\u0442\u0435\u043a\u0441\u0442","integral(x*sin(x),x);.")),this.addGenerator(new Sl),this.addGenerator(new zde),this.addGenerator(new Hde),this.addGenerator(new $de),this.addGenerator(new Wde),this.addGenerator(new Gde),this.addGenerator(new Qde),this.addGenerator(new jde),this.addGenerator(new v1);let p=this.generators[this.generators.length-1];p&&p.generator&&this.svgImage2.push(new DU(p.generator.getWidth(),p.generator.getHeight(),this.d3Svc,this.mySvgMultiRef,p.generator)),this.addGenerator((()=>(new cE).setTheme(this.themeSvc.nowIsDay()?Ks.Light3:Ks.Dark3))()),this.addGenerator((()=>{let g=new qde,m=[wl.builder().setName("\u0414\u0435\u043a\u0430\u0431\u0440\u044c").setIndex(0).setIWidth(7)];["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].forEach((_,b)=>{m.push(wl.builder().setName(_).setIndex(b+7).setIWidth(1))});for(let _=0;_<31;_++){let b=""+(_+1);m.push(wl.builder().setName(b).setIndex(_+16).setIWidth(1))}return g.setTheme(this.themeSvc.nowIsDay()?sa.Light3:sa.Dark3).setCommands(m).setOnCommandHandler(_=>{let b=["black","#d94a4a","#DFF0D0","#4aaed9"],C=_.tag;C||(C=b[0]);let x=b.indexOf(C);x=(x+1)%b.length,C=b[x],_.tag=C,_.rect.d3Object.transition().duration(1e3).style("fill",C),_.text.d3Object.transition().duration(1e3).style("fill","black"==C?"white":"black").style("stroke","black"==C?"white":"black").style("stroke-width",0)})})()),this.addGenerator(new Xde),this.addGenerator((new UU).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430","\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")),this.addGenerator((()=>(new Zde).setTheme(this.themeSvc.nowIsDay()?$o.Light2:$o.Dark2).setCommands(this.generators.map((g,m)=>Ua.builder().setName(g.generator.name).setTag(m))).setOnCommandHandler(g=>{let m=this.generators[g.tag];m&&m.generator&&this.svgImage2[0].setGenerator(m.generator).clear().updateSvg()}).setAutoClickOnChange(!0))()),this.svgImage2.forEach(g=>{g.updateSvg()})}downloadAllImages(){this.onSaveSvgDirect()}onSaveSvg(l,h){this.svgSaved.set(l,h)}onSaveSvgDirect(l=1){const h=new Pw;this.svgSaved.forEach((m,v)=>{h.file("page"+v+".svg",m)});let d='<html>\n<head>\n    <style type="text/css">\n    .centeredImage {\n      max-width: 100%;\n      max-height: 100%;\n      width: auto;\n      height: auto;\n    }\n</style>\n</head>\n<body>';this.svgSaved.forEach((m,v,y)=>{d+=`<div><img src="page${v}.svg" width="630" height="891" alt="page${v}" class="centeredImage"></div>`}),d+="</body></html>",h.file("pages.html",d);let f=new Date,p=(m,v)=>{let y=""+m;for(;y.length<v;)y="0"+y;return y},g=f.getFullYear()+"_"+p(f.getMonth()+1,2)+"_"+p(f.getDate(),2);h.generateAsync({type:"blob"}).then(m=>{const v=new Blob([m],{type:"octet/stream"}),y=`\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u044b.${g}.zip`;this.config.isPlatformAndroid()?this.ks.addTempFile(y,v).then(_=>{xh.startDownload(_.fileName,y)}):xh.saveData(v,y)})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(lE),z(bo),z(Pd),z(Sg))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-d3-examples"]],viewQuery:function(l,h){if(1&l&&(mi(jnt,5),mi(Znt,5)),2&l){let d;jt(d=Zt())&&(h.myCanvasRef=d.first),jt(d=Zt())&&(h.mySvgMultiRef=d.first)}},decls:11,vars:2,consts:[["id","load-font"],[3,"generator","d3Config",4,"ngFor","ngForOf"],["class","h512",4,"ngFor","ngForOf"],["width","512","height","512",1,"centeredImage","fade-in-3"],["mySvgMulti",""],[1,"no-print"],[1,"btn","btn-success","btn-block","ucs","center","top-space",3,"click"],[3,"generator","d3Config"],[1,"h512"],[3,"svgWidth","svgHeight","scene","genName","svg"]],template:function(l,h){1&l&&(R(0,"div")(1,"div",0),se(2,"\u0411\u043b\u0483\u0436\u0435\u0301\u043d\u044a \u043c\ua64b\u0301\u0436\u044a"),N(),K(3,qnt,1,2,"app-d3-svg",1),K(4,Xnt,2,4,"div",2),gc(),pe(5,"svg",3,4),function gj(){!function Bwe(){Mi.lFrame.currentNamespace=null}()}(),R(7,"div")(8,"div",5)(9,"button",6),ie("click",function(){return h.downloadAllImages()}),se(10,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),N()()()()),2&l&&(F(3),L("ngForOf",h.generators),F(1),L("ngForOf",h.svgJsImages))},dependencies:[vi,nc,bfe],styles:[".h512[_ngcontent-%COMP%]{height:512px;width:512px}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}.rxanimated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rxakf 3s linear infinite;stroke:#00f;fill:green;rx:1!important;width:50px!important}@keyframes _ngcontent-%COMP%_rxakf{0%{rx:100;ry:1}50%{rx:400;ry:4}to{rx:100;ry:1}}.ani[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_moveCircle 4s linear infinite}@keyframes _ngcontent-%COMP%_moveCircle{0%{rx:1}50%{rx:4}to{rx:1}}"]})),c})();class Knt{constructor(a,l){S(this,"zipService",void 0),S(this,"cacheService",void 0),this.zipService=a,this.cacheService=l}}class Dg{constructor(a,l){S(this,"action",void 0),S(this,"name",void 0),S(this,"from",null),S(this,"upto",null),S(this,"onStop",null),S(this,"config",null),this.action=a,this.name=l}static of(a,l){return new Dg(a,l)}start(a,l=null){this.config=l,this.onStop=a,this.from=new Date}stop(){this.upto=new Date}getTime(){return this.upto.getTime()-this.from.getTime()}str(a,l){for(;a.length<l;)a="0"+a;return a}getTimeString(){let a=this.upto.getTime()-this.from.getTime(),l=Math.floor(a/1e3),h=Math.floor(l/60),d=Math.floor(h/60);return a-=1e3*l,l-=60*h,h-=60*d,this.str(""+d,2)+":"+this.str(""+h,2)+":"+this.str(""+l,2)+"."+this.str(""+a,3)+" \u043e\u0442 "+this.from.toISOString()}toString(){return this.getTimeString()}stopAndGetResult(a){return this.stop(),FE.of(this.name,a,this.getTimeString())}sendAndGetResult(a){return this.onStop(a,this)}delay(a,l){return setTimeout(()=>{a&&a()},l),FE.of("","","")}}class FE{constructor(a,l,h){S(this,"name",void 0),S(this,"error",void 0),S(this,"info",void 0),this.name=a,this.error=l,this.info=h}static of(a,l,h){return new FE(a,l,h)}}var Tu=(()=>(function(c){c[c.UnOp=0]="UnOp",c[c.BinOp=1]="BinOp"}(Tu||(Tu={})),Tu))();class Cfe{constructor(a){S(this,"type",void 0),this.type=a}getType(){return this.type}}class Uw extends Cfe{constructor(a,l){super(Tu.UnOp),S(this,"op",void 0),S(this,"exp",void 0),this.op=a,this.exp=l}static builder(){return new Uw("",null)}setExp(a){return this.exp=a,this}setOp(a){return this.op=a,this}done(){return this}clone(){return Uw.builder().setExp(this.exp?"object"==typeof this.exp?Array.isArray(this.exp)?this.exp.map(a=>a.clone()):this.exp.clone():this.exp:null).setOp(this.op)}}class LE extends Cfe{constructor(a,l,h){super(Tu.BinOp),S(this,"left",void 0),S(this,"op",void 0),S(this,"right",void 0),this.left=a,this.op=l,this.right=h}static builder(){return new LE(null,"",null)}setLeft(a){return this.left=a,this}setRight(a){return this.right=a,this}setOp(a){return this.op=a,this}clone(){return LE.builder().setOp(this.op).setLeft(this.left?"object"==typeof this.left?this.left.clone():this.left:null).setRight(null==this.right?null:Array.isArray(this.right)?this.right.map(a=>a.clone()):this.right.clone())}done(){return this}}class Sfe{\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(a){for(var l={BinOpBuilder:()=>LE.builder(),UnOpBuilder:()=>Uw.builder()},h=null;null==h;)try{return universalParserStatic.parse(a,{builder:l})}catch(d){h=d}throw h}}var S1=(()=>(function(c){c[c.Instruction=0]="Instruction",c[c.Array=1]="Array"}(S1||(S1={})),S1))();class xfe{constructor(a){S(this,"type",void 0),this.type=a}}class gz extends xfe{constructor(a,l,h){super(S1.Instruction),S(this,"instruction",void 0),S(this,"index",void 0),S(this,"tag",void 0),this.instruction=a,this.index=l,this.tag=h}static builder(){return new gz(Uw.builder(),0,null)}setInstruction(a){return this.instruction=a,this}setIndex(a){return this.index=a,this}}class mz extends xfe{constructor(a,l){super(S1.Array),S(this,"array",void 0),S(this,"index",void 0),this.array=a,this.index=l}static builder(){return new mz([],0)}setArray(a){return this.array=a,this}setIndex(a){return this.index=a,this}}class sp{constructor(){S(this,"steps",[])}pushStep(a){return this.steps.push(a),this}run(a,l){return l.index>=this.steps.length?a.popCommandStack():((0,this.steps[l.index])(a,l),this)}}class x1 extends sp{constructor(a){super(),S(this,"op",void 0),this.op=a,this.pushStep((l,h)=>{var d=h.instruction;d.right?l.pushCommandStack(d.right):h.index=99,++h.index}),this.pushStep((l,h)=>{var d=h.instruction;if(d.left&&d.left.type==Tu.UnOp){var f=d.left,p=this.op(l.scope[f.exp],l.lastResult);l.scope[f.exp]=p,l.setLastResult(p)}++h.index})}}class Jnt extends sp{constructor(){super(),this.pushStep((a,l)=>{a.setLastResult(l.instruction.exp),++l.index})}}class eit extends sp{constructor(){super(),this.pushStep((a,l)=>{var h=l.instruction;if(h.exp&&h.type==Tu.UnOp){var d=h.exp;"string"==typeof d.exp&&a.setLastResult(a.scope[d.exp])}++l.index})}}class tit extends sp{constructor(){super(),this.pushStep((a,l)=>{l.tag={i:0,clazz:{}},++l.index}),this.pushStep((a,l)=>{var h=l.instruction;if(Array.isArray(h.exp)){var d=h.exp;l.tag.i<d.length&&a.pushCommandStack(d[l.tag.i])}++l.index}),this.pushStep((a,l)=>{var h=l.instruction;Array.isArray(h.exp)&&(l.tag.i>=h.exp.length?(a.setLastResult(l.tag.clazz),++l.index):(l.tag.i++,--l.index))})}}class zw extends sp{constructor(a){super(),S(this,"op",void 0),this.op=a,this.pushStep((l,h)=>{var d=h.instruction;d.left&&l.pushCommandStack(d.left),++h.index}),this.pushStep((l,h)=>{var d=h.instruction;l.pushVariablesScope({left:l.lastResult}),d.right&&l.pushCommandStack(d.right),++h.index}),this.pushStep((l,h)=>{var f=l.lastResult,p=l.scope.left;l.popVariablesScope(),l.setLastResult(this.op(p,f)),++h.index})}}class nit extends sp{constructor(a){super(),S(this,"op",void 0),this.op=a,this.pushStep((l,h)=>{var d=h.instruction;d.exp&&"object"==typeof d.exp&&l.pushCommandStack(d.exp),++h.index}),this.pushStep((l,h)=>{var f=this.op(l.lastResult);l.setLastResult(f);var p=h.instruction;if(p.exp&&p.type==Tu.UnOp){var g=p.exp;"string"==typeof g.exp&&(l.scope[g.exp]=f)}++h.index})}}class iit extends sp{constructor(a){super(),S(this,"op",void 0),this.op=a,this.pushStep((l,h)=>{var d=h.instruction;d.exp&&"object"==typeof d.exp&&l.pushCommandStack(d.exp),++h.index}),this.pushStep((l,h)=>{var d=l.lastResult,f=this.op(d);l.setLastResult(d);var p=h.instruction;if(p.exp&&p.type==Tu.UnOp){var g=p.exp;"string"==typeof g.exp&&(l.scope[g.exp]=f)}++h.index})}}class rit extends sp{constructor(){super(),this.pushStep((a,l)=>{var h=l.instruction;h.left&&a.pushCommandStack(h.left),++l.index}),this.pushStep((a,l)=>{var h=a.lastResult,d=h;a.setLastResult(h);var f=l.instruction;if(f.exp&&f.type==Tu.UnOp){var p=f.exp;"string"==typeof p.exp&&(a.scope[p.exp]=d)}++l.index})}}class sit extends sp{constructor(){super(),this.pushStep((a,l)=>{var h=l.instruction;h.left&&a.pushCommandStack(h.left),++l.index}),this.pushStep((a,l)=>{var h=a.lastResult,d=h;a.setLastResult(h);var f=l.instruction;if(f.exp&&f.type==Tu.UnOp){var p=f.exp;"string"==typeof p.exp&&(a.scope[p.exp]=d)}++l.index})}}class oit{get scope(){return this.variableScopes[this.variableScopes.length-1]}constructor(){S(this,"variableScopes",[]),S(this,"commandStack",[]),S(this,"lastResult",null),S(this,"operations",new Map),this.operations.set("=",new x1((a,l)=>l)),this.operations.set("+=",new x1((a,l)=>a+l)),this.operations.set("-=",new x1((a,l)=>a-l)),this.operations.set("*=",new x1((a,l)=>a*l)),this.operations.set("/=",new x1((a,l)=>a/l)),this.operations.set("%=",new x1((a,l)=>a%l)),this.operations.set("number",new Jnt),this.operations.set("id",new eit),this.operations.set("\u043a\u043b\u0430\u0441\u0441",new tit),this.operations.set("\u0444\u0443\u043d\u043a\u0446\u0438\u044f",new rit),this.operations.set("+",new zw((a,l)=>a+l)),this.operations.set("-",new zw((a,l)=>a-l)),this.operations.set("*",new zw((a,l)=>a*l)),this.operations.set("/",new zw((a,l)=>a/l)),this.operations.set("%",new zw((a,l)=>a%l)),this.operations.set("++i",new nit(a=>++a)),this.operations.set("i++",new iit(a=>++a)),this.operations.set("(.)",new sit)}setLastResult(a){return this.lastResult=a,this}run(a){var h=(new Sfe).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(a);return this.pushCommandStack(h).pushVariablesScope({}).runAllSteps()}pushVariablesScope(a){return this.variableScopes.push(a),this}popVariablesScope(){return this.variableScopes.pop(),this}pushCommandStack(a){return this.commandStack.push(Array.isArray(a)?mz.builder().setArray(a):gz.builder().setInstruction(a)),this}popCommandStack(){return this.commandStack.pop(),this}runAllSteps(){for(;this.commandStack.length>0;)this.step();return this.lastResult}step(){if(0!=this.commandStack.length){var a=this.commandStack[this.commandStack.length-1];a.type==S1.Instruction?this.stepInstruction(a):this.stepArray(a)}}stepInstruction(a){var l,h=this.operations.get(l=a.instruction.op);if(null==h)throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f: ${l}`);return h.run(this,a),this}stepArray(a){if(a.index>=a.array.length)return this.popCommandStack();var l=a.array[a.index++];return this.pushCommandStack(l),this}}class Ol{constructor(a,l,h){S(this,"description",void 0),S(this,"source",void 0),S(this,"result",void 0),this.description=a,this.source=l,this.result=h}static builder(){return new Ol("","",null)}setDescription(a){return this.description=a,this}setSource(a){return this.source=a,this}setResult(a){return this.result=a,this}}class NE{static testProps(){return[Ol.builder().setDescription("set: =.").setSource("a = 10;").setResult(10),Ol.builder().setDescription("add: +.").setSource("a = 9+1;").setResult(10),Ol.builder().setDescription("sub: -.").setSource("a = 9-1;").setResult(8),Ol.builder().setDescription("mul: *.").setSource("a = 9*2;").setResult(18),Ol.builder().setDescription("div: /.").setSource("a = 10/2;").setResult(5),Ol.builder().setDescription("mod: %.").setSource("a = 3%2;").setResult(1),Ol.builder().setDescription("addSet: +=.").setSource("a = 10; a += 2;").setResult(12),Ol.builder().setDescription("subSet: -=.").setSource("a = 10; a -= 2;").setResult(8),Ol.builder().setDescription("mulSet: *=.").setSource("a = 10; a *= 2;").setResult(20),Ol.builder().setDescription("divSet: /=.").setSource("a = 10; a /= 2;").setResult(5),Ol.builder().setDescription("modSet: %=.").setSource("a = 11; a %= 3;").setResult(2),Ol.builder().setDescription("++i: ++.").setSource("a = 11; ++a;").setResult(12),Ol.builder().setDescription("i++: ++.").setSource("a = 11; a++;").setResult(11)]}static tests(){return[Dg.of(NE.\u043f\u0435\u0440\u0432\u044b\u0439\u0422\u0435\u0441\u0442,"\u0442\u0435\u0441\u0442 \u043a\u043e\u043c\u043f\u0430\u043a\u0442\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430."),Dg.of(NE.\u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0442\u043e\u0440\u0430\u0422\u0435\u0441\u0442,"\u0442\u0435\u0441\u0442 js-interpreter.")]}static createTestFor(a){return l=>{let h="",f=(new oit).run(a.source);return f!=a.result&&(h=`\u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: ${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c: ${a.result}`),l.sendAndGetResult(h)}}static \u043f\u0435\u0440\u0432\u044b\u0439\u0422\u0435\u0441\u0442(a){return(new Sfe).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("a = 10;\n    if (a == 10) {\n     \u0441\u0438\u0441\u0442\u0435\u043c\u0430.\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0430 == ' + \u0430);\n    }\n    "),((m,v)=>m+v+"test").toString(),a.sendAndGetResult("")}static \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0442\u043e\u0440\u0430\u0422\u0435\u0441\u0442(a){let l="";var f=new Interpreter("\n    var f = function(a,b) {return a+b;};\n    showFunc(f);\n    var a = 1;\n    var b = 2;\n    initFunctions();\n    //a + b;\n    add(2,1);\n    ",function(g,m){g.setProperty(m,"url",String(location)),g.setProperty(m,"showFunc",g.createNativeFunction(function(b){var C=""+JSON.stringify(b.node,null,2);return console.log(C),C})),g.setProperty(m,"initFunctions",g.createNativeFunction(function(){var b=g.parse_("function add(c,d){return c+d;}"),C=g.createFunction(b.body[0],g.globalScope,"anonymous");return g.setProperty(m,C.properties.name,C),C}))});f.run();var p=f.value;return 3!=p&&(l+=`\u041f\u043e\u043b\u0443\u0447\u0435\u043d \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: ${p}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c: 3.`),a.sendAndGetResult(l)}}class w1{constructor(a,l){S(this,"fileName",void 0),S(this,"content",void 0),this.fileName=a,this.content=l}static builder(){return new w1("","")}setFileName(a){return this.fileName=a,this}setContent(a){return this.content=a,this}}let O1=(()=>{class c{zip(l){return new Promise((h,d)=>{const f=new Pw;l.forEach(p=>{p.content&&f.file(p.fileName,p.content)}),f.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}).then(p=>{p.arrayBuffer().then(g=>{h(g)})})})}unzip(l,h,d,f){(new Pw).loadAsync(l,h).then(function(g){let m=Object.keys(g.files);m.forEach(function(v,y){d(v,g,y,m)})},f)}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();function ait(c,a){1&c&&pe(0,"clr-icon",7)}function lit(c,a){1&c&&pe(0,"clr-icon",8)}const wfe=function(c,a){return{"bg-4":c,"bg-6":a}};function cit(c,a){if(1&c&&(R(0,"div")(1,"span",3),K(2,ait,1,0,"clr-icon",4),K(3,lit,1,0,"clr-icon",5),N(),R(4,"span",6),se(5),N(),R(6,"span"),se(7),N(),R(8,"span",3),se(9),N(),R(10,"span"),se(11),N()()),2&c){const l=a.$implicit,h=a.index;F(1),L("ngClass",Wr(8,wfe,!l.error,!!l.error)),F(1),L("ngIf",!!l.error),F(1),L("ngIf",!l.error),F(2),gi(" ",h+1," "),F(2),gi("",l.name,": "),F(1),L("ngClass",Wr(11,wfe,!l.error,!!l.error)),F(1),Ht(l.error?l.error:"\u0443\u0441\u043f\u0435\u0448\u043d\u043e"),F(2),gi(" (",l.info,")")}}function uit(c,a){1&c&&(R(0,"div"),pe(1,"clr-icon",8),se(2," \u0412\u0441\u0435 \u0442\u0435\u0441\u0442\u044b \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u044b. "),N())}function hit(c,a){1&c&&(R(0,"div")(1,"span",9),se(2," \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u044e... "),N()())}let dit=(()=>{class c{static tests(){return[Dg.of(c.firstTest,"\u041f\u0435\u0440\u0432\u044b\u0439 \u0442\u0435\u0441\u0442"),Dg.of(c.secondTest,"\u0412\u0442\u043e\u0440\u043e\u0439 \u0442\u0435\u0441\u0442"),Dg.of(c.thirdTest,"\u0422\u0440\u0435\u0442\u0438\u0439 \u0442\u0435\u0441\u0442"),Dg.of(c.forthTest,"\u0427\u0435\u0442\u0432\u0451\u0440\u0442\u044b\u0439 \u0442\u0435\u0441\u0442")]}static firstTest(l){return l.sendAndGetResult("")}static secondTest(l){return l.sendAndGetResult("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static thirdTest(l){throw new Error("\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0442\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static forthTest(l){return l.delay(()=>l.sendAndGetResult(""),1200)}constructor(l,h,d){var p;S(this,"config",void 0),S(this,"zipService",void 0),S(this,"cacheService",void 0),S(this,"testResults",[]),S(this,"tests",[]),S(this,"testConfig",null),this.config=l,this.zipService=h,this.cacheService=d,this.tests.push(...(p=NE.tests(),"CompactVmTests::",p.map(v=>(v.name="CompactVmTests::"+v.name,v)))),this.testConfig=new Knt(this.zipService,this.cacheService)}ngOnInit(){}runTests(){this.testResults=[];let l=0,h=()=>{if(l>=this.tests.length)return;let d=null,f=null;try{f=this.tests[l++],f.start((p,g)=>{let m=g.stopAndGetResult(p);return m&&this.testResults.push(m),this.config.post(h,1),m},this.testConfig),d=f.action(f),d||(d=f.sendAndGetResult("\u041d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430."))}catch(p){d=f.sendAndGetResult(""+p)}};this.config.post(h,1)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(O1),z(Pd))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-tests"]],decls:6,vars:3,consts:[[1,"btn","btn-primary","btn-block",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],["shape","times",4,"ngIf"],["shape","check",4,"ngIf"],[1,"red"],["shape","times"],["shape","check"],[1,"spinner","spinner-inline"]],template:function(l,h){1&l&&(R(0,"div")(1,"button",0),ie("click",function(){return h.runTests()}),se(2,"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0442\u0435\u0441\u0442\u044b"),N(),K(3,cit,12,14,"div",1),K(4,uit,3,0,"div",2),K(5,hit,3,0,"div",2),N()),2&l&&(F(3),L("ngForOf",h.testResults),F(1),L("ngIf",h.testResults.length==h.tests.length),F(1),L("ngIf",h.testResults.length!=h.tests.length&&h.testResults.length>0))},dependencies:[di,vi,Sn,so],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();function fit(c,a){if(1&c&&(R(0,"div",7),pe(1,"app-svg-js-image",8),N()),2&c){const l=a.$implicit,h=q();F(1),L("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h.logText)("type",1)("startPageIndex",l)("horizontalPagesCount",h.horizontalPagesCount)("verticalPagesCount",h.verticalPagesCount)}}let pit=(()=>{class c{constructor(l){S(this,"router",void 0),S(this,"logText",["*\u041c\u043e\u043b\u0435\u0431\u0435\u043d","*\u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438"].join(", ")),S(this,"extraPages",[]),S(this,"horizontalPagesCount",2),S(this,"verticalPagesCount",2),this.router=l}ngOnInit(){}onPagesCount(l){this.extraPages=[];let h=this.horizontalPagesCount*this.verticalPagesCount,d=l-h,f=0;for(;d>0;)d=Math.max(0,d-h),f+=h,this.extraPages.push(f)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(js))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-memorial-pages-editor"]],decls:9,vars:11,consts:[[1,"no-print"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"memorialsText",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"form",1)(2,"div",2)(3,"textarea",3),ie("ngModelChange",function(f){return h.logText=f}),N()(),R(4,"span",4),se(5,"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),N()()(),R(6,"div")(7,"app-svg-js-image",5),ie("pagesCount",function(f){return h.onPagesCount(f)}),N()(),K(8,fit,2,9,"div",6)),2&l&&(F(3),L("ngModel",h.logText),F(4),L("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",h.horizontalPagesCount)("verticalPagesCount",h.verticalPagesCount),F(1),L("ngForOf",h.extraPages))},dependencies:[vi,pB,jy,Cc,Pa,Wy,Vm,ma,kf,nc],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}.memorialsText[_ngcontent-%COMP%]{width:97vw;height:10em}"]})),c})();class ku{constructor(a=null){S(this,"curValue",void 0),this.curValue=a}getCurValue(a){return this.isChanged()&&(this.curValue=a()),this.curValue}isChanged(){return null==this.curValue}markChanged(){this.curValue=null}}class _a extends ku{constructor(a=null){super(),S(this,"rememberValue",void 0),this.rememberValue=a}static builder(){return new _a}checkAndGetValue(a){let l=[];for(let h in a)l.push(h,a[h]);return this.checkChanged(...l),this.getCurValue(()=>a)}checkChanged(...a){let l=!1;if(null!=this.rememberValue&&null!=a&&this.rememberValue.length==a.length){l=!0;for(let h=0;h<this.rememberValue.length;h++)if(this.rememberValue[h]!==a[h]){l=!1;break}}return l||(this.rememberValue=a,this.markChanged()),this}}class Wn{constructor(a,l){S(this,"component",void 0),S(this,"data",void 0),S(this,"detector",_a.builder()),this.component=a,this.data=l}}class Tg extends Ci{constructor(a,l,h,d,f=!1){super(a,l,h),S(this,"menuState",void 0),S(this,"whiteBack",void 0),this.menuState=d,this.whiteBack=f}static builder(){return new Tg("",null,null,vg.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setWhiteBack(a){return this.whiteBack=a,this}setMenuState(a){return this.menuState=a,this}addCommand(a){return this.menuState.addCommand(a),this}}const git=function(c){return{whiteBG:c}};let BE=(()=>{class c{get menuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getMenuState(){return this.menuData.menuState}onCommand(l){this.data.onClick&&this.data.onClick(l)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-menu"]],inputs:{data:"data"},decls:2,vars:8,consts:[[3,"ngClass"],[3,"genName","tag","svgWidth","svgHeight","printOnly","onCommand"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"app-svg-js-image",1),ie("onCommand",function(f){return h.onCommand(f)}),N()()),2&l&&(L("ngClass",ds(6,git,h.menuData.whiteBack)),F(1),L("genName",h.getMenuState().genName)("tag",h.getMenuState())("svgWidth",512)("svgHeight",64)("printOnly",h.getMenuState().printOnly))},dependencies:[di,nc],styles:[".whiteBG[_ngcontent-%COMP%]{background-color:#fff!important}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})(),Ofe=(()=>{class c extends wg{get bibleMenuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h,d){super(l,h,d),S(this,"data",null),S(this,"myBibleMenuData",fz.builder().setOnSelect(f=>{this.onBibleSelect(f)})),S(this,"menuData",Tg.builder().addCommand(Ua.builder().setName("\u0411\u0438\u0431\u043b\u0438\u044f")).setOnClick(f=>{f&&this.onMenuClick(f.text)})),this.addMenuLink(ai.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setIsActive(()=>!0)),this.addMenuLink(ai.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.onMenuClick("")}).setIsActive(()=>!1)),this.addMenuLink(ai.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.onMenuClick("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")}).setIsActive(()=>!1)),this.addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.onMenuClick("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}onMenuClick(l){this.data&&this.data.onClick&&this.data.onClick(l)}onBibleSelect(l){let h=l&&l.on?l.text:"\u0411\u0438\u0431\u043b\u0438\u044f",d=l&&l.on?l.typeName:"CENTER",f=h+(d?" "+d:"");this.menuData=Tg.builder().addCommand(Ua.builder().setName(h).setTag(f)).setOnClick(p=>{this.onMenuClick(p)})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-bible-menu"]],inputs:{data:"data"},features:[vn],decls:5,vars:5,consts:[[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"genName","svgWidth","svgHeight","tag"],[1,"login-footer"],[1,"gapTitle",3,"data"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"div",1),pe(2,"app-svg-js-image",2),N(),R(3,"div",3),pe(4,"app-dynamic-menu",4),N()()),2&l&&(F(2),L("genName","BibleMenu")("svgWidth",512)("svgHeight",512)("tag",h.myBibleMenuData),F(2),L("data",h.menuData))},dependencies:[nc,BE],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{inset:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:calc(100vh - 60px)}.h80[_ngcontent-%COMP%]{height:calc(78vh - 60px);width:78vh}"]})),c})();class vz extends ku{constructor(){super()}static builder(){return new vz}}class Hw extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"menuState",void 0),this.menuState=d}static builder(){return new Hw("",null,null,vz.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}class VE{constructor(a,l){S(this,"workerId",void 0),S(this,"message",void 0),this.workerId=a,this.message=l}static builder(){return new VE(-1,null)}setWorkerId(a){return this.workerId=a,this}setMessage(a){return this.message=a,this}}let Dfe=(()=>{class c{constructor(l){S(this,"type",void 0),S(this,"id",0),S(this,"callbackId",-1),this.type=l,this.id=c.newId()}static newId(){return c.staticId++}setCallbackId(l){return this.callbackId=l,this}}return S(c,"staticId",0),c})(),mit=(()=>{class c extends Dfe{constructor(l){super(c.TYPE),S(this,"pageLoadedFrom",void 0),this.pageLoadedFrom=l}static builder(){return new c("")}setPageLoadedFrom(l){return this.pageLoadedFrom=l,this}}return S(c,"TYPE","SetupWorkerRequest"),c})(),Rd=null;class $a{static nextWorkerId(){return $a.iNextWorkerId++}constructor(){S(this,"handler",null),S(this,"workerId",$a.nextWorkerId())}static builder(){return new $a}enabled(){return!!Rd}subscribe(){Rd&&($a.appWorkerStaticOnmessageMap.set(this.workerId,a=>{this.handler&&this.handler(a)}),Rd.onmessage=({data:a})=>{let l=a;if($a.appWorkerStaticOnmessageMap.has(l.workerId)){let h=$a.appWorkerStaticOnmessageMap.get(l.workerId);h&&h(l.message)}})}unsubscribe(){Rd&&$a.appWorkerStaticOnmessageMap.delete(this.workerId)}sendMessage(a="hello"){Rd&&Rd.postMessage(VE.builder().setWorkerId(this.workerId).setMessage(a))}setOnMessage(a){return this.handler=a,this.subscribe(),this}}S($a,"iNextWorkerId",0),S($a,"appWorkerStaticOnmessageMap",new Map),typeof Worker<"u"&&(Rd=new Worker(Bt.tu(new URL(Bt.p+Bt.u(612),Bt.b))),Rd.onmessage=({data:c})=>{let a=c;if($a.appWorkerStaticOnmessageMap.has(a.workerId)){let l=$a.appWorkerStaticOnmessageMap.get(a.workerId);l&&l(a.message)}},Rd.onerror=c=>{},Rd.postMessage(VE.builder().setWorkerId(-1).setMessage(mit.builder().setPageLoadedFrom(pageLoadedFrom))));class kg extends Dfe{}let Tfe=(()=>{class c extends kg{constructor(l,h){super(c.TYPE),S(this,"libraryRef",void 0),S(this,"libraryType",void 0),this.libraryRef=l,this.libraryType=h}static builder(){return new c("","")}setLibraryRef(l){return this.libraryRef=l,this}setLibraryType(l){return this.libraryType=l,this}}return S(c,"TYPE","LibraryInfoRequest"),c})(),kfe=(()=>{class c extends kg{constructor(l,h,d){super(c.TYPE),S(this,"libraryType",void 0),S(this,"bookRef",void 0),S(this,"loadBooksEnabled",void 0),this.libraryType=l,this.bookRef=h,this.loadBooksEnabled=d}static builder(){return new c("","",!0)}setLibraryType(l){return this.libraryType=l,this}setBookRef(l){return this.bookRef=l,this}setLoadBooksEnabled(l){return this.loadBooksEnabled=l,this}}return S(c,"TYPE","BookInfoRequest"),c})(),Mfe=(()=>{class c extends kg{constructor(l,h,d){super(c.TYPE),S(this,"libraryType",void 0),S(this,"bookRef",void 0),S(this,"languages",void 0),this.libraryType=l,this.bookRef=h,this.languages=d}static builder(){return new c("","",[])}setLibraryType(l){return this.libraryType=l,this}setBookRef(l){return this.bookRef=l,this}setLanguages(l){return this.languages=l,this}addLanguage(l){return this.languages.push(l),this}}return S(c,"TYPE","BookRequest"),c})();class yz{constructor(a,l,h){S(this,"bookRef",void 0),S(this,"bookPath",void 0),S(this,"bookPage",void 0),this.bookRef=a,this.bookPath=l,this.bookPage=h}static builder(){return new yz("","","")}setBookRef(a){return this.bookRef=a,this}setBookPath(a){return this.bookPath=a,this}setBookPage(a){return this.bookPage=a,this}}let Efe=(()=>{class c extends kg{constructor(l){super(c.TYPE),S(this,"pages",void 0),this.pages=l}static builder(){return new c([])}setBookPages(l){return this.pages=l,this}addBookPage(l){return this.pages.push(l),this}}return S(c,"TYPE","PagesRequest"),c})(),_z=(()=>{class c extends kg{constructor(l){super(c.TYPE),S(this,"pages",void 0),this.pages=l}static builder(){return new c([])}setPages(l){return this.pages=l,this}addPage(l){return this.pages.push(l),this}}return S(c,"TYPE","PagesResponse"),c})();class bz{constructor(a,l,h){S(this,"bookRef",void 0),S(this,"path",void 0),S(this,"content",void 0),this.bookRef=a,this.path=l,this.content=h}static builder(){return new bz("","","")}setBookRef(a){return this.bookRef=a,this}setPath(a){return this.path=a,this}setContent(a){return this.content=a,this}}let Afe=(()=>{class c extends kg{constructor(l){super(c.TYPE),S(this,"metaBooks",void 0),this.metaBooks=l}static builder(){return new c([])}setMetaBooks(l){return this.metaBooks=l,this}addMetaBook(l){return this.metaBooks.push(l),this}}return S(c,"TYPE","BookResponse"),c})(),Ife=(()=>{class c extends kg{constructor(l,h,d){super(c.TYPE),S(this,"bookRef",void 0),S(this,"metaContent",void 0),S(this,"loadBooksEnabled",void 0),this.bookRef=l,this.metaContent=h,this.loadBooksEnabled=d}static builder(){return new c("","",!0)}setBookRef(l){return this.bookRef=l,this}setMetaContent(l){return this.metaContent=l,this}setLoadBooksEnabled(l){return this.loadBooksEnabled=l,this}}return S(c,"TYPE","BookInfoResponse"),c})(),Pfe=(()=>{class c extends kg{constructor(l,h){super(c.TYPE),S(this,"libraryRef",void 0),S(this,"metaContent",void 0),this.libraryRef=l,this.metaContent=h}static builder(){return new c("","")}setLibraryRef(l){return this.libraryRef=l,this}setMetaContent(l){return this.metaContent=l,this}}return S(c,"TYPE","LibraryInfoResponse"),c})();class Rfe{constructor(a=null){S(this,"messageSender",void 0),S(this,"requests",new Map),this.messageSender=a}send(a,l){return this.messageSender&&(this.requests.set(l.type,l),this.messageSender(a,l)),this}post(a,l){return this}runAll(a,l,h){let d=0,f=()=>{if(d>=a.length)return void(h&&h(!0));let p=a[d++];l(p,g=>{g?f():h&&h(!1)})};f()}}class Cz{get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}constructor(a,l="/static"){S(this,"config",void 0),S(this,"sRestPoint",void 0),S(this,"textCache",new Map),S(this,"waitingTextCache",new Map),this.config=a,this.sRestPoint=l}getRestPoint(a,l,h=null){const d=this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return Mr.merge(Mr.merge(l||d,h??this.restPoint),a)}completeOnDone(a,l){let h=this.waitingTextCache.get(a);h&&(h.forEach(d=>{this.config.post(()=>{d&&d(l)})}),this.waitingTextCache.delete(a))}getTextRestcallUrl(a,l){if(this.coding){if(this.textCache.has(a)){let h=this.textCache.get(a);if(null!=h)return void this.config.post(()=>{l&&l(h)})}return this.waitingTextCache.has(a)?void(l&&this.waitingTextCache.get(a).push(l)):(l&&this.waitingTextCache.set(a,[l]),this.getBinRestcallUrlRaw(a,h=>{if(h){let d=new Uint8Array(h),f=PE.fromByteArray(d);this.completeOnDone(a,f)}else l&&l(null)}))}return this.getTextRestcallUrlRaw(a,l)}getTextRestcallUrlRaw(a,l){if(this.textCache.has(a)){let d=this.textCache.get(a);if(null!=d)return void this.config.post(()=>{l&&l(d)})}if(this.waitingTextCache.has(a))l&&this.waitingTextCache.get(a).push(l);else{l&&this.waitingTextCache.set(a,[l]);var h=new XMLHttpRequest;h.onload=()=>{if(l){let d=4===h.readyState&&200===h.status?h.responseText:null;null!=d?this.textCache.set(a,d):this.textCache.delete(a),this.completeOnDone(a,d)}},h.open("get",a,!0),h.send()}}getBinRestcallUrlRaw(a,l){let h=a;if(this.coding){let f=h.lastIndexOf(".");f>=0&&(h=h.substring(0,f)+".bin")}var d=new XMLHttpRequest;d.onload=()=>{if(l){let p=new Uint8Array(4===d.readyState&&200===d.status?d.response:null),g=PE.dtr(p,-1);l&&l(g)}},d.open("get",h,!0),d.responseType="arraybuffer",d.send()}}class Sz extends Rfe{constructor(a=null){super(a),S(this,"cacheService",null)}setCacheService(a){return this.cacheService=a,this}post(a,l){switch(l.type){case Tfe.TYPE:this.onLibraryInfoRequest(a,l);break;case kfe.TYPE:this.onBookInfoRequest(a,l);break;case Mfe.TYPE:this.onBookRequest(a,l);break;case Efe.TYPE:this.onPagesRequest(a,l);break;default:throw new Error(`Unknown message type: ${l.type}.`)}return this}onLibraryInfoRequest(a,l){let h=Pfe.builder().setCallbackId(l.id);l.libraryRef?this.loadLibraryInfo(l,h,l.libraryType+"/"+l.libraryRef+".library.txt",d=>{this.send(a,h)}):this.send(a,h)}loadLibraryInfo(a,l,h,d=null){let f=this.cacheService.getRestPoint(h,null);this.cacheService.getTextRestcallUrl(f,p=>{l.setMetaContent(p||"").setLibraryRef(a.libraryRef),d&&d(!!p)})}onBookInfoRequest(a,l){let h=Ife.builder().setCallbackId(l.id);l.bookRef?this.loadBookInfo(l,h,l.libraryType+"/"+l.bookRef+".book.txt",d=>{this.send(a,h)}):this.send(a,h)}loadBookInfo(a,l,h,d=null){let f=this.cacheService.getRestPoint(h,null);this.cacheService.getTextRestcallUrl(f,p=>{l.setMetaContent(p||"").setBookRef(a.bookRef),d&&d(!!p)})}onBookRequest(a,l){let h=Afe.builder().setCallbackId(l.id),d=l.languages.map(f=>f);d.length||d.push("CS","Sinodal"),d=d.map(f=>Mr.merge("/"+l.libraryType,l.bookRef+"_"+f+"/index.txt")),l.bookRef?this.runAll(d,(f,p)=>{this.loadBookPath(l,h,f,p)},f=>{this.send(a,h)}):this.send(a,h)}loadBookPath(a,l,h,d=null){let f=this.cacheService.getRestPoint(h,null);this.cacheService.getTextRestcallUrl(f,p=>{l.addMetaBook(bz.builder().setBookRef(a.bookRef).setPath(h).setContent(p||"")),d&&d(!!p)})}onPagesRequest(a,l){let h=_z.builder().setCallbackId(l.id);this.runAll(l.pages,(d,f)=>{let p=this.findPathPrefix(d.bookPath),g=this.cacheService.getRestPoint(Mr.merge(p,d.bookPage),null);this.cacheService.getTextRestcallUrl(g,m=>{h.addPage(m||""),f(!0)})},d=>{this.send(a,h)})}findPathPrefix(a){let l=a.lastIndexOf("/");return a.substring(0,l)}}class $w{static builder(){return new $w}Book(){return xz.builder()}NameValue(){return wz.builder()}NamePath(){return Oz.builder()}}class xz{constructor(a,l){S(this,"settings",void 0),S(this,"content",void 0),S(this,"cs",null),S(this,"cs2",null),this.settings=a,this.content=l}static builder(){return new xz([],[])}setSettings(a){return this.settings=a,this}setContent(a){return this.content=a,this}getCs(){return null==this.cs&&(this.cs=!!this.settings.find(a=>"\u044f\u0437\u044b\u043a"===a.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439"===a.value.toLowerCase())),this.cs}setCs(a){return this.cs=a,this}getCs2(){return null==this.cs2&&(this.cs2=!!this.settings.find(a=>"\u044f\u0437\u044b\u043a"===a.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-ucs8"===a.value.toLowerCase())),this.cs2}setCs2(a){return this.cs2=a,this}}class wz{constructor(a,l,h){S(this,"name",void 0),S(this,"value",void 0),S(this,"value2",void 0),this.name=a,this.value=l,this.value2=h}static builder(){return new wz("","",[])}setName(a){return this.name=a,this}setValue(a){return this.value=a,this}setValue2(a){return this.value2=a,this}}class Oz{constructor(a,l,h){S(this,"name",void 0),S(this,"path",void 0),S(this,"path2",void 0),this.name=a,this.path=l,this.path2=h}static builder(){return new Oz("","",[])}setName(a){return this.name=a,this}setPath(a){return this.path=a,this}setPath2(a){return this.path2=a,this}}var Ww=(()=>(function(c){c.\u0422\u0435\u043a\u0441\u0442="\u0442\u0435\u043a\u0442",c.\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435="\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",c.\u0413\u0440\u0430\u0444\u0438\u043a="\u0433\u0440\u0430\u0444\u0438\u043a",c.\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442="\u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442",c.\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f="\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"}(Ww||(Ww={})),Ww))();class Gw{constructor(a,l,h,d){S(this,"\u0442\u0438\u043f",void 0),S(this,"\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430",void 0),S(this,"\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b",void 0),S(this,"\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442",void 0),S(this,"\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440",_a.builder()),this.\u0442\u0438\u043f=a,this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=l,this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=h,this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=d}static builder(){return new Gw(Ww.\u0422\u0435\u043a\u0441\u0442,!0,[],null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(a){return this.\u0442\u0438\u043f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(a){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=a,this}get fragments(){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(a){return this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=a,this}}class Qr{constructor(a,l,h,d){S(this,"classes",void 0),S(this,"text",void 0),S(this,"link",void 0),S(this,"component",void 0),this.classes=a,this.text=l,this.link=h,this.component=d}static builder(){return new Qr({},"",null,null)}setClasses(a){return this.classes=a,this}setText(a){return this.text=a,this}setLink(a){return this.link=a,this}setComponent(a){return this.component=a,this}}function vit(c,a){if(1&c&&(R(0,"span",3),se(1),N()),2&c){const l=a.$implicit;L("ngClass",q(2).getClassOfTranslation(l)),F(1),Ht(l.text)}}function yit(c,a){if(1&c&&(R(0,"span"),se(1),K(2,vit,2,2,"span",2),se(3),N()),2&c){const l=q();F(1),Ht("\xa0"),F(1),L("ngForOf",l.translations),F(1),Ht("\xa0")}}let Dz=(()=>{class c{get textFragmentData(){return this.data}get classes(){return this.textFragmentData.config.fragment.classes}get translations(){return this.textFragmentData.config.translations}get text2(){return this.textFragmentData.config.fragment.text}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),S(this,"showTranslations",!1),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onShowTranslations(l){return this.showTranslations=!this.showTranslations,null!=this.translations&&(l.preventDefault(),l.stopPropagation()),this}getClassOfTranslation(l){return l.classes}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-text-fragment"]],inputs:{data:"data"},decls:3,vars:3,consts:[[3,"ngClass","click"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(l,h){1&l&&(R(0,"span",0),ie("click",function(f){return h.onShowTranslations(f)}),se(1),N(),K(2,yit,4,3,"span",1)),2&l&&(L("ngClass",h.classes),F(1),Ht(h.text2?h.text2:"\xa0"),F(1),L("ngIf",h.showTranslations&&(null==h.translations?null:h.translations.length)))},dependencies:[di,vi,Sn],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class Tz{constructor(a,l){S(this,"fragment",void 0),S(this,"translations",void 0),this.fragment=a,this.translations=l}static builder(){return new Tz(null,null)}setFragment(a){return this.fragment=a,this}setTranslations(a){return this.translations=a,this}}class Qw extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"config",void 0),this.config=d}static builder(){return new Qw("",null,null,Tz.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}class Ffe{static uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16))}}class aa{constructor(a,l,h,d,f,p=!0){S(this,"path",void 0),S(this,"isText",void 0),S(this,"content",void 0),S(this,"data",void 0),S(this,"pathZip",void 0),S(this,"printable",void 0),this.path=a,this.isText=l,this.content=h,this.data=d,this.pathZip=f,this.printable=p}getPath(){return this.pathZip?this.pathZip:this.path}}class UE{constructor(a,l,h){S(this,"index",void 0),S(this,"text",void 0),S(this,"classes",void 0),S(this,"lines",[]),this.index=a,this.text=l,this.classes=h}}class kz{constructor(a,l){S(this,"lineNumber",void 0),S(this,"translations",void 0),this.lineNumber=a,this.translations=l}}class _it{constructor(a,l,h,d,f){S(this,"psalom",void 0),S(this,"slava",void 0),S(this,"lines",void 0),S(this,"names",void 0),S(this,"textJustifyClass",void 0),S(this,"translations",[]),S(this,"memorials",[]),this.psalom=a,this.slava=l,this.lines=h,this.names=d,this.textJustifyClass=f}sync(){return this.translations=[],this.lines.forEach((a,l)=>{a.translations.forEach((h,d)=>{for(;this.translations.length<=d;)this.translations.push(new UE("","",""));let f=this.translations[d];h.classes&&(f.classes=h.classes),h.index&&(f.index=h.index),f.lines.push(new kz(a.lineNumber,[new UE(h.index,h.text,h.classes)]))})}),this}get translationsCount(){return this.lines.length?this.lines[0].translations.length:0}}class bit{constructor(a,l,h,d,f){S(this,"name",void 0),S(this,"link",void 0),S(this,"id",void 0),S(this,"order",void 0),S(this,"children",void 0),this.name=a,this.link=l,this.id=h,this.order=d,this.children=f}}class Ez{constructor(a,l){S(this,"textSizeClass",void 0),S(this,"lines",void 0),this.textSizeClass=a,this.lines=l}}class Cit{constructor(a,l,h){S(this,"type",void 0),S(this,"link",void 0),S(this,"name",void 0),this.type=a,this.link=l,this.name=h}}class Sit{constructor(a,l){S(this,"kafizma",void 0),S(this,"psalmy",void 0),S(this,"uuidContent",""),S(this,"uuidContributer",""),S(this,"textSizeClass",""),S(this,"textJustifyClass",""),S(this,"name",""),S(this,"psalomName",""),S(this,"application",""),S(this,"applicationId",""),S(this,"developerId",""),S(this,"developerName",""),S(this,"developerNameSortOrder",""),S(this,"developerLink",""),S(this,"date",""),S(this,"content",[]),S(this,"fileNames",[]),S(this,"molitva",new Ez("",[])),S(this,"startMolitva",new Ez("",[])),S(this,"endMolitva",new Ez("",[])),this.kafizma=a,this.psalmy=l}}class D1{constructor(a,l,h,d,f,p,g,m){S(this,"name",void 0),S(this,"psalomName",void 0),S(this,"allBooks",void 0),S(this,"bookNames",void 0),S(this,"allBooksChapters",void 0),S(this,"emptyFirstLines",void 0),S(this,"showLineIndexes",void 0),S(this,"showMiddleContent",void 0),this.name=a,this.psalomName=l,this.allBooks=h,this.bookNames=d,this.allBooksChapters=f,this.emptyFirstLines=p,this.showLineIndexes=g,this.showMiddleContent=m}static builder(){return new D1("","",[],[],[],[],!0,!0)}setName(a){return this.name=a,this}setPsalomName(a){return this.psalomName=a,this}setAllBooks(a){return this.allBooks=a,this}setBookNames(a){return this.bookNames=a,this}setAllBooksChapters(a){return this.allBooksChapters=a,this}setEmptyFirstLines(a){return this.emptyFirstLines=a,this}setShowLineIndexes(a){return this.showLineIndexes=a,this}setShowMiddleContent(a){return this.showMiddleContent=a,this}}class Az{constructor(a){S(this,"requestsPack",void 0),this.requestsPack=a}static builder(){return new Az([])}setRequestPack(a){return this.requestsPack=a,this}addRequest(a){return this.requestsPack.push(a),this}}class jw{constructor(a){S(this,"handler",void 0),this.handler=a}static builder(){return new jw(null)}setHandler(a){return this.handler=a,this}print(a){this.handler&&this.handler(a)}}let Lfe=(()=>{class c{constructor(l,h,d,f,p){S(this,"cacheSvc",void 0),S(this,"zipSvc",void 0),S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"ks",void 0),S(this,"prefix","templates/"),S(this,"baseContents",[]),S(this,"uniqueId",0),S(this,"tocIndex",1),S(this,"zipEntries",[]),S(this,"content",[]),S(this,"kafizmyContent",null),S(this,"startRequest",null),this.cacheSvc=l,this.zipSvc=h,this.config=d,this.uiConfig=f,this.ks=p,this.setup()}setup(){this.baseContents=[new aa("ebook/mimetype.txt",!0,"",null,"mimetype"),new aa("ebook/stylesheet.css",!0,"",null,"stylesheet.css"),new aa("ebook/PonomarUnicode.ttf",!1,"",null,"PonomarUnicode.ttf"),new aa("ebook/triodion-ieUcs.ttf",!1,"",null,"triodion-ieUcs.ttf"),new aa("ebook/logo.png",!1,"",null,"logo.png"),new aa("ebook/meta_inf/container.xml.txt",!0,"",null,"META-INF/container.xml"),new aa("ebook/toc.ncx.txt",!0,"",null,"toc.ncx"),new aa("ebook/metadata.opf.txt",!0,"",null,"metadata.opf"),new aa("ebook/content.xhtml",!0,"",null,"content.xhtml"),new aa("ebook/titlepage.xhtml",!0,"",null,"titlepage.xhtml"),new aa("kafizma.parallel.xhtml",!0,"",null,"",!1),new aa("kafizma.parallel.redline.xhtml",!0,"",null,"",!1),new aa("kafizma.parallel.redline.nobreaks.xhtml",!0,"",null,"",!1),new aa("kafizma.xhtml",!0,"",null,"",!1),new aa("kafizma.nobreaks.xhtml",!0,"",null,"",!1)]}clearGeneratePrintRequestsPack(l,h){this.zipEntries=[],this.content=[],this.startRequest=l,this.kafizmyContent=h,this.tocIndex=1}startGeneratePrintRequestsPack(l,h){}nextUniqueId(){return this.uniqueId++}nextTocIndex(){return++this.tocIndex}newMustacheFileName(l,h,d,f,p){return new bit(l,h,d+"_"+f,f,p)}findContent(l){return this.content.find(h=>h.path==l)}addToc(l,h,d,f,p){l.content.push(new Cit(h,d,f)),l.fileNames.push(this.newMustacheFileName(f,d,p,`${this.nextTocIndex()}`,[]))}doGeneratePrintRequestsPack(l,h){let d=l.bookNames.map(p=>p.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439")||p.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439 (\u0440\u0443\u0441)")?"cs":p.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-UCS8")?"cs2":p.endsWith("\u043f\u0440\u0435\u0444\u0438\u043a\u0441")?"right":"").map(p=>p+" "+(this.uiConfig.ui.fineText.getBooleanValue()?"ftext":"")),f=!!l.bookNames.find(p=>"\u043f\u0440\u0435\u0444\u0438\u043a\u0441"===p);for(let p=0;p<l.allBooksChapters.length;++p){let g=this.findContent(f?"kafizma.parallel.redline.xhtml":this.uiConfig.ui.parallel.getBooleanValue()?this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.parallel.redline.xhtml":"kafizma.parallel.redline.nobreaks.xhtml":this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.xhtml":"kafizma.nobreaks.xhtml");if(!g)continue;let m=(x,w)=>l.allBooks[x].flatMap((O,D)=>O.filter((T,M)=>M==w).map((T,M)=>new UE(`${w}`,T,d[D]))),v=l.allBooks[p][0].map((x,w)=>{let O=l.emptyFirstLines[p].reduce((E,P)=>E>P?P:E,100),T=m(p,w),M=w+1-O,k=T.map(E=>E.lines.length>0).reduce((E,P,V,I)=>E&&P,!0);return new kz(`${M>0&&!k&&l.showLineIndexes?M:""}`,T)}),y=new _it(l.allBooksChapters[p],[],v,[],this.uiConfig.ui.fineText.getBooleanValue()?"ftext":""),_=l.allBooks[p].length;for(let x=0;x<_;++x){let w=new UE("","",d[x]);w.lines=v.map(O=>new kz(O.lineNumber,[O.translations[x]])),y.translations.push(w)}h.psalmy=[y];const b=Mustache.render(g.content,h,{navPoint:"",item:"",itemref:""});let C=this.nextUniqueId();this.content.push(new aa(`glava_${l.allBooksChapters[p]}_${C}.xhtml`,!0,b,null,"")),this.addToc(h,"TextTOC",`glava_${l.allBooksChapters[p]}_${C}.xhtml`,`${h.psalomName} ${l.allBooksChapters[p]}`,`num_glava_${l.allBooksChapters[p]}_${C}`)}}updateContent(l){this.kafizmyContent&&(l.content=this.kafizmyContent.content,l.fileNames=this.kafizmyContent.fileNames)}endGeneratePrintRequestsPack(l,h,d){this.content.forEach(f=>{if(f.printable)if(f.isText)try{const p=Mustache.render(f.content,f.data?f.data:h,{navPoint:'\n    <navPoint id="{{id}}" playOrder="{{order}}">\n        <navLabel>\n          <text>{{name}}</text>\n        </navLabel>\n        <content src="{{link}}"/>{{#children}}{{>navPoint}}{{/children}}\n      </navPoint>',item:'\n    <item href="{{link}}" id="r{{id}}" media-type="application/xhtml+xml"/>{{#children}}{{>item}}{{/children}}',itemref:'\n    <itemref idref="r{{id}}"/>{{#children}}{{>itemref}}{{/children}}'});this.zipEntries.push(w1.builder().setFileName(f.getPath()).setContent(p))}catch(p){}else this.zipEntries.push(w1.builder().setFileName(f.getPath()).setContent(f.content))}),this.zipSvc.zip(this.zipEntries).then(f=>{const p=new Blob([f],{type:"octet/stream"}),g=(new Date).toISOString().split("T")[0],m="epub";if(this.config.isPlatformAndroid()){const v=`${l.name}.${m}`;this.ks.addTempFile(v,p).then(y=>{y&&y.success&&xh.startDownload(y.fileName,v),d(!0)})}else xh.saveData(p,`${l.name}.${g}.${m}`),d(!0)})}loadBaseContent(l,h,d){let f=this.baseContents[l];f.isText?this.cacheSvc.getText(this.prefix+f.path,p=>{p?(this.content.push(new aa(f.path,f.isText,p,f.data,f.pathZip,f.printable)),this.config.post(()=>{h()})):(this.config.addAlert(Pr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${f.path}`,"\u041e\u041a",15)),d(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${f.path}.`))}):this.cacheSvc.getBinary(this.prefix+f.path,p=>{p?(this.content.push(new aa(f.path,f.isText,p,f.data,f.pathZip,f.printable)),this.config.post(()=>{h()})):(this.config.addAlert(Pr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${f.path}`,"\u041e\u041a",15)),d(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${f.path}.`))})}generate(l,h=!0,d=!0,f=!0){return new Promise((p,g)=>{let m=h?0:this.baseContents.length;const v=(this.uiConfig.ui.parallel.getBooleanValue()?"P":"")+(this.uiConfig.ui.coloredTranslations.getBooleanValue()?"C":"")+(this.uiConfig.ui.fineText.getBooleanValue()?"J":"")+(this.uiConfig.ui.showMolitvy.getBooleanValue()?"M":"");let y=new Sit(1,[]);y.name=l.name,y.psalomName=l.psalomName,y.application=this.config.getApplication().name,y.applicationId=this.config.getApplication().id,y.developerId=this.config.developerId,y.developerName=this.config.developerName,y.developerNameSortOrder=this.config.developerNameSortOrder,y.developerLink=this.config.developerLink,y.uuidContent=Ffe.uuidv4(),y.uuidContributer=Ffe.uuidv4(),y.application=`${this.config.getApplication().name} (${this.config.version}) ${v}`;const _=(new Date).toISOString(),b=_.lastIndexOf(".");y.date=_.substring(0,b)+"+00:00",h&&this.clearGeneratePrintRequestsPack(l,y);let C=()=>{let x=m++;x>=this.baseContents.length?(h?(this.startGeneratePrintRequestsPack(l,y),this.addToc(y,"TextTOC","titlepage.xhtml","\u041e\u0431\u043b\u043e\u0436\u043a\u0430","num_title"),this.addToc(y,"TextTOC","content.xhtml","\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","num_content")):this.updateContent(y),d&&this.doGeneratePrintRequestsPack(l,y),f?this.endGeneratePrintRequestsPack(l,y,w=>p(w)):p(!0)):this.loadBaseContent(x,()=>C(),w=>g(w))};C()})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Pd),Pe(O1),Pe(ln),Pe(ii),Pe(Sg))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class Iz{constructor(a,l){S(this,"libName",void 0),S(this,"link",void 0),this.libName=a,this.link=l}static builder(){return new Iz("",null)}setLibName(a){return this.libName=a,this}setLink(a){return this.link=a,this}}class Pz{constructor(a,l){S(this,"fragment",void 0),S(this,"link",void 0),this.fragment=a,this.link=l}static builder(){return new Pz(null,null)}setFragment(a){return this.fragment=a,this}setLink(a){return this.link=a,this}}class Rz extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"config",void 0),S(this,"id",""),S(this,"targetId",""),S(this,"waitingForSenderId",""),S(this,"printerHandler",jw.builder()),this.config=d}static builder(){return new Rz("",null,null,Pz.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}setWaitingForSenderId(a){return this.waitingForSenderId=a,this}}class Dl extends ku{constructor(a){super(),S(this,"onRoute",void 0),S(this,"logical",!0),S(this,"shortName",!1),S(this,"textIsPage",!1),S(this,"chapter",""),S(this,"startLine",-1),S(this,"endLine",-1),S(this,"bookName",""),S(this,"languages",null),this.onRoute=a}static builder(){return new Dl(null)}setShortName(a){return this.shortName=a,this.markChanged(),this}setTextIsPage(a){return this.textIsPage=a,this.markChanged(),this}setChapter(a){return this.chapter=a,this.markChanged(),this}setStartLine(a){return this.startLine=a,this.markChanged(),this}setEndLine(a){return this.endLine=a,this.markChanged(),this}setBookName(a){return this.bookName=a,this.markChanged(),this}setLanguages(a){return this.languages=a,this.markChanged(),this}setLogical(a){return this.logical=a,this.markChanged(),this}setOnRoute(a){return this.onRoute=a,this.markChanged(),this}route(a){this.onRoute&&this.onRoute(a)}}class Tl extends Ci{constructor(a,l,h,d,f){super(a,l,h),S(this,"link",void 0),S(this,"search",void 0),S(this,"menuLinks",null),S(this,"forceMenu",!1),S(this,"hideUI",!1),S(this,"enableEpub",!0),S(this,"showPrintButtons",!1),S(this,"handleMemorialNewTitleTarget",""),S(this,"facePage",!1),S(this,"parallel",null),S(this,"linebreaks",null),S(this,"id",""),S(this,"targetId",""),S(this,"printerHandler",jw.builder()),S(this,"autoPrint",!1),this.link=d,this.search=f}static builder(){return new Tl("",null,null,Dl.builder().setShortName(!0),"")}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setLink(a){return this.link=a,this}setSearch(a){return this.search=a,this}setMenu(a){return this.menuLinks=a,this}setForceMenu(a){return this.forceMenu=a,this}setHideUI(a){return this.hideUI=a,this}setEpubEnabled(a){return this.enableEpub=a,this}setShowPrintButtons(a){return this.showPrintButtons=a,this}setHandleMemorialNewTitle(a){return this.handleMemorialNewTitleTarget=a,this}setFacePage(a){return this.facePage=a,this}setParallel(a){return this.parallel=a,this}setLinebreaks(a){return this.linebreaks=a,this}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}setAutoPrint(a){return this.autoPrint=a,this}}function xit(c,a){1&c&&(R(0,"span"),se(1,"+"),N())}function wit(c,a){if(1&c&&(R(0,"span"),se(1),N()),2&c){const l=q(2);F(1),gi("",l.link.endChapter,":")}}function Oit(c,a){if(1&c&&(R(0,"span"),se(1),N()),2&c){const l=q(2);F(1),Ht(l.link.endLine)}}function Dit(c,a){if(1&c&&(R(0,"span"),se(1,"-"),K(2,wit,2,1,"span",2),K(3,Oit,2,1,"span",2),N()),2&c){const l=q();F(2),L("ngIf",l.link.endChapter>0),F(1),L("ngIf",l.link.endLine)}}function Tit(c,a){1&c&&pe(0,"app-dynamic-library-book",4),2&c&&L("data",q().bookData)}const kit=function(c){return{"is-solid":c,cursor:!0,blue:!0}};let Fz=(()=>{class c{get linkFragmentData(){return this.data}get classes(){return this.linkFragmentData.config.fragment.classes}get link(){return this.linkFragmentData.config.link.link}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"bookData",Tl.builder()),S(this,"checkLater",DS.builder()),S(this,"opened",!1),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){if(this.linkFragmentData.printerHandler.setHandler(l=>{this.bookData.printerHandler.print(l)}),this.checkLater.setConfig(this.config).setWaitingForSenderId(this.linkFragmentData.waitingForSenderId).checkEnabled(),this.linkFragmentData.config.link){let l=this.linkFragmentData.config.link.libName;l||(l="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),this.opened!=!!this.linkFragmentData.config.link?.link?.opened&&this.config.post(()=>{this.opened=!!this.linkFragmentData.config.link?.link?.opened}),this.bookData.setText(l).setId(this.linkFragmentData.id).setTargetId(this.linkFragmentData.targetId).setLink(Dl.builder().setOnRoute(h=>{}).setChapter(""+this.linkFragmentData.config.link.link.startChapter).setStartLine(this.linkFragmentData.config.link.link.startLine).setEndLine(this.linkFragmentData.config.link.link.endLine))}}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}toggleOpened(l){this.opened=!this.opened,l.stopPropagation()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-link-fragment"]],inputs:{data:"data"},decls:7,vars:11,consts:[[3,"click"],[3,"ngClass","click"],[4,"ngIf"],[3,"data",4,"ngIf"],[3,"data"]],template:function(l,h){1&l&&(R(0,"span",0),ie("click",function(f){return f.stopPropagation()}),R(1,"clr-icon",1),ie("click",function(f){return h.toggleOpened(f)}),N(),R(2,"span",1),ie("click",function(f){return h.toggleOpened(f)}),se(3),K(4,xit,2,0,"span",2),K(5,Dit,4,2,"span",2),N(),K(6,Tit,1,1,"app-dynamic-library-book",3),N()),2&l&&(F(1),L("ngClass",ds(9,kit,h.opened)),ot("shape","scroll"),F(1),L("ngClass",h.classes),F(1),WC("",h.link.name,".",h.link.startChapter,":",h.link.startLine,""),F(1),L("ngIf",h.link.endChapter>0||h.link.endLine>=1e3),F(1),L("ngIf",h.link.endChapter>0||h.link.endLine>0&&h.link.endLine<1e3),F(1),L("ngIf",h.opened&&h.checkLater.enabled))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class Mit{Word(){return Lz.builder()}Other(){return Nz.builder()}}var z0=(()=>(function(c){c[c.Word=0]="Word",c[c.Other=1]="Other"}(z0||(z0={})),z0))();class Nfe{constructor(a){S(this,"type",void 0),this.type=a}}class Lz extends Nfe{constructor(a){super(z0.Word),S(this,"text",void 0),this.text=a}static builder(){return new Lz("")}setText(a){return this.text=a,this}}class Nz extends Nfe{constructor(a){super(z0.Other),S(this,"text",void 0),this.text=a}static builder(){return new Nz("")}setText(a){return this.text=a,this}}class Eit{parse(a){return wordsParserStatic.parse(a,{builder:new Mit})}}class Bz{FragmentIdOp(){return Uz.builder()}TextOp(){return zz.builder()}LinkOp(){return Hz.builder()}}var ic=(()=>(function(c){c[c.Text=0]="Text",c[c.Link=1]="Link",c[c.Id=2]="Id"}(ic||(ic={})),ic))();class Vz{constructor(a){S(this,"type",void 0),this.type=a}}class Uz extends Vz{constructor(a){super(ic.Id),S(this,"id",void 0),this.id=a}static builder(){return new Uz("")}setId(a){return this.id=a,this}}class zz extends Vz{constructor(a,l,h){super(ic.Text),S(this,"text",void 0),S(this,"comment",void 0),S(this,"color",void 0),this.text=a,this.comment=l,this.color=h}static builder(){return new zz("","","")}setText(a){return this.text=a,this}setComment(a){return this.comment=a,this}setColor(a){return this.color=a,this}}class Hz extends Vz{constructor(a,l,h,d,f,p=null,g=!1,m=!1,v="",y="",_=""){super(ic.Link),S(this,"name",void 0),S(this,"startChapter",void 0),S(this,"startLine",void 0),S(this,"endChapter",void 0),S(this,"endLine",void 0),S(this,"langugages",void 0),S(this,"opened",void 0),S(this,"alwaysPrint",void 0),S(this,"id",void 0),S(this,"targetId",void 0),S(this,"waitingForSenderId",void 0),this.name=a,this.startChapter=l,this.startLine=h,this.endChapter=d,this.endLine=f,this.langugages=p,this.opened=g,this.alwaysPrint=m,this.id=v,this.targetId=y,this.waitingForSenderId=_}static builder(){return new Hz("",1,1,-1,-1)}setName(a){return this.name=a,this}setStartChapter(a){return this.startChapter=a,this}setStartLine(a){return this.startLine=a,this}setEndChapter(a){return this.endChapter=a,this}setEndLine(a){return this.endLine=a,this}setLanguages(a){return this.langugages=a,this}setOpened(a){return this.opened=a,this}setAlwaysPrint(a){return this.alwaysPrint=a,this}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}setWaitingForSenderId(a){return this.waitingForSenderId=a,this}}let $z=(()=>{class c{parseFragments(l,h,d,f="red",p=!0,g=null){let m=[],v=fragmentsParserStatic.parse(d,{builder:new Bz});if(null!=v&&v.length)v[0].forEach(y=>{switch(y.type){case ic.Text:{let _=y,b=_.text;if(_.color.includes("^")){let w=g?.getTranslations(b);w&&(b=w.map(O=>O.translations).join(""))}let C=(new Eit).parse(b),x=(w,O,D)=>{let T=Qr.builder().setClasses(c.getLastClasses(O,f)).setText(w),M=Qw.builder();M.config.setFragment(T).setTranslations(D),m.push(T.setComponent(new Wn(Dz,M)))};C.forEach((w,O,D)=>{let T="",M="",k=null;if(w.type===z0.Word){if(T=w.text,M=_.color,p){let V=g?.getTranslations(T);if(V){let I='{\u0443}{\u0438}=> "'+V.flatMap(U=>U.translations).join(" // ")+'"{/\u0438}{/\u0443} ';V.findIndex(U=>U.cs)>=0&&(I="{\u0446}"+I+"{/\u0446}"),k=this.parseFragments(l,h,I,f,!1,g)}}let P=!0;for(let V=O+1;V<D.length;V++)if(D[V].type==z0.Word){P=!1;break}P&&_.comment&&(k=this.parseFragments(l,h,'{\u0443}{\u0438}=> "'+_.comment+'"{/\u0438}{/\u0443} ',f,!1,g))}else T=w.text,M=_.color;x(T,M+(k?"\u0447":""),k)})}break;case ic.Link:{let _=y,b=Qr.builder().setClasses(c.getLastClass("\u0441",f));b.classes.cursor=!0;let C=Rz.builder();C.config.setLink(Iz.builder().setLink(_).setLibName(h(_.name))).setFragment(b),C.setId(_.id).setWaitingForSenderId(_.waitingForSenderId).setTargetId(_.targetId),m.push(b.setComponent(new Wn(Fz,C)))}break;case ic.Id:{let _=y,b=l.get(_.id);if(b)m.push(b);else{let C=Qr.builder().setClasses(c.getLastClass("\u043a",f)).setText(_.id),x=Qw.builder();x.config.setFragment(C),m.push(C.setComponent(new Wn(Dz,x)))}}break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430: ${y.type}.`)}});else{let y=Qr.builder().setText(""),_=Qw.builder();_.config.setFragment(y),m.push(y.setComponent(new Wn(Dz,_)))}return m}}return S(c,"getLastClasses",(a,l="red",h=!0)=>{let d={};return a.split("").map(p=>c.getLastClass(p,l,h,d)),d}),S(c,"getLastClass",(a,l="red",h=!0,d={})=>{let f=d;switch(a){case"\u041a":case"\u043a":h&&(f[l]=h);break;case"\u0417":case"\u0437":h&&(f.green=h);break;case"\u0401":case"\u0451":h&&(f.yellow=h);break;case"\u0421":case"\u0441":h&&(f.blue=h);break;case"\u0424":case"\u0444":h&&(f.indigo=h);break;case"\u041f":case"\u043f":h&&(f.purple=h);break;case"\u041c":case"\u043c":h&&(f.cyan=h);break;case"\u041b":case"\u043b":h&&(f.greenYellow=h);break;case"\u0420":case"\u0440":h&&(f.darkRed=h);break;case"B":case"b":case"\u0418":case"\u0438":h&&(f.colorBold=h);break;case"C":case"c":case"\u0423":case"\u0443":h&&(f.colorCursive=h);break;case"U":case"u":case"\u0427":case"\u0447":h&&(f.colorUnderline=h);break;case"\u0426":case"\u0446":h&&(f.cs=h)}return f}),c})();class Wz{constructor(a,l,h){S(this,"book",void 0),S(this,"lineIndex",void 0),S(this,"bookSvc",void 0),this.book=a,this.lineIndex=l,this.bookSvc=h}static builder(){return new Wz(null,0,null)}setBook(a){return this.book=a,this}setLineIndex(a){return this.lineIndex=a,this}setBookSvc(a){return this.bookSvc=a,this}}class T1 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"config",void 0),this.config=d}static builder(){return new T1("",null,null,Wz.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let Bfe=(()=>{class c{constructor(l){S(this,"viewContainerRef",void 0),this.viewContainerRef=l}}return S(c,"\u0275fac",function(l){return new(l||c)(z(Ki))}),S(c,"\u0275dir",_t({type:c,selectors:[["","addComponent",""]]})),c})();function Ait(c,a){}let rc=(()=>{class c{constructor(){S(this,"thisComponent",null),S(this,"currentAdIndex",-1),S(this,"adHost",void 0)}set component(l){if(!l)throw new Error("Error: thisComponent is null.");this.thisComponent=l}get component(){return this.thisComponent}ngOnInit(){this.loadComponent()}ngOnDestroy(){}loadComponent(){const l=this.thisComponent,h=this.adHost.viewContainerRef;h.clear(),h.createComponent(l.component).instance.data=l.data}reload(){this.loadComponent()}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-add-component"]],viewQuery:function(l,h){if(1&l&&mi(Bfe,7),2&l){let d;jt(d=Zt())&&(h.adHost=d.first)}},inputs:{component:"component"},decls:1,vars:0,consts:[["addComponent",""]],template:function(l,h){1&l&&K(0,Ait,0,0,"ng-template",0)},dependencies:[Bfe],encapsulation:2})),c})();function Iit(c,a){1&c&&(R(0,"span"),se(1,"\xa0"),N())}const Pit=function(c,a){return{red:c,redDark:a}};function Rit(c,a){if(1&c&&(R(0,"span")(1,"span",2),se(2),N(),R(3,"span")(4,"span",3),se(5,"."),N()()()),2&c){const l=q(2);F(1),L("ngClass",Wr(2,Pit,!(l.colored&&l.bookIndex%2),l.colored&&!!(l.bookIndex%2))),F(1),Ht(l.lineIndex?l.lineIndex:"")}}function Fit(c,a){1&c&&pe(0,"app-add-component",5),2&c&&L("component",q().$implicit.component)}function Lit(c,a){if(1&c&&(R(0,"span"),K(1,Fit,1,1,"app-add-component",4),N()),2&c){const l=a.$implicit;F(1),L("ngIf",l.component)}}function Nit(c,a){if(1&c&&(R(0,"span"),K(1,Rit,6,5,"span",0),K(2,Lit,2,1,"span",1),N()),2&c){const l=q();F(1),L("ngIf",l.isLineIndexed(l.book,l.lineIndex)),F(1),L("ngForOf",l.getBookFragments(l.bookIndex,l.book,l.lineIndex))}}let zE=(()=>{class c{get spanTextData(){return this.data}get bookIndex(){return this.spanTextData.config.book?this.spanTextData.config.book.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438:0}get book(){return this.spanTextData.config.book}get lineIndex(){return this.spanTextData.config.lineIndex}get bookSvc(){return this.spanTextData.config.bookSvc}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"uiConfig",void 0),S(this,"data",void 0),this.uiConfig=l}get colored(){return this.uiConfig.ui.coloredTranslations.getBooleanValue()}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}isLineIndexed(l,h){return h>0&&l.\u0441\u0442\u0440\u043e\u043a\u0438[h].fragments.length>0&&l.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}getBookFragments(l,h,d){if(null==h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430){let f=this.bookSvc?.bookContent[l]?.parsed?.settings.find(p=>"\u044f\u0437\u044b\u043a"===p.name.toLowerCase());h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=[Qr.builder().setText(f?f.value:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e").setClasses({red:!0})]}return d<0?h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430:h.\u0441\u0442\u0440\u043e\u043a\u0438[d].fragments}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-span-text"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"hidden"],[3,"component",4,"ngIf"],[3,"component"]],template:function(l,h){1&l&&(K(0,Iit,2,0,"span",0),K(1,Nit,3,2,"span",0)),2&l&&(L("ngIf",!h.book),F(1),L("ngIf",h.book))},dependencies:[di,vi,Sn,rc]})),c})();class Bit{newText(){return Gz.builder()}}class Gz{constructor(a,l){S(this,"type",void 0),S(this,"text",void 0),this.type=a,this.text=l}static builder(){return new Gz("","")}setType(a){return this.type=a,this}setText(a){return this.text=a,this}}class HE{static escapeString(a){let l="",h=!1;for(let d=0;d<a.length;d++){let f=a.charAt(d);switch(f){case"'":h||(l+="\\"),l+=f,h=!1;break;case"\\":l+=f,h=!0;break;default:l+=f,h=!1}}return l}static stdConverter(a){let l="";switch(a.type){case"*":l+=a.text;break;case"=":l+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438("+a.text+");";break;case"":l+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438('"+HE.escapeString(a.text)+"');"}return l}parse(a){return bracerParserStatic.parse(a,{builder:new Bit})}getStdConverter(){return a=>HE.stdConverter(a)}join(a,l=null){return l||(l=this.getStdConverter()),a.map(h=>l(h)).join("")}parseAndJoin(a,l=null){return this.join(this.parse(a),l)}}class Qz extends ku{constructor(){super(),S(this,"block",!1),S(this,"outline",!1),S(this,"type","primary")}static builder(){return new Qz}setBlock(a){return this.block=a,this.markChanged(),this}setOutline(a){return this.outline=a,this.markChanged(),this}setType(a){return this.type=a,this.markChanged(),this}}class $E extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),this.classes=d}static builder(){return new $E("",null,null,Qz.builder().setBlock(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let Vfe=(()=>{class c{get btnData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return this.btnData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var l=this.btnData.classes;return{btn:!0,"btn-block":l.block,"btn-link":"link"==l.type&&!l.outline,"btn-primary":"primary"==l.type&&!l.outline,"btn-primary-outline":"primary"==l.type&&l.outline,"btn-success":"success"==l.type&&!l.outline,"btn-success-outline":"success"==l.type&&l.outline,"btn-danger":"danger"==l.type&&!l.outline,"btn-danger-outline":"danger"==l.type&&l.outline,"no-print":!0}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-button"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass","click"]],template:function(l,h){1&l&&(R(0,"button",0),ie("click",function(f){return h.onClick(f)}),se(1),N()),2&l&&(L("ngClass",h.getClasses()),F(1),Ht(h.text))},dependencies:[di]})),c})(),k1=(()=>{class c{constructor(l){S(this,"uiConfig",void 0),this.uiConfig=l}getBookmarks(){return this.uiConfig.ui.bookmarks.getStringValue().split(",").filter(l=>!!l)}setBookmarks(l){return this.uiConfig.ui.bookmarks.setStringValue(l.join(",")),this}addBookmark(l,h,d,f){if(!l)return this;let p=this.getBookmarks();return p.push(l+"."+h+(d>0?":"+d+(f>0?"-"+f:""):"")),this.setBookmarks(p),this}deleteBookmark(l){let h=this.getBookmarks(),d=h.findIndex(f=>f===l);return d>=0&&(h.splice(d,1),this.setBookmarks(h)),this}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ii))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class WE{constructor(){S(this,"\u0434\u0432\u0438\u0436\u043e\u043a",new Ew),S(this,"\u0434\u0432\u0438\u0436\u043e\u043a\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d",!1),S(this,"\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434",new Map),S(this,"\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438",[]),S(this,"\u0441\u0442\u0440\u043e\u043a\u0430\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438\u0414\u0432\u0438\u0436\u043a\u0430","\n  //{{ ========= \u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u0432 ========= {{\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u041c\u0430\u0441\u0441\u0438\u0432\u0430 = \u0441\u0438\u0441\u0442\u0435\u043c\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f('\u043c\u0430\u0441\u0441\u0438\u0432');\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u041c\u0430\u0441\u0441\u0438\u0432\u0430.\u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c = \u043a\u043b\u0430\u0441\u0441{\u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440){\n      \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = [];\n      \u0446\u0438\u043a\u043b(i = 0; i < \u044d\u0442\u043e.\u0434\u043b\u0438\u043d\u0430(); ++i){\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435(\u044d\u0442\u043e[i], i, \u044d\u0442\u043e));\n      }\n      \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;\n    }}.\u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c;\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u041c\u0430\u0441\u0441\u0438\u0432\u0430.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c = \u043a\u043b\u0430\u0441\u0441{\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c(\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440){\n      \u0446\u0438\u043a\u043b(i = 0; i < \u044d\u0442\u043e.\u0434\u043b\u0438\u043d\u0430(); ++i){\n        \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435(\u044d\u0442\u043e[i], i, \u044d\u0442\u043e);\n      }\n    }}.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c;\n    //-----------------------------------------------\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e = \u0441\u0438\u0441\u0442\u0435\u043c\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f('\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e');\n    \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e.\u0432\u0441\u0442\u0440\u043e\u0438\u0442\u044c\u041a\u043e\u043f\u0438\u0438 =\n      \u043a\u043b\u0430\u0441\u0441 {\n        \u0432\u0441\u0442\u0440\u043e\u0438\u0442\u044c\u041a\u043e\u043f\u0438\u0438(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439)\n        {\n          \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n            \u0430\u0441\u0434 = 0;\n            \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n            \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n              \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n              \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n            }\n          };\n          \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n            \u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435) {\n              \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435;\n            }\n            \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043a\u043e\u043f\u0438\u044f, \u0441\u043f\u0438\u0441\u043e\u043a) {\n              \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                \u0430\u0441\u0434 = 0;\n                \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                  \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                  \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                }\n              };\n              \u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 = \u0430\u0441\u0434.\u0442\u0438\u043f();\n              \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = \u0430\u0441\u0434.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432();\n              if (\u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 === '\u043a\u043e\u043c\u0430\u043d\u0434\u0430'){\n                if (\u0430\u0441\u0434.\u043a\u043e\u043c\u0430\u043d\u0434\u0430() === '\u043a\u043e\u043f\u0438\u044f') {\n                  \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043f\u0438\u044f);\n                  \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = 0;\n                }\n              }\n              for(i = 0; i < \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432; ++i) {\n               \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 = \u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(i);\n               \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, i),  \u0441\u043f\u0438\u0441\u043e\u043a);\n              }\n            }\n          };\n          //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0437\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439 = \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438;...');\n          \u0430\u0441\u0434 = \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0410\u0421\u0414(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439);\n          //\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c\u0410\u0421\u0414(\u0430\u0441\u0434, '');\n          \u0441\u043f\u0438\u0441\u043e\u043a = [];\n          \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, -1), \u0441\u043f\u0438\u0441\u043e\u043a);\n          //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0414\u043b\u0438\u043d\u0430 \u0441\u043f\u0438\u0441\u043a\u0430: ' + \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430());\n          for(i = 0; i < \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430(); ++i){\n            \u043f\u0430\u0440\u0430 = \u0441\u043f\u0438\u0441\u043e\u043a[i];\n            //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u043f\u0430\u0440\u0430: [' + \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 + '];');\n            \u0440\u0435\u0437 = \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 == -1 ? \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c() :\n              \u0412\u042b\u0417\u041e\u0412 \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c();\n            \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441, \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0449\u0438\u043a.\u0441\u0434\u0435\u043b\u0430\u0442\u044c\u041a\u043e\u043f\u0438\u044e(\u0440\u0435\u0437));\n          }\n        }\n      }.\u0432\u0441\u0442\u0440\u043e\u0438\u0442\u044c\u041a\u043e\u043f\u0438\u0438;\n    //}} ========= \u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u043e\u0432 ========= }}\n  "),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e()}addMethod(a,l,h){return a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(l,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Dn.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(An.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(We.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(B0.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(h)))))),this}addBookmarksEnvironment(a,l){this.addMethod(a,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445",(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);if(l){let g=new k1(l),m=g.getBookmarks(),v=m.findIndex(_=>_==p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),y=m;if(v>0){y=[];let _=v-1;y.push(...m.slice(0,_));let b=m.splice(v,1);y.push(...b),y.push(...m.slice(_))}g.setBookmarks(y)}return d[0]}),this.addMethod(a,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437",(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);if(l){let g=new k1(l),m=g.getBookmarks(),v=m.findIndex(_=>_==p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),y=m;if(v>=0&&v+1<m.length){y=[],y.push(...m.slice(0,v));let b=m.splice(v,1),C=m.splice(v,1);y.push(...C),y.push(...b),y.push(...m.slice(v))}g.setBookmarks(y)}return d[0]}),this.addMethod(a,"\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(h,d)=>{var p=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);if(l){let g=new k1(l),m=g.getBookmarks(),v=m.findIndex(_=>_==p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),y=m;v>=0&&m.splice(v,1),g.setBookmarks(y)}return d[0]})}run(a,l=null,h=null,d=null){this.\u0434\u0432\u0438\u0436\u043e\u043a\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d||(this.\u0434\u0432\u0438\u0436\u043e\u043a\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d=!0,this.run(this.\u0441\u0442\u0440\u043e\u043a\u0430\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438\u0414\u0432\u0438\u0436\u043a\u0430));let f=l||Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),p=h||Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),g=d||Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),m=this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434.get(a);if(null==m){let _=new BU,b=_.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(a);if(this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438.length>=10){let C=this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438.shift();C&&this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434.delete(C)}this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438.push(a),this.\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438\u0412\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434.set(a,b),m=b,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(_)}let v=m||[],y=null;{let _=this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v),[We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),f,p,g],[We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435"),We.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442")],!0,!0,!1,null));_&&_.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()&&"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e"==_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&(y=g.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"))}return y}}class jz{constructor(a){S(this,"check",void 0),this.check=a}static builder(){return new jz(!1)}setCheck(a){return this.check=a,this}}class Zz extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),this.classes=d}static builder(){return new Zz("",null,null,jz.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let Vit=(()=>{class c{get cbData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{"clr-checkbox":!0}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-checkbox"]],inputs:{data:"data"},decls:6,vars:3,consts:[[1,"clr-form-control","no-print"],[1,"clr-control-container","clr-control-inline"],[1,"clr-checkbox-wrapper"],["type","checkbox","id","vertical-checkbox1","name","checkbox-inline-1","value","option1",3,"checked","ngClass","click"],["for","vertical-checkbox1",1,"clr-control-label"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),ie("click",function(f){return h.onClick(f)}),N(),R(4,"label",4),se(5),N()()()()),2&l&&(F(3),L("checked",h.cbData.classes.check)("ngClass",h.getClasses()),F(2),Ht(h.text))},dependencies:[di,ls]})),c})();class qz{constructor(){S(this,"ordered",!1)}static builder(){return new qz}setOrdered(a){return this.ordered=a,this}}class Xz extends Ci{constructor(a,l,h,d,f){super(a,l,h),S(this,"classes",void 0),S(this,"items",void 0),this.classes=d,this.items=f}static builder(){return new Xz("",null,null,qz.builder(),[])}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setItems(a){return this.items=a,this}addItem(a){return this.items.push(a),this}}function Uit(c,a){if(1&c&&(R(0,"li"),pe(1,"app-add-component",3),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}function zit(c,a){if(1&c&&(R(0,"ol",1),K(1,Uit,2,1,"li",2),N()),2&c){const l=q();L("ngClass",l.getClasses()),F(1),L("ngForOf",l.listData.items)}}function Hit(c,a){if(1&c&&(R(0,"li"),pe(1,"app-add-component",3),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}function $it(c,a){if(1&c&&(R(0,"ul",1),K(1,Hit,2,1,"li",2),N()),2&c){const l=q();L("ngClass",l.getClasses()),F(1),L("ngForOf",l.listData.items)}}let Wit=(()=>{class c{get listData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{list:!0}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-list"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(K(0,zit,2,2,"ol",0),K(1,$it,2,2,"ul",0)),2&l&&(L("ngIf",h.listData.classes.ordered),F(1),L("ngIf",!h.listData.classes.ordered))},dependencies:[di,vi,Sn,rc]})),c})();class M1{static builder(){return new M1}parse(a,l=null){return fragmentsParserStatic.parse(a,{builder:l||new Bz})}}class Yz{constructor(a=!0,l=!0,h=!0,d=!0,f=!0,p=!0){S(this,"slava1Zdrav",void 0),S(this,"slava1Upok",void 0),S(this,"slava2Zdrav",void 0),S(this,"slava2Upok",void 0),S(this,"slava3Zdrav",void 0),S(this,"slava3Upok",void 0),this.slava1Zdrav=a,this.slava1Upok=l,this.slava2Zdrav=h,this.slava2Upok=d,this.slava3Zdrav=f,this.slava3Upok=p}static builder(){return new Yz}setSlava1Zdrav(a){return this.slava1Zdrav=a,this}setSlava1Upok(a){return this.slava1Upok=a,this}setSlava2Zdrav(a){return this.slava2Zdrav=a,this}setSlava2Upok(a){return this.slava2Upok=a,this}setSlava3Zdrav(a){return this.slava3Zdrav=a,this}setSlava3Upok(a){return this.slava3Upok=a,this}isLiveAcceptable(a){let l=!1;return l=a?this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav:this.slava1Upok||this.slava2Upok||this.slava3Upok,l}getLiveValue(){let a=null,l=this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav;return l!==(this.slava1Upok||this.slava2Upok||this.slava3Upok)&&(a=l),a}}class Kz extends Ci{constructor(a,l,h,d,f){super(a,l,h),S(this,"classes",void 0),S(this,"readonly",void 0),S(this,"id",""),S(this,"targetId",""),S(this,"printerHandler",jw.builder()),this.classes=d,this.readonly=f}static builder(){return new Kz("",null,null,Yz.builder(),!1)}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setReadonly(a){return this.readonly=a,this}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}updateClasses(a){return a(this.classes),this}}class Jz extends ku{constructor(a,l,h){super(),S(this,"alertClass",void 0),S(this,"alertShape",void 0),S(this,"noPrint",void 0),this.alertClass=a,this.alertShape=l,this.noPrint=h}static builder(){return new Jz("alert-danger","exclamation-circle",!1)}setAlertClass(a){return this.alertClass=a,this.markChanged(),this}setAlertShape(a){return this.alertShape=a,this.markChanged(),this}setNoPrint(a){return this.noPrint=a,this.markChanged(),this}}class Nc{constructor(a,l,h){S(this,"text",void 0),S(this,"enabled",void 0),S(this,"onClick",void 0),this.text=a,this.enabled=l,this.onClick=h}static builder(){return new Nc("",!0,null)}setText(a){return this.text=a,this}setEnabled(a){return this.enabled=a,this}setOnClick(a){return this.onClick=a,this}runOnClick(){return this.onClick&&this.onClick(this),this}}class Bc extends Ci{constructor(a,l,h,d,f,p,g){super(a,l,h),S(this,"errors",void 0),S(this,"classes",void 0),S(this,"buttons",void 0),S(this,"actions",void 0),this.errors=d,this.classes=f,this.buttons=p,this.actions=g}static builder(){return new Bc("",null,null,[],Jz.builder(),[],[])}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setErrors(a){return this.errors=a,this}setButtons(a){return this.buttons=a,this}setActions(a){return this.actions=a,this}updateClasses(a){return a(this.classes),this}}class e7{constructor(a,l){S(this,"prefix",void 0),S(this,"name",void 0),this.prefix=a,this.name=l}static builder(){return new e7("","")}setPrefix(a){return this.prefix=a,this}setName(a){return this.name=a,this}}class Bn{constructor(a,l){S(this,"index",void 0),S(this,"name",void 0),this.index=a,this.name=l}static builder(){return new Bn(-1,"")}setIndex(a){return this.index=a,this}setName(a){return this.name=a,this}}let GE=(()=>{class c{constructor(){S(this,"statuses",[Bn.builder().setIndex(1).setName("\u0431\u043e\u043b."),Bn.builder().setIndex(2).setName("\u0431."),Bn.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),Bn.builder().setIndex(2).setName("\u0442.\u0431."),Bn.builder().setIndex(3).setName("\u043f\u0443\u0442."),Bn.builder().setIndex(3).setName("\u043f."),Bn.builder().setIndex(4).setName("\u0437\u043a."),Bn.builder().setIndex(5).setName("\u0437\u0430\u0431\u043b.")]),S(this,"statusesWiman",[Bn.builder().setIndex(1).setName("\u0431\u043e\u043b."),Bn.builder().setIndex(2).setName("\u0431."),Bn.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),Bn.builder().setIndex(2).setName("\u0442.\u0431."),Bn.builder().setIndex(3).setName("\u043f\u0443\u0442."),Bn.builder().setIndex(3).setName("\u043f."),Bn.builder().setIndex(4).setName("\u0437\u043a."),Bn.builder().setIndex(5).setName("\u043d\u0435\u043f\u0440\u0430\u0437\u0434."),Bn.builder().setIndex(6).setName("\u0437\u0430\u0431\u043b.")]),S(this,"statusesDead",[Bn.builder().setIndex(1).setName("\u043d.\u043f."),Bn.builder().setIndex(2).setName("\u043f.\u043f."),Bn.builder().setIndex(3).setName("\u0443\u0431.")]),S(this,"prefixes",[Bn.builder().setIndex(1).setName("\u043f\u0430\u0442\u0440."),Bn.builder().setIndex(2).setName("\u0441\u0445\u0438\u043c\u0438\u0442\u0440."),Bn.builder().setIndex(3).setName("\u043c\u0438\u0442\u0440."),Bn.builder().setIndex(4).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f."),Bn.builder().setIndex(5).setName("\u0430\u0440\u0445\u0438\u0435\u043f."),Bn.builder().setIndex(6).setName("\u0441\u0445\u0438\u0435\u043f."),Bn.builder().setIndex(7).setName("\u0435\u043f."),Bn.builder().setIndex(8).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c."),Bn.builder().setIndex(9).setName("\u0430\u0440\u0445\u0438\u043c."),Bn.builder().setIndex(10).setName("\u043f\u0440\u043e\u0442\u043e\u043f\u0440."),Bn.builder().setIndex(11).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),Bn.builder().setIndex(12).setName("\u0438\u0433\u0443\u043c."),Bn.builder().setIndex(13).setName("\u043f\u0440\u043e\u0442."),Bn.builder().setIndex(14).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c."),Bn.builder().setIndex(15).setName("\u0438\u0435\u0440\u043e\u043c."),Bn.builder().setIndex(16).setName("\u0438\u0435\u0440."),Bn.builder().setIndex(17).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434."),Bn.builder().setIndex(18).setName("\u0430\u0440\u0445\u0438\u0434."),Bn.builder().setIndex(19).setName("\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a."),Bn.builder().setIndex(20).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434."),Bn.builder().setIndex(21).setName("\u0438\u0435\u0440\u043e\u0434."),Bn.builder().setIndex(22).setName("\u0434\u0438\u0430\u043a."),Bn.builder().setIndex(23).setName("\u0441\u0445\u0438\u043c."),Bn.builder().setIndex(24).setName("\u043c\u043e\u043d."),Bn.builder().setIndex(25).setName("\u0438\u043d."),Bn.builder().setIndex(26).setName("\u0438\u043f\u043e\u0434\u0438\u0430\u043a."),Bn.builder().setIndex(28).setName("\u0447\u0442."),Bn.builder().setIndex(27).setName("\u043f\u043e\u0441\u043b."),Bn.builder().setIndex(29).setName("\u043e\u0442\u0440."),Bn.builder().setIndex(30).setName("\u043c\u043b."),Bn.builder().setIndex(31).setName("\u0432.")]),S(this,"prefixesWiman",[Bn.builder().setIndex(1).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),Bn.builder().setIndex(2).setName("\u0438\u0433\u0443\u043c."),Bn.builder().setIndex(3).setName("\u0441\u0445\u0438\u043c."),Bn.builder().setIndex(4).setName("\u043c\u043e\u043d."),Bn.builder().setIndex(5).setName("\u0438\u043d."),Bn.builder().setIndex(6).setName("\u043c\u0430\u0442."),Bn.builder().setIndex(7).setName("\u043f\u043e\u0441\u043b."),Bn.builder().setIndex(8).setName("\u043e\u0442\u0440."),Bn.builder().setIndex(9).setName("\u043c\u043b."),Bn.builder().setIndex(10).setName("\u0432.")])}isKnownPrefix(l){let h=!1,d=f=>f.findIndex(p=>p.name===l)>=0;return h=h||d(this.prefixes),h=h||d(this.prefixesWiman),h=h||d(this.statuses),h=h||d(this.statusesWiman),h}getName(l){const h=l.split(/\s/),d=[];return h.forEach(f=>{this.isKnownPrefix(f)||d.push(f)}),d.join(" ")}getNameFrom(l,h){let d="";return h.forEach(f=>{f.index===l&&(d=f.name)}),d}getPrefixByName(l,h){return this.getIndexByName(l,h?this.prefixes:this.prefixesWiman)}getStatusByName(l,h){return this.getIndexByName(l,h?this.statuses:this.statusesWiman)}getPrefix(l,h=!0,d=!0){return this.getNameFrom(l,h?this.prefixes:this.prefixesWiman)}getStatus(l,h=!0,d=!0){return this.getNameFrom(l,d?h?this.statuses:this.statusesWiman:this.statusesDead)}getIndexByName(l,h){const d=l.split(/\s/);let f=0;return d.forEach(p=>{h.forEach(g=>{g.name===p&&f<g.index&&(f=g.index)})}),f}getPrefixedName(l){let h=l.split(/\s/),d="",f="",p=[...this.prefixes,...this.prefixesWiman,...this.statuses,...this.statusesWiman,...this.statusesDead];return h.forEach((g,m)=>{let v=m+1==h.length?"":" ";p.findIndex(y=>y.name==g)>=0?d+=g+v:f+=g+v}),new e7(d,f)}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class t7{constructor(a="label-warning",l="label-success",h=!1){S(this,"labelSelected",void 0),S(this,"labelNormal",void 0),S(this,"noPrint",void 0),this.labelSelected=a,this.labelNormal=l,this.noPrint=h}static builder(){return new t7}setLabelSelected(a){return this.labelSelected=a,this}setLabelNormal(a){return this.labelNormal=a,this}setNoPrint(a){return this.noPrint=a,this}}class ba{constructor(a,l,h){S(this,"text",void 0),S(this,"tag",void 0),S(this,"selected",void 0),S(this,"getSpanClassDetector",_a.builder()),this.text=a,this.tag=l,this.selected=h}static builder(){return new ba("","",!1)}setText(a){return this.text=a,this}setTag(a){return this.tag=a,this}setSelected(a){return this.selected=a,this}}class Mu extends Ci{constructor(a,l,h,d,f){super(a,h,d),S(this,"items",void 0),S(this,"classes",void 0),this.items=l,this.classes=f}static builder(){return new Mu("",[],null,null,t7.builder())}setText(a){return super.setText(a)}setItems(a){return this.items=a,this}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}}class n7{constructor(){S(this,"bookSettings",!0),S(this,"calculatorSettings",!1),S(this,"memorialSettings",!1)}static builder(){return new n7}clear(){this.bookSettings=!1,this.calculatorSettings=!1,this.memorialSettings=!1}setBookSettings(a){return a&&this.clear(),this.bookSettings=a,this}setCalculatorSettings(a){return a&&this.clear(),this.calculatorSettings=a,this}setMemorialSettings(a){return a&&this.clear(),this.memorialSettings=a,this}}class Th extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),this.classes=d}static builder(){return new Th("",null,null,n7.builder().setBookSettings(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}}class i7{constructor(a,l,h){S(this,"name",void 0),S(this,"pvalue",void 0),S(this,"onChange",void 0),this.name=a,this.pvalue=l,this.onChange=h}get value(){return this.pvalue}set value(a){this.pvalue=a,this.onChange&&this.onChange()}}let wi=(()=>{class c{constructor(){S(this,"properties",[]),S(this,"onChange",null)}setOnChangeCallback(l){this.onChange=l}load(l){this.properties=[],l.split(";").forEach(d=>{const f=d.split(":");if(2===f.length)this.properties.push(new i7(f[0].trim(),f[1].trim(),this.onChange));else if(1===f.length){let p=f[0].trim();if(p){let g=this.properties.findIndex(m=>m.name==c.TEXT);g>=0?this.properties[g].value+=p:this.properties.push(new i7(c.TEXT,p,this.onChange))}}})}toString(){let l="";return this.properties.forEach(h=>{h.value&&(l&&(l+=";"),l+=h.name+":"+h.value)}),l}pushNew(l,h){this.properties.push(new i7(l,h,this.onChange))}getValue(l,h){let d=null;return this.properties.forEach(f=>{f.name===l&&(d=f.value)}),d??(h?d:"")}setValue(l,h){let d=!1;this.properties.forEach(f=>{f.name===l&&(f.value=h,d=!0)}),d||this.pushNew(l,h)}getOffset(){const l=this.getValue(c.OFFSET);let h=l?+l:-1;return Number.isInteger(h)||(h=-1),h}isLive(){const l=this.getValue(c.STATUS,!0);return null==l?null:!(l===c.STATUS_DEAD||l===c.STATUS_DEAD_WOMAN)}isMan(){const l=this.getValue(c.GENDER,!0);return null==l?null:l!==c.GENDER_WOMAN}}return S(c,"OFFSET","\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435"),S(c,"ORDER","\u043f\u043e\u0440\u044f\u0434\u043e\u043a"),S(c,"STATUS","\u0441\u0442\u0430\u0442\u0443\u0441"),S(c,"STATUS_LIVE","\u0436\u0438\u0432\u043e\u0439"),S(c,"STATUS_LIVE_WOMAN","\u0436\u0438\u0432\u0430\u044f"),S(c,"STATUS_DEAD","\u0443\u0441\u043e\u043f\u0448\u0438\u0439"),S(c,"STATUS_DEAD_WOMAN","\u0443\u0441\u043e\u043f\u0448\u0430\u044f"),S(c,"GENDER","\u043f\u043e\u043b"),S(c,"GENDER_MAN","\u043c\u043e\u0436\u0441\u043a\u043e\u0439"),S(c,"GENDER_WOMAN","\u0436\u0435\u043d\u0441\u043a\u0438\u0439"),S(c,"REF_ID","\u0441\u0441\u044b\u043b\u043a\u0430"),S(c,"TEXT","\u0442\u0435\u043a\u0441\u0442"),S(c,"UNION","\u043e\u0431\u044a\u0435\u0434\u0435\u043d\u0435\u043d\u043e"),S(c,"TAGS","\u0442\u0435\u0433\u0438"),S(c,"YES","\u0434\u0430"),S(c,"NO","\u043d\u0435\u0442"),c})();class r7{constructor(){}static builder(){return new r7}}class s7 extends Ci{constructor(a,l,h,d,f){super(a,l,h),S(this,"classes",void 0),S(this,"person",void 0),this.classes=d,this.person=f}static builder(){return new s7("",null,null,r7.builder(),new ri(-1,"","",-1,!0,""))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setPerson(a){return this.person=a,this}updateClasses(a){return a(this.classes),this}}class Git{constructor(a,l){S(this,"index",void 0),S(this,"include",void 0),this.index=a,this.include=l}setInclude(a){return this.include=!!a,this}}class Qit{constructor(a,l,h){S(this,"left",void 0),S(this,"right",void 0),S(this,"everyYear",void 0),this.left=a,this.right=l,this.everyYear=h}}class jit{constructor(a,l,h){S(this,"date",void 0),S(this,"month",void 0),S(this,"year",void 0),this.date=a,this.month=l,this.year=h}}class Zit{constructor(a,l){S(this,"date",void 0),S(this,"intervals",void 0),this.date=a,this.intervals=l}eventDate(a=0,l=0){let h=new Date;return h.setFullYear(+this.date.year+l,+this.date.month-1,+this.date.date),h.setDate(h.getDate()+a),h}isToday(){if(this.isTodayDate(this.eventDate()))return!0;let a=!1;return this.intervals.forEach(l=>{this.isTodayInterval(l)&&(a=!0)}),a}isTodayDate(a){let l=new Date;return a.getFullYear()==l.getFullYear()&&a.getMonth()==l.getMonth()&&a.getDate()==l.getDate()}isLess(a,l,h=!1){return!h&&a.getFullYear()<l.getFullYear()||!(!h&&a.getFullYear()>l.getFullYear())&&(a.getMonth()<l.getMonth()||!(a.getMonth()>l.getMonth())&&a.getDate()<l.getDate())}isEquals(a,l,h=!1){return(h||a.getFullYear()==l.getFullYear())&&a.getMonth()==l.getMonth()&&a.getDate()==l.getDate()}isTodayInterval(a){let l=a.everyYear?[-1,0,1]:[0],h=!1,d=new Date;return l.forEach(f=>{if(!h){let p=this.eventDate(0,f),g=this.eventDate(a.left.index,f),m=this.eventDate(a.right.index,f);if(g.getTime()>m.getTime()){let D=g;g=m,m=D}let v=a.everyYear&&g.getFullYear()<p.getFullYear(),y=a.everyYear&&m.getFullYear()>p.getFullYear(),_=this.isLess(g,d,a.everyYear),b=this.isLess(d,m,a.everyYear),C=a.left.include&&this.isEquals(g,d,a.everyYear),x=a.right.include&&this.isEquals(d,m,a.everyYear),w=_||C,O=b||x;(!v&&!y&&w&&O||(v||y)&&y!=v&&(O||w)||v&&y&&(!O||!w))&&(h=!0)}}),h}}class qit{newEvent(a,l){return new Zit(a,l)}newEventDate(a,l,h){return new jit(a,l,h)}newDaysInterval(a,l,h){return new Qit(a,l,h)}newDay(a,l){return new Git(a,l)}}let QE=(()=>{class c{parseEvent(l){return dateEventsParserStatic.parse(l,{builder:new qit})}isToday(l){let h=new wi;h.load(l);let d=!1;return h.properties.forEach(f=>{if(!d)try{let p=this.parseEvent(f.value);p&&p.isToday()&&(d=!0)}catch{}}),d}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class Xit{constructor(a){S(this,"cacheMap",new Map),S(this,"getter",void 0),this.getter=a}setGetter(a){return this.getter=a,this}getCachedResult(a,l,h){let d=this.cacheMap.get(a),f=d?.get(l),p=f?.get(h);return null!=p||(p=this.getter(a,l,h),f||(f=new Map),f.set(h,p),d||(d=new Map),d.set(l,f),this.cacheMap.set(a,d)),p}clear(){return this.cacheMap.clear(),this}}let jE=(()=>{class c{constructor(l,h,d,f,p,g){S(this,"authSvc",void 0),S(this,"memorialsSvc",void 0),S(this,"personsSvc",void 0),S(this,"config",void 0),S(this,"tagsSvc",void 0),S(this,"dateEventsSvc",void 0),S(this,"serviceReady",!1),S(this,"personsCache",new Xit((m,v,y)=>this.getChachedPersonsDirect(m,v,y))),this.authSvc=l,this.memorialsSvc=h,this.personsSvc=d,this.config=f,this.tagsSvc=p,this.dateEventsSvc=g}getChachedPersonsDirect(l,h,d){let f=this.memorials?.items.find(p=>p.name==l);if(this.persons){let p=!!f&&this.tagsSvc.tagsHasFlag(f.tags,"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"),g=!!f&&this.tagsSvc.tagsHasFlag(f.tags,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"),m=this.persons.items;return h&&(m=m.filter(y=>null==d||d==y.live)),m.filter(y=>g||!f||!!this.tagsSvc.intersectTags(y.tags,f.tags)).filter(y=>!p||this.dateEventsSvc.isToday(y.description))}return[]}get isReady(){return this.serviceReady}setup(l){this.doLogin(l)}doLogout(){this.authSvc.isLoggedIn().then(l=>{l.result?this.authSvc.logout().then(h=>{this.serviceReady=!1,this.config.authId=""}):(this.serviceReady=!1,this.config.authId="")})}reloadMemorials(l){this.memorialsSvc.reloadMemorials(h=>{h&&this.personsSvc.reloadPersons(),l&&l(this.serviceReady)})}doLogin(l){this.authSvc.isLoggedIn().then(h=>{h.result?(this.serviceReady=!0,this.reloadMemorials(l)):this.authSvc.login().then(d=>{if(d.result){let f="hramvkostino",p="hramvkostino";this.authSvc.requestForUser(f,p).then(g=>{this.serviceReady=g.valid,this.config.authId=g.authId,this.config.authBody=btoa(f+":"+p),this.reloadMemorials(l)})}})})}get memorials(){return this.memorialsSvc.getMemorials()}get persons(){return this.personsSvc.getPersonsDirect()}getAuth(){return this.authSvc}getMemorials(){return this.memorialsSvc}getPersons(){return this.personsSvc}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Oh),Pe(C1),Pe(Sg),Pe(ln),Pe(oa),Pe(QE))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class o7{static builder(){return new o7}newLine(){return u7.builder()}newMemorial(){return c7.builder()}newComment(){return l7.builder()}}var Fd=(()=>(function(c){c[c.Memorial=0]="Memorial",c[c.Line=1]="Line",c[c.Comment=2]="Comment"}(Fd||(Fd={})),Fd))();class a7{constructor(a){S(this,"type",void 0),this.type=a}toString(){return""}}class l7 extends a7{constructor(a){super(Fd.Comment),S(this,"text",void 0),this.text=a}static builder(){return new l7("")}setText(a){return this.text=a,this}toString(){return`/*${this.text}*/`}}class c7 extends a7{constructor(a,l){super(Fd.Memorial),S(this,"name",void 0),S(this,"tags",void 0),this.name=a,this.tags=l}static builder(){return new c7("","")}setName(a){return this.name=a,this}setTags(a){return this.tags=a,this}toString(){return`[${this.name}${this.tags?":"+this.tags:""}]`}}class u7 extends a7{constructor(a,l,h,d){super(Fd.Line),S(this,"name",void 0),S(this,"description",void 0),S(this,"offset",void 0),S(this,"live",void 0),this.name=a,this.description=l,this.offset=h,this.live=d}static builder(){return new u7("","",-1,!0)}setName(a){return this.name=a,this}setDescription(a){return this.description=a,this}setOffset(a){return this.offset=a,this}setLive(a){return this.live=a,this}toString(){return`${this.name}(${this.description?this.description:""})${null!=this.offset&&this.offset>=0?" "+this.offset:""}${this.live?"":" \u0443\u0441\u043e\u043f\u0448\u0438\u0439"}`}}class zfe{static parse(a){return personsParserStatic.parse(a,{builder:o7.builder()})}}class op{static newFrom(a){return new op(a.name,a.value)}get name(){return this.names?this.names.join(":"):""}set name(a){this.names=[a]}constructor(a,l,h='"'){S(this,"value",void 0),S(this,"simbol",void 0),S(this,"names",null),this.value=l,this.simbol=h,this.names=[a],this.value=l}toString(){return this.name+"="+this.simbol+this.value+this.simbol}}class Hfe{constructor(a="  ",l=!0){S(this,"prefix",void 0),S(this,"prettyPrint",void 0),S(this,"offset",0),this.prefix=a,this.prettyPrint=l}incOffset(){return++this.offset,this.getOffset()}decOffset(){return--this.offset,this.getOffset()}getOffset(){let a="";for(let l=0;l<this.offset;++l)a+=this.prefix;return a}}class Ca{static newFrom(a){const l=[];a.attributes&&a.attributes.forEach(d=>{l.push(op.newFrom(d))});const h=[];return a.children&&a.children.forEach(d=>{h.push(Ca.newFrom(d))}),new Ca(a.name,l,h,a.text)}constructor(a,l,h,d){S(this,"name",void 0),S(this,"attributes",void 0),S(this,"children",void 0),S(this,"text",void 0),this.name=a,this.attributes=l,this.children=h,this.text=d,this.name=a,this.attributes=l,this.children=h,this.text=d}setAttributes(a){return this.attributes=a,this}setChildren(a){return this.children=a,this}toString(a=null){let l="";if(this.name&&(l+="<"+this.name,this.attributes&&this.attributes.forEach(h=>{l+=" "+h.toString()}),l+=">"),this.children&&this.children.length){let h=this.children.length>1||!!this.children[0].name;this.children.forEach(d=>{h&&a?.prettyPrint&&(l+="\r\n",l+=a.incOffset()),l+=d.toString(a),h&&a?.prettyPrint&&a.decOffset()}),h&&a?.prettyPrint&&(l+="\r\n",l+=a.getOffset())}return l+=this.name?"</"+this.name+">":this.text,l}}let $fe=(()=>{class c{parseXml(l){const h=xmlParserStatic.parse(l),d=[];return h.forEach(f=>{d.push(Ca.newFrom(f))}),d}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class Wfe{constructor(a,l){S(this,"person",void 0),S(this,"props",void 0),this.person=a,this.props=l}}class h7{constructor(a,l){S(this,"memorial",void 0),S(this,"lines",void 0),this.memorial=a,this.lines=l}static builder(){return new h7(null,[])}setMemorial(a){return this.memorial=a,this}setLines(a){return this.lines=a,this}addLine(a){return this.lines.push(a),this}toString(){return`${this.memorial?.toString()}\n${this.lines.map(a=>a.toString()).join("\r\n")}`}}let d7=(()=>{class c{constructor(l,h,d,f,p,g){S(this,"mems",void 0),S(this,"ks",void 0),S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"xml",void 0),S(this,"nameSvc",void 0),this.mems=l,this.ks=h,this.config=d,this.uiConfig=f,this.xml=p,this.nameSvc=g}addPersons(l,h,d,f=!0,p=null,g=0,m=1){try{this.addPersonsDirect(l,h,d,f,p)}catch(v){this.config.addAlert(new Pr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+v,"OK",180)),p&&p()}}previewPersons(l){const h=zfe.parse(l);let d=[],f=null;return h.forEach(p=>{switch(p.type){case Fd.Memorial:{let g=p;f=h7.builder().setMemorial(g),d.push(f)}break;case Fd.Line:f?.addLine(p)}}),d}addPersonsDirect(l,h,d,f=!0,p=null,g=0,m=1){const v=zfe.parse(h);let y=[],_="",b=new Map,C=this.mems.getActivePredefinedMemorialsRaw(),x=!1;v.forEach(w=>{switch(w.type){case Fd.Memorial:_=w.name,x=null!=C.find(D=>D==_);break;case Fd.Line:{let O=w,D=l(_);if(D>=0){const T=new wi;T.load(O.description?O.description:"");const M=T.getOffset(),k=O.live||T.isLive();T.setValue(wi.ORDER,""),T.setValue(wi.OFFSET,""),T.setValue(wi.STATUS,""),T.setValue(wi.UNION,"");let E=d(_);{let $=T.getValue(wi.TAGS);$&&$.split(",").forEach(J=>{let ee=J.trim();ee&&(E=oa.addTagToTags(E,ee))})}const P=new Tnt(D,-1,O.name,T.toString(),M,k??!1,E);let V=T.getValue(wi.REF_ID),I=!1,U=$=>{let H,J=this.getNormalName(P.name);if(b.forEach(ee=>{J==this.getNormalName(ee.person.name)&&T.getValue(wi.TEXT)&&T.getValue(wi.TEXT)===ee.props.getValue(wi.TEXT)&&(H=ee.person)}),H){if(!oa.tagsHasFlag(H.tags,_)){H.name=this.mergeNames(H.name,P.name),H.tags=oa.addTagToTags(H.tags,_);const ee=new wi;ee.load(H.description),ee.getValue(wi.UNION)!=wi.YES&&ee.setValue(wi.UNION,wi.YES),H.description=ee.toString(),I=!0}}else b.set($||"#"+b.size,new Wfe(P,T))};V?b.has(V)?(b.get(V).person.tags+=","+_,I=!0):b.set(V,new Wfe(P,T)):this.uiConfig.ui.mergeNameOnImport.getBooleanValue()&&U(""),!I&&!x&&y.push(P)}}}}),this.addPersonsByPersons(y,p)}addPersonsByPersons(l=[],h=null){l.length?this.ks.newPersons(l).then(d=>{setTimeout(()=>{this.config.addAlert(d&&d.success?new Pr("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: "+l.length+` ${c.getWordName(l.length)}.`,"OK",30):new Pr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+(d?d.error:"?"),"OK",180)),h&&h()},0)},d=>{this.config.addAlert(new Pr("\u041e\u0448\u0438\u0431\u043a\u0430: "+d,"OK",180))}):(this.config.addAlert(new Pr("\u041f\u0435\u0440\u0441\u043e\u043d \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.","OK",60)),h&&h())}static getWordName(l){let h="";switch(Math.floor(l%10)){case 1:h="\u0438\u043c\u044f";break;case 2:case 3:case 4:h="\u0438\u043c\u0435\u043d\u0438";break;default:h="\u0438\u043c\u0451\u043d"}return h}addPersonsOld(l,h,d,f=!0,p=null,g=0,m=1){const v=personsParserStatic.parse(h),y={i:0,memorialName:""},_=new wi;this.config.waitingIOOperationValueMax=v.length*m;const b=C=>{if(this.config.waitingIOOperationValue=y.i+v.length*g,C&&!C.success)return this.config.addAlert(new Pr(C.error,"OK",30)),this.endIOWaiting(),void p?.();if(y.i>=v.length)this.endIOWaiting(),p?.();else{const x=v[y.i];if(++y.i,void 0!==x.memorial)y.memorialName=x.memorial,setTimeout(()=>{b(C)},0);else if(void 0===x.comment){let w=l(y.memorialName);if(w>=0){_.load(x.description?x.description:"");const O=_.getOffset(),D=x.live||_.isLive();_.setValue(wi.ORDER,""),_.setValue(wi.OFFSET,""),_.setValue(wi.STATUS,"");const T=new ri(-1,x.name,_.toString(),O,D,d(y.memorialName));this.ks.newPerson(w,T).then(M=>{setTimeout(()=>{b(M)},0)},M=>{setTimeout(()=>{b(null)},0)})}else setTimeout(()=>{b(C)},0)}else b(null)}};b(null),this.beginIOWaiting(f,v.length*g)}beginIOWaiting(l,h=0){this.config.incWaitingIO(),this.config.waitingIOOperationValue=h}endIOWaiting(){this.config.decWaitingIO()}onChildren(l,h){l&&l.forEach(d=>{h&&h(d)})}getTextFromTag(l){let h="";return l&&(l.text?h+=l.text:l.children.forEach(d=>{d.text&&(h+=d.text)})),h}onAttribute(l,h,d){l&&l.forEach(f=>{f.name===h&&d&&d(f)})}sortByOrd(l){let h=[];return h=l.slice(0),h.sort((d,f)=>{let p=0,g=0;return this.onAttribute(d.attributes,"ord",m=>{p=+m.value}),this.onAttribute(f.attributes,"ord",m=>{g=+m.value}),p-g}),h}readTagAsText(l){let h=l.text?l.text:"";return this.onChildren(l.children,d=>{h+=this.readTagAsText(d)}),h}convertRecord(l,h){if("record"!==l.name)return"";let d="",f="",p="",g=!0,m="";if(this.onAttribute(l.attributes,"gender",v=>{g="true"===v.value}),this.onAttribute(l.attributes,"prefix",v=>{m=this.nameSvc.getPrefix(+v.value,g,h)}),this.onAttribute(l.attributes,"status",v=>{let y=this.nameSvc.getStatus(+v.value,g,h);y&&(m=y+(m&&" "+m))}),this.onChildren(l.children,v=>{"name"===v.name?f=this.readTagAsText(v):"comment"===v.name&&(p=this.readTagAsText(v))}),f){m&&(d+=m+" "),d+=f+"([";const v=new wi;v.load(p),v.setValue(wi.GENDER,g?"":wi.GENDER_WOMAN),d+=v.toString()+"])",h||(d+=" "+(g?wi.STATUS_DEAD:wi.STATUS_DEAD_WOMAN))}return d&&(d+="\n"),d}convertMemorial(l){let h="",d=!0;return this.onAttribute(l.attributes,"health",f=>{d="true"===f.value}),this.onChildren(l.children,f=>{"records"===f.name&&this.onChildren(this.sortByOrd(f.children),p=>{h+=this.convertRecord(p,d)})}),h}convertXmlToString(l){const h=this.xml.parseXml(l);return this.convertTagsToString(h)}convertTagsToString(l){let h="";return l.forEach(d=>{"memorials"===d.name&&this.onChildren(d.children,f=>{let p="";this.onChildren(f.children,g=>{"notes"===g.name&&(p=this.readTagAsText(g))}),f.children.forEach(g=>{"name"===g.name&&(h+="["+this.getTextFromTag(g)+(p?":"+p:"")+"]\n")}),h+=this.convertMemorial(f)})}),h}getNormalName(l){let h=!1;return l.split(/[ \t\r\n]+/).map(f=>f.trim()).filter(f=>!!f).filter(f=>h?"":(h=h||!f.endsWith("."),f)).filter(f=>!!f).join(" ")||l}getPrefixes(l){let h=!1;return l.filter(d=>h||(h=h||!d.endsWith("."))?"":d).filter(d=>!!d)}getName(l){let h=!1;return l.filter(d=>h?"":(h=h||!d.endsWith("."))?d:"").filter(d=>!!d)}getPostfixes(l){let h=!1;return l.filter(d=>h?d:(h=h||!d.endsWith("."),"")).filter(d=>!!d)}mergeNames(l,h){let d=l.split(/[ \t\r\n]+/).map(C=>C.trim()).filter(C=>!!C),f=h.split(/[ \t\r\n]+/).map(C=>C.trim()).filter(C=>!!C),p=this.getPrefixes(d).join(" "),g=this.getName(d).join(" "),m=this.getPostfixes(d).join(" "),v=this.getPrefixes(f).join(" "),y=this.getName(f).join(" "),_=this.getPostfixes(f).join(" ");if(g!=y||p!=v)throw new Error(`\u041d\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430: '${l}' != '${h}'.`);let b=[];return p&&b.push(p),g&&b.push(g),(m||_)&&(m?(b.push(m),_&&!m.includes(_)&&b.push(_)):_&&b.push(_)),b.join(" ")}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(C1),Pe(Sg),Pe(ln),Pe(ii),Pe($fe),Pe(GE))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),Gfe=(()=>{class c{constructor(l,h){S(this,"config",void 0),S(this,"memXmlLoader",void 0),S(this,"text",""),S(this,"memName",""),this.config=l,this.memXmlLoader=h}onLoadAnyFile(l,h,d){this.memName=h,l.name.toLowerCase().endsWith(".csv")||l.name.toLowerCase().endsWith(".tsv")?this.onLoadXsvFile(l,d):this.onLoadXmlFile(l,d)}convertXsvToString(l,h,d=!0){let f=(b,C)=>{let x=b.split(C);for(let w=0;w<x.length;w++)x[w]=x[w].trim();return x},g=f(l,"\n"),m=0,v="",y=[],_=[];{let b=f(g[m],h);if(2!=b.length||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"!=b[0]||"\u0422\u0435\u0433\u0438"!=b[1])return this.config.addAlert(new Pr("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(++m;g.length>m&&g[m];){b=f(g[m++],h);let C=b[0].trim(),x=b[1].trim();_.push(C),y.push(x),d&&(v+=`[${C}${x?":"+x:""}]\r\n`)}if(++m,b=f(g[m++],h),5!=b.length||"\u0418\u043c\u044f"!=b[0]||"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"!=b[1]||"\u0421\u0442\u0430\u0442\u0443\u0441"!=b[2]||"\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"!=b[3]||"\u0422\u0435\u0433\u0438"!=b[4])return this.config.addAlert(new Pr("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(d&&(v+="[\u0432\u0441\u0435]\r\n");g.length>m&&g[m];){b=f(g[m++],h);let C=b[4].split(","),x=!1;if(C&&C.forEach(O=>{(!this.memName||O==this.memName)&&(x=!0)}),!x)continue;v+=b[0],v+="(";let w=v.length;v+=b[1],+b[3]>=0&&(b[1]&&(v+=";"),v+=wi.OFFSET+":",v+=b[3]),v.length!=w&&(v+=";"),v+=wi.TAGS+":",v+=b[4],v+=")",b[2].toLowerCase()===wi.STATUS_LIVE||b[2].toLowerCase()===wi.STATUS_LIVE_WOMAN||(v+=" "+wi.STATUS_DEAD),v+="\r\n"}}return v}onLoadXsvFile(l,h){if(!l)return;const d=new FileReader;d.onload=f=>{try{this.text=this.convertXsvToString(d.result.toString(),l.name.toLowerCase().endsWith(".csv")?";":"\t")}catch(p){this.config.addAlert(Pr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+p,"OK",30))}h&&h(this.text)},d.readAsText(l)}makeHtml(l){return l.replace(/(?:\r\n|\r|\n)/g,"<br />\n")}onLoadXmlFile(l,h){if(!l)return;const d=new FileReader;d.onload=f=>{try{let p=l.name.toLowerCase().endsWith(".xml");this.text=p?this.memXmlLoader.convertXmlToString(d.result.toString()):d.result.toString()}catch(p){this.config.addAlert(Pr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+p,"OK",30))}h&&h(this.text)},d.readAsText(l)}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ln),Pe(d7))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class ZE{constructor(a,l){S(this,"repeatCount",void 0),S(this,"firstMemorialName",void 0),this.repeatCount=a,this.firstMemorialName=l}static builder(){return new ZE(0,"")}setRepeatCount(a){return this.repeatCount=a,this}setFirstMemorialName(a){return this.firstMemorialName=a,this}}let qE=(()=>{class c{constructor(l){S(this,"dataSvc",void 0),this.dataSvc=l}getRepeatCountAndFirstMemorial(l){if(null==this.dataSvc.memorials)return ZE.builder();let h=oa.removeModificators(l).split(","),d=this.dataSvc.memorials.items.map(p=>p.name),f=h.map(p=>({t:p,i:d.indexOf(p)})).filter(p=>p.i>=0);return 1==f.length&&(f=[]),f.sort((p,g)=>p.i-g.i),ZE.builder().setRepeatCount(f.length).setFirstMemorialName(f.length?f[0].t:"")}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(jE))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class Yit{constructor(a,l,h){S(this,"memorial",void 0),S(this,"setName",void 0),S(this,"getName",void 0),this.memorial=a,this.setName=l,this.getName=h}}let Qfe=(()=>{class c{constructor(l,h,d,f){S(this,"mems",void 0),S(this,"nameSvc",void 0),S(this,"repeatCounterSvc",void 0),S(this,"uiConfig",void 0),this.mems=l,this.nameSvc=h,this.repeatCounterSvc=d,this.uiConfig=f}getMemorialsXmlString(l,h,d,f=!1){let p="<?xml version='1.0' encoding='UTF-8' ?>\n",g=null;h.forEach((v,y)=>{let _=this.generateMemorials(l,v,d[y],f);_&&(null==g?g=_:g.children.push(..._.children))}),null==g&&(g=new Ca("memorials",[],[],""));let m=new Hfe;return p+=g.toString(m),p}getPersonsXmlString(l,h,d,f=!1){let p="<?xml version='1.0' encoding='UTF-8' ?>\n",g=this.generateMemorials(l,h,d,f),m=new Hfe;return p+=g.toString(m),p}generateMemorials(l,h,d,f=!1){let p=new Ca("memorials",[],[],""),g=[],m=v=>{v&&v.memorial.children.length&&(p.children.push(v.memorial),g.push(v))};return m(this.getMemorial(l,h,d,!0,1,!0,f)),m(this.getMemorial(l,h,d,!1,2,!0,f)),p}getDescription(l,h,d=!1,f="",p=!1){const g=new wi;g.load(l.description),g.setValue(wi.OFFSET,l.offset<0?"":""+l.offset),g.setValue(wi.ORDER,""),g.setValue(wi.STATUS,""),d&&g.setValue(wi.GENDER,""),f&&g.setValue(wi.REF_ID,f);let m=g.getValue(wi.TEXT);return p?m||"":g.toString()}getMemorial(l,h,d,f,p,g=!0,m=!1){const v=h;let y=null,_=new Ca("memorial",[new op("health",""+f),new op("ord",""+p)],[new Ca("name",[],[y=new Ca("",[],[],v||"\u0432\u0441\u0435")],""),new Ca("notes",[],[new Ca("",[],[],m?"":d)],"")],""),b=new Ca("records",[],[],"");_.children.push(b);let x=this.mems.getActivePredefinedMemorialsRaw();return l.filter(w=>!h||oa.tagsHasFlag(w.tags,h)).forEach((w,O)=>{const D=w.tags.split(",");let T=!1;if(D.forEach(M=>{null==x.find(k=>k==M)&&(T=!0)}),T&&w.live===f){let M=this.isMan(w),k=this.repeatCounterSvc.getRepeatCountAndFirstMemorial(w.tags),E=this.uiConfig.ui.addCommentToName.getBooleanValue()&&this.uiConfig.ui.addRepeatCommentToName.getBooleanValue(),P=k.repeatCount,V=E&&k.repeatCount>0&&h!=k.firstMemorialName,I=this.nameSvc.getName(w.name);b.children.push(this.newRecord((V?"-":"")+I+(E&&P>0?(I?" ":"")+P:""),M,O+1,this.nameSvc.getStatusByName(w.name,M),this.nameSvc.getPrefixByName(w.name,M),this.getDescription(w,O,!0,(w=>{let O=l.findIndex(D=>D===w);return O>=0?""+O:""})(w),m)))}}),g||b.children.length>0?new Yit(_,w=>{y&&(y.text=w)},()=>y?y.text:""):null}isMan(l){const h=new wi;h.load(l.description);let d=h.isMan();return null==d||d}newRecord(l,h,d,f,p,g){return new Ca("record",[new op("gender",`${h}`),new op("ord",`${d}`),new op("status",`${f}`),new op("prefix",`${p}`)],[new Ca("name",[],[new Ca("",[],[],`${l}`)],""),new Ca("comment",[],[new Ca("",[],[],`${g}`)],"")],"")}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(C1),Pe(GE),Pe(qE),Pe(ii))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class Kit{constructor(a){S(this,"xsv",void 0),S(this,"text",""),S(this,"useSeparator",!1),this.xsv=a}print(a,l=!0){return l&&(this.useSeparator?this.text+=this.xsv:this.useSeparator=!0),this.text+=a,this}println(a,l=!0){return this.print(a,l),this.text+="\r\n",this.useSeparator=!1,this}}let jfe=(()=>{class c{constructor(){}getMemorialsString(l,h,d,f=";"){let p=new Kit(f);return p.print("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),p.print("\u0422\u0435\u0433\u0438"),p.println("",!1),h.forEach((g,m)=>{g&&(p.print(g),p.print(d[m]),p.println("",!1))}),p.println("",!1),p.print("\u0418\u043c\u044f"),p.print("\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),p.print("\u0421\u0442\u0430\u0442\u0443\u0441"),p.print("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"),p.print("\u0422\u0435\u0433\u0438"),p.println("",!1),l.filter(g=>{if(!h)return!0;let m=!1;return h.forEach(v=>{oa.tagsHasFlag(g.tags,v)&&(m=!0)}),m}).forEach((g,m)=>{g.tags.split(","),p.print(g.name),p.print(g.description),p.print(g.live?"\u0416\u0438\u0432\u043e\u0439":"\u0423\u0441\u043e\u043f\u0448\u0438\u0439"),p.print(""+g.offset),p.print(g.tags),p.println("",!1)}),p.text}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();var H0=(()=>(function(c){c[c.Begining=-1]="Begining",c[c.Tropari=-2]="Tropari",c[c.GospodiPomily=-3]="GospodiPomily",c[c.Molitva=-4]="Molitva"}(H0||(H0={})),H0))();class Jit{constructor(a,l,h,d){S(this,"link",void 0),S(this,"name",void 0),S(this,"kafizma",void 0),S(this,"psalom",void 0),this.link=a,this.name=l,this.kafizma=h,this.psalom=d}isPsalom(){return this.psalom>0}isBegining(){return this.psalom===H0.Begining}isTropari(){return this.psalom===H0.Tropari}isGospodiPomiluy(){return this.psalom===H0.GospodiPomily}isMolitva(){return this.psalom===H0.Molitva}}class ert{constructor(a,l,h,d){S(this,"kafizma",void 0),S(this,"psalom",void 0),S(this,"add",void 0),S(this,"filter",void 0),this.kafizma=a,this.psalom=l,this.add=h,this.filter=d}}let E1=(()=>{class c{constructor(l,h,d,f,p,g){S(this,"psSvc",void 0),S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"kvSvc",void 0),S(this,"http",void 0),S(this,"themeSvc",void 0),S(this,"items",[]),S(this,"audio",null),S(this,"current",null),S(this,"playList",[]),S(this,"playRunning",!1),S(this,"currentAudioValue",-1),S(this,"currentAudioValueId",0),S(this,"restPoint","/"),S(this,"control",void 0),S(this,"startRequests",[]),S(this,"startRequestsId",0),this.psSvc=l,this.uiConfig=h,this.config=d,this.kvSvc=f,this.http=p,this.themeSvc=g,this.setAudioDir(g.getAudioRootFolder(),()=>{}),this.control=this.getAudioSubscription(!0)}setAudioDir(l,h){let d="audioDir";this.kvSvc.findKey(d,f=>{f&&f.success?this.kvSvc.updateKey(wh.of(d,l),p=>{h&&h(p?p.error:null)}):this.kvSvc.insertKey(wh.of(d,l),p=>{h&&h(p?p.error:null)})})}ngOnDestroy(){this.stop()}autoPlay(){if(this.playList.length){const l=this.playList.shift();if(l){this.playRunning=!0;let h=(d,f)=>{let p=this.uiConfig.downloadAudioFile(d,"translation"+this.toString(""+this.currentAudioValue,3));p||(f=!0);let g=()=>{this.audio=new Audio(f?d:this.getPlayedLink(d)),this.audio.onended=()=>{this.autoPlay()},f||(this.audio.onerror=m=>{h(l.link,!0)});try{this.audio.play()}catch{}this.current=l};p?this.setAudioDir(p,()=>{g()}):g()};h(l.link,this.config.isMemoryServerType())}else this.playRunning=!1}else this.playRunning=!1}getUIAudioValue(){let l=1;try{l=+this.uiConfig.ui.audioValue.getStringValue()}catch{l=1}return(l<1||l>10)&&(l=1),l}reload(l,h=!1){let d=this.getUIAudioValue();if(d!==this.currentAudioValue&&(h=!0),!h&&this.items.length>0)l&&l();else{this.items=[],this.currentAudioValue=d;let f=++this.currentAudioValueId,p="audio/CS/"+this.toString(""+this.currentAudioValue,3)+".txt";this.psSvc.getText(p,g=>{if(f==this.currentAudioValueId)return g?(JSON.parse(g).forEach(v=>{this.items.push(new Jit(v.link,v.name,+v.kafizma,+v.psalom))}),void(l&&l())):(this.config.addAlert(Pr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: "+this.currentAudioValue,"Ok",15)),void(l&&l()));this.config.post(()=>{l&&l()})})}}isStarted(){return!!this.audio}isPlaying(l=!1){return this.audio&&!this.audio.paused||l&&this.playRunning}currentName(){return this.current?this.current.name:""}startCheckUI(l,h,d,f,p){let g=this.uiConfig.ui.audioValue.getStringValue();if(g&&"0"!=g)return this.start(l,h,d,f,p)}start(l,h,d,f,p){let g=this.startDirect(h,d,f,p);l&&l(g)}startDirectRaw(l,h,d,f,p){f||(this.playList=[]),this.items.forEach(g=>{(h<0||g.kafizma===h)&&(d<-5||g.psalom===d)&&(!p||p(g.psalom))&&this.playList.push(g)}),l&&(!f||!this.isPlaying(!0))&&(this.isPlaying(!0)&&!f&&this.stop(),this.autoPlay())}startDirect(l,h,d,f){const p=l<0&&h<0;let g=++this.startRequestsId;return this.startRequests.push(new ert(l,h,d,f)),p||this.reload(()=>{if(g==this.startRequestsId){let m=this.startRequests;this.startRequests=[],m.forEach((v,y)=>this.startDirectRaw(y+1==m.length,v.kafizma,v.psalom,v.add,v.filter))}}),this.getAudioSubscription(p)}getAudioSubscription(l){const h=this;return new class d{close(p){return(!l||p)&&h.stop(),this}currentName(){return h.currentName()}isPlaying(){return h.isPlaying()}isStarted(){return h.isStarted()}next(){return h.stop(),h.autoPlay(),this}pause(){return h.pause(),this}resume(){return h.resume(),this}}}next(){this.stop(),this.autoPlay()}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio=null,this.current=null,this.playRunning=!1)}pause(){this.audio&&this.audio.pause()}resume(){this.audio&&this.audio.play()}getRestPoint(l,h){return Mr.merge(Mr.merge(h||this.config.serviceAPIHost,this.restPoint),l)}getRestPointRaw(l,h){return Mr.merge(h||this.config.serviceAPIHost,l)}toString(l,h){for(;l.length<h;)l="0"+l;return l}getPlayedLink(l){let h=l.split("/"),d=h[h.length-1];return this.getRestPointRaw(Mr.merge("/audio/audio/translation"+this.toString(""+this.currentAudioValue,3),d),null)}downloadAll(l,h){let d=[];this.items.forEach(g=>{d.push(g.link)});let f=0;l(.01);let p=()=>{this.config.post(()=>{if(f>=d.length)return l(100),void h();let g=d[f++];this.uiConfig.downloadAudioFile(g,"translation"+this.toString(""+this.currentAudioValue,3)),l((f+1)/d.length*100),p()},100)};p()}deleteAudioAll(l,h){this.config.post(()=>{this.uiConfig.deleteAudioTranslation(l),h&&h()},100)}downloadAllUrls(l){var h=document.createElement("a");h.setAttribute("download",""),h.style.display="none",document.body.appendChild(h);for(var d=0;d<l.length;d++)h.setAttribute("href",l[d]),h.click();document.body.removeChild(h)}exists(l,h){this.http.get(this.getRestPoint("/exists/audio/"+l,null),{}).pipe(mr(qi.handleError)).subscribe({next:f=>{h(f,null)},error:f=>{h(null,""+f)}})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Pd),Pe(ii),Pe(ln),Pe(JU),Pe(Id),Pe(bo))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();const trt=function(c){return{"print-only":!1,pageBreak:c}};function nrt(c,a){if(1&c&&(R(0,"div",1),pe(1,"app-svg-js-image",2)(2,"app-dynamic-menu",3),N()),2&c){const l=q();L("ngClass",ds(6,trt,l.enabled&&l.uiConfig.ui.showFacePage.getBooleanValue()||l.showAnyWay)),F(1),L("genName","LogoLight2")("svgWidth",512)("svgHeight",512)("type",l.type),F(1),L("data",l.dynMenuData)}}let Zfe=(()=>{class c{set menuClick(l){this.dynMenuData&&this.dynMenuData.setOnClick(l)}set name(l){this.dynMenuData.setMenuState(vg.builder().addCommand(Ua.builder().setName(l)).setGenName("MenuDay2"))}get name(){return this.dynMenuData.menuState.commands[0].name}constructor(l){S(this,"uiConfig",void 0),S(this,"enabled",!0),S(this,"showAnyWay",!1),S(this,"type",512),S(this,"dynMenuData",Tg.builder().setWhiteBack(!0).setMenuState(vg.builder().addCommand(Ua.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay2"))),this.uiConfig=l}ngOnInit(){}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-print-logo"]],inputs:{enabled:"enabled",showAnyWay:"showAnyWay",type:"type",menuClick:"menuClick",name:"name"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(l,h){1&l&&K(0,nrt,3,8,"div",0),2&l&&L("ngIf",h.enabled&&h.uiConfig.ui.showFacePage.getBooleanValue()||h.showAnyWay)},dependencies:[di,Sn,nc,BE]})),c})();function irt(c,a){if(1&c){const l=ct();R(0,"clr-radio-wrapper")(1,"input",17),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).uiConfig.ui.fontSize.rawValue=d)}),N(),R(2,"label"),se(3),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("name","mainFontSize")("value",""+l)("ngModel",h.uiConfig.ui.fontSize.rawValue),F(2),gi("x",l,"")}}const rrt=function(){return[0,1,2,3,4,5,6,7,8,9,10,20,30]};function srt(c,a){if(1&c&&(R(0,"clr-radio-container",1)(1,"label"),se(2),N(),K(3,irt,4,4,"clr-radio-wrapper",2),N()),2&c){const l=q();F(2),gi("",l.uiConfig.ui.fontSize.description,":"),F(1),L("ngForOf",yc(2,rrt))}}function ort(c,a){if(1&c){const l=ct();R(0,"clr-toggle-wrapper")(1,"input",18),ie("ngModelChange",function(d){return Ae(Ee(l).$implicit.rawValue=d)}),N(),R(2,"label"),se(3),N()()}if(2&c){const l=a.$implicit;F(1),L("name",l.name)("value",l.name)("ngModel",l.rawValue),F(2),Ht(l.description)}}function art(c,a){if(1&c){const l=ct();R(0,"clr-radio-wrapper")(1,"input",17),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).uiConfig.ui.memorialPageSize.rawValue=d)}),N(),R(2,"label"),se(3),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("name","mainPageSize")("value",""+l)("ngModel",h.uiConfig.ui.memorialPageSize.rawValue),F(2),gi("x",l,"")}}const lrt=function(){return[10,20,30,40,50,60,70,80,90,100]};function crt(c,a){if(1&c&&(R(0,"clr-radio-container",1)(1,"label"),se(2),N(),K(3,art,4,4,"clr-radio-wrapper",2),N()),2&c){const l=q();F(2),gi("",l.uiConfig.ui.memorialPageSize.description,":"),F(1),L("ngForOf",yc(2,lrt))}}function urt(c,a){if(1&c){const l=ct();R(0,"clr-radio-wrapper")(1,"input",17),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).currentKafizma=d)}),N(),R(2,"label"),se(3),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("name","mainKafizma")("value",""+l)("ngModel",h.currentKafizma),F(2),Ht(l||"\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u0432 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0435")}}const hrt=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]};function drt(c,a){1&c&&(R(0,"clr-radio-container",1)(1,"label"),se(2,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430:"),N(),K(3,urt,4,4,"clr-radio-wrapper",2),N()),2&c&&(F(3),L("ngForOf",yc(1,hrt)))}function frt(c,a){if(1&c){const l=ct();R(0,"clr-radio-wrapper")(1,"input",17),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).uiConfig.ui.audioValue.rawValue=d)}),N(),R(2,"label"),se(3),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("name","mainAudio")("value",l.value)("ngModel",h.uiConfig.ui.audioValue.rawValue),F(2),Ht(l.name)}}function prt(c,a){if(1&c&&(R(0,"clr-radio-container",1)(1,"label"),se(2,"\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435:"),N(),K(3,frt,4,4,"clr-radio-wrapper",2),N()),2&c){const l=q();F(3),L("ngForOf",l.audios)}}function grt(c,a){1&c&&(R(0,"h4"),se(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),N())}function mrt(c,a){1&c&&pe(0,"clr-progress-bar",19),2&c&&L("clrValue",q().translationLoadingPersantage)}function vrt(c,a){if(1&c){const l=ct();R(0,"button",20),ie("click",function(){return Ee(l),Ae(q().downloadAll())}),pe(1,"clr-icon",21),se(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0434\n"),N()}}function yrt(c,a){if(1&c){const l=ct();R(0,"button",20),ie("click",function(){const f=Ee(l).$implicit;return Ae(q(2).deleteTranslation(f))}),pe(1,"clr-icon",23),se(2),N()}if(2&c){const l=a.$implicit;F(2),$C(" ",l.name," (",l.nameOriginal,") ")}}function _rt(c,a){if(1&c&&(R(0,"div"),K(1,yrt,3,2,"button",22),N()),2&c){const l=q();F(1),L("ngForOf",l.translationInfos)}}const f7=function(c,a,l,h){return{btn:!0,"btn-primary":c,"btn-success":a,"btn-primary-outline":l,"btn-success-outline":h}};class kh{constructor(a,l,h){S(this,"name",void 0),S(this,"nameSimple",void 0),S(this,"value",void 0),this.name=a,this.nameSimple=l,this.value=h}}class brt{constructor(a,l,h){S(this,"name",void 0),S(this,"nameOriginal",void 0),S(this,"value",void 0),this.name=a,this.nameOriginal=l,this.value=h}equalsTo(a){return this.nameOriginal==a.name&&this.value==a.value}}class Crt{constructor(a=!1,l="",h=""){S(this,"modalFlag",void 0),S(this,"currentName",void 0),S(this,"text",void 0),this.modalFlag=a,this.currentName=l,this.text=h}}let A1=(()=>{class c{isMemorial(){return null!=this.data&&this.stgsData.classes.memorialSettings}isCalculator(){return null!=this.data&&this.stgsData.classes.calculatorSettings}isBook(){return null==this.data||this.stgsData.classes.bookSettings}get settings(){return this.isBook()?this.settingsBooks:this.isMemorial()?this.settingsMemorial:this.settingsCalculator}get stgsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get translationInfos(){let l=this.uiConfig.getAudioTranslations(),h=()=>{this.translationInfosArray=[];for(let d=0;d<l.length;++d){let f=l[d];this.audios.forEach(p=>{p.value==""+ +f.value&&this.translationInfosArray.push(new brt(p.nameSimple,f.name,f.value))})}};if(l.length!=this.translationInfosArray.length)h();else for(let d=0;d<l.length;++d)if(!this.translationInfosArray[d].equalsTo(l[d])){h();break}return this.translationInfosArray}constructor(l,h,d,f){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"themesSvc",void 0),S(this,"audioSvc",void 0),S(this,"data",void 0),S(this,"translationLoadingPersantage",0),S(this,"settingsBooks",[]),S(this,"settingsMemorial",[]),S(this,"settingsCalculator",[]),S(this,"audios",[new kh("\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","0"),new kh("\u041f\u0441\u0430\u043b\u043c\u044b \u0414\u0430\u0432\u0438\u0434\u043e\u0432\u044b (\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432))","\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432)","1"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0441\u0438\u043d\u043e\u0434\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434) (\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439)","\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439","9"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u0411\u0438\u0440\u0443\u043a\u043e\u0432\u044b\u0445) (\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432)","\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432","2"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435","\u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0439","4"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432)","\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432","3"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432)","\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432","5"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432)","\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432","6"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432)","\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432","7"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432))","\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432)","8"),new kh("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432))","\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432)","10")]),S(this,"translationInfosArray",[]),S(this,"deleteTranslationDlg",new Crt),this.config=l,this.uiConfig=h,this.themesSvc=d,this.audioSvc=f,this.settingsCalculator=[],this.settingsBooks=[h.ui.parallel,h.ui.coloredTranslations,h.ui.fineText,h.ui.lineBreaks,h.ui.showFacePage],this.settingsMemorial=[h.ui.sortPersonsPriests,h.ui.sortPersonsNames,h.ui.memorialVerticalView,h.ui.mergeNameOnImport,h.ui.showMolitvy,h.ui.addCommentToName,h.ui.addRepeatCommentToName,h.ui.memorialSlava1Zdrav,h.ui.memorialSlava1Upok,h.ui.memorialSlava2Zdrav,h.ui.memorialSlava2Upok,h.ui.memorialSlava3Zdrav,h.ui.memorialSlava3Upok,h.ui.memorialPsaltir,h.ui.autoDownloadAudioFiles,h.ui.showFacePage,h.ui.stopServiceFlag]}get currentKafizma(){return""+ii.getKafizmNumberBy(17,this.uiConfig.ui.currentOffset.getNumberValue())}set currentKafizma(l){this.uiConfig.ui.currentOffset.setNumberValue(ii.getOffsetByKafizmNumber(17,+l))}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}toggleParallel(){return this.uiConfig.ui.parallel.setBooleanValue(!this.uiConfig.ui.parallel.getAndVerifyBooleanValue()),this}toggleLineBreaks(){return this.uiConfig.ui.lineBreaks.setBooleanValue(!this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()),this}toggleColoredTranslations(){return this.uiConfig.ui.coloredTranslations.setBooleanValue(!this.uiConfig.ui.coloredTranslations.getAndVerifyBooleanValue()),this}isRedTheme(){return this.config.isRedTheme()}isLight(){return this.themesSvc.isLight()}isNight(){return this.themesSvc.isNight()}isAutoTheme(){return this.themesSvc.isAutoTheme()}onToggleAutoTheme(){this.themesSvc.onToggleAutoTheme()}switchToLight(){this.themesSvc.switchToLight()}switchToNight(){this.themesSvc.switchToNight()}downloadAll(){this.audioSvc.downloadAll(l=>(this.translationLoadingPersantage=Math.round(100*l)/100,!0),()=>{this.translationLoadingPersantage=100})}isTranslationDownloading(){return this.config.isRestServerType()&&this.translationLoadingPersantage>0&&this.translationLoadingPersantage<100}isTranslationDownloadNeeded(l){return this.config.isRestServerType()&&(!l||l&&this.uiConfig.ui.autoDownloadAudioFiles.getBooleanValue())&&this.isMemorial()}deleteTranslation(l){this.deleteTranslationDlg.currentName=l.name,this.deleteTranslationDlg.modalFlag=!0}deleteTranslationDirect(){this.config.post(()=>{let l=this.translationInfos.findIndex(f=>f.name==this.deleteTranslationDlg.currentName);l<0||l>=0&&l<this.translationInfos.length&&this.uiConfig.deleteAudioTranslation(this.translationInfos[l].value),this.deleteTranslationDlg.modalFlag=!1})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(bo),z(E1))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-settings"]],inputs:{data:"data"},decls:34,vars:29,consts:[["clrInline","",4,"ngIf"],["clrInline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["class","btn btn-primary btn-block",3,"click",4,"ngIf"],[1,"top-space","bottom-space"],[1,"btn-group","btn-primary-outline"],[3,"ngClass","click"],["shape","sun",1,"is-solid"],["shape","moon",1,"is-solid"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],["clrSuccess","","clrLabeled","",3,"clrValue"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","download"],["class","btn btn-primary btn-block",3,"click",4,"ngFor","ngForOf"],["shape","times"]],template:function(l,h){1&l&&(K(0,srt,4,3,"clr-radio-container",0),R(1,"clr-toggle-container",1)(2,"label"),se(3,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),N(),K(4,ort,4,4,"clr-toggle-wrapper",2),N(),K(5,crt,4,3,"clr-radio-container",0),K(6,drt,4,2,"clr-radio-container",0),K(7,prt,4,1,"clr-radio-container",0),K(8,grt,2,0,"h4",3),K(9,mrt,1,1,"clr-progress-bar",4),K(10,vrt,3,0,"button",5),K(11,_rt,2,1,"div",3),R(12,"div",6)(13,"clr-toggle-container",1)(14,"label"),se(15,"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441:"),N()(),R(16,"div",7)(17,"button",8),ie("click",function(){return h.switchToLight()}),pe(18,"clr-icon",9),N(),R(19,"button",8),ie("click",function(){return h.onToggleAutoTheme()}),pe(20,"clr-icon",9)(21,"clr-icon",10),N(),R(22,"button",8),ie("click",function(){return h.switchToNight()}),pe(23,"clr-icon",10),N()()(),R(24,"clr-modal",11),ie("clrModalOpenChange",function(f){return h.deleteTranslationDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(25,"h3",12),se(26,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),N(),R(27,"div",13),se(28),N(),R(29,"div",14)(30,"button",15),ie("click",function(){return h.deleteTranslationDlg.modalFlag=!1}),se(31,"\u041e\u0442\u043c\u0435\u043d\u0430"),N(),R(32,"button",16),ie("click",function(){return h.deleteTranslationDirect()}),se(33,"Ok"),N()()()),2&l&&(L("ngIf",h.isBook()||h.isMemorial()),F(4),L("ngForOf",h.settings),F(1),L("ngIf",h.isMemorial()),F(1),L("ngIf",h.isMemorial()),F(1),L("ngIf",h.isMemorial()),F(1),L("ngIf",h.isTranslationDownloading()),F(1),L("ngIf",h.isTranslationDownloading()),F(1),L("ngIf",h.isTranslationDownloadNeeded(!0)&&!h.isTranslationDownloading()),F(1),L("ngIf",!h.isTranslationDownloading()),F(6),L("ngClass",$D(14,f7,!h.isRedTheme()&&h.isLight(),h.isRedTheme()&&h.isLight(),!h.isRedTheme()&&!h.isLight(),h.isRedTheme()&&!h.isLight())),F(2),L("ngClass",$D(19,f7,!h.isRedTheme()&&h.isAutoTheme(),h.isRedTheme()&&h.isAutoTheme(),!h.isRedTheme()&&!h.isAutoTheme(),h.isRedTheme()&&!h.isAutoTheme())),F(3),L("ngClass",$D(24,f7,!h.isRedTheme()&&h.isNight(),h.isRedTheme()&&h.isNight(),!h.isRedTheme()&&!h.isNight(),h.isRedTheme()&&!h.isNight())),F(2),L("clrModalOpen",h.deleteTranslationDlg.modalFlag),F(4),gi(' \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430: "',h.deleteTranslationDlg.currentName,'"? '))},dependencies:[di,vi,Sn,so,Hf,$f,ls,qp,_k,Zp,wk,hre,fB,ZB,Cc,cd,LS,Pa,ma],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();function Srt(c,a){if(1&c){const l=ct();R(0,"span",2),ie("click",function(){const f=Ee(l).$implicit;return Ae(q().onItem(f))}),se(1),N()}if(2&c){const l=a.$implicit;L("ngClass",q().getSpanClass(l)),F(1),Ht(l.text)}}const xrt=function(c){return{"bottom-top-space":!0,"no-print":c}};let XE=(()=>{class c{get toolbarData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"data",void 0),S(this,"currentItem",null),this.config=l,this.uiConfig=h}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){var h={};return h["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}onItem(l){this.currentItem=l,this.toolbarData.onClick&&this.toolbarData.onClick(l)}getSpanClass(l){let h=this.getSpanClassRaw(l);return l.getSpanClassDetector.checkAndGetValue(h)}getSpanClassRaw(l){let h={cursor:!0,label:!0};return h[this.toolbarData.classes.labelNormal]=!l.selected,h[this.toolbarData.classes.labelSelected]=l.selected,h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-content-toolbar"]],inputs:{data:"data"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,Srt,2,2,"span",1),N()),2&l&&(L("ngClass",ds(2,xrt,h.toolbarData.classes.noPrint)),F(1),L("ngForOf",h.toolbarData.items))},dependencies:[di,vi]})),c})(),p7=(()=>{class c{get spinnerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),S(this,"clazz",{}),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){var l=this.spinnerData?.classes;return this.clazz.spinner=!0,this.clazz["spinner-inline"]=!l||l.spinnerInline,this.clazz}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-spinner"]],inputs:{data:"data"},decls:5,vars:3,consts:[[3,"ngClass"]],template:function(l,h){1&l&&(R(0,"span")(1,"span",0),se(2),N(),R(3,"span"),se(4),N()()),2&l&&(F(1),L("ngClass",h.getClasses()),F(1),gi(" ",h.text," "),F(2),gi(" ",h.text," "))},dependencies:[di]})),c})();function wrt(c,a){if(1&c){const l=ct();R(0,"div",6)(1,"a",7),ie("click",function(){return Ae(Ee(l).$implicit.runOnClick())}),se(2),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("ngClass",h.getAlertActionClass(!1))("hidden",!l.enabled),F(1),Ht(l.text)}}function Ort(c,a){1&c&&pe(0,"clr-icon",9),2&c&&ot("shape",q(3).errorsData.classes.alertShape)}function Drt(c,a){if(1&c){const l=ct();R(0,"span"),K(1,Ort,1,1,"clr-icon",8),R(2,"span",1),ie("click",function(){const f=Ee(l).$implicit;return Ae(q(2).onErrorMessage(f))}),se(3),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("ngIf",h.errorsData.classes.alertShape),F(1),L("ngClass",h.getAlertTextClass(!1)),F(1),gi(" ",l," ")}}function Trt(c,a){if(1&c){const l=ct();R(0,"button",10)(1,"clr-icon",1),ie("click",function(){return Ae(Ee(l).$implicit.runOnClick())}),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("ngClass",h.getAlertButtonClass(!1)),ot("shape",l.shape)}}function krt(c,a){if(1&c&&(R(0,"div")(1,"div",1),ie("click",function(h){return h.stopPropagation()}),R(2,"div",2),K(3,wrt,3,3,"div",3),K(4,Drt,4,3,"span",4),N(),K(5,Trt,2,2,"button",5),N()()),2&c){const l=q();F(1),L("ngClass",l.getClasses()),F(2),L("ngForOf",l.errorsData.actions),F(1),L("ngForOf",l.errorsData.errors),F(1),L("ngForOf",l.errorsData.buttons)}}function Mrt(c,a){if(1&c&&(R(0,"div",18),pe(1,"clr-icon",9),N()),2&c){const l=q(3);F(1),ot("shape",l.errorsData.classes.alertShape)}}function Ert(c,a){if(1&c){const l=ct();R(0,"a",7),ie("click",function(){return Ae(Ee(l).$implicit.runOnClick())}),se(1),N()}if(2&c){const l=a.$implicit;L("ngClass",q(3).getAlertActionClass())("hidden",!l.enabled),F(1),Ht(l.text)}}function Art(c,a){if(1&c){const l=ct();R(0,"div",14),K(1,Mrt,2,1,"div",15),R(2,"span",1),ie("click",function(){const f=Ee(l).$implicit;return Ae(q(2).onErrorMessage(f))}),se(3),N(),R(4,"div",16),K(5,Ert,2,3,"a",17),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("ngIf",h.errorsData.classes.alertShape),F(1),L("ngClass",h.getAlertTextClass()),F(1),gi(" ",l," "),F(2),L("ngForOf",h.errorsData.actions)}}function Irt(c,a){if(1&c){const l=ct();R(0,"button",10)(1,"clr-icon",1),ie("click",function(){return Ae(Ee(l).$implicit.runOnClick())}),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("ngClass",h.getAlertButtonClass()),ot("shape",l.shape)}}function Prt(c,a){if(1&c&&(R(0,"div")(1,"div",11),ie("click",function(h){return h.stopPropagation()}),R(2,"div",12),K(3,Art,6,4,"div",13),N(),K(4,Irt,2,2,"button",5),N()()),2&c){const l=q();F(1),L("ngClass",l.getClasses()),F(2),L("ngForOf",l.errorsData.errors),F(1),L("ngForOf",l.errorsData.buttons)}}let I1=(()=>{class c{get errorsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}constructor(l){S(this,"uiConfig",void 0),S(this,"data",void 0),S(this,"stdErrorsEnabled",!1),S(this,"getClassesDetector",_a.builder()),S(this,"getAlertActionClassDetector",_a.builder()),S(this,"getAlertTextClassTrueDetector",_a.builder()),S(this,"getAlertTextClassFalseDetector",_a.builder()),this.uiConfig=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(l=!0){let h=this.getClassesRaw(l);return this.getClassesDetector.checkAndGetValue(h)}getClassesRaw(l=!0){var h=this.errorsData?.classes,d={alert:l};return h&&(d[h.alertClass]=l,d["no-print"]=h.noPrint),d}getAlertButtonClass(l=!0){let h={"alert-icon":l};return h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}getAlertActionClass(l=!0){let h=this.getAlertActionClassRaw(l);return this.getAlertActionClassDetector.checkAndGetValue(h)}getAlertActionClassRaw(l=!0){let h={"alert-action":l};return l||(h["left-space"]=!0,h["right-space"]=!0),h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}getAlertTextClass(l=!0){let h=this.getAlertTextClassRaw(l);return(l?this.getAlertTextClassTrueDetector:this.getAlertTextClassFalseDetector).checkAndGetValue(h)}getAlertTextClassRaw(l=!0){let h={"alert-text":l,cursor:!0};return h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,h}onErrorMessage(l){return this.errorsData.click(l),this}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-errors"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","click"],[1,"left-space","right-space","bottom-top-space","w100"],["class","inlineBlock underline floatRight no-print",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["type","button","class","close","aria-label","Close",4,"ngFor","ngForOf"],[1,"inlineBlock","underline","floatRight","no-print"],["href","javascript:void(0)",3,"ngClass","hidden","click"],["class","alert-icon",4,"ngIf"],[1,"alert-icon"],["type","button","aria-label","Close",1,"close"],["role","alert",3,"ngClass","click"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],[1,"alert-item","static"],["class","alert-icon-wrapper",4,"ngIf"],[1,"alert-actions"],["href","javascript:void(0)",3,"ngClass","hidden","click",4,"ngFor","ngForOf"],[1,"alert-icon-wrapper"]],template:function(l,h){1&l&&(K(0,krt,6,4,"div",0),K(1,Prt,5,3,"div",0)),2&l&&(L("ngIf",!h.stdErrorsEnabled&&(null==h.errorsData||null==h.errorsData.errors?null:h.errorsData.errors.length)),F(1),L("ngIf",h.stdErrorsEnabled&&(null==h.errorsData||null==h.errorsData.errors?null:h.errorsData.errors.length)))},dependencies:[di,vi,Sn,so],styles:[".floatRight[_ngcontent-%COMP%]{float:right}.inlineBlock[_ngcontent-%COMP%]{display:inline-block}.underline[_ngcontent-%COMP%]{text-decoration:underline}.w100[_ngcontent-%COMP%]{width:100%}"]})),c})();function Rrt(c,a){1&c&&pe(0,"clr-icon",16)}function Frt(c,a){1&c&&pe(0,"clr-icon",17)}function Lrt(c,a){if(1&c){const l=ct();R(0,"clr-input-container")(1,"label"),K(2,Rrt,1,0,"clr-icon",13),K(3,Frt,1,0,"clr-icon",14),se(4),N(),R(5,"input",15),ie("ngModelChange",function(d){return Ae(Ee(l).$implicit.value=d)}),N(),R(6,"clr-control-error"),se(7,"\u041f\u043e\u043b\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e!"),N()()}if(2&c){const l=a.$implicit,h=q(2);F(2),L("ngIf",h.isEventProperty(l,!1)),F(1),L("ngIf",h.isEventProperty(l,!0)),F(1),gi(" ",l.name,""),F(1),Cy("placeholder","\u043f\u043e\u0432\u0442\u043e\u0440\u044b"==l.name?"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e":"\u0422\u0435\u043a\u0441\u0442"),Sy("name","prop_",l.name,""),L("ngModel",l.value)}}function Nrt(c,a){if(1&c){const l=ct();R(0,"button",18),ie("click",function(){return Ee(l),Ae(q(2).deletePerson())}),pe(1,"clr-icon",19),N()}}function Brt(c,a){if(1&c){const l=ct();R(0,"button",11),ie("click",function(){return Ee(l),Ae(q(2).addProperty())}),pe(1,"clr-icon",20),N()}}function Vrt(c,a){if(1&c){const l=ct();R(0,"button",21),ie("click",function(){Ee(l);const d=q(2);return Ae(d.savePerson(d.person))}),se(1," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),N()}}function Urt(c,a){if(1&c){const l=ct();R(0,"form",1)(1,"clr-input-container")(2,"label"),se(3,"\u0418\u043c\u044f"),N(),R(4,"input",2),ie("ngModelChange",function(d){return Ee(l),Ae(q().person.name=d)}),N()(),R(5,"clr-input-container")(6,"label"),se(7,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430"),N(),R(8,"input",3),ie("ngModelChange",function(d){return Ee(l),Ae(q().kafizma=d)}),N()(),R(9,"clr-checkbox-container",4)(10,"label"),se(11,"\u0421\u0442\u0430\u0442\u0443\u0441"),N(),R(12,"clr-checkbox-wrapper")(13,"input",5),ie("ngModelChange",function(d){return Ee(l),Ae(q().person.live=d)}),N(),R(14,"label"),se(15,"\u0416\u0438\u0432\u043e\u0439"),N()()(),K(16,Lrt,8,6,"clr-input-container",6),R(17,"span",7),se(18,"\xa0"),N(),R(19,"clr-input-container")(20,"label"),se(21,"*\u041d\u043e\u0432\u043e\u0435"),N(),R(22,"input",8),ie("ngModelChange",function(d){return Ee(l),Ae(q().newName=d)}),N()(),R(23,"span",7),se(24,"\xa0"),N(),K(25,Nrt,2,0,"button",9),K(26,Brt,2,0,"button",10),R(27,"button",11),ie("click",function(){Ee(l);const d=q();return Ae(d.revertPerson(d.person))}),se(28," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c "),N(),K(29,Vrt,2,0,"button",12),N()}if(2&c){const l=q();F(4),L("ngModel",l.person.name),F(4),L("ngModel",l.kafizma),F(5),L("ngModel",l.person.live),F(3),L("ngForOf",l.properties.properties),F(6),L("ngModel",l.newName),F(3),L("ngIf",l.personDeletionEnabled),F(1),L("ngIf",l.newName),F(3),L("ngIf",l.person.dirty)}}let zrt=(()=>{class c{get person(){return this.data?.person}get kafizma(){return!this.person||this.person.offset<0?0:ii.getKafizmNumberBy(17,this.person.offset)}set kafizma(l){if(l<=0)this.person&&(this.person.offset=-1);else if(this.person){let h=ii.getOffsetByKafizmNumber(17,l);this.person.offset=h,this.uiConfig.ui.currentPersonOffset.setNumberValue(h)}}get properties(){return this.syncData(),this.myProperties}updateProperties(){this.newName="",this.properties.setOnChangeCallback(()=>{this.person&&this.person.setDirty()}),this.properties.load(this.person?this.person.description:""),this.properties.properties.find(l=>l.name==wi.TEXT)||this.properties.pushNew(wi.TEXT,"")}constructor(l,h,d,f,p){S(this,"ks",void 0),S(this,"eventParserSvc",void 0),S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"repeatCounterSvc",void 0),S(this,"personDeletionEnabled",!1),S(this,"memkey",-1),S(this,"data",null),S(this,"changesDetectorPerson",ts.builder()),S(this,"myProperties",new wi),S(this,"newName",""),this.ks=l,this.eventParserSvc=h,this.config=d,this.uiConfig=f,this.repeatCounterSvc=p}ngOnDestroy(){}ngOnInit(){this.updateProperties()}savePerson(l){l.description=this.properties.toString(),this.ks.save(this.memkey,l,!0).then(h=>{this.data?.click(!0)},h=>{this.config.addAlert(Pr.of(""+h,"OK",15)),this.data?.click(!1)})}revertPerson(l){l.revertDirty(),this.data?.click(!1)}addProperty(){this.newName&&(this.properties.pushNew(this.newName,""),this.newName="")}isEventProperty(l,h){try{let d=l.value?this.eventParserSvc.parseEvent(l.value):null;return null!=d&&h==d.isToday()}catch{}return!1}syncData(){this.changesDetectorPerson.checkAndUpdate(this.data?.person)&&this.config.post(()=>{this.updateProperties()})}deletePerson(){this.data&&this.ks.deletePersons([this.data.person]).then(l=>{l&&l.success?this.data?.click(!0):(this.config.addAlert(Pr.of("\u041e\u0448\u0438\u0431\u043a\u0430: "+l?.error,"OK",15)),this.data?.click(!1))},l=>{this.config.addAlert(Pr.of(""+l,"OK",15)),this.data?.click(!1)})}getRepeatCount(){return this.data?this.repeatCounterSvc.getRepeatCountAndFirstMemorial(this.data.person.tags).repeatCount:""}}return S(c,"\u0275fac",function(l){return new(l||c)(z(Sg),z(QE),z(ln),z(ii),z(qE))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-person-details"]],inputs:{data:"data"},decls:1,vars:1,consts:[["clrForm","",4,"ngIf"],["clrForm",""],["clrInput","","placeholder","\u0418\u043c\u044f","name","name",3,"ngModel","ngModelChange"],["clrInput","","placeholder","\u0418\u043d\u0434\u0435\u043a\u0441","name","offset",3,"ngModel","ngModelChange"],["clrInline",""],["type","checkbox","clrCheckbox","","name","options","value","option1",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"clr-subtext"],["clrInput","","placeholder","\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e","name","prop_new_name",3,"ngModel","ngModelChange"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["shape","event",4,"ngIf"],["shape","event","class","is-solid",4,"ngIf"],["clrInput","","required","",3,"placeholder","name","ngModel","ngModelChange"],["shape","event"],["shape","event",1,"is-solid"],[1,"btn","btn-danger",3,"click"],["shape","trash"],["shape","plus"],[1,"btn","btn-success",3,"click"]],template:function(l,h){1&l&&K(0,Urt,30,8,"form",0),2&l&&L("ngIf",h.person)},dependencies:[vi,Sn,so,ls,J5,yk,qp,_k,Zp,ux,u_,jy,Cc,cd,Pa,Wy,Vm,ma,kf],styles:[".template-editor[_ngcontent-%COMP%]{height:calc(100vh - 290px)}.template-editor-2[_ngcontent-%COMP%]{height:calc(100vh - 230px)}"]})),c})();const Hrt=["pagesView"];function $rt(c,a){if(1&c){const l=ct();R(0,"clr-accordion-panel",72),ie("clrAccordionPanelOpenChange",function(d){return Ee(l),Ae(q(2).showSettings=d)}),R(1,"clr-accordion-title"),se(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),N(),R(3,"clr-accordion-content"),pe(4,"app-dynamic-settings",4),R(5,"div",73)(6,"button",74),ie("click",function(){return Ee(l),Ae(q(2).printBook())}),pe(7,"clr-icon",75),se(8," \u041f\u0435\u0447\u0430\u0442\u044c "),N()()()()}if(2&c){const l=q(2);L("clrAccordionPanelOpen",l.showSettings),F(4),L("data",l.settingsData)}}function Wrt(c,a){if(1&c){const l=ct();R(0,"clr-accordion-panel",72),ie("clrAccordionPanelOpenChange",function(d){return Ee(l),Ae(q(2).filterMemorials=d)}),R(1,"clr-accordion-title"),se(2,"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f"),N(),R(3,"clr-accordion-content"),pe(4,"app-dynamic-content-toolbar",4)(5,"app-dynamic-content-toolbar",4),N()()}if(2&c){const l=q(2);L("clrAccordionPanelOpen",l.filterMemorials),F(4),L("data",l.toolbarMemorialsFilters),F(1),L("data",l.toolbarMemorialsFlags)}}function Grt(c,a){if(1&c){const l=ct();R(0,"clr-dropdown-menu")(1,"label",76),se(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),N(),R(3,"div",77),ie("click",function(){return Ee(l),Ae(q(2).addMemorial())}),pe(4,"clr-icon",56),R(5,"span"),se(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),N()(),R(7,"div",78),ie("click",function(){return Ee(l),Ae(q(2).onAddNewPerson())}),pe(8,"clr-icon",56),R(9,"span"),se(10," \u0418\u043c\u044f"),N()()()}}function Qrt(c,a){if(1&c){const l=ct();R(0,"clr-dropdown-menu",79)(1,"label",76),se(2,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N(),R(3,"div",77),ie("click",function(){return Ee(l),Ae(q(2).deleteMemorial())}),pe(4,"clr-icon",59),R(5,"span"),se(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),N()(),R(7,"div",78),ie("click",function(){return Ee(l),Ae(q(2).deleteAll())}),pe(8,"clr-icon",59),R(9,"span"),se(10," \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),N()()()}}function jrt(c,a){if(1&c){const l=ct();R(0,"clr-dropdown-menu",79)(1,"label",76),se(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),N(),R(3,"div",77),ie("click",function(){return Ee(l),Ae(q(2).onEditTitleInfo())}),pe(4,"clr-icon"),R(5,"span"),se(6," \u041c\u043e\u043b\u0435\u0431\u0435\u043d"),N()(),R(7,"div",78),ie("click",function(){return Ee(l),Ae(q(2).importMemorials())}),pe(8,"clr-icon",52),R(9,"span"),se(10," \u0418\u043c\u043f\u043e\u0440\u0442"),N()(),R(11,"div",80),ie("click",function(){return Ee(l),Ae(q(2).exportMemorials())}),pe(12,"clr-icon",53),R(13,"span"),se(14," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),N()()()}2&c&&(F(4),ot("shape","form"))}function Zrt(c,a){if(1&c){const l=ct();R(0,"clr-dropdown-menu")(1,"label",76),se(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),N(),R(3,"div",77),ie("click",function(){return Ee(l),Ae(q(2).addMemorial())}),pe(4,"clr-icon",56),R(5,"span"),se(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),N()(),R(7,"div",78),ie("click",function(){return Ee(l),Ae(q(2).onAddNewPerson())}),pe(8,"clr-icon",56),R(9,"span"),se(10," \u0418\u043c\u044f"),N()()()}}function qrt(c,a){if(1&c){const l=ct();R(0,"clr-dropdown-menu",79)(1,"label",76),se(2,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N(),R(3,"div",77),ie("click",function(){return Ee(l),Ae(q(2).deleteMemorial())}),pe(4,"clr-icon",59),R(5,"span"),se(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),N()(),R(7,"div",78),ie("click",function(){return Ee(l),Ae(q(2).deleteAll())}),pe(8,"clr-icon",59),R(9,"span"),se(10," \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),N()()()}}function Xrt(c,a){if(1&c){const l=ct();R(0,"clr-dropdown-menu",79)(1,"label",76),se(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),N(),R(3,"div",77),ie("click",function(){return Ee(l),Ae(q(2).onEditTitleInfo())}),pe(4,"clr-icon"),R(5,"span"),se(6," \u041c\u043e\u043b\u0435\u0431\u0435\u043d"),N()(),R(7,"div",78),ie("click",function(){return Ee(l),Ae(q(2).importMemorials())}),pe(8,"clr-icon",52),R(9,"span"),se(10," \u0418\u043c\u043f\u043e\u0440\u0442"),N()(),R(11,"div",80),ie("click",function(){return Ee(l),Ae(q(2).exportMemorials())}),pe(12,"clr-icon",53),R(13,"span"),se(14," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),N()()()}2&c&&(F(4),ot("shape","form"))}function Yrt(c,a){if(1&c){const l=ct();R(0,"clr-dropdown-menu",79)(1,"label",76),se(2,"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),N(),R(3,"div",77),ie("click",function(){return Ee(l),Ae(q(2).addMemorial())}),pe(4,"clr-icon",56),R(5,"span"),se(6," \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),N()(),R(7,"div",78),ie("click",function(){return Ee(l),Ae(q(2).onAddNewPerson())}),pe(8,"clr-icon",56),R(9,"span"),se(10," \u0418\u043c\u044f"),N()(),pe(11,"div",81),R(12,"div",77),ie("click",function(){return Ee(l),Ae(q(2).deleteMemorial())}),pe(13,"clr-icon",59),R(14,"span"),se(15),N()(),R(16,"div",78),ie("click",function(){return Ee(l),Ae(q(2).deleteAll())}),pe(17,"clr-icon",59),R(18,"span"),se(19," \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),N()()()}if(2&c){const l=q(2);F(15),gi(" ",l.currentMemorial?l.currentMemorial:"\u0412\u0441\u0435","")}}function Krt(c,a){if(1&c){const l=ct();R(0,"div",69)(1,"form",5)(2,"clr-input-container")(3,"label"),se(4,"\u0418\u043c\u044f:"),N(),R(5,"input",82),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).search=d)}),N()()()()}if(2&c){const l=q(2);F(5),L("ngModel",l.search)}}function Jrt(c,a){1&c&&Yo(0)}const est=function(c,a,l){return{$implicit:c,horPagesCount:a,showPersons:l}};function tst(c,a){if(1&c){const l=ct();R(0,"div",44),ie("click",function(d){return d.stopPropagation()}),pe(1,"app-print-logo",45)(2,"app-dynamic-content-toolbar",4)(3,"app-dynamic-errors",4),R(4,"clr-accordion",46),K(5,$rt,9,2,"clr-accordion-panel",47),K(6,Wrt,6,3,"clr-accordion-panel",47),N(),R(7,"div",48)(8,"div",49)(9,"button",50),ie("click",function(){return Ee(l),Ae(q().toggleSearching())}),pe(10,"clr-icon",51),R(11,"span",29),se(12," \u041f\u043e\u0438\u0441\u043a"),N()()(),R(13,"div",49)(14,"button",50),ie("click",function(){return Ee(l),Ae(q().onEditTitleInfo())}),pe(15,"clr-icon"),R(16,"span",29),se(17," \u041c\u043e\u043b\u0435\u0431\u0435\u043d"),N()()(),R(18,"div",49)(19,"button",50),ie("click",function(){return Ee(l),Ae(q().importMemorials())}),pe(20,"clr-icon",52),R(21,"span",29),se(22," \u0418\u043c\u043f\u043e\u0440\u0442"),N()()(),R(23,"div",49)(24,"button",50),ie("click",function(){return Ee(l),Ae(q().exportMemorials())}),pe(25,"clr-icon",53),R(26,"span",29),se(27," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),N()()(),R(28,"div",49)(29,"clr-dropdown",54)(30,"button",55),pe(31,"clr-icon",56),R(32,"span",29),se(33,"\xa0\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),N(),pe(34,"cds-icon",57),N(),K(35,Grt,11,0,"clr-dropdown-menu",58),N()(),R(36,"div",49)(37,"clr-dropdown",54)(38,"button",55),pe(39,"clr-icon",59),R(40,"span",29),se(41,"\xa0\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N(),pe(42,"cds-icon",57),N(),K(43,Qrt,11,0,"clr-dropdown-menu",60),N()()(),R(44,"div",61)(45,"div",62)(46,"button",50),ie("click",function(){return Ee(l),Ae(q().toggleSearching())}),pe(47,"clr-icon",51),R(48,"span",29),se(49," \u041f\u043e\u0438\u0441\u043a"),N()()(),R(50,"div",62)(51,"clr-dropdown",54)(52,"button",63),pe(53,"clr-icon",64)(54,"cds-icon",57),N(),K(55,jrt,15,1,"clr-dropdown-menu",60),N()(),R(56,"div",62)(57,"clr-dropdown",54)(58,"button",63),pe(59,"clr-icon",56),R(60,"span",29),se(61," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),N(),pe(62,"cds-icon",57),N(),K(63,Zrt,11,0,"clr-dropdown-menu",58),N()(),R(64,"div",62)(65,"clr-dropdown",54)(66,"button",55),pe(67,"clr-icon",59),R(68,"span",29),se(69," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N(),pe(70,"cds-icon",57),N(),K(71,qrt,11,0,"clr-dropdown-menu",60),N()()(),R(72,"div",65)(73,"div",66)(74,"button",50),ie("click",function(){return Ee(l),Ae(q().toggleSearching())}),pe(75,"clr-icon",51),R(76,"span",29),se(77," \u041f\u043e\u0438\u0441\u043a"),N()()(),R(78,"div",66)(79,"clr-dropdown",54)(80,"button",63),pe(81,"clr-icon",64)(82,"cds-icon",57),N(),K(83,Xrt,15,1,"clr-dropdown-menu",60),N()(),R(84,"div",66)(85,"clr-dropdown",54)(86,"button",55),pe(87,"clr-icon",56)(88,"clr-icon",59),R(89,"span",29),se(90," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),N(),pe(91,"cds-icon",57),N(),K(92,Yrt,20,1,"clr-dropdown-menu",60),N()()(),K(93,Krt,6,1,"div",67),R(94,"div",null,68)(96,"div",69)(97,"div"),pe(98,"app-dynamic-content-toolbar",4),N()(),K(99,Jrt,1,0,"ng-container",70),R(100,"div",69)(101,"div"),pe(102,"app-dynamic-content-toolbar",4),N()(),R(103,"div",71),se(104),N()()()}if(2&c){const l=q(),h=po(165),d=po(167),f=po(169),p=po(171);F(1),L("enabled",!l.personsData.readonly)("name",l.currentMemorial?l.currentMemorial:"\u0412\u0441\u0435"),F(1),L("data",l.toolbarMemorials),F(1),L("data",l.headerData),F(2),L("ngIf",l.showSettings&&!l.personsData.readonly),F(1),L("ngIf",l.filterMemorials&&!l.personsData.text),F(1),L("hidden",l.personsData.readonly),F(8),ot("shape","form"),F(14),L("clrCloseMenuOnItemClick",!0),F(8),L("clrCloseMenuOnItemClick",!0),F(7),L("hidden",l.personsData.readonly),F(7),L("clrCloseMenuOnItemClick",!0),F(6),L("clrCloseMenuOnItemClick",!0),F(8),L("clrCloseMenuOnItemClick",!0),F(7),L("hidden",l.personsData.readonly),F(7),L("clrCloseMenuOnItemClick",!0),F(6),L("clrCloseMenuOnItemClick",!0),F(8),L("ngIf",l.isSearching()),F(5),L("data",l.toolbarPages),F(1),L("ngTemplateOutlet",h)("ngTemplateOutletContext",nY(25,est,l.verticalView?l.verticalView10||l.verticalView40?d:f:p,l.verticalView10?1:l.verticalView40?2:1,l.persons)),F(3),L("data",l.toolbarPages),F(2),WC("\u0412\u0441\u0435\u0433\u043e: ",l.myPersons.length," ",l.getWordName(l.myPersons.length)," \u0438\u0437 ",l.personsAllCount,".")}}function nst(c,a){if(1&c){const l=ct();R(0,"clr-toggle-wrapper")(1,"input",17),ie("ngModelChange",function(d){return Ae(Ee(l).$implicit.enabled=d)}),N(),R(2,"label"),se(3),N()()}if(2&c){const l=a.$implicit;F(1),L("name",l.memorial.memorial.name)("value",l.memorial.memorial.name)("ngModel",l.enabled),F(2),Ht(l.memorial.memorial.name)}}function ist(c,a){1&c&&(R(0,"span",83),se(1,"\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f"),N())}function rst(c,a){1&c&&Yo(0)}const sst=function(c,a,l,h,d){return{mark:c,showPersons:a,horPagesCount:l,liveText:h,usopText:d}};function ost(c,a){if(1&c&&(R(0,"div"),K(1,rst,1,0,"ng-container",70),N()),2&c){const l=a.$implicit,h=a.mark,d=a.showPersons,f=a.horPagesCount,p=q();F(1),L("ngTemplateOutlet",l)("ngTemplateOutletContext",function iY(c,a,l,h,d,f,p,g){const m=nl()+c,v=Ft(),y=lu(v,m,l,h,d,f);return Ea(v,m+4,p)||y?Kh(v,m+5,g?a.call(g,l,h,d,f,p):a(l,h,d,f,p)):UC(v,m+5)}(2,sst,h,d,f,p.getMemorialPageText(d,!0),p.getMemorialPageText(d,!1)))}}function ast(c,a){if(1&c){const l=ct();R(0,"div",86)(1,"app-svg-js-image",87),ie("pagesCount",function(d){Ee(l);const f=q(),p=f.horPagesCount,g=f.horPagesCount;return Ae(q().onPagesCount(d,p*g,!0))}),N()()}if(2&c){const l=q(),h=l.liveText,d=l.horPagesCount,f=l.horPagesCount;F(1),L("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h)("type",210297)("startPageIndex",0)("horizontalPagesCount",d)("verticalPagesCount",f)}}function lst(c,a){if(1&c&&(R(0,"div",86),pe(1,"app-svg-js-image",89),N()),2&c){const l=a.$implicit,h=q(2),d=h.liveText,f=h.horPagesCount,p=h.horPagesCount;F(1),L("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",d)("type",210297)("startPageIndex",l)("horizontalPagesCount",f)("verticalPagesCount",p)}}function cst(c,a){if(1&c&&(R(0,"div"),K(1,lst,2,9,"div",88),N()),2&c){const l=q(2);F(1),L("ngForOf",l.extraPagesLive)}}function ust(c,a){if(1&c){const l=ct();R(0,"div",86)(1,"app-svg-js-image",87),ie("pagesCount",function(d){Ee(l);const f=q(),p=f.horPagesCount,g=f.horPagesCount;return Ae(q().onPagesCount(d,p*g,!1))}),N()()}if(2&c){const l=q(),h=l.usopText,d=l.horPagesCount,f=l.horPagesCount;F(1),L("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",h)("type",210297)("startPageIndex",0)("horizontalPagesCount",d)("verticalPagesCount",f)}}function hst(c,a){if(1&c&&(R(0,"div",86),pe(1,"app-svg-js-image",89),N()),2&c){const l=a.$implicit,h=q(2),d=h.usopText,f=h.horPagesCount,p=h.horPagesCount;F(1),L("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",d)("type",210297)("startPageIndex",l)("horizontalPagesCount",f)("verticalPagesCount",p)}}function dst(c,a){if(1&c&&(R(0,"div"),K(1,hst,2,9,"div",88),N()),2&c){const l=q(2);F(1),L("ngForOf",l.extraPagesUsop)}}function fst(c,a){if(1&c&&(K(0,ast,2,9,"div",84),K(1,cst,2,1,"div",85),K(2,ust,2,9,"div",84),K(3,dst,2,1,"div",85)),2&c){const l=a.liveText,h=a.usopText;L("ngIf",l),F(1),L("ngIf",l),F(1),L("ngIf",h),F(1),L("ngIf",h)}}function pst(c,a){1&c&&(R(0,"span",95),se(1,"+"),N())}function gst(c,a){if(1&c&&(R(0,"span",92),se(1),N()),2&c){const l=q().$implicit;L("ngClass",q(2).getClasses(l,l.classesBadgeHorizontal,!1,"",!1,!0)),F(1),Ht(l.badge)}}function mst(c,a){if(1&c&&(R(0,"span",92),se(1),N()),2&c){const l=q().$implicit;L("ngClass",q(2).getClasses(l,l.classesBadgeHorizontal2,!1,"badge badge-success",!1,!0,!0)),F(1),Ht(l.x)}}function vst(c,a){if(1&c){const l=ct();R(0,"span",91),ie("click",function(d){const p=Ee(l).$implicit,g=q(2).$implicit;return Ae(q(2).onPersonFilterClick(d,g,p))}),se(1),N()}if(2&c){const l=a.$implicit;L("ngClass",q(4).getFilterClasses(l)),F(1),Ht(l.name)}}function yst(c,a){if(1&c&&(R(0,"div"),K(1,vst,2,2,"span",90),N()),2&c){const l=q(3);F(1),L("ngForOf",l.personsFilters)}}const _st=function(){return{"left-space-0":!0,"right-space-0":!0}};function bst(c,a){if(1&c){const l=ct();R(0,"div",91),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q(2).onPersonClick(d,p))}),R(1,"div",92),se(2),N(),R(3,"div",92),K(4,pst,2,0,"span",93),se(5),R(6,"span"),K(7,gst,2,2,"span",94),se(8,"\xa0"),K(9,mst,2,2,"span",94),N()(),K(10,yst,2,1,"div",85),N()}if(2&c){const l=a.$implicit,h=q(2);L("ngClass",h.getClasses(l,yc(9,_st))),F(1),L("ngClass",h.getClasses(l,l.classesVertical,!1,"clr-col-4 right")),F(1),Ht(l.prefix),F(1),L("ngClass",h.getClasses(l,l.classesVertical,!1,"clr-col-8")),F(1),L("ngIf",!(null!=l.person&&l.person.live)),F(1),gi("",l.name," "),F(2),L("ngIf",l.badge),F(2),L("ngIf",l.x),F(1),L("ngIf",h.personsClickHandler.person&&h.personsClickHandler.person.person===l.person&&h.personsClickHandler.selectionToggle)}}function Cst(c,a){1&c&&K(0,bst,11,10,"div",90),2&c&&L("ngForOf",a.showPersons)}function Sst(c,a){1&c&&(R(0,"span",95),se(1,"+"),N())}function xst(c,a){if(1&c&&(R(0,"span",92),se(1),N()),2&c){const l=q().$implicit;L("ngClass",q(2).getClasses(l,l.classesBadgeHorizontal,!1,"",!1,!0)),F(1),Ht(l.badge)}}function wst(c,a){if(1&c&&(R(0,"span",92),se(1),N()),2&c){const l=q().$implicit;L("ngClass",q(2).getClasses(l,l.classesBadgeHorizontal2,!1,"badge badge-success",!1,!0,!0)),F(1),Ht(l.x)}}function Ost(c,a){if(1&c){const l=ct();R(0,"span",91),ie("click",function(d){const p=Ee(l).$implicit,g=q(2).$implicit;return Ae(q(2).onPersonFilterClick(d,g,p))}),se(1),N()}if(2&c){const l=a.$implicit;L("ngClass",q(4).getFilterClasses(l)),F(1),Ht(l.name)}}function Dst(c,a){if(1&c&&(R(0,"span"),K(1,Ost,2,2,"span",90),N()),2&c){const l=q(3);F(1),L("ngForOf",l.personsFilters)}}function Tst(c,a){if(1&c){const l=ct();R(0,"span")(1,"span",91),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q(2).onPersonClick(d,p))}),se(2),K(3,Sst,2,0,"span",93),se(4),K(5,xst,2,2,"span",94),se(6,"\xa0"),K(7,wst,2,2,"span",94),N(),K(8,Dst,2,1,"span",85),N()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("ngClass",h.getClasses(l,l.classesHorizontal,!1,"",!0)),F(1),gi("",l.prefix," "),F(1),L("ngIf",!(null!=l.person&&l.person.live)),F(1),Ht(l.name),F(1),L("ngIf",l.badge),F(2),L("ngIf",l.x),F(1),L("ngIf",h.personsClickHandler.person&&h.personsClickHandler.person.person===l.person&&h.personsClickHandler.selectionToggle)}}function kst(c,a){if(1&c&&(R(0,"span"),K(1,Tst,9,7,"span",18),N()),2&c){const l=a.showPersons;F(1),L("ngForOf",l)}}class Zw{constructor(a,l,h){S(this,"name",void 0),S(this,"enabled",void 0),S(this,"system",void 0),S(this,"clazz",_a.builder()),this.name=a,this.enabled=l,this.system=h}static builder(){return new Zw("",!1,!1)}setName(a){return this.name=a,this}setEnabled(a){return this.enabled=a,this}setSystem(a){return this.system=a,this}}class YE{constructor(a,l,h){S(this,"memorial",void 0),S(this,"bEnabled",void 0),S(this,"onEnabledChanged",void 0),this.memorial=a,this.bEnabled=l,this.onEnabledChanged=h}get enabled(){return this.bEnabled}set enabled(a){this.bEnabled=a,this.onEnabledChanged&&this.onEnabledChanged()}static builder(){return new YE(null,!0,()=>{})}setMemorial(a){return this.memorial=a,this}setEnabled(a){return this.enabled=a,this}setOnEnabledChanged(a){this.onEnabledChanged=a}}class g7{constructor(a,l,h,d,f,p,g,m,v,y){S(this,"prefix",void 0),S(this,"name",void 0),S(this,"description",void 0),S(this,"badge",void 0),S(this,"x",void 0),S(this,"person",void 0),S(this,"classesVertical",void 0),S(this,"classesHorizontal",void 0),S(this,"classesBadgeHorizontal",void 0),S(this,"classesBadgeHorizontal2",void 0),this.prefix=a,this.name=l,this.description=h,this.badge=d,this.x=f,this.person=p,this.classesVertical=g,this.classesHorizontal=m,this.classesBadgeHorizontal=v,this.classesBadgeHorizontal2=y}static builder(){return new g7("","","","","",null,{},{},{},{})}setPrefix(a){return this.prefix=a,this}setName(a){return this.name=a,this}setDescription(a){return this.description=a,this}setBadge(a){return this.badge=a,this}setX(a){return this.x=a,this}setPerson(a){return this.person=a,this}addClassVertical(a,l=!0){return this.classesVertical[a]=l,this}addClassHorizontal(a,l=!0){return this.classesHorizontal[a]=l,this}addClassBadgeHorizontal(a,l=!0){return this.classesBadgeHorizontal[a]=l,this}}class ap{constructor(a=!1,l=!0,h="",d="",f=[]){S(this,"modalFlag",void 0),S(this,"modalAddingFlag",void 0),S(this,"currentName",void 0),S(this,"text",void 0),S(this,"preview",void 0),S(this,"updating",!1),S(this,"singleMemorial",!0),S(this,"clearMemorial",!1),this.modalFlag=a,this.modalAddingFlag=l,this.currentName=h,this.text=d,this.preview=f}setUpdating(a){return this.updating=a,this}updateTextByPreview(){this.updating||(this.text=this.preview.filter((a,l)=>a.enabled).map((a,l)=>a.memorial.toString()).join("\r\n"))}}class m7{constructor(a,l){S(this,"person",void 0),S(this,"handler",void 0),S(this,"lastDate",new Date),S(this,"selectionToggle",!1),this.person=a,this.handler=l}static builder(){return new m7(null,()=>{})}setHandler(a){return this.handler=a,this}clickByPerson(a){let l=new Date;this.person?.person!=a.person?(this.person=a,this.lastDate=l,this.selectionToggle=!0):l.getTime()-this.lastDate.getTime()<500?(this.handler(a),this.person=null):(this.lastDate=l,this.selectionToggle=!this.selectionToggle)}reset(){this.person=null,this.selectionToggle=!1}}let qfe=(()=>{class c{isSearching(){return null!=this.search}get showSettings(){return this.stgShowSettings.enabled}set showSettings(l){this.stgShowSettings.setEnabled(l)}get filterMemorials(){return this.stgFilterMemorials.enabled}set filterMemorials(l){this.stgFilterMemorials.setEnabled(l)}get verticalView10(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"10"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView40(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"40"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()}set verticalView(l){this.uiConfig.ui.memorialVerticalView.setBooleanValue(l)}get sortPersonPriests(){return this.uiConfig.ui.sortPersonsPriests.getBooleanValue()}get sortPersonNames(){return this.uiConfig.ui.sortPersonsNames.getBooleanValue()}get pageSize(){let l=this.uiConfig.ui.memorialPageSize.getStringValue();return l?+l:15}get currentPage(){return this.uiConfig.ui.currentMemorialPage.getNumberValue()}set currentPage(l){this.uiConfig.ui.currentMemorialPage.setNumberValue(l)}get currentMemorial(){return this.personsData.text?this.personsData.text:this.uiConfig.ui.currentMemorial.getStringValue()}set currentMemorial(l){this.personsData.text||this.uiConfig.ui.currentMemorial.setStringValue(l)}get persons(){return this.syncMyPersons(),this.myPersons}get personsAllCount(){return this.getPersonsAllCount(this.currentMemorial)}get personsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h,d,f,p,g,m,v,y,_,b,C,x){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"themeSvc",void 0),S(this,"memDataSvc",void 0),S(this,"memLoaderSvc",void 0),S(this,"memImporterSvc",void 0),S(this,"memExporterSvc",void 0),S(this,"memExporterXsvSvc",void 0),S(this,"kafizmySvc",void 0),S(this,"dateEventsSvc",void 0),S(this,"audioSvc",void 0),S(this,"tagsSvc",void 0),S(this,"repeatCountSvc",void 0),S(this,"pagesView",void 0),S(this,"data",void 0),S(this,"memorialsDlg",new ap),S(this,"memorialsDeleteDlg",new ap),S(this,"memorialsDeleteAllDlg",new ap),S(this,"memorialsImportDlg",new ap),S(this,"memorialsExportDlg",new ap),S(this,"memorialsWaitingDlg",new ap),S(this,"personDetailsDlg",new ap),S(this,"personDeleteDlg",new ap),S(this,"memorialsTitleInfoDlg",new ap),S(this,"headerData",Bc.builder()),S(this,"personsClickHandler",m7.builder().setHandler(w=>this.onEditPerson(w))),S(this,"personDetailsData",s7.builder().setOnClick(w=>{this.personDetailsDlg.modalFlag=!1,w&&this.reload()})),S(this,"personsFilters",[]),S(this,"currentMemorialDetector",new ts(null)),S(this,"search",null),S(this,"extraPagesLive",[]),S(this,"extraPagesUsop",[]),S(this,"stgShowSettings",U0.builder()),S(this,"stgFilterMemorials",U0.builder()),S(this,"allSettings",IE.builder().add(this.stgShowSettings).add(this.stgFilterMemorials)),S(this,"settingsData",Th.builder().updateClasses(w=>w.setMemorialSettings(!0))),S(this,"oldPersons",null),S(this,"myPersons",[]),S(this,"nameSvc",new GE),S(this,"sendReadyChanges",ts.builder()),S(this,"sortNamesChanges",ts.builder()),S(this,"sortTypesChanges",ts.builder()),S(this,"searchChanges",ts.builder()),S(this,"pageSizeChanges",ts.builder()),S(this,"personOffsetChanges",ts.builder()),S(this,"offsetChanges",ts.builder()),S(this,"addCommentToNameChanges",ts.builder()),S(this,"toolbarPages",Mu.builder().setItems([]).setOnClick(w=>{this.selectPersonsPage(+w.tag)}).updateClasses(w=>{w.setLabelNormal("label-info")})),S(this,"toolbarMemorials",Mu.builder().setItems([]).setOnClick(w=>{this.selectMemorial(w.tag)}).updateClasses(w=>{w.setLabelNormal("label-info")})),S(this,"toolbarMemorialsFilters",Mu.builder().setItems([]).setOnClick(w=>{this.selectMemorialFlag(w.tag)}).updateClasses(w=>{w.setLabelNormal("label-success")})),S(this,"toolbarMemorialsFlags",Mu.builder().setItems([]).setOnClick(w=>{this.selectMemorialFlag(w.tag)}).updateClasses(w=>{w.setLabelNormal("label-danger")})),S(this,"personChangesSubscription",null),this.config=l,this.uiConfig=h,this.themeSvc=d,this.memDataSvc=f,this.memLoaderSvc=p,this.memImporterSvc=g,this.memExporterSvc=m,this.memExporterXsvSvc=v,this.kafizmySvc=y,this.dateEventsSvc=_,this.audioSvc=b,this.tagsSvc=C,this.repeatCountSvc=x}ngOnInit(){this.personsData.text||(this.personChangesSubscription=this.memDataSvc.getPersons().getChangeDetector().subscribe(l=>this.clearCaches()))}ngOnDestroy(){this.personChangesSubscription&&(this.personChangesSubscription.unsubscribe(),this.personChangesSubscription=null)}ngAfterViewInit(){this.personsData.printerHandler.setHandler(l=>this.onEpubPrint(l)),this.setErrors([this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435"]),this.sortNamesChanges.setUIValue(this.uiConfig.ui.sortPersonsNames),this.sortTypesChanges.setUIValue(this.uiConfig.ui.sortPersonsPriests),this.personsData.readonly||this.audioSvc.stop(),this.isMemorialEnabled()||this.sendReady()}clearCaches(){this.memDataSvc.personsCache.clear(),this.personsClickHandler.reset()}getPersonsAll(l){return this.memDataSvc.personsCache.getCachedResult(l,this.personsData.readonly,this.personsData.classes.getLiveValue())}getPersonsAllCount(l){return this.getPersonsAll(l).length}setErrors(l){this.config.post(()=>{let h=[];this.personsData.text||h.push(Nc.builder().setText("\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f").setOnClick(()=>{this.filterMemorials=!this.filterMemorials})),this.personsData.readonly||h.unshift(Nc.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings})),this.headerData.setErrors(l).setActions(h).updateClasses(d=>d.setAlertClass("alert-success").setAlertShape(""))})}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(l,h,d=!0,f="",p=!1,g=!1,m=!1){let y={"clr-row":d},_=!this.personsClickHandler.person||this.personsClickHandler.person.person==l.person&&this.personsClickHandler.selectionToggle||!this.personsClickHandler.selectionToggle,b=(C,x)=>{if(!_){let w=["bg-","label-info","label-success","label-warning","label-danger"];for(let O=0;O<w.length;O++)if(C.startsWith(w[O]))return}y[C]=x};(f=f.trim())&&f.split(" ").forEach(C=>b(f,!0));for(const C in h)b(C,h[C]);return p||g?y[(g?"hbs":"hs")+this.uiConfig.ui.fontSize.getStringValue()]=!0:y["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,y}printBook(){this.themeSvc.printWindow("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a")||window.print()}isActivePersonHasTag(l){let h=!1;return this.personsClickHandler.person?.person&&(h=oa.tagsHasFlag(this.personsClickHandler.person.person.tags,l)),"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"==l&&(h=!0),h}updatePersonFilterItemsDelayed(){this.config.post(()=>{this.updatePersonFilterItems()})}updatePersonFilterItems(){this.personsData.readonly?this.personsFilters.length&&(this.personsFilters=[]):(this.memDataSvc.memorials?(this.personsFilters=this.memDataSvc.memorials.items.map(l=>l.name).map(l=>Zw.builder().setName(l).setEnabled(this.isActivePersonHasTag(l))),this.personsFilters.unshift(Zw.builder().setName("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c").setEnabled(!1).setSystem(!0),Zw.builder().setName("\u0423\u0434\u0430\u043b\u0438\u0442\u044c").setEnabled(!1).setSystem(!0))):this.personsFilters.length&&(this.personsFilters=[]),this.currentMemorialDetector.checkAndUpdate(this.currentMemorial)&&this.personsClickHandler.reset())}getFilterItems(l){let h=this.memDataSvc.memorials?.items.find(f=>f.name==l),d=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(f=>!this.personsData.readonly||f.enabled).filter(f=>this.personsData.readonly?this.getPersonsAllCount(l)>0:this.getPersonsAllCount(l)>=0).map(f=>f.name).map(f=>ba.builder().setText(f).setTag(f).setSelected(this.tagsSvc.tagsHasFlag(h?h.tags:l,f))):[];return d.unshift(ba.builder().setText("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setTag("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setSelected(this.tagsSvc.tagsHasFlag(h?h.tags:l,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"))),d}syncMyPersons(l=!1){let h=l;h=h||this.sortTypesChanges.checkAndUpdate(),h=h||this.sortNamesChanges.checkAndUpdate(),h=h||this.searchChanges.checkAndUpdate(this.search),h=h||this.pageSizeChanges.checkAndUpdate(this.pageSize),h=h||this.personOffsetChanges.checkAndUpdate(this.uiConfig.ui.currentPersonOffset.getNumberValue()),h=h||this.offsetChanges.checkAndUpdate(this.uiConfig.ui.currentOffset.getNumberValue()),h=h||this.addCommentToNameChanges.checkAndUpdate(this.uiConfig.ui.addCommentToName.getBooleanValue());let d=this.memDataSvc.persons;if(null==this.memDataSvc.memorials?.items.find(f=>f.name==this.currentMemorial)&&this.memDataSvc.memorials&&this.currentMemorial&&this.memDataSvc.memorials.items.length>0&&(this.currentMemorial=this.memDataSvc.memorials.items[0].name,h=!0),!d||d===this.oldPersons&&!h)return!d&&this.myPersons.length>0&&(this.myPersons=[]),void this.sendReady();this.oldPersons=d,this.config.post(()=>this.syncMyPersonsPosted())}syncMyPersonsPosted(){this.sendReady(),this.setErrors([(this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435")+(this.personsData.readonly?this.personsData.classes.isLiveAcceptable(!0)?": \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438":": \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438":"")]);{this.toolbarMemorials.setItems((y=>{let _=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(b=>!this.personsData.readonly||b.enabled).filter(b=>!y||b.name==y).filter(b=>this.personsData.readonly?this.getPersonsAllCount(b.name)>0:this.getPersonsAllCount(b.name)>=0).map(b=>b.name).map(b=>ba.builder().setText(b).setTag(b).setSelected(b==this.currentMemorial)):[];return y||_.unshift(ba.builder().setText("\u0412\u0441\u0435").setTag("").setSelected(!this.currentMemorial)),_})(this.personsData.text)),this.updatePersonFilterItems(),this.toolbarMemorialsFilters.setItems(this.getFilterItems(this.currentMemorial));let m=["\u0421\u043b\u0430\u0432\u0430 1","\u0421\u043b\u0430\u0432\u0430 2","\u0421\u043b\u0430\u0432\u0430 3","\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"],v=this.memDataSvc.memorials?.items.find(y=>y.name==this.currentMemorial);this.toolbarMemorialsFlags.setItems(m.map(y=>ba.builder().setText(y).setTag(y).setSelected(!!v&&this.tagsSvc.tagsHasFlag(v.tags,y))))}let l=this.search?.toLowerCase(),h=[...this.getPersonsAll(this.currentMemorial).filter(g=>!l||g.name.toLowerCase().indexOf(l)>=0)],d=Math.ceil(h.length/this.pageSize);this.currentPage>d&&(this.currentPage=1);let f=this.currentPage?this.pageSize*(this.currentPage-1):0,p=this.currentPage?this.pageSize*this.currentPage-1:h.length-1;(this.sortPersonPriests||this.sortPersonNames)&&(h=ri.sortPersons(h,g=>g,this.sortPersonNames,this.sortPersonPriests));{let g=this.uiConfig.ui.currentOffset.getNumberValue(),m=this.uiConfig.ui.currentPersonOffset.getNumberValue();g<0&&(g=m);let v=this.uiConfig.ui.addCommentToName.getBooleanValue(),y=ii.getKafizmNumberBy(17,g),_=ii.getKafizmNumberBy(17,m);this.myPersons=h.map(b=>{let C=this.nameSvc.getPrefixedName(b.name),x=ri.isPriest(b),w=b.kafizma==y,O=b.kafizma==_,D=new wi;D.load(b.description);let T=D.getValue(wi.TEXT);T&&T.length>10&&(T=T.substring(0,8)+"..");let M=this.repeatCountSvc.getRepeatCountAndFirstMemorial(b.tags),k=v&&this.uiConfig.ui.addRepeatCommentToName.getBooleanValue()&&M.repeatCount>1,E=""+(!k||this.currentMemorial!=M.firstMemorialName&&this.currentMemorial?"":M.repeatCount),P=k&&M.repeatCount>0&&this.currentMemorial!=M.firstMemorialName&&!!this.currentMemorial;return E&&E.length>3&&(E=E.substring(0,2)+"+"),g7.builder().setPrefix(C.prefix).setName(C.name+(v&&T?" ("+T+")":"")).setBadge(b.kafizma>0?""+b.kafizma:"").setX(k&&E?"x"+E:"").setPerson(b).addClassVertical("cursor",!0).addClassVertical("bg-4",!P&&x&&b.live).addClassVertical("bg-5",!P&&!x&&b.live).addClassVertical("bg-3",!P&&!b.live).addClassVertical("bg-6",P).addClassHorizontal("cursor",!0).addClassHorizontal("label",!0).addClassHorizontal("label-success",!P&&x&&b.live).addClassHorizontal("label-info",!P&&!x&&b.live).addClassHorizontal("label-warning",!P&&!b.live).addClassHorizontal("label-orange",!P&&!b.live).addClassHorizontal("label-danger",P).addClassBadgeHorizontal("badge",!0).addClassBadgeHorizontal("badge-purple",w&&b.live).addClassBadgeHorizontal("badge-danger",!w&&O&&b.live).addClassBadgeHorizontal("badge-light-blue",!(w||O)&&b.live)}).filter((b,C,x)=>f<=C&&C<=p)}this.toolbarPages.setItems([ba.builder().setText("\u0412\u0441\u0435").setTag("0").setSelected(0==this.currentPage)].concat(Array.from(Array(d).keys()).map(g=>g+1).map(g=>ba.builder().setText(""+g).setTag(""+g).setSelected(g==this.currentPage))))}sendReady(){this.sendReadyChanges.checkAndUpdate(!0)&&this.config.messageBus.putMessage(Hy.builder().setSender(this.personsData.id).setTarget(this.personsData.targetId))}getMemorialPageText(l,h){let d=this.uiConfig.ui.addCommentToName.getBooleanValue(),f=l.filter(g=>g.person).map(g=>g.person).filter(g=>g.live==h).map(g=>{if(!d)return g.name;let m=new wi;m.load(g.description);let v=m.getValue(wi.TEXT);v&&v.length>10&&(v=v.substring(0,8)+"..");let y=this.repeatCountSvc.getRepeatCountAndFirstMemorial(g.tags),_=d&&this.uiConfig.ui.addRepeatCommentToName.getBooleanValue()&&y.repeatCount>1,b=""+(!_||this.currentMemorial!=y.firstMemorialName&&this.currentMemorial?"":y.repeatCount),C=_&&y.repeatCount>0&&this.currentMemorial!=y.firstMemorialName&&!!this.currentMemorial;return b&&b.length>10&&(b=b.substring(0,8)+".."),(C?"-":"")+g.name+(d&&v?" ("+v+")":"")+(d&&g.live&&b?" x"+b:"")}).join(", "),p=this.uiConfig.ui.memorialsTitleRemark.getStringValue();return p&&(p=p.split(",").filter(g=>!!g).map(g=>g.trim()).map(g=>g.startsWith("*")?g:"*"+g).join(",")),this.personsData.readonly?this.personsData.classes.isLiveAcceptable(h)&&f?(h?`${p||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+f:"":f?(h?`${p||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+f:""}updateSelectedPage(){this.toolbarPages.items.forEach(l=>+l.tag==this.currentPage)}scrollToPersons(){return this.pagesView.nativeElement.scrollIntoView(!0),this}reSyncView(l){this.config.post(()=>{this.oldPersons=null,l&&l()})}selectPersonsPage(l){this.currentPage=l,this.personsClickHandler.reset(),this.reSyncView(()=>{this.scrollToPersons()})}selectMemorialFlag(l){let h=this.memDataSvc.memorials?.items.find(d=>d.name==this.currentMemorial);h&&(h.tags=this.tagsSvc.tagsHasFlag(h.tags,l)?oa.removeTag(h.tags,l):oa.addTagToTags(h.tags,l),this.memDataSvc.getMemorials().save(h,!0).then(d=>{this.reload()}))}selectMemorial(l){this.currentMemorial=l,this.reSyncView(),this.config.post(()=>{this.scrollToPersons()})}addMemorial(){this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!0,this.memorialsDlg.currentName=""}editMemorial(){this.currentMemorial&&(this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!1,this.memorialsDlg.currentName=this.currentMemorial)}deleteMemorial(){this.memorialsDeleteDlg.modalFlag=!0,this.memorialsDeleteDlg.currentName=this.currentMemorial}deleteAll(){this.memorialsDeleteAllDlg.modalFlag=!0,this.memorialsDeleteAllDlg.currentName=this.currentMemorial}reload(){this.memDataSvc.getMemorials().reloadMemorials(l=>{l&&this.memDataSvc.getPersons().reloadPersons()})}newMemorial(l){this.memDataSvc.memorials?.newMemorial(l,h=>{h.success?(this.currentMemorial=l,this.reload()):this.config.addAlert(Pr.of(h.error,"Ok",30))})}onAddNewMemorial(){this.newMemorial(this.memorialsDlg.currentName),this.memorialsDlg.modalFlag=!1}onChangeMemorial(){let l=this.memDataSvc.memorials?.items.find(h=>h.name==this.currentMemorial);l&&(l.name=this.memorialsDlg.currentName,this.currentMemorial=l.name,this.config.post(()=>this.reload(),100)),this.memorialsDlg.modalFlag=!1}onDeleteAllPersons(){this.memorialsDeleteAllDlg.modalFlag=!1,this.memDataSvc.getMemorials().deleteAll().then(l=>{l&&l.success&&this.memDataSvc.getPersons().deleteAll(-1).then(h=>{h&&h.success&&(this.currentMemorial="",this.reload())})})}onDeleteMemorial(){let l=this.memDataSvc.memorials?.items.find(d=>d.name==this.currentMemorial),h=this.memDataSvc.memorials?.items.find(d=>d.name!=this.currentMemorial);l&&(this.currentMemorial=h?h.name:"",this.memDataSvc.memorials?.deleteMemorial(l,d=>{this.reload()})),this.memorialsDeleteDlg.modalFlag=!1}toggleSearching(){this.search=null==this.search?"":null}get visible(){let l=this.memDataSvc.memorials?.items.find(h=>h.name==this.currentMemorial);return!!l&&l.enabled}set visible(l){let h=this.memDataSvc.memorials?.items.find(d=>d.name==this.currentMemorial);h&&(h.enabled=l)}toggleVisible(){let l=this.memDataSvc.memorials?.items.find(h=>h.name==this.currentMemorial);l&&(l.enabled=!l.enabled)}importMemorials(){this.memorialsImportDlg.modalFlag=!0,this.memorialsImportDlg.currentName=this.currentMemorial,!this.memorialsImportDlg.text&&this.persons.length&&(this.memorialsImportDlg.text=this.getCurrentMemorialText())}getWordName(l){let h="";switch(Math.floor(l%10)){case 1:h="\u0438\u043c\u044f";break;case 2:case 3:case 4:h="\u0438\u043c\u0435\u043d\u0438";break;default:h="\u0438\u043c\u0451\u043d"}return h}onPersonFilterClick(l,h,d){l.stopPropagation(),h.person&&("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"==d.name?this.onEditPerson(h):"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"==d.name?this.personDeleteDlg.modalFlag=!0:(h.person.tags=oa.addTagToTags(h.person.tags,d.name),this.memDataSvc.getPersons().save(-1,h.person,!0))),this.updatePersonFilterItemsDelayed()}onPersonClick(l,h){l.stopPropagation();let d=h.person.offset;d>=0&&!this.personsData.readonly&&this.uiConfig.ui.currentPersonOffset.setNumberValue(d),this.personsClickHandler.clickByPerson(h),this.updatePersonFilterItemsDelayed()}getTags(l=""){let h="";return this.memDataSvc.memorials?.items.forEach(d=>{d.name==(l||this.currentMemorial)&&(h+=d.name)}),h}onClearImportPreview(){this.memorialsImportDlg.preview=[],this.memorialsImportDlg.text=this.getCurrentMemorialText()}onImportMemorial(){this.memorialsWaitingDlg.modalFlag=!0,this.memorialsImportDlg.modalFlag=!1,this.memorialsImportDlg.singleMemorial&&this.memorialsImportDlg.clearMemorial&&this.clearCurrentMemorial(!1),this.onImportMemorialSource(this.memorialsImportDlg.text,this.memorialsImportDlg.singleMemorial?[]:this.memorialsImportDlg.preview,this.memorialsImportDlg.singleMemorial)}onAddNewPerson(){let l=`[${this.currentMemorial}]\n\u0418\u043c\u044f\u0420\u0435\u043a`;this.onImportMemorialSource(l,[YE.builder().setEnabled(!0).setMemorial(this.memLoaderSvc.previewPersons(l)[0])],!0)}onImportMemorialSource(l,h,d){let f=h,p=f.find(m=>"\u0432\u0441\u0435"===m.memorial?.memorial?.name),g=()=>{if(f.length){let m=f[0];f=f.slice(1);let v=m.memorial?.memorial?.name;m.enabled&&v?this.memDataSvc.memorials?.items.find(_=>_.name==v)?this.config.post(g):this.memDataSvc.memorials?.newMemorial(v,_=>{_.success?this.config.post(g):this.memDataSvc.getMemorials().reloadMemorials(b=>{this.config.post(g)})}):this.config.post(g)}else this.memDataSvc.getMemorials().reloadMemorials(m=>{m?this.memLoaderSvc.addPersons(y=>{let _=this.memDataSvc.memorials?.items.find(b=>b.name==(d?this.currentMemorial:y))?._id;return _||-1},l,y=>this.getTags(d?this.currentMemorial:y),!0,()=>{let y=this.memDataSvc.getMemorials().getMemorials()?.items.find(_=>"\u0432\u0441\u0435"===_.name);p&&y?this.memDataSvc.getMemorials().deleteMemorial(y).then(_=>{(!_||!_.success)&&this.config.addAlert(Pr.of('\u041d\u0435 \u043c\u043e\u0433\u0443 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "\u0432\u0441\u0435".',"\u041e\u041a",15)),this.memorialsWaitingDlg.modalFlag=!1,this.reload()}):(this.memorialsWaitingDlg.modalFlag=!1,this.reload())}):this.memorialsWaitingDlg.modalFlag=!1})};this.config.post(g)}get allMemorialEnabled(){return this.memorialsImportDlg.preview.map(l=>l.enabled).reduce((l,h)=>l&&h,!0)}set allMemorialEnabled(l){this.memorialsImportDlg.setUpdating(!0),this.memorialsImportDlg.preview.forEach(h=>h.enabled=l),this.memorialsImportDlg.setUpdating(!1),this.memorialsImportDlg.updateTextByPreview()}onImportFile(l){0!==l.target.files.length&&this.memImporterSvc.onLoadAnyFile(l.target.files[0],"",h=>{this.memorialsImportDlg.text=h,this.memorialsImportDlg.preview=this.memLoaderSvc.previewPersons(h).map(d=>YE.builder().setMemorial(d).setEnabled(!0)),this.memorialsImportDlg.preview.forEach(d=>d.setOnEnabledChanged(()=>this.memorialsImportDlg.updateTextByPreview()))})}exportMemorials(){this.memorialsExportDlg.modalFlag=!0,this.memorialsExportDlg.currentName=this.currentMemorial}onSaveAs(l,h=!1){this.memorialsExportDlg.modalFlag=!1,this.onSaveAllMemorials(l,!0,h)}getCurrentMemorialText(){let l=this.memDataSvc.memorials?.items.find(g=>g.name==this.currentMemorial);if(!l)return"";let f="",p=this.memDataSvc.persons?.items;return f=this.memExporterSvc.getMemorialsXmlString(p,[this.currentMemorial],[l.tags]),f=this.memLoaderSvc.convertXmlToString(f),f}onSaveAllMemorials(l="xml",h=!0,d=!0){let f=d?[]:[""],p=d?[]:[""],g=this.memDataSvc.getMemorials().getActivePredefinedMemorialsRaw();this.memDataSvc.memorials?.items.forEach(v=>{let y=null==g.find(_=>_==v.name);h&&(y=!0),v.enabled&&y&&(f.push(v.name),p.push(v.tags))}),(()=>{let v="",y=this.memDataSvc.persons?.items;switch(l){case"xml":v=this.memExporterSvc.getMemorialsXmlString(y,f,p,d);break;case"csv":v=this.memExporterXsvSvc.getMemorialsString(y,f,p,";");break;case"tsv":v=this.memExporterXsvSvc.getMemorialsString(y,f,p,"\t");break;default:v=this.memExporterSvc.getMemorialsXmlString(y,f,p,d),v=this.memLoaderSvc.convertXmlToString(v)}const _=(new Date).toISOString().split("T")[0];let b=l;if(this.config.isPlatformAndroid())this.kafizmySvc.addTempFile(`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${b}`,v).then(C=>{C&&C.success&&xh.startDownload(C.fileName,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${_}.${b}`)});else{const C=new TextEncoder,x=new Blob([C.encode(v)],{type:"octet/stream"});xh.saveData(x,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${_}.${b}`)}})()}onPagesCount(l,h,d){this.config.post(()=>{this.onPagesCountDirect(l,h,d)})}onPagesCountDirect(l,h,d){d?this.extraPagesLive=[]:this.extraPagesUsop=[];let f=l-h,p=0;for(;f>0;)f=Math.max(0,f-h),p+=h,d?this.extraPagesLive.push(p):this.extraPagesUsop.push(p)}onEditPerson(l){l.person&&!this.personsData.readonly&&(this.personDetailsData.setPerson(l.person),this.personDetailsDlg.modalFlag=!0)}isMemorialEnabled(l){let h=!1;return this.personsData.readonly||(h=!0),this.personsData.classes.slava1Zdrav&&this.uiConfig.ui.memorialSlava1Zdrav.getBooleanValue()&&(h=!0===l||void 0===l),this.personsData.classes.slava2Zdrav&&this.uiConfig.ui.memorialSlava2Zdrav.getBooleanValue()&&(h=!0===l||void 0===l),this.personsData.classes.slava3Zdrav&&this.uiConfig.ui.memorialSlava3Zdrav.getBooleanValue()&&(h=!0===l||void 0===l),this.personsData.classes.slava1Upok&&this.uiConfig.ui.memorialSlava1Upok.getBooleanValue()&&(h=!1===l||void 0===l),this.personsData.classes.slava2Upok&&this.uiConfig.ui.memorialSlava2Upok.getBooleanValue()&&(h=!1===l||void 0===l),this.personsData.classes.slava3Upok&&this.uiConfig.ui.memorialSlava3Upok.getBooleanValue()&&(h=!1===l||void 0===l),h}onEpubPrint(l){let h=[[],[],[]],d=[[],[],[]],p=this.uiConfig.ui.addCommentToName.getBooleanValue()&&this.uiConfig.ui.addRepeatCommentToName.getBooleanValue(),g=(m,v)=>{if(!p)return;let y=this.repeatCountSvc.getRepeatCountAndFirstMemorial(m.tags);if(y.repeatCount<=1)return;let _=""+(!p||this.currentMemorial!=y.firstMemorialName&&this.currentMemorial?"":y.repeatCount);v[0][v[0].length-1]+=p&&p&&y.repeatCount>0&&this.currentMemorial!=y.firstMemorialName&&this.currentMemorial?"-":"",v[2][v[2].length-1]+=p&&_?" x"+_:""};if(this.persons.filter(m=>m.person?.live).forEach(m=>{h[0].push(""),h[1].push(m.prefix),h[2].push(m.name),g(m.person,h)}),this.persons.filter(m=>!m.person?.live).forEach(m=>{d[0].push("+"),d[1].push(m.prefix),d[2].push(m.name),g(m.person,d)}),h[0].length>0&&this.isMemorialEnabled(!0)||d[0].length>0&&this.isMemorialEnabled(!1)){let m=[],v=[],y=[],_=this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435";h[0].length&&(m.push(_+" - \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"),v.push(h),y.push([0])),d[0].length&&(m.push(_+" - \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"),v.push(d),y.push([0])),m.length>0&&l.addRequest(D1.builder().setName(_).setBookNames(["\u0436\u0438\u0432","\u043f\u0440\u0435\u0444\u0438\u043a\u0441","\u0438\u043c\u044f"]).setPsalomName("").setAllBooksChapters(m).setAllBooks(v).setEmptyFirstLines(y).setShowLineIndexes(!1))}}onEditTitleInfo(){this.memorialsTitleInfoDlg.modalFlag=!0,this.memorialsTitleInfoDlg.currentName=this.uiConfig.ui.memorialsTitleRemark.getStringValue()}onEndTitleInfoDlg(){this.uiConfig.ui.memorialsTitleRemark.setStringValue(this.memorialsTitleInfoDlg.currentName),this.memorialsTitleInfoDlg.modalFlag=!1}getFilterClasses(l){let h={label:!0,"label-danger":!l.enabled&&!l.system,"label-success":l.enabled&&!l.system};return h["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,l.clazz.checkAndGetValue(h)}onDeleteCurrentPerson(){this.personsClickHandler.person&&this.personsClickHandler.person.person&&(this.memDataSvc.persons?.deletePerson(this.personsClickHandler.person.person),this.reload()),this.personDeleteDlg.modalFlag=!1}clearCurrentMemorial(l){let h=[];this.persons.forEach(d=>{d.person&&(d.person.tags=oa.removeTag(d.person.tags,this.currentMemorial),d.person.tags?this.memDataSvc.getPersons().save(-1,d.person,!0):h.push(d.person))}),this.memDataSvc.getPersons().deletePersons(h),l&&this.reload()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(bo),z(jE),z(d7),z(Gfe),z(Qfe),z(jfe),z(Sg),z(QE),z(E1),z(oa),z(qE))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-persons"]],viewQuery:function(l,h){if(1&l&&mi(Hrt,5),2&l){let d;jt(d=Zt())&&(h.pagesView=d.first)}},inputs:{data:"data"},decls:172,vars:28,consts:[[3,"click",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[3,"data"],["clrForm",""],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u043b\u0435\u0431\u043d\u0430","name","input",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","name","input",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-danger"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","singleMemorial",3,"ngModel","ngModelChange"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","clearMemorial",3,"ngModel","disabled","ngModelChange"],["class","badge",4,"ngIf"],["type","checkbox","clrCheckbox","","value","mergeNames","name","mergeNames",3,"ngModel","ngModelChange"],[1,"clr-form"],["clrTextarea","","name","description","required","",3,"ngModel","ngModelChange"],[1,"clr-row"],[1,"clr-col-6","clr-hidden-sm-up"],["type","button",1,"btn","btn-link","btn-block",3,"click"],["shape","recycle"],[1,"clr-hidden-md-down"],[1,"btn","btn-link","btn-block"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b","accept",".xml,.json,.csv,.tsv,.txt",1,"button-input",3,"change"],["shape","upload"],[1,"clr-col-3","clr-hidden-xs-down"],["type","button",1,"btn","btn-outline","btn-block",3,"click"],["shape","ban"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"clr-col-6","clr-hidden-xs-down"],[1,"clr-col-6"],[1,"clr-col-12"],["tpl1",""],["paramTemplateVerticalX",""],["paramTemplateVertical",""],["paramTemplateHorizontal",""],[3,"click"],[3,"enabled","name"],[1,"no-print","s0"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"clr-row","no-print","clr-hidden-sm-down",3,"hidden"],[1,"clr-col-2"],[1,"btn","btn-link","btn-block",3,"click"],["shape","search"],["shape","import"],["shape","export"],[1,"btn","btn-link","btn-block",3,"clrCloseMenuOnItemClick"],["clrDropdownTrigger","",1,"btn","btn-link","btn-block"],["shape","add-text"],["shape","angle","direction","down"],[4,"clrIfOpen"],["shape","times"],["clrPosition","bottom-right",4,"clrIfOpen"],[1,"clr-row","left-space-0","right-space-0","no-print","clr-hidden-xs-down","clr-hidden-md-up",3,"hidden"],[1,"clr-col-3"],["clrDropdownTrigger","",1,"btn","btn-link"],["shape","form"],[1,"clr-row","left-space-0","right-space-0","no-print","clr-hidden-sm-up",3,"hidden"],[1,"clr-col-4"],["class","no-print",4,"ngIf"],["pagesView",""],[1,"no-print"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pageBreak","pageBreakBefore"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],["aria-hidden","true",1,"dropdown-header"],["aria-label","Dropdown header Action 1","clrDropdownItem","",3,"click"],["aria-label","Dropdown header Action 2","clrDropdownItem","",3,"click"],["clrPosition","bottom-right"],["aria-label","Dropdown header Action 3","clrDropdownItem","",3,"click"],["role","separator","aria-hidden","true",1,"dropdown-divider"],["clrInput","","placeholder","\u0418\u043c\u044f","name","input",3,"ngModel","ngModelChange"],[1,"badge"],["class","pageBreakBefore",4,"ngIf"],[4,"ngIf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"ngClass"],["class","print-only",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"print-only"]],template:function(l,h){1&l&&(K(0,tst,105,29,"div",0),R(1,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.personDetailsDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(2,"h3",2),se(3,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u044b"),N(),R(4,"div",3),pe(5,"app-person-details",4),N()(),R(6,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.memorialsTitleInfoDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(7,"h3",2),se(8,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u043b\u0435\u0431\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),N(),R(9,"div",3)(10,"form",5)(11,"clr-input-container")(12,"label"),se(13,"\u0422\u0435\u043a\u0441\u0442:"),N(),R(14,"input",6),ie("ngModelChange",function(f){return h.memorialsTitleInfoDlg.currentName=f}),N(),R(15,"clr-control-helper"),se(16,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041c\u043e\u043b\u0435\u0431\u0435\u043d, \u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435"),N()()()(),R(17,"div",7)(18,"button",8),ie("click",function(){return h.memorialsTitleInfoDlg.modalFlag=!1}),se(19,"\u041e\u0442\u043c\u0435\u043d\u0430"),N(),R(20,"button",9),ie("click",function(){return h.onEndTitleInfoDlg()}),se(21,"Ok"),N()()(),R(22,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.memorialsDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(23,"h3",2),se(24),N(),R(25,"div",3)(26,"form",5)(27,"clr-input-container")(28,"label"),se(29,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:"),N(),R(30,"input",10),ie("ngModelChange",function(f){return h.memorialsDlg.currentName=f}),N()()()(),R(31,"div",7)(32,"button",8),ie("click",function(){return h.memorialsDlg.modalFlag=!1}),se(33,"\u041e\u0442\u043c\u0435\u043d\u0430"),N(),R(34,"button",11),ie("click",function(){return h.memorialsDlg.modalAddingFlag?h.onAddNewMemorial():h.onChangeMemorial()}),se(35,"Ok"),N()()(),R(36,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.personDeleteDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(37,"h3",2),se(38,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438"),N(),R(39,"div",3)(40,"p")(41,"button",12),pe(42,"clr-icon",13),N(),se(43),N()(),R(44,"div",7)(45,"button",8),ie("click",function(){return h.personDeleteDlg.modalFlag=!1}),se(46,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),N(),R(47,"button",14),ie("click",function(){return h.onDeleteCurrentPerson()}),se(48,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N()()(),R(49,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.memorialsDeleteDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(50,"h3",2),se(51,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),N(),R(52,"div",3)(53,"p")(54,"button",12),pe(55,"clr-icon",13),N(),se(56),N()(),R(57,"div",7)(58,"button",8),ie("click",function(){return h.memorialsDeleteDlg.modalFlag=!1}),se(59,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),N(),R(60,"button",9),ie("click",function(){return h.onDeleteMemorial()}),se(61,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N()()(),R(62,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.memorialsDeleteAllDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(63,"h3",2),se(64,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"),N(),R(65,"div",3)(66,"p")(67,"button",15),pe(68,"clr-icon",13),N(),se(69," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435?"),N()(),R(70,"div",7)(71,"button",8),ie("click",function(){return h.memorialsDeleteAllDlg.modalFlag=!1}),se(72,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),N(),R(73,"button",14),ie("click",function(){return h.onDeleteAllPersons()}),se(74,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()()(),R(75,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.memorialsImportDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(76,"h3",2),se(77,"\u0418\u043c\u043f\u043e\u0440\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),N(),R(78,"div",3)(79,"clr-toggle-container",16)(80,"label"),se(81,"\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438:"),N(),R(82,"clr-toggle-wrapper")(83,"input",17),ie("ngModelChange",function(f){return h.allMemorialEnabled=f}),N(),R(84,"label"),se(85,"\u0412\u0441\u0435"),N()(),K(86,nst,4,4,"clr-toggle-wrapper",18),N(),R(87,"clr-checkbox-container")(88,"clr-checkbox-wrapper")(89,"input",19),ie("ngModelChange",function(f){return h.memorialsImportDlg.singleMemorial=f}),N(),R(90,"label"),se(91,"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),N()(),R(92,"clr-checkbox-wrapper")(93,"input",20),ie("ngModelChange",function(f){return h.memorialsImportDlg.clearMemorial=f}),N(),R(94,"label"),se(95,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "),K(96,ist,2,0,"span",21),N()(),R(97,"clr-checkbox-wrapper")(98,"input",22),ie("ngModelChange",function(f){return h.uiConfig.ui.mergeNameOnImport.rawValue=f}),N(),R(99,"label"),se(100),N()()(),R(101,"form",23)(102,"clr-textarea-container")(103,"label"),se(104,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d:"),N(),R(105,"textarea",24),ie("ngModelChange",function(f){return h.memorialsImportDlg.text=f}),N(),R(106,"clr-control-helper"),se(107,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u043f\u0430\u0442\u0440. \u041a\u0438\u0440\u0438\u043b\u043b (\u043f\u0430\u0442\u0440\u0438\u0430\u0440\u0445 \u041a\u0438\u0440\u0438\u043b\u043b)"),N(),R(108,"clr-control-error"),se(109,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043f\u0443\u0441\u0442\u043e\u0439!"),N()()()(),R(110,"div",7)(111,"div",25)(112,"div",26)(113,"button",27),ie("click",function(){return h.onClearImportPreview()}),pe(114,"clr-icon",28),R(115,"span",29),se(116," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()(),R(117,"label",30)(118,"input",31),ie("change",function(f){return h.onImportFile(f)}),N(),pe(119,"clr-icon",32),N()(),R(120,"div",33)(121,"button",27),ie("click",function(){return h.onClearImportPreview()}),pe(122,"clr-icon",28),R(123,"span",29),se(124," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()()(),R(125,"div",33)(126,"label",30)(127,"input",31),ie("change",function(f){return h.onImportFile(f)}),N(),pe(128,"clr-icon",32),N()(),R(129,"div",26)(130,"button",34),ie("click",function(){return h.memorialsImportDlg.modalFlag=!1}),pe(131,"clr-icon",35),N(),R(132,"button",36),ie("click",function(){return h.onImportMemorial()}),se(133,"\u041e\u041a"),N()(),R(134,"div",37)(135,"div",25)(136,"div",38)(137,"button",34),ie("click",function(){return h.memorialsImportDlg.modalFlag=!1}),pe(138,"clr-icon",35),N()(),R(139,"div",38)(140,"button",36),ie("click",function(){return h.onImportMemorial()}),se(141,"\u041e\u041a"),N()()()()()()(),R(142,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.memorialsExportDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(143,"h3",2),se(144,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a"),N(),R(145,"div",3),se(146," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430: "),N(),R(147,"div",7)(148,"div",25)(149,"div",39)(150,"button",8),ie("click",function(){return h.onSaveAs("tsv",!1)}),se(151,"TSV"),N(),R(152,"button",8),ie("click",function(){return h.onSaveAs("xml",!1)}),se(153,"XML"),N(),R(154,"button",8),ie("click",function(){return h.onSaveAs("xml",!0)}),se(155,"XML2"),N(),R(156,"button",9),ie("click",function(){return h.onSaveAs("txt",!1)}),se(157,"TXT"),N()()()()(),R(158,"clr-modal",1),ie("clrModalOpenChange",function(f){return h.memorialsWaitingDlg.modalFlag=f})("click",function(f){return f.stopPropagation()}),R(159,"h3",2),se(160,"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),N(),R(161,"div",3),pe(162,"app-dynamic-spinner"),N(),pe(163,"div",7),N(),K(164,ost,2,8,"ng-template",null,40,fa),K(166,fst,4,4,"ng-template",null,41,fa),K(168,Cst,1,1,"ng-template",null,42,fa),K(170,kst,2,1,"ng-template",null,43,fa)),2&l&&(L("ngIf",h.isMemorialEnabled()),F(1),L("clrModalOpen",h.personDetailsDlg.modalFlag),F(4),L("data",h.personDetailsData),F(1),L("clrModalOpen",h.memorialsTitleInfoDlg.modalFlag),F(8),L("ngModel",h.memorialsTitleInfoDlg.currentName),F(8),L("clrModalOpen",h.memorialsDlg.modalFlag),F(2),gi("",h.memorialsDlg.modalAddingFlag?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435"," \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),F(6),L("ngModel",h.memorialsDlg.currentName),F(4),L("disabled",!h.memorialsDlg.currentName),F(2),L("clrModalOpen",h.personDeleteDlg.modalFlag),F(7),gi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",h.personsClickHandler.person?h.personsClickHandler.person.name:"\u041e\u0448\u0438\u0431\u043a\u0430","?"),F(6),L("clrModalOpen",h.memorialsDeleteDlg.modalFlag),F(7),gi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a '",h.memorialsDeleteDlg.currentName?h.memorialsDeleteDlg.currentName:"\u041e\u0448\u0438\u0431\u043a\u0430","'?"),F(6),L("clrModalOpen",h.memorialsDeleteAllDlg.modalFlag),F(13),L("clrModalOpen",h.memorialsImportDlg.modalFlag),F(8),L("name","all")("value","all")("ngModel",h.allMemorialEnabled),F(3),L("ngForOf",h.memorialsImportDlg.preview),F(3),L("ngModel",h.memorialsImportDlg.singleMemorial),F(4),L("ngModel",h.memorialsImportDlg.clearMemorial)("disabled",!h.memorialsImportDlg.singleMemorial),F(3),L("ngIf",!h.memorialsImportDlg.singleMemorial),F(2),L("ngModel",h.uiConfig.ui.mergeNameOnImport.rawValue),F(2),Ht(h.uiConfig.ui.mergeNameOnImport.description),F(5),L("ngModel",h.memorialsImportDlg.text),F(37),L("clrModalOpen",h.memorialsExportDlg.modalFlag),F(16),L("clrModalOpen",h.memorialsWaitingDlg.modalFlag))},dependencies:[di,vi,Sn,eh,so,_r,Hf,$f,iB,ls,J5,Kie,yk,qp,_k,Zp,ux,u_,pB,dre,yx,LB,NB,RB,XS,Qm,KS,YS,JS,s_,jy,Cc,cd,Pa,Wy,Vm,ma,kf,nc,Zfe,A1,XE,p7,I1,zrt],styles:[".button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:7rem}.s0[_ngcontent-%COMP%]{font-size:.7rem!important;line-height:1.2rem!important}.left-space-0[_ngcontent-%COMP%]{margin-left:0!important}.right-space-0[_ngcontent-%COMP%]{margin-right:0!important}"]})),c})();class v7{constructor(){S(this,"printOnly",!1)}static builder(){return new v7}setPrintOnly(a){return this.printOnly=a,this}}class y7 extends Ci{constructor(a,l,h,d,f,p){super("",d,f),S(this,"genName",void 0),S(this,"svgWidth",void 0),S(this,"svgHeight",void 0),S(this,"classes",void 0),this.genName=a,this.svgWidth=l,this.svgHeight=h,this.classes=p}static builder(){return new y7("",512,512,null,null,v7.builder())}setGenName(a){return this.genName=a,this}setSvgWidth(a){return this.svgWidth=a,this}setSvgHeight(a){return this.svgHeight=a,this}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}}let Mst=(()=>{class c{get svgData(){return this.data}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){var l=this.svgData.classes;return{"print-only":l&&l.printOnly}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-svg"]],inputs:{data:"data"},decls:1,vars:5,consts:[[3,"genName","svgWidth","svgHeight","type","ngClass"]],template:function(l,h){1&l&&pe(0,"app-svg-js-image",0),2&l&&L("genName",h.genName)("svgWidth",h.svgWidth)("svgHeight",h.svgHeight)("type",512)("ngClass",h.getClasses())},dependencies:[di,nc],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();function Est(c,a){if(1&c&&(R(0,"span"),se(1),N()),2&c){const l=q(2);F(1),Ht(l.text)}}function Ast(c,a){1&c&&pe(0,"app-add-component",5),2&c&&L("component",a.$implicit)}function Ist(c,a){if(1&c&&(R(0,"div"),K(1,Ast,1,1,"app-add-component",4),N()),2&c){const l=q(2);F(1),L("ngForOf",l.components)}}function Pst(c,a){if(1&c&&(R(0,"div",9),pe(1,"app-add-component",5),N()),2&c){const l=a.$implicit;L("ngClass",q(3).getColClass(l)),F(1),L("component",l)}}function Rst(c,a){if(1&c&&(R(0,"div",6)(1,"div",7),K(2,Pst,2,2,"div",8),N()()),2&c){const l=q(2);F(2),L("ngForOf",l.components)}}function Fst(c,a){if(1&c){const l=ct();R(0,"div",1),ie("click",function(d){return Ee(l),Ae(q().onClick(d))}),K(1,Est,2,1,"span",2),K(2,Ist,2,1,"div",2),K(3,Rst,3,1,"div",3),N()}if(2&c){const l=q();L("ngClass",l.getClasses()),F(1),L("ngIf",!l.components.length),F(1),L("ngIf",!l.isRow),F(1),L("ngIf",l.isRow)}}let _7=(()=>{class c{get divData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),S(this,"checkLater",DS.builder().setEnabled(!1)),this.config=l}get component(){return this.divData.components.length?this.divData.components[0]:null}get components(){return this.divData.components}get isRow(){return this.divData.classes.sClasses.findIndex((l,h,d)=>"clr-row"==l)>=0}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.config.post(()=>{this.checkLater.setConfig(this.config).setWaitingForSenderId(this.divData.waitingForSenderId),this.checkLater.checkEnabled()})}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return this.divData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var l=this.divData.classes;let h={ftext:l.fineText,pageBreak:l.pageBreakAfter,pageBreakBefore:l.pageBreakBefore};return l.sClasses.filter(d=>"clr-row"!=d&&!d.startsWith("clr-col-")).forEach(d=>h[d]=!0),h}getColClass(l){let h=this.getColClassRaw(l);return l.detector.checkAndGetValue(h)}getColClassRaw(l){let h={"clr-col":!0};return l.component===c&&l.data.classes.sClasses.filter(f=>f.startsWith("clr-col-")).forEach(f=>h[f]=!0),h}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-div"]],inputs:{data:"data"},decls:1,vars:1,consts:[[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],[4,"ngIf"],["class","clr-col-12",4,"ngIf"],[3,"component",4,"ngFor","ngForOf"],[3,"component"],[1,"clr-col-12"],[1,"clr-row"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(l,h){1&l&&K(0,Fst,4,4,"div",0),2&l&&L("ngIf",h.checkLater.enabled)},dependencies:[di,vi,Sn,rc],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class b7 extends ku{constructor(){super(),S(this,"fineText",!1),S(this,"pageBreakBefore",!1),S(this,"pageBreakAfter",!1),S(this,"printOnly",!1),S(this,"noPrint",!1),S(this,"sClasses",[])}static builder(){return new b7}setFineText(a){return this.fineText=a,this.markChanged(),this}setPageBreakBefore(a){return this.pageBreakBefore=a,this.markChanged(),this}setPageBreakAfter(a){return this.pageBreakAfter=a,this.markChanged(),this}setPrintOnly(a){return this.printOnly=a,this.markChanged(),this}setNoPrint(a){return this.noPrint=a,this.markChanged(),this}addSClass(a){return this.sClasses.push(a),this.markChanged(),this}setSClasses(a){return this.sClasses=a,this.markChanged(),this}}class KE extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"id",""),S(this,"waitingForSenderId",""),S(this,"components",[]),this.classes=d}static builder(){return new KE("",null,null,b7.builder().setFineText(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}const Lst=function(c,a){return{"no-print":!0,alert:!0,"alert-warning":c,"alert-success":a,"bottom-top-space":!0}};function Nst(c,a){if(1&c){const l=ct();R(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"clr-icon",5),ie("click",function(){return Ee(l),Ae(q().toggleAudio())}),N()(),R(5,"span",6),se(6),N()()(),R(7,"button",7)(8,"clr-icon",5),ie("click",function(){return Ee(l),Ae(q().autioSvc.control.next())}),N()(),R(9,"button",7)(10,"clr-icon",8),ie("click",function(){return Ee(l),Ae(q().autioSvc.control.close(!0))}),N()()()}if(2&c){const l=q();L("ngClass",Wr(4,Lst,!l.autioSvc.control.isPlaying(),l.autioSvc.control.isPlaying())),F(4),ot("shape",l.autioSvc.control.isPlaying()?"pause":"play"),F(2),Ht(l.autioSvc.control.currentName()),F(2),ot("shape","step-forward")}}let Bst=(()=>{class c{get audioData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h){S(this,"config",void 0),S(this,"autioSvc",void 0),S(this,"data",void 0),this.config=l,this.autioSvc=h}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return this.audioData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}toggleAudio(){this.autioSvc.control.isPlaying()?this.autioSvc.control.pause():this.autioSvc.control.resume()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(E1))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-audio"]],inputs:{data:"data"},decls:1,vars:1,consts:[["role","alert",3,"ngClass",4,"ngIf"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon",3,"click"],[1,"alert-text"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close",3,"click"]],template:function(l,h){1&l&&K(0,Nst,11,7,"div",0),2&l&&L("ngIf",h.autioSvc.control.isStarted())},dependencies:[di,Sn,Bk,so],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class C7 extends ku{constructor(){super()}static builder(){return new C7}}class S7 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),this.classes=d}static builder(){return new S7("",null,null,C7.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}}function Vst(c,a){1&c&&pe(0,"app-add-component",4),2&c&&L("component",q(2).$implicit.component)}function Ust(c,a){if(1&c&&(R(0,"clr-accordion-content"),K(1,Vst,1,1,"app-add-component",3),N()),2&c){const l=q().$implicit;F(1),L("ngIf",l.component)}}function zst(c,a){if(1&c&&(R(0,"clr-accordion-panel")(1,"clr-accordion-title"),se(2),N(),K(3,Ust,2,1,"clr-accordion-content",2),N()),2&c){const l=a.$implicit;F(2),Ht(l.title)}}let Hst=(()=>{class c{get accordionData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return this.accordionData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-accordion"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[4,"clrIfExpanded"],[3,"component",4,"ngIf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"clr-accordion",0),K(1,zst,4,1,"clr-accordion-panel",1),N()),2&l&&(L("ngClass",h.getClasses()),F(1),L("ngForOf",h.accordionData.items))},dependencies:[di,vi,Sn,EB,nB,XS,Qm,KS,YS,JS,s_,rc],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class x7 extends ku{constructor(){super()}static builder(){return new x7}}class w7{constructor(a,l){S(this,"title",void 0),S(this,"component",void 0),this.title=a,this.component=l}static builder(){return new w7("",null)}setTitle(a){return this.title=a,this}setComponent(a){return this.component=a,this}}class O7 extends Ci{constructor(a,l,h,d,f){super(a,l,h),S(this,"classes",void 0),S(this,"items",void 0),this.classes=d,this.items=f}static builder(){return new O7("",null,null,x7.builder(),[])}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}addItem(a){return this.items.push(a),this}}class D7{constructor(){}static builder(){return new D7}}class T7 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"id",""),S(this,"waitingForSenderId",""),S(this,"components",[]),this.classes=d}static builder(){return new T7("",null,null,D7.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}let Mg=(()=>{class c{setCanSave(l){this.canSave=l}getRestPoint(l,h){return Mr.merge(Mr.merge(h||this.config.serviceAPIHost,this.restPoint),l)}getRestPointRaw(l,h){return Mr.merge(h||this.config.serviceAPIHost,l)}constructor(l,h){S(this,"http",void 0),S(this,"config",void 0),S(this,"persons",[]),S(this,"restPoint","/math"),S(this,"canSave",null),S(this,"personSaved",new Mt),S(this,"personsSubscribersMap",new Map),this.http=l,this.config=h}mathSolve(l){const h={params:{}};return new Promise((d,f)=>{this.http.post(this.getRestPoint("/solve",null),l,h).pipe(mr(qi.handleError)).subscribe({next:p=>{d(rz.builder().setSuccess(!!p.success).setText(p.text))},error:p=>{f(null)}})})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class k7 extends ku{constructor(){super(),S(this,"fineText",!1),S(this,"pageBreakBefore",!1),S(this,"pageBreakAfter",!1),S(this,"printOnly",!1),S(this,"noPrint",!1),S(this,"sClasses",[])}static builder(){return new k7}setFineText(a){return this.fineText=a,this.markChanged(),this}setPageBreakBefore(a){return this.pageBreakBefore=a,this.markChanged(),this}setPageBreakAfter(a){return this.pageBreakAfter=a,this.markChanged(),this}setPrintOnly(a){return this.printOnly=a,this.markChanged(),this}setNoPrint(a){return this.noPrint=a,this.markChanged(),this}addSClass(a){return this.sClasses.push(a),this.markChanged(),this}setSClasses(a){return this.sClasses=a,this.markChanged(),this}}class qw extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"id",""),S(this,"waitingForSenderId",""),S(this,"components",[]),S(this,"messageTarget",""),S(this,"messageUndoText",""),this.classes=d}static builder(){return new qw("",null,null,k7.builder().setFineText(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}setMessageTarget(a){return this.messageTarget=a,this}setMessageUndoText(a){return this.messageUndoText=a,this}}class wr{constructor(){}lineAt(a){if(a<0||a>this.length)throw new RangeError(`Invalid position ${a} in document of length ${this.length}`);return this.lineInner(a,!1,1,0)}line(a){if(a<1||a>this.lines)throw new RangeError(`Invalid line number ${a} in ${this.lines}-line document`);return this.lineInner(a,!0,1,0)}replace(a,l,h){let d=[];return this.decompose(0,a,d,2),h.length&&h.decompose(0,h.length,d,3),this.decompose(l,this.length,d,1),Ld.from(d,this.length-(l-a)+h.length)}append(a){return this.replace(this.length,this.length,a)}slice(a,l=this.length){let h=[];return this.decompose(a,l,h,0),Ld.from(h,l-a)}eq(a){if(a==this)return!0;if(a.length!=this.length||a.lines!=this.lines)return!1;let l=this.scanIdentical(a,1),h=this.length-this.scanIdentical(a,-1),d=new Xw(this),f=new Xw(a);for(let p=l,g=l;;){if(d.next(p),f.next(p),p=0,d.lineBreak!=f.lineBreak||d.done!=f.done||d.value!=f.value)return!1;if(g+=d.value.length,d.done||g>=h)return!0}}iter(a=1){return new Xw(this,a)}iterRange(a,l=this.length){return new Yfe(this,a,l)}iterLines(a,l){let h;if(null==a)h=this.iter();else{null==l&&(l=this.lines+1);let d=this.line(a).from;h=this.iterRange(d,Math.max(d,l==this.lines+1?this.length:l<=1?0:this.line(l-1).to))}return new Kfe(h)}toString(){return this.sliceString(0)}toJSON(){let a=[];return this.flatten(a),a}static of(a){if(0==a.length)throw new RangeError("A document must have at least one line");return 1!=a.length||a[0]?a.length<=32?new ao(a):Ld.from(ao.split(a,[])):wr.empty}}class ao extends wr{constructor(a,l=function $st(c){let a=-1;for(let l of c)a+=l.length+1;return a}(a)){super(),this.text=a,this.length=l}get lines(){return this.text.length}get children(){return null}lineInner(a,l,h,d){for(let f=0;;f++){let p=this.text[f],g=d+p.length;if((l?h:g)>=a)return new Wst(d,g,h,p);d=g+1,h++}}decompose(a,l,h,d){let f=a<=0&&l>=this.length?this:new ao(Xfe(this.text,a,l),Math.min(l,this.length)-Math.max(0,a));if(1&d){let p=h.pop(),g=JE(f.text,p.text.slice(),0,f.length);if(g.length<=32)h.push(new ao(g,p.length+f.length));else{let m=g.length>>1;h.push(new ao(g.slice(0,m)),new ao(g.slice(m)))}}else h.push(f)}replace(a,l,h){if(!(h instanceof ao))return super.replace(a,l,h);let d=JE(this.text,JE(h.text,Xfe(this.text,0,a)),l),f=this.length+h.length-(l-a);return d.length<=32?new ao(d,f):Ld.from(ao.split(d,[]),f)}sliceString(a,l=this.length,h="\n"){let d="";for(let f=0,p=0;f<=l&&p<this.text.length;p++){let g=this.text[p],m=f+g.length;f>a&&p&&(d+=h),a<m&&l>f&&(d+=g.slice(Math.max(0,a-f),l-f)),f=m+1}return d}flatten(a){for(let l of this.text)a.push(l)}scanIdentical(){return 0}static split(a,l){let h=[],d=-1;for(let f of a)h.push(f),d+=f.length+1,32==h.length&&(l.push(new ao(h,d)),h=[],d=-1);return d>-1&&l.push(new ao(h,d)),l}}class Ld extends wr{constructor(a,l){super(),this.children=a,this.length=l,this.lines=0;for(let h of a)this.lines+=h.lines}lineInner(a,l,h,d){for(let f=0;;f++){let p=this.children[f],g=d+p.length,m=h+p.lines-1;if((l?m:g)>=a)return p.lineInner(a,l,h,d);d=g+1,h=m+1}}decompose(a,l,h,d){for(let f=0,p=0;p<=l&&f<this.children.length;f++){let g=this.children[f],m=p+g.length;if(a<=m&&l>=p){let v=d&((p<=a?1:0)|(m>=l?2:0));p>=a&&m<=l&&!v?h.push(g):g.decompose(a-p,l-p,h,v)}p=m+1}}replace(a,l,h){if(h.lines<this.lines)for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],g=f+p.length;if(a>=f&&l<=g){let m=p.replace(a-f,l-f,h),v=this.lines-p.lines+m.lines;if(m.lines<v>>4&&m.lines>v>>6){let y=this.children.slice();return y[d]=m,new Ld(y,this.length-(l-a)+h.length)}return super.replace(f,g,m)}f=g+1}return super.replace(a,l,h)}sliceString(a,l=this.length,h="\n"){let d="";for(let f=0,p=0;f<this.children.length&&p<=l;f++){let g=this.children[f],m=p+g.length;p>a&&f&&(d+=h),a<m&&l>p&&(d+=g.sliceString(a-p,l-p,h)),p=m+1}return d}flatten(a){for(let l of this.children)l.flatten(a)}scanIdentical(a,l){if(!(a instanceof Ld))return 0;let h=0,[d,f,p,g]=l>0?[0,0,this.children.length,a.children.length]:[this.children.length-1,a.children.length-1,-1,-1];for(;;d+=l,f+=l){if(d==p||f==g)return h;let m=this.children[d],v=a.children[f];if(m!=v)return h+m.scanIdentical(v,l);h+=m.length+1}}static from(a,l=a.reduce((h,d)=>h+d.length+1,-1)){let h=0;for(let C of a)h+=C.lines;if(h<32){let C=[];for(let x of a)x.flatten(C);return new ao(C,l)}let d=Math.max(32,h>>5),f=d<<1,p=d>>1,g=[],m=0,v=-1,y=[];function _(C){let x;if(C.lines>f&&C instanceof Ld)for(let w of C.children)_(w);else C.lines>p&&(m>p||!m)?(b(),g.push(C)):C instanceof ao&&m&&(x=y[y.length-1])instanceof ao&&C.lines+x.lines<=32?(m+=C.lines,v+=C.length+1,y[y.length-1]=new ao(x.text.concat(C.text),x.length+1+C.length)):(m+C.lines>d&&b(),m+=C.lines,v+=C.length+1,y.push(C))}function b(){0!=m&&(g.push(1==y.length?y[0]:Ld.from(y,v)),v=-1,m=y.length=0)}for(let C of a)_(C);return b(),1==g.length?g[0]:new Ld(g,l)}}function JE(c,a,l=0,h=1e9){for(let d=0,f=0,p=!0;f<c.length&&d<=h;f++){let g=c[f],m=d+g.length;m>=l&&(m>h&&(g=g.slice(0,h-d)),d<l&&(g=g.slice(l-d)),p?(a[a.length-1]+=g,p=!1):a.push(g)),d=m+1}return a}function Xfe(c,a,l){return JE(c,[""],a,l)}wr.empty=new ao([""],0);class Xw{constructor(a,l=1){this.dir=l,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[a],this.offsets=[l>0?1:(a instanceof ao?a.text.length:a.children.length)<<1]}nextInner(a,l){for(this.done=this.lineBreak=!1;;){let h=this.nodes.length-1,d=this.nodes[h],f=this.offsets[h],p=f>>1;if(p==(l>0?d instanceof ao?d.text.length:d.children.length:0)){if(0==h)return this.done=!0,this.value="",this;l>0&&this.offsets[h-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&f)==(l>0?0:1)){if(this.offsets[h]+=l,0==a)return this.lineBreak=!0,this.value="\n",this;a--}else if(d instanceof ao){let m=d.text[p+(l<0?-1:0)];if(this.offsets[h]+=l,m.length>Math.max(0,a))return this.value=0==a?m:l>0?m.slice(a):m.slice(0,m.length-a),this;a-=m.length}else{let m=d.children[p+(l<0?-1:0)];a>m.length?(a-=m.length,this.offsets[h]+=l):(l<0&&this.offsets[h]--,this.nodes.push(m),this.offsets.push(l>0?1:(m instanceof ao?m.text.length:m.children.length)<<1))}}}next(a=0){return a<0&&(this.nextInner(-a,-this.dir),a=this.value.length),this.nextInner(a,this.dir)}}class Yfe{constructor(a,l,h){this.value="",this.done=!1,this.cursor=new Xw(a,l>h?-1:1),this.pos=l>h?a.length:0,this.from=Math.min(l,h),this.to=Math.max(l,h)}nextInner(a,l){if(l<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;a+=Math.max(0,l<0?this.pos-this.to:this.from-this.pos);let h=l<0?this.pos-this.from:this.to-this.pos;a>h&&(a=h),h-=a;let{value:d}=this.cursor.next(a);return this.pos+=(d.length+a)*l,this.value=d.length<=h?d:l<0?d.slice(d.length-h):d.slice(0,h),this.done=!this.value,this}next(a=0){return a<0?a=Math.max(a,this.from-this.pos):a>0&&(a=Math.min(a,this.to-this.pos)),this.nextInner(a,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Kfe{constructor(a){this.inner=a,this.afterBreak=!0,this.value="",this.done=!1}next(a=0){let{done:l,lineBreak:h,value:d}=this.inner.next(a);return l?(this.done=!0,this.value=""):h?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=d,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(wr.prototype[Symbol.iterator]=function(){return this.iter()},Xw.prototype[Symbol.iterator]=Yfe.prototype[Symbol.iterator]=Kfe.prototype[Symbol.iterator]=function(){return this});class Wst{constructor(a,l,h,d){this.from=a,this.to=l,this.number=h,this.text=d}get length(){return this.to-this.from}}let P1="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(c=>c?parseInt(c,36):1);for(let c=1;c<P1.length;c++)P1[c]+=P1[c-1];function Gst(c){for(let a=1;a<P1.length;a+=2)if(P1[a]>c)return P1[a-1]<=c;return!1}function Jfe(c){return c>=127462&&c<=127487}function kl(c,a,l=!0,h=!0){return(l?tpe:Qst)(c,a,h)}function tpe(c,a,l){if(a==c.length)return a;a&&npe(c.charCodeAt(a))&&ipe(c.charCodeAt(a-1))&&a--;let h=Sa(c,a);for(a+=Eu(h);a<c.length;){let d=Sa(c,a);if(8205==h||8205==d||l&&Gst(d))a+=Eu(d),h=d;else{if(!Jfe(d))break;{let f=0,p=a-2;for(;p>=0&&Jfe(Sa(c,p));)f++,p-=2;if(f%2==0)break;a+=2}}}return a}function Qst(c,a,l){for(;a>0;){let h=tpe(c,a-2,l);if(h<a)return h;a--}return 0}function npe(c){return c>=56320&&c<57344}function ipe(c){return c>=55296&&c<56320}function Sa(c,a){let l=c.charCodeAt(a);if(!ipe(l)||a+1==c.length)return l;let h=c.charCodeAt(a+1);return npe(h)?h-56320+(l-55296<<10)+65536:l}function M7(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode(55296+(c>>10),56320+(1023&c)))}function Eu(c){return c<65536?1:2}const E7=/\r\n?|\n/;var xa=function(c){return c[c.Simple=0]="Simple",c[c.TrackDel=1]="TrackDel",c[c.TrackBefore=2]="TrackBefore",c[c.TrackAfter=3]="TrackAfter",c}(xa||(xa={}));class Nd{constructor(a){this.sections=a}get length(){let a=0;for(let l=0;l<this.sections.length;l+=2)a+=this.sections[l];return a}get newLength(){let a=0;for(let l=0;l<this.sections.length;l+=2){let h=this.sections[l+1];a+=h<0?this.sections[l]:h}return a}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(a){for(let l=0,h=0,d=0;l<this.sections.length;){let f=this.sections[l++],p=this.sections[l++];p<0?(a(h,d,f),d+=f):d+=p,h+=f}}iterChangedRanges(a,l=!1){A7(this,a,l)}get invertedDesc(){let a=[];for(let l=0;l<this.sections.length;){let h=this.sections[l++],d=this.sections[l++];d<0?a.push(h,d):a.push(d,h)}return new Nd(a)}composeDesc(a){return this.empty?a:a.empty?this:rpe(this,a)}mapDesc(a,l=!1){return a.empty?this:I7(this,a,l)}mapPos(a,l=-1,h=xa.Simple){let d=0,f=0;for(let p=0;p<this.sections.length;){let g=this.sections[p++],m=this.sections[p++],v=d+g;if(m<0){if(v>a)return f+(a-d);f+=g}else{if(h!=xa.Simple&&v>=a&&(h==xa.TrackDel&&d<a&&v>a||h==xa.TrackBefore&&d<a||h==xa.TrackAfter&&v>a))return null;if(v>a||v==a&&l<0&&!g)return a==d||l<0?f:f+m;f+=m}d=v}if(a>d)throw new RangeError(`Position ${a} is out of range for changeset of length ${d}`);return f}touchesRange(a,l=a){for(let h=0,d=0;h<this.sections.length&&d<=l;){let g=d+this.sections[h++];if(this.sections[h++]>=0&&d<=l&&g>=a)return!(d<a&&g>l)||"cover";d=g}return!1}toString(){let a="";for(let l=0;l<this.sections.length;){let h=this.sections[l++],d=this.sections[l++];a+=(a?" ":"")+h+(d>=0?":"+d:"")}return a}toJSON(){return this.sections}static fromJSON(a){if(!Array.isArray(a)||a.length%2||a.some(l=>"number"!=typeof l))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Nd(a)}static create(a){return new Nd(a)}}class Go extends Nd{constructor(a,l){super(a),this.inserted=l}apply(a){if(this.length!=a.length)throw new RangeError("Applying change set to a document with the wrong length");return A7(this,(l,h,d,f,p)=>a=a.replace(d,d+(h-l),p),!1),a}mapDesc(a,l=!1){return I7(this,a,l,!0)}invert(a){let l=this.sections.slice(),h=[];for(let d=0,f=0;d<l.length;d+=2){let p=l[d],g=l[d+1];if(g>=0){l[d]=g,l[d+1]=p;let m=d>>1;for(;h.length<m;)h.push(wr.empty);h.push(p?a.slice(f,f+p):wr.empty)}f+=p}return new Go(l,h)}compose(a){return this.empty?a:a.empty?this:rpe(this,a,!0)}map(a,l=!1){return a.empty?this:I7(this,a,l,!0)}iterChanges(a,l=!1){A7(this,a,l)}get desc(){return Nd.create(this.sections)}filter(a){let l=[],h=[],d=[],f=new Yw(this);e:for(let p=0,g=0;;){let m=p==a.length?1e9:a[p++];for(;g<m||g==m&&0==f.len;){if(f.done)break e;let y=Math.min(f.len,m-g);Wa(d,y,-1);let _=-1==f.ins?-1:0==f.off?f.ins:0;Wa(l,y,_),_>0&&Eg(h,l,f.text),f.forward(y),g+=y}let v=a[p++];for(;g<v;){if(f.done)break e;let y=Math.min(f.len,v-g);Wa(l,y,-1),Wa(d,y,-1==f.ins?-1:0==f.off?f.ins:0),f.forward(y),g+=y}}return{changes:new Go(l,h),filtered:Nd.create(d)}}toJSON(){let a=[];for(let l=0;l<this.sections.length;l+=2){let h=this.sections[l],d=this.sections[l+1];a.push(d<0?h:0==d?[h]:[h].concat(this.inserted[l>>1].toJSON()))}return a}static of(a,l,h){let d=[],f=[],p=0,g=null;function m(y=!1){if(!y&&!d.length)return;p<l&&Wa(d,l-p,-1);let _=new Go(d,f);g=g?g.compose(_.map(g)):_,d=[],f=[],p=0}return function v(y){if(Array.isArray(y))for(let _ of y)v(_);else if(y instanceof Go){if(y.length!=l)throw new RangeError(`Mismatched change set length (got ${y.length}, expected ${l})`);m(),g=g?g.compose(y.map(g)):y}else{let{from:_,to:b=_,insert:C}=y;if(_>b||_<0||b>l)throw new RangeError(`Invalid change range ${_} to ${b} (in doc of length ${l})`);let x=C?"string"==typeof C?wr.of(C.split(h||E7)):C:wr.empty,w=x.length;if(_==b&&0==w)return;_<p&&m(),_>p&&Wa(d,_-p,-1),Wa(d,b-_,w),Eg(f,d,x),p=b}}(a),m(!g),g}static empty(a){return new Go(a?[a,-1]:[],[])}static fromJSON(a){if(!Array.isArray(a))throw new RangeError("Invalid JSON representation of ChangeSet");let l=[],h=[];for(let d=0;d<a.length;d++){let f=a[d];if("number"==typeof f)l.push(f,-1);else{if(!Array.isArray(f)||"number"!=typeof f[0]||f.some((p,g)=>g&&"string"!=typeof p))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==f.length)l.push(f[0],0);else{for(;h.length<d;)h.push(wr.empty);h[d]=wr.of(f.slice(1)),l.push(f[0],h[d].length)}}}return new Go(l,h)}static createSet(a,l){return new Go(a,l)}}function Wa(c,a,l,h=!1){if(0==a&&l<=0)return;let d=c.length-2;d>=0&&l<=0&&l==c[d+1]?c[d]+=a:0==a&&0==c[d]?c[d+1]+=l:h?(c[d]+=a,c[d+1]+=l):c.push(a,l)}function Eg(c,a,l){if(0==l.length)return;let h=a.length-2>>1;if(h<c.length)c[c.length-1]=c[c.length-1].append(l);else{for(;c.length<h;)c.push(wr.empty);c.push(l)}}function A7(c,a,l){let h=c.inserted;for(let d=0,f=0,p=0;p<c.sections.length;){let g=c.sections[p++],m=c.sections[p++];if(m<0)d+=g,f+=g;else{let v=d,y=f,_=wr.empty;for(;v+=g,y+=m,m&&h&&(_=_.append(h[p-2>>1])),!(l||p==c.sections.length||c.sections[p+1]<0);)g=c.sections[p++],m=c.sections[p++];a(d,v,f,y,_),d=v,f=y}}}function I7(c,a,l,h=!1){let d=[],f=h?[]:null,p=new Yw(c),g=new Yw(a);for(let m=-1;;)if(-1==p.ins&&-1==g.ins){let v=Math.min(p.len,g.len);Wa(d,v,-1),p.forward(v),g.forward(v)}else if(g.ins>=0&&(p.ins<0||m==p.i||0==p.off&&(g.len<p.len||g.len==p.len&&!l))){let v=g.len;for(Wa(d,g.ins,-1);v;){let y=Math.min(p.len,v);p.ins>=0&&m<p.i&&p.len<=y&&(Wa(d,0,p.ins),f&&Eg(f,d,p.text),m=p.i),p.forward(y),v-=y}g.next()}else{if(!(p.ins>=0)){if(p.done&&g.done)return f?Go.createSet(d,f):Nd.create(d);throw new Error("Mismatched change set lengths")}{let v=0,y=p.len;for(;y;)if(-1==g.ins){let _=Math.min(y,g.len);v+=_,y-=_,g.forward(_)}else{if(!(0==g.ins&&g.len<y))break;y-=g.len,g.next()}Wa(d,v,m<p.i?p.ins:0),f&&m<p.i&&Eg(f,d,p.text),m=p.i,p.forward(p.len-y)}}}function rpe(c,a,l=!1){let h=[],d=l?[]:null,f=new Yw(c),p=new Yw(a);for(let g=!1;;){if(f.done&&p.done)return d?Go.createSet(h,d):Nd.create(h);if(0==f.ins)Wa(h,f.len,0,g),f.next();else if(0!=p.len||p.done){if(f.done||p.done)throw new Error("Mismatched change set lengths");{let m=Math.min(f.len2,p.len),v=h.length;if(-1==f.ins){let y=-1==p.ins?-1:p.off?0:p.ins;Wa(h,m,y,g),d&&y&&Eg(d,h,p.text)}else-1==p.ins?(Wa(h,f.off?0:f.len,m,g),d&&Eg(d,h,f.textBit(m))):(Wa(h,f.off?0:f.len,p.off?0:p.ins,g),d&&!p.off&&Eg(d,h,p.text));g=(f.ins>m||p.ins>=0&&p.len>m)&&(g||h.length>v),f.forward2(m),p.forward(m)}}else Wa(h,0,p.ins,g),d&&Eg(d,h,p.text),p.next()}}class Yw{constructor(a){this.set=a,this.i=0,this.next()}next(){let{sections:a}=this.set;this.i<a.length?(this.len=a[this.i++],this.ins=a[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:a}=this.set,l=this.i-2>>1;return l>=a.length?wr.empty:a[l]}textBit(a){let{inserted:l}=this.set,h=this.i-2>>1;return h>=l.length&&!a?wr.empty:l[h].slice(this.off,null==a?void 0:this.off+a)}forward(a){a==this.len?this.next():(this.len-=a,this.off+=a)}forward2(a){-1==this.ins?this.forward(a):a==this.ins?this.next():(this.ins-=a,this.off+=a)}}class $0{constructor(a,l,h){this.from=a,this.to=l,this.flags=h}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let a=3&this.flags;return 3==a?null:a}get goalColumn(){let a=this.flags>>5;return 33554431==a?void 0:a}map(a,l=-1){let h,d;return this.empty?h=d=a.mapPos(this.from,l):(h=a.mapPos(this.from,1),d=a.mapPos(this.to,-1)),h==this.from&&d==this.to?this:new $0(h,d,this.flags)}extend(a,l=a){if(a<=this.anchor&&l>=this.anchor)return It.range(a,l);let h=Math.abs(a-this.anchor)>Math.abs(l-this.anchor)?a:l;return It.range(this.anchor,h)}eq(a){return this.anchor==a.anchor&&this.head==a.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(a){if(!a||"number"!=typeof a.anchor||"number"!=typeof a.head)throw new RangeError("Invalid JSON representation for SelectionRange");return It.range(a.anchor,a.head)}static create(a,l,h){return new $0(a,l,h)}}class It{constructor(a,l){this.ranges=a,this.mainIndex=l}map(a,l=-1){return a.empty?this:It.create(this.ranges.map(h=>h.map(a,l)),this.mainIndex)}eq(a){if(this.ranges.length!=a.ranges.length||this.mainIndex!=a.mainIndex)return!1;for(let l=0;l<this.ranges.length;l++)if(!this.ranges[l].eq(a.ranges[l]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new It([this.main],0)}addRange(a,l=!0){return It.create([a].concat(this.ranges),l?0:this.mainIndex+1)}replaceRange(a,l=this.mainIndex){let h=this.ranges.slice();return h[l]=a,It.create(h,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(a=>a.toJSON()),main:this.mainIndex}}static fromJSON(a){if(!a||!Array.isArray(a.ranges)||"number"!=typeof a.main||a.main>=a.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new It(a.ranges.map(l=>$0.fromJSON(l)),a.main)}static single(a,l=a){return new It([It.range(a,l)],0)}static create(a,l=0){if(0==a.length)throw new RangeError("A selection needs at least one range");for(let h=0,d=0;d<a.length;d++){let f=a[d];if(f.empty?f.from<=h:f.from<h)return It.normalized(a.slice(),l);h=f.to}return new It(a,l)}static cursor(a,l=0,h,d){return $0.create(a,a,(0==l?0:l<0?4:8)|(null==h?3:Math.min(2,h))|(d??33554431)<<5)}static range(a,l,h,d){let f=(h??33554431)<<5|(null==d?3:Math.min(2,d));return l<a?$0.create(l,a,24|f):$0.create(a,l,(l>a?4:0)|f)}static normalized(a,l=0){let h=a[l];a.sort((d,f)=>d.from-f.from),l=a.indexOf(h);for(let d=1;d<a.length;d++){let f=a[d],p=a[d-1];if(f.empty?f.from<=p.to:f.from<p.to){let g=p.from,m=Math.max(f.to,p.to);d<=l&&l--,a.splice(--d,2,f.anchor>f.head?It.range(m,g):It.range(g,m))}}return new It(a,l)}}function spe(c,a){for(let l of c.ranges)if(l.to>a)throw new RangeError("Selection points outside of document")}let P7=0;class Vn{constructor(a,l,h,d,f){this.combine=a,this.compareInput=l,this.compare=h,this.isStatic=d,this.id=P7++,this.default=a([]),this.extensions="function"==typeof f?f(this):f}static define(a={}){return new Vn(a.combine||(l=>l),a.compareInput||((l,h)=>l===h),a.compare||(a.combine?(l,h)=>l===h:R7),!!a.static,a.enables)}of(a){return new eA([],this,0,a)}compute(a,l){if(this.isStatic)throw new Error("Can't compute a static facet");return new eA(a,this,1,l)}computeN(a,l){if(this.isStatic)throw new Error("Can't compute a static facet");return new eA(a,this,2,l)}from(a,l){return l||(l=h=>h),this.compute([a],h=>l(h.field(a)))}}function R7(c,a){return c==a||c.length==a.length&&c.every((l,h)=>l===a[h])}class eA{constructor(a,l,h,d){this.dependencies=a,this.facet=l,this.type=h,this.value=d,this.id=P7++}dynamicSlot(a){var l;let h=this.value,d=this.facet.compareInput,f=this.id,p=a[f]>>1,g=2==this.type,m=!1,v=!1,y=[];for(let _ of this.dependencies)"doc"==_?m=!0:"selection"==_?v=!0:1&(null!==(l=a[_.id])&&void 0!==l?l:1)||y.push(a[_.id]);return{create:_=>(_.values[p]=h(_),1),update(_,b){if(m&&b.docChanged||v&&(b.docChanged||b.selection)||F7(_,y)){let C=h(_);if(g?!ope(C,_.values[p],d):!d(C,_.values[p]))return _.values[p]=C,1}return 0},reconfigure:(_,b)=>{let C,x=b.config.address[f];if(null!=x){let w=nA(b,x);if(this.dependencies.every(O=>O instanceof Vn?b.facet(O)===_.facet(O):!(O instanceof xo)||b.field(O,!1)==_.field(O,!1))||(g?ope(C=h(_),w,d):d(C=h(_),w)))return _.values[p]=w,0}else C=h(_);return _.values[p]=C,1}}}}function ope(c,a,l){if(c.length!=a.length)return!1;for(let h=0;h<c.length;h++)if(!l(c[h],a[h]))return!1;return!0}function F7(c,a){let l=!1;for(let h of a)1&Jw(c,h)&&(l=!0);return l}function jst(c,a,l){let h=l.map(m=>c[m.id]),d=l.map(m=>m.type),f=h.filter(m=>!(1&m)),p=c[a.id]>>1;function g(m){let v=[];for(let y=0;y<h.length;y++){let _=nA(m,h[y]);if(2==d[y])for(let b of _)v.push(b);else v.push(_)}return a.combine(v)}return{create(m){for(let v of h)Jw(m,v);return m.values[p]=g(m),1},update(m,v){if(!F7(m,f))return 0;let y=g(m);return a.compare(y,m.values[p])?0:(m.values[p]=y,1)},reconfigure(m,v){let y=F7(m,h),_=v.config.facets[a.id],b=v.facet(a);if(_&&!y&&R7(l,_))return m.values[p]=b,0;let C=g(m);return a.compare(C,b)?(m.values[p]=b,0):(m.values[p]=C,1)}}}const ape=Vn.define({static:!0});class xo{constructor(a,l,h,d,f){this.id=a,this.createF=l,this.updateF=h,this.compareF=d,this.spec=f,this.provides=void 0}static define(a){let l=new xo(P7++,a.create,a.update,a.compare||((h,d)=>h===d),a);return a.provide&&(l.provides=a.provide(l)),l}create(a){return(a.facet(ape).find(h=>h.field==this)?.create||this.createF)(a)}slot(a){let l=a[this.id]>>1;return{create:h=>(h.values[l]=this.create(h),1),update:(h,d)=>{let f=h.values[l],p=this.updateF(f,d);return this.compareF(f,p)?0:(h.values[l]=p,1)},reconfigure:(h,d)=>null!=d.config.address[this.id]?(h.values[l]=d.field(this),0):(h.values[l]=this.create(h),1)}}init(a){return[this,ape.of({field:this,create:a})]}get extension(){return this}}function Kw(c){return a=>new lpe(a,c)}const G0={highest:Kw(0),high:Kw(1),default:Kw(2),low:Kw(3),lowest:Kw(4)};class lpe{constructor(a,l){this.inner=a,this.prec=l}}class Q0{of(a){return new L7(this,a)}reconfigure(a){return Q0.reconfigure.of({compartment:this,extension:a})}get(a){return a.config.compartments.get(this)}}class L7{constructor(a,l){this.compartment=a,this.inner=l}}class tA{constructor(a,l,h,d,f,p){for(this.base=a,this.compartments=l,this.dynamicSlots=h,this.address=d,this.staticValues=f,this.facets=p,this.statusTemplate=[];this.statusTemplate.length<h.length;)this.statusTemplate.push(0)}staticFacet(a){let l=this.address[a.id];return null==l?a.default:this.staticValues[l>>1]}static resolve(a,l,h){let d=[],f=Object.create(null),p=new Map;for(let b of function Zst(c,a,l){let h=[[],[],[],[],[]],d=new Map;return function f(p,g){let m=d.get(p);if(null!=m){if(m<=g)return;let v=h[m].indexOf(p);v>-1&&h[m].splice(v,1),p instanceof L7&&l.delete(p.compartment)}if(d.set(p,g),Array.isArray(p))for(let v of p)f(v,g);else if(p instanceof L7){if(l.has(p.compartment))throw new RangeError("Duplicate use of compartment in extensions");let v=a.get(p.compartment)||p.inner;l.set(p.compartment,v),f(v,g)}else if(p instanceof lpe)f(p.inner,p.prec);else if(p instanceof xo)h[g].push(p),p.provides&&f(p.provides,g);else if(p instanceof eA)h[g].push(p),p.facet.extensions&&f(p.facet.extensions,2);else{let v=p.extension;if(!v)throw new Error(`Unrecognized extension value in extension set (${p}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);f(v,g)}}(c,2),h.reduce((p,g)=>p.concat(g))}(a,l,p))b instanceof xo?d.push(b):(f[b.facet.id]||(f[b.facet.id]=[])).push(b);let g=Object.create(null),m=[],v=[];for(let b of d)g[b.id]=v.length<<1,v.push(C=>b.slot(C));let y=h?.config.facets;for(let b in f){let C=f[b],x=C[0].facet,w=y&&y[b]||[];if(C.every(O=>0==O.type))if(g[x.id]=m.length<<1|1,R7(w,C))m.push(h.facet(x));else{let O=x.combine(C.map(D=>D.value));m.push(h&&x.compare(O,h.facet(x))?h.facet(x):O)}else{for(let O of C)0==O.type?(g[O.id]=m.length<<1|1,m.push(O.value)):(g[O.id]=v.length<<1,v.push(D=>O.dynamicSlot(D)));g[x.id]=v.length<<1,v.push(O=>jst(O,x,C))}}let _=v.map(b=>b(g));return new tA(a,p,_,g,m,f)}}function Jw(c,a){if(1&a)return 2;let l=a>>1,h=c.status[l];if(4==h)throw new Error("Cyclic dependency between fields and/or facets");if(2&h)return h;c.status[l]=4;let d=c.computeSlot(c,c.config.dynamicSlots[l]);return c.status[l]=2|d}function nA(c,a){return 1&a?c.config.staticValues[a>>1]:c.values[a>>1]}const cpe=Vn.define(),upe=Vn.define({combine:c=>c.some(a=>a),static:!0}),hpe=Vn.define({combine:c=>c.length?c[0]:void 0,static:!0}),dpe=Vn.define(),fpe=Vn.define(),ppe=Vn.define(),gpe=Vn.define({combine:c=>!!c.length&&c[0]});class lp{constructor(a,l){this.type=a,this.value=l}static define(){return new qst}}class qst{of(a){return new lp(this,a)}}class Xst{constructor(a){this.map=a}of(a){return new rr(this,a)}}let rr=(()=>{class c{constructor(l,h){this.type=l,this.value=h}map(l){let h=this.type.map(this.value,l);return void 0===h?void 0:h==this.value?this:new c(this.type,h)}is(l){return this.type==l}static define(l={}){return new Xst(l.map||(h=>h))}static mapEffects(l,h){if(!l.length)return l;let d=[];for(let f of l){let p=f.map(h);p&&d.push(p)}return d}}return c.reconfigure=c.define(),c.appendConfig=c.define(),c})(),Bd=(()=>{class c{constructor(l,h,d,f,p,g){this.startState=l,this.changes=h,this.selection=d,this.effects=f,this.annotations=p,this.scrollIntoView=g,this._doc=null,this._state=null,d&&spe(d,h.newLength),p.some(m=>m.type==c.time)||(this.annotations=p.concat(c.time.of(Date.now())))}static create(l,h,d,f,p,g){return new c(l,h,d,f,p,g)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(l){for(let h of this.annotations)if(h.type==l)return h.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(l){let h=this.annotation(c.userEvent);return!(!h||!(h==l||h.length>l.length&&h.slice(0,l.length)==l&&"."==h[l.length]))}}return c.time=lp.define(),c.userEvent=lp.define(),c.addToHistory=lp.define(),c.remote=lp.define(),c})();function Yst(c,a){let l=[];for(let h=0,d=0;;){let f,p;if(h<c.length&&(d==a.length||a[d]>=c[h]))f=c[h++],p=c[h++];else{if(!(d<a.length))return l;f=a[d++],p=a[d++]}!l.length||l[l.length-1]<f?l.push(f,p):l[l.length-1]<p&&(l[l.length-1]=p)}}function mpe(c,a,l){var h;let d,f,p;return l?(d=a.changes,f=Go.empty(a.changes.length),p=c.changes.compose(a.changes)):(d=a.changes.map(c.changes),f=c.changes.mapDesc(a.changes,!0),p=c.changes.compose(d)),{changes:p,selection:a.selection?a.selection.map(f):null===(h=c.selection)||void 0===h?void 0:h.map(d),effects:rr.mapEffects(c.effects,d).concat(rr.mapEffects(a.effects,f)),annotations:c.annotations.length?c.annotations.concat(a.annotations):a.annotations,scrollIntoView:c.scrollIntoView||a.scrollIntoView}}function N7(c,a,l){let h=a.selection,d=R1(a.annotations);return a.userEvent&&(d=d.concat(Bd.userEvent.of(a.userEvent))),{changes:a.changes instanceof Go?a.changes:Go.of(a.changes||[],l,c.facet(hpe)),selection:h&&(h instanceof It?h:It.single(h.anchor,h.head)),effects:R1(a.effects),annotations:d,scrollIntoView:!!a.scrollIntoView}}function vpe(c,a,l){let h=N7(c,a.length?a[0]:{},c.doc.length);a.length&&!1===a[0].filter&&(l=!1);for(let f=1;f<a.length;f++){!1===a[f].filter&&(l=!1);let p=!!a[f].sequential;h=mpe(h,N7(c,a[f],p?h.changes.newLength:c.doc.length),p)}let d=Bd.create(c,h.changes,h.selection,h.effects,h.annotations,h.scrollIntoView);return function Jst(c){let a=c.startState,l=a.facet(ppe),h=c;for(let d=l.length-1;d>=0;d--){let f=l[d](c);f&&Object.keys(f).length&&(h=mpe(h,N7(a,f,c.changes.newLength),!0))}return h==c?c:Bd.create(a,c.changes,c.selection,h.effects,h.annotations,h.scrollIntoView)}(l?function Kst(c){let a=c.startState,l=!0;for(let d of a.facet(dpe)){let f=d(c);if(!1===f){l=!1;break}Array.isArray(f)&&(l=!0===l?f:Yst(l,f))}if(!0!==l){let d,f;if(!1===l)f=c.changes.invertedDesc,d=Go.empty(a.doc.length);else{let p=c.changes.filter(l);d=p.changes,f=p.filtered.mapDesc(p.changes).invertedDesc}c=Bd.create(a,d,c.selection&&c.selection.map(f),rr.mapEffects(c.effects,f),c.annotations,c.scrollIntoView)}let h=a.facet(fpe);for(let d=h.length-1;d>=0;d--){let f=h[d](c);c=f instanceof Bd?f:Array.isArray(f)&&1==f.length&&f[0]instanceof Bd?f[0]:vpe(a,R1(f),!1)}return c}(d):d)}const eot=[];function R1(c){return null==c?eot:Array.isArray(c)?c:[c]}var Ts=function(c){return c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other",c}(Ts||(Ts={}));const tot=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let B7;try{B7=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}let Ml=(()=>{class c{constructor(l,h,d,f,p,g){this.config=l,this.doc=h,this.selection=d,this.values=f,this.status=l.statusTemplate.slice(),this.computeSlot=p,g&&(g._state=this);for(let m=0;m<this.config.dynamicSlots.length;m++)Jw(this,m<<1);this.computeSlot=null}field(l,h=!0){let d=this.config.address[l.id];if(null!=d)return Jw(this,d),nA(this,d);if(h)throw new RangeError("Field is not present in this state")}update(...l){return vpe(this,l,!0)}applyTransaction(l){let p,h=this.config,{base:d,compartments:f}=h;for(let g of l.effects)g.is(Q0.reconfigure)?(h&&(f=new Map,h.compartments.forEach((m,v)=>f.set(v,m)),h=null),f.set(g.value.compartment,g.value.extension)):g.is(rr.reconfigure)?(h=null,d=g.value):g.is(rr.appendConfig)&&(h=null,d=R1(d).concat(g.value));h?p=l.startState.values.slice():(h=tA.resolve(d,f,this),p=new c(h,this.doc,this.selection,h.dynamicSlots.map(()=>null),(m,v)=>v.reconfigure(m,this),null).values),new c(h,l.newDoc,l.newSelection,p,(g,m)=>m.update(g,l),l)}replaceSelection(l){return"string"==typeof l&&(l=this.toText(l)),this.changeByRange(h=>({changes:{from:h.from,to:h.to,insert:l},range:It.cursor(h.from+l.length)}))}changeByRange(l){let h=this.selection,d=l(h.ranges[0]),f=this.changes(d.changes),p=[d.range],g=R1(d.effects);for(let m=1;m<h.ranges.length;m++){let v=l(h.ranges[m]),y=this.changes(v.changes),_=y.map(f);for(let C=0;C<m;C++)p[C]=p[C].map(_);let b=f.mapDesc(y,!0);p.push(v.range.map(b)),f=f.compose(_),g=rr.mapEffects(g,_).concat(rr.mapEffects(R1(v.effects),b))}return{changes:f,selection:It.create(p,h.mainIndex),effects:g}}changes(l=[]){return l instanceof Go?l:Go.of(l,this.doc.length,this.facet(c.lineSeparator))}toText(l){return wr.of(l.split(this.facet(c.lineSeparator)||E7))}sliceDoc(l=0,h=this.doc.length){return this.doc.sliceString(l,h,this.lineBreak)}facet(l){let h=this.config.address[l.id];return null==h?l.default:(Jw(this,h),nA(this,h))}toJSON(l){let h={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(l)for(let d in l){let f=l[d];f instanceof xo&&null!=this.config.address[f.id]&&(h[d]=f.spec.toJSON(this.field(l[d]),this))}return h}static fromJSON(l,h={},d){if(!l||"string"!=typeof l.doc)throw new RangeError("Invalid JSON representation for EditorState");let f=[];if(d)for(let p in d)if(Object.prototype.hasOwnProperty.call(l,p)){let g=d[p],m=l[p];f.push(g.init(v=>g.spec.fromJSON(m,v)))}return c.create({doc:l.doc,selection:It.fromJSON(l.selection),extensions:h.extensions?f.concat([h.extensions]):f})}static create(l={}){let h=tA.resolve(l.extensions||[],new Map),d=l.doc instanceof wr?l.doc:wr.of((l.doc||"").split(h.staticFacet(c.lineSeparator)||E7)),f=l.selection?l.selection instanceof It?l.selection:It.single(l.selection.anchor,l.selection.head):It.single(0);return spe(f,d.length),h.staticFacet(upe)||(f=f.asSingle()),new c(h,d,f,h.dynamicSlots.map(()=>null),(p,g)=>g.create(p),null)}get tabSize(){return this.facet(c.tabSize)}get lineBreak(){return this.facet(c.lineSeparator)||"\n"}get readOnly(){return this.facet(gpe)}phrase(l,...h){for(let d of this.facet(c.phrases))if(Object.prototype.hasOwnProperty.call(d,l)){l=d[l];break}return h.length&&(l=l.replace(/\$(\$|\d*)/g,(d,f)=>{if("$"==f)return"$";let p=+(f||1);return!p||p>h.length?d:h[p-1]})),l}languageDataAt(l,h,d=-1){let f=[];for(let p of this.facet(cpe))for(let g of p(this,h,d))Object.prototype.hasOwnProperty.call(g,l)&&f.push(g[l]);return f}charCategorizer(l){return function iot(c){return a=>{if(!/\S/.test(a))return Ts.Space;if(function not(c){if(B7)return B7.test(c);for(let a=0;a<c.length;a++){let l=c[a];if(/\w/.test(l)||l>"\x80"&&(l.toUpperCase()!=l.toLowerCase()||tot.test(l)))return!0}return!1}(a))return Ts.Word;for(let l=0;l<c.length;l++)if(a.indexOf(c[l])>-1)return Ts.Word;return Ts.Other}}(this.languageDataAt("wordChars",l).join(""))}wordAt(l){let{text:h,from:d,length:f}=this.doc.lineAt(l),p=this.charCategorizer(l),g=l-d,m=l-d;for(;g>0;){let v=kl(h,g,!1);if(p(h.slice(v,g))!=Ts.Word)break;g=v}for(;m<f;){let v=kl(h,m);if(p(h.slice(m,v))!=Ts.Word)break;m=v}return g==m?null:It.range(g+d,m+d)}}return c.allowMultipleSelections=upe,c.tabSize=Vn.define({combine:a=>a.length?a[0]:4}),c.lineSeparator=hpe,c.readOnly=gpe,c.phrases=Vn.define({compare(a,l){let h=Object.keys(a),d=Object.keys(l);return h.length==d.length&&h.every(f=>a[f]==l[f])}}),c.languageData=cpe,c.changeFilter=dpe,c.transactionFilter=fpe,c.transactionExtender=ppe,c})();function Mh(c,a,l={}){let h={};for(let d of c)for(let f of Object.keys(d)){let p=d[f],g=h[f];if(void 0===g)h[f]=p;else if(g!==p&&void 0!==p){if(!Object.hasOwnProperty.call(l,f))throw new Error("Config merge conflict for field "+f);h[f]=l[f](g,p)}}for(let d in a)void 0===h[d]&&(h[d]=a[d]);return h}Q0.reconfigure=rr.define();class j0{eq(a){return this==a}range(a,l=a){return eO.create(a,l,this)}}j0.prototype.startSide=j0.prototype.endSide=0,j0.prototype.point=!1,j0.prototype.mapMode=xa.TrackDel;class eO{constructor(a,l,h){this.from=a,this.to=l,this.value=h}static create(a,l,h){return new eO(a,l,h)}}function V7(c,a){return c.from-a.from||c.value.startSide-a.value.startSide}class U7{constructor(a,l,h,d){this.from=a,this.to=l,this.value=h,this.maxPoint=d}get length(){return this.to[this.to.length-1]}findIndex(a,l,h,d=0){let f=h?this.to:this.from;for(let p=d,g=f.length;;){if(p==g)return p;let m=p+g>>1,v=f[m]-a||(h?this.value[m].endSide:this.value[m].startSide)-l;if(m==p)return v>=0?p:g;v>=0?g=m:p=m+1}}between(a,l,h,d){for(let f=this.findIndex(l,-1e9,!0),p=this.findIndex(h,1e9,!1,f);f<p;f++)if(!1===d(this.from[f]+a,this.to[f]+a,this.value[f]))return!1}map(a,l){let h=[],d=[],f=[],p=-1,g=-1;for(let m=0;m<this.value.length;m++){let b,C,v=this.value[m],y=this.from[m]+a,_=this.to[m]+a;if(y==_){let x=l.mapPos(y,v.startSide,v.mapMode);if(null==x||(b=C=x,v.startSide!=v.endSide&&(C=l.mapPos(y,v.endSide),C<b)))continue}else if(b=l.mapPos(y,v.startSide),C=l.mapPos(_,v.endSide),b>C||b==C&&v.startSide>0&&v.endSide<=0)continue;(C-b||v.endSide-v.startSide)<0||(p<0&&(p=b),v.point&&(g=Math.max(g,C-b)),h.push(v),d.push(b-p),f.push(C-p))}return{mapped:h.length?new U7(d,f,h,g):null,pos:p}}}let Ls=(()=>{class c{constructor(l,h,d,f){this.chunkPos=l,this.chunk=h,this.nextLayer=d,this.maxPoint=f}static create(l,h,d,f){return new c(l,h,d,f)}get length(){let l=this.chunk.length-1;return l<0?0:Math.max(this.chunkEnd(l),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let l=this.nextLayer.size;for(let h of this.chunk)l+=h.value.length;return l}chunkEnd(l){return this.chunkPos[l]+this.chunk[l].length}update(l){let{add:h=[],sort:d=!1,filterFrom:f=0,filterTo:p=this.length}=l,g=l.filter;if(0==h.length&&!g)return this;if(d&&(h=h.slice().sort(V7)),this.isEmpty)return h.length?c.of(h):this;let m=new _pe(this,null,-1).goto(0),v=0,y=[],_=new Ag;for(;m.value||v<h.length;)if(v<h.length&&(m.from-h[v].from||m.startSide-h[v].value.startSide)>=0){let b=h[v++];_.addInner(b.from,b.to,b.value)||y.push(b)}else 1==m.rangeIndex&&m.chunkIndex<this.chunk.length&&(v==h.length||this.chunkEnd(m.chunkIndex)<h[v].from)&&(!g||f>this.chunkEnd(m.chunkIndex)||p<this.chunkPos[m.chunkIndex])&&_.addChunk(this.chunkPos[m.chunkIndex],this.chunk[m.chunkIndex])?m.nextChunk():((!g||f>m.to||p<m.from||g(m.from,m.to,m.value))&&(_.addInner(m.from,m.to,m.value)||y.push(eO.create(m.from,m.to,m.value))),m.next());return _.finishInner(this.nextLayer.isEmpty&&!y.length?c.empty:this.nextLayer.update({add:y,filter:g,filterFrom:f,filterTo:p}))}map(l){if(l.empty||this.isEmpty)return this;let h=[],d=[],f=-1;for(let g=0;g<this.chunk.length;g++){let m=this.chunkPos[g],v=this.chunk[g],y=l.touchesRange(m,m+v.length);if(!1===y)f=Math.max(f,v.maxPoint),h.push(v),d.push(l.mapPos(m));else if(!0===y){let{mapped:_,pos:b}=v.map(m,l);_&&(f=Math.max(f,_.maxPoint),h.push(_),d.push(b))}}let p=this.nextLayer.map(l);return 0==h.length?p:new c(d,h,p||c.empty,f)}between(l,h,d){if(!this.isEmpty){for(let f=0;f<this.chunk.length;f++){let p=this.chunkPos[f],g=this.chunk[f];if(h>=p&&l<=p+g.length&&!1===g.between(p,l-p,h-p,d))return}this.nextLayer.between(l,h,d)}}iter(l=0){return tO.from([this]).goto(l)}get isEmpty(){return this.nextLayer==this}static iter(l,h=0){return tO.from(l).goto(h)}static compare(l,h,d,f,p=-1){let g=l.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=p),m=h.filter(b=>b.maxPoint>0||!b.isEmpty&&b.maxPoint>=p),v=ype(g,m,d),y=new nO(g,v,p),_=new nO(m,v,p);d.iterGaps((b,C,x)=>bpe(y,b,_,C,x,f)),d.empty&&0==d.length&&bpe(y,0,_,0,0,f)}static eq(l,h,d=0,f){null==f&&(f=999999999);let p=l.filter(_=>!_.isEmpty&&h.indexOf(_)<0),g=h.filter(_=>!_.isEmpty&&l.indexOf(_)<0);if(p.length!=g.length)return!1;if(!p.length)return!0;let m=ype(p,g),v=new nO(p,m,0).goto(d),y=new nO(g,m,0).goto(d);for(;;){if(v.to!=y.to||!H7(v.active,y.active)||v.point&&(!y.point||!v.point.eq(y.point)))return!1;if(v.to>f)return!0;v.next(),y.next()}}static spans(l,h,d,f,p=-1){let g=new nO(l,null,p).goto(h),m=h,v=g.openStart;for(;;){let y=Math.min(g.to,d);if(g.point){let _=g.activeForPoint(g.to),b=g.pointFrom<h?_.length+1:Math.min(_.length,v);f.point(m,y,g.point,_,b,g.pointRank),v=Math.min(g.openEnd(y),_.length)}else y>m&&(f.span(m,y,g.active,v),v=g.openEnd(y));if(g.to>d)return v+(g.point&&g.to>d?1:0);m=g.to,g.next()}}static of(l,h=!1){let d=new Ag;for(let f of l instanceof eO?[l]:h?function rot(c){if(c.length>1)for(let a=c[0],l=1;l<c.length;l++){let h=c[l];if(V7(a,h)>0)return c.slice().sort(V7);a=h}return c}(l):l)d.add(f.from,f.to,f.value);return d.finish()}}return c.empty=new c([],[],null,-1),c})();Ls.empty.nextLayer=Ls.empty;class Ag{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(a){this.chunks.push(new U7(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,a&&(this.from=[],this.to=[],this.value=[])}add(a,l,h){this.addInner(a,l,h)||(this.nextLayer||(this.nextLayer=new Ag)).add(a,l,h)}addInner(a,l,h){let d=a-this.lastTo||h.startSide-this.last.endSide;if(d<=0&&(a-this.lastFrom||h.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(d<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=a),this.from.push(a-this.chunkStart),this.to.push(l-this.chunkStart),this.last=h,this.lastFrom=a,this.lastTo=l,this.value.push(h),h.point&&(this.maxPoint=Math.max(this.maxPoint,l-a)),0))}addChunk(a,l){if((a-this.lastTo||l.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,l.maxPoint),this.chunks.push(l),this.chunkPos.push(a);let h=l.value.length-1;return this.last=l.value[h],this.lastFrom=l.from[h]+a,this.lastTo=l.to[h]+a,!0}finish(){return this.finishInner(Ls.empty)}finishInner(a){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return a;let l=Ls.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(a):a,this.setMaxPoint);return this.from=null,l}}function ype(c,a,l){let h=new Map;for(let f of c)for(let p=0;p<f.chunk.length;p++)f.chunk[p].maxPoint<=0&&h.set(f.chunk[p],f.chunkPos[p]);let d=new Set;for(let f of a)for(let p=0;p<f.chunk.length;p++){let g=h.get(f.chunk[p]);null!=g&&(l?l.mapPos(g):g)==f.chunkPos[p]&&!l?.touchesRange(g,g+f.chunk[p].length)&&d.add(f.chunk[p])}return d}class _pe{constructor(a,l,h,d=0){this.layer=a,this.skip=l,this.minPoint=h,this.rank=d}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(a,l=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(a,l,!1),this}gotoInner(a,l,h){for(;this.chunkIndex<this.layer.chunk.length;){let d=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(d)||this.layer.chunkEnd(this.chunkIndex)<a||d.maxPoint<this.minPoint))break;this.chunkIndex++,h=!1}if(this.chunkIndex<this.layer.chunk.length){let d=this.layer.chunk[this.chunkIndex].findIndex(a-this.layer.chunkPos[this.chunkIndex],l,!0);(!h||this.rangeIndex<d)&&this.setRangeIndex(d)}this.next()}forward(a,l){(this.to-a||this.endSide-l)<0&&this.gotoInner(a,l,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let a=this.layer.chunkPos[this.chunkIndex],l=this.layer.chunk[this.chunkIndex];if(this.from=a+l.from[this.rangeIndex],this.to=a+l.to[this.rangeIndex],this.value=l.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(a){if(a==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=a}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(a){return this.from-a.from||this.startSide-a.startSide||this.rank-a.rank||this.to-a.to||this.endSide-a.endSide}}class tO{constructor(a){this.heap=a}static from(a,l=null,h=-1){let d=[];for(let f=0;f<a.length;f++)for(let p=a[f];!p.isEmpty;p=p.nextLayer)p.maxPoint>=h&&d.push(new _pe(p,l,h,f));return 1==d.length?d[0]:new tO(d)}get startSide(){return this.value?this.value.startSide:0}goto(a,l=-1e9){for(let h of this.heap)h.goto(a,l);for(let h=this.heap.length>>1;h>=0;h--)z7(this.heap,h);return this.next(),this}forward(a,l){for(let h of this.heap)h.forward(a,l);for(let h=this.heap.length>>1;h>=0;h--)z7(this.heap,h);(this.to-a||this.value.endSide-l)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let a=this.heap[0];this.from=a.from,this.to=a.to,this.value=a.value,this.rank=a.rank,a.value&&a.next(),z7(this.heap,0)}}}function z7(c,a){for(let l=c[a];;){let h=1+(a<<1);if(h>=c.length)break;let d=c[h];if(h+1<c.length&&d.compare(c[h+1])>=0&&(d=c[h+1],h++),l.compare(d)<0)break;c[h]=l,c[a]=d,a=h}}class nO{constructor(a,l,h){this.minPoint=h,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=tO.from(a,l,h)}goto(a,l=-1e9){return this.cursor.goto(a,l),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=a,this.endSide=l,this.openStart=-1,this.next(),this}forward(a,l){for(;this.minActive>-1&&(this.activeTo[this.minActive]-a||this.active[this.minActive].endSide-l)<0;)this.removeActive(this.minActive);this.cursor.forward(a,l)}removeActive(a){iA(this.active,a),iA(this.activeTo,a),iA(this.activeRank,a),this.minActive=Cpe(this.active,this.activeTo)}addActive(a){let l=0,{value:h,to:d,rank:f}=this.cursor;for(;l<this.activeRank.length&&this.activeRank[l]<=f;)l++;rA(this.active,l,h),rA(this.activeTo,l,d),rA(this.activeRank,l,f),a&&rA(a,l,this.cursor.from),this.minActive=Cpe(this.active,this.activeTo)}next(){let a=this.to,l=this.point;this.point=null;let h=this.openStart<0?[]:null;for(;;){let d=this.minActive;if(d>-1&&(this.activeTo[d]-this.cursor.from||this.active[d].endSide-this.cursor.startSide)<0){if(this.activeTo[d]>a){this.to=this.activeTo[d],this.endSide=this.active[d].endSide;break}this.removeActive(d),h&&iA(h,d)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>a){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let f=this.cursor.value;if(f.point){if(!(l&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=f,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=f.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(h),this.cursor.next()}}}if(h){this.openStart=0;for(let d=h.length-1;d>=0&&h[d]<a;d--)this.openStart++}}activeForPoint(a){if(!this.active.length)return this.active;let l=[];for(let h=this.active.length-1;h>=0&&!(this.activeRank[h]<this.pointRank);h--)(this.activeTo[h]>a||this.activeTo[h]==a&&this.active[h].endSide>=this.point.endSide)&&l.push(this.active[h]);return l.reverse()}openEnd(a){let l=0;for(let h=this.activeTo.length-1;h>=0&&this.activeTo[h]>a;h--)l++;return l}}function bpe(c,a,l,h,d,f){c.goto(a),l.goto(h);let p=h+d,g=h,m=h-a;for(;;){let v=c.to+m-l.to||c.endSide-l.endSide,y=v<0?c.to+m:l.to,_=Math.min(y,p);if(c.point||l.point?c.point&&l.point&&(c.point==l.point||c.point.eq(l.point))&&H7(c.activeForPoint(c.to+m),l.activeForPoint(l.to))||f.comparePoint(g,_,c.point,l.point):_>g&&!H7(c.active,l.active)&&f.compareRange(g,_,c.active,l.active),y>p)break;g=y,v<=0&&c.next(),v>=0&&l.next()}}function H7(c,a){if(c.length!=a.length)return!1;for(let l=0;l<c.length;l++)if(c[l]!=a[l]&&!c[l].eq(a[l]))return!1;return!0}function iA(c,a){for(let l=a,h=c.length-1;l<h;l++)c[l]=c[l+1];c.pop()}function rA(c,a,l){for(let h=c.length-1;h>=a;h--)c[h+1]=c[h];c[a]=l}function Cpe(c,a){let l=-1,h=1e9;for(let d=0;d<a.length;d++)(a[d]-h||c[d].endSide-c[l].endSide)<0&&(l=d,h=a[d]);return l}function iO(c,a,l=c.length){let h=0;for(let d=0;d<l;)9==c.charCodeAt(d)?(h+=a-h%a,d++):(h++,d=kl(c,d));return h}function $7(c,a,l,h){for(let d=0,f=0;;){if(f>=a)return d;if(d==c.length)break;f+=9==c.charCodeAt(d)?l-f%l:1,d=kl(c,d)}return!0===h?-1:c.length}const Spe=typeof Symbol>"u"?"__\u037c":Symbol.for("\u037c"),G7=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),xpe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ig{constructor(a,l){this.rules=[];let{finish:h}=l||{};function d(p){return/^@/.test(p)?[p]:p.split(/,\s*/)}function f(p,g,m,v){let y=[],_=/^@(\w+)\b/.exec(p[0]),b=_&&"keyframes"==_[1];if(_&&null==g)return m.push(p[0]+";");for(let C in g){let x=g[C];if(/&/.test(C))f(C.split(/,\s*/).map(w=>p.map(O=>w.replace(/&/,O))).reduce((w,O)=>w.concat(O)),x,m);else if(x&&"object"==typeof x){if(!_)throw new RangeError("The value of a property ("+C+") should be a primitive value.");f(d(C),x,y,b)}else null!=x&&y.push(C.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+x+";")}(y.length||b)&&m.push((!h||_||v?p:p.map(h)).join(", ")+" {"+y.join(" ")+"}")}for(let p in a)f(d(p),a[p],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let a=xpe[Spe]||1;return xpe[Spe]=a+1,"\u037c"+a.toString(36)}static mount(a,l){(a[G7]||new sot(a)).mount(Array.isArray(l)?l:[l])}}let sA=null;class sot{constructor(a){if(!a.head&&a.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(sA)return a.adoptedStyleSheets=[sA.sheet].concat(a.adoptedStyleSheets),a[G7]=sA;this.sheet=new CSSStyleSheet,a.adoptedStyleSheets=[this.sheet].concat(a.adoptedStyleSheets),sA=this}else{this.styleTag=(a.ownerDocument||a).createElement("style");let l=a.head||a;l.insertBefore(this.styleTag,l.firstChild)}this.modules=[],a[G7]=this}mount(a){let l=this.sheet,h=0,d=0;for(let f=0;f<a.length;f++){let p=a[f],g=this.modules.indexOf(p);if(g<d&&g>-1&&(this.modules.splice(g,1),d--,g=-1),-1==g){if(this.modules.splice(d++,0,p),l)for(let m=0;m<p.rules.length;m++)l.insertRule(p.rules[m],h++)}else{for(;d<g;)h+=this.modules[d++].rules.length;h+=p.rules.length,d++}}if(!l){let f="";for(let p=0;p<this.modules.length;p++)f+=this.modules[p].getRules()+"\n";this.styleTag.textContent=f}}}for(var Pg={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rO={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},wpe=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),oot=(typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),typeof navigator<"u"&&/Mac/.test(navigator.platform)),aot=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),lot=oot||wpe&&+wpe[1]<57,wa=0;wa<10;wa++)Pg[48+wa]=Pg[96+wa]=String(wa);for(wa=1;wa<=24;wa++)Pg[wa+111]="F"+wa;for(wa=65;wa<=90;wa++)Pg[wa]=String.fromCharCode(wa+32),rO[wa]=String.fromCharCode(wa);for(var Q7 in Pg)rO.hasOwnProperty(Q7)||(rO[Q7]=Pg[Q7]);function oA(c){let a;return a=11==c.nodeType?c.getSelection?c:c.ownerDocument:c,a.getSelection()}function F1(c,a){return!!a&&(c==a||c.contains(1!=a.nodeType?a.parentNode:a))}function aA(c,a){if(!a.anchorNode)return!1;try{return F1(c,a.anchorNode)}catch{return!1}}function sO(c){return 3==c.nodeType?N1(c,0,c.nodeValue.length).getClientRects():1==c.nodeType?c.getClientRects():[]}function lA(c,a,l,h){return!!l&&(Ope(c,a,l,h,-1)||Ope(c,a,l,h,1))}function cA(c){for(var a=0;;a++)if(!(c=c.previousSibling))return a}function Ope(c,a,l,h,d){for(;;){if(c==l&&a==h)return!0;if(a==(d<0?0:oO(c))){if("DIV"==c.nodeName)return!1;let f=c.parentNode;if(!f||1!=f.nodeType)return!1;a=cA(c)+(d<0?0:1),c=f}else{if(1!=c.nodeType)return!1;if(1==(c=c.childNodes[a+(d<0?-1:0)]).nodeType&&"false"==c.contentEditable)return!1;a=d<0?oO(c):0}}}function oO(c){return 3==c.nodeType?c.nodeValue.length:c.childNodes.length}const Dpe={left:0,right:0,top:0,bottom:0};function j7(c,a){let l=a?c.left:c.right;return{left:l,right:l,top:c.top,bottom:c.bottom}}function hot(c){return{left:0,right:c.innerWidth,top:0,bottom:c.innerHeight}}class pot{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==a.focusOffset}setRange(a){this.set(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)}set(a,l,h,d){this.anchorNode=a,this.anchorOffset=l,this.focusNode=h,this.focusOffset=d}}let kpe,L1=null;function Tpe(c){if(c.setActive)return c.setActive();if(L1)return c.focus(L1);let a=[];for(let l=c;l&&(a.push(l,l.scrollTop,l.scrollLeft),l!=l.ownerDocument);l=l.parentNode);if(c.focus(null==L1?{get preventScroll(){return L1={preventScroll:!0},!0}}:void 0),!L1){L1=!1;for(let l=0;l<a.length;){let h=a[l++],d=a[l++],f=a[l++];h.scrollTop!=d&&(h.scrollTop=d),h.scrollLeft!=f&&(h.scrollLeft=f)}}}function N1(c,a,l=a){let h=kpe||(kpe=document.createRange());return h.setEnd(c,l),h.setStart(c,a),h}function B1(c,a,l){let h={key:a,code:a,keyCode:l,which:l,cancelable:!0},d=new KeyboardEvent("keydown",h);d.synthetic=!0,c.dispatchEvent(d);let f=new KeyboardEvent("keyup",h);return f.synthetic=!0,c.dispatchEvent(f),d.defaultPrevented||f.defaultPrevented}function Mpe(c){for(;c.attributes.length;)c.removeAttributeNode(c.attributes[0])}class Ga{constructor(a,l,h=!0){this.node=a,this.offset=l,this.precise=h}static before(a,l){return new Ga(a.parentNode,cA(a),l)}static after(a,l){return new Ga(a.parentNode,cA(a)+1,l)}}const Z7=[];class ys{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(a){let l=this.posAtStart;for(let h of this.children){if(h==a)return l;l+=h.length+h.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(a){return this.posBefore(a)+a.length}coordsAt(a,l){return null}sync(a,l){if(2&this.dirty){let f,h=this.dom,d=null;for(let p of this.children){if(p.dirty){if(!p.dom&&(f=d?d.nextSibling:h.firstChild)){let g=ys.get(f);(!g||!g.parent&&g.canReuseDOM(p))&&p.reuseDOM(f)}p.sync(a,l),p.dirty=0}if(f=d?d.nextSibling:h.firstChild,l&&!l.written&&l.node==h&&f!=p.dom&&(l.written=!0),p.dom.parentNode==h)for(;f&&f!=p.dom;)f=Epe(f);else h.insertBefore(p.dom,f);d=p.dom}for(f=d?d.nextSibling:h.firstChild,f&&l&&l.node==h&&(l.written=!0);f;)f=Epe(f)}else if(1&this.dirty)for(let h of this.children)h.dirty&&(h.sync(a,l),h.dirty=0)}reuseDOM(a){}localPosFromDOM(a,l){let h;if(a==this.dom)h=this.dom.childNodes[l];else{let d=0==oO(a)?0:0==l?-1:1;for(;;){let f=a.parentNode;if(f==this.dom)break;0==d&&f.firstChild!=f.lastChild&&(d=a==f.firstChild?-1:1),a=f}h=d<0?a:a.nextSibling}if(h==this.dom.firstChild)return 0;for(;h&&!ys.get(h);)h=h.nextSibling;if(!h)return this.length;for(let d=0,f=0;;d++){let p=this.children[d];if(p.dom==h)return f;f+=p.length+p.breakAfter}}domBoundsAround(a,l,h=0){let d=-1,f=-1,p=-1,g=-1;for(let m=0,v=h,y=h;m<this.children.length;m++){let _=this.children[m],b=v+_.length;if(v<a&&b>l)return _.domBoundsAround(a,l,v);if(b>=a&&-1==d&&(d=m,f=v),v>l&&_.dom.parentNode==this.dom){p=m,g=y;break}y=b,v=b+_.breakAfter}return{from:f,to:g<0?h+this.length:g,startDOM:(d?this.children[d-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:p<this.children.length&&p>=0?this.children[p].dom:null}}markDirty(a=!1){this.dirty|=2,this.markParentsDirty(a)}markParentsDirty(a){for(let l=this.parent;l;l=l.parent){if(a&&(l.dirty|=2),1&l.dirty)return;l.dirty|=1,a=!1}}setParent(a){this.parent!=a&&(this.parent=a,this.dirty&&this.markParentsDirty(!0))}setDOM(a){this.dom&&(this.dom.cmView=null),this.dom=a,a.cmView=this}get rootView(){for(let a=this;;){let l=a.parent;if(!l)return a;a=l}}replaceChildren(a,l,h=Z7){this.markDirty();for(let d=a;d<l;d++){let f=this.children[d];f.parent==this&&f.destroy()}this.children.splice(a,l-a,...h);for(let d=0;d<h.length;d++)h[d].setParent(this)}ignoreMutation(a){return!1}ignoreEvent(a){return!1}childCursor(a=this.length){return new Ape(this.children,a,this.children.length)}childPos(a,l=1){return this.childCursor().findPos(a,l)}toString(){let a=this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==a?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(a){return a.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(a,l,h,d,f,p){return!1}become(a){return!1}canReuseDOM(a){return a.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function Epe(c){let a=c.nextSibling;return c.parentNode.removeChild(c),a}ys.prototype.breakAfter=0;class Ape{constructor(a,l,h){this.children=a,this.pos=l,this.i=h,this.off=0}findPos(a,l=1){for(;;){if(a>this.pos||a==this.pos&&(l>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=a-this.pos,this;let h=this.children[--this.i];this.pos-=h.length+h.breakAfter}}}function Ipe(c,a,l,h,d,f,p,g,m){let{children:v}=c,y=v.length?v[a]:null,_=f.length?f[f.length-1]:null,b=_?_.breakAfter:p;if(!(a==h&&y&&!p&&!b&&f.length<2&&y.merge(l,d,f.length?_:null,0==l,g,m))){if(h<v.length){let C=v[h];C&&d<C.length?(a==h&&(C=C.split(d),d=0),!b&&_&&C.merge(0,d,_,!0,0,m)?f[f.length-1]=C:(d&&C.merge(0,d,null,!1,0,m),f.push(C))):C?.breakAfter&&(_?_.breakAfter=1:p=1),h++}for(y&&(y.breakAfter=p,l>0&&(!p&&f.length&&y.merge(l,y.length,f[0],!1,g,0)?y.breakAfter=f.shift().breakAfter:(l<y.length||y.children.length&&0==y.children[y.children.length-1].length)&&y.merge(l,y.length,null,!1,g,0),a++));a<h&&f.length;)if(v[h-1].become(f[f.length-1]))h--,f.pop(),m=f.length?0:g;else{if(!v[a].become(f[0]))break;a++,f.shift(),g=f.length?0:m}!f.length&&a&&h<v.length&&!v[a-1].breakAfter&&v[h].merge(0,0,v[a-1],!1,g,m)&&a--,(a<h||f.length)&&c.replaceChildren(a,h,f)}}function Ppe(c,a,l,h,d,f){let p=c.childCursor(),{i:g,off:m}=p.findPos(l,1),{i:v,off:y}=p.findPos(a,-1),_=a-l;for(let b of h)_+=b.length;c.length+=_,Ipe(c,v,y,g,m,h,0,d,f)}let Vc=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},q7=typeof document<"u"?document:{documentElement:{style:{}}};const X7=/Edge\/(\d+)/.exec(Vc.userAgent),Rpe=/MSIE \d/.test(Vc.userAgent),Y7=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vc.userAgent),uA=!!(Rpe||Y7||X7),Fpe=!uA&&/gecko\/(\d+)/i.test(Vc.userAgent),K7=!uA&&/Chrome\/(\d+)/.exec(Vc.userAgent),Lpe="webkitFontSmoothing"in q7.documentElement.style,Npe=!uA&&/Apple Computer/.test(Vc.vendor),Bpe=Npe&&(/Mobile\/\w+/.test(Vc.userAgent)||Vc.maxTouchPoints>2);var Hn={mac:Bpe||/Mac/.test(Vc.platform),windows:/Win/.test(Vc.platform),linux:/Linux|X11/.test(Vc.platform),ie:uA,ie_version:Rpe?q7.documentMode||6:Y7?+Y7[1]:X7?+X7[1]:0,gecko:Fpe,gecko_version:Fpe?+(/Firefox\/(\d+)/.exec(Vc.userAgent)||[0,0])[1]:0,chrome:!!K7,chrome_version:K7?+K7[1]:0,ios:Bpe,android:/Android\b/.test(Vc.userAgent),webkit:Lpe,safari:Npe,webkit_version:Lpe?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=q7.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Rg extends ys{constructor(a){super(),this.text=a}get length(){return this.text.length}createDOM(a){this.setDOM(a||document.createTextNode(this.text))}sync(a,l){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(l&&l.node==this.dom&&(l.written=!0),this.dom.nodeValue=this.text)}reuseDOM(a){3==a.nodeType&&this.createDOM(a)}merge(a,l,h){return(!h||h instanceof Rg&&!(this.length-(l-a)+h.length>256))&&(this.text=this.text.slice(0,a)+(h?h.text:"")+this.text.slice(l),this.markDirty(),!0)}split(a){let l=new Rg(this.text.slice(a));return this.text=this.text.slice(0,a),this.markDirty(),l}localPosFromDOM(a,l){return a==this.dom?l:l?this.text.length:0}domAtPos(a){return new Ga(this.dom,a)}domBoundsAround(a,l,h){return{from:h,to:h+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(a,l){return J7(this.dom,a,l)}}class Vd extends ys{constructor(a,l=[],h=0){super(),this.mark=a,this.children=l,this.length=h;for(let d of l)d.setParent(this)}setAttrs(a){if(Mpe(a),this.mark.class&&(a.className=this.mark.class),this.mark.attrs)for(let l in this.mark.attrs)a.setAttribute(l,this.mark.attrs[l]);return a}reuseDOM(a){a.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(a),this.dirty|=6)}sync(a,l){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(a,l)}merge(a,l,h,d,f,p){return!(h&&(!(h instanceof Vd&&h.mark.eq(this.mark))||a&&f<=0||l<this.length&&p<=0)||(Ppe(this,a,l,h?h.children:[],f-1,p-1),this.markDirty(),0))}split(a){let l=[],h=0,d=-1,f=0;for(let g of this.children){let m=h+g.length;m>a&&l.push(h<a?g.split(a-h):g),d<0&&h>=a&&(d=f),h=m,f++}let p=this.length-a;return this.length=a,d>-1&&(this.children.length=d,this.markDirty()),new Vd(this.mark,l,p)}domAtPos(a){return zpe(this,a)}coordsAt(a,l){return $pe(this,a,l)}}function J7(c,a,l){let h=c.nodeValue.length;a>h&&(a=h);let d=a,f=a,p=0;0==a&&l<0||a==h&&l>=0?Hn.chrome||Hn.gecko||(a?(d--,p=1):f<h&&(f++,p=-1)):l<0?d--:f<h&&f++;let g=N1(c,d,f).getClientRects();if(!g.length)return Dpe;let m=g[(p?p<0:l>=0)?0:g.length-1];return Hn.safari&&!p&&0==m.width&&(m=Array.prototype.find.call(g,v=>v.width)||m),p?j7(m,p<0):m||null}class Fg extends ys{constructor(a,l,h){super(),this.widget=a,this.length=l,this.side=h,this.prevWidget=null}static create(a,l,h){return new(a.customView||Fg)(a,l,h)}split(a){let l=Fg.create(this.widget,this.length-a,this.side);return this.length-=a,l}sync(a){(!this.dom||!this.widget.updateDOM(this.dom,a))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(a)),this.dom.contentEditable="false")}getSide(){return this.side}merge(a,l,h,d,f,p){return!(h&&(!(h instanceof Fg&&this.widget.compare(h.widget))||a>0&&f<=0||l<this.length&&p<=0)||(this.length=a+(h?h.length:0)+(this.length-l),0))}become(a){return a.length==this.length&&a instanceof Fg&&a.side==this.side&&this.widget.constructor==a.widget.constructor&&(this.widget.eq(a.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=a.widget,!0)}ignoreMutation(){return!0}ignoreEvent(a){return this.widget.ignoreEvent(a)}get overrideDOMText(){if(0==this.length)return wr.empty;let a=this;for(;a.parent;)a=a.parent;let{view:l}=a,h=l&&l.state.doc,d=this.posAtStart;return h?h.slice(d,d+this.length):wr.empty}domAtPos(a){return 0==a?Ga.before(this.dom):Ga.after(this.dom,a==this.length)}domBoundsAround(){return null}coordsAt(a,l){let h=this.dom.getClientRects(),d=null;if(!h.length)return Dpe;for(let f=a>0?h.length-1:0;d=h[f],!(a>0?0==f:f==h.length-1||d.top<d.bottom);f+=a>0?-1:1);return this.length?d:j7(d,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Vpe extends Fg{domAtPos(a){let{topView:l,text:h}=this.widget;return l?eH(a,0,l,h,(d,f)=>d.domAtPos(f),d=>new Ga(h,Math.min(d,h.nodeValue.length))):new Ga(h,Math.min(a,h.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(a,l){let{topView:h,text:d}=this.widget;return h?Upe(a,l,h,d):Math.min(l,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(a,l){let{topView:h,text:d}=this.widget;return h?eH(a,l,h,d,(f,p,g)=>f.coordsAt(p,g),(f,p)=>J7(d,f,p)):J7(d,a,l)}destroy(){var a;super.destroy(),null===(a=this.widget.topView)||void 0===a||a.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function eH(c,a,l,h,d,f){if(l instanceof Vd){for(let p=l.dom.firstChild;p;p=p.nextSibling){let g=ys.get(p);if(!g)return f(c,a);let m=F1(p,h),v=g.length+(m?h.nodeValue.length:0);if(c<v||c==v&&g.getSide()<=0)return m?eH(c,a,g,h,d,f):d(g,c,a);c-=v}return d(l,l.length,-1)}return l.dom==h?f(c,a):d(l,c,a)}function Upe(c,a,l,h){if(l instanceof Vd)for(let d of l.children){let f=0,p=F1(d.dom,h);if(F1(d.dom,c))return f+(p?Upe(c,a,d,h):d.localPosFromDOM(c,a));f+=p?h.nodeValue.length:d.length}else if(l.dom==h)return Math.min(a,h.nodeValue.length);return l.localPosFromDOM(c,a)}class V1 extends ys{constructor(a){super(),this.side=a}get length(){return 0}merge(){return!1}become(a){return a instanceof V1&&a.side==this.side}split(){return new V1(this.side)}sync(){if(!this.dom){let a=document.createElement("img");a.className="cm-widgetBuffer",a.setAttribute("aria-hidden","true"),this.setDOM(a)}}getSide(){return this.side}domAtPos(a){return Ga.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(a){let l=this.dom.getBoundingClientRect(),h=function yot(c,a){let l=c.parent,h=l?l.children.indexOf(c):-1;for(;l&&h>=0;)if(a<0?h>0:h<l.children.length){let d=l.children[h+a];if(d instanceof Rg){let f=d.coordsAt(a<0?d.length:0,a);if(f)return f}h+=a}else{if(!(l instanceof Vd&&l.parent)){let d=l.dom.lastChild;if(d&&"BR"==d.nodeName)return d.getClientRects()[0];break}h=l.parent.children.indexOf(l)+(a<0?0:1),l=l.parent}}(this,this.side>0?-1:1);return h&&h.top<l.bottom&&h.bottom>l.top?{left:l.left,right:l.right,top:h.top,bottom:h.bottom}:l}get overrideDOMText(){return wr.empty}}function zpe(c,a){let l=c.dom,{children:h}=c,d=0;for(let f=0;d<h.length;d++){let p=h[d],g=f+p.length;if(!(g==f&&p.getSide()<=0)){if(a>f&&a<g&&p.dom.parentNode==l)return p.domAtPos(a-f);if(a<=f)break;f=g}}for(let f=d;f>0;f--){let p=h[f-1];if(p.dom.parentNode==l)return p.domAtPos(p.length)}for(let f=d;f<h.length;f++){let p=h[f];if(p.dom.parentNode==l)return p.domAtPos(0)}return new Ga(l,0)}function Hpe(c,a,l){let h,{children:d}=c;l>0&&a instanceof Vd&&d.length&&(h=d[d.length-1])instanceof Vd&&h.mark.eq(a.mark)?Hpe(h,a.children[0],l-1):(d.push(a),a.setParent(c)),c.length+=a.length}function $pe(c,a,l){let h=null,d=-1,f=null,p=-1;!function g(v,y){for(let _=0,b=0;_<v.children.length&&b<=y;_++){let C=v.children[_],x=b+C.length;x>=y&&(C.children.length?g(C,y-b):!f&&(x>y||b==x&&C.getSide()>0)?(f=C,p=y-b):(b<y||b==x&&C.getSide()<0)&&(h=C,d=y-b)),b=x}}(c,a);let m=(l<0?h:f)||h||f;return m?m.coordsAt(Math.max(0,m==h?d:p),l):function _ot(c){let a=c.dom.lastChild;if(!a)return c.dom.getBoundingClientRect();let l=sO(a);return l[l.length-1]||null}(c)}function tH(c,a){for(let l in c)"class"==l&&a.class?a.class+=" "+c.class:"style"==l&&a.style?a.style+=";"+c.style:a[l]=c[l];return a}function nH(c,a){if(c==a)return!0;if(!c||!a)return!1;let l=Object.keys(c),h=Object.keys(a);if(l.length!=h.length)return!1;for(let d of l)if(-1==h.indexOf(d)||c[d]!==a[d])return!1;return!0}function iH(c,a,l){let h=null;if(a)for(let d in a)l&&d in l||c.removeAttribute(h=d);if(l)for(let d in l)a&&a[d]==l[d]||c.setAttribute(h=d,l[d]);return!!h}Rg.prototype.children=Fg.prototype.children=V1.prototype.children=Z7;class cp{eq(a){return!1}updateDOM(a,l){return!1}compare(a){return this==a||this.constructor==a.constructor&&this.eq(a)}get estimatedHeight(){return-1}ignoreEvent(a){return!0}get customView(){return null}destroy(a){}}var ns=function(c){return c[c.Text=0]="Text",c[c.WidgetBefore=1]="WidgetBefore",c[c.WidgetAfter=2]="WidgetAfter",c[c.WidgetRange=3]="WidgetRange",c}(ns||(ns={}));class Gn extends j0{constructor(a,l,h,d){super(),this.startSide=a,this.endSide=l,this.widget=h,this.spec=d}get heightRelevant(){return!1}static mark(a){return new hA(a)}static widget(a){let l=a.side||0,h=!!a.block;return l+=h?l>0?3e8:-4e8:l>0?1e8:-1e8,new Z0(a,l,l,h,a.widget||null,!1)}static replace(a){let h,d,l=!!a.block;if(a.isBlockGap)h=-5e8,d=4e8;else{let{start:f,end:p}=Wpe(a,l);h=(f?l?-3e8:-1:5e8)-1,d=1+(p?l?2e8:1:-6e8)}return new Z0(a,h,d,l,a.widget||null,!0)}static line(a){return new aO(a)}static set(a,l=!1){return Ls.of(a,l)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Gn.none=Ls.empty;class hA extends Gn{constructor(a){let{start:l,end:h}=Wpe(a);super(l?-1:5e8,h?1:-6e8,null,a),this.tagName=a.tagName||"span",this.class=a.class||"",this.attrs=a.attributes||null}eq(a){return this==a||a instanceof hA&&this.tagName==a.tagName&&this.class==a.class&&nH(this.attrs,a.attrs)}range(a,l=a){if(a>=l)throw new RangeError("Mark decorations may not be empty");return super.range(a,l)}}hA.prototype.point=!1;class aO extends Gn{constructor(a){super(-2e8,-2e8,null,a)}eq(a){return a instanceof aO&&this.spec.class==a.spec.class&&nH(this.spec.attributes,a.spec.attributes)}range(a,l=a){if(l!=a)throw new RangeError("Line decoration ranges must be zero-length");return super.range(a,l)}}aO.prototype.mapMode=xa.TrackBefore,aO.prototype.point=!0;class Z0 extends Gn{constructor(a,l,h,d,f,p){super(l,h,f,a),this.block=d,this.isReplace=p,this.mapMode=d?l<=0?xa.TrackBefore:xa.TrackAfter:xa.TrackDel}get type(){return this.startSide<this.endSide?ns.WidgetRange:this.startSide<=0?ns.WidgetBefore:ns.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(a){return a instanceof Z0&&function bot(c,a){return c==a||!!(c&&a&&c.compare(a))}(this.widget,a.widget)&&this.block==a.block&&this.startSide==a.startSide&&this.endSide==a.endSide}range(a,l=a){if(this.isReplace&&(a>l||a==l&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&l!=a)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(a,l)}}function Wpe(c,a=!1){let{inclusiveStart:l,inclusiveEnd:h}=c;return null==l&&(l=c.inclusive),null==h&&(h=c.inclusive),{start:l??a,end:h??a}}function rH(c,a,l,h=0){let d=l.length-1;d>=0&&l[d]+h>=c?l[d]=Math.max(l[d],a):l.push(c,a)}Z0.prototype.point=!0;class El extends ys{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(a,l,h,d,f,p){if(h){if(!(h instanceof El))return!1;this.dom||h.transferDOM(this)}return d&&this.setDeco(h?h.attrs:null),Ppe(this,a,l,h?h.children:[],f,p),!0}split(a){let l=new El;if(l.breakAfter=this.breakAfter,0==this.length)return l;let{i:h,off:d}=this.childPos(a);d&&(l.append(this.children[h].split(d),0),this.children[h].merge(d,this.children[h].length,null,!1,0,0),h++);for(let f=h;f<this.children.length;f++)l.append(this.children[f],0);for(;h>0&&0==this.children[h-1].length;)this.children[--h].destroy();return this.children.length=h,this.markDirty(),this.length=a,l}transferDOM(a){this.dom&&(this.markDirty(),a.setDOM(this.dom),a.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(a){nH(this.attrs,a)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=a)}append(a,l){Hpe(this,a,l)}addLineDeco(a){let l=a.spec.attributes,h=a.spec.class;l&&(this.attrs=tH(l,this.attrs||{})),h&&(this.attrs=tH({class:h},this.attrs||{}))}domAtPos(a){return zpe(this,a)}reuseDOM(a){"DIV"==a.nodeName&&(this.setDOM(a),this.dirty|=6)}sync(a,l){var h;this.dom?4&this.dirty&&(Mpe(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(iH(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(a,l);let d=this.dom.lastChild;for(;d&&ys.get(d)instanceof Vd;)d=d.lastChild;if(!(d&&this.length&&("BR"==d.nodeName||0!=(null===(h=ys.get(d))||void 0===h?void 0:h.isEditable)||Hn.ios&&this.children.some(f=>f instanceof Rg)))){let f=document.createElement("BR");f.cmIgnore=!0,this.dom.appendChild(f)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let a=0;for(let l of this.children){if(!(l instanceof Rg)||/[^ -~]/.test(l.text))return null;let h=sO(l.dom);if(1!=h.length)return null;a+=h[0].width}return a?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:a/this.length}:null}coordsAt(a,l){return $pe(this,a,l)}become(a){return!1}get type(){return ns.Text}static find(a,l){for(let h=0,d=0;h<a.children.length;h++){let f=a.children[h],p=d+f.length;if(p>=l){if(f instanceof El)return f;if(p>l)break}d=p+f.breakAfter}return null}}class q0 extends ys{constructor(a,l,h){super(),this.widget=a,this.length=l,this.type=h,this.breakAfter=0,this.prevWidget=null}merge(a,l,h,d,f,p){return!(h&&(!(h instanceof q0&&this.widget.compare(h.widget))||a>0&&f<=0||l<this.length&&p<=0)||(this.length=a+(h?h.length:0)+(this.length-l),0))}domAtPos(a){return 0==a?Ga.before(this.dom):Ga.after(this.dom,a==this.length)}split(a){let l=this.length-a;this.length=a;let h=new q0(this.widget,l,this.type);return h.breakAfter=this.breakAfter,h}get children(){return Z7}sync(a){(!this.dom||!this.widget.updateDOM(this.dom,a))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(a)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):wr.empty}domBoundsAround(){return null}become(a){return a instanceof q0&&a.type==this.type&&a.widget.constructor==this.widget.constructor&&(a.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=a.widget,this.length=a.length,this.breakAfter=a.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(a){return this.widget.ignoreEvent(a)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class sH{constructor(a,l,h,d){this.doc=a,this.pos=l,this.end=h,this.disallowBlockEffectsFor=d,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=a.iter(),this.skip=l}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let a=this.content[this.content.length-1];return!(a.breakAfter||a instanceof q0&&a.type==ns.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new El),this.atCursorPos=!0),this.curLine}flushBuffer(a=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(dA(new V1(-1),a),a.length),this.pendingBuffer=0)}addBlockWidget(a){this.flushBuffer(),this.curLine=null,this.content.push(a)}finish(a){this.pendingBuffer&&a<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(a,l,h){for(;a>0;){if(this.textOff==this.text.length){let{value:f,lineBreak:p,done:g}=this.cursor.next(this.skip);if(this.skip=0,g)throw new Error("Ran out of text content when drawing inline views");if(p){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,a--;continue}this.text=f,this.textOff=0}let d=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(l.slice(l.length-h)),this.getLine().append(dA(new Rg(this.text.slice(this.textOff,this.textOff+d)),l),h),this.atCursorPos=!0,this.textOff+=d,a-=d,h=0}}span(a,l,h,d){this.buildText(l-a,h,d),this.pos=l,this.openStart<0&&(this.openStart=d)}point(a,l,h,d,f,p){if(this.disallowBlockEffectsFor[p]&&h instanceof Z0){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let g=l-a;if(h instanceof Z0)if(h.block){let{type:m}=h;m==ns.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new q0(h.widget||new Gpe("div"),g,m))}else{let m=Fg.create(h.widget||new Gpe("span"),g,g?0:h.startSide),v=this.atCursorPos&&!m.isEditable&&f<=d.length&&(a<l||h.startSide>0),y=!m.isEditable&&(a<l||f>d.length||h.startSide<=0),_=this.getLine();2==this.pendingBuffer&&!v&&(this.pendingBuffer=0),this.flushBuffer(d),v&&(_.append(dA(new V1(1),d),f),f=d.length+Math.max(0,f-d.length)),_.append(dA(m,d),f),this.atCursorPos=y,this.pendingBuffer=y?a<l||f>d.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=d.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(h);g&&(this.textOff+g<=this.text.length?this.textOff+=g:(this.skip+=g-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=l),this.openStart<0&&(this.openStart=f)}static build(a,l,h,d,f){let p=new sH(a,l,h,f);return p.openEnd=Ls.spans(d,l,h,p),p.openStart<0&&(p.openStart=p.openEnd),p.finish(p.openEnd),p}}function dA(c,a){for(let l of a)c=new Vd(l,[c],c.length);return c}class Gpe extends cp{constructor(a){super(),this.tag=a}eq(a){return a.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(a){return a.nodeName.toLowerCase()==this.tag}}const Qpe=Vn.define(),jpe=Vn.define(),Zpe=Vn.define(),qpe=Vn.define(),oH=Vn.define(),Xpe=Vn.define(),Ype=Vn.define(),Kpe=Vn.define({combine:c=>c.some(a=>a)}),Jpe=Vn.define({combine:c=>c.some(a=>a)});class fA{constructor(a,l="nearest",h="nearest",d=5,f=5){this.range=a,this.y=l,this.x=h,this.yMargin=d,this.xMargin=f}map(a){return a.empty?this:new fA(this.range.map(a),this.y,this.x,this.yMargin,this.xMargin)}}const ege=rr.define({map:(c,a)=>c.map(a)});function Uc(c,a,l){let h=c.facet(qpe);h.length?h[0](a):window.onerror?window.onerror(String(a),l,void 0,void 0,a):l?console.error(l+":",a):console.error(a)}const pA=Vn.define({combine:c=>!c.length||c[0]});let Cot=0;const lO=Vn.define();class Js{constructor(a,l,h,d){this.id=a,this.create=l,this.domEventHandlers=h,this.extension=d(this)}static define(a,l){const{eventHandlers:h,provide:d,decorations:f}=l||{};return new Js(Cot++,a,h,p=>{let g=[lO.of(p)];return f&&g.push(cO.of(m=>{let v=m.plugin(p);return v?f(v):Gn.none})),d&&g.push(d(p)),g})}static fromClass(a,l){return Js.define(h=>new a(h),l)}}class aH{constructor(a){this.spec=a,this.mustUpdate=null,this.value=null}update(a){if(this.value){if(this.mustUpdate){let l=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(l)}catch(h){if(Uc(l.state,h,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(a)}catch(l){Uc(a.state,l,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(a){var l;if(null!==(l=this.value)&&void 0!==l&&l.destroy)try{this.value.destroy()}catch(h){Uc(a.state,h,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const tge=Vn.define(),gA=Vn.define(),cO=Vn.define(),nge=Vn.define(),ige=Vn.define(),uO=Vn.define();class Eh{constructor(a,l,h,d){this.fromA=a,this.toA=l,this.fromB=h,this.toB=d}join(a){return new Eh(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}addToSet(a){let l=a.length,h=this;for(;l>0;l--){let d=a[l-1];if(!(d.fromA>h.toA)){if(d.toA<h.fromA)break;h=h.join(d),a.splice(l-1,1)}}return a.splice(l,0,h),a}static extendWithRanges(a,l){if(0==l.length)return a;let h=[];for(let d=0,f=0,p=0,g=0;;d++){let m=d==a.length?null:a[d],v=p-g,y=m?m.fromB:1e9;for(;f<l.length&&l[f]<y;){let b=l[f+1],C=Math.max(g,l[f]),x=Math.min(y,b);if(C<=x&&new Eh(C+v,x+v,C,x).addToSet(h),b>y)break;f+=2}if(!m)return h;new Eh(m.fromA,m.toA,m.fromB,m.toB).addToSet(h),p=m.toA,g=m.toB}}}class mA{constructor(a,l,h){this.view=a,this.state=l,this.transactions=h,this.flags=0,this.startState=a.state,this.changes=Go.empty(this.startState.doc.length);for(let f of h)this.changes=this.changes.compose(f.changes);let d=[];this.changes.iterChangedRanges((f,p,g,m)=>d.push(new Eh(f,p,g,m))),this.changedRanges=d}static create(a,l,h){return new mA(a,l,h)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(a=>a.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var Ns=function(c){return c[c.LTR=0]="LTR",c[c.RTL=1]="RTL",c}(Ns||(Ns={}));const lH=Ns.LTR,Sot=Ns.RTL;function rge(c){let a=[];for(let l=0;l<c.length;l++)a.push(1<<+c[l]);return a}const xot=rge("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),wot=rge("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),cH=Object.create(null),Ud=[];for(let c of["()","[]","{}"]){let a=c.charCodeAt(0),l=c.charCodeAt(1);cH[a]=l,cH[l]=-a}function Oot(c){return c<=247?xot[c]:1424<=c&&c<=1524?2:1536<=c&&c<=1785?wot[c-1536]:1774<=c&&c<=2220?4:8192<=c&&c<=8203?256:64336<=c&&c<=65023?4:8204==c?256:1}const Dot=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class U1{constructor(a,l,h){this.from=a,this.to=l,this.level=h}get dir(){return this.level%2?Sot:lH}side(a,l){return this.dir==l==a?this.to:this.from}static find(a,l,h,d){let f=-1;for(let p=0;p<a.length;p++){let g=a[p];if(g.from<=l&&g.to>=l){if(g.level==h)return p;(f<0||(0!=d?d<0?g.from<l:g.to>l:a[f].level>g.level))&&(f=p)}}if(f<0)throw new RangeError("Index out of range");return f}}const Bs=[];function oge(c){return[new U1(0,c,0)]}let age="";function lge(c,a,l,h,d){var f;let p=h.head-c.from,g=-1;if(0==p){if(!d||!c.length)return null;a[0].level!=l&&(p=a[0].side(!1,l),g=0)}else if(p==c.length){if(d)return null;let b=a[a.length-1];b.level!=l&&(p=b.side(!0,l),g=a.length-1)}g<0&&(g=U1.find(a,p,null!==(f=h.bidiLevel)&&void 0!==f?f:-1,h.assoc));let m=a[g];p==m.side(d,l)&&(m=a[g+=d?1:-1],p=m.side(!d,l));let v=d==(m.dir==l),y=kl(c.text,p,v);if(age=c.text.slice(Math.min(p,y),Math.max(p,y)),y!=m.side(d,l))return It.cursor(y+c.from,v?-1:1,m.level);let _=g==(d?a.length-1:0)?null:a[g+(d?1:-1)];return _||m.level==l?_&&_.level<m.level?It.cursor(_.side(!d,l)+c.from,d?1:-1,_.level):It.cursor(y+c.from,d?-1:1,m.level):It.cursor(d?c.to:c.from,d?-1:1,l)}class cge{constructor(a,l){this.points=a,this.text="",this.lineSeparator=l.facet(Ml.lineSeparator)}append(a){this.text+=a}lineBreak(){this.text+="\uffff"}readRange(a,l){if(!a)return this;let h=a.parentNode;for(let d=a;;){this.findPointBefore(h,d),this.readNode(d);let f=d.nextSibling;if(f==l)break;let p=ys.get(d),g=ys.get(f);(p&&g?p.breakAfter:(p?p.breakAfter:uge(d))||uge(f)&&("BR"!=d.nodeName||d.cmIgnore))&&this.lineBreak(),d=f}return this.findPointBefore(h,l),this}readTextNode(a){let l=a.nodeValue;for(let h of this.points)h.node==a&&(h.pos=this.text.length+Math.min(h.offset,l.length));for(let h=0,d=this.lineSeparator?null:/\r\n?|\n/g;;){let g,f=-1,p=1;if(this.lineSeparator?(f=l.indexOf(this.lineSeparator,h),p=this.lineSeparator.length):(g=d.exec(l))&&(f=g.index,p=g[0].length),this.append(l.slice(h,f<0?l.length:f)),f<0)break;if(this.lineBreak(),p>1)for(let m of this.points)m.node==a&&m.pos>this.text.length&&(m.pos-=p-1);h=f+p}}readNode(a){if(a.cmIgnore)return;let l=ys.get(a),h=l&&l.overrideDOMText;if(null!=h){this.findPointInside(a,h.length);for(let d=h.iter();!d.next().done;)d.lineBreak?this.lineBreak():this.append(d.value)}else 3==a.nodeType?this.readTextNode(a):"BR"==a.nodeName?a.nextSibling&&this.lineBreak():1==a.nodeType&&this.readRange(a.firstChild,null)}findPointBefore(a,l){for(let h of this.points)h.node==a&&a.childNodes[h.offset]==l&&(h.pos=this.text.length)}findPointInside(a,l){for(let h of this.points)(3==a.nodeType?h.node==a:a.contains(h.node))&&(h.pos=this.text.length+Math.min(l,h.offset))}}function uge(c){return 1==c.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(c.nodeName)}class hge{constructor(a,l){this.node=a,this.offset=l,this.pos=-1}}class dge extends ys{constructor(a){super(),this.view=a,this.compositionDeco=Gn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(a.contentDOM),this.children=[new El],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Eh(0,0,0,a.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(a){let l=a.changedRanges;this.minWidth>0&&l.length&&(l.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Gn.none:(a.transactions.length||this.dirty)&&(this.compositionDeco=function kot(c,a){let l=pge(c);if(!l)return Gn.none;let{from:h,to:d,node:f,text:p}=l,g=a.mapPos(h,1),m=Math.max(g,a.mapPos(d,-1)),{state:v}=c,y=3==f.nodeType?f.nodeValue:new cge([],v).readRange(f.firstChild,null).text;if(m-g<y.length)if(v.doc.sliceString(g,Math.min(v.doc.length,g+y.length),"\uffff")==y)m=g+y.length;else{if(v.doc.sliceString(Math.max(0,m-y.length),m,"\uffff")!=y)return Gn.none;g=m-y.length}else if(v.doc.sliceString(g,m,"\uffff")!=y)return Gn.none;let _=ys.get(f);return _ instanceof Vpe?_=_.widget.topView:_&&(_.parent=null),Gn.set(Gn.replace({widget:new Mot(f,p,_),inclusive:!0}).range(g,m))}(this.view,a.changes)),(Hn.ie||Hn.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.startState.doc.lines&&(this.forceSelection=!0);let f=function Iot(c,a,l){let h=new Aot;return Ls.compare(c,a,l,h),h.changes}(this.decorations,this.updateDeco(),a.changes);return l=Eh.extendWithRanges(l,f),(0!=this.dirty||0!=l.length)&&(this.updateInner(l,a.startState.doc.length),a.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(a,l){this.view.viewState.mustMeasureContent=!0,this.updateChildren(a,l);let{observer:h}=this.view;h.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let f=Hn.chrome||Hn.ios?{node:h.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,f),this.dirty=0,f&&(f.written||h.selectionRange.focusNode!=f.node)&&(this.forceSelection=!0),this.dom.style.height=""});let d=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let f of this.children)f instanceof q0&&f.widget instanceof fge&&d.push(f.dom);h.updateGaps(d)}updateChildren(a,l){let h=this.childCursor(l);for(let d=a.length-1;;d--){let f=d>=0?a[d]:null;if(!f)break;let{fromA:p,toA:g,fromB:m,toB:v}=f,{content:y,breakAtStart:_,openStart:b,openEnd:C}=sH.build(this.view.state.doc,m,v,this.decorations,this.dynamicDecorationMap),{i:x,off:w}=h.findPos(g,1),{i:O,off:D}=h.findPos(p,-1);Ipe(this,O,D,x,w,y,_,b,C)}}updateSelection(a=!1,l=!1){if((a||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!l&&!this.mayControlSelection())return;let h=this.forceSelection;this.forceSelection=!1;let d=this.view.state.selection.main,f=this.domAtPos(d.anchor),p=d.empty?f:this.domAtPos(d.head);if(Hn.gecko&&d.empty&&function Tot(c){return 1==c.node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)}(f)){let m=document.createTextNode("");this.view.observer.ignore(()=>f.node.insertBefore(m,f.node.childNodes[f.offset]||null)),f=p=new Ga(m,0),h=!0}let g=this.view.observer.selectionRange;(h||!g.focusNode||!lA(f.node,f.offset,g.anchorNode,g.anchorOffset)||!lA(p.node,p.offset,g.focusNode,g.focusOffset))&&(this.view.observer.ignore(()=>{Hn.android&&Hn.chrome&&this.dom.contains(g.focusNode)&&function Pot(c,a){for(let l=c;l&&l!=a;l=l.assignedSlot||l.parentNode)if(1==l.nodeType&&"false"==l.contentEditable)return!0;return!1}(g.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=oA(this.view.root);if(m)if(d.empty){if(Hn.gecko){let v=function Eot(c,a){return 1!=c.nodeType?0:(a&&"false"==c.childNodes[a-1].contentEditable?1:0)|(a<c.childNodes.length&&"false"==c.childNodes[a].contentEditable?2:0)}(f.node,f.offset);if(v&&3!=v){let y=gge(f.node,f.offset,1==v?1:-1);y&&(f=new Ga(y,1==v?0:y.nodeValue.length))}}m.collapse(f.node,f.offset),null!=d.bidiLevel&&null!=g.cursorBidiLevel&&(g.cursorBidiLevel=d.bidiLevel)}else if(m.extend){m.collapse(f.node,f.offset);try{m.extend(p.node,p.offset)}catch{}}else{let v=document.createRange();d.anchor>d.head&&([f,p]=[p,f]),v.setEnd(p.node,p.offset),v.setStart(f.node,f.offset),m.removeAllRanges(),m.addRange(v)}}),this.view.observer.setSelectionRange(f,p)),this.impreciseAnchor=f.precise?null:new Ga(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new Ga(g.focusNode,g.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:a}=this,l=a.state.selection.main,h=oA(a.root),{anchorNode:d,anchorOffset:f}=a.observer.selectionRange;if(!(h&&l.empty&&l.assoc&&h.modify))return;let p=El.find(this,l.head);if(!p)return;let g=p.posAtStart;if(l.head==g||l.head==g+p.length)return;let m=this.coordsAt(l.head,-1),v=this.coordsAt(l.head,1);if(!m||!v||m.bottom>v.top)return;let y=this.domAtPos(l.head+l.assoc);h.collapse(y.node,y.offset),h.modify("move",l.assoc<0?"forward":"backward","lineboundary"),a.observer.readSelectionRange();let _=a.observer.selectionRange;a.docView.posFromDOM(_.anchorNode,_.anchorOffset)!=l.from&&h.collapse(d,f)}mayControlSelection(){let a=this.view.root.activeElement;return a==this.dom||aA(this.dom,this.view.observer.selectionRange)&&!(a&&this.dom.contains(a))}nearest(a){for(let l=a;l;){let h=ys.get(l);if(h&&h.rootView==this)return h;l=l.parentNode}return null}posFromDOM(a,l){let h=this.nearest(a);if(!h)throw new RangeError("Trying to find position for a DOM position outside of the document");return h.localPosFromDOM(a,l)+h.posAtStart}domAtPos(a){let{i:l,off:h}=this.childCursor().findPos(a,-1);for(;l<this.children.length-1;){let d=this.children[l];if(h<d.length||d instanceof El)break;l++,h=0}return this.children[l].domAtPos(h)}coordsAt(a,l){for(let h=this.length,d=this.children.length-1;;d--){let f=this.children[d],p=h-f.breakAfter-f.length;if(a>p||a==p&&f.type!=ns.WidgetBefore&&f.type!=ns.WidgetAfter&&(!d||2==l||this.children[d-1].breakAfter||this.children[d-1].type==ns.WidgetBefore&&l>-2))return f.coordsAt(a-p,l);h=p}}measureVisibleLineHeights(a){let l=[],{from:h,to:d}=a,f=this.view.contentDOM.clientWidth,p=f>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,g=-1,m=this.view.textDirection==Ns.LTR;for(let v=0,y=0;y<this.children.length;y++){let _=this.children[y],b=v+_.length;if(b>d)break;if(v>=h){let C=_.dom.getBoundingClientRect();if(l.push(C.height),p){let x=_.dom.lastChild,w=x?sO(x):[];if(w.length){let O=w[w.length-1],D=m?O.right-C.left:C.right-O.left;D>g&&(g=D,this.minWidth=f,this.minWidthFrom=v,this.minWidthTo=b)}}}v=b+_.breakAfter}return l}textDirectionAt(a){let{i:l}=this.childPos(a,1);return"rtl"==getComputedStyle(this.children[l].dom).direction?Ns.RTL:Ns.LTR}measureTextSize(){for(let d of this.children)if(d instanceof El){let f=d.measureTextSize();if(f)return f}let l,h,a=document.createElement("div");return a.className="cm-line",a.style.width="99999px",a.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(a);let d=sO(a.firstChild)[0];l=a.getBoundingClientRect().height,h=d?d.width/27:7,a.remove()}),{lineHeight:l,charWidth:h}}childCursor(a=this.length){let l=this.children.length;return l&&(a-=this.children[--l].length),new Ape(this.children,a,l)}computeBlockGapDeco(){let a=[],l=this.view.viewState;for(let h=0,d=0;;d++){let f=d==l.viewports.length?null:l.viewports[d],p=f?f.from-1:this.length;if(p>h){let g=l.lineBlockAt(p).bottom-l.lineBlockAt(h).top;a.push(Gn.replace({widget:new fge(g),block:!0,inclusive:!0,isBlockGap:!0}).range(h,p))}if(!f)break;h=f.to+1}return Gn.set(a)}updateDeco(){let a=this.view.state.facet(cO).map((l,h)=>(this.dynamicDecorationMap[h]="function"==typeof l)?l(this.view):l);for(let l=a.length;l<a.length+3;l++)this.dynamicDecorationMap[l]=!1;return this.decorations=[...a,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(a){let d,{range:l}=a,h=this.coordsAt(l.head,l.empty?l.assoc:l.head>l.anchor?-1:1);if(!h)return;!l.empty&&(d=this.coordsAt(l.anchor,l.anchor>l.head?-1:1))&&(h={left:Math.min(h.left,d.left),top:Math.min(h.top,d.top),right:Math.max(h.right,d.right),bottom:Math.max(h.bottom,d.bottom)});let f=0,p=0,g=0,m=0;for(let y of this.view.state.facet(ige).map(_=>_(this.view)))if(y){let{left:_,right:b,top:C,bottom:x}=y;null!=_&&(f=Math.max(f,_)),null!=b&&(p=Math.max(p,b)),null!=C&&(g=Math.max(g,C)),null!=x&&(m=Math.max(m,x))}!function dot(c,a,l,h,d,f,p,g){let m=c.ownerDocument,v=m.defaultView||window;for(let y=c;y;)if(1==y.nodeType){let _,b=y==m.body;if(b)_=hot(v);else{if(y.scrollHeight<=y.clientHeight&&y.scrollWidth<=y.clientWidth){y=y.assignedSlot||y.parentNode;continue}let w=y.getBoundingClientRect();_={left:w.left,right:w.left+y.clientWidth,top:w.top,bottom:w.top+y.clientHeight}}let C=0,x=0;if("nearest"==d)a.top<_.top?(x=-(_.top-a.top+p),l>0&&a.bottom>_.bottom+x&&(x=a.bottom-_.bottom+x+p)):a.bottom>_.bottom&&(x=a.bottom-_.bottom+p,l<0&&a.top-x<_.top&&(x=-(_.top+x-a.top+p)));else{let w=a.bottom-a.top,O=_.bottom-_.top;x=("center"==d&&w<=O?a.top+w/2-O/2:"start"==d||"center"==d&&l<0?a.top-p:a.bottom-O+p)-_.top}if("nearest"==h?a.left<_.left?(C=-(_.left-a.left+f),l>0&&a.right>_.right+C&&(C=a.right-_.right+C+f)):a.right>_.right&&(C=a.right-_.right+f,l<0&&a.left<_.left+C&&(C=-(_.left+C-a.left+f))):C=("center"==h?a.left+(a.right-a.left)/2-(_.right-_.left)/2:"start"==h==g?a.left-f:a.right-(_.right-_.left)+f)-_.left,C||x)if(b)v.scrollBy(C,x);else{let w=0,O=0;if(x){let D=y.scrollTop;y.scrollTop+=x,O=y.scrollTop-D}if(C){let D=y.scrollLeft;y.scrollLeft+=C,w=y.scrollLeft-D}a={left:a.left-w,top:a.top-O,right:a.right-w,bottom:a.bottom-O},w&&Math.abs(w-C)<1&&(h="nearest"),O&&Math.abs(O-x)<1&&(d="nearest")}if(b)break;y=y.assignedSlot||y.parentNode}else{if(11!=y.nodeType)break;y=y.host}}(this.view.scrollDOM,{left:h.left-f,top:h.top-g,right:h.right+p,bottom:h.bottom+m},l.head<l.anchor?-1:1,a.x,a.y,a.xMargin,a.yMargin,this.view.textDirection==Ns.LTR)}}class fge extends cp{constructor(a){super(),this.height=a}toDOM(){let a=document.createElement("div");return this.updateDOM(a),a}eq(a){return a.height==this.height}updateDOM(a){return a.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function pge(c){let a=c.observer.selectionRange,l=a.focusNode&&gge(a.focusNode,a.focusOffset,0);if(!l)return null;let h=c.docView.nearest(l);if(!h)return null;if(h instanceof El){let d=l;for(;d.parentNode!=h.dom;)d=d.parentNode;let f=d.previousSibling;for(;f&&!ys.get(f);)f=f.previousSibling;let p=f?ys.get(f).posAtEnd:h.posAtStart;return{from:p,to:p,node:d,text:l}}{for(;;){let{parent:f}=h;if(!f)return null;if(f instanceof El)break;h=f}let d=h.posAtStart;return{from:d,to:d+h.length,node:h.dom,text:l}}}class Mot extends cp{constructor(a,l,h){super(),this.top=a,this.text=l,this.topView=h}eq(a){return this.top==a.top&&this.text==a.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Vpe}}function gge(c,a,l){for(;;){if(3==c.nodeType)return c;if(1==c.nodeType&&a>0&&l<=0)a=oO(c=c.childNodes[a-1]);else{if(!(1==c.nodeType&&a<c.childNodes.length&&l>=0))return null;c=c.childNodes[a],a=0}}}class Aot{constructor(){this.changes=[]}compareRange(a,l){rH(a,l,this.changes)}comparePoint(a,l){rH(a,l,this.changes)}}function Fot(c,a){return a.left>c?a.left-c:Math.max(0,c-a.right)}function Lot(c,a){return a.top>c?a.top-c:Math.max(0,c-a.bottom)}function uH(c,a){return c.top<a.bottom-1&&c.bottom>a.top+1}function mge(c,a){return a<c.top?{top:a,left:c.left,right:c.right,bottom:c.bottom}:c}function vge(c,a){return a>c.bottom?{top:c.top,left:c.left,right:c.right,bottom:a}:c}function hH(c,a,l){let h,d,f,p,m,v,y,_,g=!1;for(let x=c.firstChild;x;x=x.nextSibling){let w=sO(x);for(let O=0;O<w.length;O++){let D=w[O];d&&uH(d,D)&&(D=mge(vge(D,d.bottom),d.top));let T=Fot(a,D),M=Lot(l,D);if(0==T&&0==M)return 3==x.nodeType?yge(x,a,l):hH(x,a,l);if(!h||p>M||p==M&&f>T){h=x,d=D,f=T,p=M;let k=M?l<D.top?-1:1:T?a<D.left?-1:1:0;g=!k||(k>0?O<w.length-1:O>0)}0==T?l>D.bottom&&(!y||y.bottom<D.bottom)?(m=x,y=D):l<D.top&&(!_||_.top>D.top)&&(v=x,_=D):y&&uH(y,D)?y=vge(y,D.bottom):_&&uH(_,D)&&(_=mge(_,D.top))}}if(y&&y.bottom>=l?(h=m,d=y):_&&_.top<=l&&(h=v,d=_),!h)return{node:c,offset:0};let b=Math.max(d.left,Math.min(d.right,a));return 3==h.nodeType?yge(h,b,l):g&&"false"!=h.contentEditable?hH(h,b,l):{node:c,offset:Array.prototype.indexOf.call(c.childNodes,h)+(a>=(d.left+d.right)/2?1:0)}}function yge(c,a,l){let h=c.nodeValue.length,d=-1,f=1e9,p=0;for(let g=0;g<h;g++){let m=N1(c,g,g+1).getClientRects();for(let v=0;v<m.length;v++){let y=m[v];if(y.top==y.bottom)continue;p||(p=a-y.left);let _=(y.top>l?y.top-l:l-y.bottom)-1;if(y.left-1<=a&&y.right+1>=a&&_<f){let b=a>=(y.left+y.right)/2,C=b;if((Hn.chrome||Hn.gecko)&&N1(c,g).getBoundingClientRect().left==y.right&&(C=!b),_<=0)return{node:c,offset:g+(C?1:0)};d=g+(C?1:0),f=_}}}return{node:c,offset:d>-1?d:p>0?c.nodeValue.length:0}}function _ge(c,a,l,h=-1){var d;let g,f=c.contentDOM.getBoundingClientRect(),p=f.top+c.viewState.paddingTop,{docHeight:m}=c.viewState,{x:v,y}=a,_=y-p;if(_<0)return 0;if(_>m)return c.state.doc.length;for(let M=c.defaultLineHeight/2,k=!1;g=c.elementAtHeight(_),g.type!=ns.Text;)for(;_=h>0?g.bottom+M:g.top-M,!(_>=0&&_<=m);){if(k)return l?null:0;k=!0,h=-h}y=p+_;let b=g.from;if(b<c.viewport.from)return 0==c.viewport.from?0:l?null:bge(c,f,g,v,y);if(b>c.viewport.to)return c.viewport.to==c.state.doc.length?c.state.doc.length:l?null:bge(c,f,g,v,y);let C=c.dom.ownerDocument,x=c.root.elementFromPoint?c.root:C,w=x.elementFromPoint(v,y);w&&!c.contentDOM.contains(w)&&(w=null),w||(v=Math.max(f.left+1,Math.min(f.right-1,v)),w=x.elementFromPoint(v,y),w&&!c.contentDOM.contains(w)&&(w=null));let O,D=-1;if(w&&0!=(null===(d=c.docView.nearest(w))||void 0===d?void 0:d.isEditable))if(C.caretPositionFromPoint){let M=C.caretPositionFromPoint(v,y);M&&({offsetNode:O,offset:D}=M)}else if(C.caretRangeFromPoint){let M=C.caretRangeFromPoint(v,y);M&&(({startContainer:O,startOffset:D}=M),(!c.contentDOM.contains(O)||Hn.safari&&function Not(c,a,l){let h;if(3!=c.nodeType||a!=(h=c.nodeValue.length))return!1;for(let d=c.nextSibling;d;d=d.nextSibling)if(1!=d.nodeType||"BR"!=d.nodeName)return!1;return N1(c,h-1,h).getBoundingClientRect().left>l}(O,D,v)||Hn.chrome&&function Bot(c,a,l){if(0!=a)return!1;for(let d=c;;){let f=d.parentNode;if(!f||1!=f.nodeType||f.firstChild!=d)return!1;if(f.classList.contains("cm-line"))break;d=f}return l-(1==c.nodeType?c.getBoundingClientRect():N1(c,0,Math.max(c.nodeValue.length,1)).getBoundingClientRect()).left>5}(O,D,v))&&(O=void 0))}if(!O||!c.docView.dom.contains(O)){let M=El.find(c.docView,b);if(!M)return _>g.top+g.height/2?g.to:g.from;({node:O,offset:D}=hH(M.dom,v,y))}let T=c.docView.nearest(O);if(!T)return null;if(T.isWidget){let M=T.dom.getBoundingClientRect();return a.y<M.top||a.y<=M.bottom&&a.x<=(M.left+M.right)/2?T.posAtStart:T.posAtEnd}return T.localPosFromDOM(O,D)+T.posAtStart}function bge(c,a,l,h,d){let f=Math.round((h-a.left)*c.defaultCharacterWidth);c.lineWrapping&&l.height>1.5*c.defaultLineHeight&&(f+=Math.floor((d-l.top)/c.defaultLineHeight)*c.viewState.heightOracle.lineLength);let p=c.state.sliceDoc(l.from,l.to);return l.from+$7(p,f,c.state.tabSize)}function Cge(c,a,l,h){let d=c.state.doc.lineAt(a.head),f=c.bidiSpans(d),p=c.textDirectionAt(d.from);for(let g=a,m=null;;){let v=lge(d,f,p,g,l),y=age;if(!v){if(d.number==(l?c.state.doc.lines:1))return g;y="\n",d=c.state.doc.line(d.number+(l?1:-1)),f=c.bidiSpans(d),v=It.cursor(l?d.from:d.to)}if(m){if(!m(y))return g}else{if(!h)return v;m=h(y)}g=v}}function dH(c,a,l){let h=c.state.facet(nge).map(d=>d(c));for(;;){let d=!1;for(let f of h)f.between(l.from-1,l.from+1,(p,g,m)=>{l.from>p&&l.from<g&&(l=a.head>l.from?It.cursor(p,1):It.cursor(g,-1),d=!0)});if(!d)return l}}class Hot{constructor(a){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let l=(h,d)=>{this.ignoreDuringComposition(d)||"keydown"==d.type&&this.keydown(a,d)||(this.mustFlushObserver(d)&&a.observer.forceFlush(),this.runCustomHandlers(d.type,a,d)?d.preventDefault():h(a,d))};for(let h in Qo){let d=Qo[h];a.contentDOM.addEventListener(h,f=>{wge(a,f)&&l(d,f)},fH[h]),this.registeredEvents.push(h)}a.scrollDOM.addEventListener("mousedown",h=>{h.target==a.scrollDOM&&h.clientY>a.contentDOM.getBoundingClientRect().bottom&&l(Qo.mousedown,h)}),Hn.chrome&&102==Hn.chrome_version&&a.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?a.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,a.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=a.hasFocus,Hn.safari&&a.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(a){this.lastSelectionOrigin=a,this.lastSelectionTime=Date.now()}ensureHandlers(a,l){var h;let d;this.customHandlers=[];for(let f of l)if(d=null===(h=f.update(a).spec)||void 0===h?void 0:h.domEventHandlers){this.customHandlers.push({plugin:f.value,handlers:d});for(let p in d)this.registeredEvents.indexOf(p)<0&&"scroll"!=p&&(this.registeredEvents.push(p),a.contentDOM.addEventListener(p,g=>{wge(a,g)&&this.runCustomHandlers(p,a,g)&&g.preventDefault()}))}}runCustomHandlers(a,l,h){for(let d of this.customHandlers){let f=d.handlers[a];if(f)try{if(f.call(d.plugin,h,l)||h.defaultPrevented)return!0}catch(p){Uc(l.state,p)}}return!1}runScrollHandlers(a,l){this.lastScrollTop=a.scrollDOM.scrollTop,this.lastScrollLeft=a.scrollDOM.scrollLeft;for(let h of this.customHandlers){let d=h.handlers.scroll;if(d)try{d.call(h.plugin,l,a)}catch(f){Uc(a.state,f)}}}keydown(a,l){if(this.lastKeyCode=l.keyCode,this.lastKeyTime=Date.now(),9==l.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Hn.android&&Hn.chrome&&!l.synthetic&&(13==l.keyCode||8==l.keyCode))return a.observer.delayAndroidKey(l.key,l.keyCode),!0;let h;return!(!Hn.ios||l.synthetic||l.altKey||l.metaKey||!((h=Sge.find(d=>d.keyCode==l.keyCode))&&!l.ctrlKey||$ot.indexOf(l.key)>-1&&l.ctrlKey&&!l.shiftKey)||(this.pendingIOSKey=h||l,setTimeout(()=>this.flushIOSKey(a),250),0))}flushIOSKey(a){let l=this.pendingIOSKey;return!!l&&(this.pendingIOSKey=void 0,B1(a.contentDOM,l.key,l.keyCode))}ignoreDuringComposition(a){return!!/^key/.test(a.type)&&(this.composing>0||!!(Hn.safari&&!Hn.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(a){return"keydown"==a.type&&229!=a.keyCode}startMouseSelection(a){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=a}update(a){this.mouseSelection&&this.mouseSelection.update(a),a.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Sge=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],$ot="dthko",xge=[16,17,18,20,91,92,224,225];function vA(c){return.7*c+8}class Wot{constructor(a,l,h,d){this.view=a,this.style=h,this.mustSelect=d,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=l,this.scrollParent=function fot(c){let a=c.ownerDocument;for(let l=c.parentNode;l&&l!=a.body;)if(1==l.nodeType){if(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth)return l;l=l.assignedSlot||l.parentNode}else{if(11!=l.nodeType)break;l=l.host}return null}(a.contentDOM);let f=a.contentDOM.ownerDocument;f.addEventListener("mousemove",this.move=this.move.bind(this)),f.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=l.shiftKey,this.multiple=a.state.facet(Ml.allowMultipleSelections)&&function Got(c,a){let l=c.state.facet(Qpe);return l.length?l[0](a):Hn.mac?a.metaKey:a.ctrlKey}(a,l),this.dragMove=function Qot(c,a){let l=c.state.facet(jpe);return l.length?l[0](a):Hn.mac?!a.altKey:!a.ctrlKey}(a,l),this.dragging=!(!function jot(c,a){let{main:l}=c.state.selection;if(l.empty)return!1;let h=oA(c.root);if(!h||0==h.rangeCount)return!0;let d=h.getRangeAt(0).getClientRects();for(let f=0;f<d.length;f++){let p=d[f];if(p.left<=a.clientX&&p.right>=a.clientX&&p.top<=a.clientY&&p.bottom>=a.clientY)return!0}return!1}(a,l)||1!=Rge(l))&&null}start(a){!1===this.dragging&&(a.preventDefault(),this.select(a))}move(a){var l;if(0==a.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=a);let h=0,d=0,f=(null===(l=this.scrollParent)||void 0===l?void 0:l.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};a.clientX<=f.left?h=-vA(f.left-a.clientX):a.clientX>=f.right&&(h=vA(a.clientX-f.right)),a.clientY<=f.top?d=-vA(f.top-a.clientY):a.clientY>=f.bottom&&(d=vA(a.clientY-f.bottom)),this.setScrollSpeed(h,d)}up(a){null==this.dragging&&this.select(this.lastEvent),this.dragging||a.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move),a.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(a,l){this.scrollSpeed={x:a,y:l},a||l?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}select(a){let l=this.style.get(a,this.extend,this.multiple);(this.mustSelect||!l.eq(this.view.state.selection)||l.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:l,userEvent:"select.pointer"}),this.mustSelect=!1}update(a){a.docChanged&&this.dragging&&(this.dragging=this.dragging.map(a.changes)),this.style.update(a)&&setTimeout(()=>this.select(this.lastEvent),20)}}function wge(c,a){if(!a.bubbles)return!0;if(a.defaultPrevented)return!1;for(let h,l=a.target;l!=c.contentDOM;l=l.parentNode)if(!l||11==l.nodeType||(h=ys.get(l))&&h.ignoreEvent(a))return!1;return!0}const Qo=Object.create(null),fH=Object.create(null),Oge=Hn.ie&&Hn.ie_version<15||Hn.ios&&Hn.webkit_version<604;function Dge(c,a){let h,{state:l}=c,d=1,f=l.toText(a),p=f.lines==l.selection.ranges.length;if(null!=pH&&l.selection.ranges.every(m=>m.empty)&&pH==f.toString()){let m=-1;h=l.changeByRange(v=>{let y=l.doc.lineAt(v.from);if(y.from==m)return{range:v};m=y.from;let _=l.toText((p?f.line(d++).text:a)+l.lineBreak);return{changes:{from:y.from,insert:_},range:It.cursor(v.from+_.length)}})}else h=p?l.changeByRange(m=>{let v=f.line(d++);return{changes:{from:m.from,to:m.to,insert:v.text},range:It.cursor(m.from+v.length)}}):l.replaceSelection(f);c.dispatch(h,{userEvent:"input.paste",scrollIntoView:!0})}function Tge(c,a,l,h){if(1==h)return It.cursor(a,l);if(2==h)return function Rot(c,a,l=1){let h=c.charCategorizer(a),d=c.doc.lineAt(a),f=a-d.from;if(0==d.length)return It.cursor(a);0==f?l=1:f==d.length&&(l=-1);let p=f,g=f;l<0?p=kl(d.text,f,!1):g=kl(d.text,f);let m=h(d.text.slice(p,g));for(;p>0;){let v=kl(d.text,p,!1);if(h(d.text.slice(v,p))!=m)break;p=v}for(;g<d.length;){let v=kl(d.text,g);if(h(d.text.slice(g,v))!=m)break;g=v}return It.range(p+d.from,g+d.from)}(c.state,a,l);{let d=El.find(c.docView,a),f=c.state.doc.lineAt(d?d.posAtEnd:a),g=d?d.posAtEnd:f.to;return g<c.state.doc.length&&g==f.to&&g++,It.range(d?d.posAtStart:f.from,g)}}Qo.keydown=(c,a)=>{c.inputState.setSelectionOrigin("select"),27==a.keyCode?c.inputState.lastEscPress=Date.now():xge.indexOf(a.keyCode)<0&&(c.inputState.lastEscPress=0)},Qo.touchstart=(c,a)=>{c.inputState.lastTouchTime=Date.now(),c.inputState.setSelectionOrigin("select.pointer")},Qo.touchmove=c=>{c.inputState.setSelectionOrigin("select.pointer")},fH.touchstart=fH.touchmove={passive:!0},Qo.mousedown=(c,a)=>{if(c.observer.flush(),c.inputState.lastTouchTime>Date.now()-2e3)return;let l=null;for(let h of c.state.facet(Zpe))if(l=h(c,a),l)break;if(!l&&0==a.button&&(l=function Yot(c,a){let l=Ege(c,a),h=Rge(a),d=c.state.selection;return{update(f){f.docChanged&&(l.pos=f.changes.mapPos(l.pos),d=d.map(f.changes))},get(f,p,g){let m=Ege(c,f),v=Tge(c,m.pos,m.bias,h);if(l.pos!=m.pos&&!p){let y=Tge(c,l.pos,l.bias,h),_=Math.min(y.from,v.from),b=Math.max(y.to,v.to);v=_<v.from?It.range(_,b):It.range(b,_)}return p?d.replaceRange(d.main.extend(v.from,v.to)):g&&d.ranges.length>1&&d.ranges.some(y=>y.eq(v))?function Kot(c,a){for(let l=0;;l++)if(c.ranges[l].eq(a))return It.create(c.ranges.slice(0,l).concat(c.ranges.slice(l+1)),c.mainIndex==l?0:c.mainIndex-(c.mainIndex>l?1:0))}(d,v):g?d.addRange(v):It.create([v])}}}(c,a)),l){let h=c.root.activeElement!=c.contentDOM;c.inputState.startMouseSelection(new Wot(c,a,l,h)),h&&c.observer.ignore(()=>Tpe(c.contentDOM)),c.inputState.mouseSelection&&c.inputState.mouseSelection.start(a)}};let kge=(c,a)=>c>=a.top&&c<=a.bottom,Mge=(c,a,l)=>kge(a,l)&&c>=l.left&&c<=l.right;function qot(c,a,l,h){let d=El.find(c.docView,a);if(!d)return 1;let f=a-d.posAtStart;if(0==f)return 1;if(f==d.length)return-1;let p=d.coordsAt(f,-1);if(p&&Mge(l,h,p))return-1;let g=d.coordsAt(f,1);return g&&Mge(l,h,g)?1:p&&kge(h,p)?-1:1}function Ege(c,a){let l=c.posAtCoords({x:a.clientX,y:a.clientY},!1);return{pos:l,bias:qot(c,l,a.clientX,a.clientY)}}const Xot=Hn.ie&&Hn.ie_version<=11;let Age=null,Ige=0,Pge=0;function Rge(c){if(!Xot)return c.detail;let a=Age,l=Pge;return Age=c,Pge=Date.now(),Ige=!a||l>Date.now()-400&&Math.abs(a.clientX-c.clientX)<2&&Math.abs(a.clientY-c.clientY)<2?(Ige+1)%3:1}function Fge(c,a,l,h){if(!l)return;let d=c.posAtCoords({x:a.clientX,y:a.clientY},!1);a.preventDefault();let{mouseSelection:f}=c.inputState,p=h&&f&&f.dragging&&f.dragMove?{from:f.dragging.from,to:f.dragging.to}:null,g={from:d,insert:l},m=c.state.changes(p?[p,g]:g);c.focus(),c.dispatch({changes:m,selection:{anchor:m.mapPos(d,-1),head:m.mapPos(d,1)},userEvent:p?"move.drop":"input.drop"})}Qo.dragstart=(c,a)=>{let{selection:{main:l}}=c.state,{mouseSelection:h}=c.inputState;h&&(h.dragging=l),a.dataTransfer&&(a.dataTransfer.setData("Text",c.state.sliceDoc(l.from,l.to)),a.dataTransfer.effectAllowed="copyMove")},Qo.drop=(c,a)=>{if(!a.dataTransfer)return;if(c.state.readOnly)return a.preventDefault();let l=a.dataTransfer.files;if(l&&l.length){a.preventDefault();let h=Array(l.length),d=0,f=()=>{++d==l.length&&Fge(c,a,h.filter(p=>null!=p).join(c.state.lineBreak),!1)};for(let p=0;p<l.length;p++){let g=new FileReader;g.onerror=f,g.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(g.result)||(h[p]=g.result),f()},g.readAsText(l[p])}}else Fge(c,a,a.dataTransfer.getData("Text"),!0)},Qo.paste=(c,a)=>{if(c.state.readOnly)return a.preventDefault();c.observer.flush();let l=Oge?null:a.clipboardData;l?(Dge(c,l.getData("text/plain")),a.preventDefault()):function Zot(c){let a=c.dom.parentNode;if(!a)return;let l=a.appendChild(document.createElement("textarea"));l.style.cssText="position: fixed; left: -10000px; top: 10px",l.focus(),setTimeout(()=>{c.focus(),l.remove(),Dge(c,l.value)},50)}(c)};let pH=null;Qo.copy=Qo.cut=(c,a)=>{let{text:l,ranges:h,linewise:d}=function eat(c){let a=[],l=[],h=!1;for(let d of c.selection.ranges)d.empty||(a.push(c.sliceDoc(d.from,d.to)),l.push(d));if(!a.length){let d=-1;for(let{from:f}of c.selection.ranges){let p=c.doc.lineAt(f);p.number>d&&(a.push(p.text),l.push({from:p.from,to:Math.min(c.doc.length,p.to+1)})),d=p.number}h=!0}return{text:a.join(c.lineBreak),ranges:l,linewise:h}}(c.state);if(!l&&!d)return;pH=d?l:null;let f=Oge?null:a.clipboardData;f?(a.preventDefault(),f.clearData(),f.setData("text/plain",l)):function Jot(c,a){let l=c.dom.parentNode;if(!l)return;let h=l.appendChild(document.createElement("textarea"));h.style.cssText="position: fixed; left: -10000px; top: 10px",h.value=a,h.focus(),h.selectionEnd=a.length,h.selectionStart=0,setTimeout(()=>{h.remove(),c.focus()},50)}(c,l),"cut"==a.type&&!c.state.readOnly&&c.dispatch({changes:h,scrollIntoView:!0,userEvent:"delete.cut"})};const Lge=lp.define();function Nge(c,a){let l=[];for(let h of c.facet(Ype)){let d=h(c,a);d&&l.push(d)}return l?c.update({effects:l,annotations:Lge.of(!0)}):null}function Bge(c){setTimeout(()=>{let a=c.hasFocus;if(a!=c.inputState.notifiedFocused){let l=Nge(c.state,a);l?c.dispatch(l):c.update([])}},10)}Qo.focus=c=>{c.inputState.lastFocusTime=Date.now(),!c.scrollDOM.scrollTop&&(c.inputState.lastScrollTop||c.inputState.lastScrollLeft)&&(c.scrollDOM.scrollTop=c.inputState.lastScrollTop,c.scrollDOM.scrollLeft=c.inputState.lastScrollLeft),Bge(c)},Qo.blur=c=>{c.observer.clearSelectionRange(),Bge(c)},Qo.compositionstart=Qo.compositionupdate=c=>{null==c.inputState.compositionFirstChange&&(c.inputState.compositionFirstChange=!0),c.inputState.composing<0&&(c.inputState.composing=0)},Qo.compositionend=c=>{c.inputState.composing=-1,c.inputState.compositionEndedAt=Date.now(),c.inputState.compositionFirstChange=null,Hn.chrome&&Hn.android&&c.observer.flushSoon(),setTimeout(()=>{c.inputState.composing<0&&c.docView.compositionDeco.size&&c.update([])},50)},Qo.contextmenu=c=>{c.inputState.lastContextMenu=Date.now()},Qo.beforeinput=(c,a)=>{var l;let h;if(Hn.chrome&&Hn.android&&(h=Sge.find(d=>d.inputType==a.inputType))&&(c.observer.delayAndroidKey(h.key,h.keyCode),"Backspace"==h.key||"Delete"==h.key)){let d=(null===(l=window.visualViewport)||void 0===l?void 0:l.height)||0;setTimeout(()=>{var f;((null===(f=window.visualViewport)||void 0===f?void 0:f.height)||0)>d+10&&c.hasFocus&&(c.contentDOM.blur(),c.focus())},100)}};const Vge=["pre-wrap","normal","pre-line","break-spaces"];class Uge{constructor(a){this.lineWrapping=a,this.doc=wr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(a,l){let h=this.doc.lineAt(l).number-this.doc.lineAt(a).number+1;return this.lineWrapping&&(h+=Math.max(0,Math.ceil((l-a-h*this.lineLength*.5)/this.lineLength))),this.lineHeight*h}heightForLine(a){return this.lineWrapping?(1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(a){return this.doc=a,this}mustRefreshForWrapping(a){return Vge.indexOf(a)>-1!=this.lineWrapping}mustRefreshForHeights(a){let l=!1;for(let h=0;h<a.length;h++){let d=a[h];d<0?h++:this.heightSamples[Math.floor(10*d)]||(l=!0,this.heightSamples[Math.floor(10*d)]=!0)}return l}refresh(a,l,h,d,f){let p=Vge.indexOf(a)>-1,g=Math.round(l)!=Math.round(this.lineHeight)||this.lineWrapping!=p;if(this.lineWrapping=p,this.lineHeight=l,this.charWidth=h,this.lineLength=d,g){this.heightSamples={};for(let m=0;m<f.length;m++){let v=f[m];v<0?m++:this.heightSamples[Math.floor(10*v)]=!0}}return g}}class zge{constructor(a,l){this.from=a,this.heights=l,this.index=0}get more(){return this.index<this.heights.length}}class up{constructor(a,l,h,d,f){this.from=a,this.length=l,this.top=h,this.height=d,this.type=f}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(a){let l=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(a.type)?a.type:[a]);return new up(this.from,this.length+a.length,this.top,this.height+a.height,l)}}var cs=function(c){return c[c.ByPos=0]="ByPos",c[c.ByHeight=1]="ByHeight",c[c.ByPosNoHeight=2]="ByPosNoHeight",c}(cs||(cs={}));const yA=.001;class Qa{constructor(a,l,h=2){this.length=a,this.height=l,this.flags=h}get outdated(){return(2&this.flags)>0}set outdated(a){this.flags=(a?2:0)|-3&this.flags}setHeight(a,l){this.height!=l&&(Math.abs(this.height-l)>yA&&(a.heightChanged=!0),this.height=l)}replace(a,l,h){return Qa.of(h)}decomposeLeft(a,l){l.push(this)}decomposeRight(a,l){l.push(this)}applyChanges(a,l,h,d){let f=this,p=h.doc;for(let g=d.length-1;g>=0;g--){let{fromA:m,toA:v,fromB:y,toB:_}=d[g],b=f.lineAt(m,cs.ByPosNoHeight,h.setDoc(l),0,0),C=b.to>=v?b:f.lineAt(v,cs.ByPosNoHeight,h,0,0);for(_+=C.to-v,v=C.to;g>0&&b.from<=d[g-1].toA;)m=d[g-1].fromA,y=d[g-1].fromB,g--,m<b.from&&(b=f.lineAt(m,cs.ByPosNoHeight,h,0,0));y+=b.from-m,m=b.from;let x=gH.build(h.setDoc(p),a,y,_);f=f.replace(m,v,x)}return f.updateHeight(h,0)}static empty(){return new zc(0,0)}static of(a){if(1==a.length)return a[0];let l=0,h=a.length,d=0,f=0;for(;;)if(l==h)if(d>2*f){let g=a[l-1];g.break?a.splice(--l,1,g.left,null,g.right):a.splice(--l,1,g.left,g.right),h+=1+g.break,d-=g.size}else{if(!(f>2*d))break;{let g=a[h];g.break?a.splice(h,1,g.left,null,g.right):a.splice(h,1,g.left,g.right),h+=2+g.break,f-=g.size}}else if(d<f){let g=a[l++];g&&(d+=g.size)}else{let g=a[--h];g&&(f+=g.size)}let p=0;return null==a[l-1]?(p=1,l--):null==a[l]&&(p=1,h++),new tat(Qa.of(a.slice(0,l)),p,Qa.of(a.slice(h)))}}Qa.prototype.size=1;class Hge extends Qa{constructor(a,l,h){super(a,l),this.type=h}blockAt(a,l,h,d){return new up(d,this.length,h,this.height,this.type)}lineAt(a,l,h,d,f){return this.blockAt(0,h,d,f)}forEachLine(a,l,h,d,f,p){a<=f+this.length&&l>=f&&p(this.blockAt(0,h,d,f))}updateHeight(a,l=0,h=!1,d){return d&&d.from<=l&&d.more&&this.setHeight(a,d.heights[d.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zc extends Hge{constructor(a,l){super(a,l,ns.Text),this.collapsed=0,this.widgetHeight=0}replace(a,l,h){let d=h[0];return 1==h.length&&(d instanceof zc||d instanceof Oa&&4&d.flags)&&Math.abs(this.length-d.length)<10?(d instanceof Oa?d=new zc(d.length,this.height):d.height=this.height,this.outdated||(d.outdated=!1),d):Qa.of(h)}updateHeight(a,l=0,h=!1,d){return d&&d.from<=l&&d.more?this.setHeight(a,d.heights[d.index++]):(h||this.outdated)&&this.setHeight(a,Math.max(this.widgetHeight,a.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Oa extends Qa{constructor(a){super(a,0)}heightMetrics(a,l){let p,h=a.doc.lineAt(l).number,d=a.doc.lineAt(l+this.length).number,f=d-h+1,g=0;if(a.lineWrapping){let m=Math.min(this.height,a.lineHeight*f);p=m/f,g=(this.height-m)/(this.length-f-1)}else p=this.height/f;return{firstLine:h,lastLine:d,perLine:p,perChar:g}}blockAt(a,l,h,d){let{firstLine:f,lastLine:p,perLine:g,perChar:m}=this.heightMetrics(l,d);if(l.lineWrapping){let v=d+Math.round(Math.max(0,Math.min(1,(a-h)/this.height))*this.length),y=l.doc.lineAt(v),_=g+y.length*m,b=Math.max(h,a-_/2);return new up(y.from,y.length,b,_,ns.Text)}{let v=Math.max(0,Math.min(p-f,Math.floor((a-h)/g))),{from:y,length:_}=l.doc.line(f+v);return new up(y,_,h+g*v,g,ns.Text)}}lineAt(a,l,h,d,f){if(l==cs.ByHeight)return this.blockAt(a,h,d,f);if(l==cs.ByPosNoHeight){let{from:C,to:x}=h.doc.lineAt(a);return new up(C,x-C,0,0,ns.Text)}let{firstLine:p,perLine:g,perChar:m}=this.heightMetrics(h,f),v=h.doc.lineAt(a),y=g+v.length*m,_=v.number-p;return new up(v.from,v.length,Math.max(d,Math.min(d+g*_+m*(v.from-f-_),d+this.height-y)),y,ns.Text)}forEachLine(a,l,h,d,f,p){a=Math.max(a,f),l=Math.min(l,f+this.length);let{firstLine:g,perLine:m,perChar:v}=this.heightMetrics(h,f);for(let y=a,_=d;y<=l;){let b=h.doc.lineAt(y);if(y==a){let x=b.number-g;_+=m*x+v*(a-f-x)}let C=m+v*b.length;p(new up(b.from,b.length,_,C,ns.Text)),_+=C,y=b.to+1}}replace(a,l,h){let d=this.length-l;if(d>0){let f=h[h.length-1];f instanceof Oa?h[h.length-1]=new Oa(f.length+d):h.push(null,new Oa(d-1))}if(a>0){let f=h[0];f instanceof Oa?h[0]=new Oa(a+f.length):h.unshift(new Oa(a-1),null)}return Qa.of(h)}decomposeLeft(a,l){l.push(new Oa(a-1),null)}decomposeRight(a,l){l.push(null,new Oa(this.length-a-1))}updateHeight(a,l=0,h=!1,d){let f=l+this.length;if(d&&d.from<=l+this.length&&d.more){let p=[],g=Math.max(l,d.from),m=-1;for(d.from>l&&p.push(new Oa(d.from-l-1).updateHeight(a,l));g<=f&&d.more;){let y=a.doc.lineAt(g).length;p.length&&p.push(null);let _=d.heights[d.index++];-1==m?m=_:Math.abs(_-m)>=yA&&(m=-2);let b=new zc(y,_);b.outdated=!1,p.push(b),g+=y+1}g<=f&&p.push(null,new Oa(f-g).updateHeight(a,g));let v=Qa.of(p);return(m<0||Math.abs(v.height-this.height)>=yA||Math.abs(m-this.heightMetrics(a,l).perLine)>=yA)&&(a.heightChanged=!0),v}return(h||this.outdated)&&(this.setHeight(a,a.heightForGap(l,l+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class tat extends Qa{constructor(a,l,h){super(a.length+l+h.length,a.height+h.height,l|(a.outdated||h.outdated?2:0)),this.left=a,this.right=h,this.size=a.size+h.size}get break(){return 1&this.flags}blockAt(a,l,h,d){let f=h+this.left.height;return a<f?this.left.blockAt(a,l,h,d):this.right.blockAt(a,l,f,d+this.left.length+this.break)}lineAt(a,l,h,d,f){let p=d+this.left.height,g=f+this.left.length+this.break,m=l==cs.ByHeight?a<p:a<g,v=m?this.left.lineAt(a,l,h,d,f):this.right.lineAt(a,l,h,p,g);if(this.break||(m?v.to<g:v.from>g))return v;let y=l==cs.ByPosNoHeight?cs.ByPosNoHeight:cs.ByPos;return m?v.join(this.right.lineAt(g,y,h,p,g)):this.left.lineAt(g,y,h,d,f).join(v)}forEachLine(a,l,h,d,f,p){let g=d+this.left.height,m=f+this.left.length+this.break;if(this.break)a<m&&this.left.forEachLine(a,l,h,d,f,p),l>=m&&this.right.forEachLine(a,l,h,g,m,p);else{let v=this.lineAt(m,cs.ByPos,h,d,f);a<v.from&&this.left.forEachLine(a,v.from-1,h,d,f,p),v.to>=a&&v.from<=l&&p(v),l>v.to&&this.right.forEachLine(v.to+1,l,h,g,m,p)}}replace(a,l,h){let d=this.left.length+this.break;if(l<d)return this.balanced(this.left.replace(a,l,h),this.right);if(a>this.left.length)return this.balanced(this.left,this.right.replace(a-d,l-d,h));let f=[];a>0&&this.decomposeLeft(a,f);let p=f.length;for(let g of h)f.push(g);if(a>0&&$ge(f,p-1),l<this.length){let g=f.length;this.decomposeRight(l,f),$ge(f,g)}return Qa.of(f)}decomposeLeft(a,l){let h=this.left.length;if(a<=h)return this.left.decomposeLeft(a,l);l.push(this.left),this.break&&(h++,a>=h&&l.push(null)),a>h&&this.right.decomposeLeft(a-h,l)}decomposeRight(a,l){let h=this.left.length,d=h+this.break;if(a>=d)return this.right.decomposeRight(a-d,l);a<h&&this.left.decomposeRight(a,l),this.break&&a<d&&l.push(null),l.push(this.right)}balanced(a,l){return a.size>2*l.size||l.size>2*a.size?Qa.of(this.break?[a,null,l]:[a,l]):(this.left=a,this.right=l,this.height=a.height+l.height,this.outdated=a.outdated||l.outdated,this.size=a.size+l.size,this.length=a.length+this.break+l.length,this)}updateHeight(a,l=0,h=!1,d){let{left:f,right:p}=this,g=l+f.length+this.break,m=null;return d&&d.from<=l+f.length&&d.more?m=f=f.updateHeight(a,l,h,d):f.updateHeight(a,l,h),d&&d.from<=g+p.length&&d.more?m=p=p.updateHeight(a,g,h,d):p.updateHeight(a,g,h),m?this.balanced(f,p):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function $ge(c,a){let l,h;null==c[a]&&(l=c[a-1])instanceof Oa&&(h=c[a+1])instanceof Oa&&c.splice(a-1,3,new Oa(l.length+1+h.length))}class gH{constructor(a,l){this.pos=a,this.oracle=l,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=a}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(a,l){if(this.lineStart>-1){let h=Math.min(l,this.lineEnd),d=this.nodes[this.nodes.length-1];d instanceof zc?d.length+=h-this.pos:(h>this.pos||!this.isCovered)&&this.nodes.push(new zc(h-this.pos,-1)),this.writtenTo=h,l>h&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=l}point(a,l,h){if(a<l||h.heightRelevant){let d=h.widget?h.widget.estimatedHeight:0;d<0&&(d=this.oracle.lineHeight);let f=l-a;h.block?this.addBlock(new Hge(f,d,h.type)):(f||d>=5)&&this.addLineDeco(d,f)}else l>a&&this.span(a,l);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:a,to:l}=this.oracle.doc.lineAt(this.pos);this.lineStart=a,this.lineEnd=l,this.writtenTo<a&&((this.writtenTo<a-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,a-1)),this.nodes.push(null)),this.pos>a&&this.nodes.push(new zc(this.pos-a,-1)),this.writtenTo=this.pos}blankContent(a,l){let h=new Oa(l-a);return this.oracle.doc.lineAt(a).to==l&&(h.flags|=4),h}ensureLine(){this.enterLine();let a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a instanceof zc)return a;let l=new zc(0,-1);return this.nodes.push(l),l}addBlock(a){this.enterLine(),a.type==ns.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(a),this.writtenTo=this.pos=this.pos+a.length,a.type!=ns.WidgetBefore&&(this.covering=a)}addLineDeco(a,l){let h=this.ensureLine();h.length+=l,h.collapsed+=l,h.widgetHeight=Math.max(h.widgetHeight,a),this.writtenTo=this.pos=this.pos+l}finish(a){let l=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||l instanceof zc||this.isCovered?(this.writtenTo<this.pos||null==l)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new zc(0,-1));let h=a;for(let d of this.nodes)d instanceof zc&&d.updateHeight(this.oracle,h),h+=d?d.length:1;return this.nodes}static build(a,l,h,d){let f=new gH(h,a);return Ls.spans(l,h,d,f,0),f.finish(h)}}class rat{constructor(){this.changes=[]}compareRange(){}comparePoint(a,l,h,d){(a<l||h&&h.heightRelevant||d&&d.heightRelevant)&&rH(a,l,this.changes,5)}}function sat(c,a){let l=c.getBoundingClientRect(),h=c.ownerDocument,d=h.defaultView||window,f=Math.max(0,l.left),p=Math.min(d.innerWidth,l.right),g=Math.max(0,l.top),m=Math.min(d.innerHeight,l.bottom);for(let v=c.parentNode;v&&v!=h.body;)if(1==v.nodeType){let y=v,_=window.getComputedStyle(y);if((y.scrollHeight>y.clientHeight||y.scrollWidth>y.clientWidth)&&"visible"!=_.overflow){let b=y.getBoundingClientRect();f=Math.max(f,b.left),p=Math.min(p,b.right),g=Math.max(g,b.top),m=v==c.parentNode?b.bottom:Math.min(m,b.bottom)}v="absolute"==_.position||"fixed"==_.position?y.offsetParent:y.parentNode}else{if(11!=v.nodeType)break;v=v.host}return{left:f-l.left,right:Math.max(f,p)-l.left,top:g-(l.top+a),bottom:Math.max(g,m)-(l.top+a)}}function oat(c,a){let l=c.getBoundingClientRect();return{left:0,right:l.right-l.left,top:a,bottom:l.bottom-(l.top+a)}}class mH{constructor(a,l,h){this.from=a,this.to=l,this.size=h}static same(a,l){if(a.length!=l.length)return!1;for(let h=0;h<a.length;h++){let d=a[h],f=l[h];if(d.from!=f.from||d.to!=f.to||d.size!=f.size)return!1}return!0}draw(a){return Gn.replace({widget:new aat(this.size,a)}).range(this.from,this.to)}}class aat extends cp{constructor(a,l){super(),this.size=a,this.vertical=l}eq(a){return a.size==this.size&&a.vertical==this.vertical}toDOM(){let a=document.createElement("div");return this.vertical?a.style.height=this.size+"px":(a.style.width=this.size+"px",a.style.height="2px",a.style.display="inline-block"),a}get estimatedHeight(){return this.vertical?this.size:-1}}class Wge{constructor(a){this.state=a,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=Gge,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ns.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let l=a.facet(gA).some(h=>"function"!=typeof h&&"cm-lineWrapping"==h.class);this.heightOracle=new Uge(l),this.stateDeco=a.facet(cO).filter(h=>"function"!=typeof h),this.heightMap=Qa.empty().applyChanges(this.stateDeco,wr.empty,this.heightOracle.setDoc(a.doc),[new Eh(0,0,0,a.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Gn.set(this.lineGaps.map(h=>h.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let a=[this.viewport],{main:l}=this.state.selection;for(let h=0;h<=1;h++){let d=h?l.head:l.anchor;if(!a.some(({from:f,to:p})=>d>=f&&d<=p)){let{from:f,to:p}=this.lineBlockAt(d);a.push(new _A(f,p))}}this.viewports=a.sort((h,d)=>h.from-d.from),this.scaler=this.heightMap.height<=7e6?Gge:new uat(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,a=>{this.viewportLines.push(1==this.scaler.scale?a:hO(a,this.scaler))})}update(a,l=null){this.state=a.state;let h=this.stateDeco;this.stateDeco=this.state.facet(cO).filter(v=>"function"!=typeof v);let f=Eh.extendWithRanges(a.changedRanges,function iat(c,a,l){let h=new rat;return Ls.compare(c,a,l,h,0),h.changes}(h,this.stateDeco,a?a.changes:Go.empty(this.state.doc.length))),p=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,a.startState.doc,this.heightOracle.setDoc(this.state.doc),f),this.heightMap.height!=p&&(a.flags|=2);let g=f.length?this.mapViewport(this.viewport,a.changes):this.viewport;(l&&(l.range.head<g.from||l.range.head>g.to)||!this.viewportIsAppropriate(g))&&(g=this.getViewport(0,l));let m=!a.changes.empty||2&a.flags||g.from!=this.viewport.from||g.to!=this.viewport.to;this.viewport=g,this.updateForViewport(),m&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes))),a.flags|=this.computeVisibleRanges(),l&&(this.scrollTarget=l),!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc&&!a.state.facet(Jpe)&&(this.mustEnforceCursorAssoc=!0)}measure(a){let l=a.contentDOM,h=window.getComputedStyle(l),d=this.heightOracle,f=h.whiteSpace;this.defaultTextDirection="rtl"==h.direction?Ns.RTL:Ns.LTR;let p=this.heightOracle.mustRefreshForWrapping(f),g=l.getBoundingClientRect(),m=p||this.mustMeasureContent||this.contentDOMHeight!=g.height;this.contentDOMHeight=g.height,this.mustMeasureContent=!1;let v=0,y=0,_=parseInt(h.paddingTop)||0,b=parseInt(h.paddingBottom)||0;(this.paddingTop!=_||this.paddingBottom!=b)&&(this.paddingTop=_,this.paddingBottom=b,v|=10),this.editorWidth!=a.scrollDOM.clientWidth&&(d.lineWrapping&&(m=!0),this.editorWidth=a.scrollDOM.clientWidth,v|=8);let C=(this.printing?oat:sat)(l,this.paddingTop),x=C.top-this.pixelViewport.top,w=C.bottom-this.pixelViewport.bottom;this.pixelViewport=C;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(m=!0)),!this.inView&&!this.scrollTarget)return 0;let D=g.width;if((this.contentDOMWidth!=D||this.editorHeight!=a.scrollDOM.clientHeight)&&(this.contentDOMWidth=g.width,this.editorHeight=a.scrollDOM.clientHeight,v|=8),m){let M=a.docView.measureVisibleLineHeights(this.viewport);if(d.mustRefreshForHeights(M)&&(p=!0),p||d.lineWrapping&&Math.abs(D-this.contentDOMWidth)>d.charWidth){let{lineHeight:k,charWidth:E}=a.docView.measureTextSize();p=k>0&&d.refresh(f,k,E,D/E,M),p&&(a.docView.minWidth=0,v|=8)}x>0&&w>0?y=Math.max(x,w):x<0&&w<0&&(y=Math.min(x,w)),d.heightChanged=!1;for(let k of this.viewports){let E=k.from==this.viewport.from?M:a.docView.measureVisibleLineHeights(k);this.heightMap=(p?Qa.empty().applyChanges(this.stateDeco,wr.empty,this.heightOracle,[new Eh(0,0,0,a.state.doc.length)]):this.heightMap).updateHeight(d,0,p,new zge(k.from,E))}d.heightChanged&&(v|=2)}let T=!this.viewportIsAppropriate(this.viewport,y)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(this.viewport=this.getViewport(y,this.scrollTarget)),this.updateForViewport(),(2&v||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(p?[]:this.lineGaps,a)),v|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,a.docView.enforceCursorAssoc()),v}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(a,l){let h=.5-Math.max(-.5,Math.min(.5,a/1e3/2)),d=this.heightMap,f=this.heightOracle,{visibleTop:p,visibleBottom:g}=this,m=new _A(d.lineAt(p-1e3*h,cs.ByHeight,f,0,0).from,d.lineAt(g+1e3*(1-h),cs.ByHeight,f,0,0).to);if(l){let{head:v}=l.range;if(v<m.from||v>m.to){let b,y=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),_=d.lineAt(v,cs.ByPos,f,0,0);b="center"==l.y?(_.top+_.bottom)/2-y/2:"start"==l.y||"nearest"==l.y&&v<m.from?_.top:_.bottom-y,m=new _A(d.lineAt(b-500,cs.ByHeight,f,0,0).from,d.lineAt(b+y+500,cs.ByHeight,f,0,0).to)}}return m}mapViewport(a,l){let h=l.mapPos(a.from,-1),d=l.mapPos(a.to,1);return new _A(this.heightMap.lineAt(h,cs.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(d,cs.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:a,to:l},h=0){if(!this.inView)return!0;let{top:d}=this.heightMap.lineAt(a,cs.ByPos,this.heightOracle,0,0),{bottom:f}=this.heightMap.lineAt(l,cs.ByPos,this.heightOracle,0,0),{visibleTop:p,visibleBottom:g}=this;return(0==a||d<=p-Math.max(10,Math.min(-h,250)))&&(l==this.state.doc.length||f>=g+Math.max(10,Math.min(h,250)))&&d>p-2e3&&f<g+2e3}mapLineGaps(a,l){if(!a.length||l.empty)return a;let h=[];for(let d of a)l.touchesRange(d.from,d.to)||h.push(new mH(l.mapPos(d.from),l.mapPos(d.to),d.size));return h}ensureLineGaps(a,l){let h=this.heightOracle.lineWrapping,d=h?1e4:2e3,f=d>>1,p=d<<1;if(this.defaultTextDirection!=Ns.LTR&&!h)return[];let g=[],m=(v,y,_,b)=>{if(y-v<f)return;let C=this.state.selection.main,x=[C.from];C.empty||x.push(C.to);for(let O of x)if(O>v&&O<y)return m(v,O-10,_,b),void m(O+10,y,_,b);let w=function cat(c,a){for(let l of c)if(a(l))return l}(a,O=>O.from>=_.from&&O.to<=_.to&&Math.abs(O.from-v)<f&&Math.abs(O.to-y)<f&&!x.some(D=>O.from<D&&O.to>D));if(!w){if(y<_.to&&l&&h&&l.visibleRanges.some(O=>O.from<=y&&O.to>=y)){let O=l.moveToLineBoundary(It.cursor(y),!1,!0).head;O>v&&(y=O)}w=new mH(v,y,this.gapSize(_,v,y,b))}g.push(w)};for(let v of this.viewportLines){if(v.length<p)continue;let y=lat(v.from,v.to,this.stateDeco);if(y.total<p)continue;let b,C,_=this.scrollTarget?this.scrollTarget.range.head:null;if(h){let w,O,x=d/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=_){let D=CA(y,_),T=((this.visibleBottom-this.visibleTop)/2+x)/v.height;w=D-T,O=D+T}else w=(this.visibleTop-v.top-x)/v.height,O=(this.visibleBottom-v.top+x)/v.height;b=bA(y,w),C=bA(y,O)}else{let O,D,x=y.total*this.heightOracle.charWidth,w=d*this.heightOracle.charWidth;if(null!=_){let T=CA(y,_),M=((this.pixelViewport.right-this.pixelViewport.left)/2+w)/x;O=T-M,D=T+M}else O=(this.pixelViewport.left-w)/x,D=(this.pixelViewport.right+w)/x;b=bA(y,O),C=bA(y,D)}b>v.from&&m(v.from,b,v,y),C<v.to&&m(C,v.to,v,y)}return g}gapSize(a,l,h,d){let f=CA(d,h)-CA(d,l);return this.heightOracle.lineWrapping?a.height*f:d.total*this.heightOracle.charWidth*f}updateLineGaps(a){mH.same(a,this.lineGaps)||(this.lineGaps=a,this.lineGapDeco=Gn.set(a.map(l=>l.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let a=this.stateDeco;this.lineGaps.length&&(a=a.concat(this.lineGapDeco));let l=[];Ls.spans(a,this.viewport.from,this.viewport.to,{span(d,f){l.push({from:d,to:f})},point(){}},20);let h=l.length!=this.visibleRanges.length||this.visibleRanges.some((d,f)=>d.from!=l[f].from||d.to!=l[f].to);return this.visibleRanges=l,h?4:0}lineBlockAt(a){return a>=this.viewport.from&&a<=this.viewport.to&&this.viewportLines.find(l=>l.from<=a&&l.to>=a)||hO(this.heightMap.lineAt(a,cs.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(a){return hO(this.heightMap.lineAt(this.scaler.fromDOM(a),cs.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(a){return hO(this.heightMap.blockAt(this.scaler.fromDOM(a),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class _A{constructor(a,l){this.from=a,this.to=l}}function lat(c,a,l){let h=[],d=c,f=0;return Ls.spans(l,c,a,{span(){},point(p,g){p>d&&(h.push({from:d,to:p}),f+=p-d),d=g}},20),d<a&&(h.push({from:d,to:a}),f+=a-d),{total:f,ranges:h}}function bA({total:c,ranges:a},l){if(l<=0)return a[0].from;if(l>=1)return a[a.length-1].to;let h=Math.floor(c*l);for(let d=0;;d++){let{from:f,to:p}=a[d],g=p-f;if(h<=g)return f+h;h-=g}}function CA(c,a){let l=0;for(let{from:h,to:d}of c.ranges){if(a<=d){l+=a-h;break}l+=d-h}return l/c.total}const Gge={toDOM:c=>c,fromDOM:c=>c,scale:1};class uat{constructor(a,l,h){let d=0,f=0,p=0;this.viewports=h.map(({from:g,to:m})=>{let v=l.lineAt(g,cs.ByPos,a,0,0).top,y=l.lineAt(m,cs.ByPos,a,0,0).bottom;return d+=y-v,{from:g,to:m,top:v,bottom:y,domTop:0,domBottom:0}}),this.scale=(7e6-d)/(l.height-d);for(let g of this.viewports)g.domTop=p+(g.top-f)*this.scale,p=g.domBottom=g.domTop+(g.bottom-g.top),f=g.bottom}toDOM(a){for(let l=0,h=0,d=0;;l++){let f=l<this.viewports.length?this.viewports[l]:null;if(!f||a<f.top)return d+(a-h)*this.scale;if(a<=f.bottom)return f.domTop+(a-f.top);h=f.bottom,d=f.domBottom}}fromDOM(a){for(let l=0,h=0,d=0;;l++){let f=l<this.viewports.length?this.viewports[l]:null;if(!f||a<f.domTop)return h+(a-d)/this.scale;if(a<=f.domBottom)return f.top+(a-f.domTop);h=f.bottom,d=f.domBottom}}}function hO(c,a){if(1==a.scale)return c;let l=a.toDOM(c.top),h=a.toDOM(c.bottom);return new up(c.from,c.length,l,h-l,Array.isArray(c.type)?c.type.map(d=>hO(d,a)):c.type)}const SA=Vn.define({combine:c=>c.join(" ")}),vH=Vn.define({combine:c=>c.indexOf(!0)>-1}),yH=Ig.newName(),Qge=Ig.newName(),jge=Ig.newName(),Zge={"&light":"."+Qge,"&dark":"."+jge};function _H(c,a,l){return new Ig(a,{finish:h=>/&/.test(h)?h.replace(/&\w*/,d=>{if("&"==d)return c;if(!l||!l[d])throw new RangeError(`Unsupported selector: ${d}`);return l[d]}):c+" "+h})}const hat=_H("."+yH,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Zge);class dat{constructor(a,l,h,d){this.typeOver=d,this.bounds=null,this.text="";let{impreciseHead:f,impreciseAnchor:p}=a.docView;if(a.state.readOnly&&l>-1)this.newSel=null;else if(l>-1&&(this.bounds=a.docView.domBoundsAround(l,h,0))){let g=f||p?[]:function pat(c){let a=[];if(c.root.activeElement!=c.contentDOM)return a;let{anchorNode:l,anchorOffset:h,focusNode:d,focusOffset:f}=c.observer.selectionRange;return l&&(a.push(new hge(l,h)),(d!=l||f!=h)&&a.push(new hge(d,f))),a}(a),m=new cge(g,a.state);m.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=m.text,this.newSel=function gat(c,a){if(0==c.length)return null;let l=c[0].pos,h=2==c.length?c[1].pos:l;return l>-1&&h>-1?It.single(l+a,h+a):null}(g,this.bounds.from)}else{let g=a.observer.selectionRange,m=f&&f.node==g.focusNode&&f.offset==g.focusOffset||!F1(a.contentDOM,g.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(g.focusNode,g.focusOffset),v=p&&p.node==g.anchorNode&&p.offset==g.anchorOffset||!F1(a.contentDOM,g.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(g.anchorNode,g.anchorOffset);this.newSel=It.single(v,m)}}}function qge(c,a){let l,{newSel:h}=a,d=c.state.selection.main;if(a.bounds){let{from:f,to:p}=a.bounds,g=d.from,m=null;(8===c.inputState.lastKeyCode&&c.inputState.lastKeyTime>Date.now()-100||Hn.android&&a.text.length<p-f)&&(g=d.to,m="end");let v=function fat(c,a,l,h){let d=Math.min(c.length,a.length),f=0;for(;f<d&&c.charCodeAt(f)==a.charCodeAt(f);)f++;if(f==d&&c.length==a.length)return null;let p=c.length,g=a.length;for(;p>0&&g>0&&c.charCodeAt(p-1)==a.charCodeAt(g-1);)p--,g--;return"end"==h&&(l-=p+Math.max(0,f-Math.min(p,g))-f),p<f&&c.length<a.length?(f-=l<=f&&l>=p?f-l:0,g=f+(g-p),p=f):g<f&&(f-=l<=f&&l>=g?f-l:0,p=f+(p-g),g=f),{from:f,toA:p,toB:g}}(c.state.doc.sliceString(f,p,"\uffff"),a.text,g-f,m);v&&(Hn.chrome&&13==c.inputState.lastKeyCode&&v.toB==v.from+2&&"\uffff\uffff"==a.text.slice(v.from,v.toB)&&v.toB--,l={from:f+v.from,to:f+v.toA,insert:wr.of(a.text.slice(v.from,v.toB).split("\uffff"))})}else h&&(!c.hasFocus&&c.state.facet(pA)||h.main.eq(d))&&(h=null);if(!l&&!h)return!1;if(!l&&a.typeOver&&!d.empty&&h&&h.main.empty?l={from:d.from,to:d.to,insert:c.state.doc.slice(d.from,d.to)}:l&&l.from>=d.from&&l.to<=d.to&&(l.from!=d.from||l.to!=d.to)&&d.to-d.from-(l.to-l.from)<=4?l={from:d.from,to:d.to,insert:c.state.doc.slice(d.from,l.from).append(l.insert).append(c.state.doc.slice(l.to,d.to))}:(Hn.mac||Hn.android)&&l&&l.from==l.to&&l.from==d.head-1&&/^\. ?$/.test(l.insert.toString())&&"off"==c.contentDOM.getAttribute("autocorrect")?(h&&2==l.insert.length&&(h=It.single(h.main.anchor-1,h.main.head-1)),l={from:d.from,to:d.to,insert:wr.of([" "])}):Hn.chrome&&l&&l.from==l.to&&l.from==d.head&&"\n "==l.insert.toString()&&c.lineWrapping&&(h&&(h=It.single(h.main.anchor-1,h.main.head-1)),l={from:d.from,to:d.to,insert:wr.of([" "])}),l){let f=c.state;if(Hn.ios&&c.inputState.flushIOSKey(c)||Hn.android&&(l.from==d.from&&l.to==d.to&&1==l.insert.length&&2==l.insert.lines&&B1(c.contentDOM,"Enter",13)||l.from==d.from-1&&l.to==d.to&&0==l.insert.length&&B1(c.contentDOM,"Backspace",8)||l.from==d.from&&l.to==d.to+1&&0==l.insert.length&&B1(c.contentDOM,"Delete",46)))return!0;let g,p=l.insert.toString();if(c.state.facet(Xpe).some(v=>v(c,l.from,l.to,p)))return!0;if(c.inputState.composing>=0&&c.inputState.composing++,l.from>=d.from&&l.to<=d.to&&l.to-l.from>=(d.to-d.from)/3&&(!h||h.main.empty&&h.main.from==l.from+l.insert.length)&&c.inputState.composing<0){let v=d.from<l.from?f.sliceDoc(d.from,l.from):"",y=d.to>l.to?f.sliceDoc(l.to,d.to):"";g=f.replaceSelection(c.state.toText(v+l.insert.sliceString(0,void 0,c.state.lineBreak)+y))}else{let v=f.changes(l),y=h&&!f.selection.main.eq(h.main)&&h.main.to<=v.newLength?h.main:void 0;if(f.selection.ranges.length>1&&c.inputState.composing>=0&&l.to<=d.to&&l.to>=d.to-10){let _=c.state.sliceDoc(l.from,l.to),b=pge(c)||c.state.doc.lineAt(d.head),C=d.to-l.to,x=d.to-d.from;g=f.changeByRange(w=>{if(w.from==d.from&&w.to==d.to)return{changes:v,range:y||w.map(v)};let O=w.to-C,D=O-_.length;if(w.to-w.from!=x||c.state.sliceDoc(D,O)!=_||b&&w.to>=b.from&&w.from<=b.to)return{range:w};let T=f.changes({from:D,to:O,insert:l.insert}),M=w.to-d.to;return{changes:T,range:y?It.range(Math.max(0,y.anchor+M),Math.max(0,y.head+M)):w.map(T)}})}else g={changes:v,selection:y&&f.selection.replaceRange(y)}}let m="input.type";return c.composing&&(m+=".compose",c.inputState.compositionFirstChange&&(m+=".start",c.inputState.compositionFirstChange=!1)),c.dispatch(g,{scrollIntoView:!0,userEvent:m}),!0}if(h&&!h.main.eq(d)){let f=!1,p="select";return c.inputState.lastSelectionTime>Date.now()-50&&("select"==c.inputState.lastSelectionOrigin&&(f=!0),p=c.inputState.lastSelectionOrigin),c.dispatch({selection:h,scrollIntoView:f,userEvent:p}),!0}return!1}const mat={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},bH=Hn.ie&&Hn.ie_version<=11;class vat{constructor(a){this.view=a,this.active=!1,this.selectionRange=new pot,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=a.contentDOM,this.observer=new MutationObserver(l=>{for(let h of l)this.queue.push(h);(Hn.ie&&Hn.ie_version<=11||Hn.ios&&a.composing)&&l.some(h=>"childList"==h.type&&h.removedNodes.length||"characterData"==h.type&&h.oldValue.length>h.target.nodeValue.length)?this.flushSoon():this.flush()}),bH&&(this.onCharData=l=>{this.queue.push({target:l.target,type:"characterData",oldValue:l.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var l;(null===(l=this.view.docView)||void 0===l?void 0:l.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(a.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(a.contentDOM)),this.addWindowListeners(this.win=a.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(l=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),l.length>0&&l[l.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(l=>{l.length>0&&l[l.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(a){this.view.inputState.runScrollHandlers(this.view,a),this.intersecting&&this.view.measure()}onScroll(a){this.intersecting&&this.flush(!1),this.onScrollChanged(a)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(a){if(this.gapIntersection&&(a.length!=this.gaps.length||this.gaps.some((l,h)=>l!=a[h]))){this.gapIntersection.disconnect();for(let l of a)this.gapIntersection.observe(l);this.gaps=a}}onSelectionChange(a){let l=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:h}=this,d=this.selectionRange;if(h.state.facet(pA)?h.root.activeElement!=this.dom:!aA(h.dom,d))return;let f=d.anchorNode&&h.docView.nearest(d.anchorNode);f&&f.ignoreEvent(a)?l||(this.selectionChanged=!1):(Hn.ie&&Hn.ie_version<=11||Hn.android&&Hn.chrome)&&!h.state.selection.main.empty&&d.focusNode&&lA(d.focusNode,d.focusOffset,d.anchorNode,d.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:a}=this,l=Hn.safari&&11==a.root.nodeType&&function uot(c){let a=c.activeElement;for(;a&&a.shadowRoot;)a=a.shadowRoot.activeElement;return a}(this.dom.ownerDocument)==this.dom&&function yat(c){let a=null;function l(m){m.preventDefault(),m.stopImmediatePropagation(),a=m.getTargetRanges()[0]}if(c.contentDOM.addEventListener("beforeinput",l,!0),c.dom.ownerDocument.execCommand("indent"),c.contentDOM.removeEventListener("beforeinput",l,!0),!a)return null;let h=a.startContainer,d=a.startOffset,f=a.endContainer,p=a.endOffset,g=c.docView.domAtPos(c.state.selection.main.anchor);return lA(g.node,g.offset,f,p)&&([h,d,f,p]=[f,p,h,d]),{anchorNode:h,anchorOffset:d,focusNode:f,focusOffset:p}}(this.view)||oA(a.root);if(!l||this.selectionRange.eq(l))return!1;let h=aA(this.dom,l);return h&&!this.selectionChanged&&a.inputState.lastFocusTime>Date.now()-200&&a.inputState.lastTouchTime<Date.now()-300&&function mot(c,a){let l=a.focusNode,h=a.focusOffset;if(!l||a.anchorNode!=l||a.anchorOffset!=h)return!1;for(;;)if(h){if(1!=l.nodeType)return!1;let d=l.childNodes[h-1];"false"==d.contentEditable?h--:(l=d,h=oO(l))}else{if(l==c)return!0;h=cA(l),l=l.parentNode}}(this.dom,l)?(this.view.inputState.lastFocusTime=0,a.docView.updateSelection(),!1):(this.selectionRange.setRange(l),h&&(this.selectionChanged=!0),!0)}setSelectionRange(a,l){this.selectionRange.set(a.node,a.offset,l.node,l.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let a=0,l=null;for(let h=this.dom;h;)if(1==h.nodeType)!l&&a<this.scrollTargets.length&&this.scrollTargets[a]==h?a++:l||(l=this.scrollTargets.slice(0,a)),l&&l.push(h),h=h.assignedSlot||h.parentNode;else{if(11!=h.nodeType)break;h=h.host}if(a<this.scrollTargets.length&&!l&&(l=this.scrollTargets.slice(0,a)),l){for(let h of this.scrollTargets)h.removeEventListener("scroll",this.onScroll);for(let h of this.scrollTargets=l)h.addEventListener("scroll",this.onScroll)}}ignore(a){if(!this.active)return a();try{return this.stop(),a()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mat),bH&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),bH&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(a,l){var h;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let f=this.delayedAndroidKey;f&&(this.clearDelayedAndroidKey(),!this.flush()&&f.force&&B1(this.dom,f.key,f.keyCode))})),(!this.delayedAndroidKey||"Enter"==a)&&(this.delayedAndroidKey={key:a,keyCode:l,force:this.lastChange<Date.now()-50||!(null===(h=this.delayedAndroidKey)||void 0===h||!h.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let a=this.queue;for(let f of this.observer.takeRecords())a.push(f);a.length&&(this.queue=[]);let l=-1,h=-1,d=!1;for(let f of a){let p=this.readMutation(f);p&&(p.typeOver&&(d=!0),-1==l?({from:l,to:h}=p):(l=Math.min(p.from,l),h=Math.max(p.to,h)))}return{from:l,to:h,typeOver:d}}readChange(){let{from:a,to:l,typeOver:h}=this.processRecords(),d=this.selectionChanged&&aA(this.dom,this.selectionRange);return a<0&&!d?null:(a>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new dat(this.view,a,l,h))}flush(a=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;a&&this.readSelectionRange();let l=this.readChange();if(!l)return!1;let h=this.view.state,d=qge(this.view,l);return this.view.state==h&&this.view.update([]),d}readMutation(a){let l=this.view.docView.nearest(a.target);if(!l||l.ignoreMutation(a))return null;if(l.markDirty("attributes"==a.type),"attributes"==a.type&&(l.dirty|=4),"childList"==a.type){let h=Xge(l,a.previousSibling||a.target.previousSibling,-1),d=Xge(l,a.nextSibling||a.target.nextSibling,1);return{from:h?l.posAfter(h):l.posAtStart,to:d?l.posBefore(d):l.posAtEnd,typeOver:!1}}return"characterData"==a.type?{from:l.posAtStart,to:l.posAtEnd,typeOver:a.target.nodeValue==a.oldValue}:null}setWindow(a){a!=this.win&&(this.removeWindowListeners(this.win),this.win=a,this.addWindowListeners(this.win))}addWindowListeners(a){a.addEventListener("resize",this.onResize),a.addEventListener("beforeprint",this.onPrint),a.addEventListener("scroll",this.onScroll),a.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(a){a.removeEventListener("scroll",this.onScroll),a.removeEventListener("resize",this.onResize),a.removeEventListener("beforeprint",this.onPrint),a.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var a,l,h,d;this.stop(),null===(a=this.intersection)||void 0===a||a.disconnect(),null===(l=this.gapIntersection)||void 0===l||l.disconnect(),null===(h=this.resizeScroll)||void 0===h||h.disconnect(),null===(d=this.resizeContent)||void 0===d||d.disconnect();for(let f of this.scrollTargets)f.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Xge(c,a,l){for(;a;){let h=ys.get(a);if(h&&h.parent==c)return h;let d=a.parentNode;a=d!=c.dom?d:l>0?a.nextSibling:a.previousSibling}return null}let Ii=(()=>{class c{constructor(l={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=l.dispatch||(h=>this.update([h])),this.dispatch=this.dispatch.bind(this),this._root=l.root||function got(c){for(;c;){if(c&&(9==c.nodeType||11==c.nodeType&&c.host))return c;c=c.assignedSlot||c.parentNode}return null}(l.parent)||document,this.viewState=new Wge(l.state||Ml.create(l)),this.plugins=this.state.facet(lO).map(h=>new aH(h));for(let h of this.plugins)h.update(this);this.observer=new vat(this),this.inputState=new Hot(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new dge(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),l.parent&&l.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...l){this._dispatch(1==l.length&&l[0]instanceof Bd?l[0]:this.state.update(...l))}update(l){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let f,h=!1,d=!1,p=this.state;for(let C of l){if(C.startState!=p)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");p=C.state}if(this.destroyed)return void(this.viewState.state=p);let g=this.hasFocus,m=0,v=null;l.some(C=>C.annotation(Lge))?(this.inputState.notifiedFocused=g,m=1):g!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=g,v=Nge(p,g),v||(m=1));let y=this.observer.delayedAndroidKey,_=null;if(y?(this.observer.clearDelayedAndroidKey(),_=this.observer.readChange(),(_&&!this.state.doc.eq(p.doc)||!this.state.selection.eq(p.selection))&&(_=null)):this.observer.clear(),p.facet(Ml.phrases)!=this.state.facet(Ml.phrases))return this.setState(p);f=mA.create(this,p,l),f.flags|=m;let b=this.viewState.scrollTarget;try{this.updateState=2;for(let C of l){if(b&&(b=b.map(C.changes)),C.scrollIntoView){let{main:x}=C.state.selection;b=new fA(x.empty?x:It.cursor(x.head,x.head>x.anchor?-1:1))}for(let x of C.effects)x.is(ege)&&(b=x.value)}this.viewState.update(f,b),this.bidiCache=xA.update(this.bidiCache,f.changes),f.empty||(this.updatePlugins(f),this.inputState.update(f)),h=this.docView.update(f),this.state.facet(uO)!=this.styleModules&&this.mountStyles(),d=this.updateAttrs(),this.showAnnouncements(l),this.docView.updateSelection(h,l.some(C=>C.isUserEvent("select.pointer")))}finally{this.updateState=0}if(f.startState.facet(SA)!=f.state.facet(SA)&&(this.viewState.mustMeasureContent=!0),(h||d||b||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!f.empty)for(let C of this.state.facet(oH))C(f);(v||_)&&Promise.resolve().then(()=>{v&&this.state==v.startState&&this.dispatch(v),_&&!qge(this,_)&&y.force&&B1(this.contentDOM,y.key,y.keyCode)})}setState(l){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=l);this.updateState=2;let h=this.hasFocus;try{for(let d of this.plugins)d.destroy(this);this.viewState=new Wge(l),this.plugins=l.facet(lO).map(d=>new aH(d)),this.pluginMap.clear();for(let d of this.plugins)d.update(this);this.docView=new dge(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}h&&this.focus(),this.requestMeasure()}updatePlugins(l){let h=l.startState.facet(lO),d=l.state.facet(lO);if(h!=d){let f=[];for(let p of d){let g=h.indexOf(p);if(g<0)f.push(new aH(p));else{let m=this.plugins[g];m.mustUpdate=l,f.push(m)}}for(let p of this.plugins)p.mustUpdate!=l&&p.destroy(this);this.plugins=f,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let f of this.plugins)f.mustUpdate=l;for(let f=0;f<this.plugins.length;f++)this.plugins[f].update(this)}measure(l=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,l&&this.observer.forceFlush();let h=null,{scrollHeight:d,scrollTop:f,clientHeight:p}=this.scrollDOM,g=f>d-p-4?d:f;try{for(let m=0;;m++){this.updateState=1;let v=this.viewport,y=this.viewState.lineBlockAtHeight(g),_=this.viewState.measure(this);if(!_&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(m>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let b=[];4&_||([this.measureRequests,b]=[b,this.measureRequests]);let C=b.map(D=>{try{return D.read(this)}catch(T){return Uc(this.state,T),Yge}}),x=mA.create(this,this.state,[]),w=!1,O=!1;x.flags|=_,h?h.flags|=_:h=x,this.updateState=2,x.empty||(this.updatePlugins(x),this.inputState.update(x),this.updateAttrs(),w=this.docView.update(x));for(let D=0;D<b.length;D++)if(C[D]!=Yge)try{let T=b[D];T.write&&T.write(C[D],this)}catch(T){Uc(this.state,T)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,O=!0;else{let D=this.viewState.lineBlockAt(y.from).top-y.top;(D>1||D<-1)&&(this.scrollDOM.scrollTop+=D,O=!0)}if(w&&this.docView.updateSelection(!0),this.viewport.from==v.from&&this.viewport.to==v.to&&!O&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(h&&!h.empty)for(let m of this.state.facet(oH))m(h)}get themeClasses(){return yH+" "+(this.state.facet(vH)?jge:Qge)+" "+this.state.facet(SA)}updateAttrs(){let l=Kge(this,tge,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),h={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(pA)?"true":"false",class:"cm-content",style:`${Hn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(h["aria-readonly"]="true"),Kge(this,gA,h);let d=this.observer.ignore(()=>{let f=iH(this.contentDOM,this.contentAttrs,h),p=iH(this.dom,this.editorAttrs,l);return f||p});return this.editorAttrs=l,this.contentAttrs=h,d}showAnnouncements(l){let h=!0;for(let d of l)for(let f of d.effects)f.is(c.announce)&&(h&&(this.announceDOM.textContent=""),h=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=f.value)}mountStyles(){this.styleModules=this.state.facet(uO),Ig.mount(this.root,this.styleModules.concat(hat).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(l){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),l){if(this.measureRequests.indexOf(l)>-1)return;if(null!=l.key)for(let h=0;h<this.measureRequests.length;h++)if(this.measureRequests[h].key===l.key)return void(this.measureRequests[h]=l);this.measureRequests.push(l)}}plugin(l){let h=this.pluginMap.get(l);return(void 0===h||h&&h.spec!=l)&&this.pluginMap.set(l,h=this.plugins.find(d=>d.spec==l)||null),h&&h.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(l){return this.readMeasured(),this.viewState.elementAtHeight(l)}lineBlockAtHeight(l){return this.readMeasured(),this.viewState.lineBlockAtHeight(l)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(l){return this.viewState.lineBlockAt(l)}get contentHeight(){return this.viewState.contentHeight}moveByChar(l,h,d){return dH(this,l,Cge(this,l,h,d))}moveByGroup(l,h){return dH(this,l,Cge(this,l,h,d=>function Uot(c,a,l){let h=c.state.charCategorizer(a),d=h(l);return f=>{let p=h(f);return d==Ts.Space&&(d=p),d==p}}(this,l.head,d)))}moveToLineBoundary(l,h,d=!0){return function Vot(c,a,l,h){let d=c.state.doc.lineAt(a.head),f=h&&c.lineWrapping?c.coordsAtPos(a.assoc<0&&a.head>d.from?a.head-1:a.head):null;if(f){let m=c.dom.getBoundingClientRect(),v=c.textDirectionAt(d.from),y=c.posAtCoords({x:l==(v==Ns.LTR)?m.right-1:m.left+1,y:(f.top+f.bottom)/2});if(null!=y)return It.cursor(y,l?-1:1)}let p=El.find(c.docView,a.head);return It.cursor(p?l?p.posAtEnd:p.posAtStart:l?d.to:d.from,l?-1:1)}(this,l,h,d)}moveVertically(l,h,d){return dH(this,l,function zot(c,a,l,h){let d=a.head,f=l?1:-1;if(d==(l?c.state.doc.length:0))return It.cursor(d,a.assoc);let g,p=a.goalColumn,m=c.contentDOM.getBoundingClientRect(),v=c.coordsAtPos(d),y=c.documentTop;if(v)null==p&&(p=v.left-m.left),g=f<0?v.top:v.bottom;else{let C=c.viewState.lineBlockAt(d);null==p&&(p=Math.min(m.right-m.left,c.defaultCharacterWidth*(d-C.from))),g=(f<0?C.top:C.bottom)+y}let _=m.left+p,b=h??c.defaultLineHeight>>1;for(let C=0;;C+=10){let x=g+(b+C)*f,w=_ge(c,{x:_,y:x},!1,f);if(x<m.top||x>m.bottom||(f<0?w<d:w>d))return It.cursor(w,a.assoc,void 0,p)}}(this,l,h,d))}domAtPos(l){return this.docView.domAtPos(l)}posAtDOM(l,h=0){return this.docView.posFromDOM(l,h)}posAtCoords(l,h=!0){return this.readMeasured(),_ge(this,l,h)}coordsAtPos(l,h=1){this.readMeasured();let d=this.docView.coordsAt(l,h);if(!d||d.left==d.right)return d;let f=this.state.doc.lineAt(l),p=this.bidiSpans(f);return j7(d,p[U1.find(p,l-f.from,-1,h)].dir==Ns.LTR==h>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(l){return!this.state.facet(Kpe)||l<this.viewport.from||l>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(l))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(l){if(l.length>_at)return oge(l.length);let h=this.textDirectionAt(l.from);for(let f of this.bidiCache)if(f.from==l.from&&f.dir==h)return f.order;let d=function sge(c,a){let l=c.length,h=a==lH?1:2,d=a==lH?2:1;if(!c||1==h&&!Dot.test(c))return oge(l);for(let p=0,g=h,m=h;p<l;p++){let v=Oot(c.charCodeAt(p));512==v?v=g:8==v&&4==m&&(v=16),Bs[p]=4==v?2:v,7&v&&(m=v),g=v}for(let p=0,g=h,m=h;p<l;p++){let v=Bs[p];if(128==v)p<l-1&&g==Bs[p+1]&&24&g?v=Bs[p]=g:Bs[p]=256;else if(64==v){let y=p+1;for(;y<l&&64==Bs[y];)y++;let _=p&&8==g||y<l&&8==Bs[y]?1==m?1:8:256;for(let b=p;b<y;b++)Bs[b]=_;p=y-1}else 8==v&&1==m&&(Bs[p]=1);g=v,7&v&&(m=v)}for(let v,y,_,p=0,g=0,m=0;p<l;p++)if(y=cH[v=c.charCodeAt(p)])if(y<0){for(let b=g-3;b>=0;b-=3)if(Ud[b+1]==-y){let C=Ud[b+2],x=2&C?h:4&C?1&C?d:h:0;x&&(Bs[p]=Bs[Ud[b]]=x),g=b;break}}else{if(189==Ud.length)break;Ud[g++]=p,Ud[g++]=v,Ud[g++]=m}else if(2==(_=Bs[p])||1==_){let b=_==h;m=b?0:1;for(let C=g-3;C>=0;C-=3){let x=Ud[C+2];if(2&x)break;if(b)Ud[C+2]|=2;else{if(4&x)break;Ud[C+2]|=4}}}for(let p=0;p<l;p++)if(256==Bs[p]){let g=p+1;for(;g<l&&256==Bs[g];)g++;let m=1==(p?Bs[p-1]:h),y=m==(1==(g<l?Bs[g]:h))?m?1:2:h;for(let _=p;_<g;_++)Bs[_]=y;p=g-1}let f=[];if(1==h)for(let p=0;p<l;){let g=p,m=1!=Bs[p++];for(;p<l&&m==(1!=Bs[p]);)p++;if(m)for(let v=p;v>g;){let y=v,_=2!=Bs[--v];for(;v>g&&_==(2!=Bs[v-1]);)v--;f.push(new U1(v,y,_?2:1))}else f.push(new U1(g,p,0))}else for(let p=0;p<l;){let g=p,m=2==Bs[p++];for(;p<l&&m==(2==Bs[p]);)p++;f.push(new U1(g,p,m?1:2))}return f}(l.text,h);return this.bidiCache.push(new xA(l.from,l.to,h,d)),d}get hasFocus(){var l;return(this.dom.ownerDocument.hasFocus()||Hn.safari&&(null===(l=this.inputState)||void 0===l?void 0:l.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Tpe(this.contentDOM),this.docView.updateSelection()})}setRoot(l){this._root!=l&&(this._root=l,this.observer.setWindow((9==l.nodeType?l:l.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let l of this.plugins)l.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(l,h={}){return ege.of(new fA("number"==typeof l?It.cursor(l):l,h.y,h.x,h.yMargin,h.xMargin))}static domEventHandlers(l){return Js.define(()=>({}),{eventHandlers:l})}static theme(l,h){let d=Ig.newName(),f=[SA.of(d),uO.of(_H(`.${d}`,l))];return h&&h.dark&&f.push(vH.of(!0)),f}static baseTheme(l){return G0.lowest(uO.of(_H("."+yH,l,Zge)))}static findFromDOM(l){var h;let d=l.querySelector(".cm-content");return(null===(h=(d&&ys.get(d)||ys.get(l))?.rootView)||void 0===h?void 0:h.view)||null}}return c.styleModule=uO,c.inputHandler=Xpe,c.focusChangeEffect=Ype,c.perLineTextDirection=Kpe,c.exceptionSink=qpe,c.updateListener=oH,c.editable=pA,c.mouseSelectionStyle=Zpe,c.dragMovesSelection=jpe,c.clickAddsSelectionRange=Qpe,c.decorations=cO,c.atomicRanges=nge,c.scrollMargins=ige,c.darkTheme=vH,c.contentAttributes=gA,c.editorAttributes=tge,c.lineWrapping=c.contentAttributes.of({class:"cm-lineWrapping"}),c.announce=rr.define(),c})();const _at=4096,Yge={};class xA{constructor(a,l,h,d){this.from=a,this.to=l,this.dir=h,this.order=d}static update(a,l){if(l.empty)return a;let h=[],d=a.length?a[a.length-1].dir:Ns.LTR;for(let f=Math.max(0,a.length-10);f<a.length;f++){let p=a[f];p.dir==d&&!l.touchesRange(p.from,p.to)&&h.push(new xA(l.mapPos(p.from,1),l.mapPos(p.to,-1),p.dir,p.order))}return h}}function Kge(c,a,l){for(let h=c.state.facet(a),d=h.length-1;d>=0;d--){let f=h[d],p="function"==typeof f?f(c):f;p&&tH(p,l)}return l}const bat=Hn.mac?"mac":Hn.windows?"win":Hn.linux?"linux":"key";function wA(c,a,l){return a.altKey&&(c="Alt-"+c),a.ctrlKey&&(c="Ctrl-"+c),a.metaKey&&(c="Meta-"+c),!1!==l&&a.shiftKey&&(c="Shift-"+c),c}const Sat=G0.default(Ii.domEventHandlers({keydown:(c,a)=>tme(eme(a.state),c,a,"editor")})),OA=Vn.define({enables:Sat}),Jge=new WeakMap;function eme(c){let a=c.facet(OA),l=Jge.get(a);return l||Jge.set(a,l=function Oat(c,a=bat){let l=Object.create(null),h=Object.create(null),d=(p,g)=>{let m=h[p];if(null==m)h[p]=g;else if(m!=g)throw new Error("Key binding "+p+" is used both as a regular binding and as a multi-stroke prefix")},f=(p,g,m,v)=>{var y,_;let b=l[p]||(l[p]=Object.create(null)),C=g.split(/ (?!$)/).map(O=>function Cat(c,a){const l=c.split(/-(?!$)/);let d,f,p,g,h=l[l.length-1];"Space"==h&&(h=" ");for(let m=0;m<l.length-1;++m){const v=l[m];if(/^(cmd|meta|m)$/i.test(v))g=!0;else if(/^a(lt)?$/i.test(v))d=!0;else if(/^(c|ctrl|control)$/i.test(v))f=!0;else if(/^s(hift)?$/i.test(v))p=!0;else{if(!/^mod$/i.test(v))throw new Error("Unrecognized modifier name: "+v);"mac"==a?g=!0:f=!0}}return d&&(h="Alt-"+h),f&&(h="Ctrl-"+h),g&&(h="Meta-"+h),p&&(h="Shift-"+h),h}(O,a));for(let O=1;O<C.length;O++){let D=C.slice(0,O).join(" ");d(D,!0),b[D]||(b[D]={preventDefault:!0,run:[T=>{let M=Ng={view:T,prefix:D,scope:p};return setTimeout(()=>{Ng==M&&(Ng=null)},4e3),!0}]})}let x=C.join(" ");d(x,!1);let w=b[x]||(b[x]={preventDefault:!1,run:(null===(_=null===(y=b._any)||void 0===y?void 0:y.run)||void 0===_?void 0:_.slice())||[]});m&&w.run.push(m),v&&(w.preventDefault=!0)};for(let p of c){let g=p.scope?p.scope.split(" "):["editor"];if(p.any)for(let v of g){let y=l[v]||(l[v]=Object.create(null));y._any||(y._any={preventDefault:!1,run:[]});for(let _ in y)y[_].run.push(p.any)}let m=p[a]||p.key;if(m)for(let v of g)f(v,m,p.run,p.preventDefault),p.shift&&f(v,"Shift-"+m,p.shift,p.preventDefault)}return l}(a.reduce((h,d)=>h.concat(d),[]))),l}let Ng=null;function tme(c,a,l,h){let d=function cot(c){var l=!(lot&&(c.ctrlKey||c.altKey||c.metaKey)||aot&&c.shiftKey&&c.key&&1==c.key.length||"Unidentified"==c.key)&&c.key||(c.shiftKey?rO:Pg)[c.keyCode]||c.key||"Unidentified";return"Esc"==l&&(l="Escape"),"Del"==l&&(l="Delete"),"Left"==l&&(l="ArrowLeft"),"Up"==l&&(l="ArrowUp"),"Right"==l&&(l="ArrowRight"),"Down"==l&&(l="ArrowDown"),l}(a),p=Eu(Sa(d,0))==d.length&&" "!=d,g="",m=!1;Ng&&Ng.view==l&&Ng.scope==h&&(g=Ng.prefix+" ",(m=xge.indexOf(a.keyCode)<0)&&(Ng=null));let b,C,v=new Set,y=x=>{if(x){for(let w of x.run)if(!v.has(w)&&(v.add(w),w(l,a)))return!0;x.preventDefault&&(m=!0)}return!1},_=c[h];if(_){if(y(_[g+wA(d,a,!p)]))return!0;if(p&&(a.altKey||a.metaKey||a.ctrlKey)&&!(Hn.windows&&a.ctrlKey&&a.altKey)&&(b=Pg[a.keyCode])&&b!=d){if(y(_[g+wA(b,a,!0)]))return!0;if(a.shiftKey&&(C=rO[a.keyCode])!=d&&C!=b&&y(_[g+wA(C,a,!1)]))return!0}else if(p&&a.shiftKey&&y(_[g+wA(d,a,!0)]))return!0;if(y(_._any))return!0}return m}class dO{constructor(a,l,h,d,f){this.className=a,this.left=l,this.top=h,this.width=d,this.height=f}draw(){let a=document.createElement("div");return a.className=this.className,this.adjust(a),a}update(a,l){return l.className==this.className&&(this.adjust(a),!0)}adjust(a){a.style.left=this.left+"px",a.style.top=this.top+"px",null!=this.width&&(a.style.width=this.width+"px"),a.style.height=this.height+"px"}eq(a){return this.left==a.left&&this.top==a.top&&this.width==a.width&&this.height==a.height&&this.className==a.className}static forRange(a,l,h){if(h.empty){let d=a.coordsAtPos(h.head,h.assoc||1);if(!d)return[];let f=nme(a);return[new dO(l,d.left-f.left,d.top-f.top,null,d.bottom-d.top)]}return function Dat(c,a,l){if(l.to<=c.viewport.from||l.from>=c.viewport.to)return[];let h=Math.max(l.from,c.viewport.from),d=Math.min(l.to,c.viewport.to),f=c.textDirection==Ns.LTR,p=c.contentDOM,g=p.getBoundingClientRect(),m=nme(c),v=window.getComputedStyle(p.firstChild),y=g.left+parseInt(v.paddingLeft)+Math.min(0,parseInt(v.textIndent)),_=g.right-parseInt(v.paddingRight),b=rme(c,h),C=rme(c,d),x=b.type==ns.Text?b:null,w=C.type==ns.Text?C:null;if(c.lineWrapping&&(x&&(x=ime(c,h,x)),w&&(w=ime(c,d,w))),x&&w&&x.from==w.from)return D(T(l.from,l.to,x));{let k=x?T(l.from,null,x):M(b,!1),E=w?T(null,l.to,w):M(C,!0),P=[];return(x||b).to<(w||C).from-1?P.push(O(y,k.bottom,_,E.top)):k.bottom<E.top&&c.elementAtHeight((k.bottom+E.top)/2).type==ns.Text&&(k.bottom=E.top=(k.bottom+E.top)/2),D(k).concat(P).concat(D(E))}function O(k,E,P,V){return new dO(a,k-m.left,E-m.top-.01,P-k,V-E+.01)}function D({top:k,bottom:E,horizontal:P}){let V=[];for(let I=0;I<P.length;I+=2)V.push(O(P[I],k,P[I+1],E));return V}function T(k,E,P){let V=1e9,I=-1e9,U=[];function $(ee,B,G,W,j){let Q=c.coordsAtPos(ee,ee==P.to?-2:2),X=c.coordsAtPos(G,G==P.from?2:-2);V=Math.min(Q.top,X.top,V),I=Math.max(Q.bottom,X.bottom,I),j==Ns.LTR?U.push(f&&B?y:Q.left,f&&W?_:X.right):U.push(!f&&W?y:X.left,!f&&B?_:Q.right)}let H=k??P.from,J=E??P.to;for(let ee of c.visibleRanges)if(ee.to>H&&ee.from<J)for(let B=Math.max(ee.from,H),G=Math.min(ee.to,J);;){let W=c.state.doc.lineAt(B);for(let j of c.bidiSpans(W)){let Q=j.from+W.from,X=j.to+W.from;if(Q>=G)break;X>B&&$(Math.max(Q,B),null==k&&Q<=H,Math.min(X,G),null==E&&X>=J,j.dir)}if(B=W.to+1,B>=G)break}return 0==U.length&&$(H,null==k,J,null==E,c.textDirection),{top:V,bottom:I,horizontal:U}}function M(k,E){let P=g.top+(E?k.top:k.bottom);return{top:P,bottom:P,horizontal:[]}}}(a,l,h)}}function nme(c){let a=c.scrollDOM.getBoundingClientRect();return{left:(c.textDirection==Ns.LTR?a.left:a.right-c.scrollDOM.clientWidth)-c.scrollDOM.scrollLeft,top:a.top-c.scrollDOM.scrollTop}}function ime(c,a,l){let h=It.cursor(a);return{from:Math.max(l.from,c.moveToLineBoundary(h,!1,!0).from),to:Math.min(l.to,c.moveToLineBoundary(h,!0,!0).from),type:ns.Text}}function rme(c,a){let l=c.lineBlockAt(a);if(Array.isArray(l.type))for(let h of l.type)if(h.to>a||h.to==a&&(h.to==l.to||h.type==ns.Text))return h;return l}class kat{constructor(a,l){this.view=a,this.layer=l,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=a.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),l.above&&this.dom.classList.add("cm-layer-above"),l.class&&this.dom.classList.add(l.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(a.state),a.requestMeasure(this.measureReq),l.mount&&l.mount(this.dom,a)}update(a){a.startState.facet(DA)!=a.state.facet(DA)&&this.setOrder(a.state),(this.layer.update(a,this.dom)||a.geometryChanged)&&a.view.requestMeasure(this.measureReq)}setOrder(a){let l=0,h=a.facet(DA);for(;l<h.length&&h[l]!=this.layer;)l++;this.dom.style.zIndex=String((this.layer.above?150:-1)-l)}measure(){return this.layer.markers(this.view)}draw(a){if(a.length!=this.drawn.length||a.some((l,h)=>!function Tat(c,a){return c.constructor==a.constructor&&c.eq(a)}(l,this.drawn[h]))){let l=this.dom.firstChild,h=0;for(let d of a)d.update&&l&&d.constructor&&this.drawn[h].constructor&&d.update(l,this.drawn[h])?(l=l.nextSibling,h++):this.dom.insertBefore(d.draw(),l);for(;l;){let d=l.nextSibling;l.remove(),l=d}this.drawn=a}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const DA=Vn.define();function sme(c){return[Js.define(a=>new kat(a,c)),DA.of(c)]}const ome=!Hn.ios,fO=Vn.define({combine:c=>Mh(c,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(a,l)=>Math.min(a,l),drawRangeCursor:(a,l)=>a||l})});function Mat(c={}){return[fO.of(c),Eat,Aat,Iat,Jpe.of(!0)]}function ame(c){return c.startState.facet(fO)!=c.state.facet(fO)}const Eat=sme({above:!0,markers(c){let{state:a}=c,l=a.facet(fO),h=[];for(let d of a.selection.ranges){let f=d==a.selection.main;if(d.empty?!f||ome:l.drawRangeCursor){let p=f?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",g=d.empty?d:It.cursor(d.head,d.head>d.anchor?-1:1);for(let m of dO.forRange(c,p,g))h.push(m)}}return h},update(c,a){c.transactions.some(h=>h.selection)&&(a.style.animationName="cm-blink"==a.style.animationName?"cm-blink2":"cm-blink");let l=ame(c);return l&&lme(c.state,a),c.docChanged||c.selectionSet||l},mount(c,a){lme(a.state,c)},class:"cm-cursorLayer"});function lme(c,a){a.style.animationDuration=c.facet(fO).cursorBlinkRate+"ms"}const Aat=sme({above:!1,markers:c=>c.state.selection.ranges.map(a=>a.empty?[]:dO.forRange(c,"cm-selectionBackground",a)).reduce((a,l)=>a.concat(l)),update:(c,a)=>c.docChanged||c.selectionSet||c.viewportChanged||ame(c),class:"cm-selectionLayer"}),cme={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};ome&&(cme[".cm-line"].caretColor="transparent !important");const Iat=G0.highest(Ii.theme(cme)),ume=rr.define({map:(c,a)=>null==c?null:a.mapPos(c)}),pO=xo.define({create:()=>null,update:(c,a)=>(null!=c&&(c=a.changes.mapPos(c)),a.effects.reduce((l,h)=>h.is(ume)?h.value:l,c))}),Pat=Js.fromClass(class{constructor(c){this.view=c,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(c){var a;let l=c.state.field(pO);null==l?null!=this.cursor&&(null===(a=this.cursor)||void 0===a||a.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(c.startState.field(pO)!=l||c.docChanged||c.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let c=this.view.state.field(pO),a=null!=c&&this.view.coordsAtPos(c);if(!a)return null;let l=this.view.scrollDOM.getBoundingClientRect();return{left:a.left-l.left+this.view.scrollDOM.scrollLeft,top:a.top-l.top+this.view.scrollDOM.scrollTop,height:a.bottom-a.top}}drawCursor(c){this.cursor&&(c?(this.cursor.style.left=c.left+"px",this.cursor.style.top=c.top+"px",this.cursor.style.height=c.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(c){this.view.state.field(pO)!=c&&this.view.dispatch({effects:ume.of(c)})}},{eventHandlers:{dragover(c){this.setDropPos(this.view.posAtCoords({x:c.clientX,y:c.clientY}))},dragleave(c){(c.target==this.view.contentDOM||!this.view.contentDOM.contains(c.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function hme(c,a,l,h,d){a.lastIndex=0;for(let g,f=c.iterRange(l,h),p=l;!f.next().done;p+=f.value.length)if(!f.lineBreak)for(;g=a.exec(f.value);)d(p+g.index,g)}class CH{constructor(a){const{regexp:l,decoration:h,decorate:d,boundary:f,maxLength:p=1e3}=a;if(!l.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=l,d)this.addMatch=(g,m,v,y)=>d(y,v,v+g[0].length,g,m);else if("function"==typeof h)this.addMatch=(g,m,v,y)=>{let _=h(g,m,v);_&&y(v,v+g[0].length,_)};else{if(!h)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(g,m,v,y)=>y(v,v+g[0].length,h)}this.boundary=f,this.maxLength=p}createDeco(a){let l=new Ag,h=l.add.bind(l);for(let{from:d,to:f}of function Fat(c,a){let l=c.visibleRanges;if(1==l.length&&l[0].from==c.viewport.from&&l[0].to==c.viewport.to)return l;let h=[];for(let{from:d,to:f}of l)d=Math.max(c.state.doc.lineAt(d).from,d-a),f=Math.min(c.state.doc.lineAt(f).to,f+a),h.length&&h[h.length-1].to>=d?h[h.length-1].to=f:h.push({from:d,to:f});return h}(a,this.maxLength))hme(a.state.doc,this.regexp,d,f,(p,g)=>this.addMatch(g,a,p,h));return l.finish()}updateDeco(a,l){let h=1e9,d=-1;return a.docChanged&&a.changes.iterChanges((f,p,g,m)=>{m>a.view.viewport.from&&g<a.view.viewport.to&&(h=Math.min(g,h),d=Math.max(m,d))}),a.viewportChanged||d-h>1e3?this.createDeco(a.view):d>-1?this.updateRange(a.view,l.map(a.changes),h,d):l}updateRange(a,l,h,d){for(let f of a.visibleRanges){let p=Math.max(f.from,h),g=Math.min(f.to,d);if(g>p){let m=a.state.doc.lineAt(p),v=m.to<g?a.state.doc.lineAt(g):m,y=Math.max(f.from,m.from),_=Math.min(f.to,v.to);if(this.boundary){for(;p>m.from;p--)if(this.boundary.test(m.text[p-1-m.from])){y=p;break}for(;g<v.to;g++)if(this.boundary.test(v.text[g-v.from])){_=g;break}}let C,b=[],x=(w,O,D)=>b.push(D.range(w,O));if(m==v)for(this.regexp.lastIndex=y-m.from;(C=this.regexp.exec(m.text))&&C.index<_-m.from;)this.addMatch(C,a,C.index+m.from,x);else hme(a.state.doc,this.regexp,y,_,(w,O)=>this.addMatch(O,a,w,x));l=l.update({filterFrom:y,filterTo:_,filter:(w,O)=>w<y||O>_,add:b})}}return l}}const SH=null!=/x/.unicode?"gu":"g",Lat=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",SH),Nat={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xH=null;const TA=Vn.define({combine(c){let a=Mh(c,{render:null,specialChars:Lat,addSpecialChars:null});return(a.replaceTabs=!function Bat(){var c;if(null==xH&&typeof document<"u"&&document.body){let a=document.body.style;xH=null!=(null!==(c=a.tabSize)&&void 0!==c?c:a.MozTabSize)}return xH||!1}())&&(a.specialChars=new RegExp("\t|"+a.specialChars.source,SH)),a.addSpecialChars&&(a.specialChars=new RegExp(a.specialChars.source+"|"+a.addSpecialChars.source,SH)),a}});function Vat(c={}){return[TA.of(c),dme||(dme=Js.fromClass(class{constructor(c){this.view=c,this.decorations=Gn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(c.state.facet(TA)),this.decorations=this.decorator.createDeco(c)}makeDecorator(c){return new CH({regexp:c.specialChars,decoration:(a,l,h)=>{let{doc:d}=l.state,f=Sa(a[0],0);if(9==f){let p=d.lineAt(h),g=l.state.tabSize,m=iO(p.text,g,h-p.from);return Gn.replace({widget:new Wat((g-m%g)*this.view.defaultCharacterWidth)})}return this.decorationCache[f]||(this.decorationCache[f]=Gn.replace({widget:new $at(c,f)}))},boundary:c.replaceTabs?void 0:/[^]/})}update(c){let a=c.state.facet(TA);c.startState.facet(TA)!=a?(this.decorator=this.makeDecorator(a),this.decorations=this.decorator.createDeco(c.view)):this.decorations=this.decorator.updateDeco(c,this.decorations)}},{decorations:c=>c.decorations}))]}let dme=null;class $at extends cp{constructor(a,l){super(),this.options=a,this.code=l}eq(a){return a.code==this.code}toDOM(a){let l=function Hat(c){return c>=32?"\u2022":10==c?"\u2424":String.fromCharCode(9216+c)}(this.code),h=a.state.phrase("Control character")+" "+(Nat[this.code]||"0x"+this.code.toString(16)),d=this.options.render&&this.options.render(this.code,h,l);if(d)return d;let f=document.createElement("span");return f.textContent=l,f.title=h,f.setAttribute("aria-label",h),f.className="cm-specialChar",f}ignoreEvent(){return!1}}class Wat extends cp{constructor(a){super(),this.width=a}eq(a){return a.width==this.width}toDOM(){let a=document.createElement("span");return a.textContent="\t",a.className="cm-tab",a.style.width=this.width+"px",a}ignoreEvent(){return!1}}const Qat=Gn.line({class:"cm-activeLine"}),jat=Js.fromClass(class{constructor(c){this.decorations=this.getDeco(c)}update(c){(c.docChanged||c.selectionSet)&&(this.decorations=this.getDeco(c.view))}getDeco(c){let a=-1,l=[];for(let h of c.state.selection.ranges){let d=c.lineBlockAt(h.head);d.from>a&&(l.push(Qat.range(d.from)),a=d.from)}return Gn.set(l)}},{decorations:c=>c.decorations});function pme(c,a){let l=c.posAtCoords({x:a.clientX,y:a.clientY},!1),h=c.state.doc.lineAt(l),d=l-h.from,f=d>2e3?-1:d==h.length?function Xat(c,a){let l=c.coordsAtPos(c.viewport.from);return l?Math.round(Math.abs((l.left-a)/c.defaultCharacterWidth)):-1}(c,a.clientX):iO(h.text,c.state.tabSize,l-h.from);return{line:h.number,col:f,off:d}}function Kat(c){let a=c?.eventFilter||(l=>l.altKey&&0==l.button);return Ii.mouseSelectionStyle.of((l,h)=>a(h)?function Yat(c,a){let l=pme(c,a),h=c.state.selection;return l?{update(d){if(d.docChanged){let f=d.changes.mapPos(d.startState.doc.line(l.line).from),p=d.state.doc.lineAt(f);l={line:p.number,col:l.col,off:Math.min(l.off,p.length)},h=h.map(d.changes)}},get(d,f,p){let g=pme(c,d);if(!g)return h;let m=function qat(c,a,l){let h=Math.min(a.line,l.line),d=Math.max(a.line,l.line),f=[];if(a.off>2e3||l.off>2e3||a.col<0||l.col<0){let p=Math.min(a.off,l.off),g=Math.max(a.off,l.off);for(let m=h;m<=d;m++){let v=c.doc.line(m);v.length<=g&&f.push(It.range(v.from+p,v.to+g))}}else{let p=Math.min(a.col,l.col),g=Math.max(a.col,l.col);for(let m=h;m<=d;m++){let v=c.doc.line(m),y=$7(v.text,p,c.tabSize,!0);if(y<0)f.push(It.cursor(v.to));else{let _=$7(v.text,g,c.tabSize);f.push(It.range(v.from+y,v.from+_))}}}return f}(c.state,l,g);return m.length?It.create(p?m.concat(h.ranges):m):h}}:null}(l,h):null)}const Jat={Alt:[18,c=>c.altKey],Control:[17,c=>c.ctrlKey],Shift:[16,c=>c.shiftKey],Meta:[91,c=>c.metaKey]},elt={style:"cursor: crosshair"};function tlt(c={}){let[a,l]=Jat[c.key||"Alt"],h=Js.fromClass(class{constructor(d){this.view=d,this.isDown=!1}set(d){this.isDown!=d&&(this.isDown=d,this.view.update([]))}},{eventHandlers:{keydown(d){this.set(d.keyCode==a||l(d))},keyup(d){(d.keyCode==a||!l(d))&&this.set(!1)},mousemove(d){this.set(l(d))}}});return[h,Ii.contentAttributes.of(d=>{var f;return null!==(f=d.plugin(h))&&void 0!==f&&f.isDown?elt:null})]}const kA="-10000px";class gme{constructor(a,l,h){this.facet=l,this.createTooltipView=h,this.input=a.state.facet(l),this.tooltips=this.input.filter(d=>d),this.tooltipViews=this.tooltips.map(h)}update(a){var l;let h=a.state.facet(this.facet),d=h.filter(p=>p);if(h===this.input){for(let p of this.tooltipViews)p.update&&p.update(a);return!1}let f=[];for(let p=0;p<d.length;p++){let g=d[p],m=-1;if(g){for(let v=0;v<this.tooltips.length;v++){let y=this.tooltips[v];y&&y.create==g.create&&(m=v)}if(m<0)f[p]=this.createTooltipView(g);else{let v=f[p]=this.tooltipViews[m];v.update&&v.update(a)}}}for(let p of this.tooltipViews)f.indexOf(p)<0&&(p.dom.remove(),null===(l=p.destroy)||void 0===l||l.call(p));return this.input=h,this.tooltips=d,this.tooltipViews=f,!0}}function nlt(c){let{win:a}=c;return{top:0,left:0,bottom:a.innerHeight,right:a.innerWidth}}const MA=Vn.define({combine:c=>{var a,l,h;return{position:Hn.ios?"absolute":(null===(a=c.find(d=>d.position))||void 0===a?void 0:a.position)||"fixed",parent:(null===(l=c.find(d=>d.parent))||void 0===l?void 0:l.parent)||null,tooltipSpace:(null===(h=c.find(d=>d.tooltipSpace))||void 0===h?void 0:h.tooltipSpace)||nlt}}}),mme=new WeakMap,OH=Js.fromClass(class{constructor(c){this.view=c,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let a=c.state.facet(MA);this.position=a.position,this.parent=a.parent,this.classes=c.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new gme(c,EA,l=>this.createTooltip(l)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(l=>{Date.now()>this.lastTransaction-50&&l.length>0&&l[l.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),c.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let c of this.manager.tooltipViews)this.intersectionObserver.observe(c.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(c){c.transactions.length&&(this.lastTransaction=Date.now());let a=this.manager.update(c);a&&this.observeIntersection();let l=a||c.geometryChanged,h=c.state.facet(MA);if(h.position!=this.position){this.position=h.position;for(let d of this.manager.tooltipViews)d.dom.style.position=this.position;l=!0}if(h.parent!=this.parent){this.parent&&this.container.remove(),this.parent=h.parent,this.createContainer();for(let d of this.manager.tooltipViews)this.container.appendChild(d.dom);l=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);l&&this.maybeMeasure()}createTooltip(c){let a=c.create(this.view);if(a.dom.classList.add("cm-tooltip"),c.arrow&&!a.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let l=document.createElement("div");l.className="cm-tooltip-arrow",a.dom.appendChild(l)}return a.dom.style.position=this.position,a.dom.style.top=kA,this.container.appendChild(a.dom),a.mount&&a.mount(this.view),a}destroy(){var c,a;this.view.win.removeEventListener("resize",this.measureSoon);for(let l of this.manager.tooltipViews)l.dom.remove(),null===(c=l.destroy)||void 0===c||c.call(l);null===(a=this.intersectionObserver)||void 0===a||a.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let c=this.view.dom.getBoundingClientRect();return{editor:c,parent:this.parent?this.container.getBoundingClientRect():c,pos:this.manager.tooltips.map((a,l)=>{let h=this.manager.tooltipViews[l];return h.getCoords?h.getCoords(a.pos):this.view.coordsAtPos(a.pos)}),size:this.manager.tooltipViews.map(({dom:a})=>a.getBoundingClientRect()),space:this.view.state.facet(MA).tooltipSpace(this.view)}}writeMeasure(c){var a;let{editor:l,space:h}=c,d=[];for(let f=0;f<this.manager.tooltips.length;f++){let p=this.manager.tooltips[f],g=this.manager.tooltipViews[f],{dom:m}=g,v=c.pos[f],y=c.size[f];if(!v||v.bottom<=Math.max(l.top,h.top)||v.top>=Math.min(l.bottom,h.bottom)||v.right<Math.max(l.left,h.left)-.1||v.left>Math.min(l.right,h.right)+.1){m.style.top=kA;continue}let _=p.arrow?g.dom.querySelector(".cm-tooltip-arrow"):null,b=_?7:0,C=y.right-y.left,x=null!==(a=mme.get(g))&&void 0!==a?a:y.bottom-y.top,w=g.offset||rlt,O=this.view.textDirection==Ns.LTR,D=y.width>h.right-h.left?O?h.left:h.right-y.width:O?Math.min(v.left-(_?14:0)+w.x,h.right-C):Math.max(h.left,v.left-C+(_?14:0)-w.x),T=!!p.above;!p.strictSide&&(T?v.top-(y.bottom-y.top)-w.y<h.top:v.bottom+(y.bottom-y.top)+w.y>h.bottom)&&T==h.bottom-v.bottom>v.top-h.top&&(T=!T);let M=(T?v.top-h.top:h.bottom-v.bottom)-b;if(M<x&&!1!==g.resize){if(M<this.view.defaultLineHeight){m.style.top=kA;continue}mme.set(g,x),m.style.height=(x=M)+"px"}else m.style.height&&(m.style.height="");let k=T?v.top-x-b-w.y:v.bottom+b+w.y,E=D+C;if(!0!==g.overlap)for(let P of d)P.left<E&&P.right>D&&P.top<k+x&&P.bottom>k&&(k=T?P.top-x-2-b:P.bottom+b+2);"absolute"==this.position?(m.style.top=k-c.parent.top+"px",m.style.left=D-c.parent.left+"px"):(m.style.top=k+"px",m.style.left=D+"px"),_&&(_.style.left=v.left+(O?w.x:-w.x)-(D+14-7)+"px"),!0!==g.overlap&&d.push({left:D,top:k,right:E,bottom:k+x}),m.classList.toggle("cm-tooltip-above",T),m.classList.toggle("cm-tooltip-below",!T),g.positioned&&g.positioned(c.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let c of this.manager.tooltipViews)c.dom.style.top=kA}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),rlt={x:0,y:0},EA=Vn.define({enables:[OH,Ii.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}})]}),gO=Vn.define();class DH{constructor(a){this.view=a,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new gme(a,gO,l=>this.createHostedView(l))}static create(a){return new DH(a)}createHostedView(a){let l=a.create(this.view);return l.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(l.dom),this.mounted&&l.mount&&l.mount(this.view),l}mount(a){for(let l of this.manager.tooltipViews)l.mount&&l.mount(a);this.mounted=!0}positioned(a){for(let l of this.manager.tooltipViews)l.positioned&&l.positioned(a)}update(a){this.manager.update(a)}}const slt=EA.compute([gO],c=>{let a=c.facet(gO).filter(l=>l);return 0===a.length?null:{pos:Math.min(...a.map(l=>l.pos)),end:Math.max(...a.filter(l=>null!=l.end).map(l=>l.end)),create:DH.create,above:a[0].above,arrow:a.some(l=>l.arrow)}});class olt{constructor(a,l,h,d,f){this.view=a,this.source=l,this.field=h,this.setHover=d,this.hoverTime=f,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:a.dom,time:0},this.checkHover=this.checkHover.bind(this),a.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),a.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let a=Date.now()-this.lastMove.time;a<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-a):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:a}=this,l=this.view.contentDOM.contains(a.target)?this.view.posAtCoords(a):null;if(null==l)return;let h=this.view.coordsAtPos(l);if(null==h||a.y<h.top||a.y>h.bottom||a.x<h.left-this.view.defaultCharacterWidth||a.x>h.right+this.view.defaultCharacterWidth)return;let d=this.view.bidiSpans(this.view.state.doc.lineAt(l)).find(g=>g.from<=l&&g.to>=l),f=d&&d.dir==Ns.RTL?-1:1,p=this.source(this.view,l,a.x<h.left?-f:f);if(p?.then){let g=this.pending={pos:l};p.then(m=>{this.pending==g&&(this.pending=null,m&&this.view.dispatch({effects:this.setHover.of(m)}))},m=>Uc(this.view.state,m,"hover tooltip"))}else p&&this.view.dispatch({effects:this.setHover.of(p)})}mousemove(a){var l;this.lastMove={x:a.clientX,y:a.clientY,target:a.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let h=this.active;if(h&&!vme(this.lastMove.target)||this.pending){let{pos:d}=h||this.pending,f=null!==(l=h?.end)&&void 0!==l?l:d;(d==f?this.view.posAtCoords(this.lastMove)!=d:!function alt(c,a,l,h,d,f){let p=document.createRange(),g=c.domAtPos(a),m=c.domAtPos(l);p.setEnd(m.node,m.offset),p.setStart(g.node,g.offset);let v=p.getClientRects();p.detach();for(let y=0;y<v.length;y++){let _=v[y];if(Math.max(_.top-d,d-_.bottom,_.left-h,h-_.right)<=f)return!0}return!1}(this.view,d,f,a.clientX,a.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(a){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!vme(a.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function vme(c){for(let a=c;a;a=a.parentNode)if(1==a.nodeType&&a.classList.contains("cm-tooltip"))return!0;return!1}function llt(c,a={}){let l=rr.define(),h=xo.define({create:()=>null,update(d,f){if(d&&(a.hideOnChange&&(f.docChanged||f.selection)||a.hideOn&&a.hideOn(f,d)))return null;if(d&&f.docChanged){let p=f.changes.mapPos(d.pos,-1,xa.TrackDel);if(null==p)return null;let g=Object.assign(Object.create(null),d);g.pos=p,null!=d.end&&(g.end=f.changes.mapPos(d.end)),d=g}for(let p of f.effects)p.is(l)&&(d=p.value),p.is(ult)&&(d=null);return d},provide:d=>gO.from(d)});return[h,Js.define(d=>new olt(d,c,h,l,a.hoverTime||300)),slt]}const ult=rr.define(),TH=Vn.define({combine(c){let a,l;for(let h of c)a=a||h.topContainer,l=l||h.bottomContainer;return{topContainer:a,bottomContainer:l}}});function mO(c,a){let l=c.plugin(yme),h=l?l.specs.indexOf(a):-1;return h>-1?l.panels[h]:null}const yme=Js.fromClass(class{constructor(c){this.input=c.state.facet(vO),this.specs=this.input.filter(l=>l),this.panels=this.specs.map(l=>l(c));let a=c.state.facet(TH);this.top=new AA(c,!0,a.topContainer),this.bottom=new AA(c,!1,a.bottomContainer),this.top.sync(this.panels.filter(l=>l.top)),this.bottom.sync(this.panels.filter(l=>!l.top));for(let l of this.panels)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}update(c){let a=c.state.facet(TH);this.top.container!=a.topContainer&&(this.top.sync([]),this.top=new AA(c.view,!0,a.topContainer)),this.bottom.container!=a.bottomContainer&&(this.bottom.sync([]),this.bottom=new AA(c.view,!1,a.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let l=c.state.facet(vO);if(l!=this.input){let h=l.filter(m=>m),d=[],f=[],p=[],g=[];for(let m of h){let y,v=this.specs.indexOf(m);v<0?(y=m(c.view),g.push(y)):(y=this.panels[v],y.update&&y.update(c)),d.push(y),(y.top?f:p).push(y)}this.specs=h,this.panels=d,this.top.sync(f),this.bottom.sync(p);for(let m of g)m.dom.classList.add("cm-panel"),m.mount&&m.mount()}else for(let h of this.panels)h.update&&h.update(c)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:c=>Ii.scrollMargins.of(a=>{let l=a.plugin(c);return l&&{top:l.top.scrollMargin(),bottom:l.bottom.scrollMargin()}})});class AA{constructor(a,l,h){this.view=a,this.top=l,this.container=h,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(a){for(let l of this.panels)l.destroy&&a.indexOf(l)<0&&l.destroy();this.panels=a,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let l=this.container||this.view.dom;l.insertBefore(this.dom,this.top?l.firstChild:null)}let a=this.dom.firstChild;for(let l of this.panels)if(l.dom.parentNode==this.dom){for(;a!=l.dom;)a=_me(a);a=a.nextSibling}else this.dom.insertBefore(l.dom,a);for(;a;)a=_me(a)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let a of this.classes.split(" "))a&&this.container.classList.remove(a);for(let a of(this.classes=this.view.themeClasses).split(" "))a&&this.container.classList.add(a)}}}function _me(c){let a=c.nextSibling;return c.remove(),a}const vO=Vn.define({enables:yme});class zd extends j0{compare(a){return this==a||this.constructor==a.constructor&&this.eq(a)}eq(a){return!1}destroy(a){}}zd.prototype.elementClass="",zd.prototype.toDOM=void 0,zd.prototype.mapMode=xa.TrackBefore,zd.prototype.startSide=zd.prototype.endSide=-1,zd.prototype.point=!0;const IA=Vn.define(),hlt={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ls.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},yO=Vn.define();function bme(c){return[Cme(),yO.of(Object.assign(Object.assign({},hlt),c))]}const kH=Vn.define({combine:c=>c.some(a=>a)});function Cme(c){let a=[dlt];return c&&!1===c.fixed&&a.push(kH.of(!0)),a}const dlt=Js.fromClass(class{constructor(c){this.view=c,this.prevViewport=c.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=c.state.facet(yO).map(a=>new wme(c,a));for(let a of this.gutters)this.dom.appendChild(a.dom);this.fixed=!c.state.facet(kH),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),c.scrollDOM.insertBefore(this.dom,c.contentDOM)}update(c){if(this.updateGutters(c)){let a=this.prevViewport,l=c.view.viewport,h=Math.min(a.to,l.to)-Math.max(a.from,l.from);this.syncGutters(h<.8*(l.to-l.from))}c.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(kH)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=c.view.viewport}syncGutters(c){let a=this.dom.nextSibling;c&&this.dom.remove();let l=Ls.iter(this.view.state.facet(IA),this.view.viewport.from),h=[],d=this.gutters.map(f=>new flt(f,this.view.viewport,-this.view.documentPadding.top));for(let f of this.view.viewportLineBlocks){let p;if(Array.isArray(f.type)){for(let g of f.type)if(g.type==ns.Text){p=g;break}}else p=f.type==ns.Text?f:void 0;if(p){h.length&&(h=[]),xme(l,h,f.from);for(let g of d)g.line(this.view,p,h)}}for(let f of d)f.finish();c&&this.view.scrollDOM.insertBefore(this.dom,a)}updateGutters(c){let a=c.startState.facet(yO),l=c.state.facet(yO),h=c.docChanged||c.heightChanged||c.viewportChanged||!Ls.eq(c.startState.facet(IA),c.state.facet(IA),c.view.viewport.from,c.view.viewport.to);if(a==l)for(let d of this.gutters)d.update(c)&&(h=!0);else{h=!0;let d=[];for(let f of l){let p=a.indexOf(f);p<0?d.push(new wme(this.view,f)):(this.gutters[p].update(c),d.push(this.gutters[p]))}for(let f of this.gutters)f.dom.remove(),d.indexOf(f)<0&&f.destroy();for(let f of d)this.dom.appendChild(f.dom);this.gutters=d}return h}destroy(){for(let c of this.gutters)c.destroy();this.dom.remove()}},{provide:c=>Ii.scrollMargins.of(a=>{let l=a.plugin(c);return l&&0!=l.gutters.length&&l.fixed?a.textDirection==Ns.LTR?{left:l.dom.offsetWidth}:{right:l.dom.offsetWidth}:null})});function Sme(c){return Array.isArray(c)?c:[c]}function xme(c,a,l){for(;c.value&&c.from<=l;)c.from==l&&a.push(c.value),c.next()}class flt{constructor(a,l,h){this.gutter=a,this.height=h,this.i=0,this.cursor=Ls.iter(a.markers,l.from)}line(a,l,h){let d=[];xme(this.cursor,d,l.from),h.length&&(d=d.concat(h));let f=this.gutter.config.lineMarker(a,l,d);f&&d.unshift(f);let p=this.gutter;if(0==d.length&&!p.config.renderEmptyElements)return;let g=l.top-this.height;if(this.i==p.elements.length){let m=new Ome(a,l.height,g,d);p.elements.push(m),p.dom.appendChild(m.dom)}else p.elements[this.i].update(a,l.height,g,d);this.height=l.bottom,this.i++}finish(){let a=this.gutter;for(;a.elements.length>this.i;){let l=a.elements.pop();a.dom.removeChild(l.dom),l.destroy()}}}class wme{constructor(a,l){this.view=a,this.config=l,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let h in l.domEventHandlers)this.dom.addEventListener(h,d=>{let p,f=d.target;if(f!=this.dom&&this.dom.contains(f)){for(;f.parentNode!=this.dom;)f=f.parentNode;let m=f.getBoundingClientRect();p=(m.top+m.bottom)/2}else p=d.clientY;let g=a.lineBlockAtHeight(p-a.documentTop);l.domEventHandlers[h](a,g,d)&&d.preventDefault()});this.markers=Sme(l.markers(a)),l.initialSpacer&&(this.spacer=new Ome(a,0,0,[l.initialSpacer(a)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(a){let l=this.markers;if(this.markers=Sme(this.config.markers(a.view)),this.spacer&&this.config.updateSpacer){let d=this.config.updateSpacer(this.spacer.markers[0],a);d!=this.spacer.markers[0]&&this.spacer.update(a.view,0,0,[d])}let h=a.view.viewport;return!Ls.eq(this.markers,l,h.from,h.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(a)}destroy(){for(let a of this.elements)a.destroy()}}class Ome{constructor(a,l,h,d){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(a,l,h,d)}update(a,l,h,d){this.height!=l&&(this.dom.style.height=(this.height=l)+"px"),this.above!=h&&(this.dom.style.marginTop=(this.above=h)?h+"px":""),function plt(c,a){if(c.length!=a.length)return!1;for(let l=0;l<c.length;l++)if(!c[l].compare(a[l]))return!1;return!0}(this.markers,d)||this.setMarkers(a,d)}setMarkers(a,l){let h="cm-gutterElement",d=this.dom.firstChild;for(let f=0,p=0;;){let g=p,m=f<l.length?l[f++]:null,v=!1;if(m){let y=m.elementClass;y&&(h+=" "+y);for(let _=p;_<this.markers.length;_++)if(this.markers[_].compare(m)){g=_,v=!0;break}}else g=this.markers.length;for(;p<g;){let y=this.markers[p++];if(y.toDOM){y.destroy(d);let _=d.nextSibling;d.remove(),d=_}}if(!m)break;m.toDOM&&(v?d=d.nextSibling:this.dom.insertBefore(m.toDOM(a),d)),v&&p++}this.dom.className=h,this.markers=l}destroy(){this.setMarkers(null,[])}}const glt=Vn.define(),z1=Vn.define({combine:c=>Mh(c,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(a,l){let h=Object.assign({},a);for(let d in l){let f=h[d],p=l[d];h[d]=f?(g,m,v)=>f(g,m,v)||p(g,m,v):p}return h}})});class MH extends zd{constructor(a){super(),this.number=a}eq(a){return this.number==a.number}toDOM(){return document.createTextNode(this.number)}}function EH(c,a){return c.state.facet(z1).formatNumber(a,c.state)}const mlt=yO.compute([z1],c=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:a=>a.state.facet(glt),lineMarker:(a,l,h)=>h.some(d=>d.toDOM)?null:new MH(EH(a,a.state.doc.lineAt(l.from).number)),lineMarkerChange:a=>a.startState.facet(z1)!=a.state.facet(z1),initialSpacer:a=>new MH(EH(a,Dme(a.state.doc.lines))),updateSpacer(a,l){let h=EH(l.view,Dme(l.view.state.doc.lines));return h==a.number?a:new MH(h)},domEventHandlers:c.facet(z1).domEventHandlers}));function vlt(c={}){return[z1.of(c),Cme(),mlt]}function Dme(c){let a=9;for(;a<c;)a=10*a+9;return a}const ylt=new class extends zd{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},_lt=IA.compute(["selection"],c=>{let a=[],l=-1;for(let h of c.selection.ranges){let d=c.doc.lineAt(h.head).from;d>l&&(l=d,a.push(ylt.range(d)))}return Ls.of(a)}),Mme=1024;let wlt=0;class Au{constructor(a,l){this.from=a,this.to=l}}class Xi{constructor(a={}){this.id=wlt++,this.perNode=!!a.perNode,this.deserialize=a.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(a){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof a&&(a=Al.match(a)),l=>{let h=a(l);return void 0===h?null:[this,h]}}}Xi.closedBy=new Xi({deserialize:c=>c.split(" ")}),Xi.openedBy=new Xi({deserialize:c=>c.split(" ")}),Xi.group=new Xi({deserialize:c=>c.split(" ")}),Xi.contextHash=new Xi({perNode:!0}),Xi.lookAhead=new Xi({perNode:!0}),Xi.mounted=new Xi({perNode:!0});const Dlt=Object.create(null);class Al{constructor(a,l,h,d=0){this.name=a,this.props=l,this.id=h,this.flags=d}static define(a){let l=a.props&&a.props.length?Object.create(null):Dlt,d=new Al(a.name||"",l,a.id,(a.top?1:0)|(a.skipped?2:0)|(a.error?4:0)|(null==a.name?8:0));if(a.props)for(let f of a.props)if(Array.isArray(f)||(f=f(d)),f){if(f[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");l[f[0].id]=f[1]}return d}prop(a){return this.props[a.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(a){if("string"==typeof a){if(this.name==a)return!0;let l=this.prop(Xi.group);return!!l&&l.indexOf(a)>-1}return this.id==a}static match(a){let l=Object.create(null);for(let h in a)for(let d of h.split(" "))l[d]=a[h];return h=>{for(let d=h.prop(Xi.group),f=-1;f<(d?d.length:0);f++){let p=l[f<0?h.name:d[f]];if(p)return p}}}}Al.none=new Al("",Object.create(null),0,8);class PA{constructor(a){this.types=a;for(let l=0;l<a.length;l++)if(a[l].id!=l)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...a){let l=[];for(let h of this.types){let d=null;for(let f of a){let p=f(h);p&&(d||(d=Object.assign({},h.props)),d[p[0].id]=p[1])}l.push(d?new Al(h.name,d,h.id,h.flags):h)}return new PA(l)}}const RA=new WeakMap,Eme=new WeakMap;var _s=(()=>(function(c){c[c.ExcludeBuffers=1]="ExcludeBuffers",c[c.IncludeAnonymous=2]="IncludeAnonymous",c[c.IgnoreMounts=4]="IgnoreMounts",c[c.IgnoreOverlays=8]="IgnoreOverlays"}(_s||(_s={})),_s))();class Vs{constructor(a,l,h,d,f){if(this.type=a,this.children=l,this.positions=h,this.length=d,this.props=null,f&&f.length){this.props=Object.create(null);for(let[p,g]of f)this.props["number"==typeof p?p:p.id]=g}}toString(){let a=this.prop(Xi.mounted);if(a&&!a.overlay)return a.tree.toString();let l="";for(let h of this.children){let d=h.toString();d&&(l&&(l+=","),l+=d)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(l.length?"("+l+")":""):l}cursor(a=0){return new _O(this.topNode,a)}cursorAt(a,l=0,h=0){let d=RA.get(this)||this.topNode,f=new _O(d);return f.moveTo(a,l),RA.set(this,f._tree),f}get topNode(){return new Iu(this,0,0,null)}resolve(a,l=0){let h=H1(RA.get(this)||this.topNode,a,l,!1);return RA.set(this,h),h}resolveInner(a,l=0){let h=H1(Eme.get(this)||this.topNode,a,l,!0);return Eme.set(this,h),h}iterate(a){let{enter:l,leave:h,from:d=0,to:f=this.length}=a;for(let p=this.cursor((a.mode||0)|_s.IncludeAnonymous);;){let g=!1;if(p.from<=f&&p.to>=d&&(p.type.isAnonymous||!1!==l(p))){if(p.firstChild())continue;g=!0}for(;g&&h&&!p.type.isAnonymous&&h(p),!p.nextSibling();){if(!p.parent())return;g=!0}}}prop(a){return a.perNode?this.props?this.props[a.id]:void 0:this.type.prop(a)}get propValues(){let a=[];if(this.props)for(let l in this.props)a.push([+l,this.props[l]]);return a}balance(a={}){return this.children.length<=8?this:PH(Al.none,this.children,this.positions,0,this.children.length,0,this.length,(l,h,d)=>new Vs(this.type,l,h,d,this.propValues),a.makeTree||((l,h,d)=>new Vs(Al.none,l,h,d)))}static build(a){return function klt(c){var a;let{buffer:l,nodeSet:h,maxBufferLength:d=Mme,reused:f=[],minRepeatType:p=h.types.length}=c,g=Array.isArray(l)?new AH(l,l.length):l,m=h.types,v=0,y=0;function _(k,E,P,V,I){let{id:U,start:$,end:H,size:J}=g,ee=y;for(;J<0;){if(g.next(),-1==J)return P.push(f[U]),void V.push($-k);if(-3==J)return void(v=U);if(-4==J)return void(y=U);throw new RangeError(`Unrecognized record size: ${J}`)}let G,W,B=m[U],j=$-k;if(H-$<=d&&(W=function w(k,E){let P=g.fork(),V=0,I=0,U=0,$=P.end-d,H={size:0,start:0,skip:0};e:for(let J=P.pos-k;P.pos>J;){let ee=P.size;if(P.id==E&&ee>=0){H.size=V,H.start=I,H.skip=U,U+=4,V+=4,P.next();continue}let B=P.pos-ee;if(ee<0||B<J||P.start<$)break;let G=P.id>=p?4:0,W=P.start;for(P.next();P.pos>B;){if(P.size<0){if(-3!=P.size)break e;G+=4}else P.id>=p&&(G+=4);P.next()}I=W,V+=ee,U+=G}return(E<0||V==k)&&(H.size=V,H.start=I,H.skip=U),H.size>4?H:void 0}(g.pos-E,I))){let Q=new Uint16Array(W.size-W.skip),X=g.pos-W.size,Y=Q.length;for(;g.pos>X;)Y=O(W.start,Q,Y);G=new X0(Q,H-W.start,h),j=W.start-k}else{let Q=g.pos-J;g.next();let X=[],Y=[],ne=U>=p?U:-1,re=0,fe=H;for(;g.pos>Q;)ne>=0&&g.id==ne&&g.size>=0?(g.end<=fe-d&&(C(X,Y,$,re,g.end,fe,ne,ee),re=X.length,fe=g.end),g.next()):_($,Q,X,Y,ne);if(ne>=0&&re>0&&re<X.length&&C(X,Y,$,re,$,fe,ne,ee),X.reverse(),Y.reverse(),ne>-1&&re>0){let de=function b(k){return(E,P,V)=>{let $,H,I=0,U=E.length-1;if(U>=0&&($=E[U])instanceof Vs){if(!U&&$.type==k&&$.length==V)return $;(H=$.prop(Xi.lookAhead))&&(I=P[U]+$.length+H)}return x(k,E,P,V,I)}}(B);G=PH(B,X,Y,0,X.length,0,H-$,de,de)}else G=x(B,X,Y,H-$,ee-H)}P.push(G),V.push(j)}function C(k,E,P,V,I,U,$,H){let J=[],ee=[];for(;k.length>V;)J.push(k.pop()),ee.push(E.pop()+P-I);k.push(x(h.types[$],J,ee,U-I,H-U)),E.push(I-P)}function x(k,E,P,V,I=0,U){if(v){let $=[Xi.contextHash,v];U=U?[$].concat(U):[$]}if(I>25){let $=[Xi.lookAhead,I];U=U?[$].concat(U):[$]}return new Vs(k,E,P,V,U)}function O(k,E,P){let{id:V,start:I,end:U,size:$}=g;if(g.next(),$>=0&&V<p){let H=P;if($>4){let J=g.pos-($-4);for(;g.pos>J;)P=O(k,E,P)}E[--P]=H,E[--P]=U-k,E[--P]=I-k,E[--P]=V}else-3==$?v=V:-4==$&&(y=V);return P}let D=[],T=[];for(;g.pos>0;)_(c.start||0,c.bufferStart||0,D,T,-1);let M=null!==(a=c.length)&&void 0!==a?a:D.length?T[0]+D[0].length:0;return new Vs(m[c.topID],D.reverse(),T.reverse(),M)}(a)}}Vs.empty=new Vs(Al.none,[],[],0);class AH{constructor(a,l){this.buffer=a,this.index=l}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new AH(this.buffer,this.index)}}class X0{constructor(a,l,h){this.buffer=a,this.length=l,this.set=h}get type(){return Al.none}toString(){let a=[];for(let l=0;l<this.buffer.length;)a.push(this.childString(l)),l=this.buffer[l+3];return a.join(",")}childString(a){let h=this.buffer[a+3],d=this.set.types[this.buffer[a]],f=d.name;if(/\W/.test(f)&&!d.isError&&(f=JSON.stringify(f)),h==(a+=4))return f;let p=[];for(;a<h;)p.push(this.childString(a)),a=this.buffer[a+3];return f+"("+p.join(",")+")"}findChild(a,l,h,d,f){let{buffer:p}=this,g=-1;for(let m=a;m!=l&&!(Ame(f,d,p[m+1],p[m+2])&&(g=m,h>0));m=p[m+3]);return g}slice(a,l,h){let d=this.buffer,f=new Uint16Array(l-a),p=0;for(let g=a,m=0;g<l;){f[m++]=d[g++],f[m++]=d[g++]-h;let v=f[m++]=d[g++]-h;f[m++]=d[g++]-a,p=Math.max(p,v)}return new X0(f,p,this.set)}}function Ame(c,a,l,h){switch(c){case-2:return l<a;case-1:return h>=a&&l<a;case 0:return l<a&&h>a;case 1:return l<=a&&h>a;case 2:return h>a;case 4:return!0}}function Ime(c,a){let l=c.childBefore(a);for(;l;){let h=l.lastChild;if(!h||h.to!=l.to)break;h.type.isError&&h.from==h.to?(c=l,l=h.prevSibling):l=h}return c}function H1(c,a,l,h){for(var d;c.from==c.to||(l<1?c.from>=a:c.from>a)||(l>-1?c.to<=a:c.to<a);){let p=!h&&c instanceof Iu&&c.index<0?null:c.parent;if(!p)return c;c=p}let f=h?0:_s.IgnoreOverlays;if(h)for(let p=c,g=p.parent;g;p=g,g=p.parent)p instanceof Iu&&p.index<0&&(null===(d=g.enter(a,l,f))||void 0===d?void 0:d.from)!=p.from&&(c=g);for(;;){let p=c.enter(a,l,f);if(!p)return c;c=p}}class Iu{constructor(a,l,h,d){this._tree=a,this.from=l,this.index=h,this._parent=d}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(a,l,h,d,f=0){for(let p=this;;){for(let{children:g,positions:m}=p._tree,v=l>0?g.length:-1;a!=v;a+=l){let y=g[a],_=m[a]+p.from;if(Ame(d,h,_,_+y.length))if(y instanceof X0){if(f&_s.ExcludeBuffers)continue;let b=y.findChild(0,y.buffer.length,l,h-_,d);if(b>-1)return new Hd(new Tlt(p,y,a,_),null,b)}else if(f&_s.IncludeAnonymous||!y.type.isAnonymous||IH(y)){let b;if(!(f&_s.IgnoreMounts)&&y.props&&(b=y.prop(Xi.mounted))&&!b.overlay)return new Iu(b.tree,_,a,p);let C=new Iu(y,_,a,p);return f&_s.IncludeAnonymous||!C.type.isAnonymous?C:C.nextChild(l<0?y.children.length-1:0,l,h,d)}}if(f&_s.IncludeAnonymous||!p.type.isAnonymous||(a=p.index>=0?p.index+l:l<0?-1:p._parent._tree.children.length,p=p._parent,!p))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(a){return this.nextChild(0,1,a,2)}childBefore(a){return this.nextChild(this._tree.children.length-1,-1,a,-2)}enter(a,l,h=0){let d;if(!(h&_s.IgnoreOverlays)&&(d=this._tree.prop(Xi.mounted))&&d.overlay){let f=a-this.from;for(let{from:p,to:g}of d.overlay)if((l>0?p<=f:p<f)&&(l<0?g>=f:g>f))return new Iu(d.tree,d.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,a,l,h)}nextSignificantParent(){let a=this;for(;a.type.isAnonymous&&a._parent;)a=a._parent;return a}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(a=0){return new _O(this,a)}get tree(){return this._tree}toTree(){return this._tree}resolve(a,l=0){return H1(this,a,l,!1)}resolveInner(a,l=0){return H1(this,a,l,!0)}enterUnfinishedNodesBefore(a){return Ime(this,a)}getChild(a,l=null,h=null){let d=FA(this,a,l,h);return d.length?d[0]:null}getChildren(a,l=null,h=null){return FA(this,a,l,h)}toString(){return this._tree.toString()}get node(){return this}matchContext(a){return LA(this,a)}}function FA(c,a,l,h){let d=c.cursor(),f=[];if(!d.firstChild())return f;if(null!=l)for(;!d.type.is(l);)if(!d.nextSibling())return f;for(;;){if(null!=h&&d.type.is(h))return f;if(d.type.is(a)&&f.push(d.node),!d.nextSibling())return null==h?f:[]}}function LA(c,a,l=a.length-1){for(let h=c.parent;l>=0;h=h.parent){if(!h)return!1;if(!h.type.isAnonymous){if(a[l]&&a[l]!=h.name)return!1;l--}}return!0}class Tlt{constructor(a,l,h,d){this.parent=a,this.buffer=l,this.index=h,this.start=d}}class Hd{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(a,l,h){this.context=a,this._parent=l,this.index=h,this.type=a.buffer.set.types[a.buffer.buffer[h]]}child(a,l,h){let{buffer:d}=this.context,f=d.findChild(this.index+4,d.buffer[this.index+3],a,l-this.context.start,h);return f<0?null:new Hd(this.context,this,f)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(a){return this.child(1,a,2)}childBefore(a){return this.child(-1,a,-2)}enter(a,l,h=0){if(h&_s.ExcludeBuffers)return null;let{buffer:d}=this.context,f=d.findChild(this.index+4,d.buffer[this.index+3],l>0?1:-1,a-this.context.start,l);return f<0?null:new Hd(this.context,this,f)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(a){return this._parent?null:this.context.parent.nextChild(this.context.index+a,a,0,4)}get nextSibling(){let{buffer:a}=this.context,l=a.buffer[this.index+3];return l<(this._parent?a.buffer[this._parent.index+3]:a.buffer.length)?new Hd(this.context,this._parent,l):this.externalSibling(1)}get prevSibling(){let{buffer:a}=this.context,l=this._parent?this._parent.index+4:0;return this.index==l?this.externalSibling(-1):new Hd(this.context,this._parent,a.findChild(l,this.index,-1,0,4))}cursor(a=0){return new _O(this,a)}get tree(){return null}toTree(){let a=[],l=[],{buffer:h}=this.context,d=this.index+4,f=h.buffer[this.index+3];return f>d&&(a.push(h.slice(d,f,h.buffer[this.index+1])),l.push(0)),new Vs(this.type,a,l,this.to-this.from)}resolve(a,l=0){return H1(this,a,l,!1)}resolveInner(a,l=0){return H1(this,a,l,!0)}enterUnfinishedNodesBefore(a){return Ime(this,a)}toString(){return this.context.buffer.childString(this.index)}getChild(a,l=null,h=null){let d=FA(this,a,l,h);return d.length?d[0]:null}getChildren(a,l=null,h=null){return FA(this,a,l,h)}get node(){return this}matchContext(a){return LA(this,a)}}class _O{get name(){return this.type.name}constructor(a,l=0){if(this.mode=l,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,a instanceof Iu)this.yieldNode(a);else{this._tree=a.context.parent,this.buffer=a.context;for(let h=a._parent;h;h=h._parent)this.stack.unshift(h.index);this.bufferNode=a,this.yieldBuf(a.index)}}yieldNode(a){return!!a&&(this._tree=a,this.type=a.type,this.from=a.from,this.to=a.to,!0)}yieldBuf(a,l){this.index=a;let{start:h,buffer:d}=this.buffer;return this.type=l||d.set.types[d.buffer[a]],this.from=h+d.buffer[a+1],this.to=h+d.buffer[a+2],!0}yield(a){return!!a&&(a instanceof Iu?(this.buffer=null,this.yieldNode(a)):(this.buffer=a.context,this.yieldBuf(a.index,a.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(a,l,h){if(!this.buffer)return this.yield(this._tree.nextChild(a<0?this._tree._tree.children.length-1:0,a,l,h,this.mode));let{buffer:d}=this.buffer,f=d.findChild(this.index+4,d.buffer[this.index+3],a,l-this.buffer.start,h);return!(f<0)&&(this.stack.push(this.index),this.yieldBuf(f))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(a){return this.enterChild(1,a,2)}childBefore(a){return this.enterChild(-1,a,-2)}enter(a,l,h=this.mode){return this.buffer?!(h&_s.ExcludeBuffers)&&this.enterChild(1,a,l):this.yield(this._tree.enter(a,l,h))}parent(){if(!this.buffer)return this.yieldNode(this.mode&_s.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let a=this.mode&_s.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(a)}sibling(a){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+a,a,0,4,this.mode));let{buffer:l}=this.buffer,h=this.stack.length-1;if(a<0){let d=h<0?0:this.stack[h]+4;if(this.index!=d)return this.yieldBuf(l.findChild(d,this.index,-1,0,4))}else{let d=l.buffer[this.index+3];if(d<(h<0?l.buffer.length:l.buffer[this.stack[h]+3]))return this.yieldBuf(d)}return h<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+a,a,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(a){let l,h,{buffer:d}=this;if(d){if(a>0){if(this.index<d.buffer.buffer.length)return!1}else for(let f=0;f<this.index;f++)if(d.buffer.buffer[f+3]<this.index)return!1;({index:l,parent:h}=d)}else({index:l,_parent:h}=this._tree);for(;h;({index:l,_parent:h}=h))if(l>-1)for(let f=l+a,p=a<0?-1:h._tree.children.length;f!=p;f+=a){let g=h._tree.children[f];if(this.mode&_s.IncludeAnonymous||g instanceof X0||!g.type.isAnonymous||IH(g))return!1}return!0}move(a,l){if(l&&this.enterChild(a,0,4))return!0;for(;;){if(this.sibling(a))return!0;if(this.atLastNode(a)||!this.parent())return!1}}next(a=!0){return this.move(1,a)}prev(a=!0){return this.move(-1,a)}moveTo(a,l=0){for(;(this.from==this.to||(l<1?this.from>=a:this.from>a)||(l>-1?this.to<=a:this.to<a))&&this.parent(););for(;this.enterChild(1,a,l););return this}get node(){if(!this.buffer)return this._tree;let a=this.bufferNode,l=null,h=0;if(a&&a.context==this.buffer)e:for(let d=this.index,f=this.stack.length;f>=0;){for(let p=a;p;p=p._parent)if(p.index==d){if(d==this.index)return p;l=p,h=f+1;break e}d=this.stack[--f]}for(let d=h;d<this.stack.length;d++)l=new Hd(this.buffer,l,this.stack[d]);return this.bufferNode=new Hd(this.buffer,l,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(a,l){for(let h=0;;){let d=!1;if(this.type.isAnonymous||!1!==a(this)){if(this.firstChild()){h++;continue}this.type.isAnonymous||(d=!0)}for(;d&&l&&l(this),d=this.type.isAnonymous,!this.nextSibling();){if(!h)return;this.parent(),h--,d=!0}}}matchContext(a){if(!this.buffer)return LA(this.node,a);let{buffer:l}=this.buffer,{types:h}=l.set;for(let d=a.length-1,f=this.stack.length-1;d>=0;f--){if(f<0)return LA(this.node,a,d);let p=h[l.buffer[this.stack[f]]];if(!p.isAnonymous){if(a[d]&&a[d]!=p.name)return!1;d--}}return!0}}function IH(c){return c.children.some(a=>a instanceof X0||!a.type.isAnonymous||IH(a))}const Pme=new WeakMap;function NA(c,a){if(!c.isAnonymous||a instanceof X0||a.type!=c)return 1;let l=Pme.get(a);if(null==l){l=1;for(let h of a.children){if(h.type!=c||!(h instanceof Vs)){l=1;break}l+=NA(c,h)}Pme.set(a,l)}return l}function PH(c,a,l,h,d,f,p,g,m){let v=0;for(let x=h;x<d;x++)v+=NA(c,a[x]);let y=Math.ceil(1.5*v/8),_=[],b=[];return function C(x,w,O,D,T){for(let M=O;M<D;){let k=M,E=w[M],P=NA(c,x[M]);for(M++;M<D;M++){let V=NA(c,x[M]);if(P+V>=y)break;P+=V}if(M==k+1){if(P>y){let V=x[k];C(V.children,V.positions,0,V.children.length,w[k]+T);continue}_.push(x[k])}else _.push(PH(c,x,w,k,M,E,w[M-1]+x[M-1].length-E,null,m));b.push(E+T-f)}}(a,l,h,d,0),(g||m)(_,b,p)}class hp{constructor(a,l,h,d,f=!1,p=!1){this.from=a,this.to=l,this.tree=h,this.offset=d,this.open=(f?1:0)|(p?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(a,l=[],h=!1){let d=[new hp(0,a.length,a,0,!1,h)];for(let f of l)f.to>a.length&&d.push(f);return d}static applyChanges(a,l,h=128){if(!l.length)return a;let d=[],f=1,p=a.length?a[0]:null;for(let g=0,m=0,v=0;;g++){let y=g<l.length?l[g]:null,_=y?y.fromA:1e9;if(_-m>=h)for(;p&&p.from<_;){let b=p;if(m>=b.from||_<=b.to||v){let C=Math.max(b.from,m)-v,x=Math.min(b.to,_)-v;b=C>=x?null:new hp(C,x,b.tree,b.offset+v,g>0,!!y)}if(b&&d.push(b),p.to>_)break;p=f<a.length?a[f++]:null}if(!y)break;m=y.toA,v=y.toA-y.toB}return d}}class Rme{startParse(a,l,h){return"string"==typeof a&&(a=new Elt(a)),h=h?h.length?h.map(d=>new Au(d.from,d.to)):[new Au(0,0)]:[new Au(0,a.length)],this.createParse(a,l||[],h)}parse(a,l,h){let d=this.startParse(a,l,h);for(;;){let f=d.advance();if(f)return f}}}class Elt{constructor(a){this.string=a}get length(){return this.string.length}chunk(a){return this.string.slice(a)}get lineChunks(){return!1}read(a,l){return this.string.slice(a,l)}}new Xi({perNode:!0});let Nlt=0;class $d{constructor(a,l,h){this.set=a,this.base=l,this.modified=h,this.id=Nlt++}static define(a){if(a?.base)throw new Error("Can not derive from a modified tag");let l=new $d([],null,[]);if(l.set.push(l),a)for(let h of a.set)l.set.push(h);return l}static defineModifier(){let a=new BA;return l=>l.modified.indexOf(a)>-1?l:BA.get(l.base||l,l.modified.concat(a).sort((h,d)=>h.id-d.id))}}let Blt=0;class BA{constructor(){this.instances=[],this.id=Blt++}static get(a,l){if(!l.length)return a;let h=l[0].instances.find(g=>g.base==a&&function Vlt(c,a){return c.length==a.length&&c.every((l,h)=>l==a[h])}(l,g.modified));if(h)return h;let d=[],f=new $d(d,a,l);for(let g of l)g.instances.push(f);let p=function Ult(c){let a=[[]];for(let l=0;l<c.length;l++)for(let h=0,d=a.length;h<d;h++)a.push(a[h].concat(c[l]));return a.sort((l,h)=>h.length-l.length)}(l);for(let g of a.set)if(!g.modified.length)for(let m of p)d.push(BA.get(g,m));return f}}function Ume(c){let a=Object.create(null);for(let l in c){let h=c[l];Array.isArray(h)||(h=[h]);for(let d of l.split(" "))if(d){let f=[],p=2,g=d;for(let _=0;;){if("..."==g&&_>0&&_+3==d.length){p=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(g);if(!b)throw new RangeError("Invalid path: "+d);if(f.push("*"==b[0]?"":'"'==b[0][0]?JSON.parse(b[0]):b[0]),_+=b[0].length,_==d.length)break;let C=d[_++];if(_==d.length&&"!"==C){p=0;break}if("/"!=C)throw new RangeError("Invalid path: "+d);g=d.slice(_)}let m=f.length-1,v=f[m];if(!v)throw new RangeError("Invalid path: "+d);let y=new VA(h,p,m>0?f.slice(0,m):null);a[v]=y.sort(a[v])}}return zme.add(a)}const zme=new Xi;class VA{constructor(a,l,h,d){this.tags=a,this.mode=l,this.context=h,this.next=d}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(a){return!a||a.depth<this.depth?(this.next=a,this):(a.next=this.sort(a.next),a)}get depth(){return this.context?this.context.length:0}}function Hme(c,a){let l=Object.create(null);for(let f of c)if(Array.isArray(f.tag))for(let p of f.tag)l[p.id]=f.class;else l[f.tag.id]=f.class;let{scope:h,all:d=null}=a||{};return{style:f=>{let p=d;for(let g of f)for(let m of g.set){let v=l[m.id];if(v){p=p?p+" "+v:v;break}}return p},scope:h}}function Hlt(c,a,l,h=0,d=c.length){let f=new $lt(h,Array.isArray(a)?a:[a],l);f.highlightRange(c.cursor(),h,d,"",f.highlighters),f.flush(d)}VA.empty=new VA([],2,null);class $lt{constructor(a,l,h){this.at=a,this.highlighters=l,this.span=h,this.class=""}startSpan(a,l){l!=this.class&&(this.flush(a),a>this.at&&(this.at=a),this.class=l)}flush(a){a>this.at&&this.class&&this.span(this.at,a,this.class)}highlightRange(a,l,h,d,f){let{type:p,from:g,to:m}=a;if(g>=h||m<=l)return;p.isTop&&(f=this.highlighters.filter(C=>!C.scope||C.scope(p)));let v=d,y=function Wlt(c){let a=c.type.prop(zme);for(;a&&a.context&&!c.matchContext(a.context);)a=a.next;return a||null}(a)||VA.empty,_=function zlt(c,a){let l=null;for(let h of c){let d=h.style(a);d&&(l=l?l+" "+d:d)}return l}(f,y.tags);if(_&&(v&&(v+=" "),v+=_,1==y.mode&&(d+=(d?" ":"")+_)),this.startSpan(a.from,v),y.opaque)return;let b=a.tree&&a.tree.prop(Xi.mounted);if(b&&b.overlay){let C=a.node.enter(b.overlay[0].from+g,1),x=this.highlighters.filter(O=>!O.scope||O.scope(b.tree.type)),w=a.firstChild();for(let O=0,D=g;;O++){let T=O<b.overlay.length?b.overlay[O]:null,M=T?T.from+g:m,k=Math.max(l,D),E=Math.min(h,M);if(k<E&&w)for(;a.from<E&&(this.highlightRange(a,k,E,d,f),this.startSpan(Math.min(E,a.to),v),!(a.to>=M)&&a.nextSibling()););if(!T||M>h)break;D=T.to+g,D>l&&(this.highlightRange(C.cursor(),Math.max(l,T.from+g),Math.min(h,D),d,x),this.startSpan(D,v))}w&&a.parent()}else if(a.firstChild()){do{if(!(a.to<=l)){if(a.from>=h)break;this.highlightRange(a,l,h,d,f),this.startSpan(Math.min(h,a.to),v)}}while(a.nextSibling());a.parent()}}}const un=$d.define,UA=un(),Bg=un(),$me=un(Bg),Wme=un(Bg),Vg=un(),zA=un(Vg),FH=un(Vg),Wd=un(),Y0=un(Wd),Gd=un(),Qd=un(),LH=un(),bO=un(LH),HA=un(),Te={comment:UA,lineComment:un(UA),blockComment:un(UA),docComment:un(UA),name:Bg,variableName:un(Bg),typeName:$me,tagName:un($me),propertyName:Wme,attributeName:un(Wme),className:un(Bg),labelName:un(Bg),namespace:un(Bg),macroName:un(Bg),literal:Vg,string:zA,docString:un(zA),character:un(zA),attributeValue:un(zA),number:FH,integer:un(FH),float:un(FH),bool:un(Vg),regexp:un(Vg),escape:un(Vg),color:un(Vg),url:un(Vg),keyword:Gd,self:un(Gd),null:un(Gd),atom:un(Gd),unit:un(Gd),modifier:un(Gd),operatorKeyword:un(Gd),controlKeyword:un(Gd),definitionKeyword:un(Gd),moduleKeyword:un(Gd),operator:Qd,derefOperator:un(Qd),arithmeticOperator:un(Qd),logicOperator:un(Qd),bitwiseOperator:un(Qd),compareOperator:un(Qd),updateOperator:un(Qd),definitionOperator:un(Qd),typeOperator:un(Qd),controlOperator:un(Qd),punctuation:LH,separator:un(LH),bracket:bO,angleBracket:un(bO),squareBracket:un(bO),paren:un(bO),brace:un(bO),content:Wd,heading:Y0,heading1:un(Y0),heading2:un(Y0),heading3:un(Y0),heading4:un(Y0),heading5:un(Y0),heading6:un(Y0),contentSeparator:un(Wd),list:un(Wd),quote:un(Wd),emphasis:un(Wd),strong:un(Wd),link:un(Wd),monospace:un(Wd),strikethrough:un(Wd),inserted:un(),deleted:un(),changed:un(),invalid:un(),meta:HA,documentMeta:un(HA),annotation:un(HA),processingInstruction:un(HA),definition:$d.defineModifier(),constant:$d.defineModifier(),function:$d.defineModifier(),standard:$d.defineModifier(),local:$d.defineModifier(),special:$d.defineModifier()};var NH;Hme([{tag:Te.link,class:"tok-link"},{tag:Te.heading,class:"tok-heading"},{tag:Te.emphasis,class:"tok-emphasis"},{tag:Te.strong,class:"tok-strong"},{tag:Te.keyword,class:"tok-keyword"},{tag:Te.atom,class:"tok-atom"},{tag:Te.bool,class:"tok-bool"},{tag:Te.url,class:"tok-url"},{tag:Te.labelName,class:"tok-labelName"},{tag:Te.inserted,class:"tok-inserted"},{tag:Te.deleted,class:"tok-deleted"},{tag:Te.literal,class:"tok-literal"},{tag:Te.string,class:"tok-string"},{tag:Te.number,class:"tok-number"},{tag:[Te.regexp,Te.escape,Te.special(Te.string)],class:"tok-string2"},{tag:Te.variableName,class:"tok-variableName"},{tag:Te.local(Te.variableName),class:"tok-variableName tok-local"},{tag:Te.definition(Te.variableName),class:"tok-variableName tok-definition"},{tag:Te.special(Te.variableName),class:"tok-variableName2"},{tag:Te.definition(Te.propertyName),class:"tok-propertyName tok-definition"},{tag:Te.typeName,class:"tok-typeName"},{tag:Te.namespace,class:"tok-namespace"},{tag:Te.className,class:"tok-className"},{tag:Te.macroName,class:"tok-macroName"},{tag:Te.propertyName,class:"tok-propertyName"},{tag:Te.operator,class:"tok-operator"},{tag:Te.comment,class:"tok-comment"},{tag:Te.meta,class:"tok-meta"},{tag:Te.invalid,class:"tok-invalid"},{tag:Te.punctuation,class:"tok-punctuation"}]);const K0=new Xi;const Glt=new Xi;let Pu=(()=>{class c{constructor(l,h,d=[],f=""){this.data=l,this.name=f,Ml.prototype.hasOwnProperty("tree")||Object.defineProperty(Ml.prototype,"tree",{get(){return wo(this)}}),this.parser=h,this.extension=[Ug.of(this),Ml.languageData.of((p,g,m)=>{let v=Qme(p,g,m),y=v.type.prop(K0);if(!y)return[];let _=p.facet(y),b=v.type.prop(Glt);if(b){let C=v.resolve(g-v.from,m);for(let x of b)if(x.test(C,p)){let w=p.facet(x.facet);return"replace"==x.type?w:w.concat(_)}}return _})].concat(d)}isActiveAt(l,h,d=-1){return Qme(l,h,d).type.prop(K0)==this.data}findRegions(l){let h=l.facet(Ug);if(h?.data==this.data)return[{from:0,to:l.doc.length}];if(!h||!h.allowsNesting)return[];let d=[],f=(p,g)=>{if(p.prop(K0)==this.data)return void d.push({from:g,to:g+p.length});let m=p.prop(Xi.mounted);if(m){if(m.tree.prop(K0)==this.data){if(m.overlay)for(let v of m.overlay)d.push({from:v.from+g,to:v.to+g});else d.push({from:g,to:g+p.length});return}if(m.overlay){let v=d.length;if(f(m.tree,m.overlay[0].from+g),d.length>v)return}}for(let v=0;v<p.children.length;v++){let y=p.children[v];y instanceof Vs&&f(y,p.positions[v]+g)}};return f(wo(l),0),d}get allowsNesting(){return!0}}return c.setState=rr.define(),c})();function Qme(c,a,l){let h=c.facet(Ug),d=wo(c).topNode;if(!h||h.allowsNesting)for(let f=d;f;f=f.enter(a,l,_s.ExcludeBuffers))f.type.isTop&&(d=f);return d}class $A extends Pu{constructor(a,l,h){super(a,l,[],h),this.parser=l}static define(a){let l=function Gme(c){return Vn.define({combine:c?a=>a.concat(c):void 0})}(a.languageData);return new $A(l,a.parser.configure({props:[K0.add(h=>h.isTop?l:void 0)]}),a.name)}configure(a,l){return new $A(this.data,this.parser.configure(a),l||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function wo(c){let a=c.field(Pu.state,!1);return a?a.tree:Vs.empty}class jlt{constructor(a){this.doc=a,this.cursorPos=0,this.string="",this.cursor=a.iter()}get length(){return this.doc.length}syncTo(a){return this.string=this.cursor.next(a-this.cursorPos).value,this.cursorPos=a+this.string.length,this.cursorPos-this.string.length}chunk(a){return this.syncTo(a),this.string}get lineChunks(){return!0}read(a,l){let h=this.cursorPos-this.string.length;return a<h||l>=this.cursorPos?this.doc.sliceString(a,l):this.string.slice(a-h,l-h)}}let CO=null;class $1{constructor(a,l,h=[],d,f,p,g,m){this.parser=a,this.state=l,this.fragments=h,this.tree=d,this.treeLen=f,this.viewport=p,this.skipped=g,this.scheduleOn=m,this.parse=null,this.tempSkipped=[]}static create(a,l,h){return new $1(a,l,[],Vs.empty,0,h,[],null)}startParse(){return this.parser.startParse(new jlt(this.state.doc),this.fragments)}work(a,l){return null!=l&&l>=this.state.doc.length&&(l=void 0),this.tree!=Vs.empty&&this.isDone(l??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var h;if("number"==typeof a){let d=Date.now()+a;a=()=>Date.now()>d}for(this.parse||(this.parse=this.startParse()),null!=l&&(null==this.parse.stoppedAt||this.parse.stoppedAt>l)&&l<this.state.doc.length&&this.parse.stopAt(l);;){let d=this.parse.advance();if(d){if(this.fragments=this.withoutTempSkipped(hp.addTree(d,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(h=this.parse.stoppedAt)&&void 0!==h?h:this.state.doc.length,this.tree=d,this.parse=null,!(this.treeLen<(l??this.state.doc.length)))return!0;this.parse=this.startParse()}if(a())return!1}})}takeTree(){let a,l;this.parse&&(a=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>a)&&this.parse.stopAt(a),this.withContext(()=>{for(;!(l=this.parse.advance()););}),this.treeLen=a,this.tree=l,this.fragments=this.withoutTempSkipped(hp.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(a){let l=CO;CO=this;try{return a()}finally{CO=l}}withoutTempSkipped(a){for(let l;l=this.tempSkipped.pop();)a=jme(a,l.from,l.to);return a}changes(a,l){let{fragments:h,tree:d,treeLen:f,viewport:p,skipped:g}=this;if(this.takeTree(),!a.empty){let m=[];if(a.iterChangedRanges((v,y,_,b)=>m.push({fromA:v,toA:y,fromB:_,toB:b})),h=hp.applyChanges(h,m),d=Vs.empty,f=0,p={from:a.mapPos(p.from,-1),to:a.mapPos(p.to,1)},this.skipped.length){g=[];for(let v of this.skipped){let y=a.mapPos(v.from,1),_=a.mapPos(v.to,-1);y<_&&g.push({from:y,to:_})}}}return new $1(this.parser,l,h,d,f,p,g,this.scheduleOn)}updateViewport(a){if(this.viewport.from==a.from&&this.viewport.to==a.to)return!1;this.viewport=a;let l=this.skipped.length;for(let h=0;h<this.skipped.length;h++){let{from:d,to:f}=this.skipped[h];d<a.to&&f>a.from&&(this.fragments=jme(this.fragments,d,f),this.skipped.splice(h--,1))}return!(this.skipped.length>=l||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(a,l){this.skipped.push({from:a,to:l})}static getSkippingParser(a){return new class extends Rme{createParse(l,h,d){let f=d[0].from,p=d[d.length-1].to;return{parsedPos:f,advance(){let m=CO;if(m){for(let v of d)m.tempSkipped.push(v);a&&(m.scheduleOn=m.scheduleOn?Promise.all([m.scheduleOn,a]):a)}return this.parsedPos=p,new Vs(Al.none,[],[],p-f)},stoppedAt:null,stopAt(){}}}}}isDone(a){a=Math.min(a,this.state.doc.length);let l=this.fragments;return this.treeLen>=a&&l.length&&0==l[0].from&&l[0].to>=a}static get(){return CO}}function jme(c,a,l){return hp.applyChanges(c,[{fromA:a,toA:l,fromB:a,toB:l}])}class W1{constructor(a){this.context=a,this.tree=a.tree}apply(a){if(!a.docChanged&&this.tree==this.context.tree)return this;let l=this.context.changes(a.changes,a.state),h=this.context.treeLen==a.startState.doc.length?void 0:Math.max(a.changes.mapPos(this.context.treeLen),l.viewport.to);return l.work(20,h)||l.takeTree(),new W1(l)}static init(a){let l=Math.min(3e3,a.doc.length),h=$1.create(a.facet(Ug).parser,a,{from:0,to:l});return h.work(20,l)||h.takeTree(),new W1(h)}}Pu.state=xo.define({create:W1.init,update(c,a){for(let l of a.effects)if(l.is(Pu.setState))return l.value;return a.startState.facet(Ug)!=a.state.facet(Ug)?W1.init(a.state):c.apply(a)}});let Zme=c=>{let a=setTimeout(()=>c(),500);return()=>clearTimeout(a)};typeof requestIdleCallback<"u"&&(Zme=c=>{let a=-1,l=setTimeout(()=>{a=requestIdleCallback(c,{timeout:400})},100);return()=>a<0?clearTimeout(l):cancelIdleCallback(a)});const BH=typeof navigator<"u"&&null!==(NH=navigator.scheduling)&&void 0!==NH&&NH.isInputPending?()=>navigator.scheduling.isInputPending():null,qme=Js.fromClass(class{constructor(a){this.view=a,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(a){let l=this.view.state.field(Pu.state).context;(l.updateViewport(a.view.viewport)||this.view.viewport.to>l.treeLen)&&this.scheduleWork(),a.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(l)}scheduleWork(){if(this.working)return;let{state:a}=this.view,l=a.field(Pu.state);(l.tree!=l.context.tree||!l.context.isDone(a.doc.length))&&(this.working=Zme(this.work))}work(a){this.working=null;let l=Date.now();if(this.chunkEnd<l&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=l+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:h,viewport:{to:d}}=this.view,f=h.field(Pu.state);if(f.tree==f.context.tree&&f.context.isDone(d+1e5))return;let p=Date.now()+Math.min(this.chunkBudget,100,a&&!BH?Math.max(25,a.timeRemaining()-5):1e9),g=f.context.treeLen<d&&h.doc.length>d+1e3,m=f.context.work(()=>BH&&BH()||Date.now()>p,d+(g?0:1e5));this.chunkBudget-=Date.now()-l,(m||this.chunkBudget<=0)&&(f.context.takeTree(),this.view.dispatch({effects:Pu.setState.of(new W1(f.context))})),this.chunkBudget>0&&!(m&&!g)&&this.scheduleWork(),this.checkAsyncSchedule(f.context)}checkAsyncSchedule(a){a.scheduleOn&&(this.workScheduled++,a.scheduleOn.then(()=>this.scheduleWork()).catch(l=>Uc(this.view.state,l)).then(()=>this.workScheduled--),a.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ug=Vn.define({combine:c=>c.length?c[0]:null,enables:c=>[Pu.state,qme,Ii.contentAttributes.compute([c],a=>{let l=a.facet(c);return l&&l.name?{"data-language":l.name}:{}})]});class Zlt{constructor(a,l=[]){this.language=a,this.support=l,this.extension=[a,l]}}const Yme=Vn.define(),WA=Vn.define({combine:c=>{if(!c.length)return"  ";let a=c[0];if(!a||/\S/.test(a)||Array.from(a).some(l=>l!=a[0]))throw new Error("Invalid indent unit: "+JSON.stringify(c[0]));return a}});function J0(c){let a=c.facet(WA);return 9==a.charCodeAt(0)?c.tabSize*a.length:a.length}function G1(c,a){let l="",h=c.tabSize,d=c.facet(WA)[0];if("\t"==d){for(;a>=h;)l+="\t",a-=h;d=" "}for(let f=0;f<a;f++)l+=d;return l}function GA(c,a){c instanceof Ml&&(c=new SO(c));for(let h of c.state.facet(Yme)){let d=h(c,a);if(void 0!==d)return d}let l=wo(c.state);return l?function qlt(c,a,l){return Jme(a.resolveInner(l).enterUnfinishedNodesBefore(l),l,c)}(c,l,a):null}class SO{constructor(a,l={}){this.state=a,this.options=l,this.unit=J0(a)}lineAt(a,l=1){let h=this.state.doc.lineAt(a),{simulateBreak:d,simulateDoubleBreak:f}=this.options;return null!=d&&d>=h.from&&d<=h.to?f&&d==a?{text:"",from:a}:(l<0?d<a:d<=a)?{text:h.text.slice(d-h.from),from:d}:{text:h.text.slice(0,d-h.from),from:h.from}:h}textAfterPos(a,l=1){if(this.options.simulateDoubleBreak&&a==this.options.simulateBreak)return"";let{text:h,from:d}=this.lineAt(a,l);return h.slice(a-d,Math.min(h.length,a+100-d))}column(a,l=1){let{text:h,from:d}=this.lineAt(a,l),f=this.countColumn(h,a-d),p=this.options.overrideIndentation?this.options.overrideIndentation(d):-1;return p>-1&&(f+=p-this.countColumn(h,h.search(/\S|$/))),f}countColumn(a,l=a.length){return iO(a,this.state.tabSize,l)}lineIndent(a,l=1){let{text:h,from:d}=this.lineAt(a,l),f=this.options.overrideIndentation;if(f){let p=f(d);if(p>-1)return p}return this.countColumn(h,h.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Kme=new Xi;function Ylt(c){let a=c.type.prop(Kme);if(a)return a;let h,l=c.firstChild;if(l&&(h=l.type.prop(Xi.closedBy))){let d=c.lastChild,f=d&&h.indexOf(d.name)>-1;return p=>e0e(p,!0,1,void 0,f&&!function Xlt(c){return c.pos==c.options.simulateBreak&&c.options.simulateDoubleBreak}(p)?d.from:void 0)}return null==c.parent?Klt:null}function Jme(c,a,l){for(;c;c=c.parent){let h=Ylt(c);if(h)return h(VH.create(l,a,c))}return null}function Klt(){return 0}class VH extends SO{constructor(a,l,h){super(a.state,a.options),this.base=a,this.pos=l,this.node=h}static create(a,l,h){return new VH(a,l,h)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let a=this.state.doc.lineAt(this.node.from);for(;;){let l=this.node.resolve(a.from);for(;l.parent&&l.parent.from==l.from;)l=l.parent;if(Jlt(l,this.node))break;a=this.state.doc.lineAt(l.from)}return this.lineIndent(a.from)}continue(){let a=this.node.parent;return a?Jme(a,this.pos,this.base):0}}function Jlt(c,a){for(let l=a;l;l=l.parent)if(c==l)return!0;return!1}function e0e(c,a,l,h,d){let f=c.textAfter,p=f.match(/^\s*/)[0].length,g=h&&f.slice(p,p+h.length)==h||d==c.pos+p,m=a?function ect(c){let a=c.node,l=a.childAfter(a.from),h=a.lastChild;if(!l)return null;let d=c.options.simulateBreak,f=c.state.doc.lineAt(l.from),p=null==d||d<=f.from?f.to:Math.min(f.to,d);for(let g=l.to;;){let m=a.childAfter(g);if(!m||m==h)return null;if(!m.type.isSkipped)return m.from<p?l:null;g=m.to}}(c):null;return m?c.column(g?m.from:m.to):c.baseIndent+(g?0:c.unit*l)}function UH({except:c,units:a=1}={}){return l=>{let h=c&&c.test(l.textAfter);return l.baseIndent+(h?0:a*l.unit)}}const sct=Vn.define(),t0e=new Xi;function lct(c){let a=c.lastChild;return a&&a.to==c.to&&a.type.isError}function xO(c,a,l){for(let h of c.facet(sct)){let d=h(c,a,l);if(d)return d}return function act(c,a,l){let h=wo(c);if(h.length<l)return null;let f=null;for(let p=h.resolveInner(l,1);p;p=p.parent){if(p.to<=l||p.from>l)continue;if(f&&p.from<a)break;let g=p.type.prop(t0e);if(g&&(p.to<h.length-50||h.length==c.doc.length||!lct(p))){let m=g(p,c);m&&m.from<=l&&m.from>=a&&m.to>l&&(f=m)}}return f}(c,a,l)}function n0e(c,a){let l=a.mapPos(c.from,1),h=a.mapPos(c.to,-1);return l>=h?void 0:{from:l,to:h}}const wO=rr.define({map:n0e}),Q1=rr.define({map:n0e});function zH(c){let a=[];for(let{head:l}of c.state.selection.ranges)a.some(h=>h.from<=l&&h.to>=l)||a.push(c.lineBlockAt(l));return a}const zg=xo.define({create:()=>Gn.none,update(c,a){c=c.map(a.changes);for(let l of a.effects)l.is(wO)&&!cct(c,l.value.from,l.value.to)?c=c.update({add:[s0e.range(l.value.from,l.value.to)]}):l.is(Q1)&&(c=c.update({filter:(h,d)=>l.value.from!=h||l.value.to!=d,filterFrom:l.value.from,filterTo:l.value.to}));if(a.selection){let l=!1,{head:h}=a.selection.main;c.between(h,h,(d,f)=>{d<h&&f>h&&(l=!0)}),l&&(c=c.update({filterFrom:h,filterTo:h,filter:(d,f)=>f<=h||d>=h}))}return c},provide:c=>Ii.decorations.from(c),toJSON(c,a){let l=[];return c.between(0,a.doc.length,(h,d)=>{l.push(h,d)}),l},fromJSON(c){if(!Array.isArray(c)||c.length%2)throw new RangeError("Invalid JSON for fold state");let a=[];for(let l=0;l<c.length;){let h=c[l++],d=c[l++];if("number"!=typeof h||"number"!=typeof d)throw new RangeError("Invalid JSON for fold state");a.push(s0e.range(h,d))}return Gn.set(a,!0)}});function OO(c,a,l){var h;let d=null;return null===(h=c.field(zg,!1))||void 0===h||h.between(a,l,(f,p)=>{(!d||d.from>f)&&(d={from:f,to:p})}),d}function cct(c,a,l){let h=!1;return c.between(a,a,(d,f)=>{d==a&&f==l&&(h=!0)}),h}function HH(c,a){return c.field(zg,!1)?a:a.concat(rr.appendConfig.of(r0e()))}function QA(c,a,l=!0){let h=c.state.doc.lineAt(a.from).number,d=c.state.doc.lineAt(a.to).number;return Ii.announce.of(`${c.state.phrase(l?"Folded lines":"Unfolded lines")} ${h} ${c.state.phrase("to")} ${d}.`)}const gct=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:c=>{for(let a of zH(c)){let l=xO(c.state,a.from,a.to);if(l)return c.dispatch({effects:HH(c.state,[wO.of(l),QA(c,l)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:c=>{if(!c.state.field(zg,!1))return!1;let a=[];for(let l of zH(c)){let h=OO(c.state,l.from,l.to);h&&a.push(Q1.of(h),QA(c,h,!1))}return a.length&&c.dispatch({effects:a}),a.length>0}},{key:"Ctrl-Alt-[",run:c=>{let{state:a}=c,l=[];for(let h=0;h<a.doc.length;){let d=c.lineBlockAt(h),f=xO(a,d.from,d.to);f&&l.push(wO.of(f)),h=(f?c.lineBlockAt(f.to):d).to+1}return l.length&&c.dispatch({effects:HH(c.state,l)}),!!l.length}},{key:"Ctrl-Alt-]",run:c=>{let a=c.state.field(zg,!1);if(!a||!a.size)return!1;let l=[];return a.between(0,c.state.doc.length,(h,d)=>{l.push(Q1.of({from:h,to:d}))}),c.dispatch({effects:l}),!0}}],mct={placeholderDOM:null,placeholderText:"\u2026"},i0e=Vn.define({combine:c=>Mh(c,mct)});function r0e(c){let a=[zg,_ct];return c&&a.push(i0e.of(c)),a}const s0e=Gn.replace({widget:new class extends cp{toDOM(c){let{state:a}=c,l=a.facet(i0e),h=f=>{let p=c.lineBlockAt(c.posAtDOM(f.target)),g=OO(c.state,p.from,p.to);g&&c.dispatch({effects:Q1.of(g)}),f.preventDefault()};if(l.placeholderDOM)return l.placeholderDOM(c,h);let d=document.createElement("span");return d.textContent=l.placeholderText,d.setAttribute("aria-label",a.phrase("folded code")),d.title=a.phrase("unfold"),d.className="cm-foldPlaceholder",d.onclick=h,d}}}),vct={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class $H extends zd{constructor(a,l){super(),this.config=a,this.open=l}eq(a){return this.config==a.config&&this.open==a.open}toDOM(a){if(this.config.markerDOM)return this.config.markerDOM(this.open);let l=document.createElement("span");return l.textContent=this.open?this.config.openText:this.config.closedText,l.title=a.state.phrase(this.open?"Fold line":"Unfold line"),l}}function yct(c={}){let a=Object.assign(Object.assign({},vct),c),l=new $H(a,!0),h=new $H(a,!1),d=Js.fromClass(class{constructor(p){this.from=p.viewport.from,this.markers=this.buildMarkers(p)}update(p){(p.docChanged||p.viewportChanged||p.startState.facet(Ug)!=p.state.facet(Ug)||p.startState.field(zg,!1)!=p.state.field(zg,!1)||wo(p.startState)!=wo(p.state)||a.foldingChanged(p))&&(this.markers=this.buildMarkers(p.view))}buildMarkers(p){let g=new Ag;for(let m of p.viewportLineBlocks){let v=OO(p.state,m.from,m.to)?h:xO(p.state,m.from,m.to)?l:null;v&&g.add(m.from,m.from,v)}return g.finish()}}),{domEventHandlers:f}=a;return[d,bme({class:"cm-foldGutter",markers(p){var g;return(null===(g=p.plugin(d))||void 0===g?void 0:g.markers)||Ls.empty},initialSpacer:()=>new $H(a,!1),domEventHandlers:Object.assign(Object.assign({},f),{click:(p,g,m)=>{if(f.click&&f.click(p,g,m))return!0;let v=OO(p.state,g.from,g.to);if(v)return p.dispatch({effects:Q1.of(v)}),!0;let y=xO(p.state,g.from,g.to);return!!y&&(p.dispatch({effects:wO.of(y)}),!0)}})}),r0e()]}const _ct=Ii.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class j1{constructor(a,l){let h;function d(g){let m=Ig.newName();return(h||(h=Object.create(null)))["."+m]=g,m}this.specs=a;const f="string"==typeof l.all?l.all:l.all?d(l.all):void 0,p=l.scope;this.scope=p instanceof Pu?g=>g.prop(K0)==p.data:p?g=>g==p:void 0,this.style=Hme(a.map(g=>({tag:g.tag,class:g.class||d(Object.assign({},g,{tag:null}))})),{all:f}).style,this.module=h?new Ig(h):null,this.themeType=l.themeType}static define(a,l){return new j1(a,l||{})}}const WH=Vn.define(),o0e=Vn.define({combine:c=>c.length?[c[0]]:null});function jA(c){let a=c.facet(WH);return a.length?a:c.facet(o0e)}function DO(c,a){let h,l=[Cct];return c instanceof j1&&(c.module&&l.push(Ii.styleModule.of(c.module)),h=c.themeType),l.push(a?.fallback?o0e.of(c):h?WH.computeN([Ii.darkTheme],d=>d.facet(Ii.darkTheme)==("dark"==h)?[c]:[]):WH.of(c)),l}class bct{constructor(a){this.markCache=Object.create(null),this.tree=wo(a.state),this.decorations=this.buildDeco(a,jA(a.state))}update(a){let l=wo(a.state),h=jA(a.state),d=h!=jA(a.startState);l.length<a.view.viewport.to&&!d&&l.type==this.tree.type?this.decorations=this.decorations.map(a.changes):(l!=this.tree||a.viewportChanged||d)&&(this.tree=l,this.decorations=this.buildDeco(a.view,h))}buildDeco(a,l){if(!l||!this.tree.length)return Gn.none;let h=new Ag;for(let{from:d,to:f}of a.visibleRanges)Hlt(this.tree,l,(p,g,m)=>{h.add(p,g,this.markCache[m]||(this.markCache[m]=Gn.mark({class:m})))},d,f);return h.finish()}}const Cct=G0.high(Js.fromClass(bct,{decorations:c=>c.decorations})),Sct=j1.define([{tag:Te.meta,color:"#404740"},{tag:Te.link,textDecoration:"underline"},{tag:Te.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Te.emphasis,fontStyle:"italic"},{tag:Te.strong,fontWeight:"bold"},{tag:Te.strikethrough,textDecoration:"line-through"},{tag:Te.keyword,color:"#708"},{tag:[Te.atom,Te.bool,Te.url,Te.contentSeparator,Te.labelName],color:"#219"},{tag:[Te.literal,Te.inserted],color:"#164"},{tag:[Te.string,Te.deleted],color:"#a11"},{tag:[Te.regexp,Te.escape,Te.special(Te.string)],color:"#e40"},{tag:Te.definition(Te.variableName),color:"#00f"},{tag:Te.local(Te.variableName),color:"#30a"},{tag:[Te.typeName,Te.namespace],color:"#085"},{tag:Te.className,color:"#167"},{tag:[Te.special(Te.variableName),Te.macroName],color:"#256"},{tag:Te.definition(Te.propertyName),color:"#00c"},{tag:Te.comment,color:"#940"},{tag:Te.invalid,color:"#f00"}]),xct=Ii.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),c0e=Vn.define({combine:c=>Mh(c,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4,renderMatch:Dct})}),wct=Gn.mark({class:"cm-matchingBracket"}),Oct=Gn.mark({class:"cm-nonmatchingBracket"});function Dct(c){let a=[],l=c.matched?wct:Oct;return a.push(l.range(c.start.from,c.start.to)),c.end&&a.push(l.range(c.end.from,c.end.to)),a}const Tct=[xo.define({create:()=>Gn.none,update(c,a){if(!a.docChanged&&!a.selection)return c;let l=[],h=a.state.facet(c0e);for(let d of a.state.selection.ranges){if(!d.empty)continue;let f=jd(a.state,d.head,-1,h)||d.head>0&&jd(a.state,d.head-1,1,h)||h.afterCursor&&(jd(a.state,d.head,1,h)||d.head<a.state.doc.length&&jd(a.state,d.head+1,-1,h));f&&(l=l.concat(h.renderMatch(f,a.state)))}return Gn.set(l,!0)},provide:c=>Ii.decorations.from(c)}),xct];function kct(c={}){return[c0e.of(c),Tct]}const Mct=new Xi;function GH(c,a,l){let h=c.prop(a<0?Xi.openedBy:Xi.closedBy);if(h)return h;if(1==c.name.length){let d=l.indexOf(c.name);if(d>-1&&d%2==(a<0?1:0))return[l[d+a]]}return null}function QH(c){let a=c.type.prop(Mct);return a?a(c.node):c}function jd(c,a,l,h={}){let d=h.maxScanDistance||1e4,f=h.brackets||"()[]{}",p=wo(c),g=p.resolveInner(a,l);for(let m=g;m;m=m.parent){let v=GH(m.type,l,f);if(v&&m.from<m.to){let y=QH(m);if(y&&(l>0?a>=y.from&&a<y.to:a>y.from&&a<=y.to))return Ect(0,0,l,m,y,v,f)}}return function Act(c,a,l,h,d,f,p){let g=l<0?c.sliceDoc(a-1,a):c.sliceDoc(a,a+1),m=p.indexOf(g);if(m<0||m%2==0!=l>0)return null;let v={from:l<0?a-1:a,to:l>0?a+1:a},y=c.doc.iterRange(a,l>0?c.doc.length:0),_=0;for(let b=0;!y.next().done&&b<=f;){let C=y.value;l<0&&(b+=C.length);let x=a+b*l;for(let w=l>0?0:C.length-1,O=l>0?C.length:-1;w!=O;w+=l){let D=p.indexOf(C[w]);if(!(D<0||h.resolveInner(x+w,1).type!=d))if(D%2==0==l>0)_++;else{if(1==_)return{start:v,end:{from:x+w,to:x+w+1},matched:D>>1==m>>1};_--}}l>0&&(b+=C.length)}return y.done?{start:v,matched:!1}:null}(c,a,l,p,g.type,d,f)}function Ect(c,a,l,h,d,f,p){let m={from:d.from,to:d.to},v=0,y=h.parent?.cursor();if(y&&(l<0?y.childBefore(h.from):y.childAfter(h.to)))do{if(l<0?y.to<=h.from:y.from>=h.to){if(0==v&&f.indexOf(y.type.name)>-1&&y.from<y.to){let _=QH(y);return{start:m,end:_?{from:_.from,to:_.to}:void 0,matched:!0}}if(GH(y.type,l,p))v++;else if(GH(y.type,-l,p)){if(0==v){let _=QH(y);return{start:m,end:_&&_.from<_.to?{from:_.from,to:_.to}:void 0,matched:!1}}v--}}}while(l<0?y.prevSibling():y.nextSibling());return{start:m,matched:!1}}const ZH=Object.create(null),TO=[Al.none],m0e=[],v0e=Object.create(null);for(let[c,a]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])v0e[c]=_0e(ZH,a);function qH(c,a){m0e.indexOf(c)>-1||(m0e.push(c),console.warn(a))}function _0e(c,a){let l=null;for(let f of a.split(".")){let p=c[f]||Te[f];p?"function"==typeof p?l?l=p(l):qH(f,`Modifier ${f} used at start of tag`):l?qH(f,`Tag ${f} used as modifier`):l=p:qH(f,`Unknown highlighting tag ${f}`)}if(!l)return 0;let h=a.replace(/ /g,"_"),d=Al.define({id:TO.length,name:h,props:[Ume({[h]:l})]});return TO.push(d),d.id}function XH(c,a){return({state:l,dispatch:h})=>{if(l.readOnly)return!1;let d=c(a,l);return!!d&&(h(l.update(d)),!0)}}const Uct=XH(Gct,0),zct=XH(b0e,0),Hct=XH((c,a)=>b0e(c,a,function Wct(c){let a=[];for(let l of c.selection.ranges){let h=c.doc.lineAt(l.from),d=l.to<=h.to?h:c.doc.lineAt(l.to),f=a.length-1;f>=0&&a[f].to>h.from?a[f].to=d.to:a.push({from:h.from,to:d.to})}return a}(a)),0);function YH(c,a){let l=c.languageDataAt("commentTokens",a);return l.length?l[0]:{}}function b0e(c,a,l=a.selection.ranges){let h=l.map(f=>YH(a,f.from).block);if(!h.every(f=>f))return null;let d=l.map((f,p)=>function $ct(c,{open:a,close:l},h,d){let y,_,f=c.sliceDoc(h-50,h),p=c.sliceDoc(d,d+50),g=/\s*$/.exec(f)[0].length,m=/^\s*/.exec(p)[0].length,v=f.length-g;if(f.slice(v-a.length,v)==a&&p.slice(m,m+l.length)==l)return{open:{pos:h-g,margin:g&&1},close:{pos:d+m,margin:m&&1}};d-h<=100?y=_=c.sliceDoc(h,d):(y=c.sliceDoc(h,h+50),_=c.sliceDoc(d-50,d));let b=/^\s*/.exec(y)[0].length,C=/\s*$/.exec(_)[0].length,x=_.length-C-l.length;return y.slice(b,b+a.length)==a&&_.slice(x,x+l.length)==l?{open:{pos:h+b+a.length,margin:/\s/.test(y.charAt(b+a.length))?1:0},close:{pos:d-C-l.length,margin:/\s/.test(_.charAt(x-1))?1:0}}:null}(a,h[p],f.from,f.to));if(2!=c&&!d.every(f=>f))return{changes:a.changes(l.map((f,p)=>d[p]?[]:[{from:f.from,insert:h[p].open+" "},{from:f.to,insert:" "+h[p].close}]))};if(1!=c&&d.some(f=>f)){let f=[];for(let g,p=0;p<d.length;p++)if(g=d[p]){let m=h[p],{open:v,close:y}=g;f.push({from:v.pos-m.open.length,to:v.pos+v.margin},{from:y.pos-y.margin,to:y.pos+m.close.length})}return{changes:f}}return null}function Gct(c,a,l=a.selection.ranges){let h=[],d=-1;for(let{from:f,to:p}of l){let g=h.length,m=1e9;for(let v=f;v<=p;){let y=a.doc.lineAt(v);if(y.from>d&&(f==p||p>y.from)){d=y.from;let _=YH(a,y.from).line;if(!_)continue;let b=/^\s*/.exec(y.text)[0].length,C=b==y.length,x=y.text.slice(b,b+_.length)==_?b:-1;b<y.text.length&&b<m&&(m=b),h.push({line:y,comment:x,token:_,indent:b,empty:C,single:!1})}v=y.to+1}if(m<1e9)for(let v=g;v<h.length;v++)h[v].indent<h[v].line.text.length&&(h[v].indent=m);h.length==g+1&&(h[g].single=!0)}if(2!=c&&h.some(f=>f.comment<0&&(!f.empty||f.single))){let f=[];for(let{line:g,token:m,indent:v,empty:y,single:_}of h)(_||!y)&&f.push({from:g.from+v,insert:m+" "});let p=a.changes(f);return{changes:p,selection:a.selection.map(p,1)}}if(1!=c&&h.some(f=>f.comment>=0)){let f=[];for(let{line:p,comment:g,token:m}of h)if(g>=0){let v=p.from+g,y=v+m.length;" "==p.text[y-p.from]&&y++,f.push({from:v,to:y})}return{changes:f}}return null}const KH=lp.define(),Qct=lp.define(),jct=Vn.define(),C0e=Vn.define({combine:c=>Mh(c,{minDepth:100,newGroupDelay:500,joinToEvent:(a,l)=>l},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(a,l)=>(h,d)=>a(h,d)||l(h,d)})}),JH=xo.define({create:()=>n$.empty,update(c,a){let l=a.state.facet(C0e),h=a.annotation(KH);if(h){let m=a.docChanged?It.single(function Zct(c){let a=0;return c.iterChangedRanges((l,h)=>a=h),a}(a.changes)):void 0,v=sc.fromTransaction(a,m),y=h.side,_=0==y?c.undone:c.done;return _=v?qA(_,_.length,l.minDepth,v):w0e(_,a.startState.selection),new n$(0==y?h.rest:_,0==y?_:h.rest)}let d=a.annotation(Qct);if(("full"==d||"before"==d)&&(c=c.isolate()),!1===a.annotation(Bd.addToHistory))return a.changes.empty?c:c.addMapping(a.changes.desc);let f=sc.fromTransaction(a),p=a.annotation(Bd.time),g=a.annotation(Bd.userEvent);return f?c=c.addChanges(f,p,g,l,a):a.selection&&(c=c.addSelection(a.startState.selection,p,g,l.newGroupDelay)),("full"==d||"after"==d)&&(c=c.isolate()),c},toJSON:c=>({done:c.done.map(a=>a.toJSON()),undone:c.undone.map(a=>a.toJSON())}),fromJSON:c=>new n$(c.done.map(sc.fromJSON),c.undone.map(sc.fromJSON))});function qct(c={}){return[JH,C0e.of(c),Ii.domEventHandlers({beforeinput(a,l){let h="historyUndo"==a.inputType?S0e:"historyRedo"==a.inputType?e$:null;return!!h&&(a.preventDefault(),h(l))}})]}function ZA(c,a){return function({state:l,dispatch:h}){if(!a&&l.readOnly)return!1;let d=l.field(JH,!1);if(!d)return!1;let f=d.pop(c,l,a);return!!f&&(h(f),!0)}}const S0e=ZA(0,!1),e$=ZA(1,!1),Xct=ZA(0,!0),Yct=ZA(1,!0);class sc{constructor(a,l,h,d,f){this.changes=a,this.effects=l,this.mapped=h,this.startSelection=d,this.selectionsAfter=f}setSelAfter(a){return new sc(this.changes,this.effects,this.mapped,this.startSelection,a)}toJSON(){var a,l,h;return{changes:null===(a=this.changes)||void 0===a?void 0:a.toJSON(),mapped:null===(l=this.mapped)||void 0===l?void 0:l.toJSON(),startSelection:null===(h=this.startSelection)||void 0===h?void 0:h.toJSON(),selectionsAfter:this.selectionsAfter.map(d=>d.toJSON())}}static fromJSON(a){return new sc(a.changes&&Go.fromJSON(a.changes),[],a.mapped&&Nd.fromJSON(a.mapped),a.startSelection&&It.fromJSON(a.startSelection),a.selectionsAfter.map(It.fromJSON))}static fromTransaction(a,l){let h=Ru;for(let d of a.startState.facet(jct)){let f=d(a);f.length&&(h=h.concat(f))}return!h.length&&a.changes.empty?null:new sc(a.changes.invert(a.startState.doc),h,void 0,l||a.startState.selection,Ru)}static selection(a){return new sc(void 0,Ru,void 0,void 0,a)}}function qA(c,a,l,h){let f=c.slice(a+1>l+20?a-l-1:0,a);return f.push(h),f}function x0e(c,a){return c.length?a.length?c.concat(a):c:a}const Ru=[];function w0e(c,a){if(c.length){let l=c[c.length-1],h=l.selectionsAfter.slice(Math.max(0,l.selectionsAfter.length-200));return h.length&&h[h.length-1].eq(a)?c:(h.push(a),qA(c,c.length-1,1e9,l.setSelAfter(h)))}return[sc.selection([a])]}function tut(c){let a=c[c.length-1],l=c.slice();return l[c.length-1]=a.setSelAfter(a.selectionsAfter.slice(0,a.selectionsAfter.length-1)),l}function t$(c,a){if(!c.length)return c;let l=c.length,h=Ru;for(;l;){let d=nut(c[l-1],a,h);if(d.changes&&!d.changes.empty||d.effects.length){let f=c.slice(0,l);return f[l-1]=d,f}a=d.mapped,l--,h=d.selectionsAfter}return h.length?[sc.selection(h)]:Ru}function nut(c,a,l){let h=x0e(c.selectionsAfter.length?c.selectionsAfter.map(g=>g.map(a)):Ru,l);if(!c.changes)return sc.selection(h);let d=c.changes.map(a),f=a.mapDesc(c.changes,!0),p=c.mapped?c.mapped.composeDesc(f):f;return new sc(d,rr.mapEffects(c.effects,a),p,c.startSelection.map(f),h)}const iut=/^(input\.type|delete)($|\.)/;let n$=(()=>{class c{constructor(l,h,d=0,f){this.done=l,this.undone=h,this.prevTime=d,this.prevUserEvent=f}isolate(){return this.prevTime?new c(this.done,this.undone):this}addChanges(l,h,d,f,p){let g=this.done,m=g[g.length-1];return g=m&&m.changes&&!m.changes.empty&&l.changes&&(!d||iut.test(d))&&(!m.selectionsAfter.length&&h-this.prevTime<f.newGroupDelay&&f.joinToEvent(p,function Kct(c,a){let l=[],h=!1;return c.iterChangedRanges((d,f)=>l.push(d,f)),a.iterChangedRanges((d,f,p,g)=>{for(let m=0;m<l.length;){let v=l[m++],y=l[m++];g>=v&&p<=y&&(h=!0)}}),h}(m.changes,l.changes))||"input.type.compose"==d)?qA(g,g.length-1,f.minDepth,new sc(l.changes.compose(m.changes),x0e(l.effects,m.effects),m.mapped,m.startSelection,Ru)):qA(g,g.length,f.minDepth,l),new c(g,Ru,h,d)}addSelection(l,h,d,f){let p=this.done.length?this.done[this.done.length-1].selectionsAfter:Ru;return p.length>0&&h-this.prevTime<f&&d==this.prevUserEvent&&d&&/^select($|\.)/.test(d)&&function Jct(c,a){return c.ranges.length==a.ranges.length&&0===c.ranges.filter((l,h)=>l.empty!=a.ranges[h].empty).length}(p[p.length-1],l)?this:new c(w0e(this.done,l),this.undone,h,d)}addMapping(l){return new c(t$(this.done,l),t$(this.undone,l),this.prevTime,this.prevUserEvent)}pop(l,h,d){let f=0==l?this.done:this.undone;if(0==f.length)return null;let p=f[f.length-1];if(d&&p.selectionsAfter.length)return h.update({selection:p.selectionsAfter[p.selectionsAfter.length-1],annotations:KH.of({side:l,rest:tut(f)}),userEvent:0==l?"select.undo":"select.redo",scrollIntoView:!0});if(p.changes){let g=1==f.length?Ru:f.slice(0,f.length-1);return p.mapped&&(g=t$(g,p.mapped)),h.update({changes:p.changes,selection:p.startSelection,effects:p.effects,annotations:KH.of({side:l,rest:g}),filter:!1,userEvent:0==l?"undo":"redo",scrollIntoView:!0})}return null}}return c.empty=new c(Ru,Ru),c})();const rut=[{key:"Mod-z",run:S0e,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:e$,preventDefault:!0},{linux:"Ctrl-Shift-z",run:e$,preventDefault:!0},{key:"Mod-u",run:Xct,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Yct,preventDefault:!0}];function Z1(c,a){return It.create(c.ranges.map(a),c.mainIndex)}function Zd(c,a){return c.update({selection:a,scrollIntoView:!0,userEvent:"select"})}function Fu({state:c,dispatch:a},l){let h=Z1(c.selection,l);return!h.eq(c.selection)&&(a(Zd(c,h)),!0)}function MO(c,a){return It.cursor(a?c.to:c.from)}function XA(c,a){return Fu(c,l=>l.empty?c.moveByChar(l,a):MO(l,a))}function ja(c){return c.textDirectionAt(c.state.selection.main.head)==Ns.LTR}const O0e=c=>XA(c,!ja(c)),D0e=c=>XA(c,ja(c));function YA(c,a){return Fu(c,l=>l.empty?c.moveByGroup(l,a):MO(l,a))}function aut(c,a,l){if(a.type.prop(l))return!0;let h=a.to-a.from;return h&&(h>2||/[^\s,.;:]/.test(c.sliceDoc(a.from,a.to)))||a.firstChild}function KA(c,a,l){let p,g,h=wo(c).resolveInner(a.head),d=l?Xi.closedBy:Xi.openedBy;for(let m=a.head;;){let v=l?h.childAfter(m):h.childBefore(m);if(!v)break;aut(c,v,d)?h=v:m=l?v.to:v.from}return g=h.type.prop(d)&&(p=l?jd(c,h.from,1):jd(c,h.to,-1))&&p.matched?l?p.end.to:p.end.from:l?h.to:h.from,It.cursor(g,l?-1:1)}function M0e(c,a){return Fu(c,l=>{if(!l.empty)return MO(l,a);let h=c.moveVertically(l,a);return h.head!=l.head?h:c.moveToLineBoundary(l,a)})}const E0e=c=>M0e(c,!1),A0e=c=>M0e(c,!0);function I0e(c){let d,a=c.scrollDOM.clientHeight<c.scrollDOM.scrollHeight-2,l=0,h=0;if(a){for(let f of c.state.facet(Ii.scrollMargins)){let p=f(c);p?.top&&(l=Math.max(p?.top,l)),p?.bottom&&(h=Math.max(p?.bottom,h))}d=c.scrollDOM.clientHeight-l-h}else d=(c.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:l,marginBottom:h,selfScroll:a,height:Math.max(c.defaultLineHeight,d-5)}}function P0e(c,a){let f,l=I0e(c),{state:h}=c,d=Z1(h.selection,p=>p.empty?c.moveVertically(p,a,l.height):MO(p,a));if(d.eq(h.selection))return!1;if(l.selfScroll){let p=c.coordsAtPos(h.selection.main.head),g=c.scrollDOM.getBoundingClientRect(),m=g.top+l.marginTop;p&&p.top>m&&p.bottom<g.bottom-l.marginBottom&&(f=Ii.scrollIntoView(d.main.head,{y:"start",yMargin:p.top-m}))}return c.dispatch(Zd(h,d),{effects:f}),!0}const R0e=c=>P0e(c,!1),i$=c=>P0e(c,!0);function Hg(c,a,l){let h=c.lineBlockAt(a.head),d=c.moveToLineBoundary(a,l);if(d.head==a.head&&d.head!=(l?h.to:h.from)&&(d=c.moveToLineBoundary(a,l,!1)),!l&&d.head==h.from&&h.length){let f=/^\s*/.exec(c.state.sliceDoc(h.from,Math.min(h.from+100,h.to)))[0].length;f&&a.head!=h.from+f&&(d=It.cursor(h.from+f))}return d}function Hc(c,a){let l=Z1(c.state.selection,h=>{let d=a(h);return It.range(h.anchor,d.head,d.goalColumn,d.bidiLevel||void 0)});return!l.eq(c.state.selection)&&(c.dispatch(Zd(c.state,l)),!0)}function JA(c,a){return Hc(c,l=>c.moveByChar(l,a))}const L0e=c=>JA(c,!ja(c)),N0e=c=>JA(c,ja(c));function e3(c,a){return Hc(c,l=>c.moveByGroup(l,a))}function V0e(c,a){return Hc(c,l=>c.moveVertically(l,a))}const U0e=c=>V0e(c,!1),z0e=c=>V0e(c,!0);function H0e(c,a){return Hc(c,l=>c.moveVertically(l,a,I0e(c).height))}const $0e=c=>H0e(c,!1),W0e=c=>H0e(c,!0),G0e=({state:c,dispatch:a})=>(a(Zd(c,{anchor:0})),!0),Q0e=({state:c,dispatch:a})=>(a(Zd(c,{anchor:c.doc.length})),!0),j0e=({state:c,dispatch:a})=>(a(Zd(c,{anchor:c.selection.main.anchor,head:0})),!0),Z0e=({state:c,dispatch:a})=>(a(Zd(c,{anchor:c.selection.main.anchor,head:c.doc.length})),!0);function t3(c,a){if(c.state.readOnly)return!1;let l="delete.selection",{state:h}=c,d=h.changeByRange(f=>{let{from:p,to:g}=f;if(p==g){let m=a(p);m<p?(l="delete.backward",m=n3(c,m,!1)):m>p&&(l="delete.forward",m=n3(c,m,!0)),p=Math.min(p,m),g=Math.max(g,m)}else p=n3(c,p,!1),g=n3(c,g,!0);return p==g?{range:f}:{changes:{from:p,to:g},range:It.cursor(p)}});return!d.changes.empty&&(c.dispatch(h.update(d,{scrollIntoView:!0,userEvent:l,effects:"delete.selection"==l?Ii.announce.of(h.phrase("Selection deleted")):void 0})),!0)}function n3(c,a,l){if(c instanceof Ii)for(let h of c.state.facet(Ii.atomicRanges).map(d=>d(c)))h.between(a,a,(d,f)=>{d<a&&f>a&&(a=l?f:d)});return a}const q0e=(c,a)=>t3(c,l=>{let f,p,{state:h}=c,d=h.doc.lineAt(l);if(!a&&l>d.from&&l<d.from+200&&!/[^ \t]/.test(f=d.text.slice(0,l-d.from))){if("\t"==f[f.length-1])return l-1;let m=iO(f,h.tabSize)%J0(h)||J0(h);for(let v=0;v<m&&" "==f[f.length-1-v];v++)l--;p=l}else p=kl(d.text,l-d.from,a,a)+d.from,p==l&&d.number!=(a?h.doc.lines:1)&&(p+=a?1:-1);return p}),r$=c=>q0e(c,!1),X0e=c=>q0e(c,!0),Y0e=(c,a)=>t3(c,l=>{let h=l,{state:d}=c,f=d.doc.lineAt(h),p=d.charCategorizer(h);for(let g=null;;){if(h==(a?f.to:f.from)){h==l&&f.number!=(a?d.doc.lines:1)&&(h+=a?1:-1);break}let m=kl(f.text,h-f.from,a)+f.from,v=f.text.slice(Math.min(h,m)-f.from,Math.max(h,m)-f.from),y=p(v);if(null!=g&&y!=g)break;(" "!=v||h!=l)&&(g=y),h=m}return h}),K0e=c=>Y0e(c,!1),J0e=c=>t3(c,a=>{let l=c.lineBlockAt(a).to;return a<l?l:Math.min(c.state.doc.length,a+1)});function i3(c){let a=[],l=-1;for(let h of c.selection.ranges){let d=c.doc.lineAt(h.from),f=c.doc.lineAt(h.to);if(!h.empty&&h.to==f.from&&(f=c.doc.lineAt(h.to-1)),l>=d.number){let p=a[a.length-1];p.to=f.to,p.ranges.push(h)}else a.push({from:d.from,to:f.to,ranges:[h]});l=f.number+1}return a}function eve(c,a,l){if(c.readOnly)return!1;let h=[],d=[];for(let f of i3(c)){if(l?f.to==c.doc.length:0==f.from)continue;let p=c.doc.lineAt(l?f.to+1:f.from-1),g=p.length+1;if(l){h.push({from:f.to,to:p.to},{from:f.from,insert:p.text+c.lineBreak});for(let m of f.ranges)d.push(It.range(Math.min(c.doc.length,m.anchor+g),Math.min(c.doc.length,m.head+g)))}else{h.push({from:p.from,to:f.from},{from:f.to,insert:c.lineBreak+p.text});for(let m of f.ranges)d.push(It.range(m.anchor-g,m.head-g))}}return!!h.length&&(a(c.update({changes:h,scrollIntoView:!0,selection:It.create(d,c.selection.mainIndex),userEvent:"move.line"})),!0)}function tve(c,a,l){if(c.readOnly)return!1;let h=[];for(let d of i3(c))h.push(l?{from:d.from,insert:c.doc.slice(d.from,d.to)+c.lineBreak}:{from:d.to,insert:c.lineBreak+c.doc.slice(d.from,d.to)});return a(c.update({changes:h,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const zut=nve(!1),Hut=nve(!0);function nve(c){return({state:a,dispatch:l})=>{if(a.readOnly)return!1;let h=a.changeByRange(d=>{let{from:f,to:p}=d,g=a.doc.lineAt(f),m=!c&&f==p&&function Uut(c,a){if(/\(\)|\[\]|\{\}/.test(c.sliceDoc(a-1,a+1)))return{from:a,to:a};let f,l=wo(c).resolveInner(a),h=l.childBefore(a),d=l.childAfter(a);return h&&d&&h.to<=a&&d.from>=a&&(f=h.type.prop(Xi.closedBy))&&f.indexOf(d.name)>-1&&c.doc.lineAt(h.to).from==c.doc.lineAt(d.from).from?{from:h.to,to:d.from}:null}(a,f);c&&(f=p=(p<=g.to?g:a.doc.lineAt(p)).to);let v=new SO(a,{simulateBreak:f,simulateDoubleBreak:!!m}),y=GA(v,f);for(null==y&&(y=/^\s*/.exec(a.doc.lineAt(f).text)[0].length);p<g.to&&/\s/.test(g.text[p-g.from]);)p++;m?({from:f,to:p}=m):f>g.from&&f<g.from+100&&!/\S/.test(g.text.slice(0,f))&&(f=g.from);let _=["",G1(a,y)];return m&&_.push(G1(a,v.lineIndent(g.from,-1))),{changes:{from:f,to:p,insert:wr.of(_)},range:It.cursor(f+1+_[1].length)}});return l(a.update(h,{scrollIntoView:!0,userEvent:"input"})),!0}}function s$(c,a){let l=-1;return c.changeByRange(h=>{let d=[];for(let p=h.from;p<=h.to;){let g=c.doc.lineAt(p);g.number>l&&(h.empty||h.to>g.from)&&(a(g,d,h),l=g.number),p=g.to+1}let f=c.changes(d);return{changes:d,range:It.range(f.mapPos(h.anchor,1),f.mapPos(h.head,1))}})}const Wut=[{key:"Ctrl-b",run:O0e,shift:L0e,preventDefault:!0},{key:"Ctrl-f",run:D0e,shift:N0e},{key:"Ctrl-p",run:E0e,shift:U0e},{key:"Ctrl-n",run:A0e,shift:z0e},{key:"Ctrl-a",run:c=>Fu(c,a=>It.cursor(c.lineBlockAt(a.head).from,1)),shift:c=>Hc(c,a=>It.cursor(c.lineBlockAt(a.head).from))},{key:"Ctrl-e",run:c=>Fu(c,a=>It.cursor(c.lineBlockAt(a.head).to,-1)),shift:c=>Hc(c,a=>It.cursor(c.lineBlockAt(a.head).to))},{key:"Ctrl-d",run:X0e},{key:"Ctrl-h",run:r$},{key:"Ctrl-k",run:J0e},{key:"Ctrl-Alt-h",run:K0e},{key:"Ctrl-o",run:({state:c,dispatch:a})=>{if(c.readOnly)return!1;let l=c.changeByRange(h=>({changes:{from:h.from,to:h.to,insert:wr.of(["",""])},range:It.cursor(h.from)}));return a(c.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:c,dispatch:a})=>{if(c.readOnly)return!1;let l=c.changeByRange(h=>{if(!h.empty||0==h.from||h.from==c.doc.length)return{range:h};let d=h.from,f=c.doc.lineAt(d),p=d==f.from?d-1:kl(f.text,d-f.from,!1)+f.from,g=d==f.to?d+1:kl(f.text,d-f.from,!0)+f.from;return{changes:{from:p,to:g,insert:c.doc.slice(d,g).append(c.doc.slice(p,d))},range:It.cursor(g)}});return!l.changes.empty&&(a(c.update(l,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:i$}],Gut=[{key:"ArrowLeft",run:O0e,shift:L0e,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:c=>YA(c,!ja(c)),shift:c=>e3(c,!ja(c)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:c=>Fu(c,a=>Hg(c,a,!ja(c))),shift:c=>Hc(c,a=>Hg(c,a,!ja(c))),preventDefault:!0},{key:"ArrowRight",run:D0e,shift:N0e,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:c=>YA(c,ja(c)),shift:c=>e3(c,ja(c)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:c=>Fu(c,a=>Hg(c,a,ja(c))),shift:c=>Hc(c,a=>Hg(c,a,ja(c))),preventDefault:!0},{key:"ArrowUp",run:E0e,shift:U0e,preventDefault:!0},{mac:"Cmd-ArrowUp",run:G0e,shift:j0e},{mac:"Ctrl-ArrowUp",run:R0e,shift:$0e},{key:"ArrowDown",run:A0e,shift:z0e,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Q0e,shift:Z0e},{mac:"Ctrl-ArrowDown",run:i$,shift:W0e},{key:"PageUp",run:R0e,shift:$0e},{key:"PageDown",run:i$,shift:W0e},{key:"Home",run:c=>Fu(c,a=>Hg(c,a,!1)),shift:c=>Hc(c,a=>Hg(c,a,!1)),preventDefault:!0},{key:"Mod-Home",run:G0e,shift:j0e},{key:"End",run:c=>Fu(c,a=>Hg(c,a,!0)),shift:c=>Hc(c,a=>Hg(c,a,!0)),preventDefault:!0},{key:"Mod-End",run:Q0e,shift:Z0e},{key:"Enter",run:zut},{key:"Mod-a",run:({state:c,dispatch:a})=>(a(c.update({selection:{anchor:0,head:c.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:r$,shift:r$},{key:"Delete",run:X0e},{key:"Mod-Backspace",mac:"Alt-Backspace",run:K0e},{key:"Mod-Delete",mac:"Alt-Delete",run:c=>Y0e(c,!0)},{mac:"Mod-Backspace",run:c=>t3(c,a=>{let l=c.lineBlockAt(a).from;return a>l?l:Math.max(0,a-1)})},{mac:"Mod-Delete",run:J0e}].concat(Wut.map(c=>({mac:c.key,run:c.run,shift:c.shift}))),Qut=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:c=>Fu(c,a=>KA(c.state,a,!ja(c))),shift:c=>Hc(c,a=>KA(c.state,a,!ja(c)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:c=>Fu(c,a=>KA(c.state,a,ja(c))),shift:c=>Hc(c,a=>KA(c.state,a,ja(c)))},{key:"Alt-ArrowUp",run:({state:c,dispatch:a})=>eve(c,a,!1)},{key:"Shift-Alt-ArrowUp",run:({state:c,dispatch:a})=>tve(c,a,!1)},{key:"Alt-ArrowDown",run:({state:c,dispatch:a})=>eve(c,a,!0)},{key:"Shift-Alt-ArrowDown",run:({state:c,dispatch:a})=>tve(c,a,!0)},{key:"Escape",run:({state:c,dispatch:a})=>{let l=c.selection,h=null;return l.ranges.length>1?h=It.create([l.main]):l.main.empty||(h=It.create([It.cursor(l.main.head)])),!!h&&(a(Zd(c,h)),!0)}},{key:"Mod-Enter",run:Hut},{key:"Alt-l",mac:"Ctrl-l",run:({state:c,dispatch:a})=>{let l=i3(c).map(({from:h,to:d})=>It.range(h,Math.min(d+1,c.doc.length)));return a(c.update({selection:It.create(l),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:c,dispatch:a})=>{let l=Z1(c.selection,h=>{var d;let f=wo(c).resolveInner(h.head,1);for(;!(f.from<h.from&&f.to>=h.to||f.to>h.to&&f.from<=h.from||null===(d=f.parent)||void 0===d)&&d.parent;)f=f.parent;return It.range(f.to,f.from)});return a(Zd(c,l)),!0},preventDefault:!0},{key:"Mod-[",run:({state:c,dispatch:a})=>!c.readOnly&&(a(c.update(s$(c,(l,h)=>{let d=/^\s*/.exec(l.text)[0];if(!d)return;let f=iO(d,c.tabSize),p=0,g=G1(c,Math.max(0,f-J0(c)));for(;p<d.length&&p<g.length&&d.charCodeAt(p)==g.charCodeAt(p);)p++;h.push({from:l.from+p,to:l.from+d.length,insert:g.slice(p)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:c,dispatch:a})=>!c.readOnly&&(a(c.update(s$(c,(l,h)=>{h.push({from:l.from,insert:c.facet(WA)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:c,dispatch:a})=>{if(c.readOnly)return!1;let l=Object.create(null),h=new SO(c,{overrideIndentation:f=>l[f]??-1}),d=s$(c,(f,p,g)=>{let m=GA(h,f.from);if(null==m)return;/\S/.test(f.text)||(m=0);let v=/^\s*/.exec(f.text)[0],y=G1(c,m);(v!=y||g.from<f.from+v.length)&&(l[f.from]=m,p.push({from:f.from,to:f.from+v.length,insert:y}))});return d.changes.empty||a(c.update(d,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:c=>{if(c.state.readOnly)return!1;let{state:a}=c,l=a.changes(i3(a).map(({from:d,to:f})=>(d>0?d--:f<a.doc.length&&f++,{from:d,to:f}))),h=Z1(a.selection,d=>c.moveVertically(d,!0)).map(l);return c.dispatch({changes:l,selection:h,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:c,dispatch:a})=>function F0e(c,a,l){let h=!1,d=Z1(c.selection,f=>{let p=jd(c,f.head,-1)||jd(c,f.head,1)||f.head>0&&jd(c,f.head-1,1)||f.head<c.doc.length&&jd(c,f.head+1,-1);if(!p||!p.end)return f;h=!0;let g=p.start.from==f.head?p.end.to:p.end.from;return l?It.range(f.anchor,g):It.cursor(g)});return!!h&&(a(Zd(c,d)),!0)}(c,a,!1)},{key:"Mod-/",run:c=>{let{state:a}=c,l=a.doc.lineAt(a.selection.main.head),h=YH(c.state,l.from);return h.line?Uct(c):!!h.block&&Hct(c)}},{key:"Alt-A",run:zct}].concat(Gut);function us(){var c=arguments[0];"string"==typeof c&&(c=document.createElement(c));var a=1,l=arguments[1];if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l)){for(var h in l)if(Object.prototype.hasOwnProperty.call(l,h)){var d=l[h];"string"==typeof d?c.setAttribute(h,d):null!=d&&(c[h]=d)}a++}for(;a<arguments.length;a++)rve(c,arguments[a]);return c}function rve(c,a){if("string"==typeof a)c.appendChild(document.createTextNode(a));else if(null!=a)if(null!=a.nodeType)c.appendChild(a);else{if(!Array.isArray(a))throw new RangeError("Unsupported child node: "+a);for(var l=0;l<a.length;l++)rve(c,a[l])}}const sve="function"==typeof String.prototype.normalize?c=>c.normalize("NFKD"):c=>c;class q1{constructor(a,l,h=0,d=a.length,f,p){this.test=p,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=a.iterRange(h,d),this.bufferStart=h,this.normalize=f?g=>f(sve(g)):sve,this.query=this.normalize(l)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Sa(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let a=this.peek();if(a<0)return this.done=!0,this;let l=M7(a),h=this.bufferStart+this.bufferPos;this.bufferPos+=Eu(a);let d=this.normalize(l);for(let f=0,p=h;;f++){let g=d.charCodeAt(f),m=this.match(g,p);if(m)return this.value=m,this;if(f==d.length-1)break;p==h&&f<l.length&&l.charCodeAt(f)==g&&p++}}}match(a,l){let h=null;for(let d=0;d<this.matches.length;d+=2){let f=this.matches[d],p=!1;this.query.charCodeAt(f)==a&&(f==this.query.length-1?h={from:this.matches[d+1],to:l+1}:(this.matches[d]++,p=!0)),p||(this.matches.splice(d,2),d-=2)}return this.query.charCodeAt(0)==a&&(1==this.query.length?h={from:l,to:l+1}:this.matches.push(1,l)),h&&this.test&&!this.test(h.from,h.to,this.buffer,this.bufferPos)&&(h=null),h}}typeof Symbol<"u"&&(q1.prototype[Symbol.iterator]=function(){return this});const ove={from:-1,to:-1,match:/.*/.exec("")},a$="gm"+(null==/x/.unicode?"":"u");class ave{constructor(a,l,h,d=0,f=a.length){if(this.text=a,this.to=f,this.curLine="",this.done=!1,this.value=ove,/\\[sWDnr]|\n|\r|\[\^/.test(l))return new lve(a,l,h,d,f);this.re=new RegExp(l,a$+(h?.ignoreCase?"i":"")),this.test=h?.test,this.iter=a.iter();let p=a.lineAt(d);this.curLineStart=p.from,this.matchPos=r3(a,d),this.getLine(this.curLineStart)}getLine(a){this.iter.next(a),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let a=this.matchPos-this.curLineStart;;){this.re.lastIndex=a;let l=this.matchPos<=this.to&&this.re.exec(this.curLine);if(l){let h=this.curLineStart+l.index,d=h+l[0].length;if(this.matchPos=r3(this.text,d+(h==d?1:0)),h==this.curLineStart+this.curLine.length&&this.nextLine(),(h<d||h>this.value.to)&&(!this.test||this.test(h,d,l)))return this.value={from:h,to:d,match:l},this;a=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),a=0}}}}const l$=new WeakMap;class X1{constructor(a,l){this.from=a,this.text=l}get to(){return this.from+this.text.length}static get(a,l,h){let d=l$.get(a);if(!d||d.from>=h||d.to<=l){let g=new X1(l,a.sliceString(l,h));return l$.set(a,g),g}if(d.from==l&&d.to==h)return d;let{text:f,from:p}=d;return p>l&&(f=a.sliceString(l,p)+f,p=l),d.to<h&&(f+=a.sliceString(d.to,h)),l$.set(a,new X1(p,f)),new X1(l,f.slice(l-p,h-p))}}class lve{constructor(a,l,h,d,f){this.text=a,this.to=f,this.done=!1,this.value=ove,this.matchPos=r3(a,d),this.re=new RegExp(l,a$+(h?.ignoreCase?"i":"")),this.test=h?.test,this.flat=X1.get(a,d,this.chunkEnd(d+5e3))}chunkEnd(a){return a>=this.to?this.to:this.text.lineAt(a).to}next(){for(;;){let a=this.re.lastIndex=this.matchPos-this.flat.from,l=this.re.exec(this.flat.text);if(l&&!l[0]&&l.index==a&&(this.re.lastIndex=a+1,l=this.re.exec(this.flat.text)),l){let h=this.flat.from+l.index,d=h+l[0].length;if((this.flat.to>=this.to||l.index+l[0].length<=this.flat.text.length-10)&&(!this.test||this.test(h,d,l)))return this.value={from:h,to:d,match:l},this.matchPos=r3(this.text,d+(h==d?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=X1.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function r3(c,a){if(a>=c.length)return a;let h,l=c.lineAt(a);for(;a<l.to&&(h=l.text.charCodeAt(a-l.from))>=56320&&h<57344;)a++;return a}function c$(c){let a=us("input",{class:"cm-textfield",name:"line"});function h(){let d=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(a.value);if(!d)return;let{state:f}=c,p=f.doc.lineAt(f.selection.main.head),[,g,m,v,y]=d,_=v?+v.slice(1):0,b=m?+m:p.number;if(m&&y){let x=b/100;g&&(x=x*("-"==g?-1:1)+p.number/f.doc.lines),b=Math.round(f.doc.lines*x)}else m&&g&&(b=b*("-"==g?-1:1)+p.number);let C=f.doc.line(Math.max(1,Math.min(f.doc.lines,b)));c.dispatch({effects:s3.of(!1),selection:It.cursor(C.from+Math.max(0,Math.min(_,C.length))),scrollIntoView:!0}),c.focus()}return{dom:us("form",{class:"cm-gotoLine",onkeydown:d=>{27==d.keyCode?(d.preventDefault(),c.dispatch({effects:s3.of(!1)}),c.focus()):13==d.keyCode&&(d.preventDefault(),h())},onsubmit:d=>{d.preventDefault(),h()}},us("label",c.state.phrase("Go to line"),": ",a)," ",us("button",{class:"cm-button",type:"submit"},c.state.phrase("go")))}}typeof Symbol<"u"&&(ave.prototype[Symbol.iterator]=lve.prototype[Symbol.iterator]=function(){return this});const s3=rr.define(),cve=xo.define({create:()=>!0,update(c,a){for(let l of a.effects)l.is(s3)&&(c=l.value);return c},provide:c=>vO.from(c,a=>a?c$:null)}),qut=Ii.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Xut={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},uve=Vn.define({combine:c=>Mh(c,Xut,{highlightWordAroundCursor:(a,l)=>a||l,minSelectionLength:Math.min,maxMatches:Math.min})});function Yut(c){let a=[nht,tht];return c&&a.push(uve.of(c)),a}const Kut=Gn.mark({class:"cm-selectionMatch"}),Jut=Gn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function hve(c,a,l,h){return!(0!=l&&c(a.sliceDoc(l-1,l))==Ts.Word||h!=a.doc.length&&c(a.sliceDoc(h,h+1))==Ts.Word)}const tht=Js.fromClass(class{constructor(c){this.decorations=this.getDeco(c)}update(c){(c.selectionSet||c.docChanged||c.viewportChanged)&&(this.decorations=this.getDeco(c.view))}getDeco(c){let a=c.state.facet(uve),{state:l}=c,h=l.selection;if(h.ranges.length>1)return Gn.none;let f,d=h.main,p=null;if(d.empty){if(!a.highlightWordAroundCursor)return Gn.none;let m=l.wordAt(d.head);if(!m)return Gn.none;p=l.charCategorizer(d.head),f=l.sliceDoc(m.from,m.to)}else{let m=d.to-d.from;if(m<a.minSelectionLength||m>200)return Gn.none;if(a.wholeWords){if(f=l.sliceDoc(d.from,d.to),p=l.charCategorizer(d.head),!hve(p,l,d.from,d.to)||!function eht(c,a,l,h){return c(a.sliceDoc(l,l+1))==Ts.Word&&c(a.sliceDoc(h-1,h))==Ts.Word}(p,l,d.from,d.to))return Gn.none}else if(f=l.sliceDoc(d.from,d.to).trim(),!f)return Gn.none}let g=[];for(let m of c.visibleRanges){let v=new q1(l.doc,f,m.from,m.to);for(;!v.next().done;){let{from:y,to:_}=v.value;if((!p||hve(p,l,y,_))&&(d.empty&&y<=d.from&&_>=d.to?g.push(Jut.range(y,_)):(y>=d.to||_<=d.from)&&g.push(Kut.range(y,_)),g.length>a.maxMatches))return Gn.none}}return Gn.set(g)}},{decorations:c=>c.decorations}),nht=Ii.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),o3=Vn.define({combine:c=>Mh(c,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:a=>new vht(a)})});class dve{constructor(a){this.search=a.search,this.caseSensitive=!!a.caseSensitive,this.literal=!!a.literal,this.regexp=!!a.regexp,this.replace=a.replace||"",this.valid=!!this.search&&(!this.regexp||function jut(c){try{return new RegExp(c,a$),!0}catch{return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!a.wholeWord}unquote(a){return this.literal?a:a.replace(/\\([nrt\\])/g,(l,h)=>"n"==h?"\n":"r"==h?"\r":"t"==h?"\t":"\\")}eq(a){return this.search==a.search&&this.replace==a.replace&&this.caseSensitive==a.caseSensitive&&this.regexp==a.regexp&&this.wholeWord==a.wholeWord}create(){return this.regexp?new cht(this):new aht(this)}getCursor(a,l=0,h){let d=a.doc?a:Ml.create({doc:a});return null==h&&(h=d.doc.length),this.regexp?K1(this,d,l,h):Y1(this,d,l,h)}}class fve{constructor(a){this.spec=a}}function Y1(c,a,l,h){return new q1(a.doc,c.unquoted,l,h,c.caseSensitive?void 0:d=>d.toLowerCase(),c.wholeWord?function oht(c,a){return(l,h,d,f)=>((f>l||f+d.length<h)&&(f=Math.max(0,l-2),d=c.sliceString(f,Math.min(c.length,h+2))),!(a(a3(d,l-f))==Ts.Word&&a(l3(d,l-f))==Ts.Word||a(l3(d,h-f))==Ts.Word&&a(a3(d,h-f))==Ts.Word))}(a.doc,a.charCategorizer(a.selection.main.head)):void 0)}class aht extends fve{constructor(a){super(a)}nextMatch(a,l,h){let d=Y1(this.spec,a,h,a.doc.length).nextOverlapping();return d.done&&(d=Y1(this.spec,a,0,l).nextOverlapping()),d.done?null:d.value}prevMatchInRange(a,l,h){for(let d=h;;){let f=Math.max(l,d-1e4-this.spec.unquoted.length),p=Y1(this.spec,a,f,d),g=null;for(;!p.nextOverlapping().done;)g=p.value;if(g)return g;if(f==l)return null;d-=1e4}}prevMatch(a,l,h){return this.prevMatchInRange(a,0,l)||this.prevMatchInRange(a,h,a.doc.length)}getReplacement(a){return this.spec.unquote(this.spec.replace)}matchAll(a,l){let h=Y1(this.spec,a,0,a.doc.length),d=[];for(;!h.next().done;){if(d.length>=l)return null;d.push(h.value)}return d}highlight(a,l,h,d){let f=Y1(this.spec,a,Math.max(0,l-this.spec.unquoted.length),Math.min(h+this.spec.unquoted.length,a.doc.length));for(;!f.next().done;)d(f.value.from,f.value.to)}}function K1(c,a,l,h){return new ave(a.doc,c.search,{ignoreCase:!c.caseSensitive,test:c.wholeWord?lht(a.charCategorizer(a.selection.main.head)):void 0},l,h)}function a3(c,a){return c.slice(kl(c,a,!1),a)}function l3(c,a){return c.slice(a,kl(c,a))}function lht(c){return(a,l,h)=>!h[0].length||(c(a3(h.input,h.index))!=Ts.Word||c(l3(h.input,h.index))!=Ts.Word)&&(c(l3(h.input,h.index+h[0].length))!=Ts.Word||c(a3(h.input,h.index+h[0].length))!=Ts.Word)}class cht extends fve{nextMatch(a,l,h){let d=K1(this.spec,a,h,a.doc.length).next();return d.done&&(d=K1(this.spec,a,0,l).next()),d.done?null:d.value}prevMatchInRange(a,l,h){for(let d=1;;d++){let f=Math.max(l,h-1e4*d),p=K1(this.spec,a,f,h),g=null;for(;!p.next().done;)g=p.value;if(g&&(f==l||g.from>f+10))return g;if(f==l)return null}}prevMatch(a,l,h){return this.prevMatchInRange(a,0,l)||this.prevMatchInRange(a,h,a.doc.length)}getReplacement(a){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(l,h)=>"$"==h?"$":"&"==h?a.match[0]:"0"!=h&&+h<a.match.length?a.match[h]:l))}matchAll(a,l){let h=K1(this.spec,a,0,a.doc.length),d=[];for(;!h.next().done;){if(d.length>=l)return null;d.push(h.value)}return d}highlight(a,l,h,d){let f=K1(this.spec,a,Math.max(0,l-250),Math.min(h+250,a.doc.length));for(;!f.next().done;)d(f.value.from,f.value.to)}}const EO=rr.define(),u$=rr.define(),qd=xo.define({create:c=>new h$(h3(c).create(),null),update(c,a){for(let l of a.effects)l.is(EO)?c=new h$(l.value.create(),c.panel):l.is(u$)&&(c=new h$(c.query,l.value?d$:null));return c},provide:c=>vO.from(c,a=>a.panel)});class h${constructor(a,l){this.query=a,this.panel=l}}const uht=Gn.mark({class:"cm-searchMatch"}),hht=Gn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),dht=Js.fromClass(class{constructor(c){this.view=c,this.decorations=this.highlight(c.state.field(qd))}update(c){let a=c.state.field(qd);(a!=c.startState.field(qd)||c.docChanged||c.selectionSet||c.viewportChanged)&&(this.decorations=this.highlight(a))}highlight({query:c,panel:a}){if(!a||!c.spec.valid)return Gn.none;let{view:l}=this,h=new Ag;for(let d=0,f=l.visibleRanges,p=f.length;d<p;d++){let{from:g,to:m}=f[d];for(;d<p-1&&m>f[d+1].from-500;)m=f[++d].to;c.highlight(l.state,g,m,(v,y)=>{let _=l.state.selection.ranges.some(b=>b.from==v&&b.to==y);h.add(v,y,_?hht:uht)})}return h.finish()}},{decorations:c=>c.decorations});function AO(c){return a=>{let l=a.state.field(qd,!1);return l&&l.query.spec.valid?c(a,l):gve(a)}}const c3=AO((c,{query:a})=>{let{to:l}=c.state.selection.main,h=a.nextMatch(c.state,l,l);return!!h&&(c.dispatch({selection:{anchor:h.from,head:h.to},scrollIntoView:!0,effects:f$(c,h),userEvent:"select.search"}),!0)}),u3=AO((c,{query:a})=>{let{state:l}=c,{from:h}=l.selection.main,d=a.prevMatch(l,h,h);return!!d&&(c.dispatch({selection:{anchor:d.from,head:d.to},scrollIntoView:!0,effects:f$(c,d),userEvent:"select.search"}),!0)}),fht=AO((c,{query:a})=>{let l=a.matchAll(c.state,1e3);return!(!l||!l.length||(c.dispatch({selection:It.create(l.map(h=>It.range(h.from,h.to))),userEvent:"select.search.matches"}),0))}),pve=AO((c,{query:a})=>{let{state:l}=c,{from:h,to:d}=l.selection.main;if(l.readOnly)return!1;let f=a.nextMatch(l,h,h);if(!f)return!1;let g,m,p=[],v=[];if(f.from==h&&f.to==d&&(m=l.toText(a.getReplacement(f)),p.push({from:f.from,to:f.to,insert:m}),f=a.nextMatch(l,f.from,f.to),v.push(Ii.announce.of(l.phrase("replaced match on line $",l.doc.lineAt(h).number)+"."))),f){let y=0==p.length||p[0].from>=f.to?0:f.to-f.from-m.length;g={anchor:f.from-y,head:f.to-y},v.push(f$(c,f))}return c.dispatch({changes:p,selection:g,scrollIntoView:!!g,effects:v,userEvent:"input.replace"}),!0}),ght=AO((c,{query:a})=>{if(c.state.readOnly)return!1;let l=a.matchAll(c.state,1e9).map(d=>{let{from:f,to:p}=d;return{from:f,to:p,insert:a.getReplacement(d)}});if(!l.length)return!1;let h=c.state.phrase("replaced $ matches",l.length)+".";return c.dispatch({changes:l,effects:Ii.announce.of(h),userEvent:"input.replace.all"}),!0});function d$(c){return c.state.facet(o3).createPanel(c)}function h3(c,a){var l,h,d,f;let p=c.selection.main,g=p.empty||p.to>p.from+100?"":c.sliceDoc(p.from,p.to);if(a&&!g)return a;let m=c.facet(o3);return new dve({search:(null!==(l=a?.literal)&&void 0!==l?l:m.literal)?g:g.replace(/\n/g,"\\n"),caseSensitive:null!==(h=a?.caseSensitive)&&void 0!==h?h:m.caseSensitive,literal:null!==(d=a?.literal)&&void 0!==d?d:m.literal,wholeWord:null!==(f=a?.wholeWord)&&void 0!==f?f:m.wholeWord})}const gve=c=>{let a=c.state.field(qd,!1);if(a&&a.panel){let l=mO(c,d$);if(!l)return!1;let h=l.dom.querySelector("[main-field]");if(h&&h!=c.root.activeElement){let d=h3(c.state,a.query.spec);d.valid&&c.dispatch({effects:EO.of(d)}),h.focus(),h.select()}}else c.dispatch({effects:[u$.of(!0),a?EO.of(h3(c.state,a.query.spec)):rr.appendConfig.of(p$)]});return!0},mve=c=>{let a=c.state.field(qd,!1);if(!a||!a.panel)return!1;let l=mO(c,d$);return l&&l.dom.contains(c.root.activeElement)&&c.focus(),c.dispatch({effects:u$.of(!1)}),!0},mht=[{key:"Mod-f",run:gve,scope:"editor search-panel"},{key:"F3",run:c3,shift:u3,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:c3,shift:u3,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:mve,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:c,dispatch:a})=>{let l=c.selection;if(l.ranges.length>1||l.main.empty)return!1;let{from:h,to:d}=l.main,f=[],p=0;for(let g=new q1(c.doc,c.sliceDoc(h,d));!g.next().done;){if(f.length>1e3)return!1;g.value.from==h&&(p=f.length),f.push(It.range(g.value.from,g.value.to))}return a(c.update({selection:It.create(f,p),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:c=>{let a=mO(c,c$);if(!a){let l=[s3.of(!0)];null==c.state.field(cve,!1)&&l.push(rr.appendConfig.of([cve,qut])),c.dispatch({effects:l}),a=mO(c,c$)}return a&&a.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:c,dispatch:a})=>{let{ranges:l}=c.selection;if(l.some(f=>f.from===f.to))return(({state:c,dispatch:a})=>{let{selection:l}=c,h=It.create(l.ranges.map(d=>c.wordAt(d.head)||It.cursor(d.head)),l.mainIndex);return!h.eq(l)&&(a(c.update({selection:h})),!0)})({state:c,dispatch:a});let h=c.sliceDoc(l[0].from,l[0].to);if(c.selection.ranges.some(f=>c.sliceDoc(f.from,f.to)!=h))return!1;let d=function rht(c,a){let{main:l,ranges:h}=c.selection,d=c.wordAt(l.head),f=d&&d.from==l.from&&d.to==l.to;for(let p=!1,g=new q1(c.doc,a,h[h.length-1].to);;){if(g.next(),!g.done){if(p&&h.some(m=>m.from==g.value.from))continue;if(f){let m=c.wordAt(g.value.from);if(!m||m.from!=g.value.from||m.to!=g.value.to)continue}return g.value}if(p)return null;g=new q1(c.doc,a,0,Math.max(0,h[h.length-1].from-1)),p=!0}}(c,h);return!!d&&(a(c.update({selection:c.selection.addRange(It.range(d.from,d.to),!1),effects:Ii.scrollIntoView(d.to)})),!0)},preventDefault:!0}];class vht{constructor(a){this.view=a;let l=this.query=a.state.field(qd).query.spec;function h(d,f,p){return us("button",{class:"cm-button",name:d,onclick:f,type:"button"},p)}this.commit=this.commit.bind(this),this.searchField=us("input",{value:l.search,placeholder:$c(a,"Find"),"aria-label":$c(a,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=us("input",{value:l.replace,placeholder:$c(a,"Replace"),"aria-label":$c(a,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=us("input",{type:"checkbox",name:"case",form:"",checked:l.caseSensitive,onchange:this.commit}),this.reField=us("input",{type:"checkbox",name:"re",form:"",checked:l.regexp,onchange:this.commit}),this.wordField=us("input",{type:"checkbox",name:"word",form:"",checked:l.wholeWord,onchange:this.commit}),this.dom=us("div",{onkeydown:d=>this.keydown(d),class:"cm-search"},[this.searchField,h("next",()=>c3(a),[$c(a,"next")]),h("prev",()=>u3(a),[$c(a,"previous")]),h("select",()=>fht(a),[$c(a,"all")]),us("label",null,[this.caseField,$c(a,"match case")]),us("label",null,[this.reField,$c(a,"regexp")]),us("label",null,[this.wordField,$c(a,"by word")]),...a.state.readOnly?[]:[us("br"),this.replaceField,h("replace",()=>pve(a),[$c(a,"replace")]),h("replaceAll",()=>ght(a),[$c(a,"replace all")])],us("button",{name:"close",onclick:()=>mve(a),"aria-label":$c(a,"close"),type:"button"},["\xd7"])])}commit(){let a=new dve({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});a.eq(this.query)||(this.query=a,this.view.dispatch({effects:EO.of(a)}))}keydown(a){!function xat(c,a,l){return tme(eme(c.state),a,c,l)}(this.view,a,"search-panel")?13==a.keyCode&&a.target==this.searchField?(a.preventDefault(),(a.shiftKey?u3:c3)(this.view)):13==a.keyCode&&a.target==this.replaceField&&(a.preventDefault(),pve(this.view)):a.preventDefault()}update(a){for(let l of a.transactions)for(let h of l.effects)h.is(EO)&&!h.value.eq(this.query)&&this.setQuery(h.value)}setQuery(a){this.query=a,this.searchField.value=a.search,this.replaceField.value=a.replace,this.caseField.checked=a.caseSensitive,this.reField.checked=a.regexp,this.wordField.checked=a.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(o3).top}}function $c(c,a){return c.state.phrase(a)}const f3=/[\s\.,:;?!]/;function f$(c,{from:a,to:l}){let h=c.state.doc.lineAt(a),d=c.state.doc.lineAt(l).to,f=Math.max(h.from,a-30),p=Math.min(d,l+30),g=c.state.sliceDoc(f,p);if(f!=h.from)for(let m=0;m<30;m++)if(!f3.test(g[m+1])&&f3.test(g[m])){g=g.slice(m);break}if(p!=d)for(let m=g.length-1;m>g.length-30;m--)if(!f3.test(g[m-1])&&f3.test(g[m])){g=g.slice(0,m);break}return Ii.announce.of(`${c.state.phrase("current match")}. ${g} ${c.state.phrase("on line")} ${h.number}.`)}const yht=Ii.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),p$=[qd,G0.lowest(dht),yht];class vve{constructor(a,l,h){this.state=a,this.pos=l,this.explicit=h,this.abortListeners=[]}tokenBefore(a){let l=wo(this.state).resolveInner(this.pos,-1);for(;l&&a.indexOf(l.name)<0;)l=l.parent;return l?{from:l.from,to:this.pos,text:this.state.sliceDoc(l.from,this.pos),type:l.type}:null}matchBefore(a){let l=this.state.doc.lineAt(this.pos),h=Math.max(l.from,this.pos-250),d=l.text.slice(h-l.from,this.pos-l.from),f=d.search(Cve(a,!1));return f<0?null:{from:h+f,to:this.pos,text:d.slice(f)}}get aborted(){return null==this.abortListeners}addEventListener(a,l){"abort"==a&&this.abortListeners&&this.abortListeners.push(l)}}function yve(c){let a=Object.keys(c).join(""),l=/\w/.test(a);return l&&(a=a.replace(/\w/g,"")),`[${l?"\\w":""}${a.replace(/[^\w\s]/g,"\\$&")}]`}function _ve(c){let a=c.map(d=>"string"==typeof d?{label:d}:d),[l,h]=a.every(d=>/^\w+$/.test(d.label))?[/\w*$/,/\w+$/]:function _ht(c){let a=Object.create(null),l=Object.create(null);for(let{label:d}of c){a[d[0]]=!0;for(let f=1;f<d.length;f++)l[d[f]]=!0}let h=yve(a)+yve(l)+"*$";return[new RegExp("^"+h),new RegExp(h)]}(a);return d=>{let f=d.matchBefore(h);return f||d.explicit?{from:f?f.from:d.pos,options:a,validFor:l}:null}}function bht(c,a){return l=>{for(let h=wo(l.state).resolveInner(l.pos,-1);h;h=h.parent){if(c.indexOf(h.name)>-1)return null;if(h.type.isTop)break}return a(l)}}class bve{constructor(a,l,h){this.completion=a,this.source=l,this.match=h}}function $g(c){return c.selection.main.head}function Cve(c,a){var l;let{source:h}=c,d=a&&"^"!=h[0],f="$"!=h[h.length-1];return d||f?new RegExp(`${d?"^":""}(?:${h})${f?"$":""}`,null!==(l=c.flags)&&void 0!==l?l:c.ignoreCase?"i":""):c}const Sve=lp.define();function xve(c,a){const l=a.completion.apply||a.completion.label;let h=a.source;"string"==typeof l?c.dispatch(Object.assign(Object.assign({},function Cht(c,a,l,h){return Object.assign(Object.assign({},c.changeByRange(d=>{if(d==c.selection.main)return{changes:{from:l,to:h,insert:a},range:It.cursor(l+a.length)};let f=h-l;return!d.empty||f&&c.sliceDoc(d.from-f,d.from)!=c.sliceDoc(l,h)?{range:d}:{changes:{from:d.from-f,to:d.from,insert:a},range:It.cursor(d.from-f+a.length)}})),{userEvent:"input.complete"})}(c.state,l,h.from,h.to)),{annotations:Sve.of(a.completion)})):l(c,a.completion,h.from,h.to)}const wve=new WeakMap;function Sht(c){if(!Array.isArray(c))return c;let a=wve.get(c);return a||wve.set(c,a=_ve(c)),a}class xht{constructor(a){this.pattern=a,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let l=0;l<a.length;){let h=Sa(a,l),d=Eu(h);this.chars.push(h);let f=a.slice(l,l+d),p=f.toUpperCase();this.folded.push(Sa(p==f?f.toLowerCase():p,0)),l+=d}this.astral=a.length!=this.chars.length}match(a){if(0==this.pattern.length)return[0];if(a.length<this.pattern.length)return null;let{chars:l,folded:h,any:d,precise:f,byWord:p}=this;if(1==l.length){let T=Sa(a,0),M=Eu(T),k=M==a.length?0:-100;if(T!=l[0]){if(T!=h[0])return null;k+=-200}return[k,0,M]}let g=a.indexOf(this.pattern);if(0==g)return[a.length==this.pattern.length?0:-100,0,this.pattern.length];let m=l.length,v=0;if(g<0){for(let T=0,M=Math.min(a.length,200);T<M&&v<m;){let k=Sa(a,T);(k==l[v]||k==h[v])&&(d[v++]=T),T+=Eu(k)}if(v<m)return null}let y=0,_=0,b=!1,C=0,x=-1,w=-1,O=/[a-z]/.test(a),D=!0;for(let T=0,M=Math.min(a.length,200),k=0;T<M&&_<m;){let E=Sa(a,T);g<0&&(y<m&&E==l[y]&&(f[y++]=T),C<m&&(E==l[C]||E==h[C]?(0==C&&(x=T),w=T+1,C++):C=0));let P,V=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(P=M7(E))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!T||1==V&&O||0==k&&0!=V)&&(l[_]==E||h[_]==E&&(b=!0)?p[_++]=T:p.length&&(D=!1)),k=V,T+=Eu(E)}return _==m&&0==p[0]&&D?this.result((b?-200:0)-100,p,a):C==m&&0==x?[-200-a.length+(w==a.length?0:-100),0,w]:g>-1?[-700-a.length,g,g+this.pattern.length]:C==m?[-900-a.length,x,w]:_==m?this.result((b?-200:0)-100-700+(D?0:-1100),p,a):2==l.length?null:this.result((d[0]?-700:0)-200-1100,d,a)}result(a,l,h){let d=[a-h.length],f=1;for(let p of l){let g=p+(this.astral?Eu(Sa(h,p)):1);f>1&&d[f-1]==p?d[f-1]=g:(d[f++]=p,d[f++]=g)}return d}}const Lu=Vn.define({combine:c=>Mh(c,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(a,l)=>a.label.localeCompare(l.label),interactionDelay:75},{defaultKeymap:(a,l)=>a&&l,closeOnBlur:(a,l)=>a&&l,icons:(a,l)=>a&&l,tooltipClass:(a,l)=>h=>Ove(a(h),l(h)),optionClass:(a,l)=>h=>Ove(a(h),l(h)),addToOptions:(a,l)=>a.concat(l)})});function Ove(c,a){return c?a?c+" "+a:c:a}function Dve(c,a,l){if(c<=l)return{from:0,to:c};if(a<0&&(a=0),a<=c>>1){let d=Math.floor(a/l);return{from:d*l,to:(d+1)*l}}let h=Math.floor((c-a)/l);return{from:c-(h+1)*l,to:c-h*l}}class Oht{constructor(a,l){this.view=a,this.stateField=l,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:g=>this.positionInfo(g),key:this},this.space=null,this.currentClass="";let h=a.state.field(l),{options:d,selected:f}=h.open,p=a.state.facet(Lu);this.optionContent=function wht(c){let a=c.addToOptions.slice();return c.icons&&a.push({render(l){let h=document.createElement("div");return h.classList.add("cm-completionIcon"),l.type&&h.classList.add(...l.type.split(/\s+/g).map(d=>"cm-completionIcon-"+d)),h.setAttribute("aria-hidden","true"),h},position:20}),a.push({render(l,h,d){let f=document.createElement("span");f.className="cm-completionLabel";let{label:p}=l,g=0;for(let m=1;m<d.length;){let v=d[m++],y=d[m++];v>g&&f.appendChild(document.createTextNode(p.slice(g,v)));let _=f.appendChild(document.createElement("span"));_.appendChild(document.createTextNode(p.slice(v,y))),_.className="cm-completionMatchedText",g=y}return g<p.length&&f.appendChild(document.createTextNode(p.slice(g))),f},position:50},{render(l){if(!l.detail)return null;let h=document.createElement("span");return h.className="cm-completionDetail",h.textContent=l.detail,h},position:80}),a.sort((l,h)=>l.position-h.position).map(l=>l.render)}(p),this.optionClass=p.optionClass,this.tooltipClass=p.tooltipClass,this.range=Dve(d.length,f,p.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(a.state),this.dom.addEventListener("mousedown",g=>{for(let v,m=g.target;m&&m!=this.dom;m=m.parentNode)if("LI"==m.nodeName&&(v=/-(\d+)$/.exec(m.id))&&+v[1]<d.length)return xve(a,d[+v[1]]),void g.preventDefault()}),this.list=this.dom.appendChild(this.createListBox(d,h.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(a){var l,h,d;let f=a.state.field(this.stateField),p=a.startState.field(this.stateField);this.updateTooltipClass(a.state),f!=p&&(this.updateSel(),(null===(l=f.open)||void 0===l?void 0:l.disabled)!=(null===(h=p.open)||void 0===h?void 0:h.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!(null===(d=f.open)||void 0===d||!d.disabled)))}updateTooltipClass(a){let l=this.tooltipClass(a);if(l!=this.currentClass){for(let h of this.currentClass.split(" "))h&&this.dom.classList.remove(h);for(let h of l.split(" "))h&&this.dom.classList.add(h);this.currentClass=l}}positioned(a){this.space=a,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let a=this.view.state.field(this.stateField),l=a.open;if((l.selected>-1&&l.selected<this.range.from||l.selected>=this.range.to)&&(this.range=Dve(l.options.length,l.selected,this.view.state.facet(Lu).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(l.options,a.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(l.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:h}=l.options[l.selected],{info:d}=h;if(!d)return;let f="string"==typeof d?document.createTextNode(d):d(h);if(!f)return;"then"in f?f.then(p=>{p&&this.view.state.field(this.stateField,!1)==a&&this.addInfoPane(p)}).catch(p=>Uc(this.view.state,p,"completion info")):this.addInfoPane(f)}}addInfoPane(a){let l=this.info=document.createElement("div");l.className="cm-tooltip cm-completionInfo",l.appendChild(a),this.dom.appendChild(l),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(a){let l=null;for(let h=this.list.firstChild,d=this.range.from;h;h=h.nextSibling,d++)d==a?h.hasAttribute("aria-selected")||(h.setAttribute("aria-selected","true"),l=h):h.hasAttribute("aria-selected")&&h.removeAttribute("aria-selected");return l&&function Tht(c,a){let l=c.getBoundingClientRect(),h=a.getBoundingClientRect();h.top<l.top?c.scrollTop-=l.top-h.top:h.bottom>l.bottom&&(c.scrollTop+=h.bottom-l.bottom)}(this.list,l),l}measureInfo(){let a=this.dom.querySelector("[aria-selected]");if(!a||!this.info)return null;let l=this.dom.getBoundingClientRect(),h=this.info.getBoundingClientRect(),d=a.getBoundingClientRect(),f=this.space;if(!f){let x=this.dom.ownerDocument.defaultView||window;f={left:0,top:0,right:x.innerWidth,bottom:x.innerHeight}}if(d.top>Math.min(f.bottom,l.bottom)-10||d.bottom<Math.max(f.top,l.top)+10)return null;let v,p=this.view.textDirection==Ns.RTL,g=p,m=!1,y="",_="",b=l.left-f.left,C=f.right-l.right;if(g&&b<Math.min(h.width,C)?g=!1:!g&&C<Math.min(h.width,b)&&(g=!0),h.width<=(g?b:C))y=Math.max(f.top,Math.min(d.top,f.bottom-h.height))-l.top+"px",v=Math.min(400,g?b:C)+"px";else{m=!0,v=Math.min(400,(p?l.right:f.right-l.left)-30)+"px";let x=f.bottom-l.bottom;x>=h.height||x>l.top?y=d.bottom-l.top+"px":_=l.bottom-d.top+"px"}return{top:y,bottom:_,maxWidth:v,class:m?p?"left-narrow":"right-narrow":g?"left":"right"}}positionInfo(a){this.info&&(a?(this.info.style.top=a.top,this.info.style.bottom=a.bottom,this.info.style.maxWidth=a.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+a.class):this.info.style.top="-1e6px")}createListBox(a,l,h){const d=document.createElement("ul");d.id=l,d.setAttribute("role","listbox"),d.setAttribute("aria-expanded","true"),d.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let f=h.from;f<h.to;f++){let{completion:p,match:g}=a[f];const m=d.appendChild(document.createElement("li"));m.id=l+"-"+f,m.setAttribute("role","option");let v=this.optionClass(p);v&&(m.className=v);for(let y of this.optionContent){let _=y(p,this.view.state,g);_&&m.appendChild(_)}}return h.from&&d.classList.add("cm-completionListIncompleteTop"),h.to<a.length&&d.classList.add("cm-completionListIncompleteBottom"),d}}function Dht(c){return a=>new Oht(a,c)}function Tve(c){return 100*(c.boost||0)+(c.apply?10:0)+(c.info?5:0)+(c.type?1:0)}class J1{constructor(a,l,h,d,f,p){this.options=a,this.attrs=l,this.tooltip=h,this.timestamp=d,this.selected=f,this.disabled=p}setSelected(a,l){return a==this.selected||a>=this.options.length?this:new J1(this.options,kve(l,a),this.tooltip,this.timestamp,a,this.disabled)}static build(a,l,h,d,f){let p=function kht(c,a){let l=[],h=0;for(let g of c)if(g.hasResult())if(!1===g.result.filter){let m=g.result.getMatch;for(let v of g.result.options){let y=[1e9-h++];if(m)for(let _ of m(v))y.push(_);l.push(new bve(v,g,y))}}else{let v,m=new xht(a.sliceDoc(g.from,g.to));for(let y of g.result.options)(v=m.match(y.label))&&(null!=y.boost&&(v[0]+=y.boost),l.push(new bve(y,g,v)))}let d=[],f=null,p=a.facet(Lu).compareCompletions;for(let g of l.sort((m,v)=>v.match[0]-m.match[0]||p(m.completion,v.completion)))!f||f.label!=g.completion.label||f.detail!=g.completion.detail||null!=f.type&&null!=g.completion.type&&f.type!=g.completion.type||f.apply!=g.completion.apply?d.push(g):Tve(g.completion)>Tve(f)&&(d[d.length-1]=g),f=g.completion;return d}(a,l);if(!p.length)return d&&a.some(m=>1==m.state)?new J1(d.options,d.attrs,d.tooltip,d.timestamp,d.selected,!0):null;let g=l.facet(Lu).selectOnOpen?0:-1;if(d&&d.selected!=g&&-1!=d.selected){let m=d.options[d.selected].completion;for(let v=0;v<p.length;v++)if(p[v].completion==m){g=v;break}}return new J1(p,kve(h,g),{pos:a.reduce((m,v)=>v.hasResult()?Math.min(m,v.from):m,1e8),create:Dht(Za),above:f.aboveCursor},d?d.timestamp:Date.now(),g,!1)}map(a){return new J1(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:a.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class p3{constructor(a,l,h){this.active=a,this.id=l,this.open=h}static start(){return new p3(Aht,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(a){let{state:l}=a,h=l.facet(Lu),f=(h.override||l.languageDataAt("autocomplete",$g(l)).map(Sht)).map(g=>(this.active.find(v=>v.source==g)||new oc(g,this.active.some(v=>0!=v.state)?1:0)).update(a,h));f.length==this.active.length&&f.every((g,m)=>g==this.active[m])&&(f=this.active);let p=this.open;p&&a.docChanged&&(p=p.map(a.changes)),a.selection||f.some(g=>g.hasResult()&&a.changes.touchesRange(g.from,g.to))||!function Mht(c,a){if(c==a)return!0;for(let l=0,h=0;;){for(;l<c.length&&!c[l].hasResult;)l++;for(;h<a.length&&!a[h].hasResult;)h++;let d=l==c.length,f=h==a.length;if(d||f)return d==f;if(c[l++].result!=a[h++].result)return!1}}(f,this.active)?p=J1.build(f,l,this.id,p,h):p&&p.disabled&&!f.some(g=>1==g.state)&&(p=null),!p&&f.every(g=>1!=g.state)&&f.some(g=>g.hasResult())&&(f=f.map(g=>g.hasResult()?new oc(g.source,0):g));for(let g of a.effects)g.is(v$)&&(p=p&&p.setSelected(g.value,this.id));return f==this.active&&p==this.open?this:new p3(f,this.id,p)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Eht}}const Eht={"aria-autocomplete":"list"};function kve(c,a){let l={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":c};return a>-1&&(l["aria-activedescendant"]=c+"-"+a),l}const Aht=[];function g$(c){return c.isUserEvent("input.type")?"input":c.isUserEvent("delete.backward")?"delete":null}class oc{constructor(a,l,h=-1){this.source=a,this.state=l,this.explicitPos=h}hasResult(){return!1}update(a,l){let h=g$(a),d=this;h?d=d.handleUserEvent(a,h,l):a.docChanged?d=d.handleChange(a):a.selection&&0!=d.state&&(d=new oc(d.source,0));for(let f of a.effects)if(f.is(m$))d=new oc(d.source,1,f.value?$g(a.state):-1);else if(f.is(g3))d=new oc(d.source,0);else if(f.is(Mve))for(let p of f.value)p.source==d.source&&(d=p);return d}handleUserEvent(a,l,h){return"delete"!=l&&h.activateOnTyping?new oc(this.source,1):this.map(a.changes)}handleChange(a){return a.changes.touchesRange($g(a.startState))?new oc(this.source,0):this.map(a.changes)}map(a){return a.empty||this.explicitPos<0?this:new oc(this.source,this.state,a.mapPos(this.explicitPos))}}class IO extends oc{constructor(a,l,h,d,f){super(a,2,l),this.result=h,this.from=d,this.to=f}hasResult(){return!0}handleUserEvent(a,l,h){var d;let f=a.changes.mapPos(this.from),p=a.changes.mapPos(this.to,1),g=$g(a.state);if((this.explicitPos<0?g<=f:g<this.from)||g>p||"delete"==l&&$g(a.startState)==this.from)return new oc(this.source,"input"==l&&h.activateOnTyping?1:0);let v,m=this.explicitPos<0?-1:a.changes.mapPos(this.explicitPos);return function Iht(c,a,l,h){if(!c)return!1;let d=a.sliceDoc(l,h);return"function"==typeof c?c(d,l,h,a):Cve(c,!0).test(d)}(this.result.validFor,a.state,f,p)?new IO(this.source,m,this.result,f,p):this.result.update&&(v=this.result.update(this.result,f,p,new vve(a.state,g,m>=0)))?new IO(this.source,m,v,v.from,null!==(d=v.to)&&void 0!==d?d:$g(a.state)):new oc(this.source,1,m)}handleChange(a){return a.changes.touchesRange(this.from,this.to)?new oc(this.source,0):this.map(a.changes)}map(a){return a.empty?this:new IO(this.source,this.explicitPos<0?-1:a.mapPos(this.explicitPos),this.result,a.mapPos(this.from),a.mapPos(this.to,1))}}const m$=rr.define(),g3=rr.define(),Mve=rr.define({map:(c,a)=>c.map(l=>l.map(a))}),v$=rr.define(),Za=xo.define({create:()=>p3.start(),update:(c,a)=>c.update(a),provide:c=>[EA.from(c,a=>a.tooltip),Ii.contentAttributes.from(c,a=>a.attrs)]});function m3(c,a="option"){return l=>{let h=l.state.field(Za,!1);if(!h||!h.open||h.open.disabled||Date.now()-h.open.timestamp<l.state.facet(Lu).interactionDelay)return!1;let f,d=1;"page"==a&&(f=function clt(c,a){let l=c.plugin(OH);if(!l)return null;let h=l.manager.tooltips.indexOf(a);return h<0?null:l.manager.tooltipViews[h]}(l,h.open.tooltip))&&(d=Math.max(2,Math.floor(f.dom.offsetHeight/f.dom.querySelector("li").offsetHeight)-1));let{length:p}=h.open.options,g=h.open.selected>-1?h.open.selected+d*(c?1:-1):c?0:p-1;return g<0?g="page"==a?0:p-1:g>=p&&(g="page"==a?p-1:0),l.dispatch({effects:v$.of(g)}),!0}}class Lht{constructor(a,l){this.active=a,this.context=l,this.time=Date.now(),this.updates=[],this.done=void 0}}const Vht=Js.fromClass(class{constructor(c){this.view=c,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let a of c.state.field(Za).active)1==a.state&&this.startQuery(a)}update(c){let a=c.state.field(Za);if(!c.selectionSet&&!c.docChanged&&c.startState.field(Za)==a)return;let l=c.transactions.some(h=>(h.selection||h.docChanged)&&!g$(h));for(let h=0;h<this.running.length;h++){let d=this.running[h];if(l||d.updates.length+c.transactions.length>50&&Date.now()-d.time>1e3){for(let f of d.context.abortListeners)try{f()}catch(p){Uc(this.view.state,p)}d.context.abortListeners=null,this.running.splice(h--,1)}else d.updates.push(...c.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=a.active.some(h=>1==h.state&&!this.running.some(d=>d.active.source==h.source))?setTimeout(()=>this.startUpdate(),50):-1,0!=this.composing)for(let h of c.transactions)"input"==g$(h)?this.composing=2:2==this.composing&&h.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:c}=this.view,a=c.field(Za);for(let l of a.active)1==l.state&&!this.running.some(h=>h.active.source==l.source)&&this.startQuery(l)}startQuery(c){let{state:a}=this.view,l=$g(a),h=new vve(a,l,c.explicitPos==l),d=new Lht(c,h);this.running.push(d),Promise.resolve(c.source(h)).then(f=>{d.context.aborted||(d.done=f||null,this.scheduleAccept())},f=>{this.view.dispatch({effects:g3.of(null)}),Uc(this.view.state,f)})}scheduleAccept(){this.running.every(c=>void 0!==c.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),50))}accept(){var c;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let a=[],l=this.view.state.facet(Lu);for(let h=0;h<this.running.length;h++){let d=this.running[h];if(void 0===d.done)continue;if(this.running.splice(h--,1),d.done){let p=new IO(d.active.source,d.active.explicitPos,d.done,d.done.from,null!==(c=d.done.to)&&void 0!==c?c:$g(d.updates.length?d.updates[0].startState:this.view.state));for(let g of d.updates)p=p.update(g,l);if(p.hasResult()){a.push(p);continue}}let f=this.view.state.field(Za).active.find(p=>p.source==d.active.source);if(f&&1==f.state)if(null==d.done){let p=new oc(d.active.source,0);for(let g of d.updates)p=p.update(g,l);1!=p.state&&a.push(p)}else this.startQuery(f)}a.length&&this.view.dispatch({effects:Mve.of(a)})}},{eventHandlers:{blur(){let c=this.view.state.field(Za,!1);c&&c.tooltip&&this.view.state.facet(Lu).closeOnBlur&&this.view.dispatch({effects:g3.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:m$.of(!1)}),20),this.composing=0}}}),Ave=Ii.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1d465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1d436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1d461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Uht{constructor(a,l,h,d){this.field=a,this.line=l,this.from=h,this.to=d}}class y${constructor(a,l,h){this.field=a,this.from=l,this.to=h}map(a){let l=a.mapPos(this.from,-1,xa.TrackDel),h=a.mapPos(this.to,1,xa.TrackDel);return null==l||null==h?null:new y$(this.field,l,h)}}class _${constructor(a,l){this.lines=a,this.fieldPositions=l}instantiate(a,l){let h=[],d=[l],f=a.doc.lineAt(l),p=/^\s*/.exec(f.text)[0];for(let m of this.lines){if(h.length){let v=p,y=/^\t*/.exec(m)[0].length;for(let _=0;_<y;_++)v+=a.facet(WA);d.push(l+v.length-y),m=v+m.slice(y)}h.push(m),l+=m.length+1}return{text:h,ranges:this.fieldPositions.map(m=>new y$(m.field,d[m.line]+m.from,d[m.line]+m.to))}}static parse(a){let f,l=[],h=[],d=[];for(let p of a.split(/\r\n?|\n/)){for(;f=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(p);){let g=f[1]?+f[1]:null,m=f[2]||f[3]||"",v=-1;for(let y=0;y<l.length;y++)(null!=g?l[y].seq==g:m&&l[y].name==m)&&(v=y);if(v<0){let y=0;for(;y<l.length&&(null==g||null!=l[y].seq&&l[y].seq<g);)y++;l.splice(y,0,{seq:g,name:m}),v=y;for(let _ of d)_.field>=v&&_.field++}d.push(new Uht(v,h.length,f.index,f.index+m.length)),p=p.slice(0,f.index)+m+p.slice(f.index+f[0].length)}for(let g;g=/\\([{}])/.exec(p);){p=p.slice(0,g.index)+g[1]+p.slice(g.index+g[0].length);for(let m of d)m.line==h.length&&m.from>g.index&&(m.from--,m.to--)}h.push(p)}return new _$(h,d)}}let zht=Gn.widget({widget:new class extends cp{toDOM(){let c=document.createElement("span");return c.className="cm-snippetFieldPosition",c}ignoreEvent(){return!1}}}),Hht=Gn.mark({class:"cm-snippetField"});class eb{constructor(a,l){this.ranges=a,this.active=l,this.deco=Gn.set(a.map(h=>(h.from==h.to?zht:Hht).range(h.from,h.to)))}map(a){let l=[];for(let h of this.ranges){let d=h.map(a);if(!d)return null;l.push(d)}return new eb(l,this.active)}selectionInsideField(a){return a.ranges.every(l=>this.ranges.some(h=>h.field==this.active&&h.from<=l.from&&h.to>=l.to))}}const PO=rr.define({map:(c,a)=>c&&c.map(a)}),$ht=rr.define(),RO=xo.define({create:()=>null,update(c,a){for(let l of a.effects){if(l.is(PO))return l.value;if(l.is($ht)&&c)return new eb(c.ranges,l.value)}return c&&a.docChanged&&(c=c.map(a.changes)),c&&a.selection&&!c.selectionInsideField(a.selection)&&(c=null),c},provide:c=>Ii.decorations.from(c,a=>a?a.deco:Gn.none)});function b$(c,a){return It.create(c.filter(l=>l.field==a).map(l=>It.range(l.from,l.to)))}function Wht(c){let a=_$.parse(c);return(l,h,d,f)=>{let{text:p,ranges:g}=a.instantiate(l.state,d),m={changes:{from:d,to:f,insert:wr.of(p)},scrollIntoView:!0,annotations:Sve.of(h)};if(g.length&&(m.selection=b$(g,0)),g.length>1){let v=new eb(g,0),y=m.effects=[PO.of(v)];void 0===l.state.field(RO,!1)&&y.push(rr.appendConfig.of([RO,Qht,jht,Ave]))}l.dispatch(l.state.update(m))}}function Ive(c){return({state:a,dispatch:l})=>{let h=a.field(RO,!1);if(!h||c<0&&0==h.active)return!1;let d=h.active+c,f=c>0&&!h.ranges.some(p=>p.field==d+c);return l(a.update({selection:b$(h.ranges,d),effects:PO.of(f?null:new eb(h.ranges,d))})),!0}}const Ght=[{key:"Tab",run:Ive(1),shift:Ive(-1)},{key:"Escape",run:({state:c,dispatch:a})=>!!c.field(RO,!1)&&(a(c.update({effects:PO.of(null)})),!0)}],Pve=Vn.define({combine:c=>c.length?c[0]:Ght}),Qht=G0.highest(OA.compute([Pve],c=>c.facet(Pve)));function Ah(c,a){return Object.assign(Object.assign({},a),{apply:Wht(c)})}const jht=Ii.domEventHandlers({mousedown(c,a){let h,l=a.state.field(RO,!1);if(!l||null==(h=a.posAtCoords({x:c.clientX,y:c.clientY})))return!1;let d=l.ranges.find(f=>f.from<=h&&f.to>=h);return!(!d||d.field==l.active||(a.dispatch({selection:b$(l.ranges,d.field),effects:PO.of(l.ranges.some(f=>f.field>d.field)?new eb(l.ranges,d.field):null)}),0))}}),FO={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ev=rr.define({map:(c,a)=>a.mapPos(c,-1,xa.TrackAfter)??void 0}),C$=rr.define({map:(c,a)=>a.mapPos(c)}),S$=new class extends j0{};S$.startSide=1,S$.endSide=-1;const Bve=xo.define({create:()=>Ls.empty,update(c,a){if(a.selection){let l=a.state.doc.lineAt(a.selection.main.head).from,h=a.startState.doc.lineAt(a.startState.selection.main.head).from;l!=a.changes.mapPos(h,-1)&&(c=Ls.empty)}c=c.map(a.changes);for(let l of a.effects)l.is(ev)?c=c.update({add:[S$.range(l.value,l.value+1)]}):l.is(C$)&&(c=c.update({filter:h=>h!=l.value}));return c}}),x$="()[]{}<>";function Vve(c){for(let a=0;a<x$.length;a+=2)if(x$.charCodeAt(a)==c)return x$.charAt(a+1);return M7(c<128?c:c+1)}function Uve(c,a){return c.languageDataAt("closeBrackets",a)[0]||FO}const Yht="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Kht=Ii.inputHandler.of((c,a,l,h)=>{if((Yht?c.composing:c.compositionStarted)||c.state.readOnly)return!1;let d=c.state.selection.main;if(h.length>2||2==h.length&&1==Eu(Sa(h,0))||a!=d.from||l!=d.to)return!1;let f=function edt(c,a){let l=Uve(c,c.selection.main.head),h=l.brackets||FO.brackets;for(let d of h){let f=Vve(Sa(d,0));if(a==d)return f==d?rdt(c,d,h.indexOf(d+d+d)>-1,l):ndt(c,d,f,l.before||FO.before);if(a==f&&zve(c,c.selection.main.from))return idt(c,0,f)}return null}(c.state,h);return!!f&&(c.dispatch(f),!0)}),Jht=[{key:"Backspace",run:({state:c,dispatch:a})=>{if(c.readOnly)return!1;let h=Uve(c,c.selection.main.head).brackets||FO.brackets,d=null,f=c.changeByRange(p=>{if(p.empty){let g=function tdt(c,a){let l=c.sliceString(a-2,a);return Eu(Sa(l,0))==l.length?l:l.slice(1)}(c.doc,p.head);for(let m of h)if(m==g&&v3(c.doc,p.head)==Vve(Sa(m,0)))return{changes:{from:p.head-m.length,to:p.head+m.length},range:It.cursor(p.head-m.length)}}return{range:d=p}});return d||a(c.update(f,{scrollIntoView:!0,userEvent:"delete.backward"})),!d}}];function zve(c,a){let l=!1;return c.field(Bve).between(0,c.doc.length,h=>{h==a&&(l=!0)}),l}function v3(c,a){let l=c.sliceString(a,a+2);return l.slice(0,Eu(Sa(l,0)))}function ndt(c,a,l,h){let d=null,f=c.changeByRange(p=>{if(!p.empty)return{changes:[{insert:a,from:p.from},{insert:l,from:p.to}],effects:ev.of(p.to+a.length),range:It.range(p.anchor+a.length,p.head+a.length)};let g=v3(c.doc,p.head);return!g||/\s/.test(g)||h.indexOf(g)>-1?{changes:{insert:a+l,from:p.head},effects:ev.of(p.head+a.length),range:It.cursor(p.head+a.length)}:{range:d=p}});return d?null:c.update(f,{scrollIntoView:!0,userEvent:"input.type"})}function idt(c,a,l){let h=null,d=c.selection.ranges.map(f=>f.empty&&v3(c.doc,f.head)==l?It.cursor(f.head+l.length):h=f);return h?null:c.update({selection:It.create(d,c.selection.mainIndex),scrollIntoView:!0,effects:c.selection.ranges.map(({from:f})=>C$.of(f))})}function rdt(c,a,l,h){let d=h.stringPrefixes||FO.stringPrefixes,f=null,p=c.changeByRange(g=>{if(!g.empty)return{changes:[{insert:a,from:g.from},{insert:a,from:g.to}],effects:ev.of(g.to+a.length),range:It.range(g.anchor+a.length,g.head+a.length)};let y,m=g.head,v=v3(c.doc,m);if(v==a){if(Hve(c,m))return{changes:{insert:a+a,from:m},effects:ev.of(m+a.length),range:It.cursor(m+a.length)};if(zve(c,m)){let _=l&&c.sliceDoc(m,m+3*a.length)==a+a+a;return{range:It.cursor(m+a.length*(_?3:1)),effects:C$.of(m)}}}else{if(l&&c.sliceDoc(m-2*a.length,m)==a+a&&(y=$ve(c,m-2*a.length,d))>-1&&Hve(c,y))return{changes:{insert:a+a+a+a,from:m},effects:ev.of(m+a.length),range:It.cursor(m+a.length)};if(c.charCategorizer(m)(v)!=Ts.Word&&$ve(c,m,d)>-1&&!function sdt(c,a,l,h){let d=wo(c).resolveInner(a,-1),f=h.reduce((p,g)=>Math.max(p,g.length),0);for(let p=0;p<5;p++){let g=c.sliceDoc(d.from,Math.min(d.to,d.from+l.length+f)),m=g.indexOf(l);if(!m||m>-1&&h.indexOf(g.slice(0,m))>-1){let y=d.firstChild;for(;y&&y.from==d.from&&y.to-y.from>l.length+m;){if(c.sliceDoc(y.to-l.length,y.to)==l)return!1;y=y.firstChild}return!0}let v=d.to==a&&d.parent;if(!v)break;d=v}return!1}(c,m,a,d))return{changes:{insert:a+a,from:m},effects:ev.of(m+a.length),range:It.cursor(m+a.length)}}return{range:f=g}});return f?null:c.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function Hve(c,a){let l=wo(c).resolveInner(a+1);return l.parent&&l.from==a}function $ve(c,a,l){let h=c.charCategorizer(a);if(h(c.sliceDoc(a-1,a))!=Ts.Word)return a;for(let d of l){let f=a-d.length;if(c.sliceDoc(f,a)==d&&h(c.sliceDoc(f-1,f))!=Ts.Word)return f}return-1}function Wve(c={}){return[Za,Lu.of(c),Vht,odt,Ave]}const Gve=[{key:"Ctrl-Space",run:c=>!!c.state.field(Za,!1)&&(c.dispatch({effects:m$.of(!0)}),!0)},{key:"Escape",run:c=>{let a=c.state.field(Za,!1);return!(!a||!a.active.some(l=>0!=l.state)||(c.dispatch({effects:g3.of(null)}),0))}},{key:"ArrowDown",run:m3(!0)},{key:"ArrowUp",run:m3(!1)},{key:"PageDown",run:m3(!0,"page")},{key:"PageUp",run:m3(!1,"page")},{key:"Enter",run:c=>{let a=c.state.field(Za,!1);return!(c.state.readOnly||!a||!a.open||a.open.selected<0||Date.now()-a.open.timestamp<c.state.facet(Lu).interactionDelay||(a.open.disabled||xve(c,a.open.options[a.open.selected]),0))}}],odt=G0.highest(OA.computeN([Lu],c=>c.facet(Lu).defaultKeymap?[Gve]:[]));class adt{constructor(a,l,h){this.from=a,this.to=l,this.diagnostic=h}}class tv{constructor(a,l,h){this.diagnostics=a,this.panel=l,this.selected=h}static init(a,l,h){let d=a,f=h.facet(nv).markerFilter;f&&(d=f(d));let p=Gn.set(d.map(g=>g.from==g.to||g.from==g.to-1&&h.doc.lineAt(g.from).to==g.from?Gn.widget({widget:new fdt(g),diagnostic:g}).range(g.from):Gn.mark({attributes:{class:"cm-lintRange cm-lintRange-"+g.severity},diagnostic:g}).range(g.from,g.to)),!0);return new tv(p,l,tb(p))}}function tb(c,a=null,l=0){let h=null;return c.between(l,1e9,(d,f,{spec:p})=>{if(!a||p.diagnostic==a)return h=new adt(d,f,p.diagnostic),!1}),h}function jve(c,a){return!(!c.effects.some(l=>l.is(y3))&&!c.changes.touchesRange(a.pos))}function Zve(c,a){return c.field(Il,!1)?a:a.concat(rr.appendConfig.of([Il,Ii.decorations.compute([Il],l=>{let{selected:h,panel:d}=l.field(Il);return h&&d&&h.from!=h.to?Gn.set([cdt.range(h.from,h.to)]):Gn.none}),llt(udt,{hideOn:jve}),pdt]))}const y3=rr.define(),w$=rr.define(),qve=rr.define(),Il=xo.define({create:()=>new tv(Gn.none,null,null),update(c,a){if(a.docChanged){let l=c.diagnostics.map(a.changes),h=null;if(c.selected){let d=a.changes.mapPos(c.selected.from,1);h=tb(l,c.selected.diagnostic,d)||tb(l,null,d)}c=new tv(l,c.panel,h)}for(let l of a.effects)l.is(y3)?c=tv.init(l.value,c.panel,a.state):l.is(w$)?c=new tv(c.diagnostics,l.value?_3.open:null,c.selected):l.is(qve)&&(c=new tv(c.diagnostics,c.panel,l.value));return c},provide:c=>[vO.from(c,a=>a.panel),Ii.decorations.from(c,a=>a.diagnostics)]}),cdt=Gn.mark({class:"cm-lintRange cm-lintRange-active"});function udt(c,a,l){let{diagnostics:h}=c.state.field(Il),d=[],f=2e8,p=0;h.between(a-(l<0?1:0),a+(l>0?1:0),(m,v,{spec:y})=>{a>=m&&a<=v&&(m==v||(a>m||l>0)&&(a<v||l<0))&&(d.push(y.diagnostic),f=Math.min(m,f),p=Math.max(v,p))});let g=c.state.facet(nv).tooltipFilter;return g&&(d=g(d)),d.length?{pos:f,end:p,above:c.state.doc.lineAt(f).to<p,create:()=>({dom:Xve(c,d)})}:null}function Xve(c,a){return us("ul",{class:"cm-tooltip-lint"},a.map(l=>eye(c,l,!1)))}const Yve=c=>{let a=c.state.field(Il,!1);return!(!a||!a.panel||(c.dispatch({effects:w$.of(!1)}),0))},ddt=[{key:"Mod-Shift-m",run:c=>{let a=c.state.field(Il,!1);(!a||!a.panel)&&c.dispatch({effects:Zve(c.state,[w$.of(!0)])});let l=mO(c,_3.open);return l&&l.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:c=>{let a=c.state.field(Il,!1);if(!a)return!1;let l=c.state.selection.main,h=a.diagnostics.iter(l.to+1);return!(!h.value&&(h=a.diagnostics.iter(0),!h.value||h.from==l.from&&h.to==l.to)||(c.dispatch({selection:{anchor:h.from,head:h.to},scrollIntoView:!0}),0))}}],Kve=Js.fromClass(class{constructor(c){this.view=c,this.timeout=-1,this.set=!0;let{delay:a}=c.state.facet(nv);this.lintTime=Date.now()+a,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,a)}run(){let c=Date.now();if(c<this.lintTime-10)setTimeout(this.run,this.lintTime-c);else{this.set=!1;let{state:a}=this.view,{sources:l}=a.facet(nv);Promise.all(l.map(h=>Promise.resolve(h(this.view)))).then(h=>{let d=h.reduce((f,p)=>f.concat(p));this.view.state.doc==a.doc&&this.view.dispatch(function ldt(c,a){return{effects:Zve(c,[y3.of(a)])}}(this.view.state,d))},h=>{Uc(this.view.state,h)})}}update(c){let a=c.state.facet(nv);(c.docChanged||a!=c.startState.facet(nv))&&(this.lintTime=Date.now()+a.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,a.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),nv=Vn.define({combine:c=>Object.assign({sources:c.map(a=>a.source)},Mh(c.map(a=>a.config),{delay:750,markerFilter:null,tooltipFilter:null})),enables:Kve});function Jve(c){let a=[];if(c)e:for(let{name:l}of c){for(let h=0;h<l.length;h++){let d=l[h];if(/[a-zA-Z]/.test(d)&&!a.some(f=>f.toLowerCase()==d.toLowerCase())){a.push(d);continue e}}a.push("")}return a}function eye(c,a,l){var h;let d=l?Jve(a.actions):[];return us("li",{class:"cm-diagnostic cm-diagnostic-"+a.severity},us("span",{class:"cm-diagnosticText"},a.renderMessage?a.renderMessage():a.message),null===(h=a.actions)||void 0===h?void 0:h.map((f,p)=>{let g=!1,m=b=>{if(b.preventDefault(),g)return;g=!0;let C=tb(c.state.field(Il).diagnostics,a);C&&f.apply(c,C.from,C.to)},{name:v}=f,y=d[p]?v.indexOf(d[p]):-1,_=y<0?v:[v.slice(0,y),us("u",v.slice(y,y+1)),v.slice(y+1)];return us("button",{type:"button",class:"cm-diagnosticAction",onclick:m,onmousedown:m,"aria-label":` Action: ${v}${y<0?"":` (access key "${d[p]})"`}.`},_)}),a.source&&us("div",{class:"cm-diagnosticSource"},a.source))}class fdt extends cp{constructor(a){super(),this.diagnostic=a}eq(a){return a.diagnostic==this.diagnostic}toDOM(){return us("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class tye{constructor(a,l){this.diagnostic=l,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=eye(a,l,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class _3{constructor(a){this.view=a,this.items=[],this.list=us("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:d=>{if(27==d.keyCode)Yve(this.view),this.view.focus();else if(38==d.keyCode||33==d.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==d.keyCode||34==d.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==d.keyCode)this.moveSelection(0);else if(35==d.keyCode)this.moveSelection(this.items.length-1);else if(13==d.keyCode)this.view.focus();else{if(!(d.keyCode>=65&&d.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:f}=this.items[this.selectedIndex],p=Jve(f.actions);for(let g=0;g<p.length;g++)if(p[g].toUpperCase().charCodeAt(0)==d.keyCode){let m=tb(this.view.state.field(Il).diagnostics,f);m&&f.actions[g].apply(a,m.from,m.to)}}}d.preventDefault()},onclick:d=>{for(let f=0;f<this.items.length;f++)this.items[f].dom.contains(d.target)&&this.moveSelection(f)}}),this.dom=us("div",{class:"cm-panel-lint"},this.list,us("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Yve(this.view)},"\xd7")),this.update()}get selectedIndex(){let a=this.view.state.field(Il).selected;if(!a)return-1;for(let l=0;l<this.items.length;l++)if(this.items[l].diagnostic==a.diagnostic)return l;return-1}update(){let{diagnostics:a,selected:l}=this.view.state.field(Il),h=0,d=!1,f=null;for(a.between(0,this.view.state.doc.length,(p,g,{spec:m})=>{let y,v=-1;for(let _=h;_<this.items.length;_++)if(this.items[_].diagnostic==m.diagnostic){v=_;break}v<0?(y=new tye(this.view,m.diagnostic),this.items.splice(h,0,y),d=!0):(y=this.items[v],v>h&&(this.items.splice(h,v-h),d=!0)),l&&y.diagnostic==l.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),f=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),h++});h<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)d=!0,this.items.pop();0==this.items.length&&(this.items.push(new tye(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),d=!0),f?(this.list.setAttribute("aria-activedescendant",f.id),this.view.requestMeasure({key:this,read:()=>({sel:f.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:p,panel:g})=>{p.top<g.top?this.list.scrollTop-=g.top-p.top:p.bottom>g.bottom&&(this.list.scrollTop+=p.bottom-g.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),d&&this.sync()}sync(){let a=this.list.firstChild;function l(){let h=a;a=h.nextSibling,h.remove()}for(let h of this.items)if(h.dom.parentNode==this.list){for(;a!=h.dom;)l();a=h.dom.nextSibling}else this.list.insertBefore(h.dom,a);for(;a;)l()}moveSelection(a){if(this.selectedIndex<0)return;let h=tb(this.view.state.field(Il).diagnostics,this.items[a].diagnostic);h&&this.view.dispatch({selection:{anchor:h.from,head:h.to},scrollIntoView:!0,effects:qve.of(h)})}static open(a){return new _3(a)}}function O$(c){return function b3(c,a='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${a}>${encodeURIComponent(c)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${c}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pdt=Ii.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:O$("#d11")},".cm-lintRange-warning":{backgroundImage:O$("orange")},".cm-lintRange-info":{backgroundImage:O$("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Cdt=(()=>[vlt(),_lt,Vat(),qct(),yct(),Mat(),[pO,Pat],Ml.allowMultipleSelections.of(!0),Ml.transactionFilter.of(c=>{if(!c.docChanged||!c.isUserEvent("input.type")&&!c.isUserEvent("input.complete"))return c;let a=c.startState.languageDataAt("indentOnInput",c.startState.selection.main.head);if(!a.length)return c;let l=c.newDoc,{head:h}=c.newSelection.main,d=l.lineAt(h);if(h>d.from+200)return c;let f=l.sliceString(d.from,h);if(!a.some(v=>v.test(f)))return c;let{state:p}=c,g=-1,m=[];for(let{head:v}of p.selection.ranges){let y=p.doc.lineAt(v);if(y.from==g)continue;g=y.from;let _=GA(p,y.from);if(null==_)continue;let b=/^\s*/.exec(y.text)[0],C=G1(p,_);b!=C&&m.push({from:y.from,to:y.from+b.length,insert:C})}return m.length?[c,{changes:m,sequential:!0}]:c}),DO(Sct,{fallback:!0}),kct(),[Kht,Bve],Wve(),Kat(),tlt(),jat,Yut(),OA.of([...Jht,...Qut,...mht,...rut,...gct,...Gve,...ddt])])();class S3{constructor(a,l,h,d,f,p,g,m,v,y=0,_){this.p=a,this.stack=l,this.state=h,this.reducePos=d,this.pos=f,this.score=p,this.buffer=g,this.bufferBase=m,this.curContext=v,this.lookAhead=y,this.parent=_}toString(){return`[${this.stack.filter((a,l)=>l%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(a,l,h=0){let d=a.parser.context;return new S3(a,[],l,h,h,0,[],0,d?new rye(d,d.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(a,l){this.stack.push(this.state,l,this.bufferBase+this.buffer.length),this.state=a}reduce(a){var l;let h=a>>19,d=65535&a,{parser:f}=this.p,p=f.dynamicPrecedence(d);if(p&&(this.score+=p),0==h)return this.pushState(f.getGoto(this.state,d,!0),this.reducePos),d<f.minRepeatTerm&&this.storeNode(d,this.reducePos,this.reducePos,4,!0),void this.reduceContext(d,this.reducePos);let g=this.stack.length-3*(h-1)-(262144&a?6:0),m=g?this.stack[g-2]:this.p.ranges[0].from,v=this.reducePos-m;v>=2e3&&(null===(l=this.p.parser.nodeSet.types[d])||void 0===l||!l.isAnonymous)&&(m==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=v):this.p.lastBigReductionSize<v&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=m,this.p.lastBigReductionSize=v));let _=this.bufferBase+this.buffer.length-(g?this.stack[g-1]:0);if(d<f.minRepeatTerm||131072&a){let b=f.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(d,m,b,_+4,!0)}for(this.state=262144&a?this.stack[g]:f.getGoto(this.stack[g-3],d,!0);this.stack.length>g;)this.stack.pop();this.reduceContext(d,m)}storeNode(a,l,h,d=4,f=!1){if(0==a&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let p=this,g=this.buffer.length;if(0==g&&p.parent&&(g=p.bufferBase-p.parent.bufferBase,p=p.parent),g>0&&0==p.buffer[g-4]&&p.buffer[g-1]>-1){if(l==h)return;if(p.buffer[g-2]>=l)return void(p.buffer[g-2]=h)}}if(f&&this.pos!=h){let p=this.buffer.length;if(p>0&&0!=this.buffer[p-4])for(;p>0&&this.buffer[p-2]>h;)this.buffer[p]=this.buffer[p-4],this.buffer[p+1]=this.buffer[p-3],this.buffer[p+2]=this.buffer[p-2],this.buffer[p+3]=this.buffer[p-1],p-=4,d>4&&(d-=4);this.buffer[p]=a,this.buffer[p+1]=l,this.buffer[p+2]=h,this.buffer[p+3]=d}else this.buffer.push(a,l,h,d)}shift(a,l,h){let d=this.pos;if(131072&a)this.pushState(65535&a,this.pos);else if(262144&a)this.pos=h,this.shiftContext(l,d),l<=this.p.parser.maxNode&&this.buffer.push(l,d,h,4);else{let f=a,{parser:p}=this.p;(h>this.pos||l<=p.maxNode)&&(this.pos=h,p.stateFlag(f,1)||(this.reducePos=h)),this.pushState(f,d),this.shiftContext(l,d),l<=p.maxNode&&this.buffer.push(l,d,h,4)}}apply(a,l,h){65536&a?this.reduce(a):this.shift(a,l,h)}useNode(a,l){let h=this.p.reused.length-1;(h<0||this.p.reused[h]!=a)&&(this.p.reused.push(a),h++);let d=this.pos;this.reducePos=this.pos=d+a.length,this.pushState(l,d),this.buffer.push(h,d,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,a,this,this.p.stream.reset(this.pos-a.length)))}split(){let a=this,l=a.buffer.length;for(;l>0&&a.buffer[l-2]>a.reducePos;)l-=4;let h=a.buffer.slice(l),d=a.bufferBase+l;for(;a&&d==a.bufferBase;)a=a.parent;return new S3(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,h,d,this.curContext,this.lookAhead,a)}recoverByDelete(a,l){let h=a<=this.p.parser.maxNode;h&&this.storeNode(a,this.pos,l,4),this.storeNode(0,this.pos,l,h?8:4),this.pos=this.reducePos=l,this.score-=190}canShift(a){for(let l=new Sdt(this);;){let h=this.p.parser.stateSlot(l.state,4)||this.p.parser.hasAction(l.state,a);if(0==h)return!1;if(!(65536&h))return!0;l.reduce(h)}}recoverByInsert(a){if(this.stack.length>=300)return[];let l=this.p.parser.nextStates(this.state);if(l.length>8||this.stack.length>=120){let d=[];for(let p,f=0;f<l.length;f+=2)(p=l[f+1])!=this.state&&this.p.parser.hasAction(p,a)&&d.push(l[f],p);if(this.stack.length<120)for(let f=0;d.length<8&&f<l.length;f+=2){let p=l[f+1];d.some((g,m)=>1&m&&g==p)||d.push(l[f],p)}l=d}let h=[];for(let d=0;d<l.length&&h.length<4;d+=2){let f=l[d+1];if(f==this.state)continue;let p=this.split();p.pushState(f,this.pos),p.storeNode(0,p.pos,p.pos,4,!0),p.shiftContext(l[d],this.pos),p.score-=200,h.push(p)}return h}forceReduce(){let a=this.p.parser.stateSlot(this.state,5);if(!(65536&a))return!1;let{parser:l}=this.p;if(!l.validAction(this.state,a)){let f=this.stack.length-3*(a>>19);if(f<0||l.getGoto(this.stack[f],65535&a,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(a),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:a}=this.p;return 65535==a.data[a.stateSlot(this.state,1)]&&!a.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(a){if(this.state!=a.state||this.stack.length!=a.stack.length)return!1;for(let l=0;l<this.stack.length;l+=3)if(this.stack[l]!=a.stack[l])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(a){return this.p.parser.dialect.flags[a]}shiftContext(a,l){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,a,this,this.p.stream.reset(l)))}reduceContext(a,l){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,a,this,this.p.stream.reset(l)))}emitContext(){let a=this.buffer.length-1;(a<0||-3!=this.buffer[a])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let a=this.buffer.length-1;(a<0||-4!=this.buffer[a])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(a){if(a!=this.curContext.context){let l=new rye(this.curContext.tracker,a);l.hash!=this.curContext.hash&&this.emitContext(),this.curContext=l}}setLookAhead(a){a>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=a)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class rye{constructor(a,l){this.tracker=a,this.context=l,this.hash=a.strict?a.hash(l):0}}class Sdt{constructor(a){this.start=a,this.state=a.state,this.stack=a.stack,this.base=this.stack.length}reduce(a){let l=65535&a,h=a>>19;0==h?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(h-1);let d=this.start.p.parser.getGoto(this.stack[this.base-3],l,!0);this.state=d}}class x3{constructor(a,l,h){this.stack=a,this.pos=l,this.index=h,this.buffer=a.buffer,0==this.index&&this.maybeNext()}static create(a,l=a.bufferBase+a.buffer.length){return new x3(a,l,l-a.bufferBase)}maybeNext(){let a=this.stack.parent;null!=a&&(this.index=this.stack.bufferBase-a.bufferBase,this.stack=a,this.buffer=a.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new x3(this.stack,this.pos,this.index)}}function LO(c,a=Uint16Array){if("string"!=typeof c)return c;let l=null;for(let h=0,d=0;h<c.length;){let f=0;for(;;){let p=c.charCodeAt(h++),g=!1;if(126==p){f=65535;break}p>=92&&p--,p>=34&&p--;let m=p-32;if(m>=46&&(m-=46,g=!0),f+=m,g)break;f*=46}l?l[d++]=f:l=new a(f)}return l}class w3{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const sye=new w3;class xdt{constructor(a,l){this.input=a,this.ranges=l,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=sye,this.rangeIndex=0,this.pos=this.chunkPos=l[0].from,this.range=l[0],this.end=l[l.length-1].to,this.readNext()}resolveOffset(a,l){let h=this.range,d=this.rangeIndex,f=this.pos+a;for(;f<h.from;){if(!d)return null;let p=this.ranges[--d];f-=h.from-p.to,h=p}for(;l<0?f>h.to:f>=h.to;){if(d==this.ranges.length-1)return null;let p=this.ranges[++d];f+=p.from-h.to,h=p}return f}clipPos(a){if(a>=this.range.from&&a<this.range.to)return a;for(let l of this.ranges)if(l.to>a)return Math.max(a,l.from);return this.end}peek(a){let h,d,l=this.chunkOff+a;if(l>=0&&l<this.chunk.length)h=this.pos+a,d=this.chunk.charCodeAt(l);else{let f=this.resolveOffset(a,1);if(null==f)return-1;if(h=f,h>=this.chunk2Pos&&h<this.chunk2Pos+this.chunk2.length)d=this.chunk2.charCodeAt(h-this.chunk2Pos);else{let p=this.rangeIndex,g=this.range;for(;g.to<=h;)g=this.ranges[++p];this.chunk2=this.input.chunk(this.chunk2Pos=h),h+this.chunk2.length>g.to&&(this.chunk2=this.chunk2.slice(0,g.to-h)),d=this.chunk2.charCodeAt(0)}}return h>=this.token.lookAhead&&(this.token.lookAhead=h+1),d}acceptToken(a,l=0){let h=l?this.resolveOffset(l,-1):this.pos;if(null==h||h<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=a,this.token.end=h}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:a,chunkPos:l}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=a,this.chunk2Pos=l,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let a=this.input.chunk(this.pos);this.chunk=this.pos+a.length>this.range.to?a.slice(0,this.range.to-this.pos):a,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.next=this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?-1:this.chunk.charCodeAt(this.chunkOff)}advance(a=1){for(this.chunkOff+=a;this.pos+a>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();a-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=a,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(a,l){if(l?(this.token=l,l.start=a,l.lookAhead=a+1,l.value=l.extended=-1):this.token=sye,this.pos!=a){if(this.pos=a,a==this.end)return this.setDone(),this;for(;a<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;a>=this.range.to;)this.range=this.ranges[++this.rangeIndex];a>=this.chunkPos&&a<this.chunkPos+this.chunk.length?this.chunkOff=a-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(a,l){if(a>=this.chunkPos&&l<=this.chunkPos+this.chunk.length)return this.chunk.slice(a-this.chunkPos,l-this.chunkPos);if(a>=this.chunk2Pos&&l<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(a-this.chunk2Pos,l-this.chunk2Pos);if(a>=this.range.from&&l<=this.range.to)return this.input.read(a,l);let h="";for(let d of this.ranges){if(d.from>=l)break;d.to>a&&(h+=this.input.read(Math.max(d.from,a),Math.min(d.to,l)))}return h}}class nb{constructor(a,l){this.data=a,this.id=l}token(a,l){let{parser:h}=l.p;oye(this.data,a,l,this.id,h.data,h.tokenPrecTable)}}nb.prototype.contextual=nb.prototype.fallback=nb.prototype.extend=!1;class T${constructor(a,l,h){this.precTable=l,this.elseToken=h,this.data="string"==typeof a?LO(a):a}token(a,l){let d,h=a.pos;for(;d=a.pos,oye(this.data,a,l,0,this.data,this.precTable),!(a.token.value>-1);){if(null==this.elseToken)return;if(a.next<0)break;a.advance(),a.reset(d+1,a.token)}d>h&&(a.reset(h,a.token),a.acceptToken(this.elseToken,d-h))}}T$.prototype.contextual=nb.prototype.fallback=nb.prototype.extend=!1;class k${constructor(a,l={}){this.token=a,this.contextual=!!l.contextual,this.fallback=!!l.fallback,this.extend=!!l.extend}}function oye(c,a,l,h,d,f){let p=0,g=1<<h,{dialect:m}=l.p.parser;e:for(;g&c[p];){let v=c[p+1];for(let C=p+3;C<v;C+=2)if((c[C+1]&g)>0){let x=c[C];if(m.allows(x)&&(-1==a.token.value||a.token.value==x||wdt(x,a.token.value,d,f))){a.acceptToken(x);break}}let y=a.next,_=0,b=c[p+2];if(!(a.next<0&&b>_&&65535==c[v+3*b-3]&&65535==c[v+3*b-3])){for(;_<b;){let C=_+b>>1,x=v+C+(C<<1);if(y<c[x])b=C;else{if(!(y>=(c[x+1]||65536))){p=c[x+2],a.advance();continue e}_=C+1}}break}p=c[v+3*b-1]}}function aye(c,a,l){for(let d,h=a;65535!=(d=c[h]);h++)if(d==l)return h-a;return-1}function wdt(c,a,l,h){let d=aye(l,h,a);return d<0||aye(l,h,c)<d}const Ih=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let M$=null;function lye(c,a,l){let h=c.cursor(_s.IncludeAnonymous);for(h.moveTo(a);;)if(!(l<0?h.childBefore(a):h.childAfter(a)))for(;;){if((l<0?h.to<a:h.from>a)&&!h.type.isError)return l<0?Math.max(0,Math.min(h.to-1,a-25)):Math.min(c.length,Math.max(h.from+1,a+25));if(l<0?h.prevSibling():h.nextSibling())break;if(!h.parent())return l<0?0:c.length}}class Odt{constructor(a,l){this.fragments=a,this.nodeSet=l,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let a=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(a){for(this.safeFrom=a.openStart?lye(a.tree,a.from+a.offset,1)-a.offset:a.from,this.safeTo=a.openEnd?lye(a.tree,a.to+a.offset,-1)-a.offset:a.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(a.tree),this.start.push(-a.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(a){if(a<this.nextStart)return null;for(;this.fragment&&this.safeTo<=a;)this.nextFragment();if(!this.fragment)return null;for(;;){let l=this.trees.length-1;if(l<0)return this.nextFragment(),null;let h=this.trees[l],d=this.index[l];if(d==h.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let f=h.children[d],p=this.start[l]+h.positions[d];if(p>a)return this.nextStart=p,null;if(f instanceof Vs){if(p==a){if(p<this.safeFrom)return null;let g=p+f.length;if(g<=this.safeTo){let m=f.prop(Xi.lookAhead);if(!m||g+m<this.fragment.to)return f}}this.index[l]++,p+f.length>=Math.max(this.safeFrom,a)&&(this.trees.push(f),this.start.push(p),this.index.push(0))}else this.index[l]++,this.nextStart=p+f.length}}}class Ddt{constructor(a,l){this.stream=l,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=a.tokenizers.map(h=>new w3)}getActions(a){let l=0,h=null,{parser:d}=a.p,{tokenizers:f}=d,p=d.stateSlot(a.state,3),g=a.curContext?a.curContext.hash:0,m=0;for(let v=0;v<f.length;v++){if(!(1<<v&p))continue;let y=f[v],_=this.tokens[v];if((!h||y.fallback)&&((y.contextual||_.start!=a.pos||_.mask!=p||_.context!=g)&&(this.updateCachedToken(_,y,a),_.mask=p,_.context=g),_.lookAhead>_.end+25&&(m=Math.max(_.lookAhead,m)),0!=_.value)){let b=l;if(_.extended>-1&&(l=this.addActions(a,_.extended,_.end,l)),l=this.addActions(a,_.value,_.end,l),!y.extend&&(h=_,l>b))break}}for(;this.actions.length>l;)this.actions.pop();return m&&a.setLookAhead(m),!h&&a.pos==this.stream.end&&(h=new w3,h.value=a.p.parser.eofTerm,h.start=h.end=a.pos,l=this.addActions(a,h.value,h.end,l)),this.mainToken=h,this.actions}getMainToken(a){if(this.mainToken)return this.mainToken;let l=new w3,{pos:h,p:d}=a;return l.start=h,l.end=Math.min(h+1,d.stream.end),l.value=h==d.stream.end?d.parser.eofTerm:0,l}updateCachedToken(a,l,h){let d=this.stream.clipPos(h.pos);if(l.token(this.stream.reset(d,a),h),a.value>-1){let{parser:f}=h.p;for(let p=0;p<f.specialized.length;p++)if(f.specialized[p]==a.value){let g=f.specializers[p](this.stream.read(a.start,a.end),h);if(g>=0&&h.p.parser.dialect.allows(g>>1)){1&g?a.extended=g>>1:a.value=g>>1;break}}}else a.value=0,a.end=this.stream.clipPos(d+1)}putAction(a,l,h,d){for(let f=0;f<d;f+=3)if(this.actions[f]==a)return d;return this.actions[d++]=a,this.actions[d++]=l,this.actions[d++]=h,d}addActions(a,l,h,d){let{state:f}=a,{parser:p}=a.p,{data:g}=p;for(let m=0;m<2;m++)for(let v=p.stateSlot(f,m?2:1);;v+=3){if(65535==g[v]){if(1!=g[v+1]){0==d&&2==g[v+1]&&(d=this.putAction(dp(g,v+2),l,h,d));break}v=dp(g,v+2)}g[v]==l&&(d=this.putAction(dp(g,v+1),l,h,d))}return d}}class Tdt{constructor(a,l,h,d){this.parser=a,this.input=l,this.ranges=d,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new xdt(l,d),this.tokens=new Ddt(a,this.stream),this.topTerm=a.top[1];let{from:f}=d[0];this.stacks=[S3.start(this,a.top[0],f)],this.fragments=h.length&&this.stream.end-f>4*a.bufferLength?new Odt(h,a.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let d,f,a=this.stacks,l=this.minStackPos,h=this.stacks=[];if(this.bigReductionCount>300&&1==a.length){let[p]=a;for(;p.forceReduce()&&p.stack.length&&p.stack[p.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let p=0;p<a.length;p++){let g=a[p];for(;;){if(this.tokens.mainToken=null,g.pos>l)h.push(g);else{if(this.advanceStack(g,h,a))continue;{d||(d=[],f=[]),d.push(g);let m=this.tokens.getMainToken(g);f.push(m.value,m.end)}}break}}if(!h.length){let p=d&&function Edt(c){let a=null;for(let l of c){let h=l.p.stoppedAt;(l.pos==l.p.stream.end||null!=h&&l.pos>h)&&l.p.parser.stateFlag(l.state,2)&&(!a||a.score<l.score)&&(a=l)}return a}(d);if(p)return this.stackToTree(p);if(this.parser.strict)throw Ih&&d&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+l);this.recovering||(this.recovering=5)}if(this.recovering&&d){let p=null!=this.stoppedAt&&d[0].pos>this.stoppedAt?d[0]:this.runRecovery(d,f,h);if(p)return this.stackToTree(p.forceAll())}if(this.recovering){let p=1==this.recovering?1:3*this.recovering;if(h.length>p)for(h.sort((g,m)=>m.score-g.score);h.length>p;)h.pop();h.some(g=>g.reducePos>l)&&this.recovering--}else if(h.length>1){e:for(let p=0;p<h.length-1;p++){let g=h[p];for(let m=p+1;m<h.length;m++){let v=h[m];if(g.sameState(v)||g.buffer.length>500&&v.buffer.length>500){if(!((g.score-v.score||g.buffer.length-v.buffer.length)>0)){h.splice(p--,1);continue e}h.splice(m--,1)}}}h.length>12&&h.splice(12,h.length-12)}this.minStackPos=h[0].pos;for(let p=1;p<h.length;p++)h[p].pos<this.minStackPos&&(this.minStackPos=h[p].pos);return null}stopAt(a){if(null!=this.stoppedAt&&this.stoppedAt<a)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=a}advanceStack(a,l,h){let d=a.pos,{parser:f}=this,p=Ih?this.stackID(a)+" -> ":"";if(null!=this.stoppedAt&&d>this.stoppedAt)return a.forceReduce()?a:null;if(this.fragments){let v=a.curContext&&a.curContext.tracker.strict,y=v?a.curContext.hash:0;for(let _=this.fragments.nodeAt(d);_;){let b=this.parser.nodeSet.types[_.type.id]==_.type?f.getGoto(a.state,_.type.id):-1;if(b>-1&&_.length&&(!v||(_.prop(Xi.contextHash)||0)==y))return a.useNode(_,b),Ih&&console.log(p+this.stackID(a)+` (via reuse of ${f.getName(_.type.id)})`),!0;if(!(_ instanceof Vs)||0==_.children.length||_.positions[0]>0)break;let C=_.children[0];if(!(C instanceof Vs&&0==_.positions[0]))break;_=C}}let g=f.stateSlot(a.state,4);if(g>0)return a.reduce(g),Ih&&console.log(p+this.stackID(a)+` (via always-reduce ${f.getName(65535&g)})`),!0;if(a.stack.length>=15e3)for(;a.stack.length>9e3&&a.forceReduce(););let m=this.tokens.getActions(a);for(let v=0;v<m.length;){let y=m[v++],_=m[v++],b=m[v++],C=v==m.length||!h,x=C?a:a.split();if(x.apply(y,_,b),Ih&&console.log(p+this.stackID(x)+` (via ${65536&y?`reduce of ${f.getName(65535&y)}`:"shift"} for ${f.getName(_)} @ ${d}${x==a?"":", split"})`),C)return!0;x.pos>d?l.push(x):h.push(x)}return!1}advanceFully(a,l){let h=a.pos;for(;;){if(!this.advanceStack(a,null,null))return!1;if(a.pos>h)return cye(a,l),!0}}runRecovery(a,l,h){let d=null,f=!1;for(let p=0;p<a.length;p++){let g=a[p],m=l[p<<1],v=l[1+(p<<1)],y=Ih?this.stackID(g)+" -> ":"";if(g.deadEnd&&(f||(f=!0,g.restart(),Ih&&console.log(y+this.stackID(g)+" (restarted)"),this.advanceFully(g,h))))continue;let _=g.split(),b=y;for(let C=0;_.forceReduce()&&C<10&&(Ih&&console.log(b+this.stackID(_)+" (via force-reduce)"),!this.advanceFully(_,h));C++)Ih&&(b=this.stackID(_)+" -> ");for(let C of g.recoverByInsert(m))Ih&&console.log(y+this.stackID(C)+" (via recover-insert)"),this.advanceFully(C,h);this.stream.end>g.pos?(v==g.pos&&(v++,m=0),g.recoverByDelete(m,v),Ih&&console.log(y+this.stackID(g)+` (via recover-delete ${this.parser.getName(m)})`),cye(g,h)):(!d||d.score<g.score)&&(d=g)}return d}stackToTree(a){return a.close(),Vs.build({buffer:x3.create(a),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:a.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(a){let l=(M$||(M$=new WeakMap)).get(a);return l||M$.set(a,l=String.fromCodePoint(this.nextStackID++)),l+a}}function cye(c,a){for(let l=0;l<a.length;l++){let h=a[l];if(h.pos==c.pos&&h.sameState(c))return void(a[l].score<c.score&&(a[l]=c))}a.push(c)}class kdt{constructor(a,l,h){this.source=a,this.flags=l,this.disabled=h}allows(a){return!this.disabled||0==this.disabled[a]}}const E$=c=>c;class O3 extends Rme{constructor(a){if(super(),this.wrappers=[],14!=a.version)throw new RangeError(`Parser version (${a.version}) doesn't match runtime version (14)`);let l=a.nodeNames.split(" ");this.minRepeatTerm=l.length;for(let g=0;g<a.repeatNodeCount;g++)l.push("");let h=Object.keys(a.topRules).map(g=>a.topRules[g][1]),d=[];for(let g=0;g<l.length;g++)d.push([]);function f(g,m,v){d[g].push([m,m.deserialize(String(v))])}if(a.nodeProps)for(let g of a.nodeProps){let m=g[0];"string"==typeof m&&(m=Xi[m]);for(let v=1;v<g.length;){let y=g[v++];if(y>=0)f(y,m,g[v++]);else{let _=g[v+-y];for(let b=-y;b>0;b--)f(g[v++],m,_);v++}}}this.nodeSet=new PA(l.map((g,m)=>Al.define({name:m>=this.minRepeatTerm?void 0:g,id:m,props:d[m],top:h.indexOf(m)>-1,error:0==m,skipped:a.skippedNodes&&a.skippedNodes.indexOf(m)>-1}))),a.propSources&&(this.nodeSet=this.nodeSet.extend(...a.propSources)),this.strict=!1,this.bufferLength=Mme;let p=LO(a.tokenData);this.context=a.context,this.specializerSpecs=a.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let g=0;g<this.specializerSpecs.length;g++)this.specialized[g]=this.specializerSpecs[g].term;this.specializers=this.specializerSpecs.map(uye),this.states=LO(a.states,Uint32Array),this.data=LO(a.stateData),this.goto=LO(a.goto),this.maxTerm=a.maxTerm,this.tokenizers=a.tokenizers.map(g=>"number"==typeof g?new nb(p,g):g),this.topRules=a.topRules,this.dialects=a.dialects||{},this.dynamicPrecedences=a.dynamicPrecedences||null,this.tokenPrecTable=a.tokenPrec,this.termNames=a.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(a,l,h){let d=new Tdt(this,a,l,h);for(let f of this.wrappers)d=f(d,a,l,h);return d}getGoto(a,l,h=!1){let d=this.goto;if(l>=d[0])return-1;for(let f=d[l+1];;){let p=d[f++],g=1&p,m=d[f++];if(g&&h)return m;for(let v=f+(p>>1);f<v;f++)if(d[f]==a)return m;if(g)return-1}}hasAction(a,l){let h=this.data;for(let d=0;d<2;d++)for(let p,f=this.stateSlot(a,d?2:1);;f+=3){if(65535==(p=h[f])){if(1!=h[f+1]){if(2==h[f+1])return dp(h,f+2);break}p=h[f=dp(h,f+2)]}if(p==l||0==p)return dp(h,f+1)}return 0}stateSlot(a,l){return this.states[6*a+l]}stateFlag(a,l){return(this.stateSlot(a,0)&l)>0}validAction(a,l){if(l==this.stateSlot(a,4))return!0;for(let h=this.stateSlot(a,1);;h+=3){if(65535==this.data[h]){if(1!=this.data[h+1])return!1;h=dp(this.data,h+2)}if(l==dp(this.data,h+1))return!0}}nextStates(a){let l=[];for(let h=this.stateSlot(a,1);;h+=3){if(65535==this.data[h]){if(1!=this.data[h+1])break;h=dp(this.data,h+2)}if(!(1&this.data[h+2])){let d=this.data[h+1];l.some((f,p)=>1&p&&f==d)||l.push(this.data[h],d)}}return l}configure(a){let l=Object.assign(Object.create(O3.prototype),this);if(a.props&&(l.nodeSet=this.nodeSet.extend(...a.props)),a.top){let h=this.topRules[a.top];if(!h)throw new RangeError(`Invalid top rule name ${a.top}`);l.top=h}return a.tokenizers&&(l.tokenizers=this.tokenizers.map(h=>{let d=a.tokenizers.find(f=>f.from==h);return d?d.to:h})),a.specializers&&(l.specializers=this.specializers.slice(),l.specializerSpecs=this.specializerSpecs.map((h,d)=>{let f=a.specializers.find(g=>g.from==h.external);if(!f)return h;let p=Object.assign(Object.assign({},h),{external:f.to});return l.specializers[d]=uye(p),p})),a.contextTracker&&(l.context=a.contextTracker),a.dialect&&(l.dialect=this.parseDialect(a.dialect)),null!=a.strict&&(l.strict=a.strict),a.wrap&&(l.wrappers=l.wrappers.concat(a.wrap)),null!=a.bufferLength&&(l.bufferLength=a.bufferLength),l}hasWrappers(){return this.wrappers.length>0}getName(a){return this.termNames?this.termNames[a]:String(a<=this.maxNode&&this.nodeSet.types[a].name||a)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(a){let l=this.dynamicPrecedences;return null==l?0:l[a]||0}parseDialect(a){let l=Object.keys(this.dialects),h=l.map(()=>!1);if(a)for(let f of a.split(" ")){let p=l.indexOf(f);p>=0&&(h[p]=!0)}let d=null;for(let f=0;f<l.length;f++)if(!h[f])for(let g,p=this.dialects[l[f]];65535!=(g=this.data[p++]);)(d||(d=new Uint8Array(this.maxTerm+1)))[g]=1;return new kdt(a,h,d)}static deserialize(a){return new O3(a)}}function dp(c,a){return c[a]|c[a+1]<<16}function uye(c){if(c.external){let a=c.extend?1:0;return(l,h)=>c.external(l,h)<<1|a}return c.get}const Ldt=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],zdt=new class Mdt{constructor(a){this.start=a.start,this.shift=a.shift||E$,this.reduce=a.reduce||E$,this.reuse=a.reuse||E$,this.hash=a.hash||(()=>0),this.strict=!1!==a.strict}}({start:!1,shift:(c,a)=>3==a||4==a||322==a?c:323==a,strict:!1}),Hdt=new k$((c,a)=>{let{next:l}=c;(125==l||-1==l||a.context)&&a.canShift(320)&&c.acceptToken(320)},{contextual:!0,fallback:!0}),$dt=new k$((c,a)=>{let h,{next:l}=c;Ldt.indexOf(l)>-1||47==l&&(47==(h=c.peek(1))||42==h)||125!=l&&59!=l&&-1!=l&&!a.context&&a.canShift(319)&&c.acceptToken(319)},{contextual:!0}),Wdt=new k$((c,a)=>{let{next:l}=c;if((43==l||45==l)&&(c.advance(),l==c.next)){c.advance();let h=!a.context&&a.canShift(1);c.acceptToken(h?1:2)}},{contextual:!0}),Gdt=Ume({"get set async static":Te.modifier,"for while do if else switch try catch finally return throw break continue default case \u0431\u0440\u043e\u0441\u0438\u0442\u044c":Te.controlKeyword,"in of await yield void typeof delete instanceof":Te.operatorKeyword,"let var const function class extends":Te.definitionKeyword,"import export from":Te.moduleKeyword,"with debugger as new":Te.keyword,TemplateString:Te.special(Te.string),super:Te.atom,BooleanLiteral:Te.bool,this:Te.self,null:Te.null,Star:Te.modifier,VariableName:Te.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Te.function(Te.variableName),VariableDefinition:Te.definition(Te.variableName),Label:Te.labelName,PropertyName:Te.propertyName,PrivatePropertyName:Te.special(Te.propertyName),"CallExpression/MemberExpression/PropertyName":Te.function(Te.propertyName),"FunctionDeclaration/VariableDefinition":Te.function(Te.definition(Te.variableName)),"ClassDeclaration/VariableDefinition":Te.definition(Te.className),PropertyDefinition:Te.definition(Te.propertyName),PrivatePropertyDefinition:Te.definition(Te.special(Te.propertyName)),UpdateOp:Te.updateOperator,LineComment:Te.lineComment,BlockComment:Te.blockComment,Number:Te.number,String:Te.string,Escape:Te.escape,ArithOp:Te.arithmeticOperator,LogicOp:Te.logicOperator,BitOp:Te.bitwiseOperator,CompareOp:Te.compareOperator,RegExp:Te.regexp,Equals:Te.definitionOperator,Arrow:Te.function(Te.punctuation),": Spread":Te.punctuation,"( )":Te.paren,"[ ]":Te.squareBracket,"{ }":Te.brace,"InterpolationStart InterpolationEnd":Te.special(Te.brace),".":Te.derefOperator,", ;":Te.separator,"@":Te.meta,TypeName:Te.typeName,TypeDefinition:Te.definition(Te.typeName),"type enum interface implements namespace module declare":Te.definitionKeyword,"abstract global Privacy readonly override":Te.modifier,"is keyof unique infer":Te.operatorKeyword,JSXAttributeValue:Te.attributeValue,JSXText:Te.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Te.angleBracket,"JSXIdentifier JSXNameSpacedName":Te.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Te.attributeName,"JSXBuiltin/JSXIdentifier":Te.standard(Te.tagName)}),Qdt={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,\u043d\u0443\u043b\u044c:96,\u044d\u0442\u043e:98,super:100,constructor:102,\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440:104,new:138,delete:154,yield:163,await:167,class:172,\u043a\u043b\u0430\u0441\u0441:174,public:229,private:229,protected:229,readonly:231,instanceof:250,satisfies:253,in:254,const:256,import:288,keyof:343,unique:347,infer:353,is:389,abstract:409,implements:411,type:413,let:416,var:418,interface:425,enum:429,namespace:435,module:437,declare:441,global:445,for:466,\u0446\u0438\u043a\u043b:468,of:477,while:480,\u043f\u043e\u043a\u0430:482,with:486,do:490,\u0434\u0435\u043b\u0430\u0442\u044c:492,if:496,\u0435\u0441\u043b\u0438:498,else:500,\u0438\u043d\u0430\u0447\u0435:502,switch:506,case:512,try:518,\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c:520,catch:524,\u043b\u043e\u0432\u0438\u0442\u044c:526,\u043f\u043e\u0439\u043c\u0430\u0442\u044c:528,finally:532,\u0432\u0441\u0435\u0433\u0434\u0430:534,return:538,\u0432\u0435\u0440\u043d\u0443\u0442\u044c:540,throw:544,\u0431\u0440\u043e\u0441\u0438\u0442\u044c:546,break:550,\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c:552,continue:556,\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c:558,debugger:562},jdt={__proto__:null,async:125,get:127,set:129,public:191,private:191,protected:191,static:193,abstract:195,override:197,readonly:203,accessor:205,new:393},Zdt={__proto__:null,"<":145},qdt=O3.deserialize({version:14,states:"$BnO`QUOOO&PQUOOO(fQWOOP)sOSOOO,RQ(CjO'#CfO,YQ(CjO'#CfO,vOpO'#CgO-UO!bO'#CgO-dO07`O'#DZO0XQUO'#DeO0iQUO'#DpO&PQUO'#DzO3PQUO'#ESOOQ(CY'#E]'#E]O3jQSO'#EYOOQO'#Iq'#IqO3uQSO'#GoOOQO'#Em'#EmO4QQSO'#ElO4VQSO'#ElO6XQ(CjO'#JvO8xQ(CjO'#JwO9fQSO'#F[O9kQ#tO'#FsOOQ(CY'#Fd'#FdO9vO&jO'#FdO:UQ,UO'#FzO;lQSO'#FyOOQ(CY'#Jw'#JwOOQ(CW'#Jv'#JvOOQQ'#Kb'#KbO;qQSO'#IbO;vQ(C[O'#IcOOQQ'#Jb'#JbOOQQ'#Ig'#IgQ`QUOOO&PQUO'#DrO<OQUO'#EOO&PQUO'#EQO<VQSO'#GoO<_QSO'#ETO<mQ,UO'#ClO=OQSO'#EkO=^QSO'#EvO=tQ,UO'#FcO>XQSO'#GoO>^QSO'#GsO>lQSO'#GsO>}QSO'#GvO>}QSO'#GwO>}QSO'#GyO<VQSO'#G|O?nQSO'#HPOAPQSO'#CbOAaQSO'#H^OAiQSO'#HeOAiQSO'#HhO`QUO'#HjOAiQSO'#HmOAiQSO'#HrOAnQSO'#HxOAsQ(C]O'#ISO&PQUO'#IVOBOQ(C]O'#IYOBZQ(C]O'#I]O;vQ(C[O'#I`O,YQ(CjO'#CfOBzQWO'#DjQOQSOOO<mQ,UO'#EkOCeQSO'#EkOCsQ`O'#FcOOQQ'#Cd'#CdOOQ(CW'#Do'#DoOOQ(CW'#Jz'#JzO&PQUO'#JzOEPQWO'#EdOOQ(CW'#Ec'#EcOEZQ(C`O'#EdOEuQWO'#EXOOQO'#J}'#J}OF^QWO'#EXOFkQWO'#EdOGRQWO'#EjOGUQWO'#EdOC{QWO'#EdOEuQWO'#EdPGoO?MpO'#C`POOO)CEP)CEPOOOO'#Ih'#IhOGzOpO,59ROOQ(CY,59R,59ROOOO'#Ii'#IiOHYO!bO,59RO&PQUO'#D]OOOO'#Ik'#IkOHhO07`O,59uOOQ(CY,59u,59uOHvQUO'#IlOIZQSO'#JxOK]QbO'#JxO-rQUO'#JxOKdQSO,5:POKzQSO'#EmOLXQSO'#KVOLdQSO'#KUOLdQSO'#KUOLlQSO,5;ZOLqQSO'#KTOOQ(CY,5:[,5:[OLxQUO,5:[ONyQ(CjO,5:fO! jQSO,5:nO!!QQSO'#KRO!!pQ(C[O'#KSO>^QSO'#KRO!!wQSO'#KRO!#PQSO,5;YO! oQSO'#KROOQ(CY'#Cf'#CfO&PQUO'#ESO!#jQ`O,5:tOOQO'#KO'#KOOOQO-E<o-E<oO<VQSO,5=ZO!$TQSO,5=ZO!$YQUO,5;WO!&oQ,UO'#EhO!(SQSO,5;WO!)lQ,UO'#DtO!)sQUO'#DyO!)}QWO,5;aO!*YQWO,5;aO&PQUO,5;aOOQQ'#FS'#FSOOQQ'#FU'#FUO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bO&PQUO,5;bOOQQ'#FY'#FYO!*kQUO,5;sOOQ(CY,5;x,5;xOOQ(CY,5;y,5;yO!-QQSO,5;yOOQ(CY,5;z,5;zO&PQUO'#IwO!-YQ(C[O,5<gO!&oQ,UO,5;bO!-wQ,UO,5;bO&PQUO,5;vO!.OQ#tO'#FiO!.{Q#tO'#KZO!.gQ#tO'#KZO!/SQ#tO'#KZOOQO'#KZ'#KZO!/hQ#tO,5<ROOOO,5<_,5<_O!/yQUO'#FuOOOO'#Iv'#IvO9vO&jO,5<OO!0QQ#tO'#FwOOQ(CY,5<O,5<OO!0qQ7[O'#CrOOQ(CY'#Cv'#CvO!1UQSO'#CvO!1ZO07`O'#CzO!1wQ,UO,5<dO!2OQSO,5<fO!3eQMhO'#GUO!3uQSO'#GVO!3zQSO'#GVO!4PQMhO'#GZO!5RQWO'#G_O!5tQ7[O'#JpOOQ(CY'#Jp'#JpO!6OQSO'#JoO!6^QSO'#JnO!6fQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO3mQSO'#DSO!(XQ,UO'#F|O!(XQ,UO'#GOO!6nQSO'#GQO!6sQSO'#GRO!3zQSO'#GXO!(XQ,UO'#G^O!7ZQSO'#EnO!7kQSO,5<eO`QUO,5>|OOQQ'#Jk'#JkOOQQ,5>},5>}OOQQ-E<e-E<eO!9jQ(CjO,5:^O!<WQ(CjO,5:jO&PQUO,5:jO!>qQ(CjO,5:lOOQ(CW'#Co'#CoO!?bQ,UO,5=ZO!?pQWO'#EWOOQ(CY,5:o,5:oO&PQUO,5:oO!?wQSO,5:oO!@PQ(C[O'#JlO;lQSO'#JlOAnQSO,59WO!@bQWO,59WO!@jQ,UO,59WO<mQ,UO,59WO!@xQSO,5;WO!AQQSO'#H]O!AfQSO'#KfO&PQUO,5;{O!AnQWO,5;}O!AvQSO,5=vO!A{QSO,5=vO=cQSO,5=vO;vQ(C[O,5=vO!BQQSO'#EoO!CQQWO'#EpOOQ(CW'#KT'#KTO!CXQ(C[O'#KcO;vQ(C[O,5=_O>}QSO,5=eOOQO'#Cr'#CrO!CdQWO,5=bO!ClQ,UO,5=cO!CwQSO,5=eO!C|Q`O,5=hOAnQSO'#HRO<VQSO'#HTO!DUQSO'#HTO<mQ,UO'#HWO!DZQSO'#HWOOQQ,5=k,5=kO!D`QSO'#HXO!DkQSO'#ClO!DpQSO,58|O!DzQSO,58|O!GfQUO,58|OOQQ,58|,58|O!GsQ(C[O,58|O&PQUO,58|O!HOQUO'#HaOOQQ'#Hb'#HbOOQQ'#Hc'#HcO`QUO,5=xO!H`QSO,5=xO`QUO,5>PO`QUO,5>SO!HeQSO,5>UO`QUO,5>XO!HjQSO,5>^O!HoQUO,5>dOOQQ,5>n,5>nO&PQUO,5>nO;vQ(C[O,5>qOOQQ,5>t,5>tO!NRQSO,5>tOOQQ,5>w,5>wO!NRQSO,5>wOOQQ,5>z,5>zO!NWQWO'#DXO&PQUO'#JzO!NuQWO'#JzO# dQWO'#DkO# uQWO'#DkO#$jQUO'#DkO#$tQSO'#JyO#$|QSO,5:UO#%RQSO'#EqO#%aQSO'#KWO#%iQSO,5;[O#%nQWO'#DkOAnQSO,5;VO!@bQWO,5;VO!@jQ,UO,5;VO<mQ,UO,5;VO#%{QSO,5@fO#&QQ!LQO,5:tO#'WQ(C`O,5;OOEuQWO,5:sO#'rQWO,5:sO#(PQWO,5;OO#(gQWO,5;OO#)QQWO,5;OOEuQWO,5;OOAnQSO,5:sOOQ(CW'#Eg'#EgOOQO,5;O,5;OO&PQUO,5;OO#)qQ(C[O,5;OO#)|Q(C[O,5;OO!@bQWO,5:sOOQO,5;U,5;UO#*[Q(C[O,5;OPOOO'#If'#IfP#*pO?MpO,58zPOOO,58z,58zOOOO-E<f-E<fOOQ(CY1G.m1G.mOOOO-E<g-E<gO#*{Q`O,59wOOOO-E<i-E<iOOQ(CY1G/a1G/aO#+QQbO,5?WO-rQUO,5?WOOQO,5?^,5?^O#+[QUO'#IlOOQO-E<j-E<jO#+iQSO,5@dO#+qQbO,5@dO#+xQSO,5@pOOQ(CY1G/k1G/kO&PQUO,5@qO#,QQSO'#IrOOQO-E<p-E<pO#+xQSO,5@pOOQ(CW1G0u1G0uOOQ(CY1G/v1G/vOOQ(CY1G0Y1G0YO#,iQSO,5@mO>^QSO,5@mO#,qQSO,5@mO&PQUO,5@nO#-SQ(C[O,5@nO#-eQ(C[O,5@nO#-lQSO'#ItO#,iQSO,5@mOOQ(CW1G0t1G0tO!)}QWO,5:vO!*]QWO,5:vOOQO,5:x,5:xO#.PQSO,5:xO#.XQ,UO1G2uO<VQSO1G2uOOQ(CY1G0r1G0rO#.gQ(CjO1G0rO#/lQ(ChO,5;SOOQ(CY'#GT'#GTO#0YQ(CjO'#JpO!$YQUO1G0rO#2bQ,UO'#J{O#2lQSO,5:`O#2qQbO'#J|O&PQUO'#J|O#2{QSO,5:eOOQ(CY'#DX'#DXOOQ(CY1G0{1G0{O&PQUO1G0{OOQ(CY1G1e1G1eO#3QQSO1G0{O#5iQ(CjO1G0|O#5pQ(CjO1G0|O#8ZQ(CjO1G0|O#8bQ(CjO1G0|O#:lQ(CjO1G0|O#;SQ(CjO1G0|O#=|Q(CjO1G0|O#>TQ(CjO1G0|O#@nQ(CjO1G0|O#@uQ(CjO1G0|O#BmQ(CjO1G0|O#EmQ$IUO'#CfO#GkQ$IUO1G1_O#IiQ$IUO'#JwO!-TQSO1G1eO#I|Q(CjO,5?cOOQ(CW-E<u-E<uO#JpQ(CjO1G0|OOQ(CY1G0|1G0|O#L{Q(CjO1G1bO#MoQ#tO,5<VO#MwQ#tO,5<WO#NPQ#tO'#FnO#NhQSO'#FmOOQO'#K['#K[OOQO'#Iu'#IuO#NmQ#tO1G1mOOQ(CY1G1m1G1mOOOO1G1x1G1xO$ OQ$IUO'#JvO$ YQSO,5<aO!*kQUO,5<aOOOO-E<t-E<tOOQ(CY1G1j1G1jO$ _QWO'#KZOOQ(CY,5<c,5<cO$ gQWO,5<cOOQ(CY,59b,59bO!&oQ,UO'#C|OOOO'#Ij'#IjO$ lO07`O,59fOOQ(CY,59f,59fO&PQUO1G2OO!6sQSO'#IyO$ wQSO,5<wOOQ(CY,5<t,5<tOOQO'#Gj'#GjO!(XQ,UO,5=TOOQO'#Gl'#GlO!(XQ,UO,5=VO!&oQ,UO,5=XOOQO1G2Q1G2QO$!VQ`O'#CoO$!jQ`O,5<pO$!qQSO'#K_O<VQSO'#K_O$#PQSO,5<rO!(XQ,UO,5<qO$#UQSO'#GWO$#dQSO,5<qO$#iQ`O'#GTO$#vQ`O'#K`O$$QQSO'#K`O!&oQ,UO'#K`O$$VQSO,5<uO$$[QWO'#G`O!4yQWO'#G`O$$mQSO'#GbO$$rQSO'#GdO!3zQSO'#GgO$$wQ(C[O'#I{O$%SQWO,5<yOOQ(CY,5<y,5<yO$%ZQWO'#G`O$%lQWO'#GaO$%wQWO'#GaOOQ(CY,5=Y,5=YO!(XQ,UO,5@ZO!(XQ,UO,5@ZO$%|QSO'#I|O$&XQSO,5@YO$&aQSO,59]O$'QQ,UO,59nOOQ(CY,59n,59nO$'sQ,UO,5<hO$(fQ,UO,5<jOBrQSO,5<lOOQ(CY,5<m,5<mO$(pQSO,5<sO$(uQ,UO,5<xO!$YQUO1G2PO$)VQSO1G2POOQQ1G4h1G4hOOQ(CY1G/x1G/xO!-QQSO1G/xO$+UQ(CjO1G0UOOQQ1G2u1G2uO!&oQ,UO1G2uO&PQUO1G2uO$+uQSO1G2uOOQO'#Ip'#IpO$,QQWO,5:rOOQ(CY,5:r,5:rO!?zQSO1G0ZOOQ(CY1G0Z1G0ZO&PQUO1G0ZO$,XQ,UO'#EhOOQ(CW,5@W,5@WO$,fQ(C[O,5@WOOQQ1G.r1G.rOAnQSO1G.rO!@bQWO1G.rO!@jQ,UO1G.rO$,wQSO1G0rO$,|QSO'#CfO$-XQSO'#KgO$-aQSO,5=wO$-fQSO'#KgO$-kQSO'#KgO$-yQSO'#JUO$.[QSO,5AQO$.dQbO1G1gOOQ(CY1G1i1G1iO<VQSO1G3bOBrQSO1G3bO$.kQSO1G3bO$.pQSO1G3bOOQQ1G3b1G3bO>^QSO'#KUO>^QSO'#EqO&PQUO'#EqO>^QSO'#JOO$.uQ(C[O,5@}OOQQ1G2y1G2yO!CwQSO1G3PO!&oQ,UO1G2|O$/QQSO1G2|OOQQ1G2}1G2}O!&oQ,UO1G2}O$/VQSO1G2}O$/_QWO'#G{OOQQ1G3P1G3PO!4yQWO'#JQO!C|Q`O1G3SOOQQ1G3S1G3SOOQQ,5=m,5=mO$/jQ,UO,5=oO<VQSO,5=oO$$rQSO,5=rO;lQSO,5=rO!@bQWO,5=rO!@jQ,UO,5=rO<mQ,UO,5=rO$/xQSO'#KeO$0TQSO,5=sOOQQ1G.h1G.hO$0YQ(C[O1G.hOBrQSO1G.hO$0eQSO1G.hO;vQ(C[O1G.hO$0sQbO,5ASO$1WQSO,5ASO$1cQUO,5={O$1jQSO,5={O>^QSO,5ASOOQQ1G3d1G3dO`QUO1G3dOOQQ1G3k1G3kOOQQ1G3n1G3nOAiQSO1G3pO$1oQUO1G3sO$6rQUO'#HtOOQQ1G3x1G3xO$7PQSO'#H{OAnQSO'#IPOOQQ1G4O1G4OO$7XQUO1G4OO;vQ(C[O1G4YOOQQ1G4]1G4]OOQ(CW'#G['#G[O;vQ(C[O1G4`O;vQ(C[O1G4cO$<bQSO,5@fO!*kQUO,5;]O>^QSO,5;]OAnQSO,5:VO!*kQUO,5:VO!@bQWO,5:VO$<gQ$IUO,5:VOOQO,5;],5;]O$<qQWO'#ImO$=[QSO,5@eOOQ(CY1G/p1G/pO$=dQWO'#IsO$=nQSO,5@rOOQ(CW1G0v1G0vO# uQWO,5:VOOQ(CY1G0q1G0qOAnQSO1G0qO!@bQWO1G0qO!@jQ,UO1G0qOOQ(CW1G6Q1G6QOAnQSO1G0_OOQO1G0j1G0jO&PQUO1G0jO$=vQ(C[O1G0jO$>RQ(C[O1G0jO!@bQWO1G0_OEuQWO1G0_O$>aQ(C`O1G0jO$>{QWO1G0_OEuQWO1G0jO$?YQWO1G0jO$?pQWO1G0jO$@ZQ(C[O1G0jOOQO1G0_1G0_O$@oQ(CjO1G0jPOOO-E<d-E<dPOOO1G.f1G.fOOOO1G/c1G/cO$@yQ`O,5<gO$ARQbO1G4rOOQO1G4x1G4xO&PQUO,5?WO$A]QSO1G6OO$AeQSO1G6[O$AmQbO1G6]O>^QSO,5?^O$AwQSO1G6XO$AwQSO1G6XO>^QSO1G6XO$BPQ(CjO1G6YO&PQUO1G6YO$BaQ(C[O1G6YO$BrQSO,5?`O>^QSO,5?`OOQO,5?`,5?`O$B|QSO,5?`OOQO-E<r-E<rOOQO1G0b1G0bOOQO1G0d1G0dO!-TQSO1G0dOOQQ7+(a7+(aO!&oQ,UO7+(aO&PQUO7+(aO$C_QSO7+(aO$CjQ,UO7+(aO$CxQ(CjO,59nO$FQQ(CjO,5<hO$H]Q(CjO,5<jO$JhQ(CjO,5<xOOQ(CY7+&^7+&^O$LyQ(CjO7+&^O$MmQ,UO'#InO$MwQSO,5@gOOQ(CY1G/z1G/zO$NPQUO'#IoO$N^QSO,5@hO$NfQbO,5@hOOQ(CY1G0P1G0PO$NpQSO7+&gOOQ(CY7+&g7+&gO$NuQ$IUO,5:fO&PQUO7+&yO% PQ$IUO,5:^O% ^Q$IUO,5:jO% hQ$IUO,5:lOOQ(CY7+'P7+'POOQO1G1q1G1qOOQO1G1r1G1rO% rQ#tO,5<YO!*kQUO,5<XOOQO-E<s-E<sOOQ(CY7+'X7+'XOOOO7+'d7+'dOOOO1G1{1G1{O% }QSO1G1{OOQ(CY1G1}1G1}O%!SQ`O,59hOOOO-E<h-E<hOOQ(CY1G/Q1G/QO%!ZQ(CjO7+'jOOQ(CY,5?e,5?eO%!}QSO,5?eOOQ(CY1G2c1G2cP%#SQSO'#IyPOQ(CY-E<w-E<wO%#vQ,UO1G2oO%$iQ,UO1G2qO%$sQ`O1G2sOOQ(CY1G2[1G2[O%$zQSO'#IxO%%]QSO,5@yO%%]QSO,5@yO%%eQSO,5@yO%%pQSO,5@yOOQO1G2^1G2^O%&OQ,UO1G2]O!(XQ,UO1G2]O%&`QMhO'#IzO%&pQSO,5@zO!&oQ,UO,5@zO%&xQ`O,5@zOOQ(CY1G2a1G2aOOQ(CW,5<z,5<zOOQ(CW,5<{,5<{O%'SQSO,5<{OEpQSO,5<{O!@bQWO,5<zOOQO'#Gc'#GcO%'XQSO,5<|OOQ(CW,5=O,5=OO%'SQSO,5=ROOQO,5?g,5?gOOQO-E<y-E<yOOQ(CY1G2e1G2eO!4yQWO,5<zO%'aQSO,5<{O$$mQSO,5<|O!4yQWO,5<{O%'lQ,UO1G5uO%'vQ,UO1G5uOOQO,5?h,5?hOOQO-E<z-E<zOOQO1G.w1G.wO!AnQWO,59pO&PQUO,59pO%(TQSO1G2WO!(XQ,UO1G2_O%(YQ(CjO7+'kOOQ(CY7+'k7+'kO!$YQUO7+'kOOQ(CY7+%d7+%dO%(|Q`O'#KaO!?zQSO7+(aO%)WQbO7+(aO$CbQSO7+(aOOQO-E<n-E<nOOQ(CY1G0^1G0^OOQ(CY7+%u7+%uO!?zQSO7+%uO%)_Q(ChO'#CfO%)rQ(ChO,5=PO%*dQSO,5=POOQ(CW1G5r1G5rOOQQ7+$^7+$^OAnQSO7+$^O!@bQWO7+$^O!$YQUO7+&^O%*iQSO'#JTO%+QQSO,5AROOQO1G3c1G3cO<VQSO,5ARO%+QQSO,5ARO%+YQSO,5AROOQO,5?p,5?pOOQO-E=S-E=SOOQ(CY7+'R7+'RO%+_QSO7+(|O;vQ(C[O7+(|O<VQSO7+(|OBrQSO7+(|O%+dQSO,5;]OOQ(CW,5?j,5?jOOQ(CW-E<|-E<|OOQQ7+(k7+(kO%+iQ(ChO7+(hO!&oQ,UO7+(hO%+sQ`O7+(iOOQQ7+(i7+(iO!&oQ,UO7+(iO%+zQSO'#KdO%,VQSO,5=gOOQO,5?l,5?lOOQO-E=O-E=OOOQQ7+(n7+(nO%-fQWO'#HUOOQQ1G3Z1G3ZO!&oQ,UO1G3ZO&PQUO1G3ZO%-mQSO1G3ZO%-xQ,UO1G3ZO;vQ(C[O1G3^O$$rQSO1G3^O;lQSO1G3^O!@bQWO1G3^O!@jQ,UO1G3^O%.WQSO'#JSO%.fQSO,5APO%.nQWO,5APOOQ(CW1G3_1G3_OOQQ7+$S7+$SOBrQSO7+$SO;vQ(C[O7+$SO%.yQSO7+$SO&PQUO1G6nO&PQUO1G6oO%/OQUO1G3gO%/VQSO1G3gO%/[QUO1G3gO%/cQ(C[O1G6nOOQQ7+)O7+)OO;vQ(C[O7+)[O`QUO7+)_OOQQ'#Kj'#KjOOQQ'#JV'#JVO%/mQUO,5>`OOQQ,5>`,5>`O&PQUO'#HuO%/zQSO'#HwOOQQ,5>g,5>gO>^QSO,5>gOOQQ,5>k,5>kOOQQ7+)j7+)jOOQQ7+)t7+)tOOQQ7+)z7+)zOOQQ7+)}7+)}O%0PQWO1G6QO%0eQ$IUO1G0wO%0oQSO1G0wOOQO1G/q1G/qO%0zQ$IUO1G/qOAnQSO1G/qO!*kQUO'#DkOOQO,5?X,5?XOOQO-E<k-E<kOOQO,5?_,5?_OOQO-E<q-E<qO!@bQWO1G/qOOQ(CY7+&]7+&]OAnQSO7+&]O!@bQWO7+&]OOQO7+%y7+%yO$@oQ(CjO7+&UOOQO7+&U7+&UO&PQUO7+&UO%1UQ(C[O7+&UOAnQSO7+%yO!@bQWO7+%yO%1aQ(C[O7+&UOEuQWO7+%yO%1oQ(C[O7+&UO%2TQ(C`O7+&UO%2_QWO7+%yOEuQWO7+&UO%2lQWO7+&UO%3SQSO7++sO%3SQSO7++sO%3[Q(CjO7++tO&PQUO7++tOOQO1G4z1G4zO>^QSO1G4zO%3lQSO1G4zOOQO7+&O7+&OO!?zQSO<<K{O%)WQbO<<K{O%3}QSO<<K{OOQQ<<K{<<K{O!&oQ,UO<<K{O&PQUO<<K{O%4VQSO<<K{O%4bQ(CjO1G2oO%6mQ(CjO1G2qO%8xQ(CjO1G2]O%;ZQ,UO,5?YOOQO-E<l-E<lO%;eQbO,5?ZO&PQUO,5?ZOOQO-E<m-E<mO%;oQSO1G6SOOQ(CY<<JR<<JRO%;wQ$IUO1G0rO%>RQ$IUO1G0|O%>YQ$IUO1G0|O%@^Q$IUO1G0|O%@eQ$IUO1G0|O%BYQ$IUO1G0|O%BpQ$IUO1G0|O%ETQ$IUO1G0|O%E[Q$IUO1G0|O%G`Q$IUO1G0|O%GgQ$IUO1G0|O%I_Q$IUO1G0|O%IrQ(CjO<<JeO%JwQ$IUO1G0|O%LmQ$IUO'#JpO%NpQ$IUO1G1bO%N}Q$IUO1G0UO!*kQUO'#FpOOQO'#K]'#K]OOQO1G1t1G1tO& XQSO1G1sO& ^Q$IUO,5?cOOOO7+'g7+'gOOOO1G/S1G/SOOQ(CY1G5P1G5PO!(XQ,UO7+(_O& hQSO,5?dO<VQSO,5?dOOQO-E<v-E<vO& vQSO1G6eO& vQSO1G6eO&!OQSO1G6eO&!ZQ,UO7+'wO&!kQ`O,5?fO&!uQSO,5?fO!&oQ,UO,5?fOOQO-E<x-E<xO&!zQ`O1G6fO&#UQSO1G6fOOQ(CW1G2g1G2gO%'SQSO1G2gOOQ(CW1G2f1G2fO&#^QSO1G2hO!&oQ,UO1G2hOOQ(CW1G2m1G2mO!@bQWO1G2fOEpQSO1G2gO&#cQSO1G2hO&#kQSO1G2gO!(XQ,UO7++aOOQ(CY1G/[1G/[O&#vQSO1G/[OOQ(CY7+'r7+'rO&#{Q,UO7+'yO&$]Q(CjO<<KVOOQ(CY<<KV<<KVO!&oQ,UO'#I}O&%PQSO,5@{OOQ(CY<<Ia<<IaO!&oQ,UO1G2kOOQQ<<Gx<<GxOAnQSO<<GxO&%XQ(CjO<<IxOOQ(CY<<Ix<<IxOOQO,5?o,5?oO&%{QSO,5?oO$-kQSO,5?oOOQO-E=R-E=RO&&QQSO1G6mO&&QQSO1G6mO<VQSO1G6mOBrQSO<<LhOOQQ<<Lh<<LhO&&YQSO<<LhO;vQ(C[O<<LhO&&_QSO1G0wOOQQ<<LS<<LSO%+iQ(ChO<<LSOOQQ<<LT<<LTO%+sQ`O<<LTO&&dQWO'#JPO&&rQSO,5AOO!*kQUO,5AOOOQQ1G3R1G3RO&&zQ(C`O'#JzO&'fQUO'#JzO&'pQWO'#EdO&(ZQ(C[O'#EdOEZQ(C`O'#EdO)hQWO'#HVOOQO'#JR'#JRO;vQ(C[O'#JRO&(oQWO,5=pOOQQ,5=p,5=pO&)[QWO'#EdO&(PQWO'#EdO&)cQWO'#EdO&)|QWO'#EdO&*mQWO'#HVO&+RQSO7+(uO&+WQSO7+(uOOQQ7+(u7+(uO!&oQ,UO7+(uO&PQUO7+(uO&+`QSO7+(uOOQQ7+(x7+(xO;vQ(C[O7+(xO$$rQSO7+(xO;lQSO7+(xO!@bQWO7+(xO&+kQSO,5?nOOQO-E=Q-E=QOOQO'#HY'#HYO&+vQSO1G6kO;vQ(C[O<<GnOOQQ<<Gn<<GnOBrQSO<<GnO&,OQSO7+,YO&,TQSO7+,ZOOQQ7+)R7+)RO&,YQSO7+)RO&,_QUO7+)RO&,fQSO7+)RO&PQUO7+,YO&PQUO7+,ZOOQQ<<Lv<<LvOOQQ<<Ly<<LyOOQQ-E=T-E=TOOQQ1G3z1G3zO&,kQSO,5>aOOQQ,5>c,5>cO&,pQSO1G4RO>^QSO7+&cO!*kQUO7+&cOOQO7+%]7+%]O&,uQ$IUO1G6]OAnQSO7+%]OOQ(CY<<Iw<<IwOAnQSO<<IwOOQO<<Ip<<IpO$@oQ(CjO<<IpO&PQUO<<IpOOQO<<Ie<<IeOAnQSO<<IeO&-PQ(C[O<<IpO!@bQWO<<IeO&-[Q(C[O<<IpOEuQWO<<IeO&-jQ(C[O<<IpO&.OQ(C`O<<IpO&.YQWO<<IeOEuQWO<<IpO&.gQSO<= _O&.oQ(CjO<= `OOQO7+*f7+*fO>^QSO7+*fOOQQANAgANAgO&/PQSOANAgO!&oQ,UOANAgO!?zQSOANAgO%)WQbOANAgO&PQUOANAgO&/XQ(CjO7+'wO&1jQ(CjO7+'yO&3{QbO1G4uO&4VQ$IUO7+&^O&4dQ$IUO,59nO&6gQ$IUO,5<hO&8jQ$IUO,5<jO&:mQ$IUO,5<xO&<cQ$IUO7+'jO&<pQ$IUO7+'kO&<}QSO,5<[OOQO7+'_7+'_O&=SQ,UO<<KyOOQO1G5O1G5OO&=ZQSO1G5OO&=fQSO1G5OO&=tQSO7+,PO&=tQSO7+,PO!&oQ,UO1G5QO&=|Q`O1G5QO&>WQSO7+,QOOQ(CW7+(R7+(RO%'SQSO7+(SO&>`Q`O7+(SOOQ(CW7+(Q7+(QO%'SQSO7+(RO&>gQSO7+(SO!&oQ,UO7+(SOEpQSO7+(RO&>lQ,UO<<N{OOQ(CY7+$v7+$vO&>vQ`O,5?iOOQO-E<{-E<{O&?QQ(ChO7+(VOOQQAN=dAN=dO<VQSO1G5ZOOQO1G5Z1G5ZO&?bQSO1G5ZO&?gQSO7+,XO&?gQSO7+,XO;vQ(C[OANBSOBrQSOANBSOOQQANBSANBSOOQQANAnANAnOOQQANAoANAoO&?oQSO,5?kOOQO-E<}-E<}O&?zQ$IUO1G6jO$$rQSO,5=qO;lQSO,5=qO&B[QbO'#CfO&BfQWO,5;OO&BpQWO,5;OO&B}QWO,5;OO!@bQWO,5=qOOQO,5?m,5?mOOQO-E=P-E=POOQQ1G3[1G3[O&'fQUO,5<|O&&zQ(C`O,5=qO#'WQ(C`O,5;OO)hQWO,5=qO&CbQWO,5=qO&CvQWO,5;OOOQQ<<La<<LaO!&oQ,UO<<LaO&+RQSO<<LaO&DaQSO<<LaO&PQUO<<LaOOQQ<<Ld<<LdO;vQ(C[O<<LdO$$rQSO<<LdO;lQSO<<LdO&DiQWO1G5YO&DtQSO7+,VOOQQAN=YAN=YO;vQ(C[OAN=YOOQQ<= t<= tOOQQ<= u<= uOOQQ<<Lm<<LmO&D|QSO<<LmO&ERQUO<<LmO&EYQSO<= tO&E_QSO<= uOOQQ1G3{1G3{OAnQSO7+)mO&EdQSO<<I}O&EoQ$IUO<<I}OOQO<<Hw<<HwOOQ(CYAN?cAN?cOOQOAN?[AN?[O$@oQ(CjOAN?[OOQOAN?PAN?PO&PQUOAN?[OAnQSOAN?PO&EyQ(C[OAN?[O!@bQWOAN?PO&FUQ(C[OAN?[OEuQWOAN?PO&FdQ(C[OAN?[OOQO<<NQ<<NQOOQQG27RG27RO!&oQ,UOG27RO!?zQSOG27RO&FxQSOG27RO%)WQbOG27RO&GQQ$IUO<<JeO&G_Q$IUO1G2]O&ITQ$IUO1G2oO&KWQ$IUO1G2qO&MZQ$IUO<<KVO&MhQ$IUO<<IxOOQO1G1v1G1vO!(XQ,UOANAeOOQO7+*j7+*jO&MuQSO7+*jO&NQQSO<= kO&NYQ`O7+*lOOQ(CW<<Kn<<KnO%'SQSO<<KnOOQ(CW<<Km<<KmO&NdQ`O<<KnO%'SQSO<<KmOOQO7+*u7+*uO<VQSO7+*uO&NkQSO<= sOOQQG27nG27nO;vQ(C[OG27nO!*kQUO1G5VO&NsQSO7+,UO;vQ(C[O1G3]O$$rQSO1G3]O&N{QWO1G0jO' VQWO1G0jO;lQSO1G3]O!@bQWO1G3]O)hQWO1G3]O&&zQ(C`O1G3]O$>aQ(C`O1G0jO' dQWO1G3]O&+RQSOANA{OOQQANA{ANA{O!&oQ,UOANA{O' xQSOANA{OOQQANBOANBOO;vQ(C[OANBOO$$rQSOANBOOOQO'#HZ'#HZOOQO7+*t7+*tOOQQG22tG22tOOQQANBXANBXO'!QQSOANBXOOQQANE`ANE`OOQQANEaANEaOOQQ<<MX<<MXO!*kQUOAN?iOOQOG24vG24vO$@oQ(CjOG24vOOQOG24kG24kO&PQUOG24vOAnQSOG24kO'!VQ(C[OG24vO!@bQWOG24kO'!bQ(C[OG24vO!?zQSOLD,mOOQQLD,mLD,mO!&oQ,UOLD,mO'!pQSOLD,mO'!xQ$IUO7+'wO'$nQ$IUO7+'yO'&dQ,UOG27POOQO<<NU<<NUOOQ(CWANAYANAYO%'SQSOANAYOOQ(CWANAXANAXOOQO<<Na<<NaOOQQLD-YLD-YO'&tQ$IUO7+*qOOQO7+(w7+(wO;vQ(C[O7+(wO''OQWO7+&UO$$rQSO7+(wO;lQSO7+(wO!@bQWO7+(wO)hQWO7+(wOOQQG27gG27gO&+RQSOG27gO!&oQ,UOG27gOOQQG27jG27jO;vQ(C[OG27jOOQQG27sG27sO''YQ$IUOG25TOOQOLD*bLD*bO$@oQ(CjOLD*bOOQOLD*VLD*VO&PQUOLD*bOAnQSOLD*VO''dQ(C[OLD*bOOQQ!$(!X!$(!XO!?zQSO!$(!XO!&oQ,UO!$(!XO''oQ(CjOG27POOQ(CWG26tG26tOOQO<<Lc<<LcO;vQ(C[O<<LcO$$rQSO<<LcO;lQSO<<LcO!@bQWO<<LcOOQQLD-RLD-RO&+RQSOLD-ROOQQLD-ULD-UOOQO!$'M|!$'M|O$@oQ(CjO!$'M|OOQO!$'Mq!$'MqO&PQUO!$'M|OOQQ!)9Es!)9EsO!?zQSO!)9EsOOQOANA}ANA}O;vQ(C[OANA}O$$rQSOANA}O;lQSOANA}OOQQ!$(!m!$(!mOOQO!)9Ch!)9ChO$@oQ(CjO!)9ChOOQQ!.K;_!.K;_O'*QQ$IUOG27POOQOG27iG27iO;vQ(C[OG27iO$$rQSOG27iOOQO!.K9S!.K9SOOQOLD-TLD-TO;vQ(C[OLD-TOOQO!$(!o!$(!oO'+vQbO'#CfO'.^QbO'#CfO!*kQUO'#DzO3jQSO'#EYO'.nQbO'#JvO!*kQUO'#DrO'.uQUO'#EOO!*kQUO'#EQO'.|QUO,5;WO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO,5;bO!*kQUO'#IwO'1cQSO,5<gO'1kQ,UO,5;bO'3OQ,UO,5;bO!*kQUO,5;vO3mQSO'#DSO3mQSO'#DSO!&oQ,UO'#F|O'1kQ,UO'#F|O!&oQ,UO'#GOO'1kQ,UO'#GOO!&oQ,UO'#G^O'1kQ,UO'#G^O!*kQUO,5:jO!*kQUO,5@qO'.|QUO1G0rO'3VQ$IUO'#CfO!*kQUO1G2OO!&oQ,UO,5=TO'1kQ,UO,5=TO!&oQ,UO,5=VO'1kQ,UO,5=VO!&oQ,UO,5<qO'1kQ,UO,5<qO'.|QUO1G2PO!*kQUO7+&yO!&oQ,UO1G2]O'1kQ,UO1G2]O!&oQ,UO1G2_O'1kQ,UO1G2_O'.|QUO7+'kO'.|QUO7+&^O!&oQ,UOANAeO'1kQ,UOANAeO'3aQSO'#ElO'3fQSO'#ElO'3nQSO'#F[O'3sQSO'#EvO'3xQSO'#KVO'4TQSO'#KTO'4`QSO,5;WO'4eQ,UO,5<dO'4lQSO'#GVO'4qQSO'#GVO'4vQSO,5<eO'5OQSO,5;WO'5WQ$IUO1G1_O'5_QSO,5<qO'5dQSO,5<qO'5iQSO,5<sO'5nQSO,5<sO'5sQSO1G2PO'5xQSO1G0rO'5}Q,UO<<KyO'6UQ,UO<<KyO:UQ,UO'#FzO;lQSO'#FyOCeQSO'#EkO!*kQUO,5;sO!3zQSO'#GVO!3zQSO'#GVO!3zQSO'#GXO!3zQSO'#GXO!(XQ,UO7+(_O!(XQ,UO7+(_O%$sQ`O1G2sO%$sQ`O1G2sO!&oQ,UO,5=XO!&oQ,UO,5=X",stateData:"'7^~O(OOS(POSROS(QRQ~OPZOQZOV!VO^qOazObyOilOkZOllOmlOslOuZOwZO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]YO!gtO!l[O!oZO!pZO!qZO!suO!uvO!xwO!yxO!}^O#t!PO$U|O$YgO%d}O%f!QO%h!OO%i!OO%l!RO%n!SO%q!TO%r!TO%t!UO&R!WO&S!WO&Y!XO&Z!XO&]!YO&_!ZO&`!ZO&b![O&c![O&g!]O&m!^O&n!^O&w!_O&x!_O&z!`O&{!`O&}!aO'O!aO'Q!bO'R!bO'T!cO(VSO(XTO(YUO(]VO(eWO(s]O)QjO~OPZOQZOa!hOb!gOilOkZOllOmlOslOuZOwZO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]!eO!gtO!l[O!oZO!pZO!qZO!suO!uvO!xxO!yxO$U!iO$YgO(V!dO(XTO(YUO(]VO(eWO(s]O)QjO~O^!rOl!lO|!mO!`!sO!a!qO!b!qO!};rO#R!wO#S!uO#T!vO#U!tO#X!xO#Y!xO(W!jO(YUO(]VO(h!kO(i!kO(s!oO~O(Q!yO~OPYXXYX^YXkYXyYXzYX|YX!ZYX!iYX!jYX!lYX!pYX#]YX#hcX#kYX#lYX#mYX#nYX#oYX#pYX#qYX#rYX#sYX#uYX#wYX#yYX#zYX$PYX'|YX(eYX(tYX({YX(|YX~O!e%OX~P)xO'zYX!WYXoYX!kYX!]YX&WYX%eYX!eYX~P)xO[!{O(Y!}O(Z!{O([!}O~O[#OO([!}O(]!}O(^#OO~Oq#QO!O#RO(f#RO(g#TO~OPZOQZOa!hOb!gOilOkZOllOmlOslOuZOwZO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]!eO!gtO!l[O!oZO!pZO!qZO!suO!uvO!xxO!yxO$U!iO$YgO(V;oO(X;oO(YUO(]VO(eWO(s]O)QjO~O!Y#XO!Z#UO!W(lP!W(xP~P-rO![#aO~P`OPZOQZOa!hOb!gOilOkZOllOmlOslOuZOwZO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]!eO!gtO!l[O!oZO!pZO!qZO!suO!uvO!xxO!yxO$U!iO$YgO(YUO(]VO(eWO(s]O)QjO~O!Y#gO!}^O#f#jO#g#gO(V;pO(X;pO!k(uP~P0pO!l#lO(V#kO(X#kO~O!x#pO!}^O%d#qO~O#h#rO~O!e#sO#h#rO~OP$ZOX$bOk$OOy#wOz#xO|#yO!Z$_O!i$QO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O#o$PO#p$QO#q$QO#r$aO#s$QO#u$RO#w$TO#y$VO#z$WO(eWO(t$XO({#zO(|#{O~O^(jX'|(jX'z(jX!k(jX!W(jX!](jX%e(jX!e(jX~P4_O#]$cO$P$cOP(kXX(kXk(kXy(kXz(kX|(kX!Z(kX!i(kX!l(kX!p(kX#k(kX#l(kX#m(kX#n(kX#o(kX#p(kX#q(kX#r(kX#s(kX#u(kX#w(kX#y(kX#z(kX(e(kX(t(kX({(kX(|(kX!](kX%e(kX~O^(kX!j(kX'|(kX'z(kX!W(kX!k(kXo(kX!e(kX~P6uO#]$cO~O$[$eO$^$dO$e$jO~O!]$kO$YgO$h$lO$j$nO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!]$zO!g%YO!l$vO#g%ZO$U%WO$q%UO$s%VO$v%XO(V$pO(YUO(]VO(a%PO(e$sOd(bP~O!l%[O~O!e%^O~O^%_O'|%_O~O(W!jO~P&PO(V%fO(X%fO~Og%jO!]%hO(V%fO(X%fO~O!l%[O(V%fO(W!jO(X%fO(a%PO~Ob%qO!l%[O(V%fO(X%fO~O#s$QO~O!]%sO(V%fO(W!jO(X%fO])YP~Oy%vO!l%uO%f%yO(YUO(]VO~P=cO!x#pO~O|%{O!]%|O(V%fO(X%fO~O|%{O!]%|O%n&QO(V%fO(X%fO~O(V&RO~O#t!PO%f!QO%h!OO%i!OO%l!RO%n!SO%q!TO%r!TO~Oa&[Ob&ZO!x&XO%d&YO%v&WO~P?SOa&_ObyO!]&^O!xwO!}^O#t!PO%d}O%h!OO%i!OO%l!RO%n!SO%q!TO%r!TO%t!UO~O_&bO#]&eO%f&`O(W!jO~P@RO!l&fO!u&jO~O!l#lO~O!]YO~O^%_O'{&rO'|%_O~O^%_O'{&uO'|%_O~O^%_O'{&wO'|%_O~O!`'UO!a&}O!b&}O(W!jO(YUO(]VO~Ol&{O|&zO!Y'OO(h&yO(i&yO![(mP![(zP~PBfOb'YO!l%[O(V%fO(X%fO~Oy%vO!l%uO~Ol!lO|!mO!`'_O!a'^O!b'^O#S'aO#T'aO#U'`O#X'cO#Y'cO(W!jO(YUO(]VO(h!kO(i!kO(s!oO~O!};rO#R'bO~PC{O^%_O!e#sO!l%[O!p'iO#]'gO'|%_O(a%PO(t'eO~Ol!lO|!mO(YUO(]VO(h!kO(i!kO(s!oO~O!a'^O!b'^O(W!jO~PEuO!`'_O!a'^O!b'^O#X'cO#Y'cO(W!jO~PEuO!]YO!`'_O!a'^O!b'^O#U'`O#X'cO#Y'cO(W!jO~PEuO(R'mO(S'mO(T'oO~O[!{O(Y'qO(Z!{O(['qO~O[#OO(['qO(]'qO(^#OO~Oq#QO!O#RO(f#RO(g'uO~O!Y'wO!W'`X!W'fX!Z'`X!Z'fX~P-rO!Z'yO!W(lX~OP$ZOX$bOk$OOy#wOz#xO|#yO!Z'yO!i$QO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O#o$PO#p$QO#q$QO#r$aO#s$QO#u$RO#w$TO#y$VO#z$WO(eWO(t$XO({#zO(|#{O~O!W(lX~PIcO!W(OO~O!W(wX!Z(wX!e(wX!k(wX(t(wX~O#](wX#h#aX![(wX~PKiO#](PO!W(yX!Z(yX~O!Z(QO!W(xX~O!W(TO~O#]$cO~PKiO![(UO~P`Oy#wOz#xO|#yO!j#uO!l#vO(eWOP!naX!nak!na!Z!na!i!na!p!na#k!na#l!na#m!na#n!na#o!na#p!na#q!na#r!na#s!na#u!na#w!na#y!na#z!na(t!na({!na(|!na~O^!na'|!na'z!na!W!na!k!nao!na!]!na%e!na!e!na~PMPO!k(VO~O|%{O!]%|O#g(XO(V%fO(X%fO~O!}^O#f(YO~P! oO!e#sO#](ZO(t'eO!Z(vX^(vX'|(vX~O!k(vX~P!![O!Z(^O!k(uX~O!k(`O~Oy(aOz(bO!j#uO!l#vO!}!|a|!|a~O!x!|a%d!|a!]!|a#f!|a#g!|a(V!|a(X!|a~P!#UO!x(fO~OPZOQZOa!hOb!gOilOkZOllOmlOslOuZOwZO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]YO!gtO!l[O!oZO!pZO!qZO!suO!uvO!xxO!yxO$U!iO$YgO(V!dO(XTO(YUO(]VO(eWO(s]O)QjO~Oi%QOk$rOl$qOm$qOs%ROu%SOw<YO|$yO!]$zO!g=dO!l$vO#g<`O$U%WO$q<[O$s<^O$v%XO(V(jO(YUO(]VO(a%PO(e$sO~O#h(lO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!]$zO!g%YO!l$vO#g%ZO$U%WO$q%UO$s%VO$v%XO(V(jO(YUO(]VO(a%PO(e$sO~Od(oP~P!(XO!Y(pO!k(pP~P&PO(h(rO(i(rO(s]O~O|(tO!l#vO(h(rO(i(rO(s]O~OP;qOQ;qOa=`Ob!gOilOk;qOllOmlOslOu;qOw;qO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]!eO!g;tO!l[O!o;qO!p;qO!q;qO!s;uO!u;vO!xxO!yxO$U!iO$YgO(V)SO(X)SO(YUO(]VO(eWO(s]O)Q=^O~Oz)VO!l#vO~O!Z$_O^$oa'|$oa'z$oa!k$oa!W$oa!]$oa%e$oa!e$oa~O#t)ZO~P!&oOy)^O!e)]O!]$]X$X$]X$[$]X$^$]X$e$]X~O!e)]O!](}X$X(}X$[(}X$^(}X$e(}X~Oy)^O~P!.gOy)^O!](}X$X(}X$[(}X$^(}X$e(}X~O!])`O$X)dO$[)_O$^)_O$e)eO~O!Y)hO~P!*kO$[$eO$^$dO$e)lO~Og$wXy$wX|$wX!j$wX({$wX(|$wX~OdfXd$wXgfX!ZfX#]fX~P!0]Ol)nO~Oq)oO(f)pO(g)rO~Og){Oy)tO|)uO({)wO(|)yO~Od)sO~P!1fOd)|O~Oi%QOk$rOl$qOm$qOs%ROu%SOw<YO|$yO!]$zO!g=dO!l$vO#g<`O$U%WO$q<[O$s<^O$v%XO(YUO(]VO(a%PO(e$sO~O!Y*QO(V)}O(X%fO!k)RP~P!2TO#h*SO~O!l*TO~O!Y*YO(V*VO!W)SP~P!2TOk*fO|*^O!`*dO!a*]O!b*]O!l*TO#X*eO%[*`O(W!jO(h!kO(i!kO~O![*cO~P!4^O!j#uOg(dXy(dX|(dX({(dX(|(dX!Z(dX#](dX~Od(dX#}(dX~P!5YOg*iO#]*hOd(cX!Z(cX~O!Z*jOd(bX~O(V&ROd(bP~O!l*qO~O(V(jO~O|%{O!]%|O!}^O(V%fO(X%fO~O!Y#gO#f#jO#g#gO!k(uP~P!6xO!e#sO#h*uO~OP$ZOX$bOk$OOy#wOz#xO|#yO!i$QO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O#o$PO#p$QO#q$QO#r$aO#s$QO#u$RO#w$TO#y$VO#z$WO(eWO(t$XO({#zO(|#{O~O^!fa!Z!fa'|!fa'z!fa!W!fa!k!fao!fa!]!fa%e!fa!e!fa~P!7sOy#wOz#xO|#yO!j#uO!l#vO(eWOP!raX!rak!ra!Z!ra!i!ra!p!ra#k!ra#l!ra#m!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#u!ra#w!ra#y!ra#z!ra(t!ra({!ra(|!ra~O^!ra'|!ra'z!ra!W!ra!k!rao!ra!]!ra%e!ra!e!ra~P!:^Oy#wOz#xO|#yO!j#uO!l#vO(eWOP!taX!tak!ta!Z!ta!i!ta!p!ta#k!ta#l!ta#m!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#u!ta#w!ta#y!ta#z!ta(t!ta({!ta(|!ta~O^!ta'|!ta'z!ta!W!ta!k!tao!ta!]!ta%e!ta!e!ta~P!<wOg*}O!]%hO%e*|O(a%PO~O![+RO~P(fOg+UO!]%hO~O!e+VO!](`X^(`X!Z(`X'|(`X~O!l%[O(a%PO~O!l%[O(V%fO(X%fO(a%PO~O!e#sO#h(lO~O%f+cO(V+_O(X+_O(YUO(]VO![)ZP~O!Z+dO])YX~O(h(rO(i(rO~OX+hO~O]+iO~O|%{O!Y+mO!Z(QO!]%|O(V%fO(X%fO!W(xP~Ol'RO|+oO!Y+nO(YUO(]VO(h(rO(i(rO~O![(zP~P!BiO!Z+pO^)VX'|)VX~O#]+tO(a%PO~Og+wO!]$zO(a%PO~O!]+yO~Oy+{O!]YO~O!x,QO~Ob,VO~O(V#kO(X#kO![)XP~Ob%qO~O%f!QO(V&RO~P@ROX,]O],[O~OPZOQZOazObyOilOkZOllOmlOslOuZOwZO|XO!QlO!RlO!SlO!TlO!UlO!VlO!gtO!l[O!oZO!pZO!qZO!suO!uvO!xwO!yxO!}^O$YgO%d}O(XTO(YUO(]VO(eWO(s]O)QjO~O!]!eO$U!iO(V!dO~P!ESO],[O^%_O'|%_O~O^,aO#t,cO%h,cO%i,cO~P&PO!l&fO~O&Y,hO~O!],jO~O&p,lO&q,lO&r,lO&t,mO&u,mOP&laQ&laV&la^&laa&lab&lai&lak&lal&lam&las&lau&law&la|&la!Q&la!R&la!S&la!T&la!U&la!V&la!]&la!g&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!y&la!}&la#t&la$U&la$Y&la%d&la%f&la%h&la%i&la%l&la%n&la%q&la%r&la%t&la&R&la&S&la&Y&la&Z&la&]&la&_&la&`&la&b&la&c&la&g&la&m&la&n&la&w&la&x&la&z&la&{&la&}&la'O&la'Q&la'R&la'T&la'z&la(V&la(X&la(Y&la(]&la(e&la(s&la)Q&la![&la&d&la&e&la_&la&j&la~O(V,rO~O!Z{X!Z!cX![{X![!cX!e{X!e!cX!l!cX#]{X(a!cX~O!e,wO#],vO!Z#eX!Z(nX![#eX![(nX!e(nX!l(nX(a(nX~O!e,yO!l%[O(a%PO!Z!_X![!_X~Ol!lO|!mO(YUO(]VO(h!kO(i!kO~OP;qOQ;qOa=`Ob!gOilOk;qOllOmlOslOu;qOw;qO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]!eO!g;tO!l[O!o;qO!p;qO!q;qO!s;uO!u;vO!xxO!yxO$U!iO$YgO(YUO(]VO(eWO(s]O)Q=^O~O(V<eO(X<eO~P#!ZO!Z,}O![(mX~O![-PO~O!e,wO#],vO!Z#eX![#eX~O!Z-QO![(zX~O![-SO~O!a-TO!b-TO(W!jO~P# uO!W-YO~Ol!|a!`!|a!a!|a!b!|a#R!|a#S!|a#T!|a#U!|a#X!|a#Y!|a(W!|a(Y!|a(]!|a(h!|a(i!|a(s!|a~P!#UO^%_O!e#sO!l%[O!p-_O#]-]O'|%_O(a%PO(t'eO~O!a-aO!b-aO(W!jO~PEuO!`-cO!a-aO!b-aO#X-dO#Y-dO(W!jO~PEuO!`-cO!a-aO!b-aO#U-eO#X-dO#Y-dO(W!jO~PEuO!`-cO!a-aO!b-aO#S-fO#T-fO#U-eO#X-dO#Y-dO(W!jO~PEuO^%_O#]-]O'|%_O~O^%_O!e#sO#]-]O'|%_O~O^%_O!e#sO!p-_O#]-]O'|%_O(t'eO~O(R'mO(S'mO(T-kO~Oo-lO~O!W'`a!Z'`a~P!7sO!Y-pO!W'`X!Z'`X~P&PO!Z'yO!W(la~O!W(la~PIcO!Z(QO!W(xa~O|%{O!Y-tO!]%|O(V%fO(X%fO!W'fX!Z'fX~O!Z(^O!k(ua~O|%{O!]%|O#g-wO(V%fO(X%fO~O#]-yO!Z(va!k(va^(va'|(va~O!e#sO~P#-SO!Y-|O#f.OO#g-|O!Z'hX!k'hX~P!6xOz.SO!l#vO~Og.VO!]%hO%e.UO(a%PO~O^#`i!Z#`i'|#`i'z#`i!W#`i!k#`io#`i!]#`i%e#`i!e#`i~P!7sOg=jOy)tO|)uO({)wO(|)yO~O#h#[a^#[a#]#[a'|#[a!Z#[a!k#[a!]#[a!W#[a~P#/ZO#h(dXP(dXX(dX^(dXk(dXz(dX!i(dX!l(dX!p(dX#k(dX#l(dX#m(dX#n(dX#o(dX#p(dX#q(dX#r(dX#s(dX#u(dX#w(dX#y(dX#z(dX'|(dX(e(dX(t(dX!k(dX!W(dX'z(dXo(dX!](dX%e(dX!e(dX~P!5YO!Z.`Od(oX~P!1fOd.bO~O!Z.cO!k(pX~P!7sO!k.fO~O!W.hO~OP$ZOy#wOz#xO|#yO!j#uO!l#vO!p$ZO(eWOX#ji^#jik#ji!Z#ji!i#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'|#ji(t#ji({#ji(|#ji'z#ji!W#ji!k#jio#ji!]#ji%e#ji!e#ji~O#k#ji~P#3VO#k#|O~P#3VOP$ZOy#wOz#xO|#yO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O(eWOX#ji^#ji!Z#ji!i#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'|#ji(t#ji({#ji(|#ji'z#ji!W#ji!k#jio#ji!]#ji%e#ji!e#ji~Ok#ji~P#5wOk$OO~P#5wOP$ZOk$OOy#wOz#xO|#yO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O#o$PO(eWO^#ji!Z#ji#u#ji#w#ji#y#ji#z#ji'|#ji(t#ji({#ji(|#ji'z#ji!W#ji!k#jio#ji!]#ji%e#ji!e#ji~OX#ji!i#ji#p#ji#q#ji#r#ji#s#ji~P#8iOX$bO!i$QO#p$QO#q$QO#r$aO#s$QO~P#8iOP$ZOX$bOk$OOy#wOz#xO|#yO!i$QO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O#o$PO#p$QO#q$QO#r$aO#s$QO#u$RO(eWO^#ji!Z#ji#w#ji#y#ji#z#ji'|#ji(t#ji(|#ji'z#ji!W#ji!k#jio#ji!]#ji%e#ji!e#ji~O({#ji~P#;jO({#zO~P#;jOP$ZOX$bOk$OOy#wOz#xO|#yO!i$QO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O#o$PO#p$QO#q$QO#r$aO#s$QO#u$RO#w$TO(eWO({#zO^#ji!Z#ji#y#ji#z#ji'|#ji(t#ji'z#ji!W#ji!k#jio#ji!]#ji%e#ji!e#ji~O(|#ji~P#>[O(|#{O~P#>[OP$ZOX$bOk$OOy#wOz#xO|#yO!i$QO!j#uO!l#vO!p$ZO#k#|O#l#}O#m#}O#n#}O#o$PO#p$QO#q$QO#r$aO#s$QO#u$RO#w$TO#y$VO(eWO({#zO(|#{O~O^#ji!Z#ji#z#ji'|#ji(t#ji'z#ji!W#ji!k#jio#ji!]#ji%e#ji!e#ji~P#@|OPYXXYXkYXyYXzYX|YX!iYX!jYX!lYX!pYX#]YX#hcX#kYX#lYX#mYX#nYX#oYX#pYX#qYX#rYX#sYX#uYX#wYX#yYX#zYX$PYX(eYX(tYX({YX(|YX!ZYX![YX~O#}YX~P#CgOP$ZOX<WOk;zOy#wOz#xO|#yO!i;|O!j#uO!l#vO!p$ZO#k;xO#l;yO#m;yO#n;yO#o;{O#p;|O#q;|O#r<VO#s;|O#u;}O#w<PO#y<RO#z<SO(eWO(t$XO({#zO(|#{O~O#}.jO~P#EtOP(kXX(kXk(kXy(kXz(kX|(kX!i(kX!j(kX!l(kX!p(kX#k(kX#l(kX#m(kX#n(kX#o(kX#p(kX#q(kX#r(kX#u(kX#w(kX#y(kX#z(kX(e(kX(t(kX({(kX(|(kX!Z(kX~O#]<XO$P<XO#s(kX#}(kX![(kX~P#GrO^'ka!Z'ka'|'ka'z'ka!k'ka!W'kao'ka!]'ka%e'ka!e'ka~P!7sOP#jiX#ji^#jik#jiz#ji!Z#ji!i#ji!j#ji!l#ji!p#ji#k#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji'|#ji(e#ji(t#ji'z#ji!W#ji!k#jio#ji!]#ji%e#ji!e#ji~P#/ZO^$Oi!Z$Oi'|$Oi'z$Oi!W$Oi!k$Oio$Oi!]$Oi%e$Oi!e$Oi~P!7sO$[.oO$^.oO~O$[.pO$^.pO~O!e)]O#].qO!]$bX$X$bX$[$bX$^$bX$e$bX~O!Y.rO~O!])`O$X.tO$[)_O$^)_O$e.uO~O!Z<TO![(jX~P#EtO![.vO~O!e)]O$e(}X~O$e.xO~Oq)oO(f)pO(g.{O~Ol/OO!W/PO(YUO(]VO~O!ZcX!ecX!kcX!k$wX(tcX~P!0]O!k/VO~P#/ZO!Z/WO!e#sO(t'eO!k)RX~O!k/]O~O!Y*QO(V%fO(X%fO!k)RP~O#h/_O~O!W$wX!Z$wX!e%OX~P!0]O!Z/`O!W)SX~P#/ZO!e/bO~O!W/dO~Ok/hO!e#sO!l%[O(a%PO(t'eO~O(V/jO~O!e+VO~O^%_O!Z/nO'|%_O~O![/pO~P!4^O!a/qO!b/qO(W!jO(h!kO(i!kO~O|/sO(h!kO(i!kO~O#X/tO~O(V&ROd'pX!Z'pX~O!Z*jOd(ba~Od/yO~Oy/zOz/zO|/{Ogva({va(|va!Zva#]va~Odva#}va~P$&fOy)tO|)uOg$pa({$pa(|$pa!Z$pa#]$pa~Od$pa#}$pa~P$'[Oy)tO|)uOg$ra({$ra(|$ra!Z$ra#]$ra~Od$ra#}$ra~P$'}O#h/}O~Od%Qa!Z%Qa#]%Qa#}%Qa~P!1fO#h0QO~Oy#wOz#xO|#yO!j#uO!l#vO(eWOP!riX!rik!ri!Z!ri!i!ri!p!ri#k!ri#l!ri#m!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#u!ri#w!ri#y!ri#z!ri(t!ri({!ri(|!ri~O^!ri'|!ri'z!ri!W!ri!k!rio!ri!]!ri%e!ri!e!ri~P$)[Og.VO!]%hO%e.UO~O![0XO~P(fOi0]O(V0[O(X#kO~P!2WO!e+VO!](`a^(`a!Z(`a'|(`a~O#h0cO~OXYX!ZcX![cX~O!Z0dO![)ZX~O![0fO~OX0gO~O(V+_O(X+_O(YUO(]VO~O!]%sO(V%fO(X%fO]'xX!Z'xX~O!Z+dO])Ya~O!k0lO~P!7sOX0oO~O]0pO~O!Z+pO^)Va'|)Va~O#]0vO~Og0yO!]$zO~O(h(rO(i(rO![)WP~Og1SO!]1PO%e1RO(a%PO~OX1^O!Z1[O![)XX~O![1_O~O]1aO^%_O'|%_O~O(V#kO(X#kO(YUO(]VO~O#]$cO#s1dO$P$cO&W1eO^(kX~P#GrO#]$cO#s1dO&W1eO~O^1fO~P&PO^1hO~O&d1lO&e1lOP&aiQ&aiV&ai^&aia&aib&aii&aik&ail&aim&ais&aiu&aiw&ai|&ai!Q&ai!R&ai!S&ai!T&ai!U&ai!V&ai!]&ai!g&ai!l&ai!o&ai!p&ai!q&ai!s&ai!u&ai!x&ai!y&ai!}&ai#t&ai$U&ai$Y&ai%d&ai%f&ai%h&ai%i&ai%l&ai%n&ai%q&ai%r&ai%t&ai&R&ai&S&ai&Y&ai&Z&ai&]&ai&_&ai&`&ai&b&ai&c&ai&g&ai&m&ai&n&ai&w&ai&x&ai&z&ai&{&ai&}&ai'O&ai'Q&ai'R&ai'T&ai'z&ai(V&ai(X&ai(Y&ai(]&ai(e&ai(s&ai)Q&ai![&ai_&ai&j&ai~O_1rO![1pO&j1qO~P`O!]YO!l1tO~O&t,mO&u,mOP&liQ&liV&li^&lia&lib&lii&lik&lil&lim&lis&liu&liw&li|&li!Q&li!R&li!S&li!T&li!U&li!V&li!]&li!g&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!y&li!}&li#t&li$U&li$Y&li%d&li%f&li%h&li%i&li%l&li%n&li%q&li%r&li%t&li&R&li&S&li&Y&li&Z&li&]&li&_&li&`&li&b&li&c&li&g&li&m&li&n&li&w&li&x&li&z&li&{&li&}&li'O&li'Q&li'R&li'T&li'z&li(V&li(X&li(Y&li(]&li(e&li(s&li)Q&li![&li&d&li&e&li_&li&j&li~O!W1zO~O!Z!_a![!_a~P#EtOl!lO|!mO!Y2QO(h!kO(i!kO!Z'aX!['aX~PBfO!Z,}O![(ma~O!Z'gX!['gX~P!BiO!Z-QO![(za~O^%_O#]2^O'|%_O~O^%_O!e#sO#]2^O'|%_O~O^%_O!e#sO!l%[O!p2bO#]2^O'|%_O(a%PO(t'eO~O!a2cO!b2cO(W!jO~PEuO!`2fO!a2cO!b2cO#X2gO#Y2gO(W!jO~PEuO!`2fO!a2cO!b2cO#U2hO#X2gO#Y2gO(W!jO~PEuO^%_O!e#sO!p2bO#]2^O'|%_O(t'eO~O^%_O'|%_O~P!7sO!Z$_Oo$oa~O!W'`i!Z'`i~P!7sO!Z'yO!W(li~O!Z(QO!W(xi~O!W(yi!Z(yi~P!7sO!Z(^O!k(ui~O!Z(vi!k(vi^(vi'|(vi~P!7sO#]2lO!Z(vi!k(vi^(vi'|(vi~O#f2oO#g2nO~P!6xO|%{O!]%|O#g2nO(V%fO(X%fO~Og2vO!]%hO%e2uO~Og2vO!]%hO%e2uO(a%PO~O#hvaPvaXva^vakva!iva!jva!lva!pva#kva#lva#mva#nva#ova#pva#qva#rva#sva#uva#wva#yva#zva'|va(eva(tva!kva!Wva'zvaova!]va%eva!eva~P$&fO#h$paP$paX$pa^$pak$paz$pa!i$pa!j$pa!l$pa!p$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#s$pa#u$pa#w$pa#y$pa#z$pa'|$pa(e$pa(t$pa!k$pa!W$pa'z$pao$pa!]$pa%e$pa!e$pa~P$'[O#h$raP$raX$ra^$rak$raz$ra!i$ra!j$ra!l$ra!p$ra#k$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#u$ra#w$ra#y$ra#z$ra'|$ra(e$ra(t$ra!k$ra!W$ra'z$rao$ra!]$ra%e$ra!e$ra~P$'}O#h%QaP%QaX%Qa^%Qak%Qaz%Qa!Z%Qa!i%Qa!j%Qa!l%Qa!p%Qa#k%Qa#l%Qa#m%Qa#n%Qa#o%Qa#p%Qa#q%Qa#r%Qa#s%Qa#u%Qa#w%Qa#y%Qa#z%Qa'|%Qa(e%Qa(t%Qa!k%Qa!W%Qa'z%Qa#]%Qao%Qa!]%Qa%e%Qa!e%Qa~P#/ZO^#`q!Z#`q'|#`q'z#`q!W#`q!k#`qo#`q!]#`q%e#`q!e#`q~P!7sOd'bX!Z'bX~P!(XO!Z.`Od(oa~O!Y3OO!Z'cX!k'cX~P&PO!Z.cO!k(pa~O!Z.cO!k(pa~P!7sO!W3RO~O#}!na![!na~PMPO#}!fa!Z!fa![!fa~P#EtO#}!ra![!ra~P!:^O#}!ta![!ta~P!<wO!]3eO$YgO$c3fO~O![3jO~Oo3kO~P#/ZO^$lq!Z$lq'|$lq'z$lq!W$lq!k$lqo$lq!]$lq%e$lq!e$lq~P!7sO!W3lO~Ol/OO(YUO(]VO~Oy)tO|)uO(|)yOg%]i({%]i!Z%]i#]%]i~Od%]i#}%]i~P%#_Oy)tO|)uOg%_i({%_i(|%_i!Z%_i#]%_i~Od%_i#}%_i~P%$QO(t$XO~P#/ZO!Y3oO(V%fO(X%fO!Z'lX!k'lX~O!Z/WO!k)Ra~O!Z/WO!e#sO!k)Ra~O!Z/WO!e#sO(t'eO!k)Ra~Od$yi!Z$yi#]$yi#}$yi~P!1fO!Y3wO(V*VO!W'nX!Z'nX~P!2TO!Z/`O!W)Sa~O!Z/`O!W)Sa~P#/ZO!e#sO~O!e#sO#s4PO~Ok4SO!e#sO(t'eO~Od(ci!Z(ci~P!1fO#]4VOd(ci!Z(ci~P!1fO!k4YO~O^$mq!Z$mq'|$mq'z$mq!W$mq!k$mqo$mq!]$mq%e$mq!e$mq~P!7sO!Z4^O!])TX~P#/ZO!j#uO~P6uO!]$wX%YYX^$wX!Z$wX'|$wX~P!0]O%Y4aOghXyhX|hX!]hX({hX(|hX^hX!ZhX'|hX~O%Y4aO~O%f4hO(V+_O(X+_O(YUO(]VO!Z'wX!['wX~O!Z0dO![)Za~OX4lO~O]4mO~O!W4qO~O^%_O'|%_O~P#/ZO!]$zO~P#/ZO!Z4vO#]4xO![)WX~O![4yO~Ol!lO|4{O!`5YO!a5PO!b5PO!};rO#R5XO#S5WO#T5WO#U5VO#X5UO#Y!xO(W!jO(YUO(]VO(h!kO(i!kO(s!oO~O![5TO~P%,[Og5_O!]1PO%e5^O~Og5_O!]1PO%e5^O(a%PO~O(V#kO(X#kO!Z'vX!['vX~O!Z1[O![)Xa~O(YUO(]VO(h5hO~O]5lO~O!k5oO~P&PO^5qO~O^5qO~P&PO#s5sO&W5tO~P!![O_1rO![5xO&j1qO~P`O!e5zO~O!e5|O!Z(ni![(ni!e(ni!l(ni(a(ni~O!Z#ei![#ei~P#EtO#]5}O!Z#ei![#ei~O!Z!_i![!_i~P#EtO^%_O#]6VO'|%_O~O^%_O!e#sO#]6VO'|%_O~O^%_O!e#sO!p6[O#]6VO'|%_O(t'eO~O!l%[O(a%PO~P%1oO!a6]O!b6]O(W!jO~PEuO!`6`O!a6]O!b6]O#X6aO#Y6aO(W!jO~PEuO!Z(^O!k(uq~O!Z(vq!k(vq^(vq'|(vq~P!7sO|%{O!]%|O#g6eO(V%fO(X%fO~O!]%hO%e6hO~Og6kO!]%hO%e6hO~O#h%]iP%]iX%]i^%]ik%]iz%]i!i%]i!j%]i!l%]i!p%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#s%]i#u%]i#w%]i#y%]i#z%]i'|%]i(e%]i(t%]i!k%]i!W%]i'z%]io%]i!]%]i%e%]i!e%]i~P%#_O#h%_iP%_iX%_i^%_ik%_iz%_i!i%_i!j%_i!l%_i!p%_i#k%_i#l%_i#m%_i#n%_i#o%_i#p%_i#q%_i#r%_i#s%_i#u%_i#w%_i#y%_i#z%_i'|%_i(e%_i(t%_i!k%_i!W%_i'z%_io%_i!]%_i%e%_i!e%_i~P%$QO#h$yiP$yiX$yi^$yik$yiz$yi!Z$yi!i$yi!j$yi!l$yi!p$yi#k$yi#l$yi#m$yi#n$yi#o$yi#p$yi#q$yi#r$yi#s$yi#u$yi#w$yi#y$yi#z$yi'|$yi(e$yi(t$yi!k$yi!W$yi'z$yi#]$yio$yi!]$yi%e$yi!e$yi~P#/ZOd'ba!Z'ba~P!1fO!Z'ca!k'ca~P!7sO!Z.cO!k(pi~O#}#`i!Z#`i![#`i~P#EtOP$ZOy#wOz#xO|#yO!j#uO!l#vO!p$ZO(eWOX#jik#ji!i#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(t#ji({#ji(|#ji!Z#ji![#ji~O#k#ji~P%<UO#k;xO~P%<UOP$ZOy#wOz#xO|#yO!j#uO!l#vO!p$ZO#k;xO#l;yO#m;yO#n;yO(eWOX#ji!i#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(t#ji({#ji(|#ji!Z#ji![#ji~Ok#ji~P%>aOk;zO~P%>aOP$ZOk;zOy#wOz#xO|#yO!j#uO!l#vO!p$ZO#k;xO#l;yO#m;yO#n;yO#o;{O(eWO#u#ji#w#ji#y#ji#z#ji#}#ji(t#ji({#ji(|#ji!Z#ji![#ji~OX#ji!i#ji#p#ji#q#ji#r#ji#s#ji~P%@lOX<WO!i;|O#p;|O#q;|O#r<VO#s;|O~P%@lOP$ZOX<WOk;zOy#wOz#xO|#yO!i;|O!j#uO!l#vO!p$ZO#k;xO#l;yO#m;yO#n;yO#o;{O#p;|O#q;|O#r<VO#s;|O#u;}O(eWO#w#ji#y#ji#z#ji#}#ji(t#ji(|#ji!Z#ji![#ji~O({#ji~P%CWO({#zO~P%CWOP$ZOX<WOk;zOy#wOz#xO|#yO!i;|O!j#uO!l#vO!p$ZO#k;xO#l;yO#m;yO#n;yO#o;{O#p;|O#q;|O#r<VO#s;|O#u;}O#w<PO(eWO({#zO#y#ji#z#ji#}#ji(t#ji!Z#ji![#ji~O(|#ji~P%EcO(|#{O~P%EcOP$ZOX<WOk;zOy#wOz#xO|#yO!i;|O!j#uO!l#vO!p$ZO#k;xO#l;yO#m;yO#n;yO#o;{O#p;|O#q;|O#r<VO#s;|O#u;}O#w<PO#y<RO(eWO({#zO(|#{O~O#z#ji#}#ji(t#ji!Z#ji![#ji~P%GnO^#{y!Z#{y'|#{y'z#{y!W#{y!k#{yo#{y!]#{y%e#{y!e#{y~P!7sOg=kOy)tO|)uO({)wO(|)yO~OP#jiX#jik#jiz#ji!i#ji!j#ji!l#ji!p#ji#k#ji#l#ji#m#ji#n#ji#o#ji#p#ji#q#ji#r#ji#s#ji#u#ji#w#ji#y#ji#z#ji#}#ji(e#ji(t#ji!Z#ji![#ji~P%JfO!j#uOP(dXX(dXg(dXk(dXy(dXz(dX|(dX!i(dX!l(dX!p(dX#k(dX#l(dX#m(dX#n(dX#o(dX#p(dX#q(dX#r(dX#s(dX#u(dX#w(dX#y(dX#z(dX#}(dX(e(dX(t(dX({(dX(|(dX!Z(dX![(dX~O#}$Oi!Z$Oi![$Oi~P#EtO#}!ri![!ri~P$)[O![6wO~O!Z'ka!['ka~P#EtO!e#sO(t'eO!Z'la!k'la~O!Z/WO!k)Ri~O!Z/WO!e#sO!k)Ri~Od$yq!Z$yq#]$yq#}$yq~P!1fO!W'na!Z'na~P#/ZO!e7OO~O!Z/`O!W)Si~P#/ZO!Z/`O!W)Si~O!W7SO~O!e#sO#s7XO~Ok7YO!e#sO(t'eO~O!W7[O~Od${q!Z${q#]${q#}${q~P!1fO^$my!Z$my'|$my'z$my!W$my!k$myo$my!]$my%e$my!e$my~P!7sO!Z4^O!])Ta~O^#`y!Z#`y'|#`y'z#`y!W#`y!k#`yo#`y!]#`y%e#`y!e#`y~P!7sOX7aO~O!Z0dO![)Zi~O]7gO~O!e5|O~O(h(rO(i(rO!Z'sX!['sX~O!Z4vO![)Wa~O!l%[O(a%PO^(nX!e(nX!p(nX#](nX'|(nX(t(nX~O(V7pO(XTO~P0pO!};rO#R7sO#S7rO#T7rO#U7qO#X'cO#Y'cO~PEuO^%_O!e#sO!p'iO#]'gO'|%_O(t'eO~O![7wO~P%,[Ol!lO(YUO(]VO(h!kO(i!kO(s!oO~O|7xO~P&(vO!`7|O!a7{O!b7{O#U7qO#X'cO#Y'cO(W!jO~PEuO!`7|O!a7{O!b7{O#S7}O#T7}O#U7qO#X'cO#Y'cO(W!jO~PEuO!a7{O!b7{O(W!jO(h!kO(i!kO(s!oO~O!]1PO~O!]1PO%e8PO~Og8SO!]1PO%e8PO~OX8XO!Z'va!['va~O!Z1[O![)Xi~O!k8]O~O!k8^O~O!k8_O~O!k8_O~P&PO^8aO~O!e8dO~O!k8eO~O!Z(yi![(yi~P#EtO^%_O#]8mO'|%_O~O^%_O!e#sO#]8mO'|%_O~O^%_O!e#sO!p8qO#]8mO'|%_O(t'eO~O!l%[O(a%PO~P&-jO!a8rO!b8rO(W!jO~PEuO!Z(^O!k(uy~O!Z(vy!k(vy^(vy'|(vy~P!7sO!]%hO%e8vO~O#h$yqP$yqX$yq^$yqk$yqz$yq!Z$yq!i$yq!j$yq!l$yq!p$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#s$yq#u$yq#w$yq#y$yq#z$yq'|$yq(e$yq(t$yq!k$yq!W$yq'z$yq#]$yqo$yq!]$yq%e$yq!e$yq~P#/ZO#h${qP${qX${q^${qk${qz${q!Z${q!i${q!j${q!l${q!p${q#k${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#u${q#w${q#y${q#z${q'|${q(e${q(t${q!k${q!W${q'z${q#]${qo${q!]${q%e${q!e${q~P#/ZO!Z'ci!k'ci~P!7sO#}#`q!Z#`q![#`q~P#EtOy/zOz/zO|/{OPvaXvagvakva!iva!jva!lva!pva#kva#lva#mva#nva#ova#pva#qva#rva#sva#uva#wva#yva#zva#}va(eva(tva({va(|va!Zva![va~Oy)tO|)uOP$paX$pag$pak$paz$pa!i$pa!j$pa!l$pa!p$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#s$pa#u$pa#w$pa#y$pa#z$pa#}$pa(e$pa(t$pa({$pa(|$pa!Z$pa![$pa~Oy)tO|)uOP$raX$rag$rak$raz$ra!i$ra!j$ra!l$ra!p$ra#k$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#u$ra#w$ra#y$ra#z$ra#}$ra(e$ra(t$ra({$ra(|$ra!Z$ra![$ra~OP%QaX%Qak%Qaz%Qa!i%Qa!j%Qa!l%Qa!p%Qa#k%Qa#l%Qa#m%Qa#n%Qa#o%Qa#p%Qa#q%Qa#r%Qa#s%Qa#u%Qa#w%Qa#y%Qa#z%Qa#}%Qa(e%Qa(t%Qa!Z%Qa![%Qa~P%JfO#}$lq!Z$lq![$lq~P#EtO#}$mq!Z$mq![$mq~P#EtO![9QO~O#}9RO~P!1fO!e#sO!Z'li!k'li~O!e#sO(t'eO!Z'li!k'li~O!Z/WO!k)Rq~O!W'ni!Z'ni~P#/ZO!Z/`O!W)Sq~O!W9XO~P#/ZO!W9XO~Od(cy!Z(cy~P!1fO!Z'qa!]'qa~P#/ZO!]%Xq^%Xq!Z%Xq'|%Xq~P#/ZOX9^O~O!Z0dO![)Zq~O#]9bO!Z'sa!['sa~O!Z4vO![)Wi~P#EtOPYXXYXkYXyYXzYX|YX!WYX!ZYX!iYX!jYX!lYX!pYX#]YX#hcX#kYX#lYX#mYX#nYX#oYX#pYX#qYX#rYX#sYX#uYX#wYX#yYX#zYX$PYX(eYX(tYX({YX(|YX~O!e%VX#s%VX~P&@UO#X-dO#Y-dO~PEuO#U9fO#X-dO#Y-dO~PEuO#S9gO#T9gO#U9fO#X-dO#Y-dO~PEuO!a9jO!b9jO(W!jO(h!kO(i!kO(s!oO~O!`9mO!a9jO!b9jO#U9fO#X-dO#Y-dO(W!jO~PEuO!]1PO%e9pO~O(YUO(]VO(h9uO~O!Z1[O![)Xq~O!k9xO~O!k9xO~P&PO!k9zO~O!k9{O~O#]9}O!Z#ey![#ey~O!Z#ey![#ey~P#EtO^%_O#]:RO'|%_O~O^%_O!e#sO#]:RO'|%_O~O^%_O!e#sO!p:VO#]:RO'|%_O(t'eO~O!]%hO%e:YO~O#}#{y!Z#{y![#{y~P#EtOP$yiX$yik$yiz$yi!i$yi!j$yi!l$yi!p$yi#k$yi#l$yi#m$yi#n$yi#o$yi#p$yi#q$yi#r$yi#s$yi#u$yi#w$yi#y$yi#z$yi#}$yi(e$yi(t$yi!Z$yi![$yi~P%JfOy)tO|)uO(|)yOP%]iX%]ig%]ik%]iz%]i!i%]i!j%]i!l%]i!p%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#s%]i#u%]i#w%]i#y%]i#z%]i#}%]i(e%]i(t%]i({%]i!Z%]i![%]i~Oy)tO|)uOP%_iX%_ig%_ik%_iz%_i!i%_i!j%_i!l%_i!p%_i#k%_i#l%_i#m%_i#n%_i#o%_i#p%_i#q%_i#r%_i#s%_i#u%_i#w%_i#y%_i#z%_i#}%_i(e%_i(t%_i({%_i(|%_i!Z%_i![%_i~O#}$my!Z$my![$my~P#EtO#}#`y!Z#`y![#`y~P#EtO!e#sO!Z'lq!k'lq~O!Z/WO!k)Ry~O!W'nq!Z'nq~P#/ZO!W:aO~P#/ZO!Z0dO![)Zy~O!Z4vO![)Wq~O#X2gO#Y2gO~PEuO#U:hO#X2gO#Y2gO~PEuO!a:lO!b:lO(W!jO(h!kO(i!kO(s!oO~O!]1PO%e:oO~O!k:rO~O^%_O#]:wO'|%_O~O^%_O!e#sO#]:wO'|%_O~O!]%hO%e:|O~OP$yqX$yqk$yqz$yq!i$yq!j$yq!l$yq!p$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#s$yq#u$yq#w$yq#y$yq#z$yq#}$yq(e$yq(t$yq!Z$yq![$yq~P%JfOP${qX${qk${qz${q!i${q!j${q!l${q!p${q#k${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#u${q#w${q#y${q#z${q#}${q(e${q(t${q!Z${q![${q~P%JfOd%a!Z!Z%a!Z#]%a!Z#}%a!Z~P!1fO!Z'sq!['sq~P#EtO#X6aO#Y6aO~PEuO!Z#e!Z![#e!Z~P#EtO^%_O#];[O'|%_O~O#h%a!ZP%a!ZX%a!Z^%a!Zk%a!Zz%a!Z!Z%a!Z!i%a!Z!j%a!Z!l%a!Z!p%a!Z#k%a!Z#l%a!Z#m%a!Z#n%a!Z#o%a!Z#p%a!Z#q%a!Z#r%a!Z#s%a!Z#u%a!Z#w%a!Z#y%a!Z#z%a!Z'|%a!Z(e%a!Z(t%a!Z!k%a!Z!W%a!Z'z%a!Z#]%a!Zo%a!Z!]%a!Z%e%a!Z!e%a!Z~P#/ZOP%a!ZX%a!Zk%a!Zz%a!Z!i%a!Z!j%a!Z!l%a!Z!p%a!Z#k%a!Z#l%a!Z#m%a!Z#n%a!Z#o%a!Z#p%a!Z#q%a!Z#r%a!Z#s%a!Z#u%a!Z#w%a!Z#y%a!Z#z%a!Z#}%a!Z(e%a!Z(t%a!Z!Z%a!Z![%a!Z~P%JfO!WcX!ZcX#]cX~P&@UOPYXXYXkYXyYXzYX|YX!ZYX!ZcX!iYX!jYX!lYX!pYX#]YX#]cX#hcX#kYX#lYX#mYX#nYX#oYX#pYX#qYX#rYX#sYX#uYX#wYX#yYX#zYX$PYX(eYX(tYX({YX(|YX~O!ecX!kYX!kcX(tcX~P',TOo(jX~P4_O(W!jO~P!*kOP;qOQ;qOa=`Ob!gOilOk;qOllOmlOslOu;qOw;qO|XO!QlO!RlO!SlO!TlO!UlO!VlO!]YO!g;tO!l[O!o;qO!p;qO!q;qO!s;uO!u;vO!xxO!yxO$U!iO$YgO(V)SO(X)SO(YUO(]VO(eWO(s]O)Q=^O~O!Z<TO![$oa~Oi%QOk$rOl$qOm$qOs%ROu%SOw<ZO|$yO!]$zO!g=eO!l$vO#g<aO$U%WO$q<]O$s<_O$v%XO(V(jO(YUO(]VO(a%PO(e$sO~O#t)ZO~P'1kO![YX![cX~P',TO#h;wO~O!e#sO#h;wO~O#]<XO~O#s;|O~O#]<cO!Z(yX![(yX~O#]<XO!Z(wX![(wX~O#h<dO~Od<fO~P!1fO#h<kO~O#h<lO~O!e#sO#h<mO~O!e#sO#h<dO~O#}<nO~P#EtO#h<oO~O#h<pO~O#h<qO~O#h<rO~O#h<sO~O#h<tO~O#}<uO~P!1fO#}<vO~P!1fO$Y~!j#R#T#U#X#f#g#r)Q$q$s$v%Y%d%e%f%l%n%q%r%t%v~(QR$Y)Q#l!V(O(W#ml#k#nky(P(i(h(X(V$[$^~",goto:"$/m)_PPPP)`P)cP)sP+u/zPPPP6}PP7dP=bARPAfPAfPPPAfPCUPAfPAfPAfPCYPPC_PCxPHtPPPPPPPHxPPPPHxKzPPPLQNQPHxP!!hPPPP!$yHxPPPHxPHxP!'[HxPP!*q!+s!+xP!,j!,n!,jPPPP!/z!2PPP!2Y!3dP!+sHxHx!6v!:R!?[!?[!CSPPP!CZHxPPPPPPPPPPP!FiP!G}PPHx!I_PHxPHxHxHxHxPHx!JtPP!M}P##SP##W##b##f##fP!MzP##j##jP#&oP#&sHxHx#&y#)}AfPAfPAfAfP#+XAfAf#-RAf#/`Af#1SAfAf#1p#3l#3l#3p#3x#3l#4QP#3lPAf#4|Af#6UAfAf6}PPP#7aPP#7y#7yP#7yP#8`#7yPP#8fP#8]P#8]#8x!2U#8]#9d#9j6z)c#9m)cPP#9t#9t#9tP)cPP)cP)cPP)cPPPP)cP#9z#9}P#9})cPP#:RPPP#:UPP)cPP)cPP)cPP)cPP)cP)c)cPP#:[#:b#:l#:r#:x#;O#;U#;d#;j#;p#;z#<Q#<|#=]#=c#=u#={#>R#>a#>v#@W#@f#@l#@r#@x#AO#AY#A`#Af#Ap#BS#BYPPPPPPPPPP#B`PPPPPPPP#CS#FnP#HZ#Hb#HjPPPPP#Lt$ j$(Y$(]$(`$*]$*`$*c$*jPP$*p$*t$+m$,m$,q$-VPP$-Z$-a$-eP$-h$-l$-o$.e$.{$/Q$/T$/W$/^$/a$/e$/iR!zRmqOYs!Z#b%^&i&k&l&n,e,j1l1oU!qQ%h+QQ%duQ%pyQ%w|Q&a!VS&}!e,}Q'X!g['^!n!s!t!u!v!wS*]$z*bQ+]%qQ+j%yQ,U&ZQ-T'UQ-X'YW-a'_'`'a'bQ/q*dQ1Z,VU2c-c-e-fS5P1P5SS6]2f2hU7{5W5X5YQ8r6`S9j7|7}Q:l9mR<b;u%QeOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%j%u&b&e&i&k&l&n&r&z'g'w'y(P(Z(l(p(t)s*u+U+o,a,e,j-]-p-y.c.j/{0Q0c1S1d1e1f1h1l1o1q2^2l3O4{5_5q5s5t6V7x8S8a8m:R:w;[S#n^;r!r)U$Y$k'O)h,v,y.r2Q3e4x5}9b9};q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aQ*m%TQ+b%sQ,W&^Q,_&fQ.Y<YQ0U*}Q0^+VQ0i+cQ1c,]Q2r.VQ4g0dQ5f1[Q6j2vQ6p<ZQ7c4hR8y6k'OlOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%j%u&b&e&f&i&k&l&n&r&z'O'g'w'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=a#S!lQ!n!q!s!t!u!v!w!x%h&}'U'^'_'`'a'b'c+Q,}-T-a-c-d-e-f1P2c2f2g2h4|5S5U5V5W5X6]6`6a7q7r7s7}8r9f9g:h$Y$qj#s#u$a$b$v$y%U%V%Z)o)x)z){*S*Y*h*i*|+V+t+w.U.`/_/`/b/}0v0y1R2u3m3w4P4V4^4a5^6h7O7X8P8v9R9p:Y:o:|<V<W<[<]<^<_<`<a<g<h<i<j<k<l<o<p<q<r<u<v=^=f=g=j=kQ%z|Q&{!eS'R%|-QQ+b%sS/O)u/QQ/|*qQ0i+cQ0n+iQ1b,[Q1c,]Q4g0dQ4p0pQ5i1^Q5j1aQ7c4hQ7f4mQ8[5lQ9a7gR9v8XpnOYs!V!Z#b%^&`&i&k&l&n,e,j1l1oR,Y&b&xaOPYZstuvz!Z!`!h!m#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%j%u&b&e&f&i&k&l&n&r&z'g'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=`=a[#ZX[#U#X'O'wQ%gwQ%kxQ%oyS%t|%y!U%}!O!P#e#g#j%[%{(Q(X(Y(^+m+n+p,c,w-t-w-{-|.O1t2n2o5|6eQ&V!TQ'W!gQ(e#pS*P$v*TS+[%p%qQ+`%sQ,P&XQ,T&ZS-W'X'YQ.X(fQ/[*QQ0b+]Q0h+cQ0j+dQ0m+hQ1U,QS1Y,U,VQ2Y-XQ3n/WQ4f0dQ4j0gQ4o0oQ5e1ZQ6{3oQ7b4hQ7e4lQ9]7aR:c9^v$xj#u%U%V%Z)x)z*S*h*i.`/_/}3m4V9R=^=f=g!`%my!g!p%o%p%q&|'W'X'Y']'j*[+[+],z-W-X-`-b/i0b2V2Y2a2e4R6Z6_8p:UQ+O%gQ+u&SQ+x&TQ,S&ZQ.W(eQ1T,PU1X,T,U,VQ2w.XQ5`1US5d1Y1ZS7o4z5OQ8W5eU9h7t7y7zU:j9i9k9lQ;S:kQ;b;T!z=b#s$a$b$v$y)o){*Y*|+V+t+w.U/`/b0v0y1R2u3w4P4^4a5^6h7O7X8P8v9p:Y:o:|<[<^<`<g<i<k<o<q<u=j=kg=c<V<W<]<_<a<h<j<l<p<r<vW$}j%P*j=^S&S!Q&`Q&T!RQ&U!SR+s&Q$Z$|j#s#u$a$b$v$y%U%V%Z)o)x)z){*S*Y*h*i*|+V+t+w.U.`/_/`/b/}0v0y1R2u3m3w4P4V4^4a5^6h7O7X8P8v9R9p:Y:o:|<V<W<[<]<^<_<`<a<g<h<i<j<k<l<o<p<q<r<u<v=^=f=g=j=kT)p$s)qV*n%T<Y<ZU'R!e%|-QS(s#w#xQ+g%vS.Q(a(bQ0z+yQ4W/zR7k4v'OlOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%j%u&b&e&f&i&k&l&n&r&z'O'g'w'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=a$o$^d#W#c%b%c%e'v'|(h(o(w(x(y(z({(|(})O)P)Q)R)T)W)[)f*z+f,{-i-n-s-x._.e.i.k.l.m.|0O1{2O2[2k2}3S3T3U3V3W3X3Y3Z3[3]3^3_3`3c3d3i4[4d6P6U6c6n6o6t6u7m8g8k8z9O9P:P:e:s:u;Y;e;s=TT#RW#S'PlOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%j%u&b&e&f&i&k&l&n&r&z'O'g'w'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aQ'P!eR2R,}!z!lQ!e!n!q!s!t!u!v!w!x%h&}'U'^'_'`'a'b'c+Q,}-T-a-c-d-e-f2c2f2g2h4|5U5V6]6`6a7q7r7s8r9f9g:hS*[$z*bS/i*]*dQ/r*eQ0|+{Q4R/qQ4U/tS4z1P5SS7t5P5YS7y5W5XS9i7{7|Q9k7}S:k9j9mR;T:llqOYs!Z#b%^&i&k&l&n,e,j1l1oQ&p!^Q'k!uS(g#r;wQ+Y%nQ+}&VQ,O&WQ-U'VQ-h'dS.^(l<dS0P*u<mQ0`+ZQ1O+|Q1s,lQ1u,mQ1},xQ2W-VQ2Z-ZS4]0Q<sQ4b0aS4e0c<tQ6O2PQ6R2XQ6W2`Q7`4cQ8h6QQ8i6SQ8l6XQ9|8eQ:Q8nQ:v:SR;Z:x$j$]d#W#c%c%e'v'|(h(o(w(x(y(z({(|(})O)P)Q)R)T)W)[)f*z+f,{-i-n-s-x._.e.i.l.m.|0O1{2O2[2k2}3S3T3U3V3W3X3Y3Z3[3]3^3_3`3c3d3i4[4d6P6U6c6n6o6t6u7m8g8k8z9O9P:P:e:s:u;Y;e;s=TS(d#m'[U*g${(k3bS*y%b.kQ2s0UQ6g2rQ8x6jR:Z8y$j$[d#W#c%c%e'v'|(h(o(w(x(y(z({(|(})O)P)Q)R)T)W)[)f*z+f,{-i-n-s-x._.e.i.l.m.|0O1{2O2[2k2}3S3T3U3V3W3X3Y3Z3[3]3^3_3`3c3d3i4[4d6P6U6c6n6o6t6u7m8g8k8z9O9P:P:e:s:u;Y;e;s=TS(c#m'[S(u#x$]S*x%b.kS.R(b(dQ.n)VQ0R*yR2p.S'OlOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%j%u&b&e&f&i&k&l&n&r&z'O'g'w'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aS#n^;rQ&k!XQ&l!YQ&n![Q&o!]R1k,hQ%ixQ*{%gQ+T%kS.T(e+OQ0Y+SW2t.W.X0T0VQ4`0ZU6f2q2s2wS8u6g6iS:X8w8xS:z:W:ZQ;]:{R;f;^V!rQ%h+Q!__OQY[`s!V!Z!n#b#e%[%^%h&`&b&i&k&l&n(^+Q,e,j-{1P1l1o4|5ST#n^;r%[{OPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%j%u&b&e&f&i&k&l&n&r&z'g'w'y(P(Z(l(p(t)s*u*}+U+o,a,e,j-]-p-y.V.c.j/{0Q0c1S1d1e1f1h1l1o1q2^2l2v3O4{5_5q5s5t6V6k7x8S8a8m:R:w;[S(s#w#xS.Q(a(b!s<z$Y$k'O)h,v,y.r2Q3e4x5}9b9};q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aU!pQ%h+QY']!n!t!u!v!wS'j!q!sW'l!x4|5U5VS-`'^'_U-b'`'a'bW-g'c7q7r7sS2a-a-cU2d-d9f9gS2e-e-fS5O1P5SS6Z2c2fS6^2g:hQ6_2hS7t5P5YS7z5W5XS8p6]6`Q8s6aS9i7{7|Q9l7}Q:U8rS:k9j9mR;T:lU!rQ%h+QT5Q1P5SU'i!p4}5OS(]#f1iU-_']'l7zQ/Z*PQ/g*[U2b-b-g9lQ3s/[S3|/h/rS6[2d2eQ6z3nS7V4S4US8q6^6_Q9T6{Q9[7YR:V8sQ#tcU'h!p4}5OS([#f1iQ*v%]Q+W%lQ+^%rW-^']'i'l7zQ-z(]Q/Y*PQ/f*[Q/l*_Q0_+XQ1V,RW2_-_-b-g9lS3r/Z/[S3{/g/rQ4O/kQ4Q/mQ5b1WU6Y2b2d2eQ6y3nQ6}3sS7R3|4UQ7W4TQ8U5cU8o6[6^6_S9S6z6{Q9W7SQ9Y7VQ9d7nQ9s8VS:T8q8sQ:_9TQ:`9XQ:b9[Q:g9eQ:q9tQ:y:VQ;O:aQ;Q:iQ;`;RQ;i;aQ;m;jQ<}<xQ=Y=RR=Z=S%[bOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%j%u&b&e&f&i&k&l&n&r&z'g'w'y(P(Z(l(p(t)s*u*}+U+o,a,e,j-]-p-y.V.c.j/{0Q0c1S1d1e1f1h1l1o1q2^2l2v3O4{5_5q5s5t6V6k7x8S8a8m:R:w;[S#tz!h!r<w$Y$k'O)h,v,y.r2Q3e4x5}9b9};q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aR<}=`%[cOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%j%u&b&e&f&i&k&l&n&r&z'g'w'y(P(Z(l(p(t)s*u*}+U+o,a,e,j-]-p-y.V.c.j/{0Q0c1S1d1e1f1h1l1o1q2^2l2v3O4{5_5q5s5t6V6k7x8S8a8m:R:w;[Q%]k!`%ly!g!p%o%p%q&|'W'X'Y']'j*[+[+],z-W-X-`-b/i0b2V2Y2a2e4R6Z6_8p:US%rz!hQ+X%mQ,R&ZW1W,S,T,U,VU5c1X1Y1ZS7n4z5OS8V5d5eW9e7o7t7y7zQ9t8WW:i9h9i9k9lS;R:j:kS;a;S;TQ;j;b!r<x$Y$k'O)h,v,y.r2Q3e4x5}9b9};q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aQ=R=_R=S=`%OfOPYZstuv!Z!`!m#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%j%u&b&e&i&k&l&n&r&z'g'y(P(Z(l(p(t)s*u*}+U+o,a,e,j-]-p-y.V.c.j/{0Q0c1S1d1e1f1h1l1o1q2^2l2v3O4{5_5q5s5t6V6k7x8S8a8m:R:w;[Y#`X[#U#X'w!U%}!O!P#e#g#j%[%{(Q(X(Y(^+m+n+p,c,w-t-w-{-|.O1t2n2o5|6eQ,`&f!p<y$Y$k)h,v,y.r2Q3e4x5}9b9};q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aR<|'OS'S!e%|R2T-Q%QeOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%j%u&b&e&i&k&l&n&r&z'g'w'y(P(Z(l(p(t)s*u+U+o,a,e,j-]-p-y.c.j/{0Q0c1S1d1e1f1h1l1o1q2^2l3O4{5_5q5s5t6V7x8S8a8m:R:w;[!r)U$Y$k'O)h,v,y.r2Q3e4x5}9b9};q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aQ,_&fQ0U*}Q2r.VQ6j2vR8y6k!l$Sd#W%b'v'|(h(o)O)P)Q)R)W)[+f-i-n-s-x._.e.|0O2[2k2}3`4[4d6U6c6n8k:P:u;Y;e;s!T<O)T)f,{.k1{2O3S3[3]3^3_3c3i6P6o6t6u7m8g8z9O9P:e:s=T!h$Ud#W%b'v'|(h(o)Q)R)W)[+f-i-n-s-x._.e.|0O2[2k2}3`4[4d6U6c6n8k:P:u;Y;e;s!P<Q)T)f,{.k1{2O3S3^3_3c3i6P6o6t6u7m8g8z9O9P:e:s=T!d$Yd#W%b'v'|(h(o)W)[+f-i-n-s-x._.e.|0O2[2k2}3`4[4d6U6c6n8k:P:u;Y;e;sQ3m/Uz=a)T)f,{.k1{2O3S3c3i6P6o6t6u7m8g8z9O9P:e:s=TQ=f=hR=g=i'OlOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%j%u&b&e&f&i&k&l&n&r&z'O'g'w'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aS$li$mR3f.q'VhOPXYZ[istuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%j%u&b&e&f&i&k&l&n&r&z'O'g'w'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.q.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aT$hg$nQ$fgS)_$i)cR)k$nT$gg$nT)a$i)c'ViOPXYZ[istuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%j%u&b&e&f&i&k&l&n&r&z'O'g'w'y(P(Z(l(p(t)h)s*u*}+U+o,a,e,j,v,y-]-p-y.V.c.j.q.r/{0Q0c1S1d1e1f1h1l1o1q2Q2^2l2v3O3e4x4{5_5q5s5t5}6V6k7x8S8a8m9b9}:R:w;[;q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=aT$li$mQ$oiR)j$m%[kOPXYZ[stuv!Z!`!m#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%j%u&b&e&f&i&k&l&n&r&z'g'w'y(P(Z(l(p(t)s*u*}+U+o,a,e,j-]-p-y.V.c.j/{0Q0c1S1d1e1f1h1l1o1q2^2l2v3O4{5_5q5s5t6V6k7x8S8a8m:R:w;[!s=_$Y$k'O)h,v,y.r2Q3e4x5}9b9};q;t;u;v;w;x;y;z;{;|;}<O<P<Q<R<S<T<X<b<c<d<f<m<n<s<t=a#amOPY[s!Z!`!m#Q#b#l#y$k%^%j&b&e&f&i&k&l&n&r&z(t)h*}+U+o,a,e,j.V.r/{1S1d1e1f1h1l1o1q2v3e4{5_5q5s5t6k7x8S8av${j#u%U%V%Z)x)z*S*h*i.`/_/}3m4V9R=^=f=g!z(k#s$a$b$v$y)o){*Y*|+V+t+w.U/`/b0v0y1R2u3w4P4^4a5^6h7O7X8P8v9p:Y:o:|<[<^<`<g<i<k<o<q<u=j=kQ*r%XQ.})tg3b<V<W<]<_<a<h<j<l<p<r<vv$wj#u%U%V%Z)x)z*S*h*i.`/_/}3m4V9R=^=f=gQ*U$xS*_$z*bQ*s%YQ/m*`!z=P#s$a$b$v$y)o){*Y*|+V+t+w.U/`/b0v0y1R2u3w4P4^4a5^6h7O7X8P8v9p:Y:o:|<[<^<`<g<i<k<o<q<u=j=kf=Q<V<W<]<_<a<h<j<l<p<r<vQ=U=bQ=V=cQ=W=dR=X=ev${j#u%U%V%Z)x)z*S*h*i.`/_/}3m4V9R=^=f=g!z(k#s$a$b$v$y)o){*Y*|+V+t+w.U/`/b0v0y1R2u3w4P4^4a5^6h7O7X8P8v9p:Y:o:|<[<^<`<g<i<k<o<q<u=j=kg3b<V<W<]<_<a<h<j<l<p<r<vloOYs!Z#b%^&i&k&l&n,e,j1l1oQ*X$yQ,s&uQ,t&wR3v/`$Y$|j#s#u$a$b$v$y%U%V%Z)o)x)z){*S*Y*h*i*|+V+t+w.U.`/_/`/b/}0v0y1R2u3m3w4P4V4^4a5^6h7O7X8P8v9R9p:Y:o:|<V<W<[<]<^<_<`<a<g<h<i<j<k<l<o<p<q<r<u<v=^=f=g=j=kQ+v&TQ0x+xQ4t0wR7j4uT*a$z*bS*a$z*bT5R1P5SS/k*^4{T4T/s7xQ+W%lQ/l*_Q0_+XQ1V,RQ5b1WQ8U5cQ9d7nQ9s8VQ:g9eQ:q9tQ;Q:iQ;`;RQ;i;aR;m;jn)x$t(m*t/^/u/v2{3t4Z6x7Z:^=O=[=]!W<g(i)Y*O*W.].y/U/c0S0u0w2z3u3y4s4u6l6m7P7T7]7_9V9Z:}=h=i]<h3a6s8{:[:];gp)z$t(m*t/S/^/u/v2{3t4Z6x7Z:^=O=[=]!Y<i(i)Y*O*W.].y/U/c0S0u0w2x2z3u3y4s4u6l6m7P7T7]7_9V9Z:}=h=i_<j3a6s8{8|:[:];gpnOYs!V!Z#b%^&`&i&k&l&n,e,j1l1oQ&]!UR,a&fpnOYs!V!Z#b%^&`&i&k&l&n,e,j1l1oR&]!UQ+z&UR0t+sqnOYs!V!Z#b%^&`&i&k&l&n,e,j1l1oQ1Q,PS5]1T1UU8O5Z5[5`S9o8Q8RS:m9n9qQ;U:nR;c;VQ&d!VR,Z&`R5i1^S%t|%yR0j+dQ&i!WR,e&jR,k&oT1m,j1oR,o&pQ,n&pR1v,oQ'n!yR-j'nQsOQ#bYT%as#bQ!|UR'p!|Q#PVR'r#PQ)q$sR.z)qQ#SWR't#SQ#VXU'z#V'{-qQ'{#WR-q'|Q-O'PR2S-OQ.a(mR2|.aQ.d(oS3P.d3QR3Q.eQ+Q%hR0W+Qr`OYs!V!Z#b%^&`&b&i&k&l&n,e,j1l1oU!nQ%h+QS#e[%[Y#o`!n#e-{4|Q-{(^T4|1P5SS#]X%{U(R#](S-rQ(S#^R-r'}Q-R'SR2U-RQ(_#hQ-u(WW.P(_-u2i6bQ2i-vR6b2jQ)c$iR.s)cQ$miR)i$mQ$`dU)X$`-m<UQ-m;sR<U)fQ/X*PW3p/X3q6|9UU3q/Y/Z/[S6|3r3sR9U6}#m)v$t(i(m)Y*O*W*o*p*t.Z.[.].y/S/T/U/^/c/u/v0S0u0w2x2y2z2{3a3t3u3y4Z4s4u6l6m6q6r6s6x7P7T7Z7]7_8{8|8}9V9Z:[:]:^:};g=O=[=]=h=iQ/a*WU3x/a3z7QQ3z/cR7Q3yQ*b$zR/o*bQ*k%OR/x*kQ4_0SR7^4_Q+q&OR0s+qQ4w0zS7l4w9cR9c7mQ+|&VR0}+|Q5S1PR7v5SQ1],WS5g1]8YR8Y5iQ0e+`W4i0e4k7d9_Q4k0hQ7d4jR9_7eQ+e%tR0k+eQ1o,jR5w1oWrOYs#bQ&m!ZQ*w%^Q,d&iQ,f&kQ,g&lQ,i&nQ1j,eS1m,j1oR5v1lQ%`pQ&q!_Q&t!aQ&v!bQ&x!cU'f!p4}5OQ+l%zQ+r&PQ,Y&dQ,q&sY-[']'h'i'l7zQ/n*aS1`,Z,^Q1w,pQ1x,sQ1y,t[2]-^-_-b-g-i9lQ4n0nQ4r0uQ5a1VQ5k1bQ5u1kY6T2[2_2b2d2eQ7h4pQ7i4sQ7u5RQ8T5bQ8Z5jY8j6U6Y6[6^6_Q9`7fQ9r8UQ9w8[W:O8k8o8q8sQ:d9aQ:f9dQ:p9sU:t:P:T:VQ;P:gQ;W:qS;X:u:yQ;_;QQ;d;YQ;h;`Q;k;eQ;l;iR;n;mQ%nyQ'V!gQ'd!pU+Z%o%p%qQ,x&|U-V'W'X'YS-Z']'jQ/e*[S0a+[+]Q2P,zS2X-W-XS2`-`-bQ3}/iQ4c0bQ6Q2VQ6S2YS6X2a2eQ7U4RS8n6Z6_Q:S8pR:x:US$uj=^R*l%PU%Oj%P=^R/w*jQ$tjS(i#s+VQ(m#uS)Y$a$bQ*O$vQ*W$yQ*o%UQ*p%VQ*t%ZQ.Z<[Q.[<^Q.]<`Q.y)oQ/S)xQ/T)zQ/U){Q/^*SQ/c*YQ/u*hQ/v*ih0S*|.U1R2u5^6h8P8v9p:Y:o:|Q0u+tQ0w+wQ2x<gQ2y<iQ2z<kQ2{.`S3a<V<WQ3t/_Q3u/`Q3y/bQ4Z/}Q4s0vQ4u0yQ6l<oQ6m<qQ6q<]Q6r<_Q6s<aQ6x3mQ7P3wQ7T4PQ7Z4VQ7]4^Q7_4aQ8{<lQ8|<hQ8}<jQ9V7OQ9Z7XQ:[<pQ:]<rQ:^9RQ:}<uQ;g<vQ=O=^Q=[=fQ=]=gQ=h=jR=i=klpOYs!Z#b%^&i&k&l&n,e,j1l1oQ!fPS#d[#lQ&s!`U'Z!m4{7xQ's#QQ(v#yQ)g$kQ+S%jS,^&b&eQ,b&fQ,p&rQ,u&zQ.g(tQ.w)hQ0V*}Q0Z+UQ0q+oQ1g,aQ2s.VQ3h.rQ4X/{Q5[1SQ5m1dQ5n1eQ5p1fQ5r1hQ5y1qQ6g2vQ6v3eQ8R5_Q8`5qQ8b5sQ8c5tQ8x6kQ9q8SR9y8a#UdOPY[s!Z!`!m#b#l#y%^%j&b&e&f&i&k&l&n&r&z(t*}+U+o,a,e,j.V/{1S1d1e1f1h1l1o1q2v4{5_5q5s5t6k7x8S8aQ#WXQ#cZQ%btQ%cuQ%evS'v#U'yQ'|#XQ(h#rQ(o#vQ(w#|Q(x#}Q(y$OQ(z$PQ({$QQ(|$RQ(}$SQ)O$TQ)P$UQ)Q$VQ)R$WQ)T$YQ)W$_Q)[$cW)f$k)h.r3eQ*z%dQ+f%uS,{'O2QQ-i'gS-n'w-pQ-s(PQ-x(ZQ._(lQ.e(pQ.i;qQ.k;tQ.l;uQ.m;vQ.|)sQ0O*uQ1{,vQ2O,yQ2[-]Q2k-yQ2}.cQ3S;wQ3T;xQ3U;yQ3V;zQ3W;{Q3X;|Q3Y;}Q3Z<OQ3[<PQ3]<QQ3^<RQ3_<SQ3`.jQ3c<XQ3d<bQ3i<TQ4[0QQ4d0cQ6P<cQ6U2^Q6c2lQ6n3OQ6o<dQ6t<fQ6u<mQ7m4xQ8g5}Q8k6VQ8z<nQ9O<sQ9P<tQ:P8mQ:e9bQ:s9}Q:u:RQ;Y:wQ;e;[Q;s#QR=T=aR#YXR'Q!eU!pQ%h+QS&|!e,}Y']!n!t!u!v!wS'j!q!s['l!x4|5U5V5W5XS,z&}'US-`'^'_U-b'`'a'bY-g'c7q7r7s7}Q2V-TS2a-a-cU2d-d9f9gS2e-e-fS4}1P5SS6Z2c2fS6^2g:hQ6_2hS8p6]6`Q8s6aR:U8rR(n#uR(q#vQ!fQT+P%h+QQ#m^R'[;rT#i[%[S#h[%[U&O!O!P,cU(W#e#g#jS-v(X(YQ-}(^Q0r+pQ2j-wU2m-{-|.OS6d2n2oR8t6e`#[X#U#X%{'w(Q+m-tt#f[!O!P#e#g#j%[(X(Y(^+p-w-{-|.O2n2o6eQ1i,cQ1|,wQ5{1tQ8f5|T<{'O+nT#_X%{S#^X%{S'x#U(QS'}#X+mS,|'O+nT-o'w-tT'T!e%|Q$igR)m$nT)b$i)cR3g.qT*R$v*TR*Z$yQ0T*|Q2q.UQ5Z1RQ6i2uQ8Q5^Q8w6hQ9n8PQ:W8vQ:n9pQ:{:YQ;V:oR;^:|lqOYs!Z#b%^&i&k&l&n,e,j1l1oQ&c!VR,Y&`V&P!O!P,cR0{+yR,X&^Q%x|R+k%yR+a%sT&g!W&jT&h!W&jT1n,j1o",nodeNames:"\u26a0 ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation \u043d\u0443\u043b\u044c \u044d\u0442\u043e super constructor \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class \u043a\u043b\u0430\u0441\u0441 ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for \u0446\u0438\u043a\u043b ForSpec ForInSpec ForOfSpec of WhileStatement while \u043f\u043e\u043a\u0430 WithStatement with DoStatement do \u0434\u0435\u043b\u0430\u0442\u044c IfStatement if \u0435\u0441\u043b\u0438 else \u0438\u043d\u0430\u0447\u0435 SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try \u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c CatchClause catch \u043b\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u0439\u043c\u0430\u0442\u044c FinallyClause finally \u0432\u0441\u0435\u0433\u0434\u0430 ReturnStatement return \u0432\u0435\u0440\u043d\u0443\u0442\u044c ThrowStatement throw \u0431\u0440\u043e\u0441\u0438\u0442\u044c BreakStatement break \u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c ContinueStatement continue \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:382,context:zdt,nodeProps:[["group",-26,6,14,16,66,203,207,210,211,213,216,219,230,232,239,242,244,247,252,258,268,271,274,277,280,282,283,"Statement",-36,10,11,25,28,29,35,45,48,49,50,51,52,53,55,60,68,76,80,82,84,85,107,108,117,118,135,138,140,141,142,143,145,146,166,167,169,"Expression",-23,24,26,30,34,36,38,170,172,174,175,177,178,179,181,182,183,185,186,187,197,199,201,202,"Type",-3,89,100,106,"ClassItem"],["openedBy",31,"InterpolationStart",54,"[",58,"{",73,"(",147,"JSXStartTag",159,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",59,"}",74,")",148,"JSXSelfCloseEndTag JSXEndTag",164,"JSXEndTag"]],propSources:[Gdt],skippedNodes:[0,3,4,286],repeatNodeCount:32,tokenData:"$IR(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvFavwHxwxKgxy!#vyz!%Qz{!&[{|!)O|}!*]}!O!)O!O!P!+g!P!Q!5w!Q!R#4t!R![#7T![!]#DT!]!^#Ea!^!_#Fk!_!`#KS!`!a#Mn!a!b$${!b!c$(z!c!}>P!}#O$*U#O#P$+`#P#Q$0w#Q#R$2R#R#S>P#S#T$3`#T#o$4j#o#p$9Q#p#q$9v#q#r$;W#r#s$<d#s$f%Z$f$g+g$g#BY>P#BY#BZ$=n#BZ$IS>P$IS$I_$=n$I_$I|>P$I|$I}$Fu$I}$JO$Fu$JO$JT>P$JT$JU$=n$JU$KV>P$KV$KW$=n$KW&FU>P&FU&FV$=n&FV;'S>P;'S;=`FZ<%l?HT>P?HT?HU$=n?HUO>P(n%d_$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(^!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(^!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(ZpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(ZpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Zp(^!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$h&j(Zp(^!b(O(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST([#S$h&j(P(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$h&j(Zp(^!b(P(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$h&j!p$Ip(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#u$Id$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#u$Id$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_(Y$(n$h&j(^!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$h&j(^!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$c#t$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$c#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$c#t$h&j(^!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ(^!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$c#t(^!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$h&j(s!L^(Zp(^!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`m$h&j(Zp(^!b(h!LY(V&;d$[#tOY%ZYZ&cZp%Zpq@Zqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!ODT!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`FZ<%lO>P$/|@dg$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}st%ZtuA{uw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}A{!}#O%Z#O#P&c#P#R%Z#R#SA{#S#T%Z#T#oA{#o#p*g#p$g%Z$g;'SA{;'S;=`C}<%lOA{$/|BYk$h&j(Zp(^!b(i!LY(X!+SOY%ZYZ&cZp%Zpq@Zqr%Zrs&}st%ZtuA{uw%Zwx(rx!Q%Z!Q![A{![!^%Z!^!_*g!_!c%Z!c!}A{!}#O%Z#O#P&c#P#R%Z#R#SA{#S#T%Z#T#oA{#o#p*g#p$g%Z$g;'SA{;'S;=`C}<%lOA{$/|DQP;=`<%lA{+dD`k$h&j(Zp(^!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuDTuw%Zwx(rx}%Z}!ODT!O!Q%Z!Q![DT![!^%Z!^!_*g!_!c%Z!c!}DT!}#O%Z#O#P&c#P#R%Z#R#SDT#S#T%Z#T#oDT#o#p*g#p$g%Z$g;'SDT;'S;=`FT<%lODT+dFWP;=`<%lDT(CSF^P;=`<%l>P%#SFl`$h&j(Zp(^!b#m$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SGy_$h&j$P$Id(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfITa(|%<v$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sv%ZvwJYwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SJe`$h&j#y$Id(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bKp_(]$)`$h&j(ZpOYLoYZMuZrLorsMuswLowx! Vx!^Lo!^!_!!X!_#OLo#O#PMu#P#oLo#o#p!!X#p;'SLo;'S;=`!#p<%lOLo*QLv_$h&j(ZpOYLoYZMuZrLorsMuswLowx! Vx!^Lo!^!_!!X!_#OLo#O#PMu#P#oLo#o#p!!X#p;'SLo;'S;=`!#p<%lOLo)`MzX$h&jOwMuwx6cx!^Mu!^!_Ng!_#oMu#o#pNg#p;'SMu;'S;=`! P<%lOMu#tNjTOwNgwx7]x;'SNg;'S;=`Ny<%lONg#tN|P;=`<%lNg)`! SP;=`<%lMu*Q! `]$c#t$h&j(ZpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$f!!^Z(ZpOY!!XYZNgZr!!XrsNgsw!!Xwx!#Px#O!!X#O#PNg#P;'S!!X;'S;=`!#j<%lO!!X$f!#WU$c#t(ZpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$f!#mP;=`<%l!!X*Q!#sP;=`<%lLo(*Q!$R_!l(!b$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l!%]_!kM|$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!&ib$h&j(Zp(^!b(W#)d#n$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!'q{!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!'|`$h&j(Zp(^!b#k$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!)Z`$h&j(Zp(^!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!*h_!Z&;l$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!+rc$h&j(Zp(^!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!,}!P!Q%Z!Q![!/g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!-Wa$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!.]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!.h_!YMt$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/rg$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!/g![!^%Z!^!_*g!_!g%Z!g!h!1Z!h#O%Z#O#P&c#P#R%Z#R#S!/g#S#X%Z#X#Y!1Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!1dg$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!2{|}%Z}!O!2{!O!Q%Z!Q![!4a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!4a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!3Uc$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!4a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!4a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!4lc$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!4a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!4a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!6Sf$h&j(Zp(^!b#l$IdOY!7hYZ&cZr!7hrs!8{sw!7hwx!G}xz!7hz{#(s{!P!7h!P!Q#*Y!Q!^!7h!^!_##h!_!`#1x!`!a#3_!a!}!7h!}#O#'[#O#P!@w#P#o!7h#o#p##h#p;'S!7h;'S;=`#(m<%lO!7h(r!7sb$h&j(Zp(^!b!VSOY!7hYZ&cZr!7hrs!8{sw!7hwx!G}x!P!7h!P!Q# h!Q!^!7h!^!_##h!_!}!7h!}#O#'[#O#P!@w#P#o!7h#o#p##h#p;'S!7h;'S;=`#(m<%lO!7h(Q!9U`$h&j(^!b!VSOY!8{YZ&cZw!8{wx!:Wx!P!8{!P!Q!Ao!Q!^!8{!^!_!Cg!_!}!8{!}#O!Fn#O#P!@w#P#o!8{#o#p!Cg#p;'S!8{;'S;=`!Gw<%lO!8{&n!:_^$h&j!VSOY!:WYZ&cZ!P!:W!P!Q!;Z!Q!^!:W!^!_!<g!_!}!:W!}#O!?U#O#P!@w#P#o!:W#o#p!<g#p;'S!:W;'S;=`!Ai<%lO!:W&n!;ba$h&j!VSO!^&c!_#Z&c#Z#[!;Z#[#]&c#]#^!;Z#^#a&c#a#b!;Z#b#g&c#g#h!;Z#h#i&c#i#j!;Z#j#m&c#m#n!;Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!<lX!VSOY!<gZ!P!<g!P!Q!=X!Q!}!<g!}#O!=p#O#P!>o#P;'S!<g;'S;=`!?O<%lO!<gS!=^U!VS#Z#[!=X#]#^!=X#a#b!=X#g#h!=X#i#j!=X#m#n!=XS!=sVOY!=pZ#O!=p#O#P!>Y#P#Q!<g#Q;'S!=p;'S;=`!>i<%lO!=pS!>]SOY!=pZ;'S!=p;'S;=`!>i<%lO!=pS!>lP;=`<%l!=pS!>rSOY!<gZ;'S!<g;'S;=`!?O<%lO!<gS!?RP;=`<%l!<g&n!?Z[$h&jOY!?UYZ&cZ!^!?U!^!_!=p!_#O!?U#O#P!@P#P#Q!:W#Q#o!?U#o#p!=p#p;'S!?U;'S;=`!@q<%lO!?U&n!@UX$h&jOY!?UYZ&cZ!^!?U!^!_!=p!_#o!?U#o#p!=p#p;'S!?U;'S;=`!@q<%lO!?U&n!@tP;=`<%l!?U&n!@|X$h&jOY!:WYZ&cZ!^!:W!^!_!<g!_#o!:W#o#p!<g#p;'S!:W;'S;=`!Ai<%lO!:W&n!AlP;=`<%l!:W(Q!Axi$h&j(^!b!VSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!Ao#[#]&}#]#^!Ao#^#a&}#a#b!Ao#b#g&}#g#h!Ao#h#i&}#i#j!Ao#j#m&}#m#n!Ao#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!CnZ(^!b!VSOY!CgZw!Cgwx!<gx!P!Cg!P!Q!Da!Q!}!Cg!}#O!Ep#O#P!>o#P;'S!Cg;'S;=`!Fh<%lO!Cg!f!Dhb(^!b!VSOY'}Zw'}x#O'}#P#Z'}#Z#[!Da#[#]'}#]#^!Da#^#a'}#a#b!Da#b#g'}#g#h!Da#h#i'}#i#j!Da#j#m'}#m#n!Da#n;'S'};'S;=`(f<%lO'}!f!EuX(^!bOY!EpZw!Epwx!=px#O!Ep#O#P!>Y#P#Q!Cg#Q;'S!Ep;'S;=`!Fb<%lO!Ep!f!FeP;=`<%l!Ep!f!FkP;=`<%l!Cg(Q!Fu^$h&j(^!bOY!FnYZ&cZw!Fnwx!?Ux!^!Fn!^!_!Ep!_#O!Fn#O#P!@P#P#Q!8{#Q#o!Fn#o#p!Ep#p;'S!Fn;'S;=`!Gq<%lO!Fn(Q!GtP;=`<%l!Fn(Q!GzP;=`<%l!8{'`!HW`$h&j(Zp!VSOY!G}YZ&cZr!G}rs!:Ws!P!G}!P!Q!IY!Q!^!G}!^!_!KQ!_!}!G}!}#O!NX#O#P!@w#P#o!G}#o#p!KQ#p;'S!G};'S;=`# b<%lO!G}'`!Ici$h&j(Zp!VSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!IY#[#](r#]#^!IY#^#a(r#a#b!IY#b#g(r#g#h!IY#h#i(r#i#j!IY#j#m(r#m#n!IY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!KXZ(Zp!VSOY!KQZr!KQrs!<gs!P!KQ!P!Q!Kz!Q!}!KQ!}#O!MZ#O#P!>o#P;'S!KQ;'S;=`!NR<%lO!KQt!LRb(Zp!VSOY)rZr)rs#O)r#P#Z)r#Z#[!Kz#[#])r#]#^!Kz#^#a)r#a#b!Kz#b#g)r#g#h!Kz#h#i)r#i#j!Kz#j#m)r#m#n!Kz#n;'S)r;'S;=`*Z<%lO)rt!M`X(ZpOY!MZZr!MZrs!=ps#O!MZ#O#P!>Y#P#Q!KQ#Q;'S!MZ;'S;=`!M{<%lO!MZt!NOP;=`<%l!MZt!NUP;=`<%l!KQ'`!N`^$h&j(ZpOY!NXYZ&cZr!NXrs!?Us!^!NX!^!_!MZ!_#O!NX#O#P!@P#P#Q!G}#Q#o!NX#o#p!MZ#p;'S!NX;'S;=`# [<%lO!NX'`# _P;=`<%l!NX'`# eP;=`<%l!G}(r# sk$h&j(Zp(^!b!VSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[# h#[#]%Z#]#^# h#^#a%Z#a#b# h#b#g%Z#g#h# h#h#i%Z#i#j# h#j#m%Z#m#n# h#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W##q](Zp(^!b!VSOY##hZr##hrs!Cgsw##hwx!KQx!P##h!P!Q#$j!Q!}##h!}#O#&U#O#P!>o#P;'S##h;'S;=`#'U<%lO##h#W#$se(Zp(^!b!VSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[#$j#[#]*g#]#^#$j#^#a*g#a#b#$j#b#g*g#g#h#$j#h#i*g#i#j#$j#j#m*g#m#n#$j#n;'S*g;'S;=`+Z<%lO*g#W#&]Z(Zp(^!bOY#&UZr#&Urs!Epsw#&Uwx!MZx#O#&U#O#P!>Y#P#Q##h#Q;'S#&U;'S;=`#'O<%lO#&U#W#'RP;=`<%l#&U#W#'XP;=`<%l##h(r#'e`$h&j(Zp(^!bOY#'[YZ&cZr#'[rs!Fnsw#'[wx!NXx!^#'[!^!_#&U!_#O#'[#O#P!@P#P#Q!7h#Q#o#'[#o#p#&U#p;'S#'[;'S;=`#(g<%lO#'[(r#(jP;=`<%l#'[(r#(pP;=`<%l!7h(CS#)Qb$h&j(Zp(^!b(Q(;d!VSOY!7hYZ&cZr!7hrs!8{sw!7hwx!G}x!P!7h!P!Q# h!Q!^!7h!^!_##h!_!}!7h!}#O#'[#O#P!@w#P#o!7h#o#p##h#p;'S!7h;'S;=`#(m<%lO!7h(CS#*e_$h&j(Zp(^!bR(;dOY#*YYZ&cZr#*Yrs#+dsw#*Ywx#.tx!^#*Y!^!_#0s!_#O#*Y#O#P#,f#P#o#*Y#o#p#0s#p;'S#*Y;'S;=`#1r<%lO#*Y(Bb#+m]$h&j(^!bR(;dOY#+dYZ&cZw#+dwx#,fx!^#+d!^!_#-w!_#O#+d#O#P#,f#P#o#+d#o#p#-w#p;'S#+d;'S;=`#.n<%lO#+d(AO#,mX$h&jR(;dOY#,fYZ&cZ!^#,f!^!_#-Y!_#o#,f#o#p#-Y#p;'S#,f;'S;=`#-q<%lO#,f(;d#-_SR(;dOY#-YZ;'S#-Y;'S;=`#-k<%lO#-Y(;d#-nP;=`<%l#-Y(AO#-tP;=`<%l#,f(<v#.OW(^!bR(;dOY#-wZw#-wwx#-Yx#O#-w#O#P#-Y#P;'S#-w;'S;=`#.h<%lO#-w(<v#.kP;=`<%l#-w(Bb#.qP;=`<%l#+d(Ap#.}]$h&j(ZpR(;dOY#.tYZ&cZr#.trs#,fs!^#.t!^!_#/v!_#O#.t#O#P#,f#P#o#.t#o#p#/v#p;'S#.t;'S;=`#0m<%lO#.t(<U#/}W(ZpR(;dOY#/vZr#/vrs#-Ys#O#/v#O#P#-Y#P;'S#/v;'S;=`#0g<%lO#/v(<U#0jP;=`<%l#/v(Ap#0pP;=`<%l#.t(=h#0|Y(Zp(^!bR(;dOY#0sZr#0srs#-wsw#0swx#/vx#O#0s#O#P#-Y#P;'S#0s;'S;=`#1l<%lO#0s(=h#1oP;=`<%l#0s(CS#1uP;=`<%l#*Y%#W#2Vb$h&j$P$Id(Zp(^!b!VSOY!7hYZ&cZr!7hrs!8{sw!7hwx!G}x!P!7h!P!Q# h!Q!^!7h!^!_##h!_!}!7h!}#O#'[#O#P!@w#P#o!7h#o#p##h#p;'S!7h;'S;=`#(m<%lO!7h+h#3lb$X#t$h&j(Zp(^!b!VSOY!7hYZ&cZr!7hrs!8{sw!7hwx!G}x!P!7h!P!Q# h!Q!^!7h!^!_##h!_!}!7h!}#O#'[#O#P!@w#P#o!7h#o#p##h#p;'S!7h;'S;=`#(m<%lO!7h$/l#5Pp$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!/g!P!Q%Z!Q![#7T![!^%Z!^!_*g!_!g%Z!g!h!1Z!h#O%Z#O#P&c#P#R%Z#R#S#7T#S#U%Z#U#V#:_#V#X%Z#X#Y!1Z#Y#b%Z#b#c#9T#c#d#=g#d#l%Z#l#m#@i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#7`k$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!/g!P!Q%Z!Q![#7T![!^%Z!^!_*g!_!g%Z!g!h!1Z!h#O%Z#O#P&c#P#R%Z#R#S#7T#S#X%Z#X#Y!1Z#Y#b%Z#b#c#9T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9`_$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#:hd$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#;v!R!S#;v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#;v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<Rf$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#;v!R!S#;v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#;v#S#b%Z#b#c#9T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#=pc$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#>{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#>{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#?We$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#>{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#>{#S#b%Z#b#c#9T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#@rg$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#BZ![!^%Z!^!_*g!_!c%Z!c!i#BZ!i#O%Z#O#P&c#P#R%Z#R#S#BZ#S#T%Z#T#Z#BZ#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Bfi$h&j(Zp(^!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#BZ![!^%Z!^!_*g!_!c%Z!c!i#BZ!i#O%Z#O#P&c#P#R%Z#R#S#BZ#S#T%Z#T#Z#BZ#Z#b%Z#b#c#9T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#Db_!e$b$h&j#}%<f(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#El_^l$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Fz^(a!*v!i'.r(Zp(^!b$Y)d)QSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Gv!Q!^*g!^!_#Hl!_!`#J^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#HPX$j&j(Zp(^!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#HuZ#o$Id(Zp(^!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Ih!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#IqX$P$Id(Zp(^!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#JgX#p$Id(Zp(^!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#K_a#]%?x$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Ld!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Lo_#h$Ih$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#M}adBf#p$Id$e#|$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$ S!`!a$!^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$ __#p$Id$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$!ia#o$Id$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`!a$#n!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#y`#o$Id$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$%Wc(t$Ip$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$&c!P!^%Z!^!_*g!_!a%Z!a!b$'m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$&n_z'#p$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$'x`$h&j#z$Id(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$)V_!}!Ln$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$*a_|(8n$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$+eZ$h&jO!^$,W!^!_$,n!_#i$,W#i#j$,s#j#l$,W#l#m$.f#m#o$,W#o#p$,n#p;'S$,W;'S;=`$0q<%lO$,W(n$,_T[#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$,sO[#S(n$,x[$h&jO!Q&c!Q![$-n![!^&c!_!c&c!c!i$-n!i#T&c#T#Z$-n#Z#o&c#o#p$0U#p;'S&c;'S;=`&w<%lO&c(n$-sZ$h&jO!Q&c!Q![$.f![!^&c!_!c&c!c!i$.f!i#T&c#T#Z$.f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$.kZ$h&jO!Q&c!Q![$/^![!^&c!_!c&c!c!i$/^!i#T&c#T#Z$/^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$/cZ$h&jO!Q&c!Q![$,W![!^&c!_!c&c!c!i$,W!i#T&c#T#Z$,W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$0XR!Q![$0b!c!i$0b#T#Z$0b#S$0eS!Q![$0b!c!i$0b#T#Z$0b#q#r$,n(n$0tP;=`<%l$,W!'l$1S_!WM|$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$2^`#w$Id$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$3k_$h&j(Zp(^!b(e&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$4ym$h&j(Zp(^!b(h!LY(V&;d$^#tOY%ZYZ&cZp%Zpq@Zqr%Zrs&}st%Ztu$4juw%Zwx(rx}%Z}!O$6t!O!Q%Z!Q![$4j![!^%Z!^!_*g!_!c%Z!c!}$4j!}#O%Z#O#P&c#P#R%Z#R#S$4j#S#T%Z#T#o$4j#o#p*g#p$g%Z$g;'S$4j;'S;=`$8z<%lO$4j+d$7Pk$h&j(Zp(^!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$6tuw%Zwx(rx}%Z}!O$6t!O!Q%Z!Q![$6t![!^%Z!^!_*g!_!c%Z!c!}$6t!}#O%Z#O#P&c#P#R%Z#R#S$6t#S#T%Z#T#o$6t#o#p*g#p$g%Z$g;'S$6t;'S;=`$8t<%lO$6t+d$8wP;=`<%l$6t(CS$8}P;=`<%l$4j!5p$9ZX!]!3l(Zp(^!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$:Ra({%<v$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Gn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$'m#q;'S%Z;'S;=`+a<%lO%Z%#`$;e_![$I`o`$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$<o_!qS$h&j(Zp(^!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$>P|$h&j(Zp(^!b(O(;d(h!LY(V&;d$[#tOX%ZXY+gYZ&cZ[+g[p%Zpq$@yqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!ODT!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$=n#BZ$IS>P$IS$I_$=n$I_$JT>P$JT$JU$=n$JU$KV>P$KV$KW$=n$KW&FU>P&FU&FV$=n&FV;'S>P;'S;=`FZ<%l?HT>P?HT?HU$=n?HUO>P(CS$AUx$h&j(Zp(^!b(O(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuA{uw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}A{!}#O%Z#O#P&c#P#R%Z#R#SA{#S#T%Z#T#oA{#o#p*g#p$f%Z$f$g+g$g#BYA{#BY#BZ$Cr#BZ$ISA{$IS$I_$Cr$I_$JTA{$JT$JU$Cr$JU$KVA{$KV$KW$Cr$KW&FUA{&FU&FV$Cr&FV;'SA{;'S;=`C}<%l?HTA{?HT?HU$Cr?HUOA{(CS$DRz$h&j(Zp(^!b(O(;d(i!LY(X!+SOX%ZXY+gYZ&cZ[+g[p%Zpq$@yqr%Zrs&}st%ZtuA{uw%Zwx(rx!Q%Z!Q![A{![!^%Z!^!_*g!_!c%Z!c!}A{!}#O%Z#O#P&c#P#R%Z#R#SA{#S#T%Z#T#oA{#o#p*g#p$f%Z$f$g+g$g#BYA{#BY#BZ$Cr#BZ$ISA{$IS$I_$Cr$I_$JTA{$JT$JU$Cr$JU$KVA{$KV$KW$Cr$KW&FUA{&FU&FV$Cr&FV;'SA{;'S;=`C}<%l?HTA{?HT?HU$Cr?HUOA{(CS$GWm$h&j(Zp(^!b(P(;d(h!LY(V&;d$[#tOY%ZYZ&cZp%Zpq@Zqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!ODT!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`FZ<%lO>P",tokenizers:[$dt,Wdt,2,3,4,5,6,7,8,9,10,11,12,13,Hdt,new T$("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(g~~",141,344),new T$("j~RQYZXz{^~^O(S~~aP!P!Qd~iO(T~~",25,325)],topRules:{Script:[0,5],SingleExpression:[1,284],SingleClassItem:[2,285]},dialects:{jsx:13675,ts:13677},dynamicPrecedences:{80:1,82:1,167:1,195:1},specialized:[{term:329,get:c=>Qdt[c]||-1},{term:346,get:c=>jdt[c]||-1},{term:71,get:c=>Zdt[c]||-1}],tokenPrec:13700}),mye=new class Mlt{constructor(){this.map=new WeakMap}setBuffer(a,l,h){let d=this.map.get(a);d||this.map.set(a,d=new Map),d.set(l,h)}getBuffer(a,l){let h=this.map.get(a);return h&&h.get(l)}set(a,l){a instanceof Hd?this.setBuffer(a.context.buffer,a.index,l):a instanceof Iu&&this.map.set(a.tree,l)}get(a){return a instanceof Hd?this.getBuffer(a.context.buffer,a.index):a instanceof Iu?this.map.get(a.tree):void 0}cursorSet(a,l){a.buffer?this.setBuffer(a.buffer.buffer,a.index,l):this.map.set(a.tree,l)}cursorGet(a){return a.buffer?this.getBuffer(a.buffer.buffer,a.index):this.map.get(a.tree)}},vye=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function NO(c){return(a,l)=>{let h=a.node.getChild("VariableDefinition");return h&&l(h,c),!0}}const Xdt=["FunctionDeclaration"],Ydt={FunctionDeclaration:NO("function"),ClassDeclaration:NO("class"),ClassExpression:()=>!0,EnumDeclaration:NO("constant"),TypeAliasDeclaration:NO("type"),NamespaceDeclaration:NO("namespace"),VariableDefinition(c,a){c.matchContext(Xdt)||a(c,"variable")},TypeDefinition(c,a){a(c,"type")},__proto__:null};function yye(c,a){let l=mye.get(a);if(l)return l;let h=[],d=!0;function f(p,g){let m=c.sliceString(p.from,p.to);h.push({label:m,type:g})}return a.cursor(_s.IncludeAnonymous).iterate(p=>{if(d)d=!1;else if(p.name){let g=Ydt[p.name];if(g&&g(p,f)||vye.has(p.name))return!1}else if(p.to-p.from>8192){for(let g of yye(c,p.node))h.push(g);return!1}return!1}),mye.set(a,h),h}const D3=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,A$=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function Kdt(c){let a=wo(c.state).resolveInner(c.pos,-1);if(A$.indexOf(a.name)>-1)return null;let l="VariableName"==a.name||a.to-a.from<20&&D3.test(c.state.sliceDoc(a.from,a.to));if(!l&&!c.explicit)return null;let h=[];for(let d=a;d;d=d.parent)vye.has(d.name)&&(h=h.concat(yye(c.state.doc,d)));return{options:h,from:l?a.from:c.pos,validFor:D3}}const tft=[Ah("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ah("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ah("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ah("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ah("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ah("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),Ah("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),Ah("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),Ah("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),Ah('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ah('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],P$=$A.define({name:"javascript",parser:qdt.configure({props:[Kme.add({IfStatement:UH({except:/^\s*({|else\b)/}),TryStatement:UH({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:c=>c.baseIndent,SwitchBody:c=>{let a=c.textAfter,l=/^\s*\}/.test(a),h=/^\s*(case|default)\b/.test(a);return c.baseIndent+(l?0:h?1:2)*c.unit},Block:function tct({closing:c,align:a=!0,units:l=1}){return h=>e0e(h,a,l,c)}({closing:"}"}),ArrowFunction:c=>c.baseIndent+c.unit,"TemplateString BlockComment":()=>null,"Statement Property":UH({except:/^{/}),JSXElement(c){let a=/^\s*<\//.test(c.textAfter);return c.lineIndent(c.node.from)+(a?0:c.unit)},JSXEscape(c){let a=/\s*\}/.test(c.textAfter);return c.lineIndent(c.node.from)+(a?0:c.unit)},"JSXOpenTag JSXSelfClosingTag":c=>c.column(c.node.from)+c.unit}),t0e.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":function oct(c){let a=c.firstChild,l=c.lastChild;return a&&a.to<l.from?{from:a.to,to:l.type.isError?c.to:l.from}:null},BlockComment:c=>({from:c.from+2,to:c.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),ift="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield \u0435\u0441\u043b\u0438 \u0438\u043d\u0430\u0447\u0435 \u043a\u043b\u0430\u0441\u0441 \u0431\u0440\u043e\u0441\u0438\u0442\u044c".split(" ").map(c=>({label:c,type:"keyword"})),R$="#e06c75",BO="#abb2bf",T3="#7d8799",F$="#d19a66",L$="#2c313a",N$="#282c34",k3="#353a42",B$="#528bff",Tye=Ii.theme({"&":{color:BO,backgroundColor:N$},".cm-content":{caretColor:B$},".cm-cursor, .cm-dropCursor":{borderLeftColor:B$},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:BO},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:N$,color:T3,border:"none"},".cm-activeLineGutter":{backgroundColor:L$},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:k3},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:k3,borderBottomColor:k3},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:L$,color:BO}}},{dark:!0}),kye=j1.define([{tag:Te.keyword,color:"#c678dd"},{tag:[Te.name,Te.deleted,Te.character,Te.propertyName,Te.macroName],color:R$},{tag:[Te.function(Te.variableName),Te.labelName],color:"#61afef"},{tag:[Te.color,Te.constant(Te.name),Te.standard(Te.name)],color:F$},{tag:[Te.definition(Te.name),Te.separator],color:BO},{tag:[Te.typeName,Te.className,Te.number,Te.changed,Te.annotation,Te.modifier,Te.self,Te.namespace],color:"#e5c07b"},{tag:[Te.operator,Te.operatorKeyword,Te.url,Te.escape,Te.regexp,Te.link,Te.special(Te.string)],color:"#56b6c2"},{tag:[Te.meta,Te.comment],color:T3},{tag:Te.strong,fontWeight:"bold"},{tag:Te.emphasis,fontStyle:"italic"},{tag:Te.strikethrough,textDecoration:"line-through"},{tag:Te.link,color:T3,textDecoration:"underline"},{tag:Te.heading,fontWeight:"bold",color:R$},{tag:[Te.atom,Te.bool,Te.special(Te.variableName)],color:F$},{tag:[Te.processingInstruction,Te.string,Te.inserted],color:"#98c379"},{tag:Te.invalid,color:"#ffffff"}]),V$="#a00a13",VO="#0445a7",M3="#7d8799",U$="#d06704",z$="#e1e6ec",H$="#f3f4f5",E3="#bfd1ee",$$="#528bff",Nye=Ii.theme({"&":{color:VO,backgroundColor:H$},".cm-content":{caretColor:$$},".cm-cursor, .cm-dropCursor":{borderLeftColor:$$},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#e6edfc"},".cm-panels":{backgroundColor:"#d5e1ef",color:VO},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:H$,color:M3,border:"none"},".cm-activeLineGutter":{backgroundColor:z$},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:E3},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:E3,borderBottomColor:E3},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:z$,color:VO}}},{dark:!0}),Bye=j1.define([{tag:Te.keyword,color:"#c678dd"},{tag:[Te.name,Te.deleted,Te.character,Te.propertyName,Te.macroName],color:V$},{tag:[Te.function(Te.variableName),Te.labelName],color:"#61afef"},{tag:[Te.color,Te.constant(Te.name),Te.standard(Te.name)],color:U$},{tag:[Te.definition(Te.name),Te.separator],color:VO},{tag:[Te.typeName,Te.className,Te.number,Te.changed,Te.annotation,Te.modifier,Te.self,Te.namespace],color:"#b67904"},{tag:[Te.operator,Te.operatorKeyword,Te.url,Te.escape,Te.regexp,Te.link,Te.special(Te.string)],color:"#4999a1"},{tag:[Te.meta,Te.comment],color:M3},{tag:Te.strong,fontWeight:"bold"},{tag:Te.emphasis,fontStyle:"italic"},{tag:Te.strikethrough,textDecoration:"line-through"},{tag:Te.link,color:M3,textDecoration:"underline"},{tag:Te.heading,fontWeight:"bold",color:V$},{tag:[Te.atom,Te.bool,Te.special(Te.variableName)],color:U$},{tag:[Te.processingInstruction,Te.string,Te.inserted],color:"#3f9302"},{tag:Te.invalid,color:"#000000"}]),rft=(DO(Bye),["editorContainer"]);let A3=(()=>{class c{set text(l){this.setText(l)}get myTheme(){return Ii.theme({"&":{fontSize:"11pt",maxHeight:this.maxHeightStr},".cm-gutter,.cm-content":{minHeight:this.minHeightStr},".cm-scroller":{overflow:"auto"}})}get codemirrorData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h){S(this,"config",void 0),S(this,"themesSvc",void 0),S(this,"editorContainerRef",void 0),S(this,"data",qw.builder()),S(this,"checkLater",DS.builder().setEnabled(!1)),S(this,"autocompleteType","cjs"),S(this,"textChanged",new Mt),S(this,"maxHeightStr100vh","calc(100vh - 60px - 80px)"),S(this,"maxHeightStr",this.maxHeightStr100vh),S(this,"minHeightStr","100px"),S(this,"themes",new Q0),S(this,"language",new Q0),S(this,"tabSize",new Q0),S(this,"editor",null),S(this,"history",[]),S(this,"handlerSubscription",null),this.config=l,this.themesSvc=h}get component(){return this.codemirrorData.components.length?this.codemirrorData.components[0]:null}get components(){return this.codemirrorData.components}get isRow(){return this.codemirrorData.classes.sClasses.findIndex((l,h,d)=>"clr-row"==l)>=0}ngOnInit(){this.handlerSubscription=this.config.messageBus.addHandler(l=>{if(l.target==this.codemirrorData.messageTarget&&l.text==this.codemirrorData.messageUndoText&&this.history.length){let h=this.history.pop();null!=h&&this.setText(h)}})}setTabSize(l){this.editor&&this.editor.dispatch({effects:this.tabSize.reconfigure(Ml.tabSize.of(l))})}ngOnDestroy(){this.handlerSubscription&&(this.handlerSubscription.unsubscribe(),this.handlerSubscription=null)}createNewCodemirrorState(){let l=[];switch(this.autocompleteType){case"cjs":l=[{label:"\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435",type:"constant",info:"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"},{label:"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"method",info:"\u043c\u0435\u0442\u043e\u0434 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"},{label:"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",type:"constant",info:"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f"}];break;case"math":l=["integrate","integral","pow","sin","cos","tg","ctg","arcsin","arccos","arctg","arcctg","ln","exp","diff","differentiate","\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u043b","\u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c","\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f","\u0440\u0430\u0441\u043a\u0440\u044b\u0442\u044c","\u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u044c","\u0440\u0430\u0437\u043b\u043e\u0436\u0438\u0442\u044c"].map(f=>({label:f,type:"keyword",info:""})).concat([{label:"Pi",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e \u03c0"},{label:"pi",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e \u03c0"},{label:"e",type:"constant",info:"\u0447\u0438\u0441\u043b\u043e e"}])}return Ml.create({extensions:[Cdt,this.language.of(new Zlt(P$,[P$.data.of({autocomplete:bht(A$,_ve(tft.concat(ift)))}),P$.data.of({autocomplete:Kdt}),[]])),this.tabSize.of(Ml.tabSize.of(4)),Ii.updateListener.of(f=>{f.docChanged&&this.onTextChanged()}),Wve({override:[f=>{let p=f.matchBefore(/[\u0430-\u044f\u0410-\u042fa-zA-Z]+/);return f.explicit||p?{from:p?p.from:f.pos,options:l,validFor:/^[\u0430-\u044f\u0410-\u042fa-zA-Z]*$/}:null}]}),...this.themesSvc.nowIsDay()?[Nye,this.myTheme,DO(Bye)]:[Tye,this.myTheme,DO(kye)]],doc:this.codemirrorData.text})}ngAfterViewInit(){let l=this.createNewCodemirrorState(),h=new Ii({state:l,parent:this.editorContainerRef.nativeElement});this.editor=h,this.config.post(()=>{this.checkLater.setConfig(this.config).setWaitingForSenderId(this.codemirrorData.waitingForSenderId),this.checkLater.checkEnabled()})}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return this.codemirrorData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{h100:this.maxHeightStr==this.maxHeightStr100vh}}getColClass(l){let h={"clr-col":!0};return l.component===c&&l.data.classes.sClasses.filter(f=>f.startsWith("clr-col-")).forEach(f=>h[f]=!0),h}onTextChanged(){if(this.editor){let l=this.editor.state.doc.toString();(!this.history.length||this.history[this.history.length-1]!=l)&&(this.history.length>100&&this.history.unshift(),this.history.push(this.codemirrorData.text)),this.codemirrorData.text=l,this.textChanged.emit(this.codemirrorData.text)}}resizeEditor(){this.editor&&this.editor.dispatch({effects:this.themes.reconfigure(this.myTheme)})}onResize(){this.resizeEditor()}recreate(){this.editor&&this.editor.setState(this.createNewCodemirrorState())}setText(l){if(this.text!=l&&(this.codemirrorData.text=l,this.editor)){this.editor.dispatch({changes:{from:0,to:this.editor.state.doc.length,insert:l}});let h=this.editor.state.doc.line(this.editor.state.doc.lines).from;this.editor.dispatch({selection:{anchor:h}}),this.editor.dispatch({effects:Ii.scrollIntoView(h)})}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(bo))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-codemirror"]],viewQuery:function(l,h){if(1&l&&mi(rft,5),2&l){let d;jt(d=Zt())&&(h.editorContainerRef=d.first)}},hostBindings:function(l,h){1&l&&ie("resize",function(f){return h.onResize(f.target)},0,ly)},inputs:{data:"data",autocompleteType:"autocompleteType",text:"text",maxHeightStr:"maxHeightStr",minHeightStr:"minHeightStr"},outputs:{textChanged:"textChanged"},decls:2,vars:1,consts:[[3,"ngClass"],["editorContainer",""]],template:function(l,h){1&l&&pe(0,"div",0,1),2&l&&L("ngClass",h.getClasses())},dependencies:[di],styles:[".h100[_ngcontent-%COMP%]{height:calc(100vh - 140px)}.b[_ngcontent-%COMP%]{display:block}.db[_ngcontent-%COMP%]{display:flex;align-content:stretch;align-items:stretch;position:relative;height:80vh;border:1px solid white}"]})),c})();function sft(c,a){1&c&&(R(0,"h5"),se(1,"\u0420\u0435\u0448\u0435\u043d\u0438\u0435:"),N())}function oft(c,a){if(1&c&&(R(0,"div",10)(1,"div",5),pe(2,"app-d3-svg",3),N()()),2&c){const l=a.$implicit,h=q();F(2),L("generator",h.generator)("d3Config",l)}}function aft(c,a){if(1&c){const l=ct();R(0,"div",2)(1,"button",11),ie("click",function(){Ee(l);const d=q();return Ae(d.onSelectFormula(d.d3Configs[d.d3Configs.length-1]))}),pe(2,"clr-icon",12),se(3," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443"),N()()}}let lft=(()=>{class c{get formulaText(){return this.uiConfig.ui.calculatorFormulaText.getStringValue()}set formulaText(l){this.uiConfig.ui.calculatorFormulaText.setStringValue(l),this.onUpdateFormulaTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}constructor(l,h,d){S(this,"uiConfig",void 0),S(this,"themes",void 0),S(this,"mathSvc",void 0),S(this,"data",void 0),S(this,"generator",new kE),S(this,"d3Configs",[]),S(this,"d3ConfigFormulaText",N0.builder()),S(this,"solving",!1),this.uiConfig=l,this.themes=h,this.mathSvc=d}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateFormulaTextConfig()}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onMathSolved(l){let h=this.themes.nowIsDay(),d="#0e161b",f=h?"white":"lightgrey",p=h?f:d,g=h?d:f;try{this.d3Configs=[],(new SE).parse(l).forEach(y=>{let _=y.toString(),b=N0.builder().setColorBackground(p).setColorMain(g).setColorText(g).setColorLines(g).setLineWidth(1);b.addParam("\u0442\u0435\u043a\u0441\u0442",_),this.d3Configs.push(b)})}catch(m){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0444\u043e\u0440\u043c\u0443\u043b\u0435: "+l),console.log(m)}}getFormulaTextFormated(){let l=this.formulaText,h=!1,d=!1;for(let f=l.length-1;f>0;--f)switch(l.substring(f,f+1)){case".":if(h){f=0;break}h=!0;break;case";":d=!0,f=0;break;case"\r":case"\n":case"\t":case" ":break;default:f=0}return d||(l+=";"),h||(l+="."),l}getFormulaTextFormattedAndConverted(){let l=this.getFormulaTextFormated(),h=new SE,d=this.formulaText;try{let f=h.parse(l);f&&(d=f.toString())}catch{}return d}isFormulaTextValid(){let l=this.getFormulaTextFormated(),h=new SE;try{return!!h.parse(l)}catch{return!1}}onSolve(){this.solving=!0,this.mathSvc.mathSolve(this.getFormulaTextFormattedAndConverted()).then(l=>{this.solving=!1,this.onMathSolved(l&&l.success?l.text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439.")})}onUpdateFormulaTextConfig(){let l=this.themes.nowIsDay(),h="#0e161b",d=l?"white":"lightgrey",f=l?d:h,p=l?h:d,g=N0.builder().setColorBackground(f).setColorMain(p).setColorText(p).setColorLines(p).setLineWidth(1);g.addParam("\u0442\u0435\u043a\u0441\u0442",this.getFormulaTextFormattedAndConverted()),this.d3ConfigFormulaText=g,this.d3Configs=[]}onSelectFormula(l){this.formulaText=l.params.get("\u0442\u0435\u043a\u0441\u0442")}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(bo),z(Mg))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-calculator-view"]],inputs:{data:"data"},decls:13,vars:10,consts:[[3,"ngClass"],[3,"maxHeightStr","autocompleteType","text","textChanged"],[1,"no-print"],[3,"generator","d3Config"],[1,"clr-row","no-print"],[1,"clr-col-12"],[1,"btn","btn-primary","btn-block",3,"disabled","click"],[4,"ngIf"],["class","clr-row",4,"ngFor","ngForOf"],["class","no-print",4,"ngIf"],[1,"clr-row"],["aria-label","arrow",1,"btn","btn-link","btn-block",3,"click"],["shape","arrow"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"h5"),se(2,"\u0424\u043e\u0440\u043c\u0443\u043b\u0430:"),N(),R(3,"app-dynamic-codemirror",1),ie("textChanged",function(f){return h.formulaText=f}),N(),R(4,"div",2),pe(5,"app-d3-svg",3),N(),R(6,"div",4)(7,"div",5)(8,"button",6),ie("click",function(){return h.onSolve()}),se(9,"\u0420\u0435\u0448\u0438\u0442\u044c"),N()()(),K(10,sft,2,0,"h5",7),K(11,oft,3,2,"div",8),K(12,aft,4,0,"div",9),N()),2&l&&(L("ngClass",h.getClasses()),F(3),L("maxHeightStr","100px")("autocompleteType","math")("text",h.formulaText),F(2),L("generator",h.generator)("d3Config",h.d3ConfigFormulaText),F(3),L("disabled",h.solving||!h.isFormulaTextValid()),F(2),L("ngIf",h.d3Configs.length),F(1),L("ngForOf",h.d3Configs),F(1),L("ngIf",h.d3Configs.length))},dependencies:[di,vi,Sn,so,bfe,A3],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]})),c})();class W${constructor(){}static builder(){return new W$}}class G$ extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"id",""),S(this,"waitingForSenderId",""),S(this,"components",[]),this.classes=d}static builder(){return new G$("",null,null,W$.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}let cft=(()=>{class c{get formulaText(){return this.sCompilerSourceText!=this.uiConfig.ui.compilerSourceText.getStringValue()&&this.config.post(()=>{this.sCompilerSourceText=this.uiConfig.ui.compilerSourceText.getStringValue()}),this.sCompilerSourceText}set formulaText(l){this.uiConfig.ui.compilerSourceText.setStringValue(l),this.onUpdateSourceTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}constructor(l,h){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"data",void 0),S(this,"codemirrorData",qw.builder().setMessageTarget("\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setMessageUndoText("\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f")),S(this,"generator",new kE),S(this,"solving",!1),S(this,"sCompilerSourceText",""),this.config=l,this.uiConfig=h}ngOnInit(){this.onUpdateSourceTextConfig()}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}isFormulaTextValid(){return!0}onRun(){this.codemirrorData.click("\u0441\u0442\u0430\u0440\u0442")}onUpdateSourceTextConfig(){}onSelectFormula(l){this.formulaText=l.params.get("\u0442\u0435\u043a\u0441\u0442")}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-compiler-view"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"data","text","textChanged"]],template:function(l,h){1&l&&(R(0,"div")(1,"app-dynamic-codemirror",0),ie("textChanged",function(f){return h.formulaText=f}),N()()),2&l&&(F(1),L("data",h.codemirrorData)("text",h.formulaText))},dependencies:[A3],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]})),c})();class Q${constructor(){}static builder(){return new Q$}}class j$ extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"id",""),S(this,"waitingForSenderId",""),S(this,"components",[]),this.classes=d}static builder(){return new j$("",null,null,Q$.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}let uft=(()=>{class c{get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(l){this.uiConfig.ui.calendarText.setStringValue(l)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}constructor(l,h,d){S(this,"uiConfig",void 0),S(this,"themes",void 0),S(this,"mathSvc",void 0),S(this,"data",void 0),this.uiConfig=l,this.themes=h,this.mathSvc=d}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(bo),z(Mg))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-calendar-view"]],inputs:{data:"data"},decls:2,vars:1,consts:[[3,"ngClass"]],template:function(l,h){1&l&&(R(0,"div",0),se(1," \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c.\n"),N()),2&l&&L("ngClass",h.getClasses())},dependencies:[di],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]})),c})();class hft{constructor(a,l,h,d,f,p=null){S(this,"name",void 0),S(this,"description",void 0),S(this,"object",void 0),S(this,"fieldName",void 0),S(this,"enabler",void 0),S(this,"onChangeHandler",void 0),this.name=a,this.description=l,this.object=h,this.fieldName=d,this.enabler=f,this.onChangeHandler=p}get value(){return this.object[this.fieldName]}set value(a){this.object[this.fieldName]!=a&&(this.object[this.fieldName]=a,this.changed())}get enabled(){return!this.enabler||!!this.enabler.value}changed(){this.onChangeHandler&&this.onChangeHandler()}}class Nu{static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(a,l){let h=/\{[\u043a\u041a\u0441\u0421\u0437\u0417\u0451\u0401\u0444\u0424\u043f\u041f\u043c\u041c\u043b\u041b\u0440\u0420]\}/g;return a.split("\r\n").map(d=>d.includes("\u0442")?d:d.replace(h,"")).map(d=>d+(d.includes("\u0442")?"":l)).join("\r\n")}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0412\u041b\u044e\u0431\u043e\u043c\u0421\u043b\u0443\u0447\u0430\u0435(a,l){let h=/\{[\u043a\u041a\u0441\u0421\u0437\u0417\u0451\u0401\u0444\u0424\u043f\u041f\u043c\u041c\u043b\u041b\u0440\u0420]\}/g;return a.split("\r\n").map(d=>d.replace(h,"")).map(d=>d+l).join("\r\n")}static getTextColor(a){var l=a.split(""),h="",d="",f=0;for(let p=0;p<l.length;++p)"{"==l[p]?++f:"}"==l[p]?(2==f&&(h=`{${d}}`),f=0):1==f?"\u0442"==(d=l[p])?f=0:++f:f=0;return h}static utf8_to_b64(a){return window.btoa(encodeURIComponent(a))}static b64_to_utf8(a){return decodeURIComponent(window.atob(a))}}class I3{static getPasha(a,l=!0){let p=(a%19*19+15)%30,m=p+(a%4*2+a%7*4+6*p+6)%7,v=null;return v=m<=9?new Date(a,2,22+m):new Date(a,3,m-9),l&&v.setDate(v.getDate()+13),v}static getRelativePashaDayDate(a,l,h=!0){let d=I3.getPasha(a,h);return d.setDate(d.getDate()+l),d}static daysDiff(a,l){return Math.round((a.getTime()-l.getTime())/864e5)}}class iv{constructor(a,l){S(this,"rang",void 0),S(this,"text",void 0),S(this,"extraRang",0),this.rang=a,this.text=l}static builder(){return new iv(0,"")}setRang(a){return this.rang=a,this}setExtraRang(a){return this.extraRang=a,this}setText(a){return this.text=a,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a=0){let l=Math.max(a,this.rang);return l>0?l:1}\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 6==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)||5==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 4==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 3==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0448\u0435\u0441\u0442\u0438\u0440\u0438\u0447\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 2==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0431\u0435\u0437\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u0447\u043d\u043e\u0433\u043e\u0417\u043d\u0430\u043a\u0430\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 1==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)||0==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(a=0){let l="";return this.\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a)?l="{\u043a}":this.\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a)?l="{\u0437}":this.\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a)&&(l="{\u0441}"),l}}let Vye=(()=>{class c{constructor(l){S(this,"cacheSvc",void 0),S(this,"prazdniki",null),S(this,"\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438","\u0412\u0435\u043b\u0438\u043a\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438"),S(this,"\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438","\u041d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438"),S(this,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438","\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438"),S(this,"\u0434\u043e\u041f\u0430\u0441\u0445\u0438","\u0414\u043e \u041f\u0430\u0441\u0445\u0438"),S(this,"\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438","\u041f\u043e\u0441\u043b\u0435 \u041f\u0430\u0441\u0445\u0438"),S(this,"\u0438\u043d\u044b\u0435","\u0418\u043d\u044b\u0435"),S(this,"\u0434\u043d\u0438\u041d\u0435\u0434\u0435\u043b\u0438",["","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431","\u0432\u0441","\u0432"]),this.cacheSvc=l}load(){return new Promise(this.prazdniki?(l,h)=>{l(!0)}:(l,h)=>{let d=this.cacheSvc.getRestPoint("/calendar/prazdniki.txt",null);this.cacheSvc.getTextRestcallUrl(d,f=>{f?(this.prazdniki=JSON.parse(f),l(!0)):h(`Cann't load file: ${d}`)})})}getPrazdnikiPoDate(l,h){let d=null,f=0;for(;f<=8;++f)if(null!=l[f]){d=l[f];break}if(d)switch(f){case 0:break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.getDay()!==f%7&&(d=null);break;case 8:1==new Date(h.getFullYear(),1,29).getMonth()||(d=null);break;default:throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430.")}return d?d.map(p=>iv.builder().setRang(p[0]).setText(p[1])):[]}getPrazdniki(l){return l?l.map(h=>iv.builder().setRang(h[0]).setText(h[1])):[]}getPrazdnikiFor(l,h,d){let f=new Date(l,h,d-13),p=new Date(l,h,d),g=I3.getPasha(l),m=I3.daysDiff(p,g),v=[[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0438\u043d\u044b\u0435]].flatMap(y=>{let _=+y[0],x=this.prazdniki[y[1]][f.getMonth()];if(null==x)return[];let w=x[f.getDate()];return null==w?[]:this.getPrazdnikiPoDate(w,p).map(D=>D.setExtraRang(_))}).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438]].flatMap(y=>{let _=+y[0];if(m>=0)return[];let x=this.prazdniki[y[1]][-m];return null==x?[]:this.getPrazdniki(x).map(w=>w.setExtraRang(_))})).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438]].flatMap(y=>{let _=+y[0];if(m<0)return[];let x=this.prazdniki[y[1]][m];return null==x?[]:this.getPrazdniki(x).map(w=>w.setExtraRang(_))}));return v.sort((y,_)=>_.rang+_.extraRang-y.rang-y.extraRang),v}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Pd))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class Z${constructor(){}static builder(){return new Z$}}class P3 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"prazdniki",[]),this.classes=d}static builder(){return new P3("",null,null,Z$.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setPrazdniki(a){return this.prazdniki=a,this}}class ib{constructor(a,l,h,d,f,p,g){S(this,"text",void 0),S(this,"time",void 0),S(this,"morningService",void 0),S(this,"requiredService",void 0),S(this,"selectedClerics",void 0),S(this,"ispovedClerics",void 0),S(this,"serviceColor",void 0),this.text=a,this.time=l,this.morningService=h,this.requiredService=d,this.selectedClerics=f,this.ispovedClerics=p,this.serviceColor=g}static builder(){return new ib("","",!0,!1,"","","")}setText(a){return this.text=a,this}setTime(a){return this.time=a,this}setMorningService(a){return this.morningService=a,this}setRequiredService(a){return this.requiredService=a,this}getNormalizedText(){return this.getNormalizedManualText(this.text)}getNormalizedTime(){return this.getNormalizedManualText(this.time)}getNormalizedManualText(a){let l=a;return this.morningService||l.includes("{\u0432}")||(l+="{\u0432}"),this.requiredService&&(l.includes("{\u0442}")||(l+="{\u0442}")),l}setSelectedClerics(a){return this.selectedClerics=a,this}setIspovedClerics(a){return this.ispovedClerics=a,this}setServiceColor(a){return this.serviceColor=a,this}}class q${constructor(){}static builder(){return new q$}}class rv extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"services",[]),this.classes=d}static builder(){return new rv("",null,null,q$.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setServices(a){return this.services=a,this}}class UO{constructor(a,l){S(this,"name",void 0),S(this,"week",void 0),this.name=a,this.week=l}static builder(){return new UO("",[!1,!1,!1,!1,!1,!1,!1])}setName(a){return this.name=a,this}setWeek(a){return this.week=a,this}}class X${constructor(){}static builder(){return new X$}}class R3 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"clerics",[]),this.classes=d}static builder(){return new R3("",null,null,X$.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setClerics(a){return this.clerics=a,this}}class Uye{constructor(a=null){S(this,"k",void 0),S(this,"headerSize",void 0),S(this,"data",void 0),S(this,"virtualCurrentSize",void 0),S(this,"position",void 0),this.k=1.3,this.headerSize=4,this.data=a||new Uint8Array(20+this.headerSize),this.virtualCurrentSize=0,this.position=0}free(a){return this.data.byteLength-a}size(){return this.virtualCurrentSize}getPosition(){return this.position}setPosition(a){if(a<0||a>this.virtualCurrentSize)throw new Error("Incorrect position: "+a+"; need [0; "+this.virtualCurrentSize+"].");let l=this.position;return this.position=a,l}getRealPosition(){return this.headerSize+this.position}realSize(){return this.headerSize+this.virtualCurrentSize}incPosition(a){this.position+=a,this.position>this.virtualCurrentSize&&(this.virtualCurrentSize=this.position)}needFree(a,l=!1){if(this.free(this.getRealPosition())<a){let d=this.size()+a;l||(d=Math.floor(d*this.k)),d%2!=0&&++d;let f=new Uint8Array(d);f.set(this.data,0),this.data=f}}pushUInt8(a){this.needFree(1),new Uint8Array(this.data.buffer,this.getRealPosition(),1)[0]=a,this.incPosition(1)}pushInt32(a){this.needFree(4);let h=new Int32Array(1);h[0]=a,this.data.set(new Uint8Array(h.buffer),this.getRealPosition()),this.incPosition(4)}pushUInt32(a){this.needFree(4);let h=new Uint32Array(1);h[0]=a,this.data.set(new Uint8Array(h.buffer),this.getRealPosition()),this.incPosition(4)}pushFloat32(a){this.needFree(4);let h=new Float32Array(1);h[0]=a,this.data.set(new Uint8Array(h.buffer),this.getRealPosition()),this.incPosition(4)}pushFloat64(a){this.needFree(8);let h=new Float64Array(1);h[0]=a,this.data.set(new Uint8Array(h.buffer),this.getRealPosition()),this.incPosition(8)}pushString(a){let h=new ArrayBuffer(2*a.length+4);new Uint32Array(h,0,1)[0]=a.length;let f=new Uint16Array(h,4);for(let p=0;p<a.length;++p)f[p]=a.charCodeAt(p);this.pushArrayBuffer(h)}pushBytes(a,l=!1){this.needFree(a.length,l),this.data.set(a,this.getRealPosition()),this.incPosition(a.length)}pushArrayBuffer(a,l=!1){this.needFree(a.byteLength,l);let h=new Uint8Array(a);this.data.set(h,this.getRealPosition()),this.incPosition(h.length)}toString(){new Uint32Array(this.data.buffer,0,1)[0]=this.realSize();let l=Math.ceil(this.realSize()/2),h=0,f="";for(;h<l;){let p=Math.min(l-h,32e3),g=new Uint16Array(this.data.buffer,2*h,p);f+=String.fromCharCode.apply(null,[...g]),h+=p}if(f.length!=l)throw new Error("Result string length invalid! expected "+l+" but found "+f.length+".");return f}fromString(a){for(var l=new ArrayBuffer(2*a.length),h=new Uint16Array(l),d=0,f=a.length;d<f;d++)h[d]=a.charCodeAt(d);this.data=new Uint8Array(l);let p=new Uint32Array(l,0,1);this.virtualCurrentSize=p[0]-this.headerSize,this.position=0}unreaded(){return this.virtualCurrentSize-this.position}realPos(a){return this.headerSize+a}popBytes(a){if(this.unreaded()<a)throw new Error("No unread bytes.");let l=this.realPos(this.position);return this.incPosition(a),this.data.slice(l,l+a).buffer}popUInt8(){return new Uint8Array(this.popBytes(1))[0]}popInt32(){return new Int32Array(this.popBytes(4))[0]}popUInt32(){return new Uint32Array(this.popBytes(4))[0]}popFloat32(){return new Float32Array(this.popBytes(4))[0]}popFloat64(){return new Float64Array(this.popBytes(8))[0]}popString(){let h=new Uint32Array(this.popBytes(4))[0],d=new Uint16Array(this.popBytes(2*h));return String.fromCharCode.apply(null,[...d])}toArray(){return this.data.subarray(0,this.size())}}class zO{constructor(a){S(this,"bits",[0,0,0,0,0,0,0,0]),S(this,"currentBitIndex",0),S(this,"readyBits",0),S(this,"readonly",!1),S(this,"opened",!1),S(this,"data",new Uye),a&&(this.data=a),null==this.data&&(this.data=new Uye),this.reopen(!1)}reopen(a){this.opened&&(this.readonly||this.pushCurrentByte()),this.opened=!0,this.readonly=a,this.data.setPosition(this.readonly?0:this.data.size()),this.readyBits=0,this.currentBitIndex=0}pushCurrentByte(){if(0==this.currentBitIndex)return;let a=0;this.bits.forEach((l,h)=>{a|=(l?1:0)<<h}),this.data.pushUInt8(a);for(let l=0;l<this.bits.length;l++)this.bits[l]=0;this.currentBitIndex=0}pushBit(a){this.currentBitIndex>7&&this.pushCurrentByte(),this.bits[this.currentBitIndex++]=0==a?0:1}static getBitsCount(a){let l=a,h=0;for(;l;)++h,l>>>=1;return 0==h&&++h,h}pushNumber(a,l=0){0==l&&(l=zO.getBitsCount(a),this.pushNumber(l,5));let h=a;for(let d=0;d<l;++d)this.pushBit(1&h),h>>>=1}popBit(){if(this.currentBitIndex>=this.readyBits){let a=this.data.popUInt8();for(let l=0;l<8;++l)this.bits[l]=1&a?1:0,a>>>=1;this.readyBits=8,this.currentBitIndex=0}return this.bits[this.currentBitIndex++]}popNumber(a=0){0==a&&(a=this.popNumber(5));let l=0;for(let h=0;h<a;++h)l|=this.popBit()<<h;return l}}class Pl{constructor(a,l=0){S(this,"bitsCount",void 0),S(this,"value",void 0),this.bitsCount=a,this.value=l,a<=0&&(this.bitsCount=zO.getBitsCount(l))}getBitsCount(){return this.bitsCount}getValue(){return this.value}static of(a,l){return new Pl(a,l)}}class $O{constructor(a,l,h=-1,d=[]){S(this,"id",void 0),S(this,"simbol",void 0),S(this,"parent",void 0),S(this,"ids",void 0),this.id=a,this.simbol=l,this.parent=h,this.ids=d}clone(){return new $O(this.id,this.simbol,this.parent,[...this.ids])}save(a,l=-1,h=0,d=0){Us.saveStringUtf8(a,this.simbol),Us.saveIndex(a,this.parent<0?l:this.parent,d),this.ids.length&&this.ids.forEach(f=>{Us.saveIndex(a,f,h)}),Us.saveIndex(a,0,h)}load(a,l=-1,h=0,d=0){this.simbol=Us.loadStringUtf8(a),this.parent=Us.loadIndex(a,d),this.parent==l&&(this.parent=-1),this.ids=[];let f=Us.loadIndex(a,h);for(;f>0;)this.ids.push(f),f=Us.loadIndex(a,h)}}class rb{constructor(a=-1,l=[]){S(this,"id",void 0),S(this,"ids",void 0),S(this,"children",new Map),this.id=a,this.ids=l}addChild(a){this.children.set(a.toString(),a)}clone(){return new rb(this.id,[...this.ids])}toString(){return""+this.id}}class $ye{constructor(a,l){S(this,"index",void 0),S(this,"letter",void 0),this.index=a,this.letter=l}}class N3{constructor(a,l,h){S(this,"i",void 0),S(this,"lastLetter",void 0),S(this,"mode",void 0),this.i=a,this.lastLetter=l,this.mode=h}static builder(){return new N3(0,null,0)}setI(a){return this.i=a,this}setLastLetter(a){return this.lastLetter=a,this}setMode(a){return this.mode=a,this}}class Wye{constructor(a,l){S(this,"text",void 0),S(this,"letter",void 0),this.text=a,this.letter=l}}class Us{constructor(){S(this,"lettersFlat",[]),S(this,"lettersTree",new rb(0)),S(this,"letterNextId",1),S(this,"wordNextId",1),S(this,"separators"," \r\n\t;:,.+-=?<>!@#$%^&*(){}[]\\/|`~\"'")}flattern(){this.lettersFlat=[],this.lettersFlat.push(new $O(0,""));let a=[];for(a.push(new $ye(-1,this.lettersTree));a.length>0;){let l=a[0];a.splice(0,1),l.letter.children.forEach((h,d)=>{a.push(new $ye(l.letter.id,h)),this.lettersFlat.push(new $O(h.id,d,l.letter.id,h.ids))})}return this.lettersFlat.sort((l,h)=>l.id-h.id),this}tree(){this.lettersTree.children.clear();let a=0;for(let l=0;l<this.lettersFlat.length;++l){let h=this.lettersFlat[l];if(h.simbol){let d=this.getPrefix(l),f=d.substring(0,d.length-1),p=this.getLettersDirect(f);if(!p)throw new Error("System error: not found last letter for: "+f);p.children.set(d.substring(d.length-1),new rb(l,h.ids)),h.ids.forEach(g=>{a<g&&(a=g)})}}return this.letterNextId=this.lettersFlat.length,this.wordNextId=a+1,this}getPrefix(a){let l=a,h="";for(;l>=0;){let d=this.lettersFlat[l];h=d.simbol+h,l=d.parent}return h}addLetters(a,l=null){let h="",d=!1,f=null;for(let p=0;p<a.length;p++){let g=a[p],m=this.isSeparator(g);(m||d)&&(d=m,h&&(f=this.addLettersDirect(h,l),h="")),h+=g}return h&&(f=this.addLettersDirect(h,l),h=""),f&&l&&(f.ids=l),this}find(a,l=!1){let h=[],d=[];for(h.push(N3.builder());h.length>0;){let p=h.shift(),g=a.substr(p.i,1);null==p.lastLetter&&(p.lastLetter=this.lettersTree);let m=g.toUpperCase(),v=g.toLowerCase(),y=p.lastLetter.children.get(0==p.mode?g:p.mode>0?m:v);l&&(0==p.mode||null==y)&&(null==y?y=p.lastLetter.children.get(g==m?v:m):h.push(N3.builder().setI(p.i).setLastLetter(p.lastLetter).setMode(g==m?-1:1))),null==y&&(p.i=-1),p.setLastLetter(y||null),p.i>=0&&(++p.i,p.mode=0),p.i>=0&&p.i<a.length?h.push(p):p.i>=0&&d.push(...p.lastLetter.ids)}if(0==d.length)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043b\u043e\u0432\u043e: "+a);return d}isSeparator(a){return this.separators.indexOf(a)>=0}getLettersDirect(a){if(""==a)return this.lettersTree;let l=this.lettersTree,h=0;for(;h<a.length;++h){let f,d=a[h];if(l.children.has(d)||l.children.set(d,new rb(this.nextLetterId())),f=l.children.get(d),!f)throw new Error("System error: Inconsistent tree: value should be existed.");l=f}return h!=a.length?null:l}addLettersDirect(a,l=null){let h=this.lettersTree;for(let d=0;d<a.length;++d){let p,f=a[d];if(h.children.has(f)||h.children.set(f,new rb(this.nextLetterId())),p=h.children.get(f),!p)throw new Error("System error: Inconsistent tree: value should be existed.");h=p,d+1==a.length&&(null==l?h.ids.push(this.nextWordId()):h.ids.push(...l))}return h}nextLetterId(){return this.letterNextId++}nextWordId(){return this.wordNextId++}clearIndex(){this.wordNextId=1}findWord(a){let l=this.lettersTree;for(let h=0;h<a.length;++h){let d=a[h],f=l.children.get(d);if(!f)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0441\u0438\u043c\u0432\u043e\u043b: "+d);l=f}return l}allLettersAdded(){return this.flattern().tree(),this}loadDictionary(a){this.lettersFlat=[];const l=Us.loadIndex(a),h=Us.loadIndex(a);let d=new Pl(0,h),f=new Pl(0,l);for(let p=0;p<l;++p){let g=new $O(p,"");g.load(a,0,d.getBitsCount(),f.getBitsCount()),this.lettersFlat.push(g)}return this.tree(),this}saveDictionary(a){Us.saveIndex(a,this.lettersFlat.length);let l=this.wordNextId-1;Us.saveIndex(a,l);let h=new Pl(0,l),d=new Pl(0,this.lettersFlat.length);return this.lettersFlat.forEach(f=>{f.save(a,0,h.getBitsCount(),d.getBitsCount())}),this}static saveString(a,l){let h=new Map,d=new Map;for(let m of l)if(!h.has(m)){let v=h.size;d.set(v,m),h.set(m,v)}let f="";d.forEach((m,v)=>{f+=m}),Us.saveStringUtf8(a,f),Us.saveIndex(a,l.length);let g=new Pl(0,h.size-1);for(let m of l){let v=h.get(m);if(null==v)throw new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: "+m);Us.saveIndex(a,v,g.getBitsCount())}return this}static loadString(a){let l=new Map,h=this.loadStringUtf8(a);for(let g of h)l.set(l.size,g);let d=Us.loadIndex(a),f="",p=new Pl(0,l.size-1);for(let g=0;g<d;++g){let m=Us.loadIndex(a,p.getBitsCount());f+=l.get(m)}return f}static getBitsCount(a){let l=a,h=0;for(;l;)++h,l>>=1;return 0==h&&++h,h}static saveIndex(a,l,h=0){0==h&&(h=zO.getBitsCount(l),Us.saveIndex(a,h-1,5)),a.pushNumber(l,h)}static loadIndex(a,l=0){return 0==l&&(l=a.popNumber(5)+1),a.popNumber(l)}static saveStringUtf8(a,l){let h=Us.encode_utf8(l);a.pushNumber(h.length),h.forEach(d=>{a.pushNumber(d,8)})}static loadStringUtf8(a){let l=[],h=a.popNumber();for(let f=0;f<h;++f)l.push(a.popNumber(8));return Us.decode_utf8(l)}static toByteArray(a){let l=[];for(let h=0;h<a.length;h++)l.push(a.charCodeAt(h));return l}static fromByteArray(a){let l="";for(let h=0;h<a.length;h++)l+=String.fromCharCode(a[h]);return l}static encode_utf8(a){return Us.toByteArray(unescape(encodeURIComponent(a)))}static decode_utf8(a){return decodeURIComponent(escape(this.fromByteArray(a)))}toText(){let a=[];a.push(new Wye("",this.lettersTree));let l=new Map;for(;a.length;){let d=a[0];a.splice(0,1),d.letter.ids.forEach(f=>{l.set(f,d.text)}),d.letter.children.forEach((f,p)=>{a.push(new Wye(d.text+p,f))})}let h="";return[...l.entries()].sort((d,f)=>d[0]-f[0]).forEach((d,f)=>{h+=d[1]}),h}}class Y${static fallbackCopyTextToClipboard(a){var l=document.createElement("textarea");l.value=a,l.style.top="0",l.style.left="0",l.style.position="fixed",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy")}catch(d){console.error("Fallback: Oops, unable to copy",d)}document.body.removeChild(l)}static copyTextToClipboard(a){navigator.clipboard?navigator.clipboard.writeText(a).then(function(){},function(l){console.error("Async: Could not copy text: ",l)}):Y$.fallbackCopyTextToClipboard(a)}}let Gye=(()=>{class c{getRestPoint(l,h,d=null){return Mr.merge(Mr.merge(h||this.config.serviceAPIHost,d||this.restPoint),l)}constructor(l,h,d){S(this,"http",void 0),S(this,"config",void 0),S(this,"cacheSvc",void 0),S(this,"names",[]),S(this,"restPoint","/calendar"),this.http=l,this.config=h,this.cacheSvc=d}getNames(l,h="calendar",d=null){const f={params:{}};return new Promise((p,g)=>{this.http.get(this.getRestPoint("/names",l,d),f).pipe(mr(qi.handleError)).subscribe({next:m=>p(m),error:m=>g(m)})})}getSource(l,h){const d={params:{_name:l}};return new Promise((f,p)=>{this.http.get(this.getRestPoint("/source",h),d).pipe(mr(qi.handleError)).subscribe({next:g=>f(g),error:g=>p(g)})})}getTextStr(l,h,d,f){let p=""+d;const g=Mr.merge(Mr.merge(l,h),p);this.cacheSvc.getText(g,f)}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln),Pe(Pd))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class WO{constructor(a,l,h,d){S(this,"open",void 0),S(this,"text",void 0),S(this,"color",void 0),S(this,"tag",void 0),this.open=a,this.text=l,this.color=h,this.tag=d}setOpen(a){return this.open=a,this}setText(a){return this.text=a,this}setColor(a){return this.color=a,this}setTag(a){return this.tag=a,this}static builder(){return new WO(!1,"","",null)}}let K$=(()=>{class c{constructor(l){S(this,"uiConfig",void 0),S(this,"calendarScheduler",[]),S(this,"calendarIntervals",""),this.uiConfig=l}saveMonth(l,h,d){let f=[],p=g=>{let m="";return"blue"==g?m="B":"green"==g?m="G":"red"==g&&(m="R"),m};for(let g=0;g<1;g++){let m=l[g];for(let v=0;v<m.length;v++){let y=m[v];if(y.text){let _=p(y.color);f[32+v]=_}}}for(let g=1;g<l.length;g++){let m=l[g];for(let v=0;v<m.length;v++){let y=m[v];if(y.text){let _=p(y.color);f[+y.text]=_}}}this.calendarScheduler[h]||(this.calendarScheduler[h]=[]),this.calendarScheduler[h][d]=f,this.forceSave()}getMonthsDaysCount(l,h){return new Date(l,(h+1)%12,0).getDate()}createMonth(l,h){let d=C=>{let x="";return C?"R"==C?x="red":"G"==C?x="green":"B"==C&&(x="blue"):x="",x},f=[],p=this.getMonthsDaysCount(h,l),g=this.calendarScheduler[h],m=g?g[l]:[];m||(m=[]);let v=[],_=7;f.push(["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].map((C,x)=>WO.builder().setText(C).setColor((C=>{let x=m[C],w="";return x&&(w=d(x)),w})(32+x))));let b=1;{let x=new Date(h,l,1).getDay();0==x&&(x+=7);for(let w=1;w<x;w++)v.push(WO.builder());b=x-1,_=Math.ceil((p+b)/7)+2}for(let C=1;C<=p;C+=7)for(let x=0;x<7;x++)if(C+x<=p){let O=new Date(h,l,C+x).getDay();0==O&&(O+=7);let D=m[C+x];D=d(D),v.push(WO.builder().setText(""+(C+x)).setColor(D)),7==v.length&&(f.push(v),v=[])}return v.length&&f.push(v),f}dateLessOrEqual(l,h,d,f,p,g){return l<f||!(l>f)&&(h<p||!(h>p)&&d<g)}isInInterval(l,h,d){let f=h+1,p=this.calendarIntervals.split("\n"),g=!1;return p.forEach(m=>{try{let v=m.split("\t");if(v.length>=3){let y=v[1].split(/[\\/\.\-]/),_=v[2].split(/[\\/\.\-]/);if(this.dateLessOrEqual(+y[2],+y[1],+y[0],+_[2],+_[1],+_[0])){let b=this.dateLessOrEqual(+y[2],+y[1],+y[0],l,f,d),C=this.dateLessOrEqual(l,f,d,+y[2],+y[1],+y[0]),x=this.dateLessOrEqual(l,f,d,+_[2],+_[1],+_[0]),w=this.dateLessOrEqual(+_[2],+_[1],+_[0],l,f,d);(b||!b&&!C)&&(x||!x&&!w)&&(g=!0)}}}catch{}}),g}isLiturgiaFound(l,h,d){if(!this.isInInterval(l,h,d))return!0;let f=this.calendarScheduler[l];if(!f)return!0;let p=f?f[h]:[];if(!p)return!0;let g=p[d];return"B"==g||"G"==g}forceSave(){}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ii))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();function fft(c,a){if(1&c&&(R(0,"div",4),pe(1,"app-svg-js-image",3),N()),2&c){const l=q();F(1),L("data",l.svgDateData)}}const Qye=function(c,a){return{"clr-col-4":c,"clr-col-6":a}};let pft=(()=>{class c{get calendarText(){return this.uiConfig.ui.calendarCurrentDate.getStringValue()}set calendarText(l){this.uiConfig.ui.calendarCurrentDate.setStringValue(l)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}get sCurrentDate(){let l=this.useUniqueDate?this.uniqueDateString:this.calendarText;return l!==this.oldUniqueDateString&&(this.oldUniqueDateString=l,this.config.post(()=>{this.ngOnInitDirect()},10)),l}set sCurrentDate(l){this.useUniqueDate?this.uniqueDateString=l:this.calendarText=l,this.oldUniqueDateString=l}get sCurrentDateValidString(){let l=this.sCurrentDate;if(!l){let h=new Date;l=`${h.getDate()}.${h.getMonth()+1}.${h.getFullYear()}`}return l}get currentDate(){let d=+this.sCurrentDateValidString.split(/[\\/\.\-]/)[0],f=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);return d>f&&(d=f),d}set currentDate(l){let h=this.sCurrentDateValidString.split(/[\\/\.\-]/),d=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);this.sCurrentDate=`${l<=d?l:d}.${h[1]}.${h[2]}`,this.changed()}get currentMonthIndex(){return+this.sCurrentDateValidString.split(/[\\/\.\-]/)[1]-1}set currentMonthIndex(l){let h=this.sCurrentDateValidString.split(/[\\/\.\-]/),d=+h[0],f=this.calendarSvc.getMonthsDaysCount(this.currentYear,l);d=d<=f?d:f,this.sCurrentDate=`${d}.${l+1}.${h[2]}`,this.changed()}validateYear(l){let h=+l,d=(new Date).getFullYear();return Number.isNaN(h)&&(h=d),(+h+10<d||+h-10>d)&&(h=d-10),+h}get currentYear(){let l=this.sCurrentDateValidString.split(/[\\/\.\-]/);return+this.validateYear(+l[2])}set currentYear(l){let h=this.sCurrentDateValidString.split(/[\\/\.\-]/),d=+h[0];l=this.validateYear(l);let f=this.calendarSvc.getMonthsDaysCount(l,this.currentMonthIndex);d=d<=f?d:f,this.sCurrentDate=`${d}.${h[1]}.${l}`,this.changed()}constructor(l,h,d,f,p){S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"themes",void 0),S(this,"mathSvc",void 0),S(this,"calendarSvc",void 0),S(this,"data",void 0),S(this,"svgMonthData",Ha.builder().setGenName("this").setType(114)),S(this,"svgYearData",Ha.builder().setGenName("this").setType(114)),S(this,"svgDateData",Ha.builder().setGenName("this").setType(114)),S(this,"change",new Mt),S(this,"dateChangedEnabled",!0),S(this,"showDates",!1),S(this,"useUniqueDate",!1),S(this,"uniqueDateString",""),S(this,"oldUniqueDateString",null),this.uiConfig=l,this.config=h,this.themes=d,this.mathSvc=f,this.calendarSvc=p}ngOnInit(){this.ngOnInitDirect()}ngOnInitDirect(){let l=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"].map((m,v)=>yg.builder().setName(m).setTag(v));this.svgMonthData=Ha.builder().setGenerator((new cE).setTheme(this.themes.nowIsDay()?Ks.Light3:Ks.Dark3).setCommands(l,l[this.currentMonthIndex]).setOnCommandHandler(m=>{this.currentMonthIndex=m.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114);let h=[],d=this.currentYear;for(let m=-15;m<=15;m++)h.push(d+m);let p=15,g=h.map((m,v)=>(m==d&&(p=v),yg.builder().setName(""+m).setTag(m)));this.svgYearData=Ha.builder().setGenerator((new cE).setTheme(this.themes.nowIsDay()?Ks.Light3:Ks.Dark3).setCommands(g,g[15]).setOnCommandHandler(m=>{this.currentYear=m.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114),this.reloadDates()}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}reloadDates(){if(!this.showDates)return;let l=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex),h=[];for(let d=1;d<=l;d++)h.push(yg.builder().setName(""+d).setTag(d));this.svgDateData=Ha.builder().setGenerator((new cE).setTheme(this.themes.nowIsDay()?Ks.Light3:Ks.Dark3).setCommands(h,h[this.currentDate-1]).setOnCommandHandler((d,f)=>{this.dateChangedEnabled=!1,this.currentDate=d.tag,this.dateChangedEnabled=!0}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114)}sendChanged(){this.change.emit(this.sCurrentDateValidString)}changed(){this.dateChangedEnabled&&this.reloadDates(),this.sendChanged()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(ln),z(bo),z(Mg),z(K$))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-calendar"]],inputs:{data:"data",showDates:"showDates",useUniqueDate:"useUniqueDate",uniqueDateString:"uniqueDateString"},outputs:{change:"change"},decls:6,vars:11,consts:[[1,"clr-row"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[3,"data"],[1,"clr-col-4"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,fft,2,1,"div",1),R(2,"div",2),pe(3,"app-svg-js-image",3),N(),R(4,"div",2),pe(5,"app-svg-js-image",3),N()()),2&l&&(F(1),L("ngIf",h.showDates),F(1),L("ngClass",Wr(5,Qye,h.showDates,!h.showDates)),F(1),L("data",h.svgMonthData),F(1),L("ngClass",Wr(8,Qye,h.showDates,!h.showDates)),F(1),L("data",h.svgYearData))},dependencies:[di,Sn,nc],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.inline[_ngcontent-%COMP%]{display:inline-block}"]})),c})();function gft(c,a){1&c&&pe(0,"img",6),2&c&&L("src","./imsvg/"+(7-q().$implicit.rang)+".svg",CD)}function mft(c,a){if(1&c){const l=ct();R(0,"div",2),ie("click",function(){const f=Ee(l).$implicit;return Ae(q().onSelectPrazdnik(f))}),R(1,"div",3)(2,"span",4),se(3,"\xa0"),K(4,gft,1,1,"img",5),se(5,"\xa0"),N(),se(6),N()()}if(2&c){const l=a.$implicit;F(4),L("ngIf",l.rang>1),F(2),Ht(l.text)}}let vft=(()=>{class c{get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(l){this.uiConfig.ui.calendarText.setStringValue(l)}get prazdnkikiData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h,d){S(this,"uiConfig",void 0),S(this,"themes",void 0),S(this,"mathSvc",void 0),S(this,"data",void 0),S(this,"onSelected",new Mt),this.uiConfig=l,this.themes=h,this.mathSvc=d}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onSelectPrazdnik(l){this.onSelected.emit(l)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(bo),z(Mg))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-prazdniki"]],inputs:{data:"data"},outputs:{onSelected:"onSelected"},decls:2,vars:2,consts:[[3,"ngClass"],["class","clr-row cursor",3,"click",4,"ngFor","ngForOf"],[1,"clr-row","cursor",3,"click"],[1,"clr-col-12"],[1,"label","label-info"],["width","16px","height","16px",3,"src",4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,mft,7,2,"div",1),N()),2&l&&(L("ngClass",h.getClasses()),F(1),L("ngForOf",h.prazdnkikiData.prazdniki))},dependencies:[di,vi,Sn],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]})),c})();class J${constructor(){}static builder(){return new J$}}class e9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"colors",[]),S(this,"color",""),this.classes=d}static builder(){return new e9("",null,null,J$.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setColors(a){return this.colors=a,this}setColor(a){return this.color=a,this}}function yft(c,a){if(1&c){const l=ct();R(0,"button",2),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q().onToggleColor(d,p))}),se(1),N()}if(2&c){const l=a.$implicit;L("ngClass",q().getClass(l)),F(1),Ht(l.name)}}class Ph{constructor(a,l,h,d){S(this,"name",void 0),S(this,"clazz",void 0),S(this,"value",void 0),S(this,"selected",void 0),this.name=a,this.clazz=l,this.value=h,this.selected=d}static builder(){return new Ph("","","",!1)}setName(a){return this.name=a,this}setClass(a){return this.clazz=a,this}setValue(a){return this.value=a,this}}let _ft=(()=>{class c{get selColorsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}set text(l){this.data&&(this.data.text=l,this.color=Nu.getTextColor(this.data.text))}set color(l){this.colors.forEach(h=>{h.selected=h.value==l})}constructor(){S(this,"data",e9.builder()),S(this,"info","\u0426\u0432\u0435\u0442\u0430"),S(this,"colorChanged",new Mt),S(this,"colors",[Ph.builder().setName("\u041a\u0440\u0430\u0441\u043d\u044b\u0439").setClass("bcRed").setValue("{\u043a}"),Ph.builder().setName("\u0421\u0438\u043d\u0438\u0439").setClass("bcBlue").setValue("{\u0441}"),Ph.builder().setName("\u0417\u0435\u043b\u0451\u043d\u044b\u0439").setClass("bcGreen").setValue("{\u0437}"),Ph.builder().setName("\u0416\u0451\u043b\u0442\u044b\u0439").setClass("bcYellow").setValue("{\u0451}"),Ph.builder().setName("\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439").setClass("bcIndigo").setValue("{\u0444}"),Ph.builder().setName("\u041f\u0443\u0440\u043f\u0443\u0440\u043d\u044b\u0439").setClass("bcPurple").setValue("{\u043f}"),Ph.builder().setName("\u041c\u043e\u0440\u0441\u043a\u043e\u0439").setClass("bcCyan").setValue("{\u043c}"),Ph.builder().setName("\u0417\u0435\u043b\u0451\u043d\u043e-\u0436\u0451\u043b\u0442\u044b\u0439").setClass("bcGreenYellow").setValue("{\u043b}"),Ph.builder().setName("\u0422\u0451\u043c\u043d\u043e-\u043a\u0440\u0430\u0441\u043d\u044b\u0439").setClass("bcDarkRed").setValue("{\u0440}")])}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.data&&(this.color=Nu.getTextColor(this.data.text))}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onToggleColor(l,h){l.stopPropagation(),h.selected=!h.selected,h.selected&&this.colors.filter(d=>d!=h).forEach(d=>d.selected=!1),this.colorChanged.emit(h.selected?h.value:"")}getClass(l){var h={btn:!0};return h.darkBtn=!l.selected,h[l.clazz]=l.selected,h}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-select-colors"]],inputs:{data:"data",info:"info",text:"text"},outputs:{colorChanged:"colorChanged"},decls:5,vars:3,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"h6")(2,"b"),se(3),N()(),K(4,yft,2,2,"button",1),N()),2&l&&(L("ngClass",h.getClasses()),F(3),Ht(h.info),F(1),L("ngForOf",h.colors))},dependencies:[di,vi],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})),c})();class t9{constructor(){}static builder(){return new t9}}class n9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"config",void 0),S(this,"useDefault",!1),S(this,"object",{}),S(this,"fieldName","name"),S(this,"description","\u0418\u043c\u044f"),S(this,"description2",""),S(this,"shapes",[]),S(this,"readonly",!1),S(this,"command",null),this.config=d}static builder(){return new n9("",null,null,t9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setUseDefault(a){return this.useDefault=a,this}setObject(a){return this.object=a,this}setFieldName(a){return this.fieldName=a,this}setDescription(a){return this.description=a,this}setDescription2(a){return this.description2=a,this}setShapes(a){return this.shapes=a,this}setReadonly(a){return this.readonly=a,this}setCommand(a){return this.command=a,this}}function bft(c,a){if(1&c){const l=ct();R(0,"button",4),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q(2).onCommand(d,p))}),pe(1,"clr-icon"),N()}if(2&c){const l=a.$implicit;F(1),ot("shape",l)}}function Cft(c,a){if(1&c){const l=ct();R(0,"clr-input-container")(1,"label"),se(2),K(3,bft,2,1,"button",2),N(),R(4,"input",3),ie("ngModelChange",function(d){return Ee(l),Ae(q().objectFieldName=d)}),N()()}if(2&c){const l=q();F(2),Ht(l.description),F(1),L("ngForOf",l.shapes),F(1),L("readOnly",l.readonly)("placeholder",l.description2)("name",l.fieldName)("ngModel",l.objectFieldName)}}function Sft(c,a){if(1&c){const l=ct();R(0,"button",4),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q(2).onCommand(d,p))}),pe(1,"clr-icon"),N()}if(2&c){const l=a.$implicit;F(1),ot("shape",l)}}function xft(c,a){if(1&c){const l=ct();R(0,"clr-input-container",5)(1,"label"),se(2),K(3,Sft,2,1,"button",2),N(),R(4,"input",3),ie("ngModelChange",function(d){return Ee(l),Ae(q().objectFieldName=d)}),N()()}if(2&c){const l=q();F(2),gi("",l.description," "),F(1),L("ngForOf",l.shapes),F(1),L("readOnly",l.readonly)("placeholder",l.description2)("name",l.fieldName)("ngModel",l.objectFieldName)}}let jye=(()=>{class c{get textEditorData(){return this.data}get useDefault(){return this.textEditorData.useDefault}set useDefault(l){this.textEditorData.setUseDefault(l)}get description(){return this.textEditorData.description}set description(l){this.textEditorData.setDescription(l)}get description2(){return this.textEditorData.description2?this.textEditorData.description2:this.textEditorData.description}set description2(l){this.textEditorData.setDescription2(l)}get shapes(){return this.textEditorData.shapes}set shapes(l){this.textEditorData.setShapes(l)}get readonly(){return this.textEditorData.readonly}set readonly(l){this.textEditorData.setReadonly(l)}get object(){return this.textEditorData.object}set object(l){this.textEditorData.setObject(l)}get fieldName(){return this.textEditorData.fieldName}set fieldName(l){this.textEditorData.setFieldName(l)}set command(l){this.textEditorData.setCommand(l)}get objectFieldName(){return this.object[this.fieldName]}set objectFieldName(l){this.object[this.fieldName]=l,this.onChanged()}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"data",n9.builder()),S(this,"changed",new Mt),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onCommand(l,h){this.textEditorData.command&&this.textEditorData.command(this.object,this.fieldName,h),l.stopPropagation()}onChanged(){this.changed.emit(this.objectFieldName)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-text-editor"]],inputs:{data:"data",useDefault:"useDefault",description:"description",description2:"description2",shapes:"shapes",readonly:"readonly",object:"object",fieldName:"fieldName",command:"command"},outputs:{changed:"changed"},decls:2,vars:2,consts:[[4,"ngIf"],["class","",4,"ngIf"],["class","btn btn-link btn-sx",3,"click",4,"ngFor","ngForOf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"],[1,"btn","btn-link","btn-sx",3,"click"],[1,""]],template:function(l,h){1&l&&(K(0,Cft,5,6,"clr-input-container",0),K(1,xft,5,6,"clr-input-container",1)),2&l&&(L("ngIf",h.useDefault),F(1),L("ngIf",!h.useDefault))},dependencies:[vi,Sn,so,ls,ux,u_,Cc,Pa,ma],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class i9{constructor(){}static builder(){return new i9}}class r9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"rang",1),this.classes=d}static builder(){return new r9("",null,null,i9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setRang(a){return this.rang=a,this}}class s9{constructor(){S(this,"printOnly",!1)}static builder(){return new s9}setPrintOnly(a){return this.printOnly=a,this}}class o9 extends Ci{constructor(a,l,h,d,f,p){super("",d,f),S(this,"genName",void 0),S(this,"svgWidth",void 0),S(this,"svgHeight",void 0),S(this,"classes",void 0),S(this,"rang",0),this.genName=a,this.svgWidth=l,this.svgHeight=h,this.classes=p}static builder(){return new o9("",512,512,null,null,s9.builder())}setGenName(a){return this.genName=a,this}setSvgRangSignWidth(a){return this.svgWidth=a,this}setSvgRangSignHeight(a){return this.svgHeight=a,this}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}setRang(a){return this.rang=a,this}}function wft(c,a){1&c&&pe(0,"img",2),2&c&&L("src","./imsvg/"+(7-q().rang)+".svg",CD)}function Oft(c,a){if(1&c&&(R(0,"span"),se(1),N()),2&c){const l=q();F(1),Ht(l.getCurrentDayOfWeek())}}let Dft=(()=>{class c{get svgData(){return this.data}get rang(){return this.svgData.rang}set rang(l){this.svgData.rang=l}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}constructor(l){S(this,"config",void 0),S(this,"data",o9.builder()),S(this,"church",!0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{"print-only":this.svgData.classes.printOnly}}getCurrentDayOfWeek(){let l="",h=["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"];return l=h[(this.rang-1)%h.length],l}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-svg-rang-sign"]],inputs:{data:"data",rang:"rang",church:"church"},decls:2,vars:2,consts:[["width","16px","height","16px",3,"src",4,"ngIf"],[4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(l,h){1&l&&(K(0,wft,1,1,"img",0),K(1,Oft,2,1,"span",1)),2&l&&(L("ngIf",h.church&&h.rang>1),F(1),L("ngIf",!h.church))},dependencies:[Sn],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();const Tft=function(c,a){return{btn:!0,"btn-primary":c,darkBtn:a}};function kft(c,a){if(1&c){const l=ct();R(0,"button",2),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q().onSelectRang(d,p))}),pe(1,"app-dynamic-svg-rang-sign",3),N()}if(2&c){const l=a.$implicit,h=q();L("ngClass",Wr(3,Tft,h.isSelectedRang(l),!h.isSelectedRang(l))),F(1),L("church",h.church)("rang",l.rang)}}class Rl{constructor(a){S(this,"rang",void 0),this.rang=a}static builder(){return new Rl(0)}setRang(a){return this.rang=a,this}}let qye=(()=>{class c{set rang(l){let h=this.rangs.find(d=>d.rang==l);this.currentRang=h||null}get rangs(){return this.church?this.rangsChurch:this.rangsState}get rangsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(){S(this,"data",r9.builder()),S(this,"church",!0),S(this,"rangChanged",new Mt),S(this,"rangsChurch",[Rl.builder().setRang(6),Rl.builder().setRang(5),Rl.builder().setRang(4),Rl.builder().setRang(3),Rl.builder().setRang(2),Rl.builder().setRang(1)]),S(this,"rangsState",[Rl.builder().setRang(7),Rl.builder().setRang(6),Rl.builder().setRang(5),Rl.builder().setRang(4),Rl.builder().setRang(3),Rl.builder().setRang(2),Rl.builder().setRang(1)]),S(this,"currentRang",this.rangs[0])}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}isSelectedRang(l){return this.currentRang===l}onSelectRang(l,h){l.stopPropagation(),this.currentRang=h,this.rangChanged.emit(h.rang)}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-rangs"]],inputs:{data:"data",rang:"rang",church:"church"},outputs:{rangChanged:"rangChanged"},decls:2,vars:2,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"church","rang"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,kft,2,6,"button",1),N()),2&l&&(L("ngClass",h.getClasses()),F(1),L("ngForOf",h.rangs))},dependencies:[di,vi,Dft],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})),c})();class a9{constructor(){}static builder(){return new a9}}class l9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"clerics",[]),this.classes=d}static builder(){return new l9("",null,null,a9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setClerics(a){return this.clerics=a,this}}const Xye=function(c,a){return{btn:!0,"btn-primary":c,darkBtn:a}};function Mft(c,a){if(1&c){const l=ct();R(0,"button",1),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q().onToggleClericIndex(d,p))}),se(1),N()}if(2&c){const l=a.$implicit,h=q();L("ngClass",Wr(2,Xye,h.isClericSelected(l),!h.isClericSelected(l))),F(1),Ht(l.name)}}let Eft=(()=>{class c{get clerics(){return this.selClericsData.clerics}set clerics(l){this.selClericsData.clerics=l}get selClericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}set text(l){this.data&&(this.data.text=l)}constructor(){S(this,"data",l9.builder()),S(this,"info","\u0421\u043b\u0443\u0436\u0438\u0442"),S(this,"clericsChanged",new Mt)}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onToggleClericIndex(l,h){l.stopPropagation();let d=this.text.split(","),f=d.filter(g=>g==h.name).length>0,p=d.filter(g=>g!=h.name).join(",");f||(p&&(p+=","),p+=h.name),this.selClericsData.text=p,this.clericsChanged.emit(this.selClericsData.text)}isClericSelected(l){return this.text.split(",").filter(h=>h==l.name).length>0}onToggleAllClerics(l){l.stopPropagation(),this.text=this.text?"":this.clerics.map(h=>h.name).join(","),this.clericsChanged.emit(this.selClericsData.text)}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-select-clerics"]],inputs:{data:"data",info:"info",clerics:"clerics",text:"text"},outputs:{clericsChanged:"clericsChanged"},decls:7,vars:7,consts:[[3,"ngClass"],[3,"ngClass","click"],["shape","lightbulb"],[3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"h6")(2,"b"),se(3),N()(),R(4,"button",1),ie("click",function(f){return h.onToggleAllClerics(f)}),pe(5,"clr-icon",2),N(),K(6,Mft,2,5,"button",3),N()),2&l&&(L("ngClass",h.getClasses()),F(3),Ht(h.info),F(1),L("ngClass",Wr(4,Xye,!!h.text,!h.text)),F(2),L("ngForOf",h.clerics))},dependencies:[di,vi,so],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})),c})();function Aft(c,a){if(1&c){const l=ct();R(0,"app-dynamic-scheduler-rangs",16),ie("rangChanged",function(d){return Ee(l),Ae(q().onSelectRang(d))}),N()}if(2&c){const l=q();L("church",l.isChurch())("rang",l.currentRang)}}function Ift(c,a){if(1&c){const l=ct();R(0,"app-dynamic-scheduler-select-clerics",22),ie("clericsChanged",function(d){Ee(l);const f=q().$implicit;return Ae(q().onClericsChanges(d,f))}),N()}if(2&c){const l=q().$implicit,h=q();L("text",l.selectedClerics)("clerics",h.clerics)("info",h.clericInfo)}}const Pft=function(c,a){return{"clr-col-8":c,"clr-col-12":a}},Yye=function(){return["add-text","upload","download","times"]},Rft=function(c,a){return{"clr-col-4":c,"clr-col-12":a}},Kye=function(c,a){return[c,a]};function Fft(c,a){if(1&c){const l=ct();R(0,"div",17)(1,"div",0)(2,"app-dynamic-text-editor",18),ie("changed",function(d){return Ee(l),Ae(q().onTextChanged(d))}),N()(),R(3,"div",0)(4,"app-dynamic-text-editor",18),ie("changed",function(d){return Ee(l),Ae(q().onTextChanged(d))}),N()(),R(5,"div",19),K(6,Ift,1,3,"app-dynamic-scheduler-select-clerics",20),N(),R(7,"div",19)(8,"app-dynamic-scheduler-select-colors",21),ie("colorChanged",function(d){const p=Ee(l).$implicit;return Ae(q().onColorChanges(d,p))}),N()()()}if(2&c){const l=a.$implicit,h=q();F(1),L("ngClass",Wr(14,Pft,!h.isVertical(),h.isVertical())),F(1),L("object",l)("fieldName","text")("description",h.serviceDesc)("shapes",yc(17,Yye))("command",h.onCommandServiceTogglePtr),F(1),L("ngClass",Wr(18,Rft,!h.isVertical(),h.isVertical())),F(1),L("object",l)("fieldName","time")("description",h.timeDesc)("shapes",Wr(21,Kye,l.morningService?"sun":"moon",l.requiredService?"bell":"check"))("command",h.onCommandServiceTogglePtr),F(2),L("ngIf",h.clerics),F(2),L("text",l.text)}}function Lft(c,a){if(1&c){const l=ct();R(0,"app-dynamic-scheduler-select-clerics",25),ie("clericsChanged",function(d){Ee(l);const f=q().$implicit;return Ae(q().onClericsChanges(d,f))}),N()}if(2&c){const l=q().$implicit,h=q();L("info",h.clericInfo)("text",l.selectedClerics)("clerics",h.clerics)}}const Jye=function(){return{"clr-col-12":!0}};function Nft(c,a){if(1&c){const l=ct();R(0,"div",23)(1,"div",0)(2,"app-dynamic-text-editor",18),ie("changed",function(d){return Ee(l),Ae(q().onTextChanged(d))}),N()(),R(3,"div",0)(4,"app-dynamic-text-editor",18),ie("changed",function(d){return Ee(l),Ae(q().onTextChanged(d))}),N()(),R(5,"div",19),K(6,Lft,1,3,"app-dynamic-scheduler-select-clerics",24),N(),R(7,"div",19)(8,"app-dynamic-scheduler-select-colors",21),ie("colorChanged",function(d){const p=Ee(l).$implicit;return Ae(q().onColorChanges(d,p))}),N()()()}if(2&c){const l=a.$implicit,h=q();F(1),L("ngClass",yc(14,Jye)),F(1),L("object",l)("fieldName","text")("description","\u0421\u043b\u0443\u0436\u0431\u0430")("shapes",yc(15,Yye))("command",h.onCommandServiceTogglePtr),F(1),L("ngClass",yc(16,Jye)),F(1),L("object",l)("fieldName","time")("description","\u0412\u0440\u0435\u043c\u044f")("shapes",Wr(17,Kye,l.morningService?"sun":"moon",l.requiredService?"bell":"check"))("command",h.onCommandServiceTogglePtr),F(2),L("ngIf",h.clerics),F(2),L("text",l.text)}}function Bft(c,a){if(1&c){const l=ct();R(0,"button",26),ie("click",function(){return Ee(l),Ae(q().onSaveServices())}),pe(1,"clr-icon",27),se(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),N()}2&c&&L("clrLoading",q().submitBtnState)}function Vft(c,a){if(1&c){const l=ct();R(0,"button",28),ie("click",function(){return Ee(l),Ae(q().modalClearServicesFlag=!0)}),pe(1,"clr-icon",29),se(2," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()}}function Uft(c,a){if(1&c&&(R(0,"div",30)(1,"div",31),se(2),N(),R(3,"div",32),se(4),N()()),2&c){const l=q();F(2),Ht(l.modalDeleteService.text),F(2),Ht(l.modalDeleteService.time)}}let zft=(()=>{class c{get services(){let l=this.currentRang-1;return null==this.servicesData.services[l]&&(this.servicesData.services[l]=[]),this.servicesData.services[l]}set services(l){this.servicesData.services[this.currentRang-1]=l}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(l){this.uiConfig.ui.calendarText.setStringValue(l)}get servicesData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h,d,f){S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"themes",void 0),S(this,"mathSvc",void 0),S(this,"data",rv.builder()),S(this,"clerics",null),S(this,"vertical",!1),S(this,"singleRang",!1),S(this,"autoSave",!1),S(this,"clearBtn",!0),S(this,"serviceDesc","\u0421\u043b\u0443\u0436\u0431\u0430"),S(this,"timeDesc","\u0412\u0440\u0435\u043c\u044f"),S(this,"clericInfo","\u0421\u043b\u0443\u0436\u0438\u0442"),S(this,"anyCaseAdd",!0),S(this,"onSave",new Mt),S(this,"onClear",new Mt),S(this,"onReset",new Mt),S(this,"submitBtnState",Is.DEFAULT),S(this,"currentRang",1),S(this,"modalClearServicesFlag",!1),S(this,"modalDeleteServicesFlag",!1),S(this,"modalDeleteService",null),S(this,"onCommandServiceTogglePtr",(p,g,m)=>this.onCommandServiceToggle(p,g,m)),this.uiConfig=l,this.config=h,this.themes=d,this.mathSvc=f}isVertical(){return this.vertical}isChurch(){return"\u0421\u043b\u0443\u0436\u0431\u0430"==this.serviceDesc}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(l,h,d){if("time"==h)switch(d){case"moon":case"sun":l.morningService=!l.morningService;break;case"bell":case"check":l.requiredService=!l.requiredService}else if("text"==h)switch(d){case"upload":this.moveUp(l);break;case"download":this.moveDown(l);break;case"times":this.requestDeleteService(l);break;case"add-text":this.addNewAfterService(l)}this.onTextChanged("")}onSelectRang(l){this.currentRang=l}onAddNewService(){this.services.push(ib.builder()),this.onTextChanged("")}onSaveServices(){this.onSave.emit(this.servicesData.services),this.submitBtnState=Is.LOADING,this.config.post(()=>{this.submitBtnState=Is.DEFAULT},2e3)}moveUp(l){let h=this.services.indexOf(l);h>0&&(this.services[h]=this.services[h-1],this.services[h-1]=l)}moveDown(l){let h=this.services.indexOf(l);h+1<this.services.length&&(this.services[h]=this.services[h+1],this.services[h+1]=l)}deleteService(l){if(null==l)return;let h=this.services.indexOf(l);h>=0&&this.services.splice(h,1),this.onTextChanged("")}addNewAfterService(l){let h=this.services.indexOf(l);h>=0&&h<this.services.length&&this.services.splice(h+1,0,ib.builder())}onResetServices(){this.onReset.emit(this.servicesData.services)}onClearServices(){this.onClear.emit(this.servicesData.services)}requestDeleteService(l){this.modalDeleteService=l,this.modalDeleteServicesFlag=!0}onClericsChanges(l,h){h.setSelectedClerics(l),this.onTextChanged("")}onColorChanges(l,h){this.anyCaseAdd?(h.setTime(Nu.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0412\u041b\u044e\u0431\u043e\u043c\u0421\u043b\u0443\u0447\u0430\u0435(h.time,l)),h.setText(Nu.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0412\u041b\u044e\u0431\u043e\u043c\u0421\u043b\u0443\u0447\u0430\u0435(h.text,l))):(h.setTime(Nu.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(h.time,l)),h.setText(Nu.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(h.text,l))),h.setServiceColor(l),this.onTextChanged("")}onTextChanged(l){this.autoSave&&this.onSaveServices()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(ln),z(bo),z(Mg))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-services"]],inputs:{data:"data",clerics:"clerics",vertical:"vertical",singleRang:"singleRang",autoSave:"autoSave",clearBtn:"clearBtn",serviceDesc:"serviceDesc",timeDesc:"timeDesc",clericInfo:"clericInfo",anyCaseAdd:"anyCaseAdd",services:"services"},outputs:{onSave:"onSave",onClear:"onClear",onReset:"onReset"},decls:35,vars:9,consts:[[3,"ngClass"],[3,"church","rang","rangChanged",4,"ngIf"],["class","clr-row cursor clr-hidden-xs-down",4,"ngFor","ngForOf"],["class","clr-row cursor clr-hidden-sm-up",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","clr-row",4,"ngIf"],[3,"church","rang","rangChanged"],[1,"clr-row","cursor","clr-hidden-xs-down"],[3,"object","fieldName","description","shapes","command","changed"],[1,"clr-col-12","top-space"],[3,"text","clerics","info","clericsChanged",4,"ngIf"],[3,"text","colorChanged"],[3,"text","clerics","info","clericsChanged"],[1,"clr-row","cursor","clr-hidden-sm-up"],[3,"info","text","clerics","clericsChanged",4,"ngIf"],[3,"info","text","clerics","clericsChanged"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"clr-row"],[1,"clr-col-8"],[1,"clr-col-4"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,Aft,1,2,"app-dynamic-scheduler-rangs",1),K(2,Fft,9,24,"div",2),K(3,Nft,9,20,"div",3),R(4,"div",4)(5,"button",5),ie("click",function(){return h.onAddNewService()}),pe(6,"clr-icon",6),se(7," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),N(),K(8,Bft,3,1,"button",7),K(9,Vft,3,0,"button",8),N()(),R(10,"clr-modal",9),ie("clrModalOpenChange",function(f){return h.modalClearServicesFlag=f}),R(11,"h3",10),se(12,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043b\u0443\u0436\u0431"),N(),R(13,"div",11)(14,"p"),se(15,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043b\u0443\u0436\u0431\u044b \u0432\u0441\u0435\u0445 \u0437\u043d\u0430\u043a\u043e\u0432?"),N()(),R(16,"div",12)(17,"button",13),ie("click",function(){return h.onResetServices(),h.modalClearServicesFlag=!1}),se(18,"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"),N(),R(19,"button",13),ie("click",function(){return h.onClearServices(),h.modalClearServicesFlag=!1}),se(20,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N(),R(21,"button",14),ie("click",function(){return h.modalClearServicesFlag=!1}),se(22,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N()()(),R(23,"clr-modal",9),ie("clrModalOpenChange",function(f){return h.modalDeleteServicesFlag=f}),R(24,"h3",10),se(25,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u0443\u0436\u0431\u044b"),N(),R(26,"div",11)(27,"p"),se(28,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0431\u0443?"),N(),K(29,Uft,5,2,"div",15),N(),R(30,"div",12)(31,"button",13),ie("click",function(){return h.deleteService(h.modalDeleteService),h.modalDeleteServicesFlag=!1}),se(32,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N(),R(33,"button",14),ie("click",function(){return h.modalDeleteServicesFlag=!1}),se(34,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N()()()),2&l&&(L("ngClass",h.getClasses()),F(1),L("ngIf",!h.singleRang),F(1),L("ngForOf",h.services),F(1),L("ngForOf",h.services),F(5),L("ngIf",!h.autoSave),F(1),L("ngIf",h.clearBtn),F(1),L("clrModalOpen",h.modalClearServicesFlag),F(13),L("clrModalOpen",h.modalDeleteServicesFlag),F(6),L("ngIf",h.modalDeleteService))},dependencies:[di,vi,Sn,so,Hf,$f,Q5,Y5,_ft,jye,qye,Eft],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})),c})();class c9{constructor(){}static builder(){return new c9}}class u9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"week",[]),this.classes=d}static builder(){return new u9("",null,null,c9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setWeek(a){return this.week=a,this}}const t_e=function(c,a){return{btn:!0,"btn-primary":c,darkBtn:a}};function Hft(c,a){if(1&c){const l=ct();R(0,"button",1),ie("click",function(d){const p=Ee(l).index;return Ae(q().onToggleWeekIndex(d,p))}),pe(1,"clr-icon"),se(2),N()}if(2&c){const l=a.$implicit,h=a.index,d=q();L("ngClass",Wr(3,t_e,l,!l)),F(1),ot("shape",l?"check":"times"),F(1),gi(" ",d.dayNames[h],"")}}let $ft=(()=>{class c{get week(){return this.weekData.week}set week(l){this.weekData.week=l}get weekData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(){S(this,"data",u9.builder()),S(this,"weekChanged",new Mt),S(this,"dayNames",["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"])}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){for(;this.week.length<7;)this.week.push(!1)}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onToggleWeekIndex(l,h){l.stopPropagation(),this.week[h]=!this.week[h],this.weekChanged.emit(this.week)}onToggleAllDays(l){l.stopPropagation();let h=this.isAllDays();for(let d=0;d<this.week.length;d++)this.week[d]=!h;this.weekChanged.emit(this.week)}isAllDays(){return this.week.reduce((h,d)=>h&&d,!0)}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-week"]],inputs:{data:"data",week:"week"},outputs:{weekChanged:"weekChanged"},decls:4,vars:6,consts:[[3,"ngClass"],[3,"ngClass","click"],["shape","lightbulb"],[3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"button",1),ie("click",function(f){return h.onToggleAllDays(f)}),pe(2,"clr-icon",2),N(),K(3,Hft,3,6,"button",3),N()),2&l&&(L("ngClass",h.getClasses()),F(1),L("ngClass",Wr(3,t_e,h.isAllDays(),!h.isAllDays())),F(2),L("ngForOf",h.week))},dependencies:[di,vi,so],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})),c})();function Wft(c,a){if(1&c){const l=ct();R(0,"app-dynamic-scheduler-week",19),ie("weekChanged",function(d){return Ee(l),Ae(q(2).onWeekChanged(d))}),N()}2&c&&L("week",q().$implicit.week)}const Gft=function(){return["add-text","upload","download","times"]};function Qft(c,a){if(1&c){const l=ct();R(0,"div",15)(1,"div",16)(2,"app-dynamic-text-editor",17),ie("changed",function(d){return Ee(l),Ae(q().onTextChanged(d))}),N()(),K(3,Wft,1,1,"app-dynamic-scheduler-week",18),N()}if(2&c){const l=a.$implicit,h=q();F(2),L("object",l)("fieldName","name")("description",h.clerikDesc)("shapes",yc(6,Gft))("command",h.onCommandServiceTogglePtr),F(1),L("ngIf",h.isChurch())}}function jft(c,a){if(1&c){const l=ct();R(0,"button",20),ie("click",function(){return Ee(l),Ae(q().onSaveServices())}),pe(1,"clr-icon",21),se(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),N()}2&c&&L("clrLoading",q().submitBtnState)}function Zft(c,a){if(1&c&&(R(0,"p"),se(1),N()),2&c){const l=q();F(1),gi("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",l.modalDeleteService.name," ?")}}let qft=(()=>{class c{get clerics(){return this.clericsData.clerics}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(l){this.uiConfig.ui.calendarText.setStringValue(l)}get clericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h,d,f){S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"themes",void 0),S(this,"mathSvc",void 0),S(this,"data",void 0),S(this,"autoSave",!1),S(this,"clerikDesc","\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a"),S(this,"onSave",new Mt),S(this,"onClear",new Mt),S(this,"submitBtnState",Is.DEFAULT),S(this,"modalClearServicesFlag",!1),S(this,"modalDeleteServicesFlag",!1),S(this,"modalDeleteService",null),S(this,"onCommandServiceTogglePtr",(p,g,m)=>this.onCommandServiceToggle(p,g,m)),this.uiConfig=l,this.config=h,this.themes=d,this.mathSvc=f}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(l,h,d){if("name"==h)switch(d){case"upload":this.moveUp(l);break;case"download":this.moveDown(l);break;case"times":this.requestDeleteService(l);break;case"add-text":this.addNewAfterService(l)}}onAddNewService(){this.clerics.push(UO.builder()),this.startAutoSave()}onSaveServices(){this.onSave.emit(this.clericsData.clerics),this.submitBtnState=Is.LOADING,this.config.post(()=>{this.submitBtnState=Is.DEFAULT},2e3)}moveUp(l){let h=this.clerics.indexOf(l);h>0&&(this.clerics[h]=this.clerics[h-1],this.clerics[h-1]=l,this.startAutoSave())}moveDown(l){let h=this.clerics.indexOf(l);h+1<this.clerics.length&&(this.clerics[h]=this.clerics[h+1],this.clerics[h+1]=l,this.startAutoSave())}deleteCleric(l){if(null==l)return;let h=this.clerics.indexOf(l);h>=0&&(this.clerics.splice(h,1),this.startAutoSave())}addNewAfterService(l){let h=this.clerics.indexOf(l);h>=0&&h<this.clerics.length&&(this.clerics.splice(h+1,0,UO.builder()),this.startAutoSave())}onClearServices(){this.onClear.emit(this.clericsData.clerics),this.startAutoSave()}requestDeleteService(l){this.modalDeleteService=l,this.modalDeleteServicesFlag=!0}startAutoSave(){this.autoSave&&this.onSave.emit(this.clerics)}onTextChanged(l){this.startAutoSave()}onWeekChanged(l){this.startAutoSave()}isChurch(){return"\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a"==this.clerikDesc}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(ln),z(bo),z(Mg))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-clerics"]],inputs:{data:"data",autoSave:"autoSave",clerikDesc:"clerikDesc"},outputs:{onSave:"onSave",onClear:"onClear"},decls:31,vars:8,consts:[[3,"ngClass"],["class","clr-row cursor",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"clr-row","cursor"],[1,"clr-col-12","bottom-space"],[3,"object","fieldName","description","shapes","command","changed"],[3,"week","weekChanged",4,"ngIf"],[3,"week","weekChanged"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,Qft,4,7,"div",1),R(2,"div",2)(3,"button",3),ie("click",function(){return h.onAddNewService()}),pe(4,"clr-icon",4),se(5," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),N(),K(6,jft,3,1,"button",5),R(7,"button",6),ie("click",function(){return h.modalClearServicesFlag=!0}),pe(8,"clr-icon",7),se(9," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()()(),R(10,"clr-modal",8),ie("clrModalOpenChange",function(f){return h.modalClearServicesFlag=f}),R(11,"h3",9),se(12),N(),R(13,"div",10)(14,"p"),se(15,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0435\u0441\u044c \u0441\u043f\u0438\u0441\u043e\u043a?"),N()(),R(16,"div",11)(17,"button",12),ie("click",function(){return h.onClearServices(),h.modalClearServicesFlag=!1}),se(18,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N(),R(19,"button",13),ie("click",function(){return h.modalClearServicesFlag=!1}),se(20,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N()()(),R(21,"clr-modal",8),ie("clrModalOpenChange",function(f){return h.modalDeleteServicesFlag=f}),R(22,"h3",9),se(23),N(),R(24,"div",10),K(25,Zft,2,1,"p",14),N(),R(26,"div",11)(27,"button",12),ie("click",function(){return h.deleteCleric(h.modalDeleteService),h.modalDeleteServicesFlag=!1}),se(28,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N(),R(29,"button",13),ie("click",function(){return h.modalDeleteServicesFlag=!1}),se(30,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N()()()),2&l&&(L("ngClass",h.getClasses()),F(1),L("ngForOf",h.clerics),F(5),L("ngIf",!h.autoSave),F(4),L("clrModalOpen",h.modalClearServicesFlag),F(2),gi("\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 ",h.isChurch()?"\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432":"\u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0439",""),F(9),L("clrModalOpen",h.modalDeleteServicesFlag),F(2),gi("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438 ",h.isChurch()?"\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0430":"\u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f",""),F(2),L("ngIf",h.modalDeleteService))},dependencies:[di,vi,Sn,so,Hf,$f,Q5,Y5,jye,$ft],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})),c})();function Xft(c,a){if(1&c){const l=ct();R(0,"clr-radio-wrapper")(1,"input",37),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).currentSettingsName=d)}),N(),R(2,"label"),se(3),N()()}if(2&c){const l=a.$implicit,h=q(2);F(1),L("name","settings")("value",l.name)("ngModel",h.currentSettingsName),F(2),Ht(l.name)}}function Yft(c,a){if(1&c){const l=ct();R(0,"button",38),ie("click",function(d){return Ee(l),Ae(q(2).onDeleteCurrentSettings(d))}),se(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c "),N()}}const Kft=function(){return{alert:!0,"alert-warning":!1,"alert-success":!0,"top-space":!1}};function Jft(c,a){if(1&c){const l=ct();R(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25),pe(5,"clr-icon",26),N(),R(6,"span",27),se(7),N()()()(),R(8,"div",28)(9,"form",29)(10,"clr-radio-container",30),K(11,Xft,4,4,"clr-radio-wrapper",4),N()(),R(12,"div",31)(13,"div",32)(14,"button",33),ie("click",function(d){return Ee(l),Ae(q().onSave(d))}),se(15,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),N()(),R(16,"div",32)(17,"button",33),ie("click",function(d){return Ee(l),Ae(q().onExport(d))}),se(18,"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 "),N()(),R(19,"div",32)(20,"label",34)(21,"input",35),ie("change",function(d){return Ee(l),Ae(q().onImport(d))}),N(),se(22," \u0418\u043c\u043f\u043e\u0440\u0442 "),N()(),R(23,"div",32),K(24,Yft,2,0,"button",36),N()()()()}if(2&c){const l=q();F(1),L("ngClass",yc(5,Kft)),F(4),ot("shape",l.settings.length?"check-circle":"help-info"),F(2),gi("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b: ",l.settings.length?"":"\u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",""),F(4),L("ngForOf",l.settings),F(13),L("ngIf",l.settings.length)}}function ept(c,a){if(1&c){const l=ct();R(0,"clr-accordion-content")(1,"app-dynamic-scheduler-clerics",40),ie("onSave",function(d){return Ee(l),Ae(q(2).onSaveClerics(d))})("onClear",function(d){return Ee(l),Ae(q(2).onClearClerics(d))}),N()()}if(2&c){const l=q(2);F(1),L("data",l.clerics)("autoSave",!0)("clerikDesc",l.isState()?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a")}}function tpt(c,a){if(1&c){const l=ct();R(0,"clr-accordion-content")(1,"app-dynamic-scheduler-services",41),ie("onSave",function(d){return Ee(l),Ae(q(2).onSaveServices(d))})("onClear",function(d){return Ee(l),Ae(q(2).onClearServices(d,!0))})("onReset",function(d){return Ee(l),Ae(q(2).onClearServices(d,!1))}),N()()}if(2&c){const l=q(2);F(1),L("data",l.services)("clerics",l.isState()?l.clerics.clerics:null)("clericInfo",l.isState()?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u043b\u0443\u0436\u0438\u0442")("autoSave",!0)("serviceDesc",l.isState()?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")}}function npt(c,a){if(1&c){const l=ct();R(0,"div",77)(1,"app-dynamic-scheduler-rangs",78),ie("rangChanged",function(d){return Ee(l),Ae(q(3).onSelectDayRang(d))}),N()()}if(2&c){const l=q(3);F(1),L("rang",l.dayRang)}}function ipt(c,a){if(1&c){const l=ct();R(0,"div",48)(1,"app-dynamic-scheduler-prazdniki",79),ie("onSelected",function(d){return Ee(l),Ae(q(3).onSelectPrazdnik(d))}),N()()}if(2&c){const l=q(3);F(1),L("data",l.prazdnikiData)}}function rpt(c,a){if(1&c){const l=ct();R(0,"div",47)(1,"div",48)(2,"div",28)(3,"app-dynamic-scheduler-rangs",78),ie("rangChanged",function(d){return Ee(l),Ae(q(3).onSelectDayRang(d))}),N()(),R(4,"div",80)(5,"app-dynamic-scheduler-prazdniki",79),ie("onSelected",function(d){return Ee(l),Ae(q(3).onSelectPrazdnik(d))}),N()()()()}if(2&c){const l=q(3);F(3),L("rang",l.dayRang),F(2),L("data",l.prazdnikiData)}}function spt(c,a){if(1&c){const l=ct();R(0,"div",47)(1,"div",48)(2,"form",49)(3,"div",50)(4,"textarea",81),ie("ngModelChange",function(d){return Ae(Ee(l).$implicit.text=d)}),N()(),R(5,"span",52),se(6),N()()()()}if(2&c){const l=a.$implicit;F(4),L("ngModel",l.text),F(2),Ht(l.info)}}function opt(c,a){if(1&c){const l=ct();R(0,"div",47)(1,"div",48)(2,"div",28)(3,"app-dynamic-scheduler-rangs",78),ie("rangChanged",function(d){return Ee(l),Ae(q(3).onSelectDayRang(d))}),N()(),R(4,"div",82)(5,"app-dynamic-scheduler-prazdniki",79),ie("onSelected",function(d){return Ee(l),Ae(q(3).onSelectPrazdnik(d))}),N()()()()}if(2&c){const l=q(3);F(3),L("rang",l.dayRang),F(2),L("data",l.prazdnikiData)}}function apt(c,a){if(1&c){const l=ct();R(0,"div",47)(1,"div",48)(2,"form",49)(3,"div",50)(4,"textarea",83),ie("ngModelChange",function(d){return Ae(Ee(l).$implicit.text=d)}),N()(),R(5,"span",52),se(6),N()()()()}if(2&c){const l=a.$implicit;F(4),L("ngModel",l.text),F(2),Ht(l.info)}}function lpt(c,a){if(1&c){const l=ct();R(0,"div",47)(1,"div",48)(2,"form",49)(3,"div",50)(4,"textarea",84),ie("ngModelChange",function(d){return Ae(Ee(l).$implicit.text=d)}),N()(),R(5,"span",52),se(6),N()()()()}if(2&c){const l=a.$implicit;F(4),L("ngModel",l.text),F(2),Ht(l.info)}}function cpt(c,a){1&c&&pe(0,"app-svg-js-image",85),2&c&&L("data",q(3).getMainPage(!1).imageData)}function upt(c,a){1&c&&pe(0,"app-svg-js-image",85),2&c&&L("data",q(3).getMainPage(!1).imageData)}function hpt(c,a){if(1&c){const l=ct();R(0,"clr-accordion-content")(1,"div",42)(2,"div",43)(3,"div",44)(4,"span")(5,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarChanged(d))}),N()()()(),R(6,"div",46)(7,"div",47)(8,"div",48)(9,"form",49)(10,"div",50)(11,"textarea",51),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).textDay.text=d)}),N()(),R(12,"span",52),se(13),N()()()()(),R(14,"div",53)(15,"div",47)(16,"div",48)(17,"form",49)(18,"div",50)(19,"textarea",54),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).textHoliday.text=d)}),N()(),R(20,"span",52),se(21),N()()()()(),R(22,"div",48)(23,"app-dynamic-scheduler-services",55),ie("onSave",function(d){return Ee(l),Ae(q(2).onSaveDayServices(d))})("onClear",function(d){return Ee(l),Ae(q(2).onClearDayServices(d))}),N()()(),R(24,"div",56)(25,"div",48)(26,"div",44)(27,"span")(28,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarChanged(d))}),N()()()(),R(29,"div",43)(30,"div",47)(31,"div",48)(32,"form",49)(33,"div",50)(34,"textarea",57),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).textDay.text=d)}),N()(),R(35,"span",52),se(36),N()()()()(),R(37,"div",43)(38,"div",47)(39,"div",48)(40,"form",49)(41,"div",50)(42,"textarea",58),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).textHoliday.text=d)}),N()(),R(43,"span",52),se(44),N()()()()(),R(45,"div",48)(46,"app-dynamic-scheduler-services",59),ie("onSave",function(d){return Ee(l),Ae(q(2).onSaveDayServices(d))})("onClear",function(d){return Ee(l),Ae(q(2).onClearDayServices(d))}),N()()(),R(47,"div",60)(48,"div",48)(49,"div",44)(50,"span")(51,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarChanged(d))}),N()()()(),R(52,"div",48)(53,"div",47)(54,"div",48)(55,"form",49)(56,"div",50)(57,"textarea",61),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).textDay.text=d)}),N()(),R(58,"span",52),se(59),N()()()()(),R(60,"div",48)(61,"div",47)(62,"div",48)(63,"form",49)(64,"div",50)(65,"textarea",62),ie("ngModelChange",function(d){return Ee(l),Ae(q(2).textHoliday.text=d)}),N()(),R(66,"span",52),se(67),N()()()()(),R(68,"div",48)(69,"app-dynamic-scheduler-services",59),ie("onSave",function(d){return Ee(l),Ae(q(2).onSaveDayServices(d))})("onClear",function(d){return Ee(l),Ae(q(2).onClearDayServices(d))}),N()(),K(70,npt,2,1,"div",63),K(71,ipt,2,1,"div",64),N(),R(72,"div",65)(73,"div",66),K(74,rpt,6,2,"div",67),K(75,spt,7,2,"div",68),R(76,"div",69)(77,"div",48)(78,"div",44)(79,"span")(80,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarStartDateChanged(d))}),N()()()(),R(81,"div",48)(82,"span",52),se(83,"\u041d\u0430\u0447\u0430\u043b\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430"),N()(),R(84,"div",48)(85,"div",44)(86,"span")(87,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarEndDateChanged(d))}),N()()()(),R(88,"div",48)(89,"span",52),se(90,"\u041a\u043e\u043d\u0435\u0446 \u043f\u0435\u0440\u0438\u043e\u0434\u0430"),N()(),R(91,"div",48)(92,"button",70),ie("click",function(){return Ee(l),Ae(q(2).modalClearSchedulerFlag=!0)}),se(93,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()()()(),R(94,"div",71),K(95,opt,6,2,"div",67),K(96,apt,7,2,"div",68),R(97,"div",69)(98,"div",48)(99,"div",44)(100,"span")(101,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarStartDateChanged(d))}),N()()()(),R(102,"div",48)(103,"span",52),se(104,"\u041d\u0430\u0447\u0430\u043b\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430"),N()(),R(105,"div",48)(106,"div",44)(107,"span")(108,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarEndDateChanged(d))}),N()()()(),R(109,"div",48)(110,"span",52),se(111,"\u041a\u043e\u043d\u0435\u0446 \u043f\u0435\u0440\u0438\u043e\u0434\u0430"),N()(),R(112,"div",48)(113,"button",72),ie("click",function(){return Ee(l),Ae(q(2).modalClearSchedulerFlag=!0)}),se(114,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()()()(),R(115,"div",73),K(116,lpt,7,2,"div",68),R(117,"div",69)(118,"div",48)(119,"div",44)(120,"span")(121,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarStartDateChanged(d))}),N()()()(),R(122,"div",48)(123,"span",52),se(124,"\u041d\u0430\u0447\u0430\u043b\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430"),N()(),R(125,"div",48)(126,"div",44)(127,"span")(128,"app-dynamic-scheduler-calendar",45),ie("change",function(d){return Ee(l),Ae(q(2).onCalendarEndDateChanged(d))}),N()()()(),R(129,"div",48)(130,"span",52),se(131,"\u041a\u043e\u043d\u0435\u0446 \u043f\u0435\u0440\u0438\u043e\u0434\u0430"),N()(),R(132,"div",48)(133,"button",72),ie("click",function(){return Ee(l),Ae(q(2).modalClearSchedulerFlag=!0)}),se(134,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()()()(),R(135,"div",74),K(136,cpt,1,1,"app-svg-js-image",75),N(),R(137,"div",76),K(138,upt,1,1,"app-svg-js-image",75),N()()()}if(2&c){const l=q(2);F(5),L("showDates",!0)("uniqueDateString",l.currentDate)("useUniqueDate",!0),F(6),L("ngModel",l.textDay.text),F(2),Ht(l.textDay.info),F(6),L("ngModel",l.textHoliday.text),F(2),Ht(l.textHoliday.info),F(2),L("data",l.dayServices)("singleRang",!0)("clerics",l.clerics.clerics)("autoSave",!0)("clearBtn",!1)("serviceDesc",l.isState()?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")("clericInfo",l.isState()?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u043b\u0443\u0436\u0438\u0442"),F(5),L("showDates",!0)("uniqueDateString",l.currentDate)("useUniqueDate",!0),F(6),L("ngModel",l.textDay.text),F(2),Ht(l.textDay.info),F(6),L("ngModel",l.textHoliday.text),F(2),Ht(l.textHoliday.info),F(2),L("data",l.dayServices)("singleRang",!0)("vertical",!0)("clerics",l.clerics.clerics)("autoSave",!0)("clearBtn",!1)("serviceDesc",l.isState()?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")("clericInfo",l.isState()?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u043b\u0443\u0436\u0438\u0442"),F(5),L("showDates",!0)("uniqueDateString",l.currentDate)("useUniqueDate",!0),F(6),L("ngModel",l.textDay.text),F(2),Ht(l.textDay.info),F(6),L("ngModel",l.textHoliday.text),F(2),Ht(l.textHoliday.info),F(2),L("data",l.dayServices)("singleRang",!0)("vertical",!0)("clerics",l.clerics.clerics)("autoSave",!0)("clearBtn",!1)("serviceDesc",l.isState()?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435":"\u0421\u043b\u0443\u0436\u0431\u0430")("clericInfo",l.isState()?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u043b\u0443\u0436\u0438\u0442"),F(1),L("ngIf",!l.isState()),F(1),L("ngIf",!l.isState()),F(3),L("ngIf",!l.isState()),F(1),L("ngForOf",l.editors),F(5),L("showDates",!0)("uniqueDateString",l.startDate)("useUniqueDate",!0),F(7),L("showDates",!0)("uniqueDateString",l.endDate)("useUniqueDate",!0),F(8),L("ngIf",!l.isState()),F(1),L("ngForOf",l.editors),F(5),L("showDates",!0)("uniqueDateString",l.startDate)("useUniqueDate",!0),F(7),L("showDates",!0)("uniqueDateString",l.endDate)("useUniqueDate",!0),F(8),L("ngForOf",l.editors),F(5),L("showDates",!0)("uniqueDateString",l.startDate)("useUniqueDate",!0),F(7),L("showDates",!0)("uniqueDateString",l.endDate)("useUniqueDate",!0),F(8),L("ngIf",!(null==l.previewPage||!l.previewPage.imageData)),F(2),L("ngIf",!(null==l.previewPage||!l.previewPage.imageData))}}function dpt(c,a){if(1&c&&(R(0,"clr-accordion",21)(1,"clr-accordion-panel")(2,"clr-accordion-title"),se(3),N(),K(4,ept,2,3,"clr-accordion-content",39),N(),R(5,"clr-accordion-panel")(6,"clr-accordion-title"),se(7),N(),K(8,tpt,2,5,"clr-accordion-content",39),N(),R(9,"clr-accordion-panel")(10,"clr-accordion-title"),se(11,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),N(),K(12,hpt,139,71,"clr-accordion-content",39),N()()),2&c){const l=q();F(3),Ht(l.isState()?"\u041c\u0435\u0441\u0442\u043e":"\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438"),F(4),Ht(l.isState()?"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f":"\u0421\u043b\u0443\u0436\u0431\u044b")}}const h9=function(c,a){return{"clr-col-6":c,"clr-col-12":a}};function fpt(c,a){if(1&c){const l=ct();R(0,"div",86)(1,"button",87),ie("click",function(){return Ee(l),Ae(q().onCopyPermanentLink())}),se(2," \u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 "),N()()}if(2&c){const l=q();L("ngClass",Wr(1,h9,!!l.permanentLink,!l.permanentLink))}}function ppt(c,a){if(1&c){const l=ct();R(0,"div",86)(1,"button",87),ie("click",function(){return Ee(l),Ae(q().onSchedulerTypeToggle())}),se(2),N()()}if(2&c){const l=q();L("ngClass",Wr(2,h9,!!l.permanentLink,!l.permanentLink)),F(2),gi(" ",2==l.fullSchedulerInfoType?"\u0428\u0442\u0430\u0442\u043d\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":1==l.fullSchedulerInfoType?"\u041f\u043e\u043b\u043d\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"," ")}}function gpt(c,a){if(1&c){const l=ct();R(0,"div",86)(1,"button",87),ie("click",function(){return Ee(l),Ae(q().onStartEditScheduler())}),se(2," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c "),N()()}if(2&c){const l=q();L("ngClass",Wr(1,h9,!!l.permanentLink,!l.permanentLink))}}function mpt(c,a){if(1&c){const l=ct();R(0,"app-svg-js-image",88),ie("pagesCount",function(d){return Ee(l),Ae(q().setPagesCount(d))})("svg",function(d){Ee(l);const f=q();return Ae(f.saveSvg(d,f.getMainPage()))}),N()}2&c&&L("data",q().getMainPage().imageData)}function vpt(c,a){if(1&c){const l=ct();R(0,"div")(1,"app-svg-js-image",89),ie("svg",function(d){const p=Ee(l).$implicit;return Ae(q().saveSvg(d,p))}),N()()}if(2&c){const l=a.$implicit;F(1),L("data",l.imageData)}}function ypt(c,a){if(1&c){const l=ct();R(0,"button",20),ie("click",function(){return Ee(l),Ae(q().onSaveCurrentSettings())}),se(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),N()}}class Wg{constructor(a,l,h){S(this,"info",void 0),S(this,"onChange",void 0),S(this,"sText",""),this.info=l,this.onChange=h}static builder(){return new Wg("","",null)}changed(){this.onChange&&this.onChange()}get text(){return this.sText}set text(a){this.setText(a)}setText(a,l=!0){return this.sText!=a&&(this.sText=a,l&&this.changed()),this}setInfo(a){return this.info=a,this}setOnChange(a){return this.onChange=a,this}}class sv{constructor(a,l,h,d,f,p,g,m){S(this,"\u0440\u0430\u043d\u0433",void 0),S(this,"\u0434\u0435\u043d\u044c",void 0),S(this,"\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a",void 0),S(this,"\u0441\u043b\u0443\u0436\u0431\u0430",void 0),S(this,"\u0432\u0440\u0435\u043c\u044f",void 0),S(this,"\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",void 0),S(this,"\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438",void 0),S(this,"\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431",void 0),this.\u0440\u0430\u043d\u0433=a,this.\u0434\u0435\u043d\u044c=l,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=h,this.\u0441\u043b\u0443\u0436\u0431\u0430=d,this.\u0432\u0440\u0435\u043c\u044f=f,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=p,this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=g,this.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431=m}static \u043d\u043e\u0432\u044b\u0439(){return new sv(1,"","","","",[],"","")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a){return this.\u0440\u0430\u043d\u0433=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(a){return this.\u0434\u0435\u043d\u044c=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(a){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(a){return this.\u0441\u043b\u0443\u0436\u0431\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(a){return this.\u0432\u0440\u0435\u043c\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(a){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(a){return this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(a){return this.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431=a,this}}class i_e{constructor(a,l){S(this,"config",void 0),S(this,"onUpdate",void 0),S(this,"id",0),S(this,"calling",0),this.config=a,this.onUpdate=l}nextId(){return++this.id,this}changed(){return this.calling&&this.requestForUpdate(),this}requestForUpdate(){this.nextId();let a=this.id;if(!this.calling)return++this.calling,this.config.post(()=>{a==this.id&&this.onUpdate?(this.onUpdate(),--this.calling):(--this.calling,this.requestForUpdate())},3e3),this}}var jo=(()=>(function(c){c[c.Short=0]="Short",c[c.Full=1]="Full",c[c.State=2]="State"}(jo||(jo={})),jo))();class Gg{constructor(a,l){S(this,"imageData",void 0),S(this,"pageIndex",void 0),this.imageData=a,this.pageIndex=l}static builder(){return new Gg(null,-1)}setImageData(a){return this.imageData=a,this}setPageIndex(a){return this.pageIndex=a,this}}let _pt=(()=>{class c{get currentSettingsName(){return this.uiConfig.ui.schedulerCurrentSettingsName.getStringValue()}set currentSettingsName(l){this.uiConfig.ui.schedulerCurrentSettingsName.setStringValue(l),this.setCurrentSettings(l)}get formulaText(){return this.uiConfig.ui.schedulerSourceText.getStringValue()}set formulaText(l){this.uiConfig.ui.schedulerSourceText.setStringValue(l)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}constructor(l,h,d,f,p,g,m,v,y){S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"themes",void 0),S(this,"mathSvc",void 0),S(this,"ks",void 0),S(this,"calendarSettingsSvc",void 0),S(this,"calendarPrazdnikiSvc",void 0),S(this,"calendarSchedulerSvc",void 0),S(this,"zipSvc",void 0),S(this,"data",void 0),S(this,"mainPage",Gg.builder()),S(this,"extraPages",[]),S(this,"previewPage",Gg.builder()),S(this,"previewExtraPages",[]),S(this,"days",[]),S(this,"clerics",R3.builder()),S(this,"services",rv.builder()),S(this,"dayServices",rv.builder()),S(this,"dayRang",1),S(this,"fullSchedulerInfoType",jo.Full),S(this,"textDay",Wg.builder().setText("1{\u0437}").setInfo("\u0414\u0435\u043d\u044c").setOnChange(()=>this.onTextChanged())),S(this,"textHoliday",Wg.builder().setText("\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}").setInfo("\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a").setOnChange(()=>this.onTextChanged())),S(this,"textService",Wg.builder().setText("\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421").setInfo("\u0421\u043b\u0443\u0436\u0431\u0430").setOnChange(()=>this.onTextChanged())),S(this,"textTime",Wg.builder().setText("8.40{\u0437}\n{1}\n17.00").setInfo("\u0412\u0440\u0435\u043c\u044f").setOnChange(()=>this.onTextChanged())),S(this,"textHeader",Wg.builder().setText("\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}").setInfo("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a").setOnChange(()=>this.onTextChanged())),S(this,"textFooter",Wg.builder().setText("{1}\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223").setInfo("\u041f\u043e\u0434\u0432\u0430\u043b").setOnChange(()=>this.onTextChanged())),S(this,"currentDate","01.02.2022"),S(this,"startDate","01.02.2022"),S(this,"endDate","28.02.2022"),S(this,"prazdnikiData",P3.builder()),S(this,"editors",[this.textHeader,this.textFooter]),S(this,"requestForGeneratingScheduler",!1),S(this,"generatingScheduler",!1),S(this,"schedulerPagesCount",0),S(this,"shortScheduler","01.01.2022\n==\n{1}\n==\n{1}"),S(this,"fullScheduler","01.01.2022\n==\n{1}\n==\n{1}"),S(this,"permanentLink",""),S(this,"updater",null),S(this,"dateUpdater",null),S(this,"modalClearSchedulerFlag",!1),S(this,"modalSaveSettingsFlag",!1),S(this,"modalDeleteSettingsFlag",!1),S(this,"modalAddSettingsFlag",!1),S(this,"settings",[]),S(this,"pCurrentSettingsName",new hft("\u0418\u043c\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a","\u0438\u043c\u044f",this,"currentSettingsName",null)),S(this,"svgs",null),S(this,"readonly",!0),S(this,"onTextChangedEnabled",!0),this.uiConfig=l,this.config=h,this.themes=d,this.mathSvc=f,this.ks=p,this.calendarSettingsSvc=g,this.calendarPrazdnikiSvc=m,this.calendarSchedulerSvc=v,this.zipSvc=y;let _=new Date;this.currentDate=_.getDate()+"."+(_.getMonth()+1)+"."+_.getFullYear(),this.onUpdateStartEndDays(),this.updater=new i_e(this.config,()=>this.generateAllSchedulers()),this.dateUpdater=new i_e(this.config,()=>this.modalClearSchedulerFlag=!0)}onUpdateStartEndDays(){let l=this.getDateFromString(this.currentDate);this.startDate="1."+(l.getMonth()+1)+"."+l.getFullYear();let h=this.calendarSchedulerSvc.getMonthsDaysCount(l.getFullYear(),l.getMonth());this.endDate=h+"."+(l.getMonth()+1)+"."+l.getFullYear()}currentDayOfMonth(){return+this.currentDate.split(".")[0]}startDayOfMonth(){return+this.startDate.split(".")[0]}endDayOfMonth(){return+this.endDate.split(".")[0]}ngOnInit(){this.readonly=!0}ngOnDestroy(){}ngAfterViewInit(){this.onLoadSettingsDefault()}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}setPagesCount(l){this.extraPages=[];for(let h=1;h<l;h++)this.extraPages.push(Gg.builder().setPageIndex(h).setImageData(Ha.builder().setScene("/scenes/scheduler.scene.txt").setGenName("Js").setType(2==this.fullSchedulerInfoType?297210:1).setSvgWidth(2==this.fullSchedulerInfoType?297:210).setSvgHeight(2==this.fullSchedulerInfoType?210:297).setLogoText(2==this.fullSchedulerInfoType?"\u0448\u0442\u0430\u0442\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":1==this.fullSchedulerInfoType?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setSchedulerText(this.createScheduler(!0)).setStartPageIndex(h).setShowFooter(!1)));this.schedulerPagesCount=l}onCalendarStartDateChanged(l,h=!0){if(this.startDate==l)return;let d=this.startDate.split("."),f=l.split(".");this.startDate=l,h&&this.config.post(()=>{this.updateTextHeader(),this.startEditDate(),this.requestClearScheduler(d[1]!=f[1]||d[2]!=f[2])},10)}onCalendarEndDateChanged(l,h=!0){if(this.endDate==l)return;let d=this.endDate.split("."),f=l.split(".");this.endDate=l,h&&this.config.post(()=>{this.updateTextHeader(),this.startEditDate(),this.requestClearScheduler(d[1]!=f[1]||d[2]!=f[2])},10)}onCalendarChanged(l){if(this.currentDate==l)return;let h=this.currentDate.split("."),d=l.split(".");this.currentDate=l,this.onUpdateStartEndDays(),this.config.post(()=>{this.startEditDate(),this.requestClearScheduler(h[1]!=d[1]||h[2]!=d[2])},10)}onTextChanged(l=!1){if(!this.onTextChangedEnabled)return;let h=this.days[this.currentDayOfMonth()-1];h&&(h.\u0440\u0430\u043d\u0433=this.dayRang,h.\u0434\u0435\u043d\u044c=this.textDay.text,h.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=this.textHoliday.text,h.\u0441\u043b\u0443\u0436\u0431\u0430=this.textService.text,h.\u0432\u0440\u0435\u043c\u044f=this.textTime.text,this.onDayServicesSync()),l?this.updater&&this.updater.onUpdate():this.updater&&this.updater.requestForUpdate()}createScheduler(l=!1){return l?this.fullScheduler:this.shortScheduler}generateAllSchedulers(){this.generatingScheduler?this.requestForGeneratingScheduler=!0:(this.permanentLink="",this.generatingScheduler=!0,this.shortScheduler=this.generateSchedulers(),this.fullScheduler=this.generateSchedulers(!0),this.uiConfig.ui.schedulerText.setStringValue(this.fullScheduler),this.svgs=[],this.schedulerPagesCount=0,this.extraPages=[],this.mainPage=Gg.builder(),this.getMainPage(),this.previewPage=Gg.builder(),this.getMainPage(!1),this.createPermanentLink())}convertAllClericsByColors(l,h){let d=h.split("\n").map(f=>f.trim());return l.split("\n").map(f=>f.trim()).map((f,p)=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(f,"")+d[p]).join("\n")}convertAllClerics(l){let h=["\u043a","\u0441","\u0437","\u0444","\u043f","\u043c","\u043b","\u0440"];return l.split("\n").map(d=>d.trim()).map(d=>{let f=d.split(",").map(g=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(g,"")),p=0;return f.length&&this.clerics.clerics.forEach((g,m)=>{g.name==f[0]&&(p=m)}),f.length>1&&f.length==this.clerics.clerics.length?"\u0412\u0421\u0415{\u043a}":this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(d,"")+"{"+h[(1+p)%h.length]+"}"}).join("\n")}removeUnneededServices(l,h=""){let d=(h||l).split("\n");return l.split("\n").map(f=>f.trim()).filter((f,p)=>this.fullSchedulerInfoType==jo.Full||!d[p].includes("{\u0442}")).join("\n")}generateSchedulers(l=!1,h=!0,d=!1){let f=`${this.currentDate}|${this.startDate}|${this.endDate}`,p="\n==\n",g="\n--\n";if(f+=p,f+=this.fullSchedulerInfoType,f+=p,f+=this.textHeader.text,f+=p,l)if(this.fullSchedulerInfoType==jo.State){let m=this.getDateFromString(this.startDate),v=this.getDateFromString(this.endDate),y=_=>m.getDate()<=_&&_<=v.getDate();f+=this.days.map((_,b)=>{let C=y(b+1);return d&&!C||!C&&h||h&&!_.\u0441\u043b\u0443\u0436\u0431\u0430?"":(C?_.\u0440\u0430\u043d\u0433:"")+g+(C?_.\u0434\u0435\u043d\u044c:"")+g+(C?this.packWithSources(this.removeUnneededServices(_.\u0432\u0440\u0435\u043c\u044f),d):"")+g+(C?this.packWithSources(this.removeUnneededServices(_.\u0441\u043b\u0443\u0436\u0431\u0430),d):"")+g+(C?this.packWithSources(this.removeUnneededServices(2==this.fullSchedulerInfoType?this.convertAllClericsByColors(_.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438,this.getServicesColorsText(_.\u0441\u043b\u0443\u0436\u0431\u0430)):this.convertAllClerics(_.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438),_.\u0432\u0440\u0435\u043c\u044f),d):"")+g+g+(C?_.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431:"")+p}).reduce((_,b)=>_+b,"")}else f+=this.days.map(m=>h&&!m.\u0441\u043b\u0443\u0436\u0431\u0430?"":m.\u0440\u0430\u043d\u0433+"\n---------------------\n"+m.\u0434\u0435\u043d\u044c+"\n---------------------\n"+m.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a.toUpperCase()+"\n---------------------\n"+this.removeUnneededServices(m.\u0441\u043b\u0443\u0436\u0431\u0430)+"\n---------------------\n"+this.removeUnneededServices(m.\u0432\u0440\u0435\u043c\u044f)+"\n---------------------\n"+this.removeUnneededServices(this.convertAllClerics(m.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438),m.\u0432\u0440\u0435\u043c\u044f)+"\n---------------------\n"+m.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431+"\n=====================\n").reduce((m,v)=>m+v,"");else this.fullSchedulerInfoType==jo.State?(f+=this.dayRang,f+="\n---------------------\n",f+=this.textDay.text,f+="\n---------------------\n",f+=this.textTime.text,f+="\n---------------------\n",f+=this.textService.text,f+="\n---------------------\n",f+=2==this.fullSchedulerInfoType?this.getDayClericsWithServiceColors():this.convertAllClerics(this.getDayClericsWithServiceColors()),f+="\n---------------------\n",f+=this.textHoliday.text,f+="\n=====================\n"):(f+=this.dayRang,f+="\n---------------------\n",f+=this.textDay.text,f+="\n---------------------\n",f+=this.textHoliday.text,f+="\n---------------------\n",f+=this.textService.text,f+="\n---------------------\n",f+=this.textTime.text,f+="\n---------------------\n",f+=this.convertAllClerics(this.getDayClerics()),f+="\n=====================\n");return f+=this.textFooter.text,d&&(f+="~~\n",f+=this.generateSources()),f}parseSources(l){let h=l.split(/--+/);if(2!=h.length)return;let d=this.parserClerics(h[0]),f=this.parserServices(h[1]);this.clerics.clerics=d,this.services.services=f}unpackWithSources(l,h=!0){return h?l.split("\n").map(f=>f.trim()).map(f=>this.convertFromRefs(f)).join("\n"):l}packWithSources(l,h=!0){return h?l.split("\n").map(f=>f.trim()).map(f=>this.convertToRefs(f)).join("\n"):l}convertFromRefs(l){return this.convertFromServiceRef(this.convertFromClericsRef(l))}convertToRefs(l){return this.convertToServiceRef(this.convertToClericsRef(l))}convertFromClericsRef(l){if(!l.startsWith("c:"))return l;let h=l.split(":");if(h.length<2)return l;let d=this.clerics.clerics[+h[1]].name;return d&&h.length>2&&(d=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(d,"")+h[2]),d??l}convertToClericsRef(l){if(l.startsWith("s:")||l.startsWith("c:"))return l;let h=l,d=Nu.getTextColor(l),f=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(l,""),p=this.clerics.clerics.findIndex(g=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(g.name,"")==f);return p>=0&&(h=this.getMinText(l,`c:${p}:${d}`)),h}convertFromServiceRef(l){if(l.startsWith("!s:"))return l;let h=l.split(":");if(h.length<4)return l;let d=this.services.services[+h[1]];if(null==d)return l;let f=d[+h[2]];if(null==f)return l;let p=l;switch(h[3]){case"i":p=f.time,h.length>4&&(p=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(p,"")+h[4]);break;case"e":p=f.text,h.length>4&&(p=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(p,"")+h[4])}return p}getMinText(l,h){return l.length<h.length?l:h}convertToServiceRef(l){if(l.startsWith("s:")||l.startsWith("c:"))return l;let h=l,d=Nu.getTextColor(l),f=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(l,"");for(let p=0;p<this.services.services.length;p++){let g=this.services.services[p];for(let m=0;m<g.length;m++){let v=g[m];if(this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(v.text,"")==f)return this.getMinText(l,`s:${p}:${m}:e:${d}`);if(this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(v.time,"")==f)return this.getMinText(l,`s:${p}:${m}:i:${d}`)}}return h}generateSources(){let l=this.clericsToText(this.clerics.clerics,"==");return l+="--",l+=this.servicesToText(this.services.services,"=="),l}requestClearScheduler(l=!0){l?this.dateUpdater&&this.dateUpdater.requestForUpdate():this.dateUpdater&&this.dateUpdater.changed()}onClearScheduler(){this.calendarPrazdnikiSvc.load().then(l=>{this.onClearSchedulerRaw()})}breakLines(l,h){let f=l.split(" "),p="",g=0;for(let m=0;m<f.length;++m){g>=39&&(p+="\n",g=0);let v=f[m];v.length+g+(g>0?1:0)>39?0==g?(p+=h,p+=v,p+="\n",g=0):(p+="\n"+h,p+=v,g=v.length):(g>0?(p+=" ",g+=1):p+=h,p+=v,g+=v.length)}return p}\u0443\u0431\u0440\u0430\u0442\u044c\u0412\u0441\u0435\u041c\u0430\u0440\u043a\u0435\u0440\u044b(l){let h=/\{[a-z\u0430-\u044fA-Z\u0410-\u042f0-9]\}/g;return l.split("\n").map(d=>d.includes("\u0442")?d:d.replace(h,"")).map(d=>d.trim()).join("\n")}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(l,h){return Nu.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(l,h)}getClericsForDayOfWeek(l){return this.clerics.clerics.filter(d=>d.week[l]).map(d=>d.name).join(",")}getRangServices(l){let h=this.services.services[l-1];return null==h&&(h=[]),h}getServicesColorsText(l){return l.split("\n").map(h=>Nu.getTextColor(h)).join("\n")}getServiceColor(l,h){return l.requiredService?"{\u043f}":h}getDateFromString(l){let h=l.split(".");return new Date(+h[2],+h[1]-1,+h[0])}onClearSchedulerRaw(){let l=this.currentDate.split("."),d=+l[1],f=+l[2];this.days=[];for(let p=1;p<=31;p++){let g=new Date;if(g.setDate(1),g.setFullYear(f),g.setMonth(d-1,p),g.getMonth()+1!=d)break;let m=g.getDay(),y=p+"\n"+["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"][m],_=this.calendarPrazdnikiSvc.getPrazdnikiFor(f,d-1,p),b=_.length?_[0]:iv.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430"),C=this.isState()?m||7:m?0:6,x=this.isState()?"":b.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(C),w=this.breakLines(b.text,x),O=this.getRangServices(this.isState()?C:b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(C)),D=this.getClericsForDayOfWeek(m?m-1:m+6),T=new Date;T.setDate(1),T.setFullYear(f),T.setMonth(d-1,p+1);let M=T.getDay(),k=this.calendarPrazdnikiSvc.getPrazdnikiFor(f,T.getMonth(),T.getDate()),E=k.length?k[0]:iv.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430"),P=this.isState()?M||7:M?0:6,V=E.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(P),I=this.getRangServices(b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(P)),U=O.filter(B=>B.morningService).map(B=>B.getNormalizedText()+this.getServiceColor(B,x)).map(B=>B||"{1}").concat(I.filter(B=>!B.morningService).map(B=>B.getNormalizedText()+this.getServiceColor(B,V)).map(B=>B||"{1}")).join("\n"),$=O.filter(B=>B.morningService).map(B=>B.getNormalizedTime()+this.getServiceColor(B,x)).map(B=>B||"{1}").concat(I.filter(B=>!B.morningService).map(B=>B.getNormalizedTime()+this.getServiceColor(B,V)).map(B=>B||"{1}")).join("\n"),H=O.filter(B=>B.morningService).map(B=>this.getServiceColor(B,x)).map(B=>B||"{1}").concat(I.filter(B=>!B.morningService).map(B=>this.getServiceColor(B,V)).map(B=>B||"{1}")).join("\n"),J=O.filter(B=>B.morningService).map(B=>B.selectedClerics).map(B=>B||"{1}").concat(I.filter(B=>!B.morningService).map(B=>B.selectedClerics).map(B=>B||"{1}")).join("\n");y=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(y,x);let ee=$.split("\n").map(B=>this.\u0443\u0431\u0440\u0430\u0442\u044c\u0412\u0441\u0435\u041c\u0430\u0440\u043a\u0435\u0440\u044b(B).trim()).map(B=>B?D:"").join("\n");this.days.push(sv.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(b.rang).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(y).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(w).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(U).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f($).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(_).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(this.isState()?J:ee).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(H))}this.updateTextHeader(),this.config.post(()=>this.startEditDate(!0))}updateTextHeader(){let h=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],d=this.getDateFromString(this.currentDate),f=this.getDateFromString(this.startDate),p=this.getDateFromString(this.endDate),g="";if(this.isState()){let m=this.calendarSchedulerSvc.getMonthsDaysCount(d.getFullYear(),d.getMonth());g=f.getDate()>1||p.getDate()<m?`\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0430 ${h[d.getMonth()]} \u0441 ${f.getDate()} \u043f\u043e ${p.getDate()}`:`\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0430 ${h[d.getMonth()]}`}else g=`\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n${["\u042f \u041d \u0412 \u0410 \u0420 \u042c","\u0424 \u0415 \u0412 \u0420 \u0410 \u041b \u042c","\u041c \u0410 \u0420 \u0422","\u0410 \u041f \u0420 \u0415 \u041b \u042c","\u041c \u0410 \u0419","\u0418 \u042e \u041d \u042c","\u0418 \u042e \u041b \u042c","\u0410 \u0412 \u0413 \u0423 \u0421 \u0422","\u0421 \u0415 \u041d \u0422 \u042f \u0411 \u0420 \u042c","\u041e \u041a \u0422 \u042f \u0411 \u0420 \u042c","\u041d \u041e \u042f \u0411 \u0420 \u042c","\u0414 \u0415 \u041a \u0410 \u0411 \u0420 \u042c"][d.getMonth()]}{\u043a}`;this.textHeader.setText(g,!1)}parseScheduler(l){this.svgs=[];let h=l.split(/~~+/).map(p=>p.trim()),d=h[0].split(/==+/).map(p=>p.trim()),f=d[0].split("|");if(this.currentDate=f[0],f.length>1&&this.onCalendarStartDateChanged(f[1],!1),f.length>2&&this.onCalendarEndDateChanged(f[2],!1),h.length>1&&this.parseSources(h[1]),this.fullSchedulerInfoType=+d[1],this.textHeader.setText(d[2],!1),this.textFooter.setText(d[d.length-1],!1),this.days=[],this.fullSchedulerInfoType==jo.State){let p=this.getDateFromString(this.startDate);for(let g=1;g<p.getDate();++g)this.days.push(sv.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(0).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(""))}for(let p=3;p+1<d.length;++p){let m=d[p].split(/--+/),v=y=>this.unpackWithSources(y<m.length?m[y].trim():"");this.days.push(this.fullSchedulerInfoType==jo.State?sv.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(+v(0)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(v(1)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(v(2)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(v(3)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(v(4)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(v(5)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(v(6)):sv.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(+v(0)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(v(1)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(v(2)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(v(3)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(v(4)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(v(5)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(v(6)))}if(this.fullSchedulerInfoType==jo.State){let p=this.getDateFromString(this.endDate);for(let g=this.days.length;g<p.getDate();++g)this.days.push(sv.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(0).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a("").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431(""))}this.startEditDate()}startEditDate(l=!1){let h=this.days[this.currentDayOfMonth()-1];this.dayRang=h.\u0440\u0430\u043d\u0433,this.textDay.setText(h?h.\u0434\u0435\u043d\u044c:"",!1),this.textHoliday.setText(h?h.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a:"",!1),this.textService.setText(h?h.\u0441\u043b\u0443\u0436\u0431\u0430:"",!1),this.textTime.setText(h?h.\u0432\u0440\u0435\u043c\u044f:"",!1);let d=this.currentDate.split("."),f=+d[0],p=+d[1],g=+d[2];this.calendarPrazdnikiSvc.load().then(m=>{let v=this.calendarPrazdnikiSvc.getPrazdnikiFor(g,p-1,f);this.prazdnikiData=P3.builder().setPrazdniki(v)}),this.onDayServicesSync(),this.onTextChanged(l)}onDayServicesSync(){let l=this.days[this.currentDayOfMonth()-1],h=l.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438.split("\n").map(g=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(g,"")).map(g=>g.trim()).map(g=>"\u0412\u0421\u0415"!=g?g:this.clerics.clerics.map(m=>m.name).join(",")),d=l.\u0432\u0440\u0435\u043c\u044f.split("\n").map(g=>g.trim());this.dayServices.services=[l.\u0441\u043b\u0443\u0436\u0431\u0430.split("\n").map(g=>g.trim()).map((g,m)=>ib.builder().setText(g).setTime((g=>g<d.length?d[g]:"")(m)).setMorningService(!g.includes("{\u0432}")).setRequiredService(g.includes("{\u0442}")).setSelectedClerics((g=>g<h.length?h[g]:"")(m)).setServiceColor(Nu.getTextColor(g)))]}onPrint(){window.print()}setCurrentSettings(l){let h=this.settings.find(d=>d.name==l);h&&this.setCurrentSettingsDirect(h)}setCurrentSettingsDirect(l){this.parseScheduler(l.text)}getAllCurrentSettings(){let l={};return l.text=this.generateSchedulers(!0,!1,!0),l}settingsFromString(l){try{return JSON.parse(l)}catch{}return[]}onSaveCurrentSettings(l=!0){let h=this.getAllCurrentSettings();h.name=this.pCurrentSettingsName.value;let d=!1;for(let f=0;f<this.settings.length;f++)this.settings[f].name==h.name&&(this.settings[f]=h,d=!0);!d&&l&&this.settings.push(h),this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.modalSaveSettingsFlag=!1}onLoadSettingsDefault(){this.config.post(()=>{this.onLoadSettingsDefaultRaw()})}unpack(l){for(var h=[],d=0;d<l.length;d++){var f=l.charCodeAt(d);h.push(255&f)}return h}onLoadSettingsDefaultRaw(){this.settings=this.settingsFromString(this.uiConfig.ui.schedulerAllVariants.getStringValue());let l="",h=!1;this.settings.forEach(f=>{f.name==this.currentSettingsName&&(h=!0),!l&&f.name&&(l=f.name)}),!h&&l&&(this.currentSettingsName=l),this.onLoadClericsOrDefault(),this.onLoadServicesOrDefault();let d=()=>{this.settings&&0!=this.settings.length?this.setCurrentSettings(this.currentSettingsName):this.onClearScheduler()};if(pageRequestedDoc){let f=p=>{this.config.addAlert(Pr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f (\u0431\u0438\u0442\u0430\u044f) \u0441\u0441\u044b\u043b\u043a\u0430.","OK",15)),d()};try{let p=atob(this.decodeUri(pageRequestedDoc)),g=new Uint8Array(this.unpack(p));this.zipSvc.unzip(g,{},(m,v)=>{"t.txt"==m&&v.files[m].async("string").then(y=>{this.config.post(()=>{this.setCurrentSettingsDirect(JSON.parse(y))})})},f)}catch(p){f(p)}}else d()}onLoadEmptyServices(){this.services=rv.builder().setServices([]),this.onSaveServices(this.services.services)}onLoadServicesOrDefault(l=!1){let h=this.uiConfig.ui.schedulerServices.getStringValue();(l||!h)&&(h="\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415|17.00|\u0432\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.|8.00|\u0443\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|8.40|\u0443\n\u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n    "),this.services=rv.builder().setServices(this.parserServices(h)),this.onSaveServices(this.services.services)}onLoadClericsOrDefault(l=!1){let h=this.uiConfig.ui.schedulerClerics.getStringValue();(l||!h)&&(h="\u043e. \u0418\u043c\u044f\u0420\u0435\u043a|false|true|false|true|false|true|true"),this.clerics=R3.builder().setClerics(this.parserClerics(h))}onDeleteCurrentSettings(l){this.modalDeleteSettingsFlag=!0}onDeleteCurrentSettingsDirect(l){let h=this.pCurrentSettingsName.value;for(let d=0;d<this.settings.length;d++)if(this.settings[d].name==h){this.settings.splice(d,1);break}this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.currentSettingsName="",this.onLoadSettingsDefault(),this.modalDeleteSettingsFlag=!1}onAddAllSettingsDirect(l){this.calendarSettingsSvc.getNames("","scheduler","/scheduler").then(h=>{let d=h.names;if(this.settings=[],null!=d&&d.length>0&&d[0].names.length>0){let f=p=>{p<d.length?this.calendarSettingsSvc.getSource(d[p].names[0],"").then(g=>{if(g){let m={};m.text=g,m.name=d[p].name,this.settings.push(m)}f(p+1)}):(this.onSaveCurrentSettings(!1),this.onLoadSettingsDefault(),this.modalAddSettingsFlag=!1)};f(0)}else this.modalAddSettingsFlag=!1})}onSave(l){this.modalSaveSettingsFlag=!0}onExport(l){let h=this.getAllCurrentSettings().text;const d=(new Date).toISOString().split("T")[0];let f="txt";if(this.config.isPlatformAndroid())this.ks.addTempFile(`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${f}`,h).then(p=>{xh.startDownload(p.fileName,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${d}.${f}`)});else{const p=new TextEncoder,g=new Blob([p.encode(h)],{type:"octet/stream"});xh.saveData(g,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${d}.${f}`)}}onImport(l){0!==l.target.files.length&&this.onImportFile(l.target.files[0])}onImportFile(l){if(!l)return;const h=new FileReader;h.onload=d=>{try{if(!h.result)throw new Error("FileReader is null.");let f=h.result.toString();this.parseScheduler(f)}catch(f){this.config.addAlert(Pr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+f,"OK",30))}},h.readAsText(l)}onSaveSvg(l=1){null==this.svgs||this.svgs.filter(h=>!!h).length==this.extraPages.length+1||l<=3&&this.config.post(()=>this.onSaveSvg(l+1),1e3)}saveSvg(l,h){if(!this.extraPages.includes(h)&&h!=this.getMainPage()||null==this.svgs)return;let f=h.pageIndex;for(;f+1>this.svgs.length;)this.svgs.push("");this.svgs[f]=l,this.svgs.filter(p=>!!p).length>=this.schedulerPagesCount&&(this.generatingScheduler=!1,this.requestForGeneratingScheduler&&(this.requestForGeneratingScheduler=!1,this.generateAllSchedulers()))}removeDayTask(l,h){return l.split("\n").map(f=>f.trim()).filter(f=>h==f.includes("{\u0432}")).join("\n")}updateRangServices(l,h){this.textService.text=this.replaceServices(this.textService.text,!0,l,h,f=>f.text),this.textTime.text=this.replaceServices(this.textTime.text,!0,l,h,f=>f.time);let d=this.currentDayOfMonth()-1;if(d>0){let f=this.days[d-1];f.\u0441\u043b\u0443\u0436\u0431\u0430=this.replaceServices(f.\u0441\u043b\u0443\u0436\u0431\u0430,!1,l,h,p=>p.text),f.\u0432\u0440\u0435\u043c\u044f=this.replaceServices(f.\u0432\u0440\u0435\u043c\u044f,!1,l,h,p=>p.time)}}onSelectPrazdnik(l){let h=this.currentDate.split("."),d=+h[0],f=+h[1],p=+h[2],g=new Date;g.setDate(1),g.setFullYear(p),g.setMonth(f-1,d);let v=0==g.getDay()?6:0,y=l.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(v),_=this.breakLines(l.text,y);this.textHoliday.setText(_),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,y),this.dayRang=l.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(v),this.updateRangServices(l,v),this.onTextChanged()}parserServices(l,h=/==+/){return l.split(h).map(p=>p.trim()).filter(p=>!!p).map(p=>p.split("\n").map(g=>g.trim()).filter(g=>!!g).map(g=>{let m=g.split("|");return ib.builder().setText(m[0]).setTime(m[1]).setMorningService(!m[2].includes("\u0432")).setRequiredService(m[2].includes("\u0442")).setSelectedClerics(m[3]?m[3]:"")}))}parserClerics(l,h=/==+/){return l.split(h).map(f=>f.trim()).filter(f=>!!f).map(f=>{let p=f.split("|"),g=UO.builder();p.length>0&&g.setName(p[0]);for(let m=1;m<p.length;++m)g.week[m-1]="true"==p[m];return g})}servicesToText(l,h){return l.map(f=>f.map(p=>`${p.text}|${p.time}|${(p.requiredService?"\u0442":"")+(p.morningService?"\u0443":"\u0432")}|${p.selectedClerics}`).join("\n")).join(h)}onSaveServices(l){let d=this.servicesToText(l,"==");d||(d="=="),this.uiConfig.ui.schedulerServices.setStringValue(d)}onClearServices(l,h){h?this.onLoadEmptyServices():this.onLoadServicesOrDefault(!0)}clericsToText(l,h){return l.map(f=>f.name+"|"+f.week.join("|")).join(h)}onSaveClerics(l){let h=this.clericsToText(l,"==");this.uiConfig.ui.schedulerClerics.setStringValue(h)}onClearClerics(l){this.onLoadClericsOrDefault(!0)}onSelectDayRang(l){this.dayRang=l;let h=iv.builder().setRang(this.dayRang),d=h.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(),f=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textHoliday.text,d);this.textHoliday.setText(f),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,d),this.updateRangServices(h,0),this.onTextChanged()}replaceServices(l,h,d,f,p){let g=d.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(f),m=this.removeDayTask(l,h),y=this.services.services[d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(f)-1].filter(b=>b.morningService==h).map(b=>p(b)+(b.requiredService?"{\u043f}{\u0442}":g)+(h?"":"{\u0432}")).map(b=>b||"{1}").join("\n"),_=h?y:m;return(h?m:y)&&(_&&(_+="\n"),_+=h?m:y),_}onSaveDayServices(l){let h=this.days[this.currentDayOfMonth()-1];h&&(this.onTextChangedEnabled=!1,this.textService.text=h.\u0441\u043b\u0443\u0436\u0431\u0430=this.dayServices.services[0].map(d=>d.getNormalizedText()).join("\n"),this.textTime.text=h.\u0432\u0440\u0435\u043c\u044f=this.dayServices.services[0].map(d=>d.getNormalizedTime()).join("\n"),h.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=this.getDayClerics(),h.\u0446\u0432\u0435\u0442\u0430\u0421\u043b\u0443\u0436\u0431=this.dayServices.services[0].map(d=>d.serviceColor).join("\n"),this.updater&&this.updater.requestForUpdate(),this.onTextChangedEnabled=!0)}getDayClericsWithServiceColors(){return this.dayServices.services[0].map(l=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(l.selectedClerics,l.serviceColor)).join("\n")}getDayClerics(){return this.dayServices.services[0].map(l=>l.selectedClerics).join("\n")}onClearDayServices(l){this.config.post(()=>{this.onDayServicesSync()})}onSchedulerTypeToggle(){++this.fullSchedulerInfoType,this.fullSchedulerInfoType>jo.State&&(this.fullSchedulerInfoType=jo.Short),this.config.post(()=>this.generateAllSchedulers())}createPermanentLink(){var l=Mr.merge(this.config.pageLoadedFrom,"/index.html");let h=this.getAllCurrentSettings();h.name=this.pCurrentSettingsName.value;let d=Nu.utf8_to_b64(JSON.stringify(h));l+="?app=scheduler&doc="+d;let f=JSON.stringify(h),p=new Us;p.addLetters(f),p.allLettersAdded();let g=new zO(null),m=p.toText();if(m!=f)throw new Error("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0441\u043e\u0431\u0440\u0430\u043d \u0442\u0435\u043a\u0441\u0442: "+m);g.reopen(!1),p.saveDictionary(g),new Blob([g.data.toArray()],{type:"octet/stream"}),this.zipSvc.zip([w1.builder().setFileName("t.txt").setContent(f)]).then(y=>{const _=this.encodeUri(btoa(String.fromCharCode(...new Uint8Array(y))));let b=atob(this.decodeUri(_)),C=new Uint8Array(y),x=new Uint8Array(this.unpack(b));for(let w=0;w<x.byteLength;w++)if(x[w]!=C[w]){console.log("bytes[i] != bytes0[i] at "+w);break}l=Mr.merge(this.config.pageLoadedFrom,"/index.html"),l+="?app=scheduler&doc="+_,this.config.post(()=>{l.length<2e3?this.fullSchedulerInfoType==jo.State&&(this.permanentLink=l):console.log(`\u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u0430\u044f. \u041d\u0435\u043b\u044c\u0437\u044f \u0435\u0451 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c: ${l.length}`)})})}onCopyPermanentLink(){this.permanentLink&&Y$.copyTextToClipboard(this.permanentLink)}encodeUri(l){return l.replace(/[\\\+]/g,"_").replace(/[\/]/g,"$")}decodeUri(l){return l.replace(/[_]/g,"+").replace(/[$]/g,"/")}isNeedUpdate(l,h){let d=l?this.mainPage:this.previewPage;return null==d?.imageData||"/scenes/scheduler.scene.txt"!=d.imageData.scene||"Js"!=d.imageData.genName||d.imageData.type!=(l?2==this.fullSchedulerInfoType?297210:1:512)||d.imageData.schedulerText!=this.createScheduler(l)||d.imageData.logoText!=(2==this.fullSchedulerInfoType?"\u0448\u0442\u0430\u0442\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":1==this.fullSchedulerInfoType?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")||0!=d.imageData.startPageIndex||d.imageData.showFooter!=h}getMainPage(l=!0){let h=!l;if(this.isNeedUpdate(l,h)){let f=Gg.builder().setPageIndex(0).setImageData(Ha.builder().setScene("/scenes/scheduler.scene.txt").setGenName("Js").setType(l?this.fullSchedulerInfoType==jo.State?297210:1:512).setSvgWidth(l?this.fullSchedulerInfoType==jo.State?297:210:512).setSvgHeight(l?this.fullSchedulerInfoType==jo.State?210:297:512).setSchedulerText(this.createScheduler(l)).setLogoText(this.fullSchedulerInfoType==jo.State?"\u0448\u0442\u0430\u0442\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":this.fullSchedulerInfoType==jo.Full?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setStartPageIndex(0).setShowFooter(h));l?this.mainPage=f:this.previewPage=f,this.config.post(()=>{l?this.extraPages=[]:this.previewExtraPages=[]})}return l?this.mainPage:this.previewPage}isState(){return this.fullSchedulerInfoType==jo.State}onStartEditScheduler(){this.readonly=!1}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(ln),z(bo),z(Mg),z(Sg),z(Gye),z(Vye),z(K$),z(O1))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler-view"]],inputs:{data:"data"},decls:62,vars:18,consts:[["class","no-print",4,"ngIf"],[1,"clr-row","no-print","bottom-space"],[3,"ngClass",4,"ngIf"],[3,"data","pagesCount","svg",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-body","height100px"],[3,"hidden"],["clrInput","",3,"placeholder","name","ngModel","ngModelChange"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-warning",3,"click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-success"],["shape","check"],["type","button",1,"btn","btn-success",3,"click"],[1,"no-print"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon"],[1,"alert-text"],[1,"bottom-space"],["clrForm",""],["clrInline",""],[1,"clr-row","top-space"],[1,"clr-col-3"],["type","button","aria-label","done",1,"btn","btn-icon","btn-link","btn-block",3,"click"],[1,"btn","btn-link","btn-block"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c","accept",".txt",1,"button-input",3,"change"],["type","button","class","btn btn-icon btn-link redBtn btn-block","aria-label","warning",3,"click",4,"ngIf"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-link","redBtn","btn-block",3,"click"],[4,"clrIfExpanded"],[3,"data","autoSave","clerikDesc","onSave","onClear"],[3,"data","clerics","clericInfo","autoSave","serviceDesc","onSave","onClear","onReset"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-down"],[1,"clr-col-6"],[1,"inline-block","top-space"],[3,"showDates","uniqueDateString","useUniqueDate","change"],[1,"clr-col-1"],[1,"clr-row"],[1,"clr-col-12"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"heightDay",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[1,"clr-col-5"],["clrTextarea","","name","holiday","required","",1,"heightHoliday",3,"ngModel","ngModelChange"],[3,"data","singleRang","clerics","autoSave","clearBtn","serviceDesc","clericInfo","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-lg-up","clr-hidden-sm-down"],["clrTextarea","","name","day","required","",1,"heightDay2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday2",3,"ngModel","ngModelChange"],[3,"data","singleRang","vertical","clerics","autoSave","clearBtn","serviceDesc","clericInfo","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-up"],["clrTextarea","","name","day","required","",1,"heightDay3",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday3",3,"ngModel","ngModelChange"],["class","clr-col-12 top-space",4,"ngIf"],["class","clr-col-12",4,"ngIf"],[1,"clr-row","no-print"],[1,"clr-col-6","bottom-space","clr-hidden-md-down"],["class","clr-row",4,"ngIf"],["class","clr-row",4,"ngFor","ngForOf"],[1,"clr-row","bottom-top-space"],[1,"btn","btn-block","btn-danger-outline","heightTAw",3,"click"],[1,"clr-col-6","bottom-space","clr-hidden-lg-up","clr-hidden-sm-down"],[1,"btn","btn-block","btn-danger-outline",3,"click"],[1,"clr-col-12","bottom-space","clr-hidden-md-up"],[1,"clr-col-6","clr-hidden-sm-down"],[3,"data",4,"ngIf"],[1,"clr-col-12","clr-hidden-md-up"],[1,"clr-col-12","top-space"],[3,"rang","rangChanged"],[3,"data","onSelected"],[1,"heightTAw"],["clrTextarea","","name","holiday","required","",1,"heightTA",3,"ngModel","ngModelChange"],[1,"heightTA2w"],["clrTextarea","","name","holiday","required","",1,"heightTA2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightTA3",3,"ngModel","ngModelChange"],[3,"data"],[3,"ngClass"],[1,"btn","btn-block","btn-link",3,"click"],[3,"data","pagesCount","svg"],[3,"data","svg"]],template:function(l,h){1&l&&(K(0,Jft,25,6,"div",0),K(1,dpt,13,2,"clr-accordion",0),R(2,"div")(3,"div",1),K(4,fpt,3,4,"div",2),K(5,ppt,3,5,"div",2),K(6,gpt,3,4,"div",2),N(),K(7,mpt,1,1,"app-svg-js-image",3),K(8,vpt,2,1,"div",4),N(),R(9,"clr-modal",5),ie("clrModalOpenChange",function(f){return h.modalClearSchedulerFlag=f}),R(10,"h3",6),se(11,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),N(),R(12,"div",7)(13,"p"),se(14,"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446 \u0438\u043b\u0438 \u0433\u043e\u0434 \u0431\u044b\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b \u0438\u043b\u0438 \u043f\u043e\u0441\u0442\u0443\u043f\u0438\u043b \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0447\u0438\u0441\u0442\u043a\u0443."),pe(15,"br")(16,"br"),se(17," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?"),N()(),R(18,"div",8)(19,"button",9),ie("click",function(){return h.onClearScheduler(),h.modalClearSchedulerFlag=!1}),se(20,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N(),R(21,"button",10),ie("click",function(){return h.modalClearSchedulerFlag=!1}),se(22,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N()()(),R(23,"clr-modal",5),ie("clrModalOpenChange",function(f){return h.modalSaveSettingsFlag=f}),R(24,"h3",6),se(25,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),N(),R(26,"div",11)(27,"form")(28,"clr-input-container",12)(29,"label"),se(30),N(),R(31,"input",13),ie("ngModelChange",function(f){return h.pCurrentSettingsName.value=f}),N()()()(),R(32,"div",8),K(33,ypt,2,0,"button",14),R(34,"button",10),ie("click",function(){return h.modalSaveSettingsFlag=!1}),se(35,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N()()(),R(36,"clr-modal",5),ie("clrModalOpenChange",function(f){return h.modalDeleteSettingsFlag=f}),R(37,"h3",6),se(38,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),N(),R(39,"div",7)(40,"p")(41,"button",15),pe(42,"clr-icon",16),N(),se(43),N()(),R(44,"div",8)(45,"button",10),ie("click",function(){return h.modalDeleteSettingsFlag=!1}),se(46,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N(),R(47,"button",17),ie("click",function(f){return h.onDeleteCurrentSettingsDirect(f)}),se(48,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),N()()(),R(49,"clr-modal",5),ie("clrModalOpenChange",function(f){return h.modalAddSettingsFlag=f}),R(50,"h3",6),se(51,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),N(),R(52,"div",7)(53,"p")(54,"button",18),pe(55,"clr-icon",19),N(),se(56," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e?"),N()(),R(57,"div",8)(58,"button",20),ie("click",function(f){return h.onAddAllSettingsDirect(f)}),se(59,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),N(),R(60,"button",10),ie("click",function(){return h.modalAddSettingsFlag=!1}),se(61,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),N()()()),2&l&&(L("ngIf",!h.readonly),F(1),L("ngIf",!h.readonly),F(3),L("ngIf",!!h.permanentLink),F(1),L("ngIf",!h.readonly),F(1),L("ngIf",h.readonly),F(1),L("ngIf",!(null==h.mainPage||!h.mainPage.imageData)),F(1),L("ngForOf",h.extraPages),F(1),L("clrModalOpen",h.modalClearSchedulerFlag),F(14),L("clrModalOpen",h.modalSaveSettingsFlag),F(5),L("hidden",!h.pCurrentSettingsName.enabled),F(2),Ht(h.pCurrentSettingsName.name),F(1),Cy("placeholder",h.pCurrentSettingsName.description),L("name","tparamsCurrentSettingsName")("ngModel",h.pCurrentSettingsName.value),F(2),L("ngIf",h.pCurrentSettingsName.value),F(3),L("clrModalOpen",h.modalDeleteSettingsFlag),F(7),gi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c '",h.pCurrentSettingsName.value,"'?"),F(6),L("clrModalOpen",h.modalAddSettingsFlag))},dependencies:[di,vi,Sn,Bk,EB,so,Hf,$f,nB,ls,yk,ux,u_,wk,hre,fB,pB,XS,Qm,KS,YS,JS,s_,jy,Cc,LS,Pa,Wy,Vm,ma,kf,nc,pft,vft,zft,qye,qft],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.my-button[_ngcontent-%COMP%]{border-color:#4aaed9;background-color:#4aaed9;color:#000}.width100[_ngcontent-%COMP%]{width:100%}.height100[_ngcontent-%COMP%]{height:100%!important}.height100px[_ngcontent-%COMP%]{height:100px}.height114px[_ngcontent-%COMP%]{height:114px}.height400[_ngcontent-%COMP%]{width:500px;height:200px}.heightDay[_ngcontent-%COMP%]{width:7vw;height:10em}.heightDay2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightDay3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightHoliday[_ngcontent-%COMP%]{width:37.3vw;height:10em}.heightHoliday2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightHoliday3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightService[_ngcontent-%COMP%]{width:30vw;height:10em}.heightService2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightService3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTime[_ngcontent-%COMP%]{width:14.3vw;height:10em}.heightTime2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTime3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTA[_ngcontent-%COMP%]{width:45vw;height:10em}.heightTAw[_ngcontent-%COMP%]{width:45vw!important}.heightTA2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTA2w[_ngcontent-%COMP%]{width:42vw}.heightTA3[_ngcontent-%COMP%]{width:78vw;height:100px}@media print{.pagebreak[_ngcontent-%COMP%]{page-break-after:always}}.button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}"]})),c})();class d9{constructor(){}static builder(){return new d9}}class f9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"id",""),S(this,"waitingForSenderId",""),S(this,"components",[]),this.classes=d}static builder(){return new f9("",null,null,d9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}class p9{constructor(a,l,h,d){S(this,"width",void 0),S(this,"height",void 0),S(this,"memory",void 0),S(this,"environment",void 0),this.width=a,this.height=l,this.memory=h,this.environment=d}static builder(){return new p9(512,512,null,null)}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setMemory(a){return this.memory=a,this}setEnvironment(a){return this.environment=a,this}}class GO extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"config",void 0),this.config=d}static builder(){return new GO("",null,null,p9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateConfig(a){return a(this.config),this}}const bpt=["canvasContainer"],Cpt=["runnerCanvas"];class g9{constructor(a,l,h){S(this,"name",void 0),S(this,"x",void 0),S(this,"y",void 0),this.name=a,this.x=l,this.y=h}static builder(){return new g9("",-1,-1)}setName(a){return this.name=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}}let m9=(()=>{class c{get codeRunnerTextData(){return this.data}get memory(){return this.codeRunnerTextData.config.memory?this.codeRunnerTextData.config.memory:this.myMemory}get environment(){return this.codeRunnerTextData.config.environment?this.codeRunnerTextData.config.environment:this.myEnvironment}get text(){return this.data&&this.data.text?this.data.text:""}get width(){return this.codeRunnerTextData&&this.codeRunnerTextData.config?this.codeRunnerTextData.config.width:512}get height(){return this.codeRunnerTextData&&this.codeRunnerTextData.config?this.codeRunnerTextData.config.height:512}constructor(l){S(this,"config",void 0),S(this,"data",void 0),S(this,"onError",new Mt),S(this,"runned",!1),S(this,"canvasContainerRef",void 0),S(this,"runnerCanvasRef",void 0),S(this,"oldValue",ts.builder()),S(this,"oldOldWidthValue",0),S(this,"oldWidthValue",ts.builder()),S(this,"oldHeightValue",ts.builder()),S(this,"oldRequestUpdateLevel",ts.builder()),S(this,"requestUpdateLevel",0),S(this,"myMemory",Gr.\u043d\u043e\u0432\u044b\u0435()),S(this,"myEnvironment",Gr.\u043d\u043e\u0432\u044b\u0435()),S(this,"mouseMove",null),S(this,"jsSvc",new WE),this.config=l}ngOnInit(){this.runned=!0}ngOnDestroy(){this.runned=!1}ngAfterViewInit(){this.requestUpdate()}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}requestUpdate(){if(!this.runned)return;const l=this.canvasContainerRef.nativeElement;let h=l.offsetWidth,d=l.offsetHeight,f=this.oldValue.checkAndUpdate(this.text),p=this.oldOldWidthValue!=h;p&&(this.oldOldWidthValue=this.oldWidthValue.oldRawValue),f=this.oldWidthValue.checkAndUpdate(h)||f,f=this.oldHeightValue.checkAndUpdate(d)||f,f=this.oldRequestUpdateLevel.checkAndUpdate(this.requestUpdateLevel)||f;const g=this.runnerCanvasRef.nativeElement;let m=p?Math.round(h/this.codeRunnerTextData.config.width*this.codeRunnerTextData.config.height):g.height;m<1&&(m=1);var v=500;if(f){g.width=h,g.height=m;const w=g.getContext("2d");w.width=h,w.height=m,w.virtaulWidth=this.codeRunnerTextData.config.width,w.virtualHeight=this.codeRunnerTextData.config.height,w.kx=h/this.codeRunnerTextData.config.width,w.ky=m/this.codeRunnerTextData.config.height;let O=Gr.\u043d\u043e\u0432\u044b\u0435(),D=AU.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u043e\u0433\u043e\u0425\u043e\u043b\u0441\u0442\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0425\u043e\u043b\u0441\u0442(w),T=this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u0414\u0432\u0443\u043c\u0435\u0440\u043d\u044b\u0439\u0425\u043e\u043b\u0441\u0442("\u0445\u043e\u043b\u0441\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(D));O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set("\u0445\u043e\u043b\u0441\u0442",T),O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set("\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u0427\u0435\u0440\u0435\u0437\u041c\u0441",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-1));let M=this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432");if(this.mouseMove){let k=this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");k.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set("name",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.mouseMove.name)).set("x",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.mouseMove.x)).set("y",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.mouseMove.y)),M.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([k])}this.environment.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0441\u043e\u0431\u044b\u0442\u0438\u044f\u041c\u044b\u0448\u043a\u0438",M);try{this.text&&this.jsSvc.run(this.text,this.memory,this.environment,O);var y=this.environment.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.get("\u0433\u0440\u0430\u0444\u0438\u043a\u0430")?.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e();if(y){var _=O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.get("\u0448\u0438\u0440\u0438\u043d\u0430")?.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),b=O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.get("\u0432\u044b\u0441\u043e\u0442\u0430")?.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e();null!=_&&null!=b&&(_<=0&&(_=1),b<=0&&(b=1),(this.codeRunnerTextData.config.width!=_||this.codeRunnerTextData.config.height!=b)&&(this.codeRunnerTextData.config.width=_,this.codeRunnerTextData.config.height=b,++this.requestUpdateLevel,v=1,this.oldOldWidthValue=0))}var C=O.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.get("\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u0427\u0435\u0440\u0435\u0437\u041c\u0441")?.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e();null!=C&&0<=C&&C<v&&(v=C,++this.requestUpdateLevel)}catch(k){var x="\u041e\u0448\u0438\u0431\u043a\u0430: "+(k instanceof We?Wo.convertToObject(k):k);this.onError.emit(x)}}this.config.post(()=>this.requestUpdate(),v)}onMousemove(l){let h=this.runnerCanvasRef.nativeElement.getBoundingClientRect(),d=l.clientX-h.left,f=l.clientY-h.top;d>=0&&d<this.runnerCanvasRef.nativeElement.offsetWidth&&f>=0&&f<this.runnerCanvasRef.nativeElement.offsetHeight&&(this.mouseMove=g9.builder().setName("mousemove").setX(d).setY(f))}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-code-runner-text"]],viewQuery:function(l,h){if(1&l&&(mi(bpt,5),mi(Cpt,5)),2&l){let d;jt(d=Zt())&&(h.canvasContainerRef=d.first),jt(d=Zt())&&(h.runnerCanvasRef=d.first)}},hostBindings:function(l,h){1&l&&ie("mousemove",function(f){return h.onMousemove(f)})},inputs:{data:"data"},outputs:{onError:"onError"},decls:4,vars:0,consts:[[1,"width100"],["canvasContainer",""],["width","10","height","10",1,"border"],["runnerCanvas",""]],template:function(l,h){1&l&&(R(0,"div",0,1),pe(2,"canvas",2,3),N())},styles:[".noBorder[_ngcontent-%COMP%]{border:1px solid transparent}.border[_ngcontent-%COMP%]{border:1px solid lightgray}"]})),c})();function Spt(c,a){if(1&c&&(R(0,"span",2),se(1),N()),2&c){const l=q();F(1),Ht(l.text)}}function xpt(c,a){if(1&c&&(R(0,"span",2),se(1),N()),2&c){const l=q(3);F(1),Ht(l.text)}}function wpt(c,a){if(1&c){const l=ct();R(0,"app-dynamic-codemirror",5),ie("textChanged",function(d){return Ee(l),Ae(q(3).onCodeTextChanged(d))}),N()}if(2&c){const l=q(3);L("text",l.lines)("maxHeightStr",l.getHeightStr())("minHeightStr",l.getHeightStr())}}function Opt(c,a){1&c&&pe(0,"app-dynamic-errors",9),2&c&&L("data",q(4).errors)}function Dpt(c,a){if(1&c){const l=ct();R(0,"div")(1,"div",6),se(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),N(),K(3,Opt,1,1,"app-dynamic-errors",7),R(4,"app-dynamic-code-runner-text",8),ie("onError",function(d){return Ee(l),Ae(q(3).onCodeRunnerError(d))}),N()()}if(2&c){const l=q(3);F(3),L("ngIf",l.errors.errors.length),F(1),L("data",l.runnerData)}}function Tpt(c,a){if(1&c&&(R(0,"div"),K(1,xpt,2,1,"span",0),K(2,wpt,1,3,"app-dynamic-codemirror",4),K(3,Dpt,5,2,"div",1),N()),2&c){const l=q(2);F(1),L("ngIf",!l.isMiltiline()),F(1),L("ngIf",l.isMiltiline()),F(1),L("ngIf",l.resultEnabled)}}function kpt(c,a){if(1&c&&(R(0,"span",2),se(1),N()),2&c){const l=q(4);F(1),Ht(l.text)}}function Mpt(c,a){if(1&c){const l=ct();R(0,"app-dynamic-codemirror",5),ie("textChanged",function(d){return Ee(l),Ae(q(4).onCodeTextChanged(d))}),N()}if(2&c){const l=q(4);L("text",l.lines)("maxHeightStr",l.getHeightStr())("minHeightStr",l.getHeightStr())}}const Ept=function(c,a){return{"clr-col-6":c,"clr-col-12":a}};function Apt(c,a){if(1&c&&(R(0,"div",13),K(1,kpt,2,1,"span",0),K(2,Mpt,1,3,"app-dynamic-codemirror",4),N()),2&c){const l=q(3);L("ngClass",Wr(3,Ept,l.resultEnabled,!l.resultEnabled)),F(1),L("ngIf",!l.isMiltiline()),F(1),L("ngIf",l.isMiltiline())}}function Ipt(c,a){1&c&&pe(0,"app-dynamic-errors",9),2&c&&L("data",q(4).errors)}function Ppt(c,a){if(1&c){const l=ct();R(0,"div",14)(1,"div",15),se(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),N(),K(3,Ipt,1,1,"app-dynamic-errors",7),R(4,"app-dynamic-code-runner-text",8),ie("onError",function(d){return Ee(l),Ae(q(3).onCodeRunnerError(d))}),N()()}if(2&c){const l=q(3);F(3),L("ngIf",l.errors.errors.length),F(1),L("data",l.runnerData)}}function Rpt(c,a){if(1&c&&(R(0,"div",10),K(1,Apt,3,6,"div",11),K(2,Ppt,5,2,"div",12),N()),2&c){const l=q(2);F(1),L("ngIf",l.isMiltiline()),F(1),L("ngIf",l.isMiltiline()&&l.resultEnabled)}}function Fpt(c,a){if(1&c&&(R(0,"div"),K(1,Tpt,4,3,"div",1),K(2,Rpt,3,2,"div",3),N()),2&c){const l=q();F(1),L("ngIf",l.vertical),F(1),L("ngIf",!l.vertical)}}let Lpt=(()=>{class c{get vertical(){return(null!=this.bVertical?this.bVertical:window.innerWidth<window.innerHeight)||!this.isMiltiline()}get codeSpanTextData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get resultEnabled(){return!!this.codeSpanTextData&&this.codeSpanTextData.config.resultEnabled&&this.codeSpanTextData.config.resultWidth>0&&this.codeSpanTextData.config.resultHeight>0}constructor(l){S(this,"config",void 0),S(this,"data",void 0),S(this,"oldValue",ts.builder()),S(this,"lines",null),S(this,"linesCount",0),S(this,"errors",Bc.builder()),S(this,"runnerData",GO.builder().updateConfig(h=>h.setWidth(256).setHeight(160))),S(this,"requestCodeText",""),S(this,"bVertical",void 0),this.config=l}ngOnInit(){void 0===this.bVertical&&(this.bVertical=window.innerWidth<window.innerHeight),this.codeSpanTextData.config.resultEnabled&&(this.runnerData.text=this.codeSpanTextData.text,this.runnerData.config.setWidth(this.codeSpanTextData.config.resultWidth).setHeight(this.codeSpanTextData.config.resultHeight))}ngOnDestroy(){}ngAfterViewInit(){}getLines(){let l=this.text;return this.oldValue.checkAndUpdate(l)&&(this.lines=null,(l.includes("\n")||this.codeSpanTextData.config.resultEnabled)&&(this.lines=l,this.linesCount=this.lines.split("\n").length,this.codeSpanTextData.config.setResultEnabled(!0),this.runnerData.config.setWidth(this.codeSpanTextData.config.resultWidth).setHeight(this.codeSpanTextData.config.resultHeight))),this.lines}isMiltiline(){return null!=this.getLines()||this.codeSpanTextData.config.resultEnabled}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getHeightStr(){return 11*(0+this.linesCount)*1.4+"pt + 8px"}onCodeTextChanged(l){this.requestCodeText=l,this.config.post(()=>{this.requestCodeText==l&&(this.onCodeRunnerError(""),this.runnerData.text=l)},3e3)}onCodeRunnerError(l){this.config.post(()=>{this.errors.errors=l?[l]:[]})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-code-span-text"]],inputs:{data:"data"},decls:2,vars:2,consts:[["class","bg-2",4,"ngIf"],[4,"ngIf"],[1,"bg-2"],["class","clr-row",4,"ngIf"],[3,"text","maxHeightStr","minHeightStr","textChanged",4,"ngIf"],[3,"text","maxHeightStr","minHeightStr","textChanged"],[1,"green","bottom-top-space"],[3,"data",4,"ngIf"],[3,"data","onError"],[3,"data"],[1,"clr-row"],[3,"ngClass",4,"ngIf"],["class","clr-col-6",4,"ngIf"],[3,"ngClass"],[1,"clr-col-6"],[1,"green"]],template:function(l,h){1&l&&(K(0,Spt,2,1,"span",0),K(1,Fpt,3,2,"div",1)),2&l&&(L("ngIf",!h.isMiltiline()),F(1),L("ngIf",h.isMiltiline()))},dependencies:[di,Sn,I1,A3,m9],styles:[".noBorder[_ngcontent-%COMP%]{border:1px solid transparent}"]})),c})();class v9{constructor(a,l,h){S(this,"resultEnabled",void 0),S(this,"resultWidth",void 0),S(this,"resultHeight",void 0),this.resultEnabled=a,this.resultWidth=l,this.resultHeight=h}static builder(){return new v9(!1,256,160)}setResultEnabled(a){return this.resultEnabled=a,this}setResultWidth(a){return this.resultWidth=a,this}setResultHeight(a){return this.resultHeight=a,this}}class y9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"config",void 0),this.config=d}static builder(){return new y9("",null,null,v9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateConfig(a){return a(this.config),this}}class _9 extends ku{constructor(){super(),S(this,"fineText",!1),S(this,"pageBreakBefore",!1),S(this,"pageBreakAfter",!1),S(this,"printOnly",!1),S(this,"noPrint",!1),S(this,"sClasses",[])}static builder(){return new _9}setFineText(a){return this.fineText=a,this.markChanged(),this}setPageBreakBefore(a){return this.pageBreakBefore=a,this.markChanged(),this}setPageBreakAfter(a){return this.pageBreakAfter=a,this.markChanged(),this}setPrintOnly(a){return this.printOnly=a,this.markChanged(),this}setNoPrint(a){return this.noPrint=a,this.markChanged(),this}addSClass(a){return this.sClasses.push(a),this.markChanged(),this}setSClasses(a){return this.sClasses=a,this.markChanged(),this}}class b9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"components",[]),this.classes=d}static builder(){return new b9("",null,null,_9.builder().setFineText(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setComponents(a){return this.components=a,this}}function Npt(c,a){if(1&c&&(R(0,"div",2),pe(1,"app-add-component",3),N()),2&c){const l=a.$implicit;L("ngClass",q().getColClass(l)),F(1),L("component",l)}}let Bpt=(()=>{class c{get columnsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}get component(){return this.columnsData.components.length?this.columnsData.components[0]:null}get components(){return this.columnsData.components}get isRow(){return this.columnsData.classes.sClasses.findIndex((l,h,d)=>"clr-row"==l)>=0}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return this.columnsData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var l=this.columnsData.classes;let h={ftext:l.fineText,pageBreak:l.pageBreakAfter,pageBreakBefore:l.pageBreakBefore};return l.sClasses.filter(d=>"clr-row"!=d&&!d.startsWith("clr-col-")).forEach(d=>h[d]=!0),h}getColClass(l){let h=this.getColClassRaw(l);return l.detector.checkAndGetValue(h)}getColClassRaw(l){let h={},d=this.columnsData.components.length;return d>=1&&d<=12?h["clr-col-"+Math.floor(12/d)]=!0:h["clr-col"]=!0,h}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-columns"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"clr-row",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),ie("click",function(f){return h.onClick(f)}),K(1,Npt,2,2,"div",1),N()),2&l&&(F(1),L("ngForOf",h.components))},dependencies:[di,vi,rc],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class B3{constructor(a,l){S(this,"text",void 0),S(this,"children",void 0),this.text=a,this.children=l}static builder(){return new B3("",[])}setText(a){return this.text=a,this}setChildren(a){return this.children=a,this}addChild(a){return this.children.push(a),this}}class C9 extends ku{constructor(){super(),S(this,"block",!1),S(this,"outline",!1),S(this,"type","primary"),S(this,"children",[])}static builder(){return(new C9).setupDefault()}setBlock(a){return this.block=a,this.markChanged(),this}setOutline(a){return this.outline=a,this.markChanged(),this}setType(a){return this.type=a,this.markChanged(),this}setChildren(a){return this.children=a,this}addChild(a){return this.children.push(a),this}setupDefault(){return this.addChild(B3.builder().setText("\u0413\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0435")).addChild(B3.builder().setText("\u041a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0435"))}}class S9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),this.classes=d}static builder(){return new S9("",null,null,C9.builder().setBlock(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}function Vpt(c,a){if(1&c){const l=ct();R(0,"button",12),ie("click",function(){const f=Ee(l).$implicit;return Ae(q(2).onClickButton(f.path))}),se(1),N()}if(2&c){const l=a.$implicit;F(1),Ht(l.name)}}function Upt(c,a){if(1&c&&(R(0,"clr-dropdown-menu",6)(1,"label",7),se(2,"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b"),N(),pe(3,"div",8),R(4,"clr-dropdown")(5,"button",9),se(6,"\u0413\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0435"),N(),R(7,"clr-dropdown-menu",10),K(8,Vpt,2,1,"button",11),N()()()),2&c){const l=q();F(8),L("ngForOf",l.graphicsExamples)}}class V3{constructor(a,l){S(this,"name",void 0),S(this,"path",void 0),this.name=a,this.path=l}static builder(){return new V3("","")}setName(a){return this.name=a,this}setPath(a){return this.path=a,this}}let zpt=(()=>{class c{get btnData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}constructor(l,h,d){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"cacheSvc",void 0),S(this,"data",void 0),S(this,"graphicsExamples",[V3.builder().setName("\u041301 \u041a\u0432\u0430\u0434\u0440\u0430\u0442").setPath("/compprod/examples/G01_movingRect.txt"),V3.builder().setName("\u041302 \u041a\u0440\u0443\u0433").setPath("/compprod/examples/G02_movingCircle.txt")]),this.config=l,this.uiConfig=h,this.cacheSvc=d}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}onClickButton(l){this.cacheSvc.getText(l,h=>{h&&(this.uiConfig.ui.compilerSourceText.setStringValue(h),this.data.onClick&&this.data.onClick(l))})}getClasses(){return this.btnData.classes.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){var l=this.btnData.classes;return{btn:!0,"btn-block":l.block,"btn-link":"link"==l.type&&!l.outline,"btn-primary":"primary"==l.type&&!l.outline,"btn-primary-outline":"primary"==l.type&&l.outline,"btn-success":"success"==l.type&&!l.outline,"btn-success-outline":"success"==l.type&&l.outline,"btn-danger":"danger"==l.type&&!l.outline,"btn-danger-outline":"danger"==l.type&&l.outline,"no-print":!0}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Pd))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-button-examples"]],inputs:{data:"data"},decls:7,vars:0,consts:[[1,"clr-row"],[1,"clr-col-12"],[1,"btn-block","st"],["clrDropdownTrigger","",1,"btn","btn-link","btn-block"],["shape","angle","direction","down"],["clrPosition","top-left",4,"clrIfOpen"],["clrPosition","top-left"],["aria-hidden","true",1,"dropdown-header"],["role","separator","aria-hidden","true",1,"dropdown-divider"],["clrDropdownTrigger",""],["clrPosition","right-bottom"],["clrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["clrDropdownItem","",3,"click"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"div",1)(2,"clr-dropdown",2)(3,"button",3),se(4," \u041f\u0440\u0438\u043c\u0435\u0440\u044b "),pe(5,"cds-icon",4),N(),K(6,Upt,9,1,"clr-dropdown-menu",5),N()()())},dependencies:[vi,_r,iB,ls,yx,LB,NB,RB],styles:[".st[_ngcontent-%COMP%]{margin-top:7px}"]})),c})();class Hpt{Dictionary(){return U3.builder()}Card(){return x9.builder()}}class U3{constructor(a,l,h,d,f,p,g){S(this,"fileName",void 0),S(this,"name",void 0),S(this,"indexLang",void 0),S(this,"contentsLang",void 0),S(this,"cards",void 0),S(this,"tag",void 0),S(this,"cs",void 0),this.fileName=a,this.name=l,this.indexLang=h,this.contentsLang=d,this.cards=f,this.tag=p,this.cs=g}static builder(){return new U3("","","","",[],{},!1)}setFileName(a){return this.fileName=a,this}setName(a){return this.name=a,this}setIndexLanguage(a){return this.indexLang=a,this}setContentsLanguage(a){return this.contentsLang=a,this}setCards(a){return this.cards=a,this}setTag(a){return this.tag=a,this}setCs(a){return this.cs=a,this}}class x9{constructor(a,l){S(this,"words",void 0),S(this,"translations",void 0),this.words=a,this.translations=l}static builder(){return new x9([],[])}setWords(a){return this.words=a,this}setTranslations(a){return this.translations=a,this}}class w9{constructor(a,l){S(this,"translations",void 0),S(this,"cs",void 0),this.translations=a,this.cs=l}static builder(){return new w9([],!1)}setTranslations(a){return this.translations=a,this}setCs(a){return this.cs=a,this}}class $pt{constructor(){S(this,"dictionaries",[])}parse(a){return dictionaryParserStatic.parse(a,{builder:new Hpt})}addDictionary(a,l,h){let d=this.parse(a),f={};return d&&d.cards.forEach(g=>{g.words.forEach(m=>f[m]=g.translations)}),d.setTag(f).setCs(l).setFileName(h),this.dictionaries.push(d),!!d}standardDictionariesLoading(a,l){l.getText("/dev/dictionaries/greek_ru/Dvor_abrv.dsl",h=>{h?this.addDictionary(h,!1,"Dvor_abrv")?l.getText("/dev/dictionaries/greek_ru/Dvor.dsl",d=>{d?this.addDictionary(d,!1,"Dvor")?l.getText("/dev/dictionaries/cs_ru/chu-rus_ShortChurch1_0-GD.dsl",f=>{if(f){let p=this.addDictionary(f,!0,"chu_rus_short");a(p?null:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0432\u0430\u0440\u044c.")}else a(f?null:"\u0421\u043b\u043e\u0432\u0430\u0440\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")}):a("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0432\u0430\u0440\u044c."):a(d?null:"\u0421\u043b\u043e\u0432\u0430\u0440\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")}):a("\u0421\u043b\u043e\u0432\u0430\u0440\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d."):a(h?null:"\u0421\u043b\u043e\u0432\u0430\u0440\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})}load(a,l,h){0==this.dictionaries.length&&h?l.getBinary("/translations/translations.zip",d=>{d?(new O1).unzip(d,{},(p,g,m,v)=>{g.files[p].async("string").then(y=>{let _=JSON.parse(y);this.dictionaries.push(U3.builder().setName(_.name).setFileName(_.fileName).setCs(_.cs).setTag(_.tag)),this.dictionaries.length==v.length&&a(null)})},p=>{this.standardDictionariesLoading(a,l)}):this.standardDictionariesLoading(a,l)}):a(null)}getTranslations(a){let l=null;return this.dictionaries.forEach(h=>{let d=h.tag[a];d&&(null==l&&(l=[]),l.push(w9.builder().setTranslations(d).setCs(h.cs)))}),l}}class O9{constructor(a,l){S(this,"meta",void 0),S(this,"parsed",void 0),this.meta=a,this.parsed=l}static builder(){return new O9(null,null)}setMeta(a){return this.meta=a,this}setParsed(a){return this.parsed=a,this}}class QO{constructor(a="",l=null){S(this,"type",void 0),S(this,"onEventHandler",void 0),this.type=a,this.onEventHandler=l}setOnEventHandler(a){return this.onEventHandler=a,this}run(a){return this.onEventHandler&&this.onEventHandler(this,a),this}}class z3{constructor(a,l,h=0,d=null){S(this,"\u0441\u0442\u0440\u043e\u043a\u0438",void 0),S(this,"\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438",void 0),S(this,"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a",void 0),S(this,"\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430",void 0),S(this,"\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u043e\u043b\u0431\u0446\u043e\u0432",_a.builder()),S(this,"\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u0440\u043e\u043a",_a.builder()),this.\u0441\u0442\u0440\u043e\u043a\u0438=a,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=l,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a=h,this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=d}static builder(){return new z3([],0)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(a){return this.\u0441\u0442\u0440\u043e\u043a\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=a,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(a=1){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a+=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430(a){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430=a,this}}class D9 extends Rfe{constructor(a=null){super(a),S(this,"errors",[]),S(this,"libraryRef","biblia"),S(this,"libraryType","prod"),S(this,"libraryInfo",null),S(this,"bookName",""),S(this,"bookNameNewLangs",[]),S(this,"bookChapterNewName",""),S(this,"bookLoadBooksEnabledNewName",!0),S(this,"bookPageText",""),S(this,"bookRef",""),S(this,"bookInfo",null),S(this,"bookLanguages",[]),S(this,"books",[]),S(this,"lineIndexes",[]),S(this,"bookContent",[]),S(this,"bookChapter",null),S(this,"converter",new $z),S(this,"onLibraryLoadEvent",new QO("onLibraryLoad")),S(this,"onPageLoadEvent",new QO("onPageLoad")),S(this,"onBookInfoLoadEvent",new QO("onBookInfoLoad")),S(this,"onRouteEvent",new QO("onRoute")),S(this,"onNewTitleEvent",new QO("onNewTitle")),S(this,"config",null),S(this,"uiConfig",null),S(this,"memorialSvc",null),S(this,"audioSvc",null),S(this,"linesTransformer",null),S(this,"removableSubscriptions",[]),S(this,"dictionariesSvc",null)}addDictionarySvc(a,l,h=null){return this.dictionariesSvc=h,this.dictionariesSvc?a(null):(this.dictionariesSvc=new $pt,this.dictionariesSvc.load(a,l,!!this.config?.isUseDictionaries())),this}onDestroy(){this.removableSubscriptions.forEach(a=>{a.unsubscribe()}),this.removableSubscriptions=[]}addSubscription(a){a&&this.removableSubscriptions.push(a)}setLineTransformer(a){return this.linesTransformer=a,this}setConfig(a){this.config=a;let l=this.config?.getApplication();return l&&l.libraryType&&l.libraryRef&&(this.libraryType=l.libraryType,this.libraryRef=l.libraryRef),this}setUIConfig(a){return this.uiConfig=a,this}setMemorial(a){return this.memorialSvc=a,this}setAudio(a){return this.audioSvc=a,this}addError(a){return this.errors.push(a),this}clear(a=!1,l=!1,h=[],d=!0,f=!1){return this.errors=[],this.books=[],this.lineIndexes=[],a&&(this.bookContent=[]),l&&(d&&(this.bookInfo=null),this.bookLanguages=h),f&&(this.bookChapter=null),this}loadLibraryInfo(){return this.send(null,Tfe.builder().setLibraryType(this.libraryType).setLibraryRef(this.libraryRef)),this}tryLoadLibraryInfo(){null==this.libraryInfo?this.loadLibraryInfo():this.onLibraryLoadEvent.run(this.libraryInfo)}loadBookByName(a,l=[],h="",d=!0){this.bookName=a,this.bookNameNewLangs=l,this.bookChapterNewName=h,this.bookChapterNewName&&(this.bookChapter=null),this.bookLoadBooksEnabledNewName=d,this.retryLoadBookByName()}loadBookByPageText(a,l=!0,h="\u0420\u0443\u0441\u0441\u043a\u0438\u0439"){return this.bookPageText=a,this.clear(!0,!0,[h],l),this.retryLoadBookByName(),this}getBookSettingsNamePath(a){if(!this.libraryInfo)return null;let l=this.libraryInfo.settings.find(h=>h.name===a);return l||(l=this.libraryInfo.settings.find(h=>h.value2?.find(d=>d===a))),l}getBookContentNamePath(a,l=!1){if(!this.libraryInfo)return null;let h=this.libraryInfo.content.find(d=>d.name===a);if(h||(h=this.libraryInfo.content.find(d=>d.path2?.find(f=>f===a))),!h){let d=M1.builder().parse(a);if(null!=d&&d.length&&d[0].length){let f=d[0][0];if(f.type==ic.Link){let p=f;h=this.getBookContentNamePath(p.name),l&&p.langugages&&p.langugages.length&&(this.bookNameNewLangs=p.langugages)}}}return h}retryLoadBookByName(){if(this.libraryInfo)if(this.bookPageText)this.onPagesResponse(_z.builder().setPages([this.bookPageText])),this.bookPageText="";else{let a=this.getBookContentNamePath(this.bookName,!0);a?this.loadBookByRef(a.path,this.bookNameNewLangs,this.bookLoadBooksEnabledNewName):this.addError(`\u041a\u043d\u0438\u0433\u0430 "${this.bookName}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430.`)}else this.loadLibraryInfo()}loadBookByRef(a,l=[],h=!0){return this.bookRef=a,this.clear(!0,!0,l),this.loadBookInfo(null,h),this}isLanguageEnabled(a){return null!=this.bookLanguages.find(l=>l==a)}loadBookInfo(a=null,l=!0){return this.send(null,kfe.builder().setLibraryType(this.libraryType).setBookRef(a||this.bookRef).setLoadBooksEnabled(l)),this}isPrevEnabled(){let a=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let l=this.bookContent[0];l.parsed&&l.parsed.content&&l.parsed.content.length>1&&(a=l.parsed.content[0].name!=this.bookChapter.name)}return a}isNextEnabled(){let a=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let l=this.bookContent[0];l.parsed&&l.parsed.content&&l.parsed.content.length>1&&(a=l.parsed.content[l.parsed.content.length-1].name!=this.bookChapter.name)}return a}loadNextPage(){if(!this.isNextEnabled())return;let a="";if(this.bookContent.length){let l=this.bookContent[0];if(l.parsed&&l.parsed.content&&l.parsed.content.length>1){let h=l.parsed.content.findIndex(d=>d.name==this.bookChapter.name);h>=0&&h+1<l.parsed.content.length&&(a=l.parsed.content[h+1].name)}}a&&this.loadPage(a)}loadPrevPage(){if(!this.isPrevEnabled())return;let a="";if(this.bookContent.length){let l=this.bookContent[0];if(l.parsed&&l.parsed.content&&l.parsed.content.length>1){let h=l.parsed.content.findIndex(d=>d.name==this.bookChapter.name);h>=1&&(a=l.parsed.content[h-1].name)}}a&&this.loadPage(a)}loadPage(a){let l=this.bookContent[0].parsed.content.find(h=>h.name===a);return l&&l!=this.bookChapter&&(this.bookName=this.getNormalBookName(),this.bookChapter=l,this.clear(),this.loadCurrentPages()),this}loadCurrentPages(){let a=Efe.builder();return this.runAll(this.bookContent,(l,h)=>{let d=l.parsed.settings.find(g=>"\u044f\u0437\u044b\u043a"===g.name.toLowerCase());if(d&&(this.isLanguageEnabled(d.value)||(d=null)),!d)return void h(!0);let f=this.getBookChapterNewName(),p=l.parsed.content.find(g=>f==g.name);this.bookChapterNewName="",null==p&&(p=l.parsed.content.find(g=>!this.bookChapter||this.bookChapter.name==g.name)),p&&(a.addBookPage(yz.builder().setBookPage(l.meta.bookRef).setBookPath(l.meta.path).setBookPage(p.path)),this.bookChapter||(this.bookChapter=p)),h(!0)},l=>{l&&this.send(null,a)}),this}post(a,l){switch(l.type){case Pfe.TYPE:this.onLibraryInfoResponse(l);break;case Ife.TYPE:this.onBookInfoResponse(l);break;case Afe.TYPE:this.onBookResponse(l);break;case _z.TYPE:this.onPagesResponse(l);break;default:throw new Error(`Unknown message type: ${l.type}.`)}return this}onLibraryInfoResponse(a){try{this.libraryInfo=bookParserStatic.parse(a.metaContent,$w.builder())}catch(l){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438: ${a.libraryRef}: ${l}`)}return this.bookName||this.bookPageText?this.retryLoadBookByName():this.onLibraryLoadEvent.run(this.libraryInfo),this}onBookInfoResponse(a){try{this.bookInfo=bookParserStatic.parse(a.metaContent,$w.builder())}catch(l){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${a.bookRef}: ${l}`)}return a.loadBooksEnabled&&this.reloadBooks(),this.onBookInfoLoadEvent.run(this.bookInfo),this}reloadBooks(){this.clear(!0);let a=Mfe.builder().setLibraryType(this.libraryType).setBookRef(this.bookRef);this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookLanguages.filter(l=>null!=this.bookInfo.content.find(h=>h.name==l))),!this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookInfo.content.map(l=>l.name),this.bookLanguages.length>2&&(this.bookLanguages=this.bookLanguages.slice(0,2))),this.bookInfo&&this.bookLanguages.forEach(l=>{let h=this.bookInfo.content.find(d=>d.name===l);h&&a.addLanguage(h.path)}),this.send(null,a)}onBookResponse(a){return this.runAll(a.metaBooks,(l,h)=>{this.loadBook(l,h)},l=>{l&&this.loadCurrentPages()}),this}loadBook(a,l=null){try{var h=bookParserStatic.parse(a.content,{builder:$w.builder()});this.bookContent.push(O9.builder().setMeta(a).setParsed(h)),l&&l(!0)}catch(d){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${this.bookRef}: ${d}`)}return this}onPagesResponse(a){a.pages.forEach(l=>{this.loadBookPageText(l)}),this.onPageLoadEvent.run(null)}getStdSrc(){return"\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '';\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c(\u0442\u0435\u043a\u0441\u0442) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n      }\n    }.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u0434 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(_\u043a\u043e\u0434) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c '/*' + _\u043a\u043e\u0434 + '*/';\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(\u0442\u0435\u043a\u0441\u0442) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0433\u0430\u043b\u043e\u0447\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0433\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442, _\u0433\u0430\u043b\u043e\u0447\u043a\u0430, _\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442,_\u0433\u0430\u043b\u043e\u0447\u043a\u0430,_\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0433\u0430\u043b\u043e\u0447\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442, \u0442\u0438\u043f, \u0441\u0441\u044b\u043b\u043a\u0430, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, \u0431\u043b\u043e\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442,\u0442\u0438\u043f,\u0441\u0441\u044b\u043b\u043a\u0430,\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a,\u0431\u043b\u043e\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u043e\u043f\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432(\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432(\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0441\u0442\u043e\u043b\u0431\u0446\u044b = \u043a\u043b\u0430\u0441\u0441 {\n      \u0441\u0442\u043e\u043b\u0431\u0446\u044b(\u0441\u0442\u0440\u043e\u043a\u0438) {\n        id = \u043d\u043e\u0432\u044b\u0435\u0421\u0442\u043e\u043b\u0431\u0446\u044b(\u0441\u0442\u0440\u043e\u043a\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0441\u0442\u043e\u043b\u0431\u0446\u044b;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0441\u043f\u0438\u0441\u043e\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u0441\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0441\u043f\u0438\u0441\u043e\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0442\u0435\u043a\u0441\u0442\u041a\u043e\u0434\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0442\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430,\u0432\u044b\u0441\u043e\u0442\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442\u041a\u043e\u0434\u0430(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430,\u0432\u044b\u0441\u043e\u0442\u0430\u0425\u043e\u043b\u0441\u0442\u0430\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0442\u0435\u043a\u0441\u0442;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0445\u043e\u043b\u0441\u0442 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0445\u043e\u043b\u0441\u0442(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430,\u0432\u044b\u0441\u043e\u0442\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0425\u043e\u043b\u0441\u0442(\u0442\u0435\u043a\u0441\u0442,\u0448\u0438\u0440\u0438\u043d\u0430,\u0432\u044b\u0441\u043e\u0442\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0445\u043e\u043b\u0441\u0442;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u0438\u0433\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u0438\u0433\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u0438\u0433\u0430\u041f\u043e\u0421\u0441\u044b\u043b\u043a\u0435 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b,\u0433\u043b\u0430\u0432\u0430,\u043f\u0435\u0440\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430,\u0432\u0442\u043e\u0440\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430\u041f\u043e\u0421\u0441\u044b\u043b\u043a\u0435(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b,\u0433\u043b\u0430\u0432\u0430,\u043f\u0435\u0440\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430,\u0432\u0442\u043e\u0440\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u0438\u0433\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a, _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a,  _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.svg = \u043a\u043b\u0430\u0441\u0441 {\n      svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u044b\u0439Svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.svg;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043c\u0435\u043d\u044e = \u043a\u043b\u0430\u0441\u0441 {\n      \u043c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043c\u0435\u043d\u044e;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div = \u043a\u043b\u0430\u0441\u0441 {\n      div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c) {\n        id = \u043d\u043e\u0432\u044b\u0439Div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.div;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440() {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440();\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435;\n    "}convertBookPageText(a,l,h){let f=(new HE).parseAndJoin(a),p=this.getStdSrc()+f+" \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g=new WE,m=C=>{C.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u0435\u0440\u0441\u0438\u044f",g.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.config?this.config.environment.version:"\u0412\u0435\u0440\u0441\u0438\u044f 2.0+")),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0421\u043f\u0438\u0441\u043e\u043a\u041a\u043d\u0438\u0433\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438",(x,w)=>{let O=x.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432");return this.libraryInfo&&O.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.libraryInfo.content.map(D=>{let T=x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(D.name));let M=this.libraryInfo.settings.find(k=>k.name==D.name);return T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u043c\u044f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(M?M.value:"")),T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",x.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((M&&M.value2?M.value2:[]).map(k=>x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(k)))),T})),O}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u043d\u0438\u0433\u0443",(x,w)=>{let O=this.uiConfig?this.uiConfig.ui.currentBook.getStringValue():"";return x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(x,w)=>{var D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]);let T=this.uiConfig?this.uiConfig.ui.visitedBooksHelp.getStringValue():"";if(this.uiConfig)switch(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":T=this.uiConfig.ui.visitedBooksHelp.getStringValue();break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":T=this.uiConfig.ui.visitedMemorialHelp.getStringValue();break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":T=this.uiConfig.ui.visitedCalculatorHelp.getStringValue();break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":T=this.uiConfig.ui.visitedCalendarHelp.getStringValue();break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":T=this.uiConfig.ui.visitedCompilerHelp.getStringValue();break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":T=this.uiConfig.ui.visitedSchedulerHelp.getStringValue()}return x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(x,w)=>{var D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]),M=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[2]);if(this.uiConfig)switch(M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":this.uiConfig.ui.visitedBooksHelp.setStringValue(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.uiConfig.ui.visitedMemorialHelp.setStringValue(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCalculatorHelp.setStringValue(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":this.uiConfig.ui.visitedCalendarHelp.setStringValue(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCompilerHelp.setStringValue(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":this.uiConfig.ui.visitedSchedulerHelp.setStringValue(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return w[0]}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u041a\u043d\u0438\u0433\u0438",(x,w)=>{var D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]);return this.onNewTitleEvent.run(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this.config?.messageBus.sendMessage(Hy.builder().setType("MemorialNewTitle").setText(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTarget("MemorialMainWindow")),w[0]}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(x,w)=>{let D=this.uiConfig?this.uiConfig.ui.currentOffset.getNumberValue():0;D<0&&(D=this.uiConfig?this.uiConfig.ui.currentPersonOffset.getNumberValue():0);let T=ii.getKafizmNumberBy(17,D);return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(x,w)=>{var D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]);return this.uiConfig&&this.uiConfig.ui.currentOffset.setNumberValue(ii.getOffsetByKafizmNumber(17,D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),D}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(x,w)=>{let O=this.uiConfig?this.uiConfig.ui.memorialChapterRequested.getNumberValue():0;return this.uiConfig?.ui.memorialChapterRequested.setNumberValue(-1),x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(x,w)=>{let O=this.uiConfig?this.uiConfig.ui.currentMemorialPsalom.getNumberValue():0;return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(x,w)=>{var D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setNumberValue(D.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),D}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(x,w)=>{let O=!this.uiConfig||this.uiConfig.ui.showMolitvy.getBooleanValue();return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(x,w)=>{var D=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setBooleanValue(D.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),D}),g.addMethod(C,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c",(x,w)=>{let O=!this.uiConfig||this.uiConfig.ui.memorialPsaltir.getBooleanValue();return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041e\u0431\u043b\u043e\u0436\u043a\u0443",(x,w)=>{let O=!this.uiConfig||this.uiConfig.ui.showFacePage.getBooleanValue();return x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(O)}),g.addMethod(C,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438",(x,w)=>{let O=x.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([]);if(this.memorialSvc){let D=this.memorialSvc.getMemorials();D&&D.items.forEach(T=>{let M=x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");M.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.set("\u0438\u043c\u044f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T.name)),O.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(M)})}return O}),g.addMethod(C,"\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\u0421\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u0438",(x,w)=>{var D=w[2],T=w[3],M=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]),k=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D),E=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T);return E.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()||this.audioSvc?.stop(),this.audioSvc?.startCheckUI(P=>{},M.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),E.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),g.addMethod(C,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",(x,w)=>{var D=w[2],T=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]),M=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D);return this.config?.messageBus.removeAllTargetHandlers(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this.addSubscription(this.config?.messageBus.addTargetHandler(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),k=>{this.config?.post(()=>{let E=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(E),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",M);let P=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),V=P.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();V&&(V.set("\u0446\u0435\u043b\u044c",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(k.target)),V.set("\u0442\u0435\u043a\u0441\u0442",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(k.text)),V.set("\u0442\u0438\u043f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(k.type)),V.set("\u043f\u043e\u0434\u0442\u0438\u043f",x.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(k.subType))),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",P),g.run("\n              \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435);\n              \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n            ",v,E,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})})),x.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),g.addMethod(C,"\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\u0426\u0435\u043b\u0435\u0432\u043e\u0435\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",(x,w)=>{var D=w[2],T=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w[1]),M=x.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D);return this.config?.messageBus.sendMessage(Hy.builder().setTarget(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setText(M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),M}),g.addBookmarksEnvironment(C,this.uiConfig)},v=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),y=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(y);let _=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));return g.addMethod(_,"\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),D=this.convertBookPageText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),l,h);return C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(D)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442",(C,x)=>C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1])),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430",(C,x)=>{var O=x[2],D=x[3],T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),M=O?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O):null,k=D?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D):null;let E=Qr.builder().setClasses($z.getLastClass("")).setText(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),P=Zz.builder().setText(E.text).setOnClick(()=>{let I=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),U=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");m(I),I.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",P.tag.data),I.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0433\u0430\u043b\u043e\u0447\u043a\u0430",U),g.addMethod(U,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(H,J)=>{var B=H.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(J[1]);return P.text=B.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),g.addMethod(U,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0430\u043b\u043e\u0447\u043a\u0443",(H,J)=>{var B=H.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(J[1]);return P.classes.setCheck(B.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0433\u0430\u043b\u043e\u0447\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,I,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});P.classes.setCheck(!!M&&M.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),P.setTag(xg.builder().setData(k));let V=h();return l.set(V,E.setComponent(new Wn(Vit,P))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${V}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430",(C,x)=>{var O=x[2],D=x[3],T=x[4],M=x[5],k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),E=O?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O):null,P=D?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D):null,V=T?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T):null,I=M?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(M):null;let U=!1;P&&P.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(ee=>{"outline"===ee&&(U=!0)});let $=Qr.builder().setClasses($z.getLastClass(E?E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"")).setText(k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),H=$E.builder().setText($.text).setOnClick(()=>{let ee=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(ee);let B=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");ee.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",H.tag.data),ee.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043a\u043d\u043e\u043f\u043a\u0430",B),g.addMethod(B,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(W,j)=>{var X=W.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(j[1]);return H.text=X.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),g.addMethod(B,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434",(W,j)=>{var X=W.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(j[1]);return this.onRouteEvent.run(X?X.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043a\u043d\u043e\u043f\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,ee,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});H.setTag(xg.builder().setData(V)),H.classes.setBlock(!I||I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setType(E?E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"primary").setOutline(U);let J=h();return l.set(J,$.setComponent(new Wn(Vfe,H))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${J}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430\u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432",(C,x)=>{var w=x[1],O=w?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null;let D=Qr.builder(),T=h(),M=S9.builder().setOnClick(k=>{let E=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(E);let P=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",M.tag.data),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043a\u043d\u043e\u043f\u043a\u0430",P),E.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u0441\u044b\u043b\u043a\u0430",g.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(k)),g.addMethod(P,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434",(I,U)=>{var H=I.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(U[1]);return this.onRouteEvent.run(H?H.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043a\u043d\u043e\u043f\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,E,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});return M.setTag(xg.builder().setData(O)),l.set(T,D.setComponent(new Wn(zpt,M))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${T}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0435\u0421\u0442\u043e\u043b\u0431\u0446\u044b",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let D=Qr.builder(),T=h(),k=[],E=O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),V=(this.getFragments(l,E,k,[]),b9.builder().setComponents(k.map(I=>I.component).filter(I=>!!I).map(I=>I)));return l.set(T,D.setComponent(new Wn(Bpt,V))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${T}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a",(C,x)=>{var O=x[2],D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=O?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O):null;let M=Qr.builder(),k=Xz.builder().setItems(D?D.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(P=>this.makeFragmentComponents(P.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())):[]);k.classes.setOrdered(!!T&&T.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let E=h();return l.set(E,M.setComponent(new Wn(Wit,k))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${E}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]),P=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[4]),I=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[5]),$=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[6]);let H=Qr.builder(),J=Kz.builder();J.setReadonly(O.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setText(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setId(I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTargetId($.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),J.classes.setSlava1Zdrav(1==k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava1Upok(1==k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Zdrav(2==k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Upok(2==k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Zdrav(3==k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Upok(3==k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let ee=h();return l.set(ee,H.setComponent(new Wn(qfe,J))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${ee}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442\u041a\u043e\u0434\u0430",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]);let E=Qr.builder(),P=h();return l.set(P,E.setComponent(new Wn(Lpt,y9.builder().setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).updateConfig(V=>V.setResultEnabled(T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>0&&k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>0).setResultWidth(T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setResultHeight(k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${P}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0425\u043e\u043b\u0441\u0442",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]);let E=Qr.builder(),P=h();return l.set(P,E.setComponent(new Wn(m9,GO.builder().setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).updateConfig(V=>{V.setWidth(T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setHeight(k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())})))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${P}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let D=Qr.builder(),T=h();return l.set(T,D.setComponent(new Wn(Wc,Tl.builder().setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setHideUI(!0).setParallel(!0).setLinebreaks(!0).setLink(Dl.builder().setTextIsPage(!0).setBookName("Mem").setChapter("1").setStartLine(1).setEndLine(1e3).setOnRoute(M=>{}))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${T}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430\u041f\u043e\u0421\u0441\u044b\u043b\u043a\u0435",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[3]),P=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[4]);let V=Qr.builder(),I=h();return l.set(I,V.setComponent(new Wn(Wc,Tl.builder().setText(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setHideUI(!0).setParallel(!0).setLinebreaks(!0).setLink(Dl.builder().setTextIsPage(!1).setBookName(O.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setChapter(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setStartLine(k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setEndLine(P.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setOnRoute(U=>{}))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${I}}`)}),g.addMethod(_,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043d\u0438\u0433\u0443",(C,x)=>{var O=x[2],D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O);let M=T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();M=M.substring(1,M.length-1);let E=l.get(M)?.component?.data;return E&&E.setText(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),E?T:C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(C,x)=>{var O=x[2],D=x[3],T=x[4],M=x[5],k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),E=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O),P=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(T),V=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(D),I=M?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(M):null;V&&V.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(V=null);let U=Qr.builder(),$=h(),H=Mu.builder().setItems(k.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(J=>J).map(J=>ba.builder().setText(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(J.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(J.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(J.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==E.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())));return V&&H.classes.setLabelNormal(V.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),P&&H.classes.setNoPrint(P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),H.setTag(xg.builder().setData(I)),H.setOnClick(J=>{let ee=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));m(ee);let B=C.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");ee.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",H.tag.data),ee.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",B),ee.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u0433",C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(J.tag)),g.addMethod(B,"\u0432\u044b\u0431\u0440\u0430\u0442\u044c",(W,j)=>{var X=W.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(j[1]);return H.items.forEach(Y=>Y.setSelected(Y.tag==X.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),null}),g.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",v,ee,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),l.set($,U.setComponent(new Wn(XE,H))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${$}}`)}),g.addMethod(_,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(C,x)=>{var w=x[1],O=x[2],D=x[3],T=x[4],M=x[5],k=x[6],E=w?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null,P=O?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O):null,V=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(D),I=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(T),U=M?C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(M):null,$=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(k);E&&E.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(E=null),P&&P.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(P=null),V&&V.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(V=null),I&&I.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(I=null),U&&U.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(U=null);let H=$.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();H=H.substring(1,H.length-1);let ee=l.get(H)?.component?.data;return ee&&(E?ee.setItems(E.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(B=>B).map(B=>ba.builder().setText(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(B.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(B.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(C.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(B.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==P?.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))):ee.items.forEach(B=>B.setSelected(B.tag==P?.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))),V&&ee.classes.setLabelNormal(V.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),I&&ee.classes.setNoPrint(I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),U&&ee.setTag(xg.builder().setData(U)),ee?$:C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439Svg",(C,x)=>{var O=x[2],D=x[3],T=x[4],M=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O),E=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D),P=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T);let V=Qr.builder(),I=h();return l.set(I,V.setComponent(new Wn(Mst,y7.builder().setText("").setGenName(M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSvgWidth(k.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setSvgHeight(E.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).updateClasses(U=>U.setPrintOnly(P.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()))))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${I}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e",(C,x)=>{var O=x[2],D=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O);let M=Qr.builder(),k=h(),E=Tg.builder().setText("").setWhiteBack(!0);return E.menuState.setGenName("MenuDay2").setPrintOnly(T.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),D.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(P=>P).forEach(P=>{E.addCommand(Ua.builder().setName(P.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(P.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),l.set(k,M.setComponent(new Wn(BE,E))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${k}}`)}),g.addMethod(_,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041c\u0435\u043d\u044e",(C,x)=>{var O=x[2],D=x[3],T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),M=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O);let E=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();E=E.substring(1,E.length-1);let V=l.get(E)?.component?.data;if(V){let I=vg.builder().setGenName("MenuDay2").setPrintOnly(M.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());T.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(U=>U).forEach(U=>{I.addCommand(Ua.builder().setName(U.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(U.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),V.setMenuState(I)}return C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${E}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439Div",(C,x)=>{var O=x[2],D=x[3],T=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),M=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(O),k=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D);let E=Qr.builder(),P=h(),V=[],I=[],U=M.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),$=this.getFragments(l,U,I,V);return l.set(P,E.setComponent(new Wn(_7,KE.builder().setText(V.length?"":U).setId($).setComponents(I.map(H=>H.component).filter(H=>!!H).map(H=>H)).setWaitingForSenderid(k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).update(H=>{T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(ee=>{switch(ee.toLowerCase()){case"\u0440\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c":H.setFineText(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u0434\u043e":H.setPageBreakBefore(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u043f\u043e\u0441\u043b\u0435":H.setPageBreakAfter(!0);break;case"\u0442\u043e\u043b\u044c\u043a\u043e\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":H.setPrintOnly(!0);break;case"\u043d\u0435\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":H.setNoPrint(!0);break;default:H.addSClass(ee)}})})))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${P}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440",(C,x)=>{let w=Qr.builder(),O=h();return l.set(O,w.setComponent(new Wn(Bst,S7.builder().setText("").update(D=>{})))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${O}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d",(C,x)=>{var O=C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let D=O7.builder().setText("").update(k=>{});O.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(k=>k).forEach(k=>{let E=k.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.get("\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")?.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),P=k.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430()?.get("\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442")?.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();P&&(P=P.startsWith("{")?P.substring(1):P,P=P.endsWith("}")?P.substring(0,P.length-1):P);let V=l.get(P||"");V&&D.addItem(w7.builder().setTitle(E||"\u041f\u0443\u043d\u043a\u0442\u0438\u043a").setComponent(V.component))});let T=Qr.builder(),M=h();return l.set(M,T.setComponent(new Wn(Hst,D))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${M}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let D=T7.builder().setText("").update(k=>{}),T=Qr.builder(),M=h();return l.set(M,T.setComponent(new Wn(lft,D))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${M}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let D=j$.builder().setText("").update(k=>{}),T=Qr.builder(),M=h();return l.set(M,T.setComponent(new Wn(uft,D))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${M}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let D=G$.builder().setText("").update(k=>{}),T=Qr.builder(),M=h();return l.set(M,T.setComponent(new Wn(cft,D))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${M}}`)}),g.addMethod(_,"\u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",(C,x)=>{C.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let D=f9.builder().setText("").update(k=>{}),T=Qr.builder(),M=h();return l.set(M,T.setComponent(new Wn(_pt,D))),C.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${M}}`)}),g.run(p,v,y,_).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}getFragments(a,l,h,d){let f="";return l.startsWith("{")&&l.endsWith("}")&&(d=l.split(",").filter(p=>{let g=!1;return p.startsWith("{")&&p.endsWith("}")&&(g=!0),g}).map(p=>p.substring(1,p.length-1))),d.forEach(p=>{let g=a.get(p);g&&(f||(f=p),h.push(g))}),f}makeFragmentComponents(a){let l=this.converter.parseFragments(new Map,f=>f,a),h=[Gw.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(l).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(!1).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(Ww.\u0422\u0435\u043a\u0441\u0442)],d=T1.builder().setText(a);return d.config.setLineIndex(0).setBook(z3.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(h)),new Wn(zE,d)}loadBookPageText(a,l=null){if(!a)return void(l&&l(!1));let h=0,f=new Map,p=z3.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438([]);this.convertBookPageText(a,f,()=>""+h++).split("\n").forEach((m,v)=>{let y=this.transformLine(m),_=this.converter.parseFragments(f,C=>{let x="";if(this.libraryInfo){let w=this.libraryInfo.content.find(O=>O.path2?.find(D=>D==C));w&&(x=w.name)}return x},y.trim(),(!this.uiConfig||this.uiConfig.ui.coloredTranslations.getBooleanValue())&&this.books.length%2?"redDark":"red",!0,this.dictionariesSvc),b=T1.builder().setText(y.trim());b.config.setBook(p).setBookSvc(this),p.\u0441\u0442\u0440\u043e\u043a\u0438.push(Gw.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(_).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new Wn(zE,b)))}),this.books.push(p.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(this.books.length)),this.generateLineIndexes(),l&&l(!0)}isZeroLineFound(a){return 0==a[0].fragments.length||a[0].\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.map(l=>!!l.classes.redDark||!!l.classes.red).reduce((l,h)=>l&&h)}generateLineIndexes(){this.lineIndexes=[];let a=this.books.map(f=>f.\u0441\u0442\u0440\u043e\u043a\u0438.length+(this.isZeroLineFound(f.\u0441\u0442\u0440\u043e\u043a\u0438)?0:1)).reduce((f,p)=>Math.max(f,p));this.books.map(f=>this.isZeroLineFound(f.\u0441\u0442\u0440\u043e\u043a\u0438)).reduce((f,p)=>p||f,!1),this.books.forEach(f=>{let p=!1;this.isZeroLineFound(f.\u0441\u0442\u0440\u043e\u043a\u0438)&&(p=!0);let g=()=>Gw.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new Wn(zE,T1.builder())),m=f.\u0441\u0442\u0440\u043e\u043a\u0438.map(v=>0==v.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.length).reduce((v,y)=>v&&y,!0);for(f.\u0441\u0442\u0440\u043e\u043a\u0438.length<a&&!p&&(f.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),f.\u0441\u0442\u0440\u043e\u043a\u0438.unshift(g()));f.\u0441\u0442\u0440\u043e\u043a\u0438.length<a;)m&&f.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),f.\u0441\u0442\u0440\u043e\u043a\u0438.push(g())});let h=this.getNormalBookName(),d=h.indexOf("VZ")>=0||h.indexOf("NZ")>=0;this.books.forEach((f,p)=>{for(f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(p),f.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((g,m)=>{g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(d),g.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442&&g.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.constructor===T1&&g.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.config.setLineIndex(m)});this.lineIndexes.length<f.\u0441\u0442\u0440\u043e\u043a\u0438.length;)this.lineIndexes.push(this.lineIndexes.length)})}toggleLanguage(a){return this.isLanguageEnabled(a)?this.bookLanguages=this.bookLanguages.filter(l=>l!=a):this.bookInfo&&null!=this.bookInfo.content.find(l=>l.name==a)&&this.bookLanguages.push(a),!this.bookLanguages.length&&this.bookInfo&&this.bookInfo.content&&this.bookLanguages.push(this.bookInfo.content[0].name),this}getShortBookName(a=null){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let l=a||this.bookName,h=this.getBookContentNamePath(l),d=l;if(h){if(!h.path2||!h.path2.length)throw new Error(`\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0438\u043c\u044f \u0434\u043b\u044f \u043a\u043d\u0438\u0433\u0438 "${l}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.`);d=h.path2[0]}return d}getNormalBookName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let a=this.getBookContentNamePath(this.bookName),l=this.bookName;return a&&(l=a.name),l}getBookChapterNewName(){let a=this.bookChapterNewName,l=M1.builder().parse(this.bookName);if(null!=l&&l.length&&l[0].length){let h=l[0][0];h.type==ic.Link&&(a=""+h.startChapter)}return a}getBookTitleName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let a=this.getBookSettingsNamePath(this.bookName),l=this.bookName;return a&&(l=a.value),l}getChapterTitleName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let a=this.bookChapter?this.bookChapter.name:"1",l=this.bookContent[0]?.parsed?.settings.find(d=>d.name===a),h="";if(l){h=l.value;let d=".txt";h.endsWith(d)&&(h=h.substring(0,h.length-d.length)),+h==+a&&(h="")}return h}getNormalBookNameByBookPath(a){let l=this.libraryInfo?.content.find(h=>a.startsWith(h.path));return l?l.name:null}transformLine(a){return this.linesTransformer?this.linesTransformer.transform(a):a}}class T9{constructor(){}static builder(){return new T9}}class k9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"bookName",""),S(this,"bookTitle",""),S(this,"bookChapter",""),S(this,"bookLanguages",[]),S(this,"printEventsEmitter",new Mt),S(this,"printerHandler",null),S(this,"showSettings",!0),this.classes=d}static builder(){return new k9("",null,null,T9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setBookName(a){return this.bookName=a,this}setBookTitle(a){return this.bookTitle=a,this}setBookChapter(a){return this.bookChapter=a,this}setBookLanguages(a){return this.bookLanguages=a,this}setEpubPrinterHandler(a){return this.printerHandler=a,this}setShowSettings(a){return this.showSettings=a,this}}const Wpt=["booksViewTables"];function Gpt(c,a){1&c&&pe(0,"app-dynamic-errors",18),2&c&&L("data",q(2).bookTitleData)}const Qpt=function(c,a){return{btn:!0,"btn-primary":c,"btn-primary-outline":a,"btn-block":!0}};function jpt(c,a){if(1&c){const l=ct();R(0,"clr-accordion-panel",24),ie("clrAccordionPanelOpenChange",function(d){return Ee(l),Ae(q(2).showSettings=d)}),R(1,"clr-accordion-title"),se(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),N(),R(3,"clr-accordion-content"),pe(4,"app-dynamic-settings"),R(5,"div",25)(6,"div",26)(7,"div",27)(8,"button",28),ie("click",function(){return Ee(l),Ae(q(2).printBook())}),pe(9,"clr-icon",29),se(10," \u041f\u0435\u0447\u0430\u0442\u044c PDF "),N()(),R(11,"div",27)(12,"button",30),ie("click",function(){return Ee(l),Ae(q(2).printBookEpub())}),pe(13,"clr-icon",31),se(14," \u041f\u0435\u0447\u0430\u0442\u044c EPUB "),N()()()()()()}if(2&c){const l=q(2);L("clrAccordionPanelOpen",l.showSettings),F(12),L("ngClass",Wr(2,Qpt,!l.modalPrintEpubFlag,l.modalPrintEpubFlag))}}function Zpt(c,a){if(1&c){const l=ct();R(0,"clr-accordion-panel",24),ie("clrAccordionPanelOpenChange",function(d){return Ee(l),Ae(q(2).showLanguages=d)}),R(1,"clr-accordion-title"),se(2,"\u042f\u0437\u044b\u043a\u0438 \u0438 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b"),N(),R(3,"clr-accordion-content"),pe(4,"app-dynamic-content-toolbar",18),N()()}if(2&c){const l=q(2);L("clrAccordionPanelOpen",l.showLanguages),F(4),L("data",l.toolbarLangData)}}function qpt(c,a){if(1&c){const l=ct();R(0,"clr-accordion-panel",24),ie("clrAccordionPanelOpenChange",function(d){return Ee(l),Ae(q(2).showChapters=d)}),R(1,"clr-accordion-title"),se(2,"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435"),N(),R(3,"clr-accordion-content"),pe(4,"app-dynamic-content-toolbar",18),N()()}if(2&c){const l=q(2);L("clrAccordionPanelOpen",l.showChapters),F(4),L("data",l.toolbarData)}}function Xpt(c,a){if(1&c&&(R(0,"div",3),pe(1,"app-dynamic-errors",18),K(2,Gpt,1,1,"app-dynamic-errors",21),R(3,"clr-accordion",22),K(4,jpt,15,5,"clr-accordion-panel",23),K(5,Zpt,5,2,"clr-accordion-panel",23),K(6,qpt,5,2,"clr-accordion-panel",23),N()()),2&c){const l=q();L("ngClass",l.getMainDivClasses()),F(1),L("data",l.errorsData),F(1),L("ngIf",l.toolbarLangData),F(2),L("ngIf",l.showSettings),F(1),L("ngIf",l.showLanguages),F(1),L("ngIf",l.showChapters&&!l.staticView)}}function Ypt(c,a){if(1&c){const l=ct();R(0,"button",30),ie("click",function(){return Ee(l),Ae(q(2).onPrev())}),se(1,"<<"),N()}2&c&&L("ngClass",q(2).getChapterButtonClass())}function Kpt(c,a){if(1&c){const l=ct();R(0,"button",30),ie("click",function(){return Ee(l),Ae(q(2).scrollToText())}),se(1),N()}if(2&c){const l=q(2);L("ngClass",l.getChapterButtonClass()),F(1),Ht(l.getCurrentChapterName())}}function Jpt(c,a){if(1&c){const l=ct();R(0,"button",30),ie("click",function(){return Ee(l),Ae(q(2).onNext())}),se(1,">>"),N()}2&c&&L("ngClass",q(2).getChapterButtonClass())}const egt=function(c){return{"clr-row":!0,"fade-in-3":!0,"bottom-top-space":!0,"no-print":c}};function tgt(c,a){if(1&c&&(R(0,"div",3)(1,"div",32),K(2,Ypt,2,1,"button",33),N(),R(3,"div",27),K(4,Kpt,2,2,"button",33),N(),R(5,"div",32),K(6,Jpt,2,1,"button",33),N()()),2&c){const l=q();L("ngClass",ds(4,egt,!!l.changesDetectorBookDataText.oldRawValue)),F(2),L("ngIf",l.bookSvc.isPrevEnabled()),F(2),L("ngIf",l.bookSvc.lineIndexes.length),F(2),L("ngIf",l.bookSvc.isNextEnabled())}}function ngt(c,a){1&c&&(R(0,"div",36)(1,"div",37),pe(2,"app-dynamic-spinner"),N()())}function igt(c,a){if(1&c&&(R(0,"span",3),se(1),N()),2&c){const l=a.$implicit;L("ngClass",l.classes),F(1),Ht(l.text)}}function rgt(c,a){if(1&c&&(R(0,"div",3),K(1,igt,2,2,"span",39),N()),2&c){const l=a.$implicit,h=a.index,d=q(3);L("ngClass",d.getColumnClass(l,h,d.bookSvc.books.length)),F(1),L("ngForOf",d.getBookFragments(h,l,-1))}}function sgt(c,a){if(1&c&&(R(0,"div",38),K(1,rgt,2,2,"div",39),N()),2&c){const l=q(2);F(1),L("ngForOf",l.bookSvc.books)}}function ogt(c,a){if(1&c){const l=ct();R(0,"div",3)(1,"span",30),ie("click",function(){Ee(l);const d=q().$implicit;return Ae(q(2).selectLine(d))}),pe(2,"app-add-component",40),N()()}if(2&c){const l=a.$implicit,h=a.index,d=q().$implicit,f=q(2);L("ngClass",f.getColumnClass(l,h,f.bookSvc.books.length)),F(1),L("ngClass",f.getLineSelectionClass(l,d)),F(1),L("component",f.getComponent(l,d))}}function agt(c,a){if(1&c&&(R(0,"div",38),K(1,ogt,3,3,"div",39),N()),2&c){const l=q(2);F(1),L("ngForOf",l.bookSvc.books)}}function lgt(c,a){if(1&c&&(R(0,"div"),K(1,ngt,3,0,"div",6),K(2,sgt,2,1,"div",34),K(3,agt,2,1,"div",35),N()),2&c){const l=q();F(1),L("ngIf",!l.bookSvc.lineIndexes.length),F(1),L("ngIf",!l.hideUI),F(1),L("ngForOf",l.getBookIndexes(l.bookSvc.lineIndexes))}}function cgt(c,a){1&c&&(R(0,"div",37),pe(1,"app-dynamic-spinner"),N())}function ugt(c,a){if(1&c&&(R(0,"span",3),se(1),N()),2&c){const l=a.$implicit;L("ngClass",l.classes),F(1),Ht(l.text)}}function hgt(c,a){if(1&c&&(R(0,"div",43),K(1,ugt,2,2,"span",39),N()),2&c){const l=a.$implicit,h=a.index,d=q(2);L("ngClass",d.getColumnClass(l,h,d.bookSvc.books.length))("hidden",d.hideUI),F(1),L("ngForOf",d.getBookFragments(h,l,-1))}}function dgt(c,a){1&c&&(R(0,"span",46),se(1,"."),N())}function fgt(c,a){if(1&c){const l=ct();R(0,"span",30),ie("click",function(){const f=Ee(l).$implicit;return Ae(q(3).selectLine(f))}),R(1,"span"),pe(2,"app-add-component",40),N(),K(3,dgt,2,0,"span",45),N()}if(2&c){const l=a.$implicit,h=q().$implicit,d=q(2);L("ngClass",d.getLineSelectionClass(h,l)),F(2),L("component",d.getComponent(h,l)),F(1),L("ngIf",d.isSpaceAppended(h,l))}}function pgt(c,a){if(1&c&&(R(0,"div",3),K(1,fgt,4,3,"span",44),N()),2&c){const l=a.$implicit,h=a.index,d=q(2);L("ngClass",d.getColumnClass(l,h,d.bookSvc.books.length)),F(1),L("ngForOf",d.getBookIndexes(d.bookSvc.lineIndexes))}}function ggt(c,a){if(1&c&&(R(0,"div",36),K(1,cgt,2,0,"div",41),K(2,hgt,2,3,"div",42),K(3,pgt,2,2,"div",39),N()),2&c){const l=q();F(1),L("ngIf",!l.bookSvc.lineIndexes.length),F(1),L("ngForOf",l.bookSvc.books),F(1),L("ngForOf",l.bookSvc.books)}}function mgt(c,a){1&c&&(R(0,"div",49),pe(1,"app-dynamic-spinner"),N())}function vgt(c,a){if(1&c&&(R(0,"span",3),se(1),N()),2&c){const l=a.$implicit;L("ngClass",l.classes),F(1),Ht(l.text)}}function ygt(c,a){if(1&c&&(R(0,"div",3)(1,"div",50),K(2,vgt,2,2,"span",39),N()()),2&c){const l=a.$implicit,h=a.index,d=q(3);L("ngClass",d.getRowClass(l,h,d.bookSvc.books.length)),F(2),L("ngForOf",d.getBookFragments(h,l,-1))}}function _gt(c,a){if(1&c&&(R(0,"div",49),K(1,ygt,3,2,"div",39),N()),2&c){const l=q(2);F(1),L("ngForOf",l.bookSvc.books)}}function bgt(c,a){if(1&c){const l=ct();R(0,"div",3)(1,"div",50)(2,"span",30),ie("click",function(){Ee(l);const d=q().$implicit;return Ae(q(2).selectLine(d))}),pe(3,"app-add-component",40),N()()()}if(2&c){const l=a.$implicit,h=a.index,d=q().$implicit,f=q(2);L("ngClass",f.getRowClass(l,h,f.bookSvc.books.length)),F(2),L("ngClass",f.getLineSelectionClass(l,d)),F(1),L("component",f.getComponent(l,d))}}function Cgt(c,a){if(1&c&&(R(0,"div",49),K(1,bgt,4,3,"div",39),N()),2&c){const l=q(2);F(1),L("ngForOf",l.bookSvc.books)}}function Sgt(c,a){if(1&c&&(R(0,"div"),K(1,mgt,2,0,"div",47),K(2,_gt,2,1,"div",47),K(3,Cgt,2,1,"div",48),N()),2&c){const l=q();F(1),L("ngIf",!l.bookSvc.lineIndexes.length),F(1),L("ngIf",!l.hideUI),F(1),L("ngForOf",l.getBookIndexes(l.bookSvc.lineIndexes))}}function xgt(c,a){1&c&&(R(0,"div",37),pe(1,"app-dynamic-spinner"),N())}function wgt(c,a){1&c&&(R(0,"span",46),se(1,"."),N())}function Ogt(c,a){if(1&c&&(R(0,"span",3),se(1),N()),2&c){const l=a.$implicit;L("ngClass",l.classes),F(1),Ht(l.text)}}function Dgt(c,a){if(1&c&&(R(0,"span",3),K(1,wgt,2,0,"span",45),K(2,Ogt,2,2,"span",39),N()),2&c){const l=a.$implicit,h=a.index,d=q(3);L("ngClass",d.getRowClass(l,h,d.bookSvc.books.length,!1)),F(1),L("ngIf",h>0),F(1),L("ngForOf",d.getBookFragments(h,l,-1))}}function Tgt(c,a){if(1&c&&(R(0,"div",50),K(1,Dgt,3,3,"span",39),N()),2&c){const l=q(2);F(1),L("ngForOf",l.bookSvc.books)}}function kgt(c,a){1&c&&(R(0,"span",46),se(1,"."),N())}function Mgt(c,a){if(1&c){const l=ct();R(0,"span",3)(1,"span",30),ie("click",function(){Ee(l);const d=q().$implicit;return Ae(q(2).selectLine(d))}),K(2,kgt,2,0,"span",45),pe(3,"app-add-component",40),N()()}if(2&c){const l=a.$implicit,h=a.index,d=q().$implicit,f=q(2);L("ngClass",f.getRowClass(l,h,f.bookSvc.books.length,!1)),F(1),L("ngClass",f.getLineSelectionClass(l,d)),F(1),L("ngIf",h>0||f.isLineIndexed(l,d)),F(1),L("component",f.getComponent(l,d))}}function Egt(c,a){if(1&c&&(R(0,"span"),K(1,Mgt,4,4,"span",39),N()),2&c){const l=q(2);F(1),L("ngForOf",l.bookSvc.books)}}function Agt(c,a){if(1&c&&(R(0,"div",51),K(1,xgt,2,0,"div",41),K(2,Tgt,2,1,"div",52),R(3,"div",50),K(4,Egt,2,1,"span",53),N()()),2&c){const l=q();F(1),L("ngIf",!l.bookSvc.lineIndexes.length),F(1),L("ngIf",!l.hideUI),F(2),L("ngForOf",l.getBookIndexes(l.bookSvc.lineIndexes))}}function Igt(c,a){if(1&c){const l=ct();R(0,"button",30),ie("click",function(){return Ee(l),Ae(q(2).onPrev())}),se(1,"<<"),N()}2&c&&L("ngClass",q(2).getChapterButtonClass())}function Pgt(c,a){if(1&c){const l=ct();R(0,"button",30),ie("click",function(){return Ee(l),Ae(q(2).scrollToText())}),se(1),N()}if(2&c){const l=q(2);L("ngClass",l.getChapterButtonClass()),F(1),Ht(l.getCurrentChapterName())}}function Rgt(c,a){if(1&c){const l=ct();R(0,"button",30),ie("click",function(){return Ee(l),Ae(q(2).onNext())}),se(1,">>"),N()}2&c&&L("ngClass",q(2).getChapterButtonClass())}const Fgt=function(c){return{"clr-row":!0,"fade-in-3":!0,"top-space":!0,"no-print":c}};function Lgt(c,a){if(1&c&&(R(0,"div",3)(1,"div",32),K(2,Igt,2,1,"button",33),N(),R(3,"div",27),K(4,Pgt,2,2,"button",33),N(),R(5,"div",32),K(6,Rgt,2,1,"button",33),N()()),2&c){const l=q();L("ngClass",ds(4,Fgt,!!l.changesDetectorBookDataText.oldRawValue)),F(2),L("ngIf",l.bookSvc.isPrevEnabled()),F(2),L("ngIf",l.bookSvc.lineIndexes.length),F(2),L("ngIf",l.bookSvc.isNextEnabled())}}function Ngt(c,a){if(1&c){const l=ct();R(0,"div",27)(1,"button",55),ie("click",function(){return Ee(l),Ae(q(2).printBookEpub())}),pe(2,"clr-icon",58),se(3,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),N()()}}const Bgt=function(c,a){return{"clr-col-6":c,"clr-col-12":a}};function Vgt(c,a){if(1&c){const l=ct();R(0,"div",54)(1,"div",3)(2,"button",55),ie("click",function(){return Ee(l),Ae(q().printBook())}),pe(3,"clr-icon",56),se(4,"\u041f\u0435\u0447\u0430\u0442\u044c PDF"),N()(),K(5,Ngt,4,0,"div",57),N()}if(2&c){const l=q();F(1),L("ngClass",Wr(2,Bgt,l.bookData.enableEpub,!l.bookData.enableEpub)),F(4),L("ngIf",l.bookData.enableEpub)}}function Ugt(c,a){if(1&c){const l=ct();R(0,"button",15),ie("click",function(){return Ee(l),Ae(q().modalPrintEpubFlag=!1)}),pe(1,"clr-icon",59),se(2," \u041e\u0442\u043c\u0435\u043d\u0430"),N()}}function zgt(c,a){if(1&c){const l=ct();R(0,"button",14),ie("click",function(){return Ee(l),Ae(q().onStartPrintEpub())}),pe(1,"clr-icon",56),se(2," \u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c"),N()}}class H3{constructor(a){S(this,"transformers",void 0),this.transformers=a}static builder(){return new H3([])}addTransformer(a){return this.transformers.push(a),this}transform(a){let l=a;return this.transformers.forEach(h=>l=h.transform(l)),l}}class $3{static builder(){return new $3}transform(a){let l="";for(let h=0;h<a.length;h++){let d=a.charAt(h);l+="["==d?"{\u043a}"+d:"]"==d?d+"{/\u043a}":d}return l}}class W3{constructor(a=200){S(this,"maxStringLength",void 0),this.maxStringLength=a}static builder(){return new W3}getIndexCount(a,l){let h=0,d=0;for(var f=new RegExp(l);d<a.length;){let g=a.substring(d);var p=f.exec(g);p?(++h,d=d+p.index+p[0].length):d+=g.length}return h}transform(a){let l=a.indexOf(":"),h=a;if(l>=0&&l<=this.maxStringLength&&l+1==a.length){let d=a.substring(0,l+1),f=d.toLowerCase();[{str:"\\.",count:0},{str:"\\/",count:0}].map(p=>this.getIndexCount(f,p.str)<=p.count).reduce((p,g)=>g&&p,!0)&&[{str:"\u0442\u0440\u043e\u043f\u0430\u0440",count:1},{str:"\u043a\u043e\u043d\u0434\u0430\u043a",count:1},{str:"\u0433\u043b\u0430\u0441",count:1},{str:"\u0432\u0435\u043b\u0438\u0447\u0430\u043d\u0438\u0435",count:1}].map(p=>this.getIndexCount(f,p.str)>=p.count).reduce((p,g)=>g||p,!1)&&(d.startsWith("*")&&(d=d.substring(1)),h=`{\u043a}${d}{/\u043a}${a.substring(l+1)}`)}return h}}class M9{constructor(a){S(this,"search",void 0),S(this,"includeWords",[]),S(this,"excludeWords",[]),this.search=a}static builder(){return new M9("")}setup(){let a=this.search.split(/\s+/);this.includeWords=[],this.excludeWords=[];for(let l=0;l<a.length;++l)if("\u041d\u0415"==a[l]){if(l+1<a.length){let h=a[++l].trim();h&&this.excludeWords.push(h.toLowerCase())}}else a[l].trim()&&this.includeWords.push(a[l].trim().toLowerCase())}setSearch(a){return this.search=a,this.setup(),this}startsWith(a,l,h){let d="";return h.forEach(f=>{var p=new RegExp(f);let g=a.substring(l);var m=p.exec(g);m&&0==m.index&&d.length<f.length&&(d=m[0])}),d}transform(a){if(0==this.includeWords.length)return a;let l=a.toLowerCase(),h="",d=-1,f=p=>{let g=0;if(d>=0){let m=a.substring(d,p);h+=m,g=m.length,d=-1}return g};for(let p=0;p<a.length;){let g=this.startsWith(l,p,this.includeWords);if(g){let m=p;f(p),h+=`{\u043a}${a.substring(m,m+g.length)}{/\u043a}`,p+=g.length}else d<0&&(d=p),++p}return f(a.length),h}}let Wc=(()=>{class c{get showSettings(){return this.stgShowSettings.enabled}set showSettings(l){this.stgShowSettings.setEnabled(l)}get showLanguages(){return this.stgLanguages.enabled}set showLanguages(l){this.stgLanguages.setEnabled(l)}get showChapters(){return this.stgChapters.enabled}set showChapters(l){this.stgChapters.setEnabled(l)}get toolbarLangData(){return this.syncToolbarData(),this.dToolbarLangData}get toolbarData(){return this.syncToolbarData(),this.dToolbarData}get staticView(){return this.bookData.link&&(this.bookData.link.textIsPage||this.bookData.link.chapter&&(this.bookData.link.startLine>0||this.bookData.link.endLine>0))}get hideUI(){return this.bookData.hideUI}get showPrintButtons(){return this.bookData.showPrintButtons}getMenuLinks(){return this.menuLinks||(this.menuLinks=this.bookData.menuLinks,null!=this.menuLinks||(this.menuLinks=[],["\u043c\u0435\u043d\u044e","\u043a\u043d\u0438\u0433\u0430","\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438","\u0441\u043f\u0440\u0430\u0432\u043a\u0430"].forEach(l=>{switch(l){case"\u043c\u0435\u043d\u044e":this.menuLinks.push(ai.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.menuLinks.push(ai.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043a\u043d\u0438\u0433\u0430":this.menuLinks.push(ai.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0430").setShape("book").setIsActive(()=>!0));break;case"\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438":this.menuLinks.push(ai.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")},0)}).setIsActive(()=>!1));break;case"\u0441\u043f\u0440\u0430\u0432\u043a\u0430":this.menuLinks.push(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")},0)}).setIsActive(()=>{let h=this.bookSvc.bookInfo?.settings.find(d=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==d.name.toLowerCase());return!!h&&"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"==h.value}))}}))),this.menuLinks}saveChapter(){if(this.bookSvc.bookChapter){this.uiConfig.ui.currentChapter.setStringValue(this.bookSvc.bookChapter.name),this.uiConfig.ui.currentLanguages.setStringValue(this.bookSvc.bookLanguages.join("|"));let l=this.bookSvc.bookInfo?.settings.find(f=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==f.name.toLowerCase()),h=this.bookSvc.libraryInfo?.content.find(f=>f.name==this.bookSvc.bookName),d=h?h.path2[0]+". "+this.bookSvc.bookChapter.name:"";this.uiConfig.ui.currentBookName.setStringValue(l?l.value:""),this.uiConfig.ui.currentBookLink.setStringValue(d)}}get parallel(){return null!=this.bookData.parallel?this.bookData.parallel:this.uiConfig.ui.parallel.getAndVerifyBooleanValue()}get lineBreaks(){return null!=this.bookData.linebreaks?this.bookData.linebreaks:this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()}get bookData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h,d,f,p,g,m){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"cacheService",void 0),S(this,"bookmarksSvc",void 0),S(this,"memorialSvc",void 0),S(this,"themeSvc",void 0),S(this,"audioSvc",void 0),S(this,"booksViewTables",void 0),S(this,"data",void 0),S(this,"ready",!1),S(this,"bookTitleData",Bc.builder()),S(this,"errorsData",Bc.builder()),S(this,"stgShowSettings",U0.builder()),S(this,"stgLanguages",U0.builder()),S(this,"stgChapters",U0.builder()),S(this,"allSettings",IE.builder().add(this.stgShowSettings).add(this.stgLanguages).add(this.stgChapters)),S(this,"changesDetectorSendReadyMessage",ts.builder()),S(this,"changesDetectorBookDataText",ts.builder()),S(this,"changesDetectorFacePage",ts.builder()),S(this,"changesDetectorErrors",ts.builder()),S(this,"changesDetectorNewTitle",ts.builder()),S(this,"changesDetectorRequestedPrintLogName",ts.builder()),S(this,"changesDetectorLanguages",ts.builder()),S(this,"changesDetectorChapters",ts.builder()),S(this,"changesDetectorChapters2",ts.builder()),S(this,"changesDetectorChapters3",ts.builder()),S(this,"fineTextDetector",_a.builder()),S(this,"getColumnClassDetector",_a.builder()),S(this,"getBookIndexesDetector",_a.builder()),S(this,"getChapterButtonClassDetector",_a.builder()),S(this,"getMainDivClassesDetector",_a.builder()),S(this,"menuLinksOld",null),S(this,"menuLinks",null),S(this,"dToolbarLangData",Mu.builder().setItems([]).setOnClick(v=>{v.setSelected(!v.selected),this.bookSvc.toggleLanguage(v.tag).reloadBooks(),this.saveChapter()})),S(this,"dToolbarData",Mu.builder().setItems([]).setOnClick(v=>{if(this.toolbarData.items.forEach(y=>y.setSelected(y===v)),"\u0412\u0441\u0435"==v.text){let y=this.bookSvc.getShortBookName(null),_=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(_){let C=_.parsed.content.map(x=>`${y}.${x.name}:1-1000!/*\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div('\u0440\u0430\u0437\u0440\u044b\u0432\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438', '', '');*/`).join("\r\n");this.changesDetectorBookDataText.checkAndUpdate(C),this.bookSvc.loadBookByPageText(C,!1,"")}}else this.changesDetectorBookDataText.checkAndUpdate(""),this.bookSvc.bookContent.length?this.bookSvc.loadPage(v.text):this.config.post(()=>{this.uiConfig.ui.currentChapter.setStringValue(v.text),this.bookSvc.clear(void 0,void 0,void 0,void 0,!0),this.reload()});this.saveChapter()})),S(this,"startLineSelection",-1),S(this,"endLineSelection",-1),S(this,"modalAddBookmarkFlag",!1),S(this,"modalPrintEpubFlag",!1),S(this,"printEpubData",k9.builder()),S(this,"printEpubDataEventsSubscription",null),S(this,"printing",!1),S(this,"requestedPrintLogName",""),S(this,"printLogName","\u041a\u043d\u0438\u0433\u0438"),S(this,"workerSvc",$a.builder()),S(this,"bookServerSvc",new Sz((v,y)=>{this.config.post(()=>{this.bookSvc.post(v,y)})})),S(this,"bookSvc",new D9((v,y)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(y):this.bookServerSvc.post(v,y)})})),S(this,"handleMemorialNewTitleTargetSubscriptioin",null),this.config=l,this.uiConfig=h,this.cacheService=d,this.bookmarksSvc=f,this.memorialSvc=p,this.themeSvc=g,this.audioSvc=m}ngOnInit(){this.bookData.printerHandler.setHandler(l=>this.onPrintEpub(l)),this.bookSvc.onNewTitleEvent.setOnEventHandler((l,h)=>this.requestedPrintLogName=""+h),this.bookData.handleMemorialNewTitleTarget&&(this.handleMemorialNewTitleTargetSubscriptioin&&this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=this.config.messageBus.addTargetHandler(this.bookData.handleMemorialNewTitleTarget,l=>{"MemorialNewTitle"===l.type&&this.config.post(()=>{this.requestedPrintLogName=""+l.text})}))}ngOnDestroy(){this.handleMemorialNewTitleTargetSubscriptioin&&(this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=null),this.bookSvc.onNewTitleEvent.setOnEventHandler(null),this.bookSvc.onPageLoadEvent.setOnEventHandler(null),this.workerSvc.unsubscribe(),this.staticView||this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0),this.bookSvc.onDestroy()}ngAfterViewInit(){this.changesDetectorSendReadyMessage.checkAndUpdate(!1),this.memorialSvc.isReady().then(l=>{l.success?this.memorialSvc.getMemorials()?this.onMyInit():this.memorialSvc.reloadMemorials(()=>{this.onMyInit()}):this.onMyInit()},l=>{this.onMyInit()})}onMyInit(){this.bookSvc.setConfig(this.config).addDictionarySvc(l=>{this.config.setDictionaries(this.bookSvc.dictionariesSvc),this.config.post(()=>{this.onMyInit2()})},this.cacheService,this.config.dictionaries)}onMyInit2(){this.clearSelection(),(!this.staticView||this.bookData.forceMenu)&&this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.getMenuLinks())},0),this.bookTitleData.setActions([Nc.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings}),Nc.builder().setText("\u0413\u043b\u0430\u0432\u044b").setEnabled(!this.staticView).setOnClick(()=>{this.showChapters=!this.showChapters}),Nc.builder().setText("\u042f\u0437\u044b\u043a\u0438").setOnClick(()=>{this.showLanguages=!this.showLanguages})]),this.workerSvc.enabled()?this.workerSvc.setOnMessage(l=>{this.config.post(()=>{this.bookSvc.post(null,l)})}):this.bookServerSvc.setCacheService(new Cz(new FT)),this.bookSvc.setLineTransformer(this.bookData.search?H3.builder().addTransformer($3.builder()).addTransformer(W3.builder()).addTransformer(M9.builder().setSearch(this.bookData.search)):H3.builder().addTransformer($3.builder()).addTransformer(W3.builder())),this.bookSvc.onPageLoadEvent.setOnEventHandler(l=>{this.config.post(()=>this.scrollToText(),100)}),this.bookSvc.onRouteEvent.setOnEventHandler((l,h)=>{this.config.post(()=>this.bookData.link.route(h),100)}),this.bookSvc.setUIConfig(this.uiConfig).setConfig(this.config).setMemorial(this.memorialSvc).setAudio(this.audioSvc),this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()),this.reload(),this.ready=!0}reload(){let l=this.bookData.link.languages&&this.bookData.link.languages.length>0?this.bookData.link.languages:this.uiConfig.ui.currentLanguages.getStringValue().split("|").filter(h=>!!h);this.bookData.link.textIsPage?(this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text),this.bookSvc.loadBookByPageText(this.bookData.text)):this.bookSvc.loadBookByName(this.bookData.text,l,this.staticView?this.bookData.link.chapter:this.uiConfig.ui.currentChapter.getStringValue())}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return this.bookData.link.getCurValue(()=>this.getClassesRaw())}getClassesRaw(){return{}}showMenu(){this.bookData&&this.bookData.link&&this.bookData.link.route&&this.bookData.link.route("")}getColumnClass(l,h,d){let f=this.getColumnClassRaw(h,d);return l.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u043e\u043b\u0431\u0446\u043e\u0432.checkAndGetValue(f)}getColumnClassRaw(l,h){let d=12,f=d/h,p=0;for(let m=0;m<=l;m++)p=m%2?Math.floor(f):Math.ceil(f),p>d&&(p=d),d-=p;let g={};return g["clr-col-"+p]=!0,g["bg-3"]=l%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),g.altText=l%2,g.cs=this.bookSvc.bookContent[l]?.parsed?.getCs(),g.cs2=this.bookSvc.bookContent[l]?.parsed?.getCs2(),g["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,g["fade-in-3"]=!0,g}getRowClass(l,h,d,f=!0){let p=this.getRowClassRaw(h,d,f);return l.\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440\u0421\u0442\u0440\u043e\u043a.checkAndGetValue(p)}getRowClassRaw(l,h,d=!0){let f=12,p=f/h,g=0;for(let v=0;v<=l;v++)g=v%2?Math.floor(p):Math.ceil(p),g>f&&(g=f),f-=g;let m={};return m["clr-row"]=d,m["bg-3"]=l%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),m.altText=l%2,m.cs=this.bookSvc.bookContent[l]?.parsed?.getCs(),m.cs2=this.bookSvc.bookContent[l]?.parsed?.getCs2(),m["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,m["fade-in-3"]=!0,m}translateLanguageName(l){let h=l.replace(/\u0426\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439/gi,"\u0426\u0421");return h=h.replace(/\u0413\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u0439/gi,"\u0413\u0440"),h=h.replace(/\u0420\u0443\u0441\u0441\u043a\u0438\u0439/gi,"\u0420\u0443\u0441"),h}syncToolbarData(){if(this.bookData.link.textIsPage&&this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text))return void this.config.post(()=>{this.bookSvc.loadBookByPageText(this.bookData.text)});if(this.ready&&this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()))return void this.config.post(()=>{this.bookSvc.clear(!0,!0,[],!0,!0),this.reload()});let l=this.changesDetectorErrors.checkAndUpdate(this.bookSvc.errors),h=!1,d="";if(this.bookSvc.bookInfo){if(this.requestedPrintLogName)d=this.requestedPrintLogName;else{d=this.bookSvc.getBookTitleName();let g=this.bookSvc.getChapterTitleName();d&&g&&(d+=": "+g)}h=this.changesDetectorNewTitle.checkAndUpdate(d)}else h=this.changesDetectorNewTitle.checkAndUpdate("")||this.changesDetectorRequestedPrintLogName.checkAndUpdate(this.requestedPrintLogName),h&&(d=this.requestedPrintLogName?this.requestedPrintLogName:this.config.getApplication().name);let f=this.changesDetectorLanguages.checkAndUpdate(this.bookSvc.bookInfo?.content),p=this.changesDetectorChapters.checkAndUpdate(this.bookSvc.bookContent)||this.changesDetectorChapters2.checkAndUpdate(this.bookSvc.bookContent.length)||this.changesDetectorChapters3.checkAndUpdate(this.bookSvc.bookChapter?.name);(l||h||f||p)&&this.config.post(()=>{l&&this.syncErrors(),h&&this.syncBookTitleData(d,d?[d]:[]),f&&this.syncLanguages(),p&&this.syncChapters()})}syncErrors(){this.errorsData.setErrors(this.bookSvc.errors)}syncBookTitleData(l,h){this.printLogName=l,this.bookTitleData.errors[0]!=l&&(this.bookTitleData.setErrors(h),this.bookTitleData.classes.setAlertClass("alert-success").setAlertShape(""))}syncLanguages(){this.dToolbarLangData.items.length!=this.bookSvc.bookInfo?.content.length&&this.dToolbarLangData.setItems([]),this.bookSvc.bookInfo&&this.bookSvc.bookInfo.content.forEach((l,h)=>{h+1>this.dToolbarLangData.items.length?this.dToolbarLangData.items.push(ba.builder().setText(this.translateLanguageName(l.name)).setTag(l.name).setSelected(this.bookSvc.isLanguageEnabled(l.name))):this.dToolbarLangData.items[h].setText(this.translateLanguageName(l.name)).setTag(l.name).setSelected(this.bookSvc.isLanguageEnabled(l.name))})}syncChapters(){let l=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(l){let h=1,d=l.parsed.content;h+d.length!=this.dToolbarData.items.length&&(this.dToolbarData.items=[]),0==this.dToolbarData.items.length?this.dToolbarData.items.push(ba.builder().setText("\u0412\u0441\u0435").setTag("\u0412\u0441\u0435")):this.dToolbarData.items[0].setText("\u0412\u0441\u0435").setSelected(!1),d.forEach((f,p)=>{p+1+h>this.dToolbarData.items.length?this.dToolbarData.items.push(ba.builder().setText(f.name).setSelected(!1)):this.dToolbarData.items[p+h].setText(f.name).setSelected(this.bookSvc.bookChapter?.name===f.name)}),null==this.dToolbarData.items.find(f=>f.selected)&&this.dToolbarData.items.length&&this.dToolbarData.items[0+h].setSelected(!0)}}getBookFragments(l,h,d){if(!h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430){let p=this.bookSvc.bookContent[l]?.parsed?.settings.find(v=>"\u044f\u0437\u044b\u043a"===v.name.toLowerCase()),g=p?p.value:"";g=g||(this.bookSvc.bookLanguages.length?this.bookSvc.bookLanguages[0]:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"),g.endsWith("-UCS8")&&(g=g.substring(0,g.length-5));let m=this.uiConfig.ui.coloredTranslations.getBooleanValue();h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430([Qr.builder().setText(g).setClasses({red:!(m&&l%2),redDark:m&&!!(l%2)})])}return d<0?h.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\u042f\u0437\u044b\u043a\u0430:h.\u0441\u0442\u0440\u043e\u043a\u0438[d].fragments}isSpaceAppended(l,h){return l.\u0441\u0442\u0440\u043e\u043a\u0438[h].fragments.length>0&&h+1!=this.bookSvc.lineIndexes.length}isLineIndexed(l,h){return h>0&&l.\u0441\u0442\u0440\u043e\u043a\u0438[h].fragments.length>0&&l.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}clearSelection(){return this.startLineSelection=this.endLineSelection=-1,this}onPrev(){this.clearSelection(),this.bookSvc.loadPrevPage(),this.saveChapter()}onNext(){this.clearSelection(),this.bookSvc.loadNextPage(),this.saveChapter()}getCurrentChapterName(){return this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"\u041c\u0435\u043d\u044e"}scrollToText(){this.staticView||(this.booksViewTables.nativeElement.scrollIntoView(!0),this.saveChapter()),this.changesDetectorSendReadyMessage.checkAndUpdate(!0)&&this.config.messageBus.putMessage(Hy.builder().setSender(this.bookData.id).setTarget(this.bookData.targetId))}getChapterButtonClass(){let l=this.getChapterButtonClassRaw();return this.getChapterButtonClassDetector.checkAndGetValue(l)}getChapterButtonClassRaw(){let l={btn:!0,"btn-block":!0,"btn-link":!0,greenBtn:!0};return l["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,l}isLineSelected(l,h=!1,d=!0){let f=this.bookSvc.getShortBookName(),p=M1.builder(),g=h&&this.bookmarksSvc.getBookmarks().map(v=>{let y=p.parse(v);if(y&&y.length&&y[0].length){let _=y[0][0];if(_.type===ic.Link)return _}return null}).filter(v=>null!=v).filter(v=>v.name===f).filter(v=>this.bookSvc.bookChapter?.name==""+v.startChapter).filter(v=>(v.startLine<0||v.startLine<=l)&&(v.endLine<0||l<=v.endLine)).length>0,m=this.startLineSelection>=0&&this.startLineSelection==l||this.startLineSelection>=0&&this.startLineSelection<=l&&this.endLineSelection>=0&&l<=this.endLineSelection;return!this.staticView&&(g&&!m||d&&m)}isSelectionEnabled(){return!this.staticView&&"\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"!=this.bookSvc.bookName}getLineSelectionClass(l,h){let f=this.getLineSelectionClassRaw(h);return l.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u0434\u0435\u0442\u0435\u043a\u0442\u043e\u0440.checkAndGetValue(f)}getLineSelectionClassRaw(l){let h=this.isSelectionEnabled();return{"bg-4":h&&this.isLineSelected(l,!1,!0),"bg-5":h&&this.isLineSelected(l,!0,!1),cursor:h&&!this.staticView}}getComponent(l,h){return l.\u0441\u0442\u0440\u043e\u043a\u0438[h].\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442}getBookIndexes(l){let h=0;!this.bookData.link.logical&&this.bookSvc.books.length&&(h=Math.max(0,1-this.bookSvc.books[0].\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a));let d=+(this.bookData.link.startLine>=0?this.bookData.link.startLine:0),f=+(this.bookData.link.endLine>=0?this.bookData.link.endLine:this.bookData.link.startLine>=0?this.bookData.link.startLine:1e3);return this.getBookIndexesDetector.checkChanged(l,h,d,f).getCurValue(()=>0==d&&1e3==f?l:l.filter(p=>d<=p+h&&p+h<=f))}selectLine(l){if(this.hideUI||!this.isSelectionEnabled())return this;if(this.startLineSelection<0)this.startLineSelection=l,this.endLineSelection=-1;else if(this.startLineSelection==l)this.endLineSelection=l,this.modalAddBookmarkFlag=!0;else if(this.endLineSelection<0){this.endLineSelection=l;let h=Math.min(this.startLineSelection,this.endLineSelection);this.endLineSelection=Math.max(this.startLineSelection,this.endLineSelection),this.startLineSelection=h}else this.isLineSelected(l,!1,!0)?this.modalAddBookmarkFlag=!0:(this.startLineSelection=-1,this.endLineSelection=-1);return this}onAddBookmark(){if(this.startLineSelection>0){let l=this.bookSvc.getShortBookName();this.bookmarksSvc.addBookmark(l,this.bookSvc.bookChapter?.name,this.startLineSelection,this.endLineSelection),this.startLineSelection=this.endLineSelection=-1}return this.modalAddBookmarkFlag=!1,this}onNotAddBookmark(){this.startLineSelection=this.endLineSelection=-1,this.modalAddBookmarkFlag=!1}getAllTextClass(){return this.syncToolbarData(),this.fineTextDetector.checkChanged(this.uiConfig.ui.fineText.getBooleanValue()).getCurValue(()=>this.getAllTextClassRaw())}getAllTextClassRaw(){return{ftext:this.uiConfig.ui.fineText.getBooleanValue()}}printBook(){let l=this.bookSvc.getBookTitleName(),h=this.bookSvc.getChapterTitleName();l&&h&&(l+=": "+h),this.themeSvc.printWindow(l)||window.print()}printBookEpub(){let l=this.bookSvc.bookName;l&&(this.printEpubData.setBookName(l).setBookTitle(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookChapter(this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"").setBookLanguages(this.bookSvc.bookLanguages).setEpubPrinterHandler(this.bookData.printerHandler).setShowSettings(!this.bookData.autoPrint),this.printEpubDataEventsSubscription?.unsubscribe(),this.printEpubDataEventsSubscription=this.printEpubData.printEventsEmitter.subscribe({next:h=>{"stop"==h?(this.onStopPrintEpub(),this.printing=!1):(h="print")&&(this.printing=!0)}}),this.modalPrintEpubFlag=!0,this.bookData.autoPrint&&this.config.post(()=>{this.onStartPrintEpub()},500))}onStartPrintEpub(){this.printEpubData.printEventsEmitter.emit("print")}onStopPrintEpub(){this.modalPrintEpubFlag=!1}onPrintEpub(l){let h=this.bookSvc.bookName.indexOf("VZ")>=0||this.bookSvc.bookName.indexOf("NZ")>=0,d=this.bookSvc.getChapterTitleName();!d&&this.bookSvc.bookChapter&&(d=this.bookSvc.bookChapter?.name);let f="\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430";d||(d=this.config.getApplication().name,f="");let p=()=>D1.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookNames(this.bookSvc.bookLanguages).setPsalomName(f).setAllBooksChapters([]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(h),g=p(),m=()=>{if(g.allBooks.length>1||g.allBooks[0].length>0){let y=g.allBooks.map((_,b)=>_.map((C,x)=>C.length>g.emptyFirstLines[b][x]).reduce((C,x,w,O)=>C||x,!1)).reduce((_,b,C,x)=>_||b,!1);!y&&0===l.requestsPack.length&&(y=this.bookSvc.getBookTitleName()!=g.name,g.setShowMiddleContent(!1)),y&&l.addRequest(g)}g=p()},v=(y,_,b)=>{let C="",x=!0,w=0,O=null,D=(T,M=!1)=>{if(O&&O.length>0){let k=y().allBooks.length-1,E=y().allBooks[k];for(;b+1>E.length;)E.push([]);let P=E[b];if(P&&P.push(...O),0==b)for(;k+1>y().allBooksChapters.length;)y().allBooksChapters.push(`${d}`);O=null,M&&m()}};_.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((T,M)=>{let k=!0,P=!1,V=(U=!1,$=!1)=>{P||(k&&(null==O&&(O=[]),(x&&M-w==0||!C)&&++y().emptyFirstLines[y().emptyFirstLines.length-1][b],O.push(C)),k=!0,C="",x=!0,U&&(D(0,$),w=M),P=!0)},I=U=>{P=!1,C+=U.text,x=x&&(!U.text||(U=>!(!U?.red&&!U?.redDark))(U.classes));let $=H=>{if(H.component===c){let J=H.data;V(!0,!0),J.printerHandler.print(l)}else if(H.component===Fz){let J=H.data;J.config.link?.link&&(C+=`${J.config.link.link.name}.${J.config.link.link.startChapter}:${J.config.link.link.startLine}-${J.config.link.link.endLine}`.replace("-1000","+"),x=!1),V(!0,!0),J.printerHandler.print(l)}else if(H.component===zE){let J=H.data;if(J.config.book){V(!0,!0);let ee=D1.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setBookNames(this.bookSvc.bookLanguages).setAllBooksChapters([`${d}`]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(!0);v(()=>ee,J.config.book,0)}}else if(H.component===qfe){let J=H.data;V(!0,!0),J.printerHandler.print(l)}else if(H.component===_7){let J=H.data;J.components.length&&J.components.forEach(ee=>$(ee))}};U.component&&$(U.component)};P=!1,T.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.forEach(U=>{I(U)}),V()}),D()};this.bookSvc.books.forEach((y,_)=>{v(()=>g,y,_)}),m()}getMainDivClasses(){return this.getMainDivClassesDetector.checkAndGetValue({"fade-in-3":!0,"no-print":!!this.changesDetectorBookDataText.oldRawValue})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Pd),z(k1),z(C1),z(bo),z(E1))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-library-book"]],viewQuery:function(l,h){if(1&l&&mi(Wpt,5),2&l){let d;jt(d=Zt())&&(h.booksViewTables=d.first)}},inputs:{data:"data"},decls:34,vars:16,consts:[[3,"click"],[3,"enabled","name"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["booksViewTables",""],[4,"ngIf"],["class","clr-row mainText",4,"ngIf"],["class","mainText fade-in-3 clr-row",4,"ngIf"],["class","clr-row no-print top-space fade-in-3",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","add-text"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["shape","times"],[1,"bottom-space"],[3,"data"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[3,"data",4,"ngIf"],[1,"no-print"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"clr-row"],[1,"clr-col-6"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],[3,"ngClass","click"],["shape","book",1,"is-solid"],[1,"clr-col-3","no-print"],[3,"ngClass","click",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngFor","ngForOf"],[1,"clr-row","mainText"],[1,"clr-col-12","fade-in-3"],[1,"clr-row","mainText","fade-in-3"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"component"],["class","clr-col-12 fade-in-3",4,"ngIf"],[3,"ngClass","hidden",4,"ngFor","ngForOf"],[3,"ngClass","hidden"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","hidden",4,"ngIf"],[1,"hidden"],["class","mainText fade-in-3",4,"ngIf"],["class","mainText fade-in-3",4,"ngFor","ngForOf"],[1,"mainText","fade-in-3"],[1,"clr-col-12"],[1,"mainText","fade-in-3","clr-row"],["class","clr-col-12",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"clr-row","no-print","top-space","fade-in-3"],["type","button",1,"btn","btn-link","btn-block",3,"click"],["shape","printer"],["class","clr-col-6",4,"ngIf"],["shape","book"],["shape","ban"]],template:function(l,h){1&l&&(R(0,"div",0),ie("click",function(f){return f.stopPropagation()}),pe(1,"app-print-logo",1),K(2,Xpt,7,6,"div",2),K(3,tgt,7,6,"div",2),R(4,"div",3,4),K(6,lgt,4,3,"div",5),K(7,ggt,4,3,"div",6),K(8,Sgt,4,3,"div",5),K(9,Agt,5,3,"div",7),K(10,Lgt,7,6,"div",2),K(11,Vgt,6,5,"div",8),N(),R(12,"clr-modal",9),ie("clrModalOpenChange",function(f){return h.modalAddBookmarkFlag=f}),R(13,"h3",10),se(14,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),N(),R(15,"div",11),pe(16,"clr-icon",12),se(17," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),N(),R(18,"div",13)(19,"button",14),ie("click",function(){return h.onAddBookmark()}),pe(20,"clr-icon",12),se(21,"\u0414\u0430"),N(),R(22,"button",15),ie("click",function(){return h.onNotAddBookmark()}),pe(23,"clr-icon",16),se(24,"\u041d\u0435\u0442"),N()()(),R(25,"clr-modal",9),ie("clrModalOpenChange",function(f){return h.modalPrintEpubFlag=f}),R(26,"h3",10),se(27,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),N(),R(28,"div",11)(29,"div",17),pe(30,"app-dynamic-print-epub",18),N()(),R(31,"div",13),K(32,Ugt,3,0,"button",19),K(33,zgt,3,0,"button",20),N()()()),2&l&&(F(1),L("enabled",h.bookData.facePage)("name",h.printLogName),F(1),L("ngIf",!h.hideUI),F(1),L("ngIf",!h.staticView),F(1),L("ngClass",h.getAllTextClass()),F(2),L("ngIf",h.parallel&&h.lineBreaks),F(1),L("ngIf",h.parallel&&!h.lineBreaks),F(1),L("ngIf",!h.parallel&&h.lineBreaks),F(1),L("ngIf",!h.parallel&&!h.lineBreaks),F(1),L("ngIf",!h.staticView),F(1),L("ngIf",h.showPrintButtons),F(1),L("clrModalOpen",h.modalAddBookmarkFlag),F(13),L("clrModalOpen",h.modalPrintEpubFlag),F(5),L("data",h.printEpubData),F(2),L("ngIf",!h.printing),F(1),L("ngIf",!h.printing))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();function Hgt(c,a){1&c&&pe(0,"app-add-component",5),2&c&&L("component",q(2).containerData.component)}const $gt=function(){return{"content-container":!0}},Wgt=function(){return{"content-area":!0}};function Ggt(c,a){if(1&c&&(R(0,"div",2)(1,"div",3)(2,"div",3),K(3,Hgt,1,1,"app-add-component",4),N()()()),2&c){const l=q();F(1),L("ngClass",yc(3,$gt)),F(1),L("ngClass",yc(4,Wgt)),F(1),L("ngIf",l.containerData.component)}}function Qgt(c,a){1&c&&pe(0,"app-add-component",5),2&c&&L("component",q(2).containerData.component)}function jgt(c,a){if(1&c&&(R(0,"div",6),K(1,Qgt,1,1,"app-add-component",4),N()),2&c){const l=q();F(1),L("ngIf",l.containerData.component)}}let ac=(()=>{class c{get containerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l){S(this,"config",void 0),S(this,"data",void 0),this.config=l}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-container"]],inputs:{data:"data"},decls:2,vars:2,consts:[["class","main-container",4,"ngIf"],["class","myContainer",4,"ngIf"],[1,"main-container"],[3,"ngClass"],[3,"component",4,"ngIf"],[3,"component"],[1,"myContainer"]],template:function(l,h){1&l&&(K(0,Ggt,4,5,"div",0),K(1,jgt,2,1,"div",1)),2&l&&(L("ngIf",h.containerData&&!1),F(1),L("ngIf",h.containerData))},dependencies:[di,Sn,rc],styles:[".myContainer[_ngcontent-%COMP%]{padding:1em}"]})),c})();class E9{constructor(){}static builder(){return new E9}}class Oo extends Ci{constructor(a,l,h,d,f){super(a,l,h),S(this,"classes",void 0),S(this,"component",void 0),this.classes=d,this.component=f}static builder(){return new Oo("",null,null,E9.builder(),null)}setComponent(a){return this.component=a,this}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}function Zgt(c,a){if(1&c&&(R(0,"div"),pe(1,"app-add-component",2),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}let qgt=(()=>{class c{constructor(l,h){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"components",[new Wn(Vfe,$E.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u041a\u043d\u043e\u043f\u043a\u0438").setOnClick(d=>{if(d.text="\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u044f: "+d.tag.data++,d.classes.outline){let f=["primary","success","danger"],p=f.indexOf(d.classes.type);p=(p+1)%f.length,d.classes.type=f[p]}d.classes.outline=!d.classes.outline}).setTag(new xg(0))),new Wn(_7,KE.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u0434\u043b\u044f div."))]),this.config=l,this.uiConfig=h}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}reset(){this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(""),this.components=[new Wn(Ofe,Hw.builder().setOnClick(l=>{this.routeTo(l.trim())}))]}routeTo(l){l!=this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(l),this.components=[new Wn(ac,Oo.builder().setComponent(new Wn(Wc,Tl.builder().setText(l).setLink(Dl.builder().setOnRoute(h=>{h?this.routeTo(h.trim()):this.reset()})))))]}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-component"]],decls:2,vars:1,consts:[[1,"ftext","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,Zgt,2,1,"div",1),N()),2&l&&(F(1),L("ngForOf",h.components))},dependencies:[vi,rc]})),c})();class A9{constructor(a,l){S(this,"name",void 0),S(this,"items",void 0),S(this,"pageName",""),this.name=a,this.items=l}}class I9{constructor(a,l){S(this,"name",void 0),S(this,"items",void 0),S(this,"activeNumberPage",""),this.name=a,this.items=l}}var la=(()=>(function(c){c[c.Replace=0]="Replace",c[c.Add=1]="Add",c[c.Intersect=2]="Intersect",c[c.Remove=3]="Remove"}(la||(la={})),la))();class Xgt{constructor(){S(this,"searchDataItems",[])}clear(){this.searchDataItems=[]}mergeSearchInfos(a,l,h){let d=[];switch(h){case la.Intersect:a.forEach(f=>{let p=l.find(g=>g.line==f.line);p&&(d.push(f),f.column!=p.column&&d.push(p))});break;case la.Add:d.push(...a),d.push(...l);break;case la.Remove:a.forEach(f=>{null==l.find(g=>g.line==f.line)&&d.push(f)});break;case la.Replace:d=l}return d.sort((f,p)=>f.line-p.line),d}mergeSearchDatas(a,l,h){let d=[],f=()=>{a.forEach(p=>{let g=l.find(m=>p.name==m.name);if(null!=g){let m=this.mergeSearchInfos(p.items,g.items,h);m.length&&d.push(new A9(p.name,m))}})};switch(h){case la.Intersect:f();break;case la.Add:f(),l.forEach(p=>{null==a.find(m=>p.name==m.name)&&d.push(p)}),a.forEach(p=>{null==l.find(m=>p.name==m.name)&&d.push(p)});break;case la.Remove:a.forEach(p=>{let g=l.find(m=>p.name==m.name);if(null!=g){let m=this.mergeSearchInfos(p.items,g.items,h);m.length&&d.push(new A9(p.name,m))}else d.push(p)});break;case la.Replace:d=l}return d}mergeSearchData(a,l=la.Replace){let h=[],d=()=>{this.searchDataItems.forEach(f=>{let p=a.find(g=>g.name==f.name);if(p){let g=this.mergeSearchDatas(f.items,p.items,l);g.length&&h.push(new I9(p.name,g))}})};0==this.searchDataItems.length?h=a:l==la.Intersect?d():l==la.Add?(d(),this.searchDataItems.forEach(f=>{a.find(g=>g.name==f.name)||h.push(f)}),a.forEach(f=>{this.searchDataItems.find(g=>g.name==f.name)||h.push(f)})):l==la.Remove&&this.searchDataItems.forEach(f=>{let p=a.find(g=>g.name==f.name);if(p){let g=this.mergeSearchDatas(f.items,p.items,l);g.length&&h.push(new I9(p.name,g))}else h.push(f)}),this.searchDataItems=h}}class Ygt{static parse(a){return regexParserStatic.parse(a)}}class Kgt{constructor(a,l){S(this,"searcher",void 0),S(this,"config",void 0),S(this,"langProps",[]),S(this,"results",new Xgt),S(this,"maxElemenetsOnPageCount",10),S(this,"searchedPages",[]),S(this,"currentPage",-1),S(this,"searchObject",{search:""}),S(this,"search",""),S(this,"searchIndex",0),S(this,"searchRemainsCount",0),this.searcher=a,this.config=l}onSearch(a,l,h){if(this.searchedPages=[],this.results.clear(),this.search=this.translateSearchString(this.searchObject.search),this.search){++this.searchIndex;let f=this.searchIndex,p=this.search.split(" ");this.searchRemainsCount+=p.length+1;let g=la.Intersect,m=0,v=()=>{if(--this.searchRemainsCount,this.searchIndex!=f)return this.searchRemainsCount-=p.length-m,void h(!1);if(m>0&&0==this.results.searchDataItems.length&&(this.searchRemainsCount-=p.length-m,m=p.length),m>=p.length)return void(h&&h(!0));let y=p[m++];if("\u041d\u0415"==y){if(g=la.Remove,--this.searchRemainsCount,m>=p.length)return;y=p[m++]}else g=la.Intersect;this.searcher.search(y,l,(_,b)=>{this.config.post(()=>{this.searchIndex==f&&this.onSearchDataResult(_,b,g,null),v()})},this.langProps)};v()}}getBook(a){let l=a.split("/");return l.length>=1&&l.splice(l.length-1,1),l.filter(function(h,d,f){return!(" "==h&&d>0)||" "!=f[d-1]}).join("/")}getChapter(a){let l="\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",h=a.split("/");return h.length>=1&&(l=h[h.length-1]),l}getNamedSearchItem(a,l){let h=this.getBook(a),d=l.find(g=>g.name===h);null==d&&(d=new I9(h,[]),d.activeNumberPage="1",l.push(d));let f=this.getChapter(a),p=d.items.find(g=>g.name==f);return null==p&&(p=new A9(f,[]),p.pageName=""+Math.ceil((d.items.length+1)/this.maxElemenetsOnPageCount),d.items.push(p)),p}onSearchDataResult(a,l,h,d){let f=[];a&&a.forEach(p=>{this.getNamedSearchItem(p.key,f).items.push(...p.value)}),this.results.mergeSearchData(f,h),d&&d(null!=a)}translateSearchString(a){return Ygt.parse(a)}}class P9{constructor(){}static builder(){return new P9}}class G3 extends Ci{set description2(a){this.sDescription2=a}get description2(){return this.sDescription2?this.sDescription2:this.description}constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"object",{}),S(this,"fieldName","name"),S(this,"description","\u0418\u043c\u044f"),S(this,"sDescription2",""),S(this,"shape",""),S(this,"shape2",""),S(this,"readonly",!1),S(this,"keyboard",!1),this.classes=d}static builder(){return new G3("",null,null,P9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setObject(a){return this.object=a,this}setFieldName(a){return this.fieldName=a,this}setDescription(a){return this.description=a,this}setDescription2(a){return this.description2=a,this}setShape(a){return this.shape=a,this}setShape2(a){return this.shape2=a,this}setReadonly(a){return this.readonly=a,this}toggleKeyboard(){this.keyboard=!this.keyboard}}class R9{constructor(a){S(this,"spinnerInline",void 0),this.spinnerInline=a}static builder(){return new R9(!0)}}class F9 extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),this.classes=d}static builder(){return new F9("",null,null,R9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let r_e=(()=>{class c{constructor(l,h){S(this,"http",void 0),S(this,"config",void 0),S(this,"restPoint","/kafizmy"),this.http=l,this.config=h}getRestPoint(l,h){return Mr.merge(Mr.merge(h||this.config.serviceAPIHost,this.restPoint),l)}handleError(l,h){return qi.handleError(l,h)}search(l,h,d,f){const p={params:{query:l,paths:h.join("|")}};this.http.get(this.getRestPoint("/search",null),p).pipe(mr(this.handleError)).subscribe({next:g=>{d(g,null)},error:g=>{d(null,""+g)}})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(Id),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})(),s_e=(()=>{class c{constructor(l,h){S(this,"searchRestSvc",void 0),S(this,"config",void 0),S(this,"searchSvc",null),S(this,"searchingCount",0),this.searchRestSvc=l,this.config=h,this.config.isRestServerType()&&(this.searchSvc=this.searchRestSvc)}isSearching(){return this.searchingCount>0}search(l,h,d,f){this.config.post(this.searchSvc?()=>{++this.searchingCount,this.searchSvc&&this.searchSvc.search(l,h,(p,g)=>{d&&d(p,g),--this.searchingCount},f)}:()=>{++this.searchingCount,this.config.post(()=>{d&&d(null,null),--this.searchingCount})})}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(r_e),Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class sb extends ku{constructor(){super(),S(this,"classes",""),S(this,"name",""),S(this,"buttons",[])}static builder(){return new sb}setClasses(a){return this.classes=a,this}setName(a){return this.name=a,this.markChanged(),this}setButtons(a){return this.buttons=a,this.markChanged(),this}}class L9 extends Ci{constructor(a,l,h,d,f){super(a,l,h),S(this,"keyboards",void 0),S(this,"onKeyHandler",void 0),this.keyboards=d,this.onKeyHandler=f}static builder(){return new L9("",null,null,[],a=>null)}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setKeyboards(...a){return this.keyboards=[...a],this}addKeyboard(a){return this.keyboards.push(a),this}setOnKeyHandler(a){return this.onKeyHandler=a,this}onKey(a){return this.onKeyHandler&&this.onKeyHandler(a),this}}let Jgt=(()=>{class c{get kbData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h){S(this,"config",void 0),S(this,"themesSvc",void 0),S(this,"data",void 0),S(this,"imageData",Ha.builder()),S(this,"currentKeyboardName",""),this.config=l,this.themesSvc=h}getCurrentKeyboard(){let l=this.kbData.keyboards.find(h=>h.name==this.currentKeyboardName);return null==l&&(l=this.kbData.keyboards[0]),this.currentKeyboardName=l.name,l}ngOnInit(){this.recreate()}recreate(){let l=new qde(this.themesSvc.nowIsDay()?sa.Light2:sa.Dark2,"",400,200);this.imageData=Ha.builder(),this.imageData.setGenerator(l).setGenName("this").setSvgWidth(l.getWidth()).setSvgHeight(l.getHeight()).setType(1e3*l.getWidth()+l.getHeight());let h=[],d=this.getCurrentKeyboard(),f=d.buttons,p=f.reduce((g,m)=>Math.max(g,m.length),0);l.linesOfMonth=f.length,l.columnsCount=p,l.columnsOffsets=[],f.forEach((g,m)=>{g.forEach((v,y,_)=>{h.push(wl.builder().setName(v).setIndex(y+m*p).setIWidth(1).setClasses(d.classes)),y+1==_.length&&(y+1<p?(h.push(wl.builder().setName("").setIndex(y+m*p+1).setIWidth(p-(y+1))),l.addColumnOffset((p-(y+1))/2)):l.addColumnOffset(0))})}),h.push(wl.builder().setName(this.currentKeyboardName).setIndex(l.linesOfMonth*p).setIWidth(2),wl.builder().setName("<").setIndex(l.linesOfMonth*p+2).setIWidth(2),wl.builder().setName(" ").setIndex(l.linesOfMonth*p+4).setIWidth(p-8),wl.builder().setName(">").setIndex(l.linesOfMonth*p+p-4).setIWidth(2),wl.builder().setName("\u21e6").setIndex(l.linesOfMonth*p+p-2).setIWidth(2)),++l.linesOfMonth,l.setOnCommandHandler((g,m)=>{"<"==g.name?this.toogleKeybard(-1):">"==g.name?this.toogleKeybard(1):g.name==this.currentKeyboardName?this.toogleKeybard():"\u043f\u0440\u043e\u0431\u0435\u043b"==g.name||" "==g.name?this.kbData.onKey(" "):"<X"==g.name||"\u21e6"==g.name?this.kbData.onKey("<X"):g.name&&this.kbData.onKey(g.name)}),l.setCommands(h)}ngOnDestroy(){}ngAfterViewInit(){}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}toogleKeybard(l=1){let h=this.getCurrentKeyboard(),d=this.kbData.keyboards.indexOf(h);return d=(this.kbData.keyboards.length+d+l)%this.kbData.keyboards.length,this.currentKeyboardName=this.kbData.keyboards[d].name,this.config.post(()=>{this.recreate()}),this}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(bo))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-keyboard"]],inputs:{data:"data"},decls:2,vars:1,consts:[[1,"top-space","maxWidth800","center",3,"click"],[3,"data"]],template:function(l,h){1&l&&(R(0,"div",0),ie("click",function(f){return h.onClick(f)}),pe(1,"app-svg-js-image",1),N()),2&l&&(F(1),L("data",h.imageData))},dependencies:[nc],styles:[".maxWidth800[_ngcontent-%COMP%]{max-width:800px}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}"]})),c})();function emt(c,a){if(1&c){const l=ct();R(0,"span"),se(1,"\xa0"),R(2,"clr-icon",1),ie("click",function(d){return Ee(l),Ae(q().onCommand2(d))}),N(),se(3,"\xa0"),N()}if(2&c){const l=q();F(2),ot("shape",l.data.shape2)}}function tmt(c,a){if(1&c){const l=ct();R(0,"input",6),ie("ngModelChange",function(d){Ee(l);const f=q();return Ae(f.data.object[f.data.fieldName]=d)}),N()}if(2&c){const l=q();L("readOnly",l.data.readonly)("placeholder",l.data.description2)("name",l.data.fieldName)("ngModel",l.data.object[l.data.fieldName])}}function nmt(c,a){if(1&c&&(R(0,"label",7),se(1),N()),2&c){const l=q();F(1),Ht(l.data.object[l.data.fieldName])}}function imt(c,a){1&c&&pe(0,"app-dynamic-keyboard",8),2&c&&L("data",q().keyboardData)}let rmt=(()=>{class c{constructor(){S(this,"data",G3.builder()),S(this,"keyboardData",L9.builder().addKeyboard(sb.builder().setName("\u0420\u0443\u0441").setButtons(["1234567890".split(""),"\u0439\u0446\u0443\u043a\u0435\u043d\u0433\u0448\u0449\u0437\u0445\u044a".split(""),"\u0444\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u044d".split(""),"\u044f\u0447\u0441\u043c\u0438\u0442\u044c\u0431\u044e\u0451".split("")])).addKeyboard(sb.builder().setName("\u0420\u0423\u0421").setButtons(["1234567890".split(""),"\u0439\u0446\u0443\u043a\u0435\u043d\u0433\u0448\u0449\u0437\u0445\u044a".toUpperCase().split(""),"\u0444\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u044d".toUpperCase().split(""),"\u044f\u0447\u0441\u043c\u0438\u0442\u044c\u0431\u044e\u0451".toUpperCase().split("")])).addKeyboard(sb.builder().setName("\u0446\u0441").setButtons([[".\u0301",".\u0486",".\u0311",".\u0300",".\u2de3",".\u2ded\u0487",".\u2de2\u0487",".\u2dea\u0487",".\u2dec\u0487",".\u0483"],["\u0463","\u0475","\u0456","\u0457","\u047b","\u047d","\u0461","\u047f","\u1c82\u0443","\ua64b","\u046f","\u0471"],"\u0439\u0446\u0443\u043a\u0435\u0454\u043d\u0433\u0448\u0449\u0437\u0445".split(""),"\u0444\u2c2a\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u03b6".split(""),"\ua657\u0467\u0468\u0447\u0441\u043c\u0438\u0442\u044c\u044a\u0431\u044e".toLowerCase().split("")]).setClasses("cs")).addKeyboard(sb.builder().setName("\u0426\u0421").setButtons([[".\u0301",".\u0486",".\u0311",".\u0300",".\u2de3",".\u2ded\u0487",".\u2de2\u0487",".\u2dea\u0487",".\u2dec\u0487",".\u0483"],["\u0463".toUpperCase(),"\u0474".toUpperCase(),"\u0406","\u0407","\u047b".toUpperCase(),"\u047c","\u0460","\u047e","\u041e\u0443","\ua64b","\u046e","\u0470"],"\u0439\u0446\u0443\u043a\u0435\u0454\u043d\u0433\u0448\u0449\u0437\u0445".split("").map(l=>"\u0454"==l?l:l.toUpperCase()),"\u0444\u0472\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u0405".toUpperCase().split(""),"\ua656\u0467\u0468\u0447\u0441\u043c\u0438\u0442\u044c\u044a\u0431\u044e".toUpperCase().split("")]).setClasses("cs")).setOnKeyHandler(l=>{this.onKey(l.replace(/[_\.]/g,""))}))}onCommand(l){this.data.keyboard=!1,this.data.click(!0),l.stopPropagation()}onCommand2(l){this.data.click(this.data.shape2),l.stopPropagation()}onKey(l){let h=this.data.object[this.data.fieldName];"<X"==l?h=h.substring(0,h.length-1):h+=l,this.data.object[this.data.fieldName]=h}}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-form-input-editor"]],inputs:{data:"data"},decls:12,vars:6,consts:[[1,"cursor",3,"click"],[3,"click"],[4,"ngIf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange",4,"ngIf"],["class","cs",4,"ngIf"],[3,"data",4,"ngIf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"],[1,"cs"],[3,"data"]],template:function(l,h){1&l&&(R(0,"clr-input-container")(1,"label",0),ie("click",function(f){return h.onCommand(f)}),se(2),R(3,"span"),se(4,"\xa0"),R(5,"clr-icon",1),ie("click",function(f){return h.onCommand(f)}),N(),se(6,"\xa0"),N(),se(7," \xa0 "),K(8,emt,4,1,"span",2),N(),K(9,tmt,1,4,"input",3),K(10,nmt,2,1,"label",4),N(),K(11,imt,1,1,"app-dynamic-keyboard",5)),2&l&&(F(2),gi("",h.data.description,"\xa0 "),F(3),ot("shape",h.data.shape),F(3),L("ngIf",h.data.shape2),F(1),L("ngIf",!h.data.keyboard),F(1),L("ngIf",h.data.keyboard),F(1),L("ngIf",h.data.keyboard))},dependencies:[Sn,so,ls,ux,u_,Cc,Pa,ma,Jgt],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}"]})),c})();const smt=["bookmarksView"],omt=function(c,a){return{btn:!0,"btn-block":!0,"btn-success-outline":c,"btn-success":a}};function amt(c,a){if(1&c){const l=ct();R(0,"div",14)(1,"button",15),ie("click",function(){return Ee(l),Ae(q().toggleSearch())}),se(2),N()()}if(2&c){const l=q();F(1),L("ngClass",Wr(2,omt,!l.searchMode,l.searchMode)),F(1),Ht(l.searchMode?"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438":"\u041f\u043e\u0438\u0441\u043a")}}const lmt=function(c,a){return{btn:!0,"btn-block":!0,"btn-primary-outline":c,"btn-primary":a}};function cmt(c,a){if(1&c){const l=ct();R(0,"button",15),ie("click",function(){return Ee(l),Ae(q(2).onNewSearch())}),se(1,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),N()}if(2&c){const l=q(2);L("ngClass",Wr(1,lmt,!l.isBookmarksExists(),l.isBookmarksExists()))}}function umt(c,a){if(1&c){const l=ct();R(0,"button",3),ie("click",function(){return Ee(l),Ae(q(2).modalDeleteAllBookmarksFlag=!0)}),se(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435"),N()}}const o_e=function(c,a){return{"clr-col-4":c,"clr-col-6":a}};function hmt(c,a){if(1&c&&(R(0,"div",2),K(1,cmt,2,4,"button",16),K(2,umt,2,0,"button",17),N()),2&c){const l=q();L("ngClass",Wr(3,o_e,l.searchEnabled&&l.bookmarksEnabled,!(l.searchEnabled&&l.bookmarksEnabled))),F(1),L("ngIf",l.searchMode),F(1),L("ngIf",!l.searchMode)}}function dmt(c,a){if(1&c&&(R(0,"div",19),pe(1,"app-dynamic-spinner",20),N()),2&c){const l=q(2);F(1),L("data",l.searchingSpinnerData)}}function fmt(c,a){if(1&c&&(R(0,"div"),pe(1,"app-dynamic-content-toolbar",20),N()),2&c){const l=q(3);F(1),L("data",l.toolbarBooksHeaders)}}function pmt(c,a){if(1&c&&(R(0,"div")(1,"div"),pe(2,"app-dynamic-content-toolbar",20),N(),R(3,"div"),pe(4,"app-dynamic-content-toolbar",20),N()()),2&c){const l=q(3);F(2),L("data",l.currentHeaders()),F(2),L("data",l.currentPages())}}function gmt(c,a){1&c&&pe(0,"app-dynamic-library-book",20),2&c&&L("data",q().$implicit.libData)}function mmt(c,a){if(1&c&&(R(0,"div",null,24),pe(2,"app-dynamic-errors",20),K(3,gmt,1,1,"app-dynamic-library-book",25),N()),2&c){const l=a.$implicit;F(2),L("data",l.errorsData),F(1),L("ngIf",l.libDataShow)}}function vmt(c,a){if(1&c&&(R(0,"div")(1,"div")(2,"form",21),pe(3,"app-dynamic-form-input-editor",20),N(),R(4,"form",22),pe(5,"app-dynamic-form-input-editor",20),N()(),K(6,fmt,2,1,"div",5),K(7,pmt,5,2,"div",5),K(8,mmt,4,2,"div",23),R(9,"div")(10,"div"),pe(11,"app-dynamic-content-toolbar",20),N()()()),2&c){const l=q(2);F(3),L("data",l.dataSearchEditorData),F(2),L("data",l.dataSearchEditorData),F(1),L("ngIf",!l.isBookmarksExists()),F(1),L("ngIf",l.isBookmarksExists()),F(1),L("ngForOf",l.bookmarks),F(3),L("data",l.currentPages())}}function ymt(c,a){if(1&c&&(R(0,"div"),K(1,dmt,2,1,"div",18),K(2,vmt,12,6,"div",5),N()),2&c){const l=q();F(1),L("ngIf",l.isSearching),F(1),L("ngIf",!l.isSearching)}}function _mt(c,a){1&c&&pe(0,"app-dynamic-library-book",20),2&c&&L("data",q().$implicit.libData)}function bmt(c,a){if(1&c&&(R(0,"div",null,24),pe(2,"app-dynamic-errors",20),K(3,_mt,1,1,"app-dynamic-library-book",25),N()),2&c){const l=a.$implicit;F(2),L("data",l.errorsData),F(1),L("ngIf",l.libDataShow)}}function Cmt(c,a){if(1&c&&(R(0,"div"),K(1,bmt,4,2,"div",23),N()),2&c){const l=q();F(1),L("ngForOf",l.bookmarks)}}class Q3{constructor(a,l){S(this,"errorsData",Bc.builder()),S(this,"libData",Tl.builder()),S(this,"libDataShow",!1),S(this,"\u043f\u0430\u043c\u044f\u0442\u044c",Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))),this.errorsData.setErrors(a).setActions(l)}static builder(){return new Q3([],[])}setMessages(a){return this.errorsData.setErrors(a),this}addMessage(a){return this.errorsData.errors.push(a),this}setActions(a){return this.errorsData.setActions(a),this}addAction(a){return this.errorsData.actions.push(a),this}toggleLinkShow(){return this.libDataShow=!this.libDataShow,this}setLink(a,l,h=!0,d=!0){let p=fragmentsParserStatic.parse(a,{builder:new Bz})[0][0];if(p.type!=ic.Link&&h)throw new Error(`\u041d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0441\u044b\u043b\u043a\u043e\u0439: ${a}`);let g=p;return this.libData.setText(a.replace("-1000","+")).setSearch(l).setLink(Dl.builder().setBookName(g.name).setShortName(!0).setChapter(""+g.startChapter).setStartLine(g.startLine).setEndLine(g.endLine).setLanguages(g.langugages).setLogical(d)),this}}class N9{constructor(a,l,h,d){S(this,"items",void 0),S(this,"pageItems",void 0),S(this,"pageSize",void 0),S(this,"iPageIndex",0),this.items=a,this.pageItems=l,this.pageSize=d}static builder(){return new N9([],[],0,10)}get pageIndex(){return this.iPageIndex}set pageIndex(a){this.iPageIndex=a,this.updatePage()}updatePage(){let l=Math.min(this.pageIndex*this.pageSize+this.pageSize,this.items.length);return this.pageItems=this.items.slice(this.pageIndex*this.pageSize,l),this}setItems(a){return this.items=a,this.recalculate(),this.updatePage()}setPageIndex(a){if(a<0||a+1>=this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${a}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [0,${this.pagesCount-1}].`);return this.pageIndex=a,this}setPageSize(a){if(a!=this.pageSize)return this.pageSize=a,this.recalculate(!0)}recalculate(a=!1){let l=this.pagesCount;return this.pageNumber>l&&(this.pageNumber=l),a?this.updatePage():this}prevPage(){return this.pageIndex>0&&(this.pageIndex=this.pageIndex-1),this}get pagesCount(){return Math.ceil(this.items.length/this.pageSize)}get pageNumber(){return this.pageIndex+1}set pageNumber(a){if(a<1||a>this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${a}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [1,${this.pagesCount}].`);this.pageIndex=a-1}nextPage(){return this.pageIndex+1<this.pagesCount&&(this.pageIndex=this.pageIndex+1),this}}class B9{constructor(a,l){S(this,"name",void 0),S(this,"bookmarks",void 0),this.name=a,this.bookmarks=l}static builder(){return new B9("",N9.builder())}setName(a){return this.name=a,this}setBookmarks(a){return this.bookmarks=a,this}}let a_e=(()=>{class c extends wg{get bookmarkData(){return this.data}get boomarksData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get bookmarks(){return this.sync(),this.searchMode?this.bookmarksSearchDatas?.bookmarks.pageItems:this.bookmarksDatas}get isSearching(){return this.searcher.isSearching()}constructor(l,h,d,f,p,g){super(l,h,d),S(this,"bookmarksSvc",void 0),S(this,"searcher",void 0),S(this,"audioSvc",void 0),S(this,"bookmarksView",void 0),S(this,"bookmarksEnabled",!0),S(this,"searchEnabled",!0),S(this,"searchMode",!1),S(this,"searcherHelper",null),S(this,"\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435",Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))),S(this,"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))),S(this,"jsSvc",new WE),S(this,"bookmarksDatas",[]),S(this,"bookmarksSearchDatasAll",[]),S(this,"bookmarksSearchDatas",null),S(this,"searchingSpinnerData",F9.builder().setText("\u041f\u043e\u0438\u0441\u043a...")),S(this,"tryLoadRemainsBookInfoCount",0),S(this,"toolbarBooksHeaders",Mu.builder().setItems([]).setOnClick(m=>{m.setSelected(!m.selected)}).updateClasses(m=>{m.setLabelNormal("label-info")})),S(this,"toolbarSearchHeaders",Mu.builder().setItems([]).setOnClick(m=>{let v=this.bookmarksSearchDatasAll.find(y=>y.name==m.tag);v&&(this.bookmarksSearchDatas=v,this.config.post(()=>{this.scrollToBookmarks()}))})),S(this,"toolbarPages",Mu.builder().setItems([]).setOnClick(m=>{this.bookmarksSearchDatas&&(this.bookmarksSearchDatas.bookmarks.pageNumber=+m.tag,this.config.post(()=>{this.loadRemainsBookInfoActiveGroup(),this.scrollToBookmarks()}))}).updateClasses(m=>{m.setLabelNormal("label-info")})),S(this,"modalDeleteAllBookmarksFlag",!1),S(this,"modalDeleteBookmark",""),S(this,"modalDeleteBookmarkFlag",!1),S(this,"component",new Wn(Wc,Tl.builder().setText("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP").setLink(Dl.builder().setTextIsPage(!0).setOnRoute(m=>{})))),S(this,"data",void 0),S(this,"dataSearchEditorData",G3.builder()),S(this,"workerSvc",$a.builder()),S(this,"bookServerSvc",new Sz((m,v)=>{this.config.post(()=>{this.bookSvc.post(m,v)})})),S(this,"bookSvc",new D9((m,v)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(v):this.bookServerSvc.post(m,v)})})),this.bookmarksSvc=f,this.searcher=p,this.audioSvc=g,this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookmarksEnabled="books"==this.config.getApplication().id,this.searchEnabled=this.config.isRestServerType(),this.searcherHelper=new Kgt(this.searcher,l),this.dataSearchEditorData.setObject(this.searcherHelper.searchObject).setDescription("\u041f\u043e\u0438\u0441\u043a").setDescription2("\u0441\u043b\u043e\u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0435 [\u041d\u0415] \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435").setFieldName("search").setShape("search").setShape2("keyboard").setReadonly(!1).setOnClick(m=>{m==this.dataSearchEditorData.shape2?this.toggleKeyboard():this.searcherHelper?.onSearch("search",this.getSearchBookPaths(),v=>{this.syncSearchDatas(!0),this.dataSearchEditorData.setReadonly(!0)})}),this.jsSvc.addBookmarksEnvironment(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.uiConfig),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443",(m,v)=>{var _=m.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v[1]);return this.bookmarks&&this.bookmarks.find(C=>C.errorsData.errors[0]==_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())?.toggleLinkShow(),null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432",(m,v)=>{var _=m.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v[1]);return this.bookmarks&&this.bookmarks.find(C=>C.errorsData.errors[0]==_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())?.toggleLinkShow(),null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(m,v)=>{var _=m.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v[1]);return this.modalDeleteBookmark=_.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),this.modalDeleteBookmarkFlag=!0,null}),this.addMenuLink(ai.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("books"==this.config.getApplication().id?"cog":"users").setOnClick(()=>{this.boomarksData.click(null)}).setIsActive(()=>!1)),this.addMenuLink(ai.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.boomarksData.click("")}).setIsActive(()=>!1)),this.addMenuLink(ai.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("books"==this.config.getApplication().id?"bookmark":"search").setIsActive(()=>!0)),this.addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.boomarksData.click("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}ngOnInit(){super.ngOnInit(),this.bookmarkData&&this.config.post(()=>{this.searchMode=this.bookmarkData.startSearch})}ngOnDestroy(){super.ngOnDestroy(),this.workerSvc.unsubscribe()}ngAfterViewInit(){super.ngAfterViewInit(),this.audioSvc.stop(),this.config.post(()=>{this.searchMode=this.bookmarkData.startSearch}),this.workerSvc.enabled()?this.workerSvc.setOnMessage(l=>{this.config.post(()=>{this.bookSvc.post(null,l)})}):this.bookServerSvc.setCacheService(new Cz(new FT)),this.bookSvc.onLibraryLoadEvent.setOnEventHandler(()=>{this.tryLoadRemainsBookInfo(),this.loadBooksHeaders()}),this.bookSvc.onBookInfoLoadEvent.setOnEventHandler((l,h)=>{this.config.post(()=>{this.loadRemainsBookInfo2()})}),this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()})}getBookNameByPath(l){let h=l.split("/");return this.bookSvc.getNormalBookNameByBookPath(h[h.length-1])}loadRemainsBookInfo2(){if(!this.bookmarksSearchDatas)return;let h=this.bookmarksSearchDatas.bookmarks.pageItems.find(d=>d.errorsData.errors[0].indexOf("|")>=0&&!!this.getBookNameByPath(d.errorsData.errors[0]));if(null!=h){let f=h.errorsData.errors[0].split("|");if(f.length>1){let p=f[0],g=f[1],m=this.getBookNameByPath(p);if(m){let v=this.bookSvc.getShortBookName(m),y=this.bookSvc.bookInfo?.content.find(C=>p.endsWith(C.path)),b=`${v}${g}{${y?y.name:""}}`;h.setLink(b,this.searcherHelper?this.searcherHelper.search:"",!0,!1),h.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(b)),h.errorsData.errors[0]=`${b}`}}this.tryLoadRemainsBookInfo()}}tryLoadRemainsBookInfo(){this.tryLoadRemainsBookInfoCount>0||(++this.tryLoadRemainsBookInfoCount,this.config.post(()=>{this.loadRemainsBookInfo(),--this.tryLoadRemainsBookInfoCount}))}loadRemainsBookInfo(){let l=this.bookmarksSearchDatasAll.map(h=>{let d=this.getBookNameByPath(h.name);return{d:h,name:d?this.bookSvc.getShortBookName(d):null}}).filter(h=>!!h.name&&"\u0421\u043f\u0440"!=h.name).map(h=>h);!this.bookmarksSearchDatasAll||this.toolbarSearchHeaders.items.length==l.length||(this.toolbarSearchHeaders.setItems(l.map(h=>ba.builder().setText(h.name).setTag(h.d.name))).setOnClick(h=>{let d=this.bookmarksSearchDatasAll.find(f=>f.name==h.tag);d&&(this.bookmarksSearchDatas=d,this.loadRemainsBookInfoActiveGroup())}),this.bookmarksSearchDatas||this.config.post(()=>{this.toolbarSearchHeaders.click(this.toolbarSearchHeaders.items[0])}))}loadRemainsBookInfoActiveGroup(){this.bookmarksSearchDatas&&this.bookmarksSearchDatas.bookmarks.pageItems.forEach(h=>{if(null!=h){let p=h.errorsData.errors[0].split("|")[0],g=this.getBookNameByPath(p);g&&this.bookSvc.loadBookByName(g,[],"",!1)}})}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}syncBookmarks(){let l=this.bookmarksSvc.getBookmarks(),h=!1,d=this.getStdBookmarks();return h=this.bookmarksDatas.length!=l.length+d.length||null!=l.find((p,g)=>p!=this.bookmarksDatas[g+d.length].errorsData.errors[0]),h&&l.unshift(...d),h&&(this.bookmarksDatas=[],l.forEach((f,p)=>{let g=f.replace("-1000","+"),m=`\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${g}';\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 1) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 2) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 3) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 4) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          `,v=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),_=(this.jsSvc.run(m,v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),Q3.builder());_.errorsData.setOnClick(b=>{this.boomarksData.click(b)}),_.setLink(f,"").setMessages([g]).setActions(p<d.length?[Nc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]:[Nc.builder().setText("X").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(2).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Nc.builder().setText("\u041d\u0438\u0436\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(1).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Nc.builder().setText("\u0412\u044b\u0448\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(0).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Nc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",v,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),_.errorsData.classes.setAlertClass("warning").setAlertShape("").setNoPrint(!0),this.bookmarksDatas.push(_)})),h&&this.component.data.setText(l.map(p=>p+` /*\n\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441{\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0432\u0432\u0435\u0440\u0445 = false;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0432\u0432\u0435\u0440\u0445){\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${p}';\n    \u0432\u0432\u0435\u0440\u0445 = _\u0432\u0432\u0435\u0440\u0445;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043a\u043d\u043e\u043f\u043a\u0430){\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c(\n      '\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + (\u0432\u0432\u0435\u0440\u0445?'\u0432\u0432\u0435\u0440\u0445':'\u0432\u043d\u0438\u0437'));\n    \u0435\u0441\u043b\u0438 (\u0432\u0432\u0435\u0440\u0445) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2191','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(true), false);\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2193','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(false), false);\n*/`).join("\r\n")),this}saveBookmarks(l){return this.bookmarksSvc.setBookmarks(l),this}deleteAllBookmarks(){return this.bookmarksSvc.setBookmarks([]),this}toggleBookmarksView(){let l=this.isAllBookmarksVisible();return this.bookmarks&&this.bookmarks.forEach(h=>{h.libDataShow==l&&h.toggleLinkShow()}),this}isAllBookmarksVisible(){this.sync();let l=this.bookmarks;return!!l&&l.map(d=>d.libDataShow).reduce((d,f)=>d&&f,!0)}isBookmarksExists(){this.sync();let l=this.bookmarks;return!!l&&l.length>0}onDeleteAllBookmarks(){this.deleteAllBookmarks(),this.modalDeleteAllBookmarksFlag=!1}onDeleteBookmark(l){return this.bookmarksSvc.deleteBookmark(l),this.modalDeleteBookmarkFlag=!1,this}getDaysFromYear(){var l=new Date,h=new Date(l.getFullYear(),0,0),d=l.getTime()-h.getTime()+60*(h.getTimezoneOffset()-l.getTimezoneOffset())*1e3,f=864e5,p=Math.floor(d/f);if(p<14&&l.getFullYear()>2022){var g=new Date(l.getFullYear()-1,0,0),m=new Date(l.getFullYear()-1,11,31),v=m.getTime()-g.getTime()+60*(g.getTimezoneOffset()-m.getTimezoneOffset())*1e3;p+=Math.floor(v/f)}return p-13}getStdBookmarks(){let l=this.getDaysFromYear();return[`\u041c\u04412023.${l}:1-1000`,`\u0411\u04432023.${l}:1-1000`]}toggleSearch(){return this.searchMode=!this.searchMode,this}getChapter(l){let h=l.indexOf("."),f=+l.substring(0,h>=0?h:void 0).replace(/_/g,"");return isNaN(f)?null:f}getLines(l){let h=[],d=l.map(f=>f.items.map(p=>p.line)).flatMap(f=>f);return d.sort((f,p)=>f-p),d.forEach(f=>{h.indexOf(f)<0&&h.push(f)}),h}getLinesSingle(l){let h=[],d=l.items.map(f=>f.line);return d.sort((f,p)=>f-p),d.forEach(f=>{h.indexOf(f)<0&&h.push(f)}),h}createBookmarksFor(l,h){let d=[],f=this.getChapter(h.name),p=h.items.length?this.getLinesSingle(h):[1];return null!=f&&p.forEach(g=>{d.push(this.createBookmarksForSingle(`${l}|.${f}:${g}`))}),d}createBookmarksForSingle(l){let h=Q3.builder(),d=h.\u043f\u0430\u043c\u044f\u0442\u044c;return d.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(l)),this.jsSvc.run("\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: \"' + \u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '\": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u0442\u0438\u043f = 0;\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",d,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),h.errorsData.setOnClick(g=>{this.boomarksData.click(g)}).updateClasses(g=>{g.setAlertClass("info").setAlertShape("bookmark")}),h.setLink(l,this.searcherHelper?this.searcherHelper.search:"",!1,!1).setMessages([l]).setActions([Nc.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(4).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",d,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),h}syncSearchDatas(l){l&&(this.bookmarksSearchDatasAll=[],this.searcherHelper?.results.searchDataItems.forEach(h=>{let d=h.items.flatMap(f=>this.createBookmarksFor(h.name,f));if(d.length){let f=B9.builder();f.bookmarks.setItems(d),f.setName(h.name),this.bookmarksSearchDatasAll.push(f)}}),this.bookmarksSearchDatasAll.length>0&&this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()}))}currentPages(){if(this.bookmarksSearchDatas){let l=this.bookmarksSearchDatas.bookmarks.pagesCount;this.toolbarPages.items.length!=l&&this.toolbarPages.setItems([...Array(l).keys()].map(h=>h+1).map(h=>ba.builder().setTag(""+h).setText(""+h))),this.toolbarPages.items.forEach(h=>h.setSelected(h.tag==""+this.bookmarksSearchDatas.bookmarks.pageNumber))}else 0!=this.toolbarPages.items.length&&this.toolbarPages.setItems([]);return this.toolbarPages}currentHeaders(){return this.bookmarksSearchDatas&&this.toolbarSearchHeaders.items.forEach(l=>{l.setSelected(l.tag==this.bookmarksSearchDatas?.name)}),this.toolbarSearchHeaders}scrollToBookmarks(){return this.bookmarksView.nativeElement.scrollIntoView(!0),this}onNewSearch(){return this.dataSearchEditorData.setReadonly(!1),this.bookmarksSearchDatasAll=[],this.bookmarksSearchDatas=null,this.toolbarSearchHeaders.setItems([]),this}sync(){this.searchMode?this.syncSearchDatas(!1):this.syncBookmarks()}loadBooksHeaders(){!this.bookSvc.libraryInfo||this.toolbarBooksHeaders.items.length>0||this.toolbarBooksHeaders.setItems(this.bookSvc.libraryInfo.content.map(l=>l.path2?{name:l.path2[0],path:l.path}:null).filter(l=>!!l&&"\u0421\u043f\u0440"!=l.name).map(l=>l).map(l=>ba.builder().setText(l.name).setTag(l.path)))}getSearchBookPaths(){return this.toolbarBooksHeaders.items.filter(h=>h.selected).map(h=>h.tag)}toggleKeyboard(){this.dataSearchEditorData.toggleKeyboard()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh),z(k1),z(s_e),z(E1))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-bookmarks"]],viewQuery:function(l,h){if(1&l&&mi(smt,5),2&l){let d;jt(d=Zt())&&(h.bookmarksView=d.first)}},inputs:{data:"data"},features:[vn],decls:34,vars:12,consts:[[1,"clr-row","no-print"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[1,"btn","btn-block","btn-primary-outline",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","flame",1,"is-solid"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["shape","ban"],[1,"clr-col-4"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],["class","btn btn-block btn-primary-outline",3,"click",4,"ngIf"],["class","bottom-top-space",4,"ngIf"],[1,"bottom-top-space"],[3,"data"],["clrForm","","clrLayout","horizontal",1,"clr-hidden-xs-down"],["clrForm","","clrLayout","vertical",1,"clr-hidden-sm-up"],[4,"ngFor","ngForOf"],["bookmarksView",""],[3,"data",4,"ngIf"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,amt,3,5,"div",1),R(2,"div",2)(3,"button",3),ie("click",function(){return h.toggleBookmarksView()}),se(4),N()(),K(5,hmt,3,6,"div",4),N(),K(6,ymt,3,2,"div",5),K(7,Cmt,2,1,"div",5),R(8,"clr-modal",6),ie("clrModalOpenChange",function(f){return h.modalDeleteAllBookmarksFlag=f}),R(9,"h3",7),se(10,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),N(),R(11,"div",8),pe(12,"clr-icon",9),se(13," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),N(),R(14,"div",10)(15,"button",11),ie("click",function(){return h.onDeleteAllBookmarks()}),pe(16,"clr-icon",9),se(17,"\u0414\u0430"),N(),R(18,"button",12),ie("click",function(){return h.modalDeleteAllBookmarksFlag=!1}),pe(19,"clr-icon",13),se(20,"\u041d\u0435\u0442"),N()()(),R(21,"clr-modal",6),ie("clrModalOpenChange",function(f){return h.modalDeleteBookmarkFlag=f}),R(22,"h3",7),se(23,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"),N(),R(24,"div",8),pe(25,"clr-icon",9),se(26),N(),R(27,"div",10)(28,"button",11),ie("click",function(){return h.onDeleteBookmark(h.modalDeleteBookmark)}),pe(29,"clr-icon",9),se(30,"\u0414\u0430"),N(),R(31,"button",12),ie("click",function(){return h.modalDeleteBookmarkFlag=!1}),pe(32,"clr-icon",13),se(33,"\u041d\u0435\u0442"),N()()()),2&l&&(F(1),L("ngIf",h.searchEnabled&&h.bookmarksEnabled),F(1),L("ngClass",Wr(9,o_e,h.searchEnabled&&h.bookmarksEnabled,!(h.searchEnabled&&h.bookmarksEnabled))),F(2),gi("",h.isAllBookmarksVisible()?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"," \u0432\u0441\u0435"),F(1),L("ngIf",h.isBookmarksExists()||h.searchMode),F(1),L("ngIf",h.searchMode),F(1),L("ngIf",!h.searchMode),F(1),L("clrModalOpen",h.modalDeleteAllBookmarksFlag),F(13),L("clrModalOpen",h.modalDeleteBookmarkFlag),F(5),gi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0443 '",h.modalDeleteBookmark,"'? "))},dependencies:[di,vi,Sn,so,Hf,$f,yk,nze,jy,Wy,kf,Wc,XE,p7,I1,rmt],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();class V9{constructor(){}static builder(){return new V9}}class ob extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"startSearch",!1),this.classes=d}static builder(){return new ob("",null,null,V9.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setStartSearch(a){return this.startSearch=a,this}}function Smt(c,a){if(1&c&&(R(0,"div"),pe(1,"app-add-component",2),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}let xmt=(()=>{class c extends wg{constructor(l,h,d,f){super(l,h,d),S(this,"router",void 0),S(this,"helpBookName","\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),this.router=f,this.addMenuLink(ai.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.reset()},0)}).setIsActive(()=>this.isComponentType(Hw,null))).addMenuLink(ai.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.routeTo("")}).setIsActive(()=>this.isComponentType(Oo,Tl))).addMenuLink(ai.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(Oo,ob))).addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(l=>{this.config.post(()=>this.ngAfterViewInitRaw())})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)return pageRequestedDoc="",void this.routeToHelp("3");this.uiConfig.ui.visitedBooksHelp.getStringValue()===this.config.environment.version?this.uiConfig.ui.currentBook.getStringValue()?this.config.post(()=>{this.routeTo(this.uiConfig.ui.currentBook.getStringValue())}):this.config.post(()=>{this.reset()}):this.config.post(()=>{this.routeToHelp()})}reset(){this.components=[new Wn(Ofe,Hw.builder().setOnClick(l=>{this.routeTo(l.trim())}))],this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}isComponent(l,h=""){if(this.components.length<=0)return!1;let d=this.components[0].data,p=(d instanceof Oo?d:null)?.component?.data;return p?.text==l&&(p?.link.chapter==h||!h)||""==l&&!!p?.text}routeToHelp(l="1"){this.isComponent(this.helpBookName,l)&&"1"===l?this.routeTo(""):this.routeTo(this.helpBookName,l,0)}routeTo(l,h="",d=-1){let f=l,p=h,g=d;if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelp("3");if("books_help"==f||f==this.helpBookName&&""==p&&g<0)return void this.routeToHelp();if("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"==f)return void this.routeToBookmarks();if(f||(f=this.uiConfig.ui.currentBook.getStringValue()),!f||["UP","DOWN","AROUND","CENTER"].map(v=>f.endsWith(v)).reduce((v,y)=>v||y,!1))return;f!=this.uiConfig.ui.currentBook.getStringValue()&&f!=this.helpBookName&&this.uiConfig.ui.currentBook.setStringValue(f);let m=!1;f==this.helpBookName&&("3"!=p&&(p="1"),g=0,m=!0),this.components=[new Wn(ac,Oo.builder().setComponent(new Wn(Wc,Tl.builder().setText(f).setMenu(this.menuLinks).setForceMenu(!0).setHideUI(m).setFacePage(!0).setShowPrintButtons(!0).setLink(Dl.builder().setChapter(p).setStartLine(g).setEndLine(g>=0?1e3:-1).setOnRoute(v=>{v?this.routeTo(v.trim()):this.reset()})))))]}routeToBookmarks(){this.components=[new Wn(ac,Oo.builder().setComponent(new Wn(a_e,ob.builder().setText("bookmark").setOnClick(l=>{let h="string"==typeof l?l:null,d=h||this.uiConfig.ui.currentBook.getStringValue();d&&null!=h?this.routeTo(d):this.reset()}))))]}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh),z(js))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-books"]],features:[vn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,Smt,2,1,"div",1),N()),2&l&&(F(1),L("ngForOf",h.components))},dependencies:[vi,rc]})),c})();function wmt(c,a){if(1&c&&(R(0,"div"),pe(1,"app-add-component",3),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}let Omt=(()=>{class c extends wg{constructor(l,h,d,f){super(l,h,d),S(this,"memDataSvc",void 0),S(this,"appBookName","\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a APP_MMR"),S(this,"helpBookName","\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),S(this,"errorsData",Bc.builder()),this.memDataSvc=f,this.addMenuLink(ai.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("users").setOnClick(()=>{this.reset("2")}).setIsActive(()=>this.isComponent(this.appBookName,"2"))).addMenuLink(ai.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("book").setOnClick(()=>{this.reset("1")}).setIsActive(()=>this.isComponent(this.appBookName,"1"))),this.config.isRestServerType()&&this.addMenuLink(ai.builder().setLink("#").setName("\u041f\u043e\u0438\u0441\u043a").setShape("search").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(Oo,ob))),this.addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}isComponent(l,h=""){if(this.components.length<=0)return!1;let f=this.components[0].data.component?.data;return f?.text==l&&(!h||f?.link.chapter==h)}ngAfterViewInit(){this.memDataSvc.setup(l=>{if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed("4");else if(this.uiConfig.ui.visitedMemorialHelp.getStringValue()!==this.config.environment.version)this.routeToHelpDelayed();else{let h=this.uiConfig.ui.memorialBook.getStringValue(),d=this.uiConfig.ui.memorialChapter.getStringValue(),f=this.uiConfig.ui.memorialLine.getNumberValue();h?this.routeTo(h,d,f):this.resetDelayed()}}),super.ngAfterViewInit()}resetDelayed(l="2"){this.config.post(()=>{this.reset(l)})}reset(l="2"){this.routeTo(this.appBookName,l,1)}routeToHelpDelayed(l="2"){this.config.post(()=>{this.routeToHelp(l)})}routeToHelp(l="2"){this.isComponent(this.helpBookName,l)&&"2"===l?this.reset():this.routeTo(this.helpBookName,l,1)}routeToDelayed(l,h="",d=-1){this.config.post(()=>{this.routeTo(l,h,d)})}routeTo(l,h="",d=-1){let f=l;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed("4");if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed();""==h&&(h="1"),d<0&&(d=1),this.uiConfig.ui.memorialBook.setStringValue(f),this.uiConfig.ui.memorialChapter.setStringValue(h),this.uiConfig.ui.memorialLine.setNumberValue(d),this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(Wc,Tl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setShowPrintButtons(!0).setHandleMemorialNewTitle("MemorialMainWindow").setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Dl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed()})))))])}}routeToBookmarks(){this.components=[new Wn(ac,Oo.builder().setComponent(new Wn(a_e,ob.builder().setText("bookmark").setStartSearch(!0).setOnClick(l=>{if(this.config.post(()=>{this.applyMenuAppRoutes(!0)}),"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==l)this.routeToHelp("4");else if(l){let h=M1.builder().parse(l),d=h[0]?h[0][0]:null;if(d&&d?.type==ic.Link){let f=d;this.uiConfig.ui.memorialChapterRequested.setNumberValue(f.startChapter),f.langugages&&f.langugages.length>0&&this.uiConfig.ui.currentLanguages.setStringValue(f.langugages.join("|")),this.resetDelayed("1")}else this.routeToHelpDelayed()}else this.resetDelayed(null==l?"2":"1")}))))]}setComponentsDelayed(l){this.config.post(()=>{this.components=l})}clearErrors(){this.errorsData.setErrors([])}setErrors(l){this.errorsData.setErrors(l).updateClasses(h=>h.setAlertClass("alert-danger"))}onNewMemorial(){this.clearErrors(),this.newMemorial("\u0430\u0432\u0442\u043e\u0440\u044b")}onDeleteAllMemorials(){this.clearErrors(),this.memDataSvc.memorials?.items.length&&this.memDataSvc.memorials?.deleteMemorial(this.memDataSvc.memorials?.items[0])}newMemorial(l){this.memDataSvc.memorials?.newMemorial(l,h=>{h.success?this.memDataSvc.getMemorials().reloadMemorials(d=>{d&&this.memDataSvc.getPersons().reloadPersons()}):this.setErrors([h.error])})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh),z(jE))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-memorial"]],features:[vn],decls:3,vars:2,consts:[[1,"ftext-no","fade-in-3-no"],[3,"data"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),pe(1,"app-dynamic-errors",1),K(2,wmt,2,1,"div",2),N()),2&l&&(F(1),L("data",h.errorsData),F(1),L("ngForOf",h.components))},dependencies:[vi,rc,I1]})),c})();const ub=1e3,lc=1001,Zo=1003,Do=1006,lv=1009,cv=1014,jg=1015,qO=1016,db=1020,Rh=1023,uv=1026,fb=1027,hv=3e3,zs=3001,pp="srgb",dv="srgb-linear";class vb{addEventListener(a,l){void 0===this._listeners&&(this._listeners={});const h=this._listeners;void 0===h[a]&&(h[a]=[]),-1===h[a].indexOf(l)&&h[a].push(l)}hasEventListener(a,l){if(void 0===this._listeners)return!1;const h=this._listeners;return void 0!==h[a]&&-1!==h[a].indexOf(l)}removeEventListener(a,l){if(void 0===this._listeners)return;const d=this._listeners[a];if(void 0!==d){const f=d.indexOf(l);-1!==f&&d.splice(f,1)}}dispatchEvent(a){if(void 0===this._listeners)return;const h=this._listeners[a.type];if(void 0!==h){a.target=this;const d=h.slice(0);for(let f=0,p=d.length;f<p;f++)d[f].call(this,a);a.target=null}}}const qa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],fv=Math.PI/180,XO=180/Math.PI;function Qc(){const c=4294967295*Math.random()|0,a=4294967295*Math.random()|0,l=4294967295*Math.random()|0,h=4294967295*Math.random()|0;return(qa[255&c]+qa[c>>8&255]+qa[c>>16&255]+qa[c>>24&255]+"-"+qa[255&a]+qa[a>>8&255]+"-"+qa[a>>16&15|64]+qa[a>>24&255]+"-"+qa[63&l|128]+qa[l>>8&255]+"-"+qa[l>>16&255]+qa[l>>24&255]+qa[255&h]+qa[h>>8&255]+qa[h>>16&255]+qa[h>>24&255]).toLowerCase()}function lo(c,a,l){return Math.max(a,Math.min(l,c))}function YO(c,a,l){return(1-l)*c+l*a}function nW(c){return 0==(c&c-1)&&0!==c}function eI(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))}class yt{constructor(a=0,l=0){yt.prototype.isVector2=!0,this.x=a,this.y=l}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,l){return this.x=a,this.y=l,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a,l){return void 0!==l?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this)}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this}sub(a,l){return void 0!==l?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this)}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const l=this.x,h=this.y,d=a.elements;return this.x=d[0]*l+d[3]*h+d[6],this.y=d[1]*l+d[4]*h+d[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this}clampLength(a,l){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(l,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const l=this.x-a.x,h=this.y-a.y;return l*l+h*h}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this}lerpVectors(a,l,h){return this.x=a.x+(l.x-a.x)*h,this.y=a.y+(l.y-a.y)*h,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a}fromBufferAttribute(a,l,h){return void 0!==h&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this}rotateAround(a,l){const h=Math.cos(l),d=Math.sin(l),f=this.x-a.x,p=this.y-a.y;return this.x=f*h-p*d+a.x,this.y=f*d+p*h+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cc{constructor(){cc.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(a,l,h,d,f,p,g,m,v){const y=this.elements;return y[0]=a,y[1]=d,y[2]=g,y[3]=l,y[4]=f,y[5]=m,y[6]=h,y[7]=p,y[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const l=this.elements,h=a.elements;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],this}extractBasis(a,l,h){return a.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),h.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const l=a.elements;return this.set(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,l){const h=a.elements,d=l.elements,f=this.elements,p=h[0],g=h[3],m=h[6],v=h[1],y=h[4],_=h[7],b=h[2],C=h[5],x=h[8],w=d[0],O=d[3],D=d[6],T=d[1],M=d[4],k=d[7],E=d[2],P=d[5],V=d[8];return f[0]=p*w+g*T+m*E,f[3]=p*O+g*M+m*P,f[6]=p*D+g*k+m*V,f[1]=v*w+y*T+_*E,f[4]=v*O+y*M+_*P,f[7]=v*D+y*k+_*V,f[2]=b*w+C*T+x*E,f[5]=b*O+C*M+x*P,f[8]=b*D+C*k+x*V,this}multiplyScalar(a){const l=this.elements;return l[0]*=a,l[3]*=a,l[6]*=a,l[1]*=a,l[4]*=a,l[7]*=a,l[2]*=a,l[5]*=a,l[8]*=a,this}determinant(){const a=this.elements,l=a[0],h=a[1],d=a[2],f=a[3],p=a[4],g=a[5],m=a[6],v=a[7],y=a[8];return l*p*y-l*g*v-h*f*y+h*g*m+d*f*v-d*p*m}invert(){const a=this.elements,l=a[0],h=a[1],d=a[2],f=a[3],p=a[4],g=a[5],m=a[6],v=a[7],y=a[8],_=y*p-g*v,b=g*m-y*f,C=v*f-p*m,x=l*_+h*b+d*C;if(0===x)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return a[0]=_*w,a[1]=(d*v-y*h)*w,a[2]=(g*h-d*p)*w,a[3]=b*w,a[4]=(y*l-d*m)*w,a[5]=(d*f-g*l)*w,a[6]=C*w,a[7]=(h*m-v*l)*w,a[8]=(p*l-h*f)*w,this}transpose(){let a;const l=this.elements;return a=l[1],l[1]=l[3],l[3]=a,a=l[2],l[2]=l[6],l[6]=a,a=l[5],l[5]=l[7],l[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const l=this.elements;return a[0]=l[0],a[1]=l[3],a[2]=l[6],a[3]=l[1],a[4]=l[4],a[5]=l[7],a[6]=l[2],a[7]=l[5],a[8]=l[8],this}setUvTransform(a,l,h,d,f,p,g){const m=Math.cos(f),v=Math.sin(f);return this.set(h*m,h*v,-h*(m*p+v*g)+p+a,-d*v,d*m,-d*(-v*p+m*g)+g+l,0,0,1),this}scale(a,l){const h=this.elements;return h[0]*=a,h[3]*=a,h[6]*=a,h[1]*=l,h[4]*=l,h[7]*=l,this}rotate(a){const l=Math.cos(a),h=Math.sin(a),d=this.elements,f=d[0],p=d[3],g=d[6],m=d[1],v=d[4],y=d[7];return d[0]=l*f+h*m,d[3]=l*p+h*v,d[6]=l*g+h*y,d[1]=-h*f+l*m,d[4]=-h*p+l*v,d[7]=-h*g+l*y,this}translate(a,l){const h=this.elements;return h[0]+=a*h[2],h[3]+=a*h[5],h[6]+=a*h[8],h[1]+=l*h[2],h[4]+=l*h[5],h[7]+=l*h[8],this}equals(a){const l=this.elements,h=a.elements;for(let d=0;d<9;d++)if(l[d]!==h[d])return!1;return!0}fromArray(a,l=0){for(let h=0;h<9;h++)this.elements[h]=a[h+l];return this}toArray(a=[],l=0){const h=this.elements;return a[l]=h[0],a[l+1]=h[1],a[l+2]=h[2],a[l+3]=h[3],a[l+4]=h[4],a[l+5]=h[5],a[l+6]=h[6],a[l+7]=h[7],a[l+8]=h[8],a}clone(){return(new this.constructor).fromArray(this.elements)}}function Q_e(c){for(let a=c.length-1;a>=0;--a)if(c[a]>65535)return!0;return!1}function KO(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function pv(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function tI(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const iW={[pp]:{[dv]:pv},[dv]:{[pp]:tI}},Fh={legacyMode:!0,get workingColorSpace(){return dv},set workingColorSpace(c){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(c,a,l){if(this.legacyMode||a===l||!a||!l)return c;if(iW[a]&&void 0!==iW[a][l]){const h=iW[a][l];return c.r=h(c.r),c.g=h(c.g),c.b=h(c.b),c}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(c,a){return this.convert(c,this.workingColorSpace,a)},toWorkingColorSpace:function(c,a){return this.convert(c,a,this.workingColorSpace)}},j_e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qo={r:0,g:0,b:0},Lh={h:0,s:0,l:0},nI={h:0,s:0,l:0};function rW(c,a,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?c+6*(a-c)*l:l<.5?a:l<2/3?c+6*(a-c)*(2/3-l):c}function iI(c,a){return a.r=c.r,a.g=c.g,a.b=c.b,a}let _b,pn=(()=>{class c{constructor(l,h,d){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===h&&void 0===d?this.set(l):this.setRGB(l,h,d)}set(l){return l&&l.isColor?this.copy(l):"number"==typeof l?this.setHex(l):"string"==typeof l&&this.setStyle(l),this}setScalar(l){return this.r=l,this.g=l,this.b=l,this}setHex(l,h=pp){return l=Math.floor(l),this.r=(l>>16&255)/255,this.g=(l>>8&255)/255,this.b=(255&l)/255,Fh.toWorkingColorSpace(this,h),this}setRGB(l,h,d,f=dv){return this.r=l,this.g=h,this.b=d,Fh.toWorkingColorSpace(this,f),this}setHSL(l,h,d,f=dv){if(l=function tW(c,a){return(c%a+a)%a}(l,1),h=lo(h,0,1),d=lo(d,0,1),0===h)this.r=this.g=this.b=d;else{const p=d<=.5?d*(1+h):d+h-d*h,g=2*d-p;this.r=rW(g,p,l+1/3),this.g=rW(g,p,l),this.b=rW(g,p,l-1/3)}return Fh.toWorkingColorSpace(this,f),this}setStyle(l,h=pp){function d(p){void 0!==p&&parseFloat(p)<1&&console.warn("THREE.Color: Alpha component of "+l+" will be ignored.")}let f;if(f=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(l)){let p;const m=f[2];switch(f[1]){case"rgb":case"rgba":if(p=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(255,parseInt(p[1],10))/255,this.g=Math.min(255,parseInt(p[2],10))/255,this.b=Math.min(255,parseInt(p[3],10))/255,Fh.toWorkingColorSpace(this,h),d(p[4]),this;if(p=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(100,parseInt(p[1],10))/100,this.g=Math.min(100,parseInt(p[2],10))/100,this.b=Math.min(100,parseInt(p[3],10))/100,Fh.toWorkingColorSpace(this,h),d(p[4]),this;break;case"hsl":case"hsla":if(p=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m)){const v=parseFloat(p[1])/360,y=parseInt(p[2],10)/100,_=parseInt(p[3],10)/100;return d(p[4]),this.setHSL(v,y,_,h)}}}else if(f=/^\#([A-Fa-f\d]+)$/.exec(l)){const p=f[1],g=p.length;if(3===g)return this.r=parseInt(p.charAt(0)+p.charAt(0),16)/255,this.g=parseInt(p.charAt(1)+p.charAt(1),16)/255,this.b=parseInt(p.charAt(2)+p.charAt(2),16)/255,Fh.toWorkingColorSpace(this,h),this;if(6===g)return this.r=parseInt(p.charAt(0)+p.charAt(1),16)/255,this.g=parseInt(p.charAt(2)+p.charAt(3),16)/255,this.b=parseInt(p.charAt(4)+p.charAt(5),16)/255,Fh.toWorkingColorSpace(this,h),this}return l&&l.length>0?this.setColorName(l,h):this}setColorName(l,h=pp){const d=j_e[l.toLowerCase()];return void 0!==d?this.setHex(d,h):console.warn("THREE.Color: Unknown color "+l),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(l){return this.r=l.r,this.g=l.g,this.b=l.b,this}copySRGBToLinear(l){return this.r=pv(l.r),this.g=pv(l.g),this.b=pv(l.b),this}copyLinearToSRGB(l){return this.r=tI(l.r),this.g=tI(l.g),this.b=tI(l.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(l=pp){return Fh.fromWorkingColorSpace(iI(this,qo),l),lo(255*qo.r,0,255)<<16^lo(255*qo.g,0,255)<<8^lo(255*qo.b,0,255)<<0}getHexString(l=pp){return("000000"+this.getHex(l).toString(16)).slice(-6)}getHSL(l,h=dv){Fh.fromWorkingColorSpace(iI(this,qo),h);const d=qo.r,f=qo.g,p=qo.b,g=Math.max(d,f,p),m=Math.min(d,f,p);let v,y;const _=(m+g)/2;if(m===g)v=0,y=0;else{const b=g-m;switch(y=_<=.5?b/(g+m):b/(2-g-m),g){case d:v=(f-p)/b+(f<p?6:0);break;case f:v=(p-d)/b+2;break;case p:v=(d-f)/b+4}v/=6}return l.h=v,l.s=y,l.l=_,l}getRGB(l,h=dv){return Fh.fromWorkingColorSpace(iI(this,qo),h),l.r=qo.r,l.g=qo.g,l.b=qo.b,l}getStyle(l=pp){return Fh.fromWorkingColorSpace(iI(this,qo),l),l!==pp?`color(${l} ${qo.r} ${qo.g} ${qo.b})`:`rgb(${255*qo.r|0},${255*qo.g|0},${255*qo.b|0})`}offsetHSL(l,h,d){return this.getHSL(Lh),Lh.h+=l,Lh.s+=h,Lh.l+=d,this.setHSL(Lh.h,Lh.s,Lh.l),this}add(l){return this.r+=l.r,this.g+=l.g,this.b+=l.b,this}addColors(l,h){return this.r=l.r+h.r,this.g=l.g+h.g,this.b=l.b+h.b,this}addScalar(l){return this.r+=l,this.g+=l,this.b+=l,this}sub(l){return this.r=Math.max(0,this.r-l.r),this.g=Math.max(0,this.g-l.g),this.b=Math.max(0,this.b-l.b),this}multiply(l){return this.r*=l.r,this.g*=l.g,this.b*=l.b,this}multiplyScalar(l){return this.r*=l,this.g*=l,this.b*=l,this}lerp(l,h){return this.r+=(l.r-this.r)*h,this.g+=(l.g-this.g)*h,this.b+=(l.b-this.b)*h,this}lerpColors(l,h,d){return this.r=l.r+(h.r-l.r)*d,this.g=l.g+(h.g-l.g)*d,this.b=l.b+(h.b-l.b)*d,this}lerpHSL(l,h){this.getHSL(Lh),l.getHSL(nI);const d=YO(Lh.h,nI.h,h),f=YO(Lh.s,nI.s,h),p=YO(Lh.l,nI.l,h);return this.setHSL(d,f,p),this}equals(l){return l.r===this.r&&l.g===this.g&&l.b===this.b}fromArray(l,h=0){return this.r=l[h],this.g=l[h+1],this.b=l[h+2],this}toArray(l=[],h=0){return l[h]=this.r,l[h+1]=this.g,l[h+2]=this.b,l}fromBufferAttribute(l,h){return this.r=l.getX(h),this.g=l.getY(h),this.b=l.getZ(h),!0===l.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return c.NAMES=j_e,c})();class Z_e{static getDataURL(a){if(/^data:/i.test(a.src)||typeof HTMLCanvasElement>"u")return a.src;let l;if(a instanceof HTMLCanvasElement)l=a;else{void 0===_b&&(_b=KO("canvas")),_b.width=a.width,_b.height=a.height;const h=_b.getContext("2d");a instanceof ImageData?h.putImageData(a,0,0):h.drawImage(a,0,0,a.width,a.height),l=_b}return l.width>2048||l.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),l.toDataURL("image/jpeg",.6)):l.toDataURL("image/png")}static sRGBToLinear(a){if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap){const l=KO("canvas");l.width=a.width,l.height=a.height;const h=l.getContext("2d");h.drawImage(a,0,0,a.width,a.height);const d=h.getImageData(0,0,a.width,a.height),f=d.data;for(let p=0;p<f.length;p++)f[p]=255*pv(f[p]/255);return h.putImageData(d,0,0),l}if(a.data){const l=a.data.slice(0);for(let h=0;h<l.length;h++)l[h]=l instanceof Uint8Array||l instanceof Uint8ClampedArray?Math.floor(255*pv(l[h]/255)):pv(l[h]);return{data:l,width:a.width,height:a.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),a}}class bb{constructor(a=null){this.isSource=!0,this.uuid=Qc(),this.data=a,this.version=0}set needsUpdate(a){!0===a&&this.version++}toJSON(a){const l=void 0===a||"string"==typeof a;if(!l&&void 0!==a.images[this.uuid])return a.images[this.uuid];const h={uuid:this.uuid,url:""},d=this.data;if(null!==d){let f;if(Array.isArray(d)){f=[];for(let p=0,g=d.length;p<g;p++)f.push(sW(d[p].isDataTexture?d[p].image:d[p]))}else f=sW(d);h.url=f}return l||(a.images[this.uuid]=h),h}}function sW(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?Z_e.getDataURL(c):c.data?{data:Array.from(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let N0t=0,Yd=(()=>{class c extends vb{constructor(l=c.DEFAULT_IMAGE,h=c.DEFAULT_MAPPING,d=lc,f=lc,p=Do,g=1008,m=Rh,v=lv,y=1,_=hv){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:N0t++}),this.uuid=Qc(),this.name="",this.source=new bb(l),this.mipmaps=[],this.mapping=h,this.wrapS=d,this.wrapT=f,this.magFilter=p,this.minFilter=g,this.anisotropy=y,this.format=m,this.internalFormat=null,this.type=v,this.offset=new yt(0,0),this.repeat=new yt(1,1),this.center=new yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(l){this.source.data=l}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(l){return this.name=l.name,this.source=l.source,this.mipmaps=l.mipmaps.slice(0),this.mapping=l.mapping,this.wrapS=l.wrapS,this.wrapT=l.wrapT,this.magFilter=l.magFilter,this.minFilter=l.minFilter,this.anisotropy=l.anisotropy,this.format=l.format,this.internalFormat=l.internalFormat,this.type=l.type,this.offset.copy(l.offset),this.repeat.copy(l.repeat),this.center.copy(l.center),this.rotation=l.rotation,this.matrixAutoUpdate=l.matrixAutoUpdate,this.matrix.copy(l.matrix),this.generateMipmaps=l.generateMipmaps,this.premultiplyAlpha=l.premultiplyAlpha,this.flipY=l.flipY,this.unpackAlignment=l.unpackAlignment,this.encoding=l.encoding,this.userData=JSON.parse(JSON.stringify(l.userData)),this.needsUpdate=!0,this}toJSON(l){const h=void 0===l||"string"==typeof l;if(!h&&void 0!==l.textures[this.uuid])return l.textures[this.uuid];const d={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(l).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData),h||(l.textures[this.uuid]=d),d}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(l){if(300!==this.mapping)return l;if(l.applyMatrix3(this.matrix),l.x<0||l.x>1)switch(this.wrapS){case ub:l.x=l.x-Math.floor(l.x);break;case lc:l.x=l.x<0?0:1;break;case 1002:l.x=1===Math.abs(Math.floor(l.x)%2)?Math.ceil(l.x)-l.x:l.x-Math.floor(l.x)}if(l.y<0||l.y>1)switch(this.wrapT){case ub:l.y=l.y-Math.floor(l.y);break;case lc:l.y=l.y<0?0:1;break;case 1002:l.y=1===Math.abs(Math.floor(l.y)%2)?Math.ceil(l.y)-l.y:l.y-Math.floor(l.y)}return this.flipY&&(l.y=1-l.y),l}set needsUpdate(l){!0===l&&(this.version++,this.source.needsUpdate=!0)}}return c.DEFAULT_IMAGE=null,c.DEFAULT_MAPPING=300,c})();class pr{constructor(a=0,l=0,h=0,d=1){pr.prototype.isVector4=!0,this.x=a,this.y=l,this.z=h,this.w=d}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,l,h,d){return this.x=a,this.y=l,this.z=h,this.w=d,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this.w=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setW(a){return this.w=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this}add(a,l){return void 0!==l?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this.z=a.z+l.z,this.w=a.w+l.w,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this.z+=a.z*l,this.w+=a.w*l,this}sub(a,l){return void 0!==l?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this.z=a.z-l.z,this.w=a.w-l.w,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this}applyMatrix4(a){const l=this.x,h=this.y,d=this.z,f=this.w,p=a.elements;return this.x=p[0]*l+p[4]*h+p[8]*d+p[12]*f,this.y=p[1]*l+p[5]*h+p[9]*d+p[13]*f,this.z=p[2]*l+p[6]*h+p[10]*d+p[14]*f,this.w=p[3]*l+p[7]*h+p[11]*d+p[15]*f,this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const l=Math.sqrt(1-a.w*a.w);return l<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/l,this.y=a.y/l,this.z=a.z/l),this}setAxisAngleFromRotationMatrix(a){let l,h,d,f;const m=a.elements,v=m[0],y=m[4],_=m[8],b=m[1],C=m[5],x=m[9],w=m[2],O=m[6],D=m[10];if(Math.abs(y-b)<.01&&Math.abs(_-w)<.01&&Math.abs(x-O)<.01){if(Math.abs(y+b)<.1&&Math.abs(_+w)<.1&&Math.abs(x+O)<.1&&Math.abs(v+C+D-3)<.1)return this.set(1,0,0,0),this;l=Math.PI;const M=(v+1)/2,k=(C+1)/2,E=(D+1)/2,P=(y+b)/4,V=(_+w)/4,I=(x+O)/4;return M>k&&M>E?M<.01?(h=0,d=.707106781,f=.707106781):(h=Math.sqrt(M),d=P/h,f=V/h):k>E?k<.01?(h=.707106781,d=0,f=.707106781):(d=Math.sqrt(k),h=P/d,f=I/d):E<.01?(h=.707106781,d=.707106781,f=0):(f=Math.sqrt(E),h=V/f,d=I/f),this.set(h,d,f,l),this}let T=Math.sqrt((O-x)*(O-x)+(_-w)*(_-w)+(b-y)*(b-y));return Math.abs(T)<.001&&(T=1),this.x=(O-x)/T,this.y=(_-w)/T,this.z=(b-y)/T,this.w=Math.acos((v+C+D-1)/2),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this.z=Math.max(a.z,Math.min(l.z,this.z)),this.w=Math.max(a.w,Math.min(l.w,this.w)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this.z=Math.max(a,Math.min(l,this.z)),this.w=Math.max(a,Math.min(l,this.w)),this}clampLength(a,l){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(l,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this.z+=(a.z-this.z)*l,this.w+=(a.w-this.w)*l,this}lerpVectors(a,l,h){return this.x=a.x+(l.x-a.x)*h,this.y=a.y+(l.y-a.y)*h,this.z=a.z+(l.z-a.z)*h,this.w=a.w+(l.w-a.w)*h,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this.z=a[l+2],this.w=a[l+3],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a[l+2]=this.z,a[l+3]=this.w,a}fromBufferAttribute(a,l,h){return void 0!==h&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this.z=a.getZ(l),this.w=a.getW(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Fl extends vb{constructor(a,l,h={}){super(),this.isWebGLRenderTarget=!0,this.width=a,this.height=l,this.depth=1,this.scissor=new pr(0,0,a,l),this.scissorTest=!1,this.viewport=new pr(0,0,a,l),this.texture=new Yd({width:a,height:l,depth:1},h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.internalFormat=void 0!==h.internalFormat?h.internalFormat:null,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:Do,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0!==h.stencilBuffer&&h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null,this.samples=void 0!==h.samples?h.samples:0}setSize(a,l,h=1){(this.width!==a||this.height!==l||this.depth!==h)&&(this.width=a,this.height=l,this.depth=h,this.texture.image.width=a,this.texture.image.height=l,this.texture.image.depth=h,this.dispose()),this.viewport.set(0,0,a,l),this.scissor.set(0,0,a,l)}clone(){return(new this.constructor).copy(this)}copy(a){this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.isRenderTargetTexture=!0;const l=Object.assign({},a.texture.image);return this.texture.source=new bb(l),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,null!==a.depthTexture&&(this.depthTexture=a.depthTexture.clone()),this.samples=a.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class oW extends Yd{constructor(a=null,l=1,h=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:a,width:l,height:h,depth:d},this.magFilter=Zo,this.minFilter=Zo,this.wrapR=lc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class q_e extends Yd{constructor(a=null,l=1,h=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:a,width:l,height:h,depth:d},this.magFilter=Zo,this.minFilter=Zo,this.wrapR=lc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jc{constructor(a=0,l=0,h=0,d=1){this.isQuaternion=!0,this._x=a,this._y=l,this._z=h,this._w=d}static slerp(a,l,h,d){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),h.slerpQuaternions(a,l,d)}static slerpFlat(a,l,h,d,f,p,g){let m=h[d+0],v=h[d+1],y=h[d+2],_=h[d+3];const b=f[p+0],C=f[p+1],x=f[p+2],w=f[p+3];if(0===g)return a[l+0]=m,a[l+1]=v,a[l+2]=y,void(a[l+3]=_);if(1===g)return a[l+0]=b,a[l+1]=C,a[l+2]=x,void(a[l+3]=w);if(_!==w||m!==b||v!==C||y!==x){let O=1-g;const D=m*b+v*C+y*x+_*w,T=D>=0?1:-1,M=1-D*D;if(M>Number.EPSILON){const E=Math.sqrt(M),P=Math.atan2(E,D*T);O=Math.sin(O*P)/E,g=Math.sin(g*P)/E}const k=g*T;if(m=m*O+b*k,v=v*O+C*k,y=y*O+x*k,_=_*O+w*k,O===1-g){const E=1/Math.sqrt(m*m+v*v+y*y+_*_);m*=E,v*=E,y*=E,_*=E}}a[l]=m,a[l+1]=v,a[l+2]=y,a[l+3]=_}static multiplyQuaternionsFlat(a,l,h,d,f,p){const g=h[d],m=h[d+1],v=h[d+2],y=h[d+3],_=f[p],b=f[p+1],C=f[p+2],x=f[p+3];return a[l]=g*x+y*_+m*C-v*b,a[l+1]=m*x+y*b+v*_-g*C,a[l+2]=v*x+y*C+g*b-m*_,a[l+3]=y*x-g*_-m*b-v*C,a}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a,this._onChangeCallback()}set(a,l,h,d){return this._x=a,this._y=l,this._z=h,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this._onChangeCallback(),this}setFromEuler(a,l){if(!a||!a.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const h=a._x,d=a._y,f=a._z,p=a._order,g=Math.cos,m=Math.sin,v=g(h/2),y=g(d/2),_=g(f/2),b=m(h/2),C=m(d/2),x=m(f/2);switch(p){case"XYZ":this._x=b*y*_+v*C*x,this._y=v*C*_-b*y*x,this._z=v*y*x+b*C*_,this._w=v*y*_-b*C*x;break;case"YXZ":this._x=b*y*_+v*C*x,this._y=v*C*_-b*y*x,this._z=v*y*x-b*C*_,this._w=v*y*_+b*C*x;break;case"ZXY":this._x=b*y*_-v*C*x,this._y=v*C*_+b*y*x,this._z=v*y*x+b*C*_,this._w=v*y*_-b*C*x;break;case"ZYX":this._x=b*y*_-v*C*x,this._y=v*C*_+b*y*x,this._z=v*y*x-b*C*_,this._w=v*y*_+b*C*x;break;case"YZX":this._x=b*y*_+v*C*x,this._y=v*C*_+b*y*x,this._z=v*y*x-b*C*_,this._w=v*y*_-b*C*x;break;case"XZY":this._x=b*y*_-v*C*x,this._y=v*C*_-b*y*x,this._z=v*y*x+b*C*_,this._w=v*y*_+b*C*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return!1!==l&&this._onChangeCallback(),this}setFromAxisAngle(a,l){const h=l/2,d=Math.sin(h);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(h),this._onChangeCallback(),this}setFromRotationMatrix(a){const l=a.elements,h=l[0],d=l[4],f=l[8],p=l[1],g=l[5],m=l[9],v=l[2],y=l[6],_=l[10],b=h+g+_;if(b>0){const C=.5/Math.sqrt(b+1);this._w=.25/C,this._x=(y-m)*C,this._y=(f-v)*C,this._z=(p-d)*C}else if(h>g&&h>_){const C=2*Math.sqrt(1+h-g-_);this._w=(y-m)/C,this._x=.25*C,this._y=(d+p)/C,this._z=(f+v)/C}else if(g>_){const C=2*Math.sqrt(1+g-h-_);this._w=(f-v)/C,this._x=(d+p)/C,this._y=.25*C,this._z=(m+y)/C}else{const C=2*Math.sqrt(1+_-h-g);this._w=(p-d)/C,this._x=(f+v)/C,this._y=(m+y)/C,this._z=.25*C}return this._onChangeCallback(),this}setFromUnitVectors(a,l){let h=a.dot(l)+1;return h<Number.EPSILON?(h=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=h):(this._x=0,this._y=-a.z,this._z=a.y,this._w=h)):(this._x=a.y*l.z-a.z*l.y,this._y=a.z*l.x-a.x*l.z,this._z=a.x*l.y-a.y*l.x,this._w=h),this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(lo(this.dot(a),-1,1)))}rotateTowards(a,l){const h=this.angleTo(a);if(0===h)return this;const d=Math.min(1,l/h);return this.slerp(a,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this._onChangeCallback(),this}multiply(a,l){return void 0!==l?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,l)):this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,l){const h=a._x,d=a._y,f=a._z,p=a._w,g=l._x,m=l._y,v=l._z,y=l._w;return this._x=h*y+p*g+d*v-f*m,this._y=d*y+p*m+f*g-h*v,this._z=f*y+p*v+h*m-d*g,this._w=p*y-h*g-d*m-f*v,this._onChangeCallback(),this}slerp(a,l){if(0===l)return this;if(1===l)return this.copy(a);const h=this._x,d=this._y,f=this._z,p=this._w;let g=p*a._w+h*a._x+d*a._y+f*a._z;if(g<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a),g>=1)return this._w=p,this._x=h,this._y=d,this._z=f,this;const m=1-g*g;if(m<=Number.EPSILON){const C=1-l;return this._w=C*p+l*this._w,this._x=C*h+l*this._x,this._y=C*d+l*this._y,this._z=C*f+l*this._z,this.normalize(),this._onChangeCallback(),this}const v=Math.sqrt(m),y=Math.atan2(v,g),_=Math.sin((1-l)*y)/v,b=Math.sin(l*y)/v;return this._w=p*_+this._w*b,this._x=h*_+this._x*b,this._y=d*_+this._y*b,this._z=f*_+this._z*b,this._onChangeCallback(),this}slerpQuaternions(a,l,h){return this.copy(a).slerp(l,h)}random(){const a=Math.random(),l=Math.sqrt(1-a),h=Math.sqrt(a),d=2*Math.PI*Math.random(),f=2*Math.PI*Math.random();return this.set(l*Math.cos(d),h*Math.sin(f),h*Math.cos(f),l*Math.sin(d))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,l=0){return this._x=a[l],this._y=a[l+1],this._z=a[l+2],this._w=a[l+3],this._onChangeCallback(),this}toArray(a=[],l=0){return a[l]=this._x,a[l+1]=this._y,a[l+2]=this._z,a[l+3]=this._w,a}fromBufferAttribute(a,l){return this._x=a.getX(l),this._y=a.getY(l),this._z=a.getZ(l),this._w=a.getW(l),this}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(a=0,l=0,h=0){ae.prototype.isVector3=!0,this.x=a,this.y=l,this.z=h}set(a,l,h){return void 0===h&&(h=this.z),this.x=a,this.y=l,this.z=h,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a,l){return void 0!==l?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this.z=a.z+l.z,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this.z+=a.z*l,this}sub(a,l){return void 0!==l?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this.z=a.z-l.z,this}multiply(a,l){return void 0!==l?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,l)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}multiplyVectors(a,l){return this.x=a.x*l.x,this.y=a.y*l.y,this.z=a.z*l.z,this}applyEuler(a){return a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(X_e.setFromEuler(a))}applyAxisAngle(a,l){return this.applyQuaternion(X_e.setFromAxisAngle(a,l))}applyMatrix3(a){const l=this.x,h=this.y,d=this.z,f=a.elements;return this.x=f[0]*l+f[3]*h+f[6]*d,this.y=f[1]*l+f[4]*h+f[7]*d,this.z=f[2]*l+f[5]*h+f[8]*d,this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const l=this.x,h=this.y,d=this.z,f=a.elements,p=1/(f[3]*l+f[7]*h+f[11]*d+f[15]);return this.x=(f[0]*l+f[4]*h+f[8]*d+f[12])*p,this.y=(f[1]*l+f[5]*h+f[9]*d+f[13])*p,this.z=(f[2]*l+f[6]*h+f[10]*d+f[14])*p,this}applyQuaternion(a){const l=this.x,h=this.y,d=this.z,f=a.x,p=a.y,g=a.z,m=a.w,v=m*l+p*d-g*h,y=m*h+g*l-f*d,_=m*d+f*h-p*l,b=-f*l-p*h-g*d;return this.x=v*m+b*-f+y*-g-_*-p,this.y=y*m+b*-p+_*-f-v*-g,this.z=_*m+b*-g+v*-p-y*-f,this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const l=this.x,h=this.y,d=this.z,f=a.elements;return this.x=f[0]*l+f[4]*h+f[8]*d,this.y=f[1]*l+f[5]*h+f[9]*d,this.z=f[2]*l+f[6]*h+f[10]*d,this.normalize()}divide(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this.z=Math.max(a.z,Math.min(l.z,this.z)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this.z=Math.max(a,Math.min(l,this.z)),this}clampLength(a,l){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(l,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this.z+=(a.z-this.z)*l,this}lerpVectors(a,l,h){return this.x=a.x+(l.x-a.x)*h,this.y=a.y+(l.y-a.y)*h,this.z=a.z+(l.z-a.z)*h,this}cross(a,l){return void 0!==l?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,l)):this.crossVectors(this,a)}crossVectors(a,l){const h=a.x,d=a.y,f=a.z,p=l.x,g=l.y,m=l.z;return this.x=d*m-f*g,this.y=f*p-h*m,this.z=h*g-d*p,this}projectOnVector(a){const l=a.lengthSq();if(0===l)return this.set(0,0,0);const h=a.dot(this)/l;return this.copy(a).multiplyScalar(h)}projectOnPlane(a){return aW.copy(this).projectOnVector(a),this.sub(aW)}reflect(a){return this.sub(aW.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const l=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===l)return Math.PI/2;const h=this.dot(a)/l;return Math.acos(lo(h,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const l=this.x-a.x,h=this.y-a.y,d=this.z-a.z;return l*l+h*h+d*d}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,l,h){const d=Math.sin(l)*a;return this.x=d*Math.sin(h),this.y=Math.cos(l)*a,this.z=d*Math.cos(h),this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,l,h){return this.x=a*Math.sin(l),this.y=h,this.z=a*Math.cos(l),this}setFromMatrixPosition(a){const l=a.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}setFromMatrixScale(a){const l=this.setFromMatrixColumn(a,0).length(),h=this.setFromMatrixColumn(a,1).length(),d=this.setFromMatrixColumn(a,2).length();return this.x=l,this.y=h,this.z=d,this}setFromMatrixColumn(a,l){return this.fromArray(a.elements,4*l)}setFromMatrix3Column(a,l){return this.fromArray(a.elements,3*l)}setFromEuler(a){return this.x=a._x,this.y=a._y,this.z=a._z,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this.z=a[l+2],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a[l+2]=this.z,a}fromBufferAttribute(a,l,h){return void 0!==h&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this.z=a.getZ(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const a=2*(Math.random()-.5),l=Math.random()*Math.PI*2,h=Math.sqrt(1-a**2);return this.x=h*Math.cos(l),this.y=h*Math.sin(l),this.z=a,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const aW=new ae,X_e=new jc;class Cb{constructor(a=new ae(1/0,1/0,1/0),l=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=a,this.max=l}set(a,l){return this.min.copy(a),this.max.copy(l),this}setFromArray(a){let l=1/0,h=1/0,d=1/0,f=-1/0,p=-1/0,g=-1/0;for(let m=0,v=a.length;m<v;m+=3){const y=a[m],_=a[m+1],b=a[m+2];y<l&&(l=y),_<h&&(h=_),b<d&&(d=b),y>f&&(f=y),_>p&&(p=_),b>g&&(g=b)}return this.min.set(l,h,d),this.max.set(f,p,g),this}setFromBufferAttribute(a){let l=1/0,h=1/0,d=1/0,f=-1/0,p=-1/0,g=-1/0;for(let m=0,v=a.count;m<v;m++){const y=a.getX(m),_=a.getY(m),b=a.getZ(m);y<l&&(l=y),_<h&&(h=_),b<d&&(d=b),y>f&&(f=y),_>p&&(p=_),b>g&&(g=b)}return this.min.set(l,h,d),this.max.set(f,p,g),this}setFromPoints(a){this.makeEmpty();for(let l=0,h=a.length;l<h;l++)this.expandByPoint(a[l]);return this}setFromCenterAndSize(a,l){const h=gv.copy(l).multiplyScalar(.5);return this.min.copy(a).sub(h),this.max.copy(a).add(h),this}setFromObject(a,l=!1){return this.makeEmpty(),this.expandByObject(a,l)}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}expandByObject(a,l=!1){a.updateWorldMatrix(!1,!1);const h=a.geometry;if(void 0!==h)if(l&&null!=h.attributes&&void 0!==h.attributes.position){const f=h.attributes.position;for(let p=0,g=f.count;p<g;p++)gv.fromBufferAttribute(f,p).applyMatrix4(a.matrixWorld),this.expandByPoint(gv)}else null===h.boundingBox&&h.computeBoundingBox(),lW.copy(h.boundingBox),lW.applyMatrix4(a.matrixWorld),this.union(lW);const d=a.children;for(let f=0,p=d.length;f<p;f++)this.expandByObject(d[f],l);return this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,l){return l.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)}intersectsSphere(a){return this.clampPoint(a.center,gv),gv.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let l,h;return a.normal.x>0?(l=a.normal.x*this.min.x,h=a.normal.x*this.max.x):(l=a.normal.x*this.max.x,h=a.normal.x*this.min.x),a.normal.y>0?(l+=a.normal.y*this.min.y,h+=a.normal.y*this.max.y):(l+=a.normal.y*this.max.y,h+=a.normal.y*this.min.y),a.normal.z>0?(l+=a.normal.z*this.min.z,h+=a.normal.z*this.max.z):(l+=a.normal.z*this.max.z,h+=a.normal.z*this.min.z),l<=-a.constant&&h>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(JO),rI.subVectors(this.max,JO),Sb.subVectors(a.a,JO),xb.subVectors(a.b,JO),wb.subVectors(a.c,JO),Zg.subVectors(xb,Sb),qg.subVectors(wb,xb),mv.subVectors(Sb,wb);let l=[0,-Zg.z,Zg.y,0,-qg.z,qg.y,0,-mv.z,mv.y,Zg.z,0,-Zg.x,qg.z,0,-qg.x,mv.z,0,-mv.x,-Zg.y,Zg.x,0,-qg.y,qg.x,0,-mv.y,mv.x,0];return!(!cW(l,Sb,xb,wb,rI)||(l=[1,0,0,0,1,0,0,0,1],!cW(l,Sb,xb,wb,rI)))&&(sI.crossVectors(Zg,qg),l=[sI.x,sI.y,sI.z],cW(l,Sb,xb,wb,rI))}clampPoint(a,l){return l.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return gv.copy(a).clamp(this.min,this.max).sub(a).length()}getBoundingSphere(a){return this.getCenter(a.center),a.radius=.5*this.getSize(gv).length(),a}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}applyMatrix4(a){return this.isEmpty()||(gp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a),gp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a),gp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a),gp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a),gp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a),gp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a),gp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a),gp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a),this.setFromPoints(gp)),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const gp=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],gv=new ae,lW=new Cb,Sb=new ae,xb=new ae,wb=new ae,Zg=new ae,qg=new ae,mv=new ae,JO=new ae,rI=new ae,sI=new ae,vv=new ae;function cW(c,a,l,h,d){for(let f=0,p=c.length-3;f<=p;f+=3){vv.fromArray(c,f);const g=d.x*Math.abs(vv.x)+d.y*Math.abs(vv.y)+d.z*Math.abs(vv.z),m=a.dot(vv),v=l.dot(vv),y=h.dot(vv);if(Math.max(-Math.max(m,v,y),Math.min(m,v,y))>g)return!1}return!0}const B0t=new Cb,Y_e=new ae,oI=new ae,uW=new ae;class Ob{constructor(a=new ae,l=-1){this.center=a,this.radius=l}set(a,l){return this.center.copy(a),this.radius=l,this}setFromPoints(a,l){const h=this.center;void 0!==l?h.copy(l):B0t.setFromPoints(a).getCenter(h);let d=0;for(let f=0,p=a.length;f<p;f++)d=Math.max(d,h.distanceToSquared(a[f]));return this.radius=Math.sqrt(d),this}copy(a){return this.center.copy(a.center),this.radius=a.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const l=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=l*l}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,l){const h=this.center.distanceToSquared(a);return l.copy(a),h>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l}getBoundingBox(a){return this.isEmpty()?(a.makeEmpty(),a):(a.set(this.center,this.center),a.expandByScalar(this.radius),a)}applyMatrix4(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this}translate(a){return this.center.add(a),this}expandByPoint(a){uW.subVectors(a,this.center);const l=uW.lengthSq();if(l>this.radius*this.radius){const h=Math.sqrt(l),d=.5*(h-this.radius);this.center.add(uW.multiplyScalar(d/h)),this.radius+=d}return this}union(a){return!0===this.center.equals(a.center)?oI.set(0,0,1).multiplyScalar(a.radius):oI.subVectors(a.center,this.center).normalize().multiplyScalar(a.radius),this.expandByPoint(Y_e.copy(a.center).add(oI)),this.expandByPoint(Y_e.copy(a.center).sub(oI)),this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const mp=new ae,hW=new ae,aI=new ae,Xg=new ae,dW=new ae,lI=new ae,fW=new ae;class cI{constructor(a=new ae,l=new ae(0,0,-1)){this.origin=a,this.direction=l}set(a,l){return this.origin.copy(a),this.direction.copy(l),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,l){return l.copy(this.direction).multiplyScalar(a).add(this.origin)}lookAt(a){return this.direction.copy(a).sub(this.origin).normalize(),this}recast(a){return this.origin.copy(this.at(a,mp)),this}closestPointToPoint(a,l){l.subVectors(a,this.origin);const h=l.dot(this.direction);return h<0?l.copy(this.origin):l.copy(this.direction).multiplyScalar(h).add(this.origin)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const l=mp.subVectors(a,this.origin).dot(this.direction);return l<0?this.origin.distanceToSquared(a):(mp.copy(this.direction).multiplyScalar(l).add(this.origin),mp.distanceToSquared(a))}distanceSqToSegment(a,l,h,d){hW.copy(a).add(l).multiplyScalar(.5),aI.copy(l).sub(a).normalize(),Xg.copy(this.origin).sub(hW);const f=.5*a.distanceTo(l),p=-this.direction.dot(aI),g=Xg.dot(this.direction),m=-Xg.dot(aI),v=Xg.lengthSq(),y=Math.abs(1-p*p);let _,b,C,x;if(y>0)if(_=p*m-g,b=p*g-m,x=f*y,_>=0)if(b>=-x)if(b<=x){const w=1/y;_*=w,b*=w,C=_*(_+p*b+2*g)+b*(p*_+b+2*m)+v}else b=f,_=Math.max(0,-(p*b+g)),C=-_*_+b*(b+2*m)+v;else b=-f,_=Math.max(0,-(p*b+g)),C=-_*_+b*(b+2*m)+v;else b<=-x?(_=Math.max(0,-(-p*f+g)),b=_>0?-f:Math.min(Math.max(-f,-m),f),C=-_*_+b*(b+2*m)+v):b<=x?(_=0,b=Math.min(Math.max(-f,-m),f),C=b*(b+2*m)+v):(_=Math.max(0,-(p*f+g)),b=_>0?f:Math.min(Math.max(-f,-m),f),C=-_*_+b*(b+2*m)+v);else b=p>0?-f:f,_=Math.max(0,-(p*b+g)),C=-_*_+b*(b+2*m)+v;return h&&h.copy(this.direction).multiplyScalar(_).add(this.origin),d&&d.copy(aI).multiplyScalar(b).add(hW),C}intersectSphere(a,l){mp.subVectors(a.center,this.origin);const h=mp.dot(this.direction),d=mp.dot(mp)-h*h,f=a.radius*a.radius;if(d>f)return null;const p=Math.sqrt(f-d),g=h-p,m=h+p;return g<0&&m<0?null:this.at(g<0?m:g,l)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const l=a.normal.dot(this.direction);if(0===l)return 0===a.distanceToPoint(this.origin)?0:null;const h=-(this.origin.dot(a.normal)+a.constant)/l;return h>=0?h:null}intersectPlane(a,l){const h=this.distanceToPlane(a);return null===h?null:this.at(h,l)}intersectsPlane(a){const l=a.distanceToPoint(this.origin);return 0===l||a.normal.dot(this.direction)*l<0}intersectBox(a,l){let h,d,f,p,g,m;const v=1/this.direction.x,y=1/this.direction.y,_=1/this.direction.z,b=this.origin;return v>=0?(h=(a.min.x-b.x)*v,d=(a.max.x-b.x)*v):(h=(a.max.x-b.x)*v,d=(a.min.x-b.x)*v),y>=0?(f=(a.min.y-b.y)*y,p=(a.max.y-b.y)*y):(f=(a.max.y-b.y)*y,p=(a.min.y-b.y)*y),h>p||f>d||((f>h||h!=h)&&(h=f),(p<d||d!=d)&&(d=p),_>=0?(g=(a.min.z-b.z)*_,m=(a.max.z-b.z)*_):(g=(a.max.z-b.z)*_,m=(a.min.z-b.z)*_),h>m||g>d)||((g>h||h!=h)&&(h=g),(m<d||d!=d)&&(d=m),d<0)?null:this.at(h>=0?h:d,l)}intersectsBox(a){return null!==this.intersectBox(a,mp)}intersectTriangle(a,l,h,d,f){dW.subVectors(l,a),lI.subVectors(h,a),fW.crossVectors(dW,lI);let g,p=this.direction.dot(fW);if(p>0){if(d)return null;g=1}else{if(!(p<0))return null;g=-1,p=-p}Xg.subVectors(this.origin,a);const m=g*this.direction.dot(lI.crossVectors(Xg,lI));if(m<0)return null;const v=g*this.direction.dot(dW.cross(Xg));if(v<0||m+v>p)return null;const y=-g*Xg.dot(fW);return y<0?null:this.at(y/p,f)}applyMatrix4(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Oi{constructor(){Oi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(a,l,h,d,f,p,g,m,v,y,_,b,C,x,w,O){const D=this.elements;return D[0]=a,D[4]=l,D[8]=h,D[12]=d,D[1]=f,D[5]=p,D[9]=g,D[13]=m,D[2]=v,D[6]=y,D[10]=_,D[14]=b,D[3]=C,D[7]=x,D[11]=w,D[15]=O,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Oi).fromArray(this.elements)}copy(a){const l=this.elements,h=a.elements;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],this}copyPosition(a){const l=this.elements,h=a.elements;return l[12]=h[12],l[13]=h[13],l[14]=h[14],this}setFromMatrix3(a){const l=a.elements;return this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1),this}extractBasis(a,l,h){return a.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),h.setFromMatrixColumn(this,2),this}makeBasis(a,l,h){return this.set(a.x,l.x,h.x,0,a.y,l.y,h.y,0,a.z,l.z,h.z,0,0,0,0,1),this}extractRotation(a){const l=this.elements,h=a.elements,d=1/Db.setFromMatrixColumn(a,0).length(),f=1/Db.setFromMatrixColumn(a,1).length(),p=1/Db.setFromMatrixColumn(a,2).length();return l[0]=h[0]*d,l[1]=h[1]*d,l[2]=h[2]*d,l[3]=0,l[4]=h[4]*f,l[5]=h[5]*f,l[6]=h[6]*f,l[7]=0,l[8]=h[8]*p,l[9]=h[9]*p,l[10]=h[10]*p,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const l=this.elements,h=a.x,d=a.y,f=a.z,p=Math.cos(h),g=Math.sin(h),m=Math.cos(d),v=Math.sin(d),y=Math.cos(f),_=Math.sin(f);if("XYZ"===a.order){const b=p*y,C=p*_,x=g*y,w=g*_;l[0]=m*y,l[4]=-m*_,l[8]=v,l[1]=C+x*v,l[5]=b-w*v,l[9]=-g*m,l[2]=w-b*v,l[6]=x+C*v,l[10]=p*m}else if("YXZ"===a.order){const b=m*y,C=m*_,x=v*y,w=v*_;l[0]=b+w*g,l[4]=x*g-C,l[8]=p*v,l[1]=p*_,l[5]=p*y,l[9]=-g,l[2]=C*g-x,l[6]=w+b*g,l[10]=p*m}else if("ZXY"===a.order){const b=m*y,C=m*_,x=v*y,w=v*_;l[0]=b-w*g,l[4]=-p*_,l[8]=x+C*g,l[1]=C+x*g,l[5]=p*y,l[9]=w-b*g,l[2]=-p*v,l[6]=g,l[10]=p*m}else if("ZYX"===a.order){const b=p*y,C=p*_,x=g*y,w=g*_;l[0]=m*y,l[4]=x*v-C,l[8]=b*v+w,l[1]=m*_,l[5]=w*v+b,l[9]=C*v-x,l[2]=-v,l[6]=g*m,l[10]=p*m}else if("YZX"===a.order){const b=p*m,C=p*v,x=g*m,w=g*v;l[0]=m*y,l[4]=w-b*_,l[8]=x*_+C,l[1]=_,l[5]=p*y,l[9]=-g*y,l[2]=-v*y,l[6]=C*_+x,l[10]=b-w*_}else if("XZY"===a.order){const b=p*m,C=p*v,x=g*m,w=g*v;l[0]=m*y,l[4]=-_,l[8]=v*y,l[1]=b*_+w,l[5]=p*y,l[9]=C*_-x,l[2]=x*_-C,l[6]=g*y,l[10]=w*_+b}return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromQuaternion(a){return this.compose(V0t,a,U0t)}lookAt(a,l,h){const d=this.elements;return Zc.subVectors(a,l),0===Zc.lengthSq()&&(Zc.z=1),Zc.normalize(),Yg.crossVectors(h,Zc),0===Yg.lengthSq()&&(1===Math.abs(h.z)?Zc.x+=1e-4:Zc.z+=1e-4,Zc.normalize(),Yg.crossVectors(h,Zc)),Yg.normalize(),uI.crossVectors(Zc,Yg),d[0]=Yg.x,d[4]=uI.x,d[8]=Zc.x,d[1]=Yg.y,d[5]=uI.y,d[9]=Zc.y,d[2]=Yg.z,d[6]=uI.z,d[10]=Zc.z,this}multiply(a,l){return void 0!==l?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,l)):this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,l){const h=a.elements,d=l.elements,f=this.elements,p=h[0],g=h[4],m=h[8],v=h[12],y=h[1],_=h[5],b=h[9],C=h[13],x=h[2],w=h[6],O=h[10],D=h[14],T=h[3],M=h[7],k=h[11],E=h[15],P=d[0],V=d[4],I=d[8],U=d[12],$=d[1],H=d[5],J=d[9],ee=d[13],B=d[2],G=d[6],W=d[10],j=d[14],Q=d[3],X=d[7],Y=d[11],ne=d[15];return f[0]=p*P+g*$+m*B+v*Q,f[4]=p*V+g*H+m*G+v*X,f[8]=p*I+g*J+m*W+v*Y,f[12]=p*U+g*ee+m*j+v*ne,f[1]=y*P+_*$+b*B+C*Q,f[5]=y*V+_*H+b*G+C*X,f[9]=y*I+_*J+b*W+C*Y,f[13]=y*U+_*ee+b*j+C*ne,f[2]=x*P+w*$+O*B+D*Q,f[6]=x*V+w*H+O*G+D*X,f[10]=x*I+w*J+O*W+D*Y,f[14]=x*U+w*ee+O*j+D*ne,f[3]=T*P+M*$+k*B+E*Q,f[7]=T*V+M*H+k*G+E*X,f[11]=T*I+M*J+k*W+E*Y,f[15]=T*U+M*ee+k*j+E*ne,this}multiplyScalar(a){const l=this.elements;return l[0]*=a,l[4]*=a,l[8]*=a,l[12]*=a,l[1]*=a,l[5]*=a,l[9]*=a,l[13]*=a,l[2]*=a,l[6]*=a,l[10]*=a,l[14]*=a,l[3]*=a,l[7]*=a,l[11]*=a,l[15]*=a,this}determinant(){const a=this.elements,l=a[0],h=a[4],d=a[8],f=a[12],p=a[1],g=a[5],m=a[9],v=a[13],y=a[2],_=a[6],b=a[10],C=a[14];return a[3]*(+f*m*_-d*v*_-f*g*b+h*v*b+d*g*C-h*m*C)+a[7]*(+l*m*C-l*v*b+f*p*b-d*p*C+d*v*y-f*m*y)+a[11]*(+l*v*_-l*g*C-f*p*_+h*p*C+f*g*y-h*v*y)+a[15]*(-d*g*y-l*m*_+l*g*b+d*p*_-h*p*b+h*m*y)}transpose(){const a=this.elements;let l;return l=a[1],a[1]=a[4],a[4]=l,l=a[2],a[2]=a[8],a[8]=l,l=a[6],a[6]=a[9],a[9]=l,l=a[3],a[3]=a[12],a[12]=l,l=a[7],a[7]=a[13],a[13]=l,l=a[11],a[11]=a[14],a[14]=l,this}setPosition(a,l,h){const d=this.elements;return a.isVector3?(d[12]=a.x,d[13]=a.y,d[14]=a.z):(d[12]=a,d[13]=l,d[14]=h),this}invert(){const a=this.elements,l=a[0],h=a[1],d=a[2],f=a[3],p=a[4],g=a[5],m=a[6],v=a[7],y=a[8],_=a[9],b=a[10],C=a[11],x=a[12],w=a[13],O=a[14],D=a[15],T=_*O*v-w*b*v+w*m*C-g*O*C-_*m*D+g*b*D,M=x*b*v-y*O*v-x*m*C+p*O*C+y*m*D-p*b*D,k=y*w*v-x*_*v+x*g*C-p*w*C-y*g*D+p*_*D,E=x*_*m-y*w*m-x*g*b+p*w*b+y*g*O-p*_*O,P=l*T+h*M+d*k+f*E;if(0===P)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/P;return a[0]=T*V,a[1]=(w*b*f-_*O*f-w*d*C+h*O*C+_*d*D-h*b*D)*V,a[2]=(g*O*f-w*m*f+w*d*v-h*O*v-g*d*D+h*m*D)*V,a[3]=(_*m*f-g*b*f-_*d*v+h*b*v+g*d*C-h*m*C)*V,a[4]=M*V,a[5]=(y*O*f-x*b*f+x*d*C-l*O*C-y*d*D+l*b*D)*V,a[6]=(x*m*f-p*O*f-x*d*v+l*O*v+p*d*D-l*m*D)*V,a[7]=(p*b*f-y*m*f+y*d*v-l*b*v-p*d*C+l*m*C)*V,a[8]=k*V,a[9]=(x*_*f-y*w*f-x*h*C+l*w*C+y*h*D-l*_*D)*V,a[10]=(p*w*f-x*g*f+x*h*v-l*w*v-p*h*D+l*g*D)*V,a[11]=(y*g*f-p*_*f-y*h*v+l*_*v+p*h*C-l*g*C)*V,a[12]=E*V,a[13]=(y*w*d-x*_*d+x*h*b-l*w*b-y*h*O+l*_*O)*V,a[14]=(x*g*d-p*w*d-x*h*m+l*w*m+p*h*O-l*g*O)*V,a[15]=(p*_*d-y*g*d+y*h*m-l*_*m-p*h*b+l*g*b)*V,this}scale(a){const l=this.elements,h=a.x,d=a.y,f=a.z;return l[0]*=h,l[4]*=d,l[8]*=f,l[1]*=h,l[5]*=d,l[9]*=f,l[2]*=h,l[6]*=d,l[10]*=f,l[3]*=h,l[7]*=d,l[11]*=f,this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,l,h){return this.set(1,0,0,a,0,1,0,l,0,0,1,h,0,0,0,1),this}makeRotationX(a){const l=Math.cos(a),h=Math.sin(a);return this.set(1,0,0,0,0,l,-h,0,0,h,l,0,0,0,0,1),this}makeRotationY(a){const l=Math.cos(a),h=Math.sin(a);return this.set(l,0,h,0,0,1,0,0,-h,0,l,0,0,0,0,1),this}makeRotationZ(a){const l=Math.cos(a),h=Math.sin(a);return this.set(l,-h,0,0,h,l,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,l){const h=Math.cos(l),d=Math.sin(l),f=1-h,p=a.x,g=a.y,m=a.z,v=f*p,y=f*g;return this.set(v*p+h,v*g-d*m,v*m+d*g,0,v*g+d*m,y*g+h,y*m-d*p,0,v*m-d*g,y*m+d*p,f*m*m+h,0,0,0,0,1),this}makeScale(a,l,h){return this.set(a,0,0,0,0,l,0,0,0,0,h,0,0,0,0,1),this}makeShear(a,l,h,d,f,p){return this.set(1,h,f,0,a,1,p,0,l,d,1,0,0,0,0,1),this}compose(a,l,h){const d=this.elements,f=l._x,p=l._y,g=l._z,m=l._w,v=f+f,y=p+p,_=g+g,b=f*v,C=f*y,x=f*_,w=p*y,O=p*_,D=g*_,T=m*v,M=m*y,k=m*_,E=h.x,P=h.y,V=h.z;return d[0]=(1-(w+D))*E,d[1]=(C+k)*E,d[2]=(x-M)*E,d[3]=0,d[4]=(C-k)*P,d[5]=(1-(b+D))*P,d[6]=(O+T)*P,d[7]=0,d[8]=(x+M)*V,d[9]=(O-T)*V,d[10]=(1-(b+w))*V,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,this}decompose(a,l,h){const d=this.elements;let f=Db.set(d[0],d[1],d[2]).length();const p=Db.set(d[4],d[5],d[6]).length(),g=Db.set(d[8],d[9],d[10]).length();this.determinant()<0&&(f=-f),a.x=d[12],a.y=d[13],a.z=d[14],Nh.copy(this);const v=1/f,y=1/p,_=1/g;return Nh.elements[0]*=v,Nh.elements[1]*=v,Nh.elements[2]*=v,Nh.elements[4]*=y,Nh.elements[5]*=y,Nh.elements[6]*=y,Nh.elements[8]*=_,Nh.elements[9]*=_,Nh.elements[10]*=_,l.setFromRotationMatrix(Nh),h.x=f,h.y=p,h.z=g,this}makePerspective(a,l,h,d,f,p){void 0===p&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const g=this.elements,v=2*f/(h-d),y=(l+a)/(l-a),_=(h+d)/(h-d),b=-(p+f)/(p-f),C=-2*p*f/(p-f);return g[0]=2*f/(l-a),g[4]=0,g[8]=y,g[12]=0,g[1]=0,g[5]=v,g[9]=_,g[13]=0,g[2]=0,g[6]=0,g[10]=b,g[14]=C,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(a,l,h,d,f,p){const g=this.elements,m=1/(l-a),v=1/(h-d),y=1/(p-f),_=(l+a)*m,b=(h+d)*v,C=(p+f)*y;return g[0]=2*m,g[4]=0,g[8]=0,g[12]=-_,g[1]=0,g[5]=2*v,g[9]=0,g[13]=-b,g[2]=0,g[6]=0,g[10]=-2*y,g[14]=-C,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(a){const l=this.elements,h=a.elements;for(let d=0;d<16;d++)if(l[d]!==h[d])return!1;return!0}fromArray(a,l=0){for(let h=0;h<16;h++)this.elements[h]=a[h+l];return this}toArray(a=[],l=0){const h=this.elements;return a[l]=h[0],a[l+1]=h[1],a[l+2]=h[2],a[l+3]=h[3],a[l+4]=h[4],a[l+5]=h[5],a[l+6]=h[6],a[l+7]=h[7],a[l+8]=h[8],a[l+9]=h[9],a[l+10]=h[10],a[l+11]=h[11],a[l+12]=h[12],a[l+13]=h[13],a[l+14]=h[14],a[l+15]=h[15],a}}const Db=new ae,Nh=new Oi,V0t=new ae(0,0,0),U0t=new ae(1,1,1),Yg=new ae,uI=new ae,Zc=new ae,K_e=new Oi,J_e=new jc;let z0t=(()=>{class c{constructor(l=0,h=0,d=0,f=c.DefaultOrder){this.isEuler=!0,this._x=l,this._y=h,this._z=d,this._order=f}get x(){return this._x}set x(l){this._x=l,this._onChangeCallback()}get y(){return this._y}set y(l){this._y=l,this._onChangeCallback()}get z(){return this._z}set z(l){this._z=l,this._onChangeCallback()}get order(){return this._order}set order(l){this._order=l,this._onChangeCallback()}set(l,h,d,f=this._order){return this._x=l,this._y=h,this._z=d,this._order=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(l){return this._x=l._x,this._y=l._y,this._z=l._z,this._order=l._order,this._onChangeCallback(),this}setFromRotationMatrix(l,h=this._order,d=!0){const f=l.elements,p=f[0],g=f[4],m=f[8],v=f[1],y=f[5],_=f[9],b=f[2],C=f[6],x=f[10];switch(h){case"XYZ":this._y=Math.asin(lo(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-_,x),this._z=Math.atan2(-g,p)):(this._x=Math.atan2(C,y),this._z=0);break;case"YXZ":this._x=Math.asin(-lo(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(m,x),this._z=Math.atan2(v,y)):(this._y=Math.atan2(-b,p),this._z=0);break;case"ZXY":this._x=Math.asin(lo(C,-1,1)),Math.abs(C)<.9999999?(this._y=Math.atan2(-b,x),this._z=Math.atan2(-g,y)):(this._y=0,this._z=Math.atan2(v,p));break;case"ZYX":this._y=Math.asin(-lo(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(C,x),this._z=Math.atan2(v,p)):(this._x=0,this._z=Math.atan2(-g,y));break;case"YZX":this._z=Math.asin(lo(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(-_,y),this._y=Math.atan2(-b,p)):(this._x=0,this._y=Math.atan2(m,x));break;case"XZY":this._z=Math.asin(-lo(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(C,y),this._y=Math.atan2(m,p)):(this._x=Math.atan2(-_,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+h)}return this._order=h,!0===d&&this._onChangeCallback(),this}setFromQuaternion(l,h,d){return K_e.makeRotationFromQuaternion(l),this.setFromRotationMatrix(K_e,h,d)}setFromVector3(l,h=this._order){return this.set(l.x,l.y,l.z,h)}reorder(l){return J_e.setFromEuler(this),this.setFromQuaternion(J_e,l)}equals(l){return l._x===this._x&&l._y===this._y&&l._z===this._z&&l._order===this._order}fromArray(l){return this._x=l[0],this._y=l[1],this._z=l[2],void 0!==l[3]&&(this._order=l[3]),this._onChangeCallback(),this}toArray(l=[],h=0){return l[h]=this._x,l[h+1]=this._y,l[h+2]=this._z,l[h+3]=this._order,l}_onChange(l){return this._onChangeCallback=l,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return c.DefaultOrder="XYZ",c.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],c})();class pW{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask|=1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!=(this.mask&a.mask)}isEnabled(a){return 0!=(this.mask&(1<<a|0))}}let H0t=0;const e1e=new ae,Tb=new jc,vp=new Oi,hI=new ae,e2=new ae,$0t=new ae,W0t=new jc,t1e=new ae(1,0,0),n1e=new ae(0,1,0),i1e=new ae(0,0,1),G0t={type:"added"},r1e={type:"removed"};let qc=(()=>{class c extends vb{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:H0t++}),this.uuid=Qc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=c.DefaultUp.clone();const l=new ae,h=new z0t,d=new jc,f=new ae(1,1,1);h._onChange(function p(){d.setFromEuler(h,!1)}),d._onChange(function g(){h.setFromQuaternion(d,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:l},rotation:{configurable:!0,enumerable:!0,value:h},quaternion:{configurable:!0,enumerable:!0,value:d},scale:{configurable:!0,enumerable:!0,value:f},modelViewMatrix:{value:new Oi},normalMatrix:{value:new cc}}),this.matrix=new Oi,this.matrixWorld=new Oi,this.matrixAutoUpdate=c.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new pW,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(l){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(l),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(l){return this.quaternion.premultiply(l),this}setRotationFromAxisAngle(l,h){this.quaternion.setFromAxisAngle(l,h)}setRotationFromEuler(l){this.quaternion.setFromEuler(l,!0)}setRotationFromMatrix(l){this.quaternion.setFromRotationMatrix(l)}setRotationFromQuaternion(l){this.quaternion.copy(l)}rotateOnAxis(l,h){return Tb.setFromAxisAngle(l,h),this.quaternion.multiply(Tb),this}rotateOnWorldAxis(l,h){return Tb.setFromAxisAngle(l,h),this.quaternion.premultiply(Tb),this}rotateX(l){return this.rotateOnAxis(t1e,l)}rotateY(l){return this.rotateOnAxis(n1e,l)}rotateZ(l){return this.rotateOnAxis(i1e,l)}translateOnAxis(l,h){return e1e.copy(l).applyQuaternion(this.quaternion),this.position.add(e1e.multiplyScalar(h)),this}translateX(l){return this.translateOnAxis(t1e,l)}translateY(l){return this.translateOnAxis(n1e,l)}translateZ(l){return this.translateOnAxis(i1e,l)}localToWorld(l){return l.applyMatrix4(this.matrixWorld)}worldToLocal(l){return l.applyMatrix4(vp.copy(this.matrixWorld).invert())}lookAt(l,h,d){l.isVector3?hI.copy(l):hI.set(l,h,d);const f=this.parent;this.updateWorldMatrix(!0,!1),e2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vp.lookAt(e2,hI,this.up):vp.lookAt(hI,e2,this.up),this.quaternion.setFromRotationMatrix(vp),f&&(vp.extractRotation(f.matrixWorld),Tb.setFromRotationMatrix(vp),this.quaternion.premultiply(Tb.invert()))}add(l){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.add(arguments[h]);return this}return l===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",l),this):(l&&l.isObject3D?(null!==l.parent&&l.parent.remove(l),l.parent=this,this.children.push(l),l.dispatchEvent(G0t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",l),this)}remove(l){if(arguments.length>1){for(let d=0;d<arguments.length;d++)this.remove(arguments[d]);return this}const h=this.children.indexOf(l);return-1!==h&&(l.parent=null,this.children.splice(h,1),l.dispatchEvent(r1e)),this}removeFromParent(){const l=this.parent;return null!==l&&l.remove(this),this}clear(){for(let l=0;l<this.children.length;l++){const h=this.children[l];h.parent=null,h.dispatchEvent(r1e)}return this.children.length=0,this}attach(l){return this.updateWorldMatrix(!0,!1),vp.copy(this.matrixWorld).invert(),null!==l.parent&&(l.parent.updateWorldMatrix(!0,!1),vp.multiply(l.parent.matrixWorld)),l.applyMatrix4(vp),this.add(l),l.updateWorldMatrix(!1,!0),this}getObjectById(l){return this.getObjectByProperty("id",l)}getObjectByName(l){return this.getObjectByProperty("name",l)}getObjectByProperty(l,h){if(this[l]===h)return this;for(let d=0,f=this.children.length;d<f;d++){const g=this.children[d].getObjectByProperty(l,h);if(void 0!==g)return g}}getWorldPosition(l){return this.updateWorldMatrix(!0,!1),l.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(l){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e2,l,$0t),l}getWorldScale(l){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e2,W0t,l),l}getWorldDirection(l){this.updateWorldMatrix(!0,!1);const h=this.matrixWorld.elements;return l.set(h[8],h[9],h[10]).normalize()}raycast(){}traverse(l){l(this);const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].traverse(l)}traverseVisible(l){if(!1===this.visible)return;l(this);const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].traverseVisible(l)}traverseAncestors(l){const h=this.parent;null!==h&&(l(h),h.traverseAncestors(l))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(l){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||l)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,l=!0);const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].updateMatrixWorld(l)}updateWorldMatrix(l,h){const d=this.parent;if(!0===l&&null!==d&&d.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===h){const f=this.children;for(let p=0,g=f.length;p<g;p++)f[p].updateWorldMatrix(!1,!0)}}toJSON(l){const h=void 0===l||"string"==typeof l,d={};h&&(l={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},d.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const f={};function p(m,v){return void 0===m[v.uuid]&&(m[v.uuid]=v.toJSON(l)),v.uuid}if(f.uuid=this.uuid,f.type=this.type,""!==this.name&&(f.name=this.name),!0===this.castShadow&&(f.castShadow=!0),!0===this.receiveShadow&&(f.receiveShadow=!0),!1===this.visible&&(f.visible=!1),!1===this.frustumCulled&&(f.frustumCulled=!1),0!==this.renderOrder&&(f.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(f.matrixAutoUpdate=!1),this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(f.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?f.background=this.background.toJSON():this.background.isTexture&&(f.background=this.background.toJSON(l).uuid)),this.environment&&this.environment.isTexture&&(f.environment=this.environment.toJSON(l).uuid);else if(this.isMesh||this.isLine||this.isPoints){f.geometry=p(l.geometries,this.geometry);const m=this.geometry.parameters;if(void 0!==m&&void 0!==m.shapes){const v=m.shapes;if(Array.isArray(v))for(let y=0,_=v.length;y<_;y++)p(l.shapes,v[y]);else p(l.shapes,v)}}if(this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(p(l.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const m=[];for(let v=0,y=this.material.length;v<y;v++)m.push(p(l.materials,this.material[v]));f.material=m}else f.material=p(l.materials,this.material);if(this.children.length>0){f.children=[];for(let m=0;m<this.children.length;m++)f.children.push(this.children[m].toJSON(l).object)}if(this.animations.length>0){f.animations=[];for(let m=0;m<this.animations.length;m++)f.animations.push(p(l.animations,this.animations[m]))}if(h){const m=g(l.geometries),v=g(l.materials),y=g(l.textures),_=g(l.images),b=g(l.shapes),C=g(l.skeletons),x=g(l.animations),w=g(l.nodes);m.length>0&&(d.geometries=m),v.length>0&&(d.materials=v),y.length>0&&(d.textures=y),_.length>0&&(d.images=_),b.length>0&&(d.shapes=b),C.length>0&&(d.skeletons=C),x.length>0&&(d.animations=x),w.length>0&&(d.nodes=w)}return d.object=f,d;function g(m){const v=[];for(const y in m){const _=m[y];delete _.metadata,v.push(_)}return v}}clone(l){return(new this.constructor).copy(this,l)}copy(l,h=!0){if(this.name=l.name,this.up.copy(l.up),this.position.copy(l.position),this.rotation.order=l.rotation.order,this.quaternion.copy(l.quaternion),this.scale.copy(l.scale),this.matrix.copy(l.matrix),this.matrixWorld.copy(l.matrixWorld),this.matrixAutoUpdate=l.matrixAutoUpdate,this.matrixWorldNeedsUpdate=l.matrixWorldNeedsUpdate,this.layers.mask=l.layers.mask,this.visible=l.visible,this.castShadow=l.castShadow,this.receiveShadow=l.receiveShadow,this.frustumCulled=l.frustumCulled,this.renderOrder=l.renderOrder,this.userData=JSON.parse(JSON.stringify(l.userData)),!0===h)for(let d=0;d<l.children.length;d++)this.add(l.children[d].clone());return this}}return c.DefaultUp=new ae(0,1,0),c.DefaultMatrixAutoUpdate=!0,c})();const Bh=new ae,yp=new ae,gW=new ae,_p=new ae,kb=new ae,Mb=new ae,s1e=new ae,mW=new ae,vW=new ae,yW=new ae;class Vh{constructor(a=new ae,l=new ae,h=new ae){this.a=a,this.b=l,this.c=h}static getNormal(a,l,h,d){d.subVectors(h,l),Bh.subVectors(a,l),d.cross(Bh);const f=d.lengthSq();return f>0?d.multiplyScalar(1/Math.sqrt(f)):d.set(0,0,0)}static getBarycoord(a,l,h,d,f){Bh.subVectors(d,l),yp.subVectors(h,l),gW.subVectors(a,l);const p=Bh.dot(Bh),g=Bh.dot(yp),m=Bh.dot(gW),v=yp.dot(yp),y=yp.dot(gW),_=p*v-g*g;if(0===_)return f.set(-2,-1,-1);const b=1/_,C=(v*m-g*y)*b,x=(p*y-g*m)*b;return f.set(1-C-x,x,C)}static containsPoint(a,l,h,d){return this.getBarycoord(a,l,h,d,_p),_p.x>=0&&_p.y>=0&&_p.x+_p.y<=1}static getUV(a,l,h,d,f,p,g,m){return this.getBarycoord(a,l,h,d,_p),m.set(0,0),m.addScaledVector(f,_p.x),m.addScaledVector(p,_p.y),m.addScaledVector(g,_p.z),m}static isFrontFacing(a,l,h,d){return Bh.subVectors(h,l),yp.subVectors(a,l),Bh.cross(yp).dot(d)<0}set(a,l,h){return this.a.copy(a),this.b.copy(l),this.c.copy(h),this}setFromPointsAndIndices(a,l,h,d){return this.a.copy(a[l]),this.b.copy(a[h]),this.c.copy(a[d]),this}setFromAttributeAndIndices(a,l,h,d){return this.a.fromBufferAttribute(a,l),this.b.fromBufferAttribute(a,h),this.c.fromBufferAttribute(a,d),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return Bh.subVectors(this.c,this.b),yp.subVectors(this.a,this.b),.5*Bh.cross(yp).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Vh.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,l){return Vh.getBarycoord(a,this.a,this.b,this.c,l)}getUV(a,l,h,d,f){return Vh.getUV(a,this.a,this.b,this.c,l,h,d,f)}containsPoint(a){return Vh.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Vh.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,l){const h=this.a,d=this.b,f=this.c;let p,g;kb.subVectors(d,h),Mb.subVectors(f,h),mW.subVectors(a,h);const m=kb.dot(mW),v=Mb.dot(mW);if(m<=0&&v<=0)return l.copy(h);vW.subVectors(a,d);const y=kb.dot(vW),_=Mb.dot(vW);if(y>=0&&_<=y)return l.copy(d);const b=m*_-y*v;if(b<=0&&m>=0&&y<=0)return p=m/(m-y),l.copy(h).addScaledVector(kb,p);yW.subVectors(a,f);const C=kb.dot(yW),x=Mb.dot(yW);if(x>=0&&C<=x)return l.copy(f);const w=C*v-m*x;if(w<=0&&v>=0&&x<=0)return g=v/(v-x),l.copy(h).addScaledVector(Mb,g);const O=y*x-C*_;if(O<=0&&_-y>=0&&C-x>=0)return s1e.subVectors(f,d),g=(_-y)/(_-y+(C-x)),l.copy(d).addScaledVector(s1e,g);const D=1/(O+w+b);return p=w*D,g=b*D,l.copy(h).addScaledVector(kb,p).addScaledVector(Mb,g)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let Q0t=0;class yv extends vb{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Q0t++}),this.uuid=Qc(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==a)for(const l in a){const h=a[l];if(void 0===h){console.warn("THREE.Material: '"+l+"' parameter is undefined.");continue}if("shading"===l){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===h;continue}const d=this[l];void 0!==d?d&&d.isColor?d.set(h):d&&d.isVector3&&h&&h.isVector3?d.copy(h):this[l]=h:console.warn("THREE."+this.type+": '"+l+"' is not a property of this material.")}}toJSON(a){const l=void 0===a||"string"==typeof a;l&&(a={textures:{},images:{}});const h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function d(f){const p=[];for(const g in f){const m=f[g];delete m.metadata,p.push(m)}return p}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),void 0!==this.roughness&&(h.roughness=this.roughness),void 0!==this.metalness&&(h.metalness=this.metalness),void 0!==this.sheen&&(h.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(h.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(h.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(h.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(h.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(h.shininess=this.shininess),void 0!==this.clearcoat&&(h.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(h.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(h.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(h.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(h.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(h.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(h.iridescenceMap=this.iridescenceMap.toJSON(a).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(h.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(a).uuid),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(a).uuid,h.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(a).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(a).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(a).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(a).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(h.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(h.specularColorMap=this.specularColorMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(h.combine=this.combine)),void 0!==this.envMapIntensity&&(h.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(h.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(h.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.transmission&&(h.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(h.transmissionMap=this.transmissionMap.toJSON(a).uuid),void 0!==this.thickness&&(h.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(h.thicknessMap=this.thicknessMap.toJSON(a).uuid),void 0!==this.attenuationDistance&&(h.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(h.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(h.size=this.size),null!==this.shadowSide&&(h.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(h.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(h.blending=this.blending),0!==this.side&&(h.side=this.side),this.vertexColors&&(h.vertexColors=!0),this.opacity<1&&(h.opacity=this.opacity),!0===this.transparent&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.colorWrite=this.colorWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(h.rotation=this.rotation),!0===this.polygonOffset&&(h.polygonOffset=!0),0!==this.polygonOffsetFactor&&(h.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(h.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(h.linewidth=this.linewidth),void 0!==this.dashSize&&(h.dashSize=this.dashSize),void 0!==this.gapSize&&(h.gapSize=this.gapSize),void 0!==this.scale&&(h.scale=this.scale),!0===this.dithering&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(h.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(h.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(h.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(h.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(h.flatShading=this.flatShading),!1===this.visible&&(h.visible=!1),!1===this.toneMapped&&(h.toneMapped=!1),!1===this.fog&&(h.fog=!1),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),l){const f=d(a.textures),p=d(a.images);f.length>0&&(h.textures=f),p.length>0&&(h.images=p)}return h}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;const l=a.clippingPlanes;let h=null;if(null!==l){const d=l.length;h=new Array(d);for(let f=0;f!==d;++f)h[f]=l[f].clone()}return this.clippingPlanes=h,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===a&&this.version++}}class co extends yv{constructor(a){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}const To=new ae,dI=new yt;class Hs{constructor(a,l,h){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=a,this.itemSize=l,this.count=void 0!==a?a.length/l:0,this.normalized=!0===h,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.name=a.name,this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.usage=a.usage,this}copyAt(a,l,h){a*=this.itemSize,h*=l.itemSize;for(let d=0,f=this.itemSize;d<f;d++)this.array[a+d]=l.array[h+d];return this}copyArray(a){return this.array.set(a),this}copyColorsArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let p=a[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),p=new pn),l[h++]=p.r,l[h++]=p.g,l[h++]=p.b}return this}copyVector2sArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let p=a[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),p=new yt),l[h++]=p.x,l[h++]=p.y}return this}copyVector3sArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let p=a[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),p=new ae),l[h++]=p.x,l[h++]=p.y,l[h++]=p.z}return this}copyVector4sArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let p=a[d];void 0===p&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),p=new pr),l[h++]=p.x,l[h++]=p.y,l[h++]=p.z,l[h++]=p.w}return this}applyMatrix3(a){if(2===this.itemSize)for(let l=0,h=this.count;l<h;l++)dI.fromBufferAttribute(this,l),dI.applyMatrix3(a),this.setXY(l,dI.x,dI.y);else if(3===this.itemSize)for(let l=0,h=this.count;l<h;l++)To.fromBufferAttribute(this,l),To.applyMatrix3(a),this.setXYZ(l,To.x,To.y,To.z);return this}applyMatrix4(a){for(let l=0,h=this.count;l<h;l++)To.fromBufferAttribute(this,l),To.applyMatrix4(a),this.setXYZ(l,To.x,To.y,To.z);return this}applyNormalMatrix(a){for(let l=0,h=this.count;l<h;l++)To.fromBufferAttribute(this,l),To.applyNormalMatrix(a),this.setXYZ(l,To.x,To.y,To.z);return this}transformDirection(a){for(let l=0,h=this.count;l<h;l++)To.fromBufferAttribute(this,l),To.transformDirection(a),this.setXYZ(l,To.x,To.y,To.z);return this}set(a,l=0){return this.array.set(a,l),this}getX(a){return this.array[a*this.itemSize]}setX(a,l){return this.array[a*this.itemSize]=l,this}getY(a){return this.array[a*this.itemSize+1]}setY(a,l){return this.array[a*this.itemSize+1]=l,this}getZ(a){return this.array[a*this.itemSize+2]}setZ(a,l){return this.array[a*this.itemSize+2]=l,this}getW(a){return this.array[a*this.itemSize+3]}setW(a,l){return this.array[a*this.itemSize+3]=l,this}setXY(a,l,h){return this.array[0+(a*=this.itemSize)]=l,this.array[a+1]=h,this}setXYZ(a,l,h,d){return this.array[0+(a*=this.itemSize)]=l,this.array[a+1]=h,this.array[a+2]=d,this}setXYZW(a,l,h,d,f){return this.array[0+(a*=this.itemSize)]=l,this.array[a+1]=h,this.array[a+2]=d,this.array[a+3]=f,this}onUpload(a){return this.onUploadCallback=a,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(a.name=this.name),35044!==this.usage&&(a.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(a.updateRange=this.updateRange),a}}class o1e extends Hs{constructor(a,l,h){super(new Uint16Array(a),l,h)}}class a1e extends Hs{constructor(a,l,h){super(new Uint32Array(a),l,h)}}class Pn extends Hs{constructor(a,l,h){super(new Float32Array(a),l,h)}}let j0t=0;const Bu=new Oi,_W=new qc,Eb=new ae,Xc=new Cb,t2=new Cb,ca=new ae;class $i extends vb{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:j0t++}),this.uuid=Qc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(a){return this.index=Array.isArray(a)?new(Q_e(a)?a1e:o1e)(a,1):a,this}getAttribute(a){return this.attributes[a]}setAttribute(a,l){return this.attributes[a]=l,this}deleteAttribute(a){return delete this.attributes[a],this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,l,h=0){this.groups.push({start:a,count:l,materialIndex:h})}clearGroups(){this.groups=[]}setDrawRange(a,l){this.drawRange.start=a,this.drawRange.count=l}applyMatrix4(a){const l=this.attributes.position;void 0!==l&&(l.applyMatrix4(a),l.needsUpdate=!0);const h=this.attributes.normal;if(void 0!==h){const f=(new cc).getNormalMatrix(a);h.applyNormalMatrix(f),h.needsUpdate=!0}const d=this.attributes.tangent;return void 0!==d&&(d.transformDirection(a),d.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(a){return Bu.makeRotationFromQuaternion(a),this.applyMatrix4(Bu),this}rotateX(a){return Bu.makeRotationX(a),this.applyMatrix4(Bu),this}rotateY(a){return Bu.makeRotationY(a),this.applyMatrix4(Bu),this}rotateZ(a){return Bu.makeRotationZ(a),this.applyMatrix4(Bu),this}translate(a,l,h){return Bu.makeTranslation(a,l,h),this.applyMatrix4(Bu),this}scale(a,l,h){return Bu.makeScale(a,l,h),this.applyMatrix4(Bu),this}lookAt(a){return _W.lookAt(a),_W.updateMatrix(),this.applyMatrix4(_W.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Eb).negate(),this.translate(Eb.x,Eb.y,Eb.z),this}setFromPoints(a){const l=[];for(let h=0,d=a.length;h<d;h++){const f=a[h];l.push(f.x,f.y,f.z||0)}return this.setAttribute("position",new Pn(l,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Cb);const a=this.attributes.position,l=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),l)for(let h=0,d=l.length;h<d;h++)Xc.setFromBufferAttribute(l[h]),this.morphTargetsRelative?(ca.addVectors(this.boundingBox.min,Xc.min),this.boundingBox.expandByPoint(ca),ca.addVectors(this.boundingBox.max,Xc.max),this.boundingBox.expandByPoint(ca)):(this.boundingBox.expandByPoint(Xc.min),this.boundingBox.expandByPoint(Xc.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ob);const a=this.attributes.position,l=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ae,1/0);if(a){const h=this.boundingSphere.center;if(Xc.setFromBufferAttribute(a),l)for(let f=0,p=l.length;f<p;f++)t2.setFromBufferAttribute(l[f]),this.morphTargetsRelative?(ca.addVectors(Xc.min,t2.min),Xc.expandByPoint(ca),ca.addVectors(Xc.max,t2.max),Xc.expandByPoint(ca)):(Xc.expandByPoint(t2.min),Xc.expandByPoint(t2.max));Xc.getCenter(h);let d=0;for(let f=0,p=a.count;f<p;f++)ca.fromBufferAttribute(a,f),d=Math.max(d,h.distanceToSquared(ca));if(l)for(let f=0,p=l.length;f<p;f++){const g=l[f],m=this.morphTargetsRelative;for(let v=0,y=g.count;v<y;v++)ca.fromBufferAttribute(g,v),m&&(Eb.fromBufferAttribute(a,v),ca.add(Eb)),d=Math.max(d,h.distanceToSquared(ca))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const a=this.index,l=this.attributes;if(null===a||void 0===l.position||void 0===l.normal||void 0===l.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const h=a.array,d=l.position.array,f=l.normal.array,p=l.uv.array,g=d.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Hs(new Float32Array(4*g),4));const m=this.getAttribute("tangent").array,v=[],y=[];for(let $=0;$<g;$++)v[$]=new ae,y[$]=new ae;const _=new ae,b=new ae,C=new ae,x=new yt,w=new yt,O=new yt,D=new ae,T=new ae;function M($,H,J){_.fromArray(d,3*$),b.fromArray(d,3*H),C.fromArray(d,3*J),x.fromArray(p,2*$),w.fromArray(p,2*H),O.fromArray(p,2*J),b.sub(_),C.sub(_),w.sub(x),O.sub(x);const ee=1/(w.x*O.y-O.x*w.y);isFinite(ee)&&(D.copy(b).multiplyScalar(O.y).addScaledVector(C,-w.y).multiplyScalar(ee),T.copy(C).multiplyScalar(w.x).addScaledVector(b,-O.x).multiplyScalar(ee),v[$].add(D),v[H].add(D),v[J].add(D),y[$].add(T),y[H].add(T),y[J].add(T))}let k=this.groups;0===k.length&&(k=[{start:0,count:h.length}]);for(let $=0,H=k.length;$<H;++$){const J=k[$],ee=J.start;for(let G=ee,W=ee+J.count;G<W;G+=3)M(h[G+0],h[G+1],h[G+2])}const E=new ae,P=new ae,V=new ae,I=new ae;function U($){V.fromArray(f,3*$),I.copy(V);const H=v[$];E.copy(H),E.sub(V.multiplyScalar(V.dot(H))).normalize(),P.crossVectors(I,H);const ee=P.dot(y[$])<0?-1:1;m[4*$]=E.x,m[4*$+1]=E.y,m[4*$+2]=E.z,m[4*$+3]=ee}for(let $=0,H=k.length;$<H;++$){const J=k[$],ee=J.start;for(let G=ee,W=ee+J.count;G<W;G+=3)U(h[G+0]),U(h[G+1]),U(h[G+2])}}computeVertexNormals(){const a=this.index,l=this.getAttribute("position");if(void 0!==l){let h=this.getAttribute("normal");if(void 0===h)h=new Hs(new Float32Array(3*l.count),3),this.setAttribute("normal",h);else for(let b=0,C=h.count;b<C;b++)h.setXYZ(b,0,0,0);const d=new ae,f=new ae,p=new ae,g=new ae,m=new ae,v=new ae,y=new ae,_=new ae;if(a)for(let b=0,C=a.count;b<C;b+=3){const x=a.getX(b+0),w=a.getX(b+1),O=a.getX(b+2);d.fromBufferAttribute(l,x),f.fromBufferAttribute(l,w),p.fromBufferAttribute(l,O),y.subVectors(p,f),_.subVectors(d,f),y.cross(_),g.fromBufferAttribute(h,x),m.fromBufferAttribute(h,w),v.fromBufferAttribute(h,O),g.add(y),m.add(y),v.add(y),h.setXYZ(x,g.x,g.y,g.z),h.setXYZ(w,m.x,m.y,m.z),h.setXYZ(O,v.x,v.y,v.z)}else for(let b=0,C=l.count;b<C;b+=3)d.fromBufferAttribute(l,b+0),f.fromBufferAttribute(l,b+1),p.fromBufferAttribute(l,b+2),y.subVectors(p,f),_.subVectors(d,f),y.cross(_),h.setXYZ(b+0,y.x,y.y,y.z),h.setXYZ(b+1,y.x,y.y,y.z),h.setXYZ(b+2,y.x,y.y,y.z);this.normalizeNormals(),h.needsUpdate=!0}}merge(a,l){if(!a||!a.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);void 0===l&&(l=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const h=this.attributes;for(const d in h){if(void 0===a.attributes[d])continue;const p=h[d].array,g=a.attributes[d],m=g.array,v=g.itemSize*l,y=Math.min(m.length,p.length-v);for(let _=0,b=v;_<y;_++,b++)p[b]=m[_]}return this}normalizeNormals(){const a=this.attributes.normal;for(let l=0,h=a.count;l<h;l++)ca.fromBufferAttribute(a,l),ca.normalize(),a.setXYZ(l,ca.x,ca.y,ca.z)}toNonIndexed(){function a(g,m){const v=g.array,y=g.itemSize,_=g.normalized,b=new v.constructor(m.length*y);let C=0,x=0;for(let w=0,O=m.length;w<O;w++){C=g.isInterleavedBufferAttribute?m[w]*g.data.stride+g.offset:m[w]*y;for(let D=0;D<y;D++)b[x++]=v[C++]}return new Hs(b,y,_)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const l=new $i,h=this.index.array,d=this.attributes;for(const g in d){const v=a(d[g],h);l.setAttribute(g,v)}const f=this.morphAttributes;for(const g in f){const m=[],v=f[g];for(let y=0,_=v.length;y<_;y++){const C=a(v[y],h);m.push(C)}l.morphAttributes[g]=m}l.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let g=0,m=p.length;g<m;g++){const v=p[g];l.addGroup(v.start,v.count,v.materialIndex)}return l}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),void 0!==this.parameters){const m=this.parameters;for(const v in m)void 0!==m[v]&&(a[v]=m[v]);return a}a.data={attributes:{}};const l=this.index;null!==l&&(a.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});const h=this.attributes;for(const m in h)a.data.attributes[m]=h[m].toJSON(a.data);const d={};let f=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],y=[];for(let _=0,b=v.length;_<b;_++)y.push(v[_].toJSON(a.data));y.length>0&&(d[m]=y,f=!0)}f&&(a.data.morphAttributes=d,a.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(a.data.groups=JSON.parse(JSON.stringify(p)));const g=this.boundingSphere;return null!==g&&(a.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),a}clone(){return(new this.constructor).copy(this)}copy(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const l={};this.name=a.name;const h=a.index;null!==h&&this.setIndex(h.clone(l));const d=a.attributes;for(const v in d)this.setAttribute(v,d[v].clone(l));const f=a.morphAttributes;for(const v in f){const y=[],_=f[v];for(let b=0,C=_.length;b<C;b++)y.push(_[b].clone(l));this.morphAttributes[v]=y}this.morphTargetsRelative=a.morphTargetsRelative;const p=a.groups;for(let v=0,y=p.length;v<y;v++){const _=p[v];this.addGroup(_.start,_.count,_.materialIndex)}const g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());const m=a.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,void 0!==a.parameters&&(this.parameters=Object.assign({},a.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const l1e=new Oi,Ab=new cI,bW=new Ob,Kg=new ae,Jg=new ae,em=new ae,CW=new ae,SW=new ae,xW=new ae,fI=new ae,pI=new ae,gI=new ae,mI=new yt,vI=new yt,yI=new yt,wW=new ae,_I=new ae;class fr extends qc{constructor(a=new $i,l=new co){super(),this.isMesh=!0,this.type="Mesh",this.geometry=a,this.material=l,this.updateMorphTargets()}copy(a,l){return super.copy(a,l),void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}updateMorphTargets(){const l=this.geometry.morphAttributes,h=Object.keys(l);if(h.length>0){const d=l[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,p=d.length;f<p;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}raycast(a,l){const h=this.geometry,d=this.material,f=this.matrixWorld;if(void 0===d||(null===h.boundingSphere&&h.computeBoundingSphere(),bW.copy(h.boundingSphere),bW.applyMatrix4(f),!1===a.ray.intersectsSphere(bW))||(l1e.copy(f).invert(),Ab.copy(a.ray).applyMatrix4(l1e),null!==h.boundingBox&&!1===Ab.intersectsBox(h.boundingBox)))return;let p;const g=h.index,m=h.attributes.position,v=h.morphAttributes.position,y=h.morphTargetsRelative,_=h.attributes.uv,b=h.attributes.uv2,C=h.groups,x=h.drawRange;if(null!==g)if(Array.isArray(d))for(let w=0,O=C.length;w<O;w++){const D=C[w],T=d[D.materialIndex];for(let E=Math.max(D.start,x.start),P=Math.min(g.count,Math.min(D.start+D.count,x.start+x.count));E<P;E+=3){const V=g.getX(E),I=g.getX(E+1),U=g.getX(E+2);p=bI(this,T,a,Ab,m,v,y,_,b,V,I,U),p&&(p.faceIndex=Math.floor(E/3),p.face.materialIndex=D.materialIndex,l.push(p))}}else for(let D=Math.max(0,x.start),T=Math.min(g.count,x.start+x.count);D<T;D+=3){const M=g.getX(D),k=g.getX(D+1),E=g.getX(D+2);p=bI(this,d,a,Ab,m,v,y,_,b,M,k,E),p&&(p.faceIndex=Math.floor(D/3),l.push(p))}else if(void 0!==m)if(Array.isArray(d))for(let w=0,O=C.length;w<O;w++){const D=C[w],T=d[D.materialIndex];for(let E=Math.max(D.start,x.start),P=Math.min(m.count,Math.min(D.start+D.count,x.start+x.count));E<P;E+=3)p=bI(this,T,a,Ab,m,v,y,_,b,E,E+1,E+2),p&&(p.faceIndex=Math.floor(E/3),p.face.materialIndex=D.materialIndex,l.push(p))}else for(let D=Math.max(0,x.start),T=Math.min(m.count,x.start+x.count);D<T;D+=3)p=bI(this,d,a,Ab,m,v,y,_,b,D,D+1,D+2),p&&(p.faceIndex=Math.floor(D/3),l.push(p))}}function bI(c,a,l,h,d,f,p,g,m,v,y,_){Kg.fromBufferAttribute(d,v),Jg.fromBufferAttribute(d,y),em.fromBufferAttribute(d,_);const b=c.morphTargetInfluences;if(f&&b){fI.set(0,0,0),pI.set(0,0,0),gI.set(0,0,0);for(let x=0,w=f.length;x<w;x++){const O=b[x],D=f[x];0!==O&&(CW.fromBufferAttribute(D,v),SW.fromBufferAttribute(D,y),xW.fromBufferAttribute(D,_),p?(fI.addScaledVector(CW,O),pI.addScaledVector(SW,O),gI.addScaledVector(xW,O)):(fI.addScaledVector(CW.sub(Kg),O),pI.addScaledVector(SW.sub(Jg),O),gI.addScaledVector(xW.sub(em),O)))}Kg.add(fI),Jg.add(pI),em.add(gI)}c.isSkinnedMesh&&(c.boneTransform(v,Kg),c.boneTransform(y,Jg),c.boneTransform(_,em));const C=function Z0t(c,a,l,h,d,f,p,g){let m;if(m=1===a.side?h.intersectTriangle(p,f,d,!0,g):h.intersectTriangle(d,f,p,2!==a.side,g),null===m)return null;_I.copy(g),_I.applyMatrix4(c.matrixWorld);const v=l.ray.origin.distanceTo(_I);return v<l.near||v>l.far?null:{distance:v,point:_I.clone(),object:c}}(c,a,l,h,Kg,Jg,em,wW);if(C){g&&(mI.fromBufferAttribute(g,v),vI.fromBufferAttribute(g,y),yI.fromBufferAttribute(g,_),C.uv=Vh.getUV(wW,Kg,Jg,em,mI,vI,yI,new yt)),m&&(mI.fromBufferAttribute(m,v),vI.fromBufferAttribute(m,y),yI.fromBufferAttribute(m,_),C.uv2=Vh.getUV(wW,Kg,Jg,em,mI,vI,yI,new yt));const x={a:v,b:y,c:_,normal:new ae,materialIndex:0};Vh.getNormal(Kg,Jg,em,x.normal),C.face=x}return C}class bp extends $i{constructor(a=1,l=1,h=1,d=1,f=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:a,height:l,depth:h,widthSegments:d,heightSegments:f,depthSegments:p};const g=this;d=Math.floor(d),f=Math.floor(f),p=Math.floor(p);const m=[],v=[],y=[],_=[];let b=0,C=0;function x(w,O,D,T,M,k,E,P,V,I,U){const $=k/V,H=E/I,J=k/2,ee=E/2,B=P/2,G=V+1,W=I+1;let j=0,Q=0;const X=new ae;for(let Y=0;Y<W;Y++){const ne=Y*H-ee;for(let re=0;re<G;re++)X[w]=(re*$-J)*T,X[O]=ne*M,X[D]=B,v.push(X.x,X.y,X.z),X[w]=0,X[O]=0,X[D]=P>0?1:-1,y.push(X.x,X.y,X.z),_.push(re/V),_.push(1-Y/I),j+=1}for(let Y=0;Y<I;Y++)for(let ne=0;ne<V;ne++){const fe=b+ne+G*(Y+1),de=b+(ne+1)+G*(Y+1),De=b+(ne+1)+G*Y;m.push(b+ne+G*Y,fe,De),m.push(fe,de,De),Q+=6}g.addGroup(C,Q,U),C+=Q,b+=j}x("z","y","x",-1,-1,h,l,a,p,f,0),x("z","y","x",1,-1,h,l,-a,p,f,1),x("x","z","y",1,1,a,h,l,d,p,2),x("x","z","y",1,-1,a,h,-l,d,p,3),x("x","y","z",1,-1,a,l,h,d,f,4),x("x","y","z",-1,-1,a,l,-h,d,f,5),this.setIndex(m),this.setAttribute("position",new Pn(v,3)),this.setAttribute("normal",new Pn(y,3)),this.setAttribute("uv",new Pn(_,2))}static fromJSON(a){return new bp(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}function Ib(c){const a={};for(const l in c){a[l]={};for(const h in c[l]){const d=c[l][h];a[l][h]=d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?d.clone():Array.isArray(d)?d.slice():d}}return a}function Xa(c){const a={};for(let l=0;l<c.length;l++){const h=Ib(c[l]);for(const d in h)a[d]=h[d]}return a}const CI={clone:Ib,merge:Xa};class Ya extends yv{constructor(a){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}copy(a){return super.copy(a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=Ib(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.fog=a.fog,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}toJSON(a){const l=super.toJSON(a);l.glslVersion=this.glslVersion,l.uniforms={};for(const d in this.uniforms){const p=this.uniforms[d].value;l.uniforms[d]=p&&p.isTexture?{type:"t",value:p.toJSON(a).uuid}:p&&p.isColor?{type:"c",value:p.getHex()}:p&&p.isVector2?{type:"v2",value:p.toArray()}:p&&p.isVector3?{type:"v3",value:p.toArray()}:p&&p.isVector4?{type:"v4",value:p.toArray()}:p&&p.isMatrix3?{type:"m3",value:p.toArray()}:p&&p.isMatrix4?{type:"m4",value:p.toArray()}:{value:p}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader;const h={};for(const d in this.extensions)!0===this.extensions[d]&&(h[d]=!0);return Object.keys(h).length>0&&(l.extensions=h),l}}class OW extends qc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Oi,this.projectionMatrix=new Oi,this.projectionMatrixInverse=new Oi}copy(a,l){return super.copy(a,l),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return a.set(-l[8],-l[9],-l[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,l){super.updateWorldMatrix(a,l),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ko extends OW{constructor(a=50,l=1,h=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=a,this.zoom=1,this.near=h,this.far=d,this.focus=10,this.aspect=l,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(a,l){return super.copy(a,l),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}setFocalLength(a){const l=.5*this.getFilmHeight()/a;this.fov=2*XO*Math.atan(l),this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(.5*fv*this.fov);return.5*this.getFilmHeight()/a}getEffectiveFOV(){return 2*XO*Math.atan(Math.tan(.5*fv*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,l,h,d,f,p){this.aspect=a/l,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=l,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let l=a*Math.tan(.5*fv*this.fov)/this.zoom,h=2*l,d=this.aspect*h,f=-.5*d;const p=this.view;if(null!==this.view&&this.view.enabled){const m=p.fullWidth,v=p.fullHeight;f+=p.offsetX*d/m,l-=p.offsetY*h/v,d*=p.width/m,h*=p.height/v}const g=this.filmOffset;0!==g&&(f+=a*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(f,f+d,l,l-h,a,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const l=super.toJSON(a);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,null!==this.view&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}}class Y0t extends qc{constructor(a,l,h){if(super(),this.type="CubeCamera",!0!==h.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=h;const d=new ko(90,1,a,l);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new ae(1,0,0)),this.add(d);const f=new ko(90,1,a,l);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new ae(-1,0,0)),this.add(f);const p=new ko(90,1,a,l);p.layers=this.layers,p.up.set(0,0,1),p.lookAt(new ae(0,1,0)),this.add(p);const g=new ko(90,1,a,l);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(new ae(0,-1,0)),this.add(g);const m=new ko(90,1,a,l);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new ae(0,0,1)),this.add(m);const v=new ko(90,1,a,l);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new ae(0,0,-1)),this.add(v)}update(a,l){null===this.parent&&this.updateMatrixWorld();const h=this.renderTarget,[d,f,p,g,m,v]=this.children,y=a.getRenderTarget(),_=a.toneMapping,b=a.xr.enabled;a.toneMapping=0,a.xr.enabled=!1;const C=h.texture.generateMipmaps;h.texture.generateMipmaps=!1,a.setRenderTarget(h,0),a.render(l,d),a.setRenderTarget(h,1),a.render(l,f),a.setRenderTarget(h,2),a.render(l,p),a.setRenderTarget(h,3),a.render(l,g),a.setRenderTarget(h,4),a.render(l,m),h.texture.generateMipmaps=C,a.setRenderTarget(h,5),a.render(l,v),a.setRenderTarget(y),a.toneMapping=_,a.xr.enabled=b,h.texture.needsPMREMUpdate=!0}}class SI extends Yd{constructor(a,l,h,d,f,p,g,m,v,y){super(a=void 0!==a?a:[],l=void 0!==l?l:301,h,d,f,p,g,m,v,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}class K0t extends Fl{constructor(a,l={}){super(a,a,l),this.isWebGLCubeRenderTarget=!0;const h={width:a,height:a,depth:1};this.texture=new SI([h,h,h,h,h,h],l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==l.generateMipmaps&&l.generateMipmaps,this.texture.minFilter=void 0!==l.minFilter?l.minFilter:Do}fromEquirectangularTexture(a,l){this.texture.type=l.type,this.texture.encoding=l.encoding,this.texture.generateMipmaps=l.generateMipmaps,this.texture.minFilter=l.minFilter,this.texture.magFilter=l.magFilter;const h_uniforms={tEquirect:{value:null}},h_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",h_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",d=new bp(5,5,5),f=new Ya({name:"CubemapFromEquirect",uniforms:Ib(h_uniforms),vertexShader:h_vertexShader,fragmentShader:h_fragmentShader,side:1,blending:0});f.uniforms.tEquirect.value=l;const p=new fr(d,f),g=l.minFilter;return 1008===l.minFilter&&(l.minFilter=Do),new Y0t(1,10,this).update(a,p),l.minFilter=g,p.geometry.dispose(),p.material.dispose(),this}clear(a,l,h,d){const f=a.getRenderTarget();for(let p=0;p<6;p++)a.setRenderTarget(this,p),a.clear(l,h,d);a.setRenderTarget(f)}}const DW=new ae,J0t=new ae,evt=new cc;class _v{constructor(a=new ae(1,0,0),l=0){this.isPlane=!0,this.normal=a,this.constant=l}set(a,l){return this.normal.copy(a),this.constant=l,this}setComponents(a,l,h,d){return this.normal.set(a,l,h),this.constant=d,this}setFromNormalAndCoplanarPoint(a,l){return this.normal.copy(a),this.constant=-l.dot(this.normal),this}setFromCoplanarPoints(a,l,h){const d=DW.subVectors(h,l).cross(J0t.subVectors(a,l)).normalize();return this.setFromNormalAndCoplanarPoint(d,a),this}copy(a){return this.normal.copy(a.normal),this.constant=a.constant,this}normalize(){const a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,l){return l.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)}intersectLine(a,l){const h=a.delta(DW),d=this.normal.dot(h);if(0===d)return 0===this.distanceToPoint(a.start)?l.copy(a.start):null;const f=-(a.start.dot(this.normal)+this.constant)/d;return f<0||f>1?null:l.copy(h).multiplyScalar(f).add(a.start)}intersectsLine(a){const l=this.distanceToPoint(a.start),h=this.distanceToPoint(a.end);return l<0&&h>0||h<0&&l>0}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,l){const h=l||evt.getNormalMatrix(a),d=this.coplanarPoint(DW).applyMatrix4(a),f=this.normal.applyMatrix3(h).normalize();return this.constant=-d.dot(f),this}translate(a){return this.constant-=a.dot(this.normal),this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Fb=new Ob,xI=new ae;class TW{constructor(a=new _v,l=new _v,h=new _v,d=new _v,f=new _v,p=new _v){this.planes=[a,l,h,d,f,p]}set(a,l,h,d,f,p){const g=this.planes;return g[0].copy(a),g[1].copy(l),g[2].copy(h),g[3].copy(d),g[4].copy(f),g[5].copy(p),this}copy(a){const l=this.planes;for(let h=0;h<6;h++)l[h].copy(a.planes[h]);return this}setFromProjectionMatrix(a){const l=this.planes,h=a.elements,d=h[0],f=h[1],p=h[2],g=h[3],m=h[4],v=h[5],y=h[6],_=h[7],b=h[8],C=h[9],x=h[10],w=h[11],O=h[12],D=h[13],T=h[14],M=h[15];return l[0].setComponents(g-d,_-m,w-b,M-O).normalize(),l[1].setComponents(g+d,_+m,w+b,M+O).normalize(),l[2].setComponents(g+f,_+v,w+C,M+D).normalize(),l[3].setComponents(g-f,_-v,w-C,M-D).normalize(),l[4].setComponents(g-p,_-y,w-x,M-T).normalize(),l[5].setComponents(g+p,_+y,w+x,M+T).normalize(),this}intersectsObject(a){const l=a.geometry;return null===l.boundingSphere&&l.computeBoundingSphere(),Fb.copy(l.boundingSphere).applyMatrix4(a.matrixWorld),this.intersectsSphere(Fb)}intersectsSprite(a){return Fb.center.set(0,0,0),Fb.radius=.7071067811865476,Fb.applyMatrix4(a.matrixWorld),this.intersectsSphere(Fb)}intersectsSphere(a){const l=this.planes,h=a.center,d=-a.radius;for(let f=0;f<6;f++)if(l[f].distanceToPoint(h)<d)return!1;return!0}intersectsBox(a){const l=this.planes;for(let h=0;h<6;h++){const d=l[h];if(xI.x=d.normal.x>0?a.max.x:a.min.x,xI.y=d.normal.y>0?a.max.y:a.min.y,xI.z=d.normal.z>0?a.max.z:a.min.z,d.distanceToPoint(xI)<0)return!1}return!0}containsPoint(a){const l=this.planes;for(let h=0;h<6;h++)if(l[h].distanceToPoint(a)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function c1e(){let c=null,a=!1,l=null,h=null;function d(f,p){l(f,p),h=c.requestAnimationFrame(d)}return{start:function(){!0!==a&&null!==l&&(h=c.requestAnimationFrame(d),a=!0)},stop:function(){c.cancelAnimationFrame(h),a=!1},setAnimationLoop:function(f){l=f},setContext:function(f){c=f}}}function tvt(c,a){const l=a.isWebGL2,h=new WeakMap;return{get:function p(v){return v.isInterleavedBufferAttribute&&(v=v.data),h.get(v)},remove:function g(v){v.isInterleavedBufferAttribute&&(v=v.data);const y=h.get(v);y&&(c.deleteBuffer(y.buffer),h.delete(v))},update:function m(v,y){if(v.isGLBufferAttribute){const b=h.get(v);return void((!b||b.version<v.version)&&h.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version}))}v.isInterleavedBufferAttribute&&(v=v.data);const _=h.get(v);void 0===_?h.set(v,function d(v,y){const _=v.array,b=v.usage,C=c.createBuffer();let x;if(c.bindBuffer(y,C),c.bufferData(y,_,b),v.onUploadCallback(),_ instanceof Float32Array)x=5126;else if(_ instanceof Uint16Array)if(v.isFloat16BufferAttribute){if(!l)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");x=5131}else x=5123;else if(_ instanceof Int16Array)x=5122;else if(_ instanceof Uint32Array)x=5125;else if(_ instanceof Int32Array)x=5124;else if(_ instanceof Int8Array)x=5120;else if(_ instanceof Uint8Array)x=5121;else{if(!(_ instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);x=5121}return{buffer:C,type:x,bytesPerElement:_.BYTES_PER_ELEMENT,version:v.version}}(v,y)):_.version<v.version&&(function f(v,y,_){const b=y.array,C=y.updateRange;c.bindBuffer(_,v),-1===C.count?c.bufferSubData(_,0,b):(l?c.bufferSubData(_,C.offset*b.BYTES_PER_ELEMENT,b,C.offset,C.count):c.bufferSubData(_,C.offset*b.BYTES_PER_ELEMENT,b.subarray(C.offset,C.offset+C.count)),C.count=-1)}(_.buffer,v,y),_.version=v.version)}}}class Lb extends $i{constructor(a=1,l=1,h=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:a,height:l,widthSegments:h,heightSegments:d};const f=a/2,p=l/2,g=Math.floor(h),m=Math.floor(d),v=g+1,y=m+1,_=a/g,b=l/m,C=[],x=[],w=[],O=[];for(let D=0;D<y;D++){const T=D*b-p;for(let M=0;M<v;M++)x.push(M*_-f,-T,0),w.push(0,0,1),O.push(M/g),O.push(1-D/m)}for(let D=0;D<m;D++)for(let T=0;T<g;T++){const k=T+v*(D+1),E=T+1+v*(D+1),P=T+1+v*D;C.push(T+v*D,k,P),C.push(k,E,P)}this.setIndex(C),this.setAttribute("position",new Pn(x,3)),this.setAttribute("normal",new Pn(w,3)),this.setAttribute("uv",new Pn(O,2))}static fromJSON(a){return new Lb(a.width,a.height,a.widthSegments,a.heightSegments)}}const ur={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},fn={common:{diffuse:{value:new pn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new cc},uv2Transform:{value:new cc},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cc}},sprite:{diffuse:{value:new pn(16777215)},opacity:{value:1},center:{value:new yt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cc}}},Kd={basic:{uniforms:Xa([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.fog]),vertexShader:ur.meshbasic_vert,fragmentShader:ur.meshbasic_frag},lambert:{uniforms:Xa([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.fog,fn.lights,{emissive:{value:new pn(0)}}]),vertexShader:ur.meshlambert_vert,fragmentShader:ur.meshlambert_frag},phong:{uniforms:Xa([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,fn.lights,{emissive:{value:new pn(0)},specular:{value:new pn(1118481)},shininess:{value:30}}]),vertexShader:ur.meshphong_vert,fragmentShader:ur.meshphong_frag},standard:{uniforms:Xa([fn.common,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.roughnessmap,fn.metalnessmap,fn.fog,fn.lights,{emissive:{value:new pn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ur.meshphysical_vert,fragmentShader:ur.meshphysical_frag},toon:{uniforms:Xa([fn.common,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.gradientmap,fn.fog,fn.lights,{emissive:{value:new pn(0)}}]),vertexShader:ur.meshtoon_vert,fragmentShader:ur.meshtoon_frag},matcap:{uniforms:Xa([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,{matcap:{value:null}}]),vertexShader:ur.meshmatcap_vert,fragmentShader:ur.meshmatcap_frag},points:{uniforms:Xa([fn.points,fn.fog]),vertexShader:ur.points_vert,fragmentShader:ur.points_frag},dashed:{uniforms:Xa([fn.common,fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ur.linedashed_vert,fragmentShader:ur.linedashed_frag},depth:{uniforms:Xa([fn.common,fn.displacementmap]),vertexShader:ur.depth_vert,fragmentShader:ur.depth_frag},normal:{uniforms:Xa([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,{opacity:{value:1}}]),vertexShader:ur.meshnormal_vert,fragmentShader:ur.meshnormal_frag},sprite:{uniforms:Xa([fn.sprite,fn.fog]),vertexShader:ur.sprite_vert,fragmentShader:ur.sprite_frag},background:{uniforms:{uvTransform:{value:new cc},t2D:{value:null}},vertexShader:ur.background_vert,fragmentShader:ur.background_frag},cube:{uniforms:Xa([fn.envmap,{opacity:{value:1}}]),vertexShader:ur.cube_vert,fragmentShader:ur.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ur.equirect_vert,fragmentShader:ur.equirect_frag},distanceRGBA:{uniforms:Xa([fn.common,fn.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ur.distanceRGBA_vert,fragmentShader:ur.distanceRGBA_frag},shadow:{uniforms:Xa([fn.lights,fn.fog,{color:{value:new pn(0)},opacity:{value:1}}]),vertexShader:ur.shadow_vert,fragmentShader:ur.shadow_frag}};function Jyt(c,a,l,h,d,f){const p=new pn(0);let m,v,g=!0===d?0:1,y=null,_=0,b=null;function x(w,O){l.buffers.color.setClear(w.r,w.g,w.b,O,f)}return{getClearColor:function(){return p},setClearColor:function(w,O=1){p.set(w),g=O,x(p,g)},getClearAlpha:function(){return g},setClearAlpha:function(w){g=w,x(p,g)},render:function C(w,O){let D=!1,T=!0===O.isScene?O.background:null;T&&T.isTexture&&(T=a.get(T));const M=c.xr,k=M.getSession&&M.getSession();k&&"additive"===k.environmentBlendMode&&(T=null),null===T?x(p,g):T&&T.isColor&&(x(T,1),D=!0),(c.autoClear||D)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil),T&&(T.isCubeTexture||306===T.mapping)?(void 0===v&&(v=new fr(new bp(1,1,1),new Ya({name:"BackgroundCubeMaterial",uniforms:Ib(Kd.cube.uniforms),vertexShader:Kd.cube.vertexShader,fragmentShader:Kd.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(E,P,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),h.update(v)),v.material.uniforms.envMap.value=T,v.material.uniforms.flipEnvMap.value=T.isCubeTexture&&!1===T.isRenderTargetTexture?-1:1,(y!==T||_!==T.version||b!==c.toneMapping)&&(v.material.needsUpdate=!0,y=T,_=T.version,b=c.toneMapping),v.layers.enableAll(),w.unshift(v,v.geometry,v.material,0,0,null)):T&&T.isTexture&&(void 0===m&&(m=new fr(new Lb(2,2),new Ya({name:"BackgroundMaterial",uniforms:Ib(Kd.background.uniforms),vertexShader:Kd.background.vertexShader,fragmentShader:Kd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),h.update(m)),m.material.uniforms.t2D.value=T,!0===T.matrixAutoUpdate&&T.updateMatrix(),m.material.uniforms.uvTransform.value.copy(T.matrix),(y!==T||_!==T.version||b!==c.toneMapping)&&(m.material.needsUpdate=!0,y=T,_=T.version,b=c.toneMapping),m.layers.enableAll(),w.unshift(m,m.geometry,m.material,0,0,null))}}}function e_t(c,a,l,h){const d=c.getParameter(34921),f=h.isWebGL2?null:a.get("OES_vertex_array_object"),p=h.isWebGL2||null!==f,g={},m=O(null);let v=m,y=!1;function C(B){return h.isWebGL2?c.bindVertexArray(B):f.bindVertexArrayOES(B)}function x(B){return h.isWebGL2?c.deleteVertexArray(B):f.deleteVertexArrayOES(B)}function O(B){const G=[],W=[],j=[];for(let Q=0;Q<d;Q++)G[Q]=0,W[Q]=0,j[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:W,attributeDivisors:j,object:B,attributes:{},index:null}}function M(){const B=v.newAttributes;for(let G=0,W=B.length;G<W;G++)B[G]=0}function k(B){E(B,0)}function E(B,G){const j=v.enabledAttributes,Q=v.attributeDivisors;v.newAttributes[B]=1,0===j[B]&&(c.enableVertexAttribArray(B),j[B]=1),Q[B]!==G&&((h.isWebGL2?c:a.get("ANGLE_instanced_arrays"))[h.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,G),Q[B]=G)}function P(){const B=v.newAttributes,G=v.enabledAttributes;for(let W=0,j=G.length;W<j;W++)G[W]!==B[W]&&(c.disableVertexAttribArray(W),G[W]=0)}function V(B,G,W,j,Q,X){!0!==h.isWebGL2||5124!==W&&5125!==W?c.vertexAttribPointer(B,G,W,j,Q,X):c.vertexAttribIPointer(B,G,W,Q,X)}function J(){ee(),y=!0,v!==m&&(v=m,C(v.object))}function ee(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:function _(B,G,W,j,Q){let X=!1;if(p){const Y=function w(B,G,W){const j=!0===W.wireframe;let Q=g[B.id];void 0===Q&&(Q={},g[B.id]=Q);let X=Q[G.id];void 0===X&&(X={},Q[G.id]=X);let Y=X[j];return void 0===Y&&(Y=O(function b(){return h.isWebGL2?c.createVertexArray():f.createVertexArrayOES()}()),X[j]=Y),Y}(j,W,G);v!==Y&&(v=Y,C(v.object)),X=function D(B,G,W,j){const Q=v.attributes,X=G.attributes;let Y=0;const ne=W.getAttributes();for(const re in ne)if(ne[re].location>=0){const de=Q[re];let De=X[re];if(void 0===De&&("instanceMatrix"===re&&B.instanceMatrix&&(De=B.instanceMatrix),"instanceColor"===re&&B.instanceColor&&(De=B.instanceColor)),void 0===de||de.attribute!==De||De&&de.data!==De.data)return!0;Y++}return v.attributesNum!==Y||v.index!==j}(B,j,W,Q),X&&function T(B,G,W,j){const Q={},X=G.attributes;let Y=0;const ne=W.getAttributes();for(const re in ne)if(ne[re].location>=0){let de=X[re];void 0===de&&("instanceMatrix"===re&&B.instanceMatrix&&(de=B.instanceMatrix),"instanceColor"===re&&B.instanceColor&&(de=B.instanceColor));const De={};De.attribute=de,de&&de.data&&(De.data=de.data),Q[re]=De,Y++}v.attributes=Q,v.attributesNum=Y,v.index=j}(B,j,W,Q)}else{const Y=!0===G.wireframe;(v.geometry!==j.id||v.program!==W.id||v.wireframe!==Y)&&(v.geometry=j.id,v.program=W.id,v.wireframe=Y,X=!0)}null!==Q&&l.update(Q,34963),(X||y)&&(y=!1,function I(B,G,W,j){if(!1===h.isWebGL2&&(B.isInstancedMesh||j.isInstancedBufferGeometry)&&null===a.get("ANGLE_instanced_arrays"))return;M();const Q=j.attributes,X=W.getAttributes(),Y=G.defaultAttributeValues;for(const ne in X){const re=X[ne];if(re.location>=0){let fe=Q[ne];if(void 0===fe&&("instanceMatrix"===ne&&B.instanceMatrix&&(fe=B.instanceMatrix),"instanceColor"===ne&&B.instanceColor&&(fe=B.instanceColor)),void 0!==fe){const de=fe.normalized,De=fe.itemSize,we=l.get(fe);if(void 0===we)continue;const Fe=we.buffer,qe=we.type,Le=we.bytesPerElement;if(fe.isInterleavedBufferAttribute){const ze=fe.data,it=ze.stride,ve=fe.offset;if(ze.isInstancedInterleavedBuffer){for(let Ue=0;Ue<re.locationSize;Ue++)E(re.location+Ue,ze.meshPerAttribute);!0!==B.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let Ue=0;Ue<re.locationSize;Ue++)k(re.location+Ue);c.bindBuffer(34962,Fe);for(let Ue=0;Ue<re.locationSize;Ue++)V(re.location+Ue,De/re.locationSize,qe,de,it*Le,(ve+De/re.locationSize*Ue)*Le)}else{if(fe.isInstancedBufferAttribute){for(let ze=0;ze<re.locationSize;ze++)E(re.location+ze,fe.meshPerAttribute);!0!==B.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let ze=0;ze<re.locationSize;ze++)k(re.location+ze);c.bindBuffer(34962,Fe);for(let ze=0;ze<re.locationSize;ze++)V(re.location+ze,De/re.locationSize,qe,de,De*Le,De/re.locationSize*ze*Le)}}else if(void 0!==Y){const de=Y[ne];if(void 0!==de)switch(de.length){case 2:c.vertexAttrib2fv(re.location,de);break;case 3:c.vertexAttrib3fv(re.location,de);break;case 4:c.vertexAttrib4fv(re.location,de);break;default:c.vertexAttrib1fv(re.location,de)}}}}P()}(B,G,W,j),null!==Q&&c.bindBuffer(34963,l.get(Q).buffer))},reset:J,resetDefaultState:ee,dispose:function U(){J();for(const B in g){const G=g[B];for(const W in G){const j=G[W];for(const Q in j)x(j[Q].object),delete j[Q];delete G[W]}delete g[B]}},releaseStatesOfGeometry:function $(B){if(void 0===g[B.id])return;const G=g[B.id];for(const W in G){const j=G[W];for(const Q in j)x(j[Q].object),delete j[Q];delete G[W]}delete g[B.id]},releaseStatesOfProgram:function H(B){for(const G in g){const W=g[G];if(void 0===W[B.id])continue;const j=W[B.id];for(const Q in j)x(j[Q].object),delete j[Q];delete W[B.id]}},initAttributes:M,enableAttribute:k,disableUnusedAttributes:P}}function t_t(c,a,l,h){const d=h.isWebGL2;let f;this.setMode=function p(v){f=v},this.render=function g(v,y){c.drawArrays(f,v,y),l.update(y,f,1)},this.renderInstances=function m(v,y,_){if(0===_)return;let b,C;if(d)b=c,C="drawArraysInstanced";else if(b=a.get("ANGLE_instanced_arrays"),C="drawArraysInstancedANGLE",null===b)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[C](f,v,y,_),l.update(y,f,_)}}function n_t(c,a,l){let h;function f(V){if("highp"===V){if(c.getShaderPrecisionFormat(35633,36338).precision>0&&c.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";V="mediump"}return"mediump"===V&&c.getShaderPrecisionFormat(35633,36337).precision>0&&c.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const p=typeof WebGL2RenderingContext<"u"&&c instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&c instanceof WebGL2ComputeRenderingContext;let g=void 0!==l.precision?l.precision:"highp";const m=f(g);m!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",m,"instead."),g=m);const v=p||a.has("WEBGL_draw_buffers"),y=!0===l.logarithmicDepthBuffer,_=c.getParameter(34930),b=c.getParameter(35660),C=c.getParameter(3379),x=c.getParameter(34076),w=c.getParameter(34921),O=c.getParameter(36347),D=c.getParameter(36348),T=c.getParameter(36349),M=b>0,k=p||a.has("OES_texture_float");return{isWebGL2:p,drawBuffers:v,getMaxAnisotropy:function d(){if(void 0!==h)return h;if(!0===a.has("EXT_texture_filter_anisotropic")){const V=a.get("EXT_texture_filter_anisotropic");h=c.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h},getMaxPrecision:f,precision:g,logarithmicDepthBuffer:y,maxTextures:_,maxVertexTextures:b,maxTextureSize:C,maxCubemapSize:x,maxAttributes:w,maxVertexUniforms:O,maxVaryings:D,maxFragmentUniforms:T,vertexTextures:M,floatFragmentTextures:k,floatVertexTextures:M&&k,maxSamples:p?c.getParameter(36183):0}}function i_t(c){const a=this;let l=null,h=0,d=!1,f=!1;const p=new _v,g=new cc,m={value:null,needsUpdate:!1};function v(){m.value!==l&&(m.value=l,m.needsUpdate=h>0),a.numPlanes=h,a.numIntersection=0}function y(_,b,C,x){const w=null!==_?_.length:0;let O=null;if(0!==w){if(O=m.value,!0!==x||null===O){const D=C+4*w,T=b.matrixWorldInverse;g.getNormalMatrix(T),(null===O||O.length<D)&&(O=new Float32Array(D));for(let M=0,k=C;M!==w;++M,k+=4)p.copy(_[M]).applyMatrix4(T,g),p.normal.toArray(O,k),O[k+3]=p.constant}m.value=O,m.needsUpdate=!0}return a.numPlanes=w,a.numIntersection=0,O}this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(_,b,C){const x=0!==_.length||b||0!==h||d;return d=b,l=y(_,C,0),h=_.length,x},this.beginShadows=function(){f=!0,y(null)},this.endShadows=function(){f=!1,v()},this.setState=function(_,b,C){const x=_.clippingPlanes,w=_.clipIntersection,O=_.clipShadows,D=c.get(_);if(!d||null===x||0===x.length||f&&!O)f?y(null):v();else{const T=f?0:h,M=4*T;let k=D.clippingState||null;m.value=k,k=y(x,b,M,C);for(let E=0;E!==M;++E)k[E]=l[E];D.clippingState=k,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=T}}}function r_t(c){let a=new WeakMap;function l(p,g){return 303===g?p.mapping=301:304===g&&(p.mapping=302),p}function d(p){const g=p.target;g.removeEventListener("dispose",d);const m=a.get(g);void 0!==m&&(a.delete(g),m.dispose())}return{get:function h(p){if(p&&p.isTexture&&!1===p.isRenderTargetTexture){const g=p.mapping;if(303===g||304===g){if(a.has(p))return l(a.get(p).texture,p.mapping);{const m=p.image;if(m&&m.height>0){const v=new K0t(m.height/2);return v.fromEquirectangularTexture(c,p),a.set(p,v),p.addEventListener("dispose",d),l(v.texture,p.mapping)}return null}}}return p},dispose:function f(){a=new WeakMap}}}Kd.physical={uniforms:Xa([Kd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new yt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new pn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new pn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new pn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ur.meshphysical_vert,fragmentShader:ur.meshphysical_frag};class n2 extends OW{constructor(a=-1,l=1,h=1,d=-1,f=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=l,this.top=h,this.bottom=d,this.near=f,this.far=p,this.updateProjectionMatrix()}copy(a,l){return super.copy(a,l),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this}setViewOffset(a,l,h,d,f,p){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=l,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let f=h-a,p=h+a,g=d+l,m=d-l;if(null!==this.view&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f+=v*this.view.offsetX,p=f+v*this.view.width,g-=y*this.view.offsetY,m=g-y*this.view.height}this.projectionMatrix.makeOrthographic(f,p,g,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const l=super.toJSON(a);return l.object.zoom=this.zoom,l.object.left=this.left,l.object.right=this.right,l.object.top=this.top,l.object.bottom=this.bottom,l.object.near=this.near,l.object.far=this.far,null!==this.view&&(l.object.view=Object.assign({},this.view)),l}}const u1e=[.125,.215,.35,.446,.526,.582],kW=new n2,h1e=new pn;let MW=null;const Cv=(1+Math.sqrt(5))/2,Bb=1/Cv,d1e=[new ae(1,1,1),new ae(-1,1,1),new ae(1,1,-1),new ae(-1,1,-1),new ae(0,Cv,Bb),new ae(0,Cv,-Bb),new ae(Bb,0,Cv),new ae(-Bb,0,Cv),new ae(Cv,Bb,0),new ae(-Cv,Bb,0)];class f1e{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(a,l=0,h=.1,d=100){MW=this._renderer.getRenderTarget(),this._setSize(256);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(a,h,d,f),l>0&&this._blur(f,0,0,l),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(a,l=null){return this._fromTexture(a,l)}fromCubemap(a,l=null){return this._fromTexture(a,l)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=m1e(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=g1e(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(MW),a.scissorTest=!1,wI(a,0,0,a.width,a.height)}_fromTexture(a,l){this._setSize(301===a.mapping||302===a.mapping?0===a.image.length?16:a.image[0].width||a.image[0].image.width:a.image.width/4),MW=this._renderer.getRenderTarget();const h=l||this._allocateTargets();return this._textureToCubeUV(a,h),this._applyPMREM(h),this._cleanup(h),h}_allocateTargets(){const a=3*Math.max(this._cubeSize,112),l=4*this._cubeSize,h={magFilter:Do,minFilter:Do,generateMipmaps:!1,type:qO,format:Rh,encoding:hv,depthBuffer:!1},d=p1e(a,l,h);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==a){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=p1e(a,l,h);const{_lodMax:f}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function s_t(c){const a=[],l=[],h=[];let d=c;const f=c-4+1+u1e.length;for(let p=0;p<f;p++){const g=Math.pow(2,d);l.push(g);let m=1/g;p>c-4?m=u1e[p-c+4-1]:0===p&&(m=0),h.push(m);const v=1/(g-2),y=-v,_=1+v,b=[y,y,_,y,_,_,y,y,_,_,y,_],C=6,x=6,w=3,O=2,D=1,T=new Float32Array(w*x*C),M=new Float32Array(O*x*C),k=new Float32Array(D*x*C);for(let P=0;P<C;P++){const V=P%3*2/3-1,I=P>2?0:-1;T.set([V,I,0,V+2/3,I,0,V+2/3,I+1,0,V,I,0,V+2/3,I+1,0,V,I+1,0],w*x*P),M.set(b,O*x*P),k.set([P,P,P,P,P,P],D*x*P)}const E=new $i;E.setAttribute("position",new Hs(T,w)),E.setAttribute("uv",new Hs(M,O)),E.setAttribute("faceIndex",new Hs(k,D)),a.push(E),d>4&&d--}return{lodPlanes:a,sizeLods:l,sigmas:h}}(f)),this._blurMaterial=function o_t(c,a,l){const h=new Float32Array(20),d=new ae(0,1,0);return new Ya({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/l,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:h},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(f,a,l)}return d}_compileMaterial(a){const l=new fr(this._lodPlanes[0],a);this._renderer.compile(l,kW)}_sceneToCubeUV(a,l,h,d){const g=new ko(90,1,l,h),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],y=this._renderer,_=y.autoClear,b=y.toneMapping;y.getClearColor(h1e),y.toneMapping=0,y.autoClear=!1;const C=new co({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),x=new fr(new bp,C);let w=!1;const O=a.background;O?O.isColor&&(C.color.copy(O),a.background=null,w=!0):(C.color.copy(h1e),w=!0);for(let D=0;D<6;D++){const T=D%3;0===T?(g.up.set(0,m[D],0),g.lookAt(v[D],0,0)):1===T?(g.up.set(0,0,m[D]),g.lookAt(0,v[D],0)):(g.up.set(0,m[D],0),g.lookAt(0,0,v[D]));const M=this._cubeSize;wI(d,T*M,D>2?M:0,M,M),y.setRenderTarget(d),w&&y.render(x,g),y.render(a,g)}x.geometry.dispose(),x.material.dispose(),y.toneMapping=b,y.autoClear=_,a.background=O}_textureToCubeUV(a,l){const h=this._renderer,d=301===a.mapping||302===a.mapping;d?(null===this._cubemapMaterial&&(this._cubemapMaterial=m1e()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===a.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=g1e());const f=d?this._cubemapMaterial:this._equirectMaterial,p=new fr(this._lodPlanes[0],f);f.uniforms.envMap.value=a;const m=this._cubeSize;wI(l,0,0,3*m,2*m),h.setRenderTarget(l),h.render(p,kW)}_applyPMREM(a){const l=this._renderer,h=l.autoClear;l.autoClear=!1;for(let d=1;d<this._lodPlanes.length;d++){const f=Math.sqrt(this._sigmas[d]*this._sigmas[d]-this._sigmas[d-1]*this._sigmas[d-1]);this._blur(a,d-1,d,f,d1e[(d-1)%d1e.length])}l.autoClear=h}_blur(a,l,h,d,f){const p=this._pingPongRenderTarget;this._halfBlur(a,p,l,h,d,"latitudinal",f),this._halfBlur(p,a,h,h,d,"longitudinal",f)}_halfBlur(a,l,h,d,f,p,g){const m=this._renderer,v=this._blurMaterial;"latitudinal"!==p&&"longitudinal"!==p&&console.error("blur direction must be either latitudinal or longitudinal!");const _=new fr(this._lodPlanes[d],v),b=v.uniforms,C=this._sizeLods[h]-1,x=isFinite(f)?Math.PI/(2*C):2*Math.PI/39,w=f/x,O=isFinite(f)?1+Math.floor(3*w):20;O>20&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${O} samples when the maximum is set to 20`);const D=[];let T=0;for(let V=0;V<20;++V){const I=V/w,U=Math.exp(-I*I/2);D.push(U),0===V?T+=U:V<O&&(T+=2*U)}for(let V=0;V<D.length;V++)D[V]=D[V]/T;b.envMap.value=a.texture,b.samples.value=O,b.weights.value=D,b.latitudinal.value="latitudinal"===p,g&&(b.poleAxis.value=g);const{_lodMax:M}=this;b.dTheta.value=x,b.mipInt.value=M-h;const k=this._sizeLods[d];wI(l,3*k*(d>M-4?d-M+4:0),4*(this._cubeSize-k),3*k,2*k),m.setRenderTarget(l),m.render(_,kW)}}function p1e(c,a,l){const h=new Fl(c,a,l);return h.texture.mapping=306,h.texture.name="PMREM.cubeUv",h.scissorTest=!0,h}function wI(c,a,l,h,d){c.viewport.set(a,l,h,d),c.scissor.set(a,l,h,d)}function g1e(){return new Ya({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function m1e(){return new Ya({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function a_t(c){let a=new WeakMap,l=null;function f(g){const m=g.target;m.removeEventListener("dispose",f);const v=a.get(m);void 0!==v&&(a.delete(m),v.dispose())}return{get:function h(g){if(g&&g.isTexture){const m=g.mapping,v=303===m||304===m,y=301===m||302===m;if(v||y){if(g.isRenderTargetTexture&&!0===g.needsPMREMUpdate){g.needsPMREMUpdate=!1;let _=a.get(g);return null===l&&(l=new f1e(c)),_=v?l.fromEquirectangular(g,_):l.fromCubemap(g,_),a.set(g,_),_.texture}if(a.has(g))return a.get(g).texture;{const _=g.image;if(v&&_&&_.height>0||y&&_&&function d(g){let m=0;for(let y=0;y<6;y++)void 0!==g[y]&&m++;return 6===m}(_)){null===l&&(l=new f1e(c));const b=v?l.fromEquirectangular(g):l.fromCubemap(g);return a.set(g,b),g.addEventListener("dispose",f),b.texture}return null}}}return g},dispose:function p(){a=new WeakMap,null!==l&&(l.dispose(),l=null)}}}function l_t(c){const a={};function l(h){if(void 0!==a[h])return a[h];let d;switch(h){case"WEBGL_depth_texture":d=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=c.getExtension(h)}return a[h]=d,d}return{has:function(h){return null!==l(h)},init:function(h){h.isWebGL2?l("EXT_color_buffer_float"):(l("WEBGL_depth_texture"),l("OES_texture_float"),l("OES_texture_half_float"),l("OES_texture_half_float_linear"),l("OES_standard_derivatives"),l("OES_element_index_uint"),l("OES_vertex_array_object"),l("ANGLE_instanced_arrays")),l("OES_texture_float_linear"),l("EXT_color_buffer_half_float"),l("WEBGL_multisampled_render_to_texture")},get:function(h){const d=l(h);return null===d&&console.warn("THREE.WebGLRenderer: "+h+" extension not supported."),d}}}function c_t(c,a,l,h){const d={},f=new WeakMap;function p(_){const b=_.target;null!==b.index&&a.remove(b.index);for(const x in b.attributes)a.remove(b.attributes[x]);b.removeEventListener("dispose",p),delete d[b.id];const C=f.get(b);C&&(a.remove(C),f.delete(b)),h.releaseStatesOfGeometry(b),!0===b.isInstancedBufferGeometry&&delete b._maxInstanceCount,l.memory.geometries--}function v(_){const b=[],C=_.index,x=_.attributes.position;let w=0;if(null!==C){const T=C.array;w=C.version;for(let M=0,k=T.length;M<k;M+=3){const E=T[M+0],P=T[M+1],V=T[M+2];b.push(E,P,P,V,V,E)}}else{w=x.version;for(let M=0,k=x.array.length/3-1;M<k;M+=3){const E=M+0,P=M+1,V=M+2;b.push(E,P,P,V,V,E)}}const O=new(Q_e(b)?a1e:o1e)(b,1);O.version=w;const D=f.get(_);D&&a.remove(D),f.set(_,O)}return{get:function g(_,b){return!0===d[b.id]||(b.addEventListener("dispose",p),d[b.id]=!0,l.memory.geometries++),b},update:function m(_){const b=_.attributes;for(const x in b)a.update(b[x],34962);const C=_.morphAttributes;for(const x in C){const w=C[x];for(let O=0,D=w.length;O<D;O++)a.update(w[O],34962)}},getWireframeAttribute:function y(_){const b=f.get(_);if(b){const C=_.index;null!==C&&b.version<C.version&&v(_)}else v(_);return f.get(_)}}}function u_t(c,a,l,h){const d=h.isWebGL2;let f,g,m;this.setMode=function p(b){f=b},this.setIndex=function v(b){g=b.type,m=b.bytesPerElement},this.render=function y(b,C){c.drawElements(f,C,g,b*m),l.update(C,f,1)},this.renderInstances=function _(b,C,x){if(0===x)return;let w,O;if(d)w=c,O="drawElementsInstanced";else if(w=a.get("ANGLE_instanced_arrays"),O="drawElementsInstancedANGLE",null===w)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");w[O](f,C,g,b*m,x),l.update(C,f,x)}}function h_t(c){const l={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:l,programs:null,autoReset:!0,reset:function d(){l.frame++,l.calls=0,l.triangles=0,l.points=0,l.lines=0},update:function h(f,p,g){switch(l.calls++,p){case 4:l.triangles+=g*(f/3);break;case 1:l.lines+=g*(f/2);break;case 3:l.lines+=g*(f-1);break;case 2:l.lines+=g*f;break;case 0:l.points+=g*f;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p)}}}}function d_t(c,a){return c[0]-a[0]}function f_t(c,a){return Math.abs(a[1])-Math.abs(c[1])}function AW(c,a){let l=1;const h=a.isInterleavedBufferAttribute?a.data.array:a.array;h instanceof Int8Array?l=127:h instanceof Uint8Array?l=255:h instanceof Uint16Array?l=65535:h instanceof Int16Array?l=32767:h instanceof Int32Array?l=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",h),c.divideScalar(l)}function p_t(c,a,l){const h={},d=new Float32Array(8),f=new WeakMap,p=new pr,g=[];for(let v=0;v<8;v++)g[v]=[v,0];return{update:function m(v,y,_,b){const C=v.morphTargetInfluences;if(!0===a.isWebGL2){const x=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,w=void 0!==x?x.length:0;let O=f.get(y);if(void 0===O||O.count!==w){let G=function(){ee.dispose(),f.delete(y),y.removeEventListener("dispose",G)};void 0!==O&&O.texture.dispose();const M=void 0!==y.morphAttributes.position,k=void 0!==y.morphAttributes.normal,E=void 0!==y.morphAttributes.color,P=y.morphAttributes.position||[],V=y.morphAttributes.normal||[],I=y.morphAttributes.color||[];let U=0;!0===M&&(U=1),!0===k&&(U=2),!0===E&&(U=3);let $=y.attributes.position.count*U,H=1;$>a.maxTextureSize&&(H=Math.ceil($/a.maxTextureSize),$=a.maxTextureSize);const J=new Float32Array($*H*4*w),ee=new oW(J,$,H,w);ee.type=jg,ee.needsUpdate=!0;const B=4*U;for(let W=0;W<w;W++){const j=P[W],Q=V[W],X=I[W],Y=$*H*4*W;for(let ne=0;ne<j.count;ne++){const re=ne*B;!0===M&&(p.fromBufferAttribute(j,ne),!0===j.normalized&&AW(p,j),J[Y+re+0]=p.x,J[Y+re+1]=p.y,J[Y+re+2]=p.z,J[Y+re+3]=0),!0===k&&(p.fromBufferAttribute(Q,ne),!0===Q.normalized&&AW(p,Q),J[Y+re+4]=p.x,J[Y+re+5]=p.y,J[Y+re+6]=p.z,J[Y+re+7]=0),!0===E&&(p.fromBufferAttribute(X,ne),!0===X.normalized&&AW(p,X),J[Y+re+8]=p.x,J[Y+re+9]=p.y,J[Y+re+10]=p.z,J[Y+re+11]=4===X.itemSize?p.w:1)}}O={count:w,texture:ee,size:new yt($,H)},f.set(y,O),y.addEventListener("dispose",G)}let D=0;for(let M=0;M<C.length;M++)D+=C[M];const T=y.morphTargetsRelative?1:1-D;b.getUniforms().setValue(c,"morphTargetBaseInfluence",T),b.getUniforms().setValue(c,"morphTargetInfluences",C),b.getUniforms().setValue(c,"morphTargetsTexture",O.texture,l),b.getUniforms().setValue(c,"morphTargetsTextureSize",O.size)}else{const x=void 0===C?0:C.length;let w=h[y.id];if(void 0===w||w.length!==x){w=[];for(let k=0;k<x;k++)w[k]=[k,0];h[y.id]=w}for(let k=0;k<x;k++){const E=w[k];E[0]=k,E[1]=C[k]}w.sort(f_t);for(let k=0;k<8;k++)k<x&&w[k][1]?(g[k][0]=w[k][0],g[k][1]=w[k][1]):(g[k][0]=Number.MAX_SAFE_INTEGER,g[k][1]=0);g.sort(d_t);const O=y.morphAttributes.position,D=y.morphAttributes.normal;let T=0;for(let k=0;k<8;k++){const E=g[k],P=E[0],V=E[1];P!==Number.MAX_SAFE_INTEGER&&V?(O&&y.getAttribute("morphTarget"+k)!==O[P]&&y.setAttribute("morphTarget"+k,O[P]),D&&y.getAttribute("morphNormal"+k)!==D[P]&&y.setAttribute("morphNormal"+k,D[P]),d[k]=V,T+=V):(O&&!0===y.hasAttribute("morphTarget"+k)&&y.deleteAttribute("morphTarget"+k),D&&!0===y.hasAttribute("morphNormal"+k)&&y.deleteAttribute("morphNormal"+k),d[k]=0)}const M=y.morphTargetsRelative?1:1-T;b.getUniforms().setValue(c,"morphTargetBaseInfluence",M),b.getUniforms().setValue(c,"morphTargetInfluences",d)}}}}function g_t(c,a,l,h){let d=new WeakMap;function g(m){const v=m.target;v.removeEventListener("dispose",g),l.remove(v.instanceMatrix),null!==v.instanceColor&&l.remove(v.instanceColor)}return{update:function f(m){const v=h.render.frame,_=a.get(m,m.geometry);return d.get(_)!==v&&(a.update(_),d.set(_,v)),m.isInstancedMesh&&(!1===m.hasEventListener("dispose",g)&&m.addEventListener("dispose",g),l.update(m.instanceMatrix,34962),null!==m.instanceColor&&l.update(m.instanceColor,34962)),_},dispose:function p(){d=new WeakMap}}}const v1e=new Yd,y1e=new oW,_1e=new q_e,b1e=new SI,C1e=[],S1e=[],x1e=new Float32Array(16),w1e=new Float32Array(9),O1e=new Float32Array(4);function Vb(c,a,l){const h=c[0];if(h<=0||h>0)return c;const d=a*l;let f=C1e[d];if(void 0===f&&(f=new Float32Array(d),C1e[d]=f),0!==a){h.toArray(f,0);for(let p=1,g=0;p!==a;++p)g+=l,c[p].toArray(f,g)}return f}function Ll(c,a){if(c.length!==a.length)return!1;for(let l=0,h=c.length;l<h;l++)if(c[l]!==a[l])return!1;return!0}function Nl(c,a){for(let l=0,h=a.length;l<h;l++)c[l]=a[l]}function OI(c,a){let l=S1e[a];void 0===l&&(l=new Int32Array(a),S1e[a]=l);for(let h=0;h!==a;++h)l[h]=c.allocateTextureUnit();return l}function m_t(c,a){const l=this.cache;l[0]!==a&&(c.uniform1f(this.addr,a),l[0]=a)}function v_t(c,a){const l=this.cache;if(void 0!==a.x)(l[0]!==a.x||l[1]!==a.y)&&(c.uniform2f(this.addr,a.x,a.y),l[0]=a.x,l[1]=a.y);else{if(Ll(l,a))return;c.uniform2fv(this.addr,a),Nl(l,a)}}function y_t(c,a){const l=this.cache;if(void 0!==a.x)(l[0]!==a.x||l[1]!==a.y||l[2]!==a.z)&&(c.uniform3f(this.addr,a.x,a.y,a.z),l[0]=a.x,l[1]=a.y,l[2]=a.z);else if(void 0!==a.r)(l[0]!==a.r||l[1]!==a.g||l[2]!==a.b)&&(c.uniform3f(this.addr,a.r,a.g,a.b),l[0]=a.r,l[1]=a.g,l[2]=a.b);else{if(Ll(l,a))return;c.uniform3fv(this.addr,a),Nl(l,a)}}function __t(c,a){const l=this.cache;if(void 0!==a.x)(l[0]!==a.x||l[1]!==a.y||l[2]!==a.z||l[3]!==a.w)&&(c.uniform4f(this.addr,a.x,a.y,a.z,a.w),l[0]=a.x,l[1]=a.y,l[2]=a.z,l[3]=a.w);else{if(Ll(l,a))return;c.uniform4fv(this.addr,a),Nl(l,a)}}function b_t(c,a){const l=this.cache,h=a.elements;if(void 0===h){if(Ll(l,a))return;c.uniformMatrix2fv(this.addr,!1,a),Nl(l,a)}else{if(Ll(l,h))return;O1e.set(h),c.uniformMatrix2fv(this.addr,!1,O1e),Nl(l,h)}}function C_t(c,a){const l=this.cache,h=a.elements;if(void 0===h){if(Ll(l,a))return;c.uniformMatrix3fv(this.addr,!1,a),Nl(l,a)}else{if(Ll(l,h))return;w1e.set(h),c.uniformMatrix3fv(this.addr,!1,w1e),Nl(l,h)}}function S_t(c,a){const l=this.cache,h=a.elements;if(void 0===h){if(Ll(l,a))return;c.uniformMatrix4fv(this.addr,!1,a),Nl(l,a)}else{if(Ll(l,h))return;x1e.set(h),c.uniformMatrix4fv(this.addr,!1,x1e),Nl(l,h)}}function x_t(c,a){const l=this.cache;l[0]!==a&&(c.uniform1i(this.addr,a),l[0]=a)}function w_t(c,a){const l=this.cache;Ll(l,a)||(c.uniform2iv(this.addr,a),Nl(l,a))}function O_t(c,a){const l=this.cache;Ll(l,a)||(c.uniform3iv(this.addr,a),Nl(l,a))}function D_t(c,a){const l=this.cache;Ll(l,a)||(c.uniform4iv(this.addr,a),Nl(l,a))}function T_t(c,a){const l=this.cache;l[0]!==a&&(c.uniform1ui(this.addr,a),l[0]=a)}function k_t(c,a){const l=this.cache;Ll(l,a)||(c.uniform2uiv(this.addr,a),Nl(l,a))}function M_t(c,a){const l=this.cache;Ll(l,a)||(c.uniform3uiv(this.addr,a),Nl(l,a))}function E_t(c,a){const l=this.cache;Ll(l,a)||(c.uniform4uiv(this.addr,a),Nl(l,a))}function A_t(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.setTexture2D(a||v1e,d)}function I_t(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.setTexture3D(a||_1e,d)}function P_t(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.setTextureCube(a||b1e,d)}function R_t(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.setTexture2DArray(a||y1e,d)}function L_t(c,a){c.uniform1fv(this.addr,a)}function N_t(c,a){const l=Vb(a,this.size,2);c.uniform2fv(this.addr,l)}function B_t(c,a){const l=Vb(a,this.size,3);c.uniform3fv(this.addr,l)}function V_t(c,a){const l=Vb(a,this.size,4);c.uniform4fv(this.addr,l)}function U_t(c,a){const l=Vb(a,this.size,4);c.uniformMatrix2fv(this.addr,!1,l)}function z_t(c,a){const l=Vb(a,this.size,9);c.uniformMatrix3fv(this.addr,!1,l)}function H_t(c,a){const l=Vb(a,this.size,16);c.uniformMatrix4fv(this.addr,!1,l)}function $_t(c,a){c.uniform1iv(this.addr,a)}function W_t(c,a){c.uniform2iv(this.addr,a)}function G_t(c,a){c.uniform3iv(this.addr,a)}function Q_t(c,a){c.uniform4iv(this.addr,a)}function j_t(c,a){c.uniform1uiv(this.addr,a)}function Z_t(c,a){c.uniform2uiv(this.addr,a)}function q_t(c,a){c.uniform3uiv(this.addr,a)}function X_t(c,a){c.uniform4uiv(this.addr,a)}function Y_t(c,a,l){const h=a.length,d=OI(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.setTexture2D(a[f]||v1e,d[f])}function K_t(c,a,l){const h=a.length,d=OI(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.setTexture3D(a[f]||_1e,d[f])}function J_t(c,a,l){const h=a.length,d=OI(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.setTextureCube(a[f]||b1e,d[f])}function e1t(c,a,l){const h=a.length,d=OI(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.setTexture2DArray(a[f]||y1e,d[f])}class n1t{constructor(a,l,h){this.id=a,this.addr=h,this.cache=[],this.setValue=function F_t(c){switch(c){case 5126:return m_t;case 35664:return v_t;case 35665:return y_t;case 35666:return __t;case 35674:return b_t;case 35675:return C_t;case 35676:return S_t;case 5124:case 35670:return x_t;case 35667:case 35671:return w_t;case 35668:case 35672:return O_t;case 35669:case 35673:return D_t;case 5125:return T_t;case 36294:return k_t;case 36295:return M_t;case 36296:return E_t;case 35678:case 36198:case 36298:case 36306:case 35682:return A_t;case 35679:case 36299:case 36307:return I_t;case 35680:case 36300:case 36308:case 36293:return P_t;case 36289:case 36303:case 36311:case 36292:return R_t}}(l.type)}}class i1t{constructor(a,l,h){this.id=a,this.addr=h,this.cache=[],this.size=l.size,this.setValue=function t1t(c){switch(c){case 5126:return L_t;case 35664:return N_t;case 35665:return B_t;case 35666:return V_t;case 35674:return U_t;case 35675:return z_t;case 35676:return H_t;case 5124:case 35670:return $_t;case 35667:case 35671:return W_t;case 35668:case 35672:return G_t;case 35669:case 35673:return Q_t;case 5125:return j_t;case 36294:return Z_t;case 36295:return q_t;case 36296:return X_t;case 35678:case 36198:case 36298:case 36306:case 35682:return Y_t;case 35679:case 36299:case 36307:return K_t;case 35680:case 36300:case 36308:case 36293:return J_t;case 36289:case 36303:case 36311:case 36292:return e1t}}(l.type)}}class r1t{constructor(a){this.id=a,this.seq=[],this.map={}}setValue(a,l,h){const d=this.seq;for(let f=0,p=d.length;f!==p;++f){const g=d[f];g.setValue(a,l[g.id],h)}}}const IW=/(\w+)(\])?(\[|\.)?/g;function D1e(c,a){c.seq.push(a),c.map[a.id]=a}function s1t(c,a,l){const h=c.name,d=h.length;for(IW.lastIndex=0;;){const f=IW.exec(h);let g=f[1];const v=f[3];if("]"===f[2]&&(g|=0),void 0===v||"["===v&&IW.lastIndex+2===d){D1e(l,void 0===v?new n1t(g,c,a):new i1t(g,c,a));break}{let _=l.map[g];void 0===_&&(_=new r1t(g),D1e(l,_)),l=_}}}class DI{constructor(a,l){this.seq=[],this.map={};const h=a.getProgramParameter(l,35718);for(let d=0;d<h;++d){const f=a.getActiveUniform(l,d);s1t(f,a.getUniformLocation(l,f.name),this)}}setValue(a,l,h,d){const f=this.map[l];void 0!==f&&f.setValue(a,h,d)}setOptional(a,l,h){const d=l[h];void 0!==d&&this.setValue(a,h,d)}static upload(a,l,h,d){for(let f=0,p=l.length;f!==p;++f){const g=l[f],m=h[g.id];!1!==m.needsUpdate&&g.setValue(a,m.value,d)}}static seqWithValue(a,l){const h=[];for(let d=0,f=a.length;d!==f;++d){const p=a[d];p.id in l&&h.push(p)}return h}}function T1e(c,a,l){const h=c.createShader(a);return c.shaderSource(h,l),c.compileShader(h),h}let o1t=0;function k1e(c,a,l){const h=c.getShaderParameter(a,35713),d=c.getShaderInfoLog(a).trim();if(h&&""===d)return"";const f=/ERROR: 0:(\d+)/.exec(d);if(f){const p=parseInt(f[1]);return l.toUpperCase()+"\n\n"+d+"\n\n"+function a1t(c,a){const l=c.split("\n"),h=[],d=Math.max(a-6,0),f=Math.min(a+6,l.length);for(let p=d;p<f;p++){const g=p+1;h.push(`${g===a?">":" "} ${g}: ${l[p]}`)}return h.join("\n")}(c.getShaderSource(a),p)}return d}function c1t(c,a){const l=function l1t(c){switch(c){case hv:return["Linear","( value )"];case zs:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",c),["Linear","( value )"]}}(a);return"vec4 "+c+"( vec4 value ) { return LinearTo"+l[0]+l[1]+"; }"}function u1t(c,a){let l;switch(a){case 1:l="Linear";break;case 2:l="Reinhard";break;case 3:l="OptimizedCineon";break;case 4:l="ACESFilmic";break;case 5:l="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),l="Linear"}return"vec3 "+c+"( vec3 color ) { return "+l+"ToneMapping( color ); }"}function r2(c){return""!==c}function M1e(c,a){return c.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function E1e(c,a){return c.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}const p1t=/^[ \t]*#include +<([\w\d./]+)>/gm;function PW(c){return c.replace(p1t,g1t)}function g1t(c,a){const l=ur[a];if(void 0===l)throw new Error("Can not resolve #include <"+a+">");return PW(l)}const m1t=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,v1t=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function A1e(c){return c.replace(v1t,I1e).replace(m1t,y1t)}function y1t(c,a,l,h){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),I1e(0,a,l,h)}function I1e(c,a,l,h){let d="";for(let f=parseInt(a);f<parseInt(l);f++)d+=h.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return d}function P1e(c){let a="precision "+c.precision+" float;\nprecision "+c.precision+" int;";return"highp"===c.precision?a+="\n#define HIGH_PRECISION":"mediump"===c.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(a+="\n#define LOW_PRECISION"),a}function w1t(c,a,l,h){const d=c.getContext(),f=l.defines;let p=l.vertexShader,g=l.fragmentShader;const m=function _1t(c){let a="SHADOWMAP_TYPE_BASIC";return 1===c.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===c.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===c.shadowMapType&&(a="SHADOWMAP_TYPE_VSM"),a}(l),v=function b1t(c){let a="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case 301:case 302:a="ENVMAP_TYPE_CUBE";break;case 306:a="ENVMAP_TYPE_CUBE_UV"}return a}(l),y=function C1t(c){let a="ENVMAP_MODE_REFLECTION";return c.envMap&&302===c.envMapMode&&(a="ENVMAP_MODE_REFRACTION"),a}(l),_=function S1t(c){let a="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}(l),b=function x1t(c){const a=c.envMapCubeUVHeight;if(null===a)return null;const l=Math.log2(a)-2,h=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,l),112)),texelHeight:h,maxMip:l}}(l),C=l.isWebGL2?"":function h1t(c){return[c.extensionDerivatives||c.envMapCubeUVHeight||c.bumpMap||c.tangentSpaceNormalMap||c.clearcoatNormalMap||c.flatShading||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(r2).join("\n")}(l),x=function d1t(c){const a=[];for(const l in c){const h=c[l];!1!==h&&a.push("#define "+l+" "+h)}return a.join("\n")}(f),w=d.createProgram();let O,D,T=l.glslVersion?"#version "+l.glslVersion+"\n":"";l.isRawShaderMaterial?(O=[x].filter(r2).join("\n"),O.length>0&&(O+="\n"),D=[C,x].filter(r2).join("\n"),D.length>0&&(D+="\n")):(O=[P1e(l),"#define SHADER_NAME "+l.shaderName,x,l.instancing?"#define USE_INSTANCING":"",l.instancingColor?"#define USE_INSTANCING_COLOR":"",l.supportsVertexTextures?"#define VERTEX_TEXTURES":"",l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+y:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.displacementMap&&l.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",l.specularColorMap?"#define USE_SPECULARCOLORMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.sheenColorMap?"#define USE_SHEENCOLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&!1===l.flatShading?"#define USE_MORPHNORMALS":"",l.morphColors&&l.isWebGL2?"#define USE_MORPHCOLORS":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+l.morphTextureStride:"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_COUNT "+l.morphTargetsCount:"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+m:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(r2).join("\n"),D=[C,P1e(l),"#define SHADER_NAME "+l.shaderName,x,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.matcap?"#define USE_MATCAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+v:"",l.envMap?"#define "+y:"",l.envMap?"#define "+_:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoat?"#define USE_CLEARCOAT":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescence?"#define USE_IRIDESCENCE":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",l.specularColorMap?"#define USE_SPECULARCOLORMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.alphaTest?"#define USE_ALPHATEST":"",l.sheen?"#define USE_SHEEN":"",l.sheenColorMap?"#define USE_SHEENCOLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors||l.instancingColor?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.gradientMap?"#define USE_GRADIENTMAP":"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+m:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==l.toneMapping?"#define TONE_MAPPING":"",0!==l.toneMapping?ur.tonemapping_pars_fragment:"",0!==l.toneMapping?u1t("toneMapping",l.toneMapping):"",l.dithering?"#define DITHERING":"",l.opaque?"#define OPAQUE":"",ur.encodings_pars_fragment,c1t("linearToOutputTexel",l.outputEncoding),l.useDepthPacking?"#define DEPTH_PACKING "+l.depthPacking:"","\n"].filter(r2).join("\n")),p=PW(p),p=M1e(p,l),p=E1e(p,l),g=PW(g),g=M1e(g,l),g=E1e(g,l),p=A1e(p),g=A1e(g),l.isWebGL2&&!0!==l.isRawShaderMaterial&&(T="#version 300 es\n",O=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+O,D=["#define varying in","300 es"===l.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===l.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+D);const k=T+D+g,E=T1e(d,35633,T+O+p),P=T1e(d,35632,k);if(d.attachShader(w,E),d.attachShader(w,P),void 0!==l.index0AttributeName?d.bindAttribLocation(w,0,l.index0AttributeName):!0===l.morphTargets&&d.bindAttribLocation(w,0,"position"),d.linkProgram(w),c.debug.checkShaderErrors){const U=d.getProgramInfoLog(w).trim(),$=d.getShaderInfoLog(E).trim(),H=d.getShaderInfoLog(P).trim();let J=!0,ee=!0;if(!1===d.getProgramParameter(w,35714)){J=!1;const B=k1e(d,E,"vertex"),G=k1e(d,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(w,35715)+"\n\nProgram Info Log: "+U+"\n"+B+"\n"+G)}else""!==U?console.warn("THREE.WebGLProgram: Program Info Log:",U):(""===$||""===H)&&(ee=!1);ee&&(this.diagnostics={runnable:J,programLog:U,vertexShader:{log:$,prefix:O},fragmentShader:{log:H,prefix:D}})}let V,I;return d.deleteShader(E),d.deleteShader(P),this.getUniforms=function(){return void 0===V&&(V=new DI(d,w)),V},this.getAttributes=function(){return void 0===I&&(I=function f1t(c,a){const l={},h=c.getProgramParameter(a,35721);for(let d=0;d<h;d++){const f=c.getActiveAttrib(a,d),p=f.name;let g=1;35674===f.type&&(g=2),35675===f.type&&(g=3),35676===f.type&&(g=4),l[p]={type:f.type,location:c.getAttribLocation(a,p),locationSize:g}}return l}(d,w)),I},this.destroy=function(){h.releaseStatesOfProgram(this),d.deleteProgram(w),this.program=void 0},this.name=l.shaderName,this.id=o1t++,this.cacheKey=a,this.usedTimes=1,this.program=w,this.vertexShader=E,this.fragmentShader=P,this}let O1t=0;class D1t{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(a){const h=a.fragmentShader,d=this._getShaderStage(a.vertexShader),f=this._getShaderStage(h),p=this._getShaderCacheForMaterial(a);return!1===p.has(d)&&(p.add(d),d.usedTimes++),!1===p.has(f)&&(p.add(f),f.usedTimes++),this}remove(a){const l=this.materialCache.get(a);for(const h of l)h.usedTimes--,0===h.usedTimes&&this.shaderCache.delete(h.code);return this.materialCache.delete(a),this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(a){const l=this.materialCache;return!1===l.has(a)&&l.set(a,new Set),l.get(a)}_getShaderStage(a){const l=this.shaderCache;if(!1===l.has(a)){const h=new T1t(a);l.set(a,h)}return l.get(a)}}class T1t{constructor(a){this.id=O1t++,this.code=a,this.usedTimes=0}}function k1t(c,a,l,h,d,f,p){const g=new pW,m=new D1t,v=[],y=d.isWebGL2,_=d.logarithmicDepthBuffer,b=d.vertexTextures;let C=d.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function w(I,U,$,H,J){const ee=H.fog,B=J.geometry,W=(I.isMeshStandardMaterial?l:a).get(I.envMap||(I.isMeshStandardMaterial?H.environment:null)),j=W&&306===W.mapping?W.image.height:null,Q=x[I.type];null!==I.precision&&(C=d.getMaxPrecision(I.precision),C!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",C,"instead."));const X=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,Y=void 0!==X?X.length:0;let re,fe,de,De,ne=0;if(void 0!==B.morphAttributes.position&&(ne=1),void 0!==B.morphAttributes.normal&&(ne=2),void 0!==B.morphAttributes.color&&(ne=3),Q){const it=Kd[Q];re=it.vertexShader,fe=it.fragmentShader}else re=I.vertexShader,fe=I.fragmentShader,m.update(I),de=m.getVertexShaderID(I),De=m.getFragmentShaderID(I);const we=c.getRenderTarget(),qe=I.clearcoat>0,Le=I.iridescence>0;return{isWebGL2:y,shaderID:Q,shaderName:I.type,vertexShader:re,fragmentShader:fe,defines:I.defines,customVertexShaderID:de,customFragmentShaderID:De,isRawShaderMaterial:!0===I.isRawShaderMaterial,glslVersion:I.glslVersion,precision:C,instancing:!0===J.isInstancedMesh,instancingColor:!0===J.isInstancedMesh&&null!==J.instanceColor,supportsVertexTextures:b,outputEncoding:null===we?c.outputEncoding:!0===we.isXRRenderTarget?we.texture.encoding:hv,map:!!I.map,matcap:!!I.matcap,envMap:!!W,envMapMode:W&&W.mapping,envMapCubeUVHeight:j,lightMap:!!I.lightMap,aoMap:!!I.aoMap,emissiveMap:!!I.emissiveMap,bumpMap:!!I.bumpMap,normalMap:!!I.normalMap,objectSpaceNormalMap:1===I.normalMapType,tangentSpaceNormalMap:0===I.normalMapType,decodeVideoTexture:!!I.map&&!0===I.map.isVideoTexture&&I.map.encoding===zs,clearcoat:qe,clearcoatMap:qe&&!!I.clearcoatMap,clearcoatRoughnessMap:qe&&!!I.clearcoatRoughnessMap,clearcoatNormalMap:qe&&!!I.clearcoatNormalMap,iridescence:Le,iridescenceMap:Le&&!!I.iridescenceMap,iridescenceThicknessMap:Le&&!!I.iridescenceThicknessMap,displacementMap:!!I.displacementMap,roughnessMap:!!I.roughnessMap,metalnessMap:!!I.metalnessMap,specularMap:!!I.specularMap,specularIntensityMap:!!I.specularIntensityMap,specularColorMap:!!I.specularColorMap,opaque:!1===I.transparent&&1===I.blending,alphaMap:!!I.alphaMap,alphaTest:I.alphaTest>0,gradientMap:!!I.gradientMap,sheen:I.sheen>0,sheenColorMap:!!I.sheenColorMap,sheenRoughnessMap:!!I.sheenRoughnessMap,transmission:I.transmission>0,transmissionMap:!!I.transmissionMap,thicknessMap:!!I.thicknessMap,combine:I.combine,vertexTangents:!!I.normalMap&&!!B.attributes.tangent,vertexColors:I.vertexColors,vertexAlphas:!0===I.vertexColors&&!!B.attributes.color&&4===B.attributes.color.itemSize,vertexUvs:!!(I.map||I.bumpMap||I.normalMap||I.specularMap||I.alphaMap||I.emissiveMap||I.roughnessMap||I.metalnessMap||I.clearcoatMap||I.clearcoatRoughnessMap||I.clearcoatNormalMap||I.iridescenceMap||I.iridescenceThicknessMap||I.displacementMap||I.transmissionMap||I.thicknessMap||I.specularIntensityMap||I.specularColorMap||I.sheenColorMap||I.sheenRoughnessMap),uvsVertexOnly:!(I.map||I.bumpMap||I.normalMap||I.specularMap||I.alphaMap||I.emissiveMap||I.roughnessMap||I.metalnessMap||I.clearcoatNormalMap||I.iridescenceMap||I.iridescenceThicknessMap||I.transmission>0||I.transmissionMap||I.thicknessMap||I.specularIntensityMap||I.specularColorMap||I.sheen>0||I.sheenColorMap||I.sheenRoughnessMap||!I.displacementMap),fog:!!ee,useFog:!0===I.fog,fogExp2:ee&&ee.isFogExp2,flatShading:!!I.flatShading,sizeAttenuation:I.sizeAttenuation,logarithmicDepthBuffer:_,skinning:!0===J.isSkinnedMesh,morphTargets:void 0!==B.morphAttributes.position,morphNormals:void 0!==B.morphAttributes.normal,morphColors:void 0!==B.morphAttributes.color,morphTargetsCount:Y,morphTextureStride:ne,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:I.dithering,shadowMapEnabled:c.shadowMap.enabled&&$.length>0,shadowMapType:c.shadowMap.type,toneMapping:I.toneMapped?c.toneMapping:0,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:I.premultipliedAlpha,doubleSided:2===I.side,flipSided:1===I.side,useDepthPacking:!!I.depthPacking,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:I.extensions&&I.extensions.derivatives,extensionFragDepth:I.extensions&&I.extensions.fragDepth,extensionDrawBuffers:I.extensions&&I.extensions.drawBuffers,extensionShaderTextureLOD:I.extensions&&I.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||h.has("EXT_shader_texture_lod"),customProgramCacheKey:I.customProgramCacheKey()}},getProgramCacheKey:function O(I){const U=[];if(I.shaderID?U.push(I.shaderID):(U.push(I.customVertexShaderID),U.push(I.customFragmentShaderID)),void 0!==I.defines)for(const $ in I.defines)U.push($),U.push(I.defines[$]);return!1===I.isRawShaderMaterial&&(function D(I,U){I.push(U.precision),I.push(U.outputEncoding),I.push(U.envMapMode),I.push(U.envMapCubeUVHeight),I.push(U.combine),I.push(U.vertexUvs),I.push(U.fogExp2),I.push(U.sizeAttenuation),I.push(U.morphTargetsCount),I.push(U.morphAttributeCount),I.push(U.numDirLights),I.push(U.numPointLights),I.push(U.numSpotLights),I.push(U.numHemiLights),I.push(U.numRectAreaLights),I.push(U.numDirLightShadows),I.push(U.numPointLightShadows),I.push(U.numSpotLightShadows),I.push(U.shadowMapType),I.push(U.toneMapping),I.push(U.numClippingPlanes),I.push(U.numClipIntersection),I.push(U.depthPacking)}(U,I),function T(I,U){g.disableAll(),U.isWebGL2&&g.enable(0),U.supportsVertexTextures&&g.enable(1),U.instancing&&g.enable(2),U.instancingColor&&g.enable(3),U.map&&g.enable(4),U.matcap&&g.enable(5),U.envMap&&g.enable(6),U.lightMap&&g.enable(7),U.aoMap&&g.enable(8),U.emissiveMap&&g.enable(9),U.bumpMap&&g.enable(10),U.normalMap&&g.enable(11),U.objectSpaceNormalMap&&g.enable(12),U.tangentSpaceNormalMap&&g.enable(13),U.clearcoat&&g.enable(14),U.clearcoatMap&&g.enable(15),U.clearcoatRoughnessMap&&g.enable(16),U.clearcoatNormalMap&&g.enable(17),U.iridescence&&g.enable(18),U.iridescenceMap&&g.enable(19),U.iridescenceThicknessMap&&g.enable(20),U.displacementMap&&g.enable(21),U.specularMap&&g.enable(22),U.roughnessMap&&g.enable(23),U.metalnessMap&&g.enable(24),U.gradientMap&&g.enable(25),U.alphaMap&&g.enable(26),U.alphaTest&&g.enable(27),U.vertexColors&&g.enable(28),U.vertexAlphas&&g.enable(29),U.vertexUvs&&g.enable(30),U.vertexTangents&&g.enable(31),U.uvsVertexOnly&&g.enable(32),U.fog&&g.enable(33),I.push(g.mask),g.disableAll(),U.useFog&&g.enable(0),U.flatShading&&g.enable(1),U.logarithmicDepthBuffer&&g.enable(2),U.skinning&&g.enable(3),U.morphTargets&&g.enable(4),U.morphNormals&&g.enable(5),U.morphColors&&g.enable(6),U.premultipliedAlpha&&g.enable(7),U.shadowMapEnabled&&g.enable(8),U.physicallyCorrectLights&&g.enable(9),U.doubleSided&&g.enable(10),U.flipSided&&g.enable(11),U.useDepthPacking&&g.enable(12),U.dithering&&g.enable(13),U.specularIntensityMap&&g.enable(14),U.specularColorMap&&g.enable(15),U.transmission&&g.enable(16),U.transmissionMap&&g.enable(17),U.thicknessMap&&g.enable(18),U.sheen&&g.enable(19),U.sheenColorMap&&g.enable(20),U.sheenRoughnessMap&&g.enable(21),U.decodeVideoTexture&&g.enable(22),U.opaque&&g.enable(23),I.push(g.mask)}(U,I),U.push(c.outputEncoding)),U.push(I.customProgramCacheKey),U.join()},getUniforms:function M(I){const U=x[I.type];let $;return $=U?CI.clone(Kd[U].uniforms):I.uniforms,$},acquireProgram:function k(I,U){let $;for(let H=0,J=v.length;H<J;H++){const ee=v[H];if(ee.cacheKey===U){$=ee,++$.usedTimes;break}}return void 0===$&&($=new w1t(c,U,I,f),v.push($)),$},releaseProgram:function E(I){if(0==--I.usedTimes){const U=v.indexOf(I);v[U]=v[v.length-1],v.pop(),I.destroy()}},releaseShaderCache:function P(I){m.remove(I)},programs:v,dispose:function V(){m.dispose()}}}function M1t(){let c=new WeakMap;return{get:function a(f){let p=c.get(f);return void 0===p&&(p={},c.set(f,p)),p},remove:function l(f){c.delete(f)},update:function h(f,p,g){c.get(f)[p]=g},dispose:function d(){c=new WeakMap}}}function E1t(c,a){return c.groupOrder!==a.groupOrder?c.groupOrder-a.groupOrder:c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.material.id!==a.material.id?c.material.id-a.material.id:c.z!==a.z?c.z-a.z:c.id-a.id}function R1e(c,a){return c.groupOrder!==a.groupOrder?c.groupOrder-a.groupOrder:c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.z!==a.z?a.z-c.z:c.id-a.id}function F1e(){const c=[];let a=0;const l=[],h=[],d=[];function p(_,b,C,x,w,O){let D=c[a];return void 0===D?(D={id:_.id,object:_,geometry:b,material:C,groupOrder:x,renderOrder:_.renderOrder,z:w,group:O},c[a]=D):(D.id=_.id,D.object=_,D.geometry=b,D.material=C,D.groupOrder=x,D.renderOrder=_.renderOrder,D.z=w,D.group=O),a++,D}return{opaque:l,transmissive:h,transparent:d,init:function f(){a=0,l.length=0,h.length=0,d.length=0},push:function g(_,b,C,x,w,O){const D=p(_,b,C,x,w,O);C.transmission>0?h.push(D):!0===C.transparent?d.push(D):l.push(D)},unshift:function m(_,b,C,x,w,O){const D=p(_,b,C,x,w,O);C.transmission>0?h.unshift(D):!0===C.transparent?d.unshift(D):l.unshift(D)},finish:function y(){for(let _=a,b=c.length;_<b;_++){const C=c[_];if(null===C.id)break;C.id=null,C.object=null,C.geometry=null,C.material=null,C.group=null}},sort:function v(_,b){l.length>1&&l.sort(_||E1t),h.length>1&&h.sort(b||R1e),d.length>1&&d.sort(b||R1e)}}}function A1t(){let c=new WeakMap;return{get:function a(h,d){let f;return!1===c.has(h)?(f=new F1e,c.set(h,[f])):d>=c.get(h).length?(f=new F1e,c.get(h).push(f)):f=c.get(h)[d],f},dispose:function l(){c=new WeakMap}}}function I1t(){const c={};return{get:function(a){if(void 0!==c[a.id])return c[a.id];let l;switch(a.type){case"DirectionalLight":l={direction:new ae,color:new pn};break;case"SpotLight":l={position:new ae,direction:new ae,color:new pn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":l={position:new ae,color:new pn,distance:0,decay:0};break;case"HemisphereLight":l={direction:new ae,skyColor:new pn,groundColor:new pn};break;case"RectAreaLight":l={color:new pn,position:new ae,halfWidth:new ae,halfHeight:new ae}}return c[a.id]=l,l}}}let R1t=0;function F1t(c,a){return(a.castShadow?1:0)-(c.castShadow?1:0)}function L1t(c,a){const l=new I1t,h=function P1t(){const c={};return{get:function(a){if(void 0!==c[a.id])return c[a.id];let l;switch(a.type){case"DirectionalLight":case"SpotLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt};break;case"PointLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt,shadowCameraNear:1,shadowCameraFar:1e3}}return c[a.id]=l,l}}}(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let y=0;y<9;y++)d.probe.push(new ae);const f=new ae,p=new Oi,g=new Oi;return{setup:function m(y,_){let b=0,C=0,x=0;for(let U=0;U<9;U++)d.probe[U].set(0,0,0);let w=0,O=0,D=0,T=0,M=0,k=0,E=0,P=0;y.sort(F1t);const V=!0!==_?Math.PI:1;for(let U=0,$=y.length;U<$;U++){const H=y[U],J=H.color,ee=H.intensity,B=H.distance,G=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)b+=J.r*ee*V,C+=J.g*ee*V,x+=J.b*ee*V;else if(H.isLightProbe)for(let W=0;W<9;W++)d.probe[W].addScaledVector(H.sh.coefficients[W],ee);else if(H.isDirectionalLight){const W=l.get(H);if(W.color.copy(H.color).multiplyScalar(H.intensity*V),H.castShadow){const j=H.shadow,Q=h.get(H);Q.shadowBias=j.bias,Q.shadowNormalBias=j.normalBias,Q.shadowRadius=j.radius,Q.shadowMapSize=j.mapSize,d.directionalShadow[w]=Q,d.directionalShadowMap[w]=G,d.directionalShadowMatrix[w]=H.shadow.matrix,k++}d.directional[w]=W,w++}else if(H.isSpotLight){const W=l.get(H);if(W.position.setFromMatrixPosition(H.matrixWorld),W.color.copy(J).multiplyScalar(ee*V),W.distance=B,W.coneCos=Math.cos(H.angle),W.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),W.decay=H.decay,H.castShadow){const j=H.shadow,Q=h.get(H);Q.shadowBias=j.bias,Q.shadowNormalBias=j.normalBias,Q.shadowRadius=j.radius,Q.shadowMapSize=j.mapSize,d.spotShadow[D]=Q,d.spotShadowMap[D]=G,d.spotShadowMatrix[D]=H.shadow.matrix,P++}d.spot[D]=W,D++}else if(H.isRectAreaLight){const W=l.get(H);W.color.copy(J).multiplyScalar(ee),W.halfWidth.set(.5*H.width,0,0),W.halfHeight.set(0,.5*H.height,0),d.rectArea[T]=W,T++}else if(H.isPointLight){const W=l.get(H);if(W.color.copy(H.color).multiplyScalar(H.intensity*V),W.distance=H.distance,W.decay=H.decay,H.castShadow){const j=H.shadow,Q=h.get(H);Q.shadowBias=j.bias,Q.shadowNormalBias=j.normalBias,Q.shadowRadius=j.radius,Q.shadowMapSize=j.mapSize,Q.shadowCameraNear=j.camera.near,Q.shadowCameraFar=j.camera.far,d.pointShadow[O]=Q,d.pointShadowMap[O]=G,d.pointShadowMatrix[O]=H.shadow.matrix,E++}d.point[O]=W,O++}else if(H.isHemisphereLight){const W=l.get(H);W.skyColor.copy(H.color).multiplyScalar(ee*V),W.groundColor.copy(H.groundColor).multiplyScalar(ee*V),d.hemi[M]=W,M++}}T>0&&(a.isWebGL2||!0===c.has("OES_texture_float_linear")?(d.rectAreaLTC1=fn.LTC_FLOAT_1,d.rectAreaLTC2=fn.LTC_FLOAT_2):!0===c.has("OES_texture_half_float_linear")?(d.rectAreaLTC1=fn.LTC_HALF_1,d.rectAreaLTC2=fn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=b,d.ambient[1]=C,d.ambient[2]=x;const I=d.hash;(I.directionalLength!==w||I.pointLength!==O||I.spotLength!==D||I.rectAreaLength!==T||I.hemiLength!==M||I.numDirectionalShadows!==k||I.numPointShadows!==E||I.numSpotShadows!==P)&&(d.directional.length=w,d.spot.length=D,d.rectArea.length=T,d.point.length=O,d.hemi.length=M,d.directionalShadow.length=k,d.directionalShadowMap.length=k,d.pointShadow.length=E,d.pointShadowMap.length=E,d.spotShadow.length=P,d.spotShadowMap.length=P,d.directionalShadowMatrix.length=k,d.pointShadowMatrix.length=E,d.spotShadowMatrix.length=P,I.directionalLength=w,I.pointLength=O,I.spotLength=D,I.rectAreaLength=T,I.hemiLength=M,I.numDirectionalShadows=k,I.numPointShadows=E,I.numSpotShadows=P,d.version=R1t++)},setupView:function v(y,_){let b=0,C=0,x=0,w=0,O=0;const D=_.matrixWorldInverse;for(let T=0,M=y.length;T<M;T++){const k=y[T];if(k.isDirectionalLight){const E=d.directional[b];E.direction.setFromMatrixPosition(k.matrixWorld),f.setFromMatrixPosition(k.target.matrixWorld),E.direction.sub(f),E.direction.transformDirection(D),b++}else if(k.isSpotLight){const E=d.spot[x];E.position.setFromMatrixPosition(k.matrixWorld),E.position.applyMatrix4(D),E.direction.setFromMatrixPosition(k.matrixWorld),f.setFromMatrixPosition(k.target.matrixWorld),E.direction.sub(f),E.direction.transformDirection(D),x++}else if(k.isRectAreaLight){const E=d.rectArea[w];E.position.setFromMatrixPosition(k.matrixWorld),E.position.applyMatrix4(D),g.identity(),p.copy(k.matrixWorld),p.premultiply(D),g.extractRotation(p),E.halfWidth.set(.5*k.width,0,0),E.halfHeight.set(0,.5*k.height,0),E.halfWidth.applyMatrix4(g),E.halfHeight.applyMatrix4(g),w++}else if(k.isPointLight){const E=d.point[C];E.position.setFromMatrixPosition(k.matrixWorld),E.position.applyMatrix4(D),C++}else if(k.isHemisphereLight){const E=d.hemi[O];E.direction.setFromMatrixPosition(k.matrixWorld),E.direction.transformDirection(D),O++}}},state:d}}function L1e(c,a){const l=new L1t(c,a),h=[],d=[];return{init:function f(){h.length=0,d.length=0},state:{lightsArray:h,shadowsArray:d,lights:l},setupLights:function m(_){l.setup(h,_)},setupLightsView:function v(_){l.setupView(h,_)},pushLight:function p(_){h.push(_)},pushShadow:function g(_){d.push(_)}}}function N1t(c,a){let l=new WeakMap;return{get:function h(f,p=0){let g;return!1===l.has(f)?(g=new L1e(c,a),l.set(f,[g])):p>=l.get(f).length?(g=new L1e(c,a),l.get(f).push(g)):g=l.get(f)[p],g},dispose:function d(){l=new WeakMap}}}class RW extends yv{constructor(a){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(a)}copy(a){return super.copy(a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}class N1e extends yv{constructor(a){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ae,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(a)}copy(a){return super.copy(a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}function U1t(c,a,l){let h=new TW;const d=new yt,f=new yt,p=new pr,g=new RW({depthPacking:3201}),m=new N1e,v={},y=l.maxTextureSize,_={0:1,1:0,2:2},b=new Ya({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),C=b.clone();C.defines.HORIZONTAL_PASS=1;const x=new $i;x.setAttribute("position",new Hs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new fr(x,b),O=this;function D(k,E){const P=a.update(w);b.defines.VSM_SAMPLES!==k.blurSamples&&(b.defines.VSM_SAMPLES=k.blurSamples,C.defines.VSM_SAMPLES=k.blurSamples,b.needsUpdate=!0,C.needsUpdate=!0),null===k.mapPass&&(k.mapPass=new Fl(d.x,d.y)),b.uniforms.shadow_pass.value=k.map.texture,b.uniforms.resolution.value=k.mapSize,b.uniforms.radius.value=k.radius,c.setRenderTarget(k.mapPass),c.clear(),c.renderBufferDirect(E,null,P,b,w,null),C.uniforms.shadow_pass.value=k.mapPass.texture,C.uniforms.resolution.value=k.mapSize,C.uniforms.radius.value=k.radius,c.setRenderTarget(k.map),c.clear(),c.renderBufferDirect(E,null,P,C,w,null)}function T(k,E,P,V,I,U){let $=null;const H=!0===P.isPointLight?k.customDistanceMaterial:k.customDepthMaterial;if($=void 0!==H?H:!0===P.isPointLight?m:g,c.localClippingEnabled&&!0===E.clipShadows&&Array.isArray(E.clippingPlanes)&&0!==E.clippingPlanes.length||E.displacementMap&&0!==E.displacementScale||E.alphaMap&&E.alphaTest>0){const J=$.uuid,ee=E.uuid;let B=v[J];void 0===B&&(B={},v[J]=B);let G=B[ee];void 0===G&&(G=$.clone(),B[ee]=G),$=G}return $.visible=E.visible,$.wireframe=E.wireframe,$.side=3===U?null!==E.shadowSide?E.shadowSide:E.side:null!==E.shadowSide?E.shadowSide:_[E.side],$.alphaMap=E.alphaMap,$.alphaTest=E.alphaTest,$.clipShadows=E.clipShadows,$.clippingPlanes=E.clippingPlanes,$.clipIntersection=E.clipIntersection,$.displacementMap=E.displacementMap,$.displacementScale=E.displacementScale,$.displacementBias=E.displacementBias,$.wireframeLinewidth=E.wireframeLinewidth,$.linewidth=E.linewidth,!0===P.isPointLight&&!0===$.isMeshDistanceMaterial&&($.referencePosition.setFromMatrixPosition(P.matrixWorld),$.nearDistance=V,$.farDistance=I),$}function M(k,E,P,V,I){if(!1===k.visible)return;if(k.layers.test(E.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&3===I)&&(!k.frustumCulled||h.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,k.matrixWorld);const H=a.update(k),J=k.material;if(Array.isArray(J)){const ee=H.groups;for(let B=0,G=ee.length;B<G;B++){const W=ee[B],j=J[W.materialIndex];if(j&&j.visible){const Q=T(k,j,V,P.near,P.far,I);c.renderBufferDirect(P,null,H,Q,k,W)}}}else if(J.visible){const ee=T(k,J,V,P.near,P.far,I);c.renderBufferDirect(P,null,H,ee,k,null)}}const $=k.children;for(let H=0,J=$.length;H<J;H++)M($[H],E,P,V,I)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(k,E,P){if(!1===O.enabled||!1===O.autoUpdate&&!1===O.needsUpdate||0===k.length)return;const V=c.getRenderTarget(),I=c.getActiveCubeFace(),U=c.getActiveMipmapLevel(),$=c.state;$.setBlending(0),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);for(let H=0,J=k.length;H<J;H++){const ee=k[H],B=ee.shadow;if(void 0===B){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(!1===B.autoUpdate&&!1===B.needsUpdate)continue;d.copy(B.mapSize);const G=B.getFrameExtents();d.multiply(G),f.copy(B.mapSize),(d.x>y||d.y>y)&&(d.x>y&&(f.x=Math.floor(y/G.x),d.x=f.x*G.x,B.mapSize.x=f.x),d.y>y&&(f.y=Math.floor(y/G.y),d.y=f.y*G.y,B.mapSize.y=f.y)),null===B.map&&(B.map=new Fl(d.x,d.y,3!==this.type?{minFilter:Zo,magFilter:Zo}:{}),B.map.texture.name=ee.name+".shadowMap",B.camera.updateProjectionMatrix()),c.setRenderTarget(B.map),c.clear();const W=B.getViewportCount();for(let j=0;j<W;j++){const Q=B.getViewport(j);p.set(f.x*Q.x,f.y*Q.y,f.x*Q.z,f.y*Q.w),$.viewport(p),B.updateMatrices(ee,j),h=B.getFrustum(),M(E,P,B.camera,ee,this.type)}!0!==B.isPointLightShadow&&3===this.type&&D(B,P),B.needsUpdate=!1}O.needsUpdate=!1,c.setRenderTarget(V,I,U)}}function z1t(c,a,l){const h=l.isWebGL2,g=new function d(){let Be=!1;const hn=new pr;let an=null;const Si=new pr(0,0,0,0);return{setMask:function(zn){an!==zn&&!Be&&(c.colorMask(zn,zn,zn,zn),an=zn)},setLocked:function(zn){Be=zn},setClear:function(zn,Pi,on,Ri,zr){!0===zr&&(zn*=Ri,Pi*=Ri,on*=Ri),hn.set(zn,Pi,on,Ri),!1===Si.equals(hn)&&(c.clearColor(zn,Pi,on,Ri),Si.copy(hn))},reset:function(){Be=!1,an=null,Si.set(-1,0,0,0)}}},m=new function f(){let Be=!1,hn=null,an=null,Si=null;return{setTest:function(zn){zn?De(2929):we(2929)},setMask:function(zn){hn!==zn&&!Be&&(c.depthMask(zn),hn=zn)},setFunc:function(zn){if(an!==zn){if(zn)switch(zn){case 0:c.depthFunc(512);break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:default:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517)}else c.depthFunc(515);an=zn}},setLocked:function(zn){Be=zn},setClear:function(zn){Si!==zn&&(c.clearDepth(zn),Si=zn)},reset:function(){Be=!1,hn=null,an=null,Si=null}}},v=new function p(){let Be=!1,hn=null,an=null,Si=null,zn=null,Pi=null,on=null,Ri=null,zr=null;return{setTest:function(Hr){Be||(Hr?De(2960):we(2960))},setMask:function(Hr){hn!==Hr&&!Be&&(c.stencilMask(Hr),hn=Hr)},setFunc:function(Hr,Vl,lf){(an!==Hr||Si!==Vl||zn!==lf)&&(c.stencilFunc(Hr,Vl,lf),an=Hr,Si=Vl,zn=lf)},setOp:function(Hr,Vl,lf){(Pi!==Hr||on!==Vl||Ri!==lf)&&(c.stencilOp(Hr,Vl,lf),Pi=Hr,on=Vl,Ri=lf)},setLocked:function(Hr){Be=Hr},setClear:function(Hr){zr!==Hr&&(c.clearStencil(Hr),zr=Hr)},reset:function(){Be=!1,hn=null,an=null,Si=null,zn=null,Pi=null,on=null,Ri=null,zr=null}}};let y={},_={},b=new WeakMap,C=[],x=null,w=!1,O=null,D=null,T=null,M=null,k=null,E=null,P=null,V=!1,I=null,U=null,$=null,H=null,J=null;const ee=c.getParameter(35661);let B=!1,G=0;const W=c.getParameter(7938);-1!==W.indexOf("WebGL")?(G=parseFloat(/^WebGL (\d)/.exec(W)[1]),B=G>=1):-1!==W.indexOf("OpenGL ES")&&(G=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),B=G>=2);let j=null,Q={};const X=c.getParameter(3088),Y=c.getParameter(2978),ne=(new pr).fromArray(X),re=(new pr).fromArray(Y);function fe(Be,hn,an){const Si=new Uint8Array(4),zn=c.createTexture();c.bindTexture(Be,zn),c.texParameteri(Be,10241,9728),c.texParameteri(Be,10240,9728);for(let Pi=0;Pi<an;Pi++)c.texImage2D(hn+Pi,0,6408,1,1,0,6408,5121,Si);return zn}const de={};function De(Be){!0!==y[Be]&&(c.enable(Be),y[Be]=!0)}function we(Be){!1!==y[Be]&&(c.disable(Be),y[Be]=!1)}de[3553]=fe(3553,3553,1),de[34067]=fe(34067,34069,6),g.setClear(0,0,0,1),m.setClear(1),v.setClear(0),De(2929),m.setFunc(3),st(!1),dt(1),De(2884),ve(0);const ze={100:32774,101:32778,102:32779};if(h)ze[103]=32775,ze[104]=32776;else{const Be=a.get("EXT_blend_minmax");null!==Be&&(ze[103]=Be.MIN_EXT,ze[104]=Be.MAX_EXT)}const it={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ve(Be,hn,an,Si,zn,Pi,on,Ri){if(0!==Be){if(!1===w&&(De(3042),w=!0),5===Be)zn=zn||hn,Pi=Pi||an,on=on||Si,(hn!==D||zn!==k)&&(c.blendEquationSeparate(ze[hn],ze[zn]),D=hn,k=zn),(an!==T||Si!==M||Pi!==E||on!==P)&&(c.blendFuncSeparate(it[an],it[Si],it[Pi],it[on]),T=an,M=Si,E=Pi,P=on),O=Be,V=null;else if(Be!==O||Ri!==V){if((100!==D||100!==k)&&(c.blendEquation(32774),D=100,k=100),Ri)switch(Be){case 1:c.blendFuncSeparate(1,771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be)}else switch(Be){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be)}T=null,M=null,E=null,P=null,O=Be,V=Ri}}else!0===w&&(we(3042),w=!1)}function st(Be){I!==Be&&(c.frontFace(Be?2304:2305),I=Be)}function dt(Be){0!==Be?(De(2884),Be!==U&&c.cullFace(1===Be?1029:2===Be?1028:1032)):we(2884),U=Be}function Ie(Be,hn,an){Be?(De(32823),(H!==hn||J!==an)&&(c.polygonOffset(hn,an),H=hn,J=an)):we(32823)}function Gt(Be){void 0===Be&&(Be=33984+ee-1),j!==Be&&(c.activeTexture(Be),j=Be)}return{buffers:{color:g,depth:m,stencil:v},enable:De,disable:we,bindFramebuffer:function Fe(Be,hn){return _[Be]!==hn&&(c.bindFramebuffer(Be,hn),_[Be]=hn,h&&(36009===Be&&(_[36160]=hn),36160===Be&&(_[36009]=hn)),!0)},drawBuffers:function qe(Be,hn){let an=C,Si=!1;if(Be)if(an=b.get(hn),void 0===an&&(an=[],b.set(hn,an)),Be.isWebGLMultipleRenderTargets){const zn=Be.texture;if(an.length!==zn.length||36064!==an[0]){for(let Pi=0,on=zn.length;Pi<on;Pi++)an[Pi]=36064+Pi;an.length=zn.length,Si=!0}}else 36064!==an[0]&&(an[0]=36064,Si=!0);else 1029!==an[0]&&(an[0]=1029,Si=!0);Si&&(l.isWebGL2?c.drawBuffers(an):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(an))},useProgram:function Le(Be){return x!==Be&&(c.useProgram(Be),x=Be,!0)},setBlending:ve,setMaterial:function Ue(Be,hn){2===Be.side?we(2884):De(2884);let an=1===Be.side;hn&&(an=!an),st(an),1===Be.blending&&!1===Be.transparent?ve(0):ve(Be.blending,Be.blendEquation,Be.blendSrc,Be.blendDst,Be.blendEquationAlpha,Be.blendSrcAlpha,Be.blendDstAlpha,Be.premultipliedAlpha),m.setFunc(Be.depthFunc),m.setTest(Be.depthTest),m.setMask(Be.depthWrite),g.setMask(Be.colorWrite);const Si=Be.stencilWrite;v.setTest(Si),Si&&(v.setMask(Be.stencilWriteMask),v.setFunc(Be.stencilFunc,Be.stencilRef,Be.stencilFuncMask),v.setOp(Be.stencilFail,Be.stencilZFail,Be.stencilZPass)),Ie(Be.polygonOffset,Be.polygonOffsetFactor,Be.polygonOffsetUnits),!0===Be.alphaToCoverage?De(32926):we(32926)},setFlipSided:st,setCullFace:dt,setLineWidth:function tt(Be){Be!==$&&(B&&c.lineWidth(Be),$=Be)},setPolygonOffset:Ie,setScissorTest:function et(Be){Be?De(3089):we(3089)},activeTexture:Gt,bindTexture:function Tn(Be,hn){null===j&&Gt();let an=Q[j];void 0===an&&(an={type:void 0,texture:void 0},Q[j]=an),(an.type!==Be||an.texture!==hn)&&(c.bindTexture(Be,hn||de[Be]),an.type=Be,an.texture=hn)},unbindTexture:function Zn(){const Be=Q[j];void 0!==Be&&void 0!==Be.type&&(c.bindTexture(Be.type,null),Be.type=void 0,Be.texture=void 0)},compressedTexImage2D:function ye(){try{c.compressedTexImage2D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},texImage2D:function Ut(){try{c.texImage2D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},texImage3D:function nt(){try{c.texImage3D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},texStorage2D:function Xt(){try{c.texStorage2D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},texStorage3D:function Vt(){try{c.texStorage3D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},texSubImage2D:function ce(){try{c.texSubImage2D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},texSubImage3D:function ft(){try{c.texSubImage3D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},compressedTexSubImage2D:function Dt(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}},scissor:function rn(Be){!1===ne.equals(Be)&&(c.scissor(Be.x,Be.y,Be.z,Be.w),ne.copy(Be))},viewport:function Kt(Be){!1===re.equals(Be)&&(c.viewport(Be.x,Be.y,Be.z,Be.w),re.copy(Be))},reset:function Cn(){c.disable(3042),c.disable(2884),c.disable(2929),c.disable(32823),c.disable(3089),c.disable(2960),c.disable(32926),c.blendEquation(32774),c.blendFunc(1,0),c.blendFuncSeparate(1,0,1,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(513),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(519,0,4294967295),c.stencilOp(7680,7680,7680),c.clearStencil(0),c.cullFace(1029),c.frontFace(2305),c.polygonOffset(0,0),c.activeTexture(33984),c.bindFramebuffer(36160,null),!0===h&&(c.bindFramebuffer(36009,null),c.bindFramebuffer(36008,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),y={},j=null,Q={},_={},b=new WeakMap,C=[],x=null,w=!1,O=null,D=null,T=null,M=null,k=null,E=null,P=null,V=!1,I=null,U=null,$=null,H=null,J=null,ne.set(0,0,c.canvas.width,c.canvas.height),re.set(0,0,c.canvas.width,c.canvas.height),g.reset(),m.reset(),v.reset()}}}function H1t(c,a,l,h,d,f,p){const g=d.isWebGL2,m=d.maxTextures,v=d.maxCubemapSize,y=d.maxTextureSize,_=d.maxSamples,b=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,C=/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let w;const O=new WeakMap;let D=!1;try{D=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function T(ye,ce){return D?new OffscreenCanvas(ye,ce):KO("canvas")}function M(ye,ce,ft,Dt){let Xt=1;if((ye.width>Dt||ye.height>Dt)&&(Xt=Dt/Math.max(ye.width,ye.height)),Xt<1||!0===ce){if(typeof HTMLImageElement<"u"&&ye instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ye instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ye instanceof ImageBitmap){const Vt=ce?eI:Math.floor,Ut=Vt(Xt*ye.width),nt=Vt(Xt*ye.height);void 0===w&&(w=T(Ut,nt));const rn=ft?T(Ut,nt):w;return rn.width=Ut,rn.height=nt,rn.getContext("2d").drawImage(ye,0,0,Ut,nt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+Ut+"x"+nt+")."),rn}return"data"in ye&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),ye}return ye}function k(ye){return nW(ye.width)&&nW(ye.height)}function P(ye,ce){return ye.generateMipmaps&&ce&&ye.minFilter!==Zo&&ye.minFilter!==Do}function V(ye){c.generateMipmap(ye)}function I(ye,ce,ft,Dt,Xt=!1){if(!1===g)return ce;if(null!==ye){if(void 0!==c[ye])return c[ye];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ye+"'")}let Vt=ce;return 6403===ce&&(5126===ft&&(Vt=33326),5131===ft&&(Vt=33325),5121===ft&&(Vt=33321)),33319===ce&&(5126===ft&&(Vt=33328),5131===ft&&(Vt=33327),5121===ft&&(Vt=33323)),6408===ce&&(5126===ft&&(Vt=34836),5131===ft&&(Vt=34842),5121===ft&&(Vt=Dt===zs&&!1===Xt?35907:32856),32819===ft&&(Vt=32854),32820===ft&&(Vt=32855)),(33325===Vt||33326===Vt||33327===Vt||33328===Vt||34842===Vt||34836===Vt)&&a.get("EXT_color_buffer_float"),Vt}function U(ye,ce,ft){return!0===P(ye,ft)||ye.isFramebufferTexture&&ye.minFilter!==Zo&&ye.minFilter!==Do?Math.log2(Math.max(ce.width,ce.height))+1:void 0!==ye.mipmaps&&ye.mipmaps.length>0?ye.mipmaps.length:ye.isCompressedTexture&&Array.isArray(ye.image)?ce.mipmaps.length:1}function $(ye){return ye===Zo||1004===ye||1005===ye?9728:9729}function H(ye){const ce=ye.target;ce.removeEventListener("dispose",H),function ee(ye){const ce=h.get(ye);if(void 0===ce.__webglInit)return;const ft=ye.source,Dt=O.get(ft);if(Dt){const Xt=Dt[ce.__cacheKey];Xt.usedTimes--,0===Xt.usedTimes&&B(ye),0===Object.keys(Dt).length&&O.delete(ft)}h.remove(ye)}(ce),ce.isVideoTexture&&x.delete(ce)}function J(ye){const ce=ye.target;ce.removeEventListener("dispose",J),function G(ye){const ce=ye.texture,ft=h.get(ye),Dt=h.get(ce);if(void 0!==Dt.__webglTexture&&(c.deleteTexture(Dt.__webglTexture),p.memory.textures--),ye.depthTexture&&ye.depthTexture.dispose(),ye.isWebGLCubeRenderTarget)for(let Xt=0;Xt<6;Xt++)c.deleteFramebuffer(ft.__webglFramebuffer[Xt]),ft.__webglDepthbuffer&&c.deleteRenderbuffer(ft.__webglDepthbuffer[Xt]);else{if(c.deleteFramebuffer(ft.__webglFramebuffer),ft.__webglDepthbuffer&&c.deleteRenderbuffer(ft.__webglDepthbuffer),ft.__webglMultisampledFramebuffer&&c.deleteFramebuffer(ft.__webglMultisampledFramebuffer),ft.__webglColorRenderbuffer)for(let Xt=0;Xt<ft.__webglColorRenderbuffer.length;Xt++)ft.__webglColorRenderbuffer[Xt]&&c.deleteRenderbuffer(ft.__webglColorRenderbuffer[Xt]);ft.__webglDepthRenderbuffer&&c.deleteRenderbuffer(ft.__webglDepthRenderbuffer)}if(ye.isWebGLMultipleRenderTargets)for(let Xt=0,Vt=ce.length;Xt<Vt;Xt++){const Ut=h.get(ce[Xt]);Ut.__webglTexture&&(c.deleteTexture(Ut.__webglTexture),p.memory.textures--),h.remove(ce[Xt])}h.remove(ce),h.remove(ye)}(ce)}function B(ye){const ce=h.get(ye);c.deleteTexture(ce.__webglTexture),delete O.get(ye.source)[ce.__cacheKey],p.memory.textures--}let W=0;function Y(ye,ce){const ft=h.get(ye);if(ye.isVideoTexture&&function Tn(ye){const ce=p.render.frame;x.get(ye)!==ce&&(x.set(ye,ce),ye.update())}(ye),!1===ye.isRenderTargetTexture&&ye.version>0&&ft.__version!==ye.version){const Dt=ye.image;if(null===Dt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Dt.complete)return void qe(ft,ye,ce);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}l.activeTexture(33984+ce),l.bindTexture(3553,ft.__webglTexture)}const de={[ub]:10497,[lc]:33071,1002:33648},De={[Zo]:9728,1004:9984,1005:9986,[Do]:9729,1007:9985,1008:9987};function we(ye,ce,ft){if(ft?(c.texParameteri(ye,10242,de[ce.wrapS]),c.texParameteri(ye,10243,de[ce.wrapT]),(32879===ye||35866===ye)&&c.texParameteri(ye,32882,de[ce.wrapR]),c.texParameteri(ye,10240,De[ce.magFilter]),c.texParameteri(ye,10241,De[ce.minFilter])):(c.texParameteri(ye,10242,33071),c.texParameteri(ye,10243,33071),(32879===ye||35866===ye)&&c.texParameteri(ye,32882,33071),(ce.wrapS!==lc||ce.wrapT!==lc)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),c.texParameteri(ye,10240,$(ce.magFilter)),c.texParameteri(ye,10241,$(ce.minFilter)),ce.minFilter!==Zo&&ce.minFilter!==Do&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){const Dt=a.get("EXT_texture_filter_anisotropic");if(ce.type===jg&&!1===a.has("OES_texture_float_linear")||!1===g&&ce.type===qO&&!1===a.has("OES_texture_half_float_linear"))return;(ce.anisotropy>1||h.get(ce).__currentAnisotropy)&&(c.texParameterf(ye,Dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ce.anisotropy,d.getMaxAnisotropy())),h.get(ce).__currentAnisotropy=ce.anisotropy)}}function Fe(ye,ce){let ft=!1;void 0===ye.__webglInit&&(ye.__webglInit=!0,ce.addEventListener("dispose",H));const Dt=ce.source;let Xt=O.get(Dt);void 0===Xt&&(Xt={},O.set(Dt,Xt));const Vt=function X(ye){const ce=[];return ce.push(ye.wrapS),ce.push(ye.wrapT),ce.push(ye.magFilter),ce.push(ye.minFilter),ce.push(ye.anisotropy),ce.push(ye.internalFormat),ce.push(ye.format),ce.push(ye.type),ce.push(ye.generateMipmaps),ce.push(ye.premultiplyAlpha),ce.push(ye.flipY),ce.push(ye.unpackAlignment),ce.push(ye.encoding),ce.join()}(ce);if(Vt!==ye.__cacheKey){void 0===Xt[Vt]&&(Xt[Vt]={texture:c.createTexture(),usedTimes:0},p.memory.textures++,ft=!0),Xt[Vt].usedTimes++;const Ut=Xt[ye.__cacheKey];void 0!==Ut&&(Xt[ye.__cacheKey].usedTimes--,0===Ut.usedTimes&&B(ce)),ye.__cacheKey=Vt,ye.__webglTexture=Xt[Vt].texture}return ft}function qe(ye,ce,ft){let Dt=3553;ce.isDataArrayTexture&&(Dt=35866),ce.isData3DTexture&&(Dt=32879);const Xt=Fe(ye,ce),Vt=ce.source;if(l.activeTexture(33984+ft),l.bindTexture(Dt,ye.__webglTexture),Vt.version!==Vt.__currentVersion||!0===Xt){c.pixelStorei(37440,ce.flipY),c.pixelStorei(37441,ce.premultiplyAlpha),c.pixelStorei(3317,ce.unpackAlignment),c.pixelStorei(37443,0);const Ut=function E(ye){return!g&&(ye.wrapS!==lc||ye.wrapT!==lc||ye.minFilter!==Zo&&ye.minFilter!==Do)}(ce)&&!1===k(ce.image);let nt=M(ce.image,Ut,!1,y);nt=Zn(ce,nt);const rn=k(nt)||g,Kt=f.convert(ce.format,ce.encoding);let hn,Cn=f.convert(ce.type),Be=I(ce.internalFormat,Kt,Cn,ce.encoding,ce.isVideoTexture);we(Dt,ce,rn);const an=ce.mipmaps,Si=g&&!0!==ce.isVideoTexture,zn=void 0===Vt.__currentVersion||!0===Xt,Pi=U(ce,nt,rn);if(ce.isDepthTexture)Be=6402,g?Be=ce.type===jg?36012:ce.type===cv?33190:ce.type===db?35056:33189:ce.type===jg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ce.format===uv&&6402===Be&&1012!==ce.type&&ce.type!==cv&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ce.type=cv,Cn=f.convert(ce.type)),ce.format===fb&&6402===Be&&(Be=34041,ce.type!==db&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ce.type=db,Cn=f.convert(ce.type))),zn&&(Si?l.texStorage2D(3553,1,Be,nt.width,nt.height):l.texImage2D(3553,0,Be,nt.width,nt.height,0,Kt,Cn,null));else if(ce.isDataTexture)if(an.length>0&&rn){Si&&zn&&l.texStorage2D(3553,Pi,Be,an[0].width,an[0].height);for(let on=0,Ri=an.length;on<Ri;on++)hn=an[on],Si?l.texSubImage2D(3553,on,0,0,hn.width,hn.height,Kt,Cn,hn.data):l.texImage2D(3553,on,Be,hn.width,hn.height,0,Kt,Cn,hn.data);ce.generateMipmaps=!1}else Si?(zn&&l.texStorage2D(3553,Pi,Be,nt.width,nt.height),l.texSubImage2D(3553,0,0,0,nt.width,nt.height,Kt,Cn,nt.data)):l.texImage2D(3553,0,Be,nt.width,nt.height,0,Kt,Cn,nt.data);else if(ce.isCompressedTexture){Si&&zn&&l.texStorage2D(3553,Pi,Be,an[0].width,an[0].height);for(let on=0,Ri=an.length;on<Ri;on++)hn=an[on],ce.format!==Rh?null!==Kt?Si?l.compressedTexSubImage2D(3553,on,0,0,hn.width,hn.height,Kt,hn.data):l.compressedTexImage2D(3553,on,Be,hn.width,hn.height,0,hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Si?l.texSubImage2D(3553,on,0,0,hn.width,hn.height,Kt,Cn,hn.data):l.texImage2D(3553,on,Be,hn.width,hn.height,0,Kt,Cn,hn.data)}else if(ce.isDataArrayTexture)Si?(zn&&l.texStorage3D(35866,Pi,Be,nt.width,nt.height,nt.depth),l.texSubImage3D(35866,0,0,0,0,nt.width,nt.height,nt.depth,Kt,Cn,nt.data)):l.texImage3D(35866,0,Be,nt.width,nt.height,nt.depth,0,Kt,Cn,nt.data);else if(ce.isData3DTexture)Si?(zn&&l.texStorage3D(32879,Pi,Be,nt.width,nt.height,nt.depth),l.texSubImage3D(32879,0,0,0,0,nt.width,nt.height,nt.depth,Kt,Cn,nt.data)):l.texImage3D(32879,0,Be,nt.width,nt.height,nt.depth,0,Kt,Cn,nt.data);else if(ce.isFramebufferTexture){if(zn)if(Si)l.texStorage2D(3553,Pi,Be,nt.width,nt.height);else{let on=nt.width,Ri=nt.height;for(let zr=0;zr<Pi;zr++)l.texImage2D(3553,zr,Be,on,Ri,0,Kt,Cn,null),on>>=1,Ri>>=1}}else if(an.length>0&&rn){Si&&zn&&l.texStorage2D(3553,Pi,Be,an[0].width,an[0].height);for(let on=0,Ri=an.length;on<Ri;on++)hn=an[on],Si?l.texSubImage2D(3553,on,0,0,Kt,Cn,hn):l.texImage2D(3553,on,Be,Kt,Cn,hn);ce.generateMipmaps=!1}else Si?(zn&&l.texStorage2D(3553,Pi,Be,nt.width,nt.height),l.texSubImage2D(3553,0,0,0,Kt,Cn,nt)):l.texImage2D(3553,0,Be,Kt,Cn,nt);P(ce,rn)&&V(Dt),Vt.__currentVersion=Vt.version,ce.onUpdate&&ce.onUpdate(ce)}ye.__version=ce.version}function ze(ye,ce,ft,Dt,Xt){const Vt=f.convert(ft.format,ft.encoding),Ut=f.convert(ft.type),nt=I(ft.internalFormat,Vt,Ut,ft.encoding);h.get(ce).__hasExternalTextures||(32879===Xt||35866===Xt?l.texImage3D(Xt,0,nt,ce.width,ce.height,ce.depth,0,Vt,Ut,null):l.texImage2D(Xt,0,nt,ce.width,ce.height,0,Vt,Ut,null)),l.bindFramebuffer(36160,ye),Gt(ce)?b.framebufferTexture2DMultisampleEXT(36160,Dt,Xt,h.get(ft).__webglTexture,0,et(ce)):c.framebufferTexture2D(36160,Dt,Xt,h.get(ft).__webglTexture,0),l.bindFramebuffer(36160,null)}function it(ye,ce,ft){if(c.bindRenderbuffer(36161,ye),ce.depthBuffer&&!ce.stencilBuffer){let Dt=33189;if(ft||Gt(ce)){const Xt=ce.depthTexture;Xt&&Xt.isDepthTexture&&(Xt.type===jg?Dt=36012:Xt.type===cv&&(Dt=33190));const Vt=et(ce);Gt(ce)?b.renderbufferStorageMultisampleEXT(36161,Vt,Dt,ce.width,ce.height):c.renderbufferStorageMultisample(36161,Vt,Dt,ce.width,ce.height)}else c.renderbufferStorage(36161,Dt,ce.width,ce.height);c.framebufferRenderbuffer(36160,36096,36161,ye)}else if(ce.depthBuffer&&ce.stencilBuffer){const Dt=et(ce);ft&&!1===Gt(ce)?c.renderbufferStorageMultisample(36161,Dt,35056,ce.width,ce.height):Gt(ce)?b.renderbufferStorageMultisampleEXT(36161,Dt,35056,ce.width,ce.height):c.renderbufferStorage(36161,34041,ce.width,ce.height),c.framebufferRenderbuffer(36160,33306,36161,ye)}else{const Dt=!0===ce.isWebGLMultipleRenderTargets?ce.texture:[ce.texture];for(let Xt=0;Xt<Dt.length;Xt++){const Vt=Dt[Xt],Ut=f.convert(Vt.format,Vt.encoding),nt=f.convert(Vt.type),rn=I(Vt.internalFormat,Ut,nt,Vt.encoding),Kt=et(ce);ft&&!1===Gt(ce)?c.renderbufferStorageMultisample(36161,Kt,rn,ce.width,ce.height):Gt(ce)?b.renderbufferStorageMultisampleEXT(36161,Kt,rn,ce.width,ce.height):c.renderbufferStorage(36161,rn,ce.width,ce.height)}}c.bindRenderbuffer(36161,null)}function Ue(ye){const ce=h.get(ye),ft=!0===ye.isWebGLCubeRenderTarget;if(ye.depthTexture&&!ce.__autoAllocateDepthBuffer){if(ft)throw new Error("target.depthTexture not supported in Cube render targets");!function ve(ye,ce){if(ce&&ce.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(l.bindFramebuffer(36160,ye),!ce.depthTexture||!ce.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!h.get(ce.depthTexture).__webglTexture||ce.depthTexture.image.width!==ce.width||ce.depthTexture.image.height!==ce.height)&&(ce.depthTexture.image.width=ce.width,ce.depthTexture.image.height=ce.height,ce.depthTexture.needsUpdate=!0),Y(ce.depthTexture,0);const Dt=h.get(ce.depthTexture).__webglTexture,Xt=et(ce);if(ce.depthTexture.format===uv)Gt(ce)?b.framebufferTexture2DMultisampleEXT(36160,36096,3553,Dt,0,Xt):c.framebufferTexture2D(36160,36096,3553,Dt,0);else{if(ce.depthTexture.format!==fb)throw new Error("Unknown depthTexture format");Gt(ce)?b.framebufferTexture2DMultisampleEXT(36160,33306,3553,Dt,0,Xt):c.framebufferTexture2D(36160,33306,3553,Dt,0)}}(ce.__webglFramebuffer,ye)}else if(ft){ce.__webglDepthbuffer=[];for(let Dt=0;Dt<6;Dt++)l.bindFramebuffer(36160,ce.__webglFramebuffer[Dt]),ce.__webglDepthbuffer[Dt]=c.createRenderbuffer(),it(ce.__webglDepthbuffer[Dt],ye,!1)}else l.bindFramebuffer(36160,ce.__webglFramebuffer),ce.__webglDepthbuffer=c.createRenderbuffer(),it(ce.__webglDepthbuffer,ye,!1);l.bindFramebuffer(36160,null)}function et(ye){return Math.min(_,ye.samples)}function Gt(ye){const ce=h.get(ye);return g&&ye.samples>0&&!0===a.has("WEBGL_multisampled_render_to_texture")&&!1!==ce.__useRenderToTexture}function Zn(ye,ce){const ft=ye.encoding,Dt=ye.format,Xt=ye.type;return!0===ye.isCompressedTexture||!0===ye.isVideoTexture||1035===ye.format||ft!==hv&&(ft===zs?!1===g?!0===a.has("EXT_sRGB")&&Dt===Rh?(ye.format=1035,ye.minFilter=Do,ye.generateMipmaps=!1):ce=Z_e.sRGBToLinear(ce):(Dt!==Rh||Xt!==lv)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ft)),ce}this.allocateTextureUnit=function Q(){const ye=W;return ye>=m&&console.warn("THREE.WebGLTextures: Trying to use "+ye+" texture units while this GPU supports only "+m),W+=1,ye},this.resetTextureUnits=function j(){W=0},this.setTexture2D=Y,this.setTexture2DArray=function ne(ye,ce){const ft=h.get(ye);ye.version>0&&ft.__version!==ye.version?qe(ft,ye,ce):(l.activeTexture(33984+ce),l.bindTexture(35866,ft.__webglTexture))},this.setTexture3D=function re(ye,ce){const ft=h.get(ye);ye.version>0&&ft.__version!==ye.version?qe(ft,ye,ce):(l.activeTexture(33984+ce),l.bindTexture(32879,ft.__webglTexture))},this.setTextureCube=function fe(ye,ce){const ft=h.get(ye);ye.version>0&&ft.__version!==ye.version?function Le(ye,ce,ft){if(6!==ce.image.length)return;const Dt=Fe(ye,ce),Xt=ce.source;if(l.activeTexture(33984+ft),l.bindTexture(34067,ye.__webglTexture),Xt.version!==Xt.__currentVersion||!0===Dt){c.pixelStorei(37440,ce.flipY),c.pixelStorei(37441,ce.premultiplyAlpha),c.pixelStorei(3317,ce.unpackAlignment),c.pixelStorei(37443,0);const Vt=ce.isCompressedTexture||ce.image[0].isCompressedTexture,Ut=ce.image[0]&&ce.image[0].isDataTexture,nt=[];for(let on=0;on<6;on++)nt[on]=Vt||Ut?Ut?ce.image[on].image:ce.image[on]:M(ce.image[on],!1,!0,v),nt[on]=Zn(ce,nt[on]);const rn=nt[0],Kt=k(rn)||g,Cn=f.convert(ce.format,ce.encoding),Be=f.convert(ce.type),hn=I(ce.internalFormat,Cn,Be,ce.encoding),an=g&&!0!==ce.isVideoTexture,Si=void 0===Xt.__currentVersion||!0===Dt;let Pi,zn=U(ce,rn,Kt);if(we(34067,ce,Kt),Vt){an&&Si&&l.texStorage2D(34067,zn,hn,rn.width,rn.height);for(let on=0;on<6;on++){Pi=nt[on].mipmaps;for(let Ri=0;Ri<Pi.length;Ri++){const zr=Pi[Ri];ce.format!==Rh?null!==Cn?an?l.compressedTexSubImage2D(34069+on,Ri,0,0,zr.width,zr.height,Cn,zr.data):l.compressedTexImage2D(34069+on,Ri,hn,zr.width,zr.height,0,zr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):an?l.texSubImage2D(34069+on,Ri,0,0,zr.width,zr.height,Cn,Be,zr.data):l.texImage2D(34069+on,Ri,hn,zr.width,zr.height,0,Cn,Be,zr.data)}}}else{Pi=ce.mipmaps,an&&Si&&(Pi.length>0&&zn++,l.texStorage2D(34067,zn,hn,nt[0].width,nt[0].height));for(let on=0;on<6;on++)if(Ut){an?l.texSubImage2D(34069+on,0,0,0,nt[on].width,nt[on].height,Cn,Be,nt[on].data):l.texImage2D(34069+on,0,hn,nt[on].width,nt[on].height,0,Cn,Be,nt[on].data);for(let Ri=0;Ri<Pi.length;Ri++){const Hr=Pi[Ri].image[on].image;an?l.texSubImage2D(34069+on,Ri+1,0,0,Hr.width,Hr.height,Cn,Be,Hr.data):l.texImage2D(34069+on,Ri+1,hn,Hr.width,Hr.height,0,Cn,Be,Hr.data)}}else{an?l.texSubImage2D(34069+on,0,0,0,Cn,Be,nt[on]):l.texImage2D(34069+on,0,hn,Cn,Be,nt[on]);for(let Ri=0;Ri<Pi.length;Ri++){const zr=Pi[Ri];an?l.texSubImage2D(34069+on,Ri+1,0,0,Cn,Be,zr.image[on]):l.texImage2D(34069+on,Ri+1,hn,Cn,Be,zr.image[on])}}}P(ce,Kt)&&V(34067),Xt.__currentVersion=Xt.version,ce.onUpdate&&ce.onUpdate(ce)}ye.__version=ce.version}(ft,ye,ce):(l.activeTexture(33984+ce),l.bindTexture(34067,ft.__webglTexture))},this.rebindTextures=function st(ye,ce,ft){const Dt=h.get(ye);void 0!==ce&&ze(Dt.__webglFramebuffer,ye,ye.texture,36064,3553),void 0!==ft&&Ue(ye)},this.setupRenderTarget=function dt(ye){const ce=ye.texture,ft=h.get(ye),Dt=h.get(ce);ye.addEventListener("dispose",J),!0!==ye.isWebGLMultipleRenderTargets&&(void 0===Dt.__webglTexture&&(Dt.__webglTexture=c.createTexture()),Dt.__version=ce.version,p.memory.textures++);const Xt=!0===ye.isWebGLCubeRenderTarget,Vt=!0===ye.isWebGLMultipleRenderTargets,Ut=k(ye)||g;if(Xt){ft.__webglFramebuffer=[];for(let nt=0;nt<6;nt++)ft.__webglFramebuffer[nt]=c.createFramebuffer()}else{if(ft.__webglFramebuffer=c.createFramebuffer(),Vt)if(d.drawBuffers){const nt=ye.texture;for(let rn=0,Kt=nt.length;rn<Kt;rn++){const Cn=h.get(nt[rn]);void 0===Cn.__webglTexture&&(Cn.__webglTexture=c.createTexture(),p.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&ye.samples>0&&!1===Gt(ye)){const nt=Vt?ce:[ce];ft.__webglMultisampledFramebuffer=c.createFramebuffer(),ft.__webglColorRenderbuffer=[],l.bindFramebuffer(36160,ft.__webglMultisampledFramebuffer);for(let rn=0;rn<nt.length;rn++){const Kt=nt[rn];ft.__webglColorRenderbuffer[rn]=c.createRenderbuffer(),c.bindRenderbuffer(36161,ft.__webglColorRenderbuffer[rn]);const Cn=f.convert(Kt.format,Kt.encoding),Be=f.convert(Kt.type),hn=I(Kt.internalFormat,Cn,Be,Kt.encoding),an=et(ye);c.renderbufferStorageMultisample(36161,an,hn,ye.width,ye.height),c.framebufferRenderbuffer(36160,36064+rn,36161,ft.__webglColorRenderbuffer[rn])}c.bindRenderbuffer(36161,null),ye.depthBuffer&&(ft.__webglDepthRenderbuffer=c.createRenderbuffer(),it(ft.__webglDepthRenderbuffer,ye,!0)),l.bindFramebuffer(36160,null)}}if(Xt){l.bindTexture(34067,Dt.__webglTexture),we(34067,ce,Ut);for(let nt=0;nt<6;nt++)ze(ft.__webglFramebuffer[nt],ye,ce,36064,34069+nt);P(ce,Ut)&&V(34067),l.unbindTexture()}else if(Vt){const nt=ye.texture;for(let rn=0,Kt=nt.length;rn<Kt;rn++){const Cn=nt[rn],Be=h.get(Cn);l.bindTexture(3553,Be.__webglTexture),we(3553,Cn,Ut),ze(ft.__webglFramebuffer,ye,Cn,36064+rn,3553),P(Cn,Ut)&&V(3553)}l.unbindTexture()}else{let nt=3553;(ye.isWebGL3DRenderTarget||ye.isWebGLArrayRenderTarget)&&(g?nt=ye.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),l.bindTexture(nt,Dt.__webglTexture),we(nt,ce,Ut),ze(ft.__webglFramebuffer,ye,ce,36064,nt),P(ce,Ut)&&V(nt),l.unbindTexture()}ye.depthBuffer&&Ue(ye)},this.updateRenderTargetMipmap=function tt(ye){const ce=k(ye)||g,ft=!0===ye.isWebGLMultipleRenderTargets?ye.texture:[ye.texture];for(let Dt=0,Xt=ft.length;Dt<Xt;Dt++){const Vt=ft[Dt];if(P(Vt,ce)){const Ut=ye.isWebGLCubeRenderTarget?34067:3553,nt=h.get(Vt).__webglTexture;l.bindTexture(Ut,nt),V(Ut),l.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ie(ye){if(g&&ye.samples>0&&!1===Gt(ye)){const ce=ye.isWebGLMultipleRenderTargets?ye.texture:[ye.texture],ft=ye.width,Dt=ye.height;let Xt=16384;const Vt=[],Ut=ye.stencilBuffer?33306:36096,nt=h.get(ye),rn=!0===ye.isWebGLMultipleRenderTargets;if(rn)for(let Kt=0;Kt<ce.length;Kt++)l.bindFramebuffer(36160,nt.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064+Kt,36161,null),l.bindFramebuffer(36160,nt.__webglFramebuffer),c.framebufferTexture2D(36009,36064+Kt,3553,null,0);l.bindFramebuffer(36008,nt.__webglMultisampledFramebuffer),l.bindFramebuffer(36009,nt.__webglFramebuffer);for(let Kt=0;Kt<ce.length;Kt++){Vt.push(36064+Kt),ye.depthBuffer&&Vt.push(Ut);const Cn=void 0!==nt.__ignoreDepthValues&&nt.__ignoreDepthValues;if(!1===Cn&&(ye.depthBuffer&&(Xt|=256),ye.stencilBuffer&&(Xt|=1024)),rn&&c.framebufferRenderbuffer(36008,36064,36161,nt.__webglColorRenderbuffer[Kt]),!0===Cn&&(c.invalidateFramebuffer(36008,[Ut]),c.invalidateFramebuffer(36009,[Ut])),rn){const Be=h.get(ce[Kt]).__webglTexture;c.framebufferTexture2D(36009,36064,3553,Be,0)}c.blitFramebuffer(0,0,ft,Dt,0,0,ft,Dt,Xt,9728),C&&c.invalidateFramebuffer(36008,Vt)}if(l.bindFramebuffer(36008,null),l.bindFramebuffer(36009,null),rn)for(let Kt=0;Kt<ce.length;Kt++){l.bindFramebuffer(36160,nt.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064+Kt,36161,nt.__webglColorRenderbuffer[Kt]);const Cn=h.get(ce[Kt]).__webglTexture;l.bindFramebuffer(36160,nt.__webglFramebuffer),c.framebufferTexture2D(36009,36064+Kt,3553,Cn,0)}l.bindFramebuffer(36009,nt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Ue,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=Gt}function $1t(c,a,l){const h=l.isWebGL2;return{convert:function d(f,p=null){let g;if(f===lv)return 5121;if(1017===f)return 32819;if(1018===f)return 32820;if(1010===f)return 5120;if(1011===f)return 5122;if(1012===f)return 5123;if(1013===f)return 5124;if(f===cv)return 5125;if(f===jg)return 5126;if(f===qO)return h?5131:(g=a.get("OES_texture_half_float"),null!==g?g.HALF_FLOAT_OES:null);if(1021===f)return 6406;if(f===Rh)return 6408;if(1024===f)return 6409;if(1025===f)return 6410;if(f===uv)return 6402;if(f===fb)return 34041;if(1028===f)return 6403;if(1022===f)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===f)return g=a.get("EXT_sRGB"),null!==g?g.SRGB_ALPHA_EXT:null;if(1029===f)return 36244;if(1030===f)return 33319;if(1031===f)return 33320;if(1033===f)return 36249;if(33776===f||33777===f||33778===f||33779===f)if(p===zs){if(g=a.get("WEBGL_compressed_texture_s3tc_srgb"),null===g)return null;if(33776===f)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(g=a.get("WEBGL_compressed_texture_s3tc"),null===g)return null;if(33776===f)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===f||35841===f||35842===f||35843===f){if(g=a.get("WEBGL_compressed_texture_pvrtc"),null===g)return null;if(35840===f)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===f)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===f)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===f)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===f)return g=a.get("WEBGL_compressed_texture_etc1"),null!==g?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===f||37496===f){if(g=a.get("WEBGL_compressed_texture_etc"),null===g)return null;if(37492===f)return p===zs?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(37496===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}if(37808===f||37809===f||37810===f||37811===f||37812===f||37813===f||37814===f||37815===f||37816===f||37817===f||37818===f||37819===f||37820===f||37821===f){if(g=a.get("WEBGL_compressed_texture_astc"),null===g)return null;if(37808===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===f)return p===zs?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===f){if(g=a.get("EXT_texture_compression_bptc"),null===g)return null;if(36492===f)return p===zs?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}return f===db?h?34042:(g=a.get("WEBGL_depth_texture"),null!==g?g.UNSIGNED_INT_24_8_WEBGL:null):void 0!==c[f]?c[f]:null}}}class W1t extends ko{constructor(a=[]){super(),this.isArrayCamera=!0,this.cameras=a}}class Ub extends qc{constructor(){super(),this.isGroup=!0,this.type="Group"}}const G1t={type:"move"};class FW{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ub,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ub,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ub,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(a){return null!==this._targetRay&&this._targetRay.dispatchEvent(a),null!==this._grip&&this._grip.dispatchEvent(a),null!==this._hand&&this._hand.dispatchEvent(a),this}disconnect(a){return this.dispatchEvent({type:"disconnected",data:a}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(a,l,h){let d=null,f=null,p=null;const g=this._targetRay,m=this._grip,v=this._hand;if(a&&"visible-blurred"!==l.session.visibilityState){if(v&&a.hand){p=!0;for(const w of a.hand.values()){const O=l.getJointPose(w,h);if(void 0===v.joints[w.jointName]){const T=new Ub;T.matrixAutoUpdate=!1,T.visible=!1,v.joints[w.jointName]=T,v.add(T)}const D=v.joints[w.jointName];null!==O&&(D.matrix.fromArray(O.transform.matrix),D.matrix.decompose(D.position,D.rotation,D.scale),D.jointRadius=O.radius),D.visible=null!==O}const b=v.joints["index-finger-tip"].position.distanceTo(v.joints["thumb-tip"].position),C=.02,x=.005;v.inputState.pinching&&b>C+x?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!v.inputState.pinching&&b<=C-x&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else null!==m&&a.gripSpace&&(f=l.getPose(a.gripSpace,h),null!==f&&(m.matrix.fromArray(f.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),f.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(f.linearVelocity)):m.hasLinearVelocity=!1,f.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(f.angularVelocity)):m.hasAngularVelocity=!1));null!==g&&(d=l.getPose(a.targetRaySpace,h),null===d&&null!==f&&(d=f),null!==d&&(g.matrix.fromArray(d.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),d.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(d.linearVelocity)):g.hasLinearVelocity=!1,d.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(d.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(G1t)))}return null!==g&&(g.visible=null!==d),null!==m&&(m.visible=null!==f),null!==v&&(v.visible=null!==p),this}}class Q1t extends Yd{constructor(a,l,h,d,f,p,g,m,v,y){if((y=void 0!==y?y:uv)!==uv&&y!==fb)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===h&&y===uv&&(h=cv),void 0===h&&y===fb&&(h=db),super(null,d,f,p,g,m,y,h,v),this.isDepthTexture=!0,this.image={width:a,height:l},this.magFilter=void 0!==g?g:Zo,this.minFilter=void 0!==m?m:Zo,this.flipY=!1,this.generateMipmaps=!1}}class j1t extends vb{constructor(a,l){super();const h=this;let d=null,f=1,p=null,g="local-floor",m=null,v=null,y=null,_=null,b=null,C=null;const x=l.getContextAttributes();let w=null,O=null;const D=[],T=[],M=new ko;M.layers.enable(1),M.viewport=new pr;const k=new ko;k.layers.enable(2),k.viewport=new pr;const E=[M,k],P=new W1t;P.layers.enable(1),P.layers.enable(2);let V=null,I=null;function U(X){const Y=T.indexOf(X.inputSource);if(-1===Y)return;const ne=D[Y];void 0!==ne&&ne.dispatchEvent({type:X.type,data:X.inputSource})}function $(){d.removeEventListener("select",U),d.removeEventListener("selectstart",U),d.removeEventListener("selectend",U),d.removeEventListener("squeeze",U),d.removeEventListener("squeezestart",U),d.removeEventListener("squeezeend",U),d.removeEventListener("end",$),d.removeEventListener("inputsourceschange",H);for(let X=0;X<D.length;X++){const Y=T[X];null!==Y&&(T[X]=null,D[X].disconnect(Y))}V=null,I=null,a.setRenderTarget(w),b=null,_=null,y=null,d=null,O=null,Q.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function H(X){for(let Y=0;Y<X.removed.length;Y++){const ne=X.removed[Y],re=T.indexOf(ne);re>=0&&(T[re]=null,D[re].dispatchEvent({type:"disconnected",data:ne}))}for(let Y=0;Y<X.added.length;Y++){const ne=X.added[Y];let re=T.indexOf(ne);if(-1===re){for(let de=0;de<D.length;de++){if(de>=T.length){T.push(ne),re=de;break}if(null===T[de]){T[de]=ne,re=de;break}}if(-1===re)break}const fe=D[re];fe&&fe.dispatchEvent({type:"connected",data:ne})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(X){let Y=D[X];return void 0===Y&&(Y=new FW,D[X]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(X){let Y=D[X];return void 0===Y&&(Y=new FW,D[X]=Y),Y.getGripSpace()},this.getHand=function(X){let Y=D[X];return void 0===Y&&(Y=new FW,D[X]=Y),Y.getHandSpace()},this.setFramebufferScaleFactor=function(X){f=X,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(X){g=X,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||p},this.setReferenceSpace=function(X){m=X},this.getBaseLayer=function(){return null!==_?_:b},this.getBinding=function(){return y},this.getFrame=function(){return C},this.getSession=function(){return d},this.setSession=function(){var X=M5(function*(Y){if(d=Y,null!==d){if(w=a.getRenderTarget(),d.addEventListener("select",U),d.addEventListener("selectstart",U),d.addEventListener("selectend",U),d.addEventListener("squeeze",U),d.addEventListener("squeezestart",U),d.addEventListener("squeezeend",U),d.addEventListener("end",$),d.addEventListener("inputsourceschange",H),!0!==x.xrCompatible&&(yield l.makeXRCompatible()),void 0===d.renderState.layers||!1===a.capabilities.isWebGL2)b=new XRWebGLLayer(d,l,{antialias:void 0!==d.renderState.layers||x.antialias,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:f}),d.updateRenderState({baseLayer:b}),O=new Fl(b.framebufferWidth,b.framebufferHeight,{format:Rh,type:lv,encoding:a.outputEncoding});else{let ne=null,re=null,fe=null;x.depth&&(fe=x.stencil?35056:33190,ne=x.stencil?fb:uv,re=x.stencil?db:cv);const de={colorFormat:32856,depthFormat:fe,scaleFactor:f};y=new XRWebGLBinding(d,l),_=y.createProjectionLayer(de),d.updateRenderState({layers:[_]}),O=new Fl(_.textureWidth,_.textureHeight,{format:Rh,type:lv,depthTexture:new Q1t(_.textureWidth,_.textureHeight,re,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:x.stencil,encoding:a.outputEncoding,samples:x.antialias?4:0}),a.properties.get(O).__ignoreDepthValues=_.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(1),m=null,p=yield d.requestReferenceSpace(g),Q.setContext(d),Q.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}});return function(Y){return X.apply(this,arguments)}}();const J=new ae,ee=new ae;function G(X,Y){null===Y?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices(Y.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}this.updateCamera=function(X){if(null===d)return;P.near=k.near=M.near=X.near,P.far=k.far=M.far=X.far,(V!==P.near||I!==P.far)&&(d.updateRenderState({depthNear:P.near,depthFar:P.far}),V=P.near,I=P.far);const Y=X.parent,ne=P.cameras;G(P,Y);for(let fe=0;fe<ne.length;fe++)G(ne[fe],Y);P.matrixWorld.decompose(P.position,P.quaternion,P.scale),X.position.copy(P.position),X.quaternion.copy(P.quaternion),X.scale.copy(P.scale),X.matrix.copy(P.matrix),X.matrixWorld.copy(P.matrixWorld);const re=X.children;for(let fe=0,de=re.length;fe<de;fe++)re[fe].updateMatrixWorld(!0);2===ne.length?function B(X,Y,ne){J.setFromMatrixPosition(Y.matrixWorld),ee.setFromMatrixPosition(ne.matrixWorld);const re=J.distanceTo(ee),fe=Y.projectionMatrix.elements,de=ne.projectionMatrix.elements,De=fe[14]/(fe[10]-1),we=fe[14]/(fe[10]+1),Fe=(fe[9]+1)/fe[5],qe=(fe[9]-1)/fe[5],Le=(fe[8]-1)/fe[0],ze=(de[8]+1)/de[0],it=De*Le,ve=De*ze,Ue=re/(-Le+ze),st=Ue*-Le;Y.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(st),X.translateZ(Ue),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert();const dt=De+Ue,tt=we+Ue;X.projectionMatrix.makePerspective(it-st,ve+(re-st),Fe*we/tt*dt,qe*we/tt*dt,dt,tt)}(P,M,k):P.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return P},this.getFoveation=function(){return null!==_?_.fixedFoveation:null!==b?b.fixedFoveation:void 0},this.setFoveation=function(X){null!==_&&(_.fixedFoveation=X),null!==b&&void 0!==b.fixedFoveation&&(b.fixedFoveation=X)};let W=null;const Q=new c1e;Q.setAnimationLoop(function j(X,Y){if(v=Y.getViewerPose(m||p),C=Y,null!==v){const ne=v.views;null!==b&&(a.setRenderTargetFramebuffer(O,b.framebuffer),a.setRenderTarget(O));let re=!1;ne.length!==P.cameras.length&&(P.cameras.length=0,re=!0);for(let fe=0;fe<ne.length;fe++){const de=ne[fe];let De=null;if(null!==b)De=b.getViewport(de);else{const Fe=y.getViewSubImage(_,de);De=Fe.viewport,0===fe&&(a.setRenderTargetTextures(O,Fe.colorTexture,_.ignoreDepthValues?void 0:Fe.depthStencilTexture),a.setRenderTarget(O))}let we=E[fe];void 0===we&&(we=new ko,we.layers.enable(fe),we.viewport=new pr,E[fe]=we),we.matrix.fromArray(de.transform.matrix),we.projectionMatrix.fromArray(de.projectionMatrix),we.viewport.set(De.x,De.y,De.width,De.height),0===fe&&P.matrix.copy(we.matrix),!0===re&&P.cameras.push(we)}}for(let ne=0;ne<D.length;ne++){const re=T[ne],fe=D[ne];null!==re&&void 0!==fe&&fe.update(re,Y,m||p)}W&&W(X,Y),C=null}),this.setAnimationLoop=function(X){W=X},this.dispose=function(){}}}function Z1t(c,a){function d(w,O){w.opacity.value=O.opacity,O.color&&w.diffuse.value.copy(O.color),O.emissive&&w.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&(w.map.value=O.map),O.alphaMap&&(w.alphaMap.value=O.alphaMap),O.bumpMap&&(w.bumpMap.value=O.bumpMap,w.bumpScale.value=O.bumpScale,1===O.side&&(w.bumpScale.value*=-1)),O.displacementMap&&(w.displacementMap.value=O.displacementMap,w.displacementScale.value=O.displacementScale,w.displacementBias.value=O.displacementBias),O.emissiveMap&&(w.emissiveMap.value=O.emissiveMap),O.normalMap&&(w.normalMap.value=O.normalMap,w.normalScale.value.copy(O.normalScale),1===O.side&&w.normalScale.value.negate()),O.specularMap&&(w.specularMap.value=O.specularMap),O.alphaTest>0&&(w.alphaTest.value=O.alphaTest);const D=a.get(O).envMap;if(D&&(w.envMap.value=D,w.flipEnvMap.value=D.isCubeTexture&&!1===D.isRenderTargetTexture?-1:1,w.reflectivity.value=O.reflectivity,w.ior.value=O.ior,w.refractionRatio.value=O.refractionRatio),O.lightMap){w.lightMap.value=O.lightMap;const k=!0!==c.physicallyCorrectLights?Math.PI:1;w.lightMapIntensity.value=O.lightMapIntensity*k}let T,M;O.aoMap&&(w.aoMap.value=O.aoMap,w.aoMapIntensity.value=O.aoMapIntensity),O.map?T=O.map:O.specularMap?T=O.specularMap:O.displacementMap?T=O.displacementMap:O.normalMap?T=O.normalMap:O.bumpMap?T=O.bumpMap:O.roughnessMap?T=O.roughnessMap:O.metalnessMap?T=O.metalnessMap:O.alphaMap?T=O.alphaMap:O.emissiveMap?T=O.emissiveMap:O.clearcoatMap?T=O.clearcoatMap:O.clearcoatNormalMap?T=O.clearcoatNormalMap:O.clearcoatRoughnessMap?T=O.clearcoatRoughnessMap:O.iridescenceMap?T=O.iridescenceMap:O.iridescenceThicknessMap?T=O.iridescenceThicknessMap:O.specularIntensityMap?T=O.specularIntensityMap:O.specularColorMap?T=O.specularColorMap:O.transmissionMap?T=O.transmissionMap:O.thicknessMap?T=O.thicknessMap:O.sheenColorMap?T=O.sheenColorMap:O.sheenRoughnessMap&&(T=O.sheenRoughnessMap),void 0!==T&&(T.isWebGLRenderTarget&&(T=T.texture),!0===T.matrixAutoUpdate&&T.updateMatrix(),w.uvTransform.value.copy(T.matrix)),O.aoMap?M=O.aoMap:O.lightMap&&(M=O.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),w.uv2Transform.value.copy(M.matrix))}return{refreshFogUniforms:function l(w,O){w.fogColor.value.copy(O.color),O.isFog?(w.fogNear.value=O.near,w.fogFar.value=O.far):O.isFogExp2&&(w.fogDensity.value=O.density)},refreshMaterialUniforms:function h(w,O,D,T,M){O.isMeshBasicMaterial||O.isMeshLambertMaterial?d(w,O):O.isMeshToonMaterial?(d(w,O),function y(w,O){O.gradientMap&&(w.gradientMap.value=O.gradientMap)}(w,O)):O.isMeshPhongMaterial?(d(w,O),function v(w,O){w.specular.value.copy(O.specular),w.shininess.value=Math.max(O.shininess,1e-4)}(w,O)):O.isMeshStandardMaterial?(d(w,O),function _(w,O){w.roughness.value=O.roughness,w.metalness.value=O.metalness,O.roughnessMap&&(w.roughnessMap.value=O.roughnessMap),O.metalnessMap&&(w.metalnessMap.value=O.metalnessMap),a.get(O).envMap&&(w.envMapIntensity.value=O.envMapIntensity)}(w,O),O.isMeshPhysicalMaterial&&function b(w,O,D){w.ior.value=O.ior,O.sheen>0&&(w.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),w.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&(w.sheenColorMap.value=O.sheenColorMap),O.sheenRoughnessMap&&(w.sheenRoughnessMap.value=O.sheenRoughnessMap)),O.clearcoat>0&&(w.clearcoat.value=O.clearcoat,w.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&(w.clearcoatMap.value=O.clearcoatMap),O.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap),O.clearcoatNormalMap&&(w.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),w.clearcoatNormalMap.value=O.clearcoatNormalMap,1===O.side&&w.clearcoatNormalScale.value.negate())),O.iridescence>0&&(w.iridescence.value=O.iridescence,w.iridescenceIOR.value=O.iridescenceIOR,w.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&(w.iridescenceMap.value=O.iridescenceMap),O.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=O.iridescenceThicknessMap)),O.transmission>0&&(w.transmission.value=O.transmission,w.transmissionSamplerMap.value=D.texture,w.transmissionSamplerSize.value.set(D.width,D.height),O.transmissionMap&&(w.transmissionMap.value=O.transmissionMap),w.thickness.value=O.thickness,O.thicknessMap&&(w.thicknessMap.value=O.thicknessMap),w.attenuationDistance.value=O.attenuationDistance,w.attenuationColor.value.copy(O.attenuationColor)),w.specularIntensity.value=O.specularIntensity,w.specularColor.value.copy(O.specularColor),O.specularIntensityMap&&(w.specularIntensityMap.value=O.specularIntensityMap),O.specularColorMap&&(w.specularColorMap.value=O.specularColorMap)}(w,O,M)):O.isMeshMatcapMaterial?(d(w,O),function C(w,O){O.matcap&&(w.matcap.value=O.matcap)}(w,O)):O.isMeshDepthMaterial?d(w,O):O.isMeshDistanceMaterial?(d(w,O),function x(w,O){w.referencePosition.value.copy(O.referencePosition),w.nearDistance.value=O.nearDistance,w.farDistance.value=O.farDistance}(w,O)):O.isMeshNormalMaterial?d(w,O):O.isLineBasicMaterial?(function f(w,O){w.diffuse.value.copy(O.color),w.opacity.value=O.opacity}(w,O),O.isLineDashedMaterial&&function p(w,O){w.dashSize.value=O.dashSize,w.totalSize.value=O.dashSize+O.gapSize,w.scale.value=O.scale}(w,O)):O.isPointsMaterial?function g(w,O,D,T){let M;w.diffuse.value.copy(O.color),w.opacity.value=O.opacity,w.size.value=O.size*D,w.scale.value=.5*T,O.map&&(w.map.value=O.map),O.alphaMap&&(w.alphaMap.value=O.alphaMap),O.alphaTest>0&&(w.alphaTest.value=O.alphaTest),O.map?M=O.map:O.alphaMap&&(M=O.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),w.uvTransform.value.copy(M.matrix))}(w,O,D,T):O.isSpriteMaterial?function m(w,O){let D;w.diffuse.value.copy(O.color),w.opacity.value=O.opacity,w.rotation.value=O.rotation,O.map&&(w.map.value=O.map),O.alphaMap&&(w.alphaMap.value=O.alphaMap),O.alphaTest>0&&(w.alphaTest.value=O.alphaTest),O.map?D=O.map:O.alphaMap&&(D=O.alphaMap),void 0!==D&&(!0===D.matrixAutoUpdate&&D.updateMatrix(),w.uvTransform.value.copy(D.matrix))}(w,O):O.isShadowMaterial?(w.color.value.copy(O.color),w.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}}}function B1e(c={}){this.isWebGLRenderer=!0;const a=void 0!==c.canvas?c.canvas:function q1t(){const c=KO("canvas");return c.style.display="block",c}(),l=void 0!==c.context?c.context:null,h=void 0===c.depth||c.depth,d=void 0===c.stencil||c.stencil,f=void 0!==c.antialias&&c.antialias,p=void 0===c.premultipliedAlpha||c.premultipliedAlpha,g=void 0!==c.preserveDrawingBuffer&&c.preserveDrawingBuffer,m=void 0!==c.powerPreference?c.powerPreference:"default",v=void 0!==c.failIfMajorPerformanceCaveat&&c.failIfMajorPerformanceCaveat;let y;y=null!==l?l.getContextAttributes().alpha:void 0!==c.alpha&&c.alpha;let _=null,b=null;const C=[],x=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=hv,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const w=this;let O=!1,D=0,T=0,M=null,k=-1,E=null;const P=new pr,V=new pr;let I=null,U=a.width,$=a.height,H=1,J=null,ee=null;const B=new pr(0,0,U,$),G=new pr(0,0,U,$);let W=!1;const j=new TW;let Q=!1,X=!1,Y=null;const ne=new Oi,re=new yt,fe=new ae,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function De(){return null===M?H:1}let qe,Le,ze,it,ve,Ue,st,dt,tt,Ie,et,Gt,Tn,Zn,ye,ce,ft,Dt,Xt,Vt,Ut,nt,rn,we=l;function Fe(_e,ut){for(let Ct=0;Ct<_e.length;Ct++){const Rt=a.getContext(_e[Ct],ut);if(null!==Rt)return Rt}return null}try{const _e={alpha:!0,depth:h,stencil:d,antialias:f,premultipliedAlpha:p,preserveDrawingBuffer:g,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in a&&a.setAttribute("data-engine","three.js r142"),a.addEventListener("webglcontextlost",Be,!1),a.addEventListener("webglcontextrestored",hn,!1),a.addEventListener("webglcontextcreationerror",an,!1),null===we){const ut=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&ut.shift(),we=Fe(ut,_e),null===we)throw Fe(ut)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===we.getShaderPrecisionFormat&&(we.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}function Kt(){qe=new l_t(we),Le=new n_t(we,qe,c),qe.init(Le),nt=new $1t(we,qe,Le),ze=new z1t(we,qe,Le),it=new h_t,ve=new M1t,Ue=new H1t(we,qe,ze,ve,Le,nt,it),st=new r_t(w),dt=new a_t(w),tt=new tvt(we,Le),rn=new e_t(we,qe,tt,Le),Ie=new c_t(we,tt,it,rn),et=new g_t(we,Ie,tt,it),Xt=new p_t(we,Le,Ue),ce=new i_t(ve),Gt=new k1t(w,st,dt,qe,Le,rn,ce),Tn=new Z1t(w,ve),Zn=new A1t,ye=new N1t(qe,Le),Dt=new Jyt(w,st,ze,et,y,p),ft=new U1t(w,et,Le),Vt=new t_t(we,qe,it,Le),Ut=new u_t(we,qe,it,Le),it.programs=Gt.programs,w.capabilities=Le,w.extensions=qe,w.properties=ve,w.renderLists=Zn,w.shadowMap=ft,w.state=ze,w.info=it}Kt();const Cn=new j1t(w,we);function Be(_e){_e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function hn(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const _e=it.autoReset,ut=ft.enabled,Ct=ft.autoUpdate,mt=ft.needsUpdate,Rt=ft.type;Kt(),it.autoReset=_e,ft.enabled=ut,ft.autoUpdate=Ct,ft.needsUpdate=mt,ft.type=Rt}function an(_e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",_e.statusMessage)}function Si(_e){const ut=_e.target;ut.removeEventListener("dispose",Si),function zn(_e){(function Pi(_e){const ut=ve.get(_e).programs;void 0!==ut&&(ut.forEach(function(Ct){Gt.releaseProgram(Ct)}),_e.isShaderMaterial&&Gt.releaseShaderCache(_e))})(_e),ve.remove(_e)}(ut)}this.xr=Cn,this.getContext=function(){return we},this.getContextAttributes=function(){return we.getContextAttributes()},this.forceContextLoss=function(){const _e=qe.get("WEBGL_lose_context");_e&&_e.loseContext()},this.forceContextRestore=function(){const _e=qe.get("WEBGL_lose_context");_e&&_e.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(_e){void 0!==_e&&(H=_e,this.setSize(U,$,!1))},this.getSize=function(_e){return _e.set(U,$)},this.setSize=function(_e,ut,Ct){Cn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(U=_e,$=ut,a.width=Math.floor(_e*H),a.height=Math.floor(ut*H),!1!==Ct&&(a.style.width=_e+"px",a.style.height=ut+"px"),this.setViewport(0,0,_e,ut))},this.getDrawingBufferSize=function(_e){return _e.set(U*H,$*H).floor()},this.setDrawingBufferSize=function(_e,ut,Ct){U=_e,$=ut,H=Ct,a.width=Math.floor(_e*Ct),a.height=Math.floor(ut*Ct),this.setViewport(0,0,_e,ut)},this.getCurrentViewport=function(_e){return _e.copy(P)},this.getViewport=function(_e){return _e.copy(B)},this.setViewport=function(_e,ut,Ct,mt){_e.isVector4?B.set(_e.x,_e.y,_e.z,_e.w):B.set(_e,ut,Ct,mt),ze.viewport(P.copy(B).multiplyScalar(H).floor())},this.getScissor=function(_e){return _e.copy(G)},this.setScissor=function(_e,ut,Ct,mt){_e.isVector4?G.set(_e.x,_e.y,_e.z,_e.w):G.set(_e,ut,Ct,mt),ze.scissor(V.copy(G).multiplyScalar(H).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(_e){ze.setScissorTest(W=_e)},this.setOpaqueSort=function(_e){J=_e},this.setTransparentSort=function(_e){ee=_e},this.getClearColor=function(_e){return _e.copy(Dt.getClearColor())},this.setClearColor=function(){Dt.setClearColor.apply(Dt,arguments)},this.getClearAlpha=function(){return Dt.getClearAlpha()},this.setClearAlpha=function(){Dt.setClearAlpha.apply(Dt,arguments)},this.clear=function(_e=!0,ut=!0,Ct=!0){let mt=0;_e&&(mt|=16384),ut&&(mt|=256),Ct&&(mt|=1024),we.clear(mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",Be,!1),a.removeEventListener("webglcontextrestored",hn,!1),a.removeEventListener("webglcontextcreationerror",an,!1),Zn.dispose(),ye.dispose(),ve.dispose(),st.dispose(),dt.dispose(),et.dispose(),rn.dispose(),Gt.dispose(),Cn.dispose(),Cn.removeEventListener("sessionstart",zr),Cn.removeEventListener("sessionend",Hr),Y&&(Y.dispose(),Y=null),Vl.stop()},this.renderBufferDirect=function(_e,ut,Ct,mt,Rt,Di){null===ut&&(ut=de);const Wi=Rt.isMesh&&Rt.matrixWorld.determinant()<0,sr=function bkt(_e,ut,Ct,mt,Rt){!0!==ut.isScene&&(ut=de),Ue.resetTextureUnits();const Di=ut.fog,sr=null===M?w.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:hv,er=(mt.isMeshStandardMaterial?dt:st).get(mt.envMap||(mt.isMeshStandardMaterial?ut.environment:null)),$r=!0===mt.vertexColors&&!!Ct.attributes.color&&4===Ct.attributes.color.itemSize,Cr=!!mt.normalMap&&!!Ct.attributes.tangent,Or=!!Ct.morphAttributes.position,no=!!Ct.morphAttributes.normal,Fv=!!Ct.morphAttributes.color,aC=mt.toneMapped?w.toneMapping:0,lC=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,cf=void 0!==lC?lC.length:0,Nr=ve.get(mt),cC=b.state.lights;!0!==Q||!0!==X&&_e===E||ce.setState(mt,_e,_e===E&&mt.id===k);let Eo=!1;mt.version===Nr.__version?(Nr.needsLights&&Nr.lightsStateVersion!==cC.state.version||Nr.outputEncoding!==sr||Rt.isInstancedMesh&&!1===Nr.instancing||!Rt.isInstancedMesh&&!0===Nr.instancing||Rt.isSkinnedMesh&&!1===Nr.skinning||!Rt.isSkinnedMesh&&!0===Nr.skinning||Nr.envMap!==er||!0===mt.fog&&Nr.fog!==Di||void 0!==Nr.numClippingPlanes&&(Nr.numClippingPlanes!==ce.numPlanes||Nr.numIntersection!==ce.numIntersection)||Nr.vertexAlphas!==$r||Nr.vertexTangents!==Cr||Nr.morphTargets!==Or||Nr.morphNormals!==no||Nr.morphColors!==Fv||Nr.toneMapping!==aC||!0===Le.isWebGL2&&Nr.morphTargetsCount!==cf)&&(Eo=!0):(Eo=!0,Nr.__version=mt.version);let uf=Nr.currentProgram;!0===Eo&&(uf=gQ(mt,ut,Rt));let fm=!1,B2=!1,mQ=!1;const Ul=uf.getUniforms(),V2=Nr.uniforms;if(ze.useProgram(uf.program)&&(fm=!0,B2=!0,mQ=!0),mt.id!==k&&(k=mt.id,B2=!0),fm||E!==_e){if(Ul.setValue(we,"projectionMatrix",_e.projectionMatrix),Le.logarithmicDepthBuffer&&Ul.setValue(we,"logDepthBufFC",2/(Math.log(_e.far+1)/Math.LN2)),E!==_e&&(E=_e,B2=!0,mQ=!0),mt.isShaderMaterial||mt.isMeshPhongMaterial||mt.isMeshToonMaterial||mt.isMeshStandardMaterial||mt.envMap){const hf=Ul.map.cameraPosition;void 0!==hf&&hf.setValue(we,fe.setFromMatrixPosition(_e.matrixWorld))}(mt.isMeshPhongMaterial||mt.isMeshToonMaterial||mt.isMeshLambertMaterial||mt.isMeshBasicMaterial||mt.isMeshStandardMaterial||mt.isShaderMaterial)&&Ul.setValue(we,"isOrthographic",!0===_e.isOrthographicCamera),(mt.isMeshPhongMaterial||mt.isMeshToonMaterial||mt.isMeshLambertMaterial||mt.isMeshBasicMaterial||mt.isMeshStandardMaterial||mt.isShaderMaterial||mt.isShadowMaterial||Rt.isSkinnedMesh)&&Ul.setValue(we,"viewMatrix",_e.matrixWorldInverse)}if(Rt.isSkinnedMesh){Ul.setOptional(we,Rt,"bindMatrix"),Ul.setOptional(we,Rt,"bindMatrixInverse");const hf=Rt.skeleton;hf&&(Le.floatVertexTextures?(null===hf.boneTexture&&hf.computeBoneTexture(),Ul.setValue(we,"boneTexture",hf.boneTexture,Ue),Ul.setValue(we,"boneTextureSize",hf.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const vQ=Ct.morphAttributes;return(void 0!==vQ.position||void 0!==vQ.normal||void 0!==vQ.color&&!0===Le.isWebGL2)&&Xt.update(Rt,Ct,mt,uf),(B2||Nr.receiveShadow!==Rt.receiveShadow)&&(Nr.receiveShadow=Rt.receiveShadow,Ul.setValue(we,"receiveShadow",Rt.receiveShadow)),B2&&(Ul.setValue(we,"toneMappingExposure",w.toneMappingExposure),Nr.needsLights&&function Ckt(_e,ut){_e.ambientLightColor.needsUpdate=ut,_e.lightProbe.needsUpdate=ut,_e.directionalLights.needsUpdate=ut,_e.directionalLightShadows.needsUpdate=ut,_e.pointLights.needsUpdate=ut,_e.pointLightShadows.needsUpdate=ut,_e.spotLights.needsUpdate=ut,_e.spotLightShadows.needsUpdate=ut,_e.rectAreaLights.needsUpdate=ut,_e.hemisphereLights.needsUpdate=ut}(V2,mQ),Di&&!0===mt.fog&&Tn.refreshFogUniforms(V2,Di),Tn.refreshMaterialUniforms(V2,mt,H,$,Y),DI.upload(we,Nr.uniformsList,V2,Ue)),mt.isShaderMaterial&&!0===mt.uniformsNeedUpdate&&(DI.upload(we,Nr.uniformsList,V2,Ue),mt.uniformsNeedUpdate=!1),mt.isSpriteMaterial&&Ul.setValue(we,"center",Rt.center),Ul.setValue(we,"modelViewMatrix",Rt.modelViewMatrix),Ul.setValue(we,"normalMatrix",Rt.normalMatrix),Ul.setValue(we,"modelMatrix",Rt.matrixWorld),uf}(_e,ut,Ct,mt,Rt);ze.setMaterial(mt,Wi);let er=Ct.index;const $r=Ct.attributes.position;if(null===er){if(void 0===$r||0===$r.count)return}else if(0===er.count)return;let Cr=1;!0===mt.wireframe&&(er=Ie.getWireframeAttribute(Ct),Cr=2),rn.setup(Rt,mt,sr,Ct,er);let Or,no=Vt;null!==er&&(Or=tt.get(er),no=Ut,no.setIndex(Or));const Fv=null!==er?er.count:$r.count,aC=Ct.drawRange.start*Cr,lC=Ct.drawRange.count*Cr,cf=null!==Di?Di.start*Cr:0,Nr=null!==Di?Di.count*Cr:1/0,cC=Math.max(aC,cf),Eo=Math.min(Fv,aC+lC,cf+Nr)-1,uf=Math.max(0,Eo-cC+1);if(0!==uf){if(Rt.isMesh)!0===mt.wireframe?(ze.setLineWidth(mt.wireframeLinewidth*De()),no.setMode(1)):no.setMode(4);else if(Rt.isLine){let fm=mt.linewidth;void 0===fm&&(fm=1),ze.setLineWidth(fm*De()),no.setMode(Rt.isLineSegments?1:Rt.isLineLoop?2:3)}else Rt.isPoints?no.setMode(0):Rt.isSprite&&no.setMode(4);if(Rt.isInstancedMesh)no.renderInstances(cC,uf,Rt.count);else if(Ct.isInstancedBufferGeometry){const fm=Math.min(Ct.instanceCount,Ct._maxInstanceCount);no.renderInstances(cC,uf,fm)}else no.render(cC,uf)}},this.compile=function(_e,ut){b=ye.get(_e),b.init(),x.push(b),_e.traverseVisible(function(Ct){Ct.isLight&&Ct.layers.test(ut.layers)&&(b.pushLight(Ct),Ct.castShadow&&b.pushShadow(Ct))}),b.setupLights(w.physicallyCorrectLights),_e.traverse(function(Ct){const mt=Ct.material;if(mt)if(Array.isArray(mt))for(let Rt=0;Rt<mt.length;Rt++)gQ(mt[Rt],_e,Ct);else gQ(mt,_e,Ct)}),x.pop(),b=null};let on=null;function zr(){Vl.stop()}function Hr(){Vl.start()}const Vl=new c1e;function lf(_e,ut,Ct,mt){if(!1===_e.visible)return;if(_e.layers.test(ut.layers))if(_e.isGroup)Ct=_e.renderOrder;else if(_e.isLOD)!0===_e.autoUpdate&&_e.update(ut);else if(_e.isLight)b.pushLight(_e),_e.castShadow&&b.pushShadow(_e);else if(_e.isSprite){if(!_e.frustumCulled||j.intersectsSprite(_e)){mt&&fe.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(ne);const Wi=et.update(_e),sr=_e.material;sr.visible&&_.push(_e,Wi,sr,Ct,fe.z,null)}}else if((_e.isMesh||_e.isLine||_e.isPoints)&&(_e.isSkinnedMesh&&_e.skeleton.frame!==it.render.frame&&(_e.skeleton.update(),_e.skeleton.frame=it.render.frame),!_e.frustumCulled||j.intersectsObject(_e))){mt&&fe.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(ne);const Wi=et.update(_e),sr=_e.material;if(Array.isArray(sr)){const er=Wi.groups;for(let $r=0,Cr=er.length;$r<Cr;$r++){const Or=er[$r],no=sr[Or.materialIndex];no&&no.visible&&_.push(_e,Wi,no,Ct,fe.z,Or)}}else sr.visible&&_.push(_e,Wi,sr,Ct,fe.z,null)}const Di=_e.children;for(let Wi=0,sr=Di.length;Wi<sr;Wi++)lf(Di[Wi],ut,Ct,mt)}function kxe(_e,ut,Ct,mt){const Rt=_e.opaque,Di=_e.transmissive,Wi=_e.transparent;b.setupLightsView(Ct),Di.length>0&&function ykt(_e,ut,Ct){const mt=Le.isWebGL2;null===Y&&(Y=new Fl(1,1,{generateMipmaps:!0,type:qe.has("EXT_color_buffer_half_float")?qO:lv,minFilter:1008,samples:mt&&!0===f?4:0})),w.getDrawingBufferSize(re),mt?Y.setSize(re.x,re.y):Y.setSize(eI(re.x),eI(re.y));const Rt=w.getRenderTarget();w.setRenderTarget(Y),w.clear();const Di=w.toneMapping;w.toneMapping=0,jP(_e,ut,Ct),w.toneMapping=Di,Ue.updateMultisampleRenderTarget(Y),Ue.updateRenderTargetMipmap(Y),w.setRenderTarget(Rt)}(Rt,ut,Ct),mt&&ze.viewport(P.copy(mt)),Rt.length>0&&jP(Rt,ut,Ct),Di.length>0&&jP(Di,ut,Ct),Wi.length>0&&jP(Wi,ut,Ct),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function jP(_e,ut,Ct){const mt=!0===ut.isScene?ut.overrideMaterial:null;for(let Rt=0,Di=_e.length;Rt<Di;Rt++){const Wi=_e[Rt],sr=Wi.object,er=Wi.geometry,$r=null===mt?Wi.material:mt,Cr=Wi.group;sr.layers.test(Ct.layers)&&_kt(sr,ut,Ct,er,$r,Cr)}}function _kt(_e,ut,Ct,mt,Rt,Di){_e.onBeforeRender(w,ut,Ct,mt,Rt,Di),_e.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,_e.matrixWorld),_e.normalMatrix.getNormalMatrix(_e.modelViewMatrix),Rt.onBeforeRender(w,ut,Ct,mt,_e,Di),!0===Rt.transparent&&2===Rt.side?(Rt.side=1,Rt.needsUpdate=!0,w.renderBufferDirect(Ct,ut,mt,Rt,_e,Di),Rt.side=0,Rt.needsUpdate=!0,w.renderBufferDirect(Ct,ut,mt,Rt,_e,Di),Rt.side=2):w.renderBufferDirect(Ct,ut,mt,Rt,_e,Di),_e.onAfterRender(w,ut,Ct,mt,Rt,Di)}function gQ(_e,ut,Ct){!0!==ut.isScene&&(ut=de);const mt=ve.get(_e),Rt=b.state.lights,Wi=Rt.state.version,sr=Gt.getParameters(_e,Rt.state,b.state.shadowsArray,ut,Ct),er=Gt.getProgramCacheKey(sr);let $r=mt.programs;mt.environment=_e.isMeshStandardMaterial?ut.environment:null,mt.fog=ut.fog,mt.envMap=(_e.isMeshStandardMaterial?dt:st).get(_e.envMap||mt.environment),void 0===$r&&(_e.addEventListener("dispose",Si),$r=new Map,mt.programs=$r);let Cr=$r.get(er);if(void 0!==Cr){if(mt.currentProgram===Cr&&mt.lightsStateVersion===Wi)return Mxe(_e,sr),Cr}else sr.uniforms=Gt.getUniforms(_e),_e.onBuild(Ct,sr,w),_e.onBeforeCompile(sr,w),Cr=Gt.acquireProgram(sr,er),$r.set(er,Cr),mt.uniforms=sr.uniforms;const Or=mt.uniforms;(!_e.isShaderMaterial&&!_e.isRawShaderMaterial||!0===_e.clipping)&&(Or.clippingPlanes=ce.uniform),Mxe(_e,sr),mt.needsLights=function Skt(_e){return _e.isMeshLambertMaterial||_e.isMeshToonMaterial||_e.isMeshPhongMaterial||_e.isMeshStandardMaterial||_e.isShadowMaterial||_e.isShaderMaterial&&!0===_e.lights}(_e),mt.lightsStateVersion=Wi,mt.needsLights&&(Or.ambientLightColor.value=Rt.state.ambient,Or.lightProbe.value=Rt.state.probe,Or.directionalLights.value=Rt.state.directional,Or.directionalLightShadows.value=Rt.state.directionalShadow,Or.spotLights.value=Rt.state.spot,Or.spotLightShadows.value=Rt.state.spotShadow,Or.rectAreaLights.value=Rt.state.rectArea,Or.ltc_1.value=Rt.state.rectAreaLTC1,Or.ltc_2.value=Rt.state.rectAreaLTC2,Or.pointLights.value=Rt.state.point,Or.pointLightShadows.value=Rt.state.pointShadow,Or.hemisphereLights.value=Rt.state.hemi,Or.directionalShadowMap.value=Rt.state.directionalShadowMap,Or.directionalShadowMatrix.value=Rt.state.directionalShadowMatrix,Or.spotShadowMap.value=Rt.state.spotShadowMap,Or.spotShadowMatrix.value=Rt.state.spotShadowMatrix,Or.pointShadowMap.value=Rt.state.pointShadowMap,Or.pointShadowMatrix.value=Rt.state.pointShadowMatrix);const no=Cr.getUniforms(),Fv=DI.seqWithValue(no.seq,Or);return mt.currentProgram=Cr,mt.uniformsList=Fv,Cr}function Mxe(_e,ut){const Ct=ve.get(_e);Ct.outputEncoding=ut.outputEncoding,Ct.instancing=ut.instancing,Ct.skinning=ut.skinning,Ct.morphTargets=ut.morphTargets,Ct.morphNormals=ut.morphNormals,Ct.morphColors=ut.morphColors,Ct.morphTargetsCount=ut.morphTargetsCount,Ct.numClippingPlanes=ut.numClippingPlanes,Ct.numIntersection=ut.numClipIntersection,Ct.vertexAlphas=ut.vertexAlphas,Ct.vertexTangents=ut.vertexTangents,Ct.toneMapping=ut.toneMapping}Vl.setAnimationLoop(function Ri(_e){on&&on(_e)}),typeof self<"u"&&Vl.setContext(self),this.setAnimationLoop=function(_e){on=_e,Cn.setAnimationLoop(_e),null===_e?Vl.stop():Vl.start()},Cn.addEventListener("sessionstart",zr),Cn.addEventListener("sessionend",Hr),this.render=function(_e,ut){if(void 0===ut||!0===ut.isCamera){if(!0!==O){if(!0===_e.autoUpdate&&_e.updateMatrixWorld(),null===ut.parent&&ut.updateMatrixWorld(),!0===Cn.enabled&&!0===Cn.isPresenting&&(!0===Cn.cameraAutoUpdate&&Cn.updateCamera(ut),ut=Cn.getCamera()),!0===_e.isScene&&_e.onBeforeRender(w,_e,ut,M),b=ye.get(_e,x.length),b.init(),x.push(b),ne.multiplyMatrices(ut.projectionMatrix,ut.matrixWorldInverse),j.setFromProjectionMatrix(ne),X=this.localClippingEnabled,Q=ce.init(this.clippingPlanes,X,ut),_=Zn.get(_e,C.length),_.init(),C.push(_),lf(_e,ut,0,w.sortObjects),_.finish(),!0===w.sortObjects&&_.sort(J,ee),!0===Q&&ce.beginShadows(),ft.render(b.state.shadowsArray,_e,ut),!0===Q&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset(),Dt.render(_,_e),b.setupLights(w.physicallyCorrectLights),ut.isArrayCamera){const mt=ut.cameras;for(let Rt=0,Di=mt.length;Rt<Di;Rt++){const Wi=mt[Rt];kxe(_,_e,Wi,Wi.viewport)}}else kxe(_,_e,ut);null!==M&&(Ue.updateMultisampleRenderTarget(M),Ue.updateRenderTargetMipmap(M)),!0===_e.isScene&&_e.onAfterRender(w,_e,ut),rn.resetDefaultState(),k=-1,E=null,x.pop(),b=x.length>0?x[x.length-1]:null,C.pop(),_=C.length>0?C[C.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(_e,ut,Ct){ve.get(_e.texture).__webglTexture=ut,ve.get(_e.depthTexture).__webglTexture=Ct;const mt=ve.get(_e);mt.__hasExternalTextures=!0,mt.__hasExternalTextures&&(mt.__autoAllocateDepthBuffer=void 0===Ct,mt.__autoAllocateDepthBuffer||!0===qe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),mt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(_e,ut){const Ct=ve.get(_e);Ct.__webglFramebuffer=ut,Ct.__useDefaultFramebuffer=void 0===ut},this.setRenderTarget=function(_e,ut=0,Ct=0){M=_e,D=ut,T=Ct;let mt=!0;if(_e){const er=ve.get(_e);void 0!==er.__useDefaultFramebuffer?(ze.bindFramebuffer(36160,null),mt=!1):void 0===er.__webglFramebuffer?Ue.setupRenderTarget(_e):er.__hasExternalTextures&&Ue.rebindTextures(_e,ve.get(_e.texture).__webglTexture,ve.get(_e.depthTexture).__webglTexture)}let Rt=null,Di=!1,Wi=!1;if(_e){const er=_e.texture;(er.isData3DTexture||er.isDataArrayTexture)&&(Wi=!0);const $r=ve.get(_e).__webglFramebuffer;_e.isWebGLCubeRenderTarget?(Rt=$r[ut],Di=!0):Rt=Le.isWebGL2&&_e.samples>0&&!1===Ue.useMultisampledRTT(_e)?ve.get(_e).__webglMultisampledFramebuffer:$r,P.copy(_e.viewport),V.copy(_e.scissor),I=_e.scissorTest}else P.copy(B).multiplyScalar(H).floor(),V.copy(G).multiplyScalar(H).floor(),I=W;if(ze.bindFramebuffer(36160,Rt)&&Le.drawBuffers&&mt&&ze.drawBuffers(_e,Rt),ze.viewport(P),ze.scissor(V),ze.setScissorTest(I),Di){const er=ve.get(_e.texture);we.framebufferTexture2D(36160,36064,34069+ut,er.__webglTexture,Ct)}else if(Wi){const er=ve.get(_e.texture);we.framebufferTextureLayer(36160,36064,er.__webglTexture,Ct||0,ut||0)}k=-1},this.readRenderTargetPixels=function(_e,ut,Ct,mt,Rt,Di,Wi){if(!_e||!_e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let sr=ve.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&void 0!==Wi&&(sr=sr[Wi]),sr){ze.bindFramebuffer(36160,sr);try{const er=_e.texture,$r=er.format,Cr=er.type;if($r!==Rh&&nt.convert($r)!==we.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Or=Cr===qO&&(qe.has("EXT_color_buffer_half_float")||Le.isWebGL2&&qe.has("EXT_color_buffer_float"));if(!(Cr===lv||nt.convert(Cr)===we.getParameter(35738)||Cr===jg&&(Le.isWebGL2||qe.has("OES_texture_float")||qe.has("WEBGL_color_buffer_float"))||Or))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ut>=0&&ut<=_e.width-mt&&Ct>=0&&Ct<=_e.height-Rt&&we.readPixels(ut,Ct,mt,Rt,nt.convert($r),nt.convert(Cr),Di)}finally{const er=null!==M?ve.get(M).__webglFramebuffer:null;ze.bindFramebuffer(36160,er)}}},this.copyFramebufferToTexture=function(_e,ut,Ct=0){const mt=Math.pow(2,-Ct),Rt=Math.floor(ut.image.width*mt),Di=Math.floor(ut.image.height*mt);Ue.setTexture2D(ut,0),we.copyTexSubImage2D(3553,Ct,0,0,_e.x,_e.y,Rt,Di),ze.unbindTexture()},this.copyTextureToTexture=function(_e,ut,Ct,mt=0){const Rt=ut.image.width,Di=ut.image.height,Wi=nt.convert(Ct.format),sr=nt.convert(Ct.type);Ue.setTexture2D(Ct,0),we.pixelStorei(37440,Ct.flipY),we.pixelStorei(37441,Ct.premultiplyAlpha),we.pixelStorei(3317,Ct.unpackAlignment),ut.isDataTexture?we.texSubImage2D(3553,mt,_e.x,_e.y,Rt,Di,Wi,sr,ut.image.data):ut.isCompressedTexture?we.compressedTexSubImage2D(3553,mt,_e.x,_e.y,ut.mipmaps[0].width,ut.mipmaps[0].height,Wi,ut.mipmaps[0].data):we.texSubImage2D(3553,mt,_e.x,_e.y,Wi,sr,ut.image),0===mt&&Ct.generateMipmaps&&we.generateMipmap(3553),ze.unbindTexture()},this.copyTextureToTexture3D=function(_e,ut,Ct,mt,Rt=0){if(w.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Di=_e.max.x-_e.min.x+1,Wi=_e.max.y-_e.min.y+1,sr=_e.max.z-_e.min.z+1,er=nt.convert(mt.format),$r=nt.convert(mt.type);let Cr;if(mt.isData3DTexture)Ue.setTexture3D(mt,0),Cr=32879;else{if(!mt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ue.setTexture2DArray(mt,0),Cr=35866}we.pixelStorei(37440,mt.flipY),we.pixelStorei(37441,mt.premultiplyAlpha),we.pixelStorei(3317,mt.unpackAlignment);const Or=we.getParameter(3314),no=we.getParameter(32878),Fv=we.getParameter(3316),aC=we.getParameter(3315),lC=we.getParameter(32877),cf=Ct.isCompressedTexture?Ct.mipmaps[0]:Ct.image;we.pixelStorei(3314,cf.width),we.pixelStorei(32878,cf.height),we.pixelStorei(3316,_e.min.x),we.pixelStorei(3315,_e.min.y),we.pixelStorei(32877,_e.min.z),Ct.isDataTexture||Ct.isData3DTexture?we.texSubImage3D(Cr,Rt,ut.x,ut.y,ut.z,Di,Wi,sr,er,$r,cf.data):Ct.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),we.compressedTexSubImage3D(Cr,Rt,ut.x,ut.y,ut.z,Di,Wi,sr,er,cf.data)):we.texSubImage3D(Cr,Rt,ut.x,ut.y,ut.z,Di,Wi,sr,er,$r,cf),we.pixelStorei(3314,Or),we.pixelStorei(32878,no),we.pixelStorei(3316,Fv),we.pixelStorei(3315,aC),we.pixelStorei(32877,lC),0===Rt&&mt.generateMipmaps&&we.generateMipmap(Cr),ze.unbindTexture()},this.initTexture=function(_e){_e.isCubeTexture?Ue.setTextureCube(_e,0):_e.isData3DTexture?Ue.setTexture3D(_e,0):_e.isDataArrayTexture?Ue.setTexture2DArray(_e,0):Ue.setTexture2D(_e,0),ze.unbindTexture()},this.resetState=function(){D=0,T=0,M=null,ze.reset(),rn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class X1t extends B1e{}).prototype.isWebGL1Renderer=!0;class s2 extends qc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,l){return super.copy(a,l),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}toJSON(a){const l=super.toJSON(a);return null!==this.fog&&(l.object.fog=this.fog.toJSON()),l}}class Qb extends Yd{constructor(a=null,l=1,h=1,d,f,p,g,m,v=Zo,y=Zo,_,b){super(null,p,g,m,v,y,d,f,_,b),this.isDataTexture=!0,this.image={data:a,width:l,height:h},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lbe extends Yd{constructor(a,l,h,d,f,p,g,m,v){super(a,l,h,d,f,p,g,m,v),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Jd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(a,l){const h=this.getUtoTmapping(a);return this.getPoint(h,l)}getPoints(a=5){const l=[];for(let h=0;h<=a;h++)l.push(this.getPoint(h/a));return l}getSpacedPoints(a=5){const l=[];for(let h=0;h<=a;h++)l.push(this.getPointAt(h/a));return l}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const l=[];let h,d=this.getPoint(0),f=0;l.push(0);for(let p=1;p<=a;p++)h=this.getPoint(p/a),f+=h.distanceTo(d),l.push(f),d=h;return this.cacheArcLengths=l,l}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(a,l){const h=this.getLengths();let d=0;const f=h.length;let p;p=l||a*h[f-1];let v,g=0,m=f-1;for(;g<=m;)if(d=Math.floor(g+(m-g)/2),v=h[d]-p,v<0)g=d+1;else{if(!(v>0)){m=d;break}m=d-1}if(d=m,h[d]===p)return d/(f-1);const y=h[d];return(d+(p-y)/(h[d+1]-y))/(f-1)}getTangent(a,l){let d=a-1e-4,f=a+1e-4;d<0&&(d=0),f>1&&(f=1);const p=this.getPoint(d),g=this.getPoint(f),m=l||(p.isVector2?new yt:new ae);return m.copy(g).sub(p).normalize(),m}getTangentAt(a,l){const h=this.getUtoTmapping(a);return this.getTangent(h,l)}computeFrenetFrames(a,l){const h=new ae,d=[],f=[],p=[],g=new ae,m=new Oi;for(let C=0;C<=a;C++)d[C]=this.getTangentAt(C/a,new ae);f[0]=new ae,p[0]=new ae;let v=Number.MAX_VALUE;const y=Math.abs(d[0].x),_=Math.abs(d[0].y),b=Math.abs(d[0].z);y<=v&&(v=y,h.set(1,0,0)),_<=v&&(v=_,h.set(0,1,0)),b<=v&&h.set(0,0,1),g.crossVectors(d[0],h).normalize(),f[0].crossVectors(d[0],g),p[0].crossVectors(d[0],f[0]);for(let C=1;C<=a;C++){if(f[C]=f[C-1].clone(),p[C]=p[C-1].clone(),g.crossVectors(d[C-1],d[C]),g.length()>Number.EPSILON){g.normalize();const x=Math.acos(lo(d[C-1].dot(d[C]),-1,1));f[C].applyMatrix4(m.makeRotationAxis(g,x))}p[C].crossVectors(d[C],f[C])}if(!0===l){let C=Math.acos(lo(f[0].dot(f[a]),-1,1));C/=a,d[0].dot(g.crossVectors(f[0],f[a]))>0&&(C=-C);for(let x=1;x<=a;x++)f[x].applyMatrix4(m.makeRotationAxis(d[x],C*x)),p[x].crossVectors(d[x],f[x])}return{tangents:d,normals:f,binormals:p}}clone(){return(new this.constructor).copy(this)}copy(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return a.arcLengthDivisions=this.arcLengthDivisions,a.type=this.type,a}fromJSON(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}}class HW extends Jd{constructor(a=0,l=0,h=1,d=1,f=0,p=2*Math.PI,g=!1,m=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=a,this.aY=l,this.xRadius=h,this.yRadius=d,this.aStartAngle=f,this.aEndAngle=p,this.aClockwise=g,this.aRotation=m}getPoint(a,l){const h=l||new yt,d=2*Math.PI;let f=this.aEndAngle-this.aStartAngle;const p=Math.abs(f)<Number.EPSILON;for(;f<0;)f+=d;for(;f>d;)f-=d;f<Number.EPSILON&&(f=p?0:d),!0===this.aClockwise&&!p&&(f===d?f=-d:f-=d);const g=this.aStartAngle+a*f;let m=this.aX+this.xRadius*Math.cos(g),v=this.aY+this.yRadius*Math.sin(g);if(0!==this.aRotation){const y=Math.cos(this.aRotation),_=Math.sin(this.aRotation),b=m-this.aX,C=v-this.aY;m=b*y-C*_+this.aX,v=b*_+C*y+this.aY}return h.set(m,v)}copy(a){return super.copy(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}toJSON(){const a=super.toJSON();return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}fromJSON(a){return super.fromJSON(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}function $W(){let c=0,a=0,l=0,h=0;function d(f,p,g,m){c=f,a=g,l=-3*f+3*p-2*g-m,h=2*f-2*p+g+m}return{initCatmullRom:function(f,p,g,m,v){d(p,g,v*(g-f),v*(m-p))},initNonuniformCatmullRom:function(f,p,g,m,v,y,_){let b=(p-f)/v-(g-f)/(v+y)+(g-p)/y,C=(g-p)/y-(m-p)/(y+_)+(m-g)/_;b*=y,C*=y,d(p,g,b,C)},calc:function(f){const p=f*f;return c+a*f+l*p+h*(p*f)}}}const LI=new ae,WW=new $W,GW=new $W,QW=new $W;class cbe extends Jd{constructor(a=[],l=!1,h="centripetal",d=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=a,this.closed=l,this.curveType=h,this.tension=d}getPoint(a,l=new ae){const h=l,d=this.points,f=d.length,p=(f-(this.closed?0:1))*a;let v,y,g=Math.floor(p),m=p-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/f)+1)*f:0===m&&g===f-1&&(g=f-2,m=1),this.closed||g>0?v=d[(g-1)%f]:(LI.subVectors(d[0],d[1]).add(d[0]),v=LI);const _=d[g%f],b=d[(g+1)%f];if(this.closed||g+2<f?y=d[(g+2)%f]:(LI.subVectors(d[f-1],d[f-2]).add(d[f-1]),y=LI),"centripetal"===this.curveType||"chordal"===this.curveType){const C="chordal"===this.curveType?.5:.25;let x=Math.pow(v.distanceToSquared(_),C),w=Math.pow(_.distanceToSquared(b),C),O=Math.pow(b.distanceToSquared(y),C);w<1e-4&&(w=1),x<1e-4&&(x=w),O<1e-4&&(O=w),WW.initNonuniformCatmullRom(v.x,_.x,b.x,y.x,x,w,O),GW.initNonuniformCatmullRom(v.y,_.y,b.y,y.y,x,w,O),QW.initNonuniformCatmullRom(v.z,_.z,b.z,y.z,x,w,O)}else"catmullrom"===this.curveType&&(WW.initCatmullRom(v.x,_.x,b.x,y.x,this.tension),GW.initCatmullRom(v.y,_.y,b.y,y.y,this.tension),QW.initCatmullRom(v.z,_.z,b.z,y.z,this.tension));return h.set(WW.calc(m),GW.calc(m),QW.calc(m)),h}copy(a){super.copy(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++)this.points.push(a.points[l].clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}toJSON(){const a=super.toJSON();a.points=[];for(let l=0,h=this.points.length;l<h;l++)a.points.push(this.points[l].toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}fromJSON(a){super.fromJSON(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++){const d=a.points[l];this.points.push((new ae).fromArray(d))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}function ube(c,a,l,h,d){const f=.5*(h-a),p=.5*(d-l),g=c*c;return(2*l-2*h+f+p)*(c*g)+(-3*l+3*h-2*f-p)*g+f*c+l}function h2(c,a,l,h){return function abt(c,a){const l=1-c;return l*l*a}(c,a)+function lbt(c,a){return 2*(1-c)*c*a}(c,l)+function cbt(c,a){return c*c*a}(c,h)}function d2(c,a,l,h,d){return function ubt(c,a){const l=1-c;return l*l*l*a}(c,a)+function hbt(c,a){const l=1-c;return 3*l*l*c*a}(c,l)+function dbt(c,a){return 3*(1-c)*c*c*a}(c,h)+function fbt(c,a){return c*c*c*a}(c,d)}class hbe extends Jd{constructor(a=new yt,l=new yt,h=new yt,d=new yt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=a,this.v1=l,this.v2=h,this.v3=d}getPoint(a,l=new yt){const h=l,d=this.v0,f=this.v1,p=this.v2,g=this.v3;return h.set(d2(a,d.x,f.x,p.x,g.x),d2(a,d.y,f.y,p.y,g.y)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}class jW extends Jd{constructor(a=new yt,l=new yt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=a,this.v2=l}getPoint(a,l=new yt){const h=l;return 1===a?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(a).add(this.v1)),h}getPointAt(a,l){return this.getPoint(a,l)}getTangent(a,l){const h=l||new yt;return h.copy(this.v2).sub(this.v1).normalize(),h}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class dbe extends Jd{constructor(a=new yt,l=new yt,h=new yt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=a,this.v1=l,this.v2=h}getPoint(a,l=new yt){const h=l,d=this.v0,f=this.v1,p=this.v2;return h.set(h2(a,d.x,f.x,p.x),h2(a,d.y,f.y,p.y)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class pbe extends Jd{constructor(a=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=a}getPoint(a,l=new yt){const h=l,d=this.points,f=(d.length-1)*a,p=Math.floor(f),g=f-p,m=d[0===p?p:p-1],v=d[p],y=d[p>d.length-2?d.length-1:p+1],_=d[p>d.length-3?d.length-1:p+2];return h.set(ube(g,m.x,v.x,y.x,_.x),ube(g,m.y,v.y,y.y,_.y)),h}copy(a){super.copy(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++)this.points.push(a.points[l].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let l=0,h=this.points.length;l<h;l++)a.points.push(this.points[l].toArray());return a}fromJSON(a){super.fromJSON(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++){const d=a.points[l];this.points.push((new yt).fromArray(d))}return this}}var ZW=Object.freeze({__proto__:null,ArcCurve:class obt extends HW{constructor(a,l,h,d,f,p){super(a,l,h,h,d,f,p),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:cbe,CubicBezierCurve:hbe,CubicBezierCurve3:class pbt extends Jd{constructor(a=new ae,l=new ae,h=new ae,d=new ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=a,this.v1=l,this.v2=h,this.v3=d}getPoint(a,l=new ae){const h=l,d=this.v0,f=this.v1,p=this.v2,g=this.v3;return h.set(d2(a,d.x,f.x,p.x,g.x),d2(a,d.y,f.y,p.y,g.y),d2(a,d.z,f.z,p.z,g.z)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}},EllipseCurve:HW,LineCurve:jW,LineCurve3:class gbt extends Jd{constructor(a=new ae,l=new ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=a,this.v2=l}getPoint(a,l=new ae){const h=l;return 1===a?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(a).add(this.v1)),h}getPointAt(a,l){return this.getPoint(a,l)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}},QuadraticBezierCurve:dbe,QuadraticBezierCurve3:class fbe extends Jd{constructor(a=new ae,l=new ae,h=new ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=a,this.v1=l,this.v2=h}getPoint(a,l=new ae){const h=l,d=this.v0,f=this.v1,p=this.v2;return h.set(h2(a,d.x,f.x,p.x),h2(a,d.y,f.y,p.y),h2(a,d.z,f.z,p.z)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}},SplineCurve:pbe});class mbt extends Jd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),l=this.curves[this.curves.length-1].getPoint(1);a.equals(l)||this.curves.push(new jW(l,a))}getPoint(a,l){const h=a*this.getLength(),d=this.getCurveLengths();let f=0;for(;f<d.length;){if(d[f]>=h){const p=d[f]-h,g=this.curves[f],m=g.getLength();return g.getPointAt(0===m?0:1-p/m,l)}f++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let l=0;for(let h=0,d=this.curves.length;h<d;h++)l+=this.curves[h].getLength(),a.push(l);return this.cacheLengths=a,a}getSpacedPoints(a=40){const l=[];for(let h=0;h<=a;h++)l.push(this.getPoint(h/a));return this.autoClose&&l.push(l[0]),l}getPoints(a=12){const l=[];let h;for(let d=0,f=this.curves;d<f.length;d++){const p=f[d],m=p.getPoints(p.isEllipseCurve?2*a:p.isLineCurve||p.isLineCurve3?1:p.isSplineCurve?a*p.points.length:a);for(let v=0;v<m.length;v++){const y=m[v];h&&h.equals(y)||(l.push(y),h=y)}}return this.autoClose&&l.length>1&&!l[l.length-1].equals(l[0])&&l.push(l[0]),l}copy(a){super.copy(a),this.curves=[];for(let l=0,h=a.curves.length;l<h;l++)this.curves.push(a.curves[l].clone());return this.autoClose=a.autoClose,this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose,a.curves=[];for(let l=0,h=this.curves.length;l<h;l++)a.curves.push(this.curves[l].toJSON());return a}fromJSON(a){super.fromJSON(a),this.autoClose=a.autoClose,this.curves=[];for(let l=0,h=a.curves.length;l<h;l++){const d=a.curves[l];this.curves.push((new ZW[d.type]).fromJSON(d))}return this}}class Sv extends mbt{constructor(a){super(),this.type="Path",this.currentPoint=new yt,a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let l=1,h=a.length;l<h;l++)this.lineTo(a[l].x,a[l].y);return this}moveTo(a,l){return this.currentPoint.set(a,l),this}lineTo(a,l){const h=new jW(this.currentPoint.clone(),new yt(a,l));return this.curves.push(h),this.currentPoint.set(a,l),this}quadraticCurveTo(a,l,h,d){const f=new dbe(this.currentPoint.clone(),new yt(a,l),new yt(h,d));return this.curves.push(f),this.currentPoint.set(h,d),this}bezierCurveTo(a,l,h,d,f,p){const g=new hbe(this.currentPoint.clone(),new yt(a,l),new yt(h,d),new yt(f,p));return this.curves.push(g),this.currentPoint.set(f,p),this}splineThru(a){const l=[this.currentPoint.clone()].concat(a),h=new pbe(l);return this.curves.push(h),this.currentPoint.copy(a[a.length-1]),this}arc(a,l,h,d,f,p){return this.absarc(a+this.currentPoint.x,l+this.currentPoint.y,h,d,f,p),this}absarc(a,l,h,d,f,p){return this.absellipse(a,l,h,h,d,f,p),this}ellipse(a,l,h,d,f,p,g,m){return this.absellipse(a+this.currentPoint.x,l+this.currentPoint.y,h,d,f,p,g,m),this}absellipse(a,l,h,d,f,p,g,m){const v=new HW(a,l,h,d,f,p,g,m);if(this.curves.length>0){const _=v.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(v);const y=v.getPoint(1);return this.currentPoint.copy(y),this}copy(a){return super.copy(a),this.currentPoint.copy(a.currentPoint),this}toJSON(){const a=super.toJSON();return a.currentPoint=this.currentPoint.toArray(),a}fromJSON(a){return super.fromJSON(a),this.currentPoint.fromArray(a.currentPoint),this}}class tm extends $i{constructor(a=[],l=[],h=1,d=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:l,radius:h,detail:d};const f=[],p=[];function m(T,M,k,E){const P=E+1,V=[];for(let I=0;I<=P;I++){V[I]=[];const U=T.clone().lerp(k,I/P),$=M.clone().lerp(k,I/P),H=P-I;for(let J=0;J<=H;J++)V[I][J]=0===J&&I===P?U:U.clone().lerp($,J/H)}for(let I=0;I<P;I++)for(let U=0;U<2*(P-I)-1;U++){const $=Math.floor(U/2);U%2==0?(b(V[I][$+1]),b(V[I+1][$]),b(V[I][$])):(b(V[I][$+1]),b(V[I+1][$+1]),b(V[I+1][$]))}}function b(T){f.push(T.x,T.y,T.z)}function C(T,M){const k=3*T;M.x=a[k+0],M.y=a[k+1],M.z=a[k+2]}function w(T,M,k,E){E<0&&1===T.x&&(p[M]=T.x-1),0===k.x&&0===k.z&&(p[M]=E/2/Math.PI+.5)}function O(T){return Math.atan2(T.z,-T.x)}function D(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}(function g(T){const M=new ae,k=new ae,E=new ae;for(let P=0;P<l.length;P+=3)C(l[P+0],M),C(l[P+1],k),C(l[P+2],E),m(M,k,E,T)})(d),function v(T){const M=new ae;for(let k=0;k<f.length;k+=3)M.x=f[k+0],M.y=f[k+1],M.z=f[k+2],M.normalize().multiplyScalar(T),f[k+0]=M.x,f[k+1]=M.y,f[k+2]=M.z}(h),function y(){const T=new ae;for(let M=0;M<f.length;M+=3){T.x=f[M+0],T.y=f[M+1],T.z=f[M+2];const k=O(T)/2/Math.PI+.5,E=D(T)/Math.PI+.5;p.push(k,1-E)}(function x(){const T=new ae,M=new ae,k=new ae,E=new ae,P=new yt,V=new yt,I=new yt;for(let U=0,$=0;U<f.length;U+=9,$+=6){T.set(f[U+0],f[U+1],f[U+2]),M.set(f[U+3],f[U+4],f[U+5]),k.set(f[U+6],f[U+7],f[U+8]),P.set(p[$+0],p[$+1]),V.set(p[$+2],p[$+3]),I.set(p[$+4],p[$+5]),E.copy(T).add(M).add(k).divideScalar(3);const H=O(E);w(P,$+0,T,H),w(V,$+2,M,H),w(I,$+4,k,H)}})(),function _(){for(let T=0;T<p.length;T+=6){const M=p[T+0],k=p[T+2],E=p[T+4],P=Math.max(M,k,E),V=Math.min(M,k,E);P>.9&&V<.1&&(M<.2&&(p[T+0]+=1),k<.2&&(p[T+2]+=1),E<.2&&(p[T+4]+=1))}}()}(),this.setAttribute("position",new Pn(f,3)),this.setAttribute("normal",new Pn(f.slice(),3)),this.setAttribute("uv",new Pn(p,2)),0===d?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(a){return new tm(a.vertices,a.indices,a.radius,a.details)}}class Cp extends Sv{constructor(a){super(a),this.uuid=Qc(),this.type="Shape",this.holes=[]}getPointsHoles(a){const l=[];for(let h=0,d=this.holes.length;h<d;h++)l[h]=this.holes[h].getPoints(a);return l}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a),this.holes=[];for(let l=0,h=a.holes.length;l<h;l++)this.holes.push(a.holes[l].clone());return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid,a.holes=[];for(let l=0,h=this.holes.length;l<h;l++)a.holes.push(this.holes[l].toJSON());return a}fromJSON(a){super.fromJSON(a),this.uuid=a.uuid,this.holes=[];for(let l=0,h=a.holes.length;l<h;l++){const d=a.holes[l];this.holes.push((new Sv).fromJSON(d))}return this}}function gbe(c,a,l,h,d){let f,p;if(d===function Rbt(c,a,l,h){let d=0;for(let f=a,p=l-h;f<l;f+=h)d+=(c[p]-c[f])*(c[f+1]+c[p+1]),p=f;return d}(c,a,l,h)>0)for(f=a;f<l;f+=h)p=ybe(f,c[f],c[f+1],p);else for(f=l-h;f>=a;f-=h)p=ybe(f,c[f],c[f+1],p);return p&&WI(p,p.next)&&(m2(p),p=p.next),p}function nm(c,a){if(!c)return c;a||(a=c);let h,l=c;do{if(h=!1,l.steiner||!WI(l,l.next)&&0!==$s(l.prev,l,l.next))l=l.next;else{if(m2(l),l=a=l.prev,l===l.next)break;h=!0}}while(h||l!==a);return a}function p2(c,a,l,h,d,f,p){if(!c)return;!p&&f&&function kbt(c,a,l,h){let d=c;do{null===d.z&&(d.z=XW(d.x,d.y,a,l,h)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next}while(d!==c);d.prevZ.nextZ=null,d.prevZ=null,function Mbt(c){let a,l,h,d,f,p,g,m,v=1;do{for(l=c,c=null,f=null,p=0;l;){for(p++,h=l,g=0,a=0;a<v&&(g++,h=h.nextZ,h);a++);for(m=v;g>0||m>0&&h;)0!==g&&(0===m||!h||l.z<=h.z)?(d=l,l=l.nextZ,g--):(d=h,h=h.nextZ,m--),f?f.nextZ=d:c=d,d.prevZ=f,f=d;l=h}f.nextZ=null,v*=2}while(p>1)}(d)}(c,h,d,f);let m,v,g=c;for(;c.prev!==c.next;)if(m=c.prev,v=c.next,f?bbt(c,h,d,f):_bt(c))a.push(m.i/l),a.push(c.i/l),a.push(v.i/l),m2(c),c=v.next,g=v.next;else if((c=v)===g){p?1===p?p2(c=Cbt(nm(c),a,l),a,l,h,d,f,2):2===p&&Sbt(c,a,l,h,d,f):p2(nm(c),a,l,h,d,f,1);break}}function _bt(c){const a=c.prev,l=c,h=c.next;if($s(a,l,h)>=0)return!1;let d=c.next.next;for(;d!==c.prev;){if(Zb(a.x,a.y,l.x,l.y,h.x,h.y,d.x,d.y)&&$s(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function bbt(c,a,l,h){const d=c.prev,f=c,p=c.next;if($s(d,f,p)>=0)return!1;const v=d.x>f.x?d.x>p.x?d.x:p.x:f.x>p.x?f.x:p.x,y=d.y>f.y?d.y>p.y?d.y:p.y:f.y>p.y?f.y:p.y,_=XW(d.x<f.x?d.x<p.x?d.x:p.x:f.x<p.x?f.x:p.x,d.y<f.y?d.y<p.y?d.y:p.y:f.y<p.y?f.y:p.y,a,l,h),b=XW(v,y,a,l,h);let C=c.prevZ,x=c.nextZ;for(;C&&C.z>=_&&x&&x.z<=b;){if(C!==c.prev&&C!==c.next&&Zb(d.x,d.y,f.x,f.y,p.x,p.y,C.x,C.y)&&$s(C.prev,C,C.next)>=0||(C=C.prevZ,x!==c.prev&&x!==c.next&&Zb(d.x,d.y,f.x,f.y,p.x,p.y,x.x,x.y)&&$s(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;C&&C.z>=_;){if(C!==c.prev&&C!==c.next&&Zb(d.x,d.y,f.x,f.y,p.x,p.y,C.x,C.y)&&$s(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;x&&x.z<=b;){if(x!==c.prev&&x!==c.next&&Zb(d.x,d.y,f.x,f.y,p.x,p.y,x.x,x.y)&&$s(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Cbt(c,a,l){let h=c;do{const d=h.prev,f=h.next.next;!WI(d,f)&&mbe(d,h,h.next,f)&&g2(d,f)&&g2(f,d)&&(a.push(d.i/l),a.push(h.i/l),a.push(f.i/l),m2(h),m2(h.next),h=c=f),h=h.next}while(h!==c);return nm(h)}function Sbt(c,a,l,h,d,f){let p=c;do{let g=p.next.next;for(;g!==p.prev;){if(p.i!==g.i&&Abt(p,g)){let m=vbe(p,g);return p=nm(p,p.next),m=nm(m,m.next),p2(p,a,l,h,d,f),void p2(m,a,l,h,d,f)}g=g.next}p=p.next}while(p!==c)}function wbt(c,a){return c.x-a.x}function Obt(c,a){if(a=function Dbt(c,a){let l=a;const h=c.x,d=c.y;let p,f=-1/0;do{if(d<=l.y&&d>=l.next.y&&l.next.y!==l.y){const b=l.x+(d-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(b<=h&&b>f){if(f=b,b===h){if(d===l.y)return l;if(d===l.next.y)return l.next}p=l.x<l.next.x?l:l.next}}l=l.next}while(l!==a);if(!p)return null;if(h===f)return p;const g=p,m=p.x,v=p.y;let _,y=1/0;l=p;do{h>=l.x&&l.x>=m&&h!==l.x&&Zb(d<v?h:f,d,m,v,d<v?f:h,d,l.x,l.y)&&(_=Math.abs(d-l.y)/(h-l.x),g2(l,c)&&(_<y||_===y&&(l.x>p.x||l.x===p.x&&Tbt(p,l)))&&(p=l,y=_)),l=l.next}while(l!==g);return p}(c,a),a){const l=vbe(a,c);nm(a,a.next),nm(l,l.next)}}function Tbt(c,a){return $s(c.prev,c,a.prev)<0&&$s(a.next,c,c.next)<0}function XW(c,a,l,h,d){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-l)*d)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-h)*d)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Ebt(c){let a=c,l=c;do{(a.x<l.x||a.x===l.x&&a.y<l.y)&&(l=a),a=a.next}while(a!==c);return l}function Zb(c,a,l,h,d,f,p,g){return(d-p)*(a-g)-(c-p)*(f-g)>=0&&(c-p)*(h-g)-(l-p)*(a-g)>=0&&(l-p)*(f-g)-(d-p)*(h-g)>=0}function Abt(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function Ibt(c,a){let l=c;do{if(l.i!==c.i&&l.next.i!==c.i&&l.i!==a.i&&l.next.i!==a.i&&mbe(l,l.next,c,a))return!0;l=l.next}while(l!==c);return!1}(c,a)&&(g2(c,a)&&g2(a,c)&&function Pbt(c,a){let l=c,h=!1;const d=(c.x+a.x)/2,f=(c.y+a.y)/2;do{l.y>f!=l.next.y>f&&l.next.y!==l.y&&d<(l.next.x-l.x)*(f-l.y)/(l.next.y-l.y)+l.x&&(h=!h),l=l.next}while(l!==c);return h}(c,a)&&($s(c.prev,c,a.prev)||$s(c,a.prev,a))||WI(c,a)&&$s(c.prev,c,c.next)>0&&$s(a.prev,a,a.next)>0)}function $s(c,a,l){return(a.y-c.y)*(l.x-a.x)-(a.x-c.x)*(l.y-a.y)}function WI(c,a){return c.x===a.x&&c.y===a.y}function mbe(c,a,l,h){const d=QI($s(c,a,l)),f=QI($s(c,a,h)),p=QI($s(l,h,c)),g=QI($s(l,h,a));return!!(d!==f&&p!==g||0===d&&GI(c,l,a)||0===f&&GI(c,h,a)||0===p&&GI(l,c,h)||0===g&&GI(l,a,h))}function GI(c,a,l){return a.x<=Math.max(c.x,l.x)&&a.x>=Math.min(c.x,l.x)&&a.y<=Math.max(c.y,l.y)&&a.y>=Math.min(c.y,l.y)}function QI(c){return c>0?1:c<0?-1:0}function g2(c,a){return $s(c.prev,c,c.next)<0?$s(c,a,c.next)>=0&&$s(c,c.prev,a)>=0:$s(c,a,c.prev)<0||$s(c,c.next,a)<0}function vbe(c,a){const l=new YW(c.i,c.x,c.y),h=new YW(a.i,a.x,a.y),d=c.next,f=a.prev;return c.next=a,a.prev=c,l.next=d,d.prev=l,h.next=l,l.prev=h,f.next=h,h.prev=f,h}function ybe(c,a,l,h){const d=new YW(c,a,l);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function m2(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function YW(c,a,l){this.i=c,this.x=a,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Sp{static area(a){const l=a.length;let h=0;for(let d=l-1,f=0;f<l;d=f++)h+=a[d].x*a[f].y-a[f].x*a[d].y;return.5*h}static isClockWise(a){return Sp.area(a)<0}static triangulateShape(a,l){const h=[],d=[],f=[];_be(a),bbe(h,a);let p=a.length;l.forEach(_be);for(let m=0;m<l.length;m++)d.push(p),p+=l[m].length,bbe(h,l[m]);const g=function(c,a,l=2){const h=a&&a.length,d=h?a[0]*l:c.length;let f=gbe(c,0,d,l,!0);const p=[];if(!f||f.next===f.prev)return p;let g,m,v,y,_,b,C;if(h&&(f=function xbt(c,a,l,h){const d=[];let f,p,g,m,v;for(f=0,p=a.length;f<p;f++)g=a[f]*h,m=f<p-1?a[f+1]*h:c.length,v=gbe(c,g,m,h,!1),v===v.next&&(v.steiner=!0),d.push(Ebt(v));for(d.sort(wbt),f=0;f<d.length;f++)Obt(d[f],l),l=nm(l,l.next);return l}(c,a,f,l)),c.length>80*l){g=v=c[0],m=y=c[1];for(let x=l;x<d;x+=l)_=c[x],b=c[x+1],_<g&&(g=_),b<m&&(m=b),_>v&&(v=_),b>y&&(y=b);C=Math.max(v-g,y-m),C=0!==C?1/C:0}return p2(f,p,l,g,m,C),p}(h,d);for(let m=0;m<g.length;m+=3)f.push(g.slice(m,m+3));return f}}function _be(c){const a=c.length;a>2&&c[a-1].equals(c[0])&&c.pop()}function bbe(c,a){for(let l=0;l<a.length;l++)c.push(a[l].x),c.push(a[l].y)}class qb extends $i{constructor(a=new Cp([new yt(.5,.5),new yt(-.5,.5),new yt(-.5,-.5),new yt(.5,-.5)]),l={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:l},a=Array.isArray(a)?a:[a];const h=this,d=[],f=[];for(let g=0,m=a.length;g<m;g++)p(a[g]);function p(g){const m=[],v=void 0!==l.curveSegments?l.curveSegments:12,y=void 0!==l.steps?l.steps:1;let _=void 0!==l.depth?l.depth:1,b=void 0===l.bevelEnabled||l.bevelEnabled,C=void 0!==l.bevelThickness?l.bevelThickness:.2,x=void 0!==l.bevelSize?l.bevelSize:C-.1,w=void 0!==l.bevelOffset?l.bevelOffset:0,O=void 0!==l.bevelSegments?l.bevelSegments:3;const D=l.extrudePath,T=void 0!==l.UVGenerator?l.UVGenerator:Fbt;void 0!==l.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),_=l.amount);let M,E,P,V,I,k=!1;D&&(M=D.getSpacedPoints(y),k=!0,b=!1,E=D.computeFrenetFrames(y,!1),P=new ae,V=new ae,I=new ae),b||(O=0,C=0,x=0,w=0);const U=g.extractPoints(v);let $=U.shape;const H=U.holes;if(!Sp.isClockWise($)){$=$.reverse();for(let ve=0,Ue=H.length;ve<Ue;ve++){const st=H[ve];Sp.isClockWise(st)&&(H[ve]=st.reverse())}}const ee=Sp.triangulateShape($,H),B=$;for(let ve=0,Ue=H.length;ve<Ue;ve++)$=$.concat(H[ve]);function G(ve,Ue,st){return Ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ue.clone().multiplyScalar(st).add(ve)}const W=$.length,j=ee.length;function Q(ve,Ue,st){let dt,tt,Ie;const et=ve.x-Ue.x,Gt=ve.y-Ue.y,Tn=st.x-ve.x,Zn=st.y-ve.y,ye=et*et+Gt*Gt;if(Math.abs(et*Zn-Gt*Tn)>Number.EPSILON){const ft=Math.sqrt(ye),Dt=Math.sqrt(Tn*Tn+Zn*Zn),Xt=Ue.x-Gt/ft,Vt=Ue.y+et/ft,rn=((st.x-Zn/Dt-Xt)*Zn-(st.y+Tn/Dt-Vt)*Tn)/(et*Zn-Gt*Tn);dt=Xt+et*rn-ve.x,tt=Vt+Gt*rn-ve.y;const Kt=dt*dt+tt*tt;if(Kt<=2)return new yt(dt,tt);Ie=Math.sqrt(Kt/2)}else{let ft=!1;et>Number.EPSILON?Tn>Number.EPSILON&&(ft=!0):et<-Number.EPSILON?Tn<-Number.EPSILON&&(ft=!0):Math.sign(Gt)===Math.sign(Zn)&&(ft=!0),ft?(dt=-Gt,tt=et,Ie=Math.sqrt(ye)):(dt=et,tt=Gt,Ie=Math.sqrt(ye/2))}return new yt(dt/Ie,tt/Ie)}const X=[];for(let ve=0,Ue=B.length,st=Ue-1,dt=ve+1;ve<Ue;ve++,st++,dt++)st===Ue&&(st=0),dt===Ue&&(dt=0),X[ve]=Q(B[ve],B[st],B[dt]);const Y=[];let ne,re=X.concat();for(let ve=0,Ue=H.length;ve<Ue;ve++){const st=H[ve];ne=[];for(let dt=0,tt=st.length,Ie=tt-1,et=dt+1;dt<tt;dt++,Ie++,et++)Ie===tt&&(Ie=0),et===tt&&(et=0),ne[dt]=Q(st[dt],st[Ie],st[et]);Y.push(ne),re=re.concat(ne)}for(let ve=0;ve<O;ve++){const Ue=ve/O,st=C*Math.cos(Ue*Math.PI/2),dt=x*Math.sin(Ue*Math.PI/2)+w;for(let tt=0,Ie=B.length;tt<Ie;tt++){const et=G(B[tt],X[tt],dt);Fe(et.x,et.y,-st)}for(let tt=0,Ie=H.length;tt<Ie;tt++){const et=H[tt];ne=Y[tt];for(let Gt=0,Tn=et.length;Gt<Tn;Gt++){const Zn=G(et[Gt],ne[Gt],dt);Fe(Zn.x,Zn.y,-st)}}}const fe=x+w;for(let ve=0;ve<W;ve++){const Ue=b?G($[ve],re[ve],fe):$[ve];k?(V.copy(E.normals[0]).multiplyScalar(Ue.x),P.copy(E.binormals[0]).multiplyScalar(Ue.y),I.copy(M[0]).add(V).add(P),Fe(I.x,I.y,I.z)):Fe(Ue.x,Ue.y,0)}for(let ve=1;ve<=y;ve++)for(let Ue=0;Ue<W;Ue++){const st=b?G($[Ue],re[Ue],fe):$[Ue];k?(V.copy(E.normals[ve]).multiplyScalar(st.x),P.copy(E.binormals[ve]).multiplyScalar(st.y),I.copy(M[ve]).add(V).add(P),Fe(I.x,I.y,I.z)):Fe(st.x,st.y,_/y*ve)}for(let ve=O-1;ve>=0;ve--){const Ue=ve/O,st=C*Math.cos(Ue*Math.PI/2),dt=x*Math.sin(Ue*Math.PI/2)+w;for(let tt=0,Ie=B.length;tt<Ie;tt++){const et=G(B[tt],X[tt],dt);Fe(et.x,et.y,_+st)}for(let tt=0,Ie=H.length;tt<Ie;tt++){const et=H[tt];ne=Y[tt];for(let Gt=0,Tn=et.length;Gt<Tn;Gt++){const Zn=G(et[Gt],ne[Gt],dt);k?Fe(Zn.x,Zn.y+M[y-1].y,M[y-1].x+st):Fe(Zn.x,Zn.y,_+st)}}}function we(ve,Ue){let st=ve.length;for(;--st>=0;){const dt=st;let tt=st-1;tt<0&&(tt=ve.length-1);for(let Ie=0,et=y+2*O;Ie<et;Ie++){const Gt=W*Ie,Tn=W*(Ie+1);Le(Ue+dt+Gt,Ue+tt+Gt,Ue+tt+Tn,Ue+dt+Tn)}}}function Fe(ve,Ue,st){m.push(ve),m.push(Ue),m.push(st)}function qe(ve,Ue,st){ze(ve),ze(Ue),ze(st);const dt=d.length/3,tt=T.generateTopUV(h,d,dt-3,dt-2,dt-1);it(tt[0]),it(tt[1]),it(tt[2])}function Le(ve,Ue,st,dt){ze(ve),ze(Ue),ze(dt),ze(Ue),ze(st),ze(dt);const tt=d.length/3,Ie=T.generateSideWallUV(h,d,tt-6,tt-3,tt-2,tt-1);it(Ie[0]),it(Ie[1]),it(Ie[3]),it(Ie[1]),it(Ie[2]),it(Ie[3])}function ze(ve){d.push(m[3*ve+0]),d.push(m[3*ve+1]),d.push(m[3*ve+2])}function it(ve){f.push(ve.x),f.push(ve.y)}(function de(){const ve=d.length/3;if(b){let Ue=0,st=W*Ue;for(let dt=0;dt<j;dt++){const tt=ee[dt];qe(tt[2]+st,tt[1]+st,tt[0]+st)}Ue=y+2*O,st=W*Ue;for(let dt=0;dt<j;dt++){const tt=ee[dt];qe(tt[0]+st,tt[1]+st,tt[2]+st)}}else{for(let Ue=0;Ue<j;Ue++){const st=ee[Ue];qe(st[2],st[1],st[0])}for(let Ue=0;Ue<j;Ue++){const st=ee[Ue];qe(st[0]+W*y,st[1]+W*y,st[2]+W*y)}}h.addGroup(ve,d.length/3-ve,0)})(),function De(){const ve=d.length/3;let Ue=0;we(B,Ue),Ue+=B.length;for(let st=0,dt=H.length;st<dt;st++){const tt=H[st];we(tt,Ue),Ue+=tt.length}h.addGroup(ve,d.length/3-ve,1)}()}this.setAttribute("position",new Pn(d,3)),this.setAttribute("uv",new Pn(f,2)),this.computeVertexNormals()}toJSON(){const a=super.toJSON();return function Lbt(c,a,l){if(l.shapes=[],Array.isArray(c))for(let h=0,d=c.length;h<d;h++)l.shapes.push(c[h].uuid);else l.shapes.push(c.uuid);return l.options=Object.assign({},a),void 0!==a.extrudePath&&(l.options.extrudePath=a.extrudePath.toJSON()),l}(this.parameters.shapes,this.parameters.options,a)}static fromJSON(a,l){const h=[];for(let f=0,p=a.shapes.length;f<p;f++)h.push(l[a.shapes[f]]);const d=a.options.extrudePath;return void 0!==d&&(a.options.extrudePath=(new ZW[d.type]).fromJSON(d)),new qb(h,a.options)}}const Fbt={generateTopUV:function(c,a,l,h,d){const g=a[3*h],m=a[3*h+1],v=a[3*d],y=a[3*d+1];return[new yt(a[3*l],a[3*l+1]),new yt(g,m),new yt(v,y)]},generateSideWallUV:function(c,a,l,h,d,f){const p=a[3*l],g=a[3*l+1],m=a[3*l+2],v=a[3*h],y=a[3*h+1],_=a[3*h+2],b=a[3*d],C=a[3*d+1],x=a[3*d+2],w=a[3*f],O=a[3*f+1],D=a[3*f+2];return Math.abs(g-y)<Math.abs(p-v)?[new yt(p,1-m),new yt(v,1-_),new yt(b,1-x),new yt(w,1-D)]:[new yt(g,1-m),new yt(y,1-_),new yt(C,1-x),new yt(O,1-D)]}};class v2 extends tm{constructor(a=1,l=0){const h=(1+Math.sqrt(5))/2;super([-1,h,0,1,h,0,-1,-h,0,1,-h,0,0,-1,h,0,1,h,0,-1,-h,0,1,-h,h,0,-1,h,0,1,-h,0,-1,-h,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,l),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:l}}static fromJSON(a){return new v2(a.radius,a.detail)}}class Xb extends $i{constructor(a=1,l=32,h=16,d=0,f=2*Math.PI,p=0,g=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:l,heightSegments:h,phiStart:d,phiLength:f,thetaStart:p,thetaLength:g},l=Math.max(3,Math.floor(l)),h=Math.max(2,Math.floor(h));const m=Math.min(p+g,Math.PI);let v=0;const y=[],_=new ae,b=new ae,C=[],x=[],w=[],O=[];for(let D=0;D<=h;D++){const T=[],M=D/h;let k=0;0==D&&0==p?k=.5/l:D==h&&m==Math.PI&&(k=-.5/l);for(let E=0;E<=l;E++){const P=E/l;_.x=-a*Math.cos(d+P*f)*Math.sin(p+M*g),_.y=a*Math.cos(p+M*g),_.z=a*Math.sin(d+P*f)*Math.sin(p+M*g),x.push(_.x,_.y,_.z),b.copy(_).normalize(),w.push(b.x,b.y,b.z),O.push(P+k,1-M),T.push(v++)}y.push(T)}for(let D=0;D<h;D++)for(let T=0;T<l;T++){const k=y[D][T],E=y[D+1][T],P=y[D+1][T+1];(0!==D||p>0)&&C.push(y[D][T+1],k,P),(D!==h-1||m<Math.PI)&&C.push(k,E,P)}this.setIndex(C),this.setAttribute("position",new Pn(x,3)),this.setAttribute("normal",new Pn(w,3)),this.setAttribute("uv",new Pn(O,2))}static fromJSON(a){return new Xb(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}}class xbe extends yv{constructor(a){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new pn(16777215),this.specular=new pn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this.fog=a.fog,this}}class wbe extends yv{constructor(a){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}const ks={arraySlice:function(c,a,l){return ks.isTypedArray(c)?new c.constructor(c.subarray(a,void 0!==l?l:c.length)):c.slice(a,l)},convertArray:function(c,a,l){return!c||!l&&c.constructor===a?c:"number"==typeof a.BYTES_PER_ELEMENT?new a(c):Array.prototype.slice.call(c)},isTypedArray:function(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)},getKeyframeOrder:function(c){const l=c.length,h=new Array(l);for(let d=0;d!==l;++d)h[d]=d;return h.sort(function a(d,f){return c[d]-c[f]}),h},sortedArray:function(c,a,l){const h=c.length,d=new c.constructor(h);for(let f=0,p=0;p!==h;++f){const g=l[f]*a;for(let m=0;m!==a;++m)d[p++]=c[g+m]}return d},flattenJSON:function(c,a,l,h){let d=1,f=c[0];for(;void 0!==f&&void 0===f[h];)f=c[d++];if(void 0===f)return;let p=f[h];if(void 0!==p)if(Array.isArray(p))do{p=f[h],void 0!==p&&(a.push(f.time),l.push.apply(l,p)),f=c[d++]}while(void 0!==f);else if(void 0!==p.toArray)do{p=f[h],void 0!==p&&(a.push(f.time),p.toArray(l,l.length)),f=c[d++]}while(void 0!==f);else do{p=f[h],void 0!==p&&(a.push(f.time),l.push(p)),f=c[d++]}while(void 0!==f)},subclip:function(c,a,l,h,d=30){const f=c.clone();f.name=a;const p=[];for(let m=0;m<f.tracks.length;++m){const v=f.tracks[m],y=v.getValueSize(),_=[],b=[];for(let C=0;C<v.times.length;++C){const x=v.times[C]*d;if(!(x<l||x>=h)){_.push(v.times[C]);for(let w=0;w<y;++w)b.push(v.values[C*y+w])}}0!==_.length&&(v.times=ks.convertArray(_,v.times.constructor),v.values=ks.convertArray(b,v.values.constructor),p.push(v))}f.tracks=p;let g=1/0;for(let m=0;m<f.tracks.length;++m)g>f.tracks[m].times[0]&&(g=f.tracks[m].times[0]);for(let m=0;m<f.tracks.length;++m)f.tracks[m].shift(-1*g);return f.resetDuration(),f},makeClipAdditive:function(c,a=0,l=c,h=30){h<=0&&(h=30);const d=l.tracks.length,f=a/h;for(let p=0;p<d;++p){const g=l.tracks[p],m=g.ValueTypeName;if("bool"===m||"string"===m)continue;const v=c.tracks.find(function(D){return D.name===g.name&&D.ValueTypeName===m});if(void 0===v)continue;let y=0;const _=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);let b=0;const C=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=C/3);const x=g.times.length-1;let w;if(f<=g.times[0])w=ks.arraySlice(g.values,y,_-y);else if(f>=g.times[x]){const D=x*_+y;w=ks.arraySlice(g.values,D,D+_-y)}else{const D=g.createInterpolant(),T=y,M=_-y;D.evaluate(f),w=ks.arraySlice(D.resultBuffer,T,M)}"quaternion"===m&&(new jc).fromArray(w).normalize().conjugate().toArray(w);const O=v.times.length;for(let D=0;D<O;++D){const T=D*C+b;if("quaternion"===m)jc.multiplyQuaternionsFlat(v.values,T,w,0,v.values,T);else{const M=C-2*b;for(let k=0;k<M;++k)v.values[T+k]-=w[k]}}}return c.blendMode=2501,c}};class JI{constructor(a,l,h,d){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==d?d:new l.constructor(h),this.sampleValues=l,this.valueSize=h,this.settings=null,this.DefaultSettings_={}}evaluate(a){const l=this.parameterPositions;let h=this._cachedIndex,d=l[h],f=l[h-1];e:{t:{let p;n:{i:if(!(a<d)){for(let g=h+2;;){if(void 0===d){if(a<f)break i;return h=l.length,this._cachedIndex=h,this.copySampleValue_(h-1)}if(h===g)break;if(f=d,d=l[++h],a<d)break t}p=l.length;break n}if(a>=f)break e;{const g=l[1];a<g&&(h=2,f=g);for(let m=h-2;;){if(void 0===f)return this._cachedIndex=0,this.copySampleValue_(0);if(h===m)break;if(d=f,f=l[--h-1],a>=f)break t}p=h,h=0}}for(;h<p;){const g=h+p>>>1;a<l[g]?p=g:h=g+1}if(d=l[h],f=l[h-1],void 0===f)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===d)return h=l.length,this._cachedIndex=h,this.copySampleValue_(h-1)}this._cachedIndex=h,this.intervalChanged_(h,f,d)}return this.interpolate_(h,f,a,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const l=this.resultBuffer,h=this.sampleValues,d=this.valueSize,f=a*d;for(let p=0;p!==d;++p)l[p]=h[f+p];return l}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jbt extends JI{constructor(a,l,h,d){super(a,l,h,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(a,l,h){const d=this.parameterPositions;let f=a-2,p=a+1,g=d[f],m=d[p];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:f=a,g=2*l-h;break;case 2402:f=d.length-2,g=l+d[f]-d[f+1];break;default:f=a,g=h}if(void 0===m)switch(this.getSettings_().endingEnd){case 2401:p=a,m=2*h-l;break;case 2402:p=1,m=h+d[1]-d[0];break;default:p=a-1,m=l}const v=.5*(h-l),y=this.valueSize;this._weightPrev=v/(l-g),this._weightNext=v/(m-h),this._offsetPrev=f*y,this._offsetNext=p*y}interpolate_(a,l,h,d){const f=this.resultBuffer,p=this.sampleValues,g=this.valueSize,m=a*g,v=m-g,y=this._offsetPrev,_=this._offsetNext,b=this._weightPrev,C=this._weightNext,x=(h-l)/(d-l),w=x*x,O=w*x,D=-b*O+2*b*w-b*x,T=(1+b)*O+(-1.5-2*b)*w+(-.5+b)*x+1,M=(-1-C)*O+(1.5+C)*w+.5*x,k=C*O-C*w;for(let E=0;E!==g;++E)f[E]=D*p[y+E]+T*p[v+E]+M*p[m+E]+k*p[_+E];return f}}class Obe extends JI{constructor(a,l,h,d){super(a,l,h,d)}interpolate_(a,l,h,d){const f=this.resultBuffer,p=this.sampleValues,g=this.valueSize,m=a*g,v=m-g,y=(h-l)/(d-l),_=1-y;for(let b=0;b!==g;++b)f[b]=p[v+b]*_+p[m+b]*y;return f}}class Zbt extends JI{constructor(a,l,h,d){super(a,l,h,d)}interpolate_(a){return this.copySampleValue_(a-1)}}class ef{constructor(a,l,h,d){if(void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===l||0===l.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=ks.convertArray(l,this.TimeBufferType),this.values=ks.convertArray(h,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(a){const l=a.constructor;let h;if(l.toJSON!==this.toJSON)h=l.toJSON(a);else{h={name:a.name,times:ks.convertArray(a.times,Array),values:ks.convertArray(a.values,Array)};const d=a.getInterpolation();d!==a.DefaultInterpolation&&(h.interpolation=d)}return h.type=a.ValueTypeName,h}InterpolantFactoryMethodDiscrete(a){return new Zbt(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new Obe(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new jbt(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){let l;switch(a){case 2300:l=this.InterpolantFactoryMethodDiscrete;break;case 2301:l=this.InterpolantFactoryMethodLinear;break;case 2302:l=this.InterpolantFactoryMethodSmooth}if(void 0===l){const h="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(h);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",h),this}return this.createInterpolant=l,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const l=this.times;for(let h=0,d=l.length;h!==d;++h)l[h]+=a}return this}scale(a){if(1!==a){const l=this.times;for(let h=0,d=l.length;h!==d;++h)l[h]*=a}return this}trim(a,l){const h=this.times,d=h.length;let f=0,p=d-1;for(;f!==d&&h[f]<a;)++f;for(;-1!==p&&h[p]>l;)--p;if(++p,0!==f||p!==d){f>=p&&(p=Math.max(p,1),f=p-1);const g=this.getValueSize();this.times=ks.arraySlice(h,f,p),this.values=ks.arraySlice(this.values,f*g,p*g)}return this}validate(){let a=!0;const l=this.getValueSize();l-Math.floor(l)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);const h=this.times,d=this.values,f=h.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let p=null;for(let g=0;g!==f;g++){const m=h[g];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,m),a=!1;break}if(null!==p&&p>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,m,p),a=!1;break}p=m}if(void 0!==d&&ks.isTypedArray(d))for(let g=0,m=d.length;g!==m;++g){const v=d[g];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,v),a=!1;break}}return a}optimize(){const a=ks.arraySlice(this.times),l=ks.arraySlice(this.values),h=this.getValueSize(),d=2302===this.getInterpolation(),f=a.length-1;let p=1;for(let g=1;g<f;++g){let m=!1;const v=a[g];if(v!==a[g+1]&&(1!==g||v!==a[0]))if(d)m=!0;else{const _=g*h,b=_-h,C=_+h;for(let x=0;x!==h;++x){const w=l[_+x];if(w!==l[b+x]||w!==l[C+x]){m=!0;break}}}if(m){if(g!==p){a[p]=a[g];const _=g*h,b=p*h;for(let C=0;C!==h;++C)l[b+C]=l[_+C]}++p}}if(f>0){a[p]=a[f];for(let g=f*h,m=p*h,v=0;v!==h;++v)l[m+v]=l[g+v];++p}return p!==a.length?(this.times=ks.arraySlice(a,0,p),this.values=ks.arraySlice(l,0,p*h)):(this.times=a,this.values=l),this}clone(){const a=ks.arraySlice(this.times,0),l=ks.arraySlice(this.values,0),d=new(0,this.constructor)(this.name,a,l);return d.createInterpolant=this.createInterpolant,d}}ef.prototype.TimeBufferType=Float32Array,ef.prototype.ValueBufferType=Float32Array,ef.prototype.DefaultInterpolation=2301;class Yb extends ef{}Yb.prototype.ValueTypeName="bool",Yb.prototype.ValueBufferType=Array,Yb.prototype.DefaultInterpolation=2300,Yb.prototype.InterpolantFactoryMethodLinear=void 0,Yb.prototype.InterpolantFactoryMethodSmooth=void 0;(class Dbe extends ef{}).prototype.ValueTypeName="color";(class eP extends ef{}).prototype.ValueTypeName="number";class qbt extends JI{constructor(a,l,h,d){super(a,l,h,d)}interpolate_(a,l,h,d){const f=this.resultBuffer,p=this.sampleValues,g=this.valueSize,m=(h-l)/(d-l);let v=a*g;for(let y=v+g;v!==y;v+=4)jc.slerpFlat(f,0,p,v-g,p,v,m);return f}}class _2 extends ef{InterpolantFactoryMethodLinear(a){return new qbt(this.times,this.values,this.getValueSize(),a)}}_2.prototype.ValueTypeName="quaternion",_2.prototype.DefaultInterpolation=2301,_2.prototype.InterpolantFactoryMethodSmooth=void 0;class Kb extends ef{}Kb.prototype.ValueTypeName="string",Kb.prototype.ValueBufferType=Array,Kb.prototype.DefaultInterpolation=2300,Kb.prototype.InterpolantFactoryMethodLinear=void 0,Kb.prototype.InterpolantFactoryMethodSmooth=void 0;(class tP extends ef{}).prototype.ValueTypeName="vector";const Jb={enabled:!1,files:{},add:function(c,a){!1!==this.enabled&&(this.files[c]=a)},get:function(c){if(!1!==this.enabled)return this.files[c]},remove:function(c){delete this.files[c]},clear:function(){this.files={}}};const Kbt=new class Tbe{constructor(a,l,h){const d=this;let m,f=!1,p=0,g=0;const v=[];this.onStart=void 0,this.onLoad=a,this.onProgress=l,this.onError=h,this.itemStart=function(y){g++,!1===f&&void 0!==d.onStart&&d.onStart(y,p,g),f=!0},this.itemEnd=function(y){p++,void 0!==d.onProgress&&d.onProgress(y,p,g),p===g&&(f=!1,void 0!==d.onLoad&&d.onLoad())},this.itemError=function(y){void 0!==d.onError&&d.onError(y)},this.resolveURL=function(y){return m?m(y):y},this.setURLModifier=function(y){return m=y,this},this.addHandler=function(y,_){return v.push(y,_),this},this.removeHandler=function(y){const _=v.indexOf(y);return-1!==_&&v.splice(_,2),this},this.getHandler=function(y){for(let _=0,b=v.length;_<b;_+=2){const C=v[_],x=v[_+1];if(C.global&&(C.lastIndex=0),C.test(y))return x}return null}}};class kbe{constructor(a){this.manager=void 0!==a?a:Kbt,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(a,l){const h=this;return new Promise(function(d,f){h.load(a,d,l,f)})}parse(){}setCrossOrigin(a){return this.crossOrigin=a,this}setWithCredentials(a){return this.withCredentials=a,this}setPath(a){return this.path=a,this}setResourcePath(a){return this.resourcePath=a,this}setRequestHeader(a){return this.requestHeader=a,this}}const xp={};class wp extends kbe{constructor(a){super(a)}load(a,l,h,d){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const f=Jb.get(a);if(void 0!==f)return this.manager.itemStart(a),setTimeout(()=>{l&&l(f),this.manager.itemEnd(a)},0),f;if(void 0!==xp[a])return void xp[a].push({onLoad:l,onProgress:h,onError:d});xp[a]=[],xp[a].push({onLoad:l,onProgress:h,onError:d});const p=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,m=this.responseType;fetch(p).then(v=>{if(200===v.status||0===v.status){if(0===v.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===v.body||void 0===v.body.getReader)return v;const y=xp[a],_=v.body.getReader(),b=v.headers.get("Content-Length"),C=b?parseInt(b):0,x=0!==C;let w=0;const O=new ReadableStream({start(D){!function T(){_.read().then(({done:M,value:k})=>{if(M)D.close();else{w+=k.byteLength;const E=new ProgressEvent("progress",{lengthComputable:x,loaded:w,total:C});for(let P=0,V=y.length;P<V;P++){const I=y[P];I.onProgress&&I.onProgress(E)}D.enqueue(k),T()}})}()}});return new Response(O)}throw Error(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(y=>(new DOMParser).parseFromString(y,g));case"json":return v.json();default:if(void 0===g)return v.text();{const _=/charset="?([^;"\s]*)"?/i.exec(g),b=_&&_[1]?_[1].toLowerCase():void 0,C=new TextDecoder(b);return v.arrayBuffer().then(x=>C.decode(x))}}}).then(v=>{Jb.add(a,v);const y=xp[a];delete xp[a];for(let _=0,b=y.length;_<b;_++){const C=y[_];C.onLoad&&C.onLoad(v)}}).catch(v=>{const y=xp[a];if(void 0===y)throw this.manager.itemError(a),v;delete xp[a];for(let _=0,b=y.length;_<b;_++){const C=y[_];C.onError&&C.onError(v)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)}),this.manager.itemStart(a)}setResponseType(a){return this.responseType=a,this}setMimeType(a){return this.mimeType=a,this}}class KW extends qc{constructor(a,l=1){super(),this.isLight=!0,this.type="Light",this.color=new pn(a),this.intensity=l}dispose(){}copy(a,l){return super.copy(a,l),this.color.copy(a.color),this.intensity=a.intensity,this}toJSON(a){const l=super.toJSON(a);return l.object.color=this.color.getHex(),l.object.intensity=this.intensity,void 0!==this.groundColor&&(l.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(l.object.distance=this.distance),void 0!==this.angle&&(l.object.angle=this.angle),void 0!==this.decay&&(l.object.decay=this.decay),void 0!==this.penumbra&&(l.object.penumbra=this.penumbra),void 0!==this.shadow&&(l.object.shadow=this.shadow.toJSON()),l}}const Mbe=new Oi,Ebe=new ae,Abe=new ae;class Ibe{constructor(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new yt(512,512),this.map=null,this.mapPass=null,this.matrix=new Oi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new TW,this._frameExtents=new yt(1,1),this._viewportCount=1,this._viewports=[new pr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const l=this.camera,h=this.matrix;Ebe.setFromMatrixPosition(a.matrixWorld),l.position.copy(Ebe),Abe.setFromMatrixPosition(a.target.matrixWorld),l.lookAt(Abe),l.updateMatrixWorld(),Mbe.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mbe),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(l.projectionMatrix),h.multiply(l.matrixWorldInverse)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};return 0!==this.bias&&(a.bias=this.bias),0!==this.normalBias&&(a.normalBias=this.normalBias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}const Pbe=new Oi,b2=new ae,JW=new ae;class nCt extends Ibe{constructor(){super(new ko(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new yt(4,2),this._viewportCount=6,this._viewports=[new pr(2,1,1,1),new pr(0,1,1,1),new pr(3,1,1,1),new pr(1,1,1,1),new pr(3,0,1,1),new pr(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(a,l=0){const h=this.camera,d=this.matrix,f=a.distance||h.far;f!==h.far&&(h.far=f,h.updateProjectionMatrix()),b2.setFromMatrixPosition(a.matrixWorld),h.position.copy(b2),JW.copy(h.position),JW.add(this._cubeDirections[l]),h.up.copy(this._cubeUps[l]),h.lookAt(JW),h.updateMatrixWorld(),d.makeTranslation(-b2.x,-b2.y,-b2.z),Pbe.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pbe)}}class Rbe extends KW{constructor(a,l,h=0,d=1){super(a,l),this.isPointLight=!0,this.type="PointLight",this.distance=h,this.decay=d,this.shadow=new nCt}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a,l){return super.copy(a,l),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}class iCt extends Ibe{constructor(){super(new n2(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Fbe extends KW{constructor(a,l){super(a,l),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qc.DefaultUp),this.updateMatrix(),this.target=new qc,this.shadow=new iCt}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}class rP extends KW{constructor(a,l){super(a,l),this.isAmbientLight=!0,this.type="AmbientLight"}}class Hbe{constructor(a=!0){this.autoStart=a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$be(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const l=$be();a=(l-this.oldTime)/1e3,this.oldTime=l,this.elapsedTime+=a}return a}}function $be(){return(typeof performance>"u"?Date:performance).now()}const tG="\\[\\]\\.:\\/",fCt=new RegExp("["+tG+"]","g"),nG="[^"+tG+"]",pCt="[^"+tG.replace("\\.","")+"]",_Ct=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",nG)+/(WCOD+)?/.source.replace("WCOD",pCt)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nG)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nG)+"$"),bCt=["material","materials","bones"];class CCt{constructor(a,l,h){const d=h||bs.parseTrackName(l);this._targetGroup=a,this._bindings=a.subscribe_(l,d)}getValue(a,l){this.bind();const d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(a,l)}setValue(a,l){const h=this._bindings;for(let d=this._targetGroup.nCachedObjects_,f=h.length;d!==f;++d)h[d].setValue(a,l)}bind(){const a=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=a.length;l!==h;++l)a[l].bind()}unbind(){const a=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=a.length;l!==h;++l)a[l].unbind()}}let bs=(()=>{class c{constructor(l,h,d){this.path=h,this.parsedPath=d||c.parseTrackName(h),this.node=c.findNode(l,this.parsedPath.nodeName)||l,this.rootNode=l,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(l,h,d){return l&&l.isAnimationObjectGroup?new c.Composite(l,h,d):new c(l,h,d)}static sanitizeNodeName(l){return l.replace(/\s/g,"_").replace(fCt,"")}static parseTrackName(l){const h=_Ct.exec(l);if(null===h)throw new Error("PropertyBinding: Cannot parse trackName: "+l);const d={nodeName:h[2],objectName:h[3],objectIndex:h[4],propertyName:h[5],propertyIndex:h[6]},f=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==f&&-1!==f){const p=d.nodeName.substring(f+1);-1!==bCt.indexOf(p)&&(d.nodeName=d.nodeName.substring(0,f),d.objectName=p)}if(null===d.propertyName||0===d.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+l);return d}static findNode(l,h){if(void 0===h||""===h||"."===h||-1===h||h===l.name||h===l.uuid)return l;if(l.skeleton){const d=l.skeleton.getBoneByName(h);if(void 0!==d)return d}if(l.children){const d=function(p){for(let g=0;g<p.length;g++){const m=p[g];if(m.name===h||m.uuid===h)return m;const v=d(m.children);if(v)return v}return null},f=d(l.children);if(f)return f}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(l,h){l[h]=this.targetObject[this.propertyName]}_getValue_array(l,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)l[h++]=d[f]}_getValue_arrayElement(l,h){l[h]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(l,h){this.resolvedProperty.toArray(l,h)}_setValue_direct(l,h){this.targetObject[this.propertyName]=l[h]}_setValue_direct_setNeedsUpdate(l,h){this.targetObject[this.propertyName]=l[h],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(l,h){this.targetObject[this.propertyName]=l[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(l,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)d[f]=l[h++]}_setValue_array_setNeedsUpdate(l,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)d[f]=l[h++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(l,h){const d=this.resolvedProperty;for(let f=0,p=d.length;f!==p;++f)d[f]=l[h++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(l,h){this.resolvedProperty[this.propertyIndex]=l[h]}_setValue_arrayElement_setNeedsUpdate(l,h){this.resolvedProperty[this.propertyIndex]=l[h],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(l,h){this.resolvedProperty[this.propertyIndex]=l[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(l,h){this.resolvedProperty.fromArray(l,h)}_setValue_fromArray_setNeedsUpdate(l,h){this.resolvedProperty.fromArray(l,h),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(l,h){this.resolvedProperty.fromArray(l,h),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(l,h){this.bind(),this.getValue(l,h)}_setValue_unbound(l,h){this.bind(),this.setValue(l,h)}bind(){let l=this.node;const h=this.parsedPath,d=h.objectName,f=h.propertyName;let p=h.propertyIndex;if(l||(l=c.findNode(this.rootNode,h.nodeName)||this.rootNode,this.node=l),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!l)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(d){let y=h.objectIndex;switch(d){case"materials":if(!l.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!l.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);l=l.material.materials;break;case"bones":if(!l.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);l=l.skeleton.bones;for(let _=0;_<l.length;_++)if(l[_].name===y){y=_;break}break;default:if(void 0===l[d])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);l=l[d]}if(void 0!==y){if(void 0===l[y])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,l);l=l[y]}}const g=l[f];if(void 0===g)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+h.nodeName+"."+f+" but it wasn't found.",l);let m=this.Versioning.None;this.targetObject=l,void 0!==l.needsUpdate?m=this.Versioning.NeedsUpdate:void 0!==l.matrixWorldNeedsUpdate&&(m=this.Versioning.MatrixWorldNeedsUpdate);let v=this.BindingType.Direct;if(void 0!==p){if("morphTargetInfluences"===f){if(!l.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!l.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==l.morphTargetDictionary[p]&&(p=l.morphTargetDictionary[p])}v=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=p}else void 0!==g.fromArray&&void 0!==g.toArray?(v=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(v=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=f;this.getValue=this.GetterByBindingType[v],this.setValue=this.SetterByBindingTypeAndVersioning[v][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=CCt,c})();bs.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},bs.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},bs.prototype.GetterByBindingType=[bs.prototype._getValue_direct,bs.prototype._getValue_array,bs.prototype._getValue_arrayElement,bs.prototype._getValue_toArray],bs.prototype.SetterByBindingTypeAndVersioning=[[bs.prototype._setValue_direct,bs.prototype._setValue_direct_setNeedsUpdate,bs.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bs.prototype._setValue_array,bs.prototype._setValue_array_setNeedsUpdate,bs.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bs.prototype._setValue_arrayElement,bs.prototype._setValue_arrayElement_setNeedsUpdate,bs.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bs.prototype._setValue_fromArray,bs.prototype._setValue_fromArray_setNeedsUpdate,bs.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wCt{constructor(a,l,h=0,d=1/0){this.ray=new cI(a,l),this.near=h,this.far=d,this.camera=null,this.layers=new pW,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(a,l){this.ray.set(a,l)}setFromCamera(a,l){l.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(l.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(l).sub(this.ray.origin).normalize(),this.camera=l):l.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(l.near+l.far)/(l.near-l.far)).unproject(l),this.ray.direction.set(0,0,-1).transformDirection(l.matrixWorld),this.camera=l):console.error("THREE.Raycaster: Unsupported camera type: "+l.type)}intersectObject(a,l=!0,h=[]){return iG(a,this,h,l),h.sort(jbe),h}intersectObjects(a,l=!0,h=[]){for(let d=0,f=a.length;d<f;d++)iG(a[d],this,h,l);return h.sort(jbe),h}}function jbe(c,a){return c.distance-a.distance}function iG(c,a,l,h){if(c.layers.test(a.layers)&&c.raycast(a,l),!0===h){const d=c.children;for(let f=0,p=d.length;f<p;f++)iG(d[f],a,l,!0)}}class DCt{constructor(){this.type="ShapePath",this.color=new pn,this.subPaths=[],this.currentPath=null}moveTo(a,l){return this.currentPath=new Sv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,l),this}lineTo(a,l){return this.currentPath.lineTo(a,l),this}quadraticCurveTo(a,l,h,d){return this.currentPath.quadraticCurveTo(a,l,h,d),this}bezierCurveTo(a,l,h,d,f,p){return this.currentPath.bezierCurveTo(a,l,h,d,f,p),this}splineThru(a){return this.currentPath.splineThru(a),this}toShapes(a,l){function h(T){const M=[];for(let k=0,E=T.length;k<E;k++){const P=T[k],V=new Cp;V.curves=P.curves,M.push(V)}return M}function d(T,M){const k=M.length;let E=!1;for(let P=k-1,V=0;V<k;P=V++){let I=M[P],U=M[V],$=U.x-I.x,H=U.y-I.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(I=M[V],$=-$,U=M[P],H=-H),T.y<I.y||T.y>U.y)continue;if(T.y===I.y){if(T.x===I.x)return!0}else{const J=H*(T.x-I.x)-$*(T.y-I.y);if(0===J)return!0;if(J<0)continue;E=!E}}else{if(T.y!==I.y)continue;if(U.x<=T.x&&T.x<=I.x||I.x<=T.x&&T.x<=U.x)return!0}}return E}const f=Sp.isClockWise,p=this.subPaths;if(0===p.length)return[];if(!0===l)return h(p);let g,m,v;const y=[];if(1===p.length)return m=p[0],v=new Cp,v.curves=m.curves,y.push(v),y;let _=!f(p[0].getPoints());_=a?!_:_;const b=[],C=[];let O,D,x=[],w=0;C[w]=void 0,x[w]=[];for(let T=0,M=p.length;T<M;T++)m=p[T],O=m.getPoints(),g=f(O),g=a?!g:g,g?(!_&&C[w]&&w++,C[w]={s:new Cp,p:O},C[w].s.curves=m.curves,_&&w++,x[w]=[]):x[w].push({h:m,p:O[0]});if(!C[0])return h(p);if(C.length>1){let T=!1,M=0;for(let k=0,E=C.length;k<E;k++)b[k]=[];for(let k=0,E=C.length;k<E;k++){const P=x[k];for(let V=0;V<P.length;V++){const I=P[V];let U=!0;for(let $=0;$<C.length;$++)d(I.p,C[$].p)&&(k!==$&&M++,U?(U=!1,b[$].push(I)):T=!0);U&&b[k].push(I)}}M>0&&!1===T&&(x=b)}for(let T=0,M=C.length;T<M;T++){v=C[T].s,y.push(v),D=x[T];for(let k=0,E=D.length;k<E;k++)v.holes.push(D[k].h)}return y}}function ICt(){const c=new ArrayBuffer(4),a=new Float32Array(c),l=new Uint32Array(c),h=new Uint32Array(512),d=new Uint32Array(512);for(let m=0;m<256;++m){const v=m-127;v<-27?(h[m]=0,h[256|m]=32768,d[m]=24,d[256|m]=24):v<-14?(h[m]=1024>>-v-14,h[256|m]=1024>>-v-14|32768,d[m]=-v-1,d[256|m]=-v-1):v<=15?(h[m]=v+15<<10,h[256|m]=v+15<<10|32768,d[m]=13,d[256|m]=13):v<128?(h[m]=31744,h[256|m]=64512,d[m]=24,d[256|m]=24):(h[m]=31744,h[256|m]=64512,d[m]=13,d[256|m]=13)}const f=new Uint32Array(2048),p=new Uint32Array(64),g=new Uint32Array(64);for(let m=1;m<1024;++m){let v=m<<13,y=0;for(;!(8388608&v);)v<<=1,y-=8388608;v&=-8388609,y+=947912704,f[m]=v|y}for(let m=1024;m<2048;++m)f[m]=939524096+(m-1024<<13);for(let m=1;m<31;++m)p[m]=m<<23;p[31]=1199570944,p[32]=2147483648;for(let m=33;m<63;++m)p[m]=2147483648+(m-32<<23);p[63]=3347054592;for(let m=1;m<64;++m)32!==m&&(g[m]=1024);return{floatView:a,uint32View:l,baseTable:h,shiftTable:d,mantissaTable:f,exponentTable:p,offsetTable:g}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");class C2{constructor(){S(this,"iWidthPixelIncrement",0),S(this,"iHeightPixelIncrement",0),S(this,"iXPixelIncrement",0),S(this,"iYPixelIncrement",0),S(this,"iCanvasWidth",0),S(this,"iCanvasHeight",0),S(this,"iPercentage",!1),S(this,"bLight",!0),S(this,"actionHandler",()=>{}),S(this,"params",new Map),S(this,"appLogoTextProvider",()=>""),S(this,"appParamProvider",()=>({}))}get canvasWidth(){let a=window.innerWidth+this.iWidthPixelIncrement;return this.iCanvasWidth>0?this.iCanvasWidth*(this.iPercentage?a/100:1):a}get canvasHeight(){let a=window.innerHeight+this.iHeightPixelIncrement;return this.iCanvasHeight>0?this.iCanvasHeight*(this.iPercentage?a/100:1):a}get canvasPercentage(){return this.iPercentage}incrementX(a){return a+this.iXPixelIncrement}incrementY(a){return a+this.iYPixelIncrement}isLight(){return this.bLight}setWidthPixelIncrement(a){return this.iWidthPixelIncrement=a,this}setHeightPixelIncrement(a){return this.iHeightPixelIncrement=a,this}setXPixelIncrement(a){return this.iXPixelIncrement=a,this}setYPixelIncrement(a){return this.iYPixelIncrement=a,this}setCanvasWidth(a){return this.iCanvasWidth=a,this}setCanvasHeight(a){return this.iCanvasHeight=a,this}setPercentage(a){return this.iPercentage=a,this}setLight(a){return this.bLight=a,this}setActionHandler(a){return this.actionHandler=a,this}setParam(a,l){return this.params.set(a,l),this}getParam(a){return this.params.get(a)}setAppLogoTextProvider(a){return this.appLogoTextProvider=a,this}setAppParamProvider(a){return this.appParamProvider=a,this}runAction(a){return this.actionHandler&&this.actionHandler(a),this}init(a){}render(){}onResize(){}onMouseMove(a){}onMouseClick(a){}dispose(){}}class FCt extends C2{constructor(...a){super(...a),S(this,"renderer",null),S(this,"camera",null),S(this,"scene",null),S(this,"light",null),S(this,"cube",null),S(this,"frameId",null)}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(a){this.renderer=a;let l=this.canvasWidth,h=this.canvasHeight;this.renderer.setSize(l,h),this.renderer.setClearColor(255,1),this.scene=new s2,this.camera=new ko(75,l/h,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new rP(4210752),this.light.position.z=10,this.scene.add(this.light);const d=new bp(1,1,1),f=new co({color:65280,wireframe:!1,transparent:!0});this.cube=new fr(d,f),this.scene.add(this.cube)}onMouseMove(a){}onResize(){const a=this.canvasWidth,l=this.canvasHeight;this.camera.aspect=a/l,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,l)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.renderer.render(this.scene,this.camera)}}class LCt extends C2{constructor(...a){super(...a),S(this,"renderer",null),S(this,"camera",null),S(this,"scene",null),S(this,"cube",null),S(this,"mouseX",0),S(this,"mouseY",0),S(this,"frameId",null)}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(a){this.renderer=a,this.camera=new ko(20,this.canvasWidth/this.canvasHeight,1,1e4),this.camera.position.z=1800,this.scene=new s2,this.scene.background=new pn(16777215);const l=new Fbe(16777215);l.position.set(0,0,1),this.scene.add(l);const h=document.createElement("canvas");h.width=128,h.height=128;const f=h.getContext("2d"),p=f.createRadialGradient(h.width/2,h.height/2,0,h.width/2,h.height/2,h.width/2);p.addColorStop(.1,"rgba(210,210,210,1)"),p.addColorStop(1,"rgba(255,255,255,1)"),f.fillStyle=p,f.fillRect(0,0,h.width,h.height);const g=new lbe(h),m=new co({map:g}),v=new Lb(300,300,1,1);let y;y=new fr(v,m),y.position.y=-250,y.rotation.x=-Math.PI/2,this.scene.add(y),y=new fr(v,m),y.position.y=-250,y.position.x=-400,y.rotation.x=-Math.PI/2,this.scene.add(y),y=new fr(v,m),y.position.y=-250,y.position.x=400,y.rotation.x=-Math.PI/2,this.scene.add(y);const _=200,b=new v2(_,1),C=b.attributes.position.count;b.setAttribute("color",new Hs(new Float32Array(3*C),3));const x=b.clone(),w=b.clone(),O=new pn,D=b.attributes.position,T=x.attributes.position,M=w.attributes.position,k=b.attributes.color,E=x.attributes.color,P=w.attributes.color;for(let ee=0;ee<C;ee++)O.setHSL((D.getY(ee)/_+1)/2,1,.5),k.setXYZ(ee,O.r,O.g,O.b),O.setHSL(0,(T.getY(ee)/_+1)/2,.5),E.setXYZ(ee,O.r,O.g,O.b),O.setRGB(1,.8-(M.getY(ee)/_+1)/2,0),P.setXYZ(ee,O.r,O.g,O.b);const V=new xbe({color:16777215,flatShading:!0,vertexColors:!0,shininess:0}),I=new co({color:0,wireframe:!0,transparent:!0});let U=new fr(b,V),$=new fr(b,I);U.add($),U.position.x=-400,U.rotation.x=-1.87,this.scene.add(U),U=new fr(x,V),$=new fr(x,I),U.add($),U.position.x=400,this.scene.add(U),U=new fr(w,V),$=new fr(w,I),U.add($),this.scene.add(U),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.setClearColor(255,1)}onMouseMove(a){let h=this.canvasHeight/2;this.mouseX=a.clientX-this.canvasWidth/2,this.mouseY=a.clientY-h}onResize(){const a=this.canvasWidth,l=this.canvasHeight;this.camera.aspect=a/l,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,l)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position)),this.renderer.render(this.scene,this.camera)}}const dP={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class S2{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const NCt=new n2(-1,1,1,-1,0,1),oG=new $i;oG.setAttribute("position",new Pn([-1,3,0,-1,-1,0,3,-1,0],3)),oG.setAttribute("uv",new Pn([0,2,0,0,2,0],2));class sCe{constructor(a){this._mesh=new fr(oG,a)}dispose(){this._mesh.geometry.dispose()}render(a){a.render(this._mesh,NCt)}get material(){return this._mesh.material}set material(a){this._mesh.material=a}}class aG extends S2{constructor(a,l){super(),this.textureID=void 0!==l?l:"tDiffuse",a instanceof Ya?(this.uniforms=a.uniforms,this.material=a):a&&(this.uniforms=CI.clone(a.uniforms),this.material=new Ya({defines:Object.assign({},a.defines),uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader})),this.fsQuad=new sCe(this.material)}render(a,l,h){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=h.texture),this.fsQuad.material=this.material,this.renderToScreen?(a.setRenderTarget(null),this.fsQuad.render(a)):(a.setRenderTarget(l),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),this.fsQuad.render(a))}}class oCe extends S2{constructor(a,l){super(),this.scene=a,this.camera=l,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(a,l,h){const d=a.getContext(),f=a.state;let p,g;f.buffers.color.setMask(!1),f.buffers.depth.setMask(!1),f.buffers.color.setLocked(!0),f.buffers.depth.setLocked(!0),this.inverse?(p=0,g=1):(p=1,g=0),f.buffers.stencil.setTest(!0),f.buffers.stencil.setOp(d.REPLACE,d.REPLACE,d.REPLACE),f.buffers.stencil.setFunc(d.ALWAYS,p,4294967295),f.buffers.stencil.setClear(g),f.buffers.stencil.setLocked(!0),a.setRenderTarget(h),this.clear&&a.clear(),a.render(this.scene,this.camera),a.setRenderTarget(l),this.clear&&a.clear(),a.render(this.scene,this.camera),f.buffers.color.setLocked(!1),f.buffers.depth.setLocked(!1),f.buffers.stencil.setLocked(!1),f.buffers.stencil.setFunc(d.EQUAL,1,4294967295),f.buffers.stencil.setOp(d.KEEP,d.KEEP,d.KEEP),f.buffers.stencil.setLocked(!0)}}class BCt extends S2{constructor(){super(),this.needsSwap=!1}render(a){a.state.buffers.stencil.setLocked(!1),a.state.buffers.stencil.setTest(!1)}}class VCt{constructor(a,l){if(this.renderer=a,void 0===l){const h=a.getSize(new yt);this._pixelRatio=a.getPixelRatio(),this._width=h.width,this._height=h.height,(l=new Fl(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=l.width,this._height=l.height;this.renderTarget1=l,this.renderTarget2=l.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===dP&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===aG&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new aG(dP),this.clock=new Hbe}swapBuffers(){const a=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=a}addPass(a){this.passes.push(a),a.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(a,l){this.passes.splice(l,0,a),a.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(a){const l=this.passes.indexOf(a);-1!==l&&this.passes.splice(l,1)}isLastEnabledPass(a){for(let l=a+1;l<this.passes.length;l++)if(this.passes[l].enabled)return!1;return!0}render(a){void 0===a&&(a=this.clock.getDelta());const l=this.renderer.getRenderTarget();let h=!1;for(let d=0,f=this.passes.length;d<f;d++){const p=this.passes[d];if(!1!==p.enabled){if(p.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(d),p.render(this.renderer,this.writeBuffer,this.readBuffer,a,h),p.needsSwap){if(h){const g=this.renderer.getContext(),m=this.renderer.state.buffers.stencil;m.setFunc(g.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,a),m.setFunc(g.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==oCe&&(p instanceof oCe?h=!0:p instanceof BCt&&(h=!1))}}this.renderer.setRenderTarget(l)}reset(a){if(void 0===a){const l=this.renderer.getSize(new yt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=l.width,this._height=l.height,(a=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=a,this.renderTarget2=a.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(a,l){this._width=a,this._height=l;const h=this._width*this._pixelRatio,d=this._height*this._pixelRatio;this.renderTarget1.setSize(h,d),this.renderTarget2.setSize(h,d);for(let f=0;f<this.passes.length;f++)this.passes[f].setSize(h,d)}setPixelRatio(a){this._pixelRatio=a,this.setSize(this._width,this._height)}}new n2(-1,1,1,-1,0,1);const lG=new $i;lG.setAttribute("position",new Pn([-1,3,0,-1,-1,0,3,-1,0],3)),lG.setAttribute("uv",new Pn([0,2,0,0,2,0],2));class zCt extends S2{constructor(a,l,h,d,f){super(),this.scene=a,this.camera=l,this.overrideMaterial=h,this.clearColor=d,this.clearAlpha=void 0!==f?f:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new pn}render(a,l,h){const d=a.autoClear;let f,p;a.autoClear=!1,void 0!==this.overrideMaterial&&(p=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(a.getClearColor(this._oldClearColor),f=a.getClearAlpha(),a.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&a.clearDepth(),a.setRenderTarget(this.renderToScreen?null:h),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),a.render(this.scene,this.camera),this.clearColor&&a.setClearColor(this._oldClearColor,f),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=p),a.autoClear=d}}class rm extends S2{constructor(a,l,h,d){super(),this.renderScene=l,this.renderCamera=h,this.selectedObjects=void 0!==d?d:[],this.visibleEdgeColor=new pn(1,1,1),this.hiddenEdgeColor=new pn(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==a?new yt(a.x,a.y):new yt(256,256);const f=Math.round(this.resolution.x/this.downSampleRatio),p=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Fl(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new RW,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=function y(_,b){return _.replace(/DEPTH_TO_VIEW_Z/g,(b.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Fl(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Fl(f,p),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Fl(f,p),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Fl(Math.round(f/2),Math.round(p/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Fl(f,p),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Fl(Math.round(f/2),Math.round(p/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(f,p),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(f/2),Math.round(p/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===dP&&console.error("THREE.OutlinePass relies on CopyShader");const v=dP;this.copyUniforms=CI.clone(v.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Ya({uniforms:this.copyUniforms,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,blending:0,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new pn,this.oldClearAlpha=1,this.fsQuad=new sCe(null),this.tempPulseColor1=new pn,this.tempPulseColor2=new pn,this.textureMatrix=new Oi}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(a,l){this.renderTargetMaskBuffer.setSize(a,l),this.renderTargetDepthBuffer.setSize(a,l);let h=Math.round(a/this.downSampleRatio),d=Math.round(l/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(h,d),this.renderTargetBlurBuffer1.setSize(h,d),this.renderTargetEdgeBuffer1.setSize(h,d),this.separableBlurMaterial1.uniforms.texSize.value.set(h,d),h=Math.round(h/2),d=Math.round(d/2),this.renderTargetBlurBuffer2.setSize(h,d),this.renderTargetEdgeBuffer2.setSize(h,d),this.separableBlurMaterial2.uniforms.texSize.value.set(h,d)}changeVisibilityOfSelectedObjects(a){const l=this._visibilityCache;function h(d){d.isMesh&&(!0===a?d.visible=l.get(d):(l.set(d,d.visible),d.visible=a))}for(let d=0;d<this.selectedObjects.length;d++)this.selectedObjects[d].traverse(h)}changeVisibilityOfNonSelectedObjects(a){const l=this._visibilityCache,h=[];function d(p){p.isMesh&&h.push(p)}for(let p=0;p<this.selectedObjects.length;p++)this.selectedObjects[p].traverse(d);this.renderScene.traverse(function f(p){if(p.isMesh||p.isSprite){let g=!1;for(let m=0;m<h.length;m++)if(h[m].id===p.id){g=!0;break}if(!1===g){const m=p.visible;(!1===a||!0===l.get(p))&&(p.visible=a),l.set(p,m)}}else(p.isPoints||p.isLine)&&(!0===a?p.visible=l.get(p):(l.set(p,p.visible),p.visible=a))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(a,l,h,d,f){if(this.selectedObjects.length>0){a.getClearColor(this._oldClearColor),this.oldClearAlpha=a.getClearAlpha();const p=a.autoClear;a.autoClear=!1,f&&a.state.buffers.stencil.setTest(!1),a.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const g=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,a.setRenderTarget(this.renderTargetDepthBuffer),a.clear(),a.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,a.setRenderTarget(this.renderTargetMaskBuffer),a.clear(),a.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=g,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,a.setRenderTarget(this.renderTargetMaskDownSampleBuffer),a.clear(),this.fsQuad.render(a),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const m=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(m),this.tempPulseColor2.multiplyScalar(m)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,a.setRenderTarget(this.renderTargetEdgeBuffer1),a.clear(),this.fsQuad.render(a),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=rm.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,a.setRenderTarget(this.renderTargetBlurBuffer1),a.clear(),this.fsQuad.render(a),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=rm.BlurDirectionY,a.setRenderTarget(this.renderTargetEdgeBuffer1),a.clear(),this.fsQuad.render(a),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=rm.BlurDirectionX,a.setRenderTarget(this.renderTargetBlurBuffer2),a.clear(),this.fsQuad.render(a),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=rm.BlurDirectionY,a.setRenderTarget(this.renderTargetEdgeBuffer2),a.clear(),this.fsQuad.render(a),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,f&&a.state.buffers.stencil.setTest(!0),a.setRenderTarget(h),this.fsQuad.render(a),a.setClearColor(this._oldClearColor,this.oldClearAlpha),a.autoClear=p}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=h.texture,a.setRenderTarget(null),this.fsQuad.render(a))}getPrepareMaskMaterial(){return new Ya({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new yt(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new Ya({uniforms:{maskTexture:{value:null},texSize:{value:new yt(.5,.5)},visibleEdgeColor:{value:new ae(1,1,1)},hiddenEdgeColor:{value:new ae(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(a){return new Ya({defines:{MAX_RADIUS:a},uniforms:{colorTexture:{value:null},texSize:{value:new yt(.5,.5)},direction:{value:new yt(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new Ya({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}rm.BlurDirectionX=new yt(1,0),rm.BlurDirectionY=new yt(0,1);const HCt={uniforms:{tDiffuse:{value:null},resolution:{value:new yt(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t"};class $Ct extends C2{constructor(...a){super(...a),S(this,"renderer",null),S(this,"camera",null),S(this,"scene",null),S(this,"light",null),S(this,"cube",null),S(this,"mouseX",0),S(this,"mouseY",0),S(this,"composer",null),S(this,"effectFXAA",null),S(this,"outlinePass",null),S(this,"frameId",null)}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(a){this.renderer=a;let l=this.canvasWidth,h=this.canvasHeight;this.renderer.setSize(l,h),this.renderer.setClearColor(255,1),this.scene=new s2,this.camera=new ko(75,l/h,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new rP(4210752),this.light.position.z=10,this.scene.add(this.light);const d=new bp(1,1,1),f=new co({color:65280,wireframe:!1,transparent:!0}),p=new co({color:0,wireframe:!0,transparent:!0});this.cube=new fr(d,f),this.cube.add(new fr(d,p)),this.scene.add(this.cube),this.composer=new VCt(this.renderer);const g=new zCt(this.scene,this.camera);this.composer.addPass(g),this.outlinePass=new rm(new yt(l,h),this.scene,this.camera),this.composer.addPass(this.outlinePass),this.effectFXAA=new aG(HCt),this.effectFXAA.uniforms.resolution.value.set(1/l,1/h),this.composer.addPass(this.effectFXAA),this.composer.setSize(l,h),this.outlinePass.selectedObjects=[this.cube];const m=document.createElement("canvas");m.width=128,m.height=128;const y=m.getContext("2d");y.fillStyle="red",y.fillRect(0,0,m.width,m.height);const _=new lbe(m);_.wrapS=ub,_.wrapT=ub,this.outlinePass.patternTexture=_,this.outlinePass.edgeStrength=10,this.outlinePass.edgeGlow=1,this.outlinePass.edgeThickness=1,this.outlinePass.pulsePeriod=0,this.outlinePass.usePatternTexture=!0,this.outlinePass.visibleEdgeColor=new pn(16746632)}onMouseMove(a){let h=this.canvasHeight/2;this.mouseX=a.clientX-this.canvasWidth/2,this.mouseY=a.clientY-h}onResize(){const a=this.canvasWidth,l=this.canvasHeight;this.camera.aspect=a/l,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,l),this.composer.setSize(a,l)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.composer&&this.composer.render()}}var Op=(()=>(function(c){c[c.Vertexes=0]="Vertexes",c[c.Normals=1]="Normals",c[c.UV=2]="UV"}(Op||(Op={})),Op))();class eC{constructor(){S(this,"vertexes",[]),S(this,"normals",[]),S(this,"uv",[])}static builder(){return new eC}addTriangle(a,l,h,d,f,p){this.vertexes.push(a,l,h);let g=new ae;g.copy(l),g.sub(a);let m=new ae;m.copy(h),m.sub(a);let v=g.cross(m);return v=v.normalize(),this.normals.push(v,v,v),this}addPlaneXY(a,l,h,d=0,f=0){let p=new ae(a.x,a.y,a.z),g=new ae(a.x,a.y,a.z),m=new ae(a.x,a.y,a.z),v=new ae(a.x,a.y,a.z);g.add(new ae(l,0,0)),m.add(new ae(0,-h,0)),v.add(new ae(l,-h,0));let y=new cc;return y.set(1,0,0,Math.tan(-f),1,0,0,0,1),p.applyMatrix3(y),g.applyMatrix3(y),m.applyMatrix3(y),v.applyMatrix3(y),this.addTriangle(p,m,g,new yt(0,0),new yt(0,1),new yt(1,0)),this.addTriangle(g,m,v,new yt(1,0),new yt(0,1),new yt(1,1)),this}toPlainArray(a=Op.Vertexes){switch(a){case Op.Normals:return this.normals.flatMap(l=>[l.x,l.y,l.z]);case Op.UV:return this.uv.flatMap(l=>[l.x,l.y]);default:return this.vertexes.flatMap(l=>[l.x,l.y,l.z])}}}function x2(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function WCt(c,a){this.source=c,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=a,this.destLen=0,this.ltree=new x2,this.dtree=new x2}String.prototype.codePointAt||function(){var c=function(){try{var l={},h=Object.defineProperty,d=h(l,l,l)&&h}catch{}return d}(),a=function(l){if(null==this)throw TypeError();var h=String(this),d=h.length,f=l?Number(l):0;if(f!=f&&(f=0),!(f<0||f>=d)){var g,p=h.charCodeAt(f);return p>=55296&&p<=56319&&d>f+1&&(g=h.charCodeAt(f+1))>=56320&&g<=57343?1024*(p-55296)+g-56320+65536:p}};c?c(String.prototype,"codePointAt",{value:a,configurable:!0,writable:!0}):String.prototype.codePointAt=a}();var lCe=new x2,cCe=new x2,uG=new Uint8Array(30),hG=new Uint16Array(30),uCe=new Uint8Array(30),hCe=new Uint16Array(30),GCt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dCe=new x2,tf=new Uint8Array(320);function fCe(c,a,l,h){var d,f;for(d=0;d<l;++d)c[d]=0;for(d=0;d<30-l;++d)c[d+l]=d/l|0;for(f=h,d=0;d<30;++d)a[d]=f,f+=1<<c[d]}var pCe=new Uint16Array(16);function dG(c,a,l,h){var d,f;for(d=0;d<16;++d)c.table[d]=0;for(d=0;d<h;++d)c.table[a[l+d]]++;for(c.table[0]=0,f=0,d=0;d<16;++d)pCe[d]=f,f+=c.table[d];for(d=0;d<h;++d)a[l+d]&&(c.trans[pCe[a[l+d]]++]=d)}function jCt(c){c.bitcount--||(c.tag=c.source[c.sourceIndex++],c.bitcount=7);var a=1&c.tag;return c.tag>>>=1,a}function nf(c,a,l){if(!a)return l;for(;c.bitcount<24;)c.tag|=c.source[c.sourceIndex++]<<c.bitcount,c.bitcount+=8;var h=c.tag&65535>>>16-a;return c.tag>>>=a,c.bitcount-=a,h+l}function fG(c,a){for(;c.bitcount<24;)c.tag|=c.source[c.sourceIndex++]<<c.bitcount,c.bitcount+=8;var l=0,h=0,d=0,f=c.tag;do{h=2*h+(1&f),f>>>=1,++d,l+=a.table[d],h-=a.table[d]}while(h>=0);return c.tag=f,c.bitcount-=d,a.trans[l+h]}function ZCt(c,a,l){var h,d,f,p,g,m;for(h=nf(c,5,257),d=nf(c,5,1),f=nf(c,4,4),p=0;p<19;++p)tf[p]=0;for(p=0;p<f;++p){var v=nf(c,3,0);tf[GCt[p]]=v}for(dG(dCe,tf,0,19),g=0;g<h+d;){var y=fG(c,dCe);switch(y){case 16:var _=tf[g-1];for(m=nf(c,2,3);m;--m)tf[g++]=_;break;case 17:for(m=nf(c,3,3);m;--m)tf[g++]=0;break;case 18:for(m=nf(c,7,11);m;--m)tf[g++]=0;break;default:tf[g++]=y}}dG(a,tf,0,h),dG(l,tf,h,d)}function gCe(c,a,l){for(;;){var d,f,p,g,h=fG(c,a);if(256===h)return 0;if(h<256)c.dest[c.destLen++]=h;else for(d=nf(c,uG[h-=257],hG[h]),f=fG(c,l),g=p=c.destLen-nf(c,uCe[f],hCe[f]);g<p+d;++g)c.dest[c.destLen++]=c.dest[g]}}function qCt(c){for(var a,h;c.bitcount>8;)c.sourceIndex--,c.bitcount-=8;if((a=256*(a=c.source[c.sourceIndex+1])+c.source[c.sourceIndex])!==(65535&~(256*c.source[c.sourceIndex+3]+c.source[c.sourceIndex+2])))return-3;for(c.sourceIndex+=4,h=a;h;--h)c.dest[c.destLen++]=c.source[c.sourceIndex++];return c.bitcount=0,0}(function QCt(c,a){var l;for(l=0;l<7;++l)c.table[l]=0;for(c.table[7]=24,c.table[8]=152,c.table[9]=112,l=0;l<24;++l)c.trans[l]=256+l;for(l=0;l<144;++l)c.trans[24+l]=l;for(l=0;l<8;++l)c.trans[168+l]=280+l;for(l=0;l<112;++l)c.trans[176+l]=144+l;for(l=0;l<5;++l)a.table[l]=0;for(a.table[5]=32,l=0;l<32;++l)a.trans[l]=l})(lCe,cCe),fCe(uG,hG,4,3),fCe(uCe,hCe,2,1),uG[28]=0,hG[28]=258;function tC(c,a,l,h,d){return Math.pow(1-d,3)*c+3*Math.pow(1-d,2)*d*a+3*(1-d)*Math.pow(d,2)*l+Math.pow(d,3)*h}function Dp(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Mo(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function mCe(c){throw new Error(c)}function vCe(c,a){c||mCe(a)}Dp.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Dp.prototype.addPoint=function(c,a){"number"==typeof c&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=c,this.x2=c),c<this.x1&&(this.x1=c),c>this.x2&&(this.x2=c)),"number"==typeof a&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=a,this.y2=a),a<this.y1&&(this.y1=a),a>this.y2&&(this.y2=a))},Dp.prototype.addX=function(c){this.addPoint(c,null)},Dp.prototype.addY=function(c){this.addPoint(null,c)},Dp.prototype.addBezier=function(c,a,l,h,d,f,p,g){var m=[c,a],v=[l,h],y=[d,f],_=[p,g];this.addPoint(c,a),this.addPoint(p,g);for(var b=0;b<=1;b++){var C=6*m[b]-12*v[b]+6*y[b],x=-3*m[b]+9*v[b]-9*y[b]+3*_[b],w=3*v[b]-3*m[b];if(0!==x){var D=Math.pow(C,2)-4*w*x;if(!(D<0)){var T=(-C+Math.sqrt(D))/(2*x);0<T&&T<1&&(0===b&&this.addX(tC(m[b],v[b],y[b],_[b],T)),1===b&&this.addY(tC(m[b],v[b],y[b],_[b],T)));var M=(-C-Math.sqrt(D))/(2*x);0<M&&M<1&&(0===b&&this.addX(tC(m[b],v[b],y[b],_[b],M)),1===b&&this.addY(tC(m[b],v[b],y[b],_[b],M)))}}else{if(0===C)continue;var O=-w/C;0<O&&O<1&&(0===b&&this.addX(tC(m[b],v[b],y[b],_[b],O)),1===b&&this.addY(tC(m[b],v[b],y[b],_[b],O)))}}},Dp.prototype.addQuad=function(c,a,l,h,d,f){var p=c+.6666666666666666*(l-c),g=a+2/3*(h-a);this.addBezier(c,a,p,g,p+1/3*(d-c),g+1/3*(f-a),d,f)},Mo.prototype.moveTo=function(c,a){this.commands.push({type:"M",x:c,y:a})},Mo.prototype.lineTo=function(c,a){this.commands.push({type:"L",x:c,y:a})},Mo.prototype.curveTo=Mo.prototype.bezierCurveTo=function(c,a,l,h,d,f){this.commands.push({type:"C",x1:c,y1:a,x2:l,y2:h,x:d,y:f})},Mo.prototype.quadTo=Mo.prototype.quadraticCurveTo=function(c,a,l,h){this.commands.push({type:"Q",x1:c,y1:a,x:l,y:h})},Mo.prototype.close=Mo.prototype.closePath=function(){this.commands.push({type:"Z"})},Mo.prototype.extend=function(c){if(c.commands)c=c.commands;else if(c instanceof Dp){var a=c;return this.moveTo(a.x1,a.y1),this.lineTo(a.x2,a.y1),this.lineTo(a.x2,a.y2),this.lineTo(a.x1,a.y2),void this.close()}Array.prototype.push.apply(this.commands,c)},Mo.prototype.getBoundingBox=function(){for(var c=new Dp,a=0,l=0,h=0,d=0,f=0;f<this.commands.length;f++){var p=this.commands[f];switch(p.type){case"M":c.addPoint(p.x,p.y),a=h=p.x,l=d=p.y;break;case"L":c.addPoint(p.x,p.y),h=p.x,d=p.y;break;case"Q":c.addQuad(h,d,p.x1,p.y1,p.x,p.y),h=p.x,d=p.y;break;case"C":c.addBezier(h,d,p.x1,p.y1,p.x2,p.y2,p.x,p.y),h=p.x,d=p.y;break;case"Z":h=a,d=l;break;default:throw new Error("Unexpected path command "+p.type)}}return c.isEmpty()&&c.addPoint(0,0),c},Mo.prototype.draw=function(c){c.beginPath();for(var a=0;a<this.commands.length;a+=1){var l=this.commands[a];"M"===l.type?c.moveTo(l.x,l.y):"L"===l.type?c.lineTo(l.x,l.y):"C"===l.type?c.bezierCurveTo(l.x1,l.y1,l.x2,l.y2,l.x,l.y):"Q"===l.type?c.quadraticCurveTo(l.x1,l.y1,l.x,l.y):"Z"===l.type&&c.closePath()}this.fill&&(c.fillStyle=this.fill,c.fill()),this.stroke&&(c.strokeStyle=this.stroke,c.lineWidth=this.strokeWidth,c.stroke())},Mo.prototype.toPathData=function(c){function a(p){return Math.round(p)===p?""+Math.round(p):p.toFixed(c)}function l(){for(var p=arguments,g="",m=0;m<arguments.length;m+=1){var v=p[m];v>=0&&m>0&&(g+=" "),g+=a(v)}return g}c=void 0!==c?c:2;for(var h="",d=0;d<this.commands.length;d+=1){var f=this.commands[d];"M"===f.type?h+="M"+l(f.x,f.y):"L"===f.type?h+="L"+l(f.x,f.y):"C"===f.type?h+="C"+l(f.x1,f.y1,f.x2,f.y2,f.x,f.y):"Q"===f.type?h+="Q"+l(f.x1,f.y1,f.x,f.y):"Z"===f.type&&(h+="Z")}return h},Mo.prototype.toSVG=function(c){var a='<path d="';return a+=this.toPathData(c),a+='"',this.fill&&"black"!==this.fill&&(a+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(a+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),a+"/>"},Mo.prototype.toDOMElement=function(c){var a=this.toPathData(c),l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",a),l};var Xn={fail:mCe,argument:vCe,assert:vCe},nC={},gn={},yi={};function Uh(c){return function(){return c}}gn.BYTE=function(c){return Xn.argument(c>=0&&c<=255,"Byte value should be between 0 and 255."),[c]},yi.BYTE=Uh(1),gn.CHAR=function(c){return[c.charCodeAt(0)]},yi.CHAR=Uh(1),gn.CHARARRAY=function(c){typeof c>"u"&&(c="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var a=[],l=0;l<c.length;l+=1)a[l]=c.charCodeAt(l);return a},yi.CHARARRAY=function(c){return typeof c>"u"?0:c.length},gn.USHORT=function(c){return[c>>8&255,255&c]},yi.USHORT=Uh(2),gn.SHORT=function(c){return c>=32768&&(c=-(65536-c)),[c>>8&255,255&c]},yi.SHORT=Uh(2),gn.UINT24=function(c){return[c>>16&255,c>>8&255,255&c]},yi.UINT24=Uh(3),gn.ULONG=function(c){return[c>>24&255,c>>16&255,c>>8&255,255&c]},yi.ULONG=Uh(4),gn.LONG=function(c){return c>=2147483648&&(c=-(4294967296-c)),[c>>24&255,c>>16&255,c>>8&255,255&c]},yi.LONG=Uh(4),gn.FIXED=gn.ULONG,yi.FIXED=yi.ULONG,gn.FWORD=gn.SHORT,yi.FWORD=yi.SHORT,gn.UFWORD=gn.USHORT,yi.UFWORD=yi.USHORT,gn.LONGDATETIME=function(c){return[0,0,0,0,c>>24&255,c>>16&255,c>>8&255,255&c]},yi.LONGDATETIME=Uh(8),gn.TAG=function(c){return Xn.argument(4===c.length,"Tag should be exactly 4 ASCII characters."),[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]},yi.TAG=Uh(4),gn.Card8=gn.BYTE,yi.Card8=yi.BYTE,gn.Card16=gn.USHORT,yi.Card16=yi.USHORT,gn.OffSize=gn.BYTE,yi.OffSize=yi.BYTE,gn.SID=gn.USHORT,yi.SID=yi.USHORT,gn.NUMBER=function(c){return c>=-107&&c<=107?[c+139]:c>=108&&c<=1131?[247+((c-=108)>>8),255&c]:c>=-1131&&c<=-108?[251+((c=-c-108)>>8),255&c]:c>=-32768&&c<=32767?gn.NUMBER16(c):gn.NUMBER32(c)},yi.NUMBER=function(c){return gn.NUMBER(c).length},gn.NUMBER16=function(c){return[28,c>>8&255,255&c]},yi.NUMBER16=Uh(3),gn.NUMBER32=function(c){return[29,c>>24&255,c>>16&255,c>>8&255,255&c]},yi.NUMBER32=Uh(5),gn.REAL=function(c){var a=c.toString(),l=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(a);if(l){var h=parseFloat("1e"+((l[2]?+l[2]:0)+l[1].length));a=(Math.round(c*h)/h).toString()}for(var d="",f=0,p=a.length;f<p;f+=1){var g=a[f];d+="e"===g?"-"===a[++f]?"c":"b":"."===g?"a":"-"===g?"e":g}for(var m=[30],v=0,y=(d+=1&d.length?"f":"ff").length;v<y;v+=2)m.push(parseInt(d.substr(v,2),16));return m},yi.REAL=function(c){return gn.REAL(c).length},gn.NAME=gn.CHARARRAY,yi.NAME=yi.CHARARRAY,gn.STRING=gn.CHARARRAY,yi.STRING=yi.CHARARRAY,nC.UTF8=function(c,a,l){for(var h=[],d=l,f=0;f<d;f++,a+=1)h[f]=c.getUint8(a);return String.fromCharCode.apply(null,h)},nC.UTF16=function(c,a,l){for(var h=[],d=l/2,f=0;f<d;f++,a+=2)h[f]=c.getUint16(a);return String.fromCharCode.apply(null,h)},gn.UTF16=function(c){for(var a=[],l=0;l<c.length;l+=1){var h=c.charCodeAt(l);a[a.length]=h>>8&255,a[a.length]=255&h}return a},yi.UTF16=function(c){return 2*c.length};var pG={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};nC.MACSTRING=function(c,a,l,h){var d=pG[h];if(void 0!==d){for(var f="",p=0;p<l;p++){var g=c.getUint8(a+p);f+=g<=127?String.fromCharCode(g):d[127&g]}return f}};var pP,fP="function"==typeof WeakMap&&new WeakMap;function gG(c){return c>=-128&&c<=127}function JCt(c,a,l){for(var h=0,d=c.length;a<d&&h<64&&0===c[a];)++a,++h;return l.push(128|h-1),a}function eSt(c,a,l){for(var h=0,d=c.length,f=a;f<d&&h<64;){var p=c[f];if(!gG(p)||0===p&&f+1<d&&0===c[f+1])break;++f,++h}l.push(h-1);for(var g=a;g<f;++g)l.push(c[g]+256&255);return f}function tSt(c,a,l){for(var h=0,d=c.length,f=a;f<d&&h<64;){var p=c[f];if(0===p||gG(p)&&f+1<d&&gG(c[f+1]))break;++f,++h}l.push(64|h-1);for(var g=a;g<f;++g){var m=c[g];l.push(m+65536>>8&255,m+256&255)}return f}gn.MACSTRING=function(c,a){var l=function(c){if(!pP)for(var a in pP={},pG)pP[a]=new String(a);var l=pP[c];if(void 0!==l){if(fP){var h=fP.get(l);if(void 0!==h)return h}var d=pG[c];if(void 0!==d){for(var f={},p=0;p<d.length;p++)f[d.charCodeAt(p)]=p+128;return fP&&fP.set(l,f),f}}}(a);if(void 0!==l){for(var h=[],d=0;d<c.length;d++){var f=c.charCodeAt(d);if(f>=128&&void 0===(f=l[f]))return;h[d]=f}return h}},yi.MACSTRING=function(c,a){var l=gn.MACSTRING(c,a);return void 0!==l?l.length:0},gn.VARDELTAS=function(c){for(var a=0,l=[];a<c.length;){var h=c[a];a=0===h?JCt(c,a,l):h>=-128&&h<=127?eSt(c,a,l):tSt(c,a,l)}return l},gn.INDEX=function(c){for(var a=1,l=[a],h=[],d=0;d<c.length;d+=1){var f=gn.OBJECT(c[d]);Array.prototype.push.apply(h,f),l.push(a+=f.length)}if(0===h.length)return[0,0];for(var p=[],g=1+Math.floor(Math.log(a)/Math.log(2))/8|0,m=[void 0,gn.BYTE,gn.USHORT,gn.UINT24,gn.ULONG][g],v=0;v<l.length;v+=1){var y=m(l[v]);Array.prototype.push.apply(p,y)}return Array.prototype.concat(gn.Card16(c.length),gn.OffSize(g),p,h)},yi.INDEX=function(c){return gn.INDEX(c).length},gn.DICT=function(c){for(var a=[],l=Object.keys(c),h=l.length,d=0;d<h;d+=1){var f=parseInt(l[d],0),p=c[f];a=(a=a.concat(gn.OPERAND(p.value,p.type))).concat(gn.OPERATOR(f))}return a},yi.DICT=function(c){return gn.DICT(c).length},gn.OPERATOR=function(c){return c<1200?[c]:[12,c-1200]},gn.OPERAND=function(c,a){var l=[];if(Array.isArray(a))for(var h=0;h<a.length;h+=1)Xn.argument(c.length===a.length,"Not enough arguments given for type"+a),l=l.concat(gn.OPERAND(c[h],a[h]));else if("SID"===a)l=l.concat(gn.NUMBER(c));else if("offset"===a)l=l.concat(gn.NUMBER32(c));else if("number"===a)l=l.concat(gn.NUMBER(c));else{if("real"!==a)throw new Error("Unknown operand type "+a);l=l.concat(gn.REAL(c))}return l},gn.OP=gn.BYTE,yi.OP=yi.BYTE;var gP="function"==typeof WeakMap&&new WeakMap;function ua(c,a,l){if(a.length&&("coverageFormat"!==a[0].name||1===a[0].value))for(var h=0;h<a.length;h+=1){var d=a[h];this[d.name]=d.value}if(this.tableName=c,this.fields=a,l)for(var f=Object.keys(l),p=0;p<f.length;p+=1){var g=f[p];void 0!==this[g]&&(this[g]=l[g])}}function w2(c,a,l){void 0===l&&(l=a.length);var h=new Array(a.length+1);h[0]={name:c+"Count",type:"USHORT",value:l};for(var d=0;d<a.length;d++)h[d+1]={name:c+d,type:"USHORT",value:a[d]};return h}function mG(c,a,l){var h=a.length,d=new Array(h+1);d[0]={name:c+"Count",type:"USHORT",value:h};for(var f=0;f<h;f++)d[f+1]={name:c+f,type:"TABLE",value:l(a[f],f)};return d}function O2(c,a,l){var h=a.length,d=[];d[0]={name:c+"Count",type:"USHORT",value:h};for(var f=0;f<h;f++)d=d.concat(l(a[f],f));return d}function mP(c){1===c.format?ua.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(w2("glyph",c.glyphs))):2===c.format?ua.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(O2("rangeRecord",c.ranges,function(a){return[{name:"startGlyphID",type:"USHORT",value:a.start},{name:"endGlyphID",type:"USHORT",value:a.end},{name:"startCoverageIndex",type:"USHORT",value:a.index}]}))):Xn.assert(!1,"Coverage format must be 1 or 2.")}function vP(c){ua.call(this,"scriptListTable",O2("scriptRecord",c,function(a,l){var h=a.script,d=h.defaultLangSys;return Xn.assert(!!d,"Unable to write GSUB: script "+a.tag+" has no default language system."),[{name:"scriptTag"+l,type:"TAG",value:a.tag},{name:"script"+l,type:"TABLE",value:new ua("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ua("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:d.reqFeatureIndex}].concat(w2("featureIndex",d.featureIndexes)))}].concat(O2("langSys",h.langSysRecords,function(f,p){var g=f.langSys;return[{name:"langSysTag"+p,type:"TAG",value:f.tag},{name:"langSys"+p,type:"TABLE",value:new ua("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:g.reqFeatureIndex}].concat(w2("featureIndex",g.featureIndexes)))}]})))}]}))}function yP(c){ua.call(this,"featureListTable",O2("featureRecord",c,function(a,l){var h=a.feature;return[{name:"featureTag"+l,type:"TAG",value:a.tag},{name:"feature"+l,type:"TABLE",value:new ua("featureTable",[{name:"featureParams",type:"USHORT",value:h.featureParams}].concat(w2("lookupListIndex",h.lookupListIndexes)))}]}))}function _P(c,a){ua.call(this,"lookupListTable",mG("lookup",c,function(l){var h=a[l.lookupType];return Xn.assert(!!h,"Unable to write GSUB lookup type "+l.lookupType+" tables."),new ua("lookupTable",[{name:"lookupType",type:"USHORT",value:l.lookupType},{name:"lookupFlag",type:"USHORT",value:l.lookupFlag}].concat(mG("subtable",l.subtables,h)))}))}gn.CHARSTRING=function(c){if(gP){var a=gP.get(c);if(void 0!==a)return a}for(var l=[],h=c.length,d=0;d<h;d+=1){var f=c[d];l=l.concat(gn[f.type](f.value))}return gP&&gP.set(c,l),l},yi.CHARSTRING=function(c){return gn.CHARSTRING(c).length},gn.OBJECT=function(c){var a=gn[c.type];return Xn.argument(void 0!==a,"No encoding function for type "+c.type),a(c.value)},yi.OBJECT=function(c){var a=yi[c.type];return Xn.argument(void 0!==a,"No sizeOf function for type "+c.type),a(c.value)},gn.TABLE=function(c){for(var a=[],l=c.fields.length,h=[],d=[],f=0;f<l;f+=1){var p=c.fields[f],g=gn[p.type];Xn.argument(void 0!==g,"No encoding function for field type "+p.type+" ("+p.name+")");var m=c[p.name];void 0===m&&(m=p.value);var v=g(m);"TABLE"===p.type?(d.push(a.length),a=a.concat([0,0]),h.push(v)):a=a.concat(v)}for(var y=0;y<h.length;y+=1){var _=d[y],b=a.length;Xn.argument(b<65536,"Table "+c.tableName+" too big."),a[_]=b>>8,a[_+1]=255&b,a=a.concat(h[y])}return a},yi.TABLE=function(c){for(var a=0,l=c.fields.length,h=0;h<l;h+=1){var d=c.fields[h],f=yi[d.type];Xn.argument(void 0!==f,"No sizeOf function for field type "+d.type+" ("+d.name+")");var p=c[d.name];void 0===p&&(p=d.value),a+=f(p),"TABLE"===d.type&&(a+=2)}return a},gn.RECORD=gn.TABLE,yi.RECORD=yi.TABLE,gn.LITERAL=function(c){return c},yi.LITERAL=function(c){return c.length},ua.prototype.encode=function(){return gn.TABLE(this)},ua.prototype.sizeOf=function(){return yi.TABLE(this)},(mP.prototype=Object.create(ua.prototype)).constructor=mP,(vP.prototype=Object.create(ua.prototype)).constructor=vP,(yP.prototype=Object.create(ua.prototype)).constructor=yP,(_P.prototype=Object.create(ua.prototype)).constructor=_P;var bn={Table:ua,Record:ua,Coverage:mP,ScriptList:vP,FeatureList:yP,LookupList:_P,ushortList:w2,tableList:mG,recordList:O2};function bCe(c,a){return c.getUint8(a)}function bP(c,a){return c.getUint16(a,!1)}function vG(c,a){return c.getUint32(a,!1)}function CCe(c,a){return c.getInt16(a,!1)+c.getUint16(a+2,!1)/65535}var aSt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function lt(c,a){this.data=c,this.offset=a,this.relativeOffset=0}lt.prototype.parseByte=function(){var c=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,c},lt.prototype.parseChar=function(){var c=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,c},lt.prototype.parseCard8=lt.prototype.parseByte,lt.prototype.parseUShort=function(){var c=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,c},lt.prototype.parseCard16=lt.prototype.parseUShort,lt.prototype.parseSID=lt.prototype.parseUShort,lt.prototype.parseOffset16=lt.prototype.parseUShort,lt.prototype.parseShort=function(){var c=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,c},lt.prototype.parseF2Dot14=function(){var c=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,c},lt.prototype.parseULong=function(){var c=vG(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,c},lt.prototype.parseOffset32=lt.prototype.parseULong,lt.prototype.parseFixed=function(){var c=CCe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,c},lt.prototype.parseString=function(c){var a=this.data,l=this.offset+this.relativeOffset,h="";this.relativeOffset+=c;for(var d=0;d<c;d++)h+=String.fromCharCode(a.getUint8(l+d));return h},lt.prototype.parseTag=function(){return this.parseString(4)},lt.prototype.parseLongDateTime=function(){var c=vG(this.data,this.offset+this.relativeOffset+4);return c-=2082844800,this.relativeOffset+=8,c},lt.prototype.parseVersion=function(c){var a=bP(this.data,this.offset+this.relativeOffset),l=bP(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===c&&(c=4096),a+l/c/10},lt.prototype.skip=function(c,a){void 0===a&&(a=1),this.relativeOffset+=aSt[c]*a},lt.prototype.parseULongList=function(c){void 0===c&&(c=this.parseULong());for(var a=new Array(c),l=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)a[d]=l.getUint32(h),h+=4;return this.relativeOffset+=4*c,a},lt.prototype.parseOffset16List=lt.prototype.parseUShortList=function(c){void 0===c&&(c=this.parseUShort());for(var a=new Array(c),l=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)a[d]=l.getUint16(h),h+=2;return this.relativeOffset+=2*c,a},lt.prototype.parseShortList=function(c){for(var a=new Array(c),l=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)a[d]=l.getInt16(h),h+=2;return this.relativeOffset+=2*c,a},lt.prototype.parseByteList=function(c){for(var a=new Array(c),l=this.data,h=this.offset+this.relativeOffset,d=0;d<c;d++)a[d]=l.getUint8(h++);return this.relativeOffset+=c,a},lt.prototype.parseList=function(c,a){a||(a=c,c=this.parseUShort());for(var l=new Array(c),h=0;h<c;h++)l[h]=a.call(this);return l},lt.prototype.parseList32=function(c,a){a||(a=c,c=this.parseULong());for(var l=new Array(c),h=0;h<c;h++)l[h]=a.call(this);return l},lt.prototype.parseRecordList=function(c,a){a||(a=c,c=this.parseUShort());for(var l=new Array(c),h=Object.keys(a),d=0;d<c;d++){for(var f={},p=0;p<h.length;p++){var g=h[p];f[g]=a[g].call(this)}l[d]=f}return l},lt.prototype.parseRecordList32=function(c,a){a||(a=c,c=this.parseULong());for(var l=new Array(c),h=Object.keys(a),d=0;d<c;d++){for(var f={},p=0;p<h.length;p++){var g=h[p];f[g]=a[g].call(this)}l[d]=f}return l},lt.prototype.parseStruct=function(c){if("function"==typeof c)return c.call(this);for(var a=Object.keys(c),l={},h=0;h<a.length;h++){var d=a[h];l[d]=c[d].call(this)}return l},lt.prototype.parseValueRecord=function(c){if(void 0===c&&(c=this.parseUShort()),0!==c){var a={};return 1&c&&(a.xPlacement=this.parseShort()),2&c&&(a.yPlacement=this.parseShort()),4&c&&(a.xAdvance=this.parseShort()),8&c&&(a.yAdvance=this.parseShort()),16&c&&(a.xPlaDevice=void 0,this.parseShort()),32&c&&(a.yPlaDevice=void 0,this.parseShort()),64&c&&(a.xAdvDevice=void 0,this.parseShort()),128&c&&(a.yAdvDevice=void 0,this.parseShort()),a}},lt.prototype.parseValueRecordList=function(){for(var c=this.parseUShort(),a=this.parseUShort(),l=new Array(a),h=0;h<a;h++)l[h]=this.parseValueRecord(c);return l},lt.prototype.parsePointer=function(c){var a=this.parseOffset16();if(a>0)return new lt(this.data,this.offset+a).parseStruct(c)},lt.prototype.parsePointer32=function(c){var a=this.parseOffset32();if(a>0)return new lt(this.data,this.offset+a).parseStruct(c)},lt.prototype.parseListOfLists=function(c){for(var a=this.parseOffset16List(),l=a.length,h=this.relativeOffset,d=new Array(l),f=0;f<l;f++){var p=a[f];if(0!==p)if(this.relativeOffset=p,c){for(var g=this.parseOffset16List(),m=new Array(g.length),v=0;v<g.length;v++)this.relativeOffset=p+g[v],m[v]=c.call(this);d[f]=m}else d[f]=this.parseUShortList();else d[f]=void 0}return this.relativeOffset=h,d},lt.prototype.parseCoverage=function(){var c=this.offset+this.relativeOffset,a=this.parseUShort(),l=this.parseUShort();if(1===a)return{format:1,glyphs:this.parseUShortList(l)};if(2===a){for(var h=new Array(l),d=0;d<l;d++)h[d]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:h}}throw new Error("0x"+c.toString(16)+": Coverage format must be 1 or 2.")},lt.prototype.parseClassDef=function(){var c=this.offset+this.relativeOffset,a=this.parseUShort();if(1===a)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===a)return{format:2,ranges:this.parseRecordList({start:lt.uShort,end:lt.uShort,classId:lt.uShort})};throw new Error("0x"+c.toString(16)+": ClassDef format must be 1 or 2.")},lt.list=function(c,a){return function(){return this.parseList(c,a)}},lt.list32=function(c,a){return function(){return this.parseList32(c,a)}},lt.recordList=function(c,a){return function(){return this.parseRecordList(c,a)}},lt.recordList32=function(c,a){return function(){return this.parseRecordList32(c,a)}},lt.pointer=function(c){return function(){return this.parsePointer(c)}},lt.pointer32=function(c){return function(){return this.parsePointer32(c)}},lt.tag=lt.prototype.parseTag,lt.byte=lt.prototype.parseByte,lt.uShort=lt.offset16=lt.prototype.parseUShort,lt.uShortList=lt.prototype.parseUShortList,lt.uLong=lt.offset32=lt.prototype.parseULong,lt.uLongList=lt.prototype.parseULongList,lt.struct=lt.prototype.parseStruct,lt.coverage=lt.prototype.parseCoverage,lt.classDef=lt.prototype.parseClassDef;var SCe={reserved:lt.uShort,reqFeatureIndex:lt.uShort,featureIndexes:lt.uShortList};lt.prototype.parseScriptList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,script:lt.pointer({defaultLangSys:lt.pointer(SCe),langSysRecords:lt.recordList({tag:lt.tag,langSys:lt.pointer(SCe)})})}))||[]},lt.prototype.parseFeatureList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,feature:lt.pointer({featureParams:lt.offset16,lookupListIndexes:lt.uShortList})}))||[]},lt.prototype.parseLookupList=function(c){return this.parsePointer(lt.list(lt.pointer(function(){var a=this.parseUShort();Xn.argument(1<=a&&a<=9,"GPOS/GSUB lookup type "+a+" unknown.");var l=this.parseUShort(),h=16&l;return{lookupType:a,lookupFlag:l,subtables:this.parseList(lt.pointer(c[a])),markFilteringSet:h?this.parseUShort():void 0}})))||[]},lt.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var c=this.parseUShort(),a=this.parseUShort();return Xn.argument(1===c&&a<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:lt.offset32,featureTableSubstitutionOffset:lt.offset32})})||[]};var Rn={getByte:bCe,getCard8:bCe,getUShort:bP,getCard16:bP,getShort:function nSt(c,a){return c.getInt16(a,!1)},getULong:vG,getFixed:CCe,getTag:function iSt(c,a){for(var l="",h=a;h<a+4;h+=1)l+=String.fromCharCode(c.getInt8(h));return l},getOffset:function rSt(c,a,l){for(var h=0,d=0;d<l;d+=1)h<<=8,h+=c.getUint8(a+d);return h},getBytes:function sSt(c,a,l){for(var h=[],d=a;d<l;d+=1)h.push(c.getUint8(d));return h},bytesToString:function oSt(c){for(var a="",l=0;l<c.length;l+=1)a+=String.fromCharCode(c[l]);return a},Parser:lt};function hSt(c,a,l){c.segments.push({end:a,start:a,delta:-(a-l),offset:0,glyphIndex:l})}var xCe_parse=function uSt(c,a){var l={};l.version=Rn.getUShort(c,a),Xn.argument(0===l.version,"cmap table version should be 0."),l.numTables=Rn.getUShort(c,a+2);for(var h=-1,d=l.numTables-1;d>=0;d-=1){var f=Rn.getUShort(c,a+4+8*d),p=Rn.getUShort(c,a+4+8*d+2);if(3===f&&(0===p||1===p||10===p)||0===f&&(0===p||1===p||2===p||3===p||4===p)){h=Rn.getULong(c,a+4+8*d+4);break}}if(-1===h)throw new Error("No valid cmap sub-tables found.");var g=new Rn.Parser(c,a+h);if(l.format=g.parseUShort(),12===l.format)!function lSt(c,a){var l;a.parseUShort(),c.length=a.parseULong(),c.language=a.parseULong(),c.groupCount=l=a.parseULong(),c.glyphIndexMap={};for(var h=0;h<l;h+=1)for(var d=a.parseULong(),f=a.parseULong(),p=a.parseULong(),g=d;g<=f;g+=1)c.glyphIndexMap[g]=p,p++}(l,g);else{if(4!==l.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+l.format+").");!function cSt(c,a,l,h,d){var f;c.length=a.parseUShort(),c.language=a.parseUShort(),c.segCount=f=a.parseUShort()>>1,a.skip("uShort",3),c.glyphIndexMap={};for(var p=new Rn.Parser(l,h+d+14),g=new Rn.Parser(l,h+d+16+2*f),m=new Rn.Parser(l,h+d+16+4*f),v=new Rn.Parser(l,h+d+16+6*f),y=h+d+16+8*f,_=0;_<f-1;_+=1)for(var b=void 0,C=p.parseUShort(),x=g.parseUShort(),w=m.parseShort(),O=v.parseUShort(),D=x;D<=C;D+=1)0!==O?(y=v.offset+v.relativeOffset-2,y+=O,0!==(b=Rn.getUShort(l,y+=2*(D-x)))&&(b=b+w&65535)):b=D+w&65535,c.glyphIndexMap[D]=b}(l,g,c,a,h)}return l},xCe_make=function fSt(c){var l,a=!0;for(l=c.length-1;l>0;l-=1)if(c.get(l).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),a=!1;break}var d=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:a?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:a?12:20}];a||(d=d.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),d=d.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var f=new bn.Table("cmap",d);for(f.segments=[],l=0;l<c.length;l+=1){for(var p=c.get(l),g=0;g<p.unicodes.length;g+=1)hSt(f,p.unicodes[g],l);f.segments=f.segments.sort(function(T,M){return T.start-M.start})}!function dSt(c){c.segments.push({end:65535,start:65535,delta:1,offset:0})}(f);var m=f.segments.length,v=0,y=[],_=[],b=[],C=[],x=[],w=[];for(l=0;l<m;l+=1){var O=f.segments[l];O.end<=65535&&O.start<=65535?(y=y.concat({name:"end_"+l,type:"USHORT",value:O.end}),_=_.concat({name:"start_"+l,type:"USHORT",value:O.start}),b=b.concat({name:"idDelta_"+l,type:"SHORT",value:O.delta}),C=C.concat({name:"idRangeOffset_"+l,type:"USHORT",value:O.offset}),void 0!==O.glyphId&&(x=x.concat({name:"glyph_"+l,type:"USHORT",value:O.glyphId}))):v+=1,!a&&void 0!==O.glyphIndex&&(w=(w=(w=w.concat({name:"cmap12Start_"+l,type:"ULONG",value:O.start})).concat({name:"cmap12End_"+l,type:"ULONG",value:O.end})).concat({name:"cmap12Glyph_"+l,type:"ULONG",value:O.glyphIndex}))}if(f.segCountX2=2*(m-v),f.searchRange=2*Math.pow(2,Math.floor(Math.log(m-v)/Math.log(2))),f.entrySelector=Math.log(f.searchRange/2)/Math.log(2),f.rangeShift=f.segCountX2-f.searchRange,f.fields=f.fields.concat(y),f.fields.push({name:"reservedPad",type:"USHORT",value:0}),f.fields=f.fields.concat(_),f.fields=f.fields.concat(b),f.fields=f.fields.concat(C),f.fields=f.fields.concat(x),f.cmap4Length=14+2*y.length+2+2*_.length+2*b.length+2*C.length+2*x.length,!a){var D=16+4*w.length;f.cmap12Offset=20+f.cmap4Length,f.fields=f.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:D},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:w.length/3}]),f.fields=f.fields.concat(w)}return f},CP=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],pSt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],gSt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],kv=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function wCe(c){this.font=c}function OCe(c){this.cmap=c}function SP(c,a){this.encoding=c,this.charset=a}function yG(c){switch(c.version){case 1:this.names=kv.slice();break;case 2:this.names=new Array(c.numberOfGlyphs);for(var a=0;a<c.numberOfGlyphs;a++)this.names[a]=c.glyphNameIndex[a]<kv.length?kv[c.glyphNameIndex[a]]:c.names[c.glyphNameIndex[a]-kv.length];break;case 2.5:this.names=new Array(c.numberOfGlyphs);for(var l=0;l<c.numberOfGlyphs;l++)this.names[l]=kv[l+c.glyphNameIndex[l]];break;default:this.names=[]}}wCe.prototype.charToGlyphIndex=function(c){var a=c.codePointAt(0),l=this.font.glyphs;if(l)for(var h=0;h<l.length;h+=1)for(var d=l.get(h),f=0;f<d.unicodes.length;f+=1)if(d.unicodes[f]===a)return h;return null},OCe.prototype.charToGlyphIndex=function(c){return this.cmap.glyphIndexMap[c.codePointAt(0)]||0},SP.prototype.charToGlyphIndex=function(c){var a=c.codePointAt(0);return this.charset.indexOf(this.encoding[a])},yG.prototype.nameToGlyphIndex=function(c){return this.names.indexOf(c)},yG.prototype.glyphIndexToName=function(c){return this.names[c]};var Mv_line=function _St(c,a,l,h,d){c.beginPath(),c.moveTo(a,l),c.lineTo(h,d),c.stroke()};function Kc(c){this.bindConstructorValues(c)}function xP(c,a,l){Object.defineProperty(c,a,{get:function(){return c[l]},set:function(h){c[l]=h},enumerable:!0,configurable:!0})}function _G(c,a){if(this.font=c,this.glyphs={},Array.isArray(a))for(var l=0;l<a.length;l++){var h=a[l];h.path.unitsPerEm=c.unitsPerEm,this.glyphs[l]=h}this.length=a&&a.length||0}Kc.prototype.bindConstructorValues=function(c){this.index=c.index||0,this.name=c.name||null,this.unicode=c.unicode||void 0,this.unicodes=c.unicodes||void 0!==c.unicode?[c.unicode]:[],"xMin"in c&&(this.xMin=c.xMin),"yMin"in c&&(this.yMin=c.yMin),"xMax"in c&&(this.xMax=c.xMax),"yMax"in c&&(this.yMax=c.yMax),"advanceWidth"in c&&(this.advanceWidth=c.advanceWidth),Object.defineProperty(this,"path",function bSt(c,a){var l=a||new Mo;return{configurable:!0,get:function(){return"function"==typeof l&&(l=l()),l},set:function(h){l=h}}}(0,c.path))},Kc.prototype.addUnicode=function(c){0===this.unicodes.length&&(this.unicode=c),this.unicodes.push(c)},Kc.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Kc.prototype.getPath=function(c,a,l,h,d){var f,p;c=void 0!==c?c:0,a=void 0!==a?a:0,l=void 0!==l?l:72,h||(h={});var g=h.xScale,m=h.yScale;if(h.hinting&&d&&d.hinting&&(p=this.path&&d.hinting.exec(this,l)),p)f=d.hinting.getCommands(p),c=Math.round(c),a=Math.round(a),g=m=1;else{f=this.path.commands;var v=1/(this.path.unitsPerEm||1e3)*l;void 0===g&&(g=v),void 0===m&&(m=v)}for(var y=new Mo,_=0;_<f.length;_+=1){var b=f[_];"M"===b.type?y.moveTo(c+b.x*g,a+-b.y*m):"L"===b.type?y.lineTo(c+b.x*g,a+-b.y*m):"Q"===b.type?y.quadraticCurveTo(c+b.x1*g,a+-b.y1*m,c+b.x*g,a+-b.y*m):"C"===b.type?y.curveTo(c+b.x1*g,a+-b.y1*m,c+b.x2*g,a+-b.y2*m,c+b.x*g,a+-b.y*m):"Z"===b.type&&y.closePath()}return y},Kc.prototype.getContours=function(){if(void 0===this.points)return[];for(var c=[],a=[],l=0;l<this.points.length;l+=1){var h=this.points[l];a.push(h),h.lastPointOfContour&&(c.push(a),a=[])}return Xn.argument(0===a.length,"There are still points left in the current contour."),c},Kc.prototype.getMetrics=function(){for(var c=this.path.commands,a=[],l=[],h=0;h<c.length;h+=1){var d=c[h];"Z"!==d.type&&(a.push(d.x),l.push(d.y)),("Q"===d.type||"C"===d.type)&&(a.push(d.x1),l.push(d.y1)),"C"===d.type&&(a.push(d.x2),l.push(d.y2))}var f={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,l),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,l),leftSideBearing:this.leftSideBearing};return isFinite(f.xMin)||(f.xMin=0),isFinite(f.xMax)||(f.xMax=this.advanceWidth),isFinite(f.yMin)||(f.yMin=0),isFinite(f.yMax)||(f.yMax=0),f.rightSideBearing=this.advanceWidth-f.leftSideBearing-(f.xMax-f.xMin),f},Kc.prototype.draw=function(c,a,l,h,d){this.getPath(a,l,h,d).draw(c)},Kc.prototype.drawPoints=function(c,a,l,h){function d(_,b,C,x){c.beginPath();for(var w=0;w<_.length;w+=1)c.moveTo(b+_[w].x*x,C+_[w].y*x),c.arc(b+_[w].x*x,C+_[w].y*x,2,0,2*Math.PI,!1);c.closePath(),c.fill()}a=void 0!==a?a:0,l=void 0!==l?l:0;for(var f=1/this.path.unitsPerEm*(h=void 0!==h?h:24),p=[],g=[],m=this.path,v=0;v<m.commands.length;v+=1){var y=m.commands[v];void 0!==y.x&&p.push({x:y.x,y:-y.y}),void 0!==y.x1&&g.push({x:y.x1,y:-y.y1}),void 0!==y.x2&&g.push({x:y.x2,y:-y.y2})}c.fillStyle="blue",d(p,a,l,f),c.fillStyle="red",d(g,a,l,f)},Kc.prototype.drawMetrics=function(c,a,l,h){var d;a=void 0!==a?a:0,l=void 0!==l?l:0,d=1/this.path.unitsPerEm*(h=void 0!==h?h:24),c.lineWidth=1,c.strokeStyle="black",Mv_line(c,a,-1e4,a,1e4),Mv_line(c,-1e4,l,1e4,l);var f=this.xMin||0,p=this.yMin||0,g=this.xMax||0,m=this.yMax||0,v=this.advanceWidth||0;c.strokeStyle="blue",Mv_line(c,a+f*d,-1e4,a+f*d,1e4),Mv_line(c,a+g*d,-1e4,a+g*d,1e4),Mv_line(c,-1e4,l+-p*d,1e4,l+-p*d),Mv_line(c,-1e4,l+-m*d,1e4,l+-m*d),c.strokeStyle="green",Mv_line(c,a+v*d,-1e4,a+v*d,1e4)},_G.prototype.get=function(c){if(void 0===this.glyphs[c]){this.font._push(c),"function"==typeof this.glyphs[c]&&(this.glyphs[c]=this.glyphs[c]());var a=this.glyphs[c],l=this.font._IndexToUnicodeMap[c];if(l)for(var h=0;h<l.unicodes.length;h++)a.addUnicode(l.unicodes[h]);this.font.cffEncoding?a.name=this.font.isCIDFont?"gid"+c:this.font.cffEncoding.charset[c]:this.font.glyphNames.names&&(a.name=this.font.glyphNames.glyphIndexToName(c)),this.glyphs[c].advanceWidth=this.font._hmtxTableData[c].advanceWidth,this.glyphs[c].leftSideBearing=this.font._hmtxTableData[c].leftSideBearing}else"function"==typeof this.glyphs[c]&&(this.glyphs[c]=this.glyphs[c]());return this.glyphs[c]},_G.prototype.push=function(c,a){this.glyphs[c]=a,this.length++};var rf={GlyphSet:_G,glyphLoader:function CSt(c,a){return new Kc({index:a,font:c})},ttfGlyphLoader:function SSt(c,a,l,h,d,f){return function(){var p=new Kc({index:a,font:c});return p.path=function(){l(p,h,d);var g=f(c.glyphs,p);return g.unitsPerEm=c.unitsPerEm,g},xP(p,"xMin","_xMin"),xP(p,"xMax","_xMax"),xP(p,"yMin","_yMin"),xP(p,"yMax","_yMax"),p}},cffGlyphLoader:function xSt(c,a,l,h){return function(){var d=new Kc({index:a,font:c});return d.path=function(){var f=l(c,d,h);return f.unitsPerEm=c.unitsPerEm,f},d}}};function DCe(c,a){if(c===a)return!0;if(Array.isArray(c)&&Array.isArray(a)){if(c.length!==a.length)return!1;for(var l=0;l<c.length;l+=1)if(!DCe(c[l],a[l]))return!1;return!0}return!1}function bG(c){return c.length<1240?107:c.length<33900?1131:32768}function sm(c,a,l){var p,g,h=[],d=[],f=Rn.getCard16(c,a);if(0!==f){var m=Rn.getByte(c,a+2);p=a+(f+1)*m+2;for(var v=a+3,y=0;y<f+1;y+=1)h.push(Rn.getOffset(c,v,m)),v+=m;g=p+h[f]}else g=a+2;for(var _=0;_<h.length-1;_+=1){var b=Rn.getBytes(c,p+h[_],p+h[_+1]);l&&(b=l(b)),d.push(b)}return{objects:d,startOffset:a,endOffset:g}}function TSt(c,a){if(28===a)return c.parseByte()<<8|c.parseByte();if(29===a)return c.parseByte()<<24|c.parseByte()<<16|c.parseByte()<<8|c.parseByte();if(30===a)return function DSt(c){for(var a="",h=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var d=c.parseByte(),f=d>>4,p=15&d;if(15===f||(a+=h[f],15===p))break;a+=h[p]}return parseFloat(a)}(c);if(a>=32&&a<=246)return a-139;if(a>=247&&a<=250)return 256*(a-247)+c.parseByte()+108;if(a>=251&&a<=254)return 256*-(a-251)-c.parseByte()-108;throw new Error("Invalid b0 "+a)}function TCe(c,a,l){var h=new Rn.Parser(c,a=void 0!==a?a:0),d=[],f=[];for(l=void 0!==l?l:c.length;h.relativeOffset<l;){var p=h.parseByte();p<=21?(12===p&&(p=1200+h.parseByte()),d.push([p,f]),f=[]):f.push(TSt(h,p))}return function kSt(c){for(var a={},l=0;l<c.length;l+=1){var f,h=c[l][0],d=c[l][1];if(f=1===d.length?d[0]:d,a.hasOwnProperty(h)&&!isNaN(a[h]))throw new Error("Object "+a+" already has key "+h);a[h]=f}return a}(d)}function D2(c,a){return a<=390?CP[a]:c[a-391]}function kCe(c,a,l){for(var d,h={},f=0;f<a.length;f+=1){var p=a[f];if(Array.isArray(p.type)){var g=[];g.length=p.type.length;for(var m=0;m<p.type.length;m++)void 0===(d=void 0!==c[p.op]?c[p.op][m]:void 0)&&(d=void 0!==p.value&&void 0!==p.value[m]?p.value[m]:null),"SID"===p.type[m]&&(d=D2(l,d)),g[m]=d;h[p.name]=g}else void 0===(d=c[p.op])&&(d=void 0!==p.value?p.value:null),"SID"===p.type&&(d=D2(l,d)),h[p.name]=d}return h}var MCe=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],ECe=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function ESt(c,a){return kCe(TCe(c,0,c.byteLength),MCe,a)}function ACe(c,a,l,h){return kCe(TCe(c,a,l),ECe,h)}function ICe(c,a,l,h){for(var d=[],f=0;f<l.length;f+=1){var g=ESt(new DataView(new Uint8Array(l[f]).buffer),h);g._subrs=[],g._subrsBias=0,g._defaultWidthX=0,g._nominalWidthX=0;var m=g.private[0],v=g.private[1];if(0!==m&&0!==v){var y=ACe(c,v+a,m,h);if(g._defaultWidthX=y.defaultWidthX,g._nominalWidthX=y.nominalWidthX,0!==y.subrs){var b=sm(c,v+y.subrs+a);g._subrs=b.objects,g._subrsBias=bG(g._subrs)}g._privateDict=y}d.push(g)}return d}function PCe(c,a,l){var h,d,f,p,x,w,O,D,g=new Mo,m=[],v=0,y=!1,_=!1,b=0,C=0;if(c.isCIDFont){var M=c.tables.cff.topDict._fdArray[c.tables.cff.topDict._fdSelect[a.index]];x=M._subrs,w=M._subrsBias,O=M._defaultWidthX,D=M._nominalWidthX}else x=c.tables.cff.topDict._subrs,w=c.tables.cff.topDict._subrsBias,O=c.tables.cff.topDict._defaultWidthX,D=c.tables.cff.topDict._nominalWidthX;var k=O;function E(I,U){_&&g.closePath(),g.moveTo(I,U),_=!0}function P(){m.length%2!=0&&!y&&(k=m.shift()+D),v+=m.length>>1,m.length=0,y=!0}return function V(I){for(var U,$,H,J,ee,B,G,W,j,Q,X,Y,ne=0;ne<I.length;){var re=I[ne];switch(ne+=1,re){case 1:case 3:case 18:case 23:P();break;case 4:m.length>1&&!y&&(k=m.shift()+D,y=!0),C+=m.pop(),E(b,C);break;case 5:for(;m.length>0;)b+=m.shift(),C+=m.shift(),g.lineTo(b,C);break;case 6:for(;m.length>0&&(b+=m.shift(),g.lineTo(b,C),0!==m.length);)C+=m.shift(),g.lineTo(b,C);break;case 7:for(;m.length>0&&(C+=m.shift(),g.lineTo(b,C),0!==m.length);)b+=m.shift(),g.lineTo(b,C);break;case 8:for(;m.length>0;)h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+m.shift(),g.curveTo(h,d,f,p,b,C);break;case 10:ee=m.pop()+w,(B=x[ee])&&V(B);break;case 11:return;case 12:switch(re=I[ne],ne+=1,re){case 35:h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),G=f+m.shift(),W=p+m.shift(),j=G+m.shift(),Q=W+m.shift(),X=j+m.shift(),Y=Q+m.shift(),b=X+m.shift(),C=Y+m.shift(),m.shift(),g.curveTo(h,d,f,p,G,W),g.curveTo(j,Q,X,Y,b,C);break;case 34:h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),G=f+m.shift(),W=p,j=G+m.shift(),Q=p,X=j+m.shift(),Y=C,b=X+m.shift(),g.curveTo(h,d,f,p,G,W),g.curveTo(j,Q,X,Y,b,C);break;case 36:h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),G=f+m.shift(),W=p,j=G+m.shift(),Q=p,X=j+m.shift(),Y=Q+m.shift(),b=X+m.shift(),g.curveTo(h,d,f,p,G,W),g.curveTo(j,Q,X,Y,b,C);break;case 37:h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),G=f+m.shift(),W=p+m.shift(),j=G+m.shift(),Q=W+m.shift(),X=j+m.shift(),Y=Q+m.shift(),Math.abs(X-b)>Math.abs(Y-C)?b=X+m.shift():C=Y+m.shift(),g.curveTo(h,d,f,p,G,W),g.curveTo(j,Q,X,Y,b,C);break;default:console.log("Glyph "+a.index+": unknown operator 1200"+re),m.length=0}break;case 14:m.length>0&&!y&&(k=m.shift()+D,y=!0),_&&(g.closePath(),_=!1);break;case 19:case 20:P(),ne+=v+7>>3;break;case 21:m.length>2&&!y&&(k=m.shift()+D,y=!0),C+=m.pop(),E(b+=m.pop(),C);break;case 22:m.length>1&&!y&&(k=m.shift()+D,y=!0),E(b+=m.pop(),C);break;case 24:for(;m.length>2;)h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+m.shift(),g.curveTo(h,d,f,p,b,C);b+=m.shift(),C+=m.shift(),g.lineTo(b,C);break;case 25:for(;m.length>6;)b+=m.shift(),C+=m.shift(),g.lineTo(b,C);h=b+m.shift(),d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+m.shift(),g.curveTo(h,d,f,p,b,C);break;case 26:for(m.length%2&&(b+=m.shift());m.length>0;)h=b,d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f,C=p+m.shift(),g.curveTo(h,d,f,p,b,C);break;case 27:for(m.length%2&&(C+=m.shift());m.length>0;)h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),g.curveTo(h,d,f,p,b,C=p);break;case 28:m.push(((U=I[ne])<<24|($=I[ne+1])<<16)>>16),ne+=2;break;case 29:ee=m.pop()+c.gsubrsBias,(B=c.gsubrs[ee])&&V(B);break;case 30:for(;m.length>0&&(h=b,d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C),0!==m.length);)h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),C=p+m.shift(),b=f+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C);break;case 31:for(;m.length>0&&(h=b+m.shift(),d=C,f=h+m.shift(),p=d+m.shift(),C=p+m.shift(),b=f+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C),0!==m.length);)h=b,d=C+m.shift(),f=h+m.shift(),p=d+m.shift(),b=f+m.shift(),C=p+(1===m.length?m.shift():0),g.curveTo(h,d,f,p,b,C);break;default:re<32?console.log("Glyph "+a.index+": unknown operator "+re):re<247?m.push(re-139):re<251?(U=I[ne],ne+=1,m.push(256*(re-247)+U+108)):re<255?(U=I[ne],ne+=1,m.push(256*-(re-251)-U-108)):(U=I[ne],$=I[ne+1],H=I[ne+2],J=I[ne+3],ne+=4,m.push((U<<24|$<<16|H<<8|J)/65536))}}}(l),a.advanceWidth=k,g}function RCe(c,a){var l,h=CP.indexOf(c);return h>=0&&(l=h),(h=a.indexOf(c))>=0?l=h+CP.length:(l=CP.length+a.length,a.push(c)),l}function FCe(c,a,l){for(var h={},d=0;d<c.length;d+=1){var f=c[d],p=a[f.name];void 0!==p&&!DCe(p,f.value)&&("SID"===f.type&&(p=RCe(p,l)),h[f.op]={name:f.name,type:f.type,value:p})}return h}function LCe(c,a){var l=new bn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return l.dict=FCe(MCe,c,a),l}function NCe(c){var a=new bn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return a.topDicts=[{name:"topDict_0",type:"TABLE",value:c}],a}function USt(c){var a=[],l=c.path;a.push({name:"width",type:"NUMBER",value:c.advanceWidth});for(var h=0,d=0,f=0;f<l.commands.length;f+=1){var p=void 0,g=void 0,m=l.commands[f];if("Q"===m.type){var v=.3333333333333333,y=2/3;m={type:"C",x:m.x,y:m.y,x1:Math.round(v*h+y*m.x1),y1:Math.round(v*d+y*m.y1),x2:Math.round(v*m.x+y*m.x1),y2:Math.round(v*m.y+y*m.y1)}}if("M"===m.type)p=Math.round(m.x-h),g=Math.round(m.y-d),a.push({name:"dx",type:"NUMBER",value:p}),a.push({name:"dy",type:"NUMBER",value:g}),a.push({name:"rmoveto",type:"OP",value:21}),h=Math.round(m.x),d=Math.round(m.y);else if("L"===m.type)p=Math.round(m.x-h),g=Math.round(m.y-d),a.push({name:"dx",type:"NUMBER",value:p}),a.push({name:"dy",type:"NUMBER",value:g}),a.push({name:"rlineto",type:"OP",value:5}),h=Math.round(m.x),d=Math.round(m.y);else if("C"===m.type){var _=Math.round(m.x1-h),b=Math.round(m.y1-d),C=Math.round(m.x2-m.x1),x=Math.round(m.y2-m.y1);p=Math.round(m.x-m.x2),g=Math.round(m.y-m.y2),a.push({name:"dx1",type:"NUMBER",value:_}),a.push({name:"dy1",type:"NUMBER",value:b}),a.push({name:"dx2",type:"NUMBER",value:C}),a.push({name:"dy2",type:"NUMBER",value:x}),a.push({name:"dx",type:"NUMBER",value:p}),a.push({name:"dy",type:"NUMBER",value:g}),a.push({name:"rrcurveto",type:"OP",value:8}),h=Math.round(m.x),d=Math.round(m.y)}}return a.push({name:"endchar",type:"OP",value:14}),a}var BCe_parse=function RSt(c,a,l,h){l.tables.cff={};var d=function MSt(c,a){var l={};return l.formatMajor=Rn.getCard8(c,a),l.formatMinor=Rn.getCard8(c,a+1),l.size=Rn.getCard8(c,a+2),l.offsetSize=Rn.getCard8(c,a+3),l.startOffset=a,l.endOffset=a+4,l}(c,a),f=sm(c,d.endOffset,Rn.bytesToString),p=sm(c,f.endOffset),g=sm(c,p.endOffset,Rn.bytesToString),m=sm(c,g.endOffset);l.gsubrs=m.objects,l.gsubrsBias=bG(l.gsubrs);var v=ICe(c,a,p.objects,g.objects);if(1!==v.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+v.length);var y=v[0];if(l.tables.cff.topDict=y,y._privateDict&&(l.defaultWidthX=y._privateDict.defaultWidthX,l.nominalWidthX=y._privateDict.nominalWidthX),void 0!==y.ros[0]&&void 0!==y.ros[1]&&(l.isCIDFont=!0),l.isCIDFont){var _=y.fdArray,b=y.fdSelect;if(0===_||0===b)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var C=sm(c,_+=a),x=ICe(c,a,C.objects,g.objects);y._fdArray=x,y._fdSelect=function PSt(c,a,l,h){var f,d=[],p=new Rn.Parser(c,a),g=p.parseCard8();if(0===g)for(var m=0;m<l;m++){if((f=p.parseCard8())>=h)throw new Error("CFF table CID Font FDSelect has bad FD index value "+f+" (FD count "+h+")");d.push(f)}else{if(3!==g)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+g);var v=p.parseCard16(),y=p.parseCard16();if(0!==y)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+y);for(var _,b=0;b<v;b++){if(f=p.parseCard8(),_=p.parseCard16(),f>=h)throw new Error("CFF table CID Font FDSelect has bad FD index value "+f+" (FD count "+h+")");if(_>l)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+_);for(;y<_;y++)d.push(f);y=_}if(_!==l)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+_)}return d}(c,b+=a,l.numGlyphs,x.length)}var M,w=a+y.private[1],O=ACe(c,w,y.private[0],g.objects);if(l.defaultWidthX=O.defaultWidthX,l.nominalWidthX=O.nominalWidthX,0!==O.subrs){var T=sm(c,w+O.subrs);l.subrs=T.objects,l.subrsBias=bG(l.subrs)}else l.subrs=[],l.subrsBias=0;h.lowMemory?(M=function wSt(c,a){var d,f,l=[],h=Rn.getCard16(c,a);if(0!==h){var p=Rn.getByte(c,a+2);d=a+(h+1)*p+2;for(var g=a+3,m=0;m<h+1;m+=1)l.push(Rn.getOffset(c,g,p)),g+=p;f=d+l[h]}else f=a+2;return{offsets:l,startOffset:a,endOffset:f}}(c,a+y.charStrings),l.nGlyphs=M.offsets.length):(M=sm(c,a+y.charStrings),l.nGlyphs=M.objects.length);var k=function ASt(c,a,l,h){var d,f,p=new Rn.Parser(c,a);l-=1;var g=[".notdef"],m=p.parseCard8();if(0===m)for(var v=0;v<l;v+=1)d=p.parseSID(),g.push(D2(h,d));else if(1===m)for(;g.length<=l;){d=p.parseSID(),f=p.parseCard8();for(var y=0;y<=f;y+=1)g.push(D2(h,d)),d+=1}else{if(2!==m)throw new Error("Unknown charset format "+m);for(;g.length<=l;){d=p.parseSID(),f=p.parseCard16();for(var _=0;_<=f;_+=1)g.push(D2(h,d)),d+=1}}return g}(c,a+y.charset,l.nGlyphs,g.objects);if(l.cffEncoding=0===y.encoding?new SP(pSt,k):1===y.encoding?new SP(gSt,k):function ISt(c,a,l){var h,d={},f=new Rn.Parser(c,a),p=f.parseCard8();if(0===p)for(var g=f.parseCard8(),m=0;m<g;m+=1)d[h=f.parseCard8()]=m;else{if(1!==p)throw new Error("Unknown encoding format "+p);var v=f.parseCard8();h=1;for(var y=0;y<v;y+=1)for(var _=f.parseCard8(),b=f.parseCard8(),C=_;C<=_+b;C+=1)d[C]=h,h+=1}return new SP(d,l)}(c,a+y.encoding,k),l.encoding=l.encoding||l.cffEncoding,l.glyphs=new rf.GlyphSet(l),h.lowMemory)l._push=function(V){var I=function OSt(c,a,l,h,d){var f=Rn.getCard16(l,h),p=0;0!==f&&(p=h+(f+1)*Rn.getByte(l,h+2)+2);var m=Rn.getBytes(l,p+a[c],p+a[c+1]);return d&&(m=d(m)),m}(V,M.offsets,c,a+y.charStrings);l.glyphs.push(V,rf.cffGlyphLoader(l,V,PCe,I))};else for(var E=0;E<l.nGlyphs;E+=1)l.glyphs.push(E,rf.cffGlyphLoader(l,E,PCe,M.objects[E]))},BCe_make=function $St(c,a){for(var g,l=new bn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),h=1/a.unitsPerEm,d={version:a.version,fullName:a.fullName,familyName:a.familyName,weight:a.weightName,fontBBox:a.fontBBox||[0,0,0,0],fontMatrix:[h,0,0,h,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},p=[],m=1;m<c.length;m+=1)g=c.get(m),p.push(g.name);var v=[];l.header=function FSt(){return new bn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}(),l.nameIndex=function LSt(c){var a=new bn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);a.names=[];for(var l=0;l<c.length;l+=1)a.names.push({name:"name_"+l,type:"NAME",value:c[l]});return a}([a.postScriptName]);var y=LCe(d,v);l.topDictIndex=NCe(y),l.globalSubrIndex=function BSt(){return new bn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}(),l.charsets=function VSt(c,a){for(var l=new bn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),h=0;h<c.length;h+=1){var f=RCe(c[h],a);l.fields.push({name:"glyph_"+h,type:"SID",value:f})}return l}(p,v),l.charStringsIndex=function zSt(c){for(var a=new bn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),l=0;l<c.length;l+=1){var h=c.get(l),d=USt(h);a.charStrings.push({name:h.name,type:"CHARSTRING",value:d})}return a}(c),l.privateDict=function HSt(c,a){var l=new bn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return l.dict=FCe(ECe,c,a),l}({},v),l.stringIndex=function NSt(c){var a=new bn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);a.strings=[];for(var l=0;l<c.length;l+=1)a.strings.push({name:"string_"+l,type:"STRING",value:c[l]});return a}(v);var _=l.header.sizeOf()+l.nameIndex.sizeOf()+l.topDictIndex.sizeOf()+l.stringIndex.sizeOf()+l.globalSubrIndex.sizeOf();return d.charset=_,d.encoding=0,d.charStrings=d.charset+l.charsets.sizeOf(),d.private[1]=d.charStrings+l.charStringsIndex.sizeOf(),y=LCe(d,v),l.topDictIndex=NCe(y),l},VCe_parse=function WSt(c,a){var l={},h=new Rn.Parser(c,a);return l.version=h.parseVersion(),l.fontRevision=Math.round(1e3*h.parseFixed())/1e3,l.checkSumAdjustment=h.parseULong(),l.magicNumber=h.parseULong(),Xn.argument(1594834165===l.magicNumber,"Font header has wrong magic number."),l.flags=h.parseUShort(),l.unitsPerEm=h.parseUShort(),l.created=h.parseLongDateTime(),l.modified=h.parseLongDateTime(),l.xMin=h.parseShort(),l.yMin=h.parseShort(),l.xMax=h.parseShort(),l.yMax=h.parseShort(),l.macStyle=h.parseUShort(),l.lowestRecPPEM=h.parseUShort(),l.fontDirectionHint=h.parseShort(),l.indexToLocFormat=h.parseShort(),l.glyphDataFormat=h.parseShort(),l},VCe_make=function GSt(c){var a=Math.round((new Date).getTime()/1e3)+2082844800,l=a;return c.createdTimestamp&&(l=c.createdTimestamp+2082844800),new bn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:l},{name:"modified",type:"LONGDATETIME",value:a},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],c)},UCe_parse=function QSt(c,a){var l={},h=new Rn.Parser(c,a);return l.version=h.parseVersion(),l.ascender=h.parseShort(),l.descender=h.parseShort(),l.lineGap=h.parseShort(),l.advanceWidthMax=h.parseUShort(),l.minLeftSideBearing=h.parseShort(),l.minRightSideBearing=h.parseShort(),l.xMaxExtent=h.parseShort(),l.caretSlopeRise=h.parseShort(),l.caretSlopeRun=h.parseShort(),l.caretOffset=h.parseShort(),h.relativeOffset+=8,l.metricDataFormat=h.parseShort(),l.numberOfHMetrics=h.parseUShort(),l},UCe_make=function jSt(c){return new bn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],c)},zCe_parse=function XSt(c,a,l,h,d,f,p){p.lowMemory?function qSt(c,a,l,h,d){c._hmtxTableData={};for(var f,p,g=new Rn.Parser(a,l),m=0;m<d;m+=1)m<h&&(f=g.parseUShort(),p=g.parseShort()),c._hmtxTableData[m]={advanceWidth:f,leftSideBearing:p}}(c,a,l,h,d):function ZSt(c,a,l,h,d){for(var f,p,g=new Rn.Parser(c,a),m=0;m<h;m+=1){m<l&&(f=g.parseUShort(),p=g.parseShort());var v=d.get(m);v.advanceWidth=f,v.leftSideBearing=p}}(a,l,h,d,f)},zCe_make=function YSt(c){for(var a=new bn.Table("hmtx",[]),l=0;l<c.length;l+=1){var h=c.get(l),f=h.leftSideBearing||0;a.fields.push({name:"advanceWidth_"+l,type:"USHORT",value:h.advanceWidth||0}),a.fields.push({name:"leftSideBearing_"+l,type:"SHORT",value:f})}return a},HCe_make=function KSt(c){for(var a=new bn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:c.length}]),l="",h=12+4*c.length,d=0;d<c.length;++d){var f=l.indexOf(c[d]);f<0&&(f=l.length,l+=c[d]),a.fields.push({name:"offset "+d,type:"USHORT",value:h+f}),a.fields.push({name:"length "+d,type:"USHORT",value:c[d].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:l}),a},HCe_parse=function JSt(c,a){var l=new Rn.Parser(c,a),h=l.parseULong();Xn.argument(1===h,"Unsupported ltag table version."),l.skip("uLong",1);for(var d=l.parseULong(),f=[],p=0;p<d;p++){for(var g="",m=a+l.parseUShort(),v=l.parseUShort(),y=m;y<m+v;++y)g+=String.fromCharCode(c.getInt8(y));f.push(g)}return f},$Ce_parse=function ext(c,a){var l={},h=new Rn.Parser(c,a);return l.version=h.parseVersion(),l.numGlyphs=h.parseUShort(),1===l.version&&(l.maxPoints=h.parseUShort(),l.maxContours=h.parseUShort(),l.maxCompositePoints=h.parseUShort(),l.maxCompositeContours=h.parseUShort(),l.maxZones=h.parseUShort(),l.maxTwilightPoints=h.parseUShort(),l.maxStorage=h.parseUShort(),l.maxFunctionDefs=h.parseUShort(),l.maxInstructionDefs=h.parseUShort(),l.maxStackElements=h.parseUShort(),l.maxSizeOfInstructions=h.parseUShort(),l.maxComponentElements=h.parseUShort(),l.maxComponentDepth=h.parseUShort()),l},$Ce_make=function txt(c){return new bn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:c}])},WCe=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],GCe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},nxt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},QCe={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function ixt(c,a,l){switch(c){case 0:if(65535===a)return"und";if(l)return l[a];break;case 1:return GCe[a];case 3:return QCe[a]}}var CG="utf-16",rxt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},sxt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function jCe(c,a,l){switch(c){case 0:return CG;case 1:return sxt[l]||rxt[a];case 3:if(1===a||10===a)return CG}}function SG(c){var a={};for(var l in c)a[c[l]]=parseInt(l);return a}function ZCe(c,a,l,h,d,f){return new bn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:c},{name:"encodingID",type:"USHORT",value:a},{name:"languageID",type:"USHORT",value:l},{name:"nameID",type:"USHORT",value:h},{name:"length",type:"USHORT",value:d},{name:"offset",type:"USHORT",value:f}])}function qCe(c,a){var l=function axt(c,a){var l=c.length,h=a.length-l+1;e:for(var d=0;d<h;d++)for(;d<h;d++){for(var f=0;f<l;f++)if(a[d+f]!==c[f])continue e;return d}return-1}(c,a);if(l<0){l=a.length;for(var h=0,d=c.length;h<d;++h)a.push(c[h])}return l}var XCe_parse=function oxt(c,a,l){for(var h={},d=new Rn.Parser(c,a),f=d.parseUShort(),p=d.parseUShort(),g=d.offset+d.parseUShort(),m=0;m<p;m++){var v=d.parseUShort(),y=d.parseUShort(),_=d.parseUShort(),b=d.parseUShort(),C=WCe[b]||b,x=d.parseUShort(),w=d.parseUShort(),O=ixt(v,_,l),D=jCe(v,y,_);if(void 0!==D&&void 0!==O){var T;if(T=D===CG?nC.UTF16(c,g+w,x):nC.MACSTRING(c,g+w,x,D)){var M=h[C];void 0===M&&(M=h[C]={}),M[O]=T}}}return 1===f&&d.parseUShort(),h},XCe_make=function lxt(c,a){var l,h=[],d={},f=SG(WCe);for(var p in c){var g=f[p];if(void 0===g&&(g=p),l=parseInt(g),isNaN(l))throw new Error('Name table entry "'+p+'" does not exist, see nameTableNames for complete list.');d[l]=c[p],h.push(l)}for(var m=SG(GCe),v=SG(QCe),y=[],_=[],b=0;b<h.length;b++){var C=d[l=h[b]];for(var x in C){var w=C[x],O=1,D=m[x],T=nxt[D],M=jCe(O,T,D),k=gn.MACSTRING(w,M);void 0===k&&(O=0,(D=a.indexOf(x))<0&&(D=a.length,a.push(x)),T=4,k=gn.UTF16(w));var E=qCe(k,_);y.push(ZCe(O,T,D,l,k.length,E));var P=v[x];if(void 0!==P){var V=gn.UTF16(w),I=qCe(V,_);y.push(ZCe(3,1,P,l,V.length,I))}}}y.sort(function(H,J){return H.platformID-J.platformID||H.encodingID-J.encodingID||H.languageID-J.languageID||H.nameID-J.nameID});for(var U=new bn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:y.length},{name:"stringOffset",type:"USHORT",value:6+12*y.length}]),$=0;$<y.length;$++)U.fields.push({name:"record_"+$,type:"RECORD",value:y[$]});return U.fields.push({name:"strings",type:"LITERAL",value:_}),U},xG=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],wG_parse=function uxt(c,a){var l={},h=new Rn.Parser(c,a);l.version=h.parseUShort(),l.xAvgCharWidth=h.parseShort(),l.usWeightClass=h.parseUShort(),l.usWidthClass=h.parseUShort(),l.fsType=h.parseUShort(),l.ySubscriptXSize=h.parseShort(),l.ySubscriptYSize=h.parseShort(),l.ySubscriptXOffset=h.parseShort(),l.ySubscriptYOffset=h.parseShort(),l.ySuperscriptXSize=h.parseShort(),l.ySuperscriptYSize=h.parseShort(),l.ySuperscriptXOffset=h.parseShort(),l.ySuperscriptYOffset=h.parseShort(),l.yStrikeoutSize=h.parseShort(),l.yStrikeoutPosition=h.parseShort(),l.sFamilyClass=h.parseShort(),l.panose=[];for(var d=0;d<10;d++)l.panose[d]=h.parseByte();return l.ulUnicodeRange1=h.parseULong(),l.ulUnicodeRange2=h.parseULong(),l.ulUnicodeRange3=h.parseULong(),l.ulUnicodeRange4=h.parseULong(),l.achVendID=String.fromCharCode(h.parseByte(),h.parseByte(),h.parseByte(),h.parseByte()),l.fsSelection=h.parseUShort(),l.usFirstCharIndex=h.parseUShort(),l.usLastCharIndex=h.parseUShort(),l.sTypoAscender=h.parseShort(),l.sTypoDescender=h.parseShort(),l.sTypoLineGap=h.parseShort(),l.usWinAscent=h.parseUShort(),l.usWinDescent=h.parseUShort(),l.version>=1&&(l.ulCodePageRange1=h.parseULong(),l.ulCodePageRange2=h.parseULong()),l.version>=2&&(l.sxHeight=h.parseShort(),l.sCapHeight=h.parseShort(),l.usDefaultChar=h.parseUShort(),l.usBreakChar=h.parseUShort(),l.usMaxContent=h.parseUShort()),l},wG_make=function hxt(c){return new bn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],c)},wG_getUnicodeRange=function cxt(c){for(var a=0;a<xG.length;a+=1){var l=xG[a];if(c>=l.begin&&c<l.end)return a}return-1},YCe_parse=function dxt(c,a){var l={},h=new Rn.Parser(c,a);switch(l.version=h.parseVersion(),l.italicAngle=h.parseFixed(),l.underlinePosition=h.parseShort(),l.underlineThickness=h.parseShort(),l.isFixedPitch=h.parseULong(),l.minMemType42=h.parseULong(),l.maxMemType42=h.parseULong(),l.minMemType1=h.parseULong(),l.maxMemType1=h.parseULong(),l.version){case 1:l.names=kv.slice();break;case 2:l.numberOfGlyphs=h.parseUShort(),l.glyphNameIndex=new Array(l.numberOfGlyphs);for(var d=0;d<l.numberOfGlyphs;d++)l.glyphNameIndex[d]=h.parseUShort();l.names=[];for(var f=0;f<l.numberOfGlyphs;f++)if(l.glyphNameIndex[f]>=kv.length){var p=h.parseChar();l.names.push(h.parseString(p))}break;case 2.5:l.numberOfGlyphs=h.parseUShort(),l.offset=new Array(l.numberOfGlyphs);for(var g=0;g<l.numberOfGlyphs;g++)l.offset[g]=h.parseChar()}return l},YCe_make=function fxt(){return new bn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},zh=new Array(9);zh[1]=function(){var a=this.offset+this.relativeOffset,l=this.parseUShort();return 1===l?{substFormat:1,coverage:this.parsePointer(lt.coverage),deltaGlyphId:this.parseUShort()}:2===l?{substFormat:2,coverage:this.parsePointer(lt.coverage),substitute:this.parseOffset16List()}:void Xn.assert(!1,"0x"+a.toString(16)+": lookup type 1 format must be 1 or 2.")},zh[2]=function(){var a=this.parseUShort();return Xn.argument(1===a,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(lt.coverage),sequences:this.parseListOfLists()}},zh[3]=function(){var a=this.parseUShort();return Xn.argument(1===a,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(lt.coverage),alternateSets:this.parseListOfLists()}},zh[4]=function(){var a=this.parseUShort();return Xn.argument(1===a,"GSUB ligature table identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(lt.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var iC={sequenceIndex:lt.uShort,lookupListIndex:lt.uShort};zh[5]=function(){var a=this.offset+this.relativeOffset,l=this.parseUShort();if(1===l)return{substFormat:l,coverage:this.parsePointer(lt.coverage),ruleSets:this.parseListOfLists(function(){var f=this.parseUShort(),p=this.parseUShort();return{input:this.parseUShortList(f-1),lookupRecords:this.parseRecordList(p,iC)}})};if(2===l)return{substFormat:l,coverage:this.parsePointer(lt.coverage),classDef:this.parsePointer(lt.classDef),classSets:this.parseListOfLists(function(){var f=this.parseUShort(),p=this.parseUShort();return{classes:this.parseUShortList(f-1),lookupRecords:this.parseRecordList(p,iC)}})};if(3===l){var h=this.parseUShort(),d=this.parseUShort();return{substFormat:l,coverages:this.parseList(h,lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(d,iC)}}Xn.assert(!1,"0x"+a.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},zh[6]=function(){var a=this.offset+this.relativeOffset,l=this.parseUShort();return 1===l?{substFormat:1,coverage:this.parsePointer(lt.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(iC)}})}:2===l?{substFormat:2,coverage:this.parsePointer(lt.coverage),backtrackClassDef:this.parsePointer(lt.classDef),inputClassDef:this.parsePointer(lt.classDef),lookaheadClassDef:this.parsePointer(lt.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(iC)}})}:3===l?{substFormat:3,backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),inputCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(iC)}:void Xn.assert(!1,"0x"+a.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},zh[7]=function(){var a=this.parseUShort();Xn.argument(1===a,"GSUB Extension Substitution subtable identifier-format must be 1");var l=this.parseUShort(),h=new lt(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:l,extension:zh[l].call(h)}},zh[8]=function(){var a=this.parseUShort();return Xn.argument(1===a,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(lt.coverage),backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),substitutes:this.parseUShortList()}};var rC=new Array(9);rC[1]=function(a){return new bn.Table("substitutionTable",1===a.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new bn.Coverage(a.coverage)},{name:"deltaGlyphID",type:"USHORT",value:a.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new bn.Coverage(a.coverage)}].concat(bn.ushortList("substitute",a.substitute)))},rC[2]=function(a){return Xn.assert(1===a.substFormat,"Lookup type 2 substFormat must be 1."),new bn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new bn.Coverage(a.coverage)}].concat(bn.tableList("seqSet",a.sequences,function(l){return new bn.Table("sequenceSetTable",bn.ushortList("sequence",l))})))},rC[3]=function(a){return Xn.assert(1===a.substFormat,"Lookup type 3 substFormat must be 1."),new bn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new bn.Coverage(a.coverage)}].concat(bn.tableList("altSet",a.alternateSets,function(l){return new bn.Table("alternateSetTable",bn.ushortList("alternate",l))})))},rC[4]=function(a){return Xn.assert(1===a.substFormat,"Lookup type 4 substFormat must be 1."),new bn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new bn.Coverage(a.coverage)}].concat(bn.tableList("ligSet",a.ligatureSets,function(l){return new bn.Table("ligatureSetTable",bn.tableList("ligature",l,function(h){return new bn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:h.ligGlyph}].concat(bn.ushortList("component",h.components,h.components.length+1)))}))})))},rC[6]=function(a){if(1===a.substFormat)return new bn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:a.substFormat},{name:"coverage",type:"TABLE",value:new bn.Coverage(a.coverage)}].concat(bn.tableList("chainRuleSet",a.chainRuleSets,function(f){return new bn.Table("chainRuleSetTable",bn.tableList("chainRule",f,function(p){var g=bn.ushortList("backtrackGlyph",p.backtrack,p.backtrack.length).concat(bn.ushortList("inputGlyph",p.input,p.input.length+1)).concat(bn.ushortList("lookaheadGlyph",p.lookahead,p.lookahead.length)).concat(bn.ushortList("substitution",[],p.lookupRecords.length));return p.lookupRecords.forEach(function(m,v){g=g.concat({name:"sequenceIndex"+v,type:"USHORT",value:m.sequenceIndex}).concat({name:"lookupListIndex"+v,type:"USHORT",value:m.lookupListIndex})}),new bn.Table("chainRuleTable",g)}))})));if(2===a.substFormat)Xn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===a.substFormat){var h=[{name:"substFormat",type:"USHORT",value:a.substFormat}];return h.push({name:"backtrackGlyphCount",type:"USHORT",value:a.backtrackCoverage.length}),a.backtrackCoverage.forEach(function(f,p){h.push({name:"backtrackCoverage"+p,type:"TABLE",value:new bn.Coverage(f)})}),h.push({name:"inputGlyphCount",type:"USHORT",value:a.inputCoverage.length}),a.inputCoverage.forEach(function(f,p){h.push({name:"inputCoverage"+p,type:"TABLE",value:new bn.Coverage(f)})}),h.push({name:"lookaheadGlyphCount",type:"USHORT",value:a.lookaheadCoverage.length}),a.lookaheadCoverage.forEach(function(f,p){h.push({name:"lookaheadCoverage"+p,type:"TABLE",value:new bn.Coverage(f)})}),h.push({name:"substitutionCount",type:"USHORT",value:a.lookupRecords.length}),a.lookupRecords.forEach(function(f,p){h=h.concat({name:"sequenceIndex"+p,type:"USHORT",value:f.sequenceIndex}).concat({name:"lookupListIndex"+p,type:"USHORT",value:f.lookupListIndex})}),new bn.Table("chainContextTable",h)}Xn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var KCe_parse=function pxt(c,a){var l=new lt(c,a=a||0),h=l.parseVersion(1);return Xn.argument(1===h||1.1===h,"Unsupported GSUB table version."),1===h?{version:h,scripts:l.parseScriptList(),features:l.parseFeatureList(),lookups:l.parseLookupList(zh)}:{version:h,scripts:l.parseScriptList(),features:l.parseFeatureList(),lookups:l.parseLookupList(zh),variations:l.parseFeatureVariationsList()}},KCe_make=function gxt(c){return new bn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new bn.ScriptList(c.scripts)},{name:"features",type:"TABLE",value:new bn.FeatureList(c.features)},{name:"lookups",type:"TABLE",value:new bn.LookupList(c.lookups,rC)}])},JCe_parse=function mxt(c,a){var l=new Rn.Parser(c,a),h=l.parseULong();Xn.argument(1===h,"Unsupported META table version."),l.parseULong(),l.parseULong();for(var d=l.parseULong(),f={},p=0;p<d;p++){var g=l.parseTag(),m=l.parseULong(),v=l.parseULong(),y=nC.UTF8(c,a+m,v);f[g]=y}return f},JCe_make=function vxt(c){var a=Object.keys(c).length,l="",h=16+12*a,d=new bn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:h},{name:"numTags",type:"ULONG",value:a}]);for(var f in c){var p=l.length;l+=c[f],d.fields.push({name:"tag "+f,type:"TAG",value:f}),d.fields.push({name:"offset "+f,type:"ULONG",value:h+p}),d.fields.push({name:"length "+f,type:"ULONG",value:c[f].length})}return d.fields.push({name:"stringPool",type:"CHARARRAY",value:l}),d},eSe_parse=function yxt(c,a){var l=new lt(c,a),h=l.parseUShort();Xn.argument(0===h,"Only COLRv0 supported.");var d=l.parseUShort(),f=l.parseOffset32(),p=l.parseOffset32(),g=l.parseUShort();l.relativeOffset=f;var m=l.parseRecordList(d,{glyphID:lt.uShort,firstLayerIndex:lt.uShort,numLayers:lt.uShort});return l.relativeOffset=p,{version:h,baseGlyphRecords:m,layerRecords:l.parseRecordList(g,{glyphID:lt.uShort,paletteIndex:lt.uShort})}},eSe_make=function _xt(c){var a=c.version;void 0===a&&(a=0);var l=c.baseGlyphRecords;void 0===l&&(l=[]);var h=c.layerRecords;void 0===h&&(h=[]),Xn.argument(0===a,"Only COLRv0 supported.");var d=14;return new bn.Table("COLR",[{name:"version",type:"USHORT",value:a},{name:"numBaseGlyphRecords",type:"USHORT",value:l.length},{name:"baseGlyphRecordsOffset",type:"ULONG",value:d},{name:"layerRecordsOffset",type:"ULONG",value:d+6*l.length},{name:"numLayerRecords",type:"USHORT",value:h.length}].concat(l.map(function(p,g){return[{name:"glyphID_"+g,type:"USHORT",value:p.glyphID},{name:"firstLayerIndex_"+g,type:"USHORT",value:p.firstLayerIndex},{name:"numLayers_"+g,type:"USHORT",value:p.numLayers}]}).flat(),h.map(function(p,g){return[{name:"LayerGlyphID_"+g,type:"USHORT",value:p.glyphID},{name:"paletteIndex_"+g,type:"USHORT",value:p.paletteIndex}]}).flat()))},tSe_parse=function bxt(c,a){var l=new lt(c,a),h=l.parseShort(),d=l.parseShort(),f=l.parseShort(),p=l.parseShort(),g=l.parseOffset32(),m=l.parseUShortList(f);return l.relativeOffset=g,{version:h,numPaletteEntries:d,colorRecords:l.parseULongList(p),colorRecordIndices:m}},tSe_make=function Cxt(c){var a=c.version;void 0===a&&(a=0);var l=c.numPaletteEntries;void 0===l&&(l=0);var h=c.colorRecords;void 0===h&&(h=[]);var d=c.colorRecordIndices;return void 0===d&&(d=[0]),Xn.argument(0===a,"Only CPALv0 are supported."),Xn.argument(h.length,"No colorRecords given."),Xn.argument(d.length,"No colorRecordIndices given."),Xn.argument(!l&&1==d.length,"Can't infer numPaletteEntries on multiple colorRecordIndices"),new bn.Table("CPAL",[{name:"version",type:"USHORT",value:a},{name:"numPaletteEntries",type:"USHORT",value:l||h.length},{name:"numPalettes",type:"USHORT",value:d.length},{name:"numColorRecords",type:"USHORT",value:h.length},{name:"colorRecordsArrayOffset",type:"ULONG",value:12+2*d.length}].concat(d.map(function(f,p){return{name:"colorRecordIndices_"+p,type:"USHORT",value:f}}),h.map(function(f,p){return{name:"colorRecords_"+p,type:"ULONG",value:f}})))};function nSe(c){return Math.log(c)/Math.log(2)|0}function OG(c){for(;c.length%4!=0;)c.push(0);for(var a=0,l=0;l<c.length;l+=4)a+=(c[l]<<24)+(c[l+1]<<16)+(c[l+2]<<8)+c[l+3];return a%Math.pow(2,32)}function iSe(c,a,l,h){return new bn.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==c?c:""},{name:"checkSum",type:"ULONG",value:void 0!==a?a:0},{name:"offset",type:"ULONG",value:void 0!==l?l:0},{name:"length",type:"ULONG",value:void 0!==h?h:0}])}function rSe(c){var a=new bn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);a.tables=c,a.numTables=c.length;var l=Math.pow(2,nSe(a.numTables));a.searchRange=16*l,a.entrySelector=nSe(l),a.rangeShift=16*a.numTables-a.searchRange;for(var h=[],d=[],f=a.sizeOf()+iSe().sizeOf()*a.numTables;f%4!=0;)f+=1,d.push({name:"padding",type:"BYTE",value:0});for(var p=0;p<c.length;p+=1){var g=c[p];Xn.argument(4===g.tableName.length,"Table name"+g.tableName+" is invalid.");var m=g.sizeOf(),v=iSe(g.tableName,OG(g.encode()),f,m);for(h.push({name:v.tag+" Table Record",type:"RECORD",value:v}),d.push({name:g.tableName+" table",type:"RECORD",value:g}),f+=m,Xn.argument(!isNaN(f),"Something went wrong calculating the offset.");f%4!=0;)f+=1,d.push({name:"padding",type:"BYTE",value:0})}return h.sort(function(y,_){return y.value.tag>_.value.tag?1:-1}),a.fields=a.fields.concat(h),a.fields=a.fields.concat(d),a}function sSe(c,a,l){for(var h=0;h<a.length;h+=1){var d=c.charToGlyphIndex(a[h]);if(d>0)return c.glyphs.get(d).getMetrics()}return l}function Sxt(c){for(var a=0,l=0;l<c.length;l+=1)a+=c[l];return a/c.length}var wxt_fontToTable=function xxt(c){for(var m,a=[],l=[],h=[],d=[],f=[],p=[],g=[],v=0,y=0,_=0,b=0,C=0,x=0;x<c.glyphs.length;x+=1){var w=c.glyphs.get(x),O=0|w.unicode;if(isNaN(w.advanceWidth))throw new Error("Glyph "+w.name+" ("+x+"): advanceWidth is not a number.");(m>O||void 0===m)&&O>0&&(m=O),v<O&&(v=O);var D=wG_getUnicodeRange(O);if(D<32)y|=1<<D;else if(D<64)_|=1<<D-32;else if(D<96)b|=1<<D-64;else{if(!(D<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");C|=1<<D-96}if(".notdef"!==w.name){var T=w.getMetrics();a.push(T.xMin),l.push(T.yMin),h.push(T.xMax),d.push(T.yMax),p.push(T.leftSideBearing),g.push(T.rightSideBearing),f.push(w.advanceWidth)}}var M={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,l),xMax:Math.max.apply(null,h),yMax:Math.max.apply(null,d),advanceWidthMax:Math.max.apply(null,f),advanceWidthAvg:Sxt(f),minLeftSideBearing:Math.min.apply(null,p),maxLeftSideBearing:Math.max.apply(null,p),minRightSideBearing:Math.min.apply(null,g)};M.ascender=c.ascender,M.descender=c.descender;var k=VCe_make({flags:3,unitsPerEm:c.unitsPerEm,xMin:M.xMin,yMin:M.yMin,xMax:M.xMax,yMax:M.yMax,lowestRecPPEM:3,createdTimestamp:c.createdTimestamp}),E=UCe_make({ascender:M.ascender,descender:M.descender,advanceWidthMax:M.advanceWidthMax,minLeftSideBearing:M.minLeftSideBearing,minRightSideBearing:M.minRightSideBearing,xMaxExtent:M.maxLeftSideBearing+(M.xMax-M.xMin),numberOfHMetrics:c.glyphs.length}),P=$Ce_make(c.glyphs.length),V=wG_make(Object.assign({xAvgCharWidth:Math.round(M.advanceWidthAvg),usFirstCharIndex:m,usLastCharIndex:v,ulUnicodeRange1:y,ulUnicodeRange2:_,ulUnicodeRange3:b,ulUnicodeRange4:C,sTypoAscender:M.ascender,sTypoDescender:M.descender,sTypoLineGap:0,usWinAscent:M.yMax,usWinDescent:Math.abs(M.yMin),ulCodePageRange1:1,sxHeight:sSe(c,"xyvw",{yMax:Math.round(M.ascender/2)}).yMax,sCapHeight:sSe(c,"HIKLEFJMNTZBDPRAGOQSUVWXY",M).yMax,usDefaultChar:c.hasChar(" ")?32:0,usBreakChar:c.hasChar(" ")?32:0},c.tables.os2)),I=zCe_make(c.glyphs),U=xCe_make(c.glyphs),$=c.getEnglishName("fontFamily"),H=c.getEnglishName("fontSubfamily"),J=$+" "+H,ee=c.getEnglishName("postScriptName");ee||(ee=$.replace(/\s/g,"")+"-"+H);var B={};for(var G in c.names)B[G]=c.names[G];B.uniqueID||(B.uniqueID={en:c.getEnglishName("manufacturer")+":"+J}),B.postScriptName||(B.postScriptName={en:ee}),B.preferredFamily||(B.preferredFamily=c.names.fontFamily),B.preferredSubfamily||(B.preferredSubfamily=c.names.fontSubfamily);var W=[],j=XCe_make(B,W),Q=W.length>0?HCe_make(W):void 0,X=YCe_make(),Y=BCe_make(c.glyphs,{version:c.getEnglishName("version"),fullName:J,familyName:$,weightName:H,postScriptName:ee,unitsPerEm:c.unitsPerEm,fontBBox:[0,M.yMin,M.ascender,M.advanceWidthMax]}),ne=c.metas&&Object.keys(c.metas).length>0?JCe_make(c.metas):void 0,re=[k,E,P,V,j,U,X,Y,I];Q&&re.push(Q),c.tables.gsub&&re.push(KCe_make(c.tables.gsub)),c.tables.cpal&&re.push(tSe_make(c.tables.cpal)),c.tables.colr&&re.push(eSe_make(c.tables.colr)),ne&&re.push(ne);for(var fe=rSe(re),De=OG(fe.encode()),we=fe.fields,Fe=!1,qe=0;qe<we.length;qe+=1)if("head table"===we[qe].name){we[qe].value.checkSumAdjustment=2981146554-De,Fe=!0;break}if(!Fe)throw new Error("Could not find head table with checkSum to adjust.");return fe};function DG(c,a){for(var l=0,h=c.length-1;l<=h;){var d=l+h>>>1,f=c[d].tag;if(f===a)return d;f<a?l=d+1:h=d-1}return-l-1}function oSe(c,a){for(var l=0,h=c.length-1;l<=h;){var d=l+h>>>1,f=c[d];if(f===a)return d;f<a?l=d+1:h=d-1}return-l-1}function aSe(c,a){for(var l,h=0,d=c.length-1;h<=d;){var f=h+d>>>1,p=(l=c[f]).start;if(p===a)return l;p<a?h=f+1:d=f-1}if(h>0)return a>(l=c[h-1]).end?0:l}function T2(c,a){this.font=c,this.tableName=a}function k2(c){T2.call(this,c,"gpos")}function Jc(c){T2.call(this,c,"gsub")}function Oxt(c,a){var l=c.length;if(l!==a.length)return!1;for(var h=0;h<l;h++)if(c[h]!==a[h])return!1;return!0}function TG(c,a,l){for(var h=c.subtables,d=0;d<h.length;d++){var f=h[d];if(f.substFormat===a)return f}if(l)return h.push(l),l}function lSe(c){for(var a=new ArrayBuffer(c.length),l=new Uint8Array(a),h=0;h<c.length;++h)l[h]=c[h];return a}function M2(c,a){if(!c)throw a}function cSe(c,a,l,h,d){var f;return(a&h)>0?(f=c.parseByte(),a&d||(f=-f),f=l+f):f=(a&d)>0?l:l+c.parseShort(),f}function uSe(c,a,l){var d,f,h=new Rn.Parser(a,l);if(c.numberOfContours=h.parseShort(),c._xMin=h.parseShort(),c._yMin=h.parseShort(),c._xMax=h.parseShort(),c._yMax=h.parseShort(),c.numberOfContours>0){for(var p=c.endPointIndices=[],g=0;g<c.numberOfContours;g+=1)p.push(h.parseUShort());c.instructionLength=h.parseUShort(),c.instructions=[];for(var m=0;m<c.instructionLength;m+=1)c.instructions.push(h.parseByte());var v=p[p.length-1]+1;d=[];for(var y=0;y<v;y+=1)if(f=h.parseByte(),d.push(f),(8&f)>0)for(var _=h.parseByte(),b=0;b<_;b+=1)d.push(f),y+=1;if(Xn.argument(d.length===v,"Bad flags."),p.length>0){var x,C=[];if(v>0){for(var w=0;w<v;w+=1)(x={}).onCurve=!!(1&(f=d[w])),x.lastPointOfContour=p.indexOf(w)>=0,C.push(x);for(var O=0,D=0;D<v;D+=1)(x=C[D]).x=cSe(h,f=d[D],O,2,16),O=x.x;for(var T=0,M=0;M<v;M+=1)(x=C[M]).y=cSe(h,f=d[M],T,4,32),T=x.y}c.points=C}else c.points=[]}else if(0===c.numberOfContours)c.points=[];else{c.isComposite=!0,c.points=[],c.components=[];for(var k=!0;k;){d=h.parseUShort();var E={glyphIndex:h.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&d)>0?(2&d)>0?(E.dx=h.parseShort(),E.dy=h.parseShort()):E.matchedPoints=[h.parseUShort(),h.parseUShort()]:(2&d)>0?(E.dx=h.parseChar(),E.dy=h.parseChar()):E.matchedPoints=[h.parseByte(),h.parseByte()],(8&d)>0?E.xScale=E.yScale=h.parseF2Dot14():(64&d)>0?(E.xScale=h.parseF2Dot14(),E.yScale=h.parseF2Dot14()):(128&d)>0&&(E.xScale=h.parseF2Dot14(),E.scale01=h.parseF2Dot14(),E.scale10=h.parseF2Dot14(),E.yScale=h.parseF2Dot14()),c.components.push(E),k=!!(32&d)}if(256&d){c.instructionLength=h.parseUShort(),c.instructions=[];for(var P=0;P<c.instructionLength;P+=1)c.instructions.push(h.parseByte())}}}function kG(c,a){for(var l=[],h=0;h<c.length;h+=1){var d=c[h];l.push({x:a.xScale*d.x+a.scale01*d.y+a.dx,y:a.scale10*d.x+a.yScale*d.y+a.dy,onCurve:d.onCurve,lastPointOfContour:d.lastPointOfContour})}return l}function hSe(c){var a=new Mo;if(!c)return a;for(var l=function kxt(c){for(var a=[],l=[],h=0;h<c.length;h+=1){var d=c[h];l.push(d),d.lastPointOfContour&&(a.push(l),l=[])}return Xn.argument(0===l.length,"There are still points left in the current contour."),a}(c),h=0;h<l.length;++h){var d=l[h],p=d[d.length-1],g=d[0];if(p.onCurve)a.moveTo(p.x,p.y);else if(g.onCurve)a.moveTo(g.x,g.y);else{var m={x:.5*(p.x+g.x),y:.5*(p.y+g.y)};a.moveTo(m.x,m.y)}for(var v=0;v<d.length;++v)if(p,p=g,g=d[(v+1)%d.length],p.onCurve)a.lineTo(p.x,p.y);else{var _=g;g.onCurve||(_={x:.5*(p.x+g.x),y:.5*(p.y+g.y)}),a.quadraticCurveTo(p.x,p.y,_.x,_.y)}a.closePath()}return a}function dSe(c,a){if(a.isComposite)for(var l=0;l<a.components.length;l+=1){var h=a.components[l],d=c.get(h.glyphIndex);if(d.getPath(),d.points){var f=void 0;if(void 0===h.matchedPoints)f=kG(d.points,h);else{if(h.matchedPoints[0]>a.points.length-1||h.matchedPoints[1]>d.points.length-1)throw Error("Matched points out of range in "+a.name);var p=a.points[h.matchedPoints[0]],g=d.points[h.matchedPoints[1]],m={xScale:h.xScale,scale01:h.scale01,scale10:h.scale10,yScale:h.yScale,dx:0,dy:0};g=kG([g],m)[0],m.dx=p.x-g.x,m.dy=p.y-g.y,f=kG(d.points,m)}a.points=a.points.concat(f)}}return hSe(a.points)}T2.prototype={searchTag:DG,binSearch:oSe,getTable:function(c){var a=this.font.tables[this.tableName];return!a&&c&&(a=this.font.tables[this.tableName]=this.createDefaultTable()),a},getScriptNames:function(){var c=this.getTable();return c?c.scripts.map(function(a){return a.tag}):[]},getDefaultScriptName:function(){var c=this.getTable();if(c){for(var a=!1,l=0;l<c.scripts.length;l++){var h=c.scripts[l].tag;if("DFLT"===h)return h;"latn"===h&&(a=!0)}if(a)return"latn"}},getScriptTable:function(c,a){var l=this.getTable(a);if(l){var h=l.scripts,d=DG(l.scripts,c=c||"DFLT");if(d>=0)return h[d].script;if(a){var f={tag:c,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return h.splice(-1-d,0,f),f.script}}},getLangSysTable:function(c,a,l){var h=this.getScriptTable(c,l);if(h){if(!a||"dflt"===a||"DFLT"===a)return h.defaultLangSys;var d=DG(h.langSysRecords,a);if(d>=0)return h.langSysRecords[d].langSys;if(l){var f={tag:a,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return h.langSysRecords.splice(-1-d,0,f),f.langSys}}},getFeatureTable:function(c,a,l,h){var d=this.getLangSysTable(c,a,h);if(d){for(var f,p=d.featureIndexes,g=this.font.tables[this.tableName].features,m=0;m<p.length;m++)if((f=g[p[m]]).tag===l)return f.feature;if(h){var v=g.length;return Xn.assert(0===v||l>=g[v-1].tag,"Features must be added in alphabetical order."),g.push(f={tag:l,feature:{params:0,lookupListIndexes:[]}}),p.push(v),f.feature}}},getLookupTables:function(c,a,l,h,d){var f=this.getFeatureTable(c,a,l,d),p=[];if(f){for(var g,m=f.lookupListIndexes,v=this.font.tables[this.tableName].lookups,y=0;y<m.length;y++)(g=v[m[y]]).lookupType===h&&p.push(g);if(0===p.length&&d){var _=v.length;return v.push(g={lookupType:h,lookupFlag:0,subtables:[],markFilteringSet:void 0}),m.push(_),[g]}}return p},getGlyphClass:function(c,a){switch(c.format){case 1:return c.startGlyph<=a&&a<c.startGlyph+c.classes.length?c.classes[a-c.startGlyph]:0;case 2:var l=aSe(c.ranges,a);return l?l.classId:0}},getCoverageIndex:function(c,a){switch(c.format){case 1:var l=oSe(c.glyphs,a);return l>=0?l:-1;case 2:var h=aSe(c.ranges,a);return h?h.index+a-h.start:-1}},expandCoverage:function(c){if(1===c.format)return c.glyphs;for(var a=[],l=c.ranges,h=0;h<l.length;h++)for(var d=l[h],p=d.end,g=d.start;g<=p;g++)a.push(g);return a}},(k2.prototype=T2.prototype).init=function(){var c=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(c)},k2.prototype.getKerningValue=function(c,a,l){for(var h=0;h<c.length;h++)for(var d=c[h].subtables,f=0;f<d.length;f++){var p=d[f],g=this.getCoverageIndex(p.coverage,a);if(!(g<0))switch(p.posFormat){case 1:for(var m=p.pairSets[g],v=0;v<m.length;v++){var y=m[v];if(y.secondGlyph===l)return y.value1&&y.value1.xAdvance||0}break;case 2:var _=this.getGlyphClass(p.classDef1,a),b=this.getGlyphClass(p.classDef2,l),C=p.classRecords[_][b];return C.value1&&C.value1.xAdvance||0}}return 0},k2.prototype.getKerningTables=function(c,a){if(this.font.tables.gpos)return this.getLookupTables(c,a,"kern",2)},(Jc.prototype=T2.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Jc.prototype.getSingle=function(c,a,l){for(var h=[],d=this.getLookupTables(a,l,c,1),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++){var m=p[g],v=this.expandCoverage(m.coverage),y=void 0;if(1===m.substFormat){var _=m.deltaGlyphId;for(y=0;y<v.length;y++){var b=v[y];h.push({sub:b,by:b+_})}}else{var C=m.substitute;for(y=0;y<v.length;y++)h.push({sub:v[y],by:C[y]})}}return h},Jc.prototype.getMultiple=function(c,a,l){for(var h=[],d=this.getLookupTables(a,l,c,2),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++){var m=p[g],v=this.expandCoverage(m.coverage),y=void 0;for(y=0;y<v.length;y++)h.push({sub:v[y],by:m.sequences[y]})}return h},Jc.prototype.getAlternates=function(c,a,l){for(var h=[],d=this.getLookupTables(a,l,c,3),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++)for(var m=p[g],v=this.expandCoverage(m.coverage),y=m.alternateSets,_=0;_<v.length;_++)h.push({sub:v[_],by:y[_]});return h},Jc.prototype.getLigatures=function(c,a,l){for(var h=[],d=this.getLookupTables(a,l,c,4),f=0;f<d.length;f++)for(var p=d[f].subtables,g=0;g<p.length;g++)for(var m=p[g],v=this.expandCoverage(m.coverage),y=m.ligatureSets,_=0;_<v.length;_++)for(var b=v[_],C=y[_],x=0;x<C.length;x++){var w=C[x];h.push({sub:[b].concat(w.components),by:w.ligGlyph})}return h},Jc.prototype.addSingle=function(c,a,l,h){var f=TG(this.getLookupTables(l,h,c,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Xn.assert(1===f.coverage.format,"Single: unable to modify coverage table format "+f.coverage.format);var p=a.sub,g=this.binSearch(f.coverage.glyphs,p);g<0&&(f.coverage.glyphs.splice(g=-1-g,0,p),f.substitute.splice(g,0,0)),f.substitute[g]=a.by},Jc.prototype.addMultiple=function(c,a,l,h){Xn.assert(a.by instanceof Array&&a.by.length>1,'Multiple: "by" must be an array of two or more ids');var f=TG(this.getLookupTables(l,h,c,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Xn.assert(1===f.coverage.format,"Multiple: unable to modify coverage table format "+f.coverage.format);var p=a.sub,g=this.binSearch(f.coverage.glyphs,p);g<0&&(f.coverage.glyphs.splice(g=-1-g,0,p),f.sequences.splice(g,0,0)),f.sequences[g]=a.by},Jc.prototype.addAlternate=function(c,a,l,h){var f=TG(this.getLookupTables(l,h,c,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Xn.assert(1===f.coverage.format,"Alternate: unable to modify coverage table format "+f.coverage.format);var p=a.sub,g=this.binSearch(f.coverage.glyphs,p);g<0&&(f.coverage.glyphs.splice(g=-1-g,0,p),f.alternateSets.splice(g,0,0)),f.alternateSets[g]=a.by},Jc.prototype.addLigature=function(c,a,l,h){var d=this.getLookupTables(l,h,c,4,!0)[0],f=d.subtables[0];f||(d.subtables[0]=f={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),Xn.assert(1===f.coverage.format,"Ligature: unable to modify coverage table format "+f.coverage.format);var p=a.sub[0],g=a.sub.slice(1),m={ligGlyph:a.by,components:g},v=this.binSearch(f.coverage.glyphs,p);if(v>=0){for(var y=f.ligatureSets[v],_=0;_<y.length;_++)if(Oxt(y[_].components,g))return;y.push(m)}else f.coverage.glyphs.splice(v=-1-v,0,p),f.ligatureSets.splice(v,0,[m])},Jc.prototype.getFeature=function(c,a,l){if(/ss\d\d/.test(c))return this.getSingle(c,a,l);switch(c){case"aalt":case"salt":return this.getSingle(c,a,l).concat(this.getAlternates(c,a,l));case"dlig":case"liga":case"rlig":return this.getLigatures(c,a,l);case"ccmp":return this.getMultiple(c,a,l).concat(this.getLigatures(c,a,l));case"stch":return this.getMultiple(c,a,l)}},Jc.prototype.add=function(c,a,l,h){if(/ss\d\d/.test(c))return this.addSingle(c,a,l,h);switch(c){case"aalt":case"salt":return"number"==typeof a.by?this.addSingle(c,a,l,h):this.addAlternate(c,a,l,h);case"dlig":case"liga":case"rlig":return this.addLigature(c,a,l,h);case"ccmp":return a.by instanceof Array?this.addMultiple(c,a,l,h):this.addLigature(c,a,l,h)}};var pSe,Ev,gSe,MG,fSe={getPath:hSe,parse:function Axt(c,a,l,h,d){return d.lowMemory?function Ext(c,a,l,h){var d=new rf.GlyphSet(h);return h._push=function(f){var p=l[f];d.push(f,p!==l[f+1]?rf.ttfGlyphLoader(h,f,uSe,c,a+p,dSe):rf.glyphLoader(h,f))},d}(c,a,l,h):function Mxt(c,a,l,h){for(var d=new rf.GlyphSet(h),f=0;f<l.length-1;f+=1){var p=l[f];d.push(f,p!==l[f+1]?rf.ttfGlyphLoader(h,f,uSe,c,a+p,dSe):rf.glyphLoader(h,f))}return d}(c,a,l,h)}};function mSe(c){this.font=c,this.getCommands=function(a){return fSe.getPath(a).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ixt(c){return c}function vSe(c){return Math.sign(c)*Math.round(Math.abs(c))}function Pxt(c){return Math.sign(c)*Math.round(Math.abs(2*c))/2}function Rxt(c){return Math.sign(c)*(Math.round(Math.abs(c)+.5)-.5)}function Fxt(c){return Math.sign(c)*Math.ceil(Math.abs(c))}function Lxt(c){return Math.sign(c)*Math.floor(Math.abs(c))}var ySe=function(c){var a=this.srPeriod,l=this.srPhase,d=1;return c<0&&(c=-c,d=-1),c+=this.srThreshold-l,c=Math.trunc(c/a)*a,(c+=l)<0?l*d:c*d},sf={x:1,y:0,axis:"x",distance:function(c,a,l,h){return(l?c.xo:c.x)-(h?a.xo:a.x)},interpolate:function(c,a,l,h){var d,f,p,g,m,v,y;if(!h||h===this)return d=c.xo-a.xo,f=c.xo-l.xo,m=a.x-a.xo,v=l.x-l.xo,0===(y=(p=Math.abs(d))+(g=Math.abs(f)))?void(c.x=c.xo+(m+v)/2):void(c.x=c.xo+(m*g+v*p)/y);d=h.distance(c,a,!0,!0),f=h.distance(c,l,!0,!0),m=h.distance(a,a,!1,!0),v=h.distance(l,l,!1,!0),0!==(y=(p=Math.abs(d))+(g=Math.abs(f)))?sf.setRelative(c,c,(m*g+v*p)/y,h,!0):sf.setRelative(c,c,(m+v)/2,h,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(c,a,l,h,d){c.x=h&&h!==this?(d?a.xo:a.x)+l*h.x+(c.y-((d?a.yo:a.y)+l*h.y))/h.normalSlope:(d?a.xo:a.x)+l},slope:0,touch:function(c){c.xTouched=!0},touched:function(c){return c.xTouched},untouch:function(c){c.xTouched=!1}},Tp={x:0,y:1,axis:"y",distance:function(c,a,l,h){return(l?c.yo:c.y)-(h?a.yo:a.y)},interpolate:function(c,a,l,h){var d,f,p,g,m,v,y;if(!h||h===this)return d=c.yo-a.yo,f=c.yo-l.yo,m=a.y-a.yo,v=l.y-l.yo,0===(y=(p=Math.abs(d))+(g=Math.abs(f)))?void(c.y=c.yo+(m+v)/2):void(c.y=c.yo+(m*g+v*p)/y);d=h.distance(c,a,!0,!0),f=h.distance(c,l,!0,!0),m=h.distance(a,a,!1,!0),v=h.distance(l,l,!1,!0),0!==(y=(p=Math.abs(d))+(g=Math.abs(f)))?Tp.setRelative(c,c,(m*g+v*p)/y,h,!0):Tp.setRelative(c,c,(m+v)/2,h,!0)},normalSlope:0,setRelative:function(c,a,l,h,d){c.y=h&&h!==this?(d?a.yo:a.y)+l*h.y+h.normalSlope*(c.x-((d?a.xo:a.x)+l*h.x)):(d?a.yo:a.y)+l},slope:Number.POSITIVE_INFINITY,touch:function(c){c.yTouched=!0},touched:function(c){return c.yTouched},untouch:function(c){c.yTouched=!1}};function E2(c,a){this.x=c,this.y=a,this.axis=void 0,this.slope=a/c,this.normalSlope=-c/a,Object.freeze(this)}function A2(c,a){var l=Math.sqrt(c*c+a*a);return a/=l,1==(c/=l)&&0===a?sf:0===c&&1===a?Tp:new E2(c,a)}function kp(c,a,l,h){this.x=this.xo=Math.round(64*c)/64,this.y=this.yo=Math.round(64*a)/64,this.lastPointOfContour=l,this.onCurve=h,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(sf),Object.freeze(Tp),E2.prototype.distance=function(c,a,l,h){return this.x*sf.distance(c,a,l,h)+this.y*Tp.distance(c,a,l,h)},E2.prototype.interpolate=function(c,a,l,h){var d,f,p,g,m,v,y;p=h.distance(c,a,!0,!0),g=h.distance(c,l,!0,!0),d=h.distance(a,a,!1,!0),f=h.distance(l,l,!1,!0),0!==(y=(m=Math.abs(p))+(v=Math.abs(g)))?this.setRelative(c,c,(d*v+f*m)/y,h,!0):this.setRelative(c,c,(d+f)/2,h,!0)},E2.prototype.setRelative=function(c,a,l,h,d){var v=(h=h||this).normalSlope,y=this.slope,_=c.x,b=c.y;c.x=(y*_-v*((d?a.xo:a.x)+l*h.x)+((d?a.yo:a.y)+l*h.y)-b)/(y-v),c.y=y*(c.x-_)+b},E2.prototype.touch=function(c){c.xTouched=!0,c.yTouched=!0},kp.prototype.nextTouched=function(c){for(var a=this.nextPointOnContour;!c.touched(a)&&a!==this;)a=a.nextPointOnContour;return a},kp.prototype.prevTouched=function(c){for(var a=this.prevPointOnContour;!c.touched(a)&&a!==this;)a=a.prevPointOnContour;return a};var I2=Object.freeze(new kp(0,0)),Nxt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function om(c,a){switch(this.env=c,this.stack=[],this.prog=a,c){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=sf,this.round=vSe}}function wP(c){for(var a=c.tZone=new Array(c.gZone.length),l=0;l<a.length;l++)a[l]=new kp(0,0)}function _Se(c,a){var f,l=c.prog,h=c.ip,d=1;do{if(88===(f=l[++h]))d++;else if(89===f)d--;else if(64===f)h+=l[h+1]+1;else if(65===f)h+=2*l[h+1]+1;else if(f>=176&&f<=183)h+=f-176+1;else if(f>=184&&f<=191)h+=2*(f-184+1);else if(a&&1===d&&27===f)break}while(d>0);c.ip=h}function bSe(c,a){exports.DEBUG&&console.log(a.step,"SVTCA["+c.axis+"]"),a.fv=a.pv=a.dpv=c}function CSe(c,a){exports.DEBUG&&console.log(a.step,"SPVTCA["+c.axis+"]"),a.pv=a.dpv=c}function SSe(c,a){exports.DEBUG&&console.log(a.step,"SFVTCA["+c.axis+"]"),a.fv=c}function xSe(c,a){var g,m,l=a.stack,h=l.pop(),d=l.pop(),f=a.z2[h],p=a.z1[d];exports.DEBUG&&console.log("SPVTL["+c+"]",h,d),c?(g=f.y-p.y,m=p.x-f.x):(g=p.x-f.x,m=p.y-f.y),a.pv=a.dpv=A2(g,m)}function wSe(c,a){var g,m,l=a.stack,h=l.pop(),d=l.pop(),f=a.z2[h],p=a.z1[d];exports.DEBUG&&console.log("SFVTL["+c+"]",h,d),c?(g=f.y-p.y,m=p.x-f.x):(g=p.x-f.x,m=p.y-f.y),a.fv=A2(g,m)}function EG(c){exports.DEBUG&&console.log(c.step,"POP[]"),c.stack.pop()}function OSe(c,a){var l=a.stack.pop(),h=a.z0[l],d=a.fv,f=a.pv;exports.DEBUG&&console.log(a.step,"MDAP["+c+"]",l);var p=f.distance(h,I2);c&&(p=a.round(p)),d.setRelative(h,I2,p,f),d.touch(h),a.rp0=a.rp1=l}function DSe(c,a){var d,f,p,l=a.z2,h=l.length-2;exports.DEBUG&&console.log(a.step,"IUP["+c.axis+"]");for(var g=0;g<h;g++)!c.touched(d=l[g])&&(f=d.prevTouched(c))!==d&&(f===(p=d.nextTouched(c))&&c.setRelative(d,d,c.distance(f,f,!1,!0),c,!0),c.interpolate(d,f,p,c))}function TSe(c,a){for(var l=a.stack,d=(c?a.z0:a.z1)[c?a.rp1:a.rp2],f=a.fv,p=a.pv,g=a.loop,m=a.z2;g--;){var v=l.pop(),y=m[v],_=p.distance(d,d,!1,!0);f.setRelative(y,y,_,p),f.touch(y),exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-g)+": ":"")+"SHP["+(c?"rp1":"rp2")+"]",v)}a.loop=1}function kSe(c,a){var d=(c?a.z0:a.z1)[c?a.rp1:a.rp2],f=a.fv,p=a.pv,g=a.stack.pop(),m=a.z2[a.contours[g]],v=m;exports.DEBUG&&console.log(a.step,"SHC["+c+"]",g);var y=p.distance(d,d,!1,!0);do{v!==d&&f.setRelative(v,v,y,p),v=v.nextPointOnContour}while(v!==m)}function MSe(c,a){var m,d=(c?a.z0:a.z1)[c?a.rp1:a.rp2],f=a.fv,p=a.pv,g=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SHZ["+c+"]",g),g){case 0:m=a.tZone;break;case 1:m=a.gZone;break;default:throw new Error("Invalid zone")}for(var v,y=p.distance(d,d,!1,!0),_=m.length-2,b=0;b<_;b++)f.setRelative(v=m[b],v,y,p)}function ESe(c,a){var l=a.stack,h=l.pop()/64,d=l.pop(),f=a.z1[d],g=a.fv;g.setRelative(f,a.z0[a.rp0],h,a.pv),g.touch(f),exports.DEBUG&&console.log(a.step,"MSIRP["+c+"]",h,d),a.rp1=a.rp0,a.rp2=d,c&&(a.rp0=d)}function ASe(c,a){var l=a.stack,h=l.pop(),d=l.pop(),f=a.z0[d],p=a.fv,g=a.pv,m=a.cvt[h];exports.DEBUG&&console.log(a.step,"MIAP["+c+"]",h,"(",m,")",d);var v=g.distance(f,I2);c&&(Math.abs(v-m)<a.cvCutIn&&(v=m),v=a.round(v)),p.setRelative(f,I2,v,g),0===a.zp0&&(f.xo=f.x,f.yo=f.y),p.touch(f),a.rp0=a.rp1=d}function ISe(c,a){var l=a.stack,h=l.pop(),d=a.z2[h];exports.DEBUG&&console.log(a.step,"GC["+c+"]",h),l.push(64*a.dpv.distance(d,I2,c,!1))}function PSe(c,a){var l=a.stack,h=l.pop(),d=l.pop(),g=a.dpv.distance(a.z0[d],a.z1[h],c,c);exports.DEBUG&&console.log(a.step,"MD["+c+"]",h,d,"->",g),a.stack.push(Math.round(64*g))}function AG(c,a){var l=a.stack,h=l.pop(),d=a.fv,f=a.pv,p=a.ppem,g=a.deltaBase+16*(c-1),m=a.deltaShift,v=a.z0;exports.DEBUG&&console.log(a.step,"DELTAP["+c+"]",h,l);for(var y=0;y<h;y++){var _=l.pop(),b=l.pop();if(g+((240&b)>>4)===p){var x=(15&b)-8;x>=0&&x++,exports.DEBUG&&console.log(a.step,"DELTAPFIX",_,"by",x*m);var w=v[_];d.setRelative(w,w,x*m,f)}}}function OP(c,a){var l=a.stack,h=l.pop();exports.DEBUG&&console.log(a.step,"ROUND[]"),l.push(64*a.round(h/64))}function IG(c,a){var l=a.stack,h=l.pop(),d=a.ppem,f=a.deltaBase+16*(c-1),p=a.deltaShift;exports.DEBUG&&console.log(a.step,"DELTAC["+c+"]",h,l);for(var g=0;g<h;g++){var m=l.pop(),v=l.pop();if(f+((240&v)>>4)===d){var _=(15&v)-8;_>=0&&_++;var b=_*p;exports.DEBUG&&console.log(a.step,"DELTACFIX",m,"by",b),a.cvt[m]+=b}}}function RSe(c,a){var g,m,l=a.stack,h=l.pop(),d=l.pop(),f=a.z2[h],p=a.z1[d];exports.DEBUG&&console.log(a.step,"SDPVTL["+c+"]",h,d),c?(g=f.y-p.y,m=p.x-f.x):(g=p.x-f.x,m=p.y-f.y),a.dpv=A2(g,m)}function am(c,a){var l=a.stack,h=a.prog,d=a.ip;exports.DEBUG&&console.log(a.step,"PUSHB["+c+"]");for(var f=0;f<c;f++)l.push(h[++d]);a.ip=d}function lm(c,a){var l=a.ip,h=a.prog,d=a.stack;exports.DEBUG&&console.log(a.ip,"PUSHW["+c+"]");for(var f=0;f<c;f++){var p=h[++l]<<8|h[++l];32768&p&&(p=-(1+(65535^p))),d.push(p)}a.ip=l}function Fn(c,a,l,h,d,f){var w,O,D,T,p=f.stack,g=c&&p.pop(),m=p.pop(),y=f.z0[f.rp0],_=f.z1[m],b=f.minDis,C=f.fv,x=f.dpv;D=(O=w=x.distance(_,y,!0,!0))>=0?1:-1,O=Math.abs(O),c&&(T=f.cvt[g],h&&Math.abs(O-T)<f.cvCutIn&&(O=T)),l&&O<b&&(O=b),h&&(O=f.round(O)),C.setRelative(_,y,D*O,x),C.touch(_),exports.DEBUG&&console.log(f.step,(c?"MIRP[":"MDRP[")+(a?"M":"m")+(l?">":"_")+(h?"R":"_")+(0===d?"Gr":1===d?"Bl":2===d?"Wh":"")+"]",c?g+"("+f.cvt[g]+","+T+")":"",m,"(d =",w,"->",D*O,")"),f.rp1=f.rp0,f.rp2=m,a&&(f.rp0=m)}function sC(c){this.char=c,this.state={},this.activeState=null}function PG(c,a,l){this.contextName=l,this.startIndex=c,this.endOffset=a}function aOt(c,a,l){this.contextName=c,this.openRange=null,this.ranges=[],this.checkStart=a,this.checkEnd=l}function Hh(c,a){this.context=c,this.index=a,this.length=c.length,this.current=c[a],this.backtrack=c.slice(0,a),this.lookahead=c.slice(a+1)}function DP(c){this.eventId=c,this.subscribers=[]}function lOt(c){var a=this,l=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];l.forEach(function(d){Object.defineProperty(a.events,d,{value:new DP(d)})}),c&&l.forEach(function(d){var f=c[d];"function"==typeof f&&a.events[d].subscribe(f)}),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach(function(d){a.events[d].subscribe(a.updateContextsRanges)})}function to(c){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],lOt.call(this,c)}function cm(c){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(c)}function FSe(c){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(c)}function um(c){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(c)}function TP(c){return/[A-z]/.test(c)}function eu(c){this.font=c,this.features={}}function Av(c){this.id=c.id,this.tag=c.tag,this.substitution=c.substitution}function P2(c,a){if(!c)return-1;switch(a.format){case 1:return a.glyphs.indexOf(c);case 2:for(var l=a.ranges,h=0;h<l.length;h++){var d=l[h];if(c>=d.start&&c<=d.end)return d.index+(c-d.start)}break;default:return-1}return-1}function uOt(c,a){return-1===P2(c,a.coverage)?null:c+a.deltaGlyphId}function hOt(c,a){var l=P2(c,a.coverage);return-1===l?null:a.substitute[l]}function RG(c,a){for(var l=[],h=0;h<c.length;h++){var d=c[h],f=a.current,p=P2(f=Array.isArray(f)?f[0]:f,d);-1!==p&&l.push(p)}return l.length!==c.length?-1:l}function dOt(c,a){if(c.context.length<a.inputCoverage.length+a.lookaheadCoverage.length+a.backtrackCoverage.length)return[];var h=RG(a.inputCoverage,c);if(-1===h)return[];if(c.lookahead.length<a.lookaheadCoverage.length)return[];for(var f=c.lookahead.slice(a.inputCoverage.length-1);f.length&&um(f[0].char);)f.shift();var p=new Hh(f,0),g=RG(a.lookaheadCoverage,p),m=[].concat(c.backtrack);for(m.reverse();m.length&&um(m[0].char);)m.shift();if(m.length<a.backtrackCoverage.length)return[];var v=new Hh(m,0),y=RG(a.backtrackCoverage,v),b=[];if(h.length===a.inputCoverage.length&&g.length===a.lookaheadCoverage.length&&y.length===a.backtrackCoverage.length)for(var C=0;C<a.lookupRecords.length;C++)for(var O=this.getLookupByIndex(a.lookupRecords[C].lookupListIndex),D=0;D<O.subtables.length;D++){var T=O.subtables[D],M=this.getLookupMethod(O,T);if("12"===this.getSubstitutionType(O,T))for(var E=0;E<h.length;E++){var V=M(c.get(E));V&&b.push(V)}}return b}function fOt(c,a){var h=P2(c.current,a.coverage);if(-1===h)return null;for(var d,f=a.ligatureSets[h],p=0;p<f.length;p++){d=f[p];for(var g=0;g<d.components.length&&c.lookahead[g]===d.components[g];g++)if(g===d.components.length-1)return d}return null}function pOt(c,a){var l=P2(c,a.coverage);return-1===l?null:a.sequences[l]}mSe.prototype.exec=function(c,a){if("number"!=typeof a)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var l=this.font,h=this._prepState;if(!h||h.ppem!==a){var d=this._fpgmState;if(!d){om.prototype=Nxt,(d=this._fpgmState=new om("fpgm",l.tables.fpgm)).funcs=[],d.font=l,exports.DEBUG&&(console.log("---EXEC FPGM---"),d.step=-1);try{Ev(d)}catch(v){return console.log("Hinting error in FPGM:"+v),void(this._errorState=3)}}om.prototype=d,(h=this._prepState=new om("prep",l.tables.prep)).ppem=a;var f=l.tables.cvt;if(f)for(var p=h.cvt=new Array(f.length),g=a/l.unitsPerEm,m=0;m<f.length;m++)p[m]=f[m]*g;else h.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),h.step=-1);try{Ev(h)}catch(v){this._errorState<2&&console.log("Hinting error in PREP:"+v),this._errorState=2}}if(!(this._errorState>1))try{return gSe(c,h)}catch(v){return this._errorState<1&&(console.log("Hinting error:"+v),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},gSe=function(c,a){var f,p,g,l=a.ppem/a.font.unitsPerEm,h=l,d=c.components;if(om.prototype=a,d){var m=a.font;p=[],f=[];for(var v=0;v<d.length;v++){var y=d[v],_=m.glyphs.get(y.glyphIndex);g=new om("glyf",_.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+v+"---"),g.step=-1),MG(_,g,l,h);for(var b=Math.round(y.dx*l),C=Math.round(y.dy*h),x=g.gZone,w=g.contours,O=0;O<x.length;O++){var D=x[O];D.xTouched=D.yTouched=!1,D.xo=D.x=D.x+b,D.yo=D.y=D.y+C}var T=p.length;p.push.apply(p,x);for(var M=0;M<w.length;M++)f.push(w[M]+T)}c.instructions&&!g.inhibitGridFit&&((g=new om("glyf",c.instructions)).gZone=g.z0=g.z1=g.z2=p,g.contours=f,p.push(new kp(0,0),new kp(Math.round(c.advanceWidth*l),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),g.step=-1),Ev(g),p.length-=2)}else g=new om("glyf",c.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),g.step=-1),MG(c,g,l,h),p=g.gZone;return p},MG=function(c,a,l,h){for(var m,d=c.points||[],f=d.length,p=a.gZone=a.z0=a.z1=a.z2=[],g=a.contours=[],v=0;v<f;v++)p[v]=new kp((m=d[v]).x*l,m.y*h,m.lastPointOfContour,m.onCurve);for(var y,_,b=0;b<f;b++)m=p[b],y||(y=m,g.push(b)),m.lastPointOfContour?(m.nextPointOnContour=y,y.prevPointOnContour=m,y=void 0):(m.nextPointOnContour=_=p[b+1],_.prevPointOnContour=m);if(!a.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",a.stack);for(var C=0;C<f;C++)console.log(C,p[C].x,p[C].y)}if(p.push(new kp(0,0),new kp(Math.round(c.advanceWidth*l),0)),Ev(a),p.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",a.stack);for(var x=0;x<f;x++)console.log(x,p[x].x,p[x].y)}}},Ev=function(c){var a=c.prog;if(a){var h,l=a.length;for(c.ip=0;c.ip<l;c.ip++){if(exports.DEBUG&&c.step++,!(h=pSe[a[c.ip]]))throw new Error("unknown instruction: 0x"+Number(a[c.ip]).toString(16));h(c)}}},pSe=[bSe.bind(void 0,Tp),bSe.bind(void 0,sf),CSe.bind(void 0,Tp),CSe.bind(void 0,sf),SSe.bind(void 0,Tp),SSe.bind(void 0,sf),xSe.bind(void 0,0),xSe.bind(void 0,1),wSe.bind(void 0,0),wSe.bind(void 0,1),function Bxt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"SPVFS[]",l,h),c.pv=c.dpv=A2(h,l)},function Vxt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"SPVFS[]",l,h),c.fv=A2(h,l)},function Uxt(c){var a=c.stack,l=c.pv;exports.DEBUG&&console.log(c.step,"GPV[]"),a.push(16384*l.x),a.push(16384*l.y)},function zxt(c){var a=c.stack,l=c.fv;exports.DEBUG&&console.log(c.step,"GFV[]"),a.push(16384*l.x),a.push(16384*l.y)},function Hxt(c){c.fv=c.pv,exports.DEBUG&&console.log(c.step,"SFVTPV[]")},function $xt(c){var a=c.stack,l=a.pop(),h=a.pop(),d=a.pop(),f=a.pop(),p=a.pop(),g=c.z0,m=c.z1,v=g[l],y=g[h],_=m[d],b=m[f],C=c.z2[p];exports.DEBUG&&console.log("ISECT[], ",l,h,d,f,p);var x=v.x,w=v.y,O=y.x,D=y.y,T=_.x,M=_.y,k=b.x,E=b.y,P=(x-O)*(M-E)-(w-D)*(T-k),V=x*D-w*O,I=T*E-M*k;C.x=(V*(T-k)-I*(x-O))/P,C.y=(V*(M-E)-I*(w-D))/P},function Wxt(c){c.rp0=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SRP0[]",c.rp0)},function Gxt(c){c.rp1=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SRP1[]",c.rp1)},function Qxt(c){c.rp2=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SRP2[]",c.rp2)},function jxt(c){var a=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZP0[]",a),c.zp0=a,a){case 0:c.tZone||wP(c),c.z0=c.tZone;break;case 1:c.z0=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function Zxt(c){var a=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZP1[]",a),c.zp1=a,a){case 0:c.tZone||wP(c),c.z1=c.tZone;break;case 1:c.z1=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function qxt(c){var a=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZP2[]",a),c.zp2=a,a){case 0:c.tZone||wP(c),c.z2=c.tZone;break;case 1:c.z2=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function Xxt(c){var a=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SZPS[]",a),c.zp0=c.zp1=c.zp2=a,a){case 0:c.tZone||wP(c),c.z0=c.z1=c.z2=c.tZone;break;case 1:c.z0=c.z1=c.z2=c.gZone;break;default:throw new Error("Invalid zone pointer")}},function Yxt(c){c.loop=c.stack.pop(),exports.DEBUG&&console.log(c.step,"SLOOP[]",c.loop)},function Kxt(c){exports.DEBUG&&console.log(c.step,"RTG[]"),c.round=vSe},function Jxt(c){exports.DEBUG&&console.log(c.step,"RTHG[]"),c.round=Rxt},function ewt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"SMD[]",a),c.minDis=a/64},function twt(c){exports.DEBUG&&console.log(c.step,"ELSE[]"),_Se(c,!1)},function nwt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"JMPR[]",a),c.ip+=a-1},function iwt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"SCVTCI[]",a),c.cvCutIn=a/64},void 0,void 0,function rwt(c){var a=c.stack;exports.DEBUG&&console.log(c.step,"DUP[]"),a.push(a[a.length-1])},EG,function swt(c){exports.DEBUG&&console.log(c.step,"CLEAR[]"),c.stack.length=0},function owt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"SWAP[]"),a.push(l),a.push(h)},function awt(c){var a=c.stack;exports.DEBUG&&console.log(c.step,"DEPTH[]"),a.push(a.length)},function uwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"CINDEX[]",l),a.push(a[a.length-l])},function hwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"MINDEX[]",l),a.push(a.splice(a.length-l,1)[0])},void 0,void 0,void 0,function lwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"LOOPCALL[]",l,h);var d=c.ip,f=c.prog;c.prog=c.funcs[l];for(var p=0;p<h;p++)Ev(c),exports.DEBUG&&console.log(++c.step,p+1<h?"next loopcall":"done loopcall",p);c.ip=d,c.prog=f},function cwt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"CALL[]",a);var l=c.ip,h=c.prog;c.prog=c.funcs[a],Ev(c),c.ip=l,c.prog=h,exports.DEBUG&&console.log(++c.step,"returning from",a)},function dwt(c){if("fpgm"!==c.env)throw new Error("FDEF not allowed here");var l=c.prog,h=c.ip,d=c.stack.pop(),f=h;for(exports.DEBUG&&console.log(c.step,"FDEF[]",d);45!==l[++h];);c.ip=h,c.funcs[d]=l.slice(f+1,h)},void 0,OSe.bind(void 0,0),OSe.bind(void 0,1),DSe.bind(void 0,Tp),DSe.bind(void 0,sf),TSe.bind(void 0,0),TSe.bind(void 0,1),kSe.bind(void 0,0),kSe.bind(void 0,1),MSe.bind(void 0,0),MSe.bind(void 0,1),function fwt(c){for(var a=c.stack,l=c.loop,h=c.fv,d=a.pop()/64,f=c.z2;l--;){var p=a.pop(),g=f[p];exports.DEBUG&&console.log(c.step,(c.loop>1?"loop "+(c.loop-l)+": ":"")+"SHPIX[]",p,d),h.setRelative(g,g,d),h.touch(g)}c.loop=1},function pwt(c){for(var a=c.stack,l=c.rp1,h=c.rp2,d=c.loop,f=c.z0[l],p=c.z1[h],g=c.fv,m=c.dpv,v=c.z2;d--;){var y=a.pop(),_=v[y];exports.DEBUG&&console.log(c.step,(c.loop>1?"loop "+(c.loop-d)+": ":"")+"IP[]",y,l,"<->",h),g.interpolate(_,f,p,m),g.touch(_)}c.loop=1},ESe.bind(void 0,0),ESe.bind(void 0,1),function gwt(c){for(var a=c.stack,h=c.z0[c.rp0],d=c.loop,f=c.fv,p=c.pv,g=c.z1;d--;){var m=a.pop(),v=g[m];exports.DEBUG&&console.log(c.step,(c.loop>1?"loop "+(c.loop-d)+": ":"")+"ALIGNRP[]",m),f.setRelative(v,h,0,p),f.touch(v)}c.loop=1},function mwt(c){exports.DEBUG&&console.log(c.step,"RTDG[]"),c.round=Pxt},ASe.bind(void 0,0),ASe.bind(void 0,1),function vwt(c){var a=c.prog,l=c.ip,h=c.stack,d=a[++l];exports.DEBUG&&console.log(c.step,"NPUSHB[]",d);for(var f=0;f<d;f++)h.push(a[++l]);c.ip=l},function ywt(c){var a=c.ip,l=c.prog,h=c.stack,d=l[++a];exports.DEBUG&&console.log(c.step,"NPUSHW[]",d);for(var f=0;f<d;f++){var p=l[++a]<<8|l[++a];32768&p&&(p=-(1+(65535^p))),h.push(p)}c.ip=a},function _wt(c){var a=c.stack,l=c.store;l||(l=c.store=[]);var h=a.pop(),d=a.pop();exports.DEBUG&&console.log(c.step,"WS",h,d),l[d]=h},function bwt(c){var a=c.stack,l=c.store,h=a.pop();exports.DEBUG&&console.log(c.step,"RS",h),a.push(l&&l[h]||0)},function Cwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"WCVTP",l,h),c.cvt[h]=l/64},function Swt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"RCVT",l),a.push(64*c.cvt[l])},ISe.bind(void 0,0),ISe.bind(void 0,1),void 0,PSe.bind(void 0,0),PSe.bind(void 0,1),function xwt(c){exports.DEBUG&&console.log(c.step,"MPPEM[]"),c.stack.push(c.ppem)},void 0,function wwt(c){exports.DEBUG&&console.log(c.step,"FLIPON[]"),c.autoFlip=!0},void 0,void 0,function Owt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"LT[]",l,h),a.push(h<l?1:0)},function Dwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"LTEQ[]",l,h),a.push(h<=l?1:0)},function Twt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"GT[]",l,h),a.push(h>l?1:0)},function kwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"GTEQ[]",l,h),a.push(h>=l?1:0)},function Mwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"EQ[]",l,h),a.push(l===h?1:0)},function Ewt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"NEQ[]",l,h),a.push(l!==h?1:0)},function Awt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"ODD[]",l),a.push(Math.trunc(l)%2?1:0)},function Iwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"EVEN[]",l),a.push(Math.trunc(l)%2?0:1)},function Pwt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"IF[]",a),a||(_Se(c,!0),exports.DEBUG&&console.log(c.step,"EIF[]"))},function Rwt(c){exports.DEBUG&&console.log(c.step,"EIF[]")},function Fwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"AND[]",l,h),a.push(l&&h?1:0)},function Lwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"OR[]",l,h),a.push(l||h?1:0)},function Nwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"NOT[]",l),a.push(l?0:1)},AG.bind(void 0,1),function Bwt(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"SDB[]",l),c.deltaBase=l},function Vwt(c){var l=c.stack.pop();exports.DEBUG&&console.log(c.step,"SDS[]",l),c.deltaShift=Math.pow(.5,l)},function Uwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"ADD[]",l,h),a.push(h+l)},function zwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"SUB[]",l,h),a.push(h-l)},function Hwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"DIV[]",l,h),a.push(64*h/l)},function $wt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"MUL[]",l,h),a.push(h*l/64)},function Wwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"ABS[]",l),a.push(Math.abs(l))},function Gwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"NEG[]",l),a.push(-l)},function Qwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"FLOOR[]",l),a.push(64*Math.floor(l/64))},function jwt(c){var a=c.stack,l=a.pop();exports.DEBUG&&console.log(c.step,"CEILING[]",l),a.push(64*Math.ceil(l/64))},OP.bind(void 0,0),OP.bind(void 0,1),OP.bind(void 0,2),OP.bind(void 0,3),void 0,void 0,void 0,void 0,function Zwt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"WCVTF[]",l,h),c.cvt[h]=l*c.ppem/c.font.unitsPerEm},AG.bind(void 0,2),AG.bind(void 0,3),IG.bind(void 0,1),IG.bind(void 0,2),IG.bind(void 0,3),function qwt(c){var l,a=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"SROUND[]",a),c.round=ySe,192&a){case 0:l=.5;break;case 64:l=1;break;case 128:l=2;break;default:throw new Error("invalid SROUND value")}switch(c.srPeriod=l,48&a){case 0:c.srPhase=0;break;case 16:c.srPhase=.25*l;break;case 32:c.srPhase=.5*l;break;case 48:c.srPhase=.75*l;break;default:throw new Error("invalid SROUND value")}c.srThreshold=0==(a&=15)?0:(a/8-.5)*l},function Xwt(c){var l,a=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"S45ROUND[]",a),c.round=ySe,192&a){case 0:l=Math.sqrt(2)/2;break;case 64:l=Math.sqrt(2);break;case 128:l=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(c.srPeriod=l,48&a){case 0:c.srPhase=0;break;case 16:c.srPhase=.25*l;break;case 32:c.srPhase=.5*l;break;case 48:c.srPhase=.75*l;break;default:throw new Error("invalid S45ROUND value")}c.srThreshold=0==(a&=15)?0:(a/8-.5)*l},void 0,void 0,function Ywt(c){exports.DEBUG&&console.log(c.step,"ROFF[]"),c.round=Ixt},void 0,function Kwt(c){exports.DEBUG&&console.log(c.step,"RUTG[]"),c.round=Fxt},function Jwt(c){exports.DEBUG&&console.log(c.step,"RDTG[]"),c.round=Lxt},EG,EG,void 0,void 0,void 0,void 0,void 0,function eOt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"SCANCTRL[]",a)},RSe.bind(void 0,0),RSe.bind(void 0,1),function tOt(c){var a=c.stack,l=a.pop(),h=0;exports.DEBUG&&console.log(c.step,"GETINFO[]",l),1&l&&(h=35),32&l&&(h|=4096),a.push(h)},void 0,function nOt(c){var a=c.stack,l=a.pop(),h=a.pop(),d=a.pop();exports.DEBUG&&console.log(c.step,"ROLL[]"),a.push(h),a.push(l),a.push(d)},function iOt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"MAX[]",l,h),a.push(Math.max(h,l))},function rOt(c){var a=c.stack,l=a.pop(),h=a.pop();exports.DEBUG&&console.log(c.step,"MIN[]",l,h),a.push(Math.min(h,l))},function sOt(c){var a=c.stack.pop();exports.DEBUG&&console.log(c.step,"SCANTYPE[]",a)},function oOt(c){var a=c.stack.pop(),l=c.stack.pop();switch(exports.DEBUG&&console.log(c.step,"INSTCTRL[]",a,l),a){case 1:return void(c.inhibitGridFit=!!l);case 2:return void(c.ignoreCvt=!!l);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,am.bind(void 0,1),am.bind(void 0,2),am.bind(void 0,3),am.bind(void 0,4),am.bind(void 0,5),am.bind(void 0,6),am.bind(void 0,7),am.bind(void 0,8),lm.bind(void 0,1),lm.bind(void 0,2),lm.bind(void 0,3),lm.bind(void 0,4),lm.bind(void 0,5),lm.bind(void 0,6),lm.bind(void 0,7),lm.bind(void 0,8),Fn.bind(void 0,0,0,0,0,0),Fn.bind(void 0,0,0,0,0,1),Fn.bind(void 0,0,0,0,0,2),Fn.bind(void 0,0,0,0,0,3),Fn.bind(void 0,0,0,0,1,0),Fn.bind(void 0,0,0,0,1,1),Fn.bind(void 0,0,0,0,1,2),Fn.bind(void 0,0,0,0,1,3),Fn.bind(void 0,0,0,1,0,0),Fn.bind(void 0,0,0,1,0,1),Fn.bind(void 0,0,0,1,0,2),Fn.bind(void 0,0,0,1,0,3),Fn.bind(void 0,0,0,1,1,0),Fn.bind(void 0,0,0,1,1,1),Fn.bind(void 0,0,0,1,1,2),Fn.bind(void 0,0,0,1,1,3),Fn.bind(void 0,0,1,0,0,0),Fn.bind(void 0,0,1,0,0,1),Fn.bind(void 0,0,1,0,0,2),Fn.bind(void 0,0,1,0,0,3),Fn.bind(void 0,0,1,0,1,0),Fn.bind(void 0,0,1,0,1,1),Fn.bind(void 0,0,1,0,1,2),Fn.bind(void 0,0,1,0,1,3),Fn.bind(void 0,0,1,1,0,0),Fn.bind(void 0,0,1,1,0,1),Fn.bind(void 0,0,1,1,0,2),Fn.bind(void 0,0,1,1,0,3),Fn.bind(void 0,0,1,1,1,0),Fn.bind(void 0,0,1,1,1,1),Fn.bind(void 0,0,1,1,1,2),Fn.bind(void 0,0,1,1,1,3),Fn.bind(void 0,1,0,0,0,0),Fn.bind(void 0,1,0,0,0,1),Fn.bind(void 0,1,0,0,0,2),Fn.bind(void 0,1,0,0,0,3),Fn.bind(void 0,1,0,0,1,0),Fn.bind(void 0,1,0,0,1,1),Fn.bind(void 0,1,0,0,1,2),Fn.bind(void 0,1,0,0,1,3),Fn.bind(void 0,1,0,1,0,0),Fn.bind(void 0,1,0,1,0,1),Fn.bind(void 0,1,0,1,0,2),Fn.bind(void 0,1,0,1,0,3),Fn.bind(void 0,1,0,1,1,0),Fn.bind(void 0,1,0,1,1,1),Fn.bind(void 0,1,0,1,1,2),Fn.bind(void 0,1,0,1,1,3),Fn.bind(void 0,1,1,0,0,0),Fn.bind(void 0,1,1,0,0,1),Fn.bind(void 0,1,1,0,0,2),Fn.bind(void 0,1,1,0,0,3),Fn.bind(void 0,1,1,0,1,0),Fn.bind(void 0,1,1,0,1,1),Fn.bind(void 0,1,1,0,1,2),Fn.bind(void 0,1,1,0,1,3),Fn.bind(void 0,1,1,1,0,0),Fn.bind(void 0,1,1,1,0,1),Fn.bind(void 0,1,1,1,0,2),Fn.bind(void 0,1,1,1,0,3),Fn.bind(void 0,1,1,1,1,0),Fn.bind(void 0,1,1,1,1,1),Fn.bind(void 0,1,1,1,1,2),Fn.bind(void 0,1,1,1,1,3)],sC.prototype.setState=function(c,a){return this.state[c]=a,this.activeState={key:c,value:this.state[c]},this.activeState},sC.prototype.getState=function(c){return this.state[c]||null},to.prototype.inboundIndex=function(c){return c>=0&&c<this.tokens.length},to.prototype.composeRUD=function(c){var a=this,h=c.map(function(f){return a[f[0]].apply(a,f.slice(1).concat(!0))}),d=function(f){return"object"==typeof f&&f.hasOwnProperty("FAIL")};if(h.every(d))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:h.filter(d)};this.dispatch("composeRUD",[h.filter(function(f){return!d(f)})])},to.prototype.replaceRange=function(c,a,l,h){a=null!==a?a:this.tokens.length;var d=l.every(function(p){return p instanceof sC});if(!isNaN(c)&&this.inboundIndex(c)&&d){var f=this.tokens.splice.apply(this.tokens,[c,a].concat(l));return h||this.dispatch("replaceToken",[c,a,l]),[f,l]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},to.prototype.replaceToken=function(c,a,l){if(!isNaN(c)&&this.inboundIndex(c)&&a instanceof sC){var h=this.tokens.splice(c,1,a);return l||this.dispatch("replaceToken",[c,a]),[h[0],a]}return{FAIL:"replaceToken: invalid token or index."}},to.prototype.removeRange=function(c,a,l){a=isNaN(a)?this.tokens.length:a;var h=this.tokens.splice(c,a);return l||this.dispatch("removeRange",[h,c,a]),h},to.prototype.removeToken=function(c,a){if(!isNaN(c)&&this.inboundIndex(c)){var l=this.tokens.splice(c,1);return a||this.dispatch("removeToken",[l,c]),l}return{FAIL:"removeToken: invalid token index."}},to.prototype.insertToken=function(c,a,l){return c.every(function(d){return d instanceof sC})?(this.tokens.splice.apply(this.tokens,[a,0].concat(c)),l||this.dispatch("insertToken",[c,a]),c):{FAIL:"insertToken: invalid token(s)."}},to.prototype.registerModifier=function(c,a,l){this.events.newToken.subscribe(function(h,d){if(null===a||!0===a.apply(this,[h,d])){var m=l.apply(this,[h,d]);h.setState(c,m)}}),this.registeredModifiers.push(c)},DP.prototype.subscribe=function(c){return"function"==typeof c?this.subscribers.push(c)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},DP.prototype.unsubscribe=function(c){this.subscribers.splice(c,1)},Hh.prototype.setCurrentIndex=function(c){this.index=c,this.current=this.context[c],this.backtrack=this.context.slice(0,c),this.lookahead=this.context.slice(c+1)},Hh.prototype.get=function(c){switch(!0){case 0===c:return this.current;case c<0&&Math.abs(c)<=this.backtrack.length:return this.backtrack.slice(c)[0];case c>0&&c<=this.lookahead.length:return this.lookahead[c-1];default:return null}},to.prototype.rangeToText=function(c){if(c instanceof PG)return this.getRangeTokens(c).map(function(a){return a.char}).join("")},to.prototype.getText=function(){return this.tokens.map(function(c){return c.char}).join("")},to.prototype.getContext=function(c){return this.registeredContexts[c]||null},to.prototype.on=function(c,a){var l=this.events[c];return l?l.subscribe(a):null},to.prototype.dispatch=function(c,a){var l=this,h=this.events[c];h instanceof DP&&h.subscribers.forEach(function(d){d.apply(l,a||[])})},to.prototype.registerContextChecker=function(c,a,l){if(this.getContext(c))return{FAIL:"context name '"+c+"' is already registered."};if("function"!=typeof a)return{FAIL:"missing context start check."};if("function"!=typeof l)return{FAIL:"missing context end check."};var h=new aOt(c,a,l);return this.registeredContexts[c]=h,this.contextCheckers.push(h),h},to.prototype.getRangeTokens=function(c){return[].concat(this.tokens.slice(c.startIndex,c.startIndex+c.endOffset))},to.prototype.getContextRanges=function(c){var a=this.getContext(c);return a?a.ranges:{FAIL:"context checker '"+c+"' is not registered."}},to.prototype.resetContextsRanges=function(){var c=this.registeredContexts;for(var a in c)c.hasOwnProperty(a)&&(c[a].ranges=[])},to.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var c=this.tokens.map(function(h){return h.char}),a=0;a<c.length;a++){var l=new Hh(c,a);this.runContextCheck(l)}this.dispatch("updateContextsRanges",[this.registeredContexts])},to.prototype.setEndOffset=function(c,a){var h=new PG(this.getContext(a).openRange.startIndex,c,a),d=this.getContext(a).ranges;return h.rangeId=a+"."+d.length,d.push(h),this.getContext(a).openRange=null,h},to.prototype.runContextCheck=function(c){var a=this,l=c.index;this.contextCheckers.forEach(function(h){var d=h.contextName,f=a.getContext(d).openRange;if(!f&&h.checkStart(c)&&(f=new PG(l,null,d),a.getContext(d).openRange=f,a.dispatch("contextStart",[d,l])),f&&h.checkEnd(c)){var g=a.setEndOffset(l-f.startIndex+1,d);a.dispatch("contextEnd",[d,g])}})},to.prototype.tokenize=function(c){this.tokens=[],this.resetContextsRanges();var a=Array.from(c);this.dispatch("start");for(var l=0;l<a.length;l++){var h=a[l],d=new Hh(a,l);this.dispatch("next",[d]),this.runContextCheck(d);var f=new sC(h);this.tokens.push(f),this.dispatch("newToken",[f,d])}return this.dispatch("end",[this.tokens]),this.tokens},eu.prototype.getDefaultScriptFeaturesIndexes=function(){for(var c=this.font.tables.gsub.scripts,a=0;a<c.length;a++){var l=c[a];if("DFLT"===l.tag)return l.script.defaultLangSys.featureIndexes}return[]},eu.prototype.getScriptFeaturesIndexes=function(c){if(!this.font.tables.gsub)return[];if(!c)return this.getDefaultScriptFeaturesIndexes();for(var l=this.font.tables.gsub.scripts,h=0;h<l.length;h++){var d=l[h];if(d.tag===c&&d.script.defaultLangSys)return d.script.defaultLangSys.featureIndexes;var f=d.langSysRecords;if(f)for(var p=0;p<f.length;p++){var g=f[p];if(g.tag===c)return g.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},eu.prototype.mapTagsToFeatures=function(c,a){for(var l={},h=0;h<c.length;h++)l[c[h].tag]=c[h].feature;this.features[a].tags=l},eu.prototype.getScriptFeatures=function(c){var a=this.features[c];if(this.features.hasOwnProperty(c))return a;var l=this.getScriptFeaturesIndexes(c);if(!l)return null;var h=this.font.tables.gsub;return a=l.map(function(d){return h.features[d]}),this.features[c]=a,this.mapTagsToFeatures(a,c),a},eu.prototype.getSubstitutionType=function(c,a){return c.lookupType.toString()+a.substFormat.toString()},eu.prototype.getLookupMethod=function(c,a){var l=this;switch(this.getSubstitutionType(c,a)){case"11":return function(d){return uOt.apply(l,[d,a])};case"12":return function(d){return hOt.apply(l,[d,a])};case"63":return function(d){return dOt.apply(l,[d,a])};case"41":return function(d){return fOt.apply(l,[d,a])};case"21":return function(d){return pOt.apply(l,[d,a])};default:throw new Error("lookupType: "+c.lookupType+" - substFormat: "+a.substFormat+" is not yet supported")}},eu.prototype.lookupFeature=function(c){var a=c.contextParams,l=a.index,h=this.getFeature({tag:c.tag,script:c.script});if(!h)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+c.tag+"' for script '"+c.script+"'.");for(var d=this.getFeatureLookups(h),f=[].concat(a.context),p=0;p<d.length;p++)for(var g=d[p],m=this.getLookupSubtables(g),v=0;v<m.length;v++){var y=m[v],_=this.getSubstitutionType(g,y),b=this.getLookupMethod(g,y),C=void 0;switch(_){case"11":(C=b(a.current))&&f.splice(l,1,new Av({id:11,tag:c.tag,substitution:C}));break;case"12":(C=b(a.current))&&f.splice(l,1,new Av({id:12,tag:c.tag,substitution:C}));break;case"63":C=b(a),Array.isArray(C)&&C.length&&f.splice(l,1,new Av({id:63,tag:c.tag,substitution:C}));break;case"41":(C=b(a))&&f.splice(l,1,new Av({id:41,tag:c.tag,substitution:C}));break;case"21":(C=b(a.current))&&f.splice(l,1,new Av({id:21,tag:c.tag,substitution:C}))}a=new Hh(f,l),(!Array.isArray(C)||C.length)&&(C=null)}return f.length?f:null},eu.prototype.supports=function(c){if(!c.script)return!1;this.getScriptFeatures(c.script);var a=this.features.hasOwnProperty(c.script);if(!c.tag)return a;var l=this.features[c.script].some(function(h){return h.tag===c.tag});return a&&l},eu.prototype.getLookupSubtables=function(c){return c.subtables||null},eu.prototype.getLookupByIndex=function(c){return this.font.tables.gsub.lookups[c]||null},eu.prototype.getFeatureLookups=function(c){return c.lookupListIndexes.map(this.getLookupByIndex.bind(this))},eu.prototype.getFeature=function(a){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(a.script)||this.getScriptFeatures(a.script);var l=this.features[a.script];return l?l.tags[a.tag]?this.features[a.script].tags[a.tag]:null:{FAIL:"No feature for script "+a.script}};var vOt={startCheck:function gOt(c){var a=c.current,l=c.get(-1);return null===l&&cm(a)||!cm(l)&&cm(a)},endCheck:function mOt(c){var a=c.get(1);return null===a||!cm(a)}},bOt={startCheck:function yOt(c){var a=c.current,l=c.get(-1);return(cm(a)||um(a))&&!cm(l)},endCheck:function _Ot(c){var a=c.get(1);switch(!0){case null===a:return!0;case!cm(a)&&!um(a):var l=function cOt(c){return/\s/.test(c)}(a);if(!l)return!0;if(l&&!c.lookahead.some(function(d){return cm(d)||um(d)}))return!0;break;default:return!1}}},LSe={11:function COt(c,a,l){a[l].setState(c.tag,c.substitution)},12:function SOt(c,a,l){a[l].setState(c.tag,c.substitution)},63:function xOt(c,a,l){c.substitution.forEach(function(h,d){a[l+d].setState(c.tag,h)})},41:function wOt(c,a,l){var h=a[l];h.setState(c.tag,c.substitution.ligGlyph);for(var d=c.substitution.components.length,f=0;f<d;f++)(h=a[l+f+1]).setState("deleted",!0)}};function FG(c,a,l){c instanceof Av&&LSe[c.id]&&LSe[c.id](c,a,l)}function TOt(c){var a=this,l="arab",h=this.featuresTags[l],d=this.tokenizer.getRangeTokens(c);if(1!==d.length){var f=new Hh(d.map(function(g){return g.getState("glyphIndex")}),0),p=new Hh(d.map(function(g){return g.char}),0);d.forEach(function(g,m){if(!um(g.char)){f.setCurrentIndex(m),p.setCurrentIndex(m);var y,v=0;switch(function OOt(c){for(var a=[].concat(c.backtrack),l=a.length-1;l>=0;l--){var h=a[l],d=FSe(h),f=um(h);if(!d&&!f)return!0;if(d)return!1}return!1}(p)&&(v|=1),function DOt(c){if(FSe(c.current))return!1;for(var a=0;a<c.lookahead.length;a++)if(!um(c.lookahead[a]))return!0;return!1}(p)&&(v|=2),v){case 1:y="fina";break;case 2:y="init";break;case 3:y="medi"}if(-1!==h.indexOf(y)){var _=a.query.lookupFeature({tag:y,script:l,contextParams:f});if(_ instanceof Error)return console.info(_.message);_.forEach(function(b,C){b instanceof Av&&(FG(b,d,C),f.context[C]=b.substitution)})}}})}}function NSe(c,a){return new Hh(c.map(function(h){return h.activeState.value}),a||0)}function kOt(c){var a=this,h=this.tokenizer.getRangeTokens(c),d=NSe(h);d.context.forEach(function(f,p){d.setCurrentIndex(p);var g=a.query.lookupFeature({tag:"rlig",script:"arab",contextParams:d});g.length&&(g.forEach(function(m){return FG(m,h,p)}),d=NSe(h))})}var AOt={startCheck:function MOt(c){var a=c.current,l=c.get(-1);return null===l&&TP(a)||!TP(l)&&TP(a)},endCheck:function EOt(c){var a=c.get(1);return null===a||!TP(a)}};function BSe(c,a){return new Hh(c.map(function(h){return h.activeState.value}),a||0)}function IOt(c){var a=this,h=this.tokenizer.getRangeTokens(c),d=BSe(h);d.context.forEach(function(f,p){d.setCurrentIndex(p);var g=a.query.lookupFeature({tag:"liga",script:"latn",contextParams:d});g.length&&(g.forEach(function(m){return FG(m,h,p)}),d=BSe(h))})}function $h(c){this.baseDir=c||"ltr",this.tokenizer=new to,this.featuresTags={}}function LG(c){var a=this.contextChecks[c+"Check"];return this.tokenizer.registerContextChecker(c,a.startCheck,a.endCheck)}function POt(){return LG.call(this,"latinWord"),LG.call(this,"arabicWord"),LG.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function ROt(){var c=this;this.tokenizer.getContextRanges("arabicSentence").forEach(function(l){var h=c.tokenizer.getRangeTokens(l);c.tokenizer.replaceRange(l.startIndex,l.endOffset,h.reverse())})}function NG(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function FOt(){var c=this;this.featuresTags.hasOwnProperty("arab")&&(NG.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(h){TOt.call(c,h)}))}function LOt(){var c=this,a="arab";this.featuresTags.hasOwnProperty(a)&&-1!==this.featuresTags[a].indexOf("rlig")&&(NG.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(d){kOt.call(c,d)}))}function NOt(){var c=this,a="latn";this.featuresTags.hasOwnProperty(a)&&-1!==this.featuresTags[a].indexOf("liga")&&(NG.call(this),this.tokenizer.getContextRanges("latinWord").forEach(function(d){IOt.call(c,d)}))}function jr(c){(c=c||{}).tables=c.tables||{},c.empty||(M2(c.familyName,"When creating a new Font object, familyName is required."),M2(c.styleName,"When creating a new Font object, styleName is required."),M2(c.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),M2(c.ascender,"When creating a new Font object, ascender is required."),M2(c.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:c.familyName||" "},fontSubfamily:{en:c.styleName||" "},fullName:{en:c.fullName||c.familyName+" "+c.styleName},postScriptName:{en:c.postScriptName||(c.familyName+c.styleName).replace(/\s/g,"")},designer:{en:c.designer||" "},designerURL:{en:c.designerURL||" "},manufacturer:{en:c.manufacturer||" "},manufacturerURL:{en:c.manufacturerURL||" "},license:{en:c.license||" "},licenseURL:{en:c.licenseURL||" "},version:{en:c.version||"Version 0.1"},description:{en:c.description||" "},copyright:{en:c.copyright||" "},trademark:{en:c.trademark||" "}},this.unitsPerEm=c.unitsPerEm||1e3,this.ascender=c.ascender,this.descender=c.descender,this.createdTimestamp=c.createdTimestamp,this.tables=Object.assign(c.tables,{os2:Object.assign({usWeightClass:c.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:c.widthClass||this.usWidthClasses.MEDIUM,fsSelection:c.fsSelection||this.fsSelectionValues.REGULAR},c.tables.os2)})),this.supported=!0,this.glyphs=new rf.GlyphSet(this,c.glyphs||[]),this.encoding=new wCe(this),this.position=new k2(this),this.substitution=new Jc(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new mSe(this):void 0}})}function VOt(c,a,l){var h={},d=new Rn.Parser(c,a);return h.tag=d.parseTag(),h.minValue=d.parseFixed(),h.defaultValue=d.parseFixed(),h.maxValue=d.parseFixed(),d.skip("uShort",1),h.name=l[d.parseUShort()]||{},h}function zOt(c,a,l,h){var d={},f=new Rn.Parser(c,a);d.name=h[f.parseUShort()]||{},f.skip("uShort",1),d.coordinates={};for(var p=0;p<l.length;++p)d.coordinates[l[p].tag]=f.parseFixed();return d}$h.prototype.setText=function(c){this.text=c},$h.prototype.contextChecks={latinWordCheck:AOt,arabicWordCheck:vOt,arabicSentenceCheck:bOt},$h.prototype.registerFeatures=function(c,a){var l=this,h=a.filter(function(d){return l.query.supports({script:c,tag:d})});this.featuresTags[c]=this.featuresTags.hasOwnProperty(c)?this.featuresTags[c].concat(h):h},$h.prototype.applyFeatures=function(c,a){if(!c)throw new Error("No valid font was provided to apply features");this.query||(this.query=new eu(c));for(var l=0;l<a.length;l++){var h=a[l];this.query.supports({script:h.script})&&this.registerFeatures(h.script,h.tags)}},$h.prototype.registerModifier=function(c,a,l){this.tokenizer.registerModifier(c,a,l)},$h.prototype.checkContextReady=function(c){return!!this.tokenizer.getContext(c)},$h.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(FOt.call(this),LOt.call(this)),this.checkContextReady("latinWord")&&NOt.call(this),this.checkContextReady("arabicSentence")&&ROt.call(this)},$h.prototype.processText=function(c){(!this.text||this.text!==c)&&(this.setText(c),POt.call(this),this.applyFeaturesToContexts())},$h.prototype.getBidiText=function(c){return this.processText(c),this.tokenizer.getText()},$h.prototype.getTextGlyphs=function(c){this.processText(c);for(var a=[],l=0;l<this.tokenizer.tokens.length;l++){var h=this.tokenizer.tokens[l];if(!h.state.deleted){var d=h.activeState.value;a.push(Array.isArray(d)?d[0]:d)}}return a},jr.prototype.hasChar=function(c){return null!==this.encoding.charToGlyphIndex(c)},jr.prototype.charToGlyphIndex=function(c){return this.encoding.charToGlyphIndex(c)},jr.prototype.charToGlyph=function(c){var a=this.charToGlyphIndex(c),l=this.glyphs.get(a);return l||(l=this.glyphs.get(0)),l},jr.prototype.updateFeatures=function(c){return this.defaultRenderOptions.features.map(function(a){return"latn"===a.script?{script:"latn",tags:a.tags.filter(function(l){return c[l]})}:a})},jr.prototype.stringToGlyphs=function(c,a){var l=this,h=new $h;h.registerModifier("glyphIndex",null,function(_){return l.charToGlyphIndex(_.char)});var f=a?this.updateFeatures(a.features):this.defaultRenderOptions.features;h.applyFeatures(this,f);for(var p=h.getTextGlyphs(c),g=p.length,m=new Array(g),v=this.glyphs.get(0),y=0;y<g;y+=1)m[y]=this.glyphs.get(p[y])||v;return m},jr.prototype.nameToGlyphIndex=function(c){return this.glyphNames.nameToGlyphIndex(c)},jr.prototype.nameToGlyph=function(c){var a=this.nameToGlyphIndex(c),l=this.glyphs.get(a);return l||(l=this.glyphs.get(0)),l},jr.prototype.glyphIndexToName=function(c){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(c):""},jr.prototype.getKerningValue=function(c,a){c=c.index||c,a=a.index||a;var l=this.position.defaultKerningTables;return l?this.position.getKerningValue(l,c,a):this.kerningPairs[c+","+a]||0},jr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},jr.prototype.forEachGlyph=function(c,a,l,h,d,f){a=void 0!==a?a:0,l=void 0!==l?l:0,h=void 0!==h?h:72,d=Object.assign({},this.defaultRenderOptions,d);var m,p=1/this.unitsPerEm*h,g=this.stringToGlyphs(c,d);if(d.kerning){var v=d.script||this.position.getDefaultScriptName();m=this.position.getKerningTables(v,d.language)}for(var y=0;y<g.length;y+=1){var _=g[y];f.call(this,_,a,l,h,d),_.advanceWidth&&(a+=_.advanceWidth*p),d.kerning&&y<g.length-1&&(a+=(m?this.position.getKerningValue(m,_.index,g[y+1].index):this.getKerningValue(_,g[y+1]))*p),d.letterSpacing?a+=d.letterSpacing*h:d.tracking&&(a+=d.tracking/1e3*h)}return a},jr.prototype.getPath=function(c,a,l,h,d){var f=new Mo;return this.forEachGlyph(c,a,l,h,d,function(p,g,m,v){var y=p.getPath(g,m,v,d,this);f.extend(y)}),f},jr.prototype.getPaths=function(c,a,l,h,d){var f=[];return this.forEachGlyph(c,a,l,h,d,function(p,g,m,v){var y=p.getPath(g,m,v,d,this);f.push(y)}),f},jr.prototype.getAdvanceWidth=function(c,a,l){return this.forEachGlyph(c,0,0,a,l,function(){})},jr.prototype.draw=function(c,a,l,h,d,f){this.getPath(a,l,h,d,f).draw(c)},jr.prototype.drawPoints=function(c,a,l,h,d,f){this.forEachGlyph(a,l,h,d,f,function(p,g,m,v){p.drawPoints(c,g,m,v)})},jr.prototype.drawMetrics=function(c,a,l,h,d,f){this.forEachGlyph(a,l,h,d,f,function(p,g,m,v){p.drawMetrics(c,g,m,v)})},jr.prototype.getEnglishName=function(c){var a=this.names[c];if(a)return a.en},jr.prototype.validate=function(){var c=this;function l(h){var d=c.getEnglishName(h);d&&d.trim()}l("fontFamily"),l("weightName"),l("manufacturer"),l("copyright"),l("version")},jr.prototype.toTables=function(){return wxt_fontToTable(this)},jr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},jr.prototype.toArrayBuffer=function(){for(var a=this.toTables().encode(),l=new ArrayBuffer(a.length),h=new Uint8Array(l),d=0;d<a.length;d++)h[d]=a[d];return l},jr.prototype.download=function(c){var a=this.getEnglishName("fontFamily"),l=this.getEnglishName("fontSubfamily");c=c||a.replace(/\s/g,"")+"-"+l+".otf";var h=this.toArrayBuffer();if(function Dxt(){return typeof window<"u"}())if(window.URL=window.URL||window.webkitURL,window.URL){var d=new DataView(h),f=new Blob([d],{type:"font/opentype"}),p=document.createElement("a");p.href=window.URL.createObjectURL(f),p.download=c;var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!1),p.dispatchEvent(g)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var m=require("fs"),v=function Txt(c){for(var a=new Buffer(c.byteLength),l=new Uint8Array(c),h=0;h<a.length;++h)a[h]=l[h];return a}(h);m.writeFileSync(c,v)}},jr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},jr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},jr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var WOt_parse=function $Ot(c,a,l){var h=new Rn.Parser(c,a),d=h.parseULong();Xn.argument(65536===d,"Unsupported fvar table version.");var f=h.parseOffset16();h.skip("uShort",1);for(var p=h.parseUShort(),g=h.parseUShort(),m=h.parseUShort(),v=h.parseUShort(),y=[],_=0;_<p;_++)y.push(VOt(c,a+f+_*g,l));for(var b=[],C=a+f+p*g,x=0;x<m;x++)b.push(zOt(c,C+x*v,y,l));return{axes:y,instances:b}},GOt=function(){return{coverage:this.parsePointer(lt.coverage),attachPoints:this.parseList(lt.pointer(lt.uShortList))}},QOt=function(){var c=this.parseUShort();return Xn.argument(1===c||2===c||3===c,"Unsupported CaretValue table version."),1===c?{coordinate:this.parseShort()}:2===c?{pointindex:this.parseShort()}:3===c?{coordinate:this.parseShort()}:void 0},jOt=function(){return this.parseList(lt.pointer(QOt))},ZOt=function(){return{coverage:this.parsePointer(lt.coverage),ligGlyphs:this.parseList(lt.pointer(jOt))}},qOt=function(){return this.parseUShort(),this.parseList(lt.pointer(lt.coverage))},YOt_parse=function XOt(c,a){var l=new lt(c,a=a||0),h=l.parseVersion(1);Xn.argument(1===h||1.2===h||1.3===h,"Unsupported GDEF table version.");var d={version:h,classDef:l.parsePointer(lt.classDef),attachList:l.parsePointer(GOt),ligCaretList:l.parsePointer(ZOt),markAttachClassDef:l.parsePointer(lt.classDef)};return h>=1.2&&(d.markGlyphSets=l.parsePointer(qOt)),d},Wh=new Array(10);Wh[1]=function(){var a=this.offset+this.relativeOffset,l=this.parseUShort();return 1===l?{posFormat:1,coverage:this.parsePointer(lt.coverage),value:this.parseValueRecord()}:2===l?{posFormat:2,coverage:this.parsePointer(lt.coverage),values:this.parseValueRecordList()}:void Xn.assert(!1,"0x"+a.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Wh[2]=function(){var a=this.offset+this.relativeOffset,l=this.parseUShort();Xn.assert(1===l||2===l,"0x"+a.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var h=this.parsePointer(lt.coverage),d=this.parseUShort(),f=this.parseUShort();if(1===l)return{posFormat:l,coverage:h,valueFormat1:d,valueFormat2:f,pairSets:this.parseList(lt.pointer(lt.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(d),value2:this.parseValueRecord(f)}})))};if(2===l){var p=this.parsePointer(lt.classDef),g=this.parsePointer(lt.classDef),m=this.parseUShort(),v=this.parseUShort();return{posFormat:l,coverage:h,valueFormat1:d,valueFormat2:f,classDef1:p,classDef2:g,class1Count:m,class2Count:v,classRecords:this.parseList(m,lt.list(v,function(){return{value1:this.parseValueRecord(d),value2:this.parseValueRecord(f)}}))}}},Wh[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Wh[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Wh[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Wh[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Wh[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Wh[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Wh[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var t2t_parse=function KOt(c,a){var l=new lt(c,a=a||0),h=l.parseVersion(1);return Xn.argument(1===h||1.1===h,"Unsupported GPOS table version "+h),1===h?{version:h,scripts:l.parseScriptList(),features:l.parseFeatureList(),lookups:l.parseLookupList(Wh)}:{version:h,scripts:l.parseScriptList(),features:l.parseFeatureList(),lookups:l.parseLookupList(Wh),variations:l.parseFeatureVariationsList()}},s2t_parse=function r2t(c,a){var l=new Rn.Parser(c,a),h=l.parseUShort();if(0===h)return function n2t(c){var a={};c.skip("uShort");var l=c.parseUShort();Xn.argument(0===l,"Unsupported kern sub-table version."),c.skip("uShort",2);var h=c.parseUShort();c.skip("uShort",3);for(var d=0;d<h;d+=1){var f=c.parseUShort(),p=c.parseUShort(),g=c.parseShort();a[f+","+p]=g}return a}(l);if(1===h)return function i2t(c){var a={};c.skip("uShort"),c.parseULong()>1&&console.warn("Only the first kern subtable is supported."),c.skip("uLong");var d=255&c.parseUShort();if(c.skip("uShort"),0===d){var f=c.parseUShort();c.skip("uShort",3);for(var p=0;p<f;p+=1){var g=c.parseUShort(),m=c.parseUShort(),v=c.parseShort();a[g+","+m]=v}}return a}(l);throw new Error("Unsupported kern table version ("+h+").")},a2t_parse=function o2t(c,a,l,h){for(var d=new Rn.Parser(c,a),f=h?d.parseUShort:d.parseULong,p=[],g=0;g<l+1;g+=1){var m=f.call(d);h&&(m*=2),p.push(m)}return p};function l2t(c,a){require("fs").readFile(c,function(h,d){if(h)return a(h.message);a(null,lSe(d))})}function c2t(c,a){var l=new XMLHttpRequest;l.open("get",c,!0),l.responseType="arraybuffer",l.onload=function(){return l.response?a(null,l.response):a("Font could not be loaded: "+l.statusText)},l.onerror=function(){a("Font could not be loaded")},l.send()}function USe(c,a){for(var l=[],h=12,d=0;d<a;d+=1){var f=Rn.getTag(c,h),p=Rn.getULong(c,h+4),g=Rn.getULong(c,h+8),m=Rn.getULong(c,h+12);l.push({tag:f,checksum:p,offset:g,length:m,compression:!1}),h+=16}return l}function Ws(c,a){if("WOFF"===a.compression){var l=new Uint8Array(c.buffer,a.offset+2,a.compressedLength-2),h=new Uint8Array(a.length);if(function XCt(c,a){var h,f,l=new WCt(c,a);do{switch(h=jCt(l),nf(l,2,0)){case 0:f=qCt(l);break;case 1:f=gCe(l,lCe,cCe);break;case 2:ZCt(l,l.ltree,l.dtree),f=gCe(l,l.ltree,l.dtree);break;default:f=-3}if(0!==f)throw new Error("Data error")}while(!h);l.destLen<l.dest.length&&("function"==typeof l.dest.slice?l.dest.slice(0,l.destLen):l.dest.subarray(0,l.destLen))}(l,h),h.byteLength!==a.length)throw new Error("Decompression error: "+a.tag+" decompressed length doesn't match recorded length");return{data:new DataView(h.buffer,0),offset:0}}return{data:c,offset:a.offset}}function BG(c,a){a=a??{};var l,h,p,d=new jr({empty:!0}),f=new DataView(c,0),g=[],m=Rn.getTag(f,0);if(m===String.fromCharCode(0,1,0,0)||"true"===m||"typ1"===m)d.outlinesFormat="truetype",g=USe(f,p=Rn.getUShort(f,4));else if("OTTO"===m)d.outlinesFormat="cff",g=USe(f,p=Rn.getUShort(f,4));else{if("wOFF"!==m)throw new Error("Unsupported OpenType signature "+m);var v=Rn.getTag(f,4);if(v===String.fromCharCode(0,1,0,0))d.outlinesFormat="truetype";else{if("OTTO"!==v)throw new Error("Unsupported OpenType flavor "+m);d.outlinesFormat="cff"}g=function u2t(c,a){for(var l=[],h=44,d=0;d<a;d+=1){var f=Rn.getTag(c,h),p=Rn.getULong(c,h+4),g=Rn.getULong(c,h+8),m=Rn.getULong(c,h+12);l.push({tag:f,offset:p,compression:g<m&&"WOFF",compressedLength:g,length:m}),h+=20}return l}(f,p=Rn.getUShort(f,12))}for(var y,_,b,C,x,w,O,D,T,M,k,E,P=0;P<p;P+=1){var V=g[P],I=void 0;switch(V.tag){case"cmap":I=Ws(f,V),d.tables.cmap=xCe_parse(I.data,I.offset),d.encoding=new OCe(d.tables.cmap);break;case"cvt ":I=Ws(f,V),E=new Rn.Parser(I.data,I.offset),d.tables.cvt=E.parseShortList(V.length/2);break;case"fvar":_=V;break;case"fpgm":I=Ws(f,V),E=new Rn.Parser(I.data,I.offset),d.tables.fpgm=E.parseByteList(V.length);break;case"head":I=Ws(f,V),d.tables.head=VCe_parse(I.data,I.offset),d.unitsPerEm=d.tables.head.unitsPerEm,l=d.tables.head.indexToLocFormat;break;case"hhea":I=Ws(f,V),d.tables.hhea=UCe_parse(I.data,I.offset),d.ascender=d.tables.hhea.ascender,d.descender=d.tables.hhea.descender,d.numberOfHMetrics=d.tables.hhea.numberOfHMetrics;break;case"hmtx":O=V;break;case"ltag":I=Ws(f,V),h=HCe_parse(I.data,I.offset);break;case"COLR":I=Ws(f,V),d.tables.colr=eSe_parse(I.data,I.offset);break;case"CPAL":I=Ws(f,V),d.tables.cpal=tSe_parse(I.data,I.offset);break;case"maxp":I=Ws(f,V),d.tables.maxp=$Ce_parse(I.data,I.offset),d.numGlyphs=d.tables.maxp.numGlyphs;break;case"name":M=V;break;case"OS/2":I=Ws(f,V),d.tables.os2=wG_parse(I.data,I.offset);break;case"post":I=Ws(f,V),d.tables.post=YCe_parse(I.data,I.offset),d.glyphNames=new yG(d.tables.post);break;case"prep":I=Ws(f,V),E=new Rn.Parser(I.data,I.offset),d.tables.prep=E.parseByteList(V.length);break;case"glyf":b=V;break;case"loca":T=V;break;case"CFF ":y=V;break;case"kern":D=V;break;case"GDEF":C=V;break;case"GPOS":x=V;break;case"GSUB":w=V;break;case"meta":k=V}}var U=Ws(f,M);if(d.tables.name=XCe_parse(U.data,U.offset,h),d.names=d.tables.name,b&&T){var $=0===l,H=Ws(f,T),J=a2t_parse(H.data,H.offset,d.numGlyphs,$),ee=Ws(f,b);d.glyphs=fSe.parse(ee.data,ee.offset,J,d,a)}else{if(!y)throw new Error("Font doesn't contain TrueType or CFF outlines.");var B=Ws(f,y);BCe_parse(B.data,B.offset,d,a)}var G=Ws(f,O);if(zCe_parse(d,G.data,G.offset,d.numberOfHMetrics,d.numGlyphs,d.glyphs,a),function ySt(c,a){a.lowMemory?function vSt(c){c._IndexToUnicodeMap={};for(var a=c.tables.cmap.glyphIndexMap,l=Object.keys(a),h=0;h<l.length;h+=1){var d=l[h],f=a[d];void 0===c._IndexToUnicodeMap[f]?c._IndexToUnicodeMap[f]={unicodes:[parseInt(d)]}:c._IndexToUnicodeMap[f].unicodes.push(parseInt(d))}}(c):function mSt(c){for(var a,l=c.tables.cmap.glyphIndexMap,h=Object.keys(l),d=0;d<h.length;d+=1){var f=h[d];(a=c.glyphs.get(l[f])).addUnicode(parseInt(f))}for(var g=0;g<c.glyphs.length;g+=1)a=c.glyphs.get(g),c.cffEncoding?a.name=c.isCIDFont?"gid"+g:c.cffEncoding.charset[g]:c.glyphNames.names&&(a.name=c.glyphNames.glyphIndexToName(g))}(c)}(d,a),D){var W=Ws(f,D);d.kerningPairs=s2t_parse(W.data,W.offset)}else d.kerningPairs={};if(C){var j=Ws(f,C);d.tables.gdef=YOt_parse(j.data,j.offset)}if(x){var Q=Ws(f,x);d.tables.gpos=t2t_parse(Q.data,Q.offset),d.position.init()}if(w){var X=Ws(f,w);d.tables.gsub=KCe_parse(X.data,X.offset)}if(_){var Y=Ws(f,_);d.tables.fvar=WOt_parse(Y.data,Y.offset,d.names)}if(k){var ne=Ws(f,k);d.tables.meta=JCe_parse(ne.data,ne.offset),d.metas=d.tables.meta}return d}var f2t=Object.freeze({__proto__:null,Font:jr,Glyph:Kc,Path:Mo,BoundingBox:Dp,_parse:Rn,parse:BG,load:function h2t(c,a,l){l=l??{};var d=typeof window>"u"&&!l.isUrl?l2t:c2t;return new Promise(function(f,p){d(c,function(g,m){if(g){if(a)return a(g);p(g)}var v;try{v=BG(m,l)}catch(y){if(a)return a(y,null);p(y)}if(a)return a(null,v);f(v)})})},loadSync:function d2t(c,a){return BG(lSe(require("fs").readFileSync(c)),a)}});const zSe=f2t;class p2t extends kbe{constructor(a){super(a),this.reversed=!1}load(a,l,h,d){const f=this,p=new wp(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(a,function(g){try{l(f.parse(g))}catch(m){d?d(m):console.error(m),f.manager.itemError(a)}},h,d)}parse(a){function h(d){const f=[];let p;d.forEach(function(m){"m"===m.type.toLowerCase()?(p=[m],f.push(p)):"z"!==m.type.toLowerCase()&&p.push(m)});const g=[];return f.forEach(function(m){g.push({type:"m",x:m[m.length-1].x,y:m[m.length-1].y});for(let y=m.length-1;y>0;y--){const _=m[y],b={type:_.type};void 0!==_.x2&&void 0!==_.y2?(b.x1=_.x2,b.y1=_.y2,b.x2=_.x1,b.y2=_.y1):void 0!==_.x1&&void 0!==_.y1&&(b.x1=_.x1,b.y1=_.y1),b.x=m[y-1].x,b.y=m[y-1].y,g.push(b)}}),g}return typeof zSe>"u"?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function l(d,f){const p=Math.round,g={},m=1e5/(72*(d.unitsPerEm||2048)),v=d.encoding.cmap.glyphIndexMap,y=Object.keys(v);for(let _=0;_<y.length;_++){const b=y[_],C=d.glyphs.glyphs[v[b]];if(void 0!==b){const x={ha:p(C.advanceWidth*m),x_min:p(C.xMin*m),x_max:p(C.xMax*m),o:""};f&&(C.path.commands=h(C.path.commands)),C.path.commands.forEach(function(w){"c"===w.type.toLowerCase()&&(w.type="b"),x.o+=w.type.toLowerCase()+" ",void 0!==w.x&&void 0!==w.y&&(x.o+=p(w.x*m)+" "+p(w.y*m)+" "),void 0!==w.x1&&void 0!==w.y1&&(x.o+=p(w.x1*m)+" "+p(w.y1*m)+" "),void 0!==w.x2&&void 0!==w.y2&&(x.o+=p(w.x2*m)+" "+p(w.y2*m)+" ")}),g[String.fromCodePoint(C.unicode)]=x}}return{glyphs:g,familyName:d.getEnglishName("fullName"),ascender:p(d.ascender*m),descender:p(d.descender*m),underlinePosition:d.tables.post.underlinePosition,underlineThickness:d.tables.post.underlineThickness,boundingBox:{xMin:d.tables.head.xMin,xMax:d.tables.head.xMax,yMin:d.tables.head.yMin,yMax:d.tables.head.yMax},resolution:1e3,original_font_information:d.tables.name}}(zSe.parse(a),this.reversed)}}class HSe{constructor(a){this.isFont=!0,this.type="Font",this.data=a}generateShapes(a,l=100){const h=[],d=function g2t(c,a,l){const h=Array.from(c),d=a/l.resolution,f=(l.boundingBox.yMax-l.boundingBox.yMin+l.underlineThickness)*d,p=[];let g=0,m=0;for(let v=0;v<h.length;v++){const y=h[v];if("\n"===y)g=0,m-=f;else{const _=m2t(y,d,g,m,l);g+=_.offsetX,p.push(_.path)}}return p}(a,l,this.data);for(let f=0,p=d.length;f<p;f++)h.push(...d[f].toShapes());return h}}function m2t(c,a,l,h,d){const f=d.glyphs[c]||d.glyphs["?"];if(!f)return void console.error('THREE.Font: character "'+c+'" does not exists in font family '+d.familyName+".");const p=new DCt;let g,m,v,y,_,b,C,x;if(f.o){const w=f._cachedOutline||(f._cachedOutline=f.o.split(" "));for(let O=0,D=w.length;O<D;)switch(w[O++]){case"m":g=w[O++]*a+l,m=w[O++]*a+h,p.moveTo(g,m);break;case"l":g=w[O++]*a+l,m=w[O++]*a+h,p.lineTo(g,m);break;case"q":v=w[O++]*a+l,y=w[O++]*a+h,_=w[O++]*a+l,b=w[O++]*a+h,p.quadraticCurveTo(_,b,v,y);break;case"b":v=w[O++]*a+l,y=w[O++]*a+h,_=w[O++]*a+l,b=w[O++]*a+h,C=w[O++]*a+l,x=w[O++]*a+h,p.bezierCurveTo(_,b,C,x,v,y)}}return{offsetX:f.ha*a,path:p}}class v2t extends qb{constructor(a,l={}){const h=l.font;if(void 0===h)super();else{const d=h.generateShapes(a,l.size);l.depth=void 0!==l.height?l.height:50,void 0===l.bevelThickness&&(l.bevelThickness=10),void 0===l.bevelSize&&(l.bevelSize=8),void 0===l.bevelEnabled&&(l.bevelEnabled=!1),super(d,l)}this.type="TextGeometry"}}var Ji=(()=>(function(c){c[c.Left=0]="Left",c[c.Right=1]="Right",c[c.Middle=2]="Middle"}(Ji||(Ji={})),Ji))();class y2t{constructor(){S(this,"scale",1),S(this,"width",100),S(this,"height",100),S(this,"delta",10),S(this,"lineWidth",1),S(this,"lineSizeExtra",1)}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setDelta(a){return this.delta=a,this}clearAll(){return this}}class VG{constructor(a,l){S(this,"name",void 0),S(this,"vertexes",void 0),this.name=a,this.vertexes=l}static builder(){return new VG("",null)}setName(a){return this.name=a,this}setVertexes(a){return this.vertexes=a,this}}class _2t{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(a){return 1/(a*(Math.sqrt(5)+1)/2)}toDegrees(a){return a/Math.PI*180}translation(a,l,h){return(new Oi).makeTranslation(a,l,h)}zRotation(a,l,h,d){const f=new Oi;f.makeRotationZ(a);const p=new Oi;p.makeTranslation(l,h,0);const g=new Oi;return g.identity(),d&&g.scale(d),g.multiply(f.multiply(p))}extrudeShape(a){const h={steps:1,bevelEnabled:!1,extrudePath:new cbe([new ae(0,0,-.1),new ae(0,0,0)])};return new qb(a,h)}extrudePath(a,l,h,d){let f=-l+Math.PI/2,p=[-h,d];const g=[],m=this.zRotation(f,p[0],p[1]);a.forEach(y=>{let b=new pr(y[0],y[1],0,1).applyMatrix4(m);g.push(new yt(b.x,b.y))});const v=new Cp(g);return this.extrudeShape(v)}createTrost(a,l=0,h=0,d=0,f=0,p=0){let g=a.delta/2/4,m=a.height*(1-h)*.8;return this.extrudePath([[-g,0],[-g,m+3*g],[g,m+3*g],[g,0],[-g,0]],.05*Math.PI,4*-a.delta,-a.height/2)}createKopie(a,l=0,h=0,d=0,f=0,p=0){let g=a.delta/2/4,m=a.height*(1-h)*.8;return this.extrudePath([[-g,0],[-g,m+3*g],[g,m+3*g],[g,0],[-g,0]],-.05*Math.PI,4*+a.delta,-a.height/2)}createTri1(a,l,h=0,d=0,f=0,p=0,g=0){let m=l.delta/2/4,v=l.height*(1-d)*.8;return this.extrudePath([[4*-m/2,+v-2*m],[0,+v+2*m],[4*+m/2,+v-2*m],[4*-m/2,+v-2*m]],180*a/20*1/180*Math.PI,a*-l.delta*4,-l.height/2)}createTri2(a,l,h=0,d=0,f=0,p=0,g=0){let m=l.delta/2/4,v=l.height*(1-d)*.8;return this.extrudePath([[4*-m/2,+v-6*m],[0,+v-2*m],[4*+m/2,+v-6*m],[4*-m/2,+v-6*m]],180*a/20*1/180*Math.PI,a*-l.delta*4,-l.height/2)}createTrostNakonechnik(a,l,h=0,d=0,f=0,p=0,g=0){let m=l.delta/2/4,v=l.height*(1-d)*.8,y=l.delta,_=l.height,b=new Cp;b.moveTo(0,+v+2*m);let w=.5,O=[[0,+v+2*m],[5*-m*w,+v+2*m],[5*-m,+v+2*m],[5*-m,+v+8*m],[5*-m,+v+16*m],[5*-m*w,+v+16*m],[0,+v+16*m],[5*+m*w,+v+16*m],[5*+m,+v+16*m],[5*+m,+v+8*m],[5*+m,+v+2*m],[5*+m*w,+v+2*m],[0,+v+2*m]],k=-180*a/20*1/180*Math.PI+Math.PI/2,E=[-a*-y*4,-_/2];const V=this.zRotation(k,E[0],E[1]);let I=O.map(U=>{let H=new pr(U[0],U[1],0,1).applyMatrix4(V);return new yt(H.x,H.y)});return b.moveTo(I[0].x,I[0].y),b.bezierCurveTo(I[1].x,I[1].y,I[2].x,I[2].y,I[3].x,I[3].y),b.bezierCurveTo(I[4].x,I[4].y,I[5].x,I[5].y,I[6].x,I[6].y),b.bezierCurveTo(I[7].x,I[7].y,I[8].x,I[8].y,I[9].x,I[9].y),b.bezierCurveTo(I[10].x,I[10].y,I[11].x,I[11].y,I[12].x,I[12].y),this.extrudeShape(b)}createTri3_2(a,l,h=0,d=0,f=0,p=0,g=0){let m=l.delta/2/4,v=l.height*(1-d)*.8;return this.extrudePath([[0,+v+2*m],[5*-m,+v+2*m],[5*-m,+v+16*m],[0,+v+16*m],[5*+m,+v+16*m],[5*+m,+v+2*m],[0,+v+2*m]],180*a/20*1/180*Math.PI,a*-l.delta*4,-l.height/2)}createKopieNakonechnik(a,l,h=0,d=0,f=0,p=0,g=0){let m=l.delta/2/4,v=l.height*(1-d)*.8;return this.extrudePath([[0,+v-2*m],[2*-m,+v+2*m],[0,+v+16*m],[2*+m,+v+2*m],[0,+v-2*m]],180*a/20*1/180*Math.PI,a*-l.delta*4,-l.height/2)}createSkull(a,l,h=0,d=0,f=0,p=0,g=0){let y=l.delta,_=l.height,b=new Cp,T=0*l.delta/4/2,k=(Vt,Ut)=>Ut*(1.75*l.delta+2*Vt),E=(Vt,Ut)=>Ut*(1.75*l.delta+2*Vt)*.8,ee=.7*k(T,1)/2*.5,B=.7*E(T,1)/2*.5,j=(k(T,1),E(T,1),k(T,1)),Q=E(T,1),Y=.275*j,ne=.9*j/4,re=B/4*2,fe=ee/4*2,De=(Vt,Ut,nt,rn,Kt)=>[[Ut/2,0],[Ut-rn,0],[Ut,Kt],[Ut,nt/2],[Ut,nt-Kt],[Ut-rn,nt],[Ut/2,nt],[rn,nt],[0,nt-Kt],[0,nt/2],[0,Kt],[rn,0],[Ut/2,0]].map(Be=>[Be[0]+Vt.x,Be[1]+Vt.y]),ze=Math.PI/4+Math.PI/2,it=[j/2,-Q/2],Ue=this.zRotation(ze,-it[0],it[1],new ae(-1,1,1)),st=this.zRotation(Math.PI/2,0,-_/2-2*y-y/4),dt=(Vt=new yt(0,0),Ut=j,nt=Q,rn=ee,Kt=B,[[Ut/2,0],[Ut-rn,0],[Ut,Kt],[Ut,nt/2],[Ut,nt-Kt],[Ut/2+Ut/6+.16*Ut,nt-Kt],[Ut/2+Ut/6+.16*Ut,nt],[Ut/2+Ut/6+.16*Ut,nt+Kt],[Ut/2-Ut/4+.16*Ut,nt+Kt],[Ut/2-Ut/4+.16*Ut,nt],[Ut/2-Ut/4+.16*Ut,nt-Kt],[0,nt-Kt],[0,nt/2],[0,Kt],[rn,0],[Ut/2,0]].map(Be=>[Be[0]+Vt.x,Be[1]+Vt.y])).map(Vt=>{let rn=new pr(Vt[0],Vt[1],0,1).applyMatrix4(Ue).applyMatrix4(st);return new yt(rn.x,rn.y)});var Vt,Ut,nt,rn,Kt;b.moveTo(dt[0].x,dt[0].y),b.bezierCurveTo(dt[1].x,dt[1].y,dt[2].x,dt[2].y,dt[3].x,dt[3].y),b.bezierCurveTo(dt[4].x,dt[4].y,dt[5].x,dt[5].y,dt[6].x,dt[6].y),b.bezierCurveTo(dt[7].x,dt[7].y,dt[8].x,dt[8].y,dt[9].x,dt[9].y),b.bezierCurveTo(dt[10].x,dt[10].y,dt[11].x,dt[11].y,dt[12].x,dt[12].y),b.bezierCurveTo(dt[13].x,dt[13].y,dt[14].x,dt[14].y,dt[15].x,dt[15].y);let tt=De(new yt(j/2-j/6,Q/3),Y,ne,fe,re).map(Vt=>{let rn=new pr(Vt[0],Vt[1],0,1).applyMatrix4(Ue).applyMatrix4(st);return new yt(rn.x,rn.y)}),Ie=new Sv;Ie.moveTo(tt[0].x,tt[0].y),Ie.bezierCurveTo(tt[1].x,tt[1].y,tt[2].x,tt[2].y,tt[3].x,tt[3].y),Ie.bezierCurveTo(tt[4].x,tt[4].y,tt[5].x,tt[5].y,tt[6].x,tt[6].y),Ie.bezierCurveTo(tt[7].x,tt[7].y,tt[8].x,tt[8].y,tt[9].x,tt[9].y),Ie.bezierCurveTo(tt[10].x,tt[10].y,tt[11].x,tt[11].y,tt[12].x,tt[12].y),b.holes.push(Ie);let et=De(new yt(j/2+j/6,Q/3),Y,ne,fe,re).map(Vt=>{let rn=new pr(Vt[0],Vt[1],0,1).applyMatrix4(Ue).applyMatrix4(st);return new yt(rn.x,rn.y)}),Gt=new Sv;Gt.moveTo(et[0].x,et[0].y),Gt.bezierCurveTo(et[1].x,et[1].y,et[2].x,et[2].y,et[3].x,et[3].y),Gt.bezierCurveTo(et[4].x,et[4].y,et[5].x,et[5].y,et[6].x,et[6].y),Gt.bezierCurveTo(et[7].x,et[7].y,et[8].x,et[8].y,et[9].x,et[9].y),Gt.bezierCurveTo(et[10].x,et[10].y,et[11].x,et[11].y,et[12].x,et[12].y),b.holes.push(Gt);let Zn=j/4*.6,ye=.9*j/4,ce=.2*Zn,ft=.2*ye,Dt=((Vt,Ut,nt,rn,Kt)=>[[Ut/2,0],[Ut/2+rn,0],[Ut,nt-Kt],[Ut,nt],[Ut,nt+Kt],[0,nt+Kt],[0,nt],[0,nt-Kt],[Ut/2-rn,0],[Ut/2,0]].map(Be=>[Be[0]+Vt.x,Be[1]+Vt.y]))(new yt(j/2+2*Y*.16,Q/3*2*.9),Zn,ye,ce,ft).map(Vt=>{let rn=new pr(Vt[0],Vt[1],0,1).applyMatrix4(Ue).applyMatrix4(st);return new yt(rn.x,rn.y)}),Xt=new Sv;return Xt.moveTo(Dt[0].x,Dt[0].y),Xt.bezierCurveTo(Dt[1].x,Dt[1].y,Dt[2].x,Dt[2].y,Dt[3].x,Dt[3].y),Xt.bezierCurveTo(Dt[4].x,Dt[4].y,Dt[5].x,Dt[5].y,Dt[6].x,Dt[6].y),Xt.bezierCurveTo(Dt[7].x,Dt[7].y,Dt[8].x,Dt[8].y,Dt[9].x,Dt[9].y),b.holes.push(Xt),this.extrudeShape(b)}createCrossParts(a,l=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0){let _=[],C=h,x=d||a.width,w=f||a.height,O=a.delta/a.width*x,D=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),T=x*(p||D),M=y||Math.atan2(1-D,.5),k=T*(g||1-D),E=T*(m||1-D),P=T*(m||.25),V=v?w*v+P*Math.tan(M):w-T/2,I=eC.builder(),U=(J,ee,B,G,W,j)=>{I.addPlaneXY(ee,B,G,W,j),_.push(VG.builder().setVertexes(I).setName(J)),I=eC.builder()};U("\u043a\u0440\u0435\u0441\u0442",new ae(-O/2,w/2,0),O,w),U("\u043a\u0440\u0435\u0441\u0442",new ae(-T/2,w/2-(k-O/2),0),T,O),U("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439",new ae(-E/2,w/2-(C+(g?(T*(g||1-D)-O/2)/2:T*Math.pow(1-D,2))-O/2),0),E,O),U("\u043a\u0440\u0435\u0441\u0442",new ae(-P/2,w/2-(V-P/Math.cos(M)/2)-O,0),P,O/Math.cos(M),0,M);let $=.55*a.width,H=1.5/a.width;return U("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new ae(-$/2,-a.height/2+H,0),$,a.delta+H),U("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new ae(-$/2-a.delta/2*3,-a.height/2-a.delta+H,0),2.5*a.delta,a.delta+H),U("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new ae(+$/2-a.delta,-a.height/2-a.delta+H,0),2.5*a.delta,a.delta+H),U("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new ae(-$/2-a.delta/2*3,-a.height/2-2*a.delta+H,0),a.delta,a.delta+H),U("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new ae(+$/2+a.delta/2,-a.height/2-2*a.delta+H,0),a.delta,a.delta+H),_}createCross(a,l=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0){let _=eC.builder();return _.vertexes=this.createCrossParts(a,l,h,d,f,p,g,m,v,y).flatMap(b=>b.vertexes.vertexes),_}createConfig(){return new y2t}createTextDirect(a,l,h,d,f){let C=new v2t(l,{font:a,size:h,height:h/10,curveSegments:4,bevelThickness:h/100,bevelSize:h/100,bevelEnabled:!1});C.computeBoundingBox(),C.computeVertexNormals();let x=0;switch(f){case Ji.Left:x=0;break;case Ji.Right:x=-(C.boundingBox.max.x-C.boundingBox.min.x);break;case Ji.Middle:x=-.5*(C.boundingBox.max.x-C.boundingBox.min.x)}const w=new co({color:16777215,transparent:!0});let O=new fr(C,w);return O.position.x=d.x-C.boundingBox.min.x+x,O.position.y=d.y,O.position.z=d.z,O.rotation.x=0,O.rotation.y=0,O}createText(a,l,h,d=0,f=0,p=0,g=0,m=0,v=0,y=0,_=0,b=0){let C=(De,we,Fe="",qe=1,Le=0,ze=0)=>{a(De,we,Fe,qe,Le,ze)},x=p||h.width,w=g||h.height,O=h.delta/h.width*x,D=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),T=x*(m||D),M=b||Math.atan2(1-D,.5),k=T*(v||1-D),E=T*(y||1-D),P=T*(y||.25),V=_?w*_+P*Math.tan(M):w-T/2,I=0,U=w/2+4*O,$=this.createTextDirect(l,"\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b",O,new ae(I,U,0),Ji.Middle),H=this.createTextDirect(l,"\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441",O,new ae(I,U,0),Ji.Middle),J=this.createTextDirect(l,"\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439",O,new ae(I,U,0),Ji.Middle),ee=this.createTextDirect(l,"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c",O,new ae(I,U,0),Ji.Middle),B=this.createTextDirect(l,"\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",O,new ae(I,U,0),Ji.Middle),G=this.createTextDirect(l,"\u043a\u043e\u043f\u0438\u0435",O,new ae(I,U,0),Ji.Middle),W=this.createTextDirect(l,"\u0442\u0440\u043e\u0441\u0442\u044c",O,new ae(I,U,0),Ji.Middle),j=this.createTextDirect(l,"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430",O,new ae(I,U,0),Ji.Middle),Q=this.createTextDirect(l,"\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435",O,new ae(I,U,0),Ji.Middle),X=this.createTextDirect(l,"\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c",O,new ae(I,U,0),Ji.Middle);I=-E/2,U=w/2+O,C(this.createTextDirect(l,"\u0446\u0440\u0483\u044c",O,new ae(I,U,0),Ji.Right),$),C(this.createTextDirect(l,"\u0441\u043b\u0483\u0432\u044b",O,new ae(I+E,U,0),Ji.Left),$),I=-T/2,U=w/2-(k-O/2)+O/2,C(this.createTextDirect(l,"\u0406\u0421",O,new ae(I,U,0),Ji.Left),H),C(this.createTextDirect(l,"\u0483",O,new ae(I+.2*O,U+.6*O,0),Ji.Left),H),C(this.createTextDirect(l,"\u0425\u0421",O,new ae(I+T,U,0),Ji.Right),H),C(this.createTextDirect(l,"\u0483",O,new ae(I+T-1.1*O,U+.6*O,0),Ji.Left),H),U-=3*O,C(this.createTextDirect(l,"\u0441\u043d\u0483\u044a",O,new ae(I,U,0),Ji.Middle),J),C(this.createTextDirect(l,"\u0431\u0436\u0483\u0457\u0439",O,new ae(I+T,U,0),Ji.Middle),J),I=-O/2,U=(w/2-(V-P/Math.cos(M)/2)-O+w/2-(k-O/2)+O/2)/2-O/2,C(this.createTextDirect(l,"\u043d\u0438",O,new ae(I-O/2,U,0),Ji.Right),ee),C(this.createTextDirect(l,"\u043a\u0430",O,new ae(I+O+.3*O,U,0),Ji.Left),ee);let Y=.55*h.width,ne=h.delta,re=ne/2*3/2;I=-Y/2,U=-h.height/2,C(this.createTextDirect(l,"\u0433",O,new ae(I-re,U,0),Ji.Middle),B),C(this.createTextDirect(l,"\u0433",O,new ae(I+re+Y,U,0),Ji.Middle),B),U=.3*-(k-O/2),C(this.createTextDirect(l,"\u043a",O,new ae(I-re,U,0),Ji.Middle),G),C(this.createTextDirect(l,"\u0442",O,new ae(I+re+Y,U,0),Ji.Middle),W),I=-Y/2*.5,U=-h.height/2-2.5*ne,C(this.createTextDirect(l,"\u0433",O,new ae(I,U,0),Ji.Middle),j),I=Y/2*.5,C(this.createTextDirect(l,"\u0430",O,new ae(I,U,0),Ji.Middle),j);let fe=w/2-(V+P*Math.tan(M)/2+h.delta/Math.cos(M)/2),de=w/2-(h.height+V+P*Math.tan(M)/2+h.delta/Math.cos(M)/2)/2;I=-Y/2*.5,U=fe-O/2,C(this.createTextDirect(l,"\u043c",O,new ae(I,U,0),Ji.Middle),Q),I=Y/2*.5,C(this.createTextDirect(l,"\u043b",O,new ae(I,U,0),Ji.Middle),Q),I=-Y/2*.5,U=de-O/2,C(this.createTextDirect(l,"\u0440",O,new ae(I,U,0),Ji.Middle),X),I=Y/2*.5,C(this.createTextDirect(l,"\u0431",O,new ae(I,U,0),Ji.Middle),X)}createLeftArrow(a,l,h,d){return this.extrudePath([[l.x,l.y],[l.x,l.y-d],[l.x+a*h,l.y-d/2],[l.x,l.y]],0,0,0)}createRect(a,l,h,d){return this.extrudePath([[l.x,l.y],[l.x,l.y-d],[l.x+a*h,l.y-d],[l.x+a*h,l.y],[l.x,l.y]],0,0,0)}}class b2t{constructor(a,l={}){this.enabled=!0;const h=void 0!==l.defaultThickness?l.defaultThickness:.003,d=(new pn).fromArray(void 0!==l.defaultColor?l.defaultColor:[0,0,0]),p=void 0!==l.defaultKeepAlive&&l.defaultKeepAlive,g={},v={},y={},_={outlineThickness:{value:h},outlineColor:{value:d},outlineAlpha:{value:void 0!==l.defaultAlpha?l.defaultAlpha:1}},b=["#include <common>","#include <uv_pars_vertex>","#include <displacementmap_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 normal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + normal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}","void main() {","\t#include <uv_vertex>","\t#include <beginnormal_vertex>","\t#include <morphnormal_vertex>","\t#include <skinbase_vertex>","\t#include <skinnormal_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <displacementmap_vertex>","\t#include <project_vertex>","\tvec3 outlineNormal = - objectNormal;","\tgl_Position = calculateOutline( gl_Position, outlineNormal, vec4( transformed, 1.0 ) );","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\t#include <fog_vertex>","}"].join("\n"),C=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\t#include <clipping_planes_fragment>","\t#include <logdepthbuf_fragment>","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","\t#include <premultiplied_alpha_fragment>","}"].join("\n");function O(I){const U=function w(I){let U=g[I.uuid];return void 0===U&&(U={material:new Ya({type:"OutlineEffect",uniforms:CI.merge([fn.fog,fn.displacementmap,_]),vertexShader:b,fragmentShader:C,side:1}),used:!0,keepAlive:p,count:0},g[I.uuid]=U),U.used=!0,U.material}(I);return v[U.uuid]=I,function P(I,U){if("invisible"===I.name)return;const $=U.userData.outlineParameters;I.fog=U.fog,I.toneMapped=U.toneMapped,I.premultipliedAlpha=U.premultipliedAlpha,I.displacementMap=U.displacementMap,void 0!==$?(I.visible=!1!==U.visible&&(void 0===$.visible||$.visible),I.transparent=void 0!==$.alpha&&$.alpha<1||U.transparent,void 0!==$.keepAlive&&(g[U.uuid].keepAlive=$.keepAlive)):(I.transparent=U.transparent,I.visible=U.visible),(!0===U.wireframe||!1===U.depthTest)&&(I.visible=!1),U.clippingPlanes&&(I.clipping=!0,I.clippingPlanes=U.clippingPlanes,I.clipIntersection=U.clipIntersection,I.clipShadows=U.clipShadows),I.version=U.version}(U,I),U}function D(I){const U=I.geometry;let $=!1;return void 0!==I.geometry&&($=!U.isBufferGeometry||void 0!==U.attributes.normal),!0===I.isMesh&&void 0!==I.material&&!0===$}function T(I){if(!1!==D(I)){if(Array.isArray(I.material))for(let U=0,$=I.material.length;U<$;U++)I.material[U]=O(I.material[U]);else I.material=O(I.material);y[I.uuid]=I.onBeforeRender,I.onBeforeRender=k}}function M(I){if(!1!==D(I)){if(Array.isArray(I.material))for(let U=0,$=I.material.length;U<$;U++)I.material[U]=v[I.material[U].uuid];else I.material=v[I.material.uuid];I.onBeforeRender=y[I.uuid]}}function k(I,U,$,H,J){const ee=v[J.uuid];void 0!==ee&&function E(I,U){const $=U.userData.outlineParameters;I.uniforms.outlineAlpha.value=U.opacity,void 0!==$&&(void 0!==$.thickness&&(I.uniforms.outlineThickness.value=$.thickness),void 0!==$.color&&I.uniforms.outlineColor.value.fromArray($.color),void 0!==$.alpha&&(I.uniforms.outlineAlpha.value=$.alpha)),U.displacementMap&&(I.uniforms.displacementMap.value=U.displacementMap,I.uniforms.displacementScale.value=U.displacementScale,I.uniforms.displacementBias.value=U.displacementBias)}(J,ee)}this.render=function(I,U){let $,H=!1;if(void 0!==arguments[2]&&(console.warn("THREE.OutlineEffect.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),$=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.OutlineEffect.render(): the forceClear argument has been removed. Use .clear() instead."),H=arguments[3]),void 0!==$&&a.setRenderTarget($),H&&a.clear(),!1===this.enabled)return void a.render(I,U);const J=a.autoClear;a.autoClear=this.autoClear,a.render(I,U),a.autoClear=J,this.renderOutline(I,U)},this.renderOutline=function(I,U){const $=a.autoClear,H=I.autoUpdate,J=I.background,ee=a.shadowMap.enabled;I.autoUpdate=!1,I.background=null,a.autoClear=!1,a.shadowMap.enabled=!1,I.traverse(T),a.render(I,U),I.traverse(M),function V(){let I;I=Object.keys(v);for(let U=0,$=I.length;U<$;U++)v[I[U]]=void 0;I=Object.keys(y);for(let U=0,$=I.length;U<$;U++)y[I[U]]=void 0;I=Object.keys(g);for(let U=0,$=I.length;U<$;U++){const H=I[U];!1===g[H].used?(g[H].count++,!1===g[H].keepAlive&&g[H].count>60&&delete g[H]):(g[H].used=!1,g[H].count=0)}}(),I.autoUpdate=H,I.background=J,a.autoClear=$,a.shadowMap.enabled=ee},this.autoClear=a.autoClear,this.domElement=a.domElement,this.shadowMap=a.shadowMap,this.clear=function(I,U,$){a.clear(I,U,$)},this.getPixelRatio=function(){return a.getPixelRatio()},this.setPixelRatio=function(I){a.setPixelRatio(I)},this.getSize=function(I){return a.getSize(I)},this.setSize=function(I,U,$){a.setSize(I,U,$)},this.setViewport=function(I,U,$,H){a.setViewport(I,U,$,H)},this.setScissor=function(I,U,$,H){a.setScissor(I,U,$,H)},this.setScissorTest=function(I){a.setScissorTest(I)},this.setRenderTarget=function(I){a.setRenderTarget(I)}}}class kP{constructor(a,l){S(this,"names",void 0),S(this,"selected",void 0),this.names=a,this.selected=l}static builder(){return new kP([],"")}setNames(a){return this.names=a,this}setSelected(a){return this.selected=a,this}}class UG{constructor(a,l,h="",d=1,f=0,p=0){S(this,"meshText",void 0),S(this,"mesh",void 0),S(this,"infoText",void 0),S(this,"d",void 0),S(this,"x",void 0),S(this,"y",void 0),this.meshText=a,this.mesh=l,this.infoText=h,this.d=d,this.x=f,this.y=p}static builder(){return new UG(null,null)}setMeshText(a){return this.meshText=a,this}setMesh(a){return this.mesh=a,this}setInfoText(a){return this.infoText=a,this}setD(a){return this.d=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}}class MP{constructor(a,l,h,d){S(this,"mesh",void 0),S(this,"meshVisible",void 0),S(this,"action",void 0),S(this,"update",void 0),this.mesh=a,this.meshVisible=l,this.action=h,this.update=d}static builder(){return new MP(null,null,()=>{},()=>{})}setMesh(a){return this.mesh=a,this}setMeshVisible(a){return this.meshVisible=a,this}setAction(a){return this.action=a,this}setUpdate(a){return this.update=a,this}runAction(){return this.action(this),this}runUpdate(){return this.update(this),this}}let C2t=(()=>{class c extends C2{constructor(...l){super(...l),S(this,"modelGenerator",new _2t),S(this,"renderer",null),S(this,"camera",null),S(this,"scene",null),S(this,"light",null),S(this,"logoMeshes",[]),S(this,"crossMeshes",[]),S(this,"cube",null),S(this,"group",null),S(this,"font",null),S(this,"infoDelayed",[]),S(this,"frameId",null),S(this,"config",null),S(this,"raycaster",null),S(this,"id2Mesh",new Map),S(this,"infoObject",null),S(this,"infoStartTime",0),S(this,"infoAlphaTime",0),S(this,"infoAlpha",0),S(this,"infoAlphaIncrement",.001),S(this,"infoAlphaFadeOutTime",5e3),S(this,"effect",null),S(this,"toonMaterial",null),S(this,"particleLight",null),S(this,"menuTextScaleTime",0),S(this,"menuTextScale",1),S(this,"menuTextScaleSpeed",.001),S(this,"menuTextMesh",null),S(this,"menuTextMeshes",[]),S(this,"menuTextMeshesUnderline",[]),S(this,"meshActions",[])}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}getFovInRadians(l,h){let p=15/l;return p<22&&(p=22),2*Math.atan2(p/2,h)}init(l){this.renderer=l,this.recreate()}recreate(){if(!this.renderer)return;this.menuTextMesh=null,this.menuTextMeshes=[],this.menuTextMeshesUnderline=[];let l=this.canvasWidth,h=this.canvasHeight;this.renderer.setSize(l,h),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=zs,this.scene=new s2;let f=this.getFovInRadians(l/h,15);this.camera=new ko(f/Math.PI*180,l/h,.1,1e3),this.camera.position.z=15,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.light=new rP(16777215),this.light.position.z=10,this.scene.add(this.light),this.particleLight=new fr(new Xb(1,8,8),new co({color:16746632})),new Rbe(16777215,2,50);const g=this.renderer.capabilities.isWebGL2?1028:1024,_=(new pn).setHSL(34/255,23/255,240/255),C=new Uint8Array(4);for(let w=0;w<=C.length;w++)C[w]=w/C.length*256;const x=new Qb(C,C.length,1,g);x.needsUpdate=!0,this.toonMaterial=new wbe({color:_,gradientMap:x}),this.effect=new b2t(this.renderer,{defaultThickness:.005}),this.createCrossMeshes().forEach((w,O)=>{0==O&&(this.cube=w),this.scene.add(w),this.crossMeshes.push(w)}),this.getLogoText()&&this.scene.remove(...this.crossMeshes),this.createMenuMeshes().forEach((w,O)=>{this.scene.add(w)}),this.group=new Ub,this.group.position.y=0,this.scene.add(this.group),this.font=this.appParamProvider(c.font3dParamName).font,this.font?this.onFontLoaded():(new p2t).load("./fonts/PonomarUnicode.ttf",O=>{this.appParamProvider(c.font3dParamName).font=this.font=new HSe(O),this.onFontLoaded()}),this.raycaster=new wCt}onFontLoaded(){this.font&&this.config&&(this.modelGenerator.createText((l,h,d="",f=1,p=0,g=0)=>this.pushInfo(l,h,d,f,p,g),this.font,this.config,0,0,0,0,1,1-.8,.27,.6,Math.PI/8),this.createMenuText(),this.runPushInfoDelayed(),this.calculateMenuArrows(),this.recreateLogoText())}onMouseMove(l){}onMouseClick(l){this.onMouseClickDIrect(l)}onMouseClickDIrect(l){if(!this.raycaster)return;const h=new yt(this.incrementX(l.clientX)/this.canvasWidth*2-1,-this.incrementY(l.clientY)/this.canvasHeight*2+1);this.raycaster.setFromCamera(h,this.camera);let d=[];this.id2Mesh.forEach((y,_,b)=>{d.push(y)});let f=this.scene.children.filter(y=>this.id2Mesh.has(y.uuid));const p=this.raycaster.intersectObjects(f,!1);let g="",m=!1;if(p.length>0){let y=p[0].object;m="\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"==y.userData.text,g=y.uuid}let v=this.meshActions.find(y=>y.mesh?.uuid==g);if(m)this.runMenuItemAction();else if(v)v.runAction();else if(g){let y=p[0].object;y.material.wireframe=!y.material.wireframe,y.material.opacity=this.infoAlpha=0;const _=new Date;this.infoStartTime=this.infoAlphaTime=_.getTime(),this.id2Mesh.forEach((b,C,x)=>{b.visible=!1}),this.id2Mesh.forEach((b,C,x)=>{C==g&&(b.visible=!0,this.infoObject=b)})}}onResize(){const l=this.canvasWidth,h=this.canvasHeight;this.camera.aspect=l/h,this.camera.updateProjectionMatrix(),this.renderer.setSize(l,h)}render(){if(this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.fov=180/Math.PI*this.getFovInRadians(this.canvasWidth/this.canvasHeight,this.camera.position.z)),this.group&&this.cube&&(this.group.rotation.y=this.cube.rotation.y),this.infoObject){let d=this.infoObject;const f=new Date;let p=this.infoAlphaTime?f.getTime()-this.infoAlphaTime:0;this.infoAlphaTime=f.getTime(),this.infoAlpha+=p*this.infoAlphaIncrement*(this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime?-1:1),this.infoAlpha<0&&(this.infoAlpha=0),this.infoAlpha>1&&(this.infoAlpha=1),d.material.opacity=this.infoAlpha,this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime&&0==this.infoAlpha&&(this.infoObject.visible=!1,this.infoObject=null)}this.calculateMenuTextScale();const l=25e-5*Date.now();this.particleLight.position.x=13*Math.sin(7*l)/2,this.particleLight.position.y=14*Math.cos(5*l)/2,this.particleLight.position.z=13*Math.cos(3*l)/2,this.effect?this.effect.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera)}getMenuItems(){let l=this.getParam("\u043f\u0443\u043d\u043a\u0442\u044b");return null==l&&(l=kP.builder().setNames(["\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a","\u041a\u043d\u0438\u0433\u0438","\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D"]).setSelected("")),l}getLogoText(){let l=this.menuTextMesh?.userData.text;if(!l){let h=this.getMenuItems();l=h.selected,!l&&h.names.length>0&&(l=h.names[0])}return this.appLogoTextProvider(l||"")}recreateLogoText(){this.scene?.remove(...this.logoMeshes),this.logoMeshes=[],this.getLogoText()?(this.getLogoText()&&this.scene?.remove(...this.crossMeshes),this.createLogoText()):this.scene?.add(...this.crossMeshes)}createLogoText(){let h=this.getLogoText().split("|"),f=10/3,p=this.addLogoText(h[0],0,f);this.addLogoText(h[1],0,f-1.5*p),((y,_,b=!0)=>{const C=this.toonMaterial?this.toonMaterial:new co({color:16777215});let x=new fr(y,C);y.computeBoundingBox(),this.scene?.add(x),this.logoMeshes.push(x),x.visible=b,x.userData={material:C,text:_}})(this.modelGenerator.createRect(1,new ae(-5,f-p+.25,0),10,.5),"\u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043b\u0438\u043d\u0438\u044f",!0)}createMenuText(){let l=this.getMenuItems();l.names.forEach((h,d,f)=>this.addMenuText(h,h==l.selected||!!l.selected&&!this.menuTextMesh&&d+1==f.length||!l.selected&&0==d))}addLogoText(l,h,d){let p=2.5,g=this.modelGenerator.createTextDirect(this.font,l,p,new ae(h,d-p/2,0),Ji.Middle);if(g.geometry.boundingBox){let m=g.geometry.boundingBox.max.x-g.geometry.boundingBox.min.x;if(m>10){let v=10/m;g.scale.set(v,v,v),p*=v,g.position.set(h-m*v/2,d-p/2,0)}}return this.scene?.add(g),this.logoMeshes.push(g),g.visible=!0,g.userData={text:l},p}addMenuText(l,h){let D=this.modelGenerator.createTextDirect(this.font,l,2.4,new ae(0,-10.066666666666666,0),Ji.Middle);this.scene?.add(D),this.menuTextMeshes.push(D),D.visible=!1,D.userData={text:l},!this.menuTextMesh&&h&&(this.menuTextMesh=D,this.menuTextMesh.visible=!0)}calculateMenuTextScale(){if(!this.menuTextMesh)return;let y=.26666666666666666,C=(new Date).getTime(),x=this.menuTextScaleTime?C-this.menuTextScaleTime:0;if(this.menuTextScaleTime=C,this.menuTextMesh.geometry.boundingBox){let w=this.menuTextMesh.geometry.boundingBox.max.x-this.menuTextMesh.geometry.boundingBox.min.x;if(w>10-2*y){let O=(10-2*y)/w,D=O-this.menuTextScale,T=x*this.menuTextScaleSpeed*(D<0?-1:1);Math.abs(D)<Math.abs(T)?this.menuTextScale=O:this.menuTextScale+=T}else{let D=2.4/(this.menuTextMesh.geometry.boundingBox.max.y-this.menuTextMesh.geometry.boundingBox.min.y),T=D-this.menuTextScale,M=x*this.menuTextScaleSpeed*(T<0?-1:1);Math.abs(T)<Math.abs(M)?this.menuTextScale=D:this.menuTextScale+=M}this.menuTextMesh.position.x=(-w/2-this.menuTextMesh.geometry.boundingBox.min.x)*this.menuTextScale,this.menuTextMesh.position.y=-9.666666666666666}this.menuTextMesh.scale.set(this.menuTextScale,this.menuTextScale,this.menuTextScale)}createMenuMeshes(){let h=10/15,m=0,v=-5-4*h,y=2*h,_=4*h,b=[];const x=new co({color:16777215,wireframe:!0});let w=(T,M,k=!0)=>{const E=this.toonMaterial?this.toonMaterial:new co({color:16777215});let P=new fr(T,E);return T.computeBoundingBox(),b.push(P),P.visible=k,P.userData={material:E,materialWireframe:x,text:M},this.pushInfoDelayed(P,null,M,h,0,7.666666666666666),P};m=-5,w(this.modelGenerator.createRect(1,new ae(m,v,0),10,_),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e",!1);let O=_/10,D=_/10;return this.getMenuItems().names.forEach((T,M,k)=>{let P=(10-O)/k.length;this.menuTextMeshesUnderline.push(w(this.modelGenerator.createRect(1,new ae(m+P*M+O,v-_+D,0),P-O,D),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"))}),w(this.modelGenerator.createLeftArrow(-1,new ae(m,v,0),y,_),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"),m=5,w(this.modelGenerator.createLeftArrow(1,new ae(m,v,0),y,_),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"),b}createCrossMeshes(){let h=10/15,d=this.modelGenerator.createConfig().setWidth(10).setHeight(10).setDelta(h);this.config=d;let m=5+4*h;new co({color:0,wireframe:!0,transparent:!0});let _=this.modelGenerator.createCrossParts(d,0,0,0,0,1,1-.8,.27,.6,Math.PI/8).map(C=>{const x=new $i;x.setAttribute("position",new Hs(new Float32Array(C.vertexes.toPlainArray()),3)),x.setAttribute("normal",new Hs(new Float32Array(C.vertexes.toPlainArray(Op.Normals)),3)),x.setAttribute("uv",new Hs(new Float32Array(C.vertexes.toPlainArray(Op.UV)),2)),x.computeBoundingBox();const w=this.toonMaterial?this.toonMaterial:new co({color:16777215}),O=new fr(x,w);return this.pushInfoDelayed(O,null,C.name,h,0,m),O}),b=(C,x)=>{const w=this.toonMaterial?this.toonMaterial:new co({color:16777215});let O=new fr(C,w);C.computeBoundingBox(),_.push(O),this.pushInfoDelayed(O,null,x,h,0,m)};return b(this.modelGenerator.createTrost(d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createTri1(1,d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createTri2(1,d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createKopie(d,-1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createTri1(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createTri2(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createTrostNakonechnik(1,d,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),b(this.modelGenerator.createKopieNakonechnik(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),b(this.modelGenerator.createSkull(-1,d,1,1-.8,.27,.6,Math.PI/8),"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430"),_}pushInfoDelayed(l,h,d="",f=1,p=0,g=0){this.infoDelayed.push(UG.builder().setMeshText(l).setMesh(h).setInfoText(d).setD(f).setX(p).setY(g))}runPushInfoDelayed(){this.infoDelayed.forEach(l=>{l.meshText&&this.pushInfo(l.meshText,l.mesh,l.infoText,l.d,l.x,l.y)}),this.infoDelayed=[]}pushInfo(l,h,d="",f=1,p=0,g=0){if(d&&(h=this.modelGenerator.createTextDirect(this.font,d,f,new ae(p,g,0),Ji.Middle)),!h)return;d||(this.scene?.add(l),this.crossMeshes.push(l)),h.visible=!1,this.scene?.add(h),this.crossMeshes.push(h);let m=l.geometry.boundingBox,v=eC.builder();v.addPlaneXY(new ae(m.min.x,m.max.y,m.min.z),m.max.x-m.min.x,m.max.y-m.min.y);let y=new $i;y.setAttribute("position",new Hs(new Float32Array(v.toPlainArray()),3));const _=new co({color:16777215,wireframe:!1});let b=new fr(y,_);this.scene?.add(b),b.position.add(l.position),b.visible=!1,b.userData={text:d},this.id2Mesh.set(b.uuid,h),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"==d&&this.meshActions.push(MP.builder().setMesh(b).setMeshVisible(l).setAction(()=>this.onPrevMenu()).setUpdate(x=>{if(this.menuTextMesh){let w=this.menuTextMeshes.indexOf(this.menuTextMesh);x.meshVisible&&(x.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(0==w,x.meshVisible))}})),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"==d&&this.meshActions.push(MP.builder().setMesh(b).setMeshVisible(l).setAction(()=>this.onNextMenu()).setUpdate(x=>{if(this.menuTextMesh){let w=this.menuTextMeshes.indexOf(this.menuTextMesh);x.meshVisible&&(x.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(w+1==this.menuTextMeshes.length,x.meshVisible))}}))}setMeshMaterial(l,h){l?h.material=h.userData.materialWireframe:h&&(h.material=h.userData.material)}calculateMenuArrows(){let l=this.menuTextMeshes.indexOf(this.menuTextMesh);this.menuTextMeshesUnderline.forEach((h,d)=>{this.setMeshMaterial(d!=l,h)}),this.meshActions.forEach(h=>h.runUpdate())}onPrevMenu(){let l=this.menuTextMeshes.indexOf(this.menuTextMesh);l>0&&(--l,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[l],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}onNextMenu(){let l=this.menuTextMeshes.indexOf(this.menuTextMesh);l+1<this.menuTextMeshes.length&&(++l,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[l],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}runMenuItemAction(){let l=this.menuTextMesh?.userData.text;this.runAction(l)}}return S(c,"font3dParamName","font3d"),c})(),zG=(()=>{class c{constructor(l,h,d){S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"router",void 0),this.uiConfig=l,this.config=h,this.router=d}onLoginCommand(l){let h=l;this.config.setShowNormal(),this.config.defaultApplication=h.id,this.uiConfig.ui.lastLoginApp.setStringValue(h.id);let d=pageRequestedRoute||this.uiConfig.ui.defaultAppRoute.getStringValue();pageRequestedRoute="",h.routes.find(f=>f.link==d)||(d=h.routes[0].link),this.uiConfig.ui.defaultAppRoute.setStringValue(d),this.uiConfig.setAppRoutes(null),this.router.navigate([d])}autoLogin(){let l=pageRequestedApp||this.uiConfig.ui.lastLoginApp.getStringValue(),h=this.config.environment.applications.filter(f=>f.applicationEnabled);if(!l&&1!=h.length)return;let d=null;h.forEach((f,p,g)=>{f.id==l&&(d=f)}),null==d&&1==h.length&&h.forEach((f,p,g)=>{d=f}),pageRequestedApp="",null!=d&&this.onLoginCommand(d)}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ii),Pe(ln),Pe(js))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();const S2t=["myCanvas"];function x2t(c,a){if(1&c){const l=ct();R(0,"button",6),ie("click",function(){return Ee(l),Ae(q(2).routeToV1())}),se(1,"v1"),N()}}function w2t(c,a){if(1&c){const l=ct();R(0,"div",4),K(1,x2t,2,0,"button",5),R(2,"button",6),ie("click",function(){return Ee(l),Ae(q().routeToLogo())}),se(3,"2D"),N()()}if(2&c){const l=q();F(1),L("ngIf",l.config.showOldVersions)}}class HG extends C2{constructor(a,l,h){super(),S(this,"scene",void 0),S(this,"initialized",void 0),S(this,"name",void 0),this.scene=a,this.initialized=l,this.name=h}static builder(){return new HG(null,!1,"")}setScene(a){return this.scene=a,this}setInitialized(a){return this.initialized=a,this}setName(a){return this.name=a,this}get canvasWidth(){return this.scene?this.scene.canvasWidth:this.iCanvasWidth}get canvasHeight(){return this.scene?this.scene.canvasHeight:this.iCanvasHeight}get canvasPercentage(){return this.scene?this.scene.canvasPercentage:this.iPercentage}setWidthPixelIncrement(a){return this.scene?.setWidthPixelIncrement(a),super.setWidthPixelIncrement(a)}setHeightPixelIncrement(a){return this.scene?.setHeightPixelIncrement(a),super.setHeightPixelIncrement(a)}setXPixelIncrement(a){return this.scene?.setXPixelIncrement(a),super.setXPixelIncrement(a)}setYPixelIncrement(a){return this.scene?.setYPixelIncrement(a),super.setYPixelIncrement(a)}setCanvasWidth(a){return this.scene?.setCanvasWidth(a),super.setCanvasWidth(a)}setCanvasHeight(a){return this.scene?.setCanvasHeight(a),super.setCanvasHeight(a)}setPercentage(a){return this.scene?.setPercentage(a),super.setPercentage(a)}setLight(a){return this.scene?.setLight(a),super.setLight(a)}setActionHandler(a){return this.scene?.setActionHandler(a),super.setActionHandler(a)}setParam(a,l){return this.scene?.setParam(a,l),super.setParam(a,l)}setAppLogoTextProvider(a){return this.scene?.setAppLogoTextProvider(a),super.setAppLogoTextProvider(a)}setAppParamProvider(a){return this.scene?.setAppParamProvider(a),super.setAppParamProvider(a)}dispose(){this.initialized&&(this.scene?.dispose(),this.initialized=!1)}init(a){this.scene?.init(a),this.initialized=!0}onMouseMove(a){this.initialized&&this.scene?.onMouseMove(a)}onMouseClick(a){this.initialized&&this.scene?.onMouseClick(a)}onResize(){this.initialized&&this.scene?.onResize()}render(){this.scene?.render()}}let $Se=(()=>{class c{set scenes(l){let h=l.split(",");0==h.length&&(h=["\u041a\u0440\u0435\u0441\u0442"]),this.allScenes=[],h.forEach(d=>{let f=HG.builder().setName(d);switch(d){default:case"\u041a\u0443\u0431":f.setScene(new FCt);break;case"\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d":f.setScene(new LCt);break;case"\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435":f.setScene(new $Ct);break;case"\u041a\u0440\u0435\u0441\u0442":f.setScene(new C2t)}this.allScenes.push(f)})}get scene(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?null:this.allScenes[this.sceneIndex]}get sceneName(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?this.requestedSceneName:this.allScenes[this.sceneIndex].name}set sceneName(l){this.renderer?this.selectSceneByName(l):this.requestedSceneName=l}get requestedCanvasWidth(){return this.iRequestedCanvasWidth}set requestedCanvasWidth(l){this.iRequestedCanvasWidth=l;let h=this.scene;h&&h.dispose()}get requestedCanvasHeight(){return this.iRequestedCanvasHeight}set requestedCanvasHeight(l){this.iRequestedCanvasHeight=l;let h=this.scene;h&&h.dispose()}get requestedPercentage(){return this.iRequestedPercentage}set requestedPercentage(l){this.iRequestedPercentage=l;let h=this.scene;h&&h.dispose()}selectScene(l){l>=0&&l<this.allScenes.length&&l!=this.sceneIndex&&(this.scene?.dispose(),this.sceneIndex=l,this.config.post(()=>{this.render()}))}selectSceneByName(l){let h=this.allScenes.findIndex(d=>d.name==l);this.selectScene(h)}set name(l){this.sName=l}get name(){return this.sName}onResize(){this.scene?.onResize()}onMouseMove(l){this.scene?.onMouseMove(l)}onMouseClick(l){l.ctrlKey?this.selectScene((this.sceneIndex+1)%this.allScenes.length):this.scene?.onMouseClick(l)}constructor(l,h,d,f,p){S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"renderer2",void 0),S(this,"themesSvc",void 0),S(this,"autoLoginSvc",void 0),S(this,"myCanvasRef",void 0),S(this,"running",!1),S(this,"canvas",null),S(this,"renderer",null),S(this,"fullScreen",!1),S(this,"allScenes",[]),S(this,"sceneIndex",-1),S(this,"requestedSceneName","\u041a\u0440\u0435\u0441\u0442"),S(this,"iRequestedCanvasWidth",90),S(this,"iRequestedCanvasHeight",100),S(this,"iRequestedPercentage",!0),S(this,"enabled",!0),S(this,"sName",""),this.uiConfig=l,this.config=h,this.renderer2=d,this.themesSvc=f,this.autoLoginSvc=p,this.scenes="\u041a\u0440\u0435\u0441\u0442"}ngOnInit(){this.fullScreen&&this.addOverflowClass(),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.fullScreen&&this.autoLoginSvc.autoLogin()}),this.running=!0}ngOnDestroy(){this.fullScreen&&this.removeOverflowClass(),this.scene?.dispose(),this.canvas=null,this.running=!1}addOverflowClass(){this.renderer2.addClass(document.body,"overflowHidden")}removeOverflowClass(){this.renderer2.removeClass(document.body,"overflowHidden")}routeToV1(){window.location.href="./v1"}routeToLogo(){this.config.requestLogin3d(!1),this.config.setShowLogin(!1)}ngAfterViewInit(){this.canvas=this.myCanvasRef.nativeElement,this.canvas&&(this.renderer=new B1e({canvas:this.canvas,alpha:!0,antialias:!0}),this.config.post(()=>{this.selectSceneByName(this.requestedSceneName)}))}render(){if(!this.running)return this.scene?.dispose(),void(this.sceneIndex=-1);!this.scene?.initialized&&this.renderer&&(!this.fullScreen&&this.canvas&&this.scene?.setCanvasWidth(this.requestedCanvasWidth).setCanvasHeight(this.requestedCanvasHeight).setPercentage(this.requestedPercentage).setHeightPixelIncrement(-60).setYPixelIncrement(-60),this.scene?.setLight(this.themesSvc.nowIsDay()).setParam("\u043f\u0443\u043d\u043a\u0442\u044b",this.getMenuItems()).setActionHandler(l=>this.runMenuItemClick(l)).setAppLogoTextProvider(l=>{let h=this.config.getApplicationByNameOrNull(l);return h||(h=this.config.getSingleAppOrNull()),h||(h=this.config.getApplication()),h?h.applicationLogoText:""}).setAppParamProvider(l=>this.uiConfig.getAppParam(l)).init(this.renderer)),this.scene?.render()}getMenuItems(){let l=this.config.environment.applications.filter(f=>f.applicationEnabled&&!f.applicationHidden).map(f=>f.name),h=this.uiConfig.ui.lastLoginApp.getStringValue(),d=this.config.environment.applications.find(f=>f.id==h);return kP.builder().setNames(l).setSelected(d?d.name:"")}runMenuItemClick(l){let h=this.config.environment.applications.find(d=>d.name==l);h?this.autoLoginSvc.onLoginCommand(h):console.log(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435: "${l}".`)}getLogoText(){let l=this.config.getSingleAppOrNull();return null==l&&(l=this.config.getApplication()),l?l.applicationLogoText:""}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(ln),z(Yi),z(bo),z(zG))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-three-logo"]],viewQuery:function(l,h){if(1&l&&mi(S2t,5),2&l){let d;jt(d=Zt())&&(h.myCanvasRef=d.first)}},hostBindings:function(l,h){1&l&&ie("resize",function(f){return h.onResize(f.target)},0,ly)("mousemove",function(f){return h.onMouseMove(f)},!1,ly)("click",function(f){return h.onMouseClick(f)},!1,ly)},inputs:{fullScreen:"fullScreen",scenes:"scenes",requestedSceneName:"requestedSceneName",sceneName:"sceneName",requestedCanvasWidth:"requestedCanvasWidth",requestedCanvasHeight:"requestedCanvasHeight",requestedPercentage:"requestedPercentage",enabled:"enabled",name:"name"},decls:4,vars:1,consts:[["class","flyout",4,"ngIf"],[1,"container","bgColor","fade-in-3"],[1,"centeredCanvas"],["myCanvas",""],[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"]],template:function(l,h){1&l&&(K(0,w2t,4,1,"div",0),R(1,"div",1),pe(2,"canvas",2,3),N()),2&l&&L("ngIf",h.fullScreen)},dependencies:[Sn],styles:[".centeredCanvas[_ngcontent-%COMP%]{padding:0;margin:auto;display:block;width:90vw}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}.container[_ngcontent-%COMP%]{width:100%}"]})),c})(),O2t=(()=>{class c{constructor(l){S(this,"uiConfig",void 0),S(this,"scenes","\u041a\u0440\u0435\u0441\u0442,\u041a\u0443\u0431,\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d,\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435"),this.uiConfig=l}ngOnInit(){this.uiConfig.setAppRoutes(null)}ngAfterViewInit(){}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-d3d-examples"]],decls:2,vars:6,consts:[[3,"fullScreen","sceneName","requestedCanvasWidth","requestedCanvasHeight","requestedPercentage","scenes"]],template:function(l,h){1&l&&(R(0,"div"),pe(1,"app-three-logo",0),N()),2&l&&(F(1),L("fullScreen",!1)("sceneName","\u041a\u0440\u0435\u0441\u0442")("requestedCanvasWidth",100)("requestedCanvasHeight",100)("requestedPercentage",!0)("scenes",h.scenes))},dependencies:[$Se]})),c})();function D2t(c,a){if(1&c){const l=ct();R(0,"button",2),ie("click",function(){return Ee(l),Ae(q().routeToV1())}),se(1,"v1"),N()}}let WSe=(()=>{class c{constructor(l,h,d,f){S(this,"router",void 0),S(this,"autologinSvc",void 0),S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"logoData",Ha.builder()),this.router=l,this.autologinSvc=h,this.config=d,this.uiConfig=f}ngOnInit(){let l=this.config.getSingleAppOrNull();null==l&&(l=this.config.getApplication()),this.logoData=this.newLogoData(l?l.applicationLogoText:""),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.autologinSvc.autoLogin()})}newLogoData(l){return Ha.builder().setSvgWidth(512).setSvgHeight(512).setLogoText(l).setGenName(l?"NoLogo":"Logo").setScene(l?"/scenes/name.logo.scene.txt":"/scenes/cross.scene.txt")}navigateTo(l,h){this.uiConfig.ui.defaultAppRoute.setStringValue(h),this.uiConfig.setAppRoutes(null),this.router.navigate([h])}isActive(l){return this.router.isActive(l,!1)}onLoginCommand(l){this.autologinSvc.onLoginCommand(l)}onPreviewCommand(l){this.logoData=this.newLogoData(l?l.applicationLogoText:"")}routeToV1(){window.location.href="./v1"}routeTo3D(){this.config.requestLogin3d(!0),this.config.setShowLogin(!1)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(js),z(zG),z(ln),z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-login"]],decls:9,vars:7,consts:[[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"],[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"svgWidth","svgHeight","data"],[1,"login-footer"],[3,"svgWidth","svgHeight","genName","onCommand","onPreviewCommand"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,D2t,2,0,"button",1),R(2,"button",2),ie("click",function(){return h.routeTo3D()}),se(3,"3d"),N()(),R(4,"div",3)(5,"div",4),pe(6,"app-svg-js-image",5),N(),R(7,"div",6)(8,"app-svg-js-image",7),ie("onCommand",function(f){return h.onLoginCommand(f)})("onPreviewCommand",function(f){return h.onPreviewCommand(f)}),N()()()),2&l&&(F(1),L("ngIf",h.config.showOldVersions),F(5),L("svgWidth",512)("svgHeight",512)("data",h.logoData),F(2),L("svgWidth",512)("svgHeight",128)("genName","Menu"))},dependencies:[Sn,nc],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{inset:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:100vh}.h80[_ngcontent-%COMP%]{height:75vh;width:75vh}flyout-toggle[_ngcontent-%COMP%]{position:absolute;transform:rotate(90deg);top:50%;left:-50px;z-index:998;width:85px;height:35px;font-size:13px;background:#92C7B8;border:solid #fff 1px}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}"]})),c})(),T2t=(()=>{class c{constructor(l,h,d,f){S(this,"router",void 0),S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"themesSvc",void 0),S(this,"dynMenuData",Tg.builder().setWhiteBack(!1).setMenuState(vg.builder().addCommand(Ua.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay"))),S(this,"menuLinksOld",null),S(this,"light",!0),this.router=l,this.config=h,this.uiConfig=d,this.themesSvc=f}ngOnInit(){this.light=this.themesSvc.nowIsDay(),this.dynMenuData=Tg.builder().setWhiteBack(!1).setMenuState(vg.builder().addCommand(Ua.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName(this.light?"MenuDay":"MenuNight2")).setOnClick(this.getOnOk()),this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes([])},0)}ngOnDestroy(){this.menuLinksOld&&(this.menuLinksOld.unsubscribe(),this.menuLinksOld=null)}get version(){return this.config.environment.version}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.config.setShowLogin(!1)})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(js),z(ln),z(ii),z(bo))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-about"]],decls:4,vars:5,consts:[[1,"ftext","fade-in-3","pad","fullHeight","bgColor"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"div"),pe(2,"app-svg-js-image",1)(3,"app-dynamic-menu",2),N()()),2&l&&(F(2),L("genName",h.light?"LogoLight":"LogoDark")("svgWidth",512)("svgHeight",512)("type",0),F(1),L("data",h.dynMenuData))},dependencies:[nc,BE],styles:[".pad[_ngcontent-%COMP%]{padding:1em}.fullHeight[_ngcontent-%COMP%]{height:calc(100vh - 60px)}"]})),c})(),k2t=(()=>{class c{constructor(l){S(this,"router",void 0),S(this,"logText",["\u041c\u043e\u043b\u0435\u0431\u0435\u043d"].join(", ")),S(this,"extraPages",[]),S(this,"horizontalPagesCount",2),S(this,"verticalPagesCount",2),this.router=l}ngOnInit(){}onPagesCount(l){this.extraPages=[];let h=this.horizontalPagesCount*this.verticalPagesCount,d=l-h,f=0;for(;d>0;)d=Math.max(0,d-h),f+=h,this.extraPages.push(f)}}return S(c,"\u0275fac",function(l){return new(l||c)(z(js))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-main"]],decls:2,vars:9,consts:[[1,"pageBreak"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"app-svg-js-image",1),ie("pagesCount",function(f){return h.onPagesCount(f)}),N()()),2&l&&(F(1),L("svgWidth",210)("svgHeight",297)("scene","/scenes/parser.scene.txt")("genName","Js")("logoText",h.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",h.horizontalPagesCount)("verticalPagesCount",h.verticalPagesCount))},dependencies:[nc],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]})),c})();function M2t(c,a){if(1&c&&(R(0,"div"),pe(1,"app-add-component",2),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}let E2t=(()=>{class c extends wg{getUIVisited(){return this.uiConfig.ui.visitedCalculatorHelp}getUIBook(){return this.uiConfig.ui.calculatorBook}getUIChapter(){return this.uiConfig.ui.calculatorChapter}getUILine(){return this.uiConfig.ui.calculatorLine}constructor(l,h,d){super(l,h,d),S(this,"appBookName","\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 APP_CLC"),S(this,"appBookChapter","1"),S(this,"helpBookName","\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),S(this,"helpChapterNormal","1"),S(this,"helpChapterConfidential","2"),S(this,"errorsData",Bc.builder()),this.addMenuLink(ai.builder().setLink("#").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ai.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}isSettings(){return!(this.components.length<=0)&&this.components[0].data.component?.data instanceof Th}isComponent(l,h=""){if(this.components.length<=0)return!1;let f=this.components[0].data.component?.data;return f?.text==l&&(!h||f?.link.chapter==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let l=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();l?this.routeTo(l,h,d):this.resetDelayed(this.appBookChapter)}}resetDelayed(l){this.config.post(()=>{this.reset(l)})}reset(l){this.routeTo(this.appBookName,l,1)}routeToHelpDelayed(l){this.config.post(()=>{this.routeToHelp(l)})}routeToHelp(l){this.isComponent(this.helpBookName,l)&&l===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,l,1)}routeToDelayed(l,h="",d=-1){this.config.post(()=>{this.routeTo(l,h,d)})}routeTo(l,h="",d=-1){let f=l;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(Wc,Tl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Dl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(l){this.config.post(()=>{this.components=l})}clearErrors(){this.errorsData.setErrors([])}setErrors(l){this.errorsData.setErrors(l).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(A1,Th.builder().updateClasses(l=>l.setCalculatorSettings(!0)))))])}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-calculator"]],features:[vn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,M2t,2,1,"div",1),N()),2&l&&(F(1),L("ngForOf",h.components))},dependencies:[vi,rc]})),c})();function A2t(c,a){1&c&&pe(0,"app-dynamic-errors",7),2&c&&L("data",q(3).errors)}function I2t(c,a){if(1&c){const l=ct();R(0,"div")(1,"div",4),se(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),N(),K(3,A2t,1,1,"app-dynamic-errors",5),R(4,"app-dynamic-code-runner-text",6),ie("onError",function(d){return Ee(l),Ae(q(2).onCodeRunnerError(d))}),N()()}if(2&c){const l=q(2);F(3),L("ngIf",l.errors.errors.length),F(1),L("data",l.runnerData)}}function P2t(c,a){if(1&c&&(R(0,"div",1),K(1,I2t,5,2,"div",2),pe(2,"app-dynamic-codemirror",3),N()),2&c){const l=q();L("ngClass",l.getClasses()),F(1),L("ngIf",l.graphicsEnabled),F(1),L("text",l.logText)("maxHeightStr","300px")}}function R2t(c,a){1&c&&pe(0,"app-dynamic-errors",7),2&c&&L("data",q(3).errors)}function F2t(c,a){if(1&c){const l=ct();R(0,"div",9)(1,"div",10),se(2,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),N(),K(3,R2t,1,1,"app-dynamic-errors",5),R(4,"app-dynamic-code-runner-text",6),ie("onError",function(d){return Ee(l),Ae(q(2).onCodeRunnerError(d))}),N()()}if(2&c){const l=q(2);F(3),L("ngIf",l.errors.errors.length),F(1),L("data",l.runnerData)}}const L2t=function(c,a){return{"clr-col-6":c,"clr-col-12":a}};function N2t(c,a){if(1&c&&(R(0,"div",1),K(1,F2t,5,2,"div",8),R(2,"div",1),pe(3,"app-dynamic-codemirror",3),N()()),2&c){const l=q();L("ngClass",l.getClasses()),F(1),L("ngIf",l.graphicsEnabled),F(1),L("ngClass",Wr(5,L2t,l.graphicsEnabled,!l.graphicsEnabled)),F(1),L("text",l.logText)("maxHeightStr","calc(100vh - 60px - 30px)")}}let B2t=(()=>{class c{get formulaText(){return this.sCompilerSourceText!=this.uiConfig.ui.compilerSourceText.getStringValue()&&this.config.post(()=>{this.sCompilerSourceText=this.uiConfig.ui.compilerSourceText.getStringValue()}),this.sCompilerSourceText}set formulaText(l){this.uiConfig.ui.compilerSourceText.setStringValue(l),this.onUpdateSourceTextConfig()}get compilerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.compilerData.components.length?this.compilerData.components[0]:null}get components(){return this.compilerData.components}get vertical(){return null!=this.bVertical?this.bVertical:window.innerWidth<window.innerHeight}constructor(l,h){S(this,"uiConfig",void 0),S(this,"config",void 0),S(this,"data",void 0),S(this,"generator",new kE),S(this,"solving",!1),S(this,"codemirrorData",qw.builder()),S(this,"logText",""),S(this,"starterSvc",null),S(this,"\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435",null),S(this,"graphicsEnabled",!0),S(this,"errors",Bc.builder()),S(this,"runnerData",GO.builder().updateConfig(d=>d.setWidth(256).setHeight(160))),S(this,"requestCodeText",""),S(this,"bVertical",null),S(this,"sCompilerSourceText",""),this.uiConfig=l,this.config=h}ngOnInit(){void 0===this.bVertical&&(this.bVertical=window.innerWidth<window.innerHeight),this.sCompilerSourceText=this.uiConfig.ui.compilerSourceText.getStringValue()}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateSourceTextConfig(),this.requestRun()}createJsService(){if(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435&&this.starterSvc)return void this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c",this.starterSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1));this.starterSvc=new WE,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.runnerData.config.environment=Gr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(Ai.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));let l=(h,d)=>{let f=d[0],g=h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[1]);return this.logText&&(this.logText+="\r\n"),this.logText+=g.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),this.syncLogText(),f};this.starterSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",l),this.starterSvc.addMethod(this.runnerData.config.environment,"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",l)}requestRun(){this.solving=!0,this.createJsService();let l=this.formulaText;this.requestCodeText=l,this.config.post(()=>{this.requestCodeText==l&&(this.onCodeRunnerError(""),this.runnerData.text=l)},1)}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{"clr-row":!this.vertical}}onRun(){let l=!1;if(this.starterSvc&&this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435){this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c",this.starterSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)),this.starterSvc.run(this.formulaText,null,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435);let h=this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c");h&&(l=h.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e())}l?this.config.post(()=>this.onRun()):this.solving=!1}onUpdateSourceTextConfig(){}onSelectFormula(l){this.formulaText=l.params.get("\u0442\u0435\u043a\u0441\u0442")}syncLogText(){this.codemirrorData.text=this.logText}onCodeRunnerError(l){this.config.post(()=>{this.errors.errors=l?[l]:[]})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ii),z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-compiler-runner"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],[3,"text","maxHeightStr"],[1,"green","bottom-top-space"],[3,"data",4,"ngIf"],[3,"data","onError"],[3,"data"],["class","clr-col-6",4,"ngIf"],[1,"clr-col-6"],[1,"green"]],template:function(l,h){1&l&&(K(0,P2t,3,4,"div",0),K(1,N2t,4,8,"div",0)),2&l&&(L("ngIf",h.vertical),F(1),L("ngIf",!h.vertical))},dependencies:[di,Sn,I1,A3,m9],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]})),c})();class $G{constructor(){}static builder(){return new $G}}class EP extends Ci{constructor(a,l,h,d){super(a,l,h),S(this,"classes",void 0),S(this,"id",""),S(this,"waitingForSenderId",""),S(this,"components",[]),this.classes=d}static builder(){return new EP("",null,null,$G.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}function V2t(c,a){if(1&c&&(R(0,"div"),pe(1,"app-add-component",2),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}let U2t=(()=>{class c extends wg{getUIVisited(){return this.uiConfig.ui.visitedCompilerHelp}getUIBook(){return this.uiConfig.ui.compilerBook}getUIChapter(){return this.uiConfig.ui.compilerChapter}getUILine(){return this.uiConfig.ui.compilerLine}constructor(l,h,d){super(l,h,d),S(this,"appBookName","\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 APP_CMP"),S(this,"appBookChapter","1"),S(this,"helpBookName","\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),S(this,"helpChapterNormal","1"),S(this,"helpChapterConfidential","2"),S(this,"errorsData",Bc.builder()),this.addMenuLink(ai.builder().setLink("#").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ai.builder().setLink("#").setName("\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c").setShape("play").setOnClick(()=>{this.showRunner()}).setIsActive(()=>this.isRunner())).addMenuLink(ai.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}isRunner(){return!(this.components.length<=0)&&this.components[0].data.component?.data instanceof EP}isSettings(){return!(this.components.length<=0)&&this.components[0].data.component?.data instanceof Th}isComponent(l,h=""){if(this.components.length<=0)return!1;let f=this.components[0].data.component?.data;return f?.text==l&&(!h||f?.link.chapter==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let l=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();l?this.routeTo(l,h,d):this.resetDelayed(this.appBookChapter)}}resetDelayed(l){this.config.post(()=>{this.reset(l)})}reset(l){this.routeTo(this.appBookName,l,1)}routeToHelpDelayed(l){this.config.post(()=>{this.routeToHelp(l)})}routeToHelp(l){this.isComponent(this.helpBookName,l)&&l===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,l,1)}routeToDelayed(l,h="",d=-1){this.config.post(()=>{this.routeTo(l,h,d)})}routeTo(l,h="",d=-1){let f=l;if(f){if("\u0441\u0442\u0430\u0440\u0442"==f)return void this.showRunner();if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(Wc,Tl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!1).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Dl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(l){this.config.post(()=>{this.components=l})}clearErrors(){this.errorsData.setErrors([])}setErrors(l){this.errorsData.setErrors(l).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(A1,Th.builder().updateClasses(l=>l.setCalculatorSettings(!0)))))])}showRunner(){this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(B2t,EP.builder())))])}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-compiler"]],features:[vn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,V2t,2,1,"div",1),N()),2&l&&(F(1),L("ngForOf",h.components))},dependencies:[vi,rc]})),c})();function z2t(c,a){if(1&c&&(R(0,"div"),pe(1,"app-add-component",2),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}let H2t=(()=>{class c extends wg{getUIVisited(){return this.uiConfig.ui.visitedCalendarHelp}getUIBook(){return this.uiConfig.ui.calendarBook}getUIChapter(){return this.uiConfig.ui.calendarChapter}getUILine(){return this.uiConfig.ui.calendarLine}constructor(l,h,d){super(l,h,d),S(this,"appBookName","\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c APP_CLD"),S(this,"appBookChapter","1"),S(this,"helpBookName","\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),S(this,"helpChapterNormal","1"),S(this,"helpChapterConfidential","2"),S(this,"errorsData",Bc.builder()),this.addMenuLink(ai.builder().setLink("#").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ai.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}isSettings(){return!(this.components.length<=0)&&this.components[0].data.component?.data instanceof Th}isComponent(l,h=""){if(this.components.length<=0)return!1;let f=this.components[0].data.component?.data;return f?.text==l&&(!h||f?.link.chapter==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let l=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();l?this.routeTo(l,h,d):this.resetDelayed(this.appBookChapter)}}resetDelayed(l){this.config.post(()=>{this.reset(l)})}reset(l){this.routeTo(this.appBookName,l,1)}routeToHelpDelayed(l){this.config.post(()=>{this.routeToHelp(l)})}routeToHelp(l){this.isComponent(this.helpBookName,l)&&l===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,l,1)}routeToDelayed(l,h="",d=-1){this.config.post(()=>{this.routeTo(l,h,d)})}routeTo(l,h="",d=-1){let f=l;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(Wc,Tl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Dl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(l){this.config.post(()=>{this.components=l})}clearErrors(){this.errorsData.setErrors([])}setErrors(l){this.errorsData.setErrors(l).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(A1,Th.builder().updateClasses(l=>l.setCalculatorSettings(!0)))))])}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-calendar"]],features:[vn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,z2t,2,1,"div",1),N()),2&l&&(F(1),L("ngForOf",h.components))},dependencies:[vi,rc]})),c})();function $2t(c,a){if(1&c&&(R(0,"div"),pe(1,"app-add-component",2),N()),2&c){const l=a.$implicit;F(1),L("component",l)}}const W2t=[{path:"about",component:T2t},{path:"main",component:WSe},{path:"main-test",component:k2t},{path:"memorials-pages-editor",component:pit},{path:"help",component:gHe},{path:"d3examples",component:Ynt},{path:"d3Dexamples",component:O2t},{path:"books",component:xmt},{path:"dynamic-components-examples",component:qgt},{path:"tests",component:dit},{path:"memorial",component:Omt},{path:"calculator",component:E2t},{path:"calendar",component:H2t},{path:"compiler",component:U2t},{path:"scheduler",component:(()=>{class c extends wg{getUIVisited(){return this.uiConfig.ui.visitedSchedulerHelp}getUIBook(){return this.uiConfig.ui.schedulerBook}getUIChapter(){return this.uiConfig.ui.schedulerChapter}getUILine(){return this.uiConfig.ui.schedulerLine}constructor(l,h,d){super(l,h,d),S(this,"appBookName","\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 APP_SCH"),S(this,"appBookChapter","1"),S(this,"helpBookName","\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),S(this,"helpChapterNormal","1"),S(this,"helpChapterConfidential","2"),S(this,"errorsData",Bc.builder()),this.addMenuLink(ai.builder().setLink("#").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(ai.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(ai.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}isSettings(){return!(this.components.length<=0)&&this.components[0].data.component?.data instanceof Th}isComponent(l,h=""){if(this.components.length<=0)return!1;let f=this.components[0].data.component?.data;return f?.text==l&&(!h||f?.link.chapter==h)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(pageRequestedDoc||this.getUIVisited().getStringValue()===this.config.environment.version){let l=this.getUIBook().getStringValue(),h=this.getUIChapter().getStringValue(),d=this.getUILine().getNumberValue();l?this.routeTo(l,h,d):this.resetDelayed(this.appBookChapter)}else this.routeToHelpDelayed(this.helpChapterNormal)}resetDelayed(l){this.config.post(()=>{this.reset(l)})}reset(l){this.routeTo(this.appBookName,l,1)}routeToHelpDelayed(l){this.config.post(()=>{this.routeToHelp(l)})}routeToHelp(l){this.isComponent(this.helpBookName,l)&&l===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,l,1)}routeToDelayed(l,h="",d=-1){this.config.post(()=>{this.routeTo(l,h,d)})}routeTo(l,h="",d=-1){let f=l;if(f){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==f)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==f||f==this.helpBookName&&""==h&&d<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==h&&(h="1"),d<0&&(d=1),this.getUIBook().setStringValue(f),this.getUIChapter().setStringValue(h),this.getUILine().setNumberValue(d),this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(Wc,Tl.builder().setText(f).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(Dl.builder().setBookName(f).setChapter(h).setStartLine(d).setEndLine(1e3).setOnRoute(p=>{p?this.routeToDelayed(p.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(l){this.config.post(()=>{this.components=l})}clearErrors(){this.errorsData.setErrors([])}setErrors(l){this.errorsData.setErrors(l).updateClasses(h=>h.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new Wn(ac,Oo.builder().setComponent(new Wn(A1,Th.builder().updateClasses(l=>l.setCalculatorSettings(!0)))))])}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Oh))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-scheduler"]],features:[vn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(l,h){1&l&&(R(0,"div",0),K(1,$2t,2,1,"div",1),N()),2&l&&(F(1),L("ngForOf",h.components))},dependencies:[vi,rc]})),c})()},{path:"index.html",redirectTo:"/about",pathMatch:"full"},{path:"index.night.html",redirectTo:"/about",pathMatch:"full"},{path:"",redirectTo:"/about",pathMatch:"full"}];let G2t=(()=>{class c{}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275mod",Un({type:c})),S(c,"\u0275inj",Ln({imports:[_ee.forRoot(W2t),_ee]})),c})();function GSe(c){return new xt(3e3,!1)}function DDt(){return typeof window<"u"&&typeof window.document<"u"}function WG(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function hm(c){switch(c.length){case 0:return new AS;case 1:return c[0];default:return new dte(c)}}function QSe(c,a,l,h,d=new Map,f=new Map){const p=[],g=[];let m=-1,v=null;if(h.forEach(y=>{const _=y.get("offset"),b=_==m,C=b&&v||new Map;y.forEach((x,w)=>{let O=w,D=x;if("offset"!==w)switch(O=a.normalizePropertyName(O,p),D){case"!":D=d.get(w);break;case Tf:D=f.get(w);break;default:D=a.normalizeStyleValue(w,O,D,p)}C.set(O,D)}),b||g.push(C),v=C,m=_}),p.length)throw function pDt(c){return new xt(3502,!1)}();return g}function GG(c,a,l,h){switch(a){case"start":c.onStart(()=>h(l&&QG(l,"start",c)));break;case"done":c.onDone(()=>h(l&&QG(l,"done",c)));break;case"destroy":c.onDestroy(()=>h(l&&QG(l,"destroy",c)))}}function QG(c,a,l){const f=jG(c.element,c.triggerName,c.fromState,c.toState,a||c.phaseName,l.totalTime??c.totalTime,!!l.disabled),p=c._data;return null!=p&&(f._data=p),f}function jG(c,a,l,h,d="",f=0,p){return{element:c,triggerName:a,fromState:l,toState:h,phaseName:d,totalTime:f,disabled:!!p}}function tu(c,a,l){let h=c.get(a);return h||c.set(a,h=l),h}function jSe(c){const a=c.indexOf(":");return[c.substring(1,a),c.slice(a+1)]}let ZG=(c,a)=>!1,ZSe=(c,a,l)=>[],qSe=null;function qG(c){const a=c.parentNode||c.host;return a===qSe?null:a}(WG()||typeof Element<"u")&&(DDt()?(qSe=(()=>document.documentElement)(),ZG=(c,a)=>{for(;a;){if(a===c)return!0;a=qG(a)}return!1}):ZG=(c,a)=>c.contains(a),ZSe=(c,a,l)=>{if(l)return Array.from(c.querySelectorAll(a));const h=c.querySelector(a);return h?[h]:[]});let Iv=null,XSe=!1;const YSe=ZG,KSe=ZSe;let JSe=(()=>{class c{validateStyleProperty(l){return function kDt(c){Iv||(Iv=function MDt(){return typeof document<"u"?document.body:null}()||{},XSe=!!Iv.style&&"WebkitAppearance"in Iv.style);let a=!0;return Iv.style&&!function TDt(c){return"ebkit"==c.substring(1,6)}(c)&&(a=c in Iv.style,!a&&XSe&&(a="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in Iv.style)),a}(l)}matchesElement(l,h){return!1}containsElement(l,h){return YSe(l,h)}getParentElement(l){return qG(l)}query(l,h,d){return KSe(l,h,d)}computeStyle(l,h,d){return d||""}animate(l,h,d,f,p,g=[],m){return new AS(d,f)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})(),XG=(()=>{class c{}return c.NOOP=new JSe,c})();const YG="ng-enter",AP="ng-leave",IP="ng-trigger",PP=".ng-trigger",txe="ng-animating",KG=".ng-animating";function Mp(c){if("number"==typeof c)return c;const a=c.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:JG(parseFloat(a[1]),a[2])}function JG(c,a){return"s"===a?1e3*c:c}function RP(c,a,l){return c.hasOwnProperty("duration")?c:function IDt(c,a,l){let d,f=0,p="";if("string"==typeof c){const g=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return a.push(GSe()),{duration:0,delay:0,easing:""};d=JG(parseFloat(g[1]),g[2]);const m=g[3];null!=m&&(f=JG(parseFloat(m),g[4]));const v=g[5];v&&(p=v)}else d=c;if(!l){let g=!1,m=a.length;d<0&&(a.push(function Q2t(){return new xt(3100,!1)}()),g=!0),f<0&&(a.push(function j2t(){return new xt(3101,!1)}()),g=!0),g&&a.splice(m,0,GSe())}return{duration:d,delay:f,easing:p}}(c,a,l)}function R2(c,a={}){return Object.keys(c).forEach(l=>{a[l]=c[l]}),a}function nxe(c){const a=new Map;return Object.keys(c).forEach(l=>{a.set(l,c[l])}),a}function dm(c,a=new Map,l){if(l)for(let[h,d]of l)a.set(h,d);for(let[h,d]of c)a.set(h,d);return a}function rxe(c,a,l){return l?a+":"+l+";":""}function sxe(c){let a="";for(let l=0;l<c.style.length;l++){const h=c.style.item(l);a+=rxe(0,h,c.style.getPropertyValue(h))}for(const l in c.style)c.style.hasOwnProperty(l)&&!l.startsWith("_")&&(a+=rxe(0,LDt(l),c.style[l]));c.setAttribute("style",a)}function af(c,a,l){c.style&&(a.forEach((h,d)=>{const f=tQ(d);l&&!l.has(d)&&l.set(d,c.style[f]),c.style[f]=h}),WG()&&sxe(c))}function Pv(c,a){c.style&&(a.forEach((l,h)=>{const d=tQ(h);c.style[d]=""}),WG()&&sxe(c))}function F2(c){return Array.isArray(c)?1==c.length?c[0]:ute(c):c}const eQ=new RegExp("{{\\s*(.+?)\\s*}}","g");function oxe(c){let a=[];if("string"==typeof c){let l;for(;l=eQ.exec(c);)a.push(l[1]);eQ.lastIndex=0}return a}function L2(c,a,l){const h=c.toString(),d=h.replace(eQ,(f,p)=>{let g=a[p];return null==g&&(l.push(function q2t(c){return new xt(3003,!1)}()),g=""),g.toString()});return d==h?c:d}function FP(c){const a=[];let l=c.next();for(;!l.done;)a.push(l.value),l=c.next();return a}const FDt=/-+([a-z0-9])/g;function tQ(c){return c.replace(FDt,(...a)=>a[1].toUpperCase())}function LDt(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function nu(c,a,l){switch(a.type){case 7:return c.visitTrigger(a,l);case 0:return c.visitState(a,l);case 1:return c.visitTransition(a,l);case 2:return c.visitSequence(a,l);case 3:return c.visitGroup(a,l);case 4:return c.visitAnimate(a,l);case 5:return c.visitKeyframes(a,l);case 6:return c.visitStyle(a,l);case 8:return c.visitReference(a,l);case 9:return c.visitAnimateChild(a,l);case 10:return c.visitAnimateRef(a,l);case 11:return c.visitQuery(a,l);case 12:return c.visitStagger(a,l);default:throw function X2t(c){return new xt(3004,!1)}()}}function axe(c,a){return window.getComputedStyle(c)[a]}function HDt(c,a){const l=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function $Dt(c,a,l){if(":"==c[0]){const m=function WDt(c,a){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(l,h)=>parseFloat(h)>parseFloat(l);case":decrement":return(l,h)=>parseFloat(h)<parseFloat(l);default:return a.push(function uDt(c){return new xt(3016,!1)}()),"* => *"}}(c,l);if("function"==typeof m)return void a.push(m);c=m}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return l.push(function cDt(c){return new xt(3015,!1)}()),a;const d=h[1],f=h[2],p=h[3];a.push(lxe(d,p));"<"==f[0]&&!("*"==d&&"*"==p)&&a.push(lxe(p,d))}(h,l,a)):l.push(c),l}const VP=new Set(["true","1"]),UP=new Set(["false","0"]);function lxe(c,a){const l=VP.has(c)||UP.has(c),h=VP.has(a)||UP.has(a);return(d,f)=>{let p="*"==c||c==d,g="*"==a||a==f;return!p&&l&&"boolean"==typeof d&&(p=d?VP.has(c):UP.has(c)),!g&&h&&"boolean"==typeof f&&(g=f?VP.has(a):UP.has(a)),p&&g}}const GDt=new RegExp("s*:selfs*,?","g");function nQ(c,a,l,h){return new QDt(c).build(a,l,h)}class QDt{constructor(a){this._driver=a}build(a,l,h){const d=new qDt(l);return this._resetContextStyleTimingState(d),nu(this,F2(a),d)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles=new Map,a.collectedStyles.set("",new Map),a.currentTime=0}visitTrigger(a,l){let h=l.queryCount=0,d=l.depCount=0;const f=[],p=[];return"@"==a.name.charAt(0)&&l.errors.push(function K2t(){return new xt(3006,!1)}()),a.definitions.forEach(g=>{if(this._resetContextStyleTimingState(l),0==g.type){const m=g,v=m.name;v.toString().split(/\s*,\s*/).forEach(y=>{m.name=y,f.push(this.visitState(m,l))}),m.name=v}else if(1==g.type){const m=this.visitTransition(g,l);h+=m.queryCount,d+=m.depCount,p.push(m)}else l.errors.push(function J2t(){return new xt(3007,!1)}())}),{type:7,name:a.name,states:f,transitions:p,queryCount:h,depCount:d,options:null}}visitState(a,l){const h=this.visitStyle(a.styles,l),d=a.options&&a.options.params||null;if(h.containsDynamicStyles){const f=new Set,p=d||{};h.styles.forEach(g=>{g instanceof Map&&g.forEach(m=>{oxe(m).forEach(v=>{p.hasOwnProperty(v)||f.add(v)})})}),f.size&&(FP(f.values()),l.errors.push(function eDt(c,a){return new xt(3008,!1)}()))}return{type:0,name:a.name,style:h,options:d?{params:d}:null}}visitTransition(a,l){l.queryCount=0,l.depCount=0;const h=nu(this,F2(a.animation),l);return{type:1,matchers:HDt(a.expr,l.errors),animation:h,queryCount:l.queryCount,depCount:l.depCount,options:Rv(a.options)}}visitSequence(a,l){return{type:2,steps:a.steps.map(h=>nu(this,h,l)),options:Rv(a.options)}}visitGroup(a,l){const h=l.currentTime;let d=0;const f=a.steps.map(p=>{l.currentTime=h;const g=nu(this,p,l);return d=Math.max(d,l.currentTime),g});return l.currentTime=d,{type:3,steps:f,options:Rv(a.options)}}visitAnimate(a,l){const h=function YDt(c,a){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return iQ(RP(c,a).duration,0,"");const l=c;if(l.split(/\s+/).some(f=>"{"==f.charAt(0)&&"{"==f.charAt(1))){const f=iQ(0,0,"");return f.dynamic=!0,f.strValue=l,f}const d=RP(l,a);return iQ(d.duration,d.delay,d.easing)}(a.timings,l.errors);l.currentAnimateTimings=h;let d,f=a.styles?a.styles:lr({});if(5==f.type)d=this.visitKeyframes(f,l);else{let p=a.styles,g=!1;if(!p){g=!0;const v={};h.easing&&(v.easing=h.easing),p=lr(v)}l.currentTime+=h.duration+h.delay;const m=this.visitStyle(p,l);m.isEmptyStep=g,d=m}return l.currentAnimateTimings=null,{type:4,timings:h,style:d,options:null}}visitStyle(a,l){const h=this._makeStyleAst(a,l);return this._validateStyleAst(h,l),h}_makeStyleAst(a,l){const h=[],d=Array.isArray(a.styles)?a.styles:[a.styles];for(let g of d)"string"==typeof g?g===Tf?h.push(g):l.errors.push(new xt(3002,!1)):h.push(nxe(g));let f=!1,p=null;return h.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(p=g.get("easing"),g.delete("easing")),!f))for(let m of g.values())if(m.toString().indexOf("{{")>=0){f=!0;break}}),{type:6,styles:h,easing:p,offset:a.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(a,l){const h=l.currentAnimateTimings;let d=l.currentTime,f=l.currentTime;h&&f>0&&(f-=h.duration+h.delay),a.styles.forEach(p=>{"string"!=typeof p&&p.forEach((g,m)=>{const v=l.collectedStyles.get(l.currentQuerySelector),y=v.get(m);let _=!0;y&&(f!=d&&f>=y.startTime&&d<=y.endTime&&(l.errors.push(function nDt(c,a,l,h,d){return new xt(3010,!1)}()),_=!1),f=y.startTime),_&&v.set(m,{startTime:f,endTime:d}),l.options&&function RDt(c,a,l){const h=a.params||{},d=oxe(c);d.length&&d.forEach(f=>{h.hasOwnProperty(f)||l.push(function Z2t(c){return new xt(3001,!1)}())})}(g,l.options,l.errors)})})}visitKeyframes(a,l){const h={type:5,styles:[],options:null};if(!l.currentAnimateTimings)return l.errors.push(function iDt(){return new xt(3011,!1)}()),h;let f=0;const p=[];let g=!1,m=!1,v=0;const y=a.steps.map(D=>{const T=this._makeStyleAst(D,l);let M=null!=T.offset?T.offset:function XDt(c){if("string"==typeof c)return null;let a=null;if(Array.isArray(c))c.forEach(l=>{if(l instanceof Map&&l.has("offset")){const h=l;a=parseFloat(h.get("offset")),h.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const l=c;a=parseFloat(l.get("offset")),l.delete("offset")}return a}(T.styles),k=0;return null!=M&&(f++,k=T.offset=M),m=m||k<0||k>1,g=g||k<v,v=k,p.push(k),T});m&&l.errors.push(function rDt(){return new xt(3012,!1)}()),g&&l.errors.push(function sDt(){return new xt(3200,!1)}());const _=a.steps.length;let b=0;f>0&&f<_?l.errors.push(function oDt(){return new xt(3202,!1)}()):0==f&&(b=1/(_-1));const C=_-1,x=l.currentTime,w=l.currentAnimateTimings,O=w.duration;return y.forEach((D,T)=>{const M=b>0?T==C?1:b*T:p[T],k=M*O;l.currentTime=x+w.delay+k,w.duration=k,this._validateStyleAst(D,l),D.offset=M,h.styles.push(D)}),h}visitReference(a,l){return{type:8,animation:nu(this,F2(a.animation),l),options:Rv(a.options)}}visitAnimateChild(a,l){return l.depCount++,{type:9,options:Rv(a.options)}}visitAnimateRef(a,l){return{type:10,animation:this.visitReference(a.animation,l),options:Rv(a.options)}}visitQuery(a,l){const h=l.currentQuerySelector,d=a.options||{};l.queryCount++,l.currentQuery=a;const[f,p]=function jDt(c){const a=!!c.split(/\s*,\s*/).find(l=>":self"==l);return a&&(c=c.replace(GDt,"")),c=c.replace(/@\*/g,PP).replace(/@\w+/g,l=>PP+"-"+l.slice(1)).replace(/:animating/g,KG),[c,a]}(a.selector);l.currentQuerySelector=h.length?h+" "+f:f,tu(l.collectedStyles,l.currentQuerySelector,new Map);const g=nu(this,F2(a.animation),l);return l.currentQuery=null,l.currentQuerySelector=h,{type:11,selector:f,limit:d.limit||0,optional:!!d.optional,includeSelf:p,animation:g,originalSelector:a.selector,options:Rv(a.options)}}visitStagger(a,l){l.currentQuery||l.errors.push(function aDt(){return new xt(3013,!1)}());const h="full"===a.timings?{duration:0,delay:0,easing:"full"}:RP(a.timings,l.errors,!0);return{type:12,animation:nu(this,F2(a.animation),l),timings:h,options:null}}}class qDt{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Rv(c){return c?(c=R2(c)).params&&(c.params=function ZDt(c){return c?R2(c):null}(c.params)):c={},c}function iQ(c,a,l){return{duration:c,delay:a,easing:l}}function rQ(c,a,l,h,d,f,p=null,g=!1){return{type:1,element:c,keyframes:a,preStyleProps:l,postStyleProps:h,duration:d,delay:f,totalTime:d+f,easing:p,subTimeline:g}}class zP{constructor(){this._map=new Map}get(a){return this._map.get(a)||[]}append(a,l){let h=this._map.get(a);h||this._map.set(a,h=[]),h.push(...l)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const eTt=new RegExp(":enter","g"),nTt=new RegExp(":leave","g");function sQ(c,a,l,h,d,f=new Map,p=new Map,g,m,v=[]){return(new iTt).buildKeyframes(c,a,l,h,d,f,p,g,m,v)}class iTt{buildKeyframes(a,l,h,d,f,p,g,m,v,y=[]){v=v||new zP;const _=new oQ(a,l,v,d,f,y,[]);_.options=m;const b=m.delay?Mp(m.delay):0;_.currentTimeline.delayNextStep(b),_.currentTimeline.setStyles([p],null,_.errors,m),nu(this,h,_);const C=_.timelines.filter(x=>x.containsAnimation());if(C.length&&g.size){let x;for(let w=C.length-1;w>=0;w--){const O=C[w];if(O.element===l){x=O;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([g],null,_.errors,m)}return C.length?C.map(x=>x.buildKeyframes()):[rQ(l,[],[],[],0,b,"",!1)]}visitTrigger(a,l){}visitState(a,l){}visitTransition(a,l){}visitAnimateChild(a,l){const h=l.subInstructions.get(l.element);if(h){const d=l.createSubContext(a.options),f=l.currentTimeline.currentTime,p=this._visitSubInstructions(h,d,d.options);f!=p&&l.transformIntoNewTimeline(p)}l.previousNode=a}visitAnimateRef(a,l){const h=l.createSubContext(a.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([a.options,a.animation.options],l,h),this.visitReference(a.animation,h),l.transformIntoNewTimeline(h.currentTimeline.currentTime),l.previousNode=a}_applyAnimationRefDelays(a,l,h){for(const d of a){const f=d?.delay;if(f){const p="number"==typeof f?f:Mp(L2(f,d?.params??{},l.errors));h.delayNextStep(p)}}}_visitSubInstructions(a,l,h){let f=l.currentTimeline.currentTime;const p=null!=h.duration?Mp(h.duration):null,g=null!=h.delay?Mp(h.delay):null;return 0!==p&&a.forEach(m=>{const v=l.appendInstructionToTimeline(m,p,g);f=Math.max(f,v.duration+v.delay)}),f}visitReference(a,l){l.updateOptions(a.options,!0),nu(this,a.animation,l),l.previousNode=a}visitSequence(a,l){const h=l.subContextCount;let d=l;const f=a.options;if(f&&(f.params||f.delay)&&(d=l.createSubContext(f),d.transformIntoNewTimeline(),null!=f.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=HP);const p=Mp(f.delay);d.delayNextStep(p)}a.steps.length&&(a.steps.forEach(p=>nu(this,p,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>h&&d.transformIntoNewTimeline()),l.previousNode=a}visitGroup(a,l){const h=[];let d=l.currentTimeline.currentTime;const f=a.options&&a.options.delay?Mp(a.options.delay):0;a.steps.forEach(p=>{const g=l.createSubContext(a.options);f&&g.delayNextStep(f),nu(this,p,g),d=Math.max(d,g.currentTimeline.currentTime),h.push(g.currentTimeline)}),h.forEach(p=>l.currentTimeline.mergeTimelineCollectedStyles(p)),l.transformIntoNewTimeline(d),l.previousNode=a}_visitTiming(a,l){if(a.dynamic){const h=a.strValue;return RP(l.params?L2(h,l.params,l.errors):h,l.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,l){const h=l.currentAnimateTimings=this._visitTiming(a.timings,l),d=l.currentTimeline;h.delay&&(l.incrementTime(h.delay),d.snapshotCurrentStyles());const f=a.style;5==f.type?this.visitKeyframes(f,l):(l.incrementTime(h.duration),this.visitStyle(f,l),d.applyStylesToKeyframe()),l.currentAnimateTimings=null,l.previousNode=a}visitStyle(a,l){const h=l.currentTimeline,d=l.currentAnimateTimings;!d&&h.hasCurrentStyleProperties()&&h.forwardFrame();const f=d&&d.easing||a.easing;a.isEmptyStep?h.applyEmptyStep(f):h.setStyles(a.styles,f,l.errors,l.options),l.previousNode=a}visitKeyframes(a,l){const h=l.currentAnimateTimings,d=l.currentTimeline.duration,f=h.duration,g=l.createSubContext().currentTimeline;g.easing=h.easing,a.styles.forEach(m=>{g.forwardTime((m.offset||0)*f),g.setStyles(m.styles,m.easing,l.errors,l.options),g.applyStylesToKeyframe()}),l.currentTimeline.mergeTimelineCollectedStyles(g),l.transformIntoNewTimeline(d+f),l.previousNode=a}visitQuery(a,l){const h=l.currentTimeline.currentTime,d=a.options||{},f=d.delay?Mp(d.delay):0;f&&(6===l.previousNode.type||0==h&&l.currentTimeline.hasCurrentStyleProperties())&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=HP);let p=h;const g=l.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!d.optional,l.errors);l.currentQueryTotal=g.length;let m=null;g.forEach((v,y)=>{l.currentQueryIndex=y;const _=l.createSubContext(a.options,v);f&&_.delayNextStep(f),v===l.element&&(m=_.currentTimeline),nu(this,a.animation,_),_.currentTimeline.applyStylesToKeyframe(),p=Math.max(p,_.currentTimeline.currentTime)}),l.currentQueryIndex=0,l.currentQueryTotal=0,l.transformIntoNewTimeline(p),m&&(l.currentTimeline.mergeTimelineCollectedStyles(m),l.currentTimeline.snapshotCurrentStyles()),l.previousNode=a}visitStagger(a,l){const h=l.parentContext,d=l.currentTimeline,f=a.timings,p=Math.abs(f.duration),g=p*(l.currentQueryTotal-1);let m=p*l.currentQueryIndex;switch(f.duration<0?"reverse":f.easing){case"reverse":m=g-m;break;case"full":m=h.currentStaggerTime}const y=l.currentTimeline;m&&y.delayNextStep(m);const _=y.currentTime;nu(this,a.animation,l),l.previousNode=a,h.currentStaggerTime=d.currentTime-_+(d.startTime-h.currentTimeline.startTime)}}const HP={};class oQ{constructor(a,l,h,d,f,p,g,m){this._driver=a,this.element=l,this.subInstructions=h,this._enterClassName=d,this._leaveClassName=f,this.errors=p,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=HP,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new $P(this._driver,l,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,l){if(!a)return;const h=a;let d=this.options;null!=h.duration&&(d.duration=Mp(h.duration)),null!=h.delay&&(d.delay=Mp(h.delay));const f=h.params;if(f){let p=d.params;p||(p=this.options.params={}),Object.keys(f).forEach(g=>{(!l||!p.hasOwnProperty(g))&&(p[g]=L2(f[g],p,this.errors))})}}_copyOptions(){const a={};if(this.options){const l=this.options.params;if(l){const h=a.params={};Object.keys(l).forEach(d=>{h[d]=l[d]})}}return a}createSubContext(a=null,l,h){const d=l||this.element,f=new oQ(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,h||0));return f.previousNode=this.previousNode,f.currentAnimateTimings=this.currentAnimateTimings,f.options=this._copyOptions(),f.updateOptions(a),f.currentQueryIndex=this.currentQueryIndex,f.currentQueryTotal=this.currentQueryTotal,f.parentContext=this,this.subContextCount++,f}transformIntoNewTimeline(a){return this.previousNode=HP,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,l,h){const d={duration:l??a.duration,delay:this.currentTimeline.currentTime+(h??0)+a.delay,easing:""},f=new rTt(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,d,a.stretchStartingKeyframe);return this.timelines.push(f),d}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,l,h,d,f,p){let g=[];if(d&&g.push(this.element),a.length>0){a=(a=a.replace(eTt,"."+this._enterClassName)).replace(nTt,"."+this._leaveClassName);let v=this._driver.query(this.element,a,1!=h);0!==h&&(v=h<0?v.slice(v.length+h,v.length):v.slice(0,h)),g.push(...v)}return!f&&0==g.length&&p.push(function lDt(c){return new xt(3014,!1)}()),g}}class $P{constructor(a,l,h,d){this._driver=a,this.element=l,this.startTime=h,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(l),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(l,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const l=1===this._keyframes.size&&this._pendingStyles.size;this.duration||l?(this.forwardTime(this.currentTime+a),l&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,l){return this.applyStylesToKeyframe(),new $P(this._driver,a,l||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,l){this._localTimelineStyles.set(a,l),this._globalTimelineStyles.set(a,l),this._styleSummary.set(a,{time:this.currentTime,value:l})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&this._previousKeyframe.set("easing",a);for(let[l,h]of this._globalTimelineStyles)this._backFill.set(l,h||Tf),this._currentKeyframe.set(l,Tf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,l,h,d){l&&this._previousKeyframe.set("easing",l);const f=d&&d.params||{},p=function sTt(c,a){const l=new Map;let h;return c.forEach(d=>{if("*"===d){h=h||a.keys();for(let f of h)l.set(f,Tf)}else dm(d,l)}),l}(a,this._globalTimelineStyles);for(let[g,m]of p){const v=L2(m,f,h);this._pendingStyles.set(g,v),this._localTimelineStyles.has(g)||this._backFill.set(g,this._globalTimelineStyles.get(g)??Tf),this._updateStyle(g,v)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((a,l)=>{this._currentKeyframe.set(l,a)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((a,l)=>{this._currentKeyframe.has(l)||this._currentKeyframe.set(l,a)}))}snapshotCurrentStyles(){for(let[a,l]of this._localTimelineStyles)this._pendingStyles.set(a,l),this._updateStyle(a,l)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let l in this._currentKeyframe)a.push(l);return a}mergeTimelineCollectedStyles(a){a._styleSummary.forEach((l,h)=>{const d=this._styleSummary.get(h);(!d||l.time>d.time)&&this._updateStyle(h,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,l=new Set,h=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((g,m)=>{const v=dm(g,new Map,this._backFill);v.forEach((y,_)=>{"!"===y?a.add(_):y===Tf&&l.add(_)}),h||v.set("offset",m/this.duration),d.push(v)});const f=a.size?FP(a.values()):[],p=l.size?FP(l.values()):[];if(h){const g=d[0],m=new Map(g);g.set("offset",0),m.set("offset",1),d=[g,m]}return rQ(this.element,d,f,p,this.duration,this.startTime,this.easing,!1)}}class rTt extends $P{constructor(a,l,h,d,f,p,g=!1){super(a,l,p.delay),this.keyframes=h,this.preStyleProps=d,this.postStyleProps=f,this._stretchStartingKeyframe=g,this.timings={duration:p.duration,delay:p.delay,easing:p.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:l,duration:h,easing:d}=this.timings;if(this._stretchStartingKeyframe&&l){const f=[],p=h+l,g=l/p,m=dm(a[0]);m.set("offset",0),f.push(m);const v=dm(a[0]);v.set("offset",hxe(g)),f.push(v);const y=a.length-1;for(let _=1;_<=y;_++){let b=dm(a[_]);const C=b.get("offset");b.set("offset",hxe((l+C*h)/p)),f.push(b)}h=p,l=0,d="",a=f}return rQ(this.element,a,this.preStyleProps,this.postStyleProps,h,l,d,!0)}}function hxe(c,a=3){const l=Math.pow(10,a-1);return Math.round(c*l)/l}class aQ{}const oTt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class aTt extends aQ{normalizePropertyName(a,l){return tQ(a)}normalizeStyleValue(a,l,h,d){let f="";const p=h.toString().trim();if(oTt.has(l)&&0!==h&&"0"!==h)if("number"==typeof h)f="px";else{const g=h.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&d.push(function Y2t(c,a){return new xt(3005,!1)}())}return p+f}}function dxe(c,a,l,h,d,f,p,g,m,v,y,_,b){return{type:0,element:c,triggerName:a,isRemovalTransition:d,fromState:l,fromStyles:f,toState:h,toStyles:p,timelines:g,queriedElements:m,preStyleProps:v,postStyleProps:y,totalTime:_,errors:b}}const lQ={};class fxe{constructor(a,l,h){this._triggerName=a,this.ast=l,this._stateStyles=h}match(a,l,h,d){return function lTt(c,a,l,h,d){return c.some(f=>f(a,l,h,d))}(this.ast.matchers,a,l,h,d)}buildStyles(a,l,h){let d=this._stateStyles.get("*");return void 0!==a&&(d=this._stateStyles.get(a?.toString())||d),d?d.buildStyles(l,h):new Map}build(a,l,h,d,f,p,g,m,v,y){const _=[],b=this.ast.options&&this.ast.options.params||lQ,x=this.buildStyles(h,g&&g.params||lQ,_),w=m&&m.params||lQ,O=this.buildStyles(d,w,_),D=new Set,T=new Map,M=new Map,k="void"===d,E={params:cTt(w,b),delay:this.ast.options?.delay},P=y?[]:sQ(a,l,this.ast.animation,f,p,x,O,E,v,_);let V=0;if(P.forEach(U=>{V=Math.max(U.duration+U.delay,V)}),_.length)return dxe(l,this._triggerName,h,d,k,x,O,[],[],T,M,V,_);P.forEach(U=>{const $=U.element,H=tu(T,$,new Set);U.preStyleProps.forEach(ee=>H.add(ee));const J=tu(M,$,new Set);U.postStyleProps.forEach(ee=>J.add(ee)),$!==l&&D.add($)});const I=FP(D.values());return dxe(l,this._triggerName,h,d,k,x,O,P,I,T,M,V)}}function cTt(c,a){const l=R2(a);for(const h in c)c.hasOwnProperty(h)&&null!=c[h]&&(l[h]=c[h]);return l}class uTt{constructor(a,l,h){this.styles=a,this.defaultParams=l,this.normalizer=h}buildStyles(a,l){const h=new Map,d=R2(this.defaultParams);return Object.keys(a).forEach(f=>{const p=a[f];null!==p&&(d[f]=p)}),this.styles.styles.forEach(f=>{"string"!=typeof f&&f.forEach((p,g)=>{p&&(p=L2(p,d,l));const m=this.normalizer.normalizePropertyName(g,l);p=this.normalizer.normalizeStyleValue(g,m,p,l),h.set(g,p)})}),h}}class dTt{constructor(a,l,h){this.name=a,this.ast=l,this._normalizer=h,this.transitionFactories=[],this.states=new Map,l.states.forEach(d=>{this.states.set(d.name,new uTt(d.style,d.options&&d.options.params||{},h))}),pxe(this.states,"true","1"),pxe(this.states,"false","0"),l.transitions.forEach(d=>{this.transitionFactories.push(new fxe(a,d,this.states))}),this.fallbackTransition=function fTt(c,a,l){return new fxe(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(p,g)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,l,h,d){return this.transitionFactories.find(p=>p.match(a,l,h,d))||null}matchStyles(a,l,h){return this.fallbackTransition.buildStyles(a,l,h)}}function pxe(c,a,l){c.has(a)?c.has(l)||c.set(l,c.get(a)):c.has(l)&&c.set(a,c.get(l))}const pTt=new zP;class gTt{constructor(a,l,h){this.bodyNode=a,this._driver=l,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(a,l){const h=[],f=nQ(this._driver,l,h,[]);if(h.length)throw function gDt(c){return new xt(3503,!1)}();this._animations.set(a,f)}_buildPlayer(a,l,h){const d=a.element,f=QSe(0,this._normalizer,0,a.keyframes,l,h);return this._driver.animate(d,f,a.duration,a.delay,a.easing,[],!0)}create(a,l,h={}){const d=[],f=this._animations.get(a);let p;const g=new Map;if(f?(p=sQ(this._driver,l,f,YG,AP,new Map,new Map,h,pTt,d),p.forEach(y=>{const _=tu(g,y.element,new Map);y.postStyleProps.forEach(b=>_.set(b,null))})):(d.push(function mDt(){return new xt(3300,!1)}()),p=[]),d.length)throw function vDt(c){return new xt(3504,!1)}();g.forEach((y,_)=>{y.forEach((b,C)=>{y.set(C,this._driver.computeStyle(_,C,Tf))})});const v=hm(p.map(y=>{const _=g.get(y.element);return this._buildPlayer(y,new Map,_)}));return this._playersById.set(a,v),v.onDestroy(()=>this.destroy(a)),this.players.push(v),v}destroy(a){const l=this._getPlayer(a);l.destroy(),this._playersById.delete(a);const h=this.players.indexOf(l);h>=0&&this.players.splice(h,1)}_getPlayer(a){const l=this._playersById.get(a);if(!l)throw function yDt(c){return new xt(3301,!1)}();return l}listen(a,l,h,d){const f=jG(l,"","","");return GG(this._getPlayer(a),h,f,d),()=>{}}command(a,l,h,d){if("register"==h)return void this.register(a,d[0]);if("create"==h)return void this.create(a,l,d[0]||{});const f=this._getPlayer(a);switch(h){case"play":f.play();break;case"pause":f.pause();break;case"reset":f.reset();break;case"restart":f.restart();break;case"finish":f.finish();break;case"init":f.init();break;case"setPosition":f.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(a)}}}const gxe="ng-animate-queued",cQ="ng-animate-disabled",bTt=[],mxe={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},CTt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vu="__ng_removed";class uQ{get params(){return this.options.params}constructor(a,l=""){this.namespaceId=l;const h=a&&a.hasOwnProperty("value");if(this.value=function OTt(c){return c??null}(h?a.value:a),h){const f=R2(a);delete f.value,this.options=f}else this.options={};this.options.params||(this.options.params={})}absorbOptions(a){const l=a.params;if(l){const h=this.options.params;Object.keys(l).forEach(d=>{null==h[d]&&(h[d]=l[d])})}}}const N2="void",hQ=new uQ(N2);class STt{constructor(a,l,h){this.id=a,this.hostElement=l,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,Uu(l,this._hostClassName)}listen(a,l,h,d){if(!this._triggers.has(l))throw function _Dt(c,a){return new xt(3302,!1)}();if(null==h||0==h.length)throw function bDt(c){return new xt(3303,!1)}();if(!function DTt(c){return"start"==c||"done"==c}(h))throw function CDt(c,a){return new xt(3400,!1)}();const f=tu(this._elementListeners,a,[]),p={name:l,phase:h,callback:d};f.push(p);const g=tu(this._engine.statesByElement,a,new Map);return g.has(l)||(Uu(a,IP),Uu(a,IP+"-"+l),g.set(l,hQ)),()=>{this._engine.afterFlush(()=>{const m=f.indexOf(p);m>=0&&f.splice(m,1),this._triggers.has(l)||g.delete(l)})}}register(a,l){return!this._triggers.has(a)&&(this._triggers.set(a,l),!0)}_getTrigger(a){const l=this._triggers.get(a);if(!l)throw function SDt(c){return new xt(3401,!1)}();return l}trigger(a,l,h,d=!0){const f=this._getTrigger(l),p=new dQ(this.id,l,a);let g=this._engine.statesByElement.get(a);g||(Uu(a,IP),Uu(a,IP+"-"+l),this._engine.statesByElement.set(a,g=new Map));let m=g.get(l);const v=new uQ(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),g.set(l,v),m||(m=hQ),v.value!==N2&&m.value===v.value){if(!function MTt(c,a){const l=Object.keys(c),h=Object.keys(a);if(l.length!=h.length)return!1;for(let d=0;d<l.length;d++){const f=l[d];if(!a.hasOwnProperty(f)||c[f]!==a[f])return!1}return!0}(m.params,v.params)){const w=[],O=f.matchStyles(m.value,m.params,w),D=f.matchStyles(v.value,v.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{Pv(a,O),af(a,D)})}return}const b=tu(this._engine.playersByElement,a,[]);b.forEach(w=>{w.namespaceId==this.id&&w.triggerName==l&&w.queued&&w.destroy()});let C=f.matchTransition(m.value,v.value,a,v.params),x=!1;if(!C){if(!d)return;C=f.fallbackTransition,x=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:l,transition:C,fromState:m,toState:v,player:p,isFallbackTransition:x}),x||(Uu(a,gxe),p.onStart(()=>{oC(a,gxe)})),p.onDone(()=>{let w=this.players.indexOf(p);w>=0&&this.players.splice(w,1);const O=this._engine.playersByElement.get(a);if(O){let D=O.indexOf(p);D>=0&&O.splice(D,1)}}),this.players.push(p),b.push(p),p}deregister(a){this._triggers.delete(a),this._engine.statesByElement.forEach(l=>l.delete(a)),this._elementListeners.forEach((l,h)=>{this._elementListeners.set(h,l.filter(d=>d.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const l=this._engine.playersByElement.get(a);l&&(l.forEach(h=>h.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,l){const h=this._engine.driver.query(a,PP,!0);h.forEach(d=>{if(d[Vu])return;const f=this._engine.fetchNamespacesByElement(d);f.size?f.forEach(p=>p.triggerLeaveAnimation(d,l,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(a,l,h,d){const f=this._engine.statesByElement.get(a),p=new Map;if(f){const g=[];if(f.forEach((m,v)=>{if(p.set(v,m.value),this._triggers.has(v)){const y=this.trigger(a,v,N2,d);y&&g.push(y)}}),g.length)return this._engine.markElementAsRemoved(this.id,a,!0,l,p),h&&hm(g).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const l=this._elementListeners.get(a),h=this._engine.statesByElement.get(a);if(l&&h){const d=new Set;l.forEach(f=>{const p=f.name;if(d.has(p))return;d.add(p);const m=this._triggers.get(p).fallbackTransition,v=h.get(p)||hQ,y=new uQ(N2),_=new dQ(this.id,p,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:p,transition:m,fromState:v,toState:y,player:_,isFallbackTransition:!0})})}}removeNode(a,l){const h=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,l),this.triggerLeaveAnimation(a,l,!0))return;let d=!1;if(h.totalAnimations){const f=h.players.length?h.playersByQueriedElement.get(a):[];if(f&&f.length)d=!0;else{let p=a;for(;p=p.parentNode;)if(h.statesByElement.get(p)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(a),d)h.markElementAsRemoved(this.id,a,!1,l);else{const f=a[Vu];(!f||f===mxe)&&(h.afterFlush(()=>this.clearElementCache(a)),h.destroyInnerAnimations(a),h._onRemovalComplete(a,l))}}insertNode(a,l){Uu(a,this._hostClassName)}drainQueuedTransitions(a){const l=[];return this._queue.forEach(h=>{const d=h.player;if(d.destroyed)return;const f=h.element,p=this._elementListeners.get(f);p&&p.forEach(g=>{if(g.name==h.triggerName){const m=jG(f,h.triggerName,h.fromState.value,h.toState.value);m._data=a,GG(h.player,g.phase,m,g.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):l.push(h)}),this._queue=[],l.sort((h,d)=>{const f=h.transition.ast.depCount,p=d.transition.ast.depCount;return 0==f||0==p?f-p:this._engine.driver.containsElement(h.element,d.element)?1:-1})}destroy(a){this.players.forEach(l=>l.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}elementContainsData(a){let l=!1;return this._elementListeners.has(a)&&(l=!0),l=!!this._queue.find(h=>h.element===a)||l,l}}class xTt{_onRemovalComplete(a,l){this.onRemovalComplete(a,l)}constructor(a,l,h){this.bodyNode=a,this.driver=l,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,f)=>{}}get queuedPlayers(){const a=[];return this._namespaceList.forEach(l=>{l.players.forEach(h=>{h.queued&&a.push(h)})}),a}createNamespace(a,l){const h=new STt(a,l,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,l)?this._balanceNamespaceList(h,l):(this.newHostElements.set(l,h),this.collectEnterElement(l)),this._namespaceLookup[a]=h}_balanceNamespaceList(a,l){const h=this._namespaceList,d=this.namespacesByHostElement;if(h.length-1>=0){let p=!1,g=this.driver.getParentElement(l);for(;g;){const m=d.get(g);if(m){const v=h.indexOf(m);h.splice(v+1,0,a),p=!0;break}g=this.driver.getParentElement(g)}p||h.unshift(a)}else h.push(a);return d.set(l,a),a}register(a,l){let h=this._namespaceLookup[a];return h||(h=this.createNamespace(a,l)),h}registerTrigger(a,l,h){let d=this._namespaceLookup[a];d&&d.register(l,h)&&this.totalAnimations++}destroy(a,l){if(!a)return;const h=this._fetchNamespace(a);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[a];const d=this._namespaceList.indexOf(h);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>h.destroy(l))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const l=new Set,h=this.statesByElement.get(a);if(h)for(let d of h.values())if(d.namespaceId){const f=this._fetchNamespace(d.namespaceId);f&&l.add(f)}return l}trigger(a,l,h,d){if(WP(l)){const f=this._fetchNamespace(a);if(f)return f.trigger(l,h,d),!0}return!1}insertNode(a,l,h,d){if(!WP(l))return;const f=l[Vu];if(f&&f.setForRemoval){f.setForRemoval=!1,f.setForMove=!0;const p=this.collectedLeaveElements.indexOf(l);p>=0&&this.collectedLeaveElements.splice(p,1)}if(a){const p=this._fetchNamespace(a);p&&p.insertNode(l,h)}d&&this.collectEnterElement(l)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,l){l?this.disabledNodes.has(a)||(this.disabledNodes.add(a),Uu(a,cQ)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),oC(a,cQ))}removeNode(a,l,h,d){if(WP(l)){const f=a?this._fetchNamespace(a):null;if(f?f.removeNode(l,d):this.markElementAsRemoved(a,l,!1,d),h){const p=this.namespacesByHostElement.get(l);p&&p.id!==a&&p.removeNode(l,d)}}else this._onRemovalComplete(l,d)}markElementAsRemoved(a,l,h,d,f){this.collectedLeaveElements.push(l),l[Vu]={namespaceId:a,setForRemoval:d,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:f}}listen(a,l,h,d,f){return WP(l)?this._fetchNamespace(a).listen(l,h,d,f):()=>{}}_buildInstruction(a,l,h,d,f){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,h,d,a.fromState.options,a.toState.options,l,f)}destroyInnerAnimations(a){let l=this.driver.query(a,PP,!0);l.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(l=this.driver.query(a,KG,!0),l.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(a){const l=this.playersByElement.get(a);l&&l.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(a){const l=this.playersByQueriedElement.get(a);l&&l.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return hm(this.players).onDone(()=>a());a()})}processLeaveNode(a){const l=a[Vu];if(l&&l.setForRemoval){if(a[Vu]=mxe,l.namespaceId){this.destroyInnerAnimations(a);const h=this._fetchNamespace(l.namespaceId);h&&h.clearElementCache(a)}this._onRemovalComplete(a,l.setForRemoval)}a.classList?.contains(cQ)&&this.markElementAsDisabled(a,!1),this.driver.query(a,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(a=-1){let l=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,d)=>this._balanceNamespaceList(h,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Uu(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{l=this._flushAnimations(h,a)}finally{for(let d=0;d<h.length;d++)h[d]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],l.length?hm(l).onDone(()=>{h.forEach(d=>d())}):h.forEach(d=>d())}}reportError(a){throw function xDt(c){return new xt(3402,!1)}()}_flushAnimations(a,l){const h=new zP,d=[],f=new Map,p=[],g=new Map,m=new Map,v=new Map,y=new Set;this.disabledNodes.forEach(W=>{y.add(W);const j=this.driver.query(W,".ng-animate-queued",!0);for(let Q=0;Q<j.length;Q++)y.add(j[Q])});const _=this.bodyNode,b=Array.from(this.statesByElement.keys()),C=_xe(b,this.collectedEnterElements),x=new Map;let w=0;C.forEach((W,j)=>{const Q=YG+w++;x.set(j,Q),W.forEach(X=>Uu(X,Q))});const O=[],D=new Set,T=new Set;for(let W=0;W<this.collectedLeaveElements.length;W++){const j=this.collectedLeaveElements[W],Q=j[Vu];Q&&Q.setForRemoval&&(O.push(j),D.add(j),Q.hasAnimation?this.driver.query(j,".ng-star-inserted",!0).forEach(X=>D.add(X)):T.add(j))}const M=new Map,k=_xe(b,Array.from(D));k.forEach((W,j)=>{const Q=AP+w++;M.set(j,Q),W.forEach(X=>Uu(X,Q))}),a.push(()=>{C.forEach((W,j)=>{const Q=x.get(j);W.forEach(X=>oC(X,Q))}),k.forEach((W,j)=>{const Q=M.get(j);W.forEach(X=>oC(X,Q))}),O.forEach(W=>{this.processLeaveNode(W)})});const E=[],P=[];for(let W=this._namespaceList.length-1;W>=0;W--)this._namespaceList[W].drainQueuedTransitions(l).forEach(Q=>{const X=Q.player,Y=Q.element;if(E.push(X),this.collectedEnterElements.length){const Fe=Y[Vu];if(Fe&&Fe.setForMove){if(Fe.previousTriggersValues&&Fe.previousTriggersValues.has(Q.triggerName)){const qe=Fe.previousTriggersValues.get(Q.triggerName),Le=this.statesByElement.get(Q.element);if(Le&&Le.has(Q.triggerName)){const ze=Le.get(Q.triggerName);ze.value=qe,Le.set(Q.triggerName,ze)}}return void X.destroy()}}const ne=!_||!this.driver.containsElement(_,Y),re=M.get(Y),fe=x.get(Y),de=this._buildInstruction(Q,h,fe,re,ne);if(de.errors&&de.errors.length)return void P.push(de);if(ne)return X.onStart(()=>Pv(Y,de.fromStyles)),X.onDestroy(()=>af(Y,de.toStyles)),void d.push(X);if(Q.isFallbackTransition)return X.onStart(()=>Pv(Y,de.fromStyles)),X.onDestroy(()=>af(Y,de.toStyles)),void d.push(X);const De=[];de.timelines.forEach(Fe=>{Fe.stretchStartingKeyframe=!0,this.disabledNodes.has(Fe.element)||De.push(Fe)}),de.timelines=De,h.append(Y,de.timelines),p.push({instruction:de,player:X,element:Y}),de.queriedElements.forEach(Fe=>tu(g,Fe,[]).push(X)),de.preStyleProps.forEach((Fe,qe)=>{if(Fe.size){let Le=m.get(qe);Le||m.set(qe,Le=new Set),Fe.forEach((ze,it)=>Le.add(it))}}),de.postStyleProps.forEach((Fe,qe)=>{let Le=v.get(qe);Le||v.set(qe,Le=new Set),Fe.forEach((ze,it)=>Le.add(it))})});if(P.length){const W=[];P.forEach(j=>{W.push(function wDt(c,a){return new xt(3505,!1)}())}),E.forEach(j=>j.destroy()),this.reportError(W)}const V=new Map,I=new Map;p.forEach(W=>{const j=W.element;h.has(j)&&(I.set(j,j),this._beforeAnimationBuild(W.player.namespaceId,W.instruction,V))}),d.forEach(W=>{const j=W.element;this._getPreviousPlayers(j,!1,W.namespaceId,W.triggerName,null).forEach(X=>{tu(V,j,[]).push(X),X.destroy()})});const U=O.filter(W=>Cxe(W,m,v)),$=new Map;yxe($,this.driver,T,v,Tf).forEach(W=>{Cxe(W,m,v)&&U.push(W)});const J=new Map;C.forEach((W,j)=>{yxe(J,this.driver,new Set(W),m,"!")}),U.forEach(W=>{const j=$.get(W),Q=J.get(W);$.set(W,new Map([...Array.from(j?.entries()??[]),...Array.from(Q?.entries()??[])]))});const ee=[],B=[],G={};p.forEach(W=>{const{element:j,player:Q,instruction:X}=W;if(h.has(j)){if(y.has(j))return Q.onDestroy(()=>af(j,X.toStyles)),Q.disabled=!0,Q.overrideTotalTime(X.totalTime),void d.push(Q);let Y=G;if(I.size>1){let re=j;const fe=[];for(;re=re.parentNode;){const de=I.get(re);if(de){Y=de;break}fe.push(re)}fe.forEach(de=>I.set(de,Y))}const ne=this._buildAnimation(Q.namespaceId,X,V,f,J,$);if(Q.setRealPlayer(ne),Y===G)ee.push(Q);else{const re=this.playersByElement.get(Y);re&&re.length&&(Q.parentPlayer=hm(re)),d.push(Q)}}else Pv(j,X.fromStyles),Q.onDestroy(()=>af(j,X.toStyles)),B.push(Q),y.has(j)&&d.push(Q)}),B.forEach(W=>{const j=f.get(W.element);if(j&&j.length){const Q=hm(j);W.setRealPlayer(Q)}}),d.forEach(W=>{W.parentPlayer?W.syncPlayerEvents(W.parentPlayer):W.destroy()});for(let W=0;W<O.length;W++){const j=O[W],Q=j[Vu];if(oC(j,AP),Q&&Q.hasAnimation)continue;let X=[];if(g.size){let ne=g.get(j);ne&&ne.length&&X.push(...ne);let re=this.driver.query(j,KG,!0);for(let fe=0;fe<re.length;fe++){let de=g.get(re[fe]);de&&de.length&&X.push(...de)}}const Y=X.filter(ne=>!ne.destroyed);Y.length?TTt(this,j,Y):this.processLeaveNode(j)}return O.length=0,ee.forEach(W=>{this.players.push(W),W.onDone(()=>{W.destroy();const j=this.players.indexOf(W);this.players.splice(j,1)}),W.play()}),ee}elementContainsData(a,l){let h=!1;const d=l[Vu];return d&&d.setForRemoval&&(h=!0),this.playersByElement.has(l)&&(h=!0),this.playersByQueriedElement.has(l)&&(h=!0),this.statesByElement.has(l)&&(h=!0),this._fetchNamespace(a).elementContainsData(l)||h}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,l,h,d,f){let p=[];if(l){const g=this.playersByQueriedElement.get(a);g&&(p=g)}else{const g=this.playersByElement.get(a);if(g){const m=!f||f==N2;g.forEach(v=>{v.queued||!m&&v.triggerName!=d||p.push(v)})}}return(h||d)&&(p=p.filter(g=>!(h&&h!=g.namespaceId||d&&d!=g.triggerName))),p}_beforeAnimationBuild(a,l,h){const f=l.element,p=l.isRemovalTransition?void 0:a,g=l.isRemovalTransition?void 0:l.triggerName;for(const m of l.timelines){const v=m.element,y=v!==f,_=tu(h,v,[]);this._getPreviousPlayers(v,y,p,g,l.toState).forEach(C=>{const x=C.getRealPlayer();x.beforeDestroy&&x.beforeDestroy(),C.destroy(),_.push(C)})}Pv(f,l.fromStyles)}_buildAnimation(a,l,h,d,f,p){const g=l.triggerName,m=l.element,v=[],y=new Set,_=new Set,b=l.timelines.map(x=>{const w=x.element;y.add(w);const O=w[Vu];if(O&&O.removedBeforeQueried)return new AS(x.duration,x.delay);const D=w!==m,T=function kTt(c){const a=[];return bxe(c,a),a}((h.get(w)||bTt).map(V=>V.getRealPlayer())).filter(V=>!!V.element&&V.element===w),M=f.get(w),k=p.get(w),E=QSe(0,this._normalizer,0,x.keyframes,M,k),P=this._buildPlayer(x,E,T);if(x.subTimeline&&d&&_.add(w),D){const V=new dQ(a,g,w);V.setRealPlayer(P),v.push(V)}return P});v.forEach(x=>{tu(this.playersByQueriedElement,x.element,[]).push(x),x.onDone(()=>function wTt(c,a,l){let h=c.get(a);if(h){if(h.length){const d=h.indexOf(l);h.splice(d,1)}0==h.length&&c.delete(a)}return h}(this.playersByQueriedElement,x.element,x))}),y.forEach(x=>Uu(x,txe));const C=hm(b);return C.onDestroy(()=>{y.forEach(x=>oC(x,txe)),af(m,l.toStyles)}),_.forEach(x=>{tu(d,x,[]).push(C)}),C}_buildPlayer(a,l,h){return l.length>0?this.driver.animate(a.element,l,a.duration,a.delay,a.easing,h):new AS(a.duration,a.delay)}}class dQ{constructor(a,l,h){this.namespaceId=a,this.triggerName=l,this.element=h,this._player=new AS,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,this._queuedCallbacks.forEach((l,h)=>{l.forEach(d=>GG(a,h,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const l=this._player;l.triggerCallback&&a.onStart(()=>l.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,l){tu(this._queuedCallbacks,a,[]).push(l)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const l=this._player;l.triggerCallback&&l.triggerCallback(a)}}function WP(c){return c&&1===c.nodeType}function vxe(c,a){const l=c.style.display;return c.style.display=a??"none",l}function yxe(c,a,l,h,d){const f=[];l.forEach(m=>f.push(vxe(m)));const p=[];h.forEach((m,v)=>{const y=new Map;m.forEach(_=>{const b=a.computeStyle(v,_,d);y.set(_,b),(!b||0==b.length)&&(v[Vu]=CTt,p.push(v))}),c.set(v,y)});let g=0;return l.forEach(m=>vxe(m,f[g++])),p}function _xe(c,a){const l=new Map;if(c.forEach(g=>l.set(g,[])),0==a.length)return l;const d=new Set(a),f=new Map;function p(g){if(!g)return 1;let m=f.get(g);if(m)return m;const v=g.parentNode;return m=l.has(v)?v:d.has(v)?1:p(v),f.set(g,m),m}return a.forEach(g=>{const m=p(g);1!==m&&l.get(m).push(g)}),l}function Uu(c,a){c.classList?.add(a)}function oC(c,a){c.classList?.remove(a)}function TTt(c,a,l){hm(l).onDone(()=>c.processLeaveNode(a))}function bxe(c,a){for(let l=0;l<c.length;l++){const h=c[l];h instanceof dte?bxe(h.players,a):a.push(h)}}function Cxe(c,a,l){const h=l.get(c);if(!h)return!1;let d=a.get(c);return d?h.forEach(f=>d.add(f)):a.set(c,h),l.delete(c),!0}class GP{constructor(a,l,h){this.bodyNode=a,this._driver=l,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(d,f)=>{},this._transitionEngine=new xTt(a,l,h),this._timelineEngine=new gTt(a,l,h),this._transitionEngine.onRemovalComplete=(d,f)=>this.onRemovalComplete(d,f)}registerTrigger(a,l,h,d,f){const p=a+"-"+d;let g=this._triggerCache[p];if(!g){const m=[],y=nQ(this._driver,f,m,[]);if(m.length)throw function fDt(c,a){return new xt(3404,!1)}();g=function hTt(c,a,l){return new dTt(c,a,l)}(d,y,this._normalizer),this._triggerCache[p]=g}this._transitionEngine.registerTrigger(l,d,g)}register(a,l){this._transitionEngine.register(a,l)}destroy(a,l){this._transitionEngine.destroy(a,l)}onInsert(a,l,h,d){this._transitionEngine.insertNode(a,l,h,d)}onRemove(a,l,h,d){this._transitionEngine.removeNode(a,l,d||!1,h)}disableAnimations(a,l){this._transitionEngine.markElementAsDisabled(a,l)}process(a,l,h,d){if("@"==h.charAt(0)){const[f,p]=jSe(h);this._timelineEngine.command(f,l,p,d)}else this._transitionEngine.trigger(a,l,h,d)}listen(a,l,h,d,f){if("@"==h.charAt(0)){const[p,g]=jSe(h);return this._timelineEngine.listen(p,l,g,f)}return this._transitionEngine.listen(a,l,h,d,f)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ATt=(()=>{class c{constructor(l,h,d){this._element=l,this._startStyles=h,this._endStyles=d,this._state=0;let f=c.initialStylesByElement.get(l);f||c.initialStylesByElement.set(l,f=new Map),this._initialStyles=f}start(){this._state<1&&(this._startStyles&&af(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(af(this._element,this._initialStyles),this._endStyles&&(af(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(Pv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pv(this._element,this._endStyles),this._endStyles=null),af(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function fQ(c){let a=null;return c.forEach((l,h)=>{(function ITt(c){return"display"===c||"position"===c})(h)&&(a=a||new Map,a.set(h,l))}),a}class Sxe{constructor(a,l,h,d){this.element=a,this.keyframes=l,this.options=h,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(a){const l=[];return a.forEach(h=>{l.push(Object.fromEntries(h))}),l}_triggerWebAnimation(a,l,h){return a.animate(this._convertKeyframesToObject(l),h)}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,d)=>{"offset"!==d&&a.set(d,this._finished?h:axe(this.element,d))}),this.currentSnapshot=a}triggerCallback(a){const l="start"===a?this._onStartFns:this._onDoneFns;l.forEach(h=>h()),l.length=0}}class PTt{validateStyleProperty(a){return!0}validateAnimatableStyleProperty(a){return!0}matchesElement(a,l){return!1}containsElement(a,l){return YSe(a,l)}getParentElement(a){return qG(a)}query(a,l,h){return KSe(a,l,h)}computeStyle(a,l,h){return window.getComputedStyle(a)[l]}animate(a,l,h,d,f,p=[]){const m={duration:h,delay:d,fill:0==d?"both":"forwards"};f&&(m.easing=f);const v=new Map,y=p.filter(C=>C instanceof Sxe);(function NDt(c,a){return 0===c||0===a})(h,d)&&y.forEach(C=>{C.currentSnapshot.forEach((x,w)=>v.set(w,x))});let _=function PDt(c){return c.length?c[0]instanceof Map?c:c.map(a=>nxe(a)):[]}(l).map(C=>dm(C));_=function BDt(c,a,l){if(l.size&&a.length){let h=a[0],d=[];if(l.forEach((f,p)=>{h.has(p)||d.push(p),h.set(p,f)}),d.length)for(let f=1;f<a.length;f++){let p=a[f];d.forEach(g=>p.set(g,axe(c,g)))}}return a}(a,_,v);const b=function ETt(c,a){let l=null,h=null;return Array.isArray(a)&&a.length?(l=fQ(a[0]),a.length>1&&(h=fQ(a[a.length-1]))):a instanceof Map&&(l=fQ(a)),l||h?new ATt(c,l,h):null}(a,_);return new Sxe(a,_,m,b)}}let RTt=(()=>{class c extends cte{constructor(l,h){super(),this._nextAnimationId=0,this._renderer=l.createRenderer(h.body,{id:"0",encapsulation:Wu.None,styles:[],data:{animation:[]}})}build(l){const h=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(l)?ute(l):l;return xxe(this._renderer,null,h,"register",[d]),new FTt(h,this._renderer)}}return c.\u0275fac=function(l){return new(l||c)(Pe(oy),Pe(hr))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();class FTt extends CFe{constructor(a,l){super(),this._id=a,this._renderer=l}create(a,l){return new LTt(this._id,a,l||{},this._renderer)}}class LTt{constructor(a,l,h,d){this.id=a,this.element=l,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(a,l){return this._renderer.listen(this.element,`@@${this.id}:${a}`,l)}_command(a,...l){return xxe(this._renderer,this.element,this.id,a,l)}onDone(a){this._listen("done",a)}onStart(a){this._listen("start",a)}onDestroy(a){this._listen("destroy",a)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(a){this._command("setPosition",a)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function xxe(c,a,l,h,d){return c.setProperty(a,`@@${l}:${h}`,d)}const wxe="@.disabled";let NTt=(()=>{class c{constructor(l,h,d){this.delegate=l,this.engine=h,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(f,p)=>{const g=p?.parentNode(f);g&&p.removeChild(g,f)}}createRenderer(l,h){const f=this.delegate.createRenderer(l,h);if(!(l&&h&&h.data&&h.data.animation)){let y=this._rendererCache.get(f);return y||(y=new Oxe("",f,this.engine,()=>this._rendererCache.delete(f)),this._rendererCache.set(f,y)),y}const p=h.id,g=h.id+"-"+this._currentId;this._currentId++,this.engine.register(g,l);const m=y=>{Array.isArray(y)?y.forEach(m):this.engine.registerTrigger(p,g,l,y.name,y)};return h.data.animation.forEach(m),new BTt(this,g,f,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(l,h,d){l>=0&&l<this._microtaskId?this._zone.run(()=>h(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(f=>{const[p,g]=f;p(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(l){return new(l||c)(Pe(oy),Pe(GP),Pe(Bi))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();class Oxe{constructor(a,l,h,d){this.namespaceId=a,this.delegate=l,this.engine=h,this._onDestroy=d,this.destroyNode=this.delegate.destroyNode?f=>l.destroyNode(f):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(a,l){return this.delegate.createElement(a,l)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,l){this.delegate.appendChild(a,l),this.engine.onInsert(this.namespaceId,l,a,!1)}insertBefore(a,l,h,d=!0){this.delegate.insertBefore(a,l,h),this.engine.onInsert(this.namespaceId,l,a,d)}removeChild(a,l,h){this.engine.onRemove(this.namespaceId,l,this.delegate,h)}selectRootElement(a,l){return this.delegate.selectRootElement(a,l)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,l,h,d){this.delegate.setAttribute(a,l,h,d)}removeAttribute(a,l,h){this.delegate.removeAttribute(a,l,h)}addClass(a,l){this.delegate.addClass(a,l)}removeClass(a,l){this.delegate.removeClass(a,l)}setStyle(a,l,h,d){this.delegate.setStyle(a,l,h,d)}removeStyle(a,l,h){this.delegate.removeStyle(a,l,h)}setProperty(a,l,h){"@"==l.charAt(0)&&l==wxe?this.disableAnimations(a,!!h):this.delegate.setProperty(a,l,h)}setValue(a,l){this.delegate.setValue(a,l)}listen(a,l,h){return this.delegate.listen(a,l,h)}disableAnimations(a,l){this.engine.disableAnimations(a,l)}}class BTt extends Oxe{constructor(a,l,h,d,f){super(l,h,d,f),this.factory=a,this.namespaceId=l}setProperty(a,l,h){"@"==l.charAt(0)?"."==l.charAt(1)&&l==wxe?this.disableAnimations(a,h=void 0===h||!!h):this.engine.process(this.namespaceId,a,l.slice(1),h):this.delegate.setProperty(a,l,h)}listen(a,l,h){if("@"==l.charAt(0)){const d=function VTt(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(a);let f=l.slice(1),p="";return"@"!=f.charAt(0)&&([f,p]=function UTt(c){const a=c.indexOf(".");return[c.substring(0,a),c.slice(a+1)]}(f)),this.engine.listen(this.namespaceId,d,f,p,g=>{this.factory.scheduleListenerCallback(g._data||-1,h,g)})}return this.delegate.listen(a,l,h)}}let zTt=(()=>{class c extends GP{constructor(l,h,d,f){super(l.body,h,d)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(l){return new(l||c)(Pe(hr),Pe(XG),Pe(aQ),Pe(nS))},c.\u0275prov=Xe({token:c,factory:c.\u0275fac}),c})();const Dxe=[{provide:cte,useClass:RTt},{provide:aQ,useFactory:function HTt(){return new aTt}},{provide:GP,useClass:zTt},{provide:oy,useFactory:function $Tt(c,a,l){return new NTt(c,a,l)},deps:[dT,GP,Bi]}],pQ=[{provide:XG,useFactory:()=>new PTt},{provide:BY,useValue:"BrowserAnimations"},...Dxe],Txe=[{provide:XG,useClass:JSe},{provide:BY,useValue:"NoopAnimations"},...Dxe];let WTt=(()=>{class c{static withConfig(l){return{ngModule:c,providers:l.disableAnimations?Txe:pQ}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=Un({type:c}),c.\u0275inj=Ln({providers:pQ,imports:[nJ]}),c})();function GTt(c,a){if(1&c){const l=ct();R(0,"div",11),ie("click",function(){return Ee(l),Ae(q().$implicit.onButtonClick())}),R(1,"button",12),se(2),N()()}if(2&c){const l=q().$implicit;F(2),Ht(l.buttonText)}}function QTt(c,a){if(1&c&&(R(0,"div",6)(1,"div",7),pe(2,"clr-icon",8),N(),R(3,"div",9),se(4),N(),K(5,GTt,3,1,"div",10),N()),2&c){const l=a.$implicit;F(4),gi(" ",l.text," "),F(1),L("ngIf",l.buttonText)}}function jTt(c,a){if(1&c&&(R(0,"div",1)(1,"div",2),K(2,QTt,6,2,"div",3),N(),R(3,"button",4),pe(4,"clr-icon",5),N()()),2&c){const l=q();F(2),L("ngForOf",l.config.alerts)}}let ZTt=(()=>{class c{constructor(l){S(this,"config",void 0),S(this,"id",0),this.config=l}isShowType(l){return this.config.showType==l}ngOnInit(){let l=++this.id,d=()=>{l===this.id&&(this.update(),this.config.post(d,1e3))};this.config.post(d,1e3)}ngOnDestroy(){++this.id}update(){!this.config.alerts||0==this.config.alerts.length||this.config.alerts.map(l=>l).forEach(l=>{l.update()||l.remove()})}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-alerts"]],decls:1,vars:1,consts:[["class","alert alert-app-level alert-info","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-app-level","alert-info"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","exclamation-circle",1,"alert-icon"],[1,"alert-text"],["class","alert-actions",3,"click",4,"ngIf"],[1,"alert-actions",3,"click"],[1,"btn","alert-action"]],template:function(l,h){1&l&&K(0,jTt,5,1,"div",0),2&l&&L("ngIf",h.config.alerts.length>0)},dependencies:[vi,Sn,Bk,so]})),c})();const qTt=function(c){return{"nav-link":!0,"nav-icon":!0,active:c}},XTt=function(c,a){return{"has-badge":c,"has-alert":a}};function YTt(c,a){if(1&c){const l=ct();R(0,"a",7),ie("click",function(d){const p=Ee(l).$implicit;return Ae(q(2).navigateTo(d,p))}),pe(1,"clr-icon",1),N()}if(2&c){const l=a.$implicit,h=q(2);L("ngClass",ds(3,qTt,h.isActive(l))),F(1),L("ngClass",Wr(5,XTt,l.hasBadge,l.hasAlert)),ot("shape",l.shape)}}const KTt=function(c){return{header:!0,"header-6":!0,bgmaroon:c,"no-print":!0}};function JTt(c,a){if(1&c){const l=ct();R(0,"header")(1,"div",3),ie("click",function(){return Ee(l),Ae(q().onRootRoute())}),pe(2,"app-svg-js-image",4),N(),R(3,"div",5),K(4,YTt,2,8,"a",6),N()()}if(2&c){const l=q();HF(ds(6,KTt,l.isRedTheme())),F(2),L("svgWidth",128)("svgHeight",32)("logoText",l.getTitle()),F(2),L("ngForOf",l.getLinks())}}const ekt=function(c){return{"main-container":c}},tkt=function(c){return{"content-container":c}},nkt=function(c){return{"content-area":c}};let ikt=(()=>{class c{get applicationInfo(){return this.config.getApplication()}constructor(l,h,d){S(this,"router",void 0),S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"names",[ai.builder().setLink("https://deviskin.github.io").setName("Deviskin")]),this.router=l,this.config=h,this.uiConfig=d}ngOnInit(){}navigateTo(l,h){h.onClick?h.onClick(h):(this.uiConfig.ui.defaultAppRoute.setStringValue(h.link),this.router.navigate([h.link]))}navigateToMain(l){this.router.navigate(["/main"])}isActive(l){return l.isActive?l.isActive(l):this.router.isActive(l.link,!1)}isUpperMenuEnabled(){return!0}isLeftBarEnabled(){return!1}isRightBarEnabled(){return!1}isFooterBarEnabled(){return!1}onCompiler(){this.router.navigate(["/compiler"])}isRedTheme(){return!1}onRootRoute(){this.config.setShowLogin(!1)}getTitle(){return this.applicationInfo.name}getLinks(){return this.uiConfig.appRoutes||this.applicationInfo.routes}isMainContainerEnabled(){return this.uiConfig.mainContainerEnabled}}return S(c,"\u0275fac",function(l){return new(l||c)(z(js),z(ln),z(ii))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-default"]],decls:6,vars:10,consts:[[1,"clr-example"],[3,"ngClass"],[3,"class",4,"ngIf"],[1,"logotypeImage","cursor",3,"click"],[3,"svgWidth","svgHeight","logoText"],[1,"header-nav"],["href","javascript://",3,"ngClass","click",4,"ngFor","ngForOf"],["href","javascript://",3,"ngClass","click"]],template:function(l,h){1&l&&(R(0,"div",0)(1,"div",1),K(2,JTt,5,8,"header",2),R(3,"div",1)(4,"div",1),pe(5,"router-outlet"),N()()()()),2&l&&(F(1),L("ngClass",ds(4,ekt,h.isMainContainerEnabled())),F(1),L("ngIf",h.isUpperMenuEnabled()),F(1),L("ngClass",ds(6,tkt,h.isMainContainerEnabled())),F(1),L("ngClass",ds(8,nkt,h.isMainContainerEnabled())))},dependencies:[di,vi,Sn,yN,so,nc],styles:[".logotypeImage[_ngcontent-%COMP%]{width:150px;height:100%;padding-right:10px;padding-left:10px}.clr-example[_ngcontent-%COMP%]{padding:0;overflow:hidden}.clr-example[_ngcontent-%COMP%]   .example-aside-section[_ngcontent-%COMP%]{width:20%;padding:24px;border:1px solid}.clr-example[_ngcontent-%COMP%]   .example-footer[_ngcontent-%COMP%]{height:40px;padding-top:0;padding-bottom:10px;padding-left:24px}"]})),c})();function rkt(c,a){1&c&&pe(0,"app-default")}function skt(c,a){1&c&&pe(0,"app-login")}function okt(c,a){1&c&&pe(0,"app-three-logo",2),2&c&&L("fullScreen",!0)}let akt=(()=>{class c{constructor(l,h,d){S(this,"router",void 0),S(this,"config",void 0),S(this,"themeSvc",void 0),this.router=l,this.config=h,this.themeSvc=d}isShowType(l){return this.config.showType==l}ngOnInit(){this.themeSvc.applyTheme()}}return S(c,"\u0275fac",function(l){return new(l||c)(z(js),z(ln),z(bo))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],["class","fullSize",3,"fullScreen",4,"ngIf"],[1,"fullSize",3,"fullScreen"]],template:function(l,h){1&l&&(pe(0,"app-alerts"),K(1,rkt,1,0,"app-default",0),K(2,skt,1,0,"app-login",0),K(3,okt,1,1,"app-three-logo",1)),2&l&&(F(1),L("ngIf",h.isShowType("normal")),F(1),L("ngIf",h.isShowType("login")),F(1),L("ngIf",h.isShowType("login3d")))},dependencies:[Sn,ZTt,WSe,ikt,$Se],styles:[".fullSize[_ngcontent-%COMP%]{width:100vw;height:100vh}"]})),c})();const Gh=void 0,ckt=["ru",[["AM","PM"],Gh,Gh],Gh,[["\u0412","\u041f","\u0412","\u0421","\u0427","\u041f","\u0421"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"]],Gh,[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440.","\u0430\u043f\u0440.","\u043c\u0430\u044f","\u0438\u044e\u043d.","\u0438\u044e\u043b.","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"]],[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440.","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044c","\u0444\u0435\u0432\u0440\u0430\u043b\u044c","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0435\u043b\u044c","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u043e\u043a\u0442\u044f\u0431\u0440\u044c","\u043d\u043e\u044f\u0431\u0440\u044c","\u0434\u0435\u043a\u0430\u0431\u0440\u044c"]],[["\u0434\u043e \u043d.\u044d.","\u043d.\u044d."],["\u0434\u043e \u043d. \u044d.","\u043d. \u044d."],["\u0434\u043e \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430","\u043e\u0442 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430"]],1,[6,0],["dd.MM.y","d MMM y '\u0433'.","d MMMM y '\u0433'.","EEEE, d MMMM y '\u0433'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",Gh,Gh,Gh],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","\u043d\u0435\xa0\u0447\u0438\u0441\u043b\u043e",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"RUB","\u20bd","\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c",{BYN:[Gh,"\u0440."],GEL:[Gh,"\u10da"],PHP:[Gh,"\u20b1"],RON:[Gh,"L"],RUB:["\u20bd"],RUR:["\u0440."],THB:["\u0e3f"],TMT:["\u0422\u041c\u0422"],TWD:["NT$"],UAH:["\u20b4"],XXX:["XXXX"]},"ltr",function lkt(c){const l=Math.floor(Math.abs(c)),h=c.toString().replace(/^[^.]*\.?/,"").length;return 0===h&&l%10==1&&l%100!=11?1:0===h&&l%10===Math.floor(l%10)&&l%10>=2&&l%10<=4&&!(l%100>=12&&l%100<=14)?3:0===h&&l%10==0||0===h&&l%10===Math.floor(l%10)&&l%10>=5&&l%10<=9||0===h&&l%100===Math.floor(l%100)&&l%100>=11&&l%100<=14?4:5}];let hkt=(()=>{class c{constructor(l){S(this,"config",void 0),this.config=l}intercept(l,h){let d=l.headers.set("X-Requested-With","XMLHttpRequest");this.config.authBody&&(d=d.set("Authorization","Basic "+this.config.authBody),d=d.set(this.config.authIdKey,this.config.authId));const f=new ip({encoder:new dkt,fromString:l.params.toString()});return l=l.clone({withCredentials:!0,headers:d,params:f}),h.handle(l)}}return S(c,"\u0275fac",function(l){return new(l||c)(Pe(ln))}),S(c,"\u0275prov",Xe({token:c,factory:c.\u0275fac})),c})();class dkt{encodeKey(a){return encodeURIComponent(a)}encodeValue(a){return encodeURIComponent(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}function fkt(c,a){1&c&&(R(0,"span"),se(1,"\u0421\u043e\u0431\u0440\u0430\u043d\u043e "),N())}function pkt(c,a){1&c&&pe(0,"clr-progress-bar",3),2&c&&L("clrValue",q().progressValue)}function gkt(c,a){if(1&c){const l=ct();R(0,"clr-toggle-container",4)(1,"label"),se(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),N(),R(3,"clr-toggle-wrapper")(4,"input",5),ie("ngModelChange",function(d){return Ee(l),Ae(q().v.rawValue=d)}),N(),R(5,"label"),se(6),N()()()}if(2&c){const l=q();F(4),L("name",l.v.name)("value",l.v.name)("ngModel",l.v.rawValue),F(2),Ht(l.v.description)}}let mkt=(()=>{class c{get printEpubData(){return this.data}get v(){return this.uiConfig.ui.memorialPrintAllBook}get text(){return this.data&&this.data.text?this.data.text:""}constructor(l,h,d){S(this,"config",void 0),S(this,"uiConfig",void 0),S(this,"epubBuilder",void 0),S(this,"data",void 0),S(this,"progressValue",0),S(this,"lastEvent",""),S(this,"fileEntries",[]),S(this,"workerSvc",$a.builder()),S(this,"bookServerSvc",new Sz((f,p)=>{this.config.post(()=>{this.bookSvc.post(f,p)})})),S(this,"bookSvc",new D9((f,p)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(p):this.bookServerSvc.post(f,p)})})),S(this,"allBookslines",[]),S(this,"allBooksChapters",[]),S(this,"allBooksEmptyLines",[]),S(this,"allBooksNames",[]),this.config=l,this.uiConfig=h,this.epubBuilder=d}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.workerSvc.enabled()?this.workerSvc.setOnMessage(l=>{this.config.post(()=>{this.bookSvc.post(null,l)})}):this.bookServerSvc.setCacheService(new Cz(new FT)),this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookSvc.onPageLoadEvent.setOnEventHandler(l=>{this.onPageCompleted()}),this.printEpubData.printEventsEmitter.subscribe({next:l=>{this.onPrintEpubEvent(l)}})}onClick(l){this.data.onClick&&(this.data.onClick(this.data),l.stopPropagation())}getClasses(){return{}}clearAllItems(){this.fileEntries=[],this.allBookslines=[],this.allBooksChapters=[],this.allBooksEmptyLines=[],this.allBooksNames=[]}onPageCompleted(){this.config.post(()=>{if(this.bookSvc.bookChapter){this.allBooksNames.length||(this.allBooksNames=[...this.bookSvc.bookLanguages]);let l=this.bookSvc.getChapterTitleName();this.allBooksChapters.push(l||this.bookSvc.bookChapter.name),this.allBooksEmptyLines.push(this.bookSvc.books.map(f=>f.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a)),this.allBookslines.push(this.bookSvc.books.map((f,p)=>{let g=[],m=(y,_)=>y?y[_]:null;var y;return y=m(m(f.\u0441\u0442\u0440\u043e\u043a\u0438,0)?.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b,0)?.classes,(y?.red||y?.redDark)&&++this.allBooksEmptyLines[this.allBooksEmptyLines.length-1][p],f.\u0441\u0442\u0440\u043e\u043a\u0438.forEach(y=>{g.push(y.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.map(_=>_.text).join(""))}),g}));let h=""+(+this.bookSvc.bookChapter.name+1),d=this.printEpubData.showSettings&&this.uiConfig.ui.memorialPrintAllBook.getBooleanValue();if(d&&null!=this.bookSvc.bookContent[0].parsed?.content.find((f,p,g)=>f.name==h))this.lastEvent="loaded chapter: "+h,this.progressValue=Math.floor(+this.bookSvc.bookChapter.name/this.bookSvc.bookContent[0].parsed?.content.length*100),this.config.post(()=>{this.bookSvc.loadPage(h)},1);else if(d){this.lastEvent="stopped after chapter: "+h,this.progressValue=100;let f=this.printEpubData.bookTitle;if(d){let p=f.indexOf(":");p>0&&(f=f.substring(0,p))}this.epubBuilder.generate(D1.builder().setName(f).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setAllBooks(this.allBookslines).setBookNames(this.allBooksNames).setAllBooksChapters(this.allBooksChapters).setEmptyFirstLines(this.allBooksEmptyLines).setShowLineIndexes(this.bookSvc.bookName.includes("VZ")||this.bookSvc.bookName.includes("NZ"))).then(p=>{this.printEpubData.printEventsEmitter.emit("stop")},p=>{this.config.addAlert(Pr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${p}`,"\u041e\u041a",15)),this.printEpubData.printEventsEmitter.emit("stop")})}else if(this.printEpubData.printerHandler){let f=Az.builder();this.printEpubData.printerHandler.print(f);let p=0,g=()=>{if(p>=f.requestsPack.length)this.progressValue=100,f.requestsPack.length>=1?this.epubBuilder.generate(f.requestsPack[0],!1,!1,!0).then(v=>{this.printEpubData.printEventsEmitter.emit("stop")}):this.printEpubData.printEventsEmitter.emit("stop");else{let m=p++;this.progressValue=Math.floor((m+1)/f.requestsPack.length*100);let v=f.requestsPack[m];this.epubBuilder.generate(v,0==m,v.showMiddleContent,!1).then(y=>{this.config.post(()=>g())})}};g()}else this.printEpubData.printEventsEmitter.emit("stop")}else this.printEpubData.printEventsEmitter.emit("stop")})}onPrintEpubEvent(l){"print"===(this.lastEvent=l,l)?(this.clearAllItems(),this.progressValue=1,this.bookSvc.loadBookByName(this.printEpubData.bookName,this.printEpubData.bookLanguages,this.uiConfig.ui.memorialPrintAllBook.getBooleanValue()?"1":this.printEpubData.bookChapter)):this.progressValue=0}}return S(c,"\u0275fac",function(l){return new(l||c)(z(ln),z(ii),z(Lfe))}),S(c,"\u0275cmp",Je({type:c,selectors:[["app-dynamic-print-epub"]],inputs:{data:"data"},decls:6,vars:4,consts:[[4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["clrInline","",4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"]],template:function(l,h){1&l&&(R(0,"div")(1,"div"),K(2,fkt,2,0,"span",0),se(3),N(),K(4,pkt,1,1,"clr-progress-bar",1),N(),K(5,gkt,7,4,"clr-toggle-container",2)),2&l&&(F(2),L("ngIf",h.progressValue>0),F(1),gi('"',h.printEpubData.bookTitle,'":'),F(1),L("ngIf",h.progressValue>0),F(1),L("ngIf",h.printEpubData.showSettings))},dependencies:[Sn,ls,qp,_k,Zp,ZB,cd,Pa,ma],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]})),c})();!function FEe(c,a,l){(function dke(c,a,l){"string"!=typeof a&&(l=a,a=c[yn.LocaleId]),a=a.toLowerCase().replace(/_/g,"-"),wy[a]=c,l&&(wy[a][yn.ExtraData]=l)})(c,a,l)}(ckt,"ru",[[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447.","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"]],[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447.","\u043d\u043e\u0447\u044c"],void 0,["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447\u0435\u0440","\u043d\u043e\u0447\u044c"]],["00:00","12:00",["04:00","12:00"],["12:00","18:00"],["18:00","22:00"],["22:00","04:00"]]]);let vkt=(()=>{class c{}return S(c,"\u0275fac",function(l){return new(l||c)}),S(c,"\u0275mod",Un({type:c,bootstrap:[akt]})),S(c,"\u0275inj",Ln({providers:[ln,bo,lE,Pd,O1,ii,JU,pfe,gfe,k1,$a,r_e,s_e,Oh,Vw,_fe,C1,yfe,vfe,Sg,lz,mfe,jE,$fe,Qfe,jfe,d7,Gfe,GE,QE,E1,oa,Lfe,zG,PN,Mg,K$,Gye,Vye,qE,[{provide:rfe,useClass:hkt,multi:!0},{provide:Yu,useValue:"ru"}]],imports:[nJ,G2t,pHe,WTt,wnt,Qp]})),c})();uR(Wc,[di,vi,Sn,so,Hf,$f,XS,Qm,KS,YS,JS,s_,rc,Zfe,A1,XE,p7,I1,mkt],[]),uR(Fz,[di,Sn,so,Wc],[]),c3e().bootstrapModule(vkt).catch(c=>console.error(c))},650:uC=>{uC.exports=function $e(Bt,je,ge){function Se(Re,Ge){if(!je[Re]){if(!Bt[Re]){if(ue)return ue(Re,!0);var He=new Error("Cannot find module '"+Re+"'");throw He.code="MODULE_NOT_FOUND",He}var he=je[Re]={exports:{}};Bt[Re][0].call(he.exports,function(ke){return Se(Bt[Re][1][ke]||ke)},he,he.exports,$e,Bt,je,ge)}return je[Re].exports}for(var ue=void 0,xe=0;xe<ge.length;xe++)Se(ge[xe]);return Se}({1:[function($e,Bt,je){"use strict";var ge=$e("./utils"),Se=$e("./support"),ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";je.encode=function(xe){for(var Re,Ge,Ve,he,ke,le,Oe=[],me=0,Me=xe.length,Qe=Me,rt="string"!==ge.getTypeOf(xe);me<xe.length;)Qe=Me-me,Ve=rt?(Re=xe[me++],Ge=me<Me?xe[me++]:0,me<Me?xe[me++]:0):(Re=xe.charCodeAt(me++),Ge=me<Me?xe.charCodeAt(me++):0,me<Me?xe.charCodeAt(me++):0),he=(3&Re)<<4|Ge>>4,ke=1<Qe?(15&Ge)<<2|Ve>>6:64,le=2<Qe?63&Ve:64,Oe.push(ue.charAt(Re>>2)+ue.charAt(he)+ue.charAt(ke)+ue.charAt(le));return Oe.join("")},je.decode=function(xe){var Re,Ge,Ve,He,he,ke,le=0,Oe=0;if("data:"===xe.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var Me,Qe=3*(xe=xe.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(xe.charAt(xe.length-1)===ue.charAt(64)&&Qe--,xe.charAt(xe.length-2)===ue.charAt(64)&&Qe--,Qe%1!=0)throw new Error("Invalid base64 input, bad content length.");for(Me=Se.uint8array?new Uint8Array(0|Qe):new Array(0|Qe);le<xe.length;)Re=ue.indexOf(xe.charAt(le++))<<2|(He=ue.indexOf(xe.charAt(le++)))>>4,Ge=(15&He)<<4|(he=ue.indexOf(xe.charAt(le++)))>>2,Ve=(3&he)<<6|(ke=ue.indexOf(xe.charAt(le++))),Me[Oe++]=Re,64!==he&&(Me[Oe++]=Ge),64!==ke&&(Me[Oe++]=Ve);return Me}},{"./support":30,"./utils":32}],2:[function($e,Bt,je){"use strict";var ge=$e("./external"),Se=$e("./stream/DataWorker"),ue=$e("./stream/Crc32Probe"),xe=$e("./stream/DataLengthProbe");function Re(Ge,Ve,He,he,ke){this.compressedSize=Ge,this.uncompressedSize=Ve,this.crc32=He,this.compression=he,this.compressedContent=ke}Re.prototype={getContentWorker:function(){var Ge=new Se(ge.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new xe("data_length")),Ve=this;return Ge.on("end",function(){if(this.streamInfo.data_length!==Ve.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Ge},getCompressedWorker:function(){return new Se(ge.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Re.createWorkerFrom=function(Ge,Ve,He){return Ge.pipe(new ue).pipe(new xe("uncompressedSize")).pipe(Ve.compressWorker(He)).pipe(new xe("compressedSize")).withStreamInfo("compression",Ve)},Bt.exports=Re},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function($e,Bt,je){"use strict";var ge=$e("./stream/GenericWorker");je.STORE={magic:"\0\0",compressWorker:function(){return new ge("STORE compression")},uncompressWorker:function(){return new ge("STORE decompression")}},je.DEFLATE=$e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function($e,Bt,je){"use strict";var ge=$e("./utils"),Se=function(){for(var ue,xe=[],Re=0;Re<256;Re++){ue=Re;for(var Ge=0;Ge<8;Ge++)ue=1&ue?3988292384^ue>>>1:ue>>>1;xe[Re]=ue}return xe}();Bt.exports=function(ue,xe){return void 0!==ue&&ue.length?"string"!==ge.getTypeOf(ue)?function(Re,Ge,Ve,He){var he=Se,ke=0+Ve;Re^=-1;for(var le=0;le<ke;le++)Re=Re>>>8^he[255&(Re^Ge[le])];return-1^Re}(0|xe,ue,ue.length):function(Re,Ge,Ve,He){var he=Se,ke=0+Ve;Re^=-1;for(var le=0;le<ke;le++)Re=Re>>>8^he[255&(Re^Ge.charCodeAt(le))];return-1^Re}(0|xe,ue,ue.length):0}},{"./utils":32}],5:[function($e,Bt,je){"use strict";je.base64=!1,je.binary=!1,je.dir=!1,je.createFolders=!0,je.date=null,je.compression=null,je.compressionOptions=null,je.comment=null,je.unixPermissions=null,je.dosPermissions=null},{}],6:[function($e,Bt,je){"use strict";var ge;ge=typeof Promise<"u"?Promise:$e("lie"),Bt.exports={Promise:ge}},{lie:37}],7:[function($e,Bt,je){"use strict";var ge=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",Se=$e("pako"),ue=$e("./utils"),xe=$e("./stream/GenericWorker"),Re=ge?"uint8array":"array";function Ge(Ve,He){xe.call(this,"FlateWorker/"+Ve),this._pako=null,this._pakoAction=Ve,this._pakoOptions=He,this.meta={}}je.magic="\b\0",ue.inherits(Ge,xe),Ge.prototype.processChunk=function(Ve){this.meta=Ve.meta,null===this._pako&&this._createPako(),this._pako.push(ue.transformTo(Re,Ve.data),!1)},Ge.prototype.flush=function(){xe.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Ge.prototype.cleanUp=function(){xe.prototype.cleanUp.call(this),this._pako=null},Ge.prototype._createPako=function(){this._pako=new Se[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Ve=this;this._pako.onData=function(He){Ve.push({data:He,meta:Ve.meta})}},je.compressWorker=function(Ve){return new Ge("Deflate",Ve)},je.uncompressWorker=function(){return new Ge("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function($e,Bt,je){"use strict";function ge(he,ke){var le,Oe="";for(le=0;le<ke;le++)Oe+=String.fromCharCode(255&he),he>>>=8;return Oe}function Se(he,ke,le,Oe,me,Me){var Qe,rt,Ye=he.file,Pt=he.compression,Ot=Me!==Re.utf8encode,Qt=ue.transformTo("string",Me(Ye.name)),St=ue.transformTo("string",Re.utf8encode(Ye.name)),Jt=Ye.comment,si=ue.transformTo("string",Me(Jt)),Ne=ue.transformTo("string",Re.utf8encode(Jt)),wt=St.length!==Ye.name.length,oe=Ne.length!==Jt.length,At="",xi="",Wt="",pi=Ye.dir,Yt=Ye.date,ui={crc32:0,compressedSize:0,uncompressedSize:0};ke&&!le||(ui.crc32=he.crc32,ui.compressedSize=he.compressedSize,ui.uncompressedSize=he.uncompressedSize);var Ke=0;ke&&(Ke|=8),Ot||!wt&&!oe||(Ke|=2048);var cn,Ao,ht=0,ti=0;pi&&(ht|=16),"UNIX"===me?(ti=798,ht|=(Ao=cn=Ye.unixPermissions,cn||(Ao=pi?16893:33204),(65535&Ao)<<16)):(ti=20,ht|=function(cn){return 63&(cn||0)}(Ye.dosPermissions)),Qe=Yt.getUTCHours(),Qe<<=6,Qe|=Yt.getUTCMinutes(),Qe<<=5,Qe|=Yt.getUTCSeconds()/2,rt=Yt.getUTCFullYear()-1980,rt<<=4,rt|=Yt.getUTCMonth()+1,rt<<=5,rt|=Yt.getUTCDate(),wt&&(xi=ge(1,1)+ge(Ge(Qt),4)+St,At+="up"+ge(xi.length,2)+xi),oe&&(Wt=ge(1,1)+ge(Ge(si),4)+Ne,At+="uc"+ge(Wt.length,2)+Wt);var xn="";return xn+="\n\0",xn+=ge(Ke,2),xn+=Pt.magic,xn+=ge(Qe,2),xn+=ge(rt,2),xn+=ge(ui.crc32,4),xn+=ge(ui.compressedSize,4),xn+=ge(ui.uncompressedSize,4),xn+=ge(Qt.length,2),xn+=ge(At.length,2),{fileRecord:Ve.LOCAL_FILE_HEADER+xn+Qt+At,dirRecord:Ve.CENTRAL_FILE_HEADER+ge(ti,2)+xn+ge(si.length,2)+"\0\0\0\0"+ge(ht,4)+ge(Oe,4)+Qt+At+si}}var ue=$e("../utils"),xe=$e("../stream/GenericWorker"),Re=$e("../utf8"),Ge=$e("../crc32"),Ve=$e("../signature");function He(he,ke,le,Oe){xe.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=ke,this.zipPlatform=le,this.encodeFileName=Oe,this.streamFiles=he,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}ue.inherits(He,xe),He.prototype.push=function(he){var ke=he.meta.percent||0,le=this.entriesCount,Oe=this._sources.length;this.accumulate?this.contentBuffer.push(he):(this.bytesWritten+=he.data.length,xe.prototype.push.call(this,{data:he.data,meta:{currentFile:this.currentFile,percent:le?(ke+100*(le-Oe-1))/le:100}}))},He.prototype.openedSource=function(he){this.currentSourceOffset=this.bytesWritten,this.currentFile=he.file.name;var ke=this.streamFiles&&!he.file.dir;if(ke){var le=Se(he,ke,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:le.fileRecord,meta:{percent:0}})}else this.accumulate=!0},He.prototype.closedSource=function(he){this.accumulate=!1;var Oe,ke=this.streamFiles&&!he.file.dir,le=Se(he,ke,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(le.dirRecord),ke)this.push({data:(Oe=he,Ve.DATA_DESCRIPTOR+ge(Oe.crc32,4)+ge(Oe.compressedSize,4)+ge(Oe.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:le.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},He.prototype.flush=function(){for(var he=this.bytesWritten,ke=0;ke<this.dirRecords.length;ke++)this.push({data:this.dirRecords[ke],meta:{percent:100}});var me,Me,Qe,Pt,Oe=(me=this.dirRecords.length,Me=this.bytesWritten-he,Qe=he,Pt=ue.transformTo("string",(0,this.encodeFileName)(this.zipComment)),Ve.CENTRAL_DIRECTORY_END+"\0\0\0\0"+ge(me,2)+ge(me,2)+ge(Me,4)+ge(Qe,4)+ge(Pt.length,2)+Pt);this.push({data:Oe,meta:{percent:100}})},He.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},He.prototype.registerPrevious=function(he){this._sources.push(he);var ke=this;return he.on("data",function(le){ke.processChunk(le)}),he.on("end",function(){ke.closedSource(ke.previous.streamInfo),ke._sources.length?ke.prepareNextSource():ke.end()}),he.on("error",function(le){ke.error(le)}),this},He.prototype.resume=function(){return!!xe.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},He.prototype.error=function(he){var ke=this._sources;if(!xe.prototype.error.call(this,he))return!1;for(var le=0;le<ke.length;le++)try{ke[le].error(he)}catch{}return!0},He.prototype.lock=function(){xe.prototype.lock.call(this);for(var he=this._sources,ke=0;ke<he.length;ke++)he[ke].lock()},Bt.exports=He},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function($e,Bt,je){"use strict";var ge=$e("../compressions"),Se=$e("./ZipFileWorker");je.generateWorker=function(ue,xe,Re){var Ge=new Se(xe.streamFiles,Re,xe.platform,xe.encodeFileName),Ve=0;try{ue.forEach(function(He,he){Ve++;var ke=function(Me,Qe){var rt=Me||Qe,Ye=ge[rt];if(!Ye)throw new Error(rt+" is not a valid compression method !");return Ye}(he.options.compression,xe.compression),Oe=he.dir,me=he.date;he._compressWorker(ke,he.options.compressionOptions||xe.compressionOptions||{}).withStreamInfo("file",{name:He,dir:Oe,date:me,comment:he.comment||"",unixPermissions:he.unixPermissions,dosPermissions:he.dosPermissions}).pipe(Ge)}),Ge.entriesCount=Ve}catch(He){Ge.error(He)}return Ge}},{"../compressions":3,"./ZipFileWorker":8}],10:[function($e,Bt,je){"use strict";function ge(){if(!(this instanceof ge))return new ge;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var Se=new ge;for(var ue in this)"function"!=typeof this[ue]&&(Se[ue]=this[ue]);return Se}}(ge.prototype=$e("./object")).loadAsync=$e("./load"),ge.support=$e("./support"),ge.defaults=$e("./defaults"),ge.version="3.10.1",ge.loadAsync=function(Se,ue){return(new ge).loadAsync(Se,ue)},ge.external=$e("./external"),Bt.exports=ge},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function($e,Bt,je){"use strict";var ge=$e("./utils"),Se=$e("./external"),ue=$e("./utf8"),xe=$e("./zipEntries"),Re=$e("./stream/Crc32Probe"),Ge=$e("./nodejsUtils");function Ve(He){return new Se.Promise(function(he,ke){var le=He.decompressed.getContentWorker().pipe(new Re);le.on("error",function(Oe){ke(Oe)}).on("end",function(){le.streamInfo.crc32!==He.decompressed.crc32?ke(new Error("Corrupted zip : CRC32 mismatch")):he()}).resume()})}Bt.exports=function(He,he){var ke=this;return he=ge.extend(he||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:ue.utf8decode}),Ge.isNode&&Ge.isStream(He)?Se.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):ge.prepareContent("the loaded zip file",He,!0,he.optimizedBinaryString,he.base64).then(function(le){var Oe=new xe(he);return Oe.load(le),Oe}).then(function(le){var Oe=[Se.Promise.resolve(le)],me=le.files;if(he.checkCRC32)for(var Me=0;Me<me.length;Me++)Oe.push(Ve(me[Me]));return Se.Promise.all(Oe)}).then(function(le){for(var Oe=le.shift(),me=Oe.files,Me=0;Me<me.length;Me++){var Qe=me[Me],rt=Qe.fileNameStr,Ye=ge.resolve(Qe.fileNameStr);ke.file(Ye,Qe.decompressed,{binary:!0,optimizedBinaryString:!0,date:Qe.date,dir:Qe.dir,comment:Qe.fileCommentStr.length?Qe.fileCommentStr:null,unixPermissions:Qe.unixPermissions,dosPermissions:Qe.dosPermissions,createFolders:he.createFolders}),Qe.dir||(ke.file(Ye).unsafeOriginalName=rt)}return Oe.zipComment.length&&(ke.comment=Oe.zipComment),ke})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function($e,Bt,je){"use strict";var ge=$e("../utils"),Se=$e("../stream/GenericWorker");function ue(xe,Re){Se.call(this,"Nodejs stream input adapter for "+xe),this._upstreamEnded=!1,this._bindStream(Re)}ge.inherits(ue,Se),ue.prototype._bindStream=function(xe){var Re=this;(this._stream=xe).pause(),xe.on("data",function(Ge){Re.push({data:Ge,meta:{percent:0}})}).on("error",function(Ge){Re.isPaused?this.generatedError=Ge:Re.error(Ge)}).on("end",function(){Re.isPaused?Re._upstreamEnded=!0:Re.end()})},ue.prototype.pause=function(){return!!Se.prototype.pause.call(this)&&(this._stream.pause(),!0)},ue.prototype.resume=function(){return!!Se.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Bt.exports=ue},{"../stream/GenericWorker":28,"../utils":32}],13:[function($e,Bt,je){"use strict";var ge=$e("readable-stream").Readable;function Se(ue,xe,Re){ge.call(this,xe),this._helper=ue;var Ge=this;ue.on("data",function(Ve,He){Ge.push(Ve)||Ge._helper.pause(),Re&&Re(He)}).on("error",function(Ve){Ge.emit("error",Ve)}).on("end",function(){Ge.push(null)})}$e("../utils").inherits(Se,ge),Se.prototype._read=function(){this._helper.resume()},Bt.exports=Se},{"../utils":32,"readable-stream":16}],14:[function($e,Bt,je){"use strict";Bt.exports={isNode:typeof Buffer<"u",newBufferFrom:function(ge,Se){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(ge,Se);if("number"==typeof ge)throw new Error('The "data" argument must not be a number');return new Buffer(ge,Se)},allocBuffer:function(ge){if(Buffer.alloc)return Buffer.alloc(ge);var Se=new Buffer(ge);return Se.fill(0),Se},isBuffer:function(ge){return Buffer.isBuffer(ge)},isStream:function(ge){return ge&&"function"==typeof ge.on&&"function"==typeof ge.pause&&"function"==typeof ge.resume}}},{}],15:[function($e,Bt,je){"use strict";function ge(Ye,Pt,Ot){var Qt,St=ue.getTypeOf(Pt),Jt=ue.extend(Ot||{},Ge);Jt.date=Jt.date||new Date,null!==Jt.compression&&(Jt.compression=Jt.compression.toUpperCase()),"string"==typeof Jt.unixPermissions&&(Jt.unixPermissions=parseInt(Jt.unixPermissions,8)),Jt.unixPermissions&&16384&Jt.unixPermissions&&(Jt.dir=!0),Jt.dosPermissions&&16&Jt.dosPermissions&&(Jt.dir=!0),Jt.dir&&(Ye=me(Ye)),Jt.createFolders&&(Qt=Oe(Ye))&&Me.call(this,Qt,!0),Ot&&void 0!==Ot.binary||(Jt.binary=!("string"===St&&!1===Jt.binary&&!1===Jt.base64)),(Pt instanceof Ve&&0===Pt.uncompressedSize||Jt.dir||!Pt||0===Pt.length)&&(Jt.base64=!1,Jt.binary=!0,Pt="",Jt.compression="STORE",St="string");var Ne;Ne=Pt instanceof Ve||Pt instanceof xe?Pt:ke.isNode&&ke.isStream(Pt)?new le(Ye,Pt):ue.prepareContent(Ye,Pt,Jt.binary,Jt.optimizedBinaryString,Jt.base64);var wt=new He(Ye,Ne,Jt);this.files[Ye]=wt}var Se=$e("./utf8"),ue=$e("./utils"),xe=$e("./stream/GenericWorker"),Re=$e("./stream/StreamHelper"),Ge=$e("./defaults"),Ve=$e("./compressedObject"),He=$e("./zipObject"),he=$e("./generate"),ke=$e("./nodejsUtils"),le=$e("./nodejs/NodejsStreamInputAdapter"),Oe=function(Ye){"/"===Ye.slice(-1)&&(Ye=Ye.substring(0,Ye.length-1));var Pt=Ye.lastIndexOf("/");return 0<Pt?Ye.substring(0,Pt):""},me=function(Ye){return"/"!==Ye.slice(-1)&&(Ye+="/"),Ye},Me=function(Ye,Pt){return Pt=void 0!==Pt?Pt:Ge.createFolders,Ye=me(Ye),this.files[Ye]||ge.call(this,Ye,null,{dir:!0,createFolders:Pt}),this.files[Ye]};function Qe(Ye){return"[object RegExp]"===Object.prototype.toString.call(Ye)}var rt={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Ye){var Pt,Ot,Qt;for(Pt in this.files)Qt=this.files[Pt],(Ot=Pt.slice(this.root.length,Pt.length))&&Pt.slice(0,this.root.length)===this.root&&Ye(Ot,Qt)},filter:function(Ye){var Pt=[];return this.forEach(function(Ot,Qt){Ye(Ot,Qt)&&Pt.push(Qt)}),Pt},file:function(Ye,Pt,Ot){if(1!==arguments.length)return ge.call(this,Ye=this.root+Ye,Pt,Ot),this;if(Qe(Ye)){var Qt=Ye;return this.filter(function(Jt,si){return!si.dir&&Qt.test(Jt)})}var St=this.files[this.root+Ye];return St&&!St.dir?St:null},folder:function(Ye){if(!Ye)return this;if(Qe(Ye))return this.filter(function(St,Jt){return Jt.dir&&Ye.test(St)});var Ot=Me.call(this,this.root+Ye),Qt=this.clone();return Qt.root=Ot.name,Qt},remove:function(Ye){var Pt=this.files[Ye=this.root+Ye];if(Pt||("/"!==Ye.slice(-1)&&(Ye+="/"),Pt=this.files[Ye]),Pt&&!Pt.dir)delete this.files[Ye];else for(var Ot=this.filter(function(St,Jt){return Jt.name.slice(0,Ye.length)===Ye}),Qt=0;Qt<Ot.length;Qt++)delete this.files[Ot[Qt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Ye){var Pt,Ot={};try{if((Ot=ue.extend(Ye||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Se.utf8encode})).type=Ot.type.toLowerCase(),Ot.compression=Ot.compression.toUpperCase(),"binarystring"===Ot.type&&(Ot.type="string"),!Ot.type)throw new Error("No output type specified.");ue.checkSupport(Ot.type),"darwin"!==Ot.platform&&"freebsd"!==Ot.platform&&"linux"!==Ot.platform&&"sunos"!==Ot.platform||(Ot.platform="UNIX"),"win32"===Ot.platform&&(Ot.platform="DOS"),Pt=he.generateWorker(this,Ot,Ot.comment||this.comment||"")}catch(St){(Pt=new xe("error")).error(St)}return new Re(Pt,Ot.type||"string",Ot.mimeType)},generateAsync:function(Ye,Pt){return this.generateInternalStream(Ye).accumulate(Pt)},generateNodeStream:function(Ye,Pt){return(Ye=Ye||{}).type||(Ye.type="nodebuffer"),this.generateInternalStream(Ye).toNodejsStream(Pt)}};Bt.exports=rt},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function($e,Bt,je){"use strict";Bt.exports=$e("stream")},{stream:void 0}],17:[function($e,Bt,je){"use strict";var ge=$e("./DataReader");function Se(ue){ge.call(this,ue);for(var xe=0;xe<this.data.length;xe++)ue[xe]=255&ue[xe]}$e("../utils").inherits(Se,ge),Se.prototype.byteAt=function(ue){return this.data[this.zero+ue]},Se.prototype.lastIndexOfSignature=function(ue){for(var xe=ue.charCodeAt(0),Re=ue.charCodeAt(1),Ge=ue.charCodeAt(2),Ve=ue.charCodeAt(3),He=this.length-4;0<=He;--He)if(this.data[He]===xe&&this.data[He+1]===Re&&this.data[He+2]===Ge&&this.data[He+3]===Ve)return He-this.zero;return-1},Se.prototype.readAndCheckSignature=function(ue){var xe=ue.charCodeAt(0),Re=ue.charCodeAt(1),Ge=ue.charCodeAt(2),Ve=ue.charCodeAt(3),He=this.readData(4);return xe===He[0]&&Re===He[1]&&Ge===He[2]&&Ve===He[3]},Se.prototype.readData=function(ue){if(this.checkOffset(ue),0===ue)return[];var xe=this.data.slice(this.zero+this.index,this.zero+this.index+ue);return this.index+=ue,xe},Bt.exports=Se},{"../utils":32,"./DataReader":18}],18:[function($e,Bt,je){"use strict";var ge=$e("../utils");function Se(ue){this.data=ue,this.length=ue.length,this.index=0,this.zero=0}Se.prototype={checkOffset:function(ue){this.checkIndex(this.index+ue)},checkIndex:function(ue){if(this.length<this.zero+ue||ue<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+ue+"). Corrupted zip ?")},setIndex:function(ue){this.checkIndex(ue),this.index=ue},skip:function(ue){this.setIndex(this.index+ue)},byteAt:function(){},readInt:function(ue){var xe,Re=0;for(this.checkOffset(ue),xe=this.index+ue-1;xe>=this.index;xe--)Re=(Re<<8)+this.byteAt(xe);return this.index+=ue,Re},readString:function(ue){return ge.transformTo("string",this.readData(ue))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var ue=this.readInt(4);return new Date(Date.UTC(1980+(ue>>25&127),(ue>>21&15)-1,ue>>16&31,ue>>11&31,ue>>5&63,(31&ue)<<1))}},Bt.exports=Se},{"../utils":32}],19:[function($e,Bt,je){"use strict";var ge=$e("./Uint8ArrayReader");function Se(ue){ge.call(this,ue)}$e("../utils").inherits(Se,ge),Se.prototype.readData=function(ue){this.checkOffset(ue);var xe=this.data.slice(this.zero+this.index,this.zero+this.index+ue);return this.index+=ue,xe},Bt.exports=Se},{"../utils":32,"./Uint8ArrayReader":21}],20:[function($e,Bt,je){"use strict";var ge=$e("./DataReader");function Se(ue){ge.call(this,ue)}$e("../utils").inherits(Se,ge),Se.prototype.byteAt=function(ue){return this.data.charCodeAt(this.zero+ue)},Se.prototype.lastIndexOfSignature=function(ue){return this.data.lastIndexOf(ue)-this.zero},Se.prototype.readAndCheckSignature=function(ue){return ue===this.readData(4)},Se.prototype.readData=function(ue){this.checkOffset(ue);var xe=this.data.slice(this.zero+this.index,this.zero+this.index+ue);return this.index+=ue,xe},Bt.exports=Se},{"../utils":32,"./DataReader":18}],21:[function($e,Bt,je){"use strict";var ge=$e("./ArrayReader");function Se(ue){ge.call(this,ue)}$e("../utils").inherits(Se,ge),Se.prototype.readData=function(ue){if(this.checkOffset(ue),0===ue)return new Uint8Array(0);var xe=this.data.subarray(this.zero+this.index,this.zero+this.index+ue);return this.index+=ue,xe},Bt.exports=Se},{"../utils":32,"./ArrayReader":17}],22:[function($e,Bt,je){"use strict";var ge=$e("../utils"),Se=$e("../support"),ue=$e("./ArrayReader"),xe=$e("./StringReader"),Re=$e("./NodeBufferReader"),Ge=$e("./Uint8ArrayReader");Bt.exports=function(Ve){var He=ge.getTypeOf(Ve);return ge.checkSupport(He),"string"!==He||Se.uint8array?"nodebuffer"===He?new Re(Ve):Se.uint8array?new Ge(ge.transformTo("uint8array",Ve)):new ue(ge.transformTo("array",Ve)):new xe(Ve)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function($e,Bt,je){"use strict";je.LOCAL_FILE_HEADER="PK\x03\x04",je.CENTRAL_FILE_HEADER="PK\x01\x02",je.CENTRAL_DIRECTORY_END="PK\x05\x06",je.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",je.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",je.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function($e,Bt,je){"use strict";var ge=$e("./GenericWorker"),Se=$e("../utils");function ue(xe){ge.call(this,"ConvertWorker to "+xe),this.destType=xe}Se.inherits(ue,ge),ue.prototype.processChunk=function(xe){this.push({data:Se.transformTo(this.destType,xe.data),meta:xe.meta})},Bt.exports=ue},{"../utils":32,"./GenericWorker":28}],25:[function($e,Bt,je){"use strict";var ge=$e("./GenericWorker"),Se=$e("../crc32");function ue(){ge.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}$e("../utils").inherits(ue,ge),ue.prototype.processChunk=function(xe){this.streamInfo.crc32=Se(xe.data,this.streamInfo.crc32||0),this.push(xe)},Bt.exports=ue},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function($e,Bt,je){"use strict";var ge=$e("../utils"),Se=$e("./GenericWorker");function ue(xe){Se.call(this,"DataLengthProbe for "+xe),this.propName=xe,this.withStreamInfo(xe,0)}ge.inherits(ue,Se),ue.prototype.processChunk=function(xe){xe&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+xe.data.length),Se.prototype.processChunk.call(this,xe)},Bt.exports=ue},{"../utils":32,"./GenericWorker":28}],27:[function($e,Bt,je){"use strict";var ge=$e("../utils"),Se=$e("./GenericWorker");function ue(xe){Se.call(this,"DataWorker");var Re=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,xe.then(function(Ge){Re.dataIsReady=!0,Re.data=Ge,Re.max=Ge&&Ge.length||0,Re.type=ge.getTypeOf(Ge),Re.isPaused||Re._tickAndRepeat()},function(Ge){Re.error(Ge)})}ge.inherits(ue,Se),ue.prototype.cleanUp=function(){Se.prototype.cleanUp.call(this),this.data=null},ue.prototype.resume=function(){return!!Se.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ge.delay(this._tickAndRepeat,[],this)),!0)},ue.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(ge.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},ue.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var xe=null,Re=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":xe=this.data.substring(this.index,Re);break;case"uint8array":xe=this.data.subarray(this.index,Re);break;case"array":case"nodebuffer":xe=this.data.slice(this.index,Re)}return this.index=Re,this.push({data:xe,meta:{percent:this.max?this.index/this.max*100:0}})},Bt.exports=ue},{"../utils":32,"./GenericWorker":28}],28:[function($e,Bt,je){"use strict";function ge(Se){this.name=Se||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}ge.prototype={push:function(Se){this.emit("data",Se)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(Se){this.emit("error",Se)}return!0},error:function(Se){return!this.isFinished&&(this.isPaused?this.generatedError=Se:(this.isFinished=!0,this.emit("error",Se),this.previous&&this.previous.error(Se),this.cleanUp()),!0)},on:function(Se,ue){return this._listeners[Se].push(ue),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(Se,ue){if(this._listeners[Se])for(var xe=0;xe<this._listeners[Se].length;xe++)this._listeners[Se][xe].call(this,ue)},pipe:function(Se){return Se.registerPrevious(this)},registerPrevious:function(Se){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=Se.streamInfo,this.mergeStreamInfo(),this.previous=Se;var ue=this;return Se.on("data",function(xe){ue.processChunk(xe)}),Se.on("end",function(){ue.end()}),Se.on("error",function(xe){ue.error(xe)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var Se=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),Se=!0),this.previous&&this.previous.resume(),!Se},flush:function(){},processChunk:function(Se){this.push(Se)},withStreamInfo:function(Se,ue){return this.extraStreamInfo[Se]=ue,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var Se in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,Se)&&(this.streamInfo[Se]=this.extraStreamInfo[Se])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var Se="Worker "+this.name;return this.previous?this.previous+" -> "+Se:Se}},Bt.exports=ge},{}],29:[function($e,Bt,je){"use strict";var ge=$e("../utils"),Se=$e("./ConvertWorker"),ue=$e("./GenericWorker"),xe=$e("../base64"),Re=$e("../support"),Ge=$e("../external"),Ve=null;if(Re.nodestream)try{Ve=$e("../nodejs/NodejsStreamOutputAdapter")}catch{}function he(ke,le,Oe){var me=le;switch(le){case"blob":case"arraybuffer":me="uint8array";break;case"base64":me="string"}try{this._internalType=me,this._outputType=le,this._mimeType=Oe,ge.checkSupport(me),this._worker=ke.pipe(new Se(me)),ke.lock()}catch(Me){this._worker=new ue("error"),this._worker.error(Me)}}he.prototype={accumulate:function(ke){return function He(ke,le){return new Ge.Promise(function(Oe,me){var Me=[],Qe=ke._internalType,rt=ke._outputType,Ye=ke._mimeType;ke.on("data",function(Pt,Ot){Me.push(Pt),le&&le(Ot)}).on("error",function(Pt){Me=[],me(Pt)}).on("end",function(){try{var Pt=function(Ot,Qt,St){switch(Ot){case"blob":return ge.newBlob(ge.transformTo("arraybuffer",Qt),St);case"base64":return xe.encode(Qt);default:return ge.transformTo(Ot,Qt)}}(rt,function(Ot,Qt){var St,Jt=0,si=null,Ne=0;for(St=0;St<Qt.length;St++)Ne+=Qt[St].length;switch(Ot){case"string":return Qt.join("");case"array":return Array.prototype.concat.apply([],Qt);case"uint8array":for(si=new Uint8Array(Ne),St=0;St<Qt.length;St++)si.set(Qt[St],Jt),Jt+=Qt[St].length;return si;case"nodebuffer":return Buffer.concat(Qt);default:throw new Error("concat : unsupported type '"+Ot+"'")}}(Qe,Me),Ye);Oe(Pt)}catch(Ot){me(Ot)}Me=[]}).resume()})}(this,ke)},on:function(ke,le){var Oe=this;return this._worker.on(ke,"data"===ke?function(me){le.call(Oe,me.data,me.meta)}:function(){ge.delay(le,arguments,Oe)}),this},resume:function(){return ge.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(ke){if(ge.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Ve(this,{objectMode:"nodebuffer"!==this._outputType},ke)}},Bt.exports=he},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function($e,Bt,je){"use strict";if(je.base64=!0,je.array=!0,je.string=!0,je.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",je.nodebuffer=typeof Buffer<"u",je.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")je.blob=!1;else{var ge=new ArrayBuffer(0);try{je.blob=0===new Blob([ge],{type:"application/zip"}).size}catch{try{var Se=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);Se.append(ge),je.blob=0===Se.getBlob("application/zip").size}catch{je.blob=!1}}}try{je.nodestream=!!$e("readable-stream").Readable}catch{je.nodestream=!1}},{"readable-stream":16}],31:[function($e,Bt,je){"use strict";for(var ge=$e("./utils"),Se=$e("./support"),ue=$e("./nodejsUtils"),xe=$e("./stream/GenericWorker"),Re=new Array(256),Ge=0;Ge<256;Ge++)Re[Ge]=252<=Ge?6:248<=Ge?5:240<=Ge?4:224<=Ge?3:192<=Ge?2:1;function Ve(){xe.call(this,"utf-8 decode"),this.leftOver=null}function He(){xe.call(this,"utf-8 encode")}Re[254]=Re[254]=1,je.utf8encode=function(he){return Se.nodebuffer?ue.newBufferFrom(he,"utf-8"):function(ke){var le,Oe,me,Me,Qe,rt=ke.length,Ye=0;for(Me=0;Me<rt;Me++)55296==(64512&(Oe=ke.charCodeAt(Me)))&&Me+1<rt&&56320==(64512&(me=ke.charCodeAt(Me+1)))&&(Oe=65536+(Oe-55296<<10)+(me-56320),Me++),Ye+=Oe<128?1:Oe<2048?2:Oe<65536?3:4;for(le=Se.uint8array?new Uint8Array(Ye):new Array(Ye),Me=Qe=0;Qe<Ye;Me++)55296==(64512&(Oe=ke.charCodeAt(Me)))&&Me+1<rt&&56320==(64512&(me=ke.charCodeAt(Me+1)))&&(Oe=65536+(Oe-55296<<10)+(me-56320),Me++),Oe<128?le[Qe++]=Oe:(Oe<2048?le[Qe++]=192|Oe>>>6:(Oe<65536?le[Qe++]=224|Oe>>>12:(le[Qe++]=240|Oe>>>18,le[Qe++]=128|Oe>>>12&63),le[Qe++]=128|Oe>>>6&63),le[Qe++]=128|63&Oe);return le}(he)},je.utf8decode=function(he){return Se.nodebuffer?ge.transformTo("nodebuffer",he).toString("utf-8"):function(ke){var le,Oe,me,Me,Qe=ke.length,rt=new Array(2*Qe);for(le=Oe=0;le<Qe;)if((me=ke[le++])<128)rt[Oe++]=me;else if(4<(Me=Re[me]))rt[Oe++]=65533,le+=Me-1;else{for(me&=2===Me?31:3===Me?15:7;1<Me&&le<Qe;)me=me<<6|63&ke[le++],Me--;1<Me?rt[Oe++]=65533:me<65536?rt[Oe++]=me:(rt[Oe++]=55296|(me-=65536)>>10&1023,rt[Oe++]=56320|1023&me)}return rt.length!==Oe&&(rt.subarray?rt=rt.subarray(0,Oe):rt.length=Oe),ge.applyFromCharCode(rt)}(he=ge.transformTo(Se.uint8array?"uint8array":"array",he))},ge.inherits(Ve,xe),Ve.prototype.processChunk=function(he){var ke=ge.transformTo(Se.uint8array?"uint8array":"array",he.data);if(this.leftOver&&this.leftOver.length){if(Se.uint8array){var le=ke;(ke=new Uint8Array(le.length+this.leftOver.length)).set(this.leftOver,0),ke.set(le,this.leftOver.length)}else ke=this.leftOver.concat(ke);this.leftOver=null}var Oe=function(Me,Qe){var rt;for((Qe=Qe||Me.length)>Me.length&&(Qe=Me.length),rt=Qe-1;0<=rt&&128==(192&Me[rt]);)rt--;return rt<0||0===rt?Qe:rt+Re[Me[rt]]>Qe?rt:Qe}(ke),me=ke;Oe!==ke.length&&(Se.uint8array?(me=ke.subarray(0,Oe),this.leftOver=ke.subarray(Oe,ke.length)):(me=ke.slice(0,Oe),this.leftOver=ke.slice(Oe,ke.length))),this.push({data:je.utf8decode(me),meta:he.meta})},Ve.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:je.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},je.Utf8DecodeWorker=Ve,ge.inherits(He,xe),He.prototype.processChunk=function(he){this.push({data:je.utf8encode(he.data),meta:he.meta})},je.Utf8EncodeWorker=He},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function($e,Bt,je){"use strict";var ge=$e("./support"),Se=$e("./base64"),ue=$e("./nodejsUtils"),xe=$e("./external");function Re(le){return le}function Ge(le,Oe){for(var me=0;me<le.length;++me)Oe[me]=255&le.charCodeAt(me);return Oe}$e("setimmediate"),je.newBlob=function(le,Oe){je.checkSupport("blob");try{return new Blob([le],{type:Oe})}catch{try{var me=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return me.append(le),me.getBlob(Oe)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Ve={stringifyByChunk:function(le,Oe,me){var Me=[],Qe=0,rt=le.length;if(rt<=me)return String.fromCharCode.apply(null,le);for(;Qe<rt;)Me.push(String.fromCharCode.apply(null,"array"===Oe||"nodebuffer"===Oe?le.slice(Qe,Math.min(Qe+me,rt)):le.subarray(Qe,Math.min(Qe+me,rt)))),Qe+=me;return Me.join("")},stringifyByChar:function(le){for(var Oe="",me=0;me<le.length;me++)Oe+=String.fromCharCode(le[me]);return Oe},applyCanBeUsed:{uint8array:function(){try{return ge.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return ge.nodebuffer&&1===String.fromCharCode.apply(null,ue.allocBuffer(1)).length}catch{return!1}}()}};function He(le){var Oe=65536,me=je.getTypeOf(le),Me=!0;if("uint8array"===me?Me=Ve.applyCanBeUsed.uint8array:"nodebuffer"===me&&(Me=Ve.applyCanBeUsed.nodebuffer),Me)for(;1<Oe;)try{return Ve.stringifyByChunk(le,me,Oe)}catch{Oe=Math.floor(Oe/2)}return Ve.stringifyByChar(le)}function he(le,Oe){for(var me=0;me<le.length;me++)Oe[me]=le[me];return Oe}je.applyFromCharCode=He;var ke={};ke.string={string:Re,array:function(le){return Ge(le,new Array(le.length))},arraybuffer:function(le){return ke.string.uint8array(le).buffer},uint8array:function(le){return Ge(le,new Uint8Array(le.length))},nodebuffer:function(le){return Ge(le,ue.allocBuffer(le.length))}},ke.array={string:He,array:Re,arraybuffer:function(le){return new Uint8Array(le).buffer},uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return ue.newBufferFrom(le)}},ke.arraybuffer={string:function(le){return He(new Uint8Array(le))},array:function(le){return he(new Uint8Array(le),new Array(le.byteLength))},arraybuffer:Re,uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return ue.newBufferFrom(new Uint8Array(le))}},ke.uint8array={string:He,array:function(le){return he(le,new Array(le.length))},arraybuffer:function(le){return le.buffer},uint8array:Re,nodebuffer:function(le){return ue.newBufferFrom(le)}},ke.nodebuffer={string:He,array:function(le){return he(le,new Array(le.length))},arraybuffer:function(le){return ke.nodebuffer.uint8array(le).buffer},uint8array:function(le){return he(le,new Uint8Array(le.length))},nodebuffer:Re},je.transformTo=function(le,Oe){if(Oe=Oe||"",!le)return Oe;je.checkSupport(le);var me=je.getTypeOf(Oe);return ke[me][le](Oe)},je.resolve=function(le){for(var Oe=le.split("/"),me=[],Me=0;Me<Oe.length;Me++){var Qe=Oe[Me];"."===Qe||""===Qe&&0!==Me&&Me!==Oe.length-1||(".."===Qe?me.pop():me.push(Qe))}return me.join("/")},je.getTypeOf=function(le){return"string"==typeof le?"string":"[object Array]"===Object.prototype.toString.call(le)?"array":ge.nodebuffer&&ue.isBuffer(le)?"nodebuffer":ge.uint8array&&le instanceof Uint8Array?"uint8array":ge.arraybuffer&&le instanceof ArrayBuffer?"arraybuffer":void 0},je.checkSupport=function(le){if(!ge[le.toLowerCase()])throw new Error(le+" is not supported by this platform")},je.MAX_VALUE_16BITS=65535,je.MAX_VALUE_32BITS=-1,je.pretty=function(le){var Oe,me,Me="";for(me=0;me<(le||"").length;me++)Me+="\\x"+((Oe=le.charCodeAt(me))<16?"0":"")+Oe.toString(16).toUpperCase();return Me},je.delay=function(le,Oe,me){setImmediate(function(){le.apply(me||null,Oe||[])})},je.inherits=function(le,Oe){function me(){}me.prototype=Oe.prototype,le.prototype=new me},je.extend=function(){var le,Oe,me={};for(le=0;le<arguments.length;le++)for(Oe in arguments[le])Object.prototype.hasOwnProperty.call(arguments[le],Oe)&&void 0===me[Oe]&&(me[Oe]=arguments[le][Oe]);return me},je.prepareContent=function(le,Oe,me,Me,Qe){return xe.Promise.resolve(Oe).then(function(rt){return ge.blob&&(rt instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(rt)))&&typeof FileReader<"u"?new xe.Promise(function(Ye,Pt){var Ot=new FileReader;Ot.onload=function(Qt){Ye(Qt.target.result)},Ot.onerror=function(Qt){Pt(Qt.target.error)},Ot.readAsArrayBuffer(rt)}):rt}).then(function(rt){var Pt,Ye=je.getTypeOf(rt);return Ye?("arraybuffer"===Ye?rt=je.transformTo("uint8array",rt):"string"===Ye&&(Qe?rt=Se.decode(rt):me&&!0!==Me&&(rt=Ge(Pt=rt,ge.uint8array?new Uint8Array(Pt.length):new Array(Pt.length)))),rt):xe.Promise.reject(new Error("Can't read the data of '"+le+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function($e,Bt,je){"use strict";var ge=$e("./reader/readerFor"),Se=$e("./utils"),ue=$e("./signature"),xe=$e("./zipEntry"),Re=$e("./support");function Ge(Ve){this.files=[],this.loadOptions=Ve}Ge.prototype={checkSignature:function(Ve){if(!this.reader.readAndCheckSignature(Ve)){this.reader.index-=4;var He=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+Se.pretty(He)+", expected "+Se.pretty(Ve)+")")}},isSignature:function(Ve,He){var he=this.reader.index;this.reader.setIndex(Ve);var ke=this.reader.readString(4)===He;return this.reader.setIndex(he),ke},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Ve=this.reader.readData(this.zipCommentLength),he=Se.transformTo(Re.uint8array?"uint8array":"array",Ve);this.zipComment=this.loadOptions.decodeFileName(he)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Ve,He,he,ke=this.zip64EndOfCentralSize-44;0<ke;)Ve=this.reader.readInt(2),He=this.reader.readInt(4),he=this.reader.readData(He),this.zip64ExtensibleData[Ve]={id:Ve,length:He,value:he}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Ve,He;for(Ve=0;Ve<this.files.length;Ve++)this.reader.setIndex((He=this.files[Ve]).localHeaderOffset),this.checkSignature(ue.LOCAL_FILE_HEADER),He.readLocalPart(this.reader),He.handleUTF8(),He.processAttributes()},readCentralDir:function(){var Ve;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ue.CENTRAL_FILE_HEADER);)(Ve=new xe({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Ve);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Ve=this.reader.lastIndexOfSignature(ue.CENTRAL_DIRECTORY_END);if(Ve<0)throw this.isSignature(0,ue.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Ve);var He=Ve;if(this.checkSignature(ue.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===Se.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Se.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Se.MAX_VALUE_16BITS||this.centralDirRecords===Se.MAX_VALUE_16BITS||this.centralDirSize===Se.MAX_VALUE_32BITS||this.centralDirOffset===Se.MAX_VALUE_32BITS){if(this.zip64=!0,(Ve=this.reader.lastIndexOfSignature(ue.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Ve),this.checkSignature(ue.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ue.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ue.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ue.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var he=this.centralDirOffset+this.centralDirSize;this.zip64&&(he+=20,he+=12+this.zip64EndOfCentralSize);var ke=He-he;if(0<ke)this.isSignature(He,ue.CENTRAL_FILE_HEADER)||(this.reader.zero=ke);else if(ke<0)throw new Error("Corrupted zip: missing "+Math.abs(ke)+" bytes.")},prepareReader:function(Ve){this.reader=ge(Ve)},load:function(Ve){this.prepareReader(Ve),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Bt.exports=Ge},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function($e,Bt,je){"use strict";var ge=$e("./reader/readerFor"),Se=$e("./utils"),ue=$e("./compressedObject"),xe=$e("./crc32"),Re=$e("./utf8"),Ge=$e("./compressions"),Ve=$e("./support");function He(he,ke){this.options=he,this.loadOptions=ke}He.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(he){var ke,le;if(he.skip(22),this.fileNameLength=he.readInt(2),le=he.readInt(2),this.fileName=he.readData(this.fileNameLength),he.skip(le),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(ke=function(Oe){for(var me in Ge)if(Object.prototype.hasOwnProperty.call(Ge,me)&&Ge[me].magic===Oe)return Ge[me];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+Se.pretty(this.compressionMethod)+" unknown (inner file : "+Se.transformTo("string",this.fileName)+")");this.decompressed=new ue(this.compressedSize,this.uncompressedSize,this.crc32,ke,he.readData(this.compressedSize))},readCentralPart:function(he){this.versionMadeBy=he.readInt(2),he.skip(2),this.bitFlag=he.readInt(2),this.compressionMethod=he.readString(2),this.date=he.readDate(),this.crc32=he.readInt(4),this.compressedSize=he.readInt(4),this.uncompressedSize=he.readInt(4);var ke=he.readInt(2);if(this.extraFieldsLength=he.readInt(2),this.fileCommentLength=he.readInt(2),this.diskNumberStart=he.readInt(2),this.internalFileAttributes=he.readInt(2),this.externalFileAttributes=he.readInt(4),this.localHeaderOffset=he.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");he.skip(ke),this.readExtraFields(he),this.parseZIP64ExtraField(he),this.fileComment=he.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var he=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==he&&(this.dosPermissions=63&this.externalFileAttributes),3==he&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var he=ge(this.extraFields[1].value);this.uncompressedSize===Se.MAX_VALUE_32BITS&&(this.uncompressedSize=he.readInt(8)),this.compressedSize===Se.MAX_VALUE_32BITS&&(this.compressedSize=he.readInt(8)),this.localHeaderOffset===Se.MAX_VALUE_32BITS&&(this.localHeaderOffset=he.readInt(8)),this.diskNumberStart===Se.MAX_VALUE_32BITS&&(this.diskNumberStart=he.readInt(4))}},readExtraFields:function(he){var ke,le,Oe,me=he.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});he.index+4<me;)ke=he.readInt(2),le=he.readInt(2),Oe=he.readData(le),this.extraFields[ke]={id:ke,length:le,value:Oe};he.setIndex(me)},handleUTF8:function(){var he=Ve.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Re.utf8decode(this.fileName),this.fileCommentStr=Re.utf8decode(this.fileComment);else{var ke=this.findExtraFieldUnicodePath();if(null!==ke)this.fileNameStr=ke;else{var le=Se.transformTo(he,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(le)}var Oe=this.findExtraFieldUnicodeComment();if(null!==Oe)this.fileCommentStr=Oe;else{var me=Se.transformTo(he,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(me)}}},findExtraFieldUnicodePath:function(){var he=this.extraFields[28789];if(he){var ke=ge(he.value);return 1!==ke.readInt(1)||xe(this.fileName)!==ke.readInt(4)?null:Re.utf8decode(ke.readData(he.length-5))}return null},findExtraFieldUnicodeComment:function(){var he=this.extraFields[25461];if(he){var ke=ge(he.value);return 1!==ke.readInt(1)||xe(this.fileComment)!==ke.readInt(4)?null:Re.utf8decode(ke.readData(he.length-5))}return null}},Bt.exports=He},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function($e,Bt,je){"use strict";function ge(ke,le,Oe){this.name=ke,this.dir=Oe.dir,this.date=Oe.date,this.comment=Oe.comment,this.unixPermissions=Oe.unixPermissions,this.dosPermissions=Oe.dosPermissions,this._data=le,this._dataBinary=Oe.binary,this.options={compression:Oe.compression,compressionOptions:Oe.compressionOptions}}var Se=$e("./stream/StreamHelper"),ue=$e("./stream/DataWorker"),xe=$e("./utf8"),Re=$e("./compressedObject"),Ge=$e("./stream/GenericWorker");ge.prototype={internalStream:function(ke){var le=null,Oe="string";try{if(!ke)throw new Error("No output type specified.");var me="string"===(Oe=ke.toLowerCase())||"text"===Oe;"binarystring"!==Oe&&"text"!==Oe||(Oe="string"),le=this._decompressWorker();var Me=!this._dataBinary;Me&&!me&&(le=le.pipe(new xe.Utf8EncodeWorker)),!Me&&me&&(le=le.pipe(new xe.Utf8DecodeWorker))}catch(Qe){(le=new Ge("error")).error(Qe)}return new Se(le,Oe,"")},async:function(ke,le){return this.internalStream(ke).accumulate(le)},nodeStream:function(ke,le){return this.internalStream(ke||"nodebuffer").toNodejsStream(le)},_compressWorker:function(ke,le){if(this._data instanceof Re&&this._data.compression.magic===ke.magic)return this._data.getCompressedWorker();var Oe=this._decompressWorker();return this._dataBinary||(Oe=Oe.pipe(new xe.Utf8EncodeWorker)),Re.createWorkerFrom(Oe,ke,le)},_decompressWorker:function(){return this._data instanceof Re?this._data.getContentWorker():this._data instanceof Ge?this._data:new ue(this._data)}};for(var Ve=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],He=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},he=0;he<Ve.length;he++)ge.prototype[Ve[he]]=He;Bt.exports=ge},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function($e,Bt,je){(function(ge){"use strict";var Se,ue,xe=ge.MutationObserver||ge.WebKitMutationObserver;if(xe){var Re=0,Ge=new xe(ke),Ve=ge.document.createTextNode("");Ge.observe(Ve,{characterData:!0}),Se=function(){Ve.data=Re=++Re%2}}else if(ge.setImmediate||void 0===ge.MessageChannel)Se="document"in ge&&"onreadystatechange"in ge.document.createElement("script")?function(){var le=ge.document.createElement("script");le.onreadystatechange=function(){ke(),le.onreadystatechange=null,le.parentNode.removeChild(le),le=null},ge.document.documentElement.appendChild(le)}:function(){setTimeout(ke,0)};else{var He=new ge.MessageChannel;He.port1.onmessage=ke,Se=function(){He.port2.postMessage(0)}}var he=[];function ke(){var le,Oe;ue=!0;for(var me=he.length;me;){for(Oe=he,he=[],le=-1;++le<me;)Oe[le]();me=he.length}ue=!1}Bt.exports=function(le){1!==he.push(le)||ue||Se()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function($e,Bt,je){"use strict";var ge=$e("immediate");function Se(){}var ue={},xe=["REJECTED"],Re=["FULFILLED"],Ge=["PENDING"];function Ve(me){if("function"!=typeof me)throw new TypeError("resolver must be a function");this.state=Ge,this.queue=[],this.outcome=void 0,me!==Se&&le(this,me)}function He(me,Me,Qe){this.promise=me,"function"==typeof Me&&(this.onFulfilled=Me,this.callFulfilled=this.otherCallFulfilled),"function"==typeof Qe&&(this.onRejected=Qe,this.callRejected=this.otherCallRejected)}function he(me,Me,Qe){ge(function(){var rt;try{rt=Me(Qe)}catch(Ye){return ue.reject(me,Ye)}rt===me?ue.reject(me,new TypeError("Cannot resolve promise with itself")):ue.resolve(me,rt)})}function ke(me){var Me=me&&me.then;if(me&&("object"==typeof me||"function"==typeof me)&&"function"==typeof Me)return function(){Me.apply(me,arguments)}}function le(me,Me){var Qe=!1;function rt(Ot){Qe||(Qe=!0,ue.reject(me,Ot))}function Ye(Ot){Qe||(Qe=!0,ue.resolve(me,Ot))}var Pt=Oe(function(){Me(Ye,rt)});"error"===Pt.status&&rt(Pt.value)}function Oe(me,Me){var Qe={};try{Qe.value=me(Me),Qe.status="success"}catch(rt){Qe.status="error",Qe.value=rt}return Qe}(Bt.exports=Ve).prototype.finally=function(me){if("function"!=typeof me)return this;var Me=this.constructor;return this.then(function(Qe){return Me.resolve(me()).then(function(){return Qe})},function(Qe){return Me.resolve(me()).then(function(){throw Qe})})},Ve.prototype.catch=function(me){return this.then(null,me)},Ve.prototype.then=function(me,Me){if("function"!=typeof me&&this.state===Re||"function"!=typeof Me&&this.state===xe)return this;var Qe=new this.constructor(Se);return this.state!==Ge?he(Qe,this.state===Re?me:Me,this.outcome):this.queue.push(new He(Qe,me,Me)),Qe},He.prototype.callFulfilled=function(me){ue.resolve(this.promise,me)},He.prototype.otherCallFulfilled=function(me){he(this.promise,this.onFulfilled,me)},He.prototype.callRejected=function(me){ue.reject(this.promise,me)},He.prototype.otherCallRejected=function(me){he(this.promise,this.onRejected,me)},ue.resolve=function(me,Me){var Qe=Oe(ke,Me);if("error"===Qe.status)return ue.reject(me,Qe.value);var rt=Qe.value;if(rt)le(me,rt);else{me.state=Re,me.outcome=Me;for(var Ye=-1,Pt=me.queue.length;++Ye<Pt;)me.queue[Ye].callFulfilled(Me)}return me},ue.reject=function(me,Me){me.state=xe,me.outcome=Me;for(var Qe=-1,rt=me.queue.length;++Qe<rt;)me.queue[Qe].callRejected(Me);return me},Ve.resolve=function(me){return me instanceof this?me:ue.resolve(new this(Se),me)},Ve.reject=function(me){var Me=new this(Se);return ue.reject(Me,me)},Ve.all=function(me){var Me=this;if("[object Array]"!==Object.prototype.toString.call(me))return this.reject(new TypeError("must be an array"));var Qe=me.length,rt=!1;if(!Qe)return this.resolve([]);for(var Ye=new Array(Qe),Pt=0,Ot=-1,Qt=new this(Se);++Ot<Qe;)St(me[Ot],Ot);return Qt;function St(Jt,si){Me.resolve(Jt).then(function(Ne){Ye[si]=Ne,++Pt!==Qe||rt||(rt=!0,ue.resolve(Qt,Ye))},function(Ne){rt||(rt=!0,ue.reject(Qt,Ne))})}},Ve.race=function(me){if("[object Array]"!==Object.prototype.toString.call(me))return this.reject(new TypeError("must be an array"));var Qe=me.length,rt=!1;if(!Qe)return this.resolve([]);for(var Ye=-1,Pt=new this(Se);++Ye<Qe;)this.resolve(me[Ye]).then(function(Qt){rt||(rt=!0,ue.resolve(Pt,Qt))},function(Qt){rt||(rt=!0,ue.reject(Pt,Qt))});return Pt}},{immediate:36}],38:[function($e,Bt,je){"use strict";var ge={};(0,$e("./lib/utils/common").assign)(ge,$e("./lib/deflate"),$e("./lib/inflate"),$e("./lib/zlib/constants")),Bt.exports=ge},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function($e,Bt,je){"use strict";var ge=$e("./zlib/deflate"),Se=$e("./utils/common"),ue=$e("./utils/strings"),xe=$e("./zlib/messages"),Re=$e("./zlib/zstream"),Ge=Object.prototype.toString;function le(me){if(!(this instanceof le))return new le(me);this.options=Se.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},me||{});var Me=this.options;Me.raw&&0<Me.windowBits?Me.windowBits=-Me.windowBits:Me.gzip&&0<Me.windowBits&&Me.windowBits<16&&(Me.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Re,this.strm.avail_out=0;var Qe=ge.deflateInit2(this.strm,Me.level,Me.method,Me.windowBits,Me.memLevel,Me.strategy);if(0!==Qe)throw new Error(xe[Qe]);if(Me.header&&ge.deflateSetHeader(this.strm,Me.header),Me.dictionary){var rt;if(rt="string"==typeof Me.dictionary?ue.string2buf(Me.dictionary):"[object ArrayBuffer]"===Ge.call(Me.dictionary)?new Uint8Array(Me.dictionary):Me.dictionary,0!==(Qe=ge.deflateSetDictionary(this.strm,rt)))throw new Error(xe[Qe]);this._dict_set=!0}}function Oe(me,Me){var Qe=new le(Me);if(Qe.push(me,!0),Qe.err)throw Qe.msg||xe[Qe.err];return Qe.result}le.prototype.push=function(me,Me){var Qe,rt,Ye=this.strm,Pt=this.options.chunkSize;if(this.ended)return!1;rt=Me===~~Me?Me:!0===Me?4:0,Ye.input="string"==typeof me?ue.string2buf(me):"[object ArrayBuffer]"===Ge.call(me)?new Uint8Array(me):me,Ye.next_in=0,Ye.avail_in=Ye.input.length;do{if(0===Ye.avail_out&&(Ye.output=new Se.Buf8(Pt),Ye.next_out=0,Ye.avail_out=Pt),1!==(Qe=ge.deflate(Ye,rt))&&0!==Qe)return this.onEnd(Qe),!(this.ended=!0);0!==Ye.avail_out&&(0!==Ye.avail_in||4!==rt&&2!==rt)||this.onData("string"===this.options.to?ue.buf2binstring(Se.shrinkBuf(Ye.output,Ye.next_out)):Se.shrinkBuf(Ye.output,Ye.next_out))}while((0<Ye.avail_in||0===Ye.avail_out)&&1!==Qe);return 4===rt?(Qe=ge.deflateEnd(this.strm),this.onEnd(Qe),this.ended=!0,0===Qe):2!==rt||(this.onEnd(0),!(Ye.avail_out=0))},le.prototype.onData=function(me){this.chunks.push(me)},le.prototype.onEnd=function(me){0===me&&(this.result="string"===this.options.to?this.chunks.join(""):Se.flattenChunks(this.chunks)),this.chunks=[],this.err=me,this.msg=this.strm.msg},je.Deflate=le,je.deflate=Oe,je.deflateRaw=function(me,Me){return(Me=Me||{}).raw=!0,Oe(me,Me)},je.gzip=function(me,Me){return(Me=Me||{}).gzip=!0,Oe(me,Me)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function($e,Bt,je){"use strict";var ge=$e("./zlib/inflate"),Se=$e("./utils/common"),ue=$e("./utils/strings"),xe=$e("./zlib/constants"),Re=$e("./zlib/messages"),Ge=$e("./zlib/zstream"),Ve=$e("./zlib/gzheader"),He=Object.prototype.toString;function he(le){if(!(this instanceof he))return new he(le);this.options=Se.assign({chunkSize:16384,windowBits:0,to:""},le||{});var Oe=this.options;Oe.raw&&0<=Oe.windowBits&&Oe.windowBits<16&&(Oe.windowBits=-Oe.windowBits,0===Oe.windowBits&&(Oe.windowBits=-15)),!(0<=Oe.windowBits&&Oe.windowBits<16)||le&&le.windowBits||(Oe.windowBits+=32),15<Oe.windowBits&&Oe.windowBits<48&&!(15&Oe.windowBits)&&(Oe.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ge,this.strm.avail_out=0;var me=ge.inflateInit2(this.strm,Oe.windowBits);if(me!==xe.Z_OK)throw new Error(Re[me]);this.header=new Ve,ge.inflateGetHeader(this.strm,this.header)}function ke(le,Oe){var me=new he(Oe);if(me.push(le,!0),me.err)throw me.msg||Re[me.err];return me.result}he.prototype.push=function(le,Oe){var me,Me,Qe,rt,Ye,Pt,Ot=this.strm,Qt=this.options.chunkSize,St=this.options.dictionary,Jt=!1;if(this.ended)return!1;Me=Oe===~~Oe?Oe:!0===Oe?xe.Z_FINISH:xe.Z_NO_FLUSH,Ot.input="string"==typeof le?ue.binstring2buf(le):"[object ArrayBuffer]"===He.call(le)?new Uint8Array(le):le,Ot.next_in=0,Ot.avail_in=Ot.input.length;do{if(0===Ot.avail_out&&(Ot.output=new Se.Buf8(Qt),Ot.next_out=0,Ot.avail_out=Qt),(me=ge.inflate(Ot,xe.Z_NO_FLUSH))===xe.Z_NEED_DICT&&St&&(Pt="string"==typeof St?ue.string2buf(St):"[object ArrayBuffer]"===He.call(St)?new Uint8Array(St):St,me=ge.inflateSetDictionary(this.strm,Pt)),me===xe.Z_BUF_ERROR&&!0===Jt&&(me=xe.Z_OK,Jt=!1),me!==xe.Z_STREAM_END&&me!==xe.Z_OK)return this.onEnd(me),!(this.ended=!0);Ot.next_out&&(0!==Ot.avail_out&&me!==xe.Z_STREAM_END&&(0!==Ot.avail_in||Me!==xe.Z_FINISH&&Me!==xe.Z_SYNC_FLUSH)||("string"===this.options.to?(Qe=ue.utf8border(Ot.output,Ot.next_out),rt=Ot.next_out-Qe,Ye=ue.buf2string(Ot.output,Qe),Ot.next_out=rt,Ot.avail_out=Qt-rt,rt&&Se.arraySet(Ot.output,Ot.output,Qe,rt,0),this.onData(Ye)):this.onData(Se.shrinkBuf(Ot.output,Ot.next_out)))),0===Ot.avail_in&&0===Ot.avail_out&&(Jt=!0)}while((0<Ot.avail_in||0===Ot.avail_out)&&me!==xe.Z_STREAM_END);return me===xe.Z_STREAM_END&&(Me=xe.Z_FINISH),Me===xe.Z_FINISH?(me=ge.inflateEnd(this.strm),this.onEnd(me),this.ended=!0,me===xe.Z_OK):Me!==xe.Z_SYNC_FLUSH||(this.onEnd(xe.Z_OK),!(Ot.avail_out=0))},he.prototype.onData=function(le){this.chunks.push(le)},he.prototype.onEnd=function(le){le===xe.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):Se.flattenChunks(this.chunks)),this.chunks=[],this.err=le,this.msg=this.strm.msg},je.Inflate=he,je.inflate=ke,je.inflateRaw=function(le,Oe){return(Oe=Oe||{}).raw=!0,ke(le,Oe)},je.ungzip=ke},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function($e,Bt,je){"use strict";var ge=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";je.assign=function(xe){for(var Re=Array.prototype.slice.call(arguments,1);Re.length;){var Ge=Re.shift();if(Ge){if("object"!=typeof Ge)throw new TypeError(Ge+"must be non-object");for(var Ve in Ge)Ge.hasOwnProperty(Ve)&&(xe[Ve]=Ge[Ve])}}return xe},je.shrinkBuf=function(xe,Re){return xe.length===Re?xe:xe.subarray?xe.subarray(0,Re):(xe.length=Re,xe)};var Se={arraySet:function(xe,Re,Ge,Ve,He){if(Re.subarray&&xe.subarray)xe.set(Re.subarray(Ge,Ge+Ve),He);else for(var he=0;he<Ve;he++)xe[He+he]=Re[Ge+he]},flattenChunks:function(xe){var Re,Ge,Ve,He,he,ke;for(Re=Ve=0,Ge=xe.length;Re<Ge;Re++)Ve+=xe[Re].length;for(ke=new Uint8Array(Ve),Re=He=0,Ge=xe.length;Re<Ge;Re++)ke.set(he=xe[Re],He),He+=he.length;return ke}},ue={arraySet:function(xe,Re,Ge,Ve,He){for(var he=0;he<Ve;he++)xe[He+he]=Re[Ge+he]},flattenChunks:function(xe){return[].concat.apply([],xe)}};je.setTyped=function(xe){xe?(je.Buf8=Uint8Array,je.Buf16=Uint16Array,je.Buf32=Int32Array,je.assign(je,Se)):(je.Buf8=Array,je.Buf16=Array,je.Buf32=Array,je.assign(je,ue))},je.setTyped(ge)},{}],42:[function($e,Bt,je){"use strict";var ge=$e("./common"),Se=!0,ue=!0;try{String.fromCharCode.apply(null,[0])}catch{Se=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ue=!1}for(var xe=new ge.Buf8(256),Re=0;Re<256;Re++)xe[Re]=252<=Re?6:248<=Re?5:240<=Re?4:224<=Re?3:192<=Re?2:1;function Ge(Ve,He){if(He<65537&&(Ve.subarray&&ue||!Ve.subarray&&Se))return String.fromCharCode.apply(null,ge.shrinkBuf(Ve,He));for(var he="",ke=0;ke<He;ke++)he+=String.fromCharCode(Ve[ke]);return he}xe[254]=xe[254]=1,je.string2buf=function(Ve){var He,he,ke,le,Oe,me=Ve.length,Me=0;for(le=0;le<me;le++)55296==(64512&(he=Ve.charCodeAt(le)))&&le+1<me&&56320==(64512&(ke=Ve.charCodeAt(le+1)))&&(he=65536+(he-55296<<10)+(ke-56320),le++),Me+=he<128?1:he<2048?2:he<65536?3:4;for(He=new ge.Buf8(Me),le=Oe=0;Oe<Me;le++)55296==(64512&(he=Ve.charCodeAt(le)))&&le+1<me&&56320==(64512&(ke=Ve.charCodeAt(le+1)))&&(he=65536+(he-55296<<10)+(ke-56320),le++),he<128?He[Oe++]=he:(he<2048?He[Oe++]=192|he>>>6:(he<65536?He[Oe++]=224|he>>>12:(He[Oe++]=240|he>>>18,He[Oe++]=128|he>>>12&63),He[Oe++]=128|he>>>6&63),He[Oe++]=128|63&he);return He},je.buf2binstring=function(Ve){return Ge(Ve,Ve.length)},je.binstring2buf=function(Ve){for(var He=new ge.Buf8(Ve.length),he=0,ke=He.length;he<ke;he++)He[he]=Ve.charCodeAt(he);return He},je.buf2string=function(Ve,He){var he,ke,le,Oe,me=He||Ve.length,Me=new Array(2*me);for(he=ke=0;he<me;)if((le=Ve[he++])<128)Me[ke++]=le;else if(4<(Oe=xe[le]))Me[ke++]=65533,he+=Oe-1;else{for(le&=2===Oe?31:3===Oe?15:7;1<Oe&&he<me;)le=le<<6|63&Ve[he++],Oe--;1<Oe?Me[ke++]=65533:le<65536?Me[ke++]=le:(Me[ke++]=55296|(le-=65536)>>10&1023,Me[ke++]=56320|1023&le)}return Ge(Me,ke)},je.utf8border=function(Ve,He){var he;for((He=He||Ve.length)>Ve.length&&(He=Ve.length),he=He-1;0<=he&&128==(192&Ve[he]);)he--;return he<0||0===he?He:he+xe[Ve[he]]>He?he:He}},{"./common":41}],43:[function($e,Bt,je){"use strict";Bt.exports=function(ge,Se,ue,xe){for(var Re=65535&ge|0,Ge=ge>>>16&65535|0,Ve=0;0!==ue;){for(ue-=Ve=2e3<ue?2e3:ue;Ge=Ge+(Re=Re+Se[xe++]|0)|0,--Ve;);Re%=65521,Ge%=65521}return Re|Ge<<16|0}},{}],44:[function($e,Bt,je){"use strict";Bt.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function($e,Bt,je){"use strict";var ge=function(){for(var Se,ue=[],xe=0;xe<256;xe++){Se=xe;for(var Re=0;Re<8;Re++)Se=1&Se?3988292384^Se>>>1:Se>>>1;ue[xe]=Se}return ue}();Bt.exports=function(Se,ue,xe,Re){var Ge=ge,Ve=Re+xe;Se^=-1;for(var He=Re;He<Ve;He++)Se=Se>>>8^Ge[255&(Se^ue[He])];return-1^Se}},{}],46:[function($e,Bt,je){"use strict";var ge,Se=$e("../utils/common"),ue=$e("./trees"),xe=$e("./adler32"),Re=$e("./crc32"),Ge=$e("./messages"),Jt=258,si=262;function pi(te,kt){return te.msg=Ge[kt],kt}function Yt(te){return(te<<1)-(4<te?9:0)}function ui(te){for(var kt=te.length;0<=--kt;)te[kt]=0}function Ke(te){var kt=te.state,vt=kt.pending;vt>te.avail_out&&(vt=te.avail_out),0!==vt&&(Se.arraySet(te.output,kt.pending_buf,kt.pending_out,vt,te.next_out),te.next_out+=vt,kt.pending_out+=vt,te.total_out+=vt,te.avail_out-=vt,kt.pending-=vt,0===kt.pending&&(kt.pending_out=0))}function ht(te,kt){ue._tr_flush_block(te,0<=te.block_start?te.block_start:-1,te.strstart-te.block_start,kt),te.block_start=te.strstart,Ke(te.strm)}function ti(te,kt){te.pending_buf[te.pending++]=kt}function xn(te,kt){te.pending_buf[te.pending++]=kt>>>8&255,te.pending_buf[te.pending++]=255&kt}function cn(te,kt){var vt,be,Ce=te.max_chain_length,Ze=te.strstart,Lt=te.prev_length,zt=te.nice_match,at=te.strstart>te.w_size-si?te.strstart-(te.w_size-si):0,en=te.window,wn=te.w_mask,nn=te.prev,qn=te.strstart+Jt,Zr=en[Ze+Lt-1],ar=en[Ze+Lt];te.prev_length>=te.good_match&&(Ce>>=2),zt>te.lookahead&&(zt=te.lookahead);do{if(en[(vt=kt)+Lt]===ar&&en[vt+Lt-1]===Zr&&en[vt]===en[Ze]&&en[++vt]===en[Ze+1]){Ze+=2,vt++;do{}while(en[++Ze]===en[++vt]&&en[++Ze]===en[++vt]&&en[++Ze]===en[++vt]&&en[++Ze]===en[++vt]&&en[++Ze]===en[++vt]&&en[++Ze]===en[++vt]&&en[++Ze]===en[++vt]&&en[++Ze]===en[++vt]&&Ze<qn);if(be=Jt-(qn-Ze),Ze=qn-Jt,Lt<be){if(te.match_start=kt,zt<=(Lt=be))break;Zr=en[Ze+Lt-1],ar=en[Ze+Lt]}}}while((kt=nn[kt&wn])>at&&0!=--Ce);return Lt<=te.lookahead?Lt:te.lookahead}function Tt(te){var kt,vt,be,Ce,Ze,Lt,zt,at,en,wn,nn=te.w_size;do{if(Ce=te.window_size-te.lookahead-te.strstart,te.strstart>=nn+(nn-si)){for(Se.arraySet(te.window,te.window,nn,nn,0),te.match_start-=nn,te.strstart-=nn,te.block_start-=nn,kt=vt=te.hash_size;be=te.head[--kt],te.head[kt]=nn<=be?be-nn:0,--vt;);for(kt=vt=nn;be=te.prev[--kt],te.prev[kt]=nn<=be?be-nn:0,--vt;);Ce+=nn}if(0===te.strm.avail_in)break;if(zt=te.window,at=te.strstart+te.lookahead,wn=void 0,(en=Ce)<(wn=(Lt=te.strm).avail_in)&&(wn=en),vt=0===wn?0:(Lt.avail_in-=wn,Se.arraySet(zt,Lt.input,Lt.next_in,wn,at),1===Lt.state.wrap?Lt.adler=xe(Lt.adler,zt,wn,at):2===Lt.state.wrap&&(Lt.adler=Re(Lt.adler,zt,wn,at)),Lt.next_in+=wn,Lt.total_in+=wn,wn),te.lookahead+=vt,te.lookahead+te.insert>=3)for(te.ins_h=te.window[Ze=te.strstart-te.insert],te.ins_h=(te.ins_h<<te.hash_shift^te.window[Ze+1])&te.hash_mask;te.insert&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[Ze+3-1])&te.hash_mask,te.prev[Ze&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=Ze,Ze++,te.insert--,!(te.lookahead+te.insert<3)););}while(te.lookahead<si&&0!==te.strm.avail_in)}function Ao(te,kt){for(var vt,be;;){if(te.lookahead<si){if(Tt(te),te.lookahead<si&&0===kt)return 1;if(0===te.lookahead)break}if(vt=0,te.lookahead>=3&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,vt=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),0!==vt&&te.strstart-vt<=te.w_size-si&&(te.match_length=cn(te,vt)),te.match_length>=3)if(be=ue._tr_tally(te,te.strstart-te.match_start,te.match_length-3),te.lookahead-=te.match_length,te.match_length<=te.max_lazy_match&&te.lookahead>=3){for(te.match_length--;te.strstart++,te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,vt=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart,0!=--te.match_length;);te.strstart++}else te.strstart+=te.match_length,te.match_length=0,te.ins_h=te.window[te.strstart],te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+1])&te.hash_mask;else be=ue._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++;if(be&&(ht(te,!1),0===te.strm.avail_out))return 1}return te.insert=te.strstart<2?te.strstart:2,4===kt?(ht(te,!0),0===te.strm.avail_out?3:4):te.last_lit&&(ht(te,!1),0===te.strm.avail_out)?1:2}function or(te,kt){for(var vt,be,Ce;;){if(te.lookahead<si){if(Tt(te),te.lookahead<si&&0===kt)return 1;if(0===te.lookahead)break}if(vt=0,te.lookahead>=3&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,vt=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),te.prev_length=te.match_length,te.prev_match=te.match_start,te.match_length=2,0!==vt&&te.prev_length<te.max_lazy_match&&te.strstart-vt<=te.w_size-si&&(te.match_length=cn(te,vt),te.match_length<=5&&(1===te.strategy||3===te.match_length&&4096<te.strstart-te.match_start)&&(te.match_length=2)),te.prev_length>=3&&te.match_length<=te.prev_length){for(Ce=te.strstart+te.lookahead-3,be=ue._tr_tally(te,te.strstart-1-te.prev_match,te.prev_length-3),te.lookahead-=te.prev_length-1,te.prev_length-=2;++te.strstart<=Ce&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+3-1])&te.hash_mask,vt=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),0!=--te.prev_length;);if(te.match_available=0,te.match_length=2,te.strstart++,be&&(ht(te,!1),0===te.strm.avail_out))return 1}else if(te.match_available){if((be=ue._tr_tally(te,0,te.window[te.strstart-1]))&&ht(te,!1),te.strstart++,te.lookahead--,0===te.strm.avail_out)return 1}else te.match_available=1,te.strstart++,te.lookahead--}return te.match_available&&(be=ue._tr_tally(te,0,te.window[te.strstart-1]),te.match_available=0),te.insert=te.strstart<2?te.strstart:2,4===kt?(ht(te,!0),0===te.strm.avail_out?3:4):te.last_lit&&(ht(te,!1),0===te.strm.avail_out)?1:2}function Yn(te,kt,vt,be,Ce){this.good_length=te,this.max_lazy=kt,this.nice_length=vt,this.max_chain=be,this.func=Ce}function Ti(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Se.Buf16(1146),this.dyn_dtree=new Se.Buf16(122),this.bl_tree=new Se.Buf16(78),ui(this.dyn_ltree),ui(this.dyn_dtree),ui(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Se.Buf16(16),this.heap=new Se.Buf16(573),ui(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Se.Buf16(573),ui(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ms(te){var kt;return te&&te.state?(te.total_in=te.total_out=0,te.data_type=2,(kt=te.state).pending=0,kt.pending_out=0,kt.wrap<0&&(kt.wrap=-kt.wrap),kt.status=kt.wrap?42:113,te.adler=2===kt.wrap?0:1,kt.last_flush=0,ue._tr_init(kt),0):pi(te,-2)}function Qn(te){var vt,kt=Ms(te);return 0===kt&&((vt=te.state).window_size=2*vt.w_size,ui(vt.head),vt.max_lazy_match=ge[vt.level].max_lazy,vt.good_match=ge[vt.level].good_length,vt.nice_match=ge[vt.level].nice_length,vt.max_chain_length=ge[vt.level].max_chain,vt.strstart=0,vt.block_start=0,vt.lookahead=0,vt.insert=0,vt.match_length=vt.prev_length=2,vt.match_available=0,vt.ins_h=0),kt}function Ka(te,kt,vt,be,Ce,Ze){if(!te)return-2;var Lt=1;if(-1===kt&&(kt=6),be<0?(Lt=0,be=-be):15<be&&(Lt=2,be-=16),Ce<1||9<Ce||8!==vt||be<8||15<be||kt<0||9<kt||Ze<0||4<Ze)return pi(te,-2);8===be&&(be=9);var zt=new Ti;return(te.state=zt).strm=te,zt.wrap=Lt,zt.gzhead=null,zt.w_bits=be,zt.w_size=1<<zt.w_bits,zt.w_mask=zt.w_size-1,zt.hash_bits=Ce+7,zt.hash_size=1<<zt.hash_bits,zt.hash_mask=zt.hash_size-1,zt.hash_shift=~~((zt.hash_bits+3-1)/3),zt.window=new Se.Buf8(2*zt.w_size),zt.head=new Se.Buf16(zt.hash_size),zt.prev=new Se.Buf16(zt.w_size),zt.lit_bufsize=1<<Ce+6,zt.pending_buf_size=4*zt.lit_bufsize,zt.pending_buf=new Se.Buf8(zt.pending_buf_size),zt.d_buf=1*zt.lit_bufsize,zt.l_buf=3*zt.lit_bufsize,zt.level=kt,zt.strategy=Ze,zt.method=vt,Qn(te)}ge=[new Yn(0,0,0,0,function(te,kt){var vt=65535;for(vt>te.pending_buf_size-5&&(vt=te.pending_buf_size-5);;){if(te.lookahead<=1){if(Tt(te),0===te.lookahead&&0===kt)return 1;if(0===te.lookahead)break}te.strstart+=te.lookahead,te.lookahead=0;var be=te.block_start+vt;if((0===te.strstart||te.strstart>=be)&&(te.lookahead=te.strstart-be,te.strstart=be,ht(te,!1),0===te.strm.avail_out)||te.strstart-te.block_start>=te.w_size-si&&(ht(te,!1),0===te.strm.avail_out))return 1}return te.insert=0,4===kt?(ht(te,!0),0===te.strm.avail_out?3:4):(te.strstart>te.block_start&&ht(te,!1),1)}),new Yn(4,4,8,4,Ao),new Yn(4,5,16,8,Ao),new Yn(4,6,32,32,Ao),new Yn(4,4,16,16,or),new Yn(8,16,32,32,or),new Yn(8,16,128,128,or),new Yn(8,32,128,256,or),new Yn(32,128,258,1024,or),new Yn(32,258,258,4096,or)],je.deflateInit=function(te,kt){return Ka(te,kt,8,15,8,0)},je.deflateInit2=Ka,je.deflateReset=Qn,je.deflateResetKeep=Ms,je.deflateSetHeader=function(te,kt){return te&&te.state?2!==te.state.wrap?-2:(te.state.gzhead=kt,0):-2},je.deflate=function(te,kt){var vt,be,Ce,Ze;if(!te||!te.state||5<kt||kt<0)return te?pi(te,-2):-2;if(be=te.state,!te.output||!te.input&&0!==te.avail_in||666===be.status&&4!==kt)return pi(te,0===te.avail_out?-5:-2);if(be.strm=te,vt=be.last_flush,be.last_flush=kt,42===be.status)if(2===be.wrap)te.adler=0,ti(be,31),ti(be,139),ti(be,8),be.gzhead?(ti(be,(be.gzhead.text?1:0)+(be.gzhead.hcrc?2:0)+(be.gzhead.extra?4:0)+(be.gzhead.name?8:0)+(be.gzhead.comment?16:0)),ti(be,255&be.gzhead.time),ti(be,be.gzhead.time>>8&255),ti(be,be.gzhead.time>>16&255),ti(be,be.gzhead.time>>24&255),ti(be,9===be.level?2:2<=be.strategy||be.level<2?4:0),ti(be,255&be.gzhead.os),be.gzhead.extra&&be.gzhead.extra.length&&(ti(be,255&be.gzhead.extra.length),ti(be,be.gzhead.extra.length>>8&255)),be.gzhead.hcrc&&(te.adler=Re(te.adler,be.pending_buf,be.pending,0)),be.gzindex=0,be.status=69):(ti(be,0),ti(be,0),ti(be,0),ti(be,0),ti(be,0),ti(be,9===be.level?2:2<=be.strategy||be.level<2?4:0),ti(be,3),be.status=113);else{var Lt=8+(be.w_bits-8<<4)<<8;Lt|=(2<=be.strategy||be.level<2?0:be.level<6?1:6===be.level?2:3)<<6,0!==be.strstart&&(Lt|=32),Lt+=31-Lt%31,be.status=113,xn(be,Lt),0!==be.strstart&&(xn(be,te.adler>>>16),xn(be,65535&te.adler)),te.adler=1}if(69===be.status)if(be.gzhead.extra){for(Ce=be.pending;be.gzindex<(65535&be.gzhead.extra.length)&&(be.pending!==be.pending_buf_size||(be.gzhead.hcrc&&be.pending>Ce&&(te.adler=Re(te.adler,be.pending_buf,be.pending-Ce,Ce)),Ke(te),Ce=be.pending,be.pending!==be.pending_buf_size));)ti(be,255&be.gzhead.extra[be.gzindex]),be.gzindex++;be.gzhead.hcrc&&be.pending>Ce&&(te.adler=Re(te.adler,be.pending_buf,be.pending-Ce,Ce)),be.gzindex===be.gzhead.extra.length&&(be.gzindex=0,be.status=73)}else be.status=73;if(73===be.status)if(be.gzhead.name){Ce=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>Ce&&(te.adler=Re(te.adler,be.pending_buf,be.pending-Ce,Ce)),Ke(te),Ce=be.pending,be.pending===be.pending_buf_size)){Ze=1;break}Ze=be.gzindex<be.gzhead.name.length?255&be.gzhead.name.charCodeAt(be.gzindex++):0,ti(be,Ze)}while(0!==Ze);be.gzhead.hcrc&&be.pending>Ce&&(te.adler=Re(te.adler,be.pending_buf,be.pending-Ce,Ce)),0===Ze&&(be.gzindex=0,be.status=91)}else be.status=91;if(91===be.status)if(be.gzhead.comment){Ce=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>Ce&&(te.adler=Re(te.adler,be.pending_buf,be.pending-Ce,Ce)),Ke(te),Ce=be.pending,be.pending===be.pending_buf_size)){Ze=1;break}Ze=be.gzindex<be.gzhead.comment.length?255&be.gzhead.comment.charCodeAt(be.gzindex++):0,ti(be,Ze)}while(0!==Ze);be.gzhead.hcrc&&be.pending>Ce&&(te.adler=Re(te.adler,be.pending_buf,be.pending-Ce,Ce)),0===Ze&&(be.status=103)}else be.status=103;if(103===be.status&&(be.gzhead.hcrc?(be.pending+2>be.pending_buf_size&&Ke(te),be.pending+2<=be.pending_buf_size&&(ti(be,255&te.adler),ti(be,te.adler>>8&255),te.adler=0,be.status=113)):be.status=113),0!==be.pending){if(Ke(te),0===te.avail_out)return be.last_flush=-1,0}else if(0===te.avail_in&&Yt(kt)<=Yt(vt)&&4!==kt)return pi(te,-5);if(666===be.status&&0!==te.avail_in)return pi(te,-5);if(0!==te.avail_in||0!==be.lookahead||0!==kt&&666!==be.status){var zt=2===be.strategy?function(at,en){for(var wn;;){if(0===at.lookahead&&(Tt(at),0===at.lookahead)){if(0===en)return 1;break}if(at.match_length=0,wn=ue._tr_tally(at,0,at.window[at.strstart]),at.lookahead--,at.strstart++,wn&&(ht(at,!1),0===at.strm.avail_out))return 1}return at.insert=0,4===en?(ht(at,!0),0===at.strm.avail_out?3:4):at.last_lit&&(ht(at,!1),0===at.strm.avail_out)?1:2}(be,kt):3===be.strategy?function(at,en){for(var wn,nn,qn,Zr,ar=at.window;;){if(at.lookahead<=Jt){if(Tt(at),at.lookahead<=Jt&&0===en)return 1;if(0===at.lookahead)break}if(at.match_length=0,at.lookahead>=3&&0<at.strstart&&(nn=ar[qn=at.strstart-1])===ar[++qn]&&nn===ar[++qn]&&nn===ar[++qn]){Zr=at.strstart+Jt;do{}while(nn===ar[++qn]&&nn===ar[++qn]&&nn===ar[++qn]&&nn===ar[++qn]&&nn===ar[++qn]&&nn===ar[++qn]&&nn===ar[++qn]&&nn===ar[++qn]&&qn<Zr);at.match_length=Jt-(Zr-qn),at.match_length>at.lookahead&&(at.match_length=at.lookahead)}if(at.match_length>=3?(wn=ue._tr_tally(at,1,at.match_length-3),at.lookahead-=at.match_length,at.strstart+=at.match_length,at.match_length=0):(wn=ue._tr_tally(at,0,at.window[at.strstart]),at.lookahead--,at.strstart++),wn&&(ht(at,!1),0===at.strm.avail_out))return 1}return at.insert=0,4===en?(ht(at,!0),0===at.strm.avail_out?3:4):at.last_lit&&(ht(at,!1),0===at.strm.avail_out)?1:2}(be,kt):ge[be.level].func(be,kt);if(3!==zt&&4!==zt||(be.status=666),1===zt||3===zt)return 0===te.avail_out&&(be.last_flush=-1),0;if(2===zt&&(1===kt?ue._tr_align(be):5!==kt&&(ue._tr_stored_block(be,0,0,!1),3===kt&&(ui(be.head),0===be.lookahead&&(be.strstart=0,be.block_start=0,be.insert=0))),Ke(te),0===te.avail_out))return be.last_flush=-1,0}return 4!==kt?0:be.wrap<=0?1:(2===be.wrap?(ti(be,255&te.adler),ti(be,te.adler>>8&255),ti(be,te.adler>>16&255),ti(be,te.adler>>24&255),ti(be,255&te.total_in),ti(be,te.total_in>>8&255),ti(be,te.total_in>>16&255),ti(be,te.total_in>>24&255)):(xn(be,te.adler>>>16),xn(be,65535&te.adler)),Ke(te),0<be.wrap&&(be.wrap=-be.wrap),0!==be.pending?0:1)},je.deflateEnd=function(te){var kt;return te&&te.state?42!==(kt=te.state.status)&&69!==kt&&73!==kt&&91!==kt&&103!==kt&&113!==kt&&666!==kt?pi(te,-2):(te.state=null,113===kt?pi(te,-3):0):-2},je.deflateSetDictionary=function(te,kt){var vt,be,Ce,Ze,Lt,zt,at,en,wn=kt.length;if(!te||!te.state||2===(Ze=(vt=te.state).wrap)||1===Ze&&42!==vt.status||vt.lookahead)return-2;for(1===Ze&&(te.adler=xe(te.adler,kt,wn,0)),vt.wrap=0,wn>=vt.w_size&&(0===Ze&&(ui(vt.head),vt.strstart=0,vt.block_start=0,vt.insert=0),en=new Se.Buf8(vt.w_size),Se.arraySet(en,kt,wn-vt.w_size,vt.w_size,0),kt=en,wn=vt.w_size),Lt=te.avail_in,zt=te.next_in,at=te.input,te.avail_in=wn,te.next_in=0,te.input=kt,Tt(vt);vt.lookahead>=3;){for(be=vt.strstart,Ce=vt.lookahead-2;vt.ins_h=(vt.ins_h<<vt.hash_shift^vt.window[be+3-1])&vt.hash_mask,vt.prev[be&vt.w_mask]=vt.head[vt.ins_h],vt.head[vt.ins_h]=be,be++,--Ce;);vt.strstart=be,vt.lookahead=2,Tt(vt)}return vt.strstart+=vt.lookahead,vt.block_start=vt.strstart,vt.insert=vt.lookahead,vt.lookahead=0,vt.match_length=vt.prev_length=2,vt.match_available=0,te.next_in=zt,te.input=at,te.avail_in=Lt,vt.wrap=Ze,0},je.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function($e,Bt,je){"use strict";Bt.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function($e,Bt,je){"use strict";Bt.exports=function(ge,Se){var ue,xe,Re,Ge,Ve,He,he,ke,le,Oe,me,Me,Qe,rt,Ye,Pt,Ot,Qt,St,Jt,si,Ne,wt,oe,At;oe=ge.input,Re=(xe=ge.next_in)+(ge.avail_in-5),At=ge.output,Ve=(Ge=ge.next_out)-(Se-ge.avail_out),He=Ge+(ge.avail_out-257),he=(ue=ge.state).dmax,ke=ue.wsize,le=ue.whave,Oe=ue.wnext,me=ue.window,Me=ue.hold,Qe=ue.bits,rt=ue.lencode,Ye=ue.distcode,Pt=(1<<ue.lenbits)-1,Ot=(1<<ue.distbits)-1;e:do{Qe<15&&(Me+=oe[xe++]<<Qe,Me+=oe[xe++]<<(Qe+=8),Qe+=8),Qt=rt[Me&Pt];t:for(;;){if(Me>>>=St=Qt>>>24,Qe-=St,0==(St=Qt>>>16&255))At[Ge++]=65535&Qt;else{if(!(16&St)){if(!(64&St)){Qt=rt[(65535&Qt)+(Me&(1<<St)-1)];continue t}if(32&St){ue.mode=12;break e}ge.msg="invalid literal/length code",ue.mode=30;break e}Jt=65535&Qt,(St&=15)&&(Qe<St&&(Me+=oe[xe++]<<Qe,Qe+=8),Jt+=Me&(1<<St)-1,Me>>>=St,Qe-=St),Qe<15&&(Me+=oe[xe++]<<Qe,Me+=oe[xe++]<<(Qe+=8),Qe+=8),Qt=Ye[Me&Ot];n:for(;;){if(Me>>>=St=Qt>>>24,Qe-=St,!(16&(St=Qt>>>16&255))){if(!(64&St)){Qt=Ye[(65535&Qt)+(Me&(1<<St)-1)];continue n}ge.msg="invalid distance code",ue.mode=30;break e}if(si=65535&Qt,Qe<(St&=15)&&(Me+=oe[xe++]<<Qe,(Qe+=8)<St&&(Me+=oe[xe++]<<Qe,Qe+=8)),he<(si+=Me&(1<<St)-1)){ge.msg="invalid distance too far back",ue.mode=30;break e}if(Me>>>=St,Qe-=St,(St=Ge-Ve)<si){if(le<(St=si-St)&&ue.sane){ge.msg="invalid distance too far back",ue.mode=30;break e}if(wt=me,(Ne=0)===Oe){if(Ne+=ke-St,St<Jt){for(Jt-=St;At[Ge++]=me[Ne++],--St;);Ne=Ge-si,wt=At}}else if(Oe<St){if(Ne+=ke+Oe-St,(St-=Oe)<Jt){for(Jt-=St;At[Ge++]=me[Ne++],--St;);if(Ne=0,Oe<Jt){for(Jt-=St=Oe;At[Ge++]=me[Ne++],--St;);Ne=Ge-si,wt=At}}}else if(Ne+=Oe-St,St<Jt){for(Jt-=St;At[Ge++]=me[Ne++],--St;);Ne=Ge-si,wt=At}for(;2<Jt;)At[Ge++]=wt[Ne++],At[Ge++]=wt[Ne++],At[Ge++]=wt[Ne++],Jt-=3;Jt&&(At[Ge++]=wt[Ne++],1<Jt&&(At[Ge++]=wt[Ne++]))}else{for(Ne=Ge-si;At[Ge++]=At[Ne++],At[Ge++]=At[Ne++],At[Ge++]=At[Ne++],2<(Jt-=3););Jt&&(At[Ge++]=At[Ne++],1<Jt&&(At[Ge++]=At[Ne++]))}break}}break}}while(xe<Re&&Ge<He);xe-=Jt=Qe>>3,Me&=(1<<(Qe-=Jt<<3))-1,ge.next_in=xe,ge.next_out=Ge,ge.avail_in=xe<Re?Re-xe+5:5-(xe-Re),ge.avail_out=Ge<He?He-Ge+257:257-(Ge-He),ue.hold=Me,ue.bits=Qe}},{}],49:[function($e,Bt,je){"use strict";var ge=$e("../utils/common"),Se=$e("./adler32"),ue=$e("./crc32"),xe=$e("./inffast"),Re=$e("./inftrees");function me(Ne){return(Ne>>>24&255)+(Ne>>>8&65280)+((65280&Ne)<<8)+((255&Ne)<<24)}function Me(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ge.Buf16(320),this.work=new ge.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Qe(Ne){var wt;return Ne&&Ne.state?(Ne.total_in=Ne.total_out=(wt=Ne.state).total=0,Ne.msg="",wt.wrap&&(Ne.adler=1&wt.wrap),wt.mode=1,wt.last=0,wt.havedict=0,wt.dmax=32768,wt.head=null,wt.hold=0,wt.bits=0,wt.lencode=wt.lendyn=new ge.Buf32(852),wt.distcode=wt.distdyn=new ge.Buf32(592),wt.sane=1,wt.back=-1,0):-2}function rt(Ne){var wt;return Ne&&Ne.state?((wt=Ne.state).wsize=0,wt.whave=0,wt.wnext=0,Qe(Ne)):-2}function Ye(Ne,wt){var oe,At;return Ne&&Ne.state?(At=Ne.state,wt<0?(oe=0,wt=-wt):(oe=1+(wt>>4),wt<48&&(wt&=15)),wt&&(wt<8||15<wt)?-2:(null!==At.window&&At.wbits!==wt&&(At.window=null),At.wrap=oe,At.wbits=wt,rt(Ne))):-2}function Pt(Ne,wt){var oe,At;return Ne?(At=new Me,(Ne.state=At).window=null,0!==(oe=Ye(Ne,wt))&&(Ne.state=null),oe):-2}var Ot,Qt,St=!0;function Jt(Ne){if(St){var wt;for(Ot=new ge.Buf32(512),Qt=new ge.Buf32(32),wt=0;wt<144;)Ne.lens[wt++]=8;for(;wt<256;)Ne.lens[wt++]=9;for(;wt<280;)Ne.lens[wt++]=7;for(;wt<288;)Ne.lens[wt++]=8;for(Re(1,Ne.lens,0,288,Ot,0,Ne.work,{bits:9}),wt=0;wt<32;)Ne.lens[wt++]=5;Re(2,Ne.lens,0,32,Qt,0,Ne.work,{bits:5}),St=!1}Ne.lencode=Ot,Ne.lenbits=9,Ne.distcode=Qt,Ne.distbits=5}function si(Ne,wt,oe,At){var xi,Wt=Ne.state;return null===Wt.window&&(Wt.wsize=1<<Wt.wbits,Wt.wnext=0,Wt.whave=0,Wt.window=new ge.Buf8(Wt.wsize)),At>=Wt.wsize?(ge.arraySet(Wt.window,wt,oe-Wt.wsize,Wt.wsize,0),Wt.wnext=0,Wt.whave=Wt.wsize):(At<(xi=Wt.wsize-Wt.wnext)&&(xi=At),ge.arraySet(Wt.window,wt,oe-At,xi,Wt.wnext),(At-=xi)?(ge.arraySet(Wt.window,wt,oe-At,At,0),Wt.wnext=At,Wt.whave=Wt.wsize):(Wt.wnext+=xi,Wt.wnext===Wt.wsize&&(Wt.wnext=0),Wt.whave<Wt.wsize&&(Wt.whave+=xi))),0}je.inflateReset=rt,je.inflateReset2=Ye,je.inflateResetKeep=Qe,je.inflateInit=function(Ne){return Pt(Ne,15)},je.inflateInit2=Pt,je.inflate=function(Ne,wt){var oe,At,xi,Wt,pi,Yt,ui,Ke,ht,ti,xn,cn,Tt,Ao,or,Yn,Ti,Ms,Qn,Ka,te,kt,vt,be,Ce=0,Ze=new ge.Buf8(4),Lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Ne||!Ne.state||!Ne.output||!Ne.input&&0!==Ne.avail_in)return-2;12===(oe=Ne.state).mode&&(oe.mode=13),pi=Ne.next_out,xi=Ne.output,Wt=Ne.next_in,At=Ne.input,Ke=oe.hold,ht=oe.bits,ti=Yt=Ne.avail_in,xn=ui=Ne.avail_out,kt=0;e:for(;;)switch(oe.mode){case 1:if(0===oe.wrap){oe.mode=13;break}for(;ht<16;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(2&oe.wrap&&35615===Ke){Ze[oe.check=0]=255&Ke,Ze[1]=Ke>>>8&255,oe.check=ue(oe.check,Ze,2,0),ht=Ke=0,oe.mode=2;break}if(oe.flags=0,oe.head&&(oe.head.done=!1),!(1&oe.wrap)||(((255&Ke)<<8)+(Ke>>8))%31){Ne.msg="incorrect header check",oe.mode=30;break}if(8!=(15&Ke)){Ne.msg="unknown compression method",oe.mode=30;break}if(ht-=4,te=8+(15&(Ke>>>=4)),0===oe.wbits)oe.wbits=te;else if(te>oe.wbits){Ne.msg="invalid window size",oe.mode=30;break}oe.dmax=1<<te,Ne.adler=oe.check=1,oe.mode=512&Ke?10:12,ht=Ke=0;break;case 2:for(;ht<16;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(oe.flags=Ke,8!=(255&oe.flags)){Ne.msg="unknown compression method",oe.mode=30;break}if(57344&oe.flags){Ne.msg="unknown header flags set",oe.mode=30;break}oe.head&&(oe.head.text=Ke>>8&1),512&oe.flags&&(Ze[0]=255&Ke,Ze[1]=Ke>>>8&255,oe.check=ue(oe.check,Ze,2,0)),ht=Ke=0,oe.mode=3;case 3:for(;ht<32;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}oe.head&&(oe.head.time=Ke),512&oe.flags&&(Ze[0]=255&Ke,Ze[1]=Ke>>>8&255,Ze[2]=Ke>>>16&255,Ze[3]=Ke>>>24&255,oe.check=ue(oe.check,Ze,4,0)),ht=Ke=0,oe.mode=4;case 4:for(;ht<16;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}oe.head&&(oe.head.xflags=255&Ke,oe.head.os=Ke>>8),512&oe.flags&&(Ze[0]=255&Ke,Ze[1]=Ke>>>8&255,oe.check=ue(oe.check,Ze,2,0)),ht=Ke=0,oe.mode=5;case 5:if(1024&oe.flags){for(;ht<16;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}oe.length=Ke,oe.head&&(oe.head.extra_len=Ke),512&oe.flags&&(Ze[0]=255&Ke,Ze[1]=Ke>>>8&255,oe.check=ue(oe.check,Ze,2,0)),ht=Ke=0}else oe.head&&(oe.head.extra=null);oe.mode=6;case 6:if(1024&oe.flags&&(Yt<(cn=oe.length)&&(cn=Yt),cn&&(oe.head&&(te=oe.head.extra_len-oe.length,oe.head.extra||(oe.head.extra=new Array(oe.head.extra_len)),ge.arraySet(oe.head.extra,At,Wt,cn,te)),512&oe.flags&&(oe.check=ue(oe.check,At,cn,Wt)),Yt-=cn,Wt+=cn,oe.length-=cn),oe.length))break e;oe.length=0,oe.mode=7;case 7:if(2048&oe.flags){if(0===Yt)break e;for(cn=0;te=At[Wt+cn++],oe.head&&te&&oe.length<65536&&(oe.head.name+=String.fromCharCode(te)),te&&cn<Yt;);if(512&oe.flags&&(oe.check=ue(oe.check,At,cn,Wt)),Yt-=cn,Wt+=cn,te)break e}else oe.head&&(oe.head.name=null);oe.length=0,oe.mode=8;case 8:if(4096&oe.flags){if(0===Yt)break e;for(cn=0;te=At[Wt+cn++],oe.head&&te&&oe.length<65536&&(oe.head.comment+=String.fromCharCode(te)),te&&cn<Yt;);if(512&oe.flags&&(oe.check=ue(oe.check,At,cn,Wt)),Yt-=cn,Wt+=cn,te)break e}else oe.head&&(oe.head.comment=null);oe.mode=9;case 9:if(512&oe.flags){for(;ht<16;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(Ke!==(65535&oe.check)){Ne.msg="header crc mismatch",oe.mode=30;break}ht=Ke=0}oe.head&&(oe.head.hcrc=oe.flags>>9&1,oe.head.done=!0),Ne.adler=oe.check=0,oe.mode=12;break;case 10:for(;ht<32;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}Ne.adler=oe.check=me(Ke),ht=Ke=0,oe.mode=11;case 11:if(0===oe.havedict)return Ne.next_out=pi,Ne.avail_out=ui,Ne.next_in=Wt,Ne.avail_in=Yt,oe.hold=Ke,oe.bits=ht,2;Ne.adler=oe.check=1,oe.mode=12;case 12:if(5===wt||6===wt)break e;case 13:if(oe.last){Ke>>>=7&ht,ht-=7&ht,oe.mode=27;break}for(;ht<3;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}switch(oe.last=1&Ke,ht-=1,3&(Ke>>>=1)){case 0:oe.mode=14;break;case 1:if(Jt(oe),oe.mode=20,6!==wt)break;Ke>>>=2,ht-=2;break e;case 2:oe.mode=17;break;case 3:Ne.msg="invalid block type",oe.mode=30}Ke>>>=2,ht-=2;break;case 14:for(Ke>>>=7&ht,ht-=7&ht;ht<32;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if((65535&Ke)!=(Ke>>>16^65535)){Ne.msg="invalid stored block lengths",oe.mode=30;break}if(oe.length=65535&Ke,ht=Ke=0,oe.mode=15,6===wt)break e;case 15:oe.mode=16;case 16:if(cn=oe.length){if(Yt<cn&&(cn=Yt),ui<cn&&(cn=ui),0===cn)break e;ge.arraySet(xi,At,Wt,cn,pi),Yt-=cn,Wt+=cn,ui-=cn,pi+=cn,oe.length-=cn;break}oe.mode=12;break;case 17:for(;ht<14;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(oe.nlen=257+(31&Ke),ht-=5,oe.ndist=1+(31&(Ke>>>=5)),ht-=5,oe.ncode=4+(15&(Ke>>>=5)),Ke>>>=4,ht-=4,286<oe.nlen||30<oe.ndist){Ne.msg="too many length or distance symbols",oe.mode=30;break}oe.have=0,oe.mode=18;case 18:for(;oe.have<oe.ncode;){for(;ht<3;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}oe.lens[Lt[oe.have++]]=7&Ke,Ke>>>=3,ht-=3}for(;oe.have<19;)oe.lens[Lt[oe.have++]]=0;if(oe.lencode=oe.lendyn,oe.lenbits=7,kt=Re(0,oe.lens,0,19,oe.lencode,0,oe.work,vt={bits:oe.lenbits}),oe.lenbits=vt.bits,kt){Ne.msg="invalid code lengths set",oe.mode=30;break}oe.have=0,oe.mode=19;case 19:for(;oe.have<oe.nlen+oe.ndist;){for(;Yn=(Ce=oe.lencode[Ke&(1<<oe.lenbits)-1])>>>16&255,Ti=65535&Ce,!((or=Ce>>>24)<=ht);){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(Ti<16)Ke>>>=or,ht-=or,oe.lens[oe.have++]=Ti;else{if(16===Ti){for(be=or+2;ht<be;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(Ke>>>=or,ht-=or,0===oe.have){Ne.msg="invalid bit length repeat",oe.mode=30;break}te=oe.lens[oe.have-1],cn=3+(3&Ke),Ke>>>=2,ht-=2}else if(17===Ti){for(be=or+3;ht<be;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}ht-=or,te=0,cn=3+(7&(Ke>>>=or)),Ke>>>=3,ht-=3}else{for(be=or+7;ht<be;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}ht-=or,te=0,cn=11+(127&(Ke>>>=or)),Ke>>>=7,ht-=7}if(oe.have+cn>oe.nlen+oe.ndist){Ne.msg="invalid bit length repeat",oe.mode=30;break}for(;cn--;)oe.lens[oe.have++]=te}}if(30===oe.mode)break;if(0===oe.lens[256]){Ne.msg="invalid code -- missing end-of-block",oe.mode=30;break}if(oe.lenbits=9,kt=Re(1,oe.lens,0,oe.nlen,oe.lencode,0,oe.work,vt={bits:oe.lenbits}),oe.lenbits=vt.bits,kt){Ne.msg="invalid literal/lengths set",oe.mode=30;break}if(oe.distbits=6,oe.distcode=oe.distdyn,kt=Re(2,oe.lens,oe.nlen,oe.ndist,oe.distcode,0,oe.work,vt={bits:oe.distbits}),oe.distbits=vt.bits,kt){Ne.msg="invalid distances set",oe.mode=30;break}if(oe.mode=20,6===wt)break e;case 20:oe.mode=21;case 21:if(6<=Yt&&258<=ui){Ne.next_out=pi,Ne.avail_out=ui,Ne.next_in=Wt,Ne.avail_in=Yt,oe.hold=Ke,oe.bits=ht,xe(Ne,xn),pi=Ne.next_out,xi=Ne.output,ui=Ne.avail_out,Wt=Ne.next_in,At=Ne.input,Yt=Ne.avail_in,Ke=oe.hold,ht=oe.bits,12===oe.mode&&(oe.back=-1);break}for(oe.back=0;Yn=(Ce=oe.lencode[Ke&(1<<oe.lenbits)-1])>>>16&255,Ti=65535&Ce,!((or=Ce>>>24)<=ht);){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(Yn&&!(240&Yn)){for(Ms=or,Qn=Yn,Ka=Ti;Yn=(Ce=oe.lencode[Ka+((Ke&(1<<Ms+Qn)-1)>>Ms)])>>>16&255,Ti=65535&Ce,!(Ms+(or=Ce>>>24)<=ht);){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}Ke>>>=Ms,ht-=Ms,oe.back+=Ms}if(Ke>>>=or,ht-=or,oe.back+=or,oe.length=Ti,0===Yn){oe.mode=26;break}if(32&Yn){oe.back=-1,oe.mode=12;break}if(64&Yn){Ne.msg="invalid literal/length code",oe.mode=30;break}oe.extra=15&Yn,oe.mode=22;case 22:if(oe.extra){for(be=oe.extra;ht<be;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}oe.length+=Ke&(1<<oe.extra)-1,Ke>>>=oe.extra,ht-=oe.extra,oe.back+=oe.extra}oe.was=oe.length,oe.mode=23;case 23:for(;Yn=(Ce=oe.distcode[Ke&(1<<oe.distbits)-1])>>>16&255,Ti=65535&Ce,!((or=Ce>>>24)<=ht);){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(!(240&Yn)){for(Ms=or,Qn=Yn,Ka=Ti;Yn=(Ce=oe.distcode[Ka+((Ke&(1<<Ms+Qn)-1)>>Ms)])>>>16&255,Ti=65535&Ce,!(Ms+(or=Ce>>>24)<=ht);){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}Ke>>>=Ms,ht-=Ms,oe.back+=Ms}if(Ke>>>=or,ht-=or,oe.back+=or,64&Yn){Ne.msg="invalid distance code",oe.mode=30;break}oe.offset=Ti,oe.extra=15&Yn,oe.mode=24;case 24:if(oe.extra){for(be=oe.extra;ht<be;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}oe.offset+=Ke&(1<<oe.extra)-1,Ke>>>=oe.extra,ht-=oe.extra,oe.back+=oe.extra}if(oe.offset>oe.dmax){Ne.msg="invalid distance too far back",oe.mode=30;break}oe.mode=25;case 25:if(0===ui)break e;if(oe.offset>(cn=xn-ui)){if((cn=oe.offset-cn)>oe.whave&&oe.sane){Ne.msg="invalid distance too far back",oe.mode=30;break}Tt=cn>oe.wnext?oe.wsize-(cn-=oe.wnext):oe.wnext-cn,cn>oe.length&&(cn=oe.length),Ao=oe.window}else Ao=xi,Tt=pi-oe.offset,cn=oe.length;for(ui<cn&&(cn=ui),ui-=cn,oe.length-=cn;xi[pi++]=Ao[Tt++],--cn;);0===oe.length&&(oe.mode=21);break;case 26:if(0===ui)break e;xi[pi++]=oe.length,ui--,oe.mode=21;break;case 27:if(oe.wrap){for(;ht<32;){if(0===Yt)break e;Yt--,Ke|=At[Wt++]<<ht,ht+=8}if(Ne.total_out+=xn-=ui,oe.total+=xn,xn&&(Ne.adler=oe.check=oe.flags?ue(oe.check,xi,xn,pi-xn):Se(oe.check,xi,xn,pi-xn)),xn=ui,(oe.flags?Ke:me(Ke))!==oe.check){Ne.msg="incorrect data check",oe.mode=30;break}ht=Ke=0}oe.mode=28;case 28:if(oe.wrap&&oe.flags){for(;ht<32;){if(0===Yt)break e;Yt--,Ke+=At[Wt++]<<ht,ht+=8}if(Ke!==(4294967295&oe.total)){Ne.msg="incorrect length check",oe.mode=30;break}ht=Ke=0}oe.mode=29;case 29:kt=1;break e;case 30:kt=-3;break e;case 31:return-4;default:return-2}return Ne.next_out=pi,Ne.avail_out=ui,Ne.next_in=Wt,Ne.avail_in=Yt,oe.hold=Ke,oe.bits=ht,(oe.wsize||xn!==Ne.avail_out&&oe.mode<30&&(oe.mode<27||4!==wt))&&si(Ne,Ne.output,Ne.next_out,xn-Ne.avail_out)?(oe.mode=31,-4):(xn-=Ne.avail_out,Ne.total_in+=ti-=Ne.avail_in,Ne.total_out+=xn,oe.total+=xn,oe.wrap&&xn&&(Ne.adler=oe.check=oe.flags?ue(oe.check,xi,xn,Ne.next_out-xn):Se(oe.check,xi,xn,Ne.next_out-xn)),Ne.data_type=oe.bits+(oe.last?64:0)+(12===oe.mode?128:0)+(20===oe.mode||15===oe.mode?256:0),(0==ti&&0===xn||4===wt)&&0===kt&&(kt=-5),kt)},je.inflateEnd=function(Ne){if(!Ne||!Ne.state)return-2;var wt=Ne.state;return wt.window&&(wt.window=null),Ne.state=null,0},je.inflateGetHeader=function(Ne,wt){var oe;return Ne&&Ne.state&&2&(oe=Ne.state).wrap?((oe.head=wt).done=!1,0):-2},je.inflateSetDictionary=function(Ne,wt){var oe,At=wt.length;return Ne&&Ne.state?0!==(oe=Ne.state).wrap&&11!==oe.mode?-2:11===oe.mode&&Se(1,wt,At,0)!==oe.check?-3:si(Ne,wt,At,At)?(oe.mode=31,-4):(oe.havedict=1,0):-2},je.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function($e,Bt,je){"use strict";var ge=$e("../utils/common"),Se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ue=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],xe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Re=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Bt.exports=function(Ge,Ve,He,he,ke,le,Oe,me){var Me,Qe,rt,Ye,Pt,Ot,Qt,St,Jt,si=me.bits,Ne=0,wt=0,oe=0,At=0,xi=0,Wt=0,pi=0,Yt=0,ui=0,Ke=0,ht=null,ti=0,xn=new ge.Buf16(16),cn=new ge.Buf16(16),Tt=null,Ao=0;for(Ne=0;Ne<=15;Ne++)xn[Ne]=0;for(wt=0;wt<he;wt++)xn[Ve[He+wt]]++;for(xi=si,At=15;1<=At&&0===xn[At];At--);if(At<xi&&(xi=At),0===At)return ke[le++]=20971520,ke[le++]=20971520,me.bits=1,0;for(oe=1;oe<At&&0===xn[oe];oe++);for(xi<oe&&(xi=oe),Ne=Yt=1;Ne<=15;Ne++)if(Yt<<=1,(Yt-=xn[Ne])<0)return-1;if(0<Yt&&(0===Ge||1!==At))return-1;for(cn[1]=0,Ne=1;Ne<15;Ne++)cn[Ne+1]=cn[Ne]+xn[Ne];for(wt=0;wt<he;wt++)0!==Ve[He+wt]&&(Oe[cn[Ve[He+wt]]++]=wt);if(Ot=0===Ge?(ht=Tt=Oe,19):1===Ge?(ht=Se,ti-=257,Tt=ue,Ao-=257,256):(ht=xe,Tt=Re,-1),Ne=oe,Pt=le,pi=wt=Ke=0,rt=-1,Ye=(ui=1<<(Wt=xi))-1,1===Ge&&852<ui||2===Ge&&592<ui)return 1;for(;;){for(Qt=Ne-pi,Jt=Oe[wt]<Ot?(St=0,Oe[wt]):Oe[wt]>Ot?(St=Tt[Ao+Oe[wt]],ht[ti+Oe[wt]]):(St=96,0),Me=1<<Ne-pi,oe=Qe=1<<Wt;ke[Pt+(Ke>>pi)+(Qe-=Me)]=Qt<<24|St<<16|Jt|0,0!==Qe;);for(Me=1<<Ne-1;Ke&Me;)Me>>=1;if(0!==Me?(Ke&=Me-1,Ke+=Me):Ke=0,wt++,0==--xn[Ne]){if(Ne===At)break;Ne=Ve[He+Oe[wt]]}if(xi<Ne&&(Ke&Ye)!==rt){for(0===pi&&(pi=xi),Pt+=oe,Yt=1<<(Wt=Ne-pi);Wt+pi<At&&!((Yt-=xn[Wt+pi])<=0);)Wt++,Yt<<=1;if(ui+=1<<Wt,1===Ge&&852<ui||2===Ge&&592<ui)return 1;ke[rt=Ke&Ye]=xi<<24|Wt<<16|Pt-le|0}}return 0!==Ke&&(ke[Pt+Ke]=Ne-pi<<24|64<<16|0),me.bits=xi,0}},{"../utils/common":41}],51:[function($e,Bt,je){"use strict";Bt.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function($e,Bt,je){"use strict";var ge=$e("../utils/common");function xe(Ce){for(var Ze=Ce.length;0<=--Ze;)Ce[Ze]=0}var Ot=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Qt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],St=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Jt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],si=new Array(576);xe(si);var Ne=new Array(60);xe(Ne);var wt=new Array(512);xe(wt);var oe=new Array(256);xe(oe);var At=new Array(29);xe(At);var xi,Wt,pi,Yt=new Array(30);function ui(Ce,Ze,Lt,zt,at){this.static_tree=Ce,this.extra_bits=Ze,this.extra_base=Lt,this.elems=zt,this.max_length=at,this.has_stree=Ce&&Ce.length}function Ke(Ce,Ze){this.dyn_tree=Ce,this.max_code=0,this.stat_desc=Ze}function ht(Ce){return Ce<256?wt[Ce]:wt[256+(Ce>>>7)]}function ti(Ce,Ze){Ce.pending_buf[Ce.pending++]=255&Ze,Ce.pending_buf[Ce.pending++]=Ze>>>8&255}function xn(Ce,Ze,Lt){Ce.bi_valid>16-Lt?(Ce.bi_buf|=Ze<<Ce.bi_valid&65535,ti(Ce,Ce.bi_buf),Ce.bi_buf=Ze>>16-Ce.bi_valid,Ce.bi_valid+=Lt-16):(Ce.bi_buf|=Ze<<Ce.bi_valid&65535,Ce.bi_valid+=Lt)}function cn(Ce,Ze,Lt){xn(Ce,Lt[2*Ze],Lt[2*Ze+1])}function Tt(Ce,Ze){for(var Lt=0;Lt|=1&Ce,Ce>>>=1,Lt<<=1,0<--Ze;);return Lt>>>1}function Ao(Ce,Ze,Lt){var zt,at,en=new Array(16),wn=0;for(zt=1;zt<=15;zt++)en[zt]=wn=wn+Lt[zt-1]<<1;for(at=0;at<=Ze;at++){var nn=Ce[2*at+1];0!==nn&&(Ce[2*at]=Tt(en[nn]++,nn))}}function or(Ce){var Ze;for(Ze=0;Ze<286;Ze++)Ce.dyn_ltree[2*Ze]=0;for(Ze=0;Ze<30;Ze++)Ce.dyn_dtree[2*Ze]=0;for(Ze=0;Ze<19;Ze++)Ce.bl_tree[2*Ze]=0;Ce.dyn_ltree[512]=1,Ce.opt_len=Ce.static_len=0,Ce.last_lit=Ce.matches=0}function Yn(Ce){8<Ce.bi_valid?ti(Ce,Ce.bi_buf):0<Ce.bi_valid&&(Ce.pending_buf[Ce.pending++]=Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0}function Ti(Ce,Ze,Lt,zt){var at=2*Ze,en=2*Lt;return Ce[at]<Ce[en]||Ce[at]===Ce[en]&&zt[Ze]<=zt[Lt]}function Ms(Ce,Ze,Lt){for(var zt=Ce.heap[Lt],at=Lt<<1;at<=Ce.heap_len&&(at<Ce.heap_len&&Ti(Ze,Ce.heap[at+1],Ce.heap[at],Ce.depth)&&at++,!Ti(Ze,zt,Ce.heap[at],Ce.depth));)Ce.heap[Lt]=Ce.heap[at],Lt=at,at<<=1;Ce.heap[Lt]=zt}function Qn(Ce,Ze,Lt){var zt,at,en,wn,nn=0;if(0!==Ce.last_lit)for(;zt=Ce.pending_buf[Ce.d_buf+2*nn]<<8|Ce.pending_buf[Ce.d_buf+2*nn+1],at=Ce.pending_buf[Ce.l_buf+nn],nn++,0===zt?cn(Ce,at,Ze):(cn(Ce,(en=oe[at])+256+1,Ze),0!==(wn=Ot[en])&&xn(Ce,at-=At[en],wn),cn(Ce,en=ht(--zt),Lt),0!==(wn=Qt[en])&&xn(Ce,zt-=Yt[en],wn)),nn<Ce.last_lit;);cn(Ce,256,Ze)}function Ka(Ce,Ze){var Lt,zt,at,en=Ze.dyn_tree,wn=Ze.stat_desc.static_tree,nn=Ze.stat_desc.has_stree,qn=Ze.stat_desc.elems,Zr=-1;for(Ce.heap_len=0,Ce.heap_max=573,Lt=0;Lt<qn;Lt++)0!==en[2*Lt]?(Ce.heap[++Ce.heap_len]=Zr=Lt,Ce.depth[Lt]=0):en[2*Lt+1]=0;for(;Ce.heap_len<2;)en[2*(at=Ce.heap[++Ce.heap_len]=Zr<2?++Zr:0)]=1,Ce.depth[at]=0,Ce.opt_len--,nn&&(Ce.static_len-=wn[2*at+1]);for(Ze.max_code=Zr,Lt=Ce.heap_len>>1;1<=Lt;Lt--)Ms(Ce,en,Lt);for(at=qn;Lt=Ce.heap[1],Ce.heap[1]=Ce.heap[Ce.heap_len--],Ms(Ce,en,1),zt=Ce.heap[1],Ce.heap[--Ce.heap_max]=Lt,Ce.heap[--Ce.heap_max]=zt,en[2*at]=en[2*Lt]+en[2*zt],Ce.depth[at]=(Ce.depth[Lt]>=Ce.depth[zt]?Ce.depth[Lt]:Ce.depth[zt])+1,en[2*Lt+1]=en[2*zt+1]=at,Ce.heap[1]=at++,Ms(Ce,en,1),2<=Ce.heap_len;);Ce.heap[--Ce.heap_max]=Ce.heap[1],function(ar,zl){var Lv,zu,Nv,Br,Bv,U2,Hu=zl.dyn_tree,ZP=zl.max_code,qP=zl.stat_desc.static_tree,yQ=zl.stat_desc.has_stree,_Q=zl.stat_desc.extra_bits,XP=zl.stat_desc.extra_base,Vv=zl.stat_desc.max_length,hC=0;for(Br=0;Br<=15;Br++)ar.bl_count[Br]=0;for(Hu[2*ar.heap[ar.heap_max]+1]=0,Lv=ar.heap_max+1;Lv<573;Lv++)Vv<(Br=Hu[2*Hu[2*(zu=ar.heap[Lv])+1]+1]+1)&&(Br=Vv,hC++),Hu[2*zu+1]=Br,ZP<zu||(ar.bl_count[Br]++,Bv=0,XP<=zu&&(Bv=_Q[zu-XP]),ar.opt_len+=(U2=Hu[2*zu])*(Br+Bv),yQ&&(ar.static_len+=U2*(qP[2*zu+1]+Bv)));if(0!==hC){do{for(Br=Vv-1;0===ar.bl_count[Br];)Br--;ar.bl_count[Br]--,ar.bl_count[Br+1]+=2,ar.bl_count[Vv]--,hC-=2}while(0<hC);for(Br=Vv;0!==Br;Br--)for(zu=ar.bl_count[Br];0!==zu;)ZP<(Nv=ar.heap[--Lv])||(Hu[2*Nv+1]!==Br&&(ar.opt_len+=(Br-Hu[2*Nv+1])*Hu[2*Nv],Hu[2*Nv+1]=Br),zu--)}}(Ce,Ze),Ao(en,Zr,Ce.bl_count)}function te(Ce,Ze,Lt){var zt,at,en=-1,wn=Ze[1],nn=0,qn=7,Zr=4;for(0===wn&&(qn=138,Zr=3),Ze[2*(Lt+1)+1]=65535,zt=0;zt<=Lt;zt++)at=wn,wn=Ze[2*(zt+1)+1],++nn<qn&&at===wn||(nn<Zr?Ce.bl_tree[2*at]+=nn:0!==at?(at!==en&&Ce.bl_tree[2*at]++,Ce.bl_tree[32]++):nn<=10?Ce.bl_tree[34]++:Ce.bl_tree[36]++,en=at,Zr=(nn=0)===wn?(qn=138,3):at===wn?(qn=6,3):(qn=7,4))}function kt(Ce,Ze,Lt){var zt,at,en=-1,wn=Ze[1],nn=0,qn=7,Zr=4;for(0===wn&&(qn=138,Zr=3),zt=0;zt<=Lt;zt++)if(at=wn,wn=Ze[2*(zt+1)+1],!(++nn<qn&&at===wn)){if(nn<Zr)for(;cn(Ce,at,Ce.bl_tree),0!=--nn;);else 0!==at?(at!==en&&(cn(Ce,at,Ce.bl_tree),nn--),cn(Ce,16,Ce.bl_tree),xn(Ce,nn-3,2)):nn<=10?(cn(Ce,17,Ce.bl_tree),xn(Ce,nn-3,3)):(cn(Ce,18,Ce.bl_tree),xn(Ce,nn-11,7));en=at,Zr=(nn=0)===wn?(qn=138,3):at===wn?(qn=6,3):(qn=7,4)}}xe(Yt);var vt=!1;function be(Ce,Ze,Lt,zt){var at,en,wn;xn(Ce,0+(zt?1:0),3),en=Ze,wn=Lt,Yn(at=Ce),ti(at,wn),ti(at,~wn),ge.arraySet(at.pending_buf,at.window,en,wn,at.pending),at.pending+=wn}je._tr_init=function(Ce){vt||(function(){var Ze,Lt,zt,at,en,wn=new Array(16);for(at=zt=0;at<28;at++)for(At[at]=zt,Ze=0;Ze<1<<Ot[at];Ze++)oe[zt++]=at;for(oe[zt-1]=at,at=en=0;at<16;at++)for(Yt[at]=en,Ze=0;Ze<1<<Qt[at];Ze++)wt[en++]=at;for(en>>=7;at<30;at++)for(Yt[at]=en<<7,Ze=0;Ze<1<<Qt[at]-7;Ze++)wt[256+en++]=at;for(Lt=0;Lt<=15;Lt++)wn[Lt]=0;for(Ze=0;Ze<=143;)si[2*Ze+1]=8,Ze++,wn[8]++;for(;Ze<=255;)si[2*Ze+1]=9,Ze++,wn[9]++;for(;Ze<=279;)si[2*Ze+1]=7,Ze++,wn[7]++;for(;Ze<=287;)si[2*Ze+1]=8,Ze++,wn[8]++;for(Ao(si,287,wn),Ze=0;Ze<30;Ze++)Ne[2*Ze+1]=5,Ne[2*Ze]=Tt(Ze,5);xi=new ui(si,Ot,257,286,15),Wt=new ui(Ne,Qt,0,30,15),pi=new ui(new Array(0),St,0,19,7)}(),vt=!0),Ce.l_desc=new Ke(Ce.dyn_ltree,xi),Ce.d_desc=new Ke(Ce.dyn_dtree,Wt),Ce.bl_desc=new Ke(Ce.bl_tree,pi),Ce.bi_buf=0,Ce.bi_valid=0,or(Ce)},je._tr_stored_block=be,je._tr_flush_block=function(Ce,Ze,Lt,zt){var at,en,wn=0;0<Ce.level?(2===Ce.strm.data_type&&(Ce.strm.data_type=function(nn){var qn,Zr=4093624447;for(qn=0;qn<=31;qn++,Zr>>>=1)if(1&Zr&&0!==nn.dyn_ltree[2*qn])return 0;if(0!==nn.dyn_ltree[18]||0!==nn.dyn_ltree[20]||0!==nn.dyn_ltree[26])return 1;for(qn=32;qn<256;qn++)if(0!==nn.dyn_ltree[2*qn])return 1;return 0}(Ce)),Ka(Ce,Ce.l_desc),Ka(Ce,Ce.d_desc),wn=function(nn){var qn;for(te(nn,nn.dyn_ltree,nn.l_desc.max_code),te(nn,nn.dyn_dtree,nn.d_desc.max_code),Ka(nn,nn.bl_desc),qn=18;3<=qn&&0===nn.bl_tree[2*Jt[qn]+1];qn--);return nn.opt_len+=3*(qn+1)+5+5+4,qn}(Ce),(en=Ce.static_len+3+7>>>3)<=(at=Ce.opt_len+3+7>>>3)&&(at=en)):at=en=Lt+5,Lt+4<=at&&-1!==Ze?be(Ce,Ze,Lt,zt):4===Ce.strategy||en===at?(xn(Ce,2+(zt?1:0),3),Qn(Ce,si,Ne)):(xn(Ce,4+(zt?1:0),3),function(nn,qn,Zr,ar){var zl;for(xn(nn,qn-257,5),xn(nn,Zr-1,5),xn(nn,ar-4,4),zl=0;zl<ar;zl++)xn(nn,nn.bl_tree[2*Jt[zl]+1],3);kt(nn,nn.dyn_ltree,qn-1),kt(nn,nn.dyn_dtree,Zr-1)}(Ce,Ce.l_desc.max_code+1,Ce.d_desc.max_code+1,wn+1),Qn(Ce,Ce.dyn_ltree,Ce.dyn_dtree)),or(Ce),zt&&Yn(Ce)},je._tr_tally=function(Ce,Ze,Lt){return Ce.pending_buf[Ce.d_buf+2*Ce.last_lit]=Ze>>>8&255,Ce.pending_buf[Ce.d_buf+2*Ce.last_lit+1]=255&Ze,Ce.pending_buf[Ce.l_buf+Ce.last_lit]=255&Lt,Ce.last_lit++,0===Ze?Ce.dyn_ltree[2*Lt]++:(Ce.matches++,Ze--,Ce.dyn_ltree[2*(oe[Lt]+256+1)]++,Ce.dyn_dtree[2*ht(Ze)]++),Ce.last_lit===Ce.lit_bufsize-1},je._tr_align=function(Ce){var Ze;xn(Ce,2,3),cn(Ce,256,si),16===(Ze=Ce).bi_valid?(ti(Ze,Ze.bi_buf),Ze.bi_buf=0,Ze.bi_valid=0):8<=Ze.bi_valid&&(Ze.pending_buf[Ze.pending++]=255&Ze.bi_buf,Ze.bi_buf>>=8,Ze.bi_valid-=8)}},{"../utils/common":41}],53:[function($e,Bt,je){"use strict";Bt.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function($e,Bt,je){(function(ge){!function(Se,ue){"use strict";if(!Se.setImmediate){var xe,Re,Ge,Ve,He=1,he={},ke=!1,le=Se.document,Oe=Object.getPrototypeOf&&Object.getPrototypeOf(Se);Oe=Oe&&Oe.setTimeout?Oe:Se,xe="[object process]"==={}.toString.call(Se.process)?function(rt){process.nextTick(function(){Me(rt)})}:function(){if(Se.postMessage&&!Se.importScripts){var rt=!0,Ye=Se.onmessage;return Se.onmessage=function(){rt=!1},Se.postMessage("","*"),Se.onmessage=Ye,rt}}()?(Ve="setImmediate$"+Math.random()+"$",Se.addEventListener?Se.addEventListener("message",Qe,!1):Se.attachEvent("onmessage",Qe),function(rt){Se.postMessage(Ve+rt,"*")}):Se.MessageChannel?((Ge=new MessageChannel).port1.onmessage=function(rt){Me(rt.data)},function(rt){Ge.port2.postMessage(rt)}):le&&"onreadystatechange"in le.createElement("script")?(Re=le.documentElement,function(rt){var Ye=le.createElement("script");Ye.onreadystatechange=function(){Me(rt),Ye.onreadystatechange=null,Re.removeChild(Ye),Ye=null},Re.appendChild(Ye)}):function(rt){setTimeout(Me,0,rt)},Oe.setImmediate=function(rt){"function"!=typeof rt&&(rt=new Function(""+rt));for(var Ye=new Array(arguments.length-1),Pt=0;Pt<Ye.length;Pt++)Ye[Pt]=arguments[Pt+1];return he[He]={callback:rt,args:Ye},xe(He),He++},Oe.clearImmediate=me}function me(rt){delete he[rt]}function Me(rt){if(ke)setTimeout(Me,0,rt);else{var Ye=he[rt];if(Ye){ke=!0;try{!function(Pt){var Ot=Pt.callback,Qt=Pt.args;switch(Qt.length){case 0:Ot();break;case 1:Ot(Qt[0]);break;case 2:Ot(Qt[0],Qt[1]);break;case 3:Ot(Qt[0],Qt[1],Qt[2]);break;default:Ot.apply(undefined,Qt)}}(Ye)}finally{me(rt),ke=!1}}}}function Qe(rt){rt.source===Se&&"string"==typeof rt.data&&0===rt.data.indexOf(Ve)&&Me(+rt.data.slice(Ve.length))}}(typeof self>"u"?void 0===ge?this:ge:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}},uC=>{uC(uC.s=793)}]);