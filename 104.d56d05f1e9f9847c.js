(()=>{var Tr={104:(L,Ce,Y)=>{"use strict";function re(r){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function u(r,e,t){return(e=function Mr(r){var e=function Ar(r,e){if("object"!==re(r)||null===r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,e||"default");if("object"!==re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}(r,"string");return"symbol"===re(e)?e:String(e)}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}class W{constructor(e,t){u(this,"workerId",void 0),u(this,"message",void 0),this.workerId=e,this.message=t}static builder(){return new W(-1,null)}setWorkerId(e){return this.workerId=e,this}setMessage(e){return this.message=e,this}}let ue=(()=>{class r{constructor(t){u(this,"type",void 0),u(this,"id",0),u(this,"callbackId",-1),this.type=t,this.id=r.newId()}static newId(){return r.staticId++}setCallbackId(t){return this.callbackId=t,this}}return u(r,"staticId",0),r})(),Cr=(()=>{class r extends ue{constructor(t){super(r.TYPE),u(this,"pageLoadedFrom",void 0),this.pageLoadedFrom=t}static builder(){return new r("")}setPageLoadedFrom(t){return this.pageLoadedFrom=t,this}}return u(r,"TYPE","SetupWorkerRequest"),r})(),Ie=(()=>{class r extends ue{constructor(t){super(r.TYPE),u(this,"formula",void 0),this.formula=t}static builder(){return new r("")}setFormula(t){return this.formula=t,this}}return u(r,"TYPE","CalculateWorkerRequest"),r})(),Fe=(()=>{class r extends ue{constructor(t,n,s){super(r.TYPE),u(this,"gameId",void 0),u(this,"commands",void 0),u(this,"result",void 0),this.gameId=t,this.commands=n,this.result=s}static builder(){return new r("","","")}setCommands(t,...n){return this.gameId=t,this.commands=[t,...n].join("\n"),this}setResult(t,n){return this.gameId=t,this.result=n,this}}return u(r,"TYPE","CalculateChessWorkerRequest"),r})();class j extends ue{}let Ir=(()=>{class r extends j{constructor(t,n){super(r.TYPE),u(this,"libraryRef",void 0),u(this,"libraryType",void 0),this.libraryRef=t,this.libraryType=n}static builder(){return new r("","")}setLibraryRef(t){return this.libraryRef=t,this}setLibraryType(t){return this.libraryType=t,this}}return u(r,"TYPE","LibraryInfoRequest"),r})(),Fr=(()=>{class r extends j{constructor(t,n,s){super(r.TYPE),u(this,"libraryType",void 0),u(this,"bookRef",void 0),u(this,"loadBooksEnabled",void 0),this.libraryType=t,this.bookRef=n,this.loadBooksEnabled=s}static builder(){return new r("","",!0)}setLibraryType(t){return this.libraryType=t,this}setBookRef(t){return this.bookRef=t,this}setLoadBooksEnabled(t){return this.loadBooksEnabled=t,this}}return u(r,"TYPE","BookInfoRequest"),r})(),Lr=(()=>{class r extends j{constructor(t,n,s){super(r.TYPE),u(this,"libraryType",void 0),u(this,"bookRef",void 0),u(this,"languages",void 0),this.libraryType=t,this.bookRef=n,this.languages=s}static builder(){return new r("","",[])}setLibraryType(t){return this.libraryType=t,this}setBookRef(t){return this.bookRef=t,this}setLanguages(t){return this.languages=t,this}addLanguage(t){return this.languages.push(t),this}}return u(r,"TYPE","BookRequest"),r})(),Dr=(()=>{class r extends j{constructor(t){super(r.TYPE),u(this,"pages",void 0),this.pages=t}static builder(){return new r([])}setBookPages(t){return this.pages=t,this}addBookPage(t){return this.pages.push(t),this}}return u(r,"TYPE","PagesRequest"),r})(),xr=(()=>{class r extends j{constructor(t){super(r.TYPE),u(this,"pages",void 0),this.pages=t}static builder(){return new r([])}setPages(t){return this.pages=t,this}addPage(t){return this.pages.push(t),this}}return u(r,"TYPE","PagesResponse"),r})();class Le{constructor(e,t,n){u(this,"bookRef",void 0),u(this,"path",void 0),u(this,"content",void 0),this.bookRef=e,this.path=t,this.content=n}static builder(){return new Le("","","")}setBookRef(e){return this.bookRef=e,this}setPath(e){return this.path=e,this}setContent(e){return this.content=e,this}}let Nr=(()=>{class r extends j{constructor(t){super(r.TYPE),u(this,"metaBooks",void 0),this.metaBooks=t}static builder(){return new r([])}setMetaBooks(t){return this.metaBooks=t,this}addMetaBook(t){return this.metaBooks.push(t),this}}return u(r,"TYPE","BookResponse"),r})(),Br=(()=>{class r extends j{constructor(t,n,s){super(r.TYPE),u(this,"bookRef",void 0),u(this,"metaContent",void 0),u(this,"loadBooksEnabled",void 0),this.bookRef=t,this.metaContent=n,this.loadBooksEnabled=s}static builder(){return new r("","",!0)}setBookRef(t){return this.bookRef=t,this}setMetaContent(t){return this.metaContent=t,this}setLoadBooksEnabled(t){return this.loadBooksEnabled=t,this}}return u(r,"TYPE","BookInfoResponse"),r})(),Or=(()=>{class r extends j{constructor(t,n){super(r.TYPE),u(this,"libraryRef",void 0),u(this,"metaContent",void 0),this.libraryRef=t,this.metaContent=n}static builder(){return new r("","")}setLibraryRef(t){return this.libraryRef=t,this}setMetaContent(t){return this.metaContent=t,this}}return u(r,"TYPE","LibraryInfoResponse"),r})();class Hr{constructor(e=null){u(this,"messageSender",void 0),u(this,"requests",new Map),this.messageSender=e}send(e,t){return this.messageSender&&(this.requests.set(t.type,t),this.messageSender(e,t)),this}post(e,t){return this}runAll(e,t,n){let s=0,o=()=>{if(s>=e.length)return void(n&&n(!0));let a=e[s++];t(a,l=>{l?o():n&&n(!1)})};o()}}class de{static merge(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;let n=e.endsWith("/"),s=t.startsWith("/"),o=e;return n!=s?o+=t:n?o+=s?t.substring(1):t:o?o+="/"+t:o=t,o}}class Je{static dtr(e,t){for(var n=t>=0?t:47,s=new ArrayBuffer(e.length-1),o=new Uint8Array(s),a=n,l=0;l<e.length;++l){var f=255&(e[l]^a);l>0&&(o[l-1]=f),a=255&(a+f^5)}return o}static fromByteArray(e){let t="";for(let n=0;n<e.length;n+=2)t+=String.fromCharCode(e[n+1]<<8|e[n]);return t}}const Ze="2.0.550",jr=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io"}];class N{constructor(e,t,n,s,o,a,l,h,f,_,b){u(this,"id",void 0),u(this,"name",void 0),u(this,"shape",void 0),u(this,"menuShape",void 0),u(this,"routes",void 0),u(this,"routeEnabled",void 0),u(this,"applicationEnabled",void 0),u(this,"applicationHidden",void 0),u(this,"applicationLogoText",void 0),u(this,"libraryType",void 0),u(this,"libraryRef",void 0),this.id=e,this.name=t,this.shape=n,this.menuShape=s,this.routes=o,this.routeEnabled=a,this.applicationEnabled=l,this.applicationHidden=h,this.applicationLogoText=f,this.libraryType=_,this.libraryRef=b}static builder(){return new N("","","","",[],!1,!1,!1,"","prod","book")}setId(e){return this.id=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setMenuShape(e){return this.menuShape=e,this}setRoutes(e){return this.routes=e,this}setRouteEnabled(e){return this.routeEnabled=e,this}setApplicatioinEnabled(e){return this.applicationEnabled=e,this}setApplicationLogoText(e){return this.applicationLogoText=e,this}setLibraryType(e){return this.libraryType=e,this}setLibraryRef(e){return this.libraryRef=e,this}enable(e=!0){return this.routeEnabled=e,this.applicationEnabled=e,this}hide(e=!0){return this.applicationHidden=e,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class C{constructor(e,t,n,s,o,a=null,l=null,h=null){u(this,"link",void 0),u(this,"name",void 0),u(this,"shape",void 0),u(this,"hasBadge",void 0),u(this,"hasAlert",void 0),u(this,"onClick",void 0),u(this,"isActive",void 0),u(this,"isHidden",void 0),this.link=e,this.name=t,this.shape=n,this.hasBadge=s,this.hasAlert=o,this.onClick=a,this.isActive=l,this.isHidden=h}static builder(){return new C("","","",!1,!1)}setIsActive(e){return this.isActive=e,this}setIsHidden(e){return this.isHidden=e,this}setOnClick(e){return this.onClick=e,this}setLink(e){return this.link=e,this}setName(e){return this.name=e,this}setShape(e){return this.shape=e,this}setHasBadge(e){return this.hasBadge=e,this}setHasAlert(e){return this.hasAlert=e,this}runOnClick(){this.onClick&&this.onClick(this)}}class qr{constructor(){u(this,"version",""),u(this,"applicationId","memorial"),u(this,"applicationName","Memorial"),u(this,"developers",jr),u(this,"production",!0),u(this,"platform","Web"),u(this,"relativeCacheService",!0),u(this,"serviceAPIHost",""),u(this,"redirectToServerAfterItIsReadyAdress",""),u(this,"portAutoDetection",!0),u(this,"portAutoIncrementValue",0),u(this,"defaultRoute","/compiler"),u(this,"coding",!0),u(this,"showOldVersions",!1),u(this,"oldVersionsName","V1"),u(this,"useDictionaries",!1),u(this,"themeName","blue"),u(this,"serverType","rest"),u(this,"applications",[]),this.addApplication(N.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home").setRoutes([C.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(N.builder().setId("logos").setName("\u041b\u043e\u0433\u043e").setShape("scroll").setApplicationLogoText("\u041f\u0435\u0447\u0430\u0442\u044c|\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u043e\u0432").setRoutes([C.builder().setLink("logos").setName("\u041b\u043e\u0433\u043e").setShape("print")]).hide()).addApplication(N.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("check-circle").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([C.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),C.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),C.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image"),C.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")]).hide()).addApplication(N.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setShape("scroll").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([C.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")]).hide()).addApplication(N.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("my-logo-icon").setMenuShape("book").setLibraryType("prod").setLibraryRef("biblia").setRoutes([C.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(N.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("my-logo-icon").setMenuShape("form").setLibraryType("mprod").setLibraryRef("ps").setRoutes([C.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users")])).addApplication(N.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setLibraryType("clndrprod").setLibraryRef("clndr").setRoutes([C.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")])).addApplication(N.builder().setId("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon").setLibraryType("crossprod").setLibraryRef("cross").setRoutes([C.builder().setLink("cross").setName("\u041a\u0440\u0435\u0441\u0442").setShape("my-logo-icon")])).addApplication(N.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setLibraryType("compprod").setLibraryRef("comp").setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([C.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(N.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setLibraryType("schprod").setLibraryRef("sch").setRoutes([C.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).addApplication(N.builder().setId("calculator").setName("\u0420\u0435\u0448IDE").setShape("calculator").setLibraryType("cprod").setLibraryRef("calc").setApplicationLogoText("\u0420\u0435\u0448IDE|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([C.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")])).addApplication(N.builder().setId("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king").setLibraryType("chessprod").setLibraryRef("chess").setApplicationLogoText("\u0428\u0430\u0445\u043c\u0430\u0442\u044b|\u0438\u0433\u0440\u0430").setRoutes([C.builder().setLink("chess").setName("\u0428\u0430\u0445\u043c\u0430\u0442\u044b").setShape("chess-white-king")])).setVersion("BV."+Ze),this.afterConstruct()}addApplication(e){if(null!=this.applications.find(t=>t.id==e.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${e.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(e),this}setVersion(e){return this.version=e,this}setProduction(e){return this.production=e,this}setPlatform(e){return this.platform=e,this}setRelativeCacheService(e){return this.relativeCacheService=e,this}setServiceAPIHost(e){return this.serviceAPIHost=e,this}setRedirectToServerAfterItIsReadyAdress(e){return this.redirectToServerAfterItIsReadyAdress=e,this}setPortAutoDetection(e){return this.portAutoDetection=e,this}setPortAutoIncrementValue(e){return this.portAutoIncrementValue=e,this}setDefaultRoute(e){return this.defaultRoute=e,this}setServerType(e){return this.serverType=e,this}setCoding(e){return this.coding=e,this}setShowOldVersions(e){return this.showOldVersions=e,this}setUseDictionaries(e){return this.useDictionaries=e,this}afterConstruct(){}}class De extends qr{afterConstruct(){super.afterConstruct(),this.setVersion("WPR."+Ze).setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((e,t,n)=>e.enable())}static builder(){return new De}}const H=De.builder();class xe{constructor(e,t){u(this,"id",void 0),u(this,"handler",void 0),this.id=e,this.handler=t}static builder(){return new xe(-1,()=>{})}setId(e){return this.id=e,this}setHandler(e){return this.handler=e,this}}class Vr{constructor(){u(this,"id",1),u(this,"handlers",new Map),u(this,"targetHandlers",new Map),u(this,"messagesToTarget",new Map),u(this,"messagesTimeoutMs",18e4)}newId(){return this.id++}putMessage(e){let t=e.target,n=this.messagesToTarget.get(t);return null==n&&(n=[]),n.push(e),n=this.removeOld(n),n?this.messagesToTarget.set(t,n):this.messagesToTarget.delete(t),this}getMessages(e,t=!0){let n=this.messagesToTarget.get(e),s=this.removeOld(n);return null==n&&t&&this.messagesToTarget.delete(e),s}removeAllOld(){let e=[];return this.messagesToTarget.forEach((t,n,s)=>{e.push(n)}),e.forEach(t=>{this.getMessages(t,!1)}),this}removeOld(e){if(void 0===e)return;let t=Date.now(),n=e.findIndex(o=>o.time+this.messagesTimeoutMs>t),s=e;return n>0&&(s=e.splice(0,n)),s}sendMessage(e){this.handlers.forEach((n,s,o)=>{n(e)});let t=this.targetHandlers.get(e.target);t&&t.forEach(n=>{n.handler(e)})}addHandler(e){let t=this.newId();this.handlers.set(t,e);let n=this;return{unsubscribe(){n.removeHandler(t)}}}addTargetHandler(e,t){let n=this.newId(),s=this.targetHandlers.get(e);null==s&&(s=[],this.targetHandlers.set(e,s)),s.push(xe.builder().setId(n).setHandler(t));let o=this;return{unsubscribe(){o.removeTargetHandler(e,n)}}}removeAllTargetHandlers(e){return this.targetHandlers.delete(e),this}removeHandler(e){this.handlers.delete(e)}removeTargetHandler(e,t){let n=this.targetHandlers.get(e);if(n){let s=n.filter((o,a,l)=>o.id!=t);s.length?this.targetHandlers.set(e,s):this.targetHandlers.delete(e)}}}L=Y.hmd(L);let he=null,q=new class Yr extends Hr{constructor(e=null){super(e),u(this,"cacheService",null)}getCacheService(){return this.cacheService}setCacheService(e){return this.cacheService=e,this}post(e,t){switch(t.type){case Ir.TYPE:this.onLibraryInfoRequest(e,t);break;case Fr.TYPE:this.onBookInfoRequest(e,t);break;case Lr.TYPE:this.onBookRequest(e,t);break;case Dr.TYPE:this.onPagesRequest(e,t);break;default:throw new Error(`Unknown message type: ${t.type}.`)}return this}onLibraryInfoRequest(e,t){let n=Or.builder().setCallbackId(t.id);t.libraryRef?this.loadLibraryInfo(t,n,t.libraryType+"/"+t.libraryRef+".library.txt",s=>{this.send(e,n)}):this.send(e,n)}loadLibraryInfo(e,t,n,s=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{t.setMetaContent(a||"").setLibraryRef(e.libraryRef),s&&s(!!a)})}onBookInfoRequest(e,t){let n=Br.builder().setCallbackId(t.id);t.bookRef?this.loadBookInfo(t,n,t.libraryType+"/"+t.bookRef+".book.txt",s=>{this.send(e,n)}):this.send(e,n)}loadBookInfo(e,t,n,s=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{t.setMetaContent(a||"").setBookRef(e.bookRef),s&&s(!!a)})}onBookRequest(e,t){let n=Nr.builder().setCallbackId(t.id),s=t.languages.map(o=>o);s.length||s.push("CS","Sinodal"),s=s.map(o=>de.merge("/"+t.libraryType,t.bookRef+"_"+o+"/index.txt")),t.bookRef?this.runAll(s,(o,a)=>{this.loadBookPath(t,n,o,a)},o=>{this.send(e,n)}):this.send(e,n)}loadBookPath(e,t,n,s=null){let o=this.cacheService.getRestPoint(n,null);this.cacheService.getTextRestcallUrl(o,a=>{t.addMetaBook(Le.builder().setBookRef(e.bookRef).setPath(n).setContent(a||"")),s&&s(!!a)})}onPagesRequest(e,t){let n=xr.builder().setCallbackId(t.id);this.runAll(t.pages,(s,o)=>{let a=this.findPathPrefix(s.bookPath),l=this.cacheService.getRestPoint(de.merge(a,s.bookPage),null);this.cacheService.getTextRestcallUrl(l,h=>{n.addPage(h||""),o(!0)})},s=>{this.send(e,n)})}findPathPrefix(e){let t=e.lastIndexOf("/");return e.substring(0,t)}}((r,e)=>{postMessage(r?W.builder().setWorkerId(r.workerId).setMessage(e):e)}),tr=new class $r{setDictionaries(e){return this.dictionaries=e,this}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}isUseDictionaries(){return this.useDictionaries}setShowNormal(){return this.showType="normal",this}setShowLogin(e=null){return null!=e&&(this.autoLoginApplication=e),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let e="";return this.environment.developers.forEach(t=>{e=e+(e?"_":"")+t.id}),e}get developerName(){let e="";return this.environment.developers.forEach(t=>{e=e+(e?", ":"")+t.name}),e}get developerNameSortOrder(){let e="";return this.environment.developers.forEach(t=>{e=e+(e?", ":"")+t.nameSortOrder}),e}get developerLink(){return this.environment.developers[0].link}setPageLoadedFrom(e,t=!1){return this.pageLoadedFrom=e,t&&this.runPortAutoDetection(),this.setupBaseHref(),this}constructor(){u(this,"cache",new Map),u(this,"environment",H),u(this,"themeName",H.themeName),u(this,"serviceAPIHost",H.serviceAPIHost),u(this,"redirectToServerAfterItIsReadyAdress",H.redirectToServerAfterItIsReadyAdress),u(this,"portAutoDetection",H.portAutoDetection),u(this,"portAutoIncrementValue",H.portAutoIncrementValue),u(this,"messageBus",new Vr),u(this,"alerts",[]),u(this,"upperMenuEnabled",!0),u(this,"pageLoadedFrom",""),u(this,"authId",""),u(this,"authIdKey","authId"),u(this,"authBody",""),u(this,"baseHref",""),u(this,"waitingIOOperationCount",0),u(this,"waitingIOOperationValue",0),u(this,"waitingIOOperationValueMax",100),u(this,"outletOnly",!1),u(this,"autoLoginApplication",!0),u(this,"defaultApplication",""),u(this,"defaultLoginType","login"),u(this,"showType",this.defaultLoginType),u(this,"enableDefaultPersons",!0),u(this,"coding",H.coding),u(this,"showOldVersions",H.showOldVersions),u(this,"oldVersionsName",H.oldVersionsName),u(this,"useDictionaries",H.useDictionaries),u(this,"dictionaries",null),typeof pageLoadedFrom<"u"&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}setupBaseHref(){let e=this.pageLoadedFrom;e.endsWith("/")&&(e=e.substring(0,e.length-1)),this.baseHref=e}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(e){const t=e.lastIndexOf(":");if(t<0)return e;let n="";for(let a=t+1;a<e.length&&"0123456789".indexOf(e.charAt(a))>=0;++a)n+=e.charAt(a);return isNaN(+n)?e:e.substring(0,t)+":"+(+location.port+H.portAutoIncrementValue)+e.substring(t+1+n.length,e.length)}addAlert(e){e.setConfig(this),this.alerts.push(e)}removeAlert(e){const t=this.alerts.findIndex((n,s,o)=>n===e);t>=0&&this.alerts.splice(t,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(e){return this.environment.platform===e}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(e){return this.environment.serverType===e}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(e){return this.themeName===e}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(e,t=0){setTimeout(()=>{e()},t)}getApplication(){let e=null;return this.environment.applications.forEach(t=>{t.id==this.defaultApplication&&(e=t)}),e}getApplicationByNameOrNull(e){let t=null;return this.environment.applications.forEach(n=>{n.name==e&&(t=n)}),t}getSingleAppOrNull(){let e=null,t=this.environment.applications.filter(n=>n.applicationEnabled&&!n.applicationHidden);return 1==t.length&&(e=t[0]),e}};q.setCacheService(new class Ur{get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}constructor(e,t="/static"){u(this,"config",void 0),u(this,"sRestPoint",void 0),u(this,"textCache",new Map),u(this,"waitingTextCache",new Map),this.config=e,this.sRestPoint=t}getRestPoint(e,t,n=null){const s=this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return de.merge(de.merge(t||s,n??this.restPoint),e)}completeOnDone(e,t){let n=this.waitingTextCache.get(e);n&&(n.forEach(s=>{this.config.post(()=>{s&&s(t)})}),this.waitingTextCache.delete(e))}getTextRestcallUrl(e,t){if(this.coding){if(this.textCache.has(e)){let n=this.textCache.get(e);if(null!=n)return void this.config.post(()=>{t&&t(n)})}return this.waitingTextCache.has(e)?void(t&&this.waitingTextCache.get(e).push(t)):(t&&this.waitingTextCache.set(e,[t]),this.getBinRestcallUrlRaw(e,n=>{if(n){let s=new Uint8Array(n),o=Je.fromByteArray(s);this.completeOnDone(e,o)}else t&&t(null)}))}return this.getTextRestcallUrlRaw(e,t)}getTextRestcallUrlRaw(e,t){if(this.textCache.has(e)){let s=this.textCache.get(e);if(null!=s)return void this.config.post(()=>{t&&t(s)})}if(this.waitingTextCache.has(e))t&&this.waitingTextCache.get(e).push(t);else{t&&this.waitingTextCache.set(e,[t]);var n=new XMLHttpRequest;n.onload=()=>{if(t){let s=4===n.readyState&&200===n.status?n.responseText:null;null!=s?this.textCache.set(e,s):this.textCache.delete(e),this.completeOnDone(e,s)}},n.open("get",e,!0),n.send()}}getBinRestcallUrlRaw(e,t,n=!0){let s=e;if(this.coding){let a=s.lastIndexOf(".");a>=0&&(s=s.substring(0,a)+".bin")}var o=new XMLHttpRequest;o.onload=()=>{if(t){let l=new Uint8Array(4===o.readyState&&200===o.status?o.response:null),h=n?Je.dtr(l,-1):l;t&&t(h)}},o.open("get",s,!0),o.responseType="arraybuffer",o.send()}}(tr));let ce=!1;addEventListener("message",({data:r})=>{let e=r;if("string"==typeof e.message){const t=`worker response to ${r}`;postMessage(W.builder().setWorkerId(e.workerId).setMessage(t))}else if(e.message.type===Cr.TYPE)tr.setPageLoadedFrom(e.message.pageLoadedFrom,!0);else if(e.message.type===Ie.TYPE){let t=()=>{if(d&&d._Calculate){let n=e.message;const s=2048,o=d._malloc(s),a=20480,l=d._malloc(a);ae(n.formula,d.HEAP8,o,s),d._Calculate(o,a,l);const h=$(d.HEAP8,l,a);d._free(l),d._free(o),postMessage(W.builder().setWorkerId(e.workerId).setMessage(Ie.builder().setFormula(h)))}else postMessage(W.builder().setWorkerId(e.workerId).setMessage(Ie.builder().setFormula("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};ce?t():q.getCacheService()?.getBinRestcallUrlRaw(q.getCacheService()?.getRestPoint("data/memorial.bin"),n=>{if(null!=n){const s=n.byteLength,o=d._malloc(s);d.HEAP8.set(n,o),d._Setup(o,s),d._free(o),ce=!0,t()}},q.getCacheService()?.coding)}else if(e.message.type===Fe.TYPE){let t=()=>{if(d&&d._ChessCalculate){let n=e.message;const s=2048,o=d._malloc(s),a=20480,l=d._malloc(a);ae(n.commands,d.HEAP8,o,s),he=e,d._ChessCalculate(o,a,l),he=null,$(d.HEAP8,l,a),d._free(l),d._free(o)}else postMessage(W.builder().setWorkerId(e.workerId).setResult(Fe.builder().setResult(e.gameId,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e. \u0415\u0449\u0451 \u0438\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..")))};ce?t():q.getCacheService()?.getBinRestcallUrlRaw(q.getCacheService()?.getRestPoint("data/chessapp.bin"),n=>{if(null!=n){const s=n.byteLength,o=d._malloc(s);d.HEAP8.set(n,o),d._ChessSetup(o,s),ce=!0,t()}},q.getCacheService()?.coding)}else q.post(e,e.message)});var te,ne,me,d=typeof d<"u"?d:{},nr=Object.assign({},d),Ne=[],fe="./this.program",pe=(r,e)=>{throw e},ir="object"==typeof window,Z="function"==typeof importScripts,ve="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,B="";if(ve){var Be=Y(652),Oe=Y(832);B=Z?Oe.dirname(B)+"/":__dirname+"/",te=(r,e)=>(r=_e(r)?new URL(r):Oe.normalize(r),Be.readFileSync(r,e?void 0:"utf8")),me=r=>{var e=te(r,!0);return e.buffer||(e=new Uint8Array(e)),e},ne=(r,e,t,n=!0)=>{r=_e(r)?new URL(r):Oe.normalize(r),Be.readFile(r,n?void 0:"utf8",(s,o)=>{s?t(s):e(n?o.buffer:o)})},!d.thisProgram&&process.argv.length>1&&(fe=process.argv[1].replace(/\\/g,"/")),Ne=process.argv.slice(2),L.exports=d,process.on("uncaughtException",r=>{if(!("unwind"===r||r instanceof Ee||r.context instanceof Ee))throw r}),pe=(r,e)=>{throw process.exitCode=r,e},d.inspect=()=>"[Emscripten Module object]"}else(ir||Z)&&(Z?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),B=0!==B.indexOf("blob:")?B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):"",te=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(null),e.responseText},Z&&(me=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),ne=(r,e,t)=>{var n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?e(n.response):t()},n.onerror=t,n.send(null)});var ie,He=d.print||console.log.bind(console),V=d.printErr||console.error.bind(console);Object.assign(d,nr),nr=null,d.arguments&&(Ne=d.arguments),d.thisProgram&&(fe=d.thisProgram),d.quit&&(pe=d.quit),d.wasmBinary&&(ie=d.wasmBinary),"object"!=typeof WebAssembly&&Q("no native wasm support detected");var ge,ye,I,K,se,y,P,Ue=!1;function sr(){var r=ge.buffer;d.HEAP8=I=new Int8Array(r),d.HEAP16=se=new Int16Array(r),d.HEAPU8=K=new Uint8Array(r),d.HEAPU16=new Uint16Array(r),d.HEAP32=y=new Int32Array(r),d.HEAPU32=P=new Uint32Array(r),d.HEAPF32=new Float32Array(r),d.HEAPF64=new Float64Array(r)}var or=[],ar=[],et=[],lr=[],J=0,Ye=null,oe=null;function ze(r){J++,d.monitorRunDependencies&&d.monitorRunDependencies(J)}function we(r){if(J--,d.monitorRunDependencies&&d.monitorRunDependencies(J),0==J&&(null!==Ye&&(clearInterval(Ye),Ye=null),oe)){var e=oe;oe=null,e()}}function Q(r){throw d.onAbort&&d.onAbort(r),V(r="Aborted("+r+")"),Ue=!0,ye=1,r+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(r)}var ee,g,T,ur=r=>r.startsWith("data:application/octet-stream;base64,"),_e=r=>r.startsWith("file://");function dr(r){if(r==ee&&ie)return new Uint8Array(ie);if(me)return me(r);throw"both async and sync fetching of the wasm failed"}function hr(r,e,t){return function dt(r){if(!ie&&(ir||Z)){if("function"==typeof fetch&&!_e(r))return fetch(r,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+r+"'";return e.arrayBuffer()}).catch(()=>dr(r));if(ne)return new Promise((e,t)=>{ne(r,n=>e(new Uint8Array(n)),t)})}return Promise.resolve().then(()=>dr(r))}(r).then(n=>WebAssembly.instantiate(n,e)).then(n=>n).then(t,n=>{V(`failed to asynchronously prepare wasm: ${n}`),Q(n)})}function Ee(r){this.name="ExitStatus",this.message=`Program terminated with exit(${r})`,this.status=r}ur(ee="mathapp.wasm")||(ee=function Gr(r){return d.locateFile?d.locateFile(r,B):B+r}(ee));var be=r=>{for(;r.length>0;)r.shift()(d)},pt=d.noExitRuntime||!0,cr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,$=(r,e,t)=>{for(var n=e+t,s=e;r[s]&&!(s>=n);)++s;if(s-e>16&&r.buffer&&cr)return cr.decode(r.subarray(e,s));for(var o="";e<s;){var a=r[e++];if(128&a){var l=63&r[e++];if(192!=(224&a)){var h=63&r[e++];if((a=224==(240&a)?(15&a)<<12|l<<6|h:(7&a)<<18|l<<12|h<<6|63&r[e++])<65536)o+=String.fromCharCode(a);else{var f=a-65536;o+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o},X=(r,e)=>r?$(K,r,e):"";function mt(r){this.excPtr=r,this.ptr=r-24,this.set_type=function(e){P[this.ptr+4>>2]=e},this.get_type=function(){return P[this.ptr+4>>2]},this.set_destructor=function(e){P[this.ptr+8>>2]=e},this.get_destructor=function(){return P[this.ptr+8>>2]},this.set_caught=function(e){I[this.ptr+12>>0]=e=e?1:0},this.get_caught=function(){return 0!=I[this.ptr+12>>0]},this.set_rethrown=function(e){I[this.ptr+13>>0]=e=e?1:0},this.get_rethrown=function(){return 0!=I[this.ptr+13>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)},this.set_adjusted_ptr=function(e){P[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return P[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Sr(this.get_type()))return P[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}var S={isAbs:r=>"/"===r.charAt(0),splitPath:r=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(r).slice(1),normalizeArray:(r,e)=>{for(var t=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t;t--)r.unshift("..");return r},normalize:r=>{var e=S.isAbs(r),t="/"===r.substr(-1);return!(r=S.normalizeArray(r.split("/").filter(n=>!!n),!e).join("/"))&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r},dirname:r=>{var e=S.splitPath(r),t=e[0],n=e[1];return t||n?(n&&(n=n.substr(0,n.length-1)),t+n):"."},basename:r=>{if("/"===r)return"/";var e=(r=(r=S.normalize(r)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?r:r.substr(e+1)},join:function(){var r=Array.prototype.slice.call(arguments);return S.normalize(r.join("/"))},join2:(r,e)=>S.normalize(r+"/"+e)},pr=r=>(pr=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return n=>crypto.getRandomValues(n);if(ve)try{var r=Y(827);if(r.randomFillSync)return n=>r.randomFillSync(n);var t=r.randomBytes;return n=>(n.set(t(n.byteLength)),n)}catch{}Q("initRandomDevice")})())(r),z={resolve:function(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:i.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";r=n+"/"+r,e=S.isAbs(n)}return(e?"/":"")+(r=S.normalizeArray(r.split("/").filter(s=>!!s),!e).join("/"))||"."},relative:(r,e)=>{function t(f){for(var _=0;_<f.length&&""===f[_];_++);for(var b=f.length-1;b>=0&&""===f[b];b--);return _>b?[]:f.slice(_,b-_+1)}r=z.resolve(r).substr(1),e=z.resolve(e).substr(1);for(var n=t(r.split("/")),s=t(e.split("/")),o=Math.min(n.length,s.length),a=o,l=0;l<o;l++)if(n[l]!==s[l]){a=l;break}var h=[];for(l=a;l<n.length;l++)h.push("..");return(h=h.concat(s.slice(a))).join("/")}},We=[],ke=r=>{for(var e=0,t=0;t<r.length;++t){var n=r.charCodeAt(t);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++t):e+=3}return e},ae=(r,e,t,n)=>{if(!(n>0))return 0;for(var s=t,o=t+n-1,a=0;a<r.length;++a){var l=r.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&r.charCodeAt(++a)),l<=127){if(t>=o)break;e[t++]=l}else if(l<=2047){if(t+1>=o)break;e[t++]=192|l>>6,e[t++]=128|63&l}else if(l<=65535){if(t+2>=o)break;e[t++]=224|l>>12,e[t++]=128|l>>6&63,e[t++]=128|63&l}else{if(t+3>=o)break;e[t++]=240|l>>18,e[t++]=128|l>>12&63,e[t++]=128|l>>6&63,e[t++]=128|63&l}}return e[t]=0,t-s};function Se(r,e,t){var n=t>0?t:ke(r)+1,s=new Array(n),o=ae(r,s,0,s.length);return e&&(s.length=o),s}var mr,G={ttys:[],init(){},shutdown(){},register(r,e){G.ttys[r]={input:[],output:[],ops:e},i.registerDevice(r,G.stream_ops)},stream_ops:{open(r){var e=G.ttys[r.node.rdev];if(!e)throw new i.ErrnoError(43);r.tty=e,r.seekable=!1},close(r){r.tty.ops.fsync(r.tty)},fsync(r){r.tty.ops.fsync(r.tty)},read(r,e,t,n,s){if(!r.tty||!r.tty.ops.get_char)throw new i.ErrnoError(60);for(var o=0,a=0;a<n;a++){var l;try{l=r.tty.ops.get_char(r.tty)}catch{throw new i.ErrnoError(29)}if(void 0===l&&0===o)throw new i.ErrnoError(6);if(null==l)break;o++,e[t+a]=l}return o&&(r.node.timestamp=Date.now()),o},write(r,e,t,n,s){if(!r.tty||!r.tty.ops.put_char)throw new i.ErrnoError(60);try{for(var o=0;o<n;o++)r.tty.ops.put_char(r.tty,e[t+o])}catch{throw new i.ErrnoError(29)}return n&&(r.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:r=>(()=>{if(!We.length){var r=null;if(ve){var t=Buffer.alloc(256),n=0,s=process.stdin.fd;try{n=Be.readSync(s,t)}catch(o){if(!o.toString().includes("EOF"))throw o;n=0}r=n>0?t.slice(0,n).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(r=window.prompt("Input: "))&&(r+="\n"):"function"==typeof readline&&null!==(r=readline())&&(r+="\n");if(!r)return null;We=Se(r,!0)}return We.shift()})(),put_char(r,e){null===e||10===e?(He($(r.output,0)),r.output=[]):0!=e&&r.output.push(e)},fsync(r){r.output&&r.output.length>0&&(He($(r.output,0)),r.output=[])},ioctl_tcgets:r=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(r,e,t)=>0,ioctl_tiocgwinsz:r=>[24,80]},default_tty1_ops:{put_char(r,e){null===e||10===e?(V($(r.output,0)),r.output=[]):0!=e&&r.output.push(e)},fsync(r){r.output&&r.output.length>0&&(V($(r.output,0)),r.output=[])}}},vr=r=>{r=((r,e)=>65536*Math.ceil(r/65536))(r);var e=kr(65536,r);return e?((r,e)=>(K.fill(0,r,r+e),r))(e,r):0},w={ops_table:null,mount:r=>w.createNode(null,"/",16895,0),createNode(r,e,t,n){if(i.isBlkdev(t)||i.isFIFO(t))throw new i.ErrnoError(63);w.ops_table||(w.ops_table={dir:{node:{getattr:w.node_ops.getattr,setattr:w.node_ops.setattr,lookup:w.node_ops.lookup,mknod:w.node_ops.mknod,rename:w.node_ops.rename,unlink:w.node_ops.unlink,rmdir:w.node_ops.rmdir,readdir:w.node_ops.readdir,symlink:w.node_ops.symlink},stream:{llseek:w.stream_ops.llseek}},file:{node:{getattr:w.node_ops.getattr,setattr:w.node_ops.setattr},stream:{llseek:w.stream_ops.llseek,read:w.stream_ops.read,write:w.stream_ops.write,allocate:w.stream_ops.allocate,mmap:w.stream_ops.mmap,msync:w.stream_ops.msync}},link:{node:{getattr:w.node_ops.getattr,setattr:w.node_ops.setattr,readlink:w.node_ops.readlink},stream:{}},chrdev:{node:{getattr:w.node_ops.getattr,setattr:w.node_ops.setattr},stream:i.chrdev_stream_ops}});var s=i.createNode(r,e,t,n);return i.isDir(s.mode)?(s.node_ops=w.ops_table.dir.node,s.stream_ops=w.ops_table.dir.stream,s.contents={}):i.isFile(s.mode)?(s.node_ops=w.ops_table.file.node,s.stream_ops=w.ops_table.file.stream,s.usedBytes=0,s.contents=null):i.isLink(s.mode)?(s.node_ops=w.ops_table.link.node,s.stream_ops=w.ops_table.link.stream):i.isChrdev(s.mode)&&(s.node_ops=w.ops_table.chrdev.node,s.stream_ops=w.ops_table.chrdev.stream),s.timestamp=Date.now(),r&&(r.contents[e]=s,r.timestamp=s.timestamp),s},getFileDataAsTypedArray:r=>r.contents?r.contents.subarray?r.contents.subarray(0,r.usedBytes):new Uint8Array(r.contents):new Uint8Array(0),expandFileStorage(r,e){var t=r.contents?r.contents.length:0;if(!(t>=e)){e=Math.max(e,t*(t<1048576?2:1.125)>>>0),0!=t&&(e=Math.max(e,256));var s=r.contents;r.contents=new Uint8Array(e),r.usedBytes>0&&r.contents.set(s.subarray(0,r.usedBytes),0)}},resizeFileStorage(r,e){if(r.usedBytes!=e)if(0==e)r.contents=null,r.usedBytes=0;else{var t=r.contents;r.contents=new Uint8Array(e),t&&r.contents.set(t.subarray(0,Math.min(e,r.usedBytes))),r.usedBytes=e}},node_ops:{getattr(r){var e={};return e.dev=i.isChrdev(r.mode)?r.id:1,e.ino=r.id,e.mode=r.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=r.rdev,e.size=i.isDir(r.mode)?4096:i.isFile(r.mode)?r.usedBytes:i.isLink(r.mode)?r.link.length:0,e.atime=new Date(r.timestamp),e.mtime=new Date(r.timestamp),e.ctime=new Date(r.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr(r,e){void 0!==e.mode&&(r.mode=e.mode),void 0!==e.timestamp&&(r.timestamp=e.timestamp),void 0!==e.size&&w.resizeFileStorage(r,e.size)},lookup(r,e){throw i.genericErrors[44]},mknod:(r,e,t,n)=>w.createNode(r,e,t,n),rename(r,e,t){if(i.isDir(r.mode)){var n;try{n=i.lookupNode(e,t)}catch{}if(n)for(var s in n.contents)throw new i.ErrnoError(55)}delete r.parent.contents[r.name],r.parent.timestamp=Date.now(),r.name=t,e.contents[t]=r,e.timestamp=r.parent.timestamp,r.parent=e},unlink(r,e){delete r.contents[e],r.timestamp=Date.now()},rmdir(r,e){var t=i.lookupNode(r,e);for(var n in t.contents)throw new i.ErrnoError(55);delete r.contents[e],r.timestamp=Date.now()},readdir(r){var e=[".",".."];for(var t in r.contents)r.contents.hasOwnProperty(t)&&e.push(t);return e},symlink(r,e,t){var n=w.createNode(r,e,41471,0);return n.link=t,n},readlink(r){if(!i.isLink(r.mode))throw new i.ErrnoError(28);return r.link}},stream_ops:{read(r,e,t,n,s){var o=r.node.contents;if(s>=r.node.usedBytes)return 0;var a=Math.min(r.node.usedBytes-s,n);if(a>8&&o.subarray)e.set(o.subarray(s,s+a),t);else for(var l=0;l<a;l++)e[t+l]=o[s+l];return a},write(r,e,t,n,s,o){if(e.buffer===I.buffer&&(o=!1),!n)return 0;var a=r.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=e.subarray(t,t+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===s)return a.contents=e.slice(t,t+n),a.usedBytes=n,n;if(s+n<=a.usedBytes)return a.contents.set(e.subarray(t,t+n),s),n}if(w.expandFileStorage(a,s+n),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(t,t+n),s);else for(var l=0;l<n;l++)a.contents[s+l]=e[t+l];return a.usedBytes=Math.max(a.usedBytes,s+n),n},llseek(r,e,t){var n=e;if(1===t?n+=r.position:2===t&&i.isFile(r.node.mode)&&(n+=r.node.usedBytes),n<0)throw new i.ErrnoError(28);return n},allocate(r,e,t){w.expandFileStorage(r.node,e+t),r.node.usedBytes=Math.max(r.node.usedBytes,e+t)},mmap(r,e,t,n,s){if(!i.isFile(r.node.mode))throw new i.ErrnoError(43);var o,a,l=r.node.contents;if(2&s||l.buffer!==I.buffer){if((t>0||t+e<l.length)&&(l=l.subarray?l.subarray(t,t+e):Array.prototype.slice.call(l,t,t+e)),a=!0,!(o=vr(e)))throw new i.ErrnoError(48);I.set(l,o)}else a=!1,o=l.byteOffset;return{ptr:o,allocated:a}},msync:(r,e,t,n,s)=>(w.stream_ops.write(r,e,0,n,t,!1),0)}},Rt=d.preloadPlugins||[],je=(r,e)=>{var t=0;return r&&(t|=365),e&&(t|=146),t},i={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(r,e={}){if(!(r=z.resolve(r)))return{path:"",node:null};if((e=Object.assign({follow_mount:!0,recurse_count:0},e)).recurse_count>8)throw new i.ErrnoError(32);for(var n=r.split("/").filter(b=>!!b),s=i.root,o="/",a=0;a<n.length;a++){var l=a===n.length-1;if(l&&e.parent)break;if(s=i.lookupNode(s,n[a]),o=S.join2(o,n[a]),i.isMountpoint(s)&&(!l||l&&e.follow_mount)&&(s=s.mounted.root),!l||e.follow)for(var h=0;i.isLink(s.mode);){var f=i.readlink(o);if(o=z.resolve(S.dirname(o),f),s=i.lookupPath(o,{recurse_count:e.recurse_count+1}).node,h++>40)throw new i.ErrnoError(32)}}return{path:o,node:s}},getPath(r){for(var e;;){if(i.isRoot(r)){var t=r.mount.mountpoint;return e?"/"!==t[t.length-1]?`${t}/${e}`:t+e:t}e=e?`${r.name}/${e}`:r.name,r=r.parent}},hashName(r,e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return(r+t>>>0)%i.nameTable.length},hashAddNode(r){var e=i.hashName(r.parent.id,r.name);r.name_next=i.nameTable[e],i.nameTable[e]=r},hashRemoveNode(r){var e=i.hashName(r.parent.id,r.name);if(i.nameTable[e]===r)i.nameTable[e]=r.name_next;else for(var t=i.nameTable[e];t;){if(t.name_next===r){t.name_next=r.name_next;break}t=t.name_next}},lookupNode(r,e){var t=i.mayLookup(r);if(t)throw new i.ErrnoError(t,r);for(var n=i.hashName(r.id,e),s=i.nameTable[n];s;s=s.name_next)if(s.parent.id===r.id&&s.name===e)return s;return i.lookup(r,e)},createNode(r,e,t,n){var s=new i.FSNode(r,e,t,n);return i.hashAddNode(s),s},destroyNode(r){i.hashRemoveNode(r)},isRoot:r=>r===r.parent,isMountpoint:r=>!!r.mounted,isFile:r=>32768==(61440&r),isDir:r=>16384==(61440&r),isLink:r=>40960==(61440&r),isChrdev:r=>8192==(61440&r),isBlkdev:r=>24576==(61440&r),isFIFO:r=>4096==(61440&r),isSocket:r=>49152==(49152&r),flagsToPermissionString(r){var e=["r","w","rw"][3&r];return 512&r&&(e+="w"),e},nodePermissions:(r,e)=>i.ignorePermissions?0:e.includes("r")&&!(292&r.mode)||e.includes("w")&&!(146&r.mode)||e.includes("x")&&!(73&r.mode)?2:0,mayLookup:r=>i.nodePermissions(r,"x")||(r.node_ops.lookup?0:2),mayCreate(r,e){try{return i.lookupNode(r,e),20}catch{}return i.nodePermissions(r,"wx")},mayDelete(r,e,t){var n;try{n=i.lookupNode(r,e)}catch(o){return o.errno}var s=i.nodePermissions(r,"wx");if(s)return s;if(t){if(!i.isDir(n.mode))return 54;if(i.isRoot(n)||i.getPath(n)===i.cwd())return 10}else if(i.isDir(n.mode))return 31;return 0},mayOpen:(r,e)=>r?i.isLink(r.mode)?32:i.isDir(r.mode)&&("r"!==i.flagsToPermissionString(e)||512&e)?31:i.nodePermissions(r,i.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd(){for(var r=0;r<=i.MAX_OPEN_FDS;r++)if(!i.streams[r])return r;throw new i.ErrnoError(33)},getStreamChecked(r){var e=i.getStream(r);if(!e)throw new i.ErrnoError(8);return e},getStream:r=>i.streams[r],createStream:(r,e=-1)=>(i.FSStream||(i.FSStream=function(){this.shared={}},i.FSStream.prototype={},Object.defineProperties(i.FSStream.prototype,{object:{get(){return this.node},set(t){this.node=t}},isRead:{get(){return 1!=(2097155&this.flags)}},isWrite:{get(){return 0!=(2097155&this.flags)}},isAppend:{get(){return 1024&this.flags}},flags:{get(){return this.shared.flags},set(t){this.shared.flags=t}},position:{get(){return this.shared.position},set(t){this.shared.position=t}}})),r=Object.assign(new i.FSStream,r),-1==e&&(e=i.nextfd()),r.fd=e,i.streams[e]=r,r),closeStream(r){i.streams[r]=null},chrdev_stream_ops:{open(r){var e=i.getDevice(r.node.rdev);r.stream_ops=e.stream_ops,r.stream_ops.open&&r.stream_ops.open(r)},llseek(){throw new i.ErrnoError(70)}},major:r=>r>>8,minor:r=>255&r,makedev:(r,e)=>r<<8|e,registerDevice(r,e){i.devices[r]={stream_ops:e}},getDevice:r=>i.devices[r],getMounts(r){for(var e=[],t=[r];t.length;){var n=t.pop();e.push(n),t.push.apply(t,n.mounts)}return e},syncfs(r,e){"function"==typeof r&&(e=r,r=!1),i.syncFSRequests++,i.syncFSRequests>1&&V(`warning: ${i.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=i.getMounts(i.root.mount),n=0;function s(a){return i.syncFSRequests--,e(a)}function o(a){if(a)return o.errored?void 0:(o.errored=!0,s(a));++n>=t.length&&s(null)}t.forEach(a=>{if(!a.type.syncfs)return o(null);a.type.syncfs(a,r,o)})},mount(r,e,t){var o,n="/"===t,s=!t;if(n&&i.root)throw new i.ErrnoError(10);if(!n&&!s){var a=i.lookupPath(t,{follow_mount:!1});if(t=a.path,i.isMountpoint(o=a.node))throw new i.ErrnoError(10);if(!i.isDir(o.mode))throw new i.ErrnoError(54)}var l={type:r,opts:e,mountpoint:t,mounts:[]},h=r.mount(l);return h.mount=l,l.root=h,n?i.root=h:o&&(o.mounted=l,o.mount&&o.mount.mounts.push(l)),h},unmount(r){var e=i.lookupPath(r,{follow_mount:!1});if(!i.isMountpoint(e.node))throw new i.ErrnoError(28);var t=e.node,n=t.mounted,s=i.getMounts(n);Object.keys(i.nameTable).forEach(a=>{for(var l=i.nameTable[a];l;){var h=l.name_next;s.includes(l.mount)&&i.destroyNode(l),l=h}}),t.mounted=null;var o=t.mount.mounts.indexOf(n);t.mount.mounts.splice(o,1)},lookup:(r,e)=>r.node_ops.lookup(r,e),mknod(r,e,t){var s=i.lookupPath(r,{parent:!0}).node,o=S.basename(r);if(!o||"."===o||".."===o)throw new i.ErrnoError(28);var a=i.mayCreate(s,o);if(a)throw new i.ErrnoError(a);if(!s.node_ops.mknod)throw new i.ErrnoError(63);return s.node_ops.mknod(s,o,e,t)},create:(r,e)=>(e=void 0!==e?e:438,e&=4095,i.mknod(r,e|=32768,0)),mkdir:(r,e)=>(e=void 0!==e?e:511,e&=1023,i.mknod(r,e|=16384,0)),mkdirTree(r,e){for(var t=r.split("/"),n="",s=0;s<t.length;++s)if(t[s]){n+="/"+t[s];try{i.mkdir(n,e)}catch(o){if(20!=o.errno)throw o}}},mkdev:(r,e,t)=>(typeof t>"u"&&(t=e,e=438),i.mknod(r,e|=8192,t)),symlink(r,e){if(!z.resolve(r))throw new i.ErrnoError(44);var n=i.lookupPath(e,{parent:!0}).node;if(!n)throw new i.ErrnoError(44);var s=S.basename(e),o=i.mayCreate(n,s);if(o)throw new i.ErrnoError(o);if(!n.node_ops.symlink)throw new i.ErrnoError(63);return n.node_ops.symlink(n,s,r)},rename(r,e){var l,h,t=S.dirname(r),n=S.dirname(e),s=S.basename(r),o=S.basename(e);if(l=i.lookupPath(r,{parent:!0}).node,h=i.lookupPath(e,{parent:!0}).node,!l||!h)throw new i.ErrnoError(44);if(l.mount!==h.mount)throw new i.ErrnoError(75);var b,f=i.lookupNode(l,s),_=z.relative(r,n);if("."!==_.charAt(0))throw new i.ErrnoError(28);if("."!==(_=z.relative(e,t)).charAt(0))throw new i.ErrnoError(55);try{b=i.lookupNode(h,o)}catch{}if(f!==b){var m=i.isDir(f.mode),p=i.mayDelete(l,s,m);if(p)throw new i.ErrnoError(p);if(p=b?i.mayDelete(h,o,m):i.mayCreate(h,o))throw new i.ErrnoError(p);if(!l.node_ops.rename)throw new i.ErrnoError(63);if(i.isMountpoint(f)||b&&i.isMountpoint(b))throw new i.ErrnoError(10);if(h!==l&&(p=i.nodePermissions(l,"w")))throw new i.ErrnoError(p);i.hashRemoveNode(f);try{l.node_ops.rename(f,h,o)}catch(k){throw k}finally{i.hashAddNode(f)}}},rmdir(r){var t=i.lookupPath(r,{parent:!0}).node,n=S.basename(r),s=i.lookupNode(t,n),o=i.mayDelete(t,n,!0);if(o)throw new i.ErrnoError(o);if(!t.node_ops.rmdir)throw new i.ErrnoError(63);if(i.isMountpoint(s))throw new i.ErrnoError(10);t.node_ops.rmdir(t,n),i.destroyNode(s)},readdir(r){var t=i.lookupPath(r,{follow:!0}).node;if(!t.node_ops.readdir)throw new i.ErrnoError(54);return t.node_ops.readdir(t)},unlink(r){var t=i.lookupPath(r,{parent:!0}).node;if(!t)throw new i.ErrnoError(44);var n=S.basename(r),s=i.lookupNode(t,n),o=i.mayDelete(t,n,!1);if(o)throw new i.ErrnoError(o);if(!t.node_ops.unlink)throw new i.ErrnoError(63);if(i.isMountpoint(s))throw new i.ErrnoError(10);t.node_ops.unlink(t,n),i.destroyNode(s)},readlink(r){var t=i.lookupPath(r).node;if(!t)throw new i.ErrnoError(44);if(!t.node_ops.readlink)throw new i.ErrnoError(28);return z.resolve(i.getPath(t.parent),t.node_ops.readlink(t))},stat(r,e){var n=i.lookupPath(r,{follow:!e}).node;if(!n)throw new i.ErrnoError(44);if(!n.node_ops.getattr)throw new i.ErrnoError(63);return n.node_ops.getattr(n)},lstat:r=>i.stat(r,!0),chmod(r,e,t){var n;if(!(n="string"==typeof r?i.lookupPath(r,{follow:!t}).node:r).node_ops.setattr)throw new i.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&e|-4096&n.mode,timestamp:Date.now()})},lchmod(r,e){i.chmod(r,e,!0)},fchmod(r,e){var t=i.getStreamChecked(r);i.chmod(t.node,e)},chown(r,e,t,n){var s;if(!(s="string"==typeof r?i.lookupPath(r,{follow:!n}).node:r).node_ops.setattr)throw new i.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown(r,e,t){i.chown(r,e,t,!0)},fchown(r,e,t){var n=i.getStreamChecked(r);i.chown(n.node,e,t)},truncate(r,e){if(e<0)throw new i.ErrnoError(28);var t;if(!(t="string"==typeof r?i.lookupPath(r,{follow:!0}).node:r).node_ops.setattr)throw new i.ErrnoError(63);if(i.isDir(t.mode))throw new i.ErrnoError(31);if(!i.isFile(t.mode))throw new i.ErrnoError(28);var s=i.nodePermissions(t,"w");if(s)throw new i.ErrnoError(s);t.node_ops.setattr(t,{size:e,timestamp:Date.now()})},ftruncate(r,e){var t=i.getStreamChecked(r);if(!(2097155&t.flags))throw new i.ErrnoError(28);i.truncate(t.node,e)},utime(r,e,t){var s=i.lookupPath(r,{follow:!0}).node;s.node_ops.setattr(s,{timestamp:Math.max(e,t)})},open(r,e,t){if(""===r)throw new i.ErrnoError(44);var n;if(e="string"==typeof e?(r=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[r];if(typeof t>"u")throw new Error(`Unknown file open mode: ${r}`);return t})(e):e,t=typeof t>"u"?438:t,t=64&e?4095&t|32768:0,"object"==typeof r)n=r;else{r=S.normalize(r);try{n=i.lookupPath(r,{follow:!(131072&e)}).node}catch{}}var o=!1;if(64&e)if(n){if(128&e)throw new i.ErrnoError(20)}else n=i.mknod(r,t,0),o=!0;if(!n)throw new i.ErrnoError(44);if(i.isChrdev(n.mode)&&(e&=-513),65536&e&&!i.isDir(n.mode))throw new i.ErrnoError(54);if(!o){var a=i.mayOpen(n,e);if(a)throw new i.ErrnoError(a)}512&e&&!o&&i.truncate(n,0),e&=-131713;var l=i.createStream({node:n,path:i.getPath(n),flags:e,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return l.stream_ops.open&&l.stream_ops.open(l),d.logReadFiles&&!(1&e)&&(i.readFiles||(i.readFiles={}),r in i.readFiles||(i.readFiles[r]=1)),l},close(r){if(i.isClosed(r))throw new i.ErrnoError(8);r.getdents&&(r.getdents=null);try{r.stream_ops.close&&r.stream_ops.close(r)}catch(e){throw e}finally{i.closeStream(r.fd)}r.fd=null},isClosed:r=>null===r.fd,llseek(r,e,t){if(i.isClosed(r))throw new i.ErrnoError(8);if(!r.seekable||!r.stream_ops.llseek)throw new i.ErrnoError(70);if(0!=t&&1!=t&&2!=t)throw new i.ErrnoError(28);return r.position=r.stream_ops.llseek(r,e,t),r.ungotten=[],r.position},read(r,e,t,n,s){if(n<0||s<0)throw new i.ErrnoError(28);if(i.isClosed(r))throw new i.ErrnoError(8);if(1==(2097155&r.flags))throw new i.ErrnoError(8);if(i.isDir(r.node.mode))throw new i.ErrnoError(31);if(!r.stream_ops.read)throw new i.ErrnoError(28);var o=typeof s<"u";if(o){if(!r.seekable)throw new i.ErrnoError(70)}else s=r.position;var a=r.stream_ops.read(r,e,t,n,s);return o||(r.position+=a),a},write(r,e,t,n,s,o){if(n<0||s<0)throw new i.ErrnoError(28);if(i.isClosed(r))throw new i.ErrnoError(8);if(!(2097155&r.flags))throw new i.ErrnoError(8);if(i.isDir(r.node.mode))throw new i.ErrnoError(31);if(!r.stream_ops.write)throw new i.ErrnoError(28);r.seekable&&1024&r.flags&&i.llseek(r,0,2);var a=typeof s<"u";if(a){if(!r.seekable)throw new i.ErrnoError(70)}else s=r.position;var l=r.stream_ops.write(r,e,t,n,s,o);return a||(r.position+=l),l},allocate(r,e,t){if(i.isClosed(r))throw new i.ErrnoError(8);if(e<0||t<=0)throw new i.ErrnoError(28);if(!(2097155&r.flags))throw new i.ErrnoError(8);if(!i.isFile(r.node.mode)&&!i.isDir(r.node.mode))throw new i.ErrnoError(43);if(!r.stream_ops.allocate)throw new i.ErrnoError(138);r.stream_ops.allocate(r,e,t)},mmap(r,e,t,n,s){if(2&n&&!(2&s)&&2!=(2097155&r.flags))throw new i.ErrnoError(2);if(1==(2097155&r.flags))throw new i.ErrnoError(2);if(!r.stream_ops.mmap)throw new i.ErrnoError(43);return r.stream_ops.mmap(r,e,t,n,s)},msync:(r,e,t,n,s)=>r.stream_ops.msync?r.stream_ops.msync(r,e,t,n,s):0,munmap:r=>0,ioctl(r,e,t){if(!r.stream_ops.ioctl)throw new i.ErrnoError(59);return r.stream_ops.ioctl(r,e,t)},readFile(r,e={}){if(e.flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error(`Invalid encoding type "${e.encoding}"`);var t,n=i.open(r,e.flags),o=i.stat(r).size,a=new Uint8Array(o);return i.read(n,a,0,o,0),"utf8"===e.encoding?t=$(a,0):"binary"===e.encoding&&(t=a),i.close(n),t},writeFile(r,e,t={}){t.flags=t.flags||577;var n=i.open(r,t.flags,t.mode);if("string"==typeof e){var s=new Uint8Array(ke(e)+1),o=ae(e,s,0,s.length);i.write(n,s,0,o,void 0,t.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");i.write(n,e,0,e.byteLength,void 0,t.canOwn)}i.close(n)},cwd:()=>i.currentPath,chdir(r){var e=i.lookupPath(r,{follow:!0});if(null===e.node)throw new i.ErrnoError(44);if(!i.isDir(e.node.mode))throw new i.ErrnoError(54);var t=i.nodePermissions(e.node,"x");if(t)throw new i.ErrnoError(t);i.currentPath=e.path},createDefaultDirectories(){i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user")},createDefaultDevices(){i.mkdir("/dev"),i.registerDevice(i.makedev(1,3),{read:()=>0,write:(n,s,o,a,l)=>a}),i.mkdev("/dev/null",i.makedev(1,3)),G.register(i.makedev(5,0),G.default_tty_ops),G.register(i.makedev(6,0),G.default_tty1_ops),i.mkdev("/dev/tty",i.makedev(5,0)),i.mkdev("/dev/tty1",i.makedev(6,0));var r=new Uint8Array(1024),e=0,t=()=>(0===e&&(e=pr(r).byteLength),r[--e]);i.createDevice("/dev","random",t),i.createDevice("/dev","urandom",t),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")},createSpecialDirectories(){i.mkdir("/proc");var r=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.mount({mount(){var e=i.createNode(r,"fd",16895,73);return e.node_ops={lookup(t,n){var o=i.getStreamChecked(+n),a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return a.parent=a,a}},e}},{},"/proc/self/fd")},createStandardStreams(){d.stdin?i.createDevice("/dev","stdin",d.stdin):i.symlink("/dev/tty","/dev/stdin"),d.stdout?i.createDevice("/dev","stdout",null,d.stdout):i.symlink("/dev/tty","/dev/stdout"),d.stderr?i.createDevice("/dev","stderr",null,d.stderr):i.symlink("/dev/tty1","/dev/stderr"),i.open("/dev/stdin",0),i.open("/dev/stdout",1),i.open("/dev/stderr",1)},ensureErrnoError(){i.ErrnoError||(i.ErrnoError=function(e,t){this.name="ErrnoError",this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(e),this.message="FS error"},i.ErrnoError.prototype=new Error,i.ErrnoError.prototype.constructor=i.ErrnoError,[44].forEach(r=>{i.genericErrors[r]=new i.ErrnoError(r),i.genericErrors[r].stack="<generic error, no stack>"}))},staticInit(){i.ensureErrnoError(),i.nameTable=new Array(4096),i.mount(w,{},"/"),i.createDefaultDirectories(),i.createDefaultDevices(),i.createSpecialDirectories(),i.filesystems={MEMFS:w}},init(r,e,t){i.init.initialized=!0,i.ensureErrnoError(),d.stdin=r||d.stdin,d.stdout=e||d.stdout,d.stderr=t||d.stderr,i.createStandardStreams()},quit(){i.init.initialized=!1;for(var r=0;r<i.streams.length;r++){var e=i.streams[r];e&&i.close(e)}},findObject(r,e){var t=i.analyzePath(r,e);return t.exists?t.object:null},analyzePath(r,e){try{r=(t=i.lookupPath(r,{follow:!e})).path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=i.lookupPath(r,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=S.basename(r),t=i.lookupPath(r,{follow:!e}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot="/"===t.path}catch(s){n.error=s.errno}return n},createPath(r,e,t,n){r="string"==typeof r?r:i.getPath(r);for(var s=e.split("/").reverse();s.length;){var o=s.pop();if(o){var a=S.join2(r,o);try{i.mkdir(a)}catch{}r=a}}return a},createFile(r,e,t,n,s){var o=S.join2("string"==typeof r?r:i.getPath(r),e),a=je(n,s);return i.create(o,a)},createDataFile(r,e,t,n,s,o){var a=e;r&&(r="string"==typeof r?r:i.getPath(r),a=e?S.join2(r,e):r);var l=je(n,s),h=i.create(a,l);if(t){if("string"==typeof t){for(var f=new Array(t.length),_=0,b=t.length;_<b;++_)f[_]=t.charCodeAt(_);t=f}i.chmod(h,146|l);var m=i.open(h,577);i.write(m,t,0,t.length,0,o),i.close(m),i.chmod(h,l)}return h},createDevice(r,e,t,n){var s=S.join2("string"==typeof r?r:i.getPath(r),e),o=je(!!t,!!n);i.createDevice.major||(i.createDevice.major=64);var a=i.makedev(i.createDevice.major++,0);return i.registerDevice(a,{open(l){l.seekable=!1},close(l){n&&n.buffer&&n.buffer.length&&n(10)},read(l,h,f,_,b){for(var m=0,p=0;p<_;p++){var k;try{k=t()}catch{throw new i.ErrnoError(29)}if(void 0===k&&0===m)throw new i.ErrnoError(6);if(null==k)break;m++,h[f+p]=k}return m&&(l.node.timestamp=Date.now()),m},write(l,h,f,_,b){for(var m=0;m<_;m++)try{n(h[f+m])}catch{throw new i.ErrnoError(29)}return _&&(l.node.timestamp=Date.now()),m}}),i.mkdev(s,o,a)},forceLoadFile(r){if(r.isDevice||r.isFolder||r.link||r.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!te)throw new Error("Cannot load without read() or XMLHttpRequest.");try{r.contents=Se(te(r.url),!0),r.usedBytes=r.contents.length}catch{throw new i.ErrnoError(29)}},createLazyFile(r,e,t,n,s){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(p){if(!(p>this.length-1||p<0)){var k=p%this.chunkSize;return this.getter(p/this.chunkSize|0)[k]}},o.prototype.setDataGetter=function(p){this.getter=p},o.prototype.cacheLength=function(){var p=new XMLHttpRequest;if(p.open("HEAD",t,!1),p.send(null),!(p.status>=200&&p.status<300||304===p.status))throw new Error("Couldn't load "+t+". Status: "+p.status);var F,k=Number(p.getResponseHeader("Content-length")),O=(F=p.getResponseHeader("Accept-Ranges"))&&"bytes"===F,x=(F=p.getResponseHeader("Content-Encoding"))&&"gzip"===F,c=1048576;O||(c=k);var M=this;M.setDataGetter(R=>{var U=R*c,A=(R+1)*c-1;if(A=Math.min(A,k-1),typeof M.chunks[R]>"u"&&(M.chunks[R]=((R,U)=>{if(R>U)throw new Error("invalid range ("+R+", "+U+") or no bytes requested!");if(U>k-1)throw new Error("only "+k+" bytes available! programmer error!");var A=new XMLHttpRequest;if(A.open("GET",t,!1),k!==c&&A.setRequestHeader("Range","bytes="+R+"-"+U),A.responseType="arraybuffer",A.overrideMimeType&&A.overrideMimeType("text/plain; charset=x-user-defined"),A.send(null),!(A.status>=200&&A.status<300||304===A.status))throw new Error("Couldn't load "+t+". Status: "+A.status);return void 0!==A.response?new Uint8Array(A.response||[]):Se(A.responseText||"",!0)})(U,A)),typeof M.chunks[R]>"u")throw new Error("doXHR failed!");return M.chunks[R]}),(x||!k)&&(c=k=1,k=this.getter(0).length,c=k,He("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=k,this._chunkSize=c,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!Z)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var l={isDevice:!1,contents:a}}else l={isDevice:!1,url:t};var h=i.createFile(r,e,l,n,s);l.contents?h.contents=l.contents:l.url&&(h.contents=null,h.url=l.url),Object.defineProperties(h,{usedBytes:{get:function(){return this.contents.length}}});var f={};function b(m,p,k,F,O){var x=m.node.contents;if(O>=x.length)return 0;var c=Math.min(x.length-O,F);if(x.slice)for(var v=0;v<c;v++)p[k+v]=x[O+v];else for(v=0;v<c;v++)p[k+v]=x.get(O+v);return c}return Object.keys(h.stream_ops).forEach(m=>{var p=h.stream_ops[m];f[m]=function(){return i.forceLoadFile(h),p.apply(null,arguments)}}),f.read=(m,p,k,F,O)=>(i.forceLoadFile(h),b(m,p,k,F,O)),f.mmap=(m,p,k,F,O)=>{i.forceLoadFile(h);var x=vr(p);if(!x)throw new i.ErrnoError(48);return b(m,I,x,p,k),{ptr:x,allocated:!0}},h.stream_ops=f,h}},E={DEFAULT_POLLMASK:5,calculateAt(r,e,t){if(S.isAbs(e))return e;var n;if(n=-100===r?i.cwd():E.getStreamFromFD(r).path,0==e.length){if(!t)throw new i.ErrnoError(44);return n}return S.join2(n,e)},doStat(r,e,t){try{var n=r(e)}catch(l){if(l&&l.node&&S.normalize(e)!==S.normalize(i.getPath(l.node)))return-54;throw l}y[t>>2]=n.dev,y[t+4>>2]=n.mode,P[t+8>>2]=n.nlink,y[t+12>>2]=n.uid,y[t+16>>2]=n.gid,y[t+20>>2]=n.rdev,T=[n.size>>>0,(g=n.size,+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[t+24>>2]=T[0],y[t+28>>2]=T[1],y[t+32>>2]=4096,y[t+36>>2]=n.blocks;var s=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return T=[Math.floor(s/1e3)>>>0,(g=Math.floor(s/1e3),+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[t+40>>2]=T[0],y[t+44>>2]=T[1],P[t+48>>2]=s%1e3*1e3,T=[Math.floor(o/1e3)>>>0,(g=Math.floor(o/1e3),+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[t+56>>2]=T[0],y[t+60>>2]=T[1],P[t+64>>2]=o%1e3*1e3,T=[Math.floor(a/1e3)>>>0,(g=Math.floor(a/1e3),+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[t+72>>2]=T[0],y[t+76>>2]=T[1],P[t+80>>2]=a%1e3*1e3,T=[n.ino>>>0,(g=n.ino,+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[t+88>>2]=T[0],y[t+92>>2]=T[1],0},doMsync(r,e,t,n,s){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);if(2&n)return 0;var o=K.slice(r,r+t);i.msync(e,o,s,t,n)},varargs:void 0,get(){var r=y[+E.varargs>>2];return E.varargs+=4,r},getp:()=>E.get(),getStr:r=>X(r),getStreamFromFD:r=>i.getStreamChecked(r)},qe=(r,e,t)=>ae(r,K,e,t),Ve=(r,e)=>e+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*e:NaN;mr=()=>performance.now();var Vt=r=>{var t=(r-ge.buffer.byteLength+65535)/65536;try{return ge.grow(t),sr(),1}catch{}},$e={},le=()=>{if(!le.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:fe||"./this.program"};for(var t in $e)void 0===$e[t]?delete e[t]:e[t]=$e[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);le.strings=n}return le.strings},gr=(r,e)=>{ye=r,(r=>{ye=r,pt||(d.onExit&&d.onExit(r),Ue=!0),pe(r,new Ee(r))})(r)},rn=gr,Pe=r=>r%4==0&&(r%100!=0||r%400==0),yr=[31,29,31,30,31,30,31,31,30,31,30,31],wr=[31,28,31,30,31,30,31,31,30,31,30,31],_r=function(r,e,t,n){r||(r=this),this.parent=r,this.mount=r.mount,this.mounted=null,this.id=i.nextInode++,this.name=e,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n};Object.defineProperties(_r.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(r){r?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(r){r?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return i.isDir(this.mode)}},isDevice:{get:function(){return i.isChrdev(this.mode)}}}),i.FSNode=_r,i.createPreloadedFile=(r,e,t,n,s,o,a,l,h,f)=>{var _=e?z.resolve(S.join2(r,e)):r;function m(p){function k(F){f&&f(),l||((r,e,t,n,s,o)=>{i.createDataFile(r,e,t,n,s,o)})(r,e,F,n,s,h),o&&o(),we()}((r,e,t,n)=>{typeof Browser<"u"&&Browser.init();var s=!1;return Rt.forEach(o=>{s||o.canHandle(e)&&(o.handle(r,e,t,n),s=!0)}),s})(p,_,k,()=>{a&&a(),we()})||k(p)}ze(),"string"==typeof t?((r,e,t,n)=>{var s=n?"":`al ${r}`;ne(r,o=>{(function Kr(r,e){r||Q(e)})(o,`Loading data file "${r}" failed (no arrayBuffer).`),e(new Uint8Array(o)),s&&we()},o=>{if(!t)throw`Loading data file "${r}" failed.`;t()}),s&&ze()})(t,p=>m(p),a):m(t)},i.staticInit();var Ae,mn={a:(r,e,t,n)=>{Q(`Assertion failed: ${X(r)}, at: `+[e?X(e):"unknown filename",t,n?X(n):"unknown function"])},b:(r,e,t)=>{throw new mt(r).init(e,t),r},d:function Ct(r,e,t){E.varargs=t;try{var n=E.getStreamFromFD(r);switch(e){case 0:if((s=E.get())<0)return-28;for(;i.streams[s];)s++;return i.createStream(n,s).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:var s=E.get();return n.flags|=s,0;case 5:return s=E.getp(),se[s+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return y[br()>>2]=28,-1}}catch(l){if(typeof i>"u"||"ErrnoError"!==l.name)throw l;return-l.errno}},y:function It(r,e){try{var t=E.getStreamFromFD(r);return E.doStat(i.stat,t.path,e)}catch(n){if(typeof i>"u"||"ErrnoError"!==n.name)throw n;return-n.errno}},u:function Ft(r,e){try{if(0===e)return-28;var t=i.cwd(),n=ke(t)+1;return e<n?-68:(qe(t,r,e),n)}catch(s){if(typeof i>"u"||"ErrnoError"!==s.name)throw s;return-s.errno}},r:function Lt(r,e,t){try{var n=E.getStreamFromFD(r);n.getdents||(n.getdents=i.readdir(n.path));for(var s=280,o=0,a=i.llseek(n,0,1),l=Math.floor(a/s);l<n.getdents.length&&o+s<=t;){var h,f,_=n.getdents[l];if("."===_)h=n.node.id,f=4;else if(".."===_)h=i.lookupPath(n.path,{parent:!0}).node.id,f=4;else{var m=i.lookupNode(n.node,_);h=m.id,f=i.isChrdev(m.mode)?2:i.isDir(m.mode)?4:i.isLink(m.mode)?10:8}T=[h>>>0,(g=h,+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[e+o>>2]=T[0],y[e+o+4>>2]=T[1],T=[(l+1)*s>>>0,(g=(l+1)*s,+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[e+o+8>>2]=T[0],y[e+o+12>>2]=T[1],se[e+o+16>>1]=280,I[e+o+18>>0]=f,qe(_,e+o+19,256),o+=s,l+=1}return i.llseek(n,l*s,0),o}catch(p){if(typeof i>"u"||"ErrnoError"!==p.name)throw p;return-p.errno}},A:function Dt(r,e,t){E.varargs=t;try{var n=E.getStreamFromFD(r);switch(e){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return n.tty?0:-59;case 21505:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var s=n.tty.ops.ioctl_tcgets(n),o=E.getp();y[o>>2]=s.c_iflag||0,y[o+4>>2]=s.c_oflag||0,y[o+8>>2]=s.c_cflag||0,y[o+12>>2]=s.c_lflag||0;for(var a=0;a<32;a++)I[o+a+17>>0]=s.c_cc[a]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){o=E.getp();var l=y[o>>2],h=y[o+4>>2],f=y[o+8>>2],_=y[o+12>>2],b=[];for(a=0;a<32;a++)b.push(I[o+a+17>>0]);return n.tty.ops.ioctl_tcsets(n.tty,e,{c_iflag:l,c_oflag:h,c_cflag:f,c_lflag:_,c_cc:b})}return 0;case 21519:return n.tty?(o=E.getp(),y[o>>2]=0,0):-59;case 21520:return n.tty?-28:-59;case 21531:return o=E.getp(),i.ioctl(n,e,o);case 21523:if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var m=n.tty.ops.ioctl_tiocgwinsz(n.tty);o=E.getp(),se[o>>1]=m[0],se[o+2>>1]=m[1]}return 0;default:return-28}}catch(p){if(typeof i>"u"||"ErrnoError"!==p.name)throw p;return-p.errno}},v:function xt(r,e){try{return r=E.getStr(r),E.doStat(i.lstat,r,e)}catch(t){if(typeof i>"u"||"ErrnoError"!==t.name)throw t;return-t.errno}},w:function Nt(r,e,t,n){try{e=E.getStr(e);var s=256&n,o=4096&n;return n&=-6401,e=E.calculateAt(r,e,o),E.doStat(s?i.lstat:i.stat,e,t)}catch(a){if(typeof i>"u"||"ErrnoError"!==a.name)throw a;return-a.errno}},h:function Bt(r,e,t,n){E.varargs=n;try{e=E.getStr(e),e=E.calculateAt(r,e);var s=n?E.get():0;return i.open(e,t,s).fd}catch(o){if(typeof i>"u"||"ErrnoError"!==o.name)throw o;return-o.errno}},x:function Ot(r,e){try{return r=E.getStr(r),E.doStat(i.stat,r,e)}catch(t){if(typeof i>"u"||"ErrnoError"!==t.name)throw t;return-t.errno}},k:()=>!0,n:function Yt(r,e,t,n,s,o,a,l){var h=Ve(s,o);try{if(isNaN(h))return 61;var f=E.getStreamFromFD(n),_=i.mmap(f,r,h,e,t),b=_.ptr;return y[a>>2]=_.allocated,P[l>>2]=b,0}catch(m){if(typeof i>"u"||"ErrnoError"!==m.name)throw m;return-m.errno}},o:function zt(r,e,t,n,s,o,a){var l=Ve(o,a);try{if(isNaN(l))return 61;var h=E.getStreamFromFD(s);2&t&&E.doMsync(r,h,e,n,l),i.munmap(h)}catch(f){if(typeof i>"u"||"ErrnoError"!==f.name)throw f;return-f.errno}},f:()=>{Q("")},j:mr,l:(r,e,t)=>K.copyWithin(r,e,e+t),q:r=>{var h,e=K.length,t=2147483648;if((r>>>=0)>t)return!1;for(var s=1;s<=4;s*=2){var o=e*(1+.2/s);o=Math.min(o,r+100663296);var a=Math.min(t,(h=Math.max(r,o))+(65536-h%65536)%65536);if(Vt(a))return!0}return!1},s:(r,e)=>{var t=0;return le().forEach((n,s)=>{var o=e+t;P[r+4*s>>2]=o,((r,e)=>{for(var t=0;t<r.length;++t)I[e++>>0]=r.charCodeAt(t);I[e>>0]=0})(n,o),t+=n.length+1}),0},t:(r,e)=>{var t=le();P[r>>2]=t.length;var n=0;return t.forEach(s=>n+=s.length+1),P[e>>2]=n,0},e:rn,g:function tn(r){try{var e=E.getStreamFromFD(r);return i.close(e),0}catch(t){if(typeof i>"u"||"ErrnoError"!==t.name)throw t;return t.errno}},z:function sn(r,e,t,n){try{var o=((r,e,t,n)=>{for(var s=0,o=0;o<t;o++){var a=P[e>>2],l=P[e+4>>2];e+=8;var h=i.read(r,I,a,l,n);if(h<0)return-1;if(s+=h,h<l)break;typeof n<"u"&&(n+=h)}return s})(E.getStreamFromFD(r),e,t);return P[n>>2]=o,0}catch(a){if(typeof i>"u"||"ErrnoError"!==a.name)throw a;return a.errno}},p:function on(r,e,t,n,s){var o=Ve(e,t);try{if(isNaN(o))return 61;var a=E.getStreamFromFD(r);return i.llseek(a,o,n),T=[a.position>>>0,(g=a.position,+Math.abs(g)>=1?g>0?+Math.floor(g/4294967296)>>>0:~~+Math.ceil((g-+(~~g>>>0))/4294967296)>>>0:0)],y[s>>2]=T[0],y[s+4>>2]=T[1],a.getdents&&0===o&&0===n&&(a.getdents=null),0}catch(l){if(typeof i>"u"||"ErrnoError"!==l.name)throw l;return l.errno}},i:function ln(r,e,t,n){try{var o=((r,e,t,n)=>{for(var s=0,o=0;o<t;o++){var a=P[e>>2],l=P[e+4>>2];e+=8;var h=i.write(r,I,a,l,n);if(h<0)return-1;s+=h,typeof n<"u"&&(n+=h)}return s})(E.getStreamFromFD(r),e,t);return P[n>>2]=o,0}catch(a){if(typeof i>"u"||"ErrnoError"!==a.name)throw a;return a.errno}},m:function ft(r,e,t,n){!function Xr(r,e){he&&postMessage(W.builder().setWorkerId(he.workerId).setMessage(Fe.builder().setResult(r,e)))}(X(r,e),X(t,n))},c:(r,e,t,n,s)=>((r,e,t,n)=>{var s=P[n+40>>2],o={tm_sec:y[n>>2],tm_min:y[n+4>>2],tm_hour:y[n+8>>2],tm_mday:y[n+12>>2],tm_mon:y[n+16>>2],tm_year:y[n+20>>2],tm_wday:y[n+24>>2],tm_yday:y[n+28>>2],tm_isdst:y[n+32>>2],tm_gmtoff:y[n+36>>2],tm_zone:s?X(s):""},a=X(t),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var h in l)a=a.replace(new RegExp(h,"g"),l[h]);var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_=["January","February","March","April","May","June","July","August","September","October","November","December"];function b(c,v,M){for(var R="number"==typeof c?c.toString():c||"";R.length<v;)R=M[0]+R;return R}function m(c,v){return b(c,v,"0")}function p(c,v){function M(U){return U<0?-1:U>0?1:0}var R;return 0===(R=M(c.getFullYear()-v.getFullYear()))&&0===(R=M(c.getMonth()-v.getMonth()))&&(R=M(c.getDate()-v.getDate())),R}function k(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function F(c){var v=((r,e)=>{for(var t=new Date(r.getTime());e>0;){var n=Pe(t.getFullYear()),s=t.getMonth(),o=(n?yr:wr)[s];if(!(e>o-t.getDate()))return t.setDate(t.getDate()+e),t;e-=o-t.getDate()+1,t.setDate(1),s<11?t.setMonth(s+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return t})(new Date(c.tm_year+1900,0,1),c.tm_yday),M=new Date(v.getFullYear(),0,4),R=new Date(v.getFullYear()+1,0,4),U=k(M),A=k(R);return p(U,v)<=0?p(A,v)<=0?v.getFullYear()+1:v.getFullYear():v.getFullYear()-1}var O={"%a":c=>f[c.tm_wday].substring(0,3),"%A":c=>f[c.tm_wday],"%b":c=>_[c.tm_mon].substring(0,3),"%B":c=>_[c.tm_mon],"%C":c=>m((c.tm_year+1900)/100|0,2),"%d":c=>m(c.tm_mday,2),"%e":c=>b(c.tm_mday,2," "),"%g":c=>F(c).toString().substring(2),"%G":c=>F(c),"%H":c=>m(c.tm_hour,2),"%I":c=>{var v=c.tm_hour;return 0==v?v=12:v>12&&(v-=12),m(v,2)},"%j":c=>m(c.tm_mday+((r,e)=>{for(var t=0,n=0;n<=e;t+=r[n++]);return t})(Pe(c.tm_year+1900)?yr:wr,c.tm_mon-1),3),"%m":c=>m(c.tm_mon+1,2),"%M":c=>m(c.tm_min,2),"%n":()=>"\n","%p":c=>c.tm_hour>=0&&c.tm_hour<12?"AM":"PM","%S":c=>m(c.tm_sec,2),"%t":()=>"\t","%u":c=>c.tm_wday||7,"%U":c=>m(Math.floor((c.tm_yday+7-c.tm_wday)/7),2),"%V":c=>{var v=Math.floor((c.tm_yday+7-(c.tm_wday+6)%7)/7);if((c.tm_wday+371-c.tm_yday-2)%7<=2&&v++,v){if(53==v){var R=(c.tm_wday+371-c.tm_yday)%7;4!=R&&(3!=R||!Pe(c.tm_year))&&(v=1)}}else{v=52;var M=(c.tm_wday+7-c.tm_yday-1)%7;(4==M||5==M&&Pe(c.tm_year%400-1))&&v++}return m(v,2)},"%w":c=>c.tm_wday,"%W":c=>m(Math.floor((c.tm_yday+7-(c.tm_wday+6)%7)/7),2),"%y":c=>(c.tm_year+1900).toString().substring(2),"%Y":c=>c.tm_year+1900,"%z":c=>{var v=c.tm_gmtoff;return(v>=0?"+":"-")+("0000"+(v=(v=Math.abs(v)/60)/60*100+v%60)).slice(-4)},"%Z":c=>c.tm_zone,"%%":()=>"%"};for(var h in a=a.replace(/%%/g,"\0\0"),O)a.includes(h)&&(a=a.replace(new RegExp(h,"g"),O[h](o)));var x=Se(a=a.replace(/\0\0/g,"%"),!1);return x.length>e?0:(((r,e)=>{I.set(r,e)})(x,r),x.length-1)})(r,e,t,n)},D=function ct(){var r={a:mn};function e(n,s){return ge=(D=n.exports).B,sr(),function at(r){ar.unshift(r)}(D.C),we(),D}if(ze(),d.instantiateWasm)try{return d.instantiateWasm(r,e)}catch(n){return V(`Module.instantiateWasm callback failed with error: ${n}`),!1}return function ht(r,e,t,n){r||"function"!=typeof WebAssembly.instantiateStreaming||ur(e)||_e(e)||ve||"function"!=typeof fetch?hr(e,t,n):fetch(e,{credentials:"same-origin"}).then(s=>WebAssembly.instantiateStreaming(s,t).then(n,function(a){return V(`wasm streaming compile failed: ${a}`),V("falling back to ArrayBuffer instantiation"),hr(e,t,n)}))}(ie,ee,r,function t(n){e(n.instance)}),{}}(),Er=(d._free=r=>(d._free=D.E)(r),d._ChessSetup=(r,e)=>(d._ChessSetup=D.F)(r,e),d._ChessCalculate=(r,e,t)=>(d._ChessCalculate=D.G)(r,e,t),d._main=(r,e)=>(Er=d._main=D.H)(r,e)),br=(d._Setup=(r,e)=>(d._Setup=D.I)(r,e),d._Calculate=(r,e,t)=>(d._Calculate=D.J)(r,e,t),d._malloc=r=>(d._malloc=D.K)(r),()=>(br=D.L)()),kr=(r,e)=>(kr=D.M)(r,e),Xe=r=>(Xe=D.N)(r),Sr=r=>(Sr=D.O)(r);function Pr(r=Ne){function e(){Ae||(Ae=!0,d.calledRun=!0,!Ue&&(function nt(){!d.noFSInit&&!i.init.initialized&&i.init(),i.ignorePermissions=!1,G.init(),be(ar)}(),function it(){be(et)}(),d.onRuntimeInitialized&&d.onRuntimeInitialized(),Rr&&function Sn(r=[]){var e=Er;r.unshift(fe);var t=r.length,n=Xe(4*(t+1)),s=n;r.forEach(a=>{P[s>>2]=(r=>{var e=ke(r)+1,t=Xe(e);return qe(r,t,e),t})(a),s+=4}),P[s>>2]=0;try{var o=e(t,n);return gr(o),o}catch(a){return(r=>{if(r instanceof Ee||"unwind"==r)return ye;pe(1,r)})(a)}}(r),function st(){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)r=d.postRun.shift(),lr.unshift(r);var r;be(lr)}()))}J>0||(function tt(){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)r=d.preRun.shift(),or.unshift(r);var r;be(or)}(),J>0)||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),e()},1)):e())}if(d.___start_em_js=264140,d.___stop_em_js=264275,oe=function r(){Ae||Pr(),Ae||(oe=r)},d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();var Rr=!0;d.noInitialRun&&(Rr=!1),Pr()},827:()=>{},652:()=>{},832:()=>{}},Ge={};function Me(L){var Ce=Ge[L];if(void 0!==Ce)return Ce.exports;var Y=Ge[L]={id:L,loaded:!1,exports:{}};return Tr[L](Y,Y.exports,Me),Y.loaded=!0,Y.exports}Me.hmd=L=>((L=Object.create(L)).children||(L.children=[]),Object.defineProperty(L,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+L.id)}}),L),Me(104)})();