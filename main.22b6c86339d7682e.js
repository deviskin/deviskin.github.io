var ant=Object.defineProperty,lnt=Object.defineProperties,cnt=Object.getOwnPropertyDescriptors,_le=Object.getOwnPropertySymbols,unt=Object.prototype.hasOwnProperty,hnt=Object.prototype.propertyIsEnumerable,yle=(Jo,Me,wt)=>Me in Jo?ant(Jo,Me,{enumerable:!0,configurable:!0,writable:!0,value:wt}):Jo[Me]=wt,Qo=(Jo,Me)=>{for(var wt in Me||(Me={}))unt.call(Me,wt)&&yle(Jo,wt,Me[wt]);if(_le)for(var wt of _le(Me))hnt.call(Me,wt)&&yle(Jo,wt,Me[wt]);return Jo},hx=(Jo,Me)=>lnt(Jo,cnt(Me));(self.webpackChunkscheduler13=self.webpackChunkscheduler13||[]).push([[179],{363:(Jo,Me,wt)=>{"use strict";var Ve={};function ue(l){return"function"==typeof l}function Ce(l){const o=l(c=>{Error.call(c),c.stack=(new Error).stack});return o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o}wt.r(Ve),wt.d(Ve,{Adder:()=>to,Delaunay:()=>QO,FormatSpecifier:()=>q2,InternMap:()=>Z1,InternSet:()=>Up,Node:()=>cg,Voronoi:()=>yZ,ZoomTransform:()=>th,active:()=>$3e,arc:()=>HR,area:()=>jR,areaRadial:()=>Nee,ascending:()=>gs,autoType:()=>RPe,axisBottom:()=>Rke,axisLeft:()=>Nke,axisRight:()=>Fke,axisTop:()=>Oke,bin:()=>vY,bisect:()=>Vp,bisectCenter:()=>BEe,bisectLeft:()=>LEe,bisectRight:()=>nY,bisector:()=>ZS,blob:()=>cOe,brush:()=>s4e,brushSelection:()=>n4e,brushX:()=>i4e,brushY:()=>r4e,buffer:()=>hOe,chord:()=>a4e,chordDirected:()=>c4e,chordTranspose:()=>l4e,cluster:()=>ERe,color:()=>Wc,contourDensity:()=>R4e,contours:()=>qX,count:()=>KS,create:()=>F5e,creator:()=>a2,cross:()=>WEe,csv:()=>pOe,csvFormat:()=>SPe,csvFormatBody:()=>TPe,csvFormatRow:()=>MPe,csvFormatRows:()=>DPe,csvFormatValue:()=>EPe,csvParse:()=>SZ,csvParseRows:()=>wPe,cubehelix:()=>$c,cumsum:()=>GEe,curveBasis:()=>Jb,curveBasisClosed:()=>d8e,curveBasisOpen:()=>f8e,curveBumpX:()=>qR,curveBumpY:()=>Bee,curveBundle:()=>p8e,curveCardinal:()=>g8e,curveCardinalClosed:()=>m8e,curveCardinalOpen:()=>v8e,curveCatmullRom:()=>_8e,curveCatmullRomClosed:()=>y8e,curveCatmullRomOpen:()=>b8e,curveLinear:()=>ZT,curveLinearClosed:()=>C8e,curveMonotoneX:()=>x8e,curveMonotoneY:()=>w8e,curveNatural:()=>tN,curveStep:()=>S8e,curveStepAfter:()=>T8e,curveStepBefore:()=>nN,descending:()=>jEe,deviation:()=>rY,difference:()=>Cke,disjoint:()=>xke,dispatch:()=>z0,drag:()=>bZ,dragDisable:()=>l2,dragEnable:()=>c2,dsv:()=>fOe,dsvFormat:()=>H2,easeBack:()=>OZ,easeBackIn:()=>rOe,easeBackInOut:()=>OZ,easeBackOut:()=>sOe,easeBounce:()=>Cb,easeBounceIn:()=>nOe,easeBounceInOut:()=>iOe,easeBounceOut:()=>Cb,easeCircle:()=>PZ,easeCircleIn:()=>$Pe,easeCircleInOut:()=>PZ,easeCircleOut:()=>qPe,easeCubic:()=>iO,easeCubicIn:()=>z3e,easeCubicInOut:()=>iO,easeCubicOut:()=>U3e,easeElastic:()=>FZ,easeElasticIn:()=>oOe,easeElasticInOut:()=>aOe,easeElasticOut:()=>FZ,easeExp:()=>IZ,easeExpIn:()=>GPe,easeExpInOut:()=>IZ,easeExpOut:()=>jPe,easeLinear:()=>LPe,easePoly:()=>MZ,easePolyIn:()=>zPe,easePolyInOut:()=>MZ,easePolyOut:()=>UPe,easeQuad:()=>DZ,easeQuadIn:()=>BPe,easeQuadInOut:()=>DZ,easeQuadOut:()=>VPe,easeSin:()=>AZ,easeSinIn:()=>HPe,easeSinInOut:()=>AZ,easeSinOut:()=>WPe,every:()=>gke,extent:()=>zp,fcumsum:()=>qEe,filter:()=>vke,flatGroup:()=>YEe,flatRollup:()=>XEe,forceCenter:()=>xOe,forceCollide:()=>UOe,forceLink:()=>WOe,forceManyBody:()=>QOe,forceRadial:()=>JOe,forceSimulation:()=>KOe,forceX:()=>eFe,forceY:()=>tFe,format:()=>X2,formatDefaultLocale:()=>qZ,formatLocale:()=>$Z,formatPrefix:()=>uF,formatSpecifier:()=>uv,fsum:()=>$Ee,geoAlbers:()=>aQ,geoAlbersUsa:()=>oRe,geoArea:()=>hFe,geoAzimuthalEqualArea:()=>aRe,geoAzimuthalEqualAreaRaw:()=>XF,geoAzimuthalEquidistant:()=>lRe,geoAzimuthalEquidistantRaw:()=>ZF,geoBounds:()=>gFe,geoCentroid:()=>CFe,geoCircle:()=>xFe,geoClipAntimeridian:()=>EF,geoClipCircle:()=>kK,geoClipExtent:()=>kFe,geoClipRectangle:()=>mT,geoConicConformal:()=>uRe,geoConicConformalRaw:()=>uQ,geoConicEqualArea:()=>ET,geoConicEqualAreaRaw:()=>oQ,geoConicEquidistant:()=>dRe,geoConicEquidistantRaw:()=>hQ,geoContains:()=>NFe,geoDistance:()=>yT,geoEqualEarth:()=>pRe,geoEqualEarthRaw:()=>KF,geoEquirectangular:()=>hRe,geoEquirectangularRaw:()=>Nb,geoGnomonic:()=>gRe,geoGnomonicRaw:()=>QF,geoGraticule:()=>VK,geoGraticule10:()=>LFe,geoIdentity:()=>mRe,geoInterpolate:()=>BFe,geoLength:()=>AK,geoMercator:()=>cRe,geoMercatorRaw:()=>Rb,geoNaturalEarth1:()=>vRe,geoNaturalEarth1Raw:()=>JF,geoOrthographic:()=>_Re,geoOrthographicRaw:()=>eR,geoPath:()=>ZFe,geoProjection:()=>eh,geoProjectionMutator:()=>qF,geoRotation:()=>CK,geoStereographic:()=>yRe,geoStereographicRaw:()=>tR,geoStream:()=>Xc,geoTransform:()=>KFe,geoTransverseMercator:()=>bRe,geoTransverseMercatorRaw:()=>nR,gray:()=>b4e,greatest:()=>uke,greatestIndex:()=>hke,group:()=>lY,groupSort:()=>QEe,groups:()=>cY,hcl:()=>M2,hierarchy:()=>iR,histogram:()=>vY,hsl:()=>h2,html:()=>bOe,image:()=>mOe,index:()=>ZEe,indexes:()=>KEe,interpolate:()=>nf,interpolateArray:()=>kIe,interpolateBasis:()=>XY,interpolateBasisClosed:()=>ZY,interpolateBlues:()=>g5e,interpolateBrBG:()=>YBe,interpolateBuGn:()=>i5e,interpolateBuPu:()=>r5e,interpolateCividis:()=>C5e,interpolateCool:()=>S5e,interpolateCubehelix:()=>ENe,interpolateCubehelixDefault:()=>x5e,interpolateCubehelixLong:()=>LT,interpolateDate:()=>nX,interpolateDiscrete:()=>_Ne,interpolateGnBu:()=>s5e,interpolateGreens:()=>m5e,interpolateGreys:()=>v5e,interpolateHcl:()=>DNe,interpolateHclLong:()=>MNe,interpolateHsl:()=>wNe,interpolateHslLong:()=>SNe,interpolateHue:()=>yNe,interpolateInferno:()=>P5e,interpolateLab:()=>TNe,interpolateMagma:()=>I5e,interpolateNumber:()=>sc,interpolateNumberArray:()=>jP,interpolateObject:()=>iX,interpolateOrRd:()=>o5e,interpolateOranges:()=>b5e,interpolatePRGn:()=>XBe,interpolatePiYG:()=>ZBe,interpolatePlasma:()=>O5e,interpolatePuBu:()=>l5e,interpolatePuBuGn:()=>a5e,interpolatePuOr:()=>KBe,interpolatePuRd:()=>c5e,interpolatePurples:()=>_5e,interpolateRainbow:()=>T5e,interpolateRdBu:()=>QBe,interpolateRdGy:()=>JBe,interpolateRdPu:()=>u5e,interpolateRdYlBu:()=>e5e,interpolateRdYlGn:()=>t5e,interpolateReds:()=>y5e,interpolateRgb:()=>ob,interpolateRgbBasis:()=>JY,interpolateRgbBasisClosed:()=>EIe,interpolateRound:()=>NT,interpolateSinebow:()=>E5e,interpolateSpectral:()=>n5e,interpolateString:()=>YP,interpolateTransformCss:()=>pX,interpolateTransformSvg:()=>gX,interpolateTurbo:()=>k5e,interpolateViridis:()=>A5e,interpolateWarm:()=>w5e,interpolateYlGn:()=>d5e,interpolateYlGnBu:()=>h5e,interpolateYlOrBr:()=>f5e,interpolateYlOrRd:()=>p5e,interpolateZoom:()=>AQ,interrupt:()=>jp,intersection:()=>wke,interval:()=>W8e,isoFormat:()=>V8e,isoParse:()=>H8e,json:()=>_Oe,lab:()=>D2,lch:()=>C4e,least:()=>cke,leastIndex:()=>CY,line:()=>Qc,lineRadial:()=>Ree,link:()=>KT,linkHorizontal:()=>e8e,linkRadial:()=>n8e,linkVertical:()=>t8e,local:()=>kee,map:()=>_ke,matcher:()=>RP,max:()=>JS,maxIndex:()=>yY,mean:()=>nke,median:()=>ike,merge:()=>PP,min:()=>e2,minIndex:()=>bY,mode:()=>ske,namespace:()=>nb,namespaces:()=>LP,nice:()=>mY,now:()=>hb,pack:()=>tNe,packEnclose:()=>fQ,packSiblings:()=>JRe,pairs:()=>oke,partition:()=>nNe,path:()=>Zh,permute:()=>pY,pie:()=>X5e,piecewise:()=>FQ,pointRadial:()=>Qb,pointer:()=>ml,pointers:()=>N5e,polygonArea:()=>ANe,polygonCentroid:()=>INe,polygonContains:()=>RNe,polygonHull:()=>FNe,polygonLength:()=>NNe,precisionFixed:()=>YZ,precisionPrefix:()=>XZ,precisionRound:()=>ZZ,quadtree:()=>j2,quantile:()=>eb,quantileSorted:()=>_Y,quantize:()=>kNe,quickselect:()=>IP,radialArea:()=>Nee,radialLine:()=>Ree,randomBates:()=>zNe,randomBernoulli:()=>WNe,randomBeta:()=>BQ,randomBinomial:()=>VQ,randomCauchy:()=>jNe,randomExponential:()=>UNe,randomGamma:()=>hR,randomGeometric:()=>LQ,randomInt:()=>BNe,randomIrwinHall:()=>NQ,randomLcg:()=>ZNe,randomLogNormal:()=>VNe,randomLogistic:()=>$Ne,randomNormal:()=>uR,randomPareto:()=>HNe,randomPoisson:()=>qNe,randomUniform:()=>LNe,randomWeibull:()=>GNe,range:()=>gl,rank:()=>lke,reduce:()=>yke,reverse:()=>bke,rgb:()=>qh,ribbon:()=>mO,ribbonArrow:()=>_4e,rollup:()=>hY,rollups:()=>dY,scaleBand:()=>pR,scaleDiverging:()=>JJ,scaleDivergingLog:()=>eee,scaleDivergingPow:()=>zR,scaleDivergingSqrt:()=>LBe,scaleDivergingSymlog:()=>tee,scaleIdentity:()=>GQ,scaleImplicit:()=>dR,scaleLinear:()=>yv,scaleLog:()=>XQ,scaleOrdinal:()=>fR,scalePoint:()=>KNe,scalePow:()=>bR,scaleQuantile:()=>nJ,scaleQuantize:()=>iJ,scaleRadial:()=>tJ,scaleSequential:()=>XJ,scaleSequentialLog:()=>ZJ,scaleSequentialPow:()=>VR,scaleSequentialQuantile:()=>QJ,scaleSequentialSqrt:()=>NBe,scaleSequentialSymlog:()=>KJ,scaleSqrt:()=>cLe,scaleSymlog:()=>QQ,scaleThreshold:()=>rJ,scaleTime:()=>FBe,scaleUtc:()=>RBe,scan:()=>dke,schemeAccent:()=>VBe,schemeBlues:()=>wee,schemeBrBG:()=>nee,schemeBuGn:()=>hee,schemeBuPu:()=>dee,schemeCategory10:()=>BBe,schemeDark2:()=>zBe,schemeGnBu:()=>fee,schemeGreens:()=>See,schemeGreys:()=>Tee,schemeOrRd:()=>pee,schemeOranges:()=>Eee,schemePRGn:()=>iee,schemePaired:()=>UBe,schemePastel1:()=>HBe,schemePastel2:()=>WBe,schemePiYG:()=>ree,schemePuBu:()=>mee,schemePuBuGn:()=>gee,schemePuOr:()=>see,schemePuRd:()=>vee,schemePurples:()=>Dee,schemeRdBu:()=>oee,schemeRdGy:()=>aee,schemeRdPu:()=>_ee,schemeRdYlBu:()=>lee,schemeRdYlGn:()=>cee,schemeReds:()=>Mee,schemeSet1:()=>GBe,schemeSet2:()=>jBe,schemeSet3:()=>$Be,schemeSpectral:()=>uee,schemeTableau10:()=>qBe,schemeYlGn:()=>bee,schemeYlGnBu:()=>yee,schemeYlOrBr:()=>Cee,schemeYlOrRd:()=>xee,select:()=>Ns,selectAll:()=>L5e,selection:()=>U0,selector:()=>s2,selectorAll:()=>FP,shuffle:()=>xY,shuffler:()=>wY,some:()=>mke,sort:()=>TP,stack:()=>E8e,stackOffsetDiverging:()=>A8e,stackOffsetExpand:()=>k8e,stackOffsetNone:()=>Sv,stackOffsetSilhouette:()=>I8e,stackOffsetWiggle:()=>P8e,stackOrderAppearance:()=>pte,stackOrderAscending:()=>gte,stackOrderDescending:()=>F8e,stackOrderInsideOut:()=>R8e,stackOrderNone:()=>Tv,stackOrderReverse:()=>N8e,stratify:()=>oNe,style:()=>Hp,subset:()=>Tke,sum:()=>fke,superset:()=>DY,svg:()=>COe,symbol:()=>h8e,symbolAsterisk:()=>Vee,symbolCircle:()=>QT,symbolCross:()=>zee,symbolDiamond:()=>Hee,symbolDiamond2:()=>Wee,symbolPlus:()=>Gee,symbolSquare:()=>jee,symbolSquare2:()=>$ee,symbolStar:()=>Yee,symbolTriangle:()=>Xee,symbolTriangle2:()=>Zee,symbolWye:()=>Kee,symbolX:()=>Qee,symbols:()=>Jee,symbolsFill:()=>Jee,symbolsStroke:()=>u8e,text:()=>G2,thresholdFreedmanDiaconis:()=>eke,thresholdScott:()=>tke,thresholdSturges:()=>AP,tickFormat:()=>WQ,tickIncrement:()=>Q1,tickStep:()=>V0,ticks:()=>B0,timeDay:()=>Gb,timeDays:()=>fLe,timeFormat:()=>NR,timeFormatDefaultLocale:()=>YJ,timeFormatLocale:()=>PJ,timeFriday:()=>pJ,timeFridays:()=>_Le,timeHour:()=>MR,timeHours:()=>dLe,timeInterval:()=>ro,timeMillisecond:()=>TR,timeMilliseconds:()=>oJ,timeMinute:()=>DR,timeMinutes:()=>hLe,timeMonday:()=>jb,timeMondays:()=>pLe,timeMonth:()=>ER,timeMonths:()=>bLe,timeParse:()=>qJ,timeSaturday:()=>gJ,timeSaturdays:()=>yLe,timeSecond:()=>gf,timeSeconds:()=>lJ,timeSunday:()=>bv,timeSundays:()=>mJ,timeThursday:()=>fg,timeThursdays:()=>vLe,timeTickInterval:()=>IJ,timeTicks:()=>AJ,timeTuesday:()=>dJ,timeTuesdays:()=>gLe,timeWednesday:()=>fJ,timeWednesdays:()=>mLe,timeWeek:()=>bv,timeWeeks:()=>mJ,timeYear:()=>mf,timeYears:()=>CLe,timeout:()=>ZP,timer:()=>v2,timerFlush:()=>aX,transition:()=>_X,transpose:()=>SY,tree:()=>fNe,treemap:()=>pNe,treemapBinary:()=>gNe,treemapDice:()=>Hb,treemapResquarify:()=>vNe,treemapSlice:()=>RT,treemapSliceDice:()=>mNe,treemapSquarify:()=>EQ,tsv:()=>gOe,tsvFormat:()=>APe,tsvFormatBody:()=>IPe,tsvFormatRow:()=>OPe,tsvFormatRows:()=>PPe,tsvFormatValue:()=>FPe,tsvParse:()=>TZ,tsvParseRows:()=>kPe,union:()=>Dke,utcDay:()=>$b,utcDays:()=>SLe,utcFormat:()=>UT,utcFriday:()=>wJ,utcFridays:()=>kLe,utcHour:()=>IR,utcHours:()=>wLe,utcMillisecond:()=>TR,utcMilliseconds:()=>oJ,utcMinute:()=>AR,utcMinutes:()=>xLe,utcMonday:()=>qb,utcMondays:()=>TLe,utcMonth:()=>PR,utcMonths:()=>ILe,utcParse:()=>LR,utcSaturday:()=>SJ,utcSaturdays:()=>ALe,utcSecond:()=>gf,utcSeconds:()=>lJ,utcSunday:()=>Cv,utcSundays:()=>TJ,utcThursday:()=>gg,utcThursdays:()=>ELe,utcTickInterval:()=>kJ,utcTicks:()=>EJ,utcTuesday:()=>CJ,utcTuesdays:()=>DLe,utcWednesday:()=>xJ,utcWednesdays:()=>MLe,utcWeek:()=>Cv,utcWeeks:()=>TJ,utcYear:()=>vf,utcYears:()=>PLe,variance:()=>iY,window:()=>BP,xml:()=>yOe,zip:()=>TY,zoom:()=>Z8e,zoomIdentity:()=>sD,zoomTransform:()=>_te});const re=Ce(l=>function(o){l(this),this.message=o?`${o.length} errors occurred during unsubscription:\n${o.map((c,u)=>`${u+1}) ${c.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=o});function _e(l,a){if(l){const o=l.indexOf(a);0<=o&&l.splice(o,1)}}class Oe{constructor(a){this.initialTeardown=a,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let a;if(!this.closed){this.closed=!0;const{_parentage:o}=this;if(o)if(this._parentage=null,Array.isArray(o))for(const h of o)h.remove(this);else o.remove(this);const{initialTeardown:c}=this;if(ue(c))try{c()}catch(h){a=h instanceof re?h.errors:[h]}const{_teardowns:u}=this;if(u){this._teardowns=null;for(const h of u)try{Ne(h)}catch(d){a=null!=a?a:[],d instanceof re?a=[...a,...d.errors]:a.push(d)}}if(a)throw new re(a)}}add(a){var o;if(a&&a!==this)if(this.closed)Ne(a);else{if(a instanceof Oe){if(a.closed||a._hasParent(this))return;a._addParent(this)}(this._teardowns=null!==(o=this._teardowns)&&void 0!==o?o:[]).push(a)}}_hasParent(a){const{_parentage:o}=this;return o===a||Array.isArray(o)&&o.includes(a)}_addParent(a){const{_parentage:o}=this;this._parentage=Array.isArray(o)?(o.push(a),o):o?[o,a]:a}_removeParent(a){const{_parentage:o}=this;o===a?this._parentage=null:Array.isArray(o)&&_e(o,a)}remove(a){const{_teardowns:o}=this;o&&_e(o,a),a instanceof Oe&&a._removeParent(this)}}Oe.EMPTY=(()=>{const l=new Oe;return l.closed=!0,l})();const Be=Oe.EMPTY;function Re(l){return l instanceof Oe||l&&"closed"in l&&ue(l.remove)&&ue(l.add)&&ue(l.unsubscribe)}function Ne(l){ue(l)?l():l.unsubscribe()}const le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},we={setTimeout(...l){const{delegate:a}=we;return((null==a?void 0:a.setTimeout)||setTimeout)(...l)},clearTimeout(l){const{delegate:a}=we;return((null==a?void 0:a.clearTimeout)||clearTimeout)(l)},delegate:void 0};function Te(l){we.setTimeout(()=>{const{onUnhandledError:a}=le;if(!a)throw l;a(l)})}function ae(){}const ge=yt("C",void 0,void 0);function yt(l,a,o){return{kind:l,value:a,error:o}}let je=null;function Ot(l){if(le.useDeprecatedSynchronousErrorHandling){const a=!je;if(a&&(je={errorThrown:!1,error:null}),l(),a){const{errorThrown:o,error:c}=je;if(je=null,o)throw c}}else l()}class Yt extends Oe{constructor(a){super(),this.isStopped=!1,a?(this.destination=a,Re(a)&&a.add(this)):this.destination=vt}static create(a,o,c){return new dt(a,o,c)}next(a){this.isStopped?Ee(function Ue(l){return yt("N",l,void 0)}(a),this):this._next(a)}error(a){this.isStopped?Ee(function be(l){return yt("E",void 0,l)}(a),this):(this.isStopped=!0,this._error(a))}complete(){this.isStopped?Ee(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(a){this.destination.next(a)}_error(a){try{this.destination.error(a)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class dt extends Yt{constructor(a,o,c){let u;if(super(),ue(a))u=a;else if(a){let h;({next:u,error:o,complete:c}=a),this&&le.useDeprecatedNextContext?(h=Object.create(a),h.unsubscribe=()=>this.unsubscribe()):h=a,u=null==u?void 0:u.bind(h),o=null==o?void 0:o.bind(h),c=null==c?void 0:c.bind(h)}this.destination={next:u?jt(u):ae,error:jt(null!=o?o:Vn),complete:c?jt(c):ae}}}function jt(l,a){return(...o)=>{try{l(...o)}catch(c){le.useDeprecatedSynchronousErrorHandling?function Dt(l){le.useDeprecatedSynchronousErrorHandling&&je&&(je.errorThrown=!0,je.error=l)}(c):Te(c)}}}function Vn(l){throw l}function Ee(l,a){const{onStoppedNotification:o}=le;o&&we.setTimeout(()=>o(l,a))}const vt={closed:!0,next:ae,error:Vn,complete:ae},Q="function"==typeof Symbol&&Symbol.observable||"@@observable";function bt(l){return l}let _n=(()=>{class l{constructor(o){o&&(this._subscribe=o)}lift(o){const c=new l;return c.source=this,c.operator=o,c}subscribe(o,c,u){const h=function ot(l){return l&&l instanceof Yt||function qn(l){return l&&ue(l.next)&&ue(l.error)&&ue(l.complete)}(l)&&Re(l)}(o)?o:new dt(o,c,u);return Ot(()=>{const{operator:d,source:f}=this;h.add(d?d.call(h,f):f?this._subscribe(h):this._trySubscribe(h))}),h}_trySubscribe(o){try{return this._subscribe(o)}catch(c){o.error(c)}}forEach(o,c){return new(c=Wt(c))((u,h)=>{const d=new dt({next:f=>{try{o(f)}catch(p){h(p),d.unsubscribe()}},error:h,complete:u});this.subscribe(d)})}_subscribe(o){var c;return null===(c=this.source)||void 0===c?void 0:c.subscribe(o)}[Q](){return this}pipe(...o){return function Lt(l){return 0===l.length?bt:1===l.length?l[0]:function(o){return l.reduce((c,u)=>u(c),o)}}(o)(this)}toPromise(o){return new(o=Wt(o))((c,u)=>{let h;this.subscribe(d=>h=d,d=>u(d),()=>c(h))})}}return l.create=a=>new l(a),l})();function Wt(l){var a;return null!==(a=null!=l?l:le.Promise)&&void 0!==a?a:Promise}const it=Ce(l=>function(){l(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let pt=(()=>{class l extends _n{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(o){const c=new gn(this,this);return c.operator=o,c}_throwIfClosed(){if(this.closed)throw new it}next(o){Ot(()=>{if(this._throwIfClosed(),!this.isStopped){const c=this.observers.slice();for(const u of c)u.next(o)}})}error(o){Ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=o;const{observers:c}=this;for(;c.length;)c.shift().error(o)}})}complete(){Ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:o}=this;for(;o.length;)o.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var o;return(null===(o=this.observers)||void 0===o?void 0:o.length)>0}_trySubscribe(o){return this._throwIfClosed(),super._trySubscribe(o)}_subscribe(o){return this._throwIfClosed(),this._checkFinalizedStatuses(o),this._innerSubscribe(o)}_innerSubscribe(o){const{hasError:c,isStopped:u,observers:h}=this;return c||u?Be:(h.push(o),new Oe(()=>_e(h,o)))}_checkFinalizedStatuses(o){const{hasError:c,thrownError:u,isStopped:h}=this;c?o.error(u):h&&o.complete()}asObservable(){const o=new _n;return o.source=this,o}}return l.create=(a,o)=>new gn(a,o),l})();class gn extends pt{constructor(a,o){super(),this.destination=a,this.source=o}next(a){var o,c;null===(c=null===(o=this.destination)||void 0===o?void 0:o.next)||void 0===c||c.call(o,a)}error(a){var o,c;null===(c=null===(o=this.destination)||void 0===o?void 0:o.error)||void 0===c||c.call(o,a)}complete(){var a,o;null===(o=null===(a=this.destination)||void 0===a?void 0:a.complete)||void 0===o||o.call(a)}_subscribe(a){var o,c;return null!==(c=null===(o=this.source)||void 0===o?void 0:o.subscribe(a))&&void 0!==c?c:Be}}function Jt(l){return ue(null==l?void 0:l.lift)}function mi(l){return a=>{if(Jt(a))return a.lift(function(o){try{return l(o,this)}catch(c){this.error(c)}});throw new TypeError("Unable to lift unknown Observable type")}}class Ri extends Yt{constructor(a,o,c,u,h){super(a),this.onFinalize=h,this._next=o?function(d){try{o(d)}catch(f){a.error(f)}}:super._next,this._error=u?function(d){try{u(d)}catch(f){a.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=c?function(){try{c()}catch(d){a.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var a;const{closed:o}=this;super.unsubscribe(),!o&&(null===(a=this.onFinalize)||void 0===a||a.call(this))}}function hn(l,a){return mi((o,c)=>{let u=0;o.subscribe(new Ri(c,h=>{c.next(l.call(a,h,u++))}))})}function as(l,a,o,c){var d,u=arguments.length,h=u<3?a:null===c?c=Object.getOwnPropertyDescriptor(a,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(l,a,o,c);else for(var f=l.length-1;f>=0;f--)(d=l[f])&&(h=(u<3?d(h):u>3?d(a,o,h):d(a,o))||h);return u>3&&h&&Object.defineProperty(a,o,h),h}function Ht(l){return this instanceof Ht?(this.v=l,this):new Ht(l)}function Rn(l,a,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=o.apply(l,a||[]),h=[];return u={},d("next"),d("throw"),d("return"),u[Symbol.asyncIterator]=function(){return this},u;function d(_){c[_]&&(u[_]=function(y){return new Promise(function(b,x){h.push([_,y,b,x])>1||f(_,y)})})}function f(_,y){try{!function p(_){_.value instanceof Ht?Promise.resolve(_.value.v).then(g,m):v(h[0][2],_)}(c[_](y))}catch(b){v(h[0][3],b)}}function g(_){f("next",_)}function m(_){f("throw",_)}function v(_,y){_(y),h.shift(),h.length&&f(h[0][0],h[0][1])}}function Ui(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,a=l[Symbol.asyncIterator];return a?a.call(l):(l=function kt(l){var a="function"==typeof Symbol&&Symbol.iterator,o=a&&l[a],c=0;if(o)return o.call(l);if(l&&"number"==typeof l.length)return{next:function(){return l&&c>=l.length&&(l=void 0),{value:l&&l[c++],done:!l}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),o={},c("next"),c("throw"),c("return"),o[Symbol.asyncIterator]=function(){return this},o);function c(h){o[h]=l[h]&&function(d){return new Promise(function(f,p){!function u(h,d,f,p){Promise.resolve(p).then(function(g){h({value:g,done:f})},d)}(f,p,(d=l[h](d)).done,d.value)})}}}const sp=l=>l&&"number"==typeof l.length&&"function"!=typeof l;function $l(l){return ue(null==l?void 0:l.then)}function G_(l){return ue(l[Q])}function dx(l){return Symbol.asyncIterator&&ue(null==l?void 0:l[Symbol.asyncIterator])}function fx(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const j_=function rk(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Md(l){return ue(null==l?void 0:l[j_])}function op(l){return Rn(this,arguments,function*(){const o=l.getReader();try{for(;;){const{value:c,done:u}=yield Ht(o.read());if(u)return yield Ht(void 0);yield yield Ht(c)}}finally{o.releaseLock()}})}function SV(l){return ue(null==l?void 0:l.getReader)}function yc(l){if(l instanceof _n)return l;if(null!=l){if(G_(l))return function ble(l){return new _n(a=>{const o=l[Q]();if(ue(o.subscribe))return o.subscribe(a);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(l);if(sp(l))return function Cle(l){return new _n(a=>{for(let o=0;o<l.length&&!a.closed;o++)a.next(l[o]);a.complete()})}(l);if($l(l))return function xle(l){return new _n(a=>{l.then(o=>{a.closed||(a.next(o),a.complete())},o=>a.error(o)).then(null,Te)})}(l);if(dx(l))return TV(l);if(Md(l))return function wle(l){return new _n(a=>{for(const o of l)if(a.next(o),a.closed)return;a.complete()})}(l);if(SV(l))return function Sle(l){return TV(op(l))}(l)}throw fx(l)}function TV(l){return new _n(a=>{(function Tle(l,a){var o,c,u,h;return function ut(l,a,o,c){return new(o||(o=Promise))(function(h,d){function f(m){try{g(c.next(m))}catch(v){d(v)}}function p(m){try{g(c.throw(m))}catch(v){d(v)}}function g(m){m.done?h(m.value):function u(h){return h instanceof o?h:new o(function(d){d(h)})}(m.value).then(f,p)}g((c=c.apply(l,a||[])).next())})}(this,void 0,void 0,function*(){try{for(o=Ui(l);!(c=yield o.next()).done;)if(a.next(c.value),a.closed)return}catch(d){u={error:d}}finally{try{c&&!c.done&&(h=o.return)&&(yield h.call(o))}finally{if(u)throw u.error}}a.complete()})})(l,a).catch(o=>a.error(o))})}function bh(l,a,o,c=0,u=!1){const h=a.schedule(function(){o(),u?l.add(this.schedule(null,c)):this.unsubscribe()},c);if(l.add(h),!u)return h}function qs(l,a,o=1/0){return ue(a)?qs((c,u)=>hn((h,d)=>a(c,h,u,d))(yc(l(c,u))),o):("number"==typeof a&&(o=a),mi((c,u)=>function Dle(l,a,o,c,u,h,d,f){const p=[];let g=0,m=0,v=!1;const _=()=>{v&&!p.length&&!g&&a.complete()},y=x=>g<c?b(x):p.push(x),b=x=>{h&&a.next(x),g++;let C=!1;yc(o(x,m++)).subscribe(new Ri(a,w=>{null==u||u(w),h?y(w):a.next(w)},()=>{C=!0},void 0,()=>{if(C)try{for(g--;p.length&&g<c;){const w=p.shift();d?bh(a,d,()=>b(w)):b(w)}_()}catch(w){a.error(w)}}))};return l.subscribe(new Ri(a,y,()=>{v=!0,_()})),()=>{null==f||f()}}(c,u,l,o)))}function $_(l=1/0){return qs(bt,l)}const Ch=new _n(l=>l.complete());function sk(l){return l[l.length-1]}function DV(l){return ue(sk(l))?l.pop():void 0}function q_(l){return function Ele(l){return l&&ue(l.schedule)}(sk(l))?l.pop():void 0}function MV(l,a=0){return mi((o,c)=>{o.subscribe(new Ri(c,u=>bh(c,l,()=>c.next(u),a),()=>bh(c,l,()=>c.complete(),a),u=>bh(c,l,()=>c.error(u),a)))})}function EV(l,a=0){return mi((o,c)=>{c.add(l.schedule(()=>o.subscribe(c),a))})}function kV(l,a){if(!l)throw new Error("Iterable cannot be null");return new _n(o=>{bh(o,a,()=>{const c=l[Symbol.asyncIterator]();bh(o,a,()=>{c.next().then(u=>{u.done?o.complete():o.next(u.value)})},0,!0)})})}function lo(l,a){return a?function Rle(l,a){if(null!=l){if(G_(l))return function Ale(l,a){return yc(l).pipe(EV(a),MV(a))}(l,a);if(sp(l))return function Ple(l,a){return new _n(o=>{let c=0;return a.schedule(function(){c===l.length?o.complete():(o.next(l[c++]),o.closed||this.schedule())})})}(l,a);if($l(l))return function Ile(l,a){return yc(l).pipe(EV(a),MV(a))}(l,a);if(dx(l))return kV(l,a);if(Md(l))return function Ole(l,a){return new _n(o=>{let c;return bh(o,a,()=>{c=l[j_](),bh(o,a,()=>{let u,h;try{({value:u,done:h}=c.next())}catch(d){return void o.error(d)}h?o.complete():o.next(u)},0,!0)}),()=>ue(null==c?void 0:c.return)&&c.return()})}(l,a);if(SV(l))return function Fle(l,a){return kV(op(l),a)}(l,a)}throw fx(l)}(l,a):yc(l)}function sm(l){return l<=0?()=>Ch:mi((a,o)=>{let c=0;a.subscribe(new Ri(o,u=>{++c<=l&&(o.next(u),l<=c&&o.complete())}))})}function ok(l,a,...o){return!0===a?(l(),null):!1===a?null:a(...o).pipe(sm(1)).subscribe(()=>l())}function Tr(l){for(let a in l)if(l[a]===Tr)return a;throw Error("Could not find renamed property on target object.")}function ak(l,a){for(const o in a)a.hasOwnProperty(o)&&!l.hasOwnProperty(o)&&(l[o]=a[o])}function fr(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(fr).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const a=l.toString();if(null==a)return""+a;const o=a.indexOf("\n");return-1===o?a:a.substring(0,o)}function lk(l,a){return null==l||""===l?null===a?"":a:null==a||""===a?l:l+" "+a}const Ble=Tr({__forward_ref__:Tr});function kr(l){return l.__forward_ref__=kr,l.toString=function(){return fr(this())},l}function vi(l){return AV(l)?l():l}function AV(l){return"function"==typeof l&&l.hasOwnProperty(Ble)&&l.__forward_ref__===kr}class qi extends Error{constructor(a,o){super(function ck(l,a){return`NG0${Math.abs(l)}${a?": "+a:""}`}(a,o)),this.code=a}}function oi(l){return"string"==typeof l?l:null==l?"":String(l)}function ea(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():oi(l)}function px(l,a){const o=a?` in ${a}`:"";throw new qi(-201,`No provider for ${ea(l)} found${o}`)}function tl(l,a){null==l&&function Or(l,a,o,c){throw new Error(`ASSERTION ERROR: ${l}`+(null==c?"":` [Expected=> ${o} ${c} ${a} <=Actual]`))}(a,l,null,"!=")}function Xe(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function wn(l){return{providers:l.providers||[],imports:l.imports||[]}}function uk(l){return IV(l,gx)||IV(l,OV)}function IV(l,a){return l.hasOwnProperty(a)?l[a]:null}function PV(l){return l&&(l.hasOwnProperty(hk)||l.hasOwnProperty(jle))?l[hk]:null}const gx=Tr({\u0275prov:Tr}),hk=Tr({\u0275inj:Tr}),OV=Tr({ngInjectableDef:Tr}),jle=Tr({ngInjectorDef:Tr});var ui=(()=>((ui=ui||{})[ui.Default=0]="Default",ui[ui.Host=1]="Host",ui[ui.Self=2]="Self",ui[ui.SkipSelf=4]="SkipSelf",ui[ui.Optional=8]="Optional",ui))();let dk;function Ed(l){const a=dk;return dk=l,a}function FV(l,a,o){const c=uk(l);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&ui.Optional?null:void 0!==a?a:void px(fr(l),"Injector")}function kd(l){return{toString:l}.toString()}var bc=(()=>((bc=bc||{})[bc.OnPush=0]="OnPush",bc[bc.Default=1]="Default",bc))(),Cc=(()=>{return(l=Cc||(Cc={}))[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",Cc;var l})();const qle="undefined"!=typeof globalThis&&globalThis,Yle="undefined"!=typeof window&&window,Xle="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xr=qle||"undefined"!=typeof global&&global||Yle||Xle,om={},Dr=[],mx=Tr({\u0275cmp:Tr}),fk=Tr({\u0275dir:Tr}),pk=Tr({\u0275pipe:Tr}),RV=Tr({\u0275mod:Tr}),wh=Tr({\u0275fac:Tr}),Y_=Tr({__NG_ELEMENT_ID__:Tr});let Zle=0;function Ye(l){return kd(()=>{const o={},c={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===bc.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||Dr,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||Cc.Emulated,id:"c",styles:l.styles||Dr,_:null,setInput:null,schemas:l.schemas||null,tView:null},u=l.directives,h=l.features,d=l.pipes;return c.id+=Zle++,c.inputs=VV(l.inputs,o),c.outputs=VV(l.outputs),h&&h.forEach(f=>f(c)),c.directiveDefs=u?()=>("function"==typeof u?u():u).map(NV):null,c.pipeDefs=d?()=>("function"==typeof d?d():d).map(LV):null,c})}function gk(l,a,o){const c=l.\u0275cmp;c.directiveDefs=()=>a.map(NV),c.pipeDefs=()=>o.map(LV)}function NV(l){return Io(l)||function Ad(l){return l[fk]||null}(l)}function LV(l){return function ap(l){return l[pk]||null}(l)}const BV={};function Mn(l){return kd(()=>{const a={type:l.type,bootstrap:l.bootstrap||Dr,declarations:l.declarations||Dr,imports:l.imports||Dr,exports:l.exports||Dr,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(BV[l.id]=l.type),a})}function VV(l,a){if(null==l)return om;const o={};for(const c in l)if(l.hasOwnProperty(c)){let u=l[c],h=u;Array.isArray(u)&&(h=u[1],u=u[0]),o[u]=c,a&&(a[u]=h)}return o}const mt=Ye;function Oa(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function Io(l){return l[mx]||null}function ql(l,a){const o=l[RV]||null;if(!o&&!0===a)throw new Error(`Type ${fr(l)} does not have '\u0275mod' property.`);return o}function vu(l){return Array.isArray(l)&&"object"==typeof l[1]}function wc(l){return Array.isArray(l)&&!0===l[1]}function _k(l){return 0!=(8&l.flags)}function bx(l){return 2==(2&l.flags)}function Cx(l){return 1==(1&l.flags)}function Sc(l){return null!==l.template}function tce(l){return 0!=(512&l[2])}function hp(l,a){return l.hasOwnProperty(wh)?l[wh]:null}class rce{constructor(a,o,c){this.previousValue=a,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ys(){return UV}function UV(l){return l.type.prototype.ngOnChanges&&(l.setInput=oce),sce}function sce(){const l=WV(this),a=null==l?void 0:l.current;if(a){const o=l.previous;if(o===om)l.previous=a;else for(let c in a)o[c]=a[c];l.current=null,this.ngOnChanges(a)}}function oce(l,a,o,c){const u=WV(l)||function ace(l,a){return l[HV]=a}(l,{previous:om,current:null}),h=u.current||(u.current={}),d=u.previous,f=this.declaredInputs[o],p=d[f];h[f]=new rce(p&&p.currentValue,a,d===om),l[c]=a}Ys.ngInherit=!0;const HV="__ngSimpleChanges__";function WV(l){return l[HV]||null}let wk;function cs(l){return!!l.listen}const GV={createRenderer:(l,a)=>function Sk(){return void 0!==wk?wk:"undefined"!=typeof document?document:void 0}()};function As(l){for(;Array.isArray(l);)l=l[0];return l}function xx(l,a){return As(a[l])}function Zl(l,a){return As(a[l.index])}function Tk(l,a){return l.data[a]}function hm(l,a){return l[a]}function il(l,a){const o=a[l];return vu(o)?o:o[0]}function jV(l){return 4==(4&l[2])}function Dk(l){return 128==(128&l[2])}function Id(l,a){return null==a?null:l[a]}function $V(l){l[18]=0}function Mk(l,a){l[5]+=a;let o=l,c=l[3];for(;null!==c&&(1===a&&1===o[5]||-1===a&&0===o[5]);)c[5]+=a,o=c,c=c[3]}const Kn={lFrame:e6(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qV(){return Kn.bindingsEnabled}function It(){return Kn.lFrame.lView}function Yi(){return Kn.lFrame.tView}function Le(l){return Kn.lFrame.contextLView=l,l[8]}function Xs(){let l=YV();for(;null!==l&&64===l.type;)l=l.parent;return l}function YV(){return Kn.lFrame.currentTNode}function _u(l,a){const o=Kn.lFrame;o.currentTNode=l,o.isParent=a}function Ek(){return Kn.lFrame.isParent}function kk(){Kn.lFrame.isParent=!1}function wx(){return Kn.isInCheckNoChangesMode}function Sx(l){Kn.isInCheckNoChangesMode=l}function ta(){const l=Kn.lFrame;let a=l.bindingRootIndex;return-1===a&&(a=l.bindingRootIndex=l.tView.bindingStartIndex),a}function Sh(){return Kn.lFrame.bindingIndex}function dm(){return Kn.lFrame.bindingIndex++}function Th(l){const a=Kn.lFrame,o=a.bindingIndex;return a.bindingIndex=a.bindingIndex+l,o}function Sce(l,a){const o=Kn.lFrame;o.bindingIndex=o.bindingRootIndex=l,Ak(a)}function Ak(l){Kn.lFrame.currentDirectiveIndex=l}function KV(){return Kn.lFrame.currentQueryIndex}function Pk(l){Kn.lFrame.currentQueryIndex=l}function Dce(l){const a=l[1];return 2===a.type?a.declTNode:1===a.type?l[6]:null}function QV(l,a,o){if(o&ui.SkipSelf){let u=a,h=l;for(;!(u=u.parent,null!==u||o&ui.Host||(u=Dce(h),null===u||(h=h[15],10&u.type))););if(null===u)return!1;a=u,l=h}const c=Kn.lFrame=JV();return c.currentTNode=a,c.lView=l,!0}function Tx(l){const a=JV(),o=l[1];Kn.lFrame=a,a.currentTNode=o.firstChild,a.lView=l,a.tView=o,a.contextLView=l,a.bindingIndex=o.bindingStartIndex,a.inI18n=!1}function JV(){const l=Kn.lFrame,a=null===l?null:l.child;return null===a?e6(l):a}function e6(l){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=a),a}function t6(){const l=Kn.lFrame;return Kn.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const n6=t6;function Dx(){const l=t6();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function na(){return Kn.lFrame.selectedIndex}function Pd(l){Kn.lFrame.selectedIndex=l}function us(){const l=Kn.lFrame;return Tk(l.tView,l.selectedIndex)}function Od(){Kn.lFrame.currentNamespace="svg"}function Mx(l,a){for(let o=a.directiveStart,c=a.directiveEnd;o<c;o++){const h=l.data[o].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:f,ngAfterViewInit:p,ngAfterViewChecked:g,ngOnDestroy:m}=h;d&&(l.contentHooks||(l.contentHooks=[])).push(-o,d),f&&((l.contentHooks||(l.contentHooks=[])).push(o,f),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(o,f)),p&&(l.viewHooks||(l.viewHooks=[])).push(-o,p),g&&((l.viewHooks||(l.viewHooks=[])).push(o,g),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(o,g)),null!=m&&(l.destroyHooks||(l.destroyHooks=[])).push(o,m)}}function Ex(l,a,o){r6(l,a,3,o)}function kx(l,a,o,c){(3&l[2])===o&&r6(l,a,o,c)}function Ok(l,a){let o=l[2];(3&o)===a&&(o&=2047,o+=1,l[2]=o)}function r6(l,a,o,c){const h=null!=c?c:-1,d=a.length-1;let f=0;for(let p=void 0!==c?65535&l[18]:0;p<d;p++)if("number"==typeof a[p+1]){if(f=a[p],null!=c&&f>=c)break}else a[p]<0&&(l[18]+=65536),(f<h||-1==h)&&(Oce(l,o,a,p),l[18]=(4294901760&l[18])+p+2),p++}function Oce(l,a,o,c){const u=o[c]<0,h=o[c+1],f=l[u?-o[c]:o[c]];if(u){if(l[2]>>11<l[18]>>16&&(3&l[2])===a){l[2]+=2048;try{h.call(f)}finally{}}}else try{h.call(f)}finally{}}class J_{constructor(a,o,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}function Ax(l,a,o){const c=cs(l);let u=0;for(;u<o.length;){const h=o[u];if("number"==typeof h){if(0!==h)break;u++;const d=o[u++],f=o[u++],p=o[u++];c?l.setAttribute(a,f,p,d):a.setAttributeNS(d,f,p)}else{const d=h,f=o[++u];Rk(d)?c&&l.setProperty(a,d,f):c?l.setAttribute(a,d,f):a.setAttribute(d,f),u++}}return u}function s6(l){return 3===l||4===l||6===l}function Rk(l){return 64===l.charCodeAt(0)}function Ix(l,a){if(null!==a&&0!==a.length)if(null===l||0===l.length)l=a.slice();else{let o=-1;for(let c=0;c<a.length;c++){const u=a[c];"number"==typeof u?o=u:0===o||o6(l,o,u,null,-1===o||2===o?a[++c]:null)}}return l}function o6(l,a,o,c,u){let h=0,d=l.length;if(-1===a)d=-1;else for(;h<l.length;){const f=l[h++];if("number"==typeof f){if(f===a){d=-1;break}if(f>a){d=h-1;break}}}for(;h<l.length;){const f=l[h];if("number"==typeof f)break;if(f===o){if(null===c)return void(null!==u&&(l[h+1]=u));if(c===l[h+1])return void(l[h+2]=u)}h++,null!==c&&h++,null!==u&&h++}-1!==d&&(l.splice(d,0,a),h=d+1),l.splice(h++,0,o),null!==c&&l.splice(h++,0,c),null!==u&&l.splice(h++,0,u)}function a6(l){return-1!==l}function fm(l){return 32767&l}function pm(l,a){let o=function Bce(l){return l>>16}(l),c=a;for(;o>0;)c=c[15],o--;return c}let Nk=!0;function Px(l){const a=Nk;return Nk=l,a}let Vce=0;function ty(l,a){const o=Bk(l,a);if(-1!==o)return o;const c=a[1];c.firstCreatePass&&(l.injectorIndex=a.length,Lk(c.data,l),Lk(a,null),Lk(c.blueprint,null));const u=Ox(l,a),h=l.injectorIndex;if(a6(u)){const d=fm(u),f=pm(u,a),p=f[1].data;for(let g=0;g<8;g++)a[h+g]=f[d+g]|p[d+g]}return a[h+8]=u,h}function Lk(l,a){l.push(0,0,0,0,0,0,0,0,a)}function Bk(l,a){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===a[l.injectorIndex+8]?-1:l.injectorIndex}function Ox(l,a){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let o=0,c=null,u=a;for(;null!==u;){const h=u[1],d=h.type;if(c=2===d?h.declTNode:1===d?u[6]:null,null===c)return-1;if(o++,u=u[15],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return-1}function Fx(l,a,o){!function zce(l,a,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(Y_)&&(c=o[Y_]),null==c&&(c=o[Y_]=Vce++);const u=255&c;a.data[l+(u>>5)]|=1<<u}(l,a,o)}function u6(l,a,o){if(o&ui.Optional)return l;px(a,"NodeInjector")}function h6(l,a,o,c){if(o&ui.Optional&&void 0===c&&(c=null),0==(o&(ui.Self|ui.Host))){const u=l[9],h=Ed(void 0);try{return u?u.get(a,c,o&ui.Optional):FV(a,c,o&ui.Optional)}finally{Ed(h)}}return u6(c,a,o)}function d6(l,a,o,c=ui.Default,u){if(null!==l){const h=function Gce(l){if("string"==typeof l)return l.charCodeAt(0)||0;const a=l.hasOwnProperty(Y_)?l[Y_]:void 0;return"number"==typeof a?a>=0?255&a:Hce:a}(o);if("function"==typeof h){if(!QV(a,l,c))return c&ui.Host?u6(u,o,c):h6(a,o,c,u);try{const d=h(c);if(null!=d||c&ui.Optional)return d;px(o)}finally{n6()}}else if("number"==typeof h){let d=null,f=Bk(l,a),p=-1,g=c&ui.Host?a[16][6]:null;for((-1===f||c&ui.SkipSelf)&&(p=-1===f?Ox(l,a):a[f+8],-1!==p&&g6(c,!1)?(d=a[1],f=fm(p),a=pm(p,a)):f=-1);-1!==f;){const m=a[1];if(p6(h,f,m.data)){const v=Wce(f,a,o,d,c,g);if(v!==f6)return v}p=a[f+8],-1!==p&&g6(c,a[1].data[f+8]===g)&&p6(h,f,a)?(d=m,f=fm(p),a=pm(p,a)):f=-1}}}return h6(a,o,c,u)}const f6={};function Hce(){return new gm(Xs(),It())}function Wce(l,a,o,c,u,h){const d=a[1],f=d.data[l+8],m=Rx(f,d,o,null==c?bx(f)&&Nk:c!=d&&0!=(3&f.type),u&ui.Host&&h===f);return null!==m?ny(a,d,m,f):f6}function Rx(l,a,o,c,u){const h=l.providerIndexes,d=a.data,f=1048575&h,p=l.directiveStart,m=h>>20,_=u?f+m:l.directiveEnd;for(let y=c?f:f+m;y<_;y++){const b=d[y];if(y<p&&o===b||y>=p&&b.type===o)return y}if(u){const y=d[p];if(y&&Sc(y)&&y.type===o)return p}return null}function ny(l,a,o,c){let u=l[o];const h=a.data;if(function Fce(l){return l instanceof J_}(u)){const d=u;d.resolving&&function Vle(l,a){const o=a?`. Dependency path: ${a.join(" > ")} > ${l}`:"";throw new qi(-200,`Circular dependency in DI detected for ${l}${o}`)}(ea(h[o]));const f=Px(d.canSeeViewProviders);d.resolving=!0;const p=d.injectImpl?Ed(d.injectImpl):null;QV(l,c,ui.Default);try{u=l[o]=d.factory(void 0,h,l,c),a.firstCreatePass&&o>=c.directiveStart&&function Pce(l,a,o){const{ngOnChanges:c,ngOnInit:u,ngDoCheck:h}=a.type.prototype;if(c){const d=UV(a);(o.preOrderHooks||(o.preOrderHooks=[])).push(l,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l,d)}u&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-l,u),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l,h))}(o,h[o],a)}finally{null!==p&&Ed(p),Px(f),d.resolving=!1,n6()}}return u}function p6(l,a,o){return!!(o[a+(l>>5)]&1<<l)}function g6(l,a){return!(l&ui.Self||l&ui.Host&&a)}class gm{constructor(a,o){this._tNode=a,this._lView=o}get(a,o,c){return d6(this._tNode,this._lView,a,c,o)}}function Kr(l){return kd(()=>{const a=l.prototype.constructor,o=a[wh]||Vk(a),c=Object.prototype;let u=Object.getPrototypeOf(l.prototype).constructor;for(;u&&u!==c;){const h=u[wh]||Vk(u);if(h&&h!==o)return h;u=Object.getPrototypeOf(u)}return h=>new h})}function Vk(l){return AV(l)?()=>{const a=Vk(vi(l));return a&&a()}:hp(l)}function mm(l){return function Uce(l,a){if("class"===a)return l.classes;if("style"===a)return l.styles;const o=l.attrs;if(o){const c=o.length;let u=0;for(;u<c;){const h=o[u];if(s6(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<c&&"string"==typeof o[u];)u++;else{if(h===a)return o[u+1];u+=2}}}return null}(Xs(),l)}const _m="__parameters__";function bm(l,a,o){return kd(()=>{const c=function zk(l){return function(...o){if(l){const c=l(...o);for(const u in c)this[u]=c[u]}}}(a);function u(...h){if(this instanceof u)return c.apply(this,h),this;const d=new u(...h);return f.annotation=d,f;function f(p,g,m){const v=p.hasOwnProperty(_m)?p[_m]:Object.defineProperty(p,_m,{value:[]})[_m];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(d),p}}return o&&(u.prototype=Object.create(o.prototype)),u.prototype.ngMetadataName=l,u.annotationCls=u,u})}class Wn{constructor(a,o){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Xe({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $ce=new Wn("AnalyzeForEntryComponents"),Nx=Function;function Kl(l,a){void 0===a&&(a=l);for(let o=0;o<l.length;o++){let c=l[o];Array.isArray(c)?(a===l&&(a=l.slice(0,o)),Kl(c,a)):a!==l&&a.push(c)}return a}function yu(l,a){l.forEach(o=>Array.isArray(o)?yu(o,a):a(o))}function v6(l,a,o){a>=l.length?l.push(o):l.splice(a,0,o)}function Lx(l,a){return a>=l.length-1?l.pop():l.splice(a,1)[0]}function sy(l,a){const o=[];for(let c=0;c<l;c++)o.push(a);return o}function rl(l,a,o){let c=Cm(l,a);return c>=0?l[1|c]=o:(c=~c,function Xce(l,a,o,c){let u=l.length;if(u==a)l.push(o,c);else if(1===u)l.push(c,l[0]),l[0]=o;else{for(u--,l.push(l[u-1],l[u]);u>a;)l[u]=l[u-2],u--;l[a]=o,l[a+1]=c}}(l,c,a,o)),c}function Uk(l,a){const o=Cm(l,a);if(o>=0)return l[1|o]}function Cm(l,a){return function b6(l,a,o){let c=0,u=l.length>>o;for(;u!==c;){const h=c+(u-c>>1),d=l[h<<o];if(a===d)return h<<o;d>a?u=h:c=h+1}return~(u<<o)}(l,a,1)}const oy={},Wk="__NG_DI_FLAG__",Vx="ngTempTokenPath",nue=/\n/gm,x6="__source",rue=Tr({provide:String,useValue:Tr});let ay;function w6(l){const a=ay;return ay=l,a}function sue(l,a=ui.Default){if(void 0===ay)throw new qi(203,"");return null===ay?FV(l,void 0,a):ay.get(l,a&ui.Optional?null:void 0,a)}function Ie(l,a=ui.Default){return(function $le(){return dk}()||sue)(vi(l),a)}function Gk(l){const a=[];for(let o=0;o<l.length;o++){const c=vi(l[o]);if(Array.isArray(c)){if(0===c.length)throw new qi(900,"");let u,h=ui.Default;for(let d=0;d<c.length;d++){const f=c[d],p=oue(f);"number"==typeof p?-1===p?u=f.token:h|=p:u=f}a.push(Ie(u,h))}else a.push(Ie(c))}return a}function ly(l,a){return l[Wk]=a,l.prototype[Wk]=a,l}function oue(l){return l[Wk]}const cy=ly(bm("Inject",l=>({token:l})),-1),sl=ly(bm("Optional"),8),Dh=ly(bm("SkipSelf"),4);class P6{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Rd(l){return l instanceof P6?l.changingThisBreaksApplicationSecurity:l}const Eue=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kue=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Is=(()=>((Is=Is||{})[Is.NONE=0]="NONE",Is[Is.HTML=1]="HTML",Is[Is.STYLE=2]="STYLE",Is[Is.SCRIPT=3]="SCRIPT",Is[Is.URL=4]="URL",Is[Is.RESOURCE_URL=5]="RESOURCE_URL",Is))();function fy(l){const a=function py(){const l=It();return l&&l[12]}();return a?a.sanitize(Is.URL,l)||"":function hy(l,a){const o=function Sue(l){return l instanceof P6&&l.getTypeName()||null}(l);if(null!=o&&o!==a){if("ResourceURL"===o&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===a}(l,"URL")?Rd(l):function Wx(l){return(l=String(l)).match(Eue)||l.match(kue)?l:"unsafe:"+l}(oi(l))}const H6="__ngContext__";function Oo(l,a){l[H6]=a}function Jk(l){const a=function gy(l){return l[H6]||null}(l);return a?Array.isArray(a)?a:a.lView:null}function tA(l){return l.ngOriginalError}function Que(l,...a){l.error(...a)}class Sm{constructor(){this._console=console}handleError(a){const o=this._findOriginalError(a),c=function Kue(l){return l&&l.ngErrorLogger||Que}(a);c(this._console,"ERROR",a),o&&c(this._console,"ORIGINAL ERROR",o)}_findOriginalError(a){let o=a&&tA(a);for(;o&&tA(o);)o=tA(o);return o||null}}const q6=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xr))();function jx(l){return l.ownerDocument.defaultView}function my(l){return l.ownerDocument}function Y6(l){return l.ownerDocument.body}function Cu(l){return l instanceof Function?l():l}var ol=(()=>((ol=ol||{})[ol.Important=1]="Important",ol[ol.DashCase=2]="DashCase",ol))();function iA(l,a){return undefined(l,a)}function vy(l){const a=l[3];return wc(a)?a[3]:a}function rA(l){return J6(l[13])}function sA(l){return J6(l[4])}function J6(l){for(;null!==l&&!wc(l);)l=l[4];return l}function Dm(l,a,o,c,u){if(null!=c){let h,d=!1;wc(c)?h=c:vu(c)&&(d=!0,c=c[0]);const f=As(c);0===l&&null!==o?null==u?sz(a,o,f):dp(a,o,f,u||null,!0):1===l&&null!==o?dp(a,o,f,u||null,!0):2===l?function dz(l,a,o){const c=$x(l,a);c&&function _he(l,a,o,c){cs(l)?l.removeChild(a,o,c):a.removeChild(o)}(l,c,a,o)}(a,f,d):3===l&&a.destroyNode(f),null!=h&&function Che(l,a,o,c,u){const h=o[7];h!==As(o)&&Dm(a,l,c,h,u);for(let f=10;f<o.length;f++){const p=o[f];_y(p[1],p,l,a,c,h)}}(a,l,h,o,u)}}function aA(l,a,o){if(cs(l))return l.createElement(a,o);{const c=null!==o?function hce(l){const a=l.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(o):null;return null===c?l.createElement(a):l.createElementNS(c,a)}}function tz(l,a){const o=l[9],c=o.indexOf(a),u=a[3];1024&a[2]&&(a[2]&=-1025,Mk(u,-1)),o.splice(c,1)}function lA(l,a){if(l.length<=10)return;const o=10+a,c=l[o];if(c){const u=c[17];null!==u&&u!==l&&tz(u,c),a>0&&(l[o-1][4]=c[4]);const h=Lx(l,10+a);!function uhe(l,a){_y(l,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const d=h[19];null!==d&&d.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function nz(l,a){if(!(256&a[2])){const o=a[11];cs(o)&&o.destroyNode&&_y(l,a,o,3,null,null),function fhe(l){let a=l[13];if(!a)return cA(l[1],l);for(;a;){let o=null;if(vu(a))o=a[13];else{const c=a[10];c&&(o=c)}if(!o){for(;a&&!a[4]&&a!==l;)vu(a)&&cA(a[1],a),a=a[3];null===a&&(a=l),vu(a)&&cA(a[1],a),o=a&&a[4]}a=o}}(a)}}function cA(l,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function vhe(l,a){let o;if(null!=l&&null!=(o=l.destroyHooks))for(let c=0;c<o.length;c+=2){const u=a[o[c]];if(!(u instanceof J_)){const h=o[c+1];if(Array.isArray(h))for(let d=0;d<h.length;d+=2){const f=u[h[d]],p=h[d+1];try{p.call(f)}finally{}}else try{h.call(u)}finally{}}}}(l,a),function mhe(l,a){const o=l.cleanup,c=a[7];let u=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const d=o[h+1],f="function"==typeof d?d(a):As(a[d]),p=c[u=o[h+2]],g=o[h+3];"boolean"==typeof g?f.removeEventListener(o[h],p,g):g>=0?c[u=g]():c[u=-g].unsubscribe(),h+=2}else{const d=c[u=o[h+1]];o[h].call(d)}if(null!==c){for(let h=u+1;h<c.length;h++)c[h]();a[7]=null}}(l,a),1===a[1].type&&cs(a[11])&&a[11].destroy();const o=a[17];if(null!==o&&wc(a[3])){o!==a[3]&&tz(o,a);const c=a[19];null!==c&&c.detachView(l)}}}function iz(l,a,o){return function rz(l,a,o){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return o[0];if(2&c.flags){const u=l.data[c.directiveStart].encapsulation;if(u===Cc.None||u===Cc.Emulated)return null}return Zl(c,o)}(l,a.parent,o)}function dp(l,a,o,c,u){cs(l)?l.insertBefore(a,o,c,u):a.insertBefore(o,c,u)}function sz(l,a,o){cs(l)?l.appendChild(a,o):a.appendChild(o)}function oz(l,a,o,c,u){null!==c?dp(l,a,o,c,u):sz(l,a,o)}function $x(l,a){return cs(l)?l.parentNode(a):a.parentNode}function az(l,a,o){return cz(l,a,o)}let cz=function lz(l,a,o){return 40&l.type?Zl(l,o):null};function qx(l,a,o,c){const u=iz(l,c,a),h=a[11],f=az(c.parent||a[6],c,a);if(null!=u)if(Array.isArray(o))for(let p=0;p<o.length;p++)oz(h,u,o[p],f,!1);else oz(h,u,o,f,!1)}function Yx(l,a){if(null!==a){const o=a.type;if(3&o)return Zl(a,l);if(4&o)return hA(-1,l[a.index]);if(8&o){const c=a.child;if(null!==c)return Yx(l,c);{const u=l[a.index];return wc(u)?hA(-1,u):As(u)}}if(32&o)return iA(a,l)()||As(l[a.index]);{const c=hz(l,a);return null!==c?Array.isArray(c)?c[0]:Yx(vy(l[16]),c):Yx(l,a.next)}}return null}function hz(l,a){return null!==a?l[16][6].projection[a.projection]:null}function hA(l,a){const o=10+l+1;if(o<a.length){const c=a[o],u=c[1].firstChild;if(null!==u)return Yx(c,u)}return a[7]}function dA(l,a,o,c,u,h,d){for(;null!=o;){const f=c[o.index],p=o.type;if(d&&0===a&&(f&&Oo(As(f),c),o.flags|=4),64!=(64&o.flags))if(8&p)dA(l,a,o.child,c,u,h,!1),Dm(a,l,u,f,h);else if(32&p){const g=iA(o,c);let m;for(;m=g();)Dm(a,l,u,m,h);Dm(a,l,u,f,h)}else 16&p?fz(l,a,c,o,u,h):Dm(a,l,u,f,h);o=d?o.projectionNext:o.next}}function _y(l,a,o,c,u,h){dA(o,c,l.firstChild,a,u,h,!1)}function fz(l,a,o,c,u,h){const d=o[16],p=d[6].projection[c.projection];if(Array.isArray(p))for(let g=0;g<p.length;g++)Dm(a,l,u,p[g],h);else dA(l,a,p,d[3],u,h,!0)}function pz(l,a,o){cs(l)?l.setAttribute(a,"style",o):a.style.cssText=o}function fA(l,a,o){cs(l)?""===o?l.removeAttribute(a,"class"):l.setAttribute(a,"class",o):a.className=o}function gz(l,a,o){let c=l.length;for(;;){const u=l.indexOf(a,o);if(-1===u)return u;if(0===u||l.charCodeAt(u-1)<=32){const h=a.length;if(u+h===c||l.charCodeAt(u+h)<=32)return u}o=u+1}}const mz="ng-template";function whe(l,a,o){let c=0;for(;c<l.length;){let u=l[c++];if(o&&"class"===u){if(u=l[c],-1!==gz(u.toLowerCase(),a,0))return!0}else if(1===u){for(;c<l.length&&"string"==typeof(u=l[c++]);)if(u.toLowerCase()===a)return!0;return!1}}return!1}function vz(l){return 4===l.type&&l.value!==mz}function She(l,a,o){return a===(4!==l.type||o?l.value:mz)}function The(l,a,o){let c=4;const u=l.attrs||[],h=function Ehe(l){for(let a=0;a<l.length;a++)if(s6(l[a]))return a;return l.length}(u);let d=!1;for(let f=0;f<a.length;f++){const p=a[f];if("number"!=typeof p){if(!d)if(4&c){if(c=2|1&c,""!==p&&!She(l,p,o)||""===p&&1===a.length){if(Tc(c))return!1;d=!0}}else{const g=8&c?p:a[++f];if(8&c&&null!==l.attrs){if(!whe(l.attrs,g,o)){if(Tc(c))return!1;d=!0}continue}const v=Dhe(8&c?"class":p,u,vz(l),o);if(-1===v){if(Tc(c))return!1;d=!0;continue}if(""!==g){let _;_=v>h?"":u[v+1].toLowerCase();const y=8&c?_:null;if(y&&-1!==gz(y,g,0)||2&c&&g!==_){if(Tc(c))return!1;d=!0}}}}else{if(!d&&!Tc(c)&&!Tc(p))return!1;if(d&&Tc(p))continue;d=!1,c=p|1&c}}return Tc(c)||d}function Tc(l){return 0==(1&l)}function Dhe(l,a,o,c){if(null===a)return-1;let u=0;if(c||!o){let h=!1;for(;u<a.length;){const d=a[u];if(d===l)return u;if(3===d||6===d)h=!0;else{if(1===d||2===d){let f=a[++u];for(;"string"==typeof f;)f=a[++u];continue}if(4===d)break;if(0===d){u+=4;continue}}u+=h?1:2}return-1}return function khe(l,a){let o=l.indexOf(4);if(o>-1)for(o++;o<l.length;){const c=l[o];if("number"==typeof c)return-1;if(c===a)return o;o++}return-1}(a,l)}function _z(l,a,o=!1){for(let c=0;c<a.length;c++)if(The(l,a[c],o))return!0;return!1}function Ahe(l,a){e:for(let o=0;o<a.length;o++){const c=a[o];if(l.length===c.length){for(let u=0;u<l.length;u++)if(l[u]!==c[u])continue e;return!0}}return!1}function yz(l,a){return l?":not("+a.trim()+")":a}function Ihe(l){let a=l[0],o=1,c=2,u="",h=!1;for(;o<l.length;){let d=l[o];if("string"==typeof d)if(2&c){const f=l[++o];u+="["+d+(f.length>0?'="'+f+'"':"")+"]"}else 8&c?u+="."+d:4&c&&(u+=" "+d);else""!==u&&!Tc(d)&&(a+=yz(h,u),u=""),c=d,h=h||!Tc(c);o++}return""!==u&&(a+=yz(h,u)),a}const ai={};function P(l){bz(Yi(),It(),na()+l,wx())}function bz(l,a,o,c){if(!c)if(3==(3&a[2])){const h=l.preOrderCheckHooks;null!==h&&Ex(a,h,o)}else{const h=l.preOrderHooks;null!==h&&kx(a,h,0,o)}Pd(o)}function Xx(l,a){return l<<17|a<<2}function Dc(l){return l>>17&32767}function pA(l){return 2|l}function Mh(l){return(131068&l)>>2}function gA(l,a){return-131069&l|a<<2}function mA(l){return 1|l}function Iz(l,a){const o=l.contentQueries;if(null!==o)for(let c=0;c<o.length;c+=2){const u=o[c],h=o[c+1];if(-1!==h){const d=l.data[h];Pk(u),d.contentQueries(2,a[h],h)}}}function yy(l,a,o,c,u,h,d,f,p,g){const m=a.blueprint.slice();return m[0]=u,m[2]=140|c,$V(m),m[3]=m[15]=l,m[8]=o,m[10]=d||l&&l[10],m[11]=f||l&&l[11],m[12]=p||l&&l[12]||null,m[9]=g||l&&l[9]||null,m[6]=h,m[16]=2==a.type?l[16]:m,m}function Mm(l,a,o,c,u){let h=l.data[a];if(null===h)h=function TA(l,a,o,c,u){const h=YV(),d=Ek(),p=l.data[a]=function Xhe(l,a,o,c,u,h){return{type:o,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?h:h&&h.parent,o,a,c,u);return null===l.firstChild&&(l.firstChild=p),null!==h&&(d?null==h.child&&null!==p.parent&&(h.child=p):null===h.next&&(h.next=p)),p}(l,a,o,c,u),function wce(){return Kn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=c,h.attrs=u;const d=function Q_(){const l=Kn.lFrame,a=l.currentTNode;return l.isParent?a:a.parent}();h.injectorIndex=null===d?-1:d.injectorIndex}return _u(h,!0),h}function Em(l,a,o,c){if(0===o)return-1;const u=a.length;for(let h=0;h<o;h++)a.push(c),l.blueprint.push(c),l.data.push(null);return u}function by(l,a,o){Tx(a);try{const c=l.viewQuery;null!==c&&FA(1,c,o);const u=l.template;null!==u&&Pz(l,a,u,1,o),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&Iz(l,a),l.staticViewQueries&&FA(2,l.viewQuery,o);const h=l.components;null!==h&&function $he(l,a){for(let o=0;o<a.length;o++)fde(l,a[o])}(a,h)}catch(c){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),c}finally{a[2]&=-5,Dx()}}function km(l,a,o,c){const u=a[2];if(256==(256&u))return;Tx(a);const h=wx();try{$V(a),function XV(l){return Kn.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==o&&Pz(l,a,o,2,c);const d=3==(3&u);if(!h)if(d){const g=l.preOrderCheckHooks;null!==g&&Ex(a,g,null)}else{const g=l.preOrderHooks;null!==g&&kx(a,g,0,null),Ok(a,0)}if(function hde(l){for(let a=rA(l);null!==a;a=sA(a)){if(!a[2])continue;const o=a[9];for(let c=0;c<o.length;c++){const u=o[c],h=u[3];0==(1024&u[2])&&Mk(h,1),u[2]|=1024}}}(a),function ude(l){for(let a=rA(l);null!==a;a=sA(a))for(let o=10;o<a.length;o++){const c=a[o],u=c[1];Dk(c)&&km(u,c,u.template,c[8])}}(a),null!==l.contentQueries&&Iz(l,a),!h)if(d){const g=l.contentCheckHooks;null!==g&&Ex(a,g)}else{const g=l.contentHooks;null!==g&&kx(a,g,1),Ok(a,1)}!function Ghe(l,a){const o=l.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const u=o[c];if(u<0)Pd(~u);else{const h=u,d=o[++c],f=o[++c];Sce(d,h),f(2,a[h])}}}finally{Pd(-1)}}(l,a);const f=l.components;null!==f&&function jhe(l,a){for(let o=0;o<a.length;o++)dde(l,a[o])}(a,f);const p=l.viewQuery;if(null!==p&&FA(2,p,c),!h)if(d){const g=l.viewCheckHooks;null!==g&&Ex(a,g)}else{const g=l.viewHooks;null!==g&&kx(a,g,2),Ok(a,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),h||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Mk(a[3],-1))}finally{Dx()}}function qhe(l,a,o,c){const u=a[10],h=!wx(),d=jV(a);try{h&&!d&&u.begin&&u.begin(),d&&by(l,a,c),km(l,a,o,c)}finally{h&&!d&&u.end&&u.end()}}function Pz(l,a,o,c,u){const h=na(),d=2&c;try{Pd(-1),d&&a.length>20&&bz(l,a,20,wx()),o(c,u)}finally{Pd(h)}}function Oz(l,a,o){if(_k(a)){const u=a.directiveEnd;for(let h=a.directiveStart;h<u;h++){const d=l.data[h];d.contentQueries&&d.contentQueries(1,o[h],h)}}}function DA(l,a,o){!qV()||(function nde(l,a,o,c){const u=o.directiveStart,h=o.directiveEnd;l.firstCreatePass||ty(o,a),Oo(c,a);const d=o.initialInputs;for(let f=u;f<h;f++){const p=l.data[f],g=Sc(p);g&&ade(a,o,p);const m=ny(a,l,f,o);Oo(m,a),null!==d&&lde(0,f-u,m,p,0,d),g&&(il(o.index,a)[8]=m)}}(l,a,o,Zl(o,a)),128==(128&o.flags)&&function ide(l,a,o){const c=o.directiveStart,u=o.directiveEnd,d=o.index,f=function Tce(){return Kn.lFrame.currentDirectiveIndex}();try{Pd(d);for(let p=c;p<u;p++){const g=l.data[p],m=a[p];Ak(p),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&Uz(g,m)}}finally{Pd(-1),Ak(f)}}(l,a,o))}function MA(l,a,o=Zl){const c=a.localNames;if(null!==c){let u=a.index+1;for(let h=0;h<c.length;h+=2){const d=c[h+1],f=-1===d?o(a,l):l[d];l[u++]=f}}}function Fz(l){const a=l.tView;return null===a||a.incompleteFirstPass?l.tView=Qx(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):a}function Qx(l,a,o,c,u,h,d,f,p,g){const m=20+c,v=m+u,_=function Yhe(l,a){const o=[];for(let c=0;c<a;c++)o.push(c<l?null:ai);return o}(m,v),y="function"==typeof g?g():g;return _[1]={type:l,blueprint:_,template:o,queries:null,viewQuery:f,declTNode:a,data:_.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:p,consts:y,incompleteFirstPass:!1}}function Lz(l,a,o,c){const u=qz(a);null===o?u.push(c):(u.push(o),l.firstCreatePass&&Yz(l).push(c,u.length-1))}function Bz(l,a,o){for(let c in l)if(l.hasOwnProperty(c)){const u=l[c];(o=null===o?{}:o).hasOwnProperty(c)?o[c].push(a,u):o[c]=[a,u]}return o}function al(l,a,o,c,u,h,d,f){const p=Zl(a,o);let m,g=a.inputs;!f&&null!=g&&(m=g[c])?(Kz(l,o,m,c,u),bx(a)&&function Qhe(l,a){const o=il(a,l);16&o[2]||(o[2]|=64)}(o,a.index)):3&a.type&&(c=function Khe(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(c),u=null!=d?d(u,a.value||"",c):u,cs(h)?h.setProperty(p,c,u):Rk(c)||(p.setProperty?p.setProperty(c,u):p[c]=u))}function EA(l,a,o,c){let u=!1;if(qV()){const h=function rde(l,a,o){const c=l.directiveRegistry;let u=null;if(c)for(let h=0;h<c.length;h++){const d=c[h];_z(o,d.selectors,!1)&&(u||(u=[]),Fx(ty(o,a),l,d.type),Sc(d)?(Hz(l,o),u.unshift(d)):u.push(d))}return u}(l,a,o),d=null===c?null:{"":-1};if(null!==h){u=!0,Wz(o,l.data.length,h.length);for(let m=0;m<h.length;m++){const v=h[m];v.providersResolver&&v.providersResolver(v)}let f=!1,p=!1,g=Em(l,a,h.length,null);for(let m=0;m<h.length;m++){const v=h[m];o.mergedAttrs=Ix(o.mergedAttrs,v.hostAttrs),Gz(l,o,a,g,v),ode(g,v,d),null!==v.contentQueries&&(o.flags|=8),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(o.flags|=128);const _=v.type.prototype;!f&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o.index),f=!0),!p&&(_.ngOnChanges||_.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o.index),p=!0),g++}!function Zhe(l,a){const c=a.directiveEnd,u=l.data,h=a.attrs,d=[];let f=null,p=null;for(let g=a.directiveStart;g<c;g++){const m=u[g],v=m.inputs,_=null===h||vz(a)?null:cde(v,h);d.push(_),f=Bz(v,g,f),p=Bz(m.outputs,g,p)}null!==f&&(f.hasOwnProperty("class")&&(a.flags|=16),f.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=d,a.inputs=f,a.outputs=p}(l,o)}d&&function sde(l,a,o){if(a){const c=l.localNames=[];for(let u=0;u<a.length;u+=2){const h=o[a[u+1]];if(null==h)throw new qi(-301,`Export of name '${a[u+1]}' not found!`);c.push(a[u],h)}}}(o,c,d)}return o.mergedAttrs=Ix(o.mergedAttrs,o.attrs),u}function zz(l,a,o,c,u,h){const d=h.hostBindings;if(d){let f=l.hostBindingOpCodes;null===f&&(f=l.hostBindingOpCodes=[]);const p=~a.index;(function tde(l){let a=l.length;for(;a>0;){const o=l[--a];if("number"==typeof o&&o<0)return o}return 0})(f)!=p&&f.push(p),f.push(c,u,d)}}function Uz(l,a){null!==l.hostBindings&&l.hostBindings(1,a)}function Hz(l,a){a.flags|=2,(l.components||(l.components=[])).push(a.index)}function ode(l,a,o){if(o){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)o[a.exportAs[c]]=l;Sc(a)&&(o[""]=l)}}function Wz(l,a,o){l.flags|=1,l.directiveStart=a,l.directiveEnd=a+o,l.providerIndexes=a}function Gz(l,a,o,c,u){l.data[c]=u;const h=u.factory||(u.factory=hp(u.type)),d=new J_(h,Sc(u),null);l.blueprint[c]=d,o[c]=d,zz(l,a,0,c,Em(l,o,u.hostVars,ai),u)}function ade(l,a,o){const c=Zl(a,l),u=Fz(o),h=l[10],d=Jx(l,yy(l,u,null,o.onPush?64:16,c,a,h,h.createRenderer(c,o),null,null));l[a.index]=d}function xu(l,a,o,c,u,h){const d=Zl(l,a);!function kA(l,a,o,c,u,h,d){if(null==h)cs(l)?l.removeAttribute(a,u,o):a.removeAttribute(u);else{const f=null==d?oi(h):d(h,c||"",u);cs(l)?l.setAttribute(a,u,f,o):o?a.setAttributeNS(o,u,f):a.setAttribute(u,f)}}(a[11],d,h,l.value,o,c,u)}function lde(l,a,o,c,u,h){const d=h[a];if(null!==d){const f=c.setInput;for(let p=0;p<d.length;){const g=d[p++],m=d[p++],v=d[p++];null!==f?c.setInput(o,v,g,m):o[m]=v}}}function cde(l,a){let o=null,c=0;for(;c<a.length;){const u=a[c];if(0!==u)if(5!==u){if("number"==typeof u)break;l.hasOwnProperty(u)&&(null===o&&(o=[]),o.push(u,l[u],a[c+1])),c+=2}else c+=2;else c+=4}return o}function jz(l,a,o,c){return new Array(l,!0,!1,a,null,0,c,o,null,null)}function dde(l,a){const o=il(a,l);if(Dk(o)){const c=o[1];80&o[2]?km(c,o,c.template,o[8]):o[5]>0&&AA(o)}}function AA(l){for(let c=rA(l);null!==c;c=sA(c))for(let u=10;u<c.length;u++){const h=c[u];if(1024&h[2]){const d=h[1];km(d,h,d.template,h[8])}else h[5]>0&&AA(h)}const o=l[1].components;if(null!==o)for(let c=0;c<o.length;c++){const u=il(o[c],l);Dk(u)&&u[5]>0&&AA(u)}}function fde(l,a){const o=il(a,l),c=o[1];(function pde(l,a){for(let o=a.length;o<l.blueprint.length;o++)a.push(l.blueprint[o])})(c,o),by(c,o,o[8])}function Jx(l,a){return l[13]?l[14][4]=a:l[13]=a,l[14]=a,a}function IA(l){for(;l;){l[2]|=64;const a=vy(l);if(tce(l)&&!a)return l;l=a}return null}function OA(l,a,o){const c=a[10];c.begin&&c.begin();try{km(l,a,l.template,o)}catch(u){throw Zz(a,u),u}finally{c.end&&c.end()}}function $z(l){!function PA(l){for(let a=0;a<l.components.length;a++){const o=l.components[a],c=Jk(o),u=c[1];qhe(u,c,u.template,o)}}(l[8])}function FA(l,a,o){Pk(0),a(l,o)}const _de=(()=>Promise.resolve(null))();function qz(l){return l[7]||(l[7]=[])}function Yz(l){return l.cleanup||(l.cleanup=[])}function Zz(l,a){const o=l[9],c=o?o.get(Sm,null):null;c&&c.handleError(a)}function Kz(l,a,o,c,u){for(let h=0;h<o.length;){const d=o[h++],f=o[h++],p=a[d],g=l.data[d];null!==g.setInput?g.setInput(p,u,c,f):p[f]=u}}function Eh(l,a,o){const c=xx(a,l);!function ez(l,a,o){cs(l)?l.setValue(a,o):a.textContent=o}(l[11],c,o)}function ew(l,a,o){let c=o?l.styles:null,u=o?l.classes:null,h=0;if(null!==a)for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?h=f:1==h?u=lk(u,f):2==h&&(c=lk(c,f+": "+a[++d]+";"))}o?l.styles=c:l.stylesWithoutHost=c,o?l.classes=u:l.classesWithoutHost=u}const RA=new Wn("INJECTOR",-1);class Qz{get(a,o=oy){if(o===oy){const c=new Error(`NullInjectorError: No provider for ${fr(a)}!`);throw c.name="NullInjectorError",c}return o}}const NA=new Wn("Set Injector scope."),Cy={},Cde={};let LA;function Jz(){return void 0===LA&&(LA=new Qz),LA}function eU(l,a=null,o=null,c){const u=tU(l,a,o,c);return u._resolveInjectorDefTypes(),u}function tU(l,a=null,o=null,c){return new xde(l,o,a||Jz(),c)}class xde{constructor(a,o,c,u=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];o&&yu(o,f=>this.processProvider(f,a,o)),yu([a],f=>this.processInjectorType(f,[],h)),this.records.set(RA,Am(void 0,this));const d=this.records.get(NA);this.scope=null!=d?d.value:null,this.source=u||("object"==typeof a?null:fr(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,o=oy,c=ui.Default){this.assertNotDestroyed();const u=w6(this),h=Ed(void 0);try{if(!(c&ui.SkipSelf)){let f=this.records.get(a);if(void 0===f){const p=function Ade(l){return"function"==typeof l||"object"==typeof l&&l instanceof Wn}(a)&&uk(a);f=p&&this.injectableDefInScope(p)?Am(BA(a),Cy):null,this.records.set(a,f)}if(null!=f)return this.hydrate(a,f)}return(c&ui.Self?Jz():this.parent).get(a,o=c&ui.Optional&&o===oy?null:o)}catch(d){if("NullInjectorError"===d.name){if((d[Vx]=d[Vx]||[]).unshift(fr(a)),u)throw d;return function aue(l,a,o,c){const u=l[Vx];throw a[x6]&&u.unshift(a[x6]),l.message=function lue(l,a,o,c=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;let u=fr(a);if(Array.isArray(a))u=a.map(fr).join(" -> ");else if("object"==typeof a){let h=[];for(let d in a)if(a.hasOwnProperty(d)){let f=a[d];h.push(d+":"+("string"==typeof f?JSON.stringify(f):fr(f)))}u=`{${h.join(", ")}}`}return`${o}${c?"("+c+")":""}[${u}]: ${l.replace(nue,"\n  ")}`}("\n"+l.message,u,o,c),l.ngTokenPath=u,l[Vx]=null,l}(d,a,"R3InjectorError",this.source)}throw d}finally{Ed(h),w6(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((c,u)=>a.push(fr(u))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new qi(205,"")}processInjectorType(a,o,c){if(!(a=vi(a)))return!1;let u=PV(a);const h=null==u&&a.ngModule||void 0,d=void 0===h?a:h,f=-1!==c.indexOf(d);if(void 0!==h&&(u=PV(h)),null==u)return!1;if(null!=u.imports&&!f){let m;c.push(d);try{yu(u.imports,v=>{this.processInjectorType(v,o,c)&&(void 0===m&&(m=[]),m.push(v))})}finally{}if(void 0!==m)for(let v=0;v<m.length;v++){const{ngModule:_,providers:y}=m[v];yu(y,b=>this.processProvider(b,_,y||Dr))}}this.injectorDefTypes.add(d);const p=hp(d)||(()=>new d);this.records.set(d,Am(p,Cy));const g=u.providers;if(null!=g&&!f){const m=a;yu(g,v=>this.processProvider(v,m,g))}return void 0!==h&&void 0!==a.providers}processProvider(a,o,c){let u=Im(a=vi(a))?a:vi(a&&a.provide);const h=function Sde(l,a,o){return iU(l)?Am(void 0,l.useValue):Am(nU(l),Cy)}(a);if(Im(a)||!0!==a.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Am(void 0,Cy,!0),d.factory=()=>Gk(d.multi),this.records.set(u,d)),u=a,d.multi.push(a)}this.records.set(u,h)}hydrate(a,o){return o.value===Cy&&(o.value=Cde,o.value=o.factory()),"object"==typeof o.value&&o.value&&function kde(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(a){if(!a.providedIn)return!1;const o=vi(a.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function BA(l){const a=uk(l),o=null!==a?a.factory:hp(l);if(null!==o)return o;if(l instanceof Wn)throw new qi(204,"");if(l instanceof Function)return function wde(l){const a=l.length;if(a>0)throw sy(a,"?"),new qi(204,"");const o=function Wle(l){const a=l&&(l[gx]||l[OV]);if(a){const o=function Gle(l){if(l.hasOwnProperty("name"))return l.name;const a=(""+l).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),a}return null}(l);return null!==o?()=>o.factory(l):()=>new l}(l);throw new qi(204,"")}function nU(l,a,o){let c;if(Im(l)){const u=vi(l);return hp(u)||BA(u)}if(iU(l))c=()=>vi(l.useValue);else if(function Dde(l){return!(!l||!l.useFactory)}(l))c=()=>l.useFactory(...Gk(l.deps||[]));else if(function Tde(l){return!(!l||!l.useExisting)}(l))c=()=>Ie(vi(l.useExisting));else{const u=vi(l&&(l.useClass||l.provide));if(!function Ede(l){return!!l.deps}(l))return hp(u)||BA(u);c=()=>new u(...Gk(l.deps))}return c}function Am(l,a,o=!1){return{factory:l,value:a,multi:o?[]:void 0}}function iU(l){return null!==l&&"object"==typeof l&&rue in l}function Im(l){return"function"==typeof l}let or=(()=>{class l{static create(o,c){var u;if(Array.isArray(o))return eU({name:""},c,o,"");{const h=null!==(u=o.name)&&void 0!==u?u:"";return eU({name:h},o.parent,o.providers,h)}}}return l.THROW_IF_NOT_FOUND=oy,l.NULL=new Qz,l.\u0275prov=Xe({token:l,providedIn:"any",factory:()=>Ie(RA)}),l.__NG_ELEMENT_ID__=-1,l})();function Bde(l,a){Mx(Jk(l)[1],Xs())}function dn(l){let a=function gU(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),o=!0;const c=[l];for(;a;){let u;if(Sc(l))u=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new qi(903,"");u=a.\u0275dir}if(u){if(o){c.push(u);const d=l;d.inputs=UA(l.inputs),d.declaredInputs=UA(l.declaredInputs),d.outputs=UA(l.outputs);const f=u.hostBindings;f&&Hde(l,f);const p=u.viewQuery,g=u.contentQueries;if(p&&zde(l,p),g&&Ude(l,g),ak(l.inputs,u.inputs),ak(l.declaredInputs,u.declaredInputs),ak(l.outputs,u.outputs),Sc(u)&&u.data.animation){const m=l.data;m.animation=(m.animation||[]).concat(u.data.animation)}}const h=u.features;if(h)for(let d=0;d<h.length;d++){const f=h[d];f&&f.ngInherit&&f(l),f===dn&&(o=!1)}}a=Object.getPrototypeOf(a)}!function Vde(l){let a=0,o=null;for(let c=l.length-1;c>=0;c--){const u=l[c];u.hostVars=a+=u.hostVars,u.hostAttrs=Ix(u.hostAttrs,o=Ix(o,u.hostAttrs))}}(c)}function UA(l){return l===om?{}:l===Dr?[]:l}function zde(l,a){const o=l.viewQuery;l.viewQuery=o?(c,u)=>{a(c,u),o(c,u)}:a}function Ude(l,a){const o=l.contentQueries;l.contentQueries=o?(c,u,h)=>{a(c,u,h),o(c,u,h)}:a}function Hde(l,a){const o=l.hostBindings;l.hostBindings=o?(c,u)=>{a(c,u),o(c,u)}:a}let tw=null;function Pm(){if(!tw){const l=xr.Symbol;if(l&&l.iterator)tw=l.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<a.length;++o){const c=a[o];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(tw=c)}}}return tw}function xy(l){return!!HA(l)&&(Array.isArray(l)||!(l instanceof Map)&&Pm()in l)}function HA(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function wu(l,a,o){return l[a]=o}function wy(l,a){return l[a]}function Fo(l,a,o){return!Object.is(l[a],o)&&(l[a]=o,!0)}function fp(l,a,o,c){const u=Fo(l,a,o);return Fo(l,a+1,c)||u}function nw(l,a,o,c,u){const h=fp(l,a,o,c);return Fo(l,a+2,u)||h}function Ql(l,a,o,c,u,h){const d=fp(l,a,o,c);return fp(l,a+2,u,h)||d}function et(l,a,o,c){const u=It();return Fo(u,dm(),a)&&(Yi(),xu(us(),u,l,a,o,c)),et}function Fm(l,a,o,c){return Fo(l,dm(),o)?a+oi(o)+c:ai}function Z(l,a,o,c,u,h,d,f){const p=It(),g=Yi(),m=l+20,v=g.firstCreatePass?function Xde(l,a,o,c,u,h,d,f,p){const g=a.consts,m=Mm(a,l,4,d||null,Id(g,f));EA(a,o,m,Id(g,p)),Mx(a,m);const v=m.tViews=Qx(2,m,c,u,h,a.directiveRegistry,a.pipeRegistry,null,a.schemas,g);return null!==a.queries&&(a.queries.template(a,m),v.queries=a.queries.embeddedTView(m)),m}(m,g,p,a,o,c,u,h,d):g.data[m];_u(v,!1);const _=p[11].createComment("");qx(g,p,_,v),Oo(_,p),Jx(p,p[m]=jz(_,p,_,v)),Cx(v)&&DA(g,p,v),null!=d&&MA(p,v,f)}function uo(l){return hm(function xce(){return Kn.lFrame.contextLView}(),20+l)}function R(l,a=ui.Default){const o=It();return null===o?Ie(l,a):d6(Xs(),o,vi(l),a)}function qA(){throw new Error("invalid")}function O(l,a,o){const c=It();return Fo(c,dm(),a)&&al(Yi(),us(),c,l,a,c[11],o,!1),O}function YA(l,a,o,c,u){const d=u?"class":"style";Kz(l,o,a.inputs[d],d,c)}function M(l,a,o,c){const u=It(),h=Yi(),d=20+l,f=u[11],p=u[d]=aA(f,a,function Ice(){return Kn.lFrame.currentNamespace}()),g=h.firstCreatePass?function mfe(l,a,o,c,u,h,d){const f=a.consts,g=Mm(a,l,2,u,Id(f,h));return EA(a,o,g,Id(f,d)),null!==g.attrs&&ew(g,g.attrs,!1),null!==g.mergedAttrs&&ew(g,g.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,g),g}(d,h,u,0,a,o,c):h.data[d];_u(g,!0);const m=g.mergedAttrs;null!==m&&Ax(f,p,m);const v=g.classes;null!==v&&fA(f,p,v);const _=g.styles;null!==_&&pz(f,p,_),64!=(64&g.flags)&&qx(h,u,p,g),0===function vce(){return Kn.lFrame.elementDepthCount}()&&Oo(p,u),function _ce(){Kn.lFrame.elementDepthCount++}(),Cx(g)&&(DA(h,u,g),Oz(h,g,u)),null!==c&&MA(u,g)}function E(){let l=Xs();Ek()?kk():(l=l.parent,_u(l,!1));const a=l;!function yce(){Kn.lFrame.elementDepthCount--}();const o=Yi();o.firstCreatePass&&(Mx(o,l),_k(l)&&o.queries.elementEnd(l)),null!=a.classesWithoutHost&&function Nce(l){return 0!=(16&l.flags)}(a)&&YA(o,a,It(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Lce(l){return 0!=(32&l.flags)}(a)&&YA(o,a,It(),a.stylesWithoutHost,!1)}function me(l,a,o,c){M(l,a,o,c),E()}function pr(l,a,o){const c=It(),u=Yi(),h=l+20,d=u.firstCreatePass?function vfe(l,a,o,c,u){const h=a.consts,d=Id(h,c),f=Mm(a,l,8,"ng-container",d);return null!==d&&ew(f,d,!0),EA(a,o,f,Id(h,u)),null!==a.queries&&a.queries.elementStart(a,f),f}(h,u,c,a,o):u.data[h];_u(d,!0);const f=c[h]=c[11].createComment("");qx(u,c,f,d),Oo(f,c),Cx(d)&&(DA(u,c,d),Oz(u,d,c)),null!=o&&MA(c,d)}function gr(){let l=Xs();const a=Yi();Ek()?kk():(l=l.parent,_u(l,!1)),a.firstCreatePass&&(Mx(a,l),_k(l)&&a.queries.elementEnd(l))}function ra(l,a,o){pr(l,a,o),gr()}function gt(){return It()}function Sy(l){return!!l&&"function"==typeof l.then}function RU(l){return!!l&&"function"==typeof l.subscribe}const XA=RU;function ee(l,a,o,c){const u=It(),h=Yi(),d=Xs();return function NU(l,a,o,c,u,h,d,f){const p=Cx(c),m=l.firstCreatePass&&Yz(l),v=a[8],_=qz(a);let y=!0;if(3&c.type||f){const C=Zl(c,a),w=f?f(C):C,S=_.length,D=f?T=>f(As(T[c.index])):c.index;if(cs(o)){let T=null;if(!f&&p&&(T=function _fe(l,a,o,c){const u=l.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const d=u[h];if(d===o&&u[h+1]===c){const f=a[7],p=u[h+2];return f.length>p?f[p]:null}"string"==typeof d&&(h+=2)}return null}(l,a,u,c.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=h,T.__ngLastListenerFn__=h,y=!1;else{h=KA(c,a,v,h,!1);const A=o.listen(w,u,h);_.push(h,A),m&&m.push(u,D,S,S+1)}}else h=KA(c,a,v,h,!0),w.addEventListener(u,h,d),_.push(h),m&&m.push(u,D,S,d)}else h=KA(c,a,v,h,!1);const b=c.outputs;let x;if(y&&null!==b&&(x=b[u])){const C=x.length;if(C)for(let w=0;w<C;w+=2){const I=a[x[w]][x[w+1]].subscribe(h),N=_.length;_.push(h,I),m&&m.push(u,c.index,N,-(N+1))}}}(h,u,u[11],d,l,a,!!o,c),ee}function LU(l,a,o,c){try{return!1!==o(c)}catch(u){return Zz(l,u),!1}}function KA(l,a,o,c,u){return function h(d){if(d===Function)return c;const f=2&l.flags?il(l.index,a):a;0==(32&a[2])&&IA(f);let p=LU(a,0,c,d),g=h.__ngNextListenerFn__;for(;g;)p=LU(a,0,g,d)&&p,g=g.__ngNextListenerFn__;return u&&!1===p&&(d.preventDefault(),d.returnValue=!1),p}}function X(l=1){return function Mce(l){return(Kn.lFrame.contextLView=function Ece(l,a){for(;l>0;)a=a[15],l--;return a}(l,Kn.lFrame.contextLView))[8]}(l)}function yfe(l,a){let o=null;const c=function Mhe(l){const a=l.attrs;if(null!=a){const o=a.indexOf(5);if(0==(1&o))return a[o+1]}return null}(l);for(let u=0;u<a.length;u++){const h=a[u];if("*"!==h){if(null===c?_z(l,h,!0):Ahe(c,h))return u}else o=u}return o}function Kt(l){const a=It()[16][6];if(!a.projection){const c=a.projection=sy(l?l.length:1,null),u=c.slice();let h=a.child;for(;null!==h;){const d=l?yfe(h,l):0;null!==d&&(u[d]?u[d].projectionNext=h:c[d]=h,u[d]=h),h=h.next}}}function ct(l,a=0,o){const c=It(),u=Yi(),h=Mm(u,20+l,16,null,o||null);null===h.projection&&(h.projection=a),kk(),64!=(64&h.flags)&&function bhe(l,a,o){fz(a[11],0,a,o,iz(l,o,a),az(o.parent||a[6],o,a))}(u,c,h)}function rw(l,a,o){return Wm(l,"",a,"",o),rw}function Wm(l,a,o,c,u){const h=It(),d=Fm(h,a,o,c);return d!==ai&&al(Yi(),us(),h,l,d,h[11],u,!1),Wm}function $U(l,a,o,c,u){const h=l[o+1],d=null===a;let f=c?Dc(h):Mh(h),p=!1;for(;0!==f&&(!1===p||d);){const m=l[f+1];xfe(l[f],a)&&(p=!0,l[f+1]=c?mA(m):pA(m)),f=c?Dc(m):Mh(m)}p&&(l[o+1]=c?pA(h):mA(h))}function xfe(l,a){return null===l||null==a||(Array.isArray(l)?l[1]:l)===a||!(!Array.isArray(l)||"string"!=typeof a)&&Cm(l,a)>=0}const Ks={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qU(l){return l.substring(Ks.key,Ks.keyEnd)}function YU(l,a){const o=Ks.textEnd;return o===a?-1:(a=Ks.keyEnd=function Dfe(l,a,o){for(;a<o&&l.charCodeAt(a)>32;)a++;return a}(l,Ks.key=a,o),Gm(l,a,o))}function Gm(l,a,o){for(;a<o&&l.charCodeAt(a)<=32;)a++;return a}function At(l,a){return function Ec(l,a,o,c){const u=It(),h=Yi(),d=Th(2);h.firstUpdatePass&&eH(h,l,d,c),a!==ai&&Fo(u,d,a)&&nH(h,h.data[na()],u,u[11],l,u[d+1]=function Nfe(l,a){return null==l||("string"==typeof a?l+=a:"object"==typeof l&&(l=fr(Rd(l)))),l}(a,o),c,d)}(l,a,null,!0),At}function QA(l){!function kc(l,a,o,c){const u=Yi(),h=Th(2);u.firstUpdatePass&&eH(u,null,h,c);const d=It();if(o!==ai&&Fo(d,h,o)){const f=u.data[na()];if(rH(f,c)&&!JU(u,h)){let p=c?f.classesWithoutHost:f.stylesWithoutHost;null!==p&&(o=lk(p,o||"")),YA(u,f,d,o,c)}else!function Rfe(l,a,o,c,u,h,d,f){u===ai&&(u=Dr);let p=0,g=0,m=0<u.length?u[0]:null,v=0<h.length?h[0]:null;for(;null!==m||null!==v;){const _=p<u.length?u[p+1]:void 0,y=g<h.length?h[g+1]:void 0;let x,b=null;m===v?(p+=2,g+=2,_!==y&&(b=v,x=y)):null===v||null!==m&&m<v?(p+=2,b=m):(g+=2,b=v,x=y),null!==b&&nH(l,a,o,c,b,x,d,f),m=p<u.length?u[p]:null,v=g<h.length?h[g]:null}}(u,f,d,d[11],d[h+1],d[h+1]=function Ffe(l,a,o){if(null==o||""===o)return Dr;const c=[],u=Rd(o);if(Array.isArray(u))for(let h=0;h<u.length;h++)l(c,u[h],!0);else if("object"==typeof u)for(const h in u)u.hasOwnProperty(h)&&l(c,h,u[h]);else"string"==typeof u&&a(c,u);return c}(l,a,o),c,h)}}(rl,Tu,l,!0)}function Tu(l,a){for(let o=function Sfe(l){return function ZU(l){Ks.key=0,Ks.keyEnd=0,Ks.value=0,Ks.valueEnd=0,Ks.textEnd=l.length}(l),YU(l,Gm(l,0,Ks.textEnd))}(a);o>=0;o=YU(a,o))rl(l,qU(a),!0)}function JU(l,a){return a>=l.expandoStartIndex}function eH(l,a,o,c){const u=l.data;if(null===u[o+1]){const h=u[na()],d=JU(l,o);rH(h,c)&&null===a&&!d&&(a=!1),a=function Afe(l,a,o,c){const u=function Ik(l){const a=Kn.lFrame.currentDirectiveIndex;return-1===a?null:l[a]}(l);let h=c?a.residualClasses:a.residualStyles;if(null===u)0===(c?a.classBindings:a.styleBindings)&&(o=Ty(o=JA(null,l,a,o,c),a.attrs,c),h=null);else{const d=a.directiveStylingLast;if(-1===d||l[d]!==u)if(o=JA(u,l,a,o,c),null===h){let p=function Ife(l,a,o){const c=o?a.classBindings:a.styleBindings;if(0!==Mh(c))return l[Dc(c)]}(l,a,c);void 0!==p&&Array.isArray(p)&&(p=JA(null,l,a,p[1],c),p=Ty(p,a.attrs,c),function Pfe(l,a,o,c){l[Dc(o?a.classBindings:a.styleBindings)]=c}(l,a,c,p))}else h=function Ofe(l,a,o){let c;const u=a.directiveEnd;for(let h=1+a.directiveStylingLast;h<u;h++)c=Ty(c,l[h].hostAttrs,o);return Ty(c,a.attrs,o)}(l,a,c)}return void 0!==h&&(c?a.residualClasses=h:a.residualStyles=h),o}(u,h,a,c),function bfe(l,a,o,c,u,h){let d=h?a.classBindings:a.styleBindings,f=Dc(d),p=Mh(d);l[c]=o;let m,g=!1;if(Array.isArray(o)){const v=o;m=v[1],(null===m||Cm(v,m)>0)&&(g=!0)}else m=o;if(u)if(0!==p){const _=Dc(l[f+1]);l[c+1]=Xx(_,f),0!==_&&(l[_+1]=gA(l[_+1],c)),l[f+1]=function Fhe(l,a){return 131071&l|a<<17}(l[f+1],c)}else l[c+1]=Xx(f,0),0!==f&&(l[f+1]=gA(l[f+1],c)),f=c;else l[c+1]=Xx(p,0),0===f?f=c:l[p+1]=gA(l[p+1],c),p=c;g&&(l[c+1]=pA(l[c+1])),$U(l,m,c,!0),$U(l,m,c,!1),function Cfe(l,a,o,c,u){const h=u?l.residualClasses:l.residualStyles;null!=h&&"string"==typeof a&&Cm(h,a)>=0&&(o[c+1]=mA(o[c+1]))}(a,m,l,c,h),d=Xx(f,p),h?a.classBindings=d:a.styleBindings=d}(u,h,a,o,d,c)}}function JA(l,a,o,c,u){let h=null;const d=o.directiveEnd;let f=o.directiveStylingLast;for(-1===f?f=o.directiveStart:f++;f<d&&(h=a[f],c=Ty(c,h.hostAttrs,u),h!==l);)f++;return null!==l&&(o.directiveStylingLast=f),c}function Ty(l,a,o){const c=o?1:2;let u=-1;if(null!==a)for(let h=0;h<a.length;h++){const d=a[h];"number"==typeof d?u=d:u===c&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),rl(l,d,!!o||a[++h]))}return void 0===l?null:l}function nH(l,a,o,c,u,h,d,f){if(!(3&a.type))return;const p=l.data,g=p[f+1];ow(function wz(l){return 1==(1&l)}(g)?iH(p,a,o,u,Mh(g),d):void 0)||(ow(h)||function xz(l){return 2==(2&l)}(g)&&(h=iH(p,null,o,u,f,d)),function xhe(l,a,o,c,u){const h=cs(l);if(a)u?h?l.addClass(o,c):o.classList.add(c):h?l.removeClass(o,c):o.classList.remove(c);else{let d=-1===c.indexOf("-")?void 0:ol.DashCase;if(null==u)h?l.removeStyle(o,c,d):o.style.removeProperty(c);else{const f="string"==typeof u&&u.endsWith("!important");f&&(u=u.slice(0,-10),d|=ol.Important),h?l.setStyle(o,c,u,d):o.style.setProperty(c,u,f?"important":"")}}}(c,d,xx(na(),o),u,h))}function iH(l,a,o,c,u,h){const d=null===a;let f;for(;u>0;){const p=l[u],g=Array.isArray(p),m=g?p[1]:p,v=null===m;let _=o[u+1];_===ai&&(_=v?Dr:void 0);let y=v?Uk(_,c):m===c?_:void 0;if(g&&!ow(y)&&(y=Uk(p,c)),ow(y)&&(f=y,d))return f;const b=l[u+1];u=d?Dc(b):Mh(b)}if(null!==a){let p=h?a.residualClasses:a.residualStyles;null!=p&&(f=Uk(p,c))}return f}function ow(l){return void 0!==l}function rH(l,a){return 0!=(l.flags&(a?16:32))}function ie(l,a=""){const o=It(),c=Yi(),u=l+20,h=c.firstCreatePass?Mm(c,u,1,a,null):c.data[u],d=o[u]=function oA(l,a){return cs(l)?l.createText(a):l.createTextNode(a)}(o[11],a);qx(c,o,d,h),_u(h,!1)}function en(l){return hi("",l,""),en}function hi(l,a,o){const c=It(),u=Fm(c,l,a,o);return u!==ai&&Eh(c,na(),u),hi}function Dy(l,a,o,c,u){const h=It(),d=function Rm(l,a,o,c,u,h){const f=fp(l,Sh(),o,u);return Th(2),f?a+oi(o)+c+oi(u)+h:ai}(h,l,a,o,c,u);return d!==ai&&Eh(h,na(),d),Dy}function My(l,a,o,c,u,h,d){const f=It(),p=function Nm(l,a,o,c,u,h,d,f){const g=nw(l,Sh(),o,u,d);return Th(3),g?a+oi(o)+c+oi(u)+h+oi(d)+f:ai}(f,l,a,o,c,u,h,d);return p!==ai&&Eh(f,na(),p),My}function Du(l,a,o){const c=It();return Fo(c,dm(),a)&&al(Yi(),us(),c,l,a,c[11],o,!0),Du}const pp=void 0;var npe=["en",[["a","p"],["AM","PM"],pp],[["AM","PM"],pp,pp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pp,"{1} 'at' {0}",pp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tpe(l){const o=Math.floor(Math.abs(l)),c=l.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let jm={};function CH(l){return l in jm||(jm[l]=xr.ng&&xr.ng.common&&xr.ng.common.locales&&xr.ng.common.locales[l]),jm[l]}var ln=(()=>((ln=ln||{})[ln.LocaleId=0]="LocaleId",ln[ln.DayPeriodsFormat=1]="DayPeriodsFormat",ln[ln.DayPeriodsStandalone=2]="DayPeriodsStandalone",ln[ln.DaysFormat=3]="DaysFormat",ln[ln.DaysStandalone=4]="DaysStandalone",ln[ln.MonthsFormat=5]="MonthsFormat",ln[ln.MonthsStandalone=6]="MonthsStandalone",ln[ln.Eras=7]="Eras",ln[ln.FirstDayOfWeek=8]="FirstDayOfWeek",ln[ln.WeekendRange=9]="WeekendRange",ln[ln.DateFormat=10]="DateFormat",ln[ln.TimeFormat=11]="TimeFormat",ln[ln.DateTimeFormat=12]="DateTimeFormat",ln[ln.NumberSymbols=13]="NumberSymbols",ln[ln.NumberFormats=14]="NumberFormats",ln[ln.CurrencyCode=15]="CurrencyCode",ln[ln.CurrencySymbol=16]="CurrencySymbol",ln[ln.CurrencyName=17]="CurrencyName",ln[ln.Currencies=18]="Currencies",ln[ln.Directionality=19]="Directionality",ln[ln.PluralCase=20]="PluralCase",ln[ln.ExtraData=21]="ExtraData",ln))();const lw="en-US";let xH=lw;function nI(l,a,o,c,u){if(l=vi(l),Array.isArray(l))for(let h=0;h<l.length;h++)nI(l[h],a,o,c,u);else{const h=Yi(),d=It();let f=Im(l)?l:vi(l.provide),p=nU(l);const g=Xs(),m=1048575&g.providerIndexes,v=g.directiveStart,_=g.providerIndexes>>20;if(Im(l)||!l.multi){const y=new J_(p,u,R),b=rI(f,a,u?m:m+_,v);-1===b?(Fx(ty(g,d),h,f),iI(h,l,a.length),a.push(f),g.directiveStart++,g.directiveEnd++,u&&(g.providerIndexes+=1048576),o.push(y),d.push(y)):(o[b]=y,d[b]=y)}else{const y=rI(f,a,m+_,v),b=rI(f,a,m,m+_),x=y>=0&&o[y],C=b>=0&&o[b];if(u&&!C||!u&&!x){Fx(ty(g,d),h,f);const w=function nge(l,a,o,c,u){const h=new J_(l,o,R);return h.multi=[],h.index=a,h.componentProviders=0,$H(h,u,c&&!o),h}(u?tge:ege,o.length,u,c,p);!u&&C&&(o[b].providerFactory=w),iI(h,l,a.length,0),a.push(f),g.directiveStart++,g.directiveEnd++,u&&(g.providerIndexes+=1048576),o.push(w),d.push(w)}else iI(h,l,y>-1?y:b,$H(o[u?b:y],p,!u&&c));!u&&c&&C&&o[b].componentProviders++}}}function iI(l,a,o,c){const u=Im(a),h=function Mde(l){return!!l.useClass}(a);if(u||h){const p=(h?vi(a.useClass):a).prototype.ngOnDestroy;if(p){const g=l.destroyHooks||(l.destroyHooks=[]);if(!u&&a.multi){const m=g.indexOf(o);-1===m?g.push(o,[c,p]):g[m+1].push(c,p)}else g.push(o,p)}}}function $H(l,a,o){return o&&l.componentProviders++,l.multi.push(a)-1}function rI(l,a,o,c){for(let u=o;u<c;u++)if(a[u]===l)return u;return-1}function ege(l,a,o,c){return sI(this.multi,[])}function tge(l,a,o,c){const u=this.multi;let h;if(this.providerFactory){const d=this.providerFactory.componentProviders,f=ny(o,o[1],this.providerFactory.index,c);h=f.slice(0,d),sI(u,h);for(let p=d;p<f.length;p++)h.push(f[p])}else h=[],sI(u,h);return h}function sI(l,a){for(let o=0;o<l.length;o++)a.push((0,l[o])());return a}function un(l,a=[]){return o=>{o.providersResolver=(c,u)=>function Jpe(l,a,o){const c=Yi();if(c.firstCreatePass){const u=Sc(l);nI(o,c.data,c.blueprint,u,!0),nI(a,c.data,c.blueprint,u,!1)}}(c,u?u(l):l,a)}}class qH{}class sge{resolveComponentFactory(a){throw function rge(l){const a=Error(`No component factory found for ${fr(l)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=l,a}(a)}}let kh=(()=>{class l{}return l.NULL=new sge,l})();function oge(){return qm(Xs(),It())}function qm(l,a){return new bn(Zl(l,a))}let bn=(()=>{class l{constructor(o){this.nativeElement=o}}return l.__NG_ELEMENT_ID__=oge,l})();function age(l){return l instanceof bn?l.nativeElement:l}class Ym{}let di=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>function cge(){const l=It(),o=il(Xs().index,l);return function lge(l){return l[11]}(vu(o)?o:l)}(),l})(),uge=(()=>{class l{}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:()=>null}),l})();class Py{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const hge=new Py("13.2.0"),oI={};function fw(l,a,o,c,u=!1){for(;null!==o;){const h=a[o.index];if(null!==h&&c.push(As(h)),wc(h))for(let f=10;f<h.length;f++){const p=h[f],g=p[1].firstChild;null!==g&&fw(p[1],p,g,c)}const d=o.type;if(8&d)fw(l,a,o.child,c);else if(32&d){const f=iA(o,a);let p;for(;p=f();)c.push(p)}else if(16&d){const f=hz(a,o);if(Array.isArray(f))c.push(...f);else{const p=vy(a[16]);fw(p[1],p,f,c,!0)}}o=u?o.projectionNext:o.next}return c}class Oy{constructor(a,o){this._lView=a,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,o=a[1];return fw(o,a,o.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(wc(a)){const o=a[8],c=o?o.indexOf(this):-1;c>-1&&(lA(a,c),Lx(o,c))}this._attachedToViewContainer=!1}nz(this._lView[1],this._lView)}onDestroy(a){Lz(this._lView[1],this._lView,null,a)}markForCheck(){IA(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){OA(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mde(l,a,o){Sx(!0);try{OA(l,a,o)}finally{Sx(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new qi(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dhe(l,a){_y(l,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new qi(902,"");this._appRef=a}}class dge extends Oy{constructor(a){super(a),this._view=a}detectChanges(){$z(this._view)}checkNoChanges(){!function vde(l){Sx(!0);try{$z(l)}finally{Sx(!1)}}(this._view)}get context(){return null}}class XH extends kh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const o=Io(a);return new aI(o,this.ngModule)}}function ZH(l){const a=[];for(let o in l)l.hasOwnProperty(o)&&a.push({propName:l[o],templateName:o});return a}const pge=new Wn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>q6});class aI extends qH{constructor(a,o){super(),this.componentDef=a,this.ngModule=o,this.componentType=a.type,this.selector=function Phe(l){return l.map(Ihe).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return ZH(this.componentDef.inputs)}get outputs(){return ZH(this.componentDef.outputs)}create(a,o,c,u){const h=(u=u||this.ngModule)?function gge(l,a){return{get:(o,c,u)=>{const h=l.get(o,oI,u);return h!==oI||c===oI?h:a.get(o,c,u)}}}(a,u.injector):a,d=h.get(Ym,GV),f=h.get(uge,null),p=d.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=c?function Nz(l,a,o){if(cs(l))return l.selectRootElement(a,o===Cc.ShadowDom);let c="string"==typeof a?l.querySelector(a):a;return c.textContent="",c}(p,c,this.componentDef.encapsulation):aA(d.createRenderer(null,this.componentDef),g,function fge(l){const a=l.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(g)),v=this.componentDef.onPush?576:528,_=function pU(l,a){return{components:[],scheduler:l||q6,clean:_de,playerHandler:a||null,flags:0}}(),y=Qx(0,null,null,1,0,null,null,null,null,null),b=yy(null,y,_,v,null,null,d,p,f,h);let x,C;Tx(b);try{const w=function dU(l,a,o,c,u,h){const d=o[1];o[20]=l;const p=Mm(d,20,2,"#host",null),g=p.mergedAttrs=a.hostAttrs;null!==g&&(ew(p,g,!0),null!==l&&(Ax(u,l,g),null!==p.classes&&fA(u,l,p.classes),null!==p.styles&&pz(u,l,p.styles)));const m=c.createRenderer(l,a),v=yy(o,Fz(a),null,a.onPush?64:16,o[20],p,c,m,h||null,null);return d.firstCreatePass&&(Fx(ty(p,o),d,a.type),Hz(d,p),Wz(p,o.length,1)),Jx(o,v),o[20]=v}(m,this.componentDef,b,d,p);if(m)if(c)Ax(p,m,["ng-version",hge.full]);else{const{attrs:S,classes:D}=function Ohe(l){const a=[],o=[];let c=1,u=2;for(;c<l.length;){let h=l[c];if("string"==typeof h)2===u?""!==h&&a.push(h,l[++c]):8===u&&o.push(h);else{if(!Tc(u))break;u=h}c++}return{attrs:a,classes:o}}(this.componentDef.selectors[0]);S&&Ax(p,m,S),D&&D.length>0&&fA(p,m,D.join(" "))}if(C=Tk(y,20),void 0!==o){const S=C.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const T=o[D];S.push(null!=T?Array.from(T):null)}}x=function fU(l,a,o,c,u){const h=o[1],d=function ede(l,a,o){const c=Xs();l.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Gz(l,c,a,Em(l,a,1,null),o));const u=ny(a,l,c.directiveStart,c);Oo(u,a);const h=Zl(c,a);return h&&Oo(h,a),u}(h,o,a);if(c.components.push(d),l[8]=d,u&&u.forEach(p=>p(d,a)),a.contentQueries){const p=Xs();a.contentQueries(1,d,p.directiveStart)}const f=Xs();return!h.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Pd(f.index),zz(o[1],f,0,f.directiveStart,f.directiveEnd,a),Uz(a,d)),d}(w,this.componentDef,b,_,[Bde]),by(y,b,null)}finally{Dx()}return new vge(this.componentType,x,qm(C,b),b,C)}}class vge extends class ige{}{constructor(a,o,c,u,h){super(),this.location=c,this._rootLView=u,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new dge(u),this.componentType=a}get injector(){return new gm(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Ah{}class KH{}const Xm=new Map;class e7 extends Ah{constructor(a,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new XH(this);const c=ql(a);this._bootstrapComponents=Cu(c.bootstrap),this._r3Injector=tU(a,o,[{provide:Ah,useValue:this},{provide:kh,useValue:this.componentFactoryResolver}],fr(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,o=or.THROW_IF_NOT_FOUND,c=ui.Default){return a===or||a===Ah||a===RA?this:this._r3Injector.get(a,o,c)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class lI extends KH{constructor(a){super(),this.moduleType=a,null!==ql(a)&&function yge(l){const a=new Set;!function o(c){const u=ql(c,!0),h=u.id;null!==h&&(function QH(l,a,o){if(a&&a!==o)throw new Error(`Duplicate module registered for ${l} - ${fr(a)} vs ${fr(a.name)}`)}(h,Xm.get(h),c),Xm.set(h,c));const d=Cu(u.imports);for(const f of d)a.has(f)||(a.add(f),o(f))}(l)}(a)}create(a){return new e7(this.moduleType,a)}}function Ra(l,a,o){const c=ta()+l,u=It();return u[c]===ai?wu(u,c,o?a.call(o):a()):wy(u,c)}function ws(l,a,o,c){return i7(It(),ta(),l,a,o,c)}function ds(l,a,o,c,u){return function r7(l,a,o,c,u,h,d){const f=a+o;return fp(l,f,u,h)?wu(l,f+2,d?c.call(d,u,h):c(u,h)):Fy(l,f+2)}(It(),ta(),l,a,o,c,u)}function t7(l,a,o,c,u,h){return function s7(l,a,o,c,u,h,d,f){const p=a+o;return nw(l,p,u,h,d)?wu(l,p+3,f?c.call(f,u,h,d):c(u,h,d)):Fy(l,p+3)}(It(),ta(),l,a,o,c,u,h)}function pw(l,a,o,c,u,h,d){return function o7(l,a,o,c,u,h,d,f,p){const g=a+o;return Ql(l,g,u,h,d,f)?wu(l,g+4,p?c.call(p,u,h,d,f):c(u,h,d,f)):Fy(l,g+4)}(It(),ta(),l,a,o,c,u,h,d)}function Fy(l,a){const o=l[a];return o===ai?void 0:o}function i7(l,a,o,c,u,h){const d=a+o;return Fo(l,d,u)?wu(l,d+1,h?c.call(h,u):c(u)):Fy(l,d+1)}function Ry(l,a){const o=Yi();let c;const u=l+20;o.firstCreatePass?(c=function Sge(l,a){if(a)for(let o=a.length-1;o>=0;o--){const c=a[o];if(l===c.name)return c}}(a,o.pipeRegistry),o.data[u]=c,c.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(u,c.onDestroy)):c=o.data[u];const h=c.factory||(c.factory=hp(c.type)),d=Ed(R);try{const f=Px(!1),p=h();return Px(f),function Zde(l,a,o,c){o>=l.data.length&&(l.data[o]=null,l.blueprint[o]=null),a[o]=c}(o,It(),u,p),p}finally{Ed(d)}}function Ny(l,a,o){const c=l+20,u=It(),h=hm(u,c);return function Ly(l,a){return l[1].data[a].pure}(u,c)?i7(u,ta(),a,h.transform,o,h):h.transform(o)}function cI(l){return a=>{setTimeout(l,void 0,a)}}const St=class kge extends pt{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,o,c){var u,h,d;let f=a,p=o||(()=>null),g=c;if(a&&"object"==typeof a){const v=a;f=null===(u=v.next)||void 0===u?void 0:u.bind(v),p=null===(h=v.error)||void 0===h?void 0:h.bind(v),g=null===(d=v.complete)||void 0===d?void 0:d.bind(v)}this.__isAsync&&(p=cI(p),f&&(f=cI(f)),g&&(g=cI(g)));const m=super.subscribe({next:f,error:p,complete:g});return a instanceof Oe&&a.add(m),m}};function Age(){return this._results[Pm()]()}class uI{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Pm(),c=uI.prototype;c[o]||(c[o]=Age)}get changes(){return this._changes||(this._changes=new St)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,o){return this._results.reduce(a,o)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,o){const c=this;c.dirty=!1;const u=Kl(a);(this._changesDetected=!function qce(l,a,o){if(l.length!==a.length)return!1;for(let c=0;c<l.length;c++){let u=l[c],h=a[c];if(o&&(u=o(u),h=o(h)),h!==u)return!1}return!0}(c._results,u,o))&&(c._results=u,c.length=u.length,c.last=u[this.length-1],c.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Qr=(()=>{class l{}return l.__NG_ELEMENT_ID__=Oge,l})();const Ige=Qr,Pge=class extends Ige{constructor(a,o,c){super(),this._declarationLView=a,this._declarationTContainer=o,this.elementRef=c}createEmbeddedView(a){const o=this._declarationTContainer.tViews,c=yy(this._declarationLView,o,a,16,null,o.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(c[19]=h.createEmbeddedView(o)),by(o,c,a),new Oy(c)}};function Oge(){return gw(Xs(),It())}function gw(l,a){return 4&l.type?new Pge(a,l,qm(l,a)):null}let Ti=(()=>{class l{}return l.__NG_ELEMENT_ID__=Fge,l})();function Fge(){return u7(Xs(),It())}const Rge=Ti,l7=class extends Rge{constructor(a,o,c){super(),this._lContainer=a,this._hostTNode=o,this._hostLView=c}get element(){return qm(this._hostTNode,this._hostLView)}get injector(){return new gm(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ox(this._hostTNode,this._hostLView);if(a6(a)){const o=pm(a,this._hostLView),c=fm(a);return new gm(o[1].data[c+8],o)}return new gm(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const o=c7(this._lContainer);return null!==o&&o[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,o,c){const u=a.createEmbeddedView(o||{});return this.insert(u,c),u}createComponent(a,o,c,u,h){const d=a&&!function ry(l){return"function"==typeof l}(a);let f;if(d)f=o;else{const v=o||{};f=v.index,c=v.injector,u=v.projectableNodes,h=v.ngModuleRef}const p=d?a:new aI(Io(a)),g=c||this.parentInjector;if(!h&&null==p.ngModule&&g){const v=g.get(Ah,null);v&&(h=v)}const m=p.create(g,u,void 0,h);return this.insert(m.hostView,f),m}insert(a,o){const c=a._lView,u=c[1];if(function mce(l){return wc(l[3])}(c)){const m=this.indexOf(a);if(-1!==m)this.detach(m);else{const v=c[3],_=new l7(v,v[6],v[3]);_.detach(_.indexOf(a))}}const h=this._adjustIndex(o),d=this._lContainer;!function phe(l,a,o,c){const u=10+c,h=o.length;c>0&&(o[u-1][4]=a),c<h-10?(a[4]=o[u],v6(o,10+c,a)):(o.push(a),a[4]=null),a[3]=o;const d=a[17];null!==d&&o!==d&&function ghe(l,a){const o=l[9];a[16]!==a[3][3][16]&&(l[2]=!0),null===o?l[9]=[a]:o.push(a)}(d,a);const f=a[19];null!==f&&f.insertView(l),a[2]|=128}(u,c,d,h);const f=hA(h,d),p=c[11],g=$x(p,d[7]);return null!==g&&function hhe(l,a,o,c,u,h){c[0]=u,c[6]=a,_y(l,c,o,1,u,h)}(u,d[6],p,c,g,f),a.attachToViewContainerRef(),v6(hI(d),h,a),a}move(a,o){return this.insert(a,o)}indexOf(a){const o=c7(this._lContainer);return null!==o?o.indexOf(a):-1}remove(a){const o=this._adjustIndex(a,-1),c=lA(this._lContainer,o);c&&(Lx(hI(this._lContainer),o),nz(c[1],c))}detach(a){const o=this._adjustIndex(a,-1),c=lA(this._lContainer,o);return c&&null!=Lx(hI(this._lContainer),o)?new Oy(c):null}_adjustIndex(a,o=0){return null==a?this.length+o:a}};function c7(l){return l[8]}function hI(l){return l[8]||(l[8]=[])}function u7(l,a){let o;const c=a[l.index];if(wc(c))o=c;else{let u;if(8&l.type)u=As(c);else{const h=a[11];u=h.createComment("");const d=Zl(l,a);dp(h,$x(h,d),u,function yhe(l,a){return cs(l)?l.nextSibling(a):a.nextSibling}(h,d),!1)}a[l.index]=o=jz(c,a,u,l),Jx(a,o)}return new l7(o,l,a)}class dI{constructor(a){this.queryList=a,this.matches=null}clone(){return new dI(this.queryList)}setDirty(){this.queryList.setDirty()}}class fI{constructor(a=[]){this.queries=a}createEmbeddedView(a){const o=a.queries;if(null!==o){const c=null!==a.contentQueries?a.contentQueries[0]:o.length,u=[];for(let h=0;h<c;h++){const d=o.getByIndex(h);u.push(this.queries[d.indexInDeclarationView].clone())}return new fI(u)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let o=0;o<this.queries.length;o++)null!==g7(a,o).matches&&this.queries[o].setDirty()}}class h7{constructor(a,o,c=null){this.predicate=a,this.flags=o,this.read=c}}class pI{constructor(a=[]){this.queries=a}elementStart(a,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,o)}elementEnd(a){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(a)}embeddedTView(a){let o=null;for(let c=0;c<this.length;c++){const u=null!==o?o.length:0,h=this.getByIndex(c).embeddedTView(a,u);h&&(h.indexInDeclarationView=c,null!==o?o.push(h):o=[h])}return null!==o?new pI(o):null}template(a,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,o)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class gI{constructor(a,o=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(a,o){this.isApplyingToNode(o)&&this.matchTNode(a,o)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,o){this.elementStart(a,o)}embeddedTView(a,o){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,o),new gI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let u=0;u<c.length;u++){const h=c[u];this.matchTNodeWithReadOption(a,o,Bge(o,h)),this.matchTNodeWithReadOption(a,o,Rx(o,a,h,!1,!1))}else c===Qr?4&o.type&&this.matchTNodeWithReadOption(a,o,-1):this.matchTNodeWithReadOption(a,o,Rx(o,a,c,!1,!1))}matchTNodeWithReadOption(a,o,c){if(null!==c){const u=this.metadata.read;if(null!==u)if(u===bn||u===Ti||u===Qr&&4&o.type)this.addMatch(o.index,-2);else{const h=Rx(o,a,u,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,c)}}addMatch(a,o){null===this.matches?this.matches=[a,o]:this.matches.push(a,o)}}function Bge(l,a){const o=l.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===a)return o[c+1];return null}function zge(l,a,o,c){return-1===o?function Vge(l,a){return 11&l.type?qm(l,a):4&l.type?gw(l,a):null}(a,l):-2===o?function Uge(l,a,o){return o===bn?qm(a,l):o===Qr?gw(a,l):o===Ti?u7(a,l):void 0}(l,a,c):ny(l,l[1],o,a)}function d7(l,a,o,c){const u=a[19].queries[c];if(null===u.matches){const h=l.data,d=o.matches,f=[];for(let p=0;p<d.length;p+=2){const g=d[p];f.push(g<0?null:zge(a,h[g],d[p+1],o.metadata.read))}u.matches=f}return u.matches}function mI(l,a,o,c){const u=l.queries.getByIndex(o),h=u.matches;if(null!==h){const d=d7(l,a,u,o);for(let f=0;f<h.length;f+=2){const p=h[f];if(p>0)c.push(d[f/2]);else{const g=h[f+1],m=a[-p];for(let v=10;v<m.length;v++){const _=m[v];_[17]===_[3]&&mI(_[1],_,g,c)}if(null!==m[9]){const v=m[9];for(let _=0;_<v.length;_++){const y=v[_];mI(y[1],y,g,c)}}}}}return c}function Vt(l){const a=It(),o=Yi(),c=KV();Pk(c+1);const u=g7(o,c);if(l.dirty&&jV(a)===(2==(2&u.metadata.flags))){if(null===u.matches)l.reset([]);else{const h=u.crossesNgTemplate?mI(o,a,c,[]):d7(o,a,u,c);l.reset(h,age),l.notifyOnChanges()}return!0}return!1}function ti(l,a,o){const c=Yi();c.firstCreatePass&&(p7(c,new h7(l,a,o),-1),2==(2&a)&&(c.staticViewQueries=!0)),f7(c,It(),a)}function jn(l,a,o,c){const u=Yi();if(u.firstCreatePass){const h=Xs();p7(u,new h7(a,o,c),h.index),function Wge(l,a){const o=l.contentQueries||(l.contentQueries=[]);a!==(o.length?o[o.length-1]:-1)&&o.push(l.queries.length-1,a)}(u,l),2==(2&o)&&(u.staticContentQueries=!0)}f7(u,It(),o)}function zt(){return function Hge(l,a){return l[19].queries[a].queryList}(It(),KV())}function f7(l,a,o){const c=new uI(4==(4&o));Lz(l,a,c,c.destroy),null===a[19]&&(a[19]=new fI),a[19].queries.push(new dI(c))}function p7(l,a,o){null===l.queries&&(l.queries=new pI),l.queries.track(new gI(a,o))}function g7(l,a){return l.queries.getByIndex(a)}function No(l,a){return gw(l,a)}function _w(...l){}const yw=new Wn("Application Initializer");let Km=(()=>{class l{constructor(o){this.appInits=o,this.resolve=_w,this.reject=_w,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,u)=>{this.resolve=c,this.reject=u})}runInitializers(){if(this.initialized)return;const o=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const h=this.appInits[u]();if(Sy(h))o.push(h);else if(XA(h)){const d=new Promise((f,p)=>{h.subscribe({complete:f,error:p})});o.push(d)}}Promise.all(o).then(()=>{c()}).catch(u=>{this.reject(u)}),0===o.length&&c(),this.initialized=!0}}return l.\u0275fac=function(o){return new(o||l)(Ie(yw,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Vy=new Wn("AppId"),ame={provide:Vy,useFactory:function ome(){return`${xI()}${xI()}${xI()}`},deps:[]};function xI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const P7=new Wn("Platform Initializer"),Hr=new Wn("Platform ID"),O7=new Wn("appBootstrapListener");let F7=(()=>{class l{log(o){console.log(o)}warn(o){console.warn(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Mu=new Wn("LocaleId"),R7=new Wn("DefaultCurrencyCode");class lme{constructor(a,o){this.ngModuleFactory=a,this.componentFactories=o}}let bw=(()=>{class l{compileModuleSync(o){return new lI(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const c=this.compileModuleSync(o),h=Cu(ql(o).declarations).reduce((d,f)=>{const p=Io(f);return p&&d.push(new aI(p)),d},[]);return new lme(c,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const ume=(()=>Promise.resolve(0))();function wI(l){"undefined"==typeof Zone?ume.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class ar{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!c&&o,u.shouldCoalesceRunChangeDetection=c,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function hme(){let l=xr.requestAnimationFrame,a=xr.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&a){const o=l[Zone.__symbol__("OriginalDelegate")];o&&(l=o);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function pme(l){const a=()=>{!function fme(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(xr,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,TI(l),l.isCheckStableRunning=!0,SI(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),TI(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,u,h,d,f)=>{try{return N7(l),o.invokeTask(u,h,d,f)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||l.shouldCoalesceRunChangeDetection)&&a(),L7(l)}},onInvoke:(o,c,u,h,d,f,p)=>{try{return N7(l),o.invoke(u,h,d,f,p)}finally{l.shouldCoalesceRunChangeDetection&&a(),L7(l)}},onHasTask:(o,c,u,h)=>{o.hasTask(u,h),c===u&&("microTask"==h.change?(l._hasPendingMicrotasks=h.microTask,TI(l),SI(l)):"macroTask"==h.change&&(l.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,c,u,h)=>(o.handleError(u,h),l.runOutsideAngular(()=>l.onError.emit(h)),!1)})}(u)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ar.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ar.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,o,c){return this._inner.run(a,o,c)}runTask(a,o,c,u){const h=this._inner,d=h.scheduleEventTask("NgZoneEvent: "+u,a,dme,_w,_w);try{return h.runTask(d,o,c)}finally{h.cancelTask(d)}}runGuarded(a,o,c){return this._inner.runGuarded(a,o,c)}runOutsideAngular(a){return this._outer.run(a)}}const dme={};function SI(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function TI(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function N7(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function L7(l){l._nesting--,SI(l)}class gme{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(a,o,c){return a.apply(o,c)}runGuarded(a,o,c){return a.apply(o,c)}runOutsideAngular(a){return a()}runTask(a,o,c,u){return a.apply(o,c)}}let DI=(()=>{class l{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ar.assertNotInAngularZone(),wI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wI(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(o)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,c,u){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==h),o(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:u})}whenStable(o,c,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,c,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,c,u){return[]}}return l.\u0275fac=function(o){return new(o||l)(Ie(ar))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),B7=(()=>{class l{constructor(){this._applications=new Map,MI.addToWindow(this)}registerApplication(o,c){this._applications.set(o,c)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,c=!0){return MI.findTestabilityInTree(this,o,c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class mme{addToWindow(a){}findTestabilityInTree(a,o,c){return null}}let Ac,MI=new mme;const V7=new Wn("AllowMultipleToken");class z7{constructor(a,o){this.name=a,this.token=o}}function U7(l,a,o=[]){const c=`Platform: ${a}`,u=new Wn(c);return(h=[])=>{let d=H7();if(!d||d.injector.get(V7,!1))if(l)l(o.concat(h).concat({provide:u,useValue:!0}));else{const f=o.concat(h).concat({provide:u,useValue:!0},{provide:NA,useValue:"platform"});!function bme(l){if(Ac&&!Ac.destroyed&&!Ac.injector.get(V7,!1))throw new qi(400,"");Ac=l.get(W7);const a=l.get(P7,null);a&&a.forEach(o=>o())}(or.create({providers:f,name:c}))}return function Cme(l){const a=H7();if(!a)throw new qi(401,"");return a}()}}function H7(){return Ac&&!Ac.destroyed?Ac:null}let W7=(()=>{class l{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,c){const f=function xme(l,a){let o;return o="noop"===l?new gme:("zone.js"===l?void 0:l)||new ar({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),o}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),p=[{provide:ar,useValue:f}];return f.run(()=>{const g=or.create({providers:p,parent:this.injector,name:o.moduleType.name}),m=o.create(g),v=m.injector.get(Sm,null);if(!v)throw new qi(402,"");return f.runOutsideAngular(()=>{const _=f.onError.subscribe({next:y=>{v.handleError(y)}});m.onDestroy(()=>{EI(this._modules,m),_.unsubscribe()})}),function wme(l,a,o){try{const c=o();return Sy(c)?c.catch(u=>{throw a.runOutsideAngular(()=>l.handleError(u)),u}):c}catch(c){throw a.runOutsideAngular(()=>l.handleError(c)),c}}(v,f,()=>{const _=m.injector.get(Km);return _.runInitializers(),_.donePromise.then(()=>(function lpe(l){tl(l,"Expected localeId to be defined"),"string"==typeof l&&(xH=l.toLowerCase().replace(/_/g,"-"))}(m.injector.get(Mu,lw)||lw),this._moduleDoBootstrap(m),m))})})}bootstrapModule(o,c=[]){const u=G7({},c);return function _me(l,a,o){const c=new lI(o);return Promise.resolve(c)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,u))}_moduleDoBootstrap(o){const c=o.injector.get(zy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(u=>c.bootstrap(u));else{if(!o.instance.ngDoBootstrap)throw new qi(403,"");o.instance.ngDoBootstrap(c)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new qi(404,"");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(o){return new(o||l)(Ie(or))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function G7(l,a){return Array.isArray(a)?a.reduce(G7,l):Object.assign(Object.assign({},l),a)}let zy=(()=>{class l{constructor(o,c,u,h,d){this._zone=o,this._injector=c,this._exceptionHandler=u,this._componentFactoryResolver=h,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new _n(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),p=new _n(g=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{ar.assertNotInAngularZone(),wI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{ar.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});this.isStable=function Nle(...l){const a=q_(l),o=function kle(l,a){return"number"==typeof sk(l)?l.pop():a}(l,1/0),c=l;return c.length?1===c.length?yc(c[0]):$_(o)(lo(c,a)):Ch}(f,p.pipe(function Lle(l={}){const{connector:a=(()=>new pt),resetOnError:o=!0,resetOnComplete:c=!0,resetOnRefCountZero:u=!0}=l;return h=>{let d=null,f=null,p=null,g=0,m=!1,v=!1;const _=()=>{null==f||f.unsubscribe(),f=null},y=()=>{_(),d=p=null,m=v=!1},b=()=>{const x=d;y(),null==x||x.unsubscribe()};return mi((x,C)=>{g++,!v&&!m&&_();const w=p=null!=p?p:a();C.add(()=>{g--,0===g&&!v&&!m&&(f=ok(b,u))}),w.subscribe(C),d||(d=new dt({next:S=>w.next(S),error:S=>{v=!0,_(),f=ok(y,o,S),w.error(S)},complete:()=>{m=!0,_(),f=ok(y,c),w.complete()}}),lo(x).subscribe(d))})(h)}}()))}bootstrap(o,c){if(!this._initStatus.done)throw new qi(405,"");let u;u=o instanceof qH?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(u.componentType);const h=function yme(l){return l.isBoundToModule}(u)?void 0:this._injector.get(Ah),f=u.create(or.NULL,[],c||u.selector,h),p=f.location.nativeElement,g=f.injector.get(DI,null),m=g&&f.injector.get(B7);return g&&m&&m.registerApplication(p,g),f.onDestroy(()=>{this.detachView(f.hostView),EI(this.components,f),m&&m.unregisterApplication(p)}),this._loadComponent(f),f}tick(){if(this._runningTick)throw new qi(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const c=o;this._views.push(c),c.attachToAppRef(this)}detachView(o){const c=o;EI(this._views,c),c.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(O7,[]).concat(this._bootstrapListeners).forEach(u=>u(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return l.\u0275fac=function(o){return new(o||l)(Ie(ar),Ie(or),Ie(Sm),Ie(kh),Ie(Km))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function EI(l,a){const o=l.indexOf(a);o>-1&&l.splice(o,1)}let $7=!0,Na=(()=>{class l{}return l.__NG_ELEMENT_ID__=Dme,l})();function Dme(l){return function Mme(l,a,o){if(bx(l)&&!o){const c=il(l.index,a);return new Oy(c,c)}return 47&l.type?new Oy(a[16],a):null}(Xs(),It(),16==(16&l))}class J7{constructor(){}supports(a){return xy(a)}create(a){return new Ome(a)}}const Pme=(l,a)=>a;class Ome{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Pme}forEachItem(a){let o;for(o=this._itHead;null!==o;o=o._next)a(o)}forEachOperation(a){let o=this._itHead,c=this._removalsHead,u=0,h=null;for(;o||c;){const d=!c||o&&o.currentIndex<t9(c,u,h)?o:c,f=t9(d,u,h),p=d.currentIndex;if(d===c)u--,c=c._nextRemoved;else if(o=o._next,null==d.previousIndex)u++;else{h||(h=[]);const g=f-u,m=p-u;if(g!=m){for(let _=0;_<g;_++){const y=_<h.length?h[_]:h[_]=0,b=y+_;m<=b&&b<g&&(h[_]=y+1)}h[d.previousIndex]=m-g}}f!==p&&a(d,f,p)}}forEachPreviousItem(a){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)a(o)}forEachAddedItem(a){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)a(o)}forEachMovedItem(a){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)a(o)}forEachRemovedItem(a){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)a(o)}forEachIdentityChange(a){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)a(o)}diff(a){if(null==a&&(a=[]),!xy(a))throw new qi(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u,h,d,o=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let f=0;f<this.length;f++)h=a[f],d=this._trackByFn(f,h),null!==o&&Object.is(o.trackById,d)?(c&&(o=this._verifyReinsertion(o,h,d,f)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,d,f),c=!0),o=o._next}else u=0,function Yde(l,a){if(Array.isArray(l))for(let o=0;o<l.length;o++)a(l[o]);else{const o=l[Pm()]();let c;for(;!(c=o.next()).done;)a(c.value)}}(a,f=>{d=this._trackByFn(u,f),null!==o&&Object.is(o.trackById,d)?(c&&(o=this._verifyReinsertion(o,f,d,u)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,d,u),c=!0),o=o._next,u++}),this.length=u;return this._truncate(o),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,o,c,u){let h;return null===a?h=this._itTail:(h=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,o)||this._addIdentityChange(a,o),this._reinsertAfter(a,h,u)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,u))?(Object.is(a.item,o)||this._addIdentityChange(a,o),this._moveAfter(a,h,u)):a=this._addAfter(new Fme(o,c),h,u),a}_verifyReinsertion(a,o,c,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?a=this._reinsertAfter(h,a._prev,u):a.currentIndex!=u&&(a.currentIndex=u,this._addToMoves(a,u)),a}_truncate(a){for(;null!==a;){const o=a._next;this._addToRemovals(this._unlink(a)),a=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const u=a._prevRemoved,h=a._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(a,o,c),this._addToMoves(a,c),a}_moveAfter(a,o,c){return this._unlink(a),this._insertAfter(a,o,c),this._addToMoves(a,c),a}_addAfter(a,o,c){return this._insertAfter(a,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,o,c){const u=null===o?this._itHead:o._next;return a._next=u,a._prev=o,null===u?this._itTail=a:u._prev=a,null===o?this._itHead=a:o._next=a,null===this._linkedRecords&&(this._linkedRecords=new e9),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const o=a._prev,c=a._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,a}_addToMoves(a,o){return a.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new e9),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,o){return a.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Fme{constructor(a,o){this.item=a,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Rme{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const o=a._prevDup,c=a._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class e9{constructor(){this.map=new Map}put(a){const o=a.trackById;let c=this.map.get(o);c||(c=new Rme,this.map.set(o,c)),c.add(a)}get(a,o){const u=this.map.get(a);return u?u.get(a,o):null}remove(a){const o=a.trackById;return this.map.get(o).remove(a)&&this.map.delete(o),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function t9(l,a,o){const c=l.previousIndex;if(null===c)return c;let u=0;return o&&c<o.length&&(u=o[c]),c+a+u}class n9{constructor(){}supports(a){return a instanceof Map||HA(a)}create(){return new Nme}}class Nme{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let o;for(o=this._mapHead;null!==o;o=o._next)a(o)}forEachPreviousItem(a){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)a(o)}forEachChangedItem(a){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)a(o)}forEachAddedItem(a){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)a(o)}forEachRemovedItem(a){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)a(o)}diff(a){if(a){if(!(a instanceof Map||HA(a)))throw new qi(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,u)=>{if(o&&o.key===u)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(u,c);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,o){if(a){const c=a._prev;return o._next=a,o._prev=c,a._prev=o,c&&(c._next=o),a===this._mapHead&&(this._mapHead=o),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(a,o){if(this._records.has(a)){const u=this._records.get(a);this._maybeAddToChanges(u,o);const h=u._prev,d=u._next;return h&&(h._next=d),d&&(d._prev=h),u._next=null,u._prev=null,u}const c=new Lme(a);return this._records.set(a,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,o){Object.is(o,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=o,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,o){a instanceof Map?a.forEach(o):Object.keys(a).forEach(c=>o(a[c],c))}}class Lme{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function i9(){return new mp([new J7])}let mp=(()=>{class l{constructor(o){this.factories=o}static create(o,c){if(null!=c){const u=c.factories.slice();o=o.concat(u)}return new l(o)}static extend(o){return{provide:l,useFactory:c=>l.create(o,c||i9()),deps:[[l,new Dh,new sl]]}}find(o){const c=this.factories.find(u=>u.supports(o));if(null!=c)return c;throw new qi(901,"")}}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:i9}),l})();function r9(){return new Qm([new n9])}let Qm=(()=>{class l{constructor(o){this.factories=o}static create(o,c){if(c){const u=c.factories.slice();o=o.concat(u)}return new l(o)}static extend(o){return{provide:l,useFactory:c=>l.create(o,c||r9()),deps:[[l,new Dh,new sl]]}}find(o){const c=this.factories.find(h=>h.supports(o));if(c)return c;throw new qi(901,"")}}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:r9}),l})();const Bme=[new n9],zme=new mp([new J7]),Ume=new Qm(Bme),Hme=U7(null,"core",[{provide:Hr,useValue:"unknown"},{provide:W7,deps:[or]},{provide:B7,deps:[]},{provide:F7,deps:[]}]),qme=[{provide:zy,useClass:zy,deps:[ar,or,Sm,kh,Km]},{provide:pge,deps:[ar],useFactory:function Yme(l){let a=[];return l.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(o){a.push(o)}}},{provide:Km,useClass:Km,deps:[[new sl,yw]]},{provide:bw,useClass:bw,deps:[]},ame,{provide:mp,useFactory:function Wme(){return zme},deps:[]},{provide:Qm,useFactory:function Gme(){return Ume},deps:[]},{provide:Mu,useFactory:function jme(l){return l||function $me(){return"undefined"!=typeof $localize&&$localize.locale||lw}()},deps:[[new cy(Mu),new sl,new Dh]]},{provide:R7,useValue:"USD"}];let Xme=(()=>{class l{constructor(o){}}return l.\u0275fac=function(o){return new(o||l)(Ie(zy))},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({providers:qme}),l})(),xw=null;function Eu(){return xw}const Wr=new Wn("DocumentToken");let vp=(()=>{class l{historyGo(o){throw new Error("Not implemented")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:function(){return function Jme(){return Ie(s9)}()},providedIn:"platform"}),l})();const e0e=new Wn("Location Initialized");let s9=(()=>{class l extends vp{constructor(o){super(),this._doc=o,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Eu().getBaseHref(this._doc)}onPopState(o){const c=Eu().getGlobalEventTarget(this._doc,"window");return c.addEventListener("popstate",o,!1),()=>c.removeEventListener("popstate",o)}onHashChange(o){const c=Eu().getGlobalEventTarget(this._doc,"window");return c.addEventListener("hashchange",o,!1),()=>c.removeEventListener("hashchange",o)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(o){this.location.pathname=o}pushState(o,c,u){o9()?this._history.pushState(o,c,u):this.location.hash=u}replaceState(o,c,u){o9()?this._history.replaceState(o,c,u):this.location.hash=u}forward(){this._history.forward()}back(){this._history.back()}historyGo(o=0){this._history.go(o)}getState(){return this._history.state}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wr))},l.\u0275prov=Xe({token:l,factory:function(){return function t0e(){return new s9(Ie(Wr))}()},providedIn:"platform"}),l})();function o9(){return!!window.history.pushState}function OI(l,a){if(0==l.length)return a;if(0==a.length)return l;let o=0;return l.endsWith("/")&&o++,a.startsWith("/")&&o++,2==o?l+a.substring(1):1==o?l+a:l+"/"+a}function a9(l){const a=l.match(/#|\?|$/),o=a&&a.index||l.length;return l.slice(0,o-("/"===l[o-1]?1:0))+l.slice(o)}function Ih(l){return l&&"?"!==l[0]?"?"+l:l}let Jm=(()=>{class l{historyGo(o){throw new Error("Not implemented")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:function(){return function n0e(l){const a=Ie(Wr).location;return new l9(Ie(vp),a&&a.origin||"")}()},providedIn:"root"}),l})();const FI=new Wn("appBaseHref");let l9=(()=>{class l extends Jm{constructor(o,c){if(super(),this._platformLocation=o,this._removeListenerFns=[],null==c&&(c=this._platformLocation.getBaseHrefFromDOM()),null==c)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=c}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}prepareExternalUrl(o){return OI(this._baseHref,o)}path(o=!1){const c=this._platformLocation.pathname+Ih(this._platformLocation.search),u=this._platformLocation.hash;return u&&o?`${c}${u}`:c}pushState(o,c,u,h){const d=this.prepareExternalUrl(u+Ih(h));this._platformLocation.pushState(o,c,d)}replaceState(o,c,u,h){const d=this.prepareExternalUrl(u+Ih(h));this._platformLocation.replaceState(o,c,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(o=0){var c,u;null===(u=(c=this._platformLocation).historyGo)||void 0===u||u.call(c,o)}}return l.\u0275fac=function(o){return new(o||l)(Ie(vp),Ie(FI,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),i0e=(()=>{class l extends Jm{constructor(o,c){super(),this._platformLocation=o,this._baseHref="",this._removeListenerFns=[],null!=c&&(this._baseHref=c)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}path(o=!1){let c=this._platformLocation.hash;return null==c&&(c="#"),c.length>0?c.substring(1):c}prepareExternalUrl(o){const c=OI(this._baseHref,o);return c.length>0?"#"+c:c}pushState(o,c,u,h){let d=this.prepareExternalUrl(u+Ih(h));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(o,c,d)}replaceState(o,c,u,h){let d=this.prepareExternalUrl(u+Ih(h));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(o,c,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(o=0){var c,u;null===(u=(c=this._platformLocation).historyGo)||void 0===u||u.call(c,o)}}return l.\u0275fac=function(o){return new(o||l)(Ie(vp),Ie(FI,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),RI=(()=>{class l{constructor(o,c){this._subject=new St,this._urlChangeListeners=[],this._platformStrategy=o;const u=this._platformStrategy.getBaseHref();this._platformLocation=c,this._baseHref=a9(c9(u)),this._platformStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}path(o=!1){return this.normalize(this._platformStrategy.path(o))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(o,c=""){return this.path()==this.normalize(o+Ih(c))}normalize(o){return l.stripTrailingSlash(function s0e(l,a){return l&&a.startsWith(l)?a.substring(l.length):a}(this._baseHref,c9(o)))}prepareExternalUrl(o){return o&&"/"!==o[0]&&(o="/"+o),this._platformStrategy.prepareExternalUrl(o)}go(o,c="",u=null){this._platformStrategy.pushState(u,"",o,c),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+Ih(c)),u)}replaceState(o,c="",u=null){this._platformStrategy.replaceState(u,"",o,c),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+Ih(c)),u)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(o=0){var c,u;null===(u=(c=this._platformStrategy).historyGo)||void 0===u||u.call(c,o)}onUrlChange(o){this._urlChangeListeners.push(o),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(c=>{this._notifyUrlChangeListeners(c.url,c.state)}))}_notifyUrlChangeListeners(o="",c){this._urlChangeListeners.forEach(u=>u(o,c))}subscribe(o,c,u){return this._subject.subscribe({next:o,error:c,complete:u})}}return l.normalizeQueryParams=Ih,l.joinWithSlash=OI,l.stripTrailingSlash=a9,l.\u0275fac=function(o){return new(o||l)(Ie(Jm),Ie(vp))},l.\u0275prov=Xe({token:l,factory:function(){return function r0e(){return new RI(Ie(Jm),Ie(vp))}()},providedIn:"root"}),l})();function c9(l){return l.replace(/\/index.html$/,"")}var Ps=(()=>((Ps=Ps||{})[Ps.Zero=0]="Zero",Ps[Ps.One=1]="One",Ps[Ps.Two=2]="Two",Ps[Ps.Few=3]="Few",Ps[Ps.Many=4]="Many",Ps[Ps.Other=5]="Other",Ps))();const h0e=function bH(l){return function Ro(l){const a=function rpe(l){return l.toLowerCase().replace(/_/g,"-")}(l);let o=CH(a);if(o)return o;const c=a.split("-")[0];if(o=CH(c),o)return o;if("en"===c)return npe;throw new Error(`Missing locale data for the locale "${l}".`)}(l)[ln.PluralCase]};class Iw{}let z0e=(()=>{class l extends Iw{constructor(o){super(),this.locale=o}getPluralCategory(o,c){switch(h0e(c||this.locale)(o)){case Ps.Zero:return"zero";case Ps.One:return"one";case Ps.Two:return"two";case Ps.Few:return"few";case Ps.Many:return"many";default:return"other"}}}return l.\u0275fac=function(o){return new(o||l)(Ie(Mu))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function _9(l,a){a=encodeURIComponent(a);for(const o of l.split(";")){const c=o.indexOf("="),[u,h]=-1==c?[o,""]:[o.slice(0,c),o.slice(c+1)];if(u.trim()===a)return decodeURIComponent(h)}return null}let Xn=(()=>{class l{constructor(o,c,u,h){this._iterableDiffers=o,this._keyValueDiffers=c,this._ngEl=u,this._renderer=h,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(o){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof o?o.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(o){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof o?o.split(/\s+/):o,this._rawClass&&(xy(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const o=this._iterableDiffer.diff(this._rawClass);o&&this._applyIterableChanges(o)}else if(this._keyValueDiffer){const o=this._keyValueDiffer.diff(this._rawClass);o&&this._applyKeyValueChanges(o)}}_applyKeyValueChanges(o){o.forEachAddedItem(c=>this._toggleClass(c.key,c.currentValue)),o.forEachChangedItem(c=>this._toggleClass(c.key,c.currentValue)),o.forEachRemovedItem(c=>{c.previousValue&&this._toggleClass(c.key,!1)})}_applyIterableChanges(o){o.forEachAddedItem(c=>{if("string"!=typeof c.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${fr(c.item)}`);this._toggleClass(c.item,!0)}),o.forEachRemovedItem(c=>this._toggleClass(c.item,!1))}_applyClasses(o){o&&(Array.isArray(o)||o instanceof Set?o.forEach(c=>this._toggleClass(c,!0)):Object.keys(o).forEach(c=>this._toggleClass(c,!!o[c])))}_removeClasses(o){o&&(Array.isArray(o)||o instanceof Set?o.forEach(c=>this._toggleClass(c,!1)):Object.keys(o).forEach(c=>this._toggleClass(c,!1)))}_toggleClass(o,c){(o=o.trim())&&o.split(/\s+/g).forEach(u=>{c?this._renderer.addClass(this._ngEl.nativeElement,u):this._renderer.removeClass(this._ngEl.nativeElement,u)})}}return l.\u0275fac=function(o){return new(o||l)(R(mp),R(Qm),R(bn),R(di))},l.\u0275dir=mt({type:l,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),l})();class W0e{constructor(a,o,c,u){this.$implicit=a,this.ngForOf=o,this.index=c,this.count=u}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fi=(()=>{class l{constructor(o,c,u){this._viewContainer=o,this._template=c,this._differs=u,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(o){this._ngForOf=o,this._ngForOfDirty=!0}set ngForTrackBy(o){this._trackByFn=o}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(o){o&&(this._template=o)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const o=this._ngForOf;!this._differ&&o&&(this._differ=this._differs.find(o).create(this.ngForTrackBy))}if(this._differ){const o=this._differ.diff(this._ngForOf);o&&this._applyChanges(o)}}_applyChanges(o){const c=this._viewContainer;o.forEachOperation((u,h,d)=>{if(null==u.previousIndex)c.createEmbeddedView(this._template,new W0e(u.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)c.remove(null===h?void 0:h);else if(null!==h){const f=c.get(h);c.move(f,d),y9(f,u)}});for(let u=0,h=c.length;u<h;u++){const f=c.get(u).context;f.index=u,f.count=h,f.ngForOf=this._ngForOf}o.forEachIdentityChange(u=>{y9(c.get(u.currentIndex),u)})}static ngTemplateContextGuard(o,c){return!0}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(Qr),R(mp))},l.\u0275dir=mt({type:l,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),l})();function y9(l,a){l.context.$implicit=a.item}let mn=(()=>{class l{constructor(o,c){this._viewContainer=o,this._context=new G0e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=c}set ngIf(o){this._context.$implicit=this._context.ngIf=o,this._updateView()}set ngIfThen(o){b9("ngIfThen",o),this._thenTemplateRef=o,this._thenViewRef=null,this._updateView()}set ngIfElse(o){b9("ngIfElse",o),this._elseTemplateRef=o,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(o,c){return!0}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(Qr))},l.\u0275dir=mt({type:l,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),l})();class G0e{constructor(){this.$implicit=null,this.ngIf=null}}function b9(l,a){if(a&&!a.createEmbeddedView)throw new Error(`${l} must be a TemplateRef, but received '${fr(a)}'.`)}class $I{constructor(a,o){this._viewContainerRef=a,this._templateRef=o,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(a){a&&!this._created?this.create():!a&&this._created&&this.destroy()}}let Pw=(()=>{class l{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(o){this._ngSwitch=o,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(o){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(o)}_matchCase(o){const c=o==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||c,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),c}_updateDefaultCases(o){if(this._defaultViews&&o!==this._defaultUsed){this._defaultUsed=o;for(let c=0;c<this._defaultViews.length;c++)this._defaultViews[c].enforceState(o)}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=mt({type:l,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),l})(),C9=(()=>{class l{constructor(o,c,u){this.ngSwitch=u,u._addCase(),this._view=new $I(o,c)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(Qr),R(Pw,9))},l.\u0275dir=mt({type:l,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),l})(),ku=(()=>{class l{constructor(o){this._viewContainerRef=o,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(o){if(o.ngTemplateOutlet){const c=this._viewContainerRef;this._viewRef&&c.remove(c.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?c.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&o.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return l.\u0275fac=function(o){return new(o||l)(R(Ti))},l.\u0275dir=mt({type:l,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Ys]}),l})();class Y0e{createSubscription(a,o){return a.subscribe({next:o,error:c=>{throw c}})}dispose(a){a.unsubscribe()}onDestroy(a){a.unsubscribe()}}class X0e{createSubscription(a,o){return a.then(o,c=>{throw c})}dispose(a){}onDestroy(a){}}const Z0e=new X0e,K0e=new Y0e;let qI=(()=>{class l{constructor(o){this._ref=o,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(o){return this._obj?o!==this._obj?(this._dispose(),this.transform(o)):this._latestValue:(o&&this._subscribe(o),this._latestValue)}_subscribe(o){this._obj=o,this._strategy=this._selectStrategy(o),this._subscription=this._strategy.createSubscription(o,c=>this._updateLatestValue(o,c))}_selectStrategy(o){if(Sy(o))return Z0e;if(RU(o))return K0e;throw function Pc(l,a){return new qi(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(o,c){o===this._obj&&(this._latestValue=c,this._ref.markForCheck())}}return l.\u0275fac=function(o){return new(o||l)(R(Na,16))},l.\u0275pipe=Oa({name:"async",type:l,pure:!1}),l})(),pi=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({providers:[{provide:Iw,useClass:z0e}]}),l})();const S9="browser";function Ji(l){return l===S9}let vve=(()=>{class l{}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:()=>new _ve(Ie(Wr),window)}),l})();class _ve{constructor(a,o){this.document=a,this.window=o,this.offset=()=>[0,0]}setOffset(a){this.offset=Array.isArray(a)?()=>a:a}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(a){this.supportsScrolling()&&this.window.scrollTo(a[0],a[1])}scrollToAnchor(a){if(!this.supportsScrolling())return;const o=function yve(l,a){const o=l.getElementById(a)||l.getElementsByName(a)[0];if(o)return o;if("function"==typeof l.createTreeWalker&&l.body&&(l.body.createShadowRoot||l.body.attachShadow)){const c=l.createTreeWalker(l.body,NodeFilter.SHOW_ELEMENT);let u=c.currentNode;for(;u;){const h=u.shadowRoot;if(h){const d=h.getElementById(a)||h.querySelector(`[name="${a}"]`);if(d)return d}u=c.nextNode()}}return null}(this.document,a);o&&(this.scrollToElement(o),o.focus())}setHistoryScrollRestoration(a){if(this.supportScrollRestoration()){const o=this.window.history;o&&o.scrollRestoration&&(o.scrollRestoration=a)}}scrollToElement(a){const o=a.getBoundingClientRect(),c=o.left+this.window.pageXOffset,u=o.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(c-h[0],u-h[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const a=T9(this.window.history)||T9(Object.getPrototypeOf(this.window.history));return!(!a||!a.writable&&!a.set)}catch(a){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(a){return!1}}}function T9(l){return Object.getOwnPropertyDescriptor(l,"scrollRestoration")}class D9{}class ZI extends class bve extends class Qme{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Kme(l){xw||(xw=l)}(new ZI)}onAndCancel(a,o,c){return a.addEventListener(o,c,!1),()=>{a.removeEventListener(o,c,!1)}}dispatchEvent(a,o){a.dispatchEvent(o)}remove(a){a.parentNode&&a.parentNode.removeChild(a)}createElement(a,o){return(o=o||this.getDefaultDocument()).createElement(a)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(a){return a.nodeType===Node.ELEMENT_NODE}isShadowRoot(a){return a instanceof DocumentFragment}getGlobalEventTarget(a,o){return"window"===o?window:"document"===o?a:"body"===o?a.body:null}getBaseHref(a){const o=function Cve(){return Gy=Gy||document.querySelector("base"),Gy?Gy.getAttribute("href"):null}();return null==o?null:function xve(l){Ow=Ow||document.createElement("a"),Ow.setAttribute("href",l);const a=Ow.pathname;return"/"===a.charAt(0)?a:`/${a}`}(o)}resetBaseElement(){Gy=null}getUserAgent(){return window.navigator.userAgent}getCookie(a){return _9(document.cookie,a)}}let Ow,Gy=null;const M9=new Wn("TRANSITION_ID"),Sve=[{provide:yw,useFactory:function wve(l,a,o){return()=>{o.get(Km).donePromise.then(()=>{const c=Eu(),u=a.querySelectorAll(`style[ng-transition="${l}"]`);for(let h=0;h<u.length;h++)c.remove(u[h])})}},deps:[M9,Wr,or],multi:!0}];class KI{static init(){!function vme(l){MI=l}(new KI)}addToWindow(a){xr.getAngularTestability=(c,u=!0)=>{const h=a.findTestabilityInTree(c,u);if(null==h)throw new Error("Could not find testability for element.");return h},xr.getAllAngularTestabilities=()=>a.getAllTestabilities(),xr.getAllAngularRootElements=()=>a.getAllRootElements(),xr.frameworkStabilizers||(xr.frameworkStabilizers=[]),xr.frameworkStabilizers.push(c=>{const u=xr.getAllAngularTestabilities();let h=u.length,d=!1;const f=function(p){d=d||p,h--,0==h&&c(d)};u.forEach(function(p){p.whenStable(f)})})}findTestabilityInTree(a,o,c){if(null==o)return null;const u=a.getTestability(o);return null!=u?u:c?Eu().isShadowRoot(o)?this.findTestabilityInTree(a,o.host,!0):this.findTestabilityInTree(a,o.parentElement,!0):null}}let Tve=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Fw=new Wn("EventManagerPlugins");let Rw=(()=>{class l{constructor(o,c){this._zone=c,this._eventNameToPlugin=new Map,o.forEach(u=>u.manager=this),this._plugins=o.slice().reverse()}addEventListener(o,c,u){return this._findPluginFor(c).addEventListener(o,c,u)}addGlobalEventListener(o,c,u){return this._findPluginFor(c).addGlobalEventListener(o,c,u)}getZone(){return this._zone}_findPluginFor(o){const c=this._eventNameToPlugin.get(o);if(c)return c;const u=this._plugins;for(let h=0;h<u.length;h++){const d=u[h];if(d.supports(o))return this._eventNameToPlugin.set(o,d),d}throw new Error(`No event manager plugin found for event ${o}`)}}return l.\u0275fac=function(o){return new(o||l)(Ie(Fw),Ie(ar))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class E9{constructor(a){this._doc=a}addGlobalEventListener(a,o,c){const u=Eu().getGlobalEventTarget(this._doc,a);if(!u)throw new Error(`Unsupported event target ${u} for event ${o}`);return this.addEventListener(u,o,c)}}let k9=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(o){const c=new Set;o.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),c.add(u))}),this.onStylesAdded(c)}onStylesAdded(o){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),jy=(()=>{class l extends k9{constructor(o){super(),this._doc=o,this._hostNodes=new Map,this._hostNodes.set(o.head,[])}_addStylesToHost(o,c,u){o.forEach(h=>{const d=this._doc.createElement("style");d.textContent=h,u.push(c.appendChild(d))})}addHost(o){const c=[];this._addStylesToHost(this._stylesSet,o,c),this._hostNodes.set(o,c)}removeHost(o){const c=this._hostNodes.get(o);c&&c.forEach(A9),this._hostNodes.delete(o)}onStylesAdded(o){this._hostNodes.forEach((c,u)=>{this._addStylesToHost(o,u,c)})}ngOnDestroy(){this._hostNodes.forEach(o=>o.forEach(A9))}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function A9(l){Eu().remove(l)}const QI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},JI=/%COMP%/g;function Nw(l,a,o){for(let c=0;c<a.length;c++){let u=a[c];Array.isArray(u)?Nw(l,u,o):(u=u.replace(JI,l),o.push(u))}return o}function O9(l){return a=>{if("__ngUnwrap__"===a)return l;!1===l(a)&&(a.preventDefault(),a.returnValue=!1)}}let Lw=(()=>{class l{constructor(o,c,u){this.eventManager=o,this.sharedStylesHost=c,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new e3(o)}createRenderer(o,c){if(!o||!c)return this.defaultRenderer;switch(c.encapsulation){case Cc.Emulated:{let u=this.rendererByCompId.get(c.id);return u||(u=new Ive(this.eventManager,this.sharedStylesHost,c,this.appId),this.rendererByCompId.set(c.id,u)),u.applyToHost(o),u}case 1:case Cc.ShadowDom:return new Pve(this.eventManager,this.sharedStylesHost,o,c);default:if(!this.rendererByCompId.has(c.id)){const u=Nw(c.id,c.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(c.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(o){return new(o||l)(Ie(Rw),Ie(jy),Ie(Vy))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class e3{constructor(a){this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(a,o){return o?document.createElementNS(QI[o],a):document.createElement(a)}createComment(a){return document.createComment(a)}createText(a){return document.createTextNode(a)}appendChild(a,o){a.appendChild(o)}insertBefore(a,o,c){a&&a.insertBefore(o,c)}removeChild(a,o){a&&a.removeChild(o)}selectRootElement(a,o){let c="string"==typeof a?document.querySelector(a):a;if(!c)throw new Error(`The selector "${a}" did not match any elements`);return o||(c.textContent=""),c}parentNode(a){return a.parentNode}nextSibling(a){return a.nextSibling}setAttribute(a,o,c,u){if(u){o=u+":"+o;const h=QI[u];h?a.setAttributeNS(h,o,c):a.setAttribute(o,c)}else a.setAttribute(o,c)}removeAttribute(a,o,c){if(c){const u=QI[c];u?a.removeAttributeNS(u,o):a.removeAttribute(`${c}:${o}`)}else a.removeAttribute(o)}addClass(a,o){a.classList.add(o)}removeClass(a,o){a.classList.remove(o)}setStyle(a,o,c,u){u&(ol.DashCase|ol.Important)?a.style.setProperty(o,c,u&ol.Important?"important":""):a.style[o]=c}removeStyle(a,o,c){c&ol.DashCase?a.style.removeProperty(o):a.style[o]=""}setProperty(a,o,c){a[o]=c}setValue(a,o){a.nodeValue=o}listen(a,o,c){return"string"==typeof a?this.eventManager.addGlobalEventListener(a,o,O9(c)):this.eventManager.addEventListener(a,o,O9(c))}}class Ive extends e3{constructor(a,o,c,u){super(a),this.component=c;const h=Nw(u+"-"+c.id,c.styles,[]);o.addStyles(h),this.contentAttr=function Eve(l){return"_ngcontent-%COMP%".replace(JI,l)}(u+"-"+c.id),this.hostAttr=function kve(l){return"_nghost-%COMP%".replace(JI,l)}(u+"-"+c.id)}applyToHost(a){super.setAttribute(a,this.hostAttr,"")}createElement(a,o){const c=super.createElement(a,o);return super.setAttribute(c,this.contentAttr,""),c}}class Pve extends e3{constructor(a,o,c,u){super(a),this.sharedStylesHost=o,this.hostEl=c,this.shadowRoot=c.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=Nw(u.id,u.styles,[]);for(let d=0;d<h.length;d++){const f=document.createElement("style");f.textContent=h[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(a){return a===this.hostEl?this.shadowRoot:a}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(a,o){return super.appendChild(this.nodeOrShadowRoot(a),o)}insertBefore(a,o,c){return super.insertBefore(this.nodeOrShadowRoot(a),o,c)}removeChild(a,o){return super.removeChild(this.nodeOrShadowRoot(a),o)}parentNode(a){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(a)))}}let Ove=(()=>{class l extends E9{constructor(o){super(o)}supports(o){return!0}addEventListener(o,c,u){return o.addEventListener(c,u,!1),()=>this.removeEventListener(o,c,u)}removeEventListener(o,c,u){return o.removeEventListener(c,u)}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const R9=["alt","control","meta","shift"],Rve={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N9={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Nve={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let Lve=(()=>{class l extends E9{constructor(o){super(o)}supports(o){return null!=l.parseEventName(o)}addEventListener(o,c,u){const h=l.parseEventName(c),d=l.eventCallback(h.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Eu().onAndCancel(o,h.domEventName,d))}static parseEventName(o){const c=o.toLowerCase().split("."),u=c.shift();if(0===c.length||"keydown"!==u&&"keyup"!==u)return null;const h=l._normalizeKey(c.pop());let d="";if(R9.forEach(p=>{const g=c.indexOf(p);g>-1&&(c.splice(g,1),d+=p+".")}),d+=h,0!=c.length||0===h.length)return null;const f={};return f.domEventName=u,f.fullKey=d,f}static getEventFullKey(o){let c="",u=function Bve(l){let a=l.key;if(null==a){if(a=l.keyIdentifier,null==a)return"Unidentified";a.startsWith("U+")&&(a=String.fromCharCode(parseInt(a.substring(2),16)),3===l.location&&N9.hasOwnProperty(a)&&(a=N9[a]))}return Rve[a]||a}(o);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),R9.forEach(h=>{h!=u&&Nve[h](o)&&(c+=h+".")}),c+=u,c}static eventCallback(o,c,u){return h=>{l.getEventFullKey(h)===o&&u.runGuarded(()=>c(h))}}static _normalizeKey(o){return"esc"===o?"escape":o}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Hve=U7(Hme,"browser",[{provide:Hr,useValue:S9},{provide:P7,useValue:function Vve(){ZI.makeCurrent(),KI.init()},multi:!0},{provide:Wr,useFactory:function Uve(){return function dce(l){wk=l}(document),document},deps:[]}]),Wve=[{provide:NA,useValue:"root"},{provide:Sm,useFactory:function zve(){return new Sm},deps:[]},{provide:Fw,useClass:Ove,multi:!0,deps:[Wr,ar,Hr]},{provide:Fw,useClass:Lve,multi:!0,deps:[Wr]},{provide:Lw,useClass:Lw,deps:[Rw,jy,Vy]},{provide:Ym,useExisting:Lw},{provide:k9,useExisting:jy},{provide:jy,useClass:jy,deps:[Wr]},{provide:DI,useClass:DI,deps:[ar]},{provide:Rw,useClass:Rw,deps:[Fw,ar]},{provide:D9,useClass:Tve,deps:[]}];let L9=(()=>{class l{constructor(o){if(o)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(o){return{ngModule:l,providers:[{provide:Vy,useValue:o.appId},{provide:M9,useExisting:Vy},Sve]}}}return l.\u0275fac=function(o){return new(o||l)(Ie(l,12))},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({providers:Wve,imports:[pi,Xme]}),l})();function ni(...l){return lo(l,q_(l))}"undefined"!=typeof window&&window;class Pr extends pt{constructor(a){super(),this._value=a}get value(){return this.getValue()}_subscribe(a){const o=super._subscribe(a);return!o.closed&&a.next(this._value),o}getValue(){const{hasError:a,thrownError:o,_value:c}=this;if(a)throw o;return this._throwIfClosed(),c}next(a){super.next(this._value=a)}}const{isArray:e_e}=Array,{getPrototypeOf:t_e,prototype:n_e,keys:i_e}=Object;function z9(l){if(1===l.length){const a=l[0];if(e_e(a))return{args:a,keys:null};if(function r_e(l){return l&&"object"==typeof l&&t_e(l)===n_e}(a)){const o=i_e(a);return{args:o.map(c=>a[c]),keys:o}}}return{args:l,keys:null}}const{isArray:s_e}=Array;function n3(l){return hn(a=>function o_e(l,a){return s_e(a)?l(...a):l(a)}(l,a))}function U9(l,a){return l.reduce((o,c,u)=>(o[c]=a[u],o),{})}function W9(l,a,o){l?bh(o,l,a):a()}const Bw=Ce(l=>function(){l(this),this.name="EmptyError",this.message="no elements in sequence"});function r3(...l){return function l_e(){return $_(1)}()(lo(l,q_(l)))}function G9(l){return new _n(a=>{yc(l()).subscribe(a)})}function j9(){return mi((l,a)=>{let o=null;l._refCount++;const c=new Ri(a,void 0,void 0,void 0,()=>{if(!l||l._refCount<=0||0<--l._refCount)return void(o=null);const u=l._connection,h=o;o=null,u&&(!h||u===h)&&u.unsubscribe(),a.unsubscribe()});l.subscribe(c),c.closed||(o=l.connect())})}class c_e extends _n{constructor(a,o){super(),this.source=a,this.subjectFactory=o,this._subject=null,this._refCount=0,this._connection=null,Jt(a)&&(this.lift=a.lift)}_subscribe(a){return this.getSubject().subscribe(a)}getSubject(){const a=this._subject;return(!a||a.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:a}=this;this._subject=this._connection=null,null==a||a.unsubscribe()}connect(){let a=this._connection;if(!a){a=this._connection=new Oe;const o=this.getSubject();a.add(this.source.subscribe(new Ri(o,void 0,()=>{this._teardown(),o.complete()},c=>{this._teardown(),o.error(c)},()=>this._teardown()))),a.closed&&(this._connection=null,a=Oe.EMPTY)}return a}refCount(){return j9()(this)}}function Vd(l,a){return mi((o,c)=>{let u=null,h=0,d=!1;const f=()=>d&&!u&&c.complete();o.subscribe(new Ri(c,p=>{null==u||u.unsubscribe();let g=0;const m=h++;yc(l(p,m)).subscribe(u=new Ri(c,v=>c.next(a?a(p,v,m,g++):v),()=>{u=null,f()}))},()=>{d=!0,f()}))})}function Vw(...l){const a=q_(l);return mi((o,c)=>{(a?r3(l,o,a):r3(l,o)).subscribe(c)})}function u_e(l,a,o,c,u){return(h,d)=>{let f=o,p=a,g=0;h.subscribe(new Ri(d,m=>{const v=g++;p=f?l(p,m,v):(f=!0,m),c&&d.next(p)},u&&(()=>{f&&d.next(p),d.complete()})))}}function $9(l,a){return mi(u_e(l,a,arguments.length>=2,!0))}function Ss(l,a){return mi((o,c)=>{let u=0;o.subscribe(new Ri(c,h=>l.call(a,h,u++)&&c.next(h)))})}function Xi(l){return mi((a,o)=>{let h,c=null,u=!1;c=a.subscribe(new Ri(o,void 0,void 0,d=>{h=yc(l(d,Xi(l)(a))),c?(c.unsubscribe(),c=null,h.subscribe(o)):u=!0})),u&&(c.unsubscribe(),c=null,h.subscribe(o))})}function e0(l,a){return ue(a)?qs(l,a,1):qs(l,1)}function s3(l){return l<=0?()=>Ch:mi((a,o)=>{let c=[];a.subscribe(new Ri(o,u=>{c.push(u),l<c.length&&c.shift()},()=>{for(const u of c)o.next(u);o.complete()},void 0,()=>{c=null}))})}function q9(l=h_e){return mi((a,o)=>{let c=!1;a.subscribe(new Ri(o,u=>{c=!0,o.next(u)},()=>c?o.complete():o.error(l())))})}function h_e(){return new Bw}function Y9(l){return mi((a,o)=>{let c=!1;a.subscribe(new Ri(o,u=>{c=!0,o.next(u)},()=>{c||o.next(l),o.complete()}))})}function zd(l,a){const o=arguments.length>=2;return c=>c.pipe(l?Ss((u,h)=>l(u,h,c)):bt,sm(1),o?Y9(a):q9(()=>new Bw))}function oa(l,a,o){const c=ue(l)||a||o?{next:l,error:a,complete:o}:l;return c?mi((u,h)=>{var d;null===(d=c.subscribe)||void 0===d||d.call(c);let f=!0;u.subscribe(new Ri(h,p=>{var g;null===(g=c.next)||void 0===g||g.call(c,p),h.next(p)},()=>{var p;f=!1,null===(p=c.complete)||void 0===p||p.call(c),h.complete()},p=>{var g;f=!1,null===(g=c.error)||void 0===g||g.call(c,p),h.error(p)},()=>{var p,g;f&&(null===(p=c.unsubscribe)||void 0===p||p.call(c)),null===(g=c.finalize)||void 0===g||g.call(c)}))}):bt}class Oh{constructor(a,o){this.id=a,this.url=o}}class o3 extends Oh{constructor(a,o,c="imperative",u=null){super(a,o),this.navigationTrigger=c,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $y extends Oh{constructor(a,o,c){super(a,o),this.urlAfterRedirects=c}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class X9 extends Oh{constructor(a,o,c){super(a,o),this.reason=c}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class p_e extends Oh{constructor(a,o,c){super(a,o),this.error=c}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class g_e extends Oh{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m_e extends Oh{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v_e extends Oh{constructor(a,o,c,u,h){super(a,o),this.urlAfterRedirects=c,this.state=u,this.shouldActivate=h}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class __e extends Oh{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y_e extends Oh{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z9{constructor(a){this.route=a}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class K9{constructor(a){this.route=a}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class b_e{constructor(a){this.snapshot=a}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C_e{constructor(a){this.snapshot=a}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x_e{constructor(a){this.snapshot=a}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w_e{constructor(a){this.snapshot=a}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q9{constructor(a,o,c){this.routerEvent=a,this.position=o,this.anchor=c}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Li="primary";class S_e{constructor(a){this.params=a||{}}has(a){return Object.prototype.hasOwnProperty.call(this.params,a)}get(a){if(this.has(a)){const o=this.params[a];return Array.isArray(o)?o[0]:o}return null}getAll(a){if(this.has(a)){const o=this.params[a];return Array.isArray(o)?o:[o]}return[]}get keys(){return Object.keys(this.params)}}function t0(l){return new S_e(l)}const J9="ngNavigationCancelingError";function a3(l){const a=Error("NavigationCancelingError: "+l);return a[J9]=!0,a}function D_e(l,a,o){const c=o.path.split("/");if(c.length>l.length||"full"===o.pathMatch&&(a.hasChildren()||c.length<l.length))return null;const u={};for(let h=0;h<c.length;h++){const d=c[h],f=l[h];if(d.startsWith(":"))u[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:l.slice(0,c.length),posParams:u}}function Au(l,a){const o=l?Object.keys(l):void 0,c=a?Object.keys(a):void 0;if(!o||!c||o.length!=c.length)return!1;let u;for(let h=0;h<o.length;h++)if(u=o[h],!eW(l[u],a[u]))return!1;return!0}function eW(l,a){if(Array.isArray(l)&&Array.isArray(a)){if(l.length!==a.length)return!1;const o=[...l].sort(),c=[...a].sort();return o.every((u,h)=>c[h]===u)}return l===a}function tW(l){return Array.prototype.concat.apply([],l)}function nW(l){return l.length>0?l[l.length-1]:null}function xo(l,a){for(const o in l)l.hasOwnProperty(o)&&a(l[o],o)}function Iu(l){return XA(l)?l:Sy(l)?lo(Promise.resolve(l)):ni(l)}const k_e={exact:function sW(l,a,o){if(!yp(l.segments,a.segments)||!zw(l.segments,a.segments,o)||l.numberOfChildren!==a.numberOfChildren)return!1;for(const c in a.children)if(!l.children[c]||!sW(l.children[c],a.children[c],o))return!1;return!0},subset:oW},iW={exact:function A_e(l,a){return Au(l,a)},subset:function I_e(l,a){return Object.keys(a).length<=Object.keys(l).length&&Object.keys(a).every(o=>eW(l[o],a[o]))},ignored:()=>!0};function rW(l,a,o){return k_e[o.paths](l.root,a.root,o.matrixParams)&&iW[o.queryParams](l.queryParams,a.queryParams)&&!("exact"===o.fragment&&l.fragment!==a.fragment)}function oW(l,a,o){return aW(l,a,a.segments,o)}function aW(l,a,o,c){if(l.segments.length>o.length){const u=l.segments.slice(0,o.length);return!(!yp(u,o)||a.hasChildren()||!zw(u,o,c))}if(l.segments.length===o.length){if(!yp(l.segments,o)||!zw(l.segments,o,c))return!1;for(const u in a.children)if(!l.children[u]||!oW(l.children[u],a.children[u],c))return!1;return!0}{const u=o.slice(0,l.segments.length),h=o.slice(l.segments.length);return!!(yp(l.segments,u)&&zw(l.segments,u,c)&&l.children[Li])&&aW(l.children[Li],a,h,c)}}function zw(l,a,o){return a.every((c,u)=>iW[o](l[u].parameters,c.parameters))}class _p{constructor(a,o,c){this.root=a,this.queryParams=o,this.fragment=c}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=t0(this.queryParams)),this._queryParamMap}toString(){return F_e.serialize(this)}}class Hi{constructor(a,o){this.segments=a,this.children=o,this.parent=null,xo(o,(c,u)=>c.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uw(this)}}class qy{constructor(a,o){this.path=a,this.parameters=o}get parameterMap(){return this._parameterMap||(this._parameterMap=t0(this.parameters)),this._parameterMap}toString(){return dW(this)}}function yp(l,a){return l.length===a.length&&l.every((o,c)=>o.path===a[c].path)}class lW{}class cW{parse(a){const o=new W_e(a);return new _p(o.parseRootSegment(),o.parseQueryParams(),o.parseFragment())}serialize(a){const o=`/${Yy(a.root,!0)}`,c=function L_e(l){const a=Object.keys(l).map(o=>{const c=l[o];return Array.isArray(c)?c.map(u=>`${Hw(o)}=${Hw(u)}`).join("&"):`${Hw(o)}=${Hw(c)}`}).filter(o=>!!o);return a.length?`?${a.join("&")}`:""}(a.queryParams);return`${o}${c}${"string"==typeof a.fragment?`#${function R_e(l){return encodeURI(l)}(a.fragment)}`:""}`}}const F_e=new cW;function Uw(l){return l.segments.map(a=>dW(a)).join("/")}function Yy(l,a){if(!l.hasChildren())return Uw(l);if(a){const o=l.children[Li]?Yy(l.children[Li],!1):"",c=[];return xo(l.children,(u,h)=>{h!==Li&&c.push(`${h}:${Yy(u,!1)}`)}),c.length>0?`${o}(${c.join("//")})`:o}{const o=function O_e(l,a){let o=[];return xo(l.children,(c,u)=>{u===Li&&(o=o.concat(a(c,u)))}),xo(l.children,(c,u)=>{u!==Li&&(o=o.concat(a(c,u)))}),o}(l,(c,u)=>u===Li?[Yy(l.children[Li],!1)]:[`${u}:${Yy(c,!1)}`]);return 1===Object.keys(l.children).length&&null!=l.children[Li]?`${Uw(l)}/${o[0]}`:`${Uw(l)}/(${o.join("//")})`}}function uW(l){return encodeURIComponent(l).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hw(l){return uW(l).replace(/%3B/gi,";")}function l3(l){return uW(l).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ww(l){return decodeURIComponent(l)}function hW(l){return Ww(l.replace(/\+/g,"%20"))}function dW(l){return`${l3(l.path)}${function N_e(l){return Object.keys(l).map(a=>`;${l3(a)}=${l3(l[a])}`).join("")}(l.parameters)}`}const B_e=/^[^\/()?;=#]+/;function Gw(l){const a=l.match(B_e);return a?a[0]:""}const V_e=/^[^=?&#]+/,U_e=/^[^&#]+/;class W_e{constructor(a){this.url=a,this.remaining=a}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Hi([],{}):new Hi([],this.parseChildren())}parseQueryParams(){const a={};if(this.consumeOptional("?"))do{this.parseQueryParam(a)}while(this.consumeOptional("&"));return a}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const a=[];for(this.peekStartsWith("(")||a.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),a.push(this.parseSegment());let o={};this.peekStartsWith("/(")&&(this.capture("/"),o=this.parseParens(!0));let c={};return this.peekStartsWith("(")&&(c=this.parseParens(!1)),(a.length>0||Object.keys(o).length>0)&&(c[Li]=new Hi(a,o)),c}parseSegment(){const a=Gw(this.remaining);if(""===a&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(a),new qy(Ww(a),this.parseMatrixParams())}parseMatrixParams(){const a={};for(;this.consumeOptional(";");)this.parseParam(a);return a}parseParam(a){const o=Gw(this.remaining);if(!o)return;this.capture(o);let c="";if(this.consumeOptional("=")){const u=Gw(this.remaining);u&&(c=u,this.capture(c))}a[Ww(o)]=Ww(c)}parseQueryParam(a){const o=function z_e(l){const a=l.match(V_e);return a?a[0]:""}(this.remaining);if(!o)return;this.capture(o);let c="";if(this.consumeOptional("=")){const d=function H_e(l){const a=l.match(U_e);return a?a[0]:""}(this.remaining);d&&(c=d,this.capture(c))}const u=hW(o),h=hW(c);if(a.hasOwnProperty(u)){let d=a[u];Array.isArray(d)||(d=[d],a[u]=d),d.push(h)}else a[u]=h}parseParens(a){const o={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const c=Gw(this.remaining),u=this.remaining[c.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error(`Cannot parse url '${this.url}'`);let h;c.indexOf(":")>-1?(h=c.substr(0,c.indexOf(":")),this.capture(h),this.capture(":")):a&&(h=Li);const d=this.parseChildren();o[h]=1===Object.keys(d).length?d[Li]:new Hi([],d),this.consumeOptional("//")}return o}peekStartsWith(a){return this.remaining.startsWith(a)}consumeOptional(a){return!!this.peekStartsWith(a)&&(this.remaining=this.remaining.substring(a.length),!0)}capture(a){if(!this.consumeOptional(a))throw new Error(`Expected "${a}".`)}}class fW{constructor(a){this._root=a}get root(){return this._root.value}parent(a){const o=this.pathFromRoot(a);return o.length>1?o[o.length-2]:null}children(a){const o=c3(a,this._root);return o?o.children.map(c=>c.value):[]}firstChild(a){const o=c3(a,this._root);return o&&o.children.length>0?o.children[0].value:null}siblings(a){const o=u3(a,this._root);return o.length<2?[]:o[o.length-2].children.map(u=>u.value).filter(u=>u!==a)}pathFromRoot(a){return u3(a,this._root).map(o=>o.value)}}function c3(l,a){if(l===a.value)return a;for(const o of a.children){const c=c3(l,o);if(c)return c}return null}function u3(l,a){if(l===a.value)return[a];for(const o of a.children){const c=u3(l,o);if(c.length)return c.unshift(a),c}return[]}class Fh{constructor(a,o){this.value=a,this.children=o}toString(){return`TreeNode(${this.value})`}}function n0(l){const a={};return l&&l.children.forEach(o=>a[o.value.outlet]=o),a}class pW extends fW{constructor(a,o){super(a),this.snapshot=o,h3(this,a)}toString(){return this.snapshot.toString()}}function gW(l,a){const o=function G_e(l,a){const d=new jw([],{},{},"",{},Li,a,null,l.root,-1,{});return new vW("",new Fh(d,[]))}(l,a),c=new Pr([new qy("",{})]),u=new Pr({}),h=new Pr({}),d=new Pr({}),f=new Pr(""),p=new r0(c,u,d,f,h,Li,a,o.root);return p.snapshot=o.root,new pW(new Fh(p,[]),o)}class r0{constructor(a,o,c,u,h,d,f,p){this.url=a,this.params=o,this.queryParams=c,this.fragment=u,this.data=h,this.outlet=d,this.component=f,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(hn(a=>t0(a)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(hn(a=>t0(a)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mW(l,a="emptyOnly"){const o=l.pathFromRoot;let c=0;if("always"!==a)for(c=o.length-1;c>=1;){const u=o[c],h=o[c-1];if(u.routeConfig&&""===u.routeConfig.path)c--;else{if(h.component)break;c--}}return function j_e(l){return l.reduce((a,o)=>({params:Object.assign(Object.assign({},a.params),o.params),data:Object.assign(Object.assign({},a.data),o.data),resolve:Object.assign(Object.assign({},a.resolve),o._resolvedData)}),{params:{},data:{},resolve:{}})}(o.slice(c))}class jw{constructor(a,o,c,u,h,d,f,p,g,m,v){this.url=a,this.params=o,this.queryParams=c,this.fragment=u,this.data=h,this.outlet=d,this.component=f,this.routeConfig=p,this._urlSegment=g,this._lastPathIndex=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=t0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=t0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(c=>c.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vW extends fW{constructor(a,o){super(o),this.url=a,h3(this,o)}toString(){return _W(this._root)}}function h3(l,a){a.value._routerState=l,a.children.forEach(o=>h3(l,o))}function _W(l){const a=l.children.length>0?` { ${l.children.map(_W).join(", ")} } `:"";return`${l.value}${a}`}function d3(l){if(l.snapshot){const a=l.snapshot,o=l._futureSnapshot;l.snapshot=o,Au(a.queryParams,o.queryParams)||l.queryParams.next(o.queryParams),a.fragment!==o.fragment&&l.fragment.next(o.fragment),Au(a.params,o.params)||l.params.next(o.params),function M_e(l,a){if(l.length!==a.length)return!1;for(let o=0;o<l.length;++o)if(!Au(l[o],a[o]))return!1;return!0}(a.url,o.url)||l.url.next(o.url),Au(a.data,o.data)||l.data.next(o.data)}else l.snapshot=l._futureSnapshot,l.data.next(l._futureSnapshot.data)}function f3(l,a){const o=Au(l.params,a.params)&&function P_e(l,a){return yp(l,a)&&l.every((o,c)=>Au(o.parameters,a[c].parameters))}(l.url,a.url);return o&&!(!l.parent!=!a.parent)&&(!l.parent||f3(l.parent,a.parent))}function Xy(l,a,o){if(o&&l.shouldReuseRoute(a.value,o.value.snapshot)){const c=o.value;c._futureSnapshot=a.value;const u=function q_e(l,a,o){return a.children.map(c=>{for(const u of o.children)if(l.shouldReuseRoute(c.value,u.value.snapshot))return Xy(l,c,u);return Xy(l,c)})}(l,a,o);return new Fh(c,u)}{if(l.shouldAttach(a.value)){const h=l.retrieve(a.value);if(null!==h){const d=h.route;return d.value._futureSnapshot=a.value,d.children=a.children.map(f=>Xy(l,f)),d}}const c=function Y_e(l){return new r0(new Pr(l.url),new Pr(l.params),new Pr(l.queryParams),new Pr(l.fragment),new Pr(l.data),l.outlet,l.component,l)}(a.value),u=a.children.map(h=>Xy(l,h));return new Fh(c,u)}}function $w(l){return"object"==typeof l&&null!=l&&!l.outlets&&!l.segmentPath}function Zy(l){return"object"==typeof l&&null!=l&&l.outlets}function p3(l,a,o,c,u){let h={};return c&&xo(c,(d,f)=>{h[f]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),new _p(o.root===l?a:yW(o.root,l,a),h,u)}function yW(l,a,o){const c={};return xo(l.children,(u,h)=>{c[h]=u===a?o:yW(u,a,o)}),new Hi(l.segments,c)}class bW{constructor(a,o,c){if(this.isAbsolute=a,this.numberOfDoubleDots=o,this.commands=c,a&&c.length>0&&$w(c[0]))throw new Error("Root segment cannot have matrix parameters");const u=c.find(Zy);if(u&&u!==nW(c))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class g3{constructor(a,o,c){this.segmentGroup=a,this.processChildren=o,this.index=c}}function CW(l,a,o){if(l||(l=new Hi([],{})),0===l.segments.length&&l.hasChildren())return qw(l,a,o);const c=function eye(l,a,o){let c=0,u=a;const h={match:!1,pathIndex:0,commandIndex:0};for(;u<l.segments.length;){if(c>=o.length)return h;const d=l.segments[u],f=o[c];if(Zy(f))break;const p=`${f}`,g=c<o.length-1?o[c+1]:null;if(u>0&&void 0===p)break;if(p&&g&&"object"==typeof g&&void 0===g.outlets){if(!wW(p,g,d))return h;c+=2}else{if(!wW(p,{},d))return h;c++}u++}return{match:!0,pathIndex:u,commandIndex:c}}(l,a,o),u=o.slice(c.commandIndex);if(c.match&&c.pathIndex<l.segments.length){const h=new Hi(l.segments.slice(0,c.pathIndex),{});return h.children[Li]=new Hi(l.segments.slice(c.pathIndex),l.children),qw(h,0,u)}return c.match&&0===u.length?new Hi(l.segments,{}):c.match&&!l.hasChildren()?m3(l,a,o):c.match?qw(l,0,u):m3(l,a,o)}function qw(l,a,o){if(0===o.length)return new Hi(l.segments,{});{const c=function J_e(l){return Zy(l[0])?l[0].outlets:{[Li]:l}}(o),u={};return xo(c,(h,d)=>{"string"==typeof h&&(h=[h]),null!==h&&(u[d]=CW(l.children[d],a,h))}),xo(l.children,(h,d)=>{void 0===c[d]&&(u[d]=h)}),new Hi(l.segments,u)}}function m3(l,a,o){const c=l.segments.slice(0,a);let u=0;for(;u<o.length;){const h=o[u];if(Zy(h)){const p=tye(h.outlets);return new Hi(c,p)}if(0===u&&$w(o[0])){c.push(new qy(l.segments[a].path,xW(o[0]))),u++;continue}const d=Zy(h)?h.outlets[Li]:`${h}`,f=u<o.length-1?o[u+1]:null;d&&f&&$w(f)?(c.push(new qy(d,xW(f))),u+=2):(c.push(new qy(d,{})),u++)}return new Hi(c,{})}function tye(l){const a={};return xo(l,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(a[c]=m3(new Hi([],{}),0,o))}),a}function xW(l){const a={};return xo(l,(o,c)=>a[c]=`${o}`),a}function wW(l,a,o){return l==o.path&&Au(a,o.parameters)}class iye{constructor(a,o,c,u){this.routeReuseStrategy=a,this.futureState=o,this.currState=c,this.forwardEvent=u}activate(a){const o=this.futureState._root,c=this.currState?this.currState._root:null;this.deactivateChildRoutes(o,c,a),d3(this.futureState.root),this.activateChildRoutes(o,c,a)}deactivateChildRoutes(a,o,c){const u=n0(o);a.children.forEach(h=>{const d=h.value.outlet;this.deactivateRoutes(h,u[d],c),delete u[d]}),xo(u,(h,d)=>{this.deactivateRouteAndItsChildren(h,c)})}deactivateRoutes(a,o,c){const u=a.value,h=o?o.value:null;if(u===h)if(u.component){const d=c.getContext(u.outlet);d&&this.deactivateChildRoutes(a,o,d.children)}else this.deactivateChildRoutes(a,o,c);else h&&this.deactivateRouteAndItsChildren(o,c)}deactivateRouteAndItsChildren(a,o){a.value.component&&this.routeReuseStrategy.shouldDetach(a.value.snapshot)?this.detachAndStoreRouteSubtree(a,o):this.deactivateRouteAndOutlet(a,o)}detachAndStoreRouteSubtree(a,o){const c=o.getContext(a.value.outlet),u=c&&a.value.component?c.children:o,h=n0(a);for(const d of Object.keys(h))this.deactivateRouteAndItsChildren(h[d],u);if(c&&c.outlet){const d=c.outlet.detach(),f=c.children.onOutletDeactivated();this.routeReuseStrategy.store(a.value.snapshot,{componentRef:d,route:a,contexts:f})}}deactivateRouteAndOutlet(a,o){const c=o.getContext(a.value.outlet),u=c&&a.value.component?c.children:o,h=n0(a);for(const d of Object.keys(h))this.deactivateRouteAndItsChildren(h[d],u);c&&c.outlet&&(c.outlet.deactivate(),c.children.onOutletDeactivated(),c.attachRef=null,c.resolver=null,c.route=null)}activateChildRoutes(a,o,c){const u=n0(o);a.children.forEach(h=>{this.activateRoutes(h,u[h.value.outlet],c),this.forwardEvent(new w_e(h.value.snapshot))}),a.children.length&&this.forwardEvent(new C_e(a.value.snapshot))}activateRoutes(a,o,c){const u=a.value,h=o?o.value:null;if(d3(u),u===h)if(u.component){const d=c.getOrCreateContext(u.outlet);this.activateChildRoutes(a,o,d.children)}else this.activateChildRoutes(a,o,c);else if(u.component){const d=c.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const f=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),d3(f.route.value),this.activateChildRoutes(a,null,d.children)}else{const f=function rye(l){for(let a=l.parent;a;a=a.parent){const o=a.routeConfig;if(o&&o._loadedConfig)return o._loadedConfig;if(o&&o.component)return null}return null}(u.snapshot),p=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=u,d.resolver=p,d.outlet&&d.outlet.activateWith(u,p),this.activateChildRoutes(a,null,d.children)}}else this.activateChildRoutes(a,null,c)}}class v3{constructor(a,o){this.routes=a,this.module=o}}function Ud(l){return"function"==typeof l}function bp(l){return l instanceof _p}const Ky=Symbol("INITIAL_VALUE");function Qy(){return Vd(l=>function H9(...l){const a=q_(l),o=DV(l),{args:c,keys:u}=z9(l);if(0===c.length)return lo([],a);const h=new _n(function a_e(l,a,o=bt){return c=>{W9(a,()=>{const{length:u}=l,h=new Array(u);let d=u,f=u;for(let p=0;p<u;p++)W9(a,()=>{const g=lo(l[p],a);let m=!1;g.subscribe(new Ri(c,v=>{h[p]=v,m||(m=!0,f--),f||c.next(o(h.slice()))},()=>{--d||c.complete()}))},c)},c)}}(c,a,u?d=>U9(u,d):bt));return o?h.pipe(n3(o)):h}(l.map(a=>a.pipe(sm(1),Vw(Ky)))).pipe($9((a,o)=>{let c=!1;return o.reduce((u,h,d)=>u!==Ky?u:(h===Ky&&(c=!0),c||!1!==h&&d!==o.length-1&&!bp(h)?u:h),a)},Ky),Ss(a=>a!==Ky),hn(a=>bp(a)?a:!0===a),sm(1)))}class uye{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jy,this.attachRef=null}}class Jy{constructor(){this.contexts=new Map}onChildOutletCreated(a,o){const c=this.getOrCreateContext(a);c.outlet=o,this.contexts.set(a,c)}onChildOutletDestroyed(a){const o=this.getContext(a);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){const a=this.contexts;return this.contexts=new Map,a}onOutletReAttached(a){this.contexts=a}getOrCreateContext(a){let o=this.getContext(a);return o||(o=new uye,this.contexts.set(a,o)),o}getContext(a){return this.contexts.get(a)||null}}let _3=(()=>{class l{constructor(o,c,u,h,d){this.parentContexts=o,this.location=c,this.resolver=u,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.name=h||Li,o.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const o=this.parentContexts.getContext(this.name);o&&o.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,c){this.activated=o,this._activatedRoute=c,this.location.insert(o.hostView),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){const o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,c){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=o;const d=(c=c||this.resolver).resolveComponentFactory(o._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,p=new hye(o,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return l.\u0275fac=function(o){return new(o||l)(R(Jy),R(Ti),R(kh),mm("name"),R(Na))},l.\u0275dir=mt({type:l,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),l})();class hye{constructor(a,o,c){this.route=a,this.childContexts=o,this.parent=c}get(a,o){return a===r0?this.route:a===Jy?this.childContexts:this.parent.get(a,o)}}let SW=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,c){1&o&&me(0,"router-outlet")},directives:[_3],encapsulation:2}),l})();function TW(l,a=""){for(let o=0;o<l.length;o++){const c=l[o];dye(c,fye(a,c))}}function dye(l,a){l.children&&TW(l.children,a)}function fye(l,a){return a?l||a.path?l&&!a.path?`${l}/`:!l&&a.path?a.path:`${l}/${a.path}`:"":l}function y3(l){const a=l.children&&l.children.map(y3),o=a?Object.assign(Object.assign({},l),{children:a}):Object.assign({},l);return!o.component&&(a||o.loadChildren)&&o.outlet&&o.outlet!==Li&&(o.component=SW),o}function tc(l){return l.outlet||Li}function DW(l,a){const o=l.filter(c=>tc(c)===a);return o.push(...l.filter(c=>tc(c)!==a)),o}const MW={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Yw(l,a,o){var c;if(""===a.path)return"full"===a.pathMatch&&(l.hasChildren()||o.length>0)?Object.assign({},MW):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const h=(a.matcher||D_e)(o,l,a);if(!h)return Object.assign({},MW);const d={};xo(h.posParams,(p,g)=>{d[g]=p.path});const f=h.consumed.length>0?Object.assign(Object.assign({},d),h.consumed[h.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:h.consumed,lastChild:h.consumed.length,parameters:f,positionalParamSegments:null!==(c=h.posParams)&&void 0!==c?c:{}}}function Xw(l,a,o,c,u="corrected"){if(o.length>0&&function mye(l,a,o){return o.some(c=>Zw(l,a,c)&&tc(c)!==Li)}(l,o,c)){const d=new Hi(a,function gye(l,a,o,c){const u={};u[Li]=c,c._sourceSegment=l,c._segmentIndexShift=a.length;for(const h of o)if(""===h.path&&tc(h)!==Li){const d=new Hi([],{});d._sourceSegment=l,d._segmentIndexShift=a.length,u[tc(h)]=d}return u}(l,a,c,new Hi(o,l.children)));return d._sourceSegment=l,d._segmentIndexShift=a.length,{segmentGroup:d,slicedSegments:[]}}if(0===o.length&&function vye(l,a,o){return o.some(c=>Zw(l,a,c))}(l,o,c)){const d=new Hi(l.segments,function pye(l,a,o,c,u,h){const d={};for(const f of c)if(Zw(l,o,f)&&!u[tc(f)]){const p=new Hi([],{});p._sourceSegment=l,p._segmentIndexShift="legacy"===h?l.segments.length:a.length,d[tc(f)]=p}return Object.assign(Object.assign({},u),d)}(l,a,o,c,l.children,u));return d._sourceSegment=l,d._segmentIndexShift=a.length,{segmentGroup:d,slicedSegments:o}}const h=new Hi(l.segments,l.children);return h._sourceSegment=l,h._segmentIndexShift=a.length,{segmentGroup:h,slicedSegments:o}}function Zw(l,a,o){return(!(l.hasChildren()||a.length>0)||"full"!==o.pathMatch)&&""===o.path}function EW(l,a,o,c){return!!(tc(l)===c||c!==Li&&Zw(a,o,l))&&("**"===l.path||Yw(a,l,o).matched)}function kW(l,a,o){return 0===a.length&&!l.children[o]}class e1{constructor(a){this.segmentGroup=a||null}}class AW{constructor(a){this.urlTree=a}}function Kw(l){return new _n(a=>a.error(new e1(l)))}function IW(l){return new _n(a=>a.error(new AW(l)))}function _ye(l){return new _n(a=>a.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${l}'`)))}class Cye{constructor(a,o,c,u,h){this.configLoader=o,this.urlSerializer=c,this.urlTree=u,this.config=h,this.allowRedirects=!0,this.ngModule=a.get(Ah)}apply(){const a=Xw(this.urlTree.root,[],[],this.config).segmentGroup,o=new Hi(a.segments,a.children);return this.expandSegmentGroup(this.ngModule,this.config,o,Li).pipe(hn(h=>this.createUrlTree(b3(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xi(h=>{if(h instanceof AW)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof e1?this.noMatchError(h):h}))}match(a){return this.expandSegmentGroup(this.ngModule,this.config,a.root,Li).pipe(hn(u=>this.createUrlTree(b3(u),a.queryParams,a.fragment))).pipe(Xi(u=>{throw u instanceof e1?this.noMatchError(u):u}))}noMatchError(a){return new Error(`Cannot match any routes. URL Segment: '${a.segmentGroup}'`)}createUrlTree(a,o,c){const u=a.segments.length>0?new Hi([],{[Li]:a}):a;return new _p(u,o,c)}expandSegmentGroup(a,o,c,u){return 0===c.segments.length&&c.hasChildren()?this.expandChildren(a,o,c).pipe(hn(h=>new Hi([],h))):this.expandSegment(a,c,o,c.segments,u,!0)}expandChildren(a,o,c){const u=[];for(const h of Object.keys(c.children))"primary"===h?u.unshift(h):u.push(h);return lo(u).pipe(e0(h=>{const d=c.children[h],f=DW(o,h);return this.expandSegmentGroup(a,f,d,h).pipe(hn(p=>({segment:p,outlet:h})))}),$9((h,d)=>(h[d.outlet]=d.segment,h),{}),function d_e(l,a){const o=arguments.length>=2;return c=>c.pipe(l?Ss((u,h)=>l(u,h,c)):bt,s3(1),o?Y9(a):q9(()=>new Bw))}())}expandSegment(a,o,c,u,h,d){return lo(c).pipe(e0(f=>this.expandSegmentAgainstRoute(a,o,c,f,u,h,d).pipe(Xi(g=>{if(g instanceof e1)return ni(null);throw g}))),zd(f=>!!f),Xi((f,p)=>{if(f instanceof Bw||"EmptyError"===f.name){if(kW(o,u,h))return ni(new Hi([],{}));throw new e1(o)}throw f}))}expandSegmentAgainstRoute(a,o,c,u,h,d,f){return EW(u,o,h,d)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(a,o,u,h,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d):Kw(o):Kw(o)}expandSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(a,c,u,d):this.expandRegularSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(a,o,c,u){const h=this.applyRedirectCommands([],c.redirectTo,{});return c.redirectTo.startsWith("/")?IW(h):this.lineralizeSegments(c,h).pipe(qs(d=>{const f=new Hi(d,{});return this.expandSegment(a,f,o,d,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d){const{matched:f,consumedSegments:p,lastChild:g,positionalParamSegments:m}=Yw(o,u,h);if(!f)return Kw(o);const v=this.applyRedirectCommands(p,u.redirectTo,m);return u.redirectTo.startsWith("/")?IW(v):this.lineralizeSegments(u,v).pipe(qs(_=>this.expandSegment(a,o,c,_.concat(h.slice(g)),d,!1)))}matchSegmentAgainstRoute(a,o,c,u,h){if("**"===c.path)return c.loadChildren?(c._loadedConfig?ni(c._loadedConfig):this.configLoader.load(a.injector,c)).pipe(hn(_=>(c._loadedConfig=_,new Hi(u,{})))):ni(new Hi(u,{}));const{matched:d,consumedSegments:f,lastChild:p}=Yw(o,c,u);if(!d)return Kw(o);const g=u.slice(p);return this.getChildConfig(a,c,u).pipe(qs(v=>{const _=v.module,y=v.routes,{segmentGroup:b,slicedSegments:x}=Xw(o,f,g,y),C=new Hi(b.segments,b.children);if(0===x.length&&C.hasChildren())return this.expandChildren(_,y,C).pipe(hn(T=>new Hi(f,T)));if(0===y.length&&0===x.length)return ni(new Hi(f,{}));const w=tc(c)===h;return this.expandSegment(_,C,y,x,w?Li:h,!0).pipe(hn(D=>new Hi(f.concat(D.segments),D.children)))}))}getChildConfig(a,o,c){return o.children?ni(new v3(o.children,a)):o.loadChildren?void 0!==o._loadedConfig?ni(o._loadedConfig):this.runCanLoadGuards(a.injector,o,c).pipe(qs(u=>u?this.configLoader.load(a.injector,o).pipe(hn(h=>(o._loadedConfig=h,h))):function yye(l){return new _n(a=>a.error(a3(`Cannot load children because the guard of the route "path: '${l.path}'" returned false`)))}(o))):ni(new v3([],a))}runCanLoadGuards(a,o,c){const u=o.canLoad;return u&&0!==u.length?ni(u.map(d=>{const f=a.get(d);let p;if(function oye(l){return l&&Ud(l.canLoad)}(f))p=f.canLoad(o,c);else{if(!Ud(f))throw new Error("Invalid CanLoad guard");p=f(o,c)}return Iu(p)})).pipe(Qy(),oa(d=>{if(!bp(d))return;const f=a3(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),hn(d=>!0===d)):ni(!0)}lineralizeSegments(a,o){let c=[],u=o.root;for(;;){if(c=c.concat(u.segments),0===u.numberOfChildren)return ni(c);if(u.numberOfChildren>1||!u.children[Li])return _ye(a.redirectTo);u=u.children[Li]}}applyRedirectCommands(a,o,c){return this.applyRedirectCreatreUrlTree(o,this.urlSerializer.parse(o),a,c)}applyRedirectCreatreUrlTree(a,o,c,u){const h=this.createSegmentGroup(a,o.root,c,u);return new _p(h,this.createQueryParams(o.queryParams,this.urlTree.queryParams),o.fragment)}createQueryParams(a,o){const c={};return xo(a,(u,h)=>{if("string"==typeof u&&u.startsWith(":")){const f=u.substring(1);c[h]=o[f]}else c[h]=u}),c}createSegmentGroup(a,o,c,u){const h=this.createSegments(a,o.segments,c,u);let d={};return xo(o.children,(f,p)=>{d[p]=this.createSegmentGroup(a,f,c,u)}),new Hi(h,d)}createSegments(a,o,c,u){return o.map(h=>h.path.startsWith(":")?this.findPosParam(a,h,u):this.findOrReturn(h,c))}findPosParam(a,o,c){const u=c[o.path.substring(1)];if(!u)throw new Error(`Cannot redirect to '${a}'. Cannot find '${o.path}'.`);return u}findOrReturn(a,o){let c=0;for(const u of o){if(u.path===a.path)return o.splice(c),u;c++}return a}}function b3(l){const a={};for(const c of Object.keys(l.children)){const h=b3(l.children[c]);(h.segments.length>0||h.hasChildren())&&(a[c]=h)}return function xye(l){if(1===l.numberOfChildren&&l.children[Li]){const a=l.children[Li];return new Hi(l.segments.concat(a.segments),a.children)}return l}(new Hi(l.segments,a))}class PW{constructor(a){this.path=a,this.route=this.path[this.path.length-1]}}class Qw{constructor(a,o){this.component=a,this.route=o}}function Sye(l,a,o){const c=l._root;return t1(c,a?a._root:null,o,[c.value])}function Jw(l,a,o){const c=function Dye(l){if(!l)return null;for(let a=l.parent;a;a=a.parent){const o=a.routeConfig;if(o&&o._loadedConfig)return o._loadedConfig}return null}(a);return(c?c.module.injector:o).get(l)}function t1(l,a,o,c,u={canDeactivateChecks:[],canActivateChecks:[]}){const h=n0(a);return l.children.forEach(d=>{(function Mye(l,a,o,c,u={canDeactivateChecks:[],canActivateChecks:[]}){const h=l.value,d=a?a.value:null,f=o?o.getContext(l.value.outlet):null;if(d&&h.routeConfig===d.routeConfig){const p=function Eye(l,a,o){if("function"==typeof o)return o(l,a);switch(o){case"pathParamsChange":return!yp(l.url,a.url);case"pathParamsOrQueryParamsChange":return!yp(l.url,a.url)||!Au(l.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!f3(l,a)||!Au(l.queryParams,a.queryParams);default:return!f3(l,a)}}(d,h,h.routeConfig.runGuardsAndResolvers);p?u.canActivateChecks.push(new PW(c)):(h.data=d.data,h._resolvedData=d._resolvedData),t1(l,a,h.component?f?f.children:null:o,c,u),p&&f&&f.outlet&&f.outlet.isActivated&&u.canDeactivateChecks.push(new Qw(f.outlet.component,d))}else d&&n1(a,f,u),u.canActivateChecks.push(new PW(c)),t1(l,null,h.component?f?f.children:null:o,c,u)})(d,h[d.value.outlet],o,c.concat([d.value]),u),delete h[d.value.outlet]}),xo(h,(d,f)=>n1(d,o.getContext(f),u)),u}function n1(l,a,o){const c=n0(l),u=l.value;xo(c,(h,d)=>{n1(h,u.component?a?a.children.getContext(d):null:a,o)}),o.canDeactivateChecks.push(new Qw(u.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,u))}class Lye{}function OW(l){return new _n(a=>a.error(l))}class Vye{constructor(a,o,c,u,h,d){this.rootComponentType=a,this.config=o,this.urlTree=c,this.url=u,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=d}recognize(){const a=Xw(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,o=this.processSegmentGroup(this.config,a,Li);if(null===o)return null;const c=new jw([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Li,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new Fh(c,o),h=new vW(this.url,u);return this.inheritParamsAndData(h._root),h}inheritParamsAndData(a){const o=a.value,c=mW(o,this.paramsInheritanceStrategy);o.params=Object.freeze(c.params),o.data=Object.freeze(c.data),a.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(a,o,c){return 0===o.segments.length&&o.hasChildren()?this.processChildren(a,o):this.processSegment(a,o,o.segments,c)}processChildren(a,o){const c=[];for(const h of Object.keys(o.children)){const d=o.children[h],f=DW(a,h),p=this.processSegmentGroup(f,d,h);if(null===p)return null;c.push(...p)}const u=FW(c);return function zye(l){l.sort((a,o)=>a.value.outlet===Li?-1:o.value.outlet===Li?1:a.value.outlet.localeCompare(o.value.outlet))}(u),u}processSegment(a,o,c,u){for(const h of a){const d=this.processSegmentAgainstRoute(h,o,c,u);if(null!==d)return d}return kW(o,c,u)?[]:null}processSegmentAgainstRoute(a,o,c,u){if(a.redirectTo||!EW(a,o,c,u))return null;let h,d=[],f=[];if("**"===a.path){const y=c.length>0?nW(c).parameters:{};h=new jw(c,y,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,LW(a),tc(a),a.component,a,RW(o),NW(o)+c.length,BW(a))}else{const y=Yw(o,a,c);if(!y.matched)return null;d=y.consumedSegments,f=c.slice(y.lastChild),h=new jw(d,y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,LW(a),tc(a),a.component,a,RW(o),NW(o)+d.length,BW(a))}const p=function Uye(l){return l.children?l.children:l.loadChildren?l._loadedConfig.routes:[]}(a),{segmentGroup:g,slicedSegments:m}=Xw(o,d,f,p.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution);if(0===m.length&&g.hasChildren()){const y=this.processChildren(p,g);return null===y?null:[new Fh(h,y)]}if(0===p.length&&0===m.length)return[new Fh(h,[])];const v=tc(a)===u,_=this.processSegment(p,g,m,v?Li:u);return null===_?null:[new Fh(h,_)]}}function Hye(l){const a=l.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}function FW(l){const a=[],o=new Set;for(const c of l){if(!Hye(c)){a.push(c);continue}const u=a.find(h=>c.value.routeConfig===h.value.routeConfig);void 0!==u?(u.children.push(...c.children),o.add(u)):a.push(c)}for(const c of o){const u=FW(c.children);a.push(new Fh(c.value,u))}return a.filter(c=>!o.has(c))}function RW(l){let a=l;for(;a._sourceSegment;)a=a._sourceSegment;return a}function NW(l){let a=l,o=a._segmentIndexShift?a._segmentIndexShift:0;for(;a._sourceSegment;)a=a._sourceSegment,o+=a._segmentIndexShift?a._segmentIndexShift:0;return o-1}function LW(l){return l.data||{}}function BW(l){return l.resolve||{}}function VW(l){return[...Object.keys(l),...Object.getOwnPropertySymbols(l)]}function C3(l){return Vd(a=>{const o=l(a);return o?lo(o).pipe(hn(()=>a)):ni(a)})}class Zye extends class Xye{shouldDetach(a){return!1}store(a,o){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,o){return a.routeConfig===o.routeConfig}}{}const x3=new Wn("ROUTES");class zW{constructor(a,o,c,u){this.injector=a,this.compiler=o,this.onLoadStartListener=c,this.onLoadEndListener=u}load(a,o){if(o._loader$)return o._loader$;this.onLoadStartListener&&this.onLoadStartListener(o);const u=this.loadModuleFactory(o.loadChildren).pipe(hn(h=>{this.onLoadEndListener&&this.onLoadEndListener(o);const d=h.create(a);return new v3(tW(d.injector.get(x3,void 0,ui.Self|ui.Optional)).map(y3),d)}),Xi(h=>{throw o._loader$=void 0,h}));return o._loader$=new c_e(u,()=>new pt).pipe(j9()),o._loader$}loadModuleFactory(a){return Iu(a()).pipe(qs(o=>o instanceof KH?ni(o):lo(this.compiler.compileModuleAsync(o))))}}class Qye{shouldProcessUrl(a){return!0}extract(a){return a}merge(a,o){return a}}function Jye(l){throw l}function e1e(l,a,o){return a.parse("/")}function UW(l,a){return ni(null)}const t1e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},n1e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fs=(()=>{class l{constructor(o,c,u,h,d,f,p){this.rootComponentType=o,this.urlSerializer=c,this.rootContexts=u,this.location=h,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pt,this.errorHandler=Jye,this.malformedUriErrorHandler=e1e,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:UW,afterPreactivation:UW},this.urlHandlingStrategy=new Qye,this.routeReuseStrategy=new Zye,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(Ah),this.console=d.get(F7);const v=d.get(ar);this.isNgZoneEnabled=v instanceof ar&&ar.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function E_e(){return new _p(new Hi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new zW(d,f,_=>this.triggerEvent(new Z9(_)),_=>this.triggerEvent(new K9(_))),this.routerState=gW(this.currentUrlTree,this.rootComponentType),this.transitions=new Pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var o;return null===(o=this.location.getState())||void 0===o?void 0:o.\u0275routerPageId}setupNavigations(o){const c=this.events;return o.pipe(Ss(u=>0!==u.id),hn(u=>Object.assign(Object.assign({},u),{extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Vd(u=>{let h=!1,d=!1;return ni(u).pipe(oa(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vd(f=>{const p=this.browserUrlTree.toString(),g=!this.navigated||f.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return eS(f.source)&&(this.browserUrlTree=f.extractedUrl),ni(f).pipe(Vd(v=>{const _=this.transitions.getValue();return c.next(new o3(v.id,this.serializeUrl(v.extractedUrl),v.source,v.restoredState)),_!==this.transitions.getValue()?Ch:Promise.resolve(v)}),function wye(l,a,o,c){return Vd(u=>function bye(l,a,o,c,u){return new Cye(l,a,o,c,u).apply()}(l,a,o,u.extractedUrl,c).pipe(hn(h=>Object.assign(Object.assign({},u),{urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),oa(v=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:v.urlAfterRedirects})}),function Wye(l,a,o,c,u){return qs(h=>function Bye(l,a,o,c,u="emptyOnly",h="legacy"){try{const d=new Vye(l,a,o,c,u,h).recognize();return null===d?OW(new Lye):ni(d)}catch(d){return OW(d)}}(l,a,h.urlAfterRedirects,o(h.urlAfterRedirects),c,u).pipe(hn(d=>Object.assign(Object.assign({},h),{targetSnapshot:d}))))}(this.rootComponentType,this.config,v=>this.serializeUrl(v),this.paramsInheritanceStrategy,this.relativeLinkResolution),oa(v=>{if("eager"===this.urlUpdateStrategy){if(!v.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl);this.setBrowserUrl(y,v)}this.browserUrlTree=v.urlAfterRedirects}const _=new g_e(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);c.next(_)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:y,source:b,restoredState:x,extras:C}=f,w=new o3(_,this.serializeUrl(y),b,x);c.next(w);const S=gW(y,this.rootComponentType).snapshot;return ni(Object.assign(Object.assign({},f),{targetSnapshot:S,urlAfterRedirects:y,extras:Object.assign(Object.assign({},C),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Ch}),C3(f=>{const{targetSnapshot:p,id:g,extractedUrl:m,rawUrl:v,extras:{skipLocationChange:_,replaceUrl:y}}=f;return this.hooks.beforePreactivation(p,{navigationId:g,appliedUrlTree:m,rawUrlTree:v,skipLocationChange:!!_,replaceUrl:!!y})}),oa(f=>{const p=new m_e(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(p)}),hn(f=>Object.assign(Object.assign({},f),{guards:Sye(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function kye(l,a){return qs(o=>{const{targetSnapshot:c,currentSnapshot:u,guards:{canActivateChecks:h,canDeactivateChecks:d}}=o;return 0===d.length&&0===h.length?ni(Object.assign(Object.assign({},o),{guardsResult:!0})):function Aye(l,a,o,c){return lo(l).pipe(qs(u=>function Nye(l,a,o,c,u){const h=a&&a.routeConfig?a.routeConfig.canDeactivate:null;return h&&0!==h.length?ni(h.map(f=>{const p=Jw(f,a,u);let g;if(function cye(l){return l&&Ud(l.canDeactivate)}(p))g=Iu(p.canDeactivate(l,a,o,c));else{if(!Ud(p))throw new Error("Invalid CanDeactivate guard");g=Iu(p(l,a,o,c))}return g.pipe(zd())})).pipe(Qy()):ni(!0)}(u.component,u.route,o,a,c)),zd(u=>!0!==u,!0))}(d,c,u,l).pipe(qs(f=>f&&function sye(l){return"boolean"==typeof l}(f)?function Iye(l,a,o,c){return lo(a).pipe(e0(u=>r3(function Oye(l,a){return null!==l&&a&&a(new b_e(l)),ni(!0)}(u.route.parent,c),function Pye(l,a){return null!==l&&a&&a(new x_e(l)),ni(!0)}(u.route,c),function Rye(l,a,o){const c=a[a.length-1],h=a.slice(0,a.length-1).reverse().map(d=>function Tye(l){const a=l.routeConfig?l.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:l,guards:a}:null}(d)).filter(d=>null!==d).map(d=>G9(()=>ni(d.guards.map(p=>{const g=Jw(p,d.node,o);let m;if(function lye(l){return l&&Ud(l.canActivateChild)}(g))m=Iu(g.canActivateChild(c,l));else{if(!Ud(g))throw new Error("Invalid CanActivateChild guard");m=Iu(g(c,l))}return m.pipe(zd())})).pipe(Qy())));return ni(h).pipe(Qy())}(l,u.path,o),function Fye(l,a,o){const c=a.routeConfig?a.routeConfig.canActivate:null;if(!c||0===c.length)return ni(!0);const u=c.map(h=>G9(()=>{const d=Jw(h,a,o);let f;if(function aye(l){return l&&Ud(l.canActivate)}(d))f=Iu(d.canActivate(a,l));else{if(!Ud(d))throw new Error("Invalid CanActivate guard");f=Iu(d(a,l))}return f.pipe(zd())}));return ni(u).pipe(Qy())}(l,u.route,o))),zd(u=>!0!==u,!0))}(c,h,l,a):ni(f)),hn(f=>Object.assign(Object.assign({},o),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),oa(f=>{if(bp(f.guardsResult)){const g=a3(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw g.url=f.guardsResult,g}const p=new v_e(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(p)}),Ss(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),C3(f=>{if(f.guards.canActivateChecks.length)return ni(f).pipe(oa(p=>{const g=new __e(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(g)}),Vd(p=>{let g=!1;return ni(p).pipe(function Gye(l,a){return qs(o=>{const{targetSnapshot:c,guards:{canActivateChecks:u}}=o;if(!u.length)return ni(o);let h=0;return lo(u).pipe(e0(d=>function jye(l,a,o,c){return function $ye(l,a,o,c){const u=VW(l);if(0===u.length)return ni({});const h={};return lo(u).pipe(qs(d=>function qye(l,a,o,c){const u=Jw(l,a,c);return Iu(u.resolve?u.resolve(a,o):u(a,o))}(l[d],a,o,c).pipe(oa(f=>{h[d]=f}))),s3(1),qs(()=>VW(h).length===u.length?ni(h):Ch))}(l._resolve,l,a,c).pipe(hn(h=>(l._resolvedData=h,l.data=Object.assign(Object.assign({},l.data),mW(l,o).resolve),null)))}(d.route,c,l,a)),oa(()=>h++),s3(1),qs(d=>h===u.length?ni(o):Ch))})}(this.paramsInheritanceStrategy,this.ngModule.injector),oa({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),oa(p=>{const g=new y_e(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(g)}))}),C3(f=>{const{targetSnapshot:p,id:g,extractedUrl:m,rawUrl:v,extras:{skipLocationChange:_,replaceUrl:y}}=f;return this.hooks.afterPreactivation(p,{navigationId:g,appliedUrlTree:m,rawUrlTree:v,skipLocationChange:!!_,replaceUrl:!!y})}),hn(f=>{const p=function $_e(l,a,o){const c=Xy(l,a._root,o?o._root:void 0);return new pW(c,a)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:p})}),oa(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((l,a,o)=>hn(c=>(new iye(a,c.targetRouterState,c.currentRouterState,o).activate(l),c)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),oa({next(){h=!0},complete(){h=!0}}),function f_e(l){return mi((a,o)=>{try{a.subscribe(o)}finally{o.add(l)}})}(()=>{var f;h||d||this.cancelNavigationTransition(u,`Navigation ID ${u.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===u.id&&(this.currentNavigation=null)}),Xi(f=>{if(d=!0,function T_e(l){return l&&l[J9]}(f)){const p=bp(f.url);p||(this.navigated=!0,this.restoreHistory(u,!0));const g=new X9(u.id,this.serializeUrl(u.extractedUrl),f.message);c.next(g),p?setTimeout(()=>{const m=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),v={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eS(u.source)};this.scheduleNavigation(m,"imperative",null,v,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{this.restoreHistory(u,!0);const p=new p_e(u.id,this.serializeUrl(u.extractedUrl),f);c.next(p);try{u.resolve(this.errorHandler(f))}catch(g){u.reject(g)}}return Ch}))}))}resetRootComponentType(o){this.rootComponentType=o,this.routerState.root.component=this.rootComponentType}setTransition(o){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),o))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(o=>{const c="popstate"===o.type?"popstate":"hashchange";"popstate"===c&&setTimeout(()=>{var u;const h={replaceUrl:!0},d=(null===(u=o.state)||void 0===u?void 0:u.navigationId)?o.state:null;if(d){const p=Object.assign({},d);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(h.state=p)}const f=this.parseUrl(o.url);this.scheduleNavigation(f,c,d,h)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(o){this.events.next(o)}resetConfig(o){TW(o),this.config=o.map(y3),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(o,c={}){const{relativeTo:u,queryParams:h,fragment:d,queryParamsHandling:f,preserveFragment:p}=c,g=u||this.routerState.root,m=p?this.currentUrlTree.fragment:d;let v=null;switch(f){case"merge":v=Object.assign(Object.assign({},this.currentUrlTree.queryParams),h);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=h||null}return null!==v&&(v=this.removeEmptyProps(v)),function X_e(l,a,o,c,u){if(0===o.length)return p3(a.root,a.root,a,c,u);const h=function Z_e(l){if("string"==typeof l[0]&&1===l.length&&"/"===l[0])return new bW(!0,0,l);let a=0,o=!1;const c=l.reduce((u,h,d)=>{if("object"==typeof h&&null!=h){if(h.outlets){const f={};return xo(h.outlets,(p,g)=>{f[g]="string"==typeof p?p.split("/"):p}),[...u,{outlets:f}]}if(h.segmentPath)return[...u,h.segmentPath]}return"string"!=typeof h?[...u,h]:0===d?(h.split("/").forEach((f,p)=>{0==p&&"."===f||(0==p&&""===f?o=!0:".."===f?a++:""!=f&&u.push(f))}),u):[...u,h]},[]);return new bW(o,a,c)}(o);if(h.toRoot())return p3(a.root,new Hi([],{}),a,c,u);const d=function K_e(l,a,o){if(l.isAbsolute)return new g3(a.root,!0,0);if(-1===o.snapshot._lastPathIndex){const h=o.snapshot._urlSegment;return new g3(h,h===a.root,0)}const c=$w(l.commands[0])?0:1;return function Q_e(l,a,o){let c=l,u=a,h=o;for(;h>u;){if(h-=u,c=c.parent,!c)throw new Error("Invalid number of '../'");u=c.segments.length}return new g3(c,!1,u-h)}(o.snapshot._urlSegment,o.snapshot._lastPathIndex+c,l.numberOfDoubleDots)}(h,a,l),f=d.processChildren?qw(d.segmentGroup,d.index,h.commands):CW(d.segmentGroup,d.index,h.commands);return p3(d.segmentGroup,f,a,c,u)}(g,this.currentUrlTree,o,v,null!=m?m:null)}navigateByUrl(o,c={skipLocationChange:!1}){const u=bp(o)?o:this.parseUrl(o),h=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,c)}navigate(o,c={skipLocationChange:!1}){return function i1e(l){for(let a=0;a<l.length;a++){const o=l[a];if(null==o)throw new Error(`The requested path contains ${o} segment at index ${a}`)}}(o),this.navigateByUrl(this.createUrlTree(o,c),c)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){let c;try{c=this.urlSerializer.parse(o)}catch(u){c=this.malformedUriErrorHandler(u,this.urlSerializer,o)}return c}isActive(o,c){let u;if(u=!0===c?Object.assign({},t1e):!1===c?Object.assign({},n1e):c,bp(o))return rW(this.currentUrlTree,o,u);const h=this.parseUrl(o);return rW(this.currentUrlTree,h,u)}removeEmptyProps(o){return Object.keys(o).reduce((c,u)=>{const h=o[u];return null!=h&&(c[u]=h),c},{})}processNavigations(){this.navigations.subscribe(o=>{this.navigated=!0,this.lastSuccessfulId=o.id,this.currentPageId=o.targetPageId,this.events.next(new $y(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,o.resolve(!0)},o=>{this.console.warn(`Unhandled Navigation Error: ${o}`)})}scheduleNavigation(o,c,u,h,d){var f,p,g;if(this.disposed)return Promise.resolve(!1);const m=this.transitions.value,v=eS(c)&&m&&!eS(m.source),_=m.rawUrl.toString()===o.toString(),y=m.id===(null===(f=this.currentNavigation)||void 0===f?void 0:f.id);if(v&&_&&y)return Promise.resolve(!0);let x,C,w;d?(x=d.resolve,C=d.reject,w=d.promise):w=new Promise((T,A)=>{x=T,C=A});const S=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),D=u&&u.\u0275routerPageId?u.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):D=0,this.setTransition({id:S,targetPageId:D,source:c,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:o,extras:h,resolve:x,reject:C,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(T=>Promise.reject(T))}setBrowserUrl(o,c){const u=this.urlSerializer.serialize(o),h=Object.assign(Object.assign({},c.extras.state),this.generateNgRouterState(c.id,c.targetPageId));this.location.isCurrentPathEqualTo(u)||c.extras.replaceUrl?this.location.replaceState(u,"",h):this.location.go(u,"",h)}restoreHistory(o,c=!1){var u,h;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-o.targetPageId;"popstate"!==o.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)||0===d?this.currentUrlTree===(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)&&0===d&&(this.resetState(o),this.browserUrlTree=o.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(c&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=o.currentRouterState,this.currentUrlTree=o.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(o,c){const u=new X9(o.id,this.serializeUrl(o.extractedUrl),c);this.triggerEvent(u),o.resolve(!1)}generateNgRouterState(o,c){return"computed"===this.canceledNavigationResolution?{navigationId:o,\u0275routerPageId:c}:{navigationId:o}}}return l.\u0275fac=function(o){qA()},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function eS(l){return"imperative"!==l}class HW{}class WW{preload(a,o){return ni(null)}}let GW=(()=>{class l{constructor(o,c,u,h){this.router=o,this.injector=u,this.preloadingStrategy=h,this.loader=new zW(u,c,p=>o.triggerEvent(new Z9(p)),p=>o.triggerEvent(new K9(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ss(o=>o instanceof $y),e0(()=>this.preload())).subscribe(()=>{})}preload(){const o=this.injector.get(Ah);return this.processRoutes(o,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,c){const u=[];for(const h of c)if(h.loadChildren&&!h.canLoad&&h._loadedConfig){const d=h._loadedConfig;u.push(this.processRoutes(d.module,d.routes))}else h.loadChildren&&!h.canLoad?u.push(this.preloadConfig(o,h)):h.children&&u.push(this.processRoutes(o,h.children));return lo(u).pipe($_(),hn(h=>{}))}preloadConfig(o,c){return this.preloadingStrategy.preload(c,()=>(c._loadedConfig?ni(c._loadedConfig):this.loader.load(o.injector,c)).pipe(qs(h=>(c._loadedConfig=h,this.processRoutes(h.module,h.routes)))))}}return l.\u0275fac=function(o){return new(o||l)(Ie(fs),Ie(bw),Ie(or),Ie(HW))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),T3=(()=>{class l{constructor(o,c,u={}){this.router=o,this.viewportScroller=c,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(o=>{o instanceof o3?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof $y&&(this.lastId=o.id,this.scheduleScrollEvent(o,this.router.parseUrl(o.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(o=>{o instanceof Q9&&(o.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(o.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,c){this.router.triggerEvent(new Q9(o,"popstate"===this.lastSource?this.store[this.restoredId]:null,c))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return l.\u0275fac=function(o){qA()},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Cp=new Wn("ROUTER_CONFIGURATION"),jW=new Wn("ROUTER_FORROOT_GUARD"),a1e=[RI,{provide:lW,useClass:cW},{provide:fs,useFactory:function d1e(l,a,o,c,u,h,d={},f,p){const g=new fs(null,l,a,o,c,u,tW(h));return f&&(g.urlHandlingStrategy=f),p&&(g.routeReuseStrategy=p),function f1e(l,a){l.errorHandler&&(a.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(a.malformedUriErrorHandler=l.malformedUriErrorHandler),l.onSameUrlNavigation&&(a.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(a.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.relativeLinkResolution&&(a.relativeLinkResolution=l.relativeLinkResolution),l.urlUpdateStrategy&&(a.urlUpdateStrategy=l.urlUpdateStrategy),l.canceledNavigationResolution&&(a.canceledNavigationResolution=l.canceledNavigationResolution)}(d,g),d.enableTracing&&g.events.subscribe(m=>{var v,_;null===(v=console.group)||void 0===v||v.call(console,`Router Event: ${m.constructor.name}`),console.log(m.toString()),console.log(m),null===(_=console.groupEnd)||void 0===_||_.call(console)}),g},deps:[lW,Jy,RI,or,bw,x3,Cp,[class Kye{},new sl],[class Yye{},new sl]]},Jy,{provide:r0,useFactory:function p1e(l){return l.routerState.root},deps:[fs]},GW,WW,class o1e{preload(a,o){return o().pipe(Xi(()=>ni(null)))}},{provide:Cp,useValue:{enableTracing:!1}}];function l1e(){return new z7("Router",fs)}let $W=(()=>{class l{constructor(o,c){}static forRoot(o,c){return{ngModule:l,providers:[a1e,qW(o),{provide:jW,useFactory:h1e,deps:[[fs,new sl,new Dh]]},{provide:Cp,useValue:c||{}},{provide:Jm,useFactory:u1e,deps:[vp,[new cy(FI),new sl],Cp]},{provide:T3,useFactory:c1e,deps:[fs,vve,Cp]},{provide:HW,useExisting:c&&c.preloadingStrategy?c.preloadingStrategy:WW},{provide:z7,multi:!0,useFactory:l1e},[D3,{provide:yw,multi:!0,useFactory:g1e,deps:[D3]},{provide:YW,useFactory:m1e,deps:[D3]},{provide:O7,multi:!0,useExisting:YW}]]}}static forChild(o){return{ngModule:l,providers:[qW(o)]}}}return l.\u0275fac=function(o){return new(o||l)(Ie(jW,8),Ie(fs,8))},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({}),l})();function c1e(l,a,o){return o.scrollOffset&&a.setOffset(o.scrollOffset),new T3(l,a,o)}function u1e(l,a,o={}){return o.useHash?new i0e(l,a):new l9(l,a)}function h1e(l){return"guarded"}function qW(l){return[{provide:$ce,multi:!0,useValue:l},{provide:x3,multi:!0,useValue:l}]}let D3=(()=>{class l{constructor(o){this.injector=o,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pt}appInitializer(){return this.injector.get(e0e,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let c=null;const u=new Promise(f=>c=f),h=this.injector.get(fs),d=this.injector.get(Cp);return"disabled"===d.initialNavigation?(h.setUpLocationChangeListener(),c(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(h.hooks.afterPreactivation=()=>this.initNavigation?ni(null):(this.initNavigation=!0,c(!0),this.resultOfPreactivationDone),h.initialNavigation()):c(!0),u})}bootstrapListener(o){const c=this.injector.get(Cp),u=this.injector.get(GW),h=this.injector.get(T3),d=this.injector.get(fs),f=this.injector.get(zy);o===f.components[0]&&(("enabledNonBlocking"===c.initialNavigation||void 0===c.initialNavigation)&&d.initialNavigation(),u.setUpPreloading(),h.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return l.\u0275fac=function(o){return new(o||l)(Ie(or))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function g1e(l){return l.appInitializer.bind(l)}function m1e(l){return l.bootstrapListener.bind(l)}const YW=new Wn("Router Initializer"),XW="2.0.142",b1e=[{id:"deviskin",name:"Deviskin",nameSortOrder:"Deviskin",link:"http://deviskin.github.io"}];class Oc{constructor(a,o,c,u,h,d,f,p,g){this.id=a,this.name=o,this.routes=c,this.routeEnabled=u,this.applicationEnabled=h,this.applicationHidden=d,this.applicationLogoText=f,this.libraryType=p,this.libraryRef=g}static builder(){return new Oc("","",[],!1,!1,!1,"","prod","book")}setId(a){return this.id=a,this}setName(a){return this.name=a,this}setRoutes(a){return this.routes=a,this}setRouteEnabled(a){return this.routeEnabled=a,this}setApplicatioinEnabled(a){return this.applicationEnabled=a,this}setApplicationLogoText(a){return this.applicationLogoText=a,this}setLibraryType(a){return this.libraryType=a,this}setLibraryRef(a){return this.libraryRef=a,this}enable(a=!0){return this.routeEnabled=a,this.applicationEnabled=a,this}hide(a=!0){return this.applicationHidden=a,this}disable(){return this.routeEnabled=!1,this.applicationEnabled=!1,this}}class Hn{constructor(a,o,c,u,h,d=null,f=null){this.link=a,this.name=o,this.shape=c,this.hasBadge=u,this.hasAlert=h,this.onClick=d,this.isActive=f}static builder(){return new Hn("","","",!1,!1)}setIsActive(a){return this.isActive=a,this}setOnClick(a){return this.onClick=a,this}setLink(a){return this.link=a,this}setName(a){return this.name=a,this}setShape(a){return this.shape=a,this}setHasBadge(a){return this.hasBadge=a,this}setHasAlert(a){return this.hasAlert=a,this}runOnClick(){this.onClick&&this.onClick(this)}}class M3 extends class C1e{constructor(){this.version="",this.applicationId="memorial",this.applicationName="Memorial",this.developers=b1e,this.production=!0,this.platform="Web",this.relativeCacheService=!0,this.serviceAPIHost="",this.redirectToServerAfterItIsReadyAdress="",this.portAutoDetection=!0,this.portAutoIncrementValue=0,this.defaultRoute="/compiler",this.coding=!0,this.showOldVersions=!0,this.themeName="blue",this.serverType="rest",this.applications=[],this.addApplication(Oc.builder().setId("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setRoutes([Hn.builder().setLink("about").setName("\u041e \u0441\u0430\u0439\u0442\u0435").setShape("home")]).hide()).addApplication(Oc.builder().setId("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setApplicationLogoText("D3|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([Hn.builder().setLink("main-test").setName("\u041c\u043e\u043b\u0435\u0431\u0435\u043d").setShape("calendar"),Hn.builder().setLink("memorials-pages-editor").setName("\u0417\u0430\u043f\u0438\u0441\u043a\u0438").setShape("event"),Hn.builder().setLink("d3examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b D3").setShape("image"),Hn.builder().setLink("dynamic-components-examples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0414\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442").setShape("blocks-group"),Hn.builder().setLink("help").setName("\u041f\u043e\u043c\u043e\u0449\u044c").setShape("help"),Hn.builder().setLink("tests").setName("\u0422\u0435\u0441\u0442\u044b").setShape("check-circle")])).addApplication(Oc.builder().setId("d3Dexamples").setName("\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D").setApplicationLogoText("Three.JS|\u043f\u0440\u0438\u043c\u0435\u0440\u044b").setRoutes([Hn.builder().setLink("d3Dexamples").setName("Three 3D").setShape("scroll")])).addApplication(Oc.builder().setId("books").setName("\u041a\u043d\u0438\u0433\u0438").setLibraryType("prod").setLibraryRef("biblia").setRoutes([Hn.builder().setLink("books").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book")])).addApplication(Oc.builder().setId("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setLibraryType("mprod").setLibraryRef("ps").setRoutes([Hn.builder().setLink("memorial").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("note")])).addApplication(Oc.builder().setId("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setLibraryType("cprod").setLibraryRef("calc").setApplicationLogoText("\u041c\u0410\u0422\u0410\u041d|\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setRoutes([Hn.builder().setLink("calculator").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator")]).hide()).addApplication(Oc.builder().setId("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setLibraryType("clndrprod").setLibraryRef("clndr").setRoutes([Hn.builder().setLink("calendar").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar")]).hide()).addApplication(Oc.builder().setId("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setLibraryType("compprod").setLibraryRef("comp").setApplicationLogoText("C-Js|\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setRoutes([Hn.builder().setLink("compiler").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug")]).hide()).addApplication(Oc.builder().setId("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setLibraryType("schprod").setLibraryRef("sch").setRoutes([Hn.builder().setLink("scheduler").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock")])).setVersion("BV."+XW),this.afterConstruct()}addApplication(a){if(null!=this.applications.find(o=>o.id==a.id))throw new Error(`\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "${a.id}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);return this.applications.push(a),this}setVersion(a){return this.version=a,this}setProduction(a){return this.production=a,this}setPlatform(a){return this.platform=a,this}setRelativeCacheService(a){return this.relativeCacheService=a,this}setServiceAPIHost(a){return this.serviceAPIHost=a,this}setRedirectToServerAfterItIsReadyAdress(a){return this.redirectToServerAfterItIsReadyAdress=a,this}setPortAutoDetection(a){return this.portAutoDetection=a,this}setPortAutoIncrementValue(a){return this.portAutoIncrementValue=a,this}setDefaultRoute(a){return this.defaultRoute=a,this}setServerType(a){return this.serverType=a,this}setCoding(a){return this.coding=a,this}setShowOldVersions(a){return this.showOldVersions=a,this}afterConstruct(){}}{afterConstruct(){super.afterConstruct(),this.setVersion("WPR."+XW).setProduction(!0).setServiceAPIHost("").setRedirectToServerAfterItIsReadyAdress("").setPortAutoDetection(!0).setPortAutoIncrementValue(0).setDefaultRoute("/help").setServerType("memory"),this.applications.forEach((a,o,c)=>a.enable("d3examples"!=a.id&&"d3Dexamples"!=a.id))}static builder(){return new M3}}const Pu=M3.builder();class o0{constructor(a,o,c,u,h,d){this.type=a,this.time=o,this.sender=c,this.target=u,this.subType=h,this.text=d}static builder(){return new o0("",Date.now(),"","","","")}setType(a){return this.type=a,this}setTime(a){return this.time=a,this}setSender(a){return this.sender=a,this}setTarget(a){return this.target=a,this}setSubType(a){return this.subType=a,this}setText(a){return this.text=a,this}}class E3{constructor(a,o){this.id=a,this.handler=o}static builder(){return new E3(-1,()=>{})}setId(a){return this.id=a,this}setHandler(a){return this.handler=a,this}}class x1e{constructor(){this.id=1,this.handlers=new Map,this.targetHandlers=new Map,this.messagesToTarget=new Map,this.messagesTimeoutMs=18e4}newId(){return this.id++}putMessage(a){let o=a.target,c=this.messagesToTarget.get(o);return null==c&&(c=[]),c.push(a),c=this.removeOld(c),c?this.messagesToTarget.set(o,c):this.messagesToTarget.delete(o),this}getMessages(a,o=!0){let c=this.messagesToTarget.get(a),u=this.removeOld(c);return null==c&&o&&this.messagesToTarget.delete(a),u}removeAllOld(){let a=[];return this.messagesToTarget.forEach((o,c,u)=>{a.push(c)}),a.forEach(o=>{this.getMessages(o,!1)}),this}removeOld(a){if(void 0===a)return;let o=Date.now(),c=a.findIndex(h=>h.time+this.messagesTimeoutMs>o),u=a;return c>0&&(u=a.splice(0,c)),u}sendMessage(a){this.handlers.forEach((c,u,h)=>{c(a)});let o=this.targetHandlers.get(a.target);o&&o.forEach(c=>{c.handler(a)})}addHandler(a){let o=this.newId();this.handlers.set(o,a);let c=this;return{unsubscribe(){c.removeHandler(o)}}}addTargetHandler(a,o){let c=this.newId(),u=this.targetHandlers.get(a);null==u&&(u=[],this.targetHandlers.set(a,u)),u.push(E3.builder().setId(c).setHandler(o));let h=this;return{unsubscribe(){h.removeTargetHandler(a,c)}}}removeAllTargetHandlers(a){return this.targetHandlers.delete(a),this}removeHandler(a){this.handlers.delete(a)}removeTargetHandler(a,o){let c=this.targetHandlers.get(a);if(c){let u=c.filter((h,d,f)=>h.id!=o);u.length?this.targetHandlers.set(a,u):this.targetHandlers.delete(a)}}}class mr{constructor(a,o,c){this.text=a,this.innerButtonText=o,this.timeout=c,this.buttonText="",this.config=null,this.update()}static of(a,o,c){return new mr(a,o,c)}setConfig(a){this.config=a}update(){return this.buttonText=this.innerButtonText+" ("+this.timeout--+"s)",this.timeout>=0}onButtonClick(){this.remove()}remove(){this.config.removeAlert(this)}}class ZW{constructor(a,o,c){this.action=a,this.delayMS=o,this.delayRequest=c,this.requestedAction=!1,this.runTimer=!1,this.onDones=[]}requestAction(a){this.requestedAction=!0,this.runTimer||this.delayRequest(this.delayMS,()=>{this.checkAction()}),a&&this.onDones.push(a)}checkAction(){if(this.requestedAction)this.runTimer||(this.delayRequest(this.delayMS,()=>this.checkAction()),this.runTimer=!0);else{let a=this.onDones;this.onDones=[],this.action?this.action(a):a&&a.forEach(o=>o(!0)),this.runTimer=!1}this.requestedAction=!1}}class tS{constructor(a,o){this.config=a,this.waitingForSenderId=o,this.enabled=!1,this.checkTimeoutMs=100}static builder(){return new tS(null,"")}setConfig(a){return this.config=a,this}setWaitingForSenderId(a){return this.waitingForSenderId=a,this.enabled=!this.waitingForSenderId,this}setCheckTimeout(a){return this.checkTimeoutMs=a,this}checkEnabled(){if(this.enabled||!this.config)return!0;let a=this.config.messageBus.getMessages(this.waitingForSenderId);return(null==a?void 0:a.length)?this.config.post(()=>{this.enabled=!0}):this.checkLatter(),this.enabled}checkLatter(){return!(!this.enabled&&this.config)||(this.config.post(()=>this.checkEnabled(),this.checkTimeoutMs),this.enabled)}setEnabled(a){return this.enabled=a,this}}class nS{constructor(){this.cache=new Map,this.environment=Pu,this.themeName=Pu.themeName,this.serviceAPIHost=Pu.serviceAPIHost,this.redirectToServerAfterItIsReadyAdress=Pu.redirectToServerAfterItIsReadyAdress,this.portAutoDetection=Pu.portAutoDetection,this.portAutoIncrementValue=Pu.portAutoIncrementValue,this.messageBus=new x1e,this.alerts=[],this.upperMenuEnabled=!0,this.pageLoadedFrom="",this.authId="",this.authIdKey="authId",this.authBody="",this.baseHref="",this.waitingIOOperationCount=0,this.waitingIOOperationValue=0,this.waitingIOOperationValueMax=100,this.outletOnly=!1,this.autoLoginApplication=!0,this.defaultApplication="",this.defaultLoginType="login",this.showType=this.defaultLoginType,this.enableDefaultPersons=!0,this.coding=Pu.coding,this.showOldVersions=Pu.showOldVersions,"undefined"!=typeof pageLoadedFrom&&this.setPageLoadedFrom(pageLoadedFrom),this.runPortAutoDetection(),this.setupBaseHref()}isShowLogin(){return this.showType==this.defaultLoginType}isShowNormal(){return"normal"==this.showType}setShowNormal(){return this.showType="normal",this}setShowLogin(a=null){return null!=a&&(this.autoLoginApplication=a),this.showType=this.defaultLoginType,this}get version(){return this.environment.version}get developerId(){let a="";return this.environment.developers.forEach(o=>{a=a+(a?"_":"")+o.id}),a}get developerName(){let a="";return this.environment.developers.forEach(o=>{a=a+(a?", ":"")+o.name}),a}get developerNameSortOrder(){let a="";return this.environment.developers.forEach(o=>{a=a+(a?", ":"")+o.nameSortOrder}),a}get developerLink(){return this.environment.developers[0].link}setPageLoadedFrom(a,o=!1){return this.pageLoadedFrom=a,o&&this.runPortAutoDetection(),this.setupBaseHref(),this}setupBaseHref(){let a=this.pageLoadedFrom;a.endsWith("/")&&(a=a.substring(0,a.length-1)),this.baseHref=a}runPortAutoDetection(){this.portAutoDetection&&(this.serviceAPIHost=this.doPortAutoDetection(this.serviceAPIHost?this.serviceAPIHost:this.pageLoadedFrom),this.redirectToServerAfterItIsReadyAdress=this.doPortAutoDetection(this.redirectToServerAfterItIsReadyAdress))}doPortAutoDetection(a){const o=a.lastIndexOf(":");if(o<0)return a;let c="";for(let d=o+1;d<a.length&&"0123456789".indexOf(a.charAt(d))>=0;++d)c+=a.charAt(d);return isNaN(+c)?a:a.substring(0,o)+":"+(+location.port+Pu.portAutoIncrementValue)+a.substring(o+1+c.length,a.length)}addAlert(a){a.setConfig(this),this.alerts.push(a)}removeAlert(a){const o=this.alerts.findIndex((c,u,h)=>c===a);o>=0&&this.alerts.splice(o,1)}isPlatformAndroid(){return"Android"===this.environment.platform}isPlatformWeb(){return"Web"===this.environment.platform}isPlatform(a){return this.environment.platform===a}isRelativeCacheService(){return this.environment.relativeCacheService}isRestServerType(){return"rest"===this.environment.serverType}isMemoryServerType(){return"memory"===this.environment.serverType}isServerType(a){return this.environment.serverType===a}isRedTheme(){return"red"===this.themeName}isBlueTheme(){return"blue"===this.themeName}isTheme(a){return this.themeName===a}isWaitingIO(){return this.waitingIOOperationCount>0}incWaitingIO(){return this.waitingIOOperationCount++}decWaitingIO(){return this.waitingIOOperationCount--}clearWaitingIO(){this.waitingIOOperationCount=0}post(a,o=0){setTimeout(()=>{a()},o)}getApplication(){let a=null;return this.environment.applications.forEach(o=>{o.id==this.defaultApplication&&(a=o)}),a}getApplicationByNameOrNull(a){let o=null;return this.environment.applications.forEach(c=>{c.name==a&&(o=c)}),o}getSingleAppOrNull(){let a=null,o=this.environment.applications.filter(c=>c.applicationEnabled&&!c.applicationHidden);return 1==o.length&&(a=o[0]),a}}const KW=class w1e{static isWebGLAvailable(){try{const a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(a){return!1}}static isWebGL2Available(){try{const a=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!a.getContext("webgl2"))}catch(a){return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(a){const c={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let u='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const h=document.createElement("div");return h.id="webglmessage",h.style.fontFamily="monospace",h.style.fontSize="13px",h.style.fontWeight="normal",h.style.textAlign="center",h.style.background="#fff",h.style.color="#000",h.style.padding="1.5em",h.style.width="400px",h.style.margin="5em auto 0",u=u.replace("$0",c[a]?"graphics card":"browser"),u=u.replace("$1",{1:"WebGL",2:"WebGL 2"}[a]),h.innerHTML=u,h}};let k3=(()=>{class l{getStorage(o){try{return localStorage.getItem(o)}catch(u){}return""}setStorage(o,c){try{localStorage.setItem(o,c)}catch(u){}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),on=(()=>{class l extends nS{constructor(o){super(),this.localStorageSvc=o,this.loginTypeLSName="login3d",this.login3dValue="3d",this.setDefaultLoginType(this.isLogin3dRequested()),this.showType=this.defaultLoginType}setDefaultLoginType(o){this.defaultLoginType=KW.isWebGLAvailable()&&o?"login3d":"login"}requestLogin3d(o){this.setDefaultLoginType(o),this.localStorageSvc.setStorage(this.loginTypeLSName,KW.isWebGLAvailable()&&o?this.login3dValue:"no")}isLogin3dRequested(){return!this.localStorageSvc.getStorage(this.loginTypeLSName)||this.localStorageSvc.getStorage(this.loginTypeLSName)==this.login3dValue}}return l.\u0275fac=function(o){return new(o||l)(Ie(k3))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class S1e{constructor(a,o){this.fn=a,this.subscriptions=o}unsubscribe(){const a=this.subscriptions.indexOf(this);-1!==a&&this.subscriptions.splice(a,1)}}function QW(l,a){switch(l){case 0:return function(){return a.apply(this,arguments)};case 1:return function(o){return a.apply(this,arguments)};case 2:return function(o,c){return a.apply(this,arguments)};case 3:return function(o,c,u){return a.apply(this,arguments)};case 4:return function(o,c,u,h){return a.apply(this,arguments)};case 5:return function(o,c,u,h,d){return a.apply(this,arguments)};case 6:return function(o,c,u,h,d,f){return a.apply(this,arguments)};case 7:return function(o,c,u,h,d,f,p){return a.apply(this,arguments)};case 8:return function(o,c,u,h,d,f,p,g){return a.apply(this,arguments)};case 9:return function(o,c,u,h,d,f,p,g,m){return a.apply(this,arguments)};case 10:return function(o,c,u,h,d,f,p,g,m,v){return a.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Hd(l){return null!=l&&"object"==typeof l&&!0===l["@@functional/placeholder"]}function Ou(l){return function a(o){return 0===arguments.length||Hd(o)?a:l.apply(this,arguments)}}function a0(l){return function a(o,c){switch(arguments.length){case 0:return a;case 1:return Hd(o)?a:Ou(function(u){return l(o,u)});default:return Hd(o)&&Hd(c)?a:Hd(o)?Ou(function(u){return l(u,c)}):Hd(c)?Ou(function(u){return l(o,u)}):l(o,c)}}}function JW(l,a,o){return function(){for(var c=[],u=0,h=l,d=0;d<a.length||u<arguments.length;){var f;d<a.length&&(!Hd(a[d])||u>=arguments.length)?f=a[d]:(f=arguments[u],u+=1),c[d]=f,Hd(f)||(h-=1),d+=1}return h<=0?o.apply(this,c):QW(h,JW(l,c,o))}}const eG=a0(function(a,o){return 1===a?Ou(o):QW(a,JW(a,[],o))}),l0=Ou(function(a){return null==a}),E1e=Number.isInteger||function(a){return a<<0===a};function tG(l){return"[object String]"===Object.prototype.toString.call(l)}const A1e=a0(function(a,o){var c=a<0?o.length+a:a;return tG(o)?o.charAt(c):o[c]}),P1e=a0(function(a,o){return a.map(function(c){for(var d,u=o,h=0;h<c.length;){if(null==u)return;u=E1e(d=c[h])?A1e(d,u):u[d],h+=1}return u})}),F1e=a0(function(a,o){return P1e([a],o)[0]}),N1e=eG(2,(l,a)=>void 0!==F1e(l,a)),nG=N1e({"@@functional/placeholder":!0},window);function iG(l=window){return!l0(l)}let iS,rG,A3,I3;function sG(l=!0){if(!l||!iS){const a=document&&document.querySelector("[ng-version]");iS=a?""+a.getAttribute("ng-version"):void 0}return iS}function B1e(l=!0){var a,o,c;return l&&iS||(rG=null===(c=null===(o=null===(a=window)||void 0===a?void 0:a.angular)||void 0===o?void 0:o.version)||void 0===c?void 0:c.full),rG}function oG(l=!0){var a,o,c;return l&&A3||(A3=(null===(c=null===(o=null===(a=window)||void 0===a?void 0:a.CDS)||void 0===o?void 0:o._react)||void 0===c?void 0:c.version)?window.CDS._react.version:document.querySelector("[data-reactroot], [data-reactid]")?"unknown version":void 0),A3}function aG(l=!0){if(!l||!I3){const a=document.querySelectorAll("*");let o;for(let c=0;c<a.length;c++)if(a[c].__vue__){o=a[c];break}I3=o?"unknown version":void 0}return I3}function xp(l){return l.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}function uG(l){return l.charAt(0).toUpperCase()+l.slice(1)}const dG=new class{constructor(){if(this.supports={js:!0,flexGap:W1e()},!document.body.hasAttribute("cds-supports")||"no-js"===document.body.getAttribute("cds-supports")){const l=xp(Object.keys(this.supports).reduce((a,o)=>`${a} ${this.supports[o]?o:"no-"+o}`,"")).trim();document.body.setAttribute("cds-supports",l)}}};function W1e(){const l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.rowGap="1px",l.appendChild(document.createElement("div")),l.appendChild(document.createElement("div")),document.body.appendChild(l);const a=1===l.scrollHeight;return l.parentNode.removeChild(l),a}class r1{static log(...a){F3()&&O3()&&console.log(...a)}static warn(...a){F3()&&O3()&&console.warn(...a)}static error(...a){F3()&&O3()&&console.error(...a)}}function O3(){return!nG(["jasmine"])}function F3(){return!window.CDS.environment.production}function fG(){iG()&&(window.CDS=window.CDS||{_version:[],_react:{version:void 0},_supports:dG.supports,_isStateProxied:!1,_state:{focusTrapItems:[],i18nRegistry:{},elementRegistry:{},iconRegistry:{},motionRegistry:{}},environment:{production:!1},getDetails:pG,logDetails:G1e},function(){var l;const a="5.6.2";window.CDS._version.indexOf(a)<0&&(window.CDS._version.push(a),null===(l=document.querySelector("body"))||void 0===l||l.setAttribute("cds-version",window.CDS._version.join(" "))),window.CDS._version.length>1&&r1.warn("Running more than one version of Clarity can cause unexpected issues. Please ensure only one version is loaded.")}(),window.CDS._isStateProxied||(window.CDS._isStateProxied=!0,window.CDS._state=new Proxy(window.CDS._state,{set:(l,a,o)=>{const c={key:a,prev:window.CDS._state[a],current:o};return l[a]=o,document.dispatchEvent(new CustomEvent("CDS_STATE_UPDATE",{detail:c})),!0}})))}function pG(){return{versions:window.CDS._version,environment:window.CDS.environment,userAgent:navigator.userAgent,supports:window.CDS._supports,angularVersion:sG(!1),angularJSVersion:B1e(!1),reactVersion:oG(!1),vueVersion:aG(!1),state:hx(Qo({},window.CDS._state),{iconRegistry:Object.keys(window.CDS._state.iconRegistry),motionRegistry:Object.keys(window.CDS._state.motionRegistry),focusTrapRegistry:Object.keys(window.CDS._state.focusTrapItems.map(l=>l.focusTrapId))})}}function G1e(){r1.log(JSON.stringify(pG(),null,2))}const R3=new class T1e{constructor(){this.subscriptions=[]}subscribe(a){const o=new S1e(a,this.subscriptions);return this.subscriptions.push(o),o}emit(a){this.subscriptions.forEach(o=>o.fn(a))}toEventObservable(){return this}};R3.listener=document.addEventListener("CDS_STATE_UPDATE",l=>R3.emit(l.detail));class Fc{static get state(){return fG(),window.CDS._state}static getValue(a){return Fc.state[a]}static setValue(a,o){Fc.state[a]=o}static log(){r1.log(JSON.stringify(Fc.state,null,2))}}Fc.stateUpdates=R3.toEventObservable();const j1e=["unknown",{outline:'<circle class="cds-internal-dot-3" cx="31.1" cy="18" r="2.9"/><circle class="cds-internal-dot-2" cx="18" cy="18" r="2.9"/><circle class="cds-internal-dot-1" cx="4.9" cy="18" r="2.9"/>'}];class er{static get registry(){return Qo({unknown:j1e[1]},Fc.state.iconRegistry)}static addIcons(...a){Fc.state.iconRegistry=Qo(Qo({},Fc.state.iconRegistry),Object.fromEntries(a.filter(([o])=>!er.registry[o])))}static addAliases(...a){const o=a.filter(([c])=>er.registry[c]).flatMap(([c,u])=>u.map(h=>[h,er.registry[c]]));Fc.state.iconRegistry=Qo(Qo({},Fc.state.iconRegistry),Object.fromEntries(o))}static getIconNameFromShape(a){return a[0]}}const gG=["ellipsis-horizontal",{outline:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>',outlineBadged:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>'}],ll=["exclamation-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M18,20.07a1.3,1.3,0,0,1-1.3-1.3v-6a1.3,1.3,0,1,1,2.6,0v6A1.3,1.3,0,0,1,18,20.07Z"/><circle cx="17.95" cy="23.02" r="1.5"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-1.49,6a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,25.5a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,25.5Z"/>'}],cl=["check-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M16.34,23.74l-5-5a1,1,0,0,1,1.41-1.41l3.59,3.59,6.78-6.78a1,1,0,0,1,1.41,1.41Z"/>',solid:'<path d="M30,18A12,12,0,1,1,18,6,12,12,0,0,1,30,18Zm-4.77-2.16a1.4,1.4,0,0,0-2-2l-6.77,6.77L13,17.16a1.4,1.4,0,0,0-2,2l5.45,5.45Z"/>'}],c0=["angle",{outline:'<path d="M29.52,22.52,18,10.6,6.48,22.52a1.7,1.7,0,0,0,2.45,2.36L18,15.49l9.08,9.39a1.7,1.7,0,0,0,2.45-2.36Z"/>'}],$1e=["event",{outline:'<path d="M16.17,25.86,10.81,20.5a1,1,0,0,1,1.41-1.41L16.17,23l8.64-8.64a1,1,0,0,1,1.41,1.41Z"/><path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0,.23-.41H23.8L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/><path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',outlineBadged:'<path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0-1.41-1.41L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><path d="M32.25,6h-4V9a2.2,2.2,0,0,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM25.94,16.58l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>',solidAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M33.68,15.4H26.3a1.34,1.34,0,0,1-.36,1.18l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38,7-7h-1A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5Zm-4.06,3.08-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>'}],q1e=["calendar",{outline:'<path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect" x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/>',outlineBadged:'<path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M32.25,6h-4V9a2.2,2.2,0,1,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/>',solidAlerted:'<path d="M33.68,15.4H22.23A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm6,5H26V24h2Zm0-5H26V19h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/>'}],Y1e=["eye-hide",{outline:'<path d="M25.19,20.4A6.78,6.78,0,0,0,25.62,18a6.86,6.86,0,0,0-6.86-6.86,6.79,6.79,0,0,0-2.37.43L18,13.23a4.78,4.78,0,0,1,.74-.06A4.87,4.87,0,0,1,23.62,18a4.79,4.79,0,0,1-.06.74Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm9.75,9.75,6.65,6.65a4.81,4.81,0,0,1-2.5.72A4.87,4.87,0,0,1,13.9,18,4.81,4.81,0,0,1,14.62,15.53Zm-1.45-1.45a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>',solid:'<path d="M18.37,11.17A6.79,6.79,0,0,0,16,11.6l8.8,8.8A6.78,6.78,0,0,0,25.23,18,6.86,6.86,0,0,0,18.37,11.17Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm8.3,8.3a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>'}],X1e=["eye",{outline:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><path d="M18.09,11.17A6.86,6.86,0,1,0,25,18,6.86,6.86,0,0,0,18.09,11.17Zm0,11.72A4.86,4.86,0,1,1,23,18,4.87,4.87,0,0,1,18.09,22.89Z"/>',solid:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><circle cx="18.09" cy="18.03" r="6.86"/>'}],s1=["window-close",{outline:'<path d="M19.41,18l7.29-7.29a1,1,0,0,0-1.41-1.41L18,16.59,10.71,9.29a1,1,0,0,0-1.41,1.41L16.59,18,9.29,25.29a1,1,0,1,0,1.41,1.41L18,19.41l7.29,7.29a1,1,0,0,0,1.41-1.41Z"/>'}],Z1e=["ellipsis-vertical",{outline:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>',outlineBadged:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>'}],K1e=["view-columns",{outline:'<path d="M31,5H5A2,2,0,0,0,3,7V29a2,2,0,0,0,2,2H31a2,2,0,0,0,2-2V7A2,2,0,0,0,31,5ZM13,29H5V7h8Zm10,0H15V7h8Z"/>'}],Q1e=["arrow",{outline:'<path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"/>'}],J1e=["times",{outline:'<path d="M19.41,18l8.29-8.29a1,1,0,0,0-1.41-1.41L18,16.59,9.71,8.29A1,1,0,0,0,8.29,9.71L16.59,18,8.29,26.29a1,1,0,1,0,1.41,1.41L18,19.41l8.29,8.29a1,1,0,0,0,1.41-1.41Z"/>'}],ebe=["step-forward-2",{outline:'<path d="M7.08,6.52a1.68,1.68,0,0,0,0,2.4L16.51,18,7.12,27.08a1.7,1.7,0,0,0,2.36,2.44h0L21.4,18,9.48,6.47A1.69,1.69,0,0,0,7.08,6.52Z"/><path d="M26.49,5a1.7,1.7,0,0,0-1.7,1.7V29.3a1.7,1.7,0,0,0,3.4,0V6.7A1.7,1.7,0,0,0,26.49,5Z"/>'}],mG=["angle-double",{outline:'<path d="M29,19.41a1,1,0,0,1-.71-.29L18,8.83,7.71,19.12a1,1,0,0,1-1.41-1.41L18,6,29.71,17.71A1,1,0,0,1,29,19.41Z"/><path d="M29,30.41a1,1,0,0,1-.71-.29L18,19.83,7.71,30.12a1,1,0,0,1-1.41-1.41L18,17,29.71,28.71A1,1,0,0,1,29,30.41Z"/>'}],tbe=["filter-grid-circle",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/><path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],nbe=["filter-grid",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/>',solid:'<path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],vG=["info-circle",{outline:'<circle cx="17.93" cy="11.9" r="1.4"/><path d="M21,23H19V15H16a1,1,0,0,0,0,2h1v6H15a1,1,0,1,0,0,2h6a1,1,0,0,0,0-2Z"/><path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-2,5.15a2,2,0,1,1,2,2A2,2,0,0,1,15.9,11.15ZM23,24a1,1,0,0,1-1,1H15a1,1,0,1,1,0-2h2V17H16a1,1,0,0,1,0-2h4v8h2A1,1,0,0,1,23,24Z"/>'}],ibe=["exclamation-triangle",{outline:'<path d="M18,21.32a1.3,1.3,0,0,0,1.3-1.3V14a1.3,1.3,0,1,0-2.6,0v6A1.3,1.3,0,0,0,18,21.32Z"/><circle cx="17.95" cy="24.27" r="1.5"/><path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43Zm-1.78,1.94a1,1,0,0,1-.86.49H8.21a1,1,0,0,1-.88-1.48L17.07,8.55a1,1,0,0,1,1.76,0l9.74,17.94A1,1,0,0,1,28.55,27.48Z"/>',solid:'<path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43ZM16.46,12.74a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,26.25a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,26.25Z"/>'}],_G=["error-standard",{outline:'<circle cx="18" cy="26.06" r="1.33"/><path d="M18,22.61a1,1,0,0,1-1-1v-12a1,1,0,1,1,2,0v12A1,1,0,0,1,18,22.61Z"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,2.1a16,16,0,1,0,16,16A16,16,0,0,0,18,2.1ZM16.6,8.8a1.4,1.4,0,0,1,2.8,0v12a1.4,1.4,0,0,1-2.8,0ZM18,28.6a1.8,1.8,0,1,1,1.8-1.8A1.8,1.8,0,0,1,18,28.6Z"/>'}],rbe=["circle",{outline:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34Z"/>'}],sbe=["dot-circle",{outline:'<path d="M18,11a7,7,0,1,1-7,7,7,7,0,0,1,7-7"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>'}],obe=["success-standard",{outline:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M28,12.1a1,1,0,0,0-1.41,0L15.49,23.15l-6-6A1,1,0,0,0,8,18.53L15.49,26,28,13.52A1,1,0,0,0,28,12.1Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM28.45,12.63,15.31,25.76,7.55,18a1.4,1.4,0,0,1,2-2l5.78,5.78L26.47,10.65a1.4,1.4,0,1,1,2,2Z"/>'}];class abe extends Oe{constructor(a,o){super()}schedule(a,o=0){return this}}const rS={setInterval(...l){const{delegate:a}=rS;return((null==a?void 0:a.setInterval)||setInterval)(...l)},clearInterval(l){const{delegate:a}=rS;return((null==a?void 0:a.clearInterval)||clearInterval)(l)},delegate:void 0},N3={now:()=>(N3.delegate||Date).now(),delegate:void 0};class o1{constructor(a,o=o1.now){this.schedulerActionCtor=a,this.now=o}schedule(a,o=0,c){return new this.schedulerActionCtor(this,a).schedule(c,o)}}o1.now=N3.now,new class cbe extends o1{constructor(a,o=o1.now){super(a,o),this.actions=[],this._active=!1,this._scheduled=void 0}flush(a){const{actions:o}=this;if(this._active)return void o.push(a);let c;this._active=!0;do{if(c=a.execute(a.state,a.delay))break}while(a=o.shift());if(this._active=!1,c){for(;a=o.shift();)a.unsubscribe();throw c}}}(class lbe extends abe{constructor(a,o){super(a,o),this.scheduler=a,this.work=o,this.pending=!1}schedule(a,o=0){if(this.closed)return this;this.state=a;const c=this.id,u=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(u,c,o)),this.pending=!0,this.delay=o,this.id=this.id||this.requestAsyncId(u,this.id,o),this}requestAsyncId(a,o,c=0){return rS.setInterval(a.flush.bind(a,this),c)}recycleAsyncId(a,o,c=0){if(null!=c&&this.delay===c&&!1===this.pending)return o;rS.clearInterval(o)}execute(a,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(a,o);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,o){let u,c=!1;try{this.work(a)}catch(h){c=!0,u=h||new Error("Scheduled action threw falsy error")}if(c)return this.unsubscribe(),u}unsubscribe(){if(!this.closed){const{id:a,scheduler:o}=this,{actions:c}=o;this.work=this.state=this.scheduler=null,this.pending=!1,_e(c,this),null!=a&&(this.id=this.recycleAsyncId(o,a,null)),this.delay=null,super.unsubscribe()}}});class B3 extends pt{constructor(a=1/0,o=1/0,c=N3){super(),this._bufferSize=a,this._windowTime=o,this._timestampProvider=c,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,a),this._windowTime=Math.max(1,o)}next(a){const{isStopped:o,_buffer:c,_infiniteTimeWindow:u,_timestampProvider:h,_windowTime:d}=this;o||(c.push(a),!u&&c.push(h.now()+d)),this._trimBuffer(),super.next(a)}_subscribe(a){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(a),{_infiniteTimeWindow:c,_buffer:u}=this,h=u.slice();for(let d=0;d<h.length&&!a.closed;d+=c?1:2)a.next(h[d]);return this._checkFinalizedStatuses(a),o}_trimBuffer(){const{_bufferSize:a,_timestampProvider:o,_buffer:c,_infiniteTimeWindow:u}=this,h=(u?1:2)*a;if(a<1/0&&h<c.length&&c.splice(0,c.length-h),!u){const d=o.now();let f=0;for(let p=1;p<c.length&&c[p]<=d;p+=2)f=p;f&&c.splice(0,f+1)}}}class CG{}const Rh="*";function ul(l,a){return{type:7,name:l,definitions:a,options:{}}}function wo(l,a=null){return{type:4,styles:a,timings:l}}function xG(l,a=null){return{type:2,steps:l,options:a}}function Ai(l){return{type:6,styles:l,offset:null}}function Cbe(l){return{type:5,steps:l}}function Fs(l,a,o=null){return{type:1,expr:l,animation:a,options:o}}function wG(l){Promise.resolve(null).then(l)}class u0{constructor(a=0,o=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=a+o}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(a){this._position=this.totalTime?a*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class SG{constructor(a){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=a;let o=0,c=0,u=0;const h=this.players.length;0==h?wG(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++o==h&&this._onFinish()}),d.onDestroy(()=>{++c==h&&this._onDestroy()}),d.onStart(()=>{++u==h&&this._onStart()})}),this.totalTime=this.players.reduce((d,f)=>Math.max(d,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this.players.forEach(a=>a.init())}onStart(a){this._onStartFns.push(a)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(a=>a()),this._onStartFns=[])}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(a=>a.play())}pause(){this.players.forEach(a=>a.pause())}restart(){this.players.forEach(a=>a.restart())}finish(){this._onFinish(),this.players.forEach(a=>a.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(a=>a.destroy()),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this.players.forEach(a=>a.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(a){const o=a*this.totalTime;this.players.forEach(c=>{const u=c.totalTime?Math.min(1,o/c.totalTime):1;c.setPosition(u)})}getPosition(){const a=this.players.reduce((o,c)=>null===o||c.totalTime>o.totalTime?c:o,null);return null!=a?a.getPosition():0}beforeDestroy(){this.players.forEach(a=>{a.beforeDestroy&&a.beforeDestroy()})}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}let TG=(()=>{class l{constructor(o,c){this._renderer=o,this._elementRef=c,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(o,c){this._renderer.setProperty(this._elementRef.nativeElement,o,c)}registerOnTouched(o){this.onTouched=o}registerOnChange(o){this.onChange=o}setDisabledState(o){this.setProperty("disabled",o)}}return l.\u0275fac=function(o){return new(o||l)(R(di),R(bn))},l.\u0275dir=mt({type:l}),l})(),wp=(()=>{class l extends TG{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Kr(l)))(c||l)}}(),l.\u0275dir=mt({type:l,features:[dn]}),l})();const Fu=new Wn("NgValueAccessor"),wbe={provide:Fu,useExisting:kr(()=>Ru),multi:!0};let Ru=(()=>{class l extends wp{writeValue(o){this.setProperty("checked",o)}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Kr(l)))(c||l)}}(),l.\u0275dir=mt({type:l,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(o,c){1&o&&ee("change",function(h){return c.onChange(h.target.checked)})("blur",function(){return c.onTouched()})},features:[un([wbe]),dn]}),l})();const Sbe={provide:Fu,useExisting:kr(()=>aa),multi:!0},Dbe=new Wn("CompositionEventMode");let aa=(()=>{class l extends TG{constructor(o,c,u){super(o,c),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Tbe(){const l=Eu()?Eu().getUserAgent():"";return/android (\d+)/.test(l.toLowerCase())}())}writeValue(o){this.setProperty("value",null==o?"":o)}_handleInput(o){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(o)}_compositionStart(){this._composing=!0}_compositionEnd(o){this._composing=!1,this._compositionMode&&this.onChange(o)}}return l.\u0275fac=function(o){return new(o||l)(R(di),R(bn),R(Dbe,8))},l.\u0275dir=mt({type:l,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,c){1&o&&ee("input",function(h){return c._handleInput(h.target.value)})("blur",function(){return c.onTouched()})("compositionstart",function(){return c._compositionStart()})("compositionend",function(h){return c._compositionEnd(h.target.value)})},features:[un([Sbe]),dn]}),l})();const Lo=new Wn("NgValidators"),Gd=new Wn("NgAsyncValidators");function kG(l){return function Wd(l){return null==l||0===l.length}(l.value)?{required:!0}:null}function AG(l){return!0===l.value?null:{required:!0}}function a1(l){return null}function RG(l){return null!=l}function NG(l){const a=Sy(l)?lo(l):l;return XA(a),a}function LG(l){let a={};return l.forEach(o=>{a=null!=o?Object.assign(Object.assign({},a),o):a}),0===Object.keys(a).length?null:a}function BG(l,a){return a.map(o=>o(l))}function VG(l){return l.map(a=>function Ebe(l){return!l.validate}(a)?a:o=>a.validate(o))}function z3(l){return null!=l?function zG(l){if(!l)return null;const a=l.filter(RG);return 0==a.length?null:function(o){return LG(BG(o,a))}}(VG(l)):null}function U3(l){return null!=l?function UG(l){if(!l)return null;const a=l.filter(RG);return 0==a.length?null:function(o){return function xbe(...l){const a=DV(l),{args:o,keys:c}=z9(l),u=new _n(h=>{const{length:d}=o;if(!d)return void h.complete();const f=new Array(d);let p=d,g=d;for(let m=0;m<d;m++){let v=!1;yc(o[m]).subscribe(new Ri(h,_=>{v||(v=!0,g--),f[m]=_},()=>p--,void 0,()=>{(!p||!v)&&(g||h.next(c?U9(c,f):f),h.complete())}))}});return a?u.pipe(n3(a)):u}(BG(o,a).map(NG)).pipe(hn(LG))}}(VG(l)):null}function HG(l,a){return null===l?[a]:Array.isArray(l)?[...l,a]:[l,a]}function H3(l){return l?Array.isArray(l)?l:[l]:[]}function aS(l,a){return Array.isArray(l)?l.includes(a):l===a}function jG(l,a){const o=H3(a);return H3(l).forEach(u=>{aS(o,u)||o.push(u)}),o}function $G(l,a){return H3(a).filter(o=>!aS(l,o))}class qG{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(a){this._rawValidators=a||[],this._composedValidatorFn=z3(this._rawValidators)}_setAsyncValidators(a){this._rawAsyncValidators=a||[],this._composedAsyncValidatorFn=U3(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(a){this._onDestroyCallbacks.push(a)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(a=>a()),this._onDestroyCallbacks=[]}reset(a){this.control&&this.control.reset(a)}hasError(a,o){return!!this.control&&this.control.hasError(a,o)}getError(a,o){return this.control?this.control.getError(a,o):null}}class Ba extends qG{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class la extends qG{get formDirective(){return null}get path(){return null}}class YG{constructor(a){this._cd=a}is(a){var o,c,u;return"submitted"===a?!!(null===(o=this._cd)||void 0===o?void 0:o.submitted):!!(null===(u=null===(c=this._cd)||void 0===c?void 0:c.control)||void 0===u?void 0:u[a])}}let Js=(()=>{class l extends YG{constructor(o){super(o)}}return l.\u0275fac=function(o){return new(o||l)(R(Ba,2))},l.\u0275dir=mt({type:l,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,c){2&o&&At("ng-untouched",c.is("untouched"))("ng-touched",c.is("touched"))("ng-pristine",c.is("pristine"))("ng-dirty",c.is("dirty"))("ng-valid",c.is("valid"))("ng-invalid",c.is("invalid"))("ng-pending",c.is("pending"))},features:[dn]}),l})(),Sp=(()=>{class l extends YG{constructor(o){super(o)}}return l.\u0275fac=function(o){return new(o||l)(R(la,10))},l.\u0275dir=mt({type:l,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,c){2&o&&At("ng-untouched",c.is("untouched"))("ng-touched",c.is("touched"))("ng-pristine",c.is("pristine"))("ng-dirty",c.is("dirty"))("ng-valid",c.is("valid"))("ng-invalid",c.is("invalid"))("ng-pending",c.is("pending"))("ng-submitted",c.is("submitted"))},features:[dn]}),l})();function l1(l,a){j3(l,a),a.valueAccessor.writeValue(l.value),function Nbe(l,a){a.valueAccessor.registerOnChange(o=>{l._pendingValue=o,l._pendingChange=!0,l._pendingDirty=!0,"change"===l.updateOn&&ZG(l,a)})}(l,a),function Bbe(l,a){const o=(c,u)=>{a.valueAccessor.writeValue(c),u&&a.viewToModelUpdate(c)};l.registerOnChange(o),a._registerOnDestroy(()=>{l._unregisterOnChange(o)})}(l,a),function Lbe(l,a){a.valueAccessor.registerOnTouched(()=>{l._pendingTouched=!0,"blur"===l.updateOn&&l._pendingChange&&ZG(l,a),"submit"!==l.updateOn&&l.markAsTouched()})}(l,a),function Rbe(l,a){if(a.valueAccessor.setDisabledState){const o=c=>{a.valueAccessor.setDisabledState(c)};l.registerOnDisabledChange(o),a._registerOnDestroy(()=>{l._unregisterOnDisabledChange(o)})}}(l,a)}function hS(l,a){l.forEach(o=>{o.registerOnValidatorChange&&o.registerOnValidatorChange(a)})}function j3(l,a){const o=function WG(l){return l._rawValidators}(l);null!==a.validator?l.setValidators(HG(o,a.validator)):"function"==typeof o&&l.setValidators([o]);const c=function GG(l){return l._rawAsyncValidators}(l);null!==a.asyncValidator?l.setAsyncValidators(HG(c,a.asyncValidator)):"function"==typeof c&&l.setAsyncValidators([c]);const u=()=>l.updateValueAndValidity();hS(a._rawValidators,u),hS(a._rawAsyncValidators,u)}function ZG(l,a){l._pendingDirty&&l.markAsDirty(),l.setValue(l._pendingValue,{emitModelToViewChange:!1}),a.viewToModelUpdate(l._pendingValue),l._pendingChange=!1}function fS(l,a){const o=l.indexOf(a);o>-1&&l.splice(o,1)}const c1="VALID",pS="INVALID",h0="PENDING",u1="DISABLED";function X3(l){return(gS(l)?l.validators:l)||null}function JG(l){return Array.isArray(l)?z3(l):l||null}function Z3(l,a){return(gS(a)?a.asyncValidators:l)||null}function ej(l){return Array.isArray(l)?U3(l):l||null}function gS(l){return null!=l&&!Array.isArray(l)&&"object"==typeof l}const K3=l=>l instanceof mS;function nj(l){return(l=>l instanceof J3)(l)?l.value:l.getRawValue()}function ij(l,a){const o=K3(l),c=l.controls;if(!(o?Object.keys(c):c).length)throw new qi(1e3,"");if(!c[a])throw new qi(1001,"")}function rj(l,a){K3(l),l._forEachChild((c,u)=>{if(void 0===a[u])throw new qi(1002,"")})}class Q3{constructor(a,o){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=a,this._rawAsyncValidators=o,this._composedValidatorFn=JG(this._rawValidators),this._composedAsyncValidatorFn=ej(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(a){this._rawValidators=this._composedValidatorFn=a}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(a){this._rawAsyncValidators=this._composedAsyncValidatorFn=a}get parent(){return this._parent}get valid(){return this.status===c1}get invalid(){return this.status===pS}get pending(){return this.status==h0}get disabled(){return this.status===u1}get enabled(){return this.status!==u1}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(a){this._rawValidators=a,this._composedValidatorFn=JG(a)}setAsyncValidators(a){this._rawAsyncValidators=a,this._composedAsyncValidatorFn=ej(a)}addValidators(a){this.setValidators(jG(a,this._rawValidators))}addAsyncValidators(a){this.setAsyncValidators(jG(a,this._rawAsyncValidators))}removeValidators(a){this.setValidators($G(a,this._rawValidators))}removeAsyncValidators(a){this.setAsyncValidators($G(a,this._rawAsyncValidators))}hasValidator(a){return aS(this._rawValidators,a)}hasAsyncValidator(a){return aS(this._rawAsyncValidators,a)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(a={}){this.touched=!0,this._parent&&!a.onlySelf&&this._parent.markAsTouched(a)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(a=>a.markAllAsTouched())}markAsUntouched(a={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}markAsDirty(a={}){this.pristine=!1,this._parent&&!a.onlySelf&&this._parent.markAsDirty(a)}markAsPristine(a={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(o=>{o.markAsPristine({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}markAsPending(a={}){this.status=h0,!1!==a.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!a.onlySelf&&this._parent.markAsPending(a)}disable(a={}){const o=this._parentMarkedDirty(a.onlySelf);this.status=u1,this.errors=null,this._forEachChild(c=>{c.disable(Object.assign(Object.assign({},a),{onlySelf:!0}))}),this._updateValue(),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},a),{skipPristineCheck:o})),this._onDisabledChange.forEach(c=>c(!0))}enable(a={}){const o=this._parentMarkedDirty(a.onlySelf);this.status=c1,this._forEachChild(c=>{c.enable(Object.assign(Object.assign({},a),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},a),{skipPristineCheck:o})),this._onDisabledChange.forEach(c=>c(!1))}_updateAncestors(a){this._parent&&!a.onlySelf&&(this._parent.updateValueAndValidity(a),a.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(a){this._parent=a}updateValueAndValidity(a={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===c1||this.status===h0)&&this._runAsyncValidator(a.emitEvent)),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!a.onlySelf&&this._parent.updateValueAndValidity(a)}_updateTreeValidity(a={emitEvent:!0}){this._forEachChild(o=>o._updateTreeValidity(a)),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?u1:c1}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(a){if(this.asyncValidator){this.status=h0,this._hasOwnPendingAsyncValidator=!0;const o=NG(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(c=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(c,{emitEvent:a})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(a,o={}){this.errors=a,this._updateControlsErrors(!1!==o.emitEvent)}get(a){return function Hbe(l,a,o){if(null==a||(Array.isArray(a)||(a=a.split(o)),Array.isArray(a)&&0===a.length))return null;let c=l;return a.forEach(u=>{c=K3(c)?c.controls.hasOwnProperty(u)?c.controls[u]:null:(l=>l instanceof Gbe)(c)&&c.at(u)||null}),c}(this,a,".")}getError(a,o){const c=o?this.get(o):this;return c&&c.errors?c.errors[a]:null}hasError(a,o){return!!this.getError(a,o)}get root(){let a=this;for(;a._parent;)a=a._parent;return a}_updateControlsErrors(a){this.status=this._calculateStatus(),a&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(a)}_initObservables(){this.valueChanges=new St,this.statusChanges=new St}_calculateStatus(){return this._allControlsDisabled()?u1:this.errors?pS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(h0)?h0:this._anyControlsHaveStatus(pS)?pS:c1}_anyControlsHaveStatus(a){return this._anyControls(o=>o.status===a)}_anyControlsDirty(){return this._anyControls(a=>a.dirty)}_anyControlsTouched(){return this._anyControls(a=>a.touched)}_updatePristine(a={}){this.pristine=!this._anyControlsDirty(),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}_updateTouched(a={}){this.touched=this._anyControlsTouched(),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}_isBoxedValue(a){return"object"==typeof a&&null!==a&&2===Object.keys(a).length&&"value"in a&&"disabled"in a}_registerOnCollectionChange(a){this._onCollectionChange=a}_setUpdateStrategy(a){gS(a)&&null!=a.updateOn&&(this._updateOn=a.updateOn)}_parentMarkedDirty(a){return!a&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class J3 extends Q3{constructor(a=null,o,c){super(X3(o),Z3(c,o)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(a),this._setUpdateStrategy(o),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gS(o)&&o.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(a)?a.value:a)}setValue(a,o={}){this.value=this._pendingValue=a,this._onChange.length&&!1!==o.emitModelToViewChange&&this._onChange.forEach(c=>c(this.value,!1!==o.emitViewToModelChange)),this.updateValueAndValidity(o)}patchValue(a,o={}){this.setValue(a,o)}reset(a=this.defaultValue,o={}){this._applyFormState(a),this.markAsPristine(o),this.markAsUntouched(o),this.setValue(this.value,o),this._pendingChange=!1}_updateValue(){}_anyControls(a){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(a){this._onChange.push(a)}_unregisterOnChange(a){fS(this._onChange,a)}registerOnDisabledChange(a){this._onDisabledChange.push(a)}_unregisterOnDisabledChange(a){fS(this._onDisabledChange,a)}_forEachChild(a){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(a){this._isBoxedValue(a)?(this.value=this._pendingValue=a.value,a.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=a}}class mS extends Q3{constructor(a,o,c){super(X3(o),Z3(c,o)),this.controls=a,this._initObservables(),this._setUpdateStrategy(o),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(a,o){return this.controls[a]?this.controls[a]:(this.controls[a]=o,o.setParent(this),o._registerOnCollectionChange(this._onCollectionChange),o)}addControl(a,o,c={}){this.registerControl(a,o),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}removeControl(a,o={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}setControl(a,o,c={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],o&&this.registerControl(a,o),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}contains(a){return this.controls.hasOwnProperty(a)&&this.controls[a].enabled}setValue(a,o={}){rj(this,a),Object.keys(a).forEach(c=>{ij(this,c),this.controls[c].setValue(a[c],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o)}patchValue(a,o={}){null!=a&&(Object.keys(a).forEach(c=>{this.controls[c]&&this.controls[c].patchValue(a[c],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o))}reset(a={},o={}){this._forEachChild((c,u)=>{c.reset(a[u],{onlySelf:!0,emitEvent:o.emitEvent})}),this._updatePristine(o),this._updateTouched(o),this.updateValueAndValidity(o)}getRawValue(){return this._reduceChildren({},(a,o,c)=>(a[c]=nj(o),a))}_syncPendingControls(){let a=this._reduceChildren(!1,(o,c)=>!!c._syncPendingControls()||o);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_forEachChild(a){Object.keys(this.controls).forEach(o=>{const c=this.controls[o];c&&a(c,o)})}_setUpControls(){this._forEachChild(a=>{a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(a){for(const o of Object.keys(this.controls)){const c=this.controls[o];if(this.contains(o)&&a(c))return!0}return!1}_reduceValue(){return this._reduceChildren({},(a,o,c)=>((o.enabled||this.disabled)&&(a[c]=o.value),a))}_reduceChildren(a,o){let c=a;return this._forEachChild((u,h)=>{c=o(c,u,h)}),c}_allControlsDisabled(){for(const a of Object.keys(this.controls))if(this.controls[a].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Gbe extends Q3{constructor(a,o,c){super(X3(o),Z3(c,o)),this.controls=a,this._initObservables(),this._setUpdateStrategy(o),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(a){return this.controls[a]}push(a,o={}){this.controls.push(a),this._registerControl(a),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}insert(a,o,c={}){this.controls.splice(a,0,o),this._registerControl(o),this.updateValueAndValidity({emitEvent:c.emitEvent})}removeAt(a,o={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),this.updateValueAndValidity({emitEvent:o.emitEvent})}setControl(a,o,c={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),o&&(this.controls.splice(a,0,o),this._registerControl(o)),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(a,o={}){rj(this,a),a.forEach((c,u)=>{ij(this,u),this.at(u).setValue(c,{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o)}patchValue(a,o={}){null!=a&&(a.forEach((c,u)=>{this.at(u)&&this.at(u).patchValue(c,{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o))}reset(a=[],o={}){this._forEachChild((c,u)=>{c.reset(a[u],{onlySelf:!0,emitEvent:o.emitEvent})}),this._updatePristine(o),this._updateTouched(o),this.updateValueAndValidity(o)}getRawValue(){return this.controls.map(a=>nj(a))}clear(a={}){this.controls.length<1||(this._forEachChild(o=>o._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:a.emitEvent}))}_syncPendingControls(){let a=this.controls.reduce((o,c)=>!!c._syncPendingControls()||o,!1);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_forEachChild(a){this.controls.forEach((o,c)=>{a(o,c)})}_updateValue(){this.value=this.controls.filter(a=>a.enabled||this.disabled).map(a=>a.value)}_anyControls(a){return this.controls.some(o=>o.enabled&&a(o))}_setUpControls(){this._forEachChild(a=>this._registerControl(a))}_allControlsDisabled(){for(const a of this.controls)if(a.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(a){a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)}}const jbe={provide:la,useExisting:kr(()=>Nu)},h1=(()=>Promise.resolve(null))();let Nu=(()=>{class l extends la{constructor(o,c){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new St,this.form=new mS({},z3(o),U3(c))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(o){h1.then(()=>{const c=this._findContainer(o.path);o.control=c.registerControl(o.name,o.control),l1(o.control,o),o.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(o)})}getControl(o){return this.form.get(o.path)}removeControl(o){h1.then(()=>{const c=this._findContainer(o.path);c&&c.removeControl(o.name),fS(this._directives,o)})}addFormGroup(o){h1.then(()=>{const c=this._findContainer(o.path),u=new mS({});(function KG(l,a){j3(l,a)})(u,o),c.registerControl(o.name,u),u.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(o){h1.then(()=>{const c=this._findContainer(o.path);c&&c.removeControl(o.name)})}getFormGroup(o){return this.form.get(o.path)}updateModel(o,c){h1.then(()=>{this.form.get(o.path).setValue(c)})}setValue(o){this.control.setValue(o)}onSubmit(o){return this.submitted=!0,function QG(l,a){l._syncPendingControls(),a.forEach(o=>{const c=o.control;"submit"===c.updateOn&&c._pendingChange&&(o.viewToModelUpdate(c._pendingValue),c._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(o),!1}onReset(){this.resetForm()}resetForm(o){this.form.reset(o),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(o){return o.pop(),o.length?this.form.get(o):this.form}}return l.\u0275fac=function(o){return new(o||l)(R(Lo,10),R(Gd,10))},l.\u0275dir=mt({type:l,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(o,c){1&o&&ee("submit",function(h){return c.onSubmit(h)})("reset",function(){return c.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[un([jbe]),dn]}),l})();const qbe={provide:Ba,useExisting:kr(()=>Rs)},oj=(()=>Promise.resolve(null))();let Rs=(()=>{class l extends Ba{constructor(o,c,u,h){super(),this.control=new J3,this._registered=!1,this.update=new St,this._parent=o,this._setValidators(c),this._setAsyncValidators(u),this.valueAccessor=function q3(l,a){if(!a)return null;let o,c,u;return Array.isArray(a),a.forEach(h=>{h.constructor===aa?o=h:function Ube(l){return Object.getPrototypeOf(l.constructor)===wp}(h)?c=h:u=h}),u||c||o||null}(0,h)}ngOnChanges(o){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in o&&this._updateDisabled(o),function $3(l,a){if(!l.hasOwnProperty("model"))return!1;const o=l.model;return!!o.isFirstChange()||!Object.is(a,o.currentValue)}(o,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function cS(l,a){return[...a.path,l]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){l1(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(o){oj.then(()=>{this.control.setValue(o,{emitViewToModelChange:!1})})}_updateDisabled(o){const c=o.isDisabled.currentValue,u=""===c||c&&"false"!==c;oj.then(()=>{u&&!this.control.disabled?this.control.disable():!u&&this.control.disabled&&this.control.enable()})}}return l.\u0275fac=function(o){return new(o||l)(R(la,9),R(Lo,10),R(Gd,10),R(Fu,10))},l.\u0275dir=mt({type:l,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[un([qbe]),dn,Ys]}),l})(),Tp=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=mt({type:l,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),l})();const Xbe={provide:Fu,useExisting:kr(()=>d1),multi:!0};let aj=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({}),l})(),Zbe=(()=>{class l{constructor(){this._accessors=[]}add(o,c){this._accessors.push([o,c])}remove(o){for(let c=this._accessors.length-1;c>=0;--c)if(this._accessors[c][1]===o)return void this._accessors.splice(c,1)}select(o){this._accessors.forEach(c=>{this._isSameGroup(c,o)&&c[1]!==o&&c[1].fireUncheck(o.value)})}_isSameGroup(o,c){return!!o[0].control&&o[0]._parent===c._control._parent&&o[1].name===c.name}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:aj}),l})(),d1=(()=>{class l extends wp{constructor(o,c,u,h){super(o,c),this._registry=u,this._injector=h,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Ba),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(o){this._state=o===this.value,this.setProperty("checked",this._state)}registerOnChange(o){this._fn=o,this.onChange=()=>{o(this.value),this._registry.select(this)}}fireUncheck(o){this.writeValue(o)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return l.\u0275fac=function(o){return new(o||l)(R(di),R(bn),R(Zbe),R(or))},l.\u0275dir=mt({type:l,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(o,c){1&o&&ee("change",function(){return c.onChange()})("blur",function(){return c.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[un([Xbe]),dn]}),l})(),d0=(()=>{class l{constructor(){this._validator=a1}ngOnChanges(o){if(this.inputName in o){const c=this.normalizeInput(o[this.inputName].currentValue);this._enabled=this.enabled(c),this._validator=this._enabled?this.createValidator(c):a1,this._onChange&&this._onChange()}}validate(o){return this._validator(o)}registerOnValidatorChange(o){this._onChange=o}enabled(o){return null!=o}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=mt({type:l,features:[Ys]}),l})();const uCe={provide:Lo,useExisting:kr(()=>jd),multi:!0},hCe={provide:Lo,useExisting:kr(()=>r4),multi:!0};let jd=(()=>{class l extends d0{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o=>function aCe(l){return null!=l&&!1!==l&&"false"!=`${l}`}(o),this.createValidator=o=>kG}enabled(o){return o}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Kr(l)))(c||l)}}(),l.\u0275dir=mt({type:l,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(o,c){2&o&&et("required",c._enabled?"":null)},inputs:{required:"required"},features:[un([uCe]),dn]}),l})(),r4=(()=>{class l extends jd{constructor(){super(...arguments),this.createValidator=o=>AG}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Kr(l)))(c||l)}}(),l.\u0275dir=mt({type:l,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(o,c){2&o&&et("required",c._enabled?"":null)},features:[un([hCe]),dn]}),l})(),mCe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[aj]]}),l})(),$d=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[mCe]}),l})();const _Ce=eG(3,(l,a,o)=>{!function L1e(l,a){return a||(a=window&&window.customElements),!a||!!a.get(l)}(l)||function V1e(){var l,a;return null===(a=null===(l=null==window?void 0:window.location)||void 0===l?void 0:l.href)||void 0===a?void 0:a.includes("localhost:6006")}()?(o.define(l,function vCe(l){return dG.supports.flexGap?l:class extends l{connectedCallback(){super.connectedCallback(),this.setAttribute("_nfg","")}}}(a)),fG(),window&&!Object.keys(window.CDS._state.elementRegistry).some(c=>c===l)&&(window.CDS._state.elementRegistry=hx(Qo({},window.CDS._state.elementRegistry),{[l]:{}}))):r1.warn(l+" has already been registered")});let Tj=!1,Dj=!1;function Mj(){var l,a,o;return void 0!==(null===(o=null===(a=null===(l=globalThis)||void 0===l?void 0:l.process)||void 0===a?void 0:a.env)||void 0===o?void 0:o.JEST_WORKER_ID)}function Ej(l,a,o){Object.defineProperty(l,o,{configurable:!0,enumerable:!0,get:function(){return this.hasAttribute(a)?this.getAttribute(a):null},set:function(c){null!==c?this.setAttribute(a,c):this.removeAttribute(a)}})}function kj(l,a,o,c,u,h,d){try{var f=l[h](d),p=f.value}catch(g){return void o(g)}f.done?a(p):Promise.resolve(p).then(c,u)}function Aj(l){return function(){var a=this,o=arguments;return new Promise(function(c,u){var h=l.apply(a,o);function d(p){kj(h,c,u,d,f,"next",p)}function f(p){kj(h,c,u,d,f,"throw",p)}d(void 0)})}}Tj||Element.prototype.hasOwnProperty("role")||Mj()||(Ej(Element.prototype,"role","role"),Tj=!0),Dj||Element.prototype.hasOwnProperty("ariaLabel")||Mj()||(Dj=!0,["ActiveDescendant","Atomic","AutoComplete","Busy","Checked","ColCount","ColIndex","ColSpan","Controls","Current","DescribedBy","Details","Disabled","ErrorMessage","Expanded","FlowTo","HasPopup","Hidden","Invalid","KeyShortcuts","Label","LabelledBy","Level","Live","Modal","MultiLine","MultiSelectable","Orientation","Owns","Placeholder","PosInSet","Pressed","ReadOnly","Relevant","Required","RoleDescription","RowCount","RowIndex","RowSpan","Selected","SetSize","Sort","ValueMax","ValueMin","ValueNow","ValueText"].forEach(l=>Ej(Element.prototype,"aria-"+l.toLowerCase(),"aria"+l)));const s4=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o4=Symbol(),Ij=new Map;class Pj{constructor(a,o){if(this._$cssResult$=!0,o!==o4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=a}get styleSheet(){let a=Ij.get(this.cssText);return s4&&void 0===a&&(Ij.set(this.cssText,a=new CSSStyleSheet),a.replaceSync(this.cssText)),a}toString(){return this.cssText}}const Oj=(l,...a)=>{const o=1===l.length?l[0]:a.reduce((c,u,h)=>c+(d=>{if(!0===d._$cssResult$)return d.cssText;if("number"==typeof d)return d;throw Error("Value passed to 'css' function must be a 'css' function result: "+d+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(u)+l[h+1],l[0]);return new Pj(o,o4)},Fj=s4?l=>l:l=>l instanceof CSSStyleSheet?(a=>{let o="";for(const c of a.cssRules)o+=c.cssText;return(l=>new Pj("string"==typeof l?l:l+"",o4))(o)})(l):l;var a4;const Rj=window.trustedTypes,xCe=Rj?Rj.emptyScript:"",Nj=window.reactiveElementPolyfillSupport,l4={toAttribute(l,a){switch(a){case Boolean:l=l?xCe:null;break;case Object:case Array:l=null==l?l:JSON.stringify(l)}return l},fromAttribute(l,a){let o=l;switch(a){case Boolean:o=null!==l;break;case Number:o=null===l?null:Number(l);break;case Object:case Array:try{o=JSON.parse(l)}catch(c){o=null}}return o}},Lj=(l,a)=>a!==l&&(a==a||l==l),c4={attribute:!0,type:String,converter:l4,reflect:!1,hasChanged:Lj};class f0 extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(a){var o;null!==(o=this.l)&&void 0!==o||(this.l=[]),this.l.push(a)}static get observedAttributes(){this.finalize();const a=[];return this.elementProperties.forEach((o,c)=>{const u=this._$Eh(c,o);void 0!==u&&(this._$Eu.set(u,c),a.push(u))}),a}static createProperty(a,o=c4){if(o.state&&(o.attribute=!1),this.finalize(),this.elementProperties.set(a,o),!o.noAccessor&&!this.prototype.hasOwnProperty(a)){const c="symbol"==typeof a?Symbol():"__"+a,u=this.getPropertyDescriptor(a,c,o);void 0!==u&&Object.defineProperty(this.prototype,a,u)}}static getPropertyDescriptor(a,o,c){return{get(){return this[o]},set(u){const h=this[a];this[o]=u,this.requestUpdate(a,h,c)},configurable:!0,enumerable:!0}}static getPropertyOptions(a){return this.elementProperties.get(a)||c4}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const a=Object.getPrototypeOf(this);if(a.finalize(),this.elementProperties=new Map(a.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const o=this.properties,c=[...Object.getOwnPropertyNames(o),...Object.getOwnPropertySymbols(o)];for(const u of c)this.createProperty(u,o[u])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(a){const o=[];if(Array.isArray(a)){const c=new Set(a.flat(1/0).reverse());for(const u of c)o.unshift(Fj(u))}else void 0!==a&&o.push(Fj(a));return o}static _$Eh(a,o){const c=o.attribute;return!1===c?void 0:"string"==typeof c?c:"string"==typeof a?a.toLowerCase():void 0}o(){var a;this._$Ep=new Promise(o=>this.enableUpdating=o),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(a=this.constructor.l)||void 0===a||a.forEach(o=>o(this))}addController(a){var o,c;(null!==(o=this._$Eg)&&void 0!==o?o:this._$Eg=[]).push(a),void 0!==this.renderRoot&&this.isConnected&&(null===(c=a.hostConnected)||void 0===c||c.call(a))}removeController(a){var o;null===(o=this._$Eg)||void 0===o||o.splice(this._$Eg.indexOf(a)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((a,o)=>{this.hasOwnProperty(o)&&(this._$Et.set(o,this[o]),delete this[o])})}createRenderRoot(){var a;const o=null!==(a=this.shadowRoot)&&void 0!==a?a:this.attachShadow(this.constructor.shadowRootOptions);return((l,a)=>{s4?l.adoptedStyleSheets=a.map(o=>o instanceof CSSStyleSheet?o:o.styleSheet):a.forEach(o=>{const c=document.createElement("style"),u=window.litNonce;void 0!==u&&c.setAttribute("nonce",u),c.textContent=o.cssText,l.appendChild(c)})})(o,this.constructor.elementStyles),o}connectedCallback(){var a;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(a=this._$Eg)||void 0===a||a.forEach(o=>{var c;return null===(c=o.hostConnected)||void 0===c?void 0:c.call(o)})}enableUpdating(a){}disconnectedCallback(){var a;null===(a=this._$Eg)||void 0===a||a.forEach(o=>{var c;return null===(c=o.hostDisconnected)||void 0===c?void 0:c.call(o)})}attributeChangedCallback(a,o,c){this._$AK(a,c)}_$ES(a,o,c=c4){var u,h;const d=this.constructor._$Eh(a,c);if(void 0!==d&&!0===c.reflect){const f=(null!==(h=null===(u=c.converter)||void 0===u?void 0:u.toAttribute)&&void 0!==h?h:l4.toAttribute)(o,c.type);this._$Ei=a,null==f?this.removeAttribute(d):this.setAttribute(d,f),this._$Ei=null}}_$AK(a,o){var c,u,h;const d=this.constructor,f=d._$Eu.get(a);if(void 0!==f&&this._$Ei!==f){const p=d.getPropertyOptions(f),g=p.converter,m=null!==(h=null!==(u=null===(c=g)||void 0===c?void 0:c.fromAttribute)&&void 0!==u?u:"function"==typeof g?g:null)&&void 0!==h?h:l4.fromAttribute;this._$Ei=f,this[f]=m(o,p.type),this._$Ei=null}}requestUpdate(a,o,c){let u=!0;void 0!==a&&(((c=c||this.constructor.getPropertyOptions(a)).hasChanged||Lj)(this[a],o)?(this._$AL.has(a)||this._$AL.set(a,o),!0===c.reflect&&this._$Ei!==a&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(a,c))):u=!1),!this.isUpdatePending&&u&&(this._$Ep=this._$EC())}_$EC(){var a=this;return Aj(function*(){a.isUpdatePending=!0;try{yield a._$Ep}catch(c){Promise.reject(c)}const o=a.scheduleUpdate();return null!=o&&(yield o),!a.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var a;if(!this.isUpdatePending)return;this._$Et&&(this._$Et.forEach((u,h)=>this[h]=u),this._$Et=void 0);let o=!1;const c=this._$AL;try{o=this.shouldUpdate(c),o?(this.willUpdate(c),null===(a=this._$Eg)||void 0===a||a.forEach(u=>{var h;return null===(h=u.hostUpdate)||void 0===h?void 0:h.call(u)}),this.update(c)):this._$EU()}catch(u){throw o=!1,this._$EU(),u}o&&this._$AE(c)}willUpdate(a){}_$AE(a){var o;null===(o=this._$Eg)||void 0===o||o.forEach(c=>{var u;return null===(u=c.hostUpdated)||void 0===u?void 0:u.call(c)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(a)),this.updated(a)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(a){return!0}update(a){void 0!==this._$E_&&(this._$E_.forEach((o,c)=>this._$ES(c,this[c],o)),this._$E_=void 0),this._$EU()}updated(a){}firstUpdated(a){}}var u4;f0.finalized=!0,f0.elementProperties=new Map,f0.elementStyles=[],f0.shadowRootOptions={mode:"open"},null==Nj||Nj({ReactiveElement:f0}),(null!==(a4=globalThis.reactiveElementVersions)&&void 0!==a4?a4:globalThis.reactiveElementVersions=[]).push("1.2.1");const p0=globalThis.trustedTypes,Bj=p0?p0.createPolicy("lit-html",{createHTML:l=>l}):void 0,Nh=`lit$${(Math.random()+"").slice(9)}$`,h4="?"+Nh,wCe=`<${h4}>`,g0=document,p1=(l="")=>g0.createComment(l),g1=l=>null===l||"object"!=typeof l&&"function"!=typeof l,Vj=Array.isArray,m1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Uj=/-->/g,Hj=/>/g,Dp=/>|[ \x09\n\x0c\r](?:([^\s"'>=/]+)([ \x09\n\x0c\r]*=[ \x09\n\x0c\r]*(?:[^ \x09\n\x0c\r"'`<>=]|("|')|))|$)/g,Wj=/'/g,Gj=/"/g,jj=/^(?:script|style|textarea)$/i,$j=l=>(a,...o)=>({_$litType$:l,strings:a,values:o}),SCe=$j(1),TCe=$j(2),m0=Symbol.for("lit-noChange"),ho=Symbol.for("lit-nothing"),qj=new WeakMap,v0=g0.createTreeWalker(g0,129,null,!1);class v1{constructor({strings:a,_$litType$:o},c){let u;this.parts=[];let h=0,d=0;const f=a.length-1,p=this.parts,[g,m]=((l,a)=>{const o=l.length-1,c=[];let u,h=2===a?"<svg>":"",d=m1;for(let p=0;p<o;p++){const g=l[p];let m,v,_=-1,y=0;for(;y<g.length&&(d.lastIndex=y,v=d.exec(g),null!==v);)y=d.lastIndex,d===m1?"!--"===v[1]?d=Uj:void 0!==v[1]?d=Hj:void 0!==v[2]?(jj.test(v[2])&&(u=RegExp("</"+v[2],"g")),d=Dp):void 0!==v[3]&&(d=Dp):d===Dp?">"===v[0]?(d=null!=u?u:m1,_=-1):void 0===v[1]?_=-2:(_=d.lastIndex-v[2].length,m=v[1],d=void 0===v[3]?Dp:'"'===v[3]?Gj:Wj):d===Gj||d===Wj?d=Dp:d===Uj||d===Hj?d=m1:(d=Dp,u=void 0);const b=d===Dp&&l[p+1].startsWith("/>")?" ":"";h+=d===m1?g+wCe:_>=0?(c.push(m),g.slice(0,_)+"$lit$"+g.slice(_)+Nh+b):g+Nh+(-2===_?(c.push(void 0),p):b)}const f=h+(l[o]||"<?>")+(2===a?"</svg>":"");if(!Array.isArray(l)||!l.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==Bj?Bj.createHTML(f):f,c]})(a,o);if(this.el=v1.createElement(g,c),v0.currentNode=this.el.content,2===o){const v=this.el.content,_=v.firstChild;_.remove(),v.append(..._.childNodes)}for(;null!==(u=v0.nextNode())&&p.length<f;){if(1===u.nodeType){if(u.hasAttributes()){const v=[];for(const _ of u.getAttributeNames())if(_.endsWith("$lit$")||_.startsWith(Nh)){const y=m[d++];if(v.push(_),void 0!==y){const b=u.getAttribute(y.toLowerCase()+"$lit$").split(Nh),x=/([.?@])?(.*)/.exec(y);p.push({type:1,index:h,name:x[2],strings:b,ctor:"."===x[1]?Zj:"?"===x[1]?Kj:"@"===x[1]?Qj:_1})}else p.push({type:6,index:h})}for(const _ of v)u.removeAttribute(_)}if(jj.test(u.tagName)){const v=u.textContent.split(Nh),_=v.length-1;if(_>0){u.textContent=p0?p0.emptyScript:"";for(let y=0;y<_;y++)u.append(v[y],p1()),v0.nextNode(),p.push({type:2,index:++h});u.append(v[_],p1())}}}else if(8===u.nodeType)if(u.data===h4)p.push({type:2,index:h});else{let v=-1;for(;-1!==(v=u.data.indexOf(Nh,v+1));)p.push({type:7,index:h}),v+=Nh.length-1}h++}}static createElement(a,o){const c=g0.createElement("template");return c.innerHTML=a,c}}function Mp(l,a,o=l,c){var u,h,d,f;if(a===m0)return a;let p=void 0!==c?null===(u=o._$Cl)||void 0===u?void 0:u[c]:o._$Cu;const g=g1(a)?void 0:a._$litDirective$;return(null==p?void 0:p.constructor)!==g&&(null===(h=null==p?void 0:p._$AO)||void 0===h||h.call(p,!1),void 0===g?p=void 0:(p=new g(l),p._$AT(l,o,c)),void 0!==c?(null!==(d=(f=o)._$Cl)&&void 0!==d?d:f._$Cl=[])[c]=p:o._$Cu=p),void 0!==p&&(a=Mp(l,p._$AS(l,a.values),p,c)),a}class Xj{constructor(a,o){this.v=[],this._$AN=void 0,this._$AD=a,this._$AM=o}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(a){var o;const{el:{content:c},parts:u}=this._$AD,h=(null!==(o=null==a?void 0:a.creationScope)&&void 0!==o?o:g0).importNode(c,!0);v0.currentNode=h;let d=v0.nextNode(),f=0,p=0,g=u[0];for(;void 0!==g;){if(f===g.index){let m;2===g.type?m=new _0(d,d.nextSibling,this,a):1===g.type?m=new g.ctor(d,g.name,g.strings,this,a):6===g.type&&(m=new Jj(d,this,a)),this.v.push(m),g=u[++p]}f!==(null==g?void 0:g.index)&&(d=v0.nextNode(),f++)}return h}m(a){let o=0;for(const c of this.v)void 0!==c&&(void 0!==c.strings?(c._$AI(a,c,o),o+=c.strings.length-2):c._$AI(a[o])),o++}}class _0{constructor(a,o,c,u){var h;this.type=2,this._$AH=ho,this._$AN=void 0,this._$AA=a,this._$AB=o,this._$AM=c,this.options=u,this._$Cg=null===(h=null==u?void 0:u.isConnected)||void 0===h||h}get _$AU(){var a,o;return null!==(o=null===(a=this._$AM)||void 0===a?void 0:a._$AU)&&void 0!==o?o:this._$Cg}get parentNode(){let a=this._$AA.parentNode;const o=this._$AM;return void 0!==o&&11===a.nodeType&&(a=o.parentNode),a}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(a,o=this){a=Mp(this,a,o),g1(a)?a===ho||null==a||""===a?(this._$AH!==ho&&this._$AR(),this._$AH=ho):a!==this._$AH&&a!==m0&&this.$(a):void 0!==a._$litType$?this.T(a):void 0!==a.nodeType?this.S(a):(l=>{var a;return Vj(l)||"function"==typeof(null===(a=l)||void 0===a?void 0:a[Symbol.iterator])})(a)?this.A(a):this.$(a)}M(a,o=this._$AB){return this._$AA.parentNode.insertBefore(a,o)}S(a){this._$AH!==a&&(this._$AR(),this._$AH=this.M(a))}$(a){this._$AH!==ho&&g1(this._$AH)?this._$AA.nextSibling.data=a:this.S(g0.createTextNode(a)),this._$AH=a}T(a){var o;const{values:c,_$litType$:u}=a,h="number"==typeof u?this._$AC(a):(void 0===u.el&&(u.el=v1.createElement(u.h,this.options)),u);if((null===(o=this._$AH)||void 0===o?void 0:o._$AD)===h)this._$AH.m(c);else{const d=new Xj(h,this),f=d.p(this.options);d.m(c),this.S(f),this._$AH=d}}_$AC(a){let o=qj.get(a.strings);return void 0===o&&qj.set(a.strings,o=new v1(a)),o}A(a){Vj(this._$AH)||(this._$AH=[],this._$AR());const o=this._$AH;let c,u=0;for(const h of a)u===o.length?o.push(c=new _0(this.M(p1()),this.M(p1()),this,this.options)):c=o[u],c._$AI(h),u++;u<o.length&&(this._$AR(c&&c._$AB.nextSibling,u),o.length=u)}_$AR(a=this._$AA.nextSibling,o){var c;for(null===(c=this._$AP)||void 0===c||c.call(this,!1,!0,o);a&&a!==this._$AB;){const u=a.nextSibling;a.remove(),a=u}}setConnected(a){var o;void 0===this._$AM&&(this._$Cg=a,null===(o=this._$AP)||void 0===o||o.call(this,a))}}class _1{constructor(a,o,c,u,h){this.type=1,this._$AH=ho,this._$AN=void 0,this.element=a,this.name=o,this._$AM=u,this.options=h,c.length>2||""!==c[0]||""!==c[1]?(this._$AH=Array(c.length-1).fill(new String),this.strings=c):this._$AH=ho}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(a,o=this,c,u){const h=this.strings;let d=!1;if(void 0===h)a=Mp(this,a,o,0),d=!g1(a)||a!==this._$AH&&a!==m0,d&&(this._$AH=a);else{const f=a;let p,g;for(a=h[0],p=0;p<h.length-1;p++)g=Mp(this,f[c+p],o,p),g===m0&&(g=this._$AH[p]),d||(d=!g1(g)||g!==this._$AH[p]),g===ho?a=ho:a!==ho&&(a+=(null!=g?g:"")+h[p+1]),this._$AH[p]=g}d&&!u&&this.k(a)}k(a){a===ho?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=a?a:"")}}class Zj extends _1{constructor(){super(...arguments),this.type=3}k(a){this.element[this.name]=a===ho?void 0:a}}const MCe=p0?p0.emptyScript:"";class Kj extends _1{constructor(){super(...arguments),this.type=4}k(a){a&&a!==ho?this.element.setAttribute(this.name,MCe):this.element.removeAttribute(this.name)}}class Qj extends _1{constructor(a,o,c,u,h){super(a,o,c,u,h),this.type=5}_$AI(a,o=this){var c;if((a=null!==(c=Mp(this,a,o,0))&&void 0!==c?c:ho)===m0)return;const u=this._$AH,h=a===ho&&u!==ho||a.capture!==u.capture||a.once!==u.once||a.passive!==u.passive,d=a!==ho&&(u===ho||h);h&&this.element.removeEventListener(this.name,this,u),d&&this.element.addEventListener(this.name,this,a),this._$AH=a}handleEvent(a){var o,c;"function"==typeof this._$AH?this._$AH.call(null!==(c=null===(o=this.options)||void 0===o?void 0:o.host)&&void 0!==c?c:this.element,a):this._$AH.handleEvent(a)}}class Jj{constructor(a,o,c){this.element=a,this.type=6,this._$AN=void 0,this._$AM=o,this.options=c}get _$AU(){return this._$AM._$AU}_$AI(a){Mp(this,a)}}const e$=window.litHtmlPolyfillSupport;var d4,f4;null==e$||e$(v1,_0),(null!==(u4=globalThis.litHtmlVersions)&&void 0!==u4?u4:globalThis.litHtmlVersions=[]).push("2.1.2");class y1 extends f0{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var a,o;const c=super.createRenderRoot();return null!==(a=(o=this.renderOptions).renderBefore)&&void 0!==a||(o.renderBefore=c.firstChild),c}update(a){const o=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(a),this._$Dt=((l,a,o)=>{var c,u;const h=null!==(c=null==o?void 0:o.renderBefore)&&void 0!==c?c:a;let d=h._$litPart$;if(void 0===d){const f=null!==(u=null==o?void 0:o.renderBefore)&&void 0!==u?u:null;h._$litPart$=d=new _0(a.insertBefore(p1(),f),f,void 0,null!=o?o:{})}return d._$AI(l),d})(o,this.renderRoot,this.renderOptions)}connectedCallback(){var a;super.connectedCallback(),null===(a=this._$Dt)||void 0===a||a.setConnected(!0)}disconnectedCallback(){var a;super.disconnectedCallback(),null===(a=this._$Dt)||void 0===a||a.setConnected(!1)}render(){return m0}}y1.finalized=!0,y1._$litElement$=!0,null===(d4=globalThis.litElementHydrateSupport)||void 0===d4||d4.call(globalThis,{LitElement:y1});const t$=globalThis.litElementPolyfillSupport;null==t$||t$({LitElement:y1}),(null!==(f4=globalThis.litElementVersions)&&void 0!==f4?f4:globalThis.litElementVersions=[]).push("3.1.2");const kCe=Oj`@charset "UTF-8";:host,:root{--2:var(--cds-global-layout-space-xs, calc((4 / var(--cds-global-base, 20)) * 1rem));--3:var(--cds-global-layout-space-sm, calc((6 / var(--cds-global-base, 20)) * 1rem));--4:var(--cds-global-layout-space-md, calc((12 / var(--cds-global-base, 20)) * 1rem));--5:var(--cds-global-layout-space-lg, calc((24 / var(--cds-global-base, 20)) * 1rem));--6:var(--cds-global-layout-space-xl, calc((48 / var(--cds-global-base, 20)) * 1rem))}[cds-layout~="wrap:none"]{flex-wrap:nowrap!important}[cds-layout*="align:stretch"]{flex-grow:1!important}[cds-layout*="align:shrink"]{flex-shrink:1!important;flex-grow:0!important}[cds-layout~=horizontal],[cds-layout~=vertical]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;align-items:flex-start}[cds-layout~=horizontal]{flex-direction:row;flex-wrap:wrap;justify-items:flex-start;margin:0;min-height:0}[cds-layout~=horizontal]>[cds-layout~=horizontal],[cds-layout~=horizontal]>[cds-layout~=vertical],[cds-layout~=horizontal]>[cds-text]{width:initial!important}[cds-layout~=horizontal][cds-layout*="align:top"]{align-items:flex-start}[cds-layout~=horizontal][cds-layout*="align:left"]{justify-content:flex-start}[cds-layout~=horizontal][cds-layout*="align:right"]{justify-content:flex-end}[cds-layout~=horizontal][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=horizontal][cds-layout*="align:horizontal-center"]{justify-content:center}[cds-layout~=horizontal][cds-layout*="align:center"]{align-items:center;align-content:center;justify-content:center}[cds-layout~=horizontal][cds-layout*="order:reverse"]{flex-direction:row-reverse}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]{justify-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>*{flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:vertical-center"]{align-self:center}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:horizontal-center"]{margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:top"]{align-self:flex-start}[cds-layout~=horizontal]>[cds-layout*="align:right"]{margin-left:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:left"]{margin-right:auto!important}[cds-layout~=vertical]{flex-direction:column}[cds-layout~=vertical],[cds-layout~=vertical][cds-layout*="align:top"]{justify-content:flex-start}[cds-layout~=vertical][cds-layout*="align:left"]{align-items:flex-start}[cds-layout~=vertical][cds-layout*="align:right"]{align-items:flex-end}[cds-layout~=vertical][cds-layout*="align:vertical-center"]{justify-content:center}[cds-layout~=vertical][cds-layout*="align:horizontal-center"]{align-items:center}[cds-layout~=vertical][cds-layout*="align:center"]{align-items:center;justify-content:center}[cds-layout~=vertical][cds-layout*="order:reverse"]{flex-direction:column-reverse}[cds-layout~=vertical][cds-layout*="align:horizontal-stretch"]{align-items:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]{align-items:stretch;justify-content:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:vertical-center"]{margin-top:auto;margin-bottom:auto}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:horizontal-center"]{align-self:center}[cds-layout~=vertical]>[cds-layout*="align:top"]{margin-bottom:auto!important}[cds-layout~=vertical]>[cds-layout*="align:right"]{margin-left:auto}[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}[cds-layout~=grid]{display:grid;align-items:start;align-content:start;grid-template-columns:repeat(var(--cds-global-layout-grid-cols,12),1fr);width:100%}[cds-layout~=grid][cds-layout*=rows]{grid-template-rows:repeat(12,auto)}[cds-layout~=grid]>[cds-layout*=row]{align-self:stretch}[cds-layout~=grid][cds-layout*="align:top"]{align-content:start}[cds-layout~=grid][cds-layout*="align:right"]{justify-content:end}[cds-layout~=grid][cds-layout*="align:left"]{justify-content:start}[cds-layout~=grid][cds-layout*="align:horizontal-stretch"]{justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=grid][cds-layout*="align:horizontal-center"]{justify-items:center;justify-content:center}[cds-layout~=grid][cds-layout*="align:center"]{align-items:center;align-content:center;justify-items:center;justify-content:center}[cds-layout~="display:screen-reader-only"]{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);padding:0;border:0;height:1px;width:1px;overflow:hidden;white-space:nowrap;top:0;left:0;display:block!important}[cds-layout*="gap:none"]{gap:0}[cds-layout*="gap:xs"]{gap:var(--2)}[cds-layout*="gap:sm"]{gap:var(--3)}[cds-layout*="gap:md"]{gap:var(--4)}[cds-layout*="gap:lg"]{gap:var(--5)}[cds-layout~="p:none"]{padding:0!important}[cds-layout~="p:xs"]{padding:var(--2)!important}[cds-layout~="p:sm"]{padding:var(--3)!important}[cds-layout~="p:md"]{padding:var(--4)!important}[cds-layout~="m:md"]{margin:var(--4)!important}[cds-layout~="p:lg"]{padding:var(--5)!important}[cds-layout~="p-y:xs"]{padding-top:var(--2)!important;padding-bottom:var(--2)!important}[cds-layout~="p-x:sm"]{padding-left:var(--3)!important;padding-right:var(--3)!important}[cds-layout~="p-y:sm"]{padding-top:var(--3)!important;padding-bottom:var(--3)!important}[cds-layout~="p-x:md"]{padding-left:var(--4)!important;padding-right:var(--4)!important}[cds-layout~="p-y:md"]{padding-top:var(--4)!important;padding-bottom:var(--4)!important}[cds-layout~="p-x:lg"]{padding-left:var(--5)!important;padding-right:var(--5)!important}[cds-layout~="p-l:md"]{padding-left:var(--4)!important}[cds-layout~="p-t:lg"]{padding-top:var(--5)!important}[cds-layout~="p-b:lg"]{padding-bottom:var(--5)!important}@media (min-width:992px){[cds-layout*="gap@md:lg"]{gap:var(--5)}[cds-layout~="p@md:lg"]{padding:var(--5)!important}[cds-layout~="m@md:xl"]{margin:var(--6)!important}}[cds-layout~=fill]{width:100%!important}*,:after,:before{box-sizing:border-box}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>::slotted(*),[cds-layout~=horizontal][cds-layout*="align:stretch"]>::slotted(*),[cds-layout~=vertical][cds-layout*="align:stretch"]>::slotted(*){flex-grow:1}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:left"]),[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}@media (min-width:576px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto}}@media (min-width:768px){[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto}}@media (min-width:992px){[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:left"]){margin-right:auto}}@media (min-width:1200px){[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto}}@media (min-width:1440px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto}}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:left"]){margin-right:auto!important}@media (min-width:576px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto!important}}@media (min-width:768px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto!important}}@media (min-width:992px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:left"]){margin-right:auto!important}}@media (min-width:1200px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto!important}}@media (min-width:1440px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto!important}}[cds-text]{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);margin-top:0;margin-bottom:0}[cds-text][cds-layout~=grid]::after,[cds-text][cds-layout~=grid]::before,[cds-text][cds-layout~=horizontal]::after,[cds-text][cds-layout~=horizontal]::before,[cds-text][cds-layout~=vertical]::after,[cds-text][cds-layout~=vertical]::before{display:none}[cds-text*=display],[cds-text*=section],[cds-text*=title]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);color:var(--cds-global-typography-color-400,var(--cds-global-color-construction-900,#21333b))}[cds-text*=body],[cds-text*=message],[cds-text*=secondary]{color:var(--cds-global-typography-color-500,var(--cds-global-color-black,#000))}[cds-text*=inline]{width:auto!important;display:inline-block!important}[cds-text*=display]{font-size:var(--cds-global-typography-display-font-size,calc((40 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-display-font-weight,400);line-height:var(--cds-global-typography-display-line-height,1.1em);letter-spacing:var(--cds-global-typography-display-letter-spacing,-.0125em)}[cds-text*=display]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) + .037em)}[cds-text*=display]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) - .044em)}[cds-text*=title]{font-size:var(--cds-global-typography-title-font-size,calc((24 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-title-font-weight,400);line-height:var(--cds-global-typography-title-line-height,1.16667em);letter-spacing:var(--cds-global-typography-title-letter-spacing,-.008333em)}[cds-text*=title]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) + .037em)}[cds-text*=title]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) - .044em)}[cds-text*=section]{font-size:var(--cds-global-typography-section-font-size,calc((20 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-section-font-weight,400);line-height:var(--cds-global-typography-section-line-height,1.2em);letter-spacing:var(--cds-global-typography-section-letter-spacing,-.01em)}[cds-text*=section]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) + .037em)}[cds-text*=section]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) - .044em)}[cds-text*=body]{font-weight:var(--cds-global-typography-body-font-weight,400);font-size:var(--cds-global-typography-body-font-size,calc((14 / var(--cds-global-base,20)) * 1rem));letter-spacing:var(--cds-global-typography-body-letter-spacing,-.014286em);line-height:var(--cds-global-typography-body-line-height,1.42857em)}[cds-text*=body]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) + .1em)}[cds-text*=body]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) - .044em)}[cds-text*=message]{font-size:var(--cds-global-typography-message-font-size,calc((16 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-message-font-weight,calc((400 / var(--cds-global-base,20)) * 1rem));line-height:var(--cds-global-typography-message-line-height,1.25em);letter-spacing:var(--cds-global-typography-message-letter-spacing,-.0125em)}[cds-text*=message]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=message]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=secondary]{font-size:var(--cds-global-typography-secondary-font-size,calc((13 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-secondary-font-weight,400);line-height:var(--cds-global-typography-secondary-line-height,1.23077em);letter-spacing:var(--cds-global-typography-secondary-letter-spacing,-.007692em)}[cds-text*=secondary]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) + .037em)}[cds-text*=secondary]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) - .044em)}[cds-text~=link]{color:var(--cds-global-typography-link-color,var(--cds-global-color-blue-800,#00608a))!important;text-decoration:underline!important;line-height:inherit!important;font-size:inherit!important}[cds-text~=link]:hover{color:var(--cds-global-typography-link-color-hover,var(--cds-global-color-blue-900,#004b6b))!important}[cds-text~=link]:visited:not([cds-text~=static]){color:var(--cds-global-typography-link-color-visited,var(--cds-global-color-lavender-600,#3b40ce))!important}[cds-text~=link]:visited:not([cds-text~=static]):hover{color:var(--cds-global-typography-link-color-visited-hover,var(--cds-global-color-lavender-700,#2429c2))!important}[cds-divider]{display:block;height:var(--cds-alias-object-border-width-100,calc((1 / var(--cds-global-base,20)) * 1rem));overflow:hidden;box-shadow:var(--cds-alias-object-border-color,var(--cds-global-color-construction-200,#cbd4d8)) 0 0 0 var(--cds-alias-object-border-width-100,calc((1 / var(--cds-global-base,20)) * 1rem)) inset}[cds-text~=light]{font-weight:var(--cds-global-typography-font-weight-light,300)!important}[cds-text~=left]{text-align:left!important}[cds-text~=right]{text-align:right!important}[cds-text~=center]{text-align:center!important}[cds-text~=lhe]{padding:.05px 0}[cds-text~=lhe]::before{content:"";margin-top:-.124em;display:block;height:0}[cds-text~=lhe]::after{content:"";margin-bottom:-.221em;display:block;height:0}[cds-text*=h2],[cds-text*=h3]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);font-size:1.4rem;font-weight:200;color:#333;line-height:1.7143em;letter-spacing:-.017857em}[cds-text*=h2]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.7143em - 1em)/ 2))*-1) + .037em)}[cds-text*=h2]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.7143em - 1em)/ 2))*-1) - .044em)}[cds-text*=h3]{font-size:1.1rem;line-height:1.0909em;letter-spacing:-.013636em}[cds-text*=h3]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.0909em - 1em)/ 2))*-1) + .037em)}[cds-text*=h3]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.0909em - 1em)/ 2))*-1) - .044em)}:host{all:initial;display:block;visibility:inherit;font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);contain:layout;box-sizing:border-box!important;-webkit-appearance:none!important}*,:after,:before{box-sizing:inherit!important}slot{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);display:contents!important}::slotted(*){font-family:inherit;box-sizing:inherit}::slotted(*)::placeholder{color:var(--cds-global-typography-color-200,var(--cds-global-color-construction-600,#4f6169))}:host([_is-anchor]),:host([role=button]){cursor:pointer!important}:host([_is-anchor]) ::slotted(*),:host([role=button]) ::slotted(*){cursor:pointer!important}:host([role=button][disabled]){cursor:not-allowed!important}:host([role=button][disabled]) ::slotted(*){cursor:not-allowed!important;pointer-events:none}:host([hidden]),[hidden]{display:none!important}:host([hidden*=false]){display:block!important}:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:var(--cds-alias-object-interaction-outline,Highlight solid 2px);outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}@media (-webkit-min-device-pixel-ratio:0){:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:var(--cds-alias-object-interaction-outline-webkit,5px auto -webkit-focus-ring-color)}}`,n$=a0(function(a,o){return null!=o&&o.constructor===a||o instanceof a});function yS(l,a){return Object.prototype.hasOwnProperty.call(a,l)}var i$=Object.prototype.toString;const r$=function(){return"[object Arguments]"===i$.call(arguments)?function(a){return"[object Arguments]"===i$.call(a)}:function(a){return yS("callee",a)}}(),PCe=Array.isArray||function(a){return null!=a&&a.length>=0&&"[object Array]"===Object.prototype.toString.call(a)};var FCe=Ou(function(a){return null!=a&&"function"==typeof a["fantasy-land/empty"]?a["fantasy-land/empty"]():null!=a&&null!=a.constructor&&"function"==typeof a.constructor["fantasy-land/empty"]?a.constructor["fantasy-land/empty"]():null!=a&&"function"==typeof a.empty?a.empty():null!=a&&null!=a.constructor&&"function"==typeof a.constructor.empty?a.constructor.empty():PCe(a)?[]:tG(a)?"":function OCe(l){return"[object Object]"===Object.prototype.toString.call(l)}(a)?{}:r$(a)?function(){return arguments}():void 0});const RCe=FCe;function s$(l){for(var o,a=[];!(o=l.next()).done;)a.push(o.value);return a}function o$(l,a,o){for(var c=0,u=o.length;c<u;){if(l(a,o[c]))return!0;c+=1}return!1}const p4="function"==typeof Object.is?Object.is:function LCe(l,a){return l===a?0!==l||1/l==1/a:l!=l&&a!=a};var BCe=!{toString:null}.propertyIsEnumerable("toString"),a$=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],l$=function(){return arguments.propertyIsEnumerable("length")}(),VCe=function(a,o){for(var c=0;c<a.length;){if(a[c]===o)return!0;c+=1}return!1};const c$=Ou("function"!=typeof Object.keys||l$?function(a){if(Object(a)!==a)return[];var o,c,u=[],h=l$&&r$(a);for(o in a)yS(o,a)&&(!h||"length"!==o)&&(u[u.length]=o);if(BCe)for(c=a$.length-1;c>=0;)yS(o=a$[c],a)&&!VCe(u,o)&&(u[u.length]=o),c-=1;return u}:function(a){return Object(a)!==a?[]:Object.keys(a)}),u$=Ou(function(a){return null===a?"Null":void 0===a?"Undefined":Object.prototype.toString.call(a).slice(8,-1)});function h$(l,a,o,c){var u=s$(l);function d(f,p){return g4(f,p,o.slice(),c.slice())}return!o$(function(f,p){return!o$(d,p,f)},s$(a),u)}function g4(l,a,o,c){if(p4(l,a))return!0;var u=u$(l);if(u!==u$(a)||null==l||null==a)return!1;if("function"==typeof l["fantasy-land/equals"]||"function"==typeof a["fantasy-land/equals"])return"function"==typeof l["fantasy-land/equals"]&&l["fantasy-land/equals"](a)&&"function"==typeof a["fantasy-land/equals"]&&a["fantasy-land/equals"](l);if("function"==typeof l.equals||"function"==typeof a.equals)return"function"==typeof l.equals&&l.equals(a)&&"function"==typeof a.equals&&a.equals(l);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof l.constructor&&"Promise"===function NCe(l){var a=String(l).match(/^function (\w*)/);return null==a?"":a[1]}(l.constructor))return l===a;break;case"Boolean":case"Number":case"String":if(typeof l!=typeof a||!p4(l.valueOf(),a.valueOf()))return!1;break;case"Date":if(!p4(l.valueOf(),a.valueOf()))return!1;break;case"Error":return l.name===a.name&&l.message===a.message;case"RegExp":if(l.source!==a.source||l.global!==a.global||l.ignoreCase!==a.ignoreCase||l.multiline!==a.multiline||l.sticky!==a.sticky||l.unicode!==a.unicode)return!1}for(var h=o.length-1;h>=0;){if(o[h]===l)return c[h]===a;h-=1}switch(u){case"Map":return l.size===a.size&&h$(l.entries(),a.entries(),o.concat([l]),c.concat([a]));case"Set":return l.size===a.size&&h$(l.values(),a.values(),o.concat([l]),c.concat([a]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var d=c$(l);if(d.length!==c$(a).length)return!1;var f=o.concat([l]),p=c.concat([a]);for(h=d.length-1;h>=0;){var g=d[h];if(!yS(g,a)||!g4(a[g],l[g],f,p))return!1;h-=1}return!0}const WCe=a0(function(a,o){return g4(a,o,[],[])}),jCe=Ou(function(a){return null!=a&&WCe(a,RCe(a))});function m4(l){return l0(l)||jCe(l)}function f$(l,a){return l!==a}function m$(l,...a){return a.forEach(([o,c])=>{l.style[o]=c}),l}function _4(l){return`calc((${l} / var(--cds-global-base)) * 1rem)`}const exe=(l,a)=>"method"===a.kind&&a.descriptor&&!("value"in a.descriptor)?hx(Qo({},a),{finisher(o){o.createProperty(a.key,l)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:a.key,initializer(){"function"==typeof a.initializer&&(this[a.key]=a.initializer.call(this))},finisher(o){o.createProperty(a.key,l)}};function v$(l){return(a,o)=>void 0!==o?void a.constructor.createProperty(o,l):exe(l,a)}function _$(l,a){switch(a&&a.type){case Array:case Object:return Qo({reflect:!1},a);case String:return Qo({reflect:!0,attribute:xp(l),converter:{toAttribute:o=>o||null}},a);case Number:return Qo({reflect:!0,attribute:xp(l)},a);case Boolean:return Qo({reflect:!0,attribute:xp(l),converter:{toAttribute:o=>o?"":null,fromAttribute:o=>"false"!==o&&null!==o}},a);case Date:return Qo({reflect:!1,converter:{fromAttribute:o=>new Date(o)}},a);default:return Qo({},a)}}function qd(l){return(a,o)=>(function txe(l,a,o){const c=l.firstUpdated;l.firstUpdated=function(u){if(o&&o.required&&m4(this[a])){const h=o.requiredMessage||function(d="warning",f,p){const g=p.toLocaleLowerCase();return`${uG(d)}: ${f} is required to use ${g} component. Set the JS Property or HTML Attribute.\n\n`+(sG()?`Angular: <${g} [${f}]="..."></${g}>\n`:"")+(aG()?`Vue: <${g} :${f}="..."></${g}>\n`:"")+(oG()?`React: <${function U1e(l){return uG(function z1e(l){return l.split("-").map((a,o)=>o?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():a).join("")}(l))}(g)} ${m=f,m.startsWith("aria")?xp(m):m}={...} />\n`:"")+`HTML: <${g} ${xp(f)}="..."></${g}>\nJavaScript: document.querySelector('${g}').${f} = '...';\n\n`;var m}(o.required,a,this.tagName);if("error"===o.required)throw Error(h);r1.warn(h,this)}c&&c.call(this,u)}}(a,o,l),v$(_$(o,l))(a,o))}const oxe=Oj`@keyframes fadeInAndOut{0%,to{opacity:0}75%{opacity:1}}:host{--color:currentColor;display:inline-block;height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));margin:0;vertical-align:middle;fill:var(--color);color:var(--color);contain:strict;cursor:inherit}svg{display:block}:host([size*=xs]){height:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem))}:host([size*=sm]){height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem))}:host([size*=md]){height:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem))}:host([size*=lg]){height:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem))}:host([size*=xl]){height:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem));min-height:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem));min-width:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem))}:host([size*=xxl]){height:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)));width:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)));min-height:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)));min-width:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)))}:host([size*=fit]){height:auto;width:auto;contain:layout}:host([status=success]){--color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([status=danger]){--color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([status=warning]){--color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([status=info]){--color:var(--cds-alias-status-info-shade, var(--cds-global-color-blue-800, #00608a))}:host([inverse]){--color:var(--cds-global-color-construction-200, #cbd4d8)}:host([direction=up]){transform:rotate(0)}:host([direction=down]){transform:rotate(180deg)}:host([direction=right]){transform:rotate(90deg)}:host([direction=left]){transform:rotate(270deg)}:host([flip=horizontal]){transform:scale(-1) rotateX(180deg)}:host([flip=vertical]){transform:scale(-1) rotateY(180deg)}.alert,.badge{fill:var(--badge-color,var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200)))}:host([badge=success]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge=danger]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge*=warning]){--badge-color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([badge=inherit]){--badge-color:currentColor}:host([badge=info]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([badge=inherit-triangle]){--badge-color:currentColor}:host([badge][inverse]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge=success][inverse]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge*=warning][inverse]){--badge-color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([badge*=inherit][inverse]){--badge-color:currentColor}:host([badge=info][inverse]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}.cds-internal-dot-1{animation:fadeInAndOut 1.8s ease-in 0s infinite}.cds-internal-dot-2{animation:fadeInAndOut 1.8s ease-out .422s infinite}.cds-internal-dot-3{animation:fadeInAndOut 1.8s ease-out .675s infinite}@media (prefers-reduced-motion){.cds-internal-dot-1,.cds-internal-dot-2,.cds-internal-dot-3{animation:none}}`;var Lu,l;function y4(l){return l.badge&&("inherit-triangle"===l.badge||"warning-triangle"===l.badge)}(l=Lu||(Lu={})).BadSizeValue="bad-value",l.ValidSizeString="value-is-string",l.ValidNumericString="value-is-numeric",l.NilSizeValue="value-is-nil";class Rc extends y1{constructor(){super(...arguments),this._shape="unknown",this.solid=!1,this.inverse=!1}static get styles(){return[kCe,oxe]}get shape(){return this._shape}set shape(a){if(function ZCe(l,a){return!m4(l)&&f$(l,a)}(a,this._shape)){const o=this._shape;this._shape=a,this.requestUpdate("shape",o)}}get size(){return this._size}set size(a){if(function XCe(l,a){return function qCe(l){return n$(String,l)||l0(l)}(l)&&f$(l,a)}(a,this._size)){const o=this._size;this._size=a,function cxe(l,a){const o=function axe(l){return l0(l)||""===l?Lu.NilSizeValue:function y$(l){return["xxs","xs","sm","md","lg","xl","xxl"].indexOf(l)>-1}(l)?Lu.ValidSizeString:!isNaN(parseInt(l,10))&&l.match(/^[0-9 ]+$/)?Lu.ValidNumericString:Lu.BadSizeValue}(function lxe(l){return l0(l)||""===l?"":function H1e(l,a,o=""){const c=l.split(" "),u=""===o?c.filter(h=>h!==a):c.map(h=>h===a?o:h);return u.length>0?u.join(" "):""}(l,"fit")}(a)),c=!l0(a)&&a.indexOf("fit")>-1;let u="";switch(o){case Lu.ValidNumericString:return u=_4(parseInt(a)),void(c?m$(l,["width","auto"],["height","auto"],["min-width",u],["min-height",u]):m$(l,["width",u],["height",u],["min-width",u],["min-height",u]));case Lu.ValidSizeString:case Lu.NilSizeValue:return void function JCe(l,...a){a.forEach(o=>{l.style[o]=""})}(l,"width","height","min-width","min-height");default:return}}(this,a),this.requestUpdate("size",o)}}updated(a){if(a.has("innerOffset")&&this.innerOffset>0){const o=_4(-1*this.innerOffset),c=`calc(100% + ${_4(2*this.innerOffset)})`;this.svg.style.width=c,this.svg.style.height=c,this.svg.style.margin=`${o} 0 0 ${o}`}}firstUpdated(a){super.firstUpdated(a);let o="unknown";this.subscription=Fc.stateUpdates.subscribe(c=>{"iconRegistry"===c.key&&er.registry[this.shape]&&o!==this.shape&&(o=this.shape,this.requestUpdate("shape"))})}disconnectedCallback(){var a;super.disconnectedCallback(),null===(a=this.subscription)||void 0===a||a.unsubscribe()}render(){return function v4(l){return n$(String,l)}(er.registry[this.shape])?SCe`<span .innerHTML="${er.registry[this.shape]}"></span>`:TCe`<svg .innerHTML="${function hxe(l){var a,o,c,u,h;const d=null!==(a=er.registry[l.shape])&&void 0!==a?a:er.registry.unknown;let f=l.solid&&d.solid?d.solid:d.outline;return l.badge&&!y4(l)&&(f=l.solid?null!==(o=d.solidBadged)&&void 0!==o?o:f:null!==(c=d.outlineBadged)&&void 0!==c?c:f),y4(l)&&(f=l.solid?null!==(u=d.solidAlerted)&&void 0!==u?u:f:null!==(h=d.outlineAlerted)&&void 0!==h?h:f),f}(this)+function uxe(l){let a="";return l.badge&&y4(l)?a='<path d="M26.85 1.14L21.13 11a1.28 1.28 0 001.1 2h11.45a1.28 1.28 0 001.1-2l-5.72-9.86a1.28 1.28 0 00-2.21 0z" class="alert" />':l.badge&&(a='<circle cx="30" cy="6" r="5" class="badge" />'),a}(this)}" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>`}}as([qd({type:String})],Rc.prototype,"shape",null),as([qd({type:String})],Rc.prototype,"size",null),as([qd({type:String})],Rc.prototype,"direction",void 0),as([qd({type:String})],Rc.prototype,"flip",void 0),as([qd({type:Boolean})],Rc.prototype,"solid",void 0),as([qd({type:String})],Rc.prototype,"status",void 0),as([qd({type:Boolean})],Rc.prototype,"inverse",void 0),as([qd({type:String})],Rc.prototype,"badge",void 0),as([function nxe(l){return(a,o)=>{const c=_$(o,l);return c&&(c.reflect=!!(null==l?void 0:l.reflect)&&l.reflect,c.reflect&&!(null==l?void 0:l.attribute)&&(c.attribute="_"+xp(o))),v$(c)(a,o)}}({type:Number})],Rc.prototype,"innerOffset",void 0),as([function rxe(l,a){return(({finisher:l,descriptor:a})=>(o,c)=>{var u;if(void 0===c){const h=null!==(u=o.originalKey)&&void 0!==u?u:o.key,d=null!=a?{kind:"method",placement:"prototype",key:h,descriptor:a(o.key)}:hx(Qo({},o),{key:h});return null!=l&&(d.finisher=function(f){l(f,h)}),d}{const h=o.constructor;void 0!==a&&Object.defineProperty(o,c,a(c)),null==l||l(h,c)}})({descriptor:o=>{const c={get(){var u,h;return null!==(h=null===(u=this.renderRoot)||void 0===u?void 0:u.querySelector(l))&&void 0!==h?h:null},enumerable:!0,configurable:!0};if(a){const u="symbol"==typeof o?Symbol():"__"+o;c.get=function(){var h,d;return void 0===this[u]&&(this[u]=null!==(d=null===(h=this.renderRoot)||void 0===h?void 0:h.querySelector(l))&&void 0!==d?d:null),this[u]}}return c}})}("svg")],Rc.prototype,"svg",void 0),function yCe(l,a){iG()&&nG(["customElements"])&&_Ce(l,a,window.customElements)}("cds-icon",Rc);const Pn=["*"],wxe=["clrLoading",""];function Sxe(l,a){1&l&&(M(0,"span"),me(1,"span",2),E()),2&l&&(P(1),O("@spinner",void 0))}function Txe(l,a){if(1&l){const o=gt();M(0,"span"),M(1,"span",3),ee("@validated.done",function(){Le(o);const u=X();return u.loadingStateChange(u.buttonState.DEFAULT)}),E(),E()}2&l&&(P(1),O("@validated",void 0))}function Dxe(l,a){1&l&&(M(0,"span"),ct(1),E()),2&l&&O("@defaultButton",void 0)}function Mxe(l,a){1&l&&me(0,"label")}const Exe=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],kxe=["[clrCheckbox],[clrToggle]","label"];function Axe(l,a){1&l&&me(0,"label")}function Ixe(l,a){1&l&&ct(0,2,["*ngIf","showHelper"])}function Pxe(l,a){1&l&&me(0,"cds-icon",5)}function Oxe(l,a){1&l&&me(0,"cds-icon",6)}function Fxe(l,a){1&l&&ct(0,3,["*ngIf","showInvalid"])}function Rxe(l,a){1&l&&ct(0,4,["*ngIf","showValid"])}const Nxe=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],Lxe=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function iwe(l,a){1&l&&me(0,"label")}function rwe(l,a){1&l&&me(0,"cds-icon",5)}function swe(l,a){1&l&&me(0,"cds-icon",6)}function owe(l,a){1&l&&ct(0,2,["*ngIf","showHelper"])}function awe(l,a){1&l&&ct(0,3,["*ngIf","showInvalid"])}function lwe(l,a){1&l&&ct(0,4,["*ngIf","showValid"])}const cwe=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],uwe=["label","[clrInput]","clr-control-helper","clr-control-error","clr-control-success"];function hwe(l,a){1&l&&me(0,"label")}const dwe=[[["","clrRadio",""]],[["label"]]],fwe=["[clrRadio]","label"];function pwe(l,a){1&l&&me(0,"label")}function gwe(l,a){1&l&&ct(0,2,["*ngIf","showHelper"])}function mwe(l,a){1&l&&me(0,"cds-icon",5)}function vwe(l,a){1&l&&me(0,"cds-icon",6)}function _we(l,a){1&l&&ct(0,3,["*ngIf","showInvalid"])}function ywe(l,a){1&l&&ct(0,4,["*ngIf","showValid"])}const bwe=[[["label"]],[["clr-radio-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],Cwe=["label","clr-radio-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function xwe(l,a){1&l&&me(0,"label")}function wwe(l,a){1&l&&me(0,"cds-icon",5)}function Swe(l,a){1&l&&me(0,"cds-icon",6)}function Twe(l,a){1&l&&ct(0,2,["*ngIf","showHelper"])}function Dwe(l,a){1&l&&ct(0,3,["*ngIf","showInvalid"])}function Mwe(l,a){1&l&&ct(0,4,["*ngIf","showValid"])}const Ewe=[[["label"]],[["","clrTextarea",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],kwe=["label","[clrTextarea]","clr-control-helper","clr-control-error","clr-control-success"];function bTe(l,a){if(1&l){const o=gt();M(0,"button",11),ee("click",function(){return Le(o),X(2).close()}),me(1,"cds-icon",12),E()}2&l&&et("aria-label",X(2).commonStrings.keys.close)}function CTe(l,a){if(1&l){const o=gt();M(0,"div",1),M(1,"div",2),ee("@fadeDown.done",function(u){return Le(o),X().fadeDone(u)}),M(2,"div",3),ie(3),E(),M(4,"div",4),ct(5),M(6,"div",5),M(7,"div",6),M(8,"div",7),ct(9,1),E(),Z(10,bTe,2,1,"button",8),E(),M(11,"div",9),ct(12,2),E(),ct(13,3),E(),E(),M(14,"div",3),ie(15),E(),E(),M(16,"div",10),ee("click",function(){Le(o);const u=X();return u.staticBackdrop||u.close()}),E(),E()}if(2&l){const o=X();P(1),At("modal-sm","sm"==o.size)("modal-lg","lg"==o.size)("modal-xl","xl"==o.size),O("@fadeDown",o.skipAnimation),et("aria-hidden",!o._open)("aria-labelledby",o.modalId),P(2),en(o.commonStrings.keys.modalContentStart),P(5),rw("id",o.modalId),P(2),O("ngIf",o.closable),P(5),en(o.commonStrings.keys.modalContentEnd),P(1),O("@fade",void 0)}}const xTe=[[["",8,"modal-nav"]],[["",8,"modal-title"]],[["",8,"modal-body"]],[["",8,"modal-footer"]]],wTe=[".modal-nav",".modal-title",".modal-body",".modal-footer"];function zTe(l,a){if(1&l&&(pr(0),ie(1),gr()),2&l){const o=X(3);P(1),en(o.commonStrings.keys.danger)}}function UTe(l,a){if(1&l&&(M(0,"div",14),Z(1,zTe,2,1,"ng-container",0),E()),2&l){const o=X().$implicit,c=X();P(1),O("ngIf",o.status===c.AccordionStatus.Error)}}function HTe(l,a){if(1&l&&(pr(0),ie(1),gr()),2&l){const o=X(2);P(1),en(o.commonStrings.keys.danger)}}function WTe(l,a){if(1&l&&(pr(0),ie(1),gr()),2&l){const o=X(2);P(1),en(o.commonStrings.keys.success)}}function GTe(l,a){if(1&l){const o=gt();M(0,"div",15),ee("@toggle.done",function(){Le(o);const u=X().$implicit;return X().collapsePanelOnAnimationDone(u)}),M(1,"div",16),ct(2,2),E(),E()}2&l&&O("@toggle",void 0)}function jTe(l,a){if(1&l){const o=gt();pr(0),Z(1,UTe,2,1,"div",1),M(2,"div",2),M(3,"div",3),M(4,"button",4,5),ee("click",function(){return Le(o),X().togglePanel()}),Ry(6,"async"),M(7,"span",6),Z(8,HTe,2,1,"ng-container",0),Z(9,WTe,2,1,"ng-container",0),E(),M(10,"span",7),me(11,"cds-icon",8),me(12,"span",9),me(13,"cds-icon",10),me(14,"cds-icon",11),E(),ct(15),ct(16,1),E(),E(),M(17,"div",12),Z(18,GTe,3,1,"div",13),E(),E(),gr()}if(2&l){const o=a.$implicit,c=X();let u;P(1),O("ngIf",o.status!==c.AccordionStatus.Inactive),P(1),O("ngClass",c.getPanelStateClasses(o)),P(2),At("clr-accordion-header-has-description",(null==(u=Ny(6,16,c.accordionDescription.changes))?null:u.length)||c.accordionDescription.length),O("id",c.getAccordionHeaderId(o.templateId))("disabled",c.isAccordion&&o.disabled),et("aria-disabled",!c.isAccordion&&o.disabled)("aria-controls",c.getAccordionContentId(o.templateId))("aria-expanded",o.open),P(4),O("ngIf",o.status===c.AccordionStatus.Error),P(1),O("ngIf",o.status===c.AccordionStatus.Complete),P(8),O("@skipInitialRender",void 0)("id",c.getAccordionContentId(o.templateId)),et("aria-hidden",!o.open)("aria-labelledby",c.getAccordionHeaderId(o.templateId)),P(1),O("ngIf",o.open)}}const C$=[[["clr-accordion-title"],["clr-step-title"]],[["clr-accordion-description"],["clr-step-description"]],"*"],x$=["clr-accordion-title, clr-step-title","clr-accordion-description, clr-step-description","*"];function eDe(l,a){if(1&l&&(M(0,"span"),ie(1),E()),2&l){const o=X();P(1),en(o.displayValue)}}let Ts=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=mt({type:l,selectors:[["clr-icon"]]}),l})(),rr=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=mt({type:l,selectors:[["cds-icon"]]}),l})(),sr=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})();var Vi=(()=>(function(l){l[l.START=0]="START",l[l.CENTER=.5]="CENTER",l[l.END=1]="END"}(Vi||(Vi={})),Vi))(),fo=(()=>(function(l){l[l.VERTICAL=0]="VERTICAL",l[l.HORIZONTAL=1]="HORIZONTAL"}(fo||(fo={})),fo))(),Yn=(()=>(function(l){l.ArrowLeft="ArrowLeft",l.ArrowUp="ArrowUp",l.ArrowRight="ArrowRight",l.ArrowDown="ArrowDown",l.Backspace="Backspace",l.Tab="Tab",l.Enter="Enter",l.Escape="Escape",l.Space="Space",l.Home="Home",l.End="End"}(Yn||(Yn={})),Yn))(),Nc=(()=>(function(l){l.ArrowUp="Up",l.ArrowDown="Down",l.ArrowRight="Right",l.ArrowLeft="Left",l.Space="Spacebar",l.Escape="Esc",l.Home="Home",l.End="End",l.Enter="Enter",l.Tab="Tab"}(Nc||(Nc={})),Nc))();function b1(l){return l===Yn.ArrowUp||l===Nc.ArrowUp?Yn.ArrowUp:l===Yn.ArrowDown||l===Nc.ArrowDown?Yn.ArrowDown:l===Yn.ArrowRight||l===Nc.ArrowRight?Yn.ArrowRight:l===Yn.ArrowLeft||l===Nc.ArrowLeft?Yn.ArrowLeft:l===Yn.Space||l===Nc.Space?Yn.Space:l===Yn.Escape||l===Nc.Escape?Yn.Escape:l}let lr=(()=>{class l{constructor(){this._open=!1,this._openChange=new pt,this._openEventChange=new pt,this._popoverAligned=new pt}get openChange(){return this._openChange.asObservable()}set openEvent(o){this._openEvent=o,this._openEventChange.next(o)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(o){this._open!==(o=!!o)&&(this._open=o,this._openChange.next(o))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(o){(function b4(l){const a=b1(l.key);(a===Yn.ArrowUp||a===Yn.ArrowDown||a===Yn.ArrowLeft||a===Yn.ArrowRight)&&l.preventDefault()})(o),this.openEvent=o,this.open=!this.open}get popoverAligned(){return this._popoverAligned.asObservable()}popoverAlignedEmit(o){this._popoverAligned.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),S1=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[]]}),l})();class T1{}var Jr=(()=>(function(l){l[l.DEFAULT=0]="DEFAULT",l[l.LOADING=1]="LOADING",l[l.SUCCESS=2]="SUCCESS",l[l.ERROR=3]="ERROR"}(Jr||(Jr={})),Jr))();let C4=(()=>{class l{constructor(o){this.listener=o,this._loadingState=Jr.DEFAULT}get loadingState(){return this._loadingState}set loadingState(o){!0===o?o=Jr.LOADING:o||(o=Jr.DEFAULT),o!==this._loadingState&&(this._loadingState=o,this.listener&&this.listener.loadingStateChange(o))}ngOnDestroy(){this.loadingState=Jr.DEFAULT}}return l.\u0275fac=function(o){return new(o||l)(R(T1,8))},l.\u0275dir=mt({type:l,selectors:[["","clrLoading",""]],inputs:{loadingState:["clrLoading","loadingState"]}}),l})(),oDe=0;const eo=new Wn("UNIQUE_ID"),ca={provide:eo,useFactory:function aDe(){return"clr-id-"+oDe++}};var Va=(()=>(function(l){l[l.BEFORE=-1]="BEFORE",l[l.AFTER=1]="AFTER"}(Va||(Va={})),Va))();class za{}za["top-right"]={axis:fo.VERTICAL,side:Va.BEFORE,anchor:Vi.END,content:Vi.END},za["top-left"]={axis:fo.VERTICAL,side:Va.BEFORE,anchor:Vi.START,content:Vi.START},za["bottom-right"]={axis:fo.VERTICAL,side:Va.AFTER,anchor:Vi.END,content:Vi.END},za["bottom-left"]={axis:fo.VERTICAL,side:Va.AFTER,anchor:Vi.START,content:Vi.START},za["right-top"]={axis:fo.HORIZONTAL,side:Va.AFTER,anchor:Vi.CENTER,content:Vi.END},za["right-bottom"]={axis:fo.HORIZONTAL,side:Va.AFTER,anchor:Vi.START,content:Vi.START},za["left-top"]={axis:fo.HORIZONTAL,side:Va.BEFORE,anchor:Vi.CENTER,content:Vi.END},za["left-bottom"]={axis:fo.HORIZONTAL,side:Va.BEFORE,anchor:Vi.START,content:Vi.START};const lDe={open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Show or hide columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",filterItems:"Filter items",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Filter dialog",datagridFilterDialogAriaLabel:"Toggle column filter",columnSeparatorAriaLabel:"Column resize handle",columnSeparatorDescription:"Use left or right key to resize the column",alertCloseButtonAriaLabel:"Close alert",datepickerToggle:"Toggle datepicker",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",stackViewChanged:"Value changed.",verticalNavGroupToggle:"Toggle vertical navigation group",verticalNavToggle:"Toggle vertical navigation",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",comboboxDelete:"Delete selected option",comboboxSearching:'Searching for matches for "{INPUT}"',comboboxSelection:"Selection",comboboxSelected:"Selected",comboboxNoResults:"No results",comboboxOpen:"Show options",dategridExpandableBeginningOf:"Beginning of",dategridExpandableEndOf:"End of",dategridExpandableRowContent:"Expandable row content",dategridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button"};let Ki=(()=>{class l{constructor(){this._strings=lDe}localize(o){this._strings=Object.assign(Object.assign({},this._strings),o)}get keys(){return this._strings}parse(o,c={}){const u=Object.keys(c);let h=o;return u.length&&u.forEach(d=>{h=h.replace(`{${d}}`,c[d])}),h}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),cDe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,S1]]}),l})(),w4=(()=>{class l{constructor(o,c){this.el=o,this.renderer=c,this.buttonState=Jr,this.state=Jr.DEFAULT,this.clrLoadingChange=new St(!1)}loadingStateChange(o){if(o!==this.state){switch(this.state=o,o){case Jr.DEFAULT:this.renderer.removeStyle(this.el.nativeElement,"width"),this.renderer.removeStyle(this.el.nativeElement,"transform"),this.disabled||this.renderer.removeAttribute(this.el.nativeElement,"disabled");break;case Jr.LOADING:this.setExplicitButtonWidth(),this.renderer.setStyle(this.el.nativeElement,"transform","translatez(0)"),this.renderer.setAttribute(this.el.nativeElement,"disabled","");break;case Jr.SUCCESS:this.setExplicitButtonWidth();break;case Jr.ERROR:this.loadingStateChange(Jr.DEFAULT)}this.clrLoadingChange.emit(o)}}setExplicitButtonWidth(){if(this.el.nativeElement&&this.el.nativeElement.getBoundingClientRect){const o=this.el.nativeElement.getBoundingClientRect();this.renderer.setStyle(this.el.nativeElement,"width",`${o.width}px`)}}}return l.\u0275fac=function(o){return new(o||l)(R(bn),R(di))},l.\u0275cmp=Ye({type:l,selectors:[["button","clrLoading",""]],hostVars:1,hostBindings:function(o,c){2&o&&et("disabled",c.disabled?"":null)},inputs:{disabled:"disabled"},outputs:{clrLoadingChange:"clrLoadingChange"},features:[un([{provide:T1,useExisting:l}])],attrs:wxe,ngContentSelectors:Pn,decls:4,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"spinner","spinner-inline"],[1,"spinner","spinner-inline","spinner-check"]],template:function(o,c){1&o&&(Kt(),pr(0,0),Z(1,Sxe,2,1,"span",1),Z(2,Txe,2,1,"span",1),Z(3,Dxe,2,1,"span",1),gr()),2&o&&(O("ngSwitch",c.state),P(1),O("ngSwitchCase",c.buttonState.LOADING),P(1),O("ngSwitchCase",c.buttonState.SUCCESS),P(1),O("ngSwitchCase",c.buttonState.DEFAULT))},directives:[Pw,C9],encapsulation:2,data:{animation:[ul("defaultButton",[Fs(":enter",[Ai({opacity:0}),wo("200ms 100ms ease-in",Ai({opacity:1}))]),Fs(":leave",[Ai({opacity:0})])]),ul("spinner",[Fs(":enter",[Ai({opacity:0}),wo("200ms 100ms ease-in",Ai({opacity:1}))]),Fs(":leave",[Ai({opacity:1}),wo("100ms ease-out",Ai({opacity:0}))])]),ul("validated",[Fs(":enter",[wo("600ms",Cbe([Ai({transform:"scale(0,0)",offset:0}),Ai({opacity:1,offset:.2}),Ai({transform:"scale(1.2,1.2)",offset:.4}),Ai({transform:"scale(.9,.9)",offset:.6}),Ai({transform:"scale(1,1)",offset:1})]))]),Fs(":leave",[Ai({opacity:1}),wo("100ms ease-out",Ai({opacity:0}))])])]}}),l})(),uDe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),hDe=(()=>{class l{constructor(){er.addIcons(gG)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[uDe,cDe]}),l})(),dDe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["ng-component"]],decls:0,vars:0,template:function(o,c){},encapsulation:2}),l})(),bS=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({}),l})();class CS{constructor(a,o,c=0){if(this.injector=o.injector,!this.injector.get(a,null)){const u=this.injector.get(kh),h=this.injector.get(bn);o.createComponent(u.resolveComponentFactory(dDe));const d=u.resolveComponentFactory(a),f=[];f[c]=[h.nativeElement];const p=o.createComponent(d,void 0,void 0,f);o.remove(0),p.instance._dynamic=!0,this.injector=p.injector}}get(a,o){return this.injector.get(a,o)}}let fDe=0,Lc=(()=>{class l{constructor(){this._id="clr-form-control-"+ ++fDe,this._idChange=new Pr(this._id)}get id(){return this._id}set id(o){this._id=o,this._idChange.next(o)}get idChange(){return this._idChange.asObservable()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),nc=(()=>{class l{constructor(){this._controlChanges=new pt,this._helpers=new pt}get controlChanges(){return this._controlChanges.asObservable()}setControl(o){this._controlChanges.next(o)}get helpersChange(){return this._helpers.asObservable()}setHelpers(o){this._helpers.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var Bo=(()=>(function(l){l.NONE="NONE",l.VALID="VALID",l.INVALID="INVALID"}(Bo||(Bo={})),Bo))();let Vu=(()=>{class l{constructor(o){this.ngControlService=o,this.subscriptions=[],this._statusChanges=new Pr(Bo.NONE),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(c=>{c&&(this.control=c,this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.triggerStatusChange()})))}))}get statusChanges(){return this._statusChanges.asObservable()}triggerStatusChange(){if(this.control){const o=Bo[this.control.status];this._statusChanges.next(this.control.touched&&["VALID","INVALID"].includes(o)?o:Bo.NONE)}}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(Ie(nc))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var Bh=(()=>(function(l){l.VERTICAL="vertical",l.HORIZONTAL="horizontal",l.COMPACT="compact"}(Bh||(Bh={})),Bh))();let Vh=(()=>{class l{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=Bh.HORIZONTAL,this.layoutValues=Object.keys(Bh).map(o=>Bh[o]),this._labelSize=2}set labelSize(o){this.labelSizeIsValid(o)&&(this._labelSize=o)}get labelSize(){return this._labelSize}isVertical(){return this.layout===Bh.VERTICAL}isHorizontal(){return this.layout===Bh.HORIZONTAL}isCompact(){return this.layout===Bh.COMPACT}get layoutClass(){return`clr-form-${this.layout}`}isValid(o){return this.layoutValues.indexOf(o)>-1}labelSizeIsValid(o){return Number.isInteger(o)&&o>=this.minLabelSize&&o<=this.maxLabelSize}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),zu=(()=>{class l{constructor(o){this.layoutService=o,this.className=""}controlClass(o=Bo.NONE,c=!1,u=""){const h=[this.className,u];switch(o){case Bo.VALID:h.push("clr-success");break;case Bo.INVALID:h.push("clr-error")}return c&&this.layoutService&&-1===this.className.indexOf("clr-col")&&h.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),h.join(" ").trim()}initControlClass(o,c){c&&c.className&&(this.className=c.className,c.className.split(" ").forEach(h=>{h.startsWith("clr-col")&&o.removeClass(c,h)}))}}return l.\u0275fac=function(o){return new(o||l)(Ie(Vh,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),S4=(()=>{class l{constructor(){this._touched=new pt}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),mDe=0,kp=(()=>{class l{constructor(){this._id="clr-form-container-"+ ++mDe,this._idChange=new Pr(this._id)}get id(){return this._id}set id(o){this._id=o,this._idChange.next(o)}get idChange(){return this._idChange.asObservable()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();let T4=(()=>{class l{constructor(o,c){this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="abstract"}get id(){return this.containerIdService?`${this.containerIdService.id}-${this.controlIdSuffix}`:this.controlIdService?`${this.controlIdService.id}-${this.controlIdSuffix}`:null}}return l.\u0275fac=function(o){return new(o||l)(R(Lc,8),R(kp,8))},l.\u0275dir=mt({type:l}),l})(),D1=(()=>{class l{constructor(o,c,u,h,d,f){this.vcr=o,this.wrapperType=c,this.ngControl=h,this.subscriptions=[],this.index=0,this.renderer=d,this.el=f;try{this.ngControlService=u.get(nc),this.ifControlStateService=u.get(Vu),this.controlClassService=u.get(zu),this.markControlService=u.get(S4)}catch(p){}this.controlClassService&&this.controlClassService.initControlClass(d,f.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.markAsTouched()})),this.ngControlService&&this.subscriptions.push(this.ngControlService.helpersChange.subscribe(p=>{this.setAriaDescribedBy(p)}))}get id(){return this._id}set id(o){this._id=o,this.controlIdService&&(this.controlIdService.id=o)}triggerValidation(){this.ifControlStateService&&(this.ngControl&&!this.ngControl.touched&&this.markAsTouched(),this.ifControlStateService.triggerStatusChange())}markAsTouched(){this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}getProviderFromContainer(o,c){try{return this._containerInjector.get(o,c)}catch(u){return c}}ngOnInit(){this._containerInjector=new CS(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(Lc);try{this.containerIdService=this._containerInjector.get(kp)}catch(o){}this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl)}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}setAriaDescribedBy(o){if(o.show){const c=this.getAriaDescribedById(o);if(null!==c)return void this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",c)}this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}getAriaDescribedById(o){let c="helper";return o.showInvalid?c="error":o.showValid&&(c="success"),this.containerIdService?this.containerIdService.id.concat("-",c):this.controlIdService?this.controlIdService.id.concat("-",c):null}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(Nx),R(or),R(Ba),R(di),R(bn))},l.\u0275dir=mt({type:l,hostVars:1,hostBindings:function(o,c){1&o&&ee("blur",function(){return c.triggerValidation()}),2&o&&Du("id",c.id)},inputs:{id:"id"}}),l})(),Rr=(()=>{class l{constructor(o,c,u,h,d){this.controlIdService=o,this.layoutService=c,this.ngControlService=u,this.renderer=h,this.el=d,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,`clr-col-md-${this.layoutService.labelSize}`)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(o=>this.forAttr=o))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(R(Lc,8),R(Vh,8),R(nc,8),R(di),R(bn))},l.\u0275dir=mt({type:l,selectors:[["label"]],hostVars:1,hostBindings:function(o,c){2&o&&et("for",c.forAttr)},inputs:{forAttr:["for","forAttr"]}}),l})(),vDe=(()=>{class l extends T4{constructor(o,c){super(o,c),this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="success"}}return l.\u0275fac=function(o){return new(o||l)(R(Lc,8),R(kp,8))},l.\u0275cmp=Ye({type:l,selectors:[["clr-control-success"]],hostVars:3,hostBindings:function(o,c){2&o&&(et("id",c.id),At("clr-subtext",!0))},features:[dn],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Kt(),ct(0))},encapsulation:2}),l})(),xS=(()=>{class l extends T4{constructor(o,c){super(o,c),this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="error"}}return l.\u0275fac=function(o){return new(o||l)(R(Lc,8),R(kp,8))},l.\u0275cmp=Ye({type:l,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(o,c){2&o&&(et("id",c.id),At("clr-subtext",!0))},features:[dn],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Kt(),ct(0))},encapsulation:2}),l})(),D4=(()=>{class l extends T4{constructor(o,c){super(o,c),this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="helper"}}return l.\u0275fac=function(o){return new(o||l)(R(Lc,8),R(kp,8))},l.\u0275cmp=Ye({type:l,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(o,c){2&o&&(et("id",c.id),At("clr-subtext",!0))},features:[dn],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Kt(),ct(0))},encapsulation:2}),l})(),M1=(()=>{class l{constructor(o,c,u,h){this.ifControlStateService=o,this.layoutService=c,this.controlClassService=u,this.ngControlService=h,this.subscriptions=[],this._dynamic=!1,this.subscriptions.push(this.ifControlStateService.statusChanges.subscribe(d=>{this.state=d,this.updateHelpers()})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(d=>{this.control=d}))}get showHelper(){return!!this.controlHelperComponent&&(!!this.controlHelperComponent&&this.state===Bo.NONE||!this.controlSuccessComponent&&this.state===Bo.VALID||!this.controlErrorComponent&&this.state===Bo.INVALID)}get showValid(){return this.state===Bo.VALID&&!!this.controlSuccessComponent}get showInvalid(){return this.state===Bo.INVALID&&!!this.controlErrorComponent}ngAfterContentInit(){this.updateHelpers()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}controlClass(){return this.controlClassService.controlClass(this.controlSuccessComponent||this.state!==Bo.VALID?this.state:Bo.NONE,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}updateHelpers(){this.ngControlService&&this.ngControlService.setHelpers({show:this.showInvalid||this.showHelper||this.showValid,showInvalid:this.showInvalid,showHelper:this.showHelper,showValid:this.showValid})}}return l.\u0275fac=function(o){return new(o||l)(R(Vu),R(Vh,8),R(zu),R(nc))},l.\u0275dir=mt({type:l,contentQueries:function(o,c,u){if(1&o&&(jn(u,Rr,5),jn(u,vDe,5),jn(u,xS,5),jn(u,D4,5)),2&o){let h;Vt(h=zt())&&(c.label=h.first),Vt(h=zt())&&(c.controlSuccessComponent=h.first),Vt(h=zt())&&(c.controlErrorComponent=h.first),Vt(h=zt())&&(c.controlHelperComponent=h.first)}}}),l})(),wS=(()=>{class l{constructor(o,c){this.layoutService=o,this.markControlService=c}set labelSize(o){const c=parseInt(o,10)||2;this.layoutService.labelSize=c}markAsTouched(){this.markControlService.markAsTouched()}onFormSubmit(){this.markAsTouched()}}return l.\u0275fac=function(o){return new(o||l)(R(Vh),R(S4))},l.\u0275dir=mt({type:l,selectors:[["","clrForm",""]],contentQueries:function(o,c,u){if(1&o&&jn(u,Rr,5),2&o){let h;Vt(h=zt())&&(c.labels=h)}},hostVars:6,hostBindings:function(o,c){1&o&&ee("submit",function(){return c.onFormSubmit()}),2&o&&At("clr-form",!0)("clr-form-horizontal",c.layoutService.isHorizontal())("clr-form-compact",c.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[un([Vh,S4])]}),l})(),_De=(()=>{class l{constructor(o){this.layoutService=o}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}}return l.\u0275fac=function(o){return new(o||l)(R(Vh))},l.\u0275dir=mt({type:l,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),l})(),po=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr]]}),l})();const M4=new Wn("IS_TOGGLE"),bDe={provide:M4,useFactory:function yDe(){return new Pr(!1)}};let Xd=(()=>{class l{constructor(o){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(o.subscribe(c=>{this.toggle=c}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(R(M4))},l.\u0275cmp=Ye({type:l,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(o,c,u){if(1&o&&jn(u,Rr,7),2&o){let h;Vt(h=zt())&&(c.label=h.first)}},hostVars:4,hostBindings:function(o,c){2&o&&At("clr-checkbox-wrapper",!c.toggle)("clr-toggle-wrapper",c.toggle)},features:[un([Lc,bDe])],ngContentSelectors:kxe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(o,c){1&o&&(Kt(Exe),ct(0),ct(1,1),Z(2,Mxe,1,0,"label",0)),2&o&&(P(2),O("ngIf",!c.label))},directives:[mn,Rr],encapsulation:2}),l})(),Zd=(()=>{class l extends D1{constructor(o,c,u,h,d,f){super(o,Xd,c,u,h,d),this.toggle=f}ngOnInit(){super.ngOnInit();const o=this.getProviderFromContainer(M4,null);o&&null!==this.toggle&&o.next(!0)}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(or),R(Ba,10),R(di),R(bn),mm("clrToggle"))},l.\u0275dir=mt({type:l,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[dn]}),l})(),SS=(()=>{class l extends M1{constructor(o,c,u,h){super(h,o,c,u),this.layoutService=o,this.controlClassService=c,this.ngControlService=u,this.ifControlStateService=h,this.inline=!1}set clrInline(o){this.inline="string"==typeof o?"false"!==o:!!o}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.checkboxes.length?"group":null}}return l.\u0275fac=function(o){return new(o||l)(R(Vh,8),R(zu),R(nc),R(Vu))},l.\u0275cmp=Ye({type:l,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],contentQueries:function(o,c,u){if(1&o&&jn(u,Zd,5),2&o){let h;Vt(h=zt())&&(c.checkboxes=h)}},hostVars:7,hostBindings:function(o,c){2&o&&(et("role",c.role),At("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid()))},inputs:{clrInline:"clrInline"},features:[un([Vu,nc,zu,kp]),dn],ngContentSelectors:Lxe,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","status","success","shape","check-circle","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["status","success","shape","check-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Kt(Nxe),ct(0),Z(1,Axe,1,0,"label",0),M(2,"div",1),ct(3,1),M(4,"div",2),Z(5,Ixe,1,0,"ng-content",0),Z(6,Pxe,1,0,"cds-icon",3),Z(7,Oxe,1,0,"cds-icon",4),Z(8,Fxe,1,0,"ng-content",0),Z(9,Rxe,1,0,"ng-content",0),E(),E()),2&o&&(P(1),O("ngIf",!c.label&&c.addGrid()),P(1),At("clr-control-inline",c.clrInline),O("ngClass",c.controlClass()),P(3),O("ngIf",c.showHelper),P(1),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid),P(1),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid))},directives:[mn,Rr,Xn,rr],encapsulation:2}),l})(),CDe=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,po,bS],po]}),l})();new Wn("IF_ACTIVE_ID");let ua=(()=>{class l{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new pt}get loading(){return this._loading}set loading(o){(o=!!o)!==this._loading&&(this._loading=o)}get expanded(){return this._expanded}set expanded(o){(o=!!o)!==this._expanded&&(this._expanded=o,this._expandChange.next(o))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(o){this.loading=o===Jr.LOADING}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),E4=(()=>{class l{constructor(o,c,u,h,d){this.template=o,this.container=c,this.el=u,this.renderer=h,this.expand=d,this._expanded=!1,this.expandedChange=new St(!0),this._subscriptions=[],this._subscriptions.push(d.expandChange.subscribe(()=>{this.updateView(),this.expandedChange.emit(this.expand.expanded)}))}get expanded(){return this._expanded}set expanded(o){"boolean"==typeof o&&(this.expand.expanded=o,this._expanded=o)}updateView(){if(!this.expand.expanded||0===this.container.length)if(this.template)this.expand.expanded?this.container.createEmbeddedView(this.template):this.container.clear();else try{this.renderer.setStyle(this.el.nativeElement,"display",this.expand.expanded?null:"none")}catch(o){}}ngOnInit(){this.expand.expandable++,this.updateView()}ngOnDestroy(){this.expand.expandable--,this._subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(R(Qr,8),R(Ti),R(bn),R(di),R(ua))},l.\u0275dir=mt({type:l,selectors:[["","clrIfExpanded",""]],inputs:{expanded:["clrIfExpanded","expanded"]},outputs:{expandedChange:"clrIfExpandedChange"}}),l})(),ic=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),MDe=(()=>{class l{constructor(){this._previousFocusTraps=[]}get current(){return this._current}set current(o){this._previousFocusTraps.push(this._current),this._current=o}get nbFocusTrappers(){return this._previousFocusTraps.length}activatePreviousTrapper(){this._current=this._previousFocusTraps.pop()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Kd=(()=>{class l{constructor(o,c,u,h,d){this.el=o,this.injector=c,this.focusTrapsTracker=u,this.renderer=h,this.platformId=d,this.localFocusEscaped=!1,this._config={strict:!0},this.document=this.injector.get(Wr),this.focusTrapsTracker.current=this}set config(o){this._config=Object.assign(this._config,""===o?{}:o)}onFocusIn(o){const c=this.el.nativeElement;this.focusTrapsTracker.current!==this||!Ji(this.platformId)||this.localFocusEscaped||c.contains(o.target)||(o.target===this.topReboundEl&&c.contains(o.relatedTarget)?(this.focusLastFocusable(),this.focusTrapElIfOutside()):o.target===this.bottomReboundEl&&c.contains(o.relatedTarget)?(this.focusFirstFocusable(),this.focusTrapElIfOutside()):this._config.strict?this.el.nativeElement.focus():this.localFocusEscaped=!0)}createFocusableOffScreenEl(){const o=this.document.createElement("span");return this.renderer.setAttribute(o,"tabindex","0"),this.renderer.addClass(o,"offscreen-focus-rebounder"),o}addReboundEls(){if(Ji(this.platformId)){this.topReboundEl=this.createFocusableOffScreenEl(),this.bottomReboundEl=this.createFocusableOffScreenEl();const o=this.el.nativeElement;this.renderer.insertBefore(o.parentElement,this.topReboundEl,o),o.nextSibling?this.renderer.insertBefore(o.parentNode,this.bottomReboundEl,o.nextSibling):this.renderer.appendChild(o.parentNode,this.bottomReboundEl)}}removeReboundEls(){Ji(this.platformId)&&this.topReboundEl&&this.bottomReboundEl&&(this.parentElement.removeChild(this.topReboundEl),this.parentElement.removeChild(this.bottomReboundEl),delete this.topReboundEl,delete this.bottomReboundEl)}setPreviousFocus(){this.previousActiveElement&&this.previousActiveElement.focus&&this.previousActiveElement.focus()}ngOnInit(){Ji(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.focus())}ngAfterViewInit(){Ji(this.platformId)&&(this.previousActiveElement=this.document.activeElement,this.parentElement=this.el.nativeElement.parentElement),this.addReboundEls()}get potentiallyFocusableEls(){return[...this.el.nativeElement.querySelectorAll('[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [contenteditable="true"]:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]) ')]}focusFirstFocusable(){for(let o=0;o<this.potentiallyFocusableEls.length&&(this.firstFocusableEl=this.focusElement(this.potentiallyFocusableEls[o]),!this.firstFocusableEl);o++);}focusLastFocusable(){for(let o=this.potentiallyFocusableEls.length-1;o>=0&&(this.lastFocusableEl=this.focusElement(this.potentiallyFocusableEls[o]),!this.lastFocusableEl);o--);}focusTrapElIfOutside(){this.el.nativeElement.contains(document.activeElement)||this.el.nativeElement.focus()}focusElement(o){return o&&o.focus&&(o.focus(),document.activeElement===o)?o:null}ngOnDestroy(){this.removeReboundEls(),this.setPreviousFocus(),this.focusTrapsTracker.activatePreviousTrapper()}}return l.\u0275fac=function(o){return new(o||l)(R(bn),R(or),R(MDe),R(di),R(Hr))},l.\u0275dir=mt({type:l,selectors:[["","clrFocusTrap",""]],hostBindings:function(o,c){1&o&&ee("focusin",function(h){return c.onFocusIn(h)},!1,my)},inputs:{config:["clrFocusTrap","config"]}}),l})(),TS=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})();function rc(l){return null!==l&&("string"==typeof l?l.length>=0:"boolean"==typeof l&&l)}let GDe=(()=>{class l{constructor(){er.addIcons(ll,cl,c0,$1e,q1e)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,bS,ic,S1,sr,TS,po]]}),l})(),D0=(()=>{class l extends M1{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Kr(l)))(c||l)}}(),l.\u0275cmp=Ye({type:l,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(o,c){2&o&&At("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid())},features:[un([Vu,nc,Lc,zu]),dn],ngContentSelectors:uwe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Kt(cwe),ct(0),Z(1,iwe,1,0,"label",0),M(2,"div",1),M(3,"div",2),ct(4,1),Z(5,rwe,1,0,"cds-icon",3),Z(6,swe,1,0,"cds-icon",4),E(),Z(7,owe,1,0,"ng-content",0),Z(8,awe,1,0,"ng-content",0),Z(9,lwe,1,0,"ng-content",0),E()),2&o&&(P(1),O("ngIf",!c.label&&c.addGrid()),P(1),O("ngClass",c.controlClass()),P(3),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid),P(1),O("ngIf",c.showHelper),P(1),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid))},directives:[mn,Rr,Xn,rr],encapsulation:2}),l})(),I1=(()=>{class l extends D1{constructor(o,c,u,h,d){super(o,D0,c,u,h,d),this.index=1}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(or),R(Ba,10),R(di),R(bn))},l.\u0275dir=mt({type:l,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(o,c){2&o&&At("clr-input",!0)},features:[dn]}),l})(),N$=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,$d,sr,po],po]}),l})();new Wn(void 0);let qDe=(()=>{class l{constructor(){er.addIcons(Y1e,X1e,ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,$d,sr,po],po]}),l})(),V4=(()=>{class l{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["clr-radio-wrapper"]],contentQueries:function(o,c,u){if(1&o&&jn(u,Rr,7),2&o){let h;Vt(h=zt())&&(c.label=h.first)}},hostVars:2,hostBindings:function(o,c){2&o&&At("clr-radio-wrapper",!0)},features:[un([Lc])],ngContentSelectors:fwe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(o,c){1&o&&(Kt(dwe),ct(0),ct(1,1),Z(2,hwe,1,0,"label",0)),2&o&&(P(2),O("ngIf",!c.label))},directives:[mn,Rr],encapsulation:2}),l})(),kS=(()=>{class l extends D1{constructor(o,c,u,h,d){super(o,V4,c,u,h,d)}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(or),R(Ba,10),R(di),R(bn))},l.\u0275dir=mt({type:l,selectors:[["","clrRadio",""]],features:[dn]}),l})(),L$=(()=>{class l extends M1{constructor(o,c,u,h){super(h,o,c,u),this.layoutService=o,this.controlClassService=c,this.ngControlService=u,this.ifControlStateService=h,this.inline=!1}set clrInline(o){this.inline="string"==typeof o?"false"!==o:!!o}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.radios.length?"group":null}}return l.\u0275fac=function(o){return new(o||l)(R(Vh,8),R(zu),R(nc),R(Vu))},l.\u0275cmp=Ye({type:l,selectors:[["clr-radio-container"]],contentQueries:function(o,c,u){if(1&o&&jn(u,kS,5),2&o){let h;Vt(h=zt())&&(c.radios=h)}},hostVars:7,hostBindings:function(o,c){2&o&&(et("role",c.role),At("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid()))},inputs:{clrInline:"clrInline"},features:[un([nc,Vu,zu,kp]),dn],ngContentSelectors:Cwe,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Kt(bwe),ct(0),Z(1,pwe,1,0,"label",0),M(2,"div",1),ct(3,1),M(4,"div",2),Z(5,gwe,1,0,"ng-content",0),Z(6,mwe,1,0,"cds-icon",3),Z(7,vwe,1,0,"cds-icon",4),Z(8,_we,1,0,"ng-content",0),Z(9,ywe,1,0,"ng-content",0),E(),E()),2&o&&(P(1),O("ngIf",!c.label&&c.addGrid()),P(1),At("clr-control-inline",c.clrInline),O("ngClass",c.controlClass()),P(3),O("ngIf",c.showHelper),P(1),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid),P(1),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid))},directives:[mn,Rr,Xn,rr],encapsulation:2}),l})(),YDe=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,po,bS,sr],po]}),l})(),XDe=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,$d,sr,po],po]}),l})(),z4=(()=>{class l extends M1{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Kr(l)))(c||l)}}(),l.\u0275cmp=Ye({type:l,selectors:[["clr-textarea-container"]],hostVars:6,hostBindings:function(o,c){2&o&&At("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid())},features:[un([Vu,nc,Lc,zu]),dn],ngContentSelectors:kwe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-textarea-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Kt(Ewe),ct(0),Z(1,xwe,1,0,"label",0),M(2,"div",1),M(3,"div",2),ct(4,1),Z(5,wwe,1,0,"cds-icon",3),Z(6,Swe,1,0,"cds-icon",4),E(),Z(7,Twe,1,0,"ng-content",0),Z(8,Dwe,1,0,"ng-content",0),Z(9,Mwe,1,0,"ng-content",0),E()),2&o&&(P(1),O("ngIf",!c.label&&c.addGrid()),P(1),O("ngClass",c.controlClass()),P(3),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid),P(1),O("ngIf",c.showHelper),P(1),O("ngIf",c.showInvalid),P(1),O("ngIf",c.showValid))},directives:[mn,Rr,Xn,rr],encapsulation:2}),l})(),AS=(()=>{class l extends D1{constructor(o,c,u,h,d){super(o,z4,c,u,h,d),this.index=1}}return l.\u0275fac=function(o){return new(o||l)(R(Ti),R(or),R(Ba,10),R(di),R(bn))},l.\u0275dir=mt({type:l,selectors:[["","clrTextarea",""]],hostVars:2,hostBindings:function(o,c){2&o&&At("clr-textarea",!0)},features:[dn]}),l})(),ZDe=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,$d,sr,po],po]}),l})(),KDe=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,po,bS,sr],po]}),l})(),QDe=(()=>{class l{constructor(){er.addIcons(ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,N$,sr]]}),l})();class IS{}function B$(l){return[ca,l,{provide:IS,useExisting:l}]}var ha=(()=>(function(l){l.UP="up",l.DOWN="down",l.LEFT="left",l.RIGHT="right"}(ha||(ha={})),ha))();class eMe extends class JDe{containsItem(a){return this.model===a}select(a){this.model=a}unselect(a){this.containsItem(a)&&(this.model=null)}isEmpty(){return!this.model}pop(){const a=this.model;return this.model=null,a}toString(a){return this.model?a&&this.model[a]?this.model[a]:this.model.toString():""}}{constructor(){super(...arguments),this._focusChanged=new Pr(null)}get focusChanged(){return this._focusChanged.asObservable()}select(a){this.model!==a&&(this.model=a,this._focusChanged.next(a))}}let nMe=(()=>{class l{constructor(){this.loading=!1,this._currentInput="",this._inputChanged=new Pr(""),this.inputChanged=this._inputChanged.asObservable(),this._selectionChanged=new B3(1)}get currentInput(){return this._currentInput}set currentInput(o){""===o&&!this.multiselectable&&this.setSelectionValue(null),this._currentInput=o,this._inputChanged.next(o)}get selectionChanged(){return this._selectionChanged.asObservable()}select(o){null==o||this.selectionModel.containsItem(o)||(this.selectionModel.select(o),this._selectionChanged.next(this.selectionModel))}toggle(o){null!=o&&(this.selectionModel.containsItem(o)?this.selectionModel.unselect(o):this.selectionModel.select(o),this._selectionChanged.next(this.selectionModel))}unselect(o){null==o||!this.selectionModel.containsItem(o)||(this.selectionModel.unselect(o),this._selectionChanged.next(this.selectionModel))}get multiselectable(){return this.selectionModel instanceof class tMe{containsItem(a){return!!this.model&&this.model.includes(a)}select(a){this.addItem(a)}unselect(a){this.removeItem(a)}isEmpty(){return!(this.model&&this.model.length>0)}pop(){let a;return this.model&&this.model.length>0&&(a=this.model[this.model.length-1],this.removeItem(a)),a}toString(a,o=-1){let c="";return this.model&&(o>-1?this.model[o]&&(c+=a&&this.model[o][a]?this.model[o][a]:this.model[o].toString()):this.model.forEach(u=>{c+=a&&u[a]?u[a]:u.toString(),c+=" "})),c.trim()}addItem(a){this.containsItem(a)||(this.model=this.model||[],this.model.push(a))}removeItem(a){if(null==this.model)return;const o=this.model.indexOf(a);o>-1&&this.model.splice(o,1),0===this.model.length&&(this.model=null)}}}setSelectionValue(o){!this.selectionModel||this.selectionModel.model===o||!this.selectionModel.model&&!o||(this.selectionModel.model=o,this._selectionChanged.next(this.selectionModel))}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();B$((()=>{class l{constructor(o,c,u,h,d){this.id=o,this.toggleService=u,this.selectionService=h,this.platformId=d,this.pseudoFocus=new eMe,this.optionData=[],this.handleFocusSubscription(),this.renderer=c.createRenderer(null,null)}handleFocusSubscription(){this.toggleService.openChange.subscribe(o=>{o||(this.pseudoFocus.model=null)})}get trigger(){return this._trigger}set trigger(o){this._trigger=o,this.addFocusOnBlurListener(o)}get listbox(){return this._listbox}set listbox(o){this._listbox=o,this.addFocusOnBlurListener(o)}get textInput(){return this._textInput}set textInput(o){this._textInput=o,this.renderer.listen(o,"keydown",c=>!this.handleTextInput(c)),this.addFocusOnBlurListener(o)}moveFocusTo(o){let c=this.optionData.findIndex(u=>u.equals(this.pseudoFocus.model));o===ha.UP?-1===c||0===c?c=this.optionData.length-1:c--:o===ha.DOWN&&(-1===c||c===this.optionData.length-1?c=0:c++),this.pseudoFocus.select(this.optionData[c]),this.pseudoFocus.model&&this.pseudoFocus.model.el&&this.pseudoFocus.model.el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}openAndMoveTo(o){this.toggleService.open?this.moveFocusTo(o):(this.toggleService.openChange.pipe(sm(1)).subscribe(c=>{c&&this.moveFocusTo(o)}),this.toggleService.open=!0)}handleTextInput(o){let c=!1;const u=b1(o.key);if(o)switch(u){case Yn.Enter:this.toggleService.open&&this.pseudoFocus.model&&(this.selectionService.multiselectable?this.selectionService.toggle(this.pseudoFocus.model.value):this.selectionService.select(this.pseudoFocus.model.value),c=!0);break;case Yn.Space:this.toggleService.open||(this.toggleService.open=!0,c=!0);break;case Yn.ArrowUp:this.preventViewportScrolling(o),this.openAndMoveTo(ha.UP),c=!0;break;case Yn.ArrowDown:this.preventViewportScrolling(o),this.openAndMoveTo(ha.DOWN),c=!0;break;default:o.key!==Yn.Tab&&(!this.selectionService.multiselectable||o.key!==Yn.Backspace)&&o.key!==Yn.Escape&&!this.toggleService.open&&(this.toggleService.open=!0)}return c}preventViewportScrolling(o){o.preventDefault(),o.stopImmediatePropagation()}focusInput(){this.textInput&&Ji(this.platformId)&&this.textInput.focus()}addFocusOnBlurListener(o){Ji(this.platformId)&&this.renderer.listen(o,"blur",c=>{this.focusOutOfComponent(c)&&(this.toggleService.open=!1,this.componentCdRef&&this.componentCdRef.detectChanges())})}focusOutOfComponent(o){const c=o.relatedTarget||document.activeElement;return!(this.textInput.contains(c)||this.trigger.contains(c)||this.listbox.contains(c))}focusFirstActive(){if(this.optionData.length>0)if(this.selectionService.selectionModel.isEmpty())this.pseudoFocus.select(this.optionData[0]);else{let o;o=this.selectionService.multiselectable?this.selectionService.selectionModel.model[0]:this.selectionService.selectionModel.model;const c=this.optionData.find(u=>u.value===o);this.pseudoFocus.select(c)}}addOptionValues(o){this.optionData=o}}return l.\u0275fac=function(o){return new(o||l)(Ie(eo),Ie(Ym),Ie(lr),Ie(nMe),Ie(Hr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})()),new Wn("POPOVER_HOST_ANCHOR");let OS=(()=>{class l{constructor(o){this.renderer=o,this._unlistenFuncs=[]}get current(){return this._current}reset(o){this._current=o}listenToArrowKeys(o){this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowup",()=>!this.move(ha.UP))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowdown",()=>!this.move(ha.DOWN))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowleft",()=>!this.move(ha.LEFT))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowright",()=>!this.move(ha.RIGHT)))}registerContainer(o){this.renderer.setAttribute(o,"tabindex","0"),this.listenToArrowKeys(o),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.enter",()=>!this.activateCurrent()))}moveTo(o){void 0!==o&&(this.current&&this.current.blur(),o.focus(),this._current=o)}move(o){let c=!1;if(this.current){const u=this.current[o];u&&(function bG(l){return!!l&&(l instanceof _n||ue(l.lift)&&ue(l.subscribe))}(u)?u:ni(u)).subscribe(d=>{d&&(this.moveTo(d),c=!0)})}return c}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(o=>o())}}return l.\u0275fac=function(o){return new(o||l)(Ie(di))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();new sl,new Dh;let P1=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),z$=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),oMe=(()=>{class l{constructor(){er.addIcons(ll,cl,c0,s1)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,$d,sr,z$,po,ic,S1,P1],po,ic]}),l})(),U$=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi],po,CDe,oMe,GDe,N$,qDe,YDe,XDe,ZDe,KDe,QDe]}),l})(),H4=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),aMe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),q$=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),Y$=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})();const X$=new Wn("FOCUS_ON_VIEW_INIT"),lMe={provide:X$,useValue:!0};let j4=(()=>{class l{constructor(o,c,u,h,d){this.el=o,this.platformId=c,this.focusOnViewInit=u,this.renderer=d,this.directFocus=!0,this._isEnabled=this.focusOnViewInit,this.document=h}onFocusout(){this.directFocus||(this.renderer.removeAttribute(this.el.nativeElement,"tabindex"),this.renderer.setStyle(this.el.nativeElement,"outline",null))}set isEnabled(o){this.focusOnViewInit&&"boolean"==typeof o&&(this._isEnabled=o)}ngAfterViewInit(){this.focus()}focus(){!Ji(this.platformId)||!this._isEnabled||this.document&&this.document.activeElement!==this.el.nativeElement&&(this.el.nativeElement.focus(),this.document.activeElement!==this.el.nativeElement&&(this.directFocus=!1,this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.renderer.setStyle(this.el.nativeElement,"outline","none"),this.el.nativeElement.focus()))}}return l.\u0275fac=function(o){return new(o||l)(R(bn),R(Hr),R(X$),R(Wr),R(di))},l.\u0275dir=mt({type:l,selectors:[["","clrFocusOnViewInit",""]],hostBindings:function(o,c){1&o&&ee("focusout",function(){return c.onFocusout()})},inputs:{isEnabled:["clrFocusOnViewInit","isEnabled"]}}),l})(),Ip=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({providers:[lMe],imports:[[pi]]}),l})(),E0=(()=>{class l{constructor(){this._chocolate=new pt,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=mt({type:l}),l})(),k0=(()=>{class l{constructor(o,c){this.subscription=c.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(c.disableChocolateCheck=!0,o.detectChanges(),c.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(R(Na),R(E0))},l.\u0275dir=mt({type:l}),l})(),Vc=(()=>{class l{constructor(){this.toggleState=!1,this._state=new Pr(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(o){this._enabled=o}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.button&&(this.button.focus(),this.button=null)}open(o,c){this.cache=o,this.button=c,this.toggleState=!0,this._state.next(this.toggleState)}toggle(o,c){this.isRowOpen(o)||!o?this.close():this.open(o,c)}get state(){return this.cache}isRowOpen(o){return!(!this.toggleState||this.cache!==o)}get isOpen(){return!0===this.toggleState}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),I0=(()=>{class l{constructor(o){this.detailService=o,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}}return l.\u0275fac=function(o){return new(o||l)(Ie(Vc))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var Uo=(()=>(function(l){l[l.WIDTH=0]="WIDTH",l[l.HIDDEN=1]="HIDDEN"}(Uo||(Uo={})),Uo))();Object.keys(Uo).map(l=>Uo[l]).filter(l=>l===parseInt(l,10));let aP=(()=>{class l{constructor(o){this.expandableRowsCount=o,this.expandableRowsCount&&this.expandableRowsCount.register()}ngOnDestroy(){this.expandableRowsCount&&this.expandableRowsCount.unregister()}}return l.\u0275fac=function(o){return new(o||l)(R(I0,8))},l.\u0275dir=mt({type:l,selectors:[["","clrIfExpanded",""]]}),l})();new Wn("COLUMN_STATE");let EMe=(()=>{class l{constructor(){er.addIcons(Z1e,K1e,s1,Q1e,J1e,ebe,mG,tbe,nbe)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,U$,$d,H4,ic,aMe,Y$,q$,P1,S1,TS,Ip]]}),l})(),IMe=(()=>{class l{constructor(){er.addIcons(c0)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,$d,sr,Y$]]}),l})();new sl,new Dh;let LMe=(()=>{class l{constructor(){er.addIcons(c0)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,H4]]}),l})(),BMe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[EMe,IMe,LMe]}),l})();class bq{static linkParent(a,o,c){a.forEach(u=>u[c]=o)}static linkVertical(a,o=!0){a.forEach((c,u)=>{u>0&&(c.up=a[u-1]),u<a.length-1&&(c.down=a[u+1])}),o&&a.length>1&&(a[0].up=a[a.length-1],a[a.length-1].down=a[0])}}function Cq(l,a,o){return _n.create(c=>{a(c);const u=l.subscribe(c);return()=>{u.unsubscribe(),o&&o(c)}})}let uP=(()=>{class l{constructor(o,c,u,h,d,f){this.id=o,this.renderer=c,this.parent=u,this.toggleService=h,this.focusService=d,this.platformId=f,this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){this.toggleService.openChange.subscribe(o=>{o&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?ha.RIGHT:ha.DOWN)})})}handleRootFocus(){this.toggleService.openChange.subscribe(o=>{o||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=o})}get trigger(){return this._trigger}set trigger(o){this._trigger=o,this.parent?this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowright",c=>this.toggleService.toggleWithEvent(c))):(this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowup",c=>this.toggleService.toggleWithEvent(c))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowdown",c=>this.toggleService.toggleWithEvent(c))),this.focusService.listenToArrowKeys(o))}get container(){return this._container}set container(o){this._container=o,this._unlistenFuncs.push(this.renderer.listen(o,"keydown.tab",c=>this.toggleService.toggleWithEvent(c))),this.parent?this._unlistenFuncs.push(this.renderer.listen(o,"keydown.esc",c=>{this.focusService.move(ha.LEFT),c.stopPropagation()})):(this.focusService.registerContainer(o),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.esc",c=>this.toggleService.toggleWithEvent(c))),this._unlistenFuncs.push(this.renderer.listen(o,"blur",c=>{this.children.pipe(sm(1)).subscribe(h=>h.forEach(d=>d.blur()));const u=c.relatedTarget||document.activeElement;u&&Ji(this.platformId)&&(o.contains(u)||u===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&Ji(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&Ji(this.platformId)&&this.trigger.blur()}activate(){Ji(this.platformId)&&this.trigger.click()}openAndGetChildren(){return Cq(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return Cq(ni(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new B3(1),this.parent?this.right=this.openAndGetChildren().pipe(hn(o=>o[0])):(this.down=this.openAndGetChildren().pipe(hn(o=>o[0])),this.up=this.openAndGetChildren().pipe(hn(o=>o[o.length-1])))}addChildren(o){bq.linkVertical(o),this.parent&&bq.linkParent(o,this.closeAndGetThis(),ha.LEFT),this.children.next(o)}ngOnDestroy(){this._unlistenFuncs.forEach(o=>o()),this.focusService.detachListeners()}}return l.\u0275fac=function(o){return new(o||l)(Ie(eo),Ie(di),Ie(l,12),Ie(lr),Ie(OS),Ie(Hr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();B$(uP);new sl,new Dh;let fP=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi],ic,sr]}),l})(),YS=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=mt({type:l,selectors:[["",8,"alert-text"]]}),l})(),Mq=(()=>{class l{constructor(){er.addIcons(cl,vG,ll,ibe,s1)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,fP]]}),l})(),ZMe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[Mq]}),l})(),KMe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr]]}),l})(),QMe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,fP]]}),l})(),JMe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})();new Wn("TABS_ID");let oEe=(()=>{class l{constructor(){er.addIcons(gG)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,ic,sr,JMe,z$],ic]}),l})(),lEe=(()=>{class l{constructor(){er.addIcons(c0,mG)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,ic,Ip],ic,sr,Ip]}),l})(),cEe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[KMe,QMe,oEe,lEe]}),l})(),Rq=(()=>{class l{constructor(o){this._document=o}stopScrolling(){this._document.body.classList.add("no-scrolling")}resumeScrolling(){this._document.body.classList.contains("no-scrolling")&&this._document.body.classList.remove("no-scrolling")}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),jh=(()=>{class l{constructor(o,c,u){this._scrollingService=o,this.commonStrings=c,this.modalId=u,this._open=!1,this._openChanged=new St(!1),this.closable=!0,this.staticBackdrop=!0,this.skipAnimation="false",this.bypassScrollService=!1,this.stopClose=!1,this.altClose=new St(!1)}ngOnChanges(o){!this.bypassScrollService&&o&&o.hasOwnProperty("_open")&&(o._open.currentValue?this._scrollingService.stopScrolling():this._scrollingService.resumeScrolling())}ngOnDestroy(){this._scrollingService.resumeScrolling()}open(){this._open||(this._open=!0,this._openChanged.emit(!0))}close(){this.stopClose?this.altClose.emit(!1):!this.closable||!this._open||(this._open=!1,this.focusTrap.setPreviousFocus())}fadeDone(o){"void"===o.toState&&this._openChanged.emit(!1)}}return l.\u0275fac=function(o){return new(o||l)(R(Rq),R(Ki),R(eo))},l.\u0275cmp=Ye({type:l,selectors:[["clr-modal"]],viewQuery:function(o,c){if(1&o&&ti(Kd,5),2&o){let u;Vt(u=zt())&&(c.focusTrap=u.first)}},hostVars:2,hostBindings:function(o,c){1&o&&ee("keyup.escape",function(){return c.close()},!1,Y6),2&o&&At("open",c._open)},inputs:{_open:["clrModalOpen","_open"],closable:["clrModalClosable","closable"],size:["clrModalSize","size"],staticBackdrop:["clrModalStaticBackdrop","staticBackdrop"],skipAnimation:["clrModalSkipAnimation","skipAnimation"],bypassScrollService:["clrModalOverrideScrollService","bypassScrollService"],stopClose:["clrModalPreventClose","stopClose"]},outputs:{_openChanged:"clrModalOpenChange",altClose:"clrModalAlternateClose"},features:[un([ca],[Rq]),Ys],ngContentSelectors:wTe,decls:1,vars:1,consts:[["clrFocusTrap","","class","modal",4,"ngIf"],["clrFocusTrap","",1,"modal"],["role","dialog","aria-modal","true",1,"modal-dialog"],[1,"clr-sr-only"],[1,"modal-content-wrapper"],[1,"modal-content"],[1,"modal-header--accessible"],["clrFocusOnViewInit","",1,"modal-title-wrapper",3,"id"],["type","button","class","close",3,"click",4,"ngIf"],[1,"modal-body-wrapper"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["type","button",1,"close",3,"click"],["shape","window-close"]],template:function(o,c){1&o&&(Kt(xTe),Z(0,CTe,17,14,"div",0)),2&o&&O("ngIf",c._open)},directives:[mn,Kd,j4,rr],styles:["[_nghost-%COMP%]{display:none}.open[_nghost-%COMP%]{display:inline}"],data:{animation:[ul("fadeDown",[Fs("* => false",[Ai({opacity:0,transform:"translate(0, -25%)"}),wo("0.2s ease-in-out")]),Fs("false => *",[wo("0.2s ease-in-out",Ai({opacity:0,transform:"translate(0, -25%)"}))])]),ul("fade",[Fs("void => *",[Ai({opacity:0}),wo("0.2s ease-in-out",Ai({opacity:.85}))]),Fs("* => void",[wo("0.2s ease-in-out",Ai({opacity:0}))])])]}}),l})(),$h=(()=>{class l{constructor(o,c,u){this.renderer=o,this.host=c,this.tabindex="0",this.unlisteners=[],u.runOutsideAngular(()=>{new ResizeObserver(()=>this.addOrRemoveTabIndex()).observe(this.host.nativeElement),this.unlisteners.push(this.renderer.listen(this.host.nativeElement,"mouseup",()=>{this.addOrRemoveTabIndex()}),this.renderer.listen(this.host.nativeElement,"mousedown",()=>{this.removeTabIndex()}))})}ngOnDestroy(){for(;this.unlisteners.length;)this.unlisteners.pop()()}addTabIndex(){this.renderer.setAttribute(this.host.nativeElement,"tabindex",this.tabindex)}removeTabIndex(){this.renderer.removeAttribute(this.host.nativeElement,"tabindex")}addOrRemoveTabIndex(){const o=this.host.nativeElement.parentElement;o.clientHeight<o.scrollHeight?this.addTabIndex():this.removeTabIndex()}}return l.\u0275fac=function(o){return new(o||l)(R(di),R(bn),R(ar))},l.\u0275dir=mt({type:l,selectors:[["",8,"modal-body"]]}),l})(),Nq=(()=>{class l{constructor(){er.addIcons(s1)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,TS,Ip],sr,Ip]}),l})(),dEe=(()=>{class l{constructor(){er.addIcons(s1,vG)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,Ip],ic]}),l})(),mEe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi],ic,sr]}),l})(),vEe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[fP,dEe,mEe]}),l})(),xEe=(()=>{class l{constructor(){er.addIcons(_G)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,Nq,Mq]]}),l})();var zc=(()=>(function(l){l.Inactive="inactive",l.Error="error",l.Complete="complete"}(zc||(zc={})),zc))();const Uc="0.2s ease-in-out",wEe=[ul("skipInitialRender",[Fs(":enter",[])]),ul("toggle",[Fs("void => *",[Ai({display:"block",height:0}),wo(Uc,Ai({height:"*"}))])])];ul("skipInitialRender",[Fs(":enter",[])]),ul("toggle",[Fs("void => *",[Ai({display:"block",height:0}),wo(Uc,Ai({height:"*"}))]),Fs("* => void",[Ai({display:"block"}),wo(Uc,Ai({height:0,display:"none"}))])]);let qq=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["clr-accordion-description"],["clr-step-description"]],hostVars:2,hostBindings:function(o,c){2&o&&At("clr-accordion-description",!0)},ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Kt(),ct(0))},encapsulation:2,changeDetection:0}),l})();var Lp=(()=>(function(l){l.Default="default",l.Multi="multi"}(Lp||(Lp={})),Lp))();let TEe=0;class DEe{constructor(a,o){this.id=a,this.accordionId=o,this.status=zc.Inactive,this.index=null,this.disabled=!1,this.open=!1,this.templateId=`${this.id}-${this.accordionId}`}}class Yq{constructor(){this.strategy=Lp.Default,this.accordionCount=TEe++,this._panels={}}get panels(){return Object.keys(this._panels).map(a=>this._panels[a])}setStrategy(a){this.strategy=a}updatePanelOrder(a){a.forEach((o,c)=>this._panels[o].index=c),this.removeOldPanels(a)}addPanel(a,o=!1){this._panels[a]=new DEe(a,this.accordionCount),this._panels[a].open=o}togglePanel(a,o){const u=void 0!==o?o:!this._panels[a].open;u&&this.strategy===Lp.Default&&this.closeAllPanels(),this._panels[a].open=u}disablePanel(a,o){this._panels[a].disabled=o}closeAllPanels(){this.panels.forEach(a=>this._panels[a.id].open=!1)}removeOldPanels(a){this.panels.filter(o=>void 0===a.find(c=>c===o.id)).forEach(o=>delete this._panels[o.id])}}let H1=(()=>{class l{constructor(){this.accordion=new Yq,this._panelsChanges=new Pr(this.accordion.panels)}getPanelChanges(o){return this._panelsChanges.pipe(hn(c=>c.find(u=>u.id===o)))}setStrategy(o){this.accordion.setStrategy(o)}addPanel(o,c=!1){this.accordion.addPanel(o,c),this.emitUpdatedPanels()}togglePanel(o,c){this.accordion.togglePanel(o,c),this.emitUpdatedPanels()}disablePanel(o,c){this.accordion.disablePanel(o,c),this.emitUpdatedPanels()}updatePanelOrder(o){this.accordion.updatePanelOrder(o),this.emitUpdatedPanels()}emitUpdatedPanels(){this._panelsChanges.next(this.accordion.panels)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Bp=(()=>{class l{constructor(o,c,u,h){this.commonStrings=o,this.accordionService=c,this.ifExpandService=u,this._id=h,this.disabled=!1,this.panelOpen=!1,this.panelOpenChange=new St,this.AccordionStatus=zc,this.isAccordion=!0}get id(){return this._id}set id(o){this._id=o}ngOnInit(){this.panel=this.accordionService.getPanelChanges(this.id).pipe(oa(o=>this.emitPanelChange(o))),this.accordionService.addPanel(this.id,this.panelOpen),this.accordionService.togglePanel(this.id,this.panelOpen),this.accordionService.disablePanel(this.id,this.disabled)}ngOnChanges(o){this.panel&&o.panelOpen&&o.panelOpen.currentValue!==o.panelOpen.previousValue&&this.accordionService.togglePanel(this.id,o.panelOpen.currentValue),this.panel&&o.disabled&&o.disabled.currentValue!==o.disabled.previousValue&&this.accordionService.disablePanel(this.id,o.disabled.currentValue)}togglePanel(){this.accordionService.togglePanel(this.id)}collapsePanelOnAnimationDone(o){o.open||(this.ifExpandService.expanded=!1)}getPanelStateClasses(o){return`clr-accordion-panel-${o.status} ${o.open?"clr-accordion-panel-open":""}`}getAccordionContentId(o){return`clr-accordion-content-${o}'`}getAccordionHeaderId(o){return`clr-accordion-header-${o}`}emitPanelChange(o){o.open!==this.panelOpen&&(this.panelOpenChange.emit(o.open),this.panelOpen=o.open),o.open&&(this.ifExpandService.expanded=!0)}}return l.\u0275fac=function(o){return new(o||l)(R(Ki),R(H1),R(ua),R(eo))},l.\u0275cmp=Ye({type:l,selectors:[["clr-accordion-panel"]],contentQueries:function(o,c,u){if(1&o&&jn(u,qq,4),2&o){let h;Vt(h=zt())&&(c.accordionDescription=h)}},hostVars:2,hostBindings:function(o,c){2&o&&At("clr-accordion-panel",!0)},inputs:{disabled:["clrAccordionPanelDisabled","disabled"],panelOpen:["clrAccordionPanelOpen","panelOpen"]},outputs:{panelOpenChange:"clrAccordionPanelOpenChange"},features:[un([ua,ca]),Ys],ngContentSelectors:x$,decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","class","clr-sr-only",4,"ngIf"],["role","group",3,"ngClass"],[1,"clr-accordion-header"],["type","button",1,"clr-accordion-header-button",3,"id","disabled","click"],["headerButton",""],[1,"clr-sr-only"],[1,"clr-accordion-status"],["shape","angle","direction","right",1,"clr-accordion-angle"],[1,"clr-accordion-number"],["status","danger","shape","exclamation-circle",1,"clr-accordion-error-icon"],["status","success","shape","check-circle",1,"clr-accordion-complete-icon"],["role","region",3,"id"],["class","clr-accordion-content",4,"ngIf"],["aria-live","assertive",1,"clr-sr-only"],[1,"clr-accordion-content"],[1,"clr-accordion-inner-content"]],template:function(o,c){1&o&&(Kt(C$),Z(0,jTe,19,18,"ng-container",0),Ry(1,"async")),2&o&&O("ngIf",Ny(1,1,c.panel))},directives:[mn,Xn,rr],pipes:[qI],encapsulation:2,data:{animation:wEe},changeDetection:0}),l})(),W1=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["clr-accordion-title"],["clr-step-title"]],hostVars:2,hostBindings:function(o,c){2&o&&At("clr-accordion-title",!0)},ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Kt(),ct(0))},encapsulation:2,changeDetection:0}),l})(),G1=(()=>{class l{constructor(o){this.accordionService=o,this.multiPanel=!1,this.subscriptions=[]}ngOnInit(){this.setAccordionStrategy()}ngOnChanges(o){o.multiPanel.currentValue!==o.multiPanel.previousValue&&this.setAccordionStrategy()}ngAfterViewInit(){this.subscriptions.push(this.listenForDOMChanges())}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}setAccordionStrategy(){this.accordionService.setStrategy(this.multiPanel?Lp.Multi:Lp.Default)}listenForDOMChanges(){return this.panels.changes.pipe(Vw(this.panels)).subscribe(o=>this.accordionService.updatePanelOrder(o.toArray().map(c=>c.id)))}}return l.\u0275fac=function(o){return new(o||l)(R(H1))},l.\u0275cmp=Ye({type:l,selectors:[["clr-accordion"]],contentQueries:function(o,c,u){if(1&o&&jn(u,Bp,5),2&o){let h;Vt(h=zt())&&(c.panels=h)}},hostVars:2,hostBindings:function(o,c){2&o&&At("clr-accordion",!0)},inputs:{multiPanel:["clrAccordionMultiPanel","multiPanel"]},features:[un([H1]),Ys],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Kt(),ct(0))},encapsulation:2,changeDetection:0}),l})(),j1=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["clr-accordion-content"],["clr-step-content"]],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Kt(),ct(0))},encapsulation:2,changeDetection:0}),l})(),R0=(()=>{class l extends E0{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Kr(l)))(c||l)}}(),l.\u0275dir=mt({type:l,selectors:[["clr-accordion"]],features:[dn]}),l})(),$1=(()=>{class l extends k0{constructor(o,c,u){if(!c)throw new Error("clr-accordion-panel should only be used inside of clr-accordion");super(o,c),this.expand=u}get flavor(){return this.expand.expanded}}return l.\u0275fac=function(o){return new(o||l)(R(Na),R(R0,8),R(ua))},l.\u0275dir=mt({type:l,selectors:[["clr-accordion-panel"]],features:[dn]}),l})(),Xq=(()=>{class l{constructor(){er.addIcons(c0,ll,cl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr]]}),l})(),AEe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,Xq],Xq]}),l})(),wP=(()=>{class l{constructor(){this.externalId="",this.max=100,this._value=0}set id(o){this._ID=o,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(o){this._value=o}get progressClass(){return!0}get labeledClass(){return this._labeled}set clrLabeled(o){this._labeled=rc(o)}get fadeClass(){return this._fade}set clrFade(o){this._fade=rc(o)}get loopClass(){return this._loop}set clrLoop(o){this._loop=rc(o)}get successClass(){return this._success}set clrSuccess(o){this._success=rc(o)}get dangerClass(){return this._danger}set clrDanger(o){this._danger=rc(o)}get flashClass(){return this._flash}set clrFlash(o){this._flash=rc(o)}get flashDangerClass(){return this._flashDanger}set clrFlashDanger(o){this._flashDanger=rc(o)}displayStringValue(){return this._labeled}get displayValue(){return this.displayval?this.displayval:`${this.value||0}%`}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["clr-progress-bar"]],hostVars:17,hostBindings:function(o,c){2&o&&(et("id",c.externalId),At("progress",c.progressClass)("labeled",c.labeledClass)("progress-fade",c.fadeClass)("loop",c.loopClass)("success",c.successClass)("danger",c.dangerClass)("flash",c.flashClass)("flash-danger",c.flashDangerClass))},inputs:{id:"id",max:["clrMax","max"],displayval:["clrDisplayval","displayval"],value:["clrValue","value"],clrLabeled:"clrLabeled",clrFade:"clrFade",clrLoop:"clrLoop",clrSuccess:"clrSuccess",clrDanger:"clrDanger",clrFlash:"clrFlash",clrFlashDanger:"clrFlashDanger"},decls:2,vars:5,consts:[[3,"id"],[4,"ngIf"]],template:function(o,c){1&o&&(me(0,"progress",0),Z(1,eDe,2,1,"span",1)),2&o&&(O("id",c.id),et("max",c.max)("value",c.value)("data-displayval",c.displayValue),P(1),O("ngIf",c.displayStringValue()))},directives:[mn],encapsulation:2}),l})(),IEe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi]]}),l})(),OEe=(()=>{class l{constructor(){er.addIcons(rbe,sbe,_G,obe)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[pi,sr,P1],sr,P1]}),l})(),FEe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[ZMe,BMe,sr,Nq,H4,ic,TS,Ip,hDe,U$,cEe,vEe,xEe,q$,AEe,P1,IEe,S1,OEe]}),l})(),REe=(()=>{class l{constructor(o,c){this.router=o,this.config=c,this.bShowNextTime=!0}ngOnInit(){}get version(){return this.config.environment.version}ngAfterViewInit(){}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.router.navigate(["main"])})}get showNextTime(){return this.bShowNextTime}set showNextTime(o){this.bShowNextTime=o}}return l.\u0275fac=function(o){return new(o||l)(R(fs),R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-help"]],decls:12,vars:2,consts:[[1,"ftext","fade-in-3","pad"],[1,"bottom-space"],["type","checkbox","clrCheckbox","","name","nextShowTime","required","","value","nextShow",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","btn-block","top-space",3,"click"],["shape","check"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"h4"),ie(2),E(),M(3,"p"),ie(4,"Online-\u0432\u0435\u0440\u0441\u0438\u044f \u041f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 D3 \u0442\u0443\u0442: https://deviskin.github.io"),E(),M(5,"clr-checkbox-wrapper",1),M(6,"input",2),ee("ngModelChange",function(h){return c.showNextTime=h}),E(),M(7,"label"),ie(8,"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0440\u0430\u0437"),E(),E(),M(9,"button",3),ee("click",function(){return c.onOk()}),me(10,"clr-icon",4),ie(11," \u041d\u0430\u0447\u0430\u0442\u044c "),E(),E()),2&o&&(P(2),hi("\u0421\u043f\u0440\u0430\u0432\u043a\u0430 (",c.version,")."),P(4),O("ngModel",c.showNextTime))},directives:[Xd,r4,Ru,Zd,Js,Rs,Rr,Ts],styles:[".pad[_ngcontent-%COMP%]{padding:1em}"]}),l})();function gs(l,a){return null==l||null==a?NaN:l<a?-1:l>a?1:l>=a?0:NaN}function ZS(l){let a=l,o=l,c=l;function u(f,p,g=0,m=f.length){if(g<m){if(0!==o(p,p))return m;do{const v=g+m>>>1;c(f[v],p)<0?g=v+1:m=v}while(g<m)}return g}return 2!==l.length&&(a=(f,p)=>l(f)-p,o=gs,c=(f,p)=>gs(l(f),p)),{left:u,center:function d(f,p,g=0,m=f.length){const v=u(f,p,g,m-1);return v>g&&a(f[v-1],p)>-a(f[v],p)?v-1:v},right:function h(f,p,g=0,m=f.length){if(g<m){if(0!==o(p,p))return m;do{const v=g+m>>>1;c(f[v],p)<=0?g=v+1:m=v}while(g<m)}return g}}}function eY(l){return null===l?NaN:+l}const tY=ZS(gs),nY=tY.right,LEe=tY.left,BEe=ZS(eY).center,Vp=nY;function KS(l,a){let o=0;if(void 0===a)for(let c of l)null!=c&&(c=+c)>=c&&++o;else{let c=-1;for(let u of l)null!=(u=a(u,++c,l))&&(u=+u)>=u&&++o}return o}function VEe(l){return 0|l.length}function zEe(l){return!(l>0)}function UEe(l){return"object"!=typeof l||"length"in l?l:Array.from(l)}function WEe(...l){const a="function"==typeof l[l.length-1]&&function HEe(l){return a=>l(...a)}(l.pop()),o=(l=l.map(UEe)).map(VEe),c=l.length-1,u=new Array(c+1).fill(0),h=[];if(c<0||o.some(zEe))return h;for(;;){h.push(u.map((f,p)=>l[p][f]));let d=c;for(;++u[d]===o[d];){if(0===d)return a?h.map(a):h;u[d--]=0}}}function GEe(l,a){var o=0,c=0;return Float64Array.from(l,void 0===a?u=>o+=+u||0:u=>o+=+a(u,c++,l)||0)}function jEe(l,a){return null==l||null==a?NaN:a<l?-1:a>l?1:a>=l?0:NaN}function iY(l,a){let c,o=0,u=0,h=0;if(void 0===a)for(let d of l)null!=d&&(d=+d)>=d&&(c=d-u,u+=c/++o,h+=c*(d-u));else{let d=-1;for(let f of l)null!=(f=a(f,++d,l))&&(f=+f)>=f&&(c=f-u,u+=c/++o,h+=c*(f-u))}if(o>1)return h/(o-1)}function rY(l,a){const o=iY(l,a);return o&&Math.sqrt(o)}function zp(l,a){let o,c;if(void 0===a)for(const u of l)null!=u&&(void 0===o?u>=u&&(o=c=u):(o>u&&(o=u),c<u&&(c=u)));else{let u=-1;for(let h of l)null!=(h=a(h,++u,l))&&(void 0===o?h>=h&&(o=c=h):(o>h&&(o=h),c<h&&(c=h)))}return[o,c]}class to{constructor(){this._partials=new Float64Array(32),this._n=0}add(a){const o=this._partials;let c=0;for(let u=0;u<this._n&&u<32;u++){const h=o[u],d=a+h,f=Math.abs(a)<Math.abs(h)?a-(d-h):h-(d-a);f&&(o[c++]=f),a=d}return o[c]=a,this._n=c+1,this}valueOf(){const a=this._partials;let c,u,h,o=this._n,d=0;if(o>0){for(d=a[--o];o>0&&(c=d,u=a[--o],d=c+u,h=u-(d-c),!h););o>0&&(h<0&&a[o-1]<0||h>0&&a[o-1]>0)&&(u=2*h,c=d+u,u==c-d&&(d=c))}return d}}function $Ee(l,a){const o=new to;if(void 0===a)for(let c of l)(c=+c)&&o.add(c);else{let c=-1;for(let u of l)(u=+a(u,++c,l))&&o.add(u)}return+o}function qEe(l,a){const o=new to;let c=-1;return Float64Array.from(l,void 0===a?u=>o.add(+u||0):u=>o.add(+a(u,++c,l)||0))}class Z1 extends Map{constructor(a,o=aY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),null!=a)for(const[c,u]of a)this.set(c,u)}get(a){return super.get(SP(this,a))}has(a){return super.has(SP(this,a))}set(a,o){return super.set(sY(this,a),o)}delete(a){return super.delete(oY(this,a))}}class Up extends Set{constructor(a,o=aY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),null!=a)for(const c of a)this.add(c)}has(a){return super.has(SP(this,a))}add(a){return super.add(sY(this,a))}delete(a){return super.delete(oY(this,a))}}function SP({_intern:l,_key:a},o){const c=a(o);return l.has(c)?l.get(c):o}function sY({_intern:l,_key:a},o){const c=a(o);return l.has(c)?l.get(c):(l.set(c,o),o)}function oY({_intern:l,_key:a},o){const c=a(o);return l.has(c)&&(o=l.get(c),l.delete(c)),o}function aY(l){return null!==l&&"object"==typeof l?l.valueOf():l}function N0(l){return l}function lY(l,...a){return L0(l,N0,N0,a)}function cY(l,...a){return L0(l,Array.from,N0,a)}function uY(l,a){for(let o=1,c=a.length;o<c;++o)l=l.flatMap(u=>u.pop().map(([h,d])=>[...u,h,d]));return l}function YEe(l,...a){return uY(cY(l,...a),a)}function XEe(l,a,...o){return uY(dY(l,a,...o),o)}function hY(l,a,...o){return L0(l,N0,a,o)}function dY(l,a,...o){return L0(l,Array.from,a,o)}function ZEe(l,...a){return L0(l,N0,fY,a)}function KEe(l,...a){return L0(l,Array.from,fY,a)}function fY(l){if(1!==l.length)throw new Error("duplicate key");return l[0]}function L0(l,a,o,c){return function u(h,d){if(d>=c.length)return o(h);const f=new Z1,p=c[d++];let g=-1;for(const m of h){const v=p(m,++g,h),_=f.get(v);_?_.push(m):f.set(v,[m])}for(const[m,v]of f)f.set(m,u(v,d));return a(f)}(l,0)}function pY(l,a){return Array.from(a,o=>l[o])}function TP(l,...a){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");l=Array.from(l);let[o]=a;if(o&&2!==o.length||a.length>1){const c=Uint32Array.from(l,(u,h)=>h);return a.length>1?(a=a.map(u=>l.map(u)),c.sort((u,h)=>{for(const d of a){const f=K1(d[u],d[h]);if(f)return f}})):(o=l.map(o),c.sort((u,h)=>K1(o[u],o[h]))),pY(l,c)}return l.sort(DP(o))}function DP(l=gs){if(l===gs)return K1;if("function"!=typeof l)throw new TypeError("compare is not a function");return(a,o)=>{const c=l(a,o);return c||0===c?c:(0===l(o,o))-(0===l(a,a))}}function K1(l,a){return(null==l||!(l>=l))-(null==a||!(a>=a))||(l<a?-1:l>a?1:0)}function QEe(l,a,o){return(2!==a.length?TP(hY(l,a,o),([c,u],[h,d])=>gs(u,d)||gs(c,h)):TP(lY(l,o),([c,u],[h,d])=>a(u,d)||gs(c,h))).map(([c])=>c)}var JEe=Array.prototype.slice;function QS(l){return()=>l}var MP=Math.sqrt(50),EP=Math.sqrt(10),kP=Math.sqrt(2);function B0(l,a,o){var c,h,d,f,u=-1;if(o=+o,(l=+l)==(a=+a)&&o>0)return[l];if((c=a<l)&&(h=l,l=a,a=h),0===(f=Q1(l,a,o))||!isFinite(f))return[];if(f>0){let p=Math.round(l/f),g=Math.round(a/f);for(p*f<l&&++p,g*f>a&&--g,d=new Array(h=g-p+1);++u<h;)d[u]=(p+u)*f}else{f=-f;let p=Math.round(l*f),g=Math.round(a*f);for(p/f<l&&++p,g/f>a&&--g,d=new Array(h=g-p+1);++u<h;)d[u]=(p+u)/f}return c&&d.reverse(),d}function Q1(l,a,o){var c=(a-l)/Math.max(0,o),u=Math.floor(Math.log(c)/Math.LN10),h=c/Math.pow(10,u);return u>=0?(h>=MP?10:h>=EP?5:h>=kP?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(h>=MP?10:h>=EP?5:h>=kP?2:1)}function V0(l,a,o){var c=Math.abs(a-l)/Math.max(0,o),u=Math.pow(10,Math.floor(Math.log(c)/Math.LN10)),h=c/u;return h>=MP?u*=10:h>=EP?u*=5:h>=kP&&(u*=2),a<l?-u:u}function mY(l,a,o){let c;for(;;){const u=Q1(l,a,o);if(u===c||0===u||!isFinite(u))return[l,a];u>0?(l=Math.floor(l/u)*u,a=Math.ceil(a/u)*u):u<0&&(l=Math.ceil(l*u)/u,a=Math.floor(a*u)/u),c=u}}function AP(l){return Math.ceil(Math.log(KS(l))/Math.LN2)+1}function vY(){var l=N0,a=zp,o=AP;function c(u){Array.isArray(u)||(u=Array.from(u));var h,f,d=u.length,p=new Array(d);for(h=0;h<d;++h)p[h]=l(u[h],h,u);var g=a(p),m=g[0],v=g[1],_=o(p,m,v);if(!Array.isArray(_)){const C=v,w=+_;if(a===zp&&([m,v]=mY(m,v,w)),(_=B0(m,v,w))[_.length-1]>=v)if(C>=v&&a===zp){const S=Q1(m,v,w);isFinite(S)&&(S>0?v=(Math.floor(v/S)+1)*S:S<0&&(v=(Math.ceil(v*-S)+1)/-S))}else _.pop()}for(var y=_.length;_[0]<=m;)_.shift(),--y;for(;_[y-1]>v;)_.pop(),--y;var x,b=new Array(y+1);for(h=0;h<=y;++h)(x=b[h]=[]).x0=h>0?_[h-1]:m,x.x1=h<y?_[h]:v;for(h=0;h<d;++h)null!=(f=p[h])&&m<=f&&f<=v&&b[Vp(_,f,0,y)].push(u[h]);return b}return c.value=function(u){return arguments.length?(l="function"==typeof u?u:QS(u),c):l},c.domain=function(u){return arguments.length?(a="function"==typeof u?u:QS([u[0],u[1]]),c):a},c.thresholds=function(u){return arguments.length?(o="function"==typeof u?u:Array.isArray(u)?QS(JEe.call(u)):QS(u),c):o},c}function JS(l,a){let o;if(void 0===a)for(const c of l)null!=c&&(o<c||void 0===o&&c>=c)&&(o=c);else{let c=-1;for(let u of l)null!=(u=a(u,++c,l))&&(o<u||void 0===o&&u>=u)&&(o=u)}return o}function e2(l,a){let o;if(void 0===a)for(const c of l)null!=c&&(o>c||void 0===o&&c>=c)&&(o=c);else{let c=-1;for(let u of l)null!=(u=a(u,++c,l))&&(o>u||void 0===o&&u>=u)&&(o=u)}return o}function IP(l,a,o=0,c=l.length-1,u){for(u=void 0===u?K1:DP(u);c>o;){if(c-o>600){const p=c-o+1,g=a-o+1,m=Math.log(p),v=.5*Math.exp(2*m/3),_=.5*Math.sqrt(m*v*(p-v)/p)*(g-p/2<0?-1:1);IP(l,a,Math.max(o,Math.floor(a-g*v/p+_)),Math.min(c,Math.floor(a+(p-g)*v/p+_)),u)}const h=l[a];let d=o,f=c;for(J1(l,o,a),u(l[c],h)>0&&J1(l,o,c);d<f;){for(J1(l,d,f),++d,--f;u(l[d],h)<0;)++d;for(;u(l[f],h)>0;)--f}0===u(l[o],h)?J1(l,o,f):(++f,J1(l,f,c)),f<=a&&(o=f+1),a<=f&&(c=f-1)}return l}function J1(l,a,o){const c=l[a];l[a]=l[o],l[o]=c}function eb(l,a,o){if(l=Float64Array.from(function*NEe(l,a){if(void 0===a)for(let o of l)null!=o&&(o=+o)>=o&&(yield o);else{let o=-1;for(let c of l)null!=(c=a(c,++o,l))&&(c=+c)>=c&&(yield c)}}(l,o)),c=l.length){if((a=+a)<=0||c<2)return e2(l);if(a>=1)return JS(l);var c,u=(c-1)*a,h=Math.floor(u),d=JS(IP(l,h).subarray(0,h+1));return d+(e2(l.subarray(h+1))-d)*(u-h)}}function _Y(l,a,o=eY){if(c=l.length){if((a=+a)<=0||c<2)return+o(l[0],0,l);if(a>=1)return+o(l[c-1],c-1,l);var c,u=(c-1)*a,h=Math.floor(u),d=+o(l[h],h,l);return d+(+o(l[h+1],h+1,l)-d)*(u-h)}}function eke(l,a,o){return Math.ceil((o-a)/(2*(eb(l,.75)-eb(l,.25))*Math.pow(KS(l),-1/3)))}function tke(l,a,o){return Math.ceil((o-a)/(3.5*rY(l)*Math.pow(KS(l),-1/3)))}function yY(l,a){let o,c=-1,u=-1;if(void 0===a)for(const h of l)++u,null!=h&&(o<h||void 0===o&&h>=h)&&(o=h,c=u);else for(let h of l)null!=(h=a(h,++u,l))&&(o<h||void 0===o&&h>=h)&&(o=h,c=u);return c}function nke(l,a){let o=0,c=0;if(void 0===a)for(let u of l)null!=u&&(u=+u)>=u&&(++o,c+=u);else{let u=-1;for(let h of l)null!=(h=a(h,++u,l))&&(h=+h)>=h&&(++o,c+=h)}if(o)return c/o}function ike(l,a){return eb(l,.5,a)}function PP(l){return Array.from(function*rke(l){for(const a of l)yield*a}(l))}function bY(l,a){let o,c=-1,u=-1;if(void 0===a)for(const h of l)++u,null!=h&&(o>h||void 0===o&&h>=h)&&(o=h,c=u);else for(let h of l)null!=(h=a(h,++u,l))&&(o>h||void 0===o&&h>=h)&&(o=h,c=u);return c}function ske(l,a){const o=new Z1;if(void 0===a)for(let h of l)null!=h&&h>=h&&o.set(h,(o.get(h)||0)+1);else{let h=-1;for(let d of l)null!=(d=a(d,++h,l))&&d>=d&&o.set(d,(o.get(d)||0)+1)}let c,u=0;for(const[h,d]of o)d>u&&(u=d,c=h);return c}function oke(l,a=ake){const o=[];let c,u=!1;for(const h of l)u&&o.push(a(c,h)),c=h,u=!0;return o}function ake(l,a){return[l,a]}function gl(l,a,o){l=+l,a=+a,o=(u=arguments.length)<2?(a=l,l=0,1):u<3?1:+o;for(var c=-1,u=0|Math.max(0,Math.ceil((a-l)/o)),h=new Array(u);++c<u;)h[c]=l+c*o;return h}function lke(l,a=gs){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");let o=Array.from(l);const c=new Float64Array(o.length);2!==a.length&&(o=o.map(a),a=gs);const u=(f,p)=>a(o[f],o[p]);let h,d;return Uint32Array.from(o,(f,p)=>p).sort(a===gs?(f,p)=>K1(o[f],o[p]):DP(u)).forEach((f,p)=>{const g=u(f,void 0===h?f:h);g>=0?((void 0===h||g>0)&&(h=f,d=p),c[f]=d):c[f]=NaN}),c}function cke(l,a=gs){let o,c=!1;if(1===a.length){let u;for(const h of l){const d=a(h);(c?gs(d,u)<0:0===gs(d,d))&&(o=h,u=d,c=!0)}}else for(const u of l)(c?a(u,o)<0:0===a(u,u))&&(o=u,c=!0);return o}function CY(l,a=gs){if(1===a.length)return bY(l,a);let o,c=-1,u=-1;for(const h of l)++u,(c<0?0===a(h,h):a(h,o)<0)&&(o=h,c=u);return c}function uke(l,a=gs){let o,c=!1;if(1===a.length){let u;for(const h of l){const d=a(h);(c?gs(d,u)>0:0===gs(d,d))&&(o=h,u=d,c=!0)}}else for(const u of l)(c?a(u,o)>0:0===a(u,u))&&(o=u,c=!0);return o}function hke(l,a=gs){if(1===a.length)return yY(l,a);let o,c=-1,u=-1;for(const h of l)++u,(c<0?0===a(h,h):a(h,o)>0)&&(o=h,c=u);return c}function dke(l,a){const o=CY(l,a);return o<0?void 0:o}const xY=wY(Math.random);function wY(l){return function(o,c=0,u=o.length){let h=u-(c=+c);for(;h;){const d=l()*h--|0,f=o[h+c];o[h+c]=o[d+c],o[d+c]=f}return o}}function fke(l,a){let o=0;if(void 0===a)for(let c of l)(c=+c)&&(o+=c);else{let c=-1;for(let u of l)(u=+a(u,++c,l))&&(o+=u)}return o}function SY(l){if(!(h=l.length))return[];for(var a=-1,o=e2(l,pke),c=new Array(o);++a<o;)for(var h,u=-1,d=c[a]=new Array(h);++u<h;)d[u]=l[u][a];return c}function pke(l){return l.length}function TY(){return SY(arguments)}function gke(l,a){if("function"!=typeof a)throw new TypeError("test is not a function");let o=-1;for(const c of l)if(!a(c,++o,l))return!1;return!0}function mke(l,a){if("function"!=typeof a)throw new TypeError("test is not a function");let o=-1;for(const c of l)if(a(c,++o,l))return!0;return!1}function vke(l,a){if("function"!=typeof a)throw new TypeError("test is not a function");const o=[];let c=-1;for(const u of l)a(u,++c,l)&&o.push(u);return o}function _ke(l,a){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof a)throw new TypeError("mapper is not a function");return Array.from(l,(o,c)=>a(o,c,l))}function yke(l,a,o){if("function"!=typeof a)throw new TypeError("reducer is not a function");const c=l[Symbol.iterator]();let u,h,d=-1;if(arguments.length<3){if(({done:u,value:o}=c.next()),u)return;++d}for(;({done:u,value:h}=c.next()),!u;)o=a(o,h,++d,l);return o}function bke(l){if("function"!=typeof l[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(l).reverse()}function Cke(l,...a){l=new Up(l);for(const o of a)for(const c of o)l.delete(c);return l}function xke(l,a){const o=a[Symbol.iterator](),c=new Up;for(const u of l){if(c.has(u))return!1;let h,d;for(;({value:h,done:d}=o.next())&&!d;){if(Object.is(u,h))return!1;c.add(h)}}return!0}function wke(l,...a){l=new Up(l),a=a.map(Ske);e:for(const o of l)for(const c of a)if(!c.has(o)){l.delete(o);continue e}return l}function Ske(l){return l instanceof Up?l:new Up(l)}function DY(l,a){const o=l[Symbol.iterator](),c=new Set;for(const u of a){const h=MY(u);if(c.has(h))continue;let d,f;for(;({value:d,done:f}=o.next());){if(f)return!1;const p=MY(d);if(c.add(p),Object.is(h,p))break}}return!0}function MY(l){return null!==l&&"object"==typeof l?l.valueOf():l}function Tke(l,a){return DY(a,l)}function Dke(...l){const a=new Up;for(const o of l)for(const c of o)a.add(c);return a}function Mke(l){return l}function Eke(l){return"translate("+l+",0)"}function kke(l){return"translate(0,"+l+")"}function Ake(l){return a=>+l(a)}function Ike(l,a){return a=Math.max(0,l.bandwidth()-2*a)/2,l.round()&&(a=Math.round(a)),o=>+l(o)+a}function Pke(){return!this.__axis}function i2(l,a){var o=[],c=null,u=null,h=6,d=6,f=3,p="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,g=1===l||4===l?-1:1,m=4===l||2===l?"x":"y",v=1===l||3===l?Eke:kke;function _(y){var b=null==c?a.ticks?a.ticks.apply(a,o):a.domain():c,x=null==u?a.tickFormat?a.tickFormat.apply(a,o):Mke:u,C=Math.max(h,0)+f,w=a.range(),S=+w[0]+p,D=+w[w.length-1]+p,T=(a.bandwidth?Ike:Ake)(a.copy(),p),A=y.selection?y.selection():y,I=A.selectAll(".domain").data([null]),N=A.selectAll(".tick").data(b,a).order(),k=N.exit(),F=N.enter().append("g").attr("class","tick"),B=N.select("line"),V=N.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),N=N.merge(F),B=B.merge(F.append("line").attr("stroke","currentColor").attr(m+"2",g*h)),V=V.merge(F.append("text").attr("fill","currentColor").attr(m,g*C).attr("dy",1===l?"0em":3===l?"0.71em":"0.32em")),y!==A&&(I=I.transition(y),N=N.transition(y),B=B.transition(y),V=V.transition(y),k=k.transition(y).attr("opacity",1e-6).attr("transform",function($){return isFinite($=T($))?v($+p):this.getAttribute("transform")}),F.attr("opacity",1e-6).attr("transform",function($){var q=this.parentNode.__axis;return v((q&&isFinite(q=q($))?q:T($))+p)})),k.remove(),I.attr("d",4===l||2===l?d?"M"+g*d+","+S+"H"+p+"V"+D+"H"+g*d:"M"+p+","+S+"V"+D:d?"M"+S+","+g*d+"V"+p+"H"+D+"V"+g*d:"M"+S+","+p+"H"+D),N.attr("opacity",1).attr("transform",function($){return v(T($)+p)}),B.attr(m+"2",g*h),V.attr(m,g*C).text(x),A.filter(Pke).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===l?"start":4===l?"end":"middle"),A.each(function(){this.__axis=T})}return _.scale=function(y){return arguments.length?(a=y,_):a},_.ticks=function(){return o=Array.from(arguments),_},_.tickArguments=function(y){return arguments.length?(o=null==y?[]:Array.from(y),_):o.slice()},_.tickValues=function(y){return arguments.length?(c=null==y?null:Array.from(y),_):c&&c.slice()},_.tickFormat=function(y){return arguments.length?(u=y,_):u},_.tickSize=function(y){return arguments.length?(h=d=+y,_):h},_.tickSizeInner=function(y){return arguments.length?(h=+y,_):h},_.tickSizeOuter=function(y){return arguments.length?(d=+y,_):d},_.tickPadding=function(y){return arguments.length?(f=+y,_):f},_.offset=function(y){return arguments.length?(p=+y,_):p},_}function Oke(l){return i2(1,l)}function Fke(l){return i2(2,l)}function Rke(l){return i2(3,l)}function Nke(l){return i2(4,l)}var Lke={value:()=>{}};function kY(){for(var c,l=0,a=arguments.length,o={};l<a;++l){if(!(c=arguments[l]+"")||c in o||/[\s.]/.test(c))throw new Error("illegal type: "+c);o[c]=[]}return new r2(o)}function r2(l){this._=l}function Bke(l,a){return l.trim().split(/^|\s+/).map(function(o){var c="",u=o.indexOf(".");if(u>=0&&(c=o.slice(u+1),o=o.slice(0,u)),o&&!a.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:c}})}function Vke(l,a){for(var u,o=0,c=l.length;o<c;++o)if((u=l[o]).name===a)return u.value}function AY(l,a,o){for(var c=0,u=l.length;c<u;++c)if(l[c].name===a){l[c]=Lke,l=l.slice(0,c).concat(l.slice(c+1));break}return null!=o&&l.push({name:a,value:o}),l}r2.prototype=kY.prototype={constructor:r2,on:function(l,a){var u,o=this._,c=Bke(l+"",o),h=-1,d=c.length;if(!(arguments.length<2)){if(null!=a&&"function"!=typeof a)throw new Error("invalid callback: "+a);for(;++h<d;)if(u=(l=c[h]).type)o[u]=AY(o[u],l.name,a);else if(null==a)for(u in o)o[u]=AY(o[u],l.name,null);return this}for(;++h<d;)if((u=(l=c[h]).type)&&(u=Vke(o[u],l.name)))return u},copy:function(){var l={},a=this._;for(var o in a)l[o]=a[o].slice();return new r2(l)},call:function(l,a){if((u=arguments.length-2)>0)for(var u,h,o=new Array(u),c=0;c<u;++c)o[c]=arguments[c+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(c=0,u=(h=this._[l]).length;c<u;++c)h[c].value.apply(a,o)},apply:function(l,a,o){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var c=this._[l],u=0,h=c.length;u<h;++u)c[u].value.apply(a,o)}};const z0=kY;function zke(){}function s2(l){return null==l?zke:function(){return this.querySelector(l)}}function IY(l){return null==l?[]:Array.isArray(l)?l:Array.from(l)}function Hke(){return[]}function FP(l){return null==l?Hke:function(){return this.querySelectorAll(l)}}function RP(l){return function(){return this.matches(l)}}function PY(l){return function(a){return a.matches(l)}}var jke=Array.prototype.find;function qke(){return this.firstElementChild}var Xke=Array.prototype.filter;function Zke(){return Array.from(this.children)}function OY(l){return new Array(l.length)}function o2(l,a){this.ownerDocument=l.ownerDocument,this.namespaceURI=l.namespaceURI,this._next=null,this._parent=l,this.__data__=a}function tAe(l){return function(){return l}}function nAe(l,a,o,c,u,h){for(var f,d=0,p=a.length,g=h.length;d<g;++d)(f=a[d])?(f.__data__=h[d],c[d]=f):o[d]=new o2(l,h[d]);for(;d<p;++d)(f=a[d])&&(u[d]=f)}function iAe(l,a,o,c,u,h,d){var f,p,y,g=new Map,m=a.length,v=h.length,_=new Array(m);for(f=0;f<m;++f)(p=a[f])&&(_[f]=y=d.call(p,p.__data__,f,a)+"",g.has(y)?u[f]=p:g.set(y,p));for(f=0;f<v;++f)y=d.call(l,h[f],f,h)+"",(p=g.get(y))?(c[f]=p,p.__data__=h[f],g.delete(y)):o[f]=new o2(l,h[f]);for(f=0;f<m;++f)(p=a[f])&&g.get(_[f])===p&&(u[f]=p)}function rAe(l){return l.__data__}function oAe(l){return"object"==typeof l&&"length"in l?l:Array.from(l)}function dAe(l,a){return l<a?-1:l>a?1:l>=a?0:NaN}o2.prototype={constructor:o2,appendChild:function(l){return this._parent.insertBefore(l,this._next)},insertBefore:function(l,a){return this._parent.insertBefore(l,a)},querySelector:function(l){return this._parent.querySelector(l)},querySelectorAll:function(l){return this._parent.querySelectorAll(l)}};var NP="http://www.w3.org/1999/xhtml";const LP={svg:"http://www.w3.org/2000/svg",xhtml:NP,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nb(l){var a=l+="",o=a.indexOf(":");return o>=0&&"xmlns"!==(a=l.slice(0,o))&&(l=l.slice(o+1)),LP.hasOwnProperty(a)?{space:LP[a],local:l}:l}function yAe(l){return function(){this.removeAttribute(l)}}function bAe(l){return function(){this.removeAttributeNS(l.space,l.local)}}function CAe(l,a){return function(){this.setAttribute(l,a)}}function xAe(l,a){return function(){this.setAttributeNS(l.space,l.local,a)}}function wAe(l,a){return function(){var o=a.apply(this,arguments);null==o?this.removeAttribute(l):this.setAttribute(l,o)}}function SAe(l,a){return function(){var o=a.apply(this,arguments);null==o?this.removeAttributeNS(l.space,l.local):this.setAttributeNS(l.space,l.local,o)}}function BP(l){return l.ownerDocument&&l.ownerDocument.defaultView||l.document&&l||l.defaultView}function DAe(l){return function(){this.style.removeProperty(l)}}function MAe(l,a,o){return function(){this.style.setProperty(l,a,o)}}function EAe(l,a,o){return function(){var c=a.apply(this,arguments);null==c?this.style.removeProperty(l):this.style.setProperty(l,c,o)}}function Hp(l,a){return l.style.getPropertyValue(a)||BP(l).getComputedStyle(l,null).getPropertyValue(a)}function AAe(l){return function(){delete this[l]}}function IAe(l,a){return function(){this[l]=a}}function PAe(l,a){return function(){var o=a.apply(this,arguments);null==o?delete this[l]:this[l]=o}}function FY(l){return l.trim().split(/^|\s+/)}function VP(l){return l.classList||new RY(l)}function RY(l){this._node=l,this._names=FY(l.getAttribute("class")||"")}function NY(l,a){for(var o=VP(l),c=-1,u=a.length;++c<u;)o.add(a[c])}function LY(l,a){for(var o=VP(l),c=-1,u=a.length;++c<u;)o.remove(a[c])}function FAe(l){return function(){NY(this,l)}}function RAe(l){return function(){LY(this,l)}}function NAe(l,a){return function(){(a.apply(this,arguments)?NY:LY)(this,l)}}function BAe(){this.textContent=""}function VAe(l){return function(){this.textContent=l}}function zAe(l){return function(){var a=l.apply(this,arguments);this.textContent=null==a?"":a}}function HAe(){this.innerHTML=""}function WAe(l){return function(){this.innerHTML=l}}function GAe(l){return function(){var a=l.apply(this,arguments);this.innerHTML=null==a?"":a}}function $Ae(){this.nextSibling&&this.parentNode.appendChild(this)}function YAe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ZAe(l){return function(){var a=this.ownerDocument,o=this.namespaceURI;return o===NP&&a.documentElement.namespaceURI===NP?a.createElement(l):a.createElementNS(o,l)}}function KAe(l){return function(){return this.ownerDocument.createElementNS(l.space,l.local)}}function a2(l){var a=nb(l);return(a.local?KAe:ZAe)(a)}function JAe(){return null}function tIe(){var l=this.parentNode;l&&l.removeChild(this)}function iIe(){var l=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(l,this.nextSibling):l}function rIe(){var l=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(l,this.nextSibling):l}function lIe(l){return l.trim().split(/^|\s+/).map(function(a){var o="",c=a.indexOf(".");return c>=0&&(o=a.slice(c+1),a=a.slice(0,c)),{type:a,name:o}})}function cIe(l){return function(){var a=this.__on;if(a){for(var h,o=0,c=-1,u=a.length;o<u;++o)h=a[o],l.type&&h.type!==l.type||h.name!==l.name?a[++c]=h:this.removeEventListener(h.type,h.listener,h.options);++c?a.length=c:delete this.__on}}}function uIe(l,a,o){return function(){var u,c=this.__on,h=function aIe(l){return function(a){l.call(this,a,this.__data__)}}(a);if(c)for(var d=0,f=c.length;d<f;++d)if((u=c[d]).type===l.type&&u.name===l.name)return this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=h,u.options=o),void(u.value=a);this.addEventListener(l.type,h,o),u={type:l.type,name:l.name,value:a,listener:h,options:o},c?c.push(u):this.__on=[u]}}function BY(l,a,o){var c=BP(l),u=c.CustomEvent;"function"==typeof u?u=new u(a,o):(u=c.document.createEvent("Event"),o?(u.initEvent(a,o.bubbles,o.cancelable),u.detail=o.detail):u.initEvent(a,!1,!1)),l.dispatchEvent(u)}function dIe(l,a){return function(){return BY(this,l,a)}}function fIe(l,a){return function(){return BY(this,l,a.apply(this,arguments))}}RY.prototype={add:function(l){this._names.indexOf(l)<0&&(this._names.push(l),this._node.setAttribute("class",this._names.join(" ")))},remove:function(l){var a=this._names.indexOf(l);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(l){return this._names.indexOf(l)>=0}};var zP=[null];function da(l,a){this._groups=l,this._parents=a}function VY(){return new da([[document.documentElement]],zP)}da.prototype=VY.prototype={constructor:da,select:function Uke(l){"function"!=typeof l&&(l=s2(l));for(var a=this._groups,o=a.length,c=new Array(o),u=0;u<o;++u)for(var p,g,h=a[u],d=h.length,f=c[u]=new Array(d),m=0;m<d;++m)(p=h[m])&&(g=l.call(p,p.__data__,m,h))&&("__data__"in p&&(g.__data__=p.__data__),f[m]=g);return new da(c,this._parents)},selectAll:function Gke(l){l="function"==typeof l?function Wke(l){return function(){return IY(l.apply(this,arguments))}}(l):FP(l);for(var a=this._groups,o=a.length,c=[],u=[],h=0;h<o;++h)for(var p,d=a[h],f=d.length,g=0;g<f;++g)(p=d[g])&&(c.push(l.call(p,p.__data__,g,d)),u.push(p));return new da(c,u)},selectChild:function Yke(l){return this.select(null==l?qke:function $ke(l){return function(){return jke.call(this.children,l)}}("function"==typeof l?l:PY(l)))},selectChildren:function Qke(l){return this.selectAll(null==l?Zke:function Kke(l){return function(){return Xke.call(this.children,l)}}("function"==typeof l?l:PY(l)))},filter:function Jke(l){"function"!=typeof l&&(l=RP(l));for(var a=this._groups,o=a.length,c=new Array(o),u=0;u<o;++u)for(var p,h=a[u],d=h.length,f=c[u]=[],g=0;g<d;++g)(p=h[g])&&l.call(p,p.__data__,g,h)&&f.push(p);return new da(c,this._parents)},data:function sAe(l,a){if(!arguments.length)return Array.from(this,rAe);var o=a?iAe:nAe,c=this._parents,u=this._groups;"function"!=typeof l&&(l=tAe(l));for(var h=u.length,d=new Array(h),f=new Array(h),p=new Array(h),g=0;g<h;++g){var m=c[g],v=u[g],_=v.length,y=oAe(l.call(m,m&&m.__data__,g,c)),b=y.length,x=f[g]=new Array(b),C=d[g]=new Array(b),w=p[g]=new Array(_);o(m,v,x,C,w,y,a);for(var T,A,S=0,D=0;S<b;++S)if(T=x[S]){for(S>=D&&(D=S+1);!(A=C[D])&&++D<b;);T._next=A||null}}return(d=new da(d,c))._enter=f,d._exit=p,d},enter:function eAe(){return new da(this._enter||this._groups.map(OY),this._parents)},exit:function aAe(){return new da(this._exit||this._groups.map(OY),this._parents)},join:function lAe(l,a,o){var c=this.enter(),u=this,h=this.exit();return"function"==typeof l?(c=l(c))&&(c=c.selection()):c=c.append(l+""),null!=a&&(u=a(u))&&(u=u.selection()),null==o?h.remove():o(h),c&&u?c.merge(u).order():u},merge:function cAe(l){for(var a=l.selection?l.selection():l,o=this._groups,c=a._groups,u=o.length,d=Math.min(u,c.length),f=new Array(u),p=0;p<d;++p)for(var y,g=o[p],m=c[p],v=g.length,_=f[p]=new Array(v),b=0;b<v;++b)(y=g[b]||m[b])&&(_[b]=y);for(;p<u;++p)f[p]=o[p];return new da(f,this._parents)},selection:function mIe(){return this},order:function uAe(){for(var l=this._groups,a=-1,o=l.length;++a<o;)for(var d,c=l[a],u=c.length-1,h=c[u];--u>=0;)(d=c[u])&&(h&&4^d.compareDocumentPosition(h)&&h.parentNode.insertBefore(d,h),h=d);return this},sort:function hAe(l){function a(v,_){return v&&_?l(v.__data__,_.__data__):!v-!_}l||(l=dAe);for(var o=this._groups,c=o.length,u=new Array(c),h=0;h<c;++h){for(var g,d=o[h],f=d.length,p=u[h]=new Array(f),m=0;m<f;++m)(g=d[m])&&(p[m]=g);p.sort(a)}return new da(u,this._parents).order()},call:function fAe(){var l=arguments[0];return arguments[0]=this,l.apply(null,arguments),this},nodes:function pAe(){return Array.from(this)},node:function gAe(){for(var l=this._groups,a=0,o=l.length;a<o;++a)for(var c=l[a],u=0,h=c.length;u<h;++u){var d=c[u];if(d)return d}return null},size:function mAe(){let l=0;for(const a of this)++l;return l},empty:function vAe(){return!this.node()},each:function _Ae(l){for(var a=this._groups,o=0,c=a.length;o<c;++o)for(var f,u=a[o],h=0,d=u.length;h<d;++h)(f=u[h])&&l.call(f,f.__data__,h,u);return this},attr:function TAe(l,a){var o=nb(l);if(arguments.length<2){var c=this.node();return o.local?c.getAttributeNS(o.space,o.local):c.getAttribute(o)}return this.each((null==a?o.local?bAe:yAe:"function"==typeof a?o.local?SAe:wAe:o.local?xAe:CAe)(o,a))},style:function kAe(l,a,o){return arguments.length>1?this.each((null==a?DAe:"function"==typeof a?EAe:MAe)(l,a,null==o?"":o)):Hp(this.node(),l)},property:function OAe(l,a){return arguments.length>1?this.each((null==a?AAe:"function"==typeof a?PAe:IAe)(l,a)):this.node()[l]},classed:function LAe(l,a){var o=FY(l+"");if(arguments.length<2){for(var c=VP(this.node()),u=-1,h=o.length;++u<h;)if(!c.contains(o[u]))return!1;return!0}return this.each(("function"==typeof a?NAe:a?FAe:RAe)(o,a))},text:function UAe(l){return arguments.length?this.each(null==l?BAe:("function"==typeof l?zAe:VAe)(l)):this.node().textContent},html:function jAe(l){return arguments.length?this.each(null==l?HAe:("function"==typeof l?GAe:WAe)(l)):this.node().innerHTML},raise:function qAe(){return this.each($Ae)},lower:function XAe(){return this.each(YAe)},append:function QAe(l){var a="function"==typeof l?l:a2(l);return this.select(function(){return this.appendChild(a.apply(this,arguments))})},insert:function eIe(l,a){var o="function"==typeof l?l:a2(l),c=null==a?JAe:"function"==typeof a?a:s2(a);return this.select(function(){return this.insertBefore(o.apply(this,arguments),c.apply(this,arguments)||null)})},remove:function nIe(){return this.each(tIe)},clone:function sIe(l){return this.select(l?rIe:iIe)},datum:function oIe(l){return arguments.length?this.property("__data__",l):this.node().__data__},on:function hIe(l,a,o){var u,d,c=lIe(l+""),h=c.length;if(!(arguments.length<2)){for(f=a?uIe:cIe,u=0;u<h;++u)this.each(f(c[u],a,o));return this}var f=this.node().__on;if(f)for(var m,p=0,g=f.length;p<g;++p)for(u=0,m=f[p];u<h;++u)if((d=c[u]).type===m.type&&d.name===m.name)return m.value},dispatch:function pIe(l,a){return this.each(("function"==typeof a?fIe:dIe)(l,a))},[Symbol.iterator]:function*gIe(){for(var l=this._groups,a=0,o=l.length;a<o;++a)for(var d,c=l[a],u=0,h=c.length;u<h;++u)(d=c[u])&&(yield d)}};const U0=VY;function Ns(l){return"string"==typeof l?new da([[document.querySelector(l)]],[document.documentElement]):new da([[l]],zP)}const vIe={passive:!1},ib={capture:!0,passive:!1};function UP(l){l.stopImmediatePropagation()}function H0(l){l.preventDefault(),l.stopImmediatePropagation()}function l2(l){var a=l.document.documentElement,o=Ns(l).on("dragstart.drag",H0,ib);"onselectstart"in a?o.on("selectstart.drag",H0,ib):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function c2(l,a){var o=l.document.documentElement,c=Ns(l).on("dragstart.drag",null);a&&(c.on("click.drag",H0,ib),setTimeout(function(){c.on("click.drag",null)},0)),"onselectstart"in o?c.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}function W0(l,a,o){l.prototype=a.prototype=o,o.constructor=l}function rb(l,a){var o=Object.create(l.prototype);for(var c in a)o[c]=a[c];return o}function tf(){}var G0=1/.7,j0="\\s*([+-]?\\d+)\\s*",sb="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_Ie=/^#([0-9a-f]{3,8})$/,yIe=new RegExp("^rgb\\("+[j0,j0,j0]+"\\)$"),bIe=new RegExp("^rgb\\("+[Hu,Hu,Hu]+"\\)$"),CIe=new RegExp("^rgba\\("+[j0,j0,j0,sb]+"\\)$"),xIe=new RegExp("^rgba\\("+[Hu,Hu,Hu,sb]+"\\)$"),wIe=new RegExp("^hsl\\("+[sb,Hu,Hu]+"\\)$"),SIe=new RegExp("^hsla\\("+[sb,Hu,Hu,sb]+"\\)$"),zY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function UY(){return this.rgb().formatHex()}function HY(){return this.rgb().formatRgb()}function Wc(l){var a,o;return l=(l+"").trim().toLowerCase(),(a=_Ie.exec(l))?(o=a[1].length,a=parseInt(a[1],16),6===o?WY(a):3===o?new So(a>>8&15|a>>4&240,a>>4&15|240&a,(15&a)<<4|15&a,1):8===o?u2(a>>24&255,a>>16&255,a>>8&255,(255&a)/255):4===o?u2(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|240&a,((15&a)<<4|15&a)/255):null):(a=yIe.exec(l))?new So(a[1],a[2],a[3],1):(a=bIe.exec(l))?new So(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=CIe.exec(l))?u2(a[1],a[2],a[3],a[4]):(a=xIe.exec(l))?u2(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=wIe.exec(l))?$Y(a[1],a[2]/100,a[3]/100,1):(a=SIe.exec(l))?$Y(a[1],a[2]/100,a[3]/100,a[4]):zY.hasOwnProperty(l)?WY(zY[l]):"transparent"===l?new So(NaN,NaN,NaN,0):null}function WY(l){return new So(l>>16&255,l>>8&255,255&l,1)}function u2(l,a,o,c){return c<=0&&(l=a=o=NaN),new So(l,a,o,c)}function HP(l){return l instanceof tf||(l=Wc(l)),l?new So((l=l.rgb()).r,l.g,l.b,l.opacity):new So}function qh(l,a,o,c){return 1===arguments.length?HP(l):new So(l,a,o,null==c?1:c)}function So(l,a,o,c){this.r=+l,this.g=+a,this.b=+o,this.opacity=+c}function GY(){return"#"+WP(this.r)+WP(this.g)+WP(this.b)}function jY(){var l=this.opacity;return(1===(l=isNaN(l)?1:Math.max(0,Math.min(1,l)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===l?")":", "+l+")")}function WP(l){return((l=Math.max(0,Math.min(255,Math.round(l)||0)))<16?"0":"")+l.toString(16)}function $Y(l,a,o,c){return c<=0?l=a=o=NaN:o<=0||o>=1?l=a=NaN:a<=0&&(l=NaN),new Wu(l,a,o,c)}function qY(l){if(l instanceof Wu)return new Wu(l.h,l.s,l.l,l.opacity);if(l instanceof tf||(l=Wc(l)),!l)return new Wu;if(l instanceof Wu)return l;var a=(l=l.rgb()).r/255,o=l.g/255,c=l.b/255,u=Math.min(a,o,c),h=Math.max(a,o,c),d=NaN,f=h-u,p=(h+u)/2;return f?(d=a===h?(o-c)/f+6*(o<c):o===h?(c-a)/f+2:(a-o)/f+4,f/=p<.5?h+u:2-h-u,d*=60):f=p>0&&p<1?0:d,new Wu(d,f,p,l.opacity)}function h2(l,a,o,c){return 1===arguments.length?qY(l):new Wu(l,a,o,null==c?1:c)}function Wu(l,a,o,c){this.h=+l,this.s=+a,this.l=+o,this.opacity=+c}function GP(l,a,o){return 255*(l<60?a+(o-a)*l/60:l<180?o:l<240?a+(o-a)*(240-l)/60:a)}function YY(l,a,o,c,u){var h=l*l,d=h*l;return((1-3*l+3*h-d)*a+(4-6*h+3*d)*o+(1+3*l+3*h-3*d)*c+d*u)/6}function XY(l){var a=l.length-1;return function(o){var c=o<=0?o=0:o>=1?(o=1,a-1):Math.floor(o*a),u=l[c],h=l[c+1];return YY((o-c/a)*a,c>0?l[c-1]:2*u-h,u,h,c<a-1?l[c+2]:2*h-u)}}function ZY(l){var a=l.length;return function(o){var c=Math.floor(((o%=1)<0?++o:o)*a);return YY((o-c/a)*a,l[(c+a-1)%a],l[c%a],l[(c+1)%a],l[(c+2)%a])}}W0(tf,Wc,{copy:function(l){return Object.assign(new this.constructor,this,l)},displayable:function(){return this.rgb().displayable()},hex:UY,formatHex:UY,formatHsl:function TIe(){return qY(this).formatHsl()},formatRgb:HY,toString:HY}),W0(So,qh,rb(tf,{brighter:function(l){return l=null==l?G0:Math.pow(G0,l),new So(this.r*l,this.g*l,this.b*l,this.opacity)},darker:function(l){return l=null==l?.7:Math.pow(.7,l),new So(this.r*l,this.g*l,this.b*l,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GY,formatHex:GY,formatRgb:jY,toString:jY})),W0(Wu,h2,rb(tf,{brighter:function(l){return l=null==l?G0:Math.pow(G0,l),new Wu(this.h,this.s,this.l*l,this.opacity)},darker:function(l){return l=null==l?.7:Math.pow(.7,l),new Wu(this.h,this.s,this.l*l,this.opacity)},rgb:function(){var l=this.h%360+360*(this.h<0),a=isNaN(l)||isNaN(this.s)?0:this.s,o=this.l,c=o+(o<.5?o:1-o)*a,u=2*o-c;return new So(GP(l>=240?l-240:l+120,u,c),GP(l,u,c),GP(l<120?l+240:l-120,u,c),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var l=this.opacity;return(1===(l=isNaN(l)?1:Math.max(0,Math.min(1,l)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===l?")":", "+l+")")}}));const d2=l=>()=>l;function KY(l,a){return function(o){return l+o*a}}function f2(l,a){var o=a-l;return o?KY(l,o>180||o<-180?o-360*Math.round(o/360):o):d2(isNaN(l)?a:l)}function go(l,a){var o=a-l;return o?KY(l,o):d2(isNaN(l)?a:l)}const ob=function l(a){var o=function MIe(l){return 1==(l=+l)?go:function(a,o){return o-a?function DIe(l,a,o){return l=Math.pow(l,o),a=Math.pow(a,o)-l,o=1/o,function(c){return Math.pow(l+c*a,o)}}(a,o,l):d2(isNaN(a)?o:a)}}(a);function c(u,h){var d=o((u=qh(u)).r,(h=qh(h)).r),f=o(u.g,h.g),p=o(u.b,h.b),g=go(u.opacity,h.opacity);return function(m){return u.r=d(m),u.g=f(m),u.b=p(m),u.opacity=g(m),u+""}}return c.gamma=l,c}(1);function QY(l){return function(a){var d,f,o=a.length,c=new Array(o),u=new Array(o),h=new Array(o);for(d=0;d<o;++d)f=qh(a[d]),c[d]=f.r||0,u[d]=f.g||0,h[d]=f.b||0;return c=l(c),u=l(u),h=l(h),f.opacity=1,function(p){return f.r=c(p),f.g=u(p),f.b=h(p),f+""}}}var JY=QY(XY),EIe=QY(ZY);function jP(l,a){a||(a=[]);var u,o=l?Math.min(a.length,l.length):0,c=a.slice();return function(h){for(u=0;u<o;++u)c[u]=l[u]*(1-h)+a[u]*h;return c}}function eX(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function kIe(l,a){return(eX(a)?jP:tX)(l,a)}function tX(l,a){var d,o=a?a.length:0,c=l?Math.min(o,l.length):0,u=new Array(c),h=new Array(o);for(d=0;d<c;++d)u[d]=nf(l[d],a[d]);for(;d<o;++d)h[d]=a[d];return function(f){for(d=0;d<c;++d)h[d]=u[d](f);return h}}function nX(l,a){var o=new Date;return l=+l,a=+a,function(c){return o.setTime(l*(1-c)+a*c),o}}function sc(l,a){return l=+l,a=+a,function(o){return l*(1-o)+a*o}}function iX(l,a){var u,o={},c={};for(u in(null===l||"object"!=typeof l)&&(l={}),(null===a||"object"!=typeof a)&&(a={}),a)u in l?o[u]=nf(l[u],a[u]):c[u]=a[u];return function(h){for(u in o)c[u]=o[u](h);return c}}var $P=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qP=new RegExp($P.source,"g");function YP(l,a){var c,u,h,o=$P.lastIndex=qP.lastIndex=0,d=-1,f=[],p=[];for(l+="",a+="";(c=$P.exec(l))&&(u=qP.exec(a));)(h=u.index)>o&&(h=a.slice(o,h),f[d]?f[d]+=h:f[++d]=h),(c=c[0])===(u=u[0])?f[d]?f[d]+=u:f[++d]=u:(f[++d]=null,p.push({i:d,x:sc(c,u)})),o=qP.lastIndex;return o<a.length&&(h=a.slice(o),f[d]?f[d]+=h:f[++d]=h),f.length<2?p[0]?function IIe(l){return function(a){return l(a)+""}}(p[0].x):function AIe(l){return function(){return l}}(a):(a=p.length,function(g){for(var v,m=0;m<a;++m)f[(v=p[m]).i]=v.x(g);return f.join("")})}function nf(l,a){var c,o=typeof a;return null==a||"boolean"===o?d2(a):("number"===o?sc:"string"===o?(c=Wc(a))?(a=c,ob):YP:a instanceof Wc?ob:a instanceof Date?nX:eX(a)?jP:Array.isArray(a)?tX:"function"!=typeof a.valueOf&&"function"!=typeof a.toString||isNaN(a)?iX:sc)(l,a)}function rX(l){let a;for(;a=l.sourceEvent;)l=a;return l}function ml(l,a){if(l=rX(l),void 0===a&&(a=l.currentTarget),a){var o=a.ownerSVGElement||a;if(o.createSVGPoint){var c=o.createSVGPoint();return c.x=l.clientX,c.y=l.clientY,[(c=c.matrixTransform(a.getScreenCTM().inverse())).x,c.y]}if(a.getBoundingClientRect){var u=a.getBoundingClientRect();return[l.clientX-u.left-a.clientLeft,l.clientY-u.top-a.clientTop]}}return[l.pageX,l.pageY]}var p2,cb,$0=0,ab=0,lb=0,g2=0,Gp=0,m2=0,ub="object"==typeof performance&&performance.now?performance:Date,oX="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(l){setTimeout(l,17)};function hb(){return Gp||(oX(PIe),Gp=ub.now()+m2)}function PIe(){Gp=0}function db(){this._call=this._time=this._next=null}function v2(l,a,o){var c=new db;return c.restart(l,a,o),c}function aX(){hb(),++$0;for(var a,l=p2;l;)(a=Gp-l._time)>=0&&l._call.call(void 0,a),l=l._next;--$0}function lX(){Gp=(g2=ub.now())+m2,$0=ab=0;try{aX()}finally{$0=0,function FIe(){for(var l,o,a=p2,c=1/0;a;)a._call?(c>a._time&&(c=a._time),l=a,a=a._next):(o=a._next,a._next=null,a=l?l._next=o:p2=o);cb=l,XP(c)}(),Gp=0}}function OIe(){var l=ub.now(),a=l-g2;a>1e3&&(m2-=a,g2=l)}function XP(l){$0||(ab&&(ab=clearTimeout(ab)),l-Gp>24?(l<1/0&&(ab=setTimeout(lX,l-ub.now()-m2)),lb&&(lb=clearInterval(lb))):(lb||(g2=ub.now(),lb=setInterval(OIe,1e3)),$0=1,oX(lX)))}function ZP(l,a,o){var c=new db;return c.restart(u=>{c.stop(),l(u+a)},a=null==a?0:+a,o),c}db.prototype=v2.prototype={constructor:db,restart:function(l,a,o){if("function"!=typeof l)throw new TypeError("callback is not a function");o=(null==o?hb():+o)+(null==a?0:+a),!this._next&&cb!==this&&(cb?cb._next=this:p2=this,cb=this),this._call=l,this._time=o,XP()},stop:function(){this._call&&(this._call=null,this._time=1/0,XP())}};var RIe=z0("start","end","cancel","interrupt"),NIe=[];function b2(l,a,o,c,u,h){var d=l.__transition;if(d){if(o in d)return}else l.__transition={};!function LIe(l,a,o){var u,c=l.__transition;function d(g){var m,v,_,y;if(1!==o.state)return p();for(m in c)if((y=c[m]).name===o.name){if(3===y.state)return ZP(d);4===y.state?(y.state=6,y.timer.stop(),y.on.call("interrupt",l,l.__data__,y.index,y.group),delete c[m]):+m<a&&(y.state=6,y.timer.stop(),y.on.call("cancel",l,l.__data__,y.index,y.group),delete c[m])}if(ZP(function(){3===o.state&&(o.state=4,o.timer.restart(f,o.delay,o.time),f(g))}),o.state=2,o.on.call("start",l,l.__data__,o.index,o.group),2===o.state){for(o.state=3,u=new Array(_=o.tween.length),m=0,v=-1;m<_;++m)(y=o.tween[m].value.call(l,l.__data__,o.index,o.group))&&(u[++v]=y);u.length=v+1}}function f(g){for(var m=g<o.duration?o.ease.call(null,g/o.duration):(o.timer.restart(p),o.state=5,1),v=-1,_=u.length;++v<_;)u[v].call(l,m);5===o.state&&(o.on.call("end",l,l.__data__,o.index,o.group),p())}function p(){for(var g in o.state=6,o.timer.stop(),delete c[a],c)return;delete l.__transition}c[a]=o,o.timer=v2(function h(g){o.state=1,o.timer.restart(d,o.delay,o.time),o.delay<=g&&d(g-o.delay)},0,o.time)}(l,o,{name:a,index:c,group:u,on:RIe,tween:NIe,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:0})}function eO(l,a){var o=Gc(l,a);if(o.state>0)throw new Error("too late; already scheduled");return o}function Gu(l,a){var o=Gc(l,a);if(o.state>3)throw new Error("too late; already running");return o}function Gc(l,a){var o=l.__transition;if(!o||!(o=o[a]))throw new Error("transition not found");return o}function jp(l,a){var c,u,d,o=l.__transition,h=!0;if(o){for(d in a=null==a?null:a+"",o)(c=o[d]).name===a?(u=c.state>2&&c.state<5,c.state=6,c.timer.stop(),c.on.call(u?"interrupt":"cancel",l,l.__data__,c.index,c.group),delete o[d]):h=!1;h&&delete l.__transition}}var C2,hX=180/Math.PI,tO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dX(l,a,o,c,u,h){var d,f,p;return(d=Math.sqrt(l*l+a*a))&&(l/=d,a/=d),(p=l*o+a*c)&&(o-=l*p,c-=a*p),(f=Math.sqrt(o*o+c*c))&&(o/=f,c/=f,p/=f),l*c<a*o&&(l=-l,a=-a,p=-p,d=-d),{translateX:u,translateY:h,rotate:Math.atan2(a,l)*hX,skewX:Math.atan(p)*hX,scaleX:d,scaleY:f}}function fX(l,a,o,c){function u(g){return g.length?g.pop()+" ":""}return function(g,m){var v=[],_=[];return g=l(g),m=l(m),function h(g,m,v,_,y,b){if(g!==v||m!==_){var x=y.push("translate(",null,a,null,o);b.push({i:x-4,x:sc(g,v)},{i:x-2,x:sc(m,_)})}else(v||_)&&y.push("translate("+v+a+_+o)}(g.translateX,g.translateY,m.translateX,m.translateY,v,_),function d(g,m,v,_){g!==m?(g-m>180?m+=360:m-g>180&&(g+=360),_.push({i:v.push(u(v)+"rotate(",null,c)-2,x:sc(g,m)})):m&&v.push(u(v)+"rotate("+m+c)}(g.rotate,m.rotate,v,_),function f(g,m,v,_){g!==m?_.push({i:v.push(u(v)+"skewX(",null,c)-2,x:sc(g,m)}):m&&v.push(u(v)+"skewX("+m+c)}(g.skewX,m.skewX,v,_),function p(g,m,v,_,y,b){if(g!==v||m!==_){var x=y.push(u(y)+"scale(",null,",",null,")");b.push({i:x-4,x:sc(g,v)},{i:x-2,x:sc(m,_)})}else(1!==v||1!==_)&&y.push(u(y)+"scale("+v+","+_+")")}(g.scaleX,g.scaleY,m.scaleX,m.scaleY,v,_),g=m=null,function(y){for(var C,b=-1,x=_.length;++b<x;)v[(C=_[b]).i]=C.x(y);return v.join("")}}}var pX=fX(function VIe(l){const a=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(l+"");return a.isIdentity?tO:dX(a.a,a.b,a.c,a.d,a.e,a.f)},"px, ","px)","deg)"),gX=fX(function zIe(l){return null!=l&&(C2||(C2=document.createElementNS("http://www.w3.org/2000/svg","g")),C2.setAttribute("transform",l),l=C2.transform.baseVal.consolidate())?dX((l=l.matrix).a,l.b,l.c,l.d,l.e,l.f):tO},", ",")",")");function UIe(l,a){var o,c;return function(){var u=Gu(this,l),h=u.tween;if(h!==o)for(var d=0,f=(c=o=h).length;d<f;++d)if(c[d].name===a){(c=c.slice()).splice(d,1);break}u.tween=c}}function HIe(l,a,o){var c,u;if("function"!=typeof o)throw new Error;return function(){var h=Gu(this,l),d=h.tween;if(d!==c){u=(c=d).slice();for(var f={name:a,value:o},p=0,g=u.length;p<g;++p)if(u[p].name===a){u[p]=f;break}p===g&&u.push(f)}h.tween=u}}function nO(l,a,o){var c=l._id;return l.each(function(){var u=Gu(this,c);(u.value||(u.value={}))[a]=o.apply(this,arguments)}),function(u){return Gc(u,c).value[a]}}function mX(l,a){var o;return("number"==typeof a?sc:a instanceof Wc?ob:(o=Wc(a))?(a=o,ob):YP)(l,a)}function GIe(l){return function(){this.removeAttribute(l)}}function jIe(l){return function(){this.removeAttributeNS(l.space,l.local)}}function $Ie(l,a,o){var c,h,u=o+"";return function(){var d=this.getAttribute(l);return d===u?null:d===c?h:h=a(c=d,o)}}function qIe(l,a,o){var c,h,u=o+"";return function(){var d=this.getAttributeNS(l.space,l.local);return d===u?null:d===c?h:h=a(c=d,o)}}function YIe(l,a,o){var c,u,h;return function(){var d,p,f=o(this);return null==f?void this.removeAttribute(l):(d=this.getAttribute(l))===(p=f+"")?null:d===c&&p===u?h:(u=p,h=a(c=d,f))}}function XIe(l,a,o){var c,u,h;return function(){var d,p,f=o(this);return null==f?void this.removeAttributeNS(l.space,l.local):(d=this.getAttributeNS(l.space,l.local))===(p=f+"")?null:d===c&&p===u?h:(u=p,h=a(c=d,f))}}function KIe(l,a){return function(o){this.setAttribute(l,a.call(this,o))}}function QIe(l,a){return function(o){this.setAttributeNS(l.space,l.local,a.call(this,o))}}function JIe(l,a){var o,c;function u(){var h=a.apply(this,arguments);return h!==c&&(o=(c=h)&&QIe(l,h)),o}return u._value=a,u}function e3e(l,a){var o,c;function u(){var h=a.apply(this,arguments);return h!==c&&(o=(c=h)&&KIe(l,h)),o}return u._value=a,u}function n3e(l,a){return function(){eO(this,l).delay=+a.apply(this,arguments)}}function i3e(l,a){return a=+a,function(){eO(this,l).delay=a}}function s3e(l,a){return function(){Gu(this,l).duration=+a.apply(this,arguments)}}function o3e(l,a){return a=+a,function(){Gu(this,l).duration=a}}function l3e(l,a){if("function"!=typeof a)throw new Error;return function(){Gu(this,l).ease=a}}function g3e(l,a,o){var c,u,h=function p3e(l){return(l+"").trim().split(/^|\s+/).every(function(a){var o=a.indexOf(".");return o>=0&&(a=a.slice(0,o)),!a||"start"===a})}(a)?eO:Gu;return function(){var d=h(this,l),f=d.on;f!==c&&(u=(c=f).copy()).on(a,o),d.on=u}}var C3e=U0.prototype.constructor;function vX(l){return function(){this.style.removeProperty(l)}}function E3e(l,a,o){return function(c){this.style.setProperty(l,a.call(this,c),o)}}function k3e(l,a,o){var c,u;function h(){var d=a.apply(this,arguments);return d!==u&&(c=(u=d)&&E3e(l,d,o)),c}return h._value=a,h}function F3e(l){return function(a){this.textContent=l.call(this,a)}}function R3e(l){var a,o;function c(){var u=l.apply(this,arguments);return u!==o&&(a=(o=u)&&F3e(u)),a}return c._value=l,c}var V3e=0;function ju(l,a,o,c){this._groups=l,this._parents=a,this._name=o,this._id=c}function _X(l){return U0().transition(l)}function yX(){return++V3e}var Yh=U0.prototype;function z3e(l){return l*l*l}function U3e(l){return--l*l*l+1}function iO(l){return((l*=2)<=1?l*l*l:(l-=2)*l*l+2)/2}ju.prototype=_X.prototype={constructor:ju,select:function y3e(l){var a=this._name,o=this._id;"function"!=typeof l&&(l=s2(l));for(var c=this._groups,u=c.length,h=new Array(u),d=0;d<u;++d)for(var m,v,f=c[d],p=f.length,g=h[d]=new Array(p),_=0;_<p;++_)(m=f[_])&&(v=l.call(m,m.__data__,_,f))&&("__data__"in m&&(v.__data__=m.__data__),g[_]=v,b2(g[_],a,o,_,g,Gc(m,o)));return new ju(h,this._parents,a,o)},selectAll:function b3e(l){var a=this._name,o=this._id;"function"!=typeof l&&(l=FP(l));for(var c=this._groups,u=c.length,h=[],d=[],f=0;f<u;++f)for(var m,p=c[f],g=p.length,v=0;v<g;++v)if(m=p[v]){for(var y,_=l.call(m,m.__data__,v,p),b=Gc(m,o),x=0,C=_.length;x<C;++x)(y=_[x])&&b2(y,a,o,x,_,b);h.push(_),d.push(m)}return new ju(h,d,a,o)},selectChild:Yh.selectChild,selectChildren:Yh.selectChildren,filter:function d3e(l){"function"!=typeof l&&(l=RP(l));for(var a=this._groups,o=a.length,c=new Array(o),u=0;u<o;++u)for(var p,h=a[u],d=h.length,f=c[u]=[],g=0;g<d;++g)(p=h[g])&&l.call(p,p.__data__,g,h)&&f.push(p);return new ju(c,this._parents,this._name,this._id)},merge:function f3e(l){if(l._id!==this._id)throw new Error;for(var a=this._groups,o=l._groups,c=a.length,h=Math.min(c,o.length),d=new Array(c),f=0;f<h;++f)for(var _,p=a[f],g=o[f],m=p.length,v=d[f]=new Array(m),y=0;y<m;++y)(_=p[y]||g[y])&&(v[y]=_);for(;f<c;++f)d[f]=a[f];return new ju(d,this._parents,this._name,this._id)},selection:function x3e(){return new C3e(this._groups,this._parents)},transition:function L3e(){for(var l=this._name,a=this._id,o=yX(),c=this._groups,u=c.length,h=0;h<u;++h)for(var p,d=c[h],f=d.length,g=0;g<f;++g)if(p=d[g]){var m=Gc(p,a);b2(p,l,o,g,d,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new ju(c,this._parents,l,o)},call:Yh.call,nodes:Yh.nodes,node:Yh.node,size:Yh.size,empty:Yh.empty,each:Yh.each,on:function m3e(l,a){var o=this._id;return arguments.length<2?Gc(this.node(),o).on.on(l):this.each(g3e(o,l,a))},attr:function ZIe(l,a){var o=nb(l),c="transform"===o?gX:mX;return this.attrTween(l,"function"==typeof a?(o.local?XIe:YIe)(o,c,nO(this,"attr."+l,a)):null==a?(o.local?jIe:GIe)(o):(o.local?qIe:$Ie)(o,c,a))},attrTween:function t3e(l,a){var o="attr."+l;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==a)return this.tween(o,null);if("function"!=typeof a)throw new Error;var c=nb(l);return this.tween(o,(c.local?JIe:e3e)(c,a))},style:function M3e(l,a,o){var c="transform"==(l+="")?pX:mX;return null==a?this.styleTween(l,function w3e(l,a){var o,c,u;return function(){var h=Hp(this,l),d=(this.style.removeProperty(l),Hp(this,l));return h===d?null:h===o&&d===c?u:u=a(o=h,c=d)}}(l,c)).on("end.style."+l,vX(l)):"function"==typeof a?this.styleTween(l,function T3e(l,a,o){var c,u,h;return function(){var d=Hp(this,l),f=o(this),p=f+"";return null==f&&(this.style.removeProperty(l),p=f=Hp(this,l)),d===p?null:d===c&&p===u?h:(u=p,h=a(c=d,f))}}(l,c,nO(this,"style."+l,a))).each(function D3e(l,a){var o,c,u,f,h="style."+a,d="end."+h;return function(){var p=Gu(this,l),g=p.on,m=null==p.value[h]?f||(f=vX(a)):void 0;(g!==o||u!==m)&&(c=(o=g).copy()).on(d,u=m),p.on=c}}(this._id,l)):this.styleTween(l,function S3e(l,a,o){var c,h,u=o+"";return function(){var d=Hp(this,l);return d===u?null:d===c?h:h=a(c=d,o)}}(l,c,a),o).on("end.style."+l,null)},styleTween:function A3e(l,a,o){var c="style."+(l+="");if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==a)return this.tween(c,null);if("function"!=typeof a)throw new Error;return this.tween(c,k3e(l,a,null==o?"":o))},text:function O3e(l){return this.tween("text","function"==typeof l?function P3e(l){return function(){var a=l(this);this.textContent=null==a?"":a}}(nO(this,"text",l)):function I3e(l){return function(){this.textContent=l}}(null==l?"":l+""))},textTween:function N3e(l){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(null==l)return this.tween(a,null);if("function"!=typeof l)throw new Error;return this.tween(a,R3e(l))},remove:function _3e(){return this.on("end.remove",function v3e(l){return function(){var a=this.parentNode;for(var o in this.__transition)if(+o!==l)return;a&&a.removeChild(this)}}(this._id))},tween:function WIe(l,a){var o=this._id;if(l+="",arguments.length<2){for(var d,c=Gc(this.node(),o).tween,u=0,h=c.length;u<h;++u)if((d=c[u]).name===l)return d.value;return null}return this.each((null==a?UIe:HIe)(o,l,a))},delay:function r3e(l){var a=this._id;return arguments.length?this.each(("function"==typeof l?n3e:i3e)(a,l)):Gc(this.node(),a).delay},duration:function a3e(l){var a=this._id;return arguments.length?this.each(("function"==typeof l?s3e:o3e)(a,l)):Gc(this.node(),a).duration},ease:function c3e(l){var a=this._id;return arguments.length?this.each(l3e(a,l)):Gc(this.node(),a).ease},easeVarying:function h3e(l){if("function"!=typeof l)throw new Error;return this.each(function u3e(l,a){return function(){var o=a.apply(this,arguments);if("function"!=typeof o)throw new Error;Gu(this,l).ease=o}}(this._id,l))},end:function B3e(){var l,a,o=this,c=o._id,u=o.size();return new Promise(function(h,d){var f={value:d},p={value:function(){0==--u&&h()}};o.each(function(){var g=Gu(this,c),m=g.on;m!==l&&((a=(l=m).copy())._.cancel.push(f),a._.interrupt.push(f),a._.end.push(p)),g.on=a}),0===u&&h()})},[Symbol.iterator]:Yh[Symbol.iterator]};var H3e={time:null,delay:0,duration:250,ease:iO};function W3e(l,a){for(var o;!(o=l.__transition)||!(o=o[a]);)if(!(l=l.parentNode))throw new Error(`transition ${a} not found`);return o}U0.prototype.interrupt=function BIe(l){return this.each(function(){jp(this,l)})},U0.prototype.transition=function G3e(l){var a,o;l instanceof ju?(a=l._id,l=l._name):(a=yX(),(o=H3e).time=hb(),l=null==l?null:l+"");for(var c=this._groups,u=c.length,h=0;h<u;++h)for(var p,d=c[h],f=d.length,g=0;g<f;++g)(p=d[g])&&b2(p,l,a,g,d,o||W3e(p,a));return new ju(c,this._parents,l,a)};var j3e=[null];function $3e(l,a){var c,u,o=l.__transition;if(o)for(u in a=null==a?null:a+"",o)if((c=o[u]).state>1&&c.name===a)return new ju([[l]],j3e,a,+u);return null}const rO=l=>()=>l;function q3e(l,{sourceEvent:a,target:o,selection:c,mode:u,dispatch:h}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},selection:{value:c,enumerable:!0,configurable:!0},mode:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function Y3e(l){l.stopImmediatePropagation()}function sO(l){l.preventDefault(),l.stopImmediatePropagation()}var bX={name:"drag"},oO={name:"space"},q0={name:"handle"},Y0={name:"center"};const{abs:CX,max:Ho,min:Wo}=Math;function xX(l){return[+l[0],+l[1]]}function aO(l){return[xX(l[0]),xX(l[1])]}var x2={name:"x",handles:["w","e"].map(fb),input:function(l,a){return null==l?null:[[+l[0],a[0][1]],[+l[1],a[1][1]]]},output:function(l){return l&&[l[0][0],l[1][0]]}},w2={name:"y",handles:["n","s"].map(fb),input:function(l,a){return null==l?null:[[a[0][0],+l[0]],[a[1][0],+l[1]]]},output:function(l){return l&&[l[0][1],l[1][1]]}},X3e={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(fb),input:function(l){return null==l?null:aO(l)},output:function(l){return l}},Xh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},SX={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Z3e={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},K3e={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function fb(l){return{type:l}}function Q3e(l){return!l.ctrlKey&&!l.button}function J3e(){var l=this.ownerSVGElement||this;return l.hasAttribute("viewBox")?[[(l=l.viewBox.baseVal).x,l.y],[l.x+l.width,l.y+l.height]]:[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]}function e4e(){return navigator.maxTouchPoints||"ontouchstart"in this}function lO(l){for(;!l.__brush;)if(!(l=l.parentNode))return;return l.__brush}function t4e(l){return l[0][0]===l[1][0]||l[0][1]===l[1][1]}function n4e(l){var a=l.__brush;return a?a.dim.output(a.selection):null}function i4e(){return cO(x2)}function r4e(){return cO(w2)}function s4e(){return cO(X3e)}function cO(l){var f,a=J3e,o=Q3e,c=e4e,u=!0,h=z0("start","brush","end"),d=6;function p(C){var w=C.property("__brush",x).selectAll(".overlay").data([fb("overlay")]);w.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Xh.overlay).merge(w).each(function(){var D=lO(this).extent;Ns(this).attr("x",D[0][0]).attr("y",D[0][1]).attr("width",D[1][0]-D[0][0]).attr("height",D[1][1]-D[0][1])}),C.selectAll(".selection").data([fb("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Xh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=C.selectAll(".handle").data(l.handles,function(D){return D.type});S.exit().remove(),S.enter().append("rect").attr("class",function(D){return"handle handle--"+D.type}).attr("cursor",function(D){return Xh[D.type]}),C.each(g).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",_).filter(c).on("touchstart.brush",_).on("touchmove.brush",y).on("touchend.brush touchcancel.brush",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(){var C=Ns(this),w=lO(this).selection;w?(C.selectAll(".selection").style("display",null).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1]),C.selectAll(".handle").style("display",null).attr("x",function(S){return"e"===S.type[S.type.length-1]?w[1][0]-d/2:w[0][0]-d/2}).attr("y",function(S){return"s"===S.type[0]?w[1][1]-d/2:w[0][1]-d/2}).attr("width",function(S){return"n"===S.type||"s"===S.type?w[1][0]-w[0][0]+d:d}).attr("height",function(S){return"e"===S.type||"w"===S.type?w[1][1]-w[0][1]+d:d})):C.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function m(C,w,S){var D=C.__brush.emitter;return!D||S&&D.clean?new v(C,w,S):D}function v(C,w,S){this.that=C,this.args=w,this.state=C.__brush,this.active=0,this.clean=S}function _(C){if((!f||C.touches)&&o.apply(this,arguments)){var B,V,q,L,z,W,j,G,ce,xe,ve,w=this,S=C.target.__data__.type,D="selection"===(u&&C.metaKey?S="overlay":S)?bX:u&&C.altKey?Y0:q0,T=l===w2?null:Z3e[S],A=l===x2?null:K3e[S],I=lO(w),N=I.extent,k=I.selection,F=N[0][0],$=N[0][1],U=N[1][0],H=N[1][1],K=0,J=0,oe=T&&A&&u&&C.shiftKey,De=Array.from(C.touches||[C],Se=>{const Ge=Se.identifier;return(Se=ml(Se,w)).point0=Se.slice(),Se.identifier=Ge,Se});jp(w);var We=m(w,arguments,!0).beforestart();if("overlay"===S){k&&(ce=!0);const Se=[De[0],De[1]||De[0]];I.selection=k=[[B=l===w2?F:Wo(Se[0][0],Se[1][0]),q=l===x2?$:Wo(Se[0][1],Se[1][1])],[z=l===w2?U:Ho(Se[0][0],Se[1][0]),j=l===x2?H:Ho(Se[0][1],Se[1][1])]],De.length>1&&Fe(C)}else B=k[0][0],q=k[0][1],z=k[1][0],j=k[1][1];V=B,L=q,W=z,G=j;var ke=Ns(w).attr("pointer-events","none"),Pe=ke.selectAll(".overlay").attr("cursor",Xh[S]);if(C.touches)We.moved=he,We.ended=Ke;else{var Ze=Ns(C.view).on("mousemove.brush",he,!0).on("mouseup.brush",Ke,!0);u&&Ze.on("keydown.brush",nt,!0).on("keyup.brush",$e,!0),l2(C.view)}g.call(w),We.start(C,D.name)}function he(Se){for(const Ge of Se.changedTouches||[Se])for(const Bt of De)Bt.identifier===Ge.identifier&&(Bt.cur=ml(Ge,w));if(oe&&!xe&&!ve&&1===De.length){const Ge=De[0];CX(Ge.cur[0]-Ge[0])>CX(Ge.cur[1]-Ge[1])?ve=!0:xe=!0}for(const Ge of De)Ge.cur&&(Ge[0]=Ge.cur[0],Ge[1]=Ge.cur[1]);ce=!0,sO(Se),Fe(Se)}function Fe(Se){const Ge=De[0],Bt=Ge.point0;var vn;switch(K=Ge[0]-Bt[0],J=Ge[1]-Bt[1],D){case oO:case bX:T&&(K=Ho(F-B,Wo(U-z,K)),V=B+K,W=z+K),A&&(J=Ho($-q,Wo(H-j,J)),L=q+J,G=j+J);break;case q0:De[1]?(T&&(V=Ho(F,Wo(U,De[0][0])),W=Ho(F,Wo(U,De[1][0])),T=1),A&&(L=Ho($,Wo(H,De[0][1])),G=Ho($,Wo(H,De[1][1])),A=1)):(T<0?(K=Ho(F-B,Wo(U-B,K)),V=B+K,W=z):T>0&&(K=Ho(F-z,Wo(U-z,K)),V=B,W=z+K),A<0?(J=Ho($-q,Wo(H-q,J)),L=q+J,G=j):A>0&&(J=Ho($-j,Wo(H-j,J)),L=q,G=j+J));break;case Y0:T&&(V=Ho(F,Wo(U,B-K*T)),W=Ho(F,Wo(U,z+K*T))),A&&(L=Ho($,Wo(H,q-J*A)),G=Ho($,Wo(H,j+J*A)))}W<V&&(T*=-1,vn=B,B=z,z=vn,vn=V,V=W,W=vn,S in wX&&Pe.attr("cursor",Xh[S=wX[S]])),G<L&&(A*=-1,vn=q,q=j,j=vn,vn=L,L=G,G=vn,S in SX&&Pe.attr("cursor",Xh[S=SX[S]])),I.selection&&(k=I.selection),xe&&(V=k[0][0],W=k[1][0]),ve&&(L=k[0][1],G=k[1][1]),(k[0][0]!==V||k[0][1]!==L||k[1][0]!==W||k[1][1]!==G)&&(I.selection=[[V,L],[W,G]],g.call(w),We.brush(Se,D.name))}function Ke(Se){if(Y3e(Se),Se.touches){if(Se.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500)}else c2(Se.view,ce),Ze.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ke.attr("pointer-events","all"),Pe.attr("cursor",Xh.overlay),I.selection&&(k=I.selection),t4e(k)&&(I.selection=null,g.call(w)),We.end(Se,D.name)}function nt(Se){switch(Se.keyCode){case 16:oe=T&&A;break;case 18:D===q0&&(T&&(z=W-K*T,B=V+K*T),A&&(j=G-J*A,q=L+J*A),D=Y0,Fe(Se));break;case 32:(D===q0||D===Y0)&&(T<0?z=W-K:T>0&&(B=V-K),A<0?j=G-J:A>0&&(q=L-J),D=oO,Pe.attr("cursor",Xh.selection),Fe(Se));break;default:return}sO(Se)}function $e(Se){switch(Se.keyCode){case 16:oe&&(xe=ve=oe=!1,Fe(Se));break;case 18:D===Y0&&(T<0?z=W:T>0&&(B=V),A<0?j=G:A>0&&(q=L),D=q0,Fe(Se));break;case 32:D===oO&&(Se.altKey?(T&&(z=W-K*T,B=V+K*T),A&&(j=G-J*A,q=L+J*A),D=Y0):(T<0?z=W:T>0&&(B=V),A<0?j=G:A>0&&(q=L),D=q0),Pe.attr("cursor",Xh[S]),Fe(Se));break;default:return}sO(Se)}}function y(C){m(this,arguments).moved(C)}function b(C){m(this,arguments).ended(C)}function x(){var C=this.__brush||{selection:null};return C.extent=aO(a.apply(this,arguments)),C.dim=l,C}return p.move=function(C,w,S){C.tween?C.on("start.brush",function(D){m(this,arguments).beforestart().start(D)}).on("interrupt.brush end.brush",function(D){m(this,arguments).end(D)}).tween("brush",function(){var D=this,T=D.__brush,A=m(D,arguments),I=T.selection,N=l.input("function"==typeof w?w.apply(this,arguments):w,T.extent),k=nf(I,N);function F(B){T.selection=1===B&&null===N?null:k(B),g.call(D),A.brush()}return null!==I&&null!==N?F:F(1)}):C.each(function(){var D=this,T=arguments,A=D.__brush,I=l.input("function"==typeof w?w.apply(D,T):w,A.extent),N=m(D,T).beforestart();jp(D),A.selection=null===I?null:I,g.call(D),N.start(S).brush(S).end(S)})},p.clear=function(C,w){p.move(C,null,w)},v.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(C,w){return this.starting?(this.starting=!1,this.emit("start",C,w)):this.emit("brush",C),this},brush:function(C,w){return this.emit("brush",C,w),this},end:function(C,w){return 0==--this.active&&(delete this.state.emitter,this.emit("end",C,w)),this},emit:function(C,w,S){var D=Ns(this.that).datum();h.call(C,this.that,new q3e(C,{sourceEvent:w,target:p,selection:l.output(this.state.selection),mode:S,dispatch:h}),D)}},p.extent=function(C){return arguments.length?(a="function"==typeof C?C:rO(aO(C)),p):a},p.filter=function(C){return arguments.length?(o="function"==typeof C?C:rO(!!C),p):o},p.touchable=function(C){return arguments.length?(c="function"==typeof C?C:rO(!!C),p):c},p.handleSize=function(C){return arguments.length?(d=+C,p):d},p.keyModifiers=function(C){return arguments.length?(u=!!C,p):u},p.on=function(){var C=h.on.apply(h,arguments);return C===h?p:C},p}var TX=Math.abs,X0=Math.cos,Z0=Math.sin,DX=Math.PI,S2=DX/2,MX=2*DX,EX=Math.max,uO=1e-12;function hO(l,a){return Array.from({length:a-l},(o,c)=>l+c)}function o4e(l){return function(a,o){return l(a.source.value+a.target.value,o.source.value+o.target.value)}}function a4e(){return dO(!1,!1)}function l4e(){return dO(!1,!0)}function c4e(){return dO(!0,!1)}function dO(l,a){var o=0,c=null,u=null,h=null;function d(f){var b,p=f.length,g=new Array(p),m=hO(0,p),v=new Array(p*p),_=new Array(p),y=0;f=Float64Array.from({length:p*p},a?(x,C)=>f[C%p][C/p|0]:(x,C)=>f[C/p|0][C%p]);for(let x=0;x<p;++x){let C=0;for(let w=0;w<p;++w)C+=f[x*p+w]+l*f[w*p+x];y+=g[x]=C}b=(y=EX(0,MX-o*p)/y)?o:MX/p;{let x=0;c&&m.sort((C,w)=>c(g[C],g[w]));for(const C of m){const w=x;if(l){const S=hO(1+~p,p).filter(D=>D<0?f[~D*p+C]:f[C*p+D]);u&&S.sort((D,T)=>u(D<0?-f[~D*p+C]:f[C*p+D],T<0?-f[~T*p+C]:f[C*p+T]));for(const D of S)D<0?(v[~D*p+C]||(v[~D*p+C]={source:null,target:null})).target={index:C,startAngle:x,endAngle:x+=f[~D*p+C]*y,value:f[~D*p+C]}:(v[C*p+D]||(v[C*p+D]={source:null,target:null})).source={index:C,startAngle:x,endAngle:x+=f[C*p+D]*y,value:f[C*p+D]};_[C]={index:C,startAngle:w,endAngle:x,value:g[C]}}else{const S=hO(0,p).filter(D=>f[C*p+D]||f[D*p+C]);u&&S.sort((D,T)=>u(f[C*p+D],f[C*p+T]));for(const D of S){let T;if(C<D?(T=v[C*p+D]||(v[C*p+D]={source:null,target:null}),T.source={index:C,startAngle:x,endAngle:x+=f[C*p+D]*y,value:f[C*p+D]}):(T=v[D*p+C]||(v[D*p+C]={source:null,target:null}),T.target={index:C,startAngle:x,endAngle:x+=f[C*p+D]*y,value:f[C*p+D]},C===D&&(T.source=T.target)),T.source&&T.target&&T.source.value<T.target.value){const A=T.source;T.source=T.target,T.target=A}}_[C]={index:C,startAngle:w,endAngle:x,value:g[C]}}x+=b}}return(v=Object.values(v)).groups=_,h?v.sort(h):v}return d.padAngle=function(f){return arguments.length?(o=EX(0,f),d):o},d.sortGroups=function(f){return arguments.length?(c=f,d):c},d.sortSubgroups=function(f){return arguments.length?(u=f,d):u},d.sortChords=function(f){return arguments.length?(null==f?h=null:(h=o4e(f))._=f,d):h&&h._},d}const fO=Math.PI,pO=2*fO,$p=1e-6,u4e=pO-$p;function gO(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function kX(){return new gO}gO.prototype=kX.prototype={constructor:gO,moveTo:function(l,a){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(l,a){this._+="L"+(this._x1=+l)+","+(this._y1=+a)},quadraticCurveTo:function(l,a,o,c){this._+="Q"+ +l+","+ +a+","+(this._x1=+o)+","+(this._y1=+c)},bezierCurveTo:function(l,a,o,c,u,h){this._+="C"+ +l+","+ +a+","+ +o+","+ +c+","+(this._x1=+u)+","+(this._y1=+h)},arcTo:function(l,a,o,c,u){var h=this._x1,d=this._y1,f=(o=+o)-(l=+l),p=(c=+c)-(a=+a),g=h-l,m=d-a,v=g*g+m*m;if((u=+u)<0)throw new Error("negative radius: "+u);if(null===this._x1)this._+="M"+(this._x1=l)+","+(this._y1=a);else if(v>$p)if(Math.abs(m*f-p*g)>$p&&u){var _=o-h,y=c-d,b=f*f+p*p,x=_*_+y*y,C=Math.sqrt(b),w=Math.sqrt(v),S=u*Math.tan((fO-Math.acos((b+v-x)/(2*C*w)))/2),D=S/w,T=S/C;Math.abs(D-1)>$p&&(this._+="L"+(l+D*g)+","+(a+D*m)),this._+="A"+u+","+u+",0,0,"+ +(m*_>g*y)+","+(this._x1=l+T*f)+","+(this._y1=a+T*p)}else this._+="L"+(this._x1=l)+","+(this._y1=a)},arc:function(l,a,o,c,u,h){l=+l,a=+a,h=!!h;var d=(o=+o)*Math.cos(c),f=o*Math.sin(c),p=l+d,g=a+f,m=1^h,v=h?c-u:u-c;if(o<0)throw new Error("negative radius: "+o);null===this._x1?this._+="M"+p+","+g:(Math.abs(this._x1-p)>$p||Math.abs(this._y1-g)>$p)&&(this._+="L"+p+","+g),o&&(v<0&&(v=v%pO+pO),v>u4e?this._+="A"+o+","+o+",0,1,"+m+","+(l-d)+","+(a-f)+"A"+o+","+o+",0,1,"+m+","+(this._x1=p)+","+(this._y1=g):v>$p&&(this._+="A"+o+","+o+",0,"+ +(v>=fO)+","+m+","+(this._x1=l+o*Math.cos(u))+","+(this._y1=a+o*Math.sin(u))))},rect:function(l,a,o,c){this._+="M"+(this._x0=this._x1=+l)+","+(this._y0=this._y1=+a)+"h"+ +o+"v"+ +c+"h"+-o+"Z"},toString:function(){return this._}};const Zh=kX;var h4e=Array.prototype.slice;function qp(l){return function(){return l}}function d4e(l){return l.source}function f4e(l){return l.target}function AX(l){return l.radius}function p4e(l){return l.startAngle}function g4e(l){return l.endAngle}function m4e(){return 0}function v4e(){return 10}function IX(l){var a=d4e,o=f4e,c=AX,u=AX,h=p4e,d=g4e,f=m4e,p=null;function g(){var m,v=a.apply(this,arguments),_=o.apply(this,arguments),y=f.apply(this,arguments)/2,b=h4e.call(arguments),x=+c.apply(this,(b[0]=v,b)),C=h.apply(this,b)-S2,w=d.apply(this,b)-S2,S=+u.apply(this,(b[0]=_,b)),D=h.apply(this,b)-S2,T=d.apply(this,b)-S2;if(p||(p=m=Zh()),y>uO&&(TX(w-C)>2*y+uO?w>C?(C+=y,w-=y):(C-=y,w+=y):C=w=(C+w)/2,TX(T-D)>2*y+uO?T>D?(D+=y,T-=y):(D-=y,T+=y):D=T=(D+T)/2),p.moveTo(x*X0(C),x*Z0(C)),p.arc(0,0,x,C,w),C!==D||w!==T)if(l){var A=+l.apply(this,arguments),I=S-A,N=(D+T)/2;p.quadraticCurveTo(0,0,I*X0(D),I*Z0(D)),p.lineTo(S*X0(N),S*Z0(N)),p.lineTo(I*X0(T),I*Z0(T))}else p.quadraticCurveTo(0,0,S*X0(D),S*Z0(D)),p.arc(0,0,S,D,T);if(p.quadraticCurveTo(0,0,x*X0(C),x*Z0(C)),p.closePath(),m)return p=null,m+""||null}return l&&(g.headRadius=function(m){return arguments.length?(l="function"==typeof m?m:qp(+m),g):l}),g.radius=function(m){return arguments.length?(c=u="function"==typeof m?m:qp(+m),g):c},g.sourceRadius=function(m){return arguments.length?(c="function"==typeof m?m:qp(+m),g):c},g.targetRadius=function(m){return arguments.length?(u="function"==typeof m?m:qp(+m),g):u},g.startAngle=function(m){return arguments.length?(h="function"==typeof m?m:qp(+m),g):h},g.endAngle=function(m){return arguments.length?(d="function"==typeof m?m:qp(+m),g):d},g.padAngle=function(m){return arguments.length?(f="function"==typeof m?m:qp(+m),g):f},g.source=function(m){return arguments.length?(a=m,g):a},g.target=function(m){return arguments.length?(o=m,g):o},g.context=function(m){return arguments.length?(p=null==m?null:m,g):p},g}function mO(){return IX()}function _4e(){return IX(v4e)}const PX=Math.PI/180,OX=180/Math.PI,LX=4/29,K0=6/29,BX=3*K0*K0;function VX(l){if(l instanceof jc)return new jc(l.l,l.a,l.b,l.opacity);if(l instanceof $u)return UX(l);l instanceof So||(l=HP(l));var h,d,a=bO(l.r),o=bO(l.g),c=bO(l.b),u=vO((.2225045*a+.7168786*o+.0606169*c)/1);return a===o&&o===c?h=d=u:(h=vO((.4360747*a+.3850649*o+.1430804*c)/.96422),d=vO((.0139322*a+.0971045*o+.7141733*c)/.82521)),new jc(116*u-16,500*(h-u),200*(u-d),l.opacity)}function b4e(l,a){return new jc(l,0,0,null==a?1:a)}function D2(l,a,o,c){return 1===arguments.length?VX(l):new jc(l,a,o,null==c?1:c)}function jc(l,a,o,c){this.l=+l,this.a=+a,this.b=+o,this.opacity=+c}function vO(l){return l>.008856451679035631?Math.pow(l,1/3):l/BX+LX}function _O(l){return l>K0?l*l*l:BX*(l-LX)}function yO(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function bO(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function zX(l){if(l instanceof $u)return new $u(l.h,l.c,l.l,l.opacity);if(l instanceof jc||(l=VX(l)),0===l.a&&0===l.b)return new $u(NaN,0<l.l&&l.l<100?0:NaN,l.l,l.opacity);var a=Math.atan2(l.b,l.a)*OX;return new $u(a<0?a+360:a,Math.sqrt(l.a*l.a+l.b*l.b),l.l,l.opacity)}function C4e(l,a,o,c){return 1===arguments.length?zX(l):new $u(o,a,l,null==c?1:c)}function M2(l,a,o,c){return 1===arguments.length?zX(l):new $u(l,a,o,null==c?1:c)}function $u(l,a,o,c){this.h=+l,this.c=+a,this.l=+o,this.opacity=+c}function UX(l){if(isNaN(l.h))return new jc(l.l,0,0,l.opacity);var a=l.h*PX;return new jc(l.l,Math.cos(a)*l.c,Math.sin(a)*l.c,l.opacity)}W0(jc,D2,rb(tf,{brighter:function(l){return new jc(this.l+18*(null==l?1:l),this.a,this.b,this.opacity)},darker:function(l){return new jc(this.l-18*(null==l?1:l),this.a,this.b,this.opacity)},rgb:function(){var l=(this.l+16)/116,a=isNaN(this.a)?l:l+this.a/500,o=isNaN(this.b)?l:l-this.b/200;return new So(yO(3.1338561*(a=.96422*_O(a))-1.6168667*(l=1*_O(l))-.4906146*(o=.82521*_O(o))),yO(-.9787684*a+1.9161415*l+.033454*o),yO(.0719453*a-.2289914*l+1.4052427*o),this.opacity)}})),W0($u,M2,rb(tf,{brighter:function(l){return new $u(this.h,this.c,this.l+18*(null==l?1:l),this.opacity)},darker:function(l){return new $u(this.h,this.c,this.l-18*(null==l?1:l),this.opacity)},rgb:function(){return UX(this).rgb()}}));var CO=1.78277,xO=-.29227,E2=-.90649,pb=1.97294,WX=pb*E2,GX=pb*CO,jX=CO*xO- -.14861*E2;function x4e(l){if(l instanceof Yp)return new Yp(l.h,l.s,l.l,l.opacity);l instanceof So||(l=HP(l));var o=l.g/255,c=l.b/255,u=(jX*c+WX*(l.r/255)-GX*o)/(jX+WX-GX),h=c-u,d=(pb*(o-u)-xO*h)/E2,f=Math.sqrt(d*d+h*h)/(pb*u*(1-u)),p=f?Math.atan2(d,h)*OX-120:NaN;return new Yp(p<0?p+360:p,f,u,l.opacity)}function $c(l,a,o,c){return 1===arguments.length?x4e(l):new Yp(l,a,o,null==c?1:c)}function Yp(l,a,o,c){this.h=+l,this.s=+a,this.l=+o,this.opacity=+c}W0(Yp,$c,rb(tf,{brighter:function(l){return l=null==l?G0:Math.pow(G0,l),new Yp(this.h,this.s,this.l*l,this.opacity)},darker:function(l){return l=null==l?.7:Math.pow(.7,l),new Yp(this.h,this.s,this.l*l,this.opacity)},rgb:function(){var l=isNaN(this.h)?0:(this.h+120)*PX,a=+this.l,o=isNaN(this.s)?0:this.s*a*(1-a),c=Math.cos(l),u=Math.sin(l);return new So(255*(a+o*(-.14861*c+CO*u)),255*(a+o*(xO*c+E2*u)),255*(a+o*(pb*c)),this.opacity)}}));var $X=Array.prototype.slice;function S4e(l,a){return l-a}const rf=l=>()=>l;function D4e(l,a){for(var u,o=-1,c=a.length;++o<c;)if(u=M4e(l,a[o]))return u;return 0}function M4e(l,a){for(var o=a[0],c=a[1],u=-1,h=0,d=l.length,f=d-1;h<d;f=h++){var p=l[h],g=p[0],m=p[1],v=l[f],_=v[0],y=v[1];if(E4e(p,v,a))return 0;m>c!=y>c&&o<(_-g)*(c-m)/(y-m)+g&&(u=-u)}return u}function E4e(l,a,o){var c;return function k4e(l,a,o){return(a[0]-l[0])*(o[1]-l[1])==(o[0]-l[0])*(a[1]-l[1])}(l,a,o)&&function A4e(l,a,o){return l<=a&&a<=o||o<=a&&a<=l}(l[c=+(l[0]===a[0])],o[c],a[c])}function I4e(){}var Kh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function qX(){var l=1,a=1,o=AP,c=p;function u(g){var m=o(g);if(Array.isArray(m))m=m.slice().sort(S4e);else{const v=zp(g),_=V0(v[0],v[1],m);m=B0(Math.floor(v[0]/_)*_,Math.floor(v[1]/_-1)*_,m)}return m.map(v=>h(g,v))}function h(g,m){var v=[],_=[];return function d(g,m,v){var b,x,w,S,D,_=new Array,y=new Array;for(b=x=-1,Kh[(w=g[0]>=m)<<1].forEach(T);++b<l-1;)Kh[w|(w=g[b+1]>=m)<<1].forEach(T);for(Kh[w<<0].forEach(T);++x<a-1;){for(b=-1,Kh[(w=g[x*l+l]>=m)<<1|(S=g[x*l]>=m)<<2].forEach(T);++b<l-1;)D=S,Kh[w|(w=g[x*l+l+b+1]>=m)<<1|(S=g[x*l+b+1]>=m)<<2|D<<3].forEach(T);Kh[w|S<<3].forEach(T)}for(b=-1,Kh[(S=g[x*l]>=m)<<2].forEach(T);++b<l-1;)D=S,Kh[(S=g[x*l+b+1]>=m)<<2|D<<3].forEach(T);function T(A){var B,V,I=[A[0][0]+b,A[0][1]+x],N=[A[1][0]+b,A[1][1]+x],k=f(I),F=f(N);(B=y[k])?(V=_[F])?(delete y[B.end],delete _[V.start],B===V?(B.ring.push(N),v(B.ring)):_[B.start]=y[V.end]={start:B.start,end:V.end,ring:B.ring.concat(V.ring)}):(delete y[B.end],B.ring.push(N),y[B.end=F]=B):(B=_[F])?(V=y[k])?(delete _[B.start],delete y[V.end],B===V?(B.ring.push(N),v(B.ring)):_[V.start]=y[B.end]={start:V.start,end:B.end,ring:V.ring.concat(B.ring)}):(delete _[B.start],B.ring.unshift(I),_[B.start=k]=B):_[k]=y[F]={start:k,end:F,ring:[I,N]}}Kh[S<<3].forEach(T)}(g,m,function(y){c(y,g,m),function T4e(l){for(var a=0,o=l.length,c=l[o-1][1]*l[0][0]-l[o-1][0]*l[0][1];++a<o;)c+=l[a-1][1]*l[a][0]-l[a-1][0]*l[a][1];return c}(y)>0?v.push([y]):_.push(y)}),_.forEach(function(y){for(var C,b=0,x=v.length;b<x;++b)if(-1!==D4e((C=v[b])[0],y))return void C.push(y)}),{type:"MultiPolygon",value:m,coordinates:v}}function f(g){return 2*g[0]+g[1]*(l+1)*4}function p(g,m,v){g.forEach(function(_){var w,y=_[0],b=_[1],x=0|y,C=0|b,S=m[C*l+x];y>0&&y<l&&x===y&&(_[0]=y+(v-(w=m[C*l+x-1]))/(S-w)-.5),b>0&&b<a&&C===b&&(_[1]=b+(v-(w=m[(C-1)*l+x]))/(S-w)-.5)})}return u.contour=h,u.size=function(g){if(!arguments.length)return[l,a];var m=Math.floor(g[0]),v=Math.floor(g[1]);if(!(m>=0&&v>=0))throw new Error("invalid size");return l=m,a=v,u},u.thresholds=function(g){return arguments.length?(o="function"==typeof g?g:Array.isArray(g)?rf($X.call(g)):rf(g),u):o},u.smooth=function(g){return arguments.length?(c=g?p:I4e,u):c===p},u}function wO(l,a,o){for(var c=l.width,u=l.height,h=1+(o<<1),d=0;d<u;++d)for(var f=0,p=0;f<c+o;++f)f<c&&(p+=l.data[f+d*c]),f>=o&&(f>=h&&(p-=l.data[f-h+d*c]),a.data[f-o+d*c]=p/Math.min(f+1,c-1+h-f,h))}function SO(l,a,o){for(var c=l.width,u=l.height,h=1+(o<<1),d=0;d<c;++d)for(var f=0,p=0;f<u+o;++f)f<u&&(p+=l.data[d+f*c]),f>=o&&(f>=h&&(p-=l.data[d+(f-h)*c]),a.data[d+(f-o)*c]=p/Math.min(f+1,u-1+h-f,h))}function P4e(l){return l[0]}function O4e(l){return l[1]}function F4e(){return 1}function R4e(){var l=P4e,a=O4e,o=F4e,c=960,u=500,h=20,d=2,f=3*h,p=c+2*f>>d,g=u+2*f>>d,m=rf(20);function v(w){var S=new Float32Array(p*g),D=new Float32Array(p*g),T=Math.pow(2,-d);w.forEach(function(N,k,F){var B=(l(N,k,F)+f)*T,V=(a(N,k,F)+f)*T,$=+o(N,k,F);if(B>=0&&B<p&&V>=0&&V<g){var q=Math.floor(B),L=Math.floor(V),U=B-q-.5,z=V-L-.5;S[q+L*p]+=(1-U)*(1-z)*$,S[q+1+L*p]+=U*(1-z)*$,S[q+1+(L+1)*p]+=U*z*$,S[q+(L+1)*p]+=(1-U)*z*$}}),wO({width:p,height:g,data:S},{width:p,height:g,data:D},h>>d),SO({width:p,height:g,data:D},{width:p,height:g,data:S},h>>d),wO({width:p,height:g,data:S},{width:p,height:g,data:D},h>>d),SO({width:p,height:g,data:D},{width:p,height:g,data:S},h>>d),wO({width:p,height:g,data:S},{width:p,height:g,data:D},h>>d),SO({width:p,height:g,data:D},{width:p,height:g,data:S},h>>d);var A=m(S);if(!Array.isArray(A)){var I=JS(S);A=V0(0,I,A),(A=gl(0,Math.floor(I/A)*A,A)).shift()}return qX().thresholds(A).size([p,g])(S).map(_)}function _(w){return w.value*=Math.pow(2,-2*d),w.coordinates.forEach(y),w}function y(w){w.forEach(b)}function b(w){w.forEach(x)}function x(w){w[0]=w[0]*Math.pow(2,d)-f,w[1]=w[1]*Math.pow(2,d)-f}function C(){return p=c+2*(f=3*h)>>d,g=u+2*f>>d,v}return v.x=function(w){return arguments.length?(l="function"==typeof w?w:rf(+w),v):l},v.y=function(w){return arguments.length?(a="function"==typeof w?w:rf(+w),v):a},v.weight=function(w){return arguments.length?(o="function"==typeof w?w:rf(+w),v):o},v.size=function(w){if(!arguments.length)return[c,u];var S=+w[0],D=+w[1];if(!(S>=0&&D>=0))throw new Error("invalid size");return c=S,u=D,C()},v.cellSize=function(w){if(!arguments.length)return 1<<d;if(!((w=+w)>=1))throw new Error("invalid cell size");return d=Math.floor(Math.log(w)/Math.LN2),C()},v.thresholds=function(w){return arguments.length?(m="function"==typeof w?w:Array.isArray(w)?rf($X.call(w)):rf(w),v):m},v.bandwidth=function(w){if(!arguments.length)return Math.sqrt(h*(h+1));if(!((w=+w)>=0))throw new Error("invalid bandwidth");return h=Math.round((Math.sqrt(4*w*w+1)-1)/2),C()},v}const no=134217729;function gb(l,a,o,c,u){let h,d,f,p,g=a[0],m=c[0],v=0,_=0;m>g==m>-g?(h=g,g=a[++v]):(h=m,m=c[++_]);let y=0;if(v<l&&_<o)for(m>g==m>-g?(d=g+h,f=h-(d-g),g=a[++v]):(d=m+h,f=h-(d-m),m=c[++_]),h=d,0!==f&&(u[y++]=f);v<l&&_<o;)m>g==m>-g?(d=h+g,p=d-h,f=h-(d-p)+(g-p),g=a[++v]):(d=h+m,p=d-h,f=h-(d-p)+(m-p),m=c[++_]),h=d,0!==f&&(u[y++]=f);for(;v<l;)d=h+g,p=d-h,f=h-(d-p)+(g-p),g=a[++v],h=d,0!==f&&(u[y++]=f);for(;_<o;)d=h+m,p=d-h,f=h-(d-p)+(m-p),m=c[++_],h=d,0!==f&&(u[y++]=f);return(0!==h||0===y)&&(u[y++]=h),y}function Nt(l){return new Float64Array(l)}const Q0=Nt(4),YX=Nt(8),XX=Nt(12),ZX=Nt(16),fa=Nt(4);function k2(l,a,o,c,u,h){const d=(a-h)*(o-u),f=(l-u)*(c-h),p=d-f;if(0===d||0===f||d>0!=f>0)return p;const g=Math.abs(d+f);return Math.abs(p)>=33306690738754716e-32*g?p:-function U4e(l,a,o,c,u,h,d){let f,p,g,m,v,_,y,b,x,C,w,S,D,T,A,I,N,k;const F=l-u,B=o-u,V=a-h,$=c-h;T=F*$,_=no*F,y=_-(_-F),b=F-y,_=no*$,x=_-(_-$),C=$-x,A=b*C-(T-y*x-b*x-y*C),I=V*B,_=no*V,y=_-(_-V),b=V-y,_=no*B,x=_-(_-B),C=B-x,N=b*C-(I-y*x-b*x-y*C),w=A-N,v=A-w,Q0[0]=A-(w+v)+(v-N),S=T+w,v=S-T,D=T-(S-v)+(w-v),w=D-I,v=D-w,Q0[1]=D-(w+v)+(v-I),k=S+w,v=k-S,Q0[2]=S-(k-v)+(w-v),Q0[3]=k;let q=function L4e(l,a){let o=a[0];for(let c=1;c<l;c++)o+=a[c];return o}(4,Q0),L=22204460492503146e-32*d;if(q>=L||-q>=L||(v=l-F,f=l-(F+v)+(v-u),v=o-B,g=o-(B+v)+(v-u),v=a-V,p=a-(V+v)+(v-h),v=c-$,m=c-($+v)+(v-h),0===f&&0===p&&0===g&&0===m)||(L=11093356479670487e-47*d+33306690738754706e-32*Math.abs(q),q+=F*m+$*f-(V*g+B*p),q>=L||-q>=L))return q;T=f*$,_=no*f,y=_-(_-f),b=f-y,_=no*$,x=_-(_-$),C=$-x,A=b*C-(T-y*x-b*x-y*C),I=p*B,_=no*p,y=_-(_-p),b=p-y,_=no*B,x=_-(_-B),C=B-x,N=b*C-(I-y*x-b*x-y*C),w=A-N,v=A-w,fa[0]=A-(w+v)+(v-N),S=T+w,v=S-T,D=T-(S-v)+(w-v),w=D-I,v=D-w,fa[1]=D-(w+v)+(v-I),k=S+w,v=k-S,fa[2]=S-(k-v)+(w-v),fa[3]=k;const U=gb(4,Q0,4,fa,YX);T=F*m,_=no*F,y=_-(_-F),b=F-y,_=no*m,x=_-(_-m),C=m-x,A=b*C-(T-y*x-b*x-y*C),I=V*g,_=no*V,y=_-(_-V),b=V-y,_=no*g,x=_-(_-g),C=g-x,N=b*C-(I-y*x-b*x-y*C),w=A-N,v=A-w,fa[0]=A-(w+v)+(v-N),S=T+w,v=S-T,D=T-(S-v)+(w-v),w=D-I,v=D-w,fa[1]=D-(w+v)+(v-I),k=S+w,v=k-S,fa[2]=S-(k-v)+(w-v),fa[3]=k;const z=gb(U,YX,4,fa,XX);T=f*m,_=no*f,y=_-(_-f),b=f-y,_=no*m,x=_-(_-m),C=m-x,A=b*C-(T-y*x-b*x-y*C),I=p*g,_=no*p,y=_-(_-p),b=p-y,_=no*g,x=_-(_-g),C=g-x,N=b*C-(I-y*x-b*x-y*C),w=A-N,v=A-w,fa[0]=A-(w+v)+(v-N),S=T+w,v=S-T,D=T-(S-v)+(w-v),w=D-I,v=D-w,fa[1]=D-(w+v)+(v-I),k=S+w,v=k-S,fa[2]=S-(k-v)+(w-v),fa[3]=k;const W=gb(z,XX,4,fa,ZX);return ZX[W-1]}(l,a,o,c,u,h,g)}Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(8),Nt(8),Nt(8),Nt(4),Nt(8),Nt(8),Nt(8),Nt(12),Nt(192),Nt(192),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(8),Nt(4),Nt(4),Nt(4),Nt(8),Nt(16),Nt(16),Nt(16),Nt(32),Nt(32),Nt(48),Nt(64),Nt(1152),Nt(1152),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(4),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(24),Nt(1152),Nt(1152),Nt(1152),Nt(1152),Nt(1152),Nt(2304),Nt(2304),Nt(3456),Nt(5760),Nt(8),Nt(8),Nt(8),Nt(16),Nt(24),Nt(48),Nt(48),Nt(96),Nt(192),Nt(384),Nt(384),Nt(384),Nt(768),Nt(96),Nt(96),Nt(96),Nt(1152);const vZ=Math.pow(2,-52),V2=new Uint32Array(512);class z2{static from(a,o=aPe,c=lPe){const u=a.length,h=new Float64Array(2*u);for(let d=0;d<u;d++){const f=a[d];h[2*d]=o(f),h[2*d+1]=c(f)}return new z2(h)}constructor(a){const o=a.length>>1;if(o>0&&"number"!=typeof a[0])throw new Error("Expected coords to contain numbers.");this.coords=a;const c=Math.max(2*o-5,0);this._triangles=new Uint32Array(3*c),this._halfedges=new Int32Array(3*c),this._hashSize=Math.ceil(Math.sqrt(o)),this._hullPrev=new Uint32Array(o),this._hullNext=new Uint32Array(o),this._hullTri=new Uint32Array(o),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(o),this._dists=new Float64Array(o),this.update()}update(){const{coords:a,_hullPrev:o,_hullNext:c,_hullTri:u,_hullHash:h}=this,d=a.length>>1;let f=1/0,p=1/0,g=-1/0,m=-1/0;for(let B=0;B<d;B++){const V=a[2*B],$=a[2*B+1];V<f&&(f=V),$<p&&(p=$),V>g&&(g=V),$>m&&(m=$),this._ids[B]=B}const v=(f+g)/2,_=(p+m)/2;let b,x,C,y=1/0;for(let B=0;B<d;B++){const V=ZO(v,_,a[2*B],a[2*B+1]);V<y&&(b=B,y=V)}const w=a[2*b],S=a[2*b+1];y=1/0;for(let B=0;B<d;B++){if(B===b)continue;const V=ZO(w,S,a[2*B],a[2*B+1]);V<y&&V>0&&(x=B,y=V)}let D=a[2*x],T=a[2*x+1],A=1/0;for(let B=0;B<d;B++){if(B===b||B===x)continue;const V=sPe(w,S,D,T,a[2*B],a[2*B+1]);V<A&&(C=B,A=V)}let I=a[2*C],N=a[2*C+1];if(A===1/0){for(let $=0;$<d;$++)this._dists[$]=a[2*$]-a[0]||a[2*$+1]-a[1];ov(this._ids,this._dists,0,d-1);const B=new Uint32Array(d);let V=0;for(let $=0,q=-1/0;$<d;$++){const L=this._ids[$];this._dists[L]>q&&(B[V++]=L,q=this._dists[L])}return this.hull=B.subarray(0,V),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(k2(w,S,D,T,I,N)<0){const B=x,V=D,$=T;x=C,D=I,T=N,C=B,I=V,N=$}const k=function oPe(l,a,o,c,u,h){const d=o-l,f=c-a,p=u-l,g=h-a,m=d*d+f*f,v=p*p+g*g,_=.5/(d*g-f*p);return{x:l+(g*m-f*v)*_,y:a+(d*v-p*m)*_}}(w,S,D,T,I,N);this._cx=k.x,this._cy=k.y;for(let B=0;B<d;B++)this._dists[B]=ZO(a[2*B],a[2*B+1],k.x,k.y);ov(this._ids,this._dists,0,d-1),this._hullStart=b;let F=3;c[b]=o[C]=x,c[x]=o[b]=C,c[C]=o[x]=b,u[b]=0,u[x]=1,u[C]=2,h.fill(-1),h[this._hashKey(w,S)]=b,h[this._hashKey(D,T)]=x,h[this._hashKey(I,N)]=C,this.trianglesLen=0,this._addTriangle(b,x,C,-1,-1,-1);for(let V,$,B=0;B<this._ids.length;B++){const q=this._ids[B],L=a[2*q],U=a[2*q+1];if(B>0&&Math.abs(L-V)<=vZ&&Math.abs(U-$)<=vZ||(V=L,$=U,q===b||q===x||q===C))continue;let z=0;for(let K=0,J=this._hashKey(L,U);K<this._hashSize&&(z=h[(J+K)%this._hashSize],-1===z||z===c[z]);K++);z=o[z];let H,W=z;for(;H=c[W],k2(L,U,a[2*W],a[2*W+1],a[2*H],a[2*H+1])>=0;)if(W=H,W===z){W=-1;break}if(-1===W)continue;let j=this._addTriangle(W,q,c[W],-1,-1,u[W]);u[q]=this._legalize(j+2),u[W]=j,F++;let G=c[W];for(;H=c[G],k2(L,U,a[2*G],a[2*G+1],a[2*H],a[2*H+1])<0;)j=this._addTriangle(G,q,H,u[q],-1,u[G]),u[q]=this._legalize(j+2),c[G]=G,F--,G=H;if(W===z)for(;H=o[W],k2(L,U,a[2*H],a[2*H+1],a[2*W],a[2*W+1])<0;)j=this._addTriangle(H,q,W,-1,u[W],u[H]),this._legalize(j+2),u[H]=j,c[W]=W,F--,W=H;this._hullStart=o[q]=W,c[W]=o[G]=q,c[q]=G,h[this._hashKey(L,U)]=q,h[this._hashKey(a[2*W],a[2*W+1])]=W}this.hull=new Uint32Array(F);for(let B=0,V=this._hullStart;B<F;B++)this.hull[B]=V,V=c[V];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(a,o){return Math.floor(function iPe(l,a){const o=l/(Math.abs(l)+Math.abs(a));return(a>0?3-o:1+o)/4}(a-this._cx,o-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:o,_halfedges:c,coords:u}=this;let h=0,d=0;for(;;){const f=c[a],p=a-a%3;if(d=p+(a+2)%3,-1===f){if(0===h)break;a=V2[--h];continue}const g=f-f%3,v=g+(f+2)%3,_=o[d],y=o[a],b=o[p+(a+1)%3],x=o[v];if(rPe(u[2*_],u[2*_+1],u[2*y],u[2*y+1],u[2*b],u[2*b+1],u[2*x],u[2*x+1])){o[a]=x,o[f]=_;const w=c[v];if(-1===w){let D=this._hullStart;do{if(this._hullTri[D]===v){this._hullTri[D]=a;break}D=this._hullPrev[D]}while(D!==this._hullStart)}this._link(a,w),this._link(f,c[d]),this._link(d,v);const S=g+(f+1)%3;h<V2.length&&(V2[h++]=S)}else{if(0===h)break;a=V2[--h]}}return d}_link(a,o){this._halfedges[a]=o,-1!==o&&(this._halfedges[o]=a)}_addTriangle(a,o,c,u,h,d){const f=this.trianglesLen;return this._triangles[f]=a,this._triangles[f+1]=o,this._triangles[f+2]=c,this._link(f,u),this._link(f+1,h),this._link(f+2,d),this.trianglesLen+=3,f}}function ZO(l,a,o,c){const u=l-o,h=a-c;return u*u+h*h}function rPe(l,a,o,c,u,h,d,f){const p=l-d,g=a-f,m=o-d,v=c-f,_=u-d,y=h-f,x=m*m+v*v,C=_*_+y*y;return p*(v*C-x*y)-g*(m*C-x*_)+(p*p+g*g)*(m*y-v*_)<0}function sPe(l,a,o,c,u,h){const d=o-l,f=c-a,p=u-l,g=h-a,m=d*d+f*f,v=p*p+g*g,_=.5/(d*g-f*p),y=(g*m-f*v)*_,b=(d*v-p*m)*_;return y*y+b*b}function ov(l,a,o,c){if(c-o<=20)for(let u=o+1;u<=c;u++){const h=l[u],d=a[h];let f=u-1;for(;f>=o&&a[l[f]]>d;)l[f+1]=l[f--];l[f+1]=h}else{let h=o+1,d=c;yb(l,o+c>>1,h),a[l[o]]>a[l[c]]&&yb(l,o,c),a[l[h]]>a[l[c]]&&yb(l,h,c),a[l[o]]>a[l[h]]&&yb(l,o,h);const f=l[h],p=a[f];for(;;){do{h++}while(a[l[h]]<p);do{d--}while(a[l[d]]>p);if(d<h)break;yb(l,h,d)}l[o+1]=l[d],l[d]=f,c-h+1>=d-o?(ov(l,a,h,c),ov(l,a,o,d-1)):(ov(l,a,o,d-1),ov(l,a,h,c))}}function yb(l,a,o){const c=l[a];l[a]=l[o],l[o]=c}function aPe(l){return l[0]}function lPe(l){return l[1]}class ig{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(a,o){this._+=`M${this._x0=this._x1=+a},${this._y0=this._y1=+o}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(a,o){this._+=`L${this._x1=+a},${this._y1=+o}`}arc(a,o,c){const u=(a=+a)+(c=+c),h=o=+o;if(c<0)throw new Error("negative radius");null===this._x1?this._+=`M${u},${h}`:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+u+","+h),c&&(this._+=`A${c},${c},0,1,1,${a-c},${o}A${c},${c},0,1,1,${this._x1=u},${this._y1=h}`)}rect(a,o,c,u){this._+=`M${this._x0=this._x1=+a},${this._y0=this._y1=+o}h${+c}v${+u}h${-c}Z`}value(){return this._||null}}class KO{constructor(){this._=[]}moveTo(a,o){this._.push([a,o])}closePath(){this._.push(this._[0].slice())}lineTo(a,o){this._.push([a,o])}value(){return this._.length?this._:null}}class yZ{constructor(a,[o,c,u,h]=[0,0,960,500]){if(!((u=+u)>=(o=+o)&&(h=+h)>=(c=+c)))throw new Error("invalid bounds");this.delaunay=a,this._circumcenters=new Float64Array(2*a.points.length),this.vectors=new Float64Array(2*a.points.length),this.xmax=u,this.xmin=o,this.ymax=h,this.ymin=c,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:a,hull:o,triangles:c},vectors:u}=this,h=this.circumcenters=this._circumcenters.subarray(0,c.length/3*2);for(let C,w,y=0,b=0,x=c.length;y<x;y+=3,b+=2){const S=2*c[y],D=2*c[y+1],T=2*c[y+2],A=a[S],I=a[S+1],F=a[T],B=a[T+1],V=a[D]-A,$=a[D+1]-I,q=F-A,L=B-I,U=2*(V*L-$*q);if(Math.abs(U)<1e-9){let z=1e9;const W=2*c[0];z*=Math.sign((a[W]-A)*L-(a[W+1]-I)*q),C=(A+F)/2-z*L,w=(I+B)/2+z*q}else{const z=1/U,W=V*V+$*$,H=q*q+L*L;C=A+(L*W-$*H)*z,w=I+(V*H-q*W)*z}h[b]=C,h[b+1]=w}let f,g,v,d=o[o.length-1],p=4*d,m=a[2*d],_=a[2*d+1];u.fill(0);for(let y=0;y<o.length;++y)d=o[y],f=p,g=m,v=_,p=4*d,m=a[2*d],_=a[2*d+1],u[f+2]=u[p]=v-_,u[f+3]=u[p+1]=m-g}render(a){const o=null==a?a=new ig:void 0,{delaunay:{halfedges:c,inedges:u,hull:h},circumcenters:d,vectors:f}=this;if(h.length<=1)return null;for(let m=0,v=c.length;m<v;++m){const _=c[m];if(_<m)continue;const y=2*Math.floor(m/3),b=2*Math.floor(_/3);this._renderSegment(d[y],d[y+1],d[b],d[b+1],a)}let p,g=h[h.length-1];for(let m=0;m<h.length;++m){p=g,g=h[m];const v=2*Math.floor(u[g]/3),_=d[v],y=d[v+1],b=4*p,x=this._project(_,y,f[b+2],f[b+3]);x&&this._renderSegment(_,y,x[0],x[1],a)}return o&&o.value()}renderBounds(a){const o=null==a?a=new ig:void 0;return a.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),o&&o.value()}renderCell(a,o){const c=null==o?o=new ig:void 0,u=this._clip(a);if(null===u||!u.length)return;o.moveTo(u[0],u[1]);let h=u.length;for(;u[0]===u[h-2]&&u[1]===u[h-1]&&h>1;)h-=2;for(let d=2;d<h;d+=2)(u[d]!==u[d-2]||u[d+1]!==u[d-1])&&o.lineTo(u[d],u[d+1]);return o.closePath(),c&&c.value()}*cellPolygons(){const{delaunay:{points:a}}=this;for(let o=0,c=a.length/2;o<c;++o){const u=this.cellPolygon(o);u&&(u.index=o,yield u)}}cellPolygon(a){const o=new KO;return this.renderCell(a,o),o.value()}_renderSegment(a,o,c,u,h){let d;const f=this._regioncode(a,o),p=this._regioncode(c,u);0===f&&0===p?(h.moveTo(a,o),h.lineTo(c,u)):(d=this._clipSegment(a,o,c,u,f,p))&&(h.moveTo(d[0],d[1]),h.lineTo(d[2],d[3]))}contains(a,o,c){return(o=+o)==o&&(c=+c)==c&&this.delaunay._step(a,o,c)===a}*neighbors(a){const o=this._clip(a);if(o)for(const c of this.delaunay.neighbors(a)){const u=this._clip(c);if(u)e:for(let h=0,d=o.length;h<d;h+=2)for(let f=0,p=u.length;f<p;f+=2)if(o[h]==u[f]&&o[h+1]==u[f+1]&&o[(h+2)%d]==u[(f+p-2)%p]&&o[(h+3)%d]==u[(f+p-1)%p]){yield c;break e}}}_cell(a){const{circumcenters:o,delaunay:{inedges:c,halfedges:u,triangles:h}}=this,d=c[a];if(-1===d)return null;const f=[];let p=d;do{const g=Math.floor(p/3);if(f.push(o[2*g],o[2*g+1]),p=p%3==2?p-2:p+1,h[p]!==a)break;p=u[p]}while(p!==d&&-1!==p);return f}_clip(a){if(0===a&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const o=this._cell(a);if(null===o)return null;const{vectors:c}=this,u=4*a;return c[u]||c[u+1]?this._clipInfinite(a,o,c[u],c[u+1],c[u+2],c[u+3]):this._clipFinite(a,o)}_clipFinite(a,o){const c=o.length;let h,d,g,v,u=null,f=o[c-2],p=o[c-1],m=this._regioncode(f,p),_=0;for(let y=0;y<c;y+=2)if(h=f,d=p,f=o[y],p=o[y+1],g=m,m=this._regioncode(f,p),0===g&&0===m)v=_,_=0,u?u.push(f,p):u=[f,p];else{let b,x,C,w,S;if(0===g){if(null===(b=this._clipSegment(h,d,f,p,g,m)))continue;[x,C,w,S]=b}else{if(null===(b=this._clipSegment(f,p,h,d,m,g)))continue;[w,S,x,C]=b,v=_,_=this._edgecode(x,C),v&&_&&this._edge(a,v,_,u,u.length),u?u.push(x,C):u=[x,C]}v=_,_=this._edgecode(w,S),v&&_&&this._edge(a,v,_,u,u.length),u?u.push(w,S):u=[w,S]}if(u)v=_,_=this._edgecode(u[0],u[1]),v&&_&&this._edge(a,v,_,u,u.length);else if(this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(a,o,c,u,h,d){for(;;){if(0===h&&0===d)return[a,o,c,u];if(h&d)return null;let f,p,g=h||d;8&g?(f=a+(c-a)*(this.ymax-o)/(u-o),p=this.ymax):4&g?(f=a+(c-a)*(this.ymin-o)/(u-o),p=this.ymin):2&g?(p=o+(u-o)*(this.xmax-a)/(c-a),f=this.xmax):(p=o+(u-o)*(this.xmin-a)/(c-a),f=this.xmin),h?h=this._regioncode(a=f,o=p):d=this._regioncode(c=f,u=p)}}_clipInfinite(a,o,c,u,h,d){let p,f=Array.from(o);if((p=this._project(f[0],f[1],c,u))&&f.unshift(p[0],p[1]),(p=this._project(f[f.length-2],f[f.length-1],h,d))&&f.push(p[0],p[1]),f=this._clipFinite(a,f))for(let v,g=0,m=f.length,_=this._edgecode(f[m-2],f[m-1]);g<m;g+=2)v=_,_=this._edgecode(f[g],f[g+1]),v&&_&&(g=this._edge(a,v,_,f,g),m=f.length);else this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(f=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return f}_edge(a,o,c,u,h){for(;o!==c;){let d,f;switch(o){case 5:o=4;continue;case 4:o=6,d=this.xmax,f=this.ymin;break;case 6:o=2;continue;case 2:o=10,d=this.xmax,f=this.ymax;break;case 10:o=8;continue;case 8:o=9,d=this.xmin,f=this.ymax;break;case 9:o=1;continue;case 1:o=5,d=this.xmin,f=this.ymin}(u[h]!==d||u[h+1]!==f)&&this.contains(a,d,f)&&(u.splice(h,0,d,f),h+=2)}if(u.length>4)for(let d=0;d<u.length;d+=2){const f=(d+2)%u.length,p=(d+4)%u.length;(u[d]===u[f]&&u[f]===u[p]||u[d+1]===u[f+1]&&u[f+1]===u[p+1])&&(u.splice(f,2),d-=2)}return h}_project(a,o,c,u){let d,f,p,h=1/0;if(u<0){if(o<=this.ymin)return null;(d=(this.ymin-o)/u)<h&&(p=this.ymin,f=a+(h=d)*c)}else if(u>0){if(o>=this.ymax)return null;(d=(this.ymax-o)/u)<h&&(p=this.ymax,f=a+(h=d)*c)}if(c>0){if(a>=this.xmax)return null;(d=(this.xmax-a)/c)<h&&(f=this.xmax,p=o+(h=d)*u)}else if(c<0){if(a<=this.xmin)return null;(d=(this.xmin-a)/c)<h&&(f=this.xmin,p=o+(h=d)*u)}return[f,p]}_edgecode(a,o){return(a===this.xmin?1:a===this.xmax?2:0)|(o===this.ymin?4:o===this.ymax?8:0)}_regioncode(a,o){return(a<this.xmin?1:a>this.xmax?2:0)|(o<this.ymin?4:o>this.ymax?8:0)}}const cPe=2*Math.PI,av=Math.pow;function uPe(l){return l[0]}function hPe(l){return l[1]}function fPe(l,a,o){return[l+Math.sin(l+a)*o,a+Math.cos(l-a)*o]}class QO{static from(a,o=uPe,c=hPe,u){return new QO("length"in a?function pPe(l,a,o,c){const u=l.length,h=new Float64Array(2*u);for(let d=0;d<u;++d){const f=l[d];h[2*d]=a.call(c,f,d,l),h[2*d+1]=o.call(c,f,d,l)}return h}(a,o,c,u):Float64Array.from(function*gPe(l,a,o,c){let u=0;for(const h of l)yield a.call(c,h,u,l),yield o.call(c,h,u,l),++u}(a,o,c,u)))}constructor(a){this._delaunator=new z2(a),this.inedges=new Int32Array(a.length/2),this._hullIndex=new Int32Array(a.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const a=this._delaunator,o=this.points;if(a.hull&&a.hull.length>2&&function dPe(l){const{triangles:a,coords:o}=l;for(let c=0;c<a.length;c+=3){const u=2*a[c],h=2*a[c+1],d=2*a[c+2];if((o[d]-o[u])*(o[h+1]-o[u+1])-(o[h]-o[u])*(o[d+1]-o[u+1])>1e-10)return!1}return!0}(a)){this.collinear=Int32Array.from({length:o.length/2},(_,y)=>y).sort((_,y)=>o[2*_]-o[2*y]||o[2*_+1]-o[2*y+1]);const p=this.collinear[0],g=this.collinear[this.collinear.length-1],m=[o[2*p],o[2*p+1],o[2*g],o[2*g+1]],v=1e-8*Math.hypot(m[3]-m[1],m[2]-m[0]);for(let _=0,y=o.length/2;_<y;++_){const b=fPe(o[2*_],o[2*_+1],v);o[2*_]=b[0],o[2*_+1]=b[1]}this._delaunator=new z2(o)}else delete this.collinear;const c=this.halfedges=this._delaunator.halfedges,u=this.hull=this._delaunator.hull,h=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),f=this._hullIndex.fill(-1);for(let p=0,g=c.length;p<g;++p){const m=h[p%3==2?p-2:p+1];(-1===c[p]||-1===d[m])&&(d[m]=p)}for(let p=0,g=u.length;p<g;++p)f[u[p]]=p;u.length<=2&&u.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=u[0],d[u[0]]=1,2===u.length&&(d[u[1]]=0,this.triangles[1]=u[1],this.triangles[2]=u[1]))}voronoi(a){return new yZ(this,a)}*neighbors(a){const{inedges:o,hull:c,_hullIndex:u,halfedges:h,triangles:d,collinear:f}=this;if(f){const v=f.indexOf(a);return v>0&&(yield f[v-1]),void(v<f.length-1&&(yield f[v+1]))}const p=o[a];if(-1===p)return;let g=p,m=-1;do{if(yield m=d[g],g=g%3==2?g-2:g+1,d[g]!==a)return;if(g=h[g],-1===g){const v=c[(u[a]+1)%c.length];return void(v!==m&&(yield v))}}while(g!==p)}find(a,o,c=0){if((a=+a)!=a||(o=+o)!=o)return-1;const u=c;let h;for(;(h=this._step(c,a,o))>=0&&h!==c&&h!==u;)c=h;return h}_step(a,o,c){const{inedges:u,hull:h,_hullIndex:d,halfedges:f,triangles:p,points:g}=this;if(-1===u[a]||!g.length)return(a+1)%(g.length>>1);let m=a,v=av(o-g[2*a],2)+av(c-g[2*a+1],2);const _=u[a];let y=_;do{let b=p[y];const x=av(o-g[2*b],2)+av(c-g[2*b+1],2);if(x<v&&(v=x,m=b),y=y%3==2?y-2:y+1,p[y]!==a)break;if(y=f[y],-1===y){if(y=h[(d[a]+1)%h.length],y!==b&&av(o-g[2*y],2)+av(c-g[2*y+1],2)<v)return y;break}}while(y!==_);return m}render(a){const o=null==a?a=new ig:void 0,{points:c,halfedges:u,triangles:h}=this;for(let d=0,f=u.length;d<f;++d){const p=u[d];if(p<d)continue;const g=2*h[d],m=2*h[p];a.moveTo(c[g],c[g+1]),a.lineTo(c[m],c[m+1])}return this.renderHull(a),o&&o.value()}renderPoints(a,o){void 0===o&&(!a||"function"!=typeof a.moveTo)&&(o=a,a=null),o=null==o?2:+o;const c=null==a?a=new ig:void 0,{points:u}=this;for(let h=0,d=u.length;h<d;h+=2){const f=u[h],p=u[h+1];a.moveTo(f+o,p),a.arc(f,p,o,0,cPe)}return c&&c.value()}renderHull(a){const o=null==a?a=new ig:void 0,{hull:c,points:u}=this,h=2*c[0],d=c.length;a.moveTo(u[h],u[h+1]);for(let f=1;f<d;++f){const p=2*c[f];a.lineTo(u[p],u[p+1])}return a.closePath(),o&&o.value()}hullPolygon(){const a=new KO;return this.renderHull(a),a.value()}renderTriangle(a,o){const c=null==o?o=new ig:void 0,{points:u,triangles:h}=this,d=2*h[a*=3],f=2*h[a+1],p=2*h[a+2];return o.moveTo(u[d],u[d+1]),o.lineTo(u[f],u[f+1]),o.lineTo(u[p],u[p+1]),o.closePath(),c&&c.value()}*trianglePolygons(){const{triangles:a}=this;for(let o=0,c=a.length/3;o<c;++o)yield this.trianglePolygon(o)}trianglePolygon(a){const o=new KO;return this.renderTriangle(a,o),o.value()}}const U2=l=>()=>l;function JO(l,{sourceEvent:a,subject:o,target:c,identifier:u,active:h,x:d,y:f,dx:p,dy:g,dispatch:m}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},identifier:{value:u,enumerable:!0,configurable:!0},active:{value:h,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:m}})}function mPe(l){return!l.ctrlKey&&!l.button}function vPe(){return this.parentNode}function _Pe(l,a){return null==a?{x:l.x,y:l.y}:a}function yPe(){return navigator.maxTouchPoints||"ontouchstart"in this}function bZ(){var f,p,g,m,l=mPe,a=vPe,o=_Pe,c=yPe,u={},h=z0("start","drag","end"),d=0,v=0;function _(T){T.on("mousedown.drag",y).filter(c).on("touchstart.drag",C).on("touchmove.drag",w,vIe).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(T,A){if(!m&&l.call(this,T,A)){var I=D(this,a.call(this,T,A),T,A,"mouse");!I||(Ns(T.view).on("mousemove.drag",b,ib).on("mouseup.drag",x,ib),l2(T.view),UP(T),g=!1,f=T.clientX,p=T.clientY,I("start",T))}}function b(T){if(H0(T),!g){var A=T.clientX-f,I=T.clientY-p;g=A*A+I*I>v}u.mouse("drag",T)}function x(T){Ns(T.view).on("mousemove.drag mouseup.drag",null),c2(T.view,g),H0(T),u.mouse("end",T)}function C(T,A){if(l.call(this,T,A)){var F,B,I=T.changedTouches,N=a.call(this,T,A),k=I.length;for(F=0;F<k;++F)(B=D(this,N,T,A,I[F].identifier,I[F]))&&(UP(T),B("start",T,I[F]))}}function w(T){var N,k,A=T.changedTouches,I=A.length;for(N=0;N<I;++N)(k=u[A[N].identifier])&&(H0(T),k("drag",T,A[N]))}function S(T){var N,k,A=T.changedTouches,I=A.length;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),N=0;N<I;++N)(k=u[A[N].identifier])&&(UP(T),k("end",T,A[N]))}function D(T,A,I,N,k,F){var $,q,L,B=h.copy(),V=ml(F||I,A);if(null!=(L=o.call(T,new JO("beforestart",{sourceEvent:I,target:_,identifier:k,active:d,x:V[0],y:V[1],dx:0,dy:0,dispatch:B}),N)))return $=L.x-V[0]||0,q=L.y-V[1]||0,function U(z,W,H){var G,j=V;switch(z){case"start":u[k]=U,G=d++;break;case"end":delete u[k],--d;case"drag":V=ml(H||W,A),G=d}B.call(z,T,new JO(z,{sourceEvent:W,subject:L,target:_,identifier:k,active:G,x:V[0]+$,y:V[1]+q,dx:V[0]-j[0],dy:V[1]-j[1],dispatch:B}),N)}}return _.filter=function(T){return arguments.length?(l="function"==typeof T?T:U2(!!T),_):l},_.container=function(T){return arguments.length?(a="function"==typeof T?T:U2(T),_):a},_.subject=function(T){return arguments.length?(o="function"==typeof T?T:U2(T),_):o},_.touchable=function(T){return arguments.length?(c="function"==typeof T?T:U2(!!T),_):c},_.on=function(){var T=h.on.apply(h,arguments);return T===h?_:T},_.clickDistance=function(T){return arguments.length?(v=(T=+T)*T,_):Math.sqrt(v)},_}JO.prototype.on=function(){var l=this._.on.apply(this._,arguments);return l===this._?this:l};var CZ={},eF={};function xZ(l){return new Function("d","return {"+l.map(function(a,o){return JSON.stringify(a)+": d["+o+'] || ""'}).join(",")+"}")}function wZ(l){var a=Object.create(null),o=[];return l.forEach(function(c){for(var u in c)u in a||o.push(a[u]=u)}),o}function Wa(l,a){var o=l+"",c=o.length;return c<a?new Array(a-c+1).join(0)+o:o}function H2(l){var a=new RegExp('["'+l+"\n\r]"),o=l.charCodeAt(0);function u(v,_){var w,y=[],b=v.length,x=0,C=0,S=b<=0,D=!1;function T(){if(S)return eF;if(D)return D=!1,CZ;var I,k,N=x;if(34===v.charCodeAt(N)){for(;x++<b&&34!==v.charCodeAt(x)||34===v.charCodeAt(++x););return(I=x)>=b?S=!0:10===(k=v.charCodeAt(x++))?D=!0:13===k&&(D=!0,10===v.charCodeAt(x)&&++x),v.slice(N+1,I-1).replace(/""/g,'"')}for(;x<b;){if(10===(k=v.charCodeAt(I=x++)))D=!0;else if(13===k)D=!0,10===v.charCodeAt(x)&&++x;else if(k!==o)continue;return v.slice(N,I)}return S=!0,v.slice(N,b)}for(10===v.charCodeAt(b-1)&&--b,13===v.charCodeAt(b-1)&&--b;(w=T())!==eF;){for(var A=[];w!==CZ&&w!==eF;)A.push(w),w=T();_&&null==(A=_(A,C++))||y.push(A)}return y}function h(v,_){return v.map(function(y){return _.map(function(b){return m(y[b])}).join(l)})}function g(v){return v.map(m).join(l)}function m(v){return null==v?"":v instanceof Date?function xPe(l){var a=l.getUTCHours(),o=l.getUTCMinutes(),c=l.getUTCSeconds(),u=l.getUTCMilliseconds();return isNaN(l)?"Invalid Date":function CPe(l){return l<0?"-"+Wa(-l,6):l>9999?"+"+Wa(l,6):Wa(l,4)}(l.getUTCFullYear())+"-"+Wa(l.getUTCMonth()+1,2)+"-"+Wa(l.getUTCDate(),2)+(u?"T"+Wa(a,2)+":"+Wa(o,2)+":"+Wa(c,2)+"."+Wa(u,3)+"Z":c?"T"+Wa(a,2)+":"+Wa(o,2)+":"+Wa(c,2)+"Z":o||a?"T"+Wa(a,2)+":"+Wa(o,2)+"Z":"")}(v):a.test(v+="")?'"'+v.replace(/"/g,'""')+'"':v}return{parse:function c(v,_){var y,b,x=u(v,function(C,w){if(y)return y(C,w-1);b=C,y=_?function bPe(l,a){var o=xZ(l);return function(c,u){return a(o(c),u,l)}}(C,_):xZ(C)});return x.columns=b||[],x},parseRows:u,format:function d(v,_){return null==_&&(_=wZ(v)),[_.map(m).join(l)].concat(h(v,_)).join("\n")},formatBody:function f(v,_){return null==_&&(_=wZ(v)),h(v,_).join("\n")},formatRows:function p(v){return v.map(g).join("\n")},formatRow:g,formatValue:m}}var rg=H2(","),SZ=rg.parse,wPe=rg.parseRows,SPe=rg.format,TPe=rg.formatBody,DPe=rg.formatRows,MPe=rg.formatRow,EPe=rg.formatValue,sg=H2("\t"),TZ=sg.parse,kPe=sg.parseRows,APe=sg.format,IPe=sg.formatBody,PPe=sg.formatRows,OPe=sg.formatRow,FPe=sg.formatValue;function RPe(l){for(var a in l){var c,u,o=l[a].trim();if(o)if("true"===o)o=!0;else if("false"===o)o=!1;else if("NaN"===o)o=NaN;else if(isNaN(c=+o)){if(!(u=o.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;NPe&&!!u[4]&&!u[7]&&(o=o.replace(/-/g,"/").replace(/T/," ")),o=new Date(o)}else o=c;else o=null;l[a]=o}return l}const NPe=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),LPe=l=>+l;function BPe(l){return l*l}function VPe(l){return l*(2-l)}function DZ(l){return((l*=2)<=1?l*l:--l*(2-l)+1)/2}var zPe=function l(a){function o(c){return Math.pow(c,a)}return a=+a,o.exponent=l,o}(3),UPe=function l(a){function o(c){return 1-Math.pow(1-c,a)}return a=+a,o.exponent=l,o}(3),MZ=function l(a){function o(c){return((c*=2)<=1?Math.pow(c,a):2-Math.pow(2-c,a))/2}return a=+a,o.exponent=l,o}(3),EZ=Math.PI,kZ=EZ/2;function HPe(l){return 1==+l?1:1-Math.cos(l*kZ)}function WPe(l){return Math.sin(l*kZ)}function AZ(l){return(1-Math.cos(EZ*l))/2}function uf(l){return 1.0009775171065494*(Math.pow(2,-10*l)-.0009765625)}function GPe(l){return uf(1-+l)}function jPe(l){return 1-uf(l)}function IZ(l){return((l*=2)<=1?uf(1-l):2-uf(l-1))/2}function $Pe(l){return 1-Math.sqrt(1-l*l)}function qPe(l){return Math.sqrt(1- --l*l)}function PZ(l){return((l*=2)<=1?1-Math.sqrt(1-l*l):Math.sqrt(1-(l-=2)*l)+1)/2}var W2=7.5625;function nOe(l){return 1-Cb(1-l)}function Cb(l){return(l=+l)<.36363636363636365?W2*l*l:l<.7272727272727273?W2*(l-=.5454545454545454)*l+.75:l<.9090909090909091?W2*(l-=.8181818181818182)*l+.9375:W2*(l-=.9545454545454546)*l+.984375}function iOe(l){return((l*=2)<=1?1-Cb(1-l):Cb(l-1)+1)/2}var sF=1.70158,rOe=function l(a){function o(c){return(c=+c)*c*(a*(c-1)+c)}return a=+a,o.overshoot=l,o}(sF),sOe=function l(a){function o(c){return--c*c*((c+1)*a+c)+1}return a=+a,o.overshoot=l,o}(sF),OZ=function l(a){function o(c){return((c*=2)<1?c*c*((a+1)*c-a):(c-=2)*c*((a+1)*c+a)+2)/2}return a=+a,o.overshoot=l,o}(sF),lv=2*Math.PI,oOe=function l(a,o){var c=Math.asin(1/(a=Math.max(1,a)))*(o/=lv);function u(h){return a*uf(- --h)*Math.sin((c-h)/o)}return u.amplitude=function(h){return l(h,o*lv)},u.period=function(h){return l(a,h)},u}(1,.3),FZ=function l(a,o){var c=Math.asin(1/(a=Math.max(1,a)))*(o/=lv);function u(h){return 1-a*uf(h=+h)*Math.sin((h+c)/o)}return u.amplitude=function(h){return l(h,o*lv)},u.period=function(h){return l(a,h)},u}(1,.3),aOe=function l(a,o){var c=Math.asin(1/(a=Math.max(1,a)))*(o/=lv);function u(h){return((h=2*h-1)<0?a*uf(-h)*Math.sin((c-h)/o):2-a*uf(h)*Math.sin((c+h)/o))/2}return u.amplitude=function(h){return l(h,o*lv)},u.period=function(h){return l(a,h)},u}(1,.3);function lOe(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);return l.blob()}function cOe(l,a){return fetch(l,a).then(lOe)}function uOe(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);return l.arrayBuffer()}function hOe(l,a){return fetch(l,a).then(uOe)}function dOe(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);return l.text()}function G2(l,a){return fetch(l,a).then(dOe)}function RZ(l){return function(a,o,c){return 2===arguments.length&&"function"==typeof o&&(c=o,o=void 0),G2(a,o).then(function(u){return l(u,c)})}}function fOe(l,a,o,c){3===arguments.length&&"function"==typeof o&&(c=o,o=void 0);var u=H2(l);return G2(a,o).then(function(h){return u.parse(h,c)})}var pOe=RZ(SZ),gOe=RZ(TZ);function mOe(l,a){return new Promise(function(o,c){var u=new Image;for(var h in a)u[h]=a[h];u.onerror=c,u.onload=function(){o(u)},u.src=l})}function vOe(l){if(!l.ok)throw new Error(l.status+" "+l.statusText);if(204!==l.status&&205!==l.status)return l.json()}function _Oe(l,a){return fetch(l,a).then(vOe)}function lF(l){return(a,o)=>G2(a,o).then(c=>(new DOMParser).parseFromString(c,l))}const yOe=lF("application/xml");var bOe=lF("text/html"),COe=lF("image/svg+xml");function xOe(l,a){var o,c=1;function u(){var h,f,d=o.length,p=0,g=0;for(h=0;h<d;++h)p+=(f=o[h]).x,g+=f.y;for(p=(p/d-l)*c,g=(g/d-a)*c,h=0;h<d;++h)(f=o[h]).x-=p,f.y-=g}return null==l&&(l=0),null==a&&(a=0),u.initialize=function(h){o=h},u.x=function(h){return arguments.length?(l=+h,u):l},u.y=function(h){return arguments.length?(a=+h,u):a},u.strength=function(h){return arguments.length?(c=+h,u):c},u}function NZ(l,a,o,c){if(isNaN(a)||isNaN(o))return l;var u,v,_,y,b,x,C,w,S,h=l._root,d={data:c},f=l._x0,p=l._y0,g=l._x1,m=l._y1;if(!h)return l._root=d,l;for(;h.length;)if((x=a>=(v=(f+g)/2))?f=v:g=v,(C=o>=(_=(p+m)/2))?p=_:m=_,u=h,!(h=h[w=C<<1|x]))return u[w]=d,l;if(y=+l._x.call(null,h.data),b=+l._y.call(null,h.data),a===y&&o===b)return d.next=h,u?u[w]=d:l._root=d,l;do{u=u?u[w]=new Array(4):l._root=new Array(4),(x=a>=(v=(f+g)/2))?f=v:g=v,(C=o>=(_=(p+m)/2))?p=_:m=_}while((w=C<<1|x)==(S=(b>=_)<<1|y>=v));return u[S]=h,u[w]=d,l}function ma(l,a,o,c,u){this.node=l,this.x0=a,this.y0=o,this.x1=c,this.y1=u}function ROe(l){return l[0]}function LOe(l){return l[1]}function j2(l,a,o){var c=new cF(null==a?ROe:a,null==o?LOe:o,NaN,NaN,NaN,NaN);return null==l?c:c.addAll(l)}function cF(l,a,o,c,u,h){this._x=l,this._y=a,this._x0=o,this._y0=c,this._x1=u,this._y1=h,this._root=void 0}function LZ(l){for(var a={data:l.data},o=a;l=l.next;)o=o.next={data:l.data};return a}var va=j2.prototype=cF.prototype;function io(l){return function(){return l}}function hf(l){return 1e-6*(l()-.5)}function VOe(l){return l.x+l.vx}function zOe(l){return l.y+l.vy}function UOe(l){var a,o,c,u=1,h=1;function d(){for(var g,v,_,y,b,x,C,m=a.length,w=0;w<h;++w)for(v=j2(a,VOe,zOe).visitAfter(f),g=0;g<m;++g)C=(x=o[(_=a[g]).index])*x,y=_.x+_.vx,b=_.y+_.vy,v.visit(S);function S(D,T,A,I,N){var k=D.data,F=D.r,B=x+F;if(!k)return T>y+B||I<y-B||A>b+B||N<b-B;if(k.index>_.index){var V=y-k.x-k.vx,$=b-k.y-k.vy,q=V*V+$*$;q<B*B&&(0===V&&(q+=(V=hf(c))*V),0===$&&(q+=($=hf(c))*$),q=(B-(q=Math.sqrt(q)))/q*u,_.vx+=(V*=q)*(B=(F*=F)/(C+F)),_.vy+=($*=q)*B,k.vx-=V*(B=1-B),k.vy-=$*B)}}}function f(g){if(g.data)return g.r=o[g.data.index];for(var m=g.r=0;m<4;++m)g[m]&&g[m].r>g.r&&(g.r=g[m].r)}function p(){if(a){var g,v,m=a.length;for(o=new Array(m),g=0;g<m;++g)o[(v=a[g]).index]=+l(v,g,a)}}return"function"!=typeof l&&(l=io(null==l?1:+l)),d.initialize=function(g,m){a=g,c=m,p()},d.iterations=function(g){return arguments.length?(h=+g,d):h},d.strength=function(g){return arguments.length?(u=+g,d):u},d.radius=function(g){return arguments.length?(l="function"==typeof g?g:io(+g),p(),d):l},d}function HOe(l){return l.index}function BZ(l,a){var o=l.get(a);if(!o)throw new Error("node not found: "+a);return o}function WOe(l){var c,h,d,f,p,g,a=HOe,o=function v(C){return 1/Math.min(f[C.source.index],f[C.target.index])},u=io(30),m=1;function _(C){for(var w=0,S=l.length;w<m;++w)for(var T,A,I,N,k,F,B,D=0;D<S;++D)N=(I=(T=l[D]).target).x+I.vx-(A=T.source).x-A.vx||hf(g),k=I.y+I.vy-A.y-A.vy||hf(g),k*=F=((F=Math.sqrt(N*N+k*k))-h[D])/F*C*c[D],I.vx-=(N*=F)*(B=p[D]),I.vy-=k*B,A.vx+=N*(B=1-B),A.vy+=k*B}function y(){if(d){var C,T,w=d.length,S=l.length,D=new Map(d.map((A,I)=>[a(A,I,d),A]));for(C=0,f=new Array(w);C<S;++C)(T=l[C]).index=C,"object"!=typeof T.source&&(T.source=BZ(D,T.source)),"object"!=typeof T.target&&(T.target=BZ(D,T.target)),f[T.source.index]=(f[T.source.index]||0)+1,f[T.target.index]=(f[T.target.index]||0)+1;for(C=0,p=new Array(S);C<S;++C)p[C]=f[(T=l[C]).source.index]/(f[T.source.index]+f[T.target.index]);c=new Array(S),b(),h=new Array(S),x()}}function b(){if(d)for(var C=0,w=l.length;C<w;++C)c[C]=+o(l[C],C,l)}function x(){if(d)for(var C=0,w=l.length;C<w;++C)h[C]=+u(l[C],C,l)}return null==l&&(l=[]),_.initialize=function(C,w){d=C,g=w,y()},_.links=function(C){return arguments.length?(l=C,y(),_):l},_.id=function(C){return arguments.length?(a=C,_):a},_.iterations=function(C){return arguments.length?(m=+C,_):m},_.strength=function(C){return arguments.length?(o="function"==typeof C?C:io(+C),b(),_):o},_.distance=function(C){return arguments.length?(u="function"==typeof C?C:io(+C),x(),_):u},_}va.copy=function(){var o,c,l=new cF(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return l;if(!a.length)return l._root=LZ(a),l;for(o=[{source:a,target:l._root=new Array(4)}];a=o.pop();)for(var u=0;u<4;++u)(c=a.source[u])&&(c.length?o.push({source:c,target:a.target[u]=new Array(4)}):a.target[u]=LZ(c));return l},va.add=function wOe(l){const a=+this._x.call(null,l),o=+this._y.call(null,l);return NZ(this.cover(a,o),a,o,l)},va.addAll=function SOe(l){var a,o,u,h,c=l.length,d=new Array(c),f=new Array(c),p=1/0,g=1/0,m=-1/0,v=-1/0;for(o=0;o<c;++o)isNaN(u=+this._x.call(null,a=l[o]))||isNaN(h=+this._y.call(null,a))||(d[o]=u,f[o]=h,u<p&&(p=u),u>m&&(m=u),h<g&&(g=h),h>v&&(v=h));if(p>m||g>v)return this;for(this.cover(p,g).cover(m,v),o=0;o<c;++o)NZ(this,d[o],f[o],l[o]);return this},va.cover=function TOe(l,a){if(isNaN(l=+l)||isNaN(a=+a))return this;var o=this._x0,c=this._y0,u=this._x1,h=this._y1;if(isNaN(o))u=(o=Math.floor(l))+1,h=(c=Math.floor(a))+1;else{for(var p,g,d=u-o||1,f=this._root;o>l||l>=u||c>a||a>=h;)switch(g=(a<c)<<1|l<o,p=new Array(4),p[g]=f,f=p,d*=2,g){case 0:u=o+d,h=c+d;break;case 1:o=u-d,h=c+d;break;case 2:u=o+d,c=h-d;break;case 3:o=u-d,c=h-d}this._root&&this._root.length&&(this._root=f)}return this._x0=o,this._y0=c,this._x1=u,this._y1=h,this},va.data=function DOe(){var l=[];return this.visit(function(a){if(!a.length)do{l.push(a.data)}while(a=a.next)}),l},va.extent=function MOe(l){return arguments.length?this.cover(+l[0][0],+l[0][1]).cover(+l[1][0],+l[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},va.find=function EOe(l,a,o){var c,d,f,p,g,b,x,u=this._x0,h=this._y0,m=this._x1,v=this._y1,_=[],y=this._root;for(y&&_.push(new ma(y,u,h,m,v)),null==o?o=1/0:(u=l-o,h=a-o,m=l+o,v=a+o,o*=o);b=_.pop();)if(!(!(y=b.node)||(d=b.x0)>m||(f=b.y0)>v||(p=b.x1)<u||(g=b.y1)<h))if(y.length){var C=(d+p)/2,w=(f+g)/2;_.push(new ma(y[3],C,w,p,g),new ma(y[2],d,w,C,g),new ma(y[1],C,f,p,w),new ma(y[0],d,f,C,w)),(x=(a>=w)<<1|l>=C)&&(b=_[_.length-1],_[_.length-1]=_[_.length-1-x],_[_.length-1-x]=b)}else{var S=l-+this._x.call(null,y.data),D=a-+this._y.call(null,y.data),T=S*S+D*D;if(T<o){var A=Math.sqrt(o=T);u=l-A,h=a-A,m=l+A,v=a+A,c=y.data}}return c},va.remove=function kOe(l){if(isNaN(m=+this._x.call(null,l))||isNaN(v=+this._y.call(null,l)))return this;var a,c,u,h,m,v,_,y,b,x,C,w,o=this._root,d=this._x0,f=this._y0,p=this._x1,g=this._y1;if(!o)return this;if(o.length)for(;;){if((b=m>=(_=(d+p)/2))?d=_:p=_,(x=v>=(y=(f+g)/2))?f=y:g=y,a=o,!(o=o[C=x<<1|b]))return this;if(!o.length)break;(a[C+1&3]||a[C+2&3]||a[C+3&3])&&(c=a,w=C)}for(;o.data!==l;)if(u=o,!(o=o.next))return this;return(h=o.next)&&delete o.next,u?(h?u.next=h:delete u.next,this):a?(h?a[C]=h:delete a[C],(o=a[0]||a[1]||a[2]||a[3])&&o===(a[3]||a[2]||a[1]||a[0])&&!o.length&&(c?c[w]=o:this._root=o),this):(this._root=h,this)},va.removeAll=function AOe(l){for(var a=0,o=l.length;a<o;++a)this.remove(l[a]);return this},va.root=function IOe(){return this._root},va.size=function POe(){var l=0;return this.visit(function(a){if(!a.length)do{++l}while(a=a.next)}),l},va.visit=function OOe(l){var o,u,h,d,f,p,a=[],c=this._root;for(c&&a.push(new ma(c,this._x0,this._y0,this._x1,this._y1));o=a.pop();)if(!l(c=o.node,h=o.x0,d=o.y0,f=o.x1,p=o.y1)&&c.length){var g=(h+f)/2,m=(d+p)/2;(u=c[3])&&a.push(new ma(u,g,m,f,p)),(u=c[2])&&a.push(new ma(u,h,m,g,p)),(u=c[1])&&a.push(new ma(u,g,d,f,m)),(u=c[0])&&a.push(new ma(u,h,d,g,m))}return this},va.visitAfter=function FOe(l){var c,a=[],o=[];for(this._root&&a.push(new ma(this._root,this._x0,this._y0,this._x1,this._y1));c=a.pop();){var u=c.node;if(u.length){var h,d=c.x0,f=c.y0,p=c.x1,g=c.y1,m=(d+p)/2,v=(f+g)/2;(h=u[0])&&a.push(new ma(h,d,f,m,v)),(h=u[1])&&a.push(new ma(h,m,f,p,v)),(h=u[2])&&a.push(new ma(h,d,v,m,g)),(h=u[3])&&a.push(new ma(h,m,v,p,g))}o.push(c)}for(;c=o.pop();)l(c.node,c.x0,c.y0,c.x1,c.y1);return this},va.x=function NOe(l){return arguments.length?(this._x=l,this):this._x},va.y=function BOe(l){return arguments.length?(this._y=l,this):this._y};const VZ=4294967296;function qOe(l){return l.x}function YOe(l){return l.y}var ZOe=Math.PI*(3-Math.sqrt(5));function KOe(l){var a,o=1,c=.001,u=1-Math.pow(c,1/300),h=0,d=.6,f=new Map,p=v2(v),g=z0("tick","end"),m=function $Oe(){let l=1;return()=>(l=(1664525*l+1013904223)%VZ)/VZ}();function v(){_(),g.call("tick",a),o<c&&(p.stop(),g.call("end",a))}function _(x){var C,S,w=l.length;void 0===x&&(x=1);for(var D=0;D<x;++D)for(o+=(h-o)*u,f.forEach(function(T){T(o)}),C=0;C<w;++C)null==(S=l[C]).fx?S.x+=S.vx*=d:(S.x=S.fx,S.vx=0),null==S.fy?S.y+=S.vy*=d:(S.y=S.fy,S.vy=0);return a}function y(){for(var w,x=0,C=l.length;x<C;++x){if((w=l[x]).index=x,null!=w.fx&&(w.x=w.fx),null!=w.fy&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var S=10*Math.sqrt(.5+x),D=x*ZOe;w.x=S*Math.cos(D),w.y=S*Math.sin(D)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function b(x){return x.initialize&&x.initialize(l,m),x}return null==l&&(l=[]),y(),a={tick:_,restart:function(){return p.restart(v),a},stop:function(){return p.stop(),a},nodes:function(x){return arguments.length?(l=x,y(),f.forEach(b),a):l},alpha:function(x){return arguments.length?(o=+x,a):o},alphaMin:function(x){return arguments.length?(c=+x,a):c},alphaDecay:function(x){return arguments.length?(u=+x,a):+u},alphaTarget:function(x){return arguments.length?(h=+x,a):h},velocityDecay:function(x){return arguments.length?(d=1-x,a):1-d},randomSource:function(x){return arguments.length?(m=x,f.forEach(b),a):m},force:function(x,C){return arguments.length>1?(null==C?f.delete(x):f.set(x,b(C)),a):f.get(x)},find:function(x,C,w){var T,A,I,N,k,S=0,D=l.length;for(null==w?w=1/0:w*=w,S=0;S<D;++S)(I=(T=x-(N=l[S]).x)*T+(A=C-N.y)*A)<w&&(k=N,w=I);return k},on:function(x,C){return arguments.length>1?(g.on(x,C),a):g.on(x)}}}function QOe(){var l,a,o,c,h,u=io(-30),d=1,f=1/0,p=.81;function g(y){var b,x=l.length,C=j2(l,qOe,YOe).visitAfter(v);for(c=y,b=0;b<x;++b)a=l[b],C.visit(_)}function m(){if(l){var y,x,b=l.length;for(h=new Array(b),y=0;y<b;++y)h[(x=l[y]).index]=+u(x,y,l)}}function v(y){var x,C,S,D,T,b=0,w=0;if(y.length){for(S=D=T=0;T<4;++T)(x=y[T])&&(C=Math.abs(x.value))&&(b+=x.value,w+=C,S+=C*x.x,D+=C*x.y);y.x=S/w,y.y=D/w}else{(x=y).x=x.data.x,x.y=x.data.y;do{b+=h[x.data.index]}while(x=x.next)}y.value=b}function _(y,b,x,C){if(!y.value)return!0;var w=y.x-a.x,S=y.y-a.y,D=C-b,T=w*w+S*S;if(D*D/p<T)return T<f&&(0===w&&(T+=(w=hf(o))*w),0===S&&(T+=(S=hf(o))*S),T<d&&(T=Math.sqrt(d*T)),a.vx+=w*y.value*c/T,a.vy+=S*y.value*c/T),!0;if(!(y.length||T>=f)){(y.data!==a||y.next)&&(0===w&&(T+=(w=hf(o))*w),0===S&&(T+=(S=hf(o))*S),T<d&&(T=Math.sqrt(d*T)));do{y.data!==a&&(a.vx+=w*(D=h[y.data.index]*c/T),a.vy+=S*D)}while(y=y.next)}}return g.initialize=function(y,b){l=y,o=b,m()},g.strength=function(y){return arguments.length?(u="function"==typeof y?y:io(+y),m(),g):u},g.distanceMin=function(y){return arguments.length?(d=y*y,g):Math.sqrt(d)},g.distanceMax=function(y){return arguments.length?(f=y*y,g):Math.sqrt(f)},g.theta=function(y){return arguments.length?(p=y*y,g):Math.sqrt(p)},g}function JOe(l,a,o){var c,h,d,u=io(.1);function f(g){for(var m=0,v=c.length;m<v;++m){var _=c[m],y=_.x-a||1e-6,b=_.y-o||1e-6,x=Math.sqrt(y*y+b*b),C=(d[m]-x)*h[m]*g/x;_.vx+=y*C,_.vy+=b*C}}function p(){if(c){var g,m=c.length;for(h=new Array(m),d=new Array(m),g=0;g<m;++g)d[g]=+l(c[g],g,c),h[g]=isNaN(d[g])?0:+u(c[g],g,c)}}return"function"!=typeof l&&(l=io(+l)),null==a&&(a=0),null==o&&(o=0),f.initialize=function(g){c=g,p()},f.strength=function(g){return arguments.length?(u="function"==typeof g?g:io(+g),p(),f):u},f.radius=function(g){return arguments.length?(l="function"==typeof g?g:io(+g),p(),f):l},f.x=function(g){return arguments.length?(a=+g,f):a},f.y=function(g){return arguments.length?(o=+g,f):o},f}function eFe(l){var o,c,u,a=io(.1);function h(f){for(var m,p=0,g=o.length;p<g;++p)(m=o[p]).vx+=(u[p]-m.x)*c[p]*f}function d(){if(o){var f,p=o.length;for(c=new Array(p),u=new Array(p),f=0;f<p;++f)c[f]=isNaN(u[f]=+l(o[f],f,o))?0:+a(o[f],f,o)}}return"function"!=typeof l&&(l=io(null==l?0:+l)),h.initialize=function(f){o=f,d()},h.strength=function(f){return arguments.length?(a="function"==typeof f?f:io(+f),d(),h):a},h.x=function(f){return arguments.length?(l="function"==typeof f?f:io(+f),d(),h):l},h}function tFe(l){var o,c,u,a=io(.1);function h(f){for(var m,p=0,g=o.length;p<g;++p)(m=o[p]).vy+=(u[p]-m.y)*c[p]*f}function d(){if(o){var f,p=o.length;for(c=new Array(p),u=new Array(p),f=0;f<p;++f)c[f]=isNaN(u[f]=+l(o[f],f,o))?0:+a(o[f],f,o)}}return"function"!=typeof l&&(l=io(null==l?0:+l)),h.initialize=function(f){o=f,d()},h.strength=function(f){return arguments.length?(a="function"==typeof f?f:io(+f),d(),h):a},h.y=function(f){return arguments.length?(l="function"==typeof f?f:io(+f),d(),h):l},h}function $2(l,a){if((o=(l=a?l.toExponential(a-1):l.toExponential()).indexOf("e"))<0)return null;var o,c=l.slice(0,o);return[c.length>1?c[0]+c.slice(2):c,+l.slice(o+1)]}function cv(l){return(l=$2(Math.abs(l)))?l[1]:NaN}var zZ,sFe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uv(l){if(!(a=sFe.exec(l)))throw new Error("invalid format: "+l);var a;return new q2({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}function q2(l){this.fill=void 0===l.fill?" ":l.fill+"",this.align=void 0===l.align?">":l.align+"",this.sign=void 0===l.sign?"-":l.sign+"",this.symbol=void 0===l.symbol?"":l.symbol+"",this.zero=!!l.zero,this.width=void 0===l.width?void 0:+l.width,this.comma=!!l.comma,this.precision=void 0===l.precision?void 0:+l.precision,this.trim=!!l.trim,this.type=void 0===l.type?"":l.type+""}function UZ(l,a){var o=$2(l,a);if(!o)return l+"";var c=o[0],u=o[1];return u<0?"0."+new Array(-u).join("0")+c:c.length>u+1?c.slice(0,u+1)+"."+c.slice(u+1):c+new Array(u-c.length+2).join("0")}uv.prototype=q2.prototype,q2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const HZ={"%":(l,a)=>(100*l).toFixed(a),b:l=>Math.round(l).toString(2),c:l=>l+"",d:function nFe(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)},e:(l,a)=>l.toExponential(a),f:(l,a)=>l.toFixed(a),g:(l,a)=>l.toPrecision(a),o:l=>Math.round(l).toString(8),p:(l,a)=>UZ(100*l,a),r:UZ,s:function aFe(l,a){var o=$2(l,a);if(!o)return l+"";var c=o[0],u=o[1],h=u-(zZ=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,d=c.length;return h===d?c:h>d?c+new Array(h-d+1).join("0"):h>0?c.slice(0,h)+"."+c.slice(h):"0."+new Array(1-h).join("0")+$2(l,Math.max(0,a+h-1))[0]},X:l=>Math.round(l).toString(16).toUpperCase(),x:l=>Math.round(l).toString(16)};function WZ(l){return l}var Y2,X2,uF,GZ=Array.prototype.map,jZ=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function $Z(l){var a=void 0===l.grouping||void 0===l.thousands?WZ:function iFe(l,a){return function(o,c){for(var u=o.length,h=[],d=0,f=l[0],p=0;u>0&&f>0&&(p+f+1>c&&(f=Math.max(1,c-p)),h.push(o.substring(u-=f,u+f)),!((p+=f+1)>c));)f=l[d=(d+1)%l.length];return h.reverse().join(a)}}(GZ.call(l.grouping,Number),l.thousands+""),o=void 0===l.currency?"":l.currency[0]+"",c=void 0===l.currency?"":l.currency[1]+"",u=void 0===l.decimal?".":l.decimal+"",h=void 0===l.numerals?WZ:function rFe(l){return function(a){return a.replace(/[0-9]/g,function(o){return l[+o]})}}(GZ.call(l.numerals,String)),d=void 0===l.percent?"%":l.percent+"",f=void 0===l.minus?"\u2212":l.minus+"",p=void 0===l.nan?"NaN":l.nan+"";function g(v){var _=(v=uv(v)).fill,y=v.align,b=v.sign,x=v.symbol,C=v.zero,w=v.width,S=v.comma,D=v.precision,T=v.trim,A=v.type;"n"===A?(S=!0,A="g"):HZ[A]||(void 0===D&&(D=12),T=!0,A="g"),(C||"0"===_&&"="===y)&&(C=!0,_="0",y="=");var I="$"===x?o:"#"===x&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",N="$"===x?c:/[%p]/.test(A)?d:"",k=HZ[A],F=/[defgprs%]/.test(A);function B(V){var L,U,z,$=I,q=N;if("c"===A)q=k(V)+q,V="";else{var W=(V=+V)<0||1/V<0;if(V=isNaN(V)?p:k(Math.abs(V),D),T&&(V=function oFe(l){e:for(var u,a=l.length,o=1,c=-1;o<a;++o)switch(l[o]){case".":c=u=o;break;case"0":0===c&&(c=o),u=o;break;default:if(!+l[o])break e;c>0&&(c=0)}return c>0?l.slice(0,c)+l.slice(u+1):l}(V)),W&&0==+V&&"+"!==b&&(W=!1),$=(W?"("===b?b:f:"-"===b||"("===b?"":b)+$,q=("s"===A?jZ[8+zZ/3]:"")+q+(W&&"("===b?")":""),F)for(L=-1,U=V.length;++L<U;)if(48>(z=V.charCodeAt(L))||z>57){q=(46===z?u+V.slice(L+1):V.slice(L))+q,V=V.slice(0,L);break}}S&&!C&&(V=a(V,1/0));var H=$.length+V.length+q.length,j=H<w?new Array(w-H+1).join(_):"";switch(S&&C&&(V=a(j+V,j.length?w-q.length:1/0),j=""),y){case"<":V=$+V+q+j;break;case"=":V=$+j+V+q;break;case"^":V=j.slice(0,H=j.length>>1)+$+V+q+j.slice(H);break;default:V=j+$+V+q}return h(V)}return D=void 0===D?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D)),B.toString=function(){return v+""},B}return{format:g,formatPrefix:function m(v,_){var y=g(((v=uv(v)).type="f",v)),b=3*Math.max(-8,Math.min(8,Math.floor(cv(_)/3))),x=Math.pow(10,-b),C=jZ[8+b/3];return function(w){return y(x*w)+C}}}}function qZ(l){return Y2=$Z(l),X2=Y2.format,uF=Y2.formatPrefix,Y2}function YZ(l){return Math.max(0,-cv(Math.abs(l)))}function XZ(l,a){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(cv(a)/3)))-cv(Math.abs(l)))}function ZZ(l,a){return l=Math.abs(l),a=Math.abs(a)-l,Math.max(0,cv(a)-cv(l))+1}qZ({thousands:",",grouping:[3],currency:["$",""]});var Ln=1e-6,xb=1e-12,Ii=Math.PI,ms=Ii/2,Z2=Ii/4,_a=2*Ii,Mr=180/Ii,Bn=Ii/180,Gi=Math.abs,hv=Math.atan,ya=Math.atan2,An=Math.cos,K2=Math.ceil,KZ=Math.exp,hF=(Math,Math.hypot),Q2=Math.log,dF=Math.pow,Cn=Math.sin,oc=Math.sign||function(l){return l>0?1:l<0?-1:0},mo=Math.sqrt,fF=Math.tan;function QZ(l){return l>1?0:l<-1?Ii:Math.acos(l)}function ba(l){return l>1?ms:l<-1?-ms:Math.asin(l)}function JZ(l){return(l=Cn(l/2))*l}function es(){}function J2(l,a){l&&tK.hasOwnProperty(l.type)&&tK[l.type](l,a)}var eK={Feature:function(l,a){J2(l.geometry,a)},FeatureCollection:function(l,a){for(var o=l.features,c=-1,u=o.length;++c<u;)J2(o[c].geometry,a)}},tK={Sphere:function(l,a){a.sphere()},Point:function(l,a){a.point((l=l.coordinates)[0],l[1],l[2])},MultiPoint:function(l,a){for(var o=l.coordinates,c=-1,u=o.length;++c<u;)a.point((l=o[c])[0],l[1],l[2])},LineString:function(l,a){pF(l.coordinates,a,0)},MultiLineString:function(l,a){for(var o=l.coordinates,c=-1,u=o.length;++c<u;)pF(o[c],a,0)},Polygon:function(l,a){nK(l.coordinates,a)},MultiPolygon:function(l,a){for(var o=l.coordinates,c=-1,u=o.length;++c<u;)nK(o[c],a)},GeometryCollection:function(l,a){for(var o=l.geometries,c=-1,u=o.length;++c<u;)J2(o[c],a)}};function pF(l,a,o){var h,c=-1,u=l.length-o;for(a.lineStart();++c<u;)a.point((h=l[c])[0],h[1],h[2]);a.lineEnd()}function nK(l,a){var o=-1,c=l.length;for(a.polygonStart();++o<c;)pF(l[o],a,1);a.polygonEnd()}function Xc(l,a){l&&eK.hasOwnProperty(l.type)?eK[l.type](l,a):J2(l,a)}var iK,rK,gF,mF,vF,eT=new to,tT=new to,Ku={point:es,lineStart:es,lineEnd:es,polygonStart:function(){eT=new to,Ku.lineStart=lFe,Ku.lineEnd=cFe},polygonEnd:function(){var l=+eT;tT.add(l<0?_a+l:l),this.lineStart=this.lineEnd=this.point=es},sphere:function(){tT.add(_a)}};function lFe(){Ku.point=uFe}function cFe(){sK(iK,rK)}function uFe(l,a){Ku.point=sK,iK=l,rK=a,gF=l*=Bn,mF=An(a=(a*=Bn)/2+Z2),vF=Cn(a)}function sK(l,a){var o=(l*=Bn)-gF,c=o>=0?1:-1,u=c*o,h=An(a=(a*=Bn)/2+Z2),d=Cn(a),f=vF*d,p=mF*h+f*An(u),g=f*c*Cn(u);eT.add(ya(g,p)),gF=l,mF=h,vF=d}function hFe(l){return tT=new to,Xc(l,Ku),2*tT}function nT(l){return[ya(l[1],l[0]),ba(l[2])]}function og(l){var a=l[0],o=l[1],c=An(o);return[c*An(a),c*Cn(a),Cn(o)]}function iT(l,a){return l[0]*a[0]+l[1]*a[1]+l[2]*a[2]}function dv(l,a){return[l[1]*a[2]-l[2]*a[1],l[2]*a[0]-l[0]*a[2],l[0]*a[1]-l[1]*a[0]]}function _F(l,a){l[0]+=a[0],l[1]+=a[1],l[2]+=a[2]}function rT(l,a){return[l[0]*a,l[1]*a,l[2]*a]}function sT(l){var a=mo(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);l[0]/=a,l[1]/=a,l[2]/=a}var ts,Ga,vs,wl,ag,oK,aK,fv,wb,df,Qh,Jh={point:yF,lineStart:cK,lineEnd:uK,polygonStart:function(){Jh.point=hK,Jh.lineStart=dFe,Jh.lineEnd=fFe,wb=new to,Ku.polygonStart()},polygonEnd:function(){Ku.polygonEnd(),Jh.point=yF,Jh.lineStart=cK,Jh.lineEnd=uK,eT<0?(ts=-(vs=180),Ga=-(wl=90)):wb>Ln?wl=90:wb<-Ln&&(Ga=-90),Qh[0]=ts,Qh[1]=vs},sphere:function(){ts=-(vs=180),Ga=-(wl=90)}};function yF(l,a){df.push(Qh=[ts=l,vs=l]),a<Ga&&(Ga=a),a>wl&&(wl=a)}function lK(l,a){var o=og([l*Bn,a*Bn]);if(fv){var c=dv(fv,o),h=dv([c[1],-c[0],0],c);sT(h),h=nT(h);var g,d=l-ag,f=d>0?1:-1,p=h[0]*Mr*f,m=Gi(d)>180;m^(f*ag<p&&p<f*l)?(g=h[1]*Mr)>wl&&(wl=g):m^(f*ag<(p=(p+360)%360-180)&&p<f*l)?(g=-h[1]*Mr)<Ga&&(Ga=g):(a<Ga&&(Ga=a),a>wl&&(wl=a)),m?l<ag?Sl(ts,l)>Sl(ts,vs)&&(vs=l):Sl(l,vs)>Sl(ts,vs)&&(ts=l):vs>=ts?(l<ts&&(ts=l),l>vs&&(vs=l)):l>ag?Sl(ts,l)>Sl(ts,vs)&&(vs=l):Sl(l,vs)>Sl(ts,vs)&&(ts=l)}else df.push(Qh=[ts=l,vs=l]);a<Ga&&(Ga=a),a>wl&&(wl=a),fv=o,ag=l}function cK(){Jh.point=lK}function uK(){Qh[0]=ts,Qh[1]=vs,Jh.point=yF,fv=null}function hK(l,a){if(fv){var o=l-ag;wb.add(Gi(o)>180?o+(o>0?360:-360):o)}else oK=l,aK=a;Ku.point(l,a),lK(l,a)}function dFe(){Ku.lineStart()}function fFe(){hK(oK,aK),Ku.lineEnd(),Gi(wb)>Ln&&(ts=-(vs=180)),Qh[0]=ts,Qh[1]=vs,fv=null}function Sl(l,a){return(a-=l)<0?a+360:a}function pFe(l,a){return l[0]-a[0]}function dK(l,a){return l[0]<=l[1]?l[0]<=a&&a<=l[1]:a<l[0]||l[1]<a}function gFe(l){var a,o,c,u,h,d,f;if(wl=vs=-(ts=Ga=1/0),df=[],Xc(l,Jh),o=df.length){for(df.sort(pFe),a=1,h=[c=df[0]];a<o;++a)dK(c,(u=df[a])[0])||dK(c,u[1])?(Sl(c[0],u[1])>Sl(c[0],c[1])&&(c[1]=u[1]),Sl(u[0],c[1])>Sl(c[0],c[1])&&(c[0]=u[0])):h.push(c=u);for(d=-1/0,a=0,c=h[o=h.length-1];a<=o;c=u,++a)(f=Sl(c[1],(u=h[a])[0]))>d&&(d=f,ts=u[0],vs=c[1])}return df=Qh=null,ts===1/0||Ga===1/0?[[NaN,NaN],[NaN,NaN]]:[[ts,Ga],[vs,wl]]}var Sb,oT,aT,lT,cT,uT,hT,dT,bF,CF,xF,fK,pK,Ca,xa,wa,Zc={sphere:es,point:wF,lineStart:gK,lineEnd:mK,polygonStart:function(){Zc.lineStart=_Fe,Zc.lineEnd=yFe},polygonEnd:function(){Zc.lineStart=gK,Zc.lineEnd=mK}};function wF(l,a){l*=Bn;var o=An(a*=Bn);Tb(o*An(l),o*Cn(l),Cn(a))}function Tb(l,a,o){++Sb,aT+=(l-aT)/Sb,lT+=(a-lT)/Sb,cT+=(o-cT)/Sb}function gK(){Zc.point=mFe}function mFe(l,a){l*=Bn;var o=An(a*=Bn);Ca=o*An(l),xa=o*Cn(l),wa=Cn(a),Zc.point=vFe,Tb(Ca,xa,wa)}function vFe(l,a){l*=Bn;var o=An(a*=Bn),c=o*An(l),u=o*Cn(l),h=Cn(a),d=ya(mo((d=xa*h-wa*u)*d+(d=wa*c-Ca*h)*d+(d=Ca*u-xa*c)*d),Ca*c+xa*u+wa*h);oT+=d,uT+=d*(Ca+(Ca=c)),hT+=d*(xa+(xa=u)),dT+=d*(wa+(wa=h)),Tb(Ca,xa,wa)}function mK(){Zc.point=wF}function _Fe(){Zc.point=bFe}function yFe(){vK(fK,pK),Zc.point=wF}function bFe(l,a){fK=l,pK=a,l*=Bn,a*=Bn,Zc.point=vK;var o=An(a);Ca=o*An(l),xa=o*Cn(l),wa=Cn(a),Tb(Ca,xa,wa)}function vK(l,a){l*=Bn;var o=An(a*=Bn),c=o*An(l),u=o*Cn(l),h=Cn(a),d=xa*h-wa*u,f=wa*c-Ca*h,p=Ca*u-xa*c,g=hF(d,f,p),m=ba(g),v=g&&-m/g;bF.add(v*d),CF.add(v*f),xF.add(v*p),oT+=m,uT+=m*(Ca+(Ca=c)),hT+=m*(xa+(xa=u)),dT+=m*(wa+(wa=h)),Tb(Ca,xa,wa)}function CFe(l){Sb=oT=aT=lT=cT=uT=hT=dT=0,bF=new to,CF=new to,xF=new to,Xc(l,Zc);var a=+bF,o=+CF,c=+xF,u=hF(a,o,c);return u<xb&&(a=uT,o=hT,c=dT,oT<Ln&&(a=aT,o=lT,c=cT),(u=hF(a,o,c))<xb)?[NaN,NaN]:[ya(o,a)*Mr,ba(c/u)*Mr]}function pv(l){return function(){return l}}function SF(l,a){function o(c,u){return c=l(c,u),a(c[0],c[1])}return l.invert&&a.invert&&(o.invert=function(c,u){return(c=a.invert(c,u))&&l.invert(c[0],c[1])}),o}function TF(l,a){return[Gi(l)>Ii?l+Math.round(-l/_a)*_a:l,a]}function DF(l,a,o){return(l%=_a)?a||o?SF(yK(l),bK(a,o)):yK(l):a||o?bK(a,o):TF}function _K(l){return function(a,o){return[(a+=l)>Ii?a-_a:a<-Ii?a+_a:a,o]}}function yK(l){var a=_K(l);return a.invert=_K(-l),a}function bK(l,a){var o=An(l),c=Cn(l),u=An(a),h=Cn(a);function d(f,p){var g=An(p),m=An(f)*g,v=Cn(f)*g,_=Cn(p),y=_*o+m*c;return[ya(v*u-y*h,m*o-_*c),ba(y*u+v*h)]}return d.invert=function(f,p){var g=An(p),m=An(f)*g,v=Cn(f)*g,_=Cn(p),y=_*u-v*h;return[ya(v*u+_*h,m*o+y*c),ba(y*o-m*c)]},d}function CK(l){function a(o){return(o=l(o[0]*Bn,o[1]*Bn))[0]*=Mr,o[1]*=Mr,o}return l=DF(l[0]*Bn,l[1]*Bn,l.length>2?l[2]*Bn:0),a.invert=function(o){return(o=l.invert(o[0]*Bn,o[1]*Bn))[0]*=Mr,o[1]*=Mr,o},a}function xK(l,a,o,c,u,h){if(o){var d=An(a),f=Cn(a),p=c*o;null==u?(u=a+c*_a,h=a-p/2):(u=wK(d,u),h=wK(d,h),(c>0?u<h:u>h)&&(u+=c*_a));for(var g,m=u;c>0?m>h:m<h;m-=p)g=nT([d,-f*An(m),-f*Cn(m)]),l.point(g[0],g[1])}}function wK(l,a){(a=og(a))[0]-=l,sT(a);var o=QZ(-a[1]);return((-a[2]<0?-o:o)+_a-Ln)%_a}function xFe(){var c,u,l=pv([0,0]),a=pv(90),o=pv(6),h={point:function d(p,g){c.push(p=u(p,g)),p[0]*=Mr,p[1]*=Mr}};function f(){var p=l.apply(this,arguments),g=a.apply(this,arguments)*Bn,m=o.apply(this,arguments)*Bn;return c=[],u=DF(-p[0]*Bn,-p[1]*Bn,0).invert,xK(h,g,m,1),p={type:"Polygon",coordinates:[c]},c=u=null,p}return f.center=function(p){return arguments.length?(l="function"==typeof p?p:pv([+p[0],+p[1]]),f):l},f.radius=function(p){return arguments.length?(a="function"==typeof p?p:pv(+p),f):a},f.precision=function(p){return arguments.length?(o="function"==typeof p?p:pv(+p),f):o},f}function SK(){var a,l=[];return{point:function(o,c,u){a.push([o,c,u])},lineStart:function(){l.push(a=[])},lineEnd:es,rejoin:function(){l.length>1&&l.push(l.pop().concat(l.shift()))},result:function(){var o=l;return l=[],a=null,o}}}function fT(l,a){return Gi(l[0]-a[0])<Ln&&Gi(l[1]-a[1])<Ln}function pT(l,a,o,c){this.x=l,this.z=a,this.o=o,this.e=c,this.v=!1,this.n=this.p=null}function TK(l,a,o,c,u){var f,p,h=[],d=[];if(l.forEach(function(b){if(!((x=b.length-1)<=0)){var x,S,C=b[0],w=b[x];if(fT(C,w)){if(!C[2]&&!w[2]){for(u.lineStart(),f=0;f<x;++f)u.point((C=b[f])[0],C[1]);return void u.lineEnd()}w[0]+=2*Ln}h.push(S=new pT(C,b,null,!0)),d.push(S.o=new pT(C,null,S,!1)),h.push(S=new pT(w,b,null,!1)),d.push(S.o=new pT(w,null,S,!0))}}),h.length){for(d.sort(a),DK(h),DK(d),f=0,p=d.length;f<p;++f)d[f].e=o=!o;for(var m,v,g=h[0];;){for(var _=g,y=!0;_.v;)if((_=_.n)===g)return;m=_.z,u.lineStart();do{if(_.v=_.o.v=!0,_.e){if(y)for(f=0,p=m.length;f<p;++f)u.point((v=m[f])[0],v[1]);else c(_.x,_.n.x,1,u);_=_.n}else{if(y)for(f=(m=_.p.z).length-1;f>=0;--f)u.point((v=m[f])[0],v[1]);else c(_.x,_.p.x,-1,u);_=_.p}m=(_=_.o).z,y=!y}while(!_.v);u.lineEnd()}}}function DK(l){if(a=l.length){for(var a,u,o=0,c=l[0];++o<a;)c.n=u=l[o],u.p=c,c=u;c.n=u=l[0],u.p=c}}function MF(l){return Gi(l[0])<=Ii?l[0]:oc(l[0])*((Gi(l[0])+Ii)%_a-Ii)}function MK(l,a){var o=MF(a),c=a[1],u=Cn(c),h=[Cn(o),-An(o),0],d=0,f=0,p=new to;1===u?c=ms+Ln:-1===u&&(c=-ms-Ln);for(var g=0,m=l.length;g<m;++g)if(_=(v=l[g]).length)for(var v,_,y=v[_-1],b=MF(y),x=y[1]/2+Z2,C=Cn(x),w=An(x),S=0;S<_;++S,b=T,C=I,w=N,y=D){var D=v[S],T=MF(D),A=D[1]/2+Z2,I=Cn(A),N=An(A),k=T-b,F=k>=0?1:-1,B=F*k,V=B>Ii,$=C*I;if(p.add(ya($*F*Cn(B),w*N+$*An(B))),d+=V?k+F*_a:k,V^b>=o^T>=o){var q=dv(og(y),og(D));sT(q);var L=dv(h,q);sT(L);var U=(V^k>=0?-1:1)*ba(L[2]);(c>U||c===U&&(q[0]||q[1]))&&(f+=V^k>=0?1:-1)}}return(d<-Ln||d<Ln&&p<-xb)^1&f}function EK(l,a,o,c){return function(u){var g,m,v,h=a(u),d=SK(),f=a(d),p=!1,_={point:y,lineStart:x,lineEnd:C,polygonStart:function(){_.point=w,_.lineStart=S,_.lineEnd=D,m=[],g=[]},polygonEnd:function(){_.point=y,_.lineStart=x,_.lineEnd=C,m=PP(m);var T=MK(g,c);m.length?(p||(u.polygonStart(),p=!0),TK(m,SFe,T,o,u)):T&&(p||(u.polygonStart(),p=!0),u.lineStart(),o(null,null,1,u),u.lineEnd()),p&&(u.polygonEnd(),p=!1),m=g=null},sphere:function(){u.polygonStart(),u.lineStart(),o(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function y(T,A){l(T,A)&&u.point(T,A)}function b(T,A){h.point(T,A)}function x(){_.point=b,h.lineStart()}function C(){_.point=y,h.lineEnd()}function w(T,A){v.push([T,A]),f.point(T,A)}function S(){f.lineStart(),v=[]}function D(){w(v[0][0],v[0][1]),f.lineEnd();var I,k,F,B,T=f.clean(),A=d.result(),N=A.length;if(v.pop(),g.push(v),v=null,N){if(1&T){if((k=(F=A[0]).length-1)>0){for(p||(u.polygonStart(),p=!0),u.lineStart(),I=0;I<k;++I)u.point((B=F[I])[0],B[1]);u.lineEnd()}return}N>1&&2&T&&A.push(A.pop().concat(A.shift())),m.push(A.filter(wFe))}}return _}}function wFe(l){return l.length>1}function SFe(l,a){return((l=l.x)[0]<0?l[1]-ms-Ln:ms-l[1])-((a=a.x)[0]<0?a[1]-ms-Ln:ms-a[1])}TF.invert=TF;const EF=EK(function(){return!0},function TFe(l){var u,a=NaN,o=NaN,c=NaN;return{lineStart:function(){l.lineStart(),u=1},point:function(h,d){var f=h>0?Ii:-Ii,p=Gi(h-a);Gi(p-Ii)<Ln?(l.point(a,o=(o+d)/2>0?ms:-ms),l.point(c,o),l.lineEnd(),l.lineStart(),l.point(f,o),l.point(h,o),u=0):c!==f&&p>=Ii&&(Gi(a-c)<Ln&&(a-=c*Ln),Gi(h-f)<Ln&&(h-=f*Ln),o=function DFe(l,a,o,c){var u,h,d=Cn(l-o);return Gi(d)>Ln?hv((Cn(a)*(h=An(c))*Cn(o)-Cn(c)*(u=An(a))*Cn(l))/(u*h*d)):(a+c)/2}(a,o,h,d),l.point(c,o),l.lineEnd(),l.lineStart(),l.point(f,o),u=0),l.point(a=h,o=d),c=f},lineEnd:function(){l.lineEnd(),a=o=NaN},clean:function(){return 2-u}}},function MFe(l,a,o,c){var u;if(null==l)c.point(-Ii,u=o*ms),c.point(0,u),c.point(Ii,u),c.point(Ii,0),c.point(Ii,-u),c.point(0,-u),c.point(-Ii,-u),c.point(-Ii,0),c.point(-Ii,u);else if(Gi(l[0]-a[0])>Ln){var h=l[0]<a[0]?Ii:-Ii;c.point(-h,u=o*h/2),c.point(0,u),c.point(h,u)}else c.point(a[0],a[1])},[-Ii,-ms]);function kK(l){var a=An(l),o=6*Bn,c=a>0,u=Gi(a)>Ln;function d(m,v){return An(m)*An(v)>a}function p(m,v,_){var x=[1,0,0],C=dv(og(m),og(v)),w=iT(C,C),S=C[0],D=w-S*S;if(!D)return!_&&m;var T=a*w/D,A=-a*S/D,I=dv(x,C),N=rT(x,T);_F(N,rT(C,A));var F=I,B=iT(N,F),V=iT(F,F),$=B*B-V*(iT(N,N)-1);if(!($<0)){var q=mo($),L=rT(F,(-B-q)/V);if(_F(L,N),L=nT(L),!_)return L;var j,U=m[0],z=v[0],W=m[1],H=v[1];z<U&&(j=U,U=z,z=j);var G=z-U,K=Gi(G-Ii)<Ln;if(!K&&H<W&&(j=W,W=H,H=j),K||G<Ln?K?W+H>0^L[1]<(Gi(L[0]-U)<Ln?W:H):W<=L[1]&&L[1]<=H:G>Ii^(U<=L[0]&&L[0]<=z)){var ce=rT(F,(-B+q)/V);return _F(ce,N),[L,nT(ce)]}}}function g(m,v){var _=c?l:Ii-l,y=0;return m<-_?y|=1:m>_&&(y|=2),v<-_?y|=4:v>_&&(y|=8),y}return EK(d,function f(m){var v,_,y,b,x;return{lineStart:function(){b=y=!1,x=1},point:function(C,w){var D,S=[C,w],T=d(C,w),A=c?T?0:g(C,w):T?g(C+(C<0?Ii:-Ii),w):0;if(!v&&(b=y=T)&&m.lineStart(),T!==y&&(!(D=p(v,S))||fT(v,D)||fT(S,D))&&(S[2]=1),T!==y)x=0,T?(m.lineStart(),D=p(S,v),m.point(D[0],D[1])):(D=p(v,S),m.point(D[0],D[1],2),m.lineEnd()),v=D;else if(u&&v&&c^T){var I;!(A&_)&&(I=p(S,v,!0))&&(x=0,c?(m.lineStart(),m.point(I[0][0],I[0][1]),m.point(I[1][0],I[1][1]),m.lineEnd()):(m.point(I[1][0],I[1][1]),m.lineEnd(),m.lineStart(),m.point(I[0][0],I[0][1],3)))}T&&(!v||!fT(v,S))&&m.point(S[0],S[1]),v=S,y=T,_=A},lineEnd:function(){y&&m.lineEnd(),v=null},clean:function(){return x|(b&&y)<<1}}},function h(m,v,_,y){xK(y,l,o,_,m,v)},c?[0,-l]:[-Ii,l-Ii])}var Db=1e9,gT=-Db;function mT(l,a,o,c){function u(g,m){return l<=g&&g<=o&&a<=m&&m<=c}function h(g,m,v,_){var y=0,b=0;if(null==g||(y=d(g,v))!==(b=d(m,v))||p(g,m)<0^v>0)do{_.point(0===y||3===y?l:o,y>1?c:a)}while((y=(y+v+4)%4)!==b);else _.point(m[0],m[1])}function d(g,m){return Gi(g[0]-l)<Ln?m>0?0:3:Gi(g[0]-o)<Ln?m>0?2:1:Gi(g[1]-a)<Ln?m>0?1:0:m>0?3:2}function f(g,m){return p(g.x,m.x)}function p(g,m){var v=d(g,1),_=d(m,1);return v!==_?v-_:0===v?m[1]-g[1]:1===v?g[0]-m[0]:2===v?g[1]-m[1]:m[0]-g[0]}return function(g){var _,y,b,x,C,w,S,D,T,A,I,m=g,v=SK(),N={point:k,lineStart:function $(){N.point=L,y&&y.push(b=[]),A=!0,T=!1,S=D=NaN},lineEnd:function q(){_&&(L(x,C),w&&T&&v.rejoin(),_.push(v.result())),N.point=k,T&&m.lineEnd()},polygonStart:function B(){m=v,_=[],y=[],I=!0},polygonEnd:function V(){var U=function F(){for(var U=0,z=0,W=y.length;z<W;++z)for(var J,ce,H=y[z],j=1,G=H.length,K=H[0],oe=K[0],xe=K[1];j<G;++j)J=oe,ce=xe,oe=(K=H[j])[0],xe=K[1],ce<=c?xe>c&&(oe-J)*(c-ce)>(xe-ce)*(l-J)&&++U:xe<=c&&(oe-J)*(c-ce)<(xe-ce)*(l-J)&&--U;return U}(),z=I&&U,W=(_=PP(_)).length;(z||W)&&(g.polygonStart(),z&&(g.lineStart(),h(null,null,1,g),g.lineEnd()),W&&TK(_,f,U,h,g),g.polygonEnd()),m=g,_=y=b=null}};function k(U,z){u(U,z)&&m.point(U,z)}function L(U,z){var W=u(U,z);if(y&&b.push([U,z]),A)x=U,C=z,w=W,A=!1,W&&(m.lineStart(),m.point(U,z));else if(W&&T)m.point(U,z);else{var H=[S=Math.max(gT,Math.min(Db,S)),D=Math.max(gT,Math.min(Db,D))],j=[U=Math.max(gT,Math.min(Db,U)),z=Math.max(gT,Math.min(Db,z))];!function EFe(l,a,o,c,u,h){var b,d=l[0],f=l[1],m=0,v=1,_=a[0]-d,y=a[1]-f;if(b=o-d,_||!(b>0)){if(b/=_,_<0){if(b<m)return;b<v&&(v=b)}else if(_>0){if(b>v)return;b>m&&(m=b)}if(b=u-d,_||!(b<0)){if(b/=_,_<0){if(b>v)return;b>m&&(m=b)}else if(_>0){if(b<m)return;b<v&&(v=b)}if(b=c-f,y||!(b>0)){if(b/=y,y<0){if(b<m)return;b<v&&(v=b)}else if(y>0){if(b>v)return;b>m&&(m=b)}if(b=h-f,y||!(b<0)){if(b/=y,y<0){if(b>v)return;b>m&&(m=b)}else if(y>0){if(b<m)return;b<v&&(v=b)}return m>0&&(l[0]=d+m*_,l[1]=f+m*y),v<1&&(a[0]=d+v*_,a[1]=f+v*y),!0}}}}}(H,j,l,a,o,c)?W&&(m.lineStart(),m.point(U,z),I=!1):(T||(m.lineStart(),m.point(H[0],H[1])),m.point(j[0],j[1]),W||m.lineEnd(),I=!1)}S=U,D=z,T=W}return N}}function kFe(){var u,h,d,l=0,a=0,o=960,c=500;return d={stream:function(f){return u&&h===f?u:u=mT(l,a,o,c)(h=f)},extent:function(f){return arguments.length?(l=+f[0][0],a=+f[0][1],o=+f[1][0],c=+f[1][1],u=h=null,d):[[l,a],[o,c]]}}}var kF,AF,vT,_T,gv={sphere:es,point:es,lineStart:function AFe(){gv.point=PFe,gv.lineEnd=IFe},lineEnd:es,polygonStart:es,polygonEnd:es};function IFe(){gv.point=gv.lineEnd=es}function PFe(l,a){AF=l*=Bn,vT=Cn(a*=Bn),_T=An(a),gv.point=OFe}function OFe(l,a){l*=Bn;var o=Cn(a*=Bn),c=An(a),u=Gi(l-AF),h=An(u),f=c*Cn(u),p=_T*o-vT*c*h,g=vT*o+_T*c*h;kF.add(ya(mo(f*f+p*p),g)),AF=l,vT=o,_T=c}function AK(l){return kF=new to,Xc(l,gv),+kF}var IF=[null,null],FFe={type:"LineString",coordinates:IF};function yT(l,a){return IF[0]=l,IF[1]=a,AK(FFe)}var IK={Feature:function(l,a){return bT(l.geometry,a)},FeatureCollection:function(l,a){for(var o=l.features,c=-1,u=o.length;++c<u;)if(bT(o[c].geometry,a))return!0;return!1}},PK={Sphere:function(){return!0},Point:function(l,a){return OK(l.coordinates,a)},MultiPoint:function(l,a){for(var o=l.coordinates,c=-1,u=o.length;++c<u;)if(OK(o[c],a))return!0;return!1},LineString:function(l,a){return FK(l.coordinates,a)},MultiLineString:function(l,a){for(var o=l.coordinates,c=-1,u=o.length;++c<u;)if(FK(o[c],a))return!0;return!1},Polygon:function(l,a){return RK(l.coordinates,a)},MultiPolygon:function(l,a){for(var o=l.coordinates,c=-1,u=o.length;++c<u;)if(RK(o[c],a))return!0;return!1},GeometryCollection:function(l,a){for(var o=l.geometries,c=-1,u=o.length;++c<u;)if(bT(o[c],a))return!0;return!1}};function bT(l,a){return!(!l||!PK.hasOwnProperty(l.type))&&PK[l.type](l,a)}function OK(l,a){return 0===yT(l,a)}function FK(l,a){for(var o,c,u,h=0,d=l.length;h<d;h++){if(0===(c=yT(l[h],a))||h>0&&(u=yT(l[h],l[h-1]))>0&&o<=u&&c<=u&&(o+c-u)*(1-Math.pow((o-c)/u,2))<xb*u)return!0;o=c}return!1}function RK(l,a){return!!MK(l.map(RFe),NK(a))}function RFe(l){return(l=l.map(NK)).pop(),l}function NK(l){return[l[0]*Bn,l[1]*Bn]}function NFe(l,a){return(l&&IK.hasOwnProperty(l.type)?IK[l.type]:bT)(l,a)}function LK(l,a,o){var c=gl(l,a-Ln,o).concat(a);return function(u){return c.map(function(h){return[u,h]})}}function BK(l,a,o){var c=gl(l,a-Ln,o).concat(a);return function(u){return c.map(function(h){return[h,u]})}}function VK(){var l,a,o,c,u,h,d,f,_,y,b,x,p=10,g=p,m=90,v=360,C=2.5;function w(){return{type:"MultiLineString",coordinates:S()}}function S(){return gl(K2(c/m)*m,o,m).map(b).concat(gl(K2(f/v)*v,d,v).map(x)).concat(gl(K2(a/p)*p,l,p).filter(function(D){return Gi(D%m)>Ln}).map(_)).concat(gl(K2(h/g)*g,u,g).filter(function(D){return Gi(D%v)>Ln}).map(y))}return w.lines=function(){return S().map(function(D){return{type:"LineString",coordinates:D}})},w.outline=function(){return{type:"Polygon",coordinates:[b(c).concat(x(d).slice(1),b(o).reverse().slice(1),x(f).reverse().slice(1))]}},w.extent=function(D){return arguments.length?w.extentMajor(D).extentMinor(D):w.extentMinor()},w.extentMajor=function(D){return arguments.length?(f=+D[0][1],d=+D[1][1],(c=+D[0][0])>(o=+D[1][0])&&(D=c,c=o,o=D),f>d&&(D=f,f=d,d=D),w.precision(C)):[[c,f],[o,d]]},w.extentMinor=function(D){return arguments.length?(h=+D[0][1],u=+D[1][1],(a=+D[0][0])>(l=+D[1][0])&&(D=a,a=l,l=D),h>u&&(D=h,h=u,u=D),w.precision(C)):[[a,h],[l,u]]},w.step=function(D){return arguments.length?w.stepMajor(D).stepMinor(D):w.stepMinor()},w.stepMajor=function(D){return arguments.length?(m=+D[0],v=+D[1],w):[m,v]},w.stepMinor=function(D){return arguments.length?(p=+D[0],g=+D[1],w):[p,g]},w.precision=function(D){return arguments.length?(C=+D,_=LK(h,u,90),y=BK(a,l,C),b=LK(f,d,90),x=BK(c,o,C),w):C},w.extentMajor([[-180,-90+Ln],[180,90-Ln]]).extentMinor([[-180,-80-Ln],[180,80+Ln]])}function LFe(){return VK()()}function BFe(l,a){var o=l[0]*Bn,c=l[1]*Bn,u=a[0]*Bn,h=a[1]*Bn,d=An(c),f=Cn(c),p=An(h),g=Cn(h),m=d*An(o),v=d*Cn(o),_=p*An(u),y=p*Cn(u),b=2*ba(mo(JZ(h-c)+d*p*JZ(u-o))),x=Cn(b),C=b?function(w){var S=Cn(w*=b)/x,D=Cn(b-w)/x,T=D*m+S*_,A=D*v+S*y,I=D*f+S*g;return[ya(A,T)*Mr,ya(I,mo(T*T+A*A))*Mr]}:function(){return[o*Mr,c*Mr]};return C.distance=b,C}const Mb=l=>l;var zK,UK,FF,RF,PF=new to,OF=new to,ff={point:es,lineStart:es,lineEnd:es,polygonStart:function(){ff.lineStart=VFe,ff.lineEnd=UFe},polygonEnd:function(){ff.lineStart=ff.lineEnd=ff.point=es,PF.add(Gi(OF)),OF=new to},result:function(){var l=PF/2;return PF=new to,l}};function VFe(){ff.point=zFe}function zFe(l,a){ff.point=HK,zK=FF=l,UK=RF=a}function HK(l,a){OF.add(RF*l-FF*a),FF=l,RF=a}function UFe(){HK(zK,UK)}const WK=ff;var mv=1/0,CT=mv,Eb=-mv,xT=Eb,HFe={point:function WFe(l,a){l<mv&&(mv=l),l>Eb&&(Eb=l),a<CT&&(CT=a),a>xT&&(xT=a)},lineStart:es,lineEnd:es,polygonStart:es,polygonEnd:es,result:function(){var l=[[mv,CT],[Eb,xT]];return Eb=xT=-(CT=mv=1/0),l}};const wT=HFe;var GK,jK,Qu,Ju,NF=0,LF=0,kb=0,ST=0,TT=0,vv=0,BF=0,VF=0,Ab=0,Kc={point:lg,lineStart:$K,lineEnd:qK,polygonStart:function(){Kc.lineStart=$Fe,Kc.lineEnd=qFe},polygonEnd:function(){Kc.point=lg,Kc.lineStart=$K,Kc.lineEnd=qK},result:function(){var l=Ab?[BF/Ab,VF/Ab]:vv?[ST/vv,TT/vv]:kb?[NF/kb,LF/kb]:[NaN,NaN];return NF=LF=kb=ST=TT=vv=BF=VF=Ab=0,l}};function lg(l,a){NF+=l,LF+=a,++kb}function $K(){Kc.point=GFe}function GFe(l,a){Kc.point=jFe,lg(Qu=l,Ju=a)}function jFe(l,a){var o=l-Qu,c=a-Ju,u=mo(o*o+c*c);ST+=u*(Qu+l)/2,TT+=u*(Ju+a)/2,vv+=u,lg(Qu=l,Ju=a)}function qK(){Kc.point=lg}function $Fe(){Kc.point=YFe}function qFe(){YK(GK,jK)}function YFe(l,a){Kc.point=YK,lg(GK=Qu=l,jK=Ju=a)}function YK(l,a){var o=l-Qu,c=a-Ju,u=mo(o*o+c*c);ST+=u*(Qu+l)/2,TT+=u*(Ju+a)/2,vv+=u,BF+=(u=Ju*l-Qu*a)*(Qu+l),VF+=u*(Ju+a),Ab+=3*u,lg(Qu=l,Ju=a)}const XK=Kc;function ZK(l){this._context=l}ZK.prototype={_radius:4.5,pointRadius:function(l){return this._radius=l,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(l,a){switch(this._point){case 0:this._context.moveTo(l,a),this._point=1;break;case 1:this._context.lineTo(l,a);break;default:this._context.moveTo(l+this._radius,a),this._context.arc(l,a,this._radius,0,_a)}},result:es};var UF,KK,QK,Ib,Pb,zF=new to,DT={point:es,lineStart:function(){DT.point=XFe},lineEnd:function(){UF&&JK(KK,QK),DT.point=es},polygonStart:function(){UF=!0},polygonEnd:function(){UF=null},result:function(){var l=+zF;return zF=new to,l}};function XFe(l,a){DT.point=JK,KK=Ib=l,QK=Pb=a}function JK(l,a){zF.add(mo((Ib-=l)*Ib+(Pb-=a)*Pb)),Ib=l,Pb=a}const eQ=DT;function tQ(){this._string=[]}function nQ(l){return"m0,"+l+"a"+l+","+l+" 0 1,1 0,"+-2*l+"a"+l+","+l+" 0 1,1 0,"+2*l+"z"}function ZFe(l,a){var c,u,o=4.5;function h(d){return d&&("function"==typeof o&&u.pointRadius(+o.apply(this,arguments)),Xc(d,c(u))),u.result()}return h.area=function(d){return Xc(d,c(WK)),WK.result()},h.measure=function(d){return Xc(d,c(eQ)),eQ.result()},h.bounds=function(d){return Xc(d,c(wT)),wT.result()},h.centroid=function(d){return Xc(d,c(XK)),XK.result()},h.projection=function(d){return arguments.length?(c=null==d?(l=null,Mb):(l=d).stream,h):l},h.context=function(d){return arguments.length?(u=null==d?(a=null,new tQ):new ZK(a=d),"function"!=typeof o&&u.pointRadius(o),h):a},h.pointRadius=function(d){return arguments.length?(o="function"==typeof d?d:(u.pointRadius(+d),+d),h):o},h.projection(l).context(a)}function KFe(l){return{stream:Ob(l)}}function Ob(l){return function(a){var o=new HF;for(var c in l)o[c]=l[c];return o.stream=a,o}}function HF(){}function WF(l,a,o){var c=l.clipExtent&&l.clipExtent();return l.scale(150).translate([0,0]),null!=c&&l.clipExtent(null),Xc(o,l.stream(wT)),a(wT.result()),null!=c&&l.clipExtent(c),l}function MT(l,a,o){return WF(l,function(c){var u=a[1][0]-a[0][0],h=a[1][1]-a[0][1],d=Math.min(u/(c[1][0]-c[0][0]),h/(c[1][1]-c[0][1])),f=+a[0][0]+(u-d*(c[1][0]+c[0][0]))/2,p=+a[0][1]+(h-d*(c[1][1]+c[0][1]))/2;l.scale(150*d).translate([f,p])},o)}function GF(l,a,o){return MT(l,[[0,0],a],o)}function jF(l,a,o){return WF(l,function(c){var u=+a,h=u/(c[1][0]-c[0][0]),d=(u-h*(c[1][0]+c[0][0]))/2,f=-h*c[0][1];l.scale(150*h).translate([d,f])},o)}function $F(l,a,o){return WF(l,function(c){var u=+a,h=u/(c[1][1]-c[0][1]),d=-h*c[0][0],f=(u-h*(c[1][1]+c[0][1]))/2;l.scale(150*h).translate([d,f])},o)}tQ.prototype={_radius:4.5,_circle:nQ(4.5),pointRadius:function(l){return(l=+l)!==this._radius&&(this._radius=l,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(l,a){switch(this._point){case 0:this._string.push("M",l,",",a),this._point=1;break;case 1:this._string.push("L",l,",",a);break;default:null==this._circle&&(this._circle=nQ(this._radius)),this._string.push("M",l,",",a,this._circle)}},result:function(){if(this._string.length){var l=this._string.join("");return this._string=[],l}return null}},HF.prototype={constructor:HF,point:function(l,a){this.stream.point(l,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var QFe=An(30*Bn);function rQ(l,a){return+a?function eRe(l,a){function o(c,u,h,d,f,p,g,m,v,_,y,b,x,C){var w=g-c,S=m-u,D=w*w+S*S;if(D>4*a&&x--){var T=d+_,A=f+y,I=p+b,N=mo(T*T+A*A+I*I),k=ba(I/=N),F=Gi(Gi(I)-1)<Ln||Gi(h-v)<Ln?(h+v)/2:ya(A,T),B=l(F,k),V=B[0],$=B[1],q=V-c,L=$-u,U=S*q-w*L;(U*U/D>a||Gi((w*q+S*L)/D-.5)>.3||d*_+f*y+p*b<QFe)&&(o(c,u,h,d,f,p,V,$,F,T/=N,A/=N,I,x,C),C.point(V,$),o(V,$,F,T,A,I,g,m,v,_,y,b,x,C))}}return function(c){var u,h,d,f,p,g,m,v,_,y,b,x,C={point:w,lineStart:S,lineEnd:T,polygonStart:function(){c.polygonStart(),C.lineStart=A},polygonEnd:function(){c.polygonEnd(),C.lineStart=S}};function w(k,F){k=l(k,F),c.point(k[0],k[1])}function S(){v=NaN,C.point=D,c.lineStart()}function D(k,F){var B=og([k,F]),V=l(k,F);o(v,_,m,y,b,x,v=V[0],_=V[1],m=k,y=B[0],b=B[1],x=B[2],16,c),c.point(v,_)}function T(){C.point=w,c.lineEnd()}function A(){S(),C.point=I,C.lineEnd=N}function I(k,F){D(u=k,F),h=v,d=_,f=y,p=b,g=x,C.point=D}function N(){o(v,_,m,y,b,x,h,d,u,f,p,g,16,c),C.lineEnd=T,T()}return C}}(l,a):function JFe(l){return Ob({point:function(a,o){a=l(a,o),this.stream.point(a[0],a[1])}})}(l)}var tRe=Ob({point:function(l,a){this.stream.point(l*Bn,a*Bn)}});function sQ(l,a,o,c,u,h){if(!h)return function iRe(l,a,o,c,u){function h(d,f){return[a+l*(d*=c),o-l*(f*=u)]}return h.invert=function(d,f){return[(d-a)/l*c,(o-f)/l*u]},h}(l,a,o,c,u);var d=An(h),f=Cn(h),p=d*l,g=f*l,m=d/l,v=f/l,_=(f*o-d*a)/l,y=(f*a+d*o)/l;function b(x,C){return[p*(x*=c)-g*(C*=u)+a,o-g*x-p*C]}return b.invert=function(x,C){return[c*(m*x-v*C+_),u*(y-v*x-m*C)]},b}function eh(l){return qF(function(){return l})()}function qF(l){var a,m,w,S,D,I,N,k,F,B,o=150,c=480,u=250,h=0,d=0,f=0,p=0,g=0,v=0,_=1,y=1,b=null,x=EF,C=null,T=Mb,A=.5;function V(U){return k(U[0]*Bn,U[1]*Bn)}function $(U){return(U=k.invert(U[0],U[1]))&&[U[0]*Mr,U[1]*Mr]}function q(){var U=sQ(o,0,0,_,y,v).apply(null,a(h,d)),z=sQ(o,c-U[0],u-U[1],_,y,v);return m=DF(f,p,g),N=SF(a,z),k=SF(m,N),I=rQ(N,A),L()}function L(){return F=B=null,V}return V.stream=function(U){return F&&B===U?F:F=tRe(function nRe(l){return Ob({point:function(a,o){var c=l(a,o);return this.stream.point(c[0],c[1])}})}(m)(x(I(T(B=U)))))},V.preclip=function(U){return arguments.length?(x=U,b=void 0,L()):x},V.postclip=function(U){return arguments.length?(T=U,C=w=S=D=null,L()):T},V.clipAngle=function(U){return arguments.length?(x=+U?kK(b=U*Bn):(b=null,EF),L()):b*Mr},V.clipExtent=function(U){return arguments.length?(T=null==U?(C=w=S=D=null,Mb):mT(C=+U[0][0],w=+U[0][1],S=+U[1][0],D=+U[1][1]),L()):null==C?null:[[C,w],[S,D]]},V.scale=function(U){return arguments.length?(o=+U,q()):o},V.translate=function(U){return arguments.length?(c=+U[0],u=+U[1],q()):[c,u]},V.center=function(U){return arguments.length?(h=U[0]%360*Bn,d=U[1]%360*Bn,q()):[h*Mr,d*Mr]},V.rotate=function(U){return arguments.length?(f=U[0]%360*Bn,p=U[1]%360*Bn,g=U.length>2?U[2]%360*Bn:0,q()):[f*Mr,p*Mr,g*Mr]},V.angle=function(U){return arguments.length?(v=U%360*Bn,q()):v*Mr},V.reflectX=function(U){return arguments.length?(_=U?-1:1,q()):_<0},V.reflectY=function(U){return arguments.length?(y=U?-1:1,q()):y<0},V.precision=function(U){return arguments.length?(I=rQ(N,A=U*U),L()):mo(A)},V.fitExtent=function(U,z){return MT(V,U,z)},V.fitSize=function(U,z){return GF(V,U,z)},V.fitWidth=function(U,z){return jF(V,U,z)},V.fitHeight=function(U,z){return $F(V,U,z)},function(){return a=l.apply(this,arguments),V.invert=a.invert&&$,q()}}function YF(l){var a=0,o=Ii/3,c=qF(l),u=c(a,o);return u.parallels=function(h){return arguments.length?c(a=h[0]*Bn,o=h[1]*Bn):[a*Mr,o*Mr]},u}function oQ(l,a){var o=Cn(l),c=(o+Cn(a))/2;if(Gi(c)<Ln)return function rRe(l){var a=An(l);function o(c,u){return[c*a,Cn(u)/a]}return o.invert=function(c,u){return[c/a,ba(u*a)]},o}(l);var u=1+o*(2*c-o),h=mo(u)/c;function d(f,p){var g=mo(u-2*c*Cn(p))/c;return[g*Cn(f*=c),h-g*An(f)]}return d.invert=function(f,p){var g=h-p,m=ya(f,Gi(g))*oc(g);return g*c<0&&(m-=Ii*oc(f)*oc(g)),[m/c,ba((u-(f*f+g*g)*c*c)/(2*c))]},d}function ET(){return YF(oQ).scale(155.424).center([0,33.6442])}function aQ(){return ET().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function oRe(){var l,a,c,h,f,p,o=aQ(),u=ET().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=ET().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(_,y){p=[_,y]}};function m(_){var y=_[0],b=_[1];return p=null,c.point(y,b),p||(h.point(y,b),p)||(f.point(y,b),p)}function v(){return l=a=null,m}return m.invert=function(_){var y=o.scale(),b=o.translate(),x=(_[0]-b[0])/y,C=(_[1]-b[1])/y;return(C>=.12&&C<.234&&x>=-.425&&x<-.214?u:C>=.166&&C<.234&&x>=-.214&&x<-.115?d:o).invert(_)},m.stream=function(_){return l&&a===_?l:l=function sRe(l){var a=l.length;return{point:function(o,c){for(var u=-1;++u<a;)l[u].point(o,c)},sphere:function(){for(var o=-1;++o<a;)l[o].sphere()},lineStart:function(){for(var o=-1;++o<a;)l[o].lineStart()},lineEnd:function(){for(var o=-1;++o<a;)l[o].lineEnd()},polygonStart:function(){for(var o=-1;++o<a;)l[o].polygonStart()},polygonEnd:function(){for(var o=-1;++o<a;)l[o].polygonEnd()}}}([o.stream(a=_),u.stream(_),d.stream(_)])},m.precision=function(_){return arguments.length?(o.precision(_),u.precision(_),d.precision(_),v()):o.precision()},m.scale=function(_){return arguments.length?(o.scale(_),u.scale(.35*_),d.scale(_),m.translate(o.translate())):o.scale()},m.translate=function(_){if(!arguments.length)return o.translate();var y=o.scale(),b=+_[0],x=+_[1];return c=o.translate(_).clipExtent([[b-.455*y,x-.238*y],[b+.455*y,x+.238*y]]).stream(g),h=u.translate([b-.307*y,x+.201*y]).clipExtent([[b-.425*y+Ln,x+.12*y+Ln],[b-.214*y-Ln,x+.234*y-Ln]]).stream(g),f=d.translate([b-.205*y,x+.212*y]).clipExtent([[b-.214*y+Ln,x+.166*y+Ln],[b-.115*y-Ln,x+.234*y-Ln]]).stream(g),v()},m.fitExtent=function(_,y){return MT(m,_,y)},m.fitSize=function(_,y){return GF(m,_,y)},m.fitWidth=function(_,y){return jF(m,_,y)},m.fitHeight=function(_,y){return $F(m,_,y)},m.scale(1070)}function lQ(l){return function(a,o){var c=An(a),u=An(o),h=l(c*u);return h===1/0?[2,0]:[h*u*Cn(a),h*Cn(o)]}}function Fb(l){return function(a,o){var c=mo(a*a+o*o),u=l(c),h=Cn(u),d=An(u);return[ya(a*h,c*d),ba(c&&o*h/c)]}}var XF=lQ(function(l){return mo(2/(1+l))});function aRe(){return eh(XF).scale(124.75).clipAngle(179.999)}XF.invert=Fb(function(l){return 2*ba(l/2)});var ZF=lQ(function(l){return(l=QZ(l))&&l/Cn(l)});function lRe(){return eh(ZF).scale(79.4188).clipAngle(179.999)}function Rb(l,a){return[l,Q2(fF((ms+a)/2))]}function cRe(){return cQ(Rb).scale(961/_a)}function cQ(l){var f,p,g,a=eh(l),o=a.center,c=a.scale,u=a.translate,h=a.clipExtent,d=null;function m(){var v=Ii*c(),_=a(CK(a.rotate()).invert([0,0]));return h(null==d?[[_[0]-v,_[1]-v],[_[0]+v,_[1]+v]]:l===Rb?[[Math.max(_[0]-v,d),f],[Math.min(_[0]+v,p),g]]:[[d,Math.max(_[1]-v,f)],[p,Math.min(_[1]+v,g)]])}return a.scale=function(v){return arguments.length?(c(v),m()):c()},a.translate=function(v){return arguments.length?(u(v),m()):u()},a.center=function(v){return arguments.length?(o(v),m()):o()},a.clipExtent=function(v){return arguments.length?(null==v?d=f=p=g=null:(d=+v[0][0],f=+v[0][1],p=+v[1][0],g=+v[1][1]),m()):null==d?null:[[d,f],[p,g]]},m()}function kT(l){return fF((ms+l)/2)}function uQ(l,a){var o=An(l),c=l===a?Cn(l):Q2(o/An(a))/Q2(kT(a)/kT(l)),u=o*dF(kT(l),c)/c;if(!c)return Rb;function h(d,f){u>0?f<-ms+Ln&&(f=-ms+Ln):f>ms-Ln&&(f=ms-Ln);var p=u/dF(kT(f),c);return[p*Cn(c*d),u-p*An(c*d)]}return h.invert=function(d,f){var p=u-f,g=oc(c)*mo(d*d+p*p),m=ya(d,Gi(p))*oc(p);return p*c<0&&(m-=Ii*oc(d)*oc(p)),[m/c,2*hv(dF(u/g,1/c))-ms]},h}function uRe(){return YF(uQ).scale(109.5).parallels([30,30])}function Nb(l,a){return[l,a]}function hRe(){return eh(Nb).scale(152.63)}function hQ(l,a){var o=An(l),c=l===a?Cn(l):(o-An(a))/(a-l),u=o/c+l;if(Gi(c)<Ln)return Nb;function h(d,f){var p=u-f,g=c*d;return[p*Cn(g),u-p*An(g)]}return h.invert=function(d,f){var p=u-f,g=ya(d,Gi(p))*oc(p);return p*c<0&&(g-=Ii*oc(d)*oc(p)),[g/c,u-oc(c)*mo(d*d+p*p)]},h}function dRe(){return YF(hQ).scale(131.154).center([0,13.9389])}ZF.invert=Fb(function(l){return l}),Rb.invert=function(l,a){return[l,2*hv(KZ(a))-ms]},Nb.invert=Nb;var Lb=1.340264,Bb=-.081106,Vb=893e-6,zb=.003796,AT=mo(3)/2;function KF(l,a){var o=ba(AT*Cn(a)),c=o*o,u=c*c*c;return[l*An(o)/(AT*(Lb+3*Bb*c+u*(7*Vb+9*zb*c))),o*(Lb+Bb*c+u*(Vb+zb*c))]}function pRe(){return eh(KF).scale(177.158)}function QF(l,a){var o=An(a),c=An(l)*o;return[o*Cn(l)/c,Cn(a)/c]}function gRe(){return eh(QF).scale(144.049).clipAngle(60)}function mRe(){var d,f,g,m,v,C,w,l=1,a=0,o=0,c=1,u=1,h=0,p=null,_=1,y=1,b=Ob({point:function(T,A){var I=D([T,A]);this.stream.point(I[0],I[1])}}),x=Mb;function S(){return _=l*c,y=l*u,C=w=null,D}function D(T){var A=T[0]*_,I=T[1]*y;if(h){var N=I*d-A*f;A=A*d+I*f,I=N}return[A+a,I+o]}return D.invert=function(T){var A=T[0]-a,I=T[1]-o;if(h){var N=I*d+A*f;A=A*d-I*f,I=N}return[A/_,I/y]},D.stream=function(T){return C&&w===T?C:C=b(x(w=T))},D.postclip=function(T){return arguments.length?(x=T,p=g=m=v=null,S()):x},D.clipExtent=function(T){return arguments.length?(x=null==T?(p=g=m=v=null,Mb):mT(p=+T[0][0],g=+T[0][1],m=+T[1][0],v=+T[1][1]),S()):null==p?null:[[p,g],[m,v]]},D.scale=function(T){return arguments.length?(l=+T,S()):l},D.translate=function(T){return arguments.length?(a=+T[0],o=+T[1],S()):[a,o]},D.angle=function(T){return arguments.length?(f=Cn(h=T%360*Bn),d=An(h),S()):h*Mr},D.reflectX=function(T){return arguments.length?(c=T?-1:1,S()):c<0},D.reflectY=function(T){return arguments.length?(u=T?-1:1,S()):u<0},D.fitExtent=function(T,A){return MT(D,T,A)},D.fitSize=function(T,A){return GF(D,T,A)},D.fitWidth=function(T,A){return jF(D,T,A)},D.fitHeight=function(T,A){return $F(D,T,A)},D}function JF(l,a){var o=a*a,c=o*o;return[l*(.8707-.131979*o+c*(c*(.003971*o-.001529*c)-.013791)),a*(1.007226+o*(.015085+c*(.028874*o-.044475-.005916*c)))]}function vRe(){return eh(JF).scale(175.295)}function eR(l,a){return[An(a)*Cn(l),Cn(a)]}function _Re(){return eh(eR).scale(249.5).clipAngle(90+Ln)}function tR(l,a){var o=An(a),c=1+An(l)*o;return[o*Cn(l)/c,Cn(a)/c]}function yRe(){return eh(tR).scale(250).clipAngle(142)}function nR(l,a){return[Q2(fF((ms+a)/2)),-l]}function bRe(){var l=cQ(nR),a=l.center,o=l.rotate;return l.center=function(c){return arguments.length?a([-c[1],c[0]]):[(c=a())[1],-c[0]]},l.rotate=function(c){return arguments.length?o([c[0],c[1],c.length>2?c[2]+90:90]):[(c=o())[0],c[1],c[2]-90]},o([0,0,90]).scale(159.155)}function CRe(l,a){return l.parent===a.parent?1:2}function wRe(l,a){return l+a.x}function TRe(l,a){return Math.max(l,a.y)}function ERe(){var l=CRe,a=1,o=1,c=!1;function u(h){var d,f=0;h.eachAfter(function(_){var y=_.children;y?(_.x=function xRe(l){return l.reduce(wRe,0)/l.length}(y),_.y=function SRe(l){return 1+l.reduce(TRe,0)}(y)):(_.x=d?f+=l(_,d):0,_.y=0,d=_)});var p=function DRe(l){for(var a;a=l.children;)l=a[0];return l}(h),g=function MRe(l){for(var a;a=l.children;)l=a[a.length-1];return l}(h),m=p.x-l(p,g)/2,v=g.x+l(g,p)/2;return h.eachAfter(c?function(_){_.x=(_.x-h.x)*a,_.y=(h.y-_.y)*o}:function(_){_.x=(_.x-m)/(v-m)*a,_.y=(1-(h.y?_.y/h.y:1))*o})}return u.separation=function(h){return arguments.length?(l=h,u):l},u.size=function(h){return arguments.length?(c=!1,a=+h[0],o=+h[1],u):c?null:[a,o]},u.nodeSize=function(h){return arguments.length?(c=!0,a=+h[0],o=+h[1],u):c?[a,o]:null},u}function kRe(l){var a=0,o=l.children,c=o&&o.length;if(c)for(;--c>=0;)a+=o[c].value;else a=1;l.value=a}function iR(l,a){l instanceof Map?(l=[void 0,l],void 0===a&&(a=$Re)):void 0===a&&(a=jRe);for(var c,h,d,f,p,o=new cg(l),u=[o];c=u.pop();)if((d=a(c.data))&&(p=(d=Array.from(d)).length))for(c.children=d,f=p-1;f>=0;--f)u.push(h=d[f]=new cg(d[f])),h.parent=c,h.depth=c.depth+1;return o.eachBefore(dQ)}function jRe(l){return l.children}function $Re(l){return Array.isArray(l)?l[1]:null}function qRe(l){void 0!==l.data.value&&(l.value=l.data.value),l.data=l.data.data}function dQ(l){var a=0;do{l.height=a}while((l=l.parent)&&l.height<++a)}function cg(l){this.data=l,this.depth=this.height=0,this.parent=null}function fQ(l){for(var u,h,a=0,o=(l=function XRe(l){for(var o,c,a=l.length;a;)c=Math.random()*a--|0,o=l[a],l[a]=l[c],l[c]=o;return l}(Array.from(l))).length,c=[];a<o;)u=l[a],h&&pQ(h,u)?++a:(h=KRe(c=ZRe(c,u)),a=0);return h}function ZRe(l,a){var o,c;if(rR(a,l))return[a];for(o=0;o<l.length;++o)if(IT(a,l[o])&&rR(Ub(l[o],a),l))return[l[o],a];for(o=0;o<l.length-1;++o)for(c=o+1;c<l.length;++c)if(IT(Ub(l[o],l[c]),a)&&IT(Ub(l[o],a),l[c])&&IT(Ub(l[c],a),l[o])&&rR(gQ(l[o],l[c],a),l))return[l[o],l[c],a];throw new Error}function IT(l,a){var o=l.r-a.r,c=a.x-l.x,u=a.y-l.y;return o<0||o*o<c*c+u*u}function pQ(l,a){var o=l.r-a.r+1e-9*Math.max(l.r,a.r,1),c=a.x-l.x,u=a.y-l.y;return o>0&&o*o>c*c+u*u}function rR(l,a){for(var o=0;o<a.length;++o)if(!pQ(l,a[o]))return!1;return!0}function KRe(l){switch(l.length){case 1:return function QRe(l){return{x:l.x,y:l.y,r:l.r}}(l[0]);case 2:return Ub(l[0],l[1]);case 3:return gQ(l[0],l[1],l[2])}}function Ub(l,a){var o=l.x,c=l.y,u=l.r,h=a.x,d=a.y,f=a.r,p=h-o,g=d-c,m=f-u,v=Math.sqrt(p*p+g*g);return{x:(o+h+p/v*m)/2,y:(c+d+g/v*m)/2,r:(v+u+f)/2}}function gQ(l,a,o){var c=l.x,u=l.y,h=l.r,d=a.x,f=a.y,p=a.r,g=o.x,m=o.y,v=o.r,_=c-d,y=c-g,b=u-f,x=u-m,C=p-h,w=v-h,S=c*c+u*u-h*h,D=S-d*d-f*f+p*p,T=S-g*g-m*m+v*v,A=y*b-_*x,I=(b*T-x*D)/(2*A)-c,N=(x*C-b*w)/A,k=(y*D-_*T)/(2*A)-u,F=(_*w-y*C)/A,B=N*N+F*F-1,V=2*(h+I*N+k*F),$=I*I+k*k-h*h,q=-(B?(V+Math.sqrt(V*V-4*B*$))/(2*B):$/V);return{x:c+I+N*q,y:u+k+F*q,r:q}}function mQ(l,a,o){var u,h,f,p,c=l.x-a.x,d=l.y-a.y,g=c*c+d*d;g?(h=a.r+o.r,p=l.r+o.r,(h*=h)>(p*=p)?(u=(g+p-h)/(2*g),f=Math.sqrt(Math.max(0,p/g-u*u)),o.x=l.x-u*c-f*d,o.y=l.y-u*d+f*c):(u=(g+h-p)/(2*g),f=Math.sqrt(Math.max(0,h/g-u*u)),o.x=a.x+u*c-f*d,o.y=a.y+u*d+f*c)):(o.x=a.x+o.r,o.y=a.y)}function vQ(l,a){var o=l.r+a.r-1e-6,c=a.x-l.x,u=a.y-l.y;return o>0&&o*o>c*c+u*u}function _Q(l){var a=l._,o=l.next._,c=a.r+o.r,u=(a.x*o.r+o.x*a.r)/c,h=(a.y*o.r+o.y*a.r)/c;return u*u+h*h}function PT(l){this._=l,this.next=null,this.previous=null}function yQ(l){if(!(u=(l=function YRe(l){return"object"==typeof l&&"length"in l?l:Array.from(l)}(l)).length))return 0;var a,o,c,u,h,d,f,p,g,m,v;if((a=l[0]).x=0,a.y=0,!(u>1))return a.r;if(a.x=-(o=l[1]).r,o.x=a.r,o.y=0,!(u>2))return a.r+o.r;mQ(o,a,c=l[2]),a=new PT(a),o=new PT(o),c=new PT(c),a.next=c.previous=o,o.next=a.previous=c,c.next=o.previous=a;e:for(f=3;f<u;++f){mQ(a._,o._,c=l[f]),c=new PT(c),p=o.next,g=a.previous,m=o._.r,v=a._.r;do{if(m<=v){if(vQ(p._,c._)){a.next=o=p,o.previous=a,--f;continue e}m+=p._.r,p=p.next}else{if(vQ(g._,c._)){(a=g).next=o,o.previous=a,--f;continue e}v+=g._.r,g=g.previous}}while(p!==g.next);for(c.previous=a,c.next=o,a.next=o.previous=o=c,h=_Q(a);(c=c.next)!==o;)(d=_Q(c))<h&&(a=c,h=d);o=a.next}for(a=[o._],c=o;(c=c.next)!==o;)a.push(c._);for(c=fQ(a),f=0;f<u;++f)(a=l[f]).x-=c.x,a.y-=c.y;return c.r}function JRe(l){return yQ(l),l}function OT(l){return null==l?null:bQ(l)}function bQ(l){if("function"!=typeof l)throw new Error;return l}function ug(){return 0}function _v(l){return function(){return l}}function eNe(l){return Math.sqrt(l.value)}function tNe(){var l=null,a=1,o=1,c=ug;function u(h){return h.x=a/2,h.y=o/2,l?h.eachBefore(CQ(l)).eachAfter(sR(c,.5)).eachBefore(xQ(1)):h.eachBefore(CQ(eNe)).eachAfter(sR(ug,1)).eachAfter(sR(c,h.r/Math.min(a,o))).eachBefore(xQ(Math.min(a,o)/(2*h.r))),h}return u.radius=function(h){return arguments.length?(l=OT(h),u):l},u.size=function(h){return arguments.length?(a=+h[0],o=+h[1],u):[a,o]},u.padding=function(h){return arguments.length?(c="function"==typeof h?h:_v(+h),u):c},u}function CQ(l){return function(a){a.children||(a.r=Math.max(0,+l(a)||0))}}function sR(l,a){return function(o){if(c=o.children){var c,u,f,h=c.length,d=l(o)*a||0;if(d)for(u=0;u<h;++u)c[u].r+=d;if(f=yQ(c),d)for(u=0;u<h;++u)c[u].r-=d;o.r=f+d}}}function xQ(l){return function(a){var o=a.parent;a.r*=l,o&&(a.x=o.x+l*a.x,a.y=o.y+l*a.y)}}function wQ(l){l.x0=Math.round(l.x0),l.y0=Math.round(l.y0),l.x1=Math.round(l.x1),l.y1=Math.round(l.y1)}function Hb(l,a,o,c,u){for(var d,h=l.children,f=-1,p=h.length,g=l.value&&(c-a)/l.value;++f<p;)(d=h[f]).y0=o,d.y1=u,d.x0=a,d.x1=a+=d.value*g}function nNe(){var l=1,a=1,o=0,c=!1;function u(d){var f=d.height+1;return d.x0=d.y0=o,d.x1=l,d.y1=a/f,d.eachBefore(function h(d,f){return function(p){p.children&&Hb(p,p.x0,d*(p.depth+1)/f,p.x1,d*(p.depth+2)/f);var g=p.x0,m=p.y0,v=p.x1-o,_=p.y1-o;v<g&&(g=v=(g+v)/2),_<m&&(m=_=(m+_)/2),p.x0=g,p.y0=m,p.x1=v,p.y1=_}}(a,f)),c&&d.eachBefore(wQ),d}return u.round=function(d){return arguments.length?(c=!!d,u):c},u.size=function(d){return arguments.length?(l=+d[0],a=+d[1],u):[l,a]},u.padding=function(d){return arguments.length?(o=+d,u):o},u}KF.invert=function(l,a){for(var d,o=a,c=o*o,u=c*c*c,h=0;h<12&&(u=(c=(o-=d=(o*(Lb+Bb*c+u*(Vb+zb*c))-a)/(Lb+3*Bb*c+u*(7*Vb+9*zb*c)))*o)*c*c,!(Gi(d)<xb));++h);return[AT*l*(Lb+3*Bb*c+u*(7*Vb+9*zb*c))/An(o),ba(Cn(o)/AT)]},QF.invert=Fb(hv),JF.invert=function(l,a){var u,o=a,c=25;do{var h=o*o,d=h*h;o-=u=(o*(1.007226+h*(.015085+d*(.028874*h-.044475-.005916*d)))-a)/(1.007226+h*(.045255+d*(.259866*h-.311325-.005916*11*d)))}while(Gi(u)>Ln&&--c>0);return[l/(.8707+(h=o*o)*(h*(h*h*h*(.003971-.001529*h)-.013791)-.131979)),o]},eR.invert=Fb(ba),tR.invert=Fb(function(l){return 2*hv(l)}),nR.invert=function(l,a){return[-a,2*hv(KZ(l))-ms]},cg.prototype=iR.prototype={constructor:cg,count:function ARe(){return this.eachAfter(kRe)},each:function IRe(l,a){let o=-1;for(const c of this)l.call(a,c,++o,this);return this},eachAfter:function ORe(l,a){for(var h,d,f,o=this,c=[o],u=[],p=-1;o=c.pop();)if(u.push(o),h=o.children)for(d=0,f=h.length;d<f;++d)c.push(h[d]);for(;o=u.pop();)l.call(a,o,++p,this);return this},eachBefore:function PRe(l,a){for(var u,h,o=this,c=[o],d=-1;o=c.pop();)if(l.call(a,o,++d,this),u=o.children)for(h=u.length-1;h>=0;--h)c.push(u[h]);return this},find:function FRe(l,a){let o=-1;for(const c of this)if(l.call(a,c,++o,this))return c},sum:function RRe(l){return this.eachAfter(function(a){for(var o=+l(a.data)||0,c=a.children,u=c&&c.length;--u>=0;)o+=c[u].value;a.value=o})},sort:function NRe(l){return this.eachBefore(function(a){a.children&&a.children.sort(l)})},path:function LRe(l){for(var a=this,o=function BRe(l,a){if(l===a)return l;var o=l.ancestors(),c=a.ancestors(),u=null;for(l=o.pop(),a=c.pop();l===a;)u=l,l=o.pop(),a=c.pop();return u}(a,l),c=[a];a!==o;)c.push(a=a.parent);for(var u=c.length;l!==o;)c.splice(u,0,l),l=l.parent;return c},ancestors:function VRe(){for(var l=this,a=[l];l=l.parent;)a.push(l);return a},descendants:function zRe(){return Array.from(this)},leaves:function URe(){var l=[];return this.eachBefore(function(a){a.children||l.push(a)}),l},links:function HRe(){var l=this,a=[];return l.each(function(o){o!==l&&a.push({source:o.parent,target:o})}),a},copy:function GRe(){return iR(this).eachBefore(qRe)},[Symbol.iterator]:function*WRe(){var a,c,u,h,l=this,o=[l];do{for(a=o.reverse(),o=[];l=a.pop();)if(yield l,c=l.children)for(u=0,h=c.length;u<h;++u)o.push(c[u])}while(o.length)}};var iNe={depth:-1},SQ={},oR={};function rNe(l){return l.id}function sNe(l){return l.parentId}function oNe(){var o,l=rNe,a=sNe;function c(u){var p,g,m,v,_,y,b,x,h=Array.from(u),d=l,f=a,C=new Map;if(null!=o){const w=h.map((T,A)=>function aNe(l){let a=(l=`${l}`).length;return aR(l,a-1)&&!aR(l,a-2)&&(l=l.slice(0,-1)),"/"===l[0]?l:`/${l}`}(o(T,A,u))),S=w.map(TQ),D=new Set(w).add("");for(const T of S)D.has(T)||(D.add(T),w.push(T),S.push(TQ(T)),h.push(oR));d=(T,A)=>w[A],f=(T,A)=>S[A]}for(m=0,p=h.length;m<p;++m)y=h[m]=new cg(g=h[m]),null!=(b=d(g,m,u))&&(b+="")&&(x=y.id=b,C.set(x,C.has(x)?SQ:y)),null!=(b=f(g,m,u))&&(b+="")&&(y.parent=b);for(m=0;m<p;++m)if(b=(y=h[m]).parent){if(!(_=C.get(b)))throw new Error("missing: "+b);if(_===SQ)throw new Error("ambiguous: "+b);_.children?_.children.push(y):_.children=[y],y.parent=_}else{if(v)throw new Error("multiple roots");v=y}if(!v)throw new Error("no root");if(null!=o){for(;v.data===oR&&1===v.children.length;)v=v.children[0],--p;for(let w=h.length-1;w>=0&&(y=h[w]).data===oR;--w)y.data=null}if(v.parent=iNe,v.eachBefore(function(w){w.depth=w.parent.depth+1,--p}).eachBefore(dQ),v.parent=null,p>0)throw new Error("cycle");return v}return c.id=function(u){return arguments.length?(l=OT(u),c):l},c.parentId=function(u){return arguments.length?(a=OT(u),c):a},c.path=function(u){return arguments.length?(o=OT(u),c):o},c}function TQ(l){let a=l.length;if(a<2)return"";for(;--a>1&&!aR(l,a););return l.slice(0,a)}function aR(l,a){if("/"===l[a]){let o=0;for(;a>0&&"\\"===l[--a];)++o;if(0==(1&o))return!0}return!1}function lNe(l,a){return l.parent===a.parent?1:2}function lR(l){var a=l.children;return a?a[0]:l.t}function cR(l){var a=l.children;return a?a[a.length-1]:l.t}function cNe(l,a,o){var c=o/(a.i-l.i);a.c-=c,a.s+=o,l.c+=c,a.z+=o,a.m+=o}function hNe(l,a,o){return l.a.parent===a.parent?l.a:o}function FT(l,a){this._=l,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=a}function fNe(){var l=lNe,a=1,o=1,c=null;function u(g){var m=function dNe(l){for(var o,u,h,d,f,a=new FT(l,0),c=[a];o=c.pop();)if(h=o._.children)for(o.children=new Array(f=h.length),d=f-1;d>=0;--d)c.push(u=o.children[d]=new FT(h[d],d)),u.parent=o;return(a.parent=new FT(null,0)).children=[a],a}(g);if(m.eachAfter(h),m.parent.m=-m.z,m.eachBefore(d),c)g.eachBefore(p);else{var v=g,_=g,y=g;g.eachBefore(function(S){S.x<v.x&&(v=S),S.x>_.x&&(_=S),S.depth>y.depth&&(y=S)});var b=v===_?1:l(v,_)/2,x=b-v.x,C=a/(_.x+b+x),w=o/(y.depth||1);g.eachBefore(function(S){S.x=(S.x+x)*C,S.y=S.depth*w})}return g}function h(g){var m=g.children,v=g.parent.children,_=g.i?v[g.i-1]:null;if(m){!function uNe(l){for(var h,a=0,o=0,c=l.children,u=c.length;--u>=0;)(h=c[u]).z+=a,h.m+=a,a+=h.s+(o+=h.c)}(g);var y=(m[0].z+m[m.length-1].z)/2;_?(g.z=_.z+l(g._,_._),g.m=g.z-y):g.z=y}else _&&(g.z=_.z+l(g._,_._));g.parent.A=function f(g,m,v){if(m){for(var T,_=g,y=g,b=m,x=_.parent.children[0],C=_.m,w=y.m,S=b.m,D=x.m;b=cR(b),_=lR(_),b&&_;)x=lR(x),(y=cR(y)).a=g,(T=b.z+S-_.z-C+l(b._,_._))>0&&(cNe(hNe(b,g,v),g,T),C+=T,w+=T),S+=b.m,C+=_.m,D+=x.m,w+=y.m;b&&!cR(y)&&(y.t=b,y.m+=S-w),_&&!lR(x)&&(x.t=_,x.m+=C-D,v=g)}return v}(g,_,g.parent.A||v[0])}function d(g){g._.x=g.z+g.parent.m,g.m+=g.parent.m}function p(g){g.x*=a,g.y=g.depth*o}return u.separation=function(g){return arguments.length?(l=g,u):l},u.size=function(g){return arguments.length?(c=!1,a=+g[0],o=+g[1],u):c?null:[a,o]},u.nodeSize=function(g){return arguments.length?(c=!0,a=+g[0],o=+g[1],u):c?[a,o]:null},u}function RT(l,a,o,c,u){for(var d,h=l.children,f=-1,p=h.length,g=l.value&&(u-o)/l.value;++f<p;)(d=h[f]).x0=a,d.x1=c,d.y0=o,d.y1=o+=d.value*g}FT.prototype=Object.create(cg.prototype);var DQ=(1+Math.sqrt(5))/2;function MQ(l,a,o,c,u,h){for(var p,g,y,b,C,w,S,D,T,A,I,d=[],f=a.children,m=0,v=0,_=f.length,x=a.value;m<_;){y=u-o,b=h-c;do{C=f[v++].value}while(!C&&v<_);for(w=S=C,I=C*C*(A=Math.max(b/y,y/b)/(x*l)),T=Math.max(S/I,I/w);v<_;++v){if(C+=g=f[v].value,g<w&&(w=g),g>S&&(S=g),I=C*C*A,(D=Math.max(S/I,I/w))>T){C-=g;break}T=D}d.push(p={value:C,dice:y<b,children:f.slice(m,v)}),p.dice?Hb(p,o,c,u,x?c+=b*C/x:h):RT(p,o,c,x?o+=y*C/x:u,h),x-=C,m=v}return d}const EQ=function l(a){function o(c,u,h,d,f){MQ(a,c,u,h,d,f)}return o.ratio=function(c){return l((c=+c)>1?c:1)},o}(DQ);function pNe(){var l=EQ,a=!1,o=1,c=1,u=[0],h=ug,d=ug,f=ug,p=ug,g=ug;function m(_){return _.x0=_.y0=0,_.x1=o,_.y1=c,_.eachBefore(v),u=[0],a&&_.eachBefore(wQ),_}function v(_){var y=u[_.depth],b=_.x0+y,x=_.y0+y,C=_.x1-y,w=_.y1-y;C<b&&(b=C=(b+C)/2),w<x&&(x=w=(x+w)/2),_.x0=b,_.y0=x,_.x1=C,_.y1=w,_.children&&(y=u[_.depth+1]=h(_)/2,b+=g(_)-y,x+=d(_)-y,(C-=f(_)-y)<b&&(b=C=(b+C)/2),(w-=p(_)-y)<x&&(x=w=(x+w)/2),l(_,b,x,C,w))}return m.round=function(_){return arguments.length?(a=!!_,m):a},m.size=function(_){return arguments.length?(o=+_[0],c=+_[1],m):[o,c]},m.tile=function(_){return arguments.length?(l=bQ(_),m):l},m.padding=function(_){return arguments.length?m.paddingInner(_).paddingOuter(_):m.paddingInner()},m.paddingInner=function(_){return arguments.length?(h="function"==typeof _?_:_v(+_),m):h},m.paddingOuter=function(_){return arguments.length?m.paddingTop(_).paddingRight(_).paddingBottom(_).paddingLeft(_):m.paddingTop()},m.paddingTop=function(_){return arguments.length?(d="function"==typeof _?_:_v(+_),m):d},m.paddingRight=function(_){return arguments.length?(f="function"==typeof _?_:_v(+_),m):f},m.paddingBottom=function(_){return arguments.length?(p="function"==typeof _?_:_v(+_),m):p},m.paddingLeft=function(_){return arguments.length?(g="function"==typeof _?_:_v(+_),m):g},m}function gNe(l,a,o,c,u){var d,p,h=l.children,f=h.length,g=new Array(f+1);for(g[0]=p=d=0;d<f;++d)g[d+1]=p+=h[d].value;!function m(v,_,y,b,x,C,w){if(v>=_-1){var S=h[v];return S.x0=b,S.y0=x,S.x1=C,void(S.y1=w)}for(var D=g[v],T=y/2+D,A=v+1,I=_-1;A<I;){var N=A+I>>>1;g[N]<T?A=N+1:I=N}T-g[A-1]<g[A]-T&&v+1<A&&--A;var k=g[A]-D,F=y-k;if(C-b>w-x){var B=y?(b*F+C*k)/y:C;m(v,A,k,b,x,B,w),m(A,_,F,B,x,C,w)}else{var V=y?(x*F+w*k)/y:w;m(v,A,k,b,x,C,V),m(A,_,F,b,V,C,w)}}(0,f,l.value,a,o,c,u)}function mNe(l,a,o,c,u){(1&l.depth?RT:Hb)(l,a,o,c,u)}const vNe=function l(a){function o(c,u,h,d,f){if((p=c._squarify)&&p.ratio===a)for(var p,g,m,v,y,_=-1,b=p.length,x=c.value;++_<b;){for(m=(g=p[_]).children,v=g.value=0,y=m.length;v<y;++v)g.value+=m[v].value;g.dice?Hb(g,u,h,d,x?h+=(f-h)*g.value/x:f):RT(g,u,h,x?u+=(d-u)*g.value/x:d,f),x-=g.value}else c._squarify=p=MQ(a,c,u,h,d,f),p.ratio=a}return o.ratio=function(c){return l((c=+c)>1?c:1)},o}(DQ);function _Ne(l){var a=l.length;return function(o){return l[Math.max(0,Math.min(a-1,Math.floor(o*a)))]}}function yNe(l,a){var o=f2(+l,+a);return function(c){var u=o(c);return u-360*Math.floor(u/360)}}function NT(l,a){return l=+l,a=+a,function(o){return Math.round(l*(1-o)+a*o)}}function kQ(l){return((l=Math.exp(l))+1/l)/2}const AQ=function l(a,o,c){function u(h,d){var C,w,f=h[0],p=h[1],g=h[2],_=d[2],y=d[0]-f,b=d[1]-p,x=y*y+b*b;if(x<1e-12)w=Math.log(_/g)/a,C=function(N){return[f+N*y,p+N*b,g*Math.exp(a*N*w)]};else{var S=Math.sqrt(x),D=(_*_-g*g+c*x)/(2*g*o*S),T=(_*_-g*g-c*x)/(2*_*o*S),A=Math.log(Math.sqrt(D*D+1)-D),I=Math.log(Math.sqrt(T*T+1)-T);w=(I-A)/a,C=function(N){var k=N*w,F=kQ(A),B=g/(o*S)*(F*function xNe(l){return((l=Math.exp(2*l))-1)/(l+1)}(a*k+A)-function CNe(l){return((l=Math.exp(l))-1/l)/2}(A));return[f+B*y,p+B*b,g*F/kQ(a*k+A)]}}return C.duration=1e3*w*a/Math.SQRT2,C}return u.rho=function(h){var d=Math.max(.001,+h),f=d*d;return l(d,f,f*f)},u}(Math.SQRT2,2,4);function IQ(l){return function(a,o){var c=l((a=h2(a)).h,(o=h2(o)).h),u=go(a.s,o.s),h=go(a.l,o.l),d=go(a.opacity,o.opacity);return function(f){return a.h=c(f),a.s=u(f),a.l=h(f),a.opacity=d(f),a+""}}}const wNe=IQ(f2);var SNe=IQ(go);function TNe(l,a){var o=go((l=D2(l)).l,(a=D2(a)).l),c=go(l.a,a.a),u=go(l.b,a.b),h=go(l.opacity,a.opacity);return function(d){return l.l=o(d),l.a=c(d),l.b=u(d),l.opacity=h(d),l+""}}function PQ(l){return function(a,o){var c=l((a=M2(a)).h,(o=M2(o)).h),u=go(a.c,o.c),h=go(a.l,o.l),d=go(a.opacity,o.opacity);return function(f){return a.h=c(f),a.c=u(f),a.l=h(f),a.opacity=d(f),a+""}}}const DNe=PQ(f2);var MNe=PQ(go);function OQ(l){return function a(o){function c(u,h){var d=l((u=$c(u)).h,(h=$c(h)).h),f=go(u.s,h.s),p=go(u.l,h.l),g=go(u.opacity,h.opacity);return function(m){return u.h=d(m),u.s=f(m),u.l=p(Math.pow(m,o)),u.opacity=g(m),u+""}}return o=+o,c.gamma=a,c}(1)}const ENe=OQ(f2);var LT=OQ(go);function FQ(l,a){void 0===a&&(a=l,l=nf);for(var o=0,c=a.length-1,u=a[0],h=new Array(c<0?0:c);o<c;)h[o]=l(u,u=a[++o]);return function(d){var f=Math.max(0,Math.min(c-1,Math.floor(d*=c)));return h[f](d-f)}}function kNe(l,a){for(var o=new Array(a),c=0;c<a;++c)o[c]=l(c/(a-1));return o}function ANe(l){for(var c,a=-1,o=l.length,u=l[o-1],h=0;++a<o;)h+=(c=u)[1]*(u=l[a])[0]-c[0]*u[1];return h/2}function INe(l){for(var h,f,a=-1,o=l.length,c=0,u=0,d=l[o-1],p=0;++a<o;)p+=f=(h=d)[0]*(d=l[a])[1]-d[0]*h[1],c+=(h[0]+d[0])*f,u+=(h[1]+d[1])*f;return[c/(p*=3),u/p]}function PNe(l,a,o){return(a[0]-l[0])*(o[1]-l[1])-(a[1]-l[1])*(o[0]-l[0])}function ONe(l,a){return l[0]-a[0]||l[1]-a[1]}function RQ(l){const a=l.length,o=[0,1];let u,c=2;for(u=2;u<a;++u){for(;c>1&&PNe(l[o[c-2]],l[o[c-1]],l[u])<=0;)--c;o[c++]=u}return o.slice(0,c)}function FNe(l){if((o=l.length)<3)return null;var a,o,c=new Array(o),u=new Array(o);for(a=0;a<o;++a)c[a]=[+l[a][0],+l[a][1],a];for(c.sort(ONe),a=0;a<o;++a)u[a]=[c[a][0],-c[a][1]];var h=RQ(c),d=RQ(u),f=d[0]===h[0],p=d[d.length-1]===h[h.length-1],g=[];for(a=h.length-1;a>=0;--a)g.push(l[c[h[a]][2]]);for(a=+f;a<d.length-p;++a)g.push(l[c[d[a]][2]]);return g}function RNe(l,a){for(var p,g,o=l.length,c=l[o-1],u=a[0],h=a[1],d=c[0],f=c[1],m=!1,v=0;v<o;++v)p=(c=l[v])[0],(g=c[1])>h!=f>h&&u<(d-p)*(h-g)/(f-g)+p&&(m=!m),d=p,f=g;return m}function NNe(l){for(var u,h,a=-1,o=l.length,c=l[o-1],d=c[0],f=c[1],p=0;++a<o;)u=d,h=f,u-=d=(c=l[a])[0],h-=f=c[1],p+=Math.hypot(u,h);return p}const To=Math.random,LNe=function l(a){function o(c,u){return c=null==c?0:+c,u=null==u?1:+u,1===arguments.length?(u=c,c=0):u-=c,function(){return a()*u+c}}return o.source=l,o}(To),BNe=function l(a){function o(c,u){return arguments.length<2&&(u=c,c=0),c=Math.floor(c),u=Math.floor(u)-c,function(){return Math.floor(a()*u+c)}}return o.source=l,o}(To),uR=function l(a){function o(c,u){var h,d;return c=null==c?0:+c,u=null==u?1:+u,function(){var f;if(null!=h)f=h,h=null;else do{h=2*a()-1,f=2*a()-1,d=h*h+f*f}while(!d||d>1);return c+u*f*Math.sqrt(-2*Math.log(d)/d)}}return o.source=l,o}(To),VNe=function l(a){var o=uR.source(a);function c(){var u=o.apply(this,arguments);return function(){return Math.exp(u())}}return c.source=l,c}(To),NQ=function l(a){function o(c){return(c=+c)<=0?()=>0:function(){for(var u=0,h=c;h>1;--h)u+=a();return u+h*a()}}return o.source=l,o}(To),zNe=function l(a){var o=NQ.source(a);function c(u){if(0==(u=+u))return a;var h=o(u);return function(){return h()/u}}return c.source=l,c}(To),UNe=function l(a){function o(c){return function(){return-Math.log1p(-a())/c}}return o.source=l,o}(To),HNe=function l(a){function o(c){if((c=+c)<0)throw new RangeError("invalid alpha");return c=1/-c,function(){return Math.pow(1-a(),c)}}return o.source=l,o}(To),WNe=function l(a){function o(c){if((c=+c)<0||c>1)throw new RangeError("invalid p");return function(){return Math.floor(a()+c)}}return o.source=l,o}(To),LQ=function l(a){function o(c){if((c=+c)<0||c>1)throw new RangeError("invalid p");return 0===c?()=>1/0:1===c?()=>1:(c=Math.log1p(-c),function(){return 1+Math.floor(Math.log1p(-a())/c)})}return o.source=l,o}(To),hR=function l(a){var o=uR.source(a)();function c(u,h){if((u=+u)<0)throw new RangeError("invalid k");if(0===u)return()=>0;if(h=null==h?1:+h,1===u)return()=>-Math.log1p(-a())*h;var d=(u<1?u+1:u)-1/3,f=1/(3*Math.sqrt(d)),p=u<1?()=>Math.pow(a(),1/u):()=>1;return function(){do{do{var g=o(),m=1+f*g}while(m<=0);m*=m*m;var v=1-a()}while(v>=1-.0331*g*g*g*g&&Math.log(v)>=.5*g*g+d*(1-m+Math.log(m)));return d*m*p()*h}}return c.source=l,c}(To),BQ=function l(a){var o=hR.source(a);function c(u,h){var d=o(u),f=o(h);return function(){var p=d();return 0===p?0:p/(p+f())}}return c.source=l,c}(To),VQ=function l(a){var o=LQ.source(a),c=BQ.source(a);function u(h,d){return h=+h,(d=+d)>=1?()=>h:d<=0?()=>0:function(){for(var f=0,p=h,g=d;p*g>16&&p*(1-g)>16;){var m=Math.floor((p+1)*g),v=c(m,p-m+1)();v<=g?(f+=m,p-=m,g=(g-v)/(1-v)):(p=m-1,g/=v)}for(var _=g<.5,b=o(_?g:1-g),x=b(),C=0;x<=p;++C)x+=b();return f+(_?C:p-C)}}return u.source=l,u}(To),GNe=function l(a){function o(c,u,h){var d;return 0==(c=+c)?d=f=>-Math.log(f):(c=1/c,d=f=>Math.pow(f,c)),u=null==u?0:+u,h=null==h?1:+h,function(){return u+h*d(-Math.log1p(-a()))}}return o.source=l,o}(To),jNe=function l(a){function o(c,u){return c=null==c?0:+c,u=null==u?1:+u,function(){return c+u*Math.tan(Math.PI*a())}}return o.source=l,o}(To),$Ne=function l(a){function o(c,u){return c=null==c?0:+c,u=null==u?1:+u,function(){var h=a();return c+u*Math.log(h/(1-h))}}return o.source=l,o}(To),qNe=function l(a){var o=hR.source(a),c=VQ.source(a);function u(h){return function(){for(var d=0,f=h;f>16;){var p=Math.floor(.875*f),g=o(p)();if(g>f)return d+c(p-1,f/g)();d+=p,f-=g}for(var m=-Math.log1p(-a()),v=0;m<=f;++v)m-=Math.log1p(-a());return d+v}}return u.source=l,u}(To),zQ=1/4294967296;function ZNe(l=Math.random()){let a=0|(0<=l&&l<1?l/zQ:Math.abs(l));return()=>(a=1664525*a+1013904223|0,zQ*(a>>>0))}function ac(l,a){switch(arguments.length){case 0:break;case 1:this.range(l);break;default:this.range(a).domain(l)}return this}function ed(l,a){switch(arguments.length){case 0:break;case 1:"function"==typeof l?this.interpolator(l):this.range(l);break;default:this.domain(l),"function"==typeof a?this.interpolator(a):this.range(a)}return this}const dR=Symbol("implicit");function fR(){var l=new Z1,a=[],o=[],c=dR;function u(h){let d=l.get(h);if(void 0===d){if(c!==dR)return c;l.set(h,d=a.push(h)-1)}return o[d%o.length]}return u.domain=function(h){if(!arguments.length)return a.slice();a=[],l=new Z1;for(const d of h)l.has(d)||l.set(d,a.push(d)-1);return u},u.range=function(h){return arguments.length?(o=Array.from(h),u):o.slice()},u.unknown=function(h){return arguments.length?(c=h,u):c},u.copy=function(){return fR(a,o).unknown(c)},ac.apply(u,arguments),u}function pR(){var h,d,l=fR().unknown(void 0),a=l.domain,o=l.range,c=0,u=1,f=!1,p=0,g=0,m=.5;function v(){var _=a().length,y=u<c,b=y?u:c,x=y?c:u;h=(x-b)/Math.max(1,_-p+2*g),f&&(h=Math.floor(h)),b+=(x-b-h*(_-p))*m,d=h*(1-p),f&&(b=Math.round(b),d=Math.round(d));var C=gl(_).map(function(w){return b+h*w});return o(y?C.reverse():C)}return delete l.unknown,l.domain=function(_){return arguments.length?(a(_),v()):a()},l.range=function(_){return arguments.length?([c,u]=_,c=+c,u=+u,v()):[c,u]},l.rangeRound=function(_){return[c,u]=_,c=+c,u=+u,f=!0,v()},l.bandwidth=function(){return d},l.step=function(){return h},l.round=function(_){return arguments.length?(f=!!_,v()):f},l.padding=function(_){return arguments.length?(p=Math.min(1,g=+_),v()):p},l.paddingInner=function(_){return arguments.length?(p=Math.min(1,_),v()):p},l.paddingOuter=function(_){return arguments.length?(g=+_,v()):g},l.align=function(_){return arguments.length?(m=Math.max(0,Math.min(1,_)),v()):m},l.copy=function(){return pR(a(),[c,u]).round(f).paddingInner(p).paddingOuter(g).align(m)},ac.apply(v(),arguments)}function UQ(l){var a=l.copy;return l.padding=l.paddingOuter,delete l.paddingInner,delete l.paddingOuter,l.copy=function(){return UQ(a())},l}function KNe(){return UQ(pR.apply(null,arguments).paddingInner(1))}function BT(l){return+l}var HQ=[0,1];function Sa(l){return l}function gR(l,a){return(a-=l=+l)?function(o){return(o-l)/a}:function QNe(l){return function(){return l}}(isNaN(a)?NaN:.5)}function eLe(l,a,o){var c=l[0],u=l[1],h=a[0],d=a[1];return u<c?(c=gR(u,c),h=o(d,h)):(c=gR(c,u),h=o(h,d)),function(f){return h(c(f))}}function tLe(l,a,o){var c=Math.min(l.length,a.length)-1,u=new Array(c),h=new Array(c),d=-1;for(l[c]<l[0]&&(l=l.slice().reverse(),a=a.slice().reverse());++d<c;)u[d]=gR(l[d],l[d+1]),h[d]=o(a[d],a[d+1]);return function(f){var p=Vp(l,f,1,c)-1;return h[p](u[p](f))}}function Wb(l,a){return a.domain(l.domain()).range(l.range()).interpolate(l.interpolate()).clamp(l.clamp()).unknown(l.unknown())}function VT(){var c,u,h,f,p,g,l=HQ,a=HQ,o=nf,d=Sa;function m(){var _=Math.min(l.length,a.length);return d!==Sa&&(d=function JNe(l,a){var o;return l>a&&(o=l,l=a,a=o),function(c){return Math.max(l,Math.min(a,c))}}(l[0],l[_-1])),f=_>2?tLe:eLe,p=g=null,v}function v(_){return null==_||isNaN(_=+_)?h:(p||(p=f(l.map(c),a,o)))(c(d(_)))}return v.invert=function(_){return d(u((g||(g=f(a,l.map(c),sc)))(_)))},v.domain=function(_){return arguments.length?(l=Array.from(_,BT),m()):l.slice()},v.range=function(_){return arguments.length?(a=Array.from(_),m()):a.slice()},v.rangeRound=function(_){return a=Array.from(_),o=NT,m()},v.clamp=function(_){return arguments.length?(d=!!_||Sa,m()):d!==Sa},v.interpolate=function(_){return arguments.length?(o=_,m()):o},v.unknown=function(_){return arguments.length?(h=_,v):h},function(_,y){return c=_,u=y,m()}}function mR(){return VT()(Sa,Sa)}function WQ(l,a,o,c){var h,u=V0(l,a,o);switch((c=uv(null==c?",f":c)).type){case"s":var d=Math.max(Math.abs(l),Math.abs(a));return null==c.precision&&!isNaN(h=XZ(u,d))&&(c.precision=h),uF(c,d);case"":case"e":case"g":case"p":case"r":null==c.precision&&!isNaN(h=ZZ(u,Math.max(Math.abs(l),Math.abs(a))))&&(c.precision=h-("e"===c.type));break;case"f":case"%":null==c.precision&&!isNaN(h=YZ(u))&&(c.precision=h-2*("%"===c.type))}return X2(c)}function pf(l){var a=l.domain;return l.ticks=function(o){var c=a();return B0(c[0],c[c.length-1],null==o?10:o)},l.tickFormat=function(o,c){var u=a();return WQ(u[0],u[u.length-1],null==o?10:o,c)},l.nice=function(o){null==o&&(o=10);var p,g,c=a(),u=0,h=c.length-1,d=c[u],f=c[h],m=10;for(f<d&&(g=d,d=f,f=g,g=u,u=h,h=g);m-- >0;){if((g=Q1(d,f,o))===p)return c[u]=d,c[h]=f,a(c);if(g>0)d=Math.floor(d/g)*g,f=Math.ceil(f/g)*g;else{if(!(g<0))break;d=Math.ceil(d*g)/g,f=Math.floor(f*g)/g}p=g}return l},l}function yv(){var l=mR();return l.copy=function(){return Wb(l,yv())},ac.apply(l,arguments),pf(l)}function GQ(l){var a;function o(c){return null==c||isNaN(c=+c)?a:c}return o.invert=o,o.domain=o.range=function(c){return arguments.length?(l=Array.from(c,BT),o):l.slice()},o.unknown=function(c){return arguments.length?(a=c,o):a},o.copy=function(){return GQ(l).unknown(a)},l=arguments.length?Array.from(l,BT):[0,1],pf(o)}function jQ(l,a){var d,o=0,c=(l=l.slice()).length-1,u=l[o],h=l[c];return h<u&&(d=o,o=c,c=d,d=u,u=h,h=d),l[o]=a.floor(u),l[c]=a.ceil(h),l}function $Q(l){return Math.log(l)}function qQ(l){return Math.exp(l)}function nLe(l){return-Math.log(-l)}function iLe(l){return-Math.exp(-l)}function rLe(l){return isFinite(l)?+("1e"+l):l<0?0:l}function YQ(l){return(a,o)=>-l(-a,o)}function vR(l){const a=l($Q,qQ),o=a.domain;let u,h,c=10;function d(){return u=function oLe(l){return l===Math.E?Math.log:10===l&&Math.log10||2===l&&Math.log2||(l=Math.log(l),a=>Math.log(a)/l)}(c),h=function sLe(l){return 10===l?rLe:l===Math.E?Math.exp:a=>Math.pow(l,a)}(c),o()[0]<0?(u=YQ(u),h=YQ(h),l(nLe,iLe)):l($Q,qQ),a}return a.base=function(f){return arguments.length?(c=+f,d()):c},a.domain=function(f){return arguments.length?(o(f),d()):o()},a.ticks=f=>{const p=o();let g=p[0],m=p[p.length-1];const v=m<g;v&&([g,m]=[m,g]);let b,x,_=u(g),y=u(m);const C=null==f?10:+f;let w=[];if(!(c%1)&&y-_<C){if(_=Math.floor(_),y=Math.ceil(y),g>0){for(;_<=y;++_)for(b=1;b<c;++b)if(x=_<0?b/h(-_):b*h(_),!(x<g)){if(x>m)break;w.push(x)}}else for(;_<=y;++_)for(b=c-1;b>=1;--b)if(x=_>0?b/h(-_):b*h(_),!(x<g)){if(x>m)break;w.push(x)}2*w.length<C&&(w=B0(g,m,C))}else w=B0(_,y,Math.min(y-_,C)).map(h);return v?w.reverse():w},a.tickFormat=(f,p)=>{if(null==f&&(f=10),null==p&&(p=10===c?"s":","),"function"!=typeof p&&(!(c%1)&&null==(p=uv(p)).precision&&(p.trim=!0),p=X2(p)),f===1/0)return p;const g=Math.max(1,c*f/a.ticks().length);return m=>{let v=m/h(Math.round(u(m)));return v*c<c-.5&&(v*=c),v<=g?p(m):""}},a.nice=()=>o(jQ(o(),{floor:f=>h(Math.floor(u(f))),ceil:f=>h(Math.ceil(u(f)))})),a}function XQ(){const l=vR(VT()).domain([1,10]);return l.copy=()=>Wb(l,XQ()).base(l.base()),ac.apply(l,arguments),l}function ZQ(l){return function(a){return Math.sign(a)*Math.log1p(Math.abs(a/l))}}function KQ(l){return function(a){return Math.sign(a)*Math.expm1(Math.abs(a))*l}}function _R(l){var a=1,o=l(ZQ(a),KQ(a));return o.constant=function(c){return arguments.length?l(ZQ(a=+c),KQ(a)):a},pf(o)}function QQ(){var l=_R(VT());return l.copy=function(){return Wb(l,QQ()).constant(l.constant())},ac.apply(l,arguments)}function JQ(l){return function(a){return a<0?-Math.pow(-a,l):Math.pow(a,l)}}function aLe(l){return l<0?-Math.sqrt(-l):Math.sqrt(l)}function lLe(l){return l<0?-l*l:l*l}function yR(l){var a=l(Sa,Sa),o=1;function c(){return 1===o?l(Sa,Sa):.5===o?l(aLe,lLe):l(JQ(o),JQ(1/o))}return a.exponent=function(u){return arguments.length?(o=+u,c()):o},pf(a)}function bR(){var l=yR(VT());return l.copy=function(){return Wb(l,bR()).exponent(l.exponent())},ac.apply(l,arguments),l}function cLe(){return bR.apply(null,arguments).exponent(.5)}function eJ(l){return Math.sign(l)*l*l}function uLe(l){return Math.sign(l)*Math.sqrt(Math.abs(l))}function tJ(){var c,l=mR(),a=[0,1],o=!1;function u(h){var d=uLe(l(h));return isNaN(d)?c:o?Math.round(d):d}return u.invert=function(h){return l.invert(eJ(h))},u.domain=function(h){return arguments.length?(l.domain(h),u):l.domain()},u.range=function(h){return arguments.length?(l.range((a=Array.from(h,BT)).map(eJ)),u):a.slice()},u.rangeRound=function(h){return u.range(h).round(!0)},u.round=function(h){return arguments.length?(o=!!h,u):o},u.clamp=function(h){return arguments.length?(l.clamp(h),u):l.clamp()},u.unknown=function(h){return arguments.length?(c=h,u):c},u.copy=function(){return tJ(l.domain(),a).round(o).clamp(l.clamp()).unknown(c)},ac.apply(u,arguments),pf(u)}function nJ(){var c,l=[],a=[],o=[];function u(){var d=0,f=Math.max(1,a.length);for(o=new Array(f-1);++d<f;)o[d-1]=_Y(l,d/f);return h}function h(d){return null==d||isNaN(d=+d)?c:a[Vp(o,d)]}return h.invertExtent=function(d){var f=a.indexOf(d);return f<0?[NaN,NaN]:[f>0?o[f-1]:l[0],f<o.length?o[f]:l[l.length-1]]},h.domain=function(d){if(!arguments.length)return l.slice();l=[];for(let f of d)null!=f&&!isNaN(f=+f)&&l.push(f);return l.sort(gs),u()},h.range=function(d){return arguments.length?(a=Array.from(d),u()):a.slice()},h.unknown=function(d){return arguments.length?(c=d,h):c},h.quantiles=function(){return o.slice()},h.copy=function(){return nJ().domain(l).range(a).unknown(c)},ac.apply(h,arguments)}function iJ(){var h,l=0,a=1,o=1,c=[.5],u=[0,1];function d(p){return null!=p&&p<=p?u[Vp(c,p,0,o)]:h}function f(){var p=-1;for(c=new Array(o);++p<o;)c[p]=((p+1)*a-(p-o)*l)/(o+1);return d}return d.domain=function(p){return arguments.length?([l,a]=p,l=+l,a=+a,f()):[l,a]},d.range=function(p){return arguments.length?(o=(u=Array.from(p)).length-1,f()):u.slice()},d.invertExtent=function(p){var g=u.indexOf(p);return g<0?[NaN,NaN]:g<1?[l,c[0]]:g>=o?[c[o-1],a]:[c[g-1],c[g]]},d.unknown=function(p){return arguments.length&&(h=p),d},d.thresholds=function(){return c.slice()},d.copy=function(){return iJ().domain([l,a]).range(u).unknown(h)},ac.apply(pf(d),arguments)}function rJ(){var o,l=[.5],a=[0,1],c=1;function u(h){return null!=h&&h<=h?a[Vp(l,h,0,c)]:o}return u.domain=function(h){return arguments.length?(l=Array.from(h),c=Math.min(l.length,a.length-1),u):l.slice()},u.range=function(h){return arguments.length?(a=Array.from(h),c=Math.min(l.length,a.length-1),u):a.slice()},u.invertExtent=function(h){var d=a.indexOf(h);return[l[d-1],l[d]]},u.unknown=function(h){return arguments.length?(o=h,u):o},u.copy=function(){return rJ().domain(l).range(a).unknown(o)},ac.apply(u,arguments)}const td=1e3,lc=6e4,nd=60*lc,hg=24*nd,CR=7*hg,sJ=30*hg,xR=365*hg;var wR=new Date,SR=new Date;function ro(l,a,o,c){function u(h){return l(h=0===arguments.length?new Date:new Date(+h)),h}return u.floor=function(h){return l(h=new Date(+h)),h},u.ceil=function(h){return l(h=new Date(h-1)),a(h,1),l(h),h},u.round=function(h){var d=u(h),f=u.ceil(h);return h-d<f-h?d:f},u.offset=function(h,d){return a(h=new Date(+h),null==d?1:Math.floor(d)),h},u.range=function(h,d,f){var g,p=[];if(h=u.ceil(h),f=null==f?1:Math.floor(f),!(h<d&&f>0))return p;do{p.push(g=new Date(+h)),a(h,f),l(h)}while(g<h&&h<d);return p},u.filter=function(h){return ro(function(d){if(d>=d)for(;l(d),!h(d);)d.setTime(d-1)},function(d,f){if(d>=d)if(f<0)for(;++f<=0;)for(;a(d,-1),!h(d););else for(;--f>=0;)for(;a(d,1),!h(d););})},o&&(u.count=function(h,d){return wR.setTime(+h),SR.setTime(+d),l(wR),l(SR),Math.floor(o(wR,SR))},u.every=function(h){return h=Math.floor(h),isFinite(h)&&h>0?h>1?u.filter(c?function(d){return c(d)%h==0}:function(d){return u.count(0,d)%h==0}):u:null}),u}var zT=ro(function(){},function(l,a){l.setTime(+l+a)},function(l,a){return a-l});zT.every=function(l){return l=Math.floor(l),isFinite(l)&&l>0?l>1?ro(function(a){a.setTime(Math.floor(a/l)*l)},function(a,o){a.setTime(+a+o*l)},function(a,o){return(o-a)/l}):zT:null};const TR=zT;var oJ=zT.range,aJ=ro(function(l){l.setTime(l-l.getMilliseconds())},function(l,a){l.setTime(+l+a*td)},function(l,a){return(a-l)/td},function(l){return l.getUTCSeconds()});const gf=aJ;var lJ=aJ.range,cJ=ro(function(l){l.setTime(l-l.getMilliseconds()-l.getSeconds()*td)},function(l,a){l.setTime(+l+a*lc)},function(l,a){return(a-l)/lc},function(l){return l.getMinutes()});const DR=cJ;var hLe=cJ.range,uJ=ro(function(l){l.setTime(l-l.getMilliseconds()-l.getSeconds()*td-l.getMinutes()*lc)},function(l,a){l.setTime(+l+a*nd)},function(l,a){return(a-l)/nd},function(l){return l.getHours()});const MR=uJ;var dLe=uJ.range,hJ=ro(l=>l.setHours(0,0,0,0),(l,a)=>l.setDate(l.getDate()+a),(l,a)=>(a-l-(a.getTimezoneOffset()-l.getTimezoneOffset())*lc)/hg,l=>l.getDate()-1);const Gb=hJ;var fLe=hJ.range;function dg(l){return ro(function(a){a.setDate(a.getDate()-(a.getDay()+7-l)%7),a.setHours(0,0,0,0)},function(a,o){a.setDate(a.getDate()+7*o)},function(a,o){return(o-a-(o.getTimezoneOffset()-a.getTimezoneOffset())*lc)/CR})}var bv=dg(0),jb=dg(1),dJ=dg(2),fJ=dg(3),fg=dg(4),pJ=dg(5),gJ=dg(6),mJ=bv.range,pLe=jb.range,gLe=dJ.range,mLe=fJ.range,vLe=fg.range,_Le=pJ.range,yLe=gJ.range,vJ=ro(function(l){l.setDate(1),l.setHours(0,0,0,0)},function(l,a){l.setMonth(l.getMonth()+a)},function(l,a){return a.getMonth()-l.getMonth()+12*(a.getFullYear()-l.getFullYear())},function(l){return l.getMonth()});const ER=vJ;var bLe=vJ.range,kR=ro(function(l){l.setMonth(0,1),l.setHours(0,0,0,0)},function(l,a){l.setFullYear(l.getFullYear()+a)},function(l,a){return a.getFullYear()-l.getFullYear()},function(l){return l.getFullYear()});kR.every=function(l){return isFinite(l=Math.floor(l))&&l>0?ro(function(a){a.setFullYear(Math.floor(a.getFullYear()/l)*l),a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,o){a.setFullYear(a.getFullYear()+o*l)}):null};const mf=kR;var CLe=kR.range,_J=ro(function(l){l.setUTCSeconds(0,0)},function(l,a){l.setTime(+l+a*lc)},function(l,a){return(a-l)/lc},function(l){return l.getUTCMinutes()});const AR=_J;var xLe=_J.range,yJ=ro(function(l){l.setUTCMinutes(0,0,0)},function(l,a){l.setTime(+l+a*nd)},function(l,a){return(a-l)/nd},function(l){return l.getUTCHours()});const IR=yJ;var wLe=yJ.range,bJ=ro(function(l){l.setUTCHours(0,0,0,0)},function(l,a){l.setUTCDate(l.getUTCDate()+a)},function(l,a){return(a-l)/hg},function(l){return l.getUTCDate()-1});const $b=bJ;var SLe=bJ.range;function pg(l){return ro(function(a){a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+7-l)%7),a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCDate(a.getUTCDate()+7*o)},function(a,o){return(o-a)/CR})}var Cv=pg(0),qb=pg(1),CJ=pg(2),xJ=pg(3),gg=pg(4),wJ=pg(5),SJ=pg(6),TJ=Cv.range,TLe=qb.range,DLe=CJ.range,MLe=xJ.range,ELe=gg.range,kLe=wJ.range,ALe=SJ.range,DJ=ro(function(l){l.setUTCDate(1),l.setUTCHours(0,0,0,0)},function(l,a){l.setUTCMonth(l.getUTCMonth()+a)},function(l,a){return a.getUTCMonth()-l.getUTCMonth()+12*(a.getUTCFullYear()-l.getUTCFullYear())},function(l){return l.getUTCMonth()});const PR=DJ;var ILe=DJ.range,OR=ro(function(l){l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)},function(l,a){l.setUTCFullYear(l.getUTCFullYear()+a)},function(l,a){return a.getUTCFullYear()-l.getUTCFullYear()},function(l){return l.getUTCFullYear()});OR.every=function(l){return isFinite(l=Math.floor(l))&&l>0?ro(function(a){a.setUTCFullYear(Math.floor(a.getUTCFullYear()/l)*l),a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCFullYear(a.getUTCFullYear()+o*l)}):null};const vf=OR;var PLe=OR.range;function MJ(l,a,o,c,u,h){const d=[[gf,1,td],[gf,5,5e3],[gf,15,15e3],[gf,30,3e4],[h,1,lc],[h,5,5*lc],[h,15,15*lc],[h,30,30*lc],[u,1,nd],[u,3,3*nd],[u,6,6*nd],[u,12,12*nd],[c,1,hg],[c,2,2*hg],[o,1,CR],[a,1,sJ],[a,3,3*sJ],[l,1,xR]];function p(g,m,v){const _=Math.abs(m-g)/v,y=ZS(([,,C])=>C).right(d,_);if(y===d.length)return l.every(V0(g/xR,m/xR,v));if(0===y)return TR.every(Math.max(V0(g,m,v),1));const[b,x]=d[_/d[y-1][2]<d[y][2]/_?y-1:y];return b.every(x)}return[function f(g,m,v){const _=m<g;_&&([g,m]=[m,g]);const y=v&&"function"==typeof v.range?v:p(g,m,v),b=y?y.range(g,+m+1):[];return _?b.reverse():b},p]}const[EJ,kJ]=MJ(vf,PR,Cv,$b,IR,AR),[AJ,IJ]=MJ(mf,ER,bv,Gb,MR,DR);function FR(l){if(0<=l.y&&l.y<100){var a=new Date(-1,l.m,l.d,l.H,l.M,l.S,l.L);return a.setFullYear(l.y),a}return new Date(l.y,l.m,l.d,l.H,l.M,l.S,l.L)}function RR(l){if(0<=l.y&&l.y<100){var a=new Date(Date.UTC(-1,l.m,l.d,l.H,l.M,l.S,l.L));return a.setUTCFullYear(l.y),a}return new Date(Date.UTC(l.y,l.m,l.d,l.H,l.M,l.S,l.L))}function Yb(l,a,o){return{y:l,m:a,d:o,H:0,M:0,S:0,L:0}}function PJ(l){var a=l.dateTime,o=l.date,c=l.time,u=l.periods,h=l.days,d=l.shortDays,f=l.months,p=l.shortMonths,g=Xb(u),m=Zb(u),v=Xb(h),_=Zb(h),y=Xb(d),b=Zb(d),x=Xb(f),C=Zb(f),w=Xb(p),S=Zb(p),D={a:function W(ke){return d[ke.getDay()]},A:function H(ke){return h[ke.getDay()]},b:function j(ke){return p[ke.getMonth()]},B:function G(ke){return f[ke.getMonth()]},c:null,d:BJ,e:BJ,f:tBe,g:hBe,G:fBe,H:QLe,I:JLe,j:eBe,L:VJ,m:nBe,M:iBe,p:function K(ke){return u[+(ke.getHours()>=12)]},q:function J(ke){return 1+~~(ke.getMonth()/3)},Q:jJ,s:$J,S:rBe,u:sBe,U:oBe,V:aBe,w:lBe,W:cBe,x:null,X:null,y:uBe,Y:dBe,Z:pBe,"%":GJ},T={a:function ce(ke){return d[ke.getUTCDay()]},A:function oe(ke){return h[ke.getUTCDay()]},b:function xe(ke){return p[ke.getUTCMonth()]},B:function ve(ke){return f[ke.getUTCMonth()]},c:null,d:UJ,e:UJ,f:_Be,g:EBe,G:ABe,H:gBe,I:mBe,j:vBe,L:HJ,m:yBe,M:bBe,p:function De(ke){return u[+(ke.getUTCHours()>=12)]},q:function We(ke){return 1+~~(ke.getUTCMonth()/3)},Q:jJ,s:$J,S:CBe,u:xBe,U:wBe,V:SBe,w:TBe,W:DBe,x:null,X:null,y:MBe,Y:kBe,Z:IBe,"%":GJ},A={a:function B(ke,Pe,Ze){var he=y.exec(Pe.slice(Ze));return he?(ke.w=b.get(he[0].toLowerCase()),Ze+he[0].length):-1},A:function V(ke,Pe,Ze){var he=v.exec(Pe.slice(Ze));return he?(ke.w=_.get(he[0].toLowerCase()),Ze+he[0].length):-1},b:function $(ke,Pe,Ze){var he=w.exec(Pe.slice(Ze));return he?(ke.m=S.get(he[0].toLowerCase()),Ze+he[0].length):-1},B:function q(ke,Pe,Ze){var he=x.exec(Pe.slice(Ze));return he?(ke.m=C.get(he[0].toLowerCase()),Ze+he[0].length):-1},c:function L(ke,Pe,Ze){return k(ke,a,Pe,Ze)},d:NJ,e:NJ,f:YLe,g:RJ,G:FJ,H:LJ,I:LJ,j:GLe,L:qLe,m:WLe,M:jLe,p:function F(ke,Pe,Ze){var he=g.exec(Pe.slice(Ze));return he?(ke.p=m.get(he[0].toLowerCase()),Ze+he[0].length):-1},q:HLe,Q:ZLe,s:KLe,S:$Le,u:LLe,U:BLe,V:VLe,w:NLe,W:zLe,x:function U(ke,Pe,Ze){return k(ke,o,Pe,Ze)},X:function z(ke,Pe,Ze){return k(ke,c,Pe,Ze)},y:RJ,Y:FJ,Z:ULe,"%":XLe};function I(ke,Pe){return function(Ze){var $e,Se,Ge,he=[],Fe=-1,Ke=0,nt=ke.length;for(Ze instanceof Date||(Ze=new Date(+Ze));++Fe<nt;)37===ke.charCodeAt(Fe)&&(he.push(ke.slice(Ke,Fe)),null!=(Se=OJ[$e=ke.charAt(++Fe)])?$e=ke.charAt(++Fe):Se="e"===$e?" ":"0",(Ge=Pe[$e])&&($e=Ge(Ze,Se)),he.push($e),Ke=Fe+1);return he.push(ke.slice(Ke,Fe)),he.join("")}}function N(ke,Pe){return function(Ze){var Ke,nt,he=Yb(1900,void 0,1);if(k(he,ke,Ze+="",0)!=Ze.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(1e3*he.s+("L"in he?he.L:0));if(Pe&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+12*he.p),void 0===he.m&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(nt=(Ke=RR(Yb(he.y,0,1))).getUTCDay(),Ke=nt>4||0===nt?qb.ceil(Ke):qb(Ke),Ke=$b.offset(Ke,7*(he.V-1)),he.y=Ke.getUTCFullYear(),he.m=Ke.getUTCMonth(),he.d=Ke.getUTCDate()+(he.w+6)%7):(nt=(Ke=FR(Yb(he.y,0,1))).getDay(),Ke=nt>4||0===nt?jb.ceil(Ke):jb(Ke),Ke=Gb.offset(Ke,7*(he.V-1)),he.y=Ke.getFullYear(),he.m=Ke.getMonth(),he.d=Ke.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),nt="Z"in he?RR(Yb(he.y,0,1)).getUTCDay():FR(Yb(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+7*he.W-(nt+5)%7:he.w+7*he.U-(nt+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,RR(he)):FR(he)}}function k(ke,Pe,Ze,he){for(var $e,Se,Fe=0,Ke=Pe.length,nt=Ze.length;Fe<Ke;){if(he>=nt)return-1;if(37===($e=Pe.charCodeAt(Fe++))){if($e=Pe.charAt(Fe++),!(Se=A[$e in OJ?Pe.charAt(Fe++):$e])||(he=Se(ke,Ze,he))<0)return-1}else if($e!=Ze.charCodeAt(he++))return-1}return he}return D.x=I(o,D),D.X=I(c,D),D.c=I(a,D),T.x=I(o,T),T.X=I(c,T),T.c=I(a,T),{format:function(ke){var Pe=I(ke+="",D);return Pe.toString=function(){return ke},Pe},parse:function(ke){var Pe=N(ke+="",!1);return Pe.toString=function(){return ke},Pe},utcFormat:function(ke){var Pe=I(ke+="",T);return Pe.toString=function(){return ke},Pe},utcParse:function(ke){var Pe=N(ke+="",!0);return Pe.toString=function(){return ke},Pe}}}var xv,NR,qJ,UT,LR,OJ={"-":"",_:" ",0:"0"},vo=/^\s*\d+/,OLe=/^%/,FLe=/[\\^$*+?|[\]().{}]/g;function nr(l,a,o){var c=l<0?"-":"",u=(c?-l:l)+"",h=u.length;return c+(h<o?new Array(o-h+1).join(a)+u:u)}function RLe(l){return l.replace(FLe,"\\$&")}function Xb(l){return new RegExp("^(?:"+l.map(RLe).join("|")+")","i")}function Zb(l){return new Map(l.map((a,o)=>[a.toLowerCase(),o]))}function NLe(l,a,o){var c=vo.exec(a.slice(o,o+1));return c?(l.w=+c[0],o+c[0].length):-1}function LLe(l,a,o){var c=vo.exec(a.slice(o,o+1));return c?(l.u=+c[0],o+c[0].length):-1}function BLe(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.U=+c[0],o+c[0].length):-1}function VLe(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.V=+c[0],o+c[0].length):-1}function zLe(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.W=+c[0],o+c[0].length):-1}function FJ(l,a,o){var c=vo.exec(a.slice(o,o+4));return c?(l.y=+c[0],o+c[0].length):-1}function RJ(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.y=+c[0]+(+c[0]>68?1900:2e3),o+c[0].length):-1}function ULe(l,a,o){var c=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(a.slice(o,o+6));return c?(l.Z=c[1]?0:-(c[2]+(c[3]||"00")),o+c[0].length):-1}function HLe(l,a,o){var c=vo.exec(a.slice(o,o+1));return c?(l.q=3*c[0]-3,o+c[0].length):-1}function WLe(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.m=c[0]-1,o+c[0].length):-1}function NJ(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.d=+c[0],o+c[0].length):-1}function GLe(l,a,o){var c=vo.exec(a.slice(o,o+3));return c?(l.m=0,l.d=+c[0],o+c[0].length):-1}function LJ(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.H=+c[0],o+c[0].length):-1}function jLe(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.M=+c[0],o+c[0].length):-1}function $Le(l,a,o){var c=vo.exec(a.slice(o,o+2));return c?(l.S=+c[0],o+c[0].length):-1}function qLe(l,a,o){var c=vo.exec(a.slice(o,o+3));return c?(l.L=+c[0],o+c[0].length):-1}function YLe(l,a,o){var c=vo.exec(a.slice(o,o+6));return c?(l.L=Math.floor(c[0]/1e3),o+c[0].length):-1}function XLe(l,a,o){var c=OLe.exec(a.slice(o,o+1));return c?o+c[0].length:-1}function ZLe(l,a,o){var c=vo.exec(a.slice(o));return c?(l.Q=+c[0],o+c[0].length):-1}function KLe(l,a,o){var c=vo.exec(a.slice(o));return c?(l.s=+c[0],o+c[0].length):-1}function BJ(l,a){return nr(l.getDate(),a,2)}function QLe(l,a){return nr(l.getHours(),a,2)}function JLe(l,a){return nr(l.getHours()%12||12,a,2)}function eBe(l,a){return nr(1+Gb.count(mf(l),l),a,3)}function VJ(l,a){return nr(l.getMilliseconds(),a,3)}function tBe(l,a){return VJ(l,a)+"000"}function nBe(l,a){return nr(l.getMonth()+1,a,2)}function iBe(l,a){return nr(l.getMinutes(),a,2)}function rBe(l,a){return nr(l.getSeconds(),a,2)}function sBe(l){var a=l.getDay();return 0===a?7:a}function oBe(l,a){return nr(bv.count(mf(l)-1,l),a,2)}function zJ(l){var a=l.getDay();return a>=4||0===a?fg(l):fg.ceil(l)}function aBe(l,a){return l=zJ(l),nr(fg.count(mf(l),l)+(4===mf(l).getDay()),a,2)}function lBe(l){return l.getDay()}function cBe(l,a){return nr(jb.count(mf(l)-1,l),a,2)}function uBe(l,a){return nr(l.getFullYear()%100,a,2)}function hBe(l,a){return nr((l=zJ(l)).getFullYear()%100,a,2)}function dBe(l,a){return nr(l.getFullYear()%1e4,a,4)}function fBe(l,a){var o=l.getDay();return nr((l=o>=4||0===o?fg(l):fg.ceil(l)).getFullYear()%1e4,a,4)}function pBe(l){var a=l.getTimezoneOffset();return(a>0?"-":(a*=-1,"+"))+nr(a/60|0,"0",2)+nr(a%60,"0",2)}function UJ(l,a){return nr(l.getUTCDate(),a,2)}function gBe(l,a){return nr(l.getUTCHours(),a,2)}function mBe(l,a){return nr(l.getUTCHours()%12||12,a,2)}function vBe(l,a){return nr(1+$b.count(vf(l),l),a,3)}function HJ(l,a){return nr(l.getUTCMilliseconds(),a,3)}function _Be(l,a){return HJ(l,a)+"000"}function yBe(l,a){return nr(l.getUTCMonth()+1,a,2)}function bBe(l,a){return nr(l.getUTCMinutes(),a,2)}function CBe(l,a){return nr(l.getUTCSeconds(),a,2)}function xBe(l){var a=l.getUTCDay();return 0===a?7:a}function wBe(l,a){return nr(Cv.count(vf(l)-1,l),a,2)}function WJ(l){var a=l.getUTCDay();return a>=4||0===a?gg(l):gg.ceil(l)}function SBe(l,a){return l=WJ(l),nr(gg.count(vf(l),l)+(4===vf(l).getUTCDay()),a,2)}function TBe(l){return l.getUTCDay()}function DBe(l,a){return nr(qb.count(vf(l)-1,l),a,2)}function MBe(l,a){return nr(l.getUTCFullYear()%100,a,2)}function EBe(l,a){return nr((l=WJ(l)).getUTCFullYear()%100,a,2)}function kBe(l,a){return nr(l.getUTCFullYear()%1e4,a,4)}function ABe(l,a){var o=l.getUTCDay();return nr((l=o>=4||0===o?gg(l):gg.ceil(l)).getUTCFullYear()%1e4,a,4)}function IBe(){return"+0000"}function GJ(){return"%"}function jJ(l){return+l}function $J(l){return Math.floor(+l/1e3)}function YJ(l){return xv=PJ(l),NR=xv.format,qJ=xv.parse,UT=xv.utcFormat,LR=xv.utcParse,xv}function PBe(l){return new Date(l)}function OBe(l){return l instanceof Date?+l:+new Date(+l)}function BR(l,a,o,c,u,h,d,f,p,g){var m=mR(),v=m.invert,_=m.domain,y=g(".%L"),b=g(":%S"),x=g("%I:%M"),C=g("%I %p"),w=g("%a %d"),S=g("%b %d"),D=g("%B"),T=g("%Y");function A(I){return(p(I)<I?y:f(I)<I?b:d(I)<I?x:h(I)<I?C:c(I)<I?u(I)<I?w:S:o(I)<I?D:T)(I)}return m.invert=function(I){return new Date(v(I))},m.domain=function(I){return arguments.length?_(Array.from(I,OBe)):_().map(PBe)},m.ticks=function(I){var N=_();return l(N[0],N[N.length-1],null==I?10:I)},m.tickFormat=function(I,N){return null==N?A:g(N)},m.nice=function(I){var N=_();return(!I||"function"!=typeof I.range)&&(I=a(N[0],N[N.length-1],null==I?10:I)),I?_(jQ(N,I)):m},m.copy=function(){return Wb(m,BR(l,a,o,c,u,h,d,f,p,g))},m}function FBe(){return ac.apply(BR(AJ,IJ,mf,ER,bv,Gb,MR,DR,gf,NR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RBe(){return ac.apply(BR(EJ,kJ,vf,PR,Cv,$b,IR,AR,gf,UT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function HT(){var o,c,u,h,p,l=0,a=1,d=Sa,f=!1;function g(v){return null==v||isNaN(v=+v)?p:d(0===u?.5:(v=(h(v)-o)*u,f?Math.max(0,Math.min(1,v)):v))}function m(v){return function(_){var y,b;return arguments.length?([y,b]=_,d=v(y,b),g):[d(0),d(1)]}}return g.domain=function(v){return arguments.length?([l,a]=v,o=h(l=+l),c=h(a=+a),u=o===c?0:1/(c-o),g):[l,a]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(d=v,g):d},g.range=m(nf),g.rangeRound=m(NT),g.unknown=function(v){return arguments.length?(p=v,g):p},function(v){return h=v,o=v(l),c=v(a),u=o===c?0:1/(c-o),g}}function _f(l,a){return a.domain(l.domain()).interpolator(l.interpolator()).clamp(l.clamp()).unknown(l.unknown())}function XJ(){var l=pf(HT()(Sa));return l.copy=function(){return _f(l,XJ())},ed.apply(l,arguments)}function ZJ(){var l=vR(HT()).domain([1,10]);return l.copy=function(){return _f(l,ZJ()).base(l.base())},ed.apply(l,arguments)}function KJ(){var l=_R(HT());return l.copy=function(){return _f(l,KJ()).constant(l.constant())},ed.apply(l,arguments)}function VR(){var l=yR(HT());return l.copy=function(){return _f(l,VR()).exponent(l.exponent())},ed.apply(l,arguments)}function NBe(){return VR.apply(null,arguments).exponent(.5)}function QJ(){var l=[],a=Sa;function o(c){if(null!=c&&!isNaN(c=+c))return a((Vp(l,c,1)-1)/(l.length-1))}return o.domain=function(c){if(!arguments.length)return l.slice();l=[];for(let u of c)null!=u&&!isNaN(u=+u)&&l.push(u);return l.sort(gs),o},o.interpolator=function(c){return arguments.length?(a=c,o):a},o.range=function(){return l.map((c,u)=>a(u/(l.length-1)))},o.quantiles=function(c){return Array.from({length:c+1},(u,h)=>eb(l,h/c))},o.copy=function(){return QJ(a).domain(l)},ed.apply(o,arguments)}function WT(){var u,h,d,f,p,m,_,l=0,a=.5,o=1,c=1,g=Sa,v=!1;function y(x){return isNaN(x=+x)?_:(x=.5+((x=+m(x))-h)*(c*x<c*h?f:p),g(v?Math.max(0,Math.min(1,x)):x))}function b(x){return function(C){var w,S,D;return arguments.length?([w,S,D]=C,g=FQ(x,[w,S,D]),y):[g(0),g(.5),g(1)]}}return y.domain=function(x){return arguments.length?([l,a,o]=x,u=m(l=+l),h=m(a=+a),d=m(o=+o),f=u===h?0:.5/(h-u),p=h===d?0:.5/(d-h),c=h<u?-1:1,y):[l,a,o]},y.clamp=function(x){return arguments.length?(v=!!x,y):v},y.interpolator=function(x){return arguments.length?(g=x,y):g},y.range=b(nf),y.rangeRound=b(NT),y.unknown=function(x){return arguments.length?(_=x,y):_},function(x){return m=x,u=x(l),h=x(a),d=x(o),f=u===h?0:.5/(h-u),p=h===d?0:.5/(d-h),c=h<u?-1:1,y}}function JJ(){var l=pf(WT()(Sa));return l.copy=function(){return _f(l,JJ())},ed.apply(l,arguments)}function eee(){var l=vR(WT()).domain([.1,1,10]);return l.copy=function(){return _f(l,eee()).base(l.base())},ed.apply(l,arguments)}function tee(){var l=_R(WT());return l.copy=function(){return _f(l,tee()).constant(l.constant())},ed.apply(l,arguments)}function zR(){var l=yR(WT());return l.copy=function(){return _f(l,zR()).exponent(l.exponent())},ed.apply(l,arguments)}function LBe(){return zR.apply(null,arguments).exponent(.5)}function Ci(l){for(var a=l.length/6|0,o=new Array(a),c=0;c<a;)o[c]="#"+l.slice(6*c,6*++c);return o}YJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const BBe=Ci("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),VBe=Ci("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),zBe=Ci("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),UBe=Ci("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),HBe=Ci("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),WBe=Ci("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),GBe=Ci("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),jBe=Ci("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),$Be=Ci("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),qBe=Ci("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Er=l=>JY(l[l.length-1]);var nee=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ci);const YBe=Er(nee);var iee=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ci);const XBe=Er(iee);var ree=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ci);const ZBe=Er(ree);var see=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ci);const KBe=Er(see);var oee=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ci);const QBe=Er(oee);var aee=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ci);const JBe=Er(aee);var lee=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ci);const e5e=Er(lee);var cee=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ci);const t5e=Er(cee);var uee=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ci);const n5e=Er(uee);var hee=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ci);const i5e=Er(hee);var dee=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ci);const r5e=Er(dee);var fee=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ci);const s5e=Er(fee);var pee=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ci);const o5e=Er(pee);var gee=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ci);const a5e=Er(gee);var mee=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ci);const l5e=Er(mee);var vee=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ci);const c5e=Er(vee);var _ee=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ci);const u5e=Er(_ee);var yee=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ci);const h5e=Er(yee);var bee=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ci);const d5e=Er(bee);var Cee=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ci);const f5e=Er(Cee);var xee=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ci);const p5e=Er(xee);var wee=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ci);const g5e=Er(wee);var See=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ci);const m5e=Er(See);var Tee=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ci);const v5e=Er(Tee);var Dee=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ci);const _5e=Er(Dee);var Mee=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ci);const y5e=Er(Mee);var Eee=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ci);const b5e=Er(Eee);function C5e(l){return l=Math.max(0,Math.min(1,l)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-l*(35.34-l*(2381.73-l*(6402.7-l*(7024.72-2710.57*l)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+l*(170.73+l*(52.82-l*(131.46-l*(176.58-67.37*l)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+l*(442.36-l*(2482.43-l*(6167.24-l*(6614.94-2475.67*l)))))))+")"}const x5e=LT($c(300,.5,0),$c(-240,.5,1));var w5e=LT($c(-100,.75,.35),$c(80,1.5,.8)),S5e=LT($c(260,.75,.35),$c(80,1.5,.8)),GT=$c();function T5e(l){(l<0||l>1)&&(l-=Math.floor(l));var a=Math.abs(l-.5);return GT.h=360*l-100,GT.s=1.5-1.5*a,GT.l=.8-.9*a,GT+""}var jT=qh(),D5e=Math.PI/3,M5e=2*Math.PI/3;function E5e(l){var a;return l=(.5-l)*Math.PI,jT.r=255*(a=Math.sin(l))*a,jT.g=255*(a=Math.sin(l+D5e))*a,jT.b=255*(a=Math.sin(l+M5e))*a,jT+""}function k5e(l){return l=Math.max(0,Math.min(1,l)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+l*(1172.33-l*(10793.56-l*(33300.12-l*(38394.49-14825.05*l)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+l*(557.33+l*(1225.33-l*(3574.96-l*(1073.77+707.56*l)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+l*(3211.1-l*(15327.97-l*(27814-l*(22569.18-6838.66*l)))))))+")"}function $T(l){var a=l.length;return function(o){return l[Math.max(0,Math.min(a-1,Math.floor(o*a)))]}}const A5e=$T(Ci("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var I5e=$T(Ci("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),P5e=$T(Ci("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),O5e=$T(Ci("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function F5e(l){return Ns(a2(l).call(document.documentElement))}var R5e=0;function kee(){return new UR}function UR(){this._="@"+(++R5e).toString(36)}function N5e(l,a){return l.target&&(l=rX(l),void 0===a&&(a=l.currentTarget),l=l.touches||[l]),Array.from(l,o=>ml(o,a))}function L5e(l){return"string"==typeof l?new da([document.querySelectorAll(l)],[document.documentElement]):new da([IY(l)],zP)}function gi(l){return function(){return l}}UR.prototype=kee.prototype={constructor:UR,get:function(l){for(var a=this._;!(a in l);)if(!(l=l.parentNode))return;return l[a]},set:function(l,a){return l[this._]=a},remove:function(l){return this._ in l&&delete l[this._]},toString:function(){return this._}};const Aee=Math.abs,Go=Math.atan2,id=Math.cos,B5e=Math.max,wv=Math.min,ja=Math.sin,Nr=Math.sqrt,jo=1e-12,yf=Math.PI,qT=yf/2,bf=2*yf;function V5e(l){return l>1?0:l<-1?yf:Math.acos(l)}function Iee(l){return l>=1?qT:l<=-1?-qT:Math.asin(l)}function z5e(l){return l.innerRadius}function U5e(l){return l.outerRadius}function H5e(l){return l.startAngle}function W5e(l){return l.endAngle}function G5e(l){return l&&l.padAngle}function j5e(l,a,o,c,u,h,d,f){var p=o-l,g=c-a,m=d-u,v=f-h,_=v*p-m*g;if(!(_*_<jo))return[l+(_=(m*(a-h)-v*(l-u))/_)*p,a+_*g]}function YT(l,a,o,c,u,h,d){var f=l-o,p=a-c,g=(d?h:-h)/Nr(f*f+p*p),m=g*p,v=-g*f,_=l+m,y=a+v,b=o+m,x=c+v,C=(_+b)/2,w=(y+x)/2,S=b-_,D=x-y,T=S*S+D*D,A=u-h,I=_*x-b*y,N=(D<0?-1:1)*Nr(B5e(0,A*A*T-I*I)),k=(I*D-S*N)/T,F=(-I*S-D*N)/T,B=(I*D+S*N)/T,V=(-I*S+D*N)/T,$=k-C,q=F-w,L=B-C,U=V-w;return $*$+q*q>L*L+U*U&&(k=B,F=V),{cx:k,cy:F,x01:-m,y01:-v,x11:k*(u/A-1),y11:F*(u/A-1)}}function HR(){var l=z5e,a=U5e,o=gi(0),c=null,u=H5e,h=W5e,d=G5e,f=null;function p(){var g,m,v=+l.apply(this,arguments),_=+a.apply(this,arguments),y=u.apply(this,arguments)-qT,b=h.apply(this,arguments)-qT,x=Aee(b-y),C=b>y;if(f||(f=g=Zh()),_<v&&(m=_,_=v,v=m),_>jo)if(x>bf-jo)f.moveTo(_*id(y),_*ja(y)),f.arc(0,0,_,y,b,!C),v>jo&&(f.moveTo(v*id(b),v*ja(b)),f.arc(0,0,v,b,y,C));else{var $,q,w=y,S=b,D=y,T=b,A=x,I=x,N=d.apply(this,arguments)/2,k=N>jo&&(c?+c.apply(this,arguments):Nr(v*v+_*_)),F=wv(Aee(_-v)/2,+o.apply(this,arguments)),B=F,V=F;if(k>jo){var L=Iee(k/v*ja(N)),U=Iee(k/_*ja(N));(A-=2*L)>jo?(D+=L*=C?1:-1,T-=L):(A=0,D=T=(y+b)/2),(I-=2*U)>jo?(w+=U*=C?1:-1,S-=U):(I=0,w=S=(y+b)/2)}var z=_*id(w),W=_*ja(w),H=v*id(T),j=v*ja(T);if(F>jo){var oe,G=_*id(S),K=_*ja(S),J=v*id(D),ce=v*ja(D);if(x<yf&&(oe=j5e(z,W,J,ce,G,K,H,j))){var xe=z-oe[0],ve=W-oe[1],De=G-oe[0],We=K-oe[1],ke=1/ja(V5e((xe*De+ve*We)/(Nr(xe*xe+ve*ve)*Nr(De*De+We*We)))/2),Pe=Nr(oe[0]*oe[0]+oe[1]*oe[1]);B=wv(F,(v-Pe)/(ke-1)),V=wv(F,(_-Pe)/(ke+1))}}I>jo?V>jo?($=YT(J,ce,z,W,_,V,C),q=YT(G,K,H,j,_,V,C),f.moveTo($.cx+$.x01,$.cy+$.y01),V<F?f.arc($.cx,$.cy,V,Go($.y01,$.x01),Go(q.y01,q.x01),!C):(f.arc($.cx,$.cy,V,Go($.y01,$.x01),Go($.y11,$.x11),!C),f.arc(0,0,_,Go($.cy+$.y11,$.cx+$.x11),Go(q.cy+q.y11,q.cx+q.x11),!C),f.arc(q.cx,q.cy,V,Go(q.y11,q.x11),Go(q.y01,q.x01),!C))):(f.moveTo(z,W),f.arc(0,0,_,w,S,!C)):f.moveTo(z,W),v>jo&&A>jo?B>jo?($=YT(H,j,G,K,v,-B,C),q=YT(z,W,J,ce,v,-B,C),f.lineTo($.cx+$.x01,$.cy+$.y01),B<F?f.arc($.cx,$.cy,B,Go($.y01,$.x01),Go(q.y01,q.x01),!C):(f.arc($.cx,$.cy,B,Go($.y01,$.x01),Go($.y11,$.x11),!C),f.arc(0,0,v,Go($.cy+$.y11,$.cx+$.x11),Go(q.cy+q.y11,q.cx+q.x11),C),f.arc(q.cx,q.cy,B,Go(q.y11,q.x11),Go(q.y01,q.x01),!C))):f.arc(0,0,v,T,D,C):f.lineTo(H,j)}else f.moveTo(0,0);if(f.closePath(),g)return f=null,g+""||null}return p.centroid=function(){var g=(+l.apply(this,arguments)+ +a.apply(this,arguments))/2,m=(+u.apply(this,arguments)+ +h.apply(this,arguments))/2-yf/2;return[id(m)*g,ja(m)*g]},p.innerRadius=function(g){return arguments.length?(l="function"==typeof g?g:gi(+g),p):l},p.outerRadius=function(g){return arguments.length?(a="function"==typeof g?g:gi(+g),p):a},p.cornerRadius=function(g){return arguments.length?(o="function"==typeof g?g:gi(+g),p):o},p.padRadius=function(g){return arguments.length?(c=null==g?null:"function"==typeof g?g:gi(+g),p):c},p.startAngle=function(g){return arguments.length?(u="function"==typeof g?g:gi(+g),p):u},p.endAngle=function(g){return arguments.length?(h="function"==typeof g?g:gi(+g),p):h},p.padAngle=function(g){return arguments.length?(d="function"==typeof g?g:gi(+g),p):d},p.context=function(g){return arguments.length?(f=null==g?null:g,p):f},p}var $5e=Array.prototype.slice;function XT(l){return"object"==typeof l&&"length"in l?l:Array.from(l)}function Pee(l){this._context=l}function ZT(l){return new Pee(l)}function WR(l){return l[0]}function GR(l){return l[1]}function Qc(l,a){var o=gi(!0),c=null,u=ZT,h=null;function d(f){var p,m,_,g=(f=XT(f)).length,v=!1;for(null==c&&(h=u(_=Zh())),p=0;p<=g;++p)!(p<g&&o(m=f[p],p,f))===v&&((v=!v)?h.lineStart():h.lineEnd()),v&&h.point(+l(m,p,f),+a(m,p,f));if(_)return h=null,_+""||null}return l="function"==typeof l?l:void 0===l?WR:gi(l),a="function"==typeof a?a:void 0===a?GR:gi(a),d.x=function(f){return arguments.length?(l="function"==typeof f?f:gi(+f),d):l},d.y=function(f){return arguments.length?(a="function"==typeof f?f:gi(+f),d):a},d.defined=function(f){return arguments.length?(o="function"==typeof f?f:gi(!!f),d):o},d.curve=function(f){return arguments.length?(u=f,null!=c&&(h=u(c)),d):u},d.context=function(f){return arguments.length?(null==f?c=h=null:h=u(c=f),d):c},d}function jR(l,a,o){var c=null,u=gi(!0),h=null,d=ZT,f=null;function p(m){var v,_,y,x,w,b=(m=XT(m)).length,C=!1,S=new Array(b),D=new Array(b);for(null==h&&(f=d(w=Zh())),v=0;v<=b;++v){if(!(v<b&&u(x=m[v],v,m))===C)if(C=!C)_=v,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),y=v-1;y>=_;--y)f.point(S[y],D[y]);f.lineEnd(),f.areaEnd()}C&&(S[v]=+l(x,v,m),D[v]=+a(x,v,m),f.point(c?+c(x,v,m):S[v],o?+o(x,v,m):D[v]))}if(w)return f=null,w+""||null}function g(){return Qc().defined(u).curve(d).context(h)}return l="function"==typeof l?l:void 0===l?WR:gi(+l),a="function"==typeof a?a:gi(void 0===a?0:+a),o="function"==typeof o?o:void 0===o?GR:gi(+o),p.x=function(m){return arguments.length?(l="function"==typeof m?m:gi(+m),c=null,p):l},p.x0=function(m){return arguments.length?(l="function"==typeof m?m:gi(+m),p):l},p.x1=function(m){return arguments.length?(c=null==m?null:"function"==typeof m?m:gi(+m),p):c},p.y=function(m){return arguments.length?(a="function"==typeof m?m:gi(+m),o=null,p):a},p.y0=function(m){return arguments.length?(a="function"==typeof m?m:gi(+m),p):a},p.y1=function(m){return arguments.length?(o=null==m?null:"function"==typeof m?m:gi(+m),p):o},p.lineX0=p.lineY0=function(){return g().x(l).y(a)},p.lineY1=function(){return g().x(l).y(o)},p.lineX1=function(){return g().x(c).y(a)},p.defined=function(m){return arguments.length?(u="function"==typeof m?m:gi(!!m),p):u},p.curve=function(m){return arguments.length?(d=m,null!=h&&(f=d(h)),p):d},p.context=function(m){return arguments.length?(null==m?h=f=null:f=d(h=m),p):h},p}function q5e(l,a){return a<l?-1:a>l?1:a>=l?0:NaN}function Y5e(l){return l}function X5e(){var l=Y5e,a=q5e,o=null,c=gi(0),u=gi(bf),h=gi(0);function d(f){var p,m,v,w,T,g=(f=XT(f)).length,_=0,y=new Array(g),b=new Array(g),x=+c.apply(this,arguments),C=Math.min(bf,Math.max(-bf,u.apply(this,arguments)-x)),S=Math.min(Math.abs(C)/g,h.apply(this,arguments)),D=S*(C<0?-1:1);for(p=0;p<g;++p)(T=b[y[p]=p]=+l(f[p],p,f))>0&&(_+=T);for(null!=a?y.sort(function(A,I){return a(b[A],b[I])}):null!=o&&y.sort(function(A,I){return o(f[A],f[I])}),p=0,v=_?(C-g*D)/_:0;p<g;++p,x=w)b[m=y[p]]={data:f[m],index:p,value:T=b[m],startAngle:x,endAngle:w=x+(T>0?T*v:0)+D,padAngle:S};return b}return d.value=function(f){return arguments.length?(l="function"==typeof f?f:gi(+f),d):l},d.sortValues=function(f){return arguments.length?(a=f,o=null,d):a},d.sort=function(f){return arguments.length?(o=f,a=null,d):o},d.startAngle=function(f){return arguments.length?(c="function"==typeof f?f:gi(+f),d):c},d.endAngle=function(f){return arguments.length?(u="function"==typeof f?f:gi(+f),d):u},d.padAngle=function(f){return arguments.length?(h="function"==typeof f?f:gi(+f),d):h},d}Pee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,a):this._context.moveTo(l,a);break;case 1:this._point=2;default:this._context.lineTo(l,a)}}};var Oee=$R(ZT);function Fee(l){this._curve=l}function $R(l){function a(o){return new Fee(l(o))}return a._curve=l,a}function Kb(l){var a=l.curve;return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l.curve=function(o){return arguments.length?a($R(o)):a()._curve},l}function Ree(){return Kb(Qc().curve(Oee))}function Nee(){var l=jR().curve(Oee),a=l.curve,o=l.lineX0,c=l.lineX1,u=l.lineY0,h=l.lineY1;return l.angle=l.x,delete l.x,l.startAngle=l.x0,delete l.x0,l.endAngle=l.x1,delete l.x1,l.radius=l.y,delete l.y,l.innerRadius=l.y0,delete l.y0,l.outerRadius=l.y1,delete l.y1,l.lineStartAngle=function(){return Kb(o())},delete l.lineX0,l.lineEndAngle=function(){return Kb(c())},delete l.lineX1,l.lineInnerRadius=function(){return Kb(u())},delete l.lineY0,l.lineOuterRadius=function(){return Kb(h())},delete l.lineY1,l.curve=function(d){return arguments.length?a($R(d)):a()._curve},l}function Qb(l,a){return[(a=+a)*Math.cos(l-=Math.PI/2),a*Math.sin(l)]}Fee.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(l,a){this._curve.point(a*Math.sin(l),a*-Math.cos(l))}};class Lee{constructor(a,o){this._context=a,this._x=o}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(a,o){switch(a=+a,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,o):this._context.moveTo(a,o);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+a)/2,this._y0,this._x0,o,a,o):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+o)/2,a,this._y0,a,o)}this._x0=a,this._y0=o}}class Z5e{constructor(a){this._context=a}lineStart(){this._point=0}lineEnd(){}point(a,o){if(a=+a,o=+o,0==this._point++)this._x0=a,this._y0=o;else{const c=Qb(this._x0,this._y0),u=Qb(this._x0,this._y0=(this._y0+o)/2),h=Qb(a,this._y0),d=Qb(a,o);this._context.moveTo(...c),this._context.bezierCurveTo(...u,...h,...d)}}}function qR(l){return new Lee(l,!0)}function Bee(l){return new Lee(l,!1)}function K5e(l){return new Z5e(l)}function Q5e(l){return l.source}function J5e(l){return l.target}function KT(l){let a=Q5e,o=J5e,c=WR,u=GR,h=null,d=null;function f(){let p;const g=$5e.call(arguments),m=a.apply(this,g),v=o.apply(this,g);if(null==h&&(d=l(p=Zh())),d.lineStart(),g[0]=m,d.point(+c.apply(this,g),+u.apply(this,g)),g[0]=v,d.point(+c.apply(this,g),+u.apply(this,g)),d.lineEnd(),p)return d=null,p+""||null}return f.source=function(p){return arguments.length?(a=p,f):a},f.target=function(p){return arguments.length?(o=p,f):o},f.x=function(p){return arguments.length?(c="function"==typeof p?p:gi(+p),f):c},f.y=function(p){return arguments.length?(u="function"==typeof p?p:gi(+p),f):u},f.context=function(p){return arguments.length?(null==p?h=d=null:d=l(h=p),f):h},f}function e8e(){return KT(qR)}function t8e(){return KT(Bee)}function n8e(){const l=KT(K5e);return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l}const i8e=Nr(3),Vee={draw(l,a){const o=.59436*Nr(a+wv(a/28,.75)),c=o/2,u=c*i8e;l.moveTo(0,o),l.lineTo(0,-o),l.moveTo(-u,-c),l.lineTo(u,c),l.moveTo(-u,c),l.lineTo(u,-c)}},QT={draw(l,a){const o=Nr(a/yf);l.moveTo(o,0),l.arc(0,0,o,0,bf)}},zee={draw(l,a){const o=Nr(a/5)/2;l.moveTo(-3*o,-o),l.lineTo(-o,-o),l.lineTo(-o,-3*o),l.lineTo(o,-3*o),l.lineTo(o,-o),l.lineTo(3*o,-o),l.lineTo(3*o,o),l.lineTo(o,o),l.lineTo(o,3*o),l.lineTo(-o,3*o),l.lineTo(-o,o),l.lineTo(-3*o,o),l.closePath()}},Uee=Nr(1/3),r8e=2*Uee,Hee={draw(l,a){const o=Nr(a/r8e),c=o*Uee;l.moveTo(0,-o),l.lineTo(c,0),l.lineTo(0,o),l.lineTo(-c,0),l.closePath()}},Wee={draw(l,a){const o=.62625*Nr(a);l.moveTo(0,-o),l.lineTo(o,0),l.lineTo(0,o),l.lineTo(-o,0),l.closePath()}},Gee={draw(l,a){const o=.87559*Nr(a-wv(a/7,2));l.moveTo(-o,0),l.lineTo(o,0),l.moveTo(0,o),l.lineTo(0,-o)}},jee={draw(l,a){const o=Nr(a),c=-o/2;l.rect(c,c,o,o)}},$ee={draw(l,a){const o=.4431*Nr(a);l.moveTo(o,o),l.lineTo(o,-o),l.lineTo(-o,-o),l.lineTo(-o,o),l.closePath()}},qee=ja(yf/10)/ja(7*yf/10),o8e=ja(bf/10)*qee,a8e=-id(bf/10)*qee,Yee={draw(l,a){const o=Nr(.8908130915292852*a),c=o8e*o,u=a8e*o;l.moveTo(0,-o),l.lineTo(c,u);for(let h=1;h<5;++h){const d=bf*h/5,f=id(d),p=ja(d);l.lineTo(p*o,-f*o),l.lineTo(f*c-p*u,p*c+f*u)}l.closePath()}},YR=Nr(3),Xee={draw(l,a){const o=-Nr(a/(3*YR));l.moveTo(0,2*o),l.lineTo(-YR*o,-o),l.lineTo(YR*o,-o),l.closePath()}},l8e=Nr(3),Zee={draw(l,a){const o=.6824*Nr(a),c=o/2,u=o*l8e/2;l.moveTo(0,-o),l.lineTo(u,c),l.lineTo(-u,c),l.closePath()}},cc=-.5,uc=Nr(3)/2,XR=1/Nr(12),c8e=3*(XR/2+1),Kee={draw(l,a){const o=Nr(a/c8e),c=o/2,u=o*XR,h=c,d=o*XR+o,f=-h,p=d;l.moveTo(c,u),l.lineTo(h,d),l.lineTo(f,p),l.lineTo(cc*c-uc*u,uc*c+cc*u),l.lineTo(cc*h-uc*d,uc*h+cc*d),l.lineTo(cc*f-uc*p,uc*f+cc*p),l.lineTo(cc*c+uc*u,cc*u-uc*c),l.lineTo(cc*h+uc*d,cc*d-uc*h),l.lineTo(cc*f+uc*p,cc*p-uc*f),l.closePath()}},Qee={draw(l,a){const o=.6189*Nr(a-wv(a/6,1.7));l.moveTo(-o,-o),l.lineTo(o,o),l.moveTo(-o,o),l.lineTo(o,-o)}},Jee=[QT,zee,Hee,jee,Yee,Xee,Kee],u8e=[QT,Gee,Qee,Zee,Vee,$ee,Wee];function h8e(l,a){let o=null;function c(){let u;if(o||(o=u=Zh()),l.apply(this,arguments).draw(o,+a.apply(this,arguments)),u)return o=null,u+""||null}return l="function"==typeof l?l:gi(l||QT),a="function"==typeof a?a:gi(void 0===a?64:+a),c.type=function(u){return arguments.length?(l="function"==typeof u?u:gi(u),c):l},c.size=function(u){return arguments.length?(a="function"==typeof u?u:gi(+u),c):a},c.context=function(u){return arguments.length?(o=null==u?null:u,c):o},c}function Cf(){}function JT(l,a,o){l._context.bezierCurveTo((2*l._x0+l._x1)/3,(2*l._y0+l._y1)/3,(l._x0+2*l._x1)/3,(l._y0+2*l._y1)/3,(l._x0+4*l._x1+a)/6,(l._y0+4*l._y1+o)/6)}function eD(l){this._context=l}function Jb(l){return new eD(l)}function ete(l){this._context=l}function d8e(l){return new ete(l)}function tte(l){this._context=l}function f8e(l){return new tte(l)}function nte(l,a){this._basis=new eD(l),this._beta=a}eD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:JT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,a):this._context.moveTo(l,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:JT(this,l,a)}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=a}},ete.prototype={areaStart:Cf,areaEnd:Cf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1,this._x2=l,this._y2=a;break;case 1:this._point=2,this._x3=l,this._y3=a;break;case 2:this._point=3,this._x4=l,this._y4=a,this._context.moveTo((this._x0+4*this._x1+l)/6,(this._y0+4*this._y1+a)/6);break;default:JT(this,l,a)}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=a}},tte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var o=(this._x0+4*this._x1+l)/6,c=(this._y0+4*this._y1+a)/6;this._line?this._context.lineTo(o,c):this._context.moveTo(o,c);break;case 3:this._point=4;default:JT(this,l,a)}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=a}},nte.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var l=this._x,a=this._y,o=l.length-1;if(o>0)for(var p,c=l[0],u=a[0],h=l[o]-c,d=a[o]-u,f=-1;++f<=o;)this._basis.point(this._beta*l[f]+(1-this._beta)*(c+(p=f/o)*h),this._beta*a[f]+(1-this._beta)*(u+p*d));this._x=this._y=null,this._basis.lineEnd()},point:function(l,a){this._x.push(+l),this._y.push(+a)}};const p8e=function l(a){function o(c){return 1===a?new eD(c):new nte(c,a)}return o.beta=function(c){return l(+c)},o}(.85);function tD(l,a,o){l._context.bezierCurveTo(l._x1+l._k*(l._x2-l._x0),l._y1+l._k*(l._y2-l._y0),l._x2+l._k*(l._x1-a),l._y2+l._k*(l._y1-o),l._x2,l._y2)}function ZR(l,a){this._context=l,this._k=(1-a)/6}ZR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tD(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,a):this._context.moveTo(l,a);break;case 1:this._point=2,this._x1=l,this._y1=a;break;case 2:this._point=3;default:tD(this,l,a)}this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const g8e=function l(a){function o(c){return new ZR(c,a)}return o.tension=function(c){return l(+c)},o}(0);function KR(l,a){this._context=l,this._k=(1-a)/6}KR.prototype={areaStart:Cf,areaEnd:Cf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1,this._x3=l,this._y3=a;break;case 1:this._point=2,this._context.moveTo(this._x4=l,this._y4=a);break;case 2:this._point=3,this._x5=l,this._y5=a;break;default:tD(this,l,a)}this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const m8e=function l(a){function o(c){return new KR(c,a)}return o.tension=function(c){return l(+c)},o}(0);function QR(l,a){this._context=l,this._k=(1-a)/6}QR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tD(this,l,a)}this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const v8e=function l(a){function o(c){return new QR(c,a)}return o.tension=function(c){return l(+c)},o}(0);function JR(l,a,o){var c=l._x1,u=l._y1,h=l._x2,d=l._y2;if(l._l01_a>jo){var f=2*l._l01_2a+3*l._l01_a*l._l12_a+l._l12_2a,p=3*l._l01_a*(l._l01_a+l._l12_a);c=(c*f-l._x0*l._l12_2a+l._x2*l._l01_2a)/p,u=(u*f-l._y0*l._l12_2a+l._y2*l._l01_2a)/p}if(l._l23_a>jo){var g=2*l._l23_2a+3*l._l23_a*l._l12_a+l._l12_2a,m=3*l._l23_a*(l._l23_a+l._l12_a);h=(h*g+l._x1*l._l23_2a-a*l._l12_2a)/m,d=(d*g+l._y1*l._l23_2a-o*l._l12_2a)/m}l._context.bezierCurveTo(c,u,h,d,l._x2,l._y2)}function ite(l,a){this._context=l,this._alpha=a}ite.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){if(l=+l,a=+a,this._point){var o=this._x2-l,c=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+c*c,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(l,a):this._context.moveTo(l,a);break;case 1:this._point=2;break;case 2:this._point=3;default:JR(this,l,a)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const _8e=function l(a){function o(c){return a?new ite(c,a):new ZR(c,0)}return o.alpha=function(c){return l(+c)},o}(.5);function rte(l,a){this._context=l,this._alpha=a}rte.prototype={areaStart:Cf,areaEnd:Cf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(l,a){if(l=+l,a=+a,this._point){var o=this._x2-l,c=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+c*c,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=l,this._y3=a;break;case 1:this._point=2,this._context.moveTo(this._x4=l,this._y4=a);break;case 2:this._point=3,this._x5=l,this._y5=a;break;default:JR(this,l,a)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const y8e=function l(a){function o(c){return a?new rte(c,a):new KR(c,0)}return o.alpha=function(c){return l(+c)},o}(.5);function ste(l,a){this._context=l,this._alpha=a}ste.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){if(l=+l,a=+a,this._point){var o=this._x2-l,c=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+c*c,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:JR(this,l,a)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=l,this._y0=this._y1,this._y1=this._y2,this._y2=a}};const b8e=function l(a){function o(c){return a?new ste(c,a):new QR(c,0)}return o.alpha=function(c){return l(+c)},o}(.5);function ote(l){this._context=l}function C8e(l){return new ote(l)}function ate(l){return l<0?-1:1}function lte(l,a,o){var c=l._x1-l._x0,u=a-l._x1,h=(l._y1-l._y0)/(c||u<0&&-0),d=(o-l._y1)/(u||c<0&&-0),f=(h*u+d*c)/(c+u);return(ate(h)+ate(d))*Math.min(Math.abs(h),Math.abs(d),.5*Math.abs(f))||0}function cte(l,a){var o=l._x1-l._x0;return o?(3*(l._y1-l._y0)/o-a)/2:a}function eN(l,a,o){var c=l._x0,h=l._x1,d=l._y1,f=(h-c)/3;l._context.bezierCurveTo(c+f,l._y0+f*a,h-f,d-f*o,h,d)}function nD(l){this._context=l}function ute(l){this._context=new hte(l)}function hte(l){this._context=l}function x8e(l){return new nD(l)}function w8e(l){return new ute(l)}function dte(l){this._context=l}function fte(l){var a,c,o=l.length-1,u=new Array(o),h=new Array(o),d=new Array(o);for(u[0]=0,h[0]=2,d[0]=l[0]+2*l[1],a=1;a<o-1;++a)u[a]=1,h[a]=4,d[a]=4*l[a]+2*l[a+1];for(u[o-1]=2,h[o-1]=7,d[o-1]=8*l[o-1]+l[o],a=1;a<o;++a)h[a]-=c=u[a]/h[a-1],d[a]-=c*d[a-1];for(u[o-1]=d[o-1]/h[o-1],a=o-2;a>=0;--a)u[a]=(d[a]-u[a+1])/h[a];for(h[o-1]=(l[o]+u[o-1])/2,a=0;a<o-1;++a)h[a]=2*l[a+1]-u[a+1];return[u,h]}function tN(l){return new dte(l)}function iD(l,a){this._context=l,this._t=a}function S8e(l){return new iD(l,.5)}function nN(l){return new iD(l,0)}function T8e(l){return new iD(l,1)}function Sv(l,a){if((d=l.length)>1)for(var c,u,d,o=1,h=l[a[0]],f=h.length;o<d;++o)for(u=h,h=l[a[o]],c=0;c<f;++c)h[c][1]+=h[c][0]=isNaN(u[c][1])?u[c][0]:u[c][1]}function Tv(l){for(var a=l.length,o=new Array(a);--a>=0;)o[a]=a;return o}function D8e(l,a){return l[a]}function M8e(l){const a=[];return a.key=l,a}function E8e(){var l=gi([]),a=Tv,o=Sv,c=D8e;function u(h){var f,m,d=Array.from(l.apply(this,arguments),M8e),p=d.length,g=-1;for(const v of h)for(f=0,++g;f<p;++f)(d[f][g]=[0,+c(v,d[f].key,g,h)]).data=v;for(f=0,m=XT(a(d));f<p;++f)d[m[f]].index=f;return o(d,m),d}return u.keys=function(h){return arguments.length?(l="function"==typeof h?h:gi(Array.from(h)),u):l},u.value=function(h){return arguments.length?(c="function"==typeof h?h:gi(+h),u):c},u.order=function(h){return arguments.length?(a=null==h?Tv:"function"==typeof h?h:gi(Array.from(h)),u):a},u.offset=function(h){return arguments.length?(o=null==h?Sv:h,u):o},u}function k8e(l,a){if((c=l.length)>0){for(var o,c,d,u=0,h=l[0].length;u<h;++u){for(d=o=0;o<c;++o)d+=l[o][u][1]||0;if(d)for(o=0;o<c;++o)l[o][u][1]/=d}Sv(l,a)}}function A8e(l,a){if((p=l.length)>0)for(var o,u,h,d,f,p,c=0,g=l[a[0]].length;c<g;++c)for(d=f=0,o=0;o<p;++o)(h=(u=l[a[o]][c])[1]-u[0])>0?(u[0]=d,u[1]=d+=h):h<0?(u[1]=f,u[0]=f+=h):(u[0]=0,u[1]=h)}function I8e(l,a){if((u=l.length)>0){for(var u,o=0,c=l[a[0]],h=c.length;o<h;++o){for(var d=0,f=0;d<u;++d)f+=l[d][o][1]||0;c[o][1]+=c[o][0]=-f/2}Sv(l,a)}}function P8e(l,a){if((d=l.length)>0&&(h=(u=l[a[0]]).length)>0){for(var u,h,d,o=0,c=1;c<h;++c){for(var f=0,p=0,g=0;f<d;++f){for(var m=l[a[f]],v=m[c][1]||0,y=(v-(m[c-1][1]||0))/2,b=0;b<f;++b){var x=l[a[b]];y+=(x[c][1]||0)-(x[c-1][1]||0)}p+=v,g+=y*v}u[c-1][1]+=u[c-1][0]=o,p&&(o-=g/p)}u[c-1][1]+=u[c-1][0]=o,Sv(l,a)}}function pte(l){var a=l.map(O8e);return Tv(l).sort(function(o,c){return a[o]-a[c]})}function O8e(l){for(var u,a=-1,o=0,c=l.length,h=-1/0;++a<c;)(u=+l[a][1])>h&&(h=u,o=a);return o}function gte(l){var a=l.map(mte);return Tv(l).sort(function(o,c){return a[o]-a[c]})}function mte(l){for(var u,a=0,o=-1,c=l.length;++o<c;)(u=+l[o][1])&&(a+=u);return a}function F8e(l){return gte(l).reverse()}function R8e(l){var o,c,a=l.length,u=l.map(mte),h=pte(l),d=0,f=0,p=[],g=[];for(o=0;o<a;++o)c=h[o],d<f?(d+=u[c],p.push(c)):(f+=u[c],g.push(c));return g.reverse().concat(p)}function N8e(l){return Tv(l).reverse()}ote.prototype={areaStart:Cf,areaEnd:Cf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(l,a){l=+l,a=+a,this._point?this._context.lineTo(l,a):(this._point=1,this._context.moveTo(l,a))}},nD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:eN(this,this._t0,cte(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(l,a){var o=NaN;if(a=+a,(l=+l)!==this._x1||a!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(l,a):this._context.moveTo(l,a);break;case 1:this._point=2;break;case 2:this._point=3,eN(this,cte(this,o=lte(this,l,a)),o);break;default:eN(this,this._t0,o=lte(this,l,a))}this._x0=this._x1,this._x1=l,this._y0=this._y1,this._y1=a,this._t0=o}}},(ute.prototype=Object.create(nD.prototype)).point=function(l,a){nD.prototype.point.call(this,a,l)},hte.prototype={moveTo:function(l,a){this._context.moveTo(a,l)},closePath:function(){this._context.closePath()},lineTo:function(l,a){this._context.lineTo(a,l)},bezierCurveTo:function(l,a,o,c,u,h){this._context.bezierCurveTo(a,l,c,o,h,u)}},dte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var l=this._x,a=this._y,o=l.length;if(o)if(this._line?this._context.lineTo(l[0],a[0]):this._context.moveTo(l[0],a[0]),2===o)this._context.lineTo(l[1],a[1]);else for(var c=fte(l),u=fte(a),h=0,d=1;d<o;++h,++d)this._context.bezierCurveTo(c[0][h],u[0][h],c[1][h],u[1][h],l[d],a[d]);(this._line||0!==this._line&&1===o)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(l,a){this._x.push(+l),this._y.push(+a)}},iD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(l,a){switch(l=+l,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(l,a):this._context.moveTo(l,a);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,a),this._context.lineTo(l,a);else{var o=this._x*(1-this._t)+l*this._t;this._context.lineTo(o,this._y),this._context.lineTo(o,a)}}this._x=l,this._y=a}};var vte="%Y-%m-%dT%H:%M:%S.%LZ",B8e=Date.prototype.toISOString?function L8e(l){return l.toISOString()}:UT(vte);const V8e=B8e;var U8e=+new Date("2000-01-01T00:00:00.000Z")?function z8e(l){var a=new Date(l);return isNaN(a)?null:a}:LR(vte);const H8e=U8e;function W8e(l,a,o){var c=new db,u=a;return null==a?(c.restart(l,a,o),c):(c._restart=c.restart,c.restart=function(h,d,f){d=+d,f=null==f?hb():+f,c._restart(function p(g){g+=u,c._restart(p,u+=d,f),h(g)},d,f)},c.restart(l,a,o),c)}const rD=l=>()=>l;function G8e(l,{sourceEvent:a,target:o,transform:c,dispatch:u}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function th(l,a,o){this.k=l,this.x=a,this.y=o}th.prototype={constructor:th,scale:function(l){return 1===l?this:new th(this.k*l,this.x,this.y)},translate:function(l,a){return 0===l&0===a?this:new th(this.k,this.x+this.k*l,this.y+this.k*a)},apply:function(l){return[l[0]*this.k+this.x,l[1]*this.k+this.y]},applyX:function(l){return l*this.k+this.x},applyY:function(l){return l*this.k+this.y},invert:function(l){return[(l[0]-this.x)/this.k,(l[1]-this.y)/this.k]},invertX:function(l){return(l-this.x)/this.k},invertY:function(l){return(l-this.y)/this.k},rescaleX:function(l){return l.copy().domain(l.range().map(this.invertX,this).map(l.invert,l))},rescaleY:function(l){return l.copy().domain(l.range().map(this.invertY,this).map(l.invert,l))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var sD=new th(1,0,0);function _te(l){for(;!l.__zoom;)if(!(l=l.parentNode))return sD;return l.__zoom}function iN(l){l.stopImmediatePropagation()}function eC(l){l.preventDefault(),l.stopImmediatePropagation()}function j8e(l){return!(l.ctrlKey&&"wheel"!==l.type||l.button)}function $8e(){var l=this;return l instanceof SVGElement?(l=l.ownerSVGElement||l).hasAttribute("viewBox")?[[(l=l.viewBox.baseVal).x,l.y],[l.x+l.width,l.y+l.height]]:[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]:[[0,0],[l.clientWidth,l.clientHeight]]}function yte(){return this.__zoom||sD}function q8e(l){return-l.deltaY*(1===l.deltaMode?.05:l.deltaMode?1:.002)*(l.ctrlKey?10:1)}function Y8e(){return navigator.maxTouchPoints||"ontouchstart"in this}function X8e(l,a,o){var c=l.invertX(a[0][0])-o[0][0],u=l.invertX(a[1][0])-o[1][0],h=l.invertY(a[0][1])-o[0][1],d=l.invertY(a[1][1])-o[1][1];return l.translate(u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u),d>h?(h+d)/2:Math.min(0,h)||Math.max(0,d))}function Z8e(){var m,v,_,l=j8e,a=$8e,o=X8e,c=q8e,u=Y8e,h=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,p=AQ,g=z0("start","zoom","end"),y=500,x=0,C=10;function w(L){L.property("__zoom",yte).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",B).filter(u).on("touchstart.zoom",V).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(L,U){return(U=Math.max(h[0],Math.min(h[1],U)))===L.k?L:new th(U,L.x,L.y)}function D(L,U,z){var W=U[0]-z[0]*L.k,H=U[1]-z[1]*L.k;return W===L.x&&H===L.y?L:new th(L.k,W,H)}function T(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function A(L,U,z,W){L.on("start.zoom",function(){I(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(W).end()}).tween("zoom",function(){var H=this,j=arguments,G=I(H,j).event(W),K=a.apply(H,j),J=null==z?T(K):"function"==typeof z?z.apply(H,j):z,ce=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),oe=H.__zoom,xe="function"==typeof U?U.apply(H,j):U,ve=p(oe.invert(J).concat(ce/oe.k),xe.invert(J).concat(ce/xe.k));return function(De){if(1===De)De=xe;else{var We=ve(De),ke=ce/We[2];De=new th(ke,J[0]-We[0]*ke,J[1]-We[1]*ke)}G.zoom(null,De)}})}function I(L,U,z){return!z&&L.__zooming||new N(L,U)}function N(L,U){this.that=L,this.args=U,this.active=0,this.sourceEvent=null,this.extent=a.apply(L,U),this.taps=0}function k(L,...U){if(l.apply(this,arguments)){var z=I(this,U).event(L),W=this.__zoom,H=Math.max(h[0],Math.min(h[1],W.k*Math.pow(2,c.apply(this,arguments)))),j=ml(L);if(z.wheel)(z.mouse[0][0]!==j[0]||z.mouse[0][1]!==j[1])&&(z.mouse[1]=W.invert(z.mouse[0]=j)),clearTimeout(z.wheel);else{if(W.k===H)return;z.mouse=[j,W.invert(j)],jp(this),z.start()}eC(L),z.wheel=setTimeout(G,150),z.zoom("mouse",o(D(S(W,H),z.mouse[0],z.mouse[1]),z.extent,d))}function G(){z.wheel=null,z.end()}}function F(L,...U){if(!_&&l.apply(this,arguments)){var z=L.currentTarget,W=I(this,U,!0).event(L),H=Ns(L.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",ce,!0),j=ml(L,z),G=L.clientX,K=L.clientY;l2(L.view),iN(L),W.mouse=[j,this.__zoom.invert(j)],jp(this),W.start()}function J(oe){if(eC(oe),!W.moved){var xe=oe.clientX-G,ve=oe.clientY-K;W.moved=xe*xe+ve*ve>x}W.event(oe).zoom("mouse",o(D(W.that.__zoom,W.mouse[0]=ml(oe,z),W.mouse[1]),W.extent,d))}function ce(oe){H.on("mousemove.zoom mouseup.zoom",null),c2(oe.view,W.moved),eC(oe),W.event(oe).end()}}function B(L,...U){if(l.apply(this,arguments)){var z=this.__zoom,W=ml(L.changedTouches?L.changedTouches[0]:L,this),H=z.invert(W),j=z.k*(L.shiftKey?.5:2),G=o(D(S(z,j),W,H),a.apply(this,U),d);eC(L),f>0?Ns(this).transition().duration(f).call(A,G,W,L):Ns(this).call(w.transform,G,W,L)}}function V(L,...U){if(l.apply(this,arguments)){var j,G,K,J,z=L.touches,W=z.length,H=I(this,U,L.changedTouches.length===W).event(L);for(iN(L),G=0;G<W;++G)J=[J=ml(K=z[G],this),this.__zoom.invert(J),K.identifier],H.touch0?!H.touch1&&H.touch0[2]!==J[2]&&(H.touch1=J,H.taps=0):(H.touch0=J,j=!0,H.taps=1+!!m);m&&(m=clearTimeout(m)),j&&(H.taps<2&&(v=J[0],m=setTimeout(function(){m=null},y)),jp(this),H.start())}}function $(L,...U){if(this.__zooming){var j,G,K,J,z=I(this,U).event(L),W=L.changedTouches,H=W.length;for(eC(L),j=0;j<H;++j)K=ml(G=W[j],this),z.touch0&&z.touch0[2]===G.identifier?z.touch0[0]=K:z.touch1&&z.touch1[2]===G.identifier&&(z.touch1[0]=K);if(G=z.that.__zoom,z.touch1){var ce=z.touch0[0],oe=z.touch0[1],xe=z.touch1[0],ve=z.touch1[1],De=(De=xe[0]-ce[0])*De+(De=xe[1]-ce[1])*De,We=(We=ve[0]-oe[0])*We+(We=ve[1]-oe[1])*We;G=S(G,Math.sqrt(De/We)),K=[(ce[0]+xe[0])/2,(ce[1]+xe[1])/2],J=[(oe[0]+ve[0])/2,(oe[1]+ve[1])/2]}else{if(!z.touch0)return;K=z.touch0[0],J=z.touch0[1]}z.zoom("touch",o(D(G,K,J),z.extent,d))}}function q(L,...U){if(this.__zooming){var j,G,z=I(this,U).event(L),W=L.changedTouches,H=W.length;for(iN(L),_&&clearTimeout(_),_=setTimeout(function(){_=null},y),j=0;j<H;++j)G=W[j],z.touch0&&z.touch0[2]===G.identifier?delete z.touch0:z.touch1&&z.touch1[2]===G.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),2===z.taps&&(G=ml(G,this),Math.hypot(v[0]-G[0],v[1]-G[1])<C)){var K=Ns(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return w.transform=function(L,U,z,W){var H=L.selection?L.selection():L;H.property("__zoom",yte),L!==H?A(L,U,z,W):H.interrupt().each(function(){I(this,arguments).event(W).start().zoom(null,"function"==typeof U?U.apply(this,arguments):U).end()})},w.scaleBy=function(L,U,z,W){w.scaleTo(L,function(){var H=this.__zoom.k,j="function"==typeof U?U.apply(this,arguments):U;return H*j},z,W)},w.scaleTo=function(L,U,z,W){w.transform(L,function(){var H=a.apply(this,arguments),j=this.__zoom,G=null==z?T(H):"function"==typeof z?z.apply(this,arguments):z,K=j.invert(G),J="function"==typeof U?U.apply(this,arguments):U;return o(D(S(j,J),G,K),H,d)},z,W)},w.translateBy=function(L,U,z,W){w.transform(L,function(){return o(this.__zoom.translate("function"==typeof U?U.apply(this,arguments):U,"function"==typeof z?z.apply(this,arguments):z),a.apply(this,arguments),d)},null,W)},w.translateTo=function(L,U,z,W,H){w.transform(L,function(){var j=a.apply(this,arguments),G=this.__zoom,K=null==W?T(j):"function"==typeof W?W.apply(this,arguments):W;return o(sD.translate(K[0],K[1]).scale(G.k).translate("function"==typeof U?-U.apply(this,arguments):-U,"function"==typeof z?-z.apply(this,arguments):-z),j,d)},W,H)},N.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,U){return this.mouse&&"mouse"!==L&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&"touch"!==L&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&"touch"!==L&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var U=Ns(this.that).datum();g.call(L,this.that,new G8e(L,{sourceEvent:this.sourceEvent,target:w,type:L,transform:this.that.__zoom,dispatch:g}),U)}},w.wheelDelta=function(L){return arguments.length?(c="function"==typeof L?L:rD(+L),w):c},w.filter=function(L){return arguments.length?(l="function"==typeof L?L:rD(!!L),w):l},w.touchable=function(L){return arguments.length?(u="function"==typeof L?L:rD(!!L),w):u},w.extent=function(L){return arguments.length?(a="function"==typeof L?L:rD([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),w):a},w.scaleExtent=function(L){return arguments.length?(h[0]=+L[0],h[1]=+L[1],w):[h[0],h[1]]},w.translateExtent=function(L){return arguments.length?(d[0][0]=+L[0][0],d[1][0]=+L[1][0],d[0][1]=+L[0][1],d[1][1]=+L[1][1],w):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},w.constrain=function(L){return arguments.length?(o=L,w):o},w.duration=function(L){return arguments.length?(f=+L,w):f},w.interpolate=function(L){return arguments.length?(p=L,w):p},w.on=function(){var L=g.on.apply(g,arguments);return L===g?w:L},w.clickDistance=function(L){return arguments.length?(x=(L=+L)*L,w):Math.sqrt(x)},w.tapDistance=function(L){return arguments.length?(C=+L,w):C},w}_te.prototype=th.prototype;class mg{constructor(a,o,c){this.first=a,this.second=o,this.third=c}isSecond(){return!!this.second}isThird(){return!!this.third}toArrays(){let a=[this.first];return this.second&&a.push(this.second),this.third&&a.push(this.third),a}}class vg{constructor(a,o,c,u,h,d,f,p,g,m,v,_,y,b,x,C,w,S){this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442=a,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=o,this.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443=c,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=u,this.scale=h,this.width=d,this.height=f,this.delta=p,this.lineWidth=g,this.lineSizeExtra=m,this.colorBackground=v,this.colorMain=_,this.colorText=y,this.colorCircles=b,this.colorLines=x,this.colorLinesHighlighted=C,this.colorLinesSecondary=w,this.svgImage=S,this.rects=[],this.lines=[],this.linesPlate=[],this.texts=[],this.circles=[],this.ellipses=[],this.pathes=[],this.onItemSelected=null,this.params=new Map,this.fontLineRelativeOffset=.75,this.fontSize=20,this.fontWeight=700}addParam(a,o){return this.params.set(a,o),this}getParam(a){return this.params.get(a)}setColorBackground(a){return this.colorBackground=a,this}setColorMain(a){return this.colorMain=a,this}setColorText(a){return this.colorText=a,this}setColorLines(a){return this.colorLines=a,this}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setFontSize(a){return this.fontSize=a,this}setFontLineRelativeOffset(a){return this.fontLineRelativeOffset=a,this}setFontWeight(a){return this.fontWeight=a,this}setLineWidth(a){return this.lineWidth=a,this}static builder(){return new vg(!0,!0,!1,!0,.5,512,512,Math.min(512,512)/15,2,Math.min(512,512)/20,"black","gold","firebrick","red","white","green","cyan",null)}clearAll(){return this.rects=[],this.lines=[],this.linesPlate=[],this.texts=[],this.circles=[],this.ellipses=[],this.pathes=[],this}}class Di{constructor(a,o){this.x=a,this.y=o}}class oD{constructor(a,o,c){this.name=a,this.x=o,this.y=c}static builder(){return new oD("translate",0,0)}setName(a){return this.name=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}}class aD{constructor(a,o,c){this.name=a,this.x=o,this.y=c}static builder(){return new aD("scale",0,0)}setName(a){return this.name=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}}class rN{constructor(a,o,c=0,u=0){this.name=a,this.angle=o,this.x=c,this.y=u}static builder(){return new rN("rotate",0)}setName(a){return this.name=a,this}setAngle(a){return this.angle=a,this}setRotationX(a){return this.x=a,this}setRotationY(a){return this.y=a,this}}class sN{constructor(a,o){this.name=a,this.angle=o}static builder(){return new sN("skewY",0)}setName(a){return this.name=a,this}setAngle(a){return this.angle=a,this}}class oN{constructor(a,o){this.name=a,this.angle=o}static builder(){return new oN("skewX",0)}setName(a){return this.name=a,this}setAngle(a){return this.angle=a,this}}class Mi{constructor(a,o){this.name=a,this.func=o}static builder(){return new Mi("",null)}setName(a){return this.name=a,this}setFunc(a){return this.func=a,this}}class Dv{constructor(a,o=[],c=[],u=!0,h=null){this.transform=a,this.classes=o,this.events=c,this.visible=u,this.transitions=h,this.d3Object=null}transformToString(a=null){return(a||this.transform).map((c,u)=>{let h=`${c.name}(`;return"translate"==c.name||"scale"==c.name?h+=`${c.x},${c.y}`:"rotate"==c.name?(h+=c.angle,(c.x||c.y)&&(h+=`,${c.x},${c.y}`)):("skewY"==c.name||"skewX"==c.name)&&(h+=c.angle),h+=")",h}).join(" ")}apply(a,o,c=null,u=null){var h=c||this.d3Object;if(null==h)return null;var d=h.transition().delay(a).duration(o);return u&&(d=d.on("end",u)),this.applyToD3Object(d)}applyToD3Object(a=null){return null}applyEventsToD3Object(a=null){var o=this,c=a;if(o.events.forEach(u=>{c=c.on(u.name,u.func)}),o.d3Object=c,o.transitions&&o.transitions.length){let u=!1,h=()=>{let d=null;u&&o.transitions&&o.transitions.length&&o.transitions.shift(),o.transitions&&o.transitions.length>0&&(d=o.transitions[0]),null!=d&&(u=!0,d.data.clone(o),c=(c=d.apply(c)).on("end",h))};h()}return c}emulateCollapseTransitions(){return this.transitions&&this.transitions.length>0&&(this.d3Object.interrupt(),this.transitions[this.transitions.length-1].data.cloneTo(this),this.transitions=[]),this}setTransforms(a){return this.transform=a,this}translate(a,o){return this.transform.push(oD.builder().setX(a).setY(o)),this}scale(a,o){return this.transform.push(aD.builder().setX(a).setY(o)),this}rotate(a,o=0,c=0){return this.transform.push(rN.builder().setAngle(a).setRotationX(o).setRotationY(c)),this}skewY(a){return this.transform.push(sN.builder().setAngle(a)),this}skewX(a){return this.transform.push(oN.builder().setAngle(a)),this}setClasses(a){return this.classes=a,this}addClass(a){return this.classes.indexOf(a)<0&&this.classes.push(a),this}removeClass(a){let o=this.classes.indexOf(a);return o>=0&&this.classes.splice(o,1),this}addEvent(a){return this.events.push(a),this}setVisible(a){return this.visible=a,this}getVisible(){return this.visible}setTransitions(a){return this.transitions=a,this}addTransition(a){return null==this.transitions&&(this.transitions=[]),this.transitions.push(a),this}}class lD{constructor(a,o=0,c=1e3){this.data=a,this.delay=o,this.duration=c}static builder(){return new lD(null)}setData(a){return this.data=a,this}setDelay(a){return this.delay=a,this}setDuration(a){return this.duration=a,this}apply(a=null){return this.data.apply(this.delay,this.duration,a)}}class Qn extends Dv{constructor(a,o,c,u,h,d,f,p,g,m,v=300){super(m),this.text=a,this.x=o,this.y=c,this.color=u,this.strokeColor=h,this.strokeWidth=d,this.angle=f,this.fontSize=p,this.textAnchor=g,this.fontWeight=v}applyToD3Object(a=null){var c=this;return(a||this.d3Object).attr("x",0*c.x).attr("y",0*c.y).attr("font-size",c.fontSize).attr("font-weight",c.fontWeight).attr("text-anchor",c.textAnchor).attr("transform",this.transformToString(c.transform||[])).style("stroke",c.strokeColor).style("stroke-width",c.strokeWidth).style("fill",c.color).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden")}clone(a=null){return(a||Qn.builder()).setText(this.text).setX(this.x).setY(this.y).setColor(this.color).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setAngle(this.angle).setFontSize(this.fontSize).setTextAnchor(this.textAnchor).setFontWeight(this.fontWeight).setTransitions(null).setTransforms([...this.transform]).setClasses([...this.classes])}static builder(){return new Qn("\u0422\u0435\u043a\u0441\u0442",0,0,"firebrick","black",0,0,"20px","start",[])}setBold(a=!0){return this.fontWeight=a?700:300,this}setFontWeight(a){return this.fontWeight=a,this}setText(a){return this.text=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setColor(a){return this.color=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}setAngle(a){return this.angle=a,this}setTextAnchor(a){return this.textAnchor=a,this}setFontSize(a){return this.fontSize=a,this}}class xf extends Dv{constructor(a,o,c,u,h,d){super(d),this.r=a,this.fillColor=o,this.fillOpacity=c,this.strokeColor=u,this.strokeWidth=h}clone(a=null){return(a||xf.builder()).setR(this.r).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setTransforms([...this.transform]).setTransitions(null).setClasses([...this.classes])}applyToD3Object(a=null){var c=this;return(a||this.d3Object).attr("cx",0).attr("cy",0).attr("r",c.r).attr("fill",c.fillColor).attr("fill-opacity",c.fillOpacity).attr("stroke",c.strokeColor).attr("stroke-width",c.strokeWidth).attr("transform",this.transformToString(c&&c.transform||[])).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden")}static builder(){return new xf(100,"green",1,"white",2,[])}setR(a){return this.r=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}}class aN extends Dv{constructor(a,o,c,u,h,d,f){super(f),this.rx=a,this.ry=o,this.fillColor=c,this.fillOpacity=u,this.strokeColor=h,this.strokeWidth=d}static builder(){return new aN(100,50,"green",1,"white",2,[])}setRx(a){return this.rx=a,this}setRy(a){return this.ry=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}}class Jn extends Dv{constructor(a,o,c,u,h,d,f,p,g){super(g),this.x1=a,this.y1=o,this.x2=c,this.y2=u,this.color=h,this.width=d,this.startArrow=f,this.endArrow=p}clone(){return Jn.builder().setX1(this.x1).setY1(this.y1).setX2(this.x2).setY2(this.y2).setColor(this.color).setWidth(this.width).setStartArrow(this.startArrow).setEndArrow(this.endArrow).setTransforms(this.transform?[...this.transform]:[]).setTransitions(null)}static builder(){return new Jn(0,0,0,0,"white",1,"","",[])}setX1(a){return this.x1=a,this}setY1(a){return this.y1=a,this}setX2(a){return this.x2=a,this}setY2(a){return this.y2=a,this}setColor(a){return this.color=a,this}setWidth(a){return this.width=a,this}setStartArrow(a){return this.startArrow=a,this}setEndArrow(a){return this.endArrow=a,this}}class Yr extends Dv{constructor(a,o,c,u,h,d,f,p,g,m,v,_,y){super(y),this.x=a,this.y=o,this.rx=c,this.ry=u,this.width=h,this.height=d,this.fillColor=f,this.fillOpacity=p,this.strokeColor=g,this.strokeOpacity=m,this.strokeWidth=v,this.locked=_}static builder(){return new Yr(0,0,0,0,100,100,"white",1,"",1,0,!1,[])}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setRx(a){return this.rx=a,this}setRy(a){return this.ry=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeOpacity(a){return this.strokeOpacity=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}setLocked(a){return this.locked=a,this}}class Lr extends Dv{constructor(a,o,c,u,h,d,f,p,g){super(p),this.datum=a,this.d=o,this.strokeColor=c,this.strokeWidth=u,this.strokeOpacity=h,this.fillColor=d,this.fillOpacity=f,this.renderHandler=g}clone(a=null){return(a||Lr.builder()).setD(this.datum).setD(this.d).setStrokeColor(this.strokeColor).setStrokeWidth(this.strokeWidth).setStrokeOpacity(this.strokeOpacity).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setTransforms([...this.transform]).setTransitions(null).setRenderHandler(this.renderHandler).setClasses([...this.classes])}applyToD3Object(a=null){var c=this;return(a||this.d3Object).attr("d",c.d).attr("fill",c.fillColor).attr("fill-opacity",c.fillOpacity).attr("stroke",c.strokeColor).attr("stroke-width",c.strokeWidth).attr("stroke-opacity",c.strokeOpacity||1).attr("transform",this.transformToString(c.transform||[])).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden")}static builder(){return new Lr(null,null,"steelblue",2,1,"none",1,[],null)}setDatum(a){return this.datum=a,this}setD(a){return this.d=a,this}setStrokeColor(a){return this.strokeColor=a,this}setStrokeWidth(a){return this.strokeWidth=a,this}setStrokeOpacity(a){return this.strokeOpacity=a,this}setFillColor(a){return this.fillColor=a,this}setFillOpacity(a){return this.fillOpacity=a,this}setRenderHandler(a){return this.renderHandler=a,this}}let cD=(()=>{class l{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(o){return 1/(o*(Math.sqrt(5)+1)/2)}createDataScale(o,c,u){let h=c(o),d=o.scale,f=o.width*(1-d)/2,p=o.height*(1-d)/2;return h.toArrays().forEach(g=>{g.forEach(m=>{m.locked||(m.transform=m.transform||[],m.transform.unshift(oD.builder().setX(f).setY(p),aD.builder().setX(d).setY(d)))})}),u(o,h),h}get createDataPtr(){return o=>this.createData(o)}get createGolgofaDataPtr(){return o=>this.createData(o,1,1-.8,.27,.6,Math.PI/8)}createBackground(o,c=1){return Yr.builder().setX(0).setY(0).setWidth(o.width).setHeight(o.height).setFillColor(o.colorBackground).setFillOpacity(c).setLocked(!0)}createCrossText(o,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),g=o.width*(c||p),m=f||Math.atan2(1-p,.5),v=g*(u||1-p),_=g*(h||1-p),y=g*(h||.25),b=d?o.height*d+y*Math.tan(m):o.height-g/2,x=b+y*Math.tan(m)/2+o.delta/Math.cos(m)/2,C=(o.height+b+y*Math.tan(m)/2+o.delta/Math.cos(m)/2)/2,w=+(o.height-(b+y*Math.tan(m)/2+o.delta/Math.cos(m)/2)-o.height/12)/2/2,S=.55*o.width,D=[Qn.builder().setText("\u0446\u0440\u0483\u044c").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(o.colorMain).translate(o.width/2-_/2,(u?(g*(u||1-p)-o.delta/2)/2:g*Math.pow(1-p,2))-2*o.delta).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),Qn.builder().setText("\u0441\u043b\u0483\u0432\u044b").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(o.colorMain).translate(o.width/2+_/2,(u?(g*(u||1-p)-o.delta/2)/2:g*Math.pow(1-p,2))-2*o.delta).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b")})),Qn.builder().setText("\u0406\u0483\u0421").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(o.colorMain).translate((o.width-g)/2,v-o.delta).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),Qn.builder().setText("\u0425\u0483\u0421").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(o.colorMain).translate((o.width+g)/2,v-o.delta).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441")})),Qn.builder().setText("\u0441\u043d\u0483\u044a").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width-g)/2,v+2*o.delta).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),Qn.builder().setText("\u0431\u0436\u0483\u0457\u0439").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width+g)/2,v+2*o.delta).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439")})),Qn.builder().setText("\u043d\u0438").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("start").setColor(o.colorMain).translate((o.width-y)/2,(b-y/Math.cos(m)/2+(v+2*o.delta))/2-o.height/12/2).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),Qn.builder().setText("\u043a\u0430").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("end").setColor(o.colorMain).translate((o.width+y)/2,(b-y/Math.cos(m)/2+(v+2*o.delta))/2-o.height/12/2).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c")})),Qn.builder().setText("\u043c").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width-y)/2,x+w).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),Qn.builder().setText("\u043b").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width+y)/2,x+w).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435")})),Qn.builder().setText("\u0440").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width-y)/2,C+w).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),Qn.builder().setText("\u0431").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width+y)/2,C+w).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c")})),Qn.builder().setText("\u0433").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate(o.width/2-(S/2+o.delta/2*3/2),o.height).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),Qn.builder().setText("\u0433").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate(o.width/2+(S/2+o.delta/2*3/2),o.height).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})),Qn.builder().setText("\u043a").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate(o.width/2-(S/2+o.delta/2*3/2),v+.3*(o.height-v)+o.height/12).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})),Qn.builder().setText("\u0442").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate(o.width/2+(S/2+o.delta/2*3/2),v+.3*(o.height-v)+o.height/12).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})),Qn.builder().setText("\u0433").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width-y)/2,o.height+2*o.delta+o.height/12/2).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})),Qn.builder().setText("\u0430").setFontSize(o.height/12+"px").addClass("cs").setBold().setTextAnchor("middle").setColor(o.colorMain).translate((o.width+y)/2,o.height+2*o.delta+o.height/12/2).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")}))];return[D].forEach(T=>T.forEach(A=>A.addClass("cursor"))),[D]}createKopie(o,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),x=(d&&Math.tan(m),[]),C=o.delta/2/4,w=o.height*(1-u)*.8,A=[o.width/2-o.delta/2*5,o.height+o.delta/2],N=(V,$,q="gold")=>{let L=(V=>({dd:V||[[0,0],[1,1],[1,-1],[0,0]],path:Qc().x(L=>L[0]).y(L=>L[1])}))($);return((V,$,q)=>V.rotate(-9,q[0],q[1]))(Lr.builder().setDatum(L.dd).setD(L.path).setStrokeColor(q).setStrokeWidth(1).setFillColor(q).translate(V[0],V[1]),0,A)},k=(V,$,q,L)=>{let U=[];return V.forEach(z=>{let W=[];W.push(z[0]*$+q),W.push(z[1]*$+L),U.push(W)}),U},F=o.colorMain,B=[N([0,0],k([[-C,0],[-C,-w],[C,-w],[C,0],[-C,0]],1,A[0],A[1]),F),N([0,0],k([[0,2*C-w],[2*-C,-w-2*C],[0,-w-16*C],[2*+C,-w-2*C],[0,2*C-w]],1,A[0],A[1]),F),N([0,0],k([[3*-C/2,2*C-w],[0,-w-2*C],[3*+C/2,2*C-w],[3*-C/2,2*C-w]],1,A[0],A[1]),F),N([0,0],k([[3*-C/2,6*C-w],[0,2*C-w],[3*+C/2,6*C-w],[3*-C/2,6*C-w]],1,A[0],A[1]),F)];return[x,B].forEach(V=>V.forEach($=>$.addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u043a\u043e\u043f\u0438\u0435")})).addClass("cursor"))),new mg(x,B)}createTrost(o,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),C=(d&&Math.tan(m),o.delta/2/4),w=o.height*(1-u)*.8,T=[o.width/2+o.delta/2*5,o.height+o.delta/2],I=(B,V,$="gold",q=!1)=>{let L=((B,V=!1)=>{let $=B||[[0,0],[1,1],[1,-1],[0,0]];const q=Qc().x(L=>L[0]).y(L=>L[1]);return{dd:$,path:V?q.curve(Jb):q}})(V,q);return((B,V,$)=>B.rotate(9,$[0],$[1]))(Lr.builder().setDatum(L.dd).setD(L.path).setStrokeColor($).setStrokeWidth(1).setFillColor($).translate(B[0],B[1]),0,T)},N=(B,V,$,q)=>{let L=[];return B.forEach(U=>{let z=[];z.push(U[0]*V+$),z.push(U[1]*V+q),L.push(z)}),L},k=o.colorMain,F=[I([0,0],N([[-C,0],[-C,-w-3*C],[C,-w-3*C],[C,0],[-C,0]],1,T[0],T[1]),k),I([0,0],N([[0,-w-2*C],[5*-C,-w-2*C],[5*-C,-w-16*C],[0,-w-16*C],[5*+C,-w-16*C],[5*+C,-w-2*C],[0,-w-2*C]],1,T[0],T[1]),k,!0),I([0,0],N([[3*-C/2,2*C-w],[0,-w-2*C],[3*+C/2,2*C-w],[3*-C/2,2*C-w]],1,T[0],T[1]),k),I([0,0],N([[3*-C/2,6*C-w],[0,2*C-w],[3*+C/2,6*C-w],[3*-C/2,6*C-w]],1,T[0],T[1]),k)];return F.forEach(B=>B.addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0442\u0440\u043e\u0441\u0442\u044c")})).addClass("cursor")),new mg([],F)}createSkull(o,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),x=(d&&Math.tan(m),[]),C=.55*o.width,S=0*o.delta/4/2,D=o.delta/4/2,T=(Se,Ge)=>Ge*(1.75*o.delta+2*Se),A=(Se,Ge)=>Ge*(1.75*o.delta+2*Se),I=.5,F=.5,B=(Se,Ge)=>F*T(Se,Ge)/2/2,V=1.15,L=(Se,Ge)=>T(Se,Ge)*F/3.8,U=(Se,Ge)=>T(Se,Ge)*F/2.25,H=1/5.7,j=(Se,Ge)=>T(Se,Ge)/2,G=(Se,Ge)=>T(Se,Ge)/2,oe=(T(S,1),T(S,1),2*D),xe=(Se,Ge,Bt,vn)=>Se.setX(Ge[0]).setY(Ge[1]).rotate(Bt,vn[0],vn[1]),De=Se=>[o.width/2-T(S,Se)/2+j(S,Se),o.height+o.delta-S+D+oe+G(S,Se)],We=1.5;x.push(Yr.builder().setX(o.width/2-C/2).setY(o.height-We).setWidth(C).setHeight(o.delta+We).setFillColor(o.colorMain),Yr.builder().setX(o.width/2-C/2-o.delta/2*3).setY(o.height+o.delta-We).setWidth(2.5*o.delta).setHeight(o.delta+We).setFillColor(o.colorMain),Yr.builder().setX(o.width/2+C/2-o.delta).setY(o.height+o.delta-We).setWidth(2.5*o.delta).setHeight(o.delta+We).setFillColor(o.colorMain),Yr.builder().setX(o.width/2-C/2-o.delta/2*3).setY(o.height+2*o.delta-We).setWidth(o.delta).setHeight(o.delta+We).setFillColor(o.colorMain),Yr.builder().setX(o.width/2+C/2+o.delta/2).setY(o.height+2*o.delta-We).setWidth(o.delta).setHeight(o.delta+We).setFillColor(o.colorMain)),x.forEach(Se=>Se.addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430")})).addClass("cursor"));let Pe=(Se,Ge)=>{x.push(xe(Yr.builder().setRx(.7*T(S,Se)/2*.9).setRy(.7*A(S,Se)/2*.9).setWidth(T(S,Se)).setHeight(.7*A(S,Se)).setFillColor(Ge?o.colorBackground:o.colorMain),[o.width/2-T(S,Se)/2,o.height+o.delta+S+D+oe],-45,De(Se)),xe(Yr.builder().setRx(.4*A(S,Se)/2*.8).setRy(.4*A(S,Se)/2*.8).setWidth(F*T(S,Se)).setHeight(.4*A(S,Se)).setFillColor(Ge?o.colorBackground:o.colorMain),[o.width/2-F*T(S,Se)/2+B(S,Se),o.height+o.delta+S+D+A(S,Se)*I+oe],-45,De(Se)),xe(Yr.builder().setRx(U(S,Se)/2).setRy(U(S,Se)/2).setWidth(U(S,Se)*V).setHeight(U(S,Se)).setFillColor(Ge?o.colorMain:o.colorBackground),[o.width/2+B(S,Se)-L(S,Se)/2+L(S,Se)/2-U(S,Se)*V/2-T(S,Se)*H*1,o.height+o.delta+S+D+A(S,Se)*I/2+oe],-45,De(Se)),xe(Yr.builder().setRx(U(S,Se)/2).setRy(U(S,Se)/2).setWidth(U(S,Se)*V).setHeight(U(S,Se)).setFillColor(Ge?o.colorMain:o.colorBackground),[o.width/2+B(S,Se)-L(S,Se)/2+L(S,Se)/2-U(S,Se)*V/2+T(S,Se)*H,o.height+o.delta+S+D+A(S,Se)*I/2+oe],-45,De(Se)))};"white"==o.colorBackground&&Pe(1.15,!1),Pe(1,"white"==o.colorBackground);let nt=[],$e=(Se,Ge)=>{nt.push(((Se,Ge,Bt="gold",vn=1)=>{let In=(Se=>({dd:Se||[[0,0],[1,1],[1,-1],[0,0]],path:Qc().x(vn=>vn[0]).y(vn=>vn[1]).curve(Jb)}))(Ge);return((Se,Ge,Bt)=>Se.rotate(-45,Bt[0],Bt[1]))(Lr.builder().setDatum(In.dd).setD(In.path).setStrokeColor(Bt).setStrokeWidth(1).setFillColor(Bt).translate(Se[0],Se[1]),0,De(vn))})([0,0],((Se,Ge,Bt,vn)=>{let In=[];return[[.5,0],[1,1],[0,1],[.5,0]].forEach(de=>{let se=[];se.push(de[0]*Ge+Bt),se.push(de[1]*Ge+vn),In.push(se)}),In})(0,1.35*L(S,Se),o.width/2+B(S,Se)-L(S,Se)/2,o.height+o.delta+S+D+A(S,Se)*I+oe),Ge?o.colorMain:o.colorBackground,Se))};return"white"==o.colorBackground&&$e(1.15,!1),$e(1,"white"==o.colorBackground),[x,nt].forEach(Se=>Se.forEach(Ge=>{0==Ge.events.length&&Ge.addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430")})).addClass("cursor")})),new mg(x,nt)}createCross(o,c=!0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,_=0){let y=u,b=h,x=d||o.width,C=f||o.height,w=o.delta/o.width*x,S=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),D=x*(p||S),T=_||Math.atan2(1-S,.5),A=D*(g||1-S),I=D*(m||1-S),N=D*(m||.25),k=v?C*v+N*Math.tan(T):C-D/2,F=c?[Yr.builder().setX(y).setY(b).setWidth(x).setHeight(C).setFillColor(o.colorBackground).setLocked(!0)]:[];return F.push(Yr.builder().setX(y+x/2-w/2).setY(b).setWidth(w).setHeight(C).setFillColor(o.colorMain).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),Yr.builder().setX(y+(x-D)/2).setY(b+A-w/2).setWidth(D).setHeight(w).setFillColor(o.colorMain).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u043a\u0440\u0435\u0441\u0442")})),Yr.builder().setX(0).setY(0).setWidth(I).setHeight(w).setFillColor(o.colorMain).translate(y+(x-I)/2,b+(g?(D*(g||1-S)-w/2)/2:D*Math.pow(1-S,2))-w/2).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439")})),Yr.builder().setX(0).setY(0).setWidth(N).setHeight(w/Math.cos(T)).setFillColor(o.colorMain).translate(y+(x-N)/2,b+k-N/Math.cos(T)/2).skewY(this.toDegrees(T)).addEvent(Mi.builder().setName("click").setFunc(()=>{o.onItemSelected&&o.onItemSelected("\u043a\u0440\u0435\u0441\u0442")}))),F}createData(o,c=0,u=0,h=0,d=0,f=0){let p=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),m=f||Math.atan2(1-p,.5),x=(d&&Math.tan(m),this.createCross(o,!0,0,0,0,0,c,u,h,d,f));[x].forEach(D=>D.forEach((T,A)=>{A&&T.addClass("cursor")}));let C=o.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?new mg([],[]):this.createSkull(o,c,u,h,d,f);x.push(...C.first);let w=C.second;C=o.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?C:this.createKopie(o,c,u,h,d,f),x.push(...C.first),w.push(...C.second),C=o.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?C:this.createTrost(o,c,u,h,d,f),x.push(...C.first),w.push(...C.second);let S=o.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b?[[],[]]:this.createCrossText(o,c,u,h,d,f);return new mg(x,w,S[0])}createSizeHorizontalArrows(o,c,u,h,d,f=!0,p=!0,g="",m=""){let v=c.y<u.y?c:u,_=c.y<u.y?u:c,y=o.lineSizeExtra*(v.x<h.x?1:-1),b=[],x=[Jn.builder().setX1(v.x).setY1(v.y).setX2(h.x+y).setY2(v.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth),Jn.builder().setX1(_.x).setY1(_.y).setX2(h.x+y).setY2(_.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth)];if(v.y<=h.y&&h.y<=_.y){if(x.push(Jn.builder().setX1(h.x).setY1(v.y).setX2(h.x).setY2(_.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setStartArrow(f?"arrowN":"arrow").setEndArrow(f?"arrowN":"arrow")),g){let C=Math.abs(y),w=C/2*g.length/2;b.push(Qn.builder().setText(g).setFontSize(`${C}px`).translate(h.x-Math.abs(y)/2,(v.y+_.y)/2+w).rotate(-90).setColor("white"))}}else{let C=h.y<v.y?v.y-h.y:h.y-_.y;if(x.push(Jn.builder().setX1(h.x).setY1(v.y-C).setX2(h.x).setY2(v.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"arrowN":"arrow"),Jn.builder().setX1(h.x).setY1(_.y+C).setX2(h.x).setY2(_.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"arrowN":"arrow")),g){let w=Math.abs(y),S=-w/2*3;b.push(Qn.builder().setText(g).setFontSize(`${w}px`).translate(h.x-Math.abs(y)/2,v.y+S).rotate(-90).setColor("white"))}if(m){let w=Math.abs(y),S=w/2*(m.length+3);b.push(Qn.builder().setText(m).setFontSize(`${w}px`).translate(h.x-Math.abs(y)/2,_.y+S).rotate(-90).setColor("white"))}p&&(d?x.push(Jn.builder().setX1(h.x).setY1(v.y).setX2(h.x).setY2(d.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"pointN":"pointH"),Jn.builder().setX1(h.x).setY1(_.y).setX2(h.x).setY2(d.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"pointN":"pointH"),Jn.builder().setX1(d.x).setY1(d.y).setX2(h.x+y).setY2(d.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth)):x.push(Jn.builder().setX1(h.x).setY1(v.y).setX2(h.x).setY2(_.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth)))}return[x,b]}createSizeVirtualArrows(o,c,u,h,d,f=!0,p=!0,g="",m=""){let v=c.x<u.x?c:u,_=c.x<u.x?u:c,y=o.lineSizeExtra*(v.y<h.y?1:-1),b=[],x=[Jn.builder().setX1(v.x).setY1(v.y).setX2(v.x).setY2(h.y+y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth),Jn.builder().setX1(_.x).setY1(_.y).setX2(_.x).setY2(h.y+y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth)];if(v.x<=h.x&&h.x<=_.x){if(x.push(Jn.builder().setX1(v.x).setY1(h.y).setX2(_.x).setY2(h.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setStartArrow(f?"arrowN":"arrow").setEndArrow(f?"arrowN":"arrow")),g){let C=Math.abs(y),w=C/2*g.length/2;b.push(Qn.builder().setText(g).setFontSize(`${C}px`).translate((v.x+_.x)/2-w,h.y-Math.abs(y)/2).rotate(0).setColor("white"))}}else{let C=h.x<v.x?v.x-h.x:h.x-_.x;if(x.push(Jn.builder().setX1(v.x-C).setY1(h.y).setX2(v.x).setY2(h.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"arrowN":"arrow"),Jn.builder().setX1(_.x+C).setY1(h.y).setX2(_.x).setY2(h.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"arrowN":"arrow")),p)if(d){if(x.push(Jn.builder().setX1(v.x).setY1(h.y).setX2(d.x).setY2(h.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"pointN":"pointH"),Jn.builder().setX1(_.x).setY1(h.y).setX2(d.x).setY2(h.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth).setEndArrow(f?"pointN":"pointH"),Jn.builder().setX1(d.x).setY1(d.y).setX2(d.x).setY2(h.y+y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth)),g){let w=Math.abs(y),S=-w/2*(m.length+3);b.push(Qn.builder().setText(g).setFontSize(`${w}px`).translate(v.x+S,h.y-Math.abs(y)/2).rotate(0).setColor("white"))}if(m){let w=Math.abs(y),S=w/2*3;b.push(Qn.builder().setText(m).setFontSize(`${w}px`).translate(_.x+S,h.y-Math.abs(y)/2).rotate(0).setColor("white"))}}else x.push(Jn.builder().setX1(v.x).setY1(h.y).setX2(_.x).setY2(h.y).setColor(f?o.colorLines:o.colorLinesHighlighted).setWidth(o.lineWidth))}return[x,b]}get createLinesPlateDataPtr(){return o=>this.createLinesPlateData(o)}createLinesPlateData(o){let c=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),u=o.width*c,h=(o.width-u)/2,f=(Math.atan2(1-c,.5),o.lineWidth),p=[],v=o.height/13,_=u/8;for(let y=0;y<=13;y++)p.push(Jn.builder().setX1(h).setY1(v*y).setX2(o.width-h).setY2(v*y).setColor(o.colorLinesSecondary).setWidth(f));for(let y=0;y<=8;y++)p.push(Jn.builder().setX1(h+_*y).setY1(0).setX2(h+_*y).setY2(o.height).setColor(o.colorLinesSecondary).setWidth(f));return p.push(Jn.builder().setX1(o.width/2).setY1(0).setX2(h).setY2(3*v).setColor(o.colorLinesSecondary).setWidth(f)),p.push(Jn.builder().setX1(o.width/2).setY1(0).setX2(o.width-h).setY2(3*v).setColor(o.colorLinesSecondary).setWidth(f)),new mg(p)}get createLinesDataPtr(){return o=>this.createLinesData(o)}createLinesData(o){let c=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),u=o.width*c,h=(o.width-u)/2,d=Math.atan2(1-c,.5),f=o.lineWidth,p=[],g=[Jn.builder().setX1(h).setY1(0).setX2(o.width-h).setY2(0).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(h).setY1(o.height).setX2(o.width-h).setY2(o.height).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(h).setY1(0).setX2(h).setY2(o.height).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(o.width/2).setY1(0).setX2(o.width/2).setY2(o.height).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(o.width-h).setY1(0).setX2(o.width-h).setY2(o.height).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(h).setY1(u*(1-c)).setX2(o.width-h).setY2(u*(1-c)).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1((o.width-u*(1-c))/2).setY1(u*Math.pow(1-c,2)).setX2((o.width-u*(1-c))/2+u*(1-c)).setY2(u*Math.pow(1-c,2)).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(h).setY1(o.height-.5*u).setX2(o.width-h).setY2(o.height-.5*u).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(h).setY1(o.height-u*(1-c+.5)).setX2(o.width-h).setY2(o.height-u*(.5-(1-c))).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(h).setY1(o.height-u*(1-c+.5)).setX2(o.width-h).setY2(o.height-u*(1-c+.5)).setColor(o.colorLinesHighlighted).setWidth(f),Jn.builder().setX1(h).setY1(o.height-u*(.5-(1-c))).setX2(o.width-h).setY2(o.height-u*(.5-(1-c))).setColor(o.colorLinesHighlighted).setWidth(f)],m=y=>{g.push(...y[0]),p.push(...y[1])},v=Math.min(o.width,o.height)/10;return m(this.createSizeVirtualArrows(o,new Di(h,o.height),new Di(o.width-h,o.height),new Di(o.width/2,o.height+3*v),null,!0,!0,"1.0")),m(this.createSizeVirtualArrows(o,new Di(h,o.height),new Di(o.width/2,o.height),new Di(o.width/2,o.height+2*v),null,!0,!0,"0.5")),m(this.createSizeVirtualArrows(o,new Di(o.width/2,o.height),new Di(o.width-h,o.height),new Di(o.width/2,o.height+2*v),null,!0,!0,"0.5")),m(this.createSizeVirtualArrows(o,new Di(o.width/2-.125*u,o.height-.5*u-.25*u/Math.cos(d)/2+o.delta/Math.cos(d)),new Di(o.width/2+.125*u,o.height-.5*u+.25*u/Math.cos(d)/2),new Di(1.2*h,o.height+1*v),new Di(o.width/2,o.height+1*v),!0,!0,"0.125","0.125")),m(this.createSizeVirtualArrows(o,new Di((o.width-u*(1-c))/2,u*Math.pow(1-c,2)-o.delta/2),new Di((o.width+u*(1-c))/2,u*Math.pow(1-c,2)-o.delta/2),new Di(o.width/2,0-2*v),null,!0,!0,"0.382")),m(this.createSizeVirtualArrows(o,new Di((o.width-u*(1-c))/2,u*Math.pow(1-c,2)-o.delta/2),new Di((o.width+u*(1-c))/2,u*Math.pow(1-c,2)-o.delta/2),new Di(1.2*h,0-1*v),new Di(o.width/2,0),!0,!0,"0.192","0.192")),m(this.createSizeHorizontalArrows(o,new Di(h,0),new Di(h,o.height),new Di(h-2*v,o.height/2),null,!0,!0,"1.618")),m(this.createSizeHorizontalArrows(o,new Di(h,0),new Di(h,u*(1-c)),new Di(h-1*v,u*(1-c)/2),null,!0,!0,"0.146")),m(this.createSizeHorizontalArrows(o,new Di(h,o.height),new Di(h,o.height-.5*u),new Di(h-1*v,o.height-.5*u/2),null,!0,!0,"0.5")),m(this.createSizeHorizontalArrows(o,new Di(h,o.height-.5*u),new Di(h,o.height-u*(1-c+.5)),new Di(h-1*v,o.height-u*(.5+(1-c)/2)),null,!0,!0,"0.382")),m(this.createSizeHorizontalArrows(o,new Di(o.width-h,0),new Di(o.width-h,u*(1-c)),new Di(o.width-h+1*v,-h),new Di((o.width-u*(1-c))/2+u*(1-c),u*Math.pow(1-c,2)),!0,!0,"0.146","0.236")),m(this.createSizeHorizontalArrows(o,new Di(o.width-h,o.height),new Di(o.width-h,o.height-.5*u),new Di(o.width-h+1*v,o.height+h),new Di(o.width-h,o.height-u*(.5-(1-c))),!0,!0,"0.382","0.118")),new mg(g,p)}toDegrees(o){return o/Math.PI*180}transformToString(o){return o.map((c,u)=>{let h=`${c.name}(`;return"translate"==c.name||"scale"==c.name?h+=`${c.x},${c.y}`:"rotate"==c.name?(h+=c.angle,(c.x||c.y)&&(h+=`,${c.x},${c.y}`)):("skewY"==c.name||"skewX"==c.name)&&(h+=c.angle),h+=")",h}).join(" ")}render(o,c){let u=c.rects,h=c.lines,d=c.linesPlate,f=c.texts,p=c.circles,g=c.ellipses,m=c.pathes,v=Math.min(c.width,c.height)/20*c.scale,_=v,y=v/2,b=0*_,x=y/2,S=[[0,0],[0,y],[_,y/2]];if(c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439){o.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,_,y]).attr("refX",b).attr("refY",x).attr("markerWidth",_).attr("markerHeight",y).attr("orient","auto-start-reverse").append("path").attr("d",Qc()(S)).attr("fill",c.colorLinesHighlighted),o.select("defs").append("marker").attr("id","arrowN").attr("viewBox",[0,0,_,y]).attr("refX",b).attr("refY",x).attr("markerWidth",_).attr("markerHeight",y).attr("orient","auto-start-reverse").append("path").attr("d",Qc()(S)).attr("fill",c.colorLines);let T=v,A=v,N=(F,B,V)=>"M "+F+" "+B+" m -"+V+", 0 a "+V+","+V+" 0 1,0 "+2*V+",0 a "+V+","+V+" 0 1,0 -"+2*V+",0";o.select("defs").append("marker").attr("id","pointH").attr("viewBox",[0,0,T,A]).attr("refX",T/2).attr("refY",A/2).attr("markerWidth",v).attr("markerHeight",v).attr("orient","auto-start-reverse").append("path").attr("d",N(v/2,v/2,v/4)).attr("fill",c.colorLinesHighlighted),o.select("defs").append("marker").attr("id","pointN").attr("viewBox",[0,0,T,A]).attr("refX",T/2).attr("refY",A/2).attr("markerWidth",v).attr("markerHeight",v).attr("orient","auto-start-reverse").append("path").attr("d",N(v/2,v/2,v/4)).attr("fill",c.colorLines)}c.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u041a\u0440\u0435\u0441\u0442&&u.forEach(T=>{var A=o.append("rect").attr("x",T.x).attr("y",T.y).attr("rx",T.rx).attr("ry",T.ry).attr("transform",this.transformToString(T.transform||[])).attr("width",T.width).attr("height",T.height).style("fill",T.fillColor||"black").attr("fill-opacity",T.fillOpacity||1).style("stroke",T.strokeColor||"black").style("stroke-width",T.strokeWidth).attr("stroke-opacity",T.strokeOpacity||1).attr("class",T.classes.join(" ")).style("visibility",T.visible?"visible":"hidden");T.events.forEach(I=>{A.on(I.name,I.func)}),T.d3Object=A});let D=[];if(c.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b&&D.push(...h),c.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0421\u0435\u0442\u043a\u0443&&D.push(...d),D){let T=N=>v/c.scale*Math.cos(Math.atan2(N.y2-N.y1,N.x2-N.x1)),A=N=>v/c.scale*Math.sin(Math.atan2(N.y2-N.y1,N.x2-N.x1)),I=N=>N&&N.startsWith("arrow");D.forEach(N=>{let k=o.append("line"),F=(B,V)=>B.style("stroke",V.color).style("stroke-width",V.width).attr("x1",V.x1+(I(V.startArrow)?T(V):0)).attr("y1",V.y1+(I(V.startArrow)?A(V):0)).attr("x2",V.x2-(I(V.endArrow)?T(V):0)).attr("y2",V.y2-(I(V.endArrow)?A(V):0)).attr("transform",this.transformToString(V.transform||[])).attr("marker-start",V.startArrow?"url(#"+V.startArrow+")":"").attr("marker-end",V.endArrow?"url(#"+V.endArrow+")":"").attr("class",V.classes.join(" ")).style("visibility",V.visible?"visible":"hidden");k=F(k,N),N.transitions&&N.transitions.forEach(B=>{k=F(k.transition().delay(B.delay).duration(B.duration),B.data)})})}p.forEach(T=>{let A=o.append("circle");A=T.applyToD3Object(A),A=T.applyEventsToD3Object(A)}),o.selectAll("ellipse").data(g).enter().append("ellipse").attr("cx",0).attr("cy",0).attr("rx",T=>T.rx).attr("ry",T=>T.ry).attr("fill",T=>T.fillColor).attr("fill-opacity",T=>T.fillOpacity).attr("stroke",T=>T.strokeColor).attr("stroke-width",T=>T.strokeWidth).attr("transform",T=>this.transformToString(T&&T.transform||[])).attr("class",T=>T.classes.join(" ")).style("visibility",T=>T.visible?"visible":"hidden"),m.forEach(T=>{if(T.renderHandler)T.renderHandler(o,T);else{let A=o.append("path").datum(T.datum);A=T.applyToD3Object(A),A=T.applyEventsToD3Object(A)}}),f.forEach(T=>{let A=o.append("text").text(T.text);A=T.applyToD3Object(A),A=T.applyEventsToD3Object(A)})}textSizeDirect(o,c,u){if(Ve){var h=Ns("body").append("svg");h.append("text").attr("x",-99999).attr("y",-99999).attr("font-size",c).attr("font-weight",u).text(o);var f=h.node().getBBox();return h.remove(),{width:f.width,height:f.height}}}textSize(o,c){if(Ve){var u=Ns("body").append("svg");o.append("text").text(c.text).attr("x",-99999).attr("y",-99999).attr("font-size",c.fontSize).attr("font-weight",c.fontWeight).attr("text-anchor",c.textAnchor).style("fill",c.color).attr("class",c.classes.join(" ")).style("visibility",c.visible?"visible":"hidden");var d=u.node().getBBox();return u.remove(),{width:d.width,height:d.height}}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class lN{constructor(a,o,c,u,h=null,d=null,f=null){this.logoWidth=a,this.logoHeight=o,this.d3Svc=c,this.mySvgRef=u,this.generator=h,this.delayedRun=d,this.d3Config=f,this.delta=1,this.svg=null,this.delta=Math.min(a,o)/10,null==this.d3Config&&this.regenerateConfig()}regenerateConfig(){return this.d3Config=new vg(!0,!0,!1,!0,.5,this.logoWidth,this.logoHeight,Math.min(this.logoWidth,this.logoHeight)/15,2,Math.min(this.logoWidth,this.logoHeight)/20,"black","gold","firebrick","red","white","green","cyan",this),this}getGenerator(){return this.generator}setGenerator(a){return this.generator&&this.clear().regenerateConfig(),this.generator=a,this}createD3Config(a){this.generator?this.generator.generate(this.d3Svc,this.d3Config,a)&&a():(this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createDataPtr,(o,c)=>o.rects=c.first),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesDataPtr,(o,c)=>{o.lines=c.first,c.second&&o.texts.push(...c.second)}),this.d3Svc.createDataScale(this.d3Config,this.d3Svc.createLinesPlateDataPtr,(o,c)=>o.linesPlate=c.first),a())}clear(){return this.removeExistingSvgFromParent(),this.generator.clear(),this}clearDelayed(){this.delayedRun(()=>this.clear(),0)}clearAll(){this.g.selectAll("*").remove()}updateSvg(a=(()=>{})){return this.svg||this.createSvgImage(a),this}createSvgImage(a){this.createD3Config(()=>{this.afterCreateSvgImage(a)})}afterCreateSvgImage(a){this.applySizeAfterGeneration(),this.removeExistingSvgFromParent(),this.setSvgDimensions(),this.addGraphicsElement(),this.createAreaSvg(),a&&a()}applySizeAfterGeneration(){this.generator&&(this.logoWidth=this.generator.getWidth(),this.logoHeight=this.generator.getHeight())}removeExistingSvgFromParent(){Ns(this.mySvgRef.nativeElement).select("svg").remove(),this.svg=null,this.g=null}addGraphicsElement(){this.g=this.svg.append("g").attr("transform","translate(0,0)")}createAreaSvg(){this.d3Svc.render(this.g,this.d3Config)}setSvgDimensions(){let a=this.generator.getHeight(),o=this.generator.getWidth();this.svg=Ns(this.mySvgRef.nativeElement).append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+o+" "+a)}}class Ta{constructor(a='\u041a\u0440\u0435\u0441\u0442 \u043f\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0443 "\u0437\u043e\u043b\u043e\u0442\u043e\u0433\u043e \u0441\u0435\u0447\u0435\u043d\u0438\u044f".',o=512,c=512){this.name=a,this.width=o,this.height=c}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}generate(a,o,c){return a.createDataScale(o,a.createDataPtr,(u,h)=>u.rects=h.first),a.createDataScale(o,a.createLinesDataPtr,(u,h)=>{u.lines=h.first,u.texts.push(...h.second)}),a.createDataScale(o,a.createLinesPlateDataPtr,(u,h)=>u.linesPlate=h.first),o.texts.push(Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("gold")),!0}}class bte extends Ta{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430.",o=512,c=512){super(a,o,c)}generate(a,o,c){o.rects.push(a.createBackground(o)),o.texts.push(Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("firebrick"));for(let h=0;h<10;h++)o.texts.push(Qn.builder().setText("\u041f\u0440\u0438\u043c\u0435\u0440 \u0442\u0435\u043a\u0441\u0442\u0430: "+h).setFontSize("20px").translate(o.width/2,o.height/2).rotate(36*h).setColor("white"));return!0}}class Cte extends Ta{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043a\u0440\u0443\u0436\u043d\u043e\u0441\u0442\u0435\u0439.",o=512,c=512){super(a,o,c)}generate(a,o,c){o.rects.push(a.createBackground(o)),o.texts.push(Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("firebrick")),o.circles.push(xf.builder().setR(100).translate(o.width/2,o.height/2).rotate(0).setFillColor("gold"));for(let d=0;d<12;d++)o.circles.push(xf.builder().setR(10).translate(o.width/2,o.height/2).rotate(30*d).setFillColor("gold").translate(130,0));return!0}}class xte extends Ta{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u044d\u043b\u043b\u0438\u043f\u0441\u043e\u0432.",o=512,c=512){super(a,o,c)}generate(a,o,c){o.rects.push(a.createBackground(o)),o.texts.push(Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("firebrick"));for(let h=0;h<3;h++)o.ellipses.push(aN.builder().setRx(50).setRy(100).translate(o.width/2,o.height/2).rotate(60*h).setFillColor("gold").setFillOpacity(.5));return!0}}class wte extends Ta{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u043e\u0432.",o=512,c=512){super(a,o,c)}generate(a,o,c){o.rects.push(a.createBackground(o)),o.texts.push(Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("firebrick"));for(let h=0;h<5;h++)o.rects.push(Yr.builder().setX(100*h).setY(0).setWidth(100).setHeight(100).setRx(5*h).setRy(5*h).translate(6,o.height/3).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2));return o.rects.push(Yr.builder().setX(0).setY(0).setWidth(200).setHeight(200).translate(o.width/2-100,o.height/3*1.5).rotate(0).setFillColor("gold").setStrokeColor("firebrick").setStrokeWidth(2).addClass("rxanimated")),!0}}class Ste extends Ta{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0433\u0440\u0430\u0444\u0438\u043a\u043e\u0432.",o=512,c=512){super(a,o,c)}generate(a,o,c){o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,o.rects.push(a.createBackground(o)),o.texts.push(Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("firebrick"));let h=()=>{const g=gl(0,10).map(y=>[.5*y*Math.PI,Math.sin(.5*y*Math.PI)]),m=yv().range([0,o.width/2]).domain(zp(g,y=>y[0])),v=yv().range([o.height/2-20,0]).domain([-1,1]);return{sine:g,line:Qc().x(y=>m(y[0])).y(y=>v(y[1])),x:m,y:v}},d=[10,o.height/4];{let g=h();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.line).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.line.curve(nN)).setStrokeColor("green").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.line.curve(Jb)).setStrokeColor("red").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.line.curve(qR)).setStrokeColor("cyan").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}{let g=h();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.line.curve(tN)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("none").translate(d[0],d[1]))}let f=()=>{const g=gl(0,10).map(y=>[.5*y*Math.PI,Math.sin(.5*y*Math.PI)]),m=yv().range([o.width/2+10,o.width-20]).domain(zp(g,y=>y[0])),v=yv().range([o.height/2-20,0]).domain([-1,1]);return{sine:g,area:jR().x(y=>m(y[0])).y0(o.height/4-10).y1(y=>v(y[1]))}};{let g=f();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.area.curve(nN)).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(d[0],d[1]))}{let g=f();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.area.curve(tN)).setStrokeColor("gold").setStrokeWidth(2).setFillColor("gold").setFillOpacity(.5).translate(d[0],d[1]))}{let g=f();o.pathes.push(Lr.builder().setDatum(g.sine).setD(g.area.curve(Jb)).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(d[0],d[1]))}{let g=HR();o.pathes.push(Lr.builder().setD(g({outerRadius:100,innerRadius:50,startAngle:.25*-Math.PI,endAngle:.25*Math.PI})).setStrokeColor("green").setStrokeWidth(2).setFillColor("green").setFillOpacity(.5).translate(100,o.height))}o.pathes.push(Lr.builder().setRenderHandler((g,m)=>{g.append("path").attr("d",mO()({source:{radius:50,startAngle:.3*-Math.PI,endAngle:.2*-Math.PI},target:{radius:50,startAngle:.3*Math.PI,endAngle:.3*Math.PI}})).attr("stroke",m.strokeColor).attr("stroke-width",m.strokeWidth).attr("fill",m.fillColor).attr("transform",(v,_)=>a.transformToString(m.transform||[]))}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(o.width/2,o.height-50));{const g=TY(gl(0,12),xY(gl(0,12))),m=["linen","lightsteelblue","lightcyan","lavender","honeydew","gainsboro"],v=100;o.pathes.push(Lr.builder().setRenderHandler((_,y)=>{g.forEach((b,x)=>{let C=b[0],w=b[1];_.append("path").attr("d",mO()({source:{radius:v,startAngle:-2*Math.PI*(1/g.length)*C,endAngle:-2*Math.PI*(1/g.length)*(C-1)%g.length},target:{radius:v,startAngle:-2*Math.PI*(1/g.length)*w,endAngle:-2*Math.PI*(1/g.length)*(w-1)%g.length}})).attr("stroke",m[(x+1)%m.length]).attr("stroke-width",y.strokeWidth).attr("fill",m[(x+0)%m.length]).attr("transform",(S,D)=>a.transformToString(y.transform||[]))})}).setStrokeColor("steelblue").setStrokeWidth(2).setFillColor("steelblue").setFillOpacity(.5).translate(o.width/4*3+50,o.height-v))}return!0}}class Tte extends Ta{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0439.",o=512,c=512){super(a,o,c)}generate(a,o,c){return o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,o.rects.push(a.createBackground(o)),o.texts.push(Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("firebrick")),["easeLinear","easeQuadIn","easeQuadInOut","easeQuadOut","easeCubicIn","easeSinIn","easeCircleIn","easeBounceIn","easeCubicIn","easeCubicOut","easeCubicInOut"].forEach((u,h)=>{let d=100+30*h;o.pathes.push(Lr.builder().setRenderHandler((p,g)=>{let m=xf.builder().setR(10).translate(o.width/2,d),v=p.append("circle").attr("cx",0).attr("cy",0).attr("r",m.r).attr("fill",m.fillColor).attr("fill-opacity",m.fillOpacity).attr("stroke",m.strokeColor).attr("stroke-width",m.strokeWidth).attr("transform",a.transformToString(m&&m.transform||[])),_=p.append("text").attr("x",0).attr("y",d).text(u).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),b=o.width/2-10,x=(S,D)=>{S.transition().duration(3e3).ease(Ve[u]).attr("x",b).attr("cx",b).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease(Ve[u]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue").on("end",D)},C=null;C=()=>x(v,C);let w=null;w=()=>x(_,w),C(),w()}))}),!0}}class Dte extends Ta{constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 UI.",o=512,c=512){super(a,o,c)}generate(a,o,c){o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1,o.rects.push(a.createBackground(o)),o.texts.push(Qn.builder().setText("UI interaction demo.").setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("firebrick"));let u=100;return[{easeFunc:"easeCubicOut",r:10},{easeFunc:"easeCubic",r:10},{easeFunc:"drag circle: ",r:50,drag:!0}].forEach((h,d)=>{let f=u+h.r+10,p=h.r;o.pathes.push(Lr.builder().setRenderHandler((g,m)=>{let v=xf.builder().setR(p).translate(o.width/2,f),_=0,y=g.append("circle").attr("cx",_).attr("cy",0).attr("r",v.r).attr("fill",v.fillColor).attr("fill-opacity",v.fillOpacity).attr("stroke",v.strokeColor).attr("stroke-width",v.strokeWidth).attr("transform",a.transformToString(v&&v.transform||[])),b=g.append("text").attr("x",0).attr("y",f).text(h.easeFunc).attr("font-size",20).attr("text-anchor","start").attr("stroke","yellow").style("fill","red"),C=o.width/2-p,w=(A,I)=>{A.transition().duration(3e3).ease(Ve[h.easeFunc]).attr("x",C).attr("cx",C).attr("stroke","gold").attr("fill","red").transition().duration(3e3).ease(Ve[h.easeFunc]).attr("x",0).attr("cx",0).attr("stroke","red").attr("fill","blue")},S=null;S=()=>w(y);let D=null;D=()=>w(b);let T=()=>{S(),D()};if(h.drag){let A=bZ().on("drag",I=>{const N=Math.round(1e3*I.dx)/1e3;b.text("drag: dx: "+N);let k=_+N;k<0?k=0:k>o.width/2&&(k=o.width/2),_=k,y.attr("cx",_)});y.call(A)}else y.on("click",T),b.on("click",T)})),u+=2*h.r+20}),!0}}var Da=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2"}(Da||(Da={})),Da))();class Mv{constructor(a=Da.Default,o="\u041a\u0440\u0435\u0441\u0442.",c=512,u=512){this.theme=a,this.name=o,this.width=c,this.height=u}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(a){switch(this.theme){case Da.Dark:a.colorBackground="#0e161b",a.colorMain="white";break;case Da.Light:a.colorBackground="#00364D",a.colorMain="white";break;case Da.Dark2:a.colorBackground="white",a.colorMain="#0e161b";break;case Da.Light2:a.colorBackground="white",a.colorMain="#00364D"}}generate(a,o,c){o.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!1,this.updateThemeConfig(o),a.createDataScale(o,a.createGolgofaDataPtr,(h,d)=>{h.rects=d.first,d.isSecond()&&(h.pathes=d.second),d.isThird()&&(h.texts=d.third)});var u=Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize("20px").translate(o.width/2,50).rotate(0).setColor("none");return o.texts.push(u),o.onItemSelected=h=>{u.d3Object&&u.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",o.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(h).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}var so=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2"}(so||(so={})),so))();class $o{constructor(a,o){this.name=a,this.tag=o}static builder(){return new $o("",null)}setName(a){return this.name=a,this}setTag(a){return this.tag=a,this}}class wf{constructor(){this.genName="Menu",this.commands=[],this.printOnly=!1}static builder(){return new wf}setGenName(a){return this.genName=a,this}setCommands(a){return this.commands=a,this}setPrintOnly(a){return this.printOnly=a,this}addCommand(a){return this.commands.push(a),this}}class Mte extends Ta{constructor(a=so.Default,o=512,c=128){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",o,c),this.theme=a,this.svgImage=null,this.onCommandHandler=null,this.onPreviewCommandHandler=null,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.updateAll=null,this.updateText=null,this.updateAllPds=null,this.updateAllRects=null,this.commands=[$o.builder().setName("\u0418\u043c\u044f"),$o.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),$o.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),$o.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0}regenerate(){return super.regenerate(),this.updateAll&&this.updateAll(),this}setAutoClickOnChange(a){return this.autoClickOnChangeEnabled=a,this}setCommands(a,o=null){return this.commands=a,this.currentIndex=o?this.commands.indexOf(o):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(a){return this.onCommandHandler=a,this}setOnPreviewCommandHandler(a){return this.onPreviewCommandHandler=a,this}setTheme(a){return this.theme=a,this}setSvgImages(a){return this.svgImage=a,this}updateThemeConfig(a){switch(this.theme){case so.Dark:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case so.Light:this.strokeInvisible=!0,a.colorBackground="#00364D",a.colorMain="white";break;case so.Dark2:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case so.Light2:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#00364D"}}isLight(){let a=!0;switch(this.theme){case so.Light2:case so.Light:break;default:a=!1}return a}runOnCommand(a){return this.onCommandHandler&&this.onCommandHandler(a),this}runOnPreviewCommand(a){return this.onPreviewCommandHandler&&this.onPreviewCommandHandler(a),this}isGenerated(){return!!this.updateAll}generate(a,o,c){if(this.updateAll)return this.updateAll(),!0;o.clearAll(),this.updateThemeConfig(o);let u=U=>{let z=Wc(U);return z.r<<16|z.g<<8|z.b},h=(U,z)=>{z?U.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):U.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},d=u(o.colorMain),p=.8,g=.3;o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let b=(U,z=1,W)=>{let H=(16711680&U)>>16,j=(65280&U)>>8,G=255&U;z<1&&0==H&&0==j&&0==G&&(H=j=G=255);let K=H*z&255,J=j*z&255,ce=G*z&255;if(z<1){let xe=u(o.colorBackground);K=(16711680&xe)>>16,J=(65280&xe)>>8,ce=255&xe}return qh(K,J,ce,W).formatHex()},C=o.height/32*1,w=o.height/32*1,S=Math.round(.8*o.height),D=()=>o.width/8*6,T=U=>{let z=Math.round(.8*o.height),W=a.textSizeDirect(U,z,300),H=.8*D();return W.width>H&&(z=z*H/W.width),z},A=Qn.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${T(this.commands[this.currentIndex].name)}px`).translate(o.width/2+C,o.height/2+S/4+w).rotate(0).setColor(b(d,g)).setStrokeColor(b(d,g)).setStrokeWidth(1).setVisible(!0).addEvent(Mi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),I=Qn.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${T(this.commands[this.currentIndex].name)}px`).translate(o.width/2,o.height/2+S/4).rotate(0).setColor(b(d)).setStrokeColor(b(d,this.strokeInvisible?1:g)).setStrokeWidth(1).addEvent(Mi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");o.texts.push(A),o.texts.push(I),this.updateText=U=>{A.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",b(d,g)).style("stroke",b(d,g)).attr("font-size",`${T(this.commands[this.currentIndex].name)}px`).text(U),I.d3Object.transition().duration(150).style("fill","#00000000").style("stroke","#00000000").transition().duration(1e3).style("fill",b(d)).style("stoke",b(d)).attr("font-size",`${T(this.commands[this.currentIndex].name)}px`).text(U)};let F=[];this.updateAllPds=()=>{F.forEach(U=>{U.shadow?h(U.pd.d3Object,this.commands.length>1):(U.leftArrow&&0==this.currentIndex?h(U.pd.d3Object,!1):U.leftArrow&&h(U.pd.d3Object,!0),U.leftArrow||this.currentIndex+1!=this.commands.length?U.leftArrow||h(U.pd.d3Object,!0):h(U.pd.d3Object,!1))})},this.updateAll=()=>{let U=this.commands[this.currentIndex];this.updateText&&U&&this.updateText(U.name),this.updateAllPds&&this.updateAllPds(),this.updateAllRects&&this.updateAllRects(),this.runOnPreviewCommand(U)};let B=(U,z=null,W="gold",H="white",j=!0,G=!1)=>{let K=((U=null)=>({dd:U||[[0,0],[1,1],[1,-1],[0,0]],line:Qc().x(H=>H[0]*(o.width/8)).y(H=>(H[1]/2+.5)*(o.height-2))}))(z),J=Lr.builder().setDatum(K.dd).setD(K.line).setStrokeColor(H).setStrokeWidth(1).setFillColor(W).translate(U[0],U[1]+1).addEvent(Mi.builder().setName("click").setFunc(()=>{j?--this.currentIndex<0&&(this.currentIndex=0):++this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.updateAll&&this.updateAll(),this.onChange()})).setVisible(G&&this.commands.length>1||j&&this.currentIndex>0||!j&&this.currentIndex+1<this.commands.length);G||J.addClass("cursor"),F.push({leftArrow:j,pd:J,shadow:G}),o.pathes.push(J)},V=(U,z,W,H)=>{let j=[];return U.forEach(G=>{let K=[];K.push(G[0]*z+W/(o.width/8)),K.push(G[1]*z+H/o.height),j.push(K)}),j};B([0,0],V([[0,0],[1,1],[1,-1],[0,0]],p,C,w),b(d,g),b(d,1),!0,!0),B([o.width/8*7,0],V([[0,1],[1,0],[0,-1],[0,1]],p,C,w),b(d,g),b(d,1),!1,!0),B([0,0],V([[0,0],[1,1],[1,-1],[0,0]],p,0,0),b(d,1),b(u(b(d,1)),g),!0),B([o.width/8*7,0],V([[0,1],[1,0],[0,-1],[0,1]],p,0,0),b(d,1),b(u(b(d,1)),g),!1);let $=this.commands.length,q=.9*D(),L=[];this.updateAllRects=()=>{L.forEach((U,z)=>{U.forEach((W,H)=>{if(0==H)return h(W[0].d3Object,!0),void h(W[1].d3Object,!0);z==this.currentIndex?(h(W[0].d3Object,!0),h(W[1].d3Object,!0)):(h(W[0].d3Object,!1),h(W[1].d3Object,!1))})})};for(let U=0;U<$;U++){let z=q/$,W=.9,H=(o.width-q)/2+z*U+z*(1-W)/2,j=[Yr.builder().setFillColor("none").setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*W).setHeight(o.height/10*1).translate(H+C,o.height/10*8+w).setVisible(!0),Yr.builder().setFillColor(b(d,g)).setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*W).setHeight(o.height/10*1).translate(H+C,o.height/10*8+w).setVisible(!0)],G=[Yr.builder().setFillColor("none").setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*W).setHeight(o.height/10*1).translate(H,o.height/10*8).setVisible(U==this.currentIndex),Yr.builder().setFillColor(b(d,1)).setStrokeColor(b(d,1)).setStrokeWidth(1).setWidth(z*W).setHeight(o.height/10*1).translate(H,o.height/10*8).setVisible(U==this.currentIndex)];o.rects.push(...j),o.rects.push(...G),L.push([j,G])}return!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var _s=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2",l[l.Dark3=5]="Dark3",l[l.Light3=6]="Light3"}(_s||(_s={})),_s))();class Sf{constructor(a,o){this.name=a,this.tag=o}static builder(){return new Sf("",null)}setName(a){return this.name=a,this}setTag(a){return this.tag=a,this}}class uD extends Ta{constructor(a=_s.Default){super("\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",512,512),this.theme=a,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.useShadow=!0,this.commands=[Sf.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),Sf.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),Sf.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0}setShadowEnabled(a){return this.useShadow=a,this}setAutoClickOnChange(a){return this.autoClickOnChangeEnabled=a,this}setCommands(a,o){return this.commands=a,this.currentIndex=this.commands.indexOf(o),this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(a){return this.onCommandHandler=a,this}setTheme(a){return this.theme=a,this}setSvgImages(a){return this.svgImage=a,this}updateThemeConfig(a){switch(this.theme){case _s.Dark:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case _s.Light:this.strokeInvisible=!0,a.colorBackground="#00364D",a.colorMain="white";break;case _s.Dark2:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case _s.Light2:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#00364D";break;case _s.Dark3:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="#4AAED9";break;case _s.Light3:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#0072A3"}}isLight(){let a=!0;switch(this.theme){case _s.Light3:case _s.Light2:case _s.Light:break;default:a=!1}return a}runOnCommand(a){return this.onCommandHandler&&this.onCommandHandler(a,this),this}generate(a,o,c){this.updateThemeConfig(o);let u=K=>{let J=Wc(K);return J.r<<16|J.g<<8|J.b},h=(K,J)=>{J?K.transition().duration(1).style("visibility","visible").transition().duration(1e3).attr("fill-opacity",1).attr("stroke-opacity",1):K.transition().duration(1e3).attr("fill-opacity",0).attr("stroke-opacity",0).transition().duration(1).style("visibility","hidden")},d=u(o.colorMain),f=this.useShadow,g=.3;o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let b=(K,J=1,ce)=>{let oe=(16711680&K)>>16,xe=(65280&K)>>8,ve=255&K;J<1&&0==oe&&0==xe&&0==ve&&(oe=xe=ve=255);let De=oe*J&255,We=xe*J&255,ke=ve*J&255;if(J<1){let Ze=u(o.colorBackground);De=(16711680&Ze)>>16,We=(65280&Ze)>>8,ke=255&Ze}return qh(De,We,ke,ce).formatHex()},C=o.width/32*1,w=o.height/32*1,A=(Math.round(.8*o.height),1/3),I=2/3,k=K=>{let J=Math.round(.8*o.height),ce=a.textSizeDirect(K,J,300),oe=o.width/24*22*.8,xe=o.height/3*.8;return ce.width>oe&&(J=J*oe/ce.width,ce=a.textSizeDirect(K,J,300)),ce.height>xe&&(J=J*xe/ce.height),J},F=k(this.commands[this.currentIndex].name),B=Qn.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${F}px`).translate(o.width/2+C,o.height/2+F/4+w).rotate(0).setColor(b(d,g)).setStrokeColor(b(d,g)).setStrokeWidth(1).setVisible(f).addEvent(Mi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor"),V=Qn.builder().setText(this.commands[this.currentIndex].name).setTextAnchor("middle").setFontSize(`${F}px`).translate(o.width/2,o.height/2+F/4).rotate(0).setColor(b(d)).setStrokeColor(b(d,this.strokeInvisible?1:g)).setStrokeWidth(1).addEvent(Mi.builder().setName("click").setFunc(()=>{this.runOnCommand(this.commands[this.currentIndex])})).addClass("cursor");o.texts.push(B),o.texts.push(V);let $=K=>{B.d3Object.transition().duration(1e3).attr("font-size",`${k(this.commands[this.currentIndex].name)}px`).text(K),V.d3Object.transition().duration(1e3).attr("font-size",`${k(this.commands[this.currentIndex].name)}px`).text(K)},U=[],z=()=>{U.forEach(K=>{K.shadow?h(K.pd.d3Object,!0):(K.upArrow||0!=this.currentIndex?K.upArrow||h(K.pd.d3Object,!0):h(K.pd.d3Object,!1),K.upArrow&&this.currentIndex+1==this.commands.length?h(K.pd.d3Object,!1):K.upArrow&&h(K.pd.d3Object,!0))})},W=(K,J,ce="gold",oe="white",xe=!0,ve=!1)=>{let De=(K=>({dd:K||[[0,0],[1,1],[1,-1],[0,0]],line:Qc().x(oe=>(0+oe[0])*o.width).y(oe=>(1-oe[1])*(o.height-24))}))(J),We=Lr.builder().setDatum(De.dd).setD(De.line).setStrokeColor(oe).setStrokeWidth(1).setFillColor(ce).translate(K[0]+0*(ve?C:0),K[1]+1+(ve?w:0)).addEvent(Mi.builder().setName("click").setFunc(()=>{xe?(this.currentIndex+1<this.commands.length&&++this.currentIndex,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1)):(this.currentIndex>0&&--this.currentIndex,this.currentIndex<0&&(this.currentIndex=0)),$(this.commands[this.currentIndex].name),z(),this.onChange()})).setVisible(!0);ve||We.addClass("cursor"),U.push({upArrow:xe,pd:We,shadow:ve}),o.pathes.push(We)},H=(K,J,ce,oe,xe)=>{let ve=[];return K.forEach(De=>{let We=[];We.push(De[0]*J+oe),We.push(De[1]*ce+xe),ve.push(We)}),ve};return f&&(W([0,0],H([[0,0],[.5,1],[1,0],[0,0]],1,A,0,I),b(d,g),b(d,1),!0,!0),W([0,I],H([[0,1],[.5,0],[1,1],[0,1]],1,A,0,0),b(d,g),b(d,1),!1,!0)),W([0,0],H([[0,0],[.5,1],[1,0],[0,0]],1,1*A,0,I),b(d,1),b(u(b(d,1)),g),!0),W([0,I],H([[0,1],[.5,0],[1,1],[0,1]],1,1*A,0,0),b(d,1),b(u(b(d,1)),g),!1),!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}var qo=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2",l[l.Dark3=5]="Dark3",l[l.Light3=6]="Light3"}(qo||(qo={})),qo))();class Tf{constructor(a,o,c,u){this.name=a,this.index=o,this.iWidth=c,this.tag=u,this.rect=null,this.text=null}static builder(){return new Tf("",0,1,null)}setName(a){return this.name=a,this}setTag(a){return this.tag=a,this}setIndex(a){return this.index=a,this}setIWidth(a){return this.iWidth=a,this}}class K8e extends Ta{constructor(a=qo.Default,o="\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e.",c=512,u=512){super(o,c,u),this.theme=a,this.svgImage=null,this.onCommandHandler=null,this.autoClickOnChangeEnabled=!1,this.strokeInvisible=!0,this.useShadow=!0,this.commands=[Tf.builder().setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),Tf.builder().setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),Tf.builder().setName("\u041c\u0438\u0440")],this.currentIndex=0,this.linesOfMonth=7}setShadowEnabled(a){return this.useShadow=a,this}setAutoClickOnChange(a){return this.autoClickOnChangeEnabled=a,this}setCommands(a,o=null){return this.commands=a,this.currentIndex=o?this.commands.indexOf(o):-1,this.currentIndex>=this.commands.length&&(this.currentIndex=this.commands.length-1),this.currentIndex<0&&(this.currentIndex=0),this}setOnCommandHandler(a){return this.onCommandHandler=a,this}setTheme(a){return this.theme=a,this}setSvgImages(a){return this.svgImage=a,this}updateThemeConfig(a){switch(this.theme){case qo.Dark:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case qo.Light:this.strokeInvisible=!0,a.colorBackground="#00364D",a.colorMain="white";break;case qo.Dark2:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="white";break;case qo.Light2:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#00364D";break;case qo.Dark3:this.strokeInvisible=!0,a.colorBackground="#0e161b",a.colorMain="#4AAED9";break;case qo.Light3:this.strokeInvisible=!0,a.colorBackground="white",a.colorMain="#0072A3"}}isLight(){let a=!0;switch(this.theme){case qo.Light3:case qo.Light2:case qo.Light:break;default:a=!1}return a}runOnCommand(a){return this.onCommandHandler&&this.onCommandHandler(a,this),this}generate(a,o,c){this.updateThemeConfig(o);let u=x=>{let C=Wc(x);return C.r<<16|C.g<<8|C.b},d=u(o.colorMain);o.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041c\u0430\u0440\u043a\u0435\u0440\u044b\u041b\u0438\u043d\u0438\u0439=!1;let g=(x,C=1,w)=>{let S=(16711680&x)>>16,D=(65280&x)>>8,T=255&x;C<1&&0==S&&0==D&&0==T&&(S=D=T=255);let A=S*C&255,I=D*C&255,N=T*C&255;if(C<1){let F=u(o.colorBackground);A=(16711680&F)>>16,I=(65280&F)>>8,N=255&F}return qh(A,I,N,w).formatHex()},b=x=>{let C=x.name,w=x.index,S=x.iWidth,D=Math.floor(o.width/7)*S,T=Math.floor(o.height/this.linesOfMonth),A=Yr.builder().setX(D*(w%7)).setY(T*Math.floor(w/7)).setRx(D/S/10).setRy(T/10).setWidth(D).setHeight(T).setFillColor(o.colorBackground).setStrokeWidth(2).setStrokeColor(o.colorMain).addEvent(Mi.builder().setName("click").setFunc(()=>{this.runOnCommand(x)})),I=((x,C)=>{let w=Math.round(o.height/7*.7),S=a.textSizeDirect(x,w,300),D=.7*C,T=o.height/7*.7;return S.width>D&&(w=w*D/S.width,S=a.textSizeDirect(x,w,300)),S.height>T&&(w=w*T/S.height,S=a.textSizeDirect(x,w,300)),S})(C,o.width/7*S),N=Qn.builder().setText(C).setTextAnchor("middle").setFontSize(`${I.height}px`).translate(D*(w%7+.5),T*Math.floor(w/7)+I.height).rotate(0).setColor(g(d)).setStrokeColor(g(d,this.strokeInvisible?1:.3)).setStrokeWidth(1).addEvent(Mi.builder().setName("click").setFunc(()=>{this.runOnCommand(x)})).addClass("cursor");x.rect=A,o.rects.push(x.rect),x.text=N,o.texts.push(x.text)};return this.commands.forEach(x=>{b(x)}),!0}onChange(){this.autoClickOnChangeEnabled&&this.runOnCommand(this.commands[this.currentIndex])}}class xi{constructor(a,o){this.\u0438\u043c\u044f=a,this.\u043a\u043b\u0430\u0441\u0441=o}static \u043d\u043e\u0432\u044b\u0439(){return new xi("",null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a){return this.\u0438\u043c\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(a){return this.\u043a\u043b\u0430\u0441\u0441=a,this}}class _g{constructor(a){this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u0430\u044f(){return new _g(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a){return this.\u0444\u0443\u043d\u043a\u0446\u0438\u044f=a,this}}class xt{constructor(a){this.\u043e\u0431\u044a\u0435\u043a\u0442=a}static \u043d\u043e\u0432\u044b\u0439(){return new xt(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this}}class ne{constructor(a,o,c=null){this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=a,this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=o,this.\u043a\u0430\u0440\u0442\u0430=c}static \u043d\u043e\u0432\u044b\u0439(){return new ne(null,null,null)}static \u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new ne(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(a){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=a,this}\u0435\u0441\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(){return!!this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()}\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return this.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f}\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return this.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u0424\u0443\u043d\u043a\u0446\u0438\u044f"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0424\u0443\u043d\u043a\u0446\u0438\u044f(a){return null!=a&&"object"==typeof a&&a.constructor===_g}\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(a=!1){return!a&&!this.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041c\u0430\u0441\u0441\u0438\u0432"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432(){return Array.isArray(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430(){return this.\u043a\u0430\u0440\u0442\u0430}\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(this.\u043a\u0430\u0440\u0442\u0430)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041a\u0430\u0440\u0442\u0430(a){return null!=a&&"object"==typeof a&&a.constructor===Map}\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u041d\u0443\u043b\u044c(){return null==this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==this.\u043a\u0430\u0440\u0442\u0430}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041e\u0431\u044a\u0435\u043a\u0442(a){return null!=a&&"object"==typeof a&&(a.constructor===ne||a.constructor===Jc)}\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return null!=a&&"object"==typeof a&&a.constructor===xt}\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(){return this.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("number"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0427\u0438\u0441\u043b\u043e(a){return null!=a&&"number"==typeof a}\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(){return this.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("boolean"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0411\u0443\u043b\u0435\u0432\u043e(a){return null!=a&&"boolean"==typeof a}\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443(a){throw new Error(`\u041d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0432\u0438\u0435 \u0442\u0438\u043f\u0430: \u043e\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044f ${a}, \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f: ${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"null"}; \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}.`)}\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(){return this.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()||this.\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041e\u0448\u0438\u0431\u043a\u0443("string"),this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(this)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return null!=a&&"string"==typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0441\u0442\u0440\u043e\u043a\u0430"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f||a.constructor===yg)}static \u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(a){return null!=a&&"string"==typeof a}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a,o=!1,c=!1){var u=ne.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,a,!1);if(null==u&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(u=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a,!1)),null==u&&o)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==u&&c&&(u=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),u}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(a,o=!1,c=!1){var u=ne.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(this,a,!1);if(null==u&&o)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return null==u&&c&&(u=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),u||null}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(a,o,c=!1){var u=null;if(a.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())u=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(o)||null;else if(c)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${o}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return u}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(a,o,c=!1){var u=void 0;if(a.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())u=a.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[o];else if(c)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0438\u043d\u0434\u0435\u043a\u0441 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 "${o}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return u}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a,o=!1){var c=ne.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(this,a,!1);if(null==c&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(c=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a,!1)),null==c&&o)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${a}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof this.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return c}static \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0418\u0437\u041e\u0431\u044a\u0435\u043a\u0442\u0430(a,o,c=!1){var u=void 0;if(a.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())u=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(o);else if(a.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442())u=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442[o];else if(c)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u043e\u043b\u0435 "${o}" \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0442\u0438\u043f\u0430: "${typeof a.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435}".`);return u}\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f(a){if(this.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().forEach((d,f,p)=>{a(f,d)});else if(this.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()){var o=this.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;for(var c in o){var u=o[c],h="object"==typeof u;a(c,ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h?xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(u):u))}}}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a))}}class Jc extends ne{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new Jc(null)}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new Jc(null)}}class yg extends ne{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new yg(null)}static \u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new yg(null)}}class hD extends ne{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new hD(null)}static \u043d\u043e\u0432\u044b\u0439\u0411\u0443\u043b\u0435\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new hD(null)}}class tC extends ne{constructor(a){super(a,null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new tC(null)}static \u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432\u041e\u0431\u044a\u0435\u043a\u0442(){return new tC(null)}}class Xr extends ne{constructor(){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041e\u0431\u044a\u0435\u043a\u0442\u044b"),null,new Map)}static \u043d\u043e\u0432\u044b\u0439(){return new Xr}static \u043d\u043e\u0432\u044b\u0435(){return new Xr}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u044b(a){this.\u043a\u0430\u0440\u0442\u0430=a}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(a,o){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(a,o),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(a)||null}\u0435\u0441\u0442\u044c(a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(a)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c(a){return this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().delete(a)}}let Q8e=(()=>{class l{constructor(o,c,u,h=null,d=0,f=!0){this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=o,this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=c,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=u,this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=h,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=d,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=f,this.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=null,this.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=-1}static \u043d\u043e\u0432\u044b\u0439(){return new l(null,null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o){return this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(o){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(o){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435(o){return this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(o){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(o){return this.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=o,this}\u0435\u0441\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f(o){return null!=this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0435\u0441\u0442\u044c(o)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o,c){null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435&&(this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435=new Xr);let u=null;return null===c?this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0434\u0430\u043b\u0438\u0442\u044c(o):(u=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c),this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c(o,u)),u}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(o){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445=o,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(o){return null==this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435?null:this.\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(o)}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b(){var o=this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++;return this.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=this.\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(),o}\u043d\u043e\u0432\u044b\u0439\u0418\u0434\u0435\u043a\u0441\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439(){return l.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439++}}return l.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439=0,l})();class ze extends ne{constructor(a,o,c){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"),a?ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(a)?a:_g.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a):null),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=o,this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=c}\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return!0}static \u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(){return new ze(null,null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0442\u0440\u043e\u043a\u0430(a)?a:_g.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a)),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(a){return this.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432=a,this}}class dN extends ne{constructor(a,o,c){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"),a),this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=o,this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=c}static \u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(){return new dN(null,!0,!1)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a){return this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(a){return this.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u044f\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(a){return this.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435=a,this}}class Mt{constructor(a,o){this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=a,this.\u0442\u0435\u043b\u043e=o}static \u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434(){return new Mt(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(a){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(a){return this.\u0442\u0435\u043b\u043e=a,this}}class fN{constructor(a){this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=a}static \u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435(){return new fN(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(a){return this.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f=a,this}}class pN{constructor(a,o){this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=a,this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=o}static \u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442(){return new pN(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f(a){return this.\u0438\u043c\u044f\u041f\u043e\u043b\u044f=a,this}}class dD{constructor(a){this.\u043e\u0431\u044a\u0435\u043a\u0442=a}static \u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c(){return new dD(null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this}}class fD{}class pD{}class Tl{constructor(){this.\u043f\u0430\u0440\u0441\u0435\u0440=null,this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b=[],this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438=new Map,this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b=new Xr,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=1,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=0,this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=[],this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!1,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(a){return this.\u043f\u0430\u0440\u0441\u0435\u0440=a,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(){return--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}get \u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length>0}get \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[0]}get \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}get \u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430(){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430]}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(a){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.unshift(a)}\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(){this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.shift()}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a,o,c){if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(a))throw new Error(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${a}".`);return this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.set(a,dN.\u043d\u043e\u0432\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(_g.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(o)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(c)),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a){let o=this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.get(a);if(!o)throw new Error(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f: "${a}".`);return o}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(a,o){var c=a.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;let u=c[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d=null;return c[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?(d=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(c[2]).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(c[3]))),null!=o&&o.set(u,d)):(d=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043f\u043e\u043b\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(fN.\u043d\u043e\u0432\u043e\u0435\u041f\u043e\u043b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f(c[2]))),null!=o&&o.set(u,d)),d}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a){let o=null;for(let g=0;g<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;g++){let m=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[g];if(!(g<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(o=m.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a),o)break;if(m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&m.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var c=m.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],u=c;if(c.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==c.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var h=c.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;u=h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}if(u.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&(o=u.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a),o&&(o=this.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u,a))),o)break}if(m.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432){for(var d=-1,f=0;f<m.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.length;f++)if(m.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432[f].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==a){d=f+1;break}if(d>=0&&(o=m.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[d]),o)break}if(!o&&m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(g+1<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length){g=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length-2;continue}if(this.\u0444\u0443\u043d\u043a\u0446\u0438\u0438.has(a)){var p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[2];o=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length>=2?[...p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.filter((v,_)=>_>=2)]:null))))}}if(o||m.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}return o}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a,o,c){let u=!1;if(a&&a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var h=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),c):h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(h.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()[h.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=c),u=!0}else o&&(this.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(o,c),u=!0);return u}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(a,o){let c=null;for(let h=0;h<this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b.length;h++){let d=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u044b[h];if(!(h<this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430)||d.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445){if(c=d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a),c)break;if(d.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445&&d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length){var u=d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0];if(u.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&u.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().has(a))return u.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(a,o),o;if(c)break}if(c||d.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445)break}}if(null==c&&(c=this.\u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,o)),c)c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435=o;else if(null!=o)throw new Error(`\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c: "${a}".`);return c}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(a){return this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a))}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a){return this.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(this.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a)))}\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(a){if(null==a)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: \u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u043e\u0431\u044a\u0435\u043a\u0442.");return a}\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(a){var o=a;return a.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?o=this.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):a.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?o=this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):a.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()&&(o=this.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().concat([]))),o}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a){var o=null;if(a.\u044d\u0442\u043e\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())if(a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){let h=a;if(h.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()){var c=this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(a.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),u=c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b):h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b;c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430();try{o=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(c,u,h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!1,c.\u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435,!1,null),c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430()}catch(d){throw c.\u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b||this.\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(),d}}else a.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()&&(o=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(a,h.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b,h.\u0438\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432,!0,!0,!1,null))}else o=a;else o=a;return o}\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,o,c,u=!0,h=!0,d=!1){var f=u?this.\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(o):o;return this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(Q8e.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u0435\u043d\u0430\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445(h)),d?(this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.push({\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430:this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430}),this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=1,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=0):this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&++this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430,this}\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a=!1,o=!1){var c=!!a&&this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,u=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c\u0412\u0441\u043f\u043b\u044b\u0442\u0438\u0435\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445;if(this.\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442(),a&&c&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=c),this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&u?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!1:this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430&&this.\u0435\u0441\u0442\u044c\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b=Number.MAX_VALUE),o){var h=this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.pop();this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=h.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435,this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430=h.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u0412\u044b\u0437\u043e\u0432\u0430}else this.\u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430.length&&--this.\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u042d\u0442\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430;return this}\u0432\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a){return null==a?null:a.map(o=>this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(o))}\u0432\u043e\u0437\u0432\u0440\u0430\u0442(a){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430=!0,this}\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a){var o=null;if(a&&a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var c=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?o=c.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()&&(o=c.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430(c.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}else o=a;return o}\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a,o){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0437\u0430\u0445\u0432\u0430\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(pN.\u043d\u043e\u0432\u044b\u0439\u0417\u0430\u0445\u0432\u0430\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f\u041f\u043e\u043b\u044f("string"!=typeof o?o:this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o))))}\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a){return this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(dD.\u043d\u043e\u0432\u044b\u0439\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a)))}\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(a){var o,c=a.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;if(!(c instanceof dD))throw new Error(`\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u043c. \u0418\u043c\u044f \u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430: '${null===(o=a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)||void 0===o?void 0:o.\u0438\u043c\u044f}'.`);return c.\u043e\u0431\u044a\u0435\u043a\u0442}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(){var a=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442,o=a.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439,c=!1,u=null;try{if(a.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()){var h=a.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432();if(a.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<h.length){let d=h[a.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b++];c=a.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043e\u043c\u0430\u043d\u0434\u044b<h.length,a.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d)}}else a.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a.\u043a\u043e\u043c\u0430\u043d\u0434\u0430}catch(d){u=d}if(o!==a.\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439&&(c=!0),u)throw u;return c}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(a,o,c,u,h,d,f){var p=null;if(a.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f())try{var g=a.\u043a\u0430\u043a\u0424\u0443\u043d\u043a\u0446\u0438\u044f().\u0444\u0443\u043d\u043a\u0446\u0438\u044f;this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,o,c,u,h,d),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=g(this,this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b),f&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=f()),p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d)}catch(m){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d),m}else if(a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043a\u043e\u043c\u0430\u043d\u0434\u0430"===a.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f)try{this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,o,c,u,h,d),this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a),f&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=f()),p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d)}catch(m){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d),m}else if(a.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())try{for(this.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(a,o,c,!0,h,d);this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(););f&&(this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=f()),p=this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442,this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d)}catch(m){throw this.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,d),m}else p=this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a),f&&(p=f());return null==p&&(p=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),p}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,o){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,o),this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a,o){return this.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e(a)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(){return Tl.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),Tl.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(this),this}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){let o=d=>d&&d.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f()?d.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():d,c=d=>a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d)),h=(d,f,p)=>{var g=c(f[1]),m=null,v=null;m=f[0].\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?c(f[0]):(d=>a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(d)))((v=c(f[0])).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());var _=p(o(m).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,o(g).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);if(g=("string"==typeof _?d.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430"):ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_),m&&m.\u044d\u0442\u043e\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f())m.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g);else if(v)d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g);else{let y=f[0].\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;y.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(y.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g)}return g};a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",(d,f)=>null,!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u0440\u043e\u0441\u0438\u0442\u044c",(d,f)=>{throw d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[0].\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(d,f)=>{var p=c(f[1]);if(!d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(f[0],null,p)){var m=c(f[0]);d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(null,m.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),p)}return p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(d,f)=>h(d,f,(p,g)=>p+g),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(d,f)=>h(d,f,(p,g)=>p-g),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(d,f)=>h(d,f,(p,g)=>p*g),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(d,f)=>h(d,f,(p,g)=>p/g),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(d,f)=>{var p=c(f[0]),g=d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());if(!g)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e: "${p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}".`);return g&&g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f?g.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442():g},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0431\u044a\u0435\u043a\u0442",(d,f)=>c(f[0]),!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0430\u0441\u0441\u0438\u0432",(d,f)=>{var p=c(f[0]);return d.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([...p.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(m=>d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m)))])},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430",(d,f)=>{var p=c(f[0]),g=c(f[1]);return d.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p,g)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u043a\u0430",(d,f)=>{var p=c(f[0]);return d.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(d,f)=>{var p=c(f[0]),g=d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=null;if(g&&g.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var v=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g);m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(g,null,m)}else if(g&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var _=g.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1),g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m)}return m},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(d,f)=>{var g=c(f[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(c(f[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()):f[0],m=null;if(g&&g.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var v=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g);m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(g,null,ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}else if(g&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var _=g.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();m=_,g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+1))}return m},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(d,f)=>{var p=c(f[0]),g=d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=null;if(g&&g.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var v=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g);m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(g,null,m)}else if(g&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var _=g.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m)}return m},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442",(d,f)=>{var p=c(f[0]),g=d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=null;if(g&&g.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var v=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g);m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(g,null,ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}else if(g&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var _=g.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();m=_,g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1))}return m},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c",(d,f)=>{var p=c(f[0]),g=d.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=null;if(g&&g.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()){var v=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g);m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0445\u0432\u0430\u0442\u0418\u043b\u0438\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(g,null,m)}else if(g&&"\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f"===g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var _=g.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();m=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-1),g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m)}return m},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()*c(f[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0430\u0441\u0442\u043d\u043e\u0435",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/c(f[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u043e\u0434\u0443\u043b\u044c",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%c(f[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0443\u043c\u043c\u0430",(d,f)=>{var p=c(f[0]),g=c(f[1]);return p.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+g.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):d.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435+g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()-c(f[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0440\u0430\u0432\u043d\u043e",(d,f)=>{var p=c(f[0]),g=c(f[1]);return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!((!p||null==p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==p.\u043a\u0430\u0440\u0442\u0430)&&(!g||null==g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==g.\u043a\u0430\u0440\u0442\u0430)||p&&g&&(null!=p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(p.\u043a\u0430\u0440\u0442\u0430==g.\u043a\u0430\u0440\u0442\u0430||p.\u043a\u0430\u0440\u0442\u0430&&g.\u043a\u0430\u0440\u0442\u0430&&0==p.\u043a\u0430\u0440\u0442\u0430.size&&0==g.\u043a\u0430\u0440\u0442\u0430.size))))},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(d,f)=>{var p=c(f[0]),g=c(f[1]);return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!((!p||null==p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==p.\u043a\u0430\u0440\u0442\u0430)&&(!g||null==g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==g.\u043a\u0430\u0440\u0442\u0430)||p&&g&&(null!=p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435==g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||null==p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&null==g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&(p.\u043a\u0430\u0440\u0442\u0430==g.\u043a\u0430\u0440\u0442\u0430||p.\u043a\u0430\u0440\u0442\u0430&&g.\u043a\u0430\u0440\u0442\u0430&&0==p.\u043a\u0430\u0440\u0442\u0430.size&&0==g.\u043a\u0430\u0440\u0442\u0430.size))))},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e",(d,f)=>{var p=c(f[0]),g=c(f[1]);return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435===g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&p.\u043a\u0430\u0440\u0442\u0430===g.\u043a\u0430\u0440\u0442\u0430)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e",(d,f)=>{var p=c(f[0]),g=c(f[1]);return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!==g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435||p.\u043a\u0430\u0440\u0442\u0430!==g.\u043a\u0430\u0440\u0442\u0430)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>c(f[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<c(f[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>=c(f[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c(f[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<=c(f[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435",(d,f)=>{var p=c(f[0]),g=c(f[1]);return p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435<g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(-1):p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435>g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1):ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f",(d,f)=>{var p=c(f[0]),g="\u043d\u0443\u043b\u044c";return null==p?g="\u043d\u0443\u043b\u044c":p.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?g="\u0444\u0443\u043d\u043a\u0446\u0438\u044f":p.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?g="\u0447\u0438\u0441\u043b\u043e":p.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?g="\u0441\u0442\u0440\u043e\u043a\u0430":p.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?g="\u043c\u0430\u0441\u0441\u0438\u0432":p.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?g="\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442":p.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?g="\u0431\u0443\u043b\u0435\u0432\u043e":(p.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()||p.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430())&&(g="\u043e\u0431\u044a\u0435\u043a\u0442"),yg.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435",(d,f)=>{var p=c(f[0]),g=p&&(p.\u044d\u0442\u043e\u041a\u0430\u0440\u0442\u0430()&&p.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().size||p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);return hD.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!g)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438\u043b\u0438",(d,f)=>{var p=c(f[0]);return p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435?p:c(f[1])},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0438",(d,f)=>{if(!c(f[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)return d.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);var g=c(f[1]);return d.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!g.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u043d\u0435\u0440\u0433\u0438\u0447\u043d\u043e\u0435 \u0438\u043b\u0438",(d,f)=>{var p=c(f[0]),g=c(f[1]);return p||g||ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.min(+c(f[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+c(f[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",(d,f)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.max(+c(f[0]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435,+c(f[1]).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)),!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0435\u0441\u043b\u0438",(d,f)=>{var p=c(f[0]),g=f[1],m=f[2],v=p.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?g:m;return null==v?null:d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438",(d,f)=>{var p=c(f[0]),g=f[1],m=f[2],v=p.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?g:m;return null==v?null:d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u043e\u043a\u0430",(d,f)=>{var p=!1,g=null;try{var m=f[0];do{if(m&&(p=!!d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435),!p)break;var v=f[1];if(v){try{g=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null)}catch(_){if(_&&_.constructor!==pD)throw _}if(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}}while(p)}catch(_){if(_&&_.constructor!==fD)throw _}return g},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u0435\u043b\u0430\u0442\u044c",(d,f)=>{var p=!1,g=null;try{var m=f[0],v=f[1];do{if(v){try{g=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null)}catch(_){if(_&&_.constructor!==pD)throw _}if(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}m&&(p=!!d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}while(p)}catch(_){if(_&&_.constructor!==fD)throw _}return g},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0446\u0438\u043a\u043b",(d,f)=>{var p=!0,g=null,m=f[0],v=f[1],_=f[2],y=f[3];let b=()=>{m&&(p=!!c(m).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435);try{for(;p;){if(v){try{g=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null)}catch(x){if(x&&x.constructor!==pD)throw x}if(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u0430)break}y&&d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(y,null,null,!0,!1,!1,null),m&&(p=!!d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(m).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}}catch(x){if(x&&x.constructor!==fD)throw x}return g};return _?d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(_,null,null,!0,!1,!1,b):b(),g},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c",(d,f)=>{var p=null,g=f[0],m=f[1],v=f[2];try{g&&(p=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null))}catch(_){if(v)try{d.\u043d\u0430\u0447\u0430\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(null,null,null,!0,!1,!1),d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e\u0418\u0437\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430(m.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),ne.\u044d\u0442\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0421\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(_)?_:ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(""+_)),d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(v,null,null,!0,!1,!1,null),d.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),p=d.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u0442\u0435\u043a\u0443\u0449\u0438\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442}catch(y){throw d.\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438(!0,!1),y}}return p},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043b\u0430\u0441\u0441",(d,f)=>{var p=f[0].\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(),g=d.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u043b\u0430\u0441\u0441");g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=Jc.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442();var m=g.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();return p.forEach(v=>{d.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(v,m)}),g},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",(d,f)=>d.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f[0]),!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u0435\u0440\u043d\u0443\u0442\u044c",(d,f)=>{var p=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(f[0]);return d.\u0432\u043e\u0437\u0432\u0440\u0430\u0442(p),p},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043a\u043e\u043f\u0438\u044f",(d,f)=>{var p=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(f[0]);return null==p?null:d.\u043a\u043e\u043f\u0438\u044f\u041e\u0431\u044a\u0435\u043a\u0442\u0430(p)},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u044d\u0442\u043e",(d,f)=>d.\u044d\u0442\u043e\u0442\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0412\u044b\u0437\u043e\u0432\u0430.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0],!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c",(d,f)=>{throw new fD},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c",(d,f)=>{throw new pD},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e",(d,f)=>{var g=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(f[0]),m=null;if(g&&g.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var v=g.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442.\u043e\u0431\u044a\u0435\u043a\u0442;m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(d.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(v),null,null,!1,!1,!1,null)}return m},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0432\u044b\u0437\u0432\u0430\u0442\u044c",(d,f)=>{var p=!1;do{p=!1;var m=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f[0],null,null,!0,!1,!1,null),v=null,_=null,y=null,b=null;if(m&&m.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&"\u0437\u0430\u0445\u0432\u0430\u0442"==m.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f&&(b=m.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442).\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430&&b.\u0438\u043c\u044f\u041f\u043e\u043b\u044f){y=b.\u0438\u043c\u044f\u041f\u043e\u043b\u044f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();var x=b.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(y);_=b.\u043e\u0431\u044a\u0435\u043a\u0442\u0417\u0430\u0445\u0432\u0430\u0442\u0430,m=x}var C=!1;if(m&&m.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f)if("\u043a\u043b\u0430\u0441\u0441"===m.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){C=!0,(v=d.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442")).\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441=m;var w=m;if(w&&w.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f&&w.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441&&(w.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u0442\u044c\u0412\u0441\u0435\u041f\u043e\u043b\u044f((V,$)=>{if("\u043f\u043e\u043b\u0435"==$.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){var q=$.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442,L=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(q.\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u0418\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0449\u0435\u0433\u043e\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f,null,null,!0,!1,!1,null));v.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(V,L)}}),w.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u043a\u043b\u0430\u0441\u0441.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"))){var D=[d.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v,"\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)];for(let V=2;V<d.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length;V++)D.push(d.\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[V]);var T=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(D);d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(T)}}else if("\u043c\u0435\u0442\u043e\u0434"==m.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f){C=!0;var A=f[1].\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e(),I=f[2],N=[_||ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()];if(I)for(let V=2;V<f.length;V++){var F=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f[V],null,null,!0,!1,!1,null);N.push(F)}var B=m.\u043a\u0430\u043a\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u043e\u0431\u044a\u0435\u043a\u0442;v=d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(B.\u0442\u0435\u043b\u043e,N,B.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432(!0),!1,A,A,null)}if(!C&&!p)throw d.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y?`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${y}" \u0438\u0437 ${""+b}.`:`\u041d\u0435 \u043c\u043e\u0433\u0443 \u0432\u044b\u0437\u0432\u0430\u0442\u044c "${m?m.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?m.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:m.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}".`)}while(p);return v},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e",(d,f)=>{var g=f[1],m=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(f[0],null,null,!0,!1,!1,null)),_=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(g,null,null,!0,!1,!1,null));return d.\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m,_)},!1)}\u043d\u043e\u0432\u044b\u0439\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return Jc.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e")))}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return Jc.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a))}\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430(a){return yg.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430")))}\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432(a){return tC.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432")))}\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414(a){return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043b\u0430\u0441\u0441(this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c("\u0410\u0421\u0414")))}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){var o=a.\u043d\u043e\u0432\u044b\u0439\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e");a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",(c,u)=>o,!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0442\u043e\u043f",(c,u)=>(c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]),u.length?u[0]:ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()),!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[1]);return o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d),d},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]);return o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[1]);return o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d),d},!1),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",(c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(u[0]);return o.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())},!1)}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b(){{let a=Jc.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),o=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0434\u043b\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]);return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().length)}))))),o.set("\u043f\u043e\u0434\u0441\u0442\u0440\u043e\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),f=u.length>2?c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[2]):null;return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().substr(d?d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():0,f?f.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e():void 0))}))))),o.set("\u0440\u0430\u0437\u0431\u0438\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),f=h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(new RegExp(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()));return c.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.filter(g=>null!=g).map(g=>c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g.trim())))}))))),o.set("\u0432\u0435\u0440\u0445\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=u[0];return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toUpperCase())}))))),o.set("\u043d\u0438\u0436\u043d\u0438\u0439\u0420\u0435\u0433\u0438\u0441\u0442\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=u[0];return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().toLowerCase())}))))),o.set("\u0432\u0427\u0438\u0441\u043b\u043e",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=u[0];return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(+h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}))))),o.set("\u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=u[0];return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().trim())}))))),o.set("\u0438\u043d\u0434\u0435\u043a\u0441\u0414\u043b\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=u[0],d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().indexOf(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}))))),o.set("\u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c\u0412\u0441\u0435",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{for(var h=u[0],d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[2]),p=h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),g=new RegExp(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p.replace(g,f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());m!=p;)m=(p=m).replace(g,f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0438\u043d\u0434\u0435\u043a\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}))))),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0441\u0442\u0440\u043e\u043a\u0430",a)}{let a=Jc.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),o=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0434\u043b\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]);return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().length)}))))),o.set("\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]),d=u.length>1?c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]):null;return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(p=>""+p.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435).join(d?d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""))}))))),o.set("\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(d),h}))))),o.set("\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0418\u0437\u041c\u0430\u0441\u0441\u0438\u0432\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return h.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(...d.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432()),h}))))),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u043c\u0430\u0441\u0441\u0438\u0432",a)}{let a=Jc.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),o=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return console.log(d?d.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:JSON.stringify(d,null,2)),h}))))),o.set("\u043e\u0431\u044a\u0435\u043a\u0442\u0418\u043c\u0435\u0435\u0442\u041f\u043e\u043b\u0435",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]),f=h&&h.\u043a\u0430\u0440\u0442\u0430&&h.\u043a\u0430\u0440\u0442\u0430.has(d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return f&&(f=!0),c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!f)}))))),o.set("\u0432\u0440\u0435\u043c\u044f\u0412\u041c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=Date.now();return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h)}))))),o.set("\u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c\u0412\u0440\u0435\u043c\u044f\u0412\u0421\u0442\u0440\u043e\u043a\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()%1e3,f=Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()/1e3),p=Math.floor(f/60);f-=60*p;var g=Math.floor(p/60);p-=60*g;var m=(v,_)=>{for(var y=""+v;y.length<_;)y="0"+y;return y};return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`${m(g,2)}:${m(p,2)}:${m(f,2)}.${m(d,3)}`)}))))),o.set("\u043c\u0438\u043d\u0438\u043c\u0443\u043c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[2]);return h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()<=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?h:d}))))),o.set("\u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[2]);return h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()>=d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()?h:d}))))),o.set("\u043e\u043a\u0440\u0443\u0433\u043b\u0438\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.round(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("floor",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.floor(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("ceil",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.ceil(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("sqrt",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sqrt(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("pow",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[2]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.pow(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("cos",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.cos(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("sin",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.sin(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("atan2",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[2]);return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.atan2(h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()))}))))),o.set("\u0410\u0421\u0414",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=u.length>1?c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]):null,d=c.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414");return null!=h&&d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),d}))))),o.set("\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let d=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d[0])}))))),o.set("\u0444\u0430\u0431\u0440\u0438\u043a\u0430\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{if(!this.\u043f\u0430\u0440\u0441\u0435\u0440)throw"\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0441\u0435\u0440.";let h=this.\u043f\u0430\u0440\u0441\u0435\u0440.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n                        \u0440\u0430\u0437\u0431\u043e\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 \u043a\u043b\u0430\u0441\u0441 {\n                          \u0438\u043d\u043b\u0430\u0439\u043d\u0417\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439)\n                          {\n                            \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                              \u0430\u0441\u0434 = 0;\n                              \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                              \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                                \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                                \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                              }\n                            };\n                            \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u0435\u043b\u044c = \u043a\u043b\u0430\u0441\u0441 {\n                              \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043a\u043e\u043f\u0438\u044f, \u0441\u043f\u0438\u0441\u043e\u043a) {\n                                \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f = \u043a\u043b\u0430\u0441\u0441 {\n                                  \u0430\u0441\u0434 = 0;\n                                  \u0438\u043d\u0434\u0435\u043a\u0441 = 0;\n                                  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0430\u0441\u0434, _\u0438\u043d\u0434\u0435\u043a\u0441) {\n                                    \u0430\u0441\u0434 = _\u0430\u0441\u0434;\n                                    \u0438\u043d\u0434\u0435\u043a\u0441 = _\u0438\u043d\u0434\u0435\u043a\u0441;\n                                  }\n                                };\n                                \u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 = \u0430\u0441\u0434.\u0442\u0438\u043f();\n                                \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = \u0430\u0441\u0434.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432();\n                                if (\u0442\u0438\u043f\u041e\u0431\u044a\u0435\u043a\u0442\u0430 === '\u043a\u043e\u043c\u0430\u043d\u0434\u0430'){\n                                  if (\u0430\u0441\u0434.\u043a\u043e\u043c\u0430\u043d\u0434\u0430() === '\u043a\u043e\u043f\u0438\u044f') {\n                                    \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c(\u043a\u043e\u043f\u0438\u044f);\n                                    \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 = 0;\n                                  }\n                                }\n                                for(i = 0; i < \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432; ++i) {\n                                 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 = \u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(i);\n                                 \u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, i),  \u0441\u043f\u0438\u0441\u043e\u043a);\n                                }\n                              }\n                            };\n                            //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0437\u0430\u043c\u0435\u043d\u0430\u041a\u043e\u043f\u0438\u0439 = \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438;...');\n                            \u0430\u0441\u0434 = \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0410\u0421\u0414(\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0417\u0430\u043c\u0435\u043d\u044b\u041a\u043e\u043f\u0438\u0439);\n                            //\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c\u0410\u0421\u0414(\u0430\u0441\u0434, '');\n                            \u0441\u043f\u0438\u0441\u043e\u043a = [];\n                            \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u0435\u043b\u044c.\u0441\u043f\u0438\u0441\u043e\u043a\u041a\u043e\u043f\u0438\u0439(\u0430\u0441\u0434, \u043f\u0430\u043c\u044f\u0442\u044c\u041a\u043e\u043f\u0438\u044f(\u0430\u0441\u0434, 0-1), \u0441\u043f\u0438\u0441\u043e\u043a);\n                            //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0414\u043b\u0438\u043d\u0430 \u0441\u043f\u0438\u0441\u043a\u0430: ' + \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430());\n                            for(i = 0; i < \u0441\u043f\u0438\u0441\u043e\u043a.\u0434\u043b\u0438\u043d\u0430(); ++i){\n                              \u043f\u0430\u0440\u0430 = \u0441\u043f\u0438\u0441\u043e\u043a[i];\n                              //\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u043f\u0430\u0440\u0430: [' + \u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441 + '];');\n                              \u0440\u0435\u0437 = \u0412\u042b\u0417\u041e\u0412 \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c();\n                              \u043f\u0430\u0440\u0430.\u0430\u0441\u0434.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440(\u043f\u0430\u0440\u0430.\u0438\u043d\u0434\u0435\u043a\u0441, \u0440\u0435\u0437);\n                            }\n                          }\n                        }");return this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[0])}))))),o.set("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043eHttp",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=pageLoadedFrom+h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();let f=new XMLHttpRequest;f.open("GET",d,!1);var p=null;try{if(f.send(),200!=f.status)throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${f.status}: ${f.statusText}`;p=c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f.response)}catch(g){throw`\u041e\u0448\u0438\u0431\u043a\u0430 ${f.status}: ${f.statusText}`}return p}))))),o.set("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),d=this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c(h.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());return null==d&&(d=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)),d}))))),o.set("\u0441\u0442\u043e\u043f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>u.length>1?u[1]:u[0]))))),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e",a)}{let a=Jc.\u043d\u043e\u0432\u044b\u0439\u041f\u0440\u043e\u0441\u0442\u043e\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),o=a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();o.set("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]);return c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d)),h}))))),o.set("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]);return c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442())}))))),o.set("\u0435\u0441\u0442\u044c\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[0]);return c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(u[1]),c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0411\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!!c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h).\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)}))))),o.set("\u0442\u0438\u043f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d));return f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043c\u0430\u043d\u0434\u0430"):f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c"):f.\u044d\u0442\u043e\u0417\u0430\u0445\u0432\u0430\u0442()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u0445\u0432\u0430\u0442"):f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u0430"):f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043c\u0430\u0441\u0441\u0438\u0432"):f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0447\u0438\u0441\u043b\u043e"):f.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u0411\u0443\u043b\u0435\u0432\u043e()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0431\u0443\u043b\u0435\u0432\u043e"):f.\u044d\u0442\u043e\u041d\u0430\u0442\u0438\u0432\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442"):f.\u044d\u0442\u043e\u0424\u0443\u043d\u043a\u0446\u0438\u044f()?c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0444\u0443\u043d\u043a\u0446\u0438\u044f"):c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")}))))),o.set("\u043a\u043e\u043c\u0430\u043d\u0434\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d)),p="";return f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430()&&(p=f.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)}))))),o.set("\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();return d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()?c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d)):c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e")}))))),o.set("\u0438\u043c\u044f\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e");var f=c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d));if(f.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430())return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u041c\u0430\u0441\u0441\u0438\u0432())return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e())return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u041e\u0431\u044a\u0435\u043a\u0442())return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f&&f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?f.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"");if(f.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c()){var p=c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(f);return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p&&p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f?p.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f.\u0438\u043c\u044f:"")}return c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}))))),o.set("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]).\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442();if(!d.\u044d\u0442\u043e\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c())return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var f=c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(d);if(!f||!f.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0);var p=f;return c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.length:0)}))))),o.set("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var g=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]),h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1])),d=c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(g.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(d instanceof ze))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");var p=d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b?d.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[h.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]:null;return g=c.\u043d\u043e\u0432\u044b\u0439\u0410\u0421\u0414("\u0410\u0421\u0414"),null!=p&&g.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u041d\u0430\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)),g}))))),o.set("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]),d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1])),f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2])),p=c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442());if(!(p instanceof ze))throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");return p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b&&(p.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()]=f),f}))))),o.set("\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[0]),d=c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044f(h.\u043a\u0430\u043a\u041e\u0431\u044a\u0435\u043a\u0442()));if(!d.\u044d\u0442\u043e\u041a\u043e\u043c\u0430\u043d\u0434\u0430())throw new Error("\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.");return c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(d)}))))),this.\u043f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c("\u0410\u0421\u0414",a)}}}class gN{constructor(a,o){this.op=a,this.exp=o}static builder(){return new gN("",null)}setExp(a){return this.exp=a,this}setOp(a){return this.op=a,this}\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(a){return class J8e{static \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(a){for(var o="",c=!1,u=0;u<a.length;++u){var h=a.charAt(u);if(c){switch(h){case"\\":o+="\\";break;case'"':o+='"';break;case"'":o+="'";break;case"r":o+="\r";break;case"n":o+="\n";break;case"t":o+="\t";break;default:o+=h}c=!1}else(c="\\"==h)||(o+=h)}return o}}.\u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443(a)}done(){let a=this.exp;switch(this.op){case"!":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0442\u0440\u0438\u0446\u0430\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"++i":{let o=this.exp,c=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==o.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?o=o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([o,c])}break;case"i++":{let o=this.exp,c=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==o.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?o=o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([o,c])}break;case"--i":{let o=this.exp,c=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==o.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?o=o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([o,c])}break;case"i--":{let o=this.exp,c=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==o.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()?o=o.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]:(a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),c.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u0441\u0442\u0444\u0438\u043a\u0441\u043d\u044b\u0439 \u0434\u0435\u043a\u0440\u0435\u043c\u0435\u043d\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([o,c])}break;case";":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u043e\u043c\u0430\u043d\u0434\u0430")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438");break;case"{;}":case"number":case"\u043f\u043e\u043b\u044f":a=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp);break;case"(,)":break;case"{,}":{let o=[];this.exp&&this.exp.forEach(c=>{o.push(c)}),a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o)]),a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([a])}break;case"object":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043e\u0431\u044a\u0435\u043a\u0442").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"array":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"string":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([yg.\u043d\u043e\u0432\u044b\u0439\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u044d\u0442\u043e":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u044d\u0442\u043e");break;case"\u043d\u0443\u043b\u044c":a=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null);break;case"\u0438\u0441\u0442\u0438\u043d\u0430":a=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0);break;case"\u043b\u043e\u0436\u044c":a=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1);break;case"id":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u0431\u0440\u043e\u0441\u0438\u0442\u044c":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u0440\u043e\u0441\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp)]);break;case"\u043a\u043b\u0430\u0441\u0441":{let o=[];this.exp&&this.exp.forEach(c=>{o.push(c)}),a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043b\u0430\u0441\u0441").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o)])}break;case"[,]":a=tC.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.exp?this.exp:[]);break;case"#":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u0435\u0440\u043d\u0443\u0442\u044c":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u0435\u0440\u043d\u0443\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp?this.exp:ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(null)]);break;case"\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c");break;case"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c");break;case"\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"\u0432\u044b\u0437\u043e\u0432":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;case"{{{?}}}":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043a\u043e\u043f\u0438\u044f").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.exp]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0443\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f "${this.op}".`)}return a}}class mN{constructor(a,o,c){this.left=a,this.op=o,this.right=c}static builder(){return new mN(null,"",null)}setLeft(a){return this.left=a,this}setRight(a){return this.right=a,this}setOp(a){return this.op=a,this}done(){let a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430(),o=c=>{let u=this.left;"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"==u.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&typeof u.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0].\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u0430()&&(u=u.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b[0]),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([u,this.right])};switch(this.op){case"(.)":{let c=this.right?this.right:[];c.unshift(this.left,ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"((.))":{let c=this.right?this.right:[];c.unshift(this.left,ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1)),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"[.]":a=ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"=":o("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+=":o("\u0441\u043b\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"-=":o("\u0432\u044b\u0447\u0435\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"*=":o("\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"/=":o("\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c");break;case"+":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"-":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0437\u043d\u043e\u0441\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"*":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"/":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0447\u0430\u0441\u0442\u043d\u043e\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"%":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u043e\u0434\u0443\u043b\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"||":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"&&":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"==":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!=":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"===":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"!==":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0442\u0440\u043e\u0433\u043e \u043d\u0435 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case">=":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"<=>":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"?":{let u=[...this.right];u.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u043e\u043a\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(u)}break;case"\u0435\u0441\u043b\u0438":{let c=this.right?this.right:[];c.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0435\u0441\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"\u043f\u043e\u043a\u0430":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0434\u0435\u043b\u0430\u0442\u044c":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u0435\u043b\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,this.right]);break;case"\u0446\u0438\u043a\u043b":{let c=this.right?this.right:[];c.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0446\u0438\u043a\u043b").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c":{let c=this.right?this.right:[];c[0]=ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[0]),c.unshift(this.left),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c)}break;case"\u043c\u0435\u0442\u043e\u0434":{let c=this.right?this.right:[];c[0]&&c[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435&&c[0].\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[0].\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.map(u=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u.name))),c.unshift(...[this.left,!0].map(u=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u))),a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(c.map(u=>u||ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u)))}break;case"\u043f\u043e\u043b\u0435":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(this.left).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.left),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!1),this.right]);break;case".":a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u044e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([this.left,ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.right)]);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u0431\u0438\u043d\u0430\u0440\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f: "${this.op}".`)}return a}}class bg{constructor(){this.\u0434\u0432\u0438\u0436\u043e\u043a=new Tl,this.\u0442\u0435\u043a\u0441\u0442="",this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430=0,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(this)}\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){return this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430<this.\u0442\u0435\u043a\u0441\u0442.length}\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b(){if(!this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b())throw new Error("\u0412\u0441\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u044b. \u041a\u043e\u043d\u0435\u0446 \u0442\u0435\u043a\u0441\u0442\u0430.");return this.\u0442\u0435\u043a\u0441\u0442[++this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430]}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c(a){for(this.\u0442\u0435\u043a\u0441\u0442=a,this.\u043f\u043e\u0437\u0438\u0446\u0438\u044f\u0422\u0435\u043a\u0441\u0442\u0430=0;this.\u0435\u0441\u0442\u044c\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b();)this.\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0421\u0438\u043c\u0432\u043e\u043b()}\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(a){for(var o={BinOpBuilder:()=>mN.builder(),UnOpBuilder:()=>gN.builder()},c=null;null==c;)try{return universalParserStatic.parse(a,{builder:o})}catch(u){c=u}throw c}}class Df{constructor(a,o){this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this.\u0438\u043c\u044f=o}static \u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(){return new Df(null,"")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(a){return this.\u043e\u0431\u044a\u0435\u043a\u0442=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a){return this.\u0438\u043c\u044f=a,this}}class gD{constructor(a,o,c,u,h,d,f=0,p=!0,g=1,m=1){this.d3Config=a,this.d3Svc=o,this.\u0434\u0432\u0438\u0436\u043e\u043a=c,this.\u043f\u0430\u043c\u044f\u0442\u044c=u,this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=h,this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=d,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=f,this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=p,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=g,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=m}static \u043d\u043e\u0432\u0430\u044f(){return new gD}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let a=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==a?1:a.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(a){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(a){return this.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(a,o){return this.d3Config.width=a,this.d3Config.height=o,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(a){return this.d3Config=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(a){return this.d3Svc=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(a){return this.\u0434\u0432\u0438\u0436\u043e\u043a=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(a){return this.\u043f\u0430\u043c\u044f\u0442\u044c=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(a){return this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434=a,this}\u0437\u0430\u043f\u0443\u0441\u043a(a=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0437\u0430\u043f\u0443\u0441\u043a"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(a.map(c=>c.\u043e\u0431\u044a\u0435\u043a\u0442)),[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(a.map(c=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u0438\u043c\u044f))),!0,!0,!1,null))}\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435(a=[]){return this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434),[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),this.\u043f\u0430\u043c\u044f\u0442\u044c,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435"),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b),this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b)].concat(a.map(c=>c.\u043e\u0431\u044a\u0435\u043a\u0442)),[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0440\u0435\u0436\u0438\u043c"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b")].concat(a.map(c=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c.\u0438\u043c\u044f))),!0,!0,!1,null))}}class nC{constructor(a=0,o=0){this.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=a,this.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=o,this.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b=new Map,this.\u0441\u043e\u0431\u044b\u0442\u0438\u044f=new Map}static \u043d\u043e\u0432\u044b\u0439(){return new nC}}class vN{constructor(){this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b=[nC.\u043d\u043e\u0432\u044b\u0439()],this.d3Element=null,this.d3ElementTransition=null}static \u043d\u043e\u0432\u0430\u044f(){return new vN}get \u043f\u0435\u0440\u0435\u0445\u043e\u0434(){return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b[this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.length-1]}transition(){return this.d3Element?this.d3ElementTransition=this.d3Element.transition():this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(nC.\u043d\u043e\u0432\u044b\u0439()),this}resetTransition(){return this.d3Element?this.d3ElementTransition=null:this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.push(nC.\u043d\u043e\u0432\u044b\u0439()),this}duration(a){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.duration(a)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c=a,this}delay(a){return this.d3Element?this.d3ElementTransition&&(this.d3ElementTransition=this.d3ElementTransition.delay(a)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430=a,this}attr(a,o){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.attr(a,o):this.d3Element=this.d3Element.attr(a,o):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.set(a,o),this}text(a){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.text(a):this.d3Element=this.d3Element.text(a):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0442\u0435\u043a\u0441\u0442=a,this}event(a,o){return this.d3Element?this.d3ElementTransition?this.d3ElementTransition=this.d3ElementTransition.on(a,o(this.d3Element)):this.d3Element=this.d3Element.on(a,o(this.d3Element)):this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.set(a,o),this}apply(a){this.d3Element=a;let o=this.d3Element;return this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b.forEach((c,u)=>{u&&(o=o.transition().duration(c.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c),c.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430&&(o=o.delay(c.\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430))),c.\u0441\u043e\u0431\u044b\u0442\u0438\u044f.forEach((h,d,f)=>{o=o.on(d,h(o))}),c.\u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b.forEach((h,d,f)=>{o=o.attr(d,h)}),c.\u0442\u0435\u043a\u0441\u0442&&(o=o.text(c.\u0442\u0435\u043a\u0441\u0442)),u||(this.d3Element=o)}),this}}class mD extends ne{constructor(a,o){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0422\u0435\u043a\u0441\u0442 D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u0422\u0435\u043a\u0441\u0442=o,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u0442\u0435\u043a\u0441\u0442(){return this.\u043f\u0422\u0435\u043a\u0441\u0442}set \u0442\u0435\u043a\u0441\u0442(a){this.\u043f\u0422\u0435\u043a\u0441\u0442=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new mD(null,null)}static \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(){return new mD(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u0442\u0435\u043a\u0441\u0442=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0442\u0435\u043a\u0441\u0442",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.text(c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(c.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1])).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("x",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u0442\u0435\u043a\u0441\u0442.attr("y",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0440\u0430\u0437\u043c\u0435\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-size",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0436\u0438\u0440\u043d\u044b\u0439",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("font-weight",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300),this)))))),a.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439\u042f\u043a\u043e\u0440\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.attr("text-anchor",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this))))));let o=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u0442\u0435\u043a\u0441\u0442.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([Df.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",o("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",o("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u0442\u0435\u043a\u0441\u0442.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u0442\u0435\u043a\u0441\u0442.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u0442\u0435\u043a\u0441\u0442.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class vD extends ne{constructor(a,o){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041a\u0440\u0443\u0433 D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u041a\u0440\u0443\u0433=o,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u0440\u0443\u0433(){return this.\u043f\u041a\u0440\u0443\u0433}set \u043a\u0440\u0443\u0433(a){this.\u043f\u041a\u0440\u0443\u0433=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new vD}static \u043d\u043e\u0432\u044b\u0439\u041a\u0440\u0443\u0433(){return new vD}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u043a\u0440\u0443\u0433=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0440\u0430\u0434\u0438\u0443\u0441",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("r",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("cx",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043a\u0440\u0443\u0433.attr("cy",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("fill",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let o=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u043a\u0440\u0443\u0433.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([Df.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",o("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",o("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u0440\u0443\u0433.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043a\u0440\u0443\u0433.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043a\u0440\u0443\u0433.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class _D extends ne{constructor(a,o){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=o,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a}set \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(a){this.\u043f\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new _D}static \u043d\u043e\u0432\u044b\u0439\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a(){return new _D}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("height",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043f\u043e\u0437\u0438\u0446\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("x",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("y",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("transform",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0441\u043a\u0440\u0443\u0433\u043b\u0435\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("rx",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("ry",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0437\u0430\u043b\u0438\u0432\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let o=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([Df.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",o("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",o("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class yD extends ne{constructor(a,o){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041b\u0438\u043d\u0438\u044f D3"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u043f\u041b\u0438\u043d\u0438\u044f=o,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043b\u0438\u043d\u0438\u044f(){return this.\u043f\u041b\u0438\u043d\u0438\u044f}set \u043b\u0438\u043d\u0438\u044f(a){this.\u043f\u041b\u0438\u043d\u0438\u044f=a}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u043d\u043e\u0432\u044b\u0439(){return new yD}static \u043d\u043e\u0432\u0430\u044f\u041b\u0438\u043d\u0438\u044f(){return new yD}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(a){return this.\u043b\u0438\u043d\u0438\u044f=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("x1",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y1",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("x2",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[3]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this.\u043b\u0438\u043d\u0438\u044f.attr("y2",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[4]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("transform",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("fill-opacity",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this)))))),a.set("\u043a\u043e\u043d\u0442\u0443\u0440",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this)))))),a.set("\u0442\u043e\u043b\u0449\u0438\u043d\u0430\u041a\u043e\u043d\u0442\u0443\u0440\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.attr("stroke-width",c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this))))));let o=c=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((u,h)=>{let f=[h[1],ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0),this];h.length>2&&f.push(...h.splice(2));let p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0432\u044b\u0437\u0432\u0430\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(f.map(g=>u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g))));return this.\u043b\u0438\u043d\u0438\u044f.event(c,g=>()=>{this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435([Df.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(p).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a")])}),this}))));a.set("\u043f\u043e\u041d\u0430\u0436\u0430\u0442\u0438\u044e",o("click")),a.set("\u043f\u043e\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438",o("end")),a.set("\u043f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.transition(),this)))))),a.set("\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c\u041f\u0435\u0440\u0435\u0445\u043e\u0434",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043b\u0438\u043d\u0438\u044f.resetTransition(),this)))))),a.set("\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043b\u0438\u043d\u0438\u044f.duration(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this}))))),a.set("\u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);return this.\u043b\u0438\u043d\u0438\u044f.delay(d.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),this})))))}}class iC extends ne{constructor(a){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),null,new Map),this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}get \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(){return this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f}set \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f(a){this.\u043f\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a,o){let c=iC.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(o);a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443D3",(u,h)=>c,!0),a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",(u,h)=>(c.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),c),!0)}static \u043d\u043e\u0432\u0430\u044f(){return new iC}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(a){return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f=a,this}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u043c\u0435\u0442\u0440\u0438\u043a\u0430\u0422\u0435\u043a\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{let d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),g=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[3]).\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()?700:300,m=this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Svc.textSizeDirect(d,f,g),v=c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u0440\u0438\u043a\u0430");return v.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0448\u0438\u0440\u0438\u043d\u0430",c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0448\u0438\u0440\u0438\u043d\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.width)),v.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u044b\u0441\u043e\u0442\u0430",c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0432\u044b\u0441\u043e\u0442\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m.height)),v}))))),a.set("\u0448\u0438\u0440\u0438\u043d\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.width)))))),a.set("\u0432\u044b\u0441\u043e\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>c.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.height))))));let o=(c,u)=>this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((h,d)=>{let p=vN.\u043d\u043e\u0432\u0430\u044f();return this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.pathes.push(Lr.builder().setRenderHandler((g,m)=>{p.apply(g.append(u))})),c.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0440\u0443\u0433(p)}))));a.set("\u043a\u0440\u0443\u0433",o(vD,"circle")),a.set("\u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a",o(_D,"rect")),a.set("\u0442\u0435\u043a\u0441\u0442",o(mD,"text")),a.set("\u043b\u0438\u043d\u0438\u044f",o(yD,"line")),a.set("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u0425\u043e\u043b\u0441\u0442\u0430(c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[2]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),u[0])))))),a.set("\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c\u0412\u0441\u0451",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>{var h;return null===(h=this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.svgImage)||void 0===h||h.clearAll(),this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.d3Config.clearAll(),u[0]}))))),a.set("\u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u0442\u044c",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((c,u)=>(this.\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f.\u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440.regenerate(),u[0]))))))}}class Ete extends Ta{constructor(){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 JS."),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439="",this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=null,this.d3SvcSaved=null,this.d3ConfigSaved=null,this.cacheService=null,this.\u043f\u0430\u043c\u044f\u0442\u044c=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"))}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(a){return this.cacheService=a,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(a="/scenes/logo.scene.txt"){let o=this.cacheService.getRestPoint(a,null);this.cacheService.getTextRestcallUrl(o,c=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=c,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})}clear(){return super.clear(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let o=(new bg).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),c=new Tl,u=gD.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this);return c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),iC.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(c,u),u.\u0437\u0430\u043f\u0443\u0441\u043a(),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(a,o,c){return this.d3SvcSaved=a,this.d3ConfigSaved=o,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=c,!1)}}class bD extends ne{constructor(){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432"),null,new Map),this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435="\n\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}\n===\n1\n\u0421\u0411\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c\n\u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c.\n\u041c\u0423\u0427\u0415\u041d\u0418\u041a\u0410 \u0412\u041e\u041d\u0418\u0424\u0410\u0422\u0418\u042f\n--\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n17.00{\u043a}\n===\n2{\u043a}\n\u0412\u0421{\u043a}\n--\n\u041d\u0415\u0414\u0415\u041b\u042f 28-\u042f{\u043a}\n\u041f\u041e \u041f\u042f\u0422\u0418\u0414\u0415\u0421\u042f\u0422\u041d\u0418\u0426\u0415,{\u043a}\n\u041f\u0420\u0415\u0414 \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e\u041c \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u042b\u041c,{\u043a}\n\u0421\u0412\u042f\u0422\u042b\u0425 \u041e\u0422\u0415\u0426.{\u043a}\n\u041f\u0420\u0410\u0412. \u0418\u041e\u0410\u041d\u041d\u0410 \u041a\u0420\u041e\u041d\u0428\u0422\u0410\u0414\u0422\u0421\u041a\u041e\u0413\u041e{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u041b\u0438\u0442\u0438\u044f{\u043a}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421{\u0437}\n--\n6.00{\u043a}\n\n8.00{\u043a}\n8.40{\u043a}\n\n17.00{\u0437}\n===\n3{\u0437}\n\u041f\u041d{\u0437}\n--\n\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n4\n\u0412\u0422\n--\n\u0412\u041c\u0426. \u0410\u041d\u0410\u0421\u0422\u0410\u0421\u0418\u0418 \u0423\u0417\u041e\u0420\u0415\u0428\u0418\u0422\u0415\u041b\u042c\u041d\u0418\u0426\u042b\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421\n--\n8.40\n\n17.00\n===\n5\n\u0421\u0420\n--\n\u0414\u0415\u0421\u042f\u0422\u0418 \u041c\u0423\u0427\u0415\u041d\u0418\u041a\u041e\u0412, \u0418\u0416\u0415 \u0412 \u041a\u0420\u0418\u0422\u0415\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f.\n--\n8.40\n\n17.00\n===\n6\n\u0427\u0422\n--\n\u041d\u0410\u0412\u0415\u0427\u0415\u0420\u0418\u0415\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0410 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u0410.\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415\u041d\u0421\u041a\u0418\u0419 \u0421\u041e\u0427\u0415\u041b\u042c\u041d\u0418\u041a\n\u041f\u0420\u041c\u0426. \u0415\u0412\u0413\u0415\u041d\u0418\u0418\n--\n\u0426\u0410\u0420\u0421\u041a\u0418\u0415 \u0427\u0410\u0421\u042b.\n\u0418\u0417\u041e\u0411\u0420\u0410\u0417\u0418\u0422\u0415\u041b\u042c\u041d\u042b.\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f \u0421 \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u0415\u0419\n\u0421\u0412\u0422. \u0412\u0410\u0421\u0418\u041b\u0418\u042f \u0412\u0415\u041b\u0418\u041a\u041e\u0413\u041e\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n--\n8.00\n\n\n\n17.00{\u043a}\n23.00{\u043a}\n===\n7{\u043a}\n\u041f\u0422{\u043a}\n--\n\u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u041e \u0413\u041e\u0421\u041f\u041e\u0414\u0410 \u0411\u041e\u0413\u0410 \u0418 \u0421\u041f\u0410\u0421\u0410{\u043a}\n\u041d\u0410\u0428\u0415\u0413\u041e \u0418\u0418\u0421\u0423\u0421\u0410 \u0425\u0420\u0418\u0421\u0422\u0410{\u043a}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u043a}\n\u0412\u0415\u041b\u0418\u041a\u0410\u042f \u0412\u0415\u0427\u0415\u0420\u041d\u042f{\u0441}\n--\n8.40{\u043a}\n17.00{\u0441}\n===\n8{\u0441}\n\u0421\u0411{\u0441}\n--\n\u0421\u0423\u0411\u0411\u041e\u0422\u0410 \u041f\u041e \u0420\u041e\u0416\u0414\u0415\u0421\u0422\u0412\u0415 \u0425\u0420\u0418\u0421\u0422\u041e\u0412\u041e\u041c.{\u0441}\n\u0421\u041e\u0411\u041e\u0420 \u041f\u0420\u0415\u0421\u0412\u042f\u0422\u041e\u0419 \u0411\u041e\u0413\u041e\u0420\u041e\u0414\u0418\u0426\u042b{\u0441}\n--\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0441}\n\u041f\u0430\u043d\u0438\u0445\u0438\u0434\u0430{\u0441}\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415{\u043a}\n--\n8.40{\u0441}\n\n17.00{\u043a}\n===\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223\n                      ",this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(a){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=a,this}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){let o=bD.\u043d\u043e\u0432\u0430\u044f();a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432",(c,u)=>o,!0)}static \u043d\u043e\u0432\u0430\u044f(){return new bD}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u043a\u0441\u0442\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((o,c)=>o.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435))))))}}class _N extends Ta{constructor(a=210,o=297){super("\u041f\u0440\u0438\u043c\u0435\u0440 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f JS.",a,o),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439="",this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=null,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=null,this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f=null,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=0,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=0,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=0,this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=!0,this.d3SvcSaved=null,this.d3ConfigSaved=null,this.cacheService=null,this.\u043f\u0430\u043c\u044f\u0442\u044c=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b=new Map}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(a,o){return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.set(a,o),this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(a){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(a){return this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(a){return this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=a,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446(){if(null==this.\u043f\u0430\u043c\u044f\u0442\u044c)return 1;let a=this.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u043e\u0431\u0449\u0435\u0435\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446");return null==a?1:a.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()}regenerate(){return this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),this}getWidth(){return this.d3ConfigSaved?this.d3ConfigSaved.width:this.width}getHeight(){return this.d3ConfigSaved?this.d3ConfigSaved.height:this.height}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(a,o="/scenes/scheduler.scene.txt"){return this.cacheService=a,this.\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(o),this}\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(a="/scenes/scheduler.scene.txt",o="/scenes/scheduler3.txt"){let c=this.cacheService.getRestPoint(a,null),u=this.cacheService.getRestPoint(o,null);this.cacheService.getTextRestcallUrl(c,h=>{this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439=h,null!=this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():this.cacheService.getTextRestcallUrl(u,d=>{this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435=d,this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c()})})}clear(){return super.clear(),this.d3ConfigSaved.clearAll(),this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!1,this}\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c(){if(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d)return!1;this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d=!0;let a=new bg,o=a.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439),c=a.\u0434\u0432\u0438\u0436\u043e\u043a,u=bD.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435),h=gD.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043d\u0444\u0438\u0433(this.d3ConfigSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0435\u0440\u0432\u0438\u0441(this.d3SvcSaved).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0432\u0438\u0436\u043e\u043a(c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u043c\u044f\u0442\u044c(this.\u043f\u0430\u043c\u044f\u0442\u044c).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0431\u043e\u0440\u041a\u043e\u043c\u0430\u043d\u0434(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440(this).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.\u0438\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u043e\u0434\u0432\u0430\u043b);c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),iC.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u0412\u0414\u0432\u0438\u0436\u043e\u043a(c,h);let d=[Df.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(u).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438")];return this.\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b.forEach((p,g)=>d.push(Df.\u043d\u043e\u0432\u044b\u0439\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(c.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(g))),h.\u0437\u0430\u043f\u0443\u0441\u043a(d),this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f&&this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f(),!0}generate(a,o,c){return this.d3SvcSaved=a,this.d3ConfigSaved=o,this.\u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439?this.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c():(this.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u041f\u043e\u0441\u043b\u0435\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u044f=c,!1)}}class rd{static saveData(a,o){const c=document.createElement("a"),u=window.URL.createObjectURL(a);c.href=u,c.download=o,c.click(),window.URL.revokeObjectURL(u)}static startDownload(a,o){const c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",o),c.click(),c.remove()}}var CD=wt(650);class eVe{StatementValue(){return yN.builder()}VariableValue(){return bN.builder()}UnaryOp(){return SN.builder()}BinaryOp(){return TN.builder()}NumberValue(){return CN.builder()}IdValue(){return xN.builder()}FuncValue(){return wN.builder()}}var Dl=(()=>(function(l){l[l.Number=0]="Number",l[l.Id=1]="Id",l[l.Function=2]="Function",l[l.UnaryOp=3]="UnaryOp",l[l.BinaryOp=4]="BinaryOp"}(Dl||(Dl={})),Dl))();class yN{constructor(a,o){this.value=a,this.variables=o}static builder(){return new yN(null,[])}setValue(a){return this.value=a,this}setVariables(a){return this.variables=a,this}toString(){var a;let o=this.variables.map(c=>c.toString()).join("\r\n");return`${null===(a=this.value)||void 0===a?void 0:a.toString()};`+(o?` \u0433\u0434\u0435\n      ${o}\n`:"")+"\n."}}class bN{constructor(a,o,c){this.name=a,this.constant=o,this.type=c}static builder(){return new bN("",!1,"")}setName(a){return this.name=a,this}setConstant(a){return this.constant=a,this}setType(a){return this.type=a,this}toString(){return`${this.name}: ${this.constant?"\u043f\u043e\u0441\u0442 ":""}${this.type};`}}class rC{constructor(a){this.type=a}getType(){return this.type}toString(){return""}}class CN extends rC{constructor(a){super(Dl.Number),this.value=a}static builder(){return new CN(0)}setValue(a){return this.value=a,this}toString(){return`${this.value}`}}class xN extends rC{constructor(a){return super(Dl.Id),this.name=a,this}static builder(){return new xN("")}setName(a){return this.name=a,this}toString(){return`${this.name}`}}class wN extends rC{constructor(a,o){super(Dl.Function),this.name=a,this.params=o}static builder(){return new wN("",[])}setName(a){return this.name=a,this}setParams(a){return this.params=a,this}isIntegralName(a){let o=!1;switch(a){case"integrate":case"integral":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c":case"\u0438\u043d\u0442\u0435\u0433\u0440\u0430\u043b":o=!0}return o}isDiffName(a){let o=!1;switch(a){case"diff":case"differentiate":case"\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u043d\u0430\u044f":o=!0}return o}toString(){return this.isDiffName(this.name)&&2==this.params.length?`diff(${this.params.map(a=>a.toString()).join(",")})`:this.isIntegralName(this.name)&&2==this.params.length?`integrate(${this.params.map(a=>a.toString()).join(",")},1)`:this.isIntegralName(this.name)&&3==this.params.length?`integrate(${this.params.map(a=>a.toString()).join(",")})`:`${this.name}(${this.params.map(a=>a.toString()).join(",")})`}}class SN extends rC{constructor(a,o){return super(Dl.UnaryOp),this.name=a,this.value=o,this}static builder(){return new SN("",null)}setName(a){return this.name=a,this}setValue(a){return this.value=a,this}toString(){var a,o;return"()"==this.name?`(${null===(a=this.value)||void 0===a?void 0:a.toString()})`:`${this.name}${null===(o=this.value)||void 0===o?void 0:o.toString()}`}}class TN extends rC{constructor(a,o,c){return super(Dl.BinaryOp),this.left=a,this.name=o,this.right=c,this}static builder(){return new TN(null,"",null)}setLeft(a){return this.left=a,this}setName(a){return this.name=a,this}setRight(a){return this.right=a,this}toString(){var a,o;return`${null===(a=this.left)||void 0===a?void 0:a.toString()} ${this.name} ${null===(o=this.right)||void 0===o?void 0:o.toString()}`}}class xD{parse(a){return formulasParserStatic.parse(a,{builder:new eVe})}}class vr{constructor(a,o){this.width=a,this.height=o,this.underline=!1,this.overline=!1,this.system=!1,this.space=!1}static builder(){return new vr(0,0)}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setUnderline(a){return this.underline=a,this}setOverline(a){return this.overline=a,this}setSystem(a){return this.system=a,this}setSpace(a){return this.space=a,this}calculateFor(a,o){this.width=this.space?o.fontSize/10:0,this.height=0}drawFor(a,o,c,u,h,d){this.overline&&d.lines.push(Jn.builder().setWidth(d.lineWidth).setColor(d.colorLines).setX1(a).setY1(o).setX2(a+c).setY2(o)),this.underline&&d.lines.push(Jn.builder().setWidth(d.lineWidth).setColor(d.colorLines).setX1(a).setY1(o+u).setX2(a+c).setY2(o+u))}}class $a extends vr{constructor(a){super(0,0),this.text=a}static builder(){return new $a("")}setText(a){return this.text=a,this}calculateFor(a,o){let c=a.textSizeDirect(this.text,o.fontSize,o.fontWeight);c&&this.setWidth(c.width).setHeight(c.height)}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d),d.texts.push(Qn.builder().setText(this.text).setTextAnchor("left").setFontSize(d.fontSize+"px").translate(a,o+u-this.height*(1-d.fontLineRelativeOffset)).rotate(0).setColor(d.colorLines))}}class hc extends vr{constructor(a){super(0,0),this.childs=a,this.centerDy=0}static builder(){return new hc([])}setChilds(a){return this.childs=a,this}getCurCenterDy(a,o){return kte.getCurCenterDy(a,o)}calculateFor(a,o){this.childs.forEach(h=>h.calculateFor(a,o));let c=0,u=0;this.centerDy=0,this.childs.forEach(h=>{c+=h.width,u=Math.max(u,h.height);let d=this.getCurCenterDy(h,o);this.centerDy<d?this.centerDy=d:u=Math.max(u,h.height+(d-this.centerDy))}),this.setWidth(c).setHeight(u)}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let f=a,p=o,v=c-0;this.childs.forEach(y=>{let b=this.getCurCenterDy(y,d);0==b&&(b=this.centerDy>0?(y.system?u:y.height)/2:0),y.drawFor(f,p+(y.system?0:this.centerDy-b),y.width,y.system?u:y.height,h,d),f+=y.width,v-=y.width})}}class Mf extends vr{constructor(a){super(0,0),this.opened=a}static builder(){return new Mf(!0)}setOpened(a){return this.opened=a,this}getDivHeight(a){return a.lineWidth}calculateFor(a,o){this.setWidth(o.fontSize/4).setHeight(0).setSystem(!0)}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let p=d.fontSize/4*(d.fontSize/u),g=o+u-d.fontSize*(1-d.fontLineRelativeOffset),m=o+d.fontSize*(1-d.fontLineRelativeOffset),v=(m+g)/2,b=(g-m)/4,x=m+b,C=x+b,w=C+b;d.pathes.push(Lr.builder().setRenderHandler((S,D)=>{let T=Zh();this.opened?(T.moveTo(p,m),T.bezierCurveTo(0,x,0,C,0,v),T.bezierCurveTo(0,C,0,w,p,g)):(T.moveTo(0,m),T.bezierCurveTo(p,x,p,C,p,v),T.bezierCurveTo(p,C,p,w,0,g)),S.append("path").attr("d",T).attr("stroke",d.colorMain).attr("stroke-width",D.strokeWidth).attr("fill","none").attr("transform",(A,I)=>h.transformToString(D.transform||[]))}).setStrokeColor(d.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(a+1,0))}}class wD extends vr{constructor(a){super(0,0),this.childs=a}static builder(){return new wD([])}setChilds(a){return this.childs=a,this}getUpPartHeight(){let a=0;for(let o=0;o<this.childs.length;++o)if(!this.childs[o].system){a=this.childs[o].height;break}return a}calculateFor(a,o){this.childs.forEach(h=>h.calculateFor(a,o));let c=0,u=0;this.childs.forEach(h=>{u+=h.height,c=Math.max(c,h.width)}),this.setWidth(c).setHeight(u)}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let f=a,p=o;f+=0,p+=u>this.height?u-this.height:0,this.childs.forEach(v=>{let _=0==v.width?0:c>v.width?(c-v.width)/2:0;v.drawFor(f+_,p,v.width?v.width:c-_,v.height,h,d),p+=v.height})}}class SD extends vr{constructor(a){super(0,0),this.underRootValue=a}static builder(){return new SD(vr.builder())}setUnderRootValue(a){return this.underRootValue=a,this}getDivHeight(a){return 2*a.lineWidth}calculateFor(a,o){this.underRootValue.calculateFor(a,o),this.setWidth(o.fontSize/2+this.underRootValue.width).setHeight(this.underRootValue.height+2*this.getDivHeight(o))}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let f=d.fontSize/2,p=o+this.getDivHeight(d),g=o+u-d.fontSize*(1-d.fontLineRelativeOffset);d.lines.push(Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(a).setY1(p+u/2).setX2(a+f/3).setY2(p+u/2),Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(a+f/3).setY1(p+u/2).setX2(a+2*f/3).setY2(g),Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(a+2*f/3).setY1(g).setX2(a+f).setY2(p),Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(a+f).setY1(p).setX2(a+c).setY2(p));let m=this.getDivHeight(d);this.underRootValue.drawFor(a+f,p+m,c-f,u-2*m,h,d)}}class TD extends vr{constructor(a,o){super(0,0),this.rootNumberValue=a,this.underRootValue=o}static builder(){return new TD(vr.builder(),vr.builder())}setUnderRootValue(a){return this.underRootValue=a,this}setNumberRootValue(a){return this.rootNumberValue=a,this}getDivHeight(a){return 2*a.lineWidth}getCenterDy(a){let o=this.getDivHeight(a),u=this.rootNumberValue.height;return this.underRootValue.height/2<u&&(o+=u),o}calculateFor(a,o){this.underRootValue.calculateFor(a,o),this.rootNumberValue.calculateFor(a,o);let c=o.fontSize/2,u=this.underRootValue.height,h=this.rootNumberValue.height,d=u/2,f=this.underRootValue.height+2*this.getDivHeight(o);if(u<=o.fontSize)f=u+h;else if(h>d){let p=o.fontSize+h+2*this.getDivHeight(o);f=f<p?p:f}this.setWidth(c+this.underRootValue.width+this.rootNumberValue.width).setHeight(f)}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let f=d.fontSize/2,p=o+this.getDivHeight(d),g=o+u-d.fontSize*(1-d.fontLineRelativeOffset),m=this.underRootValue.height,v=this.rootNumberValue.height,_=m/2,y=_<v?v:u/2;m<=d.fontSize?y=v:v>_&&(y=v+2*this.getDivHeight(d)),this.rootNumberValue.drawFor(a+f/3,p+y-this.rootNumberValue.height,this.rootNumberValue.width,this.rootNumberValue.height,h,d);let b=a+this.rootNumberValue.width;d.lines.push(Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(a).setY1(p+y).setX2(b+f/3).setY2(p+y),Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(b+f/3).setY1(p+y).setX2(b+2*f/3).setY2(g),Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(b+2*f/3).setY1(g).setX2(b+f).setY2(p),Jn.builder().setColor(d.colorLines).setWidth(d.lineWidth).setX1(b+f).setY1(p).setX2(b+c-this.rootNumberValue.width).setY2(p)),this.underRootValue.drawFor(a+f+this.rootNumberValue.width,g-this.underRootValue.height,c-f-this.rootNumberValue.width,this.underRootValue.height,h,d)}}class sC extends vr{constructor(a){super(0,0),this.underRootValue=a}static builder(){return new sC(vr.builder())}setUnderRootValue(a){return this.underRootValue=a,this}getDivHeight(a){return a.lineWidth}calculateFor(a,o){this.underRootValue.calculateFor(a,o);let c=o.fontSize/2;this.setWidth(c/2+c+this.underRootValue.width).setHeight(this.underRootValue.height+this.getDivHeight(o))}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let f=d.fontSize/2,p=f/2,g=f/2,m=o+u-d.fontSize*(1-d.fontLineRelativeOffset),v=o+d.fontSize*(1-d.fontLineRelativeOffset);d.pathes.push(Lr.builder().setRenderHandler((_,y)=>{let b=Zh();b.moveTo(0,m-g),b.bezierCurveTo(0,m,g,m,g,m-g),b.lineTo(g,v+g),b.bezierCurveTo(g,v,f,v,f,v+g),_.append("path").attr("d",b).attr("stroke",d.colorMain).attr("stroke-width",y.strokeWidth).attr("fill","none").attr("transform",(x,C)=>h.transformToString(y.transform||[]))}).setStrokeColor(d.colorMain).setStrokeWidth(1).setFillColor("none").setFillOpacity(.5).translate(a+1,0)),this.underRootValue.drawFor(a+f+p,o+this.getDivHeight(d),c-f,u,h,d)}}class DD extends vr{constructor(a,o){super(0,0),this.power=a,this.value=o}static builder(){return new DD(vr.builder(),vr.builder())}setValue(a){return this.value=a,this}setPower(a){return this.power=a,this}calculateFor(a,o){this.value.calculateFor(a,o),this.power.calculateFor(a,o);let f=this.value.height+this.power.height-o.fontSize/4*3;this.setWidth(0*o.fontSize/4+this.value.width+this.power.width).setHeight(f)}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let p=0*d.fontSize/4;this.value.drawFor(a,o+(this.power.height-d.fontSize/4*3),this.value.width,this.value.height,h,d),this.power.drawFor(a+this.value.width+p,o,this.power.width,this.power.height,h,d)}getCenterDy(a){return this.power.height-a.fontSize/4*3+this.value.height/2}}class MD extends vr{constructor(a,o,c){super(0,0),this.diffOp=a,this.byVar=o,this.value=c}static builder(){return new MD(vr.builder(),vr.builder(),vr.builder())}setValue(a){return this.value=a,this}setDiffOp(a){return this.diffOp=a,this}setByVar(a){return this.byVar=a,this}calculateFor(a,o){this.value.calculateFor(a,o),this.byVar.calculateFor(a,o),this.diffOp.calculateFor(a,o);let d=this.value.height+this.byVar.height/2+this.diffOp.height/2;this.setWidth(this.value.width+Math.max(this.diffOp.width,this.byVar.width)).setHeight(d)}drawFor(a,o,c,u,h,d){super.drawFor(a,o,c,u,h,d);let m=this.byVar.height;this.value.drawFor(a,o+this.diffOp.height/2,this.value.width,this.value.height,h,d),this.diffOp.drawFor(a+this.value.width,o,this.diffOp.width,this.diffOp.height,h,d),this.byVar.drawFor(a+this.value.width,o+u-m,this.byVar.width,this.byVar.height,h,d)}getCenterDy(a){let u=this.diffOp.height,h=kte.getCurCenterDy(this.value,a);return h=h||this.value.height/2,h+u/2}}class kte{static getCurCenterDy(a,o){let c=0;return a instanceof wD?c=a.getUpPartHeight():a instanceof hc?c=a.centerDy:a instanceof sC||a instanceof SD?c=this.getCurCenterDy(a.underRootValue,o):(a instanceof TD||a instanceof DD||a instanceof MD)&&(c=a.getCenterDy(o)),c}}class tVe{constructor(a=3){this.divHight=a}convert(a){switch(a.getType()){case Dl.Id:return this.getId(a);case Dl.Number:return this.getNumber(a);case Dl.Function:return this.getFunction(a);case Dl.UnaryOp:return this.getUnary(a);case Dl.BinaryOp:return this.getBinary(a);default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f: ${a.getType()}`)}}getId(a){return $a.builder().setText(a.name)}getNumber(a){return $a.builder().setText(""+a.value)}getUnary(a){return"()"==a.name?hc.builder().setChilds([Mf.builder().setOpened(!0),this.convertValueOrNull(a.value),Mf.builder().setOpened(!1)]):hc.builder().setChilds([$a.builder().setText(a.name),this.convertValueOrNull(a.value)])}getBinary(a){return"/"==a.name?wD.builder().setChilds([this.convertValueOrNull(a.left),vr.builder().setOverline(!0).setSystem(!0).setHeight(this.divHight),this.convertValueOrNull(a.right)]):"*"==a.name||"+"==a.name||"-"==a.name||"="==a.name?hc.builder().setChilds([this.convertValueOrNull(a.left),vr.builder().setSpace(!0),$a.builder().setText(a.name),vr.builder().setSpace(!0),this.convertValueOrNull(a.right)]):hc.builder().setChilds([this.convertValueOrNull(a.left),$a.builder().setText(a.name),this.convertValueOrNull(a.right)])}convertValueOrNull(a){return a?this.convert(a):$a.builder().setText("null")}getFunction(a){return"pow"==a.name&&2==a.params.length?DD.builder().setValue(this.convertValueOrNull(a.params[0])).setPower(this.convertValueOrNull(a.params[1])):"sqrt"==a.name&&1==a.params.length?SD.builder().setUnderRootValue(this.convertValueOrNull(a.params[0])):"root"==a.name&&2==a.params.length?TD.builder().setUnderRootValue(this.convertValueOrNull(a.params[0])).setNumberRootValue(this.convertValueOrNull(a.params[1])):"diff"==a.name&&2==a.params.length?MD.builder().setValue(hc.builder().setChilds([Mf.builder().setOpened(!0),this.convertValueOrNull(a.params[0]),Mf.builder().setOpened(!1)])).setByVar(this.convertValueOrNull(a.params[1])).setDiffOp($a.builder().setText("'")):"integral"==a.name&&2==a.params.length||"integrate"==a.name&&3==a.params.length?sC.builder().setUnderRootValue(hc.builder().setChilds([this.convertValueOrNull(a.params[0]),vr.builder().setSpace(!0),vr.builder().setSpace(!0),$a.builder().setText("d"),vr.builder().setSpace(!0),this.convertValueOrNull(a.params[1])])):hc.builder().setChilds([$a.builder().setText(a.name),Mf.builder().setOpened(!0),hc.builder().setChilds(a.params.flatMap((o,c)=>c>0?[$a.builder().setText(","),this.convertValueOrNull(o)]:[this.convertValueOrNull(o)])),Mf.builder().setOpened(!1)])}}class ED extends Ta{getFormula(a){let o=a.getParam("\u0442\u0435\u043a\u0441\u0442"),c=null;try{let h=(new xD).parse(o),d=new tVe,f=h[h.length-1];f.value&&(c=d.convert(f.value))}catch(u){c=$a.builder().setText("\u041e\u0448\u0438\u0431\u043a\u0430: "+o)}return c}constructor(a="\u041f\u0440\u0438\u043c\u0435\u0440 \u0444\u043e\u0440\u043c\u0443\u043b.",o=512,c=512){super(a,o,c)}generate(a,o,c){let u=this.getFormula(o);return u.calculateFor(a,o),this.width=o.width=u.width,this.height=o.height=u.height,o.colorBackground&&o.rects.push(a.createBackground(o)),u.drawFor(0,0,u.width,u.height,a,o),!0}}class eu{constructor(a,o,c){this._id=a,this.key=o,this.value=c}static create(a){return a?new eu(a._id,a.key,a.value):new eu(-1,"","")}static of(a,o){return new eu(0,a,o)}}class Ef{constructor(a,o,c){this.success=a,this.error=o,this.item=c}static create(a){return new Ef(a.success,a.error,eu.create(a.item))}}let Ls=(()=>{class l{constructor(o,c){this.config=o,this.localstorageSvc=c,this.autoThemeKey="autotheme",this.themeKey="theme"}themeName(o=!0){return this.config.baseHref+(o?"/index.html":"/index.night.html")}nowIsNight(){return thisIsNightTheme}nowIsDay(){return!thisIsNightTheme}isLight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!0)}isNight(){return!this.isAutoTheme()&&this.localstorageSvc.getStorage(this.themeKey)==this.themeName(!1)}isAutoTheme(){return"true"==this.localstorageSvc.getStorage(this.autoThemeKey)}onToggleAutoTheme(){let o=this.isLight(),c=this.isNight();if(o||c||!o&&!c){this.localstorageSvc.setStorage(this.autoThemeKey,""+!0);let u=this.themeName(o);window.location.href=u}}switchToLight(){let o=this.themeName(!0);(this.localstorageSvc.getStorage(this.themeKey)!=o||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!0)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=o)}switchToNight(){let o=this.themeName(!1);(this.localstorageSvc.getStorage(this.themeKey)!=o||this.isAutoTheme())&&(this.localstorageSvc.setStorage(this.themeKey,this.themeName(!1)),this.localstorageSvc.setStorage(this.autoThemeKey,"false"),window.location.href=o)}applyTheme(){let o=window.ThemeHandler;if(o)try{let c=thisIsNightTheme?"night":"day";o.setTheme(c)}catch(c){}}printWindow(o){let c=!1,u=window.ThemeHandler;if(u)try{u.printWindow(o),c=!0}catch(h){}return c}getAudioRootFolder(){let o=window.ThemeHandler,c="./";if(o)try{c=o.getAudioRootFolder()}catch(u){}return c}}return l.\u0275fac=function(o){return new(o||l)(Ie(on),Ie(k3))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class Ei{static handleError(a,o){let c="";return c=a.error instanceof ErrorEvent?`Message: ${a.error.message}`:`Code: ${a.status}; Message: ${a.message}`,function nVe(l,a){const o=ue(l)?l:()=>l,c=u=>u.error(o());return new _n(a?u=>a.schedule(c,0,u):c)}(()=>"Something bad happened; please try again later. Error: "+c)}static callOnDone(a,o){null==o?a&&a(null):a&&("string"==typeof o||ArrayBuffer,a(o))}}class _r{static merge(a,o){if(!a&&!o)return"";if(!a)return o;if(!o)return a;let c=a.endsWith("/"),u=o.startsWith("/"),h=a;return c!=u?h+=o:c?h+=u?o.substring(1):o:h?h+="/"+o:h=o,h}}class Ate{}class Ite{}class sd{constructor(a){this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?()=>{this.headers=new Map,a.split("\n").forEach(o=>{const c=o.indexOf(":");if(c>0){const u=o.slice(0,c),h=u.toLowerCase(),d=o.slice(c+1).trim();this.maybeSetNormalizedName(u,h),this.headers.has(h)?this.headers.get(h).push(d):this.headers.set(h,[d])}})}:()=>{this.headers=new Map,Object.keys(a).forEach(o=>{let c=a[o];const u=o.toLowerCase();"string"==typeof c&&(c=[c]),c.length>0&&(this.headers.set(u,c),this.maybeSetNormalizedName(o,u))})}:this.headers=new Map}has(a){return this.init(),this.headers.has(a.toLowerCase())}get(a){this.init();const o=this.headers.get(a.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(a){return this.init(),this.headers.get(a.toLowerCase())||null}append(a,o){return this.clone({name:a,value:o,op:"a"})}set(a,o){return this.clone({name:a,value:o,op:"s"})}delete(a,o){return this.clone({name:a,value:o,op:"d"})}maybeSetNormalizedName(a,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,a)}init(){this.lazyInit&&(this.lazyInit instanceof sd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(a=>this.applyUpdate(a)),this.lazyUpdate=null))}copyFrom(a){a.init(),Array.from(a.headers.keys()).forEach(o=>{this.headers.set(o,a.headers.get(o)),this.normalizedNames.set(o,a.normalizedNames.get(o))})}clone(a){const o=new sd;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof sd?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([a]),o}applyUpdate(a){const o=a.name.toLowerCase();switch(a.op){case"a":case"s":let c=a.value;if("string"==typeof c&&(c=[c]),0===c.length)return;this.maybeSetNormalizedName(a.name,o);const u=("a"===a.op?this.headers.get(o):void 0)||[];u.push(...c),this.headers.set(o,u);break;case"d":const h=a.value;if(h){let d=this.headers.get(o);if(!d)return;d=d.filter(f=>-1===h.indexOf(f)),0===d.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,d)}else this.headers.delete(o),this.normalizedNames.delete(o)}}forEach(a){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>a(this.normalizedNames.get(o),this.headers.get(o)))}}class iVe{encodeKey(a){return Pte(a)}encodeValue(a){return Pte(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}const sVe=/%(\d[a-f0-9])/gi,oVe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Pte(l){return encodeURIComponent(l).replace(sVe,(a,o)=>{var c;return null!==(c=oVe[o])&&void 0!==c?c:a})}function Ote(l){return`${l}`}class od{constructor(a={}){if(this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new iVe,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rVe(l,a){const o=new Map;return l.length>0&&l.replace(/^\?/,"").split("&").forEach(u=>{const h=u.indexOf("="),[d,f]=-1==h?[a.decodeKey(u),""]:[a.decodeKey(u.slice(0,h)),a.decodeValue(u.slice(h+1))],p=o.get(d)||[];p.push(f),o.set(d,p)}),o}(a.fromString,this.encoder)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach(o=>{const c=a.fromObject[o];this.map.set(o,Array.isArray(c)?c:[c])})):this.map=null}has(a){return this.init(),this.map.has(a)}get(a){this.init();const o=this.map.get(a);return o?o[0]:null}getAll(a){return this.init(),this.map.get(a)||null}keys(){return this.init(),Array.from(this.map.keys())}append(a,o){return this.clone({param:a,value:o,op:"a"})}appendAll(a){const o=[];return Object.keys(a).forEach(c=>{const u=a[c];Array.isArray(u)?u.forEach(h=>{o.push({param:c,value:h,op:"a"})}):o.push({param:c,value:u,op:"a"})}),this.clone(o)}set(a,o){return this.clone({param:a,value:o,op:"s"})}delete(a,o){return this.clone({param:a,value:o,op:"d"})}toString(){return this.init(),this.keys().map(a=>{const o=this.encoder.encodeKey(a);return this.map.get(a).map(c=>o+"="+this.encoder.encodeValue(c)).join("&")}).filter(a=>""!==a).join("&")}clone(a){const o=new od({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(a),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(a=>this.map.set(a,this.cloneFrom.map.get(a))),this.updates.forEach(a=>{switch(a.op){case"a":case"s":const o=("a"===a.op?this.map.get(a.param):void 0)||[];o.push(Ote(a.value)),this.map.set(a.param,o);break;case"d":if(void 0===a.value){this.map.delete(a.param);break}{let c=this.map.get(a.param)||[];const u=c.indexOf(Ote(a.value));-1!==u&&c.splice(u,1),c.length>0?this.map.set(a.param,c):this.map.delete(a.param)}}}),this.cloneFrom=this.updates=null)}}class aVe{constructor(){this.map=new Map}set(a,o){return this.map.set(a,o),this}get(a){return this.map.has(a)||this.map.set(a,a.defaultValue()),this.map.get(a)}delete(a){return this.map.delete(a),this}has(a){return this.map.has(a)}keys(){return this.map.keys()}}function Fte(l){return"undefined"!=typeof ArrayBuffer&&l instanceof ArrayBuffer}function Rte(l){return"undefined"!=typeof Blob&&l instanceof Blob}function Nte(l){return"undefined"!=typeof FormData&&l instanceof FormData}class oC{constructor(a,o,c,u){let h;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function lVe(l){switch(l){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||u?(this.body=void 0!==c?c:null,h=u):h=c,h&&(this.reportProgress=!!h.reportProgress,this.withCredentials=!!h.withCredentials,h.responseType&&(this.responseType=h.responseType),h.headers&&(this.headers=h.headers),h.context&&(this.context=h.context),h.params&&(this.params=h.params)),this.headers||(this.headers=new sd),this.context||(this.context=new aVe),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=o;else{const f=o.indexOf("?");this.urlWithParams=o+(-1===f?"?":f<o.length-1?"&":"")+d}}else this.params=new od,this.urlWithParams=o}serializeBody(){return null===this.body?null:Fte(this.body)||Rte(this.body)||Nte(this.body)||function cVe(l){return"undefined"!=typeof URLSearchParams&&l instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof od?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Nte(this.body)?null:Rte(this.body)?this.body.type||null:Fte(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof od?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(a={}){var o;const c=a.method||this.method,u=a.url||this.url,h=a.responseType||this.responseType,d=void 0!==a.body?a.body:this.body,f=void 0!==a.withCredentials?a.withCredentials:this.withCredentials,p=void 0!==a.reportProgress?a.reportProgress:this.reportProgress;let g=a.headers||this.headers,m=a.params||this.params;const v=null!==(o=a.context)&&void 0!==o?o:this.context;return void 0!==a.setHeaders&&(g=Object.keys(a.setHeaders).reduce((_,y)=>_.set(y,a.setHeaders[y]),g)),a.setParams&&(m=Object.keys(a.setParams).reduce((_,y)=>_.set(y,a.setParams[y]),m)),new oC(c,u,d,{params:m,headers:g,context:v,reportProgress:p,responseType:h,withCredentials:f})}}var Bs=(()=>((Bs=Bs||{})[Bs.Sent=0]="Sent",Bs[Bs.UploadProgress=1]="UploadProgress",Bs[Bs.ResponseHeader=2]="ResponseHeader",Bs[Bs.DownloadProgress=3]="DownloadProgress",Bs[Bs.Response=4]="Response",Bs[Bs.User=5]="User",Bs))();class DN{constructor(a,o=200,c="OK"){this.headers=a.headers||new sd,this.status=void 0!==a.status?a.status:o,this.statusText=a.statusText||c,this.url=a.url||null,this.ok=this.status>=200&&this.status<300}}class MN extends DN{constructor(a={}){super(a),this.type=Bs.ResponseHeader}clone(a={}){return new MN({headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class kD extends DN{constructor(a={}){super(a),this.type=Bs.Response,this.body=void 0!==a.body?a.body:null}clone(a={}){return new kD({body:void 0!==a.body?a.body:this.body,headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class Lte extends DN{constructor(a){super(a,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${a.url||"(unknown url)"}`:`Http failure response for ${a.url||"(unknown url)"}: ${a.status} ${a.statusText}`,this.error=a.error||null}}function EN(l,a){return{body:a,headers:l.headers,context:l.context,observe:l.observe,params:l.params,reportProgress:l.reportProgress,responseType:l.responseType,withCredentials:l.withCredentials}}let nh=(()=>{class l{constructor(o){this.handler=o}request(o,c,u={}){let h;if(o instanceof oC)h=o;else{let p,g;p=u.headers instanceof sd?u.headers:new sd(u.headers),u.params&&(g=u.params instanceof od?u.params:new od({fromObject:u.params})),h=new oC(o,c,void 0!==u.body?u.body:null,{headers:p,context:u.context,params:g,reportProgress:u.reportProgress,responseType:u.responseType||"json",withCredentials:u.withCredentials})}const d=ni(h).pipe(e0(p=>this.handler.handle(p)));if(o instanceof oC||"events"===u.observe)return d;const f=d.pipe(Ss(p=>p instanceof kD));switch(u.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return f.pipe(hn(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return f.pipe(hn(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return f.pipe(hn(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return f.pipe(hn(p=>p.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${u.observe}}`)}}delete(o,c={}){return this.request("DELETE",o,c)}get(o,c={}){return this.request("GET",o,c)}head(o,c={}){return this.request("HEAD",o,c)}jsonp(o,c){return this.request("JSONP",o,{params:(new od).append(c,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,c={}){return this.request("OPTIONS",o,c)}patch(o,c,u={}){return this.request("PATCH",o,EN(u,c))}post(o,c,u={}){return this.request("POST",o,EN(u,c))}put(o,c,u={}){return this.request("PUT",o,EN(u,c))}}return l.\u0275fac=function(o){return new(o||l)(Ie(Ate))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class Bte{constructor(a,o){this.next=a,this.interceptor=o}handle(a){return this.interceptor.intercept(a,this.next)}}const kN=new Wn("HTTP_INTERCEPTORS");let uVe=(()=>{class l{intercept(o,c){return c.handle(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const hVe=/^\)\]\}',?\n/;let Vte=(()=>{class l{constructor(o){this.xhrFactory=o}handle(o){if("JSONP"===o.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _n(c=>{const u=this.xhrFactory.build();if(u.open(o.method,o.urlWithParams),o.withCredentials&&(u.withCredentials=!0),o.headers.forEach((y,b)=>u.setRequestHeader(y,b.join(","))),o.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){const y=o.detectContentTypeHeader();null!==y&&u.setRequestHeader("Content-Type",y)}if(o.responseType){const y=o.responseType.toLowerCase();u.responseType="json"!==y?y:"text"}const h=o.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const y=1223===u.status?204:u.status,b=u.statusText||"OK",x=new sd(u.getAllResponseHeaders()),C=function dVe(l){return"responseURL"in l&&l.responseURL?l.responseURL:/^X-Request-URL:/m.test(l.getAllResponseHeaders())?l.getResponseHeader("X-Request-URL"):null}(u)||o.url;return d=new MN({headers:x,status:y,statusText:b,url:C}),d},p=()=>{let{headers:y,status:b,statusText:x,url:C}=f(),w=null;204!==b&&(w=void 0===u.response?u.responseText:u.response),0===b&&(b=w?200:0);let S=b>=200&&b<300;if("json"===o.responseType&&"string"==typeof w){const D=w;w=w.replace(hVe,"");try{w=""!==w?JSON.parse(w):null}catch(T){w=D,S&&(S=!1,w={error:T,text:w})}}S?(c.next(new kD({body:w,headers:y,status:b,statusText:x,url:C||void 0})),c.complete()):c.error(new Lte({error:w,headers:y,status:b,statusText:x,url:C||void 0}))},g=y=>{const{url:b}=f(),x=new Lte({error:y,status:u.status||0,statusText:u.statusText||"Unknown Error",url:b||void 0});c.error(x)};let m=!1;const v=y=>{m||(c.next(f()),m=!0);let b={type:Bs.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(b.total=y.total),"text"===o.responseType&&!!u.responseText&&(b.partialText=u.responseText),c.next(b)},_=y=>{let b={type:Bs.UploadProgress,loaded:y.loaded};y.lengthComputable&&(b.total=y.total),c.next(b)};return u.addEventListener("load",p),u.addEventListener("error",g),u.addEventListener("timeout",g),u.addEventListener("abort",g),o.reportProgress&&(u.addEventListener("progress",v),null!==h&&u.upload&&u.upload.addEventListener("progress",_)),u.send(h),c.next({type:Bs.Sent}),()=>{u.removeEventListener("error",g),u.removeEventListener("abort",g),u.removeEventListener("load",p),u.removeEventListener("timeout",g),o.reportProgress&&(u.removeEventListener("progress",v),null!==h&&u.upload&&u.upload.removeEventListener("progress",_)),u.readyState!==u.DONE&&u.abort()}})}}return l.\u0275fac=function(o){return new(o||l)(Ie(D9))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const AN=new Wn("XSRF_COOKIE_NAME"),IN=new Wn("XSRF_HEADER_NAME");class zte{}let fVe=(()=>{class l{constructor(o,c,u){this.doc=o,this.platform=c,this.cookieName=u,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=_9(o,this.cookieName),this.lastCookieString=o),this.lastToken}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wr),Ie(Hr),Ie(AN))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),PN=(()=>{class l{constructor(o,c){this.tokenService=o,this.headerName=c}intercept(o,c){const u=o.url.toLowerCase();if("GET"===o.method||"HEAD"===o.method||u.startsWith("http://")||u.startsWith("https://"))return c.handle(o);const h=this.tokenService.getToken();return null!==h&&!o.headers.has(this.headerName)&&(o=o.clone({headers:o.headers.set(this.headerName,h)})),c.handle(o)}}return l.\u0275fac=function(o){return new(o||l)(Ie(zte),Ie(IN))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),pVe=(()=>{class l{constructor(o,c){this.backend=o,this.injector=c,this.chain=null}handle(o){if(null===this.chain){const c=this.injector.get(kN,[]);this.chain=c.reduceRight((u,h)=>new Bte(u,h),this.backend)}return this.chain.handle(o)}}return l.\u0275fac=function(o){return new(o||l)(Ie(Ite),Ie(or))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),gVe=(()=>{class l{static disable(){return{ngModule:l,providers:[{provide:PN,useClass:uVe}]}}static withOptions(o={}){return{ngModule:l,providers:[o.cookieName?{provide:AN,useValue:o.cookieName}:[],o.headerName?{provide:IN,useValue:o.headerName}:[]]}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({providers:[PN,{provide:kN,useExisting:PN,multi:!0},{provide:zte,useClass:fVe},{provide:AN,useValue:"XSRF-TOKEN"},{provide:IN,useValue:"X-XSRF-TOKEN"}]}),l})(),mVe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({providers:[nh,{provide:Ate,useClass:pVe},Vte,{provide:Ite,useExisting:Vte}],imports:[[gVe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),l})(),Ute=(()=>{class l{constructor(o,c){this.http=o,this.config=c,this.restPoint="/settings"}getRestPoint(o,c){return _r.merge(_r.merge(c||this.config.serviceAPIHost,this.restPoint),o)}handleError(o,c){return Ei.handleError(o,c)}findKey(o,c){const u={_id:0,key:o,value:""};this.http.post(this.getRestPoint("/find",null),u,{}).pipe(Xi(this.handleError)).subscribe({next:d=>{Ei.callOnDone(c,Ef.create(d))},error:d=>{Ei.callOnDone(c,null)}})}insertKey(o,c){this.http.post(this.getRestPoint("/insert",null),o,{}).pipe(Xi(this.handleError)).subscribe({next:h=>{Ei.callOnDone(c,Ef.create(h))},error:h=>{Ei.callOnDone(c,null)}})}updateKey(o,c){this.http.post(this.getRestPoint("/update",null),o,{}).pipe(Xi(this.handleError)).subscribe({next:h=>{Ei.callOnDone(c,Ef.create(h))},error:h=>{Ei.callOnDone(c,null)}})}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Hte=(()=>{class l{constructor(o){this.config=o,this.kvs=null,this.localStorageName="",this.localStorageName=o.serviceAPIHost+"KVSvc"}checkOrloadData(){if(this.kvs)return;const o=localStorage.getItem(this.localStorageName);if(o)try{this.kvs=JSON.parse(o)}catch(c){}this.kvs||(this.kvs={})}saveData(){const o=JSON.stringify(this.kvs);localStorage.setItem(this.localStorageName,o)}findKey(o,c){this.checkOrloadData();const u=this.kvs[o],h=null!=u;return this.config.post(()=>{Ei.callOnDone(c,new Ef(h,h?null:"Not found",h?new eu(-1,o,u):null))}),u}insertKey(o,c){this.checkOrloadData(),this.kvs[o.key]=o.value,this.saveData(),this.config.post(()=>{Ei.callOnDone(c,new Ef(!0,null,o))})}updateKey(o,c){this.checkOrloadData(),this.kvs[o.key]=o.value,this.saveData(),this.config.post(()=>{Ei.callOnDone(c,new Ef(!0,null,o))})}}return l.\u0275fac=function(o){return new(o||l)(Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),ON=(()=>{class l{constructor(o,c,u){this.kvRest=o,this.kvMemory=c,this.config=u,this.kv=null,this.config.isMemoryServerType()&&(this.kv=this.kvMemory),(null==this.kv||this.config.isRestServerType())&&(this.kv=this.kvRest)}findKey(o,c){this.kv.findKey(o,c)}insertKey(o,c){this.kv.insertKey(o,c)}updateKey(o,c){this.kv.updateKey(o,c)}}return l.\u0275fac=function(o){return new(o||l)(Ie(Ute),Ie(Hte),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class FN{constructor(a,o){this.name=a,this.value=o}equalsTo(a){return this.name==a.name&&this.value==a.value}static cloneFrom(a){return new FN(a.name,a.value)}}var qt=(()=>(function(l){l[l.Number=0]="Number",l[l.String=1]="String",l[l.Boolean=2]="Boolean"}(qt||(qt={})),qt))();class cn{constructor(a,o,c,u,h,d){this.name=a,this.description=o,this.type=c,this.cfg=u,this.saver=h,this.defaultValue=d}static uiTypeToString(a){return["Number","String","Boolean"][a]}static builder(){return new cn("","",qt.String,()=>null,()=>{},null)}setName(a){return this.name=a,this}setDescription(a){return this.description=a,this}setType(a){return this.type=a,this}setDefaultValue(a){return this.defaultValue=a,this}setCfg(a){return this.cfg=a,this}setSaver(a){return this.saver=a,this}get stype(){return cn.uiTypeToString(this.type)}init(){let a=this.cfg();return null==a[this.name]&&(a[this.name]=this.defaultValue),this}getStringValue(){if(this.type!==qt.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyStringValue(a=null,o=""){let c=null==a?this.cfg():a;if(this.type!==qt.String)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let u=c[this.name];return("string"!=typeof u||null==u)&&(u=null==o?null==this.defaultValue?"":this.defaultValue:o),u}getNumberValue(){if(this.type!==qt.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyNumberValue(a=null,o=0){let c=null==a?this.cfg():a;if(this.type!==qt.Number)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let u=c[this.name];return("number"!=typeof u||null==u)&&(u=null==o?null==this.defaultValue?0:this.defaultValue:o),u}getBooleanValue(){if(this.type!==qt.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);return this.cfg()[this.name]}getAndVerifyBooleanValue(a=null,o=0){let c=null==a?this.cfg():a;if(this.type!==qt.Boolean)throw new Error(`\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f, \u0430 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d: ${this.stype}.`);let u=c[this.name];return("boolean"!=typeof u||null==u)&&(u=null==o?null!=this.defaultValue&&this.defaultValue:o),u}getAndVerifyValue(a=null,o=null){let c=null;switch(this.type){case qt.String:c=this.getAndVerifyStringValue(a,o);break;case qt.Number:c=this.getAndVerifyNumberValue(a,o);break;case qt.Boolean:c=this.getAndVerifyBooleanValue(a,o);break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u044b\u043d\u0439 \u0442\u0438\u043f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f: ${this.stype}.`)}return c}setStringValue(a){if(this.type!==qt.String)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=a,this.save()}setNumberValue(a){if(this.type!==qt.Number)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=a,this.save()}setBooleanValue(a){if(this.type!==qt.Boolean)throw new Error(`\u041d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0442\u0438\u043f \u0442\u0438\u043f\u0443: ${this.stype}.`);this.cfg()[this.name]=a,this.save()}setValue(a,o=null){return(null==o?this.cfg():o)[this.name]=a,null==o&&this.save(),this}get rawValue(){let a=this.cfg()[this.name];return null==a&&(this.cfg()[this.name]=this.defaultValue,a=this.cfg()[this.name]),a}set rawValue(a){this.cfg()[this.name]=a,this.save()}save(){this.saver&&this.saver()}}class vVe{constructor(){this.lastLoginApp=cn.builder().setType(qt.String).setDescription("\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435").setDefaultValue(""),this.defaultAppRoute=cn.builder().setType(qt.String).setDescription("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e").setDefaultValue(""),this.stopServiceFlag=cn.builder().setType(qt.Boolean).setDescription("\u0412\u044b\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441").setDefaultValue(!0),this.autoDownloadAudioFiles=cn.builder().setType(qt.Boolean).setDescription("\u041a\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0443\u0434\u0438\u043e").setDefaultValue(!1),this.parallel=cn.builder().setType(qt.Boolean).setDescription("\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u043a\u0430\u0437").setDefaultValue(!0),this.fineText=cn.builder().setType(qt.Boolean).setDescription("\u0420\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442").setDefaultValue(!0),this.lineBreaks=cn.builder().setType(qt.Boolean).setDescription("\u0420\u0430\u0437\u0440\u044b\u0432\u044b \u0441\u0442\u0440\u043e\u043a").setDefaultValue(!0),this.coloredTranslations=cn.builder().setType(qt.Boolean).setDescription("\u0426\u0432\u0435\u0442\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u043e\u0432").setDefaultValue(!0),this.fontSize=cn.builder().setType(qt.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430").setDefaultValue("0"),this.visitedBooksHelp=cn.builder().setType(qt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043d\u0438\u0433").setDefaultValue(""),this.visitedMemorialHelp=cn.builder().setType(qt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430").setDefaultValue(""),this.visitedCalculatorHelp=cn.builder().setType(qt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue(""),this.visitedCalendarHelp=cn.builder().setType(qt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044f").setDefaultValue(""),this.visitedCompilerHelp=cn.builder().setType(qt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0430").setDefaultValue(""),this.visitedSchedulerHelp=cn.builder().setType(qt.String).setDescription("\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.currentBook=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.currentBookName=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0438\u043c\u044f \u043a\u043d\u0438\u0433\u0438").setDefaultValue(""),this.currentBookLink=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043a\u043d\u0438\u0433\u0438").setDefaultValue(""),this.currentChapter=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.currentLanguages=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u044f\u0437\u044b\u043a\u0438").setDefaultValue(""),this.bookmarks=cn.builder().setType(qt.String).setDescription("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setDefaultValue(""),this.currentMemorial=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setDefaultValue(""),this.currentMemorialPage=cn.builder().setType(qt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430").setDefaultValue(1),this.currentMemorialPsalom=cn.builder().setType(qt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(0),this.memorialChapterRequested=cn.builder().setType(qt.Number).setDescription("\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u043f\u0441\u0430\u043b\u043e\u043c").setDefaultValue(-1),this.memorialPageSize=cn.builder().setType(qt.String).setDescription("\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b").setDefaultValue("30"),this.sortPersonsPriests=cn.builder().setType(qt.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0438\u043f\u044b \u0438\u043c\u0451\u043d").setDefaultValue(!1),this.sortPersonsNames=cn.builder().setType(qt.Boolean).setDescription("\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u0430").setDefaultValue(!1),this.memorialVerticalView=cn.builder().setType(qt.Boolean).setDescription("\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0438\u0434").setDefaultValue(!1),this.mergeNameOnImport=cn.builder().setType(qt.Boolean).setDescription("\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u043c\u0435\u043d\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435").setDefaultValue(!1),this.showMolitvy=cn.builder().setType(qt.Boolean).setDescription("\u041f\u043e\u043a\u0430\u0437 \u043c\u043e\u043b\u0438\u0442\u0432").setDefaultValue(!0),this.addCommentToName=cn.builder().setType(qt.Boolean).setDescription("\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0432 \u0438\u043c\u044f").setDefaultValue(!0),this.currentOffset=cn.builder().setType(qt.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435").setDefaultValue(0),this.currentPersonOffset=cn.builder().setType(qt.Number).setDescription("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u044b").setDefaultValue(1),this.memorialBook=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.memorialChapter=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.memorialLine=cn.builder().setType(qt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.memorialsTitleRemark=cn.builder().setType(qt.String).setDescription("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043f\u0438\u0441\u043e\u043a").setDefaultValue(""),this.memorialSlava1Zdrav=cn.builder().setType(qt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava2Zdrav=cn.builder().setType(qt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava3Zdrav=cn.builder().setType(qt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"').setDefaultValue(!0),this.memorialSlava1Upok=cn.builder().setType(qt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 1 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialSlava2Upok=cn.builder().setType(qt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 2 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialSlava3Upok=cn.builder().setType(qt.Boolean).setDescription('\u0421\u043b\u0430\u0432\u0430 3 "\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"').setDefaultValue(!0),this.memorialPsaltir=cn.builder().setType(qt.Boolean).setDescription("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setDefaultValue(!0),this.showFacePage=cn.builder().setType(qt.Boolean).setDescription("\u041e\u0431\u043b\u043e\u0436\u043a\u0430").setDefaultValue(!1),this.memorialPrintAllBook=cn.builder().setType(qt.Boolean).setDescription("\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0432\u0441\u044e \u043a\u043d\u0438\u0433\u0443").setDefaultValue(!1),this.audioValue=cn.builder().setType(qt.String).setDescription("\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435").setDefaultValue("1"),this.calculatorBook=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.calculatorChapter=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.calculatorLine=cn.builder().setType(qt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.calculatorFormulaText=cn.builder().setType(qt.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue(""),this.calendarBook=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.calendarChapter=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.calendarLine=cn.builder().setType(qt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.calendarText=cn.builder().setType(qt.String).setDescription("\u0424\u043e\u0440\u043c\u0443\u043b\u0430").setDefaultValue(""),this.compilerBook=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.compilerChapter=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.compilerLine=cn.builder().setType(qt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.compilerSourceText=cn.builder().setType(qt.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue(""),this.schedulerBook=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043d\u0438\u0433\u0430").setDefaultValue(""),this.schedulerChapter=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u043b\u0430\u0432\u0430").setDefaultValue(""),this.schedulerLine=cn.builder().setType(qt.Number).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043b\u0438\u043d\u0438\u044f").setDefaultValue(1),this.schedulerSourceText=cn.builder().setType(qt.String).setDescription("\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a").setDefaultValue(""),this.calendarCurrentDate=cn.builder().setType(qt.String).setDescription("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0434\u0430\u0442\u0430").setDefaultValue(""),this.schedulerCurrentSettingsName=cn.builder().setType(qt.String).setDescription("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerText=cn.builder().setType(qt.String).setDescription("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setDefaultValue(""),this.schedulerAllVariants=cn.builder().setType(qt.String).setDescription("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerServices=cn.builder().setType(qt.String).setDescription("\u0421\u043b\u0443\u0436\u0431\u044b \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue(""),this.schedulerClerics=cn.builder().setType(qt.String).setDescription("\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f").setDefaultValue("")}}class _Ve{constructor(a){this.onChange=a,this.saveCfg={},this.metaCfg=new vVe,this.values=new Map,this.setup()}get ui(){return this.metaCfg}cloneSaveCfg(a){let o={};return this.values.forEach((c,u,h)=>{c.setValue(c.getAndVerifyValue(a,null),o)}),o}add(a){return this.values.set(a.name,a.setCfg(()=>this.saveCfg).setSaver(()=>this.save())),a.init(),this}setup(){for(let a in this.metaCfg)this.add(this.metaCfg[a].setName(a))}getByName(a){return this.values.get(a)}forceSave(){this.save()}save(){this.onChange&&this.onChange(JSON.stringify(this.saveCfg))}get readonly(){return!!pageRequestedReadonly}load(a){try{const o=JSON.parse(a);this.saveCfg=this.cloneSaveCfg(o)}catch(o){}}toString(){return JSON.stringify(this.saveCfg)}}class Cg{constructor(a,o){this.enabled=a,this.onChange=o}static builder(){return new Cg(!1,a=>a)}setEnabled(a,o=!0){return this.enabled=a,o&&this.onChange(this),this}setOnChange(a){return this.onChange=a,this}}class AD{constructor(a){this.settings=a}static builder(){return new AD([])}add(a){return this.settings.push(a.setOnChange(o=>this.resetOther(o))),this}resetOther(a){!a.enabled||this.settings.forEach(o=>{o!==a&&o.setEnabled(!1,!1)})}}class Ds{constructor(a){this.uiValue=a,this.oldRawValue=null}static builder(){return new Ds(null)}setUIValue(a){return this.uiValue=a,this}resetDetector(){return this.oldRawValue=null,this}checkAndUpdate(a=null){var o,c;let u=this.oldRawValue!==(null!=a?a:null===(o=this.uiValue)||void 0===o?void 0:o.rawValue);return this.oldRawValue=null!=a?a:null===(c=this.uiValue)||void 0===c?void 0:c.rawValue,u}}let Gn=(()=>{class l{constructor(o,c,u){this.themesService=o,this.kv=c,this.config=u,this.key="uiConfig20",this.keyKafizma="kafizmyOffset",this.keyBooks="booksLink",this.ready=!1,this.pui=new _Ve(h=>{this.save(h)}),this.appRoutesId=0,this.appRoutes=null,this.mainContainerEnabled=!1,this.appParams=new Map,this.check()}getAppParam(o,c={}){return this.appParams.has(o)||this.appParams.set(o,c),this.appParams.get(o)}enableMainContainer(o){return this.mainContainerEnabled=o,this}setAppRoutes(o){let c=this.appRoutes;this.appRoutes=o;let u=++this.appRoutesId,h=this;return{unsubscribe(){u==h.appRoutesId&&(h.appRoutes=c)}}}get ui(){return this.pui.ui}get readonly(){return this.pui.readonly}check(o,c=!1){!this.ready||c?this.kv.findKey(this.key,u=>{u&&u.success&&this.pui.load(u.item.value),this.ready=!0,this.applyServiceFlag(),o&&o()}):o&&o()}applyServiceFlag(){let o=window.ThemeHandler;if(o)try{o.requestStopServiceOnExitFlag&&o.requestStopServiceOnExitFlag(this.ui.stopServiceFlag.getBooleanValue())}catch(c){}}downloadAudioFile(o,c){let u=window.ThemeHandler;if(u)try{if(this.ui.autoDownloadAudioFiles.getBooleanValue()&&u.downloadAudioFile)return u.downloadAudioFile(o,c)}catch(h){}return""}getAudioTranslations(){let o=window.ThemeHandler;if(o)try{if(o.getAudioTranslations){let c=o.getAudioTranslations(),u=JSON.parse(c),h=[];for(let d=0;d<u.length;++d)h.push(FN.cloneFrom(u[d]));return h}}catch(c){}return[]}deleteAudioTranslation(o){let c=window.ThemeHandler;if(c)try{c.deleteAudioTranslation&&c.deleteAudioTranslation(o)}catch(u){}return""}setUIReady(){let o=window.UIHandler;if(o)try{o.onUIReady&&o.onUIReady(!0)}catch(c){}}save(o){if(this.readonly)return;const c=o||this.ui.toString(),u=eu.of(this.key,c),h=g=>{};this.kv.findKey(this.key,g=>{g&&g.success?(u._id=g.item._id,this.kv.updateKey(u,h)):this.kv.insertKey(u,h),this.applyServiceFlag()});let f=()=>{if("books"!=this.config.getApplication().id)return;let g=this.ui.currentBookName.getStringValue(),m=this.ui.currentBookLink.getStringValue();if(!g)return;const _=eu.of(this.keyBooks,JSON.stringify({link:m,name:g}));this.kv.findKey(this.keyBooks,y=>{y&&y.success&&y.item?(_._id=y.item._id,this.kv.updateKey(_,b=>{})):this.kv.insertKey(_,b=>{})})},p=()=>{if("memorial"!=this.config.getApplication().id)return;let g=this.ui.currentOffset.getNumberValue();g<0&&(g=this.ui.currentPersonOffset.getNumberValue());let m={offset:17,personOffset:g,theme:this.themesService.isAutoTheme()?0:this.themesService.isLight()?1:-1};const v=eu.of(this.keyKafizma,JSON.stringify(m));this.kv.findKey(this.keyKafizma,_=>{_&&_.success&&_.item?(v._id=_.item._id,this.kv.updateKey(v,y=>{this.config.post(f,1)})):this.kv.insertKey(v,y=>{this.config.post(f,1)})})};switch(this.config.getApplication().id){case"books":f();break;case"memorial":p();break;case"d3examples":case"d3Dexamples":case"calculator":case"calendar":case"compiler":case"scheduler":case"about":break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f: ${this.config.getApplication().id}.`)}}static getKafizmNumberBy(o,c){if(c<0)return 0;const u=new Date,h=u.getTime()-6e4*u.getTimezoneOffset(),d=Math.floor(h/1e3),f=Math.floor(d/60),p=Math.floor(f/60);return(Math.floor(p/24)%20+o+c)%20+1}static getOffsetByKafizmNumber(o,c){if(c<=0)return-1;const u=new Date,h=u.getTime()-6e4*u.getTimezoneOffset(),d=Math.floor(h/1e3),f=Math.floor(d/60),p=Math.floor(f/60);let v=(Math.floor(p/24)%20+o+0)%20+1;return c>=v?c-v:c-v+20}}return l.\u0275fac=function(o){return new(o||l)(Ie(Ls),Ie(ON),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class ID{static dtr(a,o){for(var c=o>=0?o:47,u=new ArrayBuffer(a.length-1),h=new Uint8Array(u),d=c,f=0;f<a.length;++f){var g=255&(a[f]^d);f>0&&(h[f-1]=g),d=255&(d+g^5)}return h}static fromByteArray(a){let o="";for(let c=0;c<a.length;c+=2)o+=String.fromCharCode(a[c+1]<<8|a[c]);return o}}let ad=(()=>{class l{constructor(o,c){this.http=o,this.config=c,this.relativeCacheService=!0,this.cache=new Map,this.cacheTextWaiting=new Map,this.cacheZip=null,this.loaded=!1,this.loading=!1,this.failOnCacheMiss=!1,this.requests=[],this.cache=c.cache,this.loaded=0!==this.cache.size}get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":"/static"}getRestPoint(o,c,u=null){const h=this.relativeCacheService||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return _r.merge(_r.merge(c||h,null!=u?u:this.restPoint),o)}getLinkTo(o,c){const u=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return(c||u)+o}handleError(o,c){return Ei.handleError(o,c)}getText(o,c){this.loaded?this.getTextDirect(o,c):this.loading?this.requests.push(()=>{this.getTextDirect(o,c)}):this.startLoadingStatic(o,!0,c)}getBinary(o,c){this.loaded?this.zipLoadOrReturnFalse(o,!1,c)||this.getBlobRestcall(o,c):this.loading?this.requests.push(()=>{this.zipLoadOrReturnFalse(o,!1,c)}):this.startLoadingStatic(o,!1,c)}startLoadingStatic(o,c,u){this.loading=!0,this.getBlobRestcall("/static.zip",h=>{let d=()=>{this.loaded=!0,this.loading=!1,c?this.getTextDirect(o,u):this.zipLoadOrReturnFalse(o,c,u),this.requests.forEach(f=>{f()}),this.requests=[]};if(h){this.failOnCacheMiss=!0;let f=new Blob([new Uint8Array(h,0,h.byteLength)]);this.onLoadZipFile(f,d,()=>{this.cacheZip=null,this.failOnCacheMiss=!1,d()})}else this.failOnCacheMiss=!1,d()})}zipLoadOrReturnFalse(o,c,u){if(!this.cacheZip)return!1;let h=!1,d=o.startsWith("/")?o.substr(1):o,f=this.cacheZip.file(d);return f&&(h=!0,f.async(c?"string":"arraybuffer").then(p=>{Ei.callOnDone(u,p)}).catch(()=>{Ei.callOnDone(u,null)})),h}getTextDirect(o,c){if(!this.zipLoadOrReturnFalse(o,!0,c))if(this.cache.has(o)){const u=this.cache.get(o);setTimeout(()=>{Ei.callOnDone(c,u)},0)}else this.failOnCacheMiss?Ei.callOnDone(c,null):this.getTextRestcall(o,c)}getTextRestcall(o,c){let u=this.getRestPoint(o,null);return this.getTextRestcallUrl(u,c)}completeTextOnDone(o,c){let u=this.cacheTextWaiting.get(o);u&&(u.forEach(h=>{this.config.post(()=>{h&&h(c)})}),this.cacheTextWaiting.delete(o))}readArrayBufferToString(o,c){var u=new Blob([new Uint8Array(o)]),h=new FileReader;h.onload=function(d){var f;c&&c(null===(f=d.target)||void 0===f?void 0:f.result)},h.readAsText(u)}getTextRestcallUrl(o,c){return this.coding?this.getBlobRestcallUrl(o,u=>{if(u)if(o.endsWith(".txt")||o.endsWith(".xhtml")){let d=new Uint8Array(u),f=ID.fromByteArray(d);c&&c(f)}else this.readArrayBufferToString(u,c);else c&&c(null)}):this.getTextRestcallUrlRaw(o,c)}getTextRestcallUrlRaw(o,c){if(this.cache&&this.cache.has(o)){if(c){let u=this.cache.get(o);this.config.post(()=>{Ei.callOnDone(c,u)})}}else this.cacheTextWaiting.has(o)?c&&this.cacheTextWaiting.get(o).push(c):(c&&this.cacheTextWaiting.set(o,[c]),this.http.get(o,{responseType:"text"}).pipe(Xi(this.handleError)).subscribe({next:u=>{u&&this.cache.set(o,u),this.completeTextOnDone(o,u)},error:u=>{this.completeTextOnDone(o,null)}}))}getBlobRestcall(o,c){return this.getBlobRestcallUrl(this.getRestPoint(o,null),c)}getBlobRestcallUrl(o,c){let u=o;if(this.coding){let h=u.lastIndexOf(".");h>=0&&(u=u.substring(0,h)+".bin")}return this.getBlobRestcallUrlRaw(u,h=>{if(h)if(this.coding){let d=new Uint8Array(h),f=ID.dtr(d,-1);c&&c(f)}else c&&c(h);else c&&c(null)})}getBlobRestcallUrlRaw(o,c){this.http.get(o,{responseType:"arraybuffer"}).pipe(Xi(this.handleError)).subscribe(u=>{Ei.callOnDone(c,u)},u=>{Ei.callOnDone(c,null)})}save(){const o=new CD;o.file("version.txt","v.1.0"),this.cache.forEach((c,u,h)=>{o.file(u,c)}),o.generateAsync({type:"blob"}).then(c=>{new TextEncoder;const h=new Blob([c],{type:"octet/stream"}),f=`Static.Cache.${(new Date).toISOString().split("T")[0]}.zip`;rd.saveData(h,f)})}onLoadZipFile(o,c,u){const h=new FileReader;h.onload=d=>{const f=p=>{this.cacheZip=null,this.failOnCacheMiss=!1,c()};try{CD.loadAsync(h.result).then(p=>{this.cacheZip=p,c()}).catch(f)}catch(p){f()}},h.readAsArrayBuffer(o)}unpackZip(o,c){const u=this.cacheZip.file(/^.*$/);let h=0;u.forEach(d=>{d.async("string").then(f=>{this.cache.set((d.name.startsWith("/")?"":"/")+d.name,f),++h==u.length&&o()}).catch(c)})}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class zn{constructor(a,o,c,u,h,d){this.vId=a,this.vName=o,this.vDescription=c,this.vOffset=u,this.vLive=h,this.vTags=d,this.vDirty=!1,this.vPerson=null,this.vOnDirty=null}static isPriest(a){return zn.getIndex(a)>0}static getIndex(a){const o=a.name.split(" ");if(o.length<=1)return-1;const c={"\u043f\u0430\u0442\u0440.":200,"\u0441\u0445\u0438\u043c\u0438\u0442\u0440.":100,"\u043c\u0438\u0442\u0440.":100,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f.":97,"\u0430\u0440\u0445\u0438\u0435\u043f.":96,"\u0441\u0445\u0438\u0435\u043f.":95,"\u0435\u043f.":90,"\u0432\u0438\u043a.":89,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c.":81,"\u0430\u0440\u0445\u0438\u043c.":80,"\u043f\u0440\u043e\u0442\u043e\u043f\u0440.":75,"\u0441\u0445\u0438\u0438\u0433\u0443\u043c.":70,"\u0438\u0433\u0443\u043c.":70,"\u043f\u0440\u043e\u0442.":60,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c.":56,"\u0438\u0435\u0440\u043e\u043c.":55,"\u0438\u0435\u0440.":50,"\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434.":48,"\u0430\u0440\u0445\u0438\u0434.":47,"\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a.":46,"\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434.":45,"\u0438\u0435\u0440\u043e\u0434.":44,"\u0434\u0438\u0430\u043a.":43,"\u0441\u0445\u0438\u043c.":35,"\u043c\u043e\u043d.":30,"\u0438\u043d.":25,"\u0438\u043f\u043e\u0434\u0438\u0430\u043a.":20,"\u0447\u0442.":10};let u=0;return o.forEach(h=>{const d=c[h];void 0!==d&&u<d&&(u=d)}),u}static sort(a,o=!1,c=!0){zn.sortPersons(a,u=>u,o,c)}static namesCompare(a,o){return zn.trimPrefixes(a).localeCompare(zn.trimPrefixes(o))}static trimPrefixes(a){return a.indexOf(".")>0&&(a=a),a.split(" ").filter(c=>!c.trim().endsWith(".")).join(" ")}static namesSortFunction(a){return(o,c)=>{let u=a(o),h=a(c);return zn.namesCompare(u.name,h.name)}}static fullSortFunction(a,o=!0){return(c,u)=>{let h=a(c),d=a(u);if(h.live!==d.live)return h.live?-1:1;const f=zn.getIndex(h),p=zn.getIndex(d);if(f>0||p>0){let m=p-f;return 0==m&&o&&(m=zn.namesCompare(h.name,d.name)),m}let g=0;return 0==g&&o&&(g=zn.namesCompare(h.name,d.name)),0===g?0:g<0?-1:1}}static sortPersons(a,o,c=!1,u=!0){return u?a.sort(zn.fullSortFunction(o,c)):c&&a.sort(zn.namesSortFunction(o)),a}setOnDirty(a){return this.vOnDirty=a,this}revertDirty(){this.vPerson&&(this.vName=this.vPerson.name,this.vOffset=this.vPerson.offset,this.vDescription=this.vPerson.description,this.vLive=this.vPerson.live,this.vTags=this.vPerson.tags,this.vPerson=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vPerson=null}setDirty(){this.dirty=!0,null==this.vPerson&&(this.vPerson=new zn(this._id,this.name,this.description,this.offset,this.live,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vPerson}get dirty(){return this.vDirty}set dirty(a){this.vDirty=a}get _id(){return this.vId}set _id(a){this.setDirty(),this.vId=a,this.onDirty()}get name(){return this.vName}set name(a){this.setDirty(),this.vName=a,this.onDirty()}get description(){return this.vDescription}set description(a){this.setDirty(),this.vDescription=a,this.onDirty()}get offset(){return this.vOffset}set offset(a){this.setDirty(),this.vOffset=a,this.onDirty()}get live(){return this.vLive}set live(a){this.setDirty(),this.vLive=a,this.onDirty()}get tags(){return this.vTags}set tags(a){this.setDirty(),this.vTags=a,this.onDirty()}get kafizma(){return Gn.getKafizmNumberBy(17,this.offset)}}class Ev{constructor(a){this.items=a,this.handler=null,this.handlerNewPerson=null,this.handlerDeletePerson=null}clone(){let a=new Ev([...this.items]);return a.handler=this.handler,a.handlerNewPerson=this.handlerNewPerson,a.handlerDeletePerson=this.handlerDeletePerson,a}setOnDirty(a){return this.handler=a,this.items.forEach(o=>{o.setOnDirty(a)}),this}setNewPersonHandler(a){return this.handlerNewPerson=a,this}setDeletePersonHandler(a){return this.handlerDeletePerson=a,this}newPerson(a,o){if(!this.handlerNewPerson)throw new Error("handlerNewPerson is null.");return this.handlerNewPerson(a,o)}deletePerson(a,o){if(!this.handlerDeletePerson)throw new Error("handlerDeletePerson is null.");return this.handlerDeletePerson(a)}}class NN{constructor(a,o,c,u,h,d){this._id=a,this.name=o,this.description=c,this.offset=u,this.live=h,this.tags=d}}class Ml{constructor(a,o){this.success=a,this.error=o}static builder(){return new Ml(!1,"")}setSuccess(a){return this.success=a,this}setError(a){return this.error=a,this}}class LN{constructor(a,o,c){this.success=a,this.error=o,this.fileName=c}static builder(){return new LN(!1,"","")}setSuccess(a){return this.success=a,this}setError(a){return this.error=a,this}setFileName(a){return this.fileName=a,this}}class BN{constructor(a,o){this.success=a,this.text=o}static builder(){return new BN(!1,"")}setSuccess(a){return this.success=a,this}setText(a){return this.text=a,this}}class VN{constructor(a){this.items=a}static toPersons(a,o,c,u){const h=[];return a.items.forEach(d=>{h.push(new zn(d._id,d.name,d.description,d.offset,!!d.live,d.tags))}),new Ev(h).setOnDirty(o).setNewPersonHandler(c).setDeletePersonHandler(u)}}class yVe{constructor(a,o,c,u,h,d,f){this.memkey=a,this.id=o,this.name=c,this.description=u,this.offset=h,this.live=d,this.tags=f}}let Do=(()=>{class l{constructor(){this.intersectTagsMap=new Map,this.tagsHasFlagMap=new Map}static tagsHasFlag(o,c){const u=o.split(",");let h=!1;return u.forEach(d=>{d===c&&(h=!0)}),h}static addTagToTags(o,c){const u=o.split(","),h=[];let d=!1;return u.forEach(f=>{f!==c?f&&h.push(f):d=!0}),d||h.push(c),h.join(",")}static removeModificators(o){const c=o.split(","),u="\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3,\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439".split(",");let h=[];return c.forEach(d=>{u.findIndex(f=>f===d)<0&&h.push(d)}),h.join(",")}static removeTag(o,c){const u=o.split(",");let h=[];return u.forEach(d=>{d!=c&&h.push(d)}),h.join(",")}static intersectTags(o,c){let h=c;return o.split(",").filter(f=>l.tagsHasFlag(h,f)).join(",")}intersectTags(o,c){let u=this.intersectTagsMap.get(o);if(u){let d=u.get(c);if(null!=d)return d}let h=l.intersectTags(o,c);return u||(u=new Map,this.intersectTagsMap.set(o,u)),u.set(c,h),h}tagsHasFlag(o,c){let u=this.tagsHasFlagMap.get(o);if(u){let d=u.get(c);if(null!=d)return d}let h=l.tagsHasFlag(o,c);return u||(u=new Map,this.tagsHasFlagMap.set(o,u)),u.set(c,h),h}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Wte=(()=>{class l{constructor(o,c){this.http=o,this.config=c,this.persons=[],this.restPoint="/kafizmy",this.canSave=null,this.personSaved=new St,this.personsSubscribersMap=new Map}setCanSave(o){this.canSave=o}getRestPoint(o,c){return _r.merge(_r.merge(c||this.config.serviceAPIHost,this.restPoint),o)}getRestPointRaw(o,c){return _r.merge(c||this.config.serviceAPIHost,o)}getAllPromise(o,c){let u=c||-1;const h=this.personsSubscribersMap.has(u);h||this.personsSubscribersMap.set(u,[]);const d=this.personsSubscribersMap.get(u);if(h)d.push(o);else{d.push(o);{const f=null!=u&&(u>=0||-1===u),p={params:{_memkey:""+u}},g={params:{}};this.http.get(this.getRestPoint(f?"/mempersons":"/persons",null),f?p:g).pipe(Xi(Ei.handleError)).subscribe({next:m=>{const v=this.personsSubscribersMap.get(u);null!=v&&(v.forEach(_=>{_(VN.toPersons(m,y=>{},(y,b)=>{this.newPerson(u,new zn(-1,y.name,y.description,y.offset,y.live,y.tags)).then(x=>{b&&b(x)},x=>{b&&b(Ml.builder().setSuccess(!1).setError(x))})},y=>{this.deletePerson(u,y)}),null)}),this.personsSubscribersMap.delete(u))},error:m=>{const v=this.personsSubscribersMap.get(u);null!=v&&(v.forEach(_=>{_(null,m)}),this.personsSubscribersMap.delete(u))}})}}}getAll(){return new Promise((o,c)=>{this.getAllPromise((u,h)=>{u?o(u):c(h)})})}getPersons(o){return new Promise((c,u)=>{this.getAllPromise((h,d)=>{h?c(h):u(d)},o)})}save(o,c,u){if(!u&&this.canSave&&!this.canSave(c))return new Promise((d,f)=>{this.config.post(()=>{d(Ml.builder().setSuccess(!0))})});const h={params:{__id:""+c._id,_memkey:""+o,_name:c.old.name,_description:c.old.description,_offset:""+c.old.offset,_live:c.old.live?"1":"0",_newName:c.name,_newDescription:c.description,_newOffset:""+c.offset,_newLive:c.live?"1":"0",_tags:c.tags}};return new Promise((d,f)=>{this.http.get(this.getRestPoint("/updatePerson",null),h).pipe(Xi(Ei.handleError)).subscribe({next:p=>{d(p)},error:p=>{f(""+p)}}),c.clearDirty(),this.personSaved.emit(c)})}newPerson(o,c){const u={params:{_memkey:""+o,_name:c.name,_description:c.description,_offset:""+c.offset,_live:c.live?"1":"0",_tags:c.tags}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/addPerson",null),u).pipe(Xi(Ei.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(""+f)}}),c.clearDirty()})}newPersons(o){let u=[];o.forEach(f=>{u.push((f=>({memkey:f.memkey,name:f.name,description:f.description,offset:f.offset,live:f.live?1:0,tags:f.tags}))(f))});let h={persons:u};const d={params:{}};return new Promise((f,p)=>{this.http.post(this.getRestPoint("/addPersons",null),h,d).pipe(Xi(Ei.handleError)).subscribe({next:g=>{f(g)},error:g=>{p(""+g)}})})}deletePerson(o,c){const u={params:{_personId:""+c._id}};this.http.get(this.getRestPoint("/deletePersonById",null),u).pipe(Xi(Ei.handleError)).subscribe(h=>{},h=>{}),c.clearDirty()}deletePersons(o,c){const u={};let h=[];return o.forEach(d=>{h.push(d._id)}),new Promise((d,f)=>{this.http.post(this.getRestPoint("/deletePersons",null),{ids:h},u).pipe(Xi(Ei.handleError)).subscribe({next:p=>{d(p)},error:p=>{f(""+p)}})})}deleteAll(o){const c=null!=o&&o>=0,u={params:{_memkey:""+o}},h={params:{}};return new Promise((d,f)=>{this.http.get(this.getRestPoint(c?"/deleteMemorialPersons":"/deleteAllPersons",null),c?u:h).pipe(Xi(Ei.handleError)).subscribe({next:p=>{d(p)},error:p=>{f(""+p)}})})}addTempFile(o,c){const u={params:{_name:o}};return new Promise((h,d)=>{this.http.post(this.getRestPoint("/addFile",null),c,u).pipe(Xi(Ei.handleError)).subscribe({next:f=>{h(LN.builder().setSuccess(!0).setFileName(this.getRestPointRaw("/temp/"+o,null)))},error:f=>{d(null)}})})}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class ld{constructor(){this.result=!1,this.errors=""}static build(){return new ld}setResult(a){return this.result=a,this}setErrors(a){return this.errors=a,this}}class zN{constructor(){this.valid=!1,this.added=!1,this.authId="noId"}static build(){return new zN}setValid(a){return this.valid=a,this}setAdded(a){return this.added=a,this}setAuthId(a){return this.authId=a,this}}class UN{constructor(){this.errors="",this.result=!1,this.status=""}static build(){return new UN}setResult(a){return this.result=a,this}setErrors(a){return this.errors=a,this}setStatus(a){return this.status=a,this}}class aC{constructor(a,o,c){this.username=a,this.password=o,this.authId=c}static clone(a){return new aC(a.username,a.password,a.authId)}static cloneArray(a){const o=[];return a.forEach(c=>{o.push(aC.clone(c))}),o}}let lC=(()=>{class l{constructor(o){this.config=o,this.bLoggedIn=!1,this.participants=[],this.nextNewAuthId=1,this.localStorageName="",this.localStorageName=o.serviceAPIHost+"AuthSvc",this.loadData()}loadData(){const o=localStorage.getItem(this.localStorageName);if(o)try{const c=JSON.parse(o);this.participants=aC.cloneArray(c)}catch(c){this.config.addAlert(mr.of("Error: "+c,"OK",10))}}saveData(){const o=JSON.stringify(this.participants);localStorage.setItem(this.localStorageName,o)}isLoggedIn(){return new Promise((o,c)=>{this.config.post(()=>{o(ld.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((o,c)=>{this.config.post(()=>{o(ld.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((o,c)=>{this.config.post(()=>{o(ld.build().setResult(!0))})})}handleError(o,c){return Ei.handleError(o,c)}requestForUser(o,c){const u=zN.build().setValid(!1);let h=!1;if(this.participants.forEach(d=>{d.username===o&&(h=!0,u.setValid(c===d.password),u.setAuthId(d.authId=this.newAuthId()),u.setAdded(!1))}),!h&&o){const d=new aC(o,c,this.newAuthId());this.participants.push(d),u.setValid(!0),u.setAuthId(d.authId),u.setAdded(!0)}return this.saveData(),new Promise((d,f)=>{this.config.post(()=>{d(u)})})}logoutAll(){this.participants.forEach(c=>{c.authId=""});const o=ld.build();return o.setErrors(""),o.setResult(!0),new Promise((c,u)=>{this.config.post(()=>{c(o)})})}requestVersion(){this.participants.forEach(c=>{c.authId=""});const o=UN.build();return o.setErrors(""),o.setResult(!0),o.setStatus("memory.version"),new Promise((c,u)=>{this.config.post(()=>{c(o)})})}newAuthId(){return"MAT"+this.nextNewAuthId++}getParticipant(o){let c=null;return this.participants.forEach(u=>{u.authId===o&&(c=u)}),c}}return l.\u0275fac=function(o){return new(o||l)(Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),HN=(()=>{class l{constructor(o,c){this.auth=o,this.config=c,this.memkey=-1,this.authedPersons=null,this.nextPersonId=1,this.localStorageName="",this.localStorageName=c.serviceAPIHost+"KafSvc"}getUserId(){const c=this.auth.getParticipant(this.config.authId);if(!c)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return c.username}get persons(){const o=this.getUserId();return this.checkOrLoadData(),this.authedPersons[o]||(this.authedPersons[o]=new VN([])),this.authedPersons[o]}checkOrLoadData(){if(this.authedPersons)return;const o=localStorage.getItem(this.localStorageName);if(o)try{const c=JSON.parse(o);c&&(this.authedPersons=c)}catch(c){this.authedPersons={},this.config.addAlert(mr.of("Error: "+c,"OK",10))}else this.authedPersons={};this.nextPersonId=1,this.persons.items.forEach(c=>{c._id>this.nextPersonId&&(this.nextPersonId=c._id+1)})}getNextPersonId(){return++this.nextPersonId}saveData(){const o=JSON.stringify(this.authedPersons);localStorage.setItem(this.localStorageName,o)}deleteAll(o){return this.checkOrLoadData(),this.persons.items=[],this.saveData(),new Promise((c,u)=>{c(Ml.builder().setSuccess(!0))})}deletePersons(o,c){return this.checkOrLoadData(),o.forEach(u=>{let h=this.persons.items.findIndex(d=>d._id===u._id);h>=0&&this.persons.items.splice(h,1)}),this.saveData(),new Promise((u,h)=>{u(Ml.builder().setSuccess(!0))})}checkAndAddDefaultHramvkostino(){let o="hramvkostino";this.persons.items.findIndex(c=>c.tags.indexOf(o)>=0)<0&&(this.addDefaultHramvkostino(this.persons,o),this.saveData())}checkAndAddDefaultAuthors(){let o="\u0430\u0432\u0442\u043e\u0440\u044b";this.persons.items.findIndex(c=>c.tags.indexOf(o)>=0)<0&&(this.addDefaultAuthors(this.persons,o),this.saveData())}addDefaultHramvkostino(o,c="\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"){const h="\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f|-1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|-1|true\n\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f|1|true\n\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430|-1|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|0|true\n\u0421\u0435\u0440\u0433\u0438\u044f|2|true\n\u041c\u0430\u0440\u0438\u0438|3|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|4|true\n\u0422\u0430\u0442\u0438\u0430\u043d\u044b|5|true\n\u0413\u0430\u043b\u0438\u043d\u044b|6|true\n\u041f\u0430\u0432\u043b\u0430|7|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|8|true\n\u0415\u043b\u0435\u043d\u044b|9|true\n\u0412\u0430\u043b\u0435\u0440\u0438\u044f|10|true\n\u041b\u044e\u0431\u043e\u0432\u0438|11|true\n\u041d\u0430\u0434\u0435\u0436\u0434\u044b|12|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|13|true\n\u041b\u044e\u0434\u043c\u0438\u043b\u044b|14|true\n\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430|15|true\n\u041c\u0438\u0445\u0430\u0438\u043b\u0430|16|true\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430|17|true\n\u0410\u043d\u0434\u0440\u0435\u044f|18|true\n\u041c\u0430\u0440\u0438\u043d\u044b|19|true\n\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430|-1|false\n\u0412\u0438\u043a\u0442\u043e\u0440\u0430|-1|false\n\u0424\u043e\u0442\u0438\u043d\u0438\u0438|-1|false".split("\n"),d=c;h.forEach((f,p)=>{const g=f.trim().split("|");0!==g.length&&o.items.push(new NN(this.getNextPersonId(),g[0],"",+g[1],"true"===g[2],d))})}addDefaultAuthors(o,c="\u0430\u0432\u0442\u043e\u0440\u044b"){const h="\u0415\u0432\u0433\u0435\u043d\u0438\u044f|-1|true\n\u0410\u043d\u0434\u0440\u0435\u044f|-1|true".split("\n"),d=c;h.forEach((f,p)=>{const g=f.trim().split("|");0!==g.length&&o.items.push(new NN(this.getNextPersonId(),g[0],"",+g[1],"true"===g[2],d))})}getPersons(o){this.checkOrLoadData();const c=VN.toPersons(this.persons,u=>{},(u,h)=>{this.newPerson(this.memkey,new zn(-1,u.name,u.description,u.offset,u.live,u.tags)).then(d=>{h&&h(d)},d=>{h&&h(Ml.builder().setSuccess(!1).setError(""+d))})},(u,h)=>{this.deletePerson(this.memkey,u,h)});return new Promise((u,h)=>{this.config.post(()=>{u(c)})})}newPersons(o,c){return new Promise((u,h)=>{this.config.post(()=>{o.forEach(d=>{this.newPersonSync(d.memkey,new zn(d.id,d.name,d.description,d.offset,d.live,d.tags),c)}),u(Ml.builder().setSuccess(!0))},0)})}newPerson(o,c,u){return new Promise((h,d)=>{this.config.post(()=>{this.newPersonSync(o,c,u).then(f=>h(f))},0)})}newPersonSync(o,c,u){return this.checkOrLoadData(),this.persons.items.push(new NN(this.getNextPersonId(),c.name,c.description,c.offset,c.live,c.tags)),this.saveData(),new Promise((h,d)=>{h(Ml.builder().setSuccess(!0))})}save(o,c,u,h){this.checkOrLoadData();let d=!1;return this.persons.items.forEach(f=>{f._id===c._id&&(f.name=c.name,f.description=c.description,f.tags=c.tags,f.offset=c.offset,f.live=c.live,d=!0)}),d&&this.saveData(),c.clearDirty(),h&&h(new Ml(d,d?"OK":"Not found")),new Promise((f,p)=>{f(new Ml(d,d?"OK":"Not found"))})}deletePerson(o,c,u){this.checkOrLoadData();const h=this.persons.items.findIndex(f=>f._id===c._id),d=h>=0;return d&&(this.persons.items.splice(h,1),this.saveData()),c.clearDirty(),u&&u(new Ml(d,d?"OK":"Not found")),new Promise((f,p)=>{f(new Ml(d,d?"OK":"Not found"))})}addTempFile(o,c){return new Promise((u,h)=>{this.config.post(()=>{h("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.")})})}}return l.\u0275fac=function(o){return new(o||l)(Ie(lC),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class kv{constructor(a,o,c,u){this.vId=a,this.vName=o,this.vMode=c,this.vTags=u,this.vDirty=!1,this.vMemorial=null,this.vOnDirty=null,this.clazz={},this.clazzBadge={}}getOnDirty(){return this.vOnDirty}setOnDirty(a){return this.vOnDirty=a,this}revertDirty(){this.vMemorial&&(this.vName=this.vMemorial.name,this.vMode=this.vMemorial.mode,this.vMemorial=null),this.dirty=!1}clearDirty(){this.dirty=!1,this.vMemorial=null}setDirty(){this.dirty=!0,null==this.vMemorial&&(this.vMemorial=new kv(this._id,this.name,this.mode,this.tags))}onDirty(){this.vOnDirty&&this.vOnDirty(this)}get old(){return this.vMemorial}get dirty(){return this.vDirty}set dirty(a){this.vDirty=a}get _id(){return this.vId}set _id(a){this.setDirty(),this.vId=a,this.onDirty()}get name(){return this.vName}set name(a){this.setDirty(),this.vName=a,this.onDirty()}get mode(){return this.vMode}set mode(a){this.setDirty(),this.vMode=a,this.onDirty()}get tags(){return this.vTags}set tags(a){this.setDirty(),this.vTags=a,this.onDirty()}get enabled(){return"on"===this.mode}set enabled(a){this.mode=a?"on":"off"}}class CVe{constructor(a){this.items=a,this.handler=null,this.handlerNewMemorial=null,this.handlerDeleteMemorial=null}setOnDirty(a){return this.handler=a,this.items.forEach(o=>{o.setOnDirty(a)}),this}setNewMemorialHandler(a){return this.handlerNewMemorial=a,this}addNewMemorialHandler(a){if(this.handlerNewMemorial){const o=this.handlerNewMemorial;this.handlerNewMemorial=(c,u)=>{o(c,h=>{a(c,h.success?u:void 0),!h.success&&u&&u(h)})}}else this.handlerNewMemorial=a;return this}setDeleteMemorialHandler(a){return this.handlerDeleteMemorial=a,this}addDeleteMemorialHandler(a){if(this.handlerDeleteMemorial){const o=this.handlerDeleteMemorial;this.handlerDeleteMemorial=(c,u)=>{o(c,h=>{a(c,h.success?u:void 0),!h.success&&u&&u(h)})}}else this.handlerDeleteMemorial=a;return this}newMemorial(a,o){if(this.handlerNewMemorial)return this.handlerNewMemorial(a,o);o&&o(Vs.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}deleteMemorial(a,o){if(this.handlerDeleteMemorial)return this.handlerDeleteMemorial(a,o);o&&o(Vs.builder().setSuccess(!1).setError("\u041d\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430."))}}class Vs{constructor(a,o){this.success=a,this.error=o}static builder(){return new Vs(!1,"")}setSuccess(a){return this.success=a,this}setError(a){return this.error=a,this}}class xVe{constructor(a,o,c,u){this._id=a,this.name=o,this.mode=c,this.tags=u}}class PD{constructor(a){this.items=a}static toMemorials(a,o,c,u){const h=[];return a.items.forEach(d=>{h.push(new kv(d._id,d.name,d.mode,d.tags))}),new CVe(h).setOnDirty(o).setNewMemorialHandler(c).setDeleteMemorialHandler(u)}}let Gte=(()=>{class l{constructor(o,c,u){this.http=o,this.config=c,this.auth=u,this.restPoint="/kafizmy",this.canSave=null,this.memorialsSubscribers=null,this.memorialSaved=new St}setCanSave(o){this.canSave=o}getRestPoint(o,c){return _r.merge(_r.merge(c||this.config.serviceAPIHost,this.restPoint),o)}getRestPointRaw(o,c){return _r.merge(c||this.config.serviceAPIHost,o)}getAllSubscribe(){return new Promise((o,c)=>{if(null!=this.memorialsSubscribers)this.memorialsSubscribers.push((u,h)=>{u?o(u):c(h)});else{this.memorialsSubscribers=[],this.memorialsSubscribers.push((h,d)=>{h?o(h):c(d)});const u={params:{}};this.http.get(this.getRestPoint("/memorials",null),u).pipe(Xi(Ei.handleError)).subscribe({next:h=>{if(null==this.memorialsSubscribers)return;const d=this.memorialsSubscribers;this.memorialsSubscribers=null,d.forEach(f=>{f(PD.toMemorials(h,p=>{this.save(p)},(p,g)=>{this.newMemorial(new kv(-1,p,"on","")).then(m=>g?g(m):null,m=>g?g(Vs.builder().setError(m)):null)},(p,g)=>{this.deleteMemorial(p).then(m=>g?g(m):null,m=>g?g(Vs.builder().setError(m)):null)}),null)})},error:h=>{if(null==this.memorialsSubscribers)return;const d=this.memorialsSubscribers;this.memorialsSubscribers=null,d.forEach(f=>{f(null,h)})}})}})}isReady(){return new Promise((o,c)=>{this.config.post(()=>{const h=this.auth.getParticipant(this.config.authId);o(Vs.builder().setSuccess(!!h))})})}getAll(){return this.getAllSubscribe()}save(o,c){if(!c&&this.canSave&&!this.canSave(o)||!o.dirty)return new Promise((h,d)=>{this.config.post(()=>{h(Vs.builder().setSuccess(!0))})});const u={params:{_name:o.old.name,_mode:o.old.mode,_newName:o.name,_newMode:o.mode,_newTags:o.tags}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/updateMemorial",null),u).pipe(Xi(Ei.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}}),o.clearDirty(),this.memorialSaved.emit(o)})}newMemorial(o,c){const u={params:{_name:o.name,_mode:o.mode}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/addMemorial",null),u).pipe(Xi(Ei.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}}),o.clearDirty()})}deleteMemorial(o,c){const u={params:{_name:o.name,_mode:o.mode}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/deleteMemorial",null),u).pipe(Xi(Ei.handleError)).subscribe({next:f=>{h(f)},error:f=>{d(null)}}),o.clearDirty()})}deleteAll(){const o={params:{}};return new Promise((c,u)=>{this.http.get(this.getRestPoint("/deleteAllMemorials",null),o).pipe(Xi(Ei.handleError)).subscribe({next:h=>{c(h)},error:h=>{u(null)}})})}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on),Ie(lC))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),jte=(()=>{class l{constructor(o,c,u){this.kafizmSvc=o,this.auth=c,this.config=u,this.memkey=-1,this.authedMemorials=null,this.localStorageName="",this.nextMemorialId=1,this.localStorageName=u.serviceAPIHost+"MemSvc"}isReady(){return new Promise((o,c)=>{this.config.post(()=>{const h=this.auth.getParticipant(this.config.authId);o(Vs.builder().setSuccess(!!h))})})}getUserId(){const c=this.auth.getParticipant(this.config.authId);if(!c)throw new Error("\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.");return c.username}get memorials(){const o=this.getUserId();return this.authedMemorials[o]||(this.authedMemorials[o]=new PD([])),this.authedMemorials[o]}getNextMemorialId(){return++this.nextMemorialId}checkOrloadData(){const o=()=>{let u=!0;this.memorials.items.forEach(d=>{"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439"===d.name&&(u=!1)})};if(this.authedMemorials)return void o();const c=localStorage.getItem(this.localStorageName);if(c)try{const u=JSON.parse(c);this.authedMemorials=u||{}}catch(u){this.authedMemorials={},this.config.addAlert(mr.of("Error: "+u,"OK",10))}this.authedMemorials||(this.authedMemorials={}),o(),this.nextMemorialId=1,this.memorials.items.forEach(u=>{u._id>this.nextMemorialId&&(this.nextMemorialId=u._id+1)})}saveData(){const o=JSON.stringify(this.authedMemorials);localStorage.setItem(this.localStorageName,o)}addTempFile(o,c,u){this.checkOrloadData()}deleteAll(){return new Promise((o,c)=>{this.config.post(()=>{this.checkOrloadData(),this.memorials.items=[],this.saveData(),o(Vs.builder().setSuccess(!0))})})}deleteMemorial(o){return new Promise((c,u)=>{this.config.post(()=>{this.checkOrloadData();const h=this.memorials.items.findIndex(f=>f._id===o._id),d=h>=0;d&&this.memorials.items.splice(h,1),this.saveData(),o.clearDirty(),c(new Vs(d,""))})})}getAll(){return new Promise((o,c)=>{this.config.post(()=>{this.checkOrloadData();const u=PD.toMemorials(this.memorials,h=>{},(h,d)=>{this.newMemorial(new kv(-1,h,"on","")).then(f=>d?d(f):null,f=>d?d(Vs.builder().setError(f)):null)},(h,d)=>{this.deleteMemorial(h).then(f=>d?d(f):null,f=>d?d(Vs.builder().setError(f)):null)});o(u)})})}getAllSubscribe(){return new Promise((o,c)=>{this.config.post(()=>{this.checkOrloadData();const u=PD.toMemorials(this.memorials,h=>{},(h,d)=>{this.newMemorial(new kv(-1,h,"on","")).then(f=>d?d(f):null,f=>d?d(Vs.builder().setError(f)):null)},(h,d)=>{this.deleteMemorial(h).then(f=>d?d(f):null,f=>d?d(Vs.builder().setError(f)):null)});o(u)})})}newMemorial(o){return new Promise((c,u)=>{this.config.post(()=>{if(this.checkOrloadData(),null!=this.memorials.items.find(d=>d.name==o.name))return void u(`\u0423\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c: '${o.name}'.`);let h=o.tags;h||(h+=o.name+",\u0421\u043b\u0430\u0432\u0430 1,\u0421\u043b\u0430\u0432\u0430 2,\u0421\u043b\u0430\u0432\u0430 3"),this.memorials.items.push(new xVe(this.getNextMemorialId(),o.name,o.mode,h)),this.saveData(),"hramvkostino"==o.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==o.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),c(new Vs(!0,""))})})}save(o,c){return new Promise((u,h)=>{this.config.post(()=>{this.checkOrloadData();let d=!1;this.memorials.items.forEach(f=>{f._id===o._id&&(f.name=o.name,f.tags=o.tags,f.mode=o.mode,d=!0)}),d&&this.saveData(),"hramvkostino"==o.name?this.kafizmSvc.checkAndAddDefaultHramvkostino():"\u0430\u0432\u0442\u043e\u0440\u044b"==o.name&&this.kafizmSvc.checkAndAddDefaultAuthors(),o.clearDirty(),u(new Vs(d,d?"OK":"Not found"))})})}}return l.\u0275fac=function(o){return new(o||l)(Ie(HN),Ie(lC),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Av=(()=>{class l{constructor(o,c,u){this.msRest=o,this.msMemory=c,this.config=u,this.memorials=null,this.subscribers=null,this.ms=null,this.updateMemorialsAction=new ZW(h=>{this.getAll().then(d=>{null==h||h.map(f=>f(!0))})},100,(h,d)=>this.config.post(d,h)),this.config.isMemoryServerType()&&(this.ms=this.msMemory),(!this.ms||this.config.isRestServerType())&&(this.ms=this.msRest)}getMemorials(){return this.memorials}getActivePredefinedMemorialsRaw(){return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"]}getActivePredefinedMemorials(){let o=[],c=this.getActivePredefinedMemorialsRaw();return this.memorials&&this.memorials.items&&this.memorials.items.forEach(u=>{c.forEach(h=>{h==u.name&&o.indexOf(h)<0&&o.push(h)})}),o}setMemorials(o){this.memorials=o,this.memorials.addDeleteMemorialHandler((c,u)=>{this.reloadMemorials(),u&&u(new Vs(!0,""))}),this.memorials.addNewMemorialHandler((c,u)=>{this.reloadMemorials(()=>{u&&u(new Vs(!0,""))})})}isReady(){return this.ms?this.ms.isReady():new Promise((o,c)=>{this.config.post(()=>{c(Vs.builder().setSuccess(!1).setError("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0433\u043e\u0442\u043e\u0432."))})})}getAll(){return new Promise((o,c)=>{if(null==this.subscribers)if(null!=this.memorials)o(this.memorials);else{this.subscribers=[(h,d)=>{h?o(h):d&&c(d)}];const u=(h,d)=>{if(h&&this.setMemorials(h),null!=this.subscribers){let f=this.subscribers;this.subscribers=null,f.forEach(p=>{d?p(null,d):p(this.memorials,null)})}};this.ms.getAll().then(h=>{u(h,null)},h=>{u(null,h)})}else this.subscribers.push((u,h)=>{u?o(u):h&&c(h)})})}save(o,c){return new Promise((u,h)=>{this.ms.save(o,c).then(d=>{this.reloadMemorials(),u(d)},d=>{h(d)})})}newMemorial(o){return new Promise((c,u)=>{this.ms.newMemorial(o).then(h=>{this.reloadMemorials(d=>{h&&h.success?c(h):u(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${o.name}"`)})},h=>{u(h)})})}deleteMemorial(o){return new Promise((c,u)=>{this.ms.deleteMemorial(o).then(h=>{this.reloadMemorials(d=>{h&&h.success?c(h):u(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430: "${o.name}"`)})},h=>{u(h)})})}deleteAll(){return new Promise((o,c)=>{this.ms.deleteAll().then(u=>{this.reloadMemorials(h=>{u&&u.success?o(u):c('\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u043e\u0432."')})},u=>{c(u)})})}reloadMemorials(o){this.memorials=null,this.updateMemorialsAction.requestAction(o)}}return l.\u0275fac=function(o){return new(o||l)(Ie(Gte),Ie(jte),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),kf=(()=>{class l extends class bVe{constructor(){this.handler=()=>{},this.onChangesEvent=new pt,this.enabled=!0}setDetectChangesHandler(a){return this.handler=a,this}enableChangeDetector(a){this.enabled=a}getChangeDetector(){return this.onChangesEvent.asObservable()}detectedChanges(a){this.enabled&&(this.onChangesEvent.next(a),this.handler())}}{constructor(o,c,u,h){super(),this.ksRest=o,this.ksMemory=c,this.config=u,this.memorialsSvc=h,this.memkey=-1,this.persons=null,this.subscribers=null,this.ks=null,this.predefinedPersons=null,this.activePredefinedMemorialTags="",this.changesId=0,this.virtualIdBase=1e8,this.config.isMemoryServerType()&&(this.ks=this.ksMemory),(!this.ks||this.config.isRestServerType())&&(this.ks=this.ksRest),this.setupPredefinedPersons()}newChangesId(){return++this.changesId}getPersonsDirect(){return this.persons}reloadPersons(){this.persons=null,this.getPersons(-1)}getPersons(o){return new Promise((c,u)=>{var h;let d=(f,p)=>{f?c(f):u(""+p)};null==this.subscribers?null!=this.persons?c(this.persons):(this.subscribers=[d],null===(h=this.ks)||void 0===h||h.getPersons(this.memkey).then(f=>{if(this.persons=this.filterPersonsAndPredefined(f),null!=this.subscribers){const p=this.subscribers;this.subscribers=null,p.forEach(g=>{g(this.persons,null)})}this.config.post(()=>{this.runDetectAnyChanges()})},f=>{if(null!=this.subscribers){const p=this.subscribers;this.subscribers=null,p.forEach(g=>{g(null,""+f)})}})):this.subscribers.push(d)})}autoRejectOnFail(o){return this.ks?o(this.ks):new Promise((c,u)=>{this.config.post(()=>{u("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}runDetectAnyChanges(){return this.detectedChanges(new zn(-1,"","",-1,!0,"")),this}runChangeDetector(o){return new Promise((c,u)=>{o.then(h=>{c(h),this.runDetectAnyChanges()},h=>{u(u),this.runDetectAnyChanges()})})}save(o,c,u){return this.autoRejectOnFail(h=>this.runChangeDetector(h.save(this.memkey,c,u)))}deleteAll(o){return this.autoRejectOnFail(c=>this.runChangeDetector(c.deleteAll(this.memkey)))}deletePersons(o){return this.autoRejectOnFail(c=>this.runChangeDetector(c.deletePersons(o,this.memkey)))}newPerson(o,c,u){return this.autoRejectOnFail(h=>this.runChangeDetector(h.newPerson(this.memkey,c,u)))}newPersons(o,c){return this.autoRejectOnFail(u=>this.runChangeDetector(u.newPersons(o,c)))}addTempFile(o,c){return this.autoRejectOnFail(u=>u.addTempFile(o,c))}filterPersonsAndPredefined(o,c=!0){let u=o.items,h=o;h.items=[];let d=new Ev([]),f=!1;u.forEach(g=>{this.isValidPerson(g)?h.items.push(g):g._id<this.virtualIdBase&&(f=!0,this.removePredefinedTags(g)?(this.ks.save(this.memkey,g,!0),h.items.push(g)):d.items.push(g))}),f&&this.config.addAlert(mr.of("\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.","OK",30));let p=this.memorialsSvc.getActivePredefinedMemorials();return this.activePredefinedMemorialTags=p.join(","),this.predefinedPersons.forEach((g,m)=>{p.forEach(v=>{v==m&&h.items.push(...g.clone().items)})}),d.items.length>0&&c&&this.deletePersons(d.items).then(g=>{this.config.addAlert(mr.of(g.success?"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.":g.error,"OK",30))},g=>{this.config.addAlert(mr.of(g,"OK",30))}),o}removePredefinedTags(o){let c=!1,u=o.tags;["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(p=>{let g=Do.removeTag(u,p);g!=u&&(c=!0,u=g)});let f=""!=Do.removeModificators(u);return f&&(o.tags=u),f}isValidPerson(o){let c=Do.removeModificators(o.tags),h=!1;return["\u0430\u0432\u0442\u043e\u0440\u044b","hramvkostino"].forEach(d=>{let f=Do.removeTag(c,d);f!=c&&(h=!0),c=f}),!h}setupPredefinedPersons(){this.predefinedPersons=new Map;let o=this.virtualIdBase,c=()=>++o,u="\u0430\u0432\u0442\u043e\u0440\u044b";this.predefinedPersons.set(u,new Ev([new zn(c(),"\u0415\u0432\u0433\u0435\u043d\u0438\u044f","",-1,!0,u),new zn(c(),"\u0410\u043d\u0434\u0440\u0435\u044f","",-1,!0,u)])),u="hramvkostino",this.predefinedPersons.set(u,new Ev([new zn(c(),"\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","",-1,!0,u),new zn(c(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,u),new zn(c(),"\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",-1,!0,u),new zn(c(),"\u0438\u0435\u0440. \u0414\u0438\u043e\u043d\u0438\u0441\u0438\u044f","",1,!0,u),new zn(c(),"\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","",-1,!0,u),new zn(c(),"\u0434\u0438\u0430\u043a. \u0413\u0435\u043e\u0440\u0433\u0438\u044f","",-1,!0,u),new zn(c(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",0,!0,u),new zn(c(),"\u0421\u0435\u0440\u0433\u0438\u044f","",2,!0,u),new zn(c(),"\u041c\u0430\u0440\u0438\u0438","",3,!0,u),new zn(c(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",4,!0,u),new zn(c(),"\u0422\u0430\u0442\u0438\u0430\u043d\u044b","",5,!0,u),new zn(c(),"\u0413\u0430\u043b\u0438\u043d\u044b","",6,!0,u),new zn(c(),"\u041f\u0430\u0432\u043b\u0430","",7,!0,u),new zn(c(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",8,!0,u),new zn(c(),"\u0415\u043b\u0435\u043d\u044b","",9,!0,u),new zn(c(),"\u0412\u0430\u043b\u0435\u0440\u0438\u044f","",10,!0,u),new zn(c(),"\u041b\u044e\u0431\u043e\u0432\u0438","",11,!0,u),new zn(c(),"\u041d\u0430\u0434\u0435\u0436\u0434\u044b","",12,!0,u),new zn(c(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",13,!0,u),new zn(c(),"\u041b\u044e\u0434\u043c\u0438\u043b\u044b","",14,!0,u),new zn(c(),"\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d\u0430","",15,!0,u),new zn(c(),"\u041c\u0438\u0445\u0430\u0438\u043b\u0430","",16,!0,u),new zn(c(),"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","",17,!0,u),new zn(c(),"\u0410\u043d\u0434\u0440\u0435\u044f","",18,!0,u),new zn(c(),"\u041c\u0430\u0440\u0438\u043d\u044b","",19,!0,u),new zn(c(),"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","",-1,!1,u),new zn(c(),"\u0412\u0438\u043a\u0442\u043e\u0440\u0430","",-1,!1,u),new zn(c(),"\u0424\u043e\u0442\u0438\u043d\u0438\u0438","",-1,!1,u)]))}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wte),Ie(HN),Ie(on),Ie(Av))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const wVe=["mySvg"];let $te=(()=>{class l{constructor(o,c){this.d3Svc=o,this.config=c,this.svgImage=null,this.inited=!1,this.igen=null,this.cfgD3Config=null,this.iWidth=512,this.iHeight=512}get d3Config(){return this.cfgD3Config}set d3Config(o){this.cfgD3Config=o,this.svgImage&&this.setup(!0)}set generator(o){this.igen=o}get generator(){return this.igen}get width(){return this.svgImage&&this.iWidth!=this.svgImage.logoWidth&&this.updateSize(),this.iWidth}get height(){return this.svgImage&&this.iHeight!=this.svgImage.logoHeight&&this.updateSize(),this.iHeight}updateSize(){this.config.post(()=>{this.svgImage&&(this.iWidth=this.svgImage.logoWidth,this.iHeight=this.svgImage.logoHeight)})}setup(o=!1){this.inited&&!o||(this.generator&&(this.svgImage=new lN(this.generator.getWidth(),this.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator,null,this.d3Config),this.svgImage.updateSvg()),this.inited=!0)}ngOnInit(){}ngAfterViewInit(){this.setup()}}return l.\u0275fac=function(o){return new(o||l)(R(cD),R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-d3-svg"]],viewQuery:function(o,c){if(1&o&&ti(wVe,5),2&o){let u;Vt(u=zt())&&(c.mySvgRef=u.first)}},inputs:{d3Config:"d3Config",generator:"generator"},decls:2,vars:2,consts:[[1,"centeredImage","fade-in-3"],["mySvg",""]],template:function(o,c){1&o&&(Od(),me(0,"svg",0,1)),2&o&&et("width",c.width)("height",c.height)},styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),l})(),qte=(()=>{class l{constructor(o,c){this.http=o,this.config=c,this.bLoggedIn=!1,this.restPoint="/participant"}getRestPoint(o,c){const u=this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return _r.merge(_r.merge(c||u,this.restPoint),o)}isLoggedIn(){return new Promise((o,c)=>{this.config.post(()=>{o(ld.build().setResult(this.bLoggedIn))})})}login(){return this.bLoggedIn=!0,new Promise((o,c)=>{this.config.post(()=>{o(ld.build().setResult(!0))})})}logout(){return this.bLoggedIn=!1,new Promise((o,c)=>{this.config.post(()=>{o(ld.build().setResult(!0))})})}requestForUser(o,c){const u={params:{username:o,password:c}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/login",null),u).pipe(Xi(Ei.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}logoutAll(){const o={params:{}};return new Promise((c,u)=>{this.http.get(this.getRestPoint("/logoutAll",null),o).pipe(Xi(Ei.handleError)).subscribe({next:h=>c(h),error:h=>u(h)})})}requestVersion(){const o={params:{}};return new Promise((c,u)=>{this.http.get(this.getRestPoint("/version",null),o).pipe(Xi(Ei.handleError)).subscribe({next:h=>c(h),error:h=>u(h)})})}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),tu=(()=>{class l{constructor(o,c,u){this.config=o,this.authRest=c,this.authMemory=u,this.auth=null,this.config.isMemoryServerType()&&(this.auth=u),(!this.auth||this.config.isRestServerType())&&(this.auth=c)}autoRejectOnFail(o){return this.auth?o(this.auth):new Promise((c,u)=>{this.config.post(()=>{u("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.")})})}isLoggedIn(){return this.autoRejectOnFail(o=>o.isLoggedIn())}login(){return this.autoRejectOnFail(o=>o.login())}logout(){return this.autoRejectOnFail(o=>o.logout())}requestForUser(o,c){return this.autoRejectOnFail(u=>u.requestForUser(o,c))}logoutAll(){return this.autoRejectOnFail(o=>o.logoutAll())}requestVersion(){return this.autoRejectOnFail(o=>o.requestVersion())}}return l.\u0275fac=function(o){return new(o||l)(Ie(on),Ie(qte),Ie(lC))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class xg{constructor(a){this.data=a}static builder(){return new xg(null)}setData(a){return this.data=a,this}}class Pi{constructor(a,o,c){this.text=a,this.onClick=o,this.tag=c}static builder(){return new Pi("",null,null)}setText(a){return this.text=a,this}setOnClick(a){return this.onClick=a,this}setTag(a){return this.tag=a,this}click(a){this.onClick&&this.onClick(a)}}let Af=(()=>{class l{constructor(o,c,u){this.config=o,this.uiConfig=c,this.authSvc=u,this.aComponents=[],this.menuLinksOld=null,this.menuLinks=[],this.serviceReady=!1}get components(){return this.syncComponents(),this.aComponents}set components(o){this.aComponents=o}isComponentType(o,c){var u;if(this.components.length<=0)return!1;let h=this.components[0].data instanceof o;return h&&null!=c?(null===(u=this.components[0].data.component)||void 0===u?void 0:u.data)instanceof c:h}addMenuLink(o){return this.menuLinks.push(o),this}applyMenuAppRoutes(o=!1){let c=this.uiConfig.setAppRoutes(this.menuLinks);o||(this.menuLinksOld=c)}ngOnInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}ngOnDestroy(){this.menuLinksOld&&this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0)}ngAfterViewInit(){this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}syncComponents(){}doLogin(o){this.authSvc.isLoggedIn().then(c=>{c.result?(this.serviceReady=!1,o&&o(this.serviceReady)):this.authSvc.login().then(u=>{if(u.result){let h="hramvkostino",d="hramvkostino";this.authSvc.requestForUser(h,d).then(f=>{this.serviceReady=f.valid,this.config.authId=f.authId,this.config.authBody=btoa(h+":"+d),o&&o(this.serviceReady)})}})})}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu))},l.\u0275cmp=Ye({type:l,selectors:[["ng-component"]],decls:0,vars:0,template:function(o,c){},encapsulation:2}),l})();var at=(()=>(function(l){l.NZ_KZ="NZ_KZ",l.NZ_KI="NZ_KI",l.NZ_KU="NZ_KU",l.NZ_KP="NZ_KP",l.VZ_KZ="VZ_KZ",l.VZ_KI="VZ_KI",l.VZ_KU="VZ_KU",l.VZ_KP="VZ_KP",l.SL_OV="SL_OV",l.SL_BL="SL_BL",l.SL_LG="SL_LG",l.SL_TF="SL_TF"}(at||(at={})),at))();class WN{static builder(){return new WN}build(a,o,c,u,h,d,f,p){let g=jN.builder(),v=_=>{g.switchState(_,o,p,()=>{g.hideOrShowMainMenu(_,o,p,()=>{_.complementedByMenuName&&g.hideOrShowStateByType(_.complementedByMenuName,_.on,null,o,p,[_.complementedByMenuName]);let y=c();y&&y(_)})})};return new SVe(g,o,a,u,h,d,f,Math.PI,p).add(st.builder().setText("\u041d\u043e\u0432\u044b\u0439 \u0417\u0430\u0432\u0435\u0442").setSize(Math.PI).setOnClick(v)).add(st.builder().setText("\u0412\u0435\u0442\u0445\u0438\u0439 \u0417\u0430\u0432\u0435\u0442").setOnClick(v).setTypeName(Br.DOWN)).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI).setComplementedByTypeName(at.NZ_KZ).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u043e\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(at.VZ_KZ).setOnClick(v).setTypeName(Br.DOWN)).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0430\u044f").setSize(Math.PI).setComplementedByTypeName(at.NZ_KI).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435").setComplementedByTypeName(at.VZ_KI).setOnClick(v).setTypeName(Br.DOWN)).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setSize(Math.PI/2).setComplementedByTypeName(at.NZ_KU).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0430\u044f").setComplementedByTypeName(at.NZ_KP).setSize(Math.PI/2).setOnClick(v)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u043f\u0440\u043e\u0440\u043e\u0447\u0435\u0441\u043a\u0438\u0435").setSize(Math.PI/2).setComplementedByTypeName(at.VZ_KP).setOnClick(v).setTypeName(Br.DOWN)).add(st.builder().setText("\u041a\u043d\u0438\u0433\u0438 \u0443\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435").setComplementedByTypeName(at.VZ_KU).setOnClick(v).setTypeName(Br.DOWN)).newLine().setAlpha0(Math.PI/6*4).add(st.builder().setText("   \u041e \u0432\u0435\u0440\u0435   ").setComplementedByTypeName(at.SL_OV).setTypeName(Br.AROUND).setSize(Math.PI/6*2).setOnClick(v)).add(st.builder().setText("\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0430\u044f \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u0430\u044f \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430").setTypeName(Br.AROUND).setSize(Math.PI/6*4).setDelayIndex(3).setComplementedByTypeName(at.SL_BL).setOnClick(v)).add(st.builder().setText("   \u042f\u0437\u044b\u043a   ").setTypeName(Br.AROUND).setSize(Math.PI/6*2).setDelayIndex(1).setOnClick(v)).add(st.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u044f \u0424\u0435\u043e\u0444\u0438\u043b\u0430\u043a\u0442\u0430 \u0411\u043e\u043b\u0433\u0430\u0440\u0441\u043a\u043e\u0433\u043e").setTypeName(Br.AROUND).setDelayIndex(2).setComplementedByTypeName(at.SL_TF).setOnClick(v)).newLine(!0,!0).setAlpha0(0).newLine().add(st.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.NZ_KZ)).newLine().add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).newLine().add(st.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).add(st.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KZ)).newLine(!0,!0).newLine().newLine().setAlpha0(0).add(st.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(v).setTypeName(at.NZ_KI)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().add(st.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.NZ_KU)).newLine().add(st.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(v).setTypeName(at.NZ_KU)).newLine().add(st.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.NZ_KU)).newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(st.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).newLine().setAlpha0(Math.PI/4*5).add(st.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(v).setTypeName(at.NZ_KU)).add(st.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(v).setTypeName(at.NZ_KU)).newLine(!0,!0).setAlpha0(0).setRadialSize(Math.PI).newLine().newLine().newLine().add(st.builder().setText("\u041e\u0442\u043a\u0440\u043e\u0432\u0435\u043d\u0438\u0435 \u0418\u043e\u0430\u043d\u043d\u0430 \u0411\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u0430").setOnClick(v).setTypeName(at.NZ_KP)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).newLine().add(st.builder().setText("\u041a\u043d\u0438\u0433\u0430 \u0411\u044b\u0442\u0438\u044f").setOnClick(v).setTypeName(at.VZ_KZ)).newLine().add(st.builder().setText("\u0418\u0441\u0445\u043e\u0434").setOnClick(v).setTypeName(at.VZ_KZ)).add(st.builder().setText("\u041b\u0435\u0432\u0438\u0442").setOnClick(v).setTypeName(at.VZ_KZ)).newLine().add(st.builder().setText("\u0427\u0438\u0441\u043b\u0430").setOnClick(v).setTypeName(at.VZ_KZ)).add(st.builder().setText("\u0412\u0442\u043e\u0440\u043e\u0437\u0430\u043a\u043e\u043d\u0438\u0435").setOnClick(v).setTypeName(at.VZ_KZ)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(st.builder().setText("\u0418\u0438\u0441\u0443\u0441\u0430 \u041d\u0430\u0432\u0438\u043d\u0430").setOnClick(v).setTypeName(at.VZ_KI)).newLine().add(st.builder().setText("\u0421\u0443\u0434\u0435\u0439 \u0418\u0437\u0440\u0430\u0438\u043b\u0435\u0432\u044b\u0445").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0420\u0443\u0444\u0438").setOnClick(v).setTypeName(at.VZ_KI)).newLine().add(st.builder().setText("1 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("2 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("3 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("4 \u0426\u0430\u0440\u0441\u0442\u0432").setOnClick(v).setTypeName(at.VZ_KI)).newLine().add(st.builder().setText("1 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("2 \u041f\u0430\u0440\u0430\u043b\u0438\u043f\u043e\u043c\u0435\u043d\u043e\u043d").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("1 \u0415\u0437\u0434\u0440\u044b").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u041d\u0435\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KI)).newLine().setRadialSize(Math.PI).add(st.builder().setText("2 \u0415\u0437\u0434\u0440\u044b").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0422\u043e\u0432\u0438\u0442\u0430").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0418\u0443\u0434\u0438\u0444\u0438").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("\u0415\u0441\u0444\u0438\u0440\u0438").setOnClick(v).setTypeName(at.VZ_KI)).newLine(!0,!1,!1).setRadialSize(Math.PI).setAlpha0(0).add(st.builder().setText("1 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("2 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(v).setTypeName(at.VZ_KI)).add(st.builder().setText("3 \u041c\u0430\u043a\u043a\u0430\u0432\u0435\u0439\u0441\u043a\u0430\u044f").setOnClick(v).setTypeName(at.VZ_KI)).newLine(!0,!0).setAlpha0(Math.PI).setRadialSize(Math.PI).add(st.builder().setText(" \u0418\u043e\u0432\u0430 ").setOnClick(v).setTypeName(at.VZ_KU)).newLine().setAlpha0(Math.PI).setRadialSize(Math.PI).add(st.builder().setText("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c").setOnClick(v).setTypeName(at.VZ_KU)).add(st.builder().setText("\u041f\u0440\u0438\u0442\u0447\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(v).setTypeName(at.VZ_KU)).newLine().add(st.builder().setText("\u042d\u043a\u043a\u043b\u0435\u0437\u0438\u0430\u0441\u0442").setOnClick(v).setTypeName(at.VZ_KU)).add(st.builder().setText("\u041f\u0435\u0441\u043d\u044c \u041f\u0435\u0441\u043d\u0435\u0439 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u043e\u0432\u044b\u0445").setOnClick(v).setTypeName(at.VZ_KU)).newLine().add(st.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0421\u043e\u043b\u043e\u043c\u043e\u043d\u0430").setOnClick(v).setTypeName(at.VZ_KU)).add(st.builder().setText("\u041f\u0440\u0435\u043c\u0443\u0434\u0440\u043e\u0441\u0442\u0438 \u0418\u0438\u0441\u0443\u0441\u0430").setOnClick(v).setTypeName(at.VZ_KU)).newLine(!0,!0).setRadialSize(Math.PI).add(st.builder().setText(" \u0418\u0441\u0430\u0438\u0438 ").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).newLine().add(st.builder().setText("\u041f\u043b\u0430\u0447 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u0435 \u0418\u0435\u0440\u0435\u043c\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).newLine().add(st.builder().setText("\u0412\u0430\u0440\u0443\u0445\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0418\u0435\u0437\u0435\u043a\u0438\u043b\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0414\u0430\u043d\u0438\u0438\u043b\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041e\u0441\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).newLine().add(st.builder().setText("\u0418\u043e\u0438\u043b\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u043c\u043e\u0441\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u0432\u0434\u0438\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0418\u043e\u043d\u044b").setOnClick(v).setTypeName(at.VZ_KP)).newLine().setRadialSize(2*Math.PI).add(st.builder().setText("\u041c\u0438\u0445\u0435\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041d\u0430\u0443\u043c\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u0432\u0432\u0430\u043a\u0443\u043c\u0430").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0421\u043e\u0444\u043e\u043d\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0410\u0433\u0433\u0435\u044f").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u0417\u0430\u0445\u0430\u0440\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("\u041c\u0430\u043b\u0430\u0445\u0438\u0438").setOnClick(v).setTypeName(at.VZ_KP)).add(st.builder().setText("3 \u0415\u0437\u0434\u0440\u044b").setOnClick(v).setTypeName(at.VZ_KP)).newLine(!0,!0).setRadialSize(Math.PI).newLine().newLine().setRadialSize(2*Math.PI).add(st.builder().setText("\u041e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435 \u0421\u0438\u043c\u0432\u043e\u043b\u0430 \u0432\u0435\u0440\u044b").setOnClick(v).setTypeName(at.SL_OV)).add(st.builder().setText("\u0422\u043e\u0447\u043d\u043e\u0435 \u0438\u0437\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0432\u0435\u0440\u044b").setOnClick(v).setTypeName(at.SL_OV)).newLine().add(st.builder().setText("\u041f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u0425\u0440\u0438\u0441\u0442\u0438\u0430\u043d\u0441\u043a\u0438\u0439 \u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441").setOnClick(v).setTypeName(at.SL_OV)).add(st.builder().setText("\u041a\u0430\u0442\u0435\u0445\u0438\u0437\u0438\u0441 \u0412\u043e\u0441\u0442\u043e\u0447\u043d\u043e\u0439 \u043f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u043e\u0439 \u0426\u0435\u0440\u043a\u0432\u0438").setOnClick(v).setTypeName(at.SL_OV)).newLine().newLine(!0,!0).setRadialSize(2*Math.PI).add(st.builder().setText("\u041c\u043e\u043b\u0438\u0442\u0432\u043e\u0441\u043b\u043e\u0432").setOnClick(v).setSize(Math.PI).setTypeName(at.SL_BL)).add(st.builder().setText("\u0427\u0430\u0441\u043e\u0441\u043b\u043e\u0432").setOnClick(v).setSize(Math.PI).setTypeName(at.SL_BL)).newLine().setAlpha0(Math.PI).setRadialSize(2*Math.PI).add(st.builder().setText("\u0411\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f").setOnClick(v).setTypeName(at.SL_BL)).add(st.builder().setText("\u041c\u0435\u0441\u044f\u0446\u0435\u0441\u043b\u043e\u0432").setOnClick(v).setTypeName(at.SL_BL)).newLine().add(st.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438, \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0438 \u0432\u0435\u043b\u0438\u0447\u0430\u043d\u0438\u044f \u043e\u0431\u0449\u0438\u0435").setOnClick(v).setTypeName(at.SL_BL)).add(st.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0434\u043d\u0435\u0432\u043d\u044b\u0435").setOnClick(v).setTypeName(at.SL_BL)).newLine().add(st.builder().setText("\u0422\u0440\u043e\u043f\u0430\u0440\u0438 \u0438 \u043a\u043e\u043d\u0434\u0430\u043a\u0438 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u043d\u044b\u0435").setOnClick(v).setTypeName(at.SL_BL)).add(st.builder().setText("\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0414\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435").setOnClick(v).setTypeName(at.SL_BL)).newLine().newLine().setAlpha0(0).setRadialSize(Math.PI).add(st.builder().setText("\u0412\u0441\u0435\u043d\u043e\u0449\u043d\u043e\u0435 \u0431\u0434\u0435\u043d\u0438\u0435 \u0438 \u041b\u0438\u0442\u0443\u0440\u0433\u0438\u044f").setOnClick(v).setTypeName(at.SL_BL)).newLine(!0,!0).setRadialSize(2*Math.PI).setAlpha0(Math.PI).add(st.builder().setText("\u0415\u0432\u0430\u043d\u0433\u0435\u043b\u0438\u0435").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0422\u043e\u043b\u043a\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).newLine().add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0442\u0444\u0435\u044f").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u043e\u0442 \u041c\u0430\u0440\u043a\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0421\u043e\u0431\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0430\u043d\u0438\u044f").setSize(Math.PI).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).newLine().add(st.builder().setText("\u043e\u0442 \u041b\u0443\u043a\u0438").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u043e\u0442 \u0418\u043e\u0430\u043d\u043d\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u041f\u0435\u0442\u0440\u0430").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u041f\u0435\u0442\u0440\u0430").setSize(Math.PI/2).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0418\u0430\u043a\u043e\u0432\u0430").setOnClick(v).setTypeName(at.SL_TF)).newLine().add(st.builder().setText("\u0414\u0435\u044f\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u043e\u0432").setSize(Math.PI).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0418\u0443\u0434\u044b").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("3 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u0418\u043e\u0430\u043d\u043d\u0430").setOnClick(v).setTypeName(at.SL_TF)).newLine().newLine().setRadialSize(2*Math.PI).setAlpha0(2*Math.PI-Math.PI/4).add(st.builder().setText("\u041f\u043e\u0441\u043b\u0430\u043d\u0438\u044f \u0430\u043f\u043e\u0441\u0442\u043e\u043b\u0430 \u041f\u0430\u0432\u043b\u0430").setSize(Math.PI/4*2).setForceOn(!0).setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0440\u0438\u043c\u043b\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u043a\u043e\u0440\u0438\u043d\u0444\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0433\u0430\u043b\u0430\u0442\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0435\u0444\u0435\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0444\u0438\u043b\u0438\u043f\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).newLine().setAlpha0(Math.PI/4*5).add(st.builder().setText("\u043a\u043e\u043b\u043e\u0441\u0441\u044f\u043d\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u0444\u0435\u0441\u0441\u043e\u043b\u043e\u043d\u0438\u043a\u0438\u0439\u0446\u0430\u043c").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("1 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("2 \u0422\u0438\u043c\u043e\u0444\u0435\u044e").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0422\u0438\u0442\u0443").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0424\u0438\u043b\u0438\u043c\u043e\u043d\u0443").setOnClick(v).setTypeName(at.SL_TF)).add(st.builder().setText("\u0435\u0432\u0440\u0435\u044f\u043c").setOnClick(v).setTypeName(at.SL_TF)).newLine(),g}}var nu=(()=>(function(l){l[l.Default=0]="Default",l[l.Dark=1]="Dark",l[l.Light=2]="Light",l[l.Dark2=3]="Dark2",l[l.Light2=4]="Light2"}(nu||(nu={})),nu))();class GN{constructor(a,o=[]){this.back=a,this.texts=o,this.currentOn=!1,this.on=!1,this.forceOn=!1,this.complementedByMenuName="",this.text="",this.typeName=""}static builder(){return new GN(null)}setTypeName(a){return this.typeName=a,this}isToggledOn(){return this.on&&!this.forceOn}setBack(a){return this.back=a,this}addText(a){return this.text+=a.text,this.texts.push(a),this}setTexts(a){return this.texts=a,this}setOn(a){return this.on=a,this}setForceOn(a){return this.forceOn=a,this}setComplementedByMenuName(a){return this.complementedByMenuName=a,this}isVisible(){var a;return!!(null===(a=this.back)||void 0===a?void 0:a.visible)}setVisible(a,o,c=null){this.back.emulateCollapseTransitions().setVisible(a),this.back.apply(0,o,null,c),this.texts.forEach(u=>{u.emulateCollapseTransitions().setVisible(a),u.apply(0,o)})}setAndSwitchState(a,o,c,u=null,h="",d=""){this.on=a||this.forceOn,(a||this.back.visible)&&(this.back.emulateCollapseTransitions().setFillColor(a?h||o.colorMain:d||"#00000000"),this.back.setStrokeColor(a?h||o.colorMain:d||o.colorMain),this.back.apply(0,c,null,u),this.texts.forEach(f=>{f.emulateCollapseTransitions().setColor(a?h||o.colorBackground:d||o.colorMain).apply(0,c)}))}}var Br=(()=>(function(l){l.UP="UP",l.DOWN="DOWN",l.AROUND="AROUND"}(Br||(Br={})),Br))();class jN{constructor(){this.menuName="",this.alternative=new Map}static builder(){return new jN}getAlternative(a){let o=this.alternative.get(a);return null==o&&(o=[],this.alternative.set(a,o)),o}isPrimaryType(a){return a==Br.UP||a==Br.DOWN||a==Br.AROUND}get up(){return this.getAlternative(Br.UP)}get down(){return this.getAlternative(Br.DOWN)}get around(){return this.getAlternative(Br.AROUND)}findType(a){let o="";return null!=a&&this.alternative.forEach((c,u)=>{c.indexOf(a)>=0&&(o=u)}),o||this.menuName}switchState(a,o,c,u=null){if(a&&a.on&&a.forceOn)return;let h=this.findType(a),d=p=>{p.complementedByMenuName&&this.hideOrShowStateByType(p.complementedByMenuName,p.on,null,o,c,[p.complementedByMenuName])};a&&(a.on=a.forceOn?a.forceOn:!a.on,this.getAlternative(h).forEach(p=>{let g=!0;p!=a&&(g=p.on,p.on=p.forceOn),g&&d(p)}),this.isPrimaryType(h)||a.on?this.hideOrShowStateByType(h,!1,a,o,c,[h]):this.hideOrShowStateByType(h,!1,null,o,c,[h])),this.alternative.forEach((p,g)=>{((p,g)=>{p.forEach(m=>{if(m!=a||null==a){let v=m.on;m.on=m.forceOn,v&&m.complementedByMenuName&&d(m)}})})(p)}),a&&(this.menuName=h),u&&u()}hideOrShowMainMenu(a,o,c,u=null){let h=this.findType(a);return h&&!this.isPrimaryType(h)&&(this.getAlternative(h).filter(g=>g.isToggledOn()).length>0||this.hideOrShowStateByType(h,!1,null,o,c,[h])),this.hideOrShowStateByType(h,!((!a||a.on)&&a),a,o,c,[Br.UP,Br.DOWN,Br.AROUND],u)}hideOrShowStateByType(a,o,c,u,h,d=[],f=null){let p=!1,g=()=>p?null:(p=!0,f);d.forEach(v=>{((v,_)=>{let y=v.filter(b=>b.isToggledOn()).length>0;v.forEach(b=>{y||_||o?b.setVisible(!0,0,()=>{b.setAndSwitchState(b.on,u,h,b==c?g():null)}):b.setAndSwitchState(!1,u,h,b==c?g():()=>{b.setVisible(!1,0,g())},"#00000000","#00000000")})})(this.getAlternative(v),o&&a==v)}),!p&&f&&(p=!0,f())}addAlt(a,o){return this.getAlternative(a).push(o),this}addUp(a){return this.up.push(a),this}addDown(a){return this.down.push(a),this}addAround(a){return this.around.push(a),this}addText(a,o,c,u,h,d,f,p,g,m,v,_,y,b,x=null,C,w=!0){let S=U=>null!=x?x:U>=0&&U<=Math.PI,D=GN.builder().setTypeName(u),T=h,A=m-g,I=(m+g)/2,N=!0,k=o.textSizeDirect("_"+c+"_",p,300),F=(h+d)/2+(f+p/2)*(S(I)?1:-1),B=Math.abs(A)*F,V=p;k.width>B&&(V=Math.ceil(B/k.width*V));let $=a.width/512*15/F;$*=A<0?-1:1;for(let U=0;U<=c.length;U++){T=h;let z=c.substring(U,U+1),j=(U+0)/(c.length-1)*(A-2*$)+g+$,G=S(j);N=G;let K=Qn.builder().setText(z).setTextAnchor("middle").setFontSize(`${V}px`).translate(a.width/2,a.height/2).translate(T*Math.cos(j),-T*Math.sin(j)).rotate(90-j/Math.PI*180+(G?0:-180)).setColor("#00000000").addClass("cursor").setVisible(w).addEvent(Mi.builder().setName("click").setFunc(()=>{C&&C(D)}));T=d+f*(G?1:-1),K.addTransition(lD.builder().setData(K.clone().setColor(a.colorMain).setTransforms([]).setVisible(w).translate(a.width/2,a.height/2).translate(T*Math.cos(j),-T*Math.sin(j)).rotate(90-j/Math.PI*180+(G?0:-180))).setDelay(v).setDuration(_)),a.texts.push(K),D.addText(K)}T=h;let q=T+(N?y:-y);return a.pathes.push((z=v,W=_,(U=Lr.builder().setDatum([]).setD(HR().innerRadius(Math.min(T,q)).outerRadius(Math.max(T,q)).startAngle(-Math.min(g,m)+Math.PI/2).endAngle(-Math.max(g,m)+Math.PI/2)).setStrokeWidth(a.lineWidth).setStrokeColor("#00000000").setFillColor("#00000000").setVisible(w).translate(a.width/2,a.height/2).addClass("cursor").addEvent(Mi.builder().setName("click").setFunc(()=>{C&&C(D)}))).addTransition(lD.builder().setDelay(z).setDuration(W).setData(U.clone().setStrokeColor(a.colorMain).setVisible(w))),D.setBack(U),U)),D;var U,z,W}}class st{constructor(a,o,c,u,h,d,f,p){this.text=a,this.size=o,this.alpha0=c,this.typeName=u,this.complementedByTypeName=h,this.delayIndex=d,this.forceOn=f,this.onClick=p}static builder(){return new st("",0,0,Br.UP,"",0,!1,null)}setText(a){return this.text=a,this}setSize(a){return this.size=a,this}setAlpha0(a){return this.alpha0=a,this}setTypeName(a){return this.typeName=a,this}setComplementedByTypeName(a){return this.complementedByTypeName=a,this}setDelayIndex(a){return this.delayIndex=a,this}setForceOn(a){return this.forceOn=a,this}setOnClick(a){return this.onClick=a,this}}class SVe{constructor(a,o,c,u,h,d,f,p,g){this.menu=a,this.d3Config=o,this.d3Svc=c,this.r=u,this.dr=h,this.textDr=d,this.textHeight=f,this.alpha0=p,this.delta=g,this.items=[],this.lineIndex=0,this.currentR=0,this.radialSize=2*Math.PI,this.currentR=this.r}newLine(a=!0,o=!1,c=!0){return a&&this.addLine(c),this.items=[],o&&(this.currentR=this.r),this}setAlpha0(a){return this.alpha0=a,this}setRadialSize(a){return this.radialSize=a,this}add(a){return this.items.push(a),this}addLine(a=!0){let o=this.radialSize;o-=this.items.filter(d=>d.size>0).map(d=>d.size).reduce((d,f)=>d+f,0);let u=o/this.items.filter(d=>d.size<=0).length,h=this.alpha0;return this.items.forEach(d=>{let f=d.size>0?d.size:u,p=h,g=p-f,m=Math.PI/180,v=Math.PI+m>=p&&g>=-m,_=v?this.currentR:this.currentR+this.dr;if(!v&&p>g){let x=p;p=g,g=x}let y=d.typeName==Br.UP||d.typeName==Br.DOWN||d.typeName==Br.AROUND,b=this.menu.addText(this.d3Config,this.d3Svc,d.text,d.typeName,_,_,this.textDr,this.textHeight,p,g,(y?1:0)*(this.lineIndex+d.delayIndex)*this.delta,2*this.delta,this.dr,this.d3Config.lineWidth,v,d.onClick,y).setComplementedByMenuName(d.complementedByTypeName).setForceOn(d.forceOn);this.menu.addAlt(d.typeName,b),h-=f}),a&&(this.currentR+=this.dr),++this.lineIndex,this}}class $N{constructor(a=null){this.onSelect=a}static builder(){return new $N}}class qN extends Pi{constructor(a,o,c,u){super(a,o,c),this.menuState=u}static builder(){return new qN("",null,null,$N.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setOnSelect(a=null){return this.menuState.onSelect=a,this}}class TVe{constructor(a=nu.Default,o="\u0411\u0438\u0431\u043b\u0438\u044f",c=512,u=512,h=null,d=WN.builder()){this.theme=a,this.name=o,this.width=c,this.height=u,this.data=h,this.menuBuilder=d}clear(){return this}regenerate(){return this}getWidth(){return this.width}getHeight(){return this.height}updateThemeConfig(a){switch(this.theme){case nu.Dark:a.colorBackground="#0e161b",a.colorMain="white";break;case nu.Light:a.colorBackground="#00364D",a.colorMain="white";break;case nu.Dark2:a.colorBackground="white",a.colorMain="#0e161b";break;case nu.Light2:a.colorBackground="white",a.colorMain="#00364D"}}getFontHeight(a){return Math.ceil(a.width/23)}generate(a,o,c){o.\u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c\u0420\u0430\u0437\u043c\u0435\u0440\u044b=!0,this.updateThemeConfig(o),o.rects=[a.createBackground(o)];let h=this.name,d=this.getFontHeight(o),f=Math.ceil(d/10*3),p=a.textSizeDirect(h.substring(0,1),d,300),g=p.height;o.circles=[];let v=50-(null==p?void 0:p.height);o.rects.push(...a.createCross(o,!1,o.width/2-v/2,o.height/2-v-(null==p?void 0:p.height)/2,v,v));let x=()=>{w.switchState(null,o,C),w.hideOrShowMainMenu(null,o,C,null),this.data&&this.data.menuState&&this.data.menuState.onSelect&&this.data.menuState.onSelect(null)};o.texts.push(Qn.builder().setText(h).setTextAnchor("middle").setFontSize(`${d}px`).translate(o.width/2,o.height/2+p.height/4).rotate(0).setColor(o.colorMain).addClass("cursor").addEvent(Mi.builder().setName("click").setFunc(x))),o.circles.push(xf.builder().translate(o.width/2,o.height/2).setR(50).setFillColor("#00000000").setStrokeColor(o.colorMain).addClass("cursor").addEvent(Mi.builder().setName("click").setFunc(x)));let C=400,w=this.menuBuilder.build(a,o,()=>this.data&&this.data.menuState&&this.data.menuState.onSelect?this.data.menuState.onSelect:null,50,g,f,d,C);var S=Qn.builder().setText(this.name).setTextAnchor("middle").setFontSize(`${d}px`).translate(o.width/2,50).rotate(0).setColor("none");return o.texts.push(S),o.onItemSelected=D=>{S.d3Object&&S.d3Object.interrupt().transition(100).attr("fill-opacity",0).style("fill",o.colorMain).transition().duration(2e3).attr("fill-opacity",1).text(D).transition().delay(1e3).transition().duration(1e3).attr("fill-opacity",0)},!0}}const DVe=["mySvg"],MVe=function(l){return{"fade-in-3":!0,"print-only":l}};function EVe(l,a){if(1&l&&(Od(),me(0,"svg",5,6)),2&l){const o=X();O("ngClass",ws(1,MVe,o.printOnly))}}const YN=function(l){return{centeredImage:!0,"fade-in-3":!0,"print-only":l}};function kVe(l,a){if(1&l&&(Od(),me(0,"svg",7,6)),2&l){const o=X();O("ngClass",ws(1,YN,o.printOnly))}}const AVe=function(l){return{centeredImage:!1,"fade-in-3":!0,"print-only":l}};function IVe(l,a){if(1&l&&(Od(),me(0,"svg",8,6)),2&l){const o=X();O("ngClass",ws(1,AVe,o.printOnly))}}function PVe(l,a){if(1&l&&(Od(),me(0,"svg",9,6)),2&l){const o=X();O("ngClass",ws(1,YN,o.printOnly))}}function OVe(l,a){if(1&l&&(Od(),me(0,"svg",10,6)),2&l){const o=X();O("ngClass",ws(1,YN,o.printOnly))}}class Mo{constructor(a,o,c,u){this.generator=a,this.onCreate=o,this.onUpdate=c,this.onSend=u}create(){this.onCreate&&this.onCreate(this)}update(){return!!this.onUpdate&&this.onUpdate(this)}send(){this.onSend&&this.onSend(this)}}class El{constructor(a="JsScheduler",o="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",c="/scenes/app.logo.scene.txt",u=null,h=210,d=297,f=0,p=null){this.genName=a,this.logoText=o,this.scene=c,this.tag=u,this.svgWidth=h,this.svgHeight=d,this.type=f,this.generator=p}static builder(){return new El}setGenName(a){return this.genName=a,this}setLogoText(a){return this.logoText=a,this}setScene(a){return this.scene=a,this}setTag(a){return this.tag=a,this}setSvgWidth(a){return this.svgWidth=a,this}setSvgHeight(a){return this.svgHeight=a,this}setType(a){return this.type=0,this}setGenerator(a){return this.generator=a,this}}let kl=(()=>{class l{constructor(o,c,u,h){this.config=o,this.d3Svc=c,this.cacheService=u,this.themesService=h,this.name="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",this.svgImage=null,this.generator=null,this.allReady=!1,this.svgData=El.builder(),this.updateSvgAction=new ZW(d=>{this.changed()},100,(d,f)=>this.config.post(f,d)),this.printOnly=!1,this.iStartPageIndex=0,this.iHorizontalPagesCount=1,this.iVerticalPagesCount=1,this.pagesCount=new St,this.svg=new St,this.onCommand=new St,this.onPreviewCommand=new St,this.showFooter=!0,this.sSchedulerText=""}get data(){return this.svgData}set data(o){this.svgData=o,this.config.post(()=>{this.recreate()})}set type(o){this.svgData.type=o}get type(){return this.svgData.type}get scene(){return this.data.scene}set scene(o){this.data.scene=o,this.updateSvgAction.requestAction(void 0)}get logoText(){return this.data.logoText}set logoText(o){this.data.logoText=o,this.changed()}set genName(o){this.data.genName=o}get genName(){return this.data.genName}get tag(){return this.data.tag}set tag(o){this.data.tag=o,this.generator&&this.changed()}get startPageIndex(){return this.iStartPageIndex}set startPageIndex(o){this.iStartPageIndex=o,this.updateSvgAction.requestAction(void 0)}get horizontalPagesCount(){return this.iHorizontalPagesCount}set horizontalPagesCount(o){this.iHorizontalPagesCount=o,this.updateSvgAction.requestAction(void 0)}get verticalPagesCount(){return this.iVerticalPagesCount}set verticalPagesCount(o){this.iVerticalPagesCount=o,this.updateSvgAction.requestAction(void 0)}set svgWidth(o){this.svgData.svgWidth=o}get svgWidth(){return this.svgData.svgWidth}set svgHeight(o){this.svgData.svgHeight=o}get svgHeight(){return this.svgData.svgHeight}get schedulerText(){return this.sSchedulerText}set schedulerText(o){this.sSchedulerText!=o&&(this.sSchedulerText=o,this.changed())}ngOnInit(){}get version(){return this.config.environment.version}newGenerator(){let o=c=>new Mo(new Mte(c,this.svgWidth,this.svgHeight),()=>{var u;let h=[];this.tag?h.push(...this.tag.commands.map(p=>({cmd:p,enabled:!0}))):this.config.environment.applications.forEach(f=>{h.push({cmd:$o.builder().setName(f.name).setTag(f),enabled:f.applicationEnabled&&!f.applicationHidden})});let d=h.find(f=>{var p;return(null===(p=f.cmd.tag)||void 0===p?void 0:p.id)==this.config.defaultApplication});d||(d=h[0],d.cmd.tag&&d.cmd.tag.id&&(this.config.defaultApplication=d.cmd.tag.id)),(null===(u=this.generator)||void 0===u?void 0:u.generator).setCommands(h.filter(f=>f.enabled).map(f=>f.cmd),d?d.cmd:null).setOnCommandHandler(f=>{this.sendCommand(f.tag)}).setOnPreviewCommandHandler(f=>{this.sendPreviewCommand(f.tag)})},u=>{if(this.tag){let d=u.generator.setCommands(this.tag.commands).isGenerated();return u.generator.regenerate(),d}return!1},()=>{});return"Logo"==this.genName?new Mo(new Mv(this.themesService.nowIsDay()?Da.Light:Da.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight"==this.genName?new Mo(new Mv(Da.Light,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark"==this.genName?new Mo(new Mv(Da.Dark,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoLight2"==this.genName?new Mo(new Mv(Da.Light2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"LogoDark2"==this.genName?new Mo(new Mv(Da.Dark2,"",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Default"==this.genName?new Mo(new Ta("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Texts"==this.genName?new Mo(new bte("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Circles"==this.genName?new Mo(new Cte("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Ellipses"==this.genName?new Mo(new xte("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Rects"==this.genName?new Mo(new wte("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Graphics"==this.genName?new Mo(new Ste("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"Animation"==this.genName?new Mo(new Tte("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"UIInteraction"==this.genName?new Mo(new Dte("",this.svgWidth,this.svgHeight),()=>{},()=>!1,()=>{}):"BibleMenu"==this.genName?new Mo(new TVe(this.themesService.nowIsDay()?nu.Light:nu.Dark,"\u0411\u0438\u0431\u043b\u0438\u044f",this.svgWidth,this.svgHeight,this.tag),()=>{},()=>!1,()=>{}):"Menu"==this.genName?o(this.themesService.nowIsDay()?so.Light:so.Dark):"MenuDay"==this.genName?o(so.Light):"MenuDay2"==this.genName?o(so.Light2):"MenuNight"==this.genName?o(so.Dark):"MenuNight2"==this.genName?o(so.Dark2):"this"==this.genName&&this.svgData.generator?new Mo(this.svgData.generator,()=>{},()=>!1,()=>{}):new Mo(new _N(this.svgWidth,this.svgHeight),()=>{var c;(null===(c=this.generator)||void 0===c?void 0:c.generator).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService,this.scene).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText)},()=>{var c;return(null===(c=this.generator)||void 0===c?void 0:c.generator).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(this.schedulerText).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b(this.startPageIndex).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438(this.horizontalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u041f\u043e\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438(this.verticalPagesCount).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041f\u043e\u0434\u0432\u0430\u043b\u0430(this.showFooter).\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0443\u0412\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b("\u0442\u0435\u043a\u0441\u0442\u041b\u043e\u0433\u043e\u0442\u0438\u043f\u0430",this.logoText),!1},()=>{var c;this.pagesCount.emit((null===(c=this.generator)||void 0===c?void 0:c.generator).\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0421\u0442\u0440\u0430\u043d\u0438\u0446())})}ngAfterViewInit(){this.allReady=!0,this.recreate()}recreate(){!this.allReady||this.mySvgRef&&(this.generator=this.newGenerator(),this.generator.create(),this.svgImage=new lN(this.generator.generator.getWidth(),this.generator.generator.getHeight(),this.d3Svc,this.mySvgRef,this.generator.generator),this.svgImage.updateSvg(()=>{var o;this.generator.update(),this.saveSvg(),null===(o=this.generator)||void 0===o||o.send()}))}changed(){this.generator&&(this.generator.update()||this.svgImage.clear().updateSvg(()=>{var o;null===(o=this.generator)||void 0===o||o.send(),this.saveSvg()}))}saveSvg(){var o=this.mySvgRef.nativeElement,u=(new XMLSerializer).serializeToString(o);u.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(u=u.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),u.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(u=u.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),this.svg.emit(u='<?xml version="1.0" standalone="no"?>\r\n'+u)}sendCommand(o){this.onCommand.emit(o)}sendPreviewCommand(o){this.onPreviewCommand.emit(o)}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(cD),R(ad),R(Ls))},l.\u0275cmp=Ye({type:l,selectors:[["app-svg-js-image"]],viewQuery:function(o,c){if(1&o&&ti(DVe,5),2&o){let u;Vt(u=zt())&&(c.mySvgRef=u.first)}},inputs:{data:"data",type:"type",printOnly:"printOnly",scene:"scene",logoText:"logoText",genName:"genName",tag:"tag",startPageIndex:"startPageIndex",horizontalPagesCount:"horizontalPagesCount",verticalPagesCount:"verticalPagesCount",showFooter:"showFooter",svgWidth:"svgWidth",svgHeight:"svgHeight",schedulerText:"schedulerText"},outputs:{pagesCount:"pagesCount",svg:"svg",onCommand:"onCommand",onPreviewCommand:"onPreviewCommand"},decls:5,vars:5,consts:[["width","100%","height","100%",3,"ngClass",4,"ngIf"],["width","2100","height","2970",3,"ngClass",4,"ngIf"],["width","114","height","114",3,"ngClass",4,"ngIf"],["width","5120","height","5120",3,"ngClass",4,"ngIf"],["width","5120","height","1280",3,"ngClass",4,"ngIf"],["width","100%","height","100%",3,"ngClass"],["mySvg",""],["width","2100","height","2970",3,"ngClass"],["width","114","height","114",3,"ngClass"],["width","5120","height","5120",3,"ngClass"],["width","5120","height","1280",3,"ngClass"]],template:function(o,c){1&o&&(Z(0,EVe,2,3,"svg",0),Z(1,kVe,2,3,"svg",1),Z(2,IVe,2,3,"svg",2),Z(3,PVe,2,3,"svg",3),Z(4,OVe,2,3,"svg",4)),2&o&&(O("ngIf",0==c.type),P(1),O("ngIf",1==c.type),P(1),O("ngIf",114==c.type),P(1),O("ngIf",512==c.type),P(1),O("ngIf",512128==c.type))},directives:[mn,Xn],styles:[".centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),l})();const FVe=["myCanvas"],RVe=["mySvgMulti"];function NVe(l,a){if(1&l&&me(0,"app-d3-svg",7),2&l){const o=a.$implicit;O("generator",o.generator)("d3Config",o.d3Config)}}function LVe(l,a){if(1&l){const o=gt();M(0,"div",8),M(1,"app-svg-js-image",9),ee("svg",function(u){const d=Le(o).$implicit;return X().onSaveSvg(d.genName,u)}),E(),E()}if(2&l){const o=a.$implicit;P(1),O("svgWidth",o.width)("svgHeight",o.height)("scene",o.scene)("genName",o.genName)}}class Al{constructor(a,o,c,u){this.width=a,this.height=o,this.scene=c,this.genName=u}}class XN{constructor(a,o){this.generator=a,this.d3Config=o}static builder(){return new XN(null,null)}setGenerator(a){return this.generator=a,this}setD3Config(a){return this.d3Config=a,this}}let BVe=(()=>{class l{constructor(o,c,u,h,d,f){this.config=o,this.uiConfig=c,this.d3Svc=u,this.themeSvc=h,this.cacheService=d,this.ks=f,this.generators=[],this.svgImage2=[],this.svgJsImages=[new Al(512,512,"/scenes/cross.scene.txt","Logo"),new Al(512,512,"/scenes/cross.scene.txt","LogoLight"),new Al(512,512,"/scenes/cross.scene.txt","LogoLight2"),new Al(512,512,"/scenes/cross.scene.txt","LogoDark"),new Al(512,512,"/scenes/cross.scene.txt","LogoDark2"),new Al(512,512,"/scenes/cross.scene.txt","Default"),new Al(512,512,"/scenes/cross.scene.txt","Texts"),new Al(512,512,"/scenes/cross.scene.txt","Circles"),new Al(512,512,"/scenes/cross.scene.txt","Ellipses"),new Al(512,512,"/scenes/cross.scene.txt","Rects"),new Al(512,512,"/scenes/cross.scene.txt","Graphics"),new Al(512,512,"/scenes/cross.scene.txt","Animation"),new Al(512,512,"/scenes/cross.scene.txt","UIInteraction")],this.svgSaved=new Map}ngOnInit(){this.uiConfig.setAppRoutes(null)}addGenerator(o,c=null){return this.generators.push(XN.builder().setGenerator(o).setD3Config(c)),(o instanceof Ete||o instanceof _N)&&o.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u0435\u0448(this.cacheService),this}ngAfterViewInit(){this.addGenerator(new ED,vg.builder().setColorBackground("").setColorMain("black").setColorText("black").setColorLines("black").setLineWidth(1)),this.addGenerator(new Ta),this.addGenerator(new bte),this.addGenerator(new Cte),this.addGenerator(new xte),this.addGenerator(new wte),this.addGenerator(new Ste),this.addGenerator(new Tte),this.addGenerator(new Dte),this.addGenerator(new Mv);let h=this.generators[this.generators.length-1];h&&h.generator&&this.svgImage2.push(new lN(h.generator.getWidth(),h.generator.getHeight(),this.d3Svc,this.mySvgMultiRef,h.generator)),this.addGenerator((()=>(new uD).setTheme(this.themeSvc.nowIsDay()?_s.Light3:_s.Dark3))()),this.addGenerator((()=>{let d=new K8e,f=[Tf.builder().setName("\u0414\u0435\u043a\u0430\u0431\u0440\u044c").setIndex(0).setIWidth(7)];["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].forEach((m,v)=>{f.push(Tf.builder().setName(m).setIndex(v+7).setIWidth(1))});for(let m=0;m<31;m++){let v=""+(m+1);f.push(Tf.builder().setName(v).setIndex(m+16).setIWidth(1))}return d.setTheme(this.themeSvc.nowIsDay()?qo.Light3:qo.Dark3).setCommands(f).setOnCommandHandler(m=>{let v=["black","#d94a4a","#DFF0D0","#4aaed9"],_=m.tag;_||(_=v[0]);let y=v.indexOf(_);y=(y+1)%v.length,_=v[y],m.tag=_,m.rect.d3Object.transition().duration(1e3).style("fill",_),m.text.d3Object.transition().duration(1e3).style("fill","black"==_?"white":"black").style("stroke","black"==_?"white":"black").style("stroke-width",0)})})()),this.addGenerator(new Ete),this.addGenerator(new _N),this.addGenerator((()=>(new Mte).setTheme(this.themeSvc.nowIsDay()?so.Light2:so.Dark2).setCommands(this.generators.map((d,f)=>$o.builder().setName(d.generator.name).setTag(f))).setOnCommandHandler(d=>{let f=this.generators[d.tag];f&&f.generator&&this.svgImage2[0].setGenerator(f.generator).clear().updateSvg()}).setAutoClickOnChange(!0))()),this.svgImage2.forEach(d=>{d.updateSvg()})}downloadAllImages(){this.onSaveSvgDirect()}onSaveSvg(o,c){this.svgSaved.set(o,c)}onSaveSvgDirect(o=1){const c=new CD;this.svgSaved.forEach((p,g)=>{c.file("page"+g+".svg",p)});let u='<html>\n<head>\n    <style type="text/css">\n    .centeredImage {\n      max-width: 100%;\n      max-height: 100%;\n      width: auto;\n      height: auto;\n    }\n</style>\n</head>\n<body>';this.svgSaved.forEach((p,g,m)=>{u+=`<div><img src="page${g}.svg" width="630" height="891" alt="page${g}" class="centeredImage"></div>`}),u+="</body></html>",c.file("pages.html",u);let h=new Date,d=(p,g)=>{let m=""+p;for(;m.length<g;)m="0"+m;return m},f=h.getFullYear()+"_"+d(h.getMonth()+1,2)+"_"+d(h.getDate(),2);c.generateAsync({type:"blob"}).then(p=>{const g=new Blob([p],{type:"octet/stream"}),m=`\u043b\u043e\u0433\u043e\u0442\u0438\u043f\u044b.${f}.zip`;this.config.isPlatformAndroid()?this.ks.addTempFile(m,g).then(v=>{rd.startDownload(v.fileName,m)}):rd.saveData(g,m)})}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(cD),R(Ls),R(ad),R(kf))},l.\u0275cmp=Ye({type:l,selectors:[["app-d3-examples"]],viewQuery:function(o,c){if(1&o&&(ti(FVe,5),ti(RVe,5)),2&o){let u;Vt(u=zt())&&(c.myCanvasRef=u.first),Vt(u=zt())&&(c.mySvgMultiRef=u.first)}},decls:11,vars:2,consts:[["id","load-font"],[3,"generator","d3Config",4,"ngFor","ngForOf"],["class","h512",4,"ngFor","ngForOf"],["width","512","height","512",1,"centeredImage","fade-in-3"],["mySvgMulti",""],[1,"no-print"],[1,"btn","btn-success","btn-block","ucs","center","top-space",3,"click"],[3,"generator","d3Config"],[1,"h512"],[3,"svgWidth","svgHeight","scene","genName","svg"]],template:function(o,c){1&o&&(M(0,"div"),M(1,"div",0),ie(2,"\u0411\u043b\u0483\u0436\u0435\u0301\u043d\u044a \u043c\ua64b\u0301\u0436\u044a"),E(),Z(3,NVe,1,2,"app-d3-svg",1),Z(4,LVe,2,4,"div",2),Od(),me(5,"svg",3,4),function i6(){!function Ace(){Kn.lFrame.currentNamespace=null}()}(),M(7,"div"),M(8,"div",5),M(9,"button",6),ee("click",function(){return c.downloadAllImages()}),ie(10,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),E(),E(),E(),E()),2&o&&(P(3),O("ngForOf",c.generators),P(1),O("ngForOf",c.svgJsImages))},directives:[fi,$te,kl],styles:[".h512[_ngcontent-%COMP%]{height:512px;width:512px}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}.rxanimated[_ngcontent-%COMP%]{animation:rxakf 3s linear infinite;stroke:#00f;fill:green;rx:1!important;width:50px!important}@keyframes rxakf{0%{rx:100;ry:1}50%{rx:400;ry:4}to{rx:100;ry:1}}.ani[_ngcontent-%COMP%]{animation:moveCircle 4s linear infinite}@keyframes moveCircle{0%{rx:1}50%{rx:4}to{rx:1}}"]}),l})();class VVe{constructor(a,o){this.zipService=a,this.cacheService=o}}class Il{constructor(a,o){this.action=a,this.name=o,this.from=null,this.upto=null,this.onStop=null,this.config=null}static of(a,o){return new Il(a,o)}start(a,o=null){this.config=o,this.onStop=a,this.from=new Date}stop(){this.upto=new Date}getTime(){return this.upto.getTime()-this.from.getTime()}str(a,o){for(;a.length<o;)a="0"+a;return a}getTimeString(){let a=this.upto.getTime()-this.from.getTime(),o=Math.floor(a/1e3),c=Math.floor(o/60),u=Math.floor(c/60);return a-=1e3*o,o-=60*c,c-=60*u,this.str(""+u,2)+":"+this.str(""+c,2)+":"+this.str(""+o,2)+"."+this.str(""+a,3)+" \u043e\u0442 "+this.from.toISOString()}toString(){return this.getTimeString()}stopAndGetResult(a){return this.stop(),OD.of(this.name,a,this.getTimeString())}sendAndGetResult(a){return this.onStop(a,this)}delay(a,o){return setTimeout(()=>{a&&a()},o),OD.of("","","")}}class OD{constructor(a,o,c){this.name=a,this.error=o,this.info=c}static of(a,o,c){return new OD(a,o,c)}}class cC extends ne{constructor(){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u0441\u0442\u0430\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),null,new Map),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){let o=cC.\u043d\u043e\u0432\u044b\u0439();a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0440\u0438\u043c\u0435\u0440",(c,u)=>o,!0)}static \u043d\u043e\u0432\u044b\u0439(){return new cC}static \u043d\u043e\u0432\u044b\u0439\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u041f\u0440\u0438\u043c\u0435\u0440(){return new cC}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0435\u0434\u0438\u043d\u0438\u0446\u0430",ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1)),a.set("\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0435\u0434\u0438\u043d\u0438\u0446\u0430")])]))))),a.set("\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((o,c)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[1].\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+10))))))}}class uC extends ne{constructor(){super(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u0430\u0440\u0441\u0435\u0440"),null,new Map),this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438()}static \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(a){let o=uC.\u043d\u043e\u0432\u044b\u0439();a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0430\u0440\u0441\u0435\u0440",(c,u)=>o,!0)}static \u043d\u043e\u0432\u044b\u0439(){return new uC}static \u043d\u043e\u0432\u044b\u0439\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u041f\u0430\u0440\u0441\u0435\u0440(){return new uC}\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(a){return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f(a))}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438(){let a=this.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();a.set("\u0435\u0434\u0438\u043d\u0438\u0446\u0430",ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1)),a.set("\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0435\u0434\u0438\u043d\u0438\u0446\u0430")])]))))),a.set("\u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041d\u0430\u0415\u0434\u0438\u043d\u0438\u0446\u0443",this.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443((o,c)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(c[1].\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+10))))))}}class wg{constructor(a,o){this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430=a,this.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=o}static \u043d\u043e\u0432\u044b\u0439(){return new wg(null,null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a){return this.\u043a\u043e\u043c\u0430\u043d\u0434\u0430="string"==typeof a?ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(a):a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(a){return this.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442=a,this}}class Eo{static tests(){return[Il.of(Eo.\u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439: \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432"),Il.of(Eo.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439: \u0441\u0430\u043c \u043f\u0430\u0440\u0441\u0435\u0440"),Il.of(Eo.\u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),Il.of(Eo.\u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),Il.of(Eo.\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b,"\u0442\u0435\u0441\u0442 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434"),Il.of(Eo.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434,"\u0442\u0435\u0441\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 (\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043a\u043e\u0434)"),Il.of(Eo.\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432,"\u0442\u0435\u0441\u0442 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0441\u0435\u0440\u0430 (\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043a\u043e\u0434) \u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439")]}static \u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(a,o,c){return wg.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(a).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b(o.map(u=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u)))).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(c)}static \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(a){let o="",c=new Tl;return c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0441\u0443\u043c\u043c\u0430",(h,d)=>d[0].\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),!0),c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u0441\u0443\u043c\u043c\u0430",(h,d)=>d[0].\u044d\u0442\u043e\u0427\u0438\u0441\u043b\u043e()?ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()):ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()+h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),!0),c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",(h,d)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.min(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),!0),c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",(h,d)=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(Math.max(h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[0]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),h.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d[1]).\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),!0),[Eo.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u0441\u0443\u043c\u043c\u0430",[1,2],3),Eo.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u043c\u0438\u043d",[1,2],1),Eo.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0447\u0438\u0441\u043b\u0430 \u043c\u0430\u043a\u0441",[1,2],2),Eo.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0441\u0443\u043c\u043c\u0430",[1,2],3),Eo.\u043d\u043e\u0432\u044b\u0439\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0441\u0443\u043c\u043c\u0430",["1","2"],"12"),wg.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(()=>ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f."))).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f."),wg.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. (2)")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f. (2)")].forEach((h,d)=>{let f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443(h.\u043a\u043e\u043c\u0430\u043d\u0434\u0430);f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=h.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442&&(o+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${h.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442}; \u0438\u043d\u0434\u0435\u043a\u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u044b: ${d}.`)}),a.sendAndGetResult(o)}static \u043f\u0430\u043a\u0435\u0442\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(a){let o="",c=new Tl;c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e();let u=[ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(2)])]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])],h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u),[],null,!0,!0,!1,null),d=4;h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=d&&(o+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${h}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${d}`);let f=[ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(f),[],null,!0,!0,!1,null),d=1,h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=d&&(o+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${h}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${d}`);let p=[ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u044d\u043d\u0435\u0440\u0433\u0438\u0447\u043d\u043e\u0435 \u0438\u043b\u0438").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])])]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];return h=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(p),[],null,!0,!0,!1,null),d=2,h.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=d&&(o+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${h}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${d}`),a.sendAndGetResult(o)}static \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435\u041a\u043e\u043c\u0430\u043d\u0434\u044b(a){let o="",c=new Tl;c.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e();let u=[ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(0)])],h=[ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441"),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])])]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0438\u043d\u0434\u0435\u043a\u0441")])];c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(u),[],null,!0,!0,!1,null);for(let d=1;d<5;d++){let f=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),[],null,!0,!0,!1,null),p=d;f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=p&&(o+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${p}`)}return a.sendAndGetResult(o)}static \u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(a){return a.split(/\/\/EOT/).map(h=>h.trim()).filter(h=>!!h).map(h=>{let d=h.trim().split("\n").map(g=>g.trimRight()),f=d[d.length-1],p="//null"===f?null:+f.substr(2);return wg.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443(d.filter(g=>!g.startsWith("//")).join("\r\n")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(p)})}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(a,o="/tests/universal_engine/all_tests.txt"){return a.delay(()=>{let u=a.config.cacheService.getRestPoint(o,null);a.config.cacheService.getTextRestcallUrl(u,h=>{try{let d="",f=new bg,p=Eo.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(h),g=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p.forEach((m,v)=>{console.log("------------------------------"),console.log(m.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let _=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(m.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),y=new Tl;y.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),y.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",(b,x)=>{var C=x[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();if("\u0435\u0434\u0438\u043d\u0438\u0446\u0430"===C)return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f"===C)return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430")])]))));if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f"===C){let w=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n                  \u0440\u0430\u0437\u0431\u043e\u0440 \u043c\u0435\u0442\u043e\u0434\u0430 \u0438\u043c\u044f(\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440){\n                    \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n                  }\n                  ");return b.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(w[0],null)}return null},!0);{let b=y.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_),[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),g],[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c")],!0,!0,!1,null)),x=m.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!b||b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=x)&&(d+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${b?b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${x}`,console.log(`\u041e\u0448\u0438\u0431\u043a\u0430: #${v}: ${b?b.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null} == ${x}`))}}),a.sendAndGetResult(d)}catch(d){a.sendAndGetResult("Error: "+d)}})},1)}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439\u041a\u043e\u0434(a){let o="",c=new bg;return[wg.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443('\n        \u043a\u043b\u0430\u0441\u0441\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430 = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0435\u0434\u0438\u043d\u0438\u0446\u0430");\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f");\n          \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f = \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f");\n          \u0435\u0449\u0451\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(\u0437\u043d\u0430\u0447){\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0437\u043d\u0430\u0447 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n          }\n          \u0431\u0430\u0437\u043e\u0432\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442){\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(12)\n              + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(12)\n              + \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 + \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442\n              + \u0435\u0449\u0451\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f(2)\n            ;\n          }\n        };\n        \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440\u0430();\n        \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440.\u0431\u0430\u0437\u043e\u0432\u043e\u0435\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(70,1);\n      ').\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442(100)].forEach(u=>{let h=c.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(u.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());console.log("------------------------------"),console.log(u.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let d=new Tl;d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0441\u0435\u0440(c),d.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),d.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e("\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",(f,p)=>{var g=p[0].\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();if("\u0435\u0434\u0438\u043d\u0438\u0446\u0430"===g)return ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(1);if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f"===g)return f.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")])).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u0441\u0443\u043c\u043c\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440")]),ze.\u043d\u043e\u0432\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443("\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b([ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430")])]))));if("\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0424\u0443\u043d\u043a\u0446\u0438\u044f\u0420\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u0430\u044f"===g){let m=c.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a("\n              \u0440\u0430\u0437\u0431\u043e\u0440 \u043c\u0435\u0442\u043e\u0434\u0430 \u0438\u043c\u044f(\u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440){\n                \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 + \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f\u0415\u0434\u0438\u043d\u0438\u0446\u0430;\n              }\n            ");return f.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0412\u041a\u043b\u0430\u0441\u0441\u041c\u0435\u0442\u043e\u0434\u0418\u043b\u0438\u0414\u0430\u043d\u043d\u044b\u0435(m[0],null)}return null},!0);{let f=d.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(d.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(h),[],null,!0,!0,!1,null)),p=u.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!f||f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=p)&&(o+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${f?f.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${p}`)}}),a.sendAndGetResult(o)}static \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f\u0412\u0441\u0442\u0430\u0432\u043a\u0430\u041e\u0431\u044a\u0435\u043a\u0442\u043e\u0432\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(a,o="/tests/universal_engine/dynamic_objects_tests.txt"){return a.delay(()=>{let u=a.config.cacheService.getRestPoint(o,null);a.config.cacheService.getTextRestcallUrl(u,h=>{try{let d="",f=new bg;Eo.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(h).forEach(g=>{console.log("------------------------------"),console.log(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let m=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),v=new Tl;v.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),cC.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(v);{let _=v.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m),[],null,!0,!0,!1,null)),y=g.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!_||_.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=y)&&(d+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${_?_.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${y}`)}}),a.sendAndGetResult(d)}catch(d){a.sendAndGetResult("Error: "+d)}})},1)}static \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439\u041f\u0430\u0440\u0441\u0435\u0440\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u0421\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439\u0422\u0435\u0441\u0442\u043e\u0432(a,o="/tests/universal_engine/parser_tests.txt"){return a.delay(()=>{let u=a.config.cacheService.getRestPoint(o,null);a.config.cacheService.getTextRestcallUrl(u,h=>{try{let d="",f=new bg;Eo.\u0440\u0430\u0437\u0431\u0438\u0442\u044c\u041d\u0430\u0422\u0435\u0441\u0442\u044b(h).forEach(g=>{console.log("------------------------------"),console.log(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());let m=f.\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(g.\u043a\u043e\u043c\u0430\u043d\u0434\u0430.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),v=new Tl;v.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e(),uC.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u0430\u0440\u0441\u0435\u0440\u0430\u0412\u0414\u0432\u0438\u0436\u043e\u043a(v);{let _=v.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(v.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(m),[],null,!0,!0,!1,null)),y=g.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442;(!_||_.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435!=y)&&(d+=`\r\n\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e=${_?_.\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435:null}; \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c=${y}`)}}),a.sendAndGetResult(d)}catch(d){a.sendAndGetResult("Error: "+d)}})},1)}}class FD{constructor(a,o){this.fileName=a,this.content=o}static builder(){return new FD("","")}setFileName(a){return this.fileName=a,this}setContent(a){return this.content=a,this}}let ZN=(()=>{class l{zip(o){return new Promise((c,u)=>{const h=new CD;o.forEach(d=>{d.content&&h.file(d.fileName,d.content)}),h.generateAsync({type:"blob"}).then(d=>{d.arrayBuffer().then(f=>{c(f)})})})}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function zVe(l,a){1&l&&me(0,"clr-icon",7)}function UVe(l,a){1&l&&me(0,"clr-icon",8)}const Yte=function(l,a){return{"bg-4":l,"bg-6":a}};function HVe(l,a){if(1&l&&(M(0,"div"),M(1,"span",3),Z(2,zVe,1,0,"clr-icon",4),Z(3,UVe,1,0,"clr-icon",5),E(),M(4,"span",6),ie(5),E(),M(6,"span"),ie(7),E(),M(8,"span",3),ie(9),E(),M(10,"span"),ie(11),E(),E()),2&l){const o=a.$implicit,c=a.index;P(1),O("ngClass",ds(8,Yte,!o.error,!!o.error)),P(1),O("ngIf",!!o.error),P(1),O("ngIf",!o.error),P(2),hi(" ",c+1," "),P(2),hi("",o.name,": "),P(1),O("ngClass",ds(11,Yte,!o.error,!!o.error)),P(1),en(o.error?o.error:"\u0443\u0441\u043f\u0435\u0448\u043d\u043e"),P(2),hi(" (",o.info,")")}}function WVe(l,a){1&l&&(M(0,"div"),me(1,"clr-icon",8),ie(2," \u0412\u0441\u0435 \u0442\u0435\u0441\u0442\u044b \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u044b. "),E())}function GVe(l,a){1&l&&(M(0,"div"),M(1,"span",9),ie(2," \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u044e... "),E(),E())}let jVe=(()=>{class l{constructor(o,c,u){var d;this.config=o,this.zipService=c,this.cacheService=u,this.testResults=[],this.tests=[],this.testConfig=null,this.tests.push(...(d=Eo.tests(),"UniversalEngineTest::",d.map(g=>(g.name="UniversalEngineTest::"+g.name,g)))),this.testConfig=new VVe(this.zipService,this.cacheService)}static tests(){return[Il.of(l.firstTest,"\u041f\u0435\u0440\u0432\u044b\u0439 \u0442\u0435\u0441\u0442"),Il.of(l.secondTest,"\u0412\u0442\u043e\u0440\u043e\u0439 \u0442\u0435\u0441\u0442"),Il.of(l.thirdTest,"\u0422\u0440\u0435\u0442\u0438\u0439 \u0442\u0435\u0441\u0442"),Il.of(l.forthTest,"\u0427\u0435\u0442\u0432\u0451\u0440\u0442\u044b\u0439 \u0442\u0435\u0441\u0442")]}static firstTest(o){return o.sendAndGetResult("")}static secondTest(o){return o.sendAndGetResult("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static thirdTest(o){throw new Error("\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0442\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u0442\u0435\u0441\u0442\u0430.")}static forthTest(o){return o.delay(()=>o.sendAndGetResult(""),1200)}ngOnInit(){}runTests(){this.testResults=[];let o=0,c=()=>{if(o>=this.tests.length)return;let u=null,h=null;try{h=this.tests[o++],h.start((d,f)=>{let p=f.stopAndGetResult(d);return p&&this.testResults.push(p),this.config.post(c,1),p},this.testConfig),u=h.action(h),u||(u=h.sendAndGetResult("\u041d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430."))}catch(d){u=h.sendAndGetResult(""+d)}};this.config.post(c,1)}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(ZN),R(ad))},l.\u0275cmp=Ye({type:l,selectors:[["app-tests"]],decls:6,vars:3,consts:[[1,"btn","btn-primary","btn-block",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],["shape","times",4,"ngIf"],["shape","check",4,"ngIf"],[1,"red"],["shape","times"],["shape","check"],[1,"spinner","spinner-inline"]],template:function(o,c){1&o&&(M(0,"div"),M(1,"button",0),ee("click",function(){return c.runTests()}),ie(2,"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0442\u0435\u0441\u0442\u044b"),E(),Z(3,HVe,12,14,"div",1),Z(4,WVe,3,0,"div",2),Z(5,GVe,3,0,"div",2),E()),2&o&&(P(3),O("ngForOf",c.testResults),P(1),O("ngIf",c.testResults.length==c.tests.length),P(1),O("ngIf",c.testResults.length!=c.tests.length&&c.testResults.length>0))},directives:[fi,Xn,mn,Ts],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function $Ve(l,a){if(1&l&&(M(0,"div",7),me(1,"app-svg-js-image",8),E()),2&l){const o=a.$implicit,c=X();P(1),O("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c.logText)("type",1)("startPageIndex",o)("horizontalPagesCount",c.horizontalPagesCount)("verticalPagesCount",c.verticalPagesCount)}}let qVe=(()=>{class l{constructor(o){this.router=o,this.logText=["*\u041c\u043e\u043b\u0435\u0431\u0435\u043d","*\u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438","\u0438\u0435\u0440. \u0414\u0438\u043c\u0438\u0442\u0440\u0438\u044f","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0438\u0435\u0440. \u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u0430","\u0438\u0435\u0440. \u0418\u043e\u0430\u043d\u043d\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430","\u0415\u0432\u0433\u0435\u043d\u0438\u044f","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0410\u043d\u0434\u0440\u0435\u044f","\u041c\u0438\u0445\u0430\u0438\u043b\u0430","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u044b","\u0421\u0435\u0440\u0433\u0438\u044f","\u041b\u0438\u043b\u0438\u0438","\u041c\u0430\u0440\u0438\u0438"].join(", "),this.extraPages=[],this.horizontalPagesCount=2,this.verticalPagesCount=2}ngOnInit(){}onPagesCount(o){this.extraPages=[];let c=this.horizontalPagesCount*this.verticalPagesCount,u=o-c,h=0;for(;u>0;)u=Math.max(0,u-c),h+=c,this.extraPages.push(h)}}return l.\u0275fac=function(o){return new(o||l)(R(fs))},l.\u0275cmp=Ye({type:l,selectors:[["app-memorial-pages-editor"]],decls:9,vars:11,consts:[[1,"no-print"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"memorialsText",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"form",1),M(2,"div",2),M(3,"textarea",3),ee("ngModelChange",function(h){return c.logText=h}),E(),E(),M(4,"span",4),ie(5,"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),E(),E(),E(),M(6,"div"),M(7,"app-svg-js-image",5),ee("pagesCount",function(h){return c.onPagesCount(h)}),E(),E(),Z(8,$Ve,2,9,"div",6)),2&o&&(P(3),O("ngModel",c.logText),P(4),O("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",c.horizontalPagesCount)("verticalPagesCount",c.verticalPagesCount),P(1),O("ngForOf",c.extraPages))},directives:[Tp,Sp,Nu,aa,AS,jd,Js,Rs,kl,fi],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}.memorialsText[_ngcontent-%COMP%]{width:97vw;height:10em}"]}),l})();class On{constructor(a,o){this.component=a,this.data=o}}class If extends Pi{constructor(a,o,c,u,h=!1){super(a,o,c),this.menuState=u,this.whiteBack=h}static builder(){return new If("",null,null,wf.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setWhiteBack(a){return this.whiteBack=a,this}setMenuState(a){return this.menuState=a,this}addCommand(a){return this.menuState.addCommand(a),this}}const YVe=function(l){return{whiteBG:l}};let RD=(()=>{class l{constructor(o){this.config=o}get menuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getMenuState(){return this.menuData.menuState}onCommand(o){this.data.onClick&&this.data.onClick(o)}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-menu"]],inputs:{data:"data"},decls:2,vars:8,consts:[[3,"ngClass"],[3,"genName","tag","svgWidth","svgHeight","printOnly","onCommand"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"app-svg-js-image",1),ee("onCommand",function(h){return c.onCommand(h)}),E(),E()),2&o&&(O("ngClass",ws(6,YVe,c.menuData.whiteBack)),P(1),O("genName",c.getMenuState().genName)("tag",c.getMenuState())("svgWidth",512)("svgHeight",64)("printOnly",c.getMenuState().printOnly))},directives:[Xn,kl],styles:[".whiteBG[_ngcontent-%COMP%]{background-color:#fff!important}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})(),Xte=(()=>{class l extends Af{constructor(o,c,u){super(o,c,u),this.data=null,this.myBibleMenuData=qN.builder().setOnSelect(h=>{this.onBibleSelect(h)}),this.menuData=If.builder().addCommand($o.builder().setName("\u0411\u0438\u0431\u043b\u0438\u044f")).setOnClick(h=>{h&&this.onMenuClick(h.text)}),this.addMenuLink(Hn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setIsActive(()=>!0)),this.addMenuLink(Hn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.onMenuClick("")}).setIsActive(()=>!1)),this.addMenuLink(Hn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.onMenuClick("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")}).setIsActive(()=>!1)),this.addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.onMenuClick("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}get bibleMenuData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}onMenuClick(o){this.data&&this.data.onClick&&this.data.onClick(o)}onBibleSelect(o){let c=o&&o.on?o.text:"\u0411\u0438\u0431\u043b\u0438\u044f",u=o&&o.on?o.typeName:"CENTER",h=c+(u?" "+u:"");this.menuData=If.builder().addCommand($o.builder().setName(c).setTag(h)).setOnClick(d=>{this.onMenuClick(d)})}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-bible-menu"]],inputs:{data:"data"},features:[dn],decls:5,vars:5,consts:[[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"genName","svgWidth","svgHeight","tag"],[1,"login-footer"],[1,"gapTitle",3,"data"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"div",1),me(2,"app-svg-js-image",2),E(),M(3,"div",3),me(4,"app-dynamic-menu",4),E(),E()),2&o&&(P(2),O("genName","BibleMenu")("svgWidth",512)("svgHeight",512)("tag",c.myBibleMenuData),P(2),O("data",c.menuData))},directives:[kl,RD],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{top:0;bottom:0;left:0;right:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:calc(100vh - 60px)}.h80[_ngcontent-%COMP%]{height:calc(78vh - 60px);width:78vh}"]}),l})();class KN{constructor(){this.fineText=!1}static builder(){return new KN}setFineText(a){return this.fineText=a,this}}class hC extends Pi{constructor(a,o,c,u){super(a,o,c),this.menuState=u}static builder(){return new hC("",null,null,KN.builder().setFineText(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}class ND{constructor(a,o){this.workerId=a,this.message=o}static builder(){return new ND(-1,null)}setWorkerId(a){return this.workerId=a,this}setMessage(a){return this.message=a,this}}let Zte=(()=>{class l{constructor(o){this.type=o,this.id=0,this.callbackId=-1,this.id=l.newId()}static newId(){return l.staticId++}setCallbackId(o){return this.callbackId=o,this}}return l.staticId=0,l})(),XVe=(()=>{class l extends Zte{constructor(o){super(l.TYPE),this.pageLoadedFrom=o}static builder(){return new l("")}setPageLoadedFrom(o){return this.pageLoadedFrom=o,this}}return l.TYPE="SetupWorkerRequest",l})(),ih=null;class Yo{constructor(){this.handler=null,this.workerId=Yo.nextWorkerId()}static nextWorkerId(){return Yo.iNextWorkerId++}static builder(){return new Yo}enabled(){return!!ih}subscribe(){ih&&(Yo.appWorkerStaticOnmessageMap.set(this.workerId,a=>{this.handler&&this.handler(a)}),ih.onmessage=({data:a})=>{let o=a;if(Yo.appWorkerStaticOnmessageMap.has(o.workerId)){let c=Yo.appWorkerStaticOnmessageMap.get(o.workerId);c&&c(o.message)}})}unsubscribe(){ih&&Yo.appWorkerStaticOnmessageMap.delete(this.workerId)}sendMessage(a="hello"){ih&&ih.postMessage(ND.builder().setWorkerId(this.workerId).setMessage(a))}setOnMessage(a){return this.handler=a,this.subscribe(),this}}Yo.iNextWorkerId=0,Yo.appWorkerStaticOnmessageMap=new Map,"undefined"!=typeof Worker&&(ih=new Worker(wt.tu(new URL(wt.p+wt.u(273),wt.b))),ih.onmessage=({data:l})=>{let a=l;if(Yo.appWorkerStaticOnmessageMap.has(a.workerId)){let o=Yo.appWorkerStaticOnmessageMap.get(a.workerId);o&&o(a.message)}},ih.onerror=l=>{},ih.postMessage(ND.builder().setWorkerId(-1).setMessage(XVe.builder().setPageLoadedFrom(pageLoadedFrom))));class Pf extends Zte{}let Kte=(()=>{class l extends Pf{constructor(o,c){super(l.TYPE),this.libraryRef=o,this.libraryType=c}static builder(){return new l("","")}setLibraryRef(o){return this.libraryRef=o,this}setLibraryType(o){return this.libraryType=o,this}}return l.TYPE="LibraryInfoRequest",l})(),Qte=(()=>{class l extends Pf{constructor(o,c,u){super(l.TYPE),this.libraryType=o,this.bookRef=c,this.loadBooksEnabled=u}static builder(){return new l("","",!0)}setLibraryType(o){return this.libraryType=o,this}setBookRef(o){return this.bookRef=o,this}setLoadBooksEnabled(o){return this.loadBooksEnabled=o,this}}return l.TYPE="BookInfoRequest",l})(),Jte=(()=>{class l extends Pf{constructor(o,c,u){super(l.TYPE),this.libraryType=o,this.bookRef=c,this.languages=u}static builder(){return new l("","",[])}setLibraryType(o){return this.libraryType=o,this}setBookRef(o){return this.bookRef=o,this}setLanguages(o){return this.languages=o,this}addLanguage(o){return this.languages.push(o),this}}return l.TYPE="BookRequest",l})();class QN{constructor(a,o,c){this.bookRef=a,this.bookPath=o,this.bookPage=c}static builder(){return new QN("","","")}setBookRef(a){return this.bookRef=a,this}setBookPath(a){return this.bookPath=a,this}setBookPage(a){return this.bookPage=a,this}}let ene=(()=>{class l extends Pf{constructor(o){super(l.TYPE),this.pages=o}static builder(){return new l([])}setBookPages(o){return this.pages=o,this}addBookPage(o){return this.pages.push(o),this}}return l.TYPE="PagesRequest",l})(),JN=(()=>{class l extends Pf{constructor(o){super(l.TYPE),this.pages=o}static builder(){return new l([])}setPages(o){return this.pages=o,this}addPage(o){return this.pages.push(o),this}}return l.TYPE="PagesResponse",l})();class eL{constructor(a,o,c){this.bookRef=a,this.path=o,this.content=c}static builder(){return new eL("","","")}setBookRef(a){return this.bookRef=a,this}setPath(a){return this.path=a,this}setContent(a){return this.content=a,this}}let tne=(()=>{class l extends Pf{constructor(o){super(l.TYPE),this.metaBooks=o}static builder(){return new l([])}setMetaBooks(o){return this.metaBooks=o,this}addMetaBook(o){return this.metaBooks.push(o),this}}return l.TYPE="BookResponse",l})(),nne=(()=>{class l extends Pf{constructor(o,c,u){super(l.TYPE),this.bookRef=o,this.metaContent=c,this.loadBooksEnabled=u}static builder(){return new l("","",!0)}setBookRef(o){return this.bookRef=o,this}setMetaContent(o){return this.metaContent=o,this}setLoadBooksEnabled(o){return this.loadBooksEnabled=o,this}}return l.TYPE="BookInfoResponse",l})(),ine=(()=>{class l extends Pf{constructor(o,c){super(l.TYPE),this.libraryRef=o,this.metaContent=c}static builder(){return new l("","")}setLibraryRef(o){return this.libraryRef=o,this}setMetaContent(o){return this.metaContent=o,this}}return l.TYPE="LibraryInfoResponse",l})();class rne{constructor(a=null){this.messageSender=a,this.requests=new Map}send(a,o){return this.messageSender&&(this.requests.set(o.type,o),this.messageSender(a,o)),this}post(a,o){return this}runAll(a,o,c){let u=0,h=()=>{if(u>=a.length)return void(c&&c(!0));let d=a[u++];o(d,f=>{f?h():c&&c(!1)})};h()}}class tL{constructor(a,o="/static"){this.config=a,this.sRestPoint=o,this.textCache=new Map,this.waitingTextCache=new Map}get coding(){return this.config.coding}get restPoint(){return this.coding?"/staticb":this.sRestPoint}getRestPoint(a,o,c=null){const u=this.config.isRelativeCacheService()||this.config.isMemoryServerType()?this.config.baseHref:this.config.serviceAPIHost;return _r.merge(_r.merge(o||u,null!=c?c:this.restPoint),a)}completeOnDone(a,o){let c=this.waitingTextCache.get(a);c&&(c.forEach(u=>{this.config.post(()=>{u&&u(o)})}),this.waitingTextCache.delete(a))}getTextRestcallUrl(a,o){if(this.coding){if(this.textCache.has(a)){let c=this.textCache.get(a);if(null!=c)return void this.config.post(()=>{o&&o(c)})}return this.waitingTextCache.has(a)?void(o&&this.waitingTextCache.get(a).push(o)):(o&&this.waitingTextCache.set(a,[o]),this.getBinRestcallUrlRaw(a,c=>{if(c){let u=new Uint8Array(c),h=ID.fromByteArray(u);this.completeOnDone(a,h)}else o&&o(null)}))}return this.getTextRestcallUrlRaw(a,o)}getTextRestcallUrlRaw(a,o){if(this.textCache.has(a)){let u=this.textCache.get(a);if(null!=u)return void this.config.post(()=>{o&&o(u)})}if(this.waitingTextCache.has(a))o&&this.waitingTextCache.get(a).push(o);else{o&&this.waitingTextCache.set(a,[o]);var c=new XMLHttpRequest;c.onload=()=>{if(o){let u=4===c.readyState&&200===c.status?c.responseText:null;null!=u?this.textCache.set(a,u):this.textCache.delete(a),this.completeOnDone(a,u)}},c.open("get",a,!0),c.send()}}getBinRestcallUrlRaw(a,o){let c=a;if(this.coding){let h=c.lastIndexOf(".");h>=0&&(c=c.substring(0,h)+".bin")}var u=new XMLHttpRequest;u.onload=()=>{if(o){let d=new Uint8Array(4===u.readyState&&200===u.status?u.response:null),f=ID.dtr(d,-1);o&&o(f)}},u.open("get",c,!0),u.responseType="arraybuffer",u.send()}}class nL extends rne{constructor(a=null){super(a),this.cacheService=null}setCacheService(a){return this.cacheService=a,this}post(a,o){switch(o.type){case Kte.TYPE:this.onLibraryInfoRequest(a,o);break;case Qte.TYPE:this.onBookInfoRequest(a,o);break;case Jte.TYPE:this.onBookRequest(a,o);break;case ene.TYPE:this.onPagesRequest(a,o);break;default:throw new Error(`Unknown message type: ${o.type}.`)}return this}onLibraryInfoRequest(a,o){let c=ine.builder().setCallbackId(o.id);o.libraryRef?this.loadLibraryInfo(o,c,o.libraryType+"/"+o.libraryRef+".library.txt",u=>{this.send(a,c)}):this.send(a,c)}loadLibraryInfo(a,o,c,u=null){let h=this.cacheService.getRestPoint(c,null);this.cacheService.getTextRestcallUrl(h,d=>{o.setMetaContent(d||"").setLibraryRef(a.libraryRef),u&&u(!!d)})}onBookInfoRequest(a,o){let c=nne.builder().setCallbackId(o.id);o.bookRef?this.loadBookInfo(o,c,o.libraryType+"/"+o.bookRef+".book.txt",u=>{this.send(a,c)}):this.send(a,c)}loadBookInfo(a,o,c,u=null){let h=this.cacheService.getRestPoint(c,null);this.cacheService.getTextRestcallUrl(h,d=>{o.setMetaContent(d||"").setBookRef(a.bookRef),u&&u(!!d)})}onBookRequest(a,o){let c=tne.builder().setCallbackId(o.id),u=o.languages.map(h=>h);u.length||u.push("CS","Sinodal"),u=u.map(h=>_r.merge("/"+o.libraryType,o.bookRef+"_"+h+"/index.txt")),o.bookRef?this.runAll(u,(h,d)=>{this.loadBookPath(o,c,h,d)},h=>{this.send(a,c)}):this.send(a,c)}loadBookPath(a,o,c,u=null){let h=this.cacheService.getRestPoint(c,null);this.cacheService.getTextRestcallUrl(h,d=>{o.addMetaBook(eL.builder().setBookRef(a.bookRef).setPath(c).setContent(d||"")),u&&u(!!d)})}onPagesRequest(a,o){let c=JN.builder().setCallbackId(o.id);this.runAll(o.pages,(u,h)=>{let d=this.findPathPrefix(u.bookPath),f=this.cacheService.getRestPoint(_r.merge(d,u.bookPage),null);this.cacheService.getTextRestcallUrl(f,p=>{c.addPage(p||""),h(!0)})},u=>{this.send(a,c)})}findPathPrefix(a){let o=a.lastIndexOf("/");return a.substring(0,o)}}class dC{static builder(){return new dC}Book(){return iL.builder()}NameValue(){return rL.builder()}NamePath(){return sL.builder()}}class iL{constructor(a,o){this.settings=a,this.content=o}static builder(){return new iL([],[])}setSettings(a){return this.settings=a,this}setContent(a){return this.content=a,this}}class rL{constructor(a,o,c){this.name=a,this.value=o,this.value2=c}static builder(){return new rL("","",[])}setName(a){return this.name=a,this}setValue(a){return this.value=a,this}setValue2(a){return this.value2=a,this}}class sL{constructor(a,o,c){this.name=a,this.path=o,this.path2=c}static builder(){return new sL("","",[])}setName(a){return this.name=a,this}setPath(a){return this.path=a,this}setPath2(a){return this.path2=a,this}}var fC=(()=>(function(l){l.\u0422\u0435\u043a\u0441\u0442="\u0442\u0435\u043a\u0442",l.\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435="\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",l.\u0413\u0440\u0430\u0444\u0438\u043a="\u0433\u0440\u0430\u0444\u0438\u043a",l.\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442="\u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u042d\u043b\u0435\u043c\u0435\u043d\u0442",l.\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f="\u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"}(fC||(fC={})),fC))();class pC{constructor(a,o,c,u){this.\u0442\u0438\u043f=a,this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=o,this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=c,this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=u}static builder(){return new pC(fC.\u0422\u0435\u043a\u0441\u0442,!0,[],null)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(a){return this.\u0442\u0438\u043f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(a){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b=a,this}get fragments(){return this.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(a){return this.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442=a,this}}class ns{constructor(a,o,c,u){this.classes=a,this.text=o,this.link=c,this.component=u}static builder(){return new ns({},"",null,null)}setClasses(a){return this.classes=a,this}setText(a){return this.text=a,this}setLink(a){return this.link=a,this}setComponent(a){return this.component=a,this}}let oL=(()=>{class l{constructor(o){this.config=o}get textFragmentData(){return this.data}get classes(){return this.textFragmentData.config.fragment.classes}get text2(){return this.textFragmentData.config.fragment.text}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-text-fragment"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"]],template:function(o,c){1&o&&(M(0,"span",0),ie(1),E()),2&o&&(O("ngClass",c.classes),P(1),en(c.text2?c.text2:"\xa0"))},directives:[Xn],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class aL{constructor(a){this.fragment=a}static builder(){return new aL(null)}setFragment(a){return this.fragment=a,this}}class gC extends Pi{constructor(a,o,c,u){super(a,o,c),this.config=u}static builder(){return new gC("",null,null,aL.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}class sne{static uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16))}}class _o{constructor(a,o,c,u,h,d=!0){this.path=a,this.isText=o,this.content=c,this.data=u,this.pathZip=h,this.printable=d}getPath(){return this.pathZip?this.pathZip:this.path}}class LD{constructor(a,o,c){this.index=a,this.text=o,this.classes=c,this.lines=[]}}class lL{constructor(a,o){this.lineNumber=a,this.translations=o}}class ZVe{constructor(a,o,c,u,h){this.psalom=a,this.slava=o,this.lines=c,this.names=u,this.textJustifyClass=h,this.translations=[],this.memorials=[]}sync(){return this.translations=[],this.lines.forEach((a,o)=>{a.translations.forEach((c,u)=>{for(;this.translations.length<=u;)this.translations.push(new LD("","",""));let h=this.translations[u];c.classes&&(h.classes=c.classes),c.index&&(h.index=c.index),h.lines.push(new lL(a.lineNumber,[new LD(c.index,c.text,c.classes)]))})}),this}get translationsCount(){return this.lines.length?this.lines[0].translations.length:0}}class KVe{constructor(a,o,c,u,h){this.name=a,this.link=o,this.id=c,this.order=u,this.children=h}}class uL{constructor(a,o){this.textSizeClass=a,this.lines=o}}class QVe{constructor(a,o,c){this.type=a,this.link=o,this.name=c}}class JVe{constructor(a,o){this.kafizma=a,this.psalmy=o,this.uuidContent="",this.uuidContributer="",this.textSizeClass="",this.textJustifyClass="",this.name="",this.psalomName="",this.application="",this.applicationId="",this.developerId="",this.developerName="",this.developerNameSortOrder="",this.developerLink="",this.date="",this.content=[],this.fileNames=[],this.molitva=new uL("",[]),this.startMolitva=new uL("",[]),this.endMolitva=new uL("",[])}}class Iv{constructor(a,o,c,u,h,d,f,p){this.name=a,this.psalomName=o,this.allBooks=c,this.bookNames=u,this.allBooksChapters=h,this.emptyFirstLines=d,this.showLineIndexes=f,this.showMiddleContent=p}static builder(){return new Iv("","",[],[],[],[],!0,!0)}setName(a){return this.name=a,this}setPsalomName(a){return this.psalomName=a,this}setAllBooks(a){return this.allBooks=a,this}setBookNames(a){return this.bookNames=a,this}setAllBooksChapters(a){return this.allBooksChapters=a,this}setEmptyFirstLines(a){return this.emptyFirstLines=a,this}setShowLineIndexes(a){return this.showLineIndexes=a,this}setShowMiddleContent(a){return this.showMiddleContent=a,this}}class hL{constructor(a){this.requestsPack=a}static builder(){return new hL([])}setRequestPack(a){return this.requestsPack=a,this}addRequest(a){return this.requestsPack.push(a),this}}class mC{constructor(a){this.handler=a}static builder(){return new mC(null)}setHandler(a){return this.handler=a,this}print(a){this.handler&&this.handler(a)}}let one=(()=>{class l{constructor(o,c,u,h,d){this.cacheSvc=o,this.zipSvc=c,this.config=u,this.uiConfig=h,this.ks=d,this.prefix="templates/",this.baseContents=[],this.uniqueId=0,this.tocIndex=1,this.zipEntries=[],this.content=[],this.kafizmyContent=null,this.startRequest=null,this.setup()}setup(){this.baseContents=[new _o("ebook/mimetype.txt",!0,"",null,"mimetype"),new _o("ebook/stylesheet.css",!0,"",null,"stylesheet.css"),new _o("ebook/PonomarUnicode.ttf",!1,"",null,"PonomarUnicode.ttf"),new _o("ebook/triodion-ieUcs.ttf",!1,"",null,"triodion-ieUcs.ttf"),new _o("ebook/logo.png",!1,"",null,"logo.png"),new _o("ebook/meta_inf/container.xml.txt",!0,"",null,"META-INF/container.xml"),new _o("ebook/toc.ncx.txt",!0,"",null,"toc.ncx"),new _o("ebook/metadata.opf.txt",!0,"",null,"metadata.opf"),new _o("ebook/content.xhtml",!0,"",null,"content.xhtml"),new _o("ebook/titlepage.xhtml",!0,"",null,"titlepage.xhtml"),new _o("kafizma.parallel.xhtml",!0,"",null,"",!1),new _o("kafizma.parallel.redline.xhtml",!0,"",null,"",!1),new _o("kafizma.parallel.redline.nobreaks.xhtml",!0,"",null,"",!1),new _o("kafizma.xhtml",!0,"",null,"",!1),new _o("kafizma.nobreaks.xhtml",!0,"",null,"",!1)]}clearGeneratePrintRequestsPack(o,c){this.zipEntries=[],this.content=[],this.startRequest=o,this.kafizmyContent=c,this.tocIndex=1}startGeneratePrintRequestsPack(o,c){}nextUniqueId(){return this.uniqueId++}nextTocIndex(){return++this.tocIndex}newMustacheFileName(o,c,u,h,d){return new KVe(o,c,u+"_"+h,h,d)}findContent(o){return this.content.find(c=>c.path==o)}addToc(o,c,u,h,d){o.content.push(new QVe(c,u,h)),o.fileNames.push(this.newMustacheFileName(h,u,d,`${this.nextTocIndex()}`,[]))}doGeneratePrintRequestsPack(o,c){let u=o.bookNames.map(d=>d.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439")||d.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439 (\u0440\u0443\u0441)")?"cs":d.endsWith("\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-UCS8")?"cs2":d.endsWith("\u043f\u0440\u0435\u0444\u0438\u043a\u0441")?"right":"").map(d=>d+" "+(this.uiConfig.ui.fineText.getBooleanValue()?"ftext":"")),h=!!o.bookNames.find(d=>"\u043f\u0440\u0435\u0444\u0438\u043a\u0441"===d);for(let d=0;d<o.allBooksChapters.length;++d){let f=this.findContent(h?"kafizma.parallel.redline.xhtml":this.uiConfig.ui.parallel.getBooleanValue()?this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.parallel.redline.xhtml":"kafizma.parallel.redline.nobreaks.xhtml":this.uiConfig.ui.lineBreaks.getBooleanValue()?"kafizma.xhtml":"kafizma.nobreaks.xhtml");if(!f)continue;let p=(b,x)=>o.allBooks[b].flatMap((C,w)=>C.filter((S,D)=>D==x).map((S,D)=>new LD(`${x}`,S,u[w]))),g=o.allBooks[d][0].map((b,x)=>{let C=o.emptyFirstLines[d].reduce((A,I)=>A>I?I:A,100),S=p(d,x),D=x+1-C,T=S.map(A=>A.lines.length>0).reduce((A,I,N,k)=>A&&I,!0);return new lL(`${D>0&&!T&&o.showLineIndexes?D:""}`,S)}),m=new ZVe(o.allBooksChapters[d],[],g,[],this.uiConfig.ui.fineText.getBooleanValue()?"ftext":""),v=o.allBooks[d].length;for(let b=0;b<v;++b){let x=new LD("","",u[b]);x.lines=g.map(C=>new lL(C.lineNumber,[C.translations[b]])),m.translations.push(x)}c.psalmy=[m];const _=Mustache.render(f.content,c,{navPoint:"",item:"",itemref:""});let y=this.nextUniqueId();this.content.push(new _o(`glava_${o.allBooksChapters[d]}_${y}.xhtml`,!0,_,null,"")),this.addToc(c,"TextTOC",`glava_${o.allBooksChapters[d]}_${y}.xhtml`,`${c.psalomName} ${o.allBooksChapters[d]}`,`num_glava_${o.allBooksChapters[d]}_${y}`)}}updateContent(o){!this.kafizmyContent||(o.content=this.kafizmyContent.content,o.fileNames=this.kafizmyContent.fileNames)}endGeneratePrintRequestsPack(o,c,u){this.content.forEach(h=>{if(h.printable)if(h.isText)try{const d=Mustache.render(h.content,h.data?h.data:c,{navPoint:'\n    <navPoint id="{{id}}" playOrder="{{order}}">\n        <navLabel>\n          <text>{{name}}</text>\n        </navLabel>\n        <content src="{{link}}"/>{{#children}}{{>navPoint}}{{/children}}\n      </navPoint>',item:'\n    <item href="{{link}}" id="r{{id}}" media-type="application/xhtml+xml"/>{{#children}}{{>item}}{{/children}}',itemref:'\n    <itemref idref="r{{id}}"/>{{#children}}{{>itemref}}{{/children}}'});this.zipEntries.push(FD.builder().setFileName(h.getPath()).setContent(d))}catch(d){}else this.zipEntries.push(FD.builder().setFileName(h.getPath()).setContent(h.content))}),this.zipSvc.zip(this.zipEntries).then(h=>{const d=new Blob([h],{type:"octet/stream"}),f=(new Date).toISOString().split("T")[0];if(this.config.isPlatformAndroid()){const g=`${o.name}.epub`;this.ks.addTempFile(g,d).then(m=>{m&&m.success&&rd.startDownload(m.fileName,g),u(!0)})}else rd.saveData(d,`${o.name}.${f}.epub`),u(!0)})}loadBaseContent(o,c,u){let h=this.baseContents[o];h.isText?this.cacheSvc.getText(this.prefix+h.path,d=>{d?(this.content.push(new _o(h.path,h.isText,d,h.data,h.pathZip,h.printable)),this.config.post(()=>{c()})):(this.config.addAlert(mr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${h.path}`,"\u041e\u041a",15)),u(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${h.path}.`))}):this.cacheSvc.getBinary(this.prefix+h.path,d=>{d?(this.content.push(new _o(h.path,h.isText,d,h.data,h.pathZip,h.printable)),this.config.post(()=>{c()})):(this.config.addAlert(mr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${h.path}`,"\u041e\u041a",15)),u(`\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: ${h.path}.`))})}generate(o,c=!0,u=!0,h=!0){return new Promise((d,f)=>{let p=c?0:this.baseContents.length;const g=(this.uiConfig.ui.parallel.getBooleanValue()?"P":"")+(this.uiConfig.ui.coloredTranslations.getBooleanValue()?"C":"")+(this.uiConfig.ui.fineText.getBooleanValue()?"J":"")+(this.uiConfig.ui.showMolitvy.getBooleanValue()?"M":"");let m=new JVe(1,[]);m.name=o.name,m.psalomName=o.psalomName,m.application=this.config.getApplication().name,m.applicationId=this.config.getApplication().id,m.developerId=this.config.developerId,m.developerName=this.config.developerName,m.developerNameSortOrder=this.config.developerNameSortOrder,m.developerLink=this.config.developerLink,m.uuidContent=sne.uuidv4(),m.uuidContributer=sne.uuidv4(),m.application=`${this.config.getApplication().name} (${this.config.version}) ${g}`;const v=(new Date).toISOString(),_=v.lastIndexOf(".");m.date=v.substring(0,_)+"+00:00",c&&this.clearGeneratePrintRequestsPack(o,m);let y=()=>{let b=p++;b>=this.baseContents.length?(c?(this.startGeneratePrintRequestsPack(o,m),this.addToc(m,"TextTOC","titlepage.xhtml","\u041e\u0431\u043b\u043e\u0436\u043a\u0430","num_title"),this.addToc(m,"TextTOC","content.xhtml","\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","num_content")):this.updateContent(m),u&&this.doGeneratePrintRequestsPack(o,m),h?this.endGeneratePrintRequestsPack(o,m,x=>d(x)):d(!0)):this.loadBaseContent(b,()=>y(),x=>f(x))};y()})}}return l.\u0275fac=function(o){return new(o||l)(Ie(ad),Ie(ZN),Ie(on),Ie(Gn),Ie(kf))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class dL{constructor(a,o){this.libName=a,this.link=o}static builder(){return new dL("",null)}setLibName(a){return this.libName=a,this}setLink(a){return this.link=a,this}}class fL{constructor(a,o){this.fragment=a,this.link=o}static builder(){return new fL(null,null)}setFragment(a){return this.fragment=a,this}setLink(a){return this.link=a,this}}class pL extends Pi{constructor(a,o,c,u){super(a,o,c),this.config=u,this.id="",this.targetId="",this.waitingForSenderId="",this.printerHandler=mC.builder()}static builder(){return new pL("",null,null,fL.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}setWaitingForSenderId(a){return this.waitingForSenderId=a,this}}class qa{constructor(a){this.onRoute=a,this.logical=!0,this.shortName=!1,this.textIsPage=!1,this.chapter="",this.startLine=-1,this.endLine=-1,this.bookName="",this.languages=null}static builder(){return new qa(null)}setShortName(a){return this.shortName=a,this}setTextIsPage(a){return this.textIsPage=a,this}setChapter(a){return this.chapter=a,this}setStartLine(a){return this.startLine=a,this}setEndLine(a){return this.endLine=a,this}setBookName(a){return this.bookName=a,this}setLanguages(a){return this.languages=a,this}setLogical(a){return this.logical=a,this}setOnRoute(a){return this.onRoute=a,this}route(a){this.onRoute&&this.onRoute(a)}}class Ya extends Pi{constructor(a,o,c,u,h){super(a,o,c),this.link=u,this.search=h,this.menuLinks=null,this.forceMenu=!1,this.hideUI=!1,this.enableEpub=!0,this.showPrintButtons=!1,this.handleMemorialNewTitleTarget="",this.facePage=!1,this.parallel=null,this.linebreaks=null,this.id="",this.targetId="",this.printerHandler=mC.builder(),this.autoPrint=!1}static builder(){return new Ya("",null,null,qa.builder().setShortName(!0),"")}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setLink(a){return this.link=a,this}setSearch(a){return this.search=a,this}setMenu(a){return this.menuLinks=a,this}setForceMenu(a){return this.forceMenu=a,this}setHideUI(a){return this.hideUI=a,this}setEpubEnabled(a){return this.enableEpub=a,this}setShowPrintButtons(a){return this.showPrintButtons=a,this}setHandleMemorialNewTitle(a){return this.handleMemorialNewTitleTarget=a,this}setFacePage(a){return this.facePage=a,this}setParallel(a){return this.parallel=a,this}setLinebreaks(a){return this.linebreaks=a,this}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}setAutoPrint(a){return this.autoPrint=a,this}}function e6e(l,a){1&l&&(M(0,"span"),ie(1,"+"),E())}function t6e(l,a){if(1&l&&(M(0,"span"),ie(1),E()),2&l){const o=X(2);P(1),hi("",o.link.endChapter,":")}}function n6e(l,a){if(1&l&&(M(0,"span"),ie(1),E()),2&l){const o=X(2);P(1),en(o.link.endLine)}}function i6e(l,a){if(1&l&&(M(0,"span"),ie(1,"-"),Z(2,t6e,2,1,"span",2),Z(3,n6e,2,1,"span",2),E()),2&l){const o=X();P(2),O("ngIf",o.link.endChapter>0),P(1),O("ngIf",o.link.endLine)}}function r6e(l,a){1&l&&me(0,"app-dynamic-library-book",4),2&l&&O("data",X().bookData)}const s6e=function(l){return{"is-solid":l,cursor:!0,blue:!0}};let gL=(()=>{class l{constructor(o){this.config=o,this.bookData=Ya.builder(),this.checkLater=tS.builder(),this.opened=!1}get linkFragmentData(){return this.data}get classes(){return this.linkFragmentData.config.fragment.classes}get link(){return this.linkFragmentData.config.link.link}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){var o,c;if(this.linkFragmentData.printerHandler.setHandler(u=>{this.bookData.printerHandler.print(u)}),this.checkLater.setConfig(this.config).setWaitingForSenderId(this.linkFragmentData.waitingForSenderId).checkEnabled(),this.linkFragmentData.config.link){let u=this.linkFragmentData.config.link.libName;u||(u="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"),this.opened!=!!(null===(c=null===(o=this.linkFragmentData.config.link)||void 0===o?void 0:o.link)||void 0===c?void 0:c.opened)&&this.config.post(()=>{var h,d;this.opened=!!(null===(d=null===(h=this.linkFragmentData.config.link)||void 0===h?void 0:h.link)||void 0===d?void 0:d.opened)}),this.bookData.setText(u).setId(this.linkFragmentData.id).setTargetId(this.linkFragmentData.targetId).setLink(qa.builder().setOnRoute(h=>{}).setChapter(""+this.linkFragmentData.config.link.link.startChapter).setStartLine(this.linkFragmentData.config.link.link.startLine).setEndLine(this.linkFragmentData.config.link.link.endLine))}}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}toggleOpened(o){this.opened=!this.opened,o.stopPropagation()}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-link-fragment"]],inputs:{data:"data"},decls:7,vars:11,consts:[[3,"click"],[3,"ngClass","click"],[4,"ngIf"],[3,"data",4,"ngIf"],[3,"data"]],template:function(o,c){1&o&&(M(0,"span",0),ee("click",function(h){return h.stopPropagation()}),M(1,"clr-icon",1),ee("click",function(h){return c.toggleOpened(h)}),E(),M(2,"span",1),ee("click",function(h){return c.toggleOpened(h)}),ie(3),Z(4,e6e,2,0,"span",2),Z(5,i6e,4,2,"span",2),E(),Z(6,r6e,1,1,"app-dynamic-library-book",3),E()),2&o&&(P(1),O("ngClass",ws(9,s6e,c.opened)),et("shape","scroll"),P(1),O("ngClass",c.classes),P(1),My("",c.link.name,".",c.link.startChapter,":",c.link.startLine,""),P(1),O("ngIf",c.link.endChapter>0||c.link.endLine>=1e3),P(1),O("ngIf",c.link.endChapter>0||c.link.endLine>0&&c.link.endLine<1e3),P(1),O("ngIf",c.opened&&c.checkLater.enabled))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class mL{FragmentIdOp(){return _L.builder()}TextOp(){return yL.builder()}LinkOp(){return bL.builder()}}var Xa=(()=>(function(l){l[l.Text=0]="Text",l[l.Link=1]="Link",l[l.Id=2]="Id"}(Xa||(Xa={})),Xa))();class vL{constructor(a){this.type=a}}class _L extends vL{constructor(a){super(Xa.Id),this.id=a}static builder(){return new _L("")}setId(a){return this.id=a,this}}class yL extends vL{constructor(a,o){super(Xa.Text),this.text=a,this.color=o}static builder(){return new yL("","")}setText(a){return this.text=a,this}setColor(a){return this.color=a,this}}class bL extends vL{constructor(a,o,c,u,h,d=null,f=!1,p="",g="",m=""){super(Xa.Link),this.name=a,this.startChapter=o,this.startLine=c,this.endChapter=u,this.endLine=h,this.langugages=d,this.opened=f,this.id=p,this.targetId=g,this.waitingForSenderId=m}static builder(){return new bL("",1,1,-1,-1)}setName(a){return this.name=a,this}setStartChapter(a){return this.startChapter=a,this}setStartLine(a){return this.startLine=a,this}setEndChapter(a){return this.endChapter=a,this}setEndLine(a){return this.endLine=a,this}setLanguages(a){return this.langugages=a,this}setOpened(a){return this.opened=a,this}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}setWaitingForSenderId(a){return this.waitingForSenderId=a,this}}let CL=(()=>{class l{parseFragments(o,c,u,h="red"){let d=[],f=fragmentsParserStatic.parse(u,{builder:new mL});if(null!=f&&f.length)f[0].forEach(p=>{switch(p.type){case Xa.Text:{let g=p,m=ns.builder().setClasses(l.getLastClass(g.color,h)).setText(g.text),v=gC.builder();v.config.setFragment(m),d.push(m.setComponent(new On(oL,v)))}break;case Xa.Link:{let g=p,m=ns.builder().setClasses(l.getLastClass("\u0441",h));m.classes.cursor=!0;let v=pL.builder();v.config.setLink(dL.builder().setLink(g).setLibName(c(g.name))).setFragment(m),v.setId(g.id).setWaitingForSenderId(g.waitingForSenderId).setTargetId(g.targetId),d.push(m.setComponent(new On(gL,v)))}break;case Xa.Id:{let g=p,m=o.get(g.id);if(m)d.push(m);else{let v=ns.builder().setClasses(l.getLastClass("\u043a",h)).setText(g.id),_=gC.builder();_.config.setFragment(v),d.push(v.setComponent(new On(oL,_)))}}break;default:throw new Error(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430: ${p.type}.`)}});else{let p=ns.builder().setText(""),g=gC.builder();g.config.setFragment(p),d.push(p.setComponent(new On(oL,g)))}return d}}return l.getLastClass=(a,o="red",c=!0)=>{let u={};switch(a){case"\u041a":case"\u043a":c&&(u[o]=c);break;case"\u0417":case"\u0437":c&&(u.green=c);break;case"\u0416":case"\u0436":c&&(u.yellow=c);break;case"\u0421":case"\u0441":c&&(u.blue=c);break;case"\u0424":case"\u0444":c&&(u.indigo=c);break;case"\u041f":case"\u043f":c&&(u.purple=c);break;case"\u041c":case"\u043c":c&&(u.cyan=c);break;case"\u041b":case"\u043b":c&&(u.greenYellow=c);break;case"\u0420":case"\u0440":c&&(u.darkRed=c)}return u},l})();class xL{constructor(a,o,c){this.book=a,this.lineIndex=o,this.bookSvc=c}static builder(){return new xL(null,0,null)}setBook(a){return this.book=a,this}setLineIndex(a){return this.lineIndex=a,this}setBookSvc(a){return this.bookSvc=a,this}}class Pv extends Pi{constructor(a,o,c,u){super(a,o,c),this.config=u}static builder(){return new Pv("",null,null,xL.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let ane=(()=>{class l{constructor(o){this.viewContainerRef=o}}return l.\u0275fac=function(o){return new(o||l)(R(Ti))},l.\u0275dir=mt({type:l,selectors:[["","addComponent",""]]}),l})();function o6e(l,a){}let Pl=(()=>{class l{constructor(){this.thisComponent=null,this.currentAdIndex=-1}set component(o){if(!o)throw new Error("Error: thisComponent is null.");this.thisComponent=o}get component(){return this.thisComponent}ngOnInit(){this.loadComponent()}ngOnDestroy(){}loadComponent(){const o=this.thisComponent,c=this.adHost.viewContainerRef;c.clear(),c.createComponent(o.component).instance.data=o.data}reload(){this.loadComponent()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["app-add-component"]],viewQuery:function(o,c){if(1&o&&ti(ane,7),2&o){let u;Vt(u=zt())&&(c.adHost=u.first)}},inputs:{component:"component"},decls:1,vars:0,consts:[["addComponent",""]],template:function(o,c){1&o&&Z(0,o6e,0,0,"ng-template",0)},directives:[ane],encapsulation:2}),l})();function a6e(l,a){1&l&&(M(0,"span"),ie(1,"\xa0"),E())}const l6e=function(l,a){return{red:l,redDark:a}};function c6e(l,a){if(1&l&&(M(0,"span"),M(1,"span",2),ie(2),E(),M(3,"span"),M(4,"span",3),ie(5,"."),E(),E(),E()),2&l){const o=X(2);P(1),O("ngClass",ds(2,l6e,!(o.colored&&o.bookIndex%2),o.colored&&!!(o.bookIndex%2))),P(1),en(o.lineIndex?o.lineIndex:"")}}function u6e(l,a){1&l&&me(0,"app-add-component",5),2&l&&O("component",X().$implicit.component)}function h6e(l,a){if(1&l&&(M(0,"span"),Z(1,u6e,1,1,"app-add-component",4),E()),2&l){const o=a.$implicit;P(1),O("ngIf",o.component)}}function d6e(l,a){if(1&l&&(M(0,"span"),Z(1,c6e,6,5,"span",0),Z(2,h6e,2,1,"span",1),E()),2&l){const o=X();P(1),O("ngIf",o.isLineIndexed(o.book,o.lineIndex)),P(1),O("ngForOf",o.getBookFragments(o.bookIndex,o.book,o.lineIndex))}}let BD=(()=>{class l{constructor(o){this.uiConfig=o}get spanTextData(){return this.data}get bookIndex(){return this.spanTextData.config.book?this.spanTextData.config.book.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438:0}get book(){return this.spanTextData.config.book}get lineIndex(){return this.spanTextData.config.lineIndex}get bookSvc(){return this.spanTextData.config.bookSvc}get text(){return this.data&&this.data.text?this.data.text:""}get colored(){return this.uiConfig.ui.coloredTranslations.getBooleanValue()}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}isLineIndexed(o,c){return c>0&&o.\u0441\u0442\u0440\u043e\u043a\u0438[c].fragments.length>0&&o.\u0441\u0442\u0440\u043e\u043a\u0438[c].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}getBookFragments(o,c,u){var h,d,f;let p=null===(f=null===(d=null===(h=this.bookSvc)||void 0===h?void 0:h.bookContent[o])||void 0===d?void 0:d.parsed)||void 0===f?void 0:f.settings.find(g=>"\u044f\u0437\u044b\u043a"===g.name.toLowerCase());return u<0?[ns.builder().setText(p?p.value:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e").setClasses({red:!0})]:c.\u0441\u0442\u0440\u043e\u043a\u0438[u].fragments}}return l.\u0275fac=function(o){return new(o||l)(R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-span-text"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"hidden"],[3,"component",4,"ngIf"],[3,"component"]],template:function(o,c){1&o&&(Z(0,a6e,2,0,"span",0),Z(1,d6e,3,2,"span",0)),2&o&&(O("ngIf",!c.book),P(1),O("ngIf",c.book))},directives:[mn,Xn,fi,Pl],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class f6e{newText(){return wL.builder()}}class wL{constructor(a,o){this.type=a,this.text=o}static builder(){return new wL("","")}setType(a){return this.type=a,this}setText(a){return this.text=a,this}}class VD{static escapeString(a){let o="",c=!1;for(let u=0;u<a.length;u++){let h=a.charAt(u);switch(h){case"'":c||(o+="\\"),o+=h,c=!1;break;case"\\":o+=h,c=!0;break;default:o+=h,c=!1}}return o}static stdConverter(a){let o="";switch(a.type){case"*":o+=a.text;break;case"=":o+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438("+a.text+");";break;case"":o+="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438('"+VD.escapeString(a.text)+"');"}return o}parse(a){return bracerParserStatic.parse(a,{builder:new f6e})}getStdConverter(){return a=>VD.stdConverter(a)}join(a,o=null){return o||(o=this.getStdConverter()),a.map(c=>o(c)).join("")}parseAndJoin(a,o=null){return this.join(this.parse(a),o)}}class SL{constructor(){this.block=!1,this.outline=!1,this.type="primary"}static builder(){return new SL}setBlock(a){return this.block=a,this}setOutline(a){return this.outline=a,this}setType(a){return this.type=a,this}}class zD extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u}static builder(){return new zD("",null,null,SL.builder().setBlock(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let lne=(()=>{class l{constructor(o){this.config=o}get btnData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){var o=this.btnData.classes;return{btn:!0,"btn-block":o.block,"btn-link":"link"==o.type&&!o.outline,"btn-primary":"primary"==o.type&&!o.outline,"btn-primary-outline":"primary"==o.type&&o.outline,"btn-success":"success"==o.type&&!o.outline,"btn-success-outline":"success"==o.type&&o.outline,"btn-danger":"danger"==o.type&&!o.outline,"btn-danger-outline":"danger"==o.type&&o.outline,"no-print":!0}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-button"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass","click"]],template:function(o,c){1&o&&(M(0,"button",0),ee("click",function(h){return c.onClick(h)}),ie(1),E()),2&o&&(O("ngClass",c.getClasses()),P(1),en(c.text))},directives:[Xn],styles:[""]}),l})(),Ov=(()=>{class l{constructor(o){this.uiConfig=o}getBookmarks(){return this.uiConfig.ui.bookmarks.getStringValue().split(",").filter(o=>!!o)}setBookmarks(o){return this.uiConfig.ui.bookmarks.setStringValue(o.join(",")),this}addBookmark(o,c,u,h){if(!o)return this;let d=this.getBookmarks();return d.push(o+"."+c+(u>0?":"+u+(h>0?"-"+h:""):"")),this.setBookmarks(d),this}deleteBookmark(o){let c=this.getBookmarks(),u=c.findIndex(h=>h===o);return u>=0&&(c.splice(u,1),this.setBookmarks(c)),this}}return l.\u0275fac=function(o){return new(o||l)(Ie(Gn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class TL{constructor(){this.\u0434\u0432\u0438\u0436\u043e\u043a=new Tl,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u0438\u041f\u043e\u0423\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e()}addMethod(a,o,c){return a.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set(o,this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043c\u0435\u0442\u043e\u0434").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(xt.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u044a\u0435\u043a\u0442(Mt.\u043d\u043e\u0432\u044b\u0439\u041c\u0435\u0442\u043e\u0434().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b\u041c\u0435\u0442\u043e\u0434\u0430(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432")).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043b\u043e(ne.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(_g.\u043d\u043e\u0432\u0430\u044f().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0443\u043d\u043a\u0446\u0438\u044e(c)))))),this}addBookmarksEnvironment(a,o){this.addMethod(a,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445",(c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);if(o){let f=new Ov(o),p=f.getBookmarks(),g=p.findIndex(v=>v==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p;if(g>0){m=[];let v=g-1;m.push(...p.slice(0,v));let _=p.splice(g,1);m.push(..._),m.push(...p.slice(v))}f.setBookmarks(m)}return u[0]}),this.addMethod(a,"\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437",(c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);if(o){let f=new Ov(o),p=f.getBookmarks(),g=p.findIndex(v=>v==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p;if(g>=0&&g+1<p.length){m=[],m.push(...p.slice(0,g));let _=p.splice(g,1),y=p.splice(g,1);m.push(...y),m.push(..._),m.push(...p.slice(g))}f.setBookmarks(m)}return u[0]}),this.addMethod(a,"\u0443\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(c,u)=>{var d=c.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(u[1]);if(o){let f=new Ov(o),p=f.getBookmarks(),g=p.findIndex(v=>v==d.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),m=p;g>=0&&p.splice(g,1),f.setBookmarks(m)}return u[0]})}run(a,o=null,c=null,u=null){let h=o||Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),d=c||Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),f=u||Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),g=(new bg).\u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a(a),m=null;{let v=this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.\u0434\u0432\u0438\u0436\u043e\u043a.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0421\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438(ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(g),[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442(),h,d,f],[ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043f\u0430\u043c\u044f\u0442\u044c"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435"),ne.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442")],!0,!0,!1,null));v&&v.\u044d\u0442\u043e\u0421\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442()&&"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e"==v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()&&(m=f.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"))}return m}}class DL{constructor(a){this.check=a}static builder(){return new DL(!1)}setCheck(a){return this.check=a,this}}class ML extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u}static builder(){return new ML("",null,null,DL.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let p6e=(()=>{class l{constructor(o){this.config=o}get cbData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{"clr-checkbox":!0}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-checkbox"]],inputs:{data:"data"},decls:6,vars:3,consts:[[1,"clr-form-control","no-print"],[1,"clr-control-container","clr-control-inline"],[1,"clr-checkbox-wrapper"],["type","checkbox","id","vertical-checkbox1","name","checkbox-inline-1","value","option1",3,"checked","ngClass","click"],["for","vertical-checkbox1",1,"clr-control-label"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"div",1),M(2,"div",2),M(3,"input",3),ee("click",function(h){return c.onClick(h)}),E(),M(4,"label",4),ie(5),E(),E(),E(),E()),2&o&&(P(3),O("checked",c.cbData.classes.check)("ngClass",c.getClasses()),P(2),en(c.text))},directives:[Xn,Rr],styles:[""]}),l})();class EL{constructor(){this.ordered=!1}static builder(){return new EL}setOrdered(a){return this.ordered=a,this}}class kL extends Pi{constructor(a,o,c,u,h){super(a,o,c),this.classes=u,this.items=h}static builder(){return new kL("",null,null,EL.builder(),[])}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setItems(a){return this.items=a,this}addItem(a){return this.items.push(a),this}}function g6e(l,a){if(1&l&&(M(0,"li"),me(1,"app-add-component",3),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}function m6e(l,a){if(1&l&&(M(0,"ol",1),Z(1,g6e,2,1,"li",2),E()),2&l){const o=X();O("ngClass",o.getClasses()),P(1),O("ngForOf",o.listData.items)}}function v6e(l,a){if(1&l&&(M(0,"li"),me(1,"app-add-component",3),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}function _6e(l,a){if(1&l&&(M(0,"ul",1),Z(1,v6e,2,1,"li",2),E()),2&l){const o=X();O("ngClass",o.getClasses()),P(1),O("ngForOf",o.listData.items)}}let y6e=(()=>{class l{constructor(o){this.config=o}get listData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u041f\u0435\u0440\u0432\u0430\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430"}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{list:!0}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-list"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(Z(0,m6e,2,2,"ol",0),Z(1,_6e,2,2,"ul",0)),2&o&&(O("ngIf",c.listData.classes.ordered),P(1),O("ngIf",!c.listData.classes.ordered))},directives:[mn,Xn,fi,Pl],styles:[""]}),l})();class Fv{static builder(){return new Fv}parse(a,o=null){return fragmentsParserStatic.parse(a,{builder:o||new mL})}}class AL{constructor(a=!0,o=!0,c=!0,u=!0,h=!0,d=!0){this.slava1Zdrav=a,this.slava1Upok=o,this.slava2Zdrav=c,this.slava2Upok=u,this.slava3Zdrav=h,this.slava3Upok=d}static builder(){return new AL}setSlava1Zdrav(a){return this.slava1Zdrav=a,this}setSlava1Upok(a){return this.slava1Upok=a,this}setSlava2Zdrav(a){return this.slava2Zdrav=a,this}setSlava2Upok(a){return this.slava2Upok=a,this}setSlava3Zdrav(a){return this.slava3Zdrav=a,this}setSlava3Upok(a){return this.slava3Upok=a,this}isLiveAcceptable(a){let o=!1;return o=a?this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav:this.slava1Upok||this.slava2Upok||this.slava3Upok,o}getLiveValue(){let a=null,o=this.slava1Zdrav||this.slava2Zdrav||this.slava3Zdrav;return o!==(this.slava1Upok||this.slava2Upok||this.slava3Upok)&&(a=o),a}}class IL extends Pi{constructor(a,o,c,u,h){super(a,o,c),this.classes=u,this.readonly=h,this.id="",this.targetId="",this.printerHandler=mC.builder()}static builder(){return new IL("",null,null,AL.builder(),!1)}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setReadonly(a){return this.readonly=a,this}setId(a){return this.id=a,this}setTargetId(a){return this.targetId=a,this}}class PL{constructor(a,o,c){this.alertClass=a,this.alertShape=o,this.noPrint=c}static builder(){return new PL("alert-danger","exclamation-circle",!1)}setAlertClass(a){return this.alertClass=a,this}setAlertShape(a){return this.alertShape=a,this}setNoPrint(a){return this.noPrint=a,this}}class Ol{constructor(a,o,c){this.text=a,this.enabled=o,this.onClick=c}static builder(){return new Ol("",!0,null)}setText(a){return this.text=a,this}setEnabled(a){return this.enabled=a,this}setOnClick(a){return this.onClick=a,this}runOnClick(){return this.onClick&&this.onClick(this),this}}class iu extends Pi{constructor(a,o,c,u,h,d,f){super(a,o,c),this.errors=u,this.classes=h,this.buttons=d,this.actions=f}static builder(){return new iu("",null,null,[],PL.builder(),[],[])}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setErrors(a){return this.errors=a,this}setButtons(a){return this.buttons=a,this}setActions(a){return this.actions=a,this}updateClasses(a){return a(this.classes),this}}class OL{constructor(a,o){this.prefix=a,this.name=o}static builder(){return new OL("","")}setPrefix(a){return this.prefix=a,this}setName(a){return this.name=a,this}}class En{constructor(a,o){this.index=a,this.name=o}static builder(){return new En(-1,"")}setIndex(a){return this.index=a,this}setName(a){return this.name=a,this}}let UD=(()=>{class l{constructor(){this.statuses=[En.builder().setIndex(1).setName("\u0431\u043e\u043b."),En.builder().setIndex(2).setName("\u0431."),En.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),En.builder().setIndex(2).setName("\u0442.\u0431."),En.builder().setIndex(3).setName("\u043f\u0443\u0442."),En.builder().setIndex(3).setName("\u043f."),En.builder().setIndex(4).setName("\u0437\u043a."),En.builder().setIndex(5).setName("\u0437\u0430\u0431\u043b.")],this.statusesWiman=[En.builder().setIndex(1).setName("\u0431\u043e\u043b."),En.builder().setIndex(2).setName("\u0431."),En.builder().setIndex(2).setName("\u0442.\u0431\u043e\u043b."),En.builder().setIndex(2).setName("\u0442.\u0431."),En.builder().setIndex(3).setName("\u043f\u0443\u0442."),En.builder().setIndex(3).setName("\u043f."),En.builder().setIndex(4).setName("\u0437\u043a."),En.builder().setIndex(5).setName("\u043d\u0435\u043f\u0440\u0430\u0437\u0434."),En.builder().setIndex(6).setName("\u0437\u0430\u0431\u043b.")],this.statusesDead=[En.builder().setIndex(1).setName("\u043d.\u043f."),En.builder().setIndex(2).setName("\u043f.\u043f."),En.builder().setIndex(3).setName("\u0443\u0431.")],this.prefixes=[En.builder().setIndex(1).setName("\u043f\u0430\u0442\u0440."),En.builder().setIndex(2).setName("\u0441\u0445\u0438\u043c\u0438\u0442\u0440."),En.builder().setIndex(3).setName("\u043c\u0438\u0442\u0440."),En.builder().setIndex(4).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0435\u043f."),En.builder().setIndex(5).setName("\u0430\u0440\u0445\u0438\u0435\u043f."),En.builder().setIndex(6).setName("\u0441\u0445\u0438\u0435\u043f."),En.builder().setIndex(7).setName("\u0435\u043f."),En.builder().setIndex(8).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u043c."),En.builder().setIndex(9).setName("\u0430\u0440\u0445\u0438\u043c."),En.builder().setIndex(10).setName("\u043f\u0440\u043e\u0442\u043e\u043f\u0440."),En.builder().setIndex(11).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),En.builder().setIndex(12).setName("\u0438\u0433\u0443\u043c."),En.builder().setIndex(13).setName("\u043f\u0440\u043e\u0442."),En.builder().setIndex(14).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u043c."),En.builder().setIndex(15).setName("\u0438\u0435\u0440\u043e\u043c."),En.builder().setIndex(16).setName("\u0438\u0435\u0440."),En.builder().setIndex(17).setName("\u0441\u0445\u0438\u0430\u0440\u0445\u0438\u0434."),En.builder().setIndex(18).setName("\u0430\u0440\u0445\u0438\u0434."),En.builder().setIndex(19).setName("\u043f\u0440\u043e\u0442\u043e\u0434\u0438\u0430\u043a."),En.builder().setIndex(20).setName("\u0438\u0435\u0440\u043e\u0441\u0445\u0438\u0434."),En.builder().setIndex(21).setName("\u0438\u0435\u0440\u043e\u0434."),En.builder().setIndex(22).setName("\u0434\u0438\u0430\u043a."),En.builder().setIndex(23).setName("\u0441\u0445\u0438\u043c."),En.builder().setIndex(24).setName("\u043c\u043e\u043d."),En.builder().setIndex(25).setName("\u0438\u043d."),En.builder().setIndex(26).setName("\u0438\u043f\u043e\u0434\u0438\u0430\u043a."),En.builder().setIndex(28).setName("\u0447\u0442."),En.builder().setIndex(27).setName("\u043f\u043e\u0441\u043b."),En.builder().setIndex(29).setName("\u043e."),En.builder().setIndex(30).setName("\u043c\u043b."),En.builder().setIndex(31).setName("\u0432.")],this.prefixesWiman=[En.builder().setIndex(1).setName("\u0441\u0445\u0438\u0438\u0433\u0443\u043c."),En.builder().setIndex(2).setName("\u0438\u0433\u0443\u043c."),En.builder().setIndex(3).setName("\u0441\u0445\u0438\u043c."),En.builder().setIndex(4).setName("\u043c\u043e\u043d."),En.builder().setIndex(5).setName("\u0438\u043d."),En.builder().setIndex(6).setName("\u043c\u0430\u0442."),En.builder().setIndex(7).setName("\u043f\u043e\u0441\u043b."),En.builder().setIndex(8).setName("\u043e."),En.builder().setIndex(9).setName("\u043c\u043b."),En.builder().setIndex(10).setName("\u0432.")]}isKnownPrefix(o){let c=!1,u=h=>h.findIndex(d=>d.name===o)>=0;return c=c||u(this.prefixes),c=c||u(this.prefixesWiman),c=c||u(this.statuses),c=c||u(this.statusesWiman),c}getName(o){const c=o.split(/\s/),u=[];return c.forEach(h=>{this.isKnownPrefix(h)||u.push(h)}),u.join(" ")}getNameFrom(o,c){let u="";return c.forEach(h=>{h.index===o&&(u=h.name)}),u}getPrefixByName(o,c){return this.getIndexByName(o,c?this.prefixes:this.prefixesWiman)}getStatusByName(o,c){return this.getIndexByName(o,c?this.statuses:this.statusesWiman)}getPrefix(o,c=!0,u=!0){return this.getNameFrom(o,c?this.prefixes:this.prefixesWiman)}getStatus(o,c=!0,u=!0){return this.getNameFrom(o,u?c?this.statuses:this.statusesWiman:this.statusesDead)}getIndexByName(o,c){const u=o.split(/\s/);let h=0;return u.forEach(d=>{c.forEach(f=>{f.name===d&&h<f.index&&(h=f.index)})}),h}getPrefixedName(o){let c=o.split(/\s/),u="",h="",d=[...this.prefixes,...this.prefixesWiman,...this.statuses,...this.statusesWiman,...this.statusesDead];return c.forEach((f,p)=>{let g=p+1==c.length?"":" ";d.findIndex(m=>m.name==f)>=0?u+=f+g:h+=f+g}),new OL(u,h)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class FL{constructor(a="label-warning",o="label-success",c=!1){this.labelSelected=a,this.labelNormal=o,this.noPrint=c}static builder(){return new FL}setLabelSelected(a){return this.labelSelected=a,this}setLabelNormal(a){return this.labelNormal=a,this}setNoPrint(a){return this.noPrint=a,this}}class ko{constructor(a,o,c){this.text=a,this.tag=o,this.selected=c}static builder(){return new ko("","",!1)}setText(a){return this.text=a,this}setTag(a){return this.tag=a,this}setSelected(a){return this.selected=a,this}}class dc extends Pi{constructor(a,o,c,u,h){super(a,c,u),this.items=o,this.classes=h}static builder(){return new dc("",[],null,null,FL.builder())}setText(a){return super.setText(a)}setItems(a){return this.items=a,this}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}}class RL{constructor(){this.bookSettings=!0,this.calculatorSettings=!1,this.memorialSettings=!1}static builder(){return new RL}clear(){this.bookSettings=!1,this.calculatorSettings=!1,this.memorialSettings=!1}setBookSettings(a){return a&&this.clear(),this.bookSettings=a,this}setCalculatorSettings(a){return a&&this.clear(),this.calculatorSettings=a,this}setMemorialSettings(a){return a&&this.clear(),this.memorialSettings=a,this}}class ru extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u}static builder(){return new ru("",null,null,RL.builder().setBookSettings(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}}class NL{constructor(a,o,c){this.name=a,this.pvalue=o,this.onChange=c}get value(){return this.pvalue}set value(a){this.pvalue=a,this.onChange&&this.onChange()}}let ki=(()=>{class l{constructor(){this.properties=[],this.onChange=null}setOnChangeCallback(o){this.onChange=o}load(o){this.properties=[],o.split(";").forEach(u=>{const h=u.split(":");if(2===h.length)this.properties.push(new NL(h[0].trim(),h[1].trim(),this.onChange));else if(1===h.length){let d=h[0].trim();if(d){let f=this.properties.findIndex(p=>p.name==l.TEXT);f>=0?this.properties[f].value+=d:this.properties.push(new NL(l.TEXT,d,this.onChange))}}})}toString(){let o="";return this.properties.forEach(c=>{c.value&&(o&&(o+=";"),o+=c.name+":"+c.value)}),o}pushNew(o,c){this.properties.push(new NL(o,c,this.onChange))}getValue(o,c){let u=null;return this.properties.forEach(h=>{h.name===o&&(u=h.value)}),null==u?c?u:"":u}setValue(o,c){let u=!1;this.properties.forEach(h=>{h.name===o&&(h.value=c,u=!0)}),u||this.pushNew(o,c)}getOffset(){const o=this.getValue(l.OFFSET);let c=o?+o:-1;return Number.isInteger(c)||(c=-1),c}isLive(){const o=this.getValue(l.STATUS,!0);return null==o?null:!(o===l.STATUS_DEAD||o===l.STATUS_DEAD_WOMAN)}isMan(){const o=this.getValue(l.GENDER,!0);return null==o?null:o!==l.GENDER_WOMAN}}return l.OFFSET="\u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435",l.ORDER="\u043f\u043e\u0440\u044f\u0434\u043e\u043a",l.STATUS="\u0441\u0442\u0430\u0442\u0443\u0441",l.STATUS_LIVE="\u0436\u0438\u0432\u043e\u0439",l.STATUS_LIVE_WOMAN="\u0436\u0438\u0432\u0430\u044f",l.STATUS_DEAD="\u0443\u0441\u043e\u043f\u0448\u0438\u0439",l.STATUS_DEAD_WOMAN="\u0443\u0441\u043e\u043f\u0448\u0430\u044f",l.GENDER="\u043f\u043e\u043b",l.GENDER_MAN="\u043c\u043e\u0436\u0441\u043a\u043e\u0439",l.GENDER_WOMAN="\u0436\u0435\u043d\u0441\u043a\u0438\u0439",l.REF_ID="\u0441\u0441\u044b\u043b\u043a\u0430",l.TEXT="\u0442\u0435\u043a\u0441\u0442",l.UNION="\u043e\u0431\u044a\u0435\u0434\u0435\u043d\u0435\u043d\u043e",l.TAGS="\u0442\u0435\u0433\u0438",l.YES="\u0434\u0430",l.NO="\u043d\u0435\u0442",l})();class LL{constructor(){}static builder(){return new LL}}class BL extends Pi{constructor(a,o,c,u,h){super(a,o,c),this.classes=u,this.person=h}static builder(){return new BL("",null,null,LL.builder(),new zn(-1,"","",-1,!0,""))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setPerson(a){return this.person=a,this}updateClasses(a){return a(this.classes),this}}class b6e{constructor(a,o){this.index=a,this.include=o}setInclude(a){return this.include=!!a,this}}class C6e{constructor(a,o,c){this.left=a,this.right=o,this.everyYear=c}}class x6e{constructor(a,o,c){this.date=a,this.month=o,this.year=c}}class w6e{constructor(a,o){this.date=a,this.intervals=o}eventDate(a=0,o=0){let c=new Date;return c.setFullYear(+this.date.year+o,+this.date.month-1,+this.date.date),c.setDate(c.getDate()+a),c}isToday(){if(this.isTodayDate(this.eventDate()))return!0;let a=!1;return this.intervals.forEach(o=>{this.isTodayInterval(o)&&(a=!0)}),a}isTodayDate(a){let o=new Date;return a.getFullYear()==o.getFullYear()&&a.getMonth()==o.getMonth()&&a.getDate()==o.getDate()}isLess(a,o,c=!1){return!c&&a.getFullYear()<o.getFullYear()||!(!c&&a.getFullYear()>o.getFullYear())&&(a.getMonth()<o.getMonth()||!(a.getMonth()>o.getMonth())&&a.getDate()<o.getDate())}isEquals(a,o,c=!1){return(c||a.getFullYear()==o.getFullYear())&&a.getMonth()==o.getMonth()&&a.getDate()==o.getDate()}isTodayInterval(a){let o=a.everyYear?[-1,0,1]:[0],c=!1,u=new Date;return o.forEach(h=>{if(!c){let d=this.eventDate(0,h),f=this.eventDate(a.left.index,h),p=this.eventDate(a.right.index,h);if(f.getTime()>p.getTime()){let w=f;f=p,p=w}let g=a.everyYear&&f.getFullYear()<d.getFullYear(),m=a.everyYear&&p.getFullYear()>d.getFullYear(),v=this.isLess(f,u,a.everyYear),_=this.isLess(u,p,a.everyYear),y=a.left.include&&this.isEquals(f,u,a.everyYear),b=a.right.include&&this.isEquals(u,p,a.everyYear),x=v||y,C=_||b;(!g&&!m&&x&&C||(g||m)&&m!=g&&(C||x)||g&&m&&(!C||!x))&&(c=!0)}}),c}}class S6e{newEvent(a,o){return new w6e(a,o)}newEventDate(a,o,c){return new x6e(a,o,c)}newDaysInterval(a,o,c){return new C6e(a,o,c)}newDay(a,o){return new b6e(a,o)}}let HD=(()=>{class l{parseEvent(o){return dateEventsParserStatic.parse(o,{builder:new S6e})}isToday(o){let c=new ki;c.load(o);let u=!1;return c.properties.forEach(h=>{if(!u)try{let d=this.parseEvent(h.value);d&&d.isToday()&&(u=!0)}catch(d){}}),u}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class T6e{constructor(a){this.cacheMap=new Map,this.getter=a}setGetter(a){return this.getter=a,this}getCachedResult(a,o,c){let u=this.cacheMap.get(a),h=null==u?void 0:u.get(o),d=null==h?void 0:h.get(c);return null!=d||(d=this.getter(a,o,c),h||(h=new Map),h.set(c,d),u||(u=new Map),u.set(o,h),this.cacheMap.set(a,u)),d}clear(){return this.cacheMap.clear(),this}}let VL=(()=>{class l{constructor(o,c,u,h,d,f){this.authSvc=o,this.memorialsSvc=c,this.personsSvc=u,this.config=h,this.tagsSvc=d,this.dateEventsSvc=f,this.serviceReady=!1,this.personsCache=new T6e((p,g,m)=>this.getChachedPersonsDirect(p,g,m))}getChachedPersonsDirect(o,c,u){var h;let d=null===(h=this.memorials)||void 0===h?void 0:h.items.find(f=>f.name==o);if(this.persons){let f=!!d&&this.tagsSvc.tagsHasFlag(d.tags,"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"),p=!!d&&this.tagsSvc.tagsHasFlag(d.tags,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"),g=this.persons.items;return c&&(g=g.filter(v=>null==u||u==v.live)),g.filter(v=>p||!d||!!this.tagsSvc.intersectTags(v.tags,d.tags)).filter(v=>!f||this.dateEventsSvc.isToday(v.description))}return[]}get isReady(){return this.serviceReady}setup(o){this.doLogin(o)}doLogout(){this.authSvc.isLoggedIn().then(o=>{o.result?this.authSvc.logout().then(c=>{this.serviceReady=!1,this.config.authId=""}):(this.serviceReady=!1,this.config.authId="")})}doLogin(o){this.authSvc.isLoggedIn().then(c=>{c.result?(this.serviceReady=!0,o&&o(this.serviceReady)):this.authSvc.login().then(u=>{if(u.result){let h="hramvkostino",d="hramvkostino";this.authSvc.requestForUser(h,d).then(f=>{this.serviceReady=f.valid,this.config.authId=f.authId,this.config.authBody=btoa(h+":"+d),this.memorialsSvc.reloadMemorials(p=>{p&&this.personsSvc.reloadPersons(),o&&o(this.serviceReady)})})}})})}get memorials(){return this.memorialsSvc.getMemorials()}get persons(){return this.personsSvc.getPersonsDirect()}getAuth(){return this.authSvc}getMemorials(){return this.memorialsSvc}getPersons(){return this.personsSvc}}return l.\u0275fac=function(o){return new(o||l)(Ie(tu),Ie(Av),Ie(kf),Ie(on),Ie(Do),Ie(HD))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class zL{static builder(){return new zL}newLine(){return GL.builder()}newMemorial(){return WL.builder()}newComment(){return HL.builder()}}var rh=(()=>(function(l){l[l.Memorial=0]="Memorial",l[l.Line=1]="Line",l[l.Comment=2]="Comment"}(rh||(rh={})),rh))();class UL{constructor(a){this.type=a}toString(){return""}}class HL extends UL{constructor(a){super(rh.Comment),this.text=a}static builder(){return new HL("")}setText(a){return this.text=a,this}toString(){return`/*${this.text}*/`}}class WL extends UL{constructor(a,o){super(rh.Memorial),this.name=a,this.tags=o}static builder(){return new WL("","")}setName(a){return this.name=a,this}setTags(a){return this.tags=a,this}toString(){return`[${this.name}${this.tags?":"+this.tags:""}]`}}class GL extends UL{constructor(a,o,c,u){super(rh.Line),this.name=a,this.description=o,this.offset=c,this.live=u}static builder(){return new GL("","",-1,!0)}setName(a){return this.name=a,this}setDescription(a){return this.description=a,this}setOffset(a){return this.offset=a,this}setLive(a){return this.live=a,this}toString(){return`${this.name}(${this.description?this.description:""})${null!=this.offset&&this.offset>=0?" "+this.offset:""}${this.live?"":" \u0443\u0441\u043e\u043f\u0448\u0438\u0439"}`}}class une{static parse(a){return personsParserStatic.parse(a,{builder:zL.builder()})}}class cd{constructor(a,o,c='"'){this.value=o,this.simbol=c,this.names=null,this.names=[a],this.value=o}static newFrom(a){return new cd(a.name,a.value)}get name(){return this.names?this.names.join(":"):""}set name(a){this.names=[a]}toString(){return this.name+"="+this.simbol+this.value+this.simbol}}class hne{constructor(a="  ",o=!0){this.prefix=a,this.prettyPrint=o,this.offset=0}incOffset(){return++this.offset,this.getOffset()}decOffset(){return--this.offset,this.getOffset()}getOffset(){let a="";for(let o=0;o<this.offset;++o)a+=this.prefix;return a}}class Ao{constructor(a,o,c,u){this.name=a,this.attributes=o,this.children=c,this.text=u,this.name=a,this.attributes=o,this.children=c,this.text=u}static newFrom(a){const o=[];a.attributes&&a.attributes.forEach(u=>{o.push(cd.newFrom(u))});const c=[];return a.children&&a.children.forEach(u=>{c.push(Ao.newFrom(u))}),new Ao(a.name,o,c,a.text)}setAttributes(a){return this.attributes=a,this}setChildren(a){return this.children=a,this}toString(a=null){let o="";if(this.name&&(o+="<"+this.name,this.attributes&&this.attributes.forEach(c=>{o+=" "+c.toString()}),o+=">"),this.children&&this.children.length){let c=this.children.length>1||!!this.children[0].name;this.children.forEach(u=>{c&&(null==a?void 0:a.prettyPrint)&&(o+="\r\n",o+=a.incOffset()),o+=u.toString(a),c&&(null==a?void 0:a.prettyPrint)&&a.decOffset()}),c&&(null==a?void 0:a.prettyPrint)&&(o+="\r\n",o+=a.getOffset())}return o+=this.name?"</"+this.name+">":this.text,o}}let dne=(()=>{class l{parseXml(o){const c=xmlParserStatic.parse(o),u=[];return c.forEach(h=>{u.push(Ao.newFrom(h))}),u}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class fne{constructor(a,o){this.person=a,this.props=o}}class jL{constructor(a,o){this.memorial=a,this.lines=o}static builder(){return new jL(null,[])}setMemorial(a){return this.memorial=a,this}setLines(a){return this.lines=a,this}addLine(a){return this.lines.push(a),this}toString(){var a;return`${null===(a=this.memorial)||void 0===a?void 0:a.toString()}\n${this.lines.map(o=>o.toString()).join("\r\n")}`}}let $L=(()=>{class l{constructor(o,c,u,h,d,f){this.mems=o,this.ks=c,this.config=u,this.uiConfig=h,this.xml=d,this.nameSvc=f}addPersons(o,c,u,h=!0,d=null,f=0,p=1){try{this.addPersonsDirect(o,c,u,h,d)}catch(g){this.config.addAlert(new mr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+g,"OK",180)),d&&d()}}previewPersons(o){const c=une.parse(o);let u=[],h=null;return c.forEach(d=>{switch(d.type){case rh.Memorial:{let f=d;h=jL.builder().setMemorial(f),u.push(h)}break;case rh.Line:{let f=d;null==h||h.addLine(f)}}}),u}addPersonsDirect(o,c,u,h=!0,d=null,f=0,p=1){const g=une.parse(c);let m=[],v="",_=new Map,y=this.mems.getActivePredefinedMemorialsRaw(),b=!1;g.forEach(x=>{switch(x.type){case rh.Memorial:v=x.name,b=null!=y.find(w=>w==v);break;case rh.Line:{let C=x,w=o(v);if(w>=0){const S=new ki;S.load(C.description?C.description:"");const D=S.getOffset(),T=C.live||S.isLive();S.setValue(ki.ORDER,""),S.setValue(ki.OFFSET,""),S.setValue(ki.STATUS,""),S.setValue(ki.UNION,"");let A=u(v);{let B=S.getValue(ki.TAGS);B&&B.split(",").forEach($=>{let q=$.trim();q&&(A=Do.addTagToTags(A,q))})}const I=new yVe(w,-1,C.name,S.toString(),D,null!=T&&T,A);let N=S.getValue(ki.REF_ID),k=!1,F=B=>{let V;if(_.forEach($=>{I.name==$.person.name&&S.getValue(ki.TEXT)&&S.getValue(ki.TEXT)===$.props.getValue(ki.TEXT)&&(V=$.person)}),V){if(!Do.tagsHasFlag(V.tags,v)){V.tags=Do.addTagToTags(V.tags,v);const $=new ki;$.load(V.description),$.getValue(ki.UNION)!=ki.YES&&$.setValue(ki.UNION,ki.YES),V.description=$.toString(),k=!0}}else _.set(B||"#"+_.size,new fne(I,S))};N?_.has(N)?(_.get(N).person.tags+=","+v,k=!0):_.set(N,new fne(I,S)):this.uiConfig.ui.mergeNameOnImport.getBooleanValue()&&F(""),!k&&!b&&m.push(I)}}}}),this.addPersonsByPersons(m,d)}addPersonsByPersons(o=[],c=null){o.length?this.ks.newPersons(o).then(u=>{setTimeout(()=>{this.config.addAlert(u&&u.success?new mr("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e: "+o.length+` ${l.getWordName(o.length)}.`,"OK",30):new mr("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0439 \u043f\u0435\u0440\u0441\u043e\u043d\u044b: "+(u?u.error:"?"),"OK",180)),c&&c()},0)},u=>{this.config.addAlert(new mr("\u041e\u0448\u0438\u0431\u043a\u0430: "+u,"OK",180))}):(this.config.addAlert(new mr("\u041f\u0435\u0440\u0441\u043e\u043d \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.","OK",60)),c&&c())}static getWordName(o){let c="";switch(Math.floor(o%10)){case 1:c="\u0438\u043c\u044f";break;case 2:case 3:case 4:c="\u0438\u043c\u0435\u043d\u0438";break;default:c="\u0438\u043c\u0451\u043d"}return c}addPersonsOld(o,c,u,h=!0,d=null,f=0,p=1){const g=personsParserStatic.parse(c),m={i:0,memorialName:""},v=new ki;this.config.waitingIOOperationValueMax=g.length*p;const _=y=>{if(this.config.waitingIOOperationValue=m.i+g.length*f,y&&!y.success)return this.config.addAlert(new mr(y.error,"OK",30)),this.endIOWaiting(),void(null!=d&&d());if(m.i>=g.length)this.endIOWaiting(),null!=d&&d();else{const b=g[m.i];if(++m.i,void 0!==b.memorial)m.memorialName=b.memorial,setTimeout(()=>{_(y)},0);else if(void 0===b.comment){let x=o(m.memorialName);if(x>=0){v.load(b.description?b.description:"");const C=v.getOffset(),w=b.live||v.isLive();v.setValue(ki.ORDER,""),v.setValue(ki.OFFSET,""),v.setValue(ki.STATUS,"");const S=new zn(-1,b.name,v.toString(),C,w,u(m.memorialName));this.ks.newPerson(x,S).then(D=>{setTimeout(()=>{_(D)},0)},D=>{setTimeout(()=>{_(null)},0)})}else setTimeout(()=>{_(y)},0)}else _(null)}};_(null),this.beginIOWaiting(h,g.length*f)}beginIOWaiting(o,c=0){this.config.incWaitingIO(),this.config.waitingIOOperationValue=c}endIOWaiting(){this.config.decWaitingIO()}onChildren(o,c){o&&o.forEach(u=>{c&&c(u)})}getTextFromTag(o){let c="";return o&&(o.text?c+=o.text:o.children.forEach(u=>{u.text&&(c+=u.text)})),c}onAttribute(o,c,u){o&&o.forEach(h=>{h.name===c&&u&&u(h)})}sortByOrd(o){let c=[];return c=o.slice(0),c.sort((u,h)=>{let d=0,f=0;return this.onAttribute(u.attributes,"ord",p=>{d=+p.value}),this.onAttribute(h.attributes,"ord",p=>{f=+p.value}),d-f}),c}readTagAsText(o){let c=o.text?o.text:"";return this.onChildren(o.children,u=>{c+=this.readTagAsText(u)}),c}convertRecord(o,c){if("record"!==o.name)return"";let u="",h="",d="",f=!0,p="";if(this.onAttribute(o.attributes,"gender",g=>{f="true"===g.value}),this.onAttribute(o.attributes,"prefix",g=>{p=this.nameSvc.getPrefix(+g.value,f,c)}),this.onAttribute(o.attributes,"status",g=>{let m=this.nameSvc.getStatus(+g.value,f,c);m&&(p=m+(p&&" "+p))}),this.onChildren(o.children,g=>{"name"===g.name?h=this.readTagAsText(g):"comment"===g.name&&(d=this.readTagAsText(g))}),h){p&&(u+=p+" "),u+=h+"([";const g=new ki;g.load(d),g.setValue(ki.GENDER,f?"":ki.GENDER_WOMAN),u+=g.toString()+"])",c||(u+=" "+(f?ki.STATUS_DEAD:ki.STATUS_DEAD_WOMAN))}return u&&(u+="\n"),u}convertMemorial(o){let c="",u=!0;return this.onAttribute(o.attributes,"health",h=>{u="true"===h.value}),this.onChildren(o.children,h=>{"records"===h.name&&this.onChildren(this.sortByOrd(h.children),d=>{c+=this.convertRecord(d,u)})}),c}convertXmlToString(o){const c=this.xml.parseXml(o);return this.convertTagsToString(c)}convertTagsToString(o){let c="";return o.forEach(u=>{"memorials"===u.name&&this.onChildren(u.children,h=>{let d="";this.onChildren(h.children,f=>{"notes"===f.name&&(d=this.readTagAsText(f))}),h.children.forEach(f=>{"name"===f.name&&(c+="["+this.getTextFromTag(f)+(d?":"+d:"")+"]\n")}),c+=this.convertMemorial(h)})}),c}}return l.\u0275fac=function(o){return new(o||l)(Ie(Av),Ie(kf),Ie(on),Ie(Gn),Ie(dne),Ie(UD))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),pne=(()=>{class l{constructor(o,c){this.config=o,this.memXmlLoader=c,this.text="",this.memName=""}onLoadAnyFile(o,c,u){this.memName=c,o.name.toLowerCase().endsWith(".csv")||o.name.toLowerCase().endsWith(".tsv")?this.onLoadXsvFile(o,u):this.onLoadXmlFile(o,u)}convertXsvToString(o,c,u=!0){let h=(_,y)=>{let b=_.split(y);for(let x=0;x<b.length;x++)b[x]=b[x].trim();return b},f=h(o,"\n"),p=0,g="",m=[],v=[];{let _=h(f[p],c);if(2!=_.length||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"!=_[0]||"\u0422\u0435\u0433\u0438"!=_[1])return this.config.addAlert(new mr("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(++p;f.length>p&&f[p];){_=h(f[p++],c);let y=_[0].trim(),b=_[1].trim();v.push(y),m.push(b),u&&(g+=`[${y}${b?":"+b:""}]\r\n`)}if(++p,_=h(f[p++],c),5!=_.length||"\u0418\u043c\u044f"!=_[0]||"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"!=_[1]||"\u0421\u0442\u0430\u0442\u0443\u0441"!=_[2]||"\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"!=_[3]||"\u0422\u0435\u0433\u0438"!=_[4])return this.config.addAlert(new mr("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u0444\u0430\u0439\u043b\u0430.","OK",180)),"";for(u&&(g+="[\u0432\u0441\u0435]\r\n");f.length>p&&f[p];){_=h(f[p++],c);let y=_[4].split(","),b=!1;if(y&&y.forEach(C=>{(!this.memName||C==this.memName)&&(b=!0)}),!b)continue;g+=_[0],g+="(";let x=g.length;g+=_[1],+_[3]>=0&&(_[1]&&(g+=";"),g+=ki.OFFSET+":",g+=_[3]),g.length!=x&&(g+=";"),g+=ki.TAGS+":",g+=_[4],g+=")",_[2].toLowerCase()===ki.STATUS_LIVE||_[2].toLowerCase()===ki.STATUS_LIVE_WOMAN||(g+=" "+ki.STATUS_DEAD),g+="\r\n"}}return g}onLoadXsvFile(o,c){if(!o)return;const u=new FileReader;u.onload=h=>{try{this.text=this.convertXsvToString(u.result.toString(),o.name.toLowerCase().endsWith(".csv")?";":"\t")}catch(d){this.config.addAlert(mr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+d,"OK",30))}c&&c(this.text)},u.readAsText(o)}makeHtml(o){return o.replace(/(?:\r\n|\r|\n)/g,"<br />\n")}onLoadXmlFile(o,c){if(!o)return;const u=new FileReader;u.onload=h=>{try{let d=o.name.toLowerCase().endsWith(".xml");this.text=d?this.memXmlLoader.convertXmlToString(u.result.toString()):u.result.toString()}catch(d){this.config.addAlert(mr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+d,"OK",30))}c&&c(this.text)},u.readAsText(o)}}return l.\u0275fac=function(o){return new(o||l)(Ie(on),Ie($L))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class D6e{constructor(a,o,c){this.memorial=a,this.setName=o,this.getName=c}}let gne=(()=>{class l{constructor(o,c){this.mems=o,this.nameSvc=c}getMemorialsXmlString(o,c,u){let h="<?xml version='1.0' encoding='UTF-8' ?>\n",d=null;c.forEach((p,g)=>{let m=this.generateMemorials(o,p,u[g]);m&&(null==d?d=m:d.children.push(...m.children))}),null==d&&(d=new Ao("memorials",[],[],""));let f=new hne;return h+=d.toString(f),h}getPersonsXmlString(o,c,u){let h="<?xml version='1.0' encoding='UTF-8' ?>\n",d=this.generateMemorials(o,c,u),f=new hne;return h+=d.toString(f),h}generateMemorials(o,c,u){let h=new Ao("memorials",[],[],""),d=[],f=p=>{p&&p.memorial.children.length&&(h.children.push(p.memorial),d.push(p))};return f(this.getMemorial(o,c,u,!0,1)),f(this.getMemorial(o,c,u,!1,2)),h}getDescription(o,c,u=!1,h=""){const d=new ki;return d.load(o.description),d.setValue(ki.OFFSET,o.offset<0?"":""+o.offset),d.setValue(ki.ORDER,""),d.setValue(ki.STATUS,""),u&&d.setValue(ki.GENDER,""),h&&d.setValue(ki.REF_ID,h),d.toString()}getMemorial(o,c,u,h,d,f=!0){const p=c;let g=null,m=new Ao("memorial",[new cd("health",""+h),new cd("ord",""+d)],[new Ao("name",[],[g=new Ao("",[],[],p||"\u0432\u0441\u0435")],""),new Ao("notes",[],[new Ao("",[],[],u)],"")],""),v=new Ao("records",[],[],"");m.children.push(v);let y=this.mems.getActivePredefinedMemorialsRaw();return o.filter(b=>!c||Do.tagsHasFlag(b.tags,c)).forEach((b,x)=>{const C=b.tags.split(",");let w=!1;if(C.forEach(S=>{null==y.find(D=>D==S)&&(w=!0)}),w&&b.live===h){let S=this.isMan(b);v.children.push(this.newRecord(this.nameSvc.getName(b.name),S,x+1,this.nameSvc.getStatusByName(b.name,S),this.nameSvc.getPrefixByName(b.name,S),this.getDescription(b,x,!0,(b=>{let x=o.findIndex(C=>C===b);return x>=0?""+x:""})(b))))}}),f||v.children.length>0?new D6e(m,b=>{g&&(g.text=b)},()=>g?g.text:""):null}isMan(o){const c=new ki;c.load(o.description);let u=c.isMan();return null==u||u}newRecord(o,c,u,h,d,f){return new Ao("record",[new cd("gender",`${c}`),new cd("ord",`${u}`),new cd("status",`${h}`),new cd("prefix",`${d}`)],[new Ao("name",[],[new Ao("",[],[],`${o}`)],""),new Ao("comment",[],[new Ao("",[],[],`${f}`)],"")],"")}}return l.\u0275fac=function(o){return new(o||l)(Ie(Av),Ie(UD))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class M6e{constructor(a){this.xsv=a,this.text="",this.useSeparator=!1}print(a,o=!0){return o&&(this.useSeparator?this.text+=this.xsv:this.useSeparator=!0),this.text+=a,this}println(a,o=!0){return this.print(a,o),this.text+="\r\n",this.useSeparator=!1,this}}let mne=(()=>{class l{constructor(){}getMemorialsString(o,c,u,h=";"){let d=new M6e(h);return d.print("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),d.print("\u0422\u0435\u0433\u0438"),d.println("",!1),c.forEach((f,p)=>{!f||(d.print(f),d.print(u[p]),d.println("",!1))}),d.println("",!1),d.print("\u0418\u043c\u044f"),d.print("\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),d.print("\u0421\u0442\u0430\u0442\u0443\u0441"),d.print("\u0421\u043c\u0435\u0449\u0435\u043d\u0438\u0435"),d.print("\u0422\u0435\u0433\u0438"),d.println("",!1),o.filter(f=>{if(!c)return!0;let p=!1;return c.forEach(g=>{Do.tagsHasFlag(f.tags,g)&&(p=!0)}),p}).forEach((f,p)=>{f.tags.split(","),d.print(f.name),d.print(f.description),d.print(f.live?"\u0416\u0438\u0432\u043e\u0439":"\u0423\u0441\u043e\u043f\u0448\u0438\u0439"),d.print(""+f.offset),d.print(f.tags),d.println("",!1)}),d.text}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var Sg=(()=>(function(l){l[l.Begining=-1]="Begining",l[l.Tropari=-2]="Tropari",l[l.GospodiPomily=-3]="GospodiPomily",l[l.Molitva=-4]="Molitva"}(Sg||(Sg={})),Sg))();class E6e{constructor(a,o,c,u){this.link=a,this.name=o,this.kafizma=c,this.psalom=u}isPsalom(){return this.psalom>0}isBegining(){return this.psalom===Sg.Begining}isTropari(){return this.psalom===Sg.Tropari}isGospodiPomiluy(){return this.psalom===Sg.GospodiPomily}isMolitva(){return this.psalom===Sg.Molitva}}class k6e{constructor(a,o,c,u){this.kafizma=a,this.psalom=o,this.add=c,this.filter=u}}let Rv=(()=>{class l{constructor(o,c,u,h,d,f){this.psSvc=o,this.uiConfig=c,this.config=u,this.kvSvc=h,this.http=d,this.themeSvc=f,this.items=[],this.audio=null,this.current=null,this.playList=[],this.playRunning=!1,this.currentAudioValue=-1,this.currentAudioValueId=0,this.restPoint="/",this.startRequests=[],this.startRequestsId=0,this.setAudioDir(f.getAudioRootFolder(),()=>{}),this.control=this.getAudioSubscription(!0)}setAudioDir(o,c){let u="audioDir";this.kvSvc.findKey(u,h=>{h&&h.success?this.kvSvc.updateKey(eu.of(u,o),d=>{c&&c(d?d.error:null)}):this.kvSvc.insertKey(eu.of(u,o),d=>{c&&c(d?d.error:null)})})}ngOnDestroy(){this.stop()}autoPlay(){if(this.playList.length){const o=this.playList.shift();if(o){this.playRunning=!0;let c=(u,h)=>{let d=this.uiConfig.downloadAudioFile(u,"translation"+this.toString(""+this.currentAudioValue,3));d||(h=!0);let f=()=>{this.audio=new Audio(h?u:this.getPlayedLink(u)),this.audio.onended=()=>{this.autoPlay()},h||(this.audio.onerror=p=>{c(o.link,!0)});try{this.audio.play()}catch(p){}this.current=o};d?this.setAudioDir(d,()=>{f()}):f()};c(o.link,this.config.isMemoryServerType())}else this.playRunning=!1}else this.playRunning=!1}getUIAudioValue(){let o=1;try{o=+this.uiConfig.ui.audioValue.getStringValue()}catch(c){o=1}return(o<1||o>10)&&(o=1),o}reload(o,c=!1){let u=this.getUIAudioValue();if(u!==this.currentAudioValue&&(c=!0),!c&&this.items.length>0)o&&o();else{this.items=[],this.currentAudioValue=u;let h=++this.currentAudioValueId,d="audio/CS/"+this.toString(""+this.currentAudioValue,3)+".txt";this.psSvc.getText(d,f=>{if(h==this.currentAudioValueId)return f?(JSON.parse(f).forEach(g=>{this.items.push(new E6e(g.link,g.name,+g.kafizma,+g.psalom))}),void(o&&o())):(this.config.addAlert(mr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: "+this.currentAudioValue,"Ok",15)),void(o&&o()));this.config.post(()=>{o&&o()})})}}isStarted(){return!!this.audio}isPlaying(o=!1){return this.audio&&!this.audio.paused||o&&this.playRunning}currentName(){return this.current?this.current.name:""}startCheckUI(o,c,u,h,d){let f=this.uiConfig.ui.audioValue.getStringValue();if(f&&"0"!=f)return this.start(o,c,u,h,d)}start(o,c,u,h,d){let f=this.startDirect(c,u,h,d);o&&o(f)}startDirectRaw(o,c,u,h,d){h||(this.playList=[]),this.items.forEach(f=>{(c<0||f.kafizma===c)&&(u<-5||f.psalom===u)&&(!d||d(f.psalom))&&this.playList.push(f)}),o&&(!h||!this.isPlaying(!0))&&(this.isPlaying(!0)&&!h&&this.stop(),this.autoPlay())}startDirect(o,c,u,h){const d=o<0&&c<0;let f=++this.startRequestsId;return this.startRequests.push(new k6e(o,c,u,h)),d||this.reload(()=>{if(f==this.startRequestsId){let p=this.startRequests;this.startRequests=[],p.forEach((g,m)=>this.startDirectRaw(m+1==p.length,g.kafizma,g.psalom,g.add,g.filter))}}),this.getAudioSubscription(d)}getAudioSubscription(o){const c=this;return new class u{close(d){return(!o||d)&&c.stop(),this}currentName(){return c.currentName()}isPlaying(){return c.isPlaying()}isStarted(){return c.isStarted()}next(){return c.stop(),c.autoPlay(),this}pause(){return c.pause(),this}resume(){return c.resume(),this}}}next(){this.stop(),this.autoPlay()}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio=null,this.current=null,this.playRunning=!1)}pause(){this.audio&&this.audio.pause()}resume(){this.audio&&this.audio.play()}getRestPoint(o,c){return _r.merge(_r.merge(c||this.config.serviceAPIHost,this.restPoint),o)}getRestPointRaw(o,c){return _r.merge(c||this.config.serviceAPIHost,o)}toString(o,c){for(;o.length<c;)o="0"+o;return o}getPlayedLink(o){let c=o.split("/"),u=c[c.length-1];return this.getRestPointRaw(_r.merge("/audio/audio/translation"+this.toString(""+this.currentAudioValue,3),u),null)}downloadAll(o,c){let u=[];this.items.forEach(f=>{u.push(f.link)});let h=0;o(.01);let d=()=>{this.config.post(()=>{if(h>=u.length)return o(100),void c();let f=u[h++];this.uiConfig.downloadAudioFile(f,"translation"+this.toString(""+this.currentAudioValue,3)),o((h+1)/u.length*100),d()},100)};d()}deleteAudioAll(o,c){this.config.post(()=>{this.uiConfig.deleteAudioTranslation(o),c&&c()},100)}downloadAllUrls(o){var c=document.createElement("a");c.setAttribute("download",""),c.style.display="none",document.body.appendChild(c);for(var u=0;u<o.length;u++)c.setAttribute("href",o[u]),c.click();document.body.removeChild(c)}exists(o,c){this.http.get(this.getRestPoint("/exists/audio/"+o,null),{}).pipe(Xi(Ei.handleError)).subscribe({next:h=>{c(h,null)},error:h=>{c(null,""+h)}})}}return l.\u0275fac=function(o){return new(o||l)(Ie(ad),Ie(Gn),Ie(on),Ie(ON),Ie(nh),Ie(Ls))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const A6e=function(l){return{"print-only":!1,pageBreak:l}};function I6e(l,a){if(1&l&&(M(0,"div",1),me(1,"app-svg-js-image",2),me(2,"app-dynamic-menu",3),E()),2&l){const o=X();O("ngClass",ws(6,A6e,o.enabled&&o.uiConfig.ui.showFacePage.getBooleanValue()||o.showAnyWay)),P(1),O("genName","LogoLight2")("svgWidth",512)("svgHeight",512)("type",o.type),P(1),O("data",o.dynMenuData)}}let vne=(()=>{class l{constructor(o){this.uiConfig=o,this.enabled=!0,this.showAnyWay=!1,this.type=512,this.dynMenuData=If.builder().setWhiteBack(!0).setMenuState(wf.builder().addCommand($o.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay2"))}set menuClick(o){this.dynMenuData&&this.dynMenuData.setOnClick(o)}set name(o){this.dynMenuData.setMenuState(wf.builder().addCommand($o.builder().setName(o)).setGenName("MenuDay2"))}get name(){return this.dynMenuData.menuState.commands[0].name}ngOnInit(){}}return l.\u0275fac=function(o){return new(o||l)(R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-print-logo"]],inputs:{enabled:"enabled",showAnyWay:"showAnyWay",type:"type",menuClick:"menuClick",name:"name"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(o,c){1&o&&Z(0,I6e,3,8,"div",0),2&o&&O("ngIf",c.enabled&&c.uiConfig.ui.showFacePage.getBooleanValue()||c.showAnyWay)},directives:[mn,Xn,kl,RD],styles:[""]}),l})();function P6e(l,a){if(1&l){const o=gt();M(0,"span",2),ee("click",function(){const h=Le(o).$implicit;return X().onItem(h)}),ie(1),E()}if(2&l){const o=a.$implicit;O("ngClass",X().getSpanClass(o)),P(1),en(o.text)}}const O6e=function(l){return{"bottom-top-space":!0,"no-print":l}};let WD=(()=>{class l{constructor(o,c){this.config=o,this.uiConfig=c,this.currentItem=null}get toolbarData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){var c={};return c["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}onItem(o){this.currentItem=o,this.toolbarData.onClick&&this.toolbarData.onClick(o)}getSpanClass(o){let c={cursor:!0,label:!0};return c[this.toolbarData.classes.labelNormal]=!o.selected,c[this.toolbarData.classes.labelSelected]=o.selected,c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-content-toolbar"]],inputs:{data:"data"},decls:2,vars:4,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,P6e,2,2,"span",1),E()),2&o&&(O("ngClass",ws(2,O6e,c.toolbarData.classes.noPrint)),P(1),O("ngForOf",c.toolbarData.items))},directives:[Xn,fi],styles:[""]}),l})();function F6e(l,a){if(1&l){const o=gt();M(0,"div",6),M(1,"a",7),ee("click",function(){return Le(o).$implicit.runOnClick()}),ie(2),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("ngClass",c.getAlertActionClass(!1))("hidden",!o.enabled),P(1),en(o.text)}}function R6e(l,a){1&l&&me(0,"clr-icon",9),2&l&&et("shape",X(3).errorsData.classes.alertShape)}function N6e(l,a){if(1&l){const o=gt();M(0,"span"),Z(1,R6e,1,1,"clr-icon",8),M(2,"span",1),ee("click",function(){const h=Le(o).$implicit;return X(2).onErrorMessage(h)}),ie(3),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("ngIf",c.errorsData.classes.alertShape),P(1),O("ngClass",c.getAlertTextClass(!1)),P(1),hi(" ",o," ")}}function L6e(l,a){if(1&l){const o=gt();M(0,"button",10),M(1,"clr-icon",1),ee("click",function(){return Le(o).$implicit.runOnClick()}),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("ngClass",c.getAlertButtonClass(!1)),et("shape",o.shape)}}function B6e(l,a){if(1&l&&(M(0,"div"),M(1,"div",1),ee("click",function(c){return c.stopPropagation()}),M(2,"div",2),Z(3,F6e,3,3,"div",3),Z(4,N6e,4,3,"span",4),E(),Z(5,L6e,2,2,"button",5),E(),E()),2&l){const o=X();P(1),O("ngClass",o.getClasses()),P(2),O("ngForOf",o.errorsData.actions),P(1),O("ngForOf",o.errorsData.errors),P(1),O("ngForOf",o.errorsData.buttons)}}function V6e(l,a){if(1&l&&(M(0,"div",18),me(1,"clr-icon",9),E()),2&l){const o=X(3);P(1),et("shape",o.errorsData.classes.alertShape)}}function z6e(l,a){if(1&l){const o=gt();M(0,"a",7),ee("click",function(){return Le(o).$implicit.runOnClick()}),ie(1),E()}if(2&l){const o=a.$implicit;O("ngClass",X(3).getAlertActionClass())("hidden",!o.enabled),P(1),en(o.text)}}function U6e(l,a){if(1&l){const o=gt();M(0,"div",14),Z(1,V6e,2,1,"div",15),M(2,"span",1),ee("click",function(){const h=Le(o).$implicit;return X(2).onErrorMessage(h)}),ie(3),E(),M(4,"div",16),Z(5,z6e,2,3,"a",17),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("ngIf",c.errorsData.classes.alertShape),P(1),O("ngClass",c.getAlertTextClass()),P(1),hi(" ",o," "),P(2),O("ngForOf",c.errorsData.actions)}}function H6e(l,a){if(1&l){const o=gt();M(0,"button",10),M(1,"clr-icon",1),ee("click",function(){return Le(o).$implicit.runOnClick()}),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("ngClass",c.getAlertButtonClass()),et("shape",o.shape)}}function W6e(l,a){if(1&l&&(M(0,"div"),M(1,"div",11),ee("click",function(c){return c.stopPropagation()}),M(2,"div",12),Z(3,U6e,6,4,"div",13),E(),Z(4,H6e,2,2,"button",5),E(),E()),2&l){const o=X();P(1),O("ngClass",o.getClasses()),P(2),O("ngForOf",o.errorsData.errors),P(1),O("ngForOf",o.errorsData.buttons)}}let GD=(()=>{class l{constructor(o){this.uiConfig=o,this.stdErrorsEnabled=!1}get errorsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(o=!0){var c,u=null===(c=this.errorsData)||void 0===c?void 0:c.classes,h={alert:o};return u&&(h[u.alertClass]=o,h["no-print"]=u.noPrint),h}getAlertButtonClass(o=!0){let c={"alert-icon":o};return c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}getAlertActionClass(o=!0){let c={"alert-action":o};return o||(c["left-space"]=!0,c["right-space"]=!0),c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}getAlertTextClass(o=!0){let c={"alert-text":o,cursor:!0};return c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}onErrorMessage(o){return this.errorsData.click(o),this}}return l.\u0275fac=function(o){return new(o||l)(R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-errors"]],inputs:{data:"data"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","click"],[1,"left-space","right-space","bottom-top-space","w100"],["class","inlineBlock underline floatRight no-print",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["type","button","class","close","aria-label","Close",4,"ngFor","ngForOf"],[1,"inlineBlock","underline","floatRight","no-print"],["href","javascript:void(0)",3,"ngClass","hidden","click"],["class","alert-icon",4,"ngIf"],[1,"alert-icon"],["type","button","aria-label","Close",1,"close"],["role","alert",3,"ngClass","click"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],[1,"alert-item","static"],["class","alert-icon-wrapper",4,"ngIf"],[1,"alert-actions"],["href","javascript:void(0)",3,"ngClass","hidden","click",4,"ngFor","ngForOf"],[1,"alert-icon-wrapper"]],template:function(o,c){1&o&&(Z(0,B6e,6,4,"div",0),Z(1,W6e,5,3,"div",0)),2&o&&(O("ngIf",!c.stdErrorsEnabled&&(null==c.errorsData||null==c.errorsData.errors?null:c.errorsData.errors.length)),P(1),O("ngIf",c.stdErrorsEnabled&&(null==c.errorsData||null==c.errorsData.errors?null:c.errorsData.errors.length)))},directives:[mn,Xn,fi,Ts],styles:[".floatRight[_ngcontent-%COMP%]{float:right}.inlineBlock[_ngcontent-%COMP%]{display:inline-block}.underline[_ngcontent-%COMP%]{text-decoration:underline}.w100[_ngcontent-%COMP%]{width:100%}"]}),l})();function G6e(l,a){if(1&l){const o=gt();M(0,"clr-radio-wrapper"),M(1,"input",17),ee("ngModelChange",function(u){return Le(o),X(2).uiConfig.ui.fontSize.rawValue=u}),E(),M(2,"label"),ie(3),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("name","mainFontSize")("value",""+o)("ngModel",c.uiConfig.ui.fontSize.rawValue),P(2),hi("x",o,"")}}const j6e=function(){return[0,1,2,3,4,5,6,7,8,9,10,20,30]};function $6e(l,a){if(1&l&&(M(0,"clr-radio-container",1),M(1,"label"),ie(2),E(),Z(3,G6e,4,4,"clr-radio-wrapper",2),E()),2&l){const o=X();P(2),hi("",o.uiConfig.ui.fontSize.description,":"),P(1),O("ngForOf",Ra(2,j6e))}}function q6e(l,a){if(1&l){const o=gt();M(0,"clr-toggle-wrapper"),M(1,"input",18),ee("ngModelChange",function(u){return Le(o).$implicit.rawValue=u}),E(),M(2,"label"),ie(3),E(),E()}if(2&l){const o=a.$implicit;P(1),O("name",o.name)("value",o.name)("ngModel",o.rawValue),P(2),en(o.description)}}function Y6e(l,a){if(1&l){const o=gt();M(0,"clr-radio-wrapper"),M(1,"input",17),ee("ngModelChange",function(u){return Le(o),X(2).uiConfig.ui.memorialPageSize.rawValue=u}),E(),M(2,"label"),ie(3),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("name","mainPageSize")("value",""+o)("ngModel",c.uiConfig.ui.memorialPageSize.rawValue),P(2),hi("x",o,"")}}const X6e=function(){return[10,20,30,40,50,60,70,80,90,100]};function Z6e(l,a){if(1&l&&(M(0,"clr-radio-container",1),M(1,"label"),ie(2),E(),Z(3,Y6e,4,4,"clr-radio-wrapper",2),E()),2&l){const o=X();P(2),hi("",o.uiConfig.ui.memorialPageSize.description,":"),P(1),O("ngForOf",Ra(2,X6e))}}function K6e(l,a){if(1&l){const o=gt();M(0,"clr-radio-wrapper"),M(1,"input",17),ee("ngModelChange",function(u){return Le(o),X(2).currentKafizma=u}),E(),M(2,"label"),ie(3),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("name","mainKafizma")("value",""+o)("ngModel",c.currentKafizma),P(2),en(o||"\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u0432 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0435")}}const Q6e=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]};function J6e(l,a){1&l&&(M(0,"clr-radio-container",1),M(1,"label"),ie(2,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430:"),E(),Z(3,K6e,4,4,"clr-radio-wrapper",2),E()),2&l&&(P(3),O("ngForOf",Ra(1,Q6e)))}function eze(l,a){if(1&l){const o=gt();M(0,"clr-radio-wrapper"),M(1,"input",17),ee("ngModelChange",function(u){return Le(o),X(2).uiConfig.ui.audioValue.rawValue=u}),E(),M(2,"label"),ie(3),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("name","mainAudio")("value",o.value)("ngModel",c.uiConfig.ui.audioValue.rawValue),P(2),en(o.name)}}function tze(l,a){if(1&l&&(M(0,"clr-radio-container",1),M(1,"label"),ie(2,"\u0417\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435:"),E(),Z(3,eze,4,4,"clr-radio-wrapper",2),E()),2&l){const o=X();P(3),O("ngForOf",o.audios)}}function nze(l,a){1&l&&(M(0,"h4"),ie(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),E())}function ize(l,a){1&l&&me(0,"clr-progress-bar",19),2&l&&O("clrValue",X().translationLoadingPersantage)}function rze(l,a){if(1&l){const o=gt();M(0,"button",20),ee("click",function(){return Le(o),X().downloadAll()}),me(1,"clr-icon",21),ie(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0434\n"),E()}}function sze(l,a){if(1&l){const o=gt();M(0,"button",20),ee("click",function(){const h=Le(o).$implicit;return X(2).deleteTranslation(h)}),me(1,"clr-icon",23),ie(2),E()}if(2&l){const o=a.$implicit;P(2),Dy(" ",o.name," (",o.nameOriginal,") ")}}function oze(l,a){if(1&l&&(M(0,"div"),Z(1,sze,3,2,"button",22),E()),2&l){const o=X();P(1),O("ngForOf",o.translationInfos)}}const qL=function(l,a,o,c){return{btn:!0,"btn-primary":l,"btn-success":a,"btn-primary-outline":o,"btn-success-outline":c}};class su{constructor(a,o,c){this.name=a,this.nameSimple=o,this.value=c}}class aze{constructor(a,o,c){this.name=a,this.nameOriginal=o,this.value=c}equalsTo(a){return this.nameOriginal==a.name&&this.value==a.value}}class lze{constructor(a=!1,o="",c=""){this.modalFlag=a,this.currentName=o,this.text=c}}let Nv=(()=>{class l{constructor(o,c,u,h){this.config=o,this.uiConfig=c,this.themesSvc=u,this.audioSvc=h,this.translationLoadingPersantage=0,this.settingsBooks=[],this.settingsMemorial=[],this.settingsCalculator=[],this.audios=[new su("\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","\u0411\u0435\u0437 \u0437\u0432\u0443\u043a\u0430","0"),new su("\u041f\u0441\u0430\u043b\u043c\u044b \u0414\u0430\u0432\u0438\u0434\u043e\u0432\u044b (\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432))","\u0438\u0435\u0440\u043e\u0434\u0438\u0430\u043a\u043e\u043d \u0413\u0435\u0440\u043c\u0430\u043d (\u0420\u044f\u0431\u0446\u0435\u0432)","1"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0441\u0438\u043d\u043e\u0434\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434) (\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439)","\u0418\u043b\u044c\u044f \u0415\u0444\u0438\u043c\u043e\u0432\u0438\u0447 \u041f\u0440\u0443\u0434\u043e\u0432\u0441\u043a\u0438\u0439","9"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u0411\u0438\u0440\u0443\u043a\u043e\u0432\u044b\u0445) (\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432)","\u041b\u0435\u0432 \u041f\u0440\u044b\u0433\u0443\u043d\u043e\u0432","2"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435","\u0434\u0440\u0435\u0432\u043d\u0435\u0433\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0439","4"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432)","\u0434\u0438\u0430\u043a\u043e\u043d \u0418\u043e\u0430\u043d\u043d \u0413\u043b\u0435\u0431\u043e\u0432","3"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432)","\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a \u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u043c\u0438\u0440\u043d\u043e\u0432","5"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432)","\u0418\u043b\u044c\u044f \u0420\u044b\u0431\u0430\u043a\u043e\u0432","6"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c (\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432)","\u0438\u0433\u0443\u043c\u0435\u043d \u0418\u043e\u0430\u0441\u0430\u0444 (\u0421\u043e\u0440\u043e\u043a\u0438\u043d), \u041c\u0430\u043a\u0441\u0438\u043c \u0422\u0430\u043d\u0446\u0443\u0440\u043e\u0432","7"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432))","\u0438\u0435\u0440\u043e\u043c\u043e\u043d\u0430\u0445 \u0422\u0438\u0445\u043e\u043d (\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432)","8"),new su("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c \u043d\u0430 \u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 (\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432))","\u0438\u0433\u0443\u043c\u0435\u043d \u0410\u043c\u0432\u0440\u043e\u0441\u0438\u0439 (\u0415\u0440\u043c\u0430\u043a\u043e\u0432)","10")],this.translationInfosArray=[],this.deleteTranslationDlg=new lze,this.settingsCalculator=[],this.settingsBooks=[c.ui.parallel,c.ui.coloredTranslations,c.ui.fineText,c.ui.lineBreaks,c.ui.showFacePage,c.ui.stopServiceFlag],this.settingsMemorial=[c.ui.sortPersonsPriests,c.ui.sortPersonsNames,c.ui.memorialVerticalView,c.ui.mergeNameOnImport,c.ui.showMolitvy,c.ui.addCommentToName,c.ui.memorialSlava1Zdrav,c.ui.memorialSlava1Upok,c.ui.memorialSlava2Zdrav,c.ui.memorialSlava2Upok,c.ui.memorialSlava3Zdrav,c.ui.memorialSlava3Upok,c.ui.memorialPsaltir,c.ui.autoDownloadAudioFiles,c.ui.showFacePage,c.ui.stopServiceFlag]}isMemorial(){return null!=this.data&&this.stgsData.classes.memorialSettings}isCalculator(){return null!=this.data&&this.stgsData.classes.calculatorSettings}isBook(){return null==this.data||this.stgsData.classes.bookSettings}get settings(){return this.isBook()?this.settingsBooks:this.isMemorial()?this.settingsMemorial:this.settingsCalculator}get stgsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get translationInfos(){let o=this.uiConfig.getAudioTranslations(),c=()=>{this.translationInfosArray=[];for(let u=0;u<o.length;++u){let h=o[u];this.audios.forEach(d=>{d.value==""+ +h.value&&this.translationInfosArray.push(new aze(d.nameSimple,h.name,h.value))})}};if(o.length!=this.translationInfosArray.length)c();else for(let u=0;u<o.length;++u)if(!this.translationInfosArray[u].equalsTo(o[u])){c();break}return this.translationInfosArray}get currentKafizma(){return""+Gn.getKafizmNumberBy(17,this.uiConfig.ui.currentOffset.getNumberValue())}set currentKafizma(o){this.uiConfig.ui.currentOffset.setNumberValue(Gn.getOffsetByKafizmNumber(17,+o))}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}toggleParallel(){return this.uiConfig.ui.parallel.setBooleanValue(!this.uiConfig.ui.parallel.getAndVerifyBooleanValue()),this}toggleLineBreaks(){return this.uiConfig.ui.lineBreaks.setBooleanValue(!this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()),this}toggleColoredTranslations(){return this.uiConfig.ui.coloredTranslations.setBooleanValue(!this.uiConfig.ui.coloredTranslations.getAndVerifyBooleanValue()),this}isRedTheme(){return this.config.isRedTheme()}isLight(){return this.themesSvc.isLight()}isNight(){return this.themesSvc.isNight()}isAutoTheme(){return this.themesSvc.isAutoTheme()}onToggleAutoTheme(){this.themesSvc.onToggleAutoTheme()}switchToLight(){this.themesSvc.switchToLight()}switchToNight(){this.themesSvc.switchToNight()}downloadAll(){this.audioSvc.downloadAll(o=>(this.translationLoadingPersantage=Math.round(100*o)/100,!0),()=>{this.translationLoadingPersantage=100})}isTranslationDownloading(){return this.config.isRestServerType()&&this.translationLoadingPersantage>0&&this.translationLoadingPersantage<100}isTranslationDownloadNeeded(o){return this.config.isRestServerType()&&(!o||o&&this.uiConfig.ui.autoDownloadAudioFiles.getBooleanValue())&&this.isMemorial()}deleteTranslation(o){this.deleteTranslationDlg.currentName=o.name,this.deleteTranslationDlg.modalFlag=!0}deleteTranslationDirect(){this.config.post(()=>{let o=this.translationInfos.findIndex(h=>h.name==this.deleteTranslationDlg.currentName);o<0||o>=0&&o<this.translationInfos.length&&this.uiConfig.deleteAudioTranslation(this.translationInfos[o].value),this.deleteTranslationDlg.modalFlag=!1})}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(Ls),R(Rv))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-settings"]],inputs:{data:"data"},decls:34,vars:29,consts:[["clrInline","",4,"ngIf"],["clrInline",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["class","btn btn-primary btn-block",3,"click",4,"ngIf"],[1,"top-space","bottom-space"],[1,"btn-group","btn-primary-outline"],[3,"ngClass","click"],["shape","sun",1,"is-solid"],["shape","moon",1,"is-solid"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],["clrSuccess","","clrLabeled","",3,"clrValue"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","download"],["class","btn btn-primary btn-block",3,"click",4,"ngFor","ngForOf"],["shape","times"]],template:function(o,c){1&o&&(Z(0,$6e,4,3,"clr-radio-container",0),M(1,"clr-toggle-container",1),M(2,"label"),ie(3,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),E(),Z(4,q6e,4,4,"clr-toggle-wrapper",2),E(),Z(5,Z6e,4,3,"clr-radio-container",0),Z(6,J6e,4,2,"clr-radio-container",0),Z(7,tze,4,1,"clr-radio-container",0),Z(8,nze,2,0,"h4",3),Z(9,ize,1,1,"clr-progress-bar",4),Z(10,rze,3,0,"button",5),Z(11,oze,2,1,"div",3),M(12,"div",6),M(13,"clr-toggle-container",1),M(14,"label"),ie(15,"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441:"),E(),E(),M(16,"div",7),M(17,"button",8),ee("click",function(){return c.switchToLight()}),me(18,"clr-icon",9),E(),M(19,"button",8),ee("click",function(){return c.onToggleAutoTheme()}),me(20,"clr-icon",9),me(21,"clr-icon",10),E(),M(22,"button",8),ee("click",function(){return c.switchToNight()}),me(23,"clr-icon",10),E(),E(),E(),M(24,"clr-modal",11),ee("clrModalOpenChange",function(h){return c.deleteTranslationDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(25,"h3",12),ie(26,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430:"),E(),M(27,"div",13),ie(28),E(),M(29,"div",14),M(30,"button",15),ee("click",function(){return c.deleteTranslationDlg.modalFlag=!1}),ie(31,"\u041e\u0442\u043c\u0435\u043d\u0430"),E(),M(32,"button",16),ee("click",function(){return c.deleteTranslationDirect()}),ie(33,"Ok"),E(),E(),E()),2&o&&(O("ngIf",c.isBook()||c.isMemorial()),P(4),O("ngForOf",c.settings),P(1),O("ngIf",c.isMemorial()),P(1),O("ngIf",c.isMemorial()),P(1),O("ngIf",c.isMemorial()),P(1),O("ngIf",c.isTranslationDownloading()),P(1),O("ngIf",c.isTranslationDownloading()),P(1),O("ngIf",c.isTranslationDownloadNeeded(!0)&&!c.isTranslationDownloading()),P(1),O("ngIf",!c.isTranslationDownloading()),P(6),O("ngClass",pw(14,qL,!c.isRedTheme()&&c.isLight(),c.isRedTheme()&&c.isLight(),!c.isRedTheme()&&!c.isLight(),c.isRedTheme()&&!c.isLight())),P(2),O("ngClass",pw(19,qL,!c.isRedTheme()&&c.isAutoTheme(),c.isRedTheme()&&c.isAutoTheme(),!c.isRedTheme()&&!c.isAutoTheme(),c.isRedTheme()&&!c.isAutoTheme())),P(3),O("ngClass",pw(24,qL,!c.isRedTheme()&&c.isNight(),c.isRedTheme()&&c.isNight(),!c.isRedTheme()&&!c.isNight(),c.isRedTheme()&&!c.isNight())),P(2),O("clrModalOpen",c.deleteTranslationDlg.modalFlag),P(4),hi(' \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0432\u0443\u043a\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430: "',c.deleteTranslationDlg.currentName,'"? '))},directives:[mn,L$,Rr,fi,V4,d1,aa,kS,Js,Rs,SS,Xd,Ru,Zd,wP,Ts,Xn,jh,$h],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function cze(l,a){1&l&&me(0,"clr-icon",16)}function uze(l,a){1&l&&me(0,"clr-icon",17)}function hze(l,a){if(1&l){const o=gt();M(0,"clr-input-container"),M(1,"label"),Z(2,cze,1,0,"clr-icon",13),Z(3,uze,1,0,"clr-icon",14),ie(4),E(),M(5,"input",15),ee("ngModelChange",function(u){return Le(o).$implicit.value=u}),E(),M(6,"clr-control-error"),ie(7,"\u041f\u043e\u043b\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e!"),E(),E()}if(2&l){const o=a.$implicit,c=X(2);P(2),O("ngIf",c.isEventProperty(o,!1)),P(1),O("ngIf",c.isEventProperty(o,!0)),P(1),hi(" ",o.name,""),P(1),Wm("name","prop_",o.name,""),O("ngModel",o.value)}}function dze(l,a){if(1&l){const o=gt();M(0,"button",18),ee("click",function(){return Le(o),X(2).deletePerson()}),me(1,"clr-icon",19),E()}}function fze(l,a){if(1&l){const o=gt();M(0,"button",11),ee("click",function(){return Le(o),X(2).addProperty()}),me(1,"clr-icon",20),E()}}function pze(l,a){if(1&l){const o=gt();M(0,"button",21),ee("click",function(){Le(o);const u=X(2);return u.savePerson(u.person)}),ie(1," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),E()}}function gze(l,a){if(1&l){const o=gt();M(0,"form",1),M(1,"clr-input-container"),M(2,"label"),ie(3,"\u0418\u043c\u044f"),E(),M(4,"input",2),ee("ngModelChange",function(u){return Le(o),X().person.name=u}),E(),E(),M(5,"clr-input-container"),M(6,"label"),ie(7,"\u041a\u0430\u0444\u0438\u0437\u043c\u0430"),E(),M(8,"input",3),ee("ngModelChange",function(u){return Le(o),X().kafizma=u}),E(),E(),M(9,"clr-checkbox-container",4),M(10,"label"),ie(11,"\u0421\u0442\u0430\u0442\u0443\u0441"),E(),M(12,"clr-checkbox-wrapper"),M(13,"input",5),ee("ngModelChange",function(u){return Le(o),X().person.live=u}),E(),M(14,"label"),ie(15,"\u0416\u0438\u0432\u043e\u0439"),E(),E(),E(),Z(16,hze,8,5,"clr-input-container",6),M(17,"span",7),ie(18,"\xa0"),E(),M(19,"clr-input-container"),M(20,"label"),ie(21,"*\u041d\u043e\u0432\u043e\u0435"),E(),M(22,"input",8),ee("ngModelChange",function(u){return Le(o),X().newName=u}),E(),E(),M(23,"span",7),ie(24,"\xa0"),E(),Z(25,dze,2,0,"button",9),Z(26,fze,2,0,"button",10),M(27,"button",11),ee("click",function(){Le(o);const u=X();return u.revertPerson(u.person)}),ie(28," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c "),E(),Z(29,pze,2,0,"button",12),E()}if(2&l){const o=X();P(4),O("ngModel",o.person.name),P(4),O("ngModel",o.kafizma),P(5),O("ngModel",o.person.live),P(3),O("ngForOf",o.properties.properties),P(6),O("ngModel",o.newName),P(3),O("ngIf",o.personDeletionEnabled),P(1),O("ngIf",o.newName),P(3),O("ngIf",o.person.dirty)}}let mze=(()=>{class l{constructor(o,c,u,h){this.ks=o,this.eventParserSvc=c,this.config=u,this.uiConfig=h,this.personDeletionEnabled=!1,this.memkey=-1,this.data=null,this.changesDetectorPerson=Ds.builder(),this.myProperties=new ki,this.newName=""}get person(){var o;return null===(o=this.data)||void 0===o?void 0:o.person}get kafizma(){return!this.person||this.person.offset<0?0:Gn.getKafizmNumberBy(17,this.person.offset)}set kafizma(o){if(o<=0)this.person&&(this.person.offset=-1);else if(this.person){let c=Gn.getOffsetByKafizmNumber(17,o);this.person.offset=c,this.uiConfig.ui.currentPersonOffset.setNumberValue(c)}}get properties(){return this.syncData(),this.myProperties}updateProperties(){this.newName="",this.properties.setOnChangeCallback(()=>{this.person&&this.person.setDirty()}),this.properties.load(this.person?this.person.description:""),this.properties.properties.find(o=>"\u0442\u0435\u043a\u0441\u0442"==o.name)||this.properties.pushNew("\u0442\u0435\u043a\u0441\u0442","")}ngOnDestroy(){}ngOnInit(){this.updateProperties()}savePerson(o){o.description=this.properties.toString(),this.ks.save(this.memkey,o,!0).then(c=>{var u;null===(u=this.data)||void 0===u||u.click(!0)},c=>{var u;this.config.addAlert(mr.of(""+c,"OK",15)),null===(u=this.data)||void 0===u||u.click(!1)})}revertPerson(o){var c;o.revertDirty(),null===(c=this.data)||void 0===c||c.click(!1)}addProperty(){this.newName&&(this.properties.pushNew(this.newName,""),this.newName="")}isEventProperty(o,c){try{let u=o.value?this.eventParserSvc.parseEvent(o.value):null;return null!=u&&c==u.isToday()}catch(u){}return!1}syncData(){var o;this.changesDetectorPerson.checkAndUpdate(null===(o=this.data)||void 0===o?void 0:o.person)&&this.config.post(()=>{this.updateProperties()})}deletePerson(){!this.data||this.ks.deletePersons([this.data.person]).then(o=>{var c,u;o&&o.success?null===(c=this.data)||void 0===c||c.click(!0):(this.config.addAlert(mr.of("\u041e\u0448\u0438\u0431\u043a\u0430: "+(null==o?void 0:o.error),"OK",15)),null===(u=this.data)||void 0===u||u.click(!1))},o=>{var c;this.config.addAlert(mr.of(""+o,"OK",15)),null===(c=this.data)||void 0===c||c.click(!1)})}}return l.\u0275fac=function(o){return new(o||l)(R(kf),R(HD),R(on),R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-person-details"]],inputs:{data:"data"},decls:1,vars:1,consts:[["clrForm","",4,"ngIf"],["clrForm",""],["clrInput","","placeholder","\u0418\u043c\u044f","name","name",3,"ngModel","ngModelChange"],["clrInput","","placeholder","\u0418\u043d\u0434\u0435\u043a\u0441","name","offset",3,"ngModel","ngModelChange"],["clrInline",""],["type","checkbox","clrCheckbox","","name","options","value","option1",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"clr-subtext"],["clrInput","","placeholder","\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e","name","prop_new_name",3,"ngModel","ngModelChange"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["shape","event",4,"ngIf"],["shape","event","class","is-solid",4,"ngIf"],["clrInput","","placeholder","\u0422\u0435\u043a\u0441\u0442","required","",3,"name","ngModel","ngModelChange"],["shape","event"],["shape","event",1,"is-solid"],[1,"btn","btn-danger",3,"click"],["shape","trash"],["shape","plus"],[1,"btn","btn-success",3,"click"]],template:function(o,c){1&o&&Z(0,gze,30,8,"form",0),2&o&&O("ngIf",c.person)},directives:[mn,Tp,Sp,Nu,wS,D0,Rr,aa,I1,Js,Rs,SS,Xd,Ru,Zd,fi,Ts,jd,xS],styles:[".template-editor[_ngcontent-%COMP%]{height:calc(100vh - 290px)}.template-editor-2[_ngcontent-%COMP%]{height:calc(100vh - 230px)}"]}),l})(),YL=(()=>{class l{constructor(o){this.config=o,this.clazz={}}get spinnerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}get type(){return this.data&&this.data.classes.type?this.data.classes.type:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){var o,c=null===(o=this.spinnerData)||void 0===o?void 0:o.classes;return this.clazz.spinner=!0,this.clazz["spinner-inline"]=!c||c.spinnerInline,this.clazz}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-spinner"]],inputs:{data:"data"},decls:5,vars:3,consts:[[3,"ngClass"]],template:function(o,c){1&o&&(M(0,"span"),M(1,"span",0),ie(2),E(),M(3,"span"),ie(4),E(),E()),2&o&&(P(1),O("ngClass",c.getClasses()),P(1),hi(" ",c.text," "),P(2),hi(" ",c.text," "))},directives:[Xn],styles:[""]}),l})();const vze=["pagesView"];function _ze(l,a){if(1&l){const o=gt();M(0,"clr-accordion-panel",59),ee("clrAccordionPanelOpenChange",function(u){return Le(o),X(2).showSettings=u}),M(1,"clr-accordion-title"),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),E(),M(3,"clr-accordion-content"),me(4,"app-dynamic-settings",4),M(5,"div",60),M(6,"button",61),ee("click",function(){return Le(o),X(2).printBook()}),me(7,"clr-icon",62),ie(8," \u041f\u0435\u0447\u0430\u0442\u044c "),E(),E(),E(),E()}if(2&l){const o=X(2);O("clrAccordionPanelOpen",o.showSettings),P(4),O("data",o.settingsData)}}function yze(l,a){if(1&l){const o=gt();M(0,"clr-accordion-panel",59),ee("clrAccordionPanelOpenChange",function(u){return Le(o),X(2).filterMemorials=u}),M(1,"clr-accordion-title"),ie(2,"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f"),E(),M(3,"clr-accordion-content"),me(4,"app-dynamic-content-toolbar",4),me(5,"app-dynamic-content-toolbar",4),E(),E()}if(2&l){const o=X(2);O("clrAccordionPanelOpen",o.filterMemorials),P(4),O("data",o.toolbarMemorialsFilters),P(1),O("data",o.toolbarMemorialsFlags)}}function bze(l,a){if(1&l){const o=gt();M(0,"div",56),M(1,"form",5),M(2,"clr-input-container"),M(3,"label"),ie(4,"\u0418\u043c\u044f:"),E(),M(5,"input",63),ee("ngModelChange",function(u){return Le(o),X(2).search=u}),E(),E(),E(),E()}if(2&l){const o=X(2);P(5),O("ngModel",o.search)}}function Cze(l,a){1&l&&ra(0)}const xze=function(l,a,o){return{$implicit:l,horPagesCount:a,showPersons:o}};function wze(l,a){if(1&l){const o=gt();M(0,"div",40),ee("click",function(u){return u.stopPropagation()}),me(1,"app-print-logo",41),me(2,"app-dynamic-content-toolbar",4),me(3,"app-dynamic-errors",4),M(4,"clr-accordion",42),Z(5,_ze,9,2,"clr-accordion-panel",43),Z(6,yze,6,3,"clr-accordion-panel",43),E(),M(7,"div",44),M(8,"div",45),M(9,"button",46),ee("click",function(){return Le(o),X().onEditTitleInfo()}),me(10,"clr-icon"),M(11,"span",28),ie(12," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),E(),E(),E(),M(13,"div",45),M(14,"button",46),ee("click",function(){return Le(o),X().addMemorial()}),me(15,"clr-icon",47),M(16,"span",28),ie(17," \u041d\u043e\u0432\u044b\u0439"),E(),E(),E(),M(18,"div",45),M(19,"button",46),ee("click",function(){return Le(o),X().toggleSearching()}),me(20,"clr-icon",48),M(21,"span",28),ie(22," \u041f\u043e\u0438\u0441\u043a"),E(),E(),E(),M(23,"div",45),M(24,"button",46),ee("click",function(){return Le(o),X().importMemorials()}),me(25,"clr-icon",49),M(26,"span",28),ie(27," \u0418\u043c\u043f\u043e\u0440\u0442"),E(),E(),E(),M(28,"div",45),M(29,"button",46),ee("click",function(){return Le(o),X().exportMemorials()}),me(30,"clr-icon",50),M(31,"span",28),ie(32," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),E(),E(),E(),M(33,"div",45),M(34,"button",46),ee("click",function(){return Le(o),X().deleteMemorial()}),me(35,"clr-icon",51),M(36,"span",28),ie(37," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),E(),E(),E(),M(38,"div",52),M(39,"div",53),M(40,"button",46),ee("click",function(){return Le(o),X().onEditTitleInfo()}),me(41,"clr-icon"),M(42,"span",28),ie(43," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),E(),E(),M(44,"button",46),ee("click",function(){return Le(o),X().addMemorial()}),me(45,"clr-icon",47),M(46,"span",28),ie(47," \u041d\u043e\u0432\u044b\u0439"),E(),E(),E(),M(48,"div",53),M(49,"button",46),ee("click",function(){return Le(o),X().toggleSearching()}),me(50,"clr-icon",48),M(51,"span",28),ie(52," \u041f\u043e\u0438\u0441\u043a"),E(),E(),M(53,"button",46),ee("click",function(){return Le(o),X().importMemorials()}),me(54,"clr-icon",49),M(55,"span",28),ie(56," \u0418\u043c\u043f\u043e\u0440\u0442"),E(),E(),E(),M(57,"div",53),M(58,"button",46),ee("click",function(){return Le(o),X().exportMemorials()}),me(59,"clr-icon",50),M(60,"span",28),ie(61," \u042d\u043a\u0441\u043f\u043e\u0440\u0442"),E(),E(),M(62,"button",46),ee("click",function(){return Le(o),X().deleteMemorial()}),me(63,"clr-icon",51),M(64,"span",28),ie(65," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),E(),E(),E(),Z(66,bze,6,1,"div",54),M(67,"div",null,55),M(69,"div",56),M(70,"div"),me(71,"app-dynamic-content-toolbar",4),E(),E(),Z(72,Cze,1,0,"ng-container",57),M(73,"div",56),M(74,"div"),me(75,"app-dynamic-content-toolbar",4),E(),E(),M(76,"div",58),ie(77),E(),E(),E()}if(2&l){const o=X(),c=uo(144),u=uo(146),h=uo(148),d=uo(150);P(1),O("enabled",!o.personsData.readonly)("name",o.currentMemorial?o.currentMemorial:"\u0412\u0441\u0435"),P(1),O("data",o.toolbarMemorials),P(1),O("data",o.headerData),P(2),O("ngIf",o.showSettings&&!o.personsData.readonly),P(1),O("ngIf",o.filterMemorials&&!o.personsData.text),P(1),O("hidden",o.personsData.readonly),P(3),et("shape","form"),P(28),O("hidden",o.personsData.readonly),P(3),et("shape","form"),P(25),O("ngIf",o.isSearching()),P(5),O("data",o.toolbarPages),P(1),O("ngTemplateOutlet",c)("ngTemplateOutletContext",t7(18,xze,o.verticalView?o.verticalView10||o.verticalView40?u:h:d,o.verticalView10?1:o.verticalView40?2:1,o.persons)),P(3),O("data",o.toolbarPages),P(2),My("\u0412\u0441\u0435\u0433\u043e: ",o.myPersons.length," ",o.getWordName(o.myPersons.length)," \u0438\u0437 ",o.personsAllCount,".")}}function Sze(l,a){if(1&l){const o=gt();M(0,"clr-toggle-wrapper"),M(1,"input",16),ee("ngModelChange",function(u){return Le(o).$implicit.enabled=u}),E(),M(2,"label"),ie(3),E(),E()}if(2&l){const o=a.$implicit;P(1),O("name",o.memorial.memorial.name)("value",o.memorial.memorial.name)("ngModel",o.enabled),P(2),en(o.memorial.memorial.name)}}function Tze(l,a){1&l&&(M(0,"span",64),ie(1,"\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f"),E())}function Dze(l,a){1&l&&ra(0)}const Mze=function(l,a,o,c,u){return{mark:l,showPersons:a,horPagesCount:o,liveText:c,usopText:u}};function Eze(l,a){if(1&l&&(M(0,"div"),Z(1,Dze,1,0,"ng-container",57),E()),2&l){const o=a.$implicit,c=a.mark,u=a.showPersons,h=a.horPagesCount,d=X();P(1),O("ngTemplateOutlet",o)("ngTemplateOutletContext",function n7(l,a,o,c,u,h,d,f){const p=ta()+l,g=It(),m=Ql(g,p,o,c,u,h);return Fo(g,p+4,d)||m?wu(g,p+5,f?a.call(f,o,c,u,h,d):a(o,c,u,h,d)):wy(g,p+5)}(2,Mze,c,u,h,d.getMemorialPageText(u,!0),d.getMemorialPageText(u,!1)))}}function kze(l,a){if(1&l){const o=gt();M(0,"div",67),M(1,"app-svg-js-image",68),ee("pagesCount",function(u){Le(o);const h=X(),d=h.horPagesCount,f=h.horPagesCount;return X().onPagesCount(u,d*f,!0)}),E(),E()}if(2&l){const o=X(),c=o.liveText,u=o.horPagesCount,h=o.horPagesCount;P(1),O("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c)("type",1)("startPageIndex",0)("horizontalPagesCount",u)("verticalPagesCount",h)}}function Aze(l,a){if(1&l&&(M(0,"div",67),me(1,"app-svg-js-image",70),E()),2&l){const o=a.$implicit,c=X(2),u=c.liveText,h=c.horPagesCount,d=c.horPagesCount;P(1),O("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",u)("type",1)("startPageIndex",o)("horizontalPagesCount",h)("verticalPagesCount",d)}}function Ize(l,a){if(1&l&&(M(0,"div"),Z(1,Aze,2,9,"div",69),E()),2&l){const o=X(2);P(1),O("ngForOf",o.extraPagesLive)}}function Pze(l,a){if(1&l){const o=gt();M(0,"div",67),M(1,"app-svg-js-image",68),ee("pagesCount",function(u){Le(o);const h=X(),d=h.horPagesCount,f=h.horPagesCount;return X().onPagesCount(u,d*f,!1)}),E(),E()}if(2&l){const o=X(),c=o.usopText,u=o.horPagesCount,h=o.horPagesCount;P(1),O("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",c)("type",1)("startPageIndex",0)("horizontalPagesCount",u)("verticalPagesCount",h)}}function Oze(l,a){if(1&l&&(M(0,"div",67),me(1,"app-svg-js-image",70),E()),2&l){const o=a.$implicit,c=X(2),u=c.usopText,h=c.horPagesCount,d=c.horPagesCount;P(1),O("svgWidth",210)("svgHeight",297)("scene","/scenes/memorial.page.scene.txt")("genName","Js")("logoText",u)("type",1)("startPageIndex",o)("horizontalPagesCount",h)("verticalPagesCount",d)}}function Fze(l,a){if(1&l&&(M(0,"div"),Z(1,Oze,2,9,"div",69),E()),2&l){const o=X(2);P(1),O("ngForOf",o.extraPagesUsop)}}function Rze(l,a){if(1&l&&(Z(0,kze,2,9,"div",65),Z(1,Ize,2,1,"div",66),Z(2,Pze,2,9,"div",65),Z(3,Fze,2,1,"div",66)),2&l){const o=a.liveText,c=a.usopText;O("ngIf",o),P(1),O("ngIf",o),P(1),O("ngIf",c),P(1),O("ngIf",c)}}function Nze(l,a){1&l&&(M(0,"span",76),ie(1,"+"),E())}function Lze(l,a){if(1&l&&(M(0,"span",73),ie(1),E()),2&l){const o=X().$implicit;O("ngClass",X(2).getClasses(o,o.classesBadgeHorizontal,!1,"",!1,!0)),P(1),en(o.badge)}}function Bze(l,a){if(1&l){const o=gt();M(0,"span",72),ee("click",function(u){const d=Le(o).$implicit,f=X(2).$implicit;return X(2).onPersonFilterClick(u,f,d)}),ie(1),E()}if(2&l){const o=a.$implicit;O("ngClass",X(4).getFilterClasses(o)),P(1),en(o.name)}}function Vze(l,a){if(1&l&&(M(0,"div"),Z(1,Bze,2,2,"span",71),E()),2&l){const o=X(3);P(1),O("ngForOf",o.personsFilters)}}const zze=function(){return{"left-space-0":!0,"right-space-0":!0}};function Uze(l,a){if(1&l){const o=gt();M(0,"div",72),ee("click",function(u){const d=Le(o).$implicit;return X(2).onPersonClick(u,d)}),M(1,"div",73),ie(2),E(),M(3,"div",73),Z(4,Nze,2,0,"span",74),ie(5),M(6,"span"),Z(7,Lze,2,2,"span",75),E(),E(),Z(8,Vze,2,1,"div",66),E()}if(2&l){const o=a.$implicit,c=X(2);O("ngClass",c.getClasses(o,Ra(8,zze))),P(1),O("ngClass",c.getClasses(o,o.classesVertical,!1,"clr-col-4 right")),P(1),en(o.prefix),P(1),O("ngClass",c.getClasses(o,o.classesVertical,!1,"clr-col-8")),P(1),O("ngIf",!(null!=o.person&&o.person.live)),P(1),hi("",o.name," "),P(2),O("ngIf",o.badge),P(1),O("ngIf",c.personsClickHandler.person===o&&c.personsClickHandler.selectionToggle)}}function Hze(l,a){1&l&&Z(0,Uze,9,9,"div",71),2&l&&O("ngForOf",a.showPersons)}function Wze(l,a){1&l&&(M(0,"span",76),ie(1,"+"),E())}function Gze(l,a){if(1&l&&(M(0,"span",73),ie(1),E()),2&l){const o=X().$implicit;O("ngClass",X(2).getClasses(o,o.classesBadgeHorizontal,!1,"",!1,!0)),P(1),en(o.badge)}}function jze(l,a){if(1&l){const o=gt();M(0,"span",72),ee("click",function(u){const d=Le(o).$implicit,f=X(2).$implicit;return X(2).onPersonFilterClick(u,f,d)}),ie(1),E()}if(2&l){const o=a.$implicit;O("ngClass",X(4).getFilterClasses(o)),P(1),en(o.name)}}function $ze(l,a){if(1&l&&(M(0,"span"),Z(1,jze,2,2,"span",71),E()),2&l){const o=X(3);P(1),O("ngForOf",o.personsFilters)}}function qze(l,a){if(1&l){const o=gt();M(0,"span"),M(1,"span",72),ee("click",function(u){const d=Le(o).$implicit;return X(2).onPersonClick(u,d)}),ie(2),Z(3,Wze,2,0,"span",74),ie(4),Z(5,Gze,2,2,"span",75),E(),Z(6,$ze,2,1,"span",66),E()}if(2&l){const o=a.$implicit,c=X(2);P(1),O("ngClass",c.getClasses(o,o.classesHorizontal,!1,"",!0)),P(1),hi("",o.prefix," "),P(1),O("ngIf",!(null!=o.person&&o.person.live)),P(1),en(o.name),P(1),O("ngIf",o.badge),P(1),O("ngIf",c.personsClickHandler.person===o&&c.personsClickHandler.selectionToggle)}}function Yze(l,a){if(1&l&&(M(0,"span"),Z(1,qze,7,6,"span",17),E()),2&l){const o=a.showPersons;P(1),O("ngForOf",o)}}class vC{constructor(a,o,c){this.name=a,this.enabled=o,this.system=c}static builder(){return new vC("",!1,!1)}setName(a){return this.name=a,this}setEnabled(a){return this.enabled=a,this}setSystem(a){return this.system=a,this}}class XL{constructor(a,o,c){this.memorial=a,this.bEnabled=o,this.onEnabledChanged=c}get enabled(){return this.bEnabled}set enabled(a){this.bEnabled=a,this.onEnabledChanged&&this.onEnabledChanged()}static builder(){return new XL(null,!0,()=>{})}setMemorial(a){return this.memorial=a,this}setEnabled(a){return this.enabled=a,this}setOnEnabledChanged(a){this.onEnabledChanged=a}}class ZL{constructor(a,o,c,u,h,d,f,p){this.prefix=a,this.name=o,this.description=c,this.badge=u,this.person=h,this.classesVertical=d,this.classesHorizontal=f,this.classesBadgeHorizontal=p}static builder(){return new ZL("","","","",null,{},{},{})}setPrefix(a){return this.prefix=a,this}setName(a){return this.name=a,this}setDescription(a){return this.description=a,this}setBadge(a){return this.badge=a,this}setPerson(a){return this.person=a,this}addClassVertical(a,o=!0){return this.classesVertical[a]=o,this}addClassHorizontal(a,o=!0){return this.classesHorizontal[a]=o,this}addClassBadgeHorizontal(a,o=!0){return this.classesBadgeHorizontal[a]=o,this}}class Of{constructor(a=!1,o=!0,c="\u041d\u043e\u0432\u044b\u0439",u="",h=[]){this.modalFlag=a,this.modalAddingFlag=o,this.currentName=c,this.text=u,this.preview=h,this.updating=!1,this.singleMemorial=!0,this.clearMemorial=!1}setUpdating(a){return this.updating=a,this}updateTextByPreview(){this.updating||(this.text=this.preview.filter((a,o)=>a.enabled).map((a,o)=>a.memorial.toString()).join("\r\n"))}}class KL{constructor(a,o){this.person=a,this.handler=o,this.lastDate=new Date,this.selectionToggle=!1}static builder(){return new KL(null,()=>{})}setHandler(a){return this.handler=a,this}clickByPerson(a){let o=new Date;this.person!=a?(this.person=a,this.lastDate=o,this.selectionToggle=!0):o.getTime()-this.lastDate.getTime()<500?(this.handler(a),this.person=null):(this.lastDate=o,this.selectionToggle=!this.selectionToggle)}}let _ne=(()=>{class l{constructor(o,c,u,h,d,f,p,g,m,v,_,y){this.config=o,this.uiConfig=c,this.themeSvc=u,this.memDataSvc=h,this.memLoaderSvc=d,this.memImporterSvc=f,this.memExporterSvc=p,this.memExporterXsvSvc=g,this.kafizmySvc=m,this.dateEventsSvc=v,this.audioSvc=_,this.tagsSvc=y,this.memorialsDlg=new Of,this.memorialsDeleteDlg=new Of,this.memorialsImportDlg=new Of,this.memorialsExportDlg=new Of,this.memorialsWaitingDlg=new Of,this.personDetailsDlg=new Of,this.personDeleteDlg=new Of,this.memorialsTitleInfoDlg=new Of,this.headerData=iu.builder(),this.personsClickHandler=KL.builder().setHandler(b=>this.onEditPerson(b)),this.personDetailsData=BL.builder().setOnClick(b=>{this.personDetailsDlg.modalFlag=!1,b&&this.reload()}),this.personsFilters=[],this.search=null,this.extraPagesLive=[],this.extraPagesUsop=[],this.stgShowSettings=Cg.builder(),this.stgFilterMemorials=Cg.builder(),this.allSettings=AD.builder().add(this.stgShowSettings).add(this.stgFilterMemorials),this.settingsData=ru.builder().updateClasses(b=>b.setMemorialSettings(!0)),this.oldPersons=null,this.myPersons=[],this.nameSvc=new UD,this.sendReadyChanges=Ds.builder(),this.sortNamesChanges=Ds.builder(),this.sortTypesChanges=Ds.builder(),this.searchChanges=Ds.builder(),this.pageSizeChanges=Ds.builder(),this.personOffsetChanges=Ds.builder(),this.offsetChanges=Ds.builder(),this.addCommentToNameChanges=Ds.builder(),this.toolbarPages=dc.builder().setItems([]).setOnClick(b=>{this.selectPersonsPage(+b.tag)}).updateClasses(b=>{b.setLabelNormal("label-info")}),this.toolbarMemorials=dc.builder().setItems([]).setOnClick(b=>{this.selectMemorial(b.tag)}).updateClasses(b=>{b.setLabelNormal("label-info")}),this.toolbarMemorialsFilters=dc.builder().setItems([]).setOnClick(b=>{this.selectMemorialFlag(b.tag)}).updateClasses(b=>{b.setLabelNormal("label-success")}),this.toolbarMemorialsFlags=dc.builder().setItems([]).setOnClick(b=>{this.selectMemorialFlag(b.tag)}).updateClasses(b=>{b.setLabelNormal("label-danger")}),this.personChangesSubscription=null}isSearching(){return null!=this.search}get showSettings(){return this.stgShowSettings.enabled}set showSettings(o){this.stgShowSettings.setEnabled(o)}get filterMemorials(){return this.stgFilterMemorials.enabled}set filterMemorials(o){this.stgFilterMemorials.setEnabled(o)}get verticalView10(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"10"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView40(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()&&"40"==this.uiConfig.ui.memorialPageSize.getStringValue()}get verticalView(){return this.uiConfig.ui.memorialVerticalView.getBooleanValue()}set verticalView(o){this.uiConfig.ui.memorialVerticalView.setBooleanValue(o)}get sortPersonPriests(){return this.uiConfig.ui.sortPersonsPriests.getBooleanValue()}get sortPersonNames(){return this.uiConfig.ui.sortPersonsNames.getBooleanValue()}get pageSize(){let o=this.uiConfig.ui.memorialPageSize.getStringValue();return o?+o:15}get currentPage(){return this.uiConfig.ui.currentMemorialPage.getNumberValue()}set currentPage(o){this.uiConfig.ui.currentMemorialPage.setNumberValue(o)}get currentMemorial(){return this.personsData.text?this.personsData.text:this.uiConfig.ui.currentMemorial.getStringValue()}set currentMemorial(o){this.personsData.text||this.uiConfig.ui.currentMemorial.setStringValue(o)}get persons(){return this.syncMyPersons(),this.myPersons}get personsAllCount(){return this.getPersonsAllCount(this.currentMemorial)}get personsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){this.personChangesSubscription=this.memDataSvc.getPersons().getChangeDetector().subscribe(o=>this.clearCaches())}ngOnDestroy(){this.personChangesSubscription&&(this.personChangesSubscription.unsubscribe(),this.personChangesSubscription=null)}ngAfterViewInit(){this.personsData.printerHandler.setHandler(o=>this.onEpubPrint(o)),this.setErrors([this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435"]),this.sortNamesChanges.setUIValue(this.uiConfig.ui.sortPersonsNames),this.sortTypesChanges.setUIValue(this.uiConfig.ui.sortPersonsPriests),this.personsData.readonly||this.audioSvc.stop(),this.isMemorialEnabled()||this.sendReady()}clearCaches(){this.memDataSvc.personsCache.clear()}getPersonsAll(o){return this.memDataSvc.personsCache.getCachedResult(o,this.personsData.readonly,this.personsData.classes.getLiveValue())}getPersonsAllCount(o){return this.getPersonsAll(o).length}setErrors(o){this.config.post(()=>{let c=[];this.personsData.text||c.push(Ol.builder().setText("\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f").setOnClick(()=>{this.filterMemorials=!this.filterMemorials})),this.personsData.readonly||c.unshift(Ol.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings})),this.headerData.setErrors(o).setActions(c).updateClasses(u=>u.setAlertClass("alert-success").setAlertShape(""))})}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(o,c,u=!0,h="",d=!1,f=!1){let g={"clr-row":u};(h=h.trim())&&h.split(" ").forEach(m=>g[h]=!0);for(const m in c)g[m]=c[m];return d||f?g[(f?"hbs":"hs")+this.uiConfig.ui.fontSize.getStringValue()]=!0:g["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,g}printBook(){this.themeSvc.printWindow("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a")||window.print()}isActivePersonHasTag(o){var c;let u=!1;return(null===(c=this.personsClickHandler.person)||void 0===c?void 0:c.person)&&(u=Do.tagsHasFlag(this.personsClickHandler.person.person.tags,o)),"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"==o&&(u=!0),u}updatePersonFilterItemsDelayed(){this.config.post(()=>{this.updatePersonFilterItems()})}updatePersonFilterItems(){this.personsData.readonly?this.personsFilters.length&&(this.personsFilters=[]):this.memDataSvc.memorials?(this.personsFilters=this.memDataSvc.memorials.items.map(o=>o.name).map(o=>vC.builder().setName(o).setEnabled(this.isActivePersonHasTag(o))),this.personsFilters.unshift(vC.builder().setName("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c").setEnabled(!1).setSystem(!0),vC.builder().setName("\u0423\u0434\u0430\u043b\u0438\u0442\u044c").setEnabled(!1).setSystem(!0))):this.personsFilters.length&&(this.personsFilters=[])}getFilterItems(o){var c;let u=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(d=>d.name==o),h=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(d=>!this.personsData.readonly||d.enabled).filter(d=>this.personsData.readonly?this.getPersonsAllCount(o)>0:this.getPersonsAllCount(o)>=0).map(d=>d.name).map(d=>ko.builder().setText(d).setTag(d).setSelected(this.tagsSvc.tagsHasFlag(u?u.tags:o,d))):[];return h.unshift(ko.builder().setText("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setTag("\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438").setSelected(this.tagsSvc.tagsHasFlag(u?u.tags:o,"\u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438"))),h}syncMyPersons(o=!1){var c;let u=o;u=u||this.sortTypesChanges.checkAndUpdate(),u=u||this.sortNamesChanges.checkAndUpdate(),u=u||this.searchChanges.checkAndUpdate(this.search),u=u||this.pageSizeChanges.checkAndUpdate(this.pageSize),u=u||this.personOffsetChanges.checkAndUpdate(this.uiConfig.ui.currentPersonOffset.getNumberValue()),u=u||this.offsetChanges.checkAndUpdate(this.uiConfig.ui.currentOffset.getNumberValue()),u=u||this.addCommentToNameChanges.checkAndUpdate(this.uiConfig.ui.addCommentToName.getBooleanValue());let h=this.memDataSvc.persons;if(null==(null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(d=>d.name==this.currentMemorial))&&this.memDataSvc.memorials&&this.currentMemorial&&this.memDataSvc.memorials.items.length>0&&(this.currentMemorial=this.memDataSvc.memorials.items[0].name,u=!0),!h||h===this.oldPersons&&!u)return!h&&this.myPersons.length>0&&(this.myPersons=[]),void this.sendReady();this.oldPersons=h,this.config.post(()=>this.syncMyPersonsPosted())}syncMyPersonsPosted(){var o,c;this.sendReady(),this.setErrors([(this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435")+(this.personsData.readonly?this.personsData.classes.isLiveAcceptable(!0)?": \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438":": \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438":"")]);{this.toolbarMemorials.setItems((_=>{let y=this.memDataSvc.memorials?this.memDataSvc.memorials.items.filter(b=>!this.personsData.readonly||b.enabled).filter(b=>this.personsData.readonly?this.getPersonsAllCount(b.name)>0:this.getPersonsAllCount(b.name)>=0).map(b=>b.name).map(b=>ko.builder().setText(b).setTag(b).setSelected(b==this.currentMemorial)):[];return y.unshift(ko.builder().setText("\u0412\u0441\u0435").setTag("").setSelected(!this.currentMemorial)),y})()),this.updatePersonFilterItems(),this.toolbarMemorialsFilters.setItems(this.getFilterItems(this.currentMemorial));let m=["\u0421\u043b\u0430\u0432\u0430 1","\u0421\u043b\u0430\u0432\u0430 2","\u0421\u043b\u0430\u0432\u0430 3","\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u043d\u044b\u0439"],v=null===(o=this.memDataSvc.memorials)||void 0===o?void 0:o.items.find(_=>_.name==this.currentMemorial);this.toolbarMemorialsFlags.setItems(m.map(_=>ko.builder().setText(_).setTag(_).setSelected(!!v&&this.tagsSvc.tagsHasFlag(v.tags,_))))}let u=null===(c=this.search)||void 0===c?void 0:c.toLowerCase(),h=[...this.getPersonsAll(this.currentMemorial).filter(g=>!u||g.name.toLowerCase().indexOf(u)>=0)],d=Math.ceil(h.length/this.pageSize);this.currentPage>d&&(this.currentPage=1);let f=this.currentPage?this.pageSize*(this.currentPage-1):0,p=this.currentPage?this.pageSize*this.currentPage-1:h.length-1;(this.sortPersonPriests||this.sortPersonNames)&&(h=zn.sortPersons(h,g=>g,this.sortPersonNames,this.sortPersonPriests));{let g=this.uiConfig.ui.currentOffset.getNumberValue(),m=this.uiConfig.ui.currentPersonOffset.getNumberValue();g<0&&(g=m);let v=this.uiConfig.ui.addCommentToName.getBooleanValue(),_=Gn.getKafizmNumberBy(17,g),y=Gn.getKafizmNumberBy(17,m);this.myPersons=h.map(b=>{let x=this.nameSvc.getPrefixedName(b.name),C=zn.isPriest(b),w=b.kafizma==_,S=b.kafizma==y,D=new ki;D.load(b.description);let T=D.getValue("\u0442\u0435\u043a\u0441\u0442");return T&&T.length>10&&(T=T.substring(0,8)+".."),ZL.builder().setPrefix(x.prefix).setName(x.name+(v&&T?" ("+T+")":"")).setBadge(b.kafizma>0?""+b.kafizma:"").setPerson(b).addClassVertical("cursor",!0).addClassVertical("bg-4",C&&b.live).addClassVertical("bg-5",!C&&b.live).addClassVertical("bg-3",!b.live).addClassHorizontal("cursor",!0).addClassHorizontal("label",!0).addClassHorizontal("label-success",C&&b.live).addClassHorizontal("label-info",!C&&b.live).addClassHorizontal("label-warning",!b.live).addClassHorizontal("label-orange",!b.live).addClassBadgeHorizontal("badge",!0).addClassBadgeHorizontal("badge-purple",w&&b.live).addClassBadgeHorizontal("badge-danger",!w&&S&&b.live).addClassBadgeHorizontal("badge-light-blue",!(w||S)&&b.live)}).filter((b,x,C)=>f<=x&&x<=p)}this.toolbarPages.setItems([ko.builder().setText("\u0412\u0441\u0435").setTag("0").setSelected(0==this.currentPage)].concat(Array.from(Array(d).keys()).map(g=>g+1).map(g=>ko.builder().setText(""+g).setTag(""+g).setSelected(g==this.currentPage))))}sendReady(){this.sendReadyChanges.checkAndUpdate(!0)&&this.config.messageBus.putMessage(o0.builder().setSender(this.personsData.id).setTarget(this.personsData.targetId))}getMemorialPageText(o,c){let u=this.uiConfig.ui.addCommentToName.getBooleanValue(),h=o.filter(f=>f.person).map(f=>f.person).filter(f=>f.live==c).map(f=>{if(!u)return f.name;let p=new ki;p.load(f.description);let g=p.getValue("\u0442\u0435\u043a\u0441\u0442");return g&&g.length>10&&(g=g.substring(0,8)+".."),f.name+(u&&g?" ("+g+")":"")}).join(", "),d=this.uiConfig.ui.memorialsTitleRemark.getStringValue();return d&&(d=d.split(",").filter(f=>!!f).map(f=>f.trim()).map(f=>f.startsWith("*")?f:"*"+f).join(",")),this.personsData.readonly?this.personsData.classes.isLiveAcceptable(c)&&h?(c?`${d||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+h:"":h?(c?`${d||"*\u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"},`:"*\u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438,")+h:""}updateSelectedPage(){this.toolbarPages.items.forEach(o=>+o.tag==this.currentPage)}scrollToPersons(){return this.pagesView.nativeElement.scrollIntoView(!0),this}reSyncView(o){this.config.post(()=>{this.oldPersons=null,o&&o()})}selectPersonsPage(o){this.currentPage=o,this.reSyncView(()=>{this.scrollToPersons()})}selectMemorialFlag(o){var c;let u=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(h=>h.name==this.currentMemorial);u&&(u.tags=this.tagsSvc.tagsHasFlag(u.tags,o)?Do.removeTag(u.tags,o):Do.addTagToTags(u.tags,o),this.memDataSvc.getMemorials().save(u,!0).then(h=>{this.reload()}))}selectMemorial(o){this.currentMemorial=o,this.reSyncView(),this.config.post(()=>{this.scrollToPersons()})}addMemorial(){this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!0,this.memorialsDlg.currentName="\u041d\u043e\u0432\u044b\u0439"}editMemorial(){!this.currentMemorial||(this.memorialsDlg.modalFlag=!0,this.memorialsDlg.modalAddingFlag=!1,this.memorialsDlg.currentName=this.currentMemorial)}deleteMemorial(){this.memorialsDeleteDlg.modalFlag=!0,this.memorialsDeleteDlg.currentName=this.currentMemorial}reload(){this.memDataSvc.getMemorials().reloadMemorials(o=>{o&&this.memDataSvc.getPersons().reloadPersons()})}newMemorial(o){var c;null===(c=this.memDataSvc.memorials)||void 0===c||c.newMemorial(o,u=>{u.success?(this.currentMemorial=o,this.reload()):this.config.addAlert(mr.of(u.error,"Ok",30))})}onAddNewMemorial(){this.newMemorial(this.memorialsDlg.currentName),this.memorialsDlg.modalFlag=!1}onChangeMemorial(){var o;let c=null===(o=this.memDataSvc.memorials)||void 0===o?void 0:o.items.find(u=>u.name==this.currentMemorial);c&&(c.name=this.memorialsDlg.currentName,this.currentMemorial=c.name,this.config.post(()=>this.reload(),100)),this.memorialsDlg.modalFlag=!1}onDeleteAllPersons(){this.memorialsDeleteDlg.modalFlag=!1,this.memDataSvc.getMemorials().deleteAll().then(o=>{o&&o.success&&this.memDataSvc.getPersons().deleteAll(-1).then(c=>{c&&c.success&&(this.currentMemorial="",this.reload())})})}onDeleteMemorial(){var o,c,u;let h=null===(o=this.memDataSvc.memorials)||void 0===o?void 0:o.items.find(f=>f.name==this.currentMemorial),d=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(f=>f.name!=this.currentMemorial);h&&(this.currentMemorial=d?d.name:"",null===(u=this.memDataSvc.memorials)||void 0===u||u.deleteMemorial(h,f=>{this.reload()})),this.memorialsDeleteDlg.modalFlag=!1}toggleSearching(){this.search=null==this.search?"":null}get visible(){var o;let c=null===(o=this.memDataSvc.memorials)||void 0===o?void 0:o.items.find(u=>u.name==this.currentMemorial);return!!c&&c.enabled}set visible(o){var c;let u=null===(c=this.memDataSvc.memorials)||void 0===c?void 0:c.items.find(h=>h.name==this.currentMemorial);u&&(u.enabled=o)}toggleVisible(){var o;let c=null===(o=this.memDataSvc.memorials)||void 0===o?void 0:o.items.find(u=>u.name==this.currentMemorial);c&&(c.enabled=!c.enabled)}importMemorials(){this.memorialsImportDlg.modalFlag=!0,this.memorialsImportDlg.currentName=this.currentMemorial,!this.memorialsImportDlg.text&&this.persons.length&&(this.memorialsImportDlg.text=this.getCurrentMemorialText())}getWordName(o){let c="";switch(Math.floor(o%10)){case 1:c="\u0438\u043c\u044f";break;case 2:case 3:case 4:c="\u0438\u043c\u0435\u043d\u0438";break;default:c="\u0438\u043c\u0451\u043d"}return c}onPersonFilterClick(o,c,u){o.stopPropagation(),c.person&&("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"==u.name?this.onEditPerson(c):"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"==u.name?this.personDeleteDlg.modalFlag=!0:(c.person.tags=Do.addTagToTags(c.person.tags,u.name),this.memDataSvc.getPersons().save(-1,c.person,!0))),this.updatePersonFilterItemsDelayed()}onPersonClick(o,c){o.stopPropagation();let u=c.person.offset;u>=0&&!this.personsData.readonly&&this.uiConfig.ui.currentPersonOffset.setNumberValue(u),this.personsClickHandler.clickByPerson(c),this.updatePersonFilterItemsDelayed()}getTags(o=""){var c;let u="";return null===(c=this.memDataSvc.memorials)||void 0===c||c.items.forEach(h=>{h.name==(o||this.currentMemorial)&&(u+=h.name)}),u}onClearImportPreview(){this.memorialsImportDlg.preview=[],this.memorialsImportDlg.text=this.getCurrentMemorialText()}onImportMemorial(){this.memorialsWaitingDlg.modalFlag=!0,this.memorialsImportDlg.modalFlag=!1,this.memorialsImportDlg.singleMemorial&&this.memorialsImportDlg.clearMemorial&&this.clearCurrentMemorial(!1);let o=this.memorialsImportDlg.singleMemorial?[]:this.memorialsImportDlg.preview,c=o.find(h=>{var d,f;return"\u0432\u0441\u0435"===(null===(f=null===(d=h.memorial)||void 0===d?void 0:d.memorial)||void 0===f?void 0:f.name)}),u=()=>{var h,d,f,p;if(o.length){let g=o[0];o=o.slice(1);let m=null===(d=null===(h=g.memorial)||void 0===h?void 0:h.memorial)||void 0===d?void 0:d.name;g.enabled&&m?(null===(f=this.memDataSvc.memorials)||void 0===f?void 0:f.items.find(_=>_.name==m))?this.config.post(u):null===(p=this.memDataSvc.memorials)||void 0===p||p.newMemorial(m,_=>{_.success?this.config.post(u):this.memDataSvc.getMemorials().reloadMemorials(y=>{this.config.post(u)})}):this.config.post(u)}else this.memDataSvc.getMemorials().reloadMemorials(g=>{g?this.memLoaderSvc.addPersons(v=>{var _,y;return(null===(y=null===(_=this.memDataSvc.memorials)||void 0===_?void 0:_.items.find(x=>x.name==(this.memorialsImportDlg.singleMemorial?this.currentMemorial:v)))||void 0===y?void 0:y._id)||-1},this.memorialsImportDlg.text,v=>this.getTags(this.memorialsImportDlg.singleMemorial?this.currentMemorial:v),!0,()=>{var v;let _=null===(v=this.memDataSvc.getMemorials().getMemorials())||void 0===v?void 0:v.items.find(y=>"\u0432\u0441\u0435"===y.name);c&&_?this.memDataSvc.getMemorials().deleteMemorial(_).then(y=>{(!y||!y.success)&&this.config.addAlert(mr.of('\u041d\u0435 \u043c\u043e\u0433\u0443 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "\u0432\u0441\u0435".',"\u041e\u041a",15)),this.memorialsWaitingDlg.modalFlag=!1,this.reload()}):(this.memorialsWaitingDlg.modalFlag=!1,this.reload())}):this.memorialsWaitingDlg.modalFlag=!1})};this.config.post(u)}get allMemorialEnabled(){return this.memorialsImportDlg.preview.map(o=>o.enabled).reduce((o,c)=>o&&c,!0)}set allMemorialEnabled(o){this.memorialsImportDlg.setUpdating(!0),this.memorialsImportDlg.preview.forEach(c=>c.enabled=o),this.memorialsImportDlg.setUpdating(!1),this.memorialsImportDlg.updateTextByPreview()}onImportFile(o){0!==o.target.files.length&&this.memImporterSvc.onLoadAnyFile(o.target.files[0],"",c=>{this.memorialsImportDlg.text=c,this.memorialsImportDlg.preview=this.memLoaderSvc.previewPersons(c).map(u=>XL.builder().setMemorial(u).setEnabled(!0)),this.memorialsImportDlg.preview.forEach(u=>u.setOnEnabledChanged(()=>this.memorialsImportDlg.updateTextByPreview()))})}exportMemorials(){this.memorialsExportDlg.modalFlag=!0,this.memorialsExportDlg.currentName=this.currentMemorial}onSaveAs(o){this.memorialsExportDlg.modalFlag=!1,this.onSaveAllMemorials(o)}getCurrentMemorialText(){var o,c;let u=null===(o=this.memDataSvc.memorials)||void 0===o?void 0:o.items.find(g=>g.name==this.currentMemorial);if(!u)return"";let f="",p=null===(c=this.memDataSvc.persons)||void 0===c?void 0:c.items;return f=this.memExporterSvc.getMemorialsXmlString(p,[this.currentMemorial],[u.tags]),f=this.memLoaderSvc.convertXmlToString(f),f}onSaveAllMemorials(o="xml",c=!0){var u;let h=[""],d=[""],f=this.memDataSvc.getMemorials().getActivePredefinedMemorialsRaw();null===(u=this.memDataSvc.memorials)||void 0===u||u.items.forEach(g=>{let m=null==f.find(v=>v==g.name);c&&(m=!0),g.enabled&&m&&(h.push(g.name),d.push(g.tags))}),(()=>{var g;let m="",v=null===(g=this.memDataSvc.persons)||void 0===g?void 0:g.items;switch(o){case"xml":m=this.memExporterSvc.getMemorialsXmlString(v,h,d);break;case"csv":m=this.memExporterXsvSvc.getMemorialsString(v,h,d,";");break;case"tsv":m=this.memExporterXsvSvc.getMemorialsString(v,h,d,"\t");break;default:m=this.memExporterSvc.getMemorialsXmlString(v,h,d),m=this.memLoaderSvc.convertXmlToString(m)}const _=(new Date).toISOString().split("T")[0];let y=o;if(this.config.isPlatformAndroid())this.kafizmySvc.addTempFile(`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${y}`,m).then(b=>{b&&b.success&&rd.startDownload(b.fileName,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${_}.${y}`)});else{const b=new TextEncoder,x=new Blob([b.encode(m)],{type:"octet/stream"});rd.saveData(x,`\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438.${_}.${y}`)}})()}onPagesCount(o,c,u){this.config.post(()=>{this.onPagesCountDirect(o,c,u)})}onPagesCountDirect(o,c,u){u?this.extraPagesLive=[]:this.extraPagesUsop=[];let h=o-c,d=0;for(;h>0;)h=Math.max(0,h-c),d+=c,u?this.extraPagesLive.push(d):this.extraPagesUsop.push(d)}onEditPerson(o){o.person&&!this.personsData.readonly&&(this.personDetailsData.setPerson(o.person),this.personDetailsDlg.modalFlag=!0)}isMemorialEnabled(o){let c=!1;return this.personsData.readonly||(c=!0),this.personsData.classes.slava1Zdrav&&this.uiConfig.ui.memorialSlava1Zdrav.getBooleanValue()&&(c=!0===o||void 0===o),this.personsData.classes.slava2Zdrav&&this.uiConfig.ui.memorialSlava2Zdrav.getBooleanValue()&&(c=!0===o||void 0===o),this.personsData.classes.slava3Zdrav&&this.uiConfig.ui.memorialSlava3Zdrav.getBooleanValue()&&(c=!0===o||void 0===o),this.personsData.classes.slava1Upok&&this.uiConfig.ui.memorialSlava1Upok.getBooleanValue()&&(c=!1===o||void 0===o),this.personsData.classes.slava2Upok&&this.uiConfig.ui.memorialSlava2Upok.getBooleanValue()&&(c=!1===o||void 0===o),this.personsData.classes.slava3Upok&&this.uiConfig.ui.memorialSlava3Upok.getBooleanValue()&&(c=!1===o||void 0===o),c}onEpubPrint(o){let c=[[],[],[]],u=[[],[],[]];if(this.persons.filter(h=>{var d;return null===(d=h.person)||void 0===d?void 0:d.live}).forEach(h=>{c[0].push(""),c[1].push(h.prefix),c[2].push(h.name)}),this.persons.filter(h=>{var d;return!(null===(d=h.person)||void 0===d?void 0:d.live)}).forEach(h=>{u[0].push("+"),u[1].push(h.prefix),u[2].push(h.name)}),c[0].length>0&&this.isMemorialEnabled(!0)||u[0].length>0&&this.isMemorialEnabled(!1)){let h=[],d=[],f=[],p=this.currentMemorial?this.currentMemorial:"\u0412\u0441\u0435";c[0].length&&(h.push(p+" - \u041e \u0437\u0434\u0440\u0430\u0432\u0438\u0438"),d.push(c),f.push([0])),u[0].length&&(h.push(p+" - \u041e \u0443\u043f\u043e\u043a\u043e\u0435\u043d\u0438\u0438"),d.push(u),f.push([0])),h.length>0&&o.addRequest(Iv.builder().setName(p).setBookNames(["\u0436\u0438\u0432","\u043f\u0440\u0435\u0444\u0438\u043a\u0441","\u0438\u043c\u044f"]).setPsalomName("").setAllBooksChapters(h).setAllBooks(d).setEmptyFirstLines(f).setShowLineIndexes(!1))}}onEditTitleInfo(){this.memorialsTitleInfoDlg.modalFlag=!0,this.memorialsTitleInfoDlg.currentName=this.uiConfig.ui.memorialsTitleRemark.getStringValue()}onEndTitleInfoDlg(){this.uiConfig.ui.memorialsTitleRemark.setStringValue(this.memorialsTitleInfoDlg.currentName),this.memorialsTitleInfoDlg.modalFlag=!1}getFilterClasses(o){let c={label:!0,"label-danger":!o.enabled&&!o.system,"label-success":o.enabled&&!o.system};return c["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,c}onDeleteCurrentPerson(){var o;this.personsClickHandler.person&&this.personsClickHandler.person.person&&(null===(o=this.memDataSvc.persons)||void 0===o||o.deletePerson(this.personsClickHandler.person.person),this.reload()),this.personDeleteDlg.modalFlag=!1}clearCurrentMemorial(o){let c=[];this.persons.forEach(u=>{u.person&&(u.person.tags=Do.removeTag(u.person.tags,this.currentMemorial),u.person.tags?this.memDataSvc.getPersons().save(-1,u.person,!0):c.push(u.person))}),this.memDataSvc.getPersons().deletePersons(c),o&&this.reload()}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(Ls),R(VL),R($L),R(pne),R(gne),R(mne),R(kf),R(HD),R(Rv),R(Do))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-persons"]],viewQuery:function(o,c){if(1&o&&ti(vze,5),2&o){let u;Vt(u=zt())&&(c.pagesView=u.first)}},inputs:{data:"data"},decls:151,vars:28,consts:[[3,"click",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange","click"],[1,"modal-title"],[1,"modal-body"],[3,"data"],["clrForm",""],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u043b\u0435\u0431\u043d\u0430","name","input",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["clrInput","","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","name","input",3,"ngModel","ngModelChange"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","singleMemorial",3,"ngModel","ngModelChange"],["type","checkbox","clrCheckbox","","value","singleMemorial","name","clearMemorial",3,"ngModel","disabled","ngModelChange"],["class","badge",4,"ngIf"],["type","checkbox","clrCheckbox","","value","mergeNames","name","mergeNames",3,"ngModel","ngModelChange"],[1,"clr-form"],["clrTextarea","","name","description","required","",3,"ngModel","ngModelChange"],[1,"clr-row"],[1,"clr-col-6","clr-hidden-sm-up"],["type","button",1,"btn","btn-link",3,"click"],["shape","recycle"],[1,"clr-hidden-md-down"],[1,"btn","btn-link"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b","accept",".xml,.json,.csv,.tsv,.txt",1,"button-input",3,"change"],["shape","upload"],[1,"clr-col-3","clr-hidden-xs-down"],[1,"clr-col-6"],["shape","ban"],[1,"clr-col-12"],["tpl1",""],["paramTemplateVerticalX",""],["paramTemplateVertical",""],["paramTemplateHorizontal",""],[3,"click"],[3,"enabled","name"],[1,"no-print","s0"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"clr-row","no-print","clr-hidden-xs-down",3,"hidden"],[1,"clr-col-2"],[1,"btn","btn-link","btn-block",3,"click"],["shape","add-text"],["shape","search"],["shape","import"],["shape","export"],["shape","window-close"],[1,"clr-row","no-print","clr-hidden-sm-up",3,"hidden"],[1,"clr-col-4"],["class","no-print",4,"ngIf"],["pagesView",""],[1,"no-print"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pageBreak","pageBreakBefore"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],["clrInput","","placeholder","\u0418\u043c\u044f","name","input",3,"ngModel","ngModelChange"],[1,"badge"],["class","pageBreakBefore",4,"ngIf"],[4,"ngIf"],[1,"pageBreakBefore"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"],["class","pageBreakBefore",4,"ngFor","ngForOf"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"ngClass"],["class","print-only",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"print-only"]],template:function(o,c){1&o&&(Z(0,wze,78,22,"div",0),M(1,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.personDetailsDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(2,"h3",2),ie(3,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u044b"),E(),M(4,"div",3),me(5,"app-person-details",4),E(),E(),M(6,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsTitleInfoDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(7,"h3",2),ie(8,"\u0422\u0435\u043c\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u043e\u043a"),E(),M(9,"div",3),M(10,"form",5),M(11,"clr-input-container"),M(12,"label"),ie(13,"\u0422\u0435\u043a\u0441\u0442:"),E(),M(14,"input",6),ee("ngModelChange",function(h){return c.memorialsTitleInfoDlg.currentName=h}),E(),M(15,"clr-control-helper"),ie(16,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: *\u041c\u043e\u043b\u0435\u0431\u0435\u043d, *\u041f\u0440\u0435\u0441\u0432\u044f\u0442\u043e\u0439 \u0411\u043e\u0433\u043e\u0440\u043e\u0434\u0438\u0446\u0435"),E(),E(),E(),E(),M(17,"div",7),M(18,"button",8),ee("click",function(){return c.memorialsTitleInfoDlg.modalFlag=!1}),ie(19,"\u041e\u0442\u043c\u0435\u043d\u0430"),E(),M(20,"button",9),ee("click",function(){return c.onEndTitleInfoDlg()}),ie(21,"Ok"),E(),E(),E(),M(22,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(23,"h3",2),ie(24),E(),M(25,"div",3),M(26,"form",5),M(27,"clr-input-container"),M(28,"label"),ie(29,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:"),E(),M(30,"input",10),ee("ngModelChange",function(h){return c.memorialsDlg.currentName=h}),E(),E(),E(),E(),M(31,"div",7),M(32,"button",8),ee("click",function(){return c.memorialsDlg.modalFlag=!1}),ie(33,"\u041e\u0442\u043c\u0435\u043d\u0430"),E(),M(34,"button",9),ee("click",function(){return c.memorialsDlg.modalAddingFlag?c.onAddNewMemorial():c.onChangeMemorial()}),ie(35,"Ok"),E(),E(),E(),M(36,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.personDeleteDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(37,"h3",2),ie(38,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438"),E(),M(39,"div",3),M(40,"p"),M(41,"button",11),me(42,"clr-icon",12),E(),ie(43),E(),E(),M(44,"div",7),M(45,"button",8),ee("click",function(){return c.personDeleteDlg.modalFlag=!1}),ie(46,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),E(),M(47,"button",13),ee("click",function(){return c.onDeleteCurrentPerson()}),ie(48,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),E(),E(),M(49,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsDeleteDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(50,"h3",2),ie(51,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u043e\u0447\u0438\u0441\u0442\u043a\u0430"),E(),M(52,"div",3),M(53,"p"),M(54,"button",11),me(55,"clr-icon",12),E(),ie(56),E(),E(),M(57,"div",7),M(58,"button",8),ee("click",function(){return c.memorialsDeleteDlg.modalFlag=!1}),ie(59,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),E(),M(60,"button",13),ee("click",function(){return c.onDeleteAllPersons()}),ie(61,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0451"),E(),M(62,"button",14),ee("click",function(){return c.onDeleteMemorial()}),ie(63,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),E(),E(),M(64,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsImportDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(65,"h3",2),ie(66,"\u0418\u043c\u043f\u043e\u0440\u0442 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),E(),M(67,"div",3),M(68,"clr-toggle-container",15),M(69,"label"),ie(70,"\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438:"),E(),M(71,"clr-toggle-wrapper"),M(72,"input",16),ee("ngModelChange",function(h){return c.allMemorialEnabled=h}),E(),M(73,"label"),ie(74,"\u0412\u0441\u0435"),E(),E(),Z(75,Sze,4,4,"clr-toggle-wrapper",17),E(),M(76,"clr-checkbox-container"),M(77,"clr-checkbox-wrapper"),M(78,"input",18),ee("ngModelChange",function(h){return c.memorialsImportDlg.singleMemorial=h}),E(),M(79,"label"),ie(80,"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a"),E(),E(),M(81,"clr-checkbox-wrapper"),M(82,"input",19),ee("ngModelChange",function(h){return c.memorialsImportDlg.clearMemorial=h}),E(),M(83,"label"),ie(84,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a "),Z(85,Tze,2,0,"span",20),E(),E(),M(86,"clr-checkbox-wrapper"),M(87,"input",21),ee("ngModelChange",function(h){return c.uiConfig.ui.mergeNameOnImport.rawValue=h}),E(),M(88,"label"),ie(89),E(),E(),E(),M(90,"form",22),M(91,"clr-textarea-container"),M(92,"label"),ie(93,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d:"),E(),M(94,"textarea",23),ee("ngModelChange",function(h){return c.memorialsImportDlg.text=h}),E(),M(95,"clr-control-helper"),ie(96,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u043f\u0430\u0442\u0440. \u041a\u0438\u0440\u0438\u043b\u043b (\u043f\u0430\u0442\u0440\u0438\u0430\u0440\u0445 \u041a\u0438\u0440\u0438\u043b\u043b)"),E(),M(97,"clr-control-error"),ie(98,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0451\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043f\u0443\u0441\u0442\u043e\u0439!"),E(),E(),E(),E(),M(99,"div",7),M(100,"div",24),M(101,"div",25),M(102,"button",26),ee("click",function(){return c.onClearImportPreview()}),me(103,"clr-icon",27),M(104,"span",28),ie(105," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),E(),M(106,"label",29),M(107,"input",30),ee("change",function(h){return c.onImportFile(h)}),E(),me(108,"clr-icon",31),E(),E(),M(109,"div",32),M(110,"button",26),ee("click",function(){return c.onClearImportPreview()}),me(111,"clr-icon",27),M(112,"span",28),ie(113," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),E(),E(),M(114,"div",32),M(115,"label",29),M(116,"input",30),ee("change",function(h){return c.onImportFile(h)}),E(),me(117,"clr-icon",31),E(),E(),M(118,"div",33),M(119,"button",8),ee("click",function(){return c.memorialsImportDlg.modalFlag=!1}),me(120,"clr-icon",34),E(),M(121,"button",14),ee("click",function(){return c.onImportMemorial()}),ie(122,"\u041e\u041a"),E(),E(),E(),E(),E(),M(123,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsExportDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(124,"h3",2),ie(125,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a"),E(),M(126,"div",3),ie(127," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430: "),E(),M(128,"div",7),M(129,"div",24),M(130,"div",35),M(131,"button",8),ee("click",function(){return c.onSaveAs("tsv")}),ie(132,"TSV"),E(),M(133,"button",8),ee("click",function(){return c.onSaveAs("xml")}),ie(134,"XML"),E(),M(135,"button",14),ee("click",function(){return c.onSaveAs("txt")}),ie(136,"TXT"),E(),E(),E(),E(),E(),M(137,"clr-modal",1),ee("clrModalOpenChange",function(h){return c.memorialsWaitingDlg.modalFlag=h})("click",function(h){return h.stopPropagation()}),M(138,"h3",2),ie(139,"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),E(),M(140,"div",3),me(141,"app-dynamic-spinner"),E(),me(142,"div",7),E(),Z(143,Eze,2,8,"ng-template",null,36,No),Z(145,Rze,4,4,"ng-template",null,37,No),Z(147,Hze,1,1,"ng-template",null,38,No),Z(149,Yze,2,1,"ng-template",null,39,No)),2&o&&(O("ngIf",c.isMemorialEnabled()),P(1),O("clrModalOpen",c.personDetailsDlg.modalFlag),P(4),O("data",c.personDetailsData),P(1),O("clrModalOpen",c.memorialsTitleInfoDlg.modalFlag),P(8),O("ngModel",c.memorialsTitleInfoDlg.currentName),P(6),O("disabled",!c.memorialsDlg.currentName),P(2),O("clrModalOpen",c.memorialsDlg.modalFlag),P(2),hi("",c.memorialsDlg.modalAddingFlag?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435"," \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430"),P(6),O("ngModel",c.memorialsDlg.currentName),P(4),O("disabled",!c.memorialsDlg.currentName),P(2),O("clrModalOpen",c.personDeleteDlg.modalFlag),P(7),hi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",c.personsClickHandler.person?c.personsClickHandler.person.name:"\u041e\u0448\u0438\u0431\u043a\u0430","?"),P(6),O("clrModalOpen",c.memorialsDeleteDlg.modalFlag),P(7),hi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c '",c.memorialsDeleteDlg.currentName?c.memorialsDeleteDlg.currentName:"\u041e\u0448\u0438\u0431\u043a\u0430","' \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a \u0438\u043b\u0438 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435?"),P(8),O("clrModalOpen",c.memorialsImportDlg.modalFlag),P(8),O("name","all")("value","all")("ngModel",c.allMemorialEnabled),P(3),O("ngForOf",c.memorialsImportDlg.preview),P(3),O("ngModel",c.memorialsImportDlg.singleMemorial),P(4),O("ngModel",c.memorialsImportDlg.clearMemorial)("disabled",!c.memorialsImportDlg.singleMemorial),P(3),O("ngIf",!c.memorialsImportDlg.singleMemorial),P(2),O("ngModel",c.uiConfig.ui.mergeNameOnImport.rawValue),P(2),en(c.uiConfig.ui.mergeNameOnImport.description),P(5),O("ngModel",c.memorialsImportDlg.text),P(29),O("clrModalOpen",c.memorialsExportDlg.modalFlag),P(14),O("clrModalOpen",c.memorialsWaitingDlg.modalFlag))},directives:[mn,vne,WD,GD,G1,R0,Bp,$1,W1,j1,Nv,Ts,Tp,Sp,Nu,wS,D0,Rr,aa,I1,Js,Rs,ku,jh,$h,mze,D4,SS,Xd,Ru,Zd,fi,z4,AS,jd,xS,YL,kl,Xn],styles:[".button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:7rem}.s0[_ngcontent-%COMP%]{font-size:.7rem!important;line-height:1.2rem!important}.left-space-0[_ngcontent-%COMP%]{margin-left:0!important}.right-space-0[_ngcontent-%COMP%]{margin-right:0!important}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class QL{constructor(){this.printOnly=!1}static builder(){return new QL}setPrintOnly(a){return this.printOnly=a,this}}class JL extends Pi{constructor(a,o,c,u,h,d){super("",u,h),this.genName=a,this.svgWidth=o,this.svgHeight=c,this.classes=d}static builder(){return new JL("",512,512,null,null,QL.builder())}setGenName(a){return this.genName=a,this}setSvgWidth(a){return this.svgWidth=a,this}setSvgHeight(a){return this.svgHeight=a,this}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}}let Xze=(()=>{class l{constructor(o){this.config=o}get svgData(){return this.data}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{"print-only":this.svgData.classes.printOnly}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-svg"]],inputs:{data:"data"},decls:1,vars:5,consts:[[3,"genName","svgWidth","svgHeight","type","ngClass"]],template:function(o,c){1&o&&me(0,"app-svg-js-image",0),2&o&&O("genName",c.genName)("svgWidth",c.svgWidth)("svgHeight",c.svgHeight)("type",512)("ngClass",c.getClasses())},directives:[kl,Xn],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function Zze(l,a){if(1&l&&(M(0,"span"),ie(1),E()),2&l){const o=X(2);P(1),en(o.text)}}function Kze(l,a){1&l&&me(0,"app-add-component",5),2&l&&O("component",a.$implicit)}function Qze(l,a){if(1&l&&(M(0,"div"),Z(1,Kze,1,1,"app-add-component",4),E()),2&l){const o=X(2);P(1),O("ngForOf",o.components)}}function Jze(l,a){if(1&l&&(M(0,"div",9),me(1,"app-add-component",5),E()),2&l){const o=a.$implicit;O("ngClass",X(3).getColClass(o)),P(1),O("component",o)}}function eUe(l,a){if(1&l&&(M(0,"div",6),M(1,"div",7),Z(2,Jze,2,2,"div",8),E(),E()),2&l){const o=X(2);P(2),O("ngForOf",o.components)}}function tUe(l,a){if(1&l){const o=gt();M(0,"div",1),ee("click",function(u){return Le(o),X().onClick(u)}),Z(1,Zze,2,1,"span",2),Z(2,Qze,2,1,"div",2),Z(3,eUe,3,1,"div",3),E()}if(2&l){const o=X();O("ngClass",o.getClasses()),P(1),O("ngIf",!o.components.length),P(1),O("ngIf",!o.isRow),P(1),O("ngIf",o.isRow)}}let eB=(()=>{class l{constructor(o){this.config=o,this.checkLater=tS.builder().setEnabled(!1)}get divData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.divData.components.length?this.divData.components[0]:null}get components(){return this.divData.components}get isRow(){return this.divData.classes.sClasses.findIndex((o,c,u)=>"clr-row"==o)>=0}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.config.post(()=>{this.checkLater.setConfig(this.config).setWaitingForSenderId(this.divData.waitingForSenderId),this.checkLater.checkEnabled()})}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){var o=this.divData.classes;let c={ftext:o.fineText,pageBreak:o.pageBreakAfter,pageBreakBefore:o.pageBreakBefore};return o.sClasses.filter(u=>"clr-row"!=u&&!u.startsWith("clr-col-")).forEach(u=>c[u]=!0),c}getColClass(o){let c={"clr-col":!0};return o.component===l&&o.data.classes.sClasses.filter(h=>h.startsWith("clr-col-")).forEach(h=>c[h]=!0),c}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-div"]],inputs:{data:"data"},decls:1,vars:1,consts:[[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],[4,"ngIf"],["class","clr-col-12",4,"ngIf"],[3,"component",4,"ngFor","ngForOf"],[3,"component"],[1,"clr-col-12"],[1,"clr-row"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,c){1&o&&Z(0,tUe,4,4,"div",0),2&o&&O("ngIf",c.checkLater.enabled)},directives:[mn,Xn,fi,Pl],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class tB{constructor(){this.fineText=!1,this.pageBreakBefore=!1,this.pageBreakAfter=!1,this.printOnly=!1,this.noPrint=!1,this.sClasses=[]}static builder(){return new tB}setFineText(a){return this.fineText=a,this}setPageBreakBefore(a){return this.pageBreakBefore=a,this}setPageBreakAfter(a){return this.pageBreakAfter=a,this}setPrintOnly(a){return this.printOnly=a,this}setNoPrint(a){return this.noPrint=a,this}addSClass(a){return this.sClasses.push(a),this}setSClasses(a){return this.sClasses=a,this}}class jD extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new jD("",null,null,tB.builder().setFineText(!0))}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}const nUe=function(l,a){return{"no-print":!0,alert:!0,"alert-warning":l,"alert-success":a,"bottom-top-space":!0}};function iUe(l,a){if(1&l){const o=gt();M(0,"div",1),M(1,"div",2),M(2,"div",3),M(3,"div",4),M(4,"clr-icon",5),ee("click",function(){return Le(o),X().toggleAudio()}),E(),E(),M(5,"span",6),ie(6),E(),E(),E(),M(7,"button",7),M(8,"clr-icon",5),ee("click",function(){return Le(o),X().autioSvc.control.next()}),E(),E(),M(9,"button",7),M(10,"clr-icon",8),ee("click",function(){return Le(o),X().autioSvc.control.close(!0)}),E(),E(),E()}if(2&l){const o=X();O("ngClass",ds(4,nUe,!o.autioSvc.control.isPlaying(),o.autioSvc.control.isPlaying())),P(4),et("shape",o.autioSvc.control.isPlaying()?"pause":"play"),P(2),en(o.autioSvc.control.currentName()),P(2),et("shape","step-forward")}}let rUe=(()=>{class l{constructor(o,c){this.config=o,this.autioSvc=c}get audioData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}toggleAudio(){this.autioSvc.control.isPlaying()?this.autioSvc.control.pause():this.autioSvc.control.resume()}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Rv))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-audio"]],inputs:{data:"data"},decls:1,vars:1,consts:[["role","alert",3,"ngClass",4,"ngIf"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon",3,"click"],[1,"alert-text"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close",3,"click"]],template:function(o,c){1&o&&Z(0,iUe,11,7,"div",0),2&o&&O("ngIf",c.autioSvc.control.isStarted())},directives:[mn,Xn,Ts,YS],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class nB{constructor(){}static builder(){return new nB}}class iB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u}static builder(){return new iB("",null,null,nB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}}function sUe(l,a){1&l&&me(0,"app-add-component",4),2&l&&O("component",X(2).$implicit.component)}function oUe(l,a){if(1&l&&(M(0,"clr-accordion-content"),Z(1,sUe,1,1,"app-add-component",3),E()),2&l){const o=X().$implicit;P(1),O("ngIf",o.component)}}function aUe(l,a){if(1&l&&(M(0,"clr-accordion-panel"),M(1,"clr-accordion-title"),ie(2),E(),Z(3,oUe,2,1,"clr-accordion-content",2),E()),2&l){const o=a.$implicit;P(2),en(o.title)}}let lUe=(()=>{class l{constructor(o){this.config=o}get accordionData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-accordion"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"],[4,"ngFor","ngForOf"],[4,"clrIfExpanded"],[3,"component",4,"ngIf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"clr-accordion",0),Z(1,aUe,4,1,"clr-accordion-panel",1),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("ngForOf",c.accordionData.items))},directives:[G1,R0,Xn,fi,Bp,$1,W1,aP,E4,j1,mn,Pl],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class rB{constructor(){}static builder(){return new rB}}class sB{constructor(a,o){this.title=a,this.component=o}static builder(){return new sB("",null)}setTitle(a){return this.title=a,this}setComponent(a){return this.component=a,this}}class oB extends Pi{constructor(a,o,c,u,h){super(a,o,c),this.classes=u,this.items=h}static builder(){return new oB("",null,null,rB.builder(),[])}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}addItem(a){return this.items.push(a),this}}class aB{constructor(){}static builder(){return new aB}}class lB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new lB("",null,null,aB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}let ud=(()=>{class l{constructor(o,c){this.http=o,this.config=c,this.persons=[],this.restPoint="/math",this.canSave=null,this.personSaved=new St,this.personsSubscribersMap=new Map}setCanSave(o){this.canSave=o}getRestPoint(o,c){return _r.merge(_r.merge(c||this.config.serviceAPIHost,this.restPoint),o)}getRestPointRaw(o,c){return _r.merge(c||this.config.serviceAPIHost,o)}mathSolve(o){const c={params:{}};return new Promise((u,h)=>{this.http.post(this.getRestPoint("/solve",null),o,c).pipe(Xi(Ei.handleError)).subscribe({next:d=>{u(BN.builder().setSuccess(!!d.success).setText(d.text))},error:d=>{h(null)}})})}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function cUe(l,a){1&l&&(M(0,"h5"),ie(1,"\u0420\u0435\u0448\u0435\u043d\u0438\u0435:"),E())}function uUe(l,a){if(1&l&&(M(0,"div",11),M(1,"div",6),me(2,"app-d3-svg",4),E(),E()),2&l){const o=a.$implicit,c=X();P(2),O("generator",c.generator)("d3Config",o)}}function hUe(l,a){if(1&l){const o=gt();M(0,"div",3),M(1,"button",12),ee("click",function(){Le(o);const u=X();return u.onSelectFormula(u.d3Configs[u.d3Configs.length-1])}),me(2,"clr-icon",13),ie(3," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443"),E(),E()}}let dUe=(()=>{class l{constructor(o,c,u){this.uiConfig=o,this.themes=c,this.mathSvc=u,this.generator=new ED,this.d3Configs=[],this.d3ConfigFormulaText=vg.builder(),this.solving=!1}get formulaText(){return this.uiConfig.ui.calculatorFormulaText.getStringValue()}set formulaText(o){this.uiConfig.ui.calculatorFormulaText.setStringValue(o),this.onUpdateFormulaTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateFormulaTextConfig()}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onMathSolved(o){let c=this.themes.nowIsDay(),u="#0e161b",h=c?"white":"lightgrey",d=c?h:u,f=c?u:h;try{this.d3Configs=[],(new xD).parse(o).forEach(m=>{let v=m.toString(),_=vg.builder().setColorBackground(d).setColorMain(f).setColorText(f).setColorLines(f).setLineWidth(1);_.addParam("\u0442\u0435\u043a\u0441\u0442",v),this.d3Configs.push(_)})}catch(p){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0444\u043e\u0440\u043c\u0443\u043b\u0435: "+o),console.log(p)}}getFormulaTextFormated(){let o=this.formulaText,c=!1,u=!1;for(let h=o.length-1;h>0;--h)switch(o.substring(h,h+1)){case".":if(c){h=0;break}c=!0;break;case";":u=!0,h=0;break;case"\r":case"\n":case"\t":case" ":break;default:h=0}return u||(o+=";"),c||(o+="."),o}getFormulaTextFormattedAndConverted(){let o=this.getFormulaTextFormated(),c=new xD,u=this.formulaText;try{let h=c.parse(o);h&&(u=h.toString())}catch(h){}return u}isFormulaTextValid(){let o=this.getFormulaTextFormated(),c=new xD;try{return!!c.parse(o)}catch(u){return!1}}onSolve(){this.solving=!0,this.mathSvc.mathSolve(this.getFormulaTextFormattedAndConverted()).then(o=>{this.solving=!1,this.onMathSolved(o&&o.success?o.text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439.")})}onUpdateFormulaTextConfig(){let o=this.themes.nowIsDay(),c="#0e161b",u=o?"white":"lightgrey",h=o?u:c,d=o?c:u,f=vg.builder().setColorBackground(h).setColorMain(d).setColorText(d).setColorLines(d).setLineWidth(1);f.addParam("\u0442\u0435\u043a\u0441\u0442",this.getFormulaTextFormattedAndConverted()),this.d3ConfigFormulaText=f,this.d3Configs=[]}onSelectFormula(o){this.formulaText=o.params.get("\u0442\u0435\u043a\u0441\u0442")}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(Ls),R(ud))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-calculator-view"]],inputs:{data:"data"},decls:19,vars:8,consts:[[3,"ngClass"],[1,"clr-form"],["clrTextarea","","name","description","required","",3,"ngModel","ngModelChange"],[1,"no-print"],[3,"generator","d3Config"],[1,"clr-row","no-print"],[1,"clr-col-12"],[1,"btn","btn-primary","btn-block",3,"disabled","click"],[4,"ngIf"],["class","clr-row",4,"ngFor","ngForOf"],["class","no-print",4,"ngIf"],[1,"clr-row"],["aria-label","arrow",1,"btn","btn-link","btn-block",3,"click"],["shape","arrow"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"form",1),M(2,"clr-textarea-container"),M(3,"label"),ie(4,"\u0424\u043e\u0440\u043c\u0443\u043b\u0430:"),E(),M(5,"textarea",2),ee("ngModelChange",function(h){return c.formulaText=h}),E(),M(6,"clr-control-helper"),ie(7,"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: integral(sin(x),x)"),E(),M(8,"clr-control-error"),ie(9,"\u0424\u043e\u0440\u043c\u0443\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043f\u0443\u0441\u0442\u043e\u0439!"),E(),E(),E(),M(10,"div",3),me(11,"app-d3-svg",4),E(),M(12,"div",5),M(13,"div",6),M(14,"button",7),ee("click",function(){return c.onSolve()}),ie(15,"\u0420\u0435\u0448\u0438\u0442\u044c"),E(),E(),E(),Z(16,cUe,2,0,"h5",8),Z(17,uUe,3,2,"div",9),Z(18,hUe,4,0,"div",10),E()),2&o&&(O("ngClass",c.getClasses()),P(5),O("ngModel",c.formulaText),P(6),O("generator",c.generator)("d3Config",c.d3ConfigFormulaText),P(3),O("disabled",c.solving||!c.isFormulaTextValid()),P(2),O("ngIf",c.d3Configs.length),P(1),O("ngForOf",c.d3Configs),P(1),O("ngIf",c.d3Configs.length))},directives:[Xn,Tp,Sp,Nu,z4,Rr,aa,AS,jd,Js,Rs,D4,xS,$te,mn,fi,Ts],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class cB{constructor(){}static builder(){return new cB}}class uB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new uB("",null,null,cB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}let yne=!1;let bne=!1;let gUe=(()=>{class l{constructor(o){this.themeSvc=o,this.loaded=!1,this.loadingFinished=new pt}finishLoading(){this.themeSvc.nowIsDay()?(()=>{if(yne)return;let l=window.monaco;null!=l&&(yne=!0,l.editor.defineTheme("myDayTheme",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#fafafa"}}),l.editor.setTheme("myDayTheme"))})():(()=>{if(bne)return;let l=window.monaco;null!=l&&(bne=!0,l.editor.defineTheme("myNightTheme",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#0e161b"}}),l.editor.setTheme("myNightTheme"))})(),this.loaded=!0,this.loadingFinished.next()}load(){const o="./assets/monaco-editor/min/vs";if("object"==typeof window.monaco)return void this.finishLoading();const c=()=>{window.require.config({paths:{vs:`${o}`}}),window.require(["vs/editor/editor.main"],()=>{this.finishLoading()})};if(window.require)c();else{const u=document.createElement("script");u.type="text/javascript",u.src=`${o}/loader.js`,u.addEventListener("load",c),document.body.appendChild(u)}}}return l.\u0275fac=function(o){return new(o||l)(Ie(Ls))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const mUe=["editorContainer"];let Cne=(()=>{class l{constructor(o,c){this.config=o,this.monacoEditorService=c,this._editorContainer=null,this.sText="",this.textChange=new St,this.editorOptionsDay={theme:"myDayTheme",language:"sql",minimap:{enabled:!1},lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0},this.editorOptionsNight={theme:"myNightTheme",language:"sql",minimap:{enabled:!1},lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0},this.codeEditorOptions={theme:"vs-dark",language:"json",automaticLayout:!0}}set text(o){this.sText!==o&&(this._editor&&this._editor.getModel().setValue(o),this.sText=o)}get monacoEditorData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}initMonaco(){this.monacoEditorService.loaded?(this._editor=monaco.editor.create(this._editorContainer.nativeElement,this.editorOptionsNight),this._editor.getModel().setValue(this.sText),this._editor.getModel().onDidChangeContent(o=>{this.emitTextChange(this._editor.getModel().getValue())})):this.monacoEditorService.loadingFinished.pipe(zd()).subscribe(()=>{this.initMonaco()})}get component(){return this.monacoEditorData.components.length?this.monacoEditorData.components[0]:null}get components(){return this.monacoEditorData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.initMonaco(),this.monacoEditorService.load()}getClasses(){return{"editor-container":!0,h100:!0}}emitTextChange(o){this.sText!==o&&(this.sText=o,this.textChange.emit(this.sText))}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(gUe))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-monaco-editor"]],viewQuery:function(o,c){if(1&o&&ti(mUe,7),2&o){let u;Vt(u=zt())&&(c._editorContainer=u.first)}},inputs:{data:"data",text:"text"},outputs:{textChange:"textChange"},decls:2,vars:1,consts:[[3,"ngClass"],["editorContainer",""]],template:function(o,c){1&o&&me(0,"div",0,1),2&o&&O("ngClass",c.getClasses())},directives:[Xn],styles:[".h100[_ngcontent-%COMP%]{height:calc(100vh - 140px)}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})(),vUe=(()=>{class l{constructor(o,c,u){this.uiConfig=o,this.themes=c,this.mathSvc=u,this.generator=new ED,this.solving=!1}get formulaText(){return this.uiConfig.ui.compilerSourceText.getStringValue()}set formulaText(o){this.uiConfig.ui.compilerSourceText.setStringValue(o),this.onUpdateSourceTextConfig()}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateSourceTextConfig()}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}isFormulaTextValid(){return!0}onRun(){this.solving=!0,this.solving=!1}onUpdateSourceTextConfig(){}onSelectFormula(o){this.formulaText=o.params.get("\u0442\u0435\u043a\u0441\u0442")}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(Ls),R(ud))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-compiler-view"]],inputs:{data:"data"},decls:6,vars:3,consts:[[3,"ngClass"],[3,"text","textChange"],[1,"clr-row","no-print"],[1,"clr-col-12"],[1,"btn","btn-primary","btn-block",3,"disabled","click"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"app-dynamic-monaco-editor",1),ee("textChange",function(h){return c.formulaText=h}),E(),M(2,"div",2),M(3,"div",3),M(4,"button",4),ee("click",function(){return c.onRun()}),ie(5,"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c"),E(),E(),E(),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("text",c.formulaText),P(3),O("disabled",c.solving||!c.isFormulaTextValid()))},directives:[Xn,Cne],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class hB{constructor(){}static builder(){return new hB}}class dB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new dB("",null,null,hB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}let _Ue=(()=>{class l{constructor(o,c,u){this.uiConfig=o,this.themes=c,this.mathSvc=u}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(o){this.uiConfig.ui.calendarText.setStringValue(o)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(Ls),R(ud))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-calendar-view"]],inputs:{data:"data"},decls:2,vars:1,consts:[[3,"ngClass"]],template:function(o,c){1&o&&(M(0,"div",0),ie(1," \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c.\n"),E()),2&o&&O("ngClass",c.getClasses())},directives:[Xn],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class yUe{constructor(a,o,c,u,h,d=null){this.name=a,this.description=o,this.object=c,this.fieldName=u,this.enabler=h,this.onChangeHandler=d}get value(){return this.object[this.fieldName]}set value(a){this.object[this.fieldName]!=a&&(this.object[this.fieldName]=a,this.changed())}get enabled(){return!this.enabler||!!this.enabler.value}changed(){!this.onChangeHandler||this.onChangeHandler()}}class $D{static getPasha(a,o=!0){let d=(a%19*19+15)%30,p=d+(a%4*2+a%7*4+6*d+6)%7,g=null;return g=p<=9?new Date(a,2,22+p):new Date(a,3,p-9),o&&g.setDate(g.getDate()+13),g}static getRelativePashaDayDate(a,o,c=!0){let u=$D.getPasha(a,c);return u.setDate(u.getDate()+o),u}static daysDiff(a,o){return Math.round((a.getTime()-o.getTime())/864e5)}}class Tg{constructor(a,o){this.rang=a,this.text=o,this.extraRang=0}static builder(){return new Tg(0,"")}setRang(a){return this.rang=a,this}setExtraRang(a){return this.extraRang=a,this}setText(a){return this.text=a,this}\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a=0){let o=Math.max(a,this.rang);return o>0?o:1}\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 6==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)||5==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 4==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 3==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0448\u0435\u0441\u0442\u0438\u0440\u0438\u0447\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 2==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0431\u0435\u0437\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u0447\u043d\u043e\u0433\u043e\u0417\u043d\u0430\u043a\u0430\u0421\u043b\u0443\u0436\u0431\u0430(a=0){return 1==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)||0==this.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a)}\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(a=0){let o="";return this.\u0431\u0434\u0435\u043d\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a)?o="{\u043a}":this.\u043f\u043e\u043b\u0438\u0435\u043b\u0435\u0439\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a)?o="{\u0437}":this.\u0441\u043b\u0430\u0432\u043e\u0441\u043b\u043e\u0432\u043d\u0430\u044f\u0421\u043b\u0443\u0436\u0431\u0430(a)&&(o="{\u0441}"),o}}let xne=(()=>{class l{constructor(o){this.cacheSvc=o,this.prazdniki=null,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u0412\u0435\u043b\u0438\u043a\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u041d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438="\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438",this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438="\u0414\u043e \u041f\u0430\u0441\u0445\u0438",this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438="\u041f\u043e\u0441\u043b\u0435 \u041f\u0430\u0441\u0445\u0438",this.\u0438\u043d\u044b\u0435="\u0418\u043d\u044b\u0435",this.\u0434\u043d\u0438\u041d\u0435\u0434\u0435\u043b\u0438=["","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431","\u0432\u0441","\u0432"]}load(){return new Promise(this.prazdniki?(o,c)=>{o(!0)}:(o,c)=>{let u=this.cacheSvc.getRestPoint("/calendar/prazdniki.txt",null);this.cacheSvc.getTextRestcallUrl(u,h=>{h?(this.prazdniki=JSON.parse(h),o(!0)):c(`Cann't load file: ${u}`)})})}getPrazdnikiPoDate(o,c){let u=null,h=0;for(;h<=8;++h)if(null!=o[h]){u=o[h];break}if(u)switch(h){case 0:break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:c.getDay()!==h%7&&(u=null);break;case 8:1==new Date(c.getFullYear(),1,29).getMonth()||(u=null);break;default:throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430.")}return u?u.map(d=>Tg.builder().setRang(d[0]).setText(d[1])):[]}getPrazdniki(o){return o?o.map(c=>Tg.builder().setRang(c[0]).setText(c[1])):[]}getPrazdnikiFor(o,c,u){let h=new Date(o,c,u-13),d=new Date(o,c,u),f=$D.getPasha(o),p=$D.daysDiff(d,f),g=[[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043d\u0435\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0438\u043d\u044b\u0435]].flatMap(m=>{let v=+m[0],b=this.prazdniki[m[1]][h.getMonth()];if(null==b)return[];let x=b[h.getDate()];return null==x?[]:this.getPrazdnikiPoDate(x,d).map(w=>w.setExtraRang(v))}).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u0434\u043e\u041f\u0430\u0441\u0445\u0438]].flatMap(m=>{let v=+m[0];if(p>=0)return[];let b=this.prazdniki[m[1]][-p];return null==b?[]:this.getPrazdniki(b).map(x=>x.setExtraRang(v))})).concat([[100,this.\u0432\u0435\u043b\u0438\u043a\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438],[0,this.\u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438+" - "+this.\u043f\u043e\u0441\u043b\u0435\u041f\u0430\u0441\u0445\u0438]].flatMap(m=>{let v=+m[0];if(p<0)return[];let b=this.prazdniki[m[1]][p];return null==b?[]:this.getPrazdniki(b).map(x=>x.setExtraRang(v))}));return g.sort((m,v)=>v.rang+v.extraRang-m.rang-m.extraRang),g}}return l.\u0275fac=function(o){return new(o||l)(Ie(ad))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class fB{constructor(){}static builder(){return new fB}}class qD extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.prazdniki=[]}static builder(){return new qD("",null,null,fB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setPrazdniki(a){return this.prazdniki=a,this}}class Lv{constructor(a,o,c,u,h,d){this.text=a,this.time=o,this.morningService=c,this.requiredService=u,this.selectedClerics=h,this.ispovedClerics=d}static builder(){return new Lv("","",!0,!1,"","")}setText(a){return this.text=a,this}setTime(a){return this.time=a,this}setMorningService(a){return this.morningService=a,this}setRequiredService(a){return this.requiredService=a,this}getNormalizedText(){return this.getNormalizedManualText(this.text)}getNormalizedTime(){return this.getNormalizedManualText(this.time)}getNormalizedManualText(a){let o=a;return this.morningService||o.includes("{\u0432}")||(o+="{\u0432}"),this.requiredService&&(o.includes("{\u0442}")||(o+="{\u0442}")),o}setSelectedClerics(a){return this.selectedClerics=a,this}setIspovedClerics(a){return this.ispovedClerics=a,this}}class pB{constructor(){}static builder(){return new pB}}class Dg extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.services=[]}static builder(){return new Dg("",null,null,pB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setServices(a){return this.services=a,this}}class _C{constructor(a,o){this.name=a,this.week=o}static builder(){return new _C("",[!1,!1,!1,!1,!1,!1,!1])}setName(a){return this.name=a,this}setWeek(a){return this.week=a,this}}class gB{constructor(){}static builder(){return new gB}}class YD extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.clerics=[]}static builder(){return new YD("",null,null,gB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setClerics(a){return this.clerics=a,this}}let wne=(()=>{class l{constructor(o,c,u){this.http=o,this.config=c,this.cacheSvc=u,this.names=[],this.restPoint="/calendar"}getRestPoint(o,c,u=null){return _r.merge(_r.merge(c||this.config.serviceAPIHost,u||this.restPoint),o)}getNames(o,c="calendar",u=null){const h={params:{}};return new Promise((d,f)=>{this.http.get(this.getRestPoint("/names",o,u),h).pipe(Xi(Ei.handleError)).subscribe({next:p=>d(p),error:p=>f(p)})})}getSource(o,c){const u={params:{_name:o}};return new Promise((h,d)=>{this.http.get(this.getRestPoint("/source",c),u).pipe(Xi(Ei.handleError)).subscribe({next:f=>h(f),error:f=>d(f)})})}getTextStr(o,c,u,h){let d=""+u;const f=_r.merge(_r.merge(o,c),d);this.cacheSvc.getText(f,h)}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on),Ie(ad))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class mB{constructor(){}static builder(){return new mB}}class vB extends Pi{constructor(a,o,c,u){super(a,o,c),this.config=u,this.useDefault=!1,this.object={},this.fieldName="name",this.description="\u0418\u043c\u044f",this.description2="",this.shapes=[],this.readonly=!1,this.command=null}static builder(){return new vB("",null,null,mB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setUseDefault(a){return this.useDefault=a,this}setObject(a){return this.object=a,this}setFieldName(a){return this.fieldName=a,this}setDescription(a){return this.description=a,this}setDescription2(a){return this.description2=a,this}setShapes(a){return this.shapes=a,this}setReadonly(a){return this.readonly=a,this}setCommand(a){return this.command=a,this}}function bUe(l,a){if(1&l){const o=gt();M(0,"button",4),ee("click",function(u){const d=Le(o).$implicit;return X(2).onCommand(u,d)}),me(1,"clr-icon"),E()}if(2&l){const o=a.$implicit;P(1),et("shape",o)}}function CUe(l,a){if(1&l){const o=gt();M(0,"clr-input-container"),M(1,"label"),ie(2),Z(3,bUe,2,1,"button",2),E(),M(4,"input",3),ee("ngModelChange",function(u){return Le(o),X().objectFieldName=u}),E(),E()}if(2&l){const o=X();P(2),en(o.description),P(1),O("ngForOf",o.shapes),P(1),O("readOnly",o.readonly)("placeholder",o.description2)("name",o.fieldName)("ngModel",o.objectFieldName)}}function xUe(l,a){if(1&l){const o=gt();M(0,"button",4),ee("click",function(u){const d=Le(o).$implicit;return X(2).onCommand(u,d)}),me(1,"clr-icon"),E()}if(2&l){const o=a.$implicit;P(1),et("shape",o)}}function wUe(l,a){if(1&l){const o=gt();M(0,"clr-input-container",5),M(1,"label"),ie(2),Z(3,xUe,2,1,"button",2),E(),M(4,"input",3),ee("ngModelChange",function(u){return Le(o),X().objectFieldName=u}),E(),E()}if(2&l){const o=X();P(2),hi("",o.description," "),P(1),O("ngForOf",o.shapes),P(1),O("readOnly",o.readonly)("placeholder",o.description2)("name",o.fieldName)("ngModel",o.objectFieldName)}}let Sne=(()=>{class l{constructor(o){this.config=o,this.data=vB.builder(),this.changed=new St}get textEditorData(){return this.data}get useDefault(){return this.textEditorData.useDefault}set useDefault(o){this.textEditorData.setUseDefault(o)}get description(){return this.textEditorData.description}set description(o){this.textEditorData.setDescription(o)}get description2(){return this.textEditorData.description2?this.textEditorData.description2:this.textEditorData.description}set description2(o){this.textEditorData.setDescription2(o)}get shapes(){return this.textEditorData.shapes}set shapes(o){this.textEditorData.setShapes(o)}get readonly(){return this.textEditorData.readonly}set readonly(o){this.textEditorData.setReadonly(o)}get object(){return this.textEditorData.object}set object(o){this.textEditorData.setObject(o)}get fieldName(){return this.textEditorData.fieldName}set fieldName(o){this.textEditorData.setFieldName(o)}set command(o){this.textEditorData.setCommand(o)}get objectFieldName(){return this.object[this.fieldName]}set objectFieldName(o){this.object[this.fieldName]=o,this.onChanged()}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onCommand(o,c){this.textEditorData.command&&this.textEditorData.command(this.object,this.fieldName,c),o.stopPropagation()}onChanged(){this.changed.emit(this.objectFieldName)}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-text-editor"]],inputs:{data:"data",useDefault:"useDefault",description:"description",description2:"description2",shapes:"shapes",readonly:"readonly",object:"object",fieldName:"fieldName",command:"command"},outputs:{changed:"changed"},decls:2,vars:2,consts:[[4,"ngIf"],["class","",4,"ngIf"],["class","btn btn-link btn-sx",3,"click",4,"ngFor","ngForOf"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"],[1,"btn","btn-link","btn-sx",3,"click"],[1,""]],template:function(o,c){1&o&&(Z(0,CUe,5,6,"clr-input-container",0),Z(1,wUe,5,6,"clr-input-container",1)),2&o&&(O("ngIf",c.useDefault),P(1),O("ngIf",!c.useDefault))},directives:[mn,D0,Rr,fi,Ts,aa,I1,Js,Rs],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class _B{constructor(){}static builder(){return new _B}}class yB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.week=[]}static builder(){return new yB("",null,null,_B.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setWeek(a){return this.week=a,this}}const SUe=function(l,a){return{btn:!0,"btn-primary":l,darkBtn:a}};function TUe(l,a){if(1&l){const o=gt();M(0,"button",2),ee("click",function(u){const d=Le(o).index;return X().onToggleWeekIndex(u,d)}),me(1,"clr-icon"),ie(2),E()}if(2&l){const o=a.$implicit,c=a.index,u=X();O("ngClass",ds(3,SUe,o,!o)),P(1),et("shape",o?"check":"times"),P(1),hi(" ",u.dayNames[c],"")}}let DUe=(()=>{class l{constructor(){this.data=yB.builder(),this.weekChanged=new St,this.dayNames=["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"]}get week(){return this.weekData.week}set week(o){this.weekData.week=o}get weekData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){for(;this.week.length<7;)this.week.push(!1)}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onToggleWeekIndex(o,c){o.stopPropagation(),this.week[c]=!this.week[c],this.weekChanged.emit(this.week)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-week"]],inputs:{data:"data",week:"week"},outputs:{weekChanged:"weekChanged"},decls:2,vars:2,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,TUe,3,6,"button",1),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("ngForOf",c.week))},directives:[Xn,fi,Ts],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();const MUe=function(){return["add-text","upload","download","times"]};function EUe(l,a){if(1&l){const o=gt();M(0,"div",15),M(1,"div",16),M(2,"app-dynamic-text-editor",17),ee("changed",function(u){return Le(o),X().onTextChanged(u)}),E(),E(),M(3,"app-dynamic-scheduler-week",18),ee("weekChanged",function(u){return Le(o),X().onWeekChanged(u)}),E(),E()}if(2&l){const o=a.$implicit,c=X();P(2),O("object",o)("fieldName","name")("description","\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a")("shapes",Ra(6,MUe))("command",c.onCommandServiceTogglePtr),P(1),O("week",o.week)}}function kUe(l,a){if(1&l){const o=gt();M(0,"button",19),ee("click",function(){return Le(o),X().onSaveServices()}),me(1,"clr-icon",20),ie(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),E()}2&l&&O("clrLoading",X().submitBtnState)}function AUe(l,a){if(1&l&&(M(0,"p"),ie(1),E()),2&l){const o=X();P(1),hi("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043c\u044f: ",o.modalDeleteService.name," ?")}}let IUe=(()=>{class l{constructor(o,c,u,h){this.uiConfig=o,this.config=c,this.themes=u,this.mathSvc=h,this.autoSave=!1,this.onSave=new St,this.onClear=new St,this.submitBtnState=Jr.DEFAULT,this.modalClearServicesFlag=!1,this.modalDeleteServicesFlag=!1,this.modalDeleteService=null,this.onCommandServiceTogglePtr=(d,f,p)=>this.onCommandServiceToggle(d,f,p)}get clerics(){return this.clericsData.clerics}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(o){this.uiConfig.ui.calendarText.setStringValue(o)}get clericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(o,c,u){if("name"==c)switch(u){case"upload":this.moveUp(o);break;case"download":this.moveDown(o);break;case"times":this.requestDeleteService(o);break;case"add-text":this.addNewAfterService(o)}}onAddNewService(){this.clerics.push(_C.builder()),this.startAutoSave()}onSaveServices(){this.onSave.emit(this.clericsData.clerics),this.submitBtnState=Jr.LOADING,this.config.post(()=>{this.submitBtnState=Jr.DEFAULT},2e3)}moveUp(o){let c=this.clerics.indexOf(o);c>0&&(this.clerics[c]=this.clerics[c-1],this.clerics[c-1]=o,this.startAutoSave())}moveDown(o){let c=this.clerics.indexOf(o);c+1<this.clerics.length&&(this.clerics[c]=this.clerics[c+1],this.clerics[c+1]=o,this.startAutoSave())}deleteCleric(o){if(null==o)return;let c=this.clerics.indexOf(o);c>=0&&(this.clerics.splice(c,1),this.startAutoSave())}addNewAfterService(o){let c=this.clerics.indexOf(o);c>=0&&c<this.clerics.length&&(this.clerics.splice(c+1,0,_C.builder()),this.startAutoSave())}onClearServices(){this.onClear.emit(this.clericsData.clerics),this.startAutoSave()}requestDeleteService(o){this.modalDeleteService=o,this.modalDeleteServicesFlag=!0}startAutoSave(){this.autoSave&&this.onSave.emit(this.clerics)}onTextChanged(o){this.startAutoSave()}onWeekChanged(o){this.startAutoSave()}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(on),R(Ls),R(ud))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-clerics"]],inputs:{data:"data",autoSave:"autoSave"},outputs:{onSave:"onSave",onClear:"onClear"},decls:31,vars:6,consts:[[3,"ngClass"],["class","clr-row cursor",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"clr-row","cursor"],[1,"clr-col-12","bottom-space"],[3,"object","fieldName","description","shapes","command","changed"],[3,"week","weekChanged"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,EUe,4,7,"div",1),M(2,"div",2),M(3,"button",3),ee("click",function(){return c.onAddNewService()}),me(4,"clr-icon",4),ie(5," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),E(),Z(6,kUe,3,1,"button",5),M(7,"button",6),ee("click",function(){return c.modalClearServicesFlag=!0}),me(8,"clr-icon",7),ie(9," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),E(),E(),M(10,"clr-modal",8),ee("clrModalOpenChange",function(h){return c.modalClearServicesFlag=h}),M(11,"h3",9),ie(12,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432"),E(),M(13,"div",10),M(14,"p"),ie(15,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0435\u0441\u044c \u0441\u043f\u0438\u0441\u043e\u043a?"),E(),E(),M(16,"div",11),M(17,"button",12),ee("click",function(){return c.onClearServices(),c.modalClearServicesFlag=!1}),ie(18,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),M(19,"button",13),ee("click",function(){return c.modalClearServicesFlag=!1}),ie(20,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),E(),E(),M(21,"clr-modal",8),ee("clrModalOpenChange",function(h){return c.modalDeleteServicesFlag=h}),M(22,"h3",9),ie(23,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438 \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0430"),E(),M(24,"div",10),Z(25,AUe,2,1,"p",14),E(),M(26,"div",11),M(27,"button",12),ee("click",function(){return c.deleteCleric(c.modalDeleteService),c.modalDeleteServicesFlag=!1}),ie(28,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),M(29,"button",13),ee("click",function(){return c.modalDeleteServicesFlag=!1}),ie(30,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),E(),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("ngForOf",c.clerics),P(5),O("ngIf",!c.autoSave),P(4),O("clrModalOpen",c.modalClearServicesFlag),P(11),O("clrModalOpen",c.modalDeleteServicesFlag),P(4),O("ngIf",c.modalDeleteService))},directives:[Xn,fi,Sne,DUe,Ts,mn,w4,C4,jh,$h],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();class bB{constructor(){}static builder(){return new bB}}class CB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.rang=1}static builder(){return new CB("",null,null,bB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setRang(a){return this.rang=a,this}}class xB{constructor(){this.printOnly=!1}static builder(){return new xB}setPrintOnly(a){return this.printOnly=a,this}}class wB extends Pi{constructor(a,o,c,u,h,d){super("",u,h),this.genName=a,this.svgWidth=o,this.svgHeight=c,this.classes=d,this.rang=0}static builder(){return new wB("",512,512,null,null,xB.builder())}setGenName(a){return this.genName=a,this}setSvgRangSignWidth(a){return this.svgWidth=a,this}setSvgRangSignHeight(a){return this.svgHeight=a,this}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}updateClasses(a){return a(this.classes),this}setRang(a){return this.rang=a,this}}function PUe(l,a){1&l&&me(0,"img",1),2&l&&O("src","./imsvg/"+(7-X().rang)+".svg",fy)}let OUe=(()=>{class l{constructor(o){this.config=o,this.data=wB.builder()}get svgData(){return this.data}get rang(){return this.svgData.rang}set rang(o){this.svgData.rang=o}get text(){return this.svgData&&this.svgData.text?this.svgData.text:""}get genName(){return this.svgData&&this.svgData.genName?this.svgData.genName:"Default"}get svgWidth(){return this.svgData&&this.svgData.svgWidth?this.svgData.svgWidth:512}get svgHeight(){return this.svgData&&this.svgData.svgHeight?this.svgData.svgHeight:512}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{"print-only":this.svgData.classes.printOnly}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-svg-rang-sign"]],inputs:{data:"data",rang:"rang"},decls:1,vars:1,consts:[["width","16px","height","16px",3,"src",4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(o,c){1&o&&Z(0,PUe,1,1,"img",0),2&o&&O("ngIf",c.rang>1)},directives:[mn],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();const FUe=function(l,a){return{btn:!0,"btn-primary":l,darkBtn:a}};function RUe(l,a){if(1&l){const o=gt();M(0,"button",2),ee("click",function(u){const d=Le(o).$implicit;return X().onSelectRang(u,d)}),me(1,"app-dynamic-svg-rang-sign",3),E()}if(2&l){const o=a.$implicit,c=X();O("ngClass",ds(2,FUe,c.isSelectedRang(o),!c.isSelectedRang(o))),P(1),O("rang",o.rang)}}class Ff{constructor(a){this.rang=a}static builder(){return new Ff(0)}setRang(a){return this.rang=a,this}}let Mne=(()=>{class l{constructor(){this.data=CB.builder(),this.rangChanged=new St,this.rangs=[Ff.builder().setRang(6),Ff.builder().setRang(5),Ff.builder().setRang(4),Ff.builder().setRang(3),Ff.builder().setRang(2),Ff.builder().setRang(1)],this.currentRang=this.rangs[0]}set rang(o){let c=this.rangs.find(u=>u.rang==o);this.currentRang=c||null}get rangsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}isSelectedRang(o){return this.currentRang===o}onSelectRang(o,c){o.stopPropagation(),this.currentRang=c,this.rangChanged.emit(c.rang)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-rangs"]],inputs:{data:"data",rang:"rang"},outputs:{rangChanged:"rangChanged"},decls:2,vars:2,consts:[[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"rang"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,RUe,2,5,"button",1),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("ngForOf",c.rangs))},directives:[Xn,fi,OUe],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();class SB{constructor(){}static builder(){return new SB}}class TB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.clerics=[]}static builder(){return new TB("",null,null,SB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setClerics(a){return this.clerics=a,this}}const Ene=function(l,a){return{btn:!0,"btn-primary":l,darkBtn:a}};function NUe(l,a){if(1&l){const o=gt();M(0,"button",1),ee("click",function(u){const d=Le(o).$implicit;return X().onToggleClericIndex(u,d)}),ie(1),E()}if(2&l){const o=a.$implicit,c=X();O("ngClass",ds(2,Ene,c.isClericSelected(o),!c.isClericSelected(o))),P(1),en(o.name)}}let LUe=(()=>{class l{constructor(){this.data=TB.builder(),this.info="\u0421\u043b\u0443\u0436\u0438\u0442",this.clericsChanged=new St}get clerics(){return this.selClericsData.clerics}set clerics(o){this.selClericsData.clerics=o}get selClericsData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}set text(o){this.data&&(this.data.text=o)}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onToggleClericIndex(o,c){o.stopPropagation();let u=this.text.split(","),h=u.filter(f=>f==c.name).length>0,d=u.filter(f=>f!=c.name).join(",");h||(d&&(d+=","),d+=c.name),this.selClericsData.text=d,this.clericsChanged.emit(this.selClericsData.text)}isClericSelected(o){return this.text.split(",").filter(c=>c==o.name).length>0}onToggleAllClerics(o){o.stopPropagation(),this.text=this.text?"":this.clerics.map(c=>c.name).join(","),this.clericsChanged.emit(this.selClericsData.text)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-select-clerics"]],inputs:{data:"data",info:"info",clerics:"clerics",text:"text"},outputs:{clericsChanged:"clericsChanged"},decls:7,vars:7,consts:[[3,"ngClass"],[3,"ngClass","click"],["shape","lightbulb"],[3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"h6"),M(2,"b"),ie(3),E(),E(),M(4,"button",1),ee("click",function(h){return c.onToggleAllClerics(h)}),me(5,"clr-icon",2),E(),Z(6,NUe,2,5,"button",3),E()),2&o&&(O("ngClass",c.getClasses()),P(3),en(c.info),P(1),O("ngClass",ds(4,Ene,!!c.text,!c.text)),P(2),O("ngForOf",c.clerics))},directives:[Xn,Ts,fi],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();function BUe(l,a){if(1&l){const o=gt();M(0,"app-dynamic-scheduler-rangs",17),ee("rangChanged",function(u){return Le(o),X().onSelectRang(u)}),E()}2&l&&O("rang",X().currentRang)}function VUe(l,a){if(1&l){const o=gt();M(0,"app-dynamic-scheduler-select-clerics",22),ee("clericsChanged",function(u){Le(o);const h=X().$implicit;return X().onClericsChanges(u,h)}),E()}if(2&l){const o=X().$implicit,c=X();O("text",o.selectedClerics)("clerics",c.clerics)}}const zUe=function(l,a){return{"clr-col-8":l,"clr-col-12":a}},kne=function(){return["add-text","upload","download","times"]},UUe=function(l,a){return{"clr-col-4":l,"clr-col-12":a}},Ane=function(l,a){return[l,a]};function HUe(l,a){if(1&l){const o=gt();M(0,"div",18),M(1,"div",0),M(2,"app-dynamic-text-editor",19),ee("changed",function(u){return Le(o),X().onTextChanged(u)}),E(),E(),M(3,"div",0),M(4,"app-dynamic-text-editor",19),ee("changed",function(u){return Le(o),X().onTextChanged(u)}),E(),E(),M(5,"div",20),Z(6,VUe,1,2,"app-dynamic-scheduler-select-clerics",21),E(),E()}if(2&l){const o=a.$implicit,c=X();P(1),O("ngClass",ds(13,zUe,!c.isVertical(),c.isVertical())),P(1),O("object",o)("fieldName","text")("description","\u0421\u043b\u0443\u0436\u0431\u0430")("shapes",Ra(16,kne))("command",c.onCommandServiceTogglePtr),P(1),O("ngClass",ds(17,UUe,!c.isVertical(),c.isVertical())),P(1),O("object",o)("fieldName","time")("description","\u0412\u0440\u0435\u043c\u044f")("shapes",ds(20,Ane,o.morningService?"sun":"moon",o.requiredService?"bell":"check"))("command",c.onCommandServiceTogglePtr),P(2),O("ngIf",c.clerics)}}function WUe(l,a){if(1&l){const o=gt();M(0,"app-dynamic-scheduler-select-clerics",22),ee("clericsChanged",function(u){Le(o);const h=X().$implicit;return X().onClericsChanges(u,h)}),E()}if(2&l){const o=X().$implicit,c=X();O("text",o.selectedClerics)("clerics",c.clerics)}}const Ine=function(){return{"clr-col-12":!0}};function GUe(l,a){if(1&l){const o=gt();M(0,"div",23),M(1,"div",0),M(2,"app-dynamic-text-editor",19),ee("changed",function(u){return Le(o),X().onTextChanged(u)}),E(),E(),M(3,"div",0),M(4,"app-dynamic-text-editor",19),ee("changed",function(u){return Le(o),X().onTextChanged(u)}),E(),E(),M(5,"div",20),Z(6,WUe,1,2,"app-dynamic-scheduler-select-clerics",21),E(),E()}if(2&l){const o=a.$implicit,c=X();P(1),O("ngClass",Ra(13,Ine)),P(1),O("object",o)("fieldName","text")("description","\u0421\u043b\u0443\u0436\u0431\u0430")("shapes",Ra(14,kne))("command",c.onCommandServiceTogglePtr),P(1),O("ngClass",Ra(15,Ine)),P(1),O("object",o)("fieldName","time")("description","\u0412\u0440\u0435\u043c\u044f")("shapes",ds(16,Ane,o.morningService?"sun":"moon",o.requiredService?"bell":"success-standard"))("command",c.onCommandServiceTogglePtr),P(2),O("ngIf",c.clerics)}}function jUe(l,a){if(1&l){const o=gt();M(0,"button",24),ee("click",function(){return Le(o),X().onSaveServices()}),me(1,"clr-icon",25),ie(2," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),E()}2&l&&O("clrLoading",X().submitBtnState)}function $Ue(l,a){if(1&l&&(M(0,"div",26),M(1,"div",27),ie(2),E(),M(3,"div",28),ie(4),E(),E()),2&l){const o=X();P(2),en(o.modalDeleteService.text),P(2),en(o.modalDeleteService.time)}}let qUe=(()=>{class l{constructor(o,c,u,h){this.uiConfig=o,this.config=c,this.themes=u,this.mathSvc=h,this.data=Dg.builder(),this.clerics=null,this.vertical=!1,this.singleRang=!1,this.autoSave=!1,this.onSave=new St,this.onClear=new St,this.onReset=new St,this.submitBtnState=Jr.DEFAULT,this.currentRang=1,this.modalClearServicesFlag=!1,this.modalDeleteServicesFlag=!1,this.modalDeleteService=null,this.onCommandServiceTogglePtr=(d,f,p)=>this.onCommandServiceToggle(d,f,p)}get services(){let o=this.currentRang-1;return null==this.servicesData.services[o]&&(this.servicesData.services[o]=[]),this.servicesData.services[o]}set services(o){this.servicesData.services[this.currentRang-1]=o}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(o){this.uiConfig.ui.calendarText.setStringValue(o)}get servicesData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}isVertical(){return this.vertical}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onCommandServiceToggle(o,c,u){if("time"==c)switch(u){case"moon":case"sun":o.morningService=!o.morningService;break;case"bell":case"check":o.requiredService=!o.requiredService}else if("text"==c)switch(u){case"upload":this.moveUp(o);break;case"download":this.moveDown(o);break;case"times":this.requestDeleteService(o);break;case"add-text":this.addNewAfterService(o)}this.onTextChanged("")}onSelectRang(o){this.currentRang=o}onAddNewService(){this.services.push(Lv.builder()),this.onTextChanged("")}onSaveServices(){this.onSave.emit(this.servicesData.services),this.submitBtnState=Jr.LOADING,this.config.post(()=>{this.submitBtnState=Jr.DEFAULT},2e3)}moveUp(o){let c=this.services.indexOf(o);c>0&&(this.services[c]=this.services[c-1],this.services[c-1]=o)}moveDown(o){let c=this.services.indexOf(o);c+1<this.services.length&&(this.services[c]=this.services[c+1],this.services[c+1]=o)}deleteService(o){if(null==o)return;let c=this.services.indexOf(o);c>=0&&this.services.splice(c,1),this.onTextChanged("")}addNewAfterService(o){let c=this.services.indexOf(o);c>=0&&c<this.services.length&&this.services.splice(c+1,0,Lv.builder())}onResetServices(){this.onReset.emit(this.servicesData.services)}onClearServices(){this.onClear.emit(this.servicesData.services)}requestDeleteService(o){this.modalDeleteService=o,this.modalDeleteServicesFlag=!0}onClericsChanges(o,c){c.setSelectedClerics(o),this.onTextChanged("")}onTextChanged(o){this.autoSave&&this.onSaveServices()}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(on),R(Ls),R(ud))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-services"]],inputs:{data:"data",clerics:"clerics",vertical:"vertical",singleRang:"singleRang",autoSave:"autoSave",services:"services"},outputs:{onSave:"onSave",onClear:"onClear",onReset:"onReset"},decls:37,vars:8,consts:[[3,"ngClass"],[3,"rang","rangChanged",4,"ngIf"],["class","clr-row cursor clr-hidden-xs-down",4,"ngFor","ngForOf"],["class","clr-row cursor clr-hidden-sm-up",4,"ngFor","ngForOf"],[1,"top-space"],[1,"btn","btn-primary",3,"click"],["shape","add-text"],["class","btn btn-success",3,"clrLoading","click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],["shape","flame"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","clr-row",4,"ngIf"],[3,"rang","rangChanged"],[1,"clr-row","cursor","clr-hidden-xs-down"],[3,"object","fieldName","description","shapes","command","changed"],[1,"clr-col-12","top-space"],[3,"text","clerics","clericsChanged",4,"ngIf"],[3,"text","clerics","clericsChanged"],[1,"clr-row","cursor","clr-hidden-sm-up"],[1,"btn","btn-success",3,"clrLoading","click"],["shape","floppy"],[1,"clr-row"],[1,"clr-col-8"],[1,"clr-col-4"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,BUe,1,1,"app-dynamic-scheduler-rangs",1),Z(2,HUe,7,23,"div",2),Z(3,GUe,7,19,"div",3),M(4,"div",4),M(5,"button",5),ee("click",function(){return c.onAddNewService()}),me(6,"clr-icon",6),ie(7," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),E(),Z(8,jUe,3,1,"button",7),M(9,"button",8),ee("click",function(){return c.modalClearServicesFlag=!0}),me(10,"clr-icon",9),ie(11," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),E(),E(),M(12,"clr-modal",10),ee("clrModalOpenChange",function(h){return c.modalClearServicesFlag=h}),M(13,"h3",11),ie(14,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0441\u043b\u0443\u0436\u0431"),E(),M(15,"div",12),M(16,"p"),ie(17,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043b\u0443\u0436\u0431\u044b \u0432\u0441\u0435\u0445 \u0437\u043d\u0430\u043a\u043e\u0432?"),E(),E(),M(18,"div",13),M(19,"button",14),ee("click",function(){return c.onResetServices(),c.modalClearServicesFlag=!1}),ie(20,"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"),E(),M(21,"button",14),ee("click",function(){return c.onClearServices(),c.modalClearServicesFlag=!1}),ie(22,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),M(23,"button",15),ee("click",function(){return c.modalClearServicesFlag=!1}),ie(24,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),E(),E(),M(25,"clr-modal",10),ee("clrModalOpenChange",function(h){return c.modalDeleteServicesFlag=h}),M(26,"h3",11),ie(27,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u0443\u0436\u0431\u044b"),E(),M(28,"div",12),M(29,"p"),ie(30,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0431\u0443?"),E(),Z(31,$Ue,5,2,"div",16),E(),M(32,"div",13),M(33,"button",14),ee("click",function(){return c.deleteService(c.modalDeleteService),c.modalDeleteServicesFlag=!1}),ie(34,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),M(35,"button",15),ee("click",function(){return c.modalDeleteServicesFlag=!1}),ie(36,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),E(),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("ngIf",!c.singleRang),P(1),O("ngForOf",c.services),P(1),O("ngForOf",c.services),P(5),O("ngIf",!c.autoSave),P(4),O("clrModalOpen",c.modalClearServicesFlag),P(13),O("clrModalOpen",c.modalDeleteServicesFlag),P(6),O("ngIf",c.modalDeleteService))},directives:[Xn,mn,Mne,fi,Sne,LUe,Ts,w4,C4,jh,$h],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.vertical-center[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),l})();class yC{constructor(a,o,c,u){this.open=a,this.text=o,this.color=c,this.tag=u}setOpen(a){return this.open=a,this}setText(a){return this.text=a,this}setColor(a){return this.color=a,this}setTag(a){return this.tag=a,this}static builder(){return new yC(!1,"","",null)}}let One=(()=>{class l{constructor(o){this.uiConfig=o,this.calendarScheduler=[],this.calendarIntervals=""}saveMonth(o,c,u){let h=[],d=f=>{let p="";return"blue"==f?p="B":"green"==f?p="G":"red"==f&&(p="R"),p};for(let f=0;f<1;f++){let p=o[f];for(let g=0;g<p.length;g++){let m=p[g];if(m.text){let v=d(m.color);h[32+g]=v}}}for(let f=1;f<o.length;f++){let p=o[f];for(let g=0;g<p.length;g++){let m=p[g];if(m.text){let v=d(m.color);h[+m.text]=v}}}this.calendarScheduler[c]||(this.calendarScheduler[c]=[]),this.calendarScheduler[c][u]=h,this.forceSave()}getMonthsDaysCount(o,c){return new Date(o,(c+1)%12,0).getDate()}createMonth(o,c){let u=y=>{let b="";return y?"R"==y?b="red":"G"==y?b="green":"B"==y&&(b="blue"):b="",b},h=[],d=this.getMonthsDaysCount(c,o),f=this.calendarScheduler[c],p=f?f[o]:[];p||(p=[]);let g=[],v=7;h.push(["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"].map((y,b)=>yC.builder().setText(y).setColor((y=>{let b=p[y],x="";return b&&(x=u(b)),x})(32+b))));let _=1;{let b=new Date(c,o,1).getDay();0==b&&(b+=7);for(let x=1;x<b;x++)g.push(yC.builder());_=b-1,v=Math.ceil((d+_)/7)+2}for(let y=1;y<=d;y+=7)for(let b=0;b<7;b++)if(y+b<=d){let C=new Date(c,o,y+b).getDay();0==C&&(C+=7);let w=p[y+b];w=u(w),g.push(yC.builder().setText(""+(y+b)).setColor(w)),7==g.length&&(h.push(g),g=[])}return g.length&&h.push(g),h}dateLessOrEqual(o,c,u,h,d,f){return o<h||!(o>h)&&(c<d||!(c>d)&&u<f)}isInInterval(o,c,u){let h=c+1,d=this.calendarIntervals.split("\n"),f=!1;return d.forEach(p=>{try{let g=p.split("\t");if(g.length>=3){let m=g[1].split(/[\\/\.\-]/),v=g[2].split(/[\\/\.\-]/);if(this.dateLessOrEqual(+m[2],+m[1],+m[0],+v[2],+v[1],+v[0])){let _=this.dateLessOrEqual(+m[2],+m[1],+m[0],o,h,u),y=this.dateLessOrEqual(o,h,u,+m[2],+m[1],+m[0]),b=this.dateLessOrEqual(o,h,u,+v[2],+v[1],+v[0]),x=this.dateLessOrEqual(+v[2],+v[1],+v[0],o,h,u);(_||!_&&!y)&&(b||!b&&!x)&&(f=!0)}}}catch(g){}}),f}isLiturgiaFound(o,c,u){if(!this.isInInterval(o,c,u))return!0;let h=this.calendarScheduler[o];if(!h)return!0;let d=h?h[c]:[];if(!d)return!0;let f=d[u];return"B"==f||"G"==f}forceSave(){}}return l.\u0275fac=function(o){return new(o||l)(Ie(Gn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function YUe(l,a){if(1&l&&(M(0,"div",4),me(1,"app-svg-js-image",3),E()),2&l){const o=X();P(1),O("data",o.svgDateData)}}const Fne=function(l,a){return{"clr-col-4":l,"clr-col-6":a}};let XUe=(()=>{class l{constructor(o,c,u,h,d){this.uiConfig=o,this.config=c,this.themes=u,this.mathSvc=h,this.calendarSvc=d,this.svgMonthData=El.builder().setGenName("this").setType(114),this.svgYearData=El.builder().setGenName("this").setType(114),this.svgDateData=El.builder().setGenName("this").setType(114),this.change=new St,this.dateChangedEnabled=!0,this.showDates=!1,this.useUniqueDate=!1,this.uniqueDateString="",this.oldUniqueDateString=null}get calendarText(){return this.uiConfig.ui.calendarCurrentDate.getStringValue()}set calendarText(o){this.uiConfig.ui.calendarCurrentDate.setStringValue(o)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}get sCurrentDate(){let o=this.useUniqueDate?this.uniqueDateString:this.calendarText;return o!==this.oldUniqueDateString&&(this.oldUniqueDateString=o,this.config.post(()=>{this.ngOnInitDirect()},10)),o}set sCurrentDate(o){this.useUniqueDate?this.uniqueDateString=o:this.calendarText=o,this.oldUniqueDateString=o}get sCurrentDateValidString(){let o=this.sCurrentDate;if(!o){let c=new Date;o=`${c.getDate()}.${c.getMonth()+1}.${c.getFullYear()}`}return o}get currentDate(){let u=+this.sCurrentDateValidString.split(/[\\/\.\-]/)[0],h=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);return u>h&&(u=h),u}set currentDate(o){let c=this.sCurrentDateValidString.split(/[\\/\.\-]/),u=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex);this.sCurrentDate=`${o<=u?o:u}.${c[1]}.${c[2]}`,this.changed()}get currentMonthIndex(){return+this.sCurrentDateValidString.split(/[\\/\.\-]/)[1]-1}set currentMonthIndex(o){let c=this.sCurrentDateValidString.split(/[\\/\.\-]/),u=+c[0],h=this.calendarSvc.getMonthsDaysCount(this.currentYear,o);u=u<=h?u:h,this.sCurrentDate=`${u}.${o+1}.${c[2]}`,this.changed()}validateYear(o){let c=+o,u=(new Date).getFullYear();return Number.isNaN(c)&&(c=u),(+c+10<u||+c-10>u)&&(c=u-10),+c}get currentYear(){let o=this.sCurrentDateValidString.split(/[\\/\.\-]/);return+this.validateYear(+o[2])}set currentYear(o){let c=this.sCurrentDateValidString.split(/[\\/\.\-]/),u=+c[0];o=this.validateYear(o);let h=this.calendarSvc.getMonthsDaysCount(o,this.currentMonthIndex);u=u<=h?u:h,this.sCurrentDate=`${u}.${c[1]}.${o}`,this.changed()}ngOnInit(){this.ngOnInitDirect()}ngOnInitDirect(){let o=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"].map((p,g)=>Sf.builder().setName(p).setTag(g));this.svgMonthData=El.builder().setGenerator((new uD).setTheme(this.themes.nowIsDay()?_s.Light3:_s.Dark3).setCommands(o,o[this.currentMonthIndex]).setOnCommandHandler(p=>{this.currentMonthIndex=p.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114);let c=[],u=this.currentYear;for(let p=-15;p<=15;p++)c.push(u+p);let d=15,f=c.map((p,g)=>(p==u&&(d=g),Sf.builder().setName(""+p).setTag(p)));this.svgYearData=El.builder().setGenerator((new uD).setTheme(this.themes.nowIsDay()?_s.Light3:_s.Dark3).setCommands(f,f[15]).setOnCommandHandler(p=>{this.currentYear=p.tag}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114),this.reloadDates()}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}reloadDates(){if(!this.showDates)return;let o=this.calendarSvc.getMonthsDaysCount(this.currentYear,this.currentMonthIndex),c=[];for(let u=1;u<=o;u++)c.push(Sf.builder().setName(""+u).setTag(u));this.svgDateData=El.builder().setGenerator((new uD).setTheme(this.themes.nowIsDay()?_s.Light3:_s.Dark3).setCommands(c,c[this.currentDate-1]).setOnCommandHandler((u,h)=>{this.dateChangedEnabled=!1,this.currentDate=u.tag,this.dateChangedEnabled=!0}).setAutoClickOnChange(!0).setShadowEnabled(!1)).setGenName("this").setType(114)}sendChanged(){this.change.emit(this.sCurrentDateValidString)}changed(){this.dateChangedEnabled&&this.reloadDates(),this.sendChanged()}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(on),R(Ls),R(ud),R(One))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-calendar"]],inputs:{data:"data",showDates:"showDates",useUniqueDate:"useUniqueDate",uniqueDateString:"uniqueDateString"},outputs:{change:"change"},decls:6,vars:11,consts:[[1,"clr-row"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[3,"data"],[1,"clr-col-4"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,YUe,2,1,"div",1),M(2,"div",2),me(3,"app-svg-js-image",3),E(),M(4,"div",2),me(5,"app-svg-js-image",3),E(),E()),2&o&&(P(1),O("ngIf",c.showDates),P(1),O("ngClass",ds(5,Fne,c.showDates,!c.showDates)),P(1),O("data",c.svgMonthData),P(1),O("ngClass",ds(8,Fne,c.showDates,!c.showDates)),P(1),O("data",c.svgYearData))},directives:[mn,kl,Xn],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.inline[_ngcontent-%COMP%]{display:inline-block}"]}),l})();function ZUe(l,a){1&l&&me(0,"img",6),2&l&&O("src","./imsvg/"+(7-X().$implicit.rang)+".svg",fy)}function KUe(l,a){if(1&l){const o=gt();M(0,"div",2),ee("click",function(){const h=Le(o).$implicit;return X().onSelectPrazdnik(h)}),M(1,"div",3),M(2,"span",4),ie(3,"\xa0"),Z(4,ZUe,1,1,"img",5),ie(5,"\xa0"),E(),ie(6),E(),E()}if(2&l){const o=a.$implicit;P(4),O("ngIf",o.rang>1),P(2),en(o.text)}}let QUe=(()=>{class l{constructor(o,c,u){this.uiConfig=o,this.themes=c,this.mathSvc=u,this.onSelected=new St}get formulaText(){return this.uiConfig.ui.calendarText.getStringValue()}set formulaText(o){this.uiConfig.ui.calendarText.setStringValue(o)}get prazdnkikiData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onSelectPrazdnik(o){this.onSelected.emit(o)}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(Ls),R(ud))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-prazdniki"]],inputs:{data:"data"},outputs:{onSelected:"onSelected"},decls:2,vars:2,consts:[[3,"ngClass"],["class","clr-row cursor",3,"click",4,"ngFor","ngForOf"],[1,"clr-row","cursor",3,"click"],[1,"clr-col-12"],[1,"label","label-info"],["width","16px","height","16px",3,"src",4,"ngIf"],["width","16px","height","16px",3,"src"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,KUe,7,2,"div",1),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("ngForOf",c.prazdnkikiData.prazdniki))},directives:[Xn,fi,mn],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();function JUe(l,a){if(1&l){const o=gt();M(0,"clr-radio-wrapper"),M(1,"input",35),ee("ngModelChange",function(u){return Le(o),X().currentSettingsName=u}),E(),M(2,"label"),ie(3),E(),E()}if(2&l){const o=a.$implicit,c=X();P(1),O("name","settings")("value",o.name)("ngModel",c.currentSettingsName),P(2),en(o.name)}}function eHe(l,a){if(1&l){const o=gt();M(0,"button",36),ee("click",function(u){return Le(o),X().onDeleteCurrentSettings(u)}),ie(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c "),E()}}function tHe(l,a){if(1&l){const o=gt();M(0,"clr-accordion-content"),M(1,"app-dynamic-scheduler-clerics",37),ee("onSave",function(u){return Le(o),X().onSaveClerics(u)})("onClear",function(u){return Le(o),X().onClearClerics(u)}),E(),E()}if(2&l){const o=X();P(1),O("data",o.clerics)("autoSave",!0)}}function nHe(l,a){if(1&l){const o=gt();M(0,"clr-accordion-content"),M(1,"app-dynamic-scheduler-services",38),ee("onSave",function(u){return Le(o),X().onSaveServices(u)})("onClear",function(u){return Le(o),X().onClearServices(u,!0)})("onReset",function(u){return Le(o),X().onClearServices(u,!1)}),E(),E()}if(2&l){const o=X();P(1),O("data",o.services)("autoSave",!0)}}function iHe(l,a){if(1&l){const o=gt();M(0,"div",44),M(1,"div",45),M(2,"form",46),M(3,"div",47),M(4,"textarea",75),ee("ngModelChange",function(u){return Le(o).$implicit.text=u}),E(),E(),M(5,"span",49),ie(6),E(),E(),E(),E()}if(2&l){const o=a.$implicit;P(4),O("ngModel",o.text),P(2),en(o.info)}}function rHe(l,a){if(1&l){const o=gt();M(0,"div",44),M(1,"div",45),M(2,"form",46),M(3,"div",47),M(4,"textarea",76),ee("ngModelChange",function(u){return Le(o).$implicit.text=u}),E(),E(),M(5,"span",49),ie(6),E(),E(),E(),E()}if(2&l){const o=a.$implicit;P(4),O("ngModel",o.text),P(2),en(o.info)}}function sHe(l,a){if(1&l){const o=gt();M(0,"div",44),M(1,"div",45),M(2,"form",46),M(3,"div",47),M(4,"textarea",77),ee("ngModelChange",function(u){return Le(o).$implicit.text=u}),E(),E(),M(5,"span",49),ie(6),E(),E(),E(),E()}if(2&l){const o=a.$implicit;P(4),O("ngModel",o.text),P(2),en(o.info)}}function oHe(l,a){if(1&l){const o=gt();M(0,"clr-accordion-content"),M(1,"div",39),M(2,"div",40),M(3,"div",41),M(4,"span"),M(5,"app-dynamic-scheduler-calendar",42),ee("change",function(u){return Le(o),X().onCalendarChanged(u)}),E(),E(),E(),E(),M(6,"div",43),M(7,"div",44),M(8,"div",45),M(9,"form",46),M(10,"div",47),M(11,"textarea",48),ee("ngModelChange",function(u){return Le(o),X().textDay.text=u}),E(),E(),M(12,"span",49),ie(13),E(),E(),E(),E(),E(),M(14,"div",50),M(15,"div",44),M(16,"div",45),M(17,"form",46),M(18,"div",47),M(19,"textarea",51),ee("ngModelChange",function(u){return Le(o),X().textHoliday.text=u}),E(),E(),M(20,"span",49),ie(21),E(),E(),E(),E(),E(),M(22,"div",45),M(23,"app-dynamic-scheduler-services",52),ee("onSave",function(u){return Le(o),X().onSaveDayServices(u)})("onClear",function(u){return Le(o),X().onClearDayServices(u)}),E(),E(),E(),M(24,"div",53),M(25,"div",45),M(26,"div",41),M(27,"span"),M(28,"app-dynamic-scheduler-calendar",42),ee("change",function(u){return Le(o),X().onCalendarChanged(u)}),E(),E(),E(),E(),M(29,"div",40),M(30,"div",44),M(31,"div",45),M(32,"form",46),M(33,"div",47),M(34,"textarea",54),ee("ngModelChange",function(u){return Le(o),X().textDay.text=u}),E(),E(),M(35,"span",49),ie(36),E(),E(),E(),E(),E(),M(37,"div",40),M(38,"div",44),M(39,"div",45),M(40,"form",46),M(41,"div",47),M(42,"textarea",55),ee("ngModelChange",function(u){return Le(o),X().textHoliday.text=u}),E(),E(),M(43,"span",49),ie(44),E(),E(),E(),E(),E(),M(45,"div",45),M(46,"app-dynamic-scheduler-services",56),ee("onSave",function(u){return Le(o),X().onSaveDayServices(u)})("onClear",function(u){return Le(o),X().onClearDayServices(u)}),E(),E(),E(),M(47,"div",57),M(48,"div",45),M(49,"div",41),M(50,"span"),M(51,"app-dynamic-scheduler-calendar",42),ee("change",function(u){return Le(o),X().onCalendarChanged(u)}),E(),E(),E(),E(),M(52,"div",45),M(53,"div",44),M(54,"div",45),M(55,"form",46),M(56,"div",47),M(57,"textarea",58),ee("ngModelChange",function(u){return Le(o),X().textDay.text=u}),E(),E(),M(58,"span",49),ie(59),E(),E(),E(),E(),E(),M(60,"div",45),M(61,"div",44),M(62,"div",45),M(63,"form",46),M(64,"div",47),M(65,"textarea",59),ee("ngModelChange",function(u){return Le(o),X().textHoliday.text=u}),E(),E(),M(66,"span",49),ie(67),E(),E(),E(),E(),E(),M(68,"div",45),M(69,"app-dynamic-scheduler-services",56),ee("onSave",function(u){return Le(o),X().onSaveDayServices(u)})("onClear",function(u){return Le(o),X().onClearDayServices(u)}),E(),E(),E(),M(70,"div",60),M(71,"div",61),M(72,"div",44),M(73,"div",45),M(74,"div",7),M(75,"app-dynamic-scheduler-rangs",62),ee("rangChanged",function(u){return Le(o),X().onSelectDayRang(u)}),E(),E(),M(76,"div",63),M(77,"app-dynamic-scheduler-prazdniki",64),ee("onSelected",function(u){return Le(o),X().onSelectPrazdnik(u)}),E(),E(),E(),E(),Z(78,iHe,7,2,"div",65),M(79,"div",66),M(80,"div",45),M(81,"button",67),ee("click",function(){return Le(o),X().modalClearSchedulerFlag=!0}),ie(82,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),E(),E(),E(),M(83,"div",68),M(84,"div",44),M(85,"div",45),M(86,"div",7),M(87,"app-dynamic-scheduler-rangs",62),ee("rangChanged",function(u){return Le(o),X().onSelectDayRang(u)}),E(),E(),M(88,"div",69),M(89,"app-dynamic-scheduler-prazdniki",64),ee("onSelected",function(u){return Le(o),X().onSelectPrazdnik(u)}),E(),E(),E(),E(),Z(90,rHe,7,2,"div",65),M(91,"div",66),M(92,"div",45),M(93,"button",70),ee("click",function(){return Le(o),X().modalClearSchedulerFlag=!0}),ie(94,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),E(),E(),E(),M(95,"div",71),Z(96,sHe,7,2,"div",65),M(97,"div",66),M(98,"div",45),M(99,"button",70),ee("click",function(){return Le(o),X().modalClearSchedulerFlag=!0}),ie(100,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),E(),E(),E(),M(101,"div",72),me(102,"app-svg-js-image",73),E(),M(103,"div",74),me(104,"app-svg-js-image",73),E(),E(),E()}if(2&l){const o=X();P(5),O("showDates",!0)("uniqueDateString",o.currentDate)("useUniqueDate",!0),P(6),O("ngModel",o.textDay.text),P(2),en(o.textDay.info),P(6),O("ngModel",o.textHoliday.text),P(2),en(o.textHoliday.info),P(2),O("data",o.dayServices)("singleRang",!0)("clerics",o.clerics.clerics)("autoSave",!0),P(5),O("showDates",!0)("uniqueDateString",o.currentDate)("useUniqueDate",!0),P(6),O("ngModel",o.textDay.text),P(2),en(o.textDay.info),P(6),O("ngModel",o.textHoliday.text),P(2),en(o.textHoliday.info),P(2),O("data",o.dayServices)("singleRang",!0)("vertical",!0)("clerics",o.clerics.clerics)("autoSave",!0),P(5),O("showDates",!0)("uniqueDateString",o.currentDate)("useUniqueDate",!0),P(6),O("ngModel",o.textDay.text),P(2),en(o.textDay.info),P(6),O("ngModel",o.textHoliday.text),P(2),en(o.textHoliday.info),P(2),O("data",o.dayServices)("singleRang",!0)("vertical",!0)("clerics",o.clerics.clerics)("autoSave",!0),P(6),O("rang",o.dayRang),P(2),O("data",o.prazdnikiData),P(1),O("ngForOf",o.editors),P(9),O("rang",o.dayRang),P(2),O("data",o.prazdnikiData),P(1),O("ngForOf",o.editors),P(6),O("ngForOf",o.editors),P(6),O("svgWidth",512)("svgHeight",512)("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",512)("schedulerText",o.createScheduler())("startPageIndex",0)("showFooter",!0),P(2),O("svgWidth",512)("svgHeight",512)("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",512)("schedulerText",o.createScheduler())("startPageIndex",0)("showFooter",!0)}}function aHe(l,a){if(1&l){const o=gt();M(0,"div"),M(1,"app-svg-js-image",19),ee("pagesCount",function(u){return Le(o),X().setPagesCount(u)})("svg",function(u){const d=Le(o).$implicit;return X().saveSvg(u,d)}),E(),E()}if(2&l){const o=a.$implicit,c=X();P(1),O("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",1)("schedulerText",c.createScheduler(!0))("logoText",c.fullSchedulerInfoFlag?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")("startPageIndex",o)("showFooter",!1)}}function lHe(l,a){if(1&l){const o=gt();M(0,"button",34),ee("click",function(){return Le(o),X().onSaveCurrentSettings()}),ie(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),E()}}const cHe=function(){return{alert:!0,"alert-warning":!1,"alert-success":!0,"top-space":!1}};class Rf{constructor(a,o,c){this.info=o,this.onChange=c,this.sText=""}static builder(){return new Rf("","",null)}changed(){this.onChange&&this.onChange()}get text(){return this.sText}set text(a){this.setText(a)}setText(a,o=!0){return this.sText!=a&&(this.sText=a,o&&this.changed()),this}setInfo(a){return this.info=a,this}setOnChange(a){return this.onChange=a,this}}class XD{constructor(a,o,c,u,h,d,f){this.\u0440\u0430\u043d\u0433=a,this.\u0434\u0435\u043d\u044c=o,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=c,this.\u0441\u043b\u0443\u0436\u0431\u0430=u,this.\u0432\u0440\u0435\u043c\u044f=h,this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=d,this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=f}static \u043d\u043e\u0432\u044b\u0439(){return new XD(1,"","","","",[],"")}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(a){return this.\u0440\u0430\u043d\u0433=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(a){return this.\u0434\u0435\u043d\u044c=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(a){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(a){return this.\u0441\u043b\u0443\u0436\u0431\u0430=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(a){return this.\u0432\u0440\u0435\u043c\u044f=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(a){return this.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(a){return this.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=a,this}}class Rne{constructor(a,o){this.config=a,this.onUpdate=o,this.id=0,this.calling=0}nextId(){return++this.id,this}changed(){return this.calling&&this.requestForUpdate(),this}requestForUpdate(){this.nextId();let a=this.id;if(!this.calling)return++this.calling,this.config.post(()=>{a==this.id&&this.onUpdate?(this.onUpdate(),--this.calling):(--this.calling,this.requestForUpdate())},3e3),this}}let uHe=(()=>{class l{constructor(o,c,u,h,d,f,p){this.uiConfig=o,this.config=c,this.themes=u,this.mathSvc=h,this.ks=d,this.calendarSettingsSvc=f,this.calendarPrazdnikiSvc=p,this.extraPages=[],this.days=[],this.clerics=YD.builder(),this.services=Dg.builder(),this.dayServices=Dg.builder(),this.dayRang=1,this.fullSchedulerInfoFlag=!0,this.textDay=Rf.builder().setText("1{\u0437}").setInfo("\u0414\u0435\u043d\u044c").setOnChange(()=>this.onTextChanged()),this.textHoliday=Rf.builder().setText("\u0421\u0412\u0422. \u041f\u0415\u0422\u0420\u0410, \u041c\u0418\u0422\u0420. \u041a\u0418\u0415\u0412\u0421\u041a\u041e\u0413\u041e,{\u0437}\n\u041c\u041e\u0421\u041a\u041e\u0412\u0421\u041a\u041e\u0413\u041e \u0418 \u0412\u0421\u0415\u042f \u0420\u0423\u0421\u0418,{\u0437}\n\u0427\u0423\u0414\u041e\u0422\u0412\u041e\u0420\u0426\u0410{\u0437}").setInfo("\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a").setOnChange(()=>this.onTextChanged()),this.textService=Rf.builder().setText("\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f{\u0437}\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f{\u0437}\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421").setInfo("\u0421\u043b\u0443\u0436\u0431\u0430").setOnChange(()=>this.onTextChanged()),this.textTime=Rf.builder().setText("8.40{\u0437}\n{1}\n17.00").setInfo("\u0412\u0440\u0435\u043c\u044f").setOnChange(()=>this.onTextChanged()),this.textHeader=Rf.builder().setText("\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n\u042f \u041d \u0412 \u0410 \u0420 \u042c{\u043a}").setInfo("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a").setOnChange(()=>this.onTextChanged()),this.textFooter=Rf.builder().setText("{1}\n\u0414\u043e\u0440\u043e\u0433\u0438\u0435 \u0431\u0440\u0430\u0442\u044c\u044f \u0438 \u0441\u0435\u0441\u0442\u0440\u044b!\n\u0422\u0410\u0418\u041d\u0421\u0422\u0412\u041e \u0418\u0421\u041f\u041e\u0412\u0415\u0414\u0418\n\u0441\u043e\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0432 \u043d\u0430\u0448\u0435\u043c \u0445\u0440\u0430\u043c\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u0435\u0447\u0435\u0440\u043d\u0435\u0433\u043e \u0431\u043e\u0433\u043e\u0441\u043b\u0443\u0436\u0435\u043d\u0438\u044f\n\u0438\u043b\u0438 \u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u043c \u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u043c.\n\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u0441\u043b\u0443\u0436\u0438\u0442, \u043c\u043e\u0436\u043d\u043e \u0437\u0430 \u0441\u0432\u0435\u0447\u043d\u044b\u043c \u044f\u0449\u0438\u043a\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\n\u0442\u0435\u043b. +7 (495) 322-223").setInfo("\u041f\u043e\u0434\u0432\u0430\u043b").setOnChange(()=>this.onTextChanged()),this.currentDate="01.02.2022",this.prazdnikiData=qD.builder(),this.editors=[this.textHeader,this.textFooter],this.requestForGeneratingScheduler=!1,this.generatingScheduler=!1,this.schedulerPagesCount=0,this.shortScheduler="01.01.2022\r\n==\r\n{1}\r\n==\r\n{1}",this.fullScheduler="01.01.2022\r\n==\r\n{1}\r\n==\r\n{1}",this.updater=null,this.dateUpdater=null,this.modalClearSchedulerFlag=!1,this.modalSaveSettingsFlag=!1,this.modalDeleteSettingsFlag=!1,this.modalAddSettingsFlag=!1,this.settings=[],this.pCurrentSettingsName=new yUe("\u0418\u043c\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a","\u0438\u043c\u044f",this,"currentSettingsName",null),this.svgs=null,this.onTextChangedEnabled=!0;let g=new Date;this.currentDate=g.getDate()+"."+(g.getMonth()+1)+"."+g.getFullYear(),this.updater=new Rne(this.config,()=>this.generateAllSchedulers()),this.dateUpdater=new Rne(this.config,()=>this.modalClearSchedulerFlag=!0)}get currentSettingsName(){return this.uiConfig.ui.schedulerCurrentSettingsName.getStringValue()}set currentSettingsName(o){this.uiConfig.ui.schedulerCurrentSettingsName.setStringValue(o),this.setCurrentSettings(o)}get formulaText(){return this.uiConfig.ui.schedulerSourceText.getStringValue()}set formulaText(o){this.uiConfig.ui.schedulerSourceText.setStringValue(o)}get calcData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.calcData.components.length?this.calcData.components[0]:null}get components(){return this.calcData.components}currentDayOfMonth(){return+this.currentDate.split(".")[0]}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onLoadSettingsDefault()}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}setPagesCount(o){this.extraPages=[];for(let c=1;c<o;c++)this.extraPages.push(c);this.schedulerPagesCount=o}onCalendarChanged(o){if(this.currentDate==o)return;let c=this.currentDate.split("."),u=o.split(".");this.currentDate=o,this.config.post(()=>{this.startEditDate(),this.requestClearScheduler(c[1]!=u[1]||c[2]!=u[2])},10)}onTextChanged(o=!1){if(!this.onTextChangedEnabled)return;let c=this.days[this.currentDayOfMonth()-1];c&&(c.\u0440\u0430\u043d\u0433=this.dayRang,c.\u0434\u0435\u043d\u044c=this.textDay.text,c.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a=this.textHoliday.text,c.\u0441\u043b\u0443\u0436\u0431\u0430=this.textService.text,c.\u0432\u0440\u0435\u043c\u044f=this.textTime.text,this.onDayServicesSync()),o?this.updater&&this.updater.onUpdate():this.updater&&this.updater.requestForUpdate()}createScheduler(o=!1){return o?this.fullScheduler:this.shortScheduler}generateAllSchedulers(){this.generatingScheduler?this.requestForGeneratingScheduler=!0:(this.generatingScheduler=!0,this.shortScheduler=this.generateSchedulers(),this.fullScheduler=this.generateSchedulers(!0),this.uiConfig.ui.schedulerText.setStringValue(this.fullScheduler),this.svgs=[],this.schedulerPagesCount=0)}convertAllClerics(o){let c=["\u043a","\u0441","\u0437","\u0444","\u043f","\u043c","\u043b","\u0440"];return o.split("\n").map(u=>u.trim()).map(u=>{let h=u.split(",").map(f=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(f,"")),d=0;return h.length&&this.clerics.clerics.forEach((f,p)=>{f.name==h[0]&&(d=p)}),h.length>1&&h.length==this.clerics.clerics.length?"\u0412\u0421\u0415{\u043a}":this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(u,"")+"{"+c[(1+d)%c.length]+"}"}).join("\r\n")}removeUnneededServices(o,c=""){let u=(c||o).split("\n");return o.split("\n").map(h=>h.trim()).filter((h,d)=>!!this.fullSchedulerInfoFlag||!u[d].includes("{\u0442}")).join("\r\n")}generateSchedulers(o=!1,c=!0){let u=this.currentDate;return u+="\r\n=====================\r\n",u+=this.textHeader.text,u+="\r\n=====================\r\n",o?u+=this.days.map(h=>c&&!h.\u0441\u043b\u0443\u0436\u0431\u0430?"":h.\u0440\u0430\u043d\u0433+"\r\n---------------------\r\n"+h.\u0434\u0435\u043d\u044c+"\r\n---------------------\r\n"+h.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a.toUpperCase()+"\r\n---------------------\r\n"+this.removeUnneededServices(h.\u0441\u043b\u0443\u0436\u0431\u0430)+"\r\n---------------------\r\n"+this.removeUnneededServices(h.\u0432\u0440\u0435\u043c\u044f)+"\r\n---------------------\r\n"+this.removeUnneededServices(this.convertAllClerics(h.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438),h.\u0432\u0440\u0435\u043c\u044f)+"\r\n=====================\r\n").reduce((h,d)=>h+d,""):(u+=this.dayRang,u+="\r\n---------------------\r\n",u+=this.textDay.text,u+="\r\n---------------------\r\n",u+=this.textHoliday.text,u+="\r\n---------------------\r\n",u+=this.textService.text,u+="\r\n---------------------\r\n",u+=this.textTime.text,u+="\r\n---------------------\r\n",u+=this.convertAllClerics(this.getDayClerics()),u+="\r\n=====================\r\n"),u+=this.textFooter.text,u}requestClearScheduler(o=!0){o?this.dateUpdater&&this.dateUpdater.requestForUpdate():this.dateUpdater&&this.dateUpdater.changed()}onClearScheduler(){this.calendarPrazdnikiSvc.load().then(o=>{this.onClearSchedulerRaw()})}breakLines(o,c){let h=o.split(" "),d="",f=0;for(let p=0;p<h.length;++p){f>=39&&(d+="\r\n",f=0);let g=h[p];g.length+f+(f>0?1:0)>39?0==f?(d+=c,d+=g,d+="\r\n",f=0):(d+="\r\n"+c,d+=g,f=g.length):(f>0?(d+=" ",f+=1):d+=c,d+=g,f+=g.length)}return d}\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(o,c){let u=/\{[\u043a\u041a\u0441\u0421\u0437\u0417\u0444\u0424\u043f\u041f\u043c\u041c\u043b\u041b\u0440\u0420]\}/g;return o.split("\r\n").map(h=>h.includes("\u0442")?h:h.replace(u,"")).map(h=>h+(h.includes("\u0442")?"":c)).join("\r\n")}getClericsForDayOfWeek(o){return this.clerics.clerics.filter(u=>u.week[o]).map(u=>u.name).join(",")}getRangServices(o){let c=this.services.services[o-1];return null==c&&(c=[]),c}getServiceColor(o,c){return o.requiredService?"{\u043f}":c}onClearSchedulerRaw(){let o=this.currentDate.split("."),u=+o[1],h=+o[2];this.days=[];for(let f=1;f<=31;f++){let p=new Date;if(p.setDate(1),p.setFullYear(h),p.setMonth(u-1,f),p.getMonth()+1!=u)break;let g=p.getDay(),v=f+"\r\n"+["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"][g],_=this.calendarPrazdnikiSvc.getPrazdnikiFor(h,u-1,f),y=_.length?_[0]:Tg.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430"),b=0==g?6:0,x=y.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(b),C=this.breakLines(y.text,x),w=this.getRangServices(y.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(b)),S=this.getClericsForDayOfWeek(g?g-1:g+6),D=new Date;D.setDate(1),D.setFullYear(h),D.setMonth(u-1,f+1);let T=D.getDay(),A=this.calendarPrazdnikiSvc.getPrazdnikiFor(h,D.getMonth(),D.getDate()),N=0==T?6:0,k=(A.length?A[0]:Tg.builder().setRang(1).setText("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0430")).\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(N),F=this.getRangServices(y.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(N)),B=w.filter(q=>q.morningService).map(q=>q.getNormalizedText()+this.getServiceColor(q,x)).map(q=>q||"{1}").concat(F.filter(q=>!q.morningService).map(q=>q.getNormalizedText()+this.getServiceColor(q,k)).map(q=>q||"{1}")).join("\r\n"),V=w.filter(q=>q.morningService).map(q=>q.getNormalizedTime()+this.getServiceColor(q,x)).map(q=>q||"{1}").concat(F.filter(q=>!q.morningService).map(q=>q.getNormalizedTime()+this.getServiceColor(q,k)).map(q=>q||"{1}")).join("\r\n");v=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(v,x);let $=V.split("\n").map(q=>S).join("\r\n");this.days.push(XD.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(y.rang).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(v).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(C).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(B).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(V).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438(_).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432($))}this.textHeader.setText(`\u0420\u0410\u0421\u041f\u0418\u0421\u0410\u041d\u0418\u0415 \u0411\u041e\u0413\u041e\u0421\u041b\u0423\u0416\u0415\u041d\u0418\u0419{\u043a}\n${["\u042f \u041d \u0412 \u0410 \u0420 \u042c","\u0424 \u0415 \u0412 \u0420 \u0410 \u041b \u042c","\u041c \u0410 \u0420 \u0422","\u0410 \u041f \u0420 \u0415 \u041b \u042c","\u041c \u0410 \u0419","\u0418 \u042e \u041d \u042c","\u0418 \u042e \u041b \u042c","\u0410 \u0412 \u0413 \u0423 \u0421 \u0422","\u0421 \u0415 \u041d \u0422 \u042f \u0411 \u0420 \u042c","\u041e \u041a \u0422 \u042f \u0411 \u0420 \u042c","\u041d \u041e \u042f \u0411 \u0420 \u042c","\u0414 \u0415 \u041a \u0410 \u0411 \u0420 \u042c"][u-1]}{\u043a}`,!1),this.config.post(()=>this.startEditDate(!0))}parserScheduler(o){this.svgs=[];let c=o.split(/==+/).map(u=>u.trim());this.currentDate=c[0],this.textHeader.setText(c[1],!1),this.textFooter.setText(c[c.length-1],!1),this.days=[];for(let u=2;u+1<c.length;++u){let d=c[u].split(/--+/),f=p=>p<d.length?d[p].trim():"";this.days.push(XD.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0420\u0430\u043d\u0433(+f(0)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0414\u0435\u043d\u044c(f(1)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u0430\u0437\u0434\u043d\u0438\u043a(f(2)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u043b\u0443\u0436\u0431\u0443(f(3)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0412\u0440\u0435\u043c\u044f(f(4)).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u043e\u0432(f(5)))}this.startEditDate()}startEditDate(o=!1){let c=this.days[this.currentDayOfMonth()-1];this.dayRang=c.\u0440\u0430\u043d\u0433,this.textDay.setText(c?c.\u0434\u0435\u043d\u044c:"",!1),this.textHoliday.setText(c?c.\u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a:"",!1),this.textService.setText(c?c.\u0441\u043b\u0443\u0436\u0431\u0430:"",!1),this.textTime.setText(c?c.\u0432\u0440\u0435\u043c\u044f:"",!1);let u=this.currentDate.split("."),h=+u[0],d=+u[1],f=+u[2];this.calendarPrazdnikiSvc.load().then(p=>{let g=this.calendarPrazdnikiSvc.getPrazdnikiFor(f,d-1,h);this.prazdnikiData=qD.builder().setPrazdniki(g)}),this.onDayServicesSync(),this.onTextChanged(o)}onDayServicesSync(){let o=this.days[this.currentDayOfMonth()-1],c=o.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438.split("\n").map(f=>this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(f,"")).map(f=>f.trim()).map(f=>"\u0412\u0421\u0415"!=f?f:this.clerics.clerics.map(p=>p.name).join(",")),u=o.\u0432\u0440\u0435\u043c\u044f.split("\n").map(f=>f.trim());this.dayServices.services=[o.\u0441\u043b\u0443\u0436\u0431\u0430.split("\n").map(f=>f.trim()).map((f,p)=>Lv.builder().setText(f).setTime((f=>f<u.length?u[f]:"")(p)).setMorningService(!f.includes("{\u0432}")).setRequiredService(f.includes("{\u0442}")).setSelectedClerics((f=>f<c.length?c[f]:"")(p)))]}onPrint(){window.print()}setCurrentSettings(o){let c=this.settings.find(u=>u.name==o);!c||this.setCurrentSettingsDirect(c)}setCurrentSettingsDirect(o){this.parserScheduler(o.text)}getAllCurrentSettings(){let o={};return o.text=this.generateSchedulers(!0,!1),o}settingsFromString(o){try{return JSON.parse(o)}catch(c){}return[]}onSaveCurrentSettings(o=!0){let c=this.getAllCurrentSettings();c.name=this.pCurrentSettingsName.value;let u=!1;for(let h=0;h<this.settings.length;h++)this.settings[h].name==c.name&&(this.settings[h]=c,u=!0);!u&&o&&this.settings.push(c),this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.modalSaveSettingsFlag=!1}onLoadSettingsDefault(){this.config.post(()=>{this.onLoadSettingsDefaultRaw()})}onLoadSettingsDefaultRaw(){this.settings=this.settingsFromString(this.uiConfig.ui.schedulerAllVariants.getStringValue());let o="",c=!1;this.settings.forEach(u=>{u.name==this.currentSettingsName&&(c=!0),!o&&u.name&&(o=u.name)}),!c&&o&&(this.currentSettingsName=o),this.settings&&0!=this.settings.length?this.setCurrentSettings(this.currentSettingsName):this.onClearScheduler(),this.onLoadServicesOrDefault(),this.onLoadClericsOrDefault()}onLoadEmptyServices(){this.services=Dg.builder().setServices([]),this.onSaveServices(this.services.services)}onLoadServicesOrDefault(o=!1){let c=this.uiConfig.ui.schedulerServices.getStringValue();(o||!c)&&(c="\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0415\u0427\u0415\u0420\u041d\u042f. \u0423\u0422\u0420\u0415\u041d\u042f. 1 \u0427\u0410\u0421|17.00|\u0432\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|7.40|\u0443\n\u041c\u043e\u043b\u0435\u0431\u0435\u043d. \u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n==\n\u0412\u0421\u0415\u041d\u041e\u0429\u041d\u041e\u0415 \u0411\u0414\u0415\u041d\u0418\u0415|17.00|\u0432\n\u0412\u043e\u0434\u043e\u0441\u0432\u044f\u0442\u043d\u044b\u0439 \u043c\u043e\u043b\u0435\u0431\u0435\u043d.|8.00|\u0443\n\u0427\u0410\u0421\u042b. \u041b\u0418\u0422\u0423\u0420\u0413\u0418\u042f|8.40|\u0443\n\u041b\u0438\u0442\u0438\u044f||\u0443\n\u0422\u0440\u0435\u0431\u043d\u044b\u0439||\u0432\u0442\n    "),this.services=Dg.builder().setServices(this.parserServices(c)),this.onSaveServices(this.services.services)}onLoadClericsOrDefault(o=!1){let c=this.uiConfig.ui.schedulerClerics.getStringValue();(o||!c)&&(c="\u043e. \u0418\u043c\u044f\u0420\u0435\u043a"),this.clerics=YD.builder().setClerics(this.parserClerics(c))}onDeleteCurrentSettings(o){this.modalDeleteSettingsFlag=!0}onDeleteCurrentSettingsDirect(o){let c=this.pCurrentSettingsName.value;for(let u=0;u<this.settings.length;u++)if(this.settings[u].name==c){this.settings.splice(u,1);break}this.uiConfig.ui.schedulerAllVariants.setStringValue(JSON.stringify(this.settings)),this.currentSettingsName="",this.onLoadSettingsDefault(),this.modalDeleteSettingsFlag=!1}onAddAllSettingsDirect(o){this.calendarSettingsSvc.getNames("","scheduler","/scheduler").then(c=>{let u=c.names;if(this.settings=[],null!=u&&u.length>0&&u[0].names.length>0){let h=d=>{d<u.length?this.calendarSettingsSvc.getSource(u[d].names[0],"").then(f=>{if(f){let p={};p.text=f,p.name=u[d].name,this.settings.push(p)}h(d+1)}):(this.onSaveCurrentSettings(!1),this.onLoadSettingsDefault(),this.modalAddSettingsFlag=!1)};h(0)}else this.modalAddSettingsFlag=!1})}onSave(o){this.modalSaveSettingsFlag=!0}onExport(o){let c=this.getAllCurrentSettings().text;const u=(new Date).toISOString().split("T")[0];if(this.config.isPlatformAndroid())this.ks.addTempFile("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.txt",c).then(d=>{rd.startDownload(d.fileName,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${u}.txt`)});else{const d=new TextEncoder,f=new Blob([d.encode(c)],{type:"octet/stream"});rd.saveData(f,`\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f.${u}.txt`)}}onImport(o){0!==o.target.files.length&&this.onImportFile(o.target.files[0])}onImportFile(o){if(!o)return;const c=new FileReader;c.onload=u=>{try{if(!c.result)throw new Error("FileReader is null.");let h=c.result.toString();this.parserScheduler(h)}catch(h){this.config.addAlert(mr.of("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0444\u0430\u0439\u043b: "+h,"OK",30))}},c.readAsText(o)}onSaveSvg(o=1){null==this.svgs||this.svgs.filter(c=>!!c).length==this.extraPages.length+1||o<=3&&this.config.post(()=>this.onSaveSvg(o+1),1e3)}saveSvg(o,c){if(null!=this.svgs){for(;c+1>this.svgs.length;)this.svgs.push("");this.svgs[c]=o,this.svgs.filter(u=>!!u).length>=this.schedulerPagesCount&&(this.generatingScheduler=!1,this.requestForGeneratingScheduler&&(this.requestForGeneratingScheduler=!1,this.generateAllSchedulers()))}}removeDayTask(o,c){return o.split("\n").map(h=>h.trim()).filter(h=>c==h.includes("{\u0432}")).join("\r\n")}updateRangServices(o,c){this.textService.text=this.replaceServices(this.textService.text,!0,o,c,h=>h.text),this.textTime.text=this.replaceServices(this.textTime.text,!0,o,c,h=>h.time);let u=this.currentDayOfMonth()-1;if(u>0){let h=this.days[u-1];h.\u0441\u043b\u0443\u0436\u0431\u0430=this.replaceServices(h.\u0441\u043b\u0443\u0436\u0431\u0430,!1,o,c,d=>d.text),h.\u0432\u0440\u0435\u043c\u044f=this.replaceServices(h.\u0432\u0440\u0435\u043c\u044f,!1,o,c,d=>d.time)}}onSelectPrazdnik(o){let c=this.currentDate.split("."),u=+c[0],h=+c[1],d=+c[2],f=new Date;f.setDate(1),f.setFullYear(d),f.setMonth(h-1,u);let g=0==f.getDay()?6:0,m=o.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(g),v=this.breakLines(o.text,m);this.textHoliday.setText(v),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,m),this.dayRang=o.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(g),this.updateRangServices(o,g),this.onTextChanged()}parserServices(o){return o.split(/==+/).map(h=>h.trim()).filter(h=>!!h).map(h=>h.split("\n").map(d=>d.trim()).filter(d=>!!d).map(d=>{let f=d.split("|");return Lv.builder().setText(f[0]).setTime(f[1]).setMorningService(!f[2].includes("\u0432")).setRequiredService(f[2].includes("\u0442"))}))}parserClerics(o){return o.split(/==+/).map(u=>u.trim()).filter(u=>!!u).map(u=>{let h=u.split("|"),d=_C.builder();h.length>0&&d.setName(h[0]);for(let f=1;f<h.length;++f)d.week[f-1]="true"==h[f];return d})}onSaveServices(o){let c=o.map(u=>u.map(h=>`${h.text}|${h.time}|${(h.requiredService?"\u0442":"")+(h.morningService?"\u0443":"\u0432")}`).join("\r\n")).join("==");c||(c="=="),this.uiConfig.ui.schedulerServices.setStringValue(c)}onClearServices(o,c){c?this.onLoadEmptyServices():this.onLoadServicesOrDefault(!0)}onSaveClerics(o){let c=o.map(u=>u.name+"|"+u.week.join("|")).join("==");this.uiConfig.ui.schedulerClerics.setStringValue(c)}onClearClerics(o){this.onLoadClericsOrDefault(!0)}onSelectDayRang(o){this.dayRang=o;let c=Tg.builder().setRang(this.dayRang),u=c.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(),h=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textHoliday.text,u);this.textHoliday.setText(h),this.textDay.text=this.\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c\u0426\u0432\u0435\u0442(this.textDay.text,u),this.updateRangServices(c,0),this.onTextChanged()}replaceServices(o,c,u,h,d){let f=u.\u0446\u0432\u0435\u0442\u0421\u043b\u0443\u0436\u0431\u044b(h),p=this.removeDayTask(o,c),m=this.services.services[u.\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0420\u0430\u043d\u0433(h)-1].filter(_=>_.morningService==c).map(_=>d(_)+(_.requiredService?"{\u043f}{\u0442}":f)+(c?"":"{\u0432}")).map(_=>_||"{1}").join("\r\n"),v=c?m:p;return(c?p:m)&&(v&&(v+="\r\n"),v+=c?p:m),v}onSaveDayServices(o){let c=this.days[this.currentDayOfMonth()-1];c&&(this.onTextChangedEnabled=!1,this.textService.text=c.\u0441\u043b\u0443\u0436\u0431\u0430=this.dayServices.services[0].map(u=>u.getNormalizedText()).join("\r\n"),this.textTime.text=c.\u0432\u0440\u0435\u043c\u044f=this.dayServices.services[0].map(u=>u.getNormalizedTime()).join("\r\n"),c.\u0441\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438=this.getDayClerics(),this.updater&&this.updater.requestForUpdate(),this.onTextChangedEnabled=!0)}getDayClerics(){return this.dayServices.services[0].map(o=>o.selectedClerics).join("\r\n")}onClearDayServices(o){this.config.post(()=>{this.onDayServicesSync()})}onSchedulerTypeToggle(){this.fullSchedulerInfoFlag=!this.fullSchedulerInfoFlag,this.config.post(()=>this.generateAllSchedulers())}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(on),R(Ls),R(ud),R(kf),R(wne),R(xne))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler-view"]],inputs:{data:"data"},decls:96,vars:26,consts:[[1,"no-print"],["role","alert",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],[1,"alert-icon"],[1,"alert-text"],[1,"bottom-space"],["clrForm",""],["clrInline",""],[4,"ngFor","ngForOf"],[1,"clr-row","top-space"],[1,"clr-col-3"],["type","button","aria-label","done",1,"btn","btn-icon","btn-success-outline","btn-block",3,"click"],[1,"btn","btn-success-outline","btn-block"],["type","file","placeholder","\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c","accept",".txt",1,"button-input",3,"change"],["type","button","class","btn btn-icon btn-danger-outline btn-block","aria-label","warning",3,"click",4,"ngIf"],[4,"clrIfExpanded"],[1,"btn","btn-block","bottom-space","no-print",3,"click"],[3,"scene","genName","type","schedulerText","logoText","startPageIndex","showFooter","pagesCount","svg"],[1,"no-print",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"hidden"],["clrInput","",3,"placeholder","name","ngModel","ngModelChange"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-warning"],["shape","warning-standard"],["type","button",1,"btn","btn-warning",3,"click"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-success"],["shape","check"],["type","button",1,"btn","btn-success",3,"click"],["type","radio","clrRadio","",3,"name","value","ngModel","ngModelChange"],["type","button","aria-label","warning",1,"btn","btn-icon","btn-danger-outline","btn-block",3,"click"],[3,"data","autoSave","onSave","onClear"],[3,"data","autoSave","onSave","onClear","onReset"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-down"],[1,"clr-col-6"],[1,"inline-block","top-space"],[3,"showDates","uniqueDateString","useUniqueDate","change"],[1,"clr-col-1"],[1,"clr-row"],[1,"clr-col-12"],[1,"clr-form"],[1,"clr-control-container"],["clrTextarea","","name","day","required","",1,"heightDay",3,"ngModel","ngModelChange"],[1,"clr-subtext"],[1,"clr-col-5"],["clrTextarea","","name","holiday","required","",1,"heightHoliday",3,"ngModel","ngModelChange"],[3,"data","singleRang","clerics","autoSave","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-lg-up","clr-hidden-sm-down"],["clrTextarea","","name","day","required","",1,"heightDay2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday2",3,"ngModel","ngModelChange"],[3,"data","singleRang","vertical","clerics","autoSave","onSave","onClear"],[1,"clr-row","bottom-space","no-print","clr-hidden-md-up"],["clrTextarea","","name","day","required","",1,"heightDay3",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightHoliday3",3,"ngModel","ngModelChange"],[1,"clr-row","no-print"],[1,"clr-col-6","bottom-space","clr-hidden-md-down"],[3,"rang","rangChanged"],[1,"heightTAw"],[3,"data","onSelected"],["class","clr-row",4,"ngFor","ngForOf"],[1,"clr-row","bottom-top-space"],[1,"btn","btn-block","btn-danger-outline","heightTAw",3,"click"],[1,"clr-col-6","bottom-space","clr-hidden-lg-up","clr-hidden-sm-down"],[1,"heightTA2w"],[1,"btn","btn-block","btn-danger-outline",3,"click"],[1,"clr-col-12","bottom-space","clr-hidden-md-up"],[1,"clr-col-6","clr-hidden-sm-down"],[3,"svgWidth","svgHeight","scene","genName","type","schedulerText","startPageIndex","showFooter"],[1,"clr-col-12","clr-hidden-md-up"],["clrTextarea","","name","holiday","required","",1,"heightTA",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightTA2",3,"ngModel","ngModelChange"],["clrTextarea","","name","holiday","required","",1,"heightTA3",3,"ngModel","ngModelChange"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"div",1),M(2,"div",2),M(3,"div",3),M(4,"div",4),me(5,"clr-icon",5),E(),M(6,"span",6),ie(7),E(),E(),E(),E(),M(8,"div",7),M(9,"form",8),M(10,"clr-radio-container",9),Z(11,JUe,4,4,"clr-radio-wrapper",10),E(),E(),M(12,"div",11),M(13,"div",12),M(14,"button",13),ee("click",function(h){return c.onSave(h)}),ie(15,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),E(),E(),M(16,"div",12),M(17,"button",13),ee("click",function(h){return c.onExport(h)}),ie(18,"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 "),E(),E(),M(19,"div",12),M(20,"label",14),M(21,"input",15),ee("change",function(h){return c.onImport(h)}),E(),ie(22," \u0418\u043c\u043f\u043e\u0440\u0442 "),E(),E(),M(23,"div",12),Z(24,eHe,2,0,"button",16),E(),E(),E(),E(),M(25,"clr-accordion",0),M(26,"clr-accordion-panel"),M(27,"clr-accordion-title"),ie(28,"\u0421\u0432\u044f\u0449\u0435\u043d\u043d\u0438\u043a\u0438"),E(),Z(29,tHe,2,2,"clr-accordion-content",17),E(),M(30,"clr-accordion-panel"),M(31,"clr-accordion-title"),ie(32,"\u0421\u043b\u0443\u0436\u0431\u044b"),E(),Z(33,nHe,2,2,"clr-accordion-content",17),E(),M(34,"clr-accordion-panel"),M(35,"clr-accordion-title"),ie(36,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),E(),Z(37,oHe,105,58,"clr-accordion-content",17),E(),E(),M(38,"div"),M(39,"button",18),ee("click",function(){return c.onSchedulerTypeToggle()}),ie(40),E(),M(41,"app-svg-js-image",19),ee("pagesCount",function(h){return c.setPagesCount(h)})("svg",function(h){return c.saveSvg(h,0)}),E(),Z(42,aHe,2,7,"div",10),E(),M(43,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalClearSchedulerFlag=h}),M(44,"h3",21),ie(45,"\u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),E(),M(46,"div",22),M(47,"p"),ie(48,"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446 \u0438\u043b\u0438 \u0433\u043e\u0434 \u0431\u044b\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b \u0438\u043b\u0438 \u043f\u043e\u0441\u0442\u0443\u043f\u0438\u043b \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0447\u0438\u0441\u0442\u043a\u0443."),me(49,"br"),me(50,"br"),ie(51," \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435?"),E(),E(),M(52,"div",23),M(53,"button",24),ee("click",function(){return c.onClearScheduler(),c.modalClearSchedulerFlag=!1}),ie(54,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E(),M(55,"button",25),ee("click",function(){return c.modalClearSchedulerFlag=!1}),ie(56,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),E(),E(),M(57,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalSaveSettingsFlag=h}),M(58,"h3",21),ie(59,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),E(),M(60,"div",22),M(61,"form"),M(62,"clr-input-container",26),M(63,"label"),ie(64),E(),M(65,"input",27),ee("ngModelChange",function(h){return c.pCurrentSettingsName.value=h}),E(),E(),E(),E(),M(66,"div",23),Z(67,lHe,2,0,"button",28),M(68,"button",25),ee("click",function(){return c.modalSaveSettingsFlag=!1}),ie(69,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),E(),E(),M(70,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalDeleteSettingsFlag=h}),M(71,"h3",21),ie(72,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),E(),M(73,"div",22),M(74,"p"),M(75,"button",29),me(76,"clr-icon",30),E(),ie(77),E(),E(),M(78,"div",23),M(79,"button",25),ee("click",function(){return c.modalDeleteSettingsFlag=!1}),ie(80,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),M(81,"button",31),ee("click",function(h){return c.onDeleteCurrentSettingsDirect(h)}),ie(82,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),E(),E(),E(),M(83,"clr-modal",20),ee("clrModalOpenChange",function(h){return c.modalAddSettingsFlag=h}),M(84,"h3",21),ie(85,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"),E(),M(86,"div",22),M(87,"p"),M(88,"button",32),me(89,"clr-icon",33),E(),ie(90," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e?"),E(),E(),M(91,"div",23),M(92,"button",34),ee("click",function(h){return c.onAddAllSettingsDirect(h)}),ie(93,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),E(),M(94,"button",25),ee("click",function(){return c.modalAddSettingsFlag=!1}),ie(95,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),E(),E(),E()),2&o&&(P(1),O("ngClass",Ra(25,cHe)),P(4),et("shape",c.settings.length?"check-circle":"help-info"),P(2),hi("\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b: ",c.settings.length?"":"\u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",""),P(4),O("ngForOf",c.settings),P(13),O("ngIf",c.settings.length),P(16),hi(" ",c.fullSchedulerInfoFlag?"\u041f\u043e\u043b\u043d\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"," "),P(1),O("scene","/scenes/scheduler.scene.txt")("genName","Js")("type",1)("schedulerText",c.createScheduler(!0))("logoText",c.fullSchedulerInfoFlag?"\u043f\u043e\u043b\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":"\u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435")("startPageIndex",0)("showFooter",!1),P(1),O("ngForOf",c.extraPages),P(1),O("clrModalOpen",c.modalClearSchedulerFlag),P(14),O("clrModalOpen",c.modalSaveSettingsFlag),P(5),O("hidden",!c.pCurrentSettingsName.enabled),P(2),en(c.pCurrentSettingsName.name),P(1),rw("placeholder",c.pCurrentSettingsName.description),O("name","tparamsCurrentSettingsName")("ngModel",c.pCurrentSettingsName.value),P(2),O("ngIf",c.pCurrentSettingsName.value),P(3),O("clrModalOpen",c.modalDeleteSettingsFlag),P(7),hi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c '",c.pCurrentSettingsName.value,"'?"),P(6),O("clrModalOpen",c.modalAddSettingsFlag))},directives:[Xn,Ts,YS,Tp,Sp,Nu,wS,L$,fi,V4,d1,aa,kS,Js,Rs,Rr,mn,G1,R0,Bp,$1,W1,aP,E4,j1,IUe,qUe,XUe,AS,jd,Mne,QUe,kl,jh,$h,D0,I1],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}.my-button[_ngcontent-%COMP%]{border-color:#4aaed9;background-color:#4aaed9;color:#000}.width100[_ngcontent-%COMP%]{width:100%}.height100[_ngcontent-%COMP%]{height:100%!important}.height114px[_ngcontent-%COMP%]{height:114px}.height400[_ngcontent-%COMP%]{width:500px;height:200px}.heightDay[_ngcontent-%COMP%]{width:7vw;height:10em}.heightDay2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightDay3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightHoliday[_ngcontent-%COMP%]{width:37.3vw;height:10em}.heightHoliday2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightHoliday3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightService[_ngcontent-%COMP%]{width:30vw;height:10em}.heightService2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightService3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTime[_ngcontent-%COMP%]{width:14.3vw;height:10em}.heightTime2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTime3[_ngcontent-%COMP%]{width:78vw;height:10em}.heightTA[_ngcontent-%COMP%]{width:45vw;height:10em}.heightTAw[_ngcontent-%COMP%]{width:45vw!important}.heightTA2[_ngcontent-%COMP%]{width:42vw;height:10em}.heightTA2w[_ngcontent-%COMP%]{width:42vw}.heightTA3[_ngcontent-%COMP%]{width:78vw;height:100px}@media print{.pagebreak[_ngcontent-%COMP%]{page-break-after:always}}.button-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}"]}),l})();class DB{constructor(){}static builder(){return new DB}}class MB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new MB("",null,null,DB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}class EB{constructor(a,o){this.meta=a,this.parsed=o}static builder(){return new EB(null,null)}setMeta(a){return this.meta=a,this}setParsed(a){return this.parsed=a,this}}class bC{constructor(a="",o=null){this.type=a,this.onEventHandler=o}setOnEventHandler(a){return this.onEventHandler=a,this}run(a){return this.onEventHandler&&this.onEventHandler(this,a),this}}class ZD{constructor(a,o,c=0){this.\u0441\u0442\u0440\u043e\u043a\u0438=a,this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=o,this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a=c}static builder(){return new ZD([],0)}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(a){return this.\u0441\u0442\u0440\u043e\u043a\u0438=a,this}\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(a){return this.\u0438\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438=a,this}\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(a=1){return this.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a+=a,this}}class kB extends rne{constructor(a=null){super(a),this.errors=[],this.libraryRef="biblia",this.libraryType="prod",this.libraryInfo=null,this.bookName="",this.bookNameNewLangs=[],this.bookChapterNewName="",this.bookLoadBooksEnabledNewName=!0,this.bookPageText="",this.bookRef="",this.bookInfo=null,this.bookLanguages=[],this.books=[],this.lineIndexes=[],this.bookContent=[],this.bookChapter=null,this.converter=new CL,this.onLibraryLoadEvent=new bC("onLibraryLoad"),this.onPageLoadEvent=new bC("onPageLoad"),this.onBookInfoLoadEvent=new bC("onBookInfoLoad"),this.onRouteEvent=new bC("onRoute"),this.onNewTitleEvent=new bC("onNewTitle"),this.config=null,this.uiConfig=null,this.memorialSvc=null,this.audioSvc=null,this.linesTransformer=null,this.removableSubscriptions=[]}onDestroy(){this.removableSubscriptions.forEach(a=>{a.unsubscribe()}),this.removableSubscriptions=[]}addSubscription(a){a&&this.removableSubscriptions.push(a)}setLineTransformer(a){return this.linesTransformer=a,this}setConfig(a){var o;this.config=a;let c=null===(o=this.config)||void 0===o?void 0:o.getApplication();return c&&c.libraryType&&c.libraryRef&&(this.libraryType=c.libraryType,this.libraryRef=c.libraryRef),this}setUIConfig(a){return this.uiConfig=a,this}setMemorial(a){return this.memorialSvc=a,this}setAudio(a){return this.audioSvc=a,this}addError(a){return this.errors.push(a),this}clear(a=!1,o=!1,c=[],u=!0,h=!1){return this.errors=[],this.books=[],this.lineIndexes=[],a&&(this.bookContent=[]),o&&(u&&(this.bookInfo=null),this.bookLanguages=c),h&&(this.bookChapter=null),this}loadLibraryInfo(){return this.send(null,Kte.builder().setLibraryType(this.libraryType).setLibraryRef(this.libraryRef)),this}tryLoadLibraryInfo(){null==this.libraryInfo?this.loadLibraryInfo():this.onLibraryLoadEvent.run(this.libraryInfo)}loadBookByName(a,o=[],c="",u=!0){this.bookName=a,this.bookNameNewLangs=o,this.bookChapterNewName=c,this.bookChapterNewName&&(this.bookChapter=null),this.bookLoadBooksEnabledNewName=u,this.retryLoadBookByName()}loadBookByPageText(a,o=!0,c="\u0420\u0443\u0441\u0441\u043a\u0438\u0439"){return this.bookPageText=a,this.clear(!0,!0,[c],o),this.retryLoadBookByName(),this}getBookSettingsNamePath(a){if(!this.libraryInfo)return null;let o=this.libraryInfo.settings.find(c=>c.name===a);return o||(o=this.libraryInfo.settings.find(c=>{var u;return null===(u=c.value2)||void 0===u?void 0:u.find(h=>h===a)})),o}getBookContentNamePath(a){if(!this.libraryInfo)return null;let o=this.libraryInfo.content.find(c=>c.name===a);if(o||(o=this.libraryInfo.content.find(c=>{var u;return null===(u=c.path2)||void 0===u?void 0:u.find(h=>h===a)})),!o){let c=Fv.builder().parse(a);if(null!=c&&c.length&&c[0].length){let u=c[0][0];u.type==Xa.Link&&(o=this.getBookContentNamePath(u.name))}}return o}retryLoadBookByName(){if(this.libraryInfo)if(this.bookPageText)this.onPagesResponse(JN.builder().setPages([this.bookPageText])),this.bookPageText="";else{let a=this.getBookContentNamePath(this.bookName);a?this.loadBookByRef(a.path,this.bookNameNewLangs,this.bookLoadBooksEnabledNewName):this.addError(`\u041a\u043d\u0438\u0433\u0430 "${this.bookName}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430.`)}else this.loadLibraryInfo()}loadBookByRef(a,o=[],c=!0){return this.bookRef=a,this.clear(!0,!0,o),this.loadBookInfo(null,c),this}isLanguageEnabled(a){return null!=this.bookLanguages.find(o=>o==a)}loadBookInfo(a=null,o=!0){return this.send(null,Qte.builder().setLibraryType(this.libraryType).setBookRef(a||this.bookRef).setLoadBooksEnabled(o)),this}isPrevEnabled(){let a=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let o=this.bookContent[0];o.parsed&&o.parsed.content&&o.parsed.content.length>1&&(a=o.parsed.content[0].name!=this.bookChapter.name)}return a}isNextEnabled(){let a=!1;if(!this.bookChapter)return!1;if(this.bookContent.length){let o=this.bookContent[0];o.parsed&&o.parsed.content&&o.parsed.content.length>1&&(a=o.parsed.content[o.parsed.content.length-1].name!=this.bookChapter.name)}return a}loadNextPage(){if(!this.isNextEnabled())return;let a="";if(this.bookContent.length){let o=this.bookContent[0];if(o.parsed&&o.parsed.content&&o.parsed.content.length>1){let c=o.parsed.content.findIndex(u=>u.name==this.bookChapter.name);c>=0&&c+1<o.parsed.content.length&&(a=o.parsed.content[c+1].name)}}a&&this.loadPage(a)}loadPrevPage(){if(!this.isPrevEnabled())return;let a="";if(this.bookContent.length){let o=this.bookContent[0];if(o.parsed&&o.parsed.content&&o.parsed.content.length>1){let c=o.parsed.content.findIndex(u=>u.name==this.bookChapter.name);c>=1&&(a=o.parsed.content[c-1].name)}}a&&this.loadPage(a)}loadPage(a){let o=this.bookContent[0].parsed.content.find(c=>c.name===a);return o&&o!=this.bookChapter&&(this.bookName=this.getNormalBookName(),this.bookChapter=o,this.clear(),this.loadCurrentPages()),this}loadCurrentPages(){let a=ene.builder();return this.runAll(this.bookContent,(o,c)=>{let u=o.parsed.settings.find(f=>"\u044f\u0437\u044b\u043a"===f.name.toLowerCase());if(u&&(this.isLanguageEnabled(u.value)||(u=null)),!u)return void c(!0);let h=this.getBookChapterNewName(),d=o.parsed.content.find(f=>h==f.name);this.bookChapterNewName="",null==d&&(d=o.parsed.content.find(f=>!this.bookChapter||this.bookChapter.name==f.name)),d&&(a.addBookPage(QN.builder().setBookPage(o.meta.bookRef).setBookPath(o.meta.path).setBookPage(d.path)),this.bookChapter||(this.bookChapter=d)),c(!0)},o=>{o&&this.send(null,a)}),this}post(a,o){switch(o.type){case ine.TYPE:this.onLibraryInfoResponse(o);break;case nne.TYPE:this.onBookInfoResponse(o);break;case tne.TYPE:this.onBookResponse(o);break;case JN.TYPE:this.onPagesResponse(o);break;default:throw new Error(`Unknown message type: ${o.type}.`)}return this}onLibraryInfoResponse(a){try{this.libraryInfo=bookParserStatic.parse(a.metaContent,dC.builder())}catch(o){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438: ${a.libraryRef}: ${o}`)}return this.bookName||this.bookPageText?this.retryLoadBookByName():this.onLibraryLoadEvent.run(this.libraryInfo),this}onBookInfoResponse(a){try{this.bookInfo=bookParserStatic.parse(a.metaContent,dC.builder())}catch(o){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${a.bookRef}: ${o}`)}return a.loadBooksEnabled&&this.reloadBooks(),this.onBookInfoLoadEvent.run(this.bookInfo),this}reloadBooks(){this.clear(!0);let a=Jte.builder().setLibraryType(this.libraryType).setBookRef(this.bookRef);this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookLanguages.filter(o=>null!=this.bookInfo.content.find(c=>c.name==o))),!this.bookLanguages.length&&this.bookInfo&&(this.bookLanguages=this.bookInfo.content.map(o=>o.name),this.bookLanguages.length>2&&(this.bookLanguages=this.bookLanguages.slice(0,2))),this.bookInfo&&this.bookLanguages.forEach(o=>{let c=this.bookInfo.content.find(u=>u.name===o);c&&a.addLanguage(c.path)}),this.send(null,a)}onBookResponse(a){return this.runAll(a.metaBooks,(o,c)=>{this.loadBook(o,c)},o=>{o&&this.loadCurrentPages()}),this}loadBook(a,o=null){try{var c=bookParserStatic.parse(a.content,dC.builder());this.bookContent.push(EB.builder().setMeta(a).setParsed(c)),o&&o(!0)}catch(u){return this.addError(`\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043d\u0438\u0433\u0438: ${this.bookRef}: ${u}`)}return this}onPagesResponse(a){a.pages.forEach(o=>{this.loadBookPageText(o)}),this.onPageLoadEvent.run(null)}getStdSrc(){return"\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '';\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c(\u0442\u0435\u043a\u0441\u0442) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n      }\n    }.\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u0434 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(_\u043a\u043e\u0434) {\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c '/*' + _\u043a\u043e\u0434 + '*/';\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0432\u044b\u0432\u0435\u0441\u0442\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0432\u044b\u0432\u0435\u0441\u0442\u0438(\u0442\u0435\u043a\u0441\u0442) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442(\u0442\u0435\u043a\u0441\u0442);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0432\u044b\u0432\u0435\u0441\u0442\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0433\u0430\u043b\u043e\u0447\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0433\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442, _\u0433\u0430\u043b\u043e\u0447\u043a\u0430, _\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430(_\u0442\u0435\u043a\u0441\u0442,_\u0433\u0430\u043b\u043e\u0447\u043a\u0430,_\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0433\u0430\u043b\u043e\u0447\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442, \u0442\u0438\u043f, \u0441\u0441\u044b\u043b\u043a\u0430, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, \u0431\u043b\u043e\u043a) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430(\u0442\u0435\u043a\u0441\u0442,\u0442\u0438\u043f,\u0441\u0441\u044b\u043b\u043a\u0430,\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a,\u0431\u043b\u043e\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u043e\u043f\u043a\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0441\u043f\u0438\u0441\u043e\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u0441\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a(\u0441\u0442\u0440\u043e\u043a\u0438,\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0441\u043f\u0438\u0441\u043e\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a = \u043a\u043b\u0430\u0441\u0441 {\n      \u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a(\u0442\u043e\u043b\u044c\u043a\u043e\u0427\u0442\u0435\u043d\u0438\u0435, \u0438\u043c\u044f\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0430, \u043d\u043e\u043c\u0435\u0440\u0421\u043b\u0430\u0432\u044b, \u043e\u0417\u0434\u0440\u0430\u0432\u0438\u0438, _id, _targetId);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u0438\u0433\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b) {\n        id = \u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430(\u0442\u0435\u043a\u0441\u0442\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043d\u0438\u0433\u0430;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a, _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a) {\n        id = \u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438(_\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, _\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a,  _\u043a\u043b\u0430\u0441\u0441\u041b\u044d\u0439\u0431\u043b\u0430, _\u043d\u0435\u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.svg = \u043a\u043b\u0430\u0441\u0441 {\n      svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u044b\u0439Svg(_\u043b\u043e\u0433\u043e, _\u0448\u0438\u0440\u0438\u043d\u0430, _\u0432\u044b\u0441\u043e\u0442\u0430, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.svg;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043c\u0435\u043d\u044e = \u043a\u043b\u0430\u0441\u0441 {\n      \u043c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438) {\n        id = \u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e(_\u043f\u0443\u043d\u043a\u0442\u044b, _\u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043c\u0435\u043d\u044e;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div = \u043a\u043b\u0430\u0441\u0441 {\n      div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c) {\n        id = \u043d\u043e\u0432\u044b\u0439Div(_\u043a\u043b\u0430\u0441\u0441\u044b, _\u0442\u0435\u043a\u0441\u0442, _\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.div;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440() {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440();\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d = \u043a\u043b\u0430\u0441\u0441 {\n      \u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b) {\n        id = \u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d(\u043f\u0443\u043d\u043a\u0442\u044b);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0430\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 = \u043a\u043b\u0430\u0441\u0441 {\n      \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440;\n    \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 = \u043a\u043b\u0430\u0441\u0441 {\n      \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430) {\n        id = \u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435(\u0444\u043e\u0440\u043c\u0443\u043b\u0430);\n        \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 += id;\n        \u0432\u0435\u0440\u043d\u0443\u0442\u044c id;\n      }\n    }.\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435;\n    "}convertBookPageText(a,o,c){let h=(new VD).parseAndJoin(a),d=this.getStdSrc()+h+" \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",f=new TL,p=y=>{y.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0432\u0435\u0440\u0441\u0438\u044f",f.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.config?this.config.environment.version:"\u0412\u0435\u0440\u0441\u0438\u044f 2.0+")),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0421\u043f\u0438\u0441\u043e\u043a\u041a\u043d\u0438\u0433\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438",(b,x)=>{let C=b.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432");return this.libraryInfo&&C.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(this.libraryInfo.content.map(w=>{let S=b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");S.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w.name));let D=this.libraryInfo.settings.find(T=>T.name==w.name);return S.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0438\u043c\u044f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(D?D.value:"")),S.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",b.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435((D&&D.value2?D.value2:[]).map(T=>b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(T)))),S})),C}),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u043d\u0438\u0433\u0443",(b,x)=>{let C=this.uiConfig?this.uiConfig.ui.currentBook.getStringValue():"";return b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(C)}),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(b,x)=>{var w=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);let S=this.uiConfig?this.uiConfig.ui.visitedBooksHelp.getStringValue():"";if(this.uiConfig)switch(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":S=this.uiConfig.ui.visitedBooksHelp.getStringValue();break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":S=this.uiConfig.ui.visitedMemorialHelp.getStringValue();break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":S=this.uiConfig.ui.visitedCalculatorHelp.getStringValue();break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":S=this.uiConfig.ui.visitedCalendarHelp.getStringValue();break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":S=this.uiConfig.ui.visitedCompilerHelp.getStringValue();break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":S=this.uiConfig.ui.visitedSchedulerHelp.getStringValue()}return b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(S)}),f.addMethod(y,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u0441\u0435\u0449\u0451\u043d\u043d\u0443\u044e\u0412\u0435\u0440\u0441\u0438\u044e",(b,x)=>{var w=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),D=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[2]);if(this.uiConfig)switch(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()){case"\u043a\u043d\u0438\u0433\u0438":this.uiConfig.ui.visitedBooksHelp.setStringValue(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.uiConfig.ui.visitedMemorialHelp.setStringValue(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCalculatorHelp.setStringValue(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c":this.uiConfig.ui.visitedCalendarHelp.setStringValue(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440":this.uiConfig.ui.visitedCompilerHelp.setStringValue(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());break;case"\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435":this.uiConfig.ui.visitedSchedulerHelp.setStringValue(w.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())}return x[0]}),f.addMethod(y,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u041a\u043d\u0438\u0433\u0438",(b,x)=>{var C,S=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);return this.onNewTitleEvent.run(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),null===(C=this.config)||void 0===C||C.messageBus.sendMessage(o0.builder().setType("MemorialNewTitle").setText(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTarget("MemorialMainWindow")),x[0]}),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(b,x)=>{let w=this.uiConfig?this.uiConfig.ui.currentOffset.getNumberValue():0;w<0&&(w=this.uiConfig?this.uiConfig.ui.currentPersonOffset.getNumberValue():0);let S=Gn.getKafizmNumberBy(17,w);return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(S)}),f.addMethod(y,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0443\u044e\u041a\u0430\u0444\u0438\u0437\u043c\u0443",(b,x)=>{var w=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);return this.uiConfig&&this.uiConfig.ui.currentOffset.setNumberValue(Gn.getOffsetByKafizmNumber(17,w.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e())),w}),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(b,x)=>{var C;let w=this.uiConfig?this.uiConfig.ui.memorialChapterRequested.getNumberValue():0;return null===(C=this.uiConfig)||void 0===C||C.ui.memorialChapterRequested.setNumberValue(-1),b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(b,x)=>{let C=this.uiConfig?this.uiConfig.ui.currentMemorialPsalom.getNumberValue():0;return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0447\u0438\u0441\u043b\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(C)}),f.addMethod(y,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0443\u0449\u0438\u0439\u041f\u0441\u0430\u043b\u043e\u043c",(b,x)=>{var w=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setNumberValue(w.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()),w}),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(b,x)=>{let C=!this.uiConfig||this.uiConfig.ui.showMolitvy.getBooleanValue();return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(C)}),f.addMethod(y,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u043e\u043a\u0430\u0437\u041c\u043e\u043b\u0438\u0442\u0432",(b,x)=>{var w=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]);return this.uiConfig&&this.uiConfig.ui.currentMemorialPsalom.setBooleanValue(w.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),w}),f.addMethod(y,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c",(b,x)=>{let C=!this.uiConfig||this.uiConfig.ui.memorialPsaltir.getBooleanValue();return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(C)}),f.addMethod(y,"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u041e\u0431\u043b\u043e\u0436\u043a\u0443",(b,x)=>{let C=!this.uiConfig||this.uiConfig.ui.showFacePage.getBooleanValue();return b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(C)}),f.addMethod(y,"\u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438",(b,x)=>{let C=b.\u043d\u043e\u0432\u044b\u0439\u041c\u0430\u0441\u0441\u0438\u0432("\u043c\u0430\u0441\u0441\u0438\u0432").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435([]);if(this.memorialSvc){let w=this.memorialSvc.getMemorials();w&&w.items.forEach(S=>{var D;let T=b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043a\u0430\u0440\u0442\u0430");null===(D=T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===D||D.set("\u0438\u043c\u044f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(S.name)),C.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().push(T)})}return C}),f.addMethod(y,"\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\u0421\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u0438",(b,x)=>{var C,w,D=x[2],T=x[3],A=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),I=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D),N=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T);return N.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()||null===(C=this.audioSvc)||void 0===C||C.stop(),null===(w=this.audioSvc)||void 0===w||w.startCheckUI(k=>{},A.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),I.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e(),N.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),f.addMethod(y,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",(b,x)=>{var C,w,D=x[2],T=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),A=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D);return null===(C=this.config)||void 0===C||C.messageBus.removeAllTargetHandlers(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),this.addSubscription(null===(w=this.config)||void 0===w?void 0:w.messageBus.addTargetHandler(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),I=>{var N;null===(N=this.config)||void 0===N||N.post(()=>{let k=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(k),k.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",A);let F=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),B=F.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430();B&&(B.set("\u0446\u0435\u043b\u044c",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(I.target)),B.set("\u0442\u0435\u043a\u0441\u0442",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(I.text)),B.set("\u0442\u0438\u043f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(I.type)),B.set("\u043f\u043e\u0434\u0442\u0438\u043f",b.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(I.subType))),k.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",F),f.run("\n              \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0446\u0435\u043b\u0435\u0432\u043e\u0439\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435);\n              \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n            ",g,k,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})})),b.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u0431\u0443\u043b\u0435\u0432\u043e").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(!0)}),f.addMethod(y,"\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\u0426\u0435\u043b\u0435\u0432\u043e\u0435\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",(b,x)=>{var C,S=x[2],D=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(x[1]),T=b.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S);return null===(C=this.config)||void 0===C||C.messageBus.sendMessage(o0.builder().setTarget(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setText(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),T}),f.addBookmarksEnvironment(y,this.uiConfig)},g=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),m=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(m);let v=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));return f.addMethod(v,"\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(y,b)=>{var C=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),w=this.convertBookPageText(C.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),o,c);return y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(w)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0422\u0435\u043a\u0441\u0442",(y,b)=>y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1])),f.addMethod(v,"\u043d\u043e\u0432\u0430\u044f\u0413\u0430\u043b\u043e\u0447\u043a\u0430",(y,b)=>{var C=b[2],w=b[3],S=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),D=C?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C):null,T=w?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null;let A=ns.builder().setClasses(CL.getLastClass("")).setText(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),I=ML.builder().setText(A.text).setOnClick(()=>{let k=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),F=y.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");p(k),k.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",I.tag.data),k.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0433\u0430\u043b\u043e\u0447\u043a\u0430",F),f.addMethod(F,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(V,$)=>{var L=V.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($[1]);return I.text=L.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),f.addMethod(F,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0413\u0430\u043b\u043e\u0447\u043a\u0443",(V,$)=>{var L=V.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($[1]);return I.classes.setCheck(L.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),null}),f.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0433\u0430\u043b\u043e\u0447\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",g,k,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});I.classes.setCheck(!!D&&D.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),I.setTag(xg.builder().setData(T));let N=c();return o.set(N,A.setComponent(new On(p6e,I))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${N}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u043e\u043f\u043a\u0430",(y,b)=>{var C=b[2],w=b[3],S=b[4],D=b[5],T=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),A=C?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C):null,I=w?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null,N=S?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S):null,k=D?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D):null;let F=!1;I&&I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(q=>{"outline"===q&&(F=!0)});let B=ns.builder().setClasses(CL.getLastClass(A?A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"")).setText(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),V=zD.builder().setText(B.text).setOnClick(()=>{let q=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(q);let L=y.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",V.tag.data),q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043a\u043d\u043e\u043f\u043a\u0430",L),f.addMethod(L,"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0435\u043a\u0441\u0442",(z,W)=>{var j=z.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(W[1]);return V.text=j.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),null}),f.addMethod(L,"\u043f\u0435\u0440\u0435\u0445\u043e\u0434",(z,W)=>{var j=z.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(W[1]);return this.onRouteEvent.run(j?j.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():""),null}),f.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043a\u043d\u043e\u043f\u043a\u0430);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",g,q,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()});V.setTag(xg.builder().setData(N)),V.classes.setBlock(!k||k.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setType(A?A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430():"primary").setOutline(F);let $=c();return o.set($,B.setComponent(new On(lne,V))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${$}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0421\u043f\u0438\u0441\u043e\u043a",(y,b)=>{var C=b[2],w=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),S=C?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C):null;let D=ns.builder(),T=kL.builder().setItems(w?w.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(I=>this.makeFragmentComponents(I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())):[]);T.classes.setOrdered(!!S&&S.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let A=c();return o.set(A,D.setComponent(new On(y6e,T))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${A}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a",(y,b)=>{var C=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),S=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[2]),T=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[3]),I=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[4]),k=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[5]),B=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[6]);let V=ns.builder(),$=IL.builder();$.setReadonly(C.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setText(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setId(k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTargetId(B.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),$.classes.setSlava1Zdrav(1==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava1Upok(1==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Zdrav(2==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava2Upok(2==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Zdrav(3==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()).setSlava3Upok(3==T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()&&!I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());let q=c();return o.set(q,V.setComponent(new On(_ne,$))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${q}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u0430\u044f\u041a\u043d\u0438\u0433\u0430",(y,b)=>{var C=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let w=ns.builder(),S=c();return o.set(S,w.setComponent(new On(fc,Ya.builder().setText(C.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setHideUI(!0).setParallel(!0).setLinebreaks(!0).setLink(qa.builder().setTextIsPage(!0).setBookName("Mem").setChapter("1").setStartLine(1).setEndLine(1e3).setOnRoute(D=>{}))))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${S}}`)}),f.addMethod(v,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043d\u0438\u0433\u0443",(y,b)=>{var x,w=b[2],S=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),D=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w);let T=D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();T=T.substring(1,T.length-1);let A=o.get(T),I=null===(x=null==A?void 0:A.component)||void 0===x?void 0:x.data;return I&&I.setText(S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),I?D:y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0435\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(y,b)=>{var C=b[2],w=b[3],S=b[4],D=b[5],T=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),A=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C),I=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(S),N=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(w),k=D?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(D):null;N&&N.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(N=null);let F=ns.builder(),B=c(),V=dc.builder().setItems(T.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map($=>$).map($=>ko.builder().setText(y.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(y.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(y.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439($.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==A.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())));return N&&V.classes.setLabelNormal(N.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),I&&V.classes.setNoPrint(I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),V.setTag(xg.builder().setData(k)),V.setOnClick($=>{let q=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));p(q);let L=y.\u043d\u043e\u0432\u044b\u0439\u041e\u0431\u044a\u0435\u043a\u0442("\u043e\u0431\u044a\u0435\u043a\u0442");q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",V.tag.data),q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",L),q.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0442\u0435\u0433",y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435($.tag)),f.addMethod(L,"\u0432\u044b\u0431\u0440\u0430\u0442\u044c",(z,W)=>{var j=z.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(W[1]);return V.items.forEach(G=>G.setSelected(G.tag==j.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())),null}),f.run("\n            \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438);\n            \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",g,q,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),o.set(B,F.setComponent(new On(WD,V))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${B}}`)}),f.addMethod(v,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",(y,b)=>{var x,C=b[1],w=b[2],S=b[3],D=b[4],T=b[5],A=b[6],I=C?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C):null,N=w?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w):null,k=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(S),F=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c(D),B=T?y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(T):null,V=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(A);I&&I.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(I=null),N&&N.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(N=null),k&&k.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(k=null),F&&F.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(F=null),B&&B.\u044d\u0442\u043e\u041d\u0443\u043b\u044c()&&(B=null);let $=V.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();$=$.substring(1,$.length-1);let q=o.get($),L=null===(x=null==q?void 0:q.component)||void 0===x?void 0:x.data;return L&&(I?L.setItems(I.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(U=>U).map(U=>ko.builder().setText(y.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u043a\u0441\u0442")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(y.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSelected(y.\u043d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(U.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().get("\u0442\u0435\u0433")).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()==(null==N?void 0:N.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())))):L.items.forEach(U=>U.setSelected(U.tag==(null==N?void 0:N.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430())))),k&&L.classes.setLabelNormal(k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()),F&&L.classes.setNoPrint(F.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),B&&L.setTag(xg.builder().setData(B)),L?V:y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435("")}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439Svg",(y,b)=>{var C=b[2],w=b[3],S=b[4],D=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),T=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C),A=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w),I=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S);let N=ns.builder(),k=c();return o.set(k,N.setComponent(new On(Xze,JL.builder().setText("").setGenName(D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setSvgWidth(T.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).setSvgHeight(A.\u043a\u0430\u043a\u0427\u0438\u0441\u043b\u043e()).updateClasses(F=>F.setPrintOnly(I.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()))))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${k}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u043e\u0435\u041c\u0435\u043d\u044e",(y,b)=>{var C=b[2],w=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),S=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C);let D=ns.builder(),T=c(),A=If.builder().setText("").setWhiteBack(!0);return A.menuState.setGenName("MenuDay2").setPrintOnly(S.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e()),w.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(I=>I).forEach(I=>{A.addCommand($o.builder().setName(I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),o.set(T,D.setComponent(new On(RD,A))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${T}}`)}),f.addMethod(v,"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u041c\u0435\u043d\u044e",(y,b)=>{var x,w=b[2],S=b[3],D=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),T=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w);let I=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(S).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();I=I.substring(1,I.length-1);let N=o.get(I),k=null===(x=null==N?void 0:N.component)||void 0===x?void 0:x.data;if(k){let F=wf.builder().setGenName("MenuDay2").setPrintOnly(T.\u043a\u0430\u043a\u0411\u0443\u043b\u0435\u0432\u043e());D.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(B=>B).forEach(B=>{F.addCommand($o.builder().setName(B.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).setTag(B.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()))}),k.setMenuState(F)}return y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${I}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439Div",(y,b)=>{var C=b[2],w=b[3],S=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]),D=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(C),T=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(w);let A=D.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),I=[],N="";A.startsWith("{")&&A.endsWith("}")&&(I=A.split(",").filter(V=>{let $=!1;return V.startsWith("{")&&V.endsWith("}")&&($=!0),$}).map(V=>V.substring(1,V.length-1)));let k=ns.builder(),F=c(),B=[];return I.forEach(V=>{let $=o.get(V);$&&(N||(N=V),B.push($))}),o.set(F,k.setComponent(new On(eB,jD.builder().setText(I.length?"":A).setId(N).setComponents(B.map(V=>V.component).filter(V=>!!V).map(V=>V)).setWaitingForSenderid(T.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()).update(V=>{S.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430().split(/[ \r\n\t]+/).forEach(q=>{switch(q.toLowerCase()){case"\u0440\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c":V.setFineText(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u0434\u043e":V.setPageBreakBefore(!0);break;case"\u0440\u0430\u0437\u0440\u044b\u0432\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u043f\u043e\u0441\u043b\u0435":V.setPageBreakAfter(!0);break;case"\u0442\u043e\u043b\u044c\u043a\u043e\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":V.setPrintOnly(!0);break;case"\u043d\u0435\u043f\u0440\u0438\u043f\u0435\u0447\u0430\u0442\u0438":V.setNoPrint(!0);break;default:V.addSClass(q)}})})))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${F}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0410\u0443\u0434\u0438\u043e\u041f\u043b\u0435\u0435\u0440",(y,b)=>{let x=ns.builder(),C=c();return o.set(C,x.setComponent(new On(rUe,iB.builder().setText("").update(w=>{})))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${C}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u0410\u043a\u043a\u043e\u0440\u0434\u0438\u043e\u043d",(y,b)=>{var C=y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let w=oB.builder().setText("").update(T=>{});C.\u043a\u0430\u043a\u041c\u0430\u0441\u0441\u0438\u0432().map(T=>T).forEach(T=>{var A,I,N,k;let F=null===(I=null===(A=T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===A?void 0:A.get("\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"))||void 0===I?void 0:I.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),B=null===(k=null===(N=T.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430())||void 0===N?void 0:N.get("\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442"))||void 0===k?void 0:k.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430();B&&(B=B.startsWith("{")?B.substring(1):B,B=B.endsWith("}")?B.substring(0,B.length-1):B);let V=o.get(B||"");V&&w.addItem(sB.builder().setTitle(F||"\u041f\u0443\u043d\u043a\u0442\u0438\u043a").setComponent(V.component))});let S=ns.builder(),D=c();return o.set(D,S.setComponent(new On(lUe,w))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${D}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440",(y,b)=>{y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let w=lB.builder().setText("").update(T=>{}),S=ns.builder(),D=c();return o.set(D,S.setComponent(new On(dUe,w))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${D}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",(y,b)=>{y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let w=dB.builder().setText("").update(T=>{}),S=ns.builder(),D=c();return o.set(D,S.setComponent(new On(_Ue,w))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${D}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u044b\u0439\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440",(y,b)=>{y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let w=uB.builder().setText("").update(T=>{}),S=ns.builder(),D=c();return o.set(D,S.setComponent(new On(vUe,w))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${D}}`)}),f.addMethod(v,"\u043d\u043e\u0432\u043e\u0435\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",(y,b)=>{y.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(b[1]);let w=MB.builder().setText("").update(T=>{}),S=ns.builder(),D=c();return o.set(D,S.setComponent(new On(uHe,w))),y.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(`{${D}}`)}),f.run(d,g,m,v).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}makeFragmentComponents(a){let o=this.converter.parseFragments(new Map,h=>h,a),c=[pC.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(o).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(!1).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0422\u0438\u043f(fC.\u0422\u0435\u043a\u0441\u0442)],u=Pv.builder().setText(a);return u.config.setLineIndex(0).setBook(ZD.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438(c)),new On(BD,u)}loadBookPageText(a,o=null){if(!a)return void(o&&o(!1));let c=0,h=new Map,d=ZD.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0421\u0442\u0440\u043e\u043a\u0438([]);this.convertBookPageText(a,h,()=>""+c++).split("\n").forEach((p,g)=>{let m=this.transformLine(p),v=this.converter.parseFragments(h,y=>{let b="";if(this.libraryInfo){let x=this.libraryInfo.content.find(C=>{var w;return null===(w=C.path2)||void 0===w?void 0:w.find(S=>S==y)});x&&(b=x.name)}return b},m.trim(),(!this.uiConfig||this.uiConfig.ui.coloredTranslations.getBooleanValue())&&this.books.length%2?"redDark":"red"),_=Pv.builder().setText(m.trim());_.config.setBook(d).setBookSvc(this),d.\u0441\u0442\u0440\u043e\u043a\u0438.push(pC.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b(v).\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new On(BD,_)))}),this.books.push(d.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(this.books.length)),this.generateLineIndexes(),o&&o(!0)}isZeroLineFound(a){return 0==a[0].fragments.length||1==a[0].\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.length&&null!=a[0].\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.find(o=>!!o.classes.redDark||!!o.classes.red)}generateLineIndexes(){this.lineIndexes=[];let a=this.books.map(h=>h.\u0441\u0442\u0440\u043e\u043a\u0438.length+(this.isZeroLineFound(h.\u0441\u0442\u0440\u043e\u043a\u0438)?0:1)).reduce((h,d)=>Math.max(h,d)),o=!1;this.books.forEach(h=>{let d=!1;this.isZeroLineFound(h.\u0441\u0442\u0440\u043e\u043a\u0438)&&(d=o=!0);let f=()=>pC.builder().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442(new On(BD,Pv.builder())),p=h.\u0441\u0442\u0440\u043e\u043a\u0438.map(g=>0==g.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.length).reduce((g,m)=>g&&m,!0);for(h.\u0441\u0442\u0440\u043e\u043a\u0438.length<a&&!d&&(h.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),h.\u0441\u0442\u0440\u043e\u043a\u0438.unshift(f()));h.\u0441\u0442\u0440\u043e\u043a\u0438.length<a;)p&&h.\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a(),h.\u0441\u0442\u0440\u043e\u043a\u0438.push(f())});let c=this.getNormalBookName(),u=c.indexOf("VZ")>=0||c.indexOf("NZ")>=0;this.books.forEach((h,d)=>{for(h.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u041a\u043d\u0438\u0433\u0438(d),h.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((f,p)=>{f.\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430(u),f.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442&&f.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.constructor===Pv&&f.\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442.data.config.setLineIndex(p)});this.lineIndexes.length<h.\u0441\u0442\u0440\u043e\u043a\u0438.length;)this.lineIndexes.push(this.lineIndexes.length)})}toggleLanguage(a){return this.isLanguageEnabled(a)?this.bookLanguages=this.bookLanguages.filter(o=>o!=a):this.bookInfo&&null!=this.bookInfo.content.find(o=>o.name==a)&&this.bookLanguages.push(a),!this.bookLanguages.length&&this.bookInfo&&this.bookInfo.content&&this.bookLanguages.push(this.bookInfo.content[0].name),this}getShortBookName(a=null){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let o=a||this.bookName,c=this.getBookContentNamePath(o),u=o;if(c){if(!c.path2||!c.path2.length)throw new Error(`\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u0438\u043c\u044f \u0434\u043b\u044f \u043a\u043d\u0438\u0433\u0438 "${o}" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.`);u=c.path2[0]}return u}getNormalBookName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let a=this.getBookContentNamePath(this.bookName),o=this.bookName;return a&&(o=a.name),o}getBookChapterNewName(){let a=this.bookChapterNewName,o=Fv.builder().parse(this.bookName);if(null!=o&&o.length&&o[0].length){let c=o[0][0];c.type==Xa.Link&&(a=""+c.startChapter)}return a}getBookTitleName(){if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let a=this.getBookSettingsNamePath(this.bookName),o=this.bookName;return a&&(o=a.value),o}getChapterTitleName(){var a,o;if(!this.libraryInfo)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430.");let c=this.bookChapter?this.bookChapter.name:"1",u=null===(o=null===(a=this.bookContent[0])||void 0===a?void 0:a.parsed)||void 0===o?void 0:o.settings.find(d=>d.name===c),h="";if(u){h=u.value;let d=".txt";h.endsWith(d)&&(h=h.substring(0,h.length-d.length)),+h==+c&&(h="")}return h}getNormalBookNameByBookPath(a){var o;let c=null===(o=this.libraryInfo)||void 0===o?void 0:o.content.find(u=>a.startsWith(u.path));return c?c.name:null}transformLine(a){return this.linesTransformer?this.linesTransformer.transform(a):a}}class AB{constructor(){}static builder(){return new AB}}class IB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.bookName="",this.bookTitle="",this.bookChapter="",this.bookLanguages=[],this.printEventsEmitter=new St,this.printerHandler=null,this.showSettings=!0}static builder(){return new IB("",null,null,AB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setBookName(a){return this.bookName=a,this}setBookTitle(a){return this.bookTitle=a,this}setBookChapter(a){return this.bookChapter=a,this}setBookLanguages(a){return this.bookLanguages=a,this}setEpubPrinterHandler(a){return this.printerHandler=a,this}setShowSettings(a){return this.showSettings=a,this}}const hHe=["booksViewTables"];function dHe(l,a){1&l&&me(0,"app-dynamic-errors",18),2&l&&O("data",X(2).bookTitleData)}const fHe=function(l,a){return{btn:!0,"btn-primary":l,"btn-primary-outline":a,"btn-block":!0}};function pHe(l,a){if(1&l){const o=gt();M(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(u){return Le(o),X(2).showSettings=u}),M(1,"clr-accordion-title"),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),E(),M(3,"clr-accordion-content"),me(4,"app-dynamic-settings"),M(5,"div",25),M(6,"div",26),M(7,"div",27),M(8,"button",28),ee("click",function(){return Le(o),X(2).printBook()}),me(9,"clr-icon",29),ie(10," \u041f\u0435\u0447\u0430\u0442\u044c PDF "),E(),E(),M(11,"div",27),M(12,"button",30),ee("click",function(){return Le(o),X(2).printBookEpub()}),me(13,"clr-icon",31),ie(14," \u041f\u0435\u0447\u0430\u0442\u044c EPUB "),E(),E(),E(),E(),E(),E()}if(2&l){const o=X(2);O("clrAccordionPanelOpen",o.showSettings),P(12),O("ngClass",ds(2,fHe,!o.modalPrintEpubFlag,o.modalPrintEpubFlag))}}function gHe(l,a){if(1&l){const o=gt();M(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(u){return Le(o),X(2).showLanguages=u}),M(1,"clr-accordion-title"),ie(2,"\u042f\u0437\u044b\u043a\u0438 \u0438 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u044b"),E(),M(3,"clr-accordion-content"),me(4,"app-dynamic-content-toolbar",18),E(),E()}if(2&l){const o=X(2);O("clrAccordionPanelOpen",o.showLanguages),P(4),O("data",o.toolbarLangData)}}function mHe(l,a){if(1&l){const o=gt();M(0,"clr-accordion-panel",24),ee("clrAccordionPanelOpenChange",function(u){return Le(o),X(2).showChapters=u}),M(1,"clr-accordion-title"),ie(2,"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435"),E(),M(3,"clr-accordion-content"),me(4,"app-dynamic-content-toolbar",18),E(),E()}if(2&l){const o=X(2);O("clrAccordionPanelOpen",o.showChapters),P(4),O("data",o.toolbarData)}}const vHe=function(l){return{"fade-in-3":!0,"no-print":l}};function _He(l,a){if(1&l&&(M(0,"div",3),me(1,"app-dynamic-errors",18),Z(2,dHe,1,1,"app-dynamic-errors",21),M(3,"clr-accordion",22),Z(4,pHe,15,5,"clr-accordion-panel",23),Z(5,gHe,5,2,"clr-accordion-panel",23),Z(6,mHe,5,2,"clr-accordion-panel",23),E(),E()),2&l){const o=X();O("ngClass",ws(6,vHe,!!o.changesDetectorBookDataText.oldRawValue)),P(1),O("data",o.errorsData),P(1),O("ngIf",o.toolbarLangData),P(2),O("ngIf",o.showSettings),P(1),O("ngIf",o.showLanguages),P(1),O("ngIf",o.showChapters&&!o.staticView)}}function yHe(l,a){if(1&l){const o=gt();M(0,"button",30),ee("click",function(){return Le(o),X(2).onPrev()}),ie(1,"<<"),E()}2&l&&O("ngClass",X(2).getChapterButtonClass())}function bHe(l,a){if(1&l){const o=gt();M(0,"button",30),ee("click",function(){return Le(o),X(2).scrollToText()}),ie(1),E()}if(2&l){const o=X(2);O("ngClass",o.getChapterButtonClass()),P(1),en(o.getCurrentChapterName())}}function CHe(l,a){if(1&l){const o=gt();M(0,"button",30),ee("click",function(){return Le(o),X(2).onNext()}),ie(1,">>"),E()}2&l&&O("ngClass",X(2).getChapterButtonClass())}const xHe=function(l){return{"clr-row":!0,"fade-in-3":!0,"bottom-top-space":!0,"no-print":l}};function wHe(l,a){if(1&l&&(M(0,"div",3),M(1,"div",32),Z(2,yHe,2,1,"button",33),E(),M(3,"div",27),Z(4,bHe,2,2,"button",33),E(),M(5,"div",32),Z(6,CHe,2,1,"button",33),E(),E()),2&l){const o=X();O("ngClass",ws(4,xHe,!!o.changesDetectorBookDataText.oldRawValue)),P(2),O("ngIf",o.bookSvc.isPrevEnabled()),P(2),O("ngIf",o.bookSvc.lineIndexes.length),P(2),O("ngIf",o.bookSvc.isNextEnabled())}}function SHe(l,a){1&l&&(M(0,"div",36),M(1,"div",37),me(2,"app-dynamic-spinner"),E(),E())}function THe(l,a){if(1&l&&(M(0,"span",3),ie(1),E()),2&l){const o=a.$implicit;O("ngClass",o.classes),P(1),en(o.text)}}function DHe(l,a){if(1&l&&(M(0,"div",3),Z(1,THe,2,2,"span",39),E()),2&l){const o=a.$implicit,c=a.index,u=X(3);O("ngClass",u.getColumnClass(c,u.bookSvc.books.length)),P(1),O("ngForOf",u.getBookFragments(c,o,-1))}}function MHe(l,a){if(1&l&&(M(0,"div",38),Z(1,DHe,2,2,"div",39),E()),2&l){const o=X(2);P(1),O("ngForOf",o.bookSvc.books)}}function EHe(l,a){if(1&l){const o=gt();M(0,"div",3),M(1,"span",30),ee("click",function(){Le(o);const u=X().$implicit;return X(2).selectLine(u)}),me(2,"app-add-component",40),E(),E()}if(2&l){const o=a.$implicit,c=a.index,u=X().$implicit,h=X(2);O("ngClass",h.getColumnClass(c,h.bookSvc.books.length)),P(1),O("ngClass",h.getLineSelectionClass(u)),P(1),O("component",h.getComponent(o,u))}}function kHe(l,a){if(1&l&&(M(0,"div",38),Z(1,EHe,3,3,"div",39),E()),2&l){const o=X(2);P(1),O("ngForOf",o.bookSvc.books)}}function AHe(l,a){if(1&l&&(M(0,"div"),Z(1,SHe,3,0,"div",6),Z(2,MHe,2,1,"div",34),Z(3,kHe,2,1,"div",35),E()),2&l){const o=X();P(1),O("ngIf",!o.bookSvc.lineIndexes.length),P(1),O("ngIf",!o.hideUI),P(1),O("ngForOf",o.getBookIndexes(o.bookSvc.lineIndexes))}}function IHe(l,a){1&l&&(M(0,"div",37),me(1,"app-dynamic-spinner"),E())}function PHe(l,a){if(1&l&&(M(0,"span",3),ie(1),E()),2&l){const o=a.$implicit;O("ngClass",o.classes),P(1),en(o.text)}}function OHe(l,a){if(1&l&&(M(0,"div",43),Z(1,PHe,2,2,"span",39),E()),2&l){const o=a.$implicit,c=a.index,u=X(2);O("ngClass",u.getColumnClass(c,u.bookSvc.books.length))("hidden",u.hideUI),P(1),O("ngForOf",u.getBookFragments(c,o,-1))}}function FHe(l,a){1&l&&(M(0,"span",46),ie(1,"."),E())}function RHe(l,a){if(1&l){const o=gt();M(0,"span",30),ee("click",function(){const h=Le(o).$implicit;return X(3).selectLine(h)}),M(1,"span"),me(2,"app-add-component",40),E(),Z(3,FHe,2,0,"span",45),E()}if(2&l){const o=a.$implicit,c=X().$implicit,u=X(2);O("ngClass",u.getLineSelectionClass(o)),P(2),O("component",u.getComponent(c,o)),P(1),O("ngIf",u.isSpaceAppended(c,o))}}function NHe(l,a){if(1&l&&(M(0,"div",3),Z(1,RHe,4,3,"span",44),E()),2&l){const o=a.index,c=X(2);O("ngClass",c.getColumnClass(o,c.bookSvc.books.length)),P(1),O("ngForOf",c.getBookIndexes(c.bookSvc.lineIndexes))}}function LHe(l,a){if(1&l&&(M(0,"div",36),Z(1,IHe,2,0,"div",41),Z(2,OHe,2,3,"div",42),Z(3,NHe,2,2,"div",39),E()),2&l){const o=X();P(1),O("ngIf",!o.bookSvc.lineIndexes.length),P(1),O("ngForOf",o.bookSvc.books),P(1),O("ngForOf",o.bookSvc.books)}}function BHe(l,a){1&l&&(M(0,"div",49),me(1,"app-dynamic-spinner"),E())}function VHe(l,a){if(1&l&&(M(0,"span",3),ie(1),E()),2&l){const o=a.$implicit;O("ngClass",o.classes),P(1),en(o.text)}}function zHe(l,a){if(1&l&&(M(0,"div",3),M(1,"div",50),Z(2,VHe,2,2,"span",39),E(),E()),2&l){const o=a.$implicit,c=a.index,u=X(3);O("ngClass",u.getRowClass(c,u.bookSvc.books.length)),P(2),O("ngForOf",u.getBookFragments(c,o,-1))}}function UHe(l,a){if(1&l&&(M(0,"div",49),Z(1,zHe,3,2,"div",39),E()),2&l){const o=X(2);P(1),O("ngForOf",o.bookSvc.books)}}function HHe(l,a){if(1&l){const o=gt();M(0,"div",3),M(1,"div",50),M(2,"span",30),ee("click",function(){Le(o);const u=X().$implicit;return X(2).selectLine(u)}),me(3,"app-add-component",40),E(),E(),E()}if(2&l){const o=a.$implicit,c=a.index,u=X().$implicit,h=X(2);O("ngClass",h.getRowClass(c,h.bookSvc.books.length)),P(2),O("ngClass",h.getLineSelectionClass(u)),P(1),O("component",h.getComponent(o,u))}}function WHe(l,a){if(1&l&&(M(0,"div",49),Z(1,HHe,4,3,"div",39),E()),2&l){const o=X(2);P(1),O("ngForOf",o.bookSvc.books)}}function GHe(l,a){if(1&l&&(M(0,"div"),Z(1,BHe,2,0,"div",47),Z(2,UHe,2,1,"div",47),Z(3,WHe,2,1,"div",48),E()),2&l){const o=X();P(1),O("ngIf",!o.bookSvc.lineIndexes.length),P(1),O("ngIf",!o.hideUI),P(1),O("ngForOf",o.getBookIndexes(o.bookSvc.lineIndexes))}}function jHe(l,a){1&l&&(M(0,"div",37),me(1,"app-dynamic-spinner"),E())}function $He(l,a){1&l&&(M(0,"span",46),ie(1,"."),E())}function qHe(l,a){if(1&l&&(M(0,"span",3),ie(1),E()),2&l){const o=a.$implicit;O("ngClass",o.classes),P(1),en(o.text)}}function YHe(l,a){if(1&l&&(M(0,"span",3),Z(1,$He,2,0,"span",45),Z(2,qHe,2,2,"span",39),E()),2&l){const o=a.$implicit,c=a.index,u=X(3);O("ngClass",u.getRowClass(c,u.bookSvc.books.length,!1)),P(1),O("ngIf",c>0),P(1),O("ngForOf",u.getBookFragments(c,o,-1))}}function XHe(l,a){if(1&l&&(M(0,"div",50),Z(1,YHe,3,3,"span",39),E()),2&l){const o=X(2);P(1),O("ngForOf",o.bookSvc.books)}}function ZHe(l,a){1&l&&(M(0,"span",46),ie(1,"."),E())}function KHe(l,a){if(1&l){const o=gt();M(0,"span",3),M(1,"span",30),ee("click",function(){Le(o);const u=X().$implicit;return X(2).selectLine(u)}),Z(2,ZHe,2,0,"span",45),me(3,"app-add-component",40),E(),E()}if(2&l){const o=a.$implicit,c=a.index,u=X().$implicit,h=X(2);O("ngClass",h.getRowClass(c,h.bookSvc.books.length,!1)),P(1),O("ngClass",h.getLineSelectionClass(u)),P(1),O("ngIf",c>0||h.isLineIndexed(o,u)),P(1),O("component",h.getComponent(o,u))}}function QHe(l,a){if(1&l&&(M(0,"span"),Z(1,KHe,4,4,"span",39),E()),2&l){const o=X(2);P(1),O("ngForOf",o.bookSvc.books)}}function JHe(l,a){if(1&l&&(M(0,"div",51),Z(1,jHe,2,0,"div",41),Z(2,XHe,2,1,"div",52),M(3,"div",50),Z(4,QHe,2,1,"span",53),E(),E()),2&l){const o=X();P(1),O("ngIf",!o.bookSvc.lineIndexes.length),P(1),O("ngIf",!o.hideUI),P(2),O("ngForOf",o.getBookIndexes(o.bookSvc.lineIndexes))}}function e7e(l,a){if(1&l){const o=gt();M(0,"button",30),ee("click",function(){return Le(o),X(2).onPrev()}),ie(1,"<<"),E()}2&l&&O("ngClass",X(2).getChapterButtonClass())}function t7e(l,a){if(1&l){const o=gt();M(0,"button",30),ee("click",function(){return Le(o),X(2).scrollToText()}),ie(1),E()}if(2&l){const o=X(2);O("ngClass",o.getChapterButtonClass()),P(1),en(o.getCurrentChapterName())}}function n7e(l,a){if(1&l){const o=gt();M(0,"button",30),ee("click",function(){return Le(o),X(2).onNext()}),ie(1,">>"),E()}2&l&&O("ngClass",X(2).getChapterButtonClass())}const i7e=function(l){return{"clr-row":!0,"fade-in-3":!0,"top-space":!0,"no-print":l}};function r7e(l,a){if(1&l&&(M(0,"div",3),M(1,"div",32),Z(2,e7e,2,1,"button",33),E(),M(3,"div",27),Z(4,t7e,2,2,"button",33),E(),M(5,"div",32),Z(6,n7e,2,1,"button",33),E(),E()),2&l){const o=X();O("ngClass",ws(4,i7e,!!o.changesDetectorBookDataText.oldRawValue)),P(2),O("ngIf",o.bookSvc.isPrevEnabled()),P(2),O("ngIf",o.bookSvc.lineIndexes.length),P(2),O("ngIf",o.bookSvc.isNextEnabled())}}function s7e(l,a){if(1&l){const o=gt();M(0,"div",27),M(1,"button",55),ee("click",function(){return Le(o),X(2).printBookEpub()}),me(2,"clr-icon",58),ie(3,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),E(),E()}}const o7e=function(l,a){return{"clr-col-6":l,"clr-col-12":a}};function a7e(l,a){if(1&l){const o=gt();M(0,"div",54),M(1,"div",3),M(2,"button",55),ee("click",function(){return Le(o),X().printBook()}),me(3,"clr-icon",56),ie(4,"\u041f\u0435\u0447\u0430\u0442\u044c PDF"),E(),E(),Z(5,s7e,4,0,"div",57),E()}if(2&l){const o=X();P(1),O("ngClass",ds(2,o7e,o.bookData.enableEpub,!o.bookData.enableEpub)),P(4),O("ngIf",o.bookData.enableEpub)}}function l7e(l,a){if(1&l){const o=gt();M(0,"button",15),ee("click",function(){return Le(o),X().modalPrintEpubFlag=!1}),me(1,"clr-icon",59),ie(2," \u041e\u0442\u043c\u0435\u043d\u0430"),E()}}function c7e(l,a){if(1&l){const o=gt();M(0,"button",14),ee("click",function(){return Le(o),X().onStartPrintEpub()}),me(1,"clr-icon",56),ie(2," \u041f\u0435\u0447\u0430\u0442\u0430\u0442\u044c"),E()}}class KD{constructor(a){this.transformers=a}static builder(){return new KD([])}addTransformer(a){return this.transformers.push(a),this}transform(a){let o=a;return this.transformers.forEach(c=>o=c.transform(o)),o}}class QD{static builder(){return new QD}transform(a){let o="";for(let c=0;c<a.length;c++){let u=a.charAt(c);o+="["==u?"{\u043a}"+u:"]"==u?u+"{/\u043a}":u}return o}}class JD{constructor(a=200){this.maxStringLength=a}static builder(){return new JD}getIndexCount(a,o){let c=0,u=0;for(;u<a.length;){let h=a.indexOf(o,u);h<0?u=a.length:(++c,u=h+o.length)}return c}transform(a){let o=a.indexOf(":"),c=a;if(o>=0&&o<=this.maxStringLength&&o+1==a.length){let u=a.substring(0,o+1),h=u.toLowerCase();[{str:".",count:0},{str:"/",count:0}].map(d=>this.getIndexCount(h,d.str)<=d.count).reduce((d,f)=>f&&d,!0)&&[{str:"\u0442\u0440\u043e\u043f\u0430\u0440",count:1},{str:"\u043a\u043e\u043d\u0434\u0430\u043a",count:1},{str:"\u0433\u043b\u0430\u0441",count:1}].map(d=>this.getIndexCount(h,d.str)>=d.count).reduce((d,f)=>f||d,!1)&&(u.startsWith("*")&&(u=u.substring(1)),c=`{\u043a}${u}{/\u043a}${a.substring(o+1)}`)}return c}}class PB{constructor(a){this.search=a,this.includeWords=[],this.excludeWords=[]}static builder(){return new PB("")}setup(){let a=this.search.split(/\s+/);this.includeWords=[],this.excludeWords=[];for(let o=0;o<a.length;++o)if("\u041d\u0415"==a[o]){if(o+1<a.length){let c=a[++o].trim();c&&this.excludeWords.push(c.toLowerCase())}}else a[o].trim()&&this.includeWords.push(a[o].trim().toLowerCase())}setSearch(a){return this.search=a,this.setup(),this}startsWith(a,o,c){let u="";return c.forEach(h=>{a.startsWith(h,o)&&u.length<h.length&&(u=h)}),u}transform(a){if(0==this.includeWords.length)return a;let o=a.toLowerCase(),c="",u=-1,h=d=>{let f=0;if(u>=0){let p=a.substring(u,d);c+=p,f=p.length,u=-1}return f};for(let d=0;d<a.length;){let f=this.startsWith(o,d,this.includeWords);if(f){let p=d;h(d),c+=`{\u043a}${a.substring(p,p+f.length)}{/\u043a}`,d+=f.length}else u<0&&(u=d),++d}return h(a.length),c}}let fc=(()=>{class l{constructor(o,c,u,h,d,f,p){this.config=o,this.uiConfig=c,this.cacheService=u,this.bookmarksSvc=h,this.memorialSvc=d,this.themeSvc=f,this.audioSvc=p,this.ready=!1,this.bookTitleData=iu.builder(),this.errorsData=iu.builder(),this.stgShowSettings=Cg.builder(),this.stgLanguages=Cg.builder(),this.stgChapters=Cg.builder(),this.allSettings=AD.builder().add(this.stgShowSettings).add(this.stgLanguages).add(this.stgChapters),this.changesDetectorSendReadyMessage=Ds.builder(),this.changesDetectorBookDataText=Ds.builder(),this.changesDetectorFacePage=Ds.builder(),this.changesDetectorErrors=Ds.builder(),this.changesDetectorNewTitle=Ds.builder(),this.changesDetectorRequestedPrintLogName=Ds.builder(),this.changesDetectorLanguages=Ds.builder(),this.changesDetectorChapters=Ds.builder(),this.changesDetectorChapters2=Ds.builder(),this.changesDetectorChapters3=Ds.builder(),this.menuLinksOld=null,this.menuLinks=null,this.dToolbarLangData=dc.builder().setItems([]).setOnClick(g=>{g.setSelected(!g.selected),this.bookSvc.toggleLanguage(g.tag).reloadBooks(),this.saveChapter()}),this.dToolbarData=dc.builder().setItems([]).setOnClick(g=>{if(this.toolbarData.items.forEach(m=>m.setSelected(m===g)),"\u0412\u0441\u0435"==g.text){let m=this.bookSvc.getShortBookName(null),v=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(v){let y=v.parsed.content.map(b=>`${m}.${b.name}:1-1000!/*\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.div('\u0440\u0430\u0437\u0440\u044b\u0432\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u043b\u044c\u043a\u043e\u041f\u0440\u0438\u041f\u0435\u0447\u0430\u0442\u0438', '', '');*/`).join("\r\n");this.changesDetectorBookDataText.checkAndUpdate(y),this.bookSvc.loadBookByPageText(y,!1,"")}}else this.changesDetectorBookDataText.checkAndUpdate(""),this.bookSvc.bookContent.length?this.bookSvc.loadPage(g.text):this.config.post(()=>{this.uiConfig.ui.currentChapter.setStringValue(g.text),this.bookSvc.clear(void 0,void 0,void 0,void 0,!0),this.reload()});this.saveChapter()}),this.startLineSelection=-1,this.endLineSelection=-1,this.modalAddBookmarkFlag=!1,this.modalPrintEpubFlag=!1,this.printEpubData=IB.builder(),this.printEpubDataEventsSubscription=null,this.printing=!1,this.requestedPrintLogName="",this.printLogName="\u041a\u043d\u0438\u0433\u0438",this.workerSvc=Yo.builder(),this.bookServerSvc=new nL((g,m)=>{this.config.post(()=>{this.bookSvc.post(g,m)})}),this.bookSvc=new kB((g,m)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(m):this.bookServerSvc.post(g,m)})}),this.handleMemorialNewTitleTargetSubscriptioin=null}get showSettings(){return this.stgShowSettings.enabled}set showSettings(o){this.stgShowSettings.setEnabled(o)}get showLanguages(){return this.stgLanguages.enabled}set showLanguages(o){this.stgLanguages.setEnabled(o)}get showChapters(){return this.stgChapters.enabled}set showChapters(o){this.stgChapters.setEnabled(o)}get toolbarLangData(){return this.syncToolbarData(),this.dToolbarLangData}get toolbarData(){return this.syncToolbarData(),this.dToolbarData}get staticView(){return this.bookData.link&&(this.bookData.link.textIsPage||this.bookData.link.chapter&&(this.bookData.link.startLine>0||this.bookData.link.endLine>0))}get hideUI(){return this.bookData.hideUI}get showPrintButtons(){return this.bookData.showPrintButtons}getMenuLinks(){return this.menuLinks||(this.menuLinks=this.bookData.menuLinks,null!=this.menuLinks||(this.menuLinks=[],["\u043c\u0435\u043d\u044e","\u043a\u043d\u0438\u0433\u0430","\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438","\u0441\u043f\u0440\u0430\u0432\u043a\u0430"].forEach(o=>{switch(o){case"\u043c\u0435\u043d\u044e":this.menuLinks.push(Hn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a":this.menuLinks.push(Hn.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a").setShape("users").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("")},0)}).setIsActive(()=>!1));break;case"\u043a\u043d\u0438\u0433\u0430":this.menuLinks.push(Hn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0430").setShape("book").setIsActive(()=>!0));break;case"\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438":this.menuLinks.push(Hn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438")},0)}).setIsActive(()=>!1));break;case"\u0441\u043f\u0440\u0430\u0432\u043a\u0430":this.menuLinks.push(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.config.post(()=>{this.bookData.link.route("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")},0)}).setIsActive(()=>{var c;let u=null===(c=this.bookSvc.bookInfo)||void 0===c?void 0:c.settings.find(h=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==h.name.toLowerCase());return!!u&&"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"==u.value}))}}))),this.menuLinks}saveChapter(){var o,c;if(this.bookSvc.bookChapter){this.uiConfig.ui.currentChapter.setStringValue(this.bookSvc.bookChapter.name),this.uiConfig.ui.currentLanguages.setStringValue(this.bookSvc.bookLanguages.join("|"));let u=null===(o=this.bookSvc.bookInfo)||void 0===o?void 0:o.settings.find(f=>"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"==f.name.toLowerCase()),h=null===(c=this.bookSvc.libraryInfo)||void 0===c?void 0:c.content.find(f=>f.name==this.bookSvc.bookName),d=h?h.path2[0]+". "+this.bookSvc.bookChapter.name:"";this.uiConfig.ui.currentBookName.setStringValue(u?u.value:""),this.uiConfig.ui.currentBookLink.setStringValue(d)}}get parallel(){return null!=this.bookData.parallel?this.bookData.parallel:this.uiConfig.ui.parallel.getAndVerifyBooleanValue()}get lineBreaks(){return null!=this.bookData.linebreaks?this.bookData.linebreaks:this.uiConfig.ui.lineBreaks.getAndVerifyBooleanValue()}get bookData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){this.bookData.printerHandler.setHandler(o=>this.onPrintEpub(o)),this.bookSvc.onNewTitleEvent.setOnEventHandler((o,c)=>this.requestedPrintLogName=""+c),this.bookData.handleMemorialNewTitleTarget&&(this.handleMemorialNewTitleTargetSubscriptioin&&this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=this.config.messageBus.addTargetHandler(this.bookData.handleMemorialNewTitleTarget,o=>{"MemorialNewTitle"===o.type&&this.config.post(()=>{this.requestedPrintLogName=""+o.text})}))}ngOnDestroy(){this.handleMemorialNewTitleTargetSubscriptioin&&(this.handleMemorialNewTitleTargetSubscriptioin.unsubscribe(),this.handleMemorialNewTitleTargetSubscriptioin=null),this.bookSvc.onNewTitleEvent.setOnEventHandler(null),this.bookSvc.onPageLoadEvent.setOnEventHandler(null),this.workerSvc.unsubscribe(),this.staticView||this.config.post(()=>{this.menuLinksOld&&this.menuLinksOld.unsubscribe()},0),this.bookSvc.onDestroy()}ngAfterViewInit(){this.changesDetectorSendReadyMessage.checkAndUpdate(!1),this.memorialSvc.isReady().then(o=>{o.success?this.memorialSvc.getMemorials()?this.onMyInit():this.memorialSvc.reloadMemorials(()=>{this.onMyInit()}):this.onMyInit()},o=>{this.onMyInit()})}onMyInit(){this.clearSelection(),(!this.staticView||this.bookData.forceMenu)&&this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.getMenuLinks())},0),this.bookTitleData.setActions([Ol.builder().setText("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setOnClick(()=>{this.showSettings=!this.showSettings}),Ol.builder().setText("\u0413\u043b\u0430\u0432\u044b").setEnabled(!this.staticView).setOnClick(()=>{this.showChapters=!this.showChapters}),Ol.builder().setText("\u042f\u0437\u044b\u043a\u0438").setOnClick(()=>{this.showLanguages=!this.showLanguages})]),this.workerSvc.enabled()?this.workerSvc.setOnMessage(o=>{this.config.post(()=>{this.bookSvc.post(null,o)})}):this.bookServerSvc.setCacheService(new tL(new nS)),this.bookSvc.setLineTransformer(this.bookData.search?KD.builder().addTransformer(QD.builder()).addTransformer(JD.builder()).addTransformer(PB.builder().setSearch(this.bookData.search)):KD.builder().addTransformer(QD.builder()).addTransformer(JD.builder())),this.bookSvc.onPageLoadEvent.setOnEventHandler(o=>{this.config.post(()=>this.scrollToText(),100)}),this.bookSvc.onRouteEvent.setOnEventHandler((o,c)=>{this.config.post(()=>this.bookData.link.route(c),100)}),this.bookSvc.setUIConfig(this.uiConfig).setConfig(this.config).setMemorial(this.memorialSvc).setAudio(this.audioSvc),this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()),this.reload(),this.ready=!0}reload(){let o=this.bookData.link.languages&&this.bookData.link.languages.length>0?this.bookData.link.languages:this.uiConfig.ui.currentLanguages.getStringValue().split("|").filter(c=>!!c);this.bookData.link.textIsPage?(this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text),this.bookSvc.loadBookByPageText(this.bookData.text)):this.bookSvc.loadBookByName(this.bookData.text,o,this.staticView?this.bookData.link.chapter:this.uiConfig.ui.currentChapter.getStringValue())}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}showMenu(){this.bookData&&this.bookData.link&&this.bookData.link.route&&this.bookData.link.route("")}getColumnClass(o,c){var u,h,d,f;let p=12,g=p/c,m=0;for(let _=0;_<=o;_++)m=_%2?Math.floor(g):Math.ceil(g),m>p&&(m=p),p-=m;let v={};return v["clr-col-"+m]=!0,v["bg-3"]=o%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),v.altText=o%2,v.cs=null===(h=null===(u=this.bookSvc.bookContent[o])||void 0===u?void 0:u.parsed)||void 0===h?void 0:h.settings.find(_=>"\u044f\u0437\u044b\u043a"===_.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439"===_.value.toLowerCase()),v.cs2=null===(f=null===(d=this.bookSvc.bookContent[o])||void 0===d?void 0:d.parsed)||void 0===f?void 0:f.settings.find(_=>"\u044f\u0437\u044b\u043a"===_.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-ucs8"===_.value.toLowerCase()),v["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,v["fade-in-3"]=!0,v}getRowClass(o,c,u=!0){var h,d,f,p;let g=12,m=g/c,v=0;for(let y=0;y<=o;y++)v=y%2?Math.floor(m):Math.ceil(m),v>g&&(v=g),g-=v;let _={};return _["clr-row"]=u,_["bg-3"]=o%2&&this.uiConfig.ui.coloredTranslations.getBooleanValue(),_.altText=o%2,_.cs=null===(d=null===(h=this.bookSvc.bookContent[o])||void 0===h?void 0:h.parsed)||void 0===d?void 0:d.settings.find(y=>"\u044f\u0437\u044b\u043a"===y.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439"===y.value.toLowerCase()),_.cs2=null===(p=null===(f=this.bookSvc.bookContent[o])||void 0===f?void 0:f.parsed)||void 0===p?void 0:p.settings.find(y=>"\u044f\u0437\u044b\u043a"===y.name.toLowerCase()&&"\u0446\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439-ucs8"===y.value.toLowerCase()),_["s"+this.uiConfig.ui.fontSize.getStringValue()]=!0,_["fade-in-3"]=!0,_}translateLanguageName(o){let c=o.replace(/\u0426\u0435\u0440\u043a\u043e\u0432\u043d\u043e\u0441\u043b\u0430\u0432\u044f\u043d\u0441\u043a\u0438\u0439/gi,"\u0426\u0421");return c=c.replace(/\u0413\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u0439/gi,"\u0413\u0440"),c=c.replace(/\u0420\u0443\u0441\u0441\u043a\u0438\u0439/gi,"\u0420\u0443\u0441"),c}syncToolbarData(){var o,c;if(this.bookData.link.textIsPage&&this.changesDetectorBookDataText.checkAndUpdate(this.bookData.text))return void this.config.post(()=>{this.bookSvc.loadBookByPageText(this.bookData.text)});if(this.ready&&this.changesDetectorFacePage.checkAndUpdate(this.uiConfig.ui.showFacePage.getBooleanValue()))return void this.config.post(()=>{this.bookSvc.clear(!0,!0,[],!0,!0),this.reload()});let u=this.changesDetectorErrors.checkAndUpdate(this.bookSvc.errors),h=!1,d="";if(this.bookSvc.bookInfo){if(this.requestedPrintLogName)d=this.requestedPrintLogName;else{d=this.bookSvc.getBookTitleName();let g=this.bookSvc.getChapterTitleName();d&&g&&(d+=": "+g)}h=this.changesDetectorNewTitle.checkAndUpdate(d)}else h=this.changesDetectorNewTitle.checkAndUpdate("")||this.changesDetectorRequestedPrintLogName.checkAndUpdate(this.requestedPrintLogName),h&&(d=this.requestedPrintLogName?this.requestedPrintLogName:this.config.getApplication().name);let f=this.changesDetectorLanguages.checkAndUpdate(null===(o=this.bookSvc.bookInfo)||void 0===o?void 0:o.content),p=this.changesDetectorChapters.checkAndUpdate(this.bookSvc.bookContent)||this.changesDetectorChapters2.checkAndUpdate(this.bookSvc.bookContent.length)||this.changesDetectorChapters3.checkAndUpdate(null===(c=this.bookSvc.bookChapter)||void 0===c?void 0:c.name);(u||h||f||p)&&this.config.post(()=>{u&&this.syncErrors(),h&&this.syncBookTitleData(d,d?[d]:[]),f&&this.syncLanguages(),p&&this.syncChapters()})}syncErrors(){this.errorsData.setErrors(this.bookSvc.errors)}syncBookTitleData(o,c){this.printLogName=o,this.bookTitleData.errors[0]!=o&&(this.bookTitleData.setErrors(c),this.bookTitleData.classes.setAlertClass("alert-success").setAlertShape(""))}syncLanguages(){var o;this.dToolbarLangData.items.length!=(null===(o=this.bookSvc.bookInfo)||void 0===o?void 0:o.content.length)&&this.dToolbarLangData.setItems([]),this.bookSvc.bookInfo&&this.bookSvc.bookInfo.content.forEach((c,u)=>{u+1>this.dToolbarLangData.items.length?this.dToolbarLangData.items.push(ko.builder().setText(this.translateLanguageName(c.name)).setTag(c.name).setSelected(this.bookSvc.isLanguageEnabled(c.name))):this.dToolbarLangData.items[u].setText(this.translateLanguageName(c.name)).setTag(c.name).setSelected(this.bookSvc.isLanguageEnabled(c.name))})}syncChapters(){let o=this.bookSvc.bookContent.length?this.bookSvc.bookContent[0]:null;if(o){let c=1,u=o.parsed.content;c+u.length!=this.dToolbarData.items.length&&(this.dToolbarData.items=[]),0==this.dToolbarData.items.length?this.dToolbarData.items.push(ko.builder().setText("\u0412\u0441\u0435").setTag("\u0412\u0441\u0435")):this.dToolbarData.items[0].setText("\u0412\u0441\u0435").setSelected(!1),u.forEach((h,d)=>{var f;d+1+c>this.dToolbarData.items.length?this.dToolbarData.items.push(ko.builder().setText(h.name).setSelected(!1)):this.dToolbarData.items[d+c].setText(h.name).setSelected((null===(f=this.bookSvc.bookChapter)||void 0===f?void 0:f.name)===h.name)}),null==this.dToolbarData.items.find(h=>h.selected)&&this.dToolbarData.items.length&&this.dToolbarData.items[0+c].setSelected(!0)}}getBookFragments(o,c,u){var h,d;let f=null===(d=null===(h=this.bookSvc.bookContent[o])||void 0===h?void 0:h.parsed)||void 0===d?void 0:d.settings.find(v=>"\u044f\u0437\u044b\u043a"===v.name.toLowerCase()),p=f?f.value:"";p=p||(this.bookSvc.bookLanguages.length?this.bookSvc.bookLanguages[0]:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"),p.endsWith("-UCS8")&&(p=p.substring(0,p.length-5));let g=this.uiConfig.ui.coloredTranslations.getBooleanValue();return u<0?[ns.builder().setText(p).setClasses({red:!(g&&o%2),redDark:g&&!!(o%2)})]:c.\u0441\u0442\u0440\u043e\u043a\u0438[u].fragments}isSpaceAppended(o,c){return o.\u0441\u0442\u0440\u043e\u043a\u0438[c].fragments.length>0&&c+1!=this.bookSvc.lineIndexes.length}isLineIndexed(o,c){return c>0&&o.\u0441\u0442\u0440\u043e\u043a\u0438[c].fragments.length>0&&o.\u0441\u0442\u0440\u043e\u043a\u0438[c].\u0438\u043d\u0434\u0435\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0430}clearSelection(){return this.startLineSelection=this.endLineSelection=-1,this}onPrev(){this.clearSelection(),this.bookSvc.loadPrevPage(),this.saveChapter()}onNext(){this.clearSelection(),this.bookSvc.loadNextPage(),this.saveChapter()}getCurrentChapterName(){return this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"\u041c\u0435\u043d\u044e"}scrollToText(){this.staticView||(this.booksViewTables.nativeElement.scrollIntoView(!0),this.saveChapter()),this.changesDetectorSendReadyMessage.checkAndUpdate(!0)&&this.config.messageBus.putMessage(o0.builder().setSender(this.bookData.id).setTarget(this.bookData.targetId))}getChapterButtonClass(){let o={btn:!0,"btn-block":!0,"btn-link":!0,greenBtn:!0};return o["hs"+this.uiConfig.ui.fontSize.getStringValue()]=!0,o}isLineSelected(o,c=!1,u=!0){let h=this.bookSvc.getShortBookName(),d=Fv.builder(),f=c&&this.bookmarksSvc.getBookmarks().map(g=>{let m=d.parse(g);if(m&&m.length&&m[0].length){let v=m[0][0];if(v.type===Xa.Link)return v}return null}).filter(g=>null!=g).filter(g=>g.name===h).filter(g=>{var m;return(null===(m=this.bookSvc.bookChapter)||void 0===m?void 0:m.name)==""+g.startChapter}).filter(g=>(g.startLine<0||g.startLine<=o)&&(g.endLine<0||o<=g.endLine)).length>0,p=this.startLineSelection>=0&&this.startLineSelection==o||this.startLineSelection>=0&&this.startLineSelection<=o&&this.endLineSelection>=0&&o<=this.endLineSelection;return!this.staticView&&(f&&!p||u&&p)}isSelectionEnabled(){return!this.staticView&&"\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP"!=this.bookSvc.bookName}getLineSelectionClass(o){let c=this.isSelectionEnabled();return{"bg-4":c&&this.isLineSelected(o,!1,!0),"bg-5":c&&this.isLineSelected(o,!0,!1),cursor:c&&!this.staticView}}getComponent(o,c){return o.\u0441\u0442\u0440\u043e\u043a\u0438[c].\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442}getBookIndexes(o){let c=0;!this.bookData.link.logical&&this.bookSvc.books.length&&(c=Math.max(0,1-this.bookSvc.books[0].\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a));let u=this.bookData.link.startLine>=0?this.bookData.link.startLine:0,h=this.bookData.link.endLine>=0?this.bookData.link.endLine:this.bookData.link.startLine>=0?this.bookData.link.startLine:1e3;return 0==u&&1e3==h?o:o.filter(d=>u<=d+c&&d+c<=h)}selectLine(o){if(this.hideUI||!this.isSelectionEnabled())return this;if(this.startLineSelection<0)this.startLineSelection=o,this.endLineSelection=-1;else if(this.startLineSelection==o)this.endLineSelection=o,this.modalAddBookmarkFlag=!0;else if(this.endLineSelection<0){this.endLineSelection=o;let c=Math.min(this.startLineSelection,this.endLineSelection);this.endLineSelection=Math.max(this.startLineSelection,this.endLineSelection),this.startLineSelection=c}else this.isLineSelected(o,!1,!0)?this.modalAddBookmarkFlag=!0:(this.startLineSelection=-1,this.endLineSelection=-1);return this}onAddBookmark(){var o;if(this.startLineSelection>0){let c=this.bookSvc.getShortBookName();this.bookmarksSvc.addBookmark(c,null===(o=this.bookSvc.bookChapter)||void 0===o?void 0:o.name,this.startLineSelection,this.endLineSelection),this.startLineSelection=this.endLineSelection=-1}return this.modalAddBookmarkFlag=!1,this}onNotAddBookmark(){this.startLineSelection=this.endLineSelection=-1,this.modalAddBookmarkFlag=!1}getAllTextClass(){return this.syncToolbarData(),{ftext:this.uiConfig.ui.fineText.getBooleanValue()}}printBook(){let o=this.bookSvc.getBookTitleName(),c=this.bookSvc.getChapterTitleName();o&&c&&(o+=": "+c),this.themeSvc.printWindow(o)||window.print()}printBookEpub(){var o;let c=this.bookSvc.bookName;c&&(this.printEpubData.setBookName(c).setBookTitle(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookChapter(this.bookSvc.bookChapter?this.bookSvc.bookChapter.name:"").setBookLanguages(this.bookSvc.bookLanguages).setEpubPrinterHandler(this.bookData.printerHandler).setShowSettings(!this.bookData.autoPrint),null===(o=this.printEpubDataEventsSubscription)||void 0===o||o.unsubscribe(),this.printEpubDataEventsSubscription=this.printEpubData.printEventsEmitter.subscribe({next:u=>{"stop"==u?(this.onStopPrintEpub(),this.printing=!1):(u="print")&&(this.printing=!0)}}),this.modalPrintEpubFlag=!0,this.bookData.autoPrint&&this.config.post(()=>{this.onStartPrintEpub()},500))}onStartPrintEpub(){this.printEpubData.printEventsEmitter.emit("print")}onStopPrintEpub(){this.modalPrintEpubFlag=!1}onPrintEpub(o){var c;let u=this.bookSvc.bookName.indexOf("VZ")>=0||this.bookSvc.bookName.indexOf("NZ")>=0,h=this.bookSvc.getChapterTitleName();!h&&this.bookSvc.bookChapter&&(h=null===(c=this.bookSvc.bookChapter)||void 0===c?void 0:c.name);let d="\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430";h||(h=this.config.getApplication().name,d="");let f=()=>Iv.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setBookNames(this.bookSvc.bookLanguages).setPsalomName(d).setAllBooksChapters([]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(u),p=f(),g=()=>{if(p.allBooks.length>1||p.allBooks[0].length>0){let v=p.allBooks.map((_,y)=>_.map((b,x)=>b.length>p.emptyFirstLines[y][x]).reduce((b,x,C,w)=>b||x,!1)).reduce((_,y,b,x)=>_||y,!1);!v&&0===o.requestsPack.length&&(v=this.bookSvc.getBookTitleName()!=p.name,p.setShowMiddleContent(!1)),v&&o.addRequest(p)}p=f()},m=(v,_,y)=>{let b="",x=!0,C=0,w=null,S=(D,T=!1)=>{if(w&&w.length>0){let A=v().allBooks.length-1,I=v().allBooks[A];for(;y+1>I.length;)I.push([]);let N=I[y];if(N&&N.push(...w),0==y)for(;A+1>v().allBooksChapters.length;)v().allBooksChapters.push(`${h}`);w=null,T&&g()}};_.\u0441\u0442\u0440\u043e\u043a\u0438.forEach((D,T)=>{let A=!0,N=!1,k=(B=!1,V=!1)=>{N||(A&&(null==w&&(w=[]),(x&&T-C==0||!b)&&++v().emptyFirstLines[v().emptyFirstLines.length-1][y],w.push(b)),A=!0,b="",x=!0,B&&(S(0,V),C=T),N=!0)},F=B=>{N=!1,b+=B.text,x=x&&(!B.text||(B=>!(!(null==B?void 0:B.red)&&!(null==B?void 0:B.redDark)))(B.classes));let V=$=>{var q,L,U;if($.component===l){let z=$.data;k(!0,!0),z.printerHandler.print(o)}else if($.component===gL){let z=$.data;(null===(q=z.config.link)||void 0===q?void 0:q.link)&&(b+=`${z.config.link.link.name}.${z.config.link.link.startChapter}:${z.config.link.link.startLine}-${z.config.link.link.endLine}`.replace("-1000","+"),x=!1),(null===(U=null===(L=z.config.link)||void 0===L?void 0:L.link)||void 0===U?void 0:U.opened)&&(k(!0,!0),z.printerHandler.print(o))}else if($.component===BD){let z=$.data;if(z.config.book){k(!0,!0);let W=Iv.builder().setName(this.bookTitleData.errors.length?this.bookTitleData.errors[0]:this.bookSvc.bookName).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setBookNames(this.bookSvc.bookLanguages).setAllBooksChapters([`${h}`]).setAllBooks([[]]).setEmptyFirstLines([[0]]).setShowLineIndexes(!0);m(()=>W,z.config.book,0)}}else if($.component===_ne){let z=$.data;k(!0,!0),z.printerHandler.print(o)}else if($.component===eB){let z=$.data;z.components.length&&z.components.forEach(W=>V(W))}};B.component&&V(B.component)};N=!1,D.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.forEach(B=>{F(B)}),k()}),S()};this.bookSvc.books.forEach((v,_)=>{m(()=>p,v,_)}),g()}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(ad),R(Ov),R(Av),R(Ls),R(Rv))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-library-book"]],viewQuery:function(o,c){if(1&o&&ti(hHe,5),2&o){let u;Vt(u=zt())&&(c.booksViewTables=u.first)}},inputs:{data:"data"},decls:34,vars:16,consts:[[3,"click"],[3,"enabled","name"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["booksViewTables",""],[4,"ngIf"],["class","clr-row mainText",4,"ngIf"],["class","mainText fade-in-3 clr-row",4,"ngIf"],["class","clr-row no-print top-space fade-in-3",4,"ngIf"],[1,"s0",3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","add-text"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["shape","times"],[1,"bottom-space"],[3,"data"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[3,"data",4,"ngIf"],[1,"no-print"],["class","fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange",4,"ngIf"],[1,"fade-in-3",3,"clrAccordionPanelOpen","clrAccordionPanelOpenChange"],[1,"bottom-top-space"],[1,"clr-row"],[1,"clr-col-6"],[1,"btn","btn-primary","btn-block",3,"click"],["shape","printer",1,"is-solid"],[3,"ngClass","click"],["shape","book",1,"is-solid"],[1,"clr-col-3","no-print"],[3,"ngClass","click",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngIf"],["class","clr-row mainText fade-in-3",4,"ngFor","ngForOf"],[1,"clr-row","mainText"],[1,"clr-col-12","fade-in-3"],[1,"clr-row","mainText","fade-in-3"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"component"],["class","clr-col-12 fade-in-3",4,"ngIf"],[3,"ngClass","hidden",4,"ngFor","ngForOf"],[3,"ngClass","hidden"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","hidden",4,"ngIf"],[1,"hidden"],["class","mainText fade-in-3",4,"ngIf"],["class","mainText fade-in-3",4,"ngFor","ngForOf"],[1,"mainText","fade-in-3"],[1,"clr-col-12"],[1,"mainText","fade-in-3","clr-row"],["class","clr-col-12",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"clr-row","no-print","top-space","fade-in-3"],["type","button",1,"btn","btn-link","btn-block",3,"click"],["shape","printer"],["class","clr-col-6",4,"ngIf"],["shape","book"],["shape","ban"]],template:function(o,c){1&o&&(M(0,"div",0),ee("click",function(h){return h.stopPropagation()}),me(1,"app-print-logo",1),Z(2,_He,7,8,"div",2),Z(3,wHe,7,6,"div",2),M(4,"div",3,4),Z(6,AHe,4,3,"div",5),Z(7,LHe,4,3,"div",6),Z(8,GHe,4,3,"div",5),Z(9,JHe,5,3,"div",7),Z(10,r7e,7,6,"div",2),Z(11,a7e,6,5,"div",8),E(),M(12,"clr-modal",9),ee("clrModalOpenChange",function(h){return c.modalAddBookmarkFlag=h}),M(13,"h3",10),ie(14,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),E(),M(15,"div",11),me(16,"clr-icon",12),ie(17," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),E(),M(18,"div",13),M(19,"button",14),ee("click",function(){return c.onAddBookmark()}),me(20,"clr-icon",12),ie(21,"\u0414\u0430"),E(),M(22,"button",15),ee("click",function(){return c.onNotAddBookmark()}),me(23,"clr-icon",16),ie(24,"\u041d\u0435\u0442"),E(),E(),E(),M(25,"clr-modal",9),ee("clrModalOpenChange",function(h){return c.modalPrintEpubFlag=h}),M(26,"h3",10),ie(27,"\u041f\u0435\u0447\u0430\u0442\u044c EPUB"),E(),M(28,"div",11),M(29,"div",17),me(30,"app-dynamic-print-epub",18),E(),E(),M(31,"div",13),Z(32,l7e,3,0,"button",19),Z(33,c7e,3,0,"button",20),E(),E(),E()),2&o&&(P(1),O("enabled",c.bookData.facePage)("name",c.printLogName),P(1),O("ngIf",!c.hideUI),P(1),O("ngIf",!c.staticView),P(1),O("ngClass",c.getAllTextClass()),P(2),O("ngIf",c.parallel&&c.lineBreaks),P(1),O("ngIf",c.parallel&&!c.lineBreaks),P(1),O("ngIf",!c.parallel&&c.lineBreaks),P(1),O("ngIf",!c.parallel&&!c.lineBreaks),P(1),O("ngIf",!c.staticView),P(1),O("ngIf",c.showPrintButtons),P(1),O("clrModalOpen",c.modalAddBookmarkFlag),P(13),O("clrModalOpen",c.modalPrintEpubFlag),P(5),O("data",c.printEpubData),P(2),O("ngIf",!c.printing),P(1),O("ngIf",!c.printing))},styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();function u7e(l,a){1&l&&me(0,"app-add-component",5),2&l&&O("component",X(2).containerData.component)}const h7e=function(){return{"content-container":!0}},d7e=function(){return{"content-area":!0}};function f7e(l,a){if(1&l&&(M(0,"div",2),M(1,"div",3),M(2,"div",3),Z(3,u7e,1,1,"app-add-component",4),E(),E(),E()),2&l){const o=X();P(1),O("ngClass",Ra(3,h7e)),P(1),O("ngClass",Ra(4,d7e)),P(1),O("ngIf",o.containerData.component)}}function p7e(l,a){1&l&&me(0,"app-add-component",5),2&l&&O("component",X(2).containerData.component)}function g7e(l,a){if(1&l&&(M(0,"div",6),Z(1,p7e,1,1,"app-add-component",4),E()),2&l){const o=X();P(1),O("ngIf",o.containerData.component)}}let Za=(()=>{class l{constructor(o){this.config=o}get containerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-container"]],inputs:{data:"data"},decls:2,vars:2,consts:[["class","main-container",4,"ngIf"],["class","myContainer",4,"ngIf"],[1,"main-container"],[3,"ngClass"],[3,"component",4,"ngIf"],[3,"component"],[1,"myContainer"]],template:function(o,c){1&o&&(Z(0,f7e,4,5,"div",0),Z(1,g7e,2,1,"div",1)),2&o&&(O("ngIf",c.containerData&&!1),P(1),O("ngIf",c.containerData))},directives:[mn,Xn,Pl],styles:[".myContainer[_ngcontent-%COMP%]{padding:1em}"]}),l})();class OB{constructor(){}static builder(){return new OB}}class zs extends Pi{constructor(a,o,c,u,h){super(a,o,c),this.classes=u,this.component=h}static builder(){return new zs("",null,null,OB.builder(),null)}setComponent(a){return this.component=a,this}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}function m7e(l,a){if(1&l&&(M(0,"div"),me(1,"app-add-component",2),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}let v7e=(()=>{class l{constructor(o,c){this.config=o,this.uiConfig=c,this.components=[new On(lne,zD.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u041a\u043d\u043e\u043f\u043a\u0438").setOnClick(u=>{if(u.text="\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u044f: "+u.tag.data++,u.classes.outline){let h=["primary","success","danger"],d=h.indexOf(u.classes.type);d=(d+1)%h.length,u.classes.type=h[d]}u.classes.outline=!u.classes.outline}).setTag(new xg(0))),new On(eB,jD.builder().setText("\u0422\u0435\u043a\u0441\u0442 \u0434\u043b\u044f div."))]}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){}reset(){this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(""),this.components=[new On(Xte,hC.builder().setOnClick(o=>{this.routeTo(o.trim())}))]}routeTo(o){o!=this.uiConfig.ui.currentBook.getStringValue()&&this.uiConfig.ui.currentBook.setStringValue(o),this.components=[new On(Za,zs.builder().setComponent(new On(fc,Ya.builder().setText(o).setLink(qa.builder().setOnRoute(c=>{c?this.routeTo(c.trim()):this.reset()})))))]}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-component"]],decls:2,vars:1,consts:[[1,"ftext","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,m7e,2,1,"div",1),E()),2&o&&(P(1),O("ngForOf",c.components))},directives:[fi,Pl],styles:[""]}),l})();class FB{constructor(a,o){this.name=a,this.items=o,this.pageName=""}}class RB{constructor(a,o){this.name=a,this.items=o,this.activeNumberPage=""}}var yo=(()=>(function(l){l[l.Replace=0]="Replace",l[l.Add=1]="Add",l[l.Intersect=2]="Intersect",l[l.Remove=3]="Remove"}(yo||(yo={})),yo))();class _7e{constructor(){this.searchDataItems=[]}clear(){this.searchDataItems=[]}mergeSearchInfos(a,o,c){let u=[];switch(c){case yo.Intersect:a.forEach(h=>{let d=o.find(f=>f.line==h.line);d&&(u.push(h),h.column!=d.column&&u.push(d))});break;case yo.Add:u.push(...a),u.push(...o);break;case yo.Remove:a.forEach(h=>{null==o.find(f=>f.line==h.line)&&u.push(h)});break;case yo.Replace:u=o}return u.sort((h,d)=>h.line-d.line),u}mergeSearchDatas(a,o,c){let u=[],h=()=>{a.forEach(d=>{let f=o.find(p=>d.name==p.name);if(null!=f){let p=this.mergeSearchInfos(d.items,f.items,c);p.length&&u.push(new FB(d.name,p))}})};switch(c){case yo.Intersect:h();break;case yo.Add:h(),o.forEach(d=>{null==a.find(p=>d.name==p.name)&&u.push(d)}),a.forEach(d=>{null==o.find(p=>d.name==p.name)&&u.push(d)});break;case yo.Remove:a.forEach(d=>{let f=o.find(p=>d.name==p.name);if(null!=f){let p=this.mergeSearchInfos(d.items,f.items,c);p.length&&u.push(new FB(d.name,p))}else u.push(d)});break;case yo.Replace:u=o}return u}mergeSearchData(a,o=yo.Replace){let c=[],u=()=>{this.searchDataItems.forEach(h=>{let d=a.find(f=>f.name==h.name);if(d){let f=this.mergeSearchDatas(h.items,d.items,o);f.length&&c.push(new RB(d.name,f))}})};0==this.searchDataItems.length?c=a:o==yo.Intersect?u():o==yo.Add?(u(),this.searchDataItems.forEach(h=>{a.find(f=>f.name==h.name)||c.push(h)}),a.forEach(h=>{this.searchDataItems.find(f=>f.name==h.name)||c.push(h)})):o==yo.Remove&&this.searchDataItems.forEach(h=>{let d=a.find(f=>f.name==h.name);if(d){let f=this.mergeSearchDatas(h.items,d.items,o);f.length&&c.push(new RB(d.name,f))}else c.push(h)}),this.searchDataItems=c}}class y7e{constructor(a,o){this.searcher=a,this.config=o,this.langProps=[],this.results=new _7e,this.maxElemenetsOnPageCount=10,this.searchedPages=[],this.currentPage=-1,this.searchObject={search:""},this.search="",this.searchIndex=0,this.searchRemainsCount=0}onSearch(a,o,c){if(this.searchedPages=[],this.results.clear(),this.search=this.searchObject.search,this.search){++this.searchIndex;let h=this.searchIndex,d=this.search.split(" ");this.searchRemainsCount+=d.length+1;let f=yo.Intersect,p=0,g=()=>{if(--this.searchRemainsCount,this.searchIndex!=h)return this.searchRemainsCount-=d.length-p,void c(!1);if(p>0&&0==this.results.searchDataItems.length&&(this.searchRemainsCount-=d.length-p,p=d.length),p>=d.length)return void(c&&c(!0));let m=d[p++];if("\u041d\u0415"==m){if(f=yo.Remove,--this.searchRemainsCount,p>=d.length)return;m=d[p++]}else f=yo.Intersect;this.searcher.search(m,o,(v,_)=>{this.config.post(()=>{this.searchIndex==h&&this.onSearchDataResult(v,_,f,null),g()})},this.langProps)};g()}}getBook(a){let o=a.split("/");return o.length>=1&&o.splice(o.length-1,1),o.join("/")}getChapter(a){let o="\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",c=a.split("/");return c.length>=1&&(o=c[c.length-1]),o}getNamedSearchItem(a,o){let c=this.getBook(a),u=o.find(f=>f.name===c);null==u&&(u=new RB(c,[]),u.activeNumberPage="1",o.push(u));let h=this.getChapter(a),d=u.items.find(f=>f.name==h);return null==d&&(d=new FB(h,[]),d.pageName=""+Math.ceil((u.items.length+1)/this.maxElemenetsOnPageCount),u.items.push(d)),d}onSearchDataResult(a,o,c,u){let h=[];a&&a.forEach(d=>{this.getNamedSearchItem(d.key,h).items.push(...d.value)}),this.results.mergeSearchData(h,c),u&&u(null!=a)}}class NB{constructor(){}static builder(){return new NB}}class eM extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.object={},this.fieldName="name",this.description="\u0418\u043c\u044f",this.sDescription2="",this.shape="",this.readonly=!1}set description2(a){this.sDescription2=a}get description2(){return this.sDescription2?this.sDescription2:this.description}static builder(){return new eM("",null,null,NB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setObject(a){return this.object=a,this}setFieldName(a){return this.fieldName=a,this}setDescription(a){return this.description=a,this}setDescription2(a){return this.description2=a,this}setShape(a){return this.shape=a,this}setReadonly(a){return this.readonly=a,this}}class LB{constructor(a){this.spinnerInline=a}static builder(){return new LB(!0)}}class BB extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u}static builder(){return new BB("",null,null,LB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}}let Nne=(()=>{class l{constructor(o,c){this.http=o,this.config=c,this.restPoint="/kafizmy"}getRestPoint(o,c){return _r.merge(_r.merge(c||this.config.serviceAPIHost,this.restPoint),o)}handleError(o,c){return Ei.handleError(o,c)}search(o,c,u,h){const d={params:{query:o,paths:c.join("|")}};this.http.get(this.getRestPoint("/search",null),d).pipe(Xi(this.handleError)).subscribe({next:f=>{u(f,null)},error:f=>{u(null,""+f)}})}}return l.\u0275fac=function(o){return new(o||l)(Ie(nh),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Lne=(()=>{class l{constructor(o,c){this.searchRestSvc=o,this.config=c,this.searchSvc=null,this.searchingCount=0,this.config.isRestServerType()&&(this.searchSvc=this.searchRestSvc)}isSearching(){return this.searchingCount>0}search(o,c,u,h){this.config.post(this.searchSvc?()=>{++this.searchingCount,this.searchSvc&&this.searchSvc.search(o,c,(d,f)=>{u&&u(d,f),--this.searchingCount},h)}:()=>{++this.searchingCount,this.config.post(()=>{u&&u(null,null),--this.searchingCount})})}}return l.\u0275fac=function(o){return new(o||l)(Ie(Nne),Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),b7e=(()=>{class l{constructor(){this.data=eM.builder()}onCommand(o){this.data.click(!0),o.stopPropagation()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-form-input-editor"]],inputs:{data:"data"},decls:6,vars:6,consts:[[1,"cursor",3,"click"],[3,"click"],["clrInput","",3,"readOnly","placeholder","name","ngModel","ngModelChange"]],template:function(o,c){1&o&&(M(0,"clr-input-container"),M(1,"label",0),ee("click",function(h){return c.onCommand(h)}),ie(2),M(3,"span"),M(4,"clr-icon",1),ee("click",function(h){return c.onCommand(h)}),E(),E(),E(),M(5,"input",2),ee("ngModelChange",function(h){return c.data.object[c.data.fieldName]=h}),E(),E()),2&o&&(P(2),hi("",c.data.description," "),P(2),et("shape",c.data.shape),P(1),O("readOnly",c.data.readonly)("placeholder",c.data.description2)("name",c.data.fieldName)("ngModel",c.data.object[c.data.fieldName]))},directives:[D0,Rr,Ts,aa,I1,Js,Rs],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}"]}),l})();const C7e=["bookmarksView"],x7e=function(l,a){return{btn:!0,"btn-block":!0,"btn-success-outline":l,"btn-success":a}};function w7e(l,a){if(1&l){const o=gt();M(0,"div",14),M(1,"button",15),ee("click",function(){return Le(o),X().toggleSearch()}),ie(2),E(),E()}if(2&l){const o=X();P(1),O("ngClass",ds(2,x7e,!o.searchMode,o.searchMode)),P(1),en(o.searchMode?"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438":"\u041f\u043e\u0438\u0441\u043a")}}const S7e=function(l,a){return{btn:!0,"btn-block":!0,"btn-primary-outline":l,"btn-primary":a}};function T7e(l,a){if(1&l){const o=gt();M(0,"button",15),ee("click",function(){return Le(o),X(2).onNewSearch()}),ie(1,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),E()}if(2&l){const o=X(2);O("ngClass",ds(1,S7e,!o.isBookmarksExists(),o.isBookmarksExists()))}}function D7e(l,a){if(1&l){const o=gt();M(0,"button",3),ee("click",function(){return Le(o),X(2).modalDeleteAllBookmarksFlag=!0}),ie(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435"),E()}}const Bne=function(l,a){return{"clr-col-4":l,"clr-col-6":a}};function M7e(l,a){if(1&l&&(M(0,"div",2),Z(1,T7e,2,4,"button",16),Z(2,D7e,2,0,"button",17),E()),2&l){const o=X();O("ngClass",ds(3,Bne,o.searchEnabled&&o.bookmarksEnabled,!(o.searchEnabled&&o.bookmarksEnabled))),P(1),O("ngIf",o.searchMode),P(1),O("ngIf",!o.searchMode)}}function E7e(l,a){if(1&l&&(M(0,"div",19),me(1,"app-dynamic-spinner",20),E()),2&l){const o=X(2);P(1),O("data",o.searchingSpinnerData)}}function k7e(l,a){if(1&l&&(M(0,"div"),me(1,"app-dynamic-content-toolbar",20),E()),2&l){const o=X(3);P(1),O("data",o.toolbarBooksHeaders)}}function A7e(l,a){if(1&l&&(M(0,"div"),M(1,"div"),me(2,"app-dynamic-content-toolbar",20),E(),M(3,"div"),me(4,"app-dynamic-content-toolbar",20),E(),E()),2&l){const o=X(3);P(2),O("data",o.currentHeaders()),P(2),O("data",o.currentPages())}}function I7e(l,a){1&l&&me(0,"app-dynamic-library-book",20),2&l&&O("data",X().$implicit.libData)}function P7e(l,a){if(1&l&&(M(0,"div",null,24),me(2,"app-dynamic-errors",20),Z(3,I7e,1,1,"app-dynamic-library-book",25),E()),2&l){const o=a.$implicit;P(2),O("data",o.errorsData),P(1),O("ngIf",o.libDataShow)}}function O7e(l,a){if(1&l&&(M(0,"div"),M(1,"div"),M(2,"form",21),me(3,"app-dynamic-form-input-editor",20),E(),M(4,"form",22),me(5,"app-dynamic-form-input-editor",20),E(),E(),Z(6,k7e,2,1,"div",5),Z(7,A7e,5,2,"div",5),Z(8,P7e,4,2,"div",23),M(9,"div"),M(10,"div"),me(11,"app-dynamic-content-toolbar",20),E(),E(),E()),2&l){const o=X(2);P(3),O("data",o.dataSearchEditorData),P(2),O("data",o.dataSearchEditorData),P(1),O("ngIf",!o.isBookmarksExists()),P(1),O("ngIf",o.isBookmarksExists()),P(1),O("ngForOf",o.bookmarks),P(3),O("data",o.currentPages())}}function F7e(l,a){if(1&l&&(M(0,"div"),Z(1,E7e,2,1,"div",18),Z(2,O7e,12,6,"div",5),E()),2&l){const o=X();P(1),O("ngIf",o.isSearching),P(1),O("ngIf",!o.isSearching)}}function R7e(l,a){1&l&&me(0,"app-dynamic-library-book",20),2&l&&O("data",X().$implicit.libData)}function N7e(l,a){if(1&l&&(M(0,"div",null,24),me(2,"app-dynamic-errors",20),Z(3,R7e,1,1,"app-dynamic-library-book",25),E()),2&l){const o=a.$implicit;P(2),O("data",o.errorsData),P(1),O("ngIf",o.libDataShow)}}function L7e(l,a){if(1&l&&(M(0,"div"),Z(1,N7e,4,2,"div",23),E()),2&l){const o=X();P(1),O("ngForOf",o.bookmarks)}}class tM{constructor(a,o){this.errorsData=iu.builder(),this.libData=Ya.builder(),this.libDataShow=!1,this.\u043f\u0430\u043c\u044f\u0442\u044c=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.errorsData.setErrors(a).setActions(o)}static builder(){return new tM([],[])}setMessages(a){return this.errorsData.setErrors(a),this}addMessage(a){return this.errorsData.errors.push(a),this}setActions(a){return this.errorsData.setActions(a),this}addAction(a){return this.errorsData.actions.push(a),this}toggleLinkShow(){return this.libDataShow=!this.libDataShow,this}setLink(a,o,c=!0,u=!0){let d=fragmentsParserStatic.parse(a,{builder:new mL})[0][0];if(d.type!=Xa.Link&&c)throw new Error(`\u041d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0441\u044b\u043b\u043a\u043e\u0439: ${a}`);let f=d;return this.libData.setText(a.replace("-1000","+")).setSearch(o).setLink(qa.builder().setBookName(f.name).setShortName(!0).setChapter(""+f.startChapter).setStartLine(f.startLine).setEndLine(f.endLine).setLanguages(f.langugages).setLogical(u)),this}}class VB{constructor(a,o,c,u){this.items=a,this.pageItems=o,this.pageSize=u,this.iPageIndex=0}static builder(){return new VB([],[],0,10)}get pageIndex(){return this.iPageIndex}set pageIndex(a){this.iPageIndex=a,this.updatePage()}updatePage(){let o=Math.min(this.pageIndex*this.pageSize+this.pageSize,this.items.length);return this.pageItems=this.items.slice(this.pageIndex*this.pageSize,o),this}setItems(a){return this.items=a,this.recalculate(),this.updatePage()}setPageIndex(a){if(a<0||a+1>=this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441 \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${a}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [0,${this.pagesCount-1}].`);return this.pageIndex=a,this}setPageSize(a){if(a!=this.pageSize)return this.pageSize=a,this.recalculate(!0)}recalculate(a=!1){let o=this.pagesCount;return this.pageNumber>o&&(this.pageNumber=o),a?this.updatePage():this}prevPage(){return this.pageIndex>0&&(this.pageIndex=this.pageIndex-1),this}get pagesCount(){return Math.ceil(this.items.length/this.pageSize)}get pageNumber(){return this.pageIndex+1}set pageNumber(a){if(a<1||a>this.pagesCount)throw new Error(`\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446: ${a}; \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c => [1,${this.pagesCount}].`);this.pageIndex=a-1}nextPage(){return this.pageIndex+1<this.pagesCount&&(this.pageIndex=this.pageIndex+1),this}}class zB{constructor(a,o){this.name=a,this.bookmarks=o}static builder(){return new zB("",VB.builder())}setName(a){return this.name=a,this}setBookmarks(a){return this.bookmarks=a,this}}let Vne=(()=>{class l extends Af{constructor(o,c,u,h,d,f){super(o,c,u),this.bookmarksSvc=h,this.searcher=d,this.audioSvc=f,this.bookmarksEnabled=!0,this.searchEnabled=!0,this.searchMode=!1,this.searcherHelper=null,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),this.jsSvc=new TL,this.bookmarksDatas=[],this.bookmarksSearchDatasAll=[],this.bookmarksSearchDatas=null,this.searchingSpinnerData=BB.builder().setText("\u041f\u043e\u0438\u0441\u043a..."),this.tryLoadRemainsBookInfoCount=0,this.toolbarBooksHeaders=dc.builder().setItems([]).setOnClick(p=>{p.setSelected(!p.selected)}).updateClasses(p=>{p.setLabelNormal("label-info")}),this.toolbarSearchHeaders=dc.builder().setItems([]).setOnClick(p=>{let g=this.bookmarksSearchDatasAll.find(m=>m.name==p.tag);g&&(this.bookmarksSearchDatas=g,this.config.post(()=>{this.scrollToBookmarks()}))}),this.toolbarPages=dc.builder().setItems([]).setOnClick(p=>{this.bookmarksSearchDatas&&(this.bookmarksSearchDatas.bookmarks.pageNumber=+p.tag,this.config.post(()=>{this.loadRemainsBookInfoActiveGroup(),this.scrollToBookmarks()}))}).updateClasses(p=>{p.setLabelNormal("label-info")}),this.modalDeleteAllBookmarksFlag=!1,this.modalDeleteBookmark="",this.modalDeleteBookmarkFlag=!1,this.component=new On(fc,Ya.builder().setText("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP").setLink(qa.builder().setTextIsPage(!0).setOnRoute(p=>{}))),this.dataSearchEditorData=eM.builder(),this.workerSvc=Yo.builder(),this.bookServerSvc=new nL((p,g)=>{this.config.post(()=>{this.bookSvc.post(p,g)})}),this.bookSvc=new kB((p,g)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(g):this.bookServerSvc.post(p,g)})}),this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookmarksEnabled="books"==this.config.getApplication().id,this.searchEnabled=this.config.isRestServerType(),this.searcherHelper=new y7e(this.searcher,o),this.dataSearchEditorData.setObject(this.searcherHelper.searchObject).setDescription("\u041f\u043e\u0438\u0441\u043a").setDescription2("\u0441\u043b\u043e\u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0435 [\u041d\u0415] \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435").setFieldName("search").setShape("search").setReadonly(!1).setOnClick(()=>{var p;null===(p=this.searcherHelper)||void 0===p||p.onSearch("search",this.getSearchBookPaths(),g=>{this.syncSearchDatas(!0),this.dataSearchEditorData.setReadonly(!0)})}),this.jsSvc.addBookmarksEnvironment(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.uiConfig),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443",(p,g)=>{var v=p.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g[1]);if(this.bookmarks){let _=this.bookmarks.find(y=>y.errorsData.errors[0]==v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());null!=_&&_.toggleLinkShow()}return null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432",(p,g)=>{var v=p.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g[1]);if(this.bookmarks){let _=this.bookmarks.find(y=>y.errorsData.errors[0]==v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430());null!=_&&_.toggleLinkShow()}return null}),this.jsSvc.addMethod(this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,"\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443",(p,g)=>{var v=p.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(g[1]);return this.modalDeleteBookmark=v.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),this.modalDeleteBookmarkFlag=!0,null}),this.addMenuLink(Hn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("books"==this.config.getApplication().id?"cog":"users").setOnClick(()=>{this.boomarksData.click(null)}).setIsActive(()=>!1)),this.addMenuLink(Hn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.boomarksData.click("")}).setIsActive(()=>!1)),this.addMenuLink(Hn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("books"==this.config.getApplication().id?"bookmark":"search").setIsActive(()=>!0)),this.addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.boomarksData.click("\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP")}).setIsActive(()=>!1))}get bookmarkData(){return this.data}get boomarksData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get bookmarks(){var o;return this.sync(),this.searchMode?null===(o=this.bookmarksSearchDatas)||void 0===o?void 0:o.bookmarks.pageItems:this.bookmarksDatas}get isSearching(){return this.searcher.isSearching()}ngOnInit(){super.ngOnInit(),this.bookmarkData&&(this.searchMode=this.bookmarkData.startSearch)}ngOnDestroy(){super.ngOnDestroy(),this.workerSvc.unsubscribe()}ngAfterViewInit(){super.ngAfterViewInit(),this.audioSvc.stop(),this.config.post(()=>{this.searchMode=this.bookmarkData.startSearch}),this.workerSvc.enabled()?this.workerSvc.setOnMessage(o=>{this.config.post(()=>{this.bookSvc.post(null,o)})}):this.bookServerSvc.setCacheService(new tL(new nS)),this.bookSvc.onLibraryLoadEvent.setOnEventHandler(()=>{this.tryLoadRemainsBookInfo(),this.loadBooksHeaders()}),this.bookSvc.onBookInfoLoadEvent.setOnEventHandler((o,c)=>{this.config.post(()=>{this.loadRemainsBookInfo2()})}),this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()})}getBookNameByPath(o){let c=o.split("/");return this.bookSvc.getNormalBookNameByBookPath(c[c.length-1])}loadRemainsBookInfo2(){var o;if(!this.bookmarksSearchDatas)return;let u=this.bookmarksSearchDatas.bookmarks.pageItems.find(h=>h.errorsData.errors[0].indexOf("|")>=0&&!!this.getBookNameByPath(h.errorsData.errors[0]));if(null!=u){let d=u.errorsData.errors[0].split("|");if(d.length>1){let f=d[0],p=d[1],g=this.getBookNameByPath(f);if(g){let m=this.bookSvc.getShortBookName(g),v=null===(o=this.bookSvc.bookInfo)||void 0===o?void 0:o.content.find(b=>f.endsWith(b.path)),y=`${m}${p}{${v?v.name:""}}`;u.setLink(y,this.searcherHelper?this.searcherHelper.search:"",!0,!1),u.\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(y)),u.errorsData.errors[0]=`${y}`}}this.tryLoadRemainsBookInfo()}}tryLoadRemainsBookInfo(){this.tryLoadRemainsBookInfoCount>0||(++this.tryLoadRemainsBookInfoCount,this.config.post(()=>{this.loadRemainsBookInfo(),--this.tryLoadRemainsBookInfoCount}))}loadRemainsBookInfo(){let o=this.bookmarksSearchDatasAll.map(c=>{let u=this.getBookNameByPath(c.name);return{d:c,name:u?this.bookSvc.getShortBookName(u):null}}).filter(c=>!!c.name&&"\u0421\u043f\u0440"!=c.name).map(c=>c);!this.bookmarksSearchDatasAll||this.toolbarSearchHeaders.items.length==o.length||(this.toolbarSearchHeaders.setItems(o.map(c=>ko.builder().setText(c.name).setTag(c.d.name))).setOnClick(c=>{let u=this.bookmarksSearchDatasAll.find(h=>h.name==c.tag);u&&(this.bookmarksSearchDatas=u,this.loadRemainsBookInfoActiveGroup())}),this.bookmarksSearchDatas||this.config.post(()=>{this.toolbarSearchHeaders.click(this.toolbarSearchHeaders.items[0])}))}loadRemainsBookInfoActiveGroup(){this.bookmarksSearchDatas&&this.bookmarksSearchDatas.bookmarks.pageItems.forEach(c=>{if(null!=c){let d=c.errorsData.errors[0].split("|")[0],f=this.getBookNameByPath(d);f&&this.bookSvc.loadBookByName(f,[],"",!1)}})}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}syncBookmarks(){let o=this.bookmarksSvc.getBookmarks(),c=!1,u=this.getStdBookmarks();return c=this.bookmarksDatas.length!=o.length+u.length||null!=o.find((d,f)=>d!=this.bookmarksDatas[f+u.length].errorsData.errors[0]),c&&o.unshift(...u),c&&(this.bookmarksDatas=[],o.forEach((h,d)=>{let f=h.replace("-1000","+"),p=`\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${f}';\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 1) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 2) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\u0423\u0434\u0430\u043b\u0438\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 3) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 4) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u0443(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          `,g=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430")),v=(this.jsSvc.run(p,g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),tM.builder());v.errorsData.setOnClick(_=>{this.boomarksData.click(_)}),v.setLink(h,"").setMessages([f]).setActions(d<u.length?[Ol.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]:[Ol.builder().setText("X").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(2).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Ol.builder().setText("\u041d\u0438\u0436\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(1).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Ol.builder().setText("\u0412\u044b\u0448\u0435").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(0).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()}),Ol.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(3).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",g,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),v.errorsData.classes.setAlertClass("warning").setAlertShape("").setNoPrint(!0),this.bookmarksDatas.push(v)})),c&&this.component.data.setText(o.map(d=>d+` /*\n\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441{\n  \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '';\n  \u0432\u0432\u0435\u0440\u0445 = false;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0432\u0432\u0435\u0440\u0445){\n    \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 = '${d}';\n    \u0432\u0432\u0435\u0440\u0445 = _\u0432\u0432\u0435\u0440\u0445;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(\u043a\u043d\u043e\u043f\u043a\u0430){\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c(\n      '\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: "' + \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '": ' + (\u0432\u0432\u0435\u0440\u0445?'\u0432\u0432\u0435\u0440\u0445':'\u0432\u043d\u0438\u0437'));\n    \u0435\u0441\u043b\u0438 (\u0432\u0432\u0435\u0440\u0445) {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u0432\u0435\u0440\u0445(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u0434\u0432\u0438\u043d\u0443\u0442\u044c\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0443\u0412\u043d\u0438\u0437(\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2191','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(true), false);\n\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u043a\u043d\u043e\u043f\u043a\u0430('\u2193','link','',\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(false), false);\n*/`).join("\r\n")),this}saveBookmarks(o){return this.bookmarksSvc.setBookmarks(o),this}deleteAllBookmarks(){return this.bookmarksSvc.setBookmarks([]),this}toggleBookmarksView(){let o=this.isAllBookmarksVisible();return this.bookmarks&&this.bookmarks.forEach(c=>{c.libDataShow==o&&c.toggleLinkShow()}),this}isAllBookmarksVisible(){this.sync();let o=this.bookmarks;return!!o&&o.map(u=>u.libDataShow).reduce((u,h)=>u&&h,!0)}isBookmarksExists(){this.sync();let o=this.bookmarks;return!!o&&o.length>0}onDeleteAllBookmarks(){this.deleteAllBookmarks(),this.modalDeleteAllBookmarksFlag=!1}onDeleteBookmark(o){return this.bookmarksSvc.deleteBookmark(o),this.modalDeleteBookmarkFlag=!1,this}getDaysFromYear(){var o=new Date,c=new Date(o.getFullYear(),0,0),u=o.getTime()-c.getTime()+60*(c.getTimezoneOffset()-o.getTimezoneOffset())*1e3,h=864e5,d=Math.floor(u/h);if(d<14&&o.getFullYear()>2022){var f=new Date(o.getFullYear()-1,0,0),p=new Date(o.getFullYear()-1,11,31),g=p.getTime()-f.getTime()+60*(f.getTimezoneOffset()-p.getTimezoneOffset())*1e3;d+=Math.floor(g/h)}return d-13}getStdBookmarks(){let o=this.getDaysFromYear();return[`\u041c\u04412022.${o}:1-1000`,`\u0411\u04432022.${o}:1-1000`]}toggleSearch(){return this.searchMode=!this.searchMode,this}getChapter(o){let c=o.indexOf(".");return+o.substring(0,c>=0?c:void 0).replace(/_/g,"")}getLines(o){let c=[],u=o.map(h=>h.items.map(d=>d.line)).flatMap(h=>h);return u.sort((h,d)=>h-d),u.forEach(h=>{c.indexOf(h)<0&&c.push(h)}),c}getLinesSingle(o){let c=[],u=o.items.map(h=>h.line);return u.sort((h,d)=>h-d),u.forEach(h=>{c.indexOf(h)<0&&c.push(h)}),c}createBookmarksFor(o,c){let u=[],h=this.getChapter(c.name);return(c.items.length?this.getLinesSingle(c):[1]).forEach(f=>{u.push(this.createBookmarksForSingle(`${o}|.${h}:${f}`))}),u}createBookmarksForSingle(o){let c=tM.builder(),u=c.\u043f\u0430\u043c\u044f\u0442\u044c;return u.\u043a\u0430\u043a\u041a\u0430\u0440\u0442\u0430().set("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430",this.jsSvc.\u0434\u0432\u0438\u0436\u043e\u043a.\u043d\u043e\u0432\u0430\u044f\u0421\u0442\u0440\u043e\u043a\u0430("\u0441\u0442\u0440\u043e\u043a\u0430").\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435(o)),this.jsSvc.run("\n\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 = \u043a\u043b\u0430\u0441\u0441 {\n  \u0442\u0438\u043f = 0;\n  \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440(_\u0442\u0438\u043f) {\n    \u0442\u0438\u043f = _\u0442\u0438\u043f;\n  }\n  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c() {\n    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e().\u0432\u044b\u0432\u0435\u0441\u0442\u0438\u0412\u041a\u043e\u043d\u0441\u043e\u043b\u044c('\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430: \"' + \u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430 + '\": ' + \u0442\u0438\u043f);\n    \u0435\u0441\u043b\u0438 (\u0442\u0438\u043f == 0) {\n      \u0442\u0438\u043f = 0;\n    } \u0438\u043d\u0430\u0447\u0435 {\n      \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435.\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0421\u0441\u044b\u043b\u043a\u04432(\u043f\u0430\u043c\u044f\u0442\u044c.\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430);\n    }\n  }\n};\n\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442.\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 = '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';\n          ",u,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),c.errorsData.setOnClick(f=>{this.boomarksData.click(f)}).updateClasses(f=>{f.setAlertClass("info").setAlertShape("bookmark")}),c.setLink(o,this.searcherHelper?this.searcherHelper.search:"",!1,!1).setMessages([o]).setActions([Ol.builder().setText("\u0412\u0438\u0434").setOnClick(()=>{this.jsSvc.run("\u043f\u0430\u043c\u044f\u0442\u044c.\u043a\u043b\u0430\u0441\u0441\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430(4).\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c(); \u0432\u0435\u0440\u043d\u0443\u0442\u044c '\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e';",u,this.\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435,this.\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442).\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430()})]),c}syncSearchDatas(o){var c;!o||(this.bookmarksSearchDatasAll=[],null===(c=this.searcherHelper)||void 0===c||c.results.searchDataItems.forEach(u=>{let h=u.items.flatMap(f=>this.createBookmarksFor(u.name,f)),d=zB.builder();d.bookmarks.setItems(h),d.setName(u.name),this.bookmarksSearchDatasAll.push(d)}),this.bookmarksSearchDatasAll.length>0&&this.config.post(()=>{this.bookSvc.tryLoadLibraryInfo()}))}currentPages(){if(this.bookmarksSearchDatas){let o=this.bookmarksSearchDatas.bookmarks.pagesCount;this.toolbarPages.items.length!=o&&this.toolbarPages.setItems([...Array(o).keys()].map(c=>c+1).map(c=>ko.builder().setTag(""+c).setText(""+c))),this.toolbarPages.items.forEach(c=>c.setSelected(c.tag==""+this.bookmarksSearchDatas.bookmarks.pageNumber))}else 0!=this.toolbarPages.items.length&&this.toolbarPages.setItems([]);return this.toolbarPages}currentHeaders(){return this.bookmarksSearchDatas&&this.toolbarSearchHeaders.items.forEach(o=>{var c;o.setSelected(o.tag==(null===(c=this.bookmarksSearchDatas)||void 0===c?void 0:c.name))}),this.toolbarSearchHeaders}scrollToBookmarks(){return this.bookmarksView.nativeElement.scrollIntoView(!0),this}onNewSearch(){return this.dataSearchEditorData.setReadonly(!1),this.bookmarksSearchDatasAll=[],this.bookmarksSearchDatas=null,this.toolbarSearchHeaders.setItems([]),this}sync(){this.searchMode?this.syncSearchDatas(!1):this.syncBookmarks()}loadBooksHeaders(){!this.bookSvc.libraryInfo||this.toolbarBooksHeaders.items.length>0||this.toolbarBooksHeaders.setItems(this.bookSvc.libraryInfo.content.map(o=>o.path2?{name:o.path2[0],path:o.path}:null).filter(o=>!!o&&"\u0421\u043f\u0440"!=o.name).map(o=>o).map(o=>ko.builder().setText(o.name).setTag(o.path)))}getSearchBookPaths(){return this.toolbarBooksHeaders.items.filter(c=>c.selected).map(c=>c.tag)}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu),R(Ov),R(Lne),R(Rv))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-bookmarks"]],viewQuery:function(o,c){if(1&o&&ti(C7e,5),2&o){let u;Vt(u=zt())&&(c.bookmarksView=u.first)}},inputs:{data:"data"},features:[dn],decls:34,vars:12,consts:[[1,"clr-row","no-print"],["class","clr-col-4",4,"ngIf"],[3,"ngClass"],[1,"btn","btn-block","btn-primary-outline",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["shape","flame",1,"is-solid"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["shape","ban"],[1,"clr-col-4"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],["class","btn btn-block btn-primary-outline",3,"click",4,"ngIf"],["class","bottom-top-space",4,"ngIf"],[1,"bottom-top-space"],[3,"data"],["clrForm","","clrLayout","horizontal",1,"clr-hidden-xs-down"],["clrForm","","clrLayout","vertical",1,"clr-hidden-sm-up"],[4,"ngFor","ngForOf"],["bookmarksView",""],[3,"data",4,"ngIf"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,w7e,3,5,"div",1),M(2,"div",2),M(3,"button",3),ee("click",function(){return c.toggleBookmarksView()}),ie(4),E(),E(),Z(5,M7e,3,6,"div",4),E(),Z(6,F7e,3,2,"div",5),Z(7,L7e,2,1,"div",5),M(8,"clr-modal",6),ee("clrModalOpenChange",function(h){return c.modalDeleteAllBookmarksFlag=h}),M(9,"h3",7),ie(10,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),E(),M(11,"div",8),me(12,"clr-icon",9),ie(13," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438? "),E(),M(14,"div",10),M(15,"button",11),ee("click",function(){return c.onDeleteAllBookmarks()}),me(16,"clr-icon",9),ie(17,"\u0414\u0430"),E(),M(18,"button",12),ee("click",function(){return c.modalDeleteAllBookmarksFlag=!1}),me(19,"clr-icon",13),ie(20,"\u041d\u0435\u0442"),E(),E(),E(),M(21,"clr-modal",6),ee("clrModalOpenChange",function(h){return c.modalDeleteBookmarkFlag=h}),M(22,"h3",7),ie(23,"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"),E(),M(24,"div",8),me(25,"clr-icon",9),ie(26),E(),M(27,"div",10),M(28,"button",11),ee("click",function(){return c.onDeleteBookmark(c.modalDeleteBookmark)}),me(29,"clr-icon",9),ie(30,"\u0414\u0430"),E(),M(31,"button",12),ee("click",function(){return c.modalDeleteBookmarkFlag=!1}),me(32,"clr-icon",13),ie(33,"\u041d\u0435\u0442"),E(),E(),E()),2&o&&(P(1),O("ngIf",c.searchEnabled&&c.bookmarksEnabled),P(1),O("ngClass",ds(9,Bne,c.searchEnabled&&c.bookmarksEnabled,!(c.searchEnabled&&c.bookmarksEnabled))),P(2),hi("",c.isAllBookmarksVisible()?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"," \u0432\u0441\u0435"),P(1),O("ngIf",c.isBookmarksExists()||c.searchMode),P(1),O("ngIf",c.searchMode),P(1),O("ngIf",!c.searchMode),P(1),O("clrModalOpen",c.modalDeleteAllBookmarksFlag),P(13),O("clrModalOpen",c.modalDeleteBookmarkFlag),P(5),hi(" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0443 '",c.modalDeleteBookmark,"'? "))},directives:[mn,Xn,YL,Tp,Sp,Nu,wS,_De,b7e,WD,fi,GD,fc,jh,$h,Ts],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();class UB{constructor(){}static builder(){return new UB}}class Bv extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.startSearch=!1}static builder(){return new Bv("",null,null,UB.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}setStartSearch(a){return this.startSearch=a,this}}function B7e(l,a){if(1&l&&(M(0,"div"),me(1,"app-add-component",2),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}let V7e=(()=>{class l extends Af{constructor(o,c,u,h){super(o,c,u),this.router=h,this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.addMenuLink(Hn.builder().setLink("#").setName("\u041c\u0435\u043d\u044e").setShape("cog").setOnClick(()=>{this.config.post(()=>{this.reset()},0)}).setIsActive(()=>this.isComponentType(hC,null))).addMenuLink(Hn.builder().setLink("#").setName("\u041a\u043d\u0438\u0433\u0438").setShape("book").setOnClick(()=>{this.routeTo("")}).setIsActive(()=>this.isComponentType(zs,Ya))).addMenuLink(Hn.builder().setLink("#").setName("\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438").setShape("bookmark").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(zs,Bv))).addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(o=>{this.config.post(()=>this.ngAfterViewInitRaw())})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)return pageRequestedDoc="",void this.routeToHelp("3");this.uiConfig.ui.visitedBooksHelp.getStringValue()===this.config.environment.version?this.uiConfig.ui.currentBook.getStringValue()?this.config.post(()=>{this.routeTo(this.uiConfig.ui.currentBook.getStringValue())}):this.config.post(()=>{this.reset()}):this.config.post(()=>{this.routeToHelp()})}reset(){this.components=[new On(Xte,hC.builder().setOnClick(o=>{this.routeTo(o.trim())}))],this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes(this.menuLinks)},0)}isComponent(o,c=""){var u;if(this.components.length<=0)return!1;let h=this.components[0].data,d=h instanceof zs?h:null,f=null===(u=null==d?void 0:d.component)||void 0===u?void 0:u.data;return(null==f?void 0:f.text)==o&&((null==f?void 0:f.link.chapter)==c||!c)||""==o&&!!(null==f?void 0:f.text)}routeToHelp(o="1"){this.isComponent(this.helpBookName,o)&&"1"===o?this.routeTo(""):this.routeTo(this.helpBookName,o,0)}routeTo(o,c="",u=-1){let h=o,d=c,f=u;if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelp("3");if("books_help"==h||h==this.helpBookName&&""==d&&f<0)return void this.routeToHelp();if("\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"==h)return void this.routeToBookmarks();if(h||(h=this.uiConfig.ui.currentBook.getStringValue()),!h||["UP","DOWN","AROUND","CENTER"].map(g=>h.endsWith(g)).reduce((g,m)=>g||m,!1))return;h!=this.uiConfig.ui.currentBook.getStringValue()&&h!=this.helpBookName&&this.uiConfig.ui.currentBook.setStringValue(h);let p=!1;h==this.helpBookName&&("3"!=d&&(d="1"),f=0,p=!0),this.components=[new On(Za,zs.builder().setComponent(new On(fc,Ya.builder().setText(h).setMenu(this.menuLinks).setForceMenu(!0).setHideUI(p).setFacePage(!0).setLink(qa.builder().setChapter(d).setStartLine(f).setEndLine(f>=0?1e3:-1).setOnRoute(g=>{g?this.routeTo(g.trim()):this.reset()})))))]}routeToBookmarks(){this.components=[new On(Za,zs.builder().setComponent(new On(Vne,Bv.builder().setText("bookmark").setOnClick(o=>{let c="string"==typeof o?o:null,u=c||this.uiConfig.ui.currentBook.getStringValue();u&&null!=c?this.routeTo(u):this.reset()}))))]}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu),R(fs))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-books"]],features:[dn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,B7e,2,1,"div",1),E()),2&o&&(P(1),O("ngForOf",c.components))},directives:[fi,Pl],styles:[""]}),l})();function z7e(l,a){if(1&l&&(M(0,"div"),me(1,"app-add-component",3),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}let U7e=(()=>{class l extends Af{constructor(o,c,u,h){super(o,c,u),this.memDataSvc=h,this.appBookName="\u043f\u043e\u043c\u044f\u043d\u043d\u0438\u043a APP_MMR",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.errorsData=iu.builder(),this.addMenuLink(Hn.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("users").setOnClick(()=>{this.reset("2")}).setIsActive(()=>this.isComponent(this.appBookName,"2"))).addMenuLink(Hn.builder().setLink("#").setName("\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a\u0438").setShape("book").setOnClick(()=>{this.reset("1")}).setIsActive(()=>this.isComponent(this.appBookName,"1"))),this.config.isRestServerType()&&this.addMenuLink(Hn.builder().setLink("#").setName("\u041f\u043e\u0438\u0441\u043a").setShape("search").setOnClick(()=>{this.routeToBookmarks()}).setIsActive(()=>this.isComponentType(zs,Bv))),this.addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp()}).setIsActive(()=>this.isComponent(this.helpBookName)))}isComponent(o,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==o&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){this.memDataSvc.setup(o=>{if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed("4");else if(this.uiConfig.ui.visitedMemorialHelp.getStringValue()!==this.config.environment.version)this.routeToHelpDelayed();else{let c=this.uiConfig.ui.memorialBook.getStringValue(),u=this.uiConfig.ui.memorialChapter.getStringValue(),h=this.uiConfig.ui.memorialLine.getNumberValue();c?this.routeTo(c,u,h):this.resetDelayed()}}),super.ngAfterViewInit()}resetDelayed(o="2"){this.config.post(()=>{this.reset(o)})}reset(o="2"){this.routeTo(this.appBookName,o,1)}routeToHelpDelayed(o="2"){this.config.post(()=>{this.routeToHelp(o)})}routeToHelp(o="2"){this.isComponent(this.helpBookName,o)&&"2"===o?this.reset():this.routeTo(this.helpBookName,o,1)}routeToDelayed(o,c="",u=-1){this.config.post(()=>{this.routeTo(o,c,u)})}routeTo(o,c="",u=-1){let h=o;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed("4");if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed();""==c&&(c="1"),u<0&&(u=1),this.uiConfig.ui.memorialBook.setStringValue(h),this.uiConfig.ui.memorialChapter.setStringValue(c),this.uiConfig.ui.memorialLine.setNumberValue(u),this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(fc,Ya.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setShowPrintButtons(!0).setHandleMemorialNewTitle("MemorialMainWindow").setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(qa.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed()})))))])}}routeToBookmarks(){this.components=[new On(Za,zs.builder().setComponent(new On(Vne,Bv.builder().setText("bookmark").setStartSearch(!0).setOnClick(o=>{if(this.config.post(()=>{this.applyMenuAppRoutes(!0)}),"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==o)this.routeToHelp("4");else if(o){let c=Fv.builder().parse(o),u=c[0]?c[0][0]:null;u&&(null==u?void 0:u.type)==Xa.Link?(this.uiConfig.ui.memorialChapterRequested.setNumberValue(u.startChapter),this.resetDelayed("1")):this.routeToHelpDelayed()}else this.resetDelayed(null==o?"2":"1")}))))]}setComponentsDelayed(o){this.config.post(()=>{this.components=o})}clearErrors(){this.errorsData.setErrors([])}setErrors(o){this.errorsData.setErrors(o).updateClasses(c=>c.setAlertClass("alert-danger"))}onNewMemorial(){this.clearErrors(),this.newMemorial("\u0430\u0432\u0442\u043e\u0440\u044b")}onDeleteAllMemorials(){var o,c,u;this.clearErrors(),(null===(o=this.memDataSvc.memorials)||void 0===o?void 0:o.items.length)&&(null===(c=this.memDataSvc.memorials)||void 0===c||c.deleteMemorial(null===(u=this.memDataSvc.memorials)||void 0===u?void 0:u.items[0]))}newMemorial(o){var c;null===(c=this.memDataSvc.memorials)||void 0===c||c.newMemorial(o,u=>{u.success?this.memDataSvc.getMemorials().reloadMemorials(h=>{h&&this.memDataSvc.getPersons().reloadPersons()}):this.setErrors([u.error])})}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu),R(VL))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-memorial"]],features:[dn],decls:3,vars:2,consts:[[1,"ftext-no","fade-in-3-no"],[3,"data"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"div",0),me(1,"app-dynamic-errors",1),Z(2,z7e,2,1,"div",2),E()),2&o&&(P(1),O("data",c.errorsData),P(1),O("ngForOf",c.components))},directives:[GD,fi,Pl],styles:[""]}),l})();const Hv=1e3,Ka=1001,oo=1003,Us=1006,kg=1009,Ag=1014,Lf=1015,wC=1016,Gv=1020,ou=1023,Ig=1026,jv=1027,Pg=3e3,is=3001,dd="srgb",Og="srgb-linear";class Xv{addEventListener(a,o){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[a]&&(c[a]=[]),-1===c[a].indexOf(o)&&c[a].push(o)}hasEventListener(a,o){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(o)}removeEventListener(a,o){if(void 0===this._listeners)return;const u=this._listeners[a];if(void 0!==u){const h=u.indexOf(o);-1!==h&&u.splice(h,1)}}dispatchEvent(a){if(void 0===this._listeners)return;const c=this._listeners[a.type];if(void 0!==c){a.target=this;const u=c.slice(0);for(let h=0,d=u.length;h<d;h++)u[h].call(this,a);a.target=null}}}const Xo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Fg=Math.PI/180,SC=180/Math.PI;function Rl(){const l=4294967295*Math.random()|0,a=4294967295*Math.random()|0,o=4294967295*Math.random()|0,c=4294967295*Math.random()|0;return(Xo[255&l]+Xo[l>>8&255]+Xo[l>>16&255]+Xo[l>>24&255]+"-"+Xo[255&a]+Xo[a>>8&255]+"-"+Xo[a>>16&15|64]+Xo[a>>24&255]+"-"+Xo[63&o|128]+Xo[o>>8&255]+"-"+Xo[o>>16&255]+Xo[o>>24&255]+Xo[255&c]+Xo[c>>8&255]+Xo[c>>16&255]+Xo[c>>24&255]).toLowerCase()}function Ms(l,a,o){return Math.max(a,Math.min(o,l))}function TC(l,a,o){return(1-o)*l+o*a}function r5(l){return 0==(l&l-1)&&0!==l}function cM(l){return Math.pow(2,Math.floor(Math.log(l)/Math.LN2))}class ht{constructor(a=0,o=0){ht.prototype.isVector2=!0,this.x=a,this.y=o}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,o){return this.x=a,this.y=o,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a,o){return void 0!==o?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,o)):(this.x+=a.x,this.y+=a.y,this)}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this}sub(a,o){return void 0!==o?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,o)):(this.x-=a.x,this.y-=a.y,this)}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const o=this.x,c=this.y,u=a.elements;return this.x=u[0]*o+u[3]*c+u[6],this.y=u[1]*o+u[4]*c+u[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const o=this.x-a.x,c=this.y-a.y;return o*o+c*c}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a}fromBufferAttribute(a,o,c){return void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(o),this.y=a.getY(o),this}rotateAround(a,o){const c=Math.cos(o),u=Math.sin(o),h=this.x-a.x,d=this.y-a.y;return this.x=h*c-d*u+a.x,this.y=h*u+d*c+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qa{constructor(){Qa.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(a,o,c,u,h,d,f,p,g){const m=this.elements;return m[0]=a,m[1]=u,m[2]=f,m[3]=o,m[4]=h,m[5]=p,m[6]=c,m[7]=d,m[8]=g,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const o=this.elements,c=a.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],this}extractBasis(a,o,c){return a.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const o=a.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,o){const c=a.elements,u=o.elements,h=this.elements,d=c[0],f=c[3],p=c[6],g=c[1],m=c[4],v=c[7],_=c[2],y=c[5],b=c[8],x=u[0],C=u[3],w=u[6],S=u[1],D=u[4],T=u[7],A=u[2],I=u[5],N=u[8];return h[0]=d*x+f*S+p*A,h[3]=d*C+f*D+p*I,h[6]=d*w+f*T+p*N,h[1]=g*x+m*S+v*A,h[4]=g*C+m*D+v*I,h[7]=g*w+m*T+v*N,h[2]=_*x+y*S+b*A,h[5]=_*C+y*D+b*I,h[8]=_*w+y*T+b*N,this}multiplyScalar(a){const o=this.elements;return o[0]*=a,o[3]*=a,o[6]*=a,o[1]*=a,o[4]*=a,o[7]*=a,o[2]*=a,o[5]*=a,o[8]*=a,this}determinant(){const a=this.elements,o=a[0],c=a[1],u=a[2],h=a[3],d=a[4],f=a[5],p=a[6],g=a[7],m=a[8];return o*d*m-o*f*g-c*h*m+c*f*p+u*h*g-u*d*p}invert(){const a=this.elements,o=a[0],c=a[1],u=a[2],h=a[3],d=a[4],f=a[5],p=a[6],g=a[7],m=a[8],v=m*d-f*g,_=f*p-m*h,y=g*h-d*p,b=o*v+c*_+u*y;if(0===b)return this.set(0,0,0,0,0,0,0,0,0);const x=1/b;return a[0]=v*x,a[1]=(u*g-m*c)*x,a[2]=(f*c-u*d)*x,a[3]=_*x,a[4]=(m*o-u*p)*x,a[5]=(u*h-f*o)*x,a[6]=y*x,a[7]=(c*p-g*o)*x,a[8]=(d*o-c*h)*x,this}transpose(){let a;const o=this.elements;return a=o[1],o[1]=o[3],o[3]=a,a=o[2],o[2]=o[6],o[6]=a,a=o[5],o[5]=o[7],o[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const o=this.elements;return a[0]=o[0],a[1]=o[3],a[2]=o[6],a[3]=o[1],a[4]=o[4],a[5]=o[7],a[6]=o[2],a[7]=o[5],a[8]=o[8],this}setUvTransform(a,o,c,u,h,d,f){const p=Math.cos(h),g=Math.sin(h);return this.set(c*p,c*g,-c*(p*d+g*f)+d+a,-u*g,u*p,-u*(-g*d+p*f)+f+o,0,0,1),this}scale(a,o){const c=this.elements;return c[0]*=a,c[3]*=a,c[6]*=a,c[1]*=o,c[4]*=o,c[7]*=o,this}rotate(a){const o=Math.cos(a),c=Math.sin(a),u=this.elements,h=u[0],d=u[3],f=u[6],p=u[1],g=u[4],m=u[7];return u[0]=o*h+c*p,u[3]=o*d+c*g,u[6]=o*f+c*m,u[1]=-c*h+o*p,u[4]=-c*d+o*g,u[7]=-c*f+o*m,this}translate(a,o){const c=this.elements;return c[0]+=a*c[2],c[3]+=a*c[5],c[6]+=a*c[8],c[1]+=o*c[2],c[4]+=o*c[5],c[7]+=o*c[8],this}equals(a){const o=this.elements,c=a.elements;for(let u=0;u<9;u++)if(o[u]!==c[u])return!1;return!0}fromArray(a,o=0){for(let c=0;c<9;c++)this.elements[c]=a[c+o];return this}toArray(a=[],o=0){const c=this.elements;return a[o]=c[0],a[o+1]=c[1],a[o+2]=c[2],a[o+3]=c[3],a[o+4]=c[4],a[o+5]=c[5],a[o+6]=c[6],a[o+7]=c[7],a[o+8]=c[8],a}clone(){return(new this.constructor).fromArray(this.elements)}}function Sie(l){for(let a=l.length-1;a>=0;--a)if(l[a]>65535)return!0;return!1}function DC(l){return document.createElementNS("http://www.w3.org/1999/xhtml",l)}function Rg(l){return l<.04045?.0773993808*l:Math.pow(.9478672986*l+.0521327014,2.4)}function uM(l){return l<.0031308?12.92*l:1.055*Math.pow(l,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const s5={[dd]:{[Og]:Rg},[Og]:{[dd]:uM}},au={legacyMode:!0,get workingColorSpace(){return Og},set workingColorSpace(l){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(l,a,o){if(this.legacyMode||a===o||!a||!o)return l;if(s5[a]&&void 0!==s5[a][o]){const c=s5[a][o];return l.r=c(l.r),l.g=c(l.g),l.b=c(l.b),l}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(l,a){return this.convert(l,this.workingColorSpace,a)},toWorkingColorSpace:function(l,a){return this.convert(l,a,this.workingColorSpace)}},Tie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ao={r:0,g:0,b:0},lu={h:0,s:0,l:0},hM={h:0,s:0,l:0};function o5(l,a,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?l+6*(a-l)*o:o<.5?a:o<2/3?l+6*(a-l)*(2/3-o):l}function dM(l,a){return a.r=l.r,a.g=l.g,a.b=l.b,a}let Kv,rn=(()=>{class l{constructor(o,c,u){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===c&&void 0===u?this.set(o):this.setRGB(o,c,u)}set(o){return o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o),this}setScalar(o){return this.r=o,this.g=o,this.b=o,this}setHex(o,c=dd){return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(255&o)/255,au.toWorkingColorSpace(this,c),this}setRGB(o,c,u,h=Og){return this.r=o,this.g=c,this.b=u,au.toWorkingColorSpace(this,h),this}setHSL(o,c,u,h=Og){if(o=function i5(l,a){return(l%a+a)%a}(o,1),c=Ms(c,0,1),u=Ms(u,0,1),0===c)this.r=this.g=this.b=u;else{const d=u<=.5?u*(1+c):u+c-u*c,f=2*u-d;this.r=o5(f,d,o+1/3),this.g=o5(f,d,o),this.b=o5(f,d,o-1/3)}return au.toWorkingColorSpace(this,h),this}setStyle(o,c=dd){function u(d){void 0!==d&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}let h;if(h=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(o)){let d;const p=h[2];switch(h[1]){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,au.toWorkingColorSpace(this,c),u(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,au.toWorkingColorSpace(this,c),u(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p)){const g=parseFloat(d[1])/360,m=parseInt(d[2],10)/100,v=parseInt(d[3],10)/100;return u(d[4]),this.setHSL(g,m,v,c)}}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(o)){const d=h[1],f=d.length;if(3===f)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,au.toWorkingColorSpace(this,c),this;if(6===f)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,au.toWorkingColorSpace(this,c),this}return o&&o.length>0?this.setColorName(o,c):this}setColorName(o,c=dd){const u=Tie[o.toLowerCase()];return void 0!==u?this.setHex(u,c):console.warn("THREE.Color: Unknown color "+o),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(o){return this.r=o.r,this.g=o.g,this.b=o.b,this}copySRGBToLinear(o){return this.r=Rg(o.r),this.g=Rg(o.g),this.b=Rg(o.b),this}copyLinearToSRGB(o){return this.r=uM(o.r),this.g=uM(o.g),this.b=uM(o.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(o=dd){return au.fromWorkingColorSpace(dM(this,ao),o),Ms(255*ao.r,0,255)<<16^Ms(255*ao.g,0,255)<<8^Ms(255*ao.b,0,255)<<0}getHexString(o=dd){return("000000"+this.getHex(o).toString(16)).slice(-6)}getHSL(o,c=Og){au.fromWorkingColorSpace(dM(this,ao),c);const u=ao.r,h=ao.g,d=ao.b,f=Math.max(u,h,d),p=Math.min(u,h,d);let g,m;const v=(p+f)/2;if(p===f)g=0,m=0;else{const _=f-p;switch(m=v<=.5?_/(f+p):_/(2-f-p),f){case u:g=(h-d)/_+(h<d?6:0);break;case h:g=(d-u)/_+2;break;case d:g=(u-h)/_+4}g/=6}return o.h=g,o.s=m,o.l=v,o}getRGB(o,c=Og){return au.fromWorkingColorSpace(dM(this,ao),c),o.r=ao.r,o.g=ao.g,o.b=ao.b,o}getStyle(o=dd){return au.fromWorkingColorSpace(dM(this,ao),o),o!==dd?`color(${o} ${ao.r} ${ao.g} ${ao.b})`:`rgb(${255*ao.r|0},${255*ao.g|0},${255*ao.b|0})`}offsetHSL(o,c,u){return this.getHSL(lu),lu.h+=o,lu.s+=c,lu.l+=u,this.setHSL(lu.h,lu.s,lu.l),this}add(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this}addColors(o,c){return this.r=o.r+c.r,this.g=o.g+c.g,this.b=o.b+c.b,this}addScalar(o){return this.r+=o,this.g+=o,this.b+=o,this}sub(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this}multiply(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this}multiplyScalar(o){return this.r*=o,this.g*=o,this.b*=o,this}lerp(o,c){return this.r+=(o.r-this.r)*c,this.g+=(o.g-this.g)*c,this.b+=(o.b-this.b)*c,this}lerpColors(o,c,u){return this.r=o.r+(c.r-o.r)*u,this.g=o.g+(c.g-o.g)*u,this.b=o.b+(c.b-o.b)*u,this}lerpHSL(o,c){this.getHSL(lu),o.getHSL(hM);const u=TC(lu.h,hM.h,c),h=TC(lu.s,hM.s,c),d=TC(lu.l,hM.l,c);return this.setHSL(u,h,d),this}equals(o){return o.r===this.r&&o.g===this.g&&o.b===this.b}fromArray(o,c=0){return this.r=o[c],this.g=o[c+1],this.b=o[c+2],this}toArray(o=[],c=0){return o[c]=this.r,o[c+1]=this.g,o[c+2]=this.b,o}fromBufferAttribute(o,c){return this.r=o.getX(c),this.g=o.getY(c),this.b=o.getZ(c),!0===o.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return l.NAMES=Tie,l})();class Die{static getDataURL(a){if(/^data:/i.test(a.src)||"undefined"==typeof HTMLCanvasElement)return a.src;let o;if(a instanceof HTMLCanvasElement)o=a;else{void 0===Kv&&(Kv=DC("canvas")),Kv.width=a.width,Kv.height=a.height;const c=Kv.getContext("2d");a instanceof ImageData?c.putImageData(a,0,0):c.drawImage(a,0,0,a.width,a.height),o=Kv}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(a){if("undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap){const o=DC("canvas");o.width=a.width,o.height=a.height;const c=o.getContext("2d");c.drawImage(a,0,0,a.width,a.height);const u=c.getImageData(0,0,a.width,a.height),h=u.data;for(let d=0;d<h.length;d++)h[d]=255*Rg(h[d]/255);return c.putImageData(u,0,0),o}if(a.data){const o=a.data.slice(0);for(let c=0;c<o.length;c++)o[c]=o instanceof Uint8Array||o instanceof Uint8ClampedArray?Math.floor(255*Rg(o[c]/255)):Rg(o[c]);return{data:o,width:a.width,height:a.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),a}}class Qv{constructor(a=null){this.isSource=!0,this.uuid=Rl(),this.data=a,this.version=0}set needsUpdate(a){!0===a&&this.version++}toJSON(a){const o=void 0===a||"string"==typeof a;if(!o&&void 0!==a.images[this.uuid])return a.images[this.uuid];const c={uuid:this.uuid,url:""},u=this.data;if(null!==u){let h;if(Array.isArray(u)){h=[];for(let d=0,f=u.length;d<f;d++)h.push(a5(u[d].isDataTexture?u[d].image:u[d]))}else h=a5(u);c.url=h}return o||(a.images[this.uuid]=c),c}}function a5(l){return"undefined"!=typeof HTMLImageElement&&l instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&l instanceof ImageBitmap?Die.getDataURL(l):l.data?{data:Array.from(l.data),width:l.width,height:l.height,type:l.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let J9e=0,oh=(()=>{class l extends Xv{constructor(o=l.DEFAULT_IMAGE,c=l.DEFAULT_MAPPING,u=Ka,h=Ka,d=Us,f=1008,p=ou,g=kg,m=1,v=Pg){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:J9e++}),this.uuid=Rl(),this.name="",this.source=new Qv(o),this.mipmaps=[],this.mapping=c,this.wrapS=u,this.wrapT=h,this.magFilter=d,this.minFilter=f,this.anisotropy=m,this.format=p,this.internalFormat=null,this.type=g,this.offset=new ht(0,0),this.repeat=new ht(1,1),this.center=new ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qa,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=v,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(o){this.source.data=o}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(o){return this.name=o.name,this.source=o.source,this.mipmaps=o.mipmaps.slice(0),this.mapping=o.mapping,this.wrapS=o.wrapS,this.wrapT=o.wrapT,this.magFilter=o.magFilter,this.minFilter=o.minFilter,this.anisotropy=o.anisotropy,this.format=o.format,this.internalFormat=o.internalFormat,this.type=o.type,this.offset.copy(o.offset),this.repeat.copy(o.repeat),this.center.copy(o.center),this.rotation=o.rotation,this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrix.copy(o.matrix),this.generateMipmaps=o.generateMipmaps,this.premultiplyAlpha=o.premultiplyAlpha,this.flipY=o.flipY,this.unpackAlignment=o.unpackAlignment,this.encoding=o.encoding,this.userData=JSON.parse(JSON.stringify(o.userData)),this.needsUpdate=!0,this}toJSON(o){const c=void 0===o||"string"==typeof o;if(!c&&void 0!==o.textures[this.uuid])return o.textures[this.uuid];const u={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(o).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(u.userData=this.userData),c||(o.textures[this.uuid]=u),u}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(o){if(300!==this.mapping)return o;if(o.applyMatrix3(this.matrix),o.x<0||o.x>1)switch(this.wrapS){case Hv:o.x=o.x-Math.floor(o.x);break;case Ka:o.x=o.x<0?0:1;break;case 1002:o.x=1===Math.abs(Math.floor(o.x)%2)?Math.ceil(o.x)-o.x:o.x-Math.floor(o.x)}if(o.y<0||o.y>1)switch(this.wrapT){case Hv:o.y=o.y-Math.floor(o.y);break;case Ka:o.y=o.y<0?0:1;break;case 1002:o.y=1===Math.abs(Math.floor(o.y)%2)?Math.ceil(o.y)-o.y:o.y-Math.floor(o.y)}return this.flipY&&(o.y=1-o.y),o}set needsUpdate(o){!0===o&&(this.version++,this.source.needsUpdate=!0)}}return l.DEFAULT_IMAGE=null,l.DEFAULT_MAPPING=300,l})();class ji{constructor(a=0,o=0,c=0,u=1){ji.prototype.isVector4=!0,this.x=a,this.y=o,this.z=c,this.w=u}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,o,c,u){return this.x=a,this.y=o,this.z=c,this.w=u,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this.w=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setW(a){return this.w=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this}add(a,o){return void 0!==o?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,o)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this.z=a.z+o.z,this.w=a.w+o.w,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this.z+=a.z*o,this.w+=a.w*o,this}sub(a,o){return void 0!==o?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,o)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this.z=a.z-o.z,this.w=a.w-o.w,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this}applyMatrix4(a){const o=this.x,c=this.y,u=this.z,h=this.w,d=a.elements;return this.x=d[0]*o+d[4]*c+d[8]*u+d[12]*h,this.y=d[1]*o+d[5]*c+d[9]*u+d[13]*h,this.z=d[2]*o+d[6]*c+d[10]*u+d[14]*h,this.w=d[3]*o+d[7]*c+d[11]*u+d[15]*h,this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const o=Math.sqrt(1-a.w*a.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/o,this.y=a.y/o,this.z=a.z/o),this}setAxisAngleFromRotationMatrix(a){let o,c,u,h;const p=a.elements,g=p[0],m=p[4],v=p[8],_=p[1],y=p[5],b=p[9],x=p[2],C=p[6],w=p[10];if(Math.abs(m-_)<.01&&Math.abs(v-x)<.01&&Math.abs(b-C)<.01){if(Math.abs(m+_)<.1&&Math.abs(v+x)<.1&&Math.abs(b+C)<.1&&Math.abs(g+y+w-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const D=(g+1)/2,T=(y+1)/2,A=(w+1)/2,I=(m+_)/4,N=(v+x)/4,k=(b+C)/4;return D>T&&D>A?D<.01?(c=0,u=.707106781,h=.707106781):(c=Math.sqrt(D),u=I/c,h=N/c):T>A?T<.01?(c=.707106781,u=0,h=.707106781):(u=Math.sqrt(T),c=I/u,h=k/u):A<.01?(c=.707106781,u=.707106781,h=0):(h=Math.sqrt(A),c=N/h,u=k/h),this.set(c,u,h,o),this}let S=Math.sqrt((C-b)*(C-b)+(v-x)*(v-x)+(_-m)*(_-m));return Math.abs(S)<.001&&(S=1),this.x=(C-b)/S,this.y=(v-x)/S,this.z=(_-m)/S,this.w=Math.acos((g+y+w-1)/2),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this.z=Math.max(a.z,Math.min(o.z,this.z)),this.w=Math.max(a.w,Math.min(o.w,this.w)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this.z=Math.max(a,Math.min(o,this.z)),this.w=Math.max(a,Math.min(o,this.w)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this.z+=(a.z-this.z)*o,this.w+=(a.w-this.w)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this.z=a.z+(o.z-a.z)*c,this.w=a.w+(o.w-a.w)*c,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this.z=a[o+2],this.w=a[o+3],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a[o+2]=this.z,a[o+3]=this.w,a}fromBufferAttribute(a,o,c){return void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(o),this.y=a.getY(o),this.z=a.getZ(o),this.w=a.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ma extends Xv{constructor(a,o,c={}){super(),this.isWebGLRenderTarget=!0,this.width=a,this.height=o,this.depth=1,this.scissor=new ji(0,0,a,o),this.scissorTest=!1,this.viewport=new ji(0,0,a,o),this.texture=new oh({width:a,height:o,depth:1},c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.internalFormat=void 0!==c.internalFormat?c.internalFormat:null,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:Us,this.depthBuffer=void 0===c.depthBuffer||c.depthBuffer,this.stencilBuffer=void 0!==c.stencilBuffer&&c.stencilBuffer,this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null,this.samples=void 0!==c.samples?c.samples:0}setSize(a,o,c=1){(this.width!==a||this.height!==o||this.depth!==c)&&(this.width=a,this.height=o,this.depth=c,this.texture.image.width=a,this.texture.image.height=o,this.texture.image.depth=c,this.dispose()),this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o)}clone(){return(new this.constructor).copy(this)}copy(a){this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.isRenderTargetTexture=!0;const o=Object.assign({},a.texture.image);return this.texture.source=new Qv(o),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,null!==a.depthTexture&&(this.depthTexture=a.depthTexture.clone()),this.samples=a.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class l5 extends oh{constructor(a=null,o=1,c=1,u=1){super(null),this.isDataArrayTexture=!0,this.image={data:a,width:o,height:c,depth:u},this.magFilter=oo,this.minFilter=oo,this.wrapR=Ka,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Mie extends oh{constructor(a=null,o=1,c=1,u=1){super(null),this.isData3DTexture=!0,this.image={data:a,width:o,height:c,depth:u},this.magFilter=oo,this.minFilter=oo,this.wrapR=Ka,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nl{constructor(a=0,o=0,c=0,u=1){this.isQuaternion=!0,this._x=a,this._y=o,this._z=c,this._w=u}static slerp(a,o,c,u){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),c.slerpQuaternions(a,o,u)}static slerpFlat(a,o,c,u,h,d,f){let p=c[u+0],g=c[u+1],m=c[u+2],v=c[u+3];const _=h[d+0],y=h[d+1],b=h[d+2],x=h[d+3];if(0===f)return a[o+0]=p,a[o+1]=g,a[o+2]=m,void(a[o+3]=v);if(1===f)return a[o+0]=_,a[o+1]=y,a[o+2]=b,void(a[o+3]=x);if(v!==x||p!==_||g!==y||m!==b){let C=1-f;const w=p*_+g*y+m*b+v*x,S=w>=0?1:-1,D=1-w*w;if(D>Number.EPSILON){const A=Math.sqrt(D),I=Math.atan2(A,w*S);C=Math.sin(C*I)/A,f=Math.sin(f*I)/A}const T=f*S;if(p=p*C+_*T,g=g*C+y*T,m=m*C+b*T,v=v*C+x*T,C===1-f){const A=1/Math.sqrt(p*p+g*g+m*m+v*v);p*=A,g*=A,m*=A,v*=A}}a[o]=p,a[o+1]=g,a[o+2]=m,a[o+3]=v}static multiplyQuaternionsFlat(a,o,c,u,h,d){const f=c[u],p=c[u+1],g=c[u+2],m=c[u+3],v=h[d],_=h[d+1],y=h[d+2],b=h[d+3];return a[o]=f*b+m*v+p*y-g*_,a[o+1]=p*b+m*_+g*v-f*y,a[o+2]=g*b+m*y+f*_-p*v,a[o+3]=m*b-f*v-p*_-g*y,a}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a,this._onChangeCallback()}set(a,o,c,u){return this._x=a,this._y=o,this._z=c,this._w=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this._onChangeCallback(),this}setFromEuler(a,o){if(!a||!a.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const c=a._x,u=a._y,h=a._z,d=a._order,f=Math.cos,p=Math.sin,g=f(c/2),m=f(u/2),v=f(h/2),_=p(c/2),y=p(u/2),b=p(h/2);switch(d){case"XYZ":this._x=_*m*v+g*y*b,this._y=g*y*v-_*m*b,this._z=g*m*b+_*y*v,this._w=g*m*v-_*y*b;break;case"YXZ":this._x=_*m*v+g*y*b,this._y=g*y*v-_*m*b,this._z=g*m*b-_*y*v,this._w=g*m*v+_*y*b;break;case"ZXY":this._x=_*m*v-g*y*b,this._y=g*y*v+_*m*b,this._z=g*m*b+_*y*v,this._w=g*m*v-_*y*b;break;case"ZYX":this._x=_*m*v-g*y*b,this._y=g*y*v+_*m*b,this._z=g*m*b-_*y*v,this._w=g*m*v+_*y*b;break;case"YZX":this._x=_*m*v+g*y*b,this._y=g*y*v+_*m*b,this._z=g*m*b-_*y*v,this._w=g*m*v-_*y*b;break;case"XZY":this._x=_*m*v-g*y*b,this._y=g*y*v-_*m*b,this._z=g*m*b+_*y*v,this._w=g*m*v+_*y*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return!1!==o&&this._onChangeCallback(),this}setFromAxisAngle(a,o){const c=o/2,u=Math.sin(c);return this._x=a.x*u,this._y=a.y*u,this._z=a.z*u,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(a){const o=a.elements,c=o[0],u=o[4],h=o[8],d=o[1],f=o[5],p=o[9],g=o[2],m=o[6],v=o[10],_=c+f+v;if(_>0){const y=.5/Math.sqrt(_+1);this._w=.25/y,this._x=(m-p)*y,this._y=(h-g)*y,this._z=(d-u)*y}else if(c>f&&c>v){const y=2*Math.sqrt(1+c-f-v);this._w=(m-p)/y,this._x=.25*y,this._y=(u+d)/y,this._z=(h+g)/y}else if(f>v){const y=2*Math.sqrt(1+f-c-v);this._w=(h-g)/y,this._x=(u+d)/y,this._y=.25*y,this._z=(p+m)/y}else{const y=2*Math.sqrt(1+v-c-f);this._w=(d-u)/y,this._x=(h+g)/y,this._y=(p+m)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(a,o){let c=a.dot(o)+1;return c<Number.EPSILON?(c=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=c):(this._x=0,this._y=-a.z,this._z=a.y,this._w=c)):(this._x=a.y*o.z-a.z*o.y,this._y=a.z*o.x-a.x*o.z,this._z=a.x*o.y-a.y*o.x,this._w=c),this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(Ms(this.dot(a),-1,1)))}rotateTowards(a,o){const c=this.angleTo(a);if(0===c)return this;const u=Math.min(1,o/c);return this.slerp(a,u),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this._onChangeCallback(),this}multiply(a,o){return void 0!==o?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,o)):this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,o){const c=a._x,u=a._y,h=a._z,d=a._w,f=o._x,p=o._y,g=o._z,m=o._w;return this._x=c*m+d*f+u*g-h*p,this._y=u*m+d*p+h*f-c*g,this._z=h*m+d*g+c*p-u*f,this._w=d*m-c*f-u*p-h*g,this._onChangeCallback(),this}slerp(a,o){if(0===o)return this;if(1===o)return this.copy(a);const c=this._x,u=this._y,h=this._z,d=this._w;let f=d*a._w+c*a._x+u*a._y+h*a._z;if(f<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,f=-f):this.copy(a),f>=1)return this._w=d,this._x=c,this._y=u,this._z=h,this;const p=1-f*f;if(p<=Number.EPSILON){const y=1-o;return this._w=y*d+o*this._w,this._x=y*c+o*this._x,this._y=y*u+o*this._y,this._z=y*h+o*this._z,this.normalize(),this._onChangeCallback(),this}const g=Math.sqrt(p),m=Math.atan2(g,f),v=Math.sin((1-o)*m)/g,_=Math.sin(o*m)/g;return this._w=d*v+this._w*_,this._x=c*v+this._x*_,this._y=u*v+this._y*_,this._z=h*v+this._z*_,this._onChangeCallback(),this}slerpQuaternions(a,o,c){return this.copy(a).slerp(o,c)}random(){const a=Math.random(),o=Math.sqrt(1-a),c=Math.sqrt(a),u=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(o*Math.cos(u),c*Math.sin(h),c*Math.cos(h),o*Math.sin(u))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,o=0){return this._x=a[o],this._y=a[o+1],this._z=a[o+2],this._w=a[o+3],this._onChangeCallback(),this}toArray(a=[],o=0){return a[o]=this._x,a[o+1]=this._y,a[o+2]=this._z,a[o+3]=this._w,a}fromBufferAttribute(a,o){return this._x=a.getX(o),this._y=a.getY(o),this._z=a.getZ(o),this._w=a.getW(o),this}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(a=0,o=0,c=0){te.prototype.isVector3=!0,this.x=a,this.y=o,this.z=c}set(a,o,c){return void 0===c&&(c=this.z),this.x=a,this.y=o,this.z=c,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a,o){return void 0!==o?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,o)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this.z=a.z+o.z,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this.z+=a.z*o,this}sub(a,o){return void 0!==o?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,o)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this.z=a.z-o.z,this}multiply(a,o){return void 0!==o?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,o)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}multiplyVectors(a,o){return this.x=a.x*o.x,this.y=a.y*o.y,this.z=a.z*o.z,this}applyEuler(a){return a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Eie.setFromEuler(a))}applyAxisAngle(a,o){return this.applyQuaternion(Eie.setFromAxisAngle(a,o))}applyMatrix3(a){const o=this.x,c=this.y,u=this.z,h=a.elements;return this.x=h[0]*o+h[3]*c+h[6]*u,this.y=h[1]*o+h[4]*c+h[7]*u,this.z=h[2]*o+h[5]*c+h[8]*u,this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const o=this.x,c=this.y,u=this.z,h=a.elements,d=1/(h[3]*o+h[7]*c+h[11]*u+h[15]);return this.x=(h[0]*o+h[4]*c+h[8]*u+h[12])*d,this.y=(h[1]*o+h[5]*c+h[9]*u+h[13])*d,this.z=(h[2]*o+h[6]*c+h[10]*u+h[14])*d,this}applyQuaternion(a){const o=this.x,c=this.y,u=this.z,h=a.x,d=a.y,f=a.z,p=a.w,g=p*o+d*u-f*c,m=p*c+f*o-h*u,v=p*u+h*c-d*o,_=-h*o-d*c-f*u;return this.x=g*p+_*-h+m*-f-v*-d,this.y=m*p+_*-d+v*-h-g*-f,this.z=v*p+_*-f+g*-d-m*-h,this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const o=this.x,c=this.y,u=this.z,h=a.elements;return this.x=h[0]*o+h[4]*c+h[8]*u,this.y=h[1]*o+h[5]*c+h[9]*u,this.z=h[2]*o+h[6]*c+h[10]*u,this.normalize()}divide(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this.z=Math.max(a.z,Math.min(o.z,this.z)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this.z=Math.max(a,Math.min(o,this.z)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this.z+=(a.z-this.z)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this.z=a.z+(o.z-a.z)*c,this}cross(a,o){return void 0!==o?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,o)):this.crossVectors(this,a)}crossVectors(a,o){const c=a.x,u=a.y,h=a.z,d=o.x,f=o.y,p=o.z;return this.x=u*p-h*f,this.y=h*d-c*p,this.z=c*f-u*d,this}projectOnVector(a){const o=a.lengthSq();if(0===o)return this.set(0,0,0);const c=a.dot(this)/o;return this.copy(a).multiplyScalar(c)}projectOnPlane(a){return c5.copy(this).projectOnVector(a),this.sub(c5)}reflect(a){return this.sub(c5.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const o=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===o)return Math.PI/2;const c=this.dot(a)/o;return Math.acos(Ms(c,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const o=this.x-a.x,c=this.y-a.y,u=this.z-a.z;return o*o+c*c+u*u}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,o,c){const u=Math.sin(o)*a;return this.x=u*Math.sin(c),this.y=Math.cos(o)*a,this.z=u*Math.cos(c),this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,o,c){return this.x=a*Math.sin(o),this.y=c,this.z=a*Math.cos(o),this}setFromMatrixPosition(a){const o=a.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(a){const o=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length(),u=this.setFromMatrixColumn(a,2).length();return this.x=o,this.y=c,this.z=u,this}setFromMatrixColumn(a,o){return this.fromArray(a.elements,4*o)}setFromMatrix3Column(a,o){return this.fromArray(a.elements,3*o)}setFromEuler(a){return this.x=a._x,this.y=a._y,this.z=a._z,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this.z=a[o+2],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a[o+2]=this.z,a}fromBufferAttribute(a,o,c){return void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(o),this.y=a.getY(o),this.z=a.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const a=2*(Math.random()-.5),o=Math.random()*Math.PI*2,c=Math.sqrt(1-a**2);return this.x=c*Math.cos(o),this.y=c*Math.sin(o),this.z=a,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const c5=new te,Eie=new Nl;class Jv{constructor(a=new te(1/0,1/0,1/0),o=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=a,this.max=o}set(a,o){return this.min.copy(a),this.max.copy(o),this}setFromArray(a){let o=1/0,c=1/0,u=1/0,h=-1/0,d=-1/0,f=-1/0;for(let p=0,g=a.length;p<g;p+=3){const m=a[p],v=a[p+1],_=a[p+2];m<o&&(o=m),v<c&&(c=v),_<u&&(u=_),m>h&&(h=m),v>d&&(d=v),_>f&&(f=_)}return this.min.set(o,c,u),this.max.set(h,d,f),this}setFromBufferAttribute(a){let o=1/0,c=1/0,u=1/0,h=-1/0,d=-1/0,f=-1/0;for(let p=0,g=a.count;p<g;p++){const m=a.getX(p),v=a.getY(p),_=a.getZ(p);m<o&&(o=m),v<c&&(c=v),_<u&&(u=_),m>h&&(h=m),v>d&&(d=v),_>f&&(f=_)}return this.min.set(o,c,u),this.max.set(h,d,f),this}setFromPoints(a){this.makeEmpty();for(let o=0,c=a.length;o<c;o++)this.expandByPoint(a[o]);return this}setFromCenterAndSize(a,o){const c=Ng.copy(o).multiplyScalar(.5);return this.min.copy(a).sub(c),this.max.copy(a).add(c),this}setFromObject(a,o=!1){return this.makeEmpty(),this.expandByObject(a,o)}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}expandByObject(a,o=!1){a.updateWorldMatrix(!1,!1);const c=a.geometry;if(void 0!==c)if(o&&null!=c.attributes&&void 0!==c.attributes.position){const h=c.attributes.position;for(let d=0,f=h.count;d<f;d++)Ng.fromBufferAttribute(h,d).applyMatrix4(a.matrixWorld),this.expandByPoint(Ng)}else null===c.boundingBox&&c.computeBoundingBox(),u5.copy(c.boundingBox),u5.applyMatrix4(a.matrixWorld),this.union(u5);const u=a.children;for(let h=0,d=u.length;h<d;h++)this.expandByObject(u[h],o);return this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,o){return o.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)}intersectsSphere(a){return this.clampPoint(a.center,Ng),Ng.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let o,c;return a.normal.x>0?(o=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(o=a.normal.x*this.max.x,c=a.normal.x*this.min.x),a.normal.y>0?(o+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(o+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y),a.normal.z>0?(o+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(o+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z),o<=-a.constant&&c>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(MC),fM.subVectors(this.max,MC),e_.subVectors(a.a,MC),t_.subVectors(a.b,MC),n_.subVectors(a.c,MC),Bf.subVectors(t_,e_),Vf.subVectors(n_,t_),Lg.subVectors(e_,n_);let o=[0,-Bf.z,Bf.y,0,-Vf.z,Vf.y,0,-Lg.z,Lg.y,Bf.z,0,-Bf.x,Vf.z,0,-Vf.x,Lg.z,0,-Lg.x,-Bf.y,Bf.x,0,-Vf.y,Vf.x,0,-Lg.y,Lg.x,0];return!(!h5(o,e_,t_,n_,fM)||(o=[1,0,0,0,1,0,0,0,1],!h5(o,e_,t_,n_,fM)))&&(pM.crossVectors(Bf,Vf),o=[pM.x,pM.y,pM.z],h5(o,e_,t_,n_,fM))}clampPoint(a,o){return o.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return Ng.copy(a).clamp(this.min,this.max).sub(a).length()}getBoundingSphere(a){return this.getCenter(a.center),a.radius=.5*this.getSize(Ng).length(),a}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}applyMatrix4(a){return this.isEmpty()||(fd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a),fd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a),fd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a),fd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a),fd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a),fd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a),fd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a),fd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a),this.setFromPoints(fd)),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const fd=[new te,new te,new te,new te,new te,new te,new te,new te],Ng=new te,u5=new Jv,e_=new te,t_=new te,n_=new te,Bf=new te,Vf=new te,Lg=new te,MC=new te,fM=new te,pM=new te,Bg=new te;function h5(l,a,o,c,u){for(let h=0,d=l.length-3;h<=d;h+=3){Bg.fromArray(l,h);const f=u.x*Math.abs(Bg.x)+u.y*Math.abs(Bg.y)+u.z*Math.abs(Bg.z),p=a.dot(Bg),g=o.dot(Bg),m=c.dot(Bg);if(Math.max(-Math.max(p,g,m),Math.min(p,g,m))>f)return!1}return!0}const eWe=new Jv,kie=new te,gM=new te,d5=new te;class i_{constructor(a=new te,o=-1){this.center=a,this.radius=o}set(a,o){return this.center.copy(a),this.radius=o,this}setFromPoints(a,o){const c=this.center;void 0!==o?c.copy(o):eWe.setFromPoints(a).getCenter(c);let u=0;for(let h=0,d=a.length;h<d;h++)u=Math.max(u,c.distanceToSquared(a[h]));return this.radius=Math.sqrt(u),this}copy(a){return this.center.copy(a.center),this.radius=a.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const o=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=o*o}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,o){const c=this.center.distanceToSquared(a);return o.copy(a),c>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(a){return this.isEmpty()?(a.makeEmpty(),a):(a.set(this.center,this.center),a.expandByScalar(this.radius),a)}applyMatrix4(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this}translate(a){return this.center.add(a),this}expandByPoint(a){d5.subVectors(a,this.center);const o=d5.lengthSq();if(o>this.radius*this.radius){const c=Math.sqrt(o),u=.5*(c-this.radius);this.center.add(d5.multiplyScalar(u/c)),this.radius+=u}return this}union(a){return!0===this.center.equals(a.center)?gM.set(0,0,1).multiplyScalar(a.radius):gM.subVectors(a.center,this.center).normalize().multiplyScalar(a.radius),this.expandByPoint(kie.copy(a.center).add(gM)),this.expandByPoint(kie.copy(a.center).sub(gM)),this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const pd=new te,f5=new te,mM=new te,zf=new te,p5=new te,vM=new te,g5=new te;class _M{constructor(a=new te,o=new te(0,0,-1)){this.origin=a,this.direction=o}set(a,o){return this.origin.copy(a),this.direction.copy(o),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,o){return o.copy(this.direction).multiplyScalar(a).add(this.origin)}lookAt(a){return this.direction.copy(a).sub(this.origin).normalize(),this}recast(a){return this.origin.copy(this.at(a,pd)),this}closestPointToPoint(a,o){o.subVectors(a,this.origin);const c=o.dot(this.direction);return c<0?o.copy(this.origin):o.copy(this.direction).multiplyScalar(c).add(this.origin)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const o=pd.subVectors(a,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(a):(pd.copy(this.direction).multiplyScalar(o).add(this.origin),pd.distanceToSquared(a))}distanceSqToSegment(a,o,c,u){f5.copy(a).add(o).multiplyScalar(.5),mM.copy(o).sub(a).normalize(),zf.copy(this.origin).sub(f5);const h=.5*a.distanceTo(o),d=-this.direction.dot(mM),f=zf.dot(this.direction),p=-zf.dot(mM),g=zf.lengthSq(),m=Math.abs(1-d*d);let v,_,y,b;if(m>0)if(v=d*p-f,_=d*f-p,b=h*m,v>=0)if(_>=-b)if(_<=b){const x=1/m;v*=x,_*=x,y=v*(v+d*_+2*f)+_*(d*v+_+2*p)+g}else _=h,v=Math.max(0,-(d*_+f)),y=-v*v+_*(_+2*p)+g;else _=-h,v=Math.max(0,-(d*_+f)),y=-v*v+_*(_+2*p)+g;else _<=-b?(v=Math.max(0,-(-d*h+f)),_=v>0?-h:Math.min(Math.max(-h,-p),h),y=-v*v+_*(_+2*p)+g):_<=b?(v=0,_=Math.min(Math.max(-h,-p),h),y=_*(_+2*p)+g):(v=Math.max(0,-(d*h+f)),_=v>0?h:Math.min(Math.max(-h,-p),h),y=-v*v+_*(_+2*p)+g);else _=d>0?-h:h,v=Math.max(0,-(d*_+f)),y=-v*v+_*(_+2*p)+g;return c&&c.copy(this.direction).multiplyScalar(v).add(this.origin),u&&u.copy(mM).multiplyScalar(_).add(f5),y}intersectSphere(a,o){pd.subVectors(a.center,this.origin);const c=pd.dot(this.direction),u=pd.dot(pd)-c*c,h=a.radius*a.radius;if(u>h)return null;const d=Math.sqrt(h-u),f=c-d,p=c+d;return f<0&&p<0?null:this.at(f<0?p:f,o)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const o=a.normal.dot(this.direction);if(0===o)return 0===a.distanceToPoint(this.origin)?0:null;const c=-(this.origin.dot(a.normal)+a.constant)/o;return c>=0?c:null}intersectPlane(a,o){const c=this.distanceToPlane(a);return null===c?null:this.at(c,o)}intersectsPlane(a){const o=a.distanceToPoint(this.origin);return 0===o||a.normal.dot(this.direction)*o<0}intersectBox(a,o){let c,u,h,d,f,p;const g=1/this.direction.x,m=1/this.direction.y,v=1/this.direction.z,_=this.origin;return g>=0?(c=(a.min.x-_.x)*g,u=(a.max.x-_.x)*g):(c=(a.max.x-_.x)*g,u=(a.min.x-_.x)*g),m>=0?(h=(a.min.y-_.y)*m,d=(a.max.y-_.y)*m):(h=(a.max.y-_.y)*m,d=(a.min.y-_.y)*m),c>d||h>u||((h>c||c!=c)&&(c=h),(d<u||u!=u)&&(u=d),v>=0?(f=(a.min.z-_.z)*v,p=(a.max.z-_.z)*v):(f=(a.max.z-_.z)*v,p=(a.min.z-_.z)*v),c>p||f>u)||((f>c||c!=c)&&(c=f),(p<u||u!=u)&&(u=p),u<0)?null:this.at(c>=0?c:u,o)}intersectsBox(a){return null!==this.intersectBox(a,pd)}intersectTriangle(a,o,c,u,h){p5.subVectors(o,a),vM.subVectors(c,a),g5.crossVectors(p5,vM);let f,d=this.direction.dot(g5);if(d>0){if(u)return null;f=1}else{if(!(d<0))return null;f=-1,d=-d}zf.subVectors(this.origin,a);const p=f*this.direction.dot(vM.crossVectors(zf,vM));if(p<0)return null;const g=f*this.direction.dot(p5.cross(zf));if(g<0||p+g>d)return null;const m=-f*zf.dot(g5);return m<0?null:this.at(m/d,h)}applyMatrix4(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ii{constructor(){ii.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(a,o,c,u,h,d,f,p,g,m,v,_,y,b,x,C){const w=this.elements;return w[0]=a,w[4]=o,w[8]=c,w[12]=u,w[1]=h,w[5]=d,w[9]=f,w[13]=p,w[2]=g,w[6]=m,w[10]=v,w[14]=_,w[3]=y,w[7]=b,w[11]=x,w[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ii).fromArray(this.elements)}copy(a){const o=this.elements,c=a.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],this}copyPosition(a){const o=this.elements,c=a.elements;return o[12]=c[12],o[13]=c[13],o[14]=c[14],this}setFromMatrix3(a){const o=a.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(a,o,c){return a.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(a,o,c){return this.set(a.x,o.x,c.x,0,a.y,o.y,c.y,0,a.z,o.z,c.z,0,0,0,0,1),this}extractRotation(a){const o=this.elements,c=a.elements,u=1/r_.setFromMatrixColumn(a,0).length(),h=1/r_.setFromMatrixColumn(a,1).length(),d=1/r_.setFromMatrixColumn(a,2).length();return o[0]=c[0]*u,o[1]=c[1]*u,o[2]=c[2]*u,o[3]=0,o[4]=c[4]*h,o[5]=c[5]*h,o[6]=c[6]*h,o[7]=0,o[8]=c[8]*d,o[9]=c[9]*d,o[10]=c[10]*d,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const o=this.elements,c=a.x,u=a.y,h=a.z,d=Math.cos(c),f=Math.sin(c),p=Math.cos(u),g=Math.sin(u),m=Math.cos(h),v=Math.sin(h);if("XYZ"===a.order){const _=d*m,y=d*v,b=f*m,x=f*v;o[0]=p*m,o[4]=-p*v,o[8]=g,o[1]=y+b*g,o[5]=_-x*g,o[9]=-f*p,o[2]=x-_*g,o[6]=b+y*g,o[10]=d*p}else if("YXZ"===a.order){const _=p*m,y=p*v,b=g*m,x=g*v;o[0]=_+x*f,o[4]=b*f-y,o[8]=d*g,o[1]=d*v,o[5]=d*m,o[9]=-f,o[2]=y*f-b,o[6]=x+_*f,o[10]=d*p}else if("ZXY"===a.order){const _=p*m,y=p*v,b=g*m,x=g*v;o[0]=_-x*f,o[4]=-d*v,o[8]=b+y*f,o[1]=y+b*f,o[5]=d*m,o[9]=x-_*f,o[2]=-d*g,o[6]=f,o[10]=d*p}else if("ZYX"===a.order){const _=d*m,y=d*v,b=f*m,x=f*v;o[0]=p*m,o[4]=b*g-y,o[8]=_*g+x,o[1]=p*v,o[5]=x*g+_,o[9]=y*g-b,o[2]=-g,o[6]=f*p,o[10]=d*p}else if("YZX"===a.order){const _=d*p,y=d*g,b=f*p,x=f*g;o[0]=p*m,o[4]=x-_*v,o[8]=b*v+y,o[1]=v,o[5]=d*m,o[9]=-f*m,o[2]=-g*m,o[6]=y*v+b,o[10]=_-x*v}else if("XZY"===a.order){const _=d*p,y=d*g,b=f*p,x=f*g;o[0]=p*m,o[4]=-v,o[8]=g*m,o[1]=_*v+x,o[5]=d*m,o[9]=y*v-b,o[2]=b*v-y,o[6]=f*m,o[10]=x*v+_}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(a){return this.compose(tWe,a,nWe)}lookAt(a,o,c){const u=this.elements;return Ll.subVectors(a,o),0===Ll.lengthSq()&&(Ll.z=1),Ll.normalize(),Uf.crossVectors(c,Ll),0===Uf.lengthSq()&&(1===Math.abs(c.z)?Ll.x+=1e-4:Ll.z+=1e-4,Ll.normalize(),Uf.crossVectors(c,Ll)),Uf.normalize(),yM.crossVectors(Ll,Uf),u[0]=Uf.x,u[4]=yM.x,u[8]=Ll.x,u[1]=Uf.y,u[5]=yM.y,u[9]=Ll.y,u[2]=Uf.z,u[6]=yM.z,u[10]=Ll.z,this}multiply(a,o){return void 0!==o?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,o)):this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,o){const c=a.elements,u=o.elements,h=this.elements,d=c[0],f=c[4],p=c[8],g=c[12],m=c[1],v=c[5],_=c[9],y=c[13],b=c[2],x=c[6],C=c[10],w=c[14],S=c[3],D=c[7],T=c[11],A=c[15],I=u[0],N=u[4],k=u[8],F=u[12],B=u[1],V=u[5],$=u[9],q=u[13],L=u[2],U=u[6],z=u[10],W=u[14],H=u[3],j=u[7],G=u[11],K=u[15];return h[0]=d*I+f*B+p*L+g*H,h[4]=d*N+f*V+p*U+g*j,h[8]=d*k+f*$+p*z+g*G,h[12]=d*F+f*q+p*W+g*K,h[1]=m*I+v*B+_*L+y*H,h[5]=m*N+v*V+_*U+y*j,h[9]=m*k+v*$+_*z+y*G,h[13]=m*F+v*q+_*W+y*K,h[2]=b*I+x*B+C*L+w*H,h[6]=b*N+x*V+C*U+w*j,h[10]=b*k+x*$+C*z+w*G,h[14]=b*F+x*q+C*W+w*K,h[3]=S*I+D*B+T*L+A*H,h[7]=S*N+D*V+T*U+A*j,h[11]=S*k+D*$+T*z+A*G,h[15]=S*F+D*q+T*W+A*K,this}multiplyScalar(a){const o=this.elements;return o[0]*=a,o[4]*=a,o[8]*=a,o[12]*=a,o[1]*=a,o[5]*=a,o[9]*=a,o[13]*=a,o[2]*=a,o[6]*=a,o[10]*=a,o[14]*=a,o[3]*=a,o[7]*=a,o[11]*=a,o[15]*=a,this}determinant(){const a=this.elements,o=a[0],c=a[4],u=a[8],h=a[12],d=a[1],f=a[5],p=a[9],g=a[13],m=a[2],v=a[6],_=a[10],y=a[14];return a[3]*(+h*p*v-u*g*v-h*f*_+c*g*_+u*f*y-c*p*y)+a[7]*(+o*p*y-o*g*_+h*d*_-u*d*y+u*g*m-h*p*m)+a[11]*(+o*g*v-o*f*y-h*d*v+c*d*y+h*f*m-c*g*m)+a[15]*(-u*f*m-o*p*v+o*f*_+u*d*v-c*d*_+c*p*m)}transpose(){const a=this.elements;let o;return o=a[1],a[1]=a[4],a[4]=o,o=a[2],a[2]=a[8],a[8]=o,o=a[6],a[6]=a[9],a[9]=o,o=a[3],a[3]=a[12],a[12]=o,o=a[7],a[7]=a[13],a[13]=o,o=a[11],a[11]=a[14],a[14]=o,this}setPosition(a,o,c){const u=this.elements;return a.isVector3?(u[12]=a.x,u[13]=a.y,u[14]=a.z):(u[12]=a,u[13]=o,u[14]=c),this}invert(){const a=this.elements,o=a[0],c=a[1],u=a[2],h=a[3],d=a[4],f=a[5],p=a[6],g=a[7],m=a[8],v=a[9],_=a[10],y=a[11],b=a[12],x=a[13],C=a[14],w=a[15],S=v*C*g-x*_*g+x*p*y-f*C*y-v*p*w+f*_*w,D=b*_*g-m*C*g-b*p*y+d*C*y+m*p*w-d*_*w,T=m*x*g-b*v*g+b*f*y-d*x*y-m*f*w+d*v*w,A=b*v*p-m*x*p-b*f*_+d*x*_+m*f*C-d*v*C,I=o*S+c*D+u*T+h*A;if(0===I)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/I;return a[0]=S*N,a[1]=(x*_*h-v*C*h-x*u*y+c*C*y+v*u*w-c*_*w)*N,a[2]=(f*C*h-x*p*h+x*u*g-c*C*g-f*u*w+c*p*w)*N,a[3]=(v*p*h-f*_*h-v*u*g+c*_*g+f*u*y-c*p*y)*N,a[4]=D*N,a[5]=(m*C*h-b*_*h+b*u*y-o*C*y-m*u*w+o*_*w)*N,a[6]=(b*p*h-d*C*h-b*u*g+o*C*g+d*u*w-o*p*w)*N,a[7]=(d*_*h-m*p*h+m*u*g-o*_*g-d*u*y+o*p*y)*N,a[8]=T*N,a[9]=(b*v*h-m*x*h-b*c*y+o*x*y+m*c*w-o*v*w)*N,a[10]=(d*x*h-b*f*h+b*c*g-o*x*g-d*c*w+o*f*w)*N,a[11]=(m*f*h-d*v*h-m*c*g+o*v*g+d*c*y-o*f*y)*N,a[12]=A*N,a[13]=(m*x*u-b*v*u+b*c*_-o*x*_-m*c*C+o*v*C)*N,a[14]=(b*f*u-d*x*u-b*c*p+o*x*p+d*c*C-o*f*C)*N,a[15]=(d*v*u-m*f*u+m*c*p-o*v*p-d*c*_+o*f*_)*N,this}scale(a){const o=this.elements,c=a.x,u=a.y,h=a.z;return o[0]*=c,o[4]*=u,o[8]*=h,o[1]*=c,o[5]*=u,o[9]*=h,o[2]*=c,o[6]*=u,o[10]*=h,o[3]*=c,o[7]*=u,o[11]*=h,this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,o,c){return this.set(1,0,0,a,0,1,0,o,0,0,1,c,0,0,0,1),this}makeRotationX(a){const o=Math.cos(a),c=Math.sin(a);return this.set(1,0,0,0,0,o,-c,0,0,c,o,0,0,0,0,1),this}makeRotationY(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,0,c,0,0,1,0,0,-c,0,o,0,0,0,0,1),this}makeRotationZ(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,-c,0,0,c,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,o){const c=Math.cos(o),u=Math.sin(o),h=1-c,d=a.x,f=a.y,p=a.z,g=h*d,m=h*f;return this.set(g*d+c,g*f-u*p,g*p+u*f,0,g*f+u*p,m*f+c,m*p-u*d,0,g*p-u*f,m*p+u*d,h*p*p+c,0,0,0,0,1),this}makeScale(a,o,c){return this.set(a,0,0,0,0,o,0,0,0,0,c,0,0,0,0,1),this}makeShear(a,o,c,u,h,d){return this.set(1,c,h,0,a,1,d,0,o,u,1,0,0,0,0,1),this}compose(a,o,c){const u=this.elements,h=o._x,d=o._y,f=o._z,p=o._w,g=h+h,m=d+d,v=f+f,_=h*g,y=h*m,b=h*v,x=d*m,C=d*v,w=f*v,S=p*g,D=p*m,T=p*v,A=c.x,I=c.y,N=c.z;return u[0]=(1-(x+w))*A,u[1]=(y+T)*A,u[2]=(b-D)*A,u[3]=0,u[4]=(y-T)*I,u[5]=(1-(_+w))*I,u[6]=(C+S)*I,u[7]=0,u[8]=(b+D)*N,u[9]=(C-S)*N,u[10]=(1-(_+x))*N,u[11]=0,u[12]=a.x,u[13]=a.y,u[14]=a.z,u[15]=1,this}decompose(a,o,c){const u=this.elements;let h=r_.set(u[0],u[1],u[2]).length();const d=r_.set(u[4],u[5],u[6]).length(),f=r_.set(u[8],u[9],u[10]).length();this.determinant()<0&&(h=-h),a.x=u[12],a.y=u[13],a.z=u[14],cu.copy(this);const g=1/h,m=1/d,v=1/f;return cu.elements[0]*=g,cu.elements[1]*=g,cu.elements[2]*=g,cu.elements[4]*=m,cu.elements[5]*=m,cu.elements[6]*=m,cu.elements[8]*=v,cu.elements[9]*=v,cu.elements[10]*=v,o.setFromRotationMatrix(cu),c.x=h,c.y=d,c.z=f,this}makePerspective(a,o,c,u,h,d){void 0===d&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const f=this.elements,g=2*h/(c-u),m=(o+a)/(o-a),v=(c+u)/(c-u),_=-(d+h)/(d-h),y=-2*d*h/(d-h);return f[0]=2*h/(o-a),f[4]=0,f[8]=m,f[12]=0,f[1]=0,f[5]=g,f[9]=v,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=y,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(a,o,c,u,h,d){const f=this.elements,p=1/(o-a),g=1/(c-u),m=1/(d-h),v=(o+a)*p,_=(c+u)*g,y=(d+h)*m;return f[0]=2*p,f[4]=0,f[8]=0,f[12]=-v,f[1]=0,f[5]=2*g,f[9]=0,f[13]=-_,f[2]=0,f[6]=0,f[10]=-2*m,f[14]=-y,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(a){const o=this.elements,c=a.elements;for(let u=0;u<16;u++)if(o[u]!==c[u])return!1;return!0}fromArray(a,o=0){for(let c=0;c<16;c++)this.elements[c]=a[c+o];return this}toArray(a=[],o=0){const c=this.elements;return a[o]=c[0],a[o+1]=c[1],a[o+2]=c[2],a[o+3]=c[3],a[o+4]=c[4],a[o+5]=c[5],a[o+6]=c[6],a[o+7]=c[7],a[o+8]=c[8],a[o+9]=c[9],a[o+10]=c[10],a[o+11]=c[11],a[o+12]=c[12],a[o+13]=c[13],a[o+14]=c[14],a[o+15]=c[15],a}}const r_=new te,cu=new ii,tWe=new te(0,0,0),nWe=new te(1,1,1),Uf=new te,yM=new te,Ll=new te,Aie=new ii,Iie=new Nl;let iWe=(()=>{class l{constructor(o=0,c=0,u=0,h=l.DefaultOrder){this.isEuler=!0,this._x=o,this._y=c,this._z=u,this._order=h}get x(){return this._x}set x(o){this._x=o,this._onChangeCallback()}get y(){return this._y}set y(o){this._y=o,this._onChangeCallback()}get z(){return this._z}set z(o){this._z=o,this._onChangeCallback()}get order(){return this._order}set order(o){this._order=o,this._onChangeCallback()}set(o,c,u,h=this._order){return this._x=o,this._y=c,this._z=u,this._order=h,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this._onChangeCallback(),this}setFromRotationMatrix(o,c=this._order,u=!0){const h=o.elements,d=h[0],f=h[4],p=h[8],g=h[1],m=h[5],v=h[9],_=h[2],y=h[6],b=h[10];switch(c){case"XYZ":this._y=Math.asin(Ms(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-v,b),this._z=Math.atan2(-f,d)):(this._x=Math.atan2(y,m),this._z=0);break;case"YXZ":this._x=Math.asin(-Ms(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(p,b),this._z=Math.atan2(g,m)):(this._y=Math.atan2(-_,d),this._z=0);break;case"ZXY":this._x=Math.asin(Ms(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-_,b),this._z=Math.atan2(-f,m)):(this._y=0,this._z=Math.atan2(g,d));break;case"ZYX":this._y=Math.asin(-Ms(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(y,b),this._z=Math.atan2(g,d)):(this._x=0,this._z=Math.atan2(-f,m));break;case"YZX":this._z=Math.asin(Ms(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-v,m),this._y=Math.atan2(-_,d)):(this._x=0,this._y=Math.atan2(p,b));break;case"XZY":this._z=Math.asin(-Ms(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(y,m),this._y=Math.atan2(p,d)):(this._x=Math.atan2(-v,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+c)}return this._order=c,!0===u&&this._onChangeCallback(),this}setFromQuaternion(o,c,u){return Aie.makeRotationFromQuaternion(o),this.setFromRotationMatrix(Aie,c,u)}setFromVector3(o,c=this._order){return this.set(o.x,o.y,o.z,c)}reorder(o){return Iie.setFromEuler(this),this.setFromQuaternion(Iie,o)}equals(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order}fromArray(o){return this._x=o[0],this._y=o[1],this._z=o[2],void 0!==o[3]&&(this._order=o[3]),this._onChangeCallback(),this}toArray(o=[],c=0){return o[c]=this._x,o[c+1]=this._y,o[c+2]=this._z,o[c+3]=this._order,o}_onChange(o){return this._onChangeCallback=o,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return l.DefaultOrder="XYZ",l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l})();class m5{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask|=1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!=(this.mask&a.mask)}isEnabled(a){return 0!=(this.mask&(1<<a|0))}}let rWe=0;const Pie=new te,s_=new Nl,gd=new ii,bM=new te,EC=new te,sWe=new te,oWe=new Nl,Oie=new te(1,0,0),Fie=new te(0,1,0),Rie=new te(0,0,1),aWe={type:"added"},Nie={type:"removed"};let Bl=(()=>{class l extends Xv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rWe++}),this.uuid=Rl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=l.DefaultUp.clone();const o=new te,c=new iWe,u=new Nl,h=new te(1,1,1);c._onChange(function d(){u.setFromEuler(c,!1)}),u._onChange(function f(){c.setFromQuaternion(u,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:o},rotation:{configurable:!0,enumerable:!0,value:c},quaternion:{configurable:!0,enumerable:!0,value:u},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new ii},normalMatrix:{value:new Qa}}),this.matrix=new ii,this.matrixWorld=new ii,this.matrixAutoUpdate=l.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new m5,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(o){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(o),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(o){return this.quaternion.premultiply(o),this}setRotationFromAxisAngle(o,c){this.quaternion.setFromAxisAngle(o,c)}setRotationFromEuler(o){this.quaternion.setFromEuler(o,!0)}setRotationFromMatrix(o){this.quaternion.setFromRotationMatrix(o)}setRotationFromQuaternion(o){this.quaternion.copy(o)}rotateOnAxis(o,c){return s_.setFromAxisAngle(o,c),this.quaternion.multiply(s_),this}rotateOnWorldAxis(o,c){return s_.setFromAxisAngle(o,c),this.quaternion.premultiply(s_),this}rotateX(o){return this.rotateOnAxis(Oie,o)}rotateY(o){return this.rotateOnAxis(Fie,o)}rotateZ(o){return this.rotateOnAxis(Rie,o)}translateOnAxis(o,c){return Pie.copy(o).applyQuaternion(this.quaternion),this.position.add(Pie.multiplyScalar(c)),this}translateX(o){return this.translateOnAxis(Oie,o)}translateY(o){return this.translateOnAxis(Fie,o)}translateZ(o){return this.translateOnAxis(Rie,o)}localToWorld(o){return o.applyMatrix4(this.matrixWorld)}worldToLocal(o){return o.applyMatrix4(gd.copy(this.matrixWorld).invert())}lookAt(o,c,u){o.isVector3?bM.copy(o):bM.set(o,c,u);const h=this.parent;this.updateWorldMatrix(!0,!1),EC.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gd.lookAt(EC,bM,this.up):gd.lookAt(bM,EC,this.up),this.quaternion.setFromRotationMatrix(gd),h&&(gd.extractRotation(h.matrixWorld),s_.setFromRotationMatrix(gd),this.quaternion.premultiply(s_.invert()))}add(o){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.add(arguments[c]);return this}return o===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",o),this):(o&&o.isObject3D?(null!==o.parent&&o.parent.remove(o),o.parent=this,this.children.push(o),o.dispatchEvent(aWe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",o),this)}remove(o){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.remove(arguments[u]);return this}const c=this.children.indexOf(o);return-1!==c&&(o.parent=null,this.children.splice(c,1),o.dispatchEvent(Nie)),this}removeFromParent(){const o=this.parent;return null!==o&&o.remove(this),this}clear(){for(let o=0;o<this.children.length;o++){const c=this.children[o];c.parent=null,c.dispatchEvent(Nie)}return this.children.length=0,this}attach(o){return this.updateWorldMatrix(!0,!1),gd.copy(this.matrixWorld).invert(),null!==o.parent&&(o.parent.updateWorldMatrix(!0,!1),gd.multiply(o.parent.matrixWorld)),o.applyMatrix4(gd),this.add(o),o.updateWorldMatrix(!1,!0),this}getObjectById(o){return this.getObjectByProperty("id",o)}getObjectByName(o){return this.getObjectByProperty("name",o)}getObjectByProperty(o,c){if(this[o]===c)return this;for(let u=0,h=this.children.length;u<h;u++){const f=this.children[u].getObjectByProperty(o,c);if(void 0!==f)return f}}getWorldPosition(o){return this.updateWorldMatrix(!0,!1),o.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(EC,o,sWe),o}getWorldScale(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(EC,oWe,o),o}getWorldDirection(o){this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return o.set(c[8],c[9],c[10]).normalize()}raycast(){}traverse(o){o(this);const c=this.children;for(let u=0,h=c.length;u<h;u++)c[u].traverse(o)}traverseVisible(o){if(!1===this.visible)return;o(this);const c=this.children;for(let u=0,h=c.length;u<h;u++)c[u].traverseVisible(o)}traverseAncestors(o){const c=this.parent;null!==c&&(o(c),c.traverseAncestors(o))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);const c=this.children;for(let u=0,h=c.length;u<h;u++)c[u].updateMatrixWorld(o)}updateWorldMatrix(o,c){const u=this.parent;if(!0===o&&null!==u&&u.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===c){const h=this.children;for(let d=0,f=h.length;d<f;d++)h[d].updateWorldMatrix(!1,!0)}}toJSON(o){const c=void 0===o||"string"==typeof o,u={};c&&(o={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const h={};function d(p,g){return void 0===p[g.uuid]&&(p[g.uuid]=g.toJSON(o)),g.uuid}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),!0===this.castShadow&&(h.castShadow=!0),!0===this.receiveShadow&&(h.receiveShadow=!0),!1===this.visible&&(h.visible=!1),!1===this.frustumCulled&&(h.frustumCulled=!1),0!==this.renderOrder&&(h.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),h.layers=this.layers.mask,h.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(h.matrixAutoUpdate=!1),this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(h.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(o).uuid)),this.environment&&this.environment.isTexture&&(h.environment=this.environment.toJSON(o).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=d(o.geometries,this.geometry);const p=this.geometry.parameters;if(void 0!==p&&void 0!==p.shapes){const g=p.shapes;if(Array.isArray(g))for(let m=0,v=g.length;m<v;m++)d(o.shapes,g[m]);else d(o.shapes,g)}}if(this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(d(o.skeletons,this.skeleton),h.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const p=[];for(let g=0,m=this.material.length;g<m;g++)p.push(d(o.materials,this.material[g]));h.material=p}else h.material=d(o.materials,this.material);if(this.children.length>0){h.children=[];for(let p=0;p<this.children.length;p++)h.children.push(this.children[p].toJSON(o).object)}if(this.animations.length>0){h.animations=[];for(let p=0;p<this.animations.length;p++)h.animations.push(d(o.animations,this.animations[p]))}if(c){const p=f(o.geometries),g=f(o.materials),m=f(o.textures),v=f(o.images),_=f(o.shapes),y=f(o.skeletons),b=f(o.animations),x=f(o.nodes);p.length>0&&(u.geometries=p),g.length>0&&(u.materials=g),m.length>0&&(u.textures=m),v.length>0&&(u.images=v),_.length>0&&(u.shapes=_),y.length>0&&(u.skeletons=y),b.length>0&&(u.animations=b),x.length>0&&(u.nodes=x)}return u.object=h,u;function f(p){const g=[];for(const m in p){const v=p[m];delete v.metadata,g.push(v)}return g}}clone(o){return(new this.constructor).copy(this,o)}copy(o,c=!0){if(this.name=o.name,this.up.copy(o.up),this.position.copy(o.position),this.rotation.order=o.rotation.order,this.quaternion.copy(o.quaternion),this.scale.copy(o.scale),this.matrix.copy(o.matrix),this.matrixWorld.copy(o.matrixWorld),this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrixWorldNeedsUpdate=o.matrixWorldNeedsUpdate,this.layers.mask=o.layers.mask,this.visible=o.visible,this.castShadow=o.castShadow,this.receiveShadow=o.receiveShadow,this.frustumCulled=o.frustumCulled,this.renderOrder=o.renderOrder,this.userData=JSON.parse(JSON.stringify(o.userData)),!0===c)for(let u=0;u<o.children.length;u++)this.add(o.children[u].clone());return this}}return l.DefaultUp=new te(0,1,0),l.DefaultMatrixAutoUpdate=!0,l})();const uu=new te,md=new te,v5=new te,vd=new te,o_=new te,a_=new te,Lie=new te,_5=new te,y5=new te,b5=new te;class hu{constructor(a=new te,o=new te,c=new te){this.a=a,this.b=o,this.c=c}static getNormal(a,o,c,u){u.subVectors(c,o),uu.subVectors(a,o),u.cross(uu);const h=u.lengthSq();return h>0?u.multiplyScalar(1/Math.sqrt(h)):u.set(0,0,0)}static getBarycoord(a,o,c,u,h){uu.subVectors(u,o),md.subVectors(c,o),v5.subVectors(a,o);const d=uu.dot(uu),f=uu.dot(md),p=uu.dot(v5),g=md.dot(md),m=md.dot(v5),v=d*g-f*f;if(0===v)return h.set(-2,-1,-1);const _=1/v,y=(g*p-f*m)*_,b=(d*m-f*p)*_;return h.set(1-y-b,b,y)}static containsPoint(a,o,c,u){return this.getBarycoord(a,o,c,u,vd),vd.x>=0&&vd.y>=0&&vd.x+vd.y<=1}static getUV(a,o,c,u,h,d,f,p){return this.getBarycoord(a,o,c,u,vd),p.set(0,0),p.addScaledVector(h,vd.x),p.addScaledVector(d,vd.y),p.addScaledVector(f,vd.z),p}static isFrontFacing(a,o,c,u){return uu.subVectors(c,o),md.subVectors(a,o),uu.cross(md).dot(u)<0}set(a,o,c){return this.a.copy(a),this.b.copy(o),this.c.copy(c),this}setFromPointsAndIndices(a,o,c,u){return this.a.copy(a[o]),this.b.copy(a[c]),this.c.copy(a[u]),this}setFromAttributeAndIndices(a,o,c,u){return this.a.fromBufferAttribute(a,o),this.b.fromBufferAttribute(a,c),this.c.fromBufferAttribute(a,u),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return uu.subVectors(this.c,this.b),md.subVectors(this.a,this.b),.5*uu.cross(md).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return hu.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,o){return hu.getBarycoord(a,this.a,this.b,this.c,o)}getUV(a,o,c,u,h){return hu.getUV(a,this.a,this.b,this.c,o,c,u,h)}containsPoint(a){return hu.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return hu.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,o){const c=this.a,u=this.b,h=this.c;let d,f;o_.subVectors(u,c),a_.subVectors(h,c),_5.subVectors(a,c);const p=o_.dot(_5),g=a_.dot(_5);if(p<=0&&g<=0)return o.copy(c);y5.subVectors(a,u);const m=o_.dot(y5),v=a_.dot(y5);if(m>=0&&v<=m)return o.copy(u);const _=p*v-m*g;if(_<=0&&p>=0&&m<=0)return d=p/(p-m),o.copy(c).addScaledVector(o_,d);b5.subVectors(a,h);const y=o_.dot(b5),b=a_.dot(b5);if(b>=0&&y<=b)return o.copy(h);const x=y*g-p*b;if(x<=0&&g>=0&&b<=0)return f=g/(g-b),o.copy(c).addScaledVector(a_,f);const C=m*b-y*v;if(C<=0&&v-m>=0&&y-b>=0)return Lie.subVectors(h,u),f=(v-m)/(v-m+(y-b)),o.copy(u).addScaledVector(Lie,f);const w=1/(C+x+_);return d=x*w,f=_*w,o.copy(c).addScaledVector(o_,d).addScaledVector(a_,f)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let lWe=0;class Vg extends Xv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lWe++}),this.uuid=Rl(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==a)for(const o in a){const c=a[o];if(void 0===c){console.warn("THREE.Material: '"+o+"' parameter is undefined.");continue}if("shading"===o){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c;continue}const u=this[o];void 0!==u?u&&u.isColor?u.set(c):u&&u.isVector3&&c&&c.isVector3?u.copy(c):this[o]=c:console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.")}}toJSON(a){const o=void 0===a||"string"==typeof a;o&&(a={textures:{},images:{}});const c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function u(h){const d=[];for(const f in h){const p=h[f];delete p.metadata,d.push(p)}return d}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),void 0!==this.roughness&&(c.roughness=this.roughness),void 0!==this.metalness&&(c.metalness=this.metalness),void 0!==this.sheen&&(c.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(c.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(c.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(c.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(c.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(c.shininess=this.shininess),void 0!==this.clearcoat&&(c.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(c.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(c.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(c.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(c.iridescenceMap=this.iridescenceMap.toJSON(a).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(c.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(a).uuid),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(a).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(a).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(a).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(a).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(a).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(c.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(c.specularColorMap=this.specularColorMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(c.combine=this.combine)),void 0!==this.envMapIntensity&&(c.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(c.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(c.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.transmission&&(c.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(c.transmissionMap=this.transmissionMap.toJSON(a).uuid),void 0!==this.thickness&&(c.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(c.thicknessMap=this.thicknessMap.toJSON(a).uuid),void 0!==this.attenuationDistance&&(c.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(c.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(c.size=this.size),null!==this.shadowSide&&(c.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(c.blending=this.blending),0!==this.side&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),!0===this.transparent&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.colorWrite=this.colorWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(c.rotation=this.rotation),!0===this.polygonOffset&&(c.polygonOffset=!0),0!==this.polygonOffsetFactor&&(c.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(c.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(c.linewidth=this.linewidth),void 0!==this.dashSize&&(c.dashSize=this.dashSize),void 0!==this.gapSize&&(c.gapSize=this.gapSize),void 0!==this.scale&&(c.scale=this.scale),!0===this.dithering&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(c.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(c.flatShading=this.flatShading),!1===this.visible&&(c.visible=!1),!1===this.toneMapped&&(c.toneMapped=!1),!1===this.fog&&(c.fog=!1),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),o){const h=u(a.textures),d=u(a.images);h.length>0&&(c.textures=h),d.length>0&&(c.images=d)}return c}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;const o=a.clippingPlanes;let c=null;if(null!==o){const u=o.length;c=new Array(u);for(let h=0;h!==u;++h)c[h]=o[h].clone()}return this.clippingPlanes=c,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===a&&this.version++}}class Es extends Vg{constructor(a){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}const Hs=new te,CM=new ht;class rs{constructor(a,o,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=a,this.itemSize=o,this.count=void 0!==a?a.length/o:0,this.normalized=!0===c,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.name=a.name,this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.usage=a.usage,this}copyAt(a,o,c){a*=this.itemSize,c*=o.itemSize;for(let u=0,h=this.itemSize;u<h;u++)this.array[a+u]=o.array[c+u];return this}copyArray(a){return this.array.set(a),this}copyColorsArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",u),d=new rn),o[c++]=d.r,o[c++]=d.g,o[c++]=d.b}return this}copyVector2sArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",u),d=new ht),o[c++]=d.x,o[c++]=d.y}return this}copyVector3sArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",u),d=new te),o[c++]=d.x,o[c++]=d.y,o[c++]=d.z}return this}copyVector4sArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",u),d=new ji),o[c++]=d.x,o[c++]=d.y,o[c++]=d.z,o[c++]=d.w}return this}applyMatrix3(a){if(2===this.itemSize)for(let o=0,c=this.count;o<c;o++)CM.fromBufferAttribute(this,o),CM.applyMatrix3(a),this.setXY(o,CM.x,CM.y);else if(3===this.itemSize)for(let o=0,c=this.count;o<c;o++)Hs.fromBufferAttribute(this,o),Hs.applyMatrix3(a),this.setXYZ(o,Hs.x,Hs.y,Hs.z);return this}applyMatrix4(a){for(let o=0,c=this.count;o<c;o++)Hs.fromBufferAttribute(this,o),Hs.applyMatrix4(a),this.setXYZ(o,Hs.x,Hs.y,Hs.z);return this}applyNormalMatrix(a){for(let o=0,c=this.count;o<c;o++)Hs.fromBufferAttribute(this,o),Hs.applyNormalMatrix(a),this.setXYZ(o,Hs.x,Hs.y,Hs.z);return this}transformDirection(a){for(let o=0,c=this.count;o<c;o++)Hs.fromBufferAttribute(this,o),Hs.transformDirection(a),this.setXYZ(o,Hs.x,Hs.y,Hs.z);return this}set(a,o=0){return this.array.set(a,o),this}getX(a){return this.array[a*this.itemSize]}setX(a,o){return this.array[a*this.itemSize]=o,this}getY(a){return this.array[a*this.itemSize+1]}setY(a,o){return this.array[a*this.itemSize+1]=o,this}getZ(a){return this.array[a*this.itemSize+2]}setZ(a,o){return this.array[a*this.itemSize+2]=o,this}getW(a){return this.array[a*this.itemSize+3]}setW(a,o){return this.array[a*this.itemSize+3]=o,this}setXY(a,o,c){return this.array[0+(a*=this.itemSize)]=o,this.array[a+1]=c,this}setXYZ(a,o,c,u){return this.array[0+(a*=this.itemSize)]=o,this.array[a+1]=c,this.array[a+2]=u,this}setXYZW(a,o,c,u,h){return this.array[0+(a*=this.itemSize)]=o,this.array[a+1]=c,this.array[a+2]=u,this.array[a+3]=h,this}onUpload(a){return this.onUploadCallback=a,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(a.name=this.name),35044!==this.usage&&(a.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(a.updateRange=this.updateRange),a}}class Bie extends rs{constructor(a,o,c){super(new Uint16Array(a),o,c)}}class Vie extends rs{constructor(a,o,c){super(new Uint32Array(a),o,c)}}class Sn extends rs{constructor(a,o,c){super(new Float32Array(a),o,c)}}let cWe=0;const pc=new ii,C5=new Bl,l_=new te,Vl=new Jv,kC=new Jv,bo=new te;class wi extends Xv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cWe++}),this.uuid=Rl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(a){return this.index=Array.isArray(a)?new(Sie(a)?Vie:Bie)(a,1):a,this}getAttribute(a){return this.attributes[a]}setAttribute(a,o){return this.attributes[a]=o,this}deleteAttribute(a){return delete this.attributes[a],this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,o,c=0){this.groups.push({start:a,count:o,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(a,o){this.drawRange.start=a,this.drawRange.count=o}applyMatrix4(a){const o=this.attributes.position;void 0!==o&&(o.applyMatrix4(a),o.needsUpdate=!0);const c=this.attributes.normal;if(void 0!==c){const h=(new Qa).getNormalMatrix(a);c.applyNormalMatrix(h),c.needsUpdate=!0}const u=this.attributes.tangent;return void 0!==u&&(u.transformDirection(a),u.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(a){return pc.makeRotationFromQuaternion(a),this.applyMatrix4(pc),this}rotateX(a){return pc.makeRotationX(a),this.applyMatrix4(pc),this}rotateY(a){return pc.makeRotationY(a),this.applyMatrix4(pc),this}rotateZ(a){return pc.makeRotationZ(a),this.applyMatrix4(pc),this}translate(a,o,c){return pc.makeTranslation(a,o,c),this.applyMatrix4(pc),this}scale(a,o,c){return pc.makeScale(a,o,c),this.applyMatrix4(pc),this}lookAt(a){return C5.lookAt(a),C5.updateMatrix(),this.applyMatrix4(C5.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(l_).negate(),this.translate(l_.x,l_.y,l_.z),this}setFromPoints(a){const o=[];for(let c=0,u=a.length;c<u;c++){const h=a[c];o.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new Sn(o,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Jv);const a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),o)for(let c=0,u=o.length;c<u;c++)Vl.setFromBufferAttribute(o[c]),this.morphTargetsRelative?(bo.addVectors(this.boundingBox.min,Vl.min),this.boundingBox.expandByPoint(bo),bo.addVectors(this.boundingBox.max,Vl.max),this.boundingBox.expandByPoint(bo)):(this.boundingBox.expandByPoint(Vl.min),this.boundingBox.expandByPoint(Vl.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new i_);const a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new te,1/0);if(a){const c=this.boundingSphere.center;if(Vl.setFromBufferAttribute(a),o)for(let h=0,d=o.length;h<d;h++)kC.setFromBufferAttribute(o[h]),this.morphTargetsRelative?(bo.addVectors(Vl.min,kC.min),Vl.expandByPoint(bo),bo.addVectors(Vl.max,kC.max),Vl.expandByPoint(bo)):(Vl.expandByPoint(kC.min),Vl.expandByPoint(kC.max));Vl.getCenter(c);let u=0;for(let h=0,d=a.count;h<d;h++)bo.fromBufferAttribute(a,h),u=Math.max(u,c.distanceToSquared(bo));if(o)for(let h=0,d=o.length;h<d;h++){const f=o[h],p=this.morphTargetsRelative;for(let g=0,m=f.count;g<m;g++)bo.fromBufferAttribute(f,g),p&&(l_.fromBufferAttribute(a,g),bo.add(l_)),u=Math.max(u,c.distanceToSquared(bo))}this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const a=this.index,o=this.attributes;if(null===a||void 0===o.position||void 0===o.normal||void 0===o.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=a.array,u=o.position.array,h=o.normal.array,d=o.uv.array,f=u.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new rs(new Float32Array(4*f),4));const p=this.getAttribute("tangent").array,g=[],m=[];for(let B=0;B<f;B++)g[B]=new te,m[B]=new te;const v=new te,_=new te,y=new te,b=new ht,x=new ht,C=new ht,w=new te,S=new te;function D(B,V,$){v.fromArray(u,3*B),_.fromArray(u,3*V),y.fromArray(u,3*$),b.fromArray(d,2*B),x.fromArray(d,2*V),C.fromArray(d,2*$),_.sub(v),y.sub(v),x.sub(b),C.sub(b);const q=1/(x.x*C.y-C.x*x.y);!isFinite(q)||(w.copy(_).multiplyScalar(C.y).addScaledVector(y,-x.y).multiplyScalar(q),S.copy(y).multiplyScalar(x.x).addScaledVector(_,-C.x).multiplyScalar(q),g[B].add(w),g[V].add(w),g[$].add(w),m[B].add(S),m[V].add(S),m[$].add(S))}let T=this.groups;0===T.length&&(T=[{start:0,count:c.length}]);for(let B=0,V=T.length;B<V;++B){const $=T[B],q=$.start;for(let U=q,z=q+$.count;U<z;U+=3)D(c[U+0],c[U+1],c[U+2])}const A=new te,I=new te,N=new te,k=new te;function F(B){N.fromArray(h,3*B),k.copy(N);const V=g[B];A.copy(V),A.sub(N.multiplyScalar(N.dot(V))).normalize(),I.crossVectors(k,V);const q=I.dot(m[B])<0?-1:1;p[4*B]=A.x,p[4*B+1]=A.y,p[4*B+2]=A.z,p[4*B+3]=q}for(let B=0,V=T.length;B<V;++B){const $=T[B],q=$.start;for(let U=q,z=q+$.count;U<z;U+=3)F(c[U+0]),F(c[U+1]),F(c[U+2])}}computeVertexNormals(){const a=this.index,o=this.getAttribute("position");if(void 0!==o){let c=this.getAttribute("normal");if(void 0===c)c=new rs(new Float32Array(3*o.count),3),this.setAttribute("normal",c);else for(let _=0,y=c.count;_<y;_++)c.setXYZ(_,0,0,0);const u=new te,h=new te,d=new te,f=new te,p=new te,g=new te,m=new te,v=new te;if(a)for(let _=0,y=a.count;_<y;_+=3){const b=a.getX(_+0),x=a.getX(_+1),C=a.getX(_+2);u.fromBufferAttribute(o,b),h.fromBufferAttribute(o,x),d.fromBufferAttribute(o,C),m.subVectors(d,h),v.subVectors(u,h),m.cross(v),f.fromBufferAttribute(c,b),p.fromBufferAttribute(c,x),g.fromBufferAttribute(c,C),f.add(m),p.add(m),g.add(m),c.setXYZ(b,f.x,f.y,f.z),c.setXYZ(x,p.x,p.y,p.z),c.setXYZ(C,g.x,g.y,g.z)}else for(let _=0,y=o.count;_<y;_+=3)u.fromBufferAttribute(o,_+0),h.fromBufferAttribute(o,_+1),d.fromBufferAttribute(o,_+2),m.subVectors(d,h),v.subVectors(u,h),m.cross(v),c.setXYZ(_+0,m.x,m.y,m.z),c.setXYZ(_+1,m.x,m.y,m.z),c.setXYZ(_+2,m.x,m.y,m.z);this.normalizeNormals(),c.needsUpdate=!0}}merge(a,o){if(!a||!a.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);void 0===o&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const c=this.attributes;for(const u in c){if(void 0===a.attributes[u])continue;const d=c[u].array,f=a.attributes[u],p=f.array,g=f.itemSize*o,m=Math.min(p.length,d.length-g);for(let v=0,_=g;v<m;v++,_++)d[_]=p[v]}return this}normalizeNormals(){const a=this.attributes.normal;for(let o=0,c=a.count;o<c;o++)bo.fromBufferAttribute(a,o),bo.normalize(),a.setXYZ(o,bo.x,bo.y,bo.z)}toNonIndexed(){function a(f,p){const g=f.array,m=f.itemSize,v=f.normalized,_=new g.constructor(p.length*m);let y=0,b=0;for(let x=0,C=p.length;x<C;x++){y=f.isInterleavedBufferAttribute?p[x]*f.data.stride+f.offset:p[x]*m;for(let w=0;w<m;w++)_[b++]=g[y++]}return new rs(_,m,v)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new wi,c=this.index.array,u=this.attributes;for(const f in u){const g=a(u[f],c);o.setAttribute(f,g)}const h=this.morphAttributes;for(const f in h){const p=[],g=h[f];for(let m=0,v=g.length;m<v;m++){const y=a(g[m],c);p.push(y)}o.morphAttributes[f]=p}o.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let f=0,p=d.length;f<p;f++){const g=d[f];o.addGroup(g.start,g.count,g.materialIndex)}return o}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),void 0!==this.parameters){const p=this.parameters;for(const g in p)void 0!==p[g]&&(a[g]=p[g]);return a}a.data={attributes:{}};const o=this.index;null!==o&&(a.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const c=this.attributes;for(const p in c)a.data.attributes[p]=c[p].toJSON(a.data);const u={};let h=!1;for(const p in this.morphAttributes){const g=this.morphAttributes[p],m=[];for(let v=0,_=g.length;v<_;v++)m.push(g[v].toJSON(a.data));m.length>0&&(u[p]=m,h=!0)}h&&(a.data.morphAttributes=u,a.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(a.data.groups=JSON.parse(JSON.stringify(d)));const f=this.boundingSphere;return null!==f&&(a.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),a}clone(){return(new this.constructor).copy(this)}copy(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=a.name;const c=a.index;null!==c&&this.setIndex(c.clone(o));const u=a.attributes;for(const g in u)this.setAttribute(g,u[g].clone(o));const h=a.morphAttributes;for(const g in h){const m=[],v=h[g];for(let _=0,y=v.length;_<y;_++)m.push(v[_].clone(o));this.morphAttributes[g]=m}this.morphTargetsRelative=a.morphTargetsRelative;const d=a.groups;for(let g=0,m=d.length;g<m;g++){const v=d[g];this.addGroup(v.start,v.count,v.materialIndex)}const f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());const p=a.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,void 0!==a.parameters&&(this.parameters=Object.assign({},a.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const zie=new ii,c_=new _M,x5=new i_,Hf=new te,Wf=new te,Gf=new te,w5=new te,S5=new te,T5=new te,xM=new te,wM=new te,SM=new te,TM=new ht,DM=new ht,MM=new ht,D5=new te,EM=new te;class Wi extends Bl{constructor(a=new wi,o=new Es){super(),this.isMesh=!0,this.type="Mesh",this.geometry=a,this.material=o,this.updateMorphTargets()}copy(a,o){return super.copy(a,o),void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}updateMorphTargets(){const o=this.geometry.morphAttributes,c=Object.keys(o);if(c.length>0){const u=o[c[0]];if(void 0!==u){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=u.length;h<d;h++){const f=u[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=h}}}}raycast(a,o){const c=this.geometry,u=this.material,h=this.matrixWorld;if(void 0===u||(null===c.boundingSphere&&c.computeBoundingSphere(),x5.copy(c.boundingSphere),x5.applyMatrix4(h),!1===a.ray.intersectsSphere(x5))||(zie.copy(h).invert(),c_.copy(a.ray).applyMatrix4(zie),null!==c.boundingBox&&!1===c_.intersectsBox(c.boundingBox)))return;let d;const f=c.index,p=c.attributes.position,g=c.morphAttributes.position,m=c.morphTargetsRelative,v=c.attributes.uv,_=c.attributes.uv2,y=c.groups,b=c.drawRange;if(null!==f)if(Array.isArray(u))for(let x=0,C=y.length;x<C;x++){const w=y[x],S=u[w.materialIndex];for(let A=Math.max(w.start,b.start),I=Math.min(f.count,Math.min(w.start+w.count,b.start+b.count));A<I;A+=3){const N=f.getX(A),k=f.getX(A+1),F=f.getX(A+2);d=kM(this,S,a,c_,p,g,m,v,_,N,k,F),d&&(d.faceIndex=Math.floor(A/3),d.face.materialIndex=w.materialIndex,o.push(d))}}else for(let w=Math.max(0,b.start),S=Math.min(f.count,b.start+b.count);w<S;w+=3){const D=f.getX(w),T=f.getX(w+1),A=f.getX(w+2);d=kM(this,u,a,c_,p,g,m,v,_,D,T,A),d&&(d.faceIndex=Math.floor(w/3),o.push(d))}else if(void 0!==p)if(Array.isArray(u))for(let x=0,C=y.length;x<C;x++){const w=y[x],S=u[w.materialIndex];for(let A=Math.max(w.start,b.start),I=Math.min(p.count,Math.min(w.start+w.count,b.start+b.count));A<I;A+=3)d=kM(this,S,a,c_,p,g,m,v,_,A,A+1,A+2),d&&(d.faceIndex=Math.floor(A/3),d.face.materialIndex=w.materialIndex,o.push(d))}else for(let w=Math.max(0,b.start),S=Math.min(p.count,b.start+b.count);w<S;w+=3)d=kM(this,u,a,c_,p,g,m,v,_,w,w+1,w+2),d&&(d.faceIndex=Math.floor(w/3),o.push(d))}}function kM(l,a,o,c,u,h,d,f,p,g,m,v){Hf.fromBufferAttribute(u,g),Wf.fromBufferAttribute(u,m),Gf.fromBufferAttribute(u,v);const _=l.morphTargetInfluences;if(h&&_){xM.set(0,0,0),wM.set(0,0,0),SM.set(0,0,0);for(let b=0,x=h.length;b<x;b++){const C=_[b],w=h[b];0!==C&&(w5.fromBufferAttribute(w,g),S5.fromBufferAttribute(w,m),T5.fromBufferAttribute(w,v),d?(xM.addScaledVector(w5,C),wM.addScaledVector(S5,C),SM.addScaledVector(T5,C)):(xM.addScaledVector(w5.sub(Hf),C),wM.addScaledVector(S5.sub(Wf),C),SM.addScaledVector(T5.sub(Gf),C)))}Hf.add(xM),Wf.add(wM),Gf.add(SM)}l.isSkinnedMesh&&(l.boneTransform(g,Hf),l.boneTransform(m,Wf),l.boneTransform(v,Gf));const y=function uWe(l,a,o,c,u,h,d,f){let p;if(p=1===a.side?c.intersectTriangle(d,h,u,!0,f):c.intersectTriangle(u,h,d,2!==a.side,f),null===p)return null;EM.copy(f),EM.applyMatrix4(l.matrixWorld);const g=o.ray.origin.distanceTo(EM);return g<o.near||g>o.far?null:{distance:g,point:EM.clone(),object:l}}(l,a,o,c,Hf,Wf,Gf,D5);if(y){f&&(TM.fromBufferAttribute(f,g),DM.fromBufferAttribute(f,m),MM.fromBufferAttribute(f,v),y.uv=hu.getUV(D5,Hf,Wf,Gf,TM,DM,MM,new ht)),p&&(TM.fromBufferAttribute(p,g),DM.fromBufferAttribute(p,m),MM.fromBufferAttribute(p,v),y.uv2=hu.getUV(D5,Hf,Wf,Gf,TM,DM,MM,new ht));const b={a:g,b:m,c:v,normal:new te,materialIndex:0};hu.getNormal(Hf,Wf,Gf,b.normal),y.face=b}return y}class _d extends wi{constructor(a=1,o=1,c=1,u=1,h=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:a,height:o,depth:c,widthSegments:u,heightSegments:h,depthSegments:d};const f=this;u=Math.floor(u),h=Math.floor(h),d=Math.floor(d);const p=[],g=[],m=[],v=[];let _=0,y=0;function b(x,C,w,S,D,T,A,I,N,k,F){const B=T/N,V=A/k,$=T/2,q=A/2,L=I/2,U=N+1,z=k+1;let W=0,H=0;const j=new te;for(let G=0;G<z;G++){const K=G*V-q;for(let J=0;J<U;J++)j[x]=(J*B-$)*S,j[C]=K*D,j[w]=L,g.push(j.x,j.y,j.z),j[x]=0,j[C]=0,j[w]=I>0?1:-1,m.push(j.x,j.y,j.z),v.push(J/N),v.push(1-G/k),W+=1}for(let G=0;G<k;G++)for(let K=0;K<N;K++){const ce=_+K+U*(G+1),oe=_+(K+1)+U*(G+1),xe=_+(K+1)+U*G;p.push(_+K+U*G,ce,xe),p.push(ce,oe,xe),H+=6}f.addGroup(y,H,F),y+=H,_+=W}b("z","y","x",-1,-1,c,o,a,d,h,0),b("z","y","x",1,-1,c,o,-a,d,h,1),b("x","z","y",1,1,a,c,o,u,d,2),b("x","z","y",1,-1,a,c,-o,u,d,3),b("x","y","z",1,-1,a,o,c,u,h,4),b("x","y","z",-1,-1,a,o,-c,u,h,5),this.setIndex(p),this.setAttribute("position",new Sn(g,3)),this.setAttribute("normal",new Sn(m,3)),this.setAttribute("uv",new Sn(v,2))}static fromJSON(a){return new _d(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}function u_(l){const a={};for(const o in l){a[o]={};for(const c in l[o]){const u=l[o][c];a[o][c]=u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture||u.isQuaternion)?u.clone():Array.isArray(u)?u.slice():u}}return a}function Zo(l){const a={};for(let o=0;o<l.length;o++){const c=u_(l[o]);for(const u in c)a[u]=c[u]}return a}const AM={clone:u_,merge:Zo};class Ko extends Vg{constructor(a){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}copy(a){return super.copy(a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=u_(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.fog=a.fog,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}toJSON(a){const o=super.toJSON(a);o.glslVersion=this.glslVersion,o.uniforms={};for(const u in this.uniforms){const d=this.uniforms[u].value;o.uniforms[u]=d&&d.isTexture?{type:"t",value:d.toJSON(a).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;const c={};for(const u in this.extensions)!0===this.extensions[u]&&(c[u]=!0);return Object.keys(c).length>0&&(o.extensions=c),o}}class M5 extends Bl{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ii,this.projectionMatrix=new ii,this.projectionMatrixInverse=new ii}copy(a,o){return super.copy(a,o),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return a.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,o){super.updateWorldMatrix(a,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Ws extends M5{constructor(a=50,o=1,c=.1,u=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=a,this.zoom=1,this.near=c,this.far=u,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(a,o){return super.copy(a,o),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}setFocalLength(a){const o=.5*this.getFilmHeight()/a;this.fov=2*SC*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(.5*Fg*this.fov);return.5*this.getFilmHeight()/a}getEffectiveFOV(){return 2*SC*Math.atan(Math.tan(.5*Fg*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,o,c,u,h,d){this.aspect=a/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=u,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let o=a*Math.tan(.5*Fg*this.fov)/this.zoom,c=2*o,u=this.aspect*c,h=-.5*u;const d=this.view;if(null!==this.view&&this.view.enabled){const p=d.fullWidth,g=d.fullHeight;h+=d.offsetX*u/p,o-=d.offsetY*c/g,u*=d.width/p,c*=d.height/g}const f=this.filmOffset;0!==f&&(h+=a*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+u,o,o-c,a,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const o=super.toJSON(a);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}class fWe extends Bl{constructor(a,o,c){if(super(),this.type="CubeCamera",!0!==c.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=c;const u=new Ws(90,1,a,o);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new te(1,0,0)),this.add(u);const h=new Ws(90,1,a,o);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new te(-1,0,0)),this.add(h);const d=new Ws(90,1,a,o);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(new te(0,1,0)),this.add(d);const f=new Ws(90,1,a,o);f.layers=this.layers,f.up.set(0,0,-1),f.lookAt(new te(0,-1,0)),this.add(f);const p=new Ws(90,1,a,o);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new te(0,0,1)),this.add(p);const g=new Ws(90,1,a,o);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new te(0,0,-1)),this.add(g)}update(a,o){null===this.parent&&this.updateMatrixWorld();const c=this.renderTarget,[u,h,d,f,p,g]=this.children,m=a.getRenderTarget(),v=a.toneMapping,_=a.xr.enabled;a.toneMapping=0,a.xr.enabled=!1;const y=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,a.setRenderTarget(c,0),a.render(o,u),a.setRenderTarget(c,1),a.render(o,h),a.setRenderTarget(c,2),a.render(o,d),a.setRenderTarget(c,3),a.render(o,f),a.setRenderTarget(c,4),a.render(o,p),c.texture.generateMipmaps=y,a.setRenderTarget(c,5),a.render(o,g),a.setRenderTarget(m),a.toneMapping=v,a.xr.enabled=_,c.texture.needsPMREMUpdate=!0}}class IM extends oh{constructor(a,o,c,u,h,d,f,p,g,m){super(a=void 0!==a?a:[],o=void 0!==o?o:301,c,u,h,d,f,p,g,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}class pWe extends Ma{constructor(a,o={}){super(a,a,o),this.isWebGLCubeRenderTarget=!0;const c={width:a,height:a,depth:1};this.texture=new IM([c,c,c,c,c,c],o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,this.texture.minFilter=void 0!==o.minFilter?o.minFilter:Us}fromEquirectangularTexture(a,o){this.texture.type=o.type,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const c_uniforms={tEquirect:{value:null}},c_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",c_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",u=new _d(5,5,5),h=new Ko({name:"CubemapFromEquirect",uniforms:u_(c_uniforms),vertexShader:c_vertexShader,fragmentShader:c_fragmentShader,side:1,blending:0});h.uniforms.tEquirect.value=o;const d=new Wi(u,h),f=o.minFilter;return 1008===o.minFilter&&(o.minFilter=Us),new fWe(1,10,this).update(a,d),o.minFilter=f,d.geometry.dispose(),d.material.dispose(),this}clear(a,o,c,u){const h=a.getRenderTarget();for(let d=0;d<6;d++)a.setRenderTarget(this,d),a.clear(o,c,u);a.setRenderTarget(h)}}const E5=new te,gWe=new te,mWe=new Qa;class zg{constructor(a=new te(1,0,0),o=0){this.isPlane=!0,this.normal=a,this.constant=o}set(a,o){return this.normal.copy(a),this.constant=o,this}setComponents(a,o,c,u){return this.normal.set(a,o,c),this.constant=u,this}setFromNormalAndCoplanarPoint(a,o){return this.normal.copy(a),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(a,o,c){const u=E5.subVectors(c,o).cross(gWe.subVectors(a,o)).normalize();return this.setFromNormalAndCoplanarPoint(u,a),this}copy(a){return this.normal.copy(a.normal),this.constant=a.constant,this}normalize(){const a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,o){return o.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)}intersectLine(a,o){const c=a.delta(E5),u=this.normal.dot(c);if(0===u)return 0===this.distanceToPoint(a.start)?o.copy(a.start):null;const h=-(a.start.dot(this.normal)+this.constant)/u;return h<0||h>1?null:o.copy(c).multiplyScalar(h).add(a.start)}intersectsLine(a){const o=this.distanceToPoint(a.start),c=this.distanceToPoint(a.end);return o<0&&c>0||c<0&&o>0}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,o){const c=o||mWe.getNormalMatrix(a),u=this.coplanarPoint(E5).applyMatrix4(a),h=this.normal.applyMatrix3(c).normalize();return this.constant=-u.dot(h),this}translate(a){return this.constant-=a.dot(this.normal),this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const f_=new i_,PM=new te;class k5{constructor(a=new zg,o=new zg,c=new zg,u=new zg,h=new zg,d=new zg){this.planes=[a,o,c,u,h,d]}set(a,o,c,u,h,d){const f=this.planes;return f[0].copy(a),f[1].copy(o),f[2].copy(c),f[3].copy(u),f[4].copy(h),f[5].copy(d),this}copy(a){const o=this.planes;for(let c=0;c<6;c++)o[c].copy(a.planes[c]);return this}setFromProjectionMatrix(a){const o=this.planes,c=a.elements,u=c[0],h=c[1],d=c[2],f=c[3],p=c[4],g=c[5],m=c[6],v=c[7],_=c[8],y=c[9],b=c[10],x=c[11],C=c[12],w=c[13],S=c[14],D=c[15];return o[0].setComponents(f-u,v-p,x-_,D-C).normalize(),o[1].setComponents(f+u,v+p,x+_,D+C).normalize(),o[2].setComponents(f+h,v+g,x+y,D+w).normalize(),o[3].setComponents(f-h,v-g,x-y,D-w).normalize(),o[4].setComponents(f-d,v-m,x-b,D-S).normalize(),o[5].setComponents(f+d,v+m,x+b,D+S).normalize(),this}intersectsObject(a){const o=a.geometry;return null===o.boundingSphere&&o.computeBoundingSphere(),f_.copy(o.boundingSphere).applyMatrix4(a.matrixWorld),this.intersectsSphere(f_)}intersectsSprite(a){return f_.center.set(0,0,0),f_.radius=.7071067811865476,f_.applyMatrix4(a.matrixWorld),this.intersectsSphere(f_)}intersectsSphere(a){const o=this.planes,c=a.center,u=-a.radius;for(let h=0;h<6;h++)if(o[h].distanceToPoint(c)<u)return!1;return!0}intersectsBox(a){const o=this.planes;for(let c=0;c<6;c++){const u=o[c];if(PM.x=u.normal.x>0?a.max.x:a.min.x,PM.y=u.normal.y>0?a.max.y:a.min.y,PM.z=u.normal.z>0?a.max.z:a.min.z,u.distanceToPoint(PM)<0)return!1}return!0}containsPoint(a){const o=this.planes;for(let c=0;c<6;c++)if(o[c].distanceToPoint(a)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Uie(){let l=null,a=!1,o=null,c=null;function u(h,d){o(h,d),c=l.requestAnimationFrame(u)}return{start:function(){!0!==a&&null!==o&&(c=l.requestAnimationFrame(u),a=!0)},stop:function(){l.cancelAnimationFrame(c),a=!1},setAnimationLoop:function(h){o=h},setContext:function(h){l=h}}}function vWe(l,a){const o=a.isWebGL2,c=new WeakMap;return{get:function d(g){return g.isInterleavedBufferAttribute&&(g=g.data),c.get(g)},remove:function f(g){g.isInterleavedBufferAttribute&&(g=g.data);const m=c.get(g);m&&(l.deleteBuffer(m.buffer),c.delete(g))},update:function p(g,m){if(g.isGLBufferAttribute){const _=c.get(g);return void((!_||_.version<g.version)&&c.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version}))}g.isInterleavedBufferAttribute&&(g=g.data);const v=c.get(g);void 0===v?c.set(g,function u(g,m){const v=g.array,_=g.usage,y=l.createBuffer();let b;if(l.bindBuffer(m,y),l.bufferData(m,v,_),g.onUploadCallback(),v instanceof Float32Array)b=5126;else if(v instanceof Uint16Array)if(g.isFloat16BufferAttribute){if(!o)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");b=5131}else b=5123;else if(v instanceof Int16Array)b=5122;else if(v instanceof Uint32Array)b=5125;else if(v instanceof Int32Array)b=5124;else if(v instanceof Int8Array)b=5120;else if(v instanceof Uint8Array)b=5121;else{if(!(v instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+v);b=5121}return{buffer:y,type:b,bytesPerElement:v.BYTES_PER_ELEMENT,version:g.version}}(g,m)):v.version<g.version&&(function h(g,m,v){const _=m.array,y=m.updateRange;l.bindBuffer(v,g),-1===y.count?l.bufferSubData(v,0,_):(o?l.bufferSubData(v,y.offset*_.BYTES_PER_ELEMENT,_,y.offset,y.count):l.bufferSubData(v,y.offset*_.BYTES_PER_ELEMENT,_.subarray(y.offset,y.offset+y.count)),y.count=-1)}(v.buffer,g,m),v.version=g.version)}}}class p_ extends wi{constructor(a=1,o=1,c=1,u=1){super(),this.type="PlaneGeometry",this.parameters={width:a,height:o,widthSegments:c,heightSegments:u};const h=a/2,d=o/2,f=Math.floor(c),p=Math.floor(u),g=f+1,m=p+1,v=a/f,_=o/p,y=[],b=[],x=[],C=[];for(let w=0;w<m;w++){const S=w*_-d;for(let D=0;D<g;D++)b.push(D*v-h,-S,0),x.push(0,0,1),C.push(D/f),C.push(1-w/p)}for(let w=0;w<p;w++)for(let S=0;S<f;S++){const T=S+g*(w+1),A=S+1+g*(w+1),I=S+1+g*w;y.push(S+g*w,T,I),y.push(T,A,I)}this.setIndex(y),this.setAttribute("position",new Sn(b,3)),this.setAttribute("normal",new Sn(x,3)),this.setAttribute("uv",new Sn(C,2))}static fromJSON(a){return new p_(a.width,a.height,a.widthSegments,a.heightSegments)}}const zi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},nn={common:{diffuse:{value:new rn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qa},uv2Transform:{value:new Qa},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qa}},sprite:{diffuse:{value:new rn(16777215)},opacity:{value:1},center:{value:new ht(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qa}}},ah={basic:{uniforms:Zo([nn.common,nn.specularmap,nn.envmap,nn.aomap,nn.lightmap,nn.fog]),vertexShader:zi.meshbasic_vert,fragmentShader:zi.meshbasic_frag},lambert:{uniforms:Zo([nn.common,nn.specularmap,nn.envmap,nn.aomap,nn.lightmap,nn.emissivemap,nn.fog,nn.lights,{emissive:{value:new rn(0)}}]),vertexShader:zi.meshlambert_vert,fragmentShader:zi.meshlambert_frag},phong:{uniforms:Zo([nn.common,nn.specularmap,nn.envmap,nn.aomap,nn.lightmap,nn.emissivemap,nn.bumpmap,nn.normalmap,nn.displacementmap,nn.fog,nn.lights,{emissive:{value:new rn(0)},specular:{value:new rn(1118481)},shininess:{value:30}}]),vertexShader:zi.meshphong_vert,fragmentShader:zi.meshphong_frag},standard:{uniforms:Zo([nn.common,nn.envmap,nn.aomap,nn.lightmap,nn.emissivemap,nn.bumpmap,nn.normalmap,nn.displacementmap,nn.roughnessmap,nn.metalnessmap,nn.fog,nn.lights,{emissive:{value:new rn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zi.meshphysical_vert,fragmentShader:zi.meshphysical_frag},toon:{uniforms:Zo([nn.common,nn.aomap,nn.lightmap,nn.emissivemap,nn.bumpmap,nn.normalmap,nn.displacementmap,nn.gradientmap,nn.fog,nn.lights,{emissive:{value:new rn(0)}}]),vertexShader:zi.meshtoon_vert,fragmentShader:zi.meshtoon_frag},matcap:{uniforms:Zo([nn.common,nn.bumpmap,nn.normalmap,nn.displacementmap,nn.fog,{matcap:{value:null}}]),vertexShader:zi.meshmatcap_vert,fragmentShader:zi.meshmatcap_frag},points:{uniforms:Zo([nn.points,nn.fog]),vertexShader:zi.points_vert,fragmentShader:zi.points_frag},dashed:{uniforms:Zo([nn.common,nn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zi.linedashed_vert,fragmentShader:zi.linedashed_frag},depth:{uniforms:Zo([nn.common,nn.displacementmap]),vertexShader:zi.depth_vert,fragmentShader:zi.depth_frag},normal:{uniforms:Zo([nn.common,nn.bumpmap,nn.normalmap,nn.displacementmap,{opacity:{value:1}}]),vertexShader:zi.meshnormal_vert,fragmentShader:zi.meshnormal_frag},sprite:{uniforms:Zo([nn.sprite,nn.fog]),vertexShader:zi.sprite_vert,fragmentShader:zi.sprite_frag},background:{uniforms:{uvTransform:{value:new Qa},t2D:{value:null}},vertexShader:zi.background_vert,fragmentShader:zi.background_frag},cube:{uniforms:Zo([nn.envmap,{opacity:{value:1}}]),vertexShader:zi.cube_vert,fragmentShader:zi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zi.equirect_vert,fragmentShader:zi.equirect_frag},distanceRGBA:{uniforms:Zo([nn.common,nn.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zi.distanceRGBA_vert,fragmentShader:zi.distanceRGBA_frag},shadow:{uniforms:Zo([nn.lights,nn.fog,{color:{value:new rn(0)},opacity:{value:1}}]),vertexShader:zi.shadow_vert,fragmentShader:zi.shadow_frag}};function gje(l,a,o,c,u,h){const d=new rn(0);let p,g,f=!0===u?0:1,m=null,v=0,_=null;function b(x,C){o.buffers.color.setClear(x.r,x.g,x.b,C,h)}return{getClearColor:function(){return d},setClearColor:function(x,C=1){d.set(x),f=C,b(d,f)},getClearAlpha:function(){return f},setClearAlpha:function(x){f=x,b(d,f)},render:function y(x,C){let w=!1,S=!0===C.isScene?C.background:null;S&&S.isTexture&&(S=a.get(S));const D=l.xr,T=D.getSession&&D.getSession();T&&"additive"===T.environmentBlendMode&&(S=null),null===S?b(d,f):S&&S.isColor&&(b(S,1),w=!0),(l.autoClear||w)&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),S&&(S.isCubeTexture||306===S.mapping)?(void 0===g&&(g=new Wi(new _d(1,1,1),new Ko({name:"BackgroundCubeMaterial",uniforms:u_(ah.cube.uniforms),vertexShader:ah.cube.vertexShader,fragmentShader:ah.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(A,I,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),c.update(g)),g.material.uniforms.envMap.value=S,g.material.uniforms.flipEnvMap.value=S.isCubeTexture&&!1===S.isRenderTargetTexture?-1:1,(m!==S||v!==S.version||_!==l.toneMapping)&&(g.material.needsUpdate=!0,m=S,v=S.version,_=l.toneMapping),g.layers.enableAll(),x.unshift(g,g.geometry,g.material,0,0,null)):S&&S.isTexture&&(void 0===p&&(p=new Wi(new p_(2,2),new Ko({name:"BackgroundMaterial",uniforms:u_(ah.background.uniforms),vertexShader:ah.background.vertexShader,fragmentShader:ah.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update(p)),p.material.uniforms.t2D.value=S,!0===S.matrixAutoUpdate&&S.updateMatrix(),p.material.uniforms.uvTransform.value.copy(S.matrix),(m!==S||v!==S.version||_!==l.toneMapping)&&(p.material.needsUpdate=!0,m=S,v=S.version,_=l.toneMapping),p.layers.enableAll(),x.unshift(p,p.geometry,p.material,0,0,null))}}}function mje(l,a,o,c){const u=l.getParameter(34921),h=c.isWebGL2?null:a.get("OES_vertex_array_object"),d=c.isWebGL2||null!==h,f={},p=C(null);let g=p,m=!1;function y(L){return c.isWebGL2?l.bindVertexArray(L):h.bindVertexArrayOES(L)}function b(L){return c.isWebGL2?l.deleteVertexArray(L):h.deleteVertexArrayOES(L)}function C(L){const U=[],z=[],W=[];for(let H=0;H<u;H++)U[H]=0,z[H]=0,W[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:z,attributeDivisors:W,object:L,attributes:{},index:null}}function D(){const L=g.newAttributes;for(let U=0,z=L.length;U<z;U++)L[U]=0}function T(L){A(L,0)}function A(L,U){const W=g.enabledAttributes,H=g.attributeDivisors;g.newAttributes[L]=1,0===W[L]&&(l.enableVertexAttribArray(L),W[L]=1),H[L]!==U&&((c.isWebGL2?l:a.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,U),H[L]=U)}function I(){const L=g.newAttributes,U=g.enabledAttributes;for(let z=0,W=U.length;z<W;z++)U[z]!==L[z]&&(l.disableVertexAttribArray(z),U[z]=0)}function N(L,U,z,W,H,j){!0!==c.isWebGL2||5124!==z&&5125!==z?l.vertexAttribPointer(L,U,z,W,H,j):l.vertexAttribIPointer(L,U,z,H,j)}function $(){q(),m=!0,g!==p&&(g=p,y(g.object))}function q(){p.geometry=null,p.program=null,p.wireframe=!1}return{setup:function v(L,U,z,W,H){let j=!1;if(d){const G=function x(L,U,z){const W=!0===z.wireframe;let H=f[L.id];void 0===H&&(H={},f[L.id]=H);let j=H[U.id];void 0===j&&(j={},H[U.id]=j);let G=j[W];return void 0===G&&(G=C(function _(){return c.isWebGL2?l.createVertexArray():h.createVertexArrayOES()}()),j[W]=G),G}(W,z,U);g!==G&&(g=G,y(g.object)),j=function w(L,U,z,W){const H=g.attributes,j=U.attributes;let G=0;const K=z.getAttributes();for(const J in K)if(K[J].location>=0){const oe=H[J];let xe=j[J];if(void 0===xe&&("instanceMatrix"===J&&L.instanceMatrix&&(xe=L.instanceMatrix),"instanceColor"===J&&L.instanceColor&&(xe=L.instanceColor)),void 0===oe||oe.attribute!==xe||xe&&oe.data!==xe.data)return!0;G++}return g.attributesNum!==G||g.index!==W}(L,W,z,H),j&&function S(L,U,z,W){const H={},j=U.attributes;let G=0;const K=z.getAttributes();for(const J in K)if(K[J].location>=0){let oe=j[J];void 0===oe&&("instanceMatrix"===J&&L.instanceMatrix&&(oe=L.instanceMatrix),"instanceColor"===J&&L.instanceColor&&(oe=L.instanceColor));const xe={};xe.attribute=oe,oe&&oe.data&&(xe.data=oe.data),H[J]=xe,G++}g.attributes=H,g.attributesNum=G,g.index=W}(L,W,z,H)}else{const G=!0===U.wireframe;(g.geometry!==W.id||g.program!==z.id||g.wireframe!==G)&&(g.geometry=W.id,g.program=z.id,g.wireframe=G,j=!0)}null!==H&&o.update(H,34963),(j||m)&&(m=!1,function k(L,U,z,W){if(!1===c.isWebGL2&&(L.isInstancedMesh||W.isInstancedBufferGeometry)&&null===a.get("ANGLE_instanced_arrays"))return;D();const H=W.attributes,j=z.getAttributes(),G=U.defaultAttributeValues;for(const K in j){const J=j[K];if(J.location>=0){let ce=H[K];if(void 0===ce&&("instanceMatrix"===K&&L.instanceMatrix&&(ce=L.instanceMatrix),"instanceColor"===K&&L.instanceColor&&(ce=L.instanceColor)),void 0!==ce){const oe=ce.normalized,xe=ce.itemSize,ve=o.get(ce);if(void 0===ve)continue;const De=ve.buffer,We=ve.type,ke=ve.bytesPerElement;if(ce.isInterleavedBufferAttribute){const Pe=ce.data,Ze=Pe.stride,he=ce.offset;if(Pe.isInstancedInterleavedBuffer){for(let Fe=0;Fe<J.locationSize;Fe++)A(J.location+Fe,Pe.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===W._maxInstanceCount&&(W._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let Fe=0;Fe<J.locationSize;Fe++)T(J.location+Fe);l.bindBuffer(34962,De);for(let Fe=0;Fe<J.locationSize;Fe++)N(J.location+Fe,xe/J.locationSize,We,oe,Ze*ke,(he+xe/J.locationSize*Fe)*ke)}else{if(ce.isInstancedBufferAttribute){for(let Pe=0;Pe<J.locationSize;Pe++)A(J.location+Pe,ce.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===W._maxInstanceCount&&(W._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Pe=0;Pe<J.locationSize;Pe++)T(J.location+Pe);l.bindBuffer(34962,De);for(let Pe=0;Pe<J.locationSize;Pe++)N(J.location+Pe,xe/J.locationSize,We,oe,xe*ke,xe/J.locationSize*Pe*ke)}}else if(void 0!==G){const oe=G[K];if(void 0!==oe)switch(oe.length){case 2:l.vertexAttrib2fv(J.location,oe);break;case 3:l.vertexAttrib3fv(J.location,oe);break;case 4:l.vertexAttrib4fv(J.location,oe);break;default:l.vertexAttrib1fv(J.location,oe)}}}}I()}(L,U,z,W),null!==H&&l.bindBuffer(34963,o.get(H).buffer))},reset:$,resetDefaultState:q,dispose:function F(){$();for(const L in f){const U=f[L];for(const z in U){const W=U[z];for(const H in W)b(W[H].object),delete W[H];delete U[z]}delete f[L]}},releaseStatesOfGeometry:function B(L){if(void 0===f[L.id])return;const U=f[L.id];for(const z in U){const W=U[z];for(const H in W)b(W[H].object),delete W[H];delete U[z]}delete f[L.id]},releaseStatesOfProgram:function V(L){for(const U in f){const z=f[U];if(void 0===z[L.id])continue;const W=z[L.id];for(const H in W)b(W[H].object),delete W[H];delete z[L.id]}},initAttributes:D,enableAttribute:T,disableUnusedAttributes:I}}function vje(l,a,o,c){const u=c.isWebGL2;let h;this.setMode=function d(g){h=g},this.render=function f(g,m){l.drawArrays(h,g,m),o.update(m,h,1)},this.renderInstances=function p(g,m,v){if(0===v)return;let _,y;if(u)_=l,y="drawArraysInstanced";else if(_=a.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",null===_)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[y](h,g,m,v),o.update(m,h,v)}}function _je(l,a,o){let c;function h(N){if("highp"===N){if(l.getShaderPrecisionFormat(35633,36338).precision>0&&l.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";N="mediump"}return"mediump"===N&&l.getShaderPrecisionFormat(35633,36337).precision>0&&l.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const d="undefined"!=typeof WebGL2RenderingContext&&l instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&l instanceof WebGL2ComputeRenderingContext;let f=void 0!==o.precision?o.precision:"highp";const p=h(f);p!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);const g=d||a.has("WEBGL_draw_buffers"),m=!0===o.logarithmicDepthBuffer,v=l.getParameter(34930),_=l.getParameter(35660),y=l.getParameter(3379),b=l.getParameter(34076),x=l.getParameter(34921),C=l.getParameter(36347),w=l.getParameter(36348),S=l.getParameter(36349),D=_>0,T=d||a.has("OES_texture_float");return{isWebGL2:d,drawBuffers:g,getMaxAnisotropy:function u(){if(void 0!==c)return c;if(!0===a.has("EXT_texture_filter_anisotropic")){const N=a.get("EXT_texture_filter_anisotropic");c=l.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else c=0;return c},getMaxPrecision:h,precision:f,logarithmicDepthBuffer:m,maxTextures:v,maxVertexTextures:_,maxTextureSize:y,maxCubemapSize:b,maxAttributes:x,maxVertexUniforms:C,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:D,floatFragmentTextures:T,floatVertexTextures:D&&T,maxSamples:d?l.getParameter(36183):0}}function yje(l){const a=this;let o=null,c=0,u=!1,h=!1;const d=new zg,f=new Qa,p={value:null,needsUpdate:!1};function g(){p.value!==o&&(p.value=o,p.needsUpdate=c>0),a.numPlanes=c,a.numIntersection=0}function m(v,_,y,b){const x=null!==v?v.length:0;let C=null;if(0!==x){if(C=p.value,!0!==b||null===C){const w=y+4*x,S=_.matrixWorldInverse;f.getNormalMatrix(S),(null===C||C.length<w)&&(C=new Float32Array(w));for(let D=0,T=y;D!==x;++D,T+=4)d.copy(v[D]).applyMatrix4(S,f),d.normal.toArray(C,T),C[T+3]=d.constant}p.value=C,p.needsUpdate=!0}return a.numPlanes=x,a.numIntersection=0,C}this.uniform=p,this.numPlanes=0,this.numIntersection=0,this.init=function(v,_,y){const b=0!==v.length||_||0!==c||u;return u=_,o=m(v,y,0),c=v.length,b},this.beginShadows=function(){h=!0,m(null)},this.endShadows=function(){h=!1,g()},this.setState=function(v,_,y){const b=v.clippingPlanes,x=v.clipIntersection,C=v.clipShadows,w=l.get(v);if(!u||null===b||0===b.length||h&&!C)h?m(null):g();else{const S=h?0:c,D=4*S;let T=w.clippingState||null;p.value=T,T=m(b,_,D,y);for(let A=0;A!==D;++A)T[A]=o[A];w.clippingState=T,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=S}}}function bje(l){let a=new WeakMap;function o(d,f){return 303===f?d.mapping=301:304===f&&(d.mapping=302),d}function u(d){const f=d.target;f.removeEventListener("dispose",u);const p=a.get(f);void 0!==p&&(a.delete(f),p.dispose())}return{get:function c(d){if(d&&d.isTexture&&!1===d.isRenderTargetTexture){const f=d.mapping;if(303===f||304===f){if(a.has(d))return o(a.get(d).texture,d.mapping);{const p=d.image;if(p&&p.height>0){const g=new pWe(p.height/2);return g.fromEquirectangularTexture(l,d),a.set(d,g),d.addEventListener("dispose",u),o(g.texture,d.mapping)}return null}}}return d},dispose:function h(){a=new WeakMap}}}ah.physical={uniforms:Zo([ah.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ht(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new rn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new rn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new rn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:zi.meshphysical_vert,fragmentShader:zi.meshphysical_frag};class AC extends M5{constructor(a=-1,o=1,c=1,u=-1,h=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=o,this.top=c,this.bottom=u,this.near=h,this.far=d,this.updateProjectionMatrix()}copy(a,o){return super.copy(a,o),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this}setViewOffset(a,o,c,u,h,d){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=u,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,u=(this.top+this.bottom)/2;let h=c-a,d=c+a,f=u+o,p=u-o;if(null!==this.view&&this.view.enabled){const g=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=g*this.view.offsetX,d=h+g*this.view.width,f-=m*this.view.offsetY,p=f-m*this.view.height}this.projectionMatrix.makeOrthographic(h,d,f,p,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const o=super.toJSON(a);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}const Hie=[.125,.215,.35,.446,.526,.582],A5=new AC,Wie=new rn;let I5=null;const Hg=(1+Math.sqrt(5))/2,m_=1/Hg,Gie=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,Hg,m_),new te(0,Hg,-m_),new te(m_,0,Hg),new te(-m_,0,Hg),new te(Hg,m_,0),new te(-Hg,m_,0)];class jie{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(a,o=0,c=.1,u=100){I5=this._renderer.getRenderTarget(),this._setSize(256);const h=this._allocateTargets();return h.depthBuffer=!0,this._sceneToCubeUV(a,c,u,h),o>0&&this._blur(h,0,0,o),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(a,o=null){return this._fromTexture(a,o)}fromCubemap(a,o=null){return this._fromTexture(a,o)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Yie(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=qie(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(I5),a.scissorTest=!1,OM(a,0,0,a.width,a.height)}_fromTexture(a,o){this._setSize(301===a.mapping||302===a.mapping?0===a.image.length?16:a.image[0].width||a.image[0].image.width:a.image.width/4),I5=this._renderer.getRenderTarget();const c=o||this._allocateTargets();return this._textureToCubeUV(a,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(){const a=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,c={magFilter:Us,minFilter:Us,generateMipmaps:!1,type:wC,format:ou,encoding:Pg,depthBuffer:!1},u=$ie(a,o,c);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==a){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=$ie(a,o,c);const{_lodMax:h}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Cje(l){const a=[],o=[],c=[];let u=l;const h=l-4+1+Hie.length;for(let d=0;d<h;d++){const f=Math.pow(2,u);o.push(f);let p=1/f;d>l-4?p=Hie[d-l+4-1]:0===d&&(p=0),c.push(p);const g=1/(f-2),m=-g,v=1+g,_=[m,m,v,m,v,v,m,m,v,v,m,v],y=6,b=6,x=3,C=2,w=1,S=new Float32Array(x*b*y),D=new Float32Array(C*b*y),T=new Float32Array(w*b*y);for(let I=0;I<y;I++){const N=I%3*2/3-1,k=I>2?0:-1;S.set([N,k,0,N+2/3,k,0,N+2/3,k+1,0,N,k,0,N+2/3,k+1,0,N,k+1,0],x*b*I),D.set(_,C*b*I),T.set([I,I,I,I,I,I],w*b*I)}const A=new wi;A.setAttribute("position",new rs(S,x)),A.setAttribute("uv",new rs(D,C)),A.setAttribute("faceIndex",new rs(T,w)),a.push(A),u>4&&u--}return{lodPlanes:a,sizeLods:o,sigmas:c}}(h)),this._blurMaterial=function xje(l,a,o){const c=new Float32Array(20),u=new te(0,1,0);return new Ko({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/o,CUBEUV_MAX_MIP:`${l}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:c},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:u}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(h,a,o)}return u}_compileMaterial(a){const o=new Wi(this._lodPlanes[0],a);this._renderer.compile(o,A5)}_sceneToCubeUV(a,o,c,u){const f=new Ws(90,1,o,c),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],m=this._renderer,v=m.autoClear,_=m.toneMapping;m.getClearColor(Wie),m.toneMapping=0,m.autoClear=!1;const y=new Es({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),b=new Wi(new _d,y);let x=!1;const C=a.background;C?C.isColor&&(y.color.copy(C),a.background=null,x=!0):(y.color.copy(Wie),x=!0);for(let w=0;w<6;w++){const S=w%3;0===S?(f.up.set(0,p[w],0),f.lookAt(g[w],0,0)):1===S?(f.up.set(0,0,p[w]),f.lookAt(0,g[w],0)):(f.up.set(0,p[w],0),f.lookAt(0,0,g[w]));const D=this._cubeSize;OM(u,S*D,w>2?D:0,D,D),m.setRenderTarget(u),x&&m.render(b,f),m.render(a,f)}b.geometry.dispose(),b.material.dispose(),m.toneMapping=_,m.autoClear=v,a.background=C}_textureToCubeUV(a,o){const c=this._renderer,u=301===a.mapping||302===a.mapping;u?(null===this._cubemapMaterial&&(this._cubemapMaterial=Yie()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===a.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=qie());const h=u?this._cubemapMaterial:this._equirectMaterial,d=new Wi(this._lodPlanes[0],h);h.uniforms.envMap.value=a;const p=this._cubeSize;OM(o,0,0,3*p,2*p),c.setRenderTarget(o),c.render(d,A5)}_applyPMREM(a){const o=this._renderer,c=o.autoClear;o.autoClear=!1;for(let u=1;u<this._lodPlanes.length;u++){const h=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(a,u-1,u,h,Gie[(u-1)%Gie.length])}o.autoClear=c}_blur(a,o,c,u,h){const d=this._pingPongRenderTarget;this._halfBlur(a,d,o,c,u,"latitudinal",h),this._halfBlur(d,a,c,c,u,"longitudinal",h)}_halfBlur(a,o,c,u,h,d,f){const p=this._renderer,g=this._blurMaterial;"latitudinal"!==d&&"longitudinal"!==d&&console.error("blur direction must be either latitudinal or longitudinal!");const v=new Wi(this._lodPlanes[u],g),_=g.uniforms,y=this._sizeLods[c]-1,b=isFinite(h)?Math.PI/(2*y):2*Math.PI/39,x=h/b,C=isFinite(h)?1+Math.floor(3*x):20;C>20&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${C} samples when the maximum is set to 20`);const w=[];let S=0;for(let N=0;N<20;++N){const k=N/x,F=Math.exp(-k*k/2);w.push(F),0===N?S+=F:N<C&&(S+=2*F)}for(let N=0;N<w.length;N++)w[N]=w[N]/S;_.envMap.value=a.texture,_.samples.value=C,_.weights.value=w,_.latitudinal.value="latitudinal"===d,f&&(_.poleAxis.value=f);const{_lodMax:D}=this;_.dTheta.value=b,_.mipInt.value=D-c;const T=this._sizeLods[u];OM(o,3*T*(u>D-4?u-D+4:0),4*(this._cubeSize-T),3*T,2*T),p.setRenderTarget(o),p.render(v,A5)}}function $ie(l,a,o){const c=new Ma(l,a,o);return c.texture.mapping=306,c.texture.name="PMREM.cubeUv",c.scissorTest=!0,c}function OM(l,a,o,c,u){l.viewport.set(a,o,c,u),l.scissor.set(a,o,c,u)}function qie(){return new Ko({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Yie(){return new Ko({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function wje(l){let a=new WeakMap,o=null;function h(f){const p=f.target;p.removeEventListener("dispose",h);const g=a.get(p);void 0!==g&&(a.delete(p),g.dispose())}return{get:function c(f){if(f&&f.isTexture){const p=f.mapping,g=303===p||304===p,m=301===p||302===p;if(g||m){if(f.isRenderTargetTexture&&!0===f.needsPMREMUpdate){f.needsPMREMUpdate=!1;let v=a.get(f);return null===o&&(o=new jie(l)),v=g?o.fromEquirectangular(f,v):o.fromCubemap(f,v),a.set(f,v),v.texture}if(a.has(f))return a.get(f).texture;{const v=f.image;if(g&&v&&v.height>0||m&&v&&function u(f){let p=0;for(let m=0;m<6;m++)void 0!==f[m]&&p++;return 6===p}(v)){null===o&&(o=new jie(l));const _=g?o.fromEquirectangular(f):o.fromCubemap(f);return a.set(f,_),f.addEventListener("dispose",h),_.texture}return null}}}return f},dispose:function d(){a=new WeakMap,null!==o&&(o.dispose(),o=null)}}}function Sje(l){const a={};function o(c){if(void 0!==a[c])return a[c];let u;switch(c){case"WEBGL_depth_texture":u=l.getExtension("WEBGL_depth_texture")||l.getExtension("MOZ_WEBGL_depth_texture")||l.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":u=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":u=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":u=l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:u=l.getExtension(c)}return a[c]=u,u}return{has:function(c){return null!==o(c)},init:function(c){c.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(c){const u=o(c);return null===u&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),u}}}function Tje(l,a,o,c){const u={},h=new WeakMap;function d(v){const _=v.target;null!==_.index&&a.remove(_.index);for(const b in _.attributes)a.remove(_.attributes[b]);_.removeEventListener("dispose",d),delete u[_.id];const y=h.get(_);y&&(a.remove(y),h.delete(_)),c.releaseStatesOfGeometry(_),!0===_.isInstancedBufferGeometry&&delete _._maxInstanceCount,o.memory.geometries--}function g(v){const _=[],y=v.index,b=v.attributes.position;let x=0;if(null!==y){const S=y.array;x=y.version;for(let D=0,T=S.length;D<T;D+=3){const A=S[D+0],I=S[D+1],N=S[D+2];_.push(A,I,I,N,N,A)}}else{x=b.version;for(let D=0,T=b.array.length/3-1;D<T;D+=3){const A=D+0,I=D+1,N=D+2;_.push(A,I,I,N,N,A)}}const C=new(Sie(_)?Vie:Bie)(_,1);C.version=x;const w=h.get(v);w&&a.remove(w),h.set(v,C)}return{get:function f(v,_){return!0===u[_.id]||(_.addEventListener("dispose",d),u[_.id]=!0,o.memory.geometries++),_},update:function p(v){const _=v.attributes;for(const b in _)a.update(_[b],34962);const y=v.morphAttributes;for(const b in y){const x=y[b];for(let C=0,w=x.length;C<w;C++)a.update(x[C],34962)}},getWireframeAttribute:function m(v){const _=h.get(v);if(_){const y=v.index;null!==y&&_.version<y.version&&g(v)}else g(v);return h.get(v)}}}function Dje(l,a,o,c){const u=c.isWebGL2;let h,f,p;this.setMode=function d(_){h=_},this.setIndex=function g(_){f=_.type,p=_.bytesPerElement},this.render=function m(_,y){l.drawElements(h,y,f,_*p),o.update(y,h,1)},this.renderInstances=function v(_,y,b){if(0===b)return;let x,C;if(u)x=l,C="drawElementsInstanced";else if(x=a.get("ANGLE_instanced_arrays"),C="drawElementsInstancedANGLE",null===x)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");x[C](h,y,f,_*p,b),o.update(y,h,b)}}function Mje(l){const o={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:o,programs:null,autoReset:!0,reset:function u(){o.frame++,o.calls=0,o.triangles=0,o.points=0,o.lines=0},update:function c(h,d,f){switch(o.calls++,d){case 4:o.triangles+=f*(h/3);break;case 1:o.lines+=f*(h/2);break;case 3:o.lines+=f*(h-1);break;case 2:o.lines+=f*h;break;case 0:o.points+=f*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}function Eje(l,a){return l[0]-a[0]}function kje(l,a){return Math.abs(a[1])-Math.abs(l[1])}function O5(l,a){let o=1;const c=a.isInterleavedBufferAttribute?a.data.array:a.array;c instanceof Int8Array?o=127:c instanceof Uint8Array?o=255:c instanceof Uint16Array?o=65535:c instanceof Int16Array?o=32767:c instanceof Int32Array?o=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",c),l.divideScalar(o)}function Aje(l,a,o){const c={},u=new Float32Array(8),h=new WeakMap,d=new ji,f=[];for(let g=0;g<8;g++)f[g]=[g,0];return{update:function p(g,m,v,_){const y=g.morphTargetInfluences;if(!0===a.isWebGL2){const b=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,x=void 0!==b?b.length:0;let C=h.get(m);if(void 0===C||C.count!==x){let U=function(){q.dispose(),h.delete(m),m.removeEventListener("dispose",U)};void 0!==C&&C.texture.dispose();const D=void 0!==m.morphAttributes.position,T=void 0!==m.morphAttributes.normal,A=void 0!==m.morphAttributes.color,I=m.morphAttributes.position||[],N=m.morphAttributes.normal||[],k=m.morphAttributes.color||[];let F=0;!0===D&&(F=1),!0===T&&(F=2),!0===A&&(F=3);let B=m.attributes.position.count*F,V=1;B>a.maxTextureSize&&(V=Math.ceil(B/a.maxTextureSize),B=a.maxTextureSize);const $=new Float32Array(B*V*4*x),q=new l5($,B,V,x);q.type=Lf,q.needsUpdate=!0;const L=4*F;for(let z=0;z<x;z++){const W=I[z],H=N[z],j=k[z],G=B*V*4*z;for(let K=0;K<W.count;K++){const J=K*L;!0===D&&(d.fromBufferAttribute(W,K),!0===W.normalized&&O5(d,W),$[G+J+0]=d.x,$[G+J+1]=d.y,$[G+J+2]=d.z,$[G+J+3]=0),!0===T&&(d.fromBufferAttribute(H,K),!0===H.normalized&&O5(d,H),$[G+J+4]=d.x,$[G+J+5]=d.y,$[G+J+6]=d.z,$[G+J+7]=0),!0===A&&(d.fromBufferAttribute(j,K),!0===j.normalized&&O5(d,j),$[G+J+8]=d.x,$[G+J+9]=d.y,$[G+J+10]=d.z,$[G+J+11]=4===j.itemSize?d.w:1)}}C={count:x,texture:q,size:new ht(B,V)},h.set(m,C),m.addEventListener("dispose",U)}let w=0;for(let D=0;D<y.length;D++)w+=y[D];const S=m.morphTargetsRelative?1:1-w;_.getUniforms().setValue(l,"morphTargetBaseInfluence",S),_.getUniforms().setValue(l,"morphTargetInfluences",y),_.getUniforms().setValue(l,"morphTargetsTexture",C.texture,o),_.getUniforms().setValue(l,"morphTargetsTextureSize",C.size)}else{const b=void 0===y?0:y.length;let x=c[m.id];if(void 0===x||x.length!==b){x=[];for(let T=0;T<b;T++)x[T]=[T,0];c[m.id]=x}for(let T=0;T<b;T++){const A=x[T];A[0]=T,A[1]=y[T]}x.sort(kje);for(let T=0;T<8;T++)T<b&&x[T][1]?(f[T][0]=x[T][0],f[T][1]=x[T][1]):(f[T][0]=Number.MAX_SAFE_INTEGER,f[T][1]=0);f.sort(Eje);const C=m.morphAttributes.position,w=m.morphAttributes.normal;let S=0;for(let T=0;T<8;T++){const A=f[T],I=A[0],N=A[1];I!==Number.MAX_SAFE_INTEGER&&N?(C&&m.getAttribute("morphTarget"+T)!==C[I]&&m.setAttribute("morphTarget"+T,C[I]),w&&m.getAttribute("morphNormal"+T)!==w[I]&&m.setAttribute("morphNormal"+T,w[I]),u[T]=N,S+=N):(C&&!0===m.hasAttribute("morphTarget"+T)&&m.deleteAttribute("morphTarget"+T),w&&!0===m.hasAttribute("morphNormal"+T)&&m.deleteAttribute("morphNormal"+T),u[T]=0)}const D=m.morphTargetsRelative?1:1-S;_.getUniforms().setValue(l,"morphTargetBaseInfluence",D),_.getUniforms().setValue(l,"morphTargetInfluences",u)}}}}function Ije(l,a,o,c){let u=new WeakMap;function f(p){const g=p.target;g.removeEventListener("dispose",f),o.remove(g.instanceMatrix),null!==g.instanceColor&&o.remove(g.instanceColor)}return{update:function h(p){const g=c.render.frame,v=a.get(p,p.geometry);return u.get(v)!==g&&(a.update(v),u.set(v,g)),p.isInstancedMesh&&(!1===p.hasEventListener("dispose",f)&&p.addEventListener("dispose",f),o.update(p.instanceMatrix,34962),null!==p.instanceColor&&o.update(p.instanceColor,34962)),v},dispose:function d(){u=new WeakMap}}}const Xie=new oh,Zie=new l5,Kie=new Mie,Qie=new IM,Jie=[],ere=[],tre=new Float32Array(16),nre=new Float32Array(9),ire=new Float32Array(4);function v_(l,a,o){const c=l[0];if(c<=0||c>0)return l;const u=a*o;let h=Jie[u];if(void 0===h&&(h=new Float32Array(u),Jie[u]=h),0!==a){c.toArray(h,0);for(let d=1,f=0;d!==a;++d)f+=o,l[d].toArray(h,f)}return h}function Ea(l,a){if(l.length!==a.length)return!1;for(let o=0,c=l.length;o<c;o++)if(l[o]!==a[o])return!1;return!0}function ka(l,a){for(let o=0,c=a.length;o<c;o++)l[o]=a[o]}function FM(l,a){let o=ere[a];void 0===o&&(o=new Int32Array(a),ere[a]=o);for(let c=0;c!==a;++c)o[c]=l.allocateTextureUnit();return o}function Pje(l,a){const o=this.cache;o[0]!==a&&(l.uniform1f(this.addr,a),o[0]=a)}function Oje(l,a){const o=this.cache;if(void 0!==a.x)(o[0]!==a.x||o[1]!==a.y)&&(l.uniform2f(this.addr,a.x,a.y),o[0]=a.x,o[1]=a.y);else{if(Ea(o,a))return;l.uniform2fv(this.addr,a),ka(o,a)}}function Fje(l,a){const o=this.cache;if(void 0!==a.x)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z)&&(l.uniform3f(this.addr,a.x,a.y,a.z),o[0]=a.x,o[1]=a.y,o[2]=a.z);else if(void 0!==a.r)(o[0]!==a.r||o[1]!==a.g||o[2]!==a.b)&&(l.uniform3f(this.addr,a.r,a.g,a.b),o[0]=a.r,o[1]=a.g,o[2]=a.b);else{if(Ea(o,a))return;l.uniform3fv(this.addr,a),ka(o,a)}}function Rje(l,a){const o=this.cache;if(void 0!==a.x)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z||o[3]!==a.w)&&(l.uniform4f(this.addr,a.x,a.y,a.z,a.w),o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=a.w);else{if(Ea(o,a))return;l.uniform4fv(this.addr,a),ka(o,a)}}function Nje(l,a){const o=this.cache,c=a.elements;if(void 0===c){if(Ea(o,a))return;l.uniformMatrix2fv(this.addr,!1,a),ka(o,a)}else{if(Ea(o,c))return;ire.set(c),l.uniformMatrix2fv(this.addr,!1,ire),ka(o,c)}}function Lje(l,a){const o=this.cache,c=a.elements;if(void 0===c){if(Ea(o,a))return;l.uniformMatrix3fv(this.addr,!1,a),ka(o,a)}else{if(Ea(o,c))return;nre.set(c),l.uniformMatrix3fv(this.addr,!1,nre),ka(o,c)}}function Bje(l,a){const o=this.cache,c=a.elements;if(void 0===c){if(Ea(o,a))return;l.uniformMatrix4fv(this.addr,!1,a),ka(o,a)}else{if(Ea(o,c))return;tre.set(c),l.uniformMatrix4fv(this.addr,!1,tre),ka(o,c)}}function Vje(l,a){const o=this.cache;o[0]!==a&&(l.uniform1i(this.addr,a),o[0]=a)}function zje(l,a){const o=this.cache;Ea(o,a)||(l.uniform2iv(this.addr,a),ka(o,a))}function Uje(l,a){const o=this.cache;Ea(o,a)||(l.uniform3iv(this.addr,a),ka(o,a))}function Hje(l,a){const o=this.cache;Ea(o,a)||(l.uniform4iv(this.addr,a),ka(o,a))}function Wje(l,a){const o=this.cache;o[0]!==a&&(l.uniform1ui(this.addr,a),o[0]=a)}function Gje(l,a){const o=this.cache;Ea(o,a)||(l.uniform2uiv(this.addr,a),ka(o,a))}function jje(l,a){const o=this.cache;Ea(o,a)||(l.uniform3uiv(this.addr,a),ka(o,a))}function $je(l,a){const o=this.cache;Ea(o,a)||(l.uniform4uiv(this.addr,a),ka(o,a))}function qje(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.setTexture2D(a||Xie,u)}function Yje(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.setTexture3D(a||Kie,u)}function Xje(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.setTextureCube(a||Qie,u)}function Zje(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.setTexture2DArray(a||Zie,u)}function Qje(l,a){l.uniform1fv(this.addr,a)}function Jje(l,a){const o=v_(a,this.size,2);l.uniform2fv(this.addr,o)}function e$e(l,a){const o=v_(a,this.size,3);l.uniform3fv(this.addr,o)}function t$e(l,a){const o=v_(a,this.size,4);l.uniform4fv(this.addr,o)}function n$e(l,a){const o=v_(a,this.size,4);l.uniformMatrix2fv(this.addr,!1,o)}function i$e(l,a){const o=v_(a,this.size,9);l.uniformMatrix3fv(this.addr,!1,o)}function r$e(l,a){const o=v_(a,this.size,16);l.uniformMatrix4fv(this.addr,!1,o)}function s$e(l,a){l.uniform1iv(this.addr,a)}function o$e(l,a){l.uniform2iv(this.addr,a)}function a$e(l,a){l.uniform3iv(this.addr,a)}function l$e(l,a){l.uniform4iv(this.addr,a)}function c$e(l,a){l.uniform1uiv(this.addr,a)}function u$e(l,a){l.uniform2uiv(this.addr,a)}function h$e(l,a){l.uniform3uiv(this.addr,a)}function d$e(l,a){l.uniform4uiv(this.addr,a)}function f$e(l,a,o){const c=a.length,u=FM(o,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)o.setTexture2D(a[h]||Xie,u[h])}function p$e(l,a,o){const c=a.length,u=FM(o,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)o.setTexture3D(a[h]||Kie,u[h])}function g$e(l,a,o){const c=a.length,u=FM(o,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)o.setTextureCube(a[h]||Qie,u[h])}function m$e(l,a,o){const c=a.length,u=FM(o,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)o.setTexture2DArray(a[h]||Zie,u[h])}class _$e{constructor(a,o,c){this.id=a,this.addr=c,this.cache=[],this.setValue=function Kje(l){switch(l){case 5126:return Pje;case 35664:return Oje;case 35665:return Fje;case 35666:return Rje;case 35674:return Nje;case 35675:return Lje;case 35676:return Bje;case 5124:case 35670:return Vje;case 35667:case 35671:return zje;case 35668:case 35672:return Uje;case 35669:case 35673:return Hje;case 5125:return Wje;case 36294:return Gje;case 36295:return jje;case 36296:return $je;case 35678:case 36198:case 36298:case 36306:case 35682:return qje;case 35679:case 36299:case 36307:return Yje;case 35680:case 36300:case 36308:case 36293:return Xje;case 36289:case 36303:case 36311:case 36292:return Zje}}(o.type)}}class y$e{constructor(a,o,c){this.id=a,this.addr=c,this.cache=[],this.size=o.size,this.setValue=function v$e(l){switch(l){case 5126:return Qje;case 35664:return Jje;case 35665:return e$e;case 35666:return t$e;case 35674:return n$e;case 35675:return i$e;case 35676:return r$e;case 5124:case 35670:return s$e;case 35667:case 35671:return o$e;case 35668:case 35672:return a$e;case 35669:case 35673:return l$e;case 5125:return c$e;case 36294:return u$e;case 36295:return h$e;case 36296:return d$e;case 35678:case 36198:case 36298:case 36306:case 35682:return f$e;case 35679:case 36299:case 36307:return p$e;case 35680:case 36300:case 36308:case 36293:return g$e;case 36289:case 36303:case 36311:case 36292:return m$e}}(o.type)}}class b$e{constructor(a){this.id=a,this.seq=[],this.map={}}setValue(a,o,c){const u=this.seq;for(let h=0,d=u.length;h!==d;++h){const f=u[h];f.setValue(a,o[f.id],c)}}}const F5=/(\w+)(\])?(\[|\.)?/g;function rre(l,a){l.seq.push(a),l.map[a.id]=a}function C$e(l,a,o){const c=l.name,u=c.length;for(F5.lastIndex=0;;){const h=F5.exec(c),d=F5.lastIndex;let f=h[1];const g=h[3];if("]"===h[2]&&(f|=0),void 0===g||"["===g&&d+2===u){rre(o,void 0===g?new _$e(f,l,a):new y$e(f,l,a));break}{let v=o.map[f];void 0===v&&(v=new b$e(f),rre(o,v)),o=v}}}class RM{constructor(a,o){this.seq=[],this.map={};const c=a.getProgramParameter(o,35718);for(let u=0;u<c;++u){const h=a.getActiveUniform(o,u);C$e(h,a.getUniformLocation(o,h.name),this)}}setValue(a,o,c,u){const h=this.map[o];void 0!==h&&h.setValue(a,c,u)}setOptional(a,o,c){const u=o[c];void 0!==u&&this.setValue(a,c,u)}static upload(a,o,c,u){for(let h=0,d=o.length;h!==d;++h){const f=o[h],p=c[f.id];!1!==p.needsUpdate&&f.setValue(a,p.value,u)}}static seqWithValue(a,o){const c=[];for(let u=0,h=a.length;u!==h;++u){const d=a[u];d.id in o&&c.push(d)}return c}}function sre(l,a,o){const c=l.createShader(a);return l.shaderSource(c,o),l.compileShader(c),c}let x$e=0;function ore(l,a,o){const c=l.getShaderParameter(a,35713),u=l.getShaderInfoLog(a).trim();if(c&&""===u)return"";const h=/ERROR: 0:(\d+)/.exec(u);if(h){const d=parseInt(h[1]);return o.toUpperCase()+"\n\n"+u+"\n\n"+function w$e(l,a){const o=l.split("\n"),c=[],u=Math.max(a-6,0),h=Math.min(a+6,o.length);for(let d=u;d<h;d++){const f=d+1;c.push(`${f===a?">":" "} ${f}: ${o[d]}`)}return c.join("\n")}(l.getShaderSource(a),d)}return u}function T$e(l,a){const o=function S$e(l){switch(l){case Pg:return["Linear","( value )"];case is:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",l),["Linear","( value )"]}}(a);return"vec4 "+l+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function D$e(l,a){let o;switch(a){case 1:o="Linear";break;case 2:o="Reinhard";break;case 3:o="OptimizedCineon";break;case 4:o="ACESFilmic";break;case 5:o="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),o="Linear"}return"vec3 "+l+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function IC(l){return""!==l}function are(l,a){return l.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function lre(l,a){return l.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}const A$e=/^[ \t]*#include +<([\w\d./]+)>/gm;function R5(l){return l.replace(A$e,I$e)}function I$e(l,a){const o=zi[a];if(void 0===o)throw new Error("Can not resolve #include <"+a+">");return R5(o)}const P$e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,O$e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cre(l){return l.replace(O$e,ure).replace(P$e,F$e)}function F$e(l,a,o,c){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ure(0,a,o,c)}function ure(l,a,o,c){let u="";for(let h=parseInt(a);h<parseInt(o);h++)u+=c.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return u}function hre(l){let a="precision "+l.precision+" float;\nprecision "+l.precision+" int;";return"highp"===l.precision?a+="\n#define HIGH_PRECISION":"mediump"===l.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===l.precision&&(a+="\n#define LOW_PRECISION"),a}function z$e(l,a,o,c){const u=l.getContext(),h=o.defines;let d=o.vertexShader,f=o.fragmentShader;const p=function R$e(l){let a="SHADOWMAP_TYPE_BASIC";return 1===l.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===l.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===l.shadowMapType&&(a="SHADOWMAP_TYPE_VSM"),a}(o),g=function N$e(l){let a="ENVMAP_TYPE_CUBE";if(l.envMap)switch(l.envMapMode){case 301:case 302:a="ENVMAP_TYPE_CUBE";break;case 306:a="ENVMAP_TYPE_CUBE_UV"}return a}(o),m=function L$e(l){let a="ENVMAP_MODE_REFLECTION";return l.envMap&&302===l.envMapMode&&(a="ENVMAP_MODE_REFRACTION"),a}(o),v=function B$e(l){let a="ENVMAP_BLENDING_NONE";if(l.envMap)switch(l.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}(o),_=function V$e(l){const a=l.envMapCubeUVHeight;if(null===a)return null;const o=Math.log2(a)-2,c=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,o),112)),texelHeight:c,maxMip:o}}(o),y=o.isWebGL2?"":function M$e(l){return[l.extensionDerivatives||l.envMapCubeUVHeight||l.bumpMap||l.tangentSpaceNormalMap||l.clearcoatNormalMap||l.flatShading||"physical"===l.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(l.extensionFragDepth||l.logarithmicDepthBuffer)&&l.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",l.extensionDrawBuffers&&l.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(l.extensionShaderTextureLOD||l.envMap||l.transmission)&&l.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(IC).join("\n")}(o),b=function E$e(l){const a=[];for(const o in l){const c=l[o];!1!==c&&a.push("#define "+o+" "+c)}return a.join("\n")}(h),x=u.createProgram();let C,w,S=o.glslVersion?"#version "+o.glslVersion+"\n":"";o.isRawShaderMaterial?(C=[b].filter(IC).join("\n"),C.length>0&&(C+="\n"),w=[y,b].filter(IC).join("\n"),w.length>0&&(w+="\n")):(C=[hre(o),"#define SHADER_NAME "+o.shaderName,b,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularColorMap?"#define USE_SPECULARCOLORMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEENCOLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.morphColors&&o.isWebGL2?"#define USE_MORPHCOLORS":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+o.morphTextureStride:"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+p:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(IC).join("\n"),w=[y,hre(o),"#define SHADER_NAME "+o.shaderName,b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+g:"",o.envMap?"#define "+m:"",o.envMap?"#define "+v:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescence?"#define USE_IRIDESCENCE":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularColorMap?"#define USE_SPECULARCOLORMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEENCOLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+p:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?zi.tonemapping_pars_fragment:"",0!==o.toneMapping?D$e("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.opaque?"#define OPAQUE":"",zi.encodings_pars_fragment,T$e("linearToOutputTexel",o.outputEncoding),o.useDepthPacking?"#define DEPTH_PACKING "+o.depthPacking:"","\n"].filter(IC).join("\n")),d=R5(d),d=are(d,o),d=lre(d,o),f=R5(f),f=are(f,o),f=lre(f,o),d=cre(d),f=cre(f),o.isWebGL2&&!0!==o.isRawShaderMaterial&&(S="#version 300 es\n",C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+C,w=["#define varying in","300 es"===o.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===o.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+w);const T=S+w+f,A=sre(u,35633,S+C+d),I=sre(u,35632,T);if(u.attachShader(x,A),u.attachShader(x,I),void 0!==o.index0AttributeName?u.bindAttribLocation(x,0,o.index0AttributeName):!0===o.morphTargets&&u.bindAttribLocation(x,0,"position"),u.linkProgram(x),l.debug.checkShaderErrors){const F=u.getProgramInfoLog(x).trim(),B=u.getShaderInfoLog(A).trim(),V=u.getShaderInfoLog(I).trim();let $=!0,q=!0;if(!1===u.getProgramParameter(x,35714)){$=!1;const L=ore(u,A,"vertex"),U=ore(u,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+u.getError()+" - VALIDATE_STATUS "+u.getProgramParameter(x,35715)+"\n\nProgram Info Log: "+F+"\n"+L+"\n"+U)}else""!==F?console.warn("THREE.WebGLProgram: Program Info Log:",F):(""===B||""===V)&&(q=!1);q&&(this.diagnostics={runnable:$,programLog:F,vertexShader:{log:B,prefix:C},fragmentShader:{log:V,prefix:w}})}let N,k;return u.deleteShader(A),u.deleteShader(I),this.getUniforms=function(){return void 0===N&&(N=new RM(u,x)),N},this.getAttributes=function(){return void 0===k&&(k=function k$e(l,a){const o={},c=l.getProgramParameter(a,35721);for(let u=0;u<c;u++){const h=l.getActiveAttrib(a,u),d=h.name;let f=1;35674===h.type&&(f=2),35675===h.type&&(f=3),35676===h.type&&(f=4),o[d]={type:h.type,location:l.getAttribLocation(a,d),locationSize:f}}return o}(u,x)),k},this.destroy=function(){c.releaseStatesOfProgram(this),u.deleteProgram(x),this.program=void 0},this.name=o.shaderName,this.id=x$e++,this.cacheKey=a,this.usedTimes=1,this.program=x,this.vertexShader=A,this.fragmentShader=I,this}let U$e=0;class H$e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(a){const c=a.fragmentShader,u=this._getShaderStage(a.vertexShader),h=this._getShaderStage(c),d=this._getShaderCacheForMaterial(a);return!1===d.has(u)&&(d.add(u),u.usedTimes++),!1===d.has(h)&&(d.add(h),h.usedTimes++),this}remove(a){const o=this.materialCache.get(a);for(const c of o)c.usedTimes--,0===c.usedTimes&&this.shaderCache.delete(c.code);return this.materialCache.delete(a),this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(a){const o=this.materialCache;return!1===o.has(a)&&o.set(a,new Set),o.get(a)}_getShaderStage(a){const o=this.shaderCache;if(!1===o.has(a)){const c=new W$e(a);o.set(a,c)}return o.get(a)}}class W$e{constructor(a){this.id=U$e++,this.code=a,this.usedTimes=0}}function G$e(l,a,o,c,u,h,d){const f=new m5,p=new H$e,g=[],m=u.isWebGL2,v=u.logarithmicDepthBuffer,_=u.vertexTextures;let y=u.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function x(k,F,B,V,$){const q=V.fog,L=$.geometry,z=(k.isMeshStandardMaterial?o:a).get(k.envMap||(k.isMeshStandardMaterial?V.environment:null)),W=z&&306===z.mapping?z.image.height:null,H=b[k.type];null!==k.precision&&(y=u.getMaxPrecision(k.precision),y!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",y,"instead."));const j=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,G=void 0!==j?j.length:0;let J,ce,oe,xe,K=0;if(void 0!==L.morphAttributes.position&&(K=1),void 0!==L.morphAttributes.normal&&(K=2),void 0!==L.morphAttributes.color&&(K=3),H){const Ze=ah[H];J=Ze.vertexShader,ce=Ze.fragmentShader}else J=k.vertexShader,ce=k.fragmentShader,p.update(k),oe=p.getVertexShaderID(k),xe=p.getFragmentShaderID(k);const ve=l.getRenderTarget(),We=k.clearcoat>0,ke=k.iridescence>0;return{isWebGL2:m,shaderID:H,shaderName:k.type,vertexShader:J,fragmentShader:ce,defines:k.defines,customVertexShaderID:oe,customFragmentShaderID:xe,isRawShaderMaterial:!0===k.isRawShaderMaterial,glslVersion:k.glslVersion,precision:y,instancing:!0===$.isInstancedMesh,instancingColor:!0===$.isInstancedMesh&&null!==$.instanceColor,supportsVertexTextures:_,outputEncoding:null===ve?l.outputEncoding:!0===ve.isXRRenderTarget?ve.texture.encoding:Pg,map:!!k.map,matcap:!!k.matcap,envMap:!!z,envMapMode:z&&z.mapping,envMapCubeUVHeight:W,lightMap:!!k.lightMap,aoMap:!!k.aoMap,emissiveMap:!!k.emissiveMap,bumpMap:!!k.bumpMap,normalMap:!!k.normalMap,objectSpaceNormalMap:1===k.normalMapType,tangentSpaceNormalMap:0===k.normalMapType,decodeVideoTexture:!!k.map&&!0===k.map.isVideoTexture&&k.map.encoding===is,clearcoat:We,clearcoatMap:We&&!!k.clearcoatMap,clearcoatRoughnessMap:We&&!!k.clearcoatRoughnessMap,clearcoatNormalMap:We&&!!k.clearcoatNormalMap,iridescence:ke,iridescenceMap:ke&&!!k.iridescenceMap,iridescenceThicknessMap:ke&&!!k.iridescenceThicknessMap,displacementMap:!!k.displacementMap,roughnessMap:!!k.roughnessMap,metalnessMap:!!k.metalnessMap,specularMap:!!k.specularMap,specularIntensityMap:!!k.specularIntensityMap,specularColorMap:!!k.specularColorMap,opaque:!1===k.transparent&&1===k.blending,alphaMap:!!k.alphaMap,alphaTest:k.alphaTest>0,gradientMap:!!k.gradientMap,sheen:k.sheen>0,sheenColorMap:!!k.sheenColorMap,sheenRoughnessMap:!!k.sheenRoughnessMap,transmission:k.transmission>0,transmissionMap:!!k.transmissionMap,thicknessMap:!!k.thicknessMap,combine:k.combine,vertexTangents:!!k.normalMap&&!!L.attributes.tangent,vertexColors:k.vertexColors,vertexAlphas:!0===k.vertexColors&&!!L.attributes.color&&4===L.attributes.color.itemSize,vertexUvs:!!(k.map||k.bumpMap||k.normalMap||k.specularMap||k.alphaMap||k.emissiveMap||k.roughnessMap||k.metalnessMap||k.clearcoatMap||k.clearcoatRoughnessMap||k.clearcoatNormalMap||k.iridescenceMap||k.iridescenceThicknessMap||k.displacementMap||k.transmissionMap||k.thicknessMap||k.specularIntensityMap||k.specularColorMap||k.sheenColorMap||k.sheenRoughnessMap),uvsVertexOnly:!(k.map||k.bumpMap||k.normalMap||k.specularMap||k.alphaMap||k.emissiveMap||k.roughnessMap||k.metalnessMap||k.clearcoatNormalMap||k.iridescenceMap||k.iridescenceThicknessMap||k.transmission>0||k.transmissionMap||k.thicknessMap||k.specularIntensityMap||k.specularColorMap||k.sheen>0||k.sheenColorMap||k.sheenRoughnessMap||!k.displacementMap),fog:!!q,useFog:!0===k.fog,fogExp2:q&&q.isFogExp2,flatShading:!!k.flatShading,sizeAttenuation:k.sizeAttenuation,logarithmicDepthBuffer:v,skinning:!0===$.isSkinnedMesh,morphTargets:void 0!==L.morphAttributes.position,morphNormals:void 0!==L.morphAttributes.normal,morphColors:void 0!==L.morphAttributes.color,morphTargetsCount:G,morphTextureStride:K,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:k.dithering,shadowMapEnabled:l.shadowMap.enabled&&B.length>0,shadowMapType:l.shadowMap.type,toneMapping:k.toneMapped?l.toneMapping:0,physicallyCorrectLights:l.physicallyCorrectLights,premultipliedAlpha:k.premultipliedAlpha,doubleSided:2===k.side,flipSided:1===k.side,useDepthPacking:!!k.depthPacking,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionDerivatives:k.extensions&&k.extensions.derivatives,extensionFragDepth:k.extensions&&k.extensions.fragDepth,extensionDrawBuffers:k.extensions&&k.extensions.drawBuffers,extensionShaderTextureLOD:k.extensions&&k.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||c.has("EXT_shader_texture_lod"),customProgramCacheKey:k.customProgramCacheKey()}},getProgramCacheKey:function C(k){const F=[];if(k.shaderID?F.push(k.shaderID):(F.push(k.customVertexShaderID),F.push(k.customFragmentShaderID)),void 0!==k.defines)for(const B in k.defines)F.push(B),F.push(k.defines[B]);return!1===k.isRawShaderMaterial&&(function w(k,F){k.push(F.precision),k.push(F.outputEncoding),k.push(F.envMapMode),k.push(F.envMapCubeUVHeight),k.push(F.combine),k.push(F.vertexUvs),k.push(F.fogExp2),k.push(F.sizeAttenuation),k.push(F.morphTargetsCount),k.push(F.morphAttributeCount),k.push(F.numDirLights),k.push(F.numPointLights),k.push(F.numSpotLights),k.push(F.numHemiLights),k.push(F.numRectAreaLights),k.push(F.numDirLightShadows),k.push(F.numPointLightShadows),k.push(F.numSpotLightShadows),k.push(F.shadowMapType),k.push(F.toneMapping),k.push(F.numClippingPlanes),k.push(F.numClipIntersection),k.push(F.depthPacking)}(F,k),function S(k,F){f.disableAll(),F.isWebGL2&&f.enable(0),F.supportsVertexTextures&&f.enable(1),F.instancing&&f.enable(2),F.instancingColor&&f.enable(3),F.map&&f.enable(4),F.matcap&&f.enable(5),F.envMap&&f.enable(6),F.lightMap&&f.enable(7),F.aoMap&&f.enable(8),F.emissiveMap&&f.enable(9),F.bumpMap&&f.enable(10),F.normalMap&&f.enable(11),F.objectSpaceNormalMap&&f.enable(12),F.tangentSpaceNormalMap&&f.enable(13),F.clearcoat&&f.enable(14),F.clearcoatMap&&f.enable(15),F.clearcoatRoughnessMap&&f.enable(16),F.clearcoatNormalMap&&f.enable(17),F.iridescence&&f.enable(18),F.iridescenceMap&&f.enable(19),F.iridescenceThicknessMap&&f.enable(20),F.displacementMap&&f.enable(21),F.specularMap&&f.enable(22),F.roughnessMap&&f.enable(23),F.metalnessMap&&f.enable(24),F.gradientMap&&f.enable(25),F.alphaMap&&f.enable(26),F.alphaTest&&f.enable(27),F.vertexColors&&f.enable(28),F.vertexAlphas&&f.enable(29),F.vertexUvs&&f.enable(30),F.vertexTangents&&f.enable(31),F.uvsVertexOnly&&f.enable(32),F.fog&&f.enable(33),k.push(f.mask),f.disableAll(),F.useFog&&f.enable(0),F.flatShading&&f.enable(1),F.logarithmicDepthBuffer&&f.enable(2),F.skinning&&f.enable(3),F.morphTargets&&f.enable(4),F.morphNormals&&f.enable(5),F.morphColors&&f.enable(6),F.premultipliedAlpha&&f.enable(7),F.shadowMapEnabled&&f.enable(8),F.physicallyCorrectLights&&f.enable(9),F.doubleSided&&f.enable(10),F.flipSided&&f.enable(11),F.useDepthPacking&&f.enable(12),F.dithering&&f.enable(13),F.specularIntensityMap&&f.enable(14),F.specularColorMap&&f.enable(15),F.transmission&&f.enable(16),F.transmissionMap&&f.enable(17),F.thicknessMap&&f.enable(18),F.sheen&&f.enable(19),F.sheenColorMap&&f.enable(20),F.sheenRoughnessMap&&f.enable(21),F.decodeVideoTexture&&f.enable(22),F.opaque&&f.enable(23),k.push(f.mask)}(F,k),F.push(l.outputEncoding)),F.push(k.customProgramCacheKey),F.join()},getUniforms:function D(k){const F=b[k.type];let B;return B=F?AM.clone(ah[F].uniforms):k.uniforms,B},acquireProgram:function T(k,F){let B;for(let V=0,$=g.length;V<$;V++){const q=g[V];if(q.cacheKey===F){B=q,++B.usedTimes;break}}return void 0===B&&(B=new z$e(l,F,k,h),g.push(B)),B},releaseProgram:function A(k){if(0==--k.usedTimes){const F=g.indexOf(k);g[F]=g[g.length-1],g.pop(),k.destroy()}},releaseShaderCache:function I(k){p.remove(k)},programs:g,dispose:function N(){p.dispose()}}}function j$e(){let l=new WeakMap;return{get:function a(h){let d=l.get(h);return void 0===d&&(d={},l.set(h,d)),d},remove:function o(h){l.delete(h)},update:function c(h,d,f){l.get(h)[d]=f},dispose:function u(){l=new WeakMap}}}function $$e(l,a){return l.groupOrder!==a.groupOrder?l.groupOrder-a.groupOrder:l.renderOrder!==a.renderOrder?l.renderOrder-a.renderOrder:l.material.id!==a.material.id?l.material.id-a.material.id:l.z!==a.z?l.z-a.z:l.id-a.id}function dre(l,a){return l.groupOrder!==a.groupOrder?l.groupOrder-a.groupOrder:l.renderOrder!==a.renderOrder?l.renderOrder-a.renderOrder:l.z!==a.z?a.z-l.z:l.id-a.id}function fre(){const l=[];let a=0;const o=[],c=[],u=[];function d(v,_,y,b,x,C){let w=l[a];return void 0===w?(w={id:v.id,object:v,geometry:_,material:y,groupOrder:b,renderOrder:v.renderOrder,z:x,group:C},l[a]=w):(w.id=v.id,w.object=v,w.geometry=_,w.material=y,w.groupOrder=b,w.renderOrder=v.renderOrder,w.z=x,w.group=C),a++,w}return{opaque:o,transmissive:c,transparent:u,init:function h(){a=0,o.length=0,c.length=0,u.length=0},push:function f(v,_,y,b,x,C){const w=d(v,_,y,b,x,C);y.transmission>0?c.push(w):!0===y.transparent?u.push(w):o.push(w)},unshift:function p(v,_,y,b,x,C){const w=d(v,_,y,b,x,C);y.transmission>0?c.unshift(w):!0===y.transparent?u.unshift(w):o.unshift(w)},finish:function m(){for(let v=a,_=l.length;v<_;v++){const y=l[v];if(null===y.id)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}},sort:function g(v,_){o.length>1&&o.sort(v||$$e),c.length>1&&c.sort(_||dre),u.length>1&&u.sort(_||dre)}}}function q$e(){let l=new WeakMap;return{get:function a(c,u){let h;return!1===l.has(c)?(h=new fre,l.set(c,[h])):u>=l.get(c).length?(h=new fre,l.get(c).push(h)):h=l.get(c)[u],h},dispose:function o(){l=new WeakMap}}}function Y$e(){const l={};return{get:function(a){if(void 0!==l[a.id])return l[a.id];let o;switch(a.type){case"DirectionalLight":o={direction:new te,color:new rn};break;case"SpotLight":o={position:new te,direction:new te,color:new rn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new te,color:new rn,distance:0,decay:0};break;case"HemisphereLight":o={direction:new te,skyColor:new rn,groundColor:new rn};break;case"RectAreaLight":o={color:new rn,position:new te,halfWidth:new te,halfHeight:new te}}return l[a.id]=o,o}}}let Z$e=0;function K$e(l,a){return(a.castShadow?1:0)-(l.castShadow?1:0)}function Q$e(l,a){const o=new Y$e,c=function X$e(){const l={};return{get:function(a){if(void 0!==l[a.id])return l[a.id];let o;switch(a.type){case"DirectionalLight":case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht,shadowCameraNear:1,shadowCameraFar:1e3}}return l[a.id]=o,o}}}(),u={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let m=0;m<9;m++)u.probe.push(new te);const h=new te,d=new ii,f=new ii;return{setup:function p(m,v){let _=0,y=0,b=0;for(let F=0;F<9;F++)u.probe[F].set(0,0,0);let x=0,C=0,w=0,S=0,D=0,T=0,A=0,I=0;m.sort(K$e);const N=!0!==v?Math.PI:1;for(let F=0,B=m.length;F<B;F++){const V=m[F],$=V.color,q=V.intensity,L=V.distance,U=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)_+=$.r*q*N,y+=$.g*q*N,b+=$.b*q*N;else if(V.isLightProbe)for(let z=0;z<9;z++)u.probe[z].addScaledVector(V.sh.coefficients[z],q);else if(V.isDirectionalLight){const z=o.get(V);if(z.color.copy(V.color).multiplyScalar(V.intensity*N),V.castShadow){const W=V.shadow,H=c.get(V);H.shadowBias=W.bias,H.shadowNormalBias=W.normalBias,H.shadowRadius=W.radius,H.shadowMapSize=W.mapSize,u.directionalShadow[x]=H,u.directionalShadowMap[x]=U,u.directionalShadowMatrix[x]=V.shadow.matrix,T++}u.directional[x]=z,x++}else if(V.isSpotLight){const z=o.get(V);if(z.position.setFromMatrixPosition(V.matrixWorld),z.color.copy($).multiplyScalar(q*N),z.distance=L,z.coneCos=Math.cos(V.angle),z.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),z.decay=V.decay,V.castShadow){const W=V.shadow,H=c.get(V);H.shadowBias=W.bias,H.shadowNormalBias=W.normalBias,H.shadowRadius=W.radius,H.shadowMapSize=W.mapSize,u.spotShadow[w]=H,u.spotShadowMap[w]=U,u.spotShadowMatrix[w]=V.shadow.matrix,I++}u.spot[w]=z,w++}else if(V.isRectAreaLight){const z=o.get(V);z.color.copy($).multiplyScalar(q),z.halfWidth.set(.5*V.width,0,0),z.halfHeight.set(0,.5*V.height,0),u.rectArea[S]=z,S++}else if(V.isPointLight){const z=o.get(V);if(z.color.copy(V.color).multiplyScalar(V.intensity*N),z.distance=V.distance,z.decay=V.decay,V.castShadow){const W=V.shadow,H=c.get(V);H.shadowBias=W.bias,H.shadowNormalBias=W.normalBias,H.shadowRadius=W.radius,H.shadowMapSize=W.mapSize,H.shadowCameraNear=W.camera.near,H.shadowCameraFar=W.camera.far,u.pointShadow[C]=H,u.pointShadowMap[C]=U,u.pointShadowMatrix[C]=V.shadow.matrix,A++}u.point[C]=z,C++}else if(V.isHemisphereLight){const z=o.get(V);z.skyColor.copy(V.color).multiplyScalar(q*N),z.groundColor.copy(V.groundColor).multiplyScalar(q*N),u.hemi[D]=z,D++}}S>0&&(a.isWebGL2||!0===l.has("OES_texture_float_linear")?(u.rectAreaLTC1=nn.LTC_FLOAT_1,u.rectAreaLTC2=nn.LTC_FLOAT_2):!0===l.has("OES_texture_half_float_linear")?(u.rectAreaLTC1=nn.LTC_HALF_1,u.rectAreaLTC2=nn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),u.ambient[0]=_,u.ambient[1]=y,u.ambient[2]=b;const k=u.hash;(k.directionalLength!==x||k.pointLength!==C||k.spotLength!==w||k.rectAreaLength!==S||k.hemiLength!==D||k.numDirectionalShadows!==T||k.numPointShadows!==A||k.numSpotShadows!==I)&&(u.directional.length=x,u.spot.length=w,u.rectArea.length=S,u.point.length=C,u.hemi.length=D,u.directionalShadow.length=T,u.directionalShadowMap.length=T,u.pointShadow.length=A,u.pointShadowMap.length=A,u.spotShadow.length=I,u.spotShadowMap.length=I,u.directionalShadowMatrix.length=T,u.pointShadowMatrix.length=A,u.spotShadowMatrix.length=I,k.directionalLength=x,k.pointLength=C,k.spotLength=w,k.rectAreaLength=S,k.hemiLength=D,k.numDirectionalShadows=T,k.numPointShadows=A,k.numSpotShadows=I,u.version=Z$e++)},setupView:function g(m,v){let _=0,y=0,b=0,x=0,C=0;const w=v.matrixWorldInverse;for(let S=0,D=m.length;S<D;S++){const T=m[S];if(T.isDirectionalLight){const A=u.directional[_];A.direction.setFromMatrixPosition(T.matrixWorld),h.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(h),A.direction.transformDirection(w),_++}else if(T.isSpotLight){const A=u.spot[b];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(w),A.direction.setFromMatrixPosition(T.matrixWorld),h.setFromMatrixPosition(T.target.matrixWorld),A.direction.sub(h),A.direction.transformDirection(w),b++}else if(T.isRectAreaLight){const A=u.rectArea[x];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(w),f.identity(),d.copy(T.matrixWorld),d.premultiply(w),f.extractRotation(d),A.halfWidth.set(.5*T.width,0,0),A.halfHeight.set(0,.5*T.height,0),A.halfWidth.applyMatrix4(f),A.halfHeight.applyMatrix4(f),x++}else if(T.isPointLight){const A=u.point[y];A.position.setFromMatrixPosition(T.matrixWorld),A.position.applyMatrix4(w),y++}else if(T.isHemisphereLight){const A=u.hemi[C];A.direction.setFromMatrixPosition(T.matrixWorld),A.direction.transformDirection(w),C++}}},state:u}}function pre(l,a){const o=new Q$e(l,a),c=[],u=[];return{init:function h(){c.length=0,u.length=0},state:{lightsArray:c,shadowsArray:u,lights:o},setupLights:function p(v){o.setup(c,v)},setupLightsView:function g(v){o.setupView(c,v)},pushLight:function d(v){c.push(v)},pushShadow:function f(v){u.push(v)}}}function J$e(l,a){let o=new WeakMap;return{get:function c(h,d=0){let f;return!1===o.has(h)?(f=new pre(l,a),o.set(h,[f])):d>=o.get(h).length?(f=new pre(l,a),o.get(h).push(f)):f=o.get(h)[d],f},dispose:function u(){o=new WeakMap}}}class N5 extends Vg{constructor(a){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(a)}copy(a){return super.copy(a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}class gre extends Vg{constructor(a){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(a)}copy(a){return super.copy(a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}function nqe(l,a,o){let c=new k5;const u=new ht,h=new ht,d=new ji,f=new N5({depthPacking:3201}),p=new gre,g={},m=o.maxTextureSize,v={0:1,1:0,2:2},_=new Ko({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ht},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=_.clone();y.defines.HORIZONTAL_PASS=1;const b=new wi;b.setAttribute("position",new rs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Wi(b,_),C=this;function w(T,A){const I=a.update(x);_.defines.VSM_SAMPLES!==T.blurSamples&&(_.defines.VSM_SAMPLES=T.blurSamples,y.defines.VSM_SAMPLES=T.blurSamples,_.needsUpdate=!0,y.needsUpdate=!0),null===T.mapPass&&(T.mapPass=new Ma(u.x,u.y)),_.uniforms.shadow_pass.value=T.map.texture,_.uniforms.resolution.value=T.mapSize,_.uniforms.radius.value=T.radius,l.setRenderTarget(T.mapPass),l.clear(),l.renderBufferDirect(A,null,I,_,x,null),y.uniforms.shadow_pass.value=T.mapPass.texture,y.uniforms.resolution.value=T.mapSize,y.uniforms.radius.value=T.radius,l.setRenderTarget(T.map),l.clear(),l.renderBufferDirect(A,null,I,y,x,null)}function S(T,A,I,N,k,F){let B=null;const V=!0===I.isPointLight?T.customDistanceMaterial:T.customDepthMaterial;if(B=void 0!==V?V:!0===I.isPointLight?p:f,l.localClippingEnabled&&!0===A.clipShadows&&Array.isArray(A.clippingPlanes)&&0!==A.clippingPlanes.length||A.displacementMap&&0!==A.displacementScale||A.alphaMap&&A.alphaTest>0){const $=B.uuid,q=A.uuid;let L=g[$];void 0===L&&(L={},g[$]=L);let U=L[q];void 0===U&&(U=B.clone(),L[q]=U),B=U}return B.visible=A.visible,B.wireframe=A.wireframe,B.side=3===F?null!==A.shadowSide?A.shadowSide:A.side:null!==A.shadowSide?A.shadowSide:v[A.side],B.alphaMap=A.alphaMap,B.alphaTest=A.alphaTest,B.clipShadows=A.clipShadows,B.clippingPlanes=A.clippingPlanes,B.clipIntersection=A.clipIntersection,B.displacementMap=A.displacementMap,B.displacementScale=A.displacementScale,B.displacementBias=A.displacementBias,B.wireframeLinewidth=A.wireframeLinewidth,B.linewidth=A.linewidth,!0===I.isPointLight&&!0===B.isMeshDistanceMaterial&&(B.referencePosition.setFromMatrixPosition(I.matrixWorld),B.nearDistance=N,B.farDistance=k),B}function D(T,A,I,N,k){if(!1===T.visible)return;if(T.layers.test(A.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&3===k)&&(!T.frustumCulled||c.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,T.matrixWorld);const V=a.update(T),$=T.material;if(Array.isArray($)){const q=V.groups;for(let L=0,U=q.length;L<U;L++){const z=q[L],W=$[z.materialIndex];if(W&&W.visible){const H=S(T,W,N,I.near,I.far,k);l.renderBufferDirect(I,null,V,H,T,z)}}}else if($.visible){const q=S(T,$,N,I.near,I.far,k);l.renderBufferDirect(I,null,V,q,T,null)}}const B=T.children;for(let V=0,$=B.length;V<$;V++)D(B[V],A,I,N,k)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(T,A,I){if(!1===C.enabled||!1===C.autoUpdate&&!1===C.needsUpdate||0===T.length)return;const N=l.getRenderTarget(),k=l.getActiveCubeFace(),F=l.getActiveMipmapLevel(),B=l.state;B.setBlending(0),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(let V=0,$=T.length;V<$;V++){const q=T[V],L=q.shadow;if(void 0===L){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(!1===L.autoUpdate&&!1===L.needsUpdate)continue;u.copy(L.mapSize);const U=L.getFrameExtents();u.multiply(U),h.copy(L.mapSize),(u.x>m||u.y>m)&&(u.x>m&&(h.x=Math.floor(m/U.x),u.x=h.x*U.x,L.mapSize.x=h.x),u.y>m&&(h.y=Math.floor(m/U.y),u.y=h.y*U.y,L.mapSize.y=h.y)),null===L.map&&(L.map=new Ma(u.x,u.y,3!==this.type?{minFilter:oo,magFilter:oo}:{}),L.map.texture.name=q.name+".shadowMap",L.camera.updateProjectionMatrix()),l.setRenderTarget(L.map),l.clear();const z=L.getViewportCount();for(let W=0;W<z;W++){const H=L.getViewport(W);d.set(h.x*H.x,h.y*H.y,h.x*H.z,h.y*H.w),B.viewport(d),L.updateMatrices(q,W),c=L.getFrustum(),D(A,I,L.camera,q,this.type)}!0!==L.isPointLightShadow&&3===this.type&&w(L,I),L.needsUpdate=!1}C.needsUpdate=!1,l.setRenderTarget(N,k,F)}}function iqe(l,a,o){const c=o.isWebGL2,f=new function u(){let Ae=!1;const tn=new ji;let Qt=null;const ei=new ji(0,0,0,0);return{setMask:function(kn){Qt!==kn&&!Ae&&(l.colorMask(kn,kn,kn,kn),Qt=kn)},setLocked:function(kn){Ae=kn},setClear:function(kn,li,Zt,ci,yr){!0===yr&&(kn*=ci,li*=ci,Zt*=ci),tn.set(kn,li,Zt,ci),!1===ei.equals(tn)&&(l.clearColor(kn,li,Zt,ci),ei.copy(tn))},reset:function(){Ae=!1,Qt=null,ei.set(-1,0,0,0)}}},p=new function h(){let Ae=!1,tn=null,Qt=null,ei=null;return{setTest:function(kn){kn?xe(2929):ve(2929)},setMask:function(kn){tn!==kn&&!Ae&&(l.depthMask(kn),tn=kn)},setFunc:function(kn){if(Qt!==kn){if(kn)switch(kn){case 0:l.depthFunc(512);break;case 1:l.depthFunc(519);break;case 2:l.depthFunc(513);break;case 3:default:l.depthFunc(515);break;case 4:l.depthFunc(514);break;case 5:l.depthFunc(518);break;case 6:l.depthFunc(516);break;case 7:l.depthFunc(517)}else l.depthFunc(515);Qt=kn}},setLocked:function(kn){Ae=kn},setClear:function(kn){ei!==kn&&(l.clearDepth(kn),ei=kn)},reset:function(){Ae=!1,tn=null,Qt=null,ei=null}}},g=new function d(){let Ae=!1,tn=null,Qt=null,ei=null,kn=null,li=null,Zt=null,ci=null,yr=null;return{setTest:function(br){Ae||(br?xe(2960):ve(2960))},setMask:function(br){tn!==br&&!Ae&&(l.stencilMask(br),tn=br)},setFunc:function(br,Ia,mh){(Qt!==br||ei!==Ia||kn!==mh)&&(l.stencilFunc(br,Ia,mh),Qt=br,ei=Ia,kn=mh)},setOp:function(br,Ia,mh){(li!==br||Zt!==Ia||ci!==mh)&&(l.stencilOp(br,Ia,mh),li=br,Zt=Ia,ci=mh)},setLocked:function(br){Ae=br},setClear:function(br){yr!==br&&(l.clearStencil(br),yr=br)},reset:function(){Ae=!1,tn=null,Qt=null,ei=null,kn=null,li=null,Zt=null,ci=null,yr=null}}};let m={},v={},_=new WeakMap,y=[],b=null,x=!1,C=null,w=null,S=null,D=null,T=null,A=null,I=null,N=!1,k=null,F=null,B=null,V=null,$=null;const q=l.getParameter(35661);let L=!1,U=0;const z=l.getParameter(7938);-1!==z.indexOf("WebGL")?(U=parseFloat(/^WebGL (\d)/.exec(z)[1]),L=U>=1):-1!==z.indexOf("OpenGL ES")&&(U=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),L=U>=2);let W=null,H={};const j=l.getParameter(3088),G=l.getParameter(2978),K=(new ji).fromArray(j),J=(new ji).fromArray(G);function ce(Ae,tn,Qt){const ei=new Uint8Array(4),kn=l.createTexture();l.bindTexture(Ae,kn),l.texParameteri(Ae,10241,9728),l.texParameteri(Ae,10240,9728);for(let li=0;li<Qt;li++)l.texImage2D(tn+li,0,6408,1,1,0,6408,5121,ei);return kn}const oe={};function xe(Ae){!0!==m[Ae]&&(l.enable(Ae),m[Ae]=!0)}function ve(Ae){!1!==m[Ae]&&(l.disable(Ae),m[Ae]=!1)}oe[3553]=ce(3553,3553,1),oe[34067]=ce(34067,34069,6),f.setClear(0,0,0,1),p.setClear(1),g.setClear(0),xe(2929),p.setFunc(3),Ke(!1),nt(1),xe(2884),he(0);const Pe={100:32774,101:32778,102:32779};if(c)Pe[103]=32775,Pe[104]=32776;else{const Ae=a.get("EXT_blend_minmax");null!==Ae&&(Pe[103]=Ae.MIN_EXT,Pe[104]=Ae.MAX_EXT)}const Ze={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function he(Ae,tn,Qt,ei,kn,li,Zt,ci){if(0!==Ae){if(!1===x&&(xe(3042),x=!0),5===Ae)kn=kn||tn,li=li||Qt,Zt=Zt||ei,(tn!==w||kn!==T)&&(l.blendEquationSeparate(Pe[tn],Pe[kn]),w=tn,T=kn),(Qt!==S||ei!==D||li!==A||Zt!==I)&&(l.blendFuncSeparate(Ze[Qt],Ze[ei],Ze[li],Ze[Zt]),S=Qt,D=ei,A=li,I=Zt),C=Ae,N=null;else if(Ae!==C||ci!==N){if((100!==w||100!==T)&&(l.blendEquation(32774),w=100,T=100),ci)switch(Ae){case 1:l.blendFuncSeparate(1,771,1,771);break;case 2:l.blendFunc(1,1);break;case 3:l.blendFuncSeparate(0,769,0,1);break;case 4:l.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae)}else switch(Ae){case 1:l.blendFuncSeparate(770,771,1,771);break;case 2:l.blendFunc(770,1);break;case 3:l.blendFuncSeparate(0,769,0,1);break;case 4:l.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae)}S=null,D=null,A=null,I=null,C=Ae,N=ci}}else!0===x&&(ve(3042),x=!1)}function Ke(Ae){k!==Ae&&(l.frontFace(Ae?2304:2305),k=Ae)}function nt(Ae){0!==Ae?(xe(2884),Ae!==F&&l.cullFace(1===Ae?1029:2===Ae?1028:1032)):ve(2884),F=Ae}function Se(Ae,tn,Qt){Ae?(xe(32823),(V!==tn||$!==Qt)&&(l.polygonOffset(tn,Qt),V=tn,$=Qt)):ve(32823)}function Bt(Ae){void 0===Ae&&(Ae=33984+q-1),W!==Ae&&(l.activeTexture(Ae),W=Ae)}return{buffers:{color:f,depth:p,stencil:g},enable:xe,disable:ve,bindFramebuffer:function De(Ae,tn){return v[Ae]!==tn&&(l.bindFramebuffer(Ae,tn),v[Ae]=tn,c&&(36009===Ae&&(v[36160]=tn),36160===Ae&&(v[36009]=tn)),!0)},drawBuffers:function We(Ae,tn){let Qt=y,ei=!1;if(Ae)if(Qt=_.get(tn),void 0===Qt&&(Qt=[],_.set(tn,Qt)),Ae.isWebGLMultipleRenderTargets){const kn=Ae.texture;if(Qt.length!==kn.length||36064!==Qt[0]){for(let li=0,Zt=kn.length;li<Zt;li++)Qt[li]=36064+li;Qt.length=kn.length,ei=!0}}else 36064!==Qt[0]&&(Qt[0]=36064,ei=!0);else 1029!==Qt[0]&&(Qt[0]=1029,ei=!0);ei&&(o.isWebGL2?l.drawBuffers(Qt):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(Qt))},useProgram:function ke(Ae){return b!==Ae&&(l.useProgram(Ae),b=Ae,!0)},setBlending:he,setMaterial:function Fe(Ae,tn){2===Ae.side?ve(2884):xe(2884);let Qt=1===Ae.side;tn&&(Qt=!Qt),Ke(Qt),1===Ae.blending&&!1===Ae.transparent?he(0):he(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.premultipliedAlpha),p.setFunc(Ae.depthFunc),p.setTest(Ae.depthTest),p.setMask(Ae.depthWrite),f.setMask(Ae.colorWrite);const ei=Ae.stencilWrite;g.setTest(ei),ei&&(g.setMask(Ae.stencilWriteMask),g.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),g.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),Se(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),!0===Ae.alphaToCoverage?xe(32926):ve(32926)},setFlipSided:Ke,setCullFace:nt,setLineWidth:function $e(Ae){Ae!==B&&(L&&l.lineWidth(Ae),B=Ae)},setPolygonOffset:Se,setScissorTest:function Ge(Ae){Ae?xe(3089):ve(3089)},activeTexture:Bt,bindTexture:function vn(Ae,tn){null===W&&Bt();let Qt=H[W];void 0===Qt&&(Qt={type:void 0,texture:void 0},H[W]=Qt),(Qt.type!==Ae||Qt.texture!==tn)&&(l.bindTexture(Ae,tn||oe[Ae]),Qt.type=Ae,Qt.texture=tn)},unbindTexture:function In(){const Ae=H[W];void 0!==Ae&&void 0!==Ae.type&&(l.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)},compressedTexImage2D:function de(){try{l.compressedTexImage2D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},texImage2D:function Ft(){try{l.texImage2D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},texImage3D:function qe(){try{l.texImage3D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},texStorage2D:function Ut(){try{l.texStorage2D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},texStorage3D:function Pt(){try{l.texStorage3D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},texSubImage2D:function se(){try{l.texSubImage2D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},texSubImage3D:function rt(){try{l.texSubImage3D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},compressedTexSubImage2D:function _t(){try{l.compressedTexSubImage2D.apply(l,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}},scissor:function Xt(Ae){!1===K.equals(Ae)&&(l.scissor(Ae.x,Ae.y,Ae.z,Ae.w),K.copy(Ae))},viewport:function Gt(Ae){!1===J.equals(Ae)&&(l.viewport(Ae.x,Ae.y,Ae.z,Ae.w),J.copy(Ae))},reset:function pn(){l.disable(3042),l.disable(2884),l.disable(2929),l.disable(32823),l.disable(3089),l.disable(2960),l.disable(32926),l.blendEquation(32774),l.blendFunc(1,0),l.blendFuncSeparate(1,0,1,0),l.colorMask(!0,!0,!0,!0),l.clearColor(0,0,0,0),l.depthMask(!0),l.depthFunc(513),l.clearDepth(1),l.stencilMask(4294967295),l.stencilFunc(519,0,4294967295),l.stencilOp(7680,7680,7680),l.clearStencil(0),l.cullFace(1029),l.frontFace(2305),l.polygonOffset(0,0),l.activeTexture(33984),l.bindFramebuffer(36160,null),!0===c&&(l.bindFramebuffer(36009,null),l.bindFramebuffer(36008,null)),l.useProgram(null),l.lineWidth(1),l.scissor(0,0,l.canvas.width,l.canvas.height),l.viewport(0,0,l.canvas.width,l.canvas.height),m={},W=null,H={},v={},_=new WeakMap,y=[],b=null,x=!1,C=null,w=null,S=null,D=null,T=null,A=null,I=null,N=!1,k=null,F=null,B=null,V=null,$=null,K.set(0,0,l.canvas.width,l.canvas.height),J.set(0,0,l.canvas.width,l.canvas.height),f.reset(),p.reset(),g.reset()}}}function rqe(l,a,o,c,u,h,d){const f=u.isWebGL2,p=u.maxTextures,g=u.maxCubemapSize,m=u.maxTextureSize,v=u.maxSamples,_=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,y=/OculusBrowser/g.test(navigator.userAgent),b=new WeakMap;let x;const C=new WeakMap;let w=!1;try{w="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(de){}function S(de,se){return w?new OffscreenCanvas(de,se):DC("canvas")}function D(de,se,rt,_t){let Ut=1;if((de.width>_t||de.height>_t)&&(Ut=_t/Math.max(de.width,de.height)),Ut<1||!0===se){if("undefined"!=typeof HTMLImageElement&&de instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&de instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&de instanceof ImageBitmap){const Pt=se?cM:Math.floor,Ft=Pt(Ut*de.width),qe=Pt(Ut*de.height);void 0===x&&(x=S(Ft,qe));const Xt=rt?S(Ft,qe):x;return Xt.width=Ft,Xt.height=qe,Xt.getContext("2d").drawImage(de,0,0,Ft,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+Ft+"x"+qe+")."),Xt}return"data"in de&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),de}return de}function T(de){return r5(de.width)&&r5(de.height)}function I(de,se){return de.generateMipmaps&&se&&de.minFilter!==oo&&de.minFilter!==Us}function N(de){l.generateMipmap(de)}function k(de,se,rt,_t,Ut=!1){if(!1===f)return se;if(null!==de){if(void 0!==l[de])return l[de];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}let Pt=se;return 6403===se&&(5126===rt&&(Pt=33326),5131===rt&&(Pt=33325),5121===rt&&(Pt=33321)),33319===se&&(5126===rt&&(Pt=33328),5131===rt&&(Pt=33327),5121===rt&&(Pt=33323)),6408===se&&(5126===rt&&(Pt=34836),5131===rt&&(Pt=34842),5121===rt&&(Pt=_t===is&&!1===Ut?35907:32856),32819===rt&&(Pt=32854),32820===rt&&(Pt=32855)),(33325===Pt||33326===Pt||33327===Pt||33328===Pt||34842===Pt||34836===Pt)&&a.get("EXT_color_buffer_float"),Pt}function F(de,se,rt){return!0===I(de,rt)||de.isFramebufferTexture&&de.minFilter!==oo&&de.minFilter!==Us?Math.log2(Math.max(se.width,se.height))+1:void 0!==de.mipmaps&&de.mipmaps.length>0?de.mipmaps.length:de.isCompressedTexture&&Array.isArray(de.image)?se.mipmaps.length:1}function B(de){return de===oo||1004===de||1005===de?9728:9729}function V(de){const se=de.target;se.removeEventListener("dispose",V),function q(de){const se=c.get(de);if(void 0===se.__webglInit)return;const rt=de.source,_t=C.get(rt);if(_t){const Ut=_t[se.__cacheKey];Ut.usedTimes--,0===Ut.usedTimes&&L(de),0===Object.keys(_t).length&&C.delete(rt)}c.remove(de)}(se),se.isVideoTexture&&b.delete(se)}function $(de){const se=de.target;se.removeEventListener("dispose",$),function U(de){const se=de.texture,rt=c.get(de),_t=c.get(se);if(void 0!==_t.__webglTexture&&(l.deleteTexture(_t.__webglTexture),d.memory.textures--),de.depthTexture&&de.depthTexture.dispose(),de.isWebGLCubeRenderTarget)for(let Ut=0;Ut<6;Ut++)l.deleteFramebuffer(rt.__webglFramebuffer[Ut]),rt.__webglDepthbuffer&&l.deleteRenderbuffer(rt.__webglDepthbuffer[Ut]);else{if(l.deleteFramebuffer(rt.__webglFramebuffer),rt.__webglDepthbuffer&&l.deleteRenderbuffer(rt.__webglDepthbuffer),rt.__webglMultisampledFramebuffer&&l.deleteFramebuffer(rt.__webglMultisampledFramebuffer),rt.__webglColorRenderbuffer)for(let Ut=0;Ut<rt.__webglColorRenderbuffer.length;Ut++)rt.__webglColorRenderbuffer[Ut]&&l.deleteRenderbuffer(rt.__webglColorRenderbuffer[Ut]);rt.__webglDepthRenderbuffer&&l.deleteRenderbuffer(rt.__webglDepthRenderbuffer)}if(de.isWebGLMultipleRenderTargets)for(let Ut=0,Pt=se.length;Ut<Pt;Ut++){const Ft=c.get(se[Ut]);Ft.__webglTexture&&(l.deleteTexture(Ft.__webglTexture),d.memory.textures--),c.remove(se[Ut])}c.remove(se),c.remove(de)}(se)}function L(de){const se=c.get(de);l.deleteTexture(se.__webglTexture),delete C.get(de.source)[se.__cacheKey],d.memory.textures--}let z=0;function G(de,se){const rt=c.get(de);if(de.isVideoTexture&&function vn(de){const se=d.render.frame;b.get(de)!==se&&(b.set(de,se),de.update())}(de),!1===de.isRenderTargetTexture&&de.version>0&&rt.__version!==de.version){const _t=de.image;if(null===_t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==_t.complete)return void We(rt,de,se);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}o.activeTexture(33984+se),o.bindTexture(3553,rt.__webglTexture)}const oe={[Hv]:10497,[Ka]:33071,1002:33648},xe={[oo]:9728,1004:9984,1005:9986,[Us]:9729,1007:9985,1008:9987};function ve(de,se,rt){if(rt?(l.texParameteri(de,10242,oe[se.wrapS]),l.texParameteri(de,10243,oe[se.wrapT]),(32879===de||35866===de)&&l.texParameteri(de,32882,oe[se.wrapR]),l.texParameteri(de,10240,xe[se.magFilter]),l.texParameteri(de,10241,xe[se.minFilter])):(l.texParameteri(de,10242,33071),l.texParameteri(de,10243,33071),(32879===de||35866===de)&&l.texParameteri(de,32882,33071),(se.wrapS!==Ka||se.wrapT!==Ka)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),l.texParameteri(de,10240,B(se.magFilter)),l.texParameteri(de,10241,B(se.minFilter)),se.minFilter!==oo&&se.minFilter!==Us&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){const _t=a.get("EXT_texture_filter_anisotropic");if(se.type===Lf&&!1===a.has("OES_texture_float_linear")||!1===f&&se.type===wC&&!1===a.has("OES_texture_half_float_linear"))return;(se.anisotropy>1||c.get(se).__currentAnisotropy)&&(l.texParameterf(de,_t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,u.getMaxAnisotropy())),c.get(se).__currentAnisotropy=se.anisotropy)}}function De(de,se){let rt=!1;void 0===de.__webglInit&&(de.__webglInit=!0,se.addEventListener("dispose",V));const _t=se.source;let Ut=C.get(_t);void 0===Ut&&(Ut={},C.set(_t,Ut));const Pt=function j(de){const se=[];return se.push(de.wrapS),se.push(de.wrapT),se.push(de.magFilter),se.push(de.minFilter),se.push(de.anisotropy),se.push(de.internalFormat),se.push(de.format),se.push(de.type),se.push(de.generateMipmaps),se.push(de.premultiplyAlpha),se.push(de.flipY),se.push(de.unpackAlignment),se.push(de.encoding),se.join()}(se);if(Pt!==de.__cacheKey){void 0===Ut[Pt]&&(Ut[Pt]={texture:l.createTexture(),usedTimes:0},d.memory.textures++,rt=!0),Ut[Pt].usedTimes++;const Ft=Ut[de.__cacheKey];void 0!==Ft&&(Ut[de.__cacheKey].usedTimes--,0===Ft.usedTimes&&L(se)),de.__cacheKey=Pt,de.__webglTexture=Ut[Pt].texture}return rt}function We(de,se,rt){let _t=3553;se.isDataArrayTexture&&(_t=35866),se.isData3DTexture&&(_t=32879);const Ut=De(de,se),Pt=se.source;if(o.activeTexture(33984+rt),o.bindTexture(_t,de.__webglTexture),Pt.version!==Pt.__currentVersion||!0===Ut){l.pixelStorei(37440,se.flipY),l.pixelStorei(37441,se.premultiplyAlpha),l.pixelStorei(3317,se.unpackAlignment),l.pixelStorei(37443,0);const Ft=function A(de){return!f&&(de.wrapS!==Ka||de.wrapT!==Ka||de.minFilter!==oo&&de.minFilter!==Us)}(se)&&!1===T(se.image);let qe=D(se.image,Ft,!1,m);qe=In(se,qe);const Xt=T(qe)||f,Gt=h.convert(se.format,se.encoding);let tn,pn=h.convert(se.type),Ae=k(se.internalFormat,Gt,pn,se.encoding,se.isVideoTexture);ve(_t,se,Xt);const Qt=se.mipmaps,ei=f&&!0!==se.isVideoTexture,kn=void 0===Pt.__currentVersion||!0===Ut,li=F(se,qe,Xt);if(se.isDepthTexture)Ae=6402,f?Ae=se.type===Lf?36012:se.type===Ag?33190:se.type===Gv?35056:33189:se.type===Lf&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),se.format===Ig&&6402===Ae&&1012!==se.type&&se.type!==Ag&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),se.type=Ag,pn=h.convert(se.type)),se.format===jv&&6402===Ae&&(Ae=34041,se.type!==Gv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),se.type=Gv,pn=h.convert(se.type))),kn&&(ei?o.texStorage2D(3553,1,Ae,qe.width,qe.height):o.texImage2D(3553,0,Ae,qe.width,qe.height,0,Gt,pn,null));else if(se.isDataTexture)if(Qt.length>0&&Xt){ei&&kn&&o.texStorage2D(3553,li,Ae,Qt[0].width,Qt[0].height);for(let Zt=0,ci=Qt.length;Zt<ci;Zt++)tn=Qt[Zt],ei?o.texSubImage2D(3553,Zt,0,0,tn.width,tn.height,Gt,pn,tn.data):o.texImage2D(3553,Zt,Ae,tn.width,tn.height,0,Gt,pn,tn.data);se.generateMipmaps=!1}else ei?(kn&&o.texStorage2D(3553,li,Ae,qe.width,qe.height),o.texSubImage2D(3553,0,0,0,qe.width,qe.height,Gt,pn,qe.data)):o.texImage2D(3553,0,Ae,qe.width,qe.height,0,Gt,pn,qe.data);else if(se.isCompressedTexture){ei&&kn&&o.texStorage2D(3553,li,Ae,Qt[0].width,Qt[0].height);for(let Zt=0,ci=Qt.length;Zt<ci;Zt++)tn=Qt[Zt],se.format!==ou?null!==Gt?ei?o.compressedTexSubImage2D(3553,Zt,0,0,tn.width,tn.height,Gt,tn.data):o.compressedTexImage2D(3553,Zt,Ae,tn.width,tn.height,0,tn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ei?o.texSubImage2D(3553,Zt,0,0,tn.width,tn.height,Gt,pn,tn.data):o.texImage2D(3553,Zt,Ae,tn.width,tn.height,0,Gt,pn,tn.data)}else if(se.isDataArrayTexture)ei?(kn&&o.texStorage3D(35866,li,Ae,qe.width,qe.height,qe.depth),o.texSubImage3D(35866,0,0,0,0,qe.width,qe.height,qe.depth,Gt,pn,qe.data)):o.texImage3D(35866,0,Ae,qe.width,qe.height,qe.depth,0,Gt,pn,qe.data);else if(se.isData3DTexture)ei?(kn&&o.texStorage3D(32879,li,Ae,qe.width,qe.height,qe.depth),o.texSubImage3D(32879,0,0,0,0,qe.width,qe.height,qe.depth,Gt,pn,qe.data)):o.texImage3D(32879,0,Ae,qe.width,qe.height,qe.depth,0,Gt,pn,qe.data);else if(se.isFramebufferTexture){if(kn)if(ei)o.texStorage2D(3553,li,Ae,qe.width,qe.height);else{let Zt=qe.width,ci=qe.height;for(let yr=0;yr<li;yr++)o.texImage2D(3553,yr,Ae,Zt,ci,0,Gt,pn,null),Zt>>=1,ci>>=1}}else if(Qt.length>0&&Xt){ei&&kn&&o.texStorage2D(3553,li,Ae,Qt[0].width,Qt[0].height);for(let Zt=0,ci=Qt.length;Zt<ci;Zt++)tn=Qt[Zt],ei?o.texSubImage2D(3553,Zt,0,0,Gt,pn,tn):o.texImage2D(3553,Zt,Ae,Gt,pn,tn);se.generateMipmaps=!1}else ei?(kn&&o.texStorage2D(3553,li,Ae,qe.width,qe.height),o.texSubImage2D(3553,0,0,0,Gt,pn,qe)):o.texImage2D(3553,0,Ae,Gt,pn,qe);I(se,Xt)&&N(_t),Pt.__currentVersion=Pt.version,se.onUpdate&&se.onUpdate(se)}de.__version=se.version}function Pe(de,se,rt,_t,Ut){const Pt=h.convert(rt.format,rt.encoding),Ft=h.convert(rt.type),qe=k(rt.internalFormat,Pt,Ft,rt.encoding);c.get(se).__hasExternalTextures||(32879===Ut||35866===Ut?o.texImage3D(Ut,0,qe,se.width,se.height,se.depth,0,Pt,Ft,null):o.texImage2D(Ut,0,qe,se.width,se.height,0,Pt,Ft,null)),o.bindFramebuffer(36160,de),Bt(se)?_.framebufferTexture2DMultisampleEXT(36160,_t,Ut,c.get(rt).__webglTexture,0,Ge(se)):l.framebufferTexture2D(36160,_t,Ut,c.get(rt).__webglTexture,0),o.bindFramebuffer(36160,null)}function Ze(de,se,rt){if(l.bindRenderbuffer(36161,de),se.depthBuffer&&!se.stencilBuffer){let _t=33189;if(rt||Bt(se)){const Ut=se.depthTexture;Ut&&Ut.isDepthTexture&&(Ut.type===Lf?_t=36012:Ut.type===Ag&&(_t=33190));const Pt=Ge(se);Bt(se)?_.renderbufferStorageMultisampleEXT(36161,Pt,_t,se.width,se.height):l.renderbufferStorageMultisample(36161,Pt,_t,se.width,se.height)}else l.renderbufferStorage(36161,_t,se.width,se.height);l.framebufferRenderbuffer(36160,36096,36161,de)}else if(se.depthBuffer&&se.stencilBuffer){const _t=Ge(se);rt&&!1===Bt(se)?l.renderbufferStorageMultisample(36161,_t,35056,se.width,se.height):Bt(se)?_.renderbufferStorageMultisampleEXT(36161,_t,35056,se.width,se.height):l.renderbufferStorage(36161,34041,se.width,se.height),l.framebufferRenderbuffer(36160,33306,36161,de)}else{const _t=!0===se.isWebGLMultipleRenderTargets?se.texture:[se.texture];for(let Ut=0;Ut<_t.length;Ut++){const Pt=_t[Ut],Ft=h.convert(Pt.format,Pt.encoding),qe=h.convert(Pt.type),Xt=k(Pt.internalFormat,Ft,qe,Pt.encoding),Gt=Ge(se);rt&&!1===Bt(se)?l.renderbufferStorageMultisample(36161,Gt,Xt,se.width,se.height):Bt(se)?_.renderbufferStorageMultisampleEXT(36161,Gt,Xt,se.width,se.height):l.renderbufferStorage(36161,Xt,se.width,se.height)}}l.bindRenderbuffer(36161,null)}function Fe(de){const se=c.get(de),rt=!0===de.isWebGLCubeRenderTarget;if(de.depthTexture&&!se.__autoAllocateDepthBuffer){if(rt)throw new Error("target.depthTexture not supported in Cube render targets");!function he(de,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(36160,de),!se.depthTexture||!se.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(se.depthTexture).__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),G(se.depthTexture,0);const _t=c.get(se.depthTexture).__webglTexture,Ut=Ge(se);if(se.depthTexture.format===Ig)Bt(se)?_.framebufferTexture2DMultisampleEXT(36160,36096,3553,_t,0,Ut):l.framebufferTexture2D(36160,36096,3553,_t,0);else{if(se.depthTexture.format!==jv)throw new Error("Unknown depthTexture format");Bt(se)?_.framebufferTexture2DMultisampleEXT(36160,33306,3553,_t,0,Ut):l.framebufferTexture2D(36160,33306,3553,_t,0)}}(se.__webglFramebuffer,de)}else if(rt){se.__webglDepthbuffer=[];for(let _t=0;_t<6;_t++)o.bindFramebuffer(36160,se.__webglFramebuffer[_t]),se.__webglDepthbuffer[_t]=l.createRenderbuffer(),Ze(se.__webglDepthbuffer[_t],de,!1)}else o.bindFramebuffer(36160,se.__webglFramebuffer),se.__webglDepthbuffer=l.createRenderbuffer(),Ze(se.__webglDepthbuffer,de,!1);o.bindFramebuffer(36160,null)}function Ge(de){return Math.min(v,de.samples)}function Bt(de){const se=c.get(de);return f&&de.samples>0&&!0===a.has("WEBGL_multisampled_render_to_texture")&&!1!==se.__useRenderToTexture}function In(de,se){const rt=de.encoding,_t=de.format,Ut=de.type;return!0===de.isCompressedTexture||!0===de.isVideoTexture||1035===de.format||rt!==Pg&&(rt===is?!1===f?!0===a.has("EXT_sRGB")&&_t===ou?(de.format=1035,de.minFilter=Us,de.generateMipmaps=!1):se=Die.sRGBToLinear(se):(_t!==ou||Ut!==kg)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",rt)),se}this.allocateTextureUnit=function H(){const de=z;return de>=p&&console.warn("THREE.WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+p),z+=1,de},this.resetTextureUnits=function W(){z=0},this.setTexture2D=G,this.setTexture2DArray=function K(de,se){const rt=c.get(de);de.version>0&&rt.__version!==de.version?We(rt,de,se):(o.activeTexture(33984+se),o.bindTexture(35866,rt.__webglTexture))},this.setTexture3D=function J(de,se){const rt=c.get(de);de.version>0&&rt.__version!==de.version?We(rt,de,se):(o.activeTexture(33984+se),o.bindTexture(32879,rt.__webglTexture))},this.setTextureCube=function ce(de,se){const rt=c.get(de);de.version>0&&rt.__version!==de.version?function ke(de,se,rt){if(6!==se.image.length)return;const _t=De(de,se),Ut=se.source;if(o.activeTexture(33984+rt),o.bindTexture(34067,de.__webglTexture),Ut.version!==Ut.__currentVersion||!0===_t){l.pixelStorei(37440,se.flipY),l.pixelStorei(37441,se.premultiplyAlpha),l.pixelStorei(3317,se.unpackAlignment),l.pixelStorei(37443,0);const Pt=se.isCompressedTexture||se.image[0].isCompressedTexture,Ft=se.image[0]&&se.image[0].isDataTexture,qe=[];for(let Zt=0;Zt<6;Zt++)qe[Zt]=Pt||Ft?Ft?se.image[Zt].image:se.image[Zt]:D(se.image[Zt],!1,!0,g),qe[Zt]=In(se,qe[Zt]);const Xt=qe[0],Gt=T(Xt)||f,pn=h.convert(se.format,se.encoding),Ae=h.convert(se.type),tn=k(se.internalFormat,pn,Ae,se.encoding),Qt=f&&!0!==se.isVideoTexture,ei=void 0===Ut.__currentVersion||!0===_t;let li,kn=F(se,Xt,Gt);if(ve(34067,se,Gt),Pt){Qt&&ei&&o.texStorage2D(34067,kn,tn,Xt.width,Xt.height);for(let Zt=0;Zt<6;Zt++){li=qe[Zt].mipmaps;for(let ci=0;ci<li.length;ci++){const yr=li[ci];se.format!==ou?null!==pn?Qt?o.compressedTexSubImage2D(34069+Zt,ci,0,0,yr.width,yr.height,pn,yr.data):o.compressedTexImage2D(34069+Zt,ci,tn,yr.width,yr.height,0,yr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Qt?o.texSubImage2D(34069+Zt,ci,0,0,yr.width,yr.height,pn,Ae,yr.data):o.texImage2D(34069+Zt,ci,tn,yr.width,yr.height,0,pn,Ae,yr.data)}}}else{li=se.mipmaps,Qt&&ei&&(li.length>0&&kn++,o.texStorage2D(34067,kn,tn,qe[0].width,qe[0].height));for(let Zt=0;Zt<6;Zt++)if(Ft){Qt?o.texSubImage2D(34069+Zt,0,0,0,qe[Zt].width,qe[Zt].height,pn,Ae,qe[Zt].data):o.texImage2D(34069+Zt,0,tn,qe[Zt].width,qe[Zt].height,0,pn,Ae,qe[Zt].data);for(let ci=0;ci<li.length;ci++){const br=li[ci].image[Zt].image;Qt?o.texSubImage2D(34069+Zt,ci+1,0,0,br.width,br.height,pn,Ae,br.data):o.texImage2D(34069+Zt,ci+1,tn,br.width,br.height,0,pn,Ae,br.data)}}else{Qt?o.texSubImage2D(34069+Zt,0,0,0,pn,Ae,qe[Zt]):o.texImage2D(34069+Zt,0,tn,pn,Ae,qe[Zt]);for(let ci=0;ci<li.length;ci++){const yr=li[ci];Qt?o.texSubImage2D(34069+Zt,ci+1,0,0,pn,Ae,yr.image[Zt]):o.texImage2D(34069+Zt,ci+1,tn,pn,Ae,yr.image[Zt])}}}I(se,Gt)&&N(34067),Ut.__currentVersion=Ut.version,se.onUpdate&&se.onUpdate(se)}de.__version=se.version}(rt,de,se):(o.activeTexture(33984+se),o.bindTexture(34067,rt.__webglTexture))},this.rebindTextures=function Ke(de,se,rt){const _t=c.get(de);void 0!==se&&Pe(_t.__webglFramebuffer,de,de.texture,36064,3553),void 0!==rt&&Fe(de)},this.setupRenderTarget=function nt(de){const se=de.texture,rt=c.get(de),_t=c.get(se);de.addEventListener("dispose",$),!0!==de.isWebGLMultipleRenderTargets&&(void 0===_t.__webglTexture&&(_t.__webglTexture=l.createTexture()),_t.__version=se.version,d.memory.textures++);const Ut=!0===de.isWebGLCubeRenderTarget,Pt=!0===de.isWebGLMultipleRenderTargets,Ft=T(de)||f;if(Ut){rt.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)rt.__webglFramebuffer[qe]=l.createFramebuffer()}else{if(rt.__webglFramebuffer=l.createFramebuffer(),Pt)if(u.drawBuffers){const qe=de.texture;for(let Xt=0,Gt=qe.length;Xt<Gt;Xt++){const pn=c.get(qe[Xt]);void 0===pn.__webglTexture&&(pn.__webglTexture=l.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(f&&de.samples>0&&!1===Bt(de)){const qe=Pt?se:[se];rt.__webglMultisampledFramebuffer=l.createFramebuffer(),rt.__webglColorRenderbuffer=[],o.bindFramebuffer(36160,rt.__webglMultisampledFramebuffer);for(let Xt=0;Xt<qe.length;Xt++){const Gt=qe[Xt];rt.__webglColorRenderbuffer[Xt]=l.createRenderbuffer(),l.bindRenderbuffer(36161,rt.__webglColorRenderbuffer[Xt]);const pn=h.convert(Gt.format,Gt.encoding),Ae=h.convert(Gt.type),tn=k(Gt.internalFormat,pn,Ae,Gt.encoding),Qt=Ge(de);l.renderbufferStorageMultisample(36161,Qt,tn,de.width,de.height),l.framebufferRenderbuffer(36160,36064+Xt,36161,rt.__webglColorRenderbuffer[Xt])}l.bindRenderbuffer(36161,null),de.depthBuffer&&(rt.__webglDepthRenderbuffer=l.createRenderbuffer(),Ze(rt.__webglDepthRenderbuffer,de,!0)),o.bindFramebuffer(36160,null)}}if(Ut){o.bindTexture(34067,_t.__webglTexture),ve(34067,se,Ft);for(let qe=0;qe<6;qe++)Pe(rt.__webglFramebuffer[qe],de,se,36064,34069+qe);I(se,Ft)&&N(34067),o.unbindTexture()}else if(Pt){const qe=de.texture;for(let Xt=0,Gt=qe.length;Xt<Gt;Xt++){const pn=qe[Xt],Ae=c.get(pn);o.bindTexture(3553,Ae.__webglTexture),ve(3553,pn,Ft),Pe(rt.__webglFramebuffer,de,pn,36064+Xt,3553),I(pn,Ft)&&N(3553)}o.unbindTexture()}else{let qe=3553;(de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(f?qe=de.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),o.bindTexture(qe,_t.__webglTexture),ve(qe,se,Ft),Pe(rt.__webglFramebuffer,de,se,36064,qe),I(se,Ft)&&N(qe),o.unbindTexture()}de.depthBuffer&&Fe(de)},this.updateRenderTargetMipmap=function $e(de){const se=T(de)||f,rt=!0===de.isWebGLMultipleRenderTargets?de.texture:[de.texture];for(let _t=0,Ut=rt.length;_t<Ut;_t++){const Pt=rt[_t];if(I(Pt,se)){const Ft=de.isWebGLCubeRenderTarget?34067:3553,qe=c.get(Pt).__webglTexture;o.bindTexture(Ft,qe),N(Ft),o.unbindTexture()}}},this.updateMultisampleRenderTarget=function Se(de){if(f&&de.samples>0&&!1===Bt(de)){const se=de.isWebGLMultipleRenderTargets?de.texture:[de.texture],rt=de.width,_t=de.height;let Ut=16384;const Pt=[],Ft=de.stencilBuffer?33306:36096,qe=c.get(de),Xt=!0===de.isWebGLMultipleRenderTargets;if(Xt)for(let Gt=0;Gt<se.length;Gt++)o.bindFramebuffer(36160,qe.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+Gt,36161,null),o.bindFramebuffer(36160,qe.__webglFramebuffer),l.framebufferTexture2D(36009,36064+Gt,3553,null,0);o.bindFramebuffer(36008,qe.__webglMultisampledFramebuffer),o.bindFramebuffer(36009,qe.__webglFramebuffer);for(let Gt=0;Gt<se.length;Gt++){Pt.push(36064+Gt),de.depthBuffer&&Pt.push(Ft);const pn=void 0!==qe.__ignoreDepthValues&&qe.__ignoreDepthValues;if(!1===pn&&(de.depthBuffer&&(Ut|=256),de.stencilBuffer&&(Ut|=1024)),Xt&&l.framebufferRenderbuffer(36008,36064,36161,qe.__webglColorRenderbuffer[Gt]),!0===pn&&(l.invalidateFramebuffer(36008,[Ft]),l.invalidateFramebuffer(36009,[Ft])),Xt){const Ae=c.get(se[Gt]).__webglTexture;l.framebufferTexture2D(36009,36064,3553,Ae,0)}l.blitFramebuffer(0,0,rt,_t,0,0,rt,_t,Ut,9728),y&&l.invalidateFramebuffer(36008,Pt)}if(o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,null),Xt)for(let Gt=0;Gt<se.length;Gt++){o.bindFramebuffer(36160,qe.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+Gt,36161,qe.__webglColorRenderbuffer[Gt]);const pn=c.get(se[Gt]).__webglTexture;o.bindFramebuffer(36160,qe.__webglFramebuffer),l.framebufferTexture2D(36009,36064+Gt,3553,pn,0)}o.bindFramebuffer(36009,qe.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Fe,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=Bt}function sqe(l,a,o){const c=o.isWebGL2;return{convert:function u(h,d=null){let f;if(h===kg)return 5121;if(1017===h)return 32819;if(1018===h)return 32820;if(1010===h)return 5120;if(1011===h)return 5122;if(1012===h)return 5123;if(1013===h)return 5124;if(h===Ag)return 5125;if(h===Lf)return 5126;if(h===wC)return c?5131:(f=a.get("OES_texture_half_float"),null!==f?f.HALF_FLOAT_OES:null);if(1021===h)return 6406;if(h===ou)return 6408;if(1024===h)return 6409;if(1025===h)return 6410;if(h===Ig)return 6402;if(h===jv)return 34041;if(1028===h)return 6403;if(1022===h)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===h)return f=a.get("EXT_sRGB"),null!==f?f.SRGB_ALPHA_EXT:null;if(1029===h)return 36244;if(1030===h)return 33319;if(1031===h)return 33320;if(1033===h)return 36249;if(33776===h||33777===h||33778===h||33779===h)if(d===is){if(f=a.get("WEBGL_compressed_texture_s3tc_srgb"),null===f)return null;if(33776===h)return f.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===h)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===h)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===h)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(f=a.get("WEBGL_compressed_texture_s3tc"),null===f)return null;if(33776===h)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===h)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===h)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===h)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===h||35841===h||35842===h||35843===h){if(f=a.get("WEBGL_compressed_texture_pvrtc"),null===f)return null;if(35840===h)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===h)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===h)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===h)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===h)return f=a.get("WEBGL_compressed_texture_etc1"),null!==f?f.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===h||37496===h){if(f=a.get("WEBGL_compressed_texture_etc"),null===f)return null;if(37492===h)return d===is?f.COMPRESSED_SRGB8_ETC2:f.COMPRESSED_RGB8_ETC2;if(37496===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:f.COMPRESSED_RGBA8_ETC2_EAC}if(37808===h||37809===h||37810===h||37811===h||37812===h||37813===h||37814===h||37815===h||37816===h||37817===h||37818===h||37819===h||37820===h||37821===h){if(f=a.get("WEBGL_compressed_texture_astc"),null===f)return null;if(37808===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:f.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:f.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:f.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:f.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:f.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:f.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:f.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:f.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:f.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:f.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:f.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:f.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:f.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===h)return d===is?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:f.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===h){if(f=a.get("EXT_texture_compression_bptc"),null===f)return null;if(36492===h)return d===is?f.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:f.COMPRESSED_RGBA_BPTC_UNORM_EXT}return h===Gv?c?34042:(f=a.get("WEBGL_depth_texture"),null!==f?f.UNSIGNED_INT_24_8_WEBGL:null):void 0!==l[h]?l[h]:null}}}class oqe extends Ws{constructor(a=[]){super(),this.isArrayCamera=!0,this.cameras=a}}class __ extends Bl{constructor(){super(),this.isGroup=!0,this.type="Group"}}const aqe={type:"move"};class L5{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new __,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new __,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new __,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(a){return null!==this._targetRay&&this._targetRay.dispatchEvent(a),null!==this._grip&&this._grip.dispatchEvent(a),null!==this._hand&&this._hand.dispatchEvent(a),this}disconnect(a){return this.dispatchEvent({type:"disconnected",data:a}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(a,o,c){let u=null,h=null,d=null;const f=this._targetRay,p=this._grip,g=this._hand;if(a&&"visible-blurred"!==o.session.visibilityState){if(g&&a.hand){d=!0;for(const x of a.hand.values()){const C=o.getJointPose(x,c);if(void 0===g.joints[x.jointName]){const S=new __;S.matrixAutoUpdate=!1,S.visible=!1,g.joints[x.jointName]=S,g.add(S)}const w=g.joints[x.jointName];null!==C&&(w.matrix.fromArray(C.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.jointRadius=C.radius),w.visible=null!==C}const _=g.joints["index-finger-tip"].position.distanceTo(g.joints["thumb-tip"].position),y=.02,b=.005;g.inputState.pinching&&_>y+b?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!g.inputState.pinching&&_<=y-b&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else null!==p&&a.gripSpace&&(h=o.getPose(a.gripSpace,c),null!==h&&(p.matrix.fromArray(h.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),h.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(h.linearVelocity)):p.hasLinearVelocity=!1,h.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(h.angularVelocity)):p.hasAngularVelocity=!1));null!==f&&(u=o.getPose(a.targetRaySpace,c),null===u&&null!==h&&(u=h),null!==u&&(f.matrix.fromArray(u.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),u.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(u.linearVelocity)):f.hasLinearVelocity=!1,u.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(u.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(aqe)))}return null!==f&&(f.visible=null!==u),null!==p&&(p.visible=null!==h),null!==g&&(g.visible=null!==d),this}}class lqe extends oh{constructor(a,o,c,u,h,d,f,p,g,m){if((m=void 0!==m?m:Ig)!==Ig&&m!==jv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&m===Ig&&(c=Ag),void 0===c&&m===jv&&(c=Gv),super(null,u,h,d,f,p,m,c,g),this.isDepthTexture=!0,this.image={width:a,height:o},this.magFilter=void 0!==f?f:oo,this.minFilter=void 0!==p?p:oo,this.flipY=!1,this.generateMipmaps=!1}}class cqe extends Xv{constructor(a,o){super();const c=this;let u=null,h=1,d=null,f="local-floor",p=null,g=null,m=null,v=null,_=null,y=null;const b=o.getContextAttributes();let x=null,C=null;const w=[],S=[],D=new Ws;D.layers.enable(1),D.viewport=new ji;const T=new Ws;T.layers.enable(2),T.viewport=new ji;const A=[D,T],I=new oqe;I.layers.enable(1),I.layers.enable(2);let N=null,k=null;function F(j){const G=S.indexOf(j.inputSource);if(-1===G)return;const K=w[G];void 0!==K&&K.dispatchEvent({type:j.type,data:j.inputSource})}function B(){u.removeEventListener("select",F),u.removeEventListener("selectstart",F),u.removeEventListener("selectend",F),u.removeEventListener("squeeze",F),u.removeEventListener("squeezestart",F),u.removeEventListener("squeezeend",F),u.removeEventListener("end",B),u.removeEventListener("inputsourceschange",V);for(let j=0;j<w.length;j++){const G=S[j];null!==G&&(S[j]=null,w[j].disconnect(G))}N=null,k=null,a.setRenderTarget(x),_=null,v=null,m=null,u=null,C=null,H.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function V(j){for(let G=0;G<j.removed.length;G++){const K=j.removed[G],J=S.indexOf(K);J>=0&&(S[J]=null,w[J].dispatchEvent({type:"disconnected",data:K}))}for(let G=0;G<j.added.length;G++){const K=j.added[G];let J=S.indexOf(K);if(-1===J){for(let oe=0;oe<w.length;oe++){if(oe>=S.length){S.push(K),J=oe;break}if(null===S[oe]){S[oe]=K,J=oe;break}}if(-1===J)break}const ce=w[J];ce&&ce.dispatchEvent({type:"connected",data:K})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let G=w[j];return void 0===G&&(G=new L5,w[j]=G),G.getTargetRaySpace()},this.getControllerGrip=function(j){let G=w[j];return void 0===G&&(G=new L5,w[j]=G),G.getGripSpace()},this.getHand=function(j){let G=w[j];return void 0===G&&(G=new L5,w[j]=G),G.getHandSpace()},this.setFramebufferScaleFactor=function(j){h=j,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){f=j,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||d},this.setReferenceSpace=function(j){p=j},this.getBaseLayer=function(){return null!==v?v:_},this.getBinding=function(){return m},this.getFrame=function(){return y},this.getSession=function(){return u},this.setSession=function(){var j=Aj(function*(G){if(u=G,null!==u){if(x=a.getRenderTarget(),u.addEventListener("select",F),u.addEventListener("selectstart",F),u.addEventListener("selectend",F),u.addEventListener("squeeze",F),u.addEventListener("squeezestart",F),u.addEventListener("squeezeend",F),u.addEventListener("end",B),u.addEventListener("inputsourceschange",V),!0!==b.xrCompatible&&(yield o.makeXRCompatible()),void 0===u.renderState.layers||!1===a.capabilities.isWebGL2)_=new XRWebGLLayer(u,o,{antialias:void 0!==u.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:h}),u.updateRenderState({baseLayer:_}),C=new Ma(_.framebufferWidth,_.framebufferHeight,{format:ou,type:kg,encoding:a.outputEncoding});else{let K=null,J=null,ce=null;b.depth&&(ce=b.stencil?35056:33190,K=b.stencil?jv:Ig,J=b.stencil?Gv:Ag);const oe={colorFormat:32856,depthFormat:ce,scaleFactor:h};m=new XRWebGLBinding(u,o),v=m.createProjectionLayer(oe),u.updateRenderState({layers:[v]}),C=new Ma(v.textureWidth,v.textureHeight,{format:ou,type:kg,depthTexture:new lqe(v.textureWidth,v.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,K),stencilBuffer:b.stencil,encoding:a.outputEncoding,samples:b.antialias?4:0}),a.properties.get(C).__ignoreDepthValues=v.ignoreDepthValues}C.isXRRenderTarget=!0,this.setFoveation(1),p=null,d=yield u.requestReferenceSpace(f),H.setContext(u),H.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}});return function(G){return j.apply(this,arguments)}}();const $=new te,q=new te;function U(j,G){null===G?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(G.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(null===u)return;I.near=T.near=D.near=j.near,I.far=T.far=D.far=j.far,(N!==I.near||k!==I.far)&&(u.updateRenderState({depthNear:I.near,depthFar:I.far}),N=I.near,k=I.far);const G=j.parent,K=I.cameras;U(I,G);for(let ce=0;ce<K.length;ce++)U(K[ce],G);I.matrixWorld.decompose(I.position,I.quaternion,I.scale),j.position.copy(I.position),j.quaternion.copy(I.quaternion),j.scale.copy(I.scale),j.matrix.copy(I.matrix),j.matrixWorld.copy(I.matrixWorld);const J=j.children;for(let ce=0,oe=J.length;ce<oe;ce++)J[ce].updateMatrixWorld(!0);2===K.length?function L(j,G,K){$.setFromMatrixPosition(G.matrixWorld),q.setFromMatrixPosition(K.matrixWorld);const J=$.distanceTo(q),ce=G.projectionMatrix.elements,oe=K.projectionMatrix.elements,xe=ce[14]/(ce[10]-1),ve=ce[14]/(ce[10]+1),De=(ce[9]+1)/ce[5],We=(ce[9]-1)/ce[5],ke=(ce[8]-1)/ce[0],Pe=(oe[8]+1)/oe[0],Ze=xe*ke,he=xe*Pe,Fe=J/(-ke+Pe),Ke=Fe*-ke;G.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(Ke),j.translateZ(Fe),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();const nt=xe+Fe,$e=ve+Fe;j.projectionMatrix.makePerspective(Ze-Ke,he+(J-Ke),De*ve/$e*nt,We*ve/$e*nt,nt,$e)}(I,D,T):I.projectionMatrix.copy(D.projectionMatrix)},this.getCamera=function(){return I},this.getFoveation=function(){return null!==v?v.fixedFoveation:null!==_?_.fixedFoveation:void 0},this.setFoveation=function(j){null!==v&&(v.fixedFoveation=j),null!==_&&void 0!==_.fixedFoveation&&(_.fixedFoveation=j)};let z=null;const H=new Uie;H.setAnimationLoop(function W(j,G){if(g=G.getViewerPose(p||d),y=G,null!==g){const K=g.views;null!==_&&(a.setRenderTargetFramebuffer(C,_.framebuffer),a.setRenderTarget(C));let J=!1;K.length!==I.cameras.length&&(I.cameras.length=0,J=!0);for(let ce=0;ce<K.length;ce++){const oe=K[ce];let xe=null;if(null!==_)xe=_.getViewport(oe);else{const De=m.getViewSubImage(v,oe);xe=De.viewport,0===ce&&(a.setRenderTargetTextures(C,De.colorTexture,v.ignoreDepthValues?void 0:De.depthStencilTexture),a.setRenderTarget(C))}let ve=A[ce];void 0===ve&&(ve=new Ws,ve.layers.enable(ce),ve.viewport=new ji,A[ce]=ve),ve.matrix.fromArray(oe.transform.matrix),ve.projectionMatrix.fromArray(oe.projectionMatrix),ve.viewport.set(xe.x,xe.y,xe.width,xe.height),0===ce&&I.matrix.copy(ve.matrix),!0===J&&I.cameras.push(ve)}}for(let K=0;K<w.length;K++){const J=S[K],ce=w[K];null!==J&&void 0!==ce&&ce.update(J,G,p||d)}z&&z(j,G),y=null}),this.setAnimationLoop=function(j){z=j},this.dispose=function(){}}}function uqe(l,a){function u(x,C){x.opacity.value=C.opacity,C.color&&x.diffuse.value.copy(C.color),C.emissive&&x.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity),C.map&&(x.map.value=C.map),C.alphaMap&&(x.alphaMap.value=C.alphaMap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=-1)),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.specularMap&&(x.specularMap.value=C.specularMap),C.alphaTest>0&&(x.alphaTest.value=C.alphaTest);const w=a.get(C).envMap;if(w&&(x.envMap.value=w,x.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,x.reflectivity.value=C.reflectivity,x.ior.value=C.ior,x.refractionRatio.value=C.refractionRatio),C.lightMap){x.lightMap.value=C.lightMap;const T=!0!==l.physicallyCorrectLights?Math.PI:1;x.lightMapIntensity.value=C.lightMapIntensity*T}let S,D;C.aoMap&&(x.aoMap.value=C.aoMap,x.aoMapIntensity.value=C.aoMapIntensity),C.map?S=C.map:C.specularMap?S=C.specularMap:C.displacementMap?S=C.displacementMap:C.normalMap?S=C.normalMap:C.bumpMap?S=C.bumpMap:C.roughnessMap?S=C.roughnessMap:C.metalnessMap?S=C.metalnessMap:C.alphaMap?S=C.alphaMap:C.emissiveMap?S=C.emissiveMap:C.clearcoatMap?S=C.clearcoatMap:C.clearcoatNormalMap?S=C.clearcoatNormalMap:C.clearcoatRoughnessMap?S=C.clearcoatRoughnessMap:C.iridescenceMap?S=C.iridescenceMap:C.iridescenceThicknessMap?S=C.iridescenceThicknessMap:C.specularIntensityMap?S=C.specularIntensityMap:C.specularColorMap?S=C.specularColorMap:C.transmissionMap?S=C.transmissionMap:C.thicknessMap?S=C.thicknessMap:C.sheenColorMap?S=C.sheenColorMap:C.sheenRoughnessMap&&(S=C.sheenRoughnessMap),void 0!==S&&(S.isWebGLRenderTarget&&(S=S.texture),!0===S.matrixAutoUpdate&&S.updateMatrix(),x.uvTransform.value.copy(S.matrix)),C.aoMap?D=C.aoMap:C.lightMap&&(D=C.lightMap),void 0!==D&&(D.isWebGLRenderTarget&&(D=D.texture),!0===D.matrixAutoUpdate&&D.updateMatrix(),x.uv2Transform.value.copy(D.matrix))}return{refreshFogUniforms:function o(x,C){x.fogColor.value.copy(C.color),C.isFog?(x.fogNear.value=C.near,x.fogFar.value=C.far):C.isFogExp2&&(x.fogDensity.value=C.density)},refreshMaterialUniforms:function c(x,C,w,S,D){C.isMeshBasicMaterial||C.isMeshLambertMaterial?u(x,C):C.isMeshToonMaterial?(u(x,C),function m(x,C){C.gradientMap&&(x.gradientMap.value=C.gradientMap)}(x,C)):C.isMeshPhongMaterial?(u(x,C),function g(x,C){x.specular.value.copy(C.specular),x.shininess.value=Math.max(C.shininess,1e-4)}(x,C)):C.isMeshStandardMaterial?(u(x,C),function v(x,C){x.roughness.value=C.roughness,x.metalness.value=C.metalness,C.roughnessMap&&(x.roughnessMap.value=C.roughnessMap),C.metalnessMap&&(x.metalnessMap.value=C.metalnessMap),a.get(C).envMap&&(x.envMapIntensity.value=C.envMapIntensity)}(x,C),C.isMeshPhysicalMaterial&&function _(x,C,w){x.ior.value=C.ior,C.sheen>0&&(x.sheenColor.value.copy(C.sheenColor).multiplyScalar(C.sheen),x.sheenRoughness.value=C.sheenRoughness,C.sheenColorMap&&(x.sheenColorMap.value=C.sheenColorMap),C.sheenRoughnessMap&&(x.sheenRoughnessMap.value=C.sheenRoughnessMap)),C.clearcoat>0&&(x.clearcoat.value=C.clearcoat,x.clearcoatRoughness.value=C.clearcoatRoughness,C.clearcoatMap&&(x.clearcoatMap.value=C.clearcoatMap),C.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap),C.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),x.clearcoatNormalMap.value=C.clearcoatNormalMap,1===C.side&&x.clearcoatNormalScale.value.negate())),C.iridescence>0&&(x.iridescence.value=C.iridescence,x.iridescenceIOR.value=C.iridescenceIOR,x.iridescenceThicknessMinimum.value=C.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=C.iridescenceThicknessRange[1],C.iridescenceMap&&(x.iridescenceMap.value=C.iridescenceMap),C.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=C.iridescenceThicknessMap)),C.transmission>0&&(x.transmission.value=C.transmission,x.transmissionSamplerMap.value=w.texture,x.transmissionSamplerSize.value.set(w.width,w.height),C.transmissionMap&&(x.transmissionMap.value=C.transmissionMap),x.thickness.value=C.thickness,C.thicknessMap&&(x.thicknessMap.value=C.thicknessMap),x.attenuationDistance.value=C.attenuationDistance,x.attenuationColor.value.copy(C.attenuationColor)),x.specularIntensity.value=C.specularIntensity,x.specularColor.value.copy(C.specularColor),C.specularIntensityMap&&(x.specularIntensityMap.value=C.specularIntensityMap),C.specularColorMap&&(x.specularColorMap.value=C.specularColorMap)}(x,C,D)):C.isMeshMatcapMaterial?(u(x,C),function y(x,C){C.matcap&&(x.matcap.value=C.matcap)}(x,C)):C.isMeshDepthMaterial?u(x,C):C.isMeshDistanceMaterial?(u(x,C),function b(x,C){x.referencePosition.value.copy(C.referencePosition),x.nearDistance.value=C.nearDistance,x.farDistance.value=C.farDistance}(x,C)):C.isMeshNormalMaterial?u(x,C):C.isLineBasicMaterial?(function h(x,C){x.diffuse.value.copy(C.color),x.opacity.value=C.opacity}(x,C),C.isLineDashedMaterial&&function d(x,C){x.dashSize.value=C.dashSize,x.totalSize.value=C.dashSize+C.gapSize,x.scale.value=C.scale}(x,C)):C.isPointsMaterial?function f(x,C,w,S){let D;x.diffuse.value.copy(C.color),x.opacity.value=C.opacity,x.size.value=C.size*w,x.scale.value=.5*S,C.map&&(x.map.value=C.map),C.alphaMap&&(x.alphaMap.value=C.alphaMap),C.alphaTest>0&&(x.alphaTest.value=C.alphaTest),C.map?D=C.map:C.alphaMap&&(D=C.alphaMap),void 0!==D&&(!0===D.matrixAutoUpdate&&D.updateMatrix(),x.uvTransform.value.copy(D.matrix))}(x,C,w,S):C.isSpriteMaterial?function p(x,C){let w;x.diffuse.value.copy(C.color),x.opacity.value=C.opacity,x.rotation.value=C.rotation,C.map&&(x.map.value=C.map),C.alphaMap&&(x.alphaMap.value=C.alphaMap),C.alphaTest>0&&(x.alphaTest.value=C.alphaTest),C.map?w=C.map:C.alphaMap&&(w=C.alphaMap),void 0!==w&&(!0===w.matrixAutoUpdate&&w.updateMatrix(),x.uvTransform.value.copy(w.matrix))}(x,C):C.isShadowMaterial?(x.color.value.copy(C.color),x.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}}}function mre(l={}){this.isWebGLRenderer=!0;const a=void 0!==l.canvas?l.canvas:function hqe(){const l=DC("canvas");return l.style.display="block",l}(),o=void 0!==l.context?l.context:null,c=void 0===l.depth||l.depth,u=void 0===l.stencil||l.stencil,h=void 0!==l.antialias&&l.antialias,d=void 0===l.premultipliedAlpha||l.premultipliedAlpha,f=void 0!==l.preserveDrawingBuffer&&l.preserveDrawingBuffer,p=void 0!==l.powerPreference?l.powerPreference:"default",g=void 0!==l.failIfMajorPerformanceCaveat&&l.failIfMajorPerformanceCaveat;let m;m=null!==o?o.getContextAttributes().alpha:void 0!==l.alpha&&l.alpha;let v=null,_=null;const y=[],b=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Pg,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const x=this;let C=!1,w=0,S=0,D=null,T=-1,A=null;const I=new ji,N=new ji;let k=null,F=a.width,B=a.height,V=1,$=null,q=null;const L=new ji(0,0,F,B),U=new ji(0,0,F,B);let z=!1;const W=new k5;let H=!1,j=!1,G=null;const K=new ii,J=new ht,ce=new te,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xe(){return null===D?V:1}let We,ke,Pe,Ze,he,Fe,Ke,nt,$e,Se,Ge,Bt,vn,In,de,se,rt,_t,Ut,Pt,Ft,qe,Xt,ve=o;function De(fe,tt){for(let ft=0;ft<fe.length;ft++){const Et=a.getContext(fe[ft],tt);if(null!==Et)return Et}return null}try{const fe={alpha:!0,depth:c,stencil:u,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in a&&a.setAttribute("data-engine","three.js r142"),a.addEventListener("webglcontextlost",Ae,!1),a.addEventListener("webglcontextrestored",tn,!1),a.addEventListener("webglcontextcreationerror",Qt,!1),null===ve){const tt=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&tt.shift(),ve=De(tt,fe),null===ve)throw De(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(fe){throw console.error("THREE.WebGLRenderer: "+fe.message),fe}function Gt(){We=new Sje(ve),ke=new _je(ve,We,l),We.init(ke),qe=new sqe(ve,We,ke),Pe=new iqe(ve,We,ke),Ze=new Mje,he=new j$e,Fe=new rqe(ve,We,Pe,he,ke,qe,Ze),Ke=new bje(x),nt=new wje(x),$e=new vWe(ve,ke),Xt=new mje(ve,We,$e,ke),Se=new Tje(ve,$e,Ze,Xt),Ge=new Ije(ve,Se,$e,Ze),Ut=new Aje(ve,ke,Fe),se=new yje(he),Bt=new G$e(x,Ke,nt,We,ke,Xt,se),vn=new uqe(x,he),In=new q$e,de=new J$e(We,ke),_t=new gje(x,Ke,Pe,Ge,m,d),rt=new nqe(x,Ge,ke),Pt=new vje(ve,We,Ze,ke),Ft=new Dje(ve,We,Ze,ke),Ze.programs=Bt.programs,x.capabilities=ke,x.extensions=We,x.properties=he,x.renderLists=In,x.shadowMap=rt,x.state=Pe,x.info=Ze}Gt();const pn=new cqe(x,ve);function Ae(fe){fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function tn(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const fe=Ze.autoReset,tt=rt.enabled,ft=rt.autoUpdate,lt=rt.needsUpdate,Et=rt.type;Gt(),Ze.autoReset=fe,rt.enabled=tt,rt.autoUpdate=ft,rt.needsUpdate=lt,rt.type=Et}function Qt(fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",fe.statusMessage)}function ei(fe){const tt=fe.target;tt.removeEventListener("dispose",ei),function kn(fe){(function li(fe){const tt=he.get(fe).programs;void 0!==tt&&(tt.forEach(function(ft){Bt.releaseProgram(ft)}),fe.isShaderMaterial&&Bt.releaseShaderCache(fe))})(fe),he.remove(fe)}(tt)}this.xr=pn,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const fe=We.get("WEBGL_lose_context");fe&&fe.loseContext()},this.forceContextRestore=function(){const fe=We.get("WEBGL_lose_context");fe&&fe.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(fe){void 0!==fe&&(V=fe,this.setSize(F,B,!1))},this.getSize=function(fe){return fe.set(F,B)},this.setSize=function(fe,tt,ft){pn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(F=fe,B=tt,a.width=Math.floor(fe*V),a.height=Math.floor(tt*V),!1!==ft&&(a.style.width=fe+"px",a.style.height=tt+"px"),this.setViewport(0,0,fe,tt))},this.getDrawingBufferSize=function(fe){return fe.set(F*V,B*V).floor()},this.setDrawingBufferSize=function(fe,tt,ft){F=fe,B=tt,V=ft,a.width=Math.floor(fe*ft),a.height=Math.floor(tt*ft),this.setViewport(0,0,fe,tt)},this.getCurrentViewport=function(fe){return fe.copy(I)},this.getViewport=function(fe){return fe.copy(L)},this.setViewport=function(fe,tt,ft,lt){fe.isVector4?L.set(fe.x,fe.y,fe.z,fe.w):L.set(fe,tt,ft,lt),Pe.viewport(I.copy(L).multiplyScalar(V).floor())},this.getScissor=function(fe){return fe.copy(U)},this.setScissor=function(fe,tt,ft,lt){fe.isVector4?U.set(fe.x,fe.y,fe.z,fe.w):U.set(fe,tt,ft,lt),Pe.scissor(N.copy(U).multiplyScalar(V).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(fe){Pe.setScissorTest(z=fe)},this.setOpaqueSort=function(fe){$=fe},this.setTransparentSort=function(fe){q=fe},this.getClearColor=function(fe){return fe.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor.apply(_t,arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha.apply(_t,arguments)},this.clear=function(fe=!0,tt=!0,ft=!0){let lt=0;fe&&(lt|=16384),tt&&(lt|=256),ft&&(lt|=1024),ve.clear(lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",Ae,!1),a.removeEventListener("webglcontextrestored",tn,!1),a.removeEventListener("webglcontextcreationerror",Qt,!1),In.dispose(),de.dispose(),he.dispose(),Ke.dispose(),nt.dispose(),Ge.dispose(),Xt.dispose(),Bt.dispose(),pn.dispose(),pn.removeEventListener("sessionstart",yr),pn.removeEventListener("sessionend",br),G&&(G.dispose(),G=null),Ia.stop()},this.renderBufferDirect=function(fe,tt,ft,lt,Et,ri){null===tt&&(tt=oe);const Si=Et.isMesh&&Et.matrixWorld.determinant()<0,Bi=function rnt(fe,tt,ft,lt,Et){!0!==tt.isScene&&(tt=oe),Fe.resetTextureUnits();const ri=tt.fog,Bi=null===D?x.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:Pg,Fi=(lt.isMeshStandardMaterial?nt:Ke).get(lt.envMap||(lt.isMeshStandardMaterial?tt.environment:null)),Cr=!0===lt.vertexColors&&!!ft.attributes.color&&4===ft.attributes.color.itemSize,Qi=!!lt.normalMap&&!!ft.attributes.tangent,ir=!!ft.morphAttributes.position,Cs=!!ft.morphAttributes.normal,im=!!ft.morphAttributes.color,z_=lt.toneMapped?x.toneMapping:0,U_=ft.morphAttributes.position||ft.morphAttributes.normal||ft.morphAttributes.color,vh=void 0!==U_?U_.length:0,dr=he.get(lt),H_=_.state.lights;!0!==H||!0!==j&&fe===A||se.setState(lt,fe,fe===A&&lt.id===T);let js=!1;lt.version===dr.__version?(dr.needsLights&&dr.lightsStateVersion!==H_.state.version||dr.outputEncoding!==Bi||Et.isInstancedMesh&&!1===dr.instancing||!Et.isInstancedMesh&&!0===dr.instancing||Et.isSkinnedMesh&&!1===dr.skinning||!Et.isSkinnedMesh&&!0===dr.skinning||dr.envMap!==Fi||!0===lt.fog&&dr.fog!==ri||void 0!==dr.numClippingPlanes&&(dr.numClippingPlanes!==se.numPlanes||dr.numIntersection!==se.numIntersection)||dr.vertexAlphas!==Cr||dr.vertexTangents!==Qi||dr.morphTargets!==ir||dr.morphNormals!==Cs||dr.morphColors!==im||dr.toneMapping!==z_||!0===ke.isWebGL2&&dr.morphTargetsCount!==vh)&&(js=!0):(js=!0,dr.__version=lt.version);let _h=dr.currentProgram;!0===js&&(_h=CV(lt,tt,Et));let ip=!1,cx=!1,xV=!1;const Pa=_h.getUniforms(),ux=dr.uniforms;if(Pe.useProgram(_h.program)&&(ip=!0,cx=!0,xV=!0),lt.id!==T&&(T=lt.id,cx=!0),ip||A!==fe){if(Pa.setValue(ve,"projectionMatrix",fe.projectionMatrix),ke.logarithmicDepthBuffer&&Pa.setValue(ve,"logDepthBufFC",2/(Math.log(fe.far+1)/Math.LN2)),A!==fe&&(A=fe,cx=!0,xV=!0),lt.isShaderMaterial||lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshStandardMaterial||lt.envMap){const yh=Pa.map.cameraPosition;void 0!==yh&&yh.setValue(ve,ce.setFromMatrixPosition(fe.matrixWorld))}(lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshLambertMaterial||lt.isMeshBasicMaterial||lt.isMeshStandardMaterial||lt.isShaderMaterial)&&Pa.setValue(ve,"isOrthographic",!0===fe.isOrthographicCamera),(lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshLambertMaterial||lt.isMeshBasicMaterial||lt.isMeshStandardMaterial||lt.isShaderMaterial||lt.isShadowMaterial||Et.isSkinnedMesh)&&Pa.setValue(ve,"viewMatrix",fe.matrixWorldInverse)}if(Et.isSkinnedMesh){Pa.setOptional(ve,Et,"bindMatrix"),Pa.setOptional(ve,Et,"bindMatrixInverse");const yh=Et.skeleton;yh&&(ke.floatVertexTextures?(null===yh.boneTexture&&yh.computeBoneTexture(),Pa.setValue(ve,"boneTexture",yh.boneTexture,Fe),Pa.setValue(ve,"boneTextureSize",yh.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const wV=ft.morphAttributes;return(void 0!==wV.position||void 0!==wV.normal||void 0!==wV.color&&!0===ke.isWebGL2)&&Ut.update(Et,ft,lt,_h),(cx||dr.receiveShadow!==Et.receiveShadow)&&(dr.receiveShadow=Et.receiveShadow,Pa.setValue(ve,"receiveShadow",Et.receiveShadow)),cx&&(Pa.setValue(ve,"toneMappingExposure",x.toneMappingExposure),dr.needsLights&&function snt(fe,tt){fe.ambientLightColor.needsUpdate=tt,fe.lightProbe.needsUpdate=tt,fe.directionalLights.needsUpdate=tt,fe.directionalLightShadows.needsUpdate=tt,fe.pointLights.needsUpdate=tt,fe.pointLightShadows.needsUpdate=tt,fe.spotLights.needsUpdate=tt,fe.spotLightShadows.needsUpdate=tt,fe.rectAreaLights.needsUpdate=tt,fe.hemisphereLights.needsUpdate=tt}(ux,xV),ri&&!0===lt.fog&&vn.refreshFogUniforms(ux,ri),vn.refreshMaterialUniforms(ux,lt,V,B,G),RM.upload(ve,dr.uniformsList,ux,Fe)),lt.isShaderMaterial&&!0===lt.uniformsNeedUpdate&&(RM.upload(ve,dr.uniformsList,ux,Fe),lt.uniformsNeedUpdate=!1),lt.isSpriteMaterial&&Pa.setValue(ve,"center",Et.center),Pa.setValue(ve,"modelViewMatrix",Et.modelViewMatrix),Pa.setValue(ve,"normalMatrix",Et.normalMatrix),Pa.setValue(ve,"modelMatrix",Et.matrixWorld),_h}(fe,tt,ft,lt,Et);Pe.setMaterial(lt,Si);let Fi=ft.index;const Cr=ft.attributes.position;if(null===Fi){if(void 0===Cr||0===Cr.count)return}else if(0===Fi.count)return;let Qi=1;!0===lt.wireframe&&(Fi=Se.getWireframeAttribute(ft),Qi=2),Xt.setup(Et,lt,Bi,ft,Fi);let ir,Cs=Pt;null!==Fi&&(ir=$e.get(Fi),Cs=Ft,Cs.setIndex(ir));const im=null!==Fi?Fi.count:Cr.count,z_=ft.drawRange.start*Qi,U_=ft.drawRange.count*Qi,vh=null!==ri?ri.start*Qi:0,dr=null!==ri?ri.count*Qi:1/0,H_=Math.max(z_,vh),js=Math.min(im,z_+U_,vh+dr)-1,_h=Math.max(0,js-H_+1);if(0!==_h){if(Et.isMesh)!0===lt.wireframe?(Pe.setLineWidth(lt.wireframeLinewidth*xe()),Cs.setMode(1)):Cs.setMode(4);else if(Et.isLine){let ip=lt.linewidth;void 0===ip&&(ip=1),Pe.setLineWidth(ip*xe()),Cs.setMode(Et.isLineSegments?1:Et.isLineLoop?2:3)}else Et.isPoints?Cs.setMode(0):Et.isSprite&&Cs.setMode(4);if(Et.isInstancedMesh)Cs.renderInstances(H_,_h,Et.count);else if(ft.isInstancedBufferGeometry){const ip=Math.min(ft.instanceCount,ft._maxInstanceCount);Cs.renderInstances(H_,_h,ip)}else Cs.render(H_,_h)}},this.compile=function(fe,tt){_=de.get(fe),_.init(),b.push(_),fe.traverseVisible(function(ft){ft.isLight&&ft.layers.test(tt.layers)&&(_.pushLight(ft),ft.castShadow&&_.pushShadow(ft))}),_.setupLights(x.physicallyCorrectLights),fe.traverse(function(ft){const lt=ft.material;if(lt)if(Array.isArray(lt))for(let Et=0;Et<lt.length;Et++)CV(lt[Et],fe,ft);else CV(lt,fe,ft)}),b.pop(),_=null};let Zt=null;function yr(){Ia.stop()}function br(){Ia.start()}const Ia=new Uie;function mh(fe,tt,ft,lt){if(!1===fe.visible)return;if(fe.layers.test(tt.layers))if(fe.isGroup)ft=fe.renderOrder;else if(fe.isLOD)!0===fe.autoUpdate&&fe.update(tt);else if(fe.isLight)_.pushLight(fe),fe.castShadow&&_.pushShadow(fe);else if(fe.isSprite){if(!fe.frustumCulled||W.intersectsSprite(fe)){lt&&ce.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(K);const Si=Ge.update(fe),Bi=fe.material;Bi.visible&&v.push(fe,Si,Bi,ft,ce.z,null)}}else if((fe.isMesh||fe.isLine||fe.isPoints)&&(fe.isSkinnedMesh&&fe.skeleton.frame!==Ze.render.frame&&(fe.skeleton.update(),fe.skeleton.frame=Ze.render.frame),!fe.frustumCulled||W.intersectsObject(fe))){lt&&ce.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(K);const Si=Ge.update(fe),Bi=fe.material;if(Array.isArray(Bi)){const Fi=Si.groups;for(let Cr=0,Qi=Fi.length;Cr<Qi;Cr++){const ir=Fi[Cr],Cs=Bi[ir.materialIndex];Cs&&Cs.visible&&v.push(fe,Si,Cs,ft,ce.z,ir)}}else Bi.visible&&v.push(fe,Si,Bi,ft,ce.z,null)}const ri=fe.children;for(let Si=0,Bi=ri.length;Si<Bi;Si++)mh(ri[Si],tt,ft,lt)}function mle(fe,tt,ft,lt){const Et=fe.opaque,ri=fe.transmissive,Si=fe.transparent;_.setupLightsView(ft),ri.length>0&&function nnt(fe,tt,ft){const lt=ke.isWebGL2;null===G&&(G=new Ma(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")?wC:kg,minFilter:1008,samples:lt&&!0===h?4:0})),x.getDrawingBufferSize(J),lt?G.setSize(J.x,J.y):G.setSize(cM(J.x),cM(J.y));const Et=x.getRenderTarget();x.setRenderTarget(G),x.clear();const ri=x.toneMapping;x.toneMapping=0,ik(fe,tt,ft),x.toneMapping=ri,Fe.updateMultisampleRenderTarget(G),Fe.updateRenderTargetMipmap(G),x.setRenderTarget(Et)}(Et,tt,ft),lt&&Pe.viewport(I.copy(lt)),Et.length>0&&ik(Et,tt,ft),ri.length>0&&ik(ri,tt,ft),Si.length>0&&ik(Si,tt,ft),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function ik(fe,tt,ft){const lt=!0===tt.isScene?tt.overrideMaterial:null;for(let Et=0,ri=fe.length;Et<ri;Et++){const Si=fe[Et],Bi=Si.object,Fi=Si.geometry,Cr=null===lt?Si.material:lt,Qi=Si.group;Bi.layers.test(ft.layers)&&int(Bi,tt,ft,Fi,Cr,Qi)}}function int(fe,tt,ft,lt,Et,ri){fe.onBeforeRender(x,tt,ft,lt,Et,ri),fe.modelViewMatrix.multiplyMatrices(ft.matrixWorldInverse,fe.matrixWorld),fe.normalMatrix.getNormalMatrix(fe.modelViewMatrix),Et.onBeforeRender(x,tt,ft,lt,fe,ri),!0===Et.transparent&&2===Et.side?(Et.side=1,Et.needsUpdate=!0,x.renderBufferDirect(ft,tt,lt,Et,fe,ri),Et.side=0,Et.needsUpdate=!0,x.renderBufferDirect(ft,tt,lt,Et,fe,ri),Et.side=2):x.renderBufferDirect(ft,tt,lt,Et,fe,ri),fe.onAfterRender(x,tt,ft,lt,Et,ri)}function CV(fe,tt,ft){!0!==tt.isScene&&(tt=oe);const lt=he.get(fe),Et=_.state.lights,Si=Et.state.version,Bi=Bt.getParameters(fe,Et.state,_.state.shadowsArray,tt,ft),Fi=Bt.getProgramCacheKey(Bi);let Cr=lt.programs;lt.environment=fe.isMeshStandardMaterial?tt.environment:null,lt.fog=tt.fog,lt.envMap=(fe.isMeshStandardMaterial?nt:Ke).get(fe.envMap||lt.environment),void 0===Cr&&(fe.addEventListener("dispose",ei),Cr=new Map,lt.programs=Cr);let Qi=Cr.get(Fi);if(void 0!==Qi){if(lt.currentProgram===Qi&&lt.lightsStateVersion===Si)return vle(fe,Bi),Qi}else Bi.uniforms=Bt.getUniforms(fe),fe.onBuild(ft,Bi,x),fe.onBeforeCompile(Bi,x),Qi=Bt.acquireProgram(Bi,Fi),Cr.set(Fi,Qi),lt.uniforms=Bi.uniforms;const ir=lt.uniforms;(!fe.isShaderMaterial&&!fe.isRawShaderMaterial||!0===fe.clipping)&&(ir.clippingPlanes=se.uniform),vle(fe,Bi),lt.needsLights=function ont(fe){return fe.isMeshLambertMaterial||fe.isMeshToonMaterial||fe.isMeshPhongMaterial||fe.isMeshStandardMaterial||fe.isShadowMaterial||fe.isShaderMaterial&&!0===fe.lights}(fe),lt.lightsStateVersion=Si,lt.needsLights&&(ir.ambientLightColor.value=Et.state.ambient,ir.lightProbe.value=Et.state.probe,ir.directionalLights.value=Et.state.directional,ir.directionalLightShadows.value=Et.state.directionalShadow,ir.spotLights.value=Et.state.spot,ir.spotLightShadows.value=Et.state.spotShadow,ir.rectAreaLights.value=Et.state.rectArea,ir.ltc_1.value=Et.state.rectAreaLTC1,ir.ltc_2.value=Et.state.rectAreaLTC2,ir.pointLights.value=Et.state.point,ir.pointLightShadows.value=Et.state.pointShadow,ir.hemisphereLights.value=Et.state.hemi,ir.directionalShadowMap.value=Et.state.directionalShadowMap,ir.directionalShadowMatrix.value=Et.state.directionalShadowMatrix,ir.spotShadowMap.value=Et.state.spotShadowMap,ir.spotShadowMatrix.value=Et.state.spotShadowMatrix,ir.pointShadowMap.value=Et.state.pointShadowMap,ir.pointShadowMatrix.value=Et.state.pointShadowMatrix);const Cs=Qi.getUniforms(),im=RM.seqWithValue(Cs.seq,ir);return lt.currentProgram=Qi,lt.uniformsList=im,Qi}function vle(fe,tt){const ft=he.get(fe);ft.outputEncoding=tt.outputEncoding,ft.instancing=tt.instancing,ft.skinning=tt.skinning,ft.morphTargets=tt.morphTargets,ft.morphNormals=tt.morphNormals,ft.morphColors=tt.morphColors,ft.morphTargetsCount=tt.morphTargetsCount,ft.numClippingPlanes=tt.numClippingPlanes,ft.numIntersection=tt.numClipIntersection,ft.vertexAlphas=tt.vertexAlphas,ft.vertexTangents=tt.vertexTangents,ft.toneMapping=tt.toneMapping}Ia.setAnimationLoop(function ci(fe){Zt&&Zt(fe)}),"undefined"!=typeof self&&Ia.setContext(self),this.setAnimationLoop=function(fe){Zt=fe,pn.setAnimationLoop(fe),null===fe?Ia.stop():Ia.start()},pn.addEventListener("sessionstart",yr),pn.addEventListener("sessionend",br),this.render=function(fe,tt){if(void 0===tt||!0===tt.isCamera){if(!0!==C){if(!0===fe.autoUpdate&&fe.updateMatrixWorld(),null===tt.parent&&tt.updateMatrixWorld(),!0===pn.enabled&&!0===pn.isPresenting&&(!0===pn.cameraAutoUpdate&&pn.updateCamera(tt),tt=pn.getCamera()),!0===fe.isScene&&fe.onBeforeRender(x,fe,tt,D),_=de.get(fe,b.length),_.init(),b.push(_),K.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),W.setFromProjectionMatrix(K),j=this.localClippingEnabled,H=se.init(this.clippingPlanes,j,tt),v=In.get(fe,y.length),v.init(),y.push(v),mh(fe,tt,0,x.sortObjects),v.finish(),!0===x.sortObjects&&v.sort($,q),!0===H&&se.beginShadows(),rt.render(_.state.shadowsArray,fe,tt),!0===H&&se.endShadows(),!0===this.info.autoReset&&this.info.reset(),_t.render(v,fe),_.setupLights(x.physicallyCorrectLights),tt.isArrayCamera){const lt=tt.cameras;for(let Et=0,ri=lt.length;Et<ri;Et++){const Si=lt[Et];mle(v,fe,Si,Si.viewport)}}else mle(v,fe,tt);null!==D&&(Fe.updateMultisampleRenderTarget(D),Fe.updateRenderTargetMipmap(D)),!0===fe.isScene&&fe.onAfterRender(x,fe,tt),Xt.resetDefaultState(),T=-1,A=null,b.pop(),_=b.length>0?b[b.length-1]:null,y.pop(),v=y.length>0?y[y.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(fe,tt,ft){he.get(fe.texture).__webglTexture=tt,he.get(fe.depthTexture).__webglTexture=ft;const lt=he.get(fe);lt.__hasExternalTextures=!0,lt.__hasExternalTextures&&(lt.__autoAllocateDepthBuffer=void 0===ft,lt.__autoAllocateDepthBuffer||!0===We.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),lt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(fe,tt){const ft=he.get(fe);ft.__webglFramebuffer=tt,ft.__useDefaultFramebuffer=void 0===tt},this.setRenderTarget=function(fe,tt=0,ft=0){D=fe,w=tt,S=ft;let lt=!0;if(fe){const Fi=he.get(fe);void 0!==Fi.__useDefaultFramebuffer?(Pe.bindFramebuffer(36160,null),lt=!1):void 0===Fi.__webglFramebuffer?Fe.setupRenderTarget(fe):Fi.__hasExternalTextures&&Fe.rebindTextures(fe,he.get(fe.texture).__webglTexture,he.get(fe.depthTexture).__webglTexture)}let Et=null,ri=!1,Si=!1;if(fe){const Fi=fe.texture;(Fi.isData3DTexture||Fi.isDataArrayTexture)&&(Si=!0);const Cr=he.get(fe).__webglFramebuffer;fe.isWebGLCubeRenderTarget?(Et=Cr[tt],ri=!0):Et=ke.isWebGL2&&fe.samples>0&&!1===Fe.useMultisampledRTT(fe)?he.get(fe).__webglMultisampledFramebuffer:Cr,I.copy(fe.viewport),N.copy(fe.scissor),k=fe.scissorTest}else I.copy(L).multiplyScalar(V).floor(),N.copy(U).multiplyScalar(V).floor(),k=z;if(Pe.bindFramebuffer(36160,Et)&&ke.drawBuffers&&lt&&Pe.drawBuffers(fe,Et),Pe.viewport(I),Pe.scissor(N),Pe.setScissorTest(k),ri){const Fi=he.get(fe.texture);ve.framebufferTexture2D(36160,36064,34069+tt,Fi.__webglTexture,ft)}else if(Si){const Fi=he.get(fe.texture);ve.framebufferTextureLayer(36160,36064,Fi.__webglTexture,ft||0,tt||0)}T=-1},this.readRenderTargetPixels=function(fe,tt,ft,lt,Et,ri,Si){if(!fe||!fe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Bi=he.get(fe).__webglFramebuffer;if(fe.isWebGLCubeRenderTarget&&void 0!==Si&&(Bi=Bi[Si]),Bi){Pe.bindFramebuffer(36160,Bi);try{const Fi=fe.texture,Cr=Fi.format,Qi=Fi.type;if(Cr!==ou&&qe.convert(Cr)!==ve.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ir=Qi===wC&&(We.has("EXT_color_buffer_half_float")||ke.isWebGL2&&We.has("EXT_color_buffer_float"));if(!(Qi===kg||qe.convert(Qi)===ve.getParameter(35738)||Qi===Lf&&(ke.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float"))||ir))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");tt>=0&&tt<=fe.width-lt&&ft>=0&&ft<=fe.height-Et&&ve.readPixels(tt,ft,lt,Et,qe.convert(Cr),qe.convert(Qi),ri)}finally{const Fi=null!==D?he.get(D).__webglFramebuffer:null;Pe.bindFramebuffer(36160,Fi)}}},this.copyFramebufferToTexture=function(fe,tt,ft=0){const lt=Math.pow(2,-ft),Et=Math.floor(tt.image.width*lt),ri=Math.floor(tt.image.height*lt);Fe.setTexture2D(tt,0),ve.copyTexSubImage2D(3553,ft,0,0,fe.x,fe.y,Et,ri),Pe.unbindTexture()},this.copyTextureToTexture=function(fe,tt,ft,lt=0){const Et=tt.image.width,ri=tt.image.height,Si=qe.convert(ft.format),Bi=qe.convert(ft.type);Fe.setTexture2D(ft,0),ve.pixelStorei(37440,ft.flipY),ve.pixelStorei(37441,ft.premultiplyAlpha),ve.pixelStorei(3317,ft.unpackAlignment),tt.isDataTexture?ve.texSubImage2D(3553,lt,fe.x,fe.y,Et,ri,Si,Bi,tt.image.data):tt.isCompressedTexture?ve.compressedTexSubImage2D(3553,lt,fe.x,fe.y,tt.mipmaps[0].width,tt.mipmaps[0].height,Si,tt.mipmaps[0].data):ve.texSubImage2D(3553,lt,fe.x,fe.y,Si,Bi,tt.image),0===lt&&ft.generateMipmaps&&ve.generateMipmap(3553),Pe.unbindTexture()},this.copyTextureToTexture3D=function(fe,tt,ft,lt,Et=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ri=fe.max.x-fe.min.x+1,Si=fe.max.y-fe.min.y+1,Bi=fe.max.z-fe.min.z+1,Fi=qe.convert(lt.format),Cr=qe.convert(lt.type);let Qi;if(lt.isData3DTexture)Fe.setTexture3D(lt,0),Qi=32879;else{if(!lt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Fe.setTexture2DArray(lt,0),Qi=35866}ve.pixelStorei(37440,lt.flipY),ve.pixelStorei(37441,lt.premultiplyAlpha),ve.pixelStorei(3317,lt.unpackAlignment);const ir=ve.getParameter(3314),Cs=ve.getParameter(32878),im=ve.getParameter(3316),z_=ve.getParameter(3315),U_=ve.getParameter(32877),vh=ft.isCompressedTexture?ft.mipmaps[0]:ft.image;ve.pixelStorei(3314,vh.width),ve.pixelStorei(32878,vh.height),ve.pixelStorei(3316,fe.min.x),ve.pixelStorei(3315,fe.min.y),ve.pixelStorei(32877,fe.min.z),ft.isDataTexture||ft.isData3DTexture?ve.texSubImage3D(Qi,Et,tt.x,tt.y,tt.z,ri,Si,Bi,Fi,Cr,vh.data):ft.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(Qi,Et,tt.x,tt.y,tt.z,ri,Si,Bi,Fi,vh.data)):ve.texSubImage3D(Qi,Et,tt.x,tt.y,tt.z,ri,Si,Bi,Fi,Cr,vh),ve.pixelStorei(3314,ir),ve.pixelStorei(32878,Cs),ve.pixelStorei(3316,im),ve.pixelStorei(3315,z_),ve.pixelStorei(32877,U_),0===Et&&lt.generateMipmaps&&ve.generateMipmap(Qi),Pe.unbindTexture()},this.initTexture=function(fe){fe.isCubeTexture?Fe.setTextureCube(fe,0):fe.isData3DTexture?Fe.setTexture3D(fe,0):fe.isDataArrayTexture?Fe.setTexture2DArray(fe,0):Fe.setTexture2D(fe,0),Pe.unbindTexture()},this.resetState=function(){w=0,S=0,D=null,Pe.reset(),Xt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class dqe extends mre{}).prototype.isWebGL1Renderer=!0;class PC extends Bl{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,o){return super.copy(a,o),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}toJSON(a){const o=super.toJSON(a);return null!==this.fog&&(o.object.fog=this.fog.toJSON()),o}}class S_ extends oh{constructor(a=null,o=1,c=1,u,h,d,f,p,g=oo,m=oo,v,_){super(null,d,f,p,g,m,u,h,v,_),this.isDataTexture=!0,this.image={data:a,width:o,height:c},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class zre extends oh{constructor(a,o,c,u,h,d,f,p,g){super(a,o,c,u,h,d,f,p,g),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(a,o){const c=this.getUtoTmapping(a);return this.getPoint(c,o)}getPoints(a=5){const o=[];for(let c=0;c<=a;c++)o.push(this.getPoint(c/a));return o}getSpacedPoints(a=5){const o=[];for(let c=0;c<=a;c++)o.push(this.getPointAt(c/a));return o}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let c,u=this.getPoint(0),h=0;o.push(0);for(let d=1;d<=a;d++)c=this.getPoint(d/a),h+=c.distanceTo(u),o.push(h),u=c;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(a,o){const c=this.getLengths();let u=0;const h=c.length;let d;d=o||a*c[h-1];let g,f=0,p=h-1;for(;f<=p;)if(u=Math.floor(f+(p-f)/2),g=c[u]-d,g<0)f=u+1;else{if(!(g>0)){p=u;break}p=u-1}if(u=p,c[u]===d)return u/(h-1);const m=c[u];return(u+(d-m)/(c[u+1]-m))/(h-1)}getTangent(a,o){let u=a-1e-4,h=a+1e-4;u<0&&(u=0),h>1&&(h=1);const d=this.getPoint(u),f=this.getPoint(h),p=o||(d.isVector2?new ht:new te);return p.copy(f).sub(d).normalize(),p}getTangentAt(a,o){const c=this.getUtoTmapping(a);return this.getTangent(c,o)}computeFrenetFrames(a,o){const c=new te,u=[],h=[],d=[],f=new te,p=new ii;for(let y=0;y<=a;y++)u[y]=this.getTangentAt(y/a,new te);h[0]=new te,d[0]=new te;let g=Number.MAX_VALUE;const m=Math.abs(u[0].x),v=Math.abs(u[0].y),_=Math.abs(u[0].z);m<=g&&(g=m,c.set(1,0,0)),v<=g&&(g=v,c.set(0,1,0)),_<=g&&c.set(0,0,1),f.crossVectors(u[0],c).normalize(),h[0].crossVectors(u[0],f),d[0].crossVectors(u[0],h[0]);for(let y=1;y<=a;y++){if(h[y]=h[y-1].clone(),d[y]=d[y-1].clone(),f.crossVectors(u[y-1],u[y]),f.length()>Number.EPSILON){f.normalize();const b=Math.acos(Ms(u[y-1].dot(u[y]),-1,1));h[y].applyMatrix4(p.makeRotationAxis(f,b))}d[y].crossVectors(u[y],h[y])}if(!0===o){let y=Math.acos(Ms(h[0].dot(h[a]),-1,1));y/=a,u[0].dot(f.crossVectors(h[0],h[a]))>0&&(y=-y);for(let b=1;b<=a;b++)h[b].applyMatrix4(p.makeRotationAxis(u[b],y*b)),d[b].crossVectors(u[b],h[b])}return{tangents:u,normals:h,binormals:d}}clone(){return(new this.constructor).copy(this)}copy(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return a.arcLengthDivisions=this.arcLengthDivisions,a.type=this.type,a}fromJSON(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}}class G5 extends lh{constructor(a=0,o=0,c=1,u=1,h=0,d=2*Math.PI,f=!1,p=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=a,this.aY=o,this.xRadius=c,this.yRadius=u,this.aStartAngle=h,this.aEndAngle=d,this.aClockwise=f,this.aRotation=p}getPoint(a,o){const c=o||new ht,u=2*Math.PI;let h=this.aEndAngle-this.aStartAngle;const d=Math.abs(h)<Number.EPSILON;for(;h<0;)h+=u;for(;h>u;)h-=u;h<Number.EPSILON&&(h=d?0:u),!0===this.aClockwise&&!d&&(h===u?h=-u:h-=u);const f=this.aStartAngle+a*h;let p=this.aX+this.xRadius*Math.cos(f),g=this.aY+this.yRadius*Math.sin(f);if(0!==this.aRotation){const m=Math.cos(this.aRotation),v=Math.sin(this.aRotation),_=p-this.aX,y=g-this.aY;p=_*m-y*v+this.aX,g=_*v+y*m+this.aY}return c.set(p,g)}copy(a){return super.copy(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}toJSON(){const a=super.toJSON();return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}fromJSON(a){return super.fromJSON(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}function j5(){let l=0,a=0,o=0,c=0;function u(h,d,f,p){l=h,a=f,o=-3*h+3*d-2*f-p,c=2*h-2*d+f+p}return{initCatmullRom:function(h,d,f,p,g){u(d,f,g*(f-h),g*(p-d))},initNonuniformCatmullRom:function(h,d,f,p,g,m,v){let _=(d-h)/g-(f-h)/(g+m)+(f-d)/m,y=(f-d)/m-(p-d)/(m+v)+(p-f)/v;_*=m,y*=m,u(d,f,_,y)},calc:function(h){const d=h*h;return l+a*h+o*d+c*(d*h)}}}const jM=new te,$5=new j5,q5=new j5,Y5=new j5;class Ure extends lh{constructor(a=[],o=!1,c="centripetal",u=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=a,this.closed=o,this.curveType=c,this.tension=u}getPoint(a,o=new te){const c=o,u=this.points,h=u.length,d=(h-(this.closed?0:1))*a;let g,m,f=Math.floor(d),p=d-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/h)+1)*h:0===p&&f===h-1&&(f=h-2,p=1),this.closed||f>0?g=u[(f-1)%h]:(jM.subVectors(u[0],u[1]).add(u[0]),g=jM);const v=u[f%h],_=u[(f+1)%h];if(this.closed||f+2<h?m=u[(f+2)%h]:(jM.subVectors(u[h-1],u[h-2]).add(u[h-1]),m=jM),"centripetal"===this.curveType||"chordal"===this.curveType){const y="chordal"===this.curveType?.5:.25;let b=Math.pow(g.distanceToSquared(v),y),x=Math.pow(v.distanceToSquared(_),y),C=Math.pow(_.distanceToSquared(m),y);x<1e-4&&(x=1),b<1e-4&&(b=x),C<1e-4&&(C=x),$5.initNonuniformCatmullRom(g.x,v.x,_.x,m.x,b,x,C),q5.initNonuniformCatmullRom(g.y,v.y,_.y,m.y,b,x,C),Y5.initNonuniformCatmullRom(g.z,v.z,_.z,m.z,b,x,C)}else"catmullrom"===this.curveType&&($5.initCatmullRom(g.x,v.x,_.x,m.x,this.tension),q5.initCatmullRom(g.y,v.y,_.y,m.y,this.tension),Y5.initCatmullRom(g.z,v.z,_.z,m.z,this.tension));return c.set($5.calc(p),q5.calc(p),Y5.calc(p)),c}copy(a){super.copy(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++)this.points.push(a.points[o].clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}toJSON(){const a=super.toJSON();a.points=[];for(let o=0,c=this.points.length;o<c;o++)a.points.push(this.points[o].toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}fromJSON(a){super.fromJSON(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const u=a.points[o];this.points.push((new te).fromArray(u))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}function Hre(l,a,o,c,u){const h=.5*(c-a),d=.5*(u-o),f=l*l;return(2*o-2*c+h+d)*(l*f)+(-3*o+3*c-2*h-d)*f+h*l+o}function BC(l,a,o,c){return function wqe(l,a){const o=1-l;return o*o*a}(l,a)+function Sqe(l,a){return 2*(1-l)*l*a}(l,o)+function Tqe(l,a){return l*l*a}(l,c)}function VC(l,a,o,c,u){return function Dqe(l,a){const o=1-l;return o*o*o*a}(l,a)+function Mqe(l,a){const o=1-l;return 3*o*o*l*a}(l,o)+function Eqe(l,a){return 3*(1-l)*l*l*a}(l,c)+function kqe(l,a){return l*l*l*a}(l,u)}class Wre extends lh{constructor(a=new ht,o=new ht,c=new ht,u=new ht){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=a,this.v1=o,this.v2=c,this.v3=u}getPoint(a,o=new ht){const c=o,u=this.v0,h=this.v1,d=this.v2,f=this.v3;return c.set(VC(a,u.x,h.x,d.x,f.x),VC(a,u.y,h.y,d.y,f.y)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}class X5 extends lh{constructor(a=new ht,o=new ht){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=a,this.v2=o}getPoint(a,o=new ht){const c=o;return 1===a?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1)),c}getPointAt(a,o){return this.getPoint(a,o)}getTangent(a,o){const c=o||new ht;return c.copy(this.v2).sub(this.v1).normalize(),c}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class Gre extends lh{constructor(a=new ht,o=new ht,c=new ht){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=a,this.v1=o,this.v2=c}getPoint(a,o=new ht){const c=o,u=this.v0,h=this.v1,d=this.v2;return c.set(BC(a,u.x,h.x,d.x),BC(a,u.y,h.y,d.y)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}class $re extends lh{constructor(a=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=a}getPoint(a,o=new ht){const c=o,u=this.points,h=(u.length-1)*a,d=Math.floor(h),f=h-d,p=u[0===d?d:d-1],g=u[d],m=u[d>u.length-2?u.length-1:d+1],v=u[d>u.length-3?u.length-1:d+2];return c.set(Hre(f,p.x,g.x,m.x,v.x),Hre(f,p.y,g.y,m.y,v.y)),c}copy(a){super.copy(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++)this.points.push(a.points[o].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let o=0,c=this.points.length;o<c;o++)a.points.push(this.points[o].toArray());return a}fromJSON(a){super.fromJSON(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const u=a.points[o];this.points.push((new ht).fromArray(u))}return this}}var Z5=Object.freeze({__proto__:null,ArcCurve:class xqe extends G5{constructor(a,o,c,u,h,d){super(a,o,c,c,u,h,d),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:Ure,CubicBezierCurve:Wre,CubicBezierCurve3:class Aqe extends lh{constructor(a=new te,o=new te,c=new te,u=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=a,this.v1=o,this.v2=c,this.v3=u}getPoint(a,o=new te){const c=o,u=this.v0,h=this.v1,d=this.v2,f=this.v3;return c.set(VC(a,u.x,h.x,d.x,f.x),VC(a,u.y,h.y,d.y,f.y),VC(a,u.z,h.z,d.z,f.z)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}},EllipseCurve:G5,LineCurve:X5,LineCurve3:class Iqe extends lh{constructor(a=new te,o=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=a,this.v2=o}getPoint(a,o=new te){const c=o;return 1===a?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1)),c}getPointAt(a,o){return this.getPoint(a,o)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}},QuadraticBezierCurve:Gre,QuadraticBezierCurve3:class jre extends lh{constructor(a=new te,o=new te,c=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=a,this.v1=o,this.v2=c}getPoint(a,o=new te){const c=o,u=this.v0,h=this.v1,d=this.v2;return c.set(BC(a,u.x,h.x,d.x),BC(a,u.y,h.y,d.y),BC(a,u.z,h.z,d.z)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}},SplineCurve:$re});class Pqe extends lh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);a.equals(o)||this.curves.push(new X5(o,a))}getPoint(a,o){const c=a*this.getLength(),u=this.getCurveLengths();let h=0;for(;h<u.length;){if(u[h]>=c){const d=u[h]-c,f=this.curves[h],p=f.getLength();return f.getPointAt(0===p?0:1-d/p,o)}h++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let o=0;for(let c=0,u=this.curves.length;c<u;c++)o+=this.curves[c].getLength(),a.push(o);return this.cacheLengths=a,a}getSpacedPoints(a=40){const o=[];for(let c=0;c<=a;c++)o.push(this.getPoint(c/a));return this.autoClose&&o.push(o[0]),o}getPoints(a=12){const o=[];let c;for(let u=0,h=this.curves;u<h.length;u++){const d=h[u],p=d.getPoints(d.isEllipseCurve?2*a:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?a*d.points.length:a);for(let g=0;g<p.length;g++){const m=p[g];c&&c.equals(m)||(o.push(m),c=m)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(a){super.copy(a),this.curves=[];for(let o=0,c=a.curves.length;o<c;o++)this.curves.push(a.curves[o].clone());return this.autoClose=a.autoClose,this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose,a.curves=[];for(let o=0,c=this.curves.length;o<c;o++)a.curves.push(this.curves[o].toJSON());return a}fromJSON(a){super.fromJSON(a),this.autoClose=a.autoClose,this.curves=[];for(let o=0,c=a.curves.length;o<c;o++){const u=a.curves[o];this.curves.push((new Z5[u.type]).fromJSON(u))}return this}}class Wg extends Pqe{constructor(a){super(),this.type="Path",this.currentPoint=new ht,a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let o=1,c=a.length;o<c;o++)this.lineTo(a[o].x,a[o].y);return this}moveTo(a,o){return this.currentPoint.set(a,o),this}lineTo(a,o){const c=new X5(this.currentPoint.clone(),new ht(a,o));return this.curves.push(c),this.currentPoint.set(a,o),this}quadraticCurveTo(a,o,c,u){const h=new Gre(this.currentPoint.clone(),new ht(a,o),new ht(c,u));return this.curves.push(h),this.currentPoint.set(c,u),this}bezierCurveTo(a,o,c,u,h,d){const f=new Wre(this.currentPoint.clone(),new ht(a,o),new ht(c,u),new ht(h,d));return this.curves.push(f),this.currentPoint.set(h,d),this}splineThru(a){const o=[this.currentPoint.clone()].concat(a),c=new $re(o);return this.curves.push(c),this.currentPoint.copy(a[a.length-1]),this}arc(a,o,c,u,h,d){return this.absarc(a+this.currentPoint.x,o+this.currentPoint.y,c,u,h,d),this}absarc(a,o,c,u,h,d){return this.absellipse(a,o,c,c,u,h,d),this}ellipse(a,o,c,u,h,d,f,p){return this.absellipse(a+this.currentPoint.x,o+this.currentPoint.y,c,u,h,d,f,p),this}absellipse(a,o,c,u,h,d,f,p){const g=new G5(a,o,c,u,h,d,f,p);if(this.curves.length>0){const v=g.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(g);const m=g.getPoint(1);return this.currentPoint.copy(m),this}copy(a){return super.copy(a),this.currentPoint.copy(a.currentPoint),this}toJSON(){const a=super.toJSON();return a.currentPoint=this.currentPoint.toArray(),a}fromJSON(a){return super.fromJSON(a),this.currentPoint.fromArray(a.currentPoint),this}}class jf extends wi{constructor(a=[],o=[],c=1,u=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:o,radius:c,detail:u};const h=[],d=[];function p(S,D,T,A){const I=A+1,N=[];for(let k=0;k<=I;k++){N[k]=[];const F=S.clone().lerp(T,k/I),B=D.clone().lerp(T,k/I),V=I-k;for(let $=0;$<=V;$++)N[k][$]=0===$&&k===I?F:F.clone().lerp(B,$/V)}for(let k=0;k<I;k++)for(let F=0;F<2*(I-k)-1;F++){const B=Math.floor(F/2);F%2==0?(_(N[k][B+1]),_(N[k+1][B]),_(N[k][B])):(_(N[k][B+1]),_(N[k+1][B+1]),_(N[k+1][B]))}}function _(S){h.push(S.x,S.y,S.z)}function y(S,D){const T=3*S;D.x=a[T+0],D.y=a[T+1],D.z=a[T+2]}function x(S,D,T,A){A<0&&1===S.x&&(d[D]=S.x-1),0===T.x&&0===T.z&&(d[D]=A/2/Math.PI+.5)}function C(S){return Math.atan2(S.z,-S.x)}function w(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}(function f(S){const D=new te,T=new te,A=new te;for(let I=0;I<o.length;I+=3)y(o[I+0],D),y(o[I+1],T),y(o[I+2],A),p(D,T,A,S)})(u),function g(S){const D=new te;for(let T=0;T<h.length;T+=3)D.x=h[T+0],D.y=h[T+1],D.z=h[T+2],D.normalize().multiplyScalar(S),h[T+0]=D.x,h[T+1]=D.y,h[T+2]=D.z}(c),function m(){const S=new te;for(let D=0;D<h.length;D+=3){S.x=h[D+0],S.y=h[D+1],S.z=h[D+2];const T=C(S)/2/Math.PI+.5,A=w(S)/Math.PI+.5;d.push(T,1-A)}(function b(){const S=new te,D=new te,T=new te,A=new te,I=new ht,N=new ht,k=new ht;for(let F=0,B=0;F<h.length;F+=9,B+=6){S.set(h[F+0],h[F+1],h[F+2]),D.set(h[F+3],h[F+4],h[F+5]),T.set(h[F+6],h[F+7],h[F+8]),I.set(d[B+0],d[B+1]),N.set(d[B+2],d[B+3]),k.set(d[B+4],d[B+5]),A.copy(S).add(D).add(T).divideScalar(3);const V=C(A);x(I,B+0,S,V),x(N,B+2,D,V),x(k,B+4,T,V)}})(),function v(){for(let S=0;S<d.length;S+=6){const D=d[S+0],T=d[S+2],A=d[S+4],I=Math.max(D,T,A),N=Math.min(D,T,A);I>.9&&N<.1&&(D<.2&&(d[S+0]+=1),T<.2&&(d[S+2]+=1),A<.2&&(d[S+4]+=1))}}()}(),this.setAttribute("position",new Sn(h,3)),this.setAttribute("normal",new Sn(h.slice(),3)),this.setAttribute("uv",new Sn(d,2)),0===u?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(a){return new jf(a.vertices,a.indices,a.radius,a.details)}}class yd extends Wg{constructor(a){super(a),this.uuid=Rl(),this.type="Shape",this.holes=[]}getPointsHoles(a){const o=[];for(let c=0,u=this.holes.length;c<u;c++)o[c]=this.holes[c].getPoints(a);return o}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a),this.holes=[];for(let o=0,c=a.holes.length;o<c;o++)this.holes.push(a.holes[o].clone());return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid,a.holes=[];for(let o=0,c=this.holes.length;o<c;o++)a.holes.push(this.holes[o].toJSON());return a}fromJSON(a){super.fromJSON(a),this.uuid=a.uuid,this.holes=[];for(let o=0,c=a.holes.length;o<c;o++){const u=a.holes[o];this.holes.push((new Wg).fromJSON(u))}return this}}function qre(l,a,o,c,u){let h,d;if(u===function Zqe(l,a,o,c){let u=0;for(let h=a,d=o-c;h<o;h+=c)u+=(l[d]-l[h])*(l[h+1]+l[d+1]),d=h;return u}(l,a,o,c)>0)for(h=a;h<o;h+=c)d=Zre(h,l[h],l[h+1],d);else for(h=o-c;h>=a;h-=c)d=Zre(h,l[h],l[h+1],d);return d&&JM(d,d.next)&&(WC(d),d=d.next),d}function $f(l,a){if(!l)return l;a||(a=l);let c,o=l;do{if(c=!1,o.steiner||!JM(o,o.next)&&0!==ss(o.prev,o,o.next))o=o.next;else{if(WC(o),o=a=o.prev,o===o.next)break;c=!0}}while(c||o!==a);return a}function UC(l,a,o,c,u,h,d){if(!l)return;!d&&h&&function Gqe(l,a,o,c){let u=l;do{null===u.z&&(u.z=Q5(u.x,u.y,a,o,c)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next}while(u!==l);u.prevZ.nextZ=null,u.prevZ=null,function jqe(l){let a,o,c,u,h,d,f,p,g=1;do{for(o=l,l=null,h=null,d=0;o;){for(d++,c=o,f=0,a=0;a<g&&(f++,c=c.nextZ,c);a++);for(p=g;f>0||p>0&&c;)0!==f&&(0===p||!c||o.z<=c.z)?(u=o,o=o.nextZ,f--):(u=c,c=c.nextZ,p--),h?h.nextZ=u:l=u,u.prevZ=h,h=u;o=c}h.nextZ=null,g*=2}while(d>1)}(u)}(l,c,u,h);let p,g,f=l;for(;l.prev!==l.next;)if(p=l.prev,g=l.next,h?Nqe(l,c,u,h):Rqe(l))a.push(p.i/o),a.push(l.i/o),a.push(g.i/o),WC(l),l=g.next,f=g.next;else if((l=g)===f){d?1===d?UC(l=Lqe($f(l),a,o),a,o,c,u,h,2):2===d&&Bqe(l,a,o,c,u,h):UC($f(l),a,o,c,u,h,1);break}}function Rqe(l){const a=l.prev,o=l,c=l.next;if(ss(a,o,c)>=0)return!1;let u=l.next.next;for(;u!==l.prev;){if(D_(a.x,a.y,o.x,o.y,c.x,c.y,u.x,u.y)&&ss(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function Nqe(l,a,o,c){const u=l.prev,h=l,d=l.next;if(ss(u,h,d)>=0)return!1;const g=u.x>h.x?u.x>d.x?u.x:d.x:h.x>d.x?h.x:d.x,m=u.y>h.y?u.y>d.y?u.y:d.y:h.y>d.y?h.y:d.y,v=Q5(u.x<h.x?u.x<d.x?u.x:d.x:h.x<d.x?h.x:d.x,u.y<h.y?u.y<d.y?u.y:d.y:h.y<d.y?h.y:d.y,a,o,c),_=Q5(g,m,a,o,c);let y=l.prevZ,b=l.nextZ;for(;y&&y.z>=v&&b&&b.z<=_;){if(y!==l.prev&&y!==l.next&&D_(u.x,u.y,h.x,h.y,d.x,d.y,y.x,y.y)&&ss(y.prev,y,y.next)>=0||(y=y.prevZ,b!==l.prev&&b!==l.next&&D_(u.x,u.y,h.x,h.y,d.x,d.y,b.x,b.y)&&ss(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=v;){if(y!==l.prev&&y!==l.next&&D_(u.x,u.y,h.x,h.y,d.x,d.y,y.x,y.y)&&ss(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=_;){if(b!==l.prev&&b!==l.next&&D_(u.x,u.y,h.x,h.y,d.x,d.y,b.x,b.y)&&ss(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Lqe(l,a,o){let c=l;do{const u=c.prev,h=c.next.next;!JM(u,h)&&Yre(u,c,c.next,h)&&HC(u,h)&&HC(h,u)&&(a.push(u.i/o),a.push(c.i/o),a.push(h.i/o),WC(c),WC(c.next),c=l=h),c=c.next}while(c!==l);return $f(c)}function Bqe(l,a,o,c,u,h){let d=l;do{let f=d.next.next;for(;f!==d.prev;){if(d.i!==f.i&&qqe(d,f)){let p=Xre(d,f);return d=$f(d,d.next),p=$f(p,p.next),UC(d,a,o,c,u,h),void UC(p,a,o,c,u,h)}f=f.next}d=d.next}while(d!==l)}function zqe(l,a){return l.x-a.x}function Uqe(l,a){if(a=function Hqe(l,a){let o=a;const c=l.x,u=l.y;let d,h=-1/0;do{if(u<=o.y&&u>=o.next.y&&o.next.y!==o.y){const _=o.x+(u-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(_<=c&&_>h){if(h=_,_===c){if(u===o.y)return o;if(u===o.next.y)return o.next}d=o.x<o.next.x?o:o.next}}o=o.next}while(o!==a);if(!d)return null;if(c===h)return d;const f=d,p=d.x,g=d.y;let v,m=1/0;o=d;do{c>=o.x&&o.x>=p&&c!==o.x&&D_(u<g?c:h,u,p,g,u<g?h:c,u,o.x,o.y)&&(v=Math.abs(u-o.y)/(c-o.x),HC(o,l)&&(v<m||v===m&&(o.x>d.x||o.x===d.x&&Wqe(d,o)))&&(d=o,m=v)),o=o.next}while(o!==f);return d}(l,a),a){const o=Xre(a,l);$f(a,a.next),$f(o,o.next)}}function Wqe(l,a){return ss(l.prev,l,a.prev)<0&&ss(a.next,l,l.next)<0}function Q5(l,a,o,c,u){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-o)*u)|l<<8))|l<<4))|l<<2))|l<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-c)*u)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function $qe(l){let a=l,o=l;do{(a.x<o.x||a.x===o.x&&a.y<o.y)&&(o=a),a=a.next}while(a!==l);return o}function D_(l,a,o,c,u,h,d,f){return(u-d)*(a-f)-(l-d)*(h-f)>=0&&(l-d)*(c-f)-(o-d)*(a-f)>=0&&(o-d)*(h-f)-(u-d)*(c-f)>=0}function qqe(l,a){return l.next.i!==a.i&&l.prev.i!==a.i&&!function Yqe(l,a){let o=l;do{if(o.i!==l.i&&o.next.i!==l.i&&o.i!==a.i&&o.next.i!==a.i&&Yre(o,o.next,l,a))return!0;o=o.next}while(o!==l);return!1}(l,a)&&(HC(l,a)&&HC(a,l)&&function Xqe(l,a){let o=l,c=!1;const u=(l.x+a.x)/2,h=(l.y+a.y)/2;do{o.y>h!=o.next.y>h&&o.next.y!==o.y&&u<(o.next.x-o.x)*(h-o.y)/(o.next.y-o.y)+o.x&&(c=!c),o=o.next}while(o!==l);return c}(l,a)&&(ss(l.prev,l,a.prev)||ss(l,a.prev,a))||JM(l,a)&&ss(l.prev,l,l.next)>0&&ss(a.prev,a,a.next)>0)}function ss(l,a,o){return(a.y-l.y)*(o.x-a.x)-(a.x-l.x)*(o.y-a.y)}function JM(l,a){return l.x===a.x&&l.y===a.y}function Yre(l,a,o,c){const u=tE(ss(l,a,o)),h=tE(ss(l,a,c)),d=tE(ss(o,c,l)),f=tE(ss(o,c,a));return!!(u!==h&&d!==f||0===u&&eE(l,o,a)||0===h&&eE(l,c,a)||0===d&&eE(o,l,c)||0===f&&eE(o,a,c))}function eE(l,a,o){return a.x<=Math.max(l.x,o.x)&&a.x>=Math.min(l.x,o.x)&&a.y<=Math.max(l.y,o.y)&&a.y>=Math.min(l.y,o.y)}function tE(l){return l>0?1:l<0?-1:0}function HC(l,a){return ss(l.prev,l,l.next)<0?ss(l,a,l.next)>=0&&ss(l,l.prev,a)>=0:ss(l,a,l.prev)<0||ss(l,l.next,a)<0}function Xre(l,a){const o=new J5(l.i,l.x,l.y),c=new J5(a.i,a.x,a.y),u=l.next,h=a.prev;return l.next=a,a.prev=l,o.next=u,u.prev=o,c.next=o,o.prev=c,h.next=c,c.prev=h,c}function Zre(l,a,o,c){const u=new J5(l,a,o);return c?(u.next=c.next,u.prev=c,c.next.prev=u,c.next=u):(u.prev=u,u.next=u),u}function WC(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function J5(l,a,o){this.i=l,this.x=a,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class bd{static area(a){const o=a.length;let c=0;for(let u=o-1,h=0;h<o;u=h++)c+=a[u].x*a[h].y-a[h].x*a[u].y;return.5*c}static isClockWise(a){return bd.area(a)<0}static triangulateShape(a,o){const c=[],u=[],h=[];Kre(a),Qre(c,a);let d=a.length;o.forEach(Kre);for(let p=0;p<o.length;p++)u.push(d),d+=o[p].length,Qre(c,o[p]);const f=function(l,a,o=2){const c=a&&a.length,u=c?a[0]*o:l.length;let h=qre(l,0,u,o,!0);const d=[];if(!h||h.next===h.prev)return d;let f,p,g,m,v,_,y;if(c&&(h=function Vqe(l,a,o,c){const u=[];let h,d,f,p,g;for(h=0,d=a.length;h<d;h++)f=a[h]*c,p=h<d-1?a[h+1]*c:l.length,g=qre(l,f,p,c,!1),g===g.next&&(g.steiner=!0),u.push($qe(g));for(u.sort(zqe),h=0;h<u.length;h++)Uqe(u[h],o),o=$f(o,o.next);return o}(l,a,h,o)),l.length>80*o){f=g=l[0],p=m=l[1];for(let b=o;b<u;b+=o)v=l[b],_=l[b+1],v<f&&(f=v),_<p&&(p=_),v>g&&(g=v),_>m&&(m=_);y=Math.max(g-f,m-p),y=0!==y?1/y:0}return UC(h,d,o,f,p,y),d}(c,u);for(let p=0;p<f.length;p+=3)h.push(f.slice(p,p+3));return h}}function Kre(l){const a=l.length;a>2&&l[a-1].equals(l[0])&&l.pop()}function Qre(l,a){for(let o=0;o<a.length;o++)l.push(a[o].x),l.push(a[o].y)}class M_ extends wi{constructor(a=new yd([new ht(.5,.5),new ht(-.5,.5),new ht(-.5,-.5),new ht(.5,-.5)]),o={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:o},a=Array.isArray(a)?a:[a];const c=this,u=[],h=[];for(let f=0,p=a.length;f<p;f++)d(a[f]);function d(f){const p=[],g=void 0!==o.curveSegments?o.curveSegments:12,m=void 0!==o.steps?o.steps:1;let v=void 0!==o.depth?o.depth:1,_=void 0===o.bevelEnabled||o.bevelEnabled,y=void 0!==o.bevelThickness?o.bevelThickness:.2,b=void 0!==o.bevelSize?o.bevelSize:y-.1,x=void 0!==o.bevelOffset?o.bevelOffset:0,C=void 0!==o.bevelSegments?o.bevelSegments:3;const w=o.extrudePath,S=void 0!==o.UVGenerator?o.UVGenerator:Kqe;void 0!==o.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=o.amount);let D,A,I,N,k,T=!1;w&&(D=w.getSpacedPoints(m),T=!0,_=!1,A=w.computeFrenetFrames(m,!1),I=new te,N=new te,k=new te),_||(C=0,y=0,b=0,x=0);const F=f.extractPoints(g);let B=F.shape;const V=F.holes;if(!bd.isClockWise(B)){B=B.reverse();for(let he=0,Fe=V.length;he<Fe;he++){const Ke=V[he];bd.isClockWise(Ke)&&(V[he]=Ke.reverse())}}const q=bd.triangulateShape(B,V),L=B;for(let he=0,Fe=V.length;he<Fe;he++)B=B.concat(V[he]);function U(he,Fe,Ke){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Fe.clone().multiplyScalar(Ke).add(he)}const z=B.length,W=q.length;function H(he,Fe,Ke){let nt,$e,Se;const Ge=he.x-Fe.x,Bt=he.y-Fe.y,vn=Ke.x-he.x,In=Ke.y-he.y,de=Ge*Ge+Bt*Bt;if(Math.abs(Ge*In-Bt*vn)>Number.EPSILON){const rt=Math.sqrt(de),_t=Math.sqrt(vn*vn+In*In),Ut=Fe.x-Bt/rt,Pt=Fe.y+Ge/rt,Xt=((Ke.x-In/_t-Ut)*In-(Ke.y+vn/_t-Pt)*vn)/(Ge*In-Bt*vn);nt=Ut+Ge*Xt-he.x,$e=Pt+Bt*Xt-he.y;const Gt=nt*nt+$e*$e;if(Gt<=2)return new ht(nt,$e);Se=Math.sqrt(Gt/2)}else{let rt=!1;Ge>Number.EPSILON?vn>Number.EPSILON&&(rt=!0):Ge<-Number.EPSILON?vn<-Number.EPSILON&&(rt=!0):Math.sign(Bt)===Math.sign(In)&&(rt=!0),rt?(nt=-Bt,$e=Ge,Se=Math.sqrt(de)):(nt=Ge,$e=Bt,Se=Math.sqrt(de/2))}return new ht(nt/Se,$e/Se)}const j=[];for(let he=0,Fe=L.length,Ke=Fe-1,nt=he+1;he<Fe;he++,Ke++,nt++)Ke===Fe&&(Ke=0),nt===Fe&&(nt=0),j[he]=H(L[he],L[Ke],L[nt]);const G=[];let K,J=j.concat();for(let he=0,Fe=V.length;he<Fe;he++){const Ke=V[he];K=[];for(let nt=0,$e=Ke.length,Se=$e-1,Ge=nt+1;nt<$e;nt++,Se++,Ge++)Se===$e&&(Se=0),Ge===$e&&(Ge=0),K[nt]=H(Ke[nt],Ke[Se],Ke[Ge]);G.push(K),J=J.concat(K)}for(let he=0;he<C;he++){const Fe=he/C,Ke=y*Math.cos(Fe*Math.PI/2),nt=b*Math.sin(Fe*Math.PI/2)+x;for(let $e=0,Se=L.length;$e<Se;$e++){const Ge=U(L[$e],j[$e],nt);De(Ge.x,Ge.y,-Ke)}for(let $e=0,Se=V.length;$e<Se;$e++){const Ge=V[$e];K=G[$e];for(let Bt=0,vn=Ge.length;Bt<vn;Bt++){const In=U(Ge[Bt],K[Bt],nt);De(In.x,In.y,-Ke)}}}const ce=b+x;for(let he=0;he<z;he++){const Fe=_?U(B[he],J[he],ce):B[he];T?(N.copy(A.normals[0]).multiplyScalar(Fe.x),I.copy(A.binormals[0]).multiplyScalar(Fe.y),k.copy(D[0]).add(N).add(I),De(k.x,k.y,k.z)):De(Fe.x,Fe.y,0)}for(let he=1;he<=m;he++)for(let Fe=0;Fe<z;Fe++){const Ke=_?U(B[Fe],J[Fe],ce):B[Fe];T?(N.copy(A.normals[he]).multiplyScalar(Ke.x),I.copy(A.binormals[he]).multiplyScalar(Ke.y),k.copy(D[he]).add(N).add(I),De(k.x,k.y,k.z)):De(Ke.x,Ke.y,v/m*he)}for(let he=C-1;he>=0;he--){const Fe=he/C,Ke=y*Math.cos(Fe*Math.PI/2),nt=b*Math.sin(Fe*Math.PI/2)+x;for(let $e=0,Se=L.length;$e<Se;$e++){const Ge=U(L[$e],j[$e],nt);De(Ge.x,Ge.y,v+Ke)}for(let $e=0,Se=V.length;$e<Se;$e++){const Ge=V[$e];K=G[$e];for(let Bt=0,vn=Ge.length;Bt<vn;Bt++){const In=U(Ge[Bt],K[Bt],nt);T?De(In.x,In.y+D[m-1].y,D[m-1].x+Ke):De(In.x,In.y,v+Ke)}}}function ve(he,Fe){let Ke=he.length;for(;--Ke>=0;){const nt=Ke;let $e=Ke-1;$e<0&&($e=he.length-1);for(let Se=0,Ge=m+2*C;Se<Ge;Se++){const Bt=z*Se,vn=z*(Se+1);ke(Fe+nt+Bt,Fe+$e+Bt,Fe+$e+vn,Fe+nt+vn)}}}function De(he,Fe,Ke){p.push(he),p.push(Fe),p.push(Ke)}function We(he,Fe,Ke){Pe(he),Pe(Fe),Pe(Ke);const nt=u.length/3,$e=S.generateTopUV(c,u,nt-3,nt-2,nt-1);Ze($e[0]),Ze($e[1]),Ze($e[2])}function ke(he,Fe,Ke,nt){Pe(he),Pe(Fe),Pe(nt),Pe(Fe),Pe(Ke),Pe(nt);const $e=u.length/3,Se=S.generateSideWallUV(c,u,$e-6,$e-3,$e-2,$e-1);Ze(Se[0]),Ze(Se[1]),Ze(Se[3]),Ze(Se[1]),Ze(Se[2]),Ze(Se[3])}function Pe(he){u.push(p[3*he+0]),u.push(p[3*he+1]),u.push(p[3*he+2])}function Ze(he){h.push(he.x),h.push(he.y)}(function oe(){const he=u.length/3;if(_){let Fe=0,Ke=z*Fe;for(let nt=0;nt<W;nt++){const $e=q[nt];We($e[2]+Ke,$e[1]+Ke,$e[0]+Ke)}Fe=m+2*C,Ke=z*Fe;for(let nt=0;nt<W;nt++){const $e=q[nt];We($e[0]+Ke,$e[1]+Ke,$e[2]+Ke)}}else{for(let Fe=0;Fe<W;Fe++){const Ke=q[Fe];We(Ke[2],Ke[1],Ke[0])}for(let Fe=0;Fe<W;Fe++){const Ke=q[Fe];We(Ke[0]+z*m,Ke[1]+z*m,Ke[2]+z*m)}}c.addGroup(he,u.length/3-he,0)})(),function xe(){const he=u.length/3;let Fe=0;ve(L,Fe),Fe+=L.length;for(let Ke=0,nt=V.length;Ke<nt;Ke++){const $e=V[Ke];ve($e,Fe),Fe+=$e.length}c.addGroup(he,u.length/3-he,1)}()}this.setAttribute("position",new Sn(u,3)),this.setAttribute("uv",new Sn(h,2)),this.computeVertexNormals()}toJSON(){const a=super.toJSON();return function Qqe(l,a,o){if(o.shapes=[],Array.isArray(l))for(let c=0,u=l.length;c<u;c++)o.shapes.push(l[c].uuid);else o.shapes.push(l.uuid);return o.options=Object.assign({},a),void 0!==a.extrudePath&&(o.options.extrudePath=a.extrudePath.toJSON()),o}(this.parameters.shapes,this.parameters.options,a)}static fromJSON(a,o){const c=[];for(let h=0,d=a.shapes.length;h<d;h++)c.push(o[a.shapes[h]]);const u=a.options.extrudePath;return void 0!==u&&(a.options.extrudePath=(new Z5[u.type]).fromJSON(u)),new M_(c,a.options)}}const Kqe={generateTopUV:function(l,a,o,c,u){const f=a[3*c],p=a[3*c+1],g=a[3*u],m=a[3*u+1];return[new ht(a[3*o],a[3*o+1]),new ht(f,p),new ht(g,m)]},generateSideWallUV:function(l,a,o,c,u,h){const d=a[3*o],f=a[3*o+1],p=a[3*o+2],g=a[3*c],m=a[3*c+1],v=a[3*c+2],_=a[3*u],y=a[3*u+1],b=a[3*u+2],x=a[3*h],C=a[3*h+1],w=a[3*h+2];return Math.abs(f-m)<Math.abs(d-g)?[new ht(d,1-p),new ht(g,1-v),new ht(_,1-b),new ht(x,1-w)]:[new ht(f,1-p),new ht(m,1-v),new ht(y,1-b),new ht(C,1-w)]}};class GC extends jf{constructor(a=1,o=0){const c=(1+Math.sqrt(5))/2;super([-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,o),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:o}}static fromJSON(a){return new GC(a.radius,a.detail)}}class E_ extends wi{constructor(a=1,o=32,c=16,u=0,h=2*Math.PI,d=0,f=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:o,heightSegments:c,phiStart:u,phiLength:h,thetaStart:d,thetaLength:f},o=Math.max(3,Math.floor(o)),c=Math.max(2,Math.floor(c));const p=Math.min(d+f,Math.PI);let g=0;const m=[],v=new te,_=new te,y=[],b=[],x=[],C=[];for(let w=0;w<=c;w++){const S=[],D=w/c;let T=0;0==w&&0==d?T=.5/o:w==c&&p==Math.PI&&(T=-.5/o);for(let A=0;A<=o;A++){const I=A/o;v.x=-a*Math.cos(u+I*h)*Math.sin(d+D*f),v.y=a*Math.cos(d+D*f),v.z=a*Math.sin(u+I*h)*Math.sin(d+D*f),b.push(v.x,v.y,v.z),_.copy(v).normalize(),x.push(_.x,_.y,_.z),C.push(I+T,1-D),S.push(g++)}m.push(S)}for(let w=0;w<c;w++)for(let S=0;S<o;S++){const D=m[w][S+1],T=m[w][S],A=m[w+1][S],I=m[w+1][S+1];(0!==w||d>0)&&y.push(D,T,I),(w!==c-1||p<Math.PI)&&y.push(T,A,I)}this.setIndex(y),this.setAttribute("position",new Sn(b,3)),this.setAttribute("normal",new Sn(x,3)),this.setAttribute("uv",new Sn(C,2))}static fromJSON(a){return new E_(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}}class tse extends Vg{constructor(a){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rn(16777215),this.specular=new rn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this.fog=a.fog,this}}class nse extends Vg{constructor(a){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.fog=a.fog,this}}const Zr={arraySlice:function(l,a,o){return Zr.isTypedArray(l)?new l.constructor(l.subarray(a,void 0!==o?o:l.length)):l.slice(a,o)},convertArray:function(l,a,o){return!l||!o&&l.constructor===a?l:"number"==typeof a.BYTES_PER_ELEMENT?new a(l):Array.prototype.slice.call(l)},isTypedArray:function(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)},getKeyframeOrder:function(l){const o=l.length,c=new Array(o);for(let u=0;u!==o;++u)c[u]=u;return c.sort(function a(u,h){return l[u]-l[h]}),c},sortedArray:function(l,a,o){const c=l.length,u=new l.constructor(c);for(let h=0,d=0;d!==c;++h){const f=o[h]*a;for(let p=0;p!==a;++p)u[d++]=l[f+p]}return u},flattenJSON:function(l,a,o,c){let u=1,h=l[0];for(;void 0!==h&&void 0===h[c];)h=l[u++];if(void 0===h)return;let d=h[c];if(void 0!==d)if(Array.isArray(d))do{d=h[c],void 0!==d&&(a.push(h.time),o.push.apply(o,d)),h=l[u++]}while(void 0!==h);else if(void 0!==d.toArray)do{d=h[c],void 0!==d&&(a.push(h.time),d.toArray(o,o.length)),h=l[u++]}while(void 0!==h);else do{d=h[c],void 0!==d&&(a.push(h.time),o.push(d)),h=l[u++]}while(void 0!==h)},subclip:function(l,a,o,c,u=30){const h=l.clone();h.name=a;const d=[];for(let p=0;p<h.tracks.length;++p){const g=h.tracks[p],m=g.getValueSize(),v=[],_=[];for(let y=0;y<g.times.length;++y){const b=g.times[y]*u;if(!(b<o||b>=c)){v.push(g.times[y]);for(let x=0;x<m;++x)_.push(g.values[y*m+x])}}0!==v.length&&(g.times=Zr.convertArray(v,g.times.constructor),g.values=Zr.convertArray(_,g.values.constructor),d.push(g))}h.tracks=d;let f=1/0;for(let p=0;p<h.tracks.length;++p)f>h.tracks[p].times[0]&&(f=h.tracks[p].times[0]);for(let p=0;p<h.tracks.length;++p)h.tracks[p].shift(-1*f);return h.resetDuration(),h},makeClipAdditive:function(l,a=0,o=l,c=30){c<=0&&(c=30);const u=o.tracks.length,h=a/c;for(let d=0;d<u;++d){const f=o.tracks[d],p=f.ValueTypeName;if("bool"===p||"string"===p)continue;const g=l.tracks.find(function(w){return w.name===f.name&&w.ValueTypeName===p});if(void 0===g)continue;let m=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);let _=0;const y=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=y/3);const b=f.times.length-1;let x;if(h<=f.times[0])x=Zr.arraySlice(f.values,m,v-m);else if(h>=f.times[b]){const w=b*v+m;x=Zr.arraySlice(f.values,w,w+v-m)}else{const w=f.createInterpolant(),S=m,D=v-m;w.evaluate(h),x=Zr.arraySlice(w.resultBuffer,S,D)}"quaternion"===p&&(new Nl).fromArray(x).normalize().conjugate().toArray(x);const C=g.times.length;for(let w=0;w<C;++w){const S=w*y+_;if("quaternion"===p)Nl.multiplyQuaternionsFlat(g.values,S,x,0,g.values,S);else{const D=y-2*_;for(let T=0;T<D;++T)g.values[S+T]-=x[T]}}}return l.blendMode=2501,l}};class lE{constructor(a,o,c,u){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==u?u:new o.constructor(c),this.sampleValues=o,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(a){const o=this.parameterPositions;let c=this._cachedIndex,u=o[c],h=o[c-1];e:{t:{let d;n:{i:if(!(a<u)){for(let f=c+2;;){if(void 0===u){if(a<h)break i;return c=o.length,this._cachedIndex=c,this.copySampleValue_(c-1)}if(c===f)break;if(h=u,u=o[++c],a<u)break t}d=o.length;break n}if(a>=h)break e;{const f=o[1];a<f&&(c=2,h=f);for(let p=c-2;;){if(void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(c===p)break;if(u=h,h=o[--c-1],a>=h)break t}d=c,c=0}}for(;c<d;){const f=c+d>>>1;a<o[f]?d=f:c=f+1}if(u=o[c],h=o[c-1],void 0===h)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===u)return c=o.length,this._cachedIndex=c,this.copySampleValue_(c-1)}this._cachedIndex=c,this.intervalChanged_(c,h,u)}return this.interpolate_(c,h,a,u)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const o=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=a*u;for(let d=0;d!==u;++d)o[d]=c[h+d];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cYe extends lE{constructor(a,o,c,u){super(a,o,c,u),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(a,o,c){const u=this.parameterPositions;let h=a-2,d=a+1,f=u[h],p=u[d];if(void 0===f)switch(this.getSettings_().endingStart){case 2401:h=a,f=2*o-c;break;case 2402:h=u.length-2,f=o+u[h]-u[h+1];break;default:h=a,f=c}if(void 0===p)switch(this.getSettings_().endingEnd){case 2401:d=a,p=2*c-o;break;case 2402:d=1,p=c+u[1]-u[0];break;default:d=a-1,p=o}const g=.5*(c-o),m=this.valueSize;this._weightPrev=g/(o-f),this._weightNext=g/(p-c),this._offsetPrev=h*m,this._offsetNext=d*m}interpolate_(a,o,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=a*f,g=p-f,m=this._offsetPrev,v=this._offsetNext,_=this._weightPrev,y=this._weightNext,b=(c-o)/(u-o),x=b*b,C=x*b,w=-_*C+2*_*x-_*b,S=(1+_)*C+(-1.5-2*_)*x+(-.5+_)*b+1,D=(-1-y)*C+(1.5+y)*x+.5*b,T=y*C-y*x;for(let A=0;A!==f;++A)h[A]=w*d[m+A]+S*d[g+A]+D*d[p+A]+T*d[v+A];return h}}class ise extends lE{constructor(a,o,c,u){super(a,o,c,u)}interpolate_(a,o,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=a*f,g=p-f,m=(c-o)/(u-o),v=1-m;for(let _=0;_!==f;++_)h[_]=d[g+_]*v+d[p+_]*m;return h}}class uYe extends lE{constructor(a,o,c,u){super(a,o,c,u)}interpolate_(a){return this.copySampleValue_(a-1)}}class ch{constructor(a,o,c,u){if(void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===o||0===o.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=Zr.convertArray(o,this.TimeBufferType),this.values=Zr.convertArray(c,this.ValueBufferType),this.setInterpolation(u||this.DefaultInterpolation)}static toJSON(a){const o=a.constructor;let c;if(o.toJSON!==this.toJSON)c=o.toJSON(a);else{c={name:a.name,times:Zr.convertArray(a.times,Array),values:Zr.convertArray(a.values,Array)};const u=a.getInterpolation();u!==a.DefaultInterpolation&&(c.interpolation=u)}return c.type=a.ValueTypeName,c}InterpolantFactoryMethodDiscrete(a){return new uYe(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new ise(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new cYe(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){let o;switch(a){case 2300:o=this.InterpolantFactoryMethodDiscrete;break;case 2301:o=this.InterpolantFactoryMethodLinear;break;case 2302:o=this.InterpolantFactoryMethodSmooth}if(void 0===o){const c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(c);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const o=this.times;for(let c=0,u=o.length;c!==u;++c)o[c]+=a}return this}scale(a){if(1!==a){const o=this.times;for(let c=0,u=o.length;c!==u;++c)o[c]*=a}return this}trim(a,o){const c=this.times,u=c.length;let h=0,d=u-1;for(;h!==u&&c[h]<a;)++h;for(;-1!==d&&c[d]>o;)--d;if(++d,0!==h||d!==u){h>=d&&(d=Math.max(d,1),h=d-1);const f=this.getValueSize();this.times=Zr.arraySlice(c,h,d),this.values=Zr.arraySlice(this.values,h*f,d*f)}return this}validate(){let a=!0;const o=this.getValueSize();o-Math.floor(o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);const c=this.times,u=this.values,h=c.length;0===h&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let d=null;for(let f=0;f!==h;f++){const p=c[f];if("number"==typeof p&&isNaN(p)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,p),a=!1;break}if(null!==d&&d>p){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,p,d),a=!1;break}d=p}if(void 0!==u&&Zr.isTypedArray(u))for(let f=0,p=u.length;f!==p;++f){const g=u[f];if(isNaN(g)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,g),a=!1;break}}return a}optimize(){const a=Zr.arraySlice(this.times),o=Zr.arraySlice(this.values),c=this.getValueSize(),u=2302===this.getInterpolation(),h=a.length-1;let d=1;for(let f=1;f<h;++f){let p=!1;const g=a[f];if(g!==a[f+1]&&(1!==f||g!==a[0]))if(u)p=!0;else{const v=f*c,_=v-c,y=v+c;for(let b=0;b!==c;++b){const x=o[v+b];if(x!==o[_+b]||x!==o[y+b]){p=!0;break}}}if(p){if(f!==d){a[d]=a[f];const v=f*c,_=d*c;for(let y=0;y!==c;++y)o[_+y]=o[v+y]}++d}}if(h>0){a[d]=a[h];for(let f=h*c,p=d*c,g=0;g!==c;++g)o[p+g]=o[f+g];++d}return d!==a.length?(this.times=Zr.arraySlice(a,0,d),this.values=Zr.arraySlice(o,0,d*c)):(this.times=a,this.values=o),this}clone(){const a=Zr.arraySlice(this.times,0),o=Zr.arraySlice(this.values,0),u=new(0,this.constructor)(this.name,a,o);return u.createInterpolant=this.createInterpolant,u}}ch.prototype.TimeBufferType=Float32Array,ch.prototype.ValueBufferType=Float32Array,ch.prototype.DefaultInterpolation=2301;class k_ extends ch{}k_.prototype.ValueTypeName="bool",k_.prototype.ValueBufferType=Array,k_.prototype.DefaultInterpolation=2300,k_.prototype.InterpolantFactoryMethodLinear=void 0,k_.prototype.InterpolantFactoryMethodSmooth=void 0;(class rse extends ch{}).prototype.ValueTypeName="color";(class cE extends ch{}).prototype.ValueTypeName="number";class hYe extends lE{constructor(a,o,c,u){super(a,o,c,u)}interpolate_(a,o,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=(c-o)/(u-o);let g=a*f;for(let m=g+f;g!==m;g+=4)Nl.slerpFlat(h,0,d,g-f,d,g,p);return h}}class $C extends ch{InterpolantFactoryMethodLinear(a){return new hYe(this.times,this.values,this.getValueSize(),a)}}$C.prototype.ValueTypeName="quaternion",$C.prototype.DefaultInterpolation=2301,$C.prototype.InterpolantFactoryMethodSmooth=void 0;class A_ extends ch{}A_.prototype.ValueTypeName="string",A_.prototype.ValueBufferType=Array,A_.prototype.DefaultInterpolation=2300,A_.prototype.InterpolantFactoryMethodLinear=void 0,A_.prototype.InterpolantFactoryMethodSmooth=void 0;(class uE extends ch{}).prototype.ValueTypeName="vector";const I_={enabled:!1,files:{},add:function(l,a){!1!==this.enabled&&(this.files[l]=a)},get:function(l){if(!1!==this.enabled)return this.files[l]},remove:function(l){delete this.files[l]},clear:function(){this.files={}}};const pYe=new class sse{constructor(a,o,c){const u=this;let p,h=!1,d=0,f=0;const g=[];this.onStart=void 0,this.onLoad=a,this.onProgress=o,this.onError=c,this.itemStart=function(m){f++,!1===h&&void 0!==u.onStart&&u.onStart(m,d,f),h=!0},this.itemEnd=function(m){d++,void 0!==u.onProgress&&u.onProgress(m,d,f),d===f&&(h=!1,void 0!==u.onLoad&&u.onLoad())},this.itemError=function(m){void 0!==u.onError&&u.onError(m)},this.resolveURL=function(m){return p?p(m):m},this.setURLModifier=function(m){return p=m,this},this.addHandler=function(m,v){return g.push(m,v),this},this.removeHandler=function(m){const v=g.indexOf(m);return-1!==v&&g.splice(v,2),this},this.getHandler=function(m){for(let v=0,_=g.length;v<_;v+=2){const y=g[v],b=g[v+1];if(y.global&&(y.lastIndex=0),y.test(m))return b}return null}}};class ose{constructor(a){this.manager=void 0!==a?a:pYe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(a,o){const c=this;return new Promise(function(u,h){c.load(a,u,o,h)})}parse(){}setCrossOrigin(a){return this.crossOrigin=a,this}setWithCredentials(a){return this.withCredentials=a,this}setPath(a){return this.path=a,this}setResourcePath(a){return this.resourcePath=a,this}setRequestHeader(a){return this.requestHeader=a,this}}const Cd={};class xd extends ose{constructor(a){super(a)}load(a,o,c,u){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const h=I_.get(a);if(void 0!==h)return this.manager.itemStart(a),setTimeout(()=>{o&&o(h),this.manager.itemEnd(a)},0),h;if(void 0!==Cd[a])return void Cd[a].push({onLoad:o,onProgress:c,onError:u});Cd[a]=[],Cd[a].push({onLoad:o,onProgress:c,onError:u});const d=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),f=this.mimeType,p=this.responseType;fetch(d).then(g=>{if(200===g.status||0===g.status){if(0===g.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===g.body||void 0===g.body.getReader)return g;const m=Cd[a],v=g.body.getReader(),_=g.headers.get("Content-Length"),y=_?parseInt(_):0,b=0!==y;let x=0;const C=new ReadableStream({start(w){!function S(){v.read().then(({done:D,value:T})=>{if(D)w.close();else{x+=T.byteLength;const A=new ProgressEvent("progress",{lengthComputable:b,loaded:x,total:y});for(let I=0,N=m.length;I<N;I++){const k=m[I];k.onProgress&&k.onProgress(A)}w.enqueue(T),S()}})}()}});return new Response(C)}throw Error(`fetch for "${g.url}" responded with ${g.status}: ${g.statusText}`)}).then(g=>{switch(p){case"arraybuffer":return g.arrayBuffer();case"blob":return g.blob();case"document":return g.text().then(m=>(new DOMParser).parseFromString(m,f));case"json":return g.json();default:if(void 0===f)return g.text();{const v=/charset="?([^;"\s]*)"?/i.exec(f),_=v&&v[1]?v[1].toLowerCase():void 0,y=new TextDecoder(_);return g.arrayBuffer().then(b=>y.decode(b))}}}).then(g=>{I_.add(a,g);const m=Cd[a];delete Cd[a];for(let v=0,_=m.length;v<_;v++){const y=m[v];y.onLoad&&y.onLoad(g)}}).catch(g=>{const m=Cd[a];if(void 0===m)throw this.manager.itemError(a),g;delete Cd[a];for(let v=0,_=m.length;v<_;v++){const y=m[v];y.onError&&y.onError(g)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)}),this.manager.itemStart(a)}setResponseType(a){return this.responseType=a,this}setMimeType(a){return this.mimeType=a,this}}class e8 extends Bl{constructor(a,o=1){super(),this.isLight=!0,this.type="Light",this.color=new rn(a),this.intensity=o}dispose(){}copy(a,o){return super.copy(a,o),this.color.copy(a.color),this.intensity=a.intensity,this}toJSON(a){const o=super.toJSON(a);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,void 0!==this.groundColor&&(o.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(o.object.distance=this.distance),void 0!==this.angle&&(o.object.angle=this.angle),void 0!==this.decay&&(o.object.decay=this.decay),void 0!==this.penumbra&&(o.object.penumbra=this.penumbra),void 0!==this.shadow&&(o.object.shadow=this.shadow.toJSON()),o}}const ase=new ii,lse=new te,cse=new te;class use{constructor(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ht(512,512),this.map=null,this.mapPass=null,this.matrix=new ii,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new k5,this._frameExtents=new ht(1,1),this._viewportCount=1,this._viewports=[new ji(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const o=this.camera,c=this.matrix;lse.setFromMatrixPosition(a.matrixWorld),o.position.copy(lse),cse.setFromMatrixPosition(a.target.matrixWorld),o.lookAt(cse),o.updateMatrixWorld(),ase.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ase),c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),c.multiply(o.projectionMatrix),c.multiply(o.matrixWorldInverse)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};return 0!==this.bias&&(a.bias=this.bias),0!==this.normalBias&&(a.normalBias=this.normalBias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}const hse=new ii,qC=new te,t8=new te;class _Ye extends use{constructor(){super(new Ws(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ht(4,2),this._viewportCount=6,this._viewports=[new ji(2,1,1,1),new ji(0,1,1,1),new ji(3,1,1,1),new ji(1,1,1,1),new ji(3,0,1,1),new ji(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(a,o=0){const c=this.camera,u=this.matrix,h=a.distance||c.far;h!==c.far&&(c.far=h,c.updateProjectionMatrix()),qC.setFromMatrixPosition(a.matrixWorld),c.position.copy(qC),t8.copy(c.position),t8.add(this._cubeDirections[o]),c.up.copy(this._cubeUps[o]),c.lookAt(t8),c.updateMatrixWorld(),u.makeTranslation(-qC.x,-qC.y,-qC.z),hse.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hse)}}class dse extends e8{constructor(a,o,c=0,u=1){super(a,o),this.isPointLight=!0,this.type="PointLight",this.distance=c,this.decay=u,this.shadow=new _Ye}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a,o){return super.copy(a,o),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}class yYe extends use{constructor(){super(new AC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class fse extends e8{constructor(a,o){super(a,o),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bl.DefaultUp),this.updateMatrix(),this.target=new Bl,this.shadow=new yYe}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}class fE extends e8{constructor(a,o){super(a,o),this.isAmbientLight=!0,this.type="AmbientLight"}}class bse{constructor(a=!0){this.autoStart=a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Cse(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const o=Cse();a=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=a}return a}}function Cse(){return("undefined"==typeof performance?Date:performance).now()}const i8="\\[\\]\\.:\\/",kYe=new RegExp("["+i8+"]","g"),r8="[^"+i8+"]",AYe="[^"+i8.replace("\\.","")+"]",RYe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",r8)+/(WCOD+)?/.source.replace("WCOD",AYe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",r8)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",r8)+"$"),NYe=["material","materials","bones"];class LYe{constructor(a,o,c){const u=c||Vr.parseTrackName(o);this._targetGroup=a,this._bindings=a.subscribe_(o,u)}getValue(a,o){this.bind();const u=this._bindings[this._targetGroup.nCachedObjects_];void 0!==u&&u.getValue(a,o)}setValue(a,o){const c=this._bindings;for(let u=this._targetGroup.nCachedObjects_,h=c.length;u!==h;++u)c[u].setValue(a,o)}bind(){const a=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=a.length;o!==c;++o)a[o].bind()}unbind(){const a=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=a.length;o!==c;++o)a[o].unbind()}}let Vr=(()=>{class l{constructor(o,c,u){this.path=c,this.parsedPath=u||l.parseTrackName(c),this.node=l.findNode(o,this.parsedPath.nodeName)||o,this.rootNode=o,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(o,c,u){return o&&o.isAnimationObjectGroup?new l.Composite(o,c,u):new l(o,c,u)}static sanitizeNodeName(o){return o.replace(/\s/g,"_").replace(kYe,"")}static parseTrackName(o){const c=RYe.exec(o);if(null===c)throw new Error("PropertyBinding: Cannot parse trackName: "+o);const u={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},h=u.nodeName&&u.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const d=u.nodeName.substring(h+1);-1!==NYe.indexOf(d)&&(u.nodeName=u.nodeName.substring(0,h),u.objectName=d)}if(null===u.propertyName||0===u.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return u}static findNode(o,c){if(void 0===c||""===c||"."===c||-1===c||c===o.name||c===o.uuid)return o;if(o.skeleton){const u=o.skeleton.getBoneByName(c);if(void 0!==u)return u}if(o.children){const u=function(d){for(let f=0;f<d.length;f++){const p=d[f];if(p.name===c||p.uuid===c)return p;const g=u(p.children);if(g)return g}return null},h=u(o.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(o,c){o[c]=this.targetObject[this.propertyName]}_getValue_array(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)o[c++]=u[h]}_getValue_arrayElement(o,c){o[c]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(o,c){this.resolvedProperty.toArray(o,c)}_setValue_direct(o,c){this.targetObject[this.propertyName]=o[c]}_setValue_direct_setNeedsUpdate(o,c){this.targetObject[this.propertyName]=o[c],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(o,c){this.targetObject[this.propertyName]=o[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=o[c++]}_setValue_array_setNeedsUpdate(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=o[c++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=o[c++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(o,c){this.resolvedProperty[this.propertyIndex]=o[c]}_setValue_arrayElement_setNeedsUpdate(o,c){this.resolvedProperty[this.propertyIndex]=o[c],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(o,c){this.resolvedProperty[this.propertyIndex]=o[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(o,c){this.resolvedProperty.fromArray(o,c)}_setValue_fromArray_setNeedsUpdate(o,c){this.resolvedProperty.fromArray(o,c),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(o,c){this.resolvedProperty.fromArray(o,c),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(o,c){this.bind(),this.getValue(o,c)}_setValue_unbound(o,c){this.bind(),this.setValue(o,c)}bind(){let o=this.node;const c=this.parsedPath,u=c.objectName,h=c.propertyName;let d=c.propertyIndex;if(o||(o=l.findNode(this.rootNode,c.nodeName)||this.rootNode,this.node=o),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!o)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(u){let m=c.objectIndex;switch(u){case"materials":if(!o.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!o.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);o=o.material.materials;break;case"bones":if(!o.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);o=o.skeleton.bones;for(let v=0;v<o.length;v++)if(o[v].name===m){m=v;break}break;default:if(void 0===o[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);o=o[u]}if(void 0!==m){if(void 0===o[m])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,o);o=o[m]}}const f=o[h];if(void 0===f)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c.nodeName+"."+h+" but it wasn't found.",o);let p=this.Versioning.None;this.targetObject=o,void 0!==o.needsUpdate?p=this.Versioning.NeedsUpdate:void 0!==o.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(void 0!==d){if("morphTargetInfluences"===h){if(!o.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!o.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==o.morphTargetDictionary[d]&&(d=o.morphTargetDictionary[d])}g=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=d}else void 0!==f.fromArray&&void 0!==f.toArray?(g=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(g=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=h;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][p]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return l.Composite=LYe,l})();Vr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Vr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Vr.prototype.GetterByBindingType=[Vr.prototype._getValue_direct,Vr.prototype._getValue_array,Vr.prototype._getValue_arrayElement,Vr.prototype._getValue_toArray],Vr.prototype.SetterByBindingTypeAndVersioning=[[Vr.prototype._setValue_direct,Vr.prototype._setValue_direct_setNeedsUpdate,Vr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vr.prototype._setValue_array,Vr.prototype._setValue_array_setNeedsUpdate,Vr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vr.prototype._setValue_arrayElement,Vr.prototype._setValue_arrayElement_setNeedsUpdate,Vr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vr.prototype._setValue_fromArray,Vr.prototype._setValue_fromArray_setNeedsUpdate,Vr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zYe{constructor(a,o,c=0,u=1/0){this.ray=new _M(a,o),this.near=c,this.far=u,this.camera=null,this.layers=new m5,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(a,o){this.ray.set(a,o)}setFromCamera(a,o){o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):o.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):console.error("THREE.Raycaster: Unsupported camera type: "+o.type)}intersectObject(a,o=!0,c=[]){return s8(a,this,c,o),c.sort(Tse),c}intersectObjects(a,o=!0,c=[]){for(let u=0,h=a.length;u<h;u++)s8(a[u],this,c,o);return c.sort(Tse),c}}function Tse(l,a){return l.distance-a.distance}function s8(l,a,o,c){if(l.layers.test(a.layers)&&l.raycast(a,o),!0===c){const u=l.children;for(let h=0,d=u.length;h<d;h++)s8(u[h],a,o,!0)}}class HYe{constructor(){this.type="ShapePath",this.color=new rn,this.subPaths=[],this.currentPath=null}moveTo(a,o){return this.currentPath=new Wg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,o),this}lineTo(a,o){return this.currentPath.lineTo(a,o),this}quadraticCurveTo(a,o,c,u){return this.currentPath.quadraticCurveTo(a,o,c,u),this}bezierCurveTo(a,o,c,u,h,d){return this.currentPath.bezierCurveTo(a,o,c,u,h,d),this}splineThru(a){return this.currentPath.splineThru(a),this}toShapes(a,o){function c(S){const D=[];for(let T=0,A=S.length;T<A;T++){const I=S[T],N=new yd;N.curves=I.curves,D.push(N)}return D}function u(S,D){const T=D.length;let A=!1;for(let I=T-1,N=0;N<T;I=N++){let k=D[I],F=D[N],B=F.x-k.x,V=F.y-k.y;if(Math.abs(V)>Number.EPSILON){if(V<0&&(k=D[N],B=-B,F=D[I],V=-V),S.y<k.y||S.y>F.y)continue;if(S.y===k.y){if(S.x===k.x)return!0}else{const $=V*(S.x-k.x)-B*(S.y-k.y);if(0===$)return!0;if($<0)continue;A=!A}}else{if(S.y!==k.y)continue;if(F.x<=S.x&&S.x<=k.x||k.x<=S.x&&S.x<=F.x)return!0}}return A}const h=bd.isClockWise,d=this.subPaths;if(0===d.length)return[];if(!0===o)return c(d);let f,p,g;const m=[];if(1===d.length)return p=d[0],g=new yd,g.curves=p.curves,m.push(g),m;let v=!h(d[0].getPoints());v=a?!v:v;const _=[],y=[];let C,w,b=[],x=0;y[x]=void 0,b[x]=[];for(let S=0,D=d.length;S<D;S++)p=d[S],C=p.getPoints(),f=h(C),f=a?!f:f,f?(!v&&y[x]&&x++,y[x]={s:new yd,p:C},y[x].s.curves=p.curves,v&&x++,b[x]=[]):b[x].push({h:p,p:C[0]});if(!y[0])return c(d);if(y.length>1){let S=!1,D=0;for(let T=0,A=y.length;T<A;T++)_[T]=[];for(let T=0,A=y.length;T<A;T++){const I=b[T];for(let N=0;N<I.length;N++){const k=I[N];let F=!0;for(let B=0;B<y.length;B++)u(k.p,y[B].p)&&(T!==B&&D++,F?(F=!1,_[B].push(k)):S=!0);F&&_[T].push(k)}}D>0&&!1===S&&(b=_)}for(let S=0,D=y.length;S<D;S++){g=y[S].s,m.push(g),w=b[S];for(let T=0,A=w.length;T<A;T++)g.holes.push(w[T].h)}return m}}function YYe(){const l=new ArrayBuffer(4),a=new Float32Array(l),o=new Uint32Array(l),c=new Uint32Array(512),u=new Uint32Array(512);for(let p=0;p<256;++p){const g=p-127;g<-27?(c[p]=0,c[256|p]=32768,u[p]=24,u[256|p]=24):g<-14?(c[p]=1024>>-g-14,c[256|p]=1024>>-g-14|32768,u[p]=-g-1,u[256|p]=-g-1):g<=15?(c[p]=g+15<<10,c[256|p]=g+15<<10|32768,u[p]=13,u[256|p]=13):g<128?(c[p]=31744,c[256|p]=64512,u[p]=24,u[256|p]=24):(c[p]=31744,c[256|p]=64512,u[p]=13,u[256|p]=13)}const h=new Uint32Array(2048),d=new Uint32Array(64),f=new Uint32Array(64);for(let p=1;p<1024;++p){let g=p<<13,m=0;for(;0==(8388608&g);)g<<=1,m-=8388608;g&=-8388609,m+=947912704,h[p]=g|m}for(let p=1024;p<2048;++p)h[p]=939524096+(p-1024<<13);for(let p=1;p<31;++p)d[p]=p<<23;d[31]=1199570944,d[32]=2147483648;for(let p=33;p<63;++p)d[p]=2147483648+(p-32<<23);d[63]=3347054592;for(let p=1;p<64;++p)32!==p&&(f[p]=1024);return{floatView:a,uint32View:o,baseTable:c,shiftTable:u,mantissaTable:h,exponentTable:d,offsetTable:f}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"142"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="142");class YC{constructor(){this.iWidthPixelIncrement=0,this.iHeightPixelIncrement=0,this.iXPixelIncrement=0,this.iYPixelIncrement=0,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iPercentage=!1,this.bLight=!0,this.actionHandler=()=>{},this.params=new Map,this.appLogoTextProvider=()=>"",this.appParamProvider=()=>({})}get canvasWidth(){let a=window.innerWidth+this.iWidthPixelIncrement;return this.iCanvasWidth>0?this.iCanvasWidth*(this.iPercentage?a/100:1):a}get canvasHeight(){let a=window.innerHeight+this.iHeightPixelIncrement;return this.iCanvasHeight>0?this.iCanvasHeight*(this.iPercentage?a/100:1):a}get canvasPercentage(){return this.iPercentage}incrementX(a){return a+this.iXPixelIncrement}incrementY(a){return a+this.iYPixelIncrement}isLight(){return this.bLight}setWidthPixelIncrement(a){return this.iWidthPixelIncrement=a,this}setHeightPixelIncrement(a){return this.iHeightPixelIncrement=a,this}setXPixelIncrement(a){return this.iXPixelIncrement=a,this}setYPixelIncrement(a){return this.iYPixelIncrement=a,this}setCanvasWidth(a){return this.iCanvasWidth=a,this}setCanvasHeight(a){return this.iCanvasHeight=a,this}setPercentage(a){return this.iPercentage=a,this}setLight(a){return this.bLight=a,this}setActionHandler(a){return this.actionHandler=a,this}setParam(a,o){return this.params.set(a,o),this}getParam(a){return this.params.get(a)}setAppLogoTextProvider(a){return this.appLogoTextProvider=a,this}setAppParamProvider(a){return this.appParamProvider=a,this}runAction(a){return this.actionHandler&&this.actionHandler(a),this}init(a){}render(){}onResize(){}onMouseMove(a){}onMouseClick(a){}dispose(){}}class KYe extends YC{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.cube=null,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(a){this.renderer=a;let o=this.canvasWidth,c=this.canvasHeight;this.renderer.setSize(o,c),this.renderer.setClearColor(255,1),this.scene=new PC,this.camera=new Ws(75,o/c,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new fE(4210752),this.light.position.z=10,this.scene.add(this.light);const u=new _d(1,1,1),h=new Es({color:65280,wireframe:!1,transparent:!0});this.cube=new Wi(u,h),this.scene.add(this.cube)}onMouseMove(a){}onResize(){const a=this.canvasWidth,o=this.canvasHeight;this.camera.aspect=a/o,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,o)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.renderer.render(this.scene,this.camera)}}class QYe extends YC{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.cube=null,this.mouseX=0,this.mouseY=0,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(a){this.renderer=a,this.camera=new Ws(20,this.canvasWidth/this.canvasHeight,1,1e4),this.camera.position.z=1800,this.scene=new PC,this.scene.background=new rn(16777215);const o=new fse(16777215);o.position.set(0,0,1),this.scene.add(o);const c=document.createElement("canvas");c.width=128,c.height=128;const h=c.getContext("2d"),d=h.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);d.addColorStop(.1,"rgba(210,210,210,1)"),d.addColorStop(1,"rgba(255,255,255,1)"),h.fillStyle=d,h.fillRect(0,0,c.width,c.height);const f=new zre(c),p=new Es({map:f}),g=new p_(300,300,1,1);let m;m=new Wi(g,p),m.position.y=-250,m.rotation.x=-Math.PI/2,this.scene.add(m),m=new Wi(g,p),m.position.y=-250,m.position.x=-400,m.rotation.x=-Math.PI/2,this.scene.add(m),m=new Wi(g,p),m.position.y=-250,m.position.x=400,m.rotation.x=-Math.PI/2,this.scene.add(m);const v=200,_=new GC(v,1),y=_.attributes.position.count;_.setAttribute("color",new rs(new Float32Array(3*y),3));const b=_.clone(),x=_.clone(),C=new rn,w=_.attributes.position,S=b.attributes.position,D=x.attributes.position,T=_.attributes.color,A=b.attributes.color,I=x.attributes.color;for(let q=0;q<y;q++)C.setHSL((w.getY(q)/v+1)/2,1,.5),T.setXYZ(q,C.r,C.g,C.b),C.setHSL(0,(S.getY(q)/v+1)/2,.5),A.setXYZ(q,C.r,C.g,C.b),C.setRGB(1,.8-(D.getY(q)/v+1)/2,0),I.setXYZ(q,C.r,C.g,C.b);const N=new tse({color:16777215,flatShading:!0,vertexColors:!0,shininess:0}),k=new Es({color:0,wireframe:!0,transparent:!0});let F=new Wi(_,N),B=new Wi(_,k);F.add(B),F.position.x=-400,F.rotation.x=-1.87,this.scene.add(F),F=new Wi(b,N),B=new Wi(b,k),F.add(B),F.position.x=400,this.scene.add(F),F=new Wi(x,N),B=new Wi(x,k),F.add(B),this.scene.add(F),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.setClearColor(255,1)}onMouseMove(a){let c=this.canvasHeight/2;this.mouseX=a.clientX-this.canvasWidth/2,this.mouseY=a.clientY-c}onResize(){const a=this.canvasWidth,o=this.canvasHeight;this.camera.aspect=a/o,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,o)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position)),this.renderer.render(this.scene,this.camera)}}const CE={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class XC{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const JYe=new AC(-1,1,1,-1,0,1),l8=new wi;l8.setAttribute("position",new Sn([-1,3,0,-1,-1,0,3,-1,0],3)),l8.setAttribute("uv",new Sn([0,2,0,0,2,0],2));class Lse{constructor(a){this._mesh=new Wi(l8,a)}dispose(){this._mesh.geometry.dispose()}render(a){a.render(this._mesh,JYe)}get material(){return this._mesh.material}set material(a){this._mesh.material=a}}class c8 extends XC{constructor(a,o){super(),this.textureID=void 0!==o?o:"tDiffuse",a instanceof Ko?(this.uniforms=a.uniforms,this.material=a):a&&(this.uniforms=AM.clone(a.uniforms),this.material=new Ko({defines:Object.assign({},a.defines),uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader})),this.fsQuad=new Lse(this.material)}render(a,o,c){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=c.texture),this.fsQuad.material=this.material,this.renderToScreen?(a.setRenderTarget(null),this.fsQuad.render(a)):(a.setRenderTarget(o),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),this.fsQuad.render(a))}}class Bse extends XC{constructor(a,o){super(),this.scene=a,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(a,o,c){const u=a.getContext(),h=a.state;let d,f;h.buffers.color.setMask(!1),h.buffers.depth.setMask(!1),h.buffers.color.setLocked(!0),h.buffers.depth.setLocked(!0),this.inverse?(d=0,f=1):(d=1,f=0),h.buffers.stencil.setTest(!0),h.buffers.stencil.setOp(u.REPLACE,u.REPLACE,u.REPLACE),h.buffers.stencil.setFunc(u.ALWAYS,d,4294967295),h.buffers.stencil.setClear(f),h.buffers.stencil.setLocked(!0),a.setRenderTarget(c),this.clear&&a.clear(),a.render(this.scene,this.camera),a.setRenderTarget(o),this.clear&&a.clear(),a.render(this.scene,this.camera),h.buffers.color.setLocked(!1),h.buffers.depth.setLocked(!1),h.buffers.stencil.setLocked(!1),h.buffers.stencil.setFunc(u.EQUAL,1,4294967295),h.buffers.stencil.setOp(u.KEEP,u.KEEP,u.KEEP),h.buffers.stencil.setLocked(!0)}}class eXe extends XC{constructor(){super(),this.needsSwap=!1}render(a){a.state.buffers.stencil.setLocked(!1),a.state.buffers.stencil.setTest(!1)}}class tXe{constructor(a,o){if(this.renderer=a,void 0===o){const c=a.getSize(new ht);this._pixelRatio=a.getPixelRatio(),this._width=c.width,this._height=c.height,(o=new Ma(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===CE&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===c8&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new c8(CE),this.clock=new bse}swapBuffers(){const a=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=a}addPass(a){this.passes.push(a),a.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(a,o){this.passes.splice(o,0,a),a.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(a){const o=this.passes.indexOf(a);-1!==o&&this.passes.splice(o,1)}isLastEnabledPass(a){for(let o=a+1;o<this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(a){void 0===a&&(a=this.clock.getDelta());const o=this.renderer.getRenderTarget();let c=!1;for(let u=0,h=this.passes.length;u<h;u++){const d=this.passes[u];if(!1!==d.enabled){if(d.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(u),d.render(this.renderer,this.writeBuffer,this.readBuffer,a,c),d.needsSwap){if(c){const f=this.renderer.getContext(),p=this.renderer.state.buffers.stencil;p.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,a),p.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Bse&&(d instanceof Bse?c=!0:d instanceof eXe&&(c=!1))}}this.renderer.setRenderTarget(o)}reset(a){if(void 0===a){const o=this.renderer.getSize(new ht);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,(a=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=a,this.renderTarget2=a.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(a,o){this._width=a,this._height=o;const c=this._width*this._pixelRatio,u=this._height*this._pixelRatio;this.renderTarget1.setSize(c,u),this.renderTarget2.setSize(c,u);for(let h=0;h<this.passes.length;h++)this.passes[h].setSize(c,u)}setPixelRatio(a){this._pixelRatio=a,this.setSize(this._width,this._height)}}new AC(-1,1,1,-1,0,1);const u8=new wi;u8.setAttribute("position",new Sn([-1,3,0,-1,-1,0,3,-1,0],3)),u8.setAttribute("uv",new Sn([0,2,0,0,2,0],2));class iXe extends XC{constructor(a,o,c,u,h){super(),this.scene=a,this.camera=o,this.overrideMaterial=c,this.clearColor=u,this.clearAlpha=void 0!==h?h:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new rn}render(a,o,c){const u=a.autoClear;let h,d;a.autoClear=!1,void 0!==this.overrideMaterial&&(d=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(a.getClearColor(this._oldClearColor),h=a.getClearAlpha(),a.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&a.clearDepth(),a.setRenderTarget(this.renderToScreen?null:c),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),a.render(this.scene,this.camera),this.clearColor&&a.setClearColor(this._oldClearColor,h),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=d),a.autoClear=u}}class Yf extends XC{constructor(a,o,c,u){super(),this.renderScene=o,this.renderCamera=c,this.selectedObjects=void 0!==u?u:[],this.visibleEdgeColor=new rn(1,1,1),this.hiddenEdgeColor=new rn(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==a?new ht(a.x,a.y):new ht(256,256);const h=Math.round(this.resolution.x/this.downSampleRatio),d=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Ma(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new N5,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=function m(v,_){return v.replace(/DEPTH_TO_VIEW_Z/g,(_.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Ma(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Ma(h,d),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Ma(h,d),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Ma(Math.round(h/2),Math.round(d/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Ma(h,d),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Ma(Math.round(h/2),Math.round(d/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(h,d),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(h/2),Math.round(d/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===CE&&console.error("THREE.OutlinePass relies on CopyShader");const g=CE;this.copyUniforms=AM.clone(g.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Ko({uniforms:this.copyUniforms,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,blending:0,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new rn,this.oldClearAlpha=1,this.fsQuad=new Lse(null),this.tempPulseColor1=new rn,this.tempPulseColor2=new rn,this.textureMatrix=new ii}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(a,o){this.renderTargetMaskBuffer.setSize(a,o),this.renderTargetDepthBuffer.setSize(a,o);let c=Math.round(a/this.downSampleRatio),u=Math.round(o/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(c,u),this.renderTargetBlurBuffer1.setSize(c,u),this.renderTargetEdgeBuffer1.setSize(c,u),this.separableBlurMaterial1.uniforms.texSize.value.set(c,u),c=Math.round(c/2),u=Math.round(u/2),this.renderTargetBlurBuffer2.setSize(c,u),this.renderTargetEdgeBuffer2.setSize(c,u),this.separableBlurMaterial2.uniforms.texSize.value.set(c,u)}changeVisibilityOfSelectedObjects(a){const o=this._visibilityCache;function c(u){u.isMesh&&(!0===a?u.visible=o.get(u):(o.set(u,u.visible),u.visible=a))}for(let u=0;u<this.selectedObjects.length;u++)this.selectedObjects[u].traverse(c)}changeVisibilityOfNonSelectedObjects(a){const o=this._visibilityCache,c=[];function u(d){d.isMesh&&c.push(d)}for(let d=0;d<this.selectedObjects.length;d++)this.selectedObjects[d].traverse(u);this.renderScene.traverse(function h(d){if(d.isMesh||d.isSprite){let f=!1;for(let p=0;p<c.length;p++)if(c[p].id===d.id){f=!0;break}if(!1===f){const p=d.visible;(!1===a||!0===o.get(d))&&(d.visible=a),o.set(d,p)}}else(d.isPoints||d.isLine)&&(!0===a?d.visible=o.get(d):(o.set(d,d.visible),d.visible=a))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(a,o,c,u,h){if(this.selectedObjects.length>0){a.getClearColor(this._oldClearColor),this.oldClearAlpha=a.getClearAlpha();const d=a.autoClear;a.autoClear=!1,h&&a.state.buffers.stencil.setTest(!1),a.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const f=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,a.setRenderTarget(this.renderTargetDepthBuffer),a.clear(),a.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,a.setRenderTarget(this.renderTargetMaskBuffer),a.clear(),a.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=f,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,a.setRenderTarget(this.renderTargetMaskDownSampleBuffer),a.clear(),this.fsQuad.render(a),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const p=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(p),this.tempPulseColor2.multiplyScalar(p)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,a.setRenderTarget(this.renderTargetEdgeBuffer1),a.clear(),this.fsQuad.render(a),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Yf.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,a.setRenderTarget(this.renderTargetBlurBuffer1),a.clear(),this.fsQuad.render(a),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Yf.BlurDirectionY,a.setRenderTarget(this.renderTargetEdgeBuffer1),a.clear(),this.fsQuad.render(a),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Yf.BlurDirectionX,a.setRenderTarget(this.renderTargetBlurBuffer2),a.clear(),this.fsQuad.render(a),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Yf.BlurDirectionY,a.setRenderTarget(this.renderTargetEdgeBuffer2),a.clear(),this.fsQuad.render(a),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,h&&a.state.buffers.stencil.setTest(!0),a.setRenderTarget(c),this.fsQuad.render(a),a.setClearColor(this._oldClearColor,this.oldClearAlpha),a.autoClear=d}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=c.texture,a.setRenderTarget(null),this.fsQuad.render(a))}getPrepareMaskMaterial(){return new Ko({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new ht(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new Ko({uniforms:{maskTexture:{value:null},texSize:{value:new ht(.5,.5)},visibleEdgeColor:{value:new te(1,1,1)},hiddenEdgeColor:{value:new te(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(a){return new Ko({defines:{MAX_RADIUS:a},uniforms:{colorTexture:{value:null},texSize:{value:new ht(.5,.5)},direction:{value:new ht(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new Ko({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}Yf.BlurDirectionX=new ht(1,0),Yf.BlurDirectionY=new ht(0,1);const rXe={uniforms:{tDiffuse:{value:null},resolution:{value:new ht(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t"};class sXe extends YC{constructor(){super(...arguments),this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.cube=null,this.mouseX=0,this.mouseY=0,this.composer=null,this.effectFXAA=null,this.outlinePass=null,this.frameId=null}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}init(a){this.renderer=a;let o=this.canvasWidth,c=this.canvasHeight;this.renderer.setSize(o,c),this.renderer.setClearColor(255,1),this.scene=new PC,this.camera=new Ws(75,o/c,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light=new fE(4210752),this.light.position.z=10,this.scene.add(this.light);const u=new _d(1,1,1),h=new Es({color:65280,wireframe:!1,transparent:!0}),d=new Es({color:0,wireframe:!0,transparent:!0});this.cube=new Wi(u,h),this.cube.add(new Wi(u,d)),this.scene.add(this.cube),this.composer=new tXe(this.renderer);const f=new iXe(this.scene,this.camera);this.composer.addPass(f),this.outlinePass=new Yf(new ht(o,c),this.scene,this.camera),this.composer.addPass(this.outlinePass),this.effectFXAA=new c8(rXe),this.effectFXAA.uniforms.resolution.value.set(1/o,1/c),this.composer.addPass(this.effectFXAA),this.composer.setSize(o,c),this.outlinePass.selectedObjects=[this.cube];const p=document.createElement("canvas");p.width=128,p.height=128;const m=p.getContext("2d");m.fillStyle="red",m.fillRect(0,0,p.width,p.height);const v=new zre(p);v.wrapS=Hv,v.wrapT=Hv,this.outlinePass.patternTexture=v,this.outlinePass.edgeStrength=10,this.outlinePass.edgeGlow=1,this.outlinePass.edgeThickness=1,this.outlinePass.pulsePeriod=0,this.outlinePass.usePatternTexture=!0,this.outlinePass.visibleEdgeColor=new rn(16746632)}onMouseMove(a){let c=this.canvasHeight/2;this.mouseX=a.clientX-this.canvasWidth/2,this.mouseY=a.clientY-c}onResize(){const a=this.canvasWidth,o=this.canvasHeight;this.camera.aspect=a/o,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,o),this.composer.setSize(a,o)}render(){this.frameId=requestAnimationFrame(()=>{this.render()}),this.cube&&(this.cube.rotation.x+=.01,this.cube.rotation.y+=.01),this.composer&&this.composer.render()}}var wd=(()=>(function(l){l[l.Vertexes=0]="Vertexes",l[l.Normals=1]="Normals",l[l.UV=2]="UV"}(wd||(wd={})),wd))();class P_{constructor(){this.vertexes=[],this.normals=[],this.uv=[]}static builder(){return new P_}addTriangle(a,o,c,u,h,d){this.vertexes.push(a,o,c);let f=new te;f.copy(o),f.sub(a);let p=new te;p.copy(c),p.sub(a);let g=f.cross(p);return g=g.normalize(),this.normals.push(g,g,g),this}addPlaneXY(a,o,c,u=0,h=0){let d=new te(a.x,a.y,a.z),f=new te(a.x,a.y,a.z),p=new te(a.x,a.y,a.z),g=new te(a.x,a.y,a.z);f.add(new te(o,0,0)),p.add(new te(0,-c,0)),g.add(new te(o,-c,0));let m=new Qa;return m.set(1,0,0,Math.tan(-h),1,0,0,0,1),d.applyMatrix3(m),f.applyMatrix3(m),p.applyMatrix3(m),g.applyMatrix3(m),this.addTriangle(d,p,f,new ht(0,0),new ht(0,1),new ht(1,0)),this.addTriangle(f,p,g,new ht(1,0),new ht(0,1),new ht(1,1)),this}toPlainArray(a=wd.Vertexes){switch(a){case wd.Normals:return this.normals.flatMap(o=>[o.x,o.y,o.z]);case wd.UV:return this.uv.flatMap(o=>[o.x,o.y]);default:return this.vertexes.flatMap(o=>[o.x,o.y,o.z])}}}function ZC(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function oXe(l,a){this.source=l,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=a,this.destLen=0,this.ltree=new ZC,this.dtree=new ZC}String.prototype.codePointAt||function(){var l=function(){try{var o={},c=Object.defineProperty,u=c(o,o,o)&&c}catch(h){}return u}(),a=function(o){if(null==this)throw TypeError();var c=String(this),u=c.length,h=o?Number(o):0;if(h!=h&&(h=0),!(h<0||h>=u)){var f,d=c.charCodeAt(h);return d>=55296&&d<=56319&&u>h+1&&(f=c.charCodeAt(h+1))>=56320&&f<=57343?1024*(d-55296)+f-56320+65536:d}};l?l(String.prototype,"codePointAt",{value:a,configurable:!0,writable:!0}):String.prototype.codePointAt=a}();var zse=new ZC,Use=new ZC,d8=new Uint8Array(30),f8=new Uint16Array(30),Hse=new Uint8Array(30),Wse=new Uint16Array(30),aXe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gse=new ZC,uh=new Uint8Array(320);function jse(l,a,o,c){var u,h;for(u=0;u<o;++u)l[u]=0;for(u=0;u<30-o;++u)l[u+o]=u/o|0;for(h=c,u=0;u<30;++u)a[u]=h,h+=1<<l[u]}var $se=new Uint16Array(16);function p8(l,a,o,c){var u,h;for(u=0;u<16;++u)l.table[u]=0;for(u=0;u<c;++u)l.table[a[o+u]]++;for(l.table[0]=0,h=0,u=0;u<16;++u)$se[u]=h,h+=l.table[u];for(u=0;u<c;++u)a[o+u]&&(l.trans[$se[a[o+u]]++]=u)}function cXe(l){l.bitcount--||(l.tag=l.source[l.sourceIndex++],l.bitcount=7);var a=1&l.tag;return l.tag>>>=1,a}function hh(l,a,o){if(!a)return o;for(;l.bitcount<24;)l.tag|=l.source[l.sourceIndex++]<<l.bitcount,l.bitcount+=8;var c=l.tag&65535>>>16-a;return l.tag>>>=a,l.bitcount-=a,c+o}function g8(l,a){for(;l.bitcount<24;)l.tag|=l.source[l.sourceIndex++]<<l.bitcount,l.bitcount+=8;var o=0,c=0,u=0,h=l.tag;do{c=2*c+(1&h),h>>>=1,++u,o+=a.table[u],c-=a.table[u]}while(c>=0);return l.tag=h,l.bitcount-=u,a.trans[o+c]}function uXe(l,a,o){var c,u,h,d,f,p;for(c=hh(l,5,257),u=hh(l,5,1),h=hh(l,4,4),d=0;d<19;++d)uh[d]=0;for(d=0;d<h;++d){var g=hh(l,3,0);uh[aXe[d]]=g}for(p8(Gse,uh,0,19),f=0;f<c+u;){var m=g8(l,Gse);switch(m){case 16:var v=uh[f-1];for(p=hh(l,2,3);p;--p)uh[f++]=v;break;case 17:for(p=hh(l,3,3);p;--p)uh[f++]=0;break;case 18:for(p=hh(l,7,11);p;--p)uh[f++]=0;break;default:uh[f++]=m}}p8(a,uh,0,c),p8(o,uh,c,u)}function qse(l,a,o){for(;;){var u,h,d,f,c=g8(l,a);if(256===c)return 0;if(c<256)l.dest[l.destLen++]=c;else for(u=hh(l,d8[c-=257],f8[c]),h=g8(l,o),f=d=l.destLen-hh(l,Hse[h],Wse[h]);f<d+u;++f)l.dest[l.destLen++]=l.dest[f]}}function hXe(l){for(var a,c;l.bitcount>8;)l.sourceIndex--,l.bitcount-=8;if((a=256*(a=l.source[l.sourceIndex+1])+l.source[l.sourceIndex])!==(65535&~(256*l.source[l.sourceIndex+3]+l.source[l.sourceIndex+2])))return-3;for(l.sourceIndex+=4,c=a;c;--c)l.dest[l.destLen++]=l.source[l.sourceIndex++];return l.bitcount=0,0}(function lXe(l,a){var o;for(o=0;o<7;++o)l.table[o]=0;for(l.table[7]=24,l.table[8]=152,l.table[9]=112,o=0;o<24;++o)l.trans[o]=256+o;for(o=0;o<144;++o)l.trans[24+o]=o;for(o=0;o<8;++o)l.trans[168+o]=280+o;for(o=0;o<112;++o)l.trans[176+o]=144+o;for(o=0;o<5;++o)a.table[o]=0;for(a.table[5]=32,o=0;o<32;++o)a.trans[o]=o})(zse,Use),jse(d8,f8,4,3),jse(Hse,Wse,2,1),d8[28]=0,f8[28]=258;function O_(l,a,o,c,u){return Math.pow(1-u,3)*l+3*Math.pow(1-u,2)*u*a+3*(1-u)*Math.pow(u,2)*o+Math.pow(u,3)*c}function Sd(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Gs(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function Yse(l){throw new Error(l)}function Xse(l,a){l||Yse(a)}Sd.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Sd.prototype.addPoint=function(l,a){"number"==typeof l&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=l,this.x2=l),l<this.x1&&(this.x1=l),l>this.x2&&(this.x2=l)),"number"==typeof a&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=a,this.y2=a),a<this.y1&&(this.y1=a),a>this.y2&&(this.y2=a))},Sd.prototype.addX=function(l){this.addPoint(l,null)},Sd.prototype.addY=function(l){this.addPoint(null,l)},Sd.prototype.addBezier=function(l,a,o,c,u,h,d,f){var p=[l,a],g=[o,c],m=[u,h],v=[d,f];this.addPoint(l,a),this.addPoint(d,f);for(var _=0;_<=1;_++){var y=6*p[_]-12*g[_]+6*m[_],b=-3*p[_]+9*g[_]-9*m[_]+3*v[_],x=3*g[_]-3*p[_];if(0!==b){var w=Math.pow(y,2)-4*x*b;if(!(w<0)){var S=(-y+Math.sqrt(w))/(2*b);0<S&&S<1&&(0===_&&this.addX(O_(p[_],g[_],m[_],v[_],S)),1===_&&this.addY(O_(p[_],g[_],m[_],v[_],S)));var D=(-y-Math.sqrt(w))/(2*b);0<D&&D<1&&(0===_&&this.addX(O_(p[_],g[_],m[_],v[_],D)),1===_&&this.addY(O_(p[_],g[_],m[_],v[_],D)))}}else{if(0===y)continue;var C=-x/y;0<C&&C<1&&(0===_&&this.addX(O_(p[_],g[_],m[_],v[_],C)),1===_&&this.addY(O_(p[_],g[_],m[_],v[_],C)))}}},Sd.prototype.addQuad=function(l,a,o,c,u,h){var d=l+.6666666666666666*(o-l),f=a+2/3*(c-a);this.addBezier(l,a,d,f,d+1/3*(u-l),f+1/3*(h-a),u,h)},Gs.prototype.moveTo=function(l,a){this.commands.push({type:"M",x:l,y:a})},Gs.prototype.lineTo=function(l,a){this.commands.push({type:"L",x:l,y:a})},Gs.prototype.curveTo=Gs.prototype.bezierCurveTo=function(l,a,o,c,u,h){this.commands.push({type:"C",x1:l,y1:a,x2:o,y2:c,x:u,y:h})},Gs.prototype.quadTo=Gs.prototype.quadraticCurveTo=function(l,a,o,c){this.commands.push({type:"Q",x1:l,y1:a,x:o,y:c})},Gs.prototype.close=Gs.prototype.closePath=function(){this.commands.push({type:"Z"})},Gs.prototype.extend=function(l){if(l.commands)l=l.commands;else if(l instanceof Sd){var a=l;return this.moveTo(a.x1,a.y1),this.lineTo(a.x2,a.y1),this.lineTo(a.x2,a.y2),this.lineTo(a.x1,a.y2),void this.close()}Array.prototype.push.apply(this.commands,l)},Gs.prototype.getBoundingBox=function(){for(var l=new Sd,a=0,o=0,c=0,u=0,h=0;h<this.commands.length;h++){var d=this.commands[h];switch(d.type){case"M":l.addPoint(d.x,d.y),a=c=d.x,o=u=d.y;break;case"L":l.addPoint(d.x,d.y),c=d.x,u=d.y;break;case"Q":l.addQuad(c,u,d.x1,d.y1,d.x,d.y),c=d.x,u=d.y;break;case"C":l.addBezier(c,u,d.x1,d.y1,d.x2,d.y2,d.x,d.y),c=d.x,u=d.y;break;case"Z":c=a,u=o;break;default:throw new Error("Unexpected path command "+d.type)}}return l.isEmpty()&&l.addPoint(0,0),l},Gs.prototype.draw=function(l){l.beginPath();for(var a=0;a<this.commands.length;a+=1){var o=this.commands[a];"M"===o.type?l.moveTo(o.x,o.y):"L"===o.type?l.lineTo(o.x,o.y):"C"===o.type?l.bezierCurveTo(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?l.quadraticCurveTo(o.x1,o.y1,o.x,o.y):"Z"===o.type&&l.closePath()}this.fill&&(l.fillStyle=this.fill,l.fill()),this.stroke&&(l.strokeStyle=this.stroke,l.lineWidth=this.strokeWidth,l.stroke())},Gs.prototype.toPathData=function(l){function a(d){return Math.round(d)===d?""+Math.round(d):d.toFixed(l)}function o(){for(var d=arguments,f="",p=0;p<arguments.length;p+=1){var g=d[p];g>=0&&p>0&&(f+=" "),f+=a(g)}return f}l=void 0!==l?l:2;for(var c="",u=0;u<this.commands.length;u+=1){var h=this.commands[u];"M"===h.type?c+="M"+o(h.x,h.y):"L"===h.type?c+="L"+o(h.x,h.y):"C"===h.type?c+="C"+o(h.x1,h.y1,h.x2,h.y2,h.x,h.y):"Q"===h.type?c+="Q"+o(h.x1,h.y1,h.x,h.y):"Z"===h.type&&(c+="Z")}return c},Gs.prototype.toSVG=function(l){var a='<path d="';return a+=this.toPathData(l),a+='"',this.fill&&"black"!==this.fill&&(a+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(a+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),a+"/>"},Gs.prototype.toDOMElement=function(l){var a=this.toPathData(l),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",a),o};var Fn={fail:Yse,argument:Xse,assert:Xse},F_={},sn={},Zn={};function du(l){return function(){return l}}sn.BYTE=function(l){return Fn.argument(l>=0&&l<=255,"Byte value should be between 0 and 255."),[l]},Zn.BYTE=du(1),sn.CHAR=function(l){return[l.charCodeAt(0)]},Zn.CHAR=du(1),sn.CHARARRAY=function(l){void 0===l&&(l="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var a=[],o=0;o<l.length;o+=1)a[o]=l.charCodeAt(o);return a},Zn.CHARARRAY=function(l){return void 0===l?0:l.length},sn.USHORT=function(l){return[l>>8&255,255&l]},Zn.USHORT=du(2),sn.SHORT=function(l){return l>=32768&&(l=-(65536-l)),[l>>8&255,255&l]},Zn.SHORT=du(2),sn.UINT24=function(l){return[l>>16&255,l>>8&255,255&l]},Zn.UINT24=du(3),sn.ULONG=function(l){return[l>>24&255,l>>16&255,l>>8&255,255&l]},Zn.ULONG=du(4),sn.LONG=function(l){return l>=2147483648&&(l=-(4294967296-l)),[l>>24&255,l>>16&255,l>>8&255,255&l]},Zn.LONG=du(4),sn.FIXED=sn.ULONG,Zn.FIXED=Zn.ULONG,sn.FWORD=sn.SHORT,Zn.FWORD=Zn.SHORT,sn.UFWORD=sn.USHORT,Zn.UFWORD=Zn.USHORT,sn.LONGDATETIME=function(l){return[0,0,0,0,l>>24&255,l>>16&255,l>>8&255,255&l]},Zn.LONGDATETIME=du(8),sn.TAG=function(l){return Fn.argument(4===l.length,"Tag should be exactly 4 ASCII characters."),[l.charCodeAt(0),l.charCodeAt(1),l.charCodeAt(2),l.charCodeAt(3)]},Zn.TAG=du(4),sn.Card8=sn.BYTE,Zn.Card8=Zn.BYTE,sn.Card16=sn.USHORT,Zn.Card16=Zn.USHORT,sn.OffSize=sn.BYTE,Zn.OffSize=Zn.BYTE,sn.SID=sn.USHORT,Zn.SID=Zn.USHORT,sn.NUMBER=function(l){return l>=-107&&l<=107?[l+139]:l>=108&&l<=1131?[247+((l-=108)>>8),255&l]:l>=-1131&&l<=-108?[251+((l=-l-108)>>8),255&l]:l>=-32768&&l<=32767?sn.NUMBER16(l):sn.NUMBER32(l)},Zn.NUMBER=function(l){return sn.NUMBER(l).length},sn.NUMBER16=function(l){return[28,l>>8&255,255&l]},Zn.NUMBER16=du(3),sn.NUMBER32=function(l){return[29,l>>24&255,l>>16&255,l>>8&255,255&l]},Zn.NUMBER32=du(5),sn.REAL=function(l){var a=l.toString(),o=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(a);if(o){var c=parseFloat("1e"+((o[2]?+o[2]:0)+o[1].length));a=(Math.round(l*c)/c).toString()}for(var u="",h=0,d=a.length;h<d;h+=1){var f=a[h];u+="e"===f?"-"===a[++h]?"c":"b":"."===f?"a":"-"===f?"e":f}for(var p=[30],g=0,m=(u+=1&u.length?"f":"ff").length;g<m;g+=2)p.push(parseInt(u.substr(g,2),16));return p},Zn.REAL=function(l){return sn.REAL(l).length},sn.NAME=sn.CHARARRAY,Zn.NAME=Zn.CHARARRAY,sn.STRING=sn.CHARARRAY,Zn.STRING=Zn.CHARARRAY,F_.UTF8=function(l,a,o){for(var c=[],u=o,h=0;h<u;h++,a+=1)c[h]=l.getUint8(a);return String.fromCharCode.apply(null,c)},F_.UTF16=function(l,a,o){for(var c=[],u=o/2,h=0;h<u;h++,a+=2)c[h]=l.getUint16(a);return String.fromCharCode.apply(null,c)},sn.UTF16=function(l){for(var a=[],o=0;o<l.length;o+=1){var c=l.charCodeAt(o);a[a.length]=c>>8&255,a[a.length]=255&c}return a},Zn.UTF16=function(l){return 2*l.length};var m8={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};F_.MACSTRING=function(l,a,o,c){var u=m8[c];if(void 0!==u){for(var h="",d=0;d<o;d++){var f=l.getUint8(a+d);h+=f<=127?String.fromCharCode(f):u[127&f]}return h}};var wE,xE="function"==typeof WeakMap&&new WeakMap;function v8(l){return l>=-128&&l<=127}function gXe(l,a,o){for(var c=0,u=l.length;a<u&&c<64&&0===l[a];)++a,++c;return o.push(128|c-1),a}function mXe(l,a,o){for(var c=0,u=l.length,h=a;h<u&&c<64;){var d=l[h];if(!v8(d)||0===d&&h+1<u&&0===l[h+1])break;++h,++c}o.push(c-1);for(var f=a;f<h;++f)o.push(l[f]+256&255);return h}function vXe(l,a,o){for(var c=0,u=l.length,h=a;h<u&&c<64;){var d=l[h];if(0===d||v8(d)&&h+1<u&&v8(l[h+1]))break;++h,++c}o.push(64|c-1);for(var f=a;f<h;++f){var p=l[f];o.push(p+65536>>8&255,p+256&255)}return h}sn.MACSTRING=function(l,a){var o=function(l){if(!wE)for(var a in wE={},m8)wE[a]=new String(a);var o=wE[l];if(void 0!==o){if(xE){var c=xE.get(o);if(void 0!==c)return c}var u=m8[l];if(void 0!==u){for(var h={},d=0;d<u.length;d++)h[u.charCodeAt(d)]=d+128;return xE&&xE.set(o,h),h}}}(a);if(void 0!==o){for(var c=[],u=0;u<l.length;u++){var h=l.charCodeAt(u);if(h>=128&&void 0===(h=o[h]))return;c[u]=h}return c}},Zn.MACSTRING=function(l,a){var o=sn.MACSTRING(l,a);return void 0!==o?o.length:0},sn.VARDELTAS=function(l){for(var a=0,o=[];a<l.length;){var c=l[a];a=0===c?gXe(l,a,o):c>=-128&&c<=127?mXe(l,a,o):vXe(l,a,o)}return o},sn.INDEX=function(l){for(var a=1,o=[a],c=[],u=0;u<l.length;u+=1){var h=sn.OBJECT(l[u]);Array.prototype.push.apply(c,h),o.push(a+=h.length)}if(0===c.length)return[0,0];for(var d=[],f=1+Math.floor(Math.log(a)/Math.log(2))/8|0,p=[void 0,sn.BYTE,sn.USHORT,sn.UINT24,sn.ULONG][f],g=0;g<o.length;g+=1){var m=p(o[g]);Array.prototype.push.apply(d,m)}return Array.prototype.concat(sn.Card16(l.length),sn.OffSize(f),d,c)},Zn.INDEX=function(l){return sn.INDEX(l).length},sn.DICT=function(l){for(var a=[],o=Object.keys(l),c=o.length,u=0;u<c;u+=1){var h=parseInt(o[u],0),d=l[h];a=(a=a.concat(sn.OPERAND(d.value,d.type))).concat(sn.OPERATOR(h))}return a},Zn.DICT=function(l){return sn.DICT(l).length},sn.OPERATOR=function(l){return l<1200?[l]:[12,l-1200]},sn.OPERAND=function(l,a){var o=[];if(Array.isArray(a))for(var c=0;c<a.length;c+=1)Fn.argument(l.length===a.length,"Not enough arguments given for type"+a),o=o.concat(sn.OPERAND(l[c],a[c]));else if("SID"===a)o=o.concat(sn.NUMBER(l));else if("offset"===a)o=o.concat(sn.NUMBER32(l));else if("number"===a)o=o.concat(sn.NUMBER(l));else{if("real"!==a)throw new Error("Unknown operand type "+a);o=o.concat(sn.REAL(l))}return o},sn.OP=sn.BYTE,Zn.OP=Zn.BYTE;var SE="function"==typeof WeakMap&&new WeakMap;function Co(l,a,o){if(a.length&&("coverageFormat"!==a[0].name||1===a[0].value))for(var c=0;c<a.length;c+=1){var u=a[c];this[u.name]=u.value}if(this.tableName=l,this.fields=a,o)for(var h=Object.keys(o),d=0;d<h.length;d+=1){var f=h[d];void 0!==this[f]&&(this[f]=o[f])}}function KC(l,a,o){void 0===o&&(o=a.length);var c=new Array(a.length+1);c[0]={name:l+"Count",type:"USHORT",value:o};for(var u=0;u<a.length;u++)c[u+1]={name:l+u,type:"USHORT",value:a[u]};return c}function _8(l,a,o){var c=a.length,u=new Array(c+1);u[0]={name:l+"Count",type:"USHORT",value:c};for(var h=0;h<c;h++)u[h+1]={name:l+h,type:"TABLE",value:o(a[h],h)};return u}function QC(l,a,o){var c=a.length,u=[];u[0]={name:l+"Count",type:"USHORT",value:c};for(var h=0;h<c;h++)u=u.concat(o(a[h],h));return u}function TE(l){1===l.format?Co.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(KC("glyph",l.glyphs))):2===l.format?Co.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(QC("rangeRecord",l.ranges,function(a){return[{name:"startGlyphID",type:"USHORT",value:a.start},{name:"endGlyphID",type:"USHORT",value:a.end},{name:"startCoverageIndex",type:"USHORT",value:a.index}]}))):Fn.assert(!1,"Coverage format must be 1 or 2.")}function DE(l){Co.call(this,"scriptListTable",QC("scriptRecord",l,function(a,o){var c=a.script,u=c.defaultLangSys;return Fn.assert(!!u,"Unable to write GSUB: script "+a.tag+" has no default language system."),[{name:"scriptTag"+o,type:"TAG",value:a.tag},{name:"script"+o,type:"TABLE",value:new Co("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Co("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:u.reqFeatureIndex}].concat(KC("featureIndex",u.featureIndexes)))}].concat(QC("langSys",c.langSysRecords,function(h,d){var f=h.langSys;return[{name:"langSysTag"+d,type:"TAG",value:h.tag},{name:"langSys"+d,type:"TABLE",value:new Co("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:f.reqFeatureIndex}].concat(KC("featureIndex",f.featureIndexes)))}]})))}]}))}function ME(l){Co.call(this,"featureListTable",QC("featureRecord",l,function(a,o){var c=a.feature;return[{name:"featureTag"+o,type:"TAG",value:a.tag},{name:"feature"+o,type:"TABLE",value:new Co("featureTable",[{name:"featureParams",type:"USHORT",value:c.featureParams}].concat(KC("lookupListIndex",c.lookupListIndexes)))}]}))}function EE(l,a){Co.call(this,"lookupListTable",_8("lookup",l,function(o){var c=a[o.lookupType];return Fn.assert(!!c,"Unable to write GSUB lookup type "+o.lookupType+" tables."),new Co("lookupTable",[{name:"lookupType",type:"USHORT",value:o.lookupType},{name:"lookupFlag",type:"USHORT",value:o.lookupFlag}].concat(_8("subtable",o.subtables,c)))}))}sn.CHARSTRING=function(l){if(SE){var a=SE.get(l);if(void 0!==a)return a}for(var o=[],c=l.length,u=0;u<c;u+=1){var h=l[u];o=o.concat(sn[h.type](h.value))}return SE&&SE.set(l,o),o},Zn.CHARSTRING=function(l){return sn.CHARSTRING(l).length},sn.OBJECT=function(l){var a=sn[l.type];return Fn.argument(void 0!==a,"No encoding function for type "+l.type),a(l.value)},Zn.OBJECT=function(l){var a=Zn[l.type];return Fn.argument(void 0!==a,"No sizeOf function for type "+l.type),a(l.value)},sn.TABLE=function(l){for(var a=[],o=l.fields.length,c=[],u=[],h=0;h<o;h+=1){var d=l.fields[h],f=sn[d.type];Fn.argument(void 0!==f,"No encoding function for field type "+d.type+" ("+d.name+")");var p=l[d.name];void 0===p&&(p=d.value);var g=f(p);"TABLE"===d.type?(u.push(a.length),a=a.concat([0,0]),c.push(g)):a=a.concat(g)}for(var m=0;m<c.length;m+=1){var v=u[m],_=a.length;Fn.argument(_<65536,"Table "+l.tableName+" too big."),a[v]=_>>8,a[v+1]=255&_,a=a.concat(c[m])}return a},Zn.TABLE=function(l){for(var a=0,o=l.fields.length,c=0;c<o;c+=1){var u=l.fields[c],h=Zn[u.type];Fn.argument(void 0!==h,"No sizeOf function for field type "+u.type+" ("+u.name+")");var d=l[u.name];void 0===d&&(d=u.value),a+=h(d),"TABLE"===u.type&&(a+=2)}return a},sn.RECORD=sn.TABLE,Zn.RECORD=Zn.TABLE,sn.LITERAL=function(l){return l},Zn.LITERAL=function(l){return l.length},Co.prototype.encode=function(){return sn.TABLE(this)},Co.prototype.sizeOf=function(){return Zn.TABLE(this)},(TE.prototype=Object.create(Co.prototype)).constructor=TE,(DE.prototype=Object.create(Co.prototype)).constructor=DE,(ME.prototype=Object.create(Co.prototype)).constructor=ME,(EE.prototype=Object.create(Co.prototype)).constructor=EE;var fn={Table:Co,Record:Co,Coverage:TE,ScriptList:DE,FeatureList:ME,LookupList:EE,ushortList:KC,tableList:_8,recordList:QC};function Qse(l,a){return l.getUint8(a)}function kE(l,a){return l.getUint16(a,!1)}function y8(l,a){return l.getUint32(a,!1)}function Jse(l,a){return l.getInt16(a,!1)+l.getUint16(a+2,!1)/65535}var wXe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Je(l,a){this.data=l,this.offset=a,this.relativeOffset=0}Je.prototype.parseByte=function(){var l=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,l},Je.prototype.parseChar=function(){var l=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,l},Je.prototype.parseCard8=Je.prototype.parseByte,Je.prototype.parseCard16=Je.prototype.parseUShort=function(){var l=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,l},Je.prototype.parseSID=Je.prototype.parseUShort,Je.prototype.parseOffset16=Je.prototype.parseUShort,Je.prototype.parseShort=function(){var l=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,l},Je.prototype.parseF2Dot14=function(){var l=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,l},Je.prototype.parseOffset32=Je.prototype.parseULong=function(){var l=y8(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,l},Je.prototype.parseFixed=function(){var l=Jse(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,l},Je.prototype.parseString=function(l){var a=this.data,o=this.offset+this.relativeOffset,c="";this.relativeOffset+=l;for(var u=0;u<l;u++)c+=String.fromCharCode(a.getUint8(o+u));return c},Je.prototype.parseTag=function(){return this.parseString(4)},Je.prototype.parseLongDateTime=function(){var l=y8(this.data,this.offset+this.relativeOffset+4);return l-=2082844800,this.relativeOffset+=8,l},Je.prototype.parseVersion=function(l){var a=kE(this.data,this.offset+this.relativeOffset),o=kE(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===l&&(l=4096),a+o/l/10},Je.prototype.skip=function(l,a){void 0===a&&(a=1),this.relativeOffset+=wXe[l]*a},Je.prototype.parseULongList=function(l){void 0===l&&(l=this.parseULong());for(var a=new Array(l),o=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)a[u]=o.getUint32(c),c+=4;return this.relativeOffset+=4*l,a},Je.prototype.parseOffset16List=Je.prototype.parseUShortList=function(l){void 0===l&&(l=this.parseUShort());for(var a=new Array(l),o=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)a[u]=o.getUint16(c),c+=2;return this.relativeOffset+=2*l,a},Je.prototype.parseShortList=function(l){for(var a=new Array(l),o=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)a[u]=o.getInt16(c),c+=2;return this.relativeOffset+=2*l,a},Je.prototype.parseByteList=function(l){for(var a=new Array(l),o=this.data,c=this.offset+this.relativeOffset,u=0;u<l;u++)a[u]=o.getUint8(c++);return this.relativeOffset+=l,a},Je.prototype.parseList=function(l,a){a||(a=l,l=this.parseUShort());for(var o=new Array(l),c=0;c<l;c++)o[c]=a.call(this);return o},Je.prototype.parseList32=function(l,a){a||(a=l,l=this.parseULong());for(var o=new Array(l),c=0;c<l;c++)o[c]=a.call(this);return o},Je.prototype.parseRecordList=function(l,a){a||(a=l,l=this.parseUShort());for(var o=new Array(l),c=Object.keys(a),u=0;u<l;u++){for(var h={},d=0;d<c.length;d++){var f=c[d];h[f]=a[f].call(this)}o[u]=h}return o},Je.prototype.parseRecordList32=function(l,a){a||(a=l,l=this.parseULong());for(var o=new Array(l),c=Object.keys(a),u=0;u<l;u++){for(var h={},d=0;d<c.length;d++){var f=c[d];h[f]=a[f].call(this)}o[u]=h}return o},Je.prototype.parseStruct=function(l){if("function"==typeof l)return l.call(this);for(var a=Object.keys(l),o={},c=0;c<a.length;c++){var u=a[c];o[u]=l[u].call(this)}return o},Je.prototype.parseValueRecord=function(l){if(void 0===l&&(l=this.parseUShort()),0!==l){var a={};return 1&l&&(a.xPlacement=this.parseShort()),2&l&&(a.yPlacement=this.parseShort()),4&l&&(a.xAdvance=this.parseShort()),8&l&&(a.yAdvance=this.parseShort()),16&l&&(a.xPlaDevice=void 0,this.parseShort()),32&l&&(a.yPlaDevice=void 0,this.parseShort()),64&l&&(a.xAdvDevice=void 0,this.parseShort()),128&l&&(a.yAdvDevice=void 0,this.parseShort()),a}},Je.prototype.parseValueRecordList=function(){for(var l=this.parseUShort(),a=this.parseUShort(),o=new Array(a),c=0;c<a;c++)o[c]=this.parseValueRecord(l);return o},Je.prototype.parsePointer=function(l){var a=this.parseOffset16();if(a>0)return new Je(this.data,this.offset+a).parseStruct(l)},Je.prototype.parsePointer32=function(l){var a=this.parseOffset32();if(a>0)return new Je(this.data,this.offset+a).parseStruct(l)},Je.prototype.parseListOfLists=function(l){for(var a=this.parseOffset16List(),o=a.length,c=this.relativeOffset,u=new Array(o),h=0;h<o;h++){var d=a[h];if(0!==d)if(this.relativeOffset=d,l){for(var f=this.parseOffset16List(),p=new Array(f.length),g=0;g<f.length;g++)this.relativeOffset=d+f[g],p[g]=l.call(this);u[h]=p}else u[h]=this.parseUShortList();else u[h]=void 0}return this.relativeOffset=c,u},Je.prototype.parseCoverage=function(){var l=this.offset+this.relativeOffset,a=this.parseUShort(),o=this.parseUShort();if(1===a)return{format:1,glyphs:this.parseUShortList(o)};if(2===a){for(var c=new Array(o),u=0;u<o;u++)c[u]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:c}}throw new Error("0x"+l.toString(16)+": Coverage format must be 1 or 2.")},Je.prototype.parseClassDef=function(){var l=this.offset+this.relativeOffset,a=this.parseUShort();if(1===a)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===a)return{format:2,ranges:this.parseRecordList({start:Je.uShort,end:Je.uShort,classId:Je.uShort})};throw new Error("0x"+l.toString(16)+": ClassDef format must be 1 or 2.")},Je.list=function(l,a){return function(){return this.parseList(l,a)}},Je.list32=function(l,a){return function(){return this.parseList32(l,a)}},Je.recordList=function(l,a){return function(){return this.parseRecordList(l,a)}},Je.recordList32=function(l,a){return function(){return this.parseRecordList32(l,a)}},Je.pointer=function(l){return function(){return this.parsePointer(l)}},Je.pointer32=function(l){return function(){return this.parsePointer32(l)}},Je.tag=Je.prototype.parseTag,Je.byte=Je.prototype.parseByte,Je.uShort=Je.offset16=Je.prototype.parseUShort,Je.uShortList=Je.prototype.parseUShortList,Je.uLong=Je.offset32=Je.prototype.parseULong,Je.uLongList=Je.prototype.parseULongList,Je.struct=Je.prototype.parseStruct,Je.coverage=Je.prototype.parseCoverage,Je.classDef=Je.prototype.parseClassDef;var eoe={reserved:Je.uShort,reqFeatureIndex:Je.uShort,featureIndexes:Je.uShortList};Je.prototype.parseScriptList=function(){return this.parsePointer(Je.recordList({tag:Je.tag,script:Je.pointer({defaultLangSys:Je.pointer(eoe),langSysRecords:Je.recordList({tag:Je.tag,langSys:Je.pointer(eoe)})})}))||[]},Je.prototype.parseFeatureList=function(){return this.parsePointer(Je.recordList({tag:Je.tag,feature:Je.pointer({featureParams:Je.offset16,lookupListIndexes:Je.uShortList})}))||[]},Je.prototype.parseLookupList=function(l){return this.parsePointer(Je.list(Je.pointer(function(){var a=this.parseUShort();Fn.argument(1<=a&&a<=9,"GPOS/GSUB lookup type "+a+" unknown.");var o=this.parseUShort(),c=16&o;return{lookupType:a,lookupFlag:o,subtables:this.parseList(Je.pointer(l[a])),markFilteringSet:c?this.parseUShort():void 0}})))||[]},Je.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var l=this.parseUShort(),a=this.parseUShort();return Fn.argument(1===l&&a<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Je.offset32,featureTableSubstitutionOffset:Je.offset32})})||[]};var Tn={getByte:Qse,getCard8:Qse,getUShort:kE,getCard16:kE,getShort:function _Xe(l,a){return l.getInt16(a,!1)},getULong:y8,getFixed:Jse,getTag:function yXe(l,a){for(var o="",c=a;c<a+4;c+=1)o+=String.fromCharCode(l.getInt8(c));return o},getOffset:function bXe(l,a,o){for(var c=0,u=0;u<o;u+=1)c<<=8,c+=l.getUint8(a+u);return c},getBytes:function CXe(l,a,o){for(var c=[],u=a;u<o;u+=1)c.push(l.getUint8(u));return c},bytesToString:function xXe(l){for(var a="",o=0;o<l.length;o+=1)a+=String.fromCharCode(l[o]);return a},Parser:Je};function MXe(l,a,o){l.segments.push({end:a,start:a,delta:-(a-o),offset:0,glyphIndex:o})}var toe_parse=function DXe(l,a){var o={};o.version=Tn.getUShort(l,a),Fn.argument(0===o.version,"cmap table version should be 0."),o.numTables=Tn.getUShort(l,a+2);for(var c=-1,u=o.numTables-1;u>=0;u-=1){var h=Tn.getUShort(l,a+4+8*u),d=Tn.getUShort(l,a+4+8*u+2);if(3===h&&(0===d||1===d||10===d)||0===h&&(0===d||1===d||2===d||3===d||4===d)){c=Tn.getULong(l,a+4+8*u+4);break}}if(-1===c)throw new Error("No valid cmap sub-tables found.");var f=new Tn.Parser(l,a+c);if(o.format=f.parseUShort(),12===o.format)!function SXe(l,a){var o;a.parseUShort(),l.length=a.parseULong(),l.language=a.parseULong(),l.groupCount=o=a.parseULong(),l.glyphIndexMap={};for(var c=0;c<o;c+=1)for(var u=a.parseULong(),h=a.parseULong(),d=a.parseULong(),f=u;f<=h;f+=1)l.glyphIndexMap[f]=d,d++}(o,f);else{if(4!==o.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+o.format+").");!function TXe(l,a,o,c,u){var h;l.length=a.parseUShort(),l.language=a.parseUShort(),l.segCount=h=a.parseUShort()>>1,a.skip("uShort",3),l.glyphIndexMap={};for(var d=new Tn.Parser(o,c+u+14),f=new Tn.Parser(o,c+u+16+2*h),p=new Tn.Parser(o,c+u+16+4*h),g=new Tn.Parser(o,c+u+16+6*h),m=c+u+16+8*h,v=0;v<h-1;v+=1)for(var _=void 0,y=d.parseUShort(),b=f.parseUShort(),x=p.parseShort(),C=g.parseUShort(),w=b;w<=y;w+=1)0!==C?(m=g.offset+g.relativeOffset-2,m+=C,0!==(_=Tn.getUShort(o,m+=2*(w-b)))&&(_=_+x&65535)):_=w+x&65535,l.glyphIndexMap[w]=_}(o,f,l,a,c)}return o},toe_make=function kXe(l){var o,a=!0;for(o=l.length-1;o>0;o-=1)if(l.get(o).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),a=!1;break}var u=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:a?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:a?12:20}];a||(u=u.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),u=u.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var h=new fn.Table("cmap",u);for(h.segments=[],o=0;o<l.length;o+=1){for(var d=l.get(o),f=0;f<d.unicodes.length;f+=1)MXe(h,d.unicodes[f],o);h.segments=h.segments.sort(function(S,D){return S.start-D.start})}!function EXe(l){l.segments.push({end:65535,start:65535,delta:1,offset:0})}(h);var p=h.segments.length,g=0,m=[],v=[],_=[],y=[],b=[],x=[];for(o=0;o<p;o+=1){var C=h.segments[o];C.end<=65535&&C.start<=65535?(m=m.concat({name:"end_"+o,type:"USHORT",value:C.end}),v=v.concat({name:"start_"+o,type:"USHORT",value:C.start}),_=_.concat({name:"idDelta_"+o,type:"SHORT",value:C.delta}),y=y.concat({name:"idRangeOffset_"+o,type:"USHORT",value:C.offset}),void 0!==C.glyphId&&(b=b.concat({name:"glyph_"+o,type:"USHORT",value:C.glyphId}))):g+=1,!a&&void 0!==C.glyphIndex&&(x=(x=(x=x.concat({name:"cmap12Start_"+o,type:"ULONG",value:C.start})).concat({name:"cmap12End_"+o,type:"ULONG",value:C.end})).concat({name:"cmap12Glyph_"+o,type:"ULONG",value:C.glyphIndex}))}if(h.segCountX2=2*(p-g),h.searchRange=2*Math.pow(2,Math.floor(Math.log(p-g)/Math.log(2))),h.entrySelector=Math.log(h.searchRange/2)/Math.log(2),h.rangeShift=h.segCountX2-h.searchRange,h.fields=h.fields.concat(m),h.fields.push({name:"reservedPad",type:"USHORT",value:0}),h.fields=h.fields.concat(v),h.fields=h.fields.concat(_),h.fields=h.fields.concat(y),h.fields=h.fields.concat(b),h.cmap4Length=14+2*m.length+2+2*v.length+2*_.length+2*y.length+2*b.length,!a){var w=16+4*x.length;h.cmap12Offset=20+h.cmap4Length,h.fields=h.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:w},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:x.length/3}]),h.fields=h.fields.concat(x)}return h},AE=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],AXe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],IXe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Xg=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function noe(l){this.font=l}function ioe(l){this.cmap=l}function IE(l,a){this.encoding=l,this.charset=a}function b8(l){switch(l.version){case 1:this.names=Xg.slice();break;case 2:this.names=new Array(l.numberOfGlyphs);for(var a=0;a<l.numberOfGlyphs;a++)this.names[a]=l.glyphNameIndex[a]<Xg.length?Xg[l.glyphNameIndex[a]]:l.names[l.glyphNameIndex[a]-Xg.length];break;case 2.5:this.names=new Array(l.numberOfGlyphs);for(var o=0;o<l.numberOfGlyphs;o++)this.names[o]=Xg[o+l.glyphNameIndex[o]];break;default:this.names=[]}}noe.prototype.charToGlyphIndex=function(l){var a=l.codePointAt(0),o=this.font.glyphs;if(o)for(var c=0;c<o.length;c+=1)for(var u=o.get(c),h=0;h<u.unicodes.length;h+=1)if(u.unicodes[h]===a)return c;return null},ioe.prototype.charToGlyphIndex=function(l){return this.cmap.glyphIndexMap[l.codePointAt(0)]||0},IE.prototype.charToGlyphIndex=function(l){var a=l.codePointAt(0);return this.charset.indexOf(this.encoding[a])},b8.prototype.nameToGlyphIndex=function(l){return this.names.indexOf(l)},b8.prototype.glyphIndexToName=function(l){return this.names[l]};var Zg_line=function RXe(l,a,o,c,u){l.beginPath(),l.moveTo(a,o),l.lineTo(c,u),l.stroke()};function Ul(l){this.bindConstructorValues(l)}function PE(l,a,o){Object.defineProperty(l,a,{get:function(){return l[o]},set:function(c){l[o]=c},enumerable:!0,configurable:!0})}function C8(l,a){if(this.font=l,this.glyphs={},Array.isArray(a))for(var o=0;o<a.length;o++){var c=a[o];c.path.unitsPerEm=l.unitsPerEm,this.glyphs[o]=c}this.length=a&&a.length||0}Ul.prototype.bindConstructorValues=function(l){this.index=l.index||0,this.name=l.name||null,this.unicode=l.unicode||void 0,this.unicodes=l.unicodes||void 0!==l.unicode?[l.unicode]:[],"xMin"in l&&(this.xMin=l.xMin),"yMin"in l&&(this.yMin=l.yMin),"xMax"in l&&(this.xMax=l.xMax),"yMax"in l&&(this.yMax=l.yMax),"advanceWidth"in l&&(this.advanceWidth=l.advanceWidth),Object.defineProperty(this,"path",function NXe(l,a){var o=a||new Gs;return{configurable:!0,get:function(){return"function"==typeof o&&(o=o()),o},set:function(c){o=c}}}(0,l.path))},Ul.prototype.addUnicode=function(l){0===this.unicodes.length&&(this.unicode=l),this.unicodes.push(l)},Ul.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ul.prototype.getPath=function(l,a,o,c,u){var h,d;l=void 0!==l?l:0,a=void 0!==a?a:0,o=void 0!==o?o:72,c||(c={});var f=c.xScale,p=c.yScale;if(c.hinting&&u&&u.hinting&&(d=this.path&&u.hinting.exec(this,o)),d)h=u.hinting.getCommands(d),l=Math.round(l),a=Math.round(a),f=p=1;else{h=this.path.commands;var g=1/(this.path.unitsPerEm||1e3)*o;void 0===f&&(f=g),void 0===p&&(p=g)}for(var m=new Gs,v=0;v<h.length;v+=1){var _=h[v];"M"===_.type?m.moveTo(l+_.x*f,a+-_.y*p):"L"===_.type?m.lineTo(l+_.x*f,a+-_.y*p):"Q"===_.type?m.quadraticCurveTo(l+_.x1*f,a+-_.y1*p,l+_.x*f,a+-_.y*p):"C"===_.type?m.curveTo(l+_.x1*f,a+-_.y1*p,l+_.x2*f,a+-_.y2*p,l+_.x*f,a+-_.y*p):"Z"===_.type&&m.closePath()}return m},Ul.prototype.getContours=function(){if(void 0===this.points)return[];for(var l=[],a=[],o=0;o<this.points.length;o+=1){var c=this.points[o];a.push(c),c.lastPointOfContour&&(l.push(a),a=[])}return Fn.argument(0===a.length,"There are still points left in the current contour."),l},Ul.prototype.getMetrics=function(){for(var l=this.path.commands,a=[],o=[],c=0;c<l.length;c+=1){var u=l[c];"Z"!==u.type&&(a.push(u.x),o.push(u.y)),("Q"===u.type||"C"===u.type)&&(a.push(u.x1),o.push(u.y1)),"C"===u.type&&(a.push(u.x2),o.push(u.y2))}var h={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,o),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,o),leftSideBearing:this.leftSideBearing};return isFinite(h.xMin)||(h.xMin=0),isFinite(h.xMax)||(h.xMax=this.advanceWidth),isFinite(h.yMin)||(h.yMin=0),isFinite(h.yMax)||(h.yMax=0),h.rightSideBearing=this.advanceWidth-h.leftSideBearing-(h.xMax-h.xMin),h},Ul.prototype.draw=function(l,a,o,c,u){this.getPath(a,o,c,u).draw(l)},Ul.prototype.drawPoints=function(l,a,o,c){function u(v,_,y,b){l.beginPath();for(var x=0;x<v.length;x+=1)l.moveTo(_+v[x].x*b,y+v[x].y*b),l.arc(_+v[x].x*b,y+v[x].y*b,2,0,2*Math.PI,!1);l.closePath(),l.fill()}a=void 0!==a?a:0,o=void 0!==o?o:0;for(var h=1/this.path.unitsPerEm*(c=void 0!==c?c:24),d=[],f=[],p=this.path,g=0;g<p.commands.length;g+=1){var m=p.commands[g];void 0!==m.x&&d.push({x:m.x,y:-m.y}),void 0!==m.x1&&f.push({x:m.x1,y:-m.y1}),void 0!==m.x2&&f.push({x:m.x2,y:-m.y2})}l.fillStyle="blue",u(d,a,o,h),l.fillStyle="red",u(f,a,o,h)},Ul.prototype.drawMetrics=function(l,a,o,c){var u;a=void 0!==a?a:0,o=void 0!==o?o:0,u=1/this.path.unitsPerEm*(c=void 0!==c?c:24),l.lineWidth=1,l.strokeStyle="black",Zg_line(l,a,-1e4,a,1e4),Zg_line(l,-1e4,o,1e4,o);var h=this.xMin||0,d=this.yMin||0,f=this.xMax||0,p=this.yMax||0,g=this.advanceWidth||0;l.strokeStyle="blue",Zg_line(l,a+h*u,-1e4,a+h*u,1e4),Zg_line(l,a+f*u,-1e4,a+f*u,1e4),Zg_line(l,-1e4,o+-d*u,1e4,o+-d*u),Zg_line(l,-1e4,o+-p*u,1e4,o+-p*u),l.strokeStyle="green",Zg_line(l,a+g*u,-1e4,a+g*u,1e4)},C8.prototype.get=function(l){if(void 0===this.glyphs[l]){this.font._push(l),"function"==typeof this.glyphs[l]&&(this.glyphs[l]=this.glyphs[l]());var a=this.glyphs[l],o=this.font._IndexToUnicodeMap[l];if(o)for(var c=0;c<o.unicodes.length;c++)a.addUnicode(o.unicodes[c]);this.font.cffEncoding?a.name=this.font.isCIDFont?"gid"+l:this.font.cffEncoding.charset[l]:this.font.glyphNames.names&&(a.name=this.font.glyphNames.glyphIndexToName(l)),this.glyphs[l].advanceWidth=this.font._hmtxTableData[l].advanceWidth,this.glyphs[l].leftSideBearing=this.font._hmtxTableData[l].leftSideBearing}else"function"==typeof this.glyphs[l]&&(this.glyphs[l]=this.glyphs[l]());return this.glyphs[l]},C8.prototype.push=function(l,a){this.glyphs[l]=a,this.length++};var dh={GlyphSet:C8,glyphLoader:function LXe(l,a){return new Ul({index:a,font:l})},ttfGlyphLoader:function BXe(l,a,o,c,u,h){return function(){var d=new Ul({index:a,font:l});return d.path=function(){o(d,c,u);var f=h(l.glyphs,d);return f.unitsPerEm=l.unitsPerEm,f},PE(d,"xMin","_xMin"),PE(d,"xMax","_xMax"),PE(d,"yMin","_yMin"),PE(d,"yMax","_yMax"),d}},cffGlyphLoader:function VXe(l,a,o,c){return function(){var u=new Ul({index:a,font:l});return u.path=function(){var h=o(l,u,c);return h.unitsPerEm=l.unitsPerEm,h},u}}};function roe(l,a){if(l===a)return!0;if(Array.isArray(l)&&Array.isArray(a)){if(l.length!==a.length)return!1;for(var o=0;o<l.length;o+=1)if(!roe(l[o],a[o]))return!1;return!0}return!1}function x8(l){return l.length<1240?107:l.length<33900?1131:32768}function Xf(l,a,o){var d,f,c=[],u=[],h=Tn.getCard16(l,a);if(0!==h){var p=Tn.getByte(l,a+2);d=a+(h+1)*p+2;for(var g=a+3,m=0;m<h+1;m+=1)c.push(Tn.getOffset(l,g,p)),g+=p;f=d+c[h]}else f=a+2;for(var v=0;v<c.length-1;v+=1){var _=Tn.getBytes(l,d+c[v],d+c[v+1]);o&&(_=o(_)),u.push(_)}return{objects:u,startOffset:a,endOffset:f}}function WXe(l,a){if(28===a)return l.parseByte()<<8|l.parseByte();if(29===a)return l.parseByte()<<24|l.parseByte()<<16|l.parseByte()<<8|l.parseByte();if(30===a)return function HXe(l){for(var a="",c=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var u=l.parseByte(),h=u>>4,d=15&u;if(15===h||(a+=c[h],15===d))break;a+=c[d]}return parseFloat(a)}(l);if(a>=32&&a<=246)return a-139;if(a>=247&&a<=250)return 256*(a-247)+l.parseByte()+108;if(a>=251&&a<=254)return 256*-(a-251)-l.parseByte()-108;throw new Error("Invalid b0 "+a)}function soe(l,a,o){var c=new Tn.Parser(l,a=void 0!==a?a:0),u=[],h=[];for(o=void 0!==o?o:l.length;c.relativeOffset<o;){var d=c.parseByte();d<=21?(12===d&&(d=1200+c.parseByte()),u.push([d,h]),h=[]):h.push(WXe(c,d))}return function GXe(l){for(var a={},o=0;o<l.length;o+=1){var h,c=l[o][0],u=l[o][1];if(h=1===u.length?u[0]:u,a.hasOwnProperty(c)&&!isNaN(a[c]))throw new Error("Object "+a+" already has key "+c);a[c]=h}return a}(u)}function JC(l,a){return a<=390?AE[a]:l[a-391]}function ooe(l,a,o){for(var u,c={},h=0;h<a.length;h+=1){var d=a[h];if(Array.isArray(d.type)){var f=[];f.length=d.type.length;for(var p=0;p<d.type.length;p++)void 0===(u=void 0!==l[d.op]?l[d.op][p]:void 0)&&(u=void 0!==d.value&&void 0!==d.value[p]?d.value[p]:null),"SID"===d.type[p]&&(u=JC(o,u)),f[p]=u;c[d.name]=f}else void 0===(u=l[d.op])&&(u=void 0!==d.value?d.value:null),"SID"===d.type&&(u=JC(o,u)),c[d.name]=u}return c}var aoe=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],loe=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function $Xe(l,a){return ooe(soe(l,0,l.byteLength),aoe,a)}function coe(l,a,o,c){return ooe(soe(l,a,o),loe,c)}function uoe(l,a,o,c){for(var u=[],h=0;h<o.length;h+=1){var f=$Xe(new DataView(new Uint8Array(o[h]).buffer),c);f._subrs=[],f._subrsBias=0,f._defaultWidthX=0,f._nominalWidthX=0;var p=f.private[0],g=f.private[1];if(0!==p&&0!==g){var m=coe(l,g+a,p,c);if(f._defaultWidthX=m.defaultWidthX,f._nominalWidthX=m.nominalWidthX,0!==m.subrs){var _=Xf(l,g+m.subrs+a);f._subrs=_.objects,f._subrsBias=x8(f._subrs)}f._privateDict=m}u.push(f)}return u}function hoe(l,a,o){var c,u,h,d,b,x,C,w,f=new Gs,p=[],g=0,m=!1,v=!1,_=0,y=0;if(l.isCIDFont){var D=l.tables.cff.topDict._fdArray[l.tables.cff.topDict._fdSelect[a.index]];b=D._subrs,x=D._subrsBias,C=D._defaultWidthX,w=D._nominalWidthX}else b=l.tables.cff.topDict._subrs,x=l.tables.cff.topDict._subrsBias,C=l.tables.cff.topDict._defaultWidthX,w=l.tables.cff.topDict._nominalWidthX;var T=C;function A(k,F){v&&f.closePath(),f.moveTo(k,F),v=!0}function I(){p.length%2!=0&&!m&&(T=p.shift()+w),g+=p.length>>1,p.length=0,m=!0}return function N(k){for(var F,B,V,$,q,L,U,z,W,H,j,G,K=0;K<k.length;){var J=k[K];switch(K+=1,J){case 1:case 3:case 18:case 23:I();break;case 4:p.length>1&&!m&&(T=p.shift()+w,m=!0),y+=p.pop(),A(_,y);break;case 5:for(;p.length>0;)_+=p.shift(),y+=p.shift(),f.lineTo(_,y);break;case 6:for(;p.length>0&&(_+=p.shift(),f.lineTo(_,y),0!==p.length);)y+=p.shift(),f.lineTo(_,y);break;case 7:for(;p.length>0&&(y+=p.shift(),f.lineTo(_,y),0!==p.length);)_+=p.shift(),f.lineTo(_,y);break;case 8:for(;p.length>0;)c=_+p.shift(),u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),_=h+p.shift(),y=d+p.shift(),f.curveTo(c,u,h,d,_,y);break;case 10:q=p.pop()+x,(L=b[q])&&N(L);break;case 11:return;case 12:switch(J=k[K],K+=1,J){case 35:c=_+p.shift(),u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d+p.shift(),W=U+p.shift(),H=z+p.shift(),j=W+p.shift(),G=H+p.shift(),_=j+p.shift(),y=G+p.shift(),p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo(W,H,j,G,_,y);break;case 34:c=_+p.shift(),u=y,h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d,W=U+p.shift(),H=d,j=W+p.shift(),G=y,_=j+p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo(W,H,j,G,_,y);break;case 36:c=_+p.shift(),u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d,W=U+p.shift(),H=d,j=W+p.shift(),G=H+p.shift(),_=j+p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo(W,H,j,G,_,y);break;case 37:c=_+p.shift(),u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),U=h+p.shift(),z=d+p.shift(),W=U+p.shift(),H=z+p.shift(),j=W+p.shift(),G=H+p.shift(),Math.abs(j-_)>Math.abs(G-y)?_=j+p.shift():y=G+p.shift(),f.curveTo(c,u,h,d,U,z),f.curveTo(W,H,j,G,_,y);break;default:console.log("Glyph "+a.index+": unknown operator 1200"+J),p.length=0}break;case 14:p.length>0&&!m&&(T=p.shift()+w,m=!0),v&&(f.closePath(),v=!1);break;case 19:case 20:I(),K+=g+7>>3;break;case 21:p.length>2&&!m&&(T=p.shift()+w,m=!0),y+=p.pop(),A(_+=p.pop(),y);break;case 22:p.length>1&&!m&&(T=p.shift()+w,m=!0),A(_+=p.pop(),y);break;case 24:for(;p.length>2;)c=_+p.shift(),u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),_=h+p.shift(),y=d+p.shift(),f.curveTo(c,u,h,d,_,y);_+=p.shift(),y+=p.shift(),f.lineTo(_,y);break;case 25:for(;p.length>6;)_+=p.shift(),y+=p.shift(),f.lineTo(_,y);c=_+p.shift(),u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),_=h+p.shift(),y=d+p.shift(),f.curveTo(c,u,h,d,_,y);break;case 26:for(p.length%2&&(_+=p.shift());p.length>0;)c=_,u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),_=h,y=d+p.shift(),f.curveTo(c,u,h,d,_,y);break;case 27:for(p.length%2&&(y+=p.shift());p.length>0;)c=_+p.shift(),u=y,h=c+p.shift(),d=u+p.shift(),_=h+p.shift(),f.curveTo(c,u,h,d,_,y=d);break;case 28:p.push(((F=k[K])<<24|(B=k[K+1])<<16)>>16),K+=2;break;case 29:q=p.pop()+l.gsubrsBias,(L=l.gsubrs[q])&&N(L);break;case 30:for(;p.length>0&&(c=_,u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),_=h+p.shift(),y=d+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,_,y),0!==p.length);)c=_+p.shift(),u=y,h=c+p.shift(),d=u+p.shift(),y=d+p.shift(),_=h+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,_,y);break;case 31:for(;p.length>0&&(c=_+p.shift(),u=y,h=c+p.shift(),d=u+p.shift(),y=d+p.shift(),_=h+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,_,y),0!==p.length);)c=_,u=y+p.shift(),h=c+p.shift(),d=u+p.shift(),_=h+p.shift(),y=d+(1===p.length?p.shift():0),f.curveTo(c,u,h,d,_,y);break;default:J<32?console.log("Glyph "+a.index+": unknown operator "+J):J<247?p.push(J-139):J<251?(F=k[K],K+=1,p.push(256*(J-247)+F+108)):J<255?(F=k[K],K+=1,p.push(256*-(J-251)-F-108)):(F=k[K],B=k[K+1],V=k[K+2],$=k[K+3],K+=4,p.push((F<<24|B<<16|V<<8|$)/65536))}}}(o),a.advanceWidth=T,f}function doe(l,a){var o,c=AE.indexOf(l);return c>=0&&(o=c),(c=a.indexOf(l))>=0?o=c+AE.length:(o=AE.length+a.length,a.push(l)),o}function foe(l,a,o){for(var c={},u=0;u<l.length;u+=1){var h=l[u],d=a[h.name];void 0!==d&&!roe(d,h.value)&&("SID"===h.type&&(d=doe(d,o)),c[h.op]={name:h.name,type:h.type,value:d})}return c}function poe(l,a){var o=new fn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return o.dict=foe(aoe,l,a),o}function goe(l){var a=new fn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return a.topDicts=[{name:"topDict_0",type:"TABLE",value:l}],a}function nZe(l){var a=[],o=l.path;a.push({name:"width",type:"NUMBER",value:l.advanceWidth});for(var c=0,u=0,h=0;h<o.commands.length;h+=1){var d=void 0,f=void 0,p=o.commands[h];if("Q"===p.type){var g=.3333333333333333,m=2/3;p={type:"C",x:p.x,y:p.y,x1:Math.round(g*c+m*p.x1),y1:Math.round(g*u+m*p.y1),x2:Math.round(g*p.x+m*p.x1),y2:Math.round(g*p.y+m*p.y1)}}if("M"===p.type)d=Math.round(p.x-c),f=Math.round(p.y-u),a.push({name:"dx",type:"NUMBER",value:d}),a.push({name:"dy",type:"NUMBER",value:f}),a.push({name:"rmoveto",type:"OP",value:21}),c=Math.round(p.x),u=Math.round(p.y);else if("L"===p.type)d=Math.round(p.x-c),f=Math.round(p.y-u),a.push({name:"dx",type:"NUMBER",value:d}),a.push({name:"dy",type:"NUMBER",value:f}),a.push({name:"rlineto",type:"OP",value:5}),c=Math.round(p.x),u=Math.round(p.y);else if("C"===p.type){var v=Math.round(p.x1-c),_=Math.round(p.y1-u),y=Math.round(p.x2-p.x1),b=Math.round(p.y2-p.y1);d=Math.round(p.x-p.x2),f=Math.round(p.y-p.y2),a.push({name:"dx1",type:"NUMBER",value:v}),a.push({name:"dy1",type:"NUMBER",value:_}),a.push({name:"dx2",type:"NUMBER",value:y}),a.push({name:"dy2",type:"NUMBER",value:b}),a.push({name:"dx",type:"NUMBER",value:d}),a.push({name:"dy",type:"NUMBER",value:f}),a.push({name:"rrcurveto",type:"OP",value:8}),c=Math.round(p.x),u=Math.round(p.y)}}return a.push({name:"endchar",type:"OP",value:14}),a}var moe_parse=function ZXe(l,a,o,c){o.tables.cff={};var u=function jXe(l,a){var o={};return o.formatMajor=Tn.getCard8(l,a),o.formatMinor=Tn.getCard8(l,a+1),o.size=Tn.getCard8(l,a+2),o.offsetSize=Tn.getCard8(l,a+3),o.startOffset=a,o.endOffset=a+4,o}(l,a),h=Xf(l,u.endOffset,Tn.bytesToString),d=Xf(l,h.endOffset),f=Xf(l,d.endOffset,Tn.bytesToString),p=Xf(l,f.endOffset);o.gsubrs=p.objects,o.gsubrsBias=x8(o.gsubrs);var g=uoe(l,a,d.objects,f.objects);if(1!==g.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+g.length);var m=g[0];if(o.tables.cff.topDict=m,m._privateDict&&(o.defaultWidthX=m._privateDict.defaultWidthX,o.nominalWidthX=m._privateDict.nominalWidthX),void 0!==m.ros[0]&&void 0!==m.ros[1]&&(o.isCIDFont=!0),o.isCIDFont){var v=m.fdArray,_=m.fdSelect;if(0===v||0===_)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var y=Xf(l,v+=a),b=uoe(l,a,y.objects,f.objects);m._fdArray=b,m._fdSelect=function XXe(l,a,o,c){var h,u=[],d=new Tn.Parser(l,a),f=d.parseCard8();if(0===f)for(var p=0;p<o;p++){if((h=d.parseCard8())>=c)throw new Error("CFF table CID Font FDSelect has bad FD index value "+h+" (FD count "+c+")");u.push(h)}else{if(3!==f)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+f);var g=d.parseCard16(),m=d.parseCard16();if(0!==m)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+m);for(var v,_=0;_<g;_++){if(h=d.parseCard8(),v=d.parseCard16(),h>=c)throw new Error("CFF table CID Font FDSelect has bad FD index value "+h+" (FD count "+c+")");if(v>o)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+v);for(;m<v;m++)u.push(h);m=v}if(v!==o)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+v)}return u}(l,_+=a,o.numGlyphs,b.length)}var D,x=a+m.private[1],C=coe(l,x,m.private[0],f.objects);if(o.defaultWidthX=C.defaultWidthX,o.nominalWidthX=C.nominalWidthX,0!==C.subrs){var S=Xf(l,x+C.subrs);o.subrs=S.objects,o.subrsBias=x8(o.subrs)}else o.subrs=[],o.subrsBias=0;c.lowMemory?(D=function zXe(l,a){var u,h,o=[],c=Tn.getCard16(l,a);if(0!==c){var d=Tn.getByte(l,a+2);u=a+(c+1)*d+2;for(var f=a+3,p=0;p<c+1;p+=1)o.push(Tn.getOffset(l,f,d)),f+=d;h=u+o[c]}else h=a+2;return{offsets:o,startOffset:a,endOffset:h}}(l,a+m.charStrings),o.nGlyphs=D.offsets.length):(D=Xf(l,a+m.charStrings),o.nGlyphs=D.objects.length);var T=function qXe(l,a,o,c){var u,h,d=new Tn.Parser(l,a);o-=1;var f=[".notdef"],p=d.parseCard8();if(0===p)for(var g=0;g<o;g+=1)u=d.parseSID(),f.push(JC(c,u));else if(1===p)for(;f.length<=o;){u=d.parseSID(),h=d.parseCard8();for(var m=0;m<=h;m+=1)f.push(JC(c,u)),u+=1}else{if(2!==p)throw new Error("Unknown charset format "+p);for(;f.length<=o;){u=d.parseSID(),h=d.parseCard16();for(var v=0;v<=h;v+=1)f.push(JC(c,u)),u+=1}}return f}(l,a+m.charset,o.nGlyphs,f.objects);if(o.cffEncoding=0===m.encoding?new IE(AXe,T):1===m.encoding?new IE(IXe,T):function YXe(l,a,o){var c,u={},h=new Tn.Parser(l,a),d=h.parseCard8();if(0===d)for(var f=h.parseCard8(),p=0;p<f;p+=1)u[c=h.parseCard8()]=p;else{if(1!==d)throw new Error("Unknown encoding format "+d);var g=h.parseCard8();c=1;for(var m=0;m<g;m+=1)for(var v=h.parseCard8(),_=h.parseCard8(),y=v;y<=v+_;y+=1)u[y]=c,c+=1}return new IE(u,o)}(l,a+m.encoding,T),o.encoding=o.encoding||o.cffEncoding,o.glyphs=new dh.GlyphSet(o),c.lowMemory)o._push=function(N){var k=function UXe(l,a,o,c,u){var h=Tn.getCard16(o,c),d=0;0!==h&&(d=c+(h+1)*Tn.getByte(o,c+2)+2);var p=Tn.getBytes(o,d+a[l],d+a[l+1]);return u&&(p=u(p)),p}(N,D.offsets,l,a+m.charStrings);o.glyphs.push(N,dh.cffGlyphLoader(o,N,hoe,k))};else for(var A=0;A<o.nGlyphs;A+=1)o.glyphs.push(A,dh.cffGlyphLoader(o,A,hoe,D.objects[A]))},moe_make=function sZe(l,a){for(var f,o=new fn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),c=1/a.unitsPerEm,u={version:a.version,fullName:a.fullName,familyName:a.familyName,weight:a.weightName,fontBBox:a.fontBBox||[0,0,0,0],fontMatrix:[c,0,0,c,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},d=[],p=1;p<l.length;p+=1)f=l.get(p),d.push(f.name);var g=[];o.header=function KXe(){return new fn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}(),o.nameIndex=function QXe(l){var a=new fn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);a.names=[];for(var o=0;o<l.length;o+=1)a.names.push({name:"name_"+o,type:"NAME",value:l[o]});return a}([a.postScriptName]);var m=poe(u,g);o.topDictIndex=goe(m),o.globalSubrIndex=function eZe(){return new fn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}(),o.charsets=function tZe(l,a){for(var o=new fn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),c=0;c<l.length;c+=1){var h=doe(l[c],a);o.fields.push({name:"glyph_"+c,type:"SID",value:h})}return o}(d,g),o.charStringsIndex=function iZe(l){for(var a=new fn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),o=0;o<l.length;o+=1){var c=l.get(o),u=nZe(c);a.charStrings.push({name:c.name,type:"CHARSTRING",value:u})}return a}(l),o.privateDict=function rZe(l,a){var o=new fn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return o.dict=foe(loe,l,a),o}({},g),o.stringIndex=function JXe(l){var a=new fn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);a.strings=[];for(var o=0;o<l.length;o+=1)a.strings.push({name:"string_"+o,type:"STRING",value:l[o]});return a}(g);var v=o.header.sizeOf()+o.nameIndex.sizeOf()+o.topDictIndex.sizeOf()+o.stringIndex.sizeOf()+o.globalSubrIndex.sizeOf();return u.charset=v,u.encoding=0,u.charStrings=u.charset+o.charsets.sizeOf(),u.private[1]=u.charStrings+o.charStringsIndex.sizeOf(),m=poe(u,g),o.topDictIndex=goe(m),o},voe_parse=function oZe(l,a){var o={},c=new Tn.Parser(l,a);return o.version=c.parseVersion(),o.fontRevision=Math.round(1e3*c.parseFixed())/1e3,o.checkSumAdjustment=c.parseULong(),o.magicNumber=c.parseULong(),Fn.argument(1594834165===o.magicNumber,"Font header has wrong magic number."),o.flags=c.parseUShort(),o.unitsPerEm=c.parseUShort(),o.created=c.parseLongDateTime(),o.modified=c.parseLongDateTime(),o.xMin=c.parseShort(),o.yMin=c.parseShort(),o.xMax=c.parseShort(),o.yMax=c.parseShort(),o.macStyle=c.parseUShort(),o.lowestRecPPEM=c.parseUShort(),o.fontDirectionHint=c.parseShort(),o.indexToLocFormat=c.parseShort(),o.glyphDataFormat=c.parseShort(),o},voe_make=function aZe(l){var a=Math.round((new Date).getTime()/1e3)+2082844800,o=a;return l.createdTimestamp&&(o=l.createdTimestamp+2082844800),new fn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:o},{name:"modified",type:"LONGDATETIME",value:a},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],l)},_oe_parse=function lZe(l,a){var o={},c=new Tn.Parser(l,a);return o.version=c.parseVersion(),o.ascender=c.parseShort(),o.descender=c.parseShort(),o.lineGap=c.parseShort(),o.advanceWidthMax=c.parseUShort(),o.minLeftSideBearing=c.parseShort(),o.minRightSideBearing=c.parseShort(),o.xMaxExtent=c.parseShort(),o.caretSlopeRise=c.parseShort(),o.caretSlopeRun=c.parseShort(),o.caretOffset=c.parseShort(),c.relativeOffset+=8,o.metricDataFormat=c.parseShort(),o.numberOfHMetrics=c.parseUShort(),o},_oe_make=function cZe(l){return new fn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],l)},yoe_parse=function dZe(l,a,o,c,u,h,d){d.lowMemory?function hZe(l,a,o,c,u){l._hmtxTableData={};for(var h,d,f=new Tn.Parser(a,o),p=0;p<u;p+=1)p<c&&(h=f.parseUShort(),d=f.parseShort()),l._hmtxTableData[p]={advanceWidth:h,leftSideBearing:d}}(l,a,o,c,u):function uZe(l,a,o,c,u){for(var h,d,f=new Tn.Parser(l,a),p=0;p<c;p+=1){p<o&&(h=f.parseUShort(),d=f.parseShort());var g=u.get(p);g.advanceWidth=h,g.leftSideBearing=d}}(a,o,c,u,h)},yoe_make=function fZe(l){for(var a=new fn.Table("hmtx",[]),o=0;o<l.length;o+=1){var c=l.get(o),h=c.leftSideBearing||0;a.fields.push({name:"advanceWidth_"+o,type:"USHORT",value:c.advanceWidth||0}),a.fields.push({name:"leftSideBearing_"+o,type:"SHORT",value:h})}return a},boe_make=function pZe(l){for(var a=new fn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:l.length}]),o="",c=12+4*l.length,u=0;u<l.length;++u){var h=o.indexOf(l[u]);h<0&&(h=o.length,o+=l[u]),a.fields.push({name:"offset "+u,type:"USHORT",value:c+h}),a.fields.push({name:"length "+u,type:"USHORT",value:l[u].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:o}),a},boe_parse=function gZe(l,a){var o=new Tn.Parser(l,a),c=o.parseULong();Fn.argument(1===c,"Unsupported ltag table version."),o.skip("uLong",1);for(var u=o.parseULong(),h=[],d=0;d<u;d++){for(var f="",p=a+o.parseUShort(),g=o.parseUShort(),m=p;m<p+g;++m)f+=String.fromCharCode(l.getInt8(m));h.push(f)}return h},Coe_parse=function mZe(l,a){var o={},c=new Tn.Parser(l,a);return o.version=c.parseVersion(),o.numGlyphs=c.parseUShort(),1===o.version&&(o.maxPoints=c.parseUShort(),o.maxContours=c.parseUShort(),o.maxCompositePoints=c.parseUShort(),o.maxCompositeContours=c.parseUShort(),o.maxZones=c.parseUShort(),o.maxTwilightPoints=c.parseUShort(),o.maxStorage=c.parseUShort(),o.maxFunctionDefs=c.parseUShort(),o.maxInstructionDefs=c.parseUShort(),o.maxStackElements=c.parseUShort(),o.maxSizeOfInstructions=c.parseUShort(),o.maxComponentElements=c.parseUShort(),o.maxComponentDepth=c.parseUShort()),o},Coe_make=function vZe(l){return new fn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:l}])},xoe=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],woe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},_Ze={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Soe={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function yZe(l,a,o){switch(l){case 0:if(65535===a)return"und";if(o)return o[a];break;case 1:return woe[a];case 3:return Soe[a]}}var w8="utf-16",bZe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},CZe={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Toe(l,a,o){switch(l){case 0:return w8;case 1:return CZe[o]||bZe[a];case 3:if(1===a||10===a)return w8}}function S8(l){var a={};for(var o in l)a[l[o]]=parseInt(o);return a}function Doe(l,a,o,c,u,h){return new fn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:l},{name:"encodingID",type:"USHORT",value:a},{name:"languageID",type:"USHORT",value:o},{name:"nameID",type:"USHORT",value:c},{name:"length",type:"USHORT",value:u},{name:"offset",type:"USHORT",value:h}])}function Moe(l,a){var o=function wZe(l,a){var o=l.length,c=a.length-o+1;e:for(var u=0;u<c;u++)for(;u<c;u++){for(var h=0;h<o;h++)if(a[u+h]!==l[h])continue e;return u}return-1}(l,a);if(o<0){o=a.length;for(var c=0,u=l.length;c<u;++c)a.push(l[c])}return o}var Eoe_parse=function xZe(l,a,o){for(var c={},u=new Tn.Parser(l,a),h=u.parseUShort(),d=u.parseUShort(),f=u.offset+u.parseUShort(),p=0;p<d;p++){var g=u.parseUShort(),m=u.parseUShort(),v=u.parseUShort(),_=u.parseUShort(),y=xoe[_]||_,b=u.parseUShort(),x=u.parseUShort(),C=yZe(g,v,o),w=Toe(g,m,v);if(void 0!==w&&void 0!==C){var S;if(S=w===w8?F_.UTF16(l,f+x,b):F_.MACSTRING(l,f+x,b,w)){var D=c[y];void 0===D&&(D=c[y]={}),D[C]=S}}}return 1===h&&u.parseUShort(),c},Eoe_make=function SZe(l,a){var o,c=[],u={},h=S8(xoe);for(var d in l){var f=h[d];if(void 0===f&&(f=d),o=parseInt(f),isNaN(o))throw new Error('Name table entry "'+d+'" does not exist, see nameTableNames for complete list.');u[o]=l[d],c.push(o)}for(var p=S8(woe),g=S8(Soe),m=[],v=[],_=0;_<c.length;_++){var y=u[o=c[_]];for(var b in y){var x=y[b],C=1,w=p[b],S=_Ze[w],D=Toe(C,S,w),T=sn.MACSTRING(x,D);void 0===T&&(C=0,(w=a.indexOf(b))<0&&(w=a.length,a.push(b)),S=4,T=sn.UTF16(x));var A=Moe(T,v);m.push(Doe(C,S,w,o,T.length,A));var I=g[b];if(void 0!==I){var N=sn.UTF16(x),k=Moe(N,v);m.push(Doe(3,1,I,o,N.length,k))}}}m.sort(function(V,$){return V.platformID-$.platformID||V.encodingID-$.encodingID||V.languageID-$.languageID||V.nameID-$.nameID});for(var F=new fn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:m.length},{name:"stringOffset",type:"USHORT",value:6+12*m.length}]),B=0;B<m.length;B++)F.fields.push({name:"record_"+B,type:"RECORD",value:m[B]});return F.fields.push({name:"strings",type:"LITERAL",value:v}),F},T8=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],D8_parse=function DZe(l,a){var o={},c=new Tn.Parser(l,a);o.version=c.parseUShort(),o.xAvgCharWidth=c.parseShort(),o.usWeightClass=c.parseUShort(),o.usWidthClass=c.parseUShort(),o.fsType=c.parseUShort(),o.ySubscriptXSize=c.parseShort(),o.ySubscriptYSize=c.parseShort(),o.ySubscriptXOffset=c.parseShort(),o.ySubscriptYOffset=c.parseShort(),o.ySuperscriptXSize=c.parseShort(),o.ySuperscriptYSize=c.parseShort(),o.ySuperscriptXOffset=c.parseShort(),o.ySuperscriptYOffset=c.parseShort(),o.yStrikeoutSize=c.parseShort(),o.yStrikeoutPosition=c.parseShort(),o.sFamilyClass=c.parseShort(),o.panose=[];for(var u=0;u<10;u++)o.panose[u]=c.parseByte();return o.ulUnicodeRange1=c.parseULong(),o.ulUnicodeRange2=c.parseULong(),o.ulUnicodeRange3=c.parseULong(),o.ulUnicodeRange4=c.parseULong(),o.achVendID=String.fromCharCode(c.parseByte(),c.parseByte(),c.parseByte(),c.parseByte()),o.fsSelection=c.parseUShort(),o.usFirstCharIndex=c.parseUShort(),o.usLastCharIndex=c.parseUShort(),o.sTypoAscender=c.parseShort(),o.sTypoDescender=c.parseShort(),o.sTypoLineGap=c.parseShort(),o.usWinAscent=c.parseUShort(),o.usWinDescent=c.parseUShort(),o.version>=1&&(o.ulCodePageRange1=c.parseULong(),o.ulCodePageRange2=c.parseULong()),o.version>=2&&(o.sxHeight=c.parseShort(),o.sCapHeight=c.parseShort(),o.usDefaultChar=c.parseUShort(),o.usBreakChar=c.parseUShort(),o.usMaxContent=c.parseUShort()),o},D8_make=function MZe(l){return new fn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],l)},D8_getUnicodeRange=function TZe(l){for(var a=0;a<T8.length;a+=1){var o=T8[a];if(l>=o.begin&&l<o.end)return a}return-1},koe_parse=function EZe(l,a){var o={},c=new Tn.Parser(l,a);switch(o.version=c.parseVersion(),o.italicAngle=c.parseFixed(),o.underlinePosition=c.parseShort(),o.underlineThickness=c.parseShort(),o.isFixedPitch=c.parseULong(),o.minMemType42=c.parseULong(),o.maxMemType42=c.parseULong(),o.minMemType1=c.parseULong(),o.maxMemType1=c.parseULong(),o.version){case 1:o.names=Xg.slice();break;case 2:o.numberOfGlyphs=c.parseUShort(),o.glyphNameIndex=new Array(o.numberOfGlyphs);for(var u=0;u<o.numberOfGlyphs;u++)o.glyphNameIndex[u]=c.parseUShort();o.names=[];for(var h=0;h<o.numberOfGlyphs;h++)if(o.glyphNameIndex[h]>=Xg.length){var d=c.parseChar();o.names.push(c.parseString(d))}break;case 2.5:o.numberOfGlyphs=c.parseUShort(),o.offset=new Array(o.numberOfGlyphs);for(var f=0;f<o.numberOfGlyphs;f++)o.offset[f]=c.parseChar()}return o},koe_make=function kZe(){return new fn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},fu=new Array(9);fu[1]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();return 1===o?{substFormat:1,coverage:this.parsePointer(Je.coverage),deltaGlyphId:this.parseUShort()}:2===o?{substFormat:2,coverage:this.parsePointer(Je.coverage),substitute:this.parseOffset16List()}:void Fn.assert(!1,"0x"+a.toString(16)+": lookup type 1 format must be 1 or 2.")},fu[2]=function(){var a=this.parseUShort();return Fn.argument(1===a,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Je.coverage),sequences:this.parseListOfLists()}},fu[3]=function(){var a=this.parseUShort();return Fn.argument(1===a,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Je.coverage),alternateSets:this.parseListOfLists()}},fu[4]=function(){var a=this.parseUShort();return Fn.argument(1===a,"GSUB ligature table identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Je.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var R_={sequenceIndex:Je.uShort,lookupListIndex:Je.uShort};fu[5]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();if(1===o)return{substFormat:o,coverage:this.parsePointer(Je.coverage),ruleSets:this.parseListOfLists(function(){var h=this.parseUShort(),d=this.parseUShort();return{input:this.parseUShortList(h-1),lookupRecords:this.parseRecordList(d,R_)}})};if(2===o)return{substFormat:o,coverage:this.parsePointer(Je.coverage),classDef:this.parsePointer(Je.classDef),classSets:this.parseListOfLists(function(){var h=this.parseUShort(),d=this.parseUShort();return{classes:this.parseUShortList(h-1),lookupRecords:this.parseRecordList(d,R_)}})};if(3===o){var c=this.parseUShort(),u=this.parseUShort();return{substFormat:o,coverages:this.parseList(c,Je.pointer(Je.coverage)),lookupRecords:this.parseRecordList(u,R_)}}Fn.assert(!1,"0x"+a.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},fu[6]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();return 1===o?{substFormat:1,coverage:this.parsePointer(Je.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(R_)}})}:2===o?{substFormat:2,coverage:this.parsePointer(Je.coverage),backtrackClassDef:this.parsePointer(Je.classDef),inputClassDef:this.parsePointer(Je.classDef),lookaheadClassDef:this.parsePointer(Je.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(R_)}})}:3===o?{substFormat:3,backtrackCoverage:this.parseList(Je.pointer(Je.coverage)),inputCoverage:this.parseList(Je.pointer(Je.coverage)),lookaheadCoverage:this.parseList(Je.pointer(Je.coverage)),lookupRecords:this.parseRecordList(R_)}:void Fn.assert(!1,"0x"+a.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},fu[7]=function(){var a=this.parseUShort();Fn.argument(1===a,"GSUB Extension Substitution subtable identifier-format must be 1");var o=this.parseUShort(),c=new Je(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:o,extension:fu[o].call(c)}},fu[8]=function(){var a=this.parseUShort();return Fn.argument(1===a,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:a,coverage:this.parsePointer(Je.coverage),backtrackCoverage:this.parseList(Je.pointer(Je.coverage)),lookaheadCoverage:this.parseList(Je.pointer(Je.coverage)),substitutes:this.parseUShortList()}};var N_=new Array(9);N_[1]=function(a){return new fn.Table("substitutionTable",1===a.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new fn.Coverage(a.coverage)},{name:"deltaGlyphID",type:"USHORT",value:a.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new fn.Coverage(a.coverage)}].concat(fn.ushortList("substitute",a.substitute)))},N_[2]=function(a){return Fn.assert(1===a.substFormat,"Lookup type 2 substFormat must be 1."),new fn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new fn.Coverage(a.coverage)}].concat(fn.tableList("seqSet",a.sequences,function(o){return new fn.Table("sequenceSetTable",fn.ushortList("sequence",o))})))},N_[3]=function(a){return Fn.assert(1===a.substFormat,"Lookup type 3 substFormat must be 1."),new fn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new fn.Coverage(a.coverage)}].concat(fn.tableList("altSet",a.alternateSets,function(o){return new fn.Table("alternateSetTable",fn.ushortList("alternate",o))})))},N_[4]=function(a){return Fn.assert(1===a.substFormat,"Lookup type 4 substFormat must be 1."),new fn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new fn.Coverage(a.coverage)}].concat(fn.tableList("ligSet",a.ligatureSets,function(o){return new fn.Table("ligatureSetTable",fn.tableList("ligature",o,function(c){return new fn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:c.ligGlyph}].concat(fn.ushortList("component",c.components,c.components.length+1)))}))})))},N_[6]=function(a){if(1===a.substFormat)return new fn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:a.substFormat},{name:"coverage",type:"TABLE",value:new fn.Coverage(a.coverage)}].concat(fn.tableList("chainRuleSet",a.chainRuleSets,function(h){return new fn.Table("chainRuleSetTable",fn.tableList("chainRule",h,function(d){var f=fn.ushortList("backtrackGlyph",d.backtrack,d.backtrack.length).concat(fn.ushortList("inputGlyph",d.input,d.input.length+1)).concat(fn.ushortList("lookaheadGlyph",d.lookahead,d.lookahead.length)).concat(fn.ushortList("substitution",[],d.lookupRecords.length));return d.lookupRecords.forEach(function(p,g){f=f.concat({name:"sequenceIndex"+g,type:"USHORT",value:p.sequenceIndex}).concat({name:"lookupListIndex"+g,type:"USHORT",value:p.lookupListIndex})}),new fn.Table("chainRuleTable",f)}))})));if(2===a.substFormat)Fn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===a.substFormat){var c=[{name:"substFormat",type:"USHORT",value:a.substFormat}];return c.push({name:"backtrackGlyphCount",type:"USHORT",value:a.backtrackCoverage.length}),a.backtrackCoverage.forEach(function(h,d){c.push({name:"backtrackCoverage"+d,type:"TABLE",value:new fn.Coverage(h)})}),c.push({name:"inputGlyphCount",type:"USHORT",value:a.inputCoverage.length}),a.inputCoverage.forEach(function(h,d){c.push({name:"inputCoverage"+d,type:"TABLE",value:new fn.Coverage(h)})}),c.push({name:"lookaheadGlyphCount",type:"USHORT",value:a.lookaheadCoverage.length}),a.lookaheadCoverage.forEach(function(h,d){c.push({name:"lookaheadCoverage"+d,type:"TABLE",value:new fn.Coverage(h)})}),c.push({name:"substitutionCount",type:"USHORT",value:a.lookupRecords.length}),a.lookupRecords.forEach(function(h,d){c=c.concat({name:"sequenceIndex"+d,type:"USHORT",value:h.sequenceIndex}).concat({name:"lookupListIndex"+d,type:"USHORT",value:h.lookupListIndex})}),new fn.Table("chainContextTable",c)}Fn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var Aoe_parse=function AZe(l,a){var o=new Je(l,a=a||0),c=o.parseVersion(1);return Fn.argument(1===c||1.1===c,"Unsupported GSUB table version."),1===c?{version:c,scripts:o.parseScriptList(),features:o.parseFeatureList(),lookups:o.parseLookupList(fu)}:{version:c,scripts:o.parseScriptList(),features:o.parseFeatureList(),lookups:o.parseLookupList(fu),variations:o.parseFeatureVariationsList()}},Aoe_make=function IZe(l){return new fn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new fn.ScriptList(l.scripts)},{name:"features",type:"TABLE",value:new fn.FeatureList(l.features)},{name:"lookups",type:"TABLE",value:new fn.LookupList(l.lookups,N_)}])},Ioe_parse=function PZe(l,a){var o=new Tn.Parser(l,a),c=o.parseULong();Fn.argument(1===c,"Unsupported META table version."),o.parseULong(),o.parseULong();for(var u=o.parseULong(),h={},d=0;d<u;d++){var f=o.parseTag(),p=o.parseULong(),g=o.parseULong(),m=F_.UTF8(l,a+p,g);h[f]=m}return h},Ioe_make=function OZe(l){var a=Object.keys(l).length,o="",c=16+12*a,u=new fn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:c},{name:"numTags",type:"ULONG",value:a}]);for(var h in l){var d=o.length;o+=l[h],u.fields.push({name:"tag "+h,type:"TAG",value:h}),u.fields.push({name:"offset "+h,type:"ULONG",value:c+d}),u.fields.push({name:"length "+h,type:"ULONG",value:l[h].length})}return u.fields.push({name:"stringPool",type:"CHARARRAY",value:o}),u},Poe_parse=function FZe(l,a){var o=new Je(l,a),c=o.parseUShort();Fn.argument(0===c,"Only COLRv0 supported.");var u=o.parseUShort(),h=o.parseOffset32(),d=o.parseOffset32(),f=o.parseUShort();o.relativeOffset=h;var p=o.parseRecordList(u,{glyphID:Je.uShort,firstLayerIndex:Je.uShort,numLayers:Je.uShort});return o.relativeOffset=d,{version:c,baseGlyphRecords:p,layerRecords:o.parseRecordList(f,{glyphID:Je.uShort,paletteIndex:Je.uShort})}},Poe_make=function RZe(l){var a=l.version;void 0===a&&(a=0);var o=l.baseGlyphRecords;void 0===o&&(o=[]);var c=l.layerRecords;void 0===c&&(c=[]),Fn.argument(0===a,"Only COLRv0 supported.");var u=14;return new fn.Table("COLR",[{name:"version",type:"USHORT",value:a},{name:"numBaseGlyphRecords",type:"USHORT",value:o.length},{name:"baseGlyphRecordsOffset",type:"ULONG",value:u},{name:"layerRecordsOffset",type:"ULONG",value:u+6*o.length},{name:"numLayerRecords",type:"USHORT",value:c.length}].concat(o.map(function(d,f){return[{name:"glyphID_"+f,type:"USHORT",value:d.glyphID},{name:"firstLayerIndex_"+f,type:"USHORT",value:d.firstLayerIndex},{name:"numLayers_"+f,type:"USHORT",value:d.numLayers}]}).flat(),c.map(function(d,f){return[{name:"LayerGlyphID_"+f,type:"USHORT",value:d.glyphID},{name:"paletteIndex_"+f,type:"USHORT",value:d.paletteIndex}]}).flat()))},Ooe_parse=function NZe(l,a){var o=new Je(l,a),c=o.parseShort(),u=o.parseShort(),h=o.parseShort(),d=o.parseShort(),f=o.parseOffset32(),p=o.parseUShortList(h);return o.relativeOffset=f,{version:c,numPaletteEntries:u,colorRecords:o.parseULongList(d),colorRecordIndices:p}},Ooe_make=function LZe(l){var a=l.version;void 0===a&&(a=0);var o=l.numPaletteEntries;void 0===o&&(o=0);var c=l.colorRecords;void 0===c&&(c=[]);var u=l.colorRecordIndices;return void 0===u&&(u=[0]),Fn.argument(0===a,"Only CPALv0 are supported."),Fn.argument(c.length,"No colorRecords given."),Fn.argument(u.length,"No colorRecordIndices given."),Fn.argument(!o&&1==u.length,"Can't infer numPaletteEntries on multiple colorRecordIndices"),new fn.Table("CPAL",[{name:"version",type:"USHORT",value:a},{name:"numPaletteEntries",type:"USHORT",value:o||c.length},{name:"numPalettes",type:"USHORT",value:u.length},{name:"numColorRecords",type:"USHORT",value:c.length},{name:"colorRecordsArrayOffset",type:"ULONG",value:12+2*u.length}].concat(u.map(function(h,d){return{name:"colorRecordIndices_"+d,type:"USHORT",value:h}}),c.map(function(h,d){return{name:"colorRecords_"+d,type:"ULONG",value:h}})))};function Foe(l){return Math.log(l)/Math.log(2)|0}function M8(l){for(;l.length%4!=0;)l.push(0);for(var a=0,o=0;o<l.length;o+=4)a+=(l[o]<<24)+(l[o+1]<<16)+(l[o+2]<<8)+l[o+3];return a%Math.pow(2,32)}function Roe(l,a,o,c){return new fn.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==l?l:""},{name:"checkSum",type:"ULONG",value:void 0!==a?a:0},{name:"offset",type:"ULONG",value:void 0!==o?o:0},{name:"length",type:"ULONG",value:void 0!==c?c:0}])}function Noe(l){var a=new fn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);a.tables=l,a.numTables=l.length;var o=Math.pow(2,Foe(a.numTables));a.searchRange=16*o,a.entrySelector=Foe(o),a.rangeShift=16*a.numTables-a.searchRange;for(var c=[],u=[],h=a.sizeOf()+Roe().sizeOf()*a.numTables;h%4!=0;)h+=1,u.push({name:"padding",type:"BYTE",value:0});for(var d=0;d<l.length;d+=1){var f=l[d];Fn.argument(4===f.tableName.length,"Table name"+f.tableName+" is invalid.");var p=f.sizeOf(),g=Roe(f.tableName,M8(f.encode()),h,p);for(c.push({name:g.tag+" Table Record",type:"RECORD",value:g}),u.push({name:f.tableName+" table",type:"RECORD",value:f}),h+=p,Fn.argument(!isNaN(h),"Something went wrong calculating the offset.");h%4!=0;)h+=1,u.push({name:"padding",type:"BYTE",value:0})}return c.sort(function(m,v){return m.value.tag>v.value.tag?1:-1}),a.fields=a.fields.concat(c),a.fields=a.fields.concat(u),a}function Loe(l,a,o){for(var c=0;c<a.length;c+=1){var u=l.charToGlyphIndex(a[c]);if(u>0)return l.glyphs.get(u).getMetrics()}return o}function BZe(l){for(var a=0,o=0;o<l.length;o+=1)a+=l[o];return a/l.length}var zZe_fontToTable=function VZe(l){for(var p,a=[],o=[],c=[],u=[],h=[],d=[],f=[],g=0,m=0,v=0,_=0,y=0,b=0;b<l.glyphs.length;b+=1){var x=l.glyphs.get(b),C=0|x.unicode;if(isNaN(x.advanceWidth))throw new Error("Glyph "+x.name+" ("+b+"): advanceWidth is not a number.");(p>C||void 0===p)&&C>0&&(p=C),g<C&&(g=C);var w=D8_getUnicodeRange(C);if(w<32)m|=1<<w;else if(w<64)v|=1<<w-32;else if(w<96)_|=1<<w-64;else{if(!(w<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");y|=1<<w-96}if(".notdef"!==x.name){var S=x.getMetrics();a.push(S.xMin),o.push(S.yMin),c.push(S.xMax),u.push(S.yMax),d.push(S.leftSideBearing),f.push(S.rightSideBearing),h.push(x.advanceWidth)}}var D={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,o),xMax:Math.max.apply(null,c),yMax:Math.max.apply(null,u),advanceWidthMax:Math.max.apply(null,h),advanceWidthAvg:BZe(h),minLeftSideBearing:Math.min.apply(null,d),maxLeftSideBearing:Math.max.apply(null,d),minRightSideBearing:Math.min.apply(null,f)};D.ascender=l.ascender,D.descender=l.descender;var T=voe_make({flags:3,unitsPerEm:l.unitsPerEm,xMin:D.xMin,yMin:D.yMin,xMax:D.xMax,yMax:D.yMax,lowestRecPPEM:3,createdTimestamp:l.createdTimestamp}),A=_oe_make({ascender:D.ascender,descender:D.descender,advanceWidthMax:D.advanceWidthMax,minLeftSideBearing:D.minLeftSideBearing,minRightSideBearing:D.minRightSideBearing,xMaxExtent:D.maxLeftSideBearing+(D.xMax-D.xMin),numberOfHMetrics:l.glyphs.length}),I=Coe_make(l.glyphs.length),N=D8_make(Object.assign({xAvgCharWidth:Math.round(D.advanceWidthAvg),usFirstCharIndex:p,usLastCharIndex:g,ulUnicodeRange1:m,ulUnicodeRange2:v,ulUnicodeRange3:_,ulUnicodeRange4:y,sTypoAscender:D.ascender,sTypoDescender:D.descender,sTypoLineGap:0,usWinAscent:D.yMax,usWinDescent:Math.abs(D.yMin),ulCodePageRange1:1,sxHeight:Loe(l,"xyvw",{yMax:Math.round(D.ascender/2)}).yMax,sCapHeight:Loe(l,"HIKLEFJMNTZBDPRAGOQSUVWXY",D).yMax,usDefaultChar:l.hasChar(" ")?32:0,usBreakChar:l.hasChar(" ")?32:0},l.tables.os2)),k=yoe_make(l.glyphs),F=toe_make(l.glyphs),B=l.getEnglishName("fontFamily"),V=l.getEnglishName("fontSubfamily"),$=B+" "+V,q=l.getEnglishName("postScriptName");q||(q=B.replace(/\s/g,"")+"-"+V);var L={};for(var U in l.names)L[U]=l.names[U];L.uniqueID||(L.uniqueID={en:l.getEnglishName("manufacturer")+":"+$}),L.postScriptName||(L.postScriptName={en:q}),L.preferredFamily||(L.preferredFamily=l.names.fontFamily),L.preferredSubfamily||(L.preferredSubfamily=l.names.fontSubfamily);var z=[],W=Eoe_make(L,z),H=z.length>0?boe_make(z):void 0,j=koe_make(),G=moe_make(l.glyphs,{version:l.getEnglishName("version"),fullName:$,familyName:B,weightName:V,postScriptName:q,unitsPerEm:l.unitsPerEm,fontBBox:[0,D.yMin,D.ascender,D.advanceWidthMax]}),K=l.metas&&Object.keys(l.metas).length>0?Ioe_make(l.metas):void 0,J=[T,A,I,N,W,F,j,G,k];H&&J.push(H),l.tables.gsub&&J.push(Aoe_make(l.tables.gsub)),l.tables.cpal&&J.push(Ooe_make(l.tables.cpal)),l.tables.colr&&J.push(Poe_make(l.tables.colr)),K&&J.push(K);for(var ce=Noe(J),xe=M8(ce.encode()),ve=ce.fields,De=!1,We=0;We<ve.length;We+=1)if("head table"===ve[We].name){ve[We].value.checkSumAdjustment=2981146554-xe,De=!0;break}if(!De)throw new Error("Could not find head table with checkSum to adjust.");return ce};function E8(l,a){for(var o=0,c=l.length-1;o<=c;){var u=o+c>>>1,h=l[u].tag;if(h===a)return u;h<a?o=u+1:c=u-1}return-o-1}function Boe(l,a){for(var o=0,c=l.length-1;o<=c;){var u=o+c>>>1,h=l[u];if(h===a)return u;h<a?o=u+1:c=u-1}return-o-1}function Voe(l,a){for(var o,c=0,u=l.length-1;c<=u;){var h=c+u>>>1,d=(o=l[h]).start;if(d===a)return o;d<a?c=h+1:u=h-1}if(c>0)return a>(o=l[c-1]).end?0:o}function ex(l,a){this.font=l,this.tableName=a}function tx(l){ex.call(this,l,"gpos")}function Hl(l){ex.call(this,l,"gsub")}function UZe(l,a){var o=l.length;if(o!==a.length)return!1;for(var c=0;c<o;c++)if(l[c]!==a[c])return!1;return!0}function k8(l,a,o){for(var c=l.subtables,u=0;u<c.length;u++){var h=c[u];if(h.substFormat===a)return h}if(o)return c.push(o),o}function zoe(l){for(var a=new ArrayBuffer(l.length),o=new Uint8Array(a),c=0;c<l.length;++c)o[c]=l[c];return a}function nx(l,a){if(!l)throw a}function Uoe(l,a,o,c,u){var h;return(a&c)>0?(h=l.parseByte(),0==(a&u)&&(h=-h),h=o+h):h=(a&u)>0?o:o+l.parseShort(),h}function Hoe(l,a,o){var u,h,c=new Tn.Parser(a,o);if(l.numberOfContours=c.parseShort(),l._xMin=c.parseShort(),l._yMin=c.parseShort(),l._xMax=c.parseShort(),l._yMax=c.parseShort(),l.numberOfContours>0){for(var d=l.endPointIndices=[],f=0;f<l.numberOfContours;f+=1)d.push(c.parseUShort());l.instructionLength=c.parseUShort(),l.instructions=[];for(var p=0;p<l.instructionLength;p+=1)l.instructions.push(c.parseByte());var g=d[d.length-1]+1;u=[];for(var m=0;m<g;m+=1)if(h=c.parseByte(),u.push(h),(8&h)>0)for(var v=c.parseByte(),_=0;_<v;_+=1)u.push(h),m+=1;if(Fn.argument(u.length===g,"Bad flags."),d.length>0){var b,y=[];if(g>0){for(var x=0;x<g;x+=1)(b={}).onCurve=!!(1&(h=u[x])),b.lastPointOfContour=d.indexOf(x)>=0,y.push(b);for(var C=0,w=0;w<g;w+=1)(b=y[w]).x=Uoe(c,h=u[w],C,2,16),C=b.x;for(var S=0,D=0;D<g;D+=1)(b=y[D]).y=Uoe(c,h=u[D],S,4,32),S=b.y}l.points=y}else l.points=[]}else if(0===l.numberOfContours)l.points=[];else{l.isComposite=!0,l.points=[],l.components=[];for(var T=!0;T;){u=c.parseUShort();var A={glyphIndex:c.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&u)>0?(2&u)>0?(A.dx=c.parseShort(),A.dy=c.parseShort()):A.matchedPoints=[c.parseUShort(),c.parseUShort()]:(2&u)>0?(A.dx=c.parseChar(),A.dy=c.parseChar()):A.matchedPoints=[c.parseByte(),c.parseByte()],(8&u)>0?A.xScale=A.yScale=c.parseF2Dot14():(64&u)>0?(A.xScale=c.parseF2Dot14(),A.yScale=c.parseF2Dot14()):(128&u)>0&&(A.xScale=c.parseF2Dot14(),A.scale01=c.parseF2Dot14(),A.scale10=c.parseF2Dot14(),A.yScale=c.parseF2Dot14()),l.components.push(A),T=!!(32&u)}if(256&u){l.instructionLength=c.parseUShort(),l.instructions=[];for(var I=0;I<l.instructionLength;I+=1)l.instructions.push(c.parseByte())}}}function A8(l,a){for(var o=[],c=0;c<l.length;c+=1){var u=l[c];o.push({x:a.xScale*u.x+a.scale01*u.y+a.dx,y:a.scale10*u.x+a.yScale*u.y+a.dy,onCurve:u.onCurve,lastPointOfContour:u.lastPointOfContour})}return o}function Woe(l){var a=new Gs;if(!l)return a;for(var o=function GZe(l){for(var a=[],o=[],c=0;c<l.length;c+=1){var u=l[c];o.push(u),u.lastPointOfContour&&(a.push(o),o=[])}return Fn.argument(0===o.length,"There are still points left in the current contour."),a}(l),c=0;c<o.length;++c){var u=o[c],d=u[u.length-1],f=u[0];if(d.onCurve)a.moveTo(d.x,d.y);else if(f.onCurve)a.moveTo(f.x,f.y);else{var p={x:.5*(d.x+f.x),y:.5*(d.y+f.y)};a.moveTo(p.x,p.y)}for(var g=0;g<u.length;++g)if(d,d=f,f=u[(g+1)%u.length],d.onCurve)a.lineTo(d.x,d.y);else{var v=f;f.onCurve||(v={x:.5*(d.x+f.x),y:.5*(d.y+f.y)}),a.quadraticCurveTo(d.x,d.y,v.x,v.y)}a.closePath()}return a}function Goe(l,a){if(a.isComposite)for(var o=0;o<a.components.length;o+=1){var c=a.components[o],u=l.get(c.glyphIndex);if(u.getPath(),u.points){var h=void 0;if(void 0===c.matchedPoints)h=A8(u.points,c);else{if(c.matchedPoints[0]>a.points.length-1||c.matchedPoints[1]>u.points.length-1)throw Error("Matched points out of range in "+a.name);var d=a.points[c.matchedPoints[0]],f=u.points[c.matchedPoints[1]],p={xScale:c.xScale,scale01:c.scale01,scale10:c.scale10,yScale:c.yScale,dx:0,dy:0};f=A8([f],p)[0],p.dx=d.x-f.x,p.dy=d.y-f.y,h=A8(u.points,p)}a.points=a.points.concat(h)}}return Woe(a.points)}(tx.prototype=ex.prototype={searchTag:E8,binSearch:Boe,getTable:function(l){var a=this.font.tables[this.tableName];return!a&&l&&(a=this.font.tables[this.tableName]=this.createDefaultTable()),a},getScriptNames:function(){var l=this.getTable();return l?l.scripts.map(function(a){return a.tag}):[]},getDefaultScriptName:function(){var l=this.getTable();if(l){for(var a=!1,o=0;o<l.scripts.length;o++){var c=l.scripts[o].tag;if("DFLT"===c)return c;"latn"===c&&(a=!0)}if(a)return"latn"}},getScriptTable:function(l,a){var o=this.getTable(a);if(o){var c=o.scripts,u=E8(o.scripts,l=l||"DFLT");if(u>=0)return c[u].script;if(a){var h={tag:l,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return c.splice(-1-u,0,h),h.script}}},getLangSysTable:function(l,a,o){var c=this.getScriptTable(l,o);if(c){if(!a||"dflt"===a||"DFLT"===a)return c.defaultLangSys;var u=E8(c.langSysRecords,a);if(u>=0)return c.langSysRecords[u].langSys;if(o){var h={tag:a,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return c.langSysRecords.splice(-1-u,0,h),h.langSys}}},getFeatureTable:function(l,a,o,c){var u=this.getLangSysTable(l,a,c);if(u){for(var h,d=u.featureIndexes,f=this.font.tables[this.tableName].features,p=0;p<d.length;p++)if((h=f[d[p]]).tag===o)return h.feature;if(c){var g=f.length;return Fn.assert(0===g||o>=f[g-1].tag,"Features must be added in alphabetical order."),f.push(h={tag:o,feature:{params:0,lookupListIndexes:[]}}),d.push(g),h.feature}}},getLookupTables:function(l,a,o,c,u){var h=this.getFeatureTable(l,a,o,u),d=[];if(h){for(var f,p=h.lookupListIndexes,g=this.font.tables[this.tableName].lookups,m=0;m<p.length;m++)(f=g[p[m]]).lookupType===c&&d.push(f);if(0===d.length&&u){var v=g.length;return g.push(f={lookupType:c,lookupFlag:0,subtables:[],markFilteringSet:void 0}),p.push(v),[f]}}return d},getGlyphClass:function(l,a){switch(l.format){case 1:return l.startGlyph<=a&&a<l.startGlyph+l.classes.length?l.classes[a-l.startGlyph]:0;case 2:var o=Voe(l.ranges,a);return o?o.classId:0}},getCoverageIndex:function(l,a){switch(l.format){case 1:var o=Boe(l.glyphs,a);return o>=0?o:-1;case 2:var c=Voe(l.ranges,a);return c?c.index+a-c.start:-1}},expandCoverage:function(l){if(1===l.format)return l.glyphs;for(var a=[],o=l.ranges,c=0;c<o.length;c++)for(var u=o[c],d=u.end,f=u.start;f<=d;f++)a.push(f);return a}}).init=function(){var l=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(l)},tx.prototype.getKerningValue=function(l,a,o){for(var c=0;c<l.length;c++)for(var u=l[c].subtables,h=0;h<u.length;h++){var d=u[h],f=this.getCoverageIndex(d.coverage,a);if(!(f<0))switch(d.posFormat){case 1:for(var p=d.pairSets[f],g=0;g<p.length;g++){var m=p[g];if(m.secondGlyph===o)return m.value1&&m.value1.xAdvance||0}break;case 2:var v=this.getGlyphClass(d.classDef1,a),_=this.getGlyphClass(d.classDef2,o),y=d.classRecords[v][_];return y.value1&&y.value1.xAdvance||0}}return 0},tx.prototype.getKerningTables=function(l,a){if(this.font.tables.gpos)return this.getLookupTables(l,a,"kern",2)},(Hl.prototype=ex.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Hl.prototype.getSingle=function(l,a,o){for(var c=[],u=this.getLookupTables(a,o,l,1),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++){var p=d[f],g=this.expandCoverage(p.coverage),m=void 0;if(1===p.substFormat){var v=p.deltaGlyphId;for(m=0;m<g.length;m++){var _=g[m];c.push({sub:_,by:_+v})}}else{var y=p.substitute;for(m=0;m<g.length;m++)c.push({sub:g[m],by:y[m]})}}return c},Hl.prototype.getMultiple=function(l,a,o){for(var c=[],u=this.getLookupTables(a,o,l,2),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++){var p=d[f],g=this.expandCoverage(p.coverage),m=void 0;for(m=0;m<g.length;m++)c.push({sub:g[m],by:p.sequences[m]})}return c},Hl.prototype.getAlternates=function(l,a,o){for(var c=[],u=this.getLookupTables(a,o,l,3),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++)for(var p=d[f],g=this.expandCoverage(p.coverage),m=p.alternateSets,v=0;v<g.length;v++)c.push({sub:g[v],by:m[v]});return c},Hl.prototype.getLigatures=function(l,a,o){for(var c=[],u=this.getLookupTables(a,o,l,4),h=0;h<u.length;h++)for(var d=u[h].subtables,f=0;f<d.length;f++)for(var p=d[f],g=this.expandCoverage(p.coverage),m=p.ligatureSets,v=0;v<g.length;v++)for(var _=g[v],y=m[v],b=0;b<y.length;b++){var x=y[b];c.push({sub:[_].concat(x.components),by:x.ligGlyph})}return c},Hl.prototype.addSingle=function(l,a,o,c){var h=k8(this.getLookupTables(o,c,l,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Fn.assert(1===h.coverage.format,"Single: unable to modify coverage table format "+h.coverage.format);var d=a.sub,f=this.binSearch(h.coverage.glyphs,d);f<0&&(h.coverage.glyphs.splice(f=-1-f,0,d),h.substitute.splice(f,0,0)),h.substitute[f]=a.by},Hl.prototype.addMultiple=function(l,a,o,c){Fn.assert(a.by instanceof Array&&a.by.length>1,'Multiple: "by" must be an array of two or more ids');var h=k8(this.getLookupTables(o,c,l,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Fn.assert(1===h.coverage.format,"Multiple: unable to modify coverage table format "+h.coverage.format);var d=a.sub,f=this.binSearch(h.coverage.glyphs,d);f<0&&(h.coverage.glyphs.splice(f=-1-f,0,d),h.sequences.splice(f,0,0)),h.sequences[f]=a.by},Hl.prototype.addAlternate=function(l,a,o,c){var h=k8(this.getLookupTables(o,c,l,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Fn.assert(1===h.coverage.format,"Alternate: unable to modify coverage table format "+h.coverage.format);var d=a.sub,f=this.binSearch(h.coverage.glyphs,d);f<0&&(h.coverage.glyphs.splice(f=-1-f,0,d),h.alternateSets.splice(f,0,0)),h.alternateSets[f]=a.by},Hl.prototype.addLigature=function(l,a,o,c){var u=this.getLookupTables(o,c,l,4,!0)[0],h=u.subtables[0];h||(u.subtables[0]=h={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),Fn.assert(1===h.coverage.format,"Ligature: unable to modify coverage table format "+h.coverage.format);var d=a.sub[0],f=a.sub.slice(1),p={ligGlyph:a.by,components:f},g=this.binSearch(h.coverage.glyphs,d);if(g>=0){for(var m=h.ligatureSets[g],v=0;v<m.length;v++)if(UZe(m[v].components,f))return;m.push(p)}else h.coverage.glyphs.splice(g=-1-g,0,d),h.ligatureSets.splice(g,0,[p])},Hl.prototype.getFeature=function(l,a,o){if(/ss\d\d/.test(l))return this.getSingle(l,a,o);switch(l){case"aalt":case"salt":return this.getSingle(l,a,o).concat(this.getAlternates(l,a,o));case"dlig":case"liga":case"rlig":return this.getLigatures(l,a,o);case"ccmp":return this.getMultiple(l,a,o).concat(this.getLigatures(l,a,o));case"stch":return this.getMultiple(l,a,o)}},Hl.prototype.add=function(l,a,o,c){if(/ss\d\d/.test(l))return this.addSingle(l,a,o,c);switch(l){case"aalt":case"salt":return"number"==typeof a.by?this.addSingle(l,a,o,c):this.addAlternate(l,a,o,c);case"dlig":case"liga":case"rlig":return this.addLigature(l,a,o,c);case"ccmp":return a.by instanceof Array?this.addMultiple(l,a,o,c):this.addLigature(l,a,o,c)}};var $oe,Kg,qoe,I8,joe={getPath:Woe,parse:function qZe(l,a,o,c,u){return u.lowMemory?function $Ze(l,a,o,c){var u=new dh.GlyphSet(c);return c._push=function(h){var d=o[h];u.push(h,d!==o[h+1]?dh.ttfGlyphLoader(c,h,Hoe,l,a+d,Goe):dh.glyphLoader(c,h))},u}(l,a,o,c):function jZe(l,a,o,c){for(var u=new dh.GlyphSet(c),h=0;h<o.length-1;h+=1){var d=o[h];u.push(h,d!==o[h+1]?dh.ttfGlyphLoader(c,h,Hoe,l,a+d,Goe):dh.glyphLoader(c,h))}return u}(l,a,o,c)}};function Yoe(l){this.font=l,this.getCommands=function(a){return joe.getPath(a).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function YZe(l){return l}function Xoe(l){return Math.sign(l)*Math.round(Math.abs(l))}function XZe(l){return Math.sign(l)*Math.round(Math.abs(2*l))/2}function ZZe(l){return Math.sign(l)*(Math.round(Math.abs(l)+.5)-.5)}function KZe(l){return Math.sign(l)*Math.ceil(Math.abs(l))}function QZe(l){return Math.sign(l)*Math.floor(Math.abs(l))}var Zoe=function(l){var a=this.srPeriod,o=this.srPhase,u=1;return l<0&&(l=-l,u=-1),l+=this.srThreshold-o,l=Math.trunc(l/a)*a,(l+=o)<0?o*u:l*u},fh={x:1,y:0,axis:"x",distance:function(l,a,o,c){return(o?l.xo:l.x)-(c?a.xo:a.x)},interpolate:function(l,a,o,c){var u,h,d,f,p,g,m;if(!c||c===this)return u=l.xo-a.xo,h=l.xo-o.xo,p=a.x-a.xo,g=o.x-o.xo,0===(m=(d=Math.abs(u))+(f=Math.abs(h)))?void(l.x=l.xo+(p+g)/2):void(l.x=l.xo+(p*f+g*d)/m);u=c.distance(l,a,!0,!0),h=c.distance(l,o,!0,!0),p=c.distance(a,a,!1,!0),g=c.distance(o,o,!1,!0),0!==(m=(d=Math.abs(u))+(f=Math.abs(h)))?fh.setRelative(l,l,(p*f+g*d)/m,c,!0):fh.setRelative(l,l,(p+g)/2,c,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(l,a,o,c,u){l.x=c&&c!==this?(u?a.xo:a.x)+o*c.x+(l.y-((u?a.yo:a.y)+o*c.y))/c.normalSlope:(u?a.xo:a.x)+o},slope:0,touch:function(l){l.xTouched=!0},touched:function(l){return l.xTouched},untouch:function(l){l.xTouched=!1}},Td={x:0,y:1,axis:"y",distance:function(l,a,o,c){return(o?l.yo:l.y)-(c?a.yo:a.y)},interpolate:function(l,a,o,c){var u,h,d,f,p,g,m;if(!c||c===this)return u=l.yo-a.yo,h=l.yo-o.yo,p=a.y-a.yo,g=o.y-o.yo,0===(m=(d=Math.abs(u))+(f=Math.abs(h)))?void(l.y=l.yo+(p+g)/2):void(l.y=l.yo+(p*f+g*d)/m);u=c.distance(l,a,!0,!0),h=c.distance(l,o,!0,!0),p=c.distance(a,a,!1,!0),g=c.distance(o,o,!1,!0),0!==(m=(d=Math.abs(u))+(f=Math.abs(h)))?Td.setRelative(l,l,(p*f+g*d)/m,c,!0):Td.setRelative(l,l,(p+g)/2,c,!0)},normalSlope:0,setRelative:function(l,a,o,c,u){l.y=c&&c!==this?(u?a.yo:a.y)+o*c.y+c.normalSlope*(l.x-((u?a.xo:a.x)+o*c.x)):(u?a.yo:a.y)+o},slope:Number.POSITIVE_INFINITY,touch:function(l){l.yTouched=!0},touched:function(l){return l.yTouched},untouch:function(l){l.yTouched=!1}};function ix(l,a){this.x=l,this.y=a,this.axis=void 0,this.slope=a/l,this.normalSlope=-l/a,Object.freeze(this)}function rx(l,a){var o=Math.sqrt(l*l+a*a);return a/=o,1==(l/=o)&&0===a?fh:0===l&&1===a?Td:new ix(l,a)}function Dd(l,a,o,c){this.x=this.xo=Math.round(64*l)/64,this.y=this.yo=Math.round(64*a)/64,this.lastPointOfContour=o,this.onCurve=c,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(fh),Object.freeze(Td),ix.prototype.distance=function(l,a,o,c){return this.x*fh.distance(l,a,o,c)+this.y*Td.distance(l,a,o,c)},ix.prototype.interpolate=function(l,a,o,c){var u,h,d,f,p,g,m;d=c.distance(l,a,!0,!0),f=c.distance(l,o,!0,!0),u=c.distance(a,a,!1,!0),h=c.distance(o,o,!1,!0),0!==(m=(p=Math.abs(d))+(g=Math.abs(f)))?this.setRelative(l,l,(u*g+h*p)/m,c,!0):this.setRelative(l,l,(u+h)/2,c,!0)},ix.prototype.setRelative=function(l,a,o,c,u){var g=(c=c||this).normalSlope,m=this.slope,v=l.x,_=l.y;l.x=(m*v-g*((u?a.xo:a.x)+o*c.x)+((u?a.yo:a.y)+o*c.y)-_)/(m-g),l.y=m*(l.x-v)+_},ix.prototype.touch=function(l){l.xTouched=!0,l.yTouched=!0},Dd.prototype.nextTouched=function(l){for(var a=this.nextPointOnContour;!l.touched(a)&&a!==this;)a=a.nextPointOnContour;return a},Dd.prototype.prevTouched=function(l){for(var a=this.prevPointOnContour;!l.touched(a)&&a!==this;)a=a.prevPointOnContour;return a};var sx=Object.freeze(new Dd(0,0)),JZe={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Zf(l,a){switch(this.env=l,this.stack=[],this.prog=a,l){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=fh,this.round=Xoe}}function OE(l){for(var a=l.tZone=new Array(l.gZone.length),o=0;o<a.length;o++)a[o]=new Dd(0,0)}function Koe(l,a){var h,o=l.prog,c=l.ip,u=1;do{if(88===(h=o[++c]))u++;else if(89===h)u--;else if(64===h)c+=o[c+1]+1;else if(65===h)c+=2*o[c+1]+1;else if(h>=176&&h<=183)c+=h-176+1;else if(h>=184&&h<=191)c+=2*(h-184+1);else if(a&&1===u&&27===h)break}while(u>0);l.ip=c}function Qoe(l,a){exports.DEBUG&&console.log(a.step,"SVTCA["+l.axis+"]"),a.fv=a.pv=a.dpv=l}function Joe(l,a){exports.DEBUG&&console.log(a.step,"SPVTCA["+l.axis+"]"),a.pv=a.dpv=l}function eae(l,a){exports.DEBUG&&console.log(a.step,"SFVTCA["+l.axis+"]"),a.fv=l}function tae(l,a){var f,p,o=a.stack,c=o.pop(),u=o.pop(),h=a.z2[c],d=a.z1[u];exports.DEBUG&&console.log("SPVTL["+l+"]",c,u),l?(f=h.y-d.y,p=d.x-h.x):(f=d.x-h.x,p=d.y-h.y),a.pv=a.dpv=rx(f,p)}function nae(l,a){var f,p,o=a.stack,c=o.pop(),u=o.pop(),h=a.z2[c],d=a.z1[u];exports.DEBUG&&console.log("SFVTL["+l+"]",c,u),l?(f=h.y-d.y,p=d.x-h.x):(f=d.x-h.x,p=d.y-h.y),a.fv=rx(f,p)}function P8(l){exports.DEBUG&&console.log(l.step,"POP[]"),l.stack.pop()}function iae(l,a){var o=a.stack.pop(),c=a.z0[o],u=a.fv,h=a.pv;exports.DEBUG&&console.log(a.step,"MDAP["+l+"]",o);var d=h.distance(c,sx);l&&(d=a.round(d)),u.setRelative(c,sx,d,h),u.touch(c),a.rp0=a.rp1=o}function rae(l,a){var u,h,d,o=a.z2,c=o.length-2;exports.DEBUG&&console.log(a.step,"IUP["+l.axis+"]");for(var f=0;f<c;f++)!l.touched(u=o[f])&&(h=u.prevTouched(l))!==u&&(h===(d=u.nextTouched(l))&&l.setRelative(u,u,l.distance(h,h,!1,!0),l,!0),l.interpolate(u,h,d,l))}function sae(l,a){for(var o=a.stack,u=(l?a.z0:a.z1)[l?a.rp1:a.rp2],h=a.fv,d=a.pv,f=a.loop,p=a.z2;f--;){var g=o.pop(),m=p[g],v=d.distance(u,u,!1,!0);h.setRelative(m,m,v,d),h.touch(m),exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-f)+": ":"")+"SHP["+(l?"rp1":"rp2")+"]",g)}a.loop=1}function oae(l,a){var u=(l?a.z0:a.z1)[l?a.rp1:a.rp2],h=a.fv,d=a.pv,f=a.stack.pop(),p=a.z2[a.contours[f]],g=p;exports.DEBUG&&console.log(a.step,"SHC["+l+"]",f);var m=d.distance(u,u,!1,!0);do{g!==u&&h.setRelative(g,g,m,d),g=g.nextPointOnContour}while(g!==p)}function aae(l,a){var p,u=(l?a.z0:a.z1)[l?a.rp1:a.rp2],h=a.fv,d=a.pv,f=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SHZ["+l+"]",f),f){case 0:p=a.tZone;break;case 1:p=a.gZone;break;default:throw new Error("Invalid zone")}for(var g,m=d.distance(u,u,!1,!0),v=p.length-2,_=0;_<v;_++)h.setRelative(g=p[_],g,m,d)}function lae(l,a){var o=a.stack,c=o.pop()/64,u=o.pop(),h=a.z1[u],f=a.fv;f.setRelative(h,a.z0[a.rp0],c,a.pv),f.touch(h),exports.DEBUG&&console.log(a.step,"MSIRP["+l+"]",c,u),a.rp1=a.rp0,a.rp2=u,l&&(a.rp0=u)}function cae(l,a){var o=a.stack,c=o.pop(),u=o.pop(),h=a.z0[u],d=a.fv,f=a.pv,p=a.cvt[c];exports.DEBUG&&console.log(a.step,"MIAP["+l+"]",c,"(",p,")",u);var g=f.distance(h,sx);l&&(Math.abs(g-p)<a.cvCutIn&&(g=p),g=a.round(g)),d.setRelative(h,sx,g,f),0===a.zp0&&(h.xo=h.x,h.yo=h.y),d.touch(h),a.rp0=a.rp1=u}function uae(l,a){var o=a.stack,c=o.pop(),u=a.z2[c];exports.DEBUG&&console.log(a.step,"GC["+l+"]",c),o.push(64*a.dpv.distance(u,sx,l,!1))}function hae(l,a){var o=a.stack,c=o.pop(),u=o.pop(),f=a.dpv.distance(a.z0[u],a.z1[c],l,l);exports.DEBUG&&console.log(a.step,"MD["+l+"]",c,u,"->",f),a.stack.push(Math.round(64*f))}function O8(l,a){var o=a.stack,c=o.pop(),u=a.fv,h=a.pv,d=a.ppem,f=a.deltaBase+16*(l-1),p=a.deltaShift,g=a.z0;exports.DEBUG&&console.log(a.step,"DELTAP["+l+"]",c,o);for(var m=0;m<c;m++){var v=o.pop(),_=o.pop();if(f+((240&_)>>4)===d){var b=(15&_)-8;b>=0&&b++,exports.DEBUG&&console.log(a.step,"DELTAPFIX",v,"by",b*p);var x=g[v];u.setRelative(x,x,b*p,h)}}}function FE(l,a){var o=a.stack,c=o.pop();exports.DEBUG&&console.log(a.step,"ROUND[]"),o.push(64*a.round(c/64))}function F8(l,a){var o=a.stack,c=o.pop(),u=a.ppem,h=a.deltaBase+16*(l-1),d=a.deltaShift;exports.DEBUG&&console.log(a.step,"DELTAC["+l+"]",c,o);for(var f=0;f<c;f++){var p=o.pop(),g=o.pop();if(h+((240&g)>>4)===u){var v=(15&g)-8;v>=0&&v++;var _=v*d;exports.DEBUG&&console.log(a.step,"DELTACFIX",p,"by",_),a.cvt[p]+=_}}}function dae(l,a){var f,p,o=a.stack,c=o.pop(),u=o.pop(),h=a.z2[c],d=a.z1[u];exports.DEBUG&&console.log(a.step,"SDPVTL["+l+"]",c,u),l?(f=h.y-d.y,p=d.x-h.x):(f=d.x-h.x,p=d.y-h.y),a.dpv=rx(f,p)}function Kf(l,a){var o=a.stack,c=a.prog,u=a.ip;exports.DEBUG&&console.log(a.step,"PUSHB["+l+"]");for(var h=0;h<l;h++)o.push(c[++u]);a.ip=u}function Qf(l,a){var o=a.ip,c=a.prog,u=a.stack;exports.DEBUG&&console.log(a.ip,"PUSHW["+l+"]");for(var h=0;h<l;h++){var d=c[++o]<<8|c[++o];32768&d&&(d=-(1+(65535^d))),u.push(d)}a.ip=o}function Dn(l,a,o,c,u,h){var x,C,w,S,d=h.stack,f=l&&d.pop(),p=d.pop(),m=h.z0[h.rp0],v=h.z1[p],_=h.minDis,y=h.fv,b=h.dpv;w=(C=x=b.distance(v,m,!0,!0))>=0?1:-1,C=Math.abs(C),l&&(S=h.cvt[f],c&&Math.abs(C-S)<h.cvCutIn&&(C=S)),o&&C<_&&(C=_),c&&(C=h.round(C)),y.setRelative(v,m,w*C,b),y.touch(v),exports.DEBUG&&console.log(h.step,(l?"MIRP[":"MDRP[")+(a?"M":"m")+(o?">":"_")+(c?"R":"_")+(0===u?"Gr":1===u?"Bl":2===u?"Wh":"")+"]",l?f+"("+h.cvt[f]+","+S+")":"",p,"(d =",x,"->",w*C,")"),h.rp1=h.rp0,h.rp2=p,a&&(h.rp0=p)}function L_(l){this.char=l,this.state={},this.activeState=null}function R8(l,a,o){this.contextName=o,this.startIndex=l,this.endOffset=a}function wQe(l,a,o){this.contextName=l,this.openRange=null,this.ranges=[],this.checkStart=a,this.checkEnd=o}function pu(l,a){this.context=l,this.index=a,this.length=l.length,this.current=l[a],this.backtrack=l.slice(0,a),this.lookahead=l.slice(a+1)}function RE(l){this.eventId=l,this.subscribers=[]}function SQe(l){var a=this,o=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];o.forEach(function(u){Object.defineProperty(a.events,u,{value:new RE(u)})}),l&&o.forEach(function(u){var h=l[u];"function"==typeof h&&a.events[u].subscribe(h)}),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach(function(u){a.events[u].subscribe(a.updateContextsRanges)})}function bs(l){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],SQe.call(this,l)}function Jf(l){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(l)}function fae(l){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(l)}function ep(l){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(l)}function NE(l){return/[A-z]/.test(l)}function Wl(l){this.font=l,this.features={}}function Qg(l){this.id=l.id,this.tag=l.tag,this.substitution=l.substitution}function ox(l,a){if(!l)return-1;switch(a.format){case 1:return a.glyphs.indexOf(l);case 2:for(var o=a.ranges,c=0;c<o.length;c++){var u=o[c];if(l>=u.start&&l<=u.end)return u.index+(l-u.start)}break;default:return-1}return-1}function DQe(l,a){return-1===ox(l,a.coverage)?null:l+a.deltaGlyphId}function MQe(l,a){var o=ox(l,a.coverage);return-1===o?null:a.substitute[o]}function N8(l,a){for(var o=[],c=0;c<l.length;c++){var u=l[c],h=a.current,d=ox(h=Array.isArray(h)?h[0]:h,u);-1!==d&&o.push(d)}return o.length!==l.length?-1:o}function EQe(l,a){if(l.context.length<a.inputCoverage.length+a.lookaheadCoverage.length+a.backtrackCoverage.length)return[];var c=N8(a.inputCoverage,l);if(-1===c)return[];if(l.lookahead.length<a.lookaheadCoverage.length)return[];for(var h=l.lookahead.slice(a.inputCoverage.length-1);h.length&&ep(h[0].char);)h.shift();var d=new pu(h,0),f=N8(a.lookaheadCoverage,d),p=[].concat(l.backtrack);for(p.reverse();p.length&&ep(p[0].char);)p.shift();if(p.length<a.backtrackCoverage.length)return[];var g=new pu(p,0),m=N8(a.backtrackCoverage,g),_=[];if(c.length===a.inputCoverage.length&&f.length===a.lookaheadCoverage.length&&m.length===a.backtrackCoverage.length)for(var y=0;y<a.lookupRecords.length;y++)for(var C=this.getLookupByIndex(a.lookupRecords[y].lookupListIndex),w=0;w<C.subtables.length;w++){var S=C.subtables[w],D=this.getLookupMethod(C,S);if("12"===this.getSubstitutionType(C,S))for(var A=0;A<c.length;A++){var N=D(l.get(A));N&&_.push(N)}}return _}function kQe(l,a){var c=ox(l.current,a.coverage);if(-1===c)return null;for(var u,h=a.ligatureSets[c],d=0;d<h.length;d++){u=h[d];for(var f=0;f<u.components.length&&l.lookahead[f]===u.components[f];f++)if(f===u.components.length-1)return u}return null}function AQe(l,a){var o=ox(l,a.coverage);return-1===o?null:a.sequences[o]}Yoe.prototype.exec=function(l,a){if("number"!=typeof a)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var o=this.font,c=this._prepState;if(!c||c.ppem!==a){var u=this._fpgmState;if(!u){Zf.prototype=JZe,(u=this._fpgmState=new Zf("fpgm",o.tables.fpgm)).funcs=[],u.font=o,exports.DEBUG&&(console.log("---EXEC FPGM---"),u.step=-1);try{Kg(u)}catch(g){return console.log("Hinting error in FPGM:"+g),void(this._errorState=3)}}Zf.prototype=u,(c=this._prepState=new Zf("prep",o.tables.prep)).ppem=a;var h=o.tables.cvt;if(h)for(var d=c.cvt=new Array(h.length),f=a/o.unitsPerEm,p=0;p<h.length;p++)d[p]=h[p]*f;else c.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),c.step=-1);try{Kg(c)}catch(g){this._errorState<2&&console.log("Hinting error in PREP:"+g),this._errorState=2}}if(!(this._errorState>1))try{return qoe(l,c)}catch(g){return this._errorState<1&&(console.log("Hinting error:"+g),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},qoe=function(l,a){var h,d,f,o=a.ppem/a.font.unitsPerEm,c=o,u=l.components;if(Zf.prototype=a,u){var p=a.font;d=[],h=[];for(var g=0;g<u.length;g++){var m=u[g],v=p.glyphs.get(m.glyphIndex);f=new Zf("glyf",v.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+g+"---"),f.step=-1),I8(v,f,o,c);for(var _=Math.round(m.dx*o),y=Math.round(m.dy*c),b=f.gZone,x=f.contours,C=0;C<b.length;C++){var w=b[C];w.xTouched=w.yTouched=!1,w.xo=w.x=w.x+_,w.yo=w.y=w.y+y}var S=d.length;d.push.apply(d,b);for(var D=0;D<x.length;D++)h.push(x[D]+S)}l.instructions&&!f.inhibitGridFit&&((f=new Zf("glyf",l.instructions)).gZone=f.z0=f.z1=f.z2=d,f.contours=h,d.push(new Dd(0,0),new Dd(Math.round(l.advanceWidth*o),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),f.step=-1),Kg(f),d.length-=2)}else f=new Zf("glyf",l.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),f.step=-1),I8(l,f,o,c),d=f.gZone;return d},I8=function(l,a,o,c){for(var p,u=l.points||[],h=u.length,d=a.gZone=a.z0=a.z1=a.z2=[],f=a.contours=[],g=0;g<h;g++)d[g]=new Dd((p=u[g]).x*o,p.y*c,p.lastPointOfContour,p.onCurve);for(var m,v,_=0;_<h;_++)p=d[_],m||(m=p,f.push(_)),p.lastPointOfContour?(p.nextPointOnContour=m,m.prevPointOnContour=p,m=void 0):(p.nextPointOnContour=v=d[_+1],v.prevPointOnContour=p);if(!a.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",a.stack);for(var y=0;y<h;y++)console.log(y,d[y].x,d[y].y)}if(d.push(new Dd(0,0),new Dd(Math.round(l.advanceWidth*o),0)),Kg(a),d.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",a.stack);for(var b=0;b<h;b++)console.log(b,d[b].x,d[b].y)}}},Kg=function(l){var a=l.prog;if(a){var c,o=a.length;for(l.ip=0;l.ip<o;l.ip++){if(exports.DEBUG&&l.step++,!(c=$oe[a[l.ip]]))throw new Error("unknown instruction: 0x"+Number(a[l.ip]).toString(16));c(l)}}},$oe=[Qoe.bind(void 0,Td),Qoe.bind(void 0,fh),Joe.bind(void 0,Td),Joe.bind(void 0,fh),eae.bind(void 0,Td),eae.bind(void 0,fh),tae.bind(void 0,0),tae.bind(void 0,1),nae.bind(void 0,0),nae.bind(void 0,1),function eKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"SPVFS[]",o,c),l.pv=l.dpv=rx(c,o)},function tKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"SPVFS[]",o,c),l.fv=rx(c,o)},function nKe(l){var a=l.stack,o=l.pv;exports.DEBUG&&console.log(l.step,"GPV[]"),a.push(16384*o.x),a.push(16384*o.y)},function iKe(l){var a=l.stack,o=l.fv;exports.DEBUG&&console.log(l.step,"GFV[]"),a.push(16384*o.x),a.push(16384*o.y)},function rKe(l){l.fv=l.pv,exports.DEBUG&&console.log(l.step,"SFVTPV[]")},function sKe(l){var a=l.stack,o=a.pop(),c=a.pop(),u=a.pop(),h=a.pop(),d=a.pop(),f=l.z0,p=l.z1,g=f[o],m=f[c],v=p[u],_=p[h],y=l.z2[d];exports.DEBUG&&console.log("ISECT[], ",o,c,u,h,d);var b=g.x,x=g.y,C=m.x,w=m.y,S=v.x,D=v.y,T=_.x,A=_.y,I=(b-C)*(D-A)-(x-w)*(S-T),N=b*w-x*C,k=S*A-D*T;y.x=(N*(S-T)-k*(b-C))/I,y.y=(N*(D-A)-k*(x-w))/I},function oKe(l){l.rp0=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SRP0[]",l.rp0)},function aKe(l){l.rp1=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SRP1[]",l.rp1)},function lKe(l){l.rp2=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SRP2[]",l.rp2)},function cKe(l){var a=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZP0[]",a),l.zp0=a,a){case 0:l.tZone||OE(l),l.z0=l.tZone;break;case 1:l.z0=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function uKe(l){var a=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZP1[]",a),l.zp1=a,a){case 0:l.tZone||OE(l),l.z1=l.tZone;break;case 1:l.z1=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function hKe(l){var a=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZP2[]",a),l.zp2=a,a){case 0:l.tZone||OE(l),l.z2=l.tZone;break;case 1:l.z2=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function dKe(l){var a=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SZPS[]",a),l.zp0=l.zp1=l.zp2=a,a){case 0:l.tZone||OE(l),l.z0=l.z1=l.z2=l.tZone;break;case 1:l.z0=l.z1=l.z2=l.gZone;break;default:throw new Error("Invalid zone pointer")}},function fKe(l){l.loop=l.stack.pop(),exports.DEBUG&&console.log(l.step,"SLOOP[]",l.loop)},function pKe(l){exports.DEBUG&&console.log(l.step,"RTG[]"),l.round=Xoe},function gKe(l){exports.DEBUG&&console.log(l.step,"RTHG[]"),l.round=ZZe},function mKe(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"SMD[]",a),l.minDis=a/64},function vKe(l){exports.DEBUG&&console.log(l.step,"ELSE[]"),Koe(l,!1)},function _Ke(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"JMPR[]",a),l.ip+=a-1},function yKe(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"SCVTCI[]",a),l.cvCutIn=a/64},void 0,void 0,function bKe(l){var a=l.stack;exports.DEBUG&&console.log(l.step,"DUP[]"),a.push(a[a.length-1])},P8,function CKe(l){exports.DEBUG&&console.log(l.step,"CLEAR[]"),l.stack.length=0},function xKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"SWAP[]"),a.push(o),a.push(c)},function wKe(l){var a=l.stack;exports.DEBUG&&console.log(l.step,"DEPTH[]"),a.push(a.length)},function DKe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"CINDEX[]",o),a.push(a[a.length-o])},function MKe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"MINDEX[]",o),a.push(a.splice(a.length-o,1)[0])},void 0,void 0,void 0,function SKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"LOOPCALL[]",o,c);var u=l.ip,h=l.prog;l.prog=l.funcs[o];for(var d=0;d<c;d++)Kg(l),exports.DEBUG&&console.log(++l.step,d+1<c?"next loopcall":"done loopcall",d);l.ip=u,l.prog=h},function TKe(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"CALL[]",a);var o=l.ip,c=l.prog;l.prog=l.funcs[a],Kg(l),l.ip=o,l.prog=c,exports.DEBUG&&console.log(++l.step,"returning from",a)},function EKe(l){if("fpgm"!==l.env)throw new Error("FDEF not allowed here");var o=l.prog,c=l.ip,u=l.stack.pop(),h=c;for(exports.DEBUG&&console.log(l.step,"FDEF[]",u);45!==o[++c];);l.ip=c,l.funcs[u]=o.slice(h+1,c)},void 0,iae.bind(void 0,0),iae.bind(void 0,1),rae.bind(void 0,Td),rae.bind(void 0,fh),sae.bind(void 0,0),sae.bind(void 0,1),oae.bind(void 0,0),oae.bind(void 0,1),aae.bind(void 0,0),aae.bind(void 0,1),function kKe(l){for(var a=l.stack,o=l.loop,c=l.fv,u=a.pop()/64,h=l.z2;o--;){var d=a.pop(),f=h[d];exports.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-o)+": ":"")+"SHPIX[]",d,u),c.setRelative(f,f,u),c.touch(f)}l.loop=1},function AKe(l){for(var a=l.stack,o=l.rp1,c=l.rp2,u=l.loop,h=l.z0[o],d=l.z1[c],f=l.fv,p=l.dpv,g=l.z2;u--;){var m=a.pop(),v=g[m];exports.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-u)+": ":"")+"IP[]",m,o,"<->",c),f.interpolate(v,h,d,p),f.touch(v)}l.loop=1},lae.bind(void 0,0),lae.bind(void 0,1),function IKe(l){for(var a=l.stack,c=l.z0[l.rp0],u=l.loop,h=l.fv,d=l.pv,f=l.z1;u--;){var p=a.pop(),g=f[p];exports.DEBUG&&console.log(l.step,(l.loop>1?"loop "+(l.loop-u)+": ":"")+"ALIGNRP[]",p),h.setRelative(g,c,0,d),h.touch(g)}l.loop=1},function PKe(l){exports.DEBUG&&console.log(l.step,"RTDG[]"),l.round=XZe},cae.bind(void 0,0),cae.bind(void 0,1),function OKe(l){var a=l.prog,o=l.ip,c=l.stack,u=a[++o];exports.DEBUG&&console.log(l.step,"NPUSHB[]",u);for(var h=0;h<u;h++)c.push(a[++o]);l.ip=o},function FKe(l){var a=l.ip,o=l.prog,c=l.stack,u=o[++a];exports.DEBUG&&console.log(l.step,"NPUSHW[]",u);for(var h=0;h<u;h++){var d=o[++a]<<8|o[++a];32768&d&&(d=-(1+(65535^d))),c.push(d)}l.ip=a},function RKe(l){var a=l.stack,o=l.store;o||(o=l.store=[]);var c=a.pop(),u=a.pop();exports.DEBUG&&console.log(l.step,"WS",c,u),o[u]=c},function NKe(l){var a=l.stack,o=l.store,c=a.pop();exports.DEBUG&&console.log(l.step,"RS",c),a.push(o&&o[c]||0)},function LKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"WCVTP",o,c),l.cvt[c]=o/64},function BKe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"RCVT",o),a.push(64*l.cvt[o])},uae.bind(void 0,0),uae.bind(void 0,1),void 0,hae.bind(void 0,0),hae.bind(void 0,1),function VKe(l){exports.DEBUG&&console.log(l.step,"MPPEM[]"),l.stack.push(l.ppem)},void 0,function zKe(l){exports.DEBUG&&console.log(l.step,"FLIPON[]"),l.autoFlip=!0},void 0,void 0,function UKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"LT[]",o,c),a.push(c<o?1:0)},function HKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"LTEQ[]",o,c),a.push(c<=o?1:0)},function WKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"GT[]",o,c),a.push(c>o?1:0)},function GKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"GTEQ[]",o,c),a.push(c>=o?1:0)},function jKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"EQ[]",o,c),a.push(o===c?1:0)},function $Ke(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"NEQ[]",o,c),a.push(o!==c?1:0)},function qKe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"ODD[]",o),a.push(Math.trunc(o)%2?1:0)},function YKe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"EVEN[]",o),a.push(Math.trunc(o)%2?0:1)},function XKe(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"IF[]",a),a||(Koe(l,!0),exports.DEBUG&&console.log(l.step,"EIF[]"))},function ZKe(l){exports.DEBUG&&console.log(l.step,"EIF[]")},function KKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"AND[]",o,c),a.push(o&&c?1:0)},function QKe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"OR[]",o,c),a.push(o||c?1:0)},function JKe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"NOT[]",o),a.push(o?0:1)},O8.bind(void 0,1),function eQe(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"SDB[]",o),l.deltaBase=o},function tQe(l){var o=l.stack.pop();exports.DEBUG&&console.log(l.step,"SDS[]",o),l.deltaShift=Math.pow(.5,o)},function nQe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"ADD[]",o,c),a.push(c+o)},function iQe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"SUB[]",o,c),a.push(c-o)},function rQe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"DIV[]",o,c),a.push(64*c/o)},function sQe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"MUL[]",o,c),a.push(c*o/64)},function oQe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"ABS[]",o),a.push(Math.abs(o))},function aQe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"NEG[]",o),a.push(-o)},function lQe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"FLOOR[]",o),a.push(64*Math.floor(o/64))},function cQe(l){var a=l.stack,o=a.pop();exports.DEBUG&&console.log(l.step,"CEILING[]",o),a.push(64*Math.ceil(o/64))},FE.bind(void 0,0),FE.bind(void 0,1),FE.bind(void 0,2),FE.bind(void 0,3),void 0,void 0,void 0,void 0,function uQe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"WCVTF[]",o,c),l.cvt[c]=o*l.ppem/l.font.unitsPerEm},O8.bind(void 0,2),O8.bind(void 0,3),F8.bind(void 0,1),F8.bind(void 0,2),F8.bind(void 0,3),function hQe(l){var o,a=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"SROUND[]",a),l.round=Zoe,192&a){case 0:o=.5;break;case 64:o=1;break;case 128:o=2;break;default:throw new Error("invalid SROUND value")}switch(l.srPeriod=o,48&a){case 0:l.srPhase=0;break;case 16:l.srPhase=.25*o;break;case 32:l.srPhase=.5*o;break;case 48:l.srPhase=.75*o;break;default:throw new Error("invalid SROUND value")}l.srThreshold=0==(a&=15)?0:(a/8-.5)*o},function dQe(l){var o,a=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"S45ROUND[]",a),l.round=Zoe,192&a){case 0:o=Math.sqrt(2)/2;break;case 64:o=Math.sqrt(2);break;case 128:o=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(l.srPeriod=o,48&a){case 0:l.srPhase=0;break;case 16:l.srPhase=.25*o;break;case 32:l.srPhase=.5*o;break;case 48:l.srPhase=.75*o;break;default:throw new Error("invalid S45ROUND value")}l.srThreshold=0==(a&=15)?0:(a/8-.5)*o},void 0,void 0,function fQe(l){exports.DEBUG&&console.log(l.step,"ROFF[]"),l.round=YZe},void 0,function pQe(l){exports.DEBUG&&console.log(l.step,"RUTG[]"),l.round=KZe},function gQe(l){exports.DEBUG&&console.log(l.step,"RDTG[]"),l.round=QZe},P8,P8,void 0,void 0,void 0,void 0,void 0,function mQe(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"SCANCTRL[]",a)},dae.bind(void 0,0),dae.bind(void 0,1),function vQe(l){var a=l.stack,o=a.pop(),c=0;exports.DEBUG&&console.log(l.step,"GETINFO[]",o),1&o&&(c=35),32&o&&(c|=4096),a.push(c)},void 0,function _Qe(l){var a=l.stack,o=a.pop(),c=a.pop(),u=a.pop();exports.DEBUG&&console.log(l.step,"ROLL[]"),a.push(c),a.push(o),a.push(u)},function yQe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"MAX[]",o,c),a.push(Math.max(c,o))},function bQe(l){var a=l.stack,o=a.pop(),c=a.pop();exports.DEBUG&&console.log(l.step,"MIN[]",o,c),a.push(Math.min(c,o))},function CQe(l){var a=l.stack.pop();exports.DEBUG&&console.log(l.step,"SCANTYPE[]",a)},function xQe(l){var a=l.stack.pop(),o=l.stack.pop();switch(exports.DEBUG&&console.log(l.step,"INSTCTRL[]",a,o),a){case 1:return void(l.inhibitGridFit=!!o);case 2:return void(l.ignoreCvt=!!o);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Kf.bind(void 0,1),Kf.bind(void 0,2),Kf.bind(void 0,3),Kf.bind(void 0,4),Kf.bind(void 0,5),Kf.bind(void 0,6),Kf.bind(void 0,7),Kf.bind(void 0,8),Qf.bind(void 0,1),Qf.bind(void 0,2),Qf.bind(void 0,3),Qf.bind(void 0,4),Qf.bind(void 0,5),Qf.bind(void 0,6),Qf.bind(void 0,7),Qf.bind(void 0,8),Dn.bind(void 0,0,0,0,0,0),Dn.bind(void 0,0,0,0,0,1),Dn.bind(void 0,0,0,0,0,2),Dn.bind(void 0,0,0,0,0,3),Dn.bind(void 0,0,0,0,1,0),Dn.bind(void 0,0,0,0,1,1),Dn.bind(void 0,0,0,0,1,2),Dn.bind(void 0,0,0,0,1,3),Dn.bind(void 0,0,0,1,0,0),Dn.bind(void 0,0,0,1,0,1),Dn.bind(void 0,0,0,1,0,2),Dn.bind(void 0,0,0,1,0,3),Dn.bind(void 0,0,0,1,1,0),Dn.bind(void 0,0,0,1,1,1),Dn.bind(void 0,0,0,1,1,2),Dn.bind(void 0,0,0,1,1,3),Dn.bind(void 0,0,1,0,0,0),Dn.bind(void 0,0,1,0,0,1),Dn.bind(void 0,0,1,0,0,2),Dn.bind(void 0,0,1,0,0,3),Dn.bind(void 0,0,1,0,1,0),Dn.bind(void 0,0,1,0,1,1),Dn.bind(void 0,0,1,0,1,2),Dn.bind(void 0,0,1,0,1,3),Dn.bind(void 0,0,1,1,0,0),Dn.bind(void 0,0,1,1,0,1),Dn.bind(void 0,0,1,1,0,2),Dn.bind(void 0,0,1,1,0,3),Dn.bind(void 0,0,1,1,1,0),Dn.bind(void 0,0,1,1,1,1),Dn.bind(void 0,0,1,1,1,2),Dn.bind(void 0,0,1,1,1,3),Dn.bind(void 0,1,0,0,0,0),Dn.bind(void 0,1,0,0,0,1),Dn.bind(void 0,1,0,0,0,2),Dn.bind(void 0,1,0,0,0,3),Dn.bind(void 0,1,0,0,1,0),Dn.bind(void 0,1,0,0,1,1),Dn.bind(void 0,1,0,0,1,2),Dn.bind(void 0,1,0,0,1,3),Dn.bind(void 0,1,0,1,0,0),Dn.bind(void 0,1,0,1,0,1),Dn.bind(void 0,1,0,1,0,2),Dn.bind(void 0,1,0,1,0,3),Dn.bind(void 0,1,0,1,1,0),Dn.bind(void 0,1,0,1,1,1),Dn.bind(void 0,1,0,1,1,2),Dn.bind(void 0,1,0,1,1,3),Dn.bind(void 0,1,1,0,0,0),Dn.bind(void 0,1,1,0,0,1),Dn.bind(void 0,1,1,0,0,2),Dn.bind(void 0,1,1,0,0,3),Dn.bind(void 0,1,1,0,1,0),Dn.bind(void 0,1,1,0,1,1),Dn.bind(void 0,1,1,0,1,2),Dn.bind(void 0,1,1,0,1,3),Dn.bind(void 0,1,1,1,0,0),Dn.bind(void 0,1,1,1,0,1),Dn.bind(void 0,1,1,1,0,2),Dn.bind(void 0,1,1,1,0,3),Dn.bind(void 0,1,1,1,1,0),Dn.bind(void 0,1,1,1,1,1),Dn.bind(void 0,1,1,1,1,2),Dn.bind(void 0,1,1,1,1,3)],L_.prototype.setState=function(l,a){return this.state[l]=a,this.activeState={key:l,value:this.state[l]},this.activeState},L_.prototype.getState=function(l){return this.state[l]||null},bs.prototype.inboundIndex=function(l){return l>=0&&l<this.tokens.length},bs.prototype.composeRUD=function(l){var a=this,c=l.map(function(h){return a[h[0]].apply(a,h.slice(1).concat(!0))}),u=function(h){return"object"==typeof h&&h.hasOwnProperty("FAIL")};if(c.every(u))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:c.filter(u)};this.dispatch("composeRUD",[c.filter(function(h){return!u(h)})])},bs.prototype.replaceRange=function(l,a,o,c){a=null!==a?a:this.tokens.length;var u=o.every(function(d){return d instanceof L_});if(!isNaN(l)&&this.inboundIndex(l)&&u){var h=this.tokens.splice.apply(this.tokens,[l,a].concat(o));return c||this.dispatch("replaceToken",[l,a,o]),[h,o]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},bs.prototype.replaceToken=function(l,a,o){if(!isNaN(l)&&this.inboundIndex(l)&&a instanceof L_){var c=this.tokens.splice(l,1,a);return o||this.dispatch("replaceToken",[l,a]),[c[0],a]}return{FAIL:"replaceToken: invalid token or index."}},bs.prototype.removeRange=function(l,a,o){a=isNaN(a)?this.tokens.length:a;var c=this.tokens.splice(l,a);return o||this.dispatch("removeRange",[c,l,a]),c},bs.prototype.removeToken=function(l,a){if(!isNaN(l)&&this.inboundIndex(l)){var o=this.tokens.splice(l,1);return a||this.dispatch("removeToken",[o,l]),o}return{FAIL:"removeToken: invalid token index."}},bs.prototype.insertToken=function(l,a,o){return l.every(function(u){return u instanceof L_})?(this.tokens.splice.apply(this.tokens,[a,0].concat(l)),o||this.dispatch("insertToken",[l,a]),l):{FAIL:"insertToken: invalid token(s)."}},bs.prototype.registerModifier=function(l,a,o){this.events.newToken.subscribe(function(c,u){if(null===a||!0===a.apply(this,[c,u])){var p=o.apply(this,[c,u]);c.setState(l,p)}}),this.registeredModifiers.push(l)},RE.prototype.subscribe=function(l){return"function"==typeof l?this.subscribers.push(l)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},RE.prototype.unsubscribe=function(l){this.subscribers.splice(l,1)},pu.prototype.setCurrentIndex=function(l){this.index=l,this.current=this.context[l],this.backtrack=this.context.slice(0,l),this.lookahead=this.context.slice(l+1)},pu.prototype.get=function(l){switch(!0){case 0===l:return this.current;case l<0&&Math.abs(l)<=this.backtrack.length:return this.backtrack.slice(l)[0];case l>0&&l<=this.lookahead.length:return this.lookahead[l-1];default:return null}},bs.prototype.rangeToText=function(l){if(l instanceof R8)return this.getRangeTokens(l).map(function(a){return a.char}).join("")},bs.prototype.getText=function(){return this.tokens.map(function(l){return l.char}).join("")},bs.prototype.getContext=function(l){return this.registeredContexts[l]||null},bs.prototype.on=function(l,a){var o=this.events[l];return o?o.subscribe(a):null},bs.prototype.dispatch=function(l,a){var o=this,c=this.events[l];c instanceof RE&&c.subscribers.forEach(function(u){u.apply(o,a||[])})},bs.prototype.registerContextChecker=function(l,a,o){if(this.getContext(l))return{FAIL:"context name '"+l+"' is already registered."};if("function"!=typeof a)return{FAIL:"missing context start check."};if("function"!=typeof o)return{FAIL:"missing context end check."};var c=new wQe(l,a,o);return this.registeredContexts[l]=c,this.contextCheckers.push(c),c},bs.prototype.getRangeTokens=function(l){return[].concat(this.tokens.slice(l.startIndex,l.startIndex+l.endOffset))},bs.prototype.getContextRanges=function(l){var a=this.getContext(l);return a?a.ranges:{FAIL:"context checker '"+l+"' is not registered."}},bs.prototype.resetContextsRanges=function(){var l=this.registeredContexts;for(var a in l)l.hasOwnProperty(a)&&(l[a].ranges=[])},bs.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var l=this.tokens.map(function(c){return c.char}),a=0;a<l.length;a++){var o=new pu(l,a);this.runContextCheck(o)}this.dispatch("updateContextsRanges",[this.registeredContexts])},bs.prototype.setEndOffset=function(l,a){var c=new R8(this.getContext(a).openRange.startIndex,l,a),u=this.getContext(a).ranges;return c.rangeId=a+"."+u.length,u.push(c),this.getContext(a).openRange=null,c},bs.prototype.runContextCheck=function(l){var a=this,o=l.index;this.contextCheckers.forEach(function(c){var u=c.contextName,h=a.getContext(u).openRange;if(!h&&c.checkStart(l)&&(h=new R8(o,null,u),a.getContext(u).openRange=h,a.dispatch("contextStart",[u,o])),h&&c.checkEnd(l)){var f=a.setEndOffset(o-h.startIndex+1,u);a.dispatch("contextEnd",[u,f])}})},bs.prototype.tokenize=function(l){this.tokens=[],this.resetContextsRanges();var a=Array.from(l);this.dispatch("start");for(var o=0;o<a.length;o++){var c=a[o],u=new pu(a,o);this.dispatch("next",[u]),this.runContextCheck(u);var h=new L_(c);this.tokens.push(h),this.dispatch("newToken",[h,u])}return this.dispatch("end",[this.tokens]),this.tokens},Wl.prototype.getDefaultScriptFeaturesIndexes=function(){for(var l=this.font.tables.gsub.scripts,a=0;a<l.length;a++){var o=l[a];if("DFLT"===o.tag)return o.script.defaultLangSys.featureIndexes}return[]},Wl.prototype.getScriptFeaturesIndexes=function(l){if(!this.font.tables.gsub)return[];if(!l)return this.getDefaultScriptFeaturesIndexes();for(var o=this.font.tables.gsub.scripts,c=0;c<o.length;c++){var u=o[c];if(u.tag===l&&u.script.defaultLangSys)return u.script.defaultLangSys.featureIndexes;var h=u.langSysRecords;if(h)for(var d=0;d<h.length;d++){var f=h[d];if(f.tag===l)return f.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Wl.prototype.mapTagsToFeatures=function(l,a){for(var o={},c=0;c<l.length;c++)o[l[c].tag]=l[c].feature;this.features[a].tags=o},Wl.prototype.getScriptFeatures=function(l){var a=this.features[l];if(this.features.hasOwnProperty(l))return a;var o=this.getScriptFeaturesIndexes(l);if(!o)return null;var c=this.font.tables.gsub;return a=o.map(function(u){return c.features[u]}),this.features[l]=a,this.mapTagsToFeatures(a,l),a},Wl.prototype.getSubstitutionType=function(l,a){return l.lookupType.toString()+a.substFormat.toString()},Wl.prototype.getLookupMethod=function(l,a){var o=this;switch(this.getSubstitutionType(l,a)){case"11":return function(u){return DQe.apply(o,[u,a])};case"12":return function(u){return MQe.apply(o,[u,a])};case"63":return function(u){return EQe.apply(o,[u,a])};case"41":return function(u){return kQe.apply(o,[u,a])};case"21":return function(u){return AQe.apply(o,[u,a])};default:throw new Error("lookupType: "+l.lookupType+" - substFormat: "+a.substFormat+" is not yet supported")}},Wl.prototype.lookupFeature=function(l){var a=l.contextParams,o=a.index,c=this.getFeature({tag:l.tag,script:l.script});if(!c)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+l.tag+"' for script '"+l.script+"'.");for(var u=this.getFeatureLookups(c),h=[].concat(a.context),d=0;d<u.length;d++)for(var f=u[d],p=this.getLookupSubtables(f),g=0;g<p.length;g++){var m=p[g],v=this.getSubstitutionType(f,m),_=this.getLookupMethod(f,m),y=void 0;switch(v){case"11":(y=_(a.current))&&h.splice(o,1,new Qg({id:11,tag:l.tag,substitution:y}));break;case"12":(y=_(a.current))&&h.splice(o,1,new Qg({id:12,tag:l.tag,substitution:y}));break;case"63":y=_(a),Array.isArray(y)&&y.length&&h.splice(o,1,new Qg({id:63,tag:l.tag,substitution:y}));break;case"41":(y=_(a))&&h.splice(o,1,new Qg({id:41,tag:l.tag,substitution:y}));break;case"21":(y=_(a.current))&&h.splice(o,1,new Qg({id:21,tag:l.tag,substitution:y}))}a=new pu(h,o),(!Array.isArray(y)||y.length)&&(y=null)}return h.length?h:null},Wl.prototype.supports=function(l){if(!l.script)return!1;this.getScriptFeatures(l.script);var a=this.features.hasOwnProperty(l.script);if(!l.tag)return a;var o=this.features[l.script].some(function(c){return c.tag===l.tag});return a&&o},Wl.prototype.getLookupSubtables=function(l){return l.subtables||null},Wl.prototype.getLookupByIndex=function(l){return this.font.tables.gsub.lookups[l]||null},Wl.prototype.getFeatureLookups=function(l){return l.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Wl.prototype.getFeature=function(a){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(a.script)||this.getScriptFeatures(a.script);var o=this.features[a.script];return o?o.tags[a.tag]?this.features[a.script].tags[a.tag]:null:{FAIL:"No feature for script "+a.script}};var OQe={startCheck:function IQe(l){var a=l.current,o=l.get(-1);return null===o&&Jf(a)||!Jf(o)&&Jf(a)},endCheck:function PQe(l){var a=l.get(1);return null===a||!Jf(a)}},NQe={startCheck:function FQe(l){var a=l.current,o=l.get(-1);return(Jf(a)||ep(a))&&!Jf(o)},endCheck:function RQe(l){var a=l.get(1);switch(!0){case null===a:return!0;case!Jf(a)&&!ep(a):var o=function TQe(l){return/\s/.test(l)}(a);if(!o)return!0;if(o&&!l.lookahead.some(function(u){return Jf(u)||ep(u)}))return!0;break;default:return!1}}},pae={11:function LQe(l,a,o){a[o].setState(l.tag,l.substitution)},12:function BQe(l,a,o){a[o].setState(l.tag,l.substitution)},63:function VQe(l,a,o){l.substitution.forEach(function(c,u){a[o+u].setState(l.tag,c)})},41:function zQe(l,a,o){var c=a[o];c.setState(l.tag,l.substitution.ligGlyph);for(var u=l.substitution.components.length,h=0;h<u;h++)(c=a[o+h+1]).setState("deleted",!0)}};function L8(l,a,o){l instanceof Qg&&pae[l.id]&&pae[l.id](l,a,o)}function WQe(l){var a=this,o="arab",c=this.featuresTags[o],u=this.tokenizer.getRangeTokens(l);if(1!==u.length){var h=new pu(u.map(function(f){return f.getState("glyphIndex")}),0),d=new pu(u.map(function(f){return f.char}),0);u.forEach(function(f,p){if(!ep(f.char)){h.setCurrentIndex(p),d.setCurrentIndex(p);var m,g=0;switch(function UQe(l){for(var a=[].concat(l.backtrack),o=a.length-1;o>=0;o--){var c=a[o],u=fae(c),h=ep(c);if(!u&&!h)return!0;if(u)return!1}return!1}(d)&&(g|=1),function HQe(l){if(fae(l.current))return!1;for(var a=0;a<l.lookahead.length;a++)if(!ep(l.lookahead[a]))return!0;return!1}(d)&&(g|=2),g){case 1:m="fina";break;case 2:m="init";break;case 3:m="medi"}if(-1!==c.indexOf(m)){var v=a.query.lookupFeature({tag:m,script:o,contextParams:h});if(v instanceof Error)return console.info(v.message);v.forEach(function(_,y){_ instanceof Qg&&(L8(_,u,y),h.context[y]=_.substitution)})}}})}}function gae(l,a){return new pu(l.map(function(c){return c.activeState.value}),a||0)}function GQe(l){var a=this,c=this.tokenizer.getRangeTokens(l),u=gae(c);u.context.forEach(function(h,d){u.setCurrentIndex(d);var f=a.query.lookupFeature({tag:"rlig",script:"arab",contextParams:u});f.length&&(f.forEach(function(p){return L8(p,c,d)}),u=gae(c))})}var qQe={startCheck:function jQe(l){var a=l.current,o=l.get(-1);return null===o&&NE(a)||!NE(o)&&NE(a)},endCheck:function $Qe(l){var a=l.get(1);return null===a||!NE(a)}};function mae(l,a){return new pu(l.map(function(c){return c.activeState.value}),a||0)}function YQe(l){var a=this,c=this.tokenizer.getRangeTokens(l),u=mae(c);u.context.forEach(function(h,d){u.setCurrentIndex(d);var f=a.query.lookupFeature({tag:"liga",script:"latn",contextParams:u});f.length&&(f.forEach(function(p){return L8(p,c,d)}),u=mae(c))})}function gu(l){this.baseDir=l||"ltr",this.tokenizer=new bs,this.featuresTags={}}function B8(l){var a=this.contextChecks[l+"Check"];return this.tokenizer.registerContextChecker(l,a.startCheck,a.endCheck)}function XQe(){return B8.call(this,"latinWord"),B8.call(this,"arabicWord"),B8.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function ZQe(){var l=this;this.tokenizer.getContextRanges("arabicSentence").forEach(function(o){var c=l.tokenizer.getRangeTokens(o);l.tokenizer.replaceRange(o.startIndex,o.endOffset,c.reverse())})}function V8(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function KQe(){var l=this;this.featuresTags.hasOwnProperty("arab")&&(V8.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(c){WQe.call(l,c)}))}function QQe(){var l=this,a="arab";this.featuresTags.hasOwnProperty(a)&&-1!==this.featuresTags[a].indexOf("rlig")&&(V8.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(u){GQe.call(l,u)}))}function JQe(){var l=this,a="latn";this.featuresTags.hasOwnProperty(a)&&-1!==this.featuresTags[a].indexOf("liga")&&(V8.call(this),this.tokenizer.getContextRanges("latinWord").forEach(function(u){YQe.call(l,u)}))}function wr(l){(l=l||{}).tables=l.tables||{},l.empty||(nx(l.familyName,"When creating a new Font object, familyName is required."),nx(l.styleName,"When creating a new Font object, styleName is required."),nx(l.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),nx(l.ascender,"When creating a new Font object, ascender is required."),nx(l.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:l.familyName||" "},fontSubfamily:{en:l.styleName||" "},fullName:{en:l.fullName||l.familyName+" "+l.styleName},postScriptName:{en:l.postScriptName||(l.familyName+l.styleName).replace(/\s/g,"")},designer:{en:l.designer||" "},designerURL:{en:l.designerURL||" "},manufacturer:{en:l.manufacturer||" "},manufacturerURL:{en:l.manufacturerURL||" "},license:{en:l.license||" "},licenseURL:{en:l.licenseURL||" "},version:{en:l.version||"Version 0.1"},description:{en:l.description||" "},copyright:{en:l.copyright||" "},trademark:{en:l.trademark||" "}},this.unitsPerEm=l.unitsPerEm||1e3,this.ascender=l.ascender,this.descender=l.descender,this.createdTimestamp=l.createdTimestamp,this.tables=Object.assign(l.tables,{os2:Object.assign({usWeightClass:l.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:l.widthClass||this.usWidthClasses.MEDIUM,fsSelection:l.fsSelection||this.fsSelectionValues.REGULAR},l.tables.os2)})),this.supported=!0,this.glyphs=new dh.GlyphSet(this,l.glyphs||[]),this.encoding=new noe(this),this.position=new tx(this),this.substitution=new Hl(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Yoe(this):void 0}})}function tJe(l,a,o){var c={},u=new Tn.Parser(l,a);return c.tag=u.parseTag(),c.minValue=u.parseFixed(),c.defaultValue=u.parseFixed(),c.maxValue=u.parseFixed(),u.skip("uShort",1),c.name=o[u.parseUShort()]||{},c}function iJe(l,a,o,c){var u={},h=new Tn.Parser(l,a);u.name=c[h.parseUShort()]||{},h.skip("uShort",1),u.coordinates={};for(var d=0;d<o.length;++d)u.coordinates[o[d].tag]=h.parseFixed();return u}gu.prototype.setText=function(l){this.text=l},gu.prototype.contextChecks={latinWordCheck:qQe,arabicWordCheck:OQe,arabicSentenceCheck:NQe},gu.prototype.registerFeatures=function(l,a){var o=this,c=a.filter(function(u){return o.query.supports({script:l,tag:u})});this.featuresTags[l]=this.featuresTags.hasOwnProperty(l)?this.featuresTags[l].concat(c):c},gu.prototype.applyFeatures=function(l,a){if(!l)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Wl(l));for(var o=0;o<a.length;o++){var c=a[o];!this.query.supports({script:c.script})||this.registerFeatures(c.script,c.tags)}},gu.prototype.registerModifier=function(l,a,o){this.tokenizer.registerModifier(l,a,o)},gu.prototype.checkContextReady=function(l){return!!this.tokenizer.getContext(l)},gu.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(KQe.call(this),QQe.call(this)),this.checkContextReady("latinWord")&&JQe.call(this),this.checkContextReady("arabicSentence")&&ZQe.call(this)},gu.prototype.processText=function(l){(!this.text||this.text!==l)&&(this.setText(l),XQe.call(this),this.applyFeaturesToContexts())},gu.prototype.getBidiText=function(l){return this.processText(l),this.tokenizer.getText()},gu.prototype.getTextGlyphs=function(l){this.processText(l);for(var a=[],o=0;o<this.tokenizer.tokens.length;o++){var c=this.tokenizer.tokens[o];if(!c.state.deleted){var u=c.activeState.value;a.push(Array.isArray(u)?u[0]:u)}}return a},wr.prototype.hasChar=function(l){return null!==this.encoding.charToGlyphIndex(l)},wr.prototype.charToGlyphIndex=function(l){return this.encoding.charToGlyphIndex(l)},wr.prototype.charToGlyph=function(l){var a=this.charToGlyphIndex(l),o=this.glyphs.get(a);return o||(o=this.glyphs.get(0)),o},wr.prototype.updateFeatures=function(l){return this.defaultRenderOptions.features.map(function(a){return"latn"===a.script?{script:"latn",tags:a.tags.filter(function(o){return l[o]})}:a})},wr.prototype.stringToGlyphs=function(l,a){var o=this,c=new gu;c.registerModifier("glyphIndex",null,function(v){return o.charToGlyphIndex(v.char)});var h=a?this.updateFeatures(a.features):this.defaultRenderOptions.features;c.applyFeatures(this,h);for(var d=c.getTextGlyphs(l),f=d.length,p=new Array(f),g=this.glyphs.get(0),m=0;m<f;m+=1)p[m]=this.glyphs.get(d[m])||g;return p},wr.prototype.nameToGlyphIndex=function(l){return this.glyphNames.nameToGlyphIndex(l)},wr.prototype.nameToGlyph=function(l){var a=this.nameToGlyphIndex(l),o=this.glyphs.get(a);return o||(o=this.glyphs.get(0)),o},wr.prototype.glyphIndexToName=function(l){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(l):""},wr.prototype.getKerningValue=function(l,a){l=l.index||l,a=a.index||a;var o=this.position.defaultKerningTables;return o?this.position.getKerningValue(o,l,a):this.kerningPairs[l+","+a]||0},wr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},wr.prototype.forEachGlyph=function(l,a,o,c,u,h){a=void 0!==a?a:0,o=void 0!==o?o:0,c=void 0!==c?c:72,u=Object.assign({},this.defaultRenderOptions,u);var p,d=1/this.unitsPerEm*c,f=this.stringToGlyphs(l,u);if(u.kerning){var g=u.script||this.position.getDefaultScriptName();p=this.position.getKerningTables(g,u.language)}for(var m=0;m<f.length;m+=1){var v=f[m];h.call(this,v,a,o,c,u),v.advanceWidth&&(a+=v.advanceWidth*d),u.kerning&&m<f.length-1&&(a+=(p?this.position.getKerningValue(p,v.index,f[m+1].index):this.getKerningValue(v,f[m+1]))*d),u.letterSpacing?a+=u.letterSpacing*c:u.tracking&&(a+=u.tracking/1e3*c)}return a},wr.prototype.getPath=function(l,a,o,c,u){var h=new Gs;return this.forEachGlyph(l,a,o,c,u,function(d,f,p,g){var m=d.getPath(f,p,g,u,this);h.extend(m)}),h},wr.prototype.getPaths=function(l,a,o,c,u){var h=[];return this.forEachGlyph(l,a,o,c,u,function(d,f,p,g){var m=d.getPath(f,p,g,u,this);h.push(m)}),h},wr.prototype.getAdvanceWidth=function(l,a,o){return this.forEachGlyph(l,0,0,a,o,function(){})},wr.prototype.draw=function(l,a,o,c,u,h){this.getPath(a,o,c,u,h).draw(l)},wr.prototype.drawPoints=function(l,a,o,c,u,h){this.forEachGlyph(a,o,c,u,h,function(d,f,p,g){d.drawPoints(l,f,p,g)})},wr.prototype.drawMetrics=function(l,a,o,c,u,h){this.forEachGlyph(a,o,c,u,h,function(d,f,p,g){d.drawMetrics(l,f,p,g)})},wr.prototype.getEnglishName=function(l){var a=this.names[l];if(a)return a.en},wr.prototype.validate=function(){var l=this;function o(c){var u=l.getEnglishName(c);u&&u.trim()}o("fontFamily"),o("weightName"),o("manufacturer"),o("copyright"),o("version")},wr.prototype.toTables=function(){return zZe_fontToTable(this)},wr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},wr.prototype.toArrayBuffer=function(){for(var a=this.toTables().encode(),o=new ArrayBuffer(a.length),c=new Uint8Array(o),u=0;u<a.length;u++)c[u]=a[u];return o},wr.prototype.download=function(l){var a=this.getEnglishName("fontFamily"),o=this.getEnglishName("fontSubfamily");l=l||a.replace(/\s/g,"")+"-"+o+".otf";var c=this.toArrayBuffer();if(function HZe(){return"undefined"!=typeof window}())if(window.URL=window.URL||window.webkitURL,window.URL){var u=new DataView(c),h=new Blob([u],{type:"font/opentype"}),d=document.createElement("a");d.href=window.URL.createObjectURL(h),d.download=l;var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!1),d.dispatchEvent(f)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var p=require("fs"),g=function WZe(l){for(var a=new Buffer(l.byteLength),o=new Uint8Array(l),c=0;c<a.length;++c)a[c]=o[c];return a}(c);p.writeFileSync(l,g)}},wr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},wr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},wr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var oJe_parse=function sJe(l,a,o){var c=new Tn.Parser(l,a),u=c.parseULong();Fn.argument(65536===u,"Unsupported fvar table version.");var h=c.parseOffset16();c.skip("uShort",1);for(var d=c.parseUShort(),f=c.parseUShort(),p=c.parseUShort(),g=c.parseUShort(),m=[],v=0;v<d;v++)m.push(tJe(l,a+h+v*f,o));for(var _=[],y=a+h+d*f,b=0;b<p;b++)_.push(iJe(l,y+b*g,m,o));return{axes:m,instances:_}},aJe=function(){return{coverage:this.parsePointer(Je.coverage),attachPoints:this.parseList(Je.pointer(Je.uShortList))}},lJe=function(){var l=this.parseUShort();return Fn.argument(1===l||2===l||3===l,"Unsupported CaretValue table version."),1===l?{coordinate:this.parseShort()}:2===l?{pointindex:this.parseShort()}:3===l?{coordinate:this.parseShort()}:void 0},cJe=function(){return this.parseList(Je.pointer(lJe))},uJe=function(){return{coverage:this.parsePointer(Je.coverage),ligGlyphs:this.parseList(Je.pointer(cJe))}},hJe=function(){return this.parseUShort(),this.parseList(Je.pointer(Je.coverage))},fJe_parse=function dJe(l,a){var o=new Je(l,a=a||0),c=o.parseVersion(1);Fn.argument(1===c||1.2===c||1.3===c,"Unsupported GDEF table version.");var u={version:c,classDef:o.parsePointer(Je.classDef),attachList:o.parsePointer(aJe),ligCaretList:o.parsePointer(uJe),markAttachClassDef:o.parsePointer(Je.classDef)};return c>=1.2&&(u.markGlyphSets=o.parsePointer(hJe)),u},mu=new Array(10);mu[1]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();return 1===o?{posFormat:1,coverage:this.parsePointer(Je.coverage),value:this.parseValueRecord()}:2===o?{posFormat:2,coverage:this.parsePointer(Je.coverage),values:this.parseValueRecordList()}:void Fn.assert(!1,"0x"+a.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},mu[2]=function(){var a=this.offset+this.relativeOffset,o=this.parseUShort();Fn.assert(1===o||2===o,"0x"+a.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var c=this.parsePointer(Je.coverage),u=this.parseUShort(),h=this.parseUShort();if(1===o)return{posFormat:o,coverage:c,valueFormat1:u,valueFormat2:h,pairSets:this.parseList(Je.pointer(Je.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(u),value2:this.parseValueRecord(h)}})))};if(2===o){var d=this.parsePointer(Je.classDef),f=this.parsePointer(Je.classDef),p=this.parseUShort(),g=this.parseUShort();return{posFormat:o,coverage:c,valueFormat1:u,valueFormat2:h,classDef1:d,classDef2:f,class1Count:p,class2Count:g,classRecords:this.parseList(p,Je.list(g,function(){return{value1:this.parseValueRecord(u),value2:this.parseValueRecord(h)}}))}}},mu[3]=function(){return{error:"GPOS Lookup 3 not supported"}},mu[4]=function(){return{error:"GPOS Lookup 4 not supported"}},mu[5]=function(){return{error:"GPOS Lookup 5 not supported"}},mu[6]=function(){return{error:"GPOS Lookup 6 not supported"}},mu[7]=function(){return{error:"GPOS Lookup 7 not supported"}},mu[8]=function(){return{error:"GPOS Lookup 8 not supported"}},mu[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var vJe_parse=function pJe(l,a){var o=new Je(l,a=a||0),c=o.parseVersion(1);return Fn.argument(1===c||1.1===c,"Unsupported GPOS table version "+c),1===c?{version:c,scripts:o.parseScriptList(),features:o.parseFeatureList(),lookups:o.parseLookupList(mu)}:{version:c,scripts:o.parseScriptList(),features:o.parseFeatureList(),lookups:o.parseLookupList(mu),variations:o.parseFeatureVariationsList()}},CJe_parse=function bJe(l,a){var o=new Tn.Parser(l,a),c=o.parseUShort();if(0===c)return function _Je(l){var a={};l.skip("uShort");var o=l.parseUShort();Fn.argument(0===o,"Unsupported kern sub-table version."),l.skip("uShort",2);var c=l.parseUShort();l.skip("uShort",3);for(var u=0;u<c;u+=1){var h=l.parseUShort(),d=l.parseUShort(),f=l.parseShort();a[h+","+d]=f}return a}(o);if(1===c)return function yJe(l){var a={};l.skip("uShort"),l.parseULong()>1&&console.warn("Only the first kern subtable is supported."),l.skip("uLong");var u=255&l.parseUShort();if(l.skip("uShort"),0===u){var h=l.parseUShort();l.skip("uShort",3);for(var d=0;d<h;d+=1){var f=l.parseUShort(),p=l.parseUShort(),g=l.parseShort();a[f+","+p]=g}}return a}(o);throw new Error("Unsupported kern table version ("+c+").")},wJe_parse=function xJe(l,a,o,c){for(var u=new Tn.Parser(l,a),h=c?u.parseUShort:u.parseULong,d=[],f=0;f<o+1;f+=1){var p=h.call(u);c&&(p*=2),d.push(p)}return d};function SJe(l,a){require("fs").readFile(l,function(c,u){if(c)return a(c.message);a(null,zoe(u))})}function TJe(l,a){var o=new XMLHttpRequest;o.open("get",l,!0),o.responseType="arraybuffer",o.onload=function(){return o.response?a(null,o.response):a("Font could not be loaded: "+o.statusText)},o.onerror=function(){a("Font could not be loaded")},o.send()}function _ae(l,a){for(var o=[],c=12,u=0;u<a;u+=1){var h=Tn.getTag(l,c),d=Tn.getULong(l,c+4),f=Tn.getULong(l,c+8),p=Tn.getULong(l,c+12);o.push({tag:h,checksum:d,offset:f,length:p,compression:!1}),c+=16}return o}function os(l,a){if("WOFF"===a.compression){var o=new Uint8Array(l.buffer,a.offset+2,a.compressedLength-2),c=new Uint8Array(a.length);if(function dXe(l,a){var c,h,o=new oXe(l,a);do{switch(c=cXe(o),hh(o,2,0)){case 0:h=hXe(o);break;case 1:h=qse(o,zse,Use);break;case 2:uXe(o,o.ltree,o.dtree),h=qse(o,o.ltree,o.dtree);break;default:h=-3}if(0!==h)throw new Error("Data error")}while(!c);o.destLen<o.dest.length&&("function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen))}(o,c),c.byteLength!==a.length)throw new Error("Decompression error: "+a.tag+" decompressed length doesn't match recorded length");return{data:new DataView(c.buffer,0),offset:0}}return{data:l,offset:a.offset}}function z8(l,a){a=null==a?{}:a;var o,c,d,u=new wr({empty:!0}),h=new DataView(l,0),f=[],p=Tn.getTag(h,0);if(p===String.fromCharCode(0,1,0,0)||"true"===p||"typ1"===p)u.outlinesFormat="truetype",f=_ae(h,d=Tn.getUShort(h,4));else if("OTTO"===p)u.outlinesFormat="cff",f=_ae(h,d=Tn.getUShort(h,4));else{if("wOFF"!==p)throw new Error("Unsupported OpenType signature "+p);var g=Tn.getTag(h,4);if(g===String.fromCharCode(0,1,0,0))u.outlinesFormat="truetype";else{if("OTTO"!==g)throw new Error("Unsupported OpenType flavor "+p);u.outlinesFormat="cff"}f=function DJe(l,a){for(var o=[],c=44,u=0;u<a;u+=1){var h=Tn.getTag(l,c),d=Tn.getULong(l,c+4),f=Tn.getULong(l,c+8),p=Tn.getULong(l,c+12);o.push({tag:h,offset:d,compression:f<p&&"WOFF",compressedLength:f,length:p}),c+=20}return o}(h,d=Tn.getUShort(h,12))}for(var m,v,_,y,b,x,C,w,S,D,T,A,I=0;I<d;I+=1){var N=f[I],k=void 0;switch(N.tag){case"cmap":k=os(h,N),u.tables.cmap=toe_parse(k.data,k.offset),u.encoding=new ioe(u.tables.cmap);break;case"cvt ":k=os(h,N),A=new Tn.Parser(k.data,k.offset),u.tables.cvt=A.parseShortList(N.length/2);break;case"fvar":v=N;break;case"fpgm":k=os(h,N),A=new Tn.Parser(k.data,k.offset),u.tables.fpgm=A.parseByteList(N.length);break;case"head":k=os(h,N),u.tables.head=voe_parse(k.data,k.offset),u.unitsPerEm=u.tables.head.unitsPerEm,o=u.tables.head.indexToLocFormat;break;case"hhea":k=os(h,N),u.tables.hhea=_oe_parse(k.data,k.offset),u.ascender=u.tables.hhea.ascender,u.descender=u.tables.hhea.descender,u.numberOfHMetrics=u.tables.hhea.numberOfHMetrics;break;case"hmtx":C=N;break;case"ltag":k=os(h,N),c=boe_parse(k.data,k.offset);break;case"COLR":k=os(h,N),u.tables.colr=Poe_parse(k.data,k.offset);break;case"CPAL":k=os(h,N),u.tables.cpal=Ooe_parse(k.data,k.offset);break;case"maxp":k=os(h,N),u.tables.maxp=Coe_parse(k.data,k.offset),u.numGlyphs=u.tables.maxp.numGlyphs;break;case"name":D=N;break;case"OS/2":k=os(h,N),u.tables.os2=D8_parse(k.data,k.offset);break;case"post":k=os(h,N),u.tables.post=koe_parse(k.data,k.offset),u.glyphNames=new b8(u.tables.post);break;case"prep":k=os(h,N),A=new Tn.Parser(k.data,k.offset),u.tables.prep=A.parseByteList(N.length);break;case"glyf":_=N;break;case"loca":S=N;break;case"CFF ":m=N;break;case"kern":w=N;break;case"GDEF":y=N;break;case"GPOS":b=N;break;case"GSUB":x=N;break;case"meta":T=N}}var F=os(h,D);if(u.tables.name=Eoe_parse(F.data,F.offset,c),u.names=u.tables.name,_&&S){var B=0===o,V=os(h,S),$=wJe_parse(V.data,V.offset,u.numGlyphs,B),q=os(h,_);u.glyphs=joe.parse(q.data,q.offset,$,u,a)}else{if(!m)throw new Error("Font doesn't contain TrueType or CFF outlines.");var L=os(h,m);moe_parse(L.data,L.offset,u,a)}var U=os(h,C);if(yoe_parse(u,U.data,U.offset,u.numberOfHMetrics,u.numGlyphs,u.glyphs,a),function FXe(l,a){a.lowMemory?function OXe(l){l._IndexToUnicodeMap={};for(var a=l.tables.cmap.glyphIndexMap,o=Object.keys(a),c=0;c<o.length;c+=1){var u=o[c],h=a[u];void 0===l._IndexToUnicodeMap[h]?l._IndexToUnicodeMap[h]={unicodes:[parseInt(u)]}:l._IndexToUnicodeMap[h].unicodes.push(parseInt(u))}}(l):function PXe(l){for(var a,o=l.tables.cmap.glyphIndexMap,c=Object.keys(o),u=0;u<c.length;u+=1){var h=c[u];(a=l.glyphs.get(o[h])).addUnicode(parseInt(h))}for(var f=0;f<l.glyphs.length;f+=1)a=l.glyphs.get(f),l.cffEncoding?a.name=l.isCIDFont?"gid"+f:l.cffEncoding.charset[f]:l.glyphNames.names&&(a.name=l.glyphNames.glyphIndexToName(f))}(l)}(u,a),w){var z=os(h,w);u.kerningPairs=CJe_parse(z.data,z.offset)}else u.kerningPairs={};if(y){var W=os(h,y);u.tables.gdef=fJe_parse(W.data,W.offset)}if(b){var H=os(h,b);u.tables.gpos=vJe_parse(H.data,H.offset),u.position.init()}if(x){var j=os(h,x);u.tables.gsub=Aoe_parse(j.data,j.offset)}if(v){var G=os(h,v);u.tables.fvar=oJe_parse(G.data,G.offset,u.names)}if(T){var K=os(h,T);u.tables.meta=Ioe_parse(K.data,K.offset),u.metas=u.tables.meta}return u}var kJe=Object.freeze({__proto__:null,Font:wr,Glyph:Ul,Path:Gs,BoundingBox:Sd,_parse:Tn,parse:z8,load:function MJe(l,a,o){o=null==o?{}:o;var u="undefined"!=typeof window||o.isUrl?TJe:SJe;return new Promise(function(h,d){u(l,function(f,p){if(f){if(a)return a(f);d(f)}var g;try{g=z8(p,o)}catch(m){if(a)return a(m,null);d(m)}if(a)return a(null,g);h(g)})})},loadSync:function EJe(l,a){return z8(zoe(require("fs").readFileSync(l)),a)}});const yae=kJe;class AJe extends ose{constructor(a){super(a),this.reversed=!1}load(a,o,c,u){const h=this,d=new xd(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(a,function(f){try{o(h.parse(f))}catch(p){u?u(p):console.error(p),h.manager.itemError(a)}},c,u)}parse(a){function c(u){const h=[];let d;u.forEach(function(p){"m"===p.type.toLowerCase()?(d=[p],h.push(d)):"z"!==p.type.toLowerCase()&&d.push(p)});const f=[];return h.forEach(function(p){f.push({type:"m",x:p[p.length-1].x,y:p[p.length-1].y});for(let m=p.length-1;m>0;m--){const v=p[m],_={type:v.type};void 0!==v.x2&&void 0!==v.y2?(_.x1=v.x2,_.y1=v.y2,_.x2=v.x1,_.y2=v.y1):void 0!==v.x1&&void 0!==v.y1&&(_.x1=v.x1,_.y1=v.y1),_.x=p[m-1].x,_.y=p[m-1].y,f.push(_)}}),f}return void 0===yae?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function o(u,h){const d=Math.round,f={},p=1e5/(72*(u.unitsPerEm||2048)),g=u.encoding.cmap.glyphIndexMap,m=Object.keys(g);for(let v=0;v<m.length;v++){const _=m[v],y=u.glyphs.glyphs[g[_]];if(void 0!==_){const b={ha:d(y.advanceWidth*p),x_min:d(y.xMin*p),x_max:d(y.xMax*p),o:""};h&&(y.path.commands=c(y.path.commands)),y.path.commands.forEach(function(x){"c"===x.type.toLowerCase()&&(x.type="b"),b.o+=x.type.toLowerCase()+" ",void 0!==x.x&&void 0!==x.y&&(b.o+=d(x.x*p)+" "+d(x.y*p)+" "),void 0!==x.x1&&void 0!==x.y1&&(b.o+=d(x.x1*p)+" "+d(x.y1*p)+" "),void 0!==x.x2&&void 0!==x.y2&&(b.o+=d(x.x2*p)+" "+d(x.y2*p)+" ")}),f[String.fromCodePoint(y.unicode)]=b}}return{glyphs:f,familyName:u.getEnglishName("fullName"),ascender:d(u.ascender*p),descender:d(u.descender*p),underlinePosition:u.tables.post.underlinePosition,underlineThickness:u.tables.post.underlineThickness,boundingBox:{xMin:u.tables.head.xMin,xMax:u.tables.head.xMax,yMin:u.tables.head.yMin,yMax:u.tables.head.yMax},resolution:1e3,original_font_information:u.tables.name}}(yae.parse(a),this.reversed)}}class bae{constructor(a){this.isFont=!0,this.type="Font",this.data=a}generateShapes(a,o=100){const c=[],u=function IJe(l,a,o){const c=Array.from(l),u=a/o.resolution,h=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*u,d=[];let f=0,p=0;for(let g=0;g<c.length;g++){const m=c[g];if("\n"===m)f=0,p-=h;else{const v=PJe(m,u,f,p,o);f+=v.offsetX,d.push(v.path)}}return d}(a,o,this.data);for(let h=0,d=u.length;h<d;h++)c.push(...u[h].toShapes());return c}}function PJe(l,a,o,c,u){const h=u.glyphs[l]||u.glyphs["?"];if(!h)return void console.error('THREE.Font: character "'+l+'" does not exists in font family '+u.familyName+".");const d=new HYe;let f,p,g,m,v,_,y,b;if(h.o){const x=h._cachedOutline||(h._cachedOutline=h.o.split(" "));for(let C=0,w=x.length;C<w;)switch(x[C++]){case"m":f=x[C++]*a+o,p=x[C++]*a+c,d.moveTo(f,p);break;case"l":f=x[C++]*a+o,p=x[C++]*a+c,d.lineTo(f,p);break;case"q":g=x[C++]*a+o,m=x[C++]*a+c,v=x[C++]*a+o,_=x[C++]*a+c,d.quadraticCurveTo(v,_,g,m);break;case"b":g=x[C++]*a+o,m=x[C++]*a+c,v=x[C++]*a+o,_=x[C++]*a+c,y=x[C++]*a+o,b=x[C++]*a+c,d.bezierCurveTo(v,_,y,b,g,m)}}return{offsetX:h.ha*a,path:d}}class OJe extends M_{constructor(a,o={}){const c=o.font;if(void 0===c)super();else{const u=c.generateShapes(a,o.size);o.depth=void 0!==o.height?o.height:50,void 0===o.bevelThickness&&(o.bevelThickness=10),void 0===o.bevelSize&&(o.bevelSize=8),void 0===o.bevelEnabled&&(o.bevelEnabled=!1),super(u,o)}this.type="TextGeometry"}}var Oi=(()=>(function(l){l[l.Left=0]="Left",l[l.Right=1]="Right",l[l.Middle=2]="Middle"}(Oi||(Oi={})),Oi))();class FJe{constructor(){this.scale=1,this.width=100,this.height=100,this.delta=10,this.lineWidth=1,this.lineSizeExtra=1}setWidth(a){return this.width=a,this}setHeight(a){return this.height=a,this}setDelta(a){return this.delta=a,this}clearAll(){return this}}class U8{constructor(a,o){this.name=a,this.vertexes=o}static builder(){return new U8("",null)}setName(a){return this.name=a,this}setVertexes(a){return this.vertexes=a,this}}class RJe{\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(a){return 1/(a*(Math.sqrt(5)+1)/2)}toDegrees(a){return a/Math.PI*180}translation(a,o,c){return(new ii).makeTranslation(a,o,c)}zRotation(a,o,c,u){const h=new ii;h.makeRotationZ(a);const d=new ii;d.makeTranslation(o,c,0);const f=new ii;return f.identity(),u&&f.scale(u),f.multiply(h.multiply(d))}extrudeShape(a){const o=new Ure([new te(0,0,-.1),new te(0,0,0)]);return new M_(a,{steps:1,bevelEnabled:!1,extrudePath:o})}extrudePath(a,o,c,u){let h=-o+Math.PI/2,d=[-c,u];const f=[],p=this.zRotation(h,d[0],d[1]);a.forEach(m=>{let _=new ji(m[0],m[1],0,1).applyMatrix4(p);f.push(new ht(_.x,_.y))});const g=new yd(f);return this.extrudeShape(g)}createTrost(a,o=0,c=0,u=0,h=0,d=0){let f=a.delta/2/4,p=a.height*(1-c)*.8;return this.extrudePath([[-f,0],[-f,p+3*f],[f,p+3*f],[f,0],[-f,0]],.05*Math.PI,4*-a.delta,-a.height/2)}createKopie(a,o=0,c=0,u=0,h=0,d=0){let f=a.delta/2/4,p=a.height*(1-c)*.8;return this.extrudePath([[-f,0],[-f,p+3*f],[f,p+3*f],[f,0],[-f,0]],-.05*Math.PI,4*+a.delta,-a.height/2)}createTri1(a,o,c=0,u=0,h=0,d=0,f=0){let p=o.delta/2/4,g=o.height*(1-u)*.8;return this.extrudePath([[4*-p/2,+g-2*p],[0,+g+2*p],[4*+p/2,+g-2*p],[4*-p/2,+g-2*p]],180*a/20*1/180*Math.PI,a*-o.delta*4,-o.height/2)}createTri2(a,o,c=0,u=0,h=0,d=0,f=0){let p=o.delta/2/4,g=o.height*(1-u)*.8;return this.extrudePath([[4*-p/2,+g-6*p],[0,+g-2*p],[4*+p/2,+g-6*p],[4*-p/2,+g-6*p]],180*a/20*1/180*Math.PI,a*-o.delta*4,-o.height/2)}createTrostNakonechnik(a,o,c=0,u=0,h=0,d=0,f=0){let p=o.delta/2/4,g=o.height*(1-u)*.8,m=o.delta,v=o.height,_=new yd;_.moveTo(0,+g+2*p);let x=.5,C=[[0,+g+2*p],[5*-p*x,+g+2*p],[5*-p,+g+2*p],[5*-p,+g+8*p],[5*-p,+g+16*p],[5*-p*x,+g+16*p],[0,+g+16*p],[5*+p*x,+g+16*p],[5*+p,+g+16*p],[5*+p,+g+8*p],[5*+p,+g+2*p],[5*+p*x,+g+2*p],[0,+g+2*p]],T=-180*a/20*1/180*Math.PI+Math.PI/2,A=[-a*-m*4,-v/2];const N=this.zRotation(T,A[0],A[1]);let k=C.map(F=>{let V=new ji(F[0],F[1],0,1).applyMatrix4(N);return new ht(V.x,V.y)});return _.moveTo(k[0].x,k[0].y),_.bezierCurveTo(k[1].x,k[1].y,k[2].x,k[2].y,k[3].x,k[3].y),_.bezierCurveTo(k[4].x,k[4].y,k[5].x,k[5].y,k[6].x,k[6].y),_.bezierCurveTo(k[7].x,k[7].y,k[8].x,k[8].y,k[9].x,k[9].y),_.bezierCurveTo(k[10].x,k[10].y,k[11].x,k[11].y,k[12].x,k[12].y),this.extrudeShape(_)}createTri3_2(a,o,c=0,u=0,h=0,d=0,f=0){let p=o.delta/2/4,g=o.height*(1-u)*.8;return this.extrudePath([[0,+g+2*p],[5*-p,+g+2*p],[5*-p,+g+16*p],[0,+g+16*p],[5*+p,+g+16*p],[5*+p,+g+2*p],[0,+g+2*p]],180*a/20*1/180*Math.PI,a*-o.delta*4,-o.height/2)}createKopieNakonechnik(a,o,c=0,u=0,h=0,d=0,f=0){let p=o.delta/2/4,g=o.height*(1-u)*.8;return this.extrudePath([[0,+g-2*p],[2*-p,+g+2*p],[0,+g+16*p],[2*+p,+g+2*p],[0,+g-2*p]],180*a/20*1/180*Math.PI,a*-o.delta*4,-o.height/2)}createSkull(a,o,c=0,u=0,h=0,d=0,f=0){let m=o.delta,v=o.height,_=new yd,S=0*o.delta/4/2,T=(Pt,Ft)=>Ft*(1.75*o.delta+2*Pt),A=(Pt,Ft)=>Ft*(1.75*o.delta+2*Pt)*.8,q=.7*T(S,1)/2*.5,L=.7*A(S,1)/2*.5,W=(T(S,1),A(S,1),T(S,1)),H=A(S,1),G=.275*W,K=.9*W/4,J=L/4*2,ce=q/4*2,xe=(Pt,Ft,qe,Xt,Gt)=>[[Ft/2,0],[Ft-Xt,0],[Ft,Gt],[Ft,qe/2],[Ft,qe-Gt],[Ft-Xt,qe],[Ft/2,qe],[Xt,qe],[0,qe-Gt],[0,qe/2],[0,Gt],[Xt,0],[Ft/2,0]].map(Ae=>[Ae[0]+Pt.x,Ae[1]+Pt.y]),Pe=Math.PI/4+Math.PI/2,Ze=[W/2,-H/2],Fe=this.zRotation(Pe,-Ze[0],Ze[1],new te(-1,1,1)),Ke=this.zRotation(Math.PI/2,0,-v/2-2*m-m/4),nt=(Pt=new ht(0,0),Ft=W,qe=H,Xt=q,Gt=L,[[Ft/2,0],[Ft-Xt,0],[Ft,Gt],[Ft,qe/2],[Ft,qe-Gt],[Ft/2+Ft/6+.16*Ft,qe-Gt],[Ft/2+Ft/6+.16*Ft,qe],[Ft/2+Ft/6+.16*Ft,qe+Gt],[Ft/2-Ft/4+.16*Ft,qe+Gt],[Ft/2-Ft/4+.16*Ft,qe],[Ft/2-Ft/4+.16*Ft,qe-Gt],[0,qe-Gt],[0,qe/2],[0,Gt],[Xt,0],[Ft/2,0]].map(Ae=>[Ae[0]+Pt.x,Ae[1]+Pt.y])).map(Pt=>{let Xt=new ji(Pt[0],Pt[1],0,1).applyMatrix4(Fe).applyMatrix4(Ke);return new ht(Xt.x,Xt.y)});var Pt,Ft,qe,Xt,Gt;_.moveTo(nt[0].x,nt[0].y),_.bezierCurveTo(nt[1].x,nt[1].y,nt[2].x,nt[2].y,nt[3].x,nt[3].y),_.bezierCurveTo(nt[4].x,nt[4].y,nt[5].x,nt[5].y,nt[6].x,nt[6].y),_.bezierCurveTo(nt[7].x,nt[7].y,nt[8].x,nt[8].y,nt[9].x,nt[9].y),_.bezierCurveTo(nt[10].x,nt[10].y,nt[11].x,nt[11].y,nt[12].x,nt[12].y),_.bezierCurveTo(nt[13].x,nt[13].y,nt[14].x,nt[14].y,nt[15].x,nt[15].y);let $e=xe(new ht(W/2-W/6,H/3),G,K,ce,J).map(Pt=>{let Xt=new ji(Pt[0],Pt[1],0,1).applyMatrix4(Fe).applyMatrix4(Ke);return new ht(Xt.x,Xt.y)}),Se=new Wg;Se.moveTo($e[0].x,$e[0].y),Se.bezierCurveTo($e[1].x,$e[1].y,$e[2].x,$e[2].y,$e[3].x,$e[3].y),Se.bezierCurveTo($e[4].x,$e[4].y,$e[5].x,$e[5].y,$e[6].x,$e[6].y),Se.bezierCurveTo($e[7].x,$e[7].y,$e[8].x,$e[8].y,$e[9].x,$e[9].y),Se.bezierCurveTo($e[10].x,$e[10].y,$e[11].x,$e[11].y,$e[12].x,$e[12].y),_.holes.push(Se);let Ge=xe(new ht(W/2+W/6,H/3),G,K,ce,J).map(Pt=>{let Xt=new ji(Pt[0],Pt[1],0,1).applyMatrix4(Fe).applyMatrix4(Ke);return new ht(Xt.x,Xt.y)}),Bt=new Wg;Bt.moveTo(Ge[0].x,Ge[0].y),Bt.bezierCurveTo(Ge[1].x,Ge[1].y,Ge[2].x,Ge[2].y,Ge[3].x,Ge[3].y),Bt.bezierCurveTo(Ge[4].x,Ge[4].y,Ge[5].x,Ge[5].y,Ge[6].x,Ge[6].y),Bt.bezierCurveTo(Ge[7].x,Ge[7].y,Ge[8].x,Ge[8].y,Ge[9].x,Ge[9].y),Bt.bezierCurveTo(Ge[10].x,Ge[10].y,Ge[11].x,Ge[11].y,Ge[12].x,Ge[12].y),_.holes.push(Bt);let In=W/4*.6,de=.9*W/4,se=.2*In,rt=.2*de,_t=((Pt,Ft,qe,Xt,Gt)=>[[Ft/2,0],[Ft/2+Xt,0],[Ft,qe-Gt],[Ft,qe],[Ft,qe+Gt],[0,qe+Gt],[0,qe],[0,qe-Gt],[Ft/2-Xt,0],[Ft/2,0]].map(Ae=>[Ae[0]+Pt.x,Ae[1]+Pt.y]))(new ht(W/2+2*G*.16,H/3*2*.9),In,de,se,rt).map(Pt=>{let Xt=new ji(Pt[0],Pt[1],0,1).applyMatrix4(Fe).applyMatrix4(Ke);return new ht(Xt.x,Xt.y)}),Ut=new Wg;return Ut.moveTo(_t[0].x,_t[0].y),Ut.bezierCurveTo(_t[1].x,_t[1].y,_t[2].x,_t[2].y,_t[3].x,_t[3].y),Ut.bezierCurveTo(_t[4].x,_t[4].y,_t[5].x,_t[5].y,_t[6].x,_t[6].y),Ut.bezierCurveTo(_t[7].x,_t[7].y,_t[8].x,_t[8].y,_t[9].x,_t[9].y),_.holes.push(Ut),this.extrudeShape(_)}createCrossParts(a,o=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0){let v=[],y=c,b=u||a.width,x=h||a.height,C=a.delta/a.width*b,w=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),S=b*(d||w),D=m||Math.atan2(1-w,.5),T=S*(f||1-w),A=S*(p||1-w),I=S*(p||.25),N=g?x*g+I*Math.tan(D):x-S/2,k=P_.builder(),F=($,q,L,U,z,W)=>{k.addPlaneXY(q,L,U,z,W),v.push(U8.builder().setVertexes(k).setName($)),k=P_.builder()};F("\u043a\u0440\u0435\u0441\u0442",new te(-C/2,x/2,0),C,x),F("\u043a\u0440\u0435\u0441\u0442",new te(-S/2,x/2-(T-C/2),0),S,C),F("\u0418\u0438\u0441\u0443\u0441 \u041d\u0430\u0437\u043e\u0440\u0435\u0439 \u0426\u0430\u0440\u044c \u0418\u0443\u0434\u0435\u0439\u0441\u043a\u0438\u0439",new te(-A/2,x/2-(y+(f?(S*(f||1-w)-C/2)/2:S*Math.pow(1-w,2))-C/2),0),A,C),F("\u043a\u0440\u0435\u0441\u0442",new te(-I/2,x/2-(N-I/Math.cos(D)/2)-C,0),I,C/Math.cos(D),0,D);let B=.55*a.width,V=1.5/a.width;return F("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(-B/2,-a.height/2+V,0),B,a.delta+V),F("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(-B/2-a.delta/2*3,-a.height/2-a.delta+V,0),2.5*a.delta,a.delta+V),F("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(+B/2-a.delta,-a.height/2-a.delta+V,0),2.5*a.delta,a.delta+V),F("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(-B/2-a.delta/2*3,-a.height/2-2*a.delta+V,0),a.delta,a.delta+V),F("\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",new te(+B/2+a.delta/2,-a.height/2-2*a.delta+V,0),a.delta,a.delta+V),v}createCross(a,o=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0){let v=P_.builder();return v.vertexes=this.createCrossParts(a,o,c,u,h,d,f,p,g,m).flatMap(_=>_.vertexes.vertexes),v}createConfig(){return new FJe}createTextDirect(a,o,c,u,h){let y=new OJe(o,{font:a,size:c,height:c/10,curveSegments:4,bevelThickness:c/100,bevelSize:c/100,bevelEnabled:!1});y.computeBoundingBox(),y.computeVertexNormals();let b=0;switch(h){case Oi.Left:b=0;break;case Oi.Right:b=-(y.boundingBox.max.x-y.boundingBox.min.x);break;case Oi.Middle:b=-.5*(y.boundingBox.max.x-y.boundingBox.min.x)}const x=new Es({color:16777215,transparent:!0});let C=new Wi(y,x);return C.position.x=u.x-y.boundingBox.min.x+b,C.position.y=u.y,C.position.z=u.z,C.rotation.x=0,C.rotation.y=0,C}createText(a,o,c,u=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,_=0){let y=(xe,ve,De="",We=1,ke=0,Pe=0)=>{a(xe,ve,De,We,ke,Pe)},b=d||c.width,x=f||c.height,C=c.delta/c.width*b,w=this.\u0437\u043e\u043b\u043e\u0442\u043e\u0435\u0421\u0435\u0447\u0435\u043d\u0438\u0435(1),S=b*(p||w),D=_||Math.atan2(1-w,.5),T=S*(g||1-w),A=S*(m||1-w),I=S*(m||.25),N=v?x*v+I*Math.tan(D):x-S/2,k=0,F=x/2+4*C,B=this.createTextDirect(o,"\u0426\u0430\u0440\u044c \u0421\u043b\u0430\u0432\u044b",C,new te(k,F,0),Oi.Middle),V=this.createTextDirect(o,"\u0418\u0438\u0441\u0443\u0441 \u0425\u0440\u0438\u0441\u0442\u043e\u0441",C,new te(k,F,0),Oi.Middle),$=this.createTextDirect(o,"\u0421\u044b\u043d \u0411\u043e\u0436\u0438\u0439",C,new te(k,F,0),Oi.Middle),q=this.createTextDirect(o,"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c",C,new te(k,F,0),Oi.Middle),L=this.createTextDirect(o,"\u0433\u043e\u0440\u0430 \u0413\u043e\u043b\u0433\u043e\u0444\u0430",C,new te(k,F,0),Oi.Middle),U=this.createTextDirect(o,"\u043a\u043e\u043f\u0438\u0435",C,new te(k,F,0),Oi.Middle),z=this.createTextDirect(o,"\u0442\u0440\u043e\u0441\u0442\u044c",C,new te(k,F,0),Oi.Middle),W=this.createTextDirect(o,"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430",C,new te(k,F,0),Oi.Middle),H=this.createTextDirect(o,"\u043c\u0435\u0441\u0442\u043e \u043b\u043e\u0431\u043d\u043e\u0435",C,new te(k,F,0),Oi.Middle),j=this.createTextDirect(o,"\u0440\u0430\u0441\u043f\u044f\u0442 \u0431\u044b\u0441\u0442\u044c",C,new te(k,F,0),Oi.Middle);k=-A/2,F=x/2+C,y(this.createTextDirect(o,"\u0446\u0440\u0483\u044c",C,new te(k,F,0),Oi.Right),B),y(this.createTextDirect(o,"\u0441\u043b\u0483\u0432\u044b",C,new te(k+A,F,0),Oi.Left),B),k=-S/2,F=x/2-(T-C/2)+C/2,y(this.createTextDirect(o,"\u0406\u0421",C,new te(k,F,0),Oi.Left),V),y(this.createTextDirect(o,"\u0483",C,new te(k+.2*C,F+.6*C,0),Oi.Left),V),y(this.createTextDirect(o,"\u0425\u0421",C,new te(k+S,F,0),Oi.Right),V),y(this.createTextDirect(o,"\u0483",C,new te(k+S-1.1*C,F+.6*C,0),Oi.Left),V),F-=3*C,y(this.createTextDirect(o,"\u0441\u043d\u0483\u044a",C,new te(k,F,0),Oi.Middle),$),y(this.createTextDirect(o,"\u0431\u0436\u0483\u0457\u0439",C,new te(k+S,F,0),Oi.Middle),$),k=-C/2,F=(x/2-(N-I/Math.cos(D)/2)-C+x/2-(T-C/2)+C/2)/2-C/2,y(this.createTextDirect(o,"\u043d\u0438",C,new te(k-C/2,F,0),Oi.Right),q),y(this.createTextDirect(o,"\u043a\u0430",C,new te(k+C+.3*C,F,0),Oi.Left),q);let G=.55*c.width,K=c.delta,J=K/2*3/2;k=-G/2,F=-c.height/2,y(this.createTextDirect(o,"\u0433",C,new te(k-J,F,0),Oi.Middle),L),y(this.createTextDirect(o,"\u0433",C,new te(k+J+G,F,0),Oi.Middle),L),F=.3*-(T-C/2),y(this.createTextDirect(o,"\u043a",C,new te(k-J,F,0),Oi.Middle),U),y(this.createTextDirect(o,"\u0442",C,new te(k+J+G,F,0),Oi.Middle),z),k=-G/2*.5,F=-c.height/2-2.5*K,y(this.createTextDirect(o,"\u0433",C,new te(k,F,0),Oi.Middle),W),k=G/2*.5,y(this.createTextDirect(o,"\u0430",C,new te(k,F,0),Oi.Middle),W);let ce=x/2-(N+I*Math.tan(D)/2+c.delta/Math.cos(D)/2),oe=x/2-(c.height+N+I*Math.tan(D)/2+c.delta/Math.cos(D)/2)/2;k=-G/2*.5,F=ce-C/2,y(this.createTextDirect(o,"\u043c",C,new te(k,F,0),Oi.Middle),H),k=G/2*.5,y(this.createTextDirect(o,"\u043b",C,new te(k,F,0),Oi.Middle),H),k=-G/2*.5,F=oe-C/2,y(this.createTextDirect(o,"\u0440",C,new te(k,F,0),Oi.Middle),j),k=G/2*.5,y(this.createTextDirect(o,"\u0431",C,new te(k,F,0),Oi.Middle),j)}createLeftArrow(a,o,c,u){return this.extrudePath([[o.x,o.y],[o.x,o.y-u],[o.x+a*c,o.y-u/2],[o.x,o.y]],0,0,0)}createRect(a,o,c,u){return this.extrudePath([[o.x,o.y],[o.x,o.y-u],[o.x+a*c,o.y-u],[o.x+a*c,o.y],[o.x,o.y]],0,0,0)}}class NJe{constructor(a,o={}){this.enabled=!0;const c=void 0!==o.defaultThickness?o.defaultThickness:.003,u=(new rn).fromArray(void 0!==o.defaultColor?o.defaultColor:[0,0,0]),d=void 0!==o.defaultKeepAlive&&o.defaultKeepAlive,f={},g={},m={},v={outlineThickness:{value:c},outlineColor:{value:u},outlineAlpha:{value:void 0!==o.defaultAlpha?o.defaultAlpha:1}},_=["#include <common>","#include <uv_pars_vertex>","#include <displacementmap_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 normal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + normal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}","void main() {","\t#include <uv_vertex>","\t#include <beginnormal_vertex>","\t#include <morphnormal_vertex>","\t#include <skinbase_vertex>","\t#include <skinnormal_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <displacementmap_vertex>","\t#include <project_vertex>","\tvec3 outlineNormal = - objectNormal;","\tgl_Position = calculateOutline( gl_Position, outlineNormal, vec4( transformed, 1.0 ) );","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\t#include <fog_vertex>","}"].join("\n"),y=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\t#include <clipping_planes_fragment>","\t#include <logdepthbuf_fragment>","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","\t#include <premultiplied_alpha_fragment>","}"].join("\n");function C(k){const F=function x(k){let F=f[k.uuid];return void 0===F&&(F={material:new Ko({type:"OutlineEffect",uniforms:AM.merge([nn.fog,nn.displacementmap,v]),vertexShader:_,fragmentShader:y,side:1}),used:!0,keepAlive:d,count:0},f[k.uuid]=F),F.used=!0,F.material}(k);return g[F.uuid]=k,function I(k,F){if("invisible"===k.name)return;const B=F.userData.outlineParameters;k.fog=F.fog,k.toneMapped=F.toneMapped,k.premultipliedAlpha=F.premultipliedAlpha,k.displacementMap=F.displacementMap,void 0!==B?(k.visible=!1!==F.visible&&(void 0===B.visible||B.visible),k.transparent=void 0!==B.alpha&&B.alpha<1||F.transparent,void 0!==B.keepAlive&&(f[F.uuid].keepAlive=B.keepAlive)):(k.transparent=F.transparent,k.visible=F.visible),(!0===F.wireframe||!1===F.depthTest)&&(k.visible=!1),F.clippingPlanes&&(k.clipping=!0,k.clippingPlanes=F.clippingPlanes,k.clipIntersection=F.clipIntersection,k.clipShadows=F.clipShadows),k.version=F.version}(F,k),F}function w(k){const F=k.geometry;let B=!1;return void 0!==k.geometry&&(B=!F.isBufferGeometry||void 0!==F.attributes.normal),!0===k.isMesh&&void 0!==k.material&&!0===B}function S(k){if(!1!==w(k)){if(Array.isArray(k.material))for(let F=0,B=k.material.length;F<B;F++)k.material[F]=C(k.material[F]);else k.material=C(k.material);m[k.uuid]=k.onBeforeRender,k.onBeforeRender=T}}function D(k){if(!1!==w(k)){if(Array.isArray(k.material))for(let F=0,B=k.material.length;F<B;F++)k.material[F]=g[k.material[F].uuid];else k.material=g[k.material.uuid];k.onBeforeRender=m[k.uuid]}}function T(k,F,B,V,$){const q=g[$.uuid];void 0!==q&&function A(k,F){const B=F.userData.outlineParameters;k.uniforms.outlineAlpha.value=F.opacity,void 0!==B&&(void 0!==B.thickness&&(k.uniforms.outlineThickness.value=B.thickness),void 0!==B.color&&k.uniforms.outlineColor.value.fromArray(B.color),void 0!==B.alpha&&(k.uniforms.outlineAlpha.value=B.alpha)),F.displacementMap&&(k.uniforms.displacementMap.value=F.displacementMap,k.uniforms.displacementScale.value=F.displacementScale,k.uniforms.displacementBias.value=F.displacementBias)}($,q)}this.render=function(k,F){let B,V=!1;if(void 0!==arguments[2]&&(console.warn("THREE.OutlineEffect.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),B=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.OutlineEffect.render(): the forceClear argument has been removed. Use .clear() instead."),V=arguments[3]),void 0!==B&&a.setRenderTarget(B),V&&a.clear(),!1===this.enabled)return void a.render(k,F);const $=a.autoClear;a.autoClear=this.autoClear,a.render(k,F),a.autoClear=$,this.renderOutline(k,F)},this.renderOutline=function(k,F){const B=a.autoClear,V=k.autoUpdate,$=k.background,q=a.shadowMap.enabled;k.autoUpdate=!1,k.background=null,a.autoClear=!1,a.shadowMap.enabled=!1,k.traverse(S),a.render(k,F),k.traverse(D),function N(){let k;k=Object.keys(g);for(let F=0,B=k.length;F<B;F++)g[k[F]]=void 0;k=Object.keys(m);for(let F=0,B=k.length;F<B;F++)m[k[F]]=void 0;k=Object.keys(f);for(let F=0,B=k.length;F<B;F++){const V=k[F];!1===f[V].used?(f[V].count++,!1===f[V].keepAlive&&f[V].count>60&&delete f[V]):(f[V].used=!1,f[V].count=0)}}(),k.autoUpdate=V,k.background=$,a.autoClear=B,a.shadowMap.enabled=q},this.autoClear=a.autoClear,this.domElement=a.domElement,this.shadowMap=a.shadowMap,this.clear=function(k,F,B){a.clear(k,F,B)},this.getPixelRatio=function(){return a.getPixelRatio()},this.setPixelRatio=function(k){a.setPixelRatio(k)},this.getSize=function(k){return a.getSize(k)},this.setSize=function(k,F,B){a.setSize(k,F,B)},this.setViewport=function(k,F,B,V){a.setViewport(k,F,B,V)},this.setScissor=function(k,F,B,V){a.setScissor(k,F,B,V)},this.setScissorTest=function(k){a.setScissorTest(k)},this.setRenderTarget=function(k){a.setRenderTarget(k)}}}class LE{constructor(a,o){this.names=a,this.selected=o}static builder(){return new LE([],"")}setNames(a){return this.names=a,this}setSelected(a){return this.selected=a,this}}class H8{constructor(a,o,c="",u=1,h=0,d=0){this.meshText=a,this.mesh=o,this.infoText=c,this.d=u,this.x=h,this.y=d}static builder(){return new H8(null,null)}setMeshText(a){return this.meshText=a,this}setMesh(a){return this.mesh=a,this}setInfoText(a){return this.infoText=a,this}setD(a){return this.d=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}}class BE{constructor(a,o,c,u){this.mesh=a,this.meshVisible=o,this.action=c,this.update=u}static builder(){return new BE(null,null,()=>{},()=>{})}setMesh(a){return this.mesh=a,this}setMeshVisible(a){return this.meshVisible=a,this}setAction(a){return this.action=a,this}setUpdate(a){return this.update=a,this}runAction(){return this.action(this),this}runUpdate(){return this.update(this),this}}let LJe=(()=>{class l extends YC{constructor(){super(...arguments),this.modelGenerator=new RJe,this.renderer=null,this.camera=null,this.scene=null,this.light=null,this.logoMeshes=[],this.crossMeshes=[],this.cube=null,this.group=null,this.font=null,this.infoDelayed=[],this.frameId=null,this.config=null,this.raycaster=null,this.id2Mesh=new Map,this.infoObject=null,this.infoStartTime=0,this.infoAlphaTime=0,this.infoAlpha=0,this.infoAlphaIncrement=.001,this.infoAlphaFadeOutTime=5e3,this.effect=null,this.toonMaterial=null,this.particleLight=null,this.menuTextScaleTime=0,this.menuTextScale=1,this.menuTextScaleSpeed=.001,this.menuTextMesh=null,this.menuTextMeshes=[],this.menuTextMeshesUnderline=[],this.meshActions=[]}dispose(){null!=this.frameId&&cancelAnimationFrame(this.frameId),null!=this.renderer&&(this.renderer.dispose(),this.renderer=null)}getFovInRadians(o,c){let d=15/o;return d<22&&(d=22),2*Math.atan2(d/2,c)}init(o){this.renderer=o,this.recreate()}recreate(){if(!this.renderer)return;this.menuTextMesh=null,this.menuTextMeshes=[],this.menuTextMeshesUnderline=[];let o=this.canvasWidth,c=this.canvasHeight;this.renderer.setSize(o,c),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=is,this.scene=new PC;let h=this.getFovInRadians(o/c,15);this.camera=new Ws(h/Math.PI*180,o/c,.1,1e3),this.camera.position.z=15,this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.light=new fE(16777215),this.light.position.z=10,this.scene.add(this.light),this.particleLight=new Wi(new E_(1,8,8),new Es({color:16746632})),new dse(16777215,2,50);const f=this.renderer.capabilities.isWebGL2?1028:1024,v=(new rn).setHSL(34/255,23/255,240/255),y=new Uint8Array(4);for(let x=0;x<=y.length;x++)y[x]=x/y.length*256;const b=new S_(y,y.length,1,f);b.needsUpdate=!0,this.toonMaterial=new nse({color:v,gradientMap:b}),this.effect=new NJe(this.renderer,{defaultThickness:.005}),this.createCrossMeshes().forEach((x,C)=>{0==C&&(this.cube=x),this.scene.add(x),this.crossMeshes.push(x)}),this.getLogoText()&&this.scene.remove(...this.crossMeshes),this.createMenuMeshes().forEach((x,C)=>{this.scene.add(x)}),this.group=new __,this.group.position.y=0,this.scene.add(this.group),this.font=this.appParamProvider(l.font3dParamName).font,this.font?this.onFontLoaded():(new AJe).load("./fonts/PonomarUnicode.ttf",C=>{this.appParamProvider(l.font3dParamName).font=this.font=new bae(C),this.onFontLoaded()}),this.raycaster=new zYe}onFontLoaded(){!this.font||this.config&&(this.modelGenerator.createText((o,c,u="",h=1,d=0,f=0)=>this.pushInfo(o,c,u,h,d,f),this.font,this.config,0,0,0,0,1,1-.8,.27,.6,Math.PI/8),this.createMenuText(),this.runPushInfoDelayed(),this.calculateMenuArrows(),this.recreateLogoText())}onMouseMove(o){}onMouseClick(o){this.onMouseClickDIrect(o)}onMouseClickDIrect(o){if(!this.raycaster)return;const c=new ht(this.incrementX(o.clientX)/this.canvasWidth*2-1,-this.incrementY(o.clientY)/this.canvasHeight*2+1);this.raycaster.setFromCamera(c,this.camera);let u=[];this.id2Mesh.forEach((m,v,_)=>{u.push(m)});let h=this.scene.children.filter(m=>this.id2Mesh.has(m.uuid));const d=this.raycaster.intersectObjects(h,!1);let f="",p=!1;if(d.length>0){let m=d[0].object;p="\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"==m.userData.text,f=m.uuid}let g=this.meshActions.find(m=>{var v;return(null===(v=m.mesh)||void 0===v?void 0:v.uuid)==f});if(p)this.runMenuItemAction();else if(g)g.runAction();else if(f){let m=d[0].object;m.material.wireframe=!m.material.wireframe,m.material.opacity=this.infoAlpha=0;const v=new Date;this.infoStartTime=this.infoAlphaTime=v.getTime(),this.id2Mesh.forEach((_,y,b)=>{_.visible=!1}),this.id2Mesh.forEach((_,y,b)=>{y==f&&(_.visible=!0,this.infoObject=_)})}}onResize(){const o=this.canvasWidth,c=this.canvasHeight;this.camera.aspect=o/c,this.camera.updateProjectionMatrix(),this.renderer.setSize(o,c)}render(){if(this.frameId=requestAnimationFrame(()=>{this.render()}),this.camera&&(this.camera.fov=180/Math.PI*this.getFovInRadians(this.canvasWidth/this.canvasHeight,this.camera.position.z)),this.group&&this.cube&&(this.group.rotation.y=this.cube.rotation.y),this.infoObject){let u=this.infoObject;const h=new Date;let d=this.infoAlphaTime?h.getTime()-this.infoAlphaTime:0;this.infoAlphaTime=h.getTime(),this.infoAlpha+=d*this.infoAlphaIncrement*(this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime?-1:1),this.infoAlpha<0&&(this.infoAlpha=0),this.infoAlpha>1&&(this.infoAlpha=1),u.material.opacity=this.infoAlpha,this.infoAlphaTime-this.infoStartTime>this.infoAlphaFadeOutTime&&0==this.infoAlpha&&(this.infoObject.visible=!1,this.infoObject=null)}this.calculateMenuTextScale();const o=25e-5*Date.now();this.particleLight.position.x=13*Math.sin(7*o)/2,this.particleLight.position.y=14*Math.cos(5*o)/2,this.particleLight.position.z=13*Math.cos(3*o)/2,this.effect?this.effect.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera)}getMenuItems(){let o=this.getParam("\u043f\u0443\u043d\u043a\u0442\u044b");return null==o&&(o=LE.builder().setNames(["\u041f\u043e\u043c\u044f\u043d\u043d\u0438\u043a","\u041a\u043d\u0438\u0433\u0438","\u041f\u0440\u0438\u043c\u0435\u0440\u044b 3D"]).setSelected("")),o}getLogoText(){var o;let c=null===(o=this.menuTextMesh)||void 0===o?void 0:o.userData.text;if(!c){let u=this.getMenuItems();c=u.selected,!c&&u.names.length>0&&(c=u.names[0])}return this.appLogoTextProvider(c||"")}recreateLogoText(){var o,c,u;null===(o=this.scene)||void 0===o||o.remove(...this.logoMeshes),this.logoMeshes=[],this.getLogoText()?(this.getLogoText()&&(null===(u=this.scene)||void 0===u||u.remove(...this.crossMeshes)),this.createLogoText()):null===(c=this.scene)||void 0===c||c.add(...this.crossMeshes)}createLogoText(){let c=this.getLogoText().split("|"),h=10/3,d=this.addLogoText(c[0],0,h);this.addLogoText(c[1],0,h-1.5*d),((m,v,_=!0)=>{var y;const b=this.toonMaterial?this.toonMaterial:new Es({color:16777215});let x=new Wi(m,b);m.computeBoundingBox(),null===(y=this.scene)||void 0===y||y.add(x),this.logoMeshes.push(x),x.visible=_,x.userData={material:b,text:v}})(this.modelGenerator.createRect(1,new te(-5,h-d+.25,0),10,.5),"\u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043b\u0438\u043d\u0438\u044f",!0)}createMenuText(){let o=this.getMenuItems();o.names.forEach((c,u,h)=>this.addMenuText(c,c==o.selected||!!o.selected&&!this.menuTextMesh&&u+1==h.length||!o.selected&&0==u))}addLogoText(o,c,u){var h;let f=2.5,p=this.modelGenerator.createTextDirect(this.font,o,f,new te(c,u-f/2,0),Oi.Middle);if(p.geometry.boundingBox){let g=p.geometry.boundingBox.max.x-p.geometry.boundingBox.min.x;if(g>10){let m=10/g;p.scale.set(m,m,m),f*=m,p.position.set(c-g*m/2,u-f/2,0)}}return null===(h=this.scene)||void 0===h||h.add(p),this.logoMeshes.push(p),p.visible=!0,p.userData={text:o},f}addMenuText(o,c){var u;let S=this.modelGenerator.createTextDirect(this.font,o,2.4,new te(0,-10.066666666666666,0),Oi.Middle);null===(u=this.scene)||void 0===u||u.add(S),this.menuTextMeshes.push(S),S.visible=!1,S.userData={text:o},!this.menuTextMesh&&c&&(this.menuTextMesh=S,this.menuTextMesh.visible=!0)}calculateMenuTextScale(){if(!this.menuTextMesh)return;let m=.26666666666666666,y=(new Date).getTime(),b=this.menuTextScaleTime?y-this.menuTextScaleTime:0;if(this.menuTextScaleTime=y,this.menuTextMesh.geometry.boundingBox){let x=this.menuTextMesh.geometry.boundingBox.max.x-this.menuTextMesh.geometry.boundingBox.min.x;if(x>10-2*m){let C=(10-2*m)/x,w=C-this.menuTextScale,S=b*this.menuTextScaleSpeed*(w<0?-1:1);Math.abs(w)<Math.abs(S)?this.menuTextScale=C:this.menuTextScale+=S}else{let w=2.4/(this.menuTextMesh.geometry.boundingBox.max.y-this.menuTextMesh.geometry.boundingBox.min.y),S=w-this.menuTextScale,D=b*this.menuTextScaleSpeed*(S<0?-1:1);Math.abs(S)<Math.abs(D)?this.menuTextScale=w:this.menuTextScale+=D}this.menuTextMesh.position.x=(-x/2-this.menuTextMesh.geometry.boundingBox.min.x)*this.menuTextScale,this.menuTextMesh.position.y=-9.666666666666666}this.menuTextMesh.scale.set(this.menuTextScale,this.menuTextScale,this.menuTextScale)}createMenuMeshes(){let c=10/15,p=0,g=-5-4*c,m=2*c,v=4*c,_=[];const b=new Es({color:16777215,wireframe:!0});let x=(S,D,T=!0)=>{const A=this.toonMaterial?this.toonMaterial:new Es({color:16777215});let I=new Wi(S,A);return S.computeBoundingBox(),_.push(I),I.visible=T,I.userData={material:A,materialWireframe:b,text:D},this.pushInfoDelayed(I,null,D,c,0,7.666666666666666),I};p=-5,x(this.modelGenerator.createRect(1,new te(p,g,0),10,v),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e",!1);let C=v/10,w=v/10;return this.getMenuItems().names.forEach((S,D,T)=>{let I=(10-C)/T.length;this.menuTextMeshesUnderline.push(x(this.modelGenerator.createRect(1,new te(p+I*D+C,g-v+w,0),I-C,w),"\u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e"))}),x(this.modelGenerator.createLeftArrow(-1,new te(p,g,0),m,v),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"),p=5,x(this.modelGenerator.createLeftArrow(1,new te(p,g,0),m,v),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"),_}createCrossMeshes(){let c=10/15,u=this.modelGenerator.createConfig().setWidth(10).setHeight(10).setDelta(c);this.config=u;let p=5+4*c;new Es({color:0,wireframe:!0,transparent:!0});let v=this.modelGenerator.createCrossParts(u,0,0,0,0,1,1-.8,.27,.6,Math.PI/8).map(y=>{const b=new wi;b.setAttribute("position",new rs(new Float32Array(y.vertexes.toPlainArray()),3)),b.setAttribute("normal",new rs(new Float32Array(y.vertexes.toPlainArray(wd.Normals)),3)),b.setAttribute("uv",new rs(new Float32Array(y.vertexes.toPlainArray(wd.UV)),2)),b.computeBoundingBox();const x=this.toonMaterial?this.toonMaterial:new Es({color:16777215}),C=new Wi(b,x);return this.pushInfoDelayed(C,null,y.name,c,0,p),C}),_=(y,b)=>{const x=this.toonMaterial?this.toonMaterial:new Es({color:16777215});let C=new Wi(y,x);y.computeBoundingBox(),v.push(C),this.pushInfoDelayed(C,null,b,c,0,p)};return _(this.modelGenerator.createTrost(u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),_(this.modelGenerator.createTri1(1,u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),_(this.modelGenerator.createTri2(1,u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),_(this.modelGenerator.createKopie(u,-1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),_(this.modelGenerator.createTri1(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),_(this.modelGenerator.createTri2(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),_(this.modelGenerator.createTrostNakonechnik(1,u,1,1-.8,.27,.6,Math.PI/8),"\u0442\u0440\u043e\u0441\u0442\u044c"),_(this.modelGenerator.createKopieNakonechnik(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u043a\u043e\u043f\u0438\u0435"),_(this.modelGenerator.createSkull(-1,u,1,1-.8,.27,.6,Math.PI/8),"\u0433\u043b\u0430\u0432\u0430 \u0410\u0434\u0430\u043c\u0430"),v}pushInfoDelayed(o,c,u="",h=1,d=0,f=0){this.infoDelayed.push(H8.builder().setMeshText(o).setMesh(c).setInfoText(u).setD(h).setX(d).setY(f))}runPushInfoDelayed(){this.infoDelayed.forEach(o=>{o.meshText&&this.pushInfo(o.meshText,o.mesh,o.infoText,o.d,o.x,o.y)}),this.infoDelayed=[]}pushInfo(o,c,u="",h=1,d=0,f=0){var p,g,m;if(u&&(c=this.modelGenerator.createTextDirect(this.font,u,h,new te(d,f,0),Oi.Middle)),!c)return;u||(null===(p=this.scene)||void 0===p||p.add(o),this.crossMeshes.push(o)),c.visible=!1,null===(g=this.scene)||void 0===g||g.add(c),this.crossMeshes.push(c);let v=o.geometry.boundingBox,_=P_.builder();_.addPlaneXY(new te(v.min.x,v.max.y,v.min.z),v.max.x-v.min.x,v.max.y-v.min.y);let y=new wi;y.setAttribute("position",new rs(new Float32Array(_.toPlainArray()),3));const b=new Es({color:16777215,wireframe:!1});let x=new Wi(y,b);null===(m=this.scene)||void 0===m||m.add(x),x.position.add(o.position),x.visible=!1,x.userData={text:u},this.id2Mesh.set(x.uuid,c),"\u043c\u0435\u043d\u044e \u0432\u043b\u0435\u0432\u043e"==u&&this.meshActions.push(BE.builder().setMesh(x).setMeshVisible(o).setAction(()=>this.onPrevMenu()).setUpdate(w=>{if(this.menuTextMesh){let S=this.menuTextMeshes.indexOf(this.menuTextMesh);w.meshVisible&&(w.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(0==S,w.meshVisible))}})),"\u043c\u0435\u043d\u044e \u0432\u043f\u0440\u0430\u0432\u043e"==u&&this.meshActions.push(BE.builder().setMesh(x).setMeshVisible(o).setAction(()=>this.onNextMenu()).setUpdate(w=>{if(this.menuTextMesh){let S=this.menuTextMeshes.indexOf(this.menuTextMesh);w.meshVisible&&(w.meshVisible.visible=this.menuTextMeshes.length>1,this.setMeshMaterial(S+1==this.menuTextMeshes.length,w.meshVisible))}}))}setMeshMaterial(o,c){o?c.material=c.userData.materialWireframe:c&&(c.material=c.userData.material)}calculateMenuArrows(){let o=this.menuTextMeshes.indexOf(this.menuTextMesh);this.menuTextMeshesUnderline.forEach((c,u)=>{this.setMeshMaterial(u!=o,c)}),this.meshActions.forEach(c=>c.runUpdate())}onPrevMenu(){let o=this.menuTextMeshes.indexOf(this.menuTextMesh);o>0&&(--o,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[o],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}onNextMenu(){let o=this.menuTextMeshes.indexOf(this.menuTextMesh);o+1<this.menuTextMeshes.length&&(++o,this.menuTextMesh&&(this.menuTextMesh.visible=!1),this.menuTextMesh=this.menuTextMeshes[o],this.menuTextMesh.visible=!0,this.calculateMenuArrows(),this.recreateLogoText())}runMenuItemAction(){var o;let c=null===(o=this.menuTextMesh)||void 0===o?void 0:o.userData.text;this.runAction(c)}}return l.font3dParamName="font3d",l})(),W8=(()=>{class l{constructor(o,c,u){this.uiConfig=o,this.config=c,this.router=u}onLoginCommand(o){let c=o;this.config.setShowNormal(),this.config.defaultApplication=c.id,this.uiConfig.ui.lastLoginApp.setStringValue(c.id);let u=pageRequestedRoute||this.uiConfig.ui.defaultAppRoute.getStringValue();pageRequestedRoute="",c.routes.find(h=>h.link==u)||(u=c.routes[0].link),this.uiConfig.ui.defaultAppRoute.setStringValue(u),this.router.navigate([u])}autoLogin(){let o=pageRequestedApp||this.uiConfig.ui.lastLoginApp.getStringValue(),c=this.config.environment.applications.filter(h=>h.applicationEnabled);if(!o&&1!=c.length)return;let u=null;c.forEach((h,d,f)=>{h.id==o&&(u=h)}),null==u&&1==c.length&&c.forEach((h,d,f)=>{u=h}),pageRequestedApp="",null!=u&&this.onLoginCommand(u)}}return l.\u0275fac=function(o){return new(o||l)(Ie(Gn),Ie(on),Ie(fs))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const BJe=["myCanvas"];function VJe(l,a){if(1&l){const o=gt();M(0,"button",6),ee("click",function(){return Le(o),X(2).routeToV1()}),ie(1,"v1"),E()}}function zJe(l,a){if(1&l){const o=gt();M(0,"div",4),Z(1,VJe,2,0,"button",5),M(2,"button",6),ee("click",function(){return Le(o),X().routeToLogo()}),ie(3,"2D"),E(),E()}if(2&l){const o=X();P(1),O("ngIf",o.config.showOldVersions)}}class G8 extends YC{constructor(a,o,c){super(),this.scene=a,this.initialized=o,this.name=c}static builder(){return new G8(null,!1,"")}setScene(a){return this.scene=a,this}setInitialized(a){return this.initialized=a,this}setName(a){return this.name=a,this}get canvasWidth(){return this.scene?this.scene.canvasWidth:this.iCanvasWidth}get canvasHeight(){return this.scene?this.scene.canvasHeight:this.iCanvasHeight}get canvasPercentage(){return this.scene?this.scene.canvasPercentage:this.iPercentage}setWidthPixelIncrement(a){var o;return null===(o=this.scene)||void 0===o||o.setWidthPixelIncrement(a),super.setWidthPixelIncrement(a)}setHeightPixelIncrement(a){var o;return null===(o=this.scene)||void 0===o||o.setHeightPixelIncrement(a),super.setHeightPixelIncrement(a)}setXPixelIncrement(a){var o;return null===(o=this.scene)||void 0===o||o.setXPixelIncrement(a),super.setXPixelIncrement(a)}setYPixelIncrement(a){var o;return null===(o=this.scene)||void 0===o||o.setYPixelIncrement(a),super.setYPixelIncrement(a)}setCanvasWidth(a){var o;return null===(o=this.scene)||void 0===o||o.setCanvasWidth(a),super.setCanvasWidth(a)}setCanvasHeight(a){var o;return null===(o=this.scene)||void 0===o||o.setCanvasHeight(a),super.setCanvasHeight(a)}setPercentage(a){var o;return null===(o=this.scene)||void 0===o||o.setPercentage(a),super.setPercentage(a)}setLight(a){var o;return null===(o=this.scene)||void 0===o||o.setLight(a),super.setLight(a)}setActionHandler(a){var o;return null===(o=this.scene)||void 0===o||o.setActionHandler(a),super.setActionHandler(a)}setParam(a,o){var c;return null===(c=this.scene)||void 0===c||c.setParam(a,o),super.setParam(a,o)}setAppLogoTextProvider(a){var o;return null===(o=this.scene)||void 0===o||o.setAppLogoTextProvider(a),super.setAppLogoTextProvider(a)}setAppParamProvider(a){var o;return null===(o=this.scene)||void 0===o||o.setAppParamProvider(a),super.setAppParamProvider(a)}dispose(){var a;this.initialized&&(null===(a=this.scene)||void 0===a||a.dispose(),this.initialized=!1)}init(a){var o;null===(o=this.scene)||void 0===o||o.init(a),this.initialized=!0}onMouseMove(a){var o;this.initialized&&(null===(o=this.scene)||void 0===o||o.onMouseMove(a))}onMouseClick(a){var o;this.initialized&&(null===(o=this.scene)||void 0===o||o.onMouseClick(a))}onResize(){var a;this.initialized&&(null===(a=this.scene)||void 0===a||a.onResize())}render(){var a;null===(a=this.scene)||void 0===a||a.render()}}let Cae=(()=>{class l{constructor(o,c,u,h,d){this.uiConfig=o,this.config=c,this.renderer2=u,this.themesSvc=h,this.autoLoginSvc=d,this.canvas=null,this.renderer=null,this.fullScreen=!1,this.allScenes=[],this.sceneIndex=-1,this.requestedSceneName="\u041a\u0440\u0435\u0441\u0442",this.iRequestedCanvasWidth=90,this.iRequestedCanvasHeight=100,this.iRequestedPercentage=!0,this.enabled=!0,this.sName="",this.scenes="\u041a\u0440\u0435\u0441\u0442"}set scenes(o){let c=o.split(",");0==c.length&&(c=["\u041a\u0440\u0435\u0441\u0442"]),this.allScenes=[],c.forEach(u=>{let h=G8.builder().setName(u);switch(u){default:case"\u041a\u0443\u0431":h.setScene(new KYe);break;case"\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d":h.setScene(new QYe);break;case"\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435":h.setScene(new sXe);break;case"\u041a\u0440\u0435\u0441\u0442":h.setScene(new LJe)}this.allScenes.push(h)})}get scene(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?null:this.allScenes[this.sceneIndex]}get sceneName(){return this.sceneIndex<0||this.sceneIndex>=this.allScenes.length?this.requestedSceneName:this.allScenes[this.sceneIndex].name}set sceneName(o){this.renderer?this.selectSceneByName(o):this.requestedSceneName=o}get requestedCanvasWidth(){return this.iRequestedCanvasWidth}set requestedCanvasWidth(o){this.iRequestedCanvasWidth=o;let c=this.scene;c&&c.dispose()}get requestedCanvasHeight(){return this.iRequestedCanvasHeight}set requestedCanvasHeight(o){this.iRequestedCanvasHeight=o;let c=this.scene;c&&c.dispose()}get requestedPercentage(){return this.iRequestedPercentage}set requestedPercentage(o){this.iRequestedPercentage=o;let c=this.scene;c&&c.dispose()}selectScene(o){var c;o>=0&&o<this.allScenes.length&&o!=this.sceneIndex&&(null===(c=this.scene)||void 0===c||c.dispose(),this.sceneIndex=o,this.config.post(()=>{this.render()}))}selectSceneByName(o){let c=this.allScenes.findIndex(u=>u.name==o);this.selectScene(c)}set name(o){this.sName=o}get name(){return this.sName}onResize(){var o;null===(o=this.scene)||void 0===o||o.onResize()}onMouseMove(o){var c;null===(c=this.scene)||void 0===c||c.onMouseMove(o)}onMouseClick(o){var c;o.ctrlKey?this.selectScene((this.sceneIndex+1)%this.allScenes.length):null===(c=this.scene)||void 0===c||c.onMouseClick(o)}ngOnInit(){this.fullScreen&&this.addOverflowClass(),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.fullScreen&&this.autoLoginSvc.autoLogin()})}ngOnDestroy(){var o;this.fullScreen&&this.removeOverflowClass(),null===(o=this.scene)||void 0===o||o.dispose(),this.canvas=null}addOverflowClass(){this.renderer2.addClass(document.body,"overflowHidden")}removeOverflowClass(){this.renderer2.removeClass(document.body,"overflowHidden")}routeToV1(){window.location.href="./v1"}routeToLogo(){this.config.requestLogin3d(!1),this.config.setShowLogin(!1)}ngAfterViewInit(){this.canvas=this.myCanvasRef.nativeElement,this.canvas&&(this.renderer=new mre({canvas:this.canvas,alpha:!0,antialias:!0}),this.config.post(()=>{this.selectSceneByName(this.requestedSceneName)}))}render(){var o,c,u,h;!(null===(o=this.scene)||void 0===o?void 0:o.initialized)&&this.renderer&&(!this.fullScreen&&this.canvas&&(null===(c=this.scene)||void 0===c||c.setCanvasWidth(this.requestedCanvasWidth).setCanvasHeight(this.requestedCanvasHeight).setPercentage(this.requestedPercentage).setHeightPixelIncrement(-60).setYPixelIncrement(-60)),null===(u=this.scene)||void 0===u||u.setLight(this.themesSvc.nowIsDay()).setParam("\u043f\u0443\u043d\u043a\u0442\u044b",this.getMenuItems()).setActionHandler(d=>this.runMenuItemClick(d)).setAppLogoTextProvider(d=>{let f=this.config.getApplicationByNameOrNull(d);return f||(f=this.config.getSingleAppOrNull()),f||(f=this.config.getApplication()),f?f.applicationLogoText:""}).setAppParamProvider(d=>this.uiConfig.getAppParam(d)).init(this.renderer)),null===(h=this.scene)||void 0===h||h.render()}getMenuItems(){let o=this.config.environment.applications.filter(h=>h.applicationEnabled&&!h.applicationHidden).map(h=>h.name),c=this.uiConfig.ui.lastLoginApp.getStringValue(),u=this.config.environment.applications.find(h=>h.id==c);return LE.builder().setNames(o).setSelected(u?u.name:"")}runMenuItemClick(o){let c=this.config.environment.applications.find(u=>u.name==o);c?this.autoLoginSvc.onLoginCommand(c):console.log(`\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435: "${o}".`)}getLogoText(){let o=this.config.getSingleAppOrNull();return null==o&&(o=this.config.getApplication()),o?o.applicationLogoText:""}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(on),R(di),R(Ls),R(W8))},l.\u0275cmp=Ye({type:l,selectors:[["app-three-logo"]],viewQuery:function(o,c){if(1&o&&ti(BJe,5),2&o){let u;Vt(u=zt())&&(c.myCanvasRef=u.first)}},hostBindings:function(o,c){1&o&&ee("resize",function(h){return c.onResize(h.target)},!1,jx)("mousemove",function(h){return c.onMouseMove(h)},!1,jx)("click",function(h){return c.onMouseClick(h)},!1,jx)},inputs:{fullScreen:"fullScreen",scenes:"scenes",requestedSceneName:"requestedSceneName",sceneName:"sceneName",requestedCanvasWidth:"requestedCanvasWidth",requestedCanvasHeight:"requestedCanvasHeight",requestedPercentage:"requestedPercentage",enabled:"enabled",name:"name"},decls:4,vars:1,consts:[["class","flyout",4,"ngIf"],[1,"container","bgColor","fade-in-3"],[1,"centeredCanvas"],["myCanvas",""],[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"]],template:function(o,c){1&o&&(Z(0,zJe,4,1,"div",0),M(1,"div",1),me(2,"canvas",2,3),E()),2&o&&O("ngIf",c.fullScreen)},directives:[mn],styles:[".centeredCanvas[_ngcontent-%COMP%]{padding:0;margin:auto;display:block;width:90vw}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}.container[_ngcontent-%COMP%]{width:100%}"]}),l})(),UJe=(()=>{class l{constructor(o){this.uiConfig=o,this.scenes="\u041a\u0440\u0435\u0441\u0442,\u041a\u0443\u0431,\u0418\u043a\u043e\u0441\u0430\u0445\u0435\u0434\u0440\u043e\u043d,\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435"}ngOnInit(){this.uiConfig.setAppRoutes(null)}ngAfterViewInit(){}}return l.\u0275fac=function(o){return new(o||l)(R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-d3d-examples"]],decls:2,vars:6,consts:[[3,"fullScreen","sceneName","requestedCanvasWidth","requestedCanvasHeight","requestedPercentage","scenes"]],template:function(o,c){1&o&&(M(0,"div"),me(1,"app-three-logo",0),E()),2&o&&(P(1),O("fullScreen",!1)("sceneName","\u041a\u0440\u0435\u0441\u0442")("requestedCanvasWidth",100)("requestedCanvasHeight",100)("requestedPercentage",!0)("scenes",c.scenes))},directives:[Cae],styles:[""]}),l})();function HJe(l,a){if(1&l){const o=gt();M(0,"button",2),ee("click",function(){return Le(o),X().routeToV1()}),ie(1,"v1"),E()}}let xae=(()=>{class l{constructor(o,c,u,h){this.router=o,this.autologinSvc=c,this.config=u,this.uiConfig=h,this.logoData=El.builder()}ngOnInit(){let o=this.config.getSingleAppOrNull();null==o&&(o=this.config.getApplication());let c=o?o.applicationLogoText:"";this.logoData=El.builder().setLogoText(c).setGenName(c?"NoLogo":"Logo").setScene(c?"/scenes/name.logo.scene.txt":"/scenes/cross.scene.txt"),this.uiConfig.check(()=>{this.config.autoLoginApplication&&this.autologinSvc.autoLogin()})}navigateTo(o,c){this.uiConfig.ui.defaultAppRoute.setStringValue(c),this.router.navigate([c])}isActive(o){return this.router.isActive(o,!1)}onLoginCommand(o){this.autologinSvc.onLoginCommand(o)}onPreviewCommand(o){let u=o?o.applicationLogoText:"";this.logoData=El.builder().setLogoText(u).setGenName(u?"NoLogo":"Logo").setScene(u?"/scenes/name.logo.scene.txt":"/scenes/cross.scene.txt")}routeToV1(){window.location.href="./v1"}routeTo3D(){this.config.requestLogin3d(!0),this.config.setShowLogin(!1)}}return l.\u0275fac=function(o){return new(o||l)(R(fs),R(W8),R(on),R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-login"]],decls:9,vars:7,consts:[[1,"flyout"],["class","btn btn-link btn-block whiteBtn fade-in-3",3,"click",4,"ngIf"],[1,"btn","btn-link","btn-block","whiteBtn","fade-in-3",3,"click"],[1,"main-container","bgColor","wh100"],[1,"content-container","centeredImage"],[1,"h80",3,"svgWidth","svgHeight","data"],[1,"login-footer"],[3,"svgWidth","svgHeight","genName","onCommand","onPreviewCommand"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,HJe,2,0,"button",1),M(2,"button",2),ee("click",function(){return c.routeTo3D()}),ie(3,"3d"),E(),E(),M(4,"div",3),M(5,"div",4),me(6,"app-svg-js-image",5),E(),M(7,"div",6),M(8,"app-svg-js-image",7),ee("onCommand",function(h){return c.onLoginCommand(h)})("onPreviewCommand",function(h){return c.onPreviewCommand(h)}),E(),E(),E()),2&o&&(P(1),O("ngIf",c.config.showOldVersions),P(5),O("svgWidth",512)("svgHeight",512)("data",c.logoData),P(2),O("svgWidth",512)("svgHeight",128)("genName","Menu"))},directives:[mn,kl],styles:[".login-footer[_ngcontent-%COMP%]{height:20vh;padding-top:0;padding-bottom:5vh;padding-left:0}.centeredImage[_ngcontent-%COMP%]{top:0;bottom:0;left:0;right:0;max-width:100%;max-height:100%;margin:auto;overflow:auto}.wh100[_ngcontent-%COMP%]{width:100vw;height:100vh}.h80[_ngcontent-%COMP%]{height:75vh;width:75vh}flyout-toggle[_ngcontent-%COMP%]{position:absolute;transform:rotate(90deg);top:50%;left:-50px;z-index:998;width:85px;height:35px;font-size:13px;background:#92C7B8;border:solid #fff 1px}.flyout[_ngcontent-%COMP%]{position:fixed;z-index:999;top:0;right:0;width:85px;height:35px;background:none;transition:all .3s ease-in-out}.whiteBtn[_ngcontent-%COMP%]{color:#fff!important}"]}),l})(),WJe=(()=>{class l{constructor(o,c,u,h){this.router=o,this.config=c,this.uiConfig=u,this.themesSvc=h,this.dynMenuData=If.builder().setWhiteBack(!1).setMenuState(wf.builder().addCommand($o.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName("MenuDay")),this.menuLinksOld=null,this.light=!0}ngOnInit(){this.light=this.themesSvc.nowIsDay(),this.dynMenuData=If.builder().setWhiteBack(!1).setMenuState(wf.builder().addCommand($o.builder().setName("\u0414\u0435\u0432\u0438\u0441\u043a\u0438\u043d")).setGenName(this.light?"MenuDay":"MenuNight2")).setOnClick(this.getOnOk()),this.config.post(()=>{this.menuLinksOld=this.uiConfig.setAppRoutes([])},0)}ngOnDestroy(){this.menuLinksOld&&(this.menuLinksOld.unsubscribe(),this.menuLinksOld=null)}get version(){return this.config.environment.version}getOnOk(){return()=>this.onOk()}onOk(){this.config.post(()=>{this.config.setShowLogin(!1)})}}return l.\u0275fac=function(o){return new(o||l)(R(fs),R(on),R(Gn),R(Ls))},l.\u0275cmp=Ye({type:l,selectors:[["app-about"]],decls:4,vars:5,consts:[[1,"ftext","fade-in-3","pad","fullHeight","bgColor"],[3,"genName","svgWidth","svgHeight","type"],[3,"data"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"div"),me(2,"app-svg-js-image",1),me(3,"app-dynamic-menu",2),E(),E()),2&o&&(P(2),O("genName",c.light?"LogoLight":"LogoDark")("svgWidth",512)("svgHeight",512)("type",0),P(1),O("data",c.dynMenuData))},directives:[kl,RD],styles:[".pad[_ngcontent-%COMP%]{padding:1em}.fullHeight[_ngcontent-%COMP%]{height:calc(100vh - 60px)}"]}),l})(),GJe=(()=>{class l{constructor(o){this.router=o,this.logText=["\u041c\u043e\u043b\u0435\u0431\u0435\u043d"].join(", "),this.extraPages=[],this.horizontalPagesCount=2,this.verticalPagesCount=2}ngOnInit(){}onPagesCount(o){this.extraPages=[];let c=this.horizontalPagesCount*this.verticalPagesCount,u=o-c,h=0;for(;u>0;)u=Math.max(0,u-c),h+=c,this.extraPages.push(h)}}return l.\u0275fac=function(o){return new(o||l)(R(fs))},l.\u0275cmp=Ye({type:l,selectors:[["app-main"]],decls:2,vars:9,consts:[[1,"pageBreak"],[3,"svgWidth","svgHeight","scene","genName","logoText","type","startPageIndex","horizontalPagesCount","verticalPagesCount","pagesCount"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"app-svg-js-image",1),ee("pagesCount",function(h){return c.onPagesCount(h)}),E(),E()),2&o&&(P(1),O("svgWidth",210)("svgHeight",297)("scene","/scenes/parser.scene.txt")("genName","Js")("logoText",c.logText)("type",1)("startPageIndex",0)("horizontalPagesCount",c.horizontalPagesCount)("verticalPagesCount",c.verticalPagesCount))},directives:[kl],styles:[".h512[_ngcontent-%COMP%]{width:210px;height:297px;margin:auto}.centeredImage[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto}"]}),l})();function jJe(l,a){if(1&l&&(M(0,"div"),me(1,"app-add-component",2),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}let $Je=(()=>{class l extends Af{constructor(o,c,u){super(o,c,u),this.appBookName="\u043a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 APP_CLC",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=iu.builder(),this.addMenuLink(Hn.builder().setLink("#").setName("\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440").setShape("calculator").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(Hn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCalculatorHelp}getUIBook(){return this.uiConfig.ui.calculatorBook}getUIChapter(){return this.uiConfig.ui.calculatorChapter}getUILine(){return this.uiConfig.ui.calculatorLine}isSettings(){var o;return!(this.components.length<=0)&&(null===(o=this.components[0].data.component)||void 0===o?void 0:o.data)instanceof ru}isComponent(o,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==o&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let o=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();o?this.routeTo(o,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(o){this.config.post(()=>{this.reset(o)})}reset(o){this.routeTo(this.appBookName,o,1)}routeToHelpDelayed(o){this.config.post(()=>{this.routeToHelp(o)})}routeToHelp(o){this.isComponent(this.helpBookName,o)&&o===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,o,1)}routeToDelayed(o,c="",u=-1){this.config.post(()=>{this.routeTo(o,c,u)})}routeTo(o,c="",u=-1){let h=o;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(fc,Ya.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(qa.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(o){this.config.post(()=>{this.components=o})}clearErrors(){this.errorsData.setErrors([])}setErrors(o){this.errorsData.setErrors(o).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(Nv,ru.builder().updateClasses(o=>o.setCalculatorSettings(!0)))))])}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-calculator"]],features:[dn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,jJe,2,1,"div",1),E()),2&o&&(P(1),O("ngForOf",c.components))},directives:[fi,Pl],styles:[""]}),l})(),qJe=(()=>{class l{constructor(o,c){this.uiConfig=o,this.config=c,this.generator=new ED,this.solving=!1,this.logText="",this.svgData=El.builder().setScene("/scenes/compiler.page.scene.txt").setGenName("JS").setLogoText("").setSvgWidth(512).setSvgHeight(512).setType(512)}get formulaText(){return this.uiConfig.ui.compilerSourceText.getStringValue()}set formulaText(o){this.uiConfig.ui.compilerSourceText.setStringValue(o),this.onUpdateSourceTextConfig()}get compilerData(){return this.data}get text(){return this.data&&this.data.text?this.data.text:""}get component(){return this.compilerData.components.length?this.compilerData.components[0]:null}get components(){return this.compilerData.components}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.onUpdateSourceTextConfig(),this.requestRun()}requestRun(){this.config.post(()=>{this.onRun()})}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}onRun(){this.solving=!0;let o=new TL,c=Xr.\u043d\u043e\u0432\u044b\u0435().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f(xi.\u043d\u043e\u0432\u044b\u0439().\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0418\u043c\u044f("\u043a\u0430\u0440\u0442\u0430"));o.addMethod(c,"\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c",(u,h)=>{let d=h[0],p=u.\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u041e\u0434\u043d\u0443\u041a\u043e\u043c\u0430\u043d\u0434\u0443\u0418\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c\u041d\u0435\u041d\u0443\u043b\u0435\u0432\u043e\u0439(h[1]);return this.logText&&(this.logText+="\r\n"),this.logText+=p.\u043a\u0430\u043a\u0421\u0442\u0440\u043e\u043a\u0430(),d}),o.run(this.formulaText,null,c),this.solving=!1}onUpdateSourceTextConfig(){}onSelectFormula(o){this.formulaText=o.params.get("\u0442\u0435\u043a\u0441\u0442")}}return l.\u0275fac=function(o){return new(o||l)(R(Gn),R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-compiler-runner"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"ngClass"],[3,"text","textChange"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"app-dynamic-monaco-editor",1),ee("textChange",function(h){return c.logText=h}),E(),E()),2&o&&(O("ngClass",c.getClasses()),P(1),O("text",c.logText))},directives:[Xn,Cne],styles:[".clr-form-control[_ngcontent-%COMP%]{align-items:unset}.clr-input[_ngcontent-%COMP%]{width:100%}.clr-textarea[_ngcontent-%COMP%]{width:100%;height:3rem}"]}),l})();class j8{constructor(){}static builder(){return new j8}}class VE extends Pi{constructor(a,o,c,u){super(a,o,c),this.classes=u,this.id="",this.waitingForSenderId="",this.components=[]}static builder(){return new VE("",null,null,j8.builder())}setText(a){return super.setText(a)}setOnClick(a){return super.setOnClick(a)}setTag(a){return super.setTag(a)}update(a){return a(this.classes),this}setId(a){return this.id=a,this}setWaitingForSenderid(a){return this.waitingForSenderId=a,this}setComponents(a){return this.components=a,this}}function YJe(l,a){if(1&l&&(M(0,"div"),me(1,"app-add-component",2),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}let XJe=(()=>{class l extends Af{constructor(o,c,u){super(o,c,u),this.appBookName="\u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 APP_CMP",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=iu.builder(),this.addMenuLink(Hn.builder().setLink("#").setName("\u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440").setShape("bug").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(Hn.builder().setLink("#").setName("\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c").setShape("play").setOnClick(()=>{this.showRunner()}).setIsActive(()=>this.isRunner())).addMenuLink(Hn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCompilerHelp}getUIBook(){return this.uiConfig.ui.compilerBook}getUIChapter(){return this.uiConfig.ui.compilerChapter}getUILine(){return this.uiConfig.ui.compilerLine}isRunner(){var o;return!(this.components.length<=0)&&(null===(o=this.components[0].data.component)||void 0===o?void 0:o.data)instanceof VE}isSettings(){var o;return!(this.components.length<=0)&&(null===(o=this.components[0].data.component)||void 0===o?void 0:o.data)instanceof ru}isComponent(o,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==o&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let o=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();o?this.routeTo(o,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(o){this.config.post(()=>{this.reset(o)})}reset(o){this.routeTo(this.appBookName,o,1)}routeToHelpDelayed(o){this.config.post(()=>{this.routeToHelp(o)})}routeToHelp(o){this.isComponent(this.helpBookName,o)&&o===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,o,1)}routeToDelayed(o,c="",u=-1){this.config.post(()=>{this.routeTo(o,c,u)})}routeTo(o,c="",u=-1){let h=o;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(fc,Ya.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!1).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(qa.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(o){this.config.post(()=>{this.components=o})}clearErrors(){this.errorsData.setErrors([])}setErrors(o){this.errorsData.setErrors(o).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(Nv,ru.builder().updateClasses(o=>o.setCalculatorSettings(!0)))))])}showRunner(){this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(qJe,VE.builder())))])}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-compiler"]],features:[dn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,YJe,2,1,"div",1),E()),2&o&&(P(1),O("ngForOf",c.components))},directives:[fi,Pl],styles:[""]}),l})();function ZJe(l,a){if(1&l&&(M(0,"div"),me(1,"app-add-component",2),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}let KJe=(()=>{class l extends Af{constructor(o,c,u){super(o,c,u),this.appBookName="\u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c APP_CLD",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=iu.builder(),this.addMenuLink(Hn.builder().setLink("#").setName("\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c").setShape("calendar").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(Hn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedCalendarHelp}getUIBook(){return this.uiConfig.ui.calendarBook}getUIChapter(){return this.uiConfig.ui.calendarChapter}getUILine(){return this.uiConfig.ui.calendarLine}isSettings(){var o;return!(this.components.length<=0)&&(null===(o=this.components[0].data.component)||void 0===o?void 0:o.data)instanceof ru}isComponent(o,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==o&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let o=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();o?this.routeTo(o,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(o){this.config.post(()=>{this.reset(o)})}reset(o){this.routeTo(this.appBookName,o,1)}routeToHelpDelayed(o){this.config.post(()=>{this.routeToHelp(o)})}routeToHelp(o){this.isComponent(this.helpBookName,o)&&o===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,o,1)}routeToDelayed(o,c="",u=-1){this.config.post(()=>{this.routeTo(o,c,u)})}routeTo(o,c="",u=-1){let h=o;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(fc,Ya.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(qa.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(o){this.config.post(()=>{this.components=o})}clearErrors(){this.errorsData.setErrors([])}setErrors(o){this.errorsData.setErrors(o).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(Nv,ru.builder().updateClasses(o=>o.setCalculatorSettings(!0)))))])}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-calendar"]],features:[dn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,ZJe,2,1,"div",1),E()),2&o&&(P(1),O("ngForOf",c.components))},directives:[fi,Pl],styles:[""]}),l})();function QJe(l,a){if(1&l&&(M(0,"div"),me(1,"app-add-component",2),E()),2&l){const o=a.$implicit;P(1),O("component",o)}}const JJe=[{path:"about",component:WJe},{path:"main",component:xae},{path:"main-test",component:GJe},{path:"memorials-pages-editor",component:qVe},{path:"help",component:REe},{path:"d3examples",component:BVe},{path:"d3Dexamples",component:UJe},{path:"books",component:V7e},{path:"dynamic-components-examples",component:v7e},{path:"tests",component:jVe},{path:"memorial",component:U7e},{path:"calculator",component:$Je},{path:"calendar",component:KJe},{path:"compiler",component:XJe},{path:"scheduler",component:(()=>{class l extends Af{constructor(o,c,u){super(o,c,u),this.appBookName="\u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 APP_SCH",this.appBookChapter="1",this.helpBookName="\u0441\u043f\u0440\u0430\u0432\u043a\u0430 SL_HLP",this.helpChapterNormal="1",this.helpChapterConfidential="2",this.errorsData=iu.builder(),this.addMenuLink(Hn.builder().setLink("#").setName("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435").setShape("alarm-clock").setOnClick(()=>{this.reset(this.appBookChapter)}).setIsActive(()=>this.isComponent(this.appBookName,this.appBookChapter))).addMenuLink(Hn.builder().setLink("#").setName("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438").setShape("cog").setOnClick(()=>{this.showSettings()}).setIsActive(()=>this.isSettings())).addMenuLink(Hn.builder().setLink("#").setName("\u0421\u043f\u0440\u0430\u0432\u043a\u0430").setShape("help").setOnClick(()=>{this.routeToHelp(this.helpChapterNormal)}).setIsActive(()=>this.isComponent(this.helpBookName)))}getUIVisited(){return this.uiConfig.ui.visitedSchedulerHelp}getUIBook(){return this.uiConfig.ui.schedulerBook}getUIChapter(){return this.uiConfig.ui.schedulerChapter}getUILine(){return this.uiConfig.ui.schedulerLine}isSettings(){var o;return!(this.components.length<=0)&&(null===(o=this.components[0].data.component)||void 0===o?void 0:o.data)instanceof ru}isComponent(o,c=""){var u;if(this.components.length<=0)return!1;let d=null===(u=this.components[0].data.component)||void 0===u?void 0:u.data;return(null==d?void 0:d.text)==o&&(!c||(null==d?void 0:d.link.chapter)==c)}ngAfterViewInit(){super.ngAfterViewInit(),this.doLogin(()=>{this.ngAfterViewInitRaw()})}ngAfterViewInitRaw(){if("confidential"===pageRequestedDoc)pageRequestedDoc="",this.routeToHelpDelayed(this.helpChapterConfidential);else if(this.getUIVisited().getStringValue()!==this.config.environment.version)this.routeToHelpDelayed(this.helpChapterNormal);else{let o=this.getUIBook().getStringValue(),c=this.getUIChapter().getStringValue(),u=this.getUILine().getNumberValue();o?this.routeTo(o,c,u):this.resetDelayed(this.appBookChapter)}}resetDelayed(o){this.config.post(()=>{this.reset(o)})}reset(o){this.routeTo(this.appBookName,o,1)}routeToHelpDelayed(o){this.config.post(()=>{this.routeToHelp(o)})}routeToHelp(o){this.isComponent(this.helpBookName,o)&&o===this.helpChapterNormal?this.reset(this.helpChapterNormal):this.routeTo(this.helpBookName,o,1)}routeToDelayed(o,c="",u=-1){this.config.post(()=>{this.routeTo(o,c,u)})}routeTo(o,c="",u=-1){let h=o;if(h){if("\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"==h)return void this.routeToHelpDelayed(this.helpChapterConfidential);if("books_help"==h||h==this.helpBookName&&""==c&&u<=0)return void this.routeToHelpDelayed(this.helpChapterNormal);""==c&&(c="1"),u<0&&(u=1),this.getUIBook().setStringValue(h),this.getUIChapter().setStringValue(c),this.getUILine().setNumberValue(u),this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(fc,Ya.builder().setText(h).setMenu(this.menuLinks).setHideUI(!0).setEpubEnabled(!1).setShowPrintButtons(!0).setParallel(!0).setLinebreaks(!0).setAutoPrint(!0).setLink(qa.builder().setBookName(h).setChapter(c).setStartLine(u).setEndLine(1e3).setOnRoute(d=>{d?this.routeToDelayed(d.trim()):this.resetDelayed(this.appBookChapter)})))))])}}setComponentsDelayed(o){this.config.post(()=>{this.components=o})}clearErrors(){this.errorsData.setErrors([])}setErrors(o){this.errorsData.setErrors(o).updateClasses(c=>c.setAlertClass("alert-danger"))}showSettings(){this.setComponentsDelayed([new On(Za,zs.builder().setComponent(new On(Nv,ru.builder().updateClasses(o=>o.setCalculatorSettings(!0)))))])}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(tu))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-scheduler"]],features:[dn],decls:2,vars:1,consts:[[1,"ftext-no","fade-in-3-no"],[4,"ngFor","ngForOf"],[3,"component"]],template:function(o,c){1&o&&(M(0,"div",0),Z(1,QJe,2,1,"div",1),E()),2&o&&(P(1),O("ngForOf",c.components))},directives:[fi,Pl],styles:[""]}),l})()},{path:"index.html",redirectTo:"/about",pathMatch:"full"},{path:"index.night.html",redirectTo:"/about",pathMatch:"full"},{path:"",redirectTo:"/about",pathMatch:"full"}];let eet=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({imports:[[$W.forRoot(JJe)],$W]}),l})();function wae(){return"undefined"!=typeof window&&void 0!==window.document}function $8(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function tp(l){switch(l.length){case 0:return new u0;case 1:return l[0];default:return new SG(l)}}function Sae(l,a,o,c,u={},h={}){const d=[],f=[];let p=-1,g=null;if(c.forEach(m=>{const v=m.offset,_=v==p,y=_&&g||{};Object.keys(m).forEach(b=>{let x=b,C=m[b];if("offset"!==b)switch(x=a.normalizePropertyName(x,d),C){case"!":C=u[b];break;case Rh:C=h[b];break;default:C=a.normalizeStyleValue(b,x,C,d)}y[x]=C}),_||f.push(y),g=y,p=v}),d.length){const m="\n - ";throw new Error(`Unable to animate due to the following errors:${m}${d.join(m)}`)}return f}function q8(l,a,o,c){switch(a){case"start":l.onStart(()=>c(o&&Y8(o,"start",l)));break;case"done":l.onDone(()=>c(o&&Y8(o,"done",l)));break;case"destroy":l.onDestroy(()=>c(o&&Y8(o,"destroy",l)))}}function Y8(l,a,o){const c=o.totalTime,h=X8(l.element,l.triggerName,l.fromState,l.toState,a||l.phaseName,null==c?l.totalTime:c,!!o.disabled),d=l._data;return null!=d&&(h._data=d),h}function X8(l,a,o,c,u="",h=0,d){return{element:l,triggerName:a,fromState:o,toState:c,phaseName:u,totalTime:h,disabled:!!d}}function Gl(l,a,o){let c;return l instanceof Map?(c=l.get(a),c||l.set(a,c=o)):(c=l[a],c||(c=l[a]=o)),c}function Tae(l){const a=l.indexOf(":");return[l.substring(1,a),l.substr(a+1)]}let Z8=(l,a)=>!1,Dae=(l,a,o)=>[];($8()||"undefined"!=typeof Element)&&(Z8=wae()?(l,a)=>{for(;a&&a!==document.documentElement;){if(a===l)return!0;a=a.parentNode||a.host}return!1}:(l,a)=>l.contains(a),Dae=(l,a,o)=>{if(o)return Array.from(l.querySelectorAll(a));const c=l.querySelector(a);return c?[c]:[]});let Jg=null,Mae=!1;function K8(l){Jg||(Jg=function net(){return"undefined"!=typeof document?document.body:null}()||{},Mae=!!Jg.style&&"WebkitAppearance"in Jg.style);let a=!0;return Jg.style&&!function tet(l){return"ebkit"==l.substring(1,6)}(l)&&(a=l in Jg.style,!a&&Mae&&(a="Webkit"+l.charAt(0).toUpperCase()+l.substr(1)in Jg.style)),a}const Q8=Z8,J8=Dae;function Eae(l){const a={};return Object.keys(l).forEach(o=>{const c=o.replace(/([a-z])([A-Z])/g,"$1-$2");a[c]=l[o]}),a}let kae=(()=>{class l{validateStyleProperty(o){return K8(o)}matchesElement(o,c){return!1}containsElement(o,c){return Q8(o,c)}query(o,c,u){return J8(o,c,u)}computeStyle(o,c,u){return u||""}animate(o,c,u,h,d,f=[],p){return new u0(u,h)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),eV=(()=>{class l{}return l.NOOP=new kae,l})();const tV="ng-enter",zE="ng-leave",UE="ng-trigger",HE=".ng-trigger",Iae="ng-animating",nV=".ng-animating";function em(l){if("number"==typeof l)return l;const a=l.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:iV(parseFloat(a[1]),a[2])}function iV(l,a){return"s"===a?1e3*l:l}function WE(l,a,o){return l.hasOwnProperty("duration")?l:function set(l,a,o){let u,h=0,d="";if("string"==typeof l){const f=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return a.push(`The provided timing value "${l}" is invalid.`),{duration:0,delay:0,easing:""};u=iV(parseFloat(f[1]),f[2]);const p=f[3];null!=p&&(h=iV(parseFloat(p),f[4]));const g=f[5];g&&(d=g)}else u=l;if(!o){let f=!1,p=a.length;u<0&&(a.push("Duration values below 0 are not allowed for this animation step."),f=!0),h<0&&(a.push("Delay values below 0 are not allowed for this animation step."),f=!0),f&&a.splice(p,0,`The provided timing value "${l}" is invalid.`)}return{duration:u,delay:h,easing:d}}(l,a,o)}function B_(l,a={}){return Object.keys(l).forEach(o=>{a[o]=l[o]}),a}function np(l,a,o={}){if(a)for(let c in l)o[c]=l[c];else B_(l,o);return o}function Oae(l,a,o){return o?a+":"+o+";":""}function Fae(l){let a="";for(let o=0;o<l.style.length;o++){const c=l.style.item(o);a+=Oae(0,c,l.style.getPropertyValue(c))}for(const o in l.style)l.style.hasOwnProperty(o)&&!o.startsWith("_")&&(a+=Oae(0,cet(o),l.style[o]));l.setAttribute("style",a)}function ph(l,a,o){l.style&&(Object.keys(a).forEach(c=>{const u=sV(c);o&&!o.hasOwnProperty(c)&&(o[c]=l.style[u]),l.style[u]=a[c]}),$8()&&Fae(l))}function tm(l,a){l.style&&(Object.keys(a).forEach(o=>{const c=sV(o);l.style[c]=""}),$8()&&Fae(l))}function ax(l){return Array.isArray(l)?1==l.length?l[0]:xG(l):l}const rV=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rae(l){let a=[];if("string"==typeof l){let o;for(;o=rV.exec(l);)a.push(o[1]);rV.lastIndex=0}return a}function GE(l,a,o){const c=l.toString(),u=c.replace(rV,(h,d)=>{let f=a[d];return a.hasOwnProperty(d)||(o.push(`Please provide a value for the animation param ${d}`),f=""),f.toString()});return u==c?l:u}function jE(l){const a=[];let o=l.next();for(;!o.done;)a.push(o.value),o=l.next();return a}const aet=/-+([a-z0-9])/g;function sV(l){return l.replace(aet,(...a)=>a[1].toUpperCase())}function cet(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nae(l,a){return 0===l||0===a}function Lae(l,a,o){const c=Object.keys(o);if(c.length&&a.length){let h=a[0],d=[];if(c.forEach(f=>{h.hasOwnProperty(f)||d.push(f),h[f]=o[f]}),d.length)for(var u=1;u<a.length;u++){let f=a[u];d.forEach(function(p){f[p]=oV(l,p)})}}return a}function jl(l,a,o){switch(a.type){case 7:return l.visitTrigger(a,o);case 0:return l.visitState(a,o);case 1:return l.visitTransition(a,o);case 2:return l.visitSequence(a,o);case 3:return l.visitGroup(a,o);case 4:return l.visitAnimate(a,o);case 5:return l.visitKeyframes(a,o);case 6:return l.visitStyle(a,o);case 8:return l.visitReference(a,o);case 9:return l.visitAnimateChild(a,o);case 10:return l.visitAnimateRef(a,o);case 11:return l.visitQuery(a,o);case 12:return l.visitStagger(a,o);default:throw new Error(`Unable to resolve animation metadata node #${a.type}`)}}function oV(l,a){return window.getComputedStyle(l)[a]}function uet(l,a){const o=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(c=>function het(l,a,o){if(":"==l[0]){const p=function det(l,a){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,c)=>parseFloat(c)>parseFloat(o);case":decrement":return(o,c)=>parseFloat(c)<parseFloat(o);default:return a.push(`The transition alias value "${l}" is not supported`),"* => *"}}(l,o);if("function"==typeof p)return void a.push(p);l=p}const c=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return o.push(`The provided transition expression "${l}" is not supported`),a;const u=c[1],h=c[2],d=c[3];a.push(Bae(u,d));"<"==h[0]&&!("*"==u&&"*"==d)&&a.push(Bae(d,u))}(c,o,a)):o.push(l),o}const qE=new Set(["true","1"]),YE=new Set(["false","0"]);function Bae(l,a){const o=qE.has(l)||YE.has(l),c=qE.has(a)||YE.has(a);return(u,h)=>{let d="*"==l||l==u,f="*"==a||a==h;return!d&&o&&"boolean"==typeof u&&(d=u?qE.has(l):YE.has(l)),!f&&c&&"boolean"==typeof h&&(f=h?qE.has(a):YE.has(a)),d&&f}}const fet=new RegExp("s*:selfs*,?","g");function aV(l,a,o){return new pet(l).build(a,o)}class pet{constructor(a){this._driver=a}build(a,o){const c=new vet(o);return this._resetContextStyleTimingState(c),jl(this,ax(a),c)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles={},a.collectedStyles[""]={},a.currentTime=0}visitTrigger(a,o){let c=o.queryCount=0,u=o.depCount=0;const h=[],d=[];return"@"==a.name.charAt(0)&&o.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),a.definitions.forEach(f=>{if(this._resetContextStyleTimingState(o),0==f.type){const p=f,g=p.name;g.toString().split(/\s*,\s*/).forEach(m=>{p.name=m,h.push(this.visitState(p,o))}),p.name=g}else if(1==f.type){const p=this.visitTransition(f,o);c+=p.queryCount,u+=p.depCount,d.push(p)}else o.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:a.name,states:h,transitions:d,queryCount:c,depCount:u,options:null}}visitState(a,o){const c=this.visitStyle(a.styles,o),u=a.options&&a.options.params||null;if(c.containsDynamicStyles){const h=new Set,d=u||{};if(c.styles.forEach(f=>{if(XE(f)){const p=f;Object.keys(p).forEach(g=>{Rae(p[g]).forEach(m=>{d.hasOwnProperty(m)||h.add(m)})})}}),h.size){const f=jE(h.values());o.errors.push(`state("${a.name}", ...) must define default values for all the following style substitutions: ${f.join(", ")}`)}}return{type:0,name:a.name,style:c,options:u?{params:u}:null}}visitTransition(a,o){o.queryCount=0,o.depCount=0;const c=jl(this,ax(a.animation),o);return{type:1,matchers:uet(a.expr,o.errors),animation:c,queryCount:o.queryCount,depCount:o.depCount,options:nm(a.options)}}visitSequence(a,o){return{type:2,steps:a.steps.map(c=>jl(this,c,o)),options:nm(a.options)}}visitGroup(a,o){const c=o.currentTime;let u=0;const h=a.steps.map(d=>{o.currentTime=c;const f=jl(this,d,o);return u=Math.max(u,o.currentTime),f});return o.currentTime=u,{type:3,steps:h,options:nm(a.options)}}visitAnimate(a,o){const c=function yet(l,a){let o=null;if(l.hasOwnProperty("duration"))o=l;else if("number"==typeof l)return lV(WE(l,a).duration,0,"");const c=l;if(c.split(/\s+/).some(h=>"{"==h.charAt(0)&&"{"==h.charAt(1))){const h=lV(0,0,"");return h.dynamic=!0,h.strValue=c,h}return o=o||WE(c,a),lV(o.duration,o.delay,o.easing)}(a.timings,o.errors);o.currentAnimateTimings=c;let u,h=a.styles?a.styles:Ai({});if(5==h.type)u=this.visitKeyframes(h,o);else{let d=a.styles,f=!1;if(!d){f=!0;const g={};c.easing&&(g.easing=c.easing),d=Ai(g)}o.currentTime+=c.duration+c.delay;const p=this.visitStyle(d,o);p.isEmptyStep=f,u=p}return o.currentAnimateTimings=null,{type:4,timings:c,style:u,options:null}}visitStyle(a,o){const c=this._makeStyleAst(a,o);return this._validateStyleAst(c,o),c}_makeStyleAst(a,o){const c=[];Array.isArray(a.styles)?a.styles.forEach(d=>{"string"==typeof d?d==Rh?c.push(d):o.errors.push(`The provided style string value ${d} is not allowed.`):c.push(d)}):c.push(a.styles);let u=!1,h=null;return c.forEach(d=>{if(XE(d)){const f=d,p=f.easing;if(p&&(h=p,delete f.easing),!u)for(let g in f)if(f[g].toString().indexOf("{{")>=0){u=!0;break}}}),{type:6,styles:c,easing:h,offset:a.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(a,o){const c=o.currentAnimateTimings;let u=o.currentTime,h=o.currentTime;c&&h>0&&(h-=c.duration+c.delay),a.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(f=>{if(!this._driver.validateStyleProperty(f))return void o.errors.push(`The provided animation property "${f}" is not a supported CSS property for animations`);const p=o.collectedStyles[o.currentQuerySelector],g=p[f];let m=!0;g&&(h!=u&&h>=g.startTime&&u<=g.endTime&&(o.errors.push(`The CSS property "${f}" that exists between the times of "${g.startTime}ms" and "${g.endTime}ms" is also being animated in a parallel animation between the times of "${h}ms" and "${u}ms"`),m=!1),h=g.startTime),m&&(p[f]={startTime:h,endTime:u}),o.options&&function oet(l,a,o){const c=a.params||{},u=Rae(l);u.length&&u.forEach(h=>{c.hasOwnProperty(h)||o.push(`Unable to resolve the local animation param ${h} in the given list of values`)})}(d[f],o.options,o.errors)})})}visitKeyframes(a,o){const c={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push("keyframes() must be placed inside of a call to animate()"),c;let h=0;const d=[];let f=!1,p=!1,g=0;const m=a.steps.map(w=>{const S=this._makeStyleAst(w,o);let D=null!=S.offset?S.offset:function _et(l){if("string"==typeof l)return null;let a=null;if(Array.isArray(l))l.forEach(o=>{if(XE(o)&&o.hasOwnProperty("offset")){const c=o;a=parseFloat(c.offset),delete c.offset}});else if(XE(l)&&l.hasOwnProperty("offset")){const o=l;a=parseFloat(o.offset),delete o.offset}return a}(S.styles),T=0;return null!=D&&(h++,T=S.offset=D),p=p||T<0||T>1,f=f||T<g,g=T,d.push(T),S});p&&o.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),f&&o.errors.push("Please ensure that all keyframe offsets are in order");const v=a.steps.length;let _=0;h>0&&h<v?o.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==h&&(_=1/(v-1));const y=v-1,b=o.currentTime,x=o.currentAnimateTimings,C=x.duration;return m.forEach((w,S)=>{const D=_>0?S==y?1:_*S:d[S],T=D*C;o.currentTime=b+x.delay+T,x.duration=T,this._validateStyleAst(w,o),w.offset=D,c.styles.push(w)}),c}visitReference(a,o){return{type:8,animation:jl(this,ax(a.animation),o),options:nm(a.options)}}visitAnimateChild(a,o){return o.depCount++,{type:9,options:nm(a.options)}}visitAnimateRef(a,o){return{type:10,animation:this.visitReference(a.animation,o),options:nm(a.options)}}visitQuery(a,o){const c=o.currentQuerySelector,u=a.options||{};o.queryCount++,o.currentQuery=a;const[h,d]=function get(l){const a=!!l.split(/\s*,\s*/).find(o=>":self"==o);return a&&(l=l.replace(fet,"")),l=l.replace(/@\*/g,HE).replace(/@\w+/g,o=>HE+"-"+o.substr(1)).replace(/:animating/g,nV),[l,a]}(a.selector);o.currentQuerySelector=c.length?c+" "+h:h,Gl(o.collectedStyles,o.currentQuerySelector,{});const f=jl(this,ax(a.animation),o);return o.currentQuery=null,o.currentQuerySelector=c,{type:11,selector:h,limit:u.limit||0,optional:!!u.optional,includeSelf:d,animation:f,originalSelector:a.selector,options:nm(a.options)}}visitStagger(a,o){o.currentQuery||o.errors.push("stagger() can only be used inside of query()");const c="full"===a.timings?{duration:0,delay:0,easing:"full"}:WE(a.timings,o.errors,!0);return{type:12,animation:jl(this,ax(a.animation),o),timings:c,options:null}}}class vet{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function XE(l){return!Array.isArray(l)&&"object"==typeof l}function nm(l){return l?(l=B_(l)).params&&(l.params=function met(l){return l?B_(l):null}(l.params)):l={},l}function lV(l,a,o){return{duration:l,delay:a,easing:o}}function cV(l,a,o,c,u,h,d=null,f=!1){return{type:1,element:l,keyframes:a,preStyleProps:o,postStyleProps:c,duration:u,delay:h,totalTime:u+h,easing:d,subTimeline:f}}class ZE{constructor(){this._map=new Map}get(a){return this._map.get(a)||[]}append(a,o){let c=this._map.get(a);c||this._map.set(a,c=[]),c.push(...o)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const xet=new RegExp(":enter","g"),Tet=new RegExp(":leave","g");function uV(l,a,o,c,u,h={},d={},f,p,g=[]){return(new Det).buildKeyframes(l,a,o,c,u,h,d,f,p,g)}class Det{buildKeyframes(a,o,c,u,h,d,f,p,g,m=[]){g=g||new ZE;const v=new hV(a,o,g,u,h,m,[]);v.options=p,v.currentTimeline.setStyles([d],null,v.errors,p),jl(this,c,v);const _=v.timelines.filter(y=>y.containsAnimation());if(Object.keys(f).length){let y;for(let b=_.length-1;b>=0;b--){const x=_[b];if(x.element===o){y=x;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([f],null,v.errors,p)}return _.length?_.map(y=>y.buildKeyframes()):[cV(o,[],[],[],0,0,"",!1)]}visitTrigger(a,o){}visitState(a,o){}visitTransition(a,o){}visitAnimateChild(a,o){const c=o.subInstructions.get(o.element);if(c){const u=o.createSubContext(a.options),h=o.currentTimeline.currentTime,d=this._visitSubInstructions(c,u,u.options);h!=d&&o.transformIntoNewTimeline(d)}o.previousNode=a}visitAnimateRef(a,o){const c=o.createSubContext(a.options);c.transformIntoNewTimeline(),this.visitReference(a.animation,c),o.transformIntoNewTimeline(c.currentTimeline.currentTime),o.previousNode=a}_visitSubInstructions(a,o,c){let h=o.currentTimeline.currentTime;const d=null!=c.duration?em(c.duration):null,f=null!=c.delay?em(c.delay):null;return 0!==d&&a.forEach(p=>{const g=o.appendInstructionToTimeline(p,d,f);h=Math.max(h,g.duration+g.delay)}),h}visitReference(a,o){o.updateOptions(a.options,!0),jl(this,a.animation,o),o.previousNode=a}visitSequence(a,o){const c=o.subContextCount;let u=o;const h=a.options;if(h&&(h.params||h.delay)&&(u=o.createSubContext(h),u.transformIntoNewTimeline(),null!=h.delay)){6==u.previousNode.type&&(u.currentTimeline.snapshotCurrentStyles(),u.previousNode=KE);const d=em(h.delay);u.delayNextStep(d)}a.steps.length&&(a.steps.forEach(d=>jl(this,d,u)),u.currentTimeline.applyStylesToKeyframe(),u.subContextCount>c&&u.transformIntoNewTimeline()),o.previousNode=a}visitGroup(a,o){const c=[];let u=o.currentTimeline.currentTime;const h=a.options&&a.options.delay?em(a.options.delay):0;a.steps.forEach(d=>{const f=o.createSubContext(a.options);h&&f.delayNextStep(h),jl(this,d,f),u=Math.max(u,f.currentTimeline.currentTime),c.push(f.currentTimeline)}),c.forEach(d=>o.currentTimeline.mergeTimelineCollectedStyles(d)),o.transformIntoNewTimeline(u),o.previousNode=a}_visitTiming(a,o){if(a.dynamic){const c=a.strValue;return WE(o.params?GE(c,o.params,o.errors):c,o.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,o){const c=o.currentAnimateTimings=this._visitTiming(a.timings,o),u=o.currentTimeline;c.delay&&(o.incrementTime(c.delay),u.snapshotCurrentStyles());const h=a.style;5==h.type?this.visitKeyframes(h,o):(o.incrementTime(c.duration),this.visitStyle(h,o),u.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=a}visitStyle(a,o){const c=o.currentTimeline,u=o.currentAnimateTimings;!u&&c.getCurrentStyleProperties().length&&c.forwardFrame();const h=u&&u.easing||a.easing;a.isEmptyStep?c.applyEmptyStep(h):c.setStyles(a.styles,h,o.errors,o.options),o.previousNode=a}visitKeyframes(a,o){const c=o.currentAnimateTimings,u=o.currentTimeline.duration,h=c.duration,f=o.createSubContext().currentTimeline;f.easing=c.easing,a.styles.forEach(p=>{f.forwardTime((p.offset||0)*h),f.setStyles(p.styles,p.easing,o.errors,o.options),f.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(f),o.transformIntoNewTimeline(u+h),o.previousNode=a}visitQuery(a,o){const c=o.currentTimeline.currentTime,u=a.options||{},h=u.delay?em(u.delay):0;h&&(6===o.previousNode.type||0==c&&o.currentTimeline.getCurrentStyleProperties().length)&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=KE);let d=c;const f=o.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!u.optional,o.errors);o.currentQueryTotal=f.length;let p=null;f.forEach((g,m)=>{o.currentQueryIndex=m;const v=o.createSubContext(a.options,g);h&&v.delayNextStep(h),g===o.element&&(p=v.currentTimeline),jl(this,a.animation,v),v.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,v.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(d),p&&(o.currentTimeline.mergeTimelineCollectedStyles(p),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=a}visitStagger(a,o){const c=o.parentContext,u=o.currentTimeline,h=a.timings,d=Math.abs(h.duration),f=d*(o.currentQueryTotal-1);let p=d*o.currentQueryIndex;switch(h.duration<0?"reverse":h.easing){case"reverse":p=f-p;break;case"full":p=c.currentStaggerTime}const m=o.currentTimeline;p&&m.delayNextStep(p);const v=m.currentTime;jl(this,a.animation,o),o.previousNode=a,c.currentStaggerTime=u.currentTime-v+(u.startTime-c.currentTimeline.startTime)}}const KE={};class hV{constructor(a,o,c,u,h,d,f,p){this._driver=a,this.element=o,this.subInstructions=c,this._enterClassName=u,this._leaveClassName=h,this.errors=d,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=KE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new QE(this._driver,o,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,o){if(!a)return;const c=a;let u=this.options;null!=c.duration&&(u.duration=em(c.duration)),null!=c.delay&&(u.delay=em(c.delay));const h=c.params;if(h){let d=u.params;d||(d=this.options.params={}),Object.keys(h).forEach(f=>{(!o||!d.hasOwnProperty(f))&&(d[f]=GE(h[f],d,this.errors))})}}_copyOptions(){const a={};if(this.options){const o=this.options.params;if(o){const c=a.params={};Object.keys(o).forEach(u=>{c[u]=o[u]})}}return a}createSubContext(a=null,o,c){const u=o||this.element,h=new hV(this._driver,u,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(u,c||0));return h.previousNode=this.previousNode,h.currentAnimateTimings=this.currentAnimateTimings,h.options=this._copyOptions(),h.updateOptions(a),h.currentQueryIndex=this.currentQueryIndex,h.currentQueryTotal=this.currentQueryTotal,h.parentContext=this,this.subContextCount++,h}transformIntoNewTimeline(a){return this.previousNode=KE,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,o,c){const u={duration:null!=o?o:a.duration,delay:this.currentTimeline.currentTime+(null!=c?c:0)+a.delay,easing:""},h=new Met(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,u,a.stretchStartingKeyframe);return this.timelines.push(h),u}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,o,c,u,h,d){let f=[];if(u&&f.push(this.element),a.length>0){a=(a=a.replace(xet,"."+this._enterClassName)).replace(Tet,"."+this._leaveClassName);let g=this._driver.query(this.element,a,1!=c);0!==c&&(g=c<0?g.slice(g.length+c,g.length):g.slice(0,c)),f.push(...g)}return!h&&0==f.length&&d.push(`\`query("${o}")\` returned zero elements. (Use \`query("${o}", { optional: true })\` if you wish to allow this.)`),f}}class QE{constructor(a,o,c,u){this._driver=a,this.element=o,this.startTime=c,this._elementTimelineStylesLookup=u,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const o=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||o?(this.forwardTime(this.currentTime+a),o&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,o){return this.applyStylesToKeyframe(),new QE(this._driver,a,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,o){this._localTimelineStyles[a]=o,this._globalTimelineStyles[a]=o,this._styleSummary[a]={time:this.currentTime,value:o}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&(this._previousKeyframe.easing=a),Object.keys(this._globalTimelineStyles).forEach(o=>{this._backFill[o]=this._globalTimelineStyles[o]||Rh,this._currentKeyframe[o]=Rh}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,o,c,u){o&&(this._previousKeyframe.easing=o);const h=u&&u.params||{},d=function Eet(l,a){const o={};let c;return l.forEach(u=>{"*"===u?(c=c||Object.keys(a),c.forEach(h=>{o[h]=Rh})):np(u,!1,o)}),o}(a,this._globalTimelineStyles);Object.keys(d).forEach(f=>{const p=GE(d[f],h,c);this._pendingStyles[f]=p,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Rh),this._updateStyle(f,p)})}applyStylesToKeyframe(){const a=this._pendingStyles,o=Object.keys(a);0!=o.length&&(this._pendingStyles={},o.forEach(c=>{this._currentKeyframe[c]=a[c]}),Object.keys(this._localTimelineStyles).forEach(c=>{this._currentKeyframe.hasOwnProperty(c)||(this._currentKeyframe[c]=this._localTimelineStyles[c])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(a=>{const o=this._localTimelineStyles[a];this._pendingStyles[a]=o,this._updateStyle(a,o)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let o in this._currentKeyframe)a.push(o);return a}mergeTimelineCollectedStyles(a){Object.keys(a._styleSummary).forEach(o=>{const c=this._styleSummary[o],u=a._styleSummary[o];(!c||u.time>c.time)&&this._updateStyle(o,u.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,o=new Set,c=1===this._keyframes.size&&0===this.duration;let u=[];this._keyframes.forEach((f,p)=>{const g=np(f,!0);Object.keys(g).forEach(m=>{const v=g[m];"!"==v?a.add(m):v==Rh&&o.add(m)}),c||(g.offset=p/this.duration),u.push(g)});const h=a.size?jE(a.values()):[],d=o.size?jE(o.values()):[];if(c){const f=u[0],p=B_(f);f.offset=0,p.offset=1,u=[f,p]}return cV(this.element,u,h,d,this.duration,this.startTime,this.easing,!1)}}class Met extends QE{constructor(a,o,c,u,h,d,f=!1){super(a,o,d.delay),this.keyframes=c,this.preStyleProps=u,this.postStyleProps=h,this._stretchStartingKeyframe=f,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:o,duration:c,easing:u}=this.timings;if(this._stretchStartingKeyframe&&o){const h=[],d=c+o,f=o/d,p=np(a[0],!1);p.offset=0,h.push(p);const g=np(a[0],!1);g.offset=Uae(f),h.push(g);const m=a.length-1;for(let v=1;v<=m;v++){let _=np(a[v],!1);_.offset=Uae((o+_.offset*c)/d),h.push(_)}c=d,o=0,u="",a=h}return cV(this.element,a,this.preStyleProps,this.postStyleProps,c,o,u,!0)}}function Uae(l,a=3){const o=Math.pow(10,a-1);return Math.round(l*o)/o}class dV{}class ket extends dV{normalizePropertyName(a,o){return sV(a)}normalizeStyleValue(a,o,c,u){let h="";const d=c.toString().trim();if(Aet[o]&&0!==c&&"0"!==c)if("number"==typeof c)h="px";else{const f=c.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&u.push(`Please provide a CSS unit value for ${a}:${c}`)}return d+h}}const Aet=(()=>function Iet(l){const a={};return l.forEach(o=>a[o]=!0),a}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Hae(l,a,o,c,u,h,d,f,p,g,m,v,_){return{type:0,element:l,triggerName:a,isRemovalTransition:u,fromState:o,fromStyles:h,toState:c,toStyles:d,timelines:f,queriedElements:p,preStyleProps:g,postStyleProps:m,totalTime:v,errors:_}}const fV={};class Wae{constructor(a,o,c){this._triggerName=a,this.ast=o,this._stateStyles=c}match(a,o,c,u){return function Pet(l,a,o,c,u){return l.some(h=>h(a,o,c,u))}(this.ast.matchers,a,o,c,u)}buildStyles(a,o,c){const u=this._stateStyles["*"],h=this._stateStyles[a],d=u?u.buildStyles(o,c):{};return h?h.buildStyles(o,c):d}build(a,o,c,u,h,d,f,p,g,m){const v=[],_=this.ast.options&&this.ast.options.params||fV,b=this.buildStyles(c,f&&f.params||fV,v),x=p&&p.params||fV,C=this.buildStyles(u,x,v),w=new Set,S=new Map,D=new Map,T="void"===u,A={params:Object.assign(Object.assign({},_),x)},I=m?[]:uV(a,o,this.ast.animation,h,d,b,C,A,g,v);let N=0;if(I.forEach(F=>{N=Math.max(F.duration+F.delay,N)}),v.length)return Hae(o,this._triggerName,c,u,T,b,C,[],[],S,D,N,v);I.forEach(F=>{const B=F.element,V=Gl(S,B,{});F.preStyleProps.forEach(q=>V[q]=!0);const $=Gl(D,B,{});F.postStyleProps.forEach(q=>$[q]=!0),B!==o&&w.add(B)});const k=jE(w.values());return Hae(o,this._triggerName,c,u,T,b,C,I,k,S,D,N)}}class Oet{constructor(a,o,c){this.styles=a,this.defaultParams=o,this.normalizer=c}buildStyles(a,o){const c={},u=B_(this.defaultParams);return Object.keys(a).forEach(h=>{const d=a[h];null!=d&&(u[h]=d)}),this.styles.styles.forEach(h=>{if("string"!=typeof h){const d=h;Object.keys(d).forEach(f=>{let p=d[f];p.length>1&&(p=GE(p,u,o));const g=this.normalizer.normalizePropertyName(f,o);p=this.normalizer.normalizeStyleValue(f,g,p,o),c[g]=p})}}),c}}class Ret{constructor(a,o,c){this.name=a,this.ast=o,this._normalizer=c,this.transitionFactories=[],this.states={},o.states.forEach(u=>{this.states[u.name]=new Oet(u.style,u.options&&u.options.params||{},c)}),Gae(this.states,"true","1"),Gae(this.states,"false","0"),o.transitions.forEach(u=>{this.transitionFactories.push(new Wae(a,u,this.states))}),this.fallbackTransition=function Net(l,a,o){return new Wae(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,f)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,o,c,u){return this.transitionFactories.find(d=>d.match(a,o,c,u))||null}matchStyles(a,o,c){return this.fallbackTransition.buildStyles(a,o,c)}}function Gae(l,a,o){l.hasOwnProperty(a)?l.hasOwnProperty(o)||(l[o]=l[a]):l.hasOwnProperty(o)&&(l[a]=l[o])}const Let=new ZE;class Bet{constructor(a,o,c){this.bodyNode=a,this._driver=o,this._normalizer=c,this._animations={},this._playersById={},this.players=[]}register(a,o){const c=[],u=aV(this._driver,o,c);if(c.length)throw new Error(`Unable to build the animation due to the following errors: ${c.join("\n")}`);this._animations[a]=u}_buildPlayer(a,o,c){const u=a.element,h=Sae(0,this._normalizer,0,a.keyframes,o,c);return this._driver.animate(u,h,a.duration,a.delay,a.easing,[],!0)}create(a,o,c={}){const u=[],h=this._animations[a];let d;const f=new Map;if(h?(d=uV(this._driver,o,h,tV,zE,{},{},c,Let,u),d.forEach(m=>{const v=Gl(f,m.element,{});m.postStyleProps.forEach(_=>v[_]=null)})):(u.push("The requested animation doesn't exist or has already been destroyed"),d=[]),u.length)throw new Error(`Unable to create the animation due to the following errors: ${u.join("\n")}`);f.forEach((m,v)=>{Object.keys(m).forEach(_=>{m[_]=this._driver.computeStyle(v,_,Rh)})});const g=tp(d.map(m=>{const v=f.get(m.element);return this._buildPlayer(m,{},v)}));return this._playersById[a]=g,g.onDestroy(()=>this.destroy(a)),this.players.push(g),g}destroy(a){const o=this._getPlayer(a);o.destroy(),delete this._playersById[a];const c=this.players.indexOf(o);c>=0&&this.players.splice(c,1)}_getPlayer(a){const o=this._playersById[a];if(!o)throw new Error(`Unable to find the timeline player referenced by ${a}`);return o}listen(a,o,c,u){const h=X8(o,"","","");return q8(this._getPlayer(a),c,h,u),()=>{}}command(a,o,c,u){if("register"==c)return void this.register(a,u[0]);if("create"==c)return void this.create(a,o,u[0]||{});const h=this._getPlayer(a);switch(c){case"play":h.play();break;case"pause":h.pause();break;case"reset":h.reset();break;case"restart":h.restart();break;case"finish":h.finish();break;case"init":h.init();break;case"setPosition":h.setPosition(parseFloat(u[0]));break;case"destroy":this.destroy(a)}}}const jae="ng-animate-queued",pV="ng-animate-disabled",Wet=[],$ae={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Get={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},gc="__ng_removed";class gV{constructor(a,o=""){this.namespaceId=o;const c=a&&a.hasOwnProperty("value");if(this.value=function Yet(l){return null!=l?l:null}(c?a.value:a),c){const h=B_(a);delete h.value,this.options=h}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(a){const o=a.params;if(o){const c=this.options.params;Object.keys(o).forEach(u=>{null==c[u]&&(c[u]=o[u])})}}}const lx="void",mV=new gV(lx);class jet{constructor(a,o,c){this.id=a,this.hostElement=o,this._engine=c,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,mc(o,this._hostClassName)}listen(a,o,c,u){if(!this._triggers.hasOwnProperty(o))throw new Error(`Unable to listen on the animation trigger event "${c}" because the animation trigger "${o}" doesn't exist!`);if(null==c||0==c.length)throw new Error(`Unable to listen on the animation trigger "${o}" because the provided event is undefined!`);if(!function Xet(l){return"start"==l||"done"==l}(c))throw new Error(`The provided animation trigger event "${c}" for the animation trigger "${o}" is not supported!`);const h=Gl(this._elementListeners,a,[]),d={name:o,phase:c,callback:u};h.push(d);const f=Gl(this._engine.statesByElement,a,{});return f.hasOwnProperty(o)||(mc(a,UE),mc(a,UE+"-"+o),f[o]=mV),()=>{this._engine.afterFlush(()=>{const p=h.indexOf(d);p>=0&&h.splice(p,1),this._triggers[o]||delete f[o]})}}register(a,o){return!this._triggers[a]&&(this._triggers[a]=o,!0)}_getTrigger(a){const o=this._triggers[a];if(!o)throw new Error(`The provided animation trigger "${a}" has not been registered!`);return o}trigger(a,o,c,u=!0){const h=this._getTrigger(o),d=new vV(this.id,o,a);let f=this._engine.statesByElement.get(a);f||(mc(a,UE),mc(a,UE+"-"+o),this._engine.statesByElement.set(a,f={}));let p=f[o];const g=new gV(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&p&&g.absorbOptions(p.options),f[o]=g,p||(p=mV),g.value!==lx&&p.value===g.value){if(!function Qet(l,a){const o=Object.keys(l),c=Object.keys(a);if(o.length!=c.length)return!1;for(let u=0;u<o.length;u++){const h=o[u];if(!a.hasOwnProperty(h)||l[h]!==a[h])return!1}return!0}(p.params,g.params)){const x=[],C=h.matchStyles(p.value,p.params,x),w=h.matchStyles(g.value,g.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{tm(a,C),ph(a,w)})}return}const _=Gl(this._engine.playersByElement,a,[]);_.forEach(x=>{x.namespaceId==this.id&&x.triggerName==o&&x.queued&&x.destroy()});let y=h.matchTransition(p.value,g.value,a,g.params),b=!1;if(!y){if(!u)return;y=h.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:o,transition:y,fromState:p,toState:g,player:d,isFallbackTransition:b}),b||(mc(a,jae),d.onStart(()=>{V_(a,jae)})),d.onDone(()=>{let x=this.players.indexOf(d);x>=0&&this.players.splice(x,1);const C=this._engine.playersByElement.get(a);if(C){let w=C.indexOf(d);w>=0&&C.splice(w,1)}}),this.players.push(d),_.push(d),d}deregister(a){delete this._triggers[a],this._engine.statesByElement.forEach((o,c)=>{delete o[a]}),this._elementListeners.forEach((o,c)=>{this._elementListeners.set(c,o.filter(u=>u.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const o=this._engine.playersByElement.get(a);o&&(o.forEach(c=>c.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,o){const c=this._engine.driver.query(a,HE,!0);c.forEach(u=>{if(u[gc])return;const h=this._engine.fetchNamespacesByElement(u);h.size?h.forEach(d=>d.triggerLeaveAnimation(u,o,!1,!0)):this.clearElementCache(u)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(u=>this.clearElementCache(u)))}triggerLeaveAnimation(a,o,c,u){const h=this._engine.statesByElement.get(a),d=new Map;if(h){const f=[];if(Object.keys(h).forEach(p=>{if(d.set(p,h[p].value),this._triggers[p]){const g=this.trigger(a,p,lx,u);g&&f.push(g)}}),f.length)return this._engine.markElementAsRemoved(this.id,a,!0,o,d),c&&tp(f).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const o=this._elementListeners.get(a),c=this._engine.statesByElement.get(a);if(o&&c){const u=new Set;o.forEach(h=>{const d=h.name;if(u.has(d))return;u.add(d);const p=this._triggers[d].fallbackTransition,g=c[d]||mV,m=new gV(lx),v=new vV(this.id,d,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:d,transition:p,fromState:g,toState:m,player:v,isFallbackTransition:!0})})}}removeNode(a,o){const c=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,o),this.triggerLeaveAnimation(a,o,!0))return;let u=!1;if(c.totalAnimations){const h=c.players.length?c.playersByQueriedElement.get(a):[];if(h&&h.length)u=!0;else{let d=a;for(;d=d.parentNode;)if(c.statesByElement.get(d)){u=!0;break}}}if(this.prepareLeaveAnimationListeners(a),u)c.markElementAsRemoved(this.id,a,!1,o);else{const h=a[gc];(!h||h===$ae)&&(c.afterFlush(()=>this.clearElementCache(a)),c.destroyInnerAnimations(a),c._onRemovalComplete(a,o))}}insertNode(a,o){mc(a,this._hostClassName)}drainQueuedTransitions(a){const o=[];return this._queue.forEach(c=>{const u=c.player;if(u.destroyed)return;const h=c.element,d=this._elementListeners.get(h);d&&d.forEach(f=>{if(f.name==c.triggerName){const p=X8(h,c.triggerName,c.fromState.value,c.toState.value);p._data=a,q8(c.player,f.phase,p,f.callback)}}),u.markedForDestroy?this._engine.afterFlush(()=>{u.destroy()}):o.push(c)}),this._queue=[],o.sort((c,u)=>{const h=c.transition.ast.depCount,d=u.transition.ast.depCount;return 0==h||0==d?h-d:this._engine.driver.containsElement(c.element,u.element)?1:-1})}destroy(a){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}elementContainsData(a){let o=!1;return this._elementListeners.has(a)&&(o=!0),o=!!this._queue.find(c=>c.element===a)||o,o}}class $et{constructor(a,o,c){this.bodyNode=a,this.driver=o,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(u,h)=>{}}_onRemovalComplete(a,o){this.onRemovalComplete(a,o)}get queuedPlayers(){const a=[];return this._namespaceList.forEach(o=>{o.players.forEach(c=>{c.queued&&a.push(c)})}),a}createNamespace(a,o){const c=new jet(a,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(c,o):(this.newHostElements.set(o,c),this.collectEnterElement(o)),this._namespaceLookup[a]=c}_balanceNamespaceList(a,o){const c=this._namespaceList.length-1;if(c>=0){let u=!1;for(let h=c;h>=0;h--)if(this.driver.containsElement(this._namespaceList[h].hostElement,o)){this._namespaceList.splice(h+1,0,a),u=!0;break}u||this._namespaceList.splice(0,0,a)}else this._namespaceList.push(a);return this.namespacesByHostElement.set(o,a),a}register(a,o){let c=this._namespaceLookup[a];return c||(c=this.createNamespace(a,o)),c}registerTrigger(a,o,c){let u=this._namespaceLookup[a];u&&u.register(o,c)&&this.totalAnimations++}destroy(a,o){if(!a)return;const c=this._fetchNamespace(a);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[a];const u=this._namespaceList.indexOf(c);u>=0&&this._namespaceList.splice(u,1)}),this.afterFlushAnimationsDone(()=>c.destroy(o))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const o=new Set,c=this.statesByElement.get(a);if(c){const u=Object.keys(c);for(let h=0;h<u.length;h++){const d=c[u[h]].namespaceId;if(d){const f=this._fetchNamespace(d);f&&o.add(f)}}}return o}trigger(a,o,c,u){if(JE(o)){const h=this._fetchNamespace(a);if(h)return h.trigger(o,c,u),!0}return!1}insertNode(a,o,c,u){if(!JE(o))return;const h=o[gc];if(h&&h.setForRemoval){h.setForRemoval=!1,h.setForMove=!0;const d=this.collectedLeaveElements.indexOf(o);d>=0&&this.collectedLeaveElements.splice(d,1)}if(a){const d=this._fetchNamespace(a);d&&d.insertNode(o,c)}u&&this.collectEnterElement(o)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,o){o?this.disabledNodes.has(a)||(this.disabledNodes.add(a),mc(a,pV)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),V_(a,pV))}removeNode(a,o,c,u){if(JE(o)){const h=a?this._fetchNamespace(a):null;if(h?h.removeNode(o,u):this.markElementAsRemoved(a,o,!1,u),c){const d=this.namespacesByHostElement.get(o);d&&d.id!==a&&d.removeNode(o,u)}}else this._onRemovalComplete(o,u)}markElementAsRemoved(a,o,c,u,h){this.collectedLeaveElements.push(o),o[gc]={namespaceId:a,setForRemoval:u,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:h}}listen(a,o,c,u,h){return JE(o)?this._fetchNamespace(a).listen(o,c,u,h):()=>{}}_buildInstruction(a,o,c,u,h){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,c,u,a.fromState.options,a.toState.options,o,h)}destroyInnerAnimations(a){let o=this.driver.query(a,HE,!0);o.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(a,nV,!0),o.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(a){const o=this.playersByElement.get(a);o&&o.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(a){const o=this.playersByQueriedElement.get(a);o&&o.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return tp(this.players).onDone(()=>a());a()})}processLeaveNode(a){var o;const c=a[gc];if(c&&c.setForRemoval){if(a[gc]=$ae,c.namespaceId){this.destroyInnerAnimations(a);const u=this._fetchNamespace(c.namespaceId);u&&u.clearElementCache(a)}this._onRemovalComplete(a,c.setForRemoval)}(null===(o=a.classList)||void 0===o?void 0:o.contains(pV))&&this.markElementAsDisabled(a,!1),this.driver.query(a,".ng-animate-disabled",!0).forEach(u=>{this.markElementAsDisabled(u,!1)})}flush(a=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,u)=>this._balanceNamespaceList(c,u)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)mc(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{o=this._flushAnimations(c,a)}finally{for(let u=0;u<c.length;u++)c[u]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],o.length?tp(o).onDone(()=>{c.forEach(u=>u())}):c.forEach(u=>u())}}reportError(a){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${a.join("\n")}`)}_flushAnimations(a,o){const c=new ZE,u=[],h=new Map,d=[],f=new Map,p=new Map,g=new Map,m=new Set;this.disabledNodes.forEach(z=>{m.add(z);const W=this.driver.query(z,".ng-animate-queued",!0);for(let H=0;H<W.length;H++)m.add(W[H])});const v=this.bodyNode,_=Array.from(this.statesByElement.keys()),y=Xae(_,this.collectedEnterElements),b=new Map;let x=0;y.forEach((z,W)=>{const H=tV+x++;b.set(W,H),z.forEach(j=>mc(j,H))});const C=[],w=new Set,S=new Set;for(let z=0;z<this.collectedLeaveElements.length;z++){const W=this.collectedLeaveElements[z],H=W[gc];H&&H.setForRemoval&&(C.push(W),w.add(W),H.hasAnimation?this.driver.query(W,".ng-star-inserted",!0).forEach(j=>w.add(j)):S.add(W))}const D=new Map,T=Xae(_,Array.from(w));T.forEach((z,W)=>{const H=zE+x++;D.set(W,H),z.forEach(j=>mc(j,H))}),a.push(()=>{y.forEach((z,W)=>{const H=b.get(W);z.forEach(j=>V_(j,H))}),T.forEach((z,W)=>{const H=D.get(W);z.forEach(j=>V_(j,H))}),C.forEach(z=>{this.processLeaveNode(z)})});const A=[],I=[];for(let z=this._namespaceList.length-1;z>=0;z--)this._namespaceList[z].drainQueuedTransitions(o).forEach(H=>{const j=H.player,G=H.element;if(A.push(j),this.collectedEnterElements.length){const De=G[gc];if(De&&De.setForMove){if(De.previousTriggersValues&&De.previousTriggersValues.has(H.triggerName)){const We=De.previousTriggersValues.get(H.triggerName),ke=this.statesByElement.get(H.element);ke&&ke[H.triggerName]&&(ke[H.triggerName].value=We)}return void j.destroy()}}const K=!v||!this.driver.containsElement(v,G),J=D.get(G),ce=b.get(G),oe=this._buildInstruction(H,c,ce,J,K);if(oe.errors&&oe.errors.length)return void I.push(oe);if(K)return j.onStart(()=>tm(G,oe.fromStyles)),j.onDestroy(()=>ph(G,oe.toStyles)),void u.push(j);if(H.isFallbackTransition)return j.onStart(()=>tm(G,oe.fromStyles)),j.onDestroy(()=>ph(G,oe.toStyles)),void u.push(j);const xe=[];oe.timelines.forEach(De=>{De.stretchStartingKeyframe=!0,this.disabledNodes.has(De.element)||xe.push(De)}),oe.timelines=xe,c.append(G,oe.timelines),d.push({instruction:oe,player:j,element:G}),oe.queriedElements.forEach(De=>Gl(f,De,[]).push(j)),oe.preStyleProps.forEach((De,We)=>{const ke=Object.keys(De);if(ke.length){let Pe=p.get(We);Pe||p.set(We,Pe=new Set),ke.forEach(Ze=>Pe.add(Ze))}}),oe.postStyleProps.forEach((De,We)=>{const ke=Object.keys(De);let Pe=g.get(We);Pe||g.set(We,Pe=new Set),ke.forEach(Ze=>Pe.add(Ze))})});if(I.length){const z=[];I.forEach(W=>{z.push(`@${W.triggerName} has failed due to:\n`),W.errors.forEach(H=>z.push(`- ${H}\n`))}),A.forEach(W=>W.destroy()),this.reportError(z)}const N=new Map,k=new Map;d.forEach(z=>{const W=z.element;c.has(W)&&(k.set(W,W),this._beforeAnimationBuild(z.player.namespaceId,z.instruction,N))}),u.forEach(z=>{const W=z.element;this._getPreviousPlayers(W,!1,z.namespaceId,z.triggerName,null).forEach(j=>{Gl(N,W,[]).push(j),j.destroy()})});const F=C.filter(z=>Kae(z,p,g)),B=new Map;Yae(B,this.driver,S,g,Rh).forEach(z=>{Kae(z,p,g)&&F.push(z)});const $=new Map;y.forEach((z,W)=>{Yae($,this.driver,new Set(z),p,"!")}),F.forEach(z=>{const W=B.get(z),H=$.get(z);B.set(z,Object.assign(Object.assign({},W),H))});const q=[],L=[],U={};d.forEach(z=>{const{element:W,player:H,instruction:j}=z;if(c.has(W)){if(m.has(W))return H.onDestroy(()=>ph(W,j.toStyles)),H.disabled=!0,H.overrideTotalTime(j.totalTime),void u.push(H);let G=U;if(k.size>1){let J=W;const ce=[];for(;J=J.parentNode;){const oe=k.get(J);if(oe){G=oe;break}ce.push(J)}ce.forEach(oe=>k.set(oe,G))}const K=this._buildAnimation(H.namespaceId,j,N,h,$,B);if(H.setRealPlayer(K),G===U)q.push(H);else{const J=this.playersByElement.get(G);J&&J.length&&(H.parentPlayer=tp(J)),u.push(H)}}else tm(W,j.fromStyles),H.onDestroy(()=>ph(W,j.toStyles)),L.push(H),m.has(W)&&u.push(H)}),L.forEach(z=>{const W=h.get(z.element);if(W&&W.length){const H=tp(W);z.setRealPlayer(H)}}),u.forEach(z=>{z.parentPlayer?z.syncPlayerEvents(z.parentPlayer):z.destroy()});for(let z=0;z<C.length;z++){const W=C[z],H=W[gc];if(V_(W,zE),H&&H.hasAnimation)continue;let j=[];if(f.size){let K=f.get(W);K&&K.length&&j.push(...K);let J=this.driver.query(W,nV,!0);for(let ce=0;ce<J.length;ce++){let oe=f.get(J[ce]);oe&&oe.length&&j.push(...oe)}}const G=j.filter(K=>!K.destroyed);G.length?Zet(this,W,G):this.processLeaveNode(W)}return C.length=0,q.forEach(z=>{this.players.push(z),z.onDone(()=>{z.destroy();const W=this.players.indexOf(z);this.players.splice(W,1)}),z.play()}),q}elementContainsData(a,o){let c=!1;const u=o[gc];return u&&u.setForRemoval&&(c=!0),this.playersByElement.has(o)&&(c=!0),this.playersByQueriedElement.has(o)&&(c=!0),this.statesByElement.has(o)&&(c=!0),this._fetchNamespace(a).elementContainsData(o)||c}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,o,c,u,h){let d=[];if(o){const f=this.playersByQueriedElement.get(a);f&&(d=f)}else{const f=this.playersByElement.get(a);if(f){const p=!h||h==lx;f.forEach(g=>{g.queued||!p&&g.triggerName!=u||d.push(g)})}}return(c||u)&&(d=d.filter(f=>!(c&&c!=f.namespaceId||u&&u!=f.triggerName))),d}_beforeAnimationBuild(a,o,c){const h=o.element,d=o.isRemovalTransition?void 0:a,f=o.isRemovalTransition?void 0:o.triggerName;for(const p of o.timelines){const g=p.element,m=g!==h,v=Gl(c,g,[]);this._getPreviousPlayers(g,m,d,f,o.toState).forEach(y=>{const b=y.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),y.destroy(),v.push(y)})}tm(h,o.fromStyles)}_buildAnimation(a,o,c,u,h,d){const f=o.triggerName,p=o.element,g=[],m=new Set,v=new Set,_=o.timelines.map(b=>{const x=b.element;m.add(x);const C=x[gc];if(C&&C.removedBeforeQueried)return new u0(b.duration,b.delay);const w=x!==p,S=function Ket(l){const a=[];return Zae(l,a),a}((c.get(x)||Wet).map(N=>N.getRealPlayer())).filter(N=>!!N.element&&N.element===x),D=h.get(x),T=d.get(x),A=Sae(0,this._normalizer,0,b.keyframes,D,T),I=this._buildPlayer(b,A,S);if(b.subTimeline&&u&&v.add(x),w){const N=new vV(a,f,x);N.setRealPlayer(I),g.push(N)}return I});g.forEach(b=>{Gl(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>function qet(l,a,o){let c;if(l instanceof Map){if(c=l.get(a),c){if(c.length){const u=c.indexOf(o);c.splice(u,1)}0==c.length&&l.delete(a)}}else if(c=l[a],c){if(c.length){const u=c.indexOf(o);c.splice(u,1)}0==c.length&&delete l[a]}return c}(this.playersByQueriedElement,b.element,b))}),m.forEach(b=>mc(b,Iae));const y=tp(_);return y.onDestroy(()=>{m.forEach(b=>V_(b,Iae)),ph(p,o.toStyles)}),v.forEach(b=>{Gl(u,b,[]).push(y)}),y}_buildPlayer(a,o,c){return o.length>0?this.driver.animate(a.element,o,a.duration,a.delay,a.easing,c):new u0(a.duration,a.delay)}}class vV{constructor(a,o,c){this.namespaceId=a,this.triggerName=o,this.element=c,this._player=new u0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,Object.keys(this._queuedCallbacks).forEach(o=>{this._queuedCallbacks[o].forEach(c=>q8(a,o,void 0,c))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const o=this._player;o.triggerCallback&&a.onStart(()=>o.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,o){Gl(this._queuedCallbacks,a,[]).push(o)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const o=this._player;o.triggerCallback&&o.triggerCallback(a)}}function JE(l){return l&&1===l.nodeType}function qae(l,a){const o=l.style.display;return l.style.display=null!=a?a:"none",o}function Yae(l,a,o,c,u){const h=[];o.forEach(p=>h.push(qae(p)));const d=[];c.forEach((p,g)=>{const m={};p.forEach(v=>{const _=m[v]=a.computeStyle(g,v,u);(!_||0==_.length)&&(g[gc]=Get,d.push(g))}),l.set(g,m)});let f=0;return o.forEach(p=>qae(p,h[f++])),d}function Xae(l,a){const o=new Map;if(l.forEach(f=>o.set(f,[])),0==a.length)return o;const u=new Set(a),h=new Map;function d(f){if(!f)return 1;let p=h.get(f);if(p)return p;const g=f.parentNode;return p=o.has(g)?g:u.has(g)?1:d(g),h.set(f,p),p}return a.forEach(f=>{const p=d(f);1!==p&&o.get(p).push(f)}),o}function mc(l,a){var o;null===(o=l.classList)||void 0===o||o.add(a)}function V_(l,a){var o;null===(o=l.classList)||void 0===o||o.remove(a)}function Zet(l,a,o){tp(o).onDone(()=>l.processLeaveNode(a))}function Zae(l,a){for(let o=0;o<l.length;o++){const c=l[o];c instanceof SG?Zae(c.players,a):a.push(c)}}function Kae(l,a,o){const c=o.get(l);if(!c)return!1;let u=a.get(l);return u?c.forEach(h=>u.add(h)):a.set(l,c),o.delete(l),!0}class ek{constructor(a,o,c){this.bodyNode=a,this._driver=o,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(u,h)=>{},this._transitionEngine=new $et(a,o,c),this._timelineEngine=new Bet(a,o,c),this._transitionEngine.onRemovalComplete=(u,h)=>this.onRemovalComplete(u,h)}registerTrigger(a,o,c,u,h){const d=a+"-"+u;let f=this._triggerCache[d];if(!f){const p=[],g=aV(this._driver,h,p);if(p.length)throw new Error(`The animation trigger "${u}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);f=function Fet(l,a,o){return new Ret(l,a,o)}(u,g,this._normalizer),this._triggerCache[d]=f}this._transitionEngine.registerTrigger(o,u,f)}register(a,o){this._transitionEngine.register(a,o)}destroy(a,o){this._transitionEngine.destroy(a,o)}onInsert(a,o,c,u){this._transitionEngine.insertNode(a,o,c,u)}onRemove(a,o,c,u){this._transitionEngine.removeNode(a,o,u||!1,c)}disableAnimations(a,o){this._transitionEngine.markElementAsDisabled(a,o)}process(a,o,c,u){if("@"==c.charAt(0)){const[h,d]=Tae(c);this._timelineEngine.command(h,o,d,u)}else this._transitionEngine.trigger(a,o,c,u)}listen(a,o,c,u,h){if("@"==c.charAt(0)){const[d,f]=Tae(c);return this._timelineEngine.listen(d,o,f,h)}return this._transitionEngine.listen(a,o,c,u,h)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Qae(l,a){let o=null,c=null;return Array.isArray(a)&&a.length?(o=_V(a[0]),a.length>1&&(c=_V(a[a.length-1]))):a&&(o=_V(a)),o||c?new Jet(l,o,c):null}let Jet=(()=>{class l{constructor(o,c,u){this._element=o,this._startStyles=c,this._endStyles=u,this._state=0;let h=l.initialStylesByElement.get(o);h||l.initialStylesByElement.set(o,h={}),this._initialStyles=h}start(){this._state<1&&(this._startStyles&&ph(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ph(this._element,this._initialStyles),this._endStyles&&(ph(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(tm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tm(this._element,this._endStyles),this._endStyles=null),ph(this._element,this._initialStyles),this._state=3)}}return l.initialStylesByElement=new WeakMap,l})();function _V(l){let a=null;const o=Object.keys(l);for(let c=0;c<o.length;c++){const u=o[c];ett(u)&&(a=a||{},a[u]=l[u])}return a}function ett(l){return"display"===l||"position"===l}const ele="animationend";class itt{constructor(a,o,c,u,h,d,f){this._element=a,this._name=o,this._duration=c,this._delay=u,this._easing=h,this._fillMode=d,this._onDoneFn=f,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function rtt(l,a){const o=bV(l,"").trim();let c=0;o.length&&(c=function ott(l,a){let o=0;for(let c=0;c<l.length;c++)l.charAt(c)===a&&o++;return o}(o,",")+1,a=`${o}, ${a}`),tk(l,"",a)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ile(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){tle(this._element,this._name,"paused")}resume(){tle(this._element,this._name,"running")}setPosition(a){const o=nle(this._element,this._name);this._position=a*this._duration,tk(this._element,"Delay",`-${this._position}ms`,o)}getPosition(){return this._position}_handleCallback(a){const o=a._ngTestManualTimestamp||Date.now(),c=1e3*parseFloat(a.elapsedTime.toFixed(3));a.animationName==this._name&&Math.max(o-this._startTime,0)>=this._delay&&c>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ile(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function stt(l,a){const c=bV(l,"").split(","),u=yV(c,a);u>=0&&(c.splice(u,1),tk(l,"",c.join(",")))}(this._element,this._name))}}function tle(l,a,o){tk(l,"PlayState",o,nle(l,a))}function nle(l,a){const o=bV(l,"");return o.indexOf(",")>0?yV(o.split(","),a):yV([o],a)}function yV(l,a){for(let o=0;o<l.length;o++)if(l[o].indexOf(a)>=0)return o;return-1}function ile(l,a,o){o?l.removeEventListener(ele,a):l.addEventListener(ele,a)}function tk(l,a,o,c){const u="animation"+a;if(null!=c){const h=l.style[u];if(h.length){const d=h.split(",");d[c]=o,o=d.join(",")}}l.style[u]=o}function bV(l,a){return l.style["animation"+a]||""}class rle{constructor(a,o,c,u,h,d,f,p){this.element=a,this.keyframes=o,this.animationName=c,this._duration=u,this._delay=h,this._finalStyles=f,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=u+h,this._buildStyler()}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(a=>a()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(a){this._styler.setPosition(a)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new itt(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}beforeDestroy(){this.init();const a={};if(this.hasStarted()){const o=this._state>=3;Object.keys(this._finalStyles).forEach(c=>{"offset"!=c&&(a[c]=o?this._finalStyles[c]:oV(this.element,c))})}this.currentSnapshot=a}}class ctt extends u0{constructor(a,o){super(),this.element=a,this._startingStyles={},this.__initialized=!1,this._styles=Eae(o)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(a=>{this._startingStyles[a]=this.element.style[a]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(a=>this.element.style.setProperty(a,this._styles[a])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(a=>{const o=this._startingStyles[a];o?this.element.style.setProperty(a,o):this.element.style.removeProperty(a)}),this._startingStyles=null,super.destroy())}}class ole{constructor(){this._count=0}validateStyleProperty(a){return K8(a)}matchesElement(a,o){return!1}containsElement(a,o){return Q8(a,o)}query(a,o,c){return J8(a,o,c)}computeStyle(a,o,c){return window.getComputedStyle(a)[o]}buildKeyframeElement(a,o,c){c=c.map(f=>Eae(f));let u=`@keyframes ${o} {\n`,h="";c.forEach(f=>{h=" ";const p=parseFloat(f.offset);u+=`${h}${100*p}% {\n`,h+=" ",Object.keys(f).forEach(g=>{const m=f[g];switch(g){case"offset":return;case"easing":return void(m&&(u+=`${h}animation-timing-function: ${m};\n`));default:return void(u+=`${h}${g}: ${m};\n`)}}),u+=`${h}}\n`}),u+="}\n";const d=document.createElement("style");return d.textContent=u,d}animate(a,o,c,u,h,d=[],f){const p=d.filter(C=>C instanceof rle),g={};Nae(c,u)&&p.forEach(C=>{let w=C.currentSnapshot;Object.keys(w).forEach(S=>g[S]=w[S])});const m=function dtt(l){let a={};return l&&(Array.isArray(l)?l:[l]).forEach(c=>{Object.keys(c).forEach(u=>{"offset"==u||"easing"==u||(a[u]=c[u])})}),a}(o=Lae(a,o,g));if(0==c)return new ctt(a,m);const v="gen_css_kf_"+this._count++,_=this.buildKeyframeElement(a,v,o);(function htt(l){var a;const o=null===(a=l.getRootNode)||void 0===a?void 0:a.call(l);return"undefined"!=typeof ShadowRoot&&o instanceof ShadowRoot?o:document.head})(a).appendChild(_);const b=Qae(a,o),x=new rle(a,o,v,c,u,h,m,b);return x.onDestroy(()=>function ftt(l){l.parentNode.removeChild(l)}(_)),x}}class lle{constructor(a,o,c,u){this.element=a,this.keyframes=o,this.options=c,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(a,o,c){return a.animate(o,c)}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a={};if(this.hasStarted()){const o=this._finalKeyframe;Object.keys(o).forEach(c=>{"offset"!=c&&(a[c]=this._finished?o[c]:oV(this.element,c))})}this.currentSnapshot=a}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class ptt{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(cle().toString()),this._cssKeyframesDriver=new ole}validateStyleProperty(a){return K8(a)}matchesElement(a,o){return!1}containsElement(a,o){return Q8(a,o)}query(a,o,c){return J8(a,o,c)}computeStyle(a,o,c){return window.getComputedStyle(a)[o]}overrideWebAnimationsSupport(a){this._isNativeImpl=a}animate(a,o,c,u,h,d=[],f){if(!f&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(a,o,c,u,h,d);const m={duration:c,delay:u,fill:0==u?"both":"forwards"};h&&(m.easing=h);const v={},_=d.filter(b=>b instanceof lle);Nae(c,u)&&_.forEach(b=>{let x=b.currentSnapshot;Object.keys(x).forEach(C=>v[C]=x[C])});const y=Qae(a,o=Lae(a,o=o.map(b=>np(b,!1)),v));return new lle(a,o,m,y)}}function cle(){return wae()&&Element.prototype.animate||{}}let mtt=(()=>{class l extends CG{constructor(o,c){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(c.body,{id:"0",encapsulation:Cc.None,styles:[],data:{animation:[]}})}build(o){const c=this._nextAnimationId.toString();this._nextAnimationId++;const u=Array.isArray(o)?xG(o):o;return ule(this._renderer,null,c,"register",[u]),new vtt(c,this._renderer)}}return l.\u0275fac=function(o){return new(o||l)(Ie(Ym),Ie(Wr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class vtt extends class bbe{}{constructor(a,o){super(),this._id=a,this._renderer=o}create(a,o){return new _tt(this._id,a,o||{},this._renderer)}}class _tt{constructor(a,o,c,u){this.id=a,this.element=o,this._renderer=u,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(a,o){return this._renderer.listen(this.element,`@@${this.id}:${a}`,o)}_command(a,...o){return ule(this._renderer,this.element,this.id,a,o)}onDone(a){this._listen("done",a)}onStart(a){this._listen("start",a)}onDestroy(a){this._listen("destroy",a)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(a){this._command("setPosition",a)}getPosition(){var a,o;return null!==(o=null===(a=this._renderer.engine.players[+this.id])||void 0===a?void 0:a.getPosition())&&void 0!==o?o:0}}function ule(l,a,o,c,u){return l.setProperty(a,`@@${o}:${c}`,u)}const hle="@.disabled";let ytt=(()=>{class l{constructor(o,c,u){this.delegate=o,this.engine=c,this._zone=u,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(h,d)=>{const f=null==d?void 0:d.parentNode(h);f&&d.removeChild(f,h)}}createRenderer(o,c){const h=this.delegate.createRenderer(o,c);if(!(o&&c&&c.data&&c.data.animation)){let m=this._rendererCache.get(h);return m||(m=new dle("",h,this.engine),this._rendererCache.set(h,m)),m}const d=c.id,f=c.id+"-"+this._currentId;this._currentId++,this.engine.register(f,o);const p=m=>{Array.isArray(m)?m.forEach(p):this.engine.registerTrigger(d,f,o,m.name,m)};return c.data.animation.forEach(p),new btt(this,f,h,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,c,u){o>=0&&o<this._microtaskId?this._zone.run(()=>c(u)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(h=>{const[d,f]=h;d(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,u]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return l.\u0275fac=function(o){return new(o||l)(Ie(Ym),Ie(ek),Ie(ar))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class dle{constructor(a,o,c){this.namespaceId=a,this.delegate=o,this.engine=c,this.destroyNode=this.delegate.destroyNode?u=>o.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(a,o){return this.delegate.createElement(a,o)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,o){this.delegate.appendChild(a,o),this.engine.onInsert(this.namespaceId,o,a,!1)}insertBefore(a,o,c,u=!0){this.delegate.insertBefore(a,o,c),this.engine.onInsert(this.namespaceId,o,a,u)}removeChild(a,o,c){this.engine.onRemove(this.namespaceId,o,this.delegate,c)}selectRootElement(a,o){return this.delegate.selectRootElement(a,o)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,o,c,u){this.delegate.setAttribute(a,o,c,u)}removeAttribute(a,o,c){this.delegate.removeAttribute(a,o,c)}addClass(a,o){this.delegate.addClass(a,o)}removeClass(a,o){this.delegate.removeClass(a,o)}setStyle(a,o,c,u){this.delegate.setStyle(a,o,c,u)}removeStyle(a,o,c){this.delegate.removeStyle(a,o,c)}setProperty(a,o,c){"@"==o.charAt(0)&&o==hle?this.disableAnimations(a,!!c):this.delegate.setProperty(a,o,c)}setValue(a,o){this.delegate.setValue(a,o)}listen(a,o,c){return this.delegate.listen(a,o,c)}disableAnimations(a,o){this.engine.disableAnimations(a,o)}}class btt extends dle{constructor(a,o,c,u){super(o,c,u),this.factory=a,this.namespaceId=o}setProperty(a,o,c){"@"==o.charAt(0)?"."==o.charAt(1)&&o==hle?this.disableAnimations(a,c=void 0===c||!!c):this.engine.process(this.namespaceId,a,o.substr(1),c):this.delegate.setProperty(a,o,c)}listen(a,o,c){if("@"==o.charAt(0)){const u=function Ctt(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(a);let h=o.substr(1),d="";return"@"!=h.charAt(0)&&([h,d]=function xtt(l){const a=l.indexOf(".");return[l.substring(0,a),l.substr(a+1)]}(h)),this.engine.listen(this.namespaceId,u,h,d,f=>{this.factory.scheduleListenerCallback(f._data||-1,c,f)})}return this.delegate.listen(a,o,c)}}let wtt=(()=>{class l extends ek{constructor(o,c,u){super(o.body,c,u)}ngOnDestroy(){this.flush()}}return l.\u0275fac=function(o){return new(o||l)(Ie(Wr),Ie(eV),Ie(dV))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const fle=new Wn("AnimationModuleType"),ple=[{provide:CG,useClass:mtt},{provide:dV,useFactory:function Ttt(){return new ket}},{provide:ek,useClass:wtt},{provide:Ym,useFactory:function Dtt(l,a,o){return new ytt(l,a,o)},deps:[Lw,ek,ar]}],gle=[{provide:eV,useFactory:function Stt(){return function gtt(){return"function"==typeof cle()}()?new ptt:new ole}},{provide:fle,useValue:"BrowserAnimations"},...ple],Mtt=[{provide:eV,useClass:kae},{provide:fle,useValue:"NoopAnimations"},...ple];let Ett=(()=>{class l{static withConfig(o){return{ngModule:l,providers:o.disableAnimations?Mtt:gle}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l}),l.\u0275inj=wn({providers:gle,imports:[L9]}),l})();function ktt(l,a){if(1&l){const o=gt();M(0,"div",11),ee("click",function(){return Le(o),X().$implicit.onButtonClick()}),M(1,"button",12),ie(2),E(),E()}if(2&l){const o=X().$implicit;P(2),en(o.buttonText)}}function Att(l,a){if(1&l&&(M(0,"div",6),M(1,"div",7),me(2,"clr-icon",8),E(),M(3,"div",9),ie(4),E(),Z(5,ktt,3,1,"div",10),E()),2&l){const o=a.$implicit;P(4),hi(" ",o.text," "),P(1),O("ngIf",o.buttonText)}}function Itt(l,a){if(1&l&&(M(0,"div",1),M(1,"div",2),Z(2,Att,6,2,"div",3),E(),M(3,"button",4),me(4,"clr-icon",5),E(),E()),2&l){const o=X();P(2),O("ngForOf",o.config.alerts)}}let Ptt=(()=>{class l{constructor(o){this.config=o,this.id=0}isShowType(o){return this.config.showType==o}ngOnInit(){let o=++this.id,u=()=>{o===this.id&&(this.update(),this.config.post(u,1e3))};this.config.post(u,1e3)}ngOnDestroy(){++this.id}update(){!this.config.alerts||0==this.config.alerts.length||this.config.alerts.map(o=>o).forEach(o=>{o.update()||o.remove()})}}return l.\u0275fac=function(o){return new(o||l)(R(on))},l.\u0275cmp=Ye({type:l,selectors:[["app-alerts"]],decls:1,vars:1,consts:[["class","alert alert-app-level alert-info","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-app-level","alert-info"],[1,"alert-items"],["class","alert-item static",4,"ngFor","ngForOf"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true","shape","close"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","exclamation-circle",1,"alert-icon"],[1,"alert-text"],["class","alert-actions",3,"click",4,"ngIf"],[1,"alert-actions",3,"click"],[1,"btn","alert-action"]],template:function(o,c){1&o&&Z(0,Itt,5,1,"div",0),2&o&&O("ngIf",c.config.alerts.length>0)},directives:[mn,fi,Ts,YS],styles:[""]}),l})();const Ott=function(l){return{"nav-link":!0,"nav-icon":!0,active:l}},Ftt=function(l,a){return{"has-badge":l,"has-alert":a}};function Rtt(l,a){if(1&l){const o=gt();M(0,"a",7),ee("click",function(u){const d=Le(o).$implicit;return X(2).navigateTo(u,d)}),me(1,"clr-icon",1),E()}if(2&l){const o=a.$implicit,c=X(2);O("ngClass",ws(3,Ott,c.isActive(o))),P(1),O("ngClass",ds(5,Ftt,o.hasBadge,o.hasAlert)),et("shape",o.shape)}}const Ntt=function(l){return{header:!0,"header-6":!0,bgmaroon:l,"no-print":!0}};function Ltt(l,a){if(1&l){const o=gt();M(0,"header"),M(1,"div",3),ee("click",function(){return Le(o),X().onRootRoute()}),me(2,"app-svg-js-image",4),E(),M(3,"div",5),Z(4,Rtt,2,8,"a",6),E(),E()}if(2&l){const o=X();QA(ws(6,Ntt,o.isRedTheme())),P(2),O("svgWidth",128)("svgHeight",32)("logoText",o.getTitle()),P(2),O("ngForOf",o.getLinks())}}const Btt=function(l){return{"main-container":l}},Vtt=function(l){return{"content-container":l}},ztt=function(l){return{"content-area":l}};let Utt=(()=>{class l{constructor(o,c,u){this.router=o,this.config=c,this.uiConfig=u,this.names=[Hn.builder().setLink("https://deviskin.github.io").setName("Deviskin")]}get applicationInfo(){return this.config.getApplication()}ngOnInit(){}navigateTo(o,c){c.onClick?c.onClick(c):(this.uiConfig.ui.defaultAppRoute.setStringValue(c.link),this.router.navigate([c.link]))}navigateToMain(o){this.router.navigate(["/main"])}isActive(o){return o.isActive?o.isActive(o):this.router.isActive(o.link,!1)}isUpperMenuEnabled(){return!0}isLeftBarEnabled(){return!1}isRightBarEnabled(){return!1}isFooterBarEnabled(){return!1}onCompiler(){this.router.navigate(["/compiler"])}isRedTheme(){return!1}onRootRoute(){this.config.setShowLogin(!1)}getTitle(){return this.applicationInfo.name}getLinks(){return this.uiConfig.appRoutes||this.applicationInfo.routes}isMainContainerEnabled(){return this.uiConfig.mainContainerEnabled}}return l.\u0275fac=function(o){return new(o||l)(R(fs),R(on),R(Gn))},l.\u0275cmp=Ye({type:l,selectors:[["app-default"]],decls:6,vars:10,consts:[[1,"clr-example"],[3,"ngClass"],[3,"class",4,"ngIf"],[1,"logotypeImage","cursor",3,"click"],[3,"svgWidth","svgHeight","logoText"],[1,"header-nav"],["href","javascript://",3,"ngClass","click",4,"ngFor","ngForOf"],["href","javascript://",3,"ngClass","click"]],template:function(o,c){1&o&&(M(0,"div",0),M(1,"div",1),Z(2,Ltt,5,8,"header",2),M(3,"div",1),M(4,"div",1),me(5,"router-outlet"),E(),E(),E(),E()),2&o&&(P(1),O("ngClass",ws(4,Btt,c.isMainContainerEnabled())),P(1),O("ngIf",c.isUpperMenuEnabled()),P(1),O("ngClass",ws(6,Vtt,c.isMainContainerEnabled())),P(1),O("ngClass",ws(8,ztt,c.isMainContainerEnabled())))},directives:[Xn,mn,kl,fi,Ts,_3],styles:[".logotypeImage[_ngcontent-%COMP%]{width:150px;height:100%;padding-right:10px;padding-left:10px}.clr-example[_ngcontent-%COMP%]{padding:0;overflow:hidden}.clr-example[_ngcontent-%COMP%]   .example-aside-section[_ngcontent-%COMP%]{width:20%;padding:24px;border:1px solid}.clr-example[_ngcontent-%COMP%]   .example-footer[_ngcontent-%COMP%]{height:40px;padding-top:0;padding-bottom:10px;padding-left:24px}"]}),l})();function Htt(l,a){1&l&&me(0,"app-default")}function Wtt(l,a){1&l&&me(0,"app-login")}function Gtt(l,a){1&l&&me(0,"app-three-logo",2),2&l&&O("fullScreen",!0)}let jtt=(()=>{class l{constructor(o,c,u){this.router=o,this.config=c,this.themeSvc=u}isShowType(o){return this.config.showType==o}ngOnInit(){this.themeSvc.applyTheme()}}return l.\u0275fac=function(o){return new(o||l)(R(fs),R(on),R(Ls))},l.\u0275cmp=Ye({type:l,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],["class","fullSize",3,"fullScreen",4,"ngIf"],[1,"fullSize",3,"fullScreen"]],template:function(o,c){1&o&&(me(0,"app-alerts"),Z(1,Htt,1,0,"app-default",0),Z(2,Wtt,1,0,"app-login",0),Z(3,Gtt,1,1,"app-three-logo",1)),2&o&&(P(1),O("ngIf",c.isShowType("normal")),P(1),O("ngIf",c.isShowType("login")),P(1),O("ngIf",c.isShowType("login3d")))},directives:[Ptt,mn,Utt,xae,Cae],styles:[".fullSize[_ngcontent-%COMP%]{width:100vw;height:100vh}"]}),l})();const gh=void 0,qtt=["ru",[["AM","PM"],gh,gh],gh,[["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],gh,["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"]],[["\u0412","\u041f","\u0412","\u0421","\u0427","\u041f","\u0421"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"]],[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440.","\u0430\u043f\u0440.","\u043c\u0430\u044f","\u0438\u044e\u043d.","\u0438\u044e\u043b.","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"]],[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440.","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044c","\u0444\u0435\u0432\u0440\u0430\u043b\u044c","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0435\u043b\u044c","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u043e\u043a\u0442\u044f\u0431\u0440\u044c","\u043d\u043e\u044f\u0431\u0440\u044c","\u0434\u0435\u043a\u0430\u0431\u0440\u044c"]],[["\u0434\u043e \u043d.\u044d.","\u043d.\u044d."],["\u0434\u043e \u043d. \u044d.","\u043d. \u044d."],["\u0434\u043e \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430","\u043e\u0442 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430"]],1,[6,0],["dd.MM.y","d MMM y '\u0433'.","d MMMM y '\u0433'.","EEEE, d MMMM y '\u0433'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",gh,gh,gh],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","\u043d\u0435\xa0\u0447\u0438\u0441\u043b\u043e",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"RUB","\u20bd","\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c",{GEL:[gh,"\u10da"],PHP:[gh,"\u20b1"],RON:[gh,"L"],RUB:["\u20bd"],RUR:["\u0440."],THB:["\u0e3f"],TMT:["\u0422\u041c\u0422"],TWD:["NT$"],UAH:["\u20b4"],XXX:["XXXX"]},"ltr",function $tt(l){const o=Math.floor(Math.abs(l)),c=l.toString().replace(/^[^.]*\.?/,"").length;return 0===c&&o%10==1&&o%100!=11?1:0===c&&o%10===Math.floor(o%10)&&o%10>=2&&o%10<=4&&!(o%100>=12&&o%100<=14)?3:0===c&&o%10==0||0===c&&o%10===Math.floor(o%10)&&o%10>=5&&o%10<=9||0===c&&o%100===Math.floor(o%100)&&o%100>=11&&o%100<=14?4:5}];let Xtt=(()=>{class l{constructor(o){this.config=o}intercept(o,c){let u=o.headers.set("X-Requested-With","XMLHttpRequest");this.config.authBody&&(u=u.set("Authorization","Basic "+this.config.authBody),u=u.set(this.config.authIdKey,this.config.authId));const h=new od({encoder:new Ztt,fromString:o.params.toString()});return o=o.clone({withCredentials:!0,headers:u,params:h}),c.handle(o)}}return l.\u0275fac=function(o){return new(o||l)(Ie(on))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class Ztt{encodeKey(a){return encodeURIComponent(a)}encodeValue(a){return encodeURIComponent(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}function Ktt(l,a){1&l&&(M(0,"span"),ie(1,"\u0421\u043e\u0431\u0440\u0430\u043d\u043e "),E())}function Qtt(l,a){1&l&&me(0,"clr-progress-bar",3),2&l&&O("clrValue",X().progressValue)}function Jtt(l,a){if(1&l){const o=gt();M(0,"clr-toggle-container",4),M(1,"label"),ie(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"),E(),M(3,"clr-toggle-wrapper"),M(4,"input",5),ee("ngModelChange",function(u){return Le(o),X().v.rawValue=u}),E(),M(5,"label"),ie(6),E(),E(),E()}if(2&l){const o=X();P(4),O("name",o.v.name)("value",o.v.name)("ngModel",o.v.rawValue),P(2),en(o.v.description)}}let ent=(()=>{class l{constructor(o,c,u){this.config=o,this.uiConfig=c,this.epubBuilder=u,this.progressValue=0,this.lastEvent="",this.fileEntries=[],this.workerSvc=Yo.builder(),this.bookServerSvc=new nL((h,d)=>{this.config.post(()=>{this.bookSvc.post(h,d)})}),this.bookSvc=new kB((h,d)=>{this.config.post(()=>{this.workerSvc.enabled()?this.workerSvc.sendMessage(d):this.bookServerSvc.post(h,d)})}),this.allBookslines=[],this.allBooksChapters=[],this.allBooksEmptyLines=[],this.allBooksNames=[]}get printEpubData(){return this.data}get v(){return this.uiConfig.ui.memorialPrintAllBook}get text(){return this.data&&this.data.text?this.data.text:""}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){this.workerSvc.enabled()?this.workerSvc.setOnMessage(o=>{this.config.post(()=>{this.bookSvc.post(null,o)})}):this.bookServerSvc.setCacheService(new tL(new nS)),this.bookSvc.setConfig(this.config).setUIConfig(this.uiConfig),this.bookSvc.onPageLoadEvent.setOnEventHandler(o=>{this.onPageCompleted()}),this.printEpubData.printEventsEmitter.subscribe({next:o=>{this.onPrintEpubEvent(o)}})}onClick(o){this.data.onClick&&(this.data.onClick(this.data),o.stopPropagation())}getClasses(){return{}}clearAllItems(){this.fileEntries=[],this.allBookslines=[],this.allBooksChapters=[],this.allBooksEmptyLines=[],this.allBooksNames=[]}onPageCompleted(){this.config.post(()=>{var o,c;if(this.bookSvc.bookChapter){this.allBooksNames.length||(this.allBooksNames=[...this.bookSvc.bookLanguages]);let u=this.bookSvc.getChapterTitleName();this.allBooksChapters.push(u||this.bookSvc.bookChapter.name),this.allBooksEmptyLines.push(this.bookSvc.books.map(f=>f.\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u0412\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0445\u0421\u0442\u0440\u043e\u043a)),this.allBookslines.push(this.bookSvc.books.map((f,p)=>{var g,m;let v=[],_=(b,x)=>b?b[x]:null;var b;return((null==(b=null===(m=_(null===(g=_(f.\u0441\u0442\u0440\u043e\u043a\u0438,0))||void 0===g?void 0:g.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b,0))||void 0===m?void 0:m.classes)?void 0:b.red)||(null==b?void 0:b.redDark))&&++this.allBooksEmptyLines[this.allBooksEmptyLines.length-1][p],f.\u0441\u0442\u0440\u043e\u043a\u0438.forEach(b=>{v.push(b.\u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b.map(x=>x.text).join(""))}),v}));let h=""+(+this.bookSvc.bookChapter.name+1),d=this.printEpubData.showSettings&&this.uiConfig.ui.memorialPrintAllBook.getBooleanValue();if(d&&null!=(null===(o=this.bookSvc.bookContent[0].parsed)||void 0===o?void 0:o.content.find((f,p,g)=>f.name==h)))this.lastEvent="loaded chapter: "+h,this.progressValue=Math.floor(+this.bookSvc.bookChapter.name/(null===(c=this.bookSvc.bookContent[0].parsed)||void 0===c?void 0:c.content.length)*100),this.config.post(()=>{this.bookSvc.loadPage(h)},1);else if(d){this.lastEvent="stopped after chapter: "+h,this.progressValue=100;let f=this.printEpubData.bookTitle;if(d){let p=f.indexOf(":");p>0&&(f=f.substring(0,p))}this.epubBuilder.generate(Iv.builder().setName(f).setPsalomName("\u041f\u0441\u0430\u043b\u0442\u0438\u0440\u044c VZ_KU"==this.bookSvc.bookName?"\u041f\u0441\u0430\u043b\u043e\u043c":"\u0413\u043b\u0430\u0432\u0430").setAllBooks(this.allBookslines).setBookNames(this.allBooksNames).setAllBooksChapters(this.allBooksChapters).setEmptyFirstLines(this.allBooksEmptyLines).setShowLineIndexes(this.bookSvc.bookName.includes("VZ")||this.bookSvc.bookName.includes("NZ"))).then(p=>{this.printEpubData.printEventsEmitter.emit("stop")},p=>{this.config.addAlert(mr.of(`\u041e\u0448\u0438\u0431\u043a\u0430: ${p}`,"\u041e\u041a",15)),this.printEpubData.printEventsEmitter.emit("stop")})}else if(this.printEpubData.printerHandler){let f=hL.builder();this.printEpubData.printerHandler.print(f);let p=0,g=()=>{if(p>=f.requestsPack.length)this.progressValue=100,f.requestsPack.length>=1?this.epubBuilder.generate(f.requestsPack[0],!1,!1,!0).then(v=>{this.printEpubData.printEventsEmitter.emit("stop")}):this.printEpubData.printEventsEmitter.emit("stop");else{let m=p++;this.progressValue=Math.floor((m+1)/f.requestsPack.length*100);let v=f.requestsPack[m];this.epubBuilder.generate(v,0==m,v.showMiddleContent,!1).then(_=>{this.config.post(()=>g())})}};g()}else this.printEpubData.printEventsEmitter.emit("stop")}else this.printEpubData.printEventsEmitter.emit("stop")})}onPrintEpubEvent(o){"print"===(this.lastEvent=o,o)?(this.clearAllItems(),this.progressValue=1,this.bookSvc.loadBookByName(this.printEpubData.bookName,this.printEpubData.bookLanguages,this.uiConfig.ui.memorialPrintAllBook.getBooleanValue()?"1":this.printEpubData.bookChapter)):this.progressValue=0}}return l.\u0275fac=function(o){return new(o||l)(R(on),R(Gn),R(one))},l.\u0275cmp=Ye({type:l,selectors:[["app-dynamic-print-epub"]],inputs:{data:"data"},decls:6,vars:4,consts:[[4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue",4,"ngIf"],["clrInline","",4,"ngIf"],["clrMax","100","clrSuccess","","clrLabeled","",3,"clrValue"],["clrInline",""],["type","checkbox","clrToggle","",3,"name","value","ngModel","ngModelChange"]],template:function(o,c){1&o&&(M(0,"div"),M(1,"div"),Z(2,Ktt,2,0,"span",0),ie(3),E(),Z(4,Qtt,1,1,"clr-progress-bar",1),E(),Z(5,Jtt,7,4,"clr-toggle-container",2)),2&o&&(P(2),O("ngIf",c.progressValue>0),P(1),hi('"',c.printEpubData.bookTitle,'":'),P(1),O("ngIf",c.progressValue>0),P(1),O("ngIf",c.printEpubData.showSettings))},directives:[mn,wP,SS,Rr,Xd,Ru,Zd,Js,Rs],styles:[".divcentered[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{display:block;margin:0 auto}canvas[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.12);transition:.3s;border-radius:4px}canvas[_ngcontent-%COMP%]:hover{border:2px solid rgba(0,0,0,.54)}#load-font[_ngcontent-%COMP%]{font-family:ucs;visibility:hidden}"]}),l})();!function U0e(l,a,o){(function ipe(l,a,o){"string"!=typeof a&&(o=a,a=l[ln.LocaleId]),a=a.toLowerCase().replace(/_/g,"-"),jm[a]=l,o&&(jm[a][ln.ExtraData]=o)})(l,a,o)}(qtt,"ru",[[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447.","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"],["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u0430","\u0434\u043d\u044f","\u0432\u0435\u0447\u0435\u0440\u0430","\u043d\u043e\u0447\u0438"]],[["\u043f\u043e\u043b\u043d.","\u043f\u043e\u043b\u0434.","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447.","\u043d\u043e\u0447\u044c"],void 0,["\u043f\u043e\u043b\u043d\u043e\u0447\u044c","\u043f\u043e\u043b\u0434\u0435\u043d\u044c","\u0443\u0442\u0440\u043e","\u0434\u0435\u043d\u044c","\u0432\u0435\u0447\u0435\u0440","\u043d\u043e\u0447\u044c"]],["00:00","12:00",["04:00","12:00"],["12:00","18:00"],["18:00","22:00"],["22:00","04:00"]]]);let tnt=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Mn({type:l,bootstrap:[jtt]}),l.\u0275inj=wn({providers:[on,Ls,cD,ad,ZN,Gn,ON,Ute,Hte,Ov,Yo,Nne,Lne,tu,lC,qte,Av,jte,Gte,kf,HN,Wte,VL,dne,gne,mne,$L,pne,UD,HD,Rv,Do,one,W8,k3,ud,One,wne,xne,[{provide:kN,useClass:Xtt,multi:!0},{provide:Mu,useValue:"ru"}]],imports:[[L9,eet,FEe,Ett,mVe,$d]]}),l})();gk(fc,[vne,mn,Xn,GD,G1,R0,Bp,$1,W1,j1,Nv,Ts,WD,YL,fi,Pl,jh,$h,ent],[]),gk(gL,[Ts,Xn,mn,fc],[]),Pu.production&&function Tme(){$7=!1}(),Hve().bootstrapModule(tnt).catch(l=>console.error(l))},650:Jo=>{Jo.exports=function Me(wt,Ve,ue){function Ce(Oe,Be){if(!Ve[Oe]){if(!wt[Oe]){if(re)return re(Oe,!0);var Ne=new Error("Cannot find module '"+Oe+"'");throw Ne.code="MODULE_NOT_FOUND",Ne}var le=Ve[Oe]={exports:{}};wt[Oe][0].call(le.exports,function(we){return Ce(wt[Oe][1][we]||we)},le,le.exports,Me,wt,Ve,ue)}return Ve[Oe].exports}for(var re=void 0,_e=0;_e<ue.length;_e++)Ce(ue[_e]);return Ce}({1:[function(Me,wt,Ve){"use strict";var ue=Me("./utils"),Ce=Me("./support"),re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Ve.encode=function(_e){for(var Oe,Be,Re,le,we,Te,ae=[],ge=0,be=_e.length,Ue=be,yt="string"!==ue.getTypeOf(_e);ge<_e.length;)Ue=be-ge,Re=yt?(Oe=_e[ge++],Be=ge<be?_e[ge++]:0,ge<be?_e[ge++]:0):(Oe=_e.charCodeAt(ge++),Be=ge<be?_e.charCodeAt(ge++):0,ge<be?_e.charCodeAt(ge++):0),le=(3&Oe)<<4|Be>>4,we=1<Ue?(15&Be)<<2|Re>>6:64,Te=2<Ue?63&Re:64,ae.push(re.charAt(Oe>>2)+re.charAt(le)+re.charAt(we)+re.charAt(Te));return ae.join("")},Ve.decode=function(_e){var Oe,Be,Re,Ne,le,we,Te=0,ae=0;if("data:"===_e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var be,Ue=3*(_e=_e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(_e.charAt(_e.length-1)===re.charAt(64)&&Ue--,_e.charAt(_e.length-2)===re.charAt(64)&&Ue--,Ue%1!=0)throw new Error("Invalid base64 input, bad content length.");for(be=Ce.uint8array?new Uint8Array(0|Ue):new Array(0|Ue);Te<_e.length;)Oe=re.indexOf(_e.charAt(Te++))<<2|(Ne=re.indexOf(_e.charAt(Te++)))>>4,Be=(15&Ne)<<4|(le=re.indexOf(_e.charAt(Te++)))>>2,Re=(3&le)<<6|(we=re.indexOf(_e.charAt(Te++))),be[ae++]=Oe,64!==le&&(be[ae++]=Be),64!==we&&(be[ae++]=Re);return be}},{"./support":30,"./utils":32}],2:[function(Me,wt,Ve){"use strict";var ue=Me("./external"),Ce=Me("./stream/DataWorker"),re=Me("./stream/Crc32Probe"),_e=Me("./stream/DataLengthProbe");function Oe(Be,Re,Ne,le,we){this.compressedSize=Be,this.uncompressedSize=Re,this.crc32=Ne,this.compression=le,this.compressedContent=we}Oe.prototype={getContentWorker:function(){var Be=new Ce(ue.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new _e("data_length")),Re=this;return Be.on("end",function(){if(this.streamInfo.data_length!==Re.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Be},getCompressedWorker:function(){return new Ce(ue.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},Oe.createWorkerFrom=function(Be,Re,Ne){return Be.pipe(new re).pipe(new _e("uncompressedSize")).pipe(Re.compressWorker(Ne)).pipe(new _e("compressedSize")).withStreamInfo("compression",Re)},wt.exports=Oe},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(Me,wt,Ve){"use strict";var ue=Me("./stream/GenericWorker");Ve.STORE={magic:"\0\0",compressWorker:function(Ce){return new ue("STORE compression")},uncompressWorker:function(){return new ue("STORE decompression")}},Ve.DEFLATE=Me("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(Me,wt,Ve){"use strict";var ue=Me("./utils"),Ce=function(){for(var re,_e=[],Oe=0;Oe<256;Oe++){re=Oe;for(var Be=0;Be<8;Be++)re=1&re?3988292384^re>>>1:re>>>1;_e[Oe]=re}return _e}();wt.exports=function(re,_e){return void 0!==re&&re.length?"string"!==ue.getTypeOf(re)?function(Oe,Be,Re,Ne){var le=Ce,we=0+Re;Oe^=-1;for(var Te=0;Te<we;Te++)Oe=Oe>>>8^le[255&(Oe^Be[Te])];return-1^Oe}(0|_e,re,re.length):function(Oe,Be,Re,Ne){var le=Ce,we=0+Re;Oe^=-1;for(var Te=0;Te<we;Te++)Oe=Oe>>>8^le[255&(Oe^Be.charCodeAt(Te))];return-1^Oe}(0|_e,re,re.length):0}},{"./utils":32}],5:[function(Me,wt,Ve){"use strict";Ve.base64=!1,Ve.binary=!1,Ve.dir=!1,Ve.createFolders=!0,Ve.date=null,Ve.compression=null,Ve.compressionOptions=null,Ve.comment=null,Ve.unixPermissions=null,Ve.dosPermissions=null},{}],6:[function(Me,wt,Ve){"use strict";var ue;ue="undefined"!=typeof Promise?Promise:Me("lie"),wt.exports={Promise:ue}},{lie:37}],7:[function(Me,wt,Ve){"use strict";var ue="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,Ce=Me("pako"),re=Me("./utils"),_e=Me("./stream/GenericWorker"),Oe=ue?"uint8array":"array";function Be(Re,Ne){_e.call(this,"FlateWorker/"+Re),this._pako=null,this._pakoAction=Re,this._pakoOptions=Ne,this.meta={}}Ve.magic="\b\0",re.inherits(Be,_e),Be.prototype.processChunk=function(Re){this.meta=Re.meta,null===this._pako&&this._createPako(),this._pako.push(re.transformTo(Oe,Re.data),!1)},Be.prototype.flush=function(){_e.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Be.prototype.cleanUp=function(){_e.prototype.cleanUp.call(this),this._pako=null},Be.prototype._createPako=function(){this._pako=new Ce[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Re=this;this._pako.onData=function(Ne){Re.push({data:Ne,meta:Re.meta})}},Ve.compressWorker=function(Re){return new Be("Deflate",Re)},Ve.uncompressWorker=function(){return new Be("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(Me,wt,Ve){"use strict";function ue(le,we){var Te,ae="";for(Te=0;Te<we;Te++)ae+=String.fromCharCode(255&le),le>>>=8;return ae}function Ce(le,we,Te,ae,ge,be){var Ue,yt,je=le.file,Ot=le.compression,Dt=be!==Oe.utf8encode,Yt=re.transformTo("string",be(je.name)),dt=re.transformTo("string",Oe.utf8encode(je.name)),jt=je.comment,Vn=re.transformTo("string",be(jt)),Ee=re.transformTo("string",Oe.utf8encode(jt)),vt=dt.length!==je.name.length,Q=Ee.length!==jt.length,bt="",si="",Lt="",_n=je.dir,Wt=je.date,qn={crc32:0,compressedSize:0,uncompressedSize:0};we&&!Te||(qn.crc32=le.crc32,qn.compressedSize=le.compressedSize,qn.uncompressedSize=le.uncompressedSize);var ot=0;we&&(ot|=8),Dt||!vt&&!Q||(ot|=2048);var Jt,Ri,it=0,pt=0;_n&&(it|=16),"UNIX"===ge?(pt=798,it|=(Ri=Jt=je.unixPermissions,Jt||(Ri=_n?16893:33204),(65535&Ri)<<16)):(pt=20,it|=function(Jt){return 63&(Jt||0)}(je.dosPermissions)),Ue=Wt.getUTCHours(),Ue<<=6,Ue|=Wt.getUTCMinutes(),Ue<<=5,Ue|=Wt.getUTCSeconds()/2,yt=Wt.getUTCFullYear()-1980,yt<<=4,yt|=Wt.getUTCMonth()+1,yt<<=5,yt|=Wt.getUTCDate(),vt&&(si=ue(1,1)+ue(Be(Yt),4)+dt,bt+="up"+ue(si.length,2)+si),Q&&(Lt=ue(1,1)+ue(Be(Vn),4)+Ee,bt+="uc"+ue(Lt.length,2)+Lt);var gn="";return gn+="\n\0",gn+=ue(ot,2),gn+=Ot.magic,gn+=ue(Ue,2),gn+=ue(yt,2),gn+=ue(qn.crc32,4),gn+=ue(qn.compressedSize,4),gn+=ue(qn.uncompressedSize,4),gn+=ue(Yt.length,2),gn+=ue(bt.length,2),{fileRecord:Re.LOCAL_FILE_HEADER+gn+Yt+bt,dirRecord:Re.CENTRAL_FILE_HEADER+ue(pt,2)+gn+ue(Vn.length,2)+"\0\0\0\0"+ue(it,4)+ue(ae,4)+Yt+bt+Vn}}var re=Me("../utils"),_e=Me("../stream/GenericWorker"),Oe=Me("../utf8"),Be=Me("../crc32"),Re=Me("../signature");function Ne(le,we,Te,ae){_e.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=we,this.zipPlatform=Te,this.encodeFileName=ae,this.streamFiles=le,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}re.inherits(Ne,_e),Ne.prototype.push=function(le){var we=le.meta.percent||0,Te=this.entriesCount,ae=this._sources.length;this.accumulate?this.contentBuffer.push(le):(this.bytesWritten+=le.data.length,_e.prototype.push.call(this,{data:le.data,meta:{currentFile:this.currentFile,percent:Te?(we+100*(Te-ae-1))/Te:100}}))},Ne.prototype.openedSource=function(le){this.currentSourceOffset=this.bytesWritten,this.currentFile=le.file.name;var we=this.streamFiles&&!le.file.dir;if(we){var Te=Ce(le,we,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Te.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Ne.prototype.closedSource=function(le){this.accumulate=!1;var ae,we=this.streamFiles&&!le.file.dir,Te=Ce(le,we,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Te.dirRecord),we)this.push({data:(ae=le,Re.DATA_DESCRIPTOR+ue(ae.crc32,4)+ue(ae.compressedSize,4)+ue(ae.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Te.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Ne.prototype.flush=function(){for(var le=this.bytesWritten,we=0;we<this.dirRecords.length;we++)this.push({data:this.dirRecords[we],meta:{percent:100}});var ge,be,Ue,Ot,ae=(ge=this.dirRecords.length,be=this.bytesWritten-le,Ue=le,Ot=re.transformTo("string",(0,this.encodeFileName)(this.zipComment)),Re.CENTRAL_DIRECTORY_END+"\0\0\0\0"+ue(ge,2)+ue(ge,2)+ue(be,4)+ue(Ue,4)+ue(Ot.length,2)+Ot);this.push({data:ae,meta:{percent:100}})},Ne.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Ne.prototype.registerPrevious=function(le){this._sources.push(le);var we=this;return le.on("data",function(Te){we.processChunk(Te)}),le.on("end",function(){we.closedSource(we.previous.streamInfo),we._sources.length?we.prepareNextSource():we.end()}),le.on("error",function(Te){we.error(Te)}),this},Ne.prototype.resume=function(){return!!_e.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Ne.prototype.error=function(le){var we=this._sources;if(!_e.prototype.error.call(this,le))return!1;for(var Te=0;Te<we.length;Te++)try{we[Te].error(le)}catch(ae){}return!0},Ne.prototype.lock=function(){_e.prototype.lock.call(this);for(var le=this._sources,we=0;we<le.length;we++)le[we].lock()},wt.exports=Ne},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(Me,wt,Ve){"use strict";var ue=Me("../compressions"),Ce=Me("./ZipFileWorker");Ve.generateWorker=function(re,_e,Oe){var Be=new Ce(_e.streamFiles,Oe,_e.platform,_e.encodeFileName),Re=0;try{re.forEach(function(Ne,le){Re++;var we=function(be,Ue){var yt=be||Ue,je=ue[yt];if(!je)throw new Error(yt+" is not a valid compression method !");return je}(le.options.compression,_e.compression),ae=le.dir,ge=le.date;le._compressWorker(we,le.options.compressionOptions||_e.compressionOptions||{}).withStreamInfo("file",{name:Ne,dir:ae,date:ge,comment:le.comment||"",unixPermissions:le.unixPermissions,dosPermissions:le.dosPermissions}).pipe(Be)}),Be.entriesCount=Re}catch(Ne){Be.error(Ne)}return Be}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(Me,wt,Ve){"use strict";function ue(){if(!(this instanceof ue))return new ue;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var Ce=new ue;for(var re in this)"function"!=typeof this[re]&&(Ce[re]=this[re]);return Ce}}(ue.prototype=Me("./object")).loadAsync=Me("./load"),ue.support=Me("./support"),ue.defaults=Me("./defaults"),ue.version="3.7.1",ue.loadAsync=function(Ce,re){return(new ue).loadAsync(Ce,re)},ue.external=Me("./external"),wt.exports=ue},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(Me,wt,Ve){"use strict";var ue=Me("./utils"),Ce=Me("./external"),re=Me("./utf8"),_e=Me("./zipEntries"),Oe=Me("./stream/Crc32Probe"),Be=Me("./nodejsUtils");function Re(Ne){return new Ce.Promise(function(le,we){var Te=Ne.decompressed.getContentWorker().pipe(new Oe);Te.on("error",function(ae){we(ae)}).on("end",function(){Te.streamInfo.crc32!==Ne.decompressed.crc32?we(new Error("Corrupted zip : CRC32 mismatch")):le()}).resume()})}wt.exports=function(Ne,le){var we=this;return le=ue.extend(le||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:re.utf8decode}),Be.isNode&&Be.isStream(Ne)?Ce.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):ue.prepareContent("the loaded zip file",Ne,!0,le.optimizedBinaryString,le.base64).then(function(Te){var ae=new _e(le);return ae.load(Te),ae}).then(function(Te){var ae=[Ce.Promise.resolve(Te)],ge=Te.files;if(le.checkCRC32)for(var be=0;be<ge.length;be++)ae.push(Re(ge[be]));return Ce.Promise.all(ae)}).then(function(Te){for(var ae=Te.shift(),ge=ae.files,be=0;be<ge.length;be++){var Ue=ge[be];we.file(Ue.fileNameStr,Ue.decompressed,{binary:!0,optimizedBinaryString:!0,date:Ue.date,dir:Ue.dir,comment:Ue.fileCommentStr.length?Ue.fileCommentStr:null,unixPermissions:Ue.unixPermissions,dosPermissions:Ue.dosPermissions,createFolders:le.createFolders})}return ae.zipComment.length&&(we.comment=ae.zipComment),we})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(Me,wt,Ve){"use strict";var ue=Me("../utils"),Ce=Me("../stream/GenericWorker");function re(_e,Oe){Ce.call(this,"Nodejs stream input adapter for "+_e),this._upstreamEnded=!1,this._bindStream(Oe)}ue.inherits(re,Ce),re.prototype._bindStream=function(_e){var Oe=this;(this._stream=_e).pause(),_e.on("data",function(Be){Oe.push({data:Be,meta:{percent:0}})}).on("error",function(Be){Oe.isPaused?this.generatedError=Be:Oe.error(Be)}).on("end",function(){Oe.isPaused?Oe._upstreamEnded=!0:Oe.end()})},re.prototype.pause=function(){return!!Ce.prototype.pause.call(this)&&(this._stream.pause(),!0)},re.prototype.resume=function(){return!!Ce.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},wt.exports=re},{"../stream/GenericWorker":28,"../utils":32}],13:[function(Me,wt,Ve){"use strict";var ue=Me("readable-stream").Readable;function Ce(re,_e,Oe){ue.call(this,_e),this._helper=re;var Be=this;re.on("data",function(Re,Ne){Be.push(Re)||Be._helper.pause(),Oe&&Oe(Ne)}).on("error",function(Re){Be.emit("error",Re)}).on("end",function(){Be.push(null)})}Me("../utils").inherits(Ce,ue),Ce.prototype._read=function(){this._helper.resume()},wt.exports=Ce},{"../utils":32,"readable-stream":16}],14:[function(Me,wt,Ve){"use strict";wt.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(ue,Ce){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(ue,Ce);if("number"==typeof ue)throw new Error('The "data" argument must not be a number');return new Buffer(ue,Ce)},allocBuffer:function(ue){if(Buffer.alloc)return Buffer.alloc(ue);var Ce=new Buffer(ue);return Ce.fill(0),Ce},isBuffer:function(ue){return Buffer.isBuffer(ue)},isStream:function(ue){return ue&&"function"==typeof ue.on&&"function"==typeof ue.pause&&"function"==typeof ue.resume}}},{}],15:[function(Me,wt,Ve){"use strict";function ue(je,Ot,Dt){var Yt,dt=re.getTypeOf(Ot),jt=re.extend(Dt||{},Be);jt.date=jt.date||new Date,null!==jt.compression&&(jt.compression=jt.compression.toUpperCase()),"string"==typeof jt.unixPermissions&&(jt.unixPermissions=parseInt(jt.unixPermissions,8)),jt.unixPermissions&&16384&jt.unixPermissions&&(jt.dir=!0),jt.dosPermissions&&16&jt.dosPermissions&&(jt.dir=!0),jt.dir&&(je=ge(je)),jt.createFolders&&(Yt=ae(je))&&be.call(this,Yt,!0),Dt&&void 0!==Dt.binary||(jt.binary=!("string"===dt&&!1===jt.binary&&!1===jt.base64)),(Ot instanceof Re&&0===Ot.uncompressedSize||jt.dir||!Ot||0===Ot.length)&&(jt.base64=!1,jt.binary=!0,Ot="",jt.compression="STORE",dt="string");var Ee;Ee=Ot instanceof Re||Ot instanceof _e?Ot:we.isNode&&we.isStream(Ot)?new Te(je,Ot):re.prepareContent(je,Ot,jt.binary,jt.optimizedBinaryString,jt.base64);var vt=new Ne(je,Ee,jt);this.files[je]=vt}var Ce=Me("./utf8"),re=Me("./utils"),_e=Me("./stream/GenericWorker"),Oe=Me("./stream/StreamHelper"),Be=Me("./defaults"),Re=Me("./compressedObject"),Ne=Me("./zipObject"),le=Me("./generate"),we=Me("./nodejsUtils"),Te=Me("./nodejs/NodejsStreamInputAdapter"),ae=function(je){"/"===je.slice(-1)&&(je=je.substring(0,je.length-1));var Ot=je.lastIndexOf("/");return 0<Ot?je.substring(0,Ot):""},ge=function(je){return"/"!==je.slice(-1)&&(je+="/"),je},be=function(je,Ot){return Ot=void 0!==Ot?Ot:Be.createFolders,je=ge(je),this.files[je]||ue.call(this,je,null,{dir:!0,createFolders:Ot}),this.files[je]};function Ue(je){return"[object RegExp]"===Object.prototype.toString.call(je)}var yt={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(je){var Ot,Dt,Yt;for(Ot in this.files)Yt=this.files[Ot],(Dt=Ot.slice(this.root.length,Ot.length))&&Ot.slice(0,this.root.length)===this.root&&je(Dt,Yt)},filter:function(je){var Ot=[];return this.forEach(function(Dt,Yt){je(Dt,Yt)&&Ot.push(Yt)}),Ot},file:function(je,Ot,Dt){if(1!==arguments.length)return ue.call(this,je=this.root+je,Ot,Dt),this;if(Ue(je)){var Yt=je;return this.filter(function(jt,Vn){return!Vn.dir&&Yt.test(jt)})}var dt=this.files[this.root+je];return dt&&!dt.dir?dt:null},folder:function(je){if(!je)return this;if(Ue(je))return this.filter(function(dt,jt){return jt.dir&&je.test(dt)});var Dt=be.call(this,this.root+je),Yt=this.clone();return Yt.root=Dt.name,Yt},remove:function(je){var Ot=this.files[je=this.root+je];if(Ot||("/"!==je.slice(-1)&&(je+="/"),Ot=this.files[je]),Ot&&!Ot.dir)delete this.files[je];else for(var Dt=this.filter(function(dt,jt){return jt.name.slice(0,je.length)===je}),Yt=0;Yt<Dt.length;Yt++)delete this.files[Dt[Yt].name];return this},generate:function(je){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(je){var Ot,Dt={};try{if((Dt=re.extend(je||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Ce.utf8encode})).type=Dt.type.toLowerCase(),Dt.compression=Dt.compression.toUpperCase(),"binarystring"===Dt.type&&(Dt.type="string"),!Dt.type)throw new Error("No output type specified.");re.checkSupport(Dt.type),"darwin"!==Dt.platform&&"freebsd"!==Dt.platform&&"linux"!==Dt.platform&&"sunos"!==Dt.platform||(Dt.platform="UNIX"),"win32"===Dt.platform&&(Dt.platform="DOS"),Ot=le.generateWorker(this,Dt,Dt.comment||this.comment||"")}catch(dt){(Ot=new _e("error")).error(dt)}return new Oe(Ot,Dt.type||"string",Dt.mimeType)},generateAsync:function(je,Ot){return this.generateInternalStream(je).accumulate(Ot)},generateNodeStream:function(je,Ot){return(je=je||{}).type||(je.type="nodebuffer"),this.generateInternalStream(je).toNodejsStream(Ot)}};wt.exports=yt},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(Me,wt,Ve){wt.exports=Me("stream")},{stream:void 0}],17:[function(Me,wt,Ve){"use strict";var ue=Me("./DataReader");function Ce(re){ue.call(this,re);for(var _e=0;_e<this.data.length;_e++)re[_e]=255&re[_e]}Me("../utils").inherits(Ce,ue),Ce.prototype.byteAt=function(re){return this.data[this.zero+re]},Ce.prototype.lastIndexOfSignature=function(re){for(var _e=re.charCodeAt(0),Oe=re.charCodeAt(1),Be=re.charCodeAt(2),Re=re.charCodeAt(3),Ne=this.length-4;0<=Ne;--Ne)if(this.data[Ne]===_e&&this.data[Ne+1]===Oe&&this.data[Ne+2]===Be&&this.data[Ne+3]===Re)return Ne-this.zero;return-1},Ce.prototype.readAndCheckSignature=function(re){var _e=re.charCodeAt(0),Oe=re.charCodeAt(1),Be=re.charCodeAt(2),Re=re.charCodeAt(3),Ne=this.readData(4);return _e===Ne[0]&&Oe===Ne[1]&&Be===Ne[2]&&Re===Ne[3]},Ce.prototype.readData=function(re){if(this.checkOffset(re),0===re)return[];var _e=this.data.slice(this.zero+this.index,this.zero+this.index+re);return this.index+=re,_e},wt.exports=Ce},{"../utils":32,"./DataReader":18}],18:[function(Me,wt,Ve){"use strict";var ue=Me("../utils");function Ce(re){this.data=re,this.length=re.length,this.index=0,this.zero=0}Ce.prototype={checkOffset:function(re){this.checkIndex(this.index+re)},checkIndex:function(re){if(this.length<this.zero+re||re<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+re+"). Corrupted zip ?")},setIndex:function(re){this.checkIndex(re),this.index=re},skip:function(re){this.setIndex(this.index+re)},byteAt:function(re){},readInt:function(re){var _e,Oe=0;for(this.checkOffset(re),_e=this.index+re-1;_e>=this.index;_e--)Oe=(Oe<<8)+this.byteAt(_e);return this.index+=re,Oe},readString:function(re){return ue.transformTo("string",this.readData(re))},readData:function(re){},lastIndexOfSignature:function(re){},readAndCheckSignature:function(re){},readDate:function(){var re=this.readInt(4);return new Date(Date.UTC(1980+(re>>25&127),(re>>21&15)-1,re>>16&31,re>>11&31,re>>5&63,(31&re)<<1))}},wt.exports=Ce},{"../utils":32}],19:[function(Me,wt,Ve){"use strict";var ue=Me("./Uint8ArrayReader");function Ce(re){ue.call(this,re)}Me("../utils").inherits(Ce,ue),Ce.prototype.readData=function(re){this.checkOffset(re);var _e=this.data.slice(this.zero+this.index,this.zero+this.index+re);return this.index+=re,_e},wt.exports=Ce},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(Me,wt,Ve){"use strict";var ue=Me("./DataReader");function Ce(re){ue.call(this,re)}Me("../utils").inherits(Ce,ue),Ce.prototype.byteAt=function(re){return this.data.charCodeAt(this.zero+re)},Ce.prototype.lastIndexOfSignature=function(re){return this.data.lastIndexOf(re)-this.zero},Ce.prototype.readAndCheckSignature=function(re){return re===this.readData(4)},Ce.prototype.readData=function(re){this.checkOffset(re);var _e=this.data.slice(this.zero+this.index,this.zero+this.index+re);return this.index+=re,_e},wt.exports=Ce},{"../utils":32,"./DataReader":18}],21:[function(Me,wt,Ve){"use strict";var ue=Me("./ArrayReader");function Ce(re){ue.call(this,re)}Me("../utils").inherits(Ce,ue),Ce.prototype.readData=function(re){if(this.checkOffset(re),0===re)return new Uint8Array(0);var _e=this.data.subarray(this.zero+this.index,this.zero+this.index+re);return this.index+=re,_e},wt.exports=Ce},{"../utils":32,"./ArrayReader":17}],22:[function(Me,wt,Ve){"use strict";var ue=Me("../utils"),Ce=Me("../support"),re=Me("./ArrayReader"),_e=Me("./StringReader"),Oe=Me("./NodeBufferReader"),Be=Me("./Uint8ArrayReader");wt.exports=function(Re){var Ne=ue.getTypeOf(Re);return ue.checkSupport(Ne),"string"!==Ne||Ce.uint8array?"nodebuffer"===Ne?new Oe(Re):Ce.uint8array?new Be(ue.transformTo("uint8array",Re)):new re(ue.transformTo("array",Re)):new _e(Re)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(Me,wt,Ve){"use strict";Ve.LOCAL_FILE_HEADER="PK\x03\x04",Ve.CENTRAL_FILE_HEADER="PK\x01\x02",Ve.CENTRAL_DIRECTORY_END="PK\x05\x06",Ve.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",Ve.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",Ve.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(Me,wt,Ve){"use strict";var ue=Me("./GenericWorker"),Ce=Me("../utils");function re(_e){ue.call(this,"ConvertWorker to "+_e),this.destType=_e}Ce.inherits(re,ue),re.prototype.processChunk=function(_e){this.push({data:Ce.transformTo(this.destType,_e.data),meta:_e.meta})},wt.exports=re},{"../utils":32,"./GenericWorker":28}],25:[function(Me,wt,Ve){"use strict";var ue=Me("./GenericWorker"),Ce=Me("../crc32");function re(){ue.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Me("../utils").inherits(re,ue),re.prototype.processChunk=function(_e){this.streamInfo.crc32=Ce(_e.data,this.streamInfo.crc32||0),this.push(_e)},wt.exports=re},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(Me,wt,Ve){"use strict";var ue=Me("../utils"),Ce=Me("./GenericWorker");function re(_e){Ce.call(this,"DataLengthProbe for "+_e),this.propName=_e,this.withStreamInfo(_e,0)}ue.inherits(re,Ce),re.prototype.processChunk=function(_e){_e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+_e.data.length),Ce.prototype.processChunk.call(this,_e)},wt.exports=re},{"../utils":32,"./GenericWorker":28}],27:[function(Me,wt,Ve){"use strict";var ue=Me("../utils"),Ce=Me("./GenericWorker");function re(_e){Ce.call(this,"DataWorker");var Oe=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,_e.then(function(Be){Oe.dataIsReady=!0,Oe.data=Be,Oe.max=Be&&Be.length||0,Oe.type=ue.getTypeOf(Be),Oe.isPaused||Oe._tickAndRepeat()},function(Be){Oe.error(Be)})}ue.inherits(re,Ce),re.prototype.cleanUp=function(){Ce.prototype.cleanUp.call(this),this.data=null},re.prototype.resume=function(){return!!Ce.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,ue.delay(this._tickAndRepeat,[],this)),!0)},re.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(ue.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},re.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var _e=null,Oe=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":_e=this.data.substring(this.index,Oe);break;case"uint8array":_e=this.data.subarray(this.index,Oe);break;case"array":case"nodebuffer":_e=this.data.slice(this.index,Oe)}return this.index=Oe,this.push({data:_e,meta:{percent:this.max?this.index/this.max*100:0}})},wt.exports=re},{"../utils":32,"./GenericWorker":28}],28:[function(Me,wt,Ve){"use strict";function ue(Ce){this.name=Ce||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}ue.prototype={push:function(Ce){this.emit("data",Ce)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(Ce){this.emit("error",Ce)}return!0},error:function(Ce){return!this.isFinished&&(this.isPaused?this.generatedError=Ce:(this.isFinished=!0,this.emit("error",Ce),this.previous&&this.previous.error(Ce),this.cleanUp()),!0)},on:function(Ce,re){return this._listeners[Ce].push(re),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(Ce,re){if(this._listeners[Ce])for(var _e=0;_e<this._listeners[Ce].length;_e++)this._listeners[Ce][_e].call(this,re)},pipe:function(Ce){return Ce.registerPrevious(this)},registerPrevious:function(Ce){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=Ce.streamInfo,this.mergeStreamInfo(),this.previous=Ce;var re=this;return Ce.on("data",function(_e){re.processChunk(_e)}),Ce.on("end",function(){re.end()}),Ce.on("error",function(_e){re.error(_e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var Ce=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),Ce=!0),this.previous&&this.previous.resume(),!Ce},flush:function(){},processChunk:function(Ce){this.push(Ce)},withStreamInfo:function(Ce,re){return this.extraStreamInfo[Ce]=re,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var Ce in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(Ce)&&(this.streamInfo[Ce]=this.extraStreamInfo[Ce])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var Ce="Worker "+this.name;return this.previous?this.previous+" -> "+Ce:Ce}},wt.exports=ue},{}],29:[function(Me,wt,Ve){"use strict";var ue=Me("../utils"),Ce=Me("./ConvertWorker"),re=Me("./GenericWorker"),_e=Me("../base64"),Oe=Me("../support"),Be=Me("../external"),Re=null;if(Oe.nodestream)try{Re=Me("../nodejs/NodejsStreamOutputAdapter")}catch(we){}function le(we,Te,ae){var ge=Te;switch(Te){case"blob":case"arraybuffer":ge="uint8array";break;case"base64":ge="string"}try{this._internalType=ge,this._outputType=Te,this._mimeType=ae,ue.checkSupport(ge),this._worker=we.pipe(new Ce(ge)),we.lock()}catch(be){this._worker=new re("error"),this._worker.error(be)}}le.prototype={accumulate:function(we){return function Ne(we,Te){return new Be.Promise(function(ae,ge){var be=[],Ue=we._internalType,yt=we._outputType,je=we._mimeType;we.on("data",function(Ot,Dt){be.push(Ot),Te&&Te(Dt)}).on("error",function(Ot){be=[],ge(Ot)}).on("end",function(){try{var Ot=function(Dt,Yt,dt){switch(Dt){case"blob":return ue.newBlob(ue.transformTo("arraybuffer",Yt),dt);case"base64":return _e.encode(Yt);default:return ue.transformTo(Dt,Yt)}}(yt,function(Dt,Yt){var dt,jt=0,Vn=null,Ee=0;for(dt=0;dt<Yt.length;dt++)Ee+=Yt[dt].length;switch(Dt){case"string":return Yt.join("");case"array":return Array.prototype.concat.apply([],Yt);case"uint8array":for(Vn=new Uint8Array(Ee),dt=0;dt<Yt.length;dt++)Vn.set(Yt[dt],jt),jt+=Yt[dt].length;return Vn;case"nodebuffer":return Buffer.concat(Yt);default:throw new Error("concat : unsupported type '"+Dt+"'")}}(Ue,be),je);ae(Ot)}catch(Dt){ge(Dt)}be=[]}).resume()})}(this,we)},on:function(we,Te){var ae=this;return this._worker.on(we,"data"===we?function(ge){Te.call(ae,ge.data,ge.meta)}:function(){ue.delay(Te,arguments,ae)}),this},resume:function(){return ue.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(we){if(ue.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Re(this,{objectMode:"nodebuffer"!==this._outputType},we)}},wt.exports=le},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(Me,wt,Ve){"use strict";if(Ve.base64=!0,Ve.array=!0,Ve.string=!0,Ve.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,Ve.nodebuffer="undefined"!=typeof Buffer,Ve.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)Ve.blob=!1;else{var ue=new ArrayBuffer(0);try{Ve.blob=0===new Blob([ue],{type:"application/zip"}).size}catch(re){try{var Ce=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);Ce.append(ue),Ve.blob=0===Ce.getBlob("application/zip").size}catch(_e){Ve.blob=!1}}}try{Ve.nodestream=!!Me("readable-stream").Readable}catch(re){Ve.nodestream=!1}},{"readable-stream":16}],31:[function(Me,wt,Ve){"use strict";for(var ue=Me("./utils"),Ce=Me("./support"),re=Me("./nodejsUtils"),_e=Me("./stream/GenericWorker"),Oe=new Array(256),Be=0;Be<256;Be++)Oe[Be]=252<=Be?6:248<=Be?5:240<=Be?4:224<=Be?3:192<=Be?2:1;function Re(){_e.call(this,"utf-8 decode"),this.leftOver=null}function Ne(){_e.call(this,"utf-8 encode")}Oe[254]=Oe[254]=1,Ve.utf8encode=function(le){return Ce.nodebuffer?re.newBufferFrom(le,"utf-8"):function(we){var Te,ae,ge,be,Ue,yt=we.length,je=0;for(be=0;be<yt;be++)55296==(64512&(ae=we.charCodeAt(be)))&&be+1<yt&&56320==(64512&(ge=we.charCodeAt(be+1)))&&(ae=65536+(ae-55296<<10)+(ge-56320),be++),je+=ae<128?1:ae<2048?2:ae<65536?3:4;for(Te=Ce.uint8array?new Uint8Array(je):new Array(je),be=Ue=0;Ue<je;be++)55296==(64512&(ae=we.charCodeAt(be)))&&be+1<yt&&56320==(64512&(ge=we.charCodeAt(be+1)))&&(ae=65536+(ae-55296<<10)+(ge-56320),be++),ae<128?Te[Ue++]=ae:(ae<2048?Te[Ue++]=192|ae>>>6:(ae<65536?Te[Ue++]=224|ae>>>12:(Te[Ue++]=240|ae>>>18,Te[Ue++]=128|ae>>>12&63),Te[Ue++]=128|ae>>>6&63),Te[Ue++]=128|63&ae);return Te}(le)},Ve.utf8decode=function(le){return Ce.nodebuffer?ue.transformTo("nodebuffer",le).toString("utf-8"):function(we){var Te,ae,ge,be,Ue=we.length,yt=new Array(2*Ue);for(Te=ae=0;Te<Ue;)if((ge=we[Te++])<128)yt[ae++]=ge;else if(4<(be=Oe[ge]))yt[ae++]=65533,Te+=be-1;else{for(ge&=2===be?31:3===be?15:7;1<be&&Te<Ue;)ge=ge<<6|63&we[Te++],be--;1<be?yt[ae++]=65533:ge<65536?yt[ae++]=ge:(yt[ae++]=55296|(ge-=65536)>>10&1023,yt[ae++]=56320|1023&ge)}return yt.length!==ae&&(yt.subarray?yt=yt.subarray(0,ae):yt.length=ae),ue.applyFromCharCode(yt)}(le=ue.transformTo(Ce.uint8array?"uint8array":"array",le))},ue.inherits(Re,_e),Re.prototype.processChunk=function(le){var we=ue.transformTo(Ce.uint8array?"uint8array":"array",le.data);if(this.leftOver&&this.leftOver.length){if(Ce.uint8array){var Te=we;(we=new Uint8Array(Te.length+this.leftOver.length)).set(this.leftOver,0),we.set(Te,this.leftOver.length)}else we=this.leftOver.concat(we);this.leftOver=null}var ae=function(be,Ue){var yt;for((Ue=Ue||be.length)>be.length&&(Ue=be.length),yt=Ue-1;0<=yt&&128==(192&be[yt]);)yt--;return yt<0||0===yt?Ue:yt+Oe[be[yt]]>Ue?yt:Ue}(we),ge=we;ae!==we.length&&(Ce.uint8array?(ge=we.subarray(0,ae),this.leftOver=we.subarray(ae,we.length)):(ge=we.slice(0,ae),this.leftOver=we.slice(ae,we.length))),this.push({data:Ve.utf8decode(ge),meta:le.meta})},Re.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:Ve.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},Ve.Utf8DecodeWorker=Re,ue.inherits(Ne,_e),Ne.prototype.processChunk=function(le){this.push({data:Ve.utf8encode(le.data),meta:le.meta})},Ve.Utf8EncodeWorker=Ne},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(Me,wt,Ve){"use strict";var ue=Me("./support"),Ce=Me("./base64"),re=Me("./nodejsUtils"),_e=Me("set-immediate-shim"),Oe=Me("./external");function Be(ae){return ae}function Re(ae,ge){for(var be=0;be<ae.length;++be)ge[be]=255&ae.charCodeAt(be);return ge}Ve.newBlob=function(ae,ge){Ve.checkSupport("blob");try{return new Blob([ae],{type:ge})}catch(Ue){try{var be=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return be.append(ae),be.getBlob(ge)}catch(yt){throw new Error("Bug : can't construct the Blob.")}}};var Ne={stringifyByChunk:function(ae,ge,be){var Ue=[],yt=0,je=ae.length;if(je<=be)return String.fromCharCode.apply(null,ae);for(;yt<je;)Ue.push(String.fromCharCode.apply(null,"array"===ge||"nodebuffer"===ge?ae.slice(yt,Math.min(yt+be,je)):ae.subarray(yt,Math.min(yt+be,je)))),yt+=be;return Ue.join("")},stringifyByChar:function(ae){for(var ge="",be=0;be<ae.length;be++)ge+=String.fromCharCode(ae[be]);return ge},applyCanBeUsed:{uint8array:function(){try{return ue.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(ae){return!1}}(),nodebuffer:function(){try{return ue.nodebuffer&&1===String.fromCharCode.apply(null,re.allocBuffer(1)).length}catch(ae){return!1}}()}};function le(ae){var ge=65536,be=Ve.getTypeOf(ae),Ue=!0;if("uint8array"===be?Ue=Ne.applyCanBeUsed.uint8array:"nodebuffer"===be&&(Ue=Ne.applyCanBeUsed.nodebuffer),Ue)for(;1<ge;)try{return Ne.stringifyByChunk(ae,be,ge)}catch(yt){ge=Math.floor(ge/2)}return Ne.stringifyByChar(ae)}function we(ae,ge){for(var be=0;be<ae.length;be++)ge[be]=ae[be];return ge}Ve.applyFromCharCode=le;var Te={};Te.string={string:Be,array:function(ae){return Re(ae,new Array(ae.length))},arraybuffer:function(ae){return Te.string.uint8array(ae).buffer},uint8array:function(ae){return Re(ae,new Uint8Array(ae.length))},nodebuffer:function(ae){return Re(ae,re.allocBuffer(ae.length))}},Te.array={string:le,array:Be,arraybuffer:function(ae){return new Uint8Array(ae).buffer},uint8array:function(ae){return new Uint8Array(ae)},nodebuffer:function(ae){return re.newBufferFrom(ae)}},Te.arraybuffer={string:function(ae){return le(new Uint8Array(ae))},array:function(ae){return we(new Uint8Array(ae),new Array(ae.byteLength))},arraybuffer:Be,uint8array:function(ae){return new Uint8Array(ae)},nodebuffer:function(ae){return re.newBufferFrom(new Uint8Array(ae))}},Te.uint8array={string:le,array:function(ae){return we(ae,new Array(ae.length))},arraybuffer:function(ae){return ae.buffer},uint8array:Be,nodebuffer:function(ae){return re.newBufferFrom(ae)}},Te.nodebuffer={string:le,array:function(ae){return we(ae,new Array(ae.length))},arraybuffer:function(ae){return Te.nodebuffer.uint8array(ae).buffer},uint8array:function(ae){return we(ae,new Uint8Array(ae.length))},nodebuffer:Be},Ve.transformTo=function(ae,ge){if(ge=ge||"",!ae)return ge;Ve.checkSupport(ae);var be=Ve.getTypeOf(ge);return Te[be][ae](ge)},Ve.getTypeOf=function(ae){return"string"==typeof ae?"string":"[object Array]"===Object.prototype.toString.call(ae)?"array":ue.nodebuffer&&re.isBuffer(ae)?"nodebuffer":ue.uint8array&&ae instanceof Uint8Array?"uint8array":ue.arraybuffer&&ae instanceof ArrayBuffer?"arraybuffer":void 0},Ve.checkSupport=function(ae){if(!ue[ae.toLowerCase()])throw new Error(ae+" is not supported by this platform")},Ve.MAX_VALUE_16BITS=65535,Ve.MAX_VALUE_32BITS=-1,Ve.pretty=function(ae){var ge,be,Ue="";for(be=0;be<(ae||"").length;be++)Ue+="\\x"+((ge=ae.charCodeAt(be))<16?"0":"")+ge.toString(16).toUpperCase();return Ue},Ve.delay=function(ae,ge,be){_e(function(){ae.apply(be||null,ge||[])})},Ve.inherits=function(ae,ge){function be(){}be.prototype=ge.prototype,ae.prototype=new be},Ve.extend=function(){var ae,ge,be={};for(ae=0;ae<arguments.length;ae++)for(ge in arguments[ae])arguments[ae].hasOwnProperty(ge)&&void 0===be[ge]&&(be[ge]=arguments[ae][ge]);return be},Ve.prepareContent=function(ae,ge,be,Ue,yt){return Oe.Promise.resolve(ge).then(function(je){return ue.blob&&(je instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(je)))&&"undefined"!=typeof FileReader?new Oe.Promise(function(Ot,Dt){var Yt=new FileReader;Yt.onload=function(dt){Ot(dt.target.result)},Yt.onerror=function(dt){Dt(dt.target.error)},Yt.readAsArrayBuffer(je)}):je}).then(function(je){var Dt,Ot=Ve.getTypeOf(je);return Ot?("arraybuffer"===Ot?je=Ve.transformTo("uint8array",je):"string"===Ot&&(yt?je=Ce.decode(je):be&&!0!==Ue&&(je=Re(Dt=je,ue.uint8array?new Uint8Array(Dt.length):new Array(Dt.length)))),je):Oe.Promise.reject(new Error("Can't read the data of '"+ae+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(Me,wt,Ve){"use strict";var ue=Me("./reader/readerFor"),Ce=Me("./utils"),re=Me("./signature"),_e=Me("./zipEntry"),Oe=(Me("./utf8"),Me("./support"));function Be(Re){this.files=[],this.loadOptions=Re}Be.prototype={checkSignature:function(Re){if(!this.reader.readAndCheckSignature(Re)){this.reader.index-=4;var Ne=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+Ce.pretty(Ne)+", expected "+Ce.pretty(Re)+")")}},isSignature:function(Re,Ne){var le=this.reader.index;this.reader.setIndex(Re);var we=this.reader.readString(4)===Ne;return this.reader.setIndex(le),we},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Re=this.reader.readData(this.zipCommentLength),le=Ce.transformTo(Oe.uint8array?"uint8array":"array",Re);this.zipComment=this.loadOptions.decodeFileName(le)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Re,Ne,le,we=this.zip64EndOfCentralSize-44;0<we;)Re=this.reader.readInt(2),Ne=this.reader.readInt(4),le=this.reader.readData(Ne),this.zip64ExtensibleData[Re]={id:Re,length:Ne,value:le}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Re,Ne;for(Re=0;Re<this.files.length;Re++)this.reader.setIndex((Ne=this.files[Re]).localHeaderOffset),this.checkSignature(re.LOCAL_FILE_HEADER),Ne.readLocalPart(this.reader),Ne.handleUTF8(),Ne.processAttributes()},readCentralDir:function(){var Re;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(re.CENTRAL_FILE_HEADER);)(Re=new _e({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Re);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Re=this.reader.lastIndexOfSignature(re.CENTRAL_DIRECTORY_END);if(Re<0)throw this.isSignature(0,re.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Re);var Ne=Re;if(this.checkSignature(re.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===Ce.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Ce.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Ce.MAX_VALUE_16BITS||this.centralDirRecords===Ce.MAX_VALUE_16BITS||this.centralDirSize===Ce.MAX_VALUE_32BITS||this.centralDirOffset===Ce.MAX_VALUE_32BITS){if(this.zip64=!0,(Re=this.reader.lastIndexOfSignature(re.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Re),this.checkSignature(re.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,re.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(re.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(re.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var le=this.centralDirOffset+this.centralDirSize;this.zip64&&(le+=20,le+=12+this.zip64EndOfCentralSize);var we=Ne-le;if(0<we)this.isSignature(Ne,re.CENTRAL_FILE_HEADER)||(this.reader.zero=we);else if(we<0)throw new Error("Corrupted zip: missing "+Math.abs(we)+" bytes.")},prepareReader:function(Re){this.reader=ue(Re)},load:function(Re){this.prepareReader(Re),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},wt.exports=Be},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(Me,wt,Ve){"use strict";var ue=Me("./reader/readerFor"),Ce=Me("./utils"),re=Me("./compressedObject"),_e=Me("./crc32"),Oe=Me("./utf8"),Be=Me("./compressions"),Re=Me("./support");function Ne(le,we){this.options=le,this.loadOptions=we}Ne.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(le){var we,Te;if(le.skip(22),this.fileNameLength=le.readInt(2),Te=le.readInt(2),this.fileName=le.readData(this.fileNameLength),le.skip(Te),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(we=function(ae){for(var ge in Be)if(Be.hasOwnProperty(ge)&&Be[ge].magic===ae)return Be[ge];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+Ce.pretty(this.compressionMethod)+" unknown (inner file : "+Ce.transformTo("string",this.fileName)+")");this.decompressed=new re(this.compressedSize,this.uncompressedSize,this.crc32,we,le.readData(this.compressedSize))},readCentralPart:function(le){this.versionMadeBy=le.readInt(2),le.skip(2),this.bitFlag=le.readInt(2),this.compressionMethod=le.readString(2),this.date=le.readDate(),this.crc32=le.readInt(4),this.compressedSize=le.readInt(4),this.uncompressedSize=le.readInt(4);var we=le.readInt(2);if(this.extraFieldsLength=le.readInt(2),this.fileCommentLength=le.readInt(2),this.diskNumberStart=le.readInt(2),this.internalFileAttributes=le.readInt(2),this.externalFileAttributes=le.readInt(4),this.localHeaderOffset=le.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");le.skip(we),this.readExtraFields(le),this.parseZIP64ExtraField(le),this.fileComment=le.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var le=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==le&&(this.dosPermissions=63&this.externalFileAttributes),3==le&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(le){if(this.extraFields[1]){var we=ue(this.extraFields[1].value);this.uncompressedSize===Ce.MAX_VALUE_32BITS&&(this.uncompressedSize=we.readInt(8)),this.compressedSize===Ce.MAX_VALUE_32BITS&&(this.compressedSize=we.readInt(8)),this.localHeaderOffset===Ce.MAX_VALUE_32BITS&&(this.localHeaderOffset=we.readInt(8)),this.diskNumberStart===Ce.MAX_VALUE_32BITS&&(this.diskNumberStart=we.readInt(4))}},readExtraFields:function(le){var we,Te,ae,ge=le.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});le.index+4<ge;)we=le.readInt(2),Te=le.readInt(2),ae=le.readData(Te),this.extraFields[we]={id:we,length:Te,value:ae};le.setIndex(ge)},handleUTF8:function(){var le=Re.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Oe.utf8decode(this.fileName),this.fileCommentStr=Oe.utf8decode(this.fileComment);else{var we=this.findExtraFieldUnicodePath();if(null!==we)this.fileNameStr=we;else{var Te=Ce.transformTo(le,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Te)}var ae=this.findExtraFieldUnicodeComment();if(null!==ae)this.fileCommentStr=ae;else{var ge=Ce.transformTo(le,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ge)}}},findExtraFieldUnicodePath:function(){var le=this.extraFields[28789];if(le){var we=ue(le.value);return 1!==we.readInt(1)||_e(this.fileName)!==we.readInt(4)?null:Oe.utf8decode(we.readData(le.length-5))}return null},findExtraFieldUnicodeComment:function(){var le=this.extraFields[25461];if(le){var we=ue(le.value);return 1!==we.readInt(1)||_e(this.fileComment)!==we.readInt(4)?null:Oe.utf8decode(we.readData(le.length-5))}return null}},wt.exports=Ne},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(Me,wt,Ve){"use strict";function ue(we,Te,ae){this.name=we,this.dir=ae.dir,this.date=ae.date,this.comment=ae.comment,this.unixPermissions=ae.unixPermissions,this.dosPermissions=ae.dosPermissions,this._data=Te,this._dataBinary=ae.binary,this.options={compression:ae.compression,compressionOptions:ae.compressionOptions}}var Ce=Me("./stream/StreamHelper"),re=Me("./stream/DataWorker"),_e=Me("./utf8"),Oe=Me("./compressedObject"),Be=Me("./stream/GenericWorker");ue.prototype={internalStream:function(we){var Te=null,ae="string";try{if(!we)throw new Error("No output type specified.");var ge="string"===(ae=we.toLowerCase())||"text"===ae;"binarystring"!==ae&&"text"!==ae||(ae="string"),Te=this._decompressWorker();var be=!this._dataBinary;be&&!ge&&(Te=Te.pipe(new _e.Utf8EncodeWorker)),!be&&ge&&(Te=Te.pipe(new _e.Utf8DecodeWorker))}catch(Ue){(Te=new Be("error")).error(Ue)}return new Ce(Te,ae,"")},async:function(we,Te){return this.internalStream(we).accumulate(Te)},nodeStream:function(we,Te){return this.internalStream(we||"nodebuffer").toNodejsStream(Te)},_compressWorker:function(we,Te){if(this._data instanceof Oe&&this._data.compression.magic===we.magic)return this._data.getCompressedWorker();var ae=this._decompressWorker();return this._dataBinary||(ae=ae.pipe(new _e.Utf8EncodeWorker)),Oe.createWorkerFrom(ae,we,Te)},_decompressWorker:function(){return this._data instanceof Oe?this._data.getContentWorker():this._data instanceof Be?this._data:new re(this._data)}};for(var Re=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Ne=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},le=0;le<Re.length;le++)ue.prototype[Re[le]]=Ne;wt.exports=ue},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(Me,wt,Ve){(function(ue){"use strict";var Ce,re,_e=ue.MutationObserver||ue.WebKitMutationObserver;if(_e){var Oe=0,Be=new _e(we),Re=ue.document.createTextNode("");Be.observe(Re,{characterData:!0}),Ce=function(){Re.data=Oe=++Oe%2}}else if(ue.setImmediate||void 0===ue.MessageChannel)Ce="document"in ue&&"onreadystatechange"in ue.document.createElement("script")?function(){var Te=ue.document.createElement("script");Te.onreadystatechange=function(){we(),Te.onreadystatechange=null,Te.parentNode.removeChild(Te),Te=null},ue.document.documentElement.appendChild(Te)}:function(){setTimeout(we,0)};else{var Ne=new ue.MessageChannel;Ne.port1.onmessage=we,Ce=function(){Ne.port2.postMessage(0)}}var le=[];function we(){var Te,ae;re=!0;for(var ge=le.length;ge;){for(ae=le,le=[],Te=-1;++Te<ge;)ae[Te]();ge=le.length}re=!1}wt.exports=function(Te){1!==le.push(Te)||re||Ce()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(Me,wt,Ve){"use strict";var ue=Me("immediate");function Ce(){}var re={},_e=["REJECTED"],Oe=["FULFILLED"],Be=["PENDING"];function Re(ge){if("function"!=typeof ge)throw new TypeError("resolver must be a function");this.state=Be,this.queue=[],this.outcome=void 0,ge!==Ce&&Te(this,ge)}function Ne(ge,be,Ue){this.promise=ge,"function"==typeof be&&(this.onFulfilled=be,this.callFulfilled=this.otherCallFulfilled),"function"==typeof Ue&&(this.onRejected=Ue,this.callRejected=this.otherCallRejected)}function le(ge,be,Ue){ue(function(){var yt;try{yt=be(Ue)}catch(je){return re.reject(ge,je)}yt===ge?re.reject(ge,new TypeError("Cannot resolve promise with itself")):re.resolve(ge,yt)})}function we(ge){var be=ge&&ge.then;if(ge&&("object"==typeof ge||"function"==typeof ge)&&"function"==typeof be)return function(){be.apply(ge,arguments)}}function Te(ge,be){var Ue=!1;function yt(Dt){Ue||(Ue=!0,re.reject(ge,Dt))}function je(Dt){Ue||(Ue=!0,re.resolve(ge,Dt))}var Ot=ae(function(){be(je,yt)});"error"===Ot.status&&yt(Ot.value)}function ae(ge,be){var Ue={};try{Ue.value=ge(be),Ue.status="success"}catch(yt){Ue.status="error",Ue.value=yt}return Ue}(wt.exports=Re).prototype.finally=function(ge){if("function"!=typeof ge)return this;var be=this.constructor;return this.then(function(Ue){return be.resolve(ge()).then(function(){return Ue})},function(Ue){return be.resolve(ge()).then(function(){throw Ue})})},Re.prototype.catch=function(ge){return this.then(null,ge)},Re.prototype.then=function(ge,be){if("function"!=typeof ge&&this.state===Oe||"function"!=typeof be&&this.state===_e)return this;var Ue=new this.constructor(Ce);return this.state!==Be?le(Ue,this.state===Oe?ge:be,this.outcome):this.queue.push(new Ne(Ue,ge,be)),Ue},Ne.prototype.callFulfilled=function(ge){re.resolve(this.promise,ge)},Ne.prototype.otherCallFulfilled=function(ge){le(this.promise,this.onFulfilled,ge)},Ne.prototype.callRejected=function(ge){re.reject(this.promise,ge)},Ne.prototype.otherCallRejected=function(ge){le(this.promise,this.onRejected,ge)},re.resolve=function(ge,be){var Ue=ae(we,be);if("error"===Ue.status)return re.reject(ge,Ue.value);var yt=Ue.value;if(yt)Te(ge,yt);else{ge.state=Oe,ge.outcome=be;for(var je=-1,Ot=ge.queue.length;++je<Ot;)ge.queue[je].callFulfilled(be)}return ge},re.reject=function(ge,be){ge.state=_e,ge.outcome=be;for(var Ue=-1,yt=ge.queue.length;++Ue<yt;)ge.queue[Ue].callRejected(be);return ge},Re.resolve=function(ge){return ge instanceof this?ge:re.resolve(new this(Ce),ge)},Re.reject=function(ge){var be=new this(Ce);return re.reject(be,ge)},Re.all=function(ge){var be=this;if("[object Array]"!==Object.prototype.toString.call(ge))return this.reject(new TypeError("must be an array"));var Ue=ge.length,yt=!1;if(!Ue)return this.resolve([]);for(var je=new Array(Ue),Ot=0,Dt=-1,Yt=new this(Ce);++Dt<Ue;)dt(ge[Dt],Dt);return Yt;function dt(jt,Vn){be.resolve(jt).then(function(Ee){je[Vn]=Ee,++Ot!==Ue||yt||(yt=!0,re.resolve(Yt,je))},function(Ee){yt||(yt=!0,re.reject(Yt,Ee))})}},Re.race=function(ge){if("[object Array]"!==Object.prototype.toString.call(ge))return this.reject(new TypeError("must be an array"));var Ue=ge.length,yt=!1;if(!Ue)return this.resolve([]);for(var je=-1,Ot=new this(Ce);++je<Ue;)this.resolve(ge[je]).then(function(Yt){yt||(yt=!0,re.resolve(Ot,Yt))},function(Yt){yt||(yt=!0,re.reject(Ot,Yt))});return Ot}},{immediate:36}],38:[function(Me,wt,Ve){"use strict";var ue={};(0,Me("./lib/utils/common").assign)(ue,Me("./lib/deflate"),Me("./lib/inflate"),Me("./lib/zlib/constants")),wt.exports=ue},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(Me,wt,Ve){"use strict";var ue=Me("./zlib/deflate"),Ce=Me("./utils/common"),re=Me("./utils/strings"),_e=Me("./zlib/messages"),Oe=Me("./zlib/zstream"),Be=Object.prototype.toString;function Te(ge){if(!(this instanceof Te))return new Te(ge);this.options=Ce.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ge||{});var be=this.options;be.raw&&0<be.windowBits?be.windowBits=-be.windowBits:be.gzip&&0<be.windowBits&&be.windowBits<16&&(be.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Oe,this.strm.avail_out=0;var Ue=ue.deflateInit2(this.strm,be.level,be.method,be.windowBits,be.memLevel,be.strategy);if(0!==Ue)throw new Error(_e[Ue]);if(be.header&&ue.deflateSetHeader(this.strm,be.header),be.dictionary){var yt;if(yt="string"==typeof be.dictionary?re.string2buf(be.dictionary):"[object ArrayBuffer]"===Be.call(be.dictionary)?new Uint8Array(be.dictionary):be.dictionary,0!==(Ue=ue.deflateSetDictionary(this.strm,yt)))throw new Error(_e[Ue]);this._dict_set=!0}}function ae(ge,be){var Ue=new Te(be);if(Ue.push(ge,!0),Ue.err)throw Ue.msg||_e[Ue.err];return Ue.result}Te.prototype.push=function(ge,be){var Ue,yt,je=this.strm,Ot=this.options.chunkSize;if(this.ended)return!1;yt=be===~~be?be:!0===be?4:0,je.input="string"==typeof ge?re.string2buf(ge):"[object ArrayBuffer]"===Be.call(ge)?new Uint8Array(ge):ge,je.next_in=0,je.avail_in=je.input.length;do{if(0===je.avail_out&&(je.output=new Ce.Buf8(Ot),je.next_out=0,je.avail_out=Ot),1!==(Ue=ue.deflate(je,yt))&&0!==Ue)return this.onEnd(Ue),!(this.ended=!0);0!==je.avail_out&&(0!==je.avail_in||4!==yt&&2!==yt)||this.onData("string"===this.options.to?re.buf2binstring(Ce.shrinkBuf(je.output,je.next_out)):Ce.shrinkBuf(je.output,je.next_out))}while((0<je.avail_in||0===je.avail_out)&&1!==Ue);return 4===yt?(Ue=ue.deflateEnd(this.strm),this.onEnd(Ue),this.ended=!0,0===Ue):2!==yt||(this.onEnd(0),!(je.avail_out=0))},Te.prototype.onData=function(ge){this.chunks.push(ge)},Te.prototype.onEnd=function(ge){0===ge&&(this.result="string"===this.options.to?this.chunks.join(""):Ce.flattenChunks(this.chunks)),this.chunks=[],this.err=ge,this.msg=this.strm.msg},Ve.Deflate=Te,Ve.deflate=ae,Ve.deflateRaw=function(ge,be){return(be=be||{}).raw=!0,ae(ge,be)},Ve.gzip=function(ge,be){return(be=be||{}).gzip=!0,ae(ge,be)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(Me,wt,Ve){"use strict";var ue=Me("./zlib/inflate"),Ce=Me("./utils/common"),re=Me("./utils/strings"),_e=Me("./zlib/constants"),Oe=Me("./zlib/messages"),Be=Me("./zlib/zstream"),Re=Me("./zlib/gzheader"),Ne=Object.prototype.toString;function le(Te){if(!(this instanceof le))return new le(Te);this.options=Ce.assign({chunkSize:16384,windowBits:0,to:""},Te||{});var ae=this.options;ae.raw&&0<=ae.windowBits&&ae.windowBits<16&&(ae.windowBits=-ae.windowBits,0===ae.windowBits&&(ae.windowBits=-15)),!(0<=ae.windowBits&&ae.windowBits<16)||Te&&Te.windowBits||(ae.windowBits+=32),15<ae.windowBits&&ae.windowBits<48&&0==(15&ae.windowBits)&&(ae.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Be,this.strm.avail_out=0;var ge=ue.inflateInit2(this.strm,ae.windowBits);if(ge!==_e.Z_OK)throw new Error(Oe[ge]);this.header=new Re,ue.inflateGetHeader(this.strm,this.header)}function we(Te,ae){var ge=new le(ae);if(ge.push(Te,!0),ge.err)throw ge.msg||Oe[ge.err];return ge.result}le.prototype.push=function(Te,ae){var ge,be,Ue,yt,je,Ot,Dt=this.strm,Yt=this.options.chunkSize,dt=this.options.dictionary,jt=!1;if(this.ended)return!1;be=ae===~~ae?ae:!0===ae?_e.Z_FINISH:_e.Z_NO_FLUSH,Dt.input="string"==typeof Te?re.binstring2buf(Te):"[object ArrayBuffer]"===Ne.call(Te)?new Uint8Array(Te):Te,Dt.next_in=0,Dt.avail_in=Dt.input.length;do{if(0===Dt.avail_out&&(Dt.output=new Ce.Buf8(Yt),Dt.next_out=0,Dt.avail_out=Yt),(ge=ue.inflate(Dt,_e.Z_NO_FLUSH))===_e.Z_NEED_DICT&&dt&&(Ot="string"==typeof dt?re.string2buf(dt):"[object ArrayBuffer]"===Ne.call(dt)?new Uint8Array(dt):dt,ge=ue.inflateSetDictionary(this.strm,Ot)),ge===_e.Z_BUF_ERROR&&!0===jt&&(ge=_e.Z_OK,jt=!1),ge!==_e.Z_STREAM_END&&ge!==_e.Z_OK)return this.onEnd(ge),!(this.ended=!0);Dt.next_out&&(0!==Dt.avail_out&&ge!==_e.Z_STREAM_END&&(0!==Dt.avail_in||be!==_e.Z_FINISH&&be!==_e.Z_SYNC_FLUSH)||("string"===this.options.to?(Ue=re.utf8border(Dt.output,Dt.next_out),yt=Dt.next_out-Ue,je=re.buf2string(Dt.output,Ue),Dt.next_out=yt,Dt.avail_out=Yt-yt,yt&&Ce.arraySet(Dt.output,Dt.output,Ue,yt,0),this.onData(je)):this.onData(Ce.shrinkBuf(Dt.output,Dt.next_out)))),0===Dt.avail_in&&0===Dt.avail_out&&(jt=!0)}while((0<Dt.avail_in||0===Dt.avail_out)&&ge!==_e.Z_STREAM_END);return ge===_e.Z_STREAM_END&&(be=_e.Z_FINISH),be===_e.Z_FINISH?(ge=ue.inflateEnd(this.strm),this.onEnd(ge),this.ended=!0,ge===_e.Z_OK):be!==_e.Z_SYNC_FLUSH||(this.onEnd(_e.Z_OK),!(Dt.avail_out=0))},le.prototype.onData=function(Te){this.chunks.push(Te)},le.prototype.onEnd=function(Te){Te===_e.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):Ce.flattenChunks(this.chunks)),this.chunks=[],this.err=Te,this.msg=this.strm.msg},Ve.Inflate=le,Ve.inflate=we,Ve.inflateRaw=function(Te,ae){return(ae=ae||{}).raw=!0,we(Te,ae)},Ve.ungzip=we},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(Me,wt,Ve){"use strict";var ue="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;Ve.assign=function(_e){for(var Oe=Array.prototype.slice.call(arguments,1);Oe.length;){var Be=Oe.shift();if(Be){if("object"!=typeof Be)throw new TypeError(Be+"must be non-object");for(var Re in Be)Be.hasOwnProperty(Re)&&(_e[Re]=Be[Re])}}return _e},Ve.shrinkBuf=function(_e,Oe){return _e.length===Oe?_e:_e.subarray?_e.subarray(0,Oe):(_e.length=Oe,_e)};var Ce={arraySet:function(_e,Oe,Be,Re,Ne){if(Oe.subarray&&_e.subarray)_e.set(Oe.subarray(Be,Be+Re),Ne);else for(var le=0;le<Re;le++)_e[Ne+le]=Oe[Be+le]},flattenChunks:function(_e){var Oe,Be,Re,Ne,le,we;for(Oe=Re=0,Be=_e.length;Oe<Be;Oe++)Re+=_e[Oe].length;for(we=new Uint8Array(Re),Oe=Ne=0,Be=_e.length;Oe<Be;Oe++)we.set(le=_e[Oe],Ne),Ne+=le.length;return we}},re={arraySet:function(_e,Oe,Be,Re,Ne){for(var le=0;le<Re;le++)_e[Ne+le]=Oe[Be+le]},flattenChunks:function(_e){return[].concat.apply([],_e)}};Ve.setTyped=function(_e){_e?(Ve.Buf8=Uint8Array,Ve.Buf16=Uint16Array,Ve.Buf32=Int32Array,Ve.assign(Ve,Ce)):(Ve.Buf8=Array,Ve.Buf16=Array,Ve.Buf32=Array,Ve.assign(Ve,re))},Ve.setTyped(ue)},{}],42:[function(Me,wt,Ve){"use strict";var ue=Me("./common"),Ce=!0,re=!0;try{String.fromCharCode.apply(null,[0])}catch(Re){Ce=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Re){re=!1}for(var _e=new ue.Buf8(256),Oe=0;Oe<256;Oe++)_e[Oe]=252<=Oe?6:248<=Oe?5:240<=Oe?4:224<=Oe?3:192<=Oe?2:1;function Be(Re,Ne){if(Ne<65537&&(Re.subarray&&re||!Re.subarray&&Ce))return String.fromCharCode.apply(null,ue.shrinkBuf(Re,Ne));for(var le="",we=0;we<Ne;we++)le+=String.fromCharCode(Re[we]);return le}_e[254]=_e[254]=1,Ve.string2buf=function(Re){var Ne,le,we,Te,ae,ge=Re.length,be=0;for(Te=0;Te<ge;Te++)55296==(64512&(le=Re.charCodeAt(Te)))&&Te+1<ge&&56320==(64512&(we=Re.charCodeAt(Te+1)))&&(le=65536+(le-55296<<10)+(we-56320),Te++),be+=le<128?1:le<2048?2:le<65536?3:4;for(Ne=new ue.Buf8(be),Te=ae=0;ae<be;Te++)55296==(64512&(le=Re.charCodeAt(Te)))&&Te+1<ge&&56320==(64512&(we=Re.charCodeAt(Te+1)))&&(le=65536+(le-55296<<10)+(we-56320),Te++),le<128?Ne[ae++]=le:(le<2048?Ne[ae++]=192|le>>>6:(le<65536?Ne[ae++]=224|le>>>12:(Ne[ae++]=240|le>>>18,Ne[ae++]=128|le>>>12&63),Ne[ae++]=128|le>>>6&63),Ne[ae++]=128|63&le);return Ne},Ve.buf2binstring=function(Re){return Be(Re,Re.length)},Ve.binstring2buf=function(Re){for(var Ne=new ue.Buf8(Re.length),le=0,we=Ne.length;le<we;le++)Ne[le]=Re.charCodeAt(le);return Ne},Ve.buf2string=function(Re,Ne){var le,we,Te,ae,ge=Ne||Re.length,be=new Array(2*ge);for(le=we=0;le<ge;)if((Te=Re[le++])<128)be[we++]=Te;else if(4<(ae=_e[Te]))be[we++]=65533,le+=ae-1;else{for(Te&=2===ae?31:3===ae?15:7;1<ae&&le<ge;)Te=Te<<6|63&Re[le++],ae--;1<ae?be[we++]=65533:Te<65536?be[we++]=Te:(be[we++]=55296|(Te-=65536)>>10&1023,be[we++]=56320|1023&Te)}return Be(be,we)},Ve.utf8border=function(Re,Ne){var le;for((Ne=Ne||Re.length)>Re.length&&(Ne=Re.length),le=Ne-1;0<=le&&128==(192&Re[le]);)le--;return le<0||0===le?Ne:le+_e[Re[le]]>Ne?le:Ne}},{"./common":41}],43:[function(Me,wt,Ve){"use strict";wt.exports=function(ue,Ce,re,_e){for(var Oe=65535&ue|0,Be=ue>>>16&65535|0,Re=0;0!==re;){for(re-=Re=2e3<re?2e3:re;Be=Be+(Oe=Oe+Ce[_e++]|0)|0,--Re;);Oe%=65521,Be%=65521}return Oe|Be<<16|0}},{}],44:[function(Me,wt,Ve){"use strict";wt.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(Me,wt,Ve){"use strict";var ue=function(){for(var Ce,re=[],_e=0;_e<256;_e++){Ce=_e;for(var Oe=0;Oe<8;Oe++)Ce=1&Ce?3988292384^Ce>>>1:Ce>>>1;re[_e]=Ce}return re}();wt.exports=function(Ce,re,_e,Oe){var Be=ue,Re=Oe+_e;Ce^=-1;for(var Ne=Oe;Ne<Re;Ne++)Ce=Ce>>>8^Be[255&(Ce^re[Ne])];return-1^Ce}},{}],46:[function(Me,wt,Ve){"use strict";var ue,Ce=Me("../utils/common"),re=Me("./trees"),_e=Me("./adler32"),Oe=Me("./crc32"),Be=Me("./messages"),jt=258,Vn=262;function _n(Y,Tt){return Y.msg=Be[Tt],Tt}function Wt(Y){return(Y<<1)-(4<Y?9:0)}function qn(Y){for(var Tt=Y.length;0<=--Tt;)Y[Tt]=0}function ot(Y){var Tt=Y.state,ut=Tt.pending;ut>Y.avail_out&&(ut=Y.avail_out),0!==ut&&(Ce.arraySet(Y.output,Tt.pending_buf,Tt.pending_out,ut,Y.next_out),Y.next_out+=ut,Tt.pending_out+=ut,Y.total_out+=ut,Y.avail_out-=ut,Tt.pending-=ut,0===Tt.pending&&(Tt.pending_out=0))}function it(Y,Tt){re._tr_flush_block(Y,0<=Y.block_start?Y.block_start:-1,Y.strstart-Y.block_start,Tt),Y.block_start=Y.strstart,ot(Y.strm)}function pt(Y,Tt){Y.pending_buf[Y.pending++]=Tt}function gn(Y,Tt){Y.pending_buf[Y.pending++]=Tt>>>8&255,Y.pending_buf[Y.pending++]=255&Tt}function Jt(Y,Tt){var ut,ye,pe=Y.max_chain_length,He=Y.strstart,kt=Y.prev_length,Rt=Y.nice_match,Qe=Y.strstart>Y.w_size-Vn?Y.strstart-(Y.w_size-Vn):0,$t=Y.window,yn=Y.w_mask,Ht=Y.prev,Rn=Y.strstart+jt,Sr=$t[He+kt-1],Ui=$t[He+kt];Y.prev_length>=Y.good_match&&(pe>>=2),Rt>Y.lookahead&&(Rt=Y.lookahead);do{if($t[(ut=Tt)+kt]===Ui&&$t[ut+kt-1]===Sr&&$t[ut]===$t[He]&&$t[++ut]===$t[He+1]){He+=2,ut++;do{}while($t[++He]===$t[++ut]&&$t[++He]===$t[++ut]&&$t[++He]===$t[++ut]&&$t[++He]===$t[++ut]&&$t[++He]===$t[++ut]&&$t[++He]===$t[++ut]&&$t[++He]===$t[++ut]&&$t[++He]===$t[++ut]&&He<Rn);if(ye=jt-(Rn-He),He=Rn-jt,kt<ye){if(Y.match_start=Tt,Rt<=(kt=ye))break;Sr=$t[He+kt-1],Ui=$t[He+kt]}}}while((Tt=Ht[Tt&yn])>Qe&&0!=--pe);return kt<=Y.lookahead?kt:Y.lookahead}function mi(Y){var Tt,ut,ye,pe,He,kt,Rt,Qe,$t,yn,Ht=Y.w_size;do{if(pe=Y.window_size-Y.lookahead-Y.strstart,Y.strstart>=Ht+(Ht-Vn)){for(Ce.arraySet(Y.window,Y.window,Ht,Ht,0),Y.match_start-=Ht,Y.strstart-=Ht,Y.block_start-=Ht,Tt=ut=Y.hash_size;ye=Y.head[--Tt],Y.head[Tt]=Ht<=ye?ye-Ht:0,--ut;);for(Tt=ut=Ht;ye=Y.prev[--Tt],Y.prev[Tt]=Ht<=ye?ye-Ht:0,--ut;);pe+=Ht}if(0===Y.strm.avail_in)break;if(Rt=Y.window,Qe=Y.strstart+Y.lookahead,yn=void 0,($t=pe)<(yn=(kt=Y.strm).avail_in)&&(yn=$t),ut=0===yn?0:(kt.avail_in-=yn,Ce.arraySet(Rt,kt.input,kt.next_in,yn,Qe),1===kt.state.wrap?kt.adler=_e(kt.adler,Rt,yn,Qe):2===kt.state.wrap&&(kt.adler=Oe(kt.adler,Rt,yn,Qe)),kt.next_in+=yn,kt.total_in+=yn,yn),Y.lookahead+=ut,Y.lookahead+Y.insert>=3)for(Y.ins_h=Y.window[He=Y.strstart-Y.insert],Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[He+1])&Y.hash_mask;Y.insert&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[He+3-1])&Y.hash_mask,Y.prev[He&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=He,He++,Y.insert--,!(Y.lookahead+Y.insert<3)););}while(Y.lookahead<Vn&&0!==Y.strm.avail_in)}function Ri(Y,Tt){for(var ut,ye;;){if(Y.lookahead<Vn){if(mi(Y),Y.lookahead<Vn&&0===Tt)return 1;if(0===Y.lookahead)break}if(ut=0,Y.lookahead>=3&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+3-1])&Y.hash_mask,ut=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart),0!==ut&&Y.strstart-ut<=Y.w_size-Vn&&(Y.match_length=Jt(Y,ut)),Y.match_length>=3)if(ye=re._tr_tally(Y,Y.strstart-Y.match_start,Y.match_length-3),Y.lookahead-=Y.match_length,Y.match_length<=Y.max_lazy_match&&Y.lookahead>=3){for(Y.match_length--;Y.strstart++,Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+3-1])&Y.hash_mask,ut=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart,0!=--Y.match_length;);Y.strstart++}else Y.strstart+=Y.match_length,Y.match_length=0,Y.ins_h=Y.window[Y.strstart],Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+1])&Y.hash_mask;else ye=re._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++;if(ye&&(it(Y,!1),0===Y.strm.avail_out))return 1}return Y.insert=Y.strstart<2?Y.strstart:2,4===Tt?(it(Y,!0),0===Y.strm.avail_out?3:4):Y.last_lit&&(it(Y,!1),0===Y.strm.avail_out)?1:2}function hn(Y,Tt){for(var ut,ye,pe;;){if(Y.lookahead<Vn){if(mi(Y),Y.lookahead<Vn&&0===Tt)return 1;if(0===Y.lookahead)break}if(ut=0,Y.lookahead>=3&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+3-1])&Y.hash_mask,ut=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart),Y.prev_length=Y.match_length,Y.prev_match=Y.match_start,Y.match_length=2,0!==ut&&Y.prev_length<Y.max_lazy_match&&Y.strstart-ut<=Y.w_size-Vn&&(Y.match_length=Jt(Y,ut),Y.match_length<=5&&(1===Y.strategy||3===Y.match_length&&4096<Y.strstart-Y.match_start)&&(Y.match_length=2)),Y.prev_length>=3&&Y.match_length<=Y.prev_length){for(pe=Y.strstart+Y.lookahead-3,ye=re._tr_tally(Y,Y.strstart-1-Y.prev_match,Y.prev_length-3),Y.lookahead-=Y.prev_length-1,Y.prev_length-=2;++Y.strstart<=pe&&(Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[Y.strstart+3-1])&Y.hash_mask,ut=Y.prev[Y.strstart&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=Y.strstart),0!=--Y.prev_length;);if(Y.match_available=0,Y.match_length=2,Y.strstart++,ye&&(it(Y,!1),0===Y.strm.avail_out))return 1}else if(Y.match_available){if((ye=re._tr_tally(Y,0,Y.window[Y.strstart-1]))&&it(Y,!1),Y.strstart++,Y.lookahead--,0===Y.strm.avail_out)return 1}else Y.match_available=1,Y.strstart++,Y.lookahead--}return Y.match_available&&(ye=re._tr_tally(Y,0,Y.window[Y.strstart-1]),Y.match_available=0),Y.insert=Y.strstart<2?Y.strstart:2,4===Tt?(it(Y,!0),0===Y.strm.avail_out?3:4):Y.last_lit&&(it(Y,!1),0===Y.strm.avail_out)?1:2}function $i(Y,Tt,ut,ye,pe){this.good_length=Y,this.max_lazy=Tt,this.nice_length=ut,this.max_chain=ye,this.func=pe}function $s(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ce.Buf16(1146),this.dyn_dtree=new Ce.Buf16(122),this.bl_tree=new Ce.Buf16(78),qn(this.dyn_ltree),qn(this.dyn_dtree),qn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ce.Buf16(16),this.heap=new Ce.Buf16(573),qn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ce.Buf16(573),qn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function zr(Y){var Tt;return Y&&Y.state?(Y.total_in=Y.total_out=0,Y.data_type=2,(Tt=Y.state).pending=0,Tt.pending_out=0,Tt.wrap<0&&(Tt.wrap=-Tt.wrap),Tt.status=Tt.wrap?42:113,Y.adler=2===Tt.wrap?0:1,Tt.last_flush=0,re._tr_init(Tt),0):_n(Y,-2)}function vc(Y){var ut,Tt=zr(Y);return 0===Tt&&((ut=Y.state).window_size=2*ut.w_size,qn(ut.head),ut.max_lazy_match=ue[ut.level].max_lazy,ut.good_match=ue[ut.level].good_length,ut.nice_match=ue[ut.level].nice_length,ut.max_chain_length=ue[ut.level].max_chain,ut.strstart=0,ut.block_start=0,ut.lookahead=0,ut.insert=0,ut.match_length=ut.prev_length=2,ut.match_available=0,ut.ins_h=0),Tt}function as(Y,Tt,ut,ye,pe,He){if(!Y)return-2;var kt=1;if(-1===Tt&&(Tt=6),ye<0?(kt=0,ye=-ye):15<ye&&(kt=2,ye-=16),pe<1||9<pe||8!==ut||ye<8||15<ye||Tt<0||9<Tt||He<0||4<He)return _n(Y,-2);8===ye&&(ye=9);var Rt=new $s;return(Y.state=Rt).strm=Y,Rt.wrap=kt,Rt.gzhead=null,Rt.w_bits=ye,Rt.w_size=1<<Rt.w_bits,Rt.w_mask=Rt.w_size-1,Rt.hash_bits=pe+7,Rt.hash_size=1<<Rt.hash_bits,Rt.hash_mask=Rt.hash_size-1,Rt.hash_shift=~~((Rt.hash_bits+3-1)/3),Rt.window=new Ce.Buf8(2*Rt.w_size),Rt.head=new Ce.Buf16(Rt.hash_size),Rt.prev=new Ce.Buf16(Rt.w_size),Rt.lit_bufsize=1<<pe+6,Rt.pending_buf_size=4*Rt.lit_bufsize,Rt.pending_buf=new Ce.Buf8(Rt.pending_buf_size),Rt.d_buf=1*Rt.lit_bufsize,Rt.l_buf=3*Rt.lit_bufsize,Rt.level=Tt,Rt.strategy=He,Rt.method=ut,vc(Y)}ue=[new $i(0,0,0,0,function(Y,Tt){var ut=65535;for(ut>Y.pending_buf_size-5&&(ut=Y.pending_buf_size-5);;){if(Y.lookahead<=1){if(mi(Y),0===Y.lookahead&&0===Tt)return 1;if(0===Y.lookahead)break}Y.strstart+=Y.lookahead,Y.lookahead=0;var ye=Y.block_start+ut;if((0===Y.strstart||Y.strstart>=ye)&&(Y.lookahead=Y.strstart-ye,Y.strstart=ye,it(Y,!1),0===Y.strm.avail_out)||Y.strstart-Y.block_start>=Y.w_size-Vn&&(it(Y,!1),0===Y.strm.avail_out))return 1}return Y.insert=0,4===Tt?(it(Y,!0),0===Y.strm.avail_out?3:4):(Y.strstart>Y.block_start&&it(Y,!1),1)}),new $i(4,4,8,4,Ri),new $i(4,5,16,8,Ri),new $i(4,6,32,32,Ri),new $i(4,4,16,16,hn),new $i(8,16,32,32,hn),new $i(8,16,128,128,hn),new $i(8,32,128,256,hn),new $i(32,128,258,1024,hn),new $i(32,258,258,4096,hn)],Ve.deflateInit=function(Y,Tt){return as(Y,Tt,8,15,8,0)},Ve.deflateInit2=as,Ve.deflateReset=vc,Ve.deflateResetKeep=zr,Ve.deflateSetHeader=function(Y,Tt){return Y&&Y.state?2!==Y.state.wrap?-2:(Y.state.gzhead=Tt,0):-2},Ve.deflate=function(Y,Tt){var ut,ye,pe,He;if(!Y||!Y.state||5<Tt||Tt<0)return Y?_n(Y,-2):-2;if(ye=Y.state,!Y.output||!Y.input&&0!==Y.avail_in||666===ye.status&&4!==Tt)return _n(Y,0===Y.avail_out?-5:-2);if(ye.strm=Y,ut=ye.last_flush,ye.last_flush=Tt,42===ye.status)if(2===ye.wrap)Y.adler=0,pt(ye,31),pt(ye,139),pt(ye,8),ye.gzhead?(pt(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),pt(ye,255&ye.gzhead.time),pt(ye,ye.gzhead.time>>8&255),pt(ye,ye.gzhead.time>>16&255),pt(ye,ye.gzhead.time>>24&255),pt(ye,9===ye.level?2:2<=ye.strategy||ye.level<2?4:0),pt(ye,255&ye.gzhead.os),ye.gzhead.extra&&ye.gzhead.extra.length&&(pt(ye,255&ye.gzhead.extra.length),pt(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&(Y.adler=Oe(Y.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=69):(pt(ye,0),pt(ye,0),pt(ye,0),pt(ye,0),pt(ye,0),pt(ye,9===ye.level?2:2<=ye.strategy||ye.level<2?4:0),pt(ye,3),ye.status=113);else{var kt=8+(ye.w_bits-8<<4)<<8;kt|=(2<=ye.strategy||ye.level<2?0:ye.level<6?1:6===ye.level?2:3)<<6,0!==ye.strstart&&(kt|=32),kt+=31-kt%31,ye.status=113,gn(ye,kt),0!==ye.strstart&&(gn(ye,Y.adler>>>16),gn(ye,65535&Y.adler)),Y.adler=1}if(69===ye.status)if(ye.gzhead.extra){for(pe=ye.pending;ye.gzindex<(65535&ye.gzhead.extra.length)&&(ye.pending!==ye.pending_buf_size||(ye.gzhead.hcrc&&ye.pending>pe&&(Y.adler=Oe(Y.adler,ye.pending_buf,ye.pending-pe,pe)),ot(Y),pe=ye.pending,ye.pending!==ye.pending_buf_size));)pt(ye,255&ye.gzhead.extra[ye.gzindex]),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>pe&&(Y.adler=Oe(Y.adler,ye.pending_buf,ye.pending-pe,pe)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=73)}else ye.status=73;if(73===ye.status)if(ye.gzhead.name){pe=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>pe&&(Y.adler=Oe(Y.adler,ye.pending_buf,ye.pending-pe,pe)),ot(Y),pe=ye.pending,ye.pending===ye.pending_buf_size)){He=1;break}He=ye.gzindex<ye.gzhead.name.length?255&ye.gzhead.name.charCodeAt(ye.gzindex++):0,pt(ye,He)}while(0!==He);ye.gzhead.hcrc&&ye.pending>pe&&(Y.adler=Oe(Y.adler,ye.pending_buf,ye.pending-pe,pe)),0===He&&(ye.gzindex=0,ye.status=91)}else ye.status=91;if(91===ye.status)if(ye.gzhead.comment){pe=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>pe&&(Y.adler=Oe(Y.adler,ye.pending_buf,ye.pending-pe,pe)),ot(Y),pe=ye.pending,ye.pending===ye.pending_buf_size)){He=1;break}He=ye.gzindex<ye.gzhead.comment.length?255&ye.gzhead.comment.charCodeAt(ye.gzindex++):0,pt(ye,He)}while(0!==He);ye.gzhead.hcrc&&ye.pending>pe&&(Y.adler=Oe(Y.adler,ye.pending_buf,ye.pending-pe,pe)),0===He&&(ye.status=103)}else ye.status=103;if(103===ye.status&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&ot(Y),ye.pending+2<=ye.pending_buf_size&&(pt(ye,255&Y.adler),pt(ye,Y.adler>>8&255),Y.adler=0,ye.status=113)):ye.status=113),0!==ye.pending){if(ot(Y),0===Y.avail_out)return ye.last_flush=-1,0}else if(0===Y.avail_in&&Wt(Tt)<=Wt(ut)&&4!==Tt)return _n(Y,-5);if(666===ye.status&&0!==Y.avail_in)return _n(Y,-5);if(0!==Y.avail_in||0!==ye.lookahead||0!==Tt&&666!==ye.status){var Rt=2===ye.strategy?function(Qe,$t){for(var yn;;){if(0===Qe.lookahead&&(mi(Qe),0===Qe.lookahead)){if(0===$t)return 1;break}if(Qe.match_length=0,yn=re._tr_tally(Qe,0,Qe.window[Qe.strstart]),Qe.lookahead--,Qe.strstart++,yn&&(it(Qe,!1),0===Qe.strm.avail_out))return 1}return Qe.insert=0,4===$t?(it(Qe,!0),0===Qe.strm.avail_out?3:4):Qe.last_lit&&(it(Qe,!1),0===Qe.strm.avail_out)?1:2}(ye,Tt):3===ye.strategy?function(Qe,$t){for(var yn,Ht,Rn,Sr,Ui=Qe.window;;){if(Qe.lookahead<=jt){if(mi(Qe),Qe.lookahead<=jt&&0===$t)return 1;if(0===Qe.lookahead)break}if(Qe.match_length=0,Qe.lookahead>=3&&0<Qe.strstart&&(Ht=Ui[Rn=Qe.strstart-1])===Ui[++Rn]&&Ht===Ui[++Rn]&&Ht===Ui[++Rn]){Sr=Qe.strstart+jt;do{}while(Ht===Ui[++Rn]&&Ht===Ui[++Rn]&&Ht===Ui[++Rn]&&Ht===Ui[++Rn]&&Ht===Ui[++Rn]&&Ht===Ui[++Rn]&&Ht===Ui[++Rn]&&Ht===Ui[++Rn]&&Rn<Sr);Qe.match_length=jt-(Sr-Rn),Qe.match_length>Qe.lookahead&&(Qe.match_length=Qe.lookahead)}if(Qe.match_length>=3?(yn=re._tr_tally(Qe,1,Qe.match_length-3),Qe.lookahead-=Qe.match_length,Qe.strstart+=Qe.match_length,Qe.match_length=0):(yn=re._tr_tally(Qe,0,Qe.window[Qe.strstart]),Qe.lookahead--,Qe.strstart++),yn&&(it(Qe,!1),0===Qe.strm.avail_out))return 1}return Qe.insert=0,4===$t?(it(Qe,!0),0===Qe.strm.avail_out?3:4):Qe.last_lit&&(it(Qe,!1),0===Qe.strm.avail_out)?1:2}(ye,Tt):ue[ye.level].func(ye,Tt);if(3!==Rt&&4!==Rt||(ye.status=666),1===Rt||3===Rt)return 0===Y.avail_out&&(ye.last_flush=-1),0;if(2===Rt&&(1===Tt?re._tr_align(ye):5!==Tt&&(re._tr_stored_block(ye,0,0,!1),3===Tt&&(qn(ye.head),0===ye.lookahead&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),ot(Y),0===Y.avail_out))return ye.last_flush=-1,0}return 4!==Tt?0:ye.wrap<=0?1:(2===ye.wrap?(pt(ye,255&Y.adler),pt(ye,Y.adler>>8&255),pt(ye,Y.adler>>16&255),pt(ye,Y.adler>>24&255),pt(ye,255&Y.total_in),pt(ye,Y.total_in>>8&255),pt(ye,Y.total_in>>16&255),pt(ye,Y.total_in>>24&255)):(gn(ye,Y.adler>>>16),gn(ye,65535&Y.adler)),ot(Y),0<ye.wrap&&(ye.wrap=-ye.wrap),0!==ye.pending?0:1)},Ve.deflateEnd=function(Y){var Tt;return Y&&Y.state?42!==(Tt=Y.state.status)&&69!==Tt&&73!==Tt&&91!==Tt&&103!==Tt&&113!==Tt&&666!==Tt?_n(Y,-2):(Y.state=null,113===Tt?_n(Y,-3):0):-2},Ve.deflateSetDictionary=function(Y,Tt){var ut,ye,pe,He,kt,Rt,Qe,$t,yn=Tt.length;if(!Y||!Y.state||2===(He=(ut=Y.state).wrap)||1===He&&42!==ut.status||ut.lookahead)return-2;for(1===He&&(Y.adler=_e(Y.adler,Tt,yn,0)),ut.wrap=0,yn>=ut.w_size&&(0===He&&(qn(ut.head),ut.strstart=0,ut.block_start=0,ut.insert=0),$t=new Ce.Buf8(ut.w_size),Ce.arraySet($t,Tt,yn-ut.w_size,ut.w_size,0),Tt=$t,yn=ut.w_size),kt=Y.avail_in,Rt=Y.next_in,Qe=Y.input,Y.avail_in=yn,Y.next_in=0,Y.input=Tt,mi(ut);ut.lookahead>=3;){for(ye=ut.strstart,pe=ut.lookahead-2;ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ye+3-1])&ut.hash_mask,ut.prev[ye&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ye,ye++,--pe;);ut.strstart=ye,ut.lookahead=2,mi(ut)}return ut.strstart+=ut.lookahead,ut.block_start=ut.strstart,ut.insert=ut.lookahead,ut.lookahead=0,ut.match_length=ut.prev_length=2,ut.match_available=0,Y.next_in=Rt,Y.input=Qe,Y.avail_in=kt,ut.wrap=He,0},Ve.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(Me,wt,Ve){"use strict";wt.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(Me,wt,Ve){"use strict";wt.exports=function(ue,Ce){var re,_e,Oe,Be,Re,Ne,le,we,Te,ae,ge,be,Ue,yt,je,Ot,Dt,Yt,dt,jt,Vn,Ee,vt,Q,bt;Q=ue.input,Oe=(_e=ue.next_in)+(ue.avail_in-5),bt=ue.output,Re=(Be=ue.next_out)-(Ce-ue.avail_out),Ne=Be+(ue.avail_out-257),le=(re=ue.state).dmax,we=re.wsize,Te=re.whave,ae=re.wnext,ge=re.window,be=re.hold,Ue=re.bits,yt=re.lencode,je=re.distcode,Ot=(1<<re.lenbits)-1,Dt=(1<<re.distbits)-1;e:do{Ue<15&&(be+=Q[_e++]<<Ue,be+=Q[_e++]<<(Ue+=8),Ue+=8),Yt=yt[be&Ot];t:for(;;){if(be>>>=dt=Yt>>>24,Ue-=dt,0==(dt=Yt>>>16&255))bt[Be++]=65535&Yt;else{if(!(16&dt)){if(0==(64&dt)){Yt=yt[(65535&Yt)+(be&(1<<dt)-1)];continue t}if(32&dt){re.mode=12;break e}ue.msg="invalid literal/length code",re.mode=30;break e}jt=65535&Yt,(dt&=15)&&(Ue<dt&&(be+=Q[_e++]<<Ue,Ue+=8),jt+=be&(1<<dt)-1,be>>>=dt,Ue-=dt),Ue<15&&(be+=Q[_e++]<<Ue,be+=Q[_e++]<<(Ue+=8),Ue+=8),Yt=je[be&Dt];n:for(;;){if(be>>>=dt=Yt>>>24,Ue-=dt,!(16&(dt=Yt>>>16&255))){if(0==(64&dt)){Yt=je[(65535&Yt)+(be&(1<<dt)-1)];continue n}ue.msg="invalid distance code",re.mode=30;break e}if(Vn=65535&Yt,Ue<(dt&=15)&&(be+=Q[_e++]<<Ue,(Ue+=8)<dt&&(be+=Q[_e++]<<Ue,Ue+=8)),le<(Vn+=be&(1<<dt)-1)){ue.msg="invalid distance too far back",re.mode=30;break e}if(be>>>=dt,Ue-=dt,(dt=Be-Re)<Vn){if(Te<(dt=Vn-dt)&&re.sane){ue.msg="invalid distance too far back",re.mode=30;break e}if(vt=ge,(Ee=0)===ae){if(Ee+=we-dt,dt<jt){for(jt-=dt;bt[Be++]=ge[Ee++],--dt;);Ee=Be-Vn,vt=bt}}else if(ae<dt){if(Ee+=we+ae-dt,(dt-=ae)<jt){for(jt-=dt;bt[Be++]=ge[Ee++],--dt;);if(Ee=0,ae<jt){for(jt-=dt=ae;bt[Be++]=ge[Ee++],--dt;);Ee=Be-Vn,vt=bt}}}else if(Ee+=ae-dt,dt<jt){for(jt-=dt;bt[Be++]=ge[Ee++],--dt;);Ee=Be-Vn,vt=bt}for(;2<jt;)bt[Be++]=vt[Ee++],bt[Be++]=vt[Ee++],bt[Be++]=vt[Ee++],jt-=3;jt&&(bt[Be++]=vt[Ee++],1<jt&&(bt[Be++]=vt[Ee++]))}else{for(Ee=Be-Vn;bt[Be++]=bt[Ee++],bt[Be++]=bt[Ee++],bt[Be++]=bt[Ee++],2<(jt-=3););jt&&(bt[Be++]=bt[Ee++],1<jt&&(bt[Be++]=bt[Ee++]))}break}}break}}while(_e<Oe&&Be<Ne);_e-=jt=Ue>>3,be&=(1<<(Ue-=jt<<3))-1,ue.next_in=_e,ue.next_out=Be,ue.avail_in=_e<Oe?Oe-_e+5:5-(_e-Oe),ue.avail_out=Be<Ne?Ne-Be+257:257-(Be-Ne),re.hold=be,re.bits=Ue}},{}],49:[function(Me,wt,Ve){"use strict";var ue=Me("../utils/common"),Ce=Me("./adler32"),re=Me("./crc32"),_e=Me("./inffast"),Oe=Me("./inftrees");function ge(Ee){return(Ee>>>24&255)+(Ee>>>8&65280)+((65280&Ee)<<8)+((255&Ee)<<24)}function be(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ue.Buf16(320),this.work=new ue.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ue(Ee){var vt;return Ee&&Ee.state?(Ee.total_in=Ee.total_out=(vt=Ee.state).total=0,Ee.msg="",vt.wrap&&(Ee.adler=1&vt.wrap),vt.mode=1,vt.last=0,vt.havedict=0,vt.dmax=32768,vt.head=null,vt.hold=0,vt.bits=0,vt.lencode=vt.lendyn=new ue.Buf32(852),vt.distcode=vt.distdyn=new ue.Buf32(592),vt.sane=1,vt.back=-1,0):-2}function yt(Ee){var vt;return Ee&&Ee.state?((vt=Ee.state).wsize=0,vt.whave=0,vt.wnext=0,Ue(Ee)):-2}function je(Ee,vt){var Q,bt;return Ee&&Ee.state?(bt=Ee.state,vt<0?(Q=0,vt=-vt):(Q=1+(vt>>4),vt<48&&(vt&=15)),vt&&(vt<8||15<vt)?-2:(null!==bt.window&&bt.wbits!==vt&&(bt.window=null),bt.wrap=Q,bt.wbits=vt,yt(Ee))):-2}function Ot(Ee,vt){var Q,bt;return Ee?(bt=new be,(Ee.state=bt).window=null,0!==(Q=je(Ee,vt))&&(Ee.state=null),Q):-2}var Dt,Yt,dt=!0;function jt(Ee){if(dt){var vt;for(Dt=new ue.Buf32(512),Yt=new ue.Buf32(32),vt=0;vt<144;)Ee.lens[vt++]=8;for(;vt<256;)Ee.lens[vt++]=9;for(;vt<280;)Ee.lens[vt++]=7;for(;vt<288;)Ee.lens[vt++]=8;for(Oe(1,Ee.lens,0,288,Dt,0,Ee.work,{bits:9}),vt=0;vt<32;)Ee.lens[vt++]=5;Oe(2,Ee.lens,0,32,Yt,0,Ee.work,{bits:5}),dt=!1}Ee.lencode=Dt,Ee.lenbits=9,Ee.distcode=Yt,Ee.distbits=5}function Vn(Ee,vt,Q,bt){var si,Lt=Ee.state;return null===Lt.window&&(Lt.wsize=1<<Lt.wbits,Lt.wnext=0,Lt.whave=0,Lt.window=new ue.Buf8(Lt.wsize)),bt>=Lt.wsize?(ue.arraySet(Lt.window,vt,Q-Lt.wsize,Lt.wsize,0),Lt.wnext=0,Lt.whave=Lt.wsize):(bt<(si=Lt.wsize-Lt.wnext)&&(si=bt),ue.arraySet(Lt.window,vt,Q-bt,si,Lt.wnext),(bt-=si)?(ue.arraySet(Lt.window,vt,Q-bt,bt,0),Lt.wnext=bt,Lt.whave=Lt.wsize):(Lt.wnext+=si,Lt.wnext===Lt.wsize&&(Lt.wnext=0),Lt.whave<Lt.wsize&&(Lt.whave+=si))),0}Ve.inflateReset=yt,Ve.inflateReset2=je,Ve.inflateResetKeep=Ue,Ve.inflateInit=function(Ee){return Ot(Ee,15)},Ve.inflateInit2=Ot,Ve.inflate=function(Ee,vt){var Q,bt,si,Lt,_n,Wt,qn,ot,it,pt,gn,Jt,mi,Ri,hn,$i,$s,zr,vc,as,Y,Tt,ut,ye,pe=0,He=new ue.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Ee||!Ee.state||!Ee.output||!Ee.input&&0!==Ee.avail_in)return-2;12===(Q=Ee.state).mode&&(Q.mode=13),_n=Ee.next_out,si=Ee.output,Lt=Ee.next_in,bt=Ee.input,ot=Q.hold,it=Q.bits,pt=Wt=Ee.avail_in,gn=qn=Ee.avail_out,Tt=0;e:for(;;)switch(Q.mode){case 1:if(0===Q.wrap){Q.mode=13;break}for(;it<16;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if(2&Q.wrap&&35615===ot){He[Q.check=0]=255&ot,He[1]=ot>>>8&255,Q.check=re(Q.check,He,2,0),it=ot=0,Q.mode=2;break}if(Q.flags=0,Q.head&&(Q.head.done=!1),!(1&Q.wrap)||(((255&ot)<<8)+(ot>>8))%31){Ee.msg="incorrect header check",Q.mode=30;break}if(8!=(15&ot)){Ee.msg="unknown compression method",Q.mode=30;break}if(it-=4,Y=8+(15&(ot>>>=4)),0===Q.wbits)Q.wbits=Y;else if(Y>Q.wbits){Ee.msg="invalid window size",Q.mode=30;break}Q.dmax=1<<Y,Ee.adler=Q.check=1,Q.mode=512&ot?10:12,it=ot=0;break;case 2:for(;it<16;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if(Q.flags=ot,8!=(255&Q.flags)){Ee.msg="unknown compression method",Q.mode=30;break}if(57344&Q.flags){Ee.msg="unknown header flags set",Q.mode=30;break}Q.head&&(Q.head.text=ot>>8&1),512&Q.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,Q.check=re(Q.check,He,2,0)),it=ot=0,Q.mode=3;case 3:for(;it<32;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}Q.head&&(Q.head.time=ot),512&Q.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,He[2]=ot>>>16&255,He[3]=ot>>>24&255,Q.check=re(Q.check,He,4,0)),it=ot=0,Q.mode=4;case 4:for(;it<16;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}Q.head&&(Q.head.xflags=255&ot,Q.head.os=ot>>8),512&Q.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,Q.check=re(Q.check,He,2,0)),it=ot=0,Q.mode=5;case 5:if(1024&Q.flags){for(;it<16;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}Q.length=ot,Q.head&&(Q.head.extra_len=ot),512&Q.flags&&(He[0]=255&ot,He[1]=ot>>>8&255,Q.check=re(Q.check,He,2,0)),it=ot=0}else Q.head&&(Q.head.extra=null);Q.mode=6;case 6:if(1024&Q.flags&&(Wt<(Jt=Q.length)&&(Jt=Wt),Jt&&(Q.head&&(Y=Q.head.extra_len-Q.length,Q.head.extra||(Q.head.extra=new Array(Q.head.extra_len)),ue.arraySet(Q.head.extra,bt,Lt,Jt,Y)),512&Q.flags&&(Q.check=re(Q.check,bt,Jt,Lt)),Wt-=Jt,Lt+=Jt,Q.length-=Jt),Q.length))break e;Q.length=0,Q.mode=7;case 7:if(2048&Q.flags){if(0===Wt)break e;for(Jt=0;Y=bt[Lt+Jt++],Q.head&&Y&&Q.length<65536&&(Q.head.name+=String.fromCharCode(Y)),Y&&Jt<Wt;);if(512&Q.flags&&(Q.check=re(Q.check,bt,Jt,Lt)),Wt-=Jt,Lt+=Jt,Y)break e}else Q.head&&(Q.head.name=null);Q.length=0,Q.mode=8;case 8:if(4096&Q.flags){if(0===Wt)break e;for(Jt=0;Y=bt[Lt+Jt++],Q.head&&Y&&Q.length<65536&&(Q.head.comment+=String.fromCharCode(Y)),Y&&Jt<Wt;);if(512&Q.flags&&(Q.check=re(Q.check,bt,Jt,Lt)),Wt-=Jt,Lt+=Jt,Y)break e}else Q.head&&(Q.head.comment=null);Q.mode=9;case 9:if(512&Q.flags){for(;it<16;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if(ot!==(65535&Q.check)){Ee.msg="header crc mismatch",Q.mode=30;break}it=ot=0}Q.head&&(Q.head.hcrc=Q.flags>>9&1,Q.head.done=!0),Ee.adler=Q.check=0,Q.mode=12;break;case 10:for(;it<32;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}Ee.adler=Q.check=ge(ot),it=ot=0,Q.mode=11;case 11:if(0===Q.havedict)return Ee.next_out=_n,Ee.avail_out=qn,Ee.next_in=Lt,Ee.avail_in=Wt,Q.hold=ot,Q.bits=it,2;Ee.adler=Q.check=1,Q.mode=12;case 12:if(5===vt||6===vt)break e;case 13:if(Q.last){ot>>>=7&it,it-=7&it,Q.mode=27;break}for(;it<3;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}switch(Q.last=1&ot,it-=1,3&(ot>>>=1)){case 0:Q.mode=14;break;case 1:if(jt(Q),Q.mode=20,6!==vt)break;ot>>>=2,it-=2;break e;case 2:Q.mode=17;break;case 3:Ee.msg="invalid block type",Q.mode=30}ot>>>=2,it-=2;break;case 14:for(ot>>>=7&it,it-=7&it;it<32;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if((65535&ot)!=(ot>>>16^65535)){Ee.msg="invalid stored block lengths",Q.mode=30;break}if(Q.length=65535&ot,it=ot=0,Q.mode=15,6===vt)break e;case 15:Q.mode=16;case 16:if(Jt=Q.length){if(Wt<Jt&&(Jt=Wt),qn<Jt&&(Jt=qn),0===Jt)break e;ue.arraySet(si,bt,Lt,Jt,_n),Wt-=Jt,Lt+=Jt,qn-=Jt,_n+=Jt,Q.length-=Jt;break}Q.mode=12;break;case 17:for(;it<14;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if(Q.nlen=257+(31&ot),it-=5,Q.ndist=1+(31&(ot>>>=5)),it-=5,Q.ncode=4+(15&(ot>>>=5)),ot>>>=4,it-=4,286<Q.nlen||30<Q.ndist){Ee.msg="too many length or distance symbols",Q.mode=30;break}Q.have=0,Q.mode=18;case 18:for(;Q.have<Q.ncode;){for(;it<3;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}Q.lens[kt[Q.have++]]=7&ot,ot>>>=3,it-=3}for(;Q.have<19;)Q.lens[kt[Q.have++]]=0;if(Q.lencode=Q.lendyn,Q.lenbits=7,Tt=Oe(0,Q.lens,0,19,Q.lencode,0,Q.work,ut={bits:Q.lenbits}),Q.lenbits=ut.bits,Tt){Ee.msg="invalid code lengths set",Q.mode=30;break}Q.have=0,Q.mode=19;case 19:for(;Q.have<Q.nlen+Q.ndist;){for(;$i=(pe=Q.lencode[ot&(1<<Q.lenbits)-1])>>>16&255,$s=65535&pe,!((hn=pe>>>24)<=it);){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if($s<16)ot>>>=hn,it-=hn,Q.lens[Q.have++]=$s;else{if(16===$s){for(ye=hn+2;it<ye;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if(ot>>>=hn,it-=hn,0===Q.have){Ee.msg="invalid bit length repeat",Q.mode=30;break}Y=Q.lens[Q.have-1],Jt=3+(3&ot),ot>>>=2,it-=2}else if(17===$s){for(ye=hn+3;it<ye;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}it-=hn,Y=0,Jt=3+(7&(ot>>>=hn)),ot>>>=3,it-=3}else{for(ye=hn+7;it<ye;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}it-=hn,Y=0,Jt=11+(127&(ot>>>=hn)),ot>>>=7,it-=7}if(Q.have+Jt>Q.nlen+Q.ndist){Ee.msg="invalid bit length repeat",Q.mode=30;break}for(;Jt--;)Q.lens[Q.have++]=Y}}if(30===Q.mode)break;if(0===Q.lens[256]){Ee.msg="invalid code -- missing end-of-block",Q.mode=30;break}if(Q.lenbits=9,Tt=Oe(1,Q.lens,0,Q.nlen,Q.lencode,0,Q.work,ut={bits:Q.lenbits}),Q.lenbits=ut.bits,Tt){Ee.msg="invalid literal/lengths set",Q.mode=30;break}if(Q.distbits=6,Q.distcode=Q.distdyn,Tt=Oe(2,Q.lens,Q.nlen,Q.ndist,Q.distcode,0,Q.work,ut={bits:Q.distbits}),Q.distbits=ut.bits,Tt){Ee.msg="invalid distances set",Q.mode=30;break}if(Q.mode=20,6===vt)break e;case 20:Q.mode=21;case 21:if(6<=Wt&&258<=qn){Ee.next_out=_n,Ee.avail_out=qn,Ee.next_in=Lt,Ee.avail_in=Wt,Q.hold=ot,Q.bits=it,_e(Ee,gn),_n=Ee.next_out,si=Ee.output,qn=Ee.avail_out,Lt=Ee.next_in,bt=Ee.input,Wt=Ee.avail_in,ot=Q.hold,it=Q.bits,12===Q.mode&&(Q.back=-1);break}for(Q.back=0;$i=(pe=Q.lencode[ot&(1<<Q.lenbits)-1])>>>16&255,$s=65535&pe,!((hn=pe>>>24)<=it);){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if($i&&0==(240&$i)){for(zr=hn,vc=$i,as=$s;$i=(pe=Q.lencode[as+((ot&(1<<zr+vc)-1)>>zr)])>>>16&255,$s=65535&pe,!(zr+(hn=pe>>>24)<=it);){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}ot>>>=zr,it-=zr,Q.back+=zr}if(ot>>>=hn,it-=hn,Q.back+=hn,Q.length=$s,0===$i){Q.mode=26;break}if(32&$i){Q.back=-1,Q.mode=12;break}if(64&$i){Ee.msg="invalid literal/length code",Q.mode=30;break}Q.extra=15&$i,Q.mode=22;case 22:if(Q.extra){for(ye=Q.extra;it<ye;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}Q.length+=ot&(1<<Q.extra)-1,ot>>>=Q.extra,it-=Q.extra,Q.back+=Q.extra}Q.was=Q.length,Q.mode=23;case 23:for(;$i=(pe=Q.distcode[ot&(1<<Q.distbits)-1])>>>16&255,$s=65535&pe,!((hn=pe>>>24)<=it);){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if(0==(240&$i)){for(zr=hn,vc=$i,as=$s;$i=(pe=Q.distcode[as+((ot&(1<<zr+vc)-1)>>zr)])>>>16&255,$s=65535&pe,!(zr+(hn=pe>>>24)<=it);){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}ot>>>=zr,it-=zr,Q.back+=zr}if(ot>>>=hn,it-=hn,Q.back+=hn,64&$i){Ee.msg="invalid distance code",Q.mode=30;break}Q.offset=$s,Q.extra=15&$i,Q.mode=24;case 24:if(Q.extra){for(ye=Q.extra;it<ye;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}Q.offset+=ot&(1<<Q.extra)-1,ot>>>=Q.extra,it-=Q.extra,Q.back+=Q.extra}if(Q.offset>Q.dmax){Ee.msg="invalid distance too far back",Q.mode=30;break}Q.mode=25;case 25:if(0===qn)break e;if(Q.offset>(Jt=gn-qn)){if((Jt=Q.offset-Jt)>Q.whave&&Q.sane){Ee.msg="invalid distance too far back",Q.mode=30;break}mi=Jt>Q.wnext?Q.wsize-(Jt-=Q.wnext):Q.wnext-Jt,Jt>Q.length&&(Jt=Q.length),Ri=Q.window}else Ri=si,mi=_n-Q.offset,Jt=Q.length;for(qn<Jt&&(Jt=qn),qn-=Jt,Q.length-=Jt;si[_n++]=Ri[mi++],--Jt;);0===Q.length&&(Q.mode=21);break;case 26:if(0===qn)break e;si[_n++]=Q.length,qn--,Q.mode=21;break;case 27:if(Q.wrap){for(;it<32;){if(0===Wt)break e;Wt--,ot|=bt[Lt++]<<it,it+=8}if(Ee.total_out+=gn-=qn,Q.total+=gn,gn&&(Ee.adler=Q.check=Q.flags?re(Q.check,si,gn,_n-gn):Ce(Q.check,si,gn,_n-gn)),gn=qn,(Q.flags?ot:ge(ot))!==Q.check){Ee.msg="incorrect data check",Q.mode=30;break}it=ot=0}Q.mode=28;case 28:if(Q.wrap&&Q.flags){for(;it<32;){if(0===Wt)break e;Wt--,ot+=bt[Lt++]<<it,it+=8}if(ot!==(4294967295&Q.total)){Ee.msg="incorrect length check",Q.mode=30;break}it=ot=0}Q.mode=29;case 29:Tt=1;break e;case 30:Tt=-3;break e;case 31:return-4;default:return-2}return Ee.next_out=_n,Ee.avail_out=qn,Ee.next_in=Lt,Ee.avail_in=Wt,Q.hold=ot,Q.bits=it,(Q.wsize||gn!==Ee.avail_out&&Q.mode<30&&(Q.mode<27||4!==vt))&&Vn(Ee,Ee.output,Ee.next_out,gn-Ee.avail_out)?(Q.mode=31,-4):(gn-=Ee.avail_out,Ee.total_in+=pt-=Ee.avail_in,Ee.total_out+=gn,Q.total+=gn,Q.wrap&&gn&&(Ee.adler=Q.check=Q.flags?re(Q.check,si,gn,Ee.next_out-gn):Ce(Q.check,si,gn,Ee.next_out-gn)),Ee.data_type=Q.bits+(Q.last?64:0)+(12===Q.mode?128:0)+(20===Q.mode||15===Q.mode?256:0),(0==pt&&0===gn||4===vt)&&0===Tt&&(Tt=-5),Tt)},Ve.inflateEnd=function(Ee){if(!Ee||!Ee.state)return-2;var vt=Ee.state;return vt.window&&(vt.window=null),Ee.state=null,0},Ve.inflateGetHeader=function(Ee,vt){var Q;return Ee&&Ee.state?0==(2&(Q=Ee.state).wrap)?-2:((Q.head=vt).done=!1,0):-2},Ve.inflateSetDictionary=function(Ee,vt){var Q,bt=vt.length;return Ee&&Ee.state?0!==(Q=Ee.state).wrap&&11!==Q.mode?-2:11===Q.mode&&Ce(1,vt,bt,0)!==Q.check?-3:Vn(Ee,vt,bt,bt)?(Q.mode=31,-4):(Q.havedict=1,0):-2},Ve.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(Me,wt,Ve){"use strict";var ue=Me("../utils/common"),Ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],re=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Oe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];wt.exports=function(Be,Re,Ne,le,we,Te,ae,ge){var be,Ue,yt,je,Ot,Dt,Yt,dt,jt,Vn=ge.bits,Ee=0,vt=0,Q=0,bt=0,si=0,Lt=0,_n=0,Wt=0,qn=0,ot=0,it=null,pt=0,gn=new ue.Buf16(16),Jt=new ue.Buf16(16),mi=null,Ri=0;for(Ee=0;Ee<=15;Ee++)gn[Ee]=0;for(vt=0;vt<le;vt++)gn[Re[Ne+vt]]++;for(si=Vn,bt=15;1<=bt&&0===gn[bt];bt--);if(bt<si&&(si=bt),0===bt)return we[Te++]=20971520,we[Te++]=20971520,ge.bits=1,0;for(Q=1;Q<bt&&0===gn[Q];Q++);for(si<Q&&(si=Q),Ee=Wt=1;Ee<=15;Ee++)if(Wt<<=1,(Wt-=gn[Ee])<0)return-1;if(0<Wt&&(0===Be||1!==bt))return-1;for(Jt[1]=0,Ee=1;Ee<15;Ee++)Jt[Ee+1]=Jt[Ee]+gn[Ee];for(vt=0;vt<le;vt++)0!==Re[Ne+vt]&&(ae[Jt[Re[Ne+vt]]++]=vt);if(Dt=0===Be?(it=mi=ae,19):1===Be?(it=Ce,pt-=257,mi=re,Ri-=257,256):(it=_e,mi=Oe,-1),Ee=Q,Ot=Te,_n=vt=ot=0,yt=-1,je=(qn=1<<(Lt=si))-1,1===Be&&852<qn||2===Be&&592<qn)return 1;for(;;){for(Yt=Ee-_n,jt=ae[vt]<Dt?(dt=0,ae[vt]):ae[vt]>Dt?(dt=mi[Ri+ae[vt]],it[pt+ae[vt]]):(dt=96,0),be=1<<Ee-_n,Q=Ue=1<<Lt;we[Ot+(ot>>_n)+(Ue-=be)]=Yt<<24|dt<<16|jt|0,0!==Ue;);for(be=1<<Ee-1;ot&be;)be>>=1;if(0!==be?(ot&=be-1,ot+=be):ot=0,vt++,0==--gn[Ee]){if(Ee===bt)break;Ee=Re[Ne+ae[vt]]}if(si<Ee&&(ot&je)!==yt){for(0===_n&&(_n=si),Ot+=Q,Wt=1<<(Lt=Ee-_n);Lt+_n<bt&&!((Wt-=gn[Lt+_n])<=0);)Lt++,Wt<<=1;if(qn+=1<<Lt,1===Be&&852<qn||2===Be&&592<qn)return 1;we[yt=ot&je]=si<<24|Lt<<16|Ot-Te|0}}return 0!==ot&&(we[Ot+ot]=Ee-_n<<24|64<<16|0),ge.bits=si,0}},{"../utils/common":41}],51:[function(Me,wt,Ve){"use strict";wt.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(Me,wt,Ve){"use strict";var ue=Me("../utils/common");function _e(pe){for(var He=pe.length;0<=--He;)pe[He]=0}var Dt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Yt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],jt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Vn=new Array(576);_e(Vn);var Ee=new Array(60);_e(Ee);var vt=new Array(512);_e(vt);var Q=new Array(256);_e(Q);var bt=new Array(29);_e(bt);var si,Lt,_n,Wt=new Array(30);function qn(pe,He,kt,Rt,Qe){this.static_tree=pe,this.extra_bits=He,this.extra_base=kt,this.elems=Rt,this.max_length=Qe,this.has_stree=pe&&pe.length}function ot(pe,He){this.dyn_tree=pe,this.max_code=0,this.stat_desc=He}function it(pe){return pe<256?vt[pe]:vt[256+(pe>>>7)]}function pt(pe,He){pe.pending_buf[pe.pending++]=255&He,pe.pending_buf[pe.pending++]=He>>>8&255}function gn(pe,He,kt){pe.bi_valid>16-kt?(pe.bi_buf|=He<<pe.bi_valid&65535,pt(pe,pe.bi_buf),pe.bi_buf=He>>16-pe.bi_valid,pe.bi_valid+=kt-16):(pe.bi_buf|=He<<pe.bi_valid&65535,pe.bi_valid+=kt)}function Jt(pe,He,kt){gn(pe,kt[2*He],kt[2*He+1])}function mi(pe,He){for(var kt=0;kt|=1&pe,pe>>>=1,kt<<=1,0<--He;);return kt>>>1}function Ri(pe,He,kt){var Rt,Qe,$t=new Array(16),yn=0;for(Rt=1;Rt<=15;Rt++)$t[Rt]=yn=yn+kt[Rt-1]<<1;for(Qe=0;Qe<=He;Qe++){var Ht=pe[2*Qe+1];0!==Ht&&(pe[2*Qe]=mi($t[Ht]++,Ht))}}function hn(pe){var He;for(He=0;He<286;He++)pe.dyn_ltree[2*He]=0;for(He=0;He<30;He++)pe.dyn_dtree[2*He]=0;for(He=0;He<19;He++)pe.bl_tree[2*He]=0;pe.dyn_ltree[512]=1,pe.opt_len=pe.static_len=0,pe.last_lit=pe.matches=0}function $i(pe){8<pe.bi_valid?pt(pe,pe.bi_buf):0<pe.bi_valid&&(pe.pending_buf[pe.pending++]=pe.bi_buf),pe.bi_buf=0,pe.bi_valid=0}function $s(pe,He,kt,Rt){var Qe=2*He,$t=2*kt;return pe[Qe]<pe[$t]||pe[Qe]===pe[$t]&&Rt[He]<=Rt[kt]}function zr(pe,He,kt){for(var Rt=pe.heap[kt],Qe=kt<<1;Qe<=pe.heap_len&&(Qe<pe.heap_len&&$s(He,pe.heap[Qe+1],pe.heap[Qe],pe.depth)&&Qe++,!$s(He,Rt,pe.heap[Qe],pe.depth));)pe.heap[kt]=pe.heap[Qe],kt=Qe,Qe<<=1;pe.heap[kt]=Rt}function vc(pe,He,kt){var Rt,Qe,$t,yn,Ht=0;if(0!==pe.last_lit)for(;Rt=pe.pending_buf[pe.d_buf+2*Ht]<<8|pe.pending_buf[pe.d_buf+2*Ht+1],Qe=pe.pending_buf[pe.l_buf+Ht],Ht++,0===Rt?Jt(pe,Qe,He):(Jt(pe,($t=Q[Qe])+256+1,He),0!==(yn=Dt[$t])&&gn(pe,Qe-=bt[$t],yn),Jt(pe,$t=it(--Rt),kt),0!==(yn=Yt[$t])&&gn(pe,Rt-=Wt[$t],yn)),Ht<pe.last_lit;);Jt(pe,256,He)}function as(pe,He){var kt,Rt,Qe,$t=He.dyn_tree,yn=He.stat_desc.static_tree,Ht=He.stat_desc.has_stree,Rn=He.stat_desc.elems,Sr=-1;for(pe.heap_len=0,pe.heap_max=573,kt=0;kt<Rn;kt++)0!==$t[2*kt]?(pe.heap[++pe.heap_len]=Sr=kt,pe.depth[kt]=0):$t[2*kt+1]=0;for(;pe.heap_len<2;)$t[2*(Qe=pe.heap[++pe.heap_len]=Sr<2?++Sr:0)]=1,pe.depth[Qe]=0,pe.opt_len--,Ht&&(pe.static_len-=yn[2*Qe+1]);for(He.max_code=Sr,kt=pe.heap_len>>1;1<=kt;kt--)zr(pe,$t,kt);for(Qe=Rn;kt=pe.heap[1],pe.heap[1]=pe.heap[pe.heap_len--],zr(pe,$t,1),Rt=pe.heap[1],pe.heap[--pe.heap_max]=kt,pe.heap[--pe.heap_max]=Rt,$t[2*Qe]=$t[2*kt]+$t[2*Rt],pe.depth[Qe]=(pe.depth[kt]>=pe.depth[Rt]?pe.depth[kt]:pe.depth[Rt])+1,$t[2*kt+1]=$t[2*Rt+1]=Qe,pe.heap[1]=Qe++,zr(pe,$t,1),2<=pe.heap_len;);pe.heap[--pe.heap_max]=pe.heap[1],function(Ui,Ja){var rp,_c,rm,ls,W_,sp,$l=Ja.dyn_tree,G_=Ja.max_code,dx=Ja.stat_desc.static_tree,fx=Ja.stat_desc.has_stree,rk=Ja.stat_desc.extra_bits,j_=Ja.stat_desc.extra_base,Md=Ja.stat_desc.max_length,op=0;for(ls=0;ls<=15;ls++)Ui.bl_count[ls]=0;for($l[2*Ui.heap[Ui.heap_max]+1]=0,rp=Ui.heap_max+1;rp<573;rp++)Md<(ls=$l[2*$l[2*(_c=Ui.heap[rp])+1]+1]+1)&&(ls=Md,op++),$l[2*_c+1]=ls,G_<_c||(Ui.bl_count[ls]++,W_=0,j_<=_c&&(W_=rk[_c-j_]),Ui.opt_len+=(sp=$l[2*_c])*(ls+W_),fx&&(Ui.static_len+=sp*(dx[2*_c+1]+W_)));if(0!==op){do{for(ls=Md-1;0===Ui.bl_count[ls];)ls--;Ui.bl_count[ls]--,Ui.bl_count[ls+1]+=2,Ui.bl_count[Md]--,op-=2}while(0<op);for(ls=Md;0!==ls;ls--)for(_c=Ui.bl_count[ls];0!==_c;)G_<(rm=Ui.heap[--rp])||($l[2*rm+1]!==ls&&(Ui.opt_len+=(ls-$l[2*rm+1])*$l[2*rm],$l[2*rm+1]=ls),_c--)}}(pe,He),Ri($t,Sr,pe.bl_count)}function Y(pe,He,kt){var Rt,Qe,$t=-1,yn=He[1],Ht=0,Rn=7,Sr=4;for(0===yn&&(Rn=138,Sr=3),He[2*(kt+1)+1]=65535,Rt=0;Rt<=kt;Rt++)Qe=yn,yn=He[2*(Rt+1)+1],++Ht<Rn&&Qe===yn||(Ht<Sr?pe.bl_tree[2*Qe]+=Ht:0!==Qe?(Qe!==$t&&pe.bl_tree[2*Qe]++,pe.bl_tree[32]++):Ht<=10?pe.bl_tree[34]++:pe.bl_tree[36]++,$t=Qe,Sr=(Ht=0)===yn?(Rn=138,3):Qe===yn?(Rn=6,3):(Rn=7,4))}function Tt(pe,He,kt){var Rt,Qe,$t=-1,yn=He[1],Ht=0,Rn=7,Sr=4;for(0===yn&&(Rn=138,Sr=3),Rt=0;Rt<=kt;Rt++)if(Qe=yn,yn=He[2*(Rt+1)+1],!(++Ht<Rn&&Qe===yn)){if(Ht<Sr)for(;Jt(pe,Qe,pe.bl_tree),0!=--Ht;);else 0!==Qe?(Qe!==$t&&(Jt(pe,Qe,pe.bl_tree),Ht--),Jt(pe,16,pe.bl_tree),gn(pe,Ht-3,2)):Ht<=10?(Jt(pe,17,pe.bl_tree),gn(pe,Ht-3,3)):(Jt(pe,18,pe.bl_tree),gn(pe,Ht-11,7));$t=Qe,Sr=(Ht=0)===yn?(Rn=138,3):Qe===yn?(Rn=6,3):(Rn=7,4)}}_e(Wt);var ut=!1;function ye(pe,He,kt,Rt){var Qe,$t,yn;gn(pe,0+(Rt?1:0),3),$t=He,yn=kt,$i(Qe=pe),pt(Qe,yn),pt(Qe,~yn),ue.arraySet(Qe.pending_buf,Qe.window,$t,yn,Qe.pending),Qe.pending+=yn}Ve._tr_init=function(pe){ut||(function(){var He,kt,Rt,Qe,$t,yn=new Array(16);for(Qe=Rt=0;Qe<28;Qe++)for(bt[Qe]=Rt,He=0;He<1<<Dt[Qe];He++)Q[Rt++]=Qe;for(Q[Rt-1]=Qe,Qe=$t=0;Qe<16;Qe++)for(Wt[Qe]=$t,He=0;He<1<<Yt[Qe];He++)vt[$t++]=Qe;for($t>>=7;Qe<30;Qe++)for(Wt[Qe]=$t<<7,He=0;He<1<<Yt[Qe]-7;He++)vt[256+$t++]=Qe;for(kt=0;kt<=15;kt++)yn[kt]=0;for(He=0;He<=143;)Vn[2*He+1]=8,He++,yn[8]++;for(;He<=255;)Vn[2*He+1]=9,He++,yn[9]++;for(;He<=279;)Vn[2*He+1]=7,He++,yn[7]++;for(;He<=287;)Vn[2*He+1]=8,He++,yn[8]++;for(Ri(Vn,287,yn),He=0;He<30;He++)Ee[2*He+1]=5,Ee[2*He]=mi(He,5);si=new qn(Vn,Dt,257,286,15),Lt=new qn(Ee,Yt,0,30,15),_n=new qn(new Array(0),dt,0,19,7)}(),ut=!0),pe.l_desc=new ot(pe.dyn_ltree,si),pe.d_desc=new ot(pe.dyn_dtree,Lt),pe.bl_desc=new ot(pe.bl_tree,_n),pe.bi_buf=0,pe.bi_valid=0,hn(pe)},Ve._tr_stored_block=ye,Ve._tr_flush_block=function(pe,He,kt,Rt){var Qe,$t,yn=0;0<pe.level?(2===pe.strm.data_type&&(pe.strm.data_type=function(Ht){var Rn,Sr=4093624447;for(Rn=0;Rn<=31;Rn++,Sr>>>=1)if(1&Sr&&0!==Ht.dyn_ltree[2*Rn])return 0;if(0!==Ht.dyn_ltree[18]||0!==Ht.dyn_ltree[20]||0!==Ht.dyn_ltree[26])return 1;for(Rn=32;Rn<256;Rn++)if(0!==Ht.dyn_ltree[2*Rn])return 1;return 0}(pe)),as(pe,pe.l_desc),as(pe,pe.d_desc),yn=function(Ht){var Rn;for(Y(Ht,Ht.dyn_ltree,Ht.l_desc.max_code),Y(Ht,Ht.dyn_dtree,Ht.d_desc.max_code),as(Ht,Ht.bl_desc),Rn=18;3<=Rn&&0===Ht.bl_tree[2*jt[Rn]+1];Rn--);return Ht.opt_len+=3*(Rn+1)+5+5+4,Rn}(pe),($t=pe.static_len+3+7>>>3)<=(Qe=pe.opt_len+3+7>>>3)&&(Qe=$t)):Qe=$t=kt+5,kt+4<=Qe&&-1!==He?ye(pe,He,kt,Rt):4===pe.strategy||$t===Qe?(gn(pe,2+(Rt?1:0),3),vc(pe,Vn,Ee)):(gn(pe,4+(Rt?1:0),3),function(Ht,Rn,Sr,Ui){var Ja;for(gn(Ht,Rn-257,5),gn(Ht,Sr-1,5),gn(Ht,Ui-4,4),Ja=0;Ja<Ui;Ja++)gn(Ht,Ht.bl_tree[2*jt[Ja]+1],3);Tt(Ht,Ht.dyn_ltree,Rn-1),Tt(Ht,Ht.dyn_dtree,Sr-1)}(pe,pe.l_desc.max_code+1,pe.d_desc.max_code+1,yn+1),vc(pe,pe.dyn_ltree,pe.dyn_dtree)),hn(pe),Rt&&$i(pe)},Ve._tr_tally=function(pe,He,kt){return pe.pending_buf[pe.d_buf+2*pe.last_lit]=He>>>8&255,pe.pending_buf[pe.d_buf+2*pe.last_lit+1]=255&He,pe.pending_buf[pe.l_buf+pe.last_lit]=255&kt,pe.last_lit++,0===He?pe.dyn_ltree[2*kt]++:(pe.matches++,He--,pe.dyn_ltree[2*(Q[kt]+256+1)]++,pe.dyn_dtree[2*it(He)]++),pe.last_lit===pe.lit_bufsize-1},Ve._tr_align=function(pe){var He;gn(pe,2,3),Jt(pe,256,Vn),16===(He=pe).bi_valid?(pt(He,He.bi_buf),He.bi_buf=0,He.bi_valid=0):8<=He.bi_valid&&(He.pending_buf[He.pending++]=255&He.bi_buf,He.bi_buf>>=8,He.bi_valid-=8)}},{"../utils/common":41}],53:[function(Me,wt,Ve){"use strict";wt.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(Me,wt,Ve){"use strict";wt.exports="function"==typeof setImmediate?setImmediate:function(){var ue=[].slice.apply(arguments);ue.splice(1,0,0),setTimeout.apply(null,ue)}},{}]},{},[10])(10)}},Jo=>{Jo(Jo.s=363)}]);